[{"tags": ["ruby", "selenium-webdriver", "watir-webdriver"], "comments": [{"owner": {"reputation": 5134, "user_id": 1672197, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i8HkV.png?s=128&g=1", "display_name": "orde", "link": "https://stackoverflow.com/users/1672197/orde"}, "edited": false, "score": 0, "creation_date": 1477531993, "post_id": 40273940, "comment_id": 67808818, "body": "What versions of <code>watir-webdriver</code>, <code>selenium-webdriver</code>,<code>firefox</code> and <code>geckodriver</code> do you have?"}, {"owner": {"reputation": 1597, "user_id": 1270530, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/h3jji.jpg?s=128&g=1", "display_name": "rails4sandeep", "link": "https://stackoverflow.com/users/1270530/rails4sandeep"}, "reply_to_user": {"reputation": 5134, "user_id": 1672197, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i8HkV.png?s=128&g=1", "display_name": "orde", "link": "https://stackoverflow.com/users/1672197/orde"}, "edited": false, "score": 0, "creation_date": 1477535205, "post_id": 40273940, "comment_id": 67809567, "body": "<code>selenium-webdriver 3.0.0, watir-webdriver 0.9.3, geckodriver-v0.11.1</code>"}, {"owner": {"reputation": 5134, "user_id": 1672197, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i8HkV.png?s=128&g=1", "display_name": "orde", "link": "https://stackoverflow.com/users/1672197/orde"}, "edited": false, "score": 0, "creation_date": 1477615047, "post_id": 40273940, "comment_id": 67850869, "body": "And <code>firefox 49.0.2</code>?  You should post (in your original question) the minimal amount of code that reproduces the issue.  I&#39;m unable to repro using the versions listed here."}], "answers": [{"tags": [], "owner": {"reputation": 3480, "user_id": 4072371, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/112e615d8c60908294e30848d9556186?s=128&d=identicon&r=PG", "display_name": "titusfortner", "link": "https://stackoverflow.com/users/4072371/titusfortner"}, "is_accepted": false, "score": 0, "last_activity_date": 1477678524, "creation_date": 1477678524, "answer_id": 40310952, "question_id": 40273940, "link": "https://stackoverflow.com/questions/40273940/how-to-use-geckodriver-with-watir-webdriver/40310952#40310952", "title": "how to use geckodriver with watir webdriver", "body": "<p>There is no extra documentation because there is nothing extra to do with Watir.  It's finding the geckodriver file , but can't run it. Check to make sure it is executable on your system. </p>\n"}, {"comments": [{"owner": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "edited": false, "score": 1, "creation_date": 1483467414, "post_id": 41430864, "comment_id": 70106102, "body": "I do not believe this answers the question. If the goal is to test Firefox, switching to Chrome does not solve the problem."}], "tags": [], "owner": {"reputation": 107, "user_id": 2771742, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uOaOl.png?s=128&g=1", "display_name": "yanyingwang", "link": "https://stackoverflow.com/users/2771742/yanyingwang"}, "is_accepted": false, "score": -1, "last_activity_date": 1483512409, "last_edit_date": 1483512409, "creation_date": 1483377691, "answer_id": 41430864, "question_id": 40273940, "link": "https://stackoverflow.com/questions/40273940/how-to-use-geckodriver-with-watir-webdriver/41430864#41430864", "title": "how to use geckodriver with watir webdriver", "body": "<p>If your test not only just stick to firefox, you can use <code>chromedriver</code> instead of <code>geckodriver</code>, which is much easy, as far as my experience goes.</p>\n\n<p>1,  Add gem <code>watir</code> to your gemfile.<br>\n2,  Download file on this page <a href=\"https://sites.google.com/a/chromium.org/chromedriver/downloads\" rel=\"nofollow noreferrer\">https://sites.google.com/a/chromium.org/chromedriver/downloads</a>, and copy <code>chromedriver</code> to <code>/usr/bin</code> path.<br>\n3,   And then just run it:</p>\n\n<pre><code>browser = Watir::Browser.start(url)\nhtml = Nokogiri::HTML.parse(browser.html)\nbrowser.close\n</code></pre>\n\n<p>4, Also, you can use <code>headless</code> to start a virtual X screen to hide browser windows like this:</p>\n\n<pre><code>  headless = Headless.new\n  headless.start\n\n  browser = Watir::Browser.start(url)\n  html = Nokogiri::HTML.parse(browser.html)\n\n  browser.close\n  headless.destroy\n</code></pre>\n"}], "owner": {"reputation": 1597, "user_id": 1270530, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/h3jji.jpg?s=128&g=1", "display_name": "rails4sandeep", "link": "https://stackoverflow.com/users/1270530/rails4sandeep"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1762, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1483512409, "creation_date": 1477525962, "question_id": 40273940, "link": "https://stackoverflow.com/questions/40273940/how-to-use-geckodriver-with-watir-webdriver", "title": "how to use geckodriver with watir webdriver", "body": "<p>I ran a <code>bundle update</code> yesterday night and <code>selenium-webdriver</code> got updated to the latest version. </p>\n\n<p>My <code>watir-webdriver</code> tests pointed to <code>firefox</code> are now broken. </p>\n\n<p>The error message said to add <code>geckodriver</code> to the path. On my mac, I copied <code>geckodriver</code> to the <code>/usr/bin</code> and ran the tests again.</p>\n\n<p>This is the error I am getting now</p>\n\n<p><code>\n unable to connect to Mozilla geckodriver 127.0.0.1:4444 (Selenium::WebDriver::Error::WebDriverError)\n</code></p>\n\n<p>The <code>watir-webdriver</code> documentation does not seem to be updated on how to do this? </p>\n\n<p>Did anyone manage to fix this</p>\n"}, {"tags": ["ruby", "loops", "iteration"], "answers": [{"comments": [{"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 3, "creation_date": 1477528895, "post_id": 40274304, "comment_id": 67808159, "body": "This is not a <code>Range</code> literal, it is the flip-flop operator."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1477530871, "post_id": 40274304, "comment_id": 67808554, "body": "For those unfamiliar with the flip-flop operator (which I understand has its roots in Perl), it is explained quite well in <a href=\"http://nithinbekal.com/posts/ruby-flip-flop/\" rel=\"nofollow noreferrer\">this posting</a>. It&#39;s little-used and many  Rubiests would like to see it go the way of the <a href=\"https://en.wikipedia.org/wiki/Dodo\" rel=\"nofollow noreferrer\">dodo bird</a> (but it has supporters)."}, {"owner": {"reputation": 36, "user_id": 4394031, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/U9bYl.jpg?s=128&g=1", "display_name": "clonecq", "link": "https://stackoverflow.com/users/4394031/clonecq"}, "edited": false, "score": 0, "creation_date": 1477535426, "post_id": 40274304, "comment_id": 67809621, "body": "it is getting late, and I need to think over your example a bit more, it does not make sense to me yet..."}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1477545189, "post_id": 40274304, "comment_id": 67811989, "body": "When it comes down to it you can just gets.chomp and not assign it to a variable when you want ignore a line of input. It&#39;s great that you understand the flip flop operator but you question was if there is a &#39;better way to ignore the first line of input. Given that I have hardly ever seen the flip flop operator used and the syntax is identical to range, I wouldn&#39;t recommend it."}], "tags": [], "owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "is_accepted": false, "score": -1, "last_activity_date": 1477528772, "creation_date": 1477528772, "answer_id": 40274304, "question_id": 40273520, "link": "https://stackoverflow.com/questions/40273520/ruby-ignore-first-input-in-a-loop-with-this-expression-help-understand-this-ex/40274304#40274304", "title": "Ruby: Ignore first input in a loop with this expression, help understand this expression", "body": "<p>You're right that <code>(first=true)..false</code> evaluates to <code>true..false</code>, but that's not a valid statement - it will raise <code>ArgumentError: bad value for range</code>.</p>\n\n<p>Maybe someone else understands how this solution is working but I think it's definitely not the clearest or easiest way to get it done.</p>\n\n<p>If your goal is to get input N times and ignore the N inputs, you can do something like this:</p>\n\n<pre><code>num_times_to_ignore = 1\nnum_times_to_process = 3\n\n# ignore some lines\nnum_times_to_ignore.times { gets.chomp }\n\n# process each input individually\nnum_times_to_process.times.each { do_something_with(gets.chomp) }\n\n# or you can get all the inputs before processing\nresults = num_times_to_process.times.map { gets.chomp }\nresults.each { |input| do_something_with(input) }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 36, "user_id": 4394031, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/U9bYl.jpg?s=128&g=1", "display_name": "clonecq", "link": "https://stackoverflow.com/users/4394031/clonecq"}, "edited": false, "score": 0, "creation_date": 1477535252, "post_id": 40274694, "comment_id": 67809580, "body": "I like this idea of selecting rows based on this flip-flop, I can actually use it to return rows based on how recent the record is, i.e between 5 and 7 days ago without having to refer to dates, which are not important! I will be sorry to see the flipflop go - I like it  - and I just learned about it!"}, {"owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "reply_to_user": {"reputation": 36, "user_id": 4394031, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/U9bYl.jpg?s=128&g=1", "display_name": "clonecq", "link": "https://stackoverflow.com/users/4394031/clonecq"}, "edited": false, "score": 0, "creation_date": 1477535422, "post_id": 40274694, "comment_id": 67809619, "body": "It&#39;s actually a bad example as it can be rewritten to <code>if row &gt;= 5 &amp;&amp; row &lt;= 10</code>; but for example <code>if (line =~ &#47;BEGIN&#47;) .. (line =~ &#47;END&#47;)</code> has a much less trivial rewrite."}], "tags": [], "owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "is_accepted": false, "score": 2, "last_activity_date": 1477532236, "last_edit_date": 1477532236, "creation_date": 1477531849, "answer_id": 40274694, "question_id": 40273520, "link": "https://stackoverflow.com/questions/40273520/ruby-ignore-first-input-in-a-loop-with-this-expression-help-understand-this-ex/40274694#40274694", "title": "Ruby: Ignore first input in a loop with this expression, help understand this expression", "body": "<p>Several key insights:</p>\n\n<ul>\n<li><code>left..right</code> in an <code>if</code> is a flip-flop operator, as noted by J\u00f6rg W Mittag: it evaluates the left side (and <em>only</em> left side) as long as it is falsy (returning that value), then evaluates the right side (and <em>only</em> right side) as long as it's truthy (returning <code>true</code>), then goes back to evaluating the left side. This allows you to write things like <code>if (row == 5)..(row == 10)</code> and get the rows from 5th to 10th (because it returns <code>false</code> for left side from 1 to 4, then <code>true</code> from left side from <code>5</code>, then flips and evaluates the right side from 6 to 10, returning <code>true</code> each time, and flipping the last time at 10; then back to returning <code>false</code> for the rest of the rows from the left side).</li>\n<li>since <code>first</code> is not mentioned outside the block, it is a variable scoped to the block; that means its value does not carry over between steps, and is reset to <code>nil</code> in each iteration</li>\n</ul>\n\n<p>So:</p>\n\n<ul>\n<li>In the first step, <code>(first = true)</code> is <code>true</code>; the flip-flop returns <code>true</code> and flips to the right side</li>\n<li><code>true and first</code> evaluates to <code>true</code>; <code>next</code> is processed, loop loops.</li>\n<li>In the second step, the local variable <code>first</code> is back to <code>nil</code></li>\n<li>the flip-flop is evaluating the right side -- <code>false</code> -- it doesn't flip, and returns <code>true</code>.</li>\n<li><code>true and first</code> is <code>false</code>; <code>next</code> is <em>not</em> evaluated</li>\n<li>The third and further steps are all identical to the second, since nothing changes: the flip-flop will be evaluating the right side, <code>first</code> will continue to be <code>nil</code>.</li>\n</ul>\n\n<p>EDIT: an important typo :P</p>\n"}, {"comments": [{"owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "edited": false, "score": 0, "creation_date": 1477532363, "post_id": 40274751, "comment_id": 67808893, "body": "Ooh, I totally went for explaining the flip-flop and completely forgot the whole &quot;how do I drop the first line&quot; question :D +1"}, {"owner": {"reputation": 36, "user_id": 4394031, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/U9bYl.jpg?s=128&g=1", "display_name": "clonecq", "link": "https://stackoverflow.com/users/4394031/clonecq"}, "reply_to_user": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "edited": false, "score": 0, "creation_date": 1477534726, "post_id": 40274751, "comment_id": 67809476, "body": "thank you, and @Amadan for your thorough explanations. I learned something very interesting today. I find this flip-flop a very useful operator, and after I mostly figured it out I can use it in many situations. As for alternative ways I am amazed how simple the first option is (should it be drop(0) to print from 1 to 5, by the way?). Second option I actually considered, but I thought it was not Ruby enough..."}, {"owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "edited": false, "score": 0, "creation_date": 1477535270, "post_id": 40274751, "comment_id": 67809584, "body": "It probably isn&#39;t idiomatic (or not any more), as it throws a warning about assigning in a conditional. An upgraded version with <code>first = !first</code> instead of <code>first = true</code> works without warning."}, {"owner": {"reputation": 36, "user_id": 4394031, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/U9bYl.jpg?s=128&g=1", "display_name": "clonecq", "link": "https://stackoverflow.com/users/4394031/clonecq"}, "reply_to_user": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "edited": false, "score": 0, "creation_date": 1477535620, "post_id": 40274751, "comment_id": 67809672, "body": "@Amadan Oh, yes! It actually does throw a warning, forgot about that. Thanks for correction!"}], "tags": [], "owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "is_accepted": true, "score": 2, "last_activity_date": 1477533030, "last_edit_date": 1477533030, "creation_date": 1477532224, "answer_id": 40274751, "question_id": 40273520, "link": "https://stackoverflow.com/questions/40273520/ruby-ignore-first-input-in-a-loop-with-this-expression-help-understand-this-ex/40274751#40274751", "title": "Ruby: Ignore first input in a loop with this expression, help understand this expression", "body": "<p><a href=\"https://ruby-doc.org/core/doc/syntax/control_expressions_rdoc.html#label-Flip-Flop\" rel=\"nofollow\">The flip-flop operator</a> is a somewhat obscure feature of Ruby inherited from Perl (like most of Ruby's more obscure features). It is an expression that flips and flops back and forth between <code>true</code> and <code>false</code>.</p>\n\n<p>Basically, it starts out as <code>false</code>, then it \"flips\" to <code>true</code> as soon as the <em>left</em> expression evaluates to a <em>truthy</em> object, and it \"flops\" back to <code>false</code> again as soon as the <em>right</em> expression evaluates to a <em>truthy</em> object.</p>\n\n<p>So, the condition starts out as <code>false</code>. The <em>first time</em> through the loop, the <em>left</em> expression evaluates to a <em>truthy</em> value (in Ruby, assignments evaluate to the value that is being assigned) and as a side-effect also assigns <code>true</code> to <code>first</code>. Since the <em>left</em> expression evaluates to a <em>truthy</em> value, the flip-flop flips to <code>true</code>, and the entire condition now is <code>true and true</code> which is <code>true</code>. So, we execute the body of the conditional expression, which is simply <code>next</code>, i.e. skips the current iteration.</p>\n\n<p>The <em>second</em> (and all the other times) through the loop, the flip-flop has <em>already</em> flipped to <code>true</code>, so now we <em>only</em> check the <em>right</em> expression for when the flip-flop should flop back to <code>false</code> again. The <em>left</em> expression is no longer checked. Well, the right expression is just <code>false</code> so we will never flop back to <code>false</code> again, the flip-flop will now always be <code>true</code>. However, the left expression will not be evaluated (we only check the right expression for when to flop back again), which means the assignment to <code>first</code> will never be executed, which means <code>first</code> is an un-initialized local variable, which means it evaluates to <code>nil</code>, which is <em>falsy</em>, which means that <code>true and nil</code> evaluates to <code>false</code>. And this will continue to be so for every iteration of the loop.</p>\n\n<p>So, this code uses an obscure feature (the flip-flop) in an even more obscure manner (not as a conditional but simply to \"disable\" execution of the assignment). This is very definitely <em>not</em> code that any Rubyist would write. A much more idiomatic way would be </p>\n\n<pre><code>(0..5).drop(1).each do |i|\n  puts i\nend\n</code></pre>\n\n<p>or</p>\n\n<pre><code>(0..5).each.with_index do |n, idx|\n  next if idx.zero?\n  puts n\nend\n</code></pre>\n\n<p>Note that nobu is a Ruby core developer, Japanese, and one of the earliest adopters of Ruby. The Japanese early adopters of Ruby are a pretty different sub-community from the larger Ruby community. It may very well be that this is actually a well-known and well-understood idiom among Japanese Rubyists and/or Ruby core developers. The thing about idioms is that if you know what they look like and you know what they mean, you don't need to understand them, so code like this <em>may</em> be okay, <em>if</em> it is idiomatic. But it certainly is <em>not</em> idiomatic in the larger Ruby community.</p>\n"}], "owner": {"reputation": 36, "user_id": 4394031, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/U9bYl.jpg?s=128&g=1", "display_name": "clonecq", "link": "https://stackoverflow.com/users/4394031/clonecq"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 142, "favorite_count": 1, "accepted_answer_id": 40274751, "answer_count": 3, "score": 0, "last_activity_date": 1477533030, "creation_date": 1477523152, "question_id": 40273520, "link": "https://stackoverflow.com/questions/40273520/ruby-ignore-first-input-in-a-loop-with-this-expression-help-understand-this-ex", "title": "Ruby: Ignore first input in a loop with this expression, help understand this expression", "body": "<p>I needed a loop to read text line-by-line but completely ignore the first line. I come across this very handy expression posted online by Nobuyoshi Nakada. This expression skips one iteration of Enumerator. Can someone help to explain the last step in evaluation? Here is the example for illustration. This code will print 1 to 5 instead of 0 to 5. I am new to programming, I don't know if this a common solution. It took me 3 days to find it!</p>\n\n<pre><code>(0..5).each do |i|\n  if (first=true)..false and first\n    next\n  end\n  puts i\nend\n</code></pre>\n\n<p>I attemplted to evaluate <code>if (first=true)..false and first</code> with <code>pry</code> but could not get deep enough. </p>\n\n<ol>\n<li><p><code>(first=true)</code> evaluates to: <strong>true</strong> (value of <code>first</code> is <strong>true</strong>)</p></li>\n<li><p><code>(first=true)..false</code> evaluates to: <strong>true</strong>..false (value of <code>first</code> is still <strong>true</strong>)</p></li>\n<li><p><code>(first=true)..false and first</code> evaluates to: <strong>true</strong>..false and <strong>true</strong>, which is <strong>true</strong> and <strong>true</strong> (value of <code>first</code> is still <strong>true</strong>)</p></li>\n<li><p><code>if (first=true)..false and first</code> evaluates to: if(<strong>true</strong>), executes <strong>next</strong> statement and exits <em>if</em> loop (value of <code>first</code> is now <strong>nil</strong>)</p></li>\n<li><p>Next iteration of Enumerator returns to <code>if (first=true)..false and first</code> expression (value of first is still <strong>nil</strong>)</p></li>\n<li><p>This step evaluates to <strong>false</strong>: <code>if(first = true)..false and nil</code> (value of <code>first</code> on the left side is <strong>true</strong> and on right side is <strong>nil</strong>(<strong>false</strong>)\nand I am lost here\u2026 </p></li>\n</ol>\n\n<p>QUESTION: Why is <code>first</code> on the right side of if expression is not assigned \"<strong>true</strong>\". It seems that value of <code>first</code> is <strong>true</strong> and <strong>nil</strong> at the same time? Have I missed something here?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "bundler", "rails-console", "ruby-2.3.1"], "comments": [{"owner": {"reputation": 1101, "user_id": 195160, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/faaeed64f4c43e8cf1bda0216531d2de?s=128&d=identicon&r=PG", "display_name": "Montdidier", "link": "https://stackoverflow.com/users/195160/montdidier"}, "edited": false, "score": 0, "creation_date": 1477544818, "post_id": 40273439, "comment_id": 67811882, "body": "Probably not enough information to diagnose. Some suggestions. Pending migration or removed a migration? Is rails aware of the correct environment? i.e. RAILS_ENV=production bundle exec rails c"}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 6915163, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-sgz75xHf_nw/AAAAAAAAAAI/AAAAAAAAAB4/YkahD5P14ZA/photo.jpg?sz=128", "display_name": "Rahul Kewalramani", "link": "https://stackoverflow.com/users/6915163/rahul-kewalramani"}, "is_accepted": false, "score": 0, "last_activity_date": 1477546337, "creation_date": 1477546337, "answer_id": 40276815, "question_id": 40273439, "link": "https://stackoverflow.com/questions/40273439/cannot-load-such-file-bundler-setup-loaderror-rails-c-was-working-10-mi/40276815#40276815", "title": "cannot load such file -- bundler/setup (LoadError) - rails c - was working 10 minutes ago", "body": "<p>Try with <strong>gem install bundler</strong> to load bundle\nMight help it !!</p>\n"}, {"tags": [], "owner": {"reputation": 176, "user_id": 4394917, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-HxfUWEWDkGY/AAAAAAAAAAI/AAAAAAAAASU/bcnFGkQSNqA/photo.jpg?sz=128", "display_name": "dsn raghavendra rao", "link": "https://stackoverflow.com/users/4394917/dsn-raghavendra-rao"}, "is_accepted": false, "score": 0, "last_activity_date": 1477552312, "last_edit_date": 1477552312, "creation_date": 1477551667, "answer_id": 40278188, "question_id": 40273439, "link": "https://stackoverflow.com/questions/40273439/cannot-load-such-file-bundler-setup-loaderror-rails-c-was-working-10-mi/40278188#40278188", "title": "cannot load such file -- bundler/setup (LoadError) - rails c - was working 10 minutes ago", "body": "<p>Need to check with migrations in production </p>\n\n<pre><code>rake db:migrate\n</code></pre>\n\n<p>after that execute bundle command</p>\n\n<pre><code>bundle install\n</code></pre>\n\n<p>Or check with this command to run rails console in production</p>\n\n<pre><code>RAILS_ENV=production rails console  #rails 4\nrails console production            #rails 3\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 750, "user_id": 4032946, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d430e8647c39d6d9f8db1a660e13d49c?s=128&d=identicon&r=PG&f=1", "display_name": "Avir94", "link": "https://stackoverflow.com/users/4032946/avir94"}, "is_accepted": true, "score": 1, "last_activity_date": 1477698056, "creation_date": 1477698056, "answer_id": 40314591, "question_id": 40273439, "link": "https://stackoverflow.com/questions/40273439/cannot-load-such-file-bundler-setup-loaderror-rails-c-was-working-10-mi/40314591#40314591", "title": "cannot load such file -- bundler/setup (LoadError) - rails c - was working 10 minutes ago", "body": "<p>The answer was a rails 5 problem. </p>\n\n<p><code>bundle config \u2013delete bin\nrails app:update:bin</code></p>\n\n<p>Rails 5 uses different binaries than any other rails version and thus answers for other rails versions were not giving me expected results. This command rebuilt the binary files in order for me to properly execute <code>rails c</code> </p>\n"}], "owner": {"reputation": 750, "user_id": 4032946, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d430e8647c39d6d9f8db1a660e13d49c?s=128&d=identicon&r=PG&f=1", "display_name": "Avir94", "link": "https://stackoverflow.com/users/4032946/avir94"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1047, "favorite_count": 0, "accepted_answer_id": 40314591, "answer_count": 3, "score": 0, "last_activity_date": 1478300094, "creation_date": 1477522627, "last_edit_date": 1478300094, "question_id": 40273439, "link": "https://stackoverflow.com/questions/40273439/cannot-load-such-file-bundler-setup-loaderror-rails-c-was-working-10-mi", "title": "cannot load such file -- bundler/setup (LoadError) - rails c - was working 10 minutes ago", "body": "<p>I have no Idea what has gone wrong here. <code>rails c</code> was working 10 minutes ago perfectly. I loaded into my production environment and for some reason the console didn't recognize one of my database tables. I exited and attempted again a few more times with no luck in getting it to recognize the table, then I try one more time and poof, no more rails c.</p>\n\n<p>I have tried a few times now uninstalling bundler, my ruby version, <code>rvm cleanup all</code>, and more everything that shows online is not working. </p>\n\n<p>Any help would be greatly appreciated. ruby 2.3.1, rails 5, bundler-1.13.6</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4.2", "ruby-2.0"], "answers": [{"comments": [{"owner": {"reputation": 1548, "user_id": 1246279, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2533d5a4299cad329268e552c47fa8d?s=128&d=identicon&r=PG", "display_name": "philomory", "link": "https://stackoverflow.com/users/1246279/philomory"}, "edited": false, "score": 0, "creation_date": 1477522756, "post_id": 40273328, "comment_id": 67806615, "body": "The last of those is emphatically <i>not</i> the same as the others, or what the OP asked for. <code>a ||= b</code> is more akin to <code>a = b unless a</code> than <code>a = b if b</code>, which as a very different meaning."}, {"owner": {"reputation": 1755, "user_id": 1877683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uttsA.jpg?s=128&g=1", "display_name": "C dot StrifeVII", "link": "https://stackoverflow.com/users/1877683/c-dot-strifevii"}, "reply_to_user": {"reputation": 1548, "user_id": 1246279, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2533d5a4299cad329268e552c47fa8d?s=128&d=identicon&r=PG", "display_name": "philomory", "link": "https://stackoverflow.com/users/1246279/philomory"}, "edited": false, "score": 0, "creation_date": 1477522821, "post_id": 40273328, "comment_id": 67806638, "body": "Yup you are right, because there is no indication that this is an initial assignment."}], "tags": [], "owner": {"reputation": 1755, "user_id": 1877683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uttsA.jpg?s=128&g=1", "display_name": "C dot StrifeVII", "link": "https://stackoverflow.com/users/1877683/c-dot-strifevii"}, "is_accepted": false, "score": 0, "last_activity_date": 1477522775, "last_edit_date": 1477522775, "creation_date": 1477522081, "answer_id": 40273328, "question_id": 40273321, "link": "https://stackoverflow.com/questions/40273321/is-there-a-shorthand-way-to-check-for-presence-before-assigning-a-variable-in-ru/40273328#40273328", "title": "Is there a shorthand way to check for presence before assigning a variable in ruby?", "body": "<p>you could do this </p>\n\n<pre><code>a = b if !b.nil?\n</code></pre>\n\n<p>or </p>\n\n<pre><code>a = b if b\n</code></pre>\n\n<p>or</p>\n\n<pre><code>a = b if b != nil\n</code></pre>\n\n<p>The thing about <code>present?</code> is it protects you against the trap of empty arrays, hashs, and other collections. So these will work if you are not concerned about an empty collection.</p>\n"}, {"tags": [], "owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "is_accepted": false, "score": 1, "last_activity_date": 1477531264, "creation_date": 1477531264, "answer_id": 40274619, "question_id": 40273321, "link": "https://stackoverflow.com/questions/40273321/is-there-a-shorthand-way-to-check-for-presence-before-assigning-a-variable-in-ru/40274619#40274619", "title": "Is there a shorthand way to check for presence before assigning a variable in ruby?", "body": "<p>Just <code>a = b if b.present?</code> on its own is functionally equivalent to:</p>\n\n<pre><code>if b.present?\n  a = b\nelse\n  a = nil\nend\n</code></pre>\n\n<p>so you could use <a href=\"http://api.rubyonrails.org/classes/Object.html#method-i-presence\" rel=\"nofollow\"><code>Object#presence</code></a>:</p>\n\n<blockquote>\n  <p><strong>presence()</strong><br>\n  Returns the receiver if it's present otherwise returns <code>nil</code>. <code>object.presence</code> is equivalent to</p>\n\n<pre><code>object.present? ? object : nil\n</code></pre>\n</blockquote>\n\n<p>like this:</p>\n\n<pre><code>a = b.presence\n</code></pre>\n\n<p>If <code>a</code> already has a value and you're really saying:</p>\n\n<pre><code>a = something_interesting\na = b if b.present?\n</code></pre>\n\n<p>then you could say:</p>\n\n<pre><code>a = b.presence || something_interesting\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 36, "user_id": 5952396, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b6ca3eabea9f8fcdb1d5457faeb4363?s=128&d=identicon&r=PG&f=1", "display_name": "Stanislav Gospodinov", "link": "https://stackoverflow.com/users/5952396/stanislav-gospodinov"}, "is_accepted": false, "score": 0, "last_activity_date": 1477531499, "creation_date": 1477531499, "answer_id": 40274652, "question_id": 40273321, "link": "https://stackoverflow.com/questions/40273321/is-there-a-shorthand-way-to-check-for-presence-before-assigning-a-variable-in-ru/40274652#40274652", "title": "Is there a shorthand way to check for presence before assigning a variable in ruby?", "body": "<p>You can use <code>||=</code> operator, but it depends on of what you want your code to do. This operator assigns the value of <code>b</code> to <code>a</code> if <code>b</code> is not <code>nil</code>.For example, if a = 5 and perform the following operation <code>a ||= b</code> value of <code>b</code> will be assigned to <code>a</code> <strong>only if</strong> <code>b</code> is not <code>nil</code>, but if <code>a</code> was not previously declared value of <code>a</code> will be <code>nil</code> for this code <code>a ||= b</code>.</p>\n\n<p>EXAMPLES:</p>\n\n<pre><code>irb(main):001:0&gt; b = nil\n=&gt; nil\nirb(main):002:0&gt; a ||= b\n=&gt; nil\nirb(main):003:0&gt; b = 5\n=&gt; 5\nirb(main):004:0&gt; a ||= b\n=&gt; 5\nirb(main):005:0&gt; a ||= nil\n=&gt; 5\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 458, "user_id": 2126488, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aed2133ec38735ac8b559897c58cd3d0?s=128&d=identicon&r=PG", "display_name": "bishal", "link": "https://stackoverflow.com/users/2126488/bishal"}, "is_accepted": false, "score": 0, "last_activity_date": 1477532940, "creation_date": 1477532940, "answer_id": 40274849, "question_id": 40273321, "link": "https://stackoverflow.com/questions/40273321/is-there-a-shorthand-way-to-check-for-presence-before-assigning-a-variable-in-ru/40274849#40274849", "title": "Is there a shorthand way to check for presence before assigning a variable in ruby?", "body": "<p>||= operator is what you are looking for. It checks if the operand is nil or present before assigning a value. If present doesn't assign, if nil or undefined will assign the value.</p>\n\n<pre><code>[1] pry(main)&gt; a\nNameError: undefined local variable or method `a' for main:Object\nfrom (pry):1:in `__pry__'\n[2] pry(main)&gt; a ||= 100\n=&gt; 100\n[3] pry(main)&gt; a = nil\n=&gt; nil\n[4] pry(main)&gt; a ||= 100\n=&gt; 100\n[5] pry(main)&gt; a ||= 200\n=&gt; 100\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 10518841, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Fl9knYhU75A/AAAAAAAAAAI/AAAAAAAAAAA/yY4P0RpoSQo/photo.jpg?sz=128", "display_name": "Carlo Martinucci", "link": "https://stackoverflow.com/users/10518841/carlo-martinucci"}, "is_accepted": false, "score": 1, "last_activity_date": 1539783128, "creation_date": 1539783128, "answer_id": 52856186, "question_id": 40273321, "link": "https://stackoverflow.com/questions/40273321/is-there-a-shorthand-way-to-check-for-presence-before-assigning-a-variable-in-ru/52856186#52856186", "title": "Is there a shorthand way to check for presence before assigning a variable in ruby?", "body": "<p>if b is some complex expression that you want to evaluate just once, you could use</p>\n\n<p><code>a = b.presence || a</code></p>\n"}], "owner": {"reputation": 931, "user_id": 2788619, "user_type": "registered", "accept_rate": 56, "profile_image": "https://graph.facebook.com/100006561616235/picture?type=large", "display_name": "L457", "link": "https://stackoverflow.com/users/2788619/l457"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 762, "favorite_count": 0, "answer_count": 5, "score": 2, "last_activity_date": 1539783128, "creation_date": 1477522017, "last_edit_date": 1477887808, "question_id": 40273321, "link": "https://stackoverflow.com/questions/40273321/is-there-a-shorthand-way-to-check-for-presence-before-assigning-a-variable-in-ru", "title": "Is there a shorthand way to check for presence before assigning a variable in ruby?", "body": "<p>is there a shorter way to do this (considering <code>a</code> is already set to some value):</p>\n\n<p><code>a = b if b.present?\n</code> </p>\n\n<p>I may have come across a way to do this before, but don't remember.</p>\n"}, {"tags": ["ruby", "twilio"], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 3361183, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2541b455638accd4c70f5f416134f71?s=128&d=identicon&r=PG&f=1", "display_name": "L. Phipps", "link": "https://stackoverflow.com/users/3361183/l-phipps"}, "edited": false, "score": 0, "creation_date": 1477584289, "post_id": 40280891, "comment_id": 67836888, "body": "Thanks! While that would delay the mp3 from playing until after the DTMF tones are played, you are still guessing when to start playing the mp3. If the time to answer is greater than the time to make the call to that webhook and grab the TwiML to play the mp3, then the same problem would exist, albeit to a lesser extent. Adding <code>&lt;Pause&gt;</code>s could help, but then you are still guessing and could end up with the reverse problem."}, {"owner": {"reputation": 21, "user_id": 3361183, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2541b455638accd4c70f5f416134f71?s=128&d=identicon&r=PG&f=1", "display_name": "L. Phipps", "link": "https://stackoverflow.com/users/3361183/l-phipps"}, "edited": false, "score": 0, "creation_date": 1477584295, "post_id": 40280891, "comment_id": 67836889, "body": "The closest thing I can find to what I need is using the  <code>&lt;Dial&gt;</code> verb with the <code>&lt;Number&gt;</code> noun which accepts a callback url for when the party picks up, as well as <code>sendDigits</code>. However, this doesn&#39;t work either as <code>&lt;Number&gt;</code> expects a valid phone number and doesn&#39;t seem to execute the <code>sendDigits</code> without a number to dial first."}, {"owner": {"reputation": 53136, "user_id": 28376, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/8ec1383b240b5ba15ffb9743fceb3c0e?s=128&d=identicon&r=PG", "display_name": "philnash", "link": "https://stackoverflow.com/users/28376/philnash"}, "reply_to_user": {"reputation": 21, "user_id": 3361183, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2541b455638accd4c70f5f416134f71?s=128&d=identicon&r=PG&f=1", "display_name": "L. Phipps", "link": "https://stackoverflow.com/users/3361183/l-phipps"}, "edited": false, "score": 0, "creation_date": 1477658292, "post_id": 40280891, "comment_id": 67867535, "body": "So, once you&#39;ve entered the DTMF tones does the phone ring again until the agent on the other end picks up? And you need to know when that ringing is over?"}, {"owner": {"reputation": 21, "user_id": 3361183, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2541b455638accd4c70f5f416134f71?s=128&d=identicon&r=PG&f=1", "display_name": "L. Phipps", "link": "https://stackoverflow.com/users/3361183/l-phipps"}, "edited": false, "score": 0, "creation_date": 1477775183, "post_id": 40280891, "comment_id": 67902895, "body": "Yes, exactly. And given that it is initiated by the the IVR system, I&#39;m unsure if Twilio has the ability to know that another party is being connected to their call."}, {"owner": {"reputation": 53136, "user_id": 28376, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/8ec1383b240b5ba15ffb9743fceb3c0e?s=128&d=identicon&r=PG", "display_name": "philnash", "link": "https://stackoverflow.com/users/28376/philnash"}, "reply_to_user": {"reputation": 21, "user_id": 3361183, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2541b455638accd4c70f5f416134f71?s=128&d=identicon&r=PG&f=1", "display_name": "L. Phipps", "link": "https://stackoverflow.com/users/3361183/l-phipps"}, "edited": false, "score": 0, "creation_date": 1477910520, "post_id": 40280891, "comment_id": 67935350, "body": "Ah, we do not have that ability. From Twilio&#39;s end all we are getting is a stream of audio, we don&#39;t know what the other IVR is doing."}], "tags": [], "owner": {"reputation": 53136, "user_id": 28376, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/8ec1383b240b5ba15ffb9743fceb3c0e?s=128&d=identicon&r=PG", "display_name": "philnash", "link": "https://stackoverflow.com/users/28376/philnash"}, "is_accepted": false, "score": 1, "last_activity_date": 1477560331, "creation_date": 1477560331, "answer_id": 40280891, "question_id": 40273111, "link": "https://stackoverflow.com/questions/40273111/navigating-an-ivr-with-twilio/40280891#40280891", "title": "Navigating an IVR with Twilio", "body": "<p>Twilio developer evangelist here.</p>\n\n<p>If you want a webhook when your DTMF tones are finished and the call is put through to a human, you could try your second option using <a href=\"https://www.twilio.com/docs/api/twiml/play#examples-2\" rel=\"nofollow\"><code>&lt;Play&gt;</code> to send DTMF tones</a> and then use a <a href=\"https://www.twilio.com/docs/api/twiml/redirect\" rel=\"nofollow\"><code>&lt;Redirect&gt;</code></a> to cause a new webhook to occur. Like this:</p>\n\n<pre><code>&lt;Response&gt;\n  &lt;Play digits=\"1234\"&gt;&lt;/Play&gt;\n  &lt;Redirect&gt;http://example.com/play_mp3&lt;/Redirect&gt;\n&lt;/Response&gt;\n</code></pre>\n\n<p>If you find that you are still playing the mp3 before a person has actually answered, you can use <a href=\"https://www.twilio.com/docs/api/twiml/pause\" rel=\"nofollow\"><code>&lt;Pause&gt;</code></a> to wait before sending the <code>&lt;Redirect&gt;</code>.</p>\n\n<p>Let me know if that helps at all.</p>\n"}], "owner": {"reputation": 21, "user_id": 3361183, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2541b455638accd4c70f5f416134f71?s=128&d=identicon&r=PG&f=1", "display_name": "L. Phipps", "link": "https://stackoverflow.com/users/3361183/l-phipps"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 274, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1477560331, "creation_date": 1477520796, "question_id": 40273111, "link": "https://stackoverflow.com/questions/40273111/navigating-an-ivr-with-twilio", "title": "Navigating an IVR with Twilio", "body": "<p>I am trying to navigate an known IVR, that ends with the last input forwarding to a real person. When that person picks up, I want to make a call back to the app to play an mp3. Using <code>sendDigits</code> <a href=\"https://www.twilio.com/docs/api/rest/making-calls#post\" rel=\"nofollow\">https://www.twilio.com/docs/api/rest/making-calls#post</a> with call creation works for navigating the menu, but the callback to the <code>url</code> parameter happens when the call is answered by the IVR instead of the end user. So in that case, the mp3 is already playing by the time the person the call is forwarded to answers.</p>\n\n<p>The other way I was thinking of trying involved not using <code>sendDigits</code> with call creation, but using a different <code>url</code> callback to grab TwiML and use <code>Play</code> <a href=\"https://www.twilio.com/docs/api/twiml/play\" rel=\"nofollow\">https://www.twilio.com/docs/api/twiml/play</a> to play the DTMF tones needed. In this scenario though, reading though the docs, I don't see a way to send a callback url that would be called when the call is forwarded and the person picks up.</p>\n\n<p>Any suggestions?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "answers": [{"comments": [{"owner": {"reputation": 3791, "user_id": 1467802, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/c370a1855b3094ca8b0e737822164a1a?s=128&d=identicon&r=PG", "display_name": "Mathieu", "link": "https://stackoverflow.com/users/1467802/mathieu"}, "edited": false, "score": 0, "creation_date": 1477551053, "post_id": 40273409, "comment_id": 67814625, "body": "I alreayd tried with gon gem and using a .js.erb file but it does not work. I &#39;d need more precise code suggestion."}], "tags": [], "owner": {"reputation": 26, "user_id": 4551561, "user_type": "registered", "profile_image": "https://graph.facebook.com/923622557661131/picture?type=large", "display_name": "Andrievs Niedra", "link": "https://stackoverflow.com/users/4551561/andrievs-niedra"}, "is_accepted": false, "score": 0, "last_activity_date": 1477522468, "creation_date": 1477522468, "answer_id": 40273409, "question_id": 40272359, "link": "https://stackoverflow.com/questions/40272359/rails-4-moving-js-inline-script-inside-view-to-js-file/40273409#40273409", "title": "Rails 4 - Moving js inline script inside View to JS file", "body": "<p>.js.erb is an option. This way the js files will be parsed before compiling. Not sure though it will work the way you want.</p>\n\n<p>I would recommend to leave the variables in the layout as vars and moving only the static JS parts to the assets.</p>\n"}, {"tags": [], "owner": {"reputation": 1437, "user_id": 3975513, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wg7HN.jpg?s=128&g=1", "display_name": "schutta", "link": "https://stackoverflow.com/users/3975513/schutta"}, "is_accepted": true, "score": 1, "last_activity_date": 1477576865, "creation_date": 1477576865, "answer_id": 40286651, "question_id": 40272359, "link": "https://stackoverflow.com/questions/40272359/rails-4-moving-js-inline-script-inside-view-to-js-file/40286651#40286651", "title": "Rails 4 - Moving js inline script inside View to JS file", "body": "<p>How about moving the <code>loadInfoPopin()</code> function into a separate JS file and altering the function slightly to take in an argument for the html message?</p>\n\n<pre><code>function loadInfoPopin(html_message) {\n  Messenger().post({\n    message:  html_message\n  });\n</code></pre>\n\n<p>Setup the html for the message within the loop before passing into and calling <code>loadInfoPopin</code>.</p>\n"}], "owner": {"reputation": 3791, "user_id": 1467802, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/c370a1855b3094ca8b0e737822164a1a?s=128&d=identicon&r=PG", "display_name": "Mathieu", "link": "https://stackoverflow.com/users/1467802/mathieu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 142, "favorite_count": 0, "accepted_answer_id": 40286651, "answer_count": 2, "score": 1, "last_activity_date": 1477576865, "creation_date": 1477517059, "last_edit_date": 1477520386, "question_id": 40272359, "link": "https://stackoverflow.com/questions/40272359/rails-4-moving-js-inline-script-inside-view-to-js-file", "title": "Rails 4 - Moving js inline script inside View to JS file", "body": "<p>I would like to move some js inline scripts I have on my homepage to a javascript file (in Assets) but there is some complexity due to variables.</p>\n\n<p><strong>home.html.erb</strong></p>\n\n<pre><code>&lt;div&gt;\nthis is the homepage\n&lt;/div&gt;\n&lt;script&gt;\n  &lt;% @deal.deal_details.each_with_index do |popin, index| %&gt;\n  &lt;% index_plus_one = index + 1 %&gt; \n    function loadInfoPopin() {\n      var msg;\n      msg = Messenger().post({\n        message:  '&lt;%= j render partial: \"deals/info_popin/info_popin#{ popin['popin_id'] }\",\n                  locals: { popin: popin, index: index_plus_one } %&gt;'\n      });\n    } \n  &lt;% end %&gt;\n&lt;/script&gt;\n</code></pre>\n\n<p>For the sake of information here is the format of the Deal's column/attribute 'deal_details' (it's a json attribute): </p>\n\n<pre><code>[{\"popin_id\":\"4\",\"text1\":\"qqq\",\"text2\":\"sqsq\",\"image1\":\"sqqs\"},{\"popin_id\":\"5\",\"text1\":\"sqqs\",\"video1\":\"s\"}] \n</code></pre>\n\n<p>This is an example and you can have as many json block inside the array as possible.</p>\n\n<p><strong>deals/info_popin/info_popin5.html.erb (it's an example)</strong></p>\n\n<pre><code>&lt;div&gt;\n       &lt;p&gt;&lt;a href=\"&lt;%= popin['image1'] %&gt;\"&gt;cool image&lt;/a&gt;&lt;/p&gt;\n    &lt;/div&gt;\n&lt;/div&gt; \n</code></pre>\n\n<p>Now, how can I move the whole script or at least the function loadInfoPopin() to a javascript file (that is to say away from the view home.html.erb) ?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["javascript", "ruby-on-rails", "ruby", "twitter-bootstrap"], "comments": [{"owner": {"reputation": 1557, "user_id": 5295879, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c551c1d9125e328b69e794495959eadd?s=128&d=identicon&r=PG", "display_name": "Robiseb", "link": "https://stackoverflow.com/users/5295879/robiseb"}, "edited": false, "score": 0, "creation_date": 1477517043, "post_id": 40272314, "comment_id": 67804699, "body": "Your HTML ID attributes are not unique"}], "answers": [{"comments": [{"owner": {"reputation": 2168, "user_id": 4386626, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/f2c9512ee4dac8ccbbf45fc2cf1a8046?s=128&d=identicon&r=PG&f=1", "display_name": "ToddT", "link": "https://stackoverflow.com/users/4386626/toddt"}, "edited": false, "score": 0, "creation_date": 1477517233, "post_id": 40272367, "comment_id": 67804783, "body": "Hmm, well the first back button was already working.. its all the other back buttons that didn&#39;t work.. Which ID&#39;s? The button id or the tab id or another id?  Thanks"}, {"owner": {"reputation": 1557, "user_id": 5295879, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c551c1d9125e328b69e794495959eadd?s=128&d=identicon&r=PG", "display_name": "Robiseb", "link": "https://stackoverflow.com/users/5295879/robiseb"}, "reply_to_user": {"reputation": 2168, "user_id": 4386626, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/f2c9512ee4dac8ccbbf45fc2cf1a8046?s=128&d=identicon&r=PG&f=1", "display_name": "ToddT", "link": "https://stackoverflow.com/users/4386626/toddt"}, "edited": false, "score": 0, "creation_date": 1477517479, "post_id": 40272367, "comment_id": 67804878, "body": "Ok, so I fixed your second ^^"}], "tags": [], "owner": {"reputation": 1557, "user_id": 5295879, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c551c1d9125e328b69e794495959eadd?s=128&d=identicon&r=PG", "display_name": "Robiseb", "link": "https://stackoverflow.com/users/5295879/robiseb"}, "is_accepted": true, "score": 0, "last_activity_date": 1516556584, "last_edit_date": 1516556584, "creation_date": 1477517117, "answer_id": 40272367, "question_id": 40272314, "link": "https://stackoverflow.com/questions/40272314/buttons-to-navigate-bootstrap-pills/40272367#40272367", "title": "Buttons to navigate Bootstrap Pills", "body": "<p>Your HTML ID attributes are not unique</p>\n\n<p>I fixed your <a href=\"http://www.bootply.com/fCArKbfo5M\" rel=\"nofollow noreferrer\">second back button for example</a></p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>$(function(){\r\n    $('#setup-button').click(function(e){\r\n    \te.preventDefault();\r\n        $('#mytabs a[href=\"#setup\"]').tab('show');\r\n    }),\r\n    $('#setup-button2').click(function(e){\r\n\t    e.preventDefault();\r\n        $('#mytabs a[href=\"#setup\"]').tab('show');\r\n    }),\r\n    $('#start-button').click(function(e){\r\n    \te.preventDefault();\r\n        $('#mytabs a[href=\"#start\"]').tab('show');\r\n    }),    \r\n    $('#signup-button').click(function(e){\r\n    \te.preventDefault();\r\n        $('#mytabs a[href=\"#signup\"]').tab('show');\r\n    }),\r\n    $('#signup-button2').click(function(e){\r\n    \te.preventDefault();\r\n        $('#mytabs a[href=\"#signup\"]').tab('show');\r\n    }),\r\n    $('#speed-button').click(function(e){\r\n    \te.preventDefault();\r\n        $('#mytabs a[href=\"#speed\"]').tab('show');\r\n    }),\r\n    $('#fulfill-button').click(function(e){\r\n    \te.preventDefault();\r\n        $('#mytabs a[href=\"#fulfill\"]').tab('show');\r\n    }),\r\n    $('#product-button').click(function(e){\r\n    \te.preventDefault();\r\n        $('#mytabs a[href=\"#product\"]').tab('show');\r\n    })    \r\n})</code></pre>\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;script src=\"https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js\"&gt;&lt;/script&gt;\r\n&lt;script src=\"http://getbootstrap.com/dist/js/bootstrap.min.js\"&gt;&lt;/script&gt;\r\n&lt;link href=\"http://getbootstrap.com/dist/css/bootstrap.min.css\" rel=\"stylesheet\"/&gt;\r\n\r\n&lt;div class=\"container-fluid col-md-offset-1\"&gt;\r\n  &lt;div class=\"row col-md-offset-4 logo-pad\"&gt;\r\n    &amp;lt;%= image_tag(\"navbar_brand.png\") %&amp;gt;\r\n  &lt;/div&gt;\r\n  \r\n    &lt;div class=\"col-md-12\"&gt;\r\n      &amp;lt;%# if  %&amp;gt;\r\n      &lt;ul id=\"mytabs\" class=\"nav nav-pills nav-wizard pill-font\" role=\"tablist\" data-tabs=\"tabs\"&gt;\r\n          &lt;li role=\"presentation\" class=\"active\"&gt;&lt;a href=\"#start\" data-toggle=\"tab\"&gt;Before We Start&lt;/a&gt;&lt;/li&gt;\r\n          &lt;li role=\"presentation\"&gt;&lt;a href=\"#setup\" aria-controls=\"Shopify Setup\" role=\"tab\"&gt;Shopify Setup&lt;/a&gt;&lt;/li&gt;      \r\n          &lt;li role=\"presentation\"&gt;&lt;a href=\"#signup\" aria-controls=\"Signing Up\" role=\"tab\"&gt;Signing Up&lt;/a&gt;&lt;/li&gt;      \r\n          &lt;li role=\"presentation\"&gt;&lt;a href=\"#speed\" role=\"tab\"&gt;Shipping Speeds&lt;/a&gt;&lt;/li&gt;\r\n          &lt;li role=\"presentation\"&gt;&lt;a href=\"#fulfill\" role=\"tab\"&gt;Fulfillment&lt;/a&gt;&lt;/li&gt;\r\n          &lt;li role=\"presentation\"&gt;&lt;a href=\"#product\" role=\"tab\"&gt;Products&lt;/a&gt;&lt;/li&gt;          \r\n      &lt;/ul&gt;\r\n\r\n              &lt;div class=\"tab-content well well-pad col-md-10\"&gt;\r\n                &lt;div role=\"tabpanel\" class=\"tab-pane fade in active\" id=\"start\"&gt;\r\n                  &lt;p&gt;Hi, welcome to FBA Shipping by ByteStand. We've tried to make all our apps super easy to use, and as painless as possible. With that in mind we've put together a step by step guide to setting up this app in your Shopify store. This shouldn't take more than 3 minutes, but please go get a hot coffee if it's in the morning, or a cold beverage any other time of day. Don't worry, we'll wait.&lt;/p&gt;\r\n                  &lt;button type=\"button\" id=\"setup-button\" class=\"btn btn-primary pull-right\"&gt;Next Step&lt;/button&gt;\r\n                &lt;/div&gt;\r\n                \r\n                \r\n                &lt;div role=\"tabpanel\" class=\"tab-pane fade\" id=\"setup\"&gt;\r\n                    &lt;p&gt;Perfect, now for our app to work you will need Real Time Carrier Calculated Shipping to be enabled on your Shopify account. \r\n                        Real Time Carrier Calculated shipping is a setting on your Shopify account, but if that sounds a lot like gibberish, give Shopify a call and they can clarify.  The phone numbers are below. It might be free if you paid for you Shopify subscription annually, or it might cost $20 or the equivalent. Don't let them tell you, that you have to upgrade your account to \"advanced\" or \"unlimited\", you don't.\r\n                      &lt;/p&gt;&lt;ul class=\"a\"&gt;  \r\n                        &lt;li&gt;North America::  1-888-746-7439&lt;/li&gt;\r\n                        &lt;li&gt;United Kingdom:: 0800-808-5233&lt;/li&gt;\r\n                        &lt;li&gt;Australia:: 03-8400-4750&lt;/li&gt;\r\n                        &lt;li&gt;New Zealand:: 07-788-6026&lt;/li&gt;\r\n                        &lt;li&gt;Singapore:: 800-181-1121&lt;/li&gt;\r\n                      &lt;/ul&gt;  \r\n                    &lt;p&gt;&lt;/p&gt;\r\n                  &lt;button type=\"button\" id=\"signup-button\" class=\"btn btn-primary pull-right\"&gt;Next Step&lt;/button&gt;                  \r\n                  &lt;button type=\"button\" id=\"start-button\" class=\"btn btn-primary pull-right butt-pad\"&gt;Back&lt;/button&gt;\r\n                &lt;/div&gt;\r\n\r\n                &lt;div role=\"tabpanel\" class=\"tab-pane fade\" id=\"signup\"&gt;\r\n                    &lt;p&gt;\r\n                    Setting up the app is super easy. You've already download the app, now enter your credentials within the app. And you are good to go, there are instructions right next to where you enter your credentials, but we've also included pictures and a how to video below.\r\n                    &lt;/p&gt;\r\n                  &lt;button type=\"button\" id=\"speed-button\" class=\"btn btn-primary pull-right\"&gt;Next Step&lt;/button&gt;                  \r\n                  &lt;button type=\"button\" id=\"setup-button2\" class=\"btn btn-primary pull-right butt-pad\"&gt;Back&lt;/button&gt;\r\n                &lt;/div&gt;\r\n                \r\n                &lt;div role=\"tabpanel\" class=\"tab-pane fade\" id=\"speed\"&gt;\r\n                  &lt;p class=\"h4\"&gt;Allow us access to your Amazon account&lt;/p&gt;\r\n                  &lt;button type=\"button\" id=\"fulfill-button\" class=\"btn btn-primary pull-right\"&gt;Next Step&lt;/button&gt;\r\n                  &lt;button type=\"button\" id=\"signup-button2\" class=\"btn btn-primary pull-right butt-pad\"&gt;Back&lt;/button&gt;\r\n                &lt;/div&gt;\r\n                \r\n                &lt;div role=\"tabpanel\" class=\"tab-pane fade\" id=\"fulfill\"&gt;\r\n                  &lt;p class=\"h4\"&gt;Promise your first born to Amazon by accepting their terms&lt;/p&gt;\r\n                  &lt;button type=\"button\" id=\"product-button\" class=\"btn btn-primary pull-right\"&gt;Next Step&lt;/button&gt;\r\n                  &lt;button type=\"button\" id=\"speed-button\" class=\"btn btn-primary pull-right butt-pad\"&gt;Back&lt;/button&gt;\r\n                &lt;/div&gt;\r\n                \r\n                &lt;div role=\"tabpanel\" class=\"tab-pane fade\" id=\"product\"&gt;\r\n                  &lt;p class=\"h4\"&gt;\r\n                    Capture all your important id's and register for ByteStand\r\n                  &lt;/p&gt;\r\n                    &lt;button type=\"button\" id=\"product-button\" class=\"btn btn-primary pull-right\"&gt;Sign Up&lt;/button&gt;\r\n                    &lt;button type=\"button\" id=\"fulfill-button\" class=\"btn btn-primary pull-right\"&gt;Back&lt;/button&gt;\r\n                &lt;/div&gt;\r\n                &lt;/div&gt; &lt;!-- closing of the tab content --&gt;\r\n\r\n    &lt;/div&gt;   &lt;!-- end of the columns for the whole page--&gt;\r\n  &lt;/div&gt;&lt;!-- end of the row for the whole page--&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}], "owner": {"reputation": 2168, "user_id": 4386626, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/f2c9512ee4dac8ccbbf45fc2cf1a8046?s=128&d=identicon&r=PG&f=1", "display_name": "ToddT", "link": "https://stackoverflow.com/users/4386626/toddt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 803, "favorite_count": 0, "accepted_answer_id": 40272367, "answer_count": 1, "score": 0, "last_activity_date": 1516556584, "creation_date": 1477516819, "question_id": 40272314, "link": "https://stackoverflow.com/questions/40272314/buttons-to-navigate-bootstrap-pills", "title": "Buttons to navigate Bootstrap Pills", "body": "<p>I've created a working example here: <a href=\"http://www.bootply.com/A8Tz3gOsiD#\" rel=\"nofollow\">http://www.bootply.com/A8Tz3gOsiD#</a></p>\n\n<p>The issue is that after the second pill/tab the back button stops working. Can't figure out why. What's odd is that the \"Next Step\" button works fine thru all the tabs/pills.</p>\n\n<p>I use Ruby, and would also love to improve my javascript which is pretty bad, just not sure how.. </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord"], "answers": [{"tags": [], "owner": {"reputation": 6424, "user_id": 17076, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/38a8230ed3d5c685558b4f0aad3fc74b?s=128&d=identicon&r=PG", "display_name": "Joe Van Dyk", "link": "https://stackoverflow.com/users/17076/joe-van-dyk"}, "is_accepted": false, "score": 2, "last_activity_date": 1477869379, "last_edit_date": 1495541796, "creation_date": 1477516869, "answer_id": 40272324, "question_id": 40272068, "link": "https://stackoverflow.com/questions/40272068/adding-a-column-before-another-one-in-rails/40272324#40272324", "title": "Adding a column before another one in Rails", "body": "<p>These are mysql-specific options by the way. </p>\n\n<p><a href=\"https://github.com/rails/rails/blob/80e66cc/activerecord/lib/active_record/connection_adapters/mysql/schema_creation.rb#L50-L55\" rel=\"nofollow noreferrer\">https://github.com/rails/rails/blob/80e66cc/activerecord/lib/active_record/connection_adapters/mysql/schema_creation.rb#L50-L55</a> lists the available options, looks like they only support <code>before</code> and <code>first</code>.</p>\n\n<p>For what it's worth, PostgreSQL only supports adding columns to the end of the table.</p>\n\n<p>Related question: <a href=\"https://stackoverflow.com/questions/3402310/alter-table-add-before-code\">alter table add ... before `code`?</a></p>\n"}, {"tags": [], "owner": {"reputation": 3930, "user_id": 4613236, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wQZcm.jpg?s=128&g=1", "display_name": "Zoran", "link": "https://stackoverflow.com/users/4613236/zoran"}, "is_accepted": true, "score": 6, "last_activity_date": 1477518632, "creation_date": 1477518632, "answer_id": 40272682, "question_id": 40272068, "link": "https://stackoverflow.com/questions/40272068/adding-a-column-before-another-one-in-rails/40272682#40272682", "title": "Adding a column before another one in Rails", "body": "<p>You're able to insert a column at the front of your table by using the <code>:first</code> option:</p>\n\n<pre><code>add_column :table_name, :column_name, :column_type, first: true\n</code></pre>\n\n<p>You can still use <code>:after</code> to handle all other positioning cases.</p>\n"}], "owner": {"reputation": 964, "user_id": 922592, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/677f7fdb87ded28ed533d8fd14b28a82?s=128&d=identicon&r=PG", "display_name": "Gregg Horton", "link": "https://stackoverflow.com/users/922592/gregg-horton"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2584, "favorite_count": 0, "accepted_answer_id": 40272682, "answer_count": 2, "score": 9, "last_activity_date": 1477869379, "creation_date": 1477515816, "question_id": 40272068, "link": "https://stackoverflow.com/questions/40272068/adding-a-column-before-another-one-in-rails", "title": "Adding a column before another one in Rails", "body": "<p>I'm looking to put a column at the front of my table I know you can do </p>\n\n<pre><code>add_column :customer, :first_name, after: :last_name\n</code></pre>\n\n<p>but is there a way to do <code>:before</code>?</p>\n"}, {"tags": ["ruby", "irb"], "answers": [{"comments": [{"owner": {"reputation": 2157, "user_id": 6407868, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/5f5ea0c071e2a5adff7d131f58cc2011?s=128&d=identicon&r=PG&f=1", "display_name": "the12", "link": "https://stackoverflow.com/users/6407868/the12"}, "edited": false, "score": 0, "creation_date": 1477515208, "post_id": 40271792, "comment_id": 67803772, "body": "I am a little bit confused. You&#39;re saying when I delete the setter class, Ruby opens my class and adds a getter method (which it already has (<code>def roar</code>)), so it overwrites it . But that doesn&#39;t explain how Ruby saved the setter method. So I&#39;m wondering where does the setter method come from, so that the getter method can access that variable?"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 2157, "user_id": 6407868, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/5f5ea0c071e2a5adff7d131f58cc2011?s=128&d=identicon&r=PG&f=1", "display_name": "the12", "link": "https://stackoverflow.com/users/6407868/the12"}, "edited": false, "score": 1, "creation_date": 1477515313, "post_id": 40271792, "comment_id": 67803836, "body": "@the12: follow me here. 1) you load full class, with getter and setter. 2) you remove a setter from the file. 3) you load the file again. 3.1) ruby opens the class and replaces the getter. But the setter is <b>already there</b>, from the first load."}, {"owner": {"reputation": 2157, "user_id": 6407868, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/5f5ea0c071e2a5adff7d131f58cc2011?s=128&d=identicon&r=PG&f=1", "display_name": "the12", "link": "https://stackoverflow.com/users/6407868/the12"}, "edited": false, "score": 0, "creation_date": 1477515663, "post_id": 40271792, "comment_id": 67804013, "body": "Oh ok... So Ruby saves the setter method, so even by deleting it from the file and reloading it without the setter method, Ruby saves the setter method from the previous load?"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 2157, "user_id": 6407868, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/5f5ea0c071e2a5adff7d131f58cc2011?s=128&d=identicon&r=PG&f=1", "display_name": "the12", "link": "https://stackoverflow.com/users/6407868/the12"}, "edited": false, "score": 1, "creation_date": 1477515860, "post_id": 40271792, "comment_id": 67804110, "body": "@the12: not that ruby &quot;saves&quot; the setter. Take a look from this angle: a setter method is <i>created</i> at first load. And since it&#39;s not present in the file when you load a second version of the class, the existing method in memory is not touched."}, {"owner": {"reputation": 2157, "user_id": 6407868, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/5f5ea0c071e2a5adff7d131f58cc2011?s=128&d=identicon&r=PG&f=1", "display_name": "the12", "link": "https://stackoverflow.com/users/6407868/the12"}, "edited": false, "score": 0, "creation_date": 1477516035, "post_id": 40271792, "comment_id": 67804183, "body": "Ok it is in memory. Alright got it. Thanks for your help @Sergio Tulentsev!"}], "tags": [], "owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "is_accepted": true, "score": 3, "last_activity_date": 1477515026, "last_edit_date": 1477515026, "creation_date": 1477514609, "answer_id": 40271792, "question_id": 40271733, "link": "https://stackoverflow.com/questions/40271733/does-ruby-save-certain-files-in-irb-so-load-does-not-load-a-separate-version-o/40271792#40271792", "title": "Does Ruby save certain files in IRB so &quot;load&quot; does not load a separate version of the file everytime?", "body": "<p>IRB has nothing to do with this. It's a feature of ruby called \"open classes\"</p>\n\n<p>So when you first load your <code>Carnivore</code> class, it is loaded in its entirety, because it didn't exist before. But if you then remove a method in a file and reload it, what happens is ruby <strong>opens</strong> your class and adds a getter method. Which it already had, so it's overwritten. Which explains why changes to method bodies (your <code>puts</code> there) are reflected.</p>\n\n<p>This technique is what powers so-called \"monkey-patching\". You can patch any class in ruby, even a system one.</p>\n\n<pre><code>class String\n  def pirate\n    self + ', arrrr!'\n  end\nend\n\n'hello'.pirate # =&gt; \"hello, arrrr!\"\n</code></pre>\n\n<p>You see, it \"patches\" an existing class. If this class definition replaced/shadowed the one from the system, your app would be pretty broken. </p>\n"}], "owner": {"reputation": 2157, "user_id": 6407868, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/5f5ea0c071e2a5adff7d131f58cc2011?s=128&d=identicon&r=PG&f=1", "display_name": "the12", "link": "https://stackoverflow.com/users/6407868/the12"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "accepted_answer_id": 40271792, "answer_count": 1, "score": 0, "last_activity_date": 1477515026, "creation_date": 1477514387, "last_edit_date": 1477514671, "question_id": 40271733, "link": "https://stackoverflow.com/questions/40271733/does-ruby-save-certain-files-in-irb-so-load-does-not-load-a-separate-version-o", "title": "Does Ruby save certain files in IRB so &quot;load&quot; does not load a separate version of the file everytime?", "body": "<pre><code>class Carnivore\n  def roar=(v)\n    @roar = v\n  end\n\n  def roar\n    @roar\n  end\nend\n\n  trex = Carnivore.new\n  trex.roar = \"GRRRxxz\"\n  puts trex.roar\n</code></pre>\n\n<p>OS Used: Windows 10. </p>\n\n<p>I am using IRB and playing around with some of the getter/setter methods. If I delete the setter method <code>roar=(v)</code>, the reader method still works and will print out \"GRRRxxz\". However, if I quit IRB and launch another session, IRB will give me an error. Note that I am loading the files each time using the load keyword i.e.: <code>load \"test.rb\"</code>. </p>\n\n<p>What's even more unusual is that if I update the <code>puts</code> after deleting the setter method, it will update the <code>puts</code> to whatever (i.e.: set GRRRxxz to YOOO, it will change to YOOO). </p>\n\n<p>Can someone explain to me why IRB is operating in this manner? It seems to be saving the setter method for some inexplicable reason. It also does the same thing if you delete the reader method (will still work if you delete writer method, but an exiting and rebooting of IRB makes it fail). </p>\n\n<p>Any help would be greatly appreciated! </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "nested-forms", "cocoon-gem"], "comments": [{"owner": {"reputation": 32451, "user_id": 2516474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a2179a340c0e84edc285d432211145d?s=128&d=identicon&r=PG", "display_name": "SteveTurczyn", "link": "https://stackoverflow.com/users/2516474/steveturczyn"}, "edited": false, "score": 0, "creation_date": 1477513496, "post_id": 40271432, "comment_id": 67802968, "body": "Is your model <code>Setting</code> or <code>Settings</code>?"}, {"owner": {"reputation": 3634, "user_id": 2860931, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/968ddbc21b4695b3fba4665b69d231b5?s=128&d=identicon&r=PG&f=1", "display_name": "Mel", "link": "https://stackoverflow.com/users/2860931/mel"}, "reply_to_user": {"reputation": 32451, "user_id": 2516474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a2179a340c0e84edc285d432211145d?s=128&d=identicon&r=PG", "display_name": "SteveTurczyn", "link": "https://stackoverflow.com/users/2516474/steveturczyn"}, "edited": false, "score": 0, "creation_date": 1477514312, "post_id": 40271432, "comment_id": 67803357, "body": "setting.rb     ................"}], "answers": [{"comments": [{"owner": {"reputation": 3634, "user_id": 2860931, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/968ddbc21b4695b3fba4665b69d231b5?s=128&d=identicon&r=PG&f=1", "display_name": "Mel", "link": "https://stackoverflow.com/users/2860931/mel"}, "edited": false, "score": 1, "creation_date": 1477518553, "post_id": 40272129, "comment_id": 67805271, "body": "Okay but does that mean I need to do something to assign setting/organisation id to the addressable value in my address model? Im not sure what Ive done wrong to get this error."}, {"owner": {"reputation": 2276, "user_id": 4164651, "user_type": "registered", "accept_rate": 65, "profile_image": "https://graph.facebook.com/100004012909097/picture?type=large", "display_name": "Edmund Lee", "link": "https://stackoverflow.com/users/4164651/edmund-lee"}, "reply_to_user": {"reputation": 3634, "user_id": 2860931, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/968ddbc21b4695b3fba4665b69d231b5?s=128&d=identicon&r=PG&f=1", "display_name": "Mel", "link": "https://stackoverflow.com/users/2860931/mel"}, "edited": false, "score": 1, "creation_date": 1477519765, "post_id": 40272129, "comment_id": 67805666, "body": "@Mel I don&#39;t remember the exact syntax. but try <code>simple_fields_for :addresses_attributes</code>"}, {"owner": {"reputation": 3634, "user_id": 2860931, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/968ddbc21b4695b3fba4665b69d231b5?s=128&d=identicon&r=PG&f=1", "display_name": "Mel", "link": "https://stackoverflow.com/users/2860931/mel"}, "edited": false, "score": 0, "creation_date": 1477520319, "post_id": 40272129, "comment_id": 67805848, "body": "Thanks. That doesnt work either. The cocoon docs say: f.simple_fields_for :tasks do |task| - which is what I&#39;ve done - but it doesnt work."}, {"owner": {"reputation": 2276, "user_id": 4164651, "user_type": "registered", "accept_rate": 65, "profile_image": "https://graph.facebook.com/100004012909097/picture?type=large", "display_name": "Edmund Lee", "link": "https://stackoverflow.com/users/4164651/edmund-lee"}, "reply_to_user": {"reputation": 3634, "user_id": 2860931, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/968ddbc21b4695b3fba4665b69d231b5?s=128&d=identicon&r=PG&f=1", "display_name": "Mel", "link": "https://stackoverflow.com/users/2860931/mel"}, "edited": false, "score": 0, "creation_date": 1477522298, "post_id": 40272129, "comment_id": 67806483, "body": "@Mel so the essence is, you need to use <code>addresses_attributes</code> as the field name in your html, instead of <code>addresses</code>. I personally don&#39;t have mush experience with cocoon in specific. but that&#39;s how you nest attributes for polymorphic models."}, {"owner": {"reputation": 3634, "user_id": 2860931, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/968ddbc21b4695b3fba4665b69d231b5?s=128&d=identicon&r=PG&f=1", "display_name": "Mel", "link": "https://stackoverflow.com/users/2860931/mel"}, "edited": false, "score": 0, "creation_date": 1477522390, "post_id": 40272129, "comment_id": 67806510, "body": "Thanks Edmund - I&#39;ll give it another go. There must be something that makes this work that I can&#39;t figure out - I&#39;ll start searching for ideas around your thought."}, {"owner": {"reputation": 2276, "user_id": 4164651, "user_type": "registered", "accept_rate": 65, "profile_image": "https://graph.facebook.com/100004012909097/picture?type=large", "display_name": "Edmund Lee", "link": "https://stackoverflow.com/users/4164651/edmund-lee"}, "reply_to_user": {"reputation": 3634, "user_id": 2860931, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/968ddbc21b4695b3fba4665b69d231b5?s=128&d=identicon&r=PG&f=1", "display_name": "Mel", "link": "https://stackoverflow.com/users/2860931/mel"}, "edited": false, "score": 0, "creation_date": 1477522970, "post_id": 40272129, "comment_id": 67806678, "body": "@Mel try to inspect the HTML that cocoon generates. you can post it here if you need more help"}, {"owner": {"reputation": 3634, "user_id": 2860931, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/968ddbc21b4695b3fba4665b69d231b5?s=128&d=identicon&r=PG&f=1", "display_name": "Mel", "link": "https://stackoverflow.com/users/2860931/mel"}, "edited": false, "score": 0, "creation_date": 1477523376, "post_id": 40272129, "comment_id": 67806795, "body": "I can see from the simple form docs, that it suggests &quot;addresses_attributes[]&quot;, address in the opening line: <a href=\"https://github.com/plataformatec/simple_form/wiki/Nested-Models#example-for-strong-parameters\" rel=\"nofollow noreferrer\">github.com/plataformatec/simple_form/wiki/&hellip;</a>"}, {"owner": {"reputation": 2276, "user_id": 4164651, "user_type": "registered", "accept_rate": 65, "profile_image": "https://graph.facebook.com/100004012909097/picture?type=large", "display_name": "Edmund Lee", "link": "https://stackoverflow.com/users/4164651/edmund-lee"}, "reply_to_user": {"reputation": 3634, "user_id": 2860931, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/968ddbc21b4695b3fba4665b69d231b5?s=128&d=identicon&r=PG&f=1", "display_name": "Mel", "link": "https://stackoverflow.com/users/2860931/mel"}, "edited": false, "score": 0, "creation_date": 1477524005, "post_id": 40272129, "comment_id": 67806966, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/126771/discussion-between-edmund-lee-and-mel\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 2276, "user_id": 4164651, "user_type": "registered", "accept_rate": 65, "profile_image": "https://graph.facebook.com/100004012909097/picture?type=large", "display_name": "Edmund Lee", "link": "https://stackoverflow.com/users/4164651/edmund-lee"}, "is_accepted": false, "score": 1, "last_activity_date": 1477516041, "creation_date": 1477516041, "answer_id": 40272129, "question_id": 40271432, "link": "https://stackoverflow.com/questions/40271432/rails-cocoon-gem-undefined-method-reflect-on-association-for-nilclassclass/40272129#40272129", "title": "Rails, Cocoon Gem - undefined method `reflect_on_association&#39; for NilClass:Class", "body": "<p>This error is from Active Record. Here's documentation of this method in Rails 4.2.7. Shouldn't be a big change in Rails 5.</p>\n\n<p><a href=\"http://apidock.com/rails/v4.2.7/ActiveRecord/Reflection/ClassMethods/reflect_on_association\" rel=\"nofollow\">http://apidock.com/rails/v4.2.7/ActiveRecord/Reflection/ClassMethods/reflect_on_association</a></p>\n\n<p>Cocoon is using that to identify the owner class of your polymorphic model. You can verify this by doing the following in your console.</p>\n\n<pre><code>Address.reflect_on_association(:addressable)\n</code></pre>\n\n<p>This will give you the polymorphic association reflection</p>\n\n<pre><code>Address.reflect_on_association(:setting)\n</code></pre>\n\n<p>This returns nil</p>\n\n<p>And your <code>accepts_nested_attributes_for</code> relies on that method to find the children/belonging class. See source code here.</p>\n\n<p><a href=\"http://apidock.com/rails/v4.2.1/ActiveRecord/NestedAttributes/ClassMethods/accepts_nested_attributes_for\" rel=\"nofollow\">http://apidock.com/rails/v4.2.1/ActiveRecord/NestedAttributes/ClassMethods/accepts_nested_attributes_for</a></p>\n\n<p>And your form is nesting the address under settings. So it's not able to find the parent/owner class.</p>\n"}, {"tags": [], "owner": {"reputation": 48004, "user_id": 216513, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30a45c64b2ef288f7ec098c5fb353a22?s=128&d=identicon&r=PG", "display_name": "nathanvda", "link": "https://stackoverflow.com/users/216513/nathanvda"}, "is_accepted": true, "score": 0, "last_activity_date": 1477574301, "creation_date": 1477574301, "answer_id": 40285650, "question_id": 40271432, "link": "https://stackoverflow.com/questions/40271432/rails-cocoon-gem-undefined-method-reflect-on-association-for-nilclassclass/40285650#40285650", "title": "Rails, Cocoon Gem - undefined method `reflect_on_association&#39; for NilClass:Class", "body": "<p>You have to write </p>\n\n<pre><code>f.simple_fields_for :addresses \n</code></pre>\n\n<p>The <code>f</code> refers to the form, and you need this to be able to iterate over all child-addresses. </p>\n\n<p>And secondly, it is better to have the <code>link_to_add_association</code> outside of the loop (otherwise you can only add a new address if there already is one?)</p>\n\n<p>So write something like</p>\n\n<pre><code>&lt;%= f.simple_fields_for :addresses do |f| %&gt;\n  &lt;%= render 'contacts/addresses/address_fields', f: f %&gt;\n&lt;% end %&gt;  \n&lt;%= link_to_add_association 'Manage address', f, :addresses, partial: 'contacts/addresses/address_fields' %&gt;    \n</code></pre>\n\n<p>(imho the example you refer to in the simple-form documentation is outdated and the elaborate form is not needed)</p>\n"}], "owner": {"reputation": 3634, "user_id": 2860931, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/968ddbc21b4695b3fba4665b69d231b5?s=128&d=identicon&r=PG&f=1", "display_name": "Mel", "link": "https://stackoverflow.com/users/2860931/mel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 653, "favorite_count": 0, "accepted_answer_id": 40285650, "answer_count": 2, "score": 1, "last_activity_date": 1477574301, "creation_date": 1477513096, "last_edit_date": 1477523539, "question_id": 40271432, "link": "https://stackoverflow.com/questions/40271432/rails-cocoon-gem-undefined-method-reflect-on-association-for-nilclassclass", "title": "Rails, Cocoon Gem - undefined method `reflect_on_association&#39; for NilClass:Class", "body": "<p>I am trying to setup cocoon gem for nested forms in my Rails 5 app.</p>\n\n<p>Im having a problem that others have posted about, but it seems the solutions that worked for them are not working for me.</p>\n\n<p>I have models for address, organisation and settings. The associations are:</p>\n\n<p>Address</p>\n\n<pre><code>belongs_to :addressable, :polymorphic =&gt; true, optional: true\n</code></pre>\n\n<p>Organisation</p>\n\n<pre><code>has_many :addresses, as: :addressable\n        accepts_nested_attributes_for :addresses,  reject_if: :all_blank, allow_destroy: true\n</code></pre>\n\n<p>Settings</p>\n\n<pre><code>  has_many :addresses, as: :addressable\n    accepts_nested_attributes_for :addresses,  reject_if: :all_blank, allow_destroy: true\n</code></pre>\n\n<p>My settings controller has:</p>\n\n<pre><code>def setting_params\n      params.require(:setting).permit( :newsletter,\n        addresses_attributes: [:id, :description, :unit, :building, :street_number, :street, :city, :region, :zip, :country, :time_zone, :latitude, :longitude, :_destroy]\n       )\n    end\n</code></pre>\n\n<p>My routes are:</p>\n\n<pre><code>resources :organisations do\n    namespace :contacts do\n    resources :addresses\n    resources :phones \n    end\n  end\n\nresources :users, shallow: true do\n    scope module: :users do\n      resources :assign_roles\n      resources :identities\n      resources :org_requests\n      resources :profiles\n      resources :settings do \n        namespace :contacts do\n          resources :addresses\n          resources :phones \n        end\n      end \n    end\n</code></pre>\n\n<p>My address form has:</p>\n\n<p>My settings form has:</p>\n\n<pre><code>&lt;%= simple_form_for [@user, @setting] do |f| %&gt;\n  &lt;%= f.error_notification %&gt;\n\n  &lt;div class=\"form-inputs\"&gt;\n    &lt;%= f.input :newsletter, as: :radio_buttons, label: \"Subscribe to our newsletter\" %&gt;\n\n    &lt;%= simple_fields_for :addresses do |f| %&gt;\n            &lt;%= f.error_notification %&gt;\n                &lt;%= render 'contacts/addresses/address_fields', f: f %&gt;\n            &lt;%= link_to_add_association 'Manage address', f, :addresses, partial: 'contacts/addresses/address_fields' %&gt;    \n        &lt;% end %&gt;   \n  &lt;/div&gt;\n&lt;% end %&gt;  \n</code></pre>\n\n<p>The error says:</p>\n\n<pre><code>undefined method `reflect_on_association' for NilClass:Class\n</code></pre>\n\n<p>This line is highlighted in the error message:</p>\n\n<pre><code>                &lt;%= link_to_add_association 'Manage address', f, :addresses, partial: 'contacts/addresses/address_fields' %&gt;        \n</code></pre>\n\n<p>For others the problem has been using the singular instead of the plural; or using @addresses instead of :addresses (although some of the solutions have suggested its supposed to be @ instead of :.</p>\n\n<p>I have tried each of these in each combination.</p>\n\n<p>Can anyone see what I need to do to set this up?</p>\n\n<p><strong>TAKING EDMUND'S SUGGESTION</strong></p>\n\n<p>I can see from the simple form documentation that nested attributes should be handled differently in the forms.</p>\n\n<p><a href=\"https://github.com/plataformatec/simple_form/wiki/Nested-Models#example-for-strong-parameters\" rel=\"nofollow\">https://github.com/plataformatec/simple_form/wiki/Nested-Models#example-for-strong-parameters</a></p>\n\n<p>I tried changing the form to: </p>\n\n<pre><code>&lt;%= simple_fields_for \"addresses_attributes[]\", address do |f| %&gt;\n</code></pre>\n\n<p>That doesnt work either. I can't render a page to inspect.</p>\n\n<p>The error line in this context points to a problem with the new action in my organisation controller. That has:</p>\n\n<pre><code> def new\n    @organisation = Organisation.new\n    @organisation.addresses_build\n  end\n</code></pre>\n\n<p>The error message says:</p>\n\n<pre><code>undefined method `addresses_build' for #&lt;Organisation:0x007fcf6ff25f08&gt;\nDid you mean?  addresses\n</code></pre>\n\n<p>I now wonder if I need to build address_attributes instead of address. But when I try I get an error that says:</p>\n\n<pre><code>undefined method `addresses_attributes_build' for #&lt;Organisation:0x007fcf72c26d68&gt;\nDid you mean?  addresses_attributes=\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "factory-bot"], "comments": [{"owner": {"reputation": 3180, "user_id": 4659816, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/5TNaW.jpg?s=128&g=1", "display_name": "David", "link": "https://stackoverflow.com/users/4659816/david"}, "edited": false, "score": 0, "creation_date": 1477512184, "post_id": 40270912, "comment_id": 67802315, "body": "what version of FactoryGirl are you using? Apparently prior to 5.0 you need to use <code>ignore</code> in place of <code>transient</code> - source : <a href=\"http://stackoverflow.com/questions/25510268/undefined-methods-for-factorygirl-transient-variables\">undefined methods for factorygirl transient variables</a>"}, {"owner": {"reputation": 335, "user_id": 886882, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/cf5970b4f1658ae3380b05b5646745af?s=128&d=identicon&r=PG", "display_name": "cheeseandpepper", "link": "https://stackoverflow.com/users/886882/cheeseandpepper"}, "reply_to_user": {"reputation": 3180, "user_id": 4659816, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/5TNaW.jpg?s=128&g=1", "display_name": "David", "link": "https://stackoverflow.com/users/4659816/david"}, "edited": false, "score": 0, "creation_date": 1477513926, "post_id": 40270912, "comment_id": 67803170, "body": "I&#39;m using factory_girl_rails 4.5.  I tried <code>ignore</code> in place of <code>transient</code> and got the same error."}], "answers": [{"tags": [], "owner": {"reputation": 2647, "user_id": 4488503, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05d45f38e178f1c854938992de726299?s=128&d=identicon&r=PG", "display_name": "DBrown", "link": "https://stackoverflow.com/users/4488503/dbrown"}, "is_accepted": false, "score": 1, "last_activity_date": 1518716615, "last_edit_date": 1518716615, "creation_date": 1518550318, "answer_id": 48774311, "question_id": 40270912, "link": "https://stackoverflow.com/questions/40270912/how-can-i-pass-attributes-to-an-association-through-a-trait-in-factorygirl/48774311#48774311", "title": "How can I pass attributes to an association through a trait in factorygirl?", "body": "<p>If you are wanting to pass the values within a single hash value, you need to pass them like so:</p>\n\n<pre><code>create(:ebay_title_template, custom_args: {title: \"Overwrite the title\", sub_title: \"Overwrite the subtitle\"})\n</code></pre>\n\n<p>Otherwise you can create new transient values, and pass them the way you are passing them now:</p>\n\n<pre><code>transient do     # use ignore with FactoryGirl/FactoryBot &lt; v4.7\n  title nil\n  sub_title nil\nend\n</code></pre>\n\n<p>When adding more attributes like above you can then iterate over the evaluator's overrides instance variable:</p>\n\n<pre><code>evaluator.instance_variable_get(:@overrides).each do |key, value|\n  puts key, value\nend\n</code></pre>\n\n<p>Hope that helps!</p>\n"}], "owner": {"reputation": 335, "user_id": 886882, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/cf5970b4f1658ae3380b05b5646745af?s=128&d=identicon&r=PG", "display_name": "cheeseandpepper", "link": "https://stackoverflow.com/users/886882/cheeseandpepper"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1924, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1518716615, "creation_date": 1477511027, "question_id": 40270912, "link": "https://stackoverflow.com/questions/40270912/how-can-i-pass-attributes-to-an-association-through-a-trait-in-factorygirl", "title": "How can I pass attributes to an association through a trait in factorygirl?", "body": "<p>Consider the following model setup</p>\n\n<pre><code>class Template &lt; ActiveRecord::Base\n  belongs_to :detail, polymorphic: true, dependent: :destroy\n  accepts_nested_attributes_for :detail\nend\n\nclass EbayTitleTemplate &lt; ActiveRecord::Base\n  has_one  :template, as: :detail\nend\n</code></pre>\n\n<p>And here is a working factory</p>\n\n<pre><code>FactoryGirl.define do\n  factory :template do\n    merchant\n    channel\n\n    trait :ebay_title do\n     association :detail, factory: :template_ebay_title\n    end\n\n    factory :ebay_title_template,   traits: [:ebay_title]\n  end\n\n  factory :template_ebay_title, class: EbayTitleTemplate do\n    name        \"eBay Title Template\"\n    title       \"Super Cool Hat\"\n    sub_title   \"Keeps the sun away\"\n    description \"The best hat available!\"\n  end\nend\n</code></pre>\n\n<p>The following works for me</p>\n\n<pre><code>create(:ebay_title_template)  # creates both records, creating a new Merchant and Channel for me\ncreate(:ebay_title_template, merchant: Merchant.first, channel: Channel.first)  # creates both records with explicit channel and merchant\n</code></pre>\n\n<p>Now what I'd like to also do is pass in custom attributes to override the defaults.  Something like this:</p>\n\n<pre><code>create(:ebay_title_template, title: \"Overwrite the title\", sub_title: \"Overwrite the subtitle\")\n</code></pre>\n\n<p>What ends up happening is that I get the error <code>ArgumentError: Trait not registered: title</code></p>\n\n<p>Somehow FactoryGirl thinks that I'm passing in a trait or the Template factory doesn't recognize <code>title</code> as an attribute.</p>\n\n<p>I've tried using transients to allow custom args to pass through the Template and using a callback in the <code>:template_ebay_title</code> factory to map the attribute to the model column like so:</p>\n\n<pre><code>transient do\n  custom_args nil\nend\n\nafter(:create) do |record, evaluator|\n  evaluator.custom_args.each do |key, value|\n    record.key = value\n  end\nend\n</code></pre>\n\n<p>And then I create like this:</p>\n\n<pre><code>create(:ebay_title_template, custom_args: {title: \"Overwrite\", sub_title: \"Overwrite\"})\n</code></pre>\n\n<p>This results in the error <code>NoMethodError: undefined method</code>custom_args' for #`</p>\n\n<p>So either there's a way to do this and I'm doing it wrong, or I need a completely new approach. Keep in mind, there will be dozens of associations that will need to be defined as traits (or something else) so I can't possibly assign specific transients to be passed through.</p>\n\n<p><em>How can I achieve my goal of creating a factory that creates the parent and the polymorphic association, allowing me to pass in arbitrary attributes for the polymorphic association, and return the parent object?</em> </p>\n"}, {"tags": ["mysql", "ruby-on-rails", "ruby", "activerecord", "indexing"], "comments": [{"owner": {"reputation": 1440, "user_id": 3839549, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/477123df7db174c0b2739f0e6ac9b20e?s=128&d=identicon&r=PG&f=1", "display_name": "Dave Slutzkin", "link": "https://stackoverflow.com/users/3839549/dave-slutzkin"}, "edited": false, "score": 0, "creation_date": 1477512618, "post_id": 40270777, "comment_id": 67802527, "body": "Which database? Usually the database makes the decision about whether to use the index or not. If you create the index on the right fields, and the database&#39;s query planner thinks that index makes sense for the query you&#39;ve submitted, it will use the index."}, {"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "reply_to_user": {"reputation": 1440, "user_id": 3839549, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/477123df7db174c0b2739f0e6ac9b20e?s=128&d=identicon&r=PG&f=1", "display_name": "Dave Slutzkin", "link": "https://stackoverflow.com/users/3839549/dave-slutzkin"}, "edited": false, "score": 0, "creation_date": 1477515450, "post_id": 40270777, "comment_id": 67803900, "body": "@DaveSlutzkin That would be nice, but at least MySQL makes sometimes really terrible decisions when it come to use existing indexes."}, {"owner": {"reputation": 105038, "user_id": 1766831, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ee974306d2def46eb69534fbcf95cc5?s=128&d=identicon&r=PG", "display_name": "Rick James", "link": "https://stackoverflow.com/users/1766831/rick-james"}, "edited": false, "score": 0, "creation_date": 1477525329, "post_id": 40270777, "comment_id": 67807308, "body": "Let&#39;s see the actual query, plus <code>SHOW CREATE TABLE</code>.  Perhaps we can change something to achieve the intent."}], "answers": [{"tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": true, "score": 4, "last_activity_date": 1518465356, "last_edit_date": 1518465356, "creation_date": 1477515329, "answer_id": 40271955, "question_id": 40270777, "link": "https://stackoverflow.com/questions/40270777/how-to-specify-use-index-in-a-join-using-activerecord/40271955#40271955", "title": "How to specify &#39;USE INDEX&#39; in a JOIN using activerecord", "body": "<p>Rails does not support joins like that out of the box. But you can always write pass a string to <code>joins</code> that describes exactly what you want:</p>\n\n<pre><code>Post\n  .joins(:author)\n  .joins(\"INNER JOIN comments USE INDEX('myindex') ON comments.post_id = posts.id\")\n</code></pre>\n\n<p>I used <code>posts</code>, <code>users</code> and <code>comments</code> instead of <code>table1</code> to <code>table3</code>, because <code>table1</code> etc. do not follow Rails naming conventions.</p>\n"}], "owner": {"reputation": 105, "user_id": 7025381, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/8bb8f97f4f763c37a24e479160fba7b0?s=128&d=identicon&r=PG&f=1", "display_name": "Robby Williams", "link": "https://stackoverflow.com/users/7025381/robby-williams"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1015, "favorite_count": 0, "accepted_answer_id": 40271955, "answer_count": 1, "score": 0, "last_activity_date": 1518465356, "creation_date": 1477510550, "question_id": 40270777, "link": "https://stackoverflow.com/questions/40270777/how-to-specify-use-index-in-a-join-using-activerecord", "title": "How to specify &#39;USE INDEX&#39; in a JOIN using activerecord", "body": "<p>Is there a way to force an index on a <code>JOIN</code> with active record in Rails, when multiple <code>JOIN</code>s are present?</p>\n\n<p>I want the end SQL to be generated as:</p>\n\n<pre><code>SELECT *\nFROM table1\nINNER JOIN table2\nON table1.id = table2.id\nINNER JOIN table3 USE INDEX('my_index')\nON table2.new_id = table3.new_id\n</code></pre>\n\n<p>Hopefully something like this is possible?</p>\n"}, {"tags": ["ruby", "homebrew", "osx-lion"], "comments": [{"owner": {"reputation": 2595, "user_id": 2619878, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qDmtu.jpg?s=128&g=1", "display_name": "Ismail Moghul", "link": "https://stackoverflow.com/users/2619878/ismail-moghul"}, "edited": false, "score": 0, "creation_date": 1477510468, "post_id": 40270616, "comment_id": 67801445, "body": "<a href=\"http://stackoverflow.com/questions/40214331/trying-to-install-homebrew-miscellaneous-errors-returned/40216592#40216592\" title=\"trying to install homebrew miscellaneous errors returned\">stackoverflow.com/questions/40214331/&hellip;</a>"}, {"owner": {"reputation": 2595, "user_id": 2619878, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qDmtu.jpg?s=128&g=1", "display_name": "Ismail Moghul", "link": "https://stackoverflow.com/users/2619878/ismail-moghul"}, "edited": false, "score": 0, "creation_date": 1477510498, "post_id": 40270616, "comment_id": 67801465, "body": "Does that work for you?"}, {"owner": {"reputation": 3180, "user_id": 4659816, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/5TNaW.jpg?s=128&g=1", "display_name": "David", "link": "https://stackoverflow.com/users/4659816/david"}, "edited": false, "score": 1, "creation_date": 1477510634, "post_id": 40270616, "comment_id": 67801557, "body": "I don&#39;t know if there is a solution to your question but personally I would just bite the bullet and upgrade - your ruby version is very old now. Once you have ruby, homebrew and rvm set up there is no reason why you can&#39;t create a ruby 1.8.7 environment using rvm if necessary."}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 2, "creation_date": 1477511128, "post_id": 40270616, "comment_id": 67801795, "body": "you can install a newer ruby without rvm, rbenv, or homebrew. See <a href=\"https://www.ruby-lang.org/en/documentation/installation/#building-from-source\" rel=\"nofollow noreferrer\">ruby-lang.org/en/documentation/installation/&hellip;</a>"}, {"owner": {"reputation": 43, "user_id": 4203278, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c0f8f225e05840d7757c50a1618e4ff?s=128&d=identicon&r=PG&f=1", "display_name": "user36386", "link": "https://stackoverflow.com/users/4203278/user36386"}, "reply_to_user": {"reputation": 2595, "user_id": 2619878, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qDmtu.jpg?s=128&g=1", "display_name": "Ismail Moghul", "link": "https://stackoverflow.com/users/2619878/ismail-moghul"}, "edited": false, "score": 0, "creation_date": 1477511310, "post_id": 40270616, "comment_id": 67801893, "body": "@IsmailM, no, it didn&#39;t work. When I try install ruby 2.0, for example, I get the <code>About to install Homebrew...</code>, and then that fails again."}, {"owner": {"reputation": 2595, "user_id": 2619878, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qDmtu.jpg?s=128&g=1", "display_name": "Ismail Moghul", "link": "https://stackoverflow.com/users/2619878/ismail-moghul"}, "edited": false, "score": 1, "creation_date": 1477511519, "post_id": 40270616, "comment_id": 67801982, "body": "@user36386, I meant did you try to download the homebrew installer to a local file and then install it..."}, {"owner": {"reputation": 1244, "user_id": 1042324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0bf7d96c6cd1ad77fd77a1331b264819?s=128&d=identicon&r=PG", "display_name": "daniloisr", "link": "https://stackoverflow.com/users/1042324/daniloisr"}, "edited": false, "score": 0, "creation_date": 1477512290, "post_id": 40270616, "comment_id": 67802364, "body": "Try installing homebrew with: <code>usr&#47;bin&#47;ruby -e &quot;$(curl -fsSL https:&#47;&#47;raw.githubusercontent.com&#47;Homebrew&#47;install&#47;9b97f5fd5&zwnj;&#8203;2ed8fbe00934d0d5886d&zwnj;&#8203;5631af33716&#47;install)</code>"}, {"owner": {"reputation": 43, "user_id": 4203278, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c0f8f225e05840d7757c50a1618e4ff?s=128&d=identicon&r=PG&f=1", "display_name": "user36386", "link": "https://stackoverflow.com/users/4203278/user36386"}, "reply_to_user": {"reputation": 2595, "user_id": 2619878, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qDmtu.jpg?s=128&g=1", "display_name": "Ismail Moghul", "link": "https://stackoverflow.com/users/2619878/ismail-moghul"}, "edited": false, "score": 0, "creation_date": 1477763288, "post_id": 40270616, "comment_id": 67899487, "body": "I just tried. I get a <code>&gt;</code> prompt, and that&#39;s it (whether I type <code>&quot;</code> at the end or not). So, that&#39;s not working either. UPDATE: @IsmailM Downloading the installer to a local file worked! It took me some time to figure out how to do it, but installation was successful, than you very much."}], "owner": {"reputation": 43, "user_id": 4203278, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c0f8f225e05840d7757c50a1618e4ff?s=128&d=identicon&r=PG&f=1", "display_name": "user36386", "link": "https://stackoverflow.com/users/4203278/user36386"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1076, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1477509956, "creation_date": 1477509956, "question_id": 40270616, "link": "https://stackoverflow.com/questions/40270616/how-to-install-homebrew-without-upgrading-ruby", "title": "How to install Homebrew without upgrading ruby?", "body": "<p>My setting: Mac OS 10.7.5, ruby 1.8.7 (2012-02-08 patchlevel 358) [universal-darwin11.0].</p>\n\n<p>I've tried installing Homebrew:</p>\n\n<pre><code>/usr/bin/ruby -e \"$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)\"\n</code></pre>\n\n<p>I get this message:</p>\n\n<pre><code>-e:201: syntax error, unexpected '.', expecting $end\n           .map { |d| File.join(HOMEBREW_PREFIX, d) }\n            ^\n</code></pre>\n\n<p>I read that upgrading ruby may help. When I try to install rvm, this is what I did:</p>\n\n<pre><code>gpg --keyserver hkp://keys.gnupg.net --recv-keys 409B6B1796C275462A1703113804BB82D39DC0E3\n</code></pre>\n\n<p>I get a message that gpg is not installed. I looked up how to install it, and it happens that I need Homebrew. Instead, I tried:</p>\n\n<pre><code>\\curl -sSL https://get.rvm.io | bash -s stable --ruby\n</code></pre>\n\n<p>It starts to install, but at some point it says</p>\n\n<pre><code>About to install Homebrew, press `Enter` for default installation in `/usr/local`,\ntype new path if you wish custom Homebrew installation (the path needs to be writable for user)\n: Requirements installation failed with status: 1.\n</code></pre>\n\n<p>Then I'm back to square one. To install Homebrew, I need a more recent ruby, for which I need rvm, for which I need Homebrew. I don't care about ruby, but if I need it for Homebrew, I'll upgrade it, but I don't see how to get off this circle of dependencies.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "acts-as-taggable-on"], "answers": [{"comments": [{"owner": {"reputation": 153, "user_id": 5822806, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c163588fe782ff5c78200a1b05506cd1?s=128&d=identicon&r=PG&f=1", "display_name": "n.milsht", "link": "https://stackoverflow.com/users/5822806/n-milsht"}, "edited": false, "score": 1, "creation_date": 1477509633, "post_id": 40270383, "comment_id": 67801000, "body": "That was a partial solution (thank you!). If I edit a video with 4 tags [&quot;mustache&quot;, &quot;ubernostrum&quot;, &quot;more words&quot;], it will fill the text_field with all three tags without the commas and thus save it as though it were one single tag item."}, {"owner": {"reputation": 1382, "user_id": 686884, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/3e5241036850ccb32286d58ba4d7b724?s=128&d=identicon&r=PG", "display_name": "Ed_", "link": "https://stackoverflow.com/users/686884/ed"}, "reply_to_user": {"reputation": 153, "user_id": 5822806, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c163588fe782ff5c78200a1b05506cd1?s=128&d=identicon&r=PG&f=1", "display_name": "n.milsht", "link": "https://stackoverflow.com/users/5822806/n-milsht"}, "edited": false, "score": 0, "creation_date": 1477509699, "post_id": 40270383, "comment_id": 67801037, "body": "no problem. I would like an upvote and correct answer though please :) trying to get to 500 points."}, {"owner": {"reputation": 153, "user_id": 5822806, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c163588fe782ff5c78200a1b05506cd1?s=128&d=identicon&r=PG&f=1", "display_name": "n.milsht", "link": "https://stackoverflow.com/users/5822806/n-milsht"}, "edited": false, "score": 0, "creation_date": 1477511691, "post_id": 40270383, "comment_id": 67802072, "body": "Still trying to figure out why it is stripping out all the commas in update in the edit form text_field and thus concatenating all the tags."}, {"owner": {"reputation": 1382, "user_id": 686884, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/3e5241036850ccb32286d58ba4d7b724?s=128&d=identicon&r=PG", "display_name": "Ed_", "link": "https://stackoverflow.com/users/686884/ed"}, "reply_to_user": {"reputation": 153, "user_id": 5822806, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c163588fe782ff5c78200a1b05506cd1?s=128&d=identicon&r=PG&f=1", "display_name": "n.milsht", "link": "https://stackoverflow.com/users/5822806/n-milsht"}, "edited": false, "score": 0, "creation_date": 1477584262, "post_id": 40270383, "comment_id": 67836874, "body": "What does your object do with the data? What does your schema look like? Maybe you want to create an model for the tags, then use a nested attribute set up?"}, {"owner": {"reputation": 1382, "user_id": 686884, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/3e5241036850ccb32286d58ba4d7b724?s=128&d=identicon&r=PG", "display_name": "Ed_", "link": "https://stackoverflow.com/users/686884/ed"}, "reply_to_user": {"reputation": 153, "user_id": 5822806, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c163588fe782ff5c78200a1b05506cd1?s=128&d=identicon&r=PG&f=1", "display_name": "n.milsht", "link": "https://stackoverflow.com/users/5822806/n-milsht"}, "edited": false, "score": 0, "creation_date": 1477584399, "post_id": 40270383, "comment_id": 67836965, "body": "<a href=\"http://api.rubyonrails.org/classes/ActiveRecord/NestedAttributes/ClassMethods.html\" rel=\"nofollow noreferrer\">api.rubyonrails.org/classes/ActiveRecord/NestedAttributes/&hellip;</a> . I can&#39;t tell from your question but its very possible this would be a better route."}], "tags": [], "owner": {"reputation": 1382, "user_id": 686884, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/3e5241036850ccb32286d58ba4d7b724?s=128&d=identicon&r=PG", "display_name": "Ed_", "link": "https://stackoverflow.com/users/686884/ed"}, "is_accepted": true, "score": 1, "last_activity_date": 1477509094, "creation_date": 1477509094, "answer_id": 40270383, "question_id": 40270126, "link": "https://stackoverflow.com/questions/40270126/ruby-on-rails-video-object-tags-not-updating/40270383#40270383", "title": "Ruby on Rails: video object tags not updating", "body": "<p>Looks like your video_params is filtering it.</p>\n\n<p>Try</p>\n\n<pre><code> params.require(:video).permit(\n      :title,\n      :url,\n      tag_list: []\n    )\n</code></pre>\n"}], "owner": {"reputation": 153, "user_id": 5822806, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c163588fe782ff5c78200a1b05506cd1?s=128&d=identicon&r=PG&f=1", "display_name": "n.milsht", "link": "https://stackoverflow.com/users/5822806/n-milsht"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "accepted_answer_id": 40270383, "answer_count": 1, "score": 0, "last_activity_date": 1477509094, "creation_date": 1477508208, "question_id": 40270126, "link": "https://stackoverflow.com/questions/40270126/ruby-on-rails-video-object-tags-not-updating", "title": "Ruby on Rails: video object tags not updating", "body": "<p>Video objects have tags (via acts-as-taggable-on gem). The update function works for all of the video attributes except for tags. I'm not sure why. Any insight would be greatly appreciated.</p>\n\n<h1>views/videos/_new.html.erb</h1>\n\n<pre><code>      &lt;div class=\"\"&gt;\n        &lt;%= f.label(:tag_list, \"Tags (separated by commas)\") %&gt;&lt;/br &gt;\n        &lt;%= f.text_field :tag_list, multiple: true, class: \"form-control\" %&gt;\n      &lt;/div&gt;\n</code></pre>\n\n<h1>videos_controller.rb</h1>\n\n<pre><code>  def edit\n    @video = Video.find(params[:id])\n    @post = @video.post\n  end\n\n  def update\n    @video = Video.find(params[:id])\n    @post = @video.post\n    @video.update_attributes(video_params)\n    if current_user == @video.user\n      if @video.save\n        flash[:notice] = \"Video successfully updated!\"\n        redirect_to video_path(@video)\n      else\n        flash[:notice] = \"Video was not updated.\"\n        @errors = @video.errors.full_messages.join(\", \")\n        flash[:alert] = @errors\n        render action: \"edit\"\n      end\n    else\n      flash[:notice] = \"Only OP can edit video\"\n      refresh :edit\n    end\n  end\n\n  private\n\n  def video_params\n    params.require(:video).permit(\n      :title,\n      :url,\n      :tag_list,\n    )\n  end\n</code></pre>\n"}, {"tags": ["ruby", "selenium", "selenium-webdriver", "rspec"], "answers": [{"tags": [], "owner": {"reputation": 5134, "user_id": 1672197, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i8HkV.png?s=128&g=1", "display_name": "orde", "link": "https://stackoverflow.com/users/1672197/orde"}, "is_accepted": false, "score": 1, "last_activity_date": 1477512482, "creation_date": 1477512482, "answer_id": 40271275, "question_id": 40269647, "link": "https://stackoverflow.com/questions/40269647/rspec-ruby-verify-a-value-exists-in-text-field/40271275#40271275", "title": "RSpec/Ruby verify a value exists in text field", "body": "<p>After entering the search term, you can get the value (e.g. <code>element['value']</code>) from the text field, and use an rspec <a href=\"https://github.com/rspec/rspec-expectations\" rel=\"nofollow\">expectation</a> to validate that the correct string has been entered.  For example:</p>\n\n<pre><code>#foo_spec.rb\n\nrequire 'selenium-webdriver'\nrequire 'rspec'\n\ndescribe \"Contrived Example\" do\n\n  it \"enters a search term\" do\n\n    driver = Selenium::WebDriver.for :firefox\n    driver.navigate.to \"http://google.com\"\n\n    element = driver.find_element(:name, 'q')\n    element.send_keys \"test string\"\n    sleep 1\n    expect(element['value']).to eq \"test string\"\n    driver.quit\n\n  end\n\nend\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 7054568, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14636750eabe504fde86df0d66bd23bd?s=128&d=identicon&r=PG&f=1", "display_name": "Mark", "link": "https://stackoverflow.com/users/7054568/mark"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 744, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1477512482, "creation_date": 1477506497, "question_id": 40269647, "link": "https://stackoverflow.com/questions/40269647/rspec-ruby-verify-a-value-exists-in-text-field", "title": "RSpec/Ruby verify a value exists in text field", "body": "<p>For example purposes, lets use google. Let us also assume in the search bar on google we enter texts that reads, \"hello\". Lastly lets assume the search bar has a save button and we select it to store the data in the field. So now, when you look at the search bar it reads, \"hello\".</p>\n\n<p>I want to go back into the browser navigate to google and check that text field to ensure it saved as expected - my data that is. I know how to navigate there. But can someone explain to me in Rspec/Ruby how to go into a browser, find the web element you want to verify the value by way of id, name, xpath, etc....and write a command using selenium webdriver with Rspec/Ruby to do so. NO CAPYBARA.</p>\n"}, {"tags": ["ruby", "algorithm", "collatz"], "comments": [{"owner": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "edited": false, "score": 3, "creation_date": 1477512090, "post_id": 40269555, "comment_id": 67802278, "body": "Is this algo implemented the correct way? In reality you&#39;re not caching anyhting, because <code>start_num</code> is increasing by one on each loop, and you never index the hash by anything else than <code>start_num</code>. Therefore you will never be looking up old data. I.e. your cache will never experience a &quot;hit&quot;. In fact the lookup seems completely unnecessary."}, {"owner": {"reputation": 73, "user_id": 6663917, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-HV6VFu9XwmY/AAAAAAAAAAI/AAAAAAAAAC4/EckmQpURU2c/photo.jpg?sz=128", "display_name": "Lulu Li", "link": "https://stackoverflow.com/users/6663917/lulu-li"}, "reply_to_user": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "edited": false, "score": 0, "creation_date": 1477583872, "post_id": 40269555, "comment_id": 67836659, "body": "I really had to read up on cache and hashes, I don&#39;t think I implemented it correctly before at all, and it was taking as long as before because I wasn&#39;t calling the cache like you said. Your reply helped me a bunch though in really thinking about which key I&#39;m calling. Thanks!"}], "answers": [{"comments": [{"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1477589288, "post_id": 40289227, "comment_id": 67839863, "body": "Wow, much faster indeed."}], "tags": [], "owner": {"reputation": 73, "user_id": 6663917, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-HV6VFu9XwmY/AAAAAAAAAAI/AAAAAAAAAC4/EckmQpURU2c/photo.jpg?sz=128", "display_name": "Lulu Li", "link": "https://stackoverflow.com/users/6663917/lulu-li"}, "is_accepted": false, "score": 1, "last_activity_date": 1477583808, "creation_date": 1477583808, "answer_id": 40289227, "question_id": 40269555, "link": "https://stackoverflow.com/questions/40269555/ruby-using-hash-to-solve-collatz-sequence/40289227#40289227", "title": "Ruby - Using Hash to solve Collatz sequence", "body": "<p>After racking my brain for a whole night, I re-worked the whole thing and wrote out each step every step of the way and realized that my fundamental problem was that I cannot call the collatz method from before (since that method calculates the entire chain, whereas I needed it to stop at the number that I've already calculated). So below is my solution:</p>\n\n<pre><code>def longest_chain2(number)\n  cache = { 1 =&gt; 1 }\n  start_num = 1\n  longest = 1\n  while start_num &lt; number\n    n = start_num\n    chain = 0\n    while n != 1 &amp;&amp; n &gt;= start_num\n      if n.even?\n        n = n/2\n      else\n        n = 3*n+1\n      end\n      chain += 1\n    end\n    chain += cache[n]\n    if chain &gt; longest\n      longest = chain\n      longest_start = start_num\n    end\n    cache[start_num] = chain\n    start_num += 1\n  end\n  return longest_start\nend\n</code></pre>\n\n<p>This way, I'll be adding keys that do not already exist, while calling for the value of cache[n] to add to the chain number up to that point.</p>\n"}], "owner": {"reputation": 73, "user_id": 6663917, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-HV6VFu9XwmY/AAAAAAAAAAI/AAAAAAAAAC4/EckmQpURU2c/photo.jpg?sz=128", "display_name": "Lulu Li", "link": "https://stackoverflow.com/users/6663917/lulu-li"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 321, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1477583808, "creation_date": 1477506152, "last_edit_date": 1477527598, "question_id": 40269555, "link": "https://stackoverflow.com/questions/40269555/ruby-using-hash-to-solve-collatz-sequence", "title": "Ruby - Using Hash to solve Collatz sequence", "body": "<p>I am pretty new to solving algorithms so bear with me. </p>\n\n<p>I've solved the Collatz sequence for max length of 1,000,000 but I want to make it more efficient by using a hashtable to look up keys that already exist in order make the function faster. However, I know I'm doing something wrong because it's supposed to take only about 1-2 seconds to run number = 1,000,000, but it's still taking 9-10 seconds to run. I'm pretty new to using hashtables in algorithms so can someone please tell me what I'm doing wrong here in my method?</p>\n\n<p>Much appreciated!</p>\n\n<pre><code>def collatz(n)\n  chain = 1\n  until n == 1\n    n = (n.even?) ? (n/2) : (n*3+1)\n    chain += 1\n  end\n  chain\nend\n\ndef longest_chain2(number)\n  cache = { 1 =&gt; 1 }\n  start_num = 1\n  longest = 1\n  while start_num &lt; number\n    chain = cache[start_num]\n    if chain &gt; longest\n      longest = chain\n      longest_start = start_num\n    end\n    start_num += 1\n    cache[start_num] = collatz(start_num)\n  end\n  return longest_start\nend\n\nputs longest_chain2(1000000)\n</code></pre>\n"}, {"tags": ["ruby", "docker"], "answers": [{"comments": [{"owner": {"reputation": 203, "user_id": 6801486, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c8d0f5d9cb5dcba5f14aedf28674d75?s=128&d=identicon&r=PG&f=1", "display_name": "Mik Vyatskov", "link": "https://stackoverflow.com/users/6801486/mik-vyatskov"}, "edited": false, "score": 0, "creation_date": 1477567971, "post_id": 40269035, "comment_id": 67825242, "body": "Let me address the second paragraph first. Unfortunately, some of the gems our application depends on are incompatible with JRuby. If we could use JVM, we wouldn&#39;t have the question above :)"}, {"owner": {"reputation": 203, "user_id": 6801486, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c8d0f5d9cb5dcba5f14aedf28674d75?s=128&d=identicon&r=PG&f=1", "display_name": "Mik Vyatskov", "link": "https://stackoverflow.com/users/6801486/mik-vyatskov"}, "edited": false, "score": 0, "creation_date": 1477568306, "post_id": 40269035, "comment_id": 67825471, "body": "First of all, thanks for your suggestions. Redesigning doesn&#39;t seems like an option. To give you more details, it&#39;s about fluentd and community plugins, so we don&#39;t have much control over the code. Another thing is, this OOM happens without any regards to actually free memory. You can have several GB of free memory and container will be killed anyway as a result of limit, not because the host lacks memory. As for overusing, having one array takes 150 MB of memory, it perfectly fits into memory, after each iteration this array becomes garbage and should be collected, freeing 150 MB for the next"}, {"owner": {"reputation": 203, "user_id": 6801486, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c8d0f5d9cb5dcba5f14aedf28674d75?s=128&d=identicon&r=PG&f=1", "display_name": "Mik Vyatskov", "link": "https://stackoverflow.com/users/6801486/mik-vyatskov"}, "edited": false, "score": 0, "creation_date": 1477568456, "post_id": 40269035, "comment_id": 67825564, "body": "We don&#39;t want blindly throw memory in this application until (if) it stops crashing, we want to avoid crashes at all until memory throughput is lower than memory limits. If application requires 300 MB and given 200 MB, it&#39;s fine to crash. If it requires &lt;200 MB, but still crashes, something is wrong."}, {"owner": {"reputation": 7408, "user_id": 1507393, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e18382322851249d60910f4c4957c334?s=128&d=identicon&r=PG", "display_name": "Pyrce", "link": "https://stackoverflow.com/users/1507393/pyrce"}, "reply_to_user": {"reputation": 203, "user_id": 6801486, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c8d0f5d9cb5dcba5f14aedf28674d75?s=128&d=identicon&r=PG&f=1", "display_name": "Mik Vyatskov", "link": "https://stackoverflow.com/users/6801486/mik-vyatskov"}, "edited": false, "score": 0, "creation_date": 1477589174, "post_id": 40269035, "comment_id": 67839811, "body": "Hmm yes, I can&#39;t see why the container being full should trigger a kernel OOM. Could you attach a memory plot of the host machine when one of these OOM events occurs? It might be that docker isn&#39;t a great solution for capping memory consumption on ruby and a more traditional VM solution would do better."}, {"owner": {"reputation": 203, "user_id": 6801486, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c8d0f5d9cb5dcba5f14aedf28674d75?s=128&d=identicon&r=PG&f=1", "display_name": "Mik Vyatskov", "link": "https://stackoverflow.com/users/6801486/mik-vyatskov"}, "edited": false, "score": 0, "creation_date": 1478176064, "post_id": 40269035, "comment_id": 68052861, "body": "Unfortunately, the situation didn&#39;t depend on the amount of memory available on host. And VM is not an option for us, we have all infrastructure in containers."}], "tags": [], "owner": {"reputation": 7408, "user_id": 1507393, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e18382322851249d60910f4c4957c334?s=128&d=identicon&r=PG", "display_name": "Pyrce", "link": "https://stackoverflow.com/users/1507393/pyrce"}, "is_accepted": false, "score": 2, "last_activity_date": 1477504403, "creation_date": 1477504403, "answer_id": 40269035, "question_id": 40268749, "link": "https://stackoverflow.com/questions/40268749/ruby-oom-in-container/40269035#40269035", "title": "Ruby OOM in container", "body": "<p>I don't think this is a docker issue. You're overusing the resources of the container and Ruby tends to not behave well once you hit memory thresholds. It can GC, but if another process tries to take some memory or Ruby attempts to allocate again while you are maxed out then the kernel will (usually) kill the process with the most memory. If you're worried about memory usage on a server, add some threshold alerts at 80% RAM and allocate the appropriately sized resources for the job. When you start hitting thresholds, allocate more RAM or look at the particular job parameters/allocations to see if it needs to be redesigned to have a lower footprint.</p>\n\n<p>Another potential option if you really want to have a nice fixed memory band to GC against is to use JRuby and set the JVM max memory to leave a little wiggle room on the container memory. The JVM will manage OOM within its own context better as it isn't sharing those resources with other processes nor letting the kernel think the server is dying.</p>\n"}, {"comments": [{"owner": {"reputation": 203, "user_id": 6801486, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c8d0f5d9cb5dcba5f14aedf28674d75?s=128&d=identicon&r=PG&f=1", "display_name": "Mik Vyatskov", "link": "https://stackoverflow.com/users/6801486/mik-vyatskov"}, "edited": false, "score": 0, "creation_date": 1477566648, "post_id": 40269099, "comment_id": 67824380, "body": "Yes, having a JVM application would be awesome, but unfortunately we cannot port our ruby program on JRuby, because some gems are not compatible.  I agree that JVM is much more robust and mature, than CRuby runtime and allows more control of the memory consumption."}], "tags": [], "owner": {"reputation": 2462, "user_id": 4066662, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/A2ie7.jpg?s=128&g=1", "display_name": "Fabian", "link": "https://stackoverflow.com/users/4066662/fabian"}, "is_accepted": false, "score": 2, "last_activity_date": 1477504609, "creation_date": 1477504609, "answer_id": 40269099, "question_id": 40268749, "link": "https://stackoverflow.com/questions/40268749/ruby-oom-in-container/40269099#40269099", "title": "Ruby OOM in container", "body": "<p>I had a similar issue with a few java based Docker containers that were running on a single Docker host. The problem was each container saw the total available memory of the host machine and assumed it could use all of that memory for itself. It didn't run GC very often and I ended up getting out of memory exceptions. I ended up manually limiting the amount of memory each container could use and I no longer got OOMs. Within the contianer I also limited the memory of the JVM.  </p>\n\n<p>Not sure if this is the same issue you're seeing but it could be related.</p>\n\n<p><a href=\"https://docs.docker.com/engine/reference/run/#/runtime-constraints-on-resources\" rel=\"nofollow\">https://docs.docker.com/engine/reference/run/#/runtime-constraints-on-resources</a></p>\n"}, {"comments": [{"owner": {"reputation": 203, "user_id": 6801486, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c8d0f5d9cb5dcba5f14aedf28674d75?s=128&d=identicon&r=PG&f=1", "display_name": "Mik Vyatskov", "link": "https://stackoverflow.com/users/6801486/mik-vyatskov"}, "edited": false, "score": 0, "creation_date": 1477569299, "post_id": 40269622, "comment_id": 67826105, "body": "Thanks for your answer. We&#39;ve already tried tweaking GC and so far, no success, same behavior on a given example. Calling GC.start or otherwise changing code doesn&#39;t seem like an option, since we cannot control the application code itself, it&#39;s fluentd with some community plugins."}, {"owner": {"reputation": 203, "user_id": 6801486, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c8d0f5d9cb5dcba5f14aedf28674d75?s=128&d=identicon&r=PG&f=1", "display_name": "Mik Vyatskov", "link": "https://stackoverflow.com/users/6801486/mik-vyatskov"}, "edited": false, "score": 0, "creation_date": 1477569335, "post_id": 40269622, "comment_id": 67826130, "body": "If you have a set of options that make this example work, I will be extremely happy to see it though :)"}, {"owner": {"reputation": 203, "user_id": 6801486, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c8d0f5d9cb5dcba5f14aedf28674d75?s=128&d=identicon&r=PG&f=1", "display_name": "Mik Vyatskov", "link": "https://stackoverflow.com/users/6801486/mik-vyatskov"}, "edited": false, "score": 1, "creation_date": 1478176218, "post_id": 40269622, "comment_id": 68052956, "body": "Thanks!  In the end, careful tuning GC flags solved out problems. Also, we used libjemalloc."}, {"owner": {"reputation": 2460, "user_id": 3940126, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0222b0a3b16a79649265eabba7e05add?s=128&d=identicon&r=PG&f=1", "display_name": "slowjack2k", "link": "https://stackoverflow.com/users/3940126/slowjack2k"}, "reply_to_user": {"reputation": 203, "user_id": 6801486, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c8d0f5d9cb5dcba5f14aedf28674d75?s=128&d=identicon&r=PG&f=1", "display_name": "Mik Vyatskov", "link": "https://stackoverflow.com/users/6801486/mik-vyatskov"}, "edited": false, "score": 0, "creation_date": 1478197628, "post_id": 40269622, "comment_id": 68067556, "body": "Would you please be so nice to share your settings?"}], "tags": [], "owner": {"reputation": 2460, "user_id": 3940126, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0222b0a3b16a79649265eabba7e05add?s=128&d=identicon&r=PG&f=1", "display_name": "slowjack2k", "link": "https://stackoverflow.com/users/3940126/slowjack2k"}, "is_accepted": true, "score": 4, "last_activity_date": 1477574273, "last_edit_date": 1477574273, "creation_date": 1477506411, "answer_id": 40269622, "question_id": 40268749, "link": "https://stackoverflow.com/questions/40268749/ruby-oom-in-container/40269622#40269622", "title": "Ruby OOM in container", "body": "<p>You can try to <a href=\"http://collectiveidea.com/blog/archives/2015/02/19/optimizing-rails-for-memory-usage-part-2-tuning-the-gc/\" rel=\"nofollow\">tweak</a> rubies garbage collection via environment variables (depending on your ruby version):</p>\n\n<pre><code>RUBY_GC_MALLOC_LIMIT=4000100\nRUBY_GC_MALLOC_LIMIT_MAX=16000100\nRUBY_GC_MALLOC_LIMIT_GROWTH_FACTOR=1.1\n</code></pre>\n\n<p>Or call garbage collection manualy via <code>GC.start</code></p>\n\n<p>For your example, try </p>\n\n<p><code>docker run -ti -m 209715200 ruby:2.1 ruby -e 'while true do array = []; 3000000.times do array &lt;&lt; \"hey\" end; puts array.length; array = nil; end;'</code></p>\n\n<p>to help the garbage collector.</p>\n\n<p><strong>Edit:</strong></p>\n\n<p>I don't have a comparable environment to yours. On my machine (14.04.5 LTS, docker 1.12.3, RAM 4GB, Intel(R) Core(TM) i5-3337U CPU @ 1.80GHz) the following looks quite promising. </p>\n\n<pre><code>docker run -ti -m 500MB  -e \"RUBY_GC_MALLOC_LIMIT_GROWTH_FACTOR=1\" \\\n                         -e \"RUBY_GC_MALLOC_LIMIT=5242880\" \\\n                         -e \"RUBY_GC_MALLOC_LIMIT_MAX=16000100\" \\\n                         -e \"RUBY_GC_HEAP_INIT_SLOTS=500000\" \\                             \n ruby:2.1 ruby -e 'while true do array = []; 3000000.times do array &lt;&lt; \"hey\" end; puts array.length; puts `ps -o rss -p #{Process::pid}`.chomp.split(\"\\n\").last.strip.to_i / 1024.0 / 1024 ; puts GC.stat; end;'\n</code></pre>\n\n<p>But every ruby app needs a different setup for fine tuning and if you experience memory leaks, your lost. </p>\n"}], "owner": {"reputation": 203, "user_id": 6801486, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c8d0f5d9cb5dcba5f14aedf28674d75?s=128&d=identicon&r=PG&f=1", "display_name": "Mik Vyatskov", "link": "https://stackoverflow.com/users/6801486/mik-vyatskov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1734, "favorite_count": 2, "accepted_answer_id": 40269622, "answer_count": 3, "score": 6, "last_activity_date": 1477574273, "creation_date": 1477503450, "last_edit_date": 1477569541, "question_id": 40268749, "link": "https://stackoverflow.com/questions/40268749/ruby-oom-in-container", "title": "Ruby OOM in container", "body": "<p>Recently we've encountered a problem with Ruby inside a Docker container. Despite quite low load, application tends to consume huge amounts of memory and after some time under mentioned load it OOMs.</p>\n\n<p>After some investigation we narrowed down problem to the one-liner</p>\n\n<pre><code>docker run -ti -m 209715200 ruby:2.1 ruby -e 'while true do array = []; 3000000.times do array &lt;&lt; \"hey\" end; puts array.length; end;'\n</code></pre>\n\n<p>On some machines it OOMed (was killed by oom-killer because of exceeding the limit) soon after the start, but on some it worked, though slowly, without OOMs. It seems like (only seems, maybe it's not the case) in some configurations ruby is able to deduce cgroup's limits and adjust it's GC.</p>\n\n<p>Configurations tested:</p>\n\n<ul>\n<li>CentOS 7, Docker 1.9 \u2014 OOM</li>\n<li>CentOS 7, Docker 1.12 \u2014 OOM</li>\n<li>Ubuntu 14.10, Docker 1.9 \u2014 OOM</li>\n<li>Ubuntu 14.10, Docker 1.12 \u2014 OOM</li>\n<li>MacOS X Docker 1.12 \u2014 No OOM</li>\n<li>Fedora 23 Docker 1.12 \u2014 No OOM</li>\n</ul>\n\n<p>If you look at the memory consumption of ruby process, in all cases it behaved similar to this picture, staying on the same level slightly below the limit, or crashing into the limit and being killed.</p>\n\n<p><a href=\"https://lh3.googleusercontent.com/TLn6t9CfZvILbzQoLf8i7tQLf6gO_L-smFIbJRb_WCiopadSAvdL02zQswu6E9hNqKUzKbZN8ROoYTBGbwnLi0GNA1WWM5KbyuzXxubTVlNf2UXFzR3BCeCCU9HS1BLDHeA9DM-EPKqSGIAJ7ZzUtJMnNId0QYWY_2Qfh7Sca5RIdpshcHsgqZpqlwWb2G6johy-CAfVWAvZr1HST5E0Bmp-LDuL1_fBvJPNXElnP69p-LB94n8vG6ZCG_cOIPXd2r9ubRBMm9B3UOrxYkfUO3NgF1z_KPTNe-3k3nNScEJ51X71Fsj5ifsj6hlCF2XX4S-qaiIEh_6_CKDeg_yV-qHNSCoMiQgWsyiVWwqsPrHkfbn3PbjrtG9WUPPnkAhJndBnBF8NlfQUN49Lzaua7wPnx4wO-LnZWM4L-6j_Cyqp3qRtEDY19vLotYzP9G9yVcV5WYAr1QFDq_7GHasE1dxHWonRGAWCRxYdotxMlcqfFx2MtI8M8bau1hv0_ZL0XVLv5InoMzPuZgV9S0aj-NEKWXaxkHjlI9FaG8a-3mOM4wmgWhmRxw7sFaV9k1dGxHg4UNnA0N4OgUaRVn7y_AEoCbI0772Kku1r0Ox7tFDghnal=w585-h359-no\" rel=\"nofollow\">Memory consumption plot</a></p>\n\n<p>We want to avoid OOMs at all cost, because it reduces resiliency and poses a risk of loosing data. Memory really needed for the application is way below the limit.</p>\n\n<p>Do you have any suggestions as of what to do with ruby to avoid OOMing, possibly by loosing in performance?</p>\n\n<p>We can't figure out what're the significant differences between tested installations.</p>\n\n<p>Edit: Changing the code or increasing memory limit are not available. First one because we run fluentd with community plugins which we have no control of, second one because it won't guarantee that we won't face this issue again in the future.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5", "rails-admin"], "comments": [{"owner": {"reputation": 311, "user_id": 741955, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/70bab86ec7b30209f01d8b1ecd4313cc?s=128&d=identicon&r=PG", "display_name": "Bachet", "link": "https://stackoverflow.com/users/741955/bachet"}, "edited": false, "score": 0, "creation_date": 1480064619, "post_id": 40268646, "comment_id": 68823481, "body": "I am currently having the same problem even though I still have rails 4 app. I tried to upgrade to <code>rails_admin 1.1.0</code> and cannot access my helpers in <code>app&#47;helpers</code>. Did you figure that out? Thx"}, {"owner": {"reputation": 307, "user_id": 905697, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3be50760a95eebc47c7f239b3ad3ede?s=128&d=identicon&r=PG", "display_name": "Artur Trzop", "link": "https://stackoverflow.com/users/905697/artur-trzop"}, "reply_to_user": {"reputation": 311, "user_id": 741955, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/70bab86ec7b30209f01d8b1ecd4313cc?s=128&d=identicon&r=PG", "display_name": "Bachet", "link": "https://stackoverflow.com/users/741955/bachet"}, "edited": false, "score": 0, "creation_date": 1482866712, "post_id": 40268646, "comment_id": 69903707, "body": "@Bachet You have to include ApplicationHelper in rails_admin.rb file.  RailsAdmin.config do |config|   include ApplicationHelper end"}, {"owner": {"reputation": 11, "user_id": 6859714, "user_type": "registered", "profile_image": "https://graph.facebook.com/1196215313749962/picture?type=large", "display_name": "Jo&#227;o Vitor Alves", "link": "https://stackoverflow.com/users/6859714/jo%c3%a3o-vitor-alves"}, "reply_to_user": {"reputation": 307, "user_id": 905697, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3be50760a95eebc47c7f239b3ad3ede?s=128&d=identicon&r=PG", "display_name": "Artur Trzop", "link": "https://stackoverflow.com/users/905697/artur-trzop"}, "edited": false, "score": 0, "creation_date": 1496923490, "post_id": 40268646, "comment_id": 75867617, "body": "I passed the task on to someone else, but I believe @ArturTrzop answer is correct. Tks guys"}], "answers": [{"tags": [], "owner": {"reputation": 311, "user_id": 741955, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/70bab86ec7b30209f01d8b1ecd4313cc?s=128&d=identicon&r=PG", "display_name": "Bachet", "link": "https://stackoverflow.com/users/741955/bachet"}, "is_accepted": false, "score": 2, "last_activity_date": 1480070817, "last_edit_date": 1480070817, "creation_date": 1480069772, "answer_id": 40802795, "question_id": 40268646, "link": "https://stackoverflow.com/questions/40268646/how-to-add-helper-in-rails-admin-dashboard-actions-in-rails-5/40802795#40802795", "title": "how to add helper in rails admin dashboard actions in rails 5", "body": "<p><strong>Try that</strong></p>\n\n<p>It seems like this is the most important part ;)</p>\n\n<blockquote>\n  <p>changing the <code>config.parent_controller</code> as described <a href=\"https://github.com/sferik/rails_admin/blob/master/CHANGELOG.md#changed\" rel=\"nofollow noreferrer\">here</a></p>\n</blockquote>\n\n<p><strong>If it still doesn't work</strong></p>\n\n<p>Here is what I did.</p>\n\n<p>After some good time trying between updating <code>rails_admin</code>, downgrading it, reinstalling it, typing <code>bin/spring stop</code>, changing the <code>config.parent_controller</code> as described <a href=\"https://github.com/sferik/rails_admin/blob/master/CHANGELOG.md#changed\" rel=\"nofollow noreferrer\">here</a> then I decided to modify one of my custom actions where I needed a helper (I added <code>helper TableHelper</code> in the custom action).</p>\n\n<p>And I can't explain why, it didn't work on the page I wanted but worked on another action where the exact same helper is called...</p>\n\n<p>Another error appeared with Kaminari views not being found. So I had to move pagination partials from <code>app/views/kaminari</code> to <code>app/views/kaminari/</code></p>\n\n<p>Another server restart and it was working everywhere... So I removed the code added in the custom action.</p>\n\n<p>Not very clear explanation but maybe it can help someone else! :)</p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 6859714, "user_type": "registered", "profile_image": "https://graph.facebook.com/1196215313749962/picture?type=large", "display_name": "Jo&#227;o Vitor Alves", "link": "https://stackoverflow.com/users/6859714/jo%c3%a3o-vitor-alves"}, "is_accepted": false, "score": 0, "last_activity_date": 1522328651, "last_edit_date": 1522328651, "creation_date": 1513253676, "answer_id": 47813145, "question_id": 40268646, "link": "https://stackoverflow.com/questions/40268646/how-to-add-helper-in-rails-admin-dashboard-actions-in-rails-5/47813145#47813145", "title": "how to add helper in rails admin dashboard actions in rails 5", "body": "<p>OMG! After one year i find the solution.\nThe problem is new way to load helpers on Rails 5.\nRead In <a href=\"http://api.rubyonrails.org/v5.1/classes/ActionController/Helpers.html\" rel=\"nofollow noreferrer\">RubyOnRails Docs</a></p>\n\n<blockquote>\n  <p>In previous versions of Rails the controller will include a helper which matches the name of the controller, e.g., MyController will automatically include MyHelper. To return old behavior set config.action_controller.include_all_helpers to false.</p>\n</blockquote>\n\n<p>I create <code>my_app/app/helpers/rails_admin/custom_helper.rb</code> with</p>\n\n<pre><code>module RailsAdmin::CustomHelper\n  include RailsAdmin::CallcenterStatsHelper\n  include RailsAdmin::CustomerContactsHelper\n  include RailsAdmin::DiscountCouponHelper\n  include RailsAdmin::SharedUrlsHelper\n  include RailsAdmin::FormHelper\nend\n</code></pre>\n\n<p>and include on <code>my_app/config/initializers/rails_admin_main_controller.rb</code></p>\n\n<pre><code>module RailsAdmin::MainController.class_eval do\n  include RailsAdmin::CustomHelper\nend\n</code></pre>\n\n<p>and works fine ;D\nThis is not a Rails Admin issue, is only and update from rails</p>\n"}], "owner": {"reputation": 11, "user_id": 6859714, "user_type": "registered", "profile_image": "https://graph.facebook.com/1196215313749962/picture?type=large", "display_name": "Jo&#227;o Vitor Alves", "link": "https://stackoverflow.com/users/6859714/jo%c3%a3o-vitor-alves"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1681, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1522328651, "creation_date": 1477503081, "last_edit_date": 1477507322, "question_id": 40268646, "link": "https://stackoverflow.com/questions/40268646/how-to-add-helper-in-rails-admin-dashboard-actions-in-rails-5", "title": "how to add helper in rails admin dashboard actions in rails 5", "body": "<p>I`m using Rails Admin gem <a href=\"https://github.com/sferik/rails_admin\" rel=\"nofollow\">https://github.com/sferik/rails_admin</a> and I am upgrading to the latest version of it. </p>\n\n<p>In the old version of rails admin (0.6.5) and rails (4.1.0) the helper class is loaded and all work fine. After upgrade to rails 5 and rails admin to master branch the helpers does not work anymore. I call operator_name in view and this return \n<code>NoMethodError - undefined method 'operator_name' for #&lt;&lt;Class:0x007febe6d22510&gt;:0x007febd334fb90&gt;</code> </p>\n\n<p>I searched in the rails admin wiki but did not find, someone have idea why this occurs?</p>\n\n<p>Dashboard action class and helper module above:</p>\n\n<h1>Dashboard Action Class</h1>\n\n<pre><code># my_project/lib/rails_admin/config/actions/callcenter_stats.rb\n\nmodule RailsAdmin\n  module Config\n    module Actions\n      class CallcenterStats &lt; Dashboard\n\n        register_instance_option :authorization_key do\n          :callcenter_stats\n        end\n\n        register_instance_option :route_fragment do\n          'callcenter_stats'\n        end\n\n        register_instance_option :http_methods do\n          [:get,:post]\n        end\n\n        register_instance_option :link_icon do\n          'icon-calendar'\n        end\n\n        register_instance_option :controller do\n          Proc.new do\n            # code ...\n          end\n        end\n      end\n    end\n  end\nend\n</code></pre>\n\n<h1>helper</h1>\n\n<pre><code># my_project/app/helper/rails_admin/callcenter_stats_helper.rb\n\nmodule RailsAdmin\n  module CallcenterStatsHelper\n\n    def operator_name email\n      email[/(.*?)@.*/,1].split('.').map(&amp;:capitalize).join(\"&lt;br/&gt;\").html_safe\n    end\n\n  end\nend\n</code></pre>\n\n<p>Thanks for attention.</p>\n"}, {"tags": ["ruby", "jekyll"], "comments": [{"owner": {"reputation": 46692, "user_id": 1548376, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qCZQw.gif?s=128&g=1", "display_name": "David Jacquel", "link": "https://stackoverflow.com/users/1548376/david-jacquel"}, "edited": false, "score": 0, "creation_date": 1477502404, "post_id": 40268383, "comment_id": 67796979, "body": "Can you post the full message as text ?"}, {"owner": {"reputation": 1895, "user_id": 5477561, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a8da372e79dbb466c65a7f8a9b934b7?s=128&d=identicon&r=PG", "display_name": "Ross", "link": "https://stackoverflow.com/users/5477561/ross"}, "edited": false, "score": 0, "creation_date": 1477512632, "post_id": 40268383, "comment_id": 67802540, "body": "I&#39;ve seen this error caused a few ways, could be clashing permalinks or the mismatched casing in the message. If you provide a repo URL it&#39;s easier to debug."}, {"owner": {"reputation": 39, "user_id": 5171735, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/0d878dcb3601b83769425142e483e0aa?s=128&d=identicon&r=PG&f=1", "display_name": "Derek", "link": "https://stackoverflow.com/users/5171735/derek"}, "reply_to_user": {"reputation": 1895, "user_id": 5477561, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a8da372e79dbb466c65a7f8a9b934b7?s=128&d=identicon&r=PG", "display_name": "Ross", "link": "https://stackoverflow.com/users/5477561/ross"}, "edited": false, "score": 0, "creation_date": 1477513073, "post_id": 40268383, "comment_id": 67802764, "body": "Hey @RossPhillips updated with the git repo. I had this happen on two different window machines using the repo but I checked it on a macbook and it runs fine."}], "answers": [{"tags": [], "owner": {"reputation": 1895, "user_id": 5477561, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a8da372e79dbb466c65a7f8a9b934b7?s=128&d=identicon&r=PG", "display_name": "Ross", "link": "https://stackoverflow.com/users/5477561/ross"}, "is_accepted": false, "score": 0, "last_activity_date": 1477514346, "creation_date": 1477514346, "answer_id": 40271714, "question_id": 40268383, "link": "https://stackoverflow.com/questions/40268383/error-reading-file-path-no-such-file-or-directory-rb-sysopen-path/40271714#40271714", "title": "Error Reading File &lt;path&gt;: No such file or directory @ rb_sysopen &lt;path", "body": "<p><strong>Potential fixes:</strong></p>\n\n<ul>\n<li><p><a href=\"https://github.com/dkbollig/Drago-CMS/blob/master/_layouts/default.html\" rel=\"nofollow\">https://github.com/dkbollig/Drago-CMS/blob/master/_layouts/default.html</a> has invalid front matter (the HTML comment is not allowed in YAML).</p></li>\n<li><p>Disabling (setting to <code>false</code>) the experimental <code>incremental</code> flag in your <code>_config.yml</code>.</p></li>\n<li><p>Remove <code>_layouts/compress.html</code> and references to it.</p></li>\n<li><p>Check the Jekyll version matches the requirement for this boilerplate.</p></li>\n</ul>\n\n<p>These files and settings might reveal the true error, but the error message you have already seems to be referencing a bad path from somewhere:</p>\n\n<pre><code>C:/repo/drago-cms/_layouts/post.html\nC:/repo/Drago-CMS/repo/drago-cms/_layouts/post.html\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 39, "user_id": 5171735, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/0d878dcb3601b83769425142e483e0aa?s=128&d=identicon&r=PG&f=1", "display_name": "Derek", "link": "https://stackoverflow.com/users/5171735/derek"}, "is_accepted": false, "score": 0, "last_activity_date": 1478553037, "creation_date": 1478553037, "answer_id": 40474688, "question_id": 40268383, "link": "https://stackoverflow.com/questions/40268383/error-reading-file-path-no-such-file-or-directory-rb-sysopen-path/40474688#40474688", "title": "Error Reading File &lt;path&gt;: No such file or directory @ rb_sysopen &lt;path", "body": "<p>Figured this out. When in the command line i used the cd command like this </p>\n\n<pre><code>cd repo/projectname --&gt; doesn't work\n</code></pre>\n\n<p>My actual folder name is \"ProjectName\". The jekyll command is case letter sensitive and wouldn't work if it wasn't exactly the same.</p>\n\n<pre><code>cd repo/ProjectName --&gt; works\n</code></pre>\n"}], "owner": {"reputation": 39, "user_id": 5171735, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/0d878dcb3601b83769425142e483e0aa?s=128&d=identicon&r=PG&f=1", "display_name": "Derek", "link": "https://stackoverflow.com/users/5171735/derek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 418, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1478553037, "creation_date": 1477502158, "last_edit_date": 1477512890, "question_id": 40268383, "link": "https://stackoverflow.com/questions/40268383/error-reading-file-path-no-such-file-or-directory-rb-sysopen-path", "title": "Error Reading File &lt;path&gt;: No such file or directory @ rb_sysopen &lt;path", "body": "<p>I'm using windows 10 and I keep having this issue using jekyll. Seems to be an ongoing issue in the jekyll community but I cant find an answer to fix. Has anyone found any good fixes for this? Edit: I am also using Jekyll 3.3.0</p>\n\n<p>repo - <a href=\"https://github.com/dkbollig/Drago-CMS\" rel=\"nofollow\">https://github.com/dkbollig/Drago-CMS</a></p>\n\n<pre><code>[12:22:19] Starting 'jekyll-build'...\nConfiguration file: C:/repo/drago-cms/_config.yml\n        Source: C:/repo/drago-cms\n   Destination: C:/repo/drago-cms/_site\nIncremental build: enabled\n  Generating...\nError reading file C:/repo/drago-cms/_layouts/compress.html: No such file or directory @ rb_sysopen - C:/repo/Drago-CMS/repo/drago-cms/_layouts/compress.html\nError reading file C:/repo/drago-cms/_layouts/default.html: No such file or directory @ rb_sysopen - C:/repo/Drago-CMS/repo/drago-cms/_layouts/default.html\nError reading file C:/repo/drago-cms/_layouts/index.html: No such file or directory @ rb_sysopen - C:/repo/Drago-CMS/repo/drago-cms/_layouts/index.html\nError reading file C:/repo/drago-cms/_layouts/page.html: No such file or directory @ rb_sysopen - C:/repo/Drago-CMS/repo/drago-cms/_layouts/page.html\nError reading file C:/repo/drago-cms/_layouts/post.html: No such file or directory @ rb_sysopen - C:/repo/Drago-CMS/repo/drago-cms/_layouts/post.html\n</code></pre>\n\n<p>Thanks!</p>\n\n<p>Derek</p>\n\n<p><a href=\"https://i.stack.imgur.com/EpD4Q.png\" rel=\"nofollow\"><img src=\"https://i.stack.imgur.com/EpD4Q.png\" alt=\"Error\"></a></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "macos-sierra"], "comments": [{"owner": {"reputation": 1244, "user_id": 1042324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0bf7d96c6cd1ad77fd77a1331b264819?s=128&d=identicon&r=PG", "display_name": "daniloisr", "link": "https://stackoverflow.com/users/1042324/daniloisr"}, "edited": false, "score": 0, "creation_date": 1477502994, "post_id": 40268226, "comment_id": 67797311, "body": "I had a similar problem when I updated to Sierra, and my solution was reinstalling all my ruby versions. Try reinstalling one version an see if the problem persist"}, {"owner": {"reputation": 727, "user_id": 5670609, "user_type": "registered", "accept_rate": 89, "profile_image": "https://graph.facebook.com/1042677742461591/picture?type=large", "display_name": "Champer Wu", "link": "https://stackoverflow.com/users/5670609/champer-wu"}, "reply_to_user": {"reputation": 1244, "user_id": 1042324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0bf7d96c6cd1ad77fd77a1331b264819?s=128&d=identicon&r=PG", "display_name": "daniloisr", "link": "https://stackoverflow.com/users/1042324/daniloisr"}, "edited": false, "score": 0, "creation_date": 1477504346, "post_id": 40268226, "comment_id": 67798092, "body": "@daniloisr I have reinstalled ruby 2.3.1 and rails 5.0.0.1, but the problem is not solved."}, {"owner": {"reputation": 1244, "user_id": 1042324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0bf7d96c6cd1ad77fd77a1331b264819?s=128&d=identicon&r=PG", "display_name": "daniloisr", "link": "https://stackoverflow.com/users/1042324/daniloisr"}, "edited": false, "score": 0, "creation_date": 1477508745, "post_id": 40268226, "comment_id": 67800539, "body": "Can you provide the error message when you try to connect to your database?"}, {"owner": {"reputation": 727, "user_id": 5670609, "user_type": "registered", "accept_rate": 89, "profile_image": "https://graph.facebook.com/1042677742461591/picture?type=large", "display_name": "Champer Wu", "link": "https://stackoverflow.com/users/5670609/champer-wu"}, "reply_to_user": {"reputation": 1244, "user_id": 1042324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0bf7d96c6cd1ad77fd77a1331b264819?s=128&d=identicon&r=PG", "display_name": "daniloisr", "link": "https://stackoverflow.com/users/1042324/daniloisr"}, "edited": false, "score": 0, "creation_date": 1477508992, "post_id": 40268226, "comment_id": 67800671, "body": "@daniloisr I can&#39;t because it is over thousands line...."}, {"owner": {"reputation": 1244, "user_id": 1042324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0bf7d96c6cd1ad77fd77a1331b264819?s=128&d=identicon&r=PG", "display_name": "daniloisr", "link": "https://stackoverflow.com/users/1042324/daniloisr"}, "edited": false, "score": 0, "creation_date": 1477509375, "post_id": 40268226, "comment_id": 67800866, "body": "This is normal, there are many lines due all the execution stack. But you can take only a few (like the first 10 lines), they will probably have the reason. And you edit your question to add these lines, will help a lot to identify the problem."}, {"owner": {"reputation": 727, "user_id": 5670609, "user_type": "registered", "accept_rate": 89, "profile_image": "https://graph.facebook.com/1042677742461591/picture?type=large", "display_name": "Champer Wu", "link": "https://stackoverflow.com/users/5670609/champer-wu"}, "reply_to_user": {"reputation": 1244, "user_id": 1042324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0bf7d96c6cd1ad77fd77a1331b264819?s=128&d=identicon&r=PG", "display_name": "daniloisr", "link": "https://stackoverflow.com/users/1042324/daniloisr"}, "edited": false, "score": 0, "creation_date": 1477509702, "post_id": 40268226, "comment_id": 67801039, "body": "@daniloisr I can&#39;t read first 10 lines, but the info in the end I have put it"}, {"owner": {"reputation": 1244, "user_id": 1042324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0bf7d96c6cd1ad77fd77a1331b264819?s=128&d=identicon&r=PG", "display_name": "daniloisr", "link": "https://stackoverflow.com/users/1042324/daniloisr"}, "reply_to_user": {"reputation": 727, "user_id": 5670609, "user_type": "registered", "accept_rate": 89, "profile_image": "https://graph.facebook.com/1042677742461591/picture?type=large", "display_name": "Champer Wu", "link": "https://stackoverflow.com/users/5670609/champer-wu"}, "edited": false, "score": 0, "creation_date": 1477509886, "post_id": 40268226, "comment_id": 67801125, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/126764/discussion-between-daniloisr-and-champer-wu\">continue this discussion in chat</a>."}], "owner": {"reputation": 727, "user_id": 5670609, "user_type": "registered", "accept_rate": 89, "profile_image": "https://graph.facebook.com/1042677742461591/picture?type=large", "display_name": "Champer Wu", "link": "https://stackoverflow.com/users/5670609/champer-wu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 199, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1477509578, "creation_date": 1477501519, "last_edit_date": 1477509578, "question_id": 40268226, "link": "https://stackoverflow.com/questions/40268226/ruby-on-rails-5-on-macos-sierra-cant-work", "title": "Ruby on Rails 5 on MacOS Sierra can&#39;t work", "body": "<p>I used rails by rvm gemset 2.3.1@rails500 on OSX el capitan is good.But when I update my MacOs to Sierra, I can't use 2.3.1@rails500 normally.</p>\n\n<p>I encountered the problem like that when I create a model the command running will\nstuck at ruby environment and stop at ruby environment:<a href=\"https://i.stack.imgur.com/qP1WG.png\" rel=\"nofollow\"><img src=\"https://i.stack.imgur.com/qP1WG.png\" alt=\"enter image description here\"></a></p>\n\n<p>and console can't connect to my database.\nThe last information is</p>\n\n<pre><code>[NOTE]\nYou may have encountered a bug in the Ruby interpreter or extension libraries.\nBug reports are welcome.\nFor details: http://www.ruby-lang.org/bugreport.html\n</code></pre>\n\n<p>Is it only one solution that backing to el capitan ?</p>\n"}, {"tags": ["ruby", "google-chrome", "selenium", "capybara"], "comments": [{"owner": {"reputation": 21, "user_id": 1789209, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/974acff5931c06ca3dfffb45c2c8f37e?s=128&d=identicon&r=PG", "display_name": "user1789209", "link": "https://stackoverflow.com/users/1789209/user1789209"}, "edited": false, "score": 0, "creation_date": 1477499851, "post_id": 40267723, "comment_id": 67795625, "body": "I inherited this regression suite and am trying to find where it could be breaking. We have all of our versions locked with a gemfile.lock so I wonder if Chrome updated and broke our suite."}, {"owner": {"reputation": 1543, "user_id": 4321213, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6eb8ee864f581864dd312055a2da8e42?s=128&d=identicon&r=PG&f=1", "display_name": "Breaks Software", "link": "https://stackoverflow.com/users/4321213/breaks-software"}, "edited": false, "score": 0, "creation_date": 1477500201, "post_id": 40267723, "comment_id": 67795850, "body": "That would be my guess based on the error message."}, {"owner": {"reputation": 5134, "user_id": 1672197, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i8HkV.png?s=128&g=1", "display_name": "orde", "link": "https://stackoverflow.com/users/1672197/orde"}, "edited": false, "score": 0, "creation_date": 1477500278, "post_id": 40267723, "comment_id": 67795899, "body": "Check your chrome version.  You may need a new version of <code>chromedriver.exe</code>: <a href=\"https://sites.google.com/a/chromium.org/chromedriver/downloads\" rel=\"nofollow noreferrer\">sites.google.com/a/chromium.org/chromedriver/downloads</a>"}, {"owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "reply_to_user": {"reputation": 5134, "user_id": 1672197, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i8HkV.png?s=128&g=1", "display_name": "orde", "link": "https://stackoverflow.com/users/1672197/orde"}, "edited": false, "score": 0, "creation_date": 1477500597, "post_id": 40267723, "comment_id": 67796072, "body": "as @orde mentions - update to the latest version of chromedriver - should be 2.25 currently"}, {"owner": {"reputation": 21, "user_id": 1789209, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/974acff5931c06ca3dfffb45c2c8f37e?s=128&d=identicon&r=PG", "display_name": "user1789209", "link": "https://stackoverflow.com/users/1789209/user1789209"}, "edited": false, "score": 0, "creation_date": 1478724214, "post_id": 40267723, "comment_id": 68272989, "body": "I have the latest version and it does the same thing. I think a windows update actually broke it."}], "owner": {"reputation": 21, "user_id": 1789209, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/974acff5931c06ca3dfffb45c2c8f37e?s=128&d=identicon&r=PG", "display_name": "user1789209", "link": "https://stackoverflow.com/users/1789209/user1789209"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 960, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1477499767, "creation_date": 1477499767, "question_id": 40267723, "link": "https://stackoverflow.com/questions/40267723/ruby-selenium-no-connection-could-be-made-because-the-target-machine-actively-re", "title": "Ruby Selenium No connection could be made because the target machine actively refused it. - connect(2) (Errno::ECONNREFUSED)", "body": "<p>Full dump below: Chrome will open and then just sit there. Newest version of chrome.</p>\n\n<pre><code>  No connection could be made because the target machine actively refused it. - connect(2) (Errno::ECONNREFUSED)\n  C:/Ruby193/lib/ruby/1.9.1/net/http.rb:763:in `initialize'\n  C:/Ruby193/lib/ruby/1.9.1/net/http.rb:763:in `open'\n  C:/Ruby193/lib/ruby/1.9.1/net/http.rb:763:in `block in connect'\n  C:/Ruby193/lib/ruby/1.9.1/timeout.rb:55:in `timeout'\n  C:/Ruby193/lib/ruby/1.9.1/timeout.rb:100:in `timeout'\n  C:/Ruby193/lib/ruby/1.9.1/net/http.rb:763:in `connect'\n  C:/Ruby193/lib/ruby/1.9.1/net/http.rb:756:in `do_start'\n  C:/Ruby193/lib/ruby/1.9.1/net/http.rb:745:in `start'\n  C:/Ruby193/lib/ruby/1.9.1/net/http.rb:1285:in `request'\n  ./features/step_definitions/site_search_steps.rb:17:in `/^I go to my google page that I care about$/'\n  features\\site_search.feature:7:in `Given I go to my google page that I care about'\n  No connection could be made because the target machine actively refused it. - connect(2) (Errno::ECONNREFUSED)\n  C:/Ruby193/lib/ruby/1.9.1/net/http.rb:763:in `initialize'\n  C:/Ruby193/lib/ruby/1.9.1/net/http.rb:763:in `open'\n  C:/Ruby193/lib/ruby/1.9.1/net/http.rb:763:in `block in connect'\n  C:/Ruby193/lib/ruby/1.9.1/timeout.rb:55:in `timeout'\n  C:/Ruby193/lib/ruby/1.9.1/timeout.rb:100:in `timeout'\n  C:/Ruby193/lib/ruby/1.9.1/net/http.rb:763:in `connect'\n  C:/Ruby193/lib/ruby/1.9.1/net/http.rb:756:in `do_start'\n  C:/Ruby193/lib/ruby/1.9.1/net/http.rb:745:in `start'\n  C:/Ruby193/lib/ruby/1.9.1/net/http.rb:1285:in `request'\n  C:/Ruby193/lib/ruby/gems/1.9.1/gems/rest-client-1.6.7/lib/restclient/net_http_ext.rb:51:in `request'\n  C:/Ruby193/lib/ruby/gems/1.9.1/gems/selenium-webdriver-2.43.0/lib/selenium/webdriver/remote/http/default.rb:83:in `response_for'\n  C:/Ruby193/lib/ruby/gems/1.9.1/gems/selenium-webdriver-2.43.0/lib/selenium/webdriver/remote/http/default.rb:39:in `request'\n  C:/Ruby193/lib/ruby/gems/1.9.1/gems/selenium-webdriver-2.43.0/lib/selenium/webdriver/remote/http/common.rb:40:in `call'\n  C:/Ruby193/lib/ruby/gems/1.9.1/gems/selenium-webdriver-2.43.0/lib/selenium/webdriver/remote/bridge.rb:638:in `raw_execute'\n  C:/Ruby193/lib/ruby/gems/1.9.1/gems/selenium-webdriver-2.43.0/lib/selenium/webdriver/remote/bridge.rb:616:in `execute'\n  C:/Ruby193/lib/ruby/gems/1.9.1/gems/selenium-webdriver-2.43.0/lib/selenium/webdriver/remote/bridge.rb:257:in `getScreenshot'\n  C:/Ruby193/lib/ruby/gems/1.9.1/gems/selenium-webdriver-2.43.0/lib/selenium/webdriver/common/driver_extensions/takes_screenshot.rb:34:in `screenshot_as'\n  C:/Ruby193/lib/ruby/gems/1.9.1/gems/selenium-webdriver-2.43.0/lib/selenium/webdriver/common/driver_extensions/takes_screenshot.rb:18:in `block in save_screenshot'\n  C:/Ruby193/lib/ruby/gems/1.9.1/gems/selenium-webdriver-2.43.0/lib/selenium/webdriver/common/driver_extensions/takes_screenshot.rb:18:in `open'\n  C:/Ruby193/lib/ruby/gems/1.9.1/gems/selenium-webdriver-2.43.0/lib/selenium/webdriver/common/driver_extensions/takes_screenshot.rb:18:in `save_screenshot'\n  C:/Ruby193/lib/ruby/gems/1.9.1/gems/capybara-2.1.0/lib/capybara/selenium/driver.rb:78:in `save_screenshot'\n  C:/Ruby193/lib/ruby/gems/1.9.1/gems/capybara-2.1.0/lib/capybara/session.rb:344:in `save_screenshot'\n  C:/Ruby193/lib/ruby/gems/1.9.1/gems/capybara-2.1.0/lib/capybara/dsl.rb:51:in `block (2 levels) in &lt;module:DSL&gt;'\n  C:/Users/selahey/Source/Workspaces/Test Automation Code/websites_workspace/global_support/screenshot_methods.rb:19:in `take_screenshot'\n  C:/Users/selahey/Source/Workspaces/Test Automation Code/websites_workspace/access_2_care_workspace/access_2_care_regression/features/support/env.rb:15:in `After'\n  No connection could be made because the target machine actively refused it. - connect(2) (Errno::ECONNREFUSED)\n  C:/Ruby193/lib/ruby/1.9.1/net/http.rb:763:in `initialize'\n  C:/Ruby193/lib/ruby/1.9.1/net/http.rb:763:in `open'\n  C:/Ruby193/lib/ruby/1.9.1/net/http.rb:763:in `block in connect'\n  C:/Ruby193/lib/ruby/1.9.1/timeout.rb:55:in `timeout'\n  C:/Ruby193/lib/ruby/1.9.1/timeout.rb:100:in `timeout'\n  C:/Ruby193/lib/ruby/1.9.1/net/http.rb:763:in `connect'\n  C:/Ruby193/lib/ruby/1.9.1/net/http.rb:756:in `do_start'\n  C:/Ruby193/lib/ruby/1.9.1/net/http.rb:745:in `start'\n  C:/Ruby193/lib/ruby/1.9.1/net/http.rb:1285:in `request'\n  C:/Ruby193/lib/ruby/gems/1.9.1/gems/rest-client-1.6.7/lib/restclient/net_http_ext.rb:51:in `request'\n  C:/Ruby193/lib/ruby/gems/1.9.1/gems/selenium-webdriver-2.43.0/lib/selenium/webdriver/remote/http/default.rb:83:in `response_for'\n  C:/Ruby193/lib/ruby/gems/1.9.1/gems/selenium-webdriver-2.43.0/lib/selenium/webdriver/remote/http/default.rb:39:in `request'\n  C:/Ruby193/lib/ruby/gems/1.9.1/gems/selenium-webdriver-2.43.0/lib/selenium/webdriver/remote/http/common.rb:40:in `call'\n  C:/Ruby193/lib/ruby/gems/1.9.1/gems/selenium-webdriver-2.43.0/lib/selenium/webdriver/remote/bridge.rb:638:in `raw_execute'\n  C:/Ruby193/lib/ruby/gems/1.9.1/gems/selenium-webdriver-2.43.0/lib/selenium/webdriver/remote/bridge.rb:616:in `execute'\n  C:/Ruby193/lib/ruby/gems/1.9.1/gems/selenium-webdriver-2.43.0/lib/selenium/webdriver/remote/bridge.rb:365:in `deleteAllCookies'\n  C:/Ruby193/lib/ruby/gems/1.9.1/gems/selenium-webdriver-2.43.0/lib/selenium/webdriver/common/options.rb:67:in `delete_all_cookies'\n  C:/Ruby193/lib/ruby/gems/1.9.1/gems/capybara-2.1.0/lib/capybara/selenium/driver.rb:84:in `reset!'\n  C:/Ruby193/lib/ruby/gems/1.9.1/gems/capybara-2.1.0/lib/capybara/session.rb:77:in `reset!'\n  C:/Ruby193/lib/ruby/gems/1.9.1/gems/capybara-2.1.0/lib/capybara.rb:245:in `block in reset_sessions!'\n  C:/Ruby193/lib/ruby/gems/1.9.1/gems/capybara-2.1.0/lib/capybara.rb:245:in `each'\n  C:/Ruby193/lib/ruby/gems/1.9.1/gems/capybara-2.1.0/lib/capybara.rb:245:in `reset_sessions!'\n  C:/Ruby193/lib/ruby/gems/1.9.1/gems/capybara-2.1.0/lib/capybara/cucumber.rb:10:in `After'\n</code></pre>\n\n<p>Failing Scenarios:\ncucumber -p tags features\\site_search.feature:6 # Scenario: Conduct a site search that should have results</p>\n\n<p>1 scenario (1 failed)\n1 step (1 failed)</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 7076110, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153815406166851/picture?type=large", "display_name": "Chantelle Becker", "link": "https://stackoverflow.com/users/7076110/chantelle-becker"}, "edited": false, "score": 0, "creation_date": 1477505916, "post_id": 40267975, "comment_id": 67798947, "body": "Thank you SO MUCH! I felt like I was going crazy!"}], "tags": [], "owner": {"reputation": 558, "user_id": 3294749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28b89617237a3446a856c0e28585934b?s=128&d=identicon&r=PG&f=1", "display_name": "kriskova", "link": "https://stackoverflow.com/users/3294749/kriskova"}, "is_accepted": true, "score": 3, "last_activity_date": 1477500637, "creation_date": 1477500637, "answer_id": 40267975, "question_id": 40267657, "link": "https://stackoverflow.com/questions/40267657/weird-error-abstractcontrolleractionnotfound-ruby-on-rails/40267975#40267975", "title": "Weird Error: AbstractController::ActionNotFound - Ruby on Rails", "body": "<p>Your Venues controller's <strong>create method has an extra <code>end</code></strong>, thus making everything else below it out of the controller. You are actually closing your class after the create method.</p>\n\n<p>So remove one <code>end</code> from the create method definition and you are fine.</p>\n"}], "owner": {"reputation": 3, "user_id": 7076110, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153815406166851/picture?type=large", "display_name": "Chantelle Becker", "link": "https://stackoverflow.com/users/7076110/chantelle-becker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1575, "favorite_count": 0, "accepted_answer_id": 40267975, "answer_count": 1, "score": 0, "last_activity_date": 1477520201, "creation_date": 1477499589, "last_edit_date": 1477520201, "question_id": 40267657, "link": "https://stackoverflow.com/questions/40267657/weird-error-abstractcontrolleractionnotfound-ruby-on-rails", "title": "Weird Error: AbstractController::ActionNotFound - Ruby on Rails", "body": "<p>Okay y'all, here goes!</p>\n\n<p>The error is: </p>\n\n<blockquote>\n  <p>AbstractController::ActionNotFound at /venues/1 The action 'update'\n  could not be found for VenuesController</p>\n</blockquote>\n\n<p>I'm also getting this error for the action 'destroy' in the VenuesController.</p>\n\n<p>Same exact set of update/destroy issues in my GamesController that looks identical. </p>\n\n<p>Routes:</p>\n\n<pre><code>Rails.application.routes.draw do\n devise_for :users\n resources :events\n resources :venues \n resources :games\n\n get \"profiles/:id\" =&gt; \"profiles#show\", as: :profile\n get \"profiles\" =&gt; \"profiles#index\"\n get \"calendar\" =&gt; 'profiles#calendar'\n\n\n root 'welcome#index'\n\n get 'about' =&gt; 'welcome#about'\n\n get 'contact' =&gt; 'welcome#contact'\nend\n</code></pre>\n\n<p>My VenuesController is:</p>\n\n<pre><code>class VenuesController &lt; ApplicationController\nbefore_action :set_venue, only: [:show, :edit, :update, :destroy]\ndef new\n  @venue = Venue.new\nend\n\ndef show\nend\n\ndef index\n    @v = Venue.all\nend\n\ndef edit\nend\n\ndef create\n    @venue = Venue.new(venue_params)\n\n        respond_to do |format|\n          if @venue.save\n            format.html { redirect_to @venue, notice: 'Venue was successfully created.' }\n          else\n            format.html { render :new }\n          end\n        end\n    end\nend\n\ndef update\n    respond_to do |format|\n        if @venue.update(venue_params)\n          format.html { redirect_to @venue, notice: 'Venue was successfully updated.' }\n        else\n          format.html { render :edit }\n        end\n    end\nend\n\ndef destroy\n    @venue.destroy\n    respond_to do |format|\n      format.html { redirect_to venues_url, notice: 'Venue was successfully destroyed.' }\n    end\nend\n\nprivate\n\n    def venue_params\n        params.require(:venue).permit(:name, :address, :phone, :website, :venues_type)\n    end\n    def set_venue\n        @venue = Venue.find(params[:id])\n    end\n</code></pre>\n\n<p>My Venue View _form.html.erb:</p>\n\n<pre><code>&lt;%= form_for(@venue) do |f| %&gt;\n&lt;% if @venue.errors.any? %&gt;\n    &lt;div id=\"error_explanation\"&gt;\n      &lt;h2&gt;&lt;%= pluralize(@venue.errors.count, \"error\") %&gt; prohibited this venue from being saved:&lt;/h2&gt;\n\n      &lt;ul&gt;\n        &lt;% @venue.errors.full_messages.each do |message| %&gt;\n        &lt;li&gt;&lt;%= message %&gt;&lt;/li&gt;\n      &lt;% end %&gt;\n      &lt;/ul&gt;\n    &lt;/div&gt;\n  &lt;% end %&gt;\n\n  &lt;div class=\"field\"&gt;\n    &lt;%= f.label :name %&gt;&lt;br&gt;\n    &lt;%= f.text_field :name %&gt;\n  &lt;/div&gt;\n  &lt;div class=\"field\"&gt;\n    &lt;%= f.label :address %&gt;&lt;br&gt;\n    &lt;%= f.text_field :address %&gt;\n  &lt;/div&gt;\n   &lt;div class=\"field\"&gt;\n    &lt;%= f.label :website %&gt;&lt;br&gt;\n    &lt;%= f.text_field :website %&gt;\n  &lt;/div&gt;\n  &lt;div class=\"field\"&gt;\n    &lt;%= f.label :venues_type %&gt;&lt;br&gt;\n    &lt;%= f.text_field :venues_type %&gt;\n  &lt;/div&gt;\n  &lt;div class=\"field\"&gt;\n    &lt;%= f.label :phone %&gt;&lt;br&gt;\n    &lt;%= f.text_field :phone, placeholder: \"xxx-xxx-xxxx\" %&gt;\n  &lt;/div&gt;\n  &lt;div class=\"actions\"&gt;\n    &lt;%= f.submit %&gt;\n  &lt;/div&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>And then my stack:</p>\n\n<blockquote>\n  <p>Started PATCH \"/venues/1\" for ::1 at 2016-10-26 11:49:36 -0400</p>\n  \n  <p>AbstractController::ActionNotFound - The action 'update' could not be\n  found for VenuesController:   actionpack (5.0.0.1)\n  lib/abstract_controller/base.rb:121:in <code>process'   actionview\n  (5.0.0.1) lib/action_view/rendering.rb:30:in</code>process'   actionpack\n  (5.0.0.1) lib/action_controller/metal.rb:190:in <code>dispatch'<br>\n  actionpack (5.0.0.1) lib/action_controller/metal.rb:262:in</code>dispatch' \n  actionpack (5.0.0.1) lib/action_dispatch/routing/route_set.rb:50:in\n  <code>dispatch'   actionpack (5.0.0.1)\n  lib/action_dispatch/routing/route_set.rb:32:in</code>serve'   actionpack\n  (5.0.0.1) lib/action_dispatch/journey/router.rb:39:in <code>block in serve'\n  actionpack (5.0.0.1) lib/action_dispatch/journey/router.rb:26:in\n  </code>each'   actionpack (5.0.0.1)\n  lib/action_dispatch/journey/router.rb:26:in <code>serve'   actionpack\n  (5.0.0.1) lib/action_dispatch/routing/route_set.rb:725:in</code>call'<br>\n  warden (1.2.6) lib/warden/manager.rb:35:in <code>block in call'   warden\n  (1.2.6) lib/warden/manager.rb:34:in</code>catch'   warden (1.2.6)\n  lib/warden/manager.rb:34:in <code>call'   rack (2.0.1)\n  lib/rack/etag.rb:25:in</code>call'   rack (2.0.1)\n  lib/rack/conditional_get.rb:38:in <code>call'   rack (2.0.1)\n  lib/rack/head.rb:12:in</code>call'   rack (2.0.1)\n  lib/rack/session/abstract/id.rb:222:in <code>context'   rack (2.0.1)\n  lib/rack/session/abstract/id.rb:216:in</code>call'   actionpack (5.0.0.1)\n  lib/action_dispatch/middleware/cookies.rb:613:in <code>call'   activerecord\n  (5.0.0.1) lib/active_record/migration.rb:552:in</code>call'   actionpack\n  (5.0.0.1) lib/action_dispatch/middleware/callbacks.rb:38:in <code>block in\n  call'   activesupport (5.0.0.1) lib/active_support/callbacks.rb:97:in\n  </code><strong>run_callbacks</strong>'   activesupport (5.0.0.1)\n  lib/active_support/callbacks.rb:750:in <code>_run_call_callbacks'<br>\n  activesupport (5.0.0.1) lib/active_support/callbacks.rb:90:in\n  </code>run_callbacks'   actionpack (5.0.0.1)\n  lib/action_dispatch/middleware/callbacks.rb:36:in <code>call'   actionpack\n  (5.0.0.1) lib/action_dispatch/middleware/executor.rb:12:in</code>call'<br>\n  actionpack (5.0.0.1) lib/action_dispatch/middleware/remote_ip.rb:79:in\n  <code>call'   better_errors (2.1.1) lib/better_errors/middleware.rb:84:in\n  </code>protected_app_call'   better_errors (2.1.1)\n  lib/better_errors/middleware.rb:79:in <code>better_errors_call'<br>\n  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in</code>call'<br>\n  actionpack (5.0.0.1)<br>\n  lib/action_dispatch/middleware/debug_exceptions.rb:49:in <code>call'<br>\n  web-console (3.3.1) lib/web_console/middleware.rb:131:in</code>call_app'<br>\n  web-console (3.3.1) lib/web_console/middleware.rb:28:in <code>block in\n  call'   web-console (3.3.1) lib/web_console/middleware.rb:18:in\n  </code>catch'   web-console (3.3.1) lib/web_console/middleware.rb:18:in\n  <code>call'   actionpack (5.0.0.1)<br>\n  lib/action_dispatch/middleware/show_exceptions.rb:31:in</code>call'<br>\n  railties (5.0.0.1) lib/rails/rack/logger.rb:36:in <code>call_app'<br>\n  railties (5.0.0.1) lib/rails/rack/logger.rb:24:in</code>block in call'<br>\n  activesupport (5.0.0.1) lib/active_support/tagged_logging.rb:70:in\n  <code>block in tagged'   activesupport (5.0.0.1)\n  lib/active_support/tagged_logging.rb:26:in</code>tagged'   activesupport\n  (5.0.0.1) lib/active_support/tagged_logging.rb:70:in <code>tagged'<br>\n  railties (5.0.0.1) lib/rails/rack/logger.rb:24:in</code>call'<br>\n  sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in\n  <code>call'   actionpack (5.0.0.1)\n  lib/action_dispatch/middleware/request_id.rb:24:in</code>call'   rack\n  (2.0.1) lib/rack/method_override.rb:22:in <code>call'   rack (2.0.1)\n  lib/rack/runtime.rb:22:in</code>call'   activesupport (5.0.0.1)\n  lib/active_support/cache/strategy/local_cache_middleware.rb:28:in\n  <code>call'   actionpack (5.0.0.1)\n  lib/action_dispatch/middleware/executor.rb:12:in</code>call'   actionpack\n  (5.0.0.1) lib/action_dispatch/middleware/static.rb:136:in <code>call'<br>\n  rack (2.0.1) lib/rack/sendfile.rb:111:in</code>call'   railties (5.0.0.1)\n  lib/rails/engine.rb:522:in <code>call'   puma (3.6.0)\n  lib/puma/configuration.rb:225:in</code>call'   puma (3.6.0)\n  lib/puma/server.rb:578:in <code>handle_request'   puma (3.6.0)\n  lib/puma/server.rb:415:in</code>process_client'   puma (3.6.0)\n  lib/puma/server.rb:275:in <code>block in run'   puma (3.6.0)\n  lib/puma/thread_pool.rb:116:in</code>call'   puma (3.6.0)\n  lib/puma/thread_pool.rb:116:in `block in spawn_thread'</p>\n  \n  <p>Started POST \"/__better_errors/0c664909e8d5ec43/variables\" for ::1 at\n  2016-10-26 11:49:36 -0400</p>\n</blockquote>\n\n<p>I'm completely stumped -- any ideas/input is much appreciated! Thanks!</p>\n"}, {"tags": ["ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1477499668, "post_id": 40267596, "comment_id": 67795518, "body": "I suggest completing a rails tutorial or book first. So that you have better understanding of forms, controllers, models and database."}, {"owner": {"reputation": 39, "user_id": 5000460, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/412207ff5d42f1db97ea74ca8e4b6f15?s=128&d=identicon&r=PG", "display_name": "Syn", "link": "https://stackoverflow.com/users/5000460/syn"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1477499775, "post_id": 40267596, "comment_id": 67795579, "body": "Hi Sergio,  thank you for the comment,  I have looked at it,  and I know and understand how to insert,  it&#39;s more about comparing the submitted answer to the one in the answers table that belongs to the specific question."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1477499998, "post_id": 40267596, "comment_id": 67795723, "body": "So you have the question and its answers. Also you have a submitted answer. You can just load the existing answers and check if submitted answer is similar/equal to one of them, using whatever logic you choose. I don&#39;t really see what the question is. You don&#39;t know how to load question&#39;s answers? Or how to find one item in an array? Or what?"}, {"owner": {"reputation": 39, "user_id": 5000460, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/412207ff5d42f1db97ea74ca8e4b6f15?s=128&d=identicon&r=PG", "display_name": "Syn", "link": "https://stackoverflow.com/users/5000460/syn"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1477500381, "post_id": 40267596, "comment_id": 67795955, "body": "That method seems like its not the best solution,  load all the answers,  there will be hundreds of answers, would much rather have some query that pulls the selected answer for the question?  And then compares them both"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1477500441, "post_id": 40267596, "comment_id": 67795996, "body": "sure, query is also an option."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1477501296, "post_id": 40267596, "comment_id": 67796435, "body": "it seems that you&#39;re trying to come up with a perfect design from the start. This never works. :) Start writing the app. You know some of rails/activerecord, so you can get started. Eventually you&#39;ll get stuck, but then you can ask a much more focused answer. Which is more likely to be answerable."}, {"owner": {"reputation": 39, "user_id": 5000460, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/412207ff5d42f1db97ea74ca8e4b6f15?s=128&d=identicon&r=PG", "display_name": "Syn", "link": "https://stackoverflow.com/users/5000460/syn"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1477501829, "post_id": 40267596, "comment_id": 67796712, "body": "I know, I normally would take this approach,  but I&#39;m trying to get an understanding about how to approach this before I dive into the code,  hoping that it will make the development of the project faster,  easier and less of a mess :)  thank you for the help"}, {"owner": {"reputation": 39, "user_id": 5000460, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/412207ff5d42f1db97ea74ca8e4b6f15?s=128&d=identicon&r=PG", "display_name": "Syn", "link": "https://stackoverflow.com/users/5000460/syn"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1477516450, "post_id": 40267596, "comment_id": 67804368, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/126767/discussion-between-syn-and-sergio-tulentsev\">continue this discussion in chat</a>."}], "answers": [{"tags": [], "owner": {"reputation": 176, "user_id": 4394917, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-HxfUWEWDkGY/AAAAAAAAAAI/AAAAAAAAASU/bcnFGkQSNqA/photo.jpg?sz=128", "display_name": "dsn raghavendra rao", "link": "https://stackoverflow.com/users/4394917/dsn-raghavendra-rao"}, "is_accepted": false, "score": 0, "last_activity_date": 1477501828, "creation_date": 1477501828, "answer_id": 40268302, "question_id": 40267596, "link": "https://stackoverflow.com/questions/40267596/check-submitted-form-against-database/40268302#40268302", "title": "Check submitted form against database", "body": "<p>Look at this railscast tutorials,  actually this example is for nested forms but he took example like \"Question and Answer Modules\" it is useful for you</p>\n\n<p><a href=\"http://railscasts.com/episodes/196-nested-model-form-part-1\" rel=\"nofollow\">nested-model-form1</a></p>\n\n<p><a href=\"http://railscasts.com/episodes/197-nested-model-form-part-2\" rel=\"nofollow\">nested-model-form2</a></p>\n"}], "owner": {"reputation": 39, "user_id": 5000460, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/412207ff5d42f1db97ea74ca8e4b6f15?s=128&d=identicon&r=PG", "display_name": "Syn", "link": "https://stackoverflow.com/users/5000460/syn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 38, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1477501828, "creation_date": 1477499363, "question_id": 40267596, "link": "https://stackoverflow.com/questions/40267596/check-submitted-form-against-database", "title": "Check submitted form against database", "body": "<p>Working on creating a question based website using Ruby on rails,  still in planning so don't have much code to show,  just looking how it will logically work, we have a table of questions and answers,  where the answers table has a foreign key to the question,  so each answer belongs to one question. </p>\n\n<p>How would one approach solving the problem of taking a users input from a submitted form,  checking the question if against the answers table and then checking if a the submitted form is correct or not to the answers table? </p>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["arrays", "ruby", "assign"], "answers": [{"comments": [{"owner": {"reputation": 175, "user_id": 6910010, "user_type": "registered", "accept_rate": 79, "profile_image": "https://lh6.googleusercontent.com/-O0OGK2B2wiE/AAAAAAAAAAI/AAAAAAAAABY/T-srvnkRTpU/photo.jpg?sz=128", "display_name": "Fidel Castro", "link": "https://stackoverflow.com/users/6910010/fidel-castro"}, "edited": false, "score": 0, "creation_date": 1477499579, "post_id": 40267620, "comment_id": 67795456, "body": "omg :( I did spend like 40 minutes trying to find the solution. Thank you :D"}], "tags": [], "owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "is_accepted": true, "score": 2, "last_activity_date": 1477503535, "last_edit_date": 1477503535, "creation_date": 1477499454, "answer_id": 40267620, "question_id": 40267531, "link": "https://stackoverflow.com/questions/40267531/assigning-values-to-variables-inside-an-array/40267620#40267620", "title": "assigning values to variables inside an array", "body": "<p>Use <code>{}</code> to define a hash then:</p>\n\n<pre><code>animals = {\n  \"horse\" =&gt; \"Caballo\",\n  \"Dog\"   =&gt; \"Perro\",\n  \"Cat\"   =&gt; \"Gato\",\n  \"Hawk\"  =&gt; \"Halcon\"\n}\n\nputs animals[\"horse\"]\n#Caballo\n</code></pre>\n"}], "owner": {"reputation": 175, "user_id": 6910010, "user_type": "registered", "accept_rate": 79, "profile_image": "https://lh6.googleusercontent.com/-O0OGK2B2wiE/AAAAAAAAAAI/AAAAAAAAABY/T-srvnkRTpU/photo.jpg?sz=128", "display_name": "Fidel Castro", "link": "https://stackoverflow.com/users/6910010/fidel-castro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "accepted_answer_id": 40267620, "answer_count": 1, "score": 0, "last_activity_date": 1477503535, "creation_date": 1477499189, "question_id": 40267531, "link": "https://stackoverflow.com/questions/40267531/assigning-values-to-variables-inside-an-array", "title": "assigning values to variables inside an array", "body": "<p>coming from PHP so I'm sorry if the question is too easy for yall :/</p>\n\n<p>My code looks like</p>\n\n<pre><code>animals = [\n  \"horse\" =&gt; \"Caballo\",\n  \"Dog\" =&gt; \"Perro\",\n  \"Cat\" =&gt; \"Gato\",\n  \"Hawk\" =&gt; \"Halcon\"\n]\n\n\nputs animals[2]\n</code></pre>\n\n<p>but is not working it aint printing anything on the terminal ... I don't know if this is the right way to do it in ruby or not :/</p>\n\n<p>what I'm trying to do is to reference individual values for example:</p>\n\n<p>Horse in spanish is animals['horse']</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "controller", "routes"], "answers": [{"comments": [{"owner": {"reputation": 507, "user_id": 5348191, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/qgfms.jpg?s=128&g=1", "display_name": "trickydiddy", "link": "https://stackoverflow.com/users/5348191/trickydiddy"}, "edited": false, "score": 0, "creation_date": 1477499970, "post_id": 40267609, "comment_id": 67795697, "body": "Thanks allot! Could not see this!"}], "tags": [], "owner": {"reputation": 558, "user_id": 3294749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28b89617237a3446a856c0e28585934b?s=128&d=identicon&r=PG&f=1", "display_name": "kriskova", "link": "https://stackoverflow.com/users/3294749/kriskova"}, "is_accepted": true, "score": 2, "last_activity_date": 1477499424, "creation_date": 1477499424, "answer_id": 40267609, "question_id": 40266978, "link": "https://stackoverflow.com/questions/40266978/routes-controller-issues-with-unfavorite-action/40267609#40267609", "title": "Routes/Controller issues with &quot;unfavorite action&quot;", "body": "<p>In whishlist.html.erb you are using '@room' instead of 'room'. @room is only set in the rooms controller, not the static pages controller.</p>\n"}], "owner": {"reputation": 507, "user_id": 5348191, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/qgfms.jpg?s=128&g=1", "display_name": "trickydiddy", "link": "https://stackoverflow.com/users/5348191/trickydiddy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 32, "favorite_count": 0, "accepted_answer_id": 40267609, "answer_count": 1, "score": 0, "last_activity_date": 1477499424, "creation_date": 1477497515, "last_edit_date": 1477497855, "question_id": 40266978, "link": "https://stackoverflow.com/questions/40266978/routes-controller-issues-with-unfavorite-action", "title": "Routes/Controller issues with &quot;unfavorite action&quot;", "body": "<p>I have implemented an add to favorites feature with a has_many :through association. A user is now able to favorite or unfavorite a room in the room show.html.erb view. On a different controller and view I want to display all the favorite rooms of the logged in user. </p>\n\n<p>And I want that the user is able to delete every favorite room. Showcasing all the rooms is no problem unfortunately I can't make this work with the unfavorite button.</p>\n\n<p><strong>How can I make this work?</strong></p>\n\n<p><a href=\"https://i.stack.imgur.com/GDYhS.jpg\" rel=\"nofollow\"><img src=\"https://i.stack.imgur.com/GDYhS.jpg\" alt=\"enter image description here\"></a></p>\n\n<p><strong>rooms_controller.rb</strong></p>\n\n<pre><code>before_action :set_room, only: [:show, :favorite]\n...\n  def favorite\n    type = params[:type]\n    if type == \"favorite\"\n      current_user.favorites &lt;&lt; @room\n      redirect_to wishlist_path, notice: 'You favorited #{@room.listing_name}'\n\n    elsif type == \"unfavorite\"\n      current_user.favorites.delete(@room)\n      redirect_to wishlist_path, notice: 'Unfavorited #{@room.listing_name}'\n\n    else\n      # Type missing, nothing happens\n      redirect_to wishlist_path, notice: 'Nothing happened.'\n    end\n  end\n\n  private\n    def set_room\n      @room = Room.find(params[:id])\n    end\n</code></pre>\n\n<p><strong>static_pages_controller.rb</strong></p>\n\n<pre><code>  def wishlist\n  end\n</code></pre>\n\n<p><strong>wishlist.html.erb</strong></p>\n\n<pre><code>&lt;div&gt;\n&lt;% current_user.favorites.each do |room| %&gt;\n    &lt;%= room.listing_name %&gt;\n    &lt;%= link_to \"unfavorite\", favorite_room_path(@room, type: \"unfavorite\"), method: :put %&gt;\n&lt;% end %&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p><strong>routes.rb</strong></p>\n\n<p>Rails.application.routes.draw do</p>\n\n<pre><code>  root 'static_pages#welcome'\n  get 'wishlist' =&gt; 'static_pages#wishlist'\n\n  resources :rooms, only: [:index, :show] do \n    resources :reservations, only: [:create]\n    resources :reviews, only: [:create, :destroy]\n  end\n\n  resources :rooms do\n    put :favorite, on: :member\n  end\n</code></pre>\n"}, {"tags": ["ruby"], "answers": [{"comments": [{"owner": {"reputation": 1549, "user_id": 1594097, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/0487c4cdd633c17168020dbae62de9e5?s=128&d=identicon&r=PG", "display_name": "Argus9", "link": "https://stackoverflow.com/users/1594097/argus9"}, "edited": false, "score": 0, "creation_date": 1477498580, "post_id": 40266949, "comment_id": 67794882, "body": "That is damn clever. Thank you!"}], "tags": [], "owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "is_accepted": true, "score": 5, "last_activity_date": 1477497460, "creation_date": 1477497460, "answer_id": 40266949, "question_id": 40266899, "link": "https://stackoverflow.com/questions/40266899/split-a-single-pair-hash-into-its-key-and-value/40266949#40266949", "title": "Split a single-pair Hash into its key and value?", "body": "<p>You can do this</p>\n\n<pre><code>key, value = hash.first\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1477507162, "post_id": 40269782, "comment_id": 67799702, "body": "Take that, @Sergio! When I first saw your answer I figured it was the only short answer, but it did offer a challenge. (I still prefer yours.)"}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 2, "last_activity_date": 1477510580, "last_edit_date": 1477510580, "creation_date": 1477506949, "answer_id": 40269782, "question_id": 40266899, "link": "https://stackoverflow.com/questions/40266899/split-a-single-pair-hash-into-its-key-and-value/40269782#40269782", "title": "Split a single-pair Hash into its key and value?", "body": "<p>You can use <a href=\"http://ruby-doc.org/core-2.3.0/Hash.html#method-i-flatten\" rel=\"nofollow\">Hash#flatten</a>, which has been around since at least Ruby v1.9.3. Unlike <a href=\"http://ruby-doc.org/core-2.3.0/Array.html#method-i-flatten\" rel=\"nofollow\">Array#flatten</a>, it does not flatten recursively.</p>\n\n<pre><code>hash = { foo: ['bar', 'boo'] }\n\nfoo, bar = hash.flatten\n  #=&gt; [:foo, [\"bar\", \"boo\"]] \n</code></pre>\n\n<p>I have encountered situations where it was helpful to know that (since Ruby v1.9) a hash's keys will retain their order of insertion. That's unusual, however, so the asker is advised to review their code to see if a design  that doesn't rely on key order might not be better.    </p>\n"}], "owner": {"reputation": 1549, "user_id": 1594097, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/0487c4cdd633c17168020dbae62de9e5?s=128&d=identicon&r=PG", "display_name": "Argus9", "link": "https://stackoverflow.com/users/1594097/argus9"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 980, "favorite_count": 0, "accepted_answer_id": 40266949, "answer_count": 2, "score": 2, "last_activity_date": 1477510580, "creation_date": 1477497352, "last_edit_date": 1477497948, "question_id": 40266899, "link": "https://stackoverflow.com/questions/40266899/split-a-single-pair-hash-into-its-key-and-value", "title": "Split a single-pair Hash into its key and value?", "body": "<p>Does Ruby include a method that lets you take a single-pair Hash (example: <code>{:foo =&gt; 'bar'}</code>) and separate the key and value into two variables? I've written a small method to do this but I don't want to be redundant if Ruby can already do it. Back-of-napkin code provided below.</p>\n\n<pre><code>def split_hash hash\n    key = hash.keys.first\n    key, hash[key]\nend\n</code></pre>\n\n<p>Usage:</p>\n\n<pre><code>hash = {:foo =&gt; 'bar'}\nfoo, bar = split_hash hash\n# Expected: foo = :foo, bar = 'bar'\n</code></pre>\n"}, {"tags": ["ruby", "selenium-webdriver", "cucumber", "watir-webdriver", "selenium-grid"], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 4851355, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-gbL9565pApE/AAAAAAAAAAI/AAAAAAAAAJA/EqoNu1H3RQg/photo.jpg?sz=128", "display_name": "Gian", "link": "https://stackoverflow.com/users/4851355/gian"}, "edited": false, "score": 0, "creation_date": 1477580221, "post_id": 40275849, "comment_id": 67834077, "body": "Did you mean directory? It&#39;s very much possible to upload a <i>file</i> from my local computer to a remote computer (and I&#39;m able to do that without a problem). It&#39;s being able to upload a <i>directory</i> from a local computer to a remote computer that I haven&#39;t been able to do."}], "tags": [], "owner": {"reputation": 3480, "user_id": 4072371, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/112e615d8c60908294e30848d9556186?s=128&d=identicon&r=PG", "display_name": "titusfortner", "link": "https://stackoverflow.com/users/4072371/titusfortner"}, "is_accepted": false, "score": 0, "last_activity_date": 1477630104, "last_edit_date": 1477630104, "creation_date": 1477540540, "answer_id": 40275849, "question_id": 40266661, "link": "https://stackoverflow.com/questions/40266661/can-i-upload-a-directory-to-a-remote-node-via-watir-webdriver/40275849#40275849", "title": "Can I upload a directory to a remote node via watir-webdriver?", "body": "<p>Try passing in the absolute path to the file:</p>\n\n<pre><code>File.expand_path(\"/cucumber_tests/temp/uploads/Cuke1477494492767281\")\n</code></pre>\n\n<p>Unless you are trying to upload something from your local computer to a remote computer via Watir. That you can't do.</p>\n\n<p>No, Selenium &amp; Watir are not designed to upload directories. You could loop through files, but they wouldn't be in a subdirectory.</p>\n\n<pre><code>Dir[\"/path/to/files/*\"].each do |file|\n  @browser.file_field(id: \"assets\").set File.expand_path(file)\n  @browser.form.button.click\nend\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 4851355, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-gbL9565pApE/AAAAAAAAAAI/AAAAAAAAAJA/EqoNu1H3RQg/photo.jpg?sz=128", "display_name": "Gian", "link": "https://stackoverflow.com/users/4851355/gian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 236, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1477630104, "creation_date": 1477496707, "last_edit_date": 1477500314, "question_id": 40266661, "link": "https://stackoverflow.com/questions/40266661/can-i-upload-a-directory-to-a-remote-node-via-watir-webdriver", "title": "Can I upload a directory to a remote node via watir-webdriver?", "body": "<p>I have a cucumber test that uploads a directory by entering the directory path into the file field. It works perfectly fine when I run the test on my machine but I'm getting the following error when I try to run it against my selenium grid setup:</p>\n\n<pre><code>you may only upload files: \"/cucumber_tests/temp/uploads/Cuke1477494492767281\" (Selenium::WebDriver::Error::WebDriverError)\n  (eval):1:in 'process_watir_call'\n</code></pre>\n\n<p>Full backtrace:</p>\n\n<pre><code>/.rvm/gems/ruby-2.2.0/gems/page-object-1.1.1/lib/page-object/platforms/watir_webdriver/page_object.rb:1052:in 'instance_eval'\n/.rvm/gems/ruby-2.2.0/gems/selenium-webdriver-3.0.0/lib/selenium/webdriver/remote/bridge.rb:432:in 'send_keys_to_element'\n/.rvm/gems/ruby-2.2.0/gems/selenium-webdriver-3.0.0/lib/selenium/webdriver/common/element.rb:146:in 'send_keys'\n/.rvm/gems/ruby-2.2.0/gems/watir-webdriver-0.9.3/lib/watir-webdriver/elements/element.rb:319:in 'block in send_keys'\n/.rvm/gems/ruby-2.2.0/gems/watir-webdriver-0.9.3/lib/watir-webdriver/elements/element.rb:621:in 'element_call'\n/.rvm/gems/ruby-2.2.0/gems/watir-webdriver-0.9.3/lib/watir-webdriver/elements/element.rb:319:in 'send_keys'\n/.rvm/gems/ruby-2.2.0/gems/watir-webdriver-0.9.3/lib/watir-webdriver/elements/file_field.rb:24:in 'value='\n/.rvm/gems/ruby-2.2.0/gems/watir-webdriver-0.9.3/lib/watir-webdriver/elements/file_field.rb:13:in 'set'\n(eval):1:in 'process_watir_call'\n/.rvm/gems/ruby-2.2.0/gems/page-object-1.1.1/lib/page-object/platforms/watir_webdriver/page_object.rb:1052:in 'instance_eval'\n/.rvm/gems/ruby-2.2.0/gems/page-object-1.1.1/lib/page-object/platforms/watir_webdriver/page_object.rb:1052:in 'process_watir_call'\n/.rvm/gems/ruby-2.2.0/gems/page-object-1.1.1/lib/page-object/platforms/watir_webdriver/page_object.rb:846:in 'file_field_value_set'\n/.rvm/gems/ruby-2.2.0/gems/page-object-1.1.1/lib/page-object/accessors.rb:1021:in 'block in file_field'\n</code></pre>\n\n<p>My code pretty much looks like this:</p>\n\n<pre><code>@browser.file_field(id: \"assets\").send_keys \"/cucumber_tests/temp/uploads/Cuke1477494492767281\"\n</code></pre>\n\n<p>Again, I'd like to emphasize that this works perfectly fine on my machine but not on the remote node. Also, single file uploads are fine for me on both my machine and on the grid. I'm wondering if any of you have had luck uploading directories on remote nodes or know if it's even possible (even if I have to install more gems). Thanks in advance!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5"], "answers": [{"tags": [], "owner": {"reputation": 303, "user_id": 2997534, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/100001663213482/picture?type=large", "display_name": "user2997534", "link": "https://stackoverflow.com/users/2997534/user2997534"}, "is_accepted": false, "score": 2, "last_activity_date": 1502918087, "last_edit_date": 1502918087, "creation_date": 1502917889, "answer_id": 45723073, "question_id": 40266448, "link": "https://stackoverflow.com/questions/40266448/uninitialized-constant-grapeformatteractivemodelserializers-error/45723073#45723073", "title": "uninitialized constant Grape::Formatter::ActiveModelSerializers error", "body": "<p>Put this in your Gemfile:</p>\n\n<pre><code>gem 'grape-active_model_serializers'\n</code></pre>\n\n<p>See more in <a href=\"https://github.com/ruby-grape/grape-active_model_serializers/blob/master/README.md\" rel=\"nofollow noreferrer\">https://github.com/ruby-grape/grape-active_model_serializers/blob/master/README.md</a></p>\n"}], "owner": {"reputation": 4236, "user_id": 717600, "user_type": "registered", "accept_rate": 32, "profile_image": "https://i.stack.imgur.com/yYVqR.jpg?s=128&g=1", "display_name": "Md Sirajus Salayhin", "link": "https://stackoverflow.com/users/717600/md-sirajus-salayhin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 578, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1502918087, "creation_date": 1477496059, "question_id": 40266448, "link": "https://stackoverflow.com/questions/40266448/uninitialized-constant-grapeformatteractivemodelserializers-error", "title": "uninitialized constant Grape::Formatter::ActiveModelSerializers error", "body": "<p>I am using grape gem to expose API. After deployment when running app from AWS server I am getting below error:</p>\n\n<p><em>Message from application: uninitialized constant Grape::Formatter::ActiveModelSerializers (NameError)</em></p>\n\n<p>My application is working on my ubuntu machine.</p>\n"}, {"tags": ["jquery", "ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 2074, "user_id": 688071, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1229375604/picture?type=large", "display_name": "Godzilla74", "link": "https://stackoverflow.com/users/688071/godzilla74"}, "edited": false, "score": 0, "creation_date": 1477498624, "post_id": 40267112, "comment_id": 67794909, "body": "Ok, have the presentation figured out, but what&#39;s the logic supposed to look like?  The left side can&#39;t actually contain the form element to pass on submit since only the objects in the right side should have the controller action performed.  Am I wrong?"}, {"owner": {"reputation": 61438, "user_id": 63034, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/ZXKMO.jpg?s=128&g=1", "display_name": "mikej", "link": "https://stackoverflow.com/users/63034/mikej"}, "reply_to_user": {"reputation": 2074, "user_id": 688071, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1229375604/picture?type=large", "display_name": "Godzilla74", "link": "https://stackoverflow.com/users/688071/godzilla74"}, "edited": false, "score": 0, "creation_date": 1477501832, "post_id": 40267112, "comment_id": 67796714, "body": "That&#39;s right. Very briefly, it&#39;s likely that the left hand <i>Available</i> list will be generated using the <code>select_tag</code> helper i.e. it isn&#39;t bound to one of your model attributes using <code>f.select...</code> initially populated with the appropriate IP addresses.. and then the 2 arrows will need some JavaScript bound which moves items between the 2 lists."}], "tags": [], "owner": {"reputation": 61438, "user_id": 63034, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/ZXKMO.jpg?s=128&g=1", "display_name": "mikej", "link": "https://stackoverflow.com/users/63034/mikej"}, "is_accepted": true, "score": 0, "last_activity_date": 1477497916, "creation_date": 1477497916, "answer_id": 40267112, "question_id": 40266214, "link": "https://stackoverflow.com/questions/40266214/rails-multiple-select-form/40267112#40267112", "title": "Rails multiple select form", "body": "<p>If you take a look at <a href=\"http://api.rubyonrails.org/classes/ActionView/Helpers/FormBuilder.html#method-i-select\" rel=\"nofollow\">the docs for select</a> you'll see it takes 2 sets of options: <code>options</code> - for Rails options, and <code>html_options</code> for additional attributes to include on the generated HTML <code>&lt;select&gt;</code> tag.</p>\n\n<p><code>include_blank</code> is a Rails option, whereas <code>multiple</code> is an HTML attribute so these need to be passed in separate hashes:</p>\n\n\n\n<p>Also, it looks like when tidying your code to post the question you've lost a comma after the end of your <code>collect</code> block so be sure to make sure that's included when retrying this.</p>\n\n<p>That's the reason why available hosts is appearing as a single item dropdown instead of a list anyway. Implementing the moving between \"available\" and \"assigned\" lists is beyond the scope of a single question.</p>\n"}], "owner": {"reputation": 2074, "user_id": 688071, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1229375604/picture?type=large", "display_name": "Godzilla74", "link": "https://stackoverflow.com/users/688071/godzilla74"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 468, "favorite_count": 0, "accepted_answer_id": 40267112, "answer_count": 1, "score": 0, "last_activity_date": 1477497916, "creation_date": 1477495434, "question_id": 40266214, "link": "https://stackoverflow.com/questions/40266214/rails-multiple-select-form", "title": "Rails multiple select form", "body": "<p>I'm trying to make a multiple select form where a user can move IP addresses from the left select box to the right side (I'm not sure what that object is called).</p>\n\n<p>I have my basic form code, but it's showing a dropdown instead (I've taken out the irrelevant code):</p>\n\n<pre><code>&lt;%= form_for @network_host_groups do |f| %&gt;\n  &lt;%= f.select :network_hosts, @network_hosts.collect { |n| [ n.ip_address, n.id ] } multiple: true, include_blank: false %&gt;\n  &lt;%= f.submit \"Add\", class: \"btn btn-success\" %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>Which looks like:</p>\n\n<p><a href=\"https://i.stack.imgur.com/i4ODS.png\" rel=\"nofollow\"><img src=\"https://i.stack.imgur.com/i4ODS.png\" alt=\"enter image description here\"></a></p>\n\n<p>However, I'm trying to get something like:</p>\n\n<p><a href=\"https://i.stack.imgur.com/iyegh.png\" rel=\"nofollow\"><img src=\"https://i.stack.imgur.com/iyegh.png\" alt=\"enter image description here\"></a></p>\n\n<p>What's the best way to go about doing this?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 1037, "user_id": 3366016, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c4721c96622c2e1798f6cfece8a0f52f?s=128&d=identicon&r=PG&f=1", "display_name": "user3366016", "link": "https://stackoverflow.com/users/3366016/user3366016"}, "edited": false, "score": 0, "creation_date": 1477490842, "post_id": 40264171, "comment_id": 67789396, "body": "Based on your current approach I would do all the queries in your home page controller as instance variables. Then in your View loop over the results (i.e. loop over Sundries, then Curry, then Starter). Or you could re-write the query as a single one that joins the tables and checks all the options in the where clause."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1477491778, "post_id": 40264171, "comment_id": 67790086, "body": "<i>&quot;I have number of models such as Sundries, Curry and Starter&quot;</i> \u2013 I&#39;m curious, what are the differences between these models?"}], "answers": [{"comments": [{"owner": {"reputation": 9015, "user_id": 155826, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/55RCe.jpg?s=128&g=1", "display_name": "Ryan Crispin Heneise", "link": "https://stackoverflow.com/users/155826/ryan-crispin-heneise"}, "edited": false, "score": 1, "creation_date": 1477492207, "post_id": 40264507, "comment_id": 67790376, "body": "Creating a fulltext search like this in most cases is preferable to chaining models together as suggested by the other answers. This will allow you to do pagination and other limiting applications, which the other answers wouldn&#39;t be able to do."}], "tags": [], "owner": {"reputation": 5592, "user_id": 167820, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/809ac34c7d3f932baf08bba11c486b9a?s=128&d=identicon&r=PG", "display_name": "ck3g", "link": "https://stackoverflow.com/users/167820/ck3g"}, "is_accepted": false, "score": 2, "last_activity_date": 1477490862, "creation_date": 1477490862, "answer_id": 40264507, "question_id": 40264171, "link": "https://stackoverflow.com/questions/40264171/search-multiple-models-in-ruby-on-rails/40264507#40264507", "title": "Search Multiple models in ruby on rails", "body": "<p>There are several approaches how you can implement this. You can use advanced search engines such as ElasticSearch or Sphinx. Or you can use (for example) <a href=\"https://github.com/Casecommons/pg_search\" rel=\"nofollow\">pg_search</a> gem in case you are using Postgresql as your DataBase.</p>\n\n<p>You can find RailsCasts for each of these approaches (some of them are probably for subscribers only).</p>\n\n<p>As soon as you learning Rails, I would recommend to try out <strong>pg_search</strong> at first and avoid using search engines. Because it can be tricky sometimes for beginners. You can get to them later than you will have more data in your DB, or you would need to improve your skills. Try to make working solution in the first place and then improve it.</p>\n"}, {"comments": [{"owner": {"reputation": 1037, "user_id": 3366016, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c4721c96622c2e1798f6cfece8a0f52f?s=128&d=identicon&r=PG&f=1", "display_name": "user3366016", "link": "https://stackoverflow.com/users/3366016/user3366016"}, "edited": false, "score": 0, "creation_date": 1477492152, "post_id": 40264547, "comment_id": 67790329, "body": "for this to work do the objects have to have the same attributes?"}, {"owner": {"reputation": 32451, "user_id": 2516474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a2179a340c0e84edc285d432211145d?s=128&d=identicon&r=PG", "display_name": "SteveTurczyn", "link": "https://stackoverflow.com/users/2516474/steveturczyn"}, "reply_to_user": {"reputation": 1037, "user_id": 3366016, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c4721c96622c2e1798f6cfece8a0f52f?s=128&d=identicon&r=PG&f=1", "display_name": "user3366016", "link": "https://stackoverflow.com/users/3366016/user3366016"}, "edited": false, "score": 1, "creation_date": 1477492365, "post_id": 40264547, "comment_id": 67790492, "body": "Only as far as necessary.  We know they all respond to <code>title</code> because OP has used <code>title</code> in all searches.  Any <code>link_to</code> should work as the <code>link_to</code> will adapt to the class of the object, so <code>link_to result</code> will link to <code>curry_path(result)</code> if result is an instance of the <code>Curry</code> class but it will link to <code>starter_path(result)</code> if result is a <code>Starter</code> instance."}, {"owner": {"reputation": 1037, "user_id": 3366016, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c4721c96622c2e1798f6cfece8a0f52f?s=128&d=identicon&r=PG&f=1", "display_name": "user3366016", "link": "https://stackoverflow.com/users/3366016/user3366016"}, "edited": false, "score": 0, "creation_date": 1477493303, "post_id": 40264547, "comment_id": 67791216, "body": "That&#39;s great solution then IMO as long as the OP doesn&#39;t want to display more detailed information on the page."}, {"owner": {"reputation": 32451, "user_id": 2516474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a2179a340c0e84edc285d432211145d?s=128&d=identicon&r=PG", "display_name": "SteveTurczyn", "link": "https://stackoverflow.com/users/2516474/steveturczyn"}, "reply_to_user": {"reputation": 1037, "user_id": 3366016, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c4721c96622c2e1798f6cfece8a0f52f?s=128&d=identicon&r=PG&f=1", "display_name": "user3366016", "link": "https://stackoverflow.com/users/3366016/user3366016"}, "edited": false, "score": 1, "creation_date": 1477493945, "post_id": 40264547, "comment_id": 67791732, "body": "@user3366016 You can automatically render a partial that will have different fields for different models... do <code>&lt;%= render result %&gt;</code> and if the result is a Curry it will look for a partial named <code>_curry.html.erb</code> .  It&#39;s explained in <a href=\"http://guides.rubyonrails.org/layouts_and_rendering.html\" rel=\"nofollow noreferrer\">guides.rubyonrails.org/layouts_and_rendering.html</a>"}], "tags": [], "owner": {"reputation": 32451, "user_id": 2516474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a2179a340c0e84edc285d432211145d?s=128&d=identicon&r=PG", "display_name": "SteveTurczyn", "link": "https://stackoverflow.com/users/2516474/steveturczyn"}, "is_accepted": true, "score": 5, "last_activity_date": 1477490956, "creation_date": 1477490956, "answer_id": 40264547, "question_id": 40264171, "link": "https://stackoverflow.com/questions/40264171/search-multiple-models-in-ruby-on-rails/40264547#40264547", "title": "Search Multiple models in ruby on rails", "body": "<p>You can add ActiveRecord_Relations together, and it will give you a simple array</p>\n\n<pre><code>@results = Sundries.search(search_term) + Curry.search(search_term) + Starter.search(search_term)\n</code></pre>\n\n<p>In the view...</p>\n\n<pre><code>&lt;% @results.each do |result| %&gt;\n  &lt;%= \"#{result.title} part of our fine #{result.class.name} choices\" %&gt;\n&lt;% end %&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1301, "user_id": 1537791, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/1fVeq.jpg?s=128&g=1", "display_name": "Jayaprakash", "link": "https://stackoverflow.com/users/1537791/jayaprakash"}, "is_accepted": false, "score": 0, "last_activity_date": 1477491179, "creation_date": 1477491179, "answer_id": 40264641, "question_id": 40264171, "link": "https://stackoverflow.com/questions/40264171/search-multiple-models-in-ruby-on-rails/40264641#40264641", "title": "Search Multiple models in ruby on rails", "body": "<p>You can use this <a href=\"https://github.com/activerecord-hackery/ransack\" rel=\"nofollow\">ransack</a> to implement search functionality.</p>\n\n<p>In your view side</p>\n\n<pre><code>&lt;%= form_tag search_path, method: :get do %&gt;\n  &lt;%= text_field_tag :q, nil %&gt;\n&lt;%= end %&gt;\n</code></pre>\n\n<p>and in your controller action method,</p>\n\n<pre><code>q = params[:q]\n@sunderies = Sundries.search(title_cont: q).result\n@curry = Curry.search(title_cont: q).result\n@starter = Starter.search(title_cont: q).result\n@total_results = @sunderies + @curry + @starter\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 835, "user_id": 3416381, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6V4dL.jpg?s=128&g=1", "display_name": "madevident", "link": "https://stackoverflow.com/users/3416381/madevident"}, "is_accepted": false, "score": 4, "last_activity_date": 1558017850, "creation_date": 1558017850, "answer_id": 56171191, "question_id": 40264171, "link": "https://stackoverflow.com/questions/40264171/search-multiple-models-in-ruby-on-rails/56171191#56171191", "title": "Search Multiple models in ruby on rails", "body": "<p>Answering for anyone looking at this in 2019+... <a href=\"https://github.com/scenic-views/scenic\" rel=\"nofollow noreferrer\">scenic</a> is the gem you want to use (as long as your database is postgres).</p>\n"}], "owner": {"reputation": 454, "user_id": 7075422, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/2f181bd8e1b1b3d63aa553499cb92ff4?s=128&d=identicon&r=PG&f=1", "display_name": "roshiend ", "link": "https://stackoverflow.com/users/7075422/roshiend"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4780, "favorite_count": 2, "accepted_answer_id": 40264547, "answer_count": 4, "score": 3, "last_activity_date": 1558017850, "creation_date": 1477489952, "last_edit_date": 1477497921, "question_id": 40264171, "link": "https://stackoverflow.com/questions/40264171/search-multiple-models-in-ruby-on-rails", "title": "Search Multiple models in ruby on rails", "body": "<p>I am still a beginner in ruby on rails and I'm trying to create a simple search option for a website that I'm developing. </p>\n\n<p>I have number of models such as Sundries, Curry and Starter. </p>\n\n<p>My search works fine if I have one model but how do I search all models title or name?</p>\n\n<p>I have added following method to each of the models and tried to display results in home page. but no luck!</p>\n\n<pre><code>def self.search(search)\nwhere(\"LOWER(title) LIKE ?\", \"%#{search.downcase}%\") \n#where(\"content LIKE ?\", \"%#{search}%\")\nend\n</code></pre>\n\n<p>Can someone please help me figure this out with an example please?</p>\n\n<p>Thank you.</p>\n"}, {"tags": ["ruby", "visual-studio-code", "rubocop"], "answers": [{"tags": [], "owner": {"reputation": 1431, "user_id": 729535, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5593abb6ec21bc7a9c2070a82a27e4e3?s=128&d=identicon&r=PG", "display_name": "Luiz Carvalho", "link": "https://stackoverflow.com/users/729535/luiz-carvalho"}, "is_accepted": false, "score": 0, "last_activity_date": 1477489699, "creation_date": 1477489699, "answer_id": 40264086, "question_id": 40263902, "link": "https://stackoverflow.com/questions/40263902/value-is-not-an-accepted-value-valid-values-rubocop-737-20/40264086#40264086", "title": "Value is not an accepted value. Valid values: [&quot;rubocop&quot;] (737, 20)", "body": "<p>Restart Visual Studio Code solve the problem with <code>\"ruby.format\": \"rubocop\"</code>, configuration.</p>\n"}], "owner": {"reputation": 1431, "user_id": 729535, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5593abb6ec21bc7a9c2070a82a27e4e3?s=128&d=identicon&r=PG", "display_name": "Luiz Carvalho", "link": "https://stackoverflow.com/users/729535/luiz-carvalho"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 210, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1535035087, "creation_date": 1477489278, "last_edit_date": 1535035087, "question_id": 40263902, "link": "https://stackoverflow.com/questions/40263902/value-is-not-an-accepted-value-valid-values-rubocop-737-20", "title": "Value is not an accepted value. Valid values: [&quot;rubocop&quot;] (737, 20)", "body": "<p>I install Ruby and ruby-rubocop extension in my Visual Studio Code, but this warning is showing in my editor:</p>\n\n<pre><code>Value is not an accepted value. Valid values: [\"rubocop\"] (737, 20)\n</code></pre>\n\n<p>When I click in warning redirect to <code>settings.json (/)</code>, specifically <code>\"ruby.format\": \"\",</code>.</p>\n\n<pre><code>// ruby language settings\n\n    // Defines where the Ruby extension will look to find Modules, Classes and methods.\n    \"ruby.locate\": {\n        \"exclude\": \"{**/@(test|spec|tmp|.*),**/@(test|spec|tmp|.*)/**,**/*_spec.rb}\",\n        \"include\": \"**/*.rb\"\n    },\n\n    // Path to the Ruby interpreter.  Set this to an absolute path to select from multiple installed Ruby versions.\n    \"ruby.interpreter.commandPath\": \"ruby\",\n\n    // Path to the rct-complete command.  Set this to an absolute path to select from multiple installed Ruby versions.\n    \"ruby.rctComplete.commandPath\": \"rct-complete\",\n\n    // Select the type of formatter to use. If 'rubocop' is selected, the ruby.lint.rubocop options will be passed to the formatter.\n    \"ruby.format\": \"\",\n\n    // Set individual ruby linters to use\n    \"ruby.lint\": {},\n</code></pre>\n\n<p>In my .vscode/settings.json I try <code>\"ruby.format\": \"rubocop\",</code> and <code>\"ruby.format\": [\"rubocop\"],</code> but warning keep showing.</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 89316, "user_id": 238886, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/8ca29123b5669b26f9b6ca2c62d9d215?s=128&d=identicon&r=PG", "display_name": "Wayne Conrad", "link": "https://stackoverflow.com/users/238886/wayne-conrad"}, "edited": false, "score": 0, "creation_date": 1477489947, "post_id": 40263295, "comment_id": 67788730, "body": "Hello.  You&#39;ve asked a couple of related questions.  One of those questions is an exact duplicate, which is why I just applied the so-called &quot;dup hammer.&quot;  The other, &quot;why,&quot; is not an exact duplicate, although I suspect it&#39;s a tough question to find an answer for.  For the most part, the answer is &quot;that&#39;s the way it is, because the author of Ruby decided to make it so.&quot;  If we were lucky enough to find something that Matz wrote about class variable behavior, then the &quot;why&quot; part could be answerable."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1477490011, "post_id": 40263295, "comment_id": 67788774, "body": "Class variables are not only shared between a class and its subclasses, but also between a class and its instances."}, {"owner": {"reputation": 89316, "user_id": 238886, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/8ca29123b5669b26f9b6ca2c62d9d215?s=128&d=identicon&r=PG", "display_name": "Wayne Conrad", "link": "https://stackoverflow.com/users/238886/wayne-conrad"}, "edited": false, "score": 0, "creation_date": 1477490087, "post_id": 40263295, "comment_id": 67788836, "body": "I should also add that <code>@@</code> class variables are almost never a good idea.  Whenever I&#39;ve worked with code that used them, I&#39;m usually able to change them to class instance variables, which are easier to reason about."}, {"owner": {"reputation": 2409, "user_id": 4008366, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/5a9f80535627f21ba4191fea0c6a0771?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Kim", "link": "https://stackoverflow.com/users/4008366/andrew-kim"}, "reply_to_user": {"reputation": 89316, "user_id": 238886, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/8ca29123b5669b26f9b6ca2c62d9d215?s=128&d=identicon&r=PG", "display_name": "Wayne Conrad", "link": "https://stackoverflow.com/users/238886/wayne-conrad"}, "edited": false, "score": 0, "creation_date": 1477490878, "post_id": 40263295, "comment_id": 67789410, "body": "thanks @WayneConrad sorry for the duplicate, this makes sense"}, {"owner": {"reputation": 2409, "user_id": 4008366, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/5a9f80535627f21ba4191fea0c6a0771?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Kim", "link": "https://stackoverflow.com/users/4008366/andrew-kim"}, "edited": false, "score": 0, "creation_date": 1477496883, "post_id": 40263295, "comment_id": 67793752, "body": "from the horses mouth <a href=\"https://twitter.com/yukihiro_matz/status/791300638592241664\" rel=\"nofollow noreferrer\">twitter.com/yukihiro_matz/status/791300638592241664</a> : &quot;consider these as global variables with limited scope.&quot;"}], "answers": [{"comments": [{"owner": {"reputation": 2409, "user_id": 4008366, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/5a9f80535627f21ba4191fea0c6a0771?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Kim", "link": "https://stackoverflow.com/users/4008366/andrew-kim"}, "edited": false, "score": 0, "creation_date": 1477489746, "post_id": 40264087, "comment_id": 67788572, "body": "why are class variables shared throughout class hierarchy? why don&#39;t they have class scope?"}, {"owner": {"reputation": 8861, "user_id": 561382, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/FC1BR.jpg?s=128&g=1", "display_name": "Victor Moroz", "link": "https://stackoverflow.com/users/561382/victor-moroz"}, "reply_to_user": {"reputation": 2409, "user_id": 4008366, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/5a9f80535627f21ba4191fea0c6a0771?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Kim", "link": "https://stackoverflow.com/users/4008366/andrew-kim"}, "edited": false, "score": 1, "creation_date": 1477489933, "post_id": 40264087, "comment_id": 67788722, "body": "@AndrewKim Because it&#39;s how class variables work"}, {"owner": {"reputation": 2409, "user_id": 4008366, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/5a9f80535627f21ba4191fea0c6a0771?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Kim", "link": "https://stackoverflow.com/users/4008366/andrew-kim"}, "edited": false, "score": 0, "creation_date": 1477490051, "post_id": 40264087, "comment_id": 67788814, "body": "any ideas why thats a feature? Seems like class instance variables could have conflicts with actual object instance variables"}, {"owner": {"reputation": 2409, "user_id": 4008366, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/5a9f80535627f21ba4191fea0c6a0771?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Kim", "link": "https://stackoverflow.com/users/4008366/andrew-kim"}, "edited": false, "score": 0, "creation_date": 1477490081, "post_id": 40264087, "comment_id": 67788829, "body": "thanks either way, this has given me a lot more clarity!"}, {"owner": {"reputation": 1670, "user_id": 6886515, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fcszT.jpg?s=128&g=1", "display_name": "Black Enigma", "link": "https://stackoverflow.com/users/6886515/black-enigma"}, "reply_to_user": {"reputation": 2409, "user_id": 4008366, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/5a9f80535627f21ba4191fea0c6a0771?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Kim", "link": "https://stackoverflow.com/users/4008366/andrew-kim"}, "edited": false, "score": 0, "creation_date": 1477490311, "post_id": 40264087, "comment_id": 67789010, "body": "@Andrew Kim. No they can&#39;t have clashes, because <b>instance variables</b> are bound to <code>self</code> which is the <i>current object</i> running at that time"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1477498443, "post_id": 40264087, "comment_id": 67794805, "body": "Andrew, a class instance variable <code>@cat</code> and an instance variable <code>@cat</code> are as different as <code>@night</code> and <code>@day</code>."}], "tags": [], "owner": {"reputation": 8861, "user_id": 561382, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/FC1BR.jpg?s=128&g=1", "display_name": "Victor Moroz", "link": "https://stackoverflow.com/users/561382/victor-moroz"}, "is_accepted": false, "score": 0, "last_activity_date": 1477489915, "last_edit_date": 1477489915, "creation_date": 1477489701, "answer_id": 40264087, "question_id": 40263295, "link": "https://stackoverflow.com/questions/40263295/why-does-a-ruby-parent-class-assume-class-variables-of-its-children/40264087#40264087", "title": "Why does a ruby parent class assume class variables of its children?", "body": "<p>Class variables are shared throughout the class hierarchy, they are not inherited, so assignment order matters:</p>\n\n<pre><code>class Mammal\n  @@class_name = \"mammal\"\n  def self.class_name\n    @@class_name\n  end\nend\n\nclass Dog &lt; Mammal\n  @@class_name = \"dog\"\n  def self.class_name\n    @@class_name\n  end\nend\n\nclass Mammal\n  @@class_name = \"fish\"\nend\n\nDog.class_name # fish\nMammal.class_name # fish\n</code></pre>\n\n<p><strong>UPDATE</strong></p>\n\n<p>Use class instance variables instead, class variables are tricky:</p>\n\n<pre><code>class Mammal\n  @class_name = \"mammal\"\n  def self.class_name\n    @class_name\n  end\nend\n\nclass Dog &lt; Mammal\n  @class_name = \"dog\"\n  def self.class_name\n    @class_name\n  end\nend\n\nDog.class_name # dog\nMammal.class_name # mammal\n</code></pre>\n"}], "owner": {"reputation": 2409, "user_id": 4008366, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/5a9f80535627f21ba4191fea0c6a0771?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Kim", "link": "https://stackoverflow.com/users/4008366/andrew-kim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 102, "favorite_count": 0, "closed_date": 1477489744, "answer_count": 1, "score": 3, "last_activity_date": 1477489915, "creation_date": 1477487606, "question_id": 40263295, "link": "https://stackoverflow.com/questions/40263295/why-does-a-ruby-parent-class-assume-class-variables-of-its-children", "closed_reason": "Duplicate", "title": "Why does a ruby parent class assume class variables of its children?", "body": "<p>Given this code:</p>\n\n<pre><code>class Mammal\n  @@class_name = \"mammal\"\n  def self.class_name\n    @@class_name\n  end\nend\n\nclass Dog &lt; Mammal\n  @@class_name = \"dog\"\n  def self.class_name\n    @@class_name\n  end\nend\n\nDog.class_name\n# =&gt; dog\nMammal.class_name\n# =&gt; dog\n</code></pre>\n\n<p>Why is this a feature of ruby? Seems like class variables follow a different scope than instance variables do for instances. Is a class variable's scope shared across its entire inheritance chain? If so, why is that? They are separate classes and should have scoped class variables, no? What am I missing?</p>\n"}, {"tags": ["ruby", "capistrano", "sidekiq", "rbenv", "capistrano3"], "answers": [{"tags": [], "owner": {"reputation": 378, "user_id": 8198873, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a3ebc18e2cafa3f665ea5bc9871f2cf?s=128&d=identicon&r=PG", "display_name": "yohanes", "link": "https://stackoverflow.com/users/8198873/yohanes"}, "is_accepted": false, "score": 1, "last_activity_date": 1572830339, "last_edit_date": 1572830339, "creation_date": 1572708548, "answer_id": 58672509, "question_id": 40263086, "link": "https://stackoverflow.com/questions/40263086/capistrano-3-rbenv-sidekiq-command-not-found/58672509#58672509", "title": "Capistrano 3 + rbenv + sidekiq: Command not found", "body": "<p>It is because you have multiple ruby versions installed at your server and they aren't well configured. The message showed that your current deploy process, which set at <code>deploy.rb</code> as v.2.3.1 , can't run <code>sidekiq:start</code> because there is sidekiq process that still running using v.1.9.3-p429.</p>\n\n<pre><code>01 The `sidekiq' command exists in these Ruby versions:\n01   1.9.3-p429\n</code></pre>\n\n<p>When you want to deploy using different <code>rbenv_ruby</code> version, don't forget to stop current sidekiq process first by using previously deployed <code>rbenv_version</code>, in this case, v.1.9.3-p429 that showed at the message, at <code>deploy.rb</code></p>\n\n<pre><code>set :rbenv_ruby, '1.9.3-p429'\n</code></pre>\n\n<p>and then do</p>\n\n<pre><code>$ cap production sidekiq:stop\n</code></pre>\n\n<p>It is better to follow ruby version  of your server's apache configuration, in your case v.2.3.1. So you have to change your server global ruby version from v.2.1.2 to v.2.3.1:</p>\n\n<pre><code>$ rbenv global 2.3.1\n$ rbenv rehash\n</code></pre>\n\n<p>and if you check again <code>$ rbenv version</code> it will return</p>\n\n<pre><code>  1.9.3-p429\n  2.1.2\n* 2.3.1 (set by /home/deploy/.rbenv/version)\n</code></pre>\n\n<p>Note: To change the global version is not necessary especialy if you have more than one <code>VirtualHost</code> with different ruby version.</p>\n\n<p>The most important thing is: before re-deploy using different ruby version, don't forget to make sure no sidekiq process running with previous deployed ruby version. Additionally, make sure your <code>rbenv_ruby</code> version setting to follow <code>VirtualHost</code> ruby versions at <code>deploy.rb</code>:</p>\n\n<pre><code>set :rbenv_ruby, '2.3.1'\n</code></pre>\n\n<p>Do <code>cap production deploy</code> again and you will get no <code>rbenv: sidekiq: command not found</code> error anymore and apache error too. </p>\n"}], "owner": {"reputation": 12290, "user_id": 228370, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/a3f87affc7032e0af7cc4ce2ddb08ce9?s=128&d=identicon&r=PG", "display_name": "23tux", "link": "https://stackoverflow.com/users/228370/23tux"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 611, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1572830339, "creation_date": 1477487064, "question_id": 40263086, "link": "https://stackoverflow.com/questions/40263086/capistrano-3-rbenv-sidekiq-command-not-found", "title": "Capistrano 3 + rbenv + sidekiq: Command not found", "body": "<p>I'm upgrading to Capistrano 3, and during deploy sidekiq should start. But I'm getting the following error:</p>\n\n<pre><code>00:23 sidekiq:start\n      01 $HOME/.rbenv/bin/rbenv exec sidekiq --index 0 --pidfile /var/www/my_app/shared/tmp/pids/sidekiq-0.pid --environment staging --logfile \u2026\n      01 rbenv: sidekiq: command not found\n      01\n      01 The `sidekiq' command exists in these Ruby versions:\n      01   1.9.3-p429\n      01\n</code></pre>\n\n<p>I don't use the system ruby or rbenv default ruby version for this project. I have the ruby version set in my <code>VirtualHost</code> apache configuration:</p>\n\n<pre><code>PassengerRuby /home/deploy/.rbenv/versions/2.3.1/bin/ruby\n</code></pre>\n\n<p>and <code>$ rbenv versions</code> returns</p>\n\n<pre><code>  1.9.3-p429\n* 2.1.2 (set by /home/deploy/.rbenv/version)\n  2.3.1\n</code></pre>\n\n<p>This is my <code>Capfile</code></p>\n\n<pre><code># Load DSL and set up stages\nrequire \"capistrano/setup\"\n\n# Include default deployment tasks\nrequire \"capistrano/deploy\"\nrequire 'capistrano/sidekiq'\nrequire \"whenever/capistrano\"\nrequire 'airbrake/capistrano/tasks'\nrequire 'capistrano/rbenv'\nrequire 'capistrano/bundler'\nrequire 'capistrano/rails/migrations'\nrequire 'capistrano/passenger'\n\nDir.glob(\"lib/capistrano/tasks/*.rake\").each { |r| import r }\n</code></pre>\n\n<p>And this is my <code>deploy.rb</code></p>\n\n<pre><code># config valid only for current version of Capistrano\nlock '3.6.1'\n\nserver '123.456.789.0', user: 'my_user', roles: %w{web app db}\n\nset :application, 'my_app'\nset :repo_url, 'git@server.com:/myApp'\nset :ssh_options, { forward_agent: true }\nset :passenger_restart_with_touch, true\nset :migration_role, :app\nset :rbenv_ruby, '2.3.1'\nset :rbenv_map_bins, ['rake', 'gem', 'bundle', 'ruby', 'rails', 'sidekiq', 'sidekiqctl']\n\nset :default_env, -&gt;{ { rack_env: fetch(:rails_env) } }\n\nset :linked_dirs, fetch(:linked_dirs, []).push('log', 'tmp/pids', 'tmp/cache', 'tmp/sockets', 'public/system')\nset :linked_files, fetch(:linked_files, []).push('config/config.yml')\n\nafter 'deploy:finished', 'airbrake:deploy'\n\nset :whenever_command_environment_variables, -&gt;{ { rack_env: fetch(:whenever_environment) } }\nset :whenever_environment,  -&gt;{ fetch :rack_env, fetch(:stage, \"production\") }\nset :whenever_identifier, -&gt;{ \"#{fetch(:application)}_#{fetch(:stage)}\" }\n\nset :sidekiq_env, -&gt; { fetch(:rails_env) }\nset :sidekiq_concurrency, 5\nset :sidekiq_require, './lib/sidekiq_runner.rb'\nset :sidekiq_queue, ['high', 'low']\n</code></pre>\n\n<p>And my <code>deploy/staging.rb</code> (there is also a production.rb):</p>\n\n<pre><code>set :rails_env, \"staging\"\nset :deploy_to, \"/var/www/my_app\"\n\nrole :web, \"123.456.789.0\"                          # Your HTTP server, Apache/etc\nrole :app, \"123.456.789.0\"                          # This may be the same as your `Web` server\nrole :db,  \"123.456.789.0\", primary: true # This is where Rails migrations will run\n</code></pre>\n\n<ul>\n<li>I'm not sure if the capistrano rbenv gem really uses the ruby 2.3.1 version for the deployment. I'm pretty sure that has something to do with it. But I don't know how to debug this</li>\n<li>The original command with capistrano 2 to start sidekiq was <code>set :sidekiq_cmd, defer { \"bundle exec sidekiq -c5 -r ./lib/load_feeds/sidekiq_runner.rb -q high -q low\" }</code></li>\n<li>I'm deploying a sinatra app, and it uses <code>ENV[\"RACK_ENV\"]</code> for configuration files. Therefore the mix between rails env and rack env</li>\n</ul>\n"}, {"tags": ["ruby", "sinatra", "nokogiri"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1477498307, "post_id": 40262696, "comment_id": 67794722, "body": "Welcome to Stack Overflow. Your question isn&#39;t clear nor is it asked well. Please read &quot;<a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>&quot; and the linked pages, and &quot;<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>&quot;. We need the minimal example of your code that demonstrates the problem, along with the output you expect."}], "answers": [{"tags": [], "owner": {"reputation": 2131, "user_id": 3475678, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/230e565cac4491b28134bb92bfc28a70?s=128&d=identicon&r=PG&f=1", "display_name": "Aleksey", "link": "https://stackoverflow.com/users/3475678/aleksey"}, "is_accepted": false, "score": 1, "last_activity_date": 1477489912, "last_edit_date": 1477489912, "creation_date": 1477489597, "answer_id": 40264047, "question_id": 40262696, "link": "https://stackoverflow.com/questions/40262696/how-to-pull-only-the-desired-element-with-xml-nokogiri/40264047#40264047", "title": "How to pull only the desired element with xml? (Nokogiri)", "body": "<p>For given xml</p>\n\n<pre><code>&lt;node&gt;\n  &lt;param name=\"\u0410\u0440\u0442\u0438\u043a\u0443\u043b\" code=\"article\"&gt;LS_745094&lt;/param&gt;\n  &lt;param name=\"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439\" code=\"comment\"/&gt;\n  &lt;param name=\"\u0426\u0432\u0435\u0442\u0430\" code=\"colors\"&gt;\u0431\u0435\u043b\u044b\u0439, \u043f\u0440\u043e\u0437\u0440\u0430\u0447\u043d\u044b\u0439&lt;/param&gt;\n&lt;/node&gt;\n</code></pre>\n\n<p>you can try this</p>\n\n<pre><code>require 'nokogiri'\n\nxml = Nokogiri::XML(File.open('YOUR_FILE'))    \nel = xml.xpath('//param[@code=\"article\"]')\n</code></pre>\n\n<p>It would give you </p>\n\n<pre><code>[#&lt;Nokogiri::XML::Element:0x3fdf8880a8ac name=\"param\" attributes=[#&lt;Nokogiri::XML::Attr:0x3fdf8880a7a8 name=\"name\" value=\"\u0410\u0440\u0442\u0438\u043a\u0443\u043b\"&gt;, #&lt;Nokogiri::XML::Attr:0x3fdf8880a794 name=\"code\" value=\"article\"&gt;] children=[#&lt;Nokogiri::XML::Text:0x3fdf8880788c \"LS_745094\"&gt;]&gt;]\n</code></pre>\n\n<p>Then you can fetch any properties of <code>el</code></p>\n\n<pre><code>el.text # =&gt; LS_745094\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "is_accepted": false, "score": 0, "last_activity_date": 1579808172, "last_edit_date": 1579808172, "creation_date": 1477497838, "answer_id": 40267091, "question_id": 40262696, "link": "https://stackoverflow.com/questions/40262696/how-to-pull-only-the-desired-element-with-xml-nokogiri/40267091#40267091", "title": "How to pull only the desired element with xml? (Nokogiri)", "body": "<p>It's not clear what you're asking, so pick one:</p>\n\n<pre><code>require 'nokogiri'\n\ndoc = Nokogiri::XML::DocumentFragment.parse(&lt;&lt;EOT)\n&lt;param name=\"\u0410\u0440\u0442\u0438\u043a\u0443\u043b\" code=\"article\"&gt;LS_745094&lt;/param&gt;\n&lt;param name=\"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439\" code=\"comment\"/&gt;\n&lt;param name=\"\u0426\u0432\u0435\u0442\u0430\" code=\"colors\"&gt;\u0431\u0435\u043b\u044b\u0439, \u043f\u0440\u043e\u0437\u0440\u0430\u0447\u043d\u044b\u0439&lt;/param&gt;\nEOT\n\ndoc.search('param').map(&amp;:to_html)\n# =&gt; [\"&lt;param name=\\\"&amp;#x410;&amp;#x440;&amp;#x442;&amp;#x438;&amp;#x43A;&amp;#x443;&amp;#x43B;\\\" code=\\\"article\\\"&gt;\",\n#     \"&lt;param name=\\\"&amp;#x41A;&amp;#x43E;&amp;#x43C;&amp;#x43C;&amp;#x435;&amp;#x43D;&amp;#x442;&amp;#x430;&amp;#x440;&amp;#x438;&amp;#x439;\\\" code=\\\"comment\\\"&gt;\",\n#     \"&lt;param name=\\\"&amp;#x426;&amp;#x432;&amp;#x435;&amp;#x442;&amp;#x430;\\\" code=\\\"colors\\\"&gt;\"]\n</code></pre>\n\n<p><code>search</code> returns all matching nodes as a NodeSet. That's fine if you need to iterate over them but often it's overkill.</p>\n\n<pre><code>doc.at('param')['code'] # =&gt; \"article\"\ndoc.at('param').text # =&gt; \"LS_745094\"\n</code></pre>\n\n<p><code>at</code> is the same as <code>search('...').first</code>, returning the first matching node. So the above code finds the first <code>&lt;param&gt;</code> and returns it. That'd be useful if you know the tag you want is always the first one.</p>\n\n<pre><code>doc.at('param[code=\"article\"]').text # =&gt; \"LS_745094\"\ndoc.at('param[name=\"\u0410\u0440\u0442\u0438\u043a\u0443\u043b\"]')['code'] # =&gt; \"article\"\ndoc.at('param[name=\"\u0410\u0440\u0442\u0438\u043a\u0443\u043b\"]').text # =&gt; \"LS_745094\"\n</code></pre>\n\n<p>If you need to supply more detail to the selector you can use parameters in the tag along with their values. Once you have the node you want you can access its parameters by treating it like a hash, or, if you want the text the node wraps use <code>text</code>.</p>\n\n<p>Note, I'm using CSS selectors. Nokogiri supports CSS and XPath selectors. CSS is more readable and suffices for the majority of lookups. XPath is more powerful, often more complex and visually noisy.</p>\n"}], "owner": {"reputation": 31, "user_id": 7041993, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ac82499c80ad1c59104e06c0829b7c07?s=128&d=identicon&r=PG&f=1", "display_name": "Andrey", "link": "https://stackoverflow.com/users/7041993/andrey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 439, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1579808172, "creation_date": 1477486026, "last_edit_date": 1477486641, "question_id": 40262696, "link": "https://stackoverflow.com/questions/40262696/how-to-pull-only-the-desired-element-with-xml-nokogiri", "title": "How to pull only the desired element with xml? (Nokogiri)", "body": "<p>Is it possible to pull only the data <code>code=\"article\"</code> from the block?</p>\n\n<pre><code>&lt;param name=\"\u0410\u0440\u0442\u0438\u043a\u0443\u043b\" code=\"article\"&gt;LS_745094&lt;/param&gt;\n&lt;param name=\"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439\" code=\"comment\"/&gt;\n&lt;param name=\"\u0426\u0432\u0435\u0442\u0430\" code=\"colors\"&gt;\u0431\u0435\u043b\u044b\u0439, \u043f\u0440\u043e\u0437\u0440\u0430\u0447\u043d\u044b\u0439&lt;/param&gt;\n</code></pre>\n\n<p>I do <code>doc.css(\"offer param\")</code> </p>\n\n<p>Receive all the <code>param</code></p>\n\n<p>I only need one <code>&lt;param name=\"\u0410\u0440\u0442\u0438\u043a\u0443\u043b\" code=\"article\"&gt;LS_745094&lt;/param&gt;</code></p>\n"}, {"tags": ["ruby", "string", "formatting"], "answers": [{"tags": [], "owner": {"reputation": 3914, "user_id": 4057366, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/uZ3e5.jpg?s=128&g=1", "display_name": "Alex Holubenko", "link": "https://stackoverflow.com/users/4057366/alex-holubenko"}, "is_accepted": true, "score": 1, "last_activity_date": 1477486515, "creation_date": 1477486515, "answer_id": 40262895, "question_id": 40262506, "link": "https://stackoverflow.com/questions/40262506/gem-that-formats-first-and-last-names/40262895#40262895", "title": "Gem that formats first and last names", "body": "<p><a href=\"https://github.com/infiton/capitalize-names\" rel=\"nofollow\">Here</a> you are, example from documentation</p>\n\n<pre><code>require 'capitalize_names'\n\nCapitalizeNames.capitalize(\"TATE\") # =&gt; \"Tate\"\nCapitalizeNames.capitalize(\"JoHn O'NEILL\") # =&gt; \"John O'Neill\"\nCapitalizeNames.capitalize(\"macarthur\") # =&gt; \"MacArthur\"\nCapitalizeNames.capitalize(\"rick johnson-smith\") # =&gt; \"Rick Johnson-Smith\"\nCapitalizeNames.capitalize(\"bob jones, iii\") # =&gt; \"Bob Jones, III\"\n</code></pre>\n"}], "owner": {"reputation": 5714, "user_id": 2389501, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/23f6a708c04c660111117c4613592689?s=128&d=identicon&r=PG", "display_name": "Mateusz Urba\u0144ski", "link": "https://stackoverflow.com/users/2389501/mateusz-urba%c5%84ski"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41, "favorite_count": 0, "closed_date": 1477487127, "accepted_answer_id": 40262895, "answer_count": 1, "score": -1, "last_activity_date": 1477486515, "creation_date": 1477485431, "question_id": 40262506, "link": "https://stackoverflow.com/questions/40262506/gem-that-formats-first-and-last-names", "closed_reason": "Not suitable for this site", "title": "Gem that formats first and last names", "body": "<p>I'm looking for a ruby gem that formats first and last names.</p>\n\n<p>For example: \nI have string \"john mc'queen\" and it formats it to: \"John Mc'Queen\".</p>\n\n<p>Is there any gem that is doing such a thing? Or maybe there is other solution for that?</p>\n"}, {"tags": ["ruby", "macos", "protocol-buffers", "protoc"], "comments": [{"owner": {"reputation": 30998, "user_id": 2686899, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/StqEe.jpg?s=128&g=1", "display_name": "Kenton Varda", "link": "https://stackoverflow.com/users/2686899/kenton-varda"}, "edited": false, "score": 0, "creation_date": 1477536532, "post_id": 40261773, "comment_id": 67809873, "body": "It&#39;s possible the Ruby implementation does not support <code>packed</code>. (Just a guess; I don&#39;t actually know.)"}, {"owner": {"reputation": 41, "user_id": 7074826, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-fA_5AZnMGR8/AAAAAAAAAAI/AAAAAAAAAoM/nAJ57UlLY-0/photo.jpg?sz=128", "display_name": "Jelle Hoffman", "link": "https://stackoverflow.com/users/7074826/jelle-hoffman"}, "reply_to_user": {"reputation": 30998, "user_id": 2686899, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/StqEe.jpg?s=128&g=1", "display_name": "Kenton Varda", "link": "https://stackoverflow.com/users/2686899/kenton-varda"}, "edited": false, "score": 0, "creation_date": 1477566645, "post_id": 40261773, "comment_id": 67824378, "body": "@KentonVarda Sadly that&#39;s not it. If you look at <a href=\"https://github.com/protobuf-ruby/beefcake\" rel=\"nofollow noreferrer\">link</a> you can find files with <code>:packet =&gt; true</code>. I had found some documentation where it said you can write your own ruby files and not generate it from a proto file. But that is not desirable for my application because it has to communicate with other devices based on C code. Thanks for your comment btw."}], "owner": {"reputation": 41, "user_id": 7074826, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-fA_5AZnMGR8/AAAAAAAAAAI/AAAAAAAAAoM/nAJ57UlLY-0/photo.jpg?sz=128", "display_name": "Jelle Hoffman", "link": "https://stackoverflow.com/users/7074826/jelle-hoffman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 105, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1477573494, "creation_date": 1477483384, "last_edit_date": 1477573494, "question_id": 40261773, "link": "https://stackoverflow.com/questions/40261773/packed-true-does-not-generate-packed-true-ruby-google-protocol-buffers", "title": "packed=true does not generate :packed =&gt; true Ruby Google Protocol Buffers", "body": "<p>I'm working on a ruby application that has google protocol buffers. </p>\n\n<p>My proto file :</p>\n\n<pre><code>syntax = 'proto3'\n\nmessage QuestionMessage {\n  int32 id = 1;\n  string question = 2;\n  int32 font_id = 3;\n  repeated int32 answers = 4 [packed=true];\n}\n</code></pre>\n\n<p>When I run protoc it does generate the correct ruby file, but :packed => true is missing for the repeated int32 named answers. \nThe generated code: </p>\n\n<pre><code>add_message \"QuestionMessage\" do\n  optional :id, :int32, 1\n  optional :question, :string, 2\n  optional :font_id, :int32, 3\n  repeated :answers, :int32, 4\nend\n</code></pre>\n\n<p>I currently think there is a problem with my protoc not generating the correct things for the ruby file. But the weird thing is that I have libprotoc version 3.1.0(Build from source) and the gemfile of the project also has version 3.1.0 and everything works (encode and making objects) except for generating :packed => true. Can somebody help me? I looked allover but couldn't even find someone with the same problems. B.t.w. adding :packet => true doesn't work because google does not like that.  </p>\n\n<p><strong>Edit:</strong><br>\nI found a solution. I used this <a href=\"https://github.com/protobuf-ruby/beefcake\" rel=\"nofollow\">gem</a> to generate my ruby protoc files. These files I can edit instead off the files generated by the google-protobuf gem which you can't. Then I added :packed => true through a script. Not the best solution, but it is a solution.. </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "excel", "pdf-generation", "libreoffice"], "answers": [{"tags": [], "owner": {"reputation": 1755, "user_id": 1877683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uttsA.jpg?s=128&g=1", "display_name": "C dot StrifeVII", "link": "https://stackoverflow.com/users/1877683/c-dot-strifevii"}, "is_accepted": false, "score": 0, "last_activity_date": 1477484385, "creation_date": 1477484385, "answer_id": 40262127, "question_id": 40261484, "link": "https://stackoverflow.com/questions/40261484/excel-to-pdf-conversion-in-rails4-with-libreoffice/40262127#40262127", "title": "Excel to pdf conversion in rails4 with libreoffice", "body": "<p>So you basically have two options you can either implement this yourself and use a CSV gem/library (<a href=\"https://www.sitepoint.com/guide-ruby-csv-library-part/\" rel=\"nofollow\">default CSV</a>, <a href=\"https://github.com/JEG2/faster_csv\" rel=\"nofollow\">faster CSV</a>, or <a href=\"https://github.com/tilo/smarter_csv\" rel=\"nofollow\">smarter CSV</a>) assuming that by \"excel\" a CSV is acceptable. If a CSV is not acceptible you can use the <a href=\"https://github.com/straydogstudio/axlsx_rails\" rel=\"nofollow\">axlsx gem</a> instead. Then for pdf conversion you can use something like <a href=\"https://github.com/prawnpdf/prawn\" rel=\"nofollow\">prawn</a>. If you decide to build this yourself follow these steps.</p>\n\n<ol>\n<li>Create a controller that will handle Reports, I suggest using the <code>rails g controller report upload generate_table show generate_pdf</code> generator to create a controller and a view for the upload process </li>\n<li>Create a file upload form in the upload view.</li>\n<li>On submit you will send the file to the generate action processing with one of the CSV or excel gems</li>\n<li>Once processed your end product should be an array or hash (as an instance variable) and you can send that to the show action</li>\n<li>In the show view you will iterate of that hash/array and incapsulate the contents in a html table.</li>\n<li>On the show view you should have a button that will send that same hash/array to the <code>generate_pdf</code> controller action where you will use <code>prawn</code> to create a pdf, you can use something like <a href=\"http://api.rubyonrails.org/classes/ActionController/DataStreaming.html#method-i-send_data\" rel=\"nofollow\">send_data</a> to the send the completed pdf file back to the user.</li>\n</ol>\n\n<p>This is roughly how you could go about it less the low level details. Now if you wanted to use an out of the box solution you could use something like <a href=\"https://github.com/ruport/ruport\" rel=\"nofollow\">Ruport</a>. Ruport will handle most of the heavy lifting for you the only thing is you need to have your models and associations set up to use it the way it is designed, and that may not be an option for you. </p>\n"}], "owner": {"reputation": 387, "user_id": 310812, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/31ac6ede293e13f34f749271f026cbcd?s=128&d=identicon&r=PG", "display_name": "jissy", "link": "https://stackoverflow.com/users/310812/jissy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 483, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1477484385, "creation_date": 1477482488, "last_edit_date": 1477483674, "question_id": 40261484, "link": "https://stackoverflow.com/questions/40261484/excel-to-pdf-conversion-in-rails4-with-libreoffice", "title": "Excel to pdf conversion in rails4 with libreoffice", "body": "<p>In a rails 4 application,  how can I convert an excel spreadsheet file into pdf.</p>\n\n<p>When I am trying to implement Excel to pdf the contents are listed in different pages if excel column size is large.</p>\n\n<p>How to generate the pdf without moving data to next pages in pdf.</p>\n\n<p>Please help,\nThanks</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "testing", "rspec", "devise"], "comments": [{"owner": {"reputation": 1779, "user_id": 3102718, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e9c06b4a732dc2ee775f93135d1592f?s=128&d=identicon&r=PG", "display_name": "Alex Avoiants", "link": "https://stackoverflow.com/users/3102718/alex-avoiants"}, "edited": false, "score": 1, "creation_date": 1477482706, "post_id": 40261459, "comment_id": 67783494, "body": "Can you try <code>expect(page).to have_content &#39;test@test.com&#39;</code>"}, {"owner": {"reputation": 331, "user_id": 4931720, "user_type": "registered", "accept_rate": 56, "profile_image": "https://lh4.googleusercontent.com/-mosfIn_6OMU/AAAAAAAAAAI/AAAAAAAAABs/6VRfNqKaGcw/photo.jpg?sz=128", "display_name": "Damir Nurgaliev", "link": "https://stackoverflow.com/users/4931720/damir-nurgaliev"}, "reply_to_user": {"reputation": 1779, "user_id": 3102718, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e9c06b4a732dc2ee775f93135d1592f?s=128&d=identicon&r=PG", "display_name": "Alex Avoiants", "link": "https://stackoverflow.com/users/3102718/alex-avoiants"}, "edited": false, "score": 0, "creation_date": 1477482810, "post_id": 40261459, "comment_id": 67783549, "body": "1 example, 0 failures as with an &#39;jdoe&#39;"}, {"owner": {"reputation": 1779, "user_id": 3102718, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e9c06b4a732dc2ee775f93135d1592f?s=128&d=identicon&r=PG", "display_name": "Alex Avoiants", "link": "https://stackoverflow.com/users/3102718/alex-avoiants"}, "edited": false, "score": 0, "creation_date": 1477483050, "post_id": 40261459, "comment_id": 67783703, "body": "So the test with <code>expect(page).to have_content &#39;jdoe&#39;</code> is also green, I understood correctly?"}, {"owner": {"reputation": 331, "user_id": 4931720, "user_type": "registered", "accept_rate": 56, "profile_image": "https://lh4.googleusercontent.com/-mosfIn_6OMU/AAAAAAAAAAI/AAAAAAAAABs/6VRfNqKaGcw/photo.jpg?sz=128", "display_name": "Damir Nurgaliev", "link": "https://stackoverflow.com/users/4931720/damir-nurgaliev"}, "reply_to_user": {"reputation": 1779, "user_id": 3102718, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e9c06b4a732dc2ee775f93135d1592f?s=128&d=identicon&r=PG", "display_name": "Alex Avoiants", "link": "https://stackoverflow.com/users/3102718/alex-avoiants"}, "edited": false, "score": 0, "creation_date": 1477483251, "post_id": 40261459, "comment_id": 67783849, "body": "@OleksandrAvoyants yes"}], "answers": [{"comments": [{"owner": {"reputation": 1779, "user_id": 3102718, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e9c06b4a732dc2ee775f93135d1592f?s=128&d=identicon&r=PG", "display_name": "Alex Avoiants", "link": "https://stackoverflow.com/users/3102718/alex-avoiants"}, "edited": false, "score": 2, "creation_date": 1477483267, "post_id": 40261648, "comment_id": 67783865, "body": "There is typo, should be <code>expect(page).to have_content(user.email)</code> (without question mark)"}, {"owner": {"reputation": 331, "user_id": 4931720, "user_type": "registered", "accept_rate": 56, "profile_image": "https://lh4.googleusercontent.com/-mosfIn_6OMU/AAAAAAAAAAI/AAAAAAAAABs/6VRfNqKaGcw/photo.jpg?sz=128", "display_name": "Damir Nurgaliev", "link": "https://stackoverflow.com/users/4931720/damir-nurgaliev"}, "edited": false, "score": 0, "creation_date": 1477483700, "post_id": 40261648, "comment_id": 67784128, "body": "1) Sessions displays the user&#39;s email after successful login      Failure/Error: expect(page).to have_content?(user.email)        expected #&lt;Capybara::Session:0x007fa2fcfe91f0&gt; to respond to <code>has_content??</code> error after test run"}, {"owner": {"reputation": 331, "user_id": 4931720, "user_type": "registered", "accept_rate": 56, "profile_image": "https://lh4.googleusercontent.com/-mosfIn_6OMU/AAAAAAAAAAI/AAAAAAAAABs/6VRfNqKaGcw/photo.jpg?sz=128", "display_name": "Damir Nurgaliev", "link": "https://stackoverflow.com/users/4931720/damir-nurgaliev"}, "reply_to_user": {"reputation": 1779, "user_id": 3102718, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e9c06b4a732dc2ee775f93135d1592f?s=128&d=identicon&r=PG", "display_name": "Alex Avoiants", "link": "https://stackoverflow.com/users/3102718/alex-avoiants"}, "edited": false, "score": 0, "creation_date": 1477483723, "post_id": 40261648, "comment_id": 67784144, "body": "@OleksandrAvoyants"}, {"owner": {"reputation": 331, "user_id": 4931720, "user_type": "registered", "accept_rate": 56, "profile_image": "https://lh4.googleusercontent.com/-mosfIn_6OMU/AAAAAAAAAAI/AAAAAAAAABs/6VRfNqKaGcw/photo.jpg?sz=128", "display_name": "Damir Nurgaliev", "link": "https://stackoverflow.com/users/4931720/damir-nurgaliev"}, "edited": false, "score": 0, "creation_date": 1477483920, "post_id": 40261648, "comment_id": 67784271, "body": "Okey, finally I did it. Your answer was really helpful, thanks :)"}], "tags": [], "owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "is_accepted": true, "score": 2, "last_activity_date": 1477483316, "last_edit_date": 1477483316, "creation_date": 1477482967, "answer_id": 40261648, "question_id": 40261459, "link": "https://stackoverflow.com/questions/40261459/testing-devise-using-capybara-rspec-and-factory-girl/40261648#40261648", "title": "Testing Devise Using capybara rspec and factory girl", "body": "<pre><code># spec/features/sessions_spec.rb\nrequire 'rails_helper'\nRSpec.feature \"Sessions\" do\n  scenario \"displays the user's email after successful login\" do\n    user = FactoryGirl.create(:user)\n    visit root_url\n    fill_in 'Email', with: user.email\n    fill_in 'Password', with: user.password\n    click_button 'Log in'\n    expect(page).to have_content(\"Signed in successfully\")\n    # will give a false postitive if form is rerended?\n    expect(page).to have_content(user.email) \n  end\nend\n</code></pre>\n\n<p>A few things here:</p>\n\n<ol>\n<li>Use a <a href=\"https://www.relishapp.com/rspec/rspec-rails/docs/feature-specs/feature-spec\" rel=\"nofollow\">feature</a> and not a request spec for end to end testing.</li>\n<li>Don't hardcode object attributes. The whole point of factories is that the factory takes care of generating unique data so that the tests don't give false positives due to residual state.</li>\n<li>Use <code>expect(page).to</code> instead of <code>expect page.should</code>. <code>expect(page).to</code> sets a subject and uses a RSpec matcher which will show you the text of the page in an error message if it does not match.</li>\n</ol>\n"}], "owner": {"reputation": 331, "user_id": 4931720, "user_type": "registered", "accept_rate": 56, "profile_image": "https://lh4.googleusercontent.com/-mosfIn_6OMU/AAAAAAAAAAI/AAAAAAAAABs/6VRfNqKaGcw/photo.jpg?sz=128", "display_name": "Damir Nurgaliev", "link": "https://stackoverflow.com/users/4931720/damir-nurgaliev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 673, "favorite_count": 0, "accepted_answer_id": 40261648, "answer_count": 1, "score": 1, "last_activity_date": 1477483316, "creation_date": 1477482403, "question_id": 40261459, "link": "https://stackoverflow.com/questions/40261459/testing-devise-using-capybara-rspec-and-factory-girl", "title": "Testing Devise Using capybara rspec and factory girl", "body": "<p>i'm new at rails and i'm testing my devise gem User with capybara rspec and factory girl.</p>\n\n<p>Here's spec code:</p>\n\n<pre><code>require 'rails_helper'\nRSpec.describe User, type: :request do\n  it \"displays the user's email after successful login\" do\n    user = FactoryGirl.create(:user, email: 'test@test.com', password: 'password')\n    visit root_url\n    fill_in 'Email', with: 'test@test.com'\n    fill_in 'Password', with: 'password'\n    click_button 'Log in'\n    expect page.has_content?('jdoe')\n  end\nend\n</code></pre>\n\n<p>The problem is in </p>\n\n<blockquote>\n  <p>expect page.has_content?('jdoe')\n  No matter what i put instead 'jdoe' test works perfectly without any errors.</p>\n</blockquote>\n\n<p>Here's factory:</p>\n\n<pre><code>FactoryGirl.define do\n  factory :user do\n    email 'test@test.com'\n    password 'password'\n    password_confirmation 'password'\n  end\nend\n</code></pre>\n\n<p>Maybe I missed something or going with a wrong way. How should I test here?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "model"], "comments": [{"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1477482253, "post_id": 40261353, "comment_id": 67783239, "body": "Everything in ruby is a object. So B will be a separate object no matter what you do. Or did you mean that you don&#39;t want to create a class for B?"}, {"owner": {"reputation": 260, "user_id": 4156866, "user_type": "registered", "accept_rate": 31, "profile_image": "https://lh5.googleusercontent.com/-tP4JjYvuq6E/AAAAAAAAAAI/AAAAAAAAARI/EMjE16CXHIA/photo.jpg?sz=128", "display_name": "Thibaud Renaux", "link": "https://stackoverflow.com/users/4156866/thibaud-renaux"}, "reply_to_user": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1477482366, "post_id": 40261353, "comment_id": 67783310, "body": "Yes I don&#39;t really want to create a class for B because I have no need to manage instancies by there own outside A object"}, {"owner": {"reputation": 1568, "user_id": 966100, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xN0ul.jpg?s=128&g=1", "display_name": "eeeeeean", "link": "https://stackoverflow.com/users/966100/eeeeeean"}, "edited": false, "score": 0, "creation_date": 1477502786, "post_id": 40261353, "comment_id": 67797203, "body": "I would model this with an ActiveRecord association between objects A and B. Associations can make it easier for A to manage B depending on your use case. <a href=\"http://guides.rubyonrails.org/association_basics.html\" rel=\"nofollow noreferrer\">guides.rubyonrails.org/association_basics.html</a>"}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1477508995, "post_id": 40261353, "comment_id": 67800673, "body": "Reconsider your motivation to avoid creating a class / module. Sure you can always use Struct instead of a class / module but what benefit is that really bringing? Classes are a good way to organize your code, and by avoiding them you&#39;re probably making things more difficult for yourself."}], "answers": [{"tags": [], "owner": {"reputation": 260, "user_id": 4156866, "user_type": "registered", "accept_rate": 31, "profile_image": "https://lh5.googleusercontent.com/-tP4JjYvuq6E/AAAAAAAAAAI/AAAAAAAAARI/EMjE16CXHIA/photo.jpg?sz=128", "display_name": "Thibaud Renaux", "link": "https://stackoverflow.com/users/4156866/thibaud-renaux"}, "is_accepted": true, "score": 0, "last_activity_date": 1477641681, "creation_date": 1477641681, "answer_id": 40300628, "question_id": 40261353, "link": "https://stackoverflow.com/questions/40261353/ruby-sub-oject-with-dynamics-presence-of-fields/40300628#40300628", "title": "Ruby sub-oject with dynamics presence of fields", "body": "<p>I will create these classes in aim to manage them all specifically Thanks all !</p>\n"}], "owner": {"reputation": 260, "user_id": 4156866, "user_type": "registered", "accept_rate": 31, "profile_image": "https://lh5.googleusercontent.com/-tP4JjYvuq6E/AAAAAAAAAAI/AAAAAAAAARI/EMjE16CXHIA/photo.jpg?sz=128", "display_name": "Thibaud Renaux", "link": "https://stackoverflow.com/users/4156866/thibaud-renaux"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 38, "favorite_count": 0, "accepted_answer_id": 40300628, "answer_count": 1, "score": 0, "last_activity_date": 1477641681, "creation_date": 1477482021, "question_id": 40261353, "link": "https://stackoverflow.com/questions/40261353/ruby-sub-oject-with-dynamics-presence-of-fields", "title": "Ruby sub-oject with dynamics presence of fields", "body": "<p>I quite new ruby (rails) developer and I need to interface a complex object behavior. I'll try to explain as much as I can.</p>\n\n<p>I've an object A in which I would like to contains an array of entities(B) which have a boolean base and a type. If this boolean is true some other properties can be set (and input fields can be showed in dashboard).</p>\n\n<p>I don't really want to create a separate object(B).</p>\n\n<p>I know I could use <code>Struct.new(..)</code>but don't know if it's usable.</p>\n\n<p>By the way the array of B entities could be initialized when creating A object depends on A params and B type.</p>\n\n<p>So my questions are:</p>\n\n<ul>\n<li>Is it better to use a separate object or a <code>Struct.new(...)</code>entities for B ?</li>\n<li>How could I manage other B params depends on type?</li>\n</ul>\n\n<p>I hope it's understandable.</p>\n\n<p>Thanks</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "select2"], "answers": [{"tags": [], "owner": {"reputation": 31, "user_id": 6708106, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b5a3036c71b168e0a3651e4a14aff94?s=128&d=identicon&r=PG&f=1", "display_name": "R.F", "link": "https://stackoverflow.com/users/6708106/r-f"}, "is_accepted": false, "score": 1, "last_activity_date": 1477492983, "creation_date": 1477492983, "answer_id": 40265303, "question_id": 40261125, "link": "https://stackoverflow.com/questions/40261125/difference-beetwen-install-gem-and-copy-and-import-the-js-file/40265303#40265303", "title": "Difference beetwen install GEM and Copy and IMPORT the JS file", "body": "<p>It is ideal to use gemified versions of JavaScript code from open source projects such as jQuery because this gives you the advantage of RubyGems as a package manager. The jquery-ui-rails gem from Jo Liss is an excellent example.</p>\n\n<p>Unfortunately, few JavaScript projects are intended solely for Rails so there seldom is a gemified version of the JavaScript. Instead, the files are offered for downloading or from a content delivery network as external scripts.</p>\n\n<p><a href=\"http://railsapps.github.io/rails-javascript-include-external.html\" rel=\"nofollow\">check this</a></p>\n"}], "owner": {"reputation": 204, "user_id": 6592441, "user_type": "registered", "accept_rate": 62, "profile_image": "https://lh3.googleusercontent.com/-Iyy_SvT-93s/AAAAAAAAAAI/AAAAAAAAAZs/enulpSsytFs/photo.jpg?sz=128", "display_name": "Andre Leoni", "link": "https://stackoverflow.com/users/6592441/andre-leoni"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 28, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1477492983, "creation_date": 1477481340, "question_id": 40261125, "link": "https://stackoverflow.com/questions/40261125/difference-beetwen-install-gem-and-copy-and-import-the-js-file", "title": "Difference beetwen install GEM and Copy and IMPORT the JS file", "body": "<p>I have the desire to know the diference between copy the JS and SASS file and import in the application.js and application.css and install a GEM...</p>\n\n<p>Specifically I would like to install select2, could there be any performance difference in the implementation of plugin or something?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1477477733, "post_id": 40259766, "comment_id": 67780430, "body": "How do you call <code>drug_format</code>?"}, {"owner": {"reputation": 11, "user_id": 6648084, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ec2b5272ebddf7b5113a1a0215dd908?s=128&d=identicon&r=PG&f=1", "display_name": "Parag Pakhale", "link": "https://stackoverflow.com/users/6648084/parag-pakhale"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1477479486, "post_id": 40259766, "comment_id": 67781496, "body": "drug_format(drug)"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1477479542, "post_id": 40259766, "comment_id": 67781525, "body": "What is <code>drug</code> and what does <code>drug[:id]</code> or <code>drug[:direction]</code> return?"}, {"owner": {"reputation": 11, "user_id": 6648084, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ec2b5272ebddf7b5113a1a0215dd908?s=128&d=identicon&r=PG&f=1", "display_name": "Parag Pakhale", "link": "https://stackoverflow.com/users/6648084/parag-pakhale"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1477480091, "post_id": 40259766, "comment_id": 67781887, "body": "drug[:id] returns string and drug[:direction] returns array of object. I want to access first object of array."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1477480790, "post_id": 40259766, "comment_id": 67782343, "body": "If <code>drug</code> is a hash and <code>drug[:direction]</code> returns an array, then neither <code>drug[:id]</code> nor <code>drug[:direction][0]</code> would raise that error."}, {"owner": {"reputation": 1779, "user_id": 3102718, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e9c06b4a732dc2ee775f93135d1592f?s=128&d=identicon&r=PG", "display_name": "Alex Avoiants", "link": "https://stackoverflow.com/users/3102718/alex-avoiants"}, "edited": false, "score": 0, "creation_date": 1477481008, "post_id": 40259766, "comment_id": 67782487, "body": "Sorry, if you pass provided Hash to method <code>drug_format</code> then you need to use it as <code>{ id: drug[:drug][:id], direction: drug[:drug][:direction][0]}</code> (maybe with string keys instead of symbols)"}, {"owner": {"reputation": 3273, "user_id": 5021963, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/t7Qsr.png?s=128&g=1", "display_name": "Ed de Almeida", "link": "https://stackoverflow.com/users/5021963/ed-de-almeida"}, "edited": false, "score": 0, "creation_date": 1477482032, "post_id": 40259766, "comment_id": 67783113, "body": "Your JSON is not correct. Take away this comma in <code>direction: drug[:direction][0],</code>, because there is no reason for it to be there. A comma says there will be another key after that element."}], "answers": [{"comments": [{"owner": {"reputation": 10255, "user_id": 1155142, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/c680db41999d478ca34d1a77a470e30d?s=128&d=identicon&r=PG", "display_name": "gabrielhilal", "link": "https://stackoverflow.com/users/1155142/gabrielhilal"}, "reply_to_user": {"reputation": 11, "user_id": 6648084, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ec2b5272ebddf7b5113a1a0215dd908?s=128&d=identicon&r=PG&f=1", "display_name": "Parag Pakhale", "link": "https://stackoverflow.com/users/6648084/parag-pakhale"}, "edited": false, "score": 0, "creation_date": 1477480601, "post_id": 40259942, "comment_id": 67782226, "body": "it might an issue accessing the drug param... please note my edited answer"}, {"owner": {"reputation": 3273, "user_id": 5021963, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/t7Qsr.png?s=128&g=1", "display_name": "Ed de Almeida", "link": "https://stackoverflow.com/users/5021963/ed-de-almeida"}, "edited": false, "score": 0, "creation_date": 1477482136, "post_id": 40259942, "comment_id": 67783185, "body": "GEnerated JSON is not correct. Take away this comma in <code>direction: drug[:direction][0],</code>, because there is no reason for it to be there. A comma says there will be another key after that element."}, {"owner": {"reputation": 19261, "user_id": 4758119, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/F4dJY.jpg?s=128&g=1", "display_name": "Deepak Mahakale", "link": "https://stackoverflow.com/users/4758119/deepak-mahakale"}, "reply_to_user": {"reputation": 3273, "user_id": 5021963, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/t7Qsr.png?s=128&g=1", "display_name": "Ed de Almeida", "link": "https://stackoverflow.com/users/5021963/ed-de-almeida"}, "edited": false, "score": 0, "creation_date": 1477482379, "post_id": 40259942, "comment_id": 67783318, "body": "@EddeAlmeida that doesn&#39;t matter in ruby"}, {"owner": {"reputation": 19261, "user_id": 4758119, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/F4dJY.jpg?s=128&g=1", "display_name": "Deepak Mahakale", "link": "https://stackoverflow.com/users/4758119/deepak-mahakale"}, "reply_to_user": {"reputation": 3273, "user_id": 5021963, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/t7Qsr.png?s=128&g=1", "display_name": "Ed de Almeida", "link": "https://stackoverflow.com/users/5021963/ed-de-almeida"}, "edited": false, "score": 0, "creation_date": 1477482691, "post_id": 40259942, "comment_id": 67783484, "body": "@EddeAlmeida just checked your profile, correct if I said something wrong.. You shoud have digged ruby a lot ;)"}, {"owner": {"reputation": 3273, "user_id": 5021963, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/t7Qsr.png?s=128&g=1", "display_name": "Ed de Almeida", "link": "https://stackoverflow.com/users/5021963/ed-de-almeida"}, "edited": false, "score": 0, "creation_date": 1477482850, "post_id": 40259942, "comment_id": 67783577, "body": "I just tell you that Ruby checks systax strictly and is unlikely to return a badly formatted object. But I haven&#39;t tested this and I&#39;m assuming you did."}, {"owner": {"reputation": 19261, "user_id": 4758119, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/F4dJY.jpg?s=128&g=1", "display_name": "Deepak Mahakale", "link": "https://stackoverflow.com/users/4758119/deepak-mahakale"}, "edited": false, "score": 1, "creation_date": 1477483140, "post_id": 40259942, "comment_id": 67783768, "body": "Yes I did and the <code>,</code> is handeled so <code>{a: &#39;abc&#39;, }</code> dosn&#39;t throw any errors"}, {"owner": {"reputation": 3273, "user_id": 5021963, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/t7Qsr.png?s=128&g=1", "display_name": "Ed de Almeida", "link": "https://stackoverflow.com/users/5021963/ed-de-almeida"}, "edited": false, "score": 0, "creation_date": 1477483224, "post_id": 40259942, "comment_id": 67783834, "body": "Nice to know that."}, {"owner": {"reputation": 10255, "user_id": 1155142, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/c680db41999d478ca34d1a77a470e30d?s=128&d=identicon&r=PG", "display_name": "gabrielhilal", "link": "https://stackoverflow.com/users/1155142/gabrielhilal"}, "edited": false, "score": 0, "creation_date": 1477483610, "post_id": 40259942, "comment_id": 67784071, "body": "I&#39;ve copied the method from OP :/ it doesn&#39;t throw erros, but no reason to have a <code>,</code>... I&#39;ve edited it anyway ;)"}], "tags": [], "owner": {"reputation": 10255, "user_id": 1155142, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/c680db41999d478ca34d1a77a470e30d?s=128&d=identicon&r=PG", "display_name": "gabrielhilal", "link": "https://stackoverflow.com/users/1155142/gabrielhilal"}, "is_accepted": false, "score": 2, "last_activity_date": 1477483272, "last_edit_date": 1477483272, "creation_date": 1477478046, "answer_id": 40259942, "question_id": 40259766, "link": "https://stackoverflow.com/questions/40259766/accessing-first-element-of-array-in-rails/40259942#40259942", "title": "Accessing first element of array in rails", "body": "<p>the json keys are strings and not symbols, so you need something like:</p>\n\n<pre><code>def drug_format drug\n  {\n    id: drug['id'],\n    direction: drug['direction'][0]\n  }\nend\n</code></pre>\n\n<p>or you can use <a href=\"http://api.rubyonrails.org/classes/Hash.html#method-i-with_indifferent_access\" rel=\"nofollow\"><code>with_indifferent_access</code></a></p>\n\n<p>console output:</p>\n\n<pre><code>params = {\n 'drug' =&gt; {\n    \"id\" =&gt; \"580f323ee4b06ffee69041a1\",\n    \"direction\" =&gt; [\n        {\n            \"direction\" =&gt; \"test\",\n            \"discarded\" =&gt; false\n        }\n    ]\n  }\n}\n=&gt; {\"drug\"=&gt;{\"id\"=&gt;\"580f323ee4b06ffee69041a1\", \"direction\"=&gt;[{\"direction\"=&gt;\"test\", \"discarded\"=&gt;false}]}}\n\nparams[:drug]\n=&gt; nil\n\nparams['drug']\n=&gt; {\"id\"=&gt;\"580f323ee4b06ffee69041a1\", \"direction\"=&gt;[{\"direction\"=&gt;\"test\", \"discarded\"=&gt;false}]}\n\ndef drug_format(drug)\n  {\n    id: drug['id'],\n    direction: drug['direction'][0]\n  }\nend\n=&gt; :drug_format\n\ndrug_format(params[:drug])\n=&gt; NoMethodError: undefined method `[]' for nil:NilClass\n\ndrug_format(params['drug'])\n=&gt; {:id=&gt;\"580f323ee4b06ffee69041a1\", :direction=&gt;{\"direction\"=&gt;\"test\", \"discarded\"=&gt;false}}\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 6648084, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ec2b5272ebddf7b5113a1a0215dd908?s=128&d=identicon&r=PG&f=1", "display_name": "Parag Pakhale", "link": "https://stackoverflow.com/users/6648084/parag-pakhale"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1607, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1477483272, "creation_date": 1477477549, "last_edit_date": 1477477679, "question_id": 40259766, "link": "https://stackoverflow.com/questions/40259766/accessing-first-element-of-array-in-rails", "title": "Accessing first element of array in rails", "body": "<p>I am getting below json from backend.</p>\n\n<pre><code>{ drug:\n  {\n\n    \"id\": \"580f323ee4b06ffee69041a1\",\n    \"direction\": [\n        {\n            \"direction\": \"test\",\n            \"discarded\": false\n        }\n    ]\n  }\n}\n</code></pre>\n\n<p>I dont want direction as array. I want it as object so I wrote method drug_format to parse json</p>\n\n<p>My ruby on rails code for parsing is as follows :</p>\n\n<pre><code>def drug_format drug\n{\n  id: drug[:id],\n  direction: drug[:direction][0],\n}\nend\n</code></pre>\n\n<p>Now when I am trying to run my code I am getting following error.</p>\n\n<pre><code>NoMethodError (undefined method `[]' for nil:NilClass):\n    app/controllers/drugs_controller.rb:280:in `drug_format'\n    app/controllers/drugs_controller.rb:15:in `block in index'\n    app/controllers/drugs_controller.rb:14:in `each'\n    app/controllers/drugs_controller.rb:14:in `index'\n</code></pre>\n\n<p>What can be the issue?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 24729, "user_id": 2564200, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/a92dfcc9fcac72dabd4b1eefa0b5106e?s=128&d=identicon&r=PG&f=1", "display_name": "Santhosh", "link": "https://stackoverflow.com/users/2564200/santhosh"}, "edited": false, "score": 0, "creation_date": 1477476344, "post_id": 40259220, "comment_id": 67779577, "body": "Instead of model attribute, you could write a class method in the model, that accepts start_date and end_date as arguments."}, {"owner": {"reputation": 873, "user_id": 2320239, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/daef5b7116143c14162b242bf0b1a35a?s=128&d=identicon&r=PG", "display_name": "user2320239", "link": "https://stackoverflow.com/users/2320239/user2320239"}, "reply_to_user": {"reputation": 24729, "user_id": 2564200, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/a92dfcc9fcac72dabd4b1eefa0b5106e?s=128&d=identicon&r=PG&f=1", "display_name": "Santhosh", "link": "https://stackoverflow.com/users/2564200/santhosh"}, "edited": false, "score": 0, "creation_date": 1477477833, "post_id": 40259220, "comment_id": 67780498, "body": "Thanks for the help, so if I create that method, how can I then allow the user to submit their own values for start_date and end_date?"}], "answers": [{"tags": [], "owner": {"reputation": 32451, "user_id": 2516474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a2179a340c0e84edc285d432211145d?s=128&d=identicon&r=PG", "display_name": "SteveTurczyn", "link": "https://stackoverflow.com/users/2516474/steveturczyn"}, "is_accepted": false, "score": 0, "last_activity_date": 1477476794, "creation_date": 1477476794, "answer_id": 40259491, "question_id": 40259220, "link": "https://stackoverflow.com/questions/40259220/dynamically-get-records-between-two-dates/40259491#40259491", "title": "Dynamically get records between two dates", "body": "<p>You can have a <code>form_tag</code> and a couple of <code>date_field_tag</code>s (say <code>start_date</code> and <code>end_date</code>) and a submit button on the index page itself, perhaps at the top.  When the user submits you can use the inputted parameters, and re-render the index.</p>\n\n<pre><code>@average = Vote.where(date: (params[:start_date].to_date)..(params[:end_date].to_date)).average(:score)\nrender :index\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 16757, "user_id": 5654404, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/746f3e19ba3d2c092e951129a114391a?s=128&d=identicon&r=PG&f=1", "display_name": "Sravan", "link": "https://stackoverflow.com/users/5654404/sravan"}, "edited": false, "score": 0, "creation_date": 1477477580, "post_id": 40259686, "comment_id": 67780325, "body": "@user2320239, please check this answer. you can achieve in model itself"}, {"owner": {"reputation": 873, "user_id": 2320239, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/daef5b7116143c14162b242bf0b1a35a?s=128&d=identicon&r=PG", "display_name": "user2320239", "link": "https://stackoverflow.com/users/2320239/user2320239"}, "edited": false, "score": 0, "creation_date": 1477477879, "post_id": 40259686, "comment_id": 67780530, "body": "Thanks for the help, so if I create that method, how can I then allow the user to submit their own values for start_date and end_date and then have the page update?"}, {"owner": {"reputation": 873, "user_id": 2320239, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/daef5b7116143c14162b242bf0b1a35a?s=128&d=identicon&r=PG", "display_name": "user2320239", "link": "https://stackoverflow.com/users/2320239/user2320239"}, "edited": false, "score": 0, "creation_date": 1477478208, "post_id": 40259686, "comment_id": 67780693, "body": "I&#39;m also not tied to doing this in the model, if it can be done another way that is easier I&#39;m fine with that."}, {"owner": {"reputation": 32451, "user_id": 2516474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a2179a340c0e84edc285d432211145d?s=128&d=identicon&r=PG", "display_name": "SteveTurczyn", "link": "https://stackoverflow.com/users/2516474/steveturczyn"}, "edited": false, "score": 0, "creation_date": 1477478702, "post_id": 40259686, "comment_id": 67780986, "body": "Good answer. We could also do the average in the model just to keep it all in one place... <code>def self.average_score_value(d1, d2); self.average_score(d1,d2).average(:id); end</code> then OP can do <code>@average = User.average_score_value(from_date, to_date)</code>"}, {"owner": {"reputation": 16757, "user_id": 5654404, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/746f3e19ba3d2c092e951129a114391a?s=128&d=identicon&r=PG&f=1", "display_name": "Sravan", "link": "https://stackoverflow.com/users/5654404/sravan"}, "edited": false, "score": 0, "creation_date": 1477478895, "post_id": 40259686, "comment_id": 67781106, "body": "you can just give two drop downs and a button, then on the button click, you can just call this scope from controller."}, {"owner": {"reputation": 16757, "user_id": 5654404, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/746f3e19ba3d2c092e951129a114391a?s=128&d=identicon&r=PG&f=1", "display_name": "Sravan", "link": "https://stackoverflow.com/users/5654404/sravan"}, "edited": false, "score": 0, "creation_date": 1477479184, "post_id": 40259686, "comment_id": 67781314, "body": "send the two values from the drop down to the controller, call the method given by me, and then show the same in the controller."}], "tags": [], "owner": {"reputation": 16757, "user_id": 5654404, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/746f3e19ba3d2c092e951129a114391a?s=128&d=identicon&r=PG&f=1", "display_name": "Sravan", "link": "https://stackoverflow.com/users/5654404/sravan"}, "is_accepted": true, "score": 1, "last_activity_date": 1477479010, "last_edit_date": 1477479010, "creation_date": 1477477329, "answer_id": 40259686, "question_id": 40259220, "link": "https://stackoverflow.com/questions/40259220/dynamically-get-records-between-two-dates/40259686#40259686", "title": "Dynamically get records between two dates", "body": "<p>As you wanted to achieve this from the model point of view,\nYou can use the dynamic scope of rails to achieve this, </p>\n\n<p>In your model,</p>\n\n<p><strong>Method1:</strong></p>\n\n<pre><code>class Vote &lt; ActiveRecord::Base\n   scope :average_score, -&gt;(date1,date2) { where(date: (date1)..(date2) )}  \nend\n</code></pre>\n\n<p>Now, on your controller or the view , you can call something like,</p>\n\n<p><strong><code>@average = Vote.average_score(Date.today - 7 , Date.today).average(:id)</code></strong></p>\n\n<p><strong>Method 2:</strong></p>\n\n<p>You can take a method and call the scope from the method.</p>\n\n<pre><code>class Vote &lt; ActiveRecord::Base\n       scope :average_score, -&gt;(date1,date2) { where(date: (date1)..(date2) )}  \n\n       def self.average_score_value(d1, d2)\n        self.average_score(d1,d2).average(:id)\n       end\n end\n</code></pre>\n\n<p>Now, on your controller or the view , you can call something like,</p>\n\n<p><strong><code>@average = Vote.average_score_value(Date.today - 7 , Date.today)</code></strong></p>\n\n<p>Here is an <strong>example with user table</strong>, I have taken <code>created_at</code> column</p>\n\n<pre><code>2.3.1 :036 &gt; User.average_score(Date.today - 7,Date.today).average(:id)\n\n (0.5ms)  SELECT AVG(`users`.`id`) FROM `users` WHERE (`users`.`created_at` BETWEEN '2016-10-19' AND '2016-10-26')\n =&gt; nil \n</code></pre>\n\n<p>The scope is,</p>\n\n<p><code>scope :average_score, -&gt;(date1,date2) { where(created_at: (date1)..(date2) )}</code></p>\n\n<p><a href=\"http://api.rubyonrails.org/classes/ActiveRecord/Scoping/Named/ClassMethods.html\" rel=\"nofollow\">Here is the reference</a></p>\n"}, {"tags": [], "owner": {"reputation": 32451, "user_id": 2516474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a2179a340c0e84edc285d432211145d?s=128&d=identicon&r=PG", "display_name": "SteveTurczyn", "link": "https://stackoverflow.com/users/2516474/steveturczyn"}, "is_accepted": false, "score": 0, "last_activity_date": 1477480001, "creation_date": 1477480001, "answer_id": 40260682, "question_id": 40259220, "link": "https://stackoverflow.com/questions/40259220/dynamically-get-records-between-two-dates/40260682#40260682", "title": "Dynamically get records between two dates", "body": "<p>You create a simple form on the <code>index</code> page</p>\n\n<pre><code>&lt;%= form_tag '/index' do %&gt;\n  &lt;%= date_field_tag :start_date %&gt;\n  &lt;%= date_field_tag :end_date %&gt;\n  &lt;%= submit_tag %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>add a route to your routes.rb</p>\n\n<pre><code>post '/index', to 'users#average'\n</code></pre>\n\n<p>add a method to UsersController</p>\n\n<pre><code>  def average\n    @average = Vote.where(date: (params[:start_date].to_date)..(params[:end_date].to_date)).average(:score)\n    render :index\n  end\n</code></pre>\n"}], "owner": {"reputation": 873, "user_id": 2320239, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/daef5b7116143c14162b242bf0b1a35a?s=128&d=identicon&r=PG", "display_name": "user2320239", "link": "https://stackoverflow.com/users/2320239/user2320239"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 774, "favorite_count": 0, "accepted_answer_id": 40259686, "answer_count": 3, "score": 0, "last_activity_date": 1477480001, "creation_date": 1477476051, "last_edit_date": 1477476476, "question_id": 40259220, "link": "https://stackoverflow.com/questions/40259220/dynamically-get-records-between-two-dates", "title": "Dynamically get records between two dates", "body": "<p>I'm working on a project at the moment where I have a voting system and on the index page for the vote model I can see the average vote for the last week. However I'd like to be able to have the user be able to choose the date between which the rating is averaged. I'm not sure how to go about doing this. </p>\n\n<p>Currently I have a view which shows @average which is defined as:</p>\n\n<pre><code>Vote.where(date: (Date.today - 7)..(Date.today)).average(:score)\n</code></pre>\n\n<p>My initial though was to include a 'date range' attribute to the model and then have the average calculated from those dates, which is set by a form in the index view, but that seems like a lot of overhead for such a simple task.</p>\n\n<p>Any help would be greatly appreciated.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ember.js"], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 7073524, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6315163368e3757c0efa79914cde7fe8?s=128&d=identicon&r=PG&f=1", "display_name": "IlearnedThat", "link": "https://stackoverflow.com/users/7073524/ilearnedthat"}, "edited": false, "score": 0, "creation_date": 1477474257, "post_id": 40258019, "comment_id": 67778257, "body": "Well, i am already familiar with rails, heard ember makes good pair, but i think ember gets all the logic from rails, and implements its own.In this case, what is the need for a back-end api?"}, {"owner": {"reputation": 149, "user_id": 1140180, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d5cfd2a160285bc689aec623416a4cf5?s=128&d=identicon&r=PG", "display_name": "Mohamed Jahaber Sadiq", "link": "https://stackoverflow.com/users/1140180/mohamed-jahaber-sadiq"}, "reply_to_user": {"reputation": 11, "user_id": 7073524, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6315163368e3757c0efa79914cde7fe8?s=128&d=identicon&r=PG&f=1", "display_name": "IlearnedThat", "link": "https://stackoverflow.com/users/7073524/ilearnedthat"}, "edited": false, "score": 0, "creation_date": 1477474715, "post_id": 40258019, "comment_id": 67778557, "body": "If you want to save it to a DB then you will need a backend api right ?"}, {"owner": {"reputation": 11, "user_id": 7073524, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6315163368e3757c0efa79914cde7fe8?s=128&d=identicon&r=PG&f=1", "display_name": "IlearnedThat", "link": "https://stackoverflow.com/users/7073524/ilearnedthat"}, "edited": false, "score": 0, "creation_date": 1477475072, "post_id": 40258019, "comment_id": 67778786, "body": "Thanks.It kinda makes sense.I can use rails valiations right? And one more question.Can i use gems like devise?"}, {"owner": {"reputation": 149, "user_id": 1140180, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d5cfd2a160285bc689aec623416a4cf5?s=128&d=identicon&r=PG", "display_name": "Mohamed Jahaber Sadiq", "link": "https://stackoverflow.com/users/1140180/mohamed-jahaber-sadiq"}, "reply_to_user": {"reputation": 11, "user_id": 7073524, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6315163368e3757c0efa79914cde7fe8?s=128&d=identicon&r=PG&f=1", "display_name": "IlearnedThat", "link": "https://stackoverflow.com/users/7073524/ilearnedthat"}, "edited": false, "score": 0, "creation_date": 1477479461, "post_id": 40258019, "comment_id": 67781477, "body": "Of course you can , There are several libraries available for that like <a href=\"https://github.com/givanse/ember-cli-simple-auth-devise\" rel=\"nofollow noreferrer\">github.com/givanse/ember-cli-simple-auth-devise</a>"}], "tags": [], "owner": {"reputation": 149, "user_id": 1140180, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d5cfd2a160285bc689aec623416a4cf5?s=128&d=identicon&r=PG", "display_name": "Mohamed Jahaber Sadiq", "link": "https://stackoverflow.com/users/1140180/mohamed-jahaber-sadiq"}, "is_accepted": false, "score": 0, "last_activity_date": 1477472626, "creation_date": 1477472626, "answer_id": 40258019, "question_id": 40257956, "link": "https://stackoverflow.com/questions/40257956/what-is-the-rails-part-in-an-hybrid-railsember-app/40258019#40258019", "title": "What is the Rails part in an hybrid Rails+Ember App", "body": "<p>Rails takes care of the server side of the ember.js application like any other server side languages basically the rest API , Its not neccessary it has to be in rails , For Eg, We have used Ember.js with PHP and Java as well.</p>\n"}], "owner": {"reputation": 11, "user_id": 7073524, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6315163368e3757c0efa79914cde7fe8?s=128&d=identicon&r=PG&f=1", "display_name": "IlearnedThat", "link": "https://stackoverflow.com/users/7073524/ilearnedthat"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 38, "favorite_count": 0, "closed_date": 1477565429, "answer_count": 1, "score": 0, "last_activity_date": 1477472626, "creation_date": 1477472459, "question_id": 40257956, "link": "https://stackoverflow.com/questions/40257956/what-is-the-rails-part-in-an-hybrid-railsember-app", "closed_reason": "Duplicate", "title": "What is the Rails part in an hybrid Rails+Ember App", "body": "<p>Since we use ember's CRUD in an hybrid, what is Rails used for?\nValidation's on ember side, routing in ember side, CRUD in ember side.</p>\n\n<p>What is Rails have to do with all this?\nWhy do people couple them?\nAnd lastly, is there any framework that will let me keep the logic in rails and will only take care of the views ?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "postgresql", "heroku"], "answers": [{"tags": [], "owner": {"reputation": 19261, "user_id": 4758119, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/F4dJY.jpg?s=128&g=1", "display_name": "Deepak Mahakale", "link": "https://stackoverflow.com/users/4758119/deepak-mahakale"}, "is_accepted": false, "score": 1, "last_activity_date": 1477472286, "creation_date": 1477472286, "answer_id": 40257896, "question_id": 40257856, "link": "https://stackoverflow.com/questions/40257856/need-help-in-understanding-heroku-logs/40257896#40257896", "title": "Need help in understanding Heroku logs", "body": "<blockquote>\n  <p>ActiveRecord::StatementInvalid (PG::UndefinedTable: ERROR:  relation \"users\" does not exist</p>\n</blockquote>\n\n<p>You forgot to run the migrations on heroku. Run this command on your console</p>\n\n<pre><code>heroku run rake db:migrate\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "is_accepted": true, "score": 1, "last_activity_date": 1477472345, "creation_date": 1477472345, "answer_id": 40257914, "question_id": 40257856, "link": "https://stackoverflow.com/questions/40257856/need-help-in-understanding-heroku-logs/40257914#40257914", "title": "Need help in understanding Heroku logs", "body": "<p>Your error says this:</p>\n\n<pre><code>ActiveRecord::StatementInvalid (PG::UndefinedTable: ERROR:  relation \"users\" does not exist\n</code></pre>\n\n<p>it's really easy to forget, but Heroku doesn't automatically run migrations.</p>\n\n<p>From the heroku docs <a href=\"https://devcenter.heroku.com/articles/rake\" rel=\"nofollow\">https://devcenter.heroku.com/articles/rake</a></p>\n\n<pre><code># shell\nheroku run rake db:migrate\nheroku restart\n</code></pre>\n"}], "owner": {"reputation": 177, "user_id": 6900160, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/OMZbu.jpg?s=128&g=1", "display_name": "Parry", "link": "https://stackoverflow.com/users/6900160/parry"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "accepted_answer_id": 40257914, "answer_count": 2, "score": 0, "last_activity_date": 1477472345, "creation_date": 1477472170, "question_id": 40257856, "link": "https://stackoverflow.com/questions/40257856/need-help-in-understanding-heroku-logs", "title": "Need help in understanding Heroku logs", "body": "<p>I have an rails 5 app which works perfectly in my local machine with PostgreSQL locally installed.</p>\n\n<p>I pushed my app to heroku and the login page of the app appears correctly. But when I try to login to the app I get an error. Checking the logs give following output.</p>\n\n<pre><code>2016-10-26T04:21:48.515201+00:00 heroku[router]: at=info method=GET path=\"/favicon.ico\" host=teamwallet.herokuapp.com request_id=94268ad1-1f86-4caf-80ae-61799fdddc5b fwd=\"182.57.131.204\" dyno=web.1 connect=0ms service=1ms status=304 bytes=48\n2016-10-26T04:21:54.410775+00:00 heroku[router]: at=info method=POST path=\"/\" host=teamwallet.herokuapp.com request_id=52da63d5-afbd-4e8d-9d8a-51b04d077a21 fwd=\"182.57.131.204\" dyno=web.1 connect=0ms service=7ms status=500 bytes=1669\n2016-10-26T04:21:54.435325+00:00 app[web.1]: I, [2016-10-26T04:21:54.435257 #3]  INFO -- : [52da63d5-afbd-4e8d-9d8a-51b04d077a21] Started POST \"/\" for 182.57.131.204 at 2016-10-26 04:21:54 +0000\n2016-10-26T04:21:54.435994+00:00 app[web.1]: I, [2016-10-26T04:21:54.435933 #3]  INFO -- : [52da63d5-afbd-4e8d-9d8a-51b04d077a21] Processing by SessionsController#login_attempt as HTML\n2016-10-26T04:21:54.436093+00:00 app[web.1]: I, [2016-10-26T04:21:54.436045 #3]  INFO -- : [52da63d5-afbd-4e8d-9d8a-51b04d077a21]   Parameters: {\"utf8\"=&gt;\"\u2713\", \"authenticity_token\"=&gt;\"xEvOCcjU8FZyt2OlypuNIifhucXsveX6TOGIXwkpddO7Dt9cEQyJrS/5Kw+trW35eo/jtv+A2IkuIzYHJUt4tQ==\", \"username_or_email\"=&gt;\"admin\", \"login_password\"=&gt;\"[FILTERED]\", \"commit\"=&gt;\"Log In\"}\n2016-10-26T04:21:54.438633+00:00 app[web.1]: I, [2016-10-26T04:21:54.438587 #3]  INFO -- : [52da63d5-afbd-4e8d-9d8a-51b04d077a21] Completed 500 Internal Server Error in 2ms (ActiveRecord: 1.7ms)\n2016-10-26T04:21:54.439261+00:00 app[web.1]: F, [2016-10-26T04:21:54.439180 #3] FATAL -- : [52da63d5-afbd-4e8d-9d8a-51b04d077a21]   \n2016-10-26T04:21:54.439305+00:00 app[web.1]: F, [2016-10-26T04:21:54.439242 #3] FATAL -- : [52da63d5-afbd-4e8d-9d8a-51b04d077a21] ActiveRecord::StatementInvalid (PG::UndefinedTable: ERROR:  relation \"users\" does not exist\n2016-10-26T04:21:54.439306+00:00 app[web.1]: LINE 8:                WHERE a.attrelid = '\"users\"'::regclass\n2016-10-26T04:21:54.439307+00:00 app[web.1]:                                           ^\n2016-10-26T04:21:54.439308+00:00 app[web.1]: :               SELECT a.attname, format_type(a.atttypid, a.atttypmod),\n2016-10-26T04:21:54.439309+00:00 app[web.1]:                      pg_get_expr(d.adbin, d.adrelid), a.attnotnull, a.atttypid, a.atttypmod,\n2016-10-26T04:21:54.439310+00:00 app[web.1]:              (SELECT c.collname FROM pg_collation c, pg_type t\n2016-10-26T04:21:54.439311+00:00 app[web.1]:                WHERE c.oid = a.attcollation AND t.oid = a.atttypid AND a.attcollation &lt;&gt; t.typcollation),\n2016-10-26T04:21:54.439311+00:00 app[web.1]:                      col_description(a.attrelid, a.attnum) AS comment\n2016-10-26T04:21:54.439312+00:00 app[web.1]:                 FROM pg_attribute a LEFT JOIN pg_attrdef d\n2016-10-26T04:21:54.439313+00:00 app[web.1]:                   ON a.attrelid = d.adrelid AND a.attnum = d.adnum\n2016-10-26T04:21:54.439313+00:00 app[web.1]:                WHERE a.attrelid = '\"users\"'::regclass\n2016-10-26T04:21:54.439314+00:00 app[web.1]:                  AND a.attnum &gt; 0 AND NOT a.attisdropped\n2016-10-26T04:21:54.439315+00:00 app[web.1]:                ORDER BY a.attnum\n2016-10-26T04:21:54.439316+00:00 app[web.1]: ):\n2016-10-26T04:21:54.439363+00:00 app[web.1]: F, [2016-10-26T04:21:54.439302 #3] FATAL -- : [52da63d5-afbd-4e8d-9d8a-51b04d077a21]   \n2016-10-26T04:21:54.439411+00:00 app[web.1]: F, [2016-10-26T04:21:54.439359 #3] FATAL -- : [52da63d5-afbd-4e8d-9d8a-51b04d077a21] app/models/user.rb:23:in `authenticate'\n2016-10-26T04:21:54.439458+00:00 app[web.1]: F, [2016-10-26T04:21:54.439406 #3] FATAL -- : [52da63d5-afbd-4e8d-9d8a-51b04d077a21] app/controllers/sessions_controller.rb:11:in `login_attempt'\n</code></pre>\n"}, {"tags": ["ruby", "mechanize-ruby"], "comments": [{"owner": {"reputation": 5134, "user_id": 1672197, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i8HkV.png?s=128&g=1", "display_name": "orde", "link": "https://stackoverflow.com/users/1672197/orde"}, "edited": false, "score": 0, "creation_date": 1477495303, "post_id": 40256612, "comment_id": 67792714, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/802225/how-do-i-use-mechanize-to-process-javascript\">How do I use Mechanize to process JavaScript?</a>"}], "answers": [{"tags": [], "owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "is_accepted": true, "score": 0, "last_activity_date": 1477471765, "creation_date": 1477471765, "answer_id": 40257730, "question_id": 40256612, "link": "https://stackoverflow.com/questions/40256612/call-onclick-ruby-mechanize/40257730#40257730", "title": "Call onclick Ruby Mechanize", "body": "<p>you can't, mechanize doesn't run javascript. use selenium or phantom</p>\n"}], "owner": {"reputation": 580, "user_id": 6497747, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-7m1lKtA-hXA/AAAAAAAAAAI/AAAAAAAAAGo/WHmHUYtYtIw/photo.jpg?sz=128", "display_name": "Mohamed Rafiq P", "link": "https://stackoverflow.com/users/6497747/mohamed-rafiq-p"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 213, "favorite_count": 1, "accepted_answer_id": 40257730, "answer_count": 1, "score": 0, "last_activity_date": 1477471765, "creation_date": 1477468332, "question_id": 40256612, "link": "https://stackoverflow.com/questions/40256612/call-onclick-ruby-mechanize", "title": "Call onclick Ruby Mechanize", "body": "<p>How can I call onclick method instead of submit using ruby Mechanize?</p>\n\n<pre><code>&lt;input type=\"Submit\" value=\"Search\" name=\"B2\" onclick=\"getABC()\"&gt;\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ransack"], "comments": [{"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 1, "creation_date": 1477471865, "post_id": 40256526, "comment_id": 67776652, "body": "can you give more detail on what you&#39;re trying to do. where are you putting the check, and what does that achieve"}, {"owner": {"reputation": 11, "user_id": 6690158, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b60f6dfbebc420f9b54af39751d4e8e9?s=128&d=identicon&r=PG&f=1", "display_name": "Silentium", "link": "https://stackoverflow.com/users/6690158/silentium"}, "reply_to_user": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1477478444, "post_id": 40256526, "comment_id": 67780833, "body": "@max pleaner I do not understand how to write a condition in the model so that it looked for all that is less than the value of the field :check"}], "answers": [{"tags": [], "owner": {"reputation": 1755, "user_id": 1877683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uttsA.jpg?s=128&g=1", "display_name": "C dot StrifeVII", "link": "https://stackoverflow.com/users/1877683/c-dot-strifevii"}, "is_accepted": false, "score": 0, "last_activity_date": 1478442849, "creation_date": 1478442849, "answer_id": 40450493, "question_id": 40256526, "link": "https://stackoverflow.com/questions/40256526/how-to-filter-by-price/40450493#40450493", "title": "How to filter by price?", "body": "<p>You could give this a try </p>\n\n<pre><code>def index\n  @search = Restaurant.search(params[:q])\n  @restaurants = @search.result.where('publish = ? AND status = ? AND value &lt; ?', true, 1, 800)\nend\n</code></pre>\n\n<p>This should filter out values are that are less than 800</p>\n"}, {"comments": [{"owner": {"reputation": 19261, "user_id": 4758119, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/F4dJY.jpg?s=128&g=1", "display_name": "Deepak Mahakale", "link": "https://stackoverflow.com/users/4758119/deepak-mahakale"}, "edited": false, "score": 1, "creation_date": 1478512075, "post_id": 40458925, "comment_id": 68168954, "body": "Please add some details to your answer rather than just posting code snippet"}, {"owner": {"reputation": 7922, "user_id": 2747593, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/cdcEd.jpg?s=128&g=1", "display_name": "Scott Weldon", "link": "https://stackoverflow.com/users/2747593/scott-weldon"}, "edited": false, "score": 0, "creation_date": 1478545108, "post_id": 40458925, "comment_id": 68189534, "body": "While this code snippet may solve the problem, it doesn&#39;t explain why or how it answers the question. Please <a href=\"//meta.stackexchange.com/q/114762/269535\">include an explanation for your code</a>, as that really helps to improve the quality of your post. Remember that you are answering the question for readers in the future, and those people might not know the reasons for your code suggestion. <b>Flaggers / reviewers:</b> <a href=\"//meta.stackoverflow.com/a/260413/2747593\">For code-only answers such as this one, downvote, don&#39;t delete!</a>"}], "tags": [], "owner": {"reputation": 11, "user_id": 6690158, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b60f6dfbebc420f9b54af39751d4e8e9?s=128&d=identicon&r=PG&f=1", "display_name": "Silentium", "link": "https://stackoverflow.com/users/6690158/silentium"}, "is_accepted": false, "score": 0, "last_activity_date": 1478607249, "last_edit_date": 1478607249, "creation_date": 1478499492, "answer_id": 40458925, "question_id": 40256526, "link": "https://stackoverflow.com/questions/40256526/how-to-filter-by-price/40458925#40458925", "title": "How to filter by price?", "body": "<pre><code> &lt;%= f.search_field :check_lteq, id: 'hidden' %&gt;\n</code></pre>\n\n<p><code>_lteq</code> looking for all that <code>&lt;=</code> setpoint</p>\n\n<pre><code>#=&gt; SELECT `products`.* FROM `products` WHERE (`products`.`price` &lt;= 1000)\n</code></pre>\n\n<p><code>_gteq</code> looking for all that <code>&gt;=</code> setpoint</p>\n\n<pre><code># =&gt; \"SELECT `items`.* FROM `items` WHERE `items`.`price` &gt;= 1000)\"\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 6690158, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b60f6dfbebc420f9b54af39751d4e8e9?s=128&d=identicon&r=PG&f=1", "display_name": "Silentium", "link": "https://stackoverflow.com/users/6690158/silentium"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 257, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1478607249, "creation_date": 1477468032, "question_id": 40256526, "link": "https://stackoverflow.com/questions/40256526/how-to-filter-by-price", "title": "How to filter by price?", "body": "<p>How to set the condition that it filtered &lt; :check. \nI use gem 'ransack'</p>\n\n<pre><code>&lt;%= search_form_for @search, id: 'catalog_filter' do |f| %&gt;\n   &lt;%= f.search_field :check %&gt;\n&lt;% end %&gt; \n</code></pre>\n\n<p>controller</p>\n\n<pre><code>def index\n  @search = Restaurant.search(params[:q])\n  @restaurants = @search.result.where(:publish =&gt; true, :status =&gt; 1)\nend\n</code></pre>\n"}, {"tags": ["ruby", "rspec", "mocking", "sensu"], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 6848908, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d86c841625e58a02d7a99b79baf3e033?s=128&d=identicon&r=PG&f=1", "display_name": "Piotr", "link": "https://stackoverflow.com/users/6848908/piotr"}, "edited": false, "score": 0, "creation_date": 1477577902, "post_id": 40260456, "comment_id": 67832335, "body": "Thanks for the reply. But the plugin code is still executed after the last step... BTW: How to use raise_error matcher to check the exit code (whether plugin returns 0,1 or 2) ?"}, {"owner": {"reputation": 2374, "user_id": 1941418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8940942c798e82d460e0c058acfb3b7?s=128&d=identicon&r=PG", "display_name": "smefju", "link": "https://stackoverflow.com/users/1941418/smefju"}, "reply_to_user": {"reputation": 1, "user_id": 6848908, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d86c841625e58a02d7a99b79baf3e033?s=128&d=identicon&r=PG&f=1", "display_name": "Piotr", "link": "https://stackoverflow.com/users/6848908/piotr"}, "edited": false, "score": 0, "creation_date": 1477578513, "post_id": 40260456, "comment_id": 67832777, "body": "It means that you didn&#39;t mock the right method. You can also allow the code to execute and just mock standard output (<code>allow(STDOUT).to receive(:write)</code>). It depends on what you want to really test. As for <code>SystemExit</code>, it is not possible to check the exit code."}], "tags": [], "owner": {"reputation": 2374, "user_id": 1941418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8940942c798e82d460e0c058acfb3b7?s=128&d=identicon&r=PG", "display_name": "smefju", "link": "https://stackoverflow.com/users/1941418/smefju"}, "is_accepted": false, "score": 0, "last_activity_date": 1477479430, "creation_date": 1477479430, "answer_id": 40260456, "question_id": 40256155, "link": "https://stackoverflow.com/questions/40256155/rspec-the-tested-code-is-automatically-started-after-test/40260456#40260456", "title": "Rspec. The tested code is automatically started after test", "body": "<p>You can stub the original plugin call and optionally return a dummy object:</p>\n\n<pre><code>allow(SomeObject).to receive(:method) # .and_return(double)\n</code></pre>\n\n<p>you can put it in the <code>before</code> block to make sure that all assertions will share the code.</p>\n\n<p>Another thing is that you are using <code>rescue</code> blocks to catch the situation when your code aborts with an error. You should use <a href=\"https://www.relishapp.com/rspec/rspec-expectations/docs/built-in-matchers/raise-error-matcher\" rel=\"nofollow\"><code>raise_error</code></a> matcher instead:</p>\n\n<pre><code>expect { run }.to raise_error(SystemExit)\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 6848908, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d86c841625e58a02d7a99b79baf3e033?s=128&d=identicon&r=PG&f=1", "display_name": "Piotr", "link": "https://stackoverflow.com/users/6848908/piotr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 75, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1477483802, "creation_date": 1477466758, "question_id": 40256155, "link": "https://stackoverflow.com/questions/40256155/rspec-the-tested-code-is-automatically-started-after-test", "title": "Rspec. The tested code is automatically started after test", "body": "<p>I have a problem with the testing the Sensu Plugin.\nEverytime when I start rspec to test plugin it test it, but anyway at the end of test, the original plugin is started automatically. So I have in my console:</p>\n\n<pre><code>Finished in 0 seconds (files took 0.1513 seconds to load) \n1 example, 0 failures \nCheckDisk OK:       # This comes from the plugin\n</code></pre>\n\n<p>Short explanation how my system works:\nPlugin call system 'wmic' command, processes it, checks the conditions about the disk parameters and returns the exit statuses (ok, critical, etc)\nRspec mocks the response from system and sets into the input of plugin. At the end rspec checks the plugin exit status when the mocked input is given.</p>\n\n<p>My plugin looks like that:</p>\n\n<pre><code>require 'rubygems' if RUBY_VERSION &lt; '1.9.0'\nrequire 'sensu-plugin/check/cli'\n\nclass CheckDisk &lt; Sensu::Plugin::Check::CLI\n  def initialize\n    super\n    @crit_fs = []\n  end\n\n  def get_wmic\n    `wmic volume where DriveType=3 list brief`\n  end\n\n  def read_wmic\n    get_wmic\n    # do something, fill the class variables with system response  \n  end\n\n  def run\n   severity = \"ok\"\n   msg = \"\"\n   read_wmic\n   unless @crit_fs.empty?\n     severity = \"critical\"  \n  end  \n  case severity\n    when /ok/\n      ok msg\n    when /warning/\n      warning msg\n    when /critical/\n      critical msg\n    end\n  end\nend\n</code></pre>\n\n<p>Here is my test in Rspec:</p>\n\n<pre><code>require_relative '../check-disk.rb'\nrequire 'rspec'\n\n  def loadFile\n    #Load template of system output when ask 'wmic volume(...)\n  end\n\n  def fillParametersInTemplate (template, parameters)\n    #set mocked disk parameters in template\n  end\n\n  def initializeMocks (options)\n    mockedSysOutput = fillParametersInTemplate @loadedTemplate, options \n    po = String.new(mockedSysOutput)\n    allow(checker).to receive(:get_wmic).and_return(po) #mock system call here\n  end\n\n  describe CheckDisk do\n    let(:checker) { described_class.new }\n    before(:each) do   \n       @loadedTemplate = loadFile   \n       def checker.critical(*_args)\n          exit 2\n       end    \n     end\n\n  context \"When % of free disk space = 10 &gt;\" do \n    options = {:diskName =&gt; 'C:\\\\', :diskSize =&gt; 1000, :diskFreeSpace =&gt; 100}       \n    it 'Returns ok exit status ' do      \n      begin                   \n        initializeMocks options\n        checker.run \n      rescue SystemExit =&gt; e \n        exit_code = e.status   \n      end \n      expect(exit_code).to eq 0\n    end  \n  end \nend\n</code></pre>\n\n<p>I know that I can just put \"exit 0\" after the last example, but this is not a solution because when I will try to start many spec files it will exit after the first one. How to start only test, without running the plugin? Maybe someone can help me and show how to handle with such problem?\nThank you.</p>\n"}, {"tags": ["ruby"], "answers": [{"tags": [], "owner": {"reputation": 2037, "user_id": 4531835, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/02f4959a0a3436daa0a07526ac6a3551?s=128&d=identicon&r=PG&f=1", "display_name": "Andrey Saleba", "link": "https://stackoverflow.com/users/4531835/andrey-saleba"}, "is_accepted": false, "score": 0, "last_activity_date": 1477465949, "creation_date": 1477465949, "answer_id": 40255907, "question_id": 40255861, "link": "https://stackoverflow.com/questions/40255861/what-does-expression-r-something-mean-in-ruby/40255907#40255907", "title": "what does expression %r |something | mean in ruby?", "body": "<p>It is used for interpolated regular expressions</p>\n"}], "owner": {"reputation": 9, "user_id": 3976762, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ab5c9a4598a513c7026b2d62c501409?s=128&d=identicon&r=PG&f=1", "display_name": "Zumars", "link": "https://stackoverflow.com/users/3976762/zumars"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 105, "favorite_count": 0, "closed_date": 1477466464, "answer_count": 1, "score": 0, "last_activity_date": 1477465949, "creation_date": 1477465783, "question_id": 40255861, "link": "https://stackoverflow.com/questions/40255861/what-does-expression-r-something-mean-in-ruby", "closed_reason": "Duplicate", "title": "what does expression %r |something | mean in ruby?", "body": "<p>I'm a ruby beginner, when I read other guy's ruby code, I found something like \"%r |/usr/doc/readme.txt|\"  as an array's elements. But I don't understand what it is. Can anyone please explain this a little bit and point me to some ruby documents which talk about such thing?</p>\n"}, {"tags": ["ruby", "csv"], "comments": [{"owner": {"reputation": 559, "user_id": 433230, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87363ffd3d0f9b1c47a7cbd6ee68a320?s=128&d=identicon&r=PG", "display_name": "Eduardo Sampaio", "link": "https://stackoverflow.com/users/433230/eduardo-sampaio"}, "edited": false, "score": 0, "creation_date": 1477464381, "post_id": 40255360, "comment_id": 67772415, "body": "What are you doing with this data? Is it a one-time thing or you&#39;ll be importing CSVs like this on a regular basis?"}, {"owner": {"reputation": 29623, "user_id": 91970, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/64aa7d1e0eb006175565adb0a47a4452?s=128&d=identicon&r=PG", "display_name": "marcamillion", "link": "https://stackoverflow.com/users/91970/marcamillion"}, "reply_to_user": {"reputation": 559, "user_id": 433230, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87363ffd3d0f9b1c47a7cbd6ee68a320?s=128&d=identicon&r=PG", "display_name": "Eduardo Sampaio", "link": "https://stackoverflow.com/users/433230/eduardo-sampaio"}, "edited": false, "score": 0, "creation_date": 1477464652, "post_id": 40255360, "comment_id": 67772566, "body": "@EduardoSampaio I will be importing CSVs like this on a regular basis. I have a script that creates these CSVs, so I want to just write a method that sanitizes them."}], "answers": [{"comments": [{"owner": {"reputation": 29623, "user_id": 91970, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/64aa7d1e0eb006175565adb0a47a4452?s=128&d=identicon&r=PG", "display_name": "marcamillion", "link": "https://stackoverflow.com/users/91970/marcamillion"}, "edited": false, "score": 0, "creation_date": 1477500884, "post_id": 40255732, "comment_id": 67796225, "body": "Not importing the data into a database. I want to store it in another CSV. That <code>sort</code> command is a Ruby command? Or is that a <code>bash</code> command or something?"}, {"owner": {"reputation": 559, "user_id": 433230, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87363ffd3d0f9b1c47a7cbd6ee68a320?s=128&d=identicon&r=PG", "display_name": "Eduardo Sampaio", "link": "https://stackoverflow.com/users/433230/eduardo-sampaio"}, "edited": false, "score": 0, "creation_date": 1477557595, "post_id": 40255732, "comment_id": 67818556, "body": "Yes, <code>sort</code> is a bash command. I really doubt you can write any algorithm in Ruby that will have a better performance than <code>sort</code>."}], "tags": [], "owner": {"reputation": 559, "user_id": 433230, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87363ffd3d0f9b1c47a7cbd6ee68a320?s=128&d=identicon&r=PG", "display_name": "Eduardo Sampaio", "link": "https://stackoverflow.com/users/433230/eduardo-sampaio"}, "is_accepted": false, "score": 1, "last_activity_date": 1477465352, "creation_date": 1477465352, "answer_id": 40255732, "question_id": 40255360, "link": "https://stackoverflow.com/questions/40255360/how-do-i-remove-rows-with-duplicate-info-in-a-csv/40255732#40255732", "title": "How do I remove rows with duplicate info in a CSV?", "body": "<p>I have two suggestions for you, one is just using <code>sort</code> <em>(untested)</em>:</p>\n\n<pre><code>sort -u -t, -k1,1 -k2,2 (etc. one for each column you want unique) file\n</code></pre>\n\n<p>Or if you are importing this data into a database, you could create a temporary table on it, where all columns are unique and just insert all of the CSV data into it, ignoring unique constraint exceptions.</p>\n"}], "owner": {"reputation": 29623, "user_id": 91970, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/64aa7d1e0eb006175565adb0a47a4452?s=128&d=identicon&r=PG", "display_name": "marcamillion", "link": "https://stackoverflow.com/users/91970/marcamillion"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 152, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1477503375, "creation_date": 1477464042, "last_edit_date": 1477503375, "question_id": 40255360, "link": "https://stackoverflow.com/questions/40255360/how-do-i-remove-rows-with-duplicate-info-in-a-csv", "title": "How do I remove rows with duplicate info in a CSV?", "body": "<p>I have some CSVs that have many columns and hundreds of rows. The columns are: <code>CompanyName, Website, Address, PhoneNumber, Email1, Email2, Email3</code>.</p>\n\n<p>What I need is to remove all rows that have duplicated info. The issue is that for a row to be a duplicate, it doesn't have to have ALL entries be identical, it just needs to have at least 1 that is identical.</p>\n\n<p>Here is an example of two rows that have almost all identical information except the <code>CompanyName</code> is different. This is just 1 permutation of this issue.</p>\n\n<p><a href=\"https://i.stack.imgur.com/InVYD.png\" rel=\"nofollow\"><img src=\"https://i.stack.imgur.com/InVYD.png\" alt=\"enter image description here\"></a></p>\n\n<p>So the key thing is basically any two rows, that share the same value in 1 column, one of those rows should be deleted.</p>\n\n<p>So if any two rows have the same <code>CompanyName</code>, <code>Email Address</code>, <code>Phone Number</code>, etc, 1 should be deleted.</p>\n\n<p>What's the best way to approach this?</p>\n\n<p><strong>Edit 1</strong></p>\n\n<p>I would prefer creating a new, modified CSV, that has the duplicated rows eliminated. Largely because I don't want to risk damaging/corrupting the existing CSV.</p>\n\n<p><strong>Edit 2</strong></p>\n\n<p>Note that what I am really trying to do is avoid the N+1 problem, where I am comparing each row against every other row in an 800 row CSV. Or is that not possible to do given my objective?</p>\n"}, {"tags": ["ruby", "postgresql", "hash", "insert"], "comments": [{"owner": {"reputation": 2276, "user_id": 4164651, "user_type": "registered", "accept_rate": 65, "profile_image": "https://graph.facebook.com/100004012909097/picture?type=large", "display_name": "Edmund Lee", "link": "https://stackoverflow.com/users/4164651/edmund-lee"}, "edited": false, "score": 0, "creation_date": 1477463042, "post_id": 40254941, "comment_id": 67771771, "body": "what error do you get?"}, {"owner": {"reputation": 1015, "user_id": 6773669, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/f9471cd591c8e6d426534832c0804cd5?s=128&d=identicon&r=PG&f=1", "display_name": "Pragun", "link": "https://stackoverflow.com/users/6773669/pragun"}, "edited": false, "score": 0, "creation_date": 1477463142, "post_id": 40254941, "comment_id": 67771824, "body": "I didn&#39;t receive any error! everything executes fine. however, the data stored in the database is something of form  &quot;[&quot;{\\&quot;value\\&quot;:\\&quot;-0.000873\\&quot;}&quot;, &quot;{\\&quot;value\\&quot;:\\&quot;-0.001745\\&quot;}&quot;, &quot;{\\&quot;value\\&quot;:\\&quot;-0.002618\\&quot;}&quot;, &quot;{\\&quot;value\\&quot;:\\&quot;-0.003491\\&quot;}&quot;, &quot;{\\&quot;value\\&quot;:\\&quot;-0.004363\\&quot;}&quot;, &quot;{\\&quot;value\\&quot;:\\&quot;-0.005236\\&quot;}&quot;, &quot;{\\&quot;value\\&quot;:\\&quot;-0.006109\\&quot;}&quot;, &quot;{\\&quot;value\\&quot;:\\&quot;-0.006981\\&quot;}&quot;]"}, {"owner": {"reputation": 1015, "user_id": 6773669, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/f9471cd591c8e6d426534832c0804cd5?s=128&d=identicon&r=PG&f=1", "display_name": "Pragun", "link": "https://stackoverflow.com/users/6773669/pragun"}, "reply_to_user": {"reputation": 2276, "user_id": 4164651, "user_type": "registered", "accept_rate": 65, "profile_image": "https://graph.facebook.com/100004012909097/picture?type=large", "display_name": "Edmund Lee", "link": "https://stackoverflow.com/users/4164651/edmund-lee"}, "edited": false, "score": 0, "creation_date": 1477463187, "post_id": 40254941, "comment_id": 67771843, "body": "can anybody tell me how do you use html_safe from rails in ruby?"}, {"owner": {"reputation": 2902, "user_id": 374262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f3849bbcdd7b248ee576805a2f2fa9f2?s=128&d=identicon&r=PG", "display_name": "yoavmatchulsky", "link": "https://stackoverflow.com/users/374262/yoavmatchulsky"}, "edited": false, "score": 1, "creation_date": 1477463240, "post_id": 40254941, "comment_id": 67771871, "body": "are you trying to create a single row with all the values? that kinds of defeats the purpose of using a database"}, {"owner": {"reputation": 2276, "user_id": 4164651, "user_type": "registered", "accept_rate": 65, "profile_image": "https://graph.facebook.com/100004012909097/picture?type=large", "display_name": "Edmund Lee", "link": "https://stackoverflow.com/users/4164651/edmund-lee"}, "edited": false, "score": 0, "creation_date": 1477463241, "post_id": 40254941, "comment_id": 67771872, "body": "Isn&#39;t this what you want? can you just use <code>JSON.parse</code> to parse the record and retrieve the original form?"}, {"owner": {"reputation": 1015, "user_id": 6773669, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/f9471cd591c8e6d426534832c0804cd5?s=128&d=identicon&r=PG&f=1", "display_name": "Pragun", "link": "https://stackoverflow.com/users/6773669/pragun"}, "edited": false, "score": 0, "creation_date": 1477463282, "post_id": 40254941, "comment_id": 67771893, "body": "thats a json column so i don&#39;t think it is bad to store an entire json array of objects like that"}, {"owner": {"reputation": 1015, "user_id": 6773669, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/f9471cd591c8e6d426534832c0804cd5?s=128&d=identicon&r=PG&f=1", "display_name": "Pragun", "link": "https://stackoverflow.com/users/6773669/pragun"}, "reply_to_user": {"reputation": 2276, "user_id": 4164651, "user_type": "registered", "accept_rate": 65, "profile_image": "https://graph.facebook.com/100004012909097/picture?type=large", "display_name": "Edmund Lee", "link": "https://stackoverflow.com/users/4164651/edmund-lee"}, "edited": false, "score": 0, "creation_date": 1477463341, "post_id": 40254941, "comment_id": 67771919, "body": "@EdmundLee Well I actually wanted the pure json without the \\ thing in the database. JSON.parse-ing everytime i fetch records from the database is lame."}, {"owner": {"reputation": 2276, "user_id": 4164651, "user_type": "registered", "accept_rate": 65, "profile_image": "https://graph.facebook.com/100004012909097/picture?type=large", "display_name": "Edmund Lee", "link": "https://stackoverflow.com/users/4164651/edmund-lee"}, "edited": false, "score": 0, "creation_date": 1477463388, "post_id": 40254941, "comment_id": 67771949, "body": "that&#39;s quote escape. unavoidable"}, {"owner": {"reputation": 2276, "user_id": 4164651, "user_type": "registered", "accept_rate": 65, "profile_image": "https://graph.facebook.com/100004012909097/picture?type=large", "display_name": "Edmund Lee", "link": "https://stackoverflow.com/users/4164651/edmund-lee"}, "edited": false, "score": 0, "creation_date": 1477463500, "post_id": 40254941, "comment_id": 67771994, "body": "and <code>html_safe</code>, you use it to indicate the string can be interpreted as html code"}], "answers": [{"comments": [{"owner": {"reputation": 1015, "user_id": 6773669, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/f9471cd591c8e6d426534832c0804cd5?s=128&d=identicon&r=PG&f=1", "display_name": "Pragun", "link": "https://stackoverflow.com/users/6773669/pragun"}, "edited": false, "score": 0, "creation_date": 1477464653, "post_id": 40255414, "comment_id": 67772568, "body": "storing things with a escape quote in the database doesn&#39;t seem like a good practice. Thank you though :) cheers!"}], "tags": [], "owner": {"reputation": 2276, "user_id": 4164651, "user_type": "registered", "accept_rate": 65, "profile_image": "https://graph.facebook.com/100004012909097/picture?type=large", "display_name": "Edmund Lee", "link": "https://stackoverflow.com/users/4164651/edmund-lee"}, "is_accepted": false, "score": 2, "last_activity_date": 1477501854, "last_edit_date": 1477501854, "creation_date": 1477464250, "answer_id": 40255414, "question_id": 40254941, "link": "https://stackoverflow.com/questions/40254941/ruby-with-postgresql-inserting-into-a-json-field-of-the-database/40255414#40255414", "title": "Ruby with PostgreSQL - Inserting into a JSON field of the database", "body": "<p>Postgres persists JSON type as a JSON string. This is a string that you can get by calling <code>#to_json</code> on most objects in ruby. Here's a link to how postgres deal with JSON type in more details.</p>\n\n<p><a href=\"https://www.postgresql.org/docs/9.6/static/datatype-json.html\" rel=\"nofollow\">https://www.postgresql.org/docs/9.6/static/datatype-json.html</a></p>\n\n<p>Because it's persisted as a JSON string, all the quotes will be escaped. That's why something like this</p>\n\n<pre><code>{ a: 1 }\n</code></pre>\n\n<p>will become this</p>\n\n<pre><code>\"{\\\"a\\\":1}\"\n</code></pre>\n\n<p>The <code>\\</code> is for escaping the quote so that it does not end the string.</p>\n\n<p>When you retrieve it from postgres (I personally never used JSON type in PG but I believe it works similarly as <code>JSON.parse</code> on this string), you won't see the slashes any more. And the above process is done by postgres.</p>\n"}, {"tags": [], "owner": {"reputation": 499, "user_id": 4829617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5c44A.png?s=128&g=1", "display_name": "Dhurba Baral", "link": "https://stackoverflow.com/users/4829617/dhurba-baral"}, "is_accepted": true, "score": 1, "last_activity_date": 1477464477, "creation_date": 1477464477, "answer_id": 40255474, "question_id": 40254941, "link": "https://stackoverflow.com/questions/40254941/ruby-with-postgresql-inserting-into-a-json-field-of-the-database/40255474#40255474", "title": "Ruby with PostgreSQL - Inserting into a JSON field of the database", "body": "<p>If you convert hash object into JSON in ruby, it adds escape character automatically so try converting the whole array of object into JSON instead of hash object.</p>\n\n<pre><code>require 'pg'\n\nfreq = 0.05\n$test = 0\n$sinval = 0\narr = Array.new\n\n@conn = PG.connect(\n        :dbname =&gt; 'test_db',\n        :user =&gt; 'abc',\n        :port =&gt; 6100,\n        :host =&gt; 'localhost'\n        )\n\nwhile true do\n        $test = ($test+freq).round(2)\n        $sinval = Math.sin($test*(Math::PI/180)).round(6)\n        hash = {:value=&gt;$sinval.to_s}\n        arr.push(hash)\n        if(arr.length&gt;=1800)\n                @conn.exec(\"INSERT INTO sinewave(data) VALUES('#{arr.to_json}');\")\n                arr = Array.new\n        end\nend\n</code></pre>\n"}], "owner": {"reputation": 1015, "user_id": 6773669, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/f9471cd591c8e6d426534832c0804cd5?s=128&d=identicon&r=PG&f=1", "display_name": "Pragun", "link": "https://stackoverflow.com/users/6773669/pragun"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1599, "favorite_count": 0, "accepted_answer_id": 40255474, "answer_count": 2, "score": 2, "last_activity_date": 1477501854, "creation_date": 1477462377, "last_edit_date": 1477463170, "question_id": 40254941, "link": "https://stackoverflow.com/questions/40254941/ruby-with-postgresql-inserting-into-a-json-field-of-the-database", "title": "Ruby with PostgreSQL - Inserting into a JSON field of the database", "body": "<p>I'm trying to insert a ruby hash into Postgres JSON column. Basically its a collection of hash in an array. So you have a structure something like:</p>\n\n<pre><code>[{\"a\":\"1\"},{\"b\":\"2\"},{\"c\":\"3\"}] #the length goes on\n</code></pre>\n\n<p>The existing code for whatever I'm trying to do is:</p>\n\n<pre><code>require 'pg'\n\nfreq = 0.05\n$test = 0\n$sinval = 0\narr = Array.new\n\n@conn = PG.connect(\n        :dbname =&gt; 'test_db',\n        :user =&gt; 'abc',\n        :port =&gt; 6100,\n        :host =&gt; 'localhost'\n        )\n\nwhile true do\n        $test = ($test+freq).round(2)\n        $sinval = Math.sin($test*(Math::PI/180)).round(6)\n        hash = {:value=&gt;$sinval.to_s}\n        arr.push(hash.to_json)\n        if(arr.length&gt;=1800)\n                @conn.exec(\"INSERT INTO sinewave(data) VALUES('#{arr}');\")\n                arr = Array.new\n        end\nend\n</code></pre>\n\n<p>But now, I'm not being able to store it in the database the way I want. For each row, what I'd like to see is a JSON Array of 1800 objects and the structure be:</p>\n\n<pre><code>[{\"a\":\"1\"},{\"b\":\"2\"},{\"c\":\"3\"}]\n</code></pre>\n\n<p>I don't know whats wrong. May be <code>hash = {:value=&gt;$sinval.to_s}</code> this line is incorrect. Other ways to sort this out?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec", "exception-handling"], "answers": [{"comments": [{"owner": {"reputation": 153, "user_id": 5685130, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c4b073ec52fb17437b0fe60967a077e1?s=128&d=identicon&r=PG&f=1", "display_name": "krishna", "link": "https://stackoverflow.com/users/5685130/krishna"}, "edited": false, "score": 0, "creation_date": 1477464675, "post_id": 40255033, "comment_id": 67772575, "body": "the problem here is how to make the user_profile.save to fail?"}], "tags": [], "owner": {"reputation": 2276, "user_id": 4164651, "user_type": "registered", "accept_rate": 65, "profile_image": "https://graph.facebook.com/100004012909097/picture?type=large", "display_name": "Edmund Lee", "link": "https://stackoverflow.com/users/4164651/edmund-lee"}, "is_accepted": false, "score": 0, "last_activity_date": 1477501063, "last_edit_date": 1477501063, "creation_date": 1477462724, "answer_id": 40255033, "question_id": 40254211, "link": "https://stackoverflow.com/questions/40254211/rspec-to-test-raise-exception-in-rails/40255033#40255033", "title": "RSpec to test raise exception in rails", "body": "<p>checkout rspec documents: </p>\n\n<p><a href=\"https://www.relishapp.com/rspec/rspec-expectations/v/2-11/docs/built-in-matchers/raise-error-matcher\" rel=\"nofollow\">https://www.relishapp.com/rspec/rspec-expectations/v/2-11/docs/built-in-matchers/raise-error-matcher</a></p>\n\n<pre><code>describe ':: create_from_supplement' do\n  it 'blows up' do\n    expect { UserProfile.create_from_supplement(*args) }.to raise_error(/User Profile Creation Failed because of/)\n  end\nend\n</code></pre>\n\n<p>Tracing back you code, here are the places that might cause the error, and following what you can consider.</p>\n\n<ol>\n<li><code>user_details_str = xml.%('auth_supplement/supplement_data/content').inner_html</code></li>\n</ol>\n\n<p>Here <code>user_details_str</code> might be an invalid string format (not nil) because whatever you get from <code>'auth_supplement/supplement_data/content'</code> is not a correct format.</p>\n\n<ol start=\"2\">\n<li><code>user_details_xml = Nokogiri.parse(user_details_str)</code></li>\n</ol>\n\n<p>Here you need to determine what might cause <code>Nokogiri::parse</code> to give you an invalid result.</p>\n\n<ol start=\"3\">\n<li><code>user_name = user_details_xml.%('username').inner_html</code></li>\n</ol>\n\n<p>Then here, same as above.</p>\n\n<ol start=\"4\">\n<li><code>user_profile = UserProfile.find_or_initialize_by(name: user_name)</code></li>\n</ol>\n\n<p>So here, you might have an invalid <code>user_name</code> due to the previous few lines of code, which violates any validation you might have (e.g. too short, not capitalized, or what not).</p>\n\n<p><strong>More Info</strong></p>\n\n<p>So this can go deeper into your code. It's hard to test because your method is trying to do too much. And this clearly violates abc size (there are too many logical branches, more info here: <a href=\"http://wiki.c2.com/?AbcMetric\" rel=\"nofollow\">http://wiki.c2.com/?AbcMetric</a>)</p>\n\n<p>I suggest refactoring some branches of this method into smaller single responsibility methods.</p>\n"}, {"tags": [], "owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "is_accepted": false, "score": 3, "last_activity_date": 1477462888, "creation_date": 1477462888, "answer_id": 40255076, "question_id": 40254211, "link": "https://stackoverflow.com/questions/40254211/rspec-to-test-raise-exception-in-rails/40255076#40255076", "title": "RSpec to test raise exception in rails", "body": "<p>With Rspec expectations you have a special syntax for when you expect an error to be raised.</p>\n\n<p>if you did something like this:</p>\n\n<pre><code>expect(raise NoMethodError).to raise_error(NoMethodError)\n</code></pre>\n\n<p>that wouldn't work - RSpec would not handle the error and would exit.</p>\n\n<p>However if you use brackets:</p>\n\n<pre><code>expect { raise NoMethodError }.to raise_error(NoMethodError)\n</code></pre>\n\n<p>that should pass. </p>\n\n<p>If you use brackets ( or a do / end block ) than any errors in the block will be 'captured' and you can check them with the <code>raise_error</code> matcher. </p>\n"}], "owner": {"reputation": 153, "user_id": 5685130, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c4b073ec52fb17437b0fe60967a077e1?s=128&d=identicon&r=PG&f=1", "display_name": "krishna", "link": "https://stackoverflow.com/users/5685130/krishna"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3040, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1477501063, "creation_date": 1477458878, "last_edit_date": 1477463129, "question_id": 40254211, "link": "https://stackoverflow.com/questions/40254211/rspec-to-test-raise-exception-in-rails", "title": "RSpec to test raise exception in rails", "body": "<p>I am new to RSpec. I have a method in my model user_profile.rb</p>\n\n<pre><code>def self.create_from_supplement(device, structure)\n  xml = Nokogiri.parse(structure.to_s)\n  user_profile = nil\n  auth_type = xml.%('auth_supplement/auth_type').inner_html\n\n  if 'user' == auth_type\n    user_details_str = xml.%('auth_supplement/supplement_data/content').inner_html rescue nil\n\n    return nil if user_details_str.blank?\n\n    user_details_xml = Nokogiri.parse(user_details_str)\n    user_name = user_details_xml.%('username').inner_html\n\n    user_profile = UserProfile.find_or_initialize_by(name: user_name)\n\n    if user_profile.save\n      device.update_attributes(user_profile_id: user_profile.id)\n    else\n      raise \"User Profile Creation Failed because of #{user_profile.errors.full_messages}\"\n    end\n\n  end\n\n  return user_profile\nend\n</code></pre>\n\n<p>I am writing a unit test case to test when user_profile.save fails, the test case will expect an exception was raised. But in my user_profiles table I have only one column :name. </p>\n\n<p>How to test the case when user_profile.save fails?  <strong>The most important problem here is I dont find any way to make this user_profile.save to fail.</strong> </p>\n\n<p>Some suggests using RSpec Stubs. How do we do that?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "spree", "jboss5.x"], "owner": {"reputation": 2388, "user_id": 1752114, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/778377fd64568f1a23968400a7477306?s=128&d=identicon&r=PG", "display_name": "Arvind", "link": "https://stackoverflow.com/users/1752114/arvind"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 203, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1477456879, "creation_date": 1477456879, "question_id": 40253874, "link": "https://stackoverflow.com/questions/40253874/how-to-deploy-rails-app-in-jboss-server", "title": "How to deploy rails app in jboss server", "body": "<p>Does anyone have knowledge about this , as I have referred some of the document but they are outdated links are below </p>\n\n<p><a href=\"http://www.railsinside.com/deployment/156-jboss-on-rails-deploying-rails-apps-to-a-jboss-app-server.html\" rel=\"nofollow\">http://www.railsinside.com/deployment/156-jboss-on-rails-deploying-rails-apps-to-a-jboss-app-server.html</a></p>\n\n<p><a href=\"https://github.com/bobmcwhirter/jboss-rails/tree/master\" rel=\"nofollow\">https://github.com/bobmcwhirter/jboss-rails/tree/master</a></p>\n\n<p>can anyone help on this</p>\n"}, {"tags": ["ruby", "nokogiri"], "answers": [{"comments": [{"owner": {"reputation": 6994, "user_id": 623266, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/aab060b3da7fa08ba0b531e2204c6469?s=128&d=identicon&r=PG", "display_name": "chell", "link": "https://stackoverflow.com/users/623266/chell"}, "edited": false, "score": 0, "creation_date": 1478488090, "post_id": 40255351, "comment_id": 68160041, "body": "Apologies for the late reply.  Thank you for that helpful and clear answer."}], "tags": [], "owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "is_accepted": true, "score": 1, "last_activity_date": 1477464014, "creation_date": 1477464014, "answer_id": 40255351, "question_id": 40253397, "link": "https://stackoverflow.com/questions/40253397/remove-attribute-returning-nil-node-element-instead-of-just-deleting-attribute-n/40255351#40255351", "title": "remove_attribute returning nil node element instead of just deleting attribute nokogiri", "body": "<p>Right here</p>\n\n<pre><code>first = all_ins_nodes.first.remove_attribute(\"name\")\n</code></pre>\n\n<p>should be split up into multiple lines</p>\n\n<pre><code>first = all_ins_node.first\nfirst.remove_attribute(\"name\")\n</code></pre>\n\n<p>The reason is that <code>.remove_attribute</code> evidently returns nil. You want your pointer to refer to the result of the <code>.first</code> call. </p>\n"}], "owner": {"reputation": 6994, "user_id": 623266, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/aab060b3da7fa08ba0b531e2204c6469?s=128&d=identicon&r=PG", "display_name": "chell", "link": "https://stackoverflow.com/users/623266/chell"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 114, "favorite_count": 0, "accepted_answer_id": 40255351, "answer_count": 1, "score": 0, "last_activity_date": 1477464014, "creation_date": 1477453578, "question_id": 40253397, "link": "https://stackoverflow.com/questions/40253397/remove-attribute-returning-nil-node-element-instead-of-just-deleting-attribute-n", "title": "remove_attribute returning nil node element instead of just deleting attribute nokogiri", "body": "<p>I am trying to remove an attribute from a Nokogiri node element.</p>\n\n<p>Here is the first node element:</p>\n\n<pre><code>=&gt; #(Element:0x3fed0eaf2ef0 {\n  name = \"ins\",\n  namespace = #(Namespace:0x3fed0ed24408 { prefix = \"w\", href = \"http://schemas.openxmlformats.org/wordprocessingml/2006/main\" }),\n  attributes = [\n    #(Attr:0x3fed0eb1e528 { name = \"id\", namespace = #(Namespace:0x3fed0ed24408 { prefix = \"w\", href = \"http://schemas.openxmlformats.org/wordprocessingml/2006/main\" }), value = \"0\" }),\n    #(Attr:0x3fed0eb1e514 { name = \"author\", namespace = #(Namespace:0x3fed0ed24408 { prefix = \"w\", href = \"http://schemas.openxmlformats.org/wordprocessingml/2006/main\" }), value = \"Mitchell Gould\" })\n    #(Attr:0x3fed0eb1e500 { name = \"date\", namespace = #(Namespace:0x3fed0ed24408 { prefix = \"w\", href = \"http://schemas.openxmlformats.org/wordprocessingml/2006/main\" }), value = \"2016-10-15T14:43:00Z\" })]\n  })\n</code></pre>\n\n<p>When I do:</p>\n\n<pre><code>   first = all_ins_nodes.first.remove_attribute(\"name\")\n\nfirst =&gt; nil\n</code></pre>\n\n<p>I only want to remove the attribute not delete the entire node element. How can I do this?</p>\n"}, {"tags": ["java", "ruby", "eclipse", "watir", "watir-webdriver"], "answers": [{"comments": [{"owner": {"reputation": 113, "user_id": 5068576, "user_type": "registered", "accept_rate": 31, "profile_image": "https://graph.facebook.com/1612576899027067/picture?type=large", "display_name": "Keith Yung", "link": "https://stackoverflow.com/users/5068576/keith-yung"}, "edited": false, "score": 0, "creation_date": 1478141421, "post_id": 40254972, "comment_id": 68037457, "body": "Thanks for comparison, I guess I just need to dive into the API."}, {"owner": {"reputation": 286, "user_id": 6349403, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/ce09db1dc600f8c20326e791aa8e0e6c?s=128&d=identicon&r=PG&f=1", "display_name": "Gopal", "link": "https://stackoverflow.com/users/6349403/gopal"}, "reply_to_user": {"reputation": 113, "user_id": 5068576, "user_type": "registered", "accept_rate": 31, "profile_image": "https://graph.facebook.com/1612576899027067/picture?type=large", "display_name": "Keith Yung", "link": "https://stackoverflow.com/users/5068576/keith-yung"}, "edited": false, "score": 0, "creation_date": 1478152588, "post_id": 40254972, "comment_id": 68040199, "body": "@KeithYung Yes, you need to!"}], "tags": [], "owner": {"reputation": 286, "user_id": 6349403, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/ce09db1dc600f8c20326e791aa8e0e6c?s=128&d=identicon&r=PG&f=1", "display_name": "Gopal", "link": "https://stackoverflow.com/users/6349403/gopal"}, "is_accepted": true, "score": 0, "last_activity_date": 1477462809, "last_edit_date": 1477462809, "creation_date": 1477462495, "answer_id": 40254972, "question_id": 40253103, "link": "https://stackoverflow.com/questions/40253103/how-to-use-watir-for-web-app-testing-on-java/40254972#40254972", "title": "How to use Watir for web app testing on Java?", "body": "<p>Yes, you need to know Ruby to work in WATIR, but it's very easy language, more closely put, it's syntax is neat and clean. And also WATIR is very easy to use and having very lesser code compared to selenium,  I write code below using both WATIR and Selenium so that you could see the difference. </p>\n\n<p>To select a select_list in WATIR, you need to write the following code</p>\n\n<pre><code>b.select_list(:id,'country').select 'India'\n</code></pre>\n\n<p>The same equivalent in Selenium</p>\n\n<pre><code>element=driver.findElement(By.id(\"country\");\nSelect var=new Select(element);\nvar.selectByVisibleText(\"India\");\n</code></pre>\n\n<p>So you might have understand the difficulty level when you write code in Java using selenium.</p>\n\n<p>Ruby has a very rich Library so most of the functions would be readily available to you which you don't have code from your level.</p>\n"}, {"tags": [], "owner": {"reputation": 5134, "user_id": 1672197, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i8HkV.png?s=128&g=1", "display_name": "orde", "link": "https://stackoverflow.com/users/1672197/orde"}, "is_accepted": false, "score": 0, "last_activity_date": 1477615985, "creation_date": 1477615985, "answer_id": 40296351, "question_id": 40253103, "link": "https://stackoverflow.com/questions/40253103/how-to-use-watir-for-web-app-testing-on-java/40296351#40296351", "title": "How to use Watir for web app testing on Java?", "body": "<p>This question is ill-suited for SO because it will yield opinion-based answers.  But I can't help doing some <code>watir</code> cheerleading:</p>\n\n<p>Consider this example from <a href=\"https://github.com/watir/watir\" rel=\"nofollow\">https://github.com/watir/watir</a>:</p>\n\n<pre><code>require 'watir'\n\nbrowser = Watir::Browser.new\nbrowser.goto 'google.com'\nbrowser.text_field(title: 'Search').set 'Hello World!'\nbrowser.button(type: 'submit').click\n\nputs browser.title\n# =&gt; 'Hello World! - Google Search'\nbrowser.close\n</code></pre>\n\n<p>There are a bunch of programming concepts here: requiring external libraries, instantiating an object, local variables, symbol-based locators, method-chaining, printing to console, etc.  </p>\n\n<p>But who cares?  It's fairly clear that the script is creating a browser and going to google to perform a search.  </p>\n\n<p>So dive in and start writing <code>watir</code> code and refer to the <a href=\"http://www.rubydoc.info/gems/watir-webdriver/frames\" rel=\"nofollow\">documentation</a>--<code>watir</code>or <code>ruby</code>--when you get stuck or need clarification.  </p>\n"}], "owner": {"reputation": 113, "user_id": 5068576, "user_type": "registered", "accept_rate": 31, "profile_image": "https://graph.facebook.com/1612576899027067/picture?type=large", "display_name": "Keith Yung", "link": "https://stackoverflow.com/users/5068576/keith-yung"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 902, "favorite_count": 0, "accepted_answer_id": 40254972, "answer_count": 2, "score": 0, "last_activity_date": 1477615985, "creation_date": 1477451746, "question_id": 40253103, "link": "https://stackoverflow.com/questions/40253103/how-to-use-watir-for-web-app-testing-on-java", "title": "How to use Watir for web app testing on Java?", "body": "<p>I've been assigned by our prof as the QA tester of our thesis web application and he wanted me to use Watir for testing the web application. But, I'm currently split as to how I'm supposed to approach this.</p>\n\n<p>I know Watir is using Ruby as it's main language, so should I study Ruby first?(I only have experience on Java, C++, and a little bit of Scala so far.) Or should I go straight to the documentations?</p>\n\n<p>We're using Eclipse as our default terminal for the web app.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "postgresql"], "answers": [{"comments": [{"owner": {"reputation": 920, "user_id": 5450134, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/d652a7b14b60443a47636cd4baef06ee?s=128&d=identicon&r=PG&f=1", "display_name": "Ninja Boy", "link": "https://stackoverflow.com/users/5450134/ninja-boy"}, "edited": false, "score": 1, "creation_date": 1477443717, "post_id": 40252059, "comment_id": 67766420, "body": "works! thanks. Eventually figured it out just now, for anyone who has the same problem, can actually visit this <a href=\"http://guides.rubyonrails.org/active_record_querying.html#calculations\" rel=\"nofollow noreferrer\">guides.rubyonrails.org/active_record_querying.html#calculati&zwnj;&#8203;ons</a>"}, {"owner": {"reputation": 1755, "user_id": 1877683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uttsA.jpg?s=128&g=1", "display_name": "C dot StrifeVII", "link": "https://stackoverflow.com/users/1877683/c-dot-strifevii"}, "reply_to_user": {"reputation": 920, "user_id": 5450134, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/d652a7b14b60443a47636cd4baef06ee?s=128&d=identicon&r=PG&f=1", "display_name": "Ninja Boy", "link": "https://stackoverflow.com/users/5450134/ninja-boy"}, "edited": false, "score": 0, "creation_date": 1477444221, "post_id": 40252059, "comment_id": 67766540, "body": "No prob glad I could help"}], "tags": [], "owner": {"reputation": 1755, "user_id": 1877683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uttsA.jpg?s=128&g=1", "display_name": "C dot StrifeVII", "link": "https://stackoverflow.com/users/1877683/c-dot-strifevii"}, "is_accepted": true, "score": 6, "last_activity_date": 1530745247, "last_edit_date": 1530745247, "creation_date": 1477443568, "answer_id": 40252059, "question_id": 40252040, "link": "https://stackoverflow.com/questions/40252040/select-a-record-which-has-the-highest-value-in-a-column-in-rails/40252059#40252059", "title": "Select a record which has the highest value in a column in Rails", "body": "<p>try doing this </p>\n\n<pre><code>Record.where(category: 'animal').maximum(\"value\")\n</code></pre>\n\n<p>or you could try this </p>\n\n<pre><code>Record.where(category: 'animal').order(\"value DESC\").first\n</code></pre>\n\n<p>or</p>\n\n<pre><code># 1\nRecord.where(category: :animal).order(value: :desc).first\n\n# 2\nRecord.where(category: :animal).order(:value).last\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 621, "user_id": 1690384, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/4187ec71a8ae5536ad9c319cb5535d14?s=128&d=identicon&r=PG", "display_name": "Junan Chakma", "link": "https://stackoverflow.com/users/1690384/junan-chakma"}, "is_accepted": false, "score": 3, "last_activity_date": 1477444171, "creation_date": 1477444171, "answer_id": 40252140, "question_id": 40252040, "link": "https://stackoverflow.com/questions/40252040/select-a-record-which-has-the-highest-value-in-a-column-in-rails/40252140#40252140", "title": "Select a record which has the highest value in a column in Rails", "body": "<pre><code>YourModelName.order(\"frequency DESC\").first\n</code></pre>\n"}], "owner": {"reputation": 920, "user_id": 5450134, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/d652a7b14b60443a47636cd4baef06ee?s=128&d=identicon&r=PG&f=1", "display_name": "Ninja Boy", "link": "https://stackoverflow.com/users/5450134/ninja-boy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3494, "favorite_count": 0, "accepted_answer_id": 40252059, "answer_count": 2, "score": 4, "last_activity_date": 1530745247, "creation_date": 1477443371, "question_id": 40252040, "link": "https://stackoverflow.com/questions/40252040/select-a-record-which-has-the-highest-value-in-a-column-in-rails", "title": "Select a record which has the highest value in a column in Rails", "body": "<p>I have a column called 'frequency' in my database. I want to select the records of a particular category in which frequency is more. Like there will be 5 records of same category but each may have different frequency. Out of all these 5 records, I want the record whose value in frequency is more.</p>\n\n<p>Say, </p>\n\n<p>record 1 frequency value = 10 <br>\nrecord 2 frequency value = 20 <br>\nrecord 3 frequency value = 30 <br>\nrecord 4 frequency value = 10 <br>\nrecord 5 frequency value = 50 <br>\nI want record 5 as my output. </p>\n\n<p>Thanks.</p>\n"}, {"tags": ["ruby"], "answers": [{"comments": [{"owner": {"reputation": 5770, "user_id": 2980246, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/hpOec.png?s=128&g=1", "display_name": "jayelm", "link": "https://stackoverflow.com/users/2980246/jayelm"}, "edited": false, "score": 1, "creation_date": 1477443012, "post_id": 40251967, "comment_id": 67766240, "body": "Not just <code>nil</code>, but <code>false</code> as well (the two values that evaluate to <code>false</code> in Ruby)"}, {"owner": {"reputation": 676, "user_id": 3160817, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/aef9f6709d882c445cbc37f87ab116e9?s=128&d=identicon&r=PG", "display_name": "filmnut", "link": "https://stackoverflow.com/users/3160817/filmnut"}, "edited": false, "score": 0, "creation_date": 1477445807, "post_id": 40251967, "comment_id": 67766941, "body": "Hrm. That makes perfect sense, but doesn&#39;t seem to match what I&#39;m seeing when I test this out.  That is, let&#39;s say that I change one line of the <code>initialize</code> method to instead be: <code>@state = state or &quot;TX&quot;</code>. Now let&#39;s say that I call <code>Class.new(&quot;something&quot;, &quot;1800 Wallaby Way&quot;, nil, nil, nil, nil)</code>.  After doing all of this, if I then call <code>puts</code> on <code>@state</code>, wouldn&#39;t you expect the output to be <code>TX</code>. I would, but that doesn&#39;t seem to be the case. Instead the output is blank, indicating that the <code>or</code> keyword is <i>not</i> taking effect.  My code: <a href=\"https://repl.it/EGO0/0\" rel=\"nofollow noreferrer\">repl.it/EGO0/0</a>"}, {"owner": {"reputation": 485, "user_id": 1626606, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/Ws3mq.jpg?s=128&g=1", "display_name": "iikorni", "link": "https://stackoverflow.com/users/1626606/iikorni"}, "edited": false, "score": 0, "creation_date": 1477447554, "post_id": 40251967, "comment_id": 67767349, "body": "It would seem this code is actually written improperly! Since <code>or</code> takes lower precedence than <code>||</code> in Ruby, it takes the value of <code>nil</code>, skipping the comparison entirely! Replacing it with <code>||</code> will produce the desired result."}, {"owner": {"reputation": 676, "user_id": 3160817, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/aef9f6709d882c445cbc37f87ab116e9?s=128&d=identicon&r=PG", "display_name": "filmnut", "link": "https://stackoverflow.com/users/3160817/filmnut"}, "edited": false, "score": 0, "creation_date": 1477450711, "post_id": 40251967, "comment_id": 67768059, "body": "Ah yes! Perfect. Thanks!"}], "tags": [], "owner": {"reputation": 485, "user_id": 1626606, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/Ws3mq.jpg?s=128&g=1", "display_name": "iikorni", "link": "https://stackoverflow.com/users/1626606/iikorni"}, "is_accepted": true, "score": 5, "last_activity_date": 1477447639, "last_edit_date": 1477447639, "creation_date": 1477442773, "answer_id": 40251967, "question_id": 40251926, "link": "https://stackoverflow.com/questions/40251926/using-rubys-or-keyword-when-creating-a-variable/40251967#40251967", "title": "Using Ruby&#39;s `or` Keyword When Creating a Variable", "body": "<p><strong>EDIT</strong>: It should be noted that the <code>or</code> keyword does not work in this scenario, but the intention is correct - using <code>||</code> instead of <code>or</code> in this example will produce the desired output.</p>\n\n<p>The <code>or</code> keyword in this code implies that if the parameter being assigned to the local variable (i.e. <code>kind</code> and <code>@kind</code> respectively) is <code>nil</code>, then the value of the local variable should be initialized to <code>''</code></p>\n\n<p>Another way to look at this - if I call <code>Class.new(\"something\", \"1800 Wallaby Way\", nil, nil, nil, nil)</code>, then the class will be initialized as such:</p>\n\n<pre><code>@kind = \"something\"\n@street_1 = \"1800 Wallaby Way\"\n@street_2 = ''\n@city = '\n@state = ''\n@postal_code = ''\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1477449608, "post_id": 40251978, "comment_id": 67767786, "body": "Try not to put spaces between method names and their arguments. It can cause big problems."}], "tags": [], "owner": {"reputation": 55, "user_id": 1588650, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/8b606607a4049c29a8d108b9d36d2179?s=128&d=identicon&r=PG", "display_name": "Kevin Fernandes", "link": "https://stackoverflow.com/users/1588650/kevin-fernandes"}, "is_accepted": false, "score": 0, "last_activity_date": 1477443149, "last_edit_date": 1477443149, "creation_date": 1477442871, "answer_id": 40251978, "question_id": 40251926, "link": "https://stackoverflow.com/questions/40251926/using-rubys-or-keyword-when-creating-a-variable/40251978#40251978", "title": "Using Ruby&#39;s `or` Keyword When Creating a Variable", "body": "<p>It is adding in the defaults if the you do not specify every variable when you are creating a new instance of what appears to be an \"address\" object.</p>\n\n<p>Eg. </p>\n\n<pre><code>x = Address.new ()\n\nx.kind == ''\n\n# evaluates to true \n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1477450711, "post_id": 40252856, "comment_id": 67768060, "body": "Good explanation, but it would be unusual to see #1 (which most Rubiest would regard as inferior to #2). Another option would be <code>@kind = kind ? kind : &#39;&#39;</code>. Though longer than the others, it may be more expressive."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1477451256, "post_id": 40252856, "comment_id": 67768215, "body": "I&#39;m not sure the ternary adds any significant meaning there, and in fact might have one wondering why it&#39;s so repetitive."}], "tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": false, "score": 3, "last_activity_date": 1477449729, "creation_date": 1477449729, "answer_id": 40252856, "question_id": 40251926, "link": "https://stackoverflow.com/questions/40251926/using-rubys-or-keyword-when-creating-a-variable/40252856#40252856", "title": "Using Ruby&#39;s `or` Keyword When Creating a Variable", "body": "<p>You've got three ways of fixing this. The first is using brackets to make the loose-binding <code>or</code> not lose its grip on the values:</p>\n\n<pre><code>@kind = (kind or '')\n</code></pre>\n\n<p>The second is to use the strongly-binding <code>||</code> equivalent operator:</p>\n\n<pre><code>@kind = kind || ''\n</code></pre>\n\n<p>The third option, and this is the best, is to <em>not care</em> and just deal:</p>\n\n<pre><code>@kind = kind.to_s\n</code></pre>\n\n<p>This way <code>nil</code> will be automatically converted to an empty string if that's the behaviour you want.</p>\n"}], "owner": {"reputation": 676, "user_id": 3160817, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/aef9f6709d882c445cbc37f87ab116e9?s=128&d=identicon&r=PG", "display_name": "filmnut", "link": "https://stackoverflow.com/users/3160817/filmnut"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "accepted_answer_id": 40251967, "answer_count": 3, "score": 1, "last_activity_date": 1477450189, "creation_date": 1477442444, "last_edit_date": 1477450189, "question_id": 40251926, "link": "https://stackoverflow.com/questions/40251926/using-rubys-or-keyword-when-creating-a-variable", "title": "Using Ruby&#39;s `or` Keyword When Creating a Variable", "body": "<p>I recently came across the following Ruby code, which is confusing me:</p>\n\n<pre><code>def initialize(kind, street_1, street_2, city, state, postal_code)\n  @kind = kind or ''\n  @street_1 = street_1 or ''\n  @street_2 = street_2 or ''\n  @city = city or ''\n  @state = state or ''\n  @postal_code = postal_code or ''\nend\n</code></pre>\n\n<p>I don't understand what role <code>or</code> is playing in this code. Can someone please explain?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "session", "devise"], "answers": [{"tags": [], "owner": {"reputation": 474, "user_id": 5379362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38f95f8ddc8d16b7945bccd6ba76e00?s=128&d=identicon&r=PG&f=1", "display_name": "Fede Bonisconti", "link": "https://stackoverflow.com/users/5379362/fede-bonisconti"}, "is_accepted": true, "score": 1, "last_activity_date": 1477454020, "creation_date": 1477454020, "answer_id": 40253460, "question_id": 40251770, "link": "https://stackoverflow.com/questions/40251770/devise-session-controller-custom-routing-on-failure/40253460#40253460", "title": "Devise Session Controller. Custom routing on failure", "body": "<p>You can override recall value on auth_option method to redirect to another route on failure.</p>\n\n<pre><code>def auth_option\n  { scope: resource_name, recall: \"#{controller_path}#another_new_path\" }\nend\n</code></pre>\n"}], "owner": {"reputation": 6503, "user_id": 5650878, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/xh7BI.png?s=128&g=1", "display_name": "Bitwise", "link": "https://stackoverflow.com/users/5650878/bitwise"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 212, "favorite_count": 0, "accepted_answer_id": 40253460, "answer_count": 1, "score": 0, "last_activity_date": 1477454020, "creation_date": 1477441224, "question_id": 40251770, "link": "https://stackoverflow.com/questions/40251770/devise-session-controller-custom-routing-on-failure", "title": "Devise Session Controller. Custom routing on failure", "body": "<p>Right now I'm extending the Devise sessions controller. Everything is working fine except that when the password is typed wrong or it can't find the user. it tries to redirect_to the sessions#new. I do not want that for my case I want it to redirect to a custom route because this is coming from a different view than the sessions new view. I know about <code>after_sign_in_path_for</code> but I'm not sure that is what I want because my particular case is the warden.authenticate! method. In the auth_options there is a recall hash. That is where I want to customize my route. Here is my sessions controller.</p>\n\n<h2>Session Controller</h2>\n\n<pre><code>    class SessionsController &lt; Devise::SessionsController\n  def create\n\n    super do |user|\n      if params[:user][:invitation_id].present?\n        invitation = Invitation.find(params[:user][:invitation_id])\n\n        if !user.accounts.exists?(id: invitation.account.id)\n          user.accounts &lt;&lt; invitation.account\n          flash[:tip_off] = \"You now have access to your project \\\"#{invitation.account.name}\\\"\"\n        else\n          flash[:tip_off] = \"You are already a member of #{invitation.account.name}\"\n        end\n\n        cookies[:account_id] = invitation.account.id\n        invitation.destroy\n        user.save\n      end\n    end\n  end\nend\n</code></pre>\n\n<p>As I stated before this works fine I just need a custom routes upon failure of password or email. Right now it goes to sessions#new, that does not work for my case. Any help would be great! Thanks</p>\n"}, {"tags": ["ruby", "optimization"], "comments": [{"owner": {"reputation": 21, "user_id": 6788804, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/0daf20bbf7470c6ca9bfd53183600479?s=128&d=identicon&r=PG&f=1", "display_name": "Taras Tataryn", "link": "https://stackoverflow.com/users/6788804/taras-tataryn"}, "edited": false, "score": 0, "creation_date": 1477441377, "post_id": 40251749, "comment_id": 67765868, "body": "Or if you see a better way to formulate this code, by all means let me know. I&#39;m trying to be as efficient as possible with this code."}, {"owner": {"reputation": 35578, "user_id": 3000206, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/BK1fo.jpg?s=128&g=1", "display_name": "Carcigenicate", "link": "https://stackoverflow.com/users/3000206/carcigenicate"}, "edited": false, "score": 4, "creation_date": 1477443200, "post_id": 40251749, "comment_id": 67766297, "body": "You shouldn&#39;t be worrying about code size unless you&#39;re golfing. Worry more about it&#39;s readability."}, {"owner": {"reputation": 4554, "user_id": 192221, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/38504ff52422b72b239a7b05ef0ccaae?s=128&d=identicon&r=PG", "display_name": "kristianp", "link": "https://stackoverflow.com/users/192221/kristianp"}, "edited": false, "score": 0, "creation_date": 1477445258, "post_id": 40251749, "comment_id": 67766801, "body": "Are you aware of <a href=\"http://codegolf.stackexchange.com/\">codegolf.stackexchange.com</a> ?  That may be a better place to ask this type of question."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1477450008, "post_id": 40251749, "comment_id": 67767882, "body": "Do try and avoid doing things like <code>@a, i = [], 0</code> where it&#39;s not clear what&#39;s being assigned to what. Ruby has ways of expanding things on you when you&#39;re not paying attention: <code>a, b = c</code> is valid code and might assign to both <code>a</code> and <code>b</code>. Or just <code>a</code>. It <i>depends</i>. Also give these things actual names. <code>@a</code> is utterly meaningless, same with <code>i</code>. If this variable is being used on more than a few lines of code, give it meaning."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1477450095, "post_id": 40251749, "comment_id": 67767899, "body": "Ruby also strongly encourages people to use names like <code>order_cost</code> with no capital letters. Class names are like <code>OrderCost</code> and constants <code>ORDER_COST</code>."}], "answers": [{"tags": [], "owner": {"reputation": 642, "user_id": 4745520, "user_type": "registered", "accept_rate": 29, "profile_image": "https://graph.facebook.com/10200391026893649/picture?type=large", "display_name": "Jeff", "link": "https://stackoverflow.com/users/4745520/jeff"}, "is_accepted": true, "score": 0, "last_activity_date": 1477442354, "creation_date": 1477442354, "answer_id": 40251907, "question_id": 40251749, "link": "https://stackoverflow.com/questions/40251749/ruby-code-cutting-few-lines-as-possible/40251907#40251907", "title": "Ruby Code-Cutting (few lines as possible)", "body": "<p>I did my best here but your initialize method didnt make any logical sense to me. Hopefully this can at least guide you into the right direction. <strong>Disclaimer</strong>: None of this was tested and I wrote it off of what methods I could remember.</p>\n\n<pre><code>class Order\ndef initialize(name)\n    @a, i = [], 0\n    File.readlines(name) do |line|\n        # This while loop makes no sense to me\n        # Seems like a surefire infiniteloop because if id = 3, it is always true\n        # Maybe you meant to do an operator like == for comparison\n        while(id = line)\n            j, price = 0, line\n            while j &lt; @a.length\n                @a[j].quantity += 1  if(@a[j].id.eql?(id.to_i))\n            end\n        else\n            @a[i] = new Article(id, price, 1)\n            i += 1\n        end \n    end \nend\n\ndef orderCost\n    # I would probably make this two lines because its unreadable\n    (@a.inject(0) { |accum, e| accum + (e.price * e.quantity) } * 1.07) + 2.99\nend\n\ndef displaySelectArticles\n    min, max = @a[0], @a[0]\n    @a.each do |e|\n        min = e if min.cost &gt; e.cost\n        max = e if max.cost &lt; e.cost\n        sum += e.cost * e.quantity\n        q += e.quantity # I have no idea how you got a q\n    end\n    puts \"Min: #{min.cost} | Max: #{max.cost} | Avg: #{Float(sum)/q}\"\nend \nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": false, "score": -1, "last_activity_date": 1477450835, "creation_date": 1477450835, "answer_id": 40252980, "question_id": 40251749, "link": "https://stackoverflow.com/questions/40251749/ruby-code-cutting-few-lines-as-possible/40252980#40252980", "title": "Ruby Code-Cutting (few lines as possible)", "body": "<p>The Article class needs serious attention because of that jumble of junk where\nthree variables are assigned at the same time. Split that out into three very\nsimple assignments:</p>\n\n<pre><code>class Article\n  attr_accessor :id, :price, :quantity\n\n  def  initialize(id, price, quantity)\n    @id = id\n    @price = price.to_f\n    @quantity = quantity.to_i\n  end \nend\n</code></pre>\n\n<p>Using <code>x.to_f</code> is preferable to <code>Float(x)</code>, it's a gentler approach to\nconverting. If you're doing financial calculations I'd <strong>stronly</strong> encourage\nyou to use something like <a href=\"http://ruby-doc.org/stdlib-2.3.1/libdoc/bigdecimal/rdoc/BigDecimal.html\" rel=\"nofollow\">BigDecimal</a>\nas floating point numbers are notoriously problematic. $1.99 has a way of\nbecoming $1.989999423489 which when rounded can appear to \"lose\" a cent here\nor there. The BigDecimal class avoids this by representing values as exact.</p>\n\n<p>The rest is basically attacking the problem of not using <a href=\"https://ruby-doc.org/core-2.3.1/Enumerable.html\" rel=\"nofollow\"><code>Enumerable</code></a>\neffectively and instead writing your own routines to do what should be simple:</p>\n\n<pre><code>class Order\n  def initialize(name)\n    @items = [ ]\n\n    File.open(name, \"r\") do |input|\n      while(id = input.gets.chomp)\n        price = input.gets.chomp\n\n        # find locates the first matching thing in the array, if any.\n        existing = @items.find do |item|\n          item.id == id\n        end\n\n        if (existing)\n          existing.quantity += 1\n        else\n          items &lt;&lt; Article.new(id, price, 1)\n        end\n     end \n  end\n\n  def item_cost\n    # Inject is good at iterating and accumulating\n    @items.inject(0.0) do |sum, item|\n      sum + item.price * item.quantity\n    end\n  end\n\n  def item_count\n    @items.inject(0) do |sum, item|\n      sum + item.quantity\n    end\n  end\n\n  def order_cost\n    item_cost * 1.07 + 2.99\n  end\n\n  def display_select_articles\n    # minmax_by finds min and max entries based on arbitrary criteria\n    min, max = @items.minmax_by { |item| item.price }\n\n    sum = item_cost\n    count = item_count\n\n    puts \"Min: %f | Max: %f | Avg: %f\" % [\n      min ? min.cost : 0.0,\n      max ? max.cost : 0.0,\n      count &gt; 0.0 ? (sum / count) : 0.0\n    ]\n  end \nend\n</code></pre>\n\n<p>Whenever possible go with the grain, and that means using Ruby's structures and their native methods. The more you deviate from this the more code you'll have to write, and the uglier your code will get. Sometimes you're solving a difficult problem and you have no choice, but this example is not one of those cases. Everything here is simpler if you just do it the Ruby way.</p>\n"}], "owner": {"reputation": 21, "user_id": 6788804, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/0daf20bbf7470c6ca9bfd53183600479?s=128&d=identicon&r=PG&f=1", "display_name": "Taras Tataryn", "link": "https://stackoverflow.com/users/6788804/taras-tataryn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "accepted_answer_id": 40251907, "answer_count": 2, "score": -1, "last_activity_date": 1477450835, "creation_date": 1477441078, "last_edit_date": 1477450120, "question_id": 40251749, "link": "https://stackoverflow.com/questions/40251749/ruby-code-cutting-few-lines-as-possible", "title": "Ruby Code-Cutting (few lines as possible)", "body": "<p>So the code below is what I'm trying to cut down to as few lines as possible. Any other ruby tricks out there I could use to shorten it? I appreciate all help anyone can offer.    </p>\n\n<p>Article Class:</p>\n\n<pre><code>class Article\n    attr_accessor :id, :price, :quantity\n    def  initialize(id, price, quantity)\n        @id, @price, @quantity = id, Float(price), quantity.to_i\n    end \nend\n</code></pre>\n\n<p>Order Class:</p>\n\n<pre><code>class Order\n    def initialize(name)\n        @a, i = [], 0\n        input = File.open(name, \"r\")\n        while(id = input.gets.chomp)\n            j, price = 0, input.gets.chomp\n            while(j&lt;@a.length)\n                if(@a[j].id.eql?(id.to_i))\n                    @a[j].quantity += 1     \n                end \n            end\n            else\n                @a[i] = new Article(id,price,1)\n                i+=1\n            end \n         end \n     end\n\n    def orderCost\n        sum = 0\n        @a.each { |e| sum+=(e.price * e.quantity)}\n        sum = ((sum*1.07) + 2.99)\n    end\n\n    def displaySelectArticles\n        min, max = @a[0], @a[0]\n        @a.each do |e|\n            if(min.cost &gt; e.cost)\n                min = e\n            end\n            if(max.cost &lt; e.cost)\n                max = e\n            end\n            sum += e.cost*e.quantity and q += e.quantity\n        end\n        puts \"Min: #{min.cost} | Max: #{max.cost} | Avg: #{Float(sum)/q}\"\n    end \nend\n</code></pre>\n"}, {"tags": ["java", "python", "ruby", "coldfusion", "cfml"], "comments": [{"owner": {"reputation": 28384, "user_id": 104223, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/18ee4.png?s=128&g=1", "display_name": "Leigh", "link": "https://stackoverflow.com/users/104223/leigh"}, "edited": false, "score": 0, "creation_date": 1477444636, "post_id": 40251616, "comment_id": 67766639, "body": "<i>run Python code on a Coldfusion server</i> Out of curiosity, is it something that could/should be done in pure cfml?"}, {"owner": {"reputation": 57, "user_id": 4400264, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b46d48a5dc4014cb6fc49872f2811c76?s=128&d=identicon&r=PG&f=1", "display_name": "username", "link": "https://stackoverflow.com/users/4400264/username"}, "reply_to_user": {"reputation": 28384, "user_id": 104223, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/18ee4.png?s=128&g=1", "display_name": "Leigh", "link": "https://stackoverflow.com/users/104223/leigh"}, "edited": false, "score": 0, "creation_date": 1477485767, "post_id": 40251616, "comment_id": 67785531, "body": "This is more of an exercise than anything else. I would like to have the ability to access python libraries that don&#39;t exist in CFML."}], "answers": [{"comments": [{"owner": {"reputation": 57, "user_id": 4400264, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b46d48a5dc4014cb6fc49872f2811c76?s=128&d=identicon&r=PG&f=1", "display_name": "username", "link": "https://stackoverflow.com/users/4400264/username"}, "edited": false, "score": 0, "creation_date": 1477485834, "post_id": 40251798, "comment_id": 67785581, "body": "I edited the question to show where it wasn&#39;t working. I&#39;m not clear how the ScriptEngine class fits into this."}, {"owner": {"reputation": 28384, "user_id": 104223, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/18ee4.png?s=128&g=1", "display_name": "Leigh", "link": "https://stackoverflow.com/users/104223/leigh"}, "reply_to_user": {"reputation": 57, "user_id": 4400264, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b46d48a5dc4014cb6fc49872f2811c76?s=128&d=identicon&r=PG&f=1", "display_name": "username", "link": "https://stackoverflow.com/users/4400264/username"}, "edited": false, "score": 0, "creation_date": 1477486426, "post_id": 40251798, "comment_id": 67786009, "body": "If <code>engine</code> is not defined, that means <a href=\"http://docs.oracle.com/javase/7/docs/api/javax/script/ScriptEngineManager.html#getEngineByName(java.lang.String)\" rel=\"nofollow noreferrer\">the python engine was not found</a>.  Does the original example work for you in java?"}, {"owner": {"reputation": 57, "user_id": 4400264, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b46d48a5dc4014cb6fc49872f2811c76?s=128&d=identicon&r=PG&f=1", "display_name": "username", "link": "https://stackoverflow.com/users/4400264/username"}, "edited": false, "score": 0, "creation_date": 1477487958, "post_id": 40251798, "comment_id": 67787111, "body": "jython is working ok. I added cfdumps of ScriptEngine and ScriptEngineManager."}, {"owner": {"reputation": 28384, "user_id": 104223, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/18ee4.png?s=128&g=1", "display_name": "Leigh", "link": "https://stackoverflow.com/users/104223/leigh"}, "reply_to_user": {"reputation": 57, "user_id": 4400264, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b46d48a5dc4014cb6fc49872f2811c76?s=128&d=identicon&r=PG&f=1", "display_name": "username", "link": "https://stackoverflow.com/users/4400264/username"}, "edited": false, "score": 0, "creation_date": 1477488722, "post_id": 40251798, "comment_id": 67787749, "body": "(Edit) <i>jython is working ok</i> Not necessarily. The <code>javax.script.*</code> are core libraries, ie always exist. Just because those classes are working, does not mean Jython is working. It is a custom library which has to be loaded explicitly. If you are getting undefined, then it is not loaded/working."}, {"owner": {"reputation": 28384, "user_id": 104223, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/18ee4.png?s=128&g=1", "display_name": "Leigh", "link": "https://stackoverflow.com/users/104223/leigh"}, "reply_to_user": {"reputation": 57, "user_id": 4400264, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b46d48a5dc4014cb6fc49872f2811c76?s=128&d=identicon&r=PG&f=1", "display_name": "username", "link": "https://stackoverflow.com/users/4400264/username"}, "edited": false, "score": 0, "creation_date": 1477489185, "post_id": 40251798, "comment_id": 67788146, "body": "Did you add the jython jar to the CF class path? ACF supports dynamic jar loading via Application.cfc / this.javaSettings and IIRC Lucee supports it via createObject()."}, {"owner": {"reputation": 57, "user_id": 4400264, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b46d48a5dc4014cb6fc49872f2811c76?s=128&d=identicon&r=PG&f=1", "display_name": "username", "link": "https://stackoverflow.com/users/4400264/username"}, "edited": false, "score": 2, "creation_date": 1477493376, "post_id": 40251798, "comment_id": 67791278, "body": "Tested Jython and looks good. Can create org.python.util.PythonInterpreter in CFML."}, {"owner": {"reputation": 28384, "user_id": 104223, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/18ee4.png?s=128&g=1", "display_name": "Leigh", "link": "https://stackoverflow.com/users/104223/leigh"}, "reply_to_user": {"reputation": 57, "user_id": 4400264, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b46d48a5dc4014cb6fc49872f2811c76?s=128&d=identicon&r=PG&f=1", "display_name": "username", "link": "https://stackoverflow.com/users/4400264/username"}, "edited": false, "score": 0, "creation_date": 1477494788, "post_id": 40251798, "comment_id": 67792361, "body": "Weird. FWIW, I just tested your code and get the same result with jython-standalone-2.7.0.jar. It works from Eclipse, but for some reason the same code does not load the engine in ACF. The problem is not the basic code, since using <code>getEngineByName(&quot;js&quot;)</code> works fine with JRE 1.8. Seems like something is not being initialized when you use it from CF. Still looking around..."}, {"owner": {"reputation": 28384, "user_id": 104223, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/18ee4.png?s=128&g=1", "display_name": "Leigh", "link": "https://stackoverflow.com/users/104223/leigh"}, "reply_to_user": {"reputation": 57, "user_id": 4400264, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b46d48a5dc4014cb6fc49872f2811c76?s=128&d=identicon&r=PG&f=1", "display_name": "username", "link": "https://stackoverflow.com/users/4400264/username"}, "edited": false, "score": 0, "creation_date": 1477499609, "post_id": 40251798, "comment_id": 67795478, "body": "See updated answer. Summary: It works if a) jar is placed in web-inf\\lib OR b) you register it with the ScriptEngineManager (not sure why that extra step is needed in CF, but not Eclipse)."}, {"owner": {"reputation": 28384, "user_id": 104223, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/18ee4.png?s=128&g=1", "display_name": "Leigh", "link": "https://stackoverflow.com/users/104223/leigh"}, "reply_to_user": {"reputation": 12994, "user_id": 1636917, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/bae310462ddf9e54ef84d7051b018457?s=128&d=identicon&r=PG", "display_name": "Miguel-F", "link": "https://stackoverflow.com/users/1636917/miguel-f"}, "edited": false, "score": 0, "creation_date": 1477508341, "post_id": 40251798, "comment_id": 67800347, "body": "@Miguel-F - Thanks. Still not sure why you have to register it manually in CF specifically :/ It almost defeats the purpose of using ScriptEngineManager. Unless maybe it does something extra? Otherwise, it would be less code to just create a PyScriptEngineFactory and call <code>engine = factory.getScriptEngine();</code>."}], "tags": [], "owner": {"reputation": 28384, "user_id": 104223, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/18ee4.png?s=128&g=1", "display_name": "Leigh", "link": "https://stackoverflow.com/users/104223/leigh"}, "is_accepted": true, "score": 2, "last_activity_date": 1477500120, "last_edit_date": 1495535656, "creation_date": 1477441475, "answer_id": 40251798, "question_id": 40251616, "link": "https://stackoverflow.com/questions/40251616/java-and-jsr-223-to-run-python-or-ruby-code-on-a-coldfusion-server/40251798#40251798", "title": "Java and JSR-223 to run Python (or Ruby) code on a Coldfusion server", "body": "<p>The keyword <code>new</code> invokes the class constructor. ColdFusion does not support <code>new</code> with java objects. Instead, use the <a href=\"http://help.adobe.com/en_US/ColdFusion/10.0/Developing/WSc3ff6d0ea77859461172e0811cbec14231-7fdd.html#WSA2304DF9-11E3-4e19-BA9A-3B12B0D6FA03\" rel=\"nofollow noreferrer\">psuedo-method init()</a>:</p>\n\n<blockquote>\n  <p>The init method is not a method of the object, but a ColdFusion\n  identifier that calls the new function on the class constructor.</p>\n</blockquote>\n\n<p>A <em>literal</em> translation of that code is to chain the calls. Invoke init() first, to create a new instance. Then call getEngineByName() on that instance:</p>\n\n<pre><code>engine = createObject(\"java\", \"javax.script.ScriptEngineManager\").init().getEngineByName(\"python\");\n</code></pre>\n\n<p>Though for better readability, you may want to break it up:</p>\n\n<pre><code>ScriptEngineManager = createObject(\"java\", \"javax.script.ScriptEngineManager\").init();\nengine = ScriptEngineManager.getEngineByName(\"python\");\n</code></pre>\n\n<p>As an aside, in this <em>specific</em> case, you can technically omit the call to <code>init()</code>.  ColdFusion will automatically invoke the no-arg constructor as soon as you call getEngineByName():</p>\n\n<blockquote>\n  <p>...If you call a public non-static method on the object without first\n  calling the init method, ColdFusion makes an implicit call to the\n  default constructor.</p>\n</blockquote>\n\n<p><strong>Update based on comments:</strong></p>\n\n<p>If <code>engine</code> is not defined, that means the \"python\" engine was not found. <strike>Be sure you have <a href=\"https://stackoverflow.com/questions/2671768/calling-python-from-java-through-scripting-engine-jython\">added the the jython jar</a> file to the CF class path (or loaded it via <code>this.javaSettings</code> in your Application.cfc). Once it is registered, the code should work correctly.</strike> For some reason it does not work if you load the jar dynamically through ACF's <a href=\"https://helpx.adobe.com/coldfusion/developing-applications/using-web-elements-and-external-objects/integrating-jee-and-java-elements-in-cfml-applications/enhanced-java-integration-in-coldfusion.html\" rel=\"nofollow noreferrer\">this.javaSettings</a>. However, it works fine if you place the jython jar in <code>WEB-INF\\lib</code> and restart CF. Try adding the jar to the physical CF class path, rather than loading it dynamically and it should work correctly.</p>\n\n<p>It also works from CF if you manually register the engine first (see below). Not sure why that extra step is necessary when ScriptEngineManager is invoked in CF, but not from Eclipse. </p>\n\n<pre><code>ScriptEngineManager = createObject(\"java\", \"javax.script.ScriptEngineManager\").init();\nfactory = createObject(\"java\", \"org.python.jsr223.PyScriptEngineFactory\").init();\nScriptEngineManager.registerEngineName(\"python\", factory);\nengine = ScriptEngineManager.getEngineByName(\"python\");\n// ...\n</code></pre>\n\n<blockquote>\n  <p>How does the other class, ScriptEngine fit in with this?</p>\n</blockquote>\n\n<p>Unlike CF, Java is strongly typed. That means when you declare a variable, you must also declare its type (or class). The original code declares the <code>engine</code> variable as an instance of the <code>ScriptEngine</code> class. Since CF is weakly typed, that is not necessary. Just declare the variable name as usual. The <a href=\"http://docs.oracle.com/javase/7/docs/api/javax/script/ScriptEngineManager.html#getEngineByName(java.lang.String)\" rel=\"nofollow noreferrer\">getEngineByName() method</a> automatically returns a <code>ScriptEngine</code> object (by the definition in the API).</p>\n"}, {"comments": [{"owner": {"reputation": 28384, "user_id": 104223, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/18ee4.png?s=128&g=1", "display_name": "Leigh", "link": "https://stackoverflow.com/users/104223/leigh"}, "edited": false, "score": 0, "creation_date": 1477507702, "post_id": 40269021, "comment_id": 67800006, "body": "Thanks for posting the working Lucee code.  RE: <i>originally put it in the same folder...</i>. You should be able to put jar files anywhere that is accessible to the CF engine. Maybe you forgot to specify the full path to the jar file in createObject()?"}, {"owner": {"reputation": 57, "user_id": 4400264, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b46d48a5dc4014cb6fc49872f2811c76?s=128&d=identicon&r=PG&f=1", "display_name": "username", "link": "https://stackoverflow.com/users/4400264/username"}, "reply_to_user": {"reputation": 28384, "user_id": 104223, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/18ee4.png?s=128&g=1", "display_name": "Leigh", "link": "https://stackoverflow.com/users/104223/leigh"}, "edited": false, "score": 0, "creation_date": 1477510414, "post_id": 40269021, "comment_id": 67801417, "body": "That could be it. I didn&#39;t specify the full path in createObject, however the initial object creation still worked."}, {"owner": {"reputation": 28384, "user_id": 104223, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/18ee4.png?s=128&g=1", "display_name": "Leigh", "link": "https://stackoverflow.com/users/104223/leigh"}, "edited": false, "score": 0, "creation_date": 1477517092, "post_id": 40269021, "comment_id": 67804719, "body": "Yes, any of the <code>javax.script.*</code> classes would always work. That lib is bundled with the JRE and does not require any extra jars. For custom lib&#39;s, like jython, it is a good to specify a full path to the jar, even if it is not required. Then you do not have to guess how ACF/Lucee resolves the relative path. If portability is a concern, just use ExpandPath(&quot;./jython-standalone-2.7.0.jar&quot;)."}], "tags": [], "owner": {"reputation": 57, "user_id": 4400264, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b46d48a5dc4014cb6fc49872f2811c76?s=128&d=identicon&r=PG&f=1", "display_name": "username", "link": "https://stackoverflow.com/users/4400264/username"}, "is_accepted": false, "score": 1, "last_activity_date": 1477504355, "creation_date": 1477504355, "answer_id": 40269021, "question_id": 40251616, "link": "https://stackoverflow.com/questions/40251616/java-and-jsr-223-to-run-python-or-ruby-code-on-a-coldfusion-server/40269021#40269021", "title": "Java and JSR-223 to run Python (or Ruby) code on a Coldfusion server", "body": "<p>I was able to get Leigh's example working in Lucee using the following code and putting the jar in the same directory as the .cfm file. I originally put it in the same folder as the Lucee jar but it was only partially working.</p>\n\n<pre><code>ScriptEngineManager = createObject('java','javax.script.ScriptEngineManager').init();\nfactory = createObject('java','org.python.jsr223.PyScriptEngineFactory','jython-standalone-2.7.0.jar').init();\nScriptEngineManager.registerEngineName(\"python\", factory);\nengine = ScriptEngineManager.getEngineByName(\"python\");\n\nengine.eval(\"x = 2 + 2\");\nx = engine.get(\"x\");\n\nwriteDump(x);\n</code></pre>\n"}], "owner": {"reputation": 57, "user_id": 4400264, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b46d48a5dc4014cb6fc49872f2811c76?s=128&d=identicon&r=PG&f=1", "display_name": "username", "link": "https://stackoverflow.com/users/4400264/username"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1070, "favorite_count": 3, "accepted_answer_id": 40251798, "answer_count": 2, "score": 3, "last_activity_date": 1477504355, "creation_date": 1477439983, "last_edit_date": 1477493237, "question_id": 40251616, "link": "https://stackoverflow.com/questions/40251616/java-and-jsr-223-to-run-python-or-ruby-code-on-a-coldfusion-server", "title": "Java and JSR-223 to run Python (or Ruby) code on a Coldfusion server", "body": "<p>I am attempting to run Python code on a Coldfusion server using Java. I am familiar with CFML but an absolute beginner with Java.</p>\n\n<p>I can instantiate the objects and list their methods ok, however I am getting stuck with different object types.</p>\n\n<p>The example I am trying to get to work in Coldfusion is</p>\n\n<pre><code>import javax.script.ScriptEngine;\nimport javax.script.ScriptEngineManager;\nimport javax.script.ScriptException;\n\npublic class JSR223 {\n\n    public static void main(String[] args) throws ScriptException {\n        ScriptEngine engine = new ScriptEngineManager().getEngineByName(\"python\");\n        engine.eval(\"import sys\");\n        engine.eval(\"print sys\");\n        engine.put(\"a\", 42);\n        engine.eval(\"print a\");\n        engine.eval(\"x = 2 + 2\");\n        Object x = engine.get(\"x\");\n        System.out.println(\"x: \" + x);\n    }\n}\n</code></pre>\n\n<p>What I have so far in CFML</p>\n\n<pre><code> ScriptEngine        = CreateObject(\"java\", \"javax.script.ScriptEngine\");\n ScriptEngineManager = CreateObject(\"java\", \"javax.script.ScriptEngineManager\");\n ScriptException     = CreateObject(\"java\", \"javax.script.ScriptException\");\n</code></pre>\n\n<p>The part I am stuck on</p>\n\n<pre><code> ScriptEngine engine = new ScriptEngineManager().getEngineByName(\"python\");\n</code></pre>\n\n<p>How can I create that in CFML?</p>\n\n<p>Edit:</p>\n\n<pre><code> engine = ScriptEngineManager.getEngineByName(\"python\");\n writeDump(engine);\n</code></pre>\n\n<p>Gives me an error: <em>variable [ENGINE] doesn't exist</em></p>\n\n<p>How does the other class, ScriptEngine fit in with this?</p>\n\n<p><a href=\"https://i.stack.imgur.com/ky4av.png\" rel=\"nofollow\"><img src=\"https://i.stack.imgur.com/ky4av.png\" alt=\"ScriptEngine\"></a>\n<a href=\"https://i.stack.imgur.com/6JiZ5.png\" rel=\"nofollow\"><img src=\"https://i.stack.imgur.com/6JiZ5.png\" alt=\"ScriptEngineManager\"></a></p>\n\n<p><strong>Update</strong></p>\n\n<p>I can load other Python classes so I think that the jar is installed correctly. ie with the following code I can dump the interp object.</p>\n\n<pre><code> interp = CreateObject(\"java\", \"org.python.util.PythonInterpreter\");\n</code></pre>\n\n<p>However even then calling a method gives me this error</p>\n\n<pre><code> java.lang.NullPointerException\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "forms", "heroku", "controller"], "comments": [{"owner": {"reputation": 128, "user_id": 4022958, "user_type": "registered", "accept_rate": 88, "profile_image": "https://graph.facebook.com/615085490/picture?type=large", "display_name": "frenciaj", "link": "https://stackoverflow.com/users/4022958/frenciaj"}, "edited": false, "score": 0, "creation_date": 1477439700, "post_id": 40251494, "comment_id": 67765496, "body": "This is even weirder, its random, sometimes it passes the param, and others dont..."}, {"owner": {"reputation": 2174, "user_id": 3448554, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/j7RcG.jpg?s=128&g=1", "display_name": "Kelsey Hannan", "link": "https://stackoverflow.com/users/3448554/kelsey-hannan"}, "edited": false, "score": 0, "creation_date": 1477439803, "post_id": 40251494, "comment_id": 67765518, "body": "Please post the error message.  First suspicion is that your Heroku database doesn&#39;t have any entries in it while your development database does, which is why you&#39;re not catching the bug.  Also, you&#39;re showing the params for the update action not create.  Try creating a new stock in development and show us the params for <code>create</code>ing a new stock, not <code>update</code>ing one that exists."}, {"owner": {"reputation": 128, "user_id": 4022958, "user_type": "registered", "accept_rate": 88, "profile_image": "https://graph.facebook.com/615085490/picture?type=large", "display_name": "frenciaj", "link": "https://stackoverflow.com/users/4022958/frenciaj"}, "reply_to_user": {"reputation": 2174, "user_id": 3448554, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/j7RcG.jpg?s=128&g=1", "display_name": "Kelsey Hannan", "link": "https://stackoverflow.com/users/3448554/kelsey-hannan"}, "edited": false, "score": 0, "creation_date": 1477441149, "post_id": 40251494, "comment_id": 67765811, "body": "&quot;Update&quot; is the name of the button, and its not related to the error, regarding the error, is NoMethodError (undefined method &quot;each&quot; for nil class) this is because the param is not passing, i tried a few more times, and one of this times passed the params and saved the change, so i dont thing its code related and its more heroku related..."}, {"owner": {"reputation": 128, "user_id": 4022958, "user_type": "registered", "accept_rate": 88, "profile_image": "https://graph.facebook.com/615085490/picture?type=large", "display_name": "frenciaj", "link": "https://stackoverflow.com/users/4022958/frenciaj"}, "reply_to_user": {"reputation": 2174, "user_id": 3448554, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/j7RcG.jpg?s=128&g=1", "display_name": "Kelsey Hannan", "link": "https://stackoverflow.com/users/3448554/kelsey-hannan"}, "edited": false, "score": 0, "creation_date": 1477441582, "post_id": 40251494, "comment_id": 67765907, "body": "@Kelseydh on the question you have on log from localhost passing the params to create the stock, as you can see both says &quot;update&quot; on the commit"}, {"owner": {"reputation": 2174, "user_id": 3448554, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/j7RcG.jpg?s=128&g=1", "display_name": "Kelsey Hannan", "link": "https://stackoverflow.com/users/3448554/kelsey-hannan"}, "edited": false, "score": 0, "creation_date": 1477442201, "post_id": 40251494, "comment_id": 67766037, "body": "Can you post the controller method you used to initialize the form, as I could see this being a problem if the form is initialized with <code>@stock</code> or <code>@item</code> being nil."}, {"owner": {"reputation": 1826, "user_id": 5150708, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/252ff188dc7377773468944f8794dc3f?s=128&d=identicon&r=PG&f=1", "display_name": "Santosh Sharma", "link": "https://stackoverflow.com/users/5150708/santosh-sharma"}, "edited": false, "score": 0, "creation_date": 1477457470, "post_id": 40251494, "comment_id": 67769765, "body": "try with <code>params[:data]</code>"}, {"owner": {"reputation": 128, "user_id": 4022958, "user_type": "registered", "accept_rate": 88, "profile_image": "https://graph.facebook.com/615085490/picture?type=large", "display_name": "frenciaj", "link": "https://stackoverflow.com/users/4022958/frenciaj"}, "reply_to_user": {"reputation": 2174, "user_id": 3448554, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/j7RcG.jpg?s=128&g=1", "display_name": "Kelsey Hannan", "link": "https://stackoverflow.com/users/3448554/kelsey-hannan"}, "edited": false, "score": 0, "creation_date": 1477492838, "post_id": 40251494, "comment_id": 67790837, "body": "@Kelseydh the one thats not initializing is data, since its not getting the params. I changed to [:data] and once again, the first try worked, the 2nd got me the same error because its not passing the params[:data]"}, {"owner": {"reputation": 2174, "user_id": 3448554, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/j7RcG.jpg?s=128&g=1", "display_name": "Kelsey Hannan", "link": "https://stackoverflow.com/users/3448554/kelsey-hannan"}, "edited": false, "score": 0, "creation_date": 1477576291, "post_id": 40251494, "comment_id": 67831110, "body": "Can you post your <code>new</code> controller action as if there is an error there it will affect your <code>create</code> action by messing with the params you receive."}, {"owner": {"reputation": 128, "user_id": 4022958, "user_type": "registered", "accept_rate": 88, "profile_image": "https://graph.facebook.com/615085490/picture?type=large", "display_name": "frenciaj", "link": "https://stackoverflow.com/users/4022958/frenciaj"}, "reply_to_user": {"reputation": 2174, "user_id": 3448554, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/j7RcG.jpg?s=128&g=1", "display_name": "Kelsey Hannan", "link": "https://stackoverflow.com/users/3448554/kelsey-hannan"}, "edited": false, "score": 0, "creation_date": 1477580397, "post_id": 40251494, "comment_id": 67834206, "body": "@Kelseydh i just posted it... do you know if there is a limit of characters a param would pass? because i, feeling that this may be the issue..."}, {"owner": {"reputation": 128, "user_id": 4022958, "user_type": "registered", "accept_rate": 88, "profile_image": "https://graph.facebook.com/615085490/picture?type=large", "display_name": "frenciaj", "link": "https://stackoverflow.com/users/4022958/frenciaj"}, "edited": false, "score": 0, "creation_date": 1477580775, "post_id": 40251494, "comment_id": 67834455, "body": "Ok, i found the issue, it has something to do with bootstrap table sortable class, if i press the title to put the names in order, then it will give me an error, if i dont, it will pass the params, so any idea why after sorting the param will vanish?"}], "answers": [{"tags": [], "owner": {"reputation": 128, "user_id": 4022958, "user_type": "registered", "accept_rate": 88, "profile_image": "https://graph.facebook.com/615085490/picture?type=large", "display_name": "frenciaj", "link": "https://stackoverflow.com/users/4022958/frenciaj"}, "is_accepted": true, "score": 0, "last_activity_date": 1477583490, "creation_date": 1477583490, "answer_id": 40289111, "question_id": 40251494, "link": "https://stackoverflow.com/questions/40251494/passing-a-param-works-locally-but-not-on-heroku/40289111#40289111", "title": "Passing a param works locally but not on Heroku", "body": "<p>The issue was fixed, not sure why, but bootstrap sortable table removes the params once is pressed, thats why it was acting randomly, i didnt notice that sometimes i pressed the button to sort them and others dont, once i figured this out, i remove the sortable class and make the order in the controller instead, and it actually looks better now, this is how the controller changed, in case needed:</p>\n\n<pre><code>def new\n@stock = Stock.new\n@items = Item.all.order(:nombre).order(:material).order(:marca).order(:espesor)\nend\n</code></pre>\n\n<p>That fixed it!\nthanks a lot for your help!!</p>\n"}], "owner": {"reputation": 128, "user_id": 4022958, "user_type": "registered", "accept_rate": 88, "profile_image": "https://graph.facebook.com/615085490/picture?type=large", "display_name": "frenciaj", "link": "https://stackoverflow.com/users/4022958/frenciaj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 119, "favorite_count": 0, "accepted_answer_id": 40289111, "answer_count": 1, "score": 0, "last_activity_date": 1477583490, "creation_date": 1477439023, "last_edit_date": 1477580340, "question_id": 40251494, "link": "https://stackoverflow.com/questions/40251494/passing-a-param-works-locally-but-not-on-heroku", "title": "Passing a param works locally but not on Heroku", "body": "<p>For some reason, Heroku doesnt pass the param, which gives me a NoMethod error.</p>\n\n<p>This is my controller create action:</p>\n\n<pre><code>def create\n  # @stock = Stock.new(params[:data].keys, params[:data].values)\n  @user = current_user\n  @data = params[\"data\"]\n  @data.each do |d|\n    @stock = Stock.create(my_params(d))\n    if @stock.altas == nil &amp;&amp; @stock.bajas == nil\n      @stock.destroy\n    else\n      @stock.save\n    end\n    @item = Item.find(@stock.item_id)\n    if @stock.altas != nil\n      @item.quantity =  @item.quantity + @stock.altas\n      @item.save\n    end\n    if @stock.bajas != nil\n      @item.quantity = @item.quantity - @stock.bajas\n      @item.save\n    end\n  end\n  # ItemMailer.reporte_diario_email(@user).deliver_now\n\n  redirect_to change_path, notice: 'Cambio en el inventario creado.'\n\nend\n</code></pre>\n\n<p>The form passes the params[\"data\"], this is my log on localhost, showing that the param passed:</p>\n\n<pre><code>Processing by StocksController#create as HTML\n Parameters: {\"utf8\"=&gt;\"\u2713\",    \"authenticity_token\"=&gt;\n\"BB/8I4Bypwa8aga8x7wCi6QWF2I9tPTuWbIitYpdpESCvOeFfPnDuaf7PjFYkjuzuz6N45t9phdbVZ1QNB3DeA==\", \"data\"=&gt;[{\"altas\"=&gt;\"\", \"bajas\"=&gt;\"\", \"item_id\"=&gt;\"1\"}, {\"altas\"=&gt;\"5\", \"bajas\"=&gt;\"\", \"item_id\"=&gt;\"5\"}, {\"altas\"=&gt;\"\", \"bajas\"=&gt;\"\", \"item_id\"=&gt;\"3\"}, \n{\"altas\"=&gt;\"2\", \"bajas\"=&gt;\"\", \"item_id\"=&gt;\"2\"}, {\"altas\"=&gt;\"\", \"bajas\"=&gt;\"\",\n\"item_id\"=&gt;\"4\"}], \"commit\"=&gt;\"Update\"}\n</code></pre>\n\n<p>And this is the log on heroku:</p>\n\n<pre><code>Processing by StocksController#create as HTML\n 2016-10-25T23:23:32.440253+00:00 app[web.1]:   Parameters: {\"utf8\"=&gt;\"\u2713\",   \"authenticity_token\"=&gt;\"wye0t6tc1BQV15WgQsoVsnvSuwMwA8bCT77JWRqsuRNikVSq+OGhed5oIGczCmdGHl0/f+Y4/KL/YVEOOrzv/g==\", \"commit\"=&gt;\"Update\"}\n</code></pre>\n\n<p>Finally, this is the form in case needed:</p>\n\n<pre><code> &lt;%= form_tag stocks_path  do %&gt;\n\n  &lt;% @items.each do |item| %&gt;\n  &lt;%= fields_for 'data[]', @stock do |stock| %&gt;\n\n  &lt;tr&gt;\n    &lt;td&gt;&lt;%= item.nombre %&gt;&lt;/td&gt;\n    &lt;td&gt;&lt;center&gt;&lt;%= item.material %&gt;&lt;/center&gt;&lt;/td&gt;\n    &lt;td&gt;&lt;center&gt;&lt;%= item.marca %&gt;&lt;/center&gt;&lt;/td&gt;\n    &lt;td&gt;&lt;center&gt;&lt;%= item.espesor %&gt; mm&lt;/center&gt;&lt;/td&gt;\n    &lt;td&gt;&lt;center&gt;&lt;%= stock.text_field :altas %&gt;&lt;/center&gt;&lt;/td&gt;\n    &lt;td&gt;&lt;center&gt;&lt;%= stock.text_field :bajas %&gt;&lt;/center&gt;&lt;/td&gt;\n    &lt;%= stock.hidden_field :item_id, :value =&gt; item.id %&gt;\n    &lt;% end %&gt;\n\n  &lt;% end %&gt;\n  &lt;/tr&gt;\n &lt;/table&gt;\n &lt;div class=\"form-group\"&gt;\n &lt;div class=\"col-sm-offset-3 col-sm-5\"&gt;\n &lt;%= submit_tag \"Update\", class: \"btn btn-primary\" %&gt;\n &lt;% end %&gt;\n</code></pre>\n\n<p>As you can see, it's not passing the params[\"data\"] at all, not sure why, since its the same code... any guesses?</p>\n\n<p>On this try, a few minutes later, the param was loaded:</p>\n\n<pre><code>  2016-10-25T23:53:24.972488+00:00 app[web.1]: Started POST \"/stocks\" for  65.34.251.106 at 2016-10-25 23:53:24 +0000\n  2016-10-25T23:53:24.980412+00:00 app[web.1]: Processing by  StocksController#create as HTML\n  2016-10-25T23:53:24.980989+00:00 app[web.1]:   Parameters: {\"utf8\"=&gt;\"\u2713\", \"authenticity_token\"=&gt;\"wye0t6tc1BQV15WgQsoVsnvSuwMwA8bCT77JWRqsuRNikVSq+OGhed5oIGczCmdGHl0/f+Y4/KL/YVEOOrzv/g==\", \"data\"=&gt;[{\"altas\"=&gt;\"\", \"bajas\"=&gt;\"\", \"item_id\"=&gt;\"48\"}, {\"altas\"=&gt;\"\", \"bajas\"=&gt;\"\", \"item_id\"=&gt;\"49\"}, {\"altas\"=&gt;\"\", \"bajas\"=&gt;\"\", \"item_id\"=&gt;\"50\"}, {\"altas\"=&gt;\"\", \"bajas\"=&gt;\"\", \"item_id\"=&gt;\"51\"}, {\"altas\"=&gt;\"\", \"bajas\"=&gt;\"\", \"item_id\"=&gt;\"52\"}, {\"altas\"=&gt;\"\", \"bajas\"=&gt;\"\", \"item_id\"=&gt;\"53\"}, {\"altas\"=&gt;\"\", \"bajas\"=&gt;\"\", \"item_id\"=&gt;\"54\"}, {\"altas\"=&gt;\"\", \"bajas\"=&gt;\"\", \"item_id\"=&gt;\"55\"}, {\"altas\"=&gt;\"\", \"bajas\"=&gt;\"\", \"item_id\"=&gt;\"56\"}, {\"altas\"=&gt;\"\", \"bajas\"=&gt;\"\", \"item_id\"=&gt;\"57\"}, {\"altas\"=&gt;\"\", \"bajas\"=&gt;\"\", \"item_id\"=&gt;\"58\"}, {\"altas\"=&gt;\"\", \"bajas\"=&gt;\"\", \"item_id\"=&gt;\"59\"}, {\"altas\"=&gt;\"\", \"bajas\"=&gt;\"\", \"item_id\"=&gt;\"60\"}, {\"altas\"=&gt;\"\", \"bajas\"=&gt;\"\", \"item_id\"=&gt;\"61\"}, {\"altas\"=&gt;\"\", \"bajas\"=&gt;\"\", \"item_id\"=&gt;\"62\"}, {\"altas\"=&gt;\"\", \"bajas\"=&gt;\"\", \"item_id\"=&gt;\"63\"}, {\"altas\"=&gt;\"\", \"bajas\"=&gt;\"\", \"item_id\"=&gt;\"64\"}, {\"altas\"=&gt;\"\", \"bajas\"=&gt;\"\", \"item_id\"=&gt;\"65\"}, {\"altas\"=&gt;\"\", \"bajas\"=&gt;\"\", \"item_id\"=&gt;\"66\"}, {\"altas\"=&gt;\"\", \"bajas\"=&gt;\"\", \"item_id\"=&gt;\"67\"}, {\"altas\"=&gt;\"\", \"bajas\"=&gt;\"\", \"item_id\"=&gt;\"68\"}, {\"altas\"=&gt;\"\", \"bajas\"=&gt;\"\", \"item_id\"=&gt;\"69\"}, {\"altas\"=&gt;\"\", \"bajas\"=&gt;\"\", \"item_id\"=&gt;\"70\"}, {\"altas\"=&gt;\"\", \"bajas\"=&gt;\"\", \"item_id\"=&gt;\"71\"}, {\"altas\"=&gt;\"\", \"bajas\"=&gt;\"\", \"item_id\"=&gt;\"72\"}, {\"altas\"=&gt;\"\", \"bajas\"=&gt;\"\", \"item_id\"=&gt;\"73\"}, {\"altas\"=&gt;\"\", \"bajas\"=&gt;\"\", \"item_id\"=&gt;\"74\"}, {\"altas\"=&gt;\"\", \"bajas\"=&gt;\"\", \"item_id\"=&gt;\"75\"}, {\"altas\"=&gt;\"\", \"bajas\"=&gt;\"\", \"item_id\"=&gt;\"76\"}, {\"altas\"=&gt;\"\", \"bajas\"=&gt;\"\", \"item_id\"=&gt;\"77\"}, {\"altas\"=&gt;\"\", \"bajas\"=&gt;\"\", \"item_id\"=&gt;\"78\"}, {\"altas\"=&gt;\"\", \"bajas\"=&gt;\"\", \"item_id\"=&gt;\"79\"}, {\"altas\"=&gt;\"\", \"bajas\"=&gt;\"\", \"item_id\"=&gt;\"80\"}, {\"altas\"=&gt;\"\", \"bajas\"=&gt;\"\", \"item_id\"=&gt;\"81\"}, {\"altas\"=&gt;\"\", \"bajas\"=&gt;\"\", \"item_id\"=&gt;\"82\"}, {\"altas\"=&gt;\"\", \"bajas\"=&gt;\"\", \"item_id\"=&gt;\"83\"}, {\"altas\"=&gt;\"\", \"bajas\"=&gt;\"\", \"item_id\"=&gt;\"84\"}, {\"altas\"=&gt;\"\", \"bajas\"=&gt;\"\", \"item_id\"=&gt;\"85\"}, {\"altas\"=&gt;\"\", \"bajas\"=&gt;\"\", \"item_id\"=&gt;\"2\"}, {\"altas\"=&gt;\"\", \"bajas\"=&gt;\"\", \"item_id\"=&gt;\"6\"}, {\"altas\"=&gt;\"\", \"bajas\"=&gt;\"\", \"item_id\"=&gt;\"3\"}, {\"altas\"=&gt;\"\", \"bajas\"=&gt;\"\", \"item_id\"=&gt;\"4\"}, {\"altas\"=&gt;\"\", \"bajas\"=&gt;\"\", \"item_id\"=&gt;\"1\"}, {\"altas\"=&gt;\"\", \"bajas\"=&gt;\"\", \"item_id\"=&gt;\"86\"}, {\"altas\"=&gt;\"\", \"bajas\"=&gt;\"\", \"item_id\"=&gt;\"7\"}, {\"altas\"=&gt;\"\", \"bajas\"=&gt;\"\", \"item_id\"=&gt;\"8\"}, {\"altas\"=&gt;\"\", \"bajas\"=&gt;\"\", \"item_id\"=&gt;\"9\"}, {\"altas\"=&gt;\"\", \"bajas\"=&gt;\"\", \"item_id\"=&gt;\"10\"}, {\"altas\"=&gt;\"\", \"bajas\"=&gt;\"\", \"item_id\"=&gt;\"11\"}, {\"altas\"=&gt;\"\", \"bajas\"=&gt;\"\", \"item_id\"=&gt;\"12\"}, {\"altas\"=&gt;\"\", \"bajas\"=&gt;\"\", \"item_id\"=&gt;\"13\"}, {\"altas\"=&gt;\"\", \"bajas\"=&gt;\"\", \"item_id\"=&gt;\"14\"}, {\"altas\"=&gt;\"\", \"bajas\"=&gt;\"\", \"item_id\"=&gt;\"15\"}, {\"altas\"=&gt;\"\", \"bajas\"=&gt;\"\", \"item_id\"=&gt;\"16\"}, {\"altas\"=&gt;\"\", \"bajas\"=&gt;\"\", \"item_id\"=&gt;\"17\"}, {\"altas\"=&gt;\"\", \"bajas\"=&gt;\"\", \"item_id\"=&gt;\"18\"}, {\"altas\"=&gt;\"\", \"bajas\"=&gt;\"\", \"item_id\"=&gt;\"19\"}, {\"altas\"=&gt;\"\", \"bajas\"=&gt;\"\", \"item_id\"=&gt;\"20\"}, {\"altas\"=&gt;\"\", \"bajas\"=&gt;\"\", \"item_id\"=&gt;\"21\"}, {\"altas\"=&gt;\"\", \"bajas\"=&gt;\"\", \"item_id\"=&gt;\"22\"}, {\"altas\"=&gt;\"\", \"bajas\"=&gt;\"\", \"item_id\"=&gt;\"23\"}, {\"altas\"=&gt;\"\", \"bajas\"=&gt;\"\", \"item_id\"=&gt;\"24\"}, {\"altas\"=&gt;\"\", \"bajas\"=&gt;\"\", \"item_id\"=&gt;\"25\"}, {\"altas\"=&gt;\"\", \"bajas\"=&gt;\"\", \"item_id\"=&gt;\"26\"}, {\"altas\"=&gt;\"\", \"bajas\"=&gt;\"\", \"item_id\"=&gt;\"27\"}, {\"altas\"=&gt;\"\", \"bajas\"=&gt;\"\", \"item_id\"=&gt;\"28\"}, {\"altas\"=&gt;\"\", \"bajas\"=&gt;\"\", \"item_id\"=&gt;\"29\"}, {\"altas\"=&gt;\"\", \"bajas\"=&gt;\"\", \"item_id\"=&gt;\"30\"}, {\"altas\"=&gt;\"\", \"bajas\"=&gt;\"\", \"item_id\"=&gt;\"31\"}, {\"altas\"=&gt;\"\", \"bajas\"=&gt;\"\", \"item_id\"=&gt;\"32\"}, {\"altas\"=&gt;\"\", \"bajas\"=&gt;\"\", \"item_id\"=&gt;\"33\"}, {\"altas\"=&gt;\"\", \"bajas\"=&gt;\"\", \"item_id\"=&gt;\"34\"}, {\"altas\"=&gt;\"\", \"bajas\"=&gt;\"\", \"item_id\"=&gt;\"35\"}, {\"altas\"=&gt;\"\", \"bajas\"=&gt;\"\", \"item_id\"=&gt;\"36\"}, {\"altas\"=&gt;\"\", \"bajas\"=&gt;\"\", \"item_id\"=&gt;\"37\"}, {\"altas\"=&gt;\"\", \"bajas\"=&gt;\"\", \"item_id\"=&gt;\"38\"}, {\"altas\"=&gt;\"\", \"bajas\"=&gt;\"\", \"item_id\"=&gt;\"39\"}, {\"altas\"=&gt;\"\", \"bajas\"=&gt;\"\", \"item_id\"=&gt;\"40\"}, {\"altas\"=&gt;\"\", \"bajas\"=&gt;\"\", \"item_id\"=&gt;\"41\"}, {\"altas\"=&gt;\"\", \"bajas\"=&gt;\"\", \"item_id\"=&gt;\"42\"}, {\"altas\"=&gt;\"\", \"bajas\"=&gt;\"\", \"item_id\"=&gt;\"43\"}, {\"altas\"=&gt;\"\", \"bajas\"=&gt;\"\", \"item_id\"=&gt;\"44\"}, {\"altas\"=&gt;\"\", \"bajas\"=&gt;\"1\", \"item_id\"=&gt;\"45\"}, {\"altas\"=&gt;\"\", \"bajas\"=&gt;\"\", \"item_id\"=&gt;\"46\"}, {\"altas\"=&gt;\"\", \"bajas\"=&gt;\"\", \"item_id\"=&gt;\"87\"}, {\"altas\"=&gt;\"\", \"bajas\"=&gt;\"\", \"item_id\"=&gt;\"88\"}, {\"altas\"=&gt;\"\", \"bajas\"=&gt;\"\", \"item_id\"=&gt;\"89\"}, {\"altas\"=&gt;\"\", \"bajas\"=&gt;\"\", \"item_id\"=&gt;\"90\"}, {\"altas\"=&gt;\"\", \"bajas\"=&gt;\"\", \"item_id\"=&gt;\"47\"}], \"commit\"=&gt;\"Update\"}\n  2016-10-25T23:53:27.334490+00:00 heroku[router]: at=info method=POST path=\"/stocks\" host=herrajestorino.herokuapp.com request_id=f1bda6e7-6fca-4150-8dae-056de5892991 fwd=\"65.34.251.106\" dyno=web.1 connect=1ms service=2507ms status=302 bytes=1028\n</code></pre>\n\n<p>This is the new action on the controller:</p>\n\n<pre><code>def new\n @stock = Stock.new\n @items = Item.all\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "mongodb", "osx-elcapitan"], "comments": [{"owner": {"reputation": 16451, "user_id": 429521, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/bab3aee31aebf9ee9cf0ab89ed513b2f?s=128&d=identicon&r=PG", "display_name": "Felipe Sabino", "link": "https://stackoverflow.com/users/429521/felipe-sabino"}, "edited": false, "score": 0, "creation_date": 1477525219, "post_id": 40250938, "comment_id": 67807274, "body": "_ Coworkers exported _ Does it happen only on your machine even with the same codebase?"}, {"owner": {"reputation": 7980, "user_id": 18213, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93ae946b112e25b123417b0392e739e9?s=128&d=identicon&r=PG", "display_name": "crftr", "link": "https://stackoverflow.com/users/18213/crftr"}, "edited": false, "score": 0, "creation_date": 1477721768, "post_id": 40250938, "comment_id": 67889914, "body": "Sounds like you may have enabled strict mode.  <a href=\"https://github.com/mongodb/mongo-ruby-driver/tree/1.6.2#strict-mode\" rel=\"nofollow noreferrer\">github.com/mongodb/mongo-ruby-driver/tree/1.6.2#strict-mode</a>"}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 7072059, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ef6d45461104e58f751ea108cb127a9?s=128&d=identicon&r=PG&f=1", "display_name": "stubblsc", "link": "https://stackoverflow.com/users/7072059/stubblsc"}, "edited": false, "score": 0, "creation_date": 1477440852, "post_id": 40250992, "comment_id": 67765745, "body": "Yes the collection does exist; it was restored from an export. It looks like it is trying to recreate the collections every time but, since it isn&#39;t doing this for my coworkers, i&#39;m attempting to figure out what might be wrong with the configuration I have that would throw that error code."}], "tags": [], "owner": {"reputation": 16451, "user_id": 429521, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/bab3aee31aebf9ee9cf0ab89ed513b2f?s=128&d=identicon&r=PG", "display_name": "Felipe Sabino", "link": "https://stackoverflow.com/users/429521/felipe-sabino"}, "is_accepted": false, "score": 1, "last_activity_date": 1477435786, "creation_date": 1477435786, "answer_id": 40250992, "question_id": 40250938, "link": "https://stackoverflow.com/questions/40250938/mongodb-rails3-2-database-command-create-failed/40250992#40250992", "title": "MongoDB Rails3.2 Database command &#39;create&#39; failed", "body": "<blockquote>\n  <p>Can't figure out why it's throwing this error</p>\n</blockquote>\n\n<p>It says pretty clear <code>errmsg: 'collection already exists'</code> so, did you check the database if the collections already exist? Also, did you check if your code is trying to create collections every time the app starts?</p>\n\n<p>You can connect to the database and execute</p>\n\n<pre><code>db.getCollectionNames()\n</code></pre>\n\n<p>This will show you the collections that had at least one document inserted into them, even if they are currently empty.</p>\n\n<p>If you want to delete them to run your app, you can do</p>\n\n<pre><code>db.myColl.drop()\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 7072059, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ef6d45461104e58f751ea108cb127a9?s=128&d=identicon&r=PG&f=1", "display_name": "stubblsc", "link": "https://stackoverflow.com/users/7072059/stubblsc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 391, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1477440459, "creation_date": 1477435487, "last_edit_date": 1477440459, "question_id": 40250938, "link": "https://stackoverflow.com/questions/40250938/mongodb-rails3-2-database-command-create-failed", "title": "MongoDB Rails3.2 Database command &#39;create&#39; failed", "body": "<p>I'm having trouble configuring a new MacBookPro to run a Rails 3.2 app.</p>\n\n<ul>\n<li>Rails 3.2.12</li>\n<li>MongoDB 2.6.9</li>\n<li>Ruby 1.9.3</li>\n</ul>\n\n<p><strong>Though I know that the code works, because it works for my coworkers</strong></p>\n\n<ul>\n<li>Coworkers exported the collections using <code>mongoexport</code></li>\n<li>I then loaded the collections with <code>mongorestore</code></li>\n</ul>\n\n<p>From the error, it appears that mongo is attempting to recreate the collections on every request... but I know that I have restored the exported collections. \nHere is the error:</p>\n\n<pre><code>Mongo::OperationFailure: Database command 'create' failed: (ok: '0.0'; errmsg: 'collection already exists'; code: '48').\nfrom /usr/local/var/rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/mongo-1.6.2/lib/mongo/db.rb:526:in `command'\nfrom /usr/local/var/rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/mongo-1.6.2/lib/mongo/db.rb:297:in `create_collection'\nfrom /usr/local/var/rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/mongoid-2.4.12/lib/mongoid/collections/master.rb:41:in `initialize'\nfrom /usr/local/var/rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/mongoid-2.4.12/lib/mongoid/collection.rb:127:in `new'\nfrom /usr/local/var/rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/mongoid-2.4.12/lib/mongoid/collection.rb:127:in `master'\nfrom /usr/local/var/rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/mongoid-2.4.12/lib/mongoid/collection.rb:42:in `find'\nfrom /usr/local/var/rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/mongoid-2.4.12/lib/mongoid/contexts/mongo.rb:93:in `count'\nfrom /usr/local/var/rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/mongoid-2.4.12/lib/mongoid/criteria.rb:45:in `count'\nfrom /usr/local/var/rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/mongoid-2.4.12/lib/mongoid/finders.rb:39:in `count'\nfrom (irb):1\nfrom /usr/local/var/rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/railties-3.2.12/lib/rails/commands/console.rb:47:in `start'\nfrom /usr/local/var/rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/railties-3.2.12/lib/rails/commands/console.rb:8:in `start'\nfrom /usr/local/var/rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/railties-3.2.12/lib/rails/commands.rb:41:in `&lt;top (required)&gt;'\nfrom script/rails:6:in `require'\nfrom script/rails:6:in `&lt;main&gt;'\n</code></pre>\n\n<p>We have attempted to only restore a subset of the collections, and also tried running a newer version of MongoDB server.  No luck, yet.\nWe're stumped.  Any help or suggestions would be welcomed.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec", "rspec-rails"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1477434443, "post_id": 40250689, "comment_id": 67764146, "body": "Why do you have a file called <code>object.rb</code>? <code>Object</code> is a core Ruby class and shouldn&#39;t have things arbitrarily added to it. Also not clear how JSON factors in here. If you&#39;re receiving parameters, Rails will parse them for you. If you&#39;re storing things in the database in JSON format you can use <code>serialize</code> to handle that for you."}, {"owner": {"reputation": 53, "user_id": 6003602, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153988434626532/picture?type=large", "display_name": "Horatio", "link": "https://stackoverflow.com/users/6003602/horatio"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1477437707, "post_id": 40250689, "comment_id": 67765021, "body": "it&#39;s the model and it&#39;s not actually named object.rb, I just changed it to make the question as generic as possible. Each Object has column attributes and one of the columns attributes is saved as a JSON object."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1477448997, "post_id": 40250689, "comment_id": 67767643, "body": "I think you&#39;ve gone too generic here, it&#39;s missing context."}], "answers": [{"tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": true, "score": 0, "last_activity_date": 1477435649, "creation_date": 1477435649, "answer_id": 40250968, "question_id": 40250689, "link": "https://stackoverflow.com/questions/40250689/rspec-rails-setting-a-value-in-a-json-object/40250968#40250968", "title": "Rspec Rails setting a value in a JSON object", "body": "<p>Your <code>object.features</code> needs to contain a JSON. Setup your object like this:</p>\n\n<pre><code>@saved_object = create(\n  :object, features: \"{ \\\"key\\\": { \\\"previously_purchased\\\": true} }\"\n)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 53, "user_id": 6003602, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153988434626532/picture?type=large", "display_name": "Horatio", "link": "https://stackoverflow.com/users/6003602/horatio"}, "edited": false, "score": 0, "creation_date": 1477492369, "post_id": 40252791, "comment_id": 67790496, "body": "I like this, it&#39;s really clean. I&#39;ll refactor my methods in a similar fashion."}], "tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": false, "score": 0, "last_activity_date": 1477449226, "creation_date": 1477449226, "answer_id": 40252791, "question_id": 40250689, "link": "https://stackoverflow.com/questions/40250689/rspec-rails-setting-a-value-in-a-json-object/40252791#40252791", "title": "Rspec Rails setting a value in a JSON object", "body": "<p>If a column's saved as JSON, you should be using <a href=\"http://api.rubyonrails.org/classes/ActiveRecord/AttributeMethods/Serialization/ClassMethods.html\" rel=\"nofollow\"><code>serialize</code></a>, that will take care of all the mess:</p>\n\n<pre><code>class MyModel &lt; ActiveRecord::Base\n  serialize :features, JSON\nend\n</code></pre>\n\n<p>Then you can manipulate this as any other structure without need for manually de or re serializing:</p>\n\n<pre><code>model = MyModel.new\nmodel.features = { key: { previously_purchased: true } }\nmodel.save\n</code></pre>\n\n<p>Then you can do this:</p>\n\n<pre><code>def previously_purchased?\n  if (self.features)\n    !!self.features.dig('key', 'previously_purchased')\n  else\n    false\n  end\nend\n</code></pre>\n\n<p>That uses double-negation (<code>!!</code>) to force that value as a boolean as well as the Ruby 2.3.1 <a href=\"https://ruby-doc.org/core-2.3.1/Hash.html#method-i-dig\" rel=\"nofollow\"><code>dig</code></a> method to navigate the hash.</p>\n"}], "owner": {"reputation": 53, "user_id": 6003602, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153988434626532/picture?type=large", "display_name": "Horatio", "link": "https://stackoverflow.com/users/6003602/horatio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 394, "favorite_count": 0, "accepted_answer_id": 40250968, "answer_count": 2, "score": 1, "last_activity_date": 1477449226, "creation_date": 1477434017, "question_id": 40250689, "link": "https://stackoverflow.com/questions/40250689/rspec-rails-setting-a-value-in-a-json-object", "title": "Rspec Rails setting a value in a JSON object", "body": "<p>I am writing a test for a method in my application_controller.rb and having trouble writing a proper test. The app is built on Rails 3.2.17.</p>\n\n<p><strong>object.rb</strong>  </p>\n\n<pre><code>def previously_purchased?\n  return JSON.parse(self.features)['key']['previously_purchased'] if self.features\nend\n</code></pre>\n\n<p><strong>application_controller.rb</strong>  </p>\n\n<pre><code>def include_bar?\n  url_param = params[:keyword] || cookies[:keyword]\n  @keyword_object = Object.find_by_url(url_param)\n    if @keyword_object.previously_purchased? &amp;&amp; !cookies[:prior_purchase] \n      @keyword_object = nil\n      return\n    end\nend\n</code></pre>\n\n<p><strong>factories.rb</strong>  </p>\n\n<pre><code>factory: object do\n  url_param 'TEST'\nend\n</code></pre>\n\n<p><strong>application_controller_spec.rb</strong>  </p>\n\n<pre><code>#this was the most recent test I tried\n\ncontext 'URL parameter keyword is present or keyword cookie is present' do\n  context 'object is displayed only to previously purchased' do\n    before(:each) do\n      @saved_object = create :object\n      @other_object = JSON.parse(@saved_object.features)\n      @other_object['key']['previously_purchased'] = true\n      @new_object = @other_object.to_json\n      request.cookies[:prior_purchase] = 'sub'\n      get :index\n   end\n\n    it 'finds object' do\n      expect(assigns(:keyword_object)).to be_nil\n    end\n  end\nend\n</code></pre>\n\n<p>this returns the following error  </p>\n\n<p><code>Failure/Error: @other_object = JSON.parse(@saved_nanobar.features)</code><br>\n<code>TypeError: no implicit conversion of nil into String</code>  </p>\n\n<p>which makes sense, in a way as I wasn't able to set the value previously_purchased to true.  </p>\n\n<p>I also tried </p>\n\n<pre><code>context 'object is displayed only to previously purchased' do\n  before(:each) do\n     @saved_object = create :object\n     @saved_object.features['key']['previously_purchased'] = true\n     request.cookies[:prior_purchase] = 'sub'\n     get :index\n  end\n\n  it 'finds object' do\n    expect(assigns(:keyword_object)).to be_nil\n  end\nend\n</code></pre>\n\n<p><code>Failure/Error: @saved_object.features['key']['previously_purchased'].to_json = true</code><br>\n<code>NoMethodError: undefined method</code>[ ]' for nil:NilClass`  </p>\n\n<p>Which I kind of understand but not well enough to fix my test. I may have left out an end or some other syntax in forming and writing my question, so kindly have patience with those.  </p>\n\n<p>This has been blocking me for to long and I'd appreciate any help. I was unable to find resources to help guide me further. If you need me to modify/ clarify my question or need more info, let me know and I'll get right on it.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1477434477, "post_id": 40250538, "comment_id": 67764154, "body": "It does look like a permissions problem. Are you sure everything in <code>.rvm</code> is writable by your user?"}, {"owner": {"reputation": 551, "user_id": 2671632, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/251e8effcb97f4df0ca82ed5006df4e9?s=128&d=identicon&r=PG", "display_name": "mGarsteck", "link": "https://stackoverflow.com/users/2671632/mgarsteck"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1477434676, "post_id": 40250538, "comment_id": 67764221, "body": "Whats the quick way to do that?"}, {"owner": {"reputation": 163, "user_id": 3217878, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d745b2f1b622a8d992735dea467de3fc?s=128&d=identicon&r=PG&f=1", "display_name": "gil.neo", "link": "https://stackoverflow.com/users/3217878/gil-neo"}, "edited": false, "score": 0, "creation_date": 1477437209, "post_id": 40250538, "comment_id": 67764916, "body": "ls -l would show you who&#39;s the owner of the file and the permissions."}, {"owner": {"reputation": 551, "user_id": 2671632, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/251e8effcb97f4df0ca82ed5006df4e9?s=128&d=identicon&r=PG", "display_name": "mGarsteck", "link": "https://stackoverflow.com/users/2671632/mgarsteck"}, "edited": false, "score": 0, "creation_date": 1477439087, "post_id": 40250538, "comment_id": 67765375, "body": "Ive changed the permissions on the files in the directory and the directory itself.  I still cannot access the file.  If I drop the file into terminal, it simply says access denied, even with sudo"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1477448919, "post_id": 40250538, "comment_id": 67767629, "body": "Usually <code>sudo chown -R matt ~&#47;.rvm</code> should do it."}], "owner": {"reputation": 551, "user_id": 2671632, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/251e8effcb97f4df0ca82ed5006df4e9?s=128&d=identicon&r=PG", "display_name": "mGarsteck", "link": "https://stackoverflow.com/users/2671632/mgarsteck"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 106, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1477433230, "creation_date": 1477433230, "question_id": 40250538, "link": "https://stackoverflow.com/questions/40250538/bundle-unable-to-install-babel", "title": "Bundle unable to install babel", "body": "<p>Im starting a new project using rails 4.2, ruby 2.3.0.\nWhen I use bundle install I get an error:</p>\n\n<blockquote>\n  <p>Errno::EPERM: Operation not permitted @ chmod_internal - /Users/matt/.rvm/gems/ruby-2.3.0/gems/babel-source-5.8.35/lib/babel.js\n  An error occurred while installing babel-source (5.8.35), and Bundler cannot continue.\n  Make sure that <code>gem install babel-source -v '5.8.35'</code> succeeds before bundling.</p>\n</blockquote>\n\n<p>Running </p>\n\n<pre><code>gem install babel-source -v '5.8.35'\n</code></pre>\n\n<p>I get the following error:</p>\n\n<blockquote>\n  <p>ERROR:  While executing gem ... (Errno::EPERM)\n      Operation not permitted @ chmod_internal - /Users/matt/.rvm/gems/ruby-2.3.0/gems/babel-source-5.8.35/lib/babel.js</p>\n</blockquote>\n\n<p>I checked out the permissions on the file in question but that doesn't change anything.</p>\n\n<p>Can anyone help point me in the right direction?</p>\n"}, {"tags": ["ruby", "variables", "methods", "parameters", "arguments"], "comments": [{"owner": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "edited": false, "score": 1, "creation_date": 1477432304, "post_id": 40250270, "comment_id": 67763342, "body": "<code>words = method</code> is the same as <code>words = method()</code>. You are calling the method named <code>method</code>, so <code>words</code> will now contain the value <code>33</code>."}, {"owner": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "edited": false, "score": 1, "creation_date": 1477432767, "post_id": 40250270, "comment_id": 67763533, "body": "What did you think the line <code>words = method</code> was doing, if not invoking <code>method</code> and storing the returned value in a new local variable called <code>words</code>?"}, {"owner": {"reputation": 623, "user_id": 6651742, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/4828631db0cb8a4e64c2c724aefb606d?s=128&d=identicon&r=PG&f=1", "display_name": "developer098", "link": "https://stackoverflow.com/users/6651742/developer098"}, "edited": false, "score": 0, "creation_date": 1477433042, "post_id": 40250270, "comment_id": 67763635, "body": "I get the fact that it returned a value and stored in under words. Didn&#39;t really get the fact that how the function grabbed the local variable words without having to be passed through a method."}, {"owner": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "edited": false, "score": 1, "creation_date": 1477433416, "post_id": 40250270, "comment_id": 67763788, "body": "<code>words</code> is available in all three methods because you either declare and define it locally, or pass it in as an argument. Every use of <code>words</code> is working because you&#39;ve explicitly made it available for use, no method is &quot;grabbing&quot; another method&#39;s local variable. I&#39;m still not sure where your confusion is. <code>words</code> is explicitly defined in <code>method</code>, it&#39;s explicitly defined in <code>callmethod</code>, and it&#39;s explicitly passed into <code>printout</code>. None of these variables are the same variable, they just happen to have the same name and value. Each is local to the method where it is used."}, {"owner": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "edited": false, "score": 1, "creation_date": 1477433675, "post_id": 40250270, "comment_id": 67763878, "body": "FYI Your code could be rewritten identically but with unique variable names, which might clear up some of your confusion: <a href=\"https://gist.github.com/meagar/9b721ea5356aee05d9dd1916d03c2e83\" rel=\"nofollow noreferrer\">gist.github.com/meagar/9b721ea5356aee05d9dd1916d03c2e83</a>"}, {"owner": {"reputation": 623, "user_id": 6651742, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/4828631db0cb8a4e64c2c724aefb606d?s=128&d=identicon&r=PG&f=1", "display_name": "developer098", "link": "https://stackoverflow.com/users/6651742/developer098"}, "edited": false, "score": 0, "creation_date": 1477433963, "post_id": 40250270, "comment_id": 67763980, "body": "I guess my confusion is from thinking setting parameters are separate from variables. I thought they do not take variables from outside the method (local variable in this case), but only serve to pass arguments from method calls that are explicit i.e.: method(3)."}, {"owner": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "edited": false, "score": 1, "creation_date": 1477434091, "post_id": 40250270, "comment_id": 67764026, "body": "@programmer321 Every time ruby sees the name of a variable, it will replace that name with the contents of the variable. It doesn&#39;t matter if the variable is in an expression or as an argument to a function. The only exception to this rule is when you assign a value to a variable. In that case the variable will get a new value. In (almost) all other cases Ruby replaces the name of the variable with its contents."}, {"owner": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "edited": false, "score": 1, "creation_date": 1477434210, "post_id": 40250270, "comment_id": 67764061, "body": "So if you have <code>a = 1; b = 2; c = 3</code>. And then write <code>z = a + b + c</code> it will be equivalent to <code>z = 1 + 2 + 3</code>. If you write <code>z = func(a, b, c)</code> it will be equivalent to <code>z = func(1, 2, 3)</code>."}, {"owner": {"reputation": 623, "user_id": 6651742, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/4828631db0cb8a4e64c2c724aefb606d?s=128&d=identicon&r=PG&f=1", "display_name": "developer098", "link": "https://stackoverflow.com/users/6651742/developer098"}, "reply_to_user": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "edited": false, "score": 0, "creation_date": 1477434252, "post_id": 40250270, "comment_id": 67764079, "body": "Thank you @Casper"}], "answers": [{"comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1477432615, "post_id": 40250316, "comment_id": 67763467, "body": "Although you <i>can</i> add braces, in practice you almost never do: <code>self.x</code> is what most style guides recommend vs. <code>x()</code>."}, {"owner": {"reputation": 623, "user_id": 6651742, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/4828631db0cb8a4e64c2c724aefb606d?s=128&d=identicon&r=PG&f=1", "display_name": "developer098", "link": "https://stackoverflow.com/users/6651742/developer098"}, "edited": false, "score": 0, "creation_date": 1477433390, "post_id": 40250316, "comment_id": 67763780, "body": "can you give an example maybe using the previous example of how to rewrite it with self.x?"}, {"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "reply_to_user": {"reputation": 623, "user_id": 6651742, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/4828631db0cb8a4e64c2c724aefb606d?s=128&d=identicon&r=PG&f=1", "display_name": "developer098", "link": "https://stackoverflow.com/users/6651742/developer098"}, "edited": false, "score": 1, "creation_date": 1477433519, "post_id": 40250316, "comment_id": 67763818, "body": "@programmer321 in this case it won&#39;t make much sense, because it is unnecessary, but the next is equivalent to what you had: <code>def callmethod   words = self.method   result =  self.printout(words) end</code>"}], "tags": [], "owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "is_accepted": true, "score": 3, "last_activity_date": 1477432849, "last_edit_date": 1477432849, "creation_date": 1477432136, "answer_id": 40250316, "question_id": 40250270, "link": "https://stackoverflow.com/questions/40250270/in-ruby-how-do-variables-get-passed-into-arguments-without-a-method-call/40250316#40250316", "title": "In Ruby, how do variables get passed into arguments without a method call?", "body": "<p>Within <code>callmethod</code> method <code>words</code> is a local variable with the value of return value of method <code>method</code>.</p>\n\n<p><code>printout(words)</code> works as expected, because you are passing it a value of local variable <code>words</code>, which is string <code>\"33\"</code>.</p>\n\n<p>In Ruby <code>method_name()</code> are optional while calling a method. If you happen to have a local variable with the same name, as a method, to make Ruby know you want to call a method, not to get a value of local variable, you can say <code>method_name()</code>. But there is a better/recommended option - <code>self.method_name</code>.</p>\n"}], "owner": {"reputation": 623, "user_id": 6651742, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/4828631db0cb8a4e64c2c724aefb606d?s=128&d=identicon&r=PG&f=1", "display_name": "developer098", "link": "https://stackoverflow.com/users/6651742/developer098"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "accepted_answer_id": 40250316, "answer_count": 1, "score": 0, "last_activity_date": 1477432849, "creation_date": 1477431962, "last_edit_date": 1477432154, "question_id": 40250270, "link": "https://stackoverflow.com/questions/40250270/in-ruby-how-do-variables-get-passed-into-arguments-without-a-method-call", "title": "In Ruby, how do variables get passed into arguments without a method call?", "body": "<p>Given the following code: </p>\n\n<pre><code>def method\n  words = \"33\"\n  return words\nend\n\ndef callmethod\n  words = method\n  result =  printout(words)\nend\n\ndef printout(words)\n  puts (words)\nend\n\ncallmethod #will print out --&gt; \"33\" (words from method)\n</code></pre>\n\n<p>How does Ruby recognize that the variable <code>words</code> is part of the method call (<code>callmethod</code>) when it has not been called explicitly? In this case, the line I am specifically talking about result = <code>printout(words)</code>. It seems that this function is picking up the variable words (return value of method), even though I haven't used the method call to explicitly put it in. Can someone explain to me how this is possible?</p>\n"}, {"tags": ["mysql", "ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 15, "user_id": 6764805, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/8a993a581af46045df8a98131da13aef?s=128&d=identicon&r=PG&f=1", "display_name": "mfz6", "link": "https://stackoverflow.com/users/6764805/mfz6"}, "edited": false, "score": 0, "creation_date": 1477435348, "post_id": 40250466, "comment_id": 67764426, "body": "Hey jeff thanks for your feed back just combined the two errors you pointed out and getting this error:  private method `open&#39; called for #&lt;ActiveRecord::Relation []&gt;"}, {"owner": {"reputation": 642, "user_id": 4745520, "user_type": "registered", "accept_rate": 29, "profile_image": "https://graph.facebook.com/10200391026893649/picture?type=large", "display_name": "Jeff", "link": "https://stackoverflow.com/users/4745520/jeff"}, "reply_to_user": {"reputation": 15, "user_id": 6764805, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/8a993a581af46045df8a98131da13aef?s=128&d=identicon&r=PG&f=1", "display_name": "mfz6", "link": "https://stackoverflow.com/users/6764805/mfz6"}, "edited": false, "score": 0, "creation_date": 1477440095, "post_id": 40250466, "comment_id": 67765590, "body": "It&#39;s because <code>opentime = @opentimes.find_by(day: day_of_week_number)</code> is not returning anything that matches. It&#39;s returning an empty array/relation. Make sure that <code>opentime</code> is defined with a proper query and then try :)"}, {"owner": {"reputation": 642, "user_id": 4745520, "user_type": "registered", "accept_rate": 29, "profile_image": "https://graph.facebook.com/10200391026893649/picture?type=large", "display_name": "Jeff", "link": "https://stackoverflow.com/users/4745520/jeff"}, "reply_to_user": {"reputation": 15, "user_id": 6764805, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/8a993a581af46045df8a98131da13aef?s=128&d=identicon&r=PG&f=1", "display_name": "mfz6", "link": "https://stackoverflow.com/users/6764805/mfz6"}, "edited": false, "score": 0, "creation_date": 1477440416, "post_id": 40250466, "comment_id": 67765642, "body": "Looked at your query, <code>Time.current.strftime(&quot;%u&quot;) =&gt; &#39;3&#39;</code> whereas your <code>day</code> attribute is an <code>integer</code>. You probably want <code>opentime = @opentimes.find_by(day: day_of_week_number).to_i</code>"}], "tags": [], "owner": {"reputation": 642, "user_id": 4745520, "user_type": "registered", "accept_rate": 29, "profile_image": "https://graph.facebook.com/10200391026893649/picture?type=large", "display_name": "Jeff", "link": "https://stackoverflow.com/users/4745520/jeff"}, "is_accepted": false, "score": 0, "last_activity_date": 1477432928, "creation_date": 1477432928, "answer_id": 40250466, "question_id": 40250235, "link": "https://stackoverflow.com/questions/40250235/display-open-closed-in-real-time-in-rails-app/40250466#40250466", "title": "Display Open/Closed in real time in rails app", "body": "<p>Your conditions are wrong and there is a typo in it. Coded exactly as I say it in English: </p>\n\n<p>It is open if the <code>current_time</code> is past (greater than) the open time:\n<code>Time.current.strftime(\"%H:%M\") &gt;= opentime.open.strftime(\"%H:%M\")</code></p>\n\n<p>It is open if the <code>current_time</code> is before (less than) the closing time:\n<code>Time.current.strftime(\"%H:%M\") &lt; opentime.closed.strftime(\"%H:%M\")</code></p>\n\n<p>Combine these two and let me know how it works out. Your first inequality was wrong and you spelled <code>current</code> as <code>curent</code> in your second one.</p>\n"}], "owner": {"reputation": 15, "user_id": 6764805, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/8a993a581af46045df8a98131da13aef?s=128&d=identicon&r=PG&f=1", "display_name": "mfz6", "link": "https://stackoverflow.com/users/6764805/mfz6"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 62, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1477432928, "creation_date": 1477431766, "question_id": 40250235, "link": "https://stackoverflow.com/questions/40250235/display-open-closed-in-real-time-in-rails-app", "title": "Display Open/Closed in real time in rails app", "body": "<p>Hi there I'm trying to create a open or closed display in a rails app I have two models Establishments and Opentimes. Here are my DB tables.I'm using MySQL as my database.</p>\n\n<pre><code>create_table \"establishments\", force: :cascade, options: \"ENGINE=InnoDB DEFAULT CHARSET=utf8\" do |t|\n  t.string   \"name\"\n  t.string   \"tagline\"\n  t.text     \"description\",    limit: 65535\n  t.string   \"postcode\"\n  t.string   \"address_line_1\"\n  t.string   \"address_line_2\"\n  t.string   \"address_line_3\"\n  t.string   \"parish\"\n  t.string   \"phone_number\"\n  t.integer  \"user_id\"\n  t.datetime \"created_at\",                   null: false\n  t.datetime \"updated_at\",                   null: false\n  t.index [\"user_id\"], name: \"index_establishments_on_user_id\", using: :btree\nend\n\ncreate_table \"opentimes\", force: :cascade, options: \"ENGINE=InnoDB DEFAULT CHARSET=utf8\" do |t|\n  t.integer  \"day\"\n  t.string   \"label\"\n  t.time     \"open\"\n  t.time     \"closed\"\n  t.datetime \"created_at\",       null: false\n  t.datetime \"updated_at\",       null: false\n  t.integer  \"establishment_id\"\nend\n</code></pre>\n\n<p>I have a relationship set between the two models and nested the routes.</p>\n\n<pre><code>Rails.application.routes.draw do\n\n devise_for :users\n resources :establishments do\n  resources :opentimes\n end\n root to: \"establishments#index\"\nend\n</code></pre>\n\n<p>And here is the method I am trying to execute to no avail in my establishments model.</p>\n\n<pre><code>class Establishment &lt; ApplicationRecord\n  belongs_to :user\n  has_many :opentimes\n\n def open?\n    day_of_week_number = Time.current.strftime(\"%u\")\n    opentime = @opentimes.find_by(day: day_of_week_number)\n    if (opentime.open.strftime(\"%H:%M\") &gt;= Time.current.strftime(\"%H:%M\")) &amp;&amp; (Time.curent.strftime(\"%H:%M\") &lt; opentime.closed.strftime(\"%H:%M\"))\n        'Open'\n    else\n        'Closed'\n    end\n end\nend\n</code></pre>\n\n<p>If anyone could help me and point me in the right direction with this I would be very grateful. Please forgive me if I'm way off with this I'm a newbie to rails and programming. Many thanks in advance.</p>\n"}, {"tags": ["ruby", "eclipse", "selenium", "capybara", "skype"], "comments": [{"owner": {"reputation": 2867, "user_id": 1768843, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/u8fr9.jpg?s=128&g=1", "display_name": "pagep", "link": "https://stackoverflow.com/users/1768843/pagep"}, "edited": false, "score": 0, "creation_date": 1477433377, "post_id": 40250009, "comment_id": 67763775, "body": "So you uninstalled extension from system but it&#39;s still in FF? Did you check extensions and add-ons directly in FF. Enter this to the website field in FF: <code>about:addons</code> [enter] and check it there."}, {"owner": {"reputation": 5134, "user_id": 1672197, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i8HkV.png?s=128&g=1", "display_name": "orde", "link": "https://stackoverflow.com/users/1672197/orde"}, "edited": false, "score": 1, "creation_date": 1477433815, "post_id": 40250009, "comment_id": 67763925, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/40141242/firefox-opening-blank-page-when-launching-browser\">Firefox opening blank page when launching browser</a>"}], "owner": {"reputation": 69, "user_id": 4686146, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/037213b2f82c7f251e694275b72e3d18?s=128&d=identicon&r=PG&f=1", "display_name": "Joe12", "link": "https://stackoverflow.com/users/4686146/joe12"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 174, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1477433260, "creation_date": 1477430790, "last_edit_date": 1477433260, "question_id": 40250009, "link": "https://stackoverflow.com/questions/40250009/selenium-webdriver-opens-a-blank-tab-and-skype-extension-tab-when-launching-fire", "title": "selenium WebDriver opens a blank tab and skype extension tab when launching FireFox browser", "body": "<pre><code>require \"selenium-webdriver\"\nrequire \"cucumber\"\nrequire \"capybara\"\ndriver=Selenium::WebDriver::Driver.for(:firefox)\ndriver.get\"www.google.com\"\n</code></pre>\n\n<p>When launching Firefox browser,webdriver opens a blank tab and tab for Skype extension.I have uninstalled Skype click to call from my system.\nVersion selenium 3.0, Firefox 49.0.2, Geckodriver latest.\nPlease help.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "session"], "comments": [{"owner": {"reputation": 3180, "user_id": 4659816, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/5TNaW.jpg?s=128&g=1", "display_name": "David", "link": "https://stackoverflow.com/users/4659816/david"}, "edited": false, "score": 0, "creation_date": 1477432464, "post_id": 40249928, "comment_id": 67763406, "body": "can you post more code related to this issue - what is in the each do block?"}, {"owner": {"reputation": 554, "user_id": 5511391, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/OYPNO.jpg?s=128&g=1", "display_name": "Marco", "link": "https://stackoverflow.com/users/5511391/marco"}, "reply_to_user": {"reputation": 3180, "user_id": 4659816, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/5TNaW.jpg?s=128&g=1", "display_name": "David", "link": "https://stackoverflow.com/users/4659816/david"}, "edited": false, "score": 0, "creation_date": 1477432725, "post_id": 40249928, "comment_id": 67763512, "body": "@henners66 Thanks to see the updated code"}], "answers": [{"tags": [], "owner": {"reputation": 2174, "user_id": 3448554, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/j7RcG.jpg?s=128&g=1", "display_name": "Kelsey Hannan", "link": "https://stackoverflow.com/users/3448554/kelsey-hannan"}, "is_accepted": false, "score": 0, "last_activity_date": 1477434220, "creation_date": 1477434220, "answer_id": 40250731, "question_id": 40249928, "link": "https://stackoverflow.com/questions/40249928/rails-how-does-session-work-in-this-situation/40250731#40250731", "title": "Rails: How does session work in this situation?", "body": "<p>Try:</p>\n\n<pre><code>@receivers.each {|r| r[\"e_comp\"]}\n</code></pre>\n\n<p>Without the <code>s</code> in your print controller method.  That looks like a typo.</p>\n"}, {"tags": [], "owner": {"reputation": 474, "user_id": 5379362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38f95f8ddc8d16b7945bccd6ba76e00?s=128&d=identicon&r=PG&f=1", "display_name": "Fede Bonisconti", "link": "https://stackoverflow.com/users/5379362/fede-bonisconti"}, "is_accepted": false, "score": 2, "last_activity_date": 1478447874, "last_edit_date": 1478447874, "creation_date": 1477435620, "answer_id": 40250960, "question_id": 40249928, "link": "https://stackoverflow.com/questions/40249928/rails-how-does-session-work-in-this-situation/40250960#40250960", "title": "Rails: How does session work in this situation?", "body": "<p>You should not store complex or activerecord objects at session. ActiveRecord objects can change their attributes, and this will probably raise an exception.</p>\n\n<p>Also, is not a good practice to store undefined length arrays in session. Take in account that session's memory size is 4kb only.</p>\n\n<p>For your example, you can store result's ids inside session and then retrieve them querying the database within the print method.</p>\n"}], "owner": {"reputation": 554, "user_id": 5511391, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/OYPNO.jpg?s=128&g=1", "display_name": "Marco", "link": "https://stackoverflow.com/users/5511391/marco"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 31, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1478447874, "creation_date": 1477430513, "last_edit_date": 1477432671, "question_id": 40249928, "link": "https://stackoverflow.com/questions/40249928/rails-how-does-session-work-in-this-situation", "title": "Rails: How does session work in this situation?", "body": "<p>I am trying to pass values between actions in a controller. \nWhen I puts values in the sender action it returns a collection of objects correctly. But when I puts values from the receiver action, it shows different thing.<br>\nI met this problem when I tried to use <code>each</code> to retrieve every object from collection</p>\n\n<p><strong>example_controller.rb</strong></p>\n\n<pre><code>def query\n  @results = Result.all\n  session[:results] = @results\n  puts session[:results]\nend\n\ndef print\n  @receiver = session[:results]\n  puts @receiver\nend\n</code></pre>\n\n<blockquote>\n  <p>Results:0x007fdc8b96b0a8<br> Results:0x007fdc8b96af68<br>\n  Results:0x007fdc8b96adb0<br> Results:0x007fdc8b96ac70<br></p>\n  \n  <p>{\"id\"=>9, \"e_comp\"=>\"109\", \"e_num\"=>\"ccc\"}<br> {\"id\"=>11,\n  \"e_comp\"=>\"111\", \"e_num\"=>\"bbb\"}<br> {\"id\"=>12, \"e_comp\"=>\"112\",\n  \"e_num\"=>\"ddd\"}<br> {\"id\"=>15, \"e_comp\"=>\"115\", \"e_num\"=>\"kkk\"}<br></p>\n</blockquote>\n\n<p>if I try <code>@receivers.each {|r| r.e_comp}</code> , it will show an error </p>\n\n<blockquote>\n  <p>NoMethodError (undefined method `e_comp' for Hash:0x007fdc8b96b0a8)</p>\n</blockquote>\n\n<p>What happens inside rails? why session turn to another format?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5", "mixpanel"], "comments": [{"owner": {"reputation": 2174, "user_id": 3448554, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/j7RcG.jpg?s=128&g=1", "display_name": "Kelsey Hannan", "link": "https://stackoverflow.com/users/3448554/kelsey-hannan"}, "edited": false, "score": 0, "creation_date": 1477431300, "post_id": 40249895, "comment_id": 67762816, "body": "The answer on this depends on your production server configuration.  But essentially it would involve delegating it to a separate process and having it run alongside your main app.  One way to do this would be to put this into a rake task and then call that task to boot a separate process."}, {"owner": {"reputation": 1779, "user_id": 3102718, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e9c06b4a732dc2ee775f93135d1592f?s=128&d=identicon&r=PG", "display_name": "Alex Avoiants", "link": "https://stackoverflow.com/users/3102718/alex-avoiants"}, "edited": false, "score": 0, "creation_date": 1477431307, "post_id": 40249895, "comment_id": 67762819, "body": "This code should run periodically or it should be triggered from the main app?"}, {"owner": {"reputation": 25, "user_id": 6286075, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o3GWl.jpg?s=128&g=1", "display_name": "Twhitt06", "link": "https://stackoverflow.com/users/6286075/twhitt06"}, "reply_to_user": {"reputation": 1779, "user_id": 3102718, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e9c06b4a732dc2ee775f93135d1592f?s=128&d=identicon&r=PG", "display_name": "Alex Avoiants", "link": "https://stackoverflow.com/users/3102718/alex-avoiants"}, "edited": false, "score": 0, "creation_date": 1477432313, "post_id": 40249895, "comment_id": 67763345, "body": "@OleksandrAvoyants this should be triggered from the main app."}, {"owner": {"reputation": 2174, "user_id": 3448554, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/j7RcG.jpg?s=128&g=1", "display_name": "Kelsey Hannan", "link": "https://stackoverflow.com/users/3448554/kelsey-hannan"}, "edited": false, "score": 0, "creation_date": 1477433576, "post_id": 40249895, "comment_id": 67763833, "body": "@Twhitt06 Is it on all the time, or triggered only periodically from within the main app (e.g. every hour, every time a new user signs up, etc.)."}, {"owner": {"reputation": 25, "user_id": 6286075, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o3GWl.jpg?s=128&g=1", "display_name": "Twhitt06", "link": "https://stackoverflow.com/users/6286075/twhitt06"}, "reply_to_user": {"reputation": 2174, "user_id": 3448554, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/j7RcG.jpg?s=128&g=1", "display_name": "Kelsey Hannan", "link": "https://stackoverflow.com/users/3448554/kelsey-hannan"}, "edited": false, "score": 0, "creation_date": 1477434140, "post_id": 40249895, "comment_id": 67764037, "body": "@Kelseydh ideally I&#39;d like to have it running all the time. For more context (may or may not be helpful), the app has no UI, it&#39;s mainly an API that controls several events. I&#39;m just stuck on keeping this script running."}, {"owner": {"reputation": 2174, "user_id": 3448554, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/j7RcG.jpg?s=128&g=1", "display_name": "Kelsey Hannan", "link": "https://stackoverflow.com/users/3448554/kelsey-hannan"}, "edited": false, "score": 0, "creation_date": 1477434816, "post_id": 40249895, "comment_id": 67764259, "body": "@Twhitt06 If it runs all the time, then the rake task will work.  Just have it boot with the rest of your processes when your app starts.  But first step here is to make sure this works when manually triggered.  Then for deployment you can think about how to get them booted simultaneously. Depending on your production configuration that could be from using a <code>Procfile</code> (e.g. if its hosted on Heroku) which you can run locally in development via one command on your command line using something like Foreman:  <a href=\"https://github.com/ddollar/foreman\" rel=\"nofollow noreferrer\">github.com/ddollar/foreman</a>"}, {"owner": {"reputation": 25, "user_id": 6286075, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o3GWl.jpg?s=128&g=1", "display_name": "Twhitt06", "link": "https://stackoverflow.com/users/6286075/twhitt06"}, "reply_to_user": {"reputation": 2174, "user_id": 3448554, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/j7RcG.jpg?s=128&g=1", "display_name": "Kelsey Hannan", "link": "https://stackoverflow.com/users/3448554/kelsey-hannan"}, "edited": false, "score": 1, "creation_date": 1477435532, "post_id": 40249895, "comment_id": 67764479, "body": "@Kelseydh I&#39;ve tested the rake task and it works. I came up with possibly an ugly solution that runs the code. Inside my application controller I created a new thread and used %x[bundle exec rake myappname:tweetstreamer]. Does what I need for right now. Thank you so much for the guidance"}], "answers": [{"comments": [{"owner": {"reputation": 25, "user_id": 6286075, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o3GWl.jpg?s=128&g=1", "display_name": "Twhitt06", "link": "https://stackoverflow.com/users/6286075/twhitt06"}, "edited": false, "score": 0, "creation_date": 1477432488, "post_id": 40250221, "comment_id": 67763412, "body": "thanks for the suggestion. I&#39;m new to rails, how would I go about booting the rake task from within my app?"}, {"owner": {"reputation": 2174, "user_id": 3448554, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/j7RcG.jpg?s=128&g=1", "display_name": "Kelsey Hannan", "link": "https://stackoverflow.com/users/3448554/kelsey-hannan"}, "reply_to_user": {"reputation": 25, "user_id": 6286075, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o3GWl.jpg?s=128&g=1", "display_name": "Twhitt06", "link": "https://stackoverflow.com/users/6286075/twhitt06"}, "edited": false, "score": 0, "creation_date": 1477433027, "post_id": 40250221, "comment_id": 67763628, "body": "I updated the answer to show where you could save this file.  To run from the command line you execute with <code>rake myappname:tweetstream</code>, with <code>myappname</code> in all places being replaced with the name of your rails app.  When you set up a separate process for production, you can either call this rake task once or call it periodically if you have a scheduler process."}, {"owner": {"reputation": 2174, "user_id": 3448554, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/j7RcG.jpg?s=128&g=1", "display_name": "Kelsey Hannan", "link": "https://stackoverflow.com/users/3448554/kelsey-hannan"}, "reply_to_user": {"reputation": 25, "user_id": 6286075, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o3GWl.jpg?s=128&g=1", "display_name": "Twhitt06", "link": "https://stackoverflow.com/users/6286075/twhitt06"}, "edited": false, "score": 0, "creation_date": 1477433331, "post_id": 40250221, "comment_id": 67763749, "body": "Ah I didn&#39;t see you want to trigger this from within your app.  Another approach would be to make it a service object within your app, which you can then call from within your app to trigger a separate process to handle it using DelayedJob, Sidekiq or Resque."}], "tags": [], "owner": {"reputation": 2174, "user_id": 3448554, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/j7RcG.jpg?s=128&g=1", "display_name": "Kelsey Hannan", "link": "https://stackoverflow.com/users/3448554/kelsey-hannan"}, "is_accepted": true, "score": 0, "last_activity_date": 1477432954, "last_edit_date": 1477432954, "creation_date": 1477431732, "answer_id": 40250221, "question_id": 40249895, "link": "https://stackoverflow.com/questions/40249895/rails-5-app-running-background-tasks/40250221#40250221", "title": "Rails 5 app running background tasks", "body": "<p>You could make this a rake task.  Change the namespace myappname to the name of your app.</p>\n\n<p>Save this in <em>myappname/lib/tasks/tweetstream.rake</em>:</p>\n\n<pre><code>namespace :myappname do\n  task :tweetstream =&gt; :environment do\n\n    require 'tweetstream'\n    require 'twitter'\n    require 'mixpanel-ruby'\n\n    TweetStream.configure do |conf|\n    conf.consumer_key = \"XXXXXXX\"\n    conf.consumer_secret = \"XXXXXXX\"\n    conf.oauth_token = \"XXXXXXX\"\n    conf.oauth_token_secret = \"XXXXXXX\"\n    conf.auth_method = :oauth\n    end\n\n    @store_account = Twitter::REST::Client.new do |config|\n    config.consumer_key = \"XXXXXXX\"\n    config.consumer_secret = \"XXXXXXX\"\n    config.access_token = \"XXXXXXX\"\n    config.access_token_secret = \"XXXXXXX\"\n    end\n\n    client = TweetStream::Client.new\n\n    client.track('mysampletweet') do |status|\n\n    msg = status.text\n    tag = \"#mysampletweet\"\n\n    puts msg\n    puts tag\n\n    if msg.include? tag\n    message = \"@#{status.user.screen_name} Happy Holidays from @myaccountname!\"\n    sleep 5\n    @store_account.update(message, in_reply_to_status_id: status.id)\n    end\n\n    @tracker = Mixpanel::Tracker.new(\"XXXXXXX\")\n\n    @tracker.track(status.id, 'Tweets Received', { 'Hashtag' =&gt; tag, 'Message' =&gt; msg })\n\n    puts 'Your code ran'\n    end\n  end\nend\n</code></pre>\n\n<p>Then to boot in a separate process, from your command line you can run it with <code>bundle exec rake myappname:tweetstream</code></p>\n"}], "owner": {"reputation": 25, "user_id": 6286075, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o3GWl.jpg?s=128&g=1", "display_name": "Twhitt06", "link": "https://stackoverflow.com/users/6286075/twhitt06"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 526, "favorite_count": 0, "accepted_answer_id": 40250221, "answer_count": 1, "score": 1, "last_activity_date": 1477433221, "creation_date": 1477430387, "last_edit_date": 1477433221, "question_id": 40249895, "link": "https://stackoverflow.com/questions/40249895/rails-5-app-running-background-tasks", "title": "Rails 5 app running background tasks", "body": "<p>I've built a small rails app and have a ruby script that I would like to run in the background of my app. Currently this code is placed in my lib directory (lib/tweetstreamer.rb). What's the easiest way to accomplish this task while having the code continue to run in the background? Would I need to use some type of command inside my application controller? I found that when I use \"rails runner path/to/tweetstreamer.rb\" my script runs perfectly. </p>\n\n<p>tweetstreamer.rb can be seen below</p>\n\n<pre><code>require 'tweetstream'\nrequire 'twitter'\nrequire 'mixpanel-ruby'\n\n  TweetStream.configure do |conf|\n  conf.consumer_key = \"XXXXXXX\"\n  conf.consumer_secret = \"XXXXXXX\"\n  conf.oauth_token = \"XXXXXXX\"\n  conf.oauth_token_secret = \"XXXXXXX\"\n  conf.auth_method = :oauth\n  end\n\n  @store_account = Twitter::REST::Client.new do |config|\n  config.consumer_key = \"XXXXXXX\"\n  config.consumer_secret = \"XXXXXXX\"\n  config.access_token = \"XXXXXXX\"\n  config.access_token_secret = \"XXXXXXX\"\n  end\n\n  client = TweetStream::Client.new\n\n  client.track('mysampletweet') do |status|\n\n  msg = status.text\n  tag = \"#mysampletweet\"\n\n  puts msg\n  puts tag\n\n  if msg.include? tag\n  message = \"@#{status.user.screen_name} Happy Holidays from @myaccountname!\"\n  sleep 5\n  @store_account.update(message, in_reply_to_status_id: status.id)\n  end\n\n  @tracker = Mixpanel::Tracker.new(\"XXXXXXX\")\n\n  @tracker.track(status.id, 'Tweets Received', { 'Hashtag' =&gt; tag, 'Message' =&gt; msg })\n\n  puts 'Your code ran'\n  end\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "asset-pipeline"], "comments": [{"owner": {"reputation": 2174, "user_id": 3448554, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/j7RcG.jpg?s=128&g=1", "display_name": "Kelsey Hannan", "link": "https://stackoverflow.com/users/3448554/kelsey-hannan"}, "edited": false, "score": 0, "creation_date": 1477430583, "post_id": 40249856, "comment_id": 67762461, "body": "Are you are trying to execute Ruby ERB within Javascript?"}, {"owner": {"reputation": 174, "user_id": 2744402, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/FMYT1.png?s=128&g=1", "display_name": "Daniela", "link": "https://stackoverflow.com/users/2744402/daniela"}, "reply_to_user": {"reputation": 2174, "user_id": 3448554, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/j7RcG.jpg?s=128&g=1", "display_name": "Kelsey Hannan", "link": "https://stackoverflow.com/users/3448554/kelsey-hannan"}, "edited": false, "score": 0, "creation_date": 1477431309, "post_id": 40249856, "comment_id": 67762820, "body": "Why trying? In .erb files the ruby code is handled first. If I read the javascript code (including ruby code) into the controller and then write it into a partial, all works beautifully."}, {"owner": {"reputation": 2174, "user_id": 3448554, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/j7RcG.jpg?s=128&g=1", "display_name": "Kelsey Hannan", "link": "https://stackoverflow.com/users/3448554/kelsey-hannan"}, "edited": false, "score": 0, "creation_date": 1477431463, "post_id": 40249856, "comment_id": 67762911, "body": "I see, so you&#39;re using a <code>js.erb</code> file.  Is your problem that this ERB is not correctly being parsed into an asset path within the view, or is it that you can&#39;t access the helper method within your Model?"}, {"owner": {"reputation": 174, "user_id": 2744402, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/FMYT1.png?s=128&g=1", "display_name": "Daniela", "link": "https://stackoverflow.com/users/2744402/daniela"}, "reply_to_user": {"reputation": 2174, "user_id": 3448554, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/j7RcG.jpg?s=128&g=1", "display_name": "Kelsey Hannan", "link": "https://stackoverflow.com/users/3448554/kelsey-hannan"}, "edited": false, "score": 0, "creation_date": 1477431661, "post_id": 40249856, "comment_id": 67763000, "body": "Thanks Kelseydh. I am not using a js.erb file in this case. I am storing the javascript code in the database (with its exercise). When I read that code, I would like to have a way to have the controller (or even better the model) deal with the code as if it was a template, to replace the &lt;%= ... %&gt; code (which I can do) and then make it into a route including the fingerprint. (See the last 2 paragraphs, from &quot;I have already tried to&quot;) - I need a result like: &#39;url(/assets/exercises/shapes/circles/circle_open_black_48-d&zwnj;&#8203;6e60117aaf82eb468c53&zwnj;&#8203;5ce7705abced4008ddda&zwnj;&#8203;9010adf30b0c030ad568&zwnj;&#8203;632.png)&#39;"}, {"owner": {"reputation": 2174, "user_id": 3448554, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/j7RcG.jpg?s=128&g=1", "display_name": "Kelsey Hannan", "link": "https://stackoverflow.com/users/3448554/kelsey-hannan"}, "edited": false, "score": 0, "creation_date": 1477432593, "post_id": 40249856, "comment_id": 67763457, "body": "Just as an aside, if any of the javascript you are storing in the database contains the results of user input I would advise against storing JS in your database as it will make your app susceptible to XSS attacks. (e.g. If someone publicly can execute <code>alert(&quot;pwned&quot;)</code> from the JS you may have an issue )"}, {"owner": {"reputation": 174, "user_id": 2744402, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/FMYT1.png?s=128&g=1", "display_name": "Daniela", "link": "https://stackoverflow.com/users/2744402/daniela"}, "reply_to_user": {"reputation": 2174, "user_id": 3448554, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/j7RcG.jpg?s=128&g=1", "display_name": "Kelsey Hannan", "link": "https://stackoverflow.com/users/3448554/kelsey-hannan"}, "edited": false, "score": 0, "creation_date": 1477435248, "post_id": 40249856, "comment_id": 67764388, "body": "I know - do you have any ideas how to solve my problem?"}, {"owner": {"reputation": 2174, "user_id": 3448554, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/j7RcG.jpg?s=128&g=1", "display_name": "Kelsey Hannan", "link": "https://stackoverflow.com/users/3448554/kelsey-hannan"}, "edited": false, "score": 0, "creation_date": 1477438111, "post_id": 40249856, "comment_id": 67765129, "body": "Just to be clear, can you confirm you can successfully get the fingerprint for these assets when you call <code>asset_path</code> from within the view? If not, get fingerprint working there first."}], "answers": [{"tags": [], "owner": {"reputation": 2174, "user_id": 3448554, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/j7RcG.jpg?s=128&g=1", "display_name": "Kelsey Hannan", "link": "https://stackoverflow.com/users/3448554/kelsey-hannan"}, "is_accepted": true, "score": 3, "last_activity_date": 1477438488, "last_edit_date": 1495540838, "creation_date": 1477438488, "answer_id": 40251415, "question_id": 40249856, "link": "https://stackoverflow.com/questions/40249856/asset-path-with-fingerprint-from-database/40251415#40251415", "title": "asset_path (with fingerprint) from database?", "body": "<p>One way to fetch the MD5 fingerprint value is to use Sprockets' <code>find_asset</code> method, passing in a logical path to your asset to get a <code>Sprockets::BundledAsset</code> instance. For example</p>\n\n<pre><code>[1] pry(main)&gt; Rails.application.assets.find_asset('application.js')\n=&gt; #&lt;Sprockets::BundledAsset:0x3fe368ab8070 pathname=\"/Users/deefour/Sites/MyApp/app/assets/javascripts/application.js\", mtime=2013-02-03 15:33:57 -0500, digest=\"ab07585c8c7b5329878b1c51ed68831e\"&gt;\n</code></pre>\n\n<p>You can call <code>digest_path</code> on this object to get it's <code>MD5</code> sum appended to the asset.</p>\n\n<pre><code>[1] pry(main)&gt; Rails.application.assets.find_asset('application.js').digest_path\n=&gt; \"application-ab07585c8c7b5329878b1c51ed68831e.js\"\n</code></pre>\n\n<p>With this knowledge you can create a helper to return the <code>digest_path</code> for any asset in your application, call this helper from within your <code>.js.erb</code> files or from within your model.</p>\n\n<p>See <a href=\"https://stackoverflow.com/a/14720284/3448554\">this answer for more details on this approach.</a></p>\n"}], "owner": {"reputation": 174, "user_id": 2744402, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/FMYT1.png?s=128&g=1", "display_name": "Daniela", "link": "https://stackoverflow.com/users/2744402/daniela"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 557, "favorite_count": 0, "accepted_answer_id": 40251415, "answer_count": 1, "score": 3, "last_activity_date": 1477438488, "creation_date": 1477430235, "question_id": 40249856, "link": "https://stackoverflow.com/questions/40249856/asset-path-with-fingerprint-from-database", "title": "asset_path (with fingerprint) from database?", "body": "<p>I develop a rails app with exercises (for kids with learning difficulties in math). The interactive part of the exercises is written in javascript. I store each exercise in a database. The javascript contains </p>\n\n<pre><code>&lt;%= asset_path('to_images') %&gt;\n</code></pre>\n\n<p>I can read the scripts into the controller and write the content to a partial, but I think it would be better to capture the scripts in a variable, like:</p>\n\n<pre><code>@animation = exercise.animation\n</code></pre>\n\n<p>where any code containing &lt;%= asset_path(...) %> would be replaced with the correct fingerprinted route to the asset.</p>\n\n<p>Here is an example of a code snippet in exercise.animation:</p>\n\n<pre><code>$(\"#hundred_square td\").css({\n    backgroundImage: 'url(&lt;%= asset_path(\"exercises/shapes/circles/circle_open_black_48.png\") %&gt;)',\n    backgroundSize: \"2vw\",\n    backgroundRepeat: \"no-repeat\",\n    backgroundPosition: \"center\"\n});\n</code></pre>\n\n<p>I have already tried to </p>\n\n<pre><code>class Exercise &lt; ActiveRecord::Base\ninclude ActionView::Helpers::AssetUrlHelper\n</code></pre>\n\n<p>and</p>\n\n<pre><code>self.animation.gsub(/\\&lt;\\%\\=\\s*asset_path\\((.+)\\)\\s*\\%\\&gt;/) do |match|\n  address = $1\n  puts \"#{address}\"\n       =&gt;  \"exercises/shapes/circles/circle_open_black_48.png\"\n  puts \"#{asset_path(address)}\"\n       =&gt;  /\"exercises/shapes/circles/circle_open_black_48.png\"\n  puts \"#{ActionController::Base.helpers.asset_path(address)}\"\n       =&gt;  /\"exercises/shapes/circles/circle_open_black_48.png\"\nend\n</code></pre>\n\n<p>do not produce the result I need.\nThanks for your suggestions! </p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 1755, "user_id": 1877683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uttsA.jpg?s=128&g=1", "display_name": "C dot StrifeVII", "link": "https://stackoverflow.com/users/1877683/c-dot-strifevii"}, "edited": false, "score": 0, "creation_date": 1477430355, "post_id": 40249824, "comment_id": 67762340, "body": "can you post the test?"}, {"owner": {"reputation": 7408, "user_id": 1507393, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e18382322851249d60910f4c4957c334?s=128&d=identicon&r=PG", "display_name": "Pyrce", "link": "https://stackoverflow.com/users/1507393/pyrce"}, "edited": false, "score": 0, "creation_date": 1477430603, "post_id": 40249824, "comment_id": 67762473, "body": "Your controller should be handling this. Are you using erb templates to render your creation pages or a custom page? Templates generated by rails will automatically render model errors over fields which are failing validations. You test should just confirm an exception is raised on an invalid model assignment."}, {"owner": {"reputation": 87, "user_id": 6912352, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/65ced5a76189a770c0fe379bc86bf7cc?s=128&d=identicon&r=PG&f=1", "display_name": "Benny", "link": "https://stackoverflow.com/users/6912352/benny"}, "edited": false, "score": 0, "creation_date": 1477437038, "post_id": 40249824, "comment_id": 67764872, "body": "I have a modal containing a form to create a visit. I would like that if I choose an end date which comes before the start date or if I try to create a visit having the same start, end and visitor of another already saved in the db, after clicking the button to create it, an error in the modal shows up explaining the problem instead of an exception blocking everything, but I don&#39;t know how to do it."}], "answers": [{"comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1477433525, "post_id": 40250005, "comment_id": 67763819, "body": "It&#39;s often better to use <code>save!</code> and then <code>rescue</code> any exceptions that might have failed. Also, when linking to the documentation, try to get the current version and not a historical one."}, {"owner": {"reputation": 87, "user_id": 6912352, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/65ced5a76189a770c0fe379bc86bf7cc?s=128&d=identicon&r=PG&f=1", "display_name": "Benny", "link": "https://stackoverflow.com/users/6912352/benny"}, "edited": false, "score": 0, "creation_date": 1477438821, "post_id": 40250005, "comment_id": 67765301, "body": "Even doing like this, the exception occurs and blocks everything."}, {"owner": {"reputation": 1820, "user_id": 5830835, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/29a99125813cee34a6ecfe0d0e432eb1?s=128&d=identicon&r=PG&f=1", "display_name": "Timmy Von Heiss ", "link": "https://stackoverflow.com/users/5830835/timmy-von-heiss"}, "reply_to_user": {"reputation": 87, "user_id": 6912352, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/65ced5a76189a770c0fe379bc86bf7cc?s=128&d=identicon&r=PG&f=1", "display_name": "Benny", "link": "https://stackoverflow.com/users/6912352/benny"}, "edited": false, "score": 0, "creation_date": 1477440346, "post_id": 40250005, "comment_id": 67765634, "body": "@AnM I think you have to post view and controller."}, {"owner": {"reputation": 87, "user_id": 6912352, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/65ced5a76189a770c0fe379bc86bf7cc?s=128&d=identicon&r=PG&f=1", "display_name": "Benny", "link": "https://stackoverflow.com/users/6912352/benny"}, "edited": false, "score": 0, "creation_date": 1477488982, "post_id": 40250005, "comment_id": 67787972, "body": "@TimmyVonHeiss I added everything, I hope you can have a look to it. Thank you a lot for your help."}], "tags": [], "owner": {"reputation": 1820, "user_id": 5830835, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/29a99125813cee34a6ecfe0d0e432eb1?s=128&d=identicon&r=PG&f=1", "display_name": "Timmy Von Heiss ", "link": "https://stackoverflow.com/users/5830835/timmy-von-heiss"}, "is_accepted": false, "score": 0, "last_activity_date": 1477430775, "creation_date": 1477430775, "answer_id": 40250005, "question_id": 40249824, "link": "https://stackoverflow.com/questions/40249824/avoiding-exceptions-while-violating-a-validation/40250005#40250005", "title": "Avoiding exceptions while violating a validation", "body": "<p>This is how you could create a custom message for errors relating to uniqueness.</p>\n\n<pre><code>validates   :start, presence: true, uniqueness: {scope: [:end, :visitor_id],    \nmessage: -&gt;(object, data) do 'Each start can only have one visitor and one end.' \nend\n}\n\n class VisitsController\n\n   def create \n     @visit = Visit.find(params[:id])\n     if @visit.save\n       flash.now[:success] = 'Visit created' \n       redirect_to @visit\n     else\n       @errors = @visit.errors.full_messages\n       flash[:danger] = @errors\n       redirect_to root_url \n     end \n   end \n</code></pre>\n\n<p><a href=\"http://guides.rubyonrails.org/v3.2.13/active_record_validations_callbacks.html\" rel=\"nofollow\">http://guides.rubyonrails.org/v3.2.13/active_record_validations_callbacks.html</a></p>\n"}], "owner": {"reputation": 87, "user_id": 6912352, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/65ced5a76189a770c0fe379bc86bf7cc?s=128&d=identicon&r=PG&f=1", "display_name": "Benny", "link": "https://stackoverflow.com/users/6912352/benny"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 50, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1477488933, "creation_date": 1477430059, "last_edit_date": 1477488933, "question_id": 40249824, "link": "https://stackoverflow.com/questions/40249824/avoiding-exceptions-while-violating-a-validation", "title": "Avoiding exceptions while violating a validation", "body": "<p>I'm not really experienced at Ruby on Rails so I need your help.</p>\n\n<p><strong>Visit.rb</strong></p>\n\n<pre><code>class Visit &lt; ActiveRecord::Base\n\n    belongs_to          :employee\n    belongs_to          :visitor\n    default_scope   -&gt;  { order(:created_at) }\n\n    validates   :start,           presence: true,     uniqueness: {scope: [:end, :visitor_id]}\n    validates   :end,             presence: true\n    validates   :visitor_id,      presence: true\n    validates   :employee_id,     presence: true\n    validate    :valid_date_range_required\n\n    def valid_date_range_required\n        if (start &amp;&amp; end) &amp;&amp; (end &lt; start)\n            errors.add(:end, \"must be after start\")\n        end\n    end\nend\n</code></pre>\n\n<p><strong>schema.rb</strong></p>\n\n<pre><code>create_table \"visits\", force: true do |t|\n    t.datetime \"created_at\",                         null: false\n    t.datetime \"updated_at\",                         null: false\n    t.date     \"start\"\n    t.date     \"end\"\n    t.integer  \"idVisit\"\n    t.integer  \"employee_id\"\n    t.integer  \"visitor_id\"\n    t.string   \"status\",      default: \"Confirmed\"\n  end\n\n  add_index \"visits\", [\"start\", \"end\", \"visitor_id\"], name: \"index_visits_on_start_and_end_and_visitor_id\", unique: true\n</code></pre>\n\n<p>During my tests, if I violate validation on uniqueness or on :valid_date_range_required my application raises a sort of exception blocking itself (for example: <em>First argument in form cannot contain nil or be empty</em>). Instead I wouldn't want the application to show it, but I would want the application to show a sort of error message during the creation of the Visit so that the user can fill the form in an appropriate way.</p>\n\n<p>May someone of you help me to understand a way to do it?  </p>\n\n<p><strong>EDIT:</strong></p>\n\n<p><strong>visits_controller.rb</strong></p>\n\n<pre><code>class VisitsController &lt; ApplicationController\n    before_action :logged_in_employee,  only: [:create,    :destroy]\n    before_action :correct_employee,    only: [:destroy,   :update ]\n\n    def create\n        @visit = current_employee.visits.build(visit_params)\n        if @visit.save\n            flash[:success] = \"Visit added\"\n            redirect_to employee_path(session[:employee_id], :act =&gt; 'guestsVisits')\n        else\n            @visits = current_employee.visits.all\n            @employee = current_employee\n            @errors = @visit.errors.full_messages\n            flash[:danger] = @errors\n            render 'employees/guestsVisits'\n        end\n    end\n\n\n\n    private\n\n        def visit_params\n            params.require(:visit).permit(:start, :end, :visitor_id, :employee_id)\n        end\nend\n</code></pre>\n\n<p><strong>guestsVisits.rb</strong> (my view)</p>\n\n<pre><code>&lt;div class=\"jumbotron3 text-center\"&gt;\n  &lt;div class=\"row\"&gt;\n    &lt;h1&gt;Guests Visits&lt;/h1&gt;\n    &lt;hr&gt;\n    &lt;%=render :partial =&gt;\"layouts/sidebar\"%&gt;\n    &lt;div class=\"panel3\"&gt;\n        &lt;div class=\"panel-body\"&gt;\n            &lt;% if logged_in? %&gt;\n                &lt;%=render :partial =&gt;\"shared/error_messages\"%&gt;\n\n                  &lt;a class=\"btn icon-btn btn-success pos\" data-toggle=\"modal\" data-target=\"#visitModal\"&gt;\n                &lt;span class=\"glyphicon btn-glyphicon glyphicon-plus img-circle text-success\"&gt;&lt;/span&gt;\n                Add a visit\n                &lt;/a&gt;\n\n                &lt;div id=\"visitModal\" class=\"modal fade\" role=\"dialog\"&gt;\n                &lt;div class=\"modal-dialog\"&gt;\n\n                &lt;div class=\"modal-content\"&gt;\n\n                &lt;div class=\"modal-header\"&gt;\n                &lt;button type=\"button\" class=\"close\" data-dismiss=\"modal\"&gt;&amp;times;&lt;/button&gt;\n                &lt;h4 class=\"modal-title\"&gt;Add a visit&lt;/h4&gt;\n                &lt;/div&gt;\n\n                &lt;div class=\"modal-body\"&gt;\n                &lt;%= form_for(@visit) do |f| %&gt;\n\n                &lt;%= f.label :start_date %&gt;\n                &lt;%= f.date_field :start, class: 'form-control',:value =&gt; (f.object.start.strftime('%m/%d/%Y') if f.object.start) %&gt;\n                &lt;%= errors_for @visit, :start %&gt;&lt;%if @visit.errors.any?%&gt;&lt;br&gt;&lt;%end%&gt;\n\n                &lt;br&gt;\n                &lt;%= f.label :end_date %&gt;\n                &lt;%= f.date_field :end, class: 'form-control',:value =&gt; (f.object.end.strftime('%m/%d/%Y') if f.object.end) %&gt;\n                &lt;%= errors_for @visit, :end %&gt;&lt;%if @visit.errors.any?%&gt;&lt;br&gt;&lt;%end%&gt;\n\n                &lt;br&gt;\n                &lt;%= f.label :Visitor %&gt;\n                &lt;%= f.collection_select :visitor_id, Visitor.all, :id, :full_name, { :class=&gt; \"form-control\", :include_blank =&gt; ''}%&gt;\n                &lt;%= errors_for @visit, :visitor_id %&gt;&lt;%if @visit.errors.any?%&gt;&lt;br&gt;&lt;%end%&gt;\n                &lt;br&gt;\n                &lt;%= f.submit \"Add visit\", class: \"btn btn-primary btn-color\" %&gt;\n                &lt;% end %&gt;\n                &lt;/div&gt;\n\n                &lt;div class=\"modal-footer\"&gt;\n                &lt;button type=\"button\" class=\"btn btn-info\" data-dismiss=\"modal\"&gt;Close&lt;/button&gt;\n                &lt;/div&gt;\n\n                &lt;/div&gt;\n                &lt;/div&gt;\n                &lt;/div&gt;\n                &lt;% end %&gt;\n                &lt;/div&gt;\n       &lt;/div&gt;\n    &lt;/div&gt;\n  &lt;/div&gt;\n</code></pre>\n\n<p><strong>error_messages.rb</strong></p>\n\n<pre><code>&lt;% if @visit &amp;&amp; @visit.errors.any? %&gt;\n  &lt;div id=\"error_explanation\"&gt;\n    &lt;div class=\"alert alert-danger\"&gt;\n      &lt;a href=\"#\" class=\"close\" data-dismiss=\"alert\" aria-label=\"close\"&gt;&amp;times;&lt;/a&gt;\n      The form contains &lt;%= pluralize(@visit.errors.count, \"error\") %&gt;.Open the modal for more details\n    &lt;/div&gt;\n  &lt;/div&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>What I need is that, adding the end date which comes before the start date or adding a record (start, end, visitor) which is already in the database, I can show the error in my modal without blocking all the application because of <em>First argument in form cannot contain nil or be empty</em> exception or similar.</p>\n\n<p>Thank you a lot.</p>\n"}, {"tags": ["ruby", "ruby-on-rails-4", "object"], "answers": [{"comments": [{"owner": {"reputation": 132, "user_id": 2718745, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/8ZMdW.jpg?s=128&g=1", "display_name": "mdiaz00147", "link": "https://stackoverflow.com/users/2718745/mdiaz00147"}, "edited": false, "score": 0, "creation_date": 1477432060, "post_id": 40250071, "comment_id": 67763219, "body": "Hey mate thanks for the help, im new using the render method, im refactoring the code anyway, many thannks"}], "tags": [], "owner": {"reputation": 7408, "user_id": 1507393, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e18382322851249d60910f4c4957c334?s=128&d=identicon&r=PG", "display_name": "Pyrce", "link": "https://stackoverflow.com/users/1507393/pyrce"}, "is_accepted": true, "score": 4, "last_activity_date": 1477431076, "creation_date": 1477431076, "answer_id": 40250071, "question_id": 40249819, "link": "https://stackoverflow.com/questions/40249819/ruby-on-rails-add-attribute-to-existing-object-from-active-records/40250071#40250071", "title": "Ruby on rails add attribute to existing object from active records", "body": "<p>You're passing an Array of ActiveRecord objects, not hashes. The json converter will parse of the attributes of the model instead of custom variables assigned to those objects. Try converting the models to hashes:</p>\n\n<pre><code>lesson = lesson.attributes\nlesson['palindrome'] = 'TEST'\n</code></pre>\n\n<p>Also consider refactoring your code, I don't think you need those case statements nor the <code>@dayx</code> variables which make it hard to understand.</p>\n"}], "owner": {"reputation": 132, "user_id": 2718745, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/8ZMdW.jpg?s=128&g=1", "display_name": "mdiaz00147", "link": "https://stackoverflow.com/users/2718745/mdiaz00147"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4155, "favorite_count": 0, "accepted_answer_id": 40250071, "answer_count": 1, "score": 1, "last_activity_date": 1477431076, "creation_date": 1477430050, "question_id": 40249819, "link": "https://stackoverflow.com/questions/40249819/ruby-on-rails-add-attribute-to-existing-object-from-active-records", "title": "Ruby on rails add attribute to existing object from active records", "body": "<p>my issue seemed to be an easy one at first but i could not solved it yet, so im getting some records from my DB and then i need to add an attribute to each of those retrieved records. i Try as follow \nMy model </p>\n\n<pre><code>class Lesson &lt; ActiveRecord::Base\n    attr_reader   :palindrome #getter\n    attr_writer   :palindrome #setter\n    attr_accessor :palindrome #both\n\n    belongs_to  :schedule\n    belongs_to  :user\n    has_one     :schedule\n\n\nend\n</code></pre>\n\n<p>and in my controller im doing this to add it</p>\n\n<pre><code>def index\n    @lessons = Lesson.select(:id,:start_date,:users_allowed,:name,:users_enrolled).where(start_date: (Time.now.beginning_of_week.beginning_of_day)..Time.now.end_of_week.end_of_day).order(start_date: :desc)\n    @schedules  = Array(Schedule.where(user_id: 50).pluck(:lesson_id))\n\n    day_id    = params[:id].to_i\n    @day_1 = []\n    @day_2 = []\n    @day_3 = []\n    @day_4 = []\n    @day_5 = []\n    @day_6 = []\n    if day_id.present?\n      @lessons.each do |lesson|\n        lesson.palindrome =  'TEST'\n         case lesson.start_date.wday\n          when 1\n            @day_1 &lt;&lt; lesson\n           when 2\n            @day_2 &lt;&lt; lesson\n           when 3\n            @day_3 &lt;&lt; lesson\n           when 4\n            @day_4 &lt;&lt; lesson\n           when 5\n            @day_5 &lt;&lt; lesson\n           when 6 \n            @day_6 &lt;&lt; lesson\n         end\n      end\n      case day_id\n        when 1\n        @lessons = @day_1\n        when 2\n        @lessons = @day_2\n        when 3\n        @lessons = @day_3\n        when 4\n        @lessons = @day_4\n        when 5\n        @lessons = @day_5\n        when 6\n        @lessons = @day_6\n      end\n      render json: @lessons\n    end\n  end\n</code></pre>\n\n<p>BUT im getting this response </p>\n\n<pre><code>[\n  {\n    \"id\": 7019,\n    \"start_date\": \"2016-10-24T20:30:00.000Z\",\n    \"users_allowed\": 4,\n    \"name\": \"Power - Funcional\",\n    \"users_enrolled\": 2\n  },\n  {\n    \"id\": 7018,\n    \"start_date\": \"2016-10-24T20:00:00.000Z\",\n    \"users_allowed\": 4,\n    \"name\": \"Power - Funcional\",\n    \"users_enrolled\": 0\n  }]\n</code></pre>\n\n<p>as you can see is not returning the new attribute i assigned, however i tried by calling </p>\n\n<pre><code>render json: @lessons[0].palindrome\n</code></pre>\n\n<p>and it does return to me the value of the attribute, my question is how can i do so when i render the entire object it returns the new attr value ?\nMany thanks</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "capybara", "integration-testing"], "answers": [{"comments": [{"owner": {"reputation": 331, "user_id": 4931720, "user_type": "registered", "accept_rate": 56, "profile_image": "https://lh4.googleusercontent.com/-mosfIn_6OMU/AAAAAAAAAAI/AAAAAAAAABs/6VRfNqKaGcw/photo.jpg?sz=128", "display_name": "Damir Nurgaliev", "link": "https://stackoverflow.com/users/4931720/damir-nurgaliev"}, "edited": false, "score": 0, "creation_date": 1477431531, "post_id": 40249971, "comment_id": 67762946, "body": "Thanks, really helpful for me :)"}], "tags": [], "owner": {"reputation": 10255, "user_id": 1155142, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/c680db41999d478ca34d1a77a470e30d?s=128&d=identicon&r=PG", "display_name": "gabrielhilal", "link": "https://stackoverflow.com/users/1155142/gabrielhilal"}, "is_accepted": true, "score": 1, "last_activity_date": 1477431262, "last_edit_date": 1477431262, "creation_date": 1477430656, "answer_id": 40249971, "question_id": 40249790, "link": "https://stackoverflow.com/questions/40249790/capybara-rails-testing-error/40249971#40249971", "title": "Capybara rails testing error", "body": "<p>You are testing the creation of a new user and expecting its email to be displayed after the sign up. So, the <code>user</code> variable is not defined and for that reason you are getting this error. Try the following:</p>\n\n<pre><code>require 'test_helper'\n\nclass UserTasksTest &lt; ActionDispatch::IntegrationTest\n  test 'Should create a new user' do\n    visit root_url\n    click_link 'Sign up'\n    fill_in \"Email\", with: 'capybaratest@test.ru'\n    fill_in \"Password\", with: 'capybara'\n    fill_in \"Password confirmation\", with: 'capybara'\n    click_button 'Sign up'\n    within(\"h1\") do\n      assert has_content?('capybaratest@test.ru')\n    end\n  end\nend\n</code></pre>\n\n<p>Just to clarify, one situation that you would use the <code>user</code> variable is i.e the login flow: before you start the test you would create a valid user and set the <code>user</code> variable with this new user... in this way you would be able to fill in email/password fields with email and password used to create the user, and finally check if it displays i.e <code>\"Welcome #{user.name}\"</code>.</p>\n"}], "owner": {"reputation": 331, "user_id": 4931720, "user_type": "registered", "accept_rate": 56, "profile_image": "https://lh4.googleusercontent.com/-mosfIn_6OMU/AAAAAAAAAAI/AAAAAAAAABs/6VRfNqKaGcw/photo.jpg?sz=128", "display_name": "Damir Nurgaliev", "link": "https://stackoverflow.com/users/4931720/damir-nurgaliev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 29, "favorite_count": 0, "accepted_answer_id": 40249971, "answer_count": 1, "score": 0, "last_activity_date": 1477431262, "creation_date": 1477429919, "question_id": 40249790, "link": "https://stackoverflow.com/questions/40249790/capybara-rails-testing-error", "title": "Capybara rails testing error", "body": "<p>I'm new at rails. I'm using a copybara gem for testing the devise. Here is a test code</p>\n\n<pre><code>require 'test_helper'\n\nclass UserTasksTest &lt; ActionDispatch::IntegrationTest\n  test 'Should create a new user' do\n    visit root_url\n    click_link 'Sign up'\n    fill_in \"Email\", with: 'capybaratest@test.ru'\n    fill_in \"Password\", with: 'capybara'\n    fill_in \"Password confirmation\", with: 'capybara'\n    click_button 'Sign up'\n    within(\"h1\") do\n      assert has_content?(user.email)\n    end\n  end\nend\n</code></pre>\n\n<p>After running a test i've got an error:</p>\n\n<blockquote>\n  <p>undefined local variable or method `user'</p>\n</blockquote>\n\n<p>How should I write the test correctly?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "image", "api"], "comments": [{"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1477430275, "post_id": 40249416, "comment_id": 67762293, "body": "if you have a read-enabled filesystem you can use wget to save the images to the public directory, store pointers to the images in a lru cache like <code>lru_redux</code> and on an interval in a background thread, delete images that aren&#39;t in the cache.  But are you sure you need to cache images at all? Unless you&#39;re doing some server-size image manipulation there&#39;s no need; browsers have a built-in cache and by having clients use the original url you&#39;ll be able to take advantage of existing CDN setups."}, {"owner": {"reputation": 2174, "user_id": 3448554, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/j7RcG.jpg?s=128&g=1", "display_name": "Kelsey Hannan", "link": "https://stackoverflow.com/users/3448554/kelsey-hannan"}, "edited": false, "score": 0, "creation_date": 1477441407, "post_id": 40249416, "comment_id": 67765874, "body": "If you are hosting image content with a priority for that content not breaking over time I would recommend independently saving image assets into your own cloud storage (e.g. s3) unless the image content is only needed temporarily, or will be processed in such high numbers that storage will be cost prohibitive.  Images from external URL&#39;s will break constantly on you, and will become a problem if your content needs to be available for medium-to-longer periods of time."}], "owner": {"reputation": 326, "user_id": 4954795, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/9d5a6a4729a786805054a118296d8bc5?s=128&d=identicon&r=PG&f=1", "display_name": "teresa", "link": "https://stackoverflow.com/users/4954795/teresa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 853, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1477428472, "creation_date": 1477428472, "last_edit_date": 1495540838, "question_id": 40249416, "link": "https://stackoverflow.com/questions/40249416/rails-how-to-store-and-display-image-using-external-url-from-api", "title": "Rails: how to store and display image using external url from API", "body": "<p>I can store the external image URL from the API response, and display it in view. But I am having trouble understanding how to store the the actual image so I can display it without calling the full external URL each time. </p>\n\n<p>These are some of the resources I've looked at: <a href=\"https://stackoverflow.com/questions/13547724/rails-upload-a-file-or-store-a-url\">Rails: upload a file OR store a url</a> and <a href=\"http://code.runnable.com/UnsMH7fYN2V6AAAT/how-to-save-images-by-url-with-paperclip-for-ruby-on-rails-and-upload\" rel=\"nofollow noreferrer\">http://code.runnable.com/UnsMH7fYN2V6AAAT/how-to-save-images-by-url-with-paperclip-for-ruby-on-rails-and-upload</a>. </p>\n\n<p>This is what I have so far: </p>\n\n<pre><code># this is used for file upload from create form \nhas_attached_file :ephoto, :styles =&gt; { :medium =&gt; \"480x270#\",  :small =&gt; \"240x135#\" }, :default_url =&gt; \"/images/:style/missing.png\"\n\n    if group_response.nil?\n    else \n      group_response.each do |group| \n        # stores external image URL into \"ephoto_file_name\"\n        event.update_attribute :ephoto_file_name, group[\"group_photo\"][\"photo_link\"]\n        event.ephoto = open(group[\"group_photo\"][\"photo_link\"])\n      end \n    end \n</code></pre>\n\n<p>The <code>event.ephoto = open(group[\"group_photo\"][\"photo_link\"])</code> does not seem to work properly. Using <code>&lt;%= image_tag event.ephoto.url %&gt;</code> just returns broken images. </p>\n\n<p>Display image in view: </p>\n\n<pre><code>  &lt;% @events.each do |event| %&gt;\n    &lt;% if event.ephoto.path.present? &amp;&amp; File.exist?(event.ephoto.path) %&gt;\n    &lt;%= image_tag event.ephoto.url(:medium) %&gt;\n    &lt;% else %&gt;\n      &lt;%= image_tag 'event-placeholder.png' %&gt;\n      &lt;%= image_tag event.ephoto_file_name %&gt;\n    &lt;% end %&gt;\n  &lt;% end %&gt;\n</code></pre>\n\n<p>The <code>&lt;%= image_tag event.ephoto_file_name %&gt;</code> just uses the external URL each time to display the image instead of a stored image.</p>\n\n<p>Is there a better way to display images from API responses? Any suggestions or insights would help. Thanks!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "url", "routes", "rails-routing"], "answers": [{"comments": [{"owner": {"reputation": 73, "user_id": 5155273, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh4.googleusercontent.com/-gDK3MZQAqBU/AAAAAAAAAAI/AAAAAAAAArg/V2XU3CyUdY8/photo.jpg?sz=128", "display_name": "Lasha Amashukeli", "link": "https://stackoverflow.com/users/5155273/lasha-amashukeli"}, "edited": false, "score": 0, "creation_date": 1477428840, "post_id": 40249470, "comment_id": 67761503, "body": "It does in deed. :) Thanks!"}], "tags": [], "owner": {"reputation": 22303, "user_id": 2456433, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NiN8K.jpg?s=128&g=1", "display_name": "infused", "link": "https://stackoverflow.com/users/2456433/infused"}, "is_accepted": true, "score": 2, "last_activity_date": 1477428683, "creation_date": 1477428683, "answer_id": 40249470, "question_id": 40249386, "link": "https://stackoverflow.com/questions/40249386/rails-routes-config-thinks-action-method-is-an-object-id/40249470#40249470", "title": "Rails routes config thinks action method is an object id", "body": "<p>Routes are matched in the order they are specified so make sure the route for \"by_director\" is defined <strong>above</strong> the resource routes for movies.  </p>\n\n<p>Something like this should do the trick:</p>\n\n<pre><code>get '/movies/by_director' =&gt; 'movies#by_director'\nresources :movies\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "is_accepted": false, "score": 1, "last_activity_date": 1477433346, "last_edit_date": 1495540838, "creation_date": 1477433346, "answer_id": 40250559, "question_id": 40249386, "link": "https://stackoverflow.com/questions/40249386/rails-routes-config-thinks-action-method-is-an-object-id/40250559#40250559", "title": "Rails routes config thinks action method is an object id", "body": "<p>There are two problems in one here:</p>\n\n<ol>\n<li>The default pattern matching for <code>:id</code> is loose enough that <code>by_director</code> is interpreted as an <code>:id</code>.</li>\n<li>Routes are matched in order and <code>GET /movies/:id</code> appears before <code>GET \n/movies/by_director</code>.</li>\n</ol>\n\n<p>You can manually define <code>GET /movies/by_director</code> before your <code>resources :movie</code> as <a href=\"https://stackoverflow.com/a/40249470/479863\">infused suggests</a> or you could add a constraint to narrow what <code>:id</code>s look like:</p>\n\n<pre><code>resources :movies, constraints: { id: /\\d+/ } do\n  #...\nend\n</code></pre>\n\n<p>Manually ordering the routes is fine if there's just one or two of them to deal with, constraining <code>:id</code> is (IMO) cleaner and less error prone.</p>\n"}], "owner": {"reputation": 73, "user_id": 5155273, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh4.googleusercontent.com/-gDK3MZQAqBU/AAAAAAAAAAI/AAAAAAAAArg/V2XU3CyUdY8/photo.jpg?sz=128", "display_name": "Lasha Amashukeli", "link": "https://stackoverflow.com/users/5155273/lasha-amashukeli"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 368, "favorite_count": 0, "accepted_answer_id": 40249470, "answer_count": 2, "score": 1, "last_activity_date": 1477433354, "creation_date": 1477428347, "last_edit_date": 1477433354, "question_id": 40249386, "link": "https://stackoverflow.com/questions/40249386/rails-routes-config-thinks-action-method-is-an-object-id", "title": "Rails routes config thinks action method is an object id", "body": "<p>I'm developing rails application and encountered such problem.</p>\n\n<p>I have <code>movies_controller.rb</code>, where I have these actions and routes defined:</p>\n\n<pre><code>            Prefix Verb   URI Pattern                   Controller#Action\n            movies GET    /movies(.:format)             movies#index\n                   POST   /movies(.:format)             movies#create\n         new_movie GET    /movies/new(.:format)         movies#new\n        edit_movie GET    /movies/:id/edit(.:format)    movies#edit\n             movie GET    /movies/:id(.:format)         movies#show\n                   PATCH  /movies/:id(.:format)         movies#update\n                   PUT    /movies/:id(.:format)         movies#update\n                   DELETE /movies/:id(.:format)         movies#destroy\n              root GET    /                             redirect(301, /movies)\nmovies_by_director GET    /movies/by_director(.:format) movies#by_director\n</code></pre>\n\n<p>But when I try to go to <code>/movies/by_director?director=\"something\"</code>, rails think, that I'm navigating to <code>movies#show</code> action with parameter <code>:id = by_director</code>.</p>\n\n<p>What am I doing wrong?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "git", "heroku"], "comments": [{"owner": {"reputation": 48635, "user_id": 6742, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/xPawo.png?s=128&g=1", "display_name": "David Aldridge", "link": "https://stackoverflow.com/users/6742/david-aldridge"}, "edited": false, "score": 0, "creation_date": 1477427904, "post_id": 40249171, "comment_id": 67760952, "body": "Is the migration listed in the schema_migrations table?"}, {"owner": {"reputation": 1740, "user_id": 6749371, "user_type": "registered", "accept_rate": 32, "profile_image": "https://www.gravatar.com/avatar/1fb6335a13491c2ead854c6c24a81771?s=128&d=identicon&r=PG&f=1", "display_name": "J Seabolt", "link": "https://stackoverflow.com/users/6749371/j-seabolt"}, "reply_to_user": {"reputation": 48635, "user_id": 6742, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/xPawo.png?s=128&g=1", "display_name": "David Aldridge", "link": "https://stackoverflow.com/users/6742/david-aldridge"}, "edited": false, "score": 0, "creation_date": 1477427996, "post_id": 40249171, "comment_id": 67761003, "body": "yes, it is. Very, very confusing."}, {"owner": {"reputation": 48635, "user_id": 6742, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/xPawo.png?s=128&g=1", "display_name": "David Aldridge", "link": "https://stackoverflow.com/users/6742/david-aldridge"}, "edited": false, "score": 0, "creation_date": 1477428060, "post_id": 40249171, "comment_id": 67761043, "body": "If you delete it, that migration should execute when you run the migration task."}, {"owner": {"reputation": 515, "user_id": 4118252, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/a873f0d22f24426762ccf352aa933e6e?s=128&d=identicon&r=PG&f=1", "display_name": "Inzamam Tahir", "link": "https://stackoverflow.com/users/4118252/inzamam-tahir"}, "edited": false, "score": 1, "creation_date": 1477428079, "post_id": 40249171, "comment_id": 67761055, "body": "Have you checked whether the migration ran successfully using heroku run rake db:migrate:status ????"}, {"owner": {"reputation": 1740, "user_id": 6749371, "user_type": "registered", "accept_rate": 32, "profile_image": "https://www.gravatar.com/avatar/1fb6335a13491c2ead854c6c24a81771?s=128&d=identicon&r=PG&f=1", "display_name": "J Seabolt", "link": "https://stackoverflow.com/users/6749371/j-seabolt"}, "edited": false, "score": 0, "creation_date": 1477428284, "post_id": 40249171, "comment_id": 67761174, "body": "So I ran heroku run rake db:migrate:status and got this.   Status   Migration ID    Migration Name --------------------------------------------------    up     20161019224903  Create posts   down    20161020160825  Add content to posts   down    20161020161113  Add description to posts   down    20161020161457  Add user id to posts   down    20161020170105  Create friendly id slugs   down    20161020170213  Add slug to posts   down    20161020202402  Add attachment photo to posts   down    20161024210723  Remove level from posts   down    20161024220148  Add ranking to posts"}, {"owner": {"reputation": 1740, "user_id": 6749371, "user_type": "registered", "accept_rate": 32, "profile_image": "https://www.gravatar.com/avatar/1fb6335a13491c2ead854c6c24a81771?s=128&d=identicon&r=PG&f=1", "display_name": "J Seabolt", "link": "https://stackoverflow.com/users/6749371/j-seabolt"}, "edited": false, "score": 0, "creation_date": 1477428328, "post_id": 40249171, "comment_id": 67761198, "body": "It says that many of them didn&#39;t work. Posted oddly."}, {"owner": {"reputation": 515, "user_id": 4118252, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/a873f0d22f24426762ccf352aa933e6e?s=128&d=identicon&r=PG&f=1", "display_name": "Inzamam Tahir", "link": "https://stackoverflow.com/users/4118252/inzamam-tahir"}, "edited": false, "score": 0, "creation_date": 1477428538, "post_id": 40249171, "comment_id": 67761310, "body": "According to that migration status, only one migration ran successfully, which is the first one."}, {"owner": {"reputation": 515, "user_id": 4118252, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/a873f0d22f24426762ccf352aa933e6e?s=128&d=identicon&r=PG&f=1", "display_name": "Inzamam Tahir", "link": "https://stackoverflow.com/users/4118252/inzamam-tahir"}, "edited": false, "score": 0, "creation_date": 1477428654, "post_id": 40249171, "comment_id": 67761393, "body": "Also, according to the status, problem started in the &quot;Add content to posts&quot; migration and you should not even have that column on heroku...Check that  migration"}, {"owner": {"reputation": 515, "user_id": 4118252, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/a873f0d22f24426762ccf352aa933e6e?s=128&d=identicon&r=PG&f=1", "display_name": "Inzamam Tahir", "link": "https://stackoverflow.com/users/4118252/inzamam-tahir"}, "edited": false, "score": 0, "creation_date": 1477428680, "post_id": 40249171, "comment_id": 67761415, "body": "Run this command heroku run rake db:migrate:up VERSION=20161020160825"}, {"owner": {"reputation": 1740, "user_id": 6749371, "user_type": "registered", "accept_rate": 32, "profile_image": "https://www.gravatar.com/avatar/1fb6335a13491c2ead854c6c24a81771?s=128&d=identicon&r=PG&f=1", "display_name": "J Seabolt", "link": "https://stackoverflow.com/users/6749371/j-seabolt"}, "edited": false, "score": 0, "creation_date": 1477429338, "post_id": 40249171, "comment_id": 67761784, "body": "I figured it out. I had sloppy migration files in my local version. I was asking heroku to delete a column that no longer existed and the whole migration failed. I deleted the leftover migration files in my local version and then ran the migration again. It worked after I cleaned things up. Thank you for the help"}], "answers": [{"tags": [], "owner": {"reputation": 759, "user_id": 5266581, "user_type": "registered", "accept_rate": 87, "profile_image": "https://lh3.googleusercontent.com/-4WBTC_1yMB8/AAAAAAAAAAI/AAAAAAAAACI/pCGef6nYJik/photo.jpg?sz=128", "display_name": "Engr.Tanbir Hasan", "link": "https://stackoverflow.com/users/5266581/engr-tanbir-hasan"}, "is_accepted": false, "score": 0, "last_activity_date": 1477459803, "creation_date": 1477459803, "answer_id": 40254388, "question_id": 40249171, "link": "https://stackoverflow.com/questions/40249171/heroku-tables-not-updating/40254388#40254388", "title": "Heroku tables not updating", "body": "<p>You can run this command on heroku:</p>\n\n<pre><code>$ heroku run rake db:drop\n$ heroku run rake db:create\n$ heroku run rake db:schema:load\n</code></pre>\n\n<p>If this commands are not work, you can delete .git file from your project and add git again and push the project in heroku.</p>\n"}], "owner": {"reputation": 1740, "user_id": 6749371, "user_type": "registered", "accept_rate": 32, "profile_image": "https://www.gravatar.com/avatar/1fb6335a13491c2ead854c6c24a81771?s=128&d=identicon&r=PG&f=1", "display_name": "J Seabolt", "link": "https://stackoverflow.com/users/6749371/j-seabolt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 108, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1477459803, "creation_date": 1477427436, "question_id": 40249171, "link": "https://stackoverflow.com/questions/40249171/heroku-tables-not-updating", "title": "Heroku tables not updating", "body": "<p>I am building a news app with Rails. My tables in heroku are not updating when I run heroku run rake db:migrate. I have tried heroku restart several times. There are two items that show up in my local version, but when I check the heroku version, these two columns are consistently missing. I feel like I have read a million stack overflow pages on the topic and nothing has worked. </p>\n\n<p>This is how I am committing my changes:</p>\n\n<ol>\n<li>git add .</li>\n<li>git commit -m \"my changes\"</li>\n<li>git push heroku master</li>\n<li>heroku run rake db:migrate </li>\n</ol>\n\n<p>When I try to add a new post, I get this error in the heroku logs:</p>\n\n<pre><code>2016-10-25T20:23:05.717260+00:00 app[web.1]: I, [2016-10-25T20:23:05.717163 #3]  INFO -- : [5f60f5aa-8453-4a3a-88f3-daf7b5c673d7] Completed 500 Internal Server Error in 37ms (ActiveRecord: 18.7ms)\n2016-10-25T20:23:05.718597+00:00 app[web.1]: F, [2016-10-25T20:23:05.718551 #3] FATAL -- : [5f60f5aa-8453-4a3a-88f3-daf7b5c673d7] NoMethodError (undefined method `slug' for #&lt;Post:0x007fb471ff2cd8&gt;):\n2016-10-25T20:23:05.718481+00:00 app[web.1]: F, [2016-10-25T20:23:05.718425 #3] FATAL -- : [5f60f5aa-8453-4a3a-88f3-daf7b5c673d7]   \n2016-10-25T20:23:05.718644+00:00 app[web.1]: F, [2016-10-25T20:23:05.718604 #3] FATAL -- : [5f60f5aa-8453-4a3a-88f3-daf7b5c673d7]   \n2016-10-25T20:23:05.718727+00:00 app[web.1]: F, [2016-10-25T20:23:05.718688 #3] FATAL -- : [5f60f5aa-8453-4a3a-88f3-daf7b5c673d7] app/controllers/posts_controller.rb:30:in `create'\n2016-10-25T20:23:05.718686+00:00 app[web.1]: F, [2016-10-25T20:23:05.718647 #3] FATAL -- : [5f60f5aa-8453-4a3a-88f3-daf7b5c673d7] app/controllers/posts_controller.rb:31:in `block in create'\n</code></pre>\n\n<p>This is what I have in my local \"posts\" table: </p>\n\n<pre><code>Post(id: integer, created_at: datetime, updated_at: datetime, title: string, content: string, description: string, User_Id: integer, slug: string, photo_file_name: string, photo_content_type: string, photo_file_size: integer, photo_updated_at: datetime, ranking: string)\n</code></pre>\n\n<p>This is what I have in Heroku: </p>\n\n<pre><code>Post(id: integer, created_at: datetime, updated_at: datetime, title: string, content: string, description: string, user_id: integer)\n</code></pre>\n\n<p>Can someone please help? You would be my hero. This is stopping my entire day. Thanks!</p>\n\n<p>It also might be worth mentioning that I created this app before and then deleted it. This is my second time deploying this same app to heroku under the same name. I'm uncertain if that is relevant. </p>\n"}, {"tags": ["ruby"], "answers": [{"comments": [{"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "edited": false, "score": 0, "creation_date": 1477426723, "post_id": 40248976, "comment_id": 67760313, "body": "lightning fast! Some explanation won&#39;t hurt though (you&#39;re probably on it at the moment) :)"}], "tags": [], "owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "is_accepted": true, "score": 3, "last_activity_date": 1477428357, "last_edit_date": 1477428357, "creation_date": 1477426667, "answer_id": 40248976, "question_id": 40248956, "link": "https://stackoverflow.com/questions/40248956/undefined-method-for-nilnilclass/40248976#40248976", "title": "Undefined method &#39;[]=&#39; for nil:NilClass", "body": "<pre><code>class Derp\n  def initialize\n    @state = Hash.new\n  end\n\n  def run\n    @state[:ran] = true\n  end\nend\n\nderp = Derp.new\nderp.run\n</code></pre>\n\n<p>The problem in your code is that in the way you did the hash is assigned to the instance variable @state of the class object Derp, not to Derp's objects. Instance variables of the class are different from instance variables of that class\u2019s objects. You could use that variable in class methods. E.g.</p>\n\n<pre><code>class Derp\n  @state = 42\n\n  def self.state\n    @state\n  end\nend\n\nputs Derp.state # 42\n</code></pre>\n"}], "owner": {"reputation": 1504, "user_id": 48796, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/8289b7981dda88d2d351c31d0affc820?s=128&d=identicon&r=PG", "display_name": "sluther", "link": "https://stackoverflow.com/users/48796/sluther"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "accepted_answer_id": 40248976, "answer_count": 1, "score": 0, "last_activity_date": 1477428357, "creation_date": 1477426605, "last_edit_date": 1477427547, "question_id": 40248956, "link": "https://stackoverflow.com/questions/40248956/undefined-method-for-nilnilclass", "title": "Undefined method &#39;[]=&#39; for nil:NilClass", "body": "<p>I have the following code:</p>\n\n<pre><code>class Derp\n    @state = Hash.new\n\n    def run\n        @state[:ran] = true\n    end\nend\n\nderp = Derp.new\nderp.run\n</code></pre>\n\n<p>Which results in the following error:</p>\n\n<pre><code>NoMethodError: undefined method `[]=' for nil:NilClass\n    from (irb):4:in `run'\n    from (irb):8\n    from /usr/local/bin/irb:11:in `&lt;main&gt;'\n</code></pre>\n\n<p>I'm pretty new to Ruby, so I'm not sure exactly what's going on here. Anyone have any ideas?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 2174, "user_id": 3448554, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/j7RcG.jpg?s=128&g=1", "display_name": "Kelsey Hannan", "link": "https://stackoverflow.com/users/3448554/kelsey-hannan"}, "edited": false, "score": 0, "creation_date": 1477426816, "post_id": 40248876, "comment_id": 67760361, "body": "Please post your routes.rb configuration for this controller."}, {"owner": {"reputation": 111, "user_id": 7071657, "user_type": "registered", "accept_rate": 18, "profile_image": "https://www.gravatar.com/avatar/2db130e1e31ec25830e701b0ee7a4aea?s=128&d=identicon&r=PG&f=1", "display_name": "David Sawatske", "link": "https://stackoverflow.com/users/7071657/david-sawatske"}, "reply_to_user": {"reputation": 2174, "user_id": 3448554, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/j7RcG.jpg?s=128&g=1", "display_name": "Kelsey Hannan", "link": "https://stackoverflow.com/users/3448554/kelsey-hannan"}, "edited": false, "score": 0, "creation_date": 1477427368, "post_id": 40248876, "comment_id": 67760681, "body": "Rails.application.routes.draw do   get &#39;welcome/index&#39;    root &#39;welcome#index&#39;    resources :docs end"}, {"owner": {"reputation": 3867, "user_id": 3906189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/432b41df14bd9197f1b8601cabf49386?s=128&d=identicon&r=PG", "display_name": "siegy22", "link": "https://stackoverflow.com/users/3906189/siegy22"}, "edited": false, "score": 0, "creation_date": 1477429394, "post_id": 40248876, "comment_id": 67761824, "body": "in what environment are you running your app? dev/test/prod?"}, {"owner": {"reputation": 111, "user_id": 7071657, "user_type": "registered", "accept_rate": 18, "profile_image": "https://www.gravatar.com/avatar/2db130e1e31ec25830e701b0ee7a4aea?s=128&d=identicon&r=PG&f=1", "display_name": "David Sawatske", "link": "https://stackoverflow.com/users/7071657/david-sawatske"}, "edited": false, "score": 0, "creation_date": 1477429478, "post_id": 40248876, "comment_id": 67761868, "body": "dev. it is running locally only."}, {"owner": {"reputation": 2174, "user_id": 3448554, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/j7RcG.jpg?s=128&g=1", "display_name": "Kelsey Hannan", "link": "https://stackoverflow.com/users/3448554/kelsey-hannan"}, "edited": false, "score": 0, "creation_date": 1477430184, "post_id": 40248876, "comment_id": 67762248, "body": "what rails version are you on?"}, {"owner": {"reputation": 111, "user_id": 7071657, "user_type": "registered", "accept_rate": 18, "profile_image": "https://www.gravatar.com/avatar/2db130e1e31ec25830e701b0ee7a4aea?s=128&d=identicon&r=PG&f=1", "display_name": "David Sawatske", "link": "https://stackoverflow.com/users/7071657/david-sawatske"}, "edited": false, "score": 0, "creation_date": 1477430824, "post_id": 40248876, "comment_id": 67762593, "body": "version: Rails 4.2.5.1"}, {"owner": {"reputation": 1820, "user_id": 5830835, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/29a99125813cee34a6ecfe0d0e432eb1?s=128&d=identicon&r=PG&f=1", "display_name": "Timmy Von Heiss ", "link": "https://stackoverflow.com/users/5830835/timmy-von-heiss"}, "edited": false, "score": 0, "creation_date": 1477440867, "post_id": 40248876, "comment_id": 67765750, "body": "you have not defined @doc in the controller under the show action"}, {"owner": {"reputation": 111, "user_id": 7071657, "user_type": "registered", "accept_rate": 18, "profile_image": "https://www.gravatar.com/avatar/2db130e1e31ec25830e701b0ee7a4aea?s=128&d=identicon&r=PG&f=1", "display_name": "David Sawatske", "link": "https://stackoverflow.com/users/7071657/david-sawatske"}, "edited": false, "score": 0, "creation_date": 1477486630, "post_id": 40248876, "comment_id": 67786178, "body": "Thanks but that isn&#39;t it either. Please reference the before action at the top of the controller."}], "answers": [{"comments": [{"owner": {"reputation": 111, "user_id": 7071657, "user_type": "registered", "accept_rate": 18, "profile_image": "https://www.gravatar.com/avatar/2db130e1e31ec25830e701b0ee7a4aea?s=128&d=identicon&r=PG&f=1", "display_name": "David Sawatske", "link": "https://stackoverflow.com/users/7071657/david-sawatske"}, "edited": false, "score": 0, "creation_date": 1477426794, "post_id": 40248932, "comment_id": 67760350, "body": "I do. I updated to gem &#39;jquery-rails&#39;, &#39;~&gt; 4.2&#39;, &#39;&gt;= 4.2.1&#39; in the gem file to make sure."}, {"owner": {"reputation": 6424, "user_id": 17076, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/38a8230ed3d5c685558b4f0aad3fc74b?s=128&d=identicon&r=PG", "display_name": "Joe Van Dyk", "link": "https://stackoverflow.com/users/17076/joe-van-dyk"}, "reply_to_user": {"reputation": 111, "user_id": 7071657, "user_type": "registered", "accept_rate": 18, "profile_image": "https://www.gravatar.com/avatar/2db130e1e31ec25830e701b0ee7a4aea?s=128&d=identicon&r=PG&f=1", "display_name": "David Sawatske", "link": "https://stackoverflow.com/users/7071657/david-sawatske"}, "edited": false, "score": 0, "creation_date": 1477426844, "post_id": 40248932, "comment_id": 67760376, "body": "right.. but is it loaded on the page? any javascript errors? You can look at the network request in chrome debugger to figure out if it&#39;s doing a GET or a POST when clicking the link."}, {"owner": {"reputation": 111, "user_id": 7071657, "user_type": "registered", "accept_rate": 18, "profile_image": "https://www.gravatar.com/avatar/2db130e1e31ec25830e701b0ee7a4aea?s=128&d=identicon&r=PG&f=1", "display_name": "David Sawatske", "link": "https://stackoverflow.com/users/7071657/david-sawatske"}, "edited": false, "score": 0, "creation_date": 1477427096, "post_id": 40248932, "comment_id": 67760538, "body": "3:5 GET <a href=\"http://localhost:3000/stylesheets/default.css\" rel=\"nofollow noreferrer\">localhost:3000/stylesheets/default.css</a>  3:6 GET <a href=\"http://localhost:3000/javascripts/default.js\" rel=\"nofollow noreferrer\">localhost:3000/javascripts/default.js</a>"}, {"owner": {"reputation": 111, "user_id": 7071657, "user_type": "registered", "accept_rate": 18, "profile_image": "https://www.gravatar.com/avatar/2db130e1e31ec25830e701b0ee7a4aea?s=128&d=identicon&r=PG&f=1", "display_name": "David Sawatske", "link": "https://stackoverflow.com/users/7071657/david-sawatske"}, "edited": false, "score": 0, "creation_date": 1477427176, "post_id": 40248932, "comment_id": 67760578, "body": "These are showing in the console tab of the debugger. Is this the information you needed? Thanks for your patience when dealing with someone who is trying to learn"}, {"owner": {"reputation": 1548, "user_id": 1246279, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2533d5a4299cad329268e552c47fa8d?s=128&d=identicon&r=PG", "display_name": "philomory", "link": "https://stackoverflow.com/users/1246279/philomory"}, "edited": false, "score": 0, "creation_date": 1477430408, "post_id": 40248932, "comment_id": 67762367, "body": "You want the network tab, not the console tab. Watch to see what new requests are issued when you click the delete link."}, {"owner": {"reputation": 111, "user_id": 7071657, "user_type": "registered", "accept_rate": 18, "profile_image": "https://www.gravatar.com/avatar/2db130e1e31ec25830e701b0ee7a4aea?s=128&d=identicon&r=PG&f=1", "display_name": "David Sawatske", "link": "https://stackoverflow.com/users/7071657/david-sawatske"}, "edited": false, "score": 0, "creation_date": 1477432242, "post_id": 40248932, "comment_id": 67763316, "body": "default.css\t404\tstylesheet\t4:5\t0\u2009B\t192\u2009ms\t default.js\t        404\tscript\t        4:6\t0\u2009B\t362\u2009ms                                       These show in red"}], "tags": [], "owner": {"reputation": 6424, "user_id": 17076, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/38a8230ed3d5c685558b4f0aad3fc74b?s=128&d=identicon&r=PG", "display_name": "Joe Van Dyk", "link": "https://stackoverflow.com/users/17076/joe-van-dyk"}, "is_accepted": false, "score": 0, "last_activity_date": 1478544729, "last_edit_date": 1478544729, "creation_date": 1477426527, "answer_id": 40248932, "question_id": 40248876, "link": "https://stackoverflow.com/questions/40248876/ror-delete-action-only-reloading-page/40248932#40248932", "title": "ROR: Delete action only reloading page", "body": "<p>Do you have jquery_ujs (found at <a href=\"https://github.com/rails/jquery-rails\" rel=\"nofollow noreferrer\">https://github.com/rails/jquery-rails</a>) loaded on the page? Javascript is required to change the <code>&lt;a&gt;</code> to a form post with method=delete.</p>\n"}, {"comments": [{"owner": {"reputation": 111, "user_id": 7071657, "user_type": "registered", "accept_rate": 18, "profile_image": "https://www.gravatar.com/avatar/2db130e1e31ec25830e701b0ee7a4aea?s=128&d=identicon&r=PG&f=1", "display_name": "David Sawatske", "link": "https://stackoverflow.com/users/7071657/david-sawatske"}, "edited": false, "score": 0, "creation_date": 1477428668, "post_id": 40249401, "comment_id": 67761407, "body": "Thanks for the input. Unfortunately, this is not the issue as the above described are already present."}], "tags": [], "owner": {"reputation": 2174, "user_id": 3448554, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/j7RcG.jpg?s=128&g=1", "display_name": "Kelsey Hannan", "link": "https://stackoverflow.com/users/3448554/kelsey-hannan"}, "is_accepted": false, "score": 0, "last_activity_date": 1477428411, "last_edit_date": 1495541617, "creation_date": 1477428411, "answer_id": 40249401, "question_id": 40248876, "link": "https://stackoverflow.com/questions/40248876/ror-delete-action-only-reloading-page/40249401#40249401", "title": "ROR: Delete action only reloading page", "body": "<p>Make sure gem 'jquery-rails' is in gemfile and jquery_ujs is included in app/assets/javascripts/application.js file</p>\n\n<pre><code>//= require jquery\n//= require jquery_ujs\n</code></pre>\n\n<p>I believe your problem is similar <a href=\"https://stackoverflow.com/questions/18154916/rails-4-link-to-destroy-not-working-in-getting-started-tutorial\">this question</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 111, "user_id": 7071657, "user_type": "registered", "accept_rate": 18, "profile_image": "https://www.gravatar.com/avatar/2db130e1e31ec25830e701b0ee7a4aea?s=128&d=identicon&r=PG&f=1", "display_name": "David Sawatske", "link": "https://stackoverflow.com/users/7071657/david-sawatske"}, "is_accepted": false, "score": 0, "last_activity_date": 1477575682, "creation_date": 1477575682, "answer_id": 40286136, "question_id": 40248876, "link": "https://stackoverflow.com/questions/40248876/ror-delete-action-only-reloading-page/40286136#40286136", "title": "ROR: Delete action only reloading page", "body": "<p>Thank you everyone for the help! I was able to figure out the source of the problem.</p>\n\n<p>I had changed 'application' to 'default' in the application.html.erb on lines 5 and 6 to fix a Rails ExecJS::ProgramError in Pages#home? error that has is common on Windows machines. </p>\n\n<p>For reference, the fix was to install a prev version of the  gem 'coffee-script-source', '1.8.0'. After changing back the application.html.erb file, I am now in business!</p>\n\n<p>Thanks again for all who helped!</p>\n"}], "owner": {"reputation": 111, "user_id": 7071657, "user_type": "registered", "accept_rate": 18, "profile_image": "https://www.gravatar.com/avatar/2db130e1e31ec25830e701b0ee7a4aea?s=128&d=identicon&r=PG&f=1", "display_name": "David Sawatske", "link": "https://stackoverflow.com/users/7071657/david-sawatske"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 95, "favorite_count": 0, "answer_count": 3, "score": 3, "last_activity_date": 1478544729, "creation_date": 1477426289, "last_edit_date": 1477431989, "question_id": 40248876, "link": "https://stackoverflow.com/questions/40248876/ror-delete-action-only-reloading-page", "title": "ROR: Delete action only reloading page", "body": "<p>I believe that I have followed the tutorial completely, but when I click the \"Trash It\" link, the page reloads to the same <code>@doc</code> page without any change. </p>\n\n<p>Have a look at the code and let me know what needs to change. </p>\n\n<p>DELETE is a listed verb under the <code>rake routes</code> for <code>docs#destroy</code>.</p>\n\n<p>Thanks so much for the help! </p>\n\n<p><strong>show.html.haml:</strong></p>\n\n<pre><code>%h1= @doc.title\n%p= @doc.content\n\n= link_to \"All Docs\", docs_path\n= link_to \"Fix Docs\", edit_doc_path(@doc)\n= link_to \"Trash It\", doc_path(@doc), method: :delete, data: { confirm: \"Are you Sure?\" }\n</code></pre>\n\n<p><strong>docs_controller.rb:</strong></p>\n\n<pre><code>class DocsController &lt; ApplicationController\n    before_action :find_doc, only: [:show, :edit, :update, :destroy]\n\n    def index\n        @docs = Doc.all.order(\"created_at DESC\")\n    end\n\n    def show\n    end\n\n    def new\n        @doc = Doc.new\n    end\n\n    def create\n        @doc = Doc.new(doc_params)\n\n        if @doc.save\n            redirect_to @doc\n        else\n            render 'new'\n        end\n    end\n\n    def edit\n    end\n\n    def update\n        if @doc.update(doc_params)\n            redirect_to @doc\n        else \n            render 'edit'\n        end\n    end\n\n    def destroy\n        @doc.destroy\n        redirect_to docs_path\n    end\n\n    private \n\n        def find_doc\n            @doc = Doc.find(params[:id])\n        end\n\n        def doc_params\n            params.require(:doc).permit(:title, :content)\n        end\nend\n\n\n\nRails.application.routes.draw do\n  get 'welcome/index'\n\n  root 'welcome#index'\n\n  resources :docs\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 2174, "user_id": 3448554, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/j7RcG.jpg?s=128&g=1", "display_name": "Kelsey Hannan", "link": "https://stackoverflow.com/users/3448554/kelsey-hannan"}, "edited": false, "score": 0, "creation_date": 1477426046, "post_id": 40248190, "comment_id": 67759936, "body": "Please post what error you get.  At first look it appears your error is that you are not saving the changes you are making to <code>@visits</code> in update_status.  Modifying an instance variable alone won&#39;t change its values in your database, you need to call something like <code>@visits.save</code> after"}, {"owner": {"reputation": 87, "user_id": 6912352, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/65ced5a76189a770c0fe379bc86bf7cc?s=128&d=identicon&r=PG&f=1", "display_name": "Benny", "link": "https://stackoverflow.com/users/6912352/benny"}, "reply_to_user": {"reputation": 2174, "user_id": 3448554, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/j7RcG.jpg?s=128&g=1", "display_name": "Kelsey Hannan", "link": "https://stackoverflow.com/users/3448554/kelsey-hannan"}, "edited": false, "score": 0, "creation_date": 1477426915, "post_id": 40248190, "comment_id": 67760429, "body": "The error is: undefined method `check_visit_status&#39; for #&lt;EmployeesController:0x007fcbaf923fb0&gt;"}], "answers": [{"comments": [{"owner": {"reputation": 87, "user_id": 6912352, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/65ced5a76189a770c0fe379bc86bf7cc?s=128&d=identicon&r=PG&f=1", "display_name": "Benny", "link": "https://stackoverflow.com/users/6912352/benny"}, "edited": false, "score": 0, "creation_date": 1477430521, "post_id": 40249680, "comment_id": 67762434, "body": "Thank you a lot, now I don&#39;t get this error anymore. Unfortunately visits&#39; status on database have not been changed. Can you help me with this?"}, {"owner": {"reputation": 1568, "user_id": 966100, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xN0ul.jpg?s=128&g=1", "display_name": "eeeeeean", "link": "https://stackoverflow.com/users/966100/eeeeeean"}, "reply_to_user": {"reputation": 87, "user_id": 6912352, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/65ced5a76189a770c0fe379bc86bf7cc?s=128&d=identicon&r=PG&f=1", "display_name": "Benny", "link": "https://stackoverflow.com/users/6912352/benny"}, "edited": false, "score": 0, "creation_date": 1477431756, "post_id": 40249680, "comment_id": 67763039, "body": "Have you used the byebug gem? You could throw that on the end of your check_visit_status method to make sure all of your logic for that method checks out."}, {"owner": {"reputation": 87, "user_id": 6912352, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/65ced5a76189a770c0fe379bc86bf7cc?s=128&d=identicon&r=PG&f=1", "display_name": "Benny", "link": "https://stackoverflow.com/users/6912352/benny"}, "edited": false, "score": 0, "creation_date": 1477437819, "post_id": 40249680, "comment_id": 67765048, "body": "I put byebug before if @.visits.any? and writing <i>display @.visits</i> it&#39;s not empty. Writing next, the =&gt; goes to @visits.each do |visit| and after another next I see:  <b>Visit Load (0.7ms)  SELECT &quot;visits&quot;.* FROM &quot;visits&quot; WHERE &quot;visits&quot;.&quot;employee_id&quot; = ?  ORDER BY &quot;visits&quot;.&quot;created_at&quot; ASC  [[&quot;employee_id&quot;, 1]] Next went up a frame because previous frame finished</b>  So it goes to a callback function and @.visits = nil. I don&#39;t really understand what&#39;s happening. (I put @. so that the system could let me post)"}, {"owner": {"reputation": 1568, "user_id": 966100, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xN0ul.jpg?s=128&g=1", "display_name": "eeeeeean", "link": "https://stackoverflow.com/users/966100/eeeeeean"}, "reply_to_user": {"reputation": 87, "user_id": 6912352, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/65ced5a76189a770c0fe379bc86bf7cc?s=128&d=identicon&r=PG&f=1", "display_name": "Benny", "link": "https://stackoverflow.com/users/6912352/benny"}, "edited": false, "score": 0, "creation_date": 1477440688, "post_id": 40249680, "comment_id": 67765710, "body": "Put byebug in your check_visit_status method, not in your controller. byebug will interrupt the flow of your program and give you a console with all variables that are available to the scope where you put byebug. If you expect that method to process a few visit objects (it looks like you do), you can tell byebug to &#39;continue&#39; (instead of &#39;next&#39;) and the flow of the program will be resumed until it loops to byebug again. You&#39;re going to have to experiment with it on your own, but it will probably be a helpful tool for you here. Good luck."}, {"owner": {"reputation": 87, "user_id": 6912352, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/65ced5a76189a770c0fe379bc86bf7cc?s=128&d=identicon&r=PG&f=1", "display_name": "Benny", "link": "https://stackoverflow.com/users/6912352/benny"}, "edited": false, "score": 0, "creation_date": 1477481820, "post_id": 40249680, "comment_id": 67782990, "body": "First of all, thank you because you&#39;re helping me a lot. I did what you said and I saw that each visit&#39;s status is changed by my method if it&#39;s necessary. After the last visit the application goes to <a href=\"https://gyazo.com/ce9c2fda55effc1bb6b770f35d614c12\" rel=\"nofollow noreferrer\">link</a> but I don&#39;t understand why. I have another question too: through my method I changed visits&#39; status, but I think I&#39;m not updating their status in the database; how could I do?"}, {"owner": {"reputation": 87, "user_id": 6912352, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/65ced5a76189a770c0fe379bc86bf7cc?s=128&d=identicon&r=PG&f=1", "display_name": "Benny", "link": "https://stackoverflow.com/users/6912352/benny"}, "edited": false, "score": 0, "creation_date": 1477483570, "post_id": 40249680, "comment_id": 67784045, "body": "Thank you a lot again, I figure it out."}], "tags": [], "owner": {"reputation": 1568, "user_id": 966100, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xN0ul.jpg?s=128&g=1", "display_name": "eeeeeean", "link": "https://stackoverflow.com/users/966100/eeeeeean"}, "is_accepted": false, "score": 0, "last_activity_date": 1477429497, "creation_date": 1477429497, "answer_id": 40249680, "question_id": 40248190, "link": "https://stackoverflow.com/questions/40248190/update-a-status-field-comparing-dates-after-an-action/40249680#40249680", "title": "Update a status field comparing dates after an action", "body": "<p>You need to call <code>check_visit_status</code> on an instance of Visit, but right now it's being called on <code>self</code>, which in this scope refers to the employees controller. Try this:</p>\n\n<p><strong>visit.rb</strong></p>\n\n<pre><code>def check_visit_status\n  if self.status != 'To be confirmed'\n    if self.start &lt;= Date.today &amp;&amp; end &gt;= Date.today\n      self.status = 'Current'\n     end\n    if self.end &lt; Date.today\n      self.status = 'Expired'\n    end\n  end  \nend\n</code></pre>\n\n<p>Then call it like this:</p>\n\n<p><strong>employees_controller.rb</strong></p>\n\n<pre><code>@visits.each do |visit|\n  visit.check_visit_status\nend\n</code></pre>\n\n<p>That should get you out of that particular error. </p>\n"}, {"tags": [], "owner": {"reputation": 87, "user_id": 6912352, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/65ced5a76189a770c0fe379bc86bf7cc?s=128&d=identicon&r=PG&f=1", "display_name": "Benny", "link": "https://stackoverflow.com/users/6912352/benny"}, "is_accepted": false, "score": 1, "last_activity_date": 1477483551, "creation_date": 1477483551, "answer_id": 40261822, "question_id": 40248190, "link": "https://stackoverflow.com/questions/40248190/update-a-status-field-comparing-dates-after-an-action/40261822#40261822", "title": "Update a status field comparing dates after an action", "body": "<p>I really have to thank eeeeeean for his immense help.</p>\n\n<p>I figured out my problem so I want to post here my solution in order to help someone looking for the same thing I was asking for.</p>\n\n<p><strong>employees_controller.rb</strong></p>\n\n<pre><code>class EmployeesController &lt; ApplicationController\n    after_action :update_status,  only: :show\n\n    def show\n    [...]\n    end\n\n    def update_status\n        if @visits.any?\n           @visits.each do |visit|\n              visit.check_visit_status\n           end\n        end\n     end\nend\n</code></pre>\n\n<p><strong>Visit.rb</strong></p>\n\n<pre><code>def check_visit_status\n        if self.status != 'To be confirmed'\n            if self.start &lt;= Date.today &amp;&amp; self.end &gt;= Date.today\n               self.update_attribute :status, 'Current'\n\n            end\n\n            if self.end &lt; Date.today\n                self.update_attribute :status, 'Expired'\n\n            end\n        end\n\n    end\n</code></pre>\n"}], "owner": {"reputation": 87, "user_id": 6912352, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/65ced5a76189a770c0fe379bc86bf7cc?s=128&d=identicon&r=PG&f=1", "display_name": "Benny", "link": "https://stackoverflow.com/users/6912352/benny"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 237, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1477483551, "creation_date": 1477423907, "question_id": 40248190, "link": "https://stackoverflow.com/questions/40248190/update-a-status-field-comparing-dates-after-an-action", "title": "Update a status field comparing dates after an action", "body": "<p>this is the schema and my model for Visit (visit's status can be: <em>Confirmed, Current, Expired and To be approved</em>)</p>\n\n<p><strong>schema.rb</strong></p>\n\n<pre><code>create_table \"visits\", force: true do |t|\n    t.datetime \"created_at\",                         null: false\n    t.datetime \"updated_at\",                         null: false\n    t.date     \"start\"\n    t.date     \"end\"\n    t.integer  \"idVisit\"\n    t.integer  \"employee_id\"\n    t.integer  \"visitor_id\"\n    t.string   \"status\",      default: \"Confirmed\"\n  end\n</code></pre>\n\n<p><strong>Visit.rb</strong></p>\n\n<pre><code>class Visit &lt; ActiveRecord::Base\n\n    belongs_to          :employee\n    belongs_to          :visitor\n    default_scope   -&gt;  { order(:created_at) }\n\n    validates   :start,           presence: true,     uniqueness: {scope: [:end, :visitor_id]}\n    validates   :end,             presence: true\n    validates   :visitor_id,      presence: true\n    validates   :employee_id,     presence: true\n    validate    :valid_date_range_required\n\n    def valid_date_range_required\n        if (start &amp;&amp; end) &amp;&amp; (end &lt; start)\n            errors.add(:end, \"must be after start\")\n        end\n    end\nend\n</code></pre>\n\n<p>Now my problem is that I need to compare for each visit, after each time I do show action in employees_controller.rb, the start and end date to Date.today (except for To be approved status); according to it I will change the status of visits in the database.</p>\n\n<p>Here is what I did but probably there will be some mistakes since for now an error occurs at least, so I hope you could help me to fix it.</p>\n\n<p>In <strong>Visit.rb</strong> I created this:</p>\n\n<pre><code>def check_visit_status(visit)\n\n        if visit.status != 'To be confirmed'\n            if visit.start &lt;= Date.today &amp;&amp; visit.end &gt;= Date.today\n               visit.status = 'Current'\n            end\n\n            if visit.end &lt; Date.today\n                visit.status = 'Expired'\n            end\n        end  \n    end\n</code></pre>\n\n<p>Now in <strong>employees_controller.rb</strong> I have (I won't post it all):</p>\n\n<pre><code>class EmployeesController &lt; ApplicationController\n    after_action :update_status,  only: :show\n\n    def show\n\n        if logged_in?\n            @employee = Employee.find(params[:id])\n            @indirizzimac = current_employee.indirizzimacs.new\n            @visitor = current_employee.visitors.new\n            @visit = current_employee.visits.new\n            @visits = current_employee.visits.all\n            if params[:act]=='myData'\n                render 'myData'\n            elsif params[:act]=='myNetwork'\n                render 'myNetwork'\n            elsif params[:act]=='temporaryUsers'\n                render 'temporaryUsers'\n            elsif params[:act]=='guestsVisits'\n                render 'guestsVisits'\n            elsif params[:act]=='myAccount'\n                render 'myAccount'\n            else\n                render 'show'\n            end\n        else\n            render 'static_pages/errorPage'\n        end\n    end\n\n    def update_status\n        if @visits.any?\n           @visits.each do |visit|\n              check_visit_status(visit)\n           end\n        end\n     end\nend\n</code></pre>\n\n<p>Thank you a lot in advance</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 1, "creation_date": 1477422596, "post_id": 40247836, "comment_id": 67757951, "body": "it&#39;s kind of unique - you can access instance method scope from it but as you say it is callable like a class method. Note that initialize won&#39;t be called if you define <code>def self.new</code>."}, {"owner": {"reputation": 2409, "user_id": 4008366, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/5a9f80535627f21ba4191fea0c6a0771?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Kim", "link": "https://stackoverflow.com/users/4008366/andrew-kim"}, "reply_to_user": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1477423252, "post_id": 40247836, "comment_id": 67758269, "body": "does that mean its called as a result of the <code>new</code> method being called? or it is in fact the <code>new</code> method?"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1477429041, "post_id": 40247836, "comment_id": 67761624, "body": "Yes. Note also that <a href=\"http://ruby-doc.org/core-2.0.0/Module.html#method-i-attr_accessor\" rel=\"nofollow noreferrer\">Module#attr_accessor</a> is also a class method that creates two instance methods (here <code>name</code> and <code>name=</code>)."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "reply_to_user": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 2, "creation_date": 1477430760, "post_id": 40247836, "comment_id": 67762553, "body": "@maxpleaner: there&#39;s nothing unique about it. In fact, you can express <code>new</code>&#39;s semantics in 3 lines of very simple Ruby code: <code>obj = allocate; obj.send(:initialize, *args, &amp;block); return obj</code> The only &quot;unique&quot; method here is <code>allocate</code>, whose semantics cannot be expressed in Ruby: it allocates an empty object from the object memory and sets its class pointer to <code>self</code> \u2013 neither of those things can be explained from within Ruby. But even so, it is still a normal method, which can be overridden and overwritten like any other method \u2026 it just cannot be written in Ruby."}], "answers": [{"comments": [{"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1477431014, "post_id": 40248036, "comment_id": 67762695, "body": "In reality, <code>initialize</code> is <code>private</code> by default, so the middle line is <i>really</i> more like <code>obj.send(:initialize, *args, &amp;block)</code>, but the end result is the same. If you have ever used Objective-C, that should look familiar, because <code>Foo.alloc.init</code> is essentially how you create an object."}, {"owner": {"reputation": 45322, "user_id": 421705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/581b1760881c962648f99d6040d41829?s=128&d=identicon&r=PG", "display_name": "Holger Just", "link": "https://stackoverflow.com/users/421705/holger-just"}, "reply_to_user": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1477478431, "post_id": 40248036, "comment_id": 67780820, "body": "Thanks @J&#246;rgWMittag. I fixed the code and learned a bit more about how method dispatching works in C-Ruby."}], "tags": [], "owner": {"reputation": 45322, "user_id": 421705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/581b1760881c962648f99d6040d41829?s=128&d=identicon&r=PG", "display_name": "Holger Just", "link": "https://stackoverflow.com/users/421705/holger-just"}, "is_accepted": true, "score": 7, "last_activity_date": 1530102479, "last_edit_date": 1530102479, "creation_date": 1477423247, "answer_id": 40248036, "question_id": 40247836, "link": "https://stackoverflow.com/questions/40247836/ruby-class-instance-method-def-initialize-instance-or-class-method/40248036#40248036", "title": "Ruby Class instance method def initialize: instance or class method?", "body": "<p>When a new object is initialized (that is, when you call <code>new</code> on a class) what effectively gets called is this method:</p>\n\n<pre><code>class Class\n  def new(*args, &amp;block)\n    obj = allocate\n    obj.send(:initialize, *args, &amp;block)\n    obj\n  end\nend\n</code></pre>\n\n<p>In the standard Ruby implementation, this method is implemented in C but is <a href=\"https://ruby-doc.org/core/Class.html#method-i-new\" rel=\"nofollow noreferrer\">well documented</a>.</p>\n\n<p>To understand what's happening here you must be aware that in Ruby, even classes are Objects (they are instances or the <code>Class</code> class). Thus, when calling <code>new</code> on your <code>Person</code> class, you are actually calling the <code>new</code> method on the instance of a <code>Class</code> object.</p>\n\n<p>As you can see, the <code>Person</code> class (being an instance of <code>Class</code> itself) brings a method to allocate memory for the new instance named <code>bob</code>. After the memory is allocated, the <code>new</code> method calls <code>initialize</code> on the newly created instance.</p>\n"}], "owner": {"reputation": 2409, "user_id": 4008366, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/5a9f80535627f21ba4191fea0c6a0771?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Kim", "link": "https://stackoverflow.com/users/4008366/andrew-kim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1647, "favorite_count": 2, "accepted_answer_id": 40248036, "answer_count": 1, "score": 6, "last_activity_date": 1554023537, "creation_date": 1477422494, "question_id": 40247836, "link": "https://stackoverflow.com/questions/40247836/ruby-class-instance-method-def-initialize-instance-or-class-method", "title": "Ruby Class instance method def initialize: instance or class method?", "body": "<p>Let's take a normal ruby class:</p>\n\n<pre><code>class Person\n  attr_accessor :name\n  def initialize name\n    @name = name\n  end\nend\n\nbob = Person.new(\"bob\")\n</code></pre>\n\n<p>My question is the nature of initialize. Here's the thing, <code>new</code> is clearly a class method, but seems to me that <code>initialize</code> is an instance method(not class) that is called on the instance created WHEN the class method <code>new</code> is called. </p>\n\n<p>Do I have this right? Or can someone shed some new light? I've done some google searches and couldn't find any clarity. </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rackattack"], "answers": [{"tags": [], "owner": {"reputation": 2460, "user_id": 3940126, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0222b0a3b16a79649265eabba7e05add?s=128&d=identicon&r=PG&f=1", "display_name": "slowjack2k", "link": "https://stackoverflow.com/users/3940126/slowjack2k"}, "is_accepted": false, "score": 1, "last_activity_date": 1477427262, "creation_date": 1477427262, "answer_id": 40249123, "question_id": 40247722, "link": "https://stackoverflow.com/questions/40247722/how-does-rails-rack-attack-throttle-work/40249123#40249123", "title": "How does rails rack-attack throttle work?", "body": "<p>Every request, for which you return a <code>truthy</code> value, is cached with a timestamp, even when a request is blocked. To determine if a request is blocked or not <code>rack-attack</code> counts the requests within <code>:period</code> time range.</p>\n\n<p>So <code>rack-attack</code> does not block for <code>:period</code>. Instead it counts all requests within <code>:period</code> and if this count is larger than <code>:limit</code>, the request is blocked.</p>\n"}], "owner": {"reputation": 551, "user_id": 4613575, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/94ee57c5cea9f3b94b68b7e5cf76369e?s=128&d=identicon&r=PG&f=1", "display_name": "hackrnaut", "link": "https://stackoverflow.com/users/4613575/hackrnaut"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 723, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1477427262, "creation_date": 1477422113, "question_id": 40247722, "link": "https://stackoverflow.com/questions/40247722/how-does-rails-rack-attack-throttle-work", "title": "How does rails rack-attack throttle work?", "body": "<p>Say I have a throttle like this:</p>\n\n<pre><code>throttle('emails/ip', :limit =&gt; 5, :period =&gt; 24.hours) do |req|\n  if req.path == '/users/check_email_availability' &amp;&amp; req.post?\n    req.ip\n  end\nend\n</code></pre>\n\n<p>What happens if someone keeps trying to access that link after they are throttled? Will they be blocked for another 24 hours? Or will the gem only be looking at their last 5 requests? When do they become unthrottled?</p>\n"}, {"tags": ["ruby", "google-api", "gmail", "gmail-api", "google-api-ruby-client"], "comments": [{"owner": {"reputation": 45322, "user_id": 421705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/581b1760881c962648f99d6040d41829?s=128&d=identicon&r=PG", "display_name": "Holger Just", "link": "https://stackoverflow.com/users/421705/holger-just"}, "edited": false, "score": 1, "creation_date": 1477422087, "post_id": 40246931, "comment_id": 67757658, "body": "What exactly does not work? What do you expect to happen, what does actually happen? Which exceptions do you get? When running which exact code? Please see <a href=\"http://stackoverflow.com/help/mcve\">stackoverflow.com/help/mcve</a> on how to create a Minimal, Complete, and Verifiable example which helps others solve your problems."}, {"owner": {"reputation": 1925, "user_id": 2386548, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fb0c86baa20f25404248077f3c01e0b8?s=128&d=identicon&r=PG", "display_name": "Carpela", "link": "https://stackoverflow.com/users/2386548/carpela"}, "reply_to_user": {"reputation": 45322, "user_id": 421705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/581b1760881c962648f99d6040d41829?s=128&d=identicon&r=PG", "display_name": "Holger Just", "link": "https://stackoverflow.com/users/421705/holger-just"}, "edited": false, "score": 0, "creation_date": 1477440997, "post_id": 40246931, "comment_id": 67765778, "body": "The clue was in the name of the method. Send message is supposed to send a message. Without going into a very long and drawn out walkthrough of google&#39;s oauth process that example is about as clear as I can make it.  I am using a method from google&#39;s ruby client library.  The client library for the Gmail API.  Gmail is an email service One of the purposes of email is to send and electronic communication between two parties.  The example above is an attempt to send an electronic communication between two parties.  Really not sure how much clearer I could have been..."}, {"owner": {"reputation": 45322, "user_id": 421705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/581b1760881c962648f99d6040d41829?s=128&d=identicon&r=PG", "display_name": "Holger Just", "link": "https://stackoverflow.com/users/421705/holger-just"}, "edited": false, "score": 0, "creation_date": 1477479047, "post_id": 40246931, "comment_id": 67781216, "body": "What is missing form your question is still what exactly does not work. What happens when you run the code? Do you get an exception? Any other behavior? How do you know that &quot;it doesn&#39;t work&quot;? Please refer to the article I linked above on how to wrote a good question that allows others to help you.."}, {"owner": {"reputation": 1925, "user_id": 2386548, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fb0c86baa20f25404248077f3c01e0b8?s=128&d=identicon&r=PG", "display_name": "Carpela", "link": "https://stackoverflow.com/users/2386548/carpela"}, "reply_to_user": {"reputation": 45322, "user_id": 421705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/581b1760881c962648f99d6040d41829?s=128&d=identicon&r=PG", "display_name": "Holger Just", "link": "https://stackoverflow.com/users/421705/holger-just"}, "edited": false, "score": 0, "creation_date": 1477481699, "post_id": 40246931, "comment_id": 67782917, "body": "The problem is that you don&#39;t understand the question. That&#39;s fine. I don&#39;t expect you to have familiarity with googles api client. But that&#39;s what the question is about.  If you have a passing familiarity with google-api-ruby-client v0.9 then the question will make perfect sense to you.  If you don&#39;t have a passing familiarity with it, it&#39;s not going to make any sense... That said, I&#39;d happily take advice on what you think would make it a better question.  Are you saying that you literally don&#39;t understand it?"}, {"owner": {"reputation": 1925, "user_id": 2386548, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fb0c86baa20f25404248077f3c01e0b8?s=128&d=identicon&r=PG", "display_name": "Carpela", "link": "https://stackoverflow.com/users/2386548/carpela"}, "reply_to_user": {"reputation": 45322, "user_id": 421705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/581b1760881c962648f99d6040d41829?s=128&d=identicon&r=PG", "display_name": "Holger Just", "link": "https://stackoverflow.com/users/421705/holger-just"}, "edited": false, "score": 0, "creation_date": 1477482518, "post_id": 40246931, "comment_id": 67783389, "body": "How about that? Not sure I&#39;ve added much to anyone who understands the api client, but is that clearer for you?"}], "answers": [{"tags": [], "owner": {"reputation": 1925, "user_id": 2386548, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fb0c86baa20f25404248077f3c01e0b8?s=128&d=identicon&r=PG", "display_name": "Carpela", "link": "https://stackoverflow.com/users/2386548/carpela"}, "is_accepted": true, "score": 10, "last_activity_date": 1493804745, "last_edit_date": 1493804745, "creation_date": 1477487936, "answer_id": 40263412, "question_id": 40246931, "link": "https://stackoverflow.com/questions/40246931/sending-an-email-with-ruby-gmail-api-v0-9/40263412#40263412", "title": "Sending an email with ruby gmail api v0.9", "body": "<p>Ok. So the answer... thanks for all your help Holger...\nWas that the documentation is wrong. It asks you to encode to base64. \nThe base64 encoding is not required (it is done internally by the api client). </p>\n\n<p>The correct way to send is </p>\n\n<pre><code>msg = m.encoded \n# or m.to_s\n# this doesn't base64 encode. It just turns the Mail::Message object into an appropriate string.\n\nmessage_object = Google::Apis::GmailV1::Message.new(raw:m.to_s)\nclient.send_user_message(\"me\", message_object)\n</code></pre>\n\n<p>Hope that saves someone else from being patronised by an overzealous mod.</p>\n"}, {"tags": [], "owner": {"reputation": 31, "user_id": 7466355, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-DnM0chY6cu4/AAAAAAAAAAI/AAAAAAAAAxE/fE27lmBV1vM/photo.jpg?sz=128", "display_name": "Yi Liu", "link": "https://stackoverflow.com/users/7466355/yi-liu"}, "is_accepted": false, "score": 3, "last_activity_date": 1493394681, "creation_date": 1493394681, "answer_id": 43684252, "question_id": 40246931, "link": "https://stackoverflow.com/questions/40246931/sending-an-email-with-ruby-gmail-api-v0-9/43684252#43684252", "title": "Sending an email with ruby gmail api v0.9", "body": "<p>Carpela\u2018s answer works fine, but for the message_object, it's missing \"raw\" in Message.new. The correct code should as following:</p>\n\n<pre><code>message_object = Google::Apis::GmailV1::Message.new(raw: m.encoded) # or m.to_s\nclient.send_user_message('me', message_object)\n</code></pre>\n"}], "owner": {"reputation": 1925, "user_id": 2386548, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fb0c86baa20f25404248077f3c01e0b8?s=128&d=identicon&r=PG", "display_name": "Carpela", "link": "https://stackoverflow.com/users/2386548/carpela"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1288, "favorite_count": 0, "accepted_answer_id": 40263412, "answer_count": 2, "score": 5, "last_activity_date": 1493804745, "creation_date": 1477419413, "last_edit_date": 1477482369, "question_id": 40246931, "link": "https://stackoverflow.com/questions/40246931/sending-an-email-with-ruby-gmail-api-v0-9", "title": "Sending an email with ruby gmail api v0.9", "body": "<p>Does anyone have a simple example as to how to send an email from scratch with the v0.9 API. </p>\n\n<p>simply want an example of sending the following:</p>\n\n<pre><code>m = Mail.new(\nto: \"test1@test.com\", \nfrom: \"test2@test.com\", \nsubject: \"Test Subject\",\nbody:\"Test Body\")\n</code></pre>\n\n<p>Now to create that message object which is required to send,we can use: </p>\n\n<pre><code>msg = Base64.urlsafe_encode64 m.to_s\n</code></pre>\n\n<p>And then try to send (where message_object = msg): </p>\n\n<pre><code>client = Google::Apis::GmailV1::GmailService.new #Appropriately authorised\nclient.send_user_message(\"me\", message_object)\n</code></pre>\n\n<p>The client wants an RFC822 compatible encoded string, which the above should be.</p>\n\n<p>I've tried:</p>\n\n<pre><code>message_object = msg\n=&gt; Google::Apis::ClientError: invalidArgument: 'raw' RFC822 payload message string or uploading message via /upload/* URL required\nmessage_object = raw:msg\n=&gt;ArgumentError: unknown keyword: raw\nmessage_object = {raw:msg}\n=&gt;ArgumentError: unknown keyword: raw \nmessage_object = Google::Apis::GmailV1::Message.new(raw:msg)\n=&gt; #&lt;Google::Apis::GmailV1::Message:0x007f9158e5b4b0 @id=\"15800cd7178d69a4\", @thread_id=\"15800cd7178d69a4\"&gt;\n#But then I get Bounce &lt;nobody@gmail.com&gt; - An error occurred. Your message was not sent.\n</code></pre>\n\n<p>i.e. None of them work...</p>\n\n<p>Sending the basic encded string (msg above) through the Gmail API interface tester <a href=\"https://developers.google.com/gmail/api/v1/reference/users/messages/send\" rel=\"noreferrer\">here</a> works. </p>\n\n<p>I'm obviously missing something obvious here as to how to construct that object required to make it work through the API.</p>\n"}, {"tags": ["ruby", "amazon-web-services", "rubygems", "aws-opsworks"], "answers": [{"tags": [], "owner": {"reputation": 1308, "user_id": 4745154, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/5921273a024821028d12ab1b016de99d?s=128&d=identicon&r=PG&f=1", "display_name": "Kumaresh Babu N S", "link": "https://stackoverflow.com/users/4745154/kumaresh-babu-n-s"}, "is_accepted": false, "score": 0, "last_activity_date": 1477564858, "creation_date": 1477564858, "answer_id": 40282518, "question_id": 40246421, "link": "https://stackoverflow.com/questions/40246421/aws-opswork-agent-not-starting/40282518#40282518", "title": "AWS opswork-agent not starting", "body": "<p>Make sure the following things.</p>\n\n<ol>\n<li>If you launch an instance not through aws opsworks, kindly install the opsworks-agent in your ec2 instances.</li>\n<li>If you launch an instance in aws opsworks console, you need to configure the layer to install opsworks-agent in an ec2 instance. When instance starts running, opsworks will start the opsworks-agent automatically from the instance.</li>\n</ol>\n\n<p>DevOps Engineers not necessary to start the opsworks-agent manually from the instance.</p>\n"}], "owner": {"reputation": 988, "user_id": 1134214, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/AnXDZ.jpg?s=128&g=1", "display_name": "Kelsadita", "link": "https://stackoverflow.com/users/1134214/kelsadita"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 580, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1477564858, "creation_date": 1477417566, "question_id": 40246421, "link": "https://stackoverflow.com/questions/40246421/aws-opswork-agent-not-starting", "title": "AWS opswork-agent not starting", "body": "<p>I am trying to start opswork-agent on aws instance with following command,</p>\n\n<p><code>sudo service opsworks-agent start</code></p>\n\n<p>But it is failing with following error,</p>\n\n<pre><code>/usr/lib/ruby/vendor_ruby/rubygems/defaults/operating_system.rb:34:in `singleton class': undefined method `default_specifications_dir' for class `#&lt;Class:Gem::Specification&gt;' (NameError)\n    from /usr/lib/ruby/vendor_ruby/rubygems/defaults/operating_system.rb:32:in `&lt;top (required)&gt;'\n    from /usr/lib/ruby/vendor_ruby/rubygems.rb:1264:in `require'\n    from /usr/lib/ruby/vendor_ruby/rubygems.rb:1264:in `&lt;top (required)&gt;'\n    from &lt;internal:gem_prelude&gt;:4:in `require'\n    from &lt;internal:gem_prelude&gt;:4:in `&lt;internal:gem_prelude&gt;'\n</code></pre>\n\n<p>Additional details:</p>\n\n<p>ruby version: ruby 2.0.0p645 (2015-04-13 revision 50299) [x86_64-linux]</p>\n\n<p>gem version: 2.6.7</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "lambda"], "answers": [{"tags": [], "owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "is_accepted": true, "score": 4, "last_activity_date": 1477418290, "last_edit_date": 1477418290, "creation_date": 1477417747, "answer_id": 40246466, "question_id": 40246326, "link": "https://stackoverflow.com/questions/40246326/ruby-dynamic-lambda-with-static-method/40246466#40246466", "title": "Ruby dynamic lambda with static method", "body": "<p>You can achieve it with <a href=\"https://ruby-doc.org/core-2.3.1/BasicObject.html#method-i-instance_exec\" rel=\"nofollow\">BasicObject#<code>instance_exec</code></a> (it allows you to pass argument to the block):</p>\n\n<pre><code>class Baz &lt; ActiveRecord::Base \n  @base = 'awesome'\n  instance_exec(@base) do |arg|\n    has_many :comments, -&gt; { where(\"have_#{arg}\" =&gt; true) }\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 1217, "user_id": 5511520, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/baaabef4e4f62eee165869427acd0472?s=128&d=identicon&r=PG&f=1", "display_name": "Mike Belyakov", "link": "https://stackoverflow.com/users/5511520/mike-belyakov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 216, "favorite_count": 1, "accepted_answer_id": 40246466, "answer_count": 1, "score": 2, "last_activity_date": 1477418694, "creation_date": 1477417261, "last_edit_date": 1477418694, "question_id": 40246326, "link": "https://stackoverflow.com/questions/40246326/ruby-dynamic-lambda-with-static-method", "title": "Ruby dynamic lambda with static method", "body": "<p>I'm writing Rails concern, and need to run something like</p>\n\n<pre><code>class Baz &lt; ActiveRecord::Base \n  @base = 'awesome'\n  has_many :comments, -&gt;() { where(have_#{@_base} =&gt; true) }\nend\n</code></pre>\n\n<p>but lambda will be executed in <code>Comment</code> context. I've made hack with <code>eval \"has_many :comments, -&gt;() { where(have_#{@_base} =&gt; true) }\"</code>.</p>\n\n<p>Is there any way to use this functionality without <code>eval</code>?</p>\n\n<p>Thank you!</p>\n"}, {"tags": ["ruby", "google-api", "gmail-api", "google-api-ruby-client"], "answers": [{"comments": [{"owner": {"reputation": 1925, "user_id": 2386548, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fb0c86baa20f25404248077f3c01e0b8?s=128&d=identicon&r=PG", "display_name": "Carpela", "link": "https://stackoverflow.com/users/2386548/carpela"}, "edited": false, "score": 0, "creation_date": 1477492751, "post_id": 40265159, "comment_id": 67790773, "body": "Hi. Thanks for that. The issue is not about what the API itself sends back to a vanilla API call. It&#39;s what the ruby API client is returning. Behind the scenes it&#39;s definitely picking up the JSON, but it returns a proprietary object. (Google::Apis::GmailV1::Message.....) not the JSON response from the API. as standard. Was wondering if it was possible to say to the API client &#39;Please send me the original unprocessed response?&#39;."}], "tags": [], "owner": {"reputation": 6714, "user_id": 6092067, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3848bf7a325fa036b5e85f5f83e76985?s=128&d=identicon&r=PG&f=1", "display_name": "Teyam", "link": "https://stackoverflow.com/users/6092067/teyam"}, "is_accepted": false, "score": 0, "last_activity_date": 1477492576, "creation_date": 1477492576, "answer_id": 40265159, "question_id": 40245955, "link": "https://stackoverflow.com/questions/40245955/google-api-ruby-client-to-return-the-actual-http-response-not-the-helper-object/40265159#40265159", "title": "Google Api Ruby Client to return the actual HTTP response, not the helper object", "body": "<p>As far as I know, it is possible to ask the server to send only the fields you really need and get a partial response instead of the default full response as mentioned in <a href=\"https://developers.google.com/api-client-library/ruby/guide/performance\" rel=\"nofollow\">Performance Tips</a>.</p>\n\n<p>However, I suggest that you please check the documentation for the specific API you are using to see if the field you're looking for is currently supported. For the Gmail API, you may go through <a href=\"https://developers.google.com/gmail/api/guides/performance#partial\" rel=\"nofollow\">Working with partial resources</a>.</p>\n\n<p>Here are the two types of partial requests that you can use:</p>\n\n<ul>\n<li><a href=\"https://developers.google.com/gmail/api/guides/performance#partial-response\" rel=\"nofollow\">Partial response</a>: A request where you specify which fields to include in the response (use the <code>fields</code> request parameter).</li>\n<li><a href=\"https://developers.google.com/gmail/api/guides/performance#patch\" rel=\"nofollow\">Patch</a>: An update request where you send only the fields you want to change (use the PATCH HTTP verb).</li>\n</ul>\n\n<p>Hope that helps!</p>\n"}], "owner": {"reputation": 1925, "user_id": 2386548, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fb0c86baa20f25404248077f3c01e0b8?s=128&d=identicon&r=PG", "display_name": "Carpela", "link": "https://stackoverflow.com/users/2386548/carpela"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 152, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1477492576, "creation_date": 1477415905, "question_id": 40245955, "link": "https://stackoverflow.com/questions/40245955/google-api-ruby-client-to-return-the-actual-http-response-not-the-helper-object", "title": "Google Api Ruby Client to return the actual HTTP response, not the helper object", "body": "<p>Is there an easy way to ask the google api ruby client to just give you back the stock HTTP response, rather than to perform the lovely, but slightly limiting translation into one of their ruby representable objects? </p>\n\n<p>e.g. </p>\n\n<pre><code>response = Gmail.client.get_user_message(\"me\", id) \n\n=&gt; #&lt;Google::Apis::GmailV1::Message\n\nresponse = Gmail.client.list_user_messages(\"me\")    \n=&gt; #&lt;Google::Apis::GmailV1::ListMessagesResponse\n</code></pre>\n\n<p>but</p>\n\n<pre><code>response = Gmail.client.delete_user_message(\"me\", id)\n=&gt;nil #successfully deleted\n</code></pre>\n\n<p>Now that's all fine and dandy, except that sometimes I just want to know what sort of response is going to come back. i.e. an HTTP response with maybe some JSON in the body. And then I'll worry about what I do with it...</p>\n\n<p>I can take the response and use the </p>\n\n<pre><code>response.to_json\n</code></pre>\n\n<p>to get the body of the json that would have come back (though I still won't have the response code, and I need to KNOW that it's one of those objects first). </p>\n\n<p>The client library is definitely getting that, it's just converting it into these objects before it lets me see it. And if I don't know that it's a google object (and not nil) I can't run that to_json consistently....</p>\n\n<p>Any ideas other than second guess what google is going to send me back?\n(I should note that this has come about when trying to move a library from dealing with their 0.8 api to their 0.9 api, so call me a cynic if you must but my faith that google won't make breaking changes to those objects returned is at a low ebb...</p>\n"}, {"tags": ["ruby", "lines", "skip"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 1, "creation_date": 1477417071, "post_id": 40245902, "comment_id": 67754831, "body": "We&#39;d like to see your attempt to solve the problem, rather than write code to fill in the blanks. Please read &quot;<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>&quot; and \u201c<a href=\"http://meta.stackoverflow.com/q/261592\">How much research effort is expected of Stack Overflow users?</a>\u201d. How big is the file? What is the minimum example of the file that will demonstrate the problem?"}], "answers": [{"comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1477417113, "post_id": 40246089, "comment_id": 67754864, "body": "It&#39;s worth noting here that <code>\\A</code> and <code>\\z</code> are preferable to <code>^</code> and <code>$</code> since the latter are anchored to lines, the former the whole string."}], "tags": [], "owner": {"reputation": 14827, "user_id": 645886, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2abb0123e9484284a9cb2d36aa9854b3?s=128&d=identicon&r=PG&f=1", "display_name": "Surya", "link": "https://stackoverflow.com/users/645886/surya"}, "is_accepted": false, "score": 0, "last_activity_date": 1477416432, "creation_date": 1477416432, "answer_id": 40246089, "question_id": 40245902, "link": "https://stackoverflow.com/questions/40245902/ruby-how-to-skip-2-lines-after-reading-a-blank-line-from-file/40246089#40246089", "title": "Ruby - How to skip 2 lines after reading a blank line from file", "body": "<p>For such situation, I would do something like this:</p>\n\n<pre><code>file = File.open(path_to_file, \"r\")\n\nwhile !file.eof?\n  line = file.gets\n  if line.match(/^[\\s]*$\\n/)\n    2.times{ file.gets if !file.eof? }\n  else\n    # do something with line\n  end\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 22, "user_id": 4609782, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/10202959400380791/picture?type=large", "display_name": "Boris Mutafov", "link": "https://stackoverflow.com/users/4609782/boris-mutafov"}, "edited": false, "score": 0, "creation_date": 1477665346, "post_id": 40253104, "comment_id": 67871993, "body": "Thank you will try it! :)"}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 0, "last_activity_date": 1477458475, "last_edit_date": 1477458475, "creation_date": 1477451753, "answer_id": 40253104, "question_id": 40245902, "link": "https://stackoverflow.com/questions/40245902/ruby-how-to-skip-2-lines-after-reading-a-blank-line-from-file/40253104#40253104", "title": "Ruby - How to skip 2 lines after reading a blank line from file", "body": "<p>Let's first create a test file.</p>\n\n<pre><code>str =\n\" \\nNow is \\nthe time \\n \\nfor all \\ngood \\npeople \\n\\nto \\nsupport\\na nasty\\n \\nperson\\n\" \nputs str\n  # \n  # Now is  \n  # the time \n  # \n  # for all \n  # good \n  # people \n  #\n  # to \n  # support\n  # a nasty\n  # \n  # person\n  #=&gt; nil \n\nFName = \"almost_over\"\n\nIO.write(FName, str)\n  #=&gt; 75 \n</code></pre>\n\n<p>Let's confirm the file was written correctly.</p>\n\n<pre><code>IO.read(FName) == str\n  #=&gt; true \n</code></pre>\n\n<p>We can skip the unwanted lines as follows.</p>\n\n<pre><code>count = 0\nIO.foreach(FName) do |line|\n  if count &gt; 0\n    count -=1\n  elsif line.strip.empty?\n    count = 2\n  else\n    puts \"My code using the line '#{line.strip}' goes here\"\n  end\nend\n  # My code using the line 'people' goes here\n  # My code using the line 'a nasty' goes here\n  #=&gt; nil \n</code></pre>\n\n<p>As <a href=\"http://ruby-doc.org/core-2.3.0/File.html\" rel=\"nofollow\">File</a> is a subclass of <a href=\"http://ruby-doc.org/core-2.3.0/IO.html\" rel=\"nofollow\">IO</a> (<code>File &lt; IO #=&gt; true</code>), you will often see expressions using <code>IO</code> methods with <code>File</code> as the receiver (e.g., <code>File.read(FName)</code>). </p>\n"}], "owner": {"reputation": 22, "user_id": 4609782, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/10202959400380791/picture?type=large", "display_name": "Boris Mutafov", "link": "https://stackoverflow.com/users/4609782/boris-mutafov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 901, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1477458475, "creation_date": 1477415739, "last_edit_date": 1477416312, "question_id": 40245902, "link": "https://stackoverflow.com/questions/40245902/ruby-how-to-skip-2-lines-after-reading-a-blank-line-from-file", "title": "Ruby - How to skip 2 lines after reading a blank line from file", "body": "<p>I have this loop:</p>\n\n<pre><code>File.open(path_to_file, \"r\") do |infile|\n  infile.each_line do |line|\n   #do things with line\n  end\nend\n</code></pre>\n\n<p>And what I want to do:\nIf the current line is blank \"/^[\\s]*$\\n/\" skip the next 2 lines and continue reading from there.</p>\n"}, {"tags": ["ruby", "ocr", "tesseract", "minimagick"], "comments": [{"owner": {"reputation": 11603, "user_id": 234593, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/8e2ee1b00d372ad8f6ed5e87385ffef5?s=128&d=identicon&r=PG", "display_name": "Kache", "link": "https://stackoverflow.com/users/234593/kache"}, "edited": false, "score": 0, "creation_date": 1478627616, "post_id": 40245844, "comment_id": 68231004, "body": "Turn the image into black text on white and remove image compression artifacts, a la @eric-duminil&#39;s suggestion.  Anecdotally, for a consistent &amp; known font, I&#39;ve had better accuracy just doing naive pixel-diff matching per character on my own."}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "reply_to_user": {"reputation": 11603, "user_id": 234593, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/8e2ee1b00d372ad8f6ed5e87385ffef5?s=128&d=identicon&r=PG", "display_name": "Kache", "link": "https://stackoverflow.com/users/234593/kache"}, "edited": false, "score": 0, "creation_date": 1478638677, "post_id": 40245844, "comment_id": 68236768, "body": "@Kache: Sounds interesting. Do you have any link?"}, {"owner": {"reputation": 11603, "user_id": 234593, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/8e2ee1b00d372ad8f6ed5e87385ffef5?s=128&d=identicon&r=PG", "display_name": "Kache", "link": "https://stackoverflow.com/users/234593/kache"}, "reply_to_user": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1478799154, "post_id": 40245844, "comment_id": 68307177, "body": "@EricDuminil ah, I don&#39;t have a link. It was a very naive method: 1. modify &amp; cut up text into normalized black-on-white characters 2. datamine all possible character images &amp; variations that may appear for the font, 3. select character with least pixel-by-pixel differences, using some tricks to not need to count every pixel of every character (e.g. character pixel height/width, num black/white pixels, etc)"}], "answers": [{"comments": [{"owner": {"reputation": 1367, "user_id": 2332611, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/5FsbR.jpg?s=128&g=1", "display_name": "Cameron Jones", "link": "https://stackoverflow.com/users/2332611/cameron-jones"}, "edited": false, "score": 0, "creation_date": 1478722701, "post_id": 40423363, "comment_id": 68272195, "body": "I followed your instructions and it almost worked. I am getting 132. 4 3 8. So it still seems to have issues with the zeroes. Any thoughts on why that may be happening?"}, {"owner": {"reputation": 1367, "user_id": 2332611, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/5FsbR.jpg?s=128&g=1", "display_name": "Cameron Jones", "link": "https://stackoverflow.com/users/2332611/cameron-jones"}, "edited": false, "score": 0, "creation_date": 1478722993, "post_id": 40423363, "comment_id": 68272354, "body": "(Note: notice it puts a &quot;.&quot; for the first 0 and nothing for the second one)"}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "reply_to_user": {"reputation": 1367, "user_id": 2332611, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/5FsbR.jpg?s=128&g=1", "display_name": "Cameron Jones", "link": "https://stackoverflow.com/users/2332611/cameron-jones"}, "edited": false, "score": 0, "creation_date": 1478723598, "post_id": 40423363, "comment_id": 68272663, "body": "Could you update Tesseract, or maybe play with the threshold value?"}, {"owner": {"reputation": 1367, "user_id": 2332611, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/5FsbR.jpg?s=128&g=1", "display_name": "Cameron Jones", "link": "https://stackoverflow.com/users/2332611/cameron-jones"}, "edited": false, "score": 0, "creation_date": 1478723786, "post_id": 40423363, "comment_id": 68272767, "body": "I will try updating tesseract. I messed with both the geometry settings &amp; the threshold but it didn&#39;t seem to work. I also removed negate but that didn&#39;t seem to change anything either way."}, {"owner": {"reputation": 1367, "user_id": 2332611, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/5FsbR.jpg?s=128&g=1", "display_name": "Cameron Jones", "link": "https://stackoverflow.com/users/2332611/cameron-jones"}, "edited": false, "score": 0, "creation_date": 1478724063, "post_id": 40423363, "comment_id": 68272919, "body": "Looks like I was up-to-date with Tesseract. The version I had written earlier was rTesseract version. Tesseract currently 3.04.01."}, {"owner": {"reputation": 1367, "user_id": 2332611, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/5FsbR.jpg?s=128&g=1", "display_name": "Cameron Jones", "link": "https://stackoverflow.com/users/2332611/cameron-jones"}, "edited": false, "score": 2, "creation_date": 1478724616, "post_id": 40423363, "comment_id": 68273183, "body": "Got it to work by cutting the image to the numbers and moving the threshold up to 20%. Thank you for your help!"}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "reply_to_user": {"reputation": 1367, "user_id": 2332611, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/5FsbR.jpg?s=128&g=1", "display_name": "Cameron Jones", "link": "https://stackoverflow.com/users/2332611/cameron-jones"}, "edited": false, "score": 0, "creation_date": 1478724673, "post_id": 40423363, "comment_id": 68273209, "body": "My pleasure. Thanks for the bounty!"}], "tags": [], "owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "is_accepted": true, "score": 3, "last_activity_date": 1478266416, "last_edit_date": 1478266416, "creation_date": 1478264462, "answer_id": 40423363, "question_id": 40245844, "link": "https://stackoverflow.com/questions/40245844/tesseract-not-reading-certain-numbers/40423363#40423363", "title": "Tesseract not reading certain numbers", "body": "<p>I tested your script on my Linux Mint 17 machine, with tesseract 3.03\n, Ruby 2.1.5 and MiniMagick 4.5.1</p>\n\n<p>It also returns <code>132B 4</code>.</p>\n\n<p>If you're sure that digits are encoded, you could try :</p>\n\n<pre><code>image = RTesseract.new(\"myImage.jpg\", options: :digits)\n</code></pre>\n\n<p>It returns <code>13223 4</code>.</p>\n\n<p>Launching tesseract without parameter gives you a list of possible options. \"pagesegmode 7\" looks interesting : <code>7 = Treat the image as a single text line.</code></p>\n\n<p>So :</p>\n\n<pre><code>image = RTesseract.new(\"myImage.jpg\", options: :digits, psm: 7)\n</code></pre>\n\n<p>It returns <code>13223 4 3 21 8</code>.</p>\n\n<p>With your second image, it returns <code>3 21 8</code>.</p>\n\n<p>I think the biggest problem now is that the JPG artifacts are pretty strong and the contrast is relatively low between digits and background. A PNG image would probably yield better results.</p>\n\n<p>With gimp, I resized the image to 200px height, cropped close to the digits to remove some artifacts, used Colors/Threshold at 150, inverted the image and saved as png :</p>\n\n<p><a href=\"https://i.stack.imgur.com/4KYIt.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/4KYIt.png\" alt=\"enter image description here\"></a></p>\n\n<p>Rtesseract returns :</p>\n\n<pre><code>1320 4 3 0 8\n</code></pre>\n\n<p>With Image Magick, this command achieved the same result :</p>\n\n<pre><code>convert myImage.jpg -geometry x200 -threshold 13% -negate myImage.png\n</code></pre>\n"}], "owner": {"reputation": 1367, "user_id": 2332611, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/5FsbR.jpg?s=128&g=1", "display_name": "Cameron Jones", "link": "https://stackoverflow.com/users/2332611/cameron-jones"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1087, "favorite_count": 1, "accepted_answer_id": 40423363, "answer_count": 1, "score": 4, "last_activity_date": 1478724018, "creation_date": 1477415501, "last_edit_date": 1478724018, "question_id": 40245844, "link": "https://stackoverflow.com/questions/40245844/tesseract-not-reading-certain-numbers", "title": "Tesseract not reading certain numbers", "body": "<p>I started off writing a simple script to read data from an image. Here is my Ruby code that uses RTesseract to read it:</p>\n\n<pre><code>require 'rtesseract'\nrequire 'mini_magick'\n\nRTesseract.configure do |config|\n    config.processor = \"mini_magick\"\nend\n\nimage = RTesseract.new(\"myImage.jpg\")\nputs image.to_s\n</code></pre>\n\n<p>I started off with this image:</p>\n\n<p><a href=\"https://i.stack.imgur.com/4BObJ.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/4BObJ.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>The results that came back were: <code>132B 4</code>.</p>\n\n<p>I understand that the 0 came back as a B (I can solve that). But the following <code>3</code>, <code>0</code>, <code>8</code> did not return at all. Now I know it already knows how to read a 3 and 0, because it did it in the first number. I figure it had some issues rendering the following numbers, so I made it black and white.</p>\n\n<p>This is the second image I tried:</p>\n\n<p><a href=\"https://i.stack.imgur.com/UaoLa.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/UaoLa.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>However the results still came back as: <code>132B 4</code>.</p>\n\n<p>Finally I cut the image and just tried the final 3 numbers.</p>\n\n<p>Here is the image:</p>\n\n<p><a href=\"https://i.stack.imgur.com/61Qdx.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/61Qdx.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>But when I ran the script, it returned no result. Any thoughts on why I am not able to read the final numbers?</p>\n\n<p>I'm using Ruby 2.2.2, rTesseract 2.1.0 and MiniMagick 4.5.1.</p>\n\n<p>I am using Tesseract 3.04.01</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rvm", "ruby-2.3.1"], "answers": [{"comments": [{"owner": {"reputation": 727, "user_id": 5670609, "user_type": "registered", "accept_rate": 89, "profile_image": "https://graph.facebook.com/1042677742461591/picture?type=large", "display_name": "Champer Wu", "link": "https://stackoverflow.com/users/5670609/champer-wu"}, "edited": false, "score": 0, "creation_date": 1477499334, "post_id": 40246418, "comment_id": 67795319, "body": "I install rails successfully! thx a lot Can you tell me what about xz?"}, {"owner": {"reputation": 624, "user_id": 3617924, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ace6aa449c0b135a922a4d2e102c111c?s=128&d=identicon&r=PG&f=1", "display_name": "Nikhil", "link": "https://stackoverflow.com/users/3617924/nikhil"}, "reply_to_user": {"reputation": 727, "user_id": 5670609, "user_type": "registered", "accept_rate": 89, "profile_image": "https://graph.facebook.com/1042677742461591/picture?type=large", "display_name": "Champer Wu", "link": "https://stackoverflow.com/users/5670609/champer-wu"}, "edited": false, "score": 0, "creation_date": 1477678209, "post_id": 40246418, "comment_id": 67878860, "body": "xz installs a version of liblzma which can not be linked against when building nokogiri dependencies. Uninstalling allows the libxml compile to succeed"}], "tags": [], "owner": {"reputation": 624, "user_id": 3617924, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ace6aa449c0b135a922a4d2e102c111c?s=128&d=identicon&r=PG&f=1", "display_name": "Nikhil", "link": "https://stackoverflow.com/users/3617924/nikhil"}, "is_accepted": true, "score": 3, "last_activity_date": 1477417559, "creation_date": 1477417559, "answer_id": 40246418, "question_id": 40245783, "link": "https://stackoverflow.com/questions/40245783/cant-use-rvm-install-rails-5-gem/40246418#40246418", "title": "Can&#39;t use rvm install rails 5 gem", "body": "<p>It might help:</p>\n\n<p><code>brew uninstall xz</code></p>\n\n<p><code>gem install nokogiri -v 1.6.8</code> or <code>gem install rails</code> (command you are running)</p>\n"}], "owner": {"reputation": 727, "user_id": 5670609, "user_type": "registered", "accept_rate": 89, "profile_image": "https://graph.facebook.com/1042677742461591/picture?type=large", "display_name": "Champer Wu", "link": "https://stackoverflow.com/users/5670609/champer-wu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 394, "favorite_count": 0, "accepted_answer_id": 40246418, "answer_count": 1, "score": 1, "last_activity_date": 1477455870, "creation_date": 1477415257, "last_edit_date": 1477455870, "question_id": 40245783, "link": "https://stackoverflow.com/questions/40245783/cant-use-rvm-install-rails-5-gem", "title": "Can&#39;t use rvm install rails 5 gem", "body": "<p>I tried to create gemset rails500 by ruby-2.3.1 and I got :</p>\n\n<blockquote>\n<pre><code>Using /Users/ChamperWu/.rvm/gems/ruby-2.3.1 with gemset rails500\njiaqideMacBook-Pro:unispot ChamperWu$ gem install rails\nFetching: i18n-0.7.0.gem (100%)\nSuccessfully installed i18n-0.7.0\nFetching: thread_safe-0.3.5.gem (100%)\nSuccessfully installed thread_safe-0.3.5\nFetching: tzinfo-1.2.2.gem (100%)\nSuccessfully installed tzinfo-1.2.2\nFetching: concurrent-ruby-1.0.2.gem (100%)\nSuccessfully installed concurrent-ruby-1.0.2\nFetching: activesupport-5.0.0.1.gem (100%)\nSuccessfully installed activesupport-5.0.0.1\nFetching: rack-2.0.1.gem (100%)\nSuccessfully installed rack-2.0.1\nFetching: rack-test-0.6.3.gem (100%)\nSuccessfully installed rack-test-0.6.3\nFetching: mini_portile2-2.1.0.gem (100%)\nSuccessfully installed mini_portile2-2.1.0\nFetching: nokogiri-1.6.8.1.gem (100%)\nBuilding native extensions.  This could take a while...\nERROR:  Error installing rails:\n  ERROR: Failed to build gem native extension.\n\n    current directory: /Users/ChamperWu/.rvm/gems/ruby-2.3.1@rails500/gems/nokogiri-1.6.8.1/ext/nokogiri\n/Users/ChamperWu/.rvm/rubies/ruby-2.3.1/bin/ruby -r ./siteconf20161026-41490-k9it32.rb extconf.rb\nchecking if the C compiler accepts ... yes\nchecking if the C compiler accepts -Wno-error=unused-command-line-argument-hard-error-in-future... no\nBuilding nokogiri using packaged libraries.\nUsing mini_portile version 2.1.0\nchecking for iconv.h... yes\nchecking for gzdopen() in -lz... yes\nchecking for iconv using --with-opt-* flags... yes\n************************************************************************\nIMPORTANT NOTICE:\n\nBuilding Nokogiri with a packaged version of libxml2-2.9.4.\n\nTeam Nokogiri will keep on doing their best to provide security\nupdates in a timely manner, but if this is a concern for you and want\nto use the system library instead; abort this installation process and\nreinstall nokogiri as follows:\n\n    gem install nokogiri -- --use-system-libraries\n        [--with-xml2-config=/path/to/xml2-config]\n        [--with-xslt-config=/path/to/xslt-config]\n\nIf you are using Bundler, tell it to use the option:\n\n    bundle config build.nokogiri --use-system-libraries\n    bundle install\n\nNote, however, that nokogiri is not fully compatible with arbitrary\nversions of libxml2 provided by OS/package vendors.\n************************************************************************\nExtracting libxml2-2.9.4.tar.gz into tmp/x86_64-apple-darwin16.0.0/ports/libxml2/2.9.4... OK\nRunning 'configure' for libxml2 2.9.4... OK\nRunning 'compile' for libxml2 2.9.4... ERROR, review '/Users/ChamperWu/.rvm/gems/ruby-2.3.1@rails500/gems/nokogiri-1.6.8.1/ext/nokogiri/tmp/x86_64-apple-darwin16.0.0/ports/libxml2/2.9.4/compile.log'\n</code></pre>\n  \n  <p>to see what happened. Last lines are:\n      ========================================================================\n          unsigned short* in = (unsigned short*) inb;\n                               ^~~~~~~~~~~~~~~~~~~~~\n      encoding.c:815:27: warning: cast from 'unsigned char *' to 'unsigned short <em>' increases required alignment from 1 to 2\n  [-Wcast-align]\n          unsigned short</em> out = (unsigned short*) outb;\n                                ^~~~~~~~~~~~~~~~~~~~~~\n      4 warnings generated.\n        CC       error.lo\n        CC       parserInternals.lo\n        CC       parser.lo\n        CC       tree.lo\n        CC       hash.lo\n        CC       list.lo\n        CC       xmlIO.lo\n      xmlIO.c:1450:52: error: use of undeclared identifier 'LZMA_OK'\n          ret =  (__libxml2_xzclose((xzFile) context) == LZMA_OK ) ? 0 : -1;\n                                                         ^\n      1 error generated.\n      make[2]: <strong>* [xmlIO.lo] Error 1\n      make[1]: <em></strong> [all-recursive] Error 1\n      make: <strong></em> [all] Error 2\n      ========================================================================\n      *</strong> extconf.rb failed ***\n      Could not create Makefile due to some reason, probably lack of necessary\n      libraries and/or headers.  Check the mkmf.log file for more details.  You may\n      need configuration options.</p>\n\n<pre><code>Provided configuration options:\n  --with-opt-dir\n  --with-opt-include\n  --without-opt-include=${opt-dir}/include\n  --with-opt-lib\n  --without-opt-lib=${opt-dir}/lib\n  --with-make-prog\n  --without-make-prog\n  --srcdir=.\n  --curdir\n  --ruby=/Users/ChamperWu/.rvm/rubies/ruby-2.3.1/bin/$(RUBY_BASE_NAME)\n  --help\n  --clean\n  --use-system-libraries\n  --enable-static\n  --disable-static\n  --with-zlib-dir\n  --without-zlib-dir\n  --with-zlib-include\n  --without-zlib-include=${zlib-dir}/include\n  --with-zlib-lib\n  --without-zlib-lib=${zlib-dir}/lib\n  --enable-cross-build\n  --disable-cross-build\n/Users/ChamperWu/.rvm/gems/ruby-2.3.1@rails500/gems/mini_portile2-2.1.0/lib/mini_portile2/mini_portile.rb:366:in\n</code></pre>\n  \n  <p><code>block in execute': Failed to complete compile task (RuntimeError)\n        from /Users/ChamperWu/.rvm/gems/ruby-2.3.1@rails500/gems/mini_portile2-2.1.0/lib/mini_portile2/mini_portile.rb:337:in\n  </code>chdir'\n        from /Users/ChamperWu/.rvm/gems/ruby-2.3.1@rails500/gems/mini_portile2-2.1.0/lib/mini_portile2/mini_portile.rb:337:in\n  <code>execute'\n        from /Users/ChamperWu/.rvm/gems/ruby-2.3.1@rails500/gems/mini_portile2-2.1.0/lib/mini_portile2/mini_portile.rb:111:in\n  </code>compile'\n        from /Users/ChamperWu/.rvm/gems/ruby-2.3.1@rails500/gems/mini_portile2-2.1.0/lib/mini_portile2/mini_portile.rb:150:in\n  <code>cook'\n        from extconf.rb:365:in</code>block (2 levels) in process_recipe'\n        from extconf.rb:258:in <code>block in chdir_for_build'\n        from extconf.rb:257:in</code>chdir'\n        from extconf.rb:257:in <code>chdir_for_build'\n        from extconf.rb:364:in</code>block in process_recipe'\n        from extconf.rb:263:in <code>tap'\n        from extconf.rb:263:in</code>process_recipe'\n        from extconf.rb:556:in `'</p>\n\n<pre><code>To see why this extension failed to compile, please check the mkmf.log which can be found here:\n\n  /Users/ChamperWu/.rvm/gems/ruby-2.3.1@rails500/extensions/x86_64-darwin-16/2.3.0/nokogiri-1.6.8.1/mkmf.log\n\nextconf failed, exit code 1\n\nGem files will remain installed in /Users/ChamperWu/.rvm/gems/ruby-2.3.1@rails500/gems/nokogiri-1.6.8.1\n</code></pre>\n  \n  <p>for inspection.\n      Results logged to /Users/ChamperWu/.rvm/gems/ruby-2.3.1@rails500/extensions/x86_64-darwin-16/2.3.0/nokogiri-1.6.8.1/gem_make.out</p>\n</blockquote>\n\n<p>I tried to uninstall and install it again, but I got the same info</p>\n\n<p>how can I fix it?</p>\n"}, {"tags": ["ruby", "rspec", "capybara", "selenium-chromedriver"], "answers": [{"tags": [], "owner": {"reputation": 1332, "user_id": 2986881, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000455272579/picture?type=large", "display_name": "G. I. Joe", "link": "https://stackoverflow.com/users/2986881/g-i-joe"}, "is_accepted": true, "score": 2, "last_activity_date": 1477414247, "creation_date": 1477414247, "answer_id": 40245505, "question_id": 40245504, "link": "https://stackoverflow.com/questions/40245504/how-to-avoid-session-not-created-exception-in-ruby/40245505#40245505", "title": "How to avoid &quot;session not created exception&quot; in ruby", "body": "<p>I've just reviewed the gem documentation in github.com:</p>\n\n<p><a href=\"https://github.com/flavorjones/chromedriver-helper\" rel=\"nofollow\">https://github.com/flavorjones/chromedriver-helper</a></p>\n\n<p>And I found the next to update chromedriver automatically:</p>\n\n<blockquote>\n  <p>If you'd like to force-upgrade to the latest version of chromedriver,\n  run the script <strong>chromedriver-update</strong> that also comes packaged with this\n  gem.</p>\n</blockquote>\n\n<p>So just apply:</p>\n\n<pre><code>$ chromedriver-update\n</code></pre>\n"}], "owner": {"reputation": 1332, "user_id": 2986881, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000455272579/picture?type=large", "display_name": "G. I. Joe", "link": "https://stackoverflow.com/users/2986881/g-i-joe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1018, "favorite_count": 0, "accepted_answer_id": 40245505, "answer_count": 1, "score": 1, "last_activity_date": 1477414247, "creation_date": 1477414247, "question_id": 40245504, "link": "https://stackoverflow.com/questions/40245504/how-to-avoid-session-not-created-exception-in-ruby", "title": "How to avoid &quot;session not created exception&quot; in ruby", "body": "<p>I'm working with selenium but it seems that chrome browser update broke my testing environment and capybara tests are throwing the next:</p>\n\n<pre><code>Selenium::WebDriver::Error::WebDriverError:\nsession not created exception\nfrom unknown error: Runtime.evaluate missing 'wasThrown'\n</code></pre>\n\n<p>I'm using:</p>\n\n<pre><code>gem 'rspec',               '~&gt; 3.1.0'\ngem 'capybara',            '~&gt; 2.4.4'\ngem 'selenium-webdriver',  '~&gt; 2.47.1'\ngem 'chromedriver-helper', '~&gt; 1.0.0'\n</code></pre>\n\n<p>The situation here is that chromedriver-helper latest release is the one I have, so I suppose I need to update chromedriver but gem install it automatically</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "edited": false, "score": 0, "creation_date": 1477415100, "post_id": 40244980, "comment_id": 67753758, "body": "There is insufficient information to answer your question properly. Why do you need multiple threads reading STDIN? Why not just a single thread for input processing. Don&#39;t make it harder than it needs to be. Otherwise you will end up with a lot of <code>Mutex</code> sections and potentially quickly leads to needlessly complex code."}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "reply_to_user": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "edited": false, "score": 0, "creation_date": 1477415739, "post_id": 40244980, "comment_id": 67754094, "body": "@Casper this application reads each individual keystroke and plays a different sound accordingly. It&#39;s like a command line drum set. I previously had the input processing happening in the main thread, but it wasn&#39;t doing a good job recognizing simultaneous keystrokes. That&#39;s why I am using this multithreaded approach. The complicating factor is there are &#39;special commands&#39; which require additional user input. I.e. when I type <code>&#47;t=</code> it prompts me for a tempo, which I normally would type in and press enter."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 3, "creation_date": 1477417001, "post_id": 40244980, "comment_id": 67754786, "body": "This is never going to work. Input and output should be handled by one thread, and one thread <i>only</i>. If you need to fan out those keystrokes to different handlers in different threads, do that in a dispatch loop. You might want to use something like <a href=\"https://ruby-doc.org/core-2.3.1/Queue.html\" rel=\"nofollow noreferrer\">Queue</a> to handle inter-thread communication."}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1477417788, "post_id": 40244980, "comment_id": 67755227, "body": "@tadman i guess you&#39;re right, it seems <code>STDIN.getch</code> captures simultaneous keystrokes just as well in a single thread as in multiple threads. I suppose the limitation is on my keyboard hardware."}, {"owner": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "edited": false, "score": 1, "creation_date": 1477417901, "post_id": 40244980, "comment_id": 67755293, "body": "If on Linux/OSX/Unix you might want to look into reading raw scancodes insted of STDIN. That way you will have a more direct view of keyboard states."}, {"owner": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "edited": false, "score": 0, "creation_date": 1477418094, "post_id": 40244980, "comment_id": 67755401, "body": "<a href=\"http://www.gcat.org.uk/tech/?p=70\" rel=\"nofollow noreferrer\">gcat.org.uk/tech/?p=70</a>"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1477418666, "post_id": 40244980, "comment_id": 67755734, "body": "<code>getch</code> is a pretty crappy way to do keyboard input. Casper&#39;s right, you probably want to use something more raw, listening for key codes, not characters, though if you&#39;re getting really deep into input handling you probably want <a href=\"https://github.com/ruby/curses\" rel=\"nofollow noreferrer\">Curses</a> or something like it, a library built around that sort of thing."}], "owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 37, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1477416940, "creation_date": 1477412406, "last_edit_date": 1477416940, "question_id": 40244980, "link": "https://stackoverflow.com/questions/40244980/stop-threaded-stdin-listeners-from-interfering-with-each-other", "title": "stop threaded STDIN listeners from interfering with each other", "body": "<p>Here is my main thread, which does nothing but launch other threads and then sleeps forever while the other threads do their work. </p>\n\n<pre><code>require 'io/console'\n4.times { Thread.new { loop { App.process_char(STDIN.getch) } } }\nloop { sleep }\n</code></pre>\n\n<p>This is running for the duration of my program and sends all individual keystrokes to <code>App.process_char</code>. However, some inputs will cause this method to run an additional <code>gets.chomp</code>. This is not working - it's not getting input because the other threads are eating it all.</p>\n\n<p>I'm thinking there's a way to isolate my STDIN from existing thread listeners before calling gets.chomp. In searched I've seen a mention of redefining <code>$stdin</code> and <code>$stdout</code> but I'm not sure how to maintain the ability to capture user keystrokes. </p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 3736, "user_id": 1031061, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/8IZUV.jpg?s=128&g=1", "display_name": "Pardeep Dhingra", "link": "https://stackoverflow.com/users/1031061/pardeep-dhingra"}, "edited": false, "score": 2, "creation_date": 1477412773, "post_id": 40244971, "comment_id": 67752401, "body": "if <code>rails -v</code> is showing you rails version it means its already installed. Secondly the output you have showed confirms that rails is already there. This <code>rails server</code> command you can run from the directory which contains rails project. So first you need to read more chapters of your book how to create rails project then you can try this command. And we will be happy to help if you will stuck somewhere."}], "answers": [{"tags": [], "owner": {"reputation": 51, "user_id": 6177243, "user_type": "registered", "profile_image": "https://graph.facebook.com/1123436191042369/picture?type=large", "display_name": "Jessiel Heitor Hacke", "link": "https://stackoverflow.com/users/6177243/jessiel-heitor-hacke"}, "is_accepted": false, "score": 1, "last_activity_date": 1477422519, "creation_date": 1477422519, "answer_id": 40247844, "question_id": 40244971, "link": "https://stackoverflow.com/questions/40244971/rails-server-on-ubuntu/40247844#40247844", "title": "Rails Server on Ubuntu", "body": "<p>You first need to run <code>rails new name_of_app</code> then you can run rails server inside the app folder</p>\n"}, {"tags": [], "owner": {"reputation": 759, "user_id": 5266581, "user_type": "registered", "accept_rate": 87, "profile_image": "https://lh3.googleusercontent.com/-4WBTC_1yMB8/AAAAAAAAAAI/AAAAAAAAACI/pCGef6nYJik/photo.jpg?sz=128", "display_name": "Engr.Tanbir Hasan", "link": "https://stackoverflow.com/users/5266581/engr-tanbir-hasan"}, "is_accepted": false, "score": 0, "last_activity_date": 1477460218, "creation_date": 1477460218, "answer_id": 40254465, "question_id": 40244971, "link": "https://stackoverflow.com/questions/40244971/rails-server-on-ubuntu/40254465#40254465", "title": "Rails Server on Ubuntu", "body": "<p>Check your rails version:</p>\n\n<pre><code>$ rails -v\n</code></pre>\n\n<p>If no rails install yet, install the rails using this command:</p>\n\n<pre><code>$ gem install rails    \n</code></pre>\n\n<p>You have to create at first an app, then have to run the server as like:</p>\n\n<pre><code>$ rails new demo\n$ cd demo\n$ rails server\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1041, "user_id": 3276347, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/svVqH.jpg?s=128&g=1", "display_name": "Mahabub Islam Prio", "link": "https://stackoverflow.com/users/3276347/mahabub-islam-prio"}, "is_accepted": false, "score": 1, "last_activity_date": 1477462095, "creation_date": 1477462095, "answer_id": 40254880, "question_id": 40244971, "link": "https://stackoverflow.com/questions/40244971/rails-server-on-ubuntu/40254880#40254880", "title": "Rails Server on Ubuntu", "body": "<p>@Nick Barson , Your code shows that you are in <code>/bin</code> folder . \nYou must make sure that you are on a existing pre created or initialized rails application directory path. \nlike,</p>\n\n<pre><code> $ rails new some_app\n $ cd some_app\n $ rails server \n</code></pre>\n\n<p>Hope this will solve your problem. </p>\n"}], "owner": {"reputation": 11, "user_id": 7070207, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5556e8fe5f6f5ab924df03bdf9c8a799?s=128&d=identicon&r=PG&f=1", "display_name": "Nick Branson", "link": "https://stackoverflow.com/users/7070207/nick-branson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1477462095, "creation_date": 1477412376, "question_id": 40244971, "link": "https://stackoverflow.com/questions/40244971/rails-server-on-ubuntu", "title": "Rails Server on Ubuntu", "body": "<p>I am trying to learn ruby on rails after purchasing a book called Ruby on Rails Tutorial by Michael Hartl</p>\n\n<p>I have followed an Installation guide <a href=\"https://www.railstutorial.org\" rel=\"nofollow\">https://www.railstutorial.org</a> </p>\n\n<p>I think I've installed everything correctly, But I expected to find the rails installed in Bin folder. Can't seem to locate it...</p>\n\n<p>I've done some noddy stuff like ....</p>\n\n<pre><code>irb(main) &gt; hi  Hello World....  bla\nirb(main) 3+2\n=&gt;5\n</code></pre>\n\n<p>But when I type the following I am getting all this ?</p>\n\n<pre><code>nick@Ubuntu:/bin$ rails server\n\nUsage:\nrails new APP_PATH [options]\n\nOptions:\n-r, [--ruby`enter code here`=PATH]      # Path     to the Ruby binary of     your choice\n# Default: /usr/bin/ruby\n-m, [--template=TEMPLATE]                              # Path to some   application template (can be a filesystem path or URL)\n[--skip-gemfile], [--no-skip-gemfile]              # Don't create a Gemfile\n-B, [--skip-bundle], [--no-skip-bundle]                # Don't run bundle    install\n-G, [--skip-git], [--no-skip-git]                      # Skip .gitignore   file\n[--skip-keeps], [--no-skip-keeps]                  # Skip source control   .keep files\n-O, [--skip-active-record], [--no-skip-active-record]  # Skip Active   Recordfiles\n-S, [--skip-sprockets], [--no-skip-sprockets]          # Skip Sprockets   files\n[--skip-spring], [--no-skip-spring]                # Don't install Spring   application preloader\n-d, [--database=DATABASE]                              # Preconfigure for   selected database (options: `enter code   here`mysql/oracle/postgresql/sqlite3/frontbase/ibm_db/sqlserver/jdbcmysql/jdbcsq  \n</code></pre>\n\n<p>I hope someone can help me.\nThanks,  NickB</p>\n"}, {"tags": ["ruby", "time"], "answers": [{"comments": [{"owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "edited": false, "score": 0, "creation_date": 1477410489, "post_id": 40244153, "comment_id": 67750848, "body": "<code>parse</code> method is present just in some ruby versions. Check the link you posted."}, {"owner": {"reputation": 8066, "user_id": 4272549, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/1hvwh.jpg?s=128&g=1", "display_name": "123", "link": "https://stackoverflow.com/users/4272549/123"}, "edited": false, "score": 0, "creation_date": 1477411026, "post_id": 40244153, "comment_id": 67751223, "body": "This doesn&#39;t work for me.  <code>Time.parse(time)</code> converts the time into UTC, so then getting <code>strftime &quot;%z&quot;</code> just returns the offset of the UTC time which is <code>&quot;+0000&quot;</code>"}, {"owner": {"reputation": 3914, "user_id": 4057366, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/uZ3e5.jpg?s=128&g=1", "display_name": "Alex Holubenko", "link": "https://stackoverflow.com/users/4057366/alex-holubenko"}, "reply_to_user": {"reputation": 8066, "user_id": 4272549, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/1hvwh.jpg?s=128&g=1", "display_name": "123", "link": "https://stackoverflow.com/users/4272549/123"}, "edited": false, "score": 0, "creation_date": 1477411166, "post_id": 40244153, "comment_id": 67751316, "body": "@123 your variable <code>time</code> the same as you put in your question?"}, {"owner": {"reputation": 3914, "user_id": 4057366, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/uZ3e5.jpg?s=128&g=1", "display_name": "Alex Holubenko", "link": "https://stackoverflow.com/users/4057366/alex-holubenko"}, "reply_to_user": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "edited": false, "score": 0, "creation_date": 1477411333, "post_id": 40244153, "comment_id": 67751430, "body": "@Ursus In which version of Ruby this method does not work for you? Cause I check it from version 1.9.3."}, {"owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "edited": false, "score": 0, "creation_date": 1477411379, "post_id": 40244153, "comment_id": 67751458, "body": "I tried 2.3.1 but even 2.2.0 of your link, there is no <code>parse</code> method"}, {"owner": {"reputation": 3914, "user_id": 4057366, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/uZ3e5.jpg?s=128&g=1", "display_name": "Alex Holubenko", "link": "https://stackoverflow.com/users/4057366/alex-holubenko"}, "reply_to_user": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "edited": false, "score": 0, "creation_date": 1477411622, "post_id": 40244153, "comment_id": 67751611, "body": "@Ursus I do not know for what reason this method is not described but this exist."}, {"owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "edited": false, "score": 0, "creation_date": 1477411697, "post_id": 40244153, "comment_id": 67751663, "body": "Yes, sure. The issue is in which version? not in all the versions, too bad."}, {"owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "edited": false, "score": 0, "creation_date": 1477411930, "post_id": 40244153, "comment_id": 67751819, "body": "@AlexGolubenko this is very strange. It works if I require &#39;time&#39;, even if I should&#39;nt. I don&#39;t know why. Anyway, sorry, I can&#39;t remove the downvote, too much time is passed :("}, {"owner": {"reputation": 8066, "user_id": 4272549, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/1hvwh.jpg?s=128&g=1", "display_name": "123", "link": "https://stackoverflow.com/users/4272549/123"}, "edited": false, "score": 0, "creation_date": 1477418336, "post_id": 40244153, "comment_id": 67755548, "body": "@AlexGolubenko I&#39;m using Ruby 1.9.3 as well...no idea why this doesn&#39;t work.  <code>Time.parse(&quot;7:00 PM -0500&quot;).strftime(&quot;%z&quot;)</code> returns <code>&quot;+0000&quot;</code>"}, {"owner": {"reputation": 624, "user_id": 3617924, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ace6aa449c0b135a922a4d2e102c111c?s=128&d=identicon&r=PG&f=1", "display_name": "Nikhil", "link": "https://stackoverflow.com/users/3617924/nikhil"}, "edited": false, "score": 0, "creation_date": 1477423507, "post_id": 40244153, "comment_id": 67758438, "body": "When \u2018time\u2019 is required, Time is extended with additional methods for parsing and converting Times.                                <a href=\"https://ruby-doc.org/stdlib-2.2.2/libdoc/time/rdoc/Time.html\" rel=\"nofollow noreferrer\">ruby-doc.org/stdlib-2.2.2/libdoc/time/rdoc/Time.html</a>"}], "tags": [], "owner": {"reputation": 3914, "user_id": 4057366, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/uZ3e5.jpg?s=128&g=1", "display_name": "Alex Holubenko", "link": "https://stackoverflow.com/users/4057366/alex-holubenko"}, "is_accepted": false, "score": 1, "last_activity_date": 1477470763, "last_edit_date": 1477470763, "creation_date": 1477409851, "answer_id": 40244153, "question_id": 40244028, "link": "https://stackoverflow.com/questions/40244028/get-utc-offset-of-time-string-without-string-manipulation/40244153#40244153", "title": "Get UTC offset of time string without string manipulation", "body": "<p>Maybe, <a href=\"http://ruby-doc.org/core-2.2.0/Time.html\" rel=\"nofollow\">this</a> should help you next time, for this your question possible answer is: </p>\n\n<pre><code>require 'time'\ntime = \"7:00 PM -0500\"\nTime.parse(time).strftime \"%z\"\n =&gt; \"-0500\" \n</code></pre>\n\n<p><strong>UPD</strong></p>\n\n<p>If <code>Time.parse</code> return just your local timezone(in some ruby-versions), you can also try this: </p>\n\n<pre><code>require 'time'\ntime = \"7:00 PM -0500\"\nDateTime.parse(time).strftime \"%z\"\n=&gt; \"-0500\" \n</code></pre>\n"}], "owner": {"reputation": 8066, "user_id": 4272549, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/1hvwh.jpg?s=128&g=1", "display_name": "123", "link": "https://stackoverflow.com/users/4272549/123"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1477470763, "creation_date": 1477409539, "question_id": 40244028, "link": "https://stackoverflow.com/questions/40244028/get-utc-offset-of-time-string-without-string-manipulation", "title": "Get UTC offset of time string without string manipulation", "body": "<p>I have a time string that looks like this: <code>time = \"7:00 PM -0500\"</code></p>\n\n<p>The offset of this is clearly <code>-0500</code>, and I can get that by doing <code>utc_offset = time[-5..-1]</code></p>\n\n<p>However, I want to do this with the existing Ruby Time functionality, instead of using string manipulation.</p>\n\n<p>This needs to work for all time zones, so I can't hardcode a timezone or offset anywhere.  How can I take a string in the format <code>\"&lt;hour&gt;:&lt;minutes&gt; &lt;am/pm&gt; &lt;offset&gt;\"</code>, parse it, and get the correct offset just using functionality in the <code>Time</code> class?</p>\n"}, {"tags": ["ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 867, "user_id": 4547547, "user_type": "registered", "accept_rate": 38, "profile_image": "https://lh4.googleusercontent.com/-AW_Jp9ZwOZQ/AAAAAAAAAAI/AAAAAAAAADE/kMpp9v3TDJc/photo.jpg?sz=128", "display_name": "I&#39;m_ADR", "link": "https://stackoverflow.com/users/4547547/im-adr"}, "edited": false, "score": 0, "creation_date": 1477409830, "post_id": 40243990, "comment_id": 67750345, "body": "Can you show us your autoloading config ?"}, {"owner": {"reputation": 12705, "user_id": 483040, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Ux8AH.jpg?s=128&g=1", "display_name": "jaydel", "link": "https://stackoverflow.com/users/483040/jaydel"}, "reply_to_user": {"reputation": 867, "user_id": 4547547, "user_type": "registered", "accept_rate": 38, "profile_image": "https://lh4.googleusercontent.com/-AW_Jp9ZwOZQ/AAAAAAAAAAI/AAAAAAAAADE/kMpp9v3TDJc/photo.jpg?sz=128", "display_name": "I&#39;m_ADR", "link": "https://stackoverflow.com/users/4547547/im-adr"}, "edited": false, "score": 0, "creation_date": 1477410176, "post_id": 40243990, "comment_id": 67750609, "body": "added that, thanks."}, {"owner": {"reputation": 867, "user_id": 4547547, "user_type": "registered", "accept_rate": 38, "profile_image": "https://lh4.googleusercontent.com/-AW_Jp9ZwOZQ/AAAAAAAAAAI/AAAAAAAAADE/kMpp9v3TDJc/photo.jpg?sz=128", "display_name": "I&#39;m_ADR", "link": "https://stackoverflow.com/users/4547547/im-adr"}, "edited": false, "score": 0, "creation_date": 1477410400, "post_id": 40243990, "comment_id": 67750779, "body": "I usually use : #{Rails.root} not #{config.root}"}, {"owner": {"reputation": 12705, "user_id": 483040, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Ux8AH.jpg?s=128&g=1", "display_name": "jaydel", "link": "https://stackoverflow.com/users/483040/jaydel"}, "reply_to_user": {"reputation": 867, "user_id": 4547547, "user_type": "registered", "accept_rate": 38, "profile_image": "https://lh4.googleusercontent.com/-AW_Jp9ZwOZQ/AAAAAAAAAAI/AAAAAAAAADE/kMpp9v3TDJc/photo.jpg?sz=128", "display_name": "I&#39;m_ADR", "link": "https://stackoverflow.com/users/4547547/im-adr"}, "edited": false, "score": 0, "creation_date": 1477410760, "post_id": 40243990, "comment_id": 67751040, "body": "I spent a few minutes validating that they are actually the same thing. I&#39;m working with a codebase I didn&#39;t create and I&#39;ve only been on for a few months, so I have no real context on why config.root was used here."}, {"owner": {"user_type": "does_not_exist", "display_name": "user896237"}, "edited": false, "score": 0, "creation_date": 1477411303, "post_id": 40243990, "comment_id": 67751408, "body": "did you try calling it <code>class Foo::Bar::Baz</code> instead of nested modules?"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1477411355, "post_id": 40243990, "comment_id": 67751444, "body": "With that namespacing you don&#39;t need &#39;lib/foo&#39; and &#39;lib/foo/bar&#39; in autoload."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1477411465, "post_id": 40243990, "comment_id": 67751508, "body": "&quot;I have defined a Baz class in the standard Rails way.&quot; - be specific. How <b>exactly</b> is it defined? Post actual file path and actual class definition (you can omit the insides of the class, we only need the namespaces)"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1477411682, "post_id": 40243990, "comment_id": 67751650, "body": "if you cook up a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>, you&#39;ll get an answer in <i>minutes</i> :)"}, {"owner": {"reputation": 12705, "user_id": 483040, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Ux8AH.jpg?s=128&g=1", "display_name": "jaydel", "link": "https://stackoverflow.com/users/483040/jaydel"}, "edited": false, "score": 0, "creation_date": 1477417079, "post_id": 40243990, "comment_id": 67754837, "body": "I can definitely add the innards of the model. What else is necessary to make this example workable beyond that? Not poking, just asking so I can get it in there."}, {"owner": {"reputation": 12705, "user_id": 483040, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Ux8AH.jpg?s=128&g=1", "display_name": "jaydel", "link": "https://stackoverflow.com/users/483040/jaydel"}, "edited": false, "score": 0, "creation_date": 1477417372, "post_id": 40243990, "comment_id": 67755016, "body": "@meshpi I&#39;ll give your suggestion a try. But my confusion about why the code example didn&#39;t work stands. I have workable code currently by changing the non-model class <code>BazThing</code> so there&#39;s no name collision. That works, but I have this compulsion to understand why the module namespacing in my example doesn&#39;t work."}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1477422780, "post_id": 40243990, "comment_id": 67758034, "body": "i don&#39;t know about the module namespacing issue but the <code>table_name</code> line is irrelevant - that&#39;s just telling ActiveRecord to use a different database table name for the model"}, {"owner": {"reputation": 3943, "user_id": 2647317, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51f163870821b443d585648035a69464?s=128&d=identicon&r=PG", "display_name": "Pooyan Khosravi", "link": "https://stackoverflow.com/users/2647317/pooyan-khosravi"}, "edited": false, "score": 0, "creation_date": 1477424180, "post_id": 40243990, "comment_id": 67758841, "body": "Try removing <code>lib&#47;foo</code> and <code>lib&#47;foo&#47;bar</code> from your auto load path. Check if you can access <code>Baz</code> (without the namespace) in your console. Right now <code>Baz</code>, <code>Bar::Baz</code> and <code>Foo::Bar::Baz</code> load same file; Are <code>&quot;Something::Baz&quot;</code> and <code>&quot;Bar::Baz&quot;</code> the same thing?"}], "owner": {"reputation": 12705, "user_id": 483040, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Ux8AH.jpg?s=128&g=1", "display_name": "jaydel", "link": "https://stackoverflow.com/users/483040/jaydel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 53, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1477422524, "creation_date": 1477409458, "last_edit_date": 1477422524, "question_id": 40243990, "link": "https://stackoverflow.com/questions/40243990/ruby-rails-module-based-namespacing-failure", "title": "ruby/rails module based namespacing failure", "body": "<p>I'm experiencing a failure to understand how Ruby module based namespacing is supposed to work. I've always understood it to be that if you have two classes with the same name you can put one in a module to clarify namespace.</p>\n\n<p>At the moment this doesn't work and I can't see why. In <code>app/models/something/baz.rb</code> I have:</p>\n\n<pre><code>class Baz &lt; ActiveRecord::Base\n  self.table_name = 'baz'\nend\n</code></pre>\n\n<p>I'm not sure why the table_name assignment is in there. Perhaps because of the fact that this file is nested under <code>something</code>?</p>\n\n<p>In <code>lib/foo/bar/baz.rb</code> I have:</p>\n\n<pre><code>module Foo\n  module Bar\n    class Baz\n    end\n  end\nend\n</code></pre>\n\n<p>I've included, in order, the paths <code>lib/foo</code>, <code>lib/bar</code> in my autoload_paths config value in <code>config/application.rb</code>:</p>\n\n<pre><code>config.autoload_paths += %W(\n  #{config.root}/lib\n  #{config.root}/lib/import\n  #{config.root}/lib/foo\n  #{config.root}/lib/foo/bar\n  #{config.root}/app/models/concerns\n  #{config.root}/app/services\n  #{config.root}/app/controllers/concerns\n  #{config.root}/app\n)\n</code></pre>\n\n<p>at the console I can successfully reference the <code>Foo</code>, <code>Foo::Bar</code> modules but when I try to do <code>Foo::Bar::Baz</code> I get the usual error </p>\n\n<blockquote>\n  <p>expected Baz to be defined in lib/foo/bar/baz.rb</p>\n</blockquote>\n\n<p>now I change that class to be in <code>lib/foo/bar/baz_thing.rb</code> and refer to it in console as <code>Foo::Bar::BazThing</code> everything works. I've come to the possibly erroneous conclusion that the autoload implementation is mightly confused because there are two classes with the same name.</p>\n\n<p>I've double, triple and quadruple checked names and paths on all of this. </p>\n\n<p>I also read through all the suggested possible alternative/duplicate questions shown when creating this ticket and could find none that addressed my situation closely enough to answer my question.</p>\n\n<p>Can anyone identify where I've gone wrong and why my expectations on module namespacing behavior are incorrect?</p>\n\n<p>This is on ruby 2.2.2 and Rails 4.2.6</p>\n"}, {"tags": ["ruby", "authentication", "rubygems", "omniauth"], "answers": [{"tags": [], "owner": {"reputation": 1985, "user_id": 1629709, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/ykH7V.png?s=128&g=1", "display_name": "Sebastian", "link": "https://stackoverflow.com/users/1629709/sebastian"}, "is_accepted": true, "score": 1, "last_activity_date": 1478004281, "creation_date": 1478004281, "answer_id": 40360344, "question_id": 40243525, "link": "https://stackoverflow.com/questions/40243525/building-an-omniauth-strategy-with-a-custom-workflow/40360344#40360344", "title": "Building an OmniAuth strategy with a custom workflow", "body": "<p>Apparently this is quite easy to do.</p>\n\n<p><strong>The OmniAuth strategy</strong></p>\n\n<pre><code>module OmniAuth\n  module Strategies\n    class Service\n      include OmniAuth::Strategy\n\n      def request_phase\n        redirect AUTHENTICATION_URL\n      end\n\n      uid { @user_details.user_id }\n\n      def extra\n        @user_details # Return a hash with user data\n      end\n\n      def callback_phase\n        # Configure Service SDK\n        @user_details = Service.user_data # Make SDK call to get user details\n        super\n      end\n    end\n  end\nend\n</code></pre>\n\n<p><strong>The App</strong></p>\n\n<p>1) Add a login button with the authentication URL:</p>\n\n<pre><code>&lt;%= link_to 'Login', 'auth/service' %&gt;\n</code></pre>\n\n<p>2) Add a callback route</p>\n\n<pre><code>get '/auth/service/callback', to: 'sessions#create'\n</code></pre>\n\n<p>3) Handle the callback response in the controller</p>\n\n<pre><code>class SessionsController &lt; ApplicationController\n  def create\n    @user = User.find_or_create_by(service_id: auth_hash.uid)\n    # Handle @user\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 1985, "user_id": 1629709, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/ykH7V.png?s=128&g=1", "display_name": "Sebastian", "link": "https://stackoverflow.com/users/1629709/sebastian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 283, "favorite_count": 0, "accepted_answer_id": 40360344, "answer_count": 1, "score": 0, "last_activity_date": 1478004281, "creation_date": 1477408163, "question_id": 40243525, "link": "https://stackoverflow.com/questions/40243525/building-an-omniauth-strategy-with-a-custom-workflow", "title": "Building an OmniAuth strategy with a custom workflow", "body": "<p>I want to achieve the following login workflow:</p>\n\n<ol>\n<li>user clicks on login button</li>\n<li>user gets redirected to our authentication platform</li>\n<li>user submits the login credentials and then gets redirected back to our\nwebsite via a pre-set callback URL</li>\n<li>the OmniAuth strategy must decode the response (using our SDK) and\nsave the result in the <code>omniauth.auth</code> hash</li>\n</ol>\n\n<p>Is this process easily achievable using a OmniAuth Strategy? It's not very clear to me from the documentation, and the majority of already built strategies seem to be using the OAuth workflow.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "routing"], "comments": [{"owner": {"reputation": 1985, "user_id": 1629709, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/ykH7V.png?s=128&g=1", "display_name": "Sebastian", "link": "https://stackoverflow.com/users/1629709/sebastian"}, "edited": false, "score": 0, "creation_date": 1477408685, "post_id": 40243507, "comment_id": 67749510, "body": "Have you checked if everything looks all right in <code>rake routes</code>?"}], "answers": [{"tags": [], "owner": {"reputation": 1985, "user_id": 1629709, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/ykH7V.png?s=128&g=1", "display_name": "Sebastian", "link": "https://stackoverflow.com/users/1629709/sebastian"}, "is_accepted": true, "score": 3, "last_activity_date": 1477409199, "creation_date": 1477409199, "answer_id": 40243898, "question_id": 40243507, "link": "https://stackoverflow.com/questions/40243507/logout-routing-using-oauth-and-rails/40243898#40243898", "title": "Logout routing using OAuth and Rails", "body": "<p>Looking at the <a href=\"http://www.rubydoc.info/github/plataformatec/devise/master/ActionDispatch/Routing/Mapper%3Adevise_for\" rel=\"nofollow\">devise_for</a> method documentation, I can see that it already adds the exact <code>delete 'sign_out'</code> route, which makes it redundant.</p>\n\n<p>This should be enough to make your code work.</p>\n\n<pre><code>Rails.application.routes.draw do\n  devise_for :users, controllers: { omniauth_callbacks: 'callbacks' }\nend\n</code></pre>\n"}], "owner": {"reputation": 331, "user_id": 4931720, "user_type": "registered", "accept_rate": 56, "profile_image": "https://lh4.googleusercontent.com/-mosfIn_6OMU/AAAAAAAAAAI/AAAAAAAAABs/6VRfNqKaGcw/photo.jpg?sz=128", "display_name": "Damir Nurgaliev", "link": "https://stackoverflow.com/users/4931720/damir-nurgaliev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 324, "favorite_count": 0, "accepted_answer_id": 40243898, "answer_count": 1, "score": 1, "last_activity_date": 1477409199, "creation_date": 1477408114, "question_id": 40243507, "link": "https://stackoverflow.com/questions/40243507/logout-routing-using-oauth-and-rails", "title": "Logout routing using OAuth and Rails", "body": "<p>I'm using OAuth 2 gem to authenticate via google and facebook. \nI need to do logout from google and facebook when I logout from my application. In OA documentation said to:</p>\n\n<pre><code>devise_scope :user do\ndelete 'sign_out', to: 'devise/sessions#destroy', as: :destroy_user_session\nend\n</code></pre>\n\n<p>Add this to routes.rb. I did it so, my routs rb now looks like:</p>\n\n<pre><code>Rails.application.routes.draw do\n  devise_for :users, controllers: { omniauth_callbacks: 'callbacks' }\n  devise_scope :user do\n    delete 'sign_out', to: 'devise/sessions#destroy', as: :destroy_user_session\n  end\n</code></pre>\n\n<p>When I add this line, i got an error when i try to rails s my application:</p>\n\n<blockquote>\n  <p>/Users/damirik/.rvm/gems/ruby-2.3.0/gems/actionpack-5.0.0.1/lib/action_dispatch/routing/route_set.rb:507:in <code>add_route': Invalid route name, already in use: 'destroy_user_session'  (ArgumentError)\n  You may have defined two routes with the same name using the</code>:as` option, or you may be overriding a route already defined by a resource with the same naming. </p>\n</blockquote>\n\n<p>I really dont understand how to fix it. Help please</p>\n"}, {"tags": ["ruby", "ruby-on-rails-3", "rspec", "cancancan"], "answers": [{"tags": [], "owner": {"reputation": 4888, "user_id": 1374563, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/puhlO.gif?s=128&g=1", "display_name": "ole", "link": "https://stackoverflow.com/users/1374563/ole"}, "is_accepted": true, "score": 3, "last_activity_date": 1550569288, "last_edit_date": 1550569288, "creation_date": 1477666255, "answer_id": 40307687, "question_id": 40243366, "link": "https://stackoverflow.com/questions/40243366/using-cancancan-in-a-view-failing-tests/40307687#40307687", "title": "Using CanCanCan in a view failing tests", "body": "<p><code>Warden::Proxy</code> is used for the <code>current_user</code> and <code>user_signed_in?</code> methods.\nYou have to stub these methods in your view specs to make it works:</p>\n\n<pre><code>let(:user) { FactoryGirl.create :user }\n\nbefore(:example) do\n  allow(view).to receive(:current_user).and_return(user)\n  allow(view).to receive(:user_signed_in?).and_return(!!user)\nend\n</code></pre>\n\n<p>See the <a href=\"https://github.com/plataformatec/devise/blob/4924dd6/lib/devise/controllers/helpers.rb#L119-L125\" rel=\"nofollow noreferrer\">devise source</a></p>\n"}], "owner": {"reputation": 873, "user_id": 2320239, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/daef5b7116143c14162b242bf0b1a35a?s=128&d=identicon&r=PG", "display_name": "user2320239", "link": "https://stackoverflow.com/users/2320239/user2320239"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 152, "favorite_count": 0, "accepted_answer_id": 40307687, "answer_count": 1, "score": 1, "last_activity_date": 1550569288, "creation_date": 1477407663, "last_edit_date": 1477409984, "question_id": 40243366, "link": "https://stackoverflow.com/questions/40243366/using-cancancan-in-a-view-failing-tests", "title": "Using CanCanCan in a view failing tests", "body": "<p>Hi I have a project with an ability:</p>\n\n<pre><code> can :set_to_user, Post\n</code></pre>\n\n<p>I then have in one of my views:</p>\n\n<pre><code>&lt;div class: \"btn btn-primary #{disable_button(!(can_set_to_user))}&gt;\n</code></pre>\n\n<p>in a helper I have:</p>\n\n<p>def can_set_to_user\n        can? :set_to_user, post\n   end</p>\n\n<p>This works fine when I run the server, but when I run my tests they seem to crash giving this error?</p>\n\n<pre><code>ActionView::Template::Error:\n       Devise could not find the `Warden::Proxy` instance on your request environment.\n       Make sure that your application is loading Devise and Warden as expected and that the `Warden::Manager` middleware is present in your middleware stack.\n       If you are seeing this on one of your tests, ensure that your tests are either executing the Rails middleware stack or that your tests are using the `Devise::Test::ControllerHelpers` module to inject the `request.env['warden']` object for you.\n</code></pre>\n\n<p>I'm not sure what is causing this, but any help would be great</p>\n"}, {"tags": ["ruby", "watir"], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 6218303, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GLFrs.jpg?s=128&g=1", "display_name": "Shinu John", "link": "https://stackoverflow.com/users/6218303/shinu-john"}, "edited": false, "score": 0, "creation_date": 1477994780, "post_id": 40242878, "comment_id": 67968987, "body": "Thank you very much...Will try the multiple locator criteria to see it it resolves the issue"}, {"owner": {"reputation": 322, "user_id": 1416040, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/579162c0a40876566051a3940ef8b53e?s=128&d=identicon&r=PG", "display_name": "Nate H", "link": "https://stackoverflow.com/users/1416040/nate-h"}, "reply_to_user": {"reputation": 13, "user_id": 6218303, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GLFrs.jpg?s=128&g=1", "display_name": "Shinu John", "link": "https://stackoverflow.com/users/6218303/shinu-john"}, "edited": false, "score": 0, "creation_date": 1483035136, "post_id": 40242878, "comment_id": 69972274, "body": "@ShinuJohn, did you get this working?  I&#39;m running into a similar issue and could use the assistance.  Thank you."}, {"owner": {"reputation": 13, "user_id": 6218303, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GLFrs.jpg?s=128&g=1", "display_name": "Shinu John", "link": "https://stackoverflow.com/users/6218303/shinu-john"}, "edited": false, "score": 0, "creation_date": 1483126273, "post_id": 40242878, "comment_id": 70005604, "body": "Nate  I created an oveloaded method with the 3 different parameters being passed to the method as applicable.. Xpath css or id... Xpath is most unreliable ..css and the id...i added a sleep to make sure the dropdown elements are able to populate after a callback to generate the contents of the drop down list... Will post the snippet once i access the dev machine"}, {"owner": {"reputation": 13, "user_id": 6218303, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GLFrs.jpg?s=128&g=1", "display_name": "Shinu John", "link": "https://stackoverflow.com/users/6218303/shinu-john"}, "edited": false, "score": 0, "creation_date": 1486389058, "post_id": 40242878, "comment_id": 71310009, "body": "Call : clickOndropDown(&quot;id&quot;,&quot;dropDownAutocomplete&quot;,&quot;1&quot;,@b)"}, {"owner": {"reputation": 13, "user_id": 6218303, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GLFrs.jpg?s=128&g=1", "display_name": "Shinu John", "link": "https://stackoverflow.com/users/6218303/shinu-john"}, "edited": false, "score": 0, "creation_date": 1486389121, "post_id": 40242878, "comment_id": 71310055, "body": "def clickOndropDown(identifier,selector,targetVal,br) \t\tmaxattempts = 3 \t\tattempt=1 \t\t\tbegin \t\t\t\t\tClickBasedonID(identifier,selector,br) \t\t\t        sleep 1 \t\t\t        br.element(:link, targetVal).fire_event :click \t\t    rescue  \t\t\t    attempt += 1 \t\t\t    sleep 1 \t\t\t    \tClickBasedonID(identifier,selector,br) \t\t\t    if(attempt &gt; maxattempts) \t\t\t    \tputs &quot;element &quot; + selector.to_s + &quot; cannot be clicked&quot;\t\t\t\t  \t\t\t\t  \t\t\t\telse  \t\t\t\t \tsleep 1 \t\t\t\t \tretry \t\t\t\tend    \t\t\t\t \t   \t\tend\t end"}], "tags": [], "owner": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "is_accepted": false, "score": 0, "last_activity_date": 1477406756, "last_edit_date": 1477406756, "creation_date": 1477406307, "answer_id": 40242878, "question_id": 40242546, "link": "https://stackoverflow.com/questions/40242546/selecting-elements-using-variables-in-ruby-watir/40242878#40242878", "title": "selecting elements using variables in ruby /watir", "body": "<p>I am surprised that there is no exception. I would expect a <code>MissingWayOfFindingObjectException</code>.</p>\n\n<p>The problem is that the identifier is a <code>String</code> instead of a <code>Symbol</code>. The line that is not working is equivalent to:</p>\n\n<pre><code>br.element(\":id\" =&gt; \"dropDownAutocomplete\")\n</code></pre>\n\n<p>Which is not the same as:</p>\n\n<pre><code>br.element(:id =&gt; \"dropDownAutocomplete\")\n</code></pre>\n\n<p>Notice the difference between the <code>String</code>, <code>\":id\"</code>, and the <code>Symbol</code>, <code>:id</code>.</p>\n\n<p>You should change the method call to send a <code>Symbol</code> and change the method to no longer change it to a <code>String</code>:</p>\n\n<pre><code>def clickOndropDown(identifier,selector,targetVal,br)\n  br.element(identifier =&gt; selector).fire_event :click\nend\n\nclickOndropDown(:id,\"dropDownAutocomplete\",\"ABC\",@b)\n</code></pre>\n\n<p>If you want to have a more versatile method, you would be better off to have the <code>clickOndropDown</code> accept a <code>Hash</code> for the locator. This would allow you to accept multiple locator criteria.</p>\n\n<pre><code>def click_on_dropdown(br, target_val, locator)\n  br.element(locator).fire_event :click\nend\n\n# Call for the original example\nclick_on_dropdown(@b, \"ABC\", id: \"dropDownAutocomplete\")\n\n# Call with multiple selectors\nclick_on_dropdown(@b, \"ABC\", id: \"dropDownAutocomplete\", name: \"name_value\")\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 6218303, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GLFrs.jpg?s=128&g=1", "display_name": "Shinu John", "link": "https://stackoverflow.com/users/6218303/shinu-john"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 577, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1477406756, "creation_date": 1477405280, "question_id": 40242546, "link": "https://stackoverflow.com/questions/40242546/selecting-elements-using-variables-in-ruby-watir", "title": "selecting elements using variables in ruby /watir", "body": "<p>The real issue I am encountering is the delay on population of drop down lists in a web page.</p>\n\n<p>The call i am using in the script is :-</p>\n\n<pre><code>   clickOndropDown(\":id\",\"dropDownAutocomplete\",\"ABC\",@b)\n</code></pre>\n\n<p>where \n1. clickOndropDown is the method invoked\n2. id is the element selector (which can  be :id,xpath, or :css [which are different selectors in my html code for different dropdown boxes]  to handle all cases within the code)\n3. ABC is the element to be selected from the drop down list\n4. @b is the browser object</p>\n\n<p>the function definition is as :</p>\n\n<pre><code>    def clickOndropDown(identifier,selector,targetVal,br)\n\n            begin\n                puts \"starting off\"     # gets printed\n                br.element(\"#{identifier}\" =&gt; \"#{selector}\").fire_event :click #--- does not work--- \n                # br.element(:id =&gt; \"#{selector}\").fire_event :click           #--- works \n                puts \"inside selector pass 1\"\n\n                br.element(:link, targetVal).fire_event :click  \n               ...\n               ...\n               # rest of the code\n</code></pre>\n\n<p>It does not throw any exception..just does  the push statement before the selection statement.</p>\n\n<p>is there any wild card handler for # (--\"#{identifier}\" ) so that I can write a single code for handling id,xpath,or css</p>\n"}, {"tags": ["ruby", "csv"], "comments": [{"owner": {"reputation": 339644, "user_id": 118068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/077db5466d3b58e7bbbd498dca173f04?s=128&d=identicon&r=PG", "display_name": "Marc B", "link": "https://stackoverflow.com/users/118068/marc-b"}, "edited": false, "score": 1, "creation_date": 1477404998, "post_id": 40242403, "comment_id": 67746858, "body": "your first one is doing a &quot;cartesian join&quot; - for every row in the uk file, cross-reference to ALL rows in the price file that means you&#39;re doing <code>N x M</code> equality tests. The second one does just as many joins/comparisons, minus not having to store the entire row in memory. You would be FAR better off stuffing both files into a proper database and doing a conventional <code>join</code>."}, {"owner": {"reputation": 171, "user_id": 5895250, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/6d2741e6e584ca6fff8e856b324e9b4c?s=128&d=identicon&r=PG&f=1", "display_name": "Yoklan", "link": "https://stackoverflow.com/users/5895250/yoklan"}, "reply_to_user": {"reputation": 339644, "user_id": 118068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/077db5466d3b58e7bbbd498dca173f04?s=128&d=identicon&r=PG", "display_name": "Marc B", "link": "https://stackoverflow.com/users/118068/marc-b"}, "edited": false, "score": 0, "creation_date": 1477405088, "post_id": 40242403, "comment_id": 67746915, "body": "Would it be considerably faster to put both files into seperate tables and do a join on them instead ?"}, {"owner": {"reputation": 339644, "user_id": 118068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/077db5466d3b58e7bbbd498dca173f04?s=128&d=identicon&r=PG", "display_name": "Marc B", "link": "https://stackoverflow.com/users/118068/marc-b"}, "edited": false, "score": 1, "creation_date": 1477405192, "post_id": 40242403, "comment_id": 67747002, "body": "the second one would be a wee bit more efficient, since you only load the  uk file <b>ONCE</b> instead of every single time you process a new row of the other file. but either way, you&#39;re doing NxM comparisons. if that&#39;s 1 million records in the 3.5gig file and 10,000 records in the 100meg file, that&#39;s 10 BILLION comparisons"}, {"owner": {"reputation": 16458, "user_id": 720164, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/654c5b015c1aa595fe534b2f217590cb?s=128&d=identicon&r=PG", "display_name": "Jonathan Allard", "link": "https://stackoverflow.com/users/720164/jonathan-allard"}, "edited": false, "score": 1, "creation_date": 1477405267, "post_id": 40242403, "comment_id": 67747058, "body": "That&#39;s what I&#39;d do too. Postgres has pretty good support for importing CSVs, pgfutter makes this a breeze, you then have a tool that is pretty much tailor-made to do all sorts of joins and transformations on your data."}, {"owner": {"reputation": 171, "user_id": 5895250, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/6d2741e6e584ca6fff8e856b324e9b4c?s=128&d=identicon&r=PG&f=1", "display_name": "Yoklan", "link": "https://stackoverflow.com/users/5895250/yoklan"}, "edited": false, "score": 0, "creation_date": 1477405460, "post_id": 40242403, "comment_id": 67747199, "body": "The 3rd csv that was meant to be produced was going to be processed by a php script to be handed to a mysql database. Would it make a difference whether it&#39;s mysql or postgres?"}, {"owner": {"reputation": 16458, "user_id": 720164, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/654c5b015c1aa595fe534b2f217590cb?s=128&d=identicon&r=PG", "display_name": "Jonathan Allard", "link": "https://stackoverflow.com/users/720164/jonathan-allard"}, "edited": false, "score": 1, "creation_date": 1477407214, "post_id": 40242403, "comment_id": 67748433, "body": "Not sure of the specifics, but I think any good RDBMS should be able to do this. There might not be the same tools or tools I&#39;m used to work with, but Mysql ought to be able to do this."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1477419025, "post_id": 40242403, "comment_id": 67755916, "body": "I agree that a good DB is the right solution. PostgreSQL and MySQL are free to use and are made to handle massive amounts of data and can easily import CSV files. Sequel is a good ORM if you&#39;re writing in plain-Ruby, otherwise ActiveRecord in Rails would be a good choice."}, {"owner": {"reputation": 171, "user_id": 5895250, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/6d2741e6e584ca6fff8e856b324e9b4c?s=128&d=identicon&r=PG&f=1", "display_name": "Yoklan", "link": "https://stackoverflow.com/users/5895250/yoklan"}, "reply_to_user": {"reputation": 339644, "user_id": 118068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/077db5466d3b58e7bbbd498dca173f04?s=128&d=identicon&r=PG", "display_name": "Marc B", "link": "https://stackoverflow.com/users/118068/marc-b"}, "edited": false, "score": 0, "creation_date": 1477419035, "post_id": 40242403, "comment_id": 67755925, "body": "@MarcB If you post an answer I will accept it since i decided to follow your advice and put the files into a database."}], "owner": {"reputation": 171, "user_id": 5895250, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/6d2741e6e584ca6fff8e856b324e9b4c?s=128&d=identicon&r=PG&f=1", "display_name": "Yoklan", "link": "https://stackoverflow.com/users/5895250/yoklan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 205, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1477418904, "creation_date": 1477404872, "last_edit_date": 1477418904, "question_id": 40242403, "link": "https://stackoverflow.com/questions/40242403/how-to-process-csv-data-from-two-files-using-a-matching-column", "title": "How to process CSV data from two files using a matching column", "body": "<p>I have two CSV files, one is 3.5GB and the other one is 100MB. The larger file contains two columns that I need to add to two other columns from the other file to make a third CSV file. </p>\n\n<p>Both files contain a postcode column which is how I'm trying to match the rows from them. However, as the files are quite large, the operation is slow. I tried looking for matches in two ways but they were both slow:</p>\n\n<pre><code>CSV.foreach('ukpostcodes.csv') do |row|\n  CSV.foreach('pricepaid.csv') do |item|\n    if row[1] == item[3]\n      puts \"match\"\n    end\n  end\nend\n</code></pre>\n\n<p>and:</p>\n\n<pre><code>firstFile = CSV.read('pricepaid.csv')\nsecondFile = CSV.read('ukpostcodes.csv')\n\npost_codes = Array.new\nlat_longs = Array.new\n\nfirstFile.each do |row|\n  post_codes &lt;&lt; row[3]\nend\n\nsecondFile.each do |row|\n  lat_longs &lt;&lt; row[1]\nend\n\npost_codes.each do |row|\n  lat_longs.each do |item|\n    if row == item\n      puts \"Match\"\n    end\n  end\nend\n</code></pre>\n\n<p>Is there a more efficient way of handling this task as the CSV files are large in size?</p>\n"}, {"tags": ["ruby", "yield"], "answers": [{"comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1477419439, "post_id": 40242148, "comment_id": 67756149, "body": "Please use correct punctuation/grammar when asking or answering. Stack Overflow isn&#39;t a discussion group or a forum where those don&#39;t matter. Instead it&#39;s a reference book, like an encyclopedia or cookbook."}, {"owner": {"reputation": 353, "user_id": 2301346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47bcd637aed6a231ff822c70a0bb4716?s=128&d=identicon&r=PG", "display_name": "user2301346", "link": "https://stackoverflow.com/users/2301346/user2301346"}, "reply_to_user": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1477452146, "post_id": 40242148, "comment_id": 67768452, "body": "Thanks, I&#39;ll take care of this next time onwards."}], "tags": [], "owner": {"reputation": 353, "user_id": 2301346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47bcd637aed6a231ff822c70a0bb4716?s=128&d=identicon&r=PG", "display_name": "user2301346", "link": "https://stackoverflow.com/users/2301346/user2301346"}, "is_accepted": false, "score": 0, "last_activity_date": 1506532672, "last_edit_date": 1506532672, "creation_date": 1477404221, "answer_id": 40242148, "question_id": 40242016, "link": "https://stackoverflow.com/questions/40242016/how-to-yield-an-argument/40242148#40242148", "title": "How to yield an argument", "body": "<p>The <code>yield(element)</code> passes <code>element</code> to the block provided to the <code>my_map</code> method.</p>\n\n<pre><code>my_map([1,2,3]) {|element| element*2}\n</code></pre>\n\n<p>The block is receiving <code>element</code> as input which you passed from <code>yield(element)</code>.</p>\n\n<p>Consider another example to help make it clear:</p>\n\n<pre><code>def simple_yield(arg)\n  yield(arg)\nend\n</code></pre>\n\n<p>Now if you do:</p>\n\n<pre><code>simple_yield(10){|x| puts x} #=&gt; 10\nsimple_yield(){|x| puts x} #=&gt;nil\n</code></pre>\n\n<p><code>yield(arg)</code> yields the argument to the block given to the method.</p>\n"}, {"tags": [], "owner": {"reputation": 1128, "user_id": 3973117, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f52a78aa4cf83a8372e28a27ce3511c?s=128&d=identicon&r=PG", "display_name": "jan.zikan", "link": "https://stackoverflow.com/users/3973117/jan-zikan"}, "is_accepted": false, "score": 0, "last_activity_date": 1477406766, "last_edit_date": 1477406766, "creation_date": 1477404588, "answer_id": 40242287, "question_id": 40242016, "link": "https://stackoverflow.com/questions/40242016/how-to-yield-an-argument/40242287#40242287", "title": "How to yield an argument", "body": "<p>If you don't pass any parametr to the block through yield method, than the parameter will have nil value which might cause an error according to what you are doing in the block passed to the method that is using yield.</p>\n\n<pre><code>def my_map(array)\n  new_array = []\n\n  array.each do |element|\n    new_array &lt;&lt; yield\n  end\n\n  new_array\nend\n\nmy_map([1,2]) { |x| x } #=&gt; [nil, nil]\nmy_map([1,2]) { |x| x + 1 } # will end up with undefined method `+' for nil:NilClass (NoMethodError)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "is_accepted": false, "score": 1, "last_activity_date": 1477404605, "creation_date": 1477404605, "answer_id": 40242298, "question_id": 40242016, "link": "https://stackoverflow.com/questions/40242016/how-to-yield-an-argument/40242298#40242298", "title": "How to yield an argument", "body": "<p><code>yield</code> doesn't 'retrieve a block\", it yields (potentially with a value, like in this case) <em>to</em> a block, and \"returns\" the value returned by said block.</p>\n\n<p>It's \"taking\" the iteration element because <code>my_map</code> expects a block that receives a parameter.</p>\n"}, {"tags": [], "owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "is_accepted": true, "score": 4, "last_activity_date": 1477406097, "creation_date": 1477406097, "answer_id": 40242802, "question_id": 40242016, "link": "https://stackoverflow.com/questions/40242016/how-to-yield-an-argument/40242802#40242802", "title": "How to yield an argument", "body": "<blockquote>\n  <p>I tried to research <code>yield</code> a great deal but I can't figure out why in this case it is taking the iteration element as an argument.</p>\n</blockquote>\n\n<p><code>yield</code> doesn't take an argument. The block does. <code>yield</code> yields the value to the block.</p>\n\n<blockquote>\n  <p>I know <code>yield</code> retrieves a block,</p>\n</blockquote>\n\n<p>No, it yields control (and values) to the block.</p>\n\n<blockquote>\n  <p>but what <em>exactly</em> is being yielded here and why does it take an argument?</p>\n</blockquote>\n\n<p>The object referenced by <code>element</code> is yielded to the block, along with the flow of control.</p>\n"}, {"tags": [], "owner": {"reputation": 16458, "user_id": 720164, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/654c5b015c1aa595fe534b2f217590cb?s=128&d=identicon&r=PG", "display_name": "Jonathan Allard", "link": "https://stackoverflow.com/users/720164/jonathan-allard"}, "is_accepted": false, "score": 1, "last_activity_date": 1477406762, "creation_date": 1477406762, "answer_id": 40243026, "question_id": 40242016, "link": "https://stackoverflow.com/questions/40242016/how-to-yield-an-argument/40243026#40243026", "title": "How to yield an argument", "body": "<p>Calling <code>yield</code> is the same thing as calling <code>block.call</code>. So <code>yield</code> calls the block with your argument. That's it.</p>\n\n<p>(You can think of a block as a mini-method.)</p>\n\n<p>However in your method, you're not explicitly saying it accepts a block (<code>def my_map(array, &amp;block)</code>), but it implicitly does that. </p>\n\n<p>So your implementation, just rewritten slightly, is equivalent to: </p>\n\n<pre><code>def my_map(array, &amp;block)  # added &amp;block\n\n  new_array = []\n  array.each do |element|\n    new_array &lt;&lt; block.call(element)   # changed for block.call\n  end\n\n  new_array\nend\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 6316323, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Qn2jx.jpg?s=128&g=1", "display_name": "JayJay", "link": "https://stackoverflow.com/users/6316323/jayjay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 788, "favorite_count": 0, "accepted_answer_id": 40242802, "answer_count": 5, "score": 2, "last_activity_date": 1506532672, "creation_date": 1477403863, "last_edit_date": 1477419153, "question_id": 40242016, "link": "https://stackoverflow.com/questions/40242016/how-to-yield-an-argument", "title": "How to yield an argument", "body": "<p>This method reproduces the <code>map</code> method in order to obtain a deeper understanding of how <code>yield</code> works.</p>\n\n<p>I researched <code>yield</code> but I couldn't figure out why it is taking the iteration element as an argument.</p>\n\n<p>I know <code>yield</code> retrieves a block, but what <em>exactly</em> is being yielded here and why does it take an argument?</p>\n\n<p>The code below is correct:</p>\n\n<pre><code>def my_map(array)\n\n  new_array = []\n  array.each do |element|\n    new_array &lt;&lt; yield(element)\n  end\n\n  new_array\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "omniauth-linkedin"], "owner": {"reputation": 141, "user_id": 7027334, "user_type": "registered", "profile_image": "https://graph.facebook.com/1676932422624151/picture?type=large", "display_name": "Prateek Darmwal", "link": "https://stackoverflow.com/users/7027334/prateek-darmwal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1068, "favorite_count": 2, "answer_count": 0, "score": 1, "last_activity_date": 1477403296, "creation_date": 1477403296, "question_id": 40241798, "link": "https://stackoverflow.com/questions/40241798/getting-error-faradayclienterror-the-server-responded-with-status-400-on-addi", "title": "Getting error Faraday::ClientError: the server responded with status 400 on adding a share to linkedin in rails", "body": "<p>I am trying to add a share using linkedin-oauth2 gem and getting an error</p>\n\n<pre><code>Faraday::ClientError: the server responded with status 400\n</code></pre>\n\n<p>I have also tried from irb but still getting same error. I have w_share permissions set for my access token but I don't know why I am getting this error.\nHere is a snippet of what m doing in my controller method-></p>\n\n<pre><code>def post_on_linkedin\n  user = User.find_by_id(session[:user_id])\n  @client = LinkedIn::API.new(user.token)\n  @client.add_share(content: \"hello\")\n  redirect_to social_media_linkedin_index_path\nend\n</code></pre>\n\n<p>Please tell me if something is wrong with my syntax or anything else and please provide the syntax for using 'add_share' method with all other options. Thanks</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 559, "user_id": 433230, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87363ffd3d0f9b1c47a7cbd6ee68a320?s=128&d=identicon&r=PG", "display_name": "Eduardo Sampaio", "link": "https://stackoverflow.com/users/433230/eduardo-sampaio"}, "edited": false, "score": 1, "creation_date": 1477403113, "post_id": 40241654, "comment_id": 67745311, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/17870762/changing-the-default-date-and-time-format-in-rails-4\">Changing the default date and time format in Rails 4</a>"}, {"owner": {"reputation": 1755, "user_id": 1877683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uttsA.jpg?s=128&g=1", "display_name": "C dot StrifeVII", "link": "https://stackoverflow.com/users/1877683/c-dot-strifevii"}, "edited": false, "score": 0, "creation_date": 1477403127, "post_id": 40241654, "comment_id": 67745324, "body": "Can you post the view or an example of it?"}, {"owner": {"reputation": 35, "user_id": 5422842, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/481281de1a8909a0d772c77874d552b7?s=128&d=identicon&r=PG&f=1", "display_name": "SumLare", "link": "https://stackoverflow.com/users/5422842/sumlare"}, "reply_to_user": {"reputation": 1755, "user_id": 1877683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uttsA.jpg?s=128&g=1", "display_name": "C dot StrifeVII", "link": "https://stackoverflow.com/users/1877683/c-dot-strifevii"}, "edited": false, "score": 0, "creation_date": 1477403408, "post_id": 40241654, "comment_id": 67745551, "body": "@CdotStrifeVII Example: <code>- @items.each do |item|</code>    <code>= item.date_field.strftime(&#39;%d.%m.%Y %H:%M&#39;)</code>   <code>= item.date_field1.strftime(&#39;%d.%m.%Y %H:%M&#39;)</code>   <code>= ...</code>"}, {"owner": {"reputation": 16458, "user_id": 720164, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/654c5b015c1aa595fe534b2f217590cb?s=128&d=identicon&r=PG", "display_name": "Jonathan Allard", "link": "https://stackoverflow.com/users/720164/jonathan-allard"}, "edited": false, "score": 0, "creation_date": 1477404319, "post_id": 40241654, "comment_id": 67746282, "body": "Not supporting the close vote on this, the question, as phrased, is not about <b>changing the default time format</b> but <b>drying up code in views</b>."}, {"owner": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 0, "creation_date": 1477404424, "post_id": 40241654, "comment_id": 67746367, "body": "Define &quot;doesn&#39;t work&quot;. Please add code to the question, not to comments--it&#39;s impossible to understand your intent."}, {"owner": {"reputation": 35, "user_id": 5422842, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/481281de1a8909a0d772c77874d552b7?s=128&d=identicon&r=PG&f=1", "display_name": "SumLare", "link": "https://stackoverflow.com/users/5422842/sumlare"}, "edited": false, "score": 0, "creation_date": 1477404638, "post_id": 40241654, "comment_id": 67746545, "body": "I just came up with this bunch of code in my model <code>def to_s(date)</code>   <code>send(date).strftime(&#39;%d.%m.%Y %H:%M&#39;)</code> <code>end</code>"}, {"owner": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 0, "creation_date": 1477404740, "post_id": 40241654, "comment_id": 67746629, "body": "I may have been misunderstood. <b>Please add code to the question, not to comments.</b> I don&#39;t understand why you&#39;re using <code>send</code> there, you can call <code>strftime</code> directly on the <code>date</code> parameter. If nothing else, you&#39;re using <code>send</code> wrong."}, {"owner": {"reputation": 19261, "user_id": 4758119, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/F4dJY.jpg?s=128&g=1", "display_name": "Deepak Mahakale", "link": "https://stackoverflow.com/users/4758119/deepak-mahakale"}, "edited": false, "score": 0, "creation_date": 1477404921, "post_id": 40241654, "comment_id": 67746788, "body": "I will really prefer either <code>helper</code> or <code>localization</code> with customized format"}, {"owner": {"reputation": 19261, "user_id": 4758119, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/F4dJY.jpg?s=128&g=1", "display_name": "Deepak Mahakale", "link": "https://stackoverflow.com/users/4758119/deepak-mahakale"}, "edited": false, "score": 0, "creation_date": 1477405992, "post_id": 40241654, "comment_id": 67747591, "body": "@SumLare What happens if you call <code>item.id.to_s</code> or any other field?"}, {"owner": {"reputation": 35, "user_id": 5422842, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/481281de1a8909a0d772c77874d552b7?s=128&d=identicon&r=PG&f=1", "display_name": "SumLare", "link": "https://stackoverflow.com/users/5422842/sumlare"}, "reply_to_user": {"reputation": 19261, "user_id": 4758119, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/F4dJY.jpg?s=128&g=1", "display_name": "Deepak Mahakale", "link": "https://stackoverflow.com/users/4758119/deepak-mahakale"}, "edited": false, "score": 0, "creation_date": 1477406845, "post_id": 40241654, "comment_id": 67748184, "body": "@Deepak I got it now, I&#39;ll use option 2 for it"}], "answers": [{"comments": [{"owner": {"reputation": 35, "user_id": 5422842, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/481281de1a8909a0d772c77874d552b7?s=128&d=identicon&r=PG&f=1", "display_name": "SumLare", "link": "https://stackoverflow.com/users/5422842/sumlare"}, "edited": false, "score": 0, "creation_date": 1477404896, "post_id": 40242127, "comment_id": 67746768, "body": "That is good approach, but I need this method only for one model. I guess <code>customized_time_format</code> method is better to be defined in my model."}, {"owner": {"reputation": 9878, "user_id": 3315785, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/YsMo6.jpg?s=128&g=1", "display_name": "j-dexx", "link": "https://stackoverflow.com/users/3315785/j-dexx"}, "reply_to_user": {"reputation": 35, "user_id": 5422842, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/481281de1a8909a0d772c77874d552b7?s=128&d=identicon&r=PG&f=1", "display_name": "SumLare", "link": "https://stackoverflow.com/users/5422842/sumlare"}, "edited": false, "score": 0, "creation_date": 1477405879, "post_id": 40242127, "comment_id": 67747504, "body": "@SumLare I would use option 2 personally, but if you use 1 I wouldn&#39;t put it in your model, if you need it on another model later you have to move it."}, {"owner": {"reputation": 1410, "user_id": 2454036, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/746251016e806bec7aaa34b12930d387?s=128&d=identicon&r=PG", "display_name": "Juan Fuentes", "link": "https://stackoverflow.com/users/2454036/juan-fuentes"}, "edited": false, "score": 0, "creation_date": 1477406159, "post_id": 40242127, "comment_id": 67747714, "body": "Option 2 is much better IMO"}], "tags": [], "owner": {"reputation": 19261, "user_id": 4758119, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/F4dJY.jpg?s=128&g=1", "display_name": "Deepak Mahakale", "link": "https://stackoverflow.com/users/4758119/deepak-mahakale"}, "is_accepted": true, "score": 4, "last_activity_date": 1477404818, "last_edit_date": 1477404818, "creation_date": 1477404156, "answer_id": 40242127, "question_id": 40241654, "link": "https://stackoverflow.com/questions/40241654/dry-views-strftime-call/40242127#40242127", "title": "DRY views strftime call", "body": "<p>You can create a helper (in application_helper.rb if you are using it application wide)</p>\n\n<p><strong>Option 1</strong></p>\n\n<pre><code>def customized_time_format(time)\n  time.strftime('%d.%m.%Y %H:%M')\nend\n</code></pre>\n\n<p>and make use of it in your views</p>\n\n<pre><code>- @items.each do |item| \n  = customized_time_format(item.date_field)\n  = customized_time_format(item.date_field1)\n</code></pre>\n\n<p><strong>Option2</strong></p>\n\n<pre><code># config/locales/en.yml\nen:\n  time:\n    formats:\n      customized: '%d.%m.%Y %H:%M'\n</code></pre>\n\n<p>And use it</p>\n\n<pre><code>- @items.each do |item| \n  = l(item.date_field, format: :customized)\n  = l(item.date_field1, format: :customized)\n</code></pre>\n"}], "owner": {"reputation": 35, "user_id": 5422842, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/481281de1a8909a0d772c77874d552b7?s=128&d=identicon&r=PG&f=1", "display_name": "SumLare", "link": "https://stackoverflow.com/users/5422842/sumlare"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 129, "favorite_count": 0, "accepted_answer_id": 40242127, "answer_count": 1, "score": 1, "last_activity_date": 1477406428, "creation_date": 1477402927, "last_edit_date": 1477406428, "question_id": 40241654, "link": "https://stackoverflow.com/questions/40241654/dry-views-strftime-call", "title": "DRY views strftime call", "body": "<p>I have a view of my model with many date fields rendered.</p>\n\n<p>What I want to do is call <code>strftime('%d.%m.%Y %H:%M')</code> on each date field I have.</p>\n\n<pre><code>- @items.each do |item| \n  = item.date_field.strftime('%d.%m.%Y %H:%M') \n  = item.date_field1.strftime('%d.%m.%Y %H:%M')\n</code></pre>\n\n<p>Any ideas on how I can to DRY this? I tried to make <code>to_s</code> method in my model, but unfortunately that doesn't work.</p>\n\n<p>Update:</p>\n\n<p>I defined this method:</p>\n\n<pre><code>def to_s(date)\n  send(date).strftime('%d.%m.%Y %H:%M')\nend\n</code></pre>\n\n<p>So I can:</p>\n\n<pre><code>- @items.each do |item| \n  = item.to_s(:date_field)\n  = item.to_s(:date_field1)\n</code></pre>\n"}]