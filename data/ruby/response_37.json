[{"tags": ["ruby-on-rails", "ruby", "encoding", "enums"], "comments": [{"owner": {"reputation": 7633, "user_id": 1520714, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/b6725a3582042901598451ee700116ce?s=128&d=identicon&r=PG&f=1", "display_name": "Mike Campbell", "link": "https://stackoverflow.com/users/1520714/mike-campbell"}, "edited": false, "score": 2, "creation_date": 1443099038, "post_id": 32751144, "comment_id": 53362600, "body": "which ruby/rails version are you using? when I use humanize, titleize, or capitalize, I get &quot;&#225;gua&quot; not &quot;&#193;gua&quot; or &quot;Agua&quot;."}, {"owner": {"reputation": 14364, "user_id": 1023609, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/14cd00b085c207261db49ac46be4773c?s=128&d=identicon&r=PG", "display_name": "MurifoX", "link": "https://stackoverflow.com/users/1023609/murifox"}, "reply_to_user": {"reputation": 7633, "user_id": 1520714, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/b6725a3582042901598451ee700116ce?s=128&d=identicon&r=PG&f=1", "display_name": "Mike Campbell", "link": "https://stackoverflow.com/users/1520714/mike-campbell"}, "edited": false, "score": 0, "creation_date": 1443099777, "post_id": 32751144, "comment_id": 53363163, "body": "@MikeCampbell Actually, the enum, when called like <code>Class.tipos</code> returns a hash of <code>Strings</code> and <code>Integers</code> (<code>{&quot;fogo =&gt; 0, &quot;&#225;gua&quot; =&gt; 1}</code>). It transformed the symbols into strings, so that&#39;s why the <code>.humanize</code> method works. I just checked it."}, {"owner": {"reputation": 7633, "user_id": 1520714, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/b6725a3582042901598451ee700116ce?s=128&d=identicon&r=PG&f=1", "display_name": "Mike Campbell", "link": "https://stackoverflow.com/users/1520714/mike-campbell"}, "edited": false, "score": 0, "creation_date": 1443103101, "post_id": 32751144, "comment_id": 53365666, "body": "yes, humanize is a string method provided by ActiveSupport, but it does not result in &quot;&#193;gua&quot;\u2014at least not for me."}, {"owner": {"reputation": 14364, "user_id": 1023609, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/14cd00b085c207261db49ac46be4773c?s=128&d=identicon&r=PG", "display_name": "MurifoX", "link": "https://stackoverflow.com/users/1023609/murifox"}, "reply_to_user": {"reputation": 7633, "user_id": 1520714, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/b6725a3582042901598451ee700116ce?s=128&d=identicon&r=PG&f=1", "display_name": "Mike Campbell", "link": "https://stackoverflow.com/users/1520714/mike-campbell"}, "edited": false, "score": 0, "creation_date": 1443103272, "post_id": 32751144, "comment_id": 53365786, "body": "@MikeCampbell I reformulate the question to show that <code>.humanize</code> is used on the string, instead of the symbol. I just need to know now if there is a problem in using accents in symbols."}, {"owner": {"reputation": 7633, "user_id": 1520714, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/b6725a3582042901598451ee700116ce?s=128&d=identicon&r=PG&f=1", "display_name": "Mike Campbell", "link": "https://stackoverflow.com/users/1520714/mike-campbell"}, "edited": false, "score": 0, "creation_date": 1443103716, "post_id": 32751144, "comment_id": 53366107, "body": "you&#39;re kind of ignoring my point that <code>humanize</code> does not capitalise the accented &quot;&#225;&quot;, but never mind.  no, there is no problem with using accents in symbols."}, {"owner": {"reputation": 20735, "user_id": 307106, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/6a13e655e637138f8d571cec3f9cea76?s=128&d=identicon&r=PG", "display_name": "jrochkind", "link": "https://stackoverflow.com/users/307106/jrochkind"}, "edited": false, "score": 0, "creation_date": 1443670185, "post_id": 32751144, "comment_id": 53588728, "body": "There&#39;s no problem using accents in symbols. I would not be surprised if the Rails humanize/titleize/etc-type methods sometimes do the wrong thing with non-English though. Doing the right thing such that it works in any arbitrary language turns out to be surprisingly hard, and the Rails features were originally written without thinking much about internationalization.  There are ways to configure your own proper langauge-specific conversions for some of those Rails methods, as well as alternatives to the Rails methods. if that&#39;s your question, ask it in a different question."}], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 4358007, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d0683075dea257c3a0d630ff4eddd97?s=128&d=identicon&r=PG&f=1", "display_name": "Kaidu", "link": "https://stackoverflow.com/users/4358007/kaidu"}, "is_accepted": false, "score": 1, "last_activity_date": 1443437425, "creation_date": 1443437425, "answer_id": 32821184, "question_id": 32751144, "link": "https://stackoverflow.com/questions/32751144/is-it-a-bad-practice-to-create-a-ruby-symbol-with-accent/32821184#32821184", "title": "Is it a bad practice to create a Ruby symbol with accent?", "body": "<p>Symbols are internal strings. So in an ideal world there should never be a translation from an external string (given by the user) to a symbol. So there is no real usage for accents in symbols. It's probably a similar question like \"should I give my method english names or Portuguese names\". However, if you use accents, you should take care that all your source files use the same (hopefully utf-8) encoding. Otherwise you will get problems accessing symbols from sourcefiles with different encodings.\nSo my suggestion is: use only ASCII chars for symbols as you usually do for method names.</p>\n\n<p>Rails behaviour of \"breaking this rule\" and translating symbols to strings in forms is just part of rails convention over configuration. I would just write the forms myself (or use rails localization methods) instead of using accents in the symbols.</p>\n"}], "owner": {"reputation": 14364, "user_id": 1023609, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/14cd00b085c207261db49ac46be4773c?s=128&d=identicon&r=PG", "display_name": "MurifoX", "link": "https://stackoverflow.com/users/1023609/murifox"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 144, "favorite_count": 1, "answer_count": 1, "score": 3, "last_activity_date": 1443437425, "creation_date": 1443051368, "last_edit_date": 1443103195, "question_id": 32751144, "link": "https://stackoverflow.com/questions/32751144/is-it-a-bad-practice-to-create-a-ruby-symbol-with-accent", "title": "Is it a bad practice to create a Ruby symbol with accent?", "body": "<p>Is there any drawback in creating a <code>ruby</code> <code>symbol</code> with an accent like this:  </p>\n\n<pre><code>enum tipo: [:fogo, :\u00e1gua]\n</code></pre>\n\n<p>The word <code>\u00e1gua</code> have an accent. When this enum is translated in the form, making it a <code>string</code>, by using <code>.humanize</code> i get <code>\u00c1gua</code> instead of <code>Agua</code> (Which is wrong in Portuguese).</p>\n\n<p>Any thoughts on this matter?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "nginx", "amazon-ec2", "passenger"], "comments": [{"owner": {"reputation": 3904, "user_id": 1598603, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/a58efb2416199d31f1ef808b607c2fcf?s=128&d=identicon&r=PG", "display_name": "CargoMeister", "link": "https://stackoverflow.com/users/1598603/cargomeister"}, "edited": false, "score": 0, "creation_date": 1443051604, "post_id": 32751059, "comment_id": 53342920, "body": "Whatever account is running nginx does not have permissions to run whatever is in that ruby directory. Normally I believe nginx runs as root. But check the permissions on that directory. Do you know that it&#39;s root running nginx?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user5349758"}, "reply_to_user": {"reputation": 3904, "user_id": 1598603, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/a58efb2416199d31f1ef808b607c2fcf?s=128&d=identicon&r=PG", "display_name": "CargoMeister", "link": "https://stackoverflow.com/users/1598603/cargomeister"}, "edited": false, "score": 0, "creation_date": 1443051973, "post_id": 32751059, "comment_id": 53343017, "body": "i think so, how i check this?"}, {"owner": {"reputation": 3904, "user_id": 1598603, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/a58efb2416199d31f1ef808b607c2fcf?s=128&d=identicon&r=PG", "display_name": "CargoMeister", "link": "https://stackoverflow.com/users/1598603/cargomeister"}, "edited": false, "score": 0, "creation_date": 1443052285, "post_id": 32751059, "comment_id": 53343091, "body": "I&#39;m not sure how to check who is running nginx. Permissions, go to the directory, and ls -l. This will show you who owns it, and whether it can be executed or not."}, {"owner": {"user_type": "does_not_exist", "display_name": "user5349758"}, "reply_to_user": {"reputation": 3904, "user_id": 1598603, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/a58efb2416199d31f1ef808b607c2fcf?s=128&d=identicon&r=PG", "display_name": "CargoMeister", "link": "https://stackoverflow.com/users/1598603/cargomeister"}, "edited": false, "score": 0, "creation_date": 1443053011, "post_id": 32751059, "comment_id": 53343288, "body": "here says root, both nginx and usr/ruby"}, {"owner": {"user_type": "does_not_exist", "display_name": "user5349758"}, "reply_to_user": {"reputation": 3904, "user_id": 1598603, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/a58efb2416199d31f1ef808b607c2fcf?s=128&d=identicon&r=PG", "display_name": "CargoMeister", "link": "https://stackoverflow.com/users/1598603/cargomeister"}, "edited": false, "score": 0, "creation_date": 1443053051, "post_id": 32751059, "comment_id": 53343295, "body": "may paste or add any permision on nginx conf?"}], "answers": [{"tags": [], "owner": {"reputation": 76, "user_id": 5372713, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XKlDe.jpg?s=128&g=1", "display_name": "MMeens", "link": "https://stackoverflow.com/users/5372713/mmeens"}, "is_accepted": false, "score": 1, "last_activity_date": 1443108131, "last_edit_date": 1443108131, "creation_date": 1443106900, "answer_id": 32764723, "question_id": 32751059, "link": "https://stackoverflow.com/questions/32751059/nginx-passenger-rails-permission-denied/32764723#32764723", "title": "Nginx passenger rails Permission denied", "body": "<p><code>passenger_ruby</code> should point to the ruby command itself. Yours appears to point to a directory <code>/usr/local/lib/ruby/</code> (based partly on the passenger_root path).</p>\n\n<p><a href=\"https://www.phusionpassenger.com/library/config/nginx/reference/#passenger_ruby\" rel=\"nofollow\">https://www.phusionpassenger.com/library/config/nginx/reference/#passenger_ruby</a></p>\n\n<p>Try changing <code>passenger_ruby</code> to <code>/usr/bin/ruby</code> , or whatever your path is. \"which ruby\" would give you the path, if it's in your <code>PATH</code> environment variable.</p>\n"}, {"tags": [], "owner": {"reputation": 2282, "user_id": 4552555, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec8335ae183681fdc8373e5f2dd682c1?s=128&d=identicon&r=PG&f=1", "display_name": "gilcierweb", "link": "https://stackoverflow.com/users/4552555/gilcierweb"}, "is_accepted": false, "score": 3, "last_activity_date": 1443585150, "creation_date": 1443585150, "answer_id": 32857480, "question_id": 32751059, "link": "https://stackoverflow.com/questions/32751059/nginx-passenger-rails-permission-denied/32857480#32857480", "title": "Nginx passenger rails Permission denied", "body": "<p>Execute in Terminal</p>\n\n<pre><code>sudo chmod o+x \"/root\"\n</code></pre>\n\n<p>Resolve this problem!</p>\n\n<p><strong>* ERROR *</strong>: Cannot execute /root/.rbenv/versions/2.2.3/bin/ruby Phusion Passenger  Permission denied (13) \nPhusion Passenger nginx  centos</p>\n\n<p><a href=\"http://oki2a24.com/2014/02/08/try-to-install-ruby-and-redmine/\" rel=\"nofollow\">http://oki2a24.com/2014/02/08/try-to-install-ruby-and-redmine/</a></p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user5349758"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4391, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1443585150, "creation_date": 1443050747, "question_id": 32751059, "link": "https://stackoverflow.com/questions/32751059/nginx-passenger-rails-permission-denied", "title": "Nginx passenger rails Permission denied", "body": "<p>On a EC2 with ubuntu 14.04 with nginx/passenger/rails came with this log on nginx:</p>\n\n<blockquote>\n  <p>App 31063 stderr: * ERROR *: Cannot execute /usr/local/lib/ruby:\n  Permission denied (13)</p>\n  \n  <p>App 31065 stderr: /etc/profile.d/rbenv.sh: line 3: rbenv: command not\n  found nginx conf is:</p>\n</blockquote>\n\n<pre><code>worker_processes  1;\nerror_log  logs/error.log;\nevents {\n    worker_connections  1024;\n}\n\nhttp {\n    passenger_root /usr/local/lib/ruby/gems/2.2.0/gems/passenger-5.0.18;\n    passenger_ruby /usr/local/lib/ruby;\n\n    include       mime.types;\n    default_type  application/octet-stream;\n    sendfile        on;\n    keepalive_timeout  65;\n\n    server {\n       listen 80;\n        server_name teste.com;\n        root /home/ubuntu/teste/current/public;\n        passenger_enabled on;\n        rails_env production;\n        access_log  logs/access.log;\n\n\n        location ~ ^/(assets)/  {\n          gzip_static on;\n          expires max;\n          add_header Cache-Control public;\n        }\n\n\n       error_page 500 502 503 504 /500.html;\n       client_max_body_size 4G;\n       keepalive_timeout 10;\n\n            }\n\n\n}\n</code></pre>\n\n<p>someone cloud give some light? thank's</p>\n"}, {"tags": ["arrays", "ruby", "zip"], "comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1443050904, "post_id": 32750978, "comment_id": 53342754, "body": "<code>ac=a.count,bc=b.count</code> should be turned into a part of the method body."}], "answers": [{"tags": [], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "is_accepted": false, "score": 2, "last_activity_date": 1443050374, "creation_date": 1443050374, "answer_id": 32751019, "question_id": 32750978, "link": "https://stackoverflow.com/questions/32750978/zipping-uneven-arrays-in-ruby/32751019#32751019", "title": "Zipping uneven arrays in ruby", "body": "<p>What about this?</p>\n\n<pre><code>a.reverse.zip(b.reverse).reverse.map(&amp;:reverse)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 11718, "user_id": 1827631, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/I24JN.png?s=128&g=1", "display_name": "hirolau", "link": "https://stackoverflow.com/users/1827631/hirolau"}, "edited": false, "score": 0, "creation_date": 1443092581, "post_id": 32751262, "comment_id": 53358425, "body": "I like this one, but must say this is a time where one line would be a bit too confusing. Hard to understand what is happening imo. I ouwld split it in two. <code>extra_elements = [nil]*(a.size-b.size); (extra_elements+b).zip(a)</code>"}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": true, "score": 3, "last_activity_date": 1443070028, "last_edit_date": 1443070028, "creation_date": 1443052268, "answer_id": 32751262, "question_id": 32750978, "link": "https://stackoverflow.com/questions/32750978/zipping-uneven-arrays-in-ruby/32751262#32751262", "title": "Zipping uneven arrays in ruby", "body": "<p>Assuming <code>a.size &gt;= b.size</code>:</p>\n\n<pre><code>([nil]*(a.size-b.size)).concat(b).zip(a)\n  #=&gt; [[nil, 1], [nil, 2], [nil, 3], [\"d\", 4], [\"e\", 5],\n  #    [\"f\", 6], [\"g\", 7], [\"h\", 8], [\"i\", 9], [\"j\", 10]] \n</code></pre>\n\n<p>or</p>\n\n<pre><code>[([nil]*(a.size-b.size)).concat(b), a].transpose\n</code></pre>\n\n<p>The methods <a href=\"http://ruby-doc.org/core-2.2.0/Enumerable.html#method-i-zip\" rel=\"nofollow\">Enumerable#zip</a> and <a href=\"http://ruby-doc.org/core-2.2.0/Array.html#method-i-transpose\" rel=\"nofollow\">Array#transpose</a> are <em><a href=\"https://en.wikipedia.org/wiki/Yin_and_yang\" rel=\"nofollow\">yin and yang</a></em> when the two arrays are the same size. </p>\n"}, {"tags": [], "owner": {"reputation": 11718, "user_id": 1827631, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/I24JN.png?s=128&g=1", "display_name": "hirolau", "link": "https://stackoverflow.com/users/1827631/hirolau"}, "is_accepted": false, "score": 0, "last_activity_date": 1443092742, "creation_date": 1443092742, "answer_id": 32759751, "question_id": 32750978, "link": "https://stackoverflow.com/questions/32750978/zipping-uneven-arrays-in-ruby/32759751#32759751", "title": "Zipping uneven arrays in ruby", "body": "<p>Although very close to Cary's solution. I find this more readable.</p>\n\n<pre><code>missing_elements = Array.new(a.size-b.size)\np (missing_elements+b).zip(a) \n</code></pre>\n"}], "owner": {"reputation": 193, "user_id": 3100282, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/QSsxN.gif?s=128&g=1", "display_name": "Xavier", "link": "https://stackoverflow.com/users/3100282/xavier"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 374, "favorite_count": 0, "accepted_answer_id": 32751262, "answer_count": 3, "score": 2, "last_activity_date": 1443092742, "creation_date": 1443050095, "last_edit_date": 1443050686, "question_id": 32750978, "link": "https://stackoverflow.com/questions/32750978/zipping-uneven-arrays-in-ruby", "title": "Zipping uneven arrays in ruby", "body": "<p>I have two uneven arrays:</p>\n\n<pre><code>a = [1,2,3,4,5,6,7,8,9,10]\nb = ['d','e','f','g','h','i','j']\n</code></pre>\n\n<p>I'd like to bind them so that the object returned looks like this:</p>\n\n<pre><code>result = [[nil, 1], [nil, 2], [nil, 3], [\"d\", 4], [\"e\", 5], [\"f\", 6], [\"g\", 7],\n[\"h\", 8], [\"i\", 9], [\"j\", 10]] \n</code></pre>\n\n<p>The <code>zip</code> method would not work, as it does the opposite by lining up elements to the front. So far I have:</p>\n\n<pre><code>def bind(a,b,ac=a.count,bc=b.count)\n  distance = ac - bc &lt; 0 ? bc - ac : ac - bc\n  min = ac &gt; bc ? b : a\n  max = ac &gt; bc ? a : b \n  distance.times { min.unshift(nil) }\n  return min.zip(max)\nend\n</code></pre>\n\n<p>Does ruby have a method to resolve this (or a quicker way to go about it)?</p>\n"}, {"tags": ["ruby"], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 5369769, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/35975292266039ec215f9fed54851445?s=128&d=identicon&r=PG&f=1", "display_name": "skeezy_D", "link": "https://stackoverflow.com/users/5369769/skeezy-d"}, "edited": false, "score": 0, "creation_date": 1443569968, "post_id": 32751430, "comment_id": 53544549, "body": "aha, so it is finding the first instance of &#39;x&#39; instead of using the current instance, that makes sense. You are a gentleman sir.(not to be sexist)"}], "tags": [], "owner": {"reputation": 1463, "user_id": 3703503, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/1ca51bdb8bc5906975c4133f0bf4873c?s=128&d=identicon&r=PG&f=1", "display_name": "SlySherZ", "link": "https://stackoverflow.com/users/3703503/slysherz"}, "is_accepted": false, "score": 0, "last_activity_date": 1443053677, "creation_date": 1443053677, "answer_id": 32751430, "question_id": 32750769, "link": "https://stackoverflow.com/questions/32750769/strange-behavior-from-ruby-caesar-cipher-implementation/32751430#32751430", "title": "strange behavior from ruby caesar cipher implementation", "body": "<p>This is wrong as soon as a letter repeats itself:</p>\n\n<pre><code>temp[temp.index(x)]=...\n</code></pre>\n\n<p>Use each_with_index instead!</p>\n"}], "owner": {"reputation": 1, "user_id": 5369769, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/35975292266039ec215f9fed54851445?s=128&d=identicon&r=PG&f=1", "display_name": "skeezy_D", "link": "https://stackoverflow.com/users/5369769/skeezy-d"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 19, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1443053677, "creation_date": 1443048837, "question_id": 32750769, "link": "https://stackoverflow.com/questions/32750769/strange-behavior-from-ruby-caesar-cipher-implementation", "title": "strange behavior from ruby caesar cipher implementation", "body": "<p>I am getting unpredictable response from this code, if the phrase used has only one word the output is as predicted, also if the shift is 0 it pushes things straight through. But when there are spaces in the phrase the shifting seems unpredictable. If someone can see the pattern, or enlighten me on what the methods are doing behind the scenes.(using the new1 array as the receiver yeilded an unaltered array)</p>\n\n<pre><code>def caesar (phrase, shift)\n    alpha=('a'..'z').to_a\n    #new1=[]\n    temp=phrase.downcase.split('') \n    temp.each{|x| (temp[temp.index(x)]=alpha[(alpha.index(x)+shift)%26]) if alpha.include?(x)}\n\n    p temp.join\n\nend\n\n\ncaesar(\"abcde fghijklmnopqrs tu,,..vwxyz\", 1)   \ncaesar(\"Frank\", 1)  \ncaesar(\"Frank is a willy munching wombat.\", 1)\n</code></pre>\n\n<p>results:</p>\n\n<p>\"abcde fghijklmnopqrs tu,,..vwxyz\"</p>\n\n<p>\"gsbol\"</p>\n\n<p>\"hucpo js b xjnlz mvodjing xombbt.\"</p>\n\n<p>Apologies if this is answered elsewhere, to be honest I didn't even know what to ask.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 396, "user_id": 904768, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/a2727c8e3ae362fcb5bf3ae5317c68a4?s=128&d=identicon&r=PG", "display_name": "Veg", "link": "https://stackoverflow.com/users/904768/veg"}, "edited": false, "score": 0, "creation_date": 1443057338, "post_id": 32751526, "comment_id": 53344237, "body": "awesome! do you know how i can call it conditionally when my link is clicked?"}, {"owner": {"reputation": 1833, "user_id": 4561925, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/NqlRJ.png?s=128&g=1", "display_name": "HolyMoly", "link": "https://stackoverflow.com/users/4561925/holymoly"}, "reply_to_user": {"reputation": 396, "user_id": 904768, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/a2727c8e3ae362fcb5bf3ae5317c68a4?s=128&d=identicon&r=PG", "display_name": "Veg", "link": "https://stackoverflow.com/users/904768/veg"}, "edited": false, "score": 0, "creation_date": 1443058515, "post_id": 32751526, "comment_id": 53344478, "body": "one thought is make it a button_to which hits that action in the controller, and then from there maybe redirect. it seems based your current code that you want to direct the user somewhere anyways when they hit the yes/no link? here is some info on button_to:  <a href=\"http://apidock.com/rails/ActionView/Helpers/UrlHelper/button_to\" rel=\"nofollow noreferrer\">apidock.com/rails/ActionView/Helpers/UrlHelper/button_to</a>"}, {"owner": {"reputation": 1833, "user_id": 4561925, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/NqlRJ.png?s=128&g=1", "display_name": "HolyMoly", "link": "https://stackoverflow.com/users/4561925/holymoly"}, "reply_to_user": {"reputation": 396, "user_id": 904768, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/a2727c8e3ae362fcb5bf3ae5317c68a4?s=128&d=identicon&r=PG", "display_name": "Veg", "link": "https://stackoverflow.com/users/904768/veg"}, "edited": false, "score": 0, "creation_date": 1443058706, "post_id": 32751526, "comment_id": 53344527, "body": "you can also try to use jquery or something to put an event listener on the elements when they are clicked. which at that point, you could use the helper. i am not sure if it will work since it is a ruby helper, but i am thinking it might since it is now available on the front end in a view. i&#39;m still learning myself ;)"}, {"owner": {"reputation": 31319, "user_id": 981183, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/88dd7155ef7c0e5f43ab8d1a9efdecab?s=128&d=identicon&r=PG&f=1", "display_name": "K M Rakibul Islam", "link": "https://stackoverflow.com/users/981183/k-m-rakibul-islam"}, "edited": false, "score": 1, "creation_date": 1443244720, "post_id": 32751526, "comment_id": 53426231, "body": "Keep learning :) Just one small thing, in Ruby, we usually define method in this way: <code>some_method</code> rather <code>someMethod</code> :) Checkout this Ruby Style Guide: <a href=\"https://github.com/bbatsov/ruby-style-guide\" rel=\"nofollow noreferrer\">github.com/bbatsov/ruby-style-guide</a> for more style related best practices. And yes, I am learning too. I guess everybody is learning :)"}], "tags": [], "owner": {"reputation": 1833, "user_id": 4561925, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/NqlRJ.png?s=128&g=1", "display_name": "HolyMoly", "link": "https://stackoverflow.com/users/4561925/holymoly"}, "is_accepted": true, "score": 2, "last_activity_date": 1443054478, "last_edit_date": 1495541199, "creation_date": 1443054478, "answer_id": 32751526, "question_id": 32750721, "link": "https://stackoverflow.com/questions/32750721/how-can-i-update-the-value-of-my-rails-model-from-the-show-page/32751526#32751526", "title": "How can i update the value of my rails model from the show page?", "body": "<p>You could make flipGender a helper method which should make it accessible from the view:</p>\n\n<pre><code>def flip_gender(p)\n    p = Person.find(params[:id]) \n    person.gender = !p.flip_gender\n    p.save\nend\n\nhelper_method: flipGender\n</code></pre>\n\n<p>and then in your view: </p>\n\n<pre><code>&lt;% flipGender(p) %&gt;\n</code></pre>\n\n<p>or something like that. You could also create a file for helper methods, and then include it in the ApplicationController so those methods will be available check out <a href=\"https://stackoverflow.com/questions/3992659/in-rails-what-exactly-do-helper-and-helper-method-do\">this thread</a></p>\n"}], "owner": {"reputation": 396, "user_id": 904768, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/a2727c8e3ae362fcb5bf3ae5317c68a4?s=128&d=identicon&r=PG", "display_name": "Veg", "link": "https://stackoverflow.com/users/904768/veg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 398, "favorite_count": 0, "accepted_answer_id": 32751526, "answer_count": 1, "score": 1, "last_activity_date": 1443054478, "creation_date": 1443048474, "question_id": 32750721, "link": "https://stackoverflow.com/questions/32750721/how-can-i-update-the-value-of-my-rails-model-from-the-show-page", "title": "How can i update the value of my rails model from the show page?", "body": "<p>In my rails app I'm making a guess at the user's gender based on some information that the user enters on the 'new' form. After that the user is taken to the show page, where I reveal the guess. I want the user to tell me if I was right or wrong so i can improve the data. I want to have 'yes' and 'no' buttons where \n'no' updates the user's record in the db with the other gender. </p>\n\n<p>Here's my show view</p>\n\n<pre><code>    &lt;div class='container'&gt;\n    &lt;header&gt;We think you're.....&lt;/header&gt;\n    &lt;div class='cmn-t-shake'&gt;\n        &lt;%= @person.male ? \"Male\" : \"Female\"%&gt;\n    &lt;/div&gt;\n    &lt;div&gt;\n        Were we right? &lt;br/&gt;\n        &lt;%= link_to 'Yes', '/people'%&gt;\n         | \n        &lt;%= link_to 'No', 'people/flip_gender(@person)'%&gt;\n    &lt;/div&gt;\n    &lt;div&gt;\n        &lt;%= link_to 'Learn more', '/people'%&gt;\n    &lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>and a snippet of my controller</p>\n\n<pre><code>class PeopleController &lt; ApplicationController\ndef index\n    @men = Person.where(\"male = ?\", true)\n    @women = Person.where(\"male = ?\", false)    \nend\n\ndef new\n    @person = Person.new\nend\n\ndef show \n    @person = Person.find(params[:id]) \nend\n\ndef create\n    @person = Person.new(person_params)\n    @person.male = guessGender(@person)\n    if @person.save\n        path = '/people/' + @person.id.to_s\n        redirect_to path\n    else\n        render 'new'\n    end\nend\n\ndef person_params\n    params.require(:person).permit(:male, :height_in_inches, :weight_in_lbs)\nend\n\ndef flip_gender(p)\n    p = Person.find(params[:id]) \n    person.gender = !p.flip_gender\n    p.save\nend\n</code></pre>\n\n<p>and my routes.rb</p>\n\n<pre><code>  root 'people#new'\n\n  get 'people' =&gt; 'people#index'\n  get 'people/new' =&gt; 'people#new'\n  post 'people' =&gt; 'people#create'\n  get 'people/:id' =&gt; 'people#show'\n</code></pre>\n\n<p><strong>How can I user flipGender to update and save the current record on the show page at the click of a button/link?</strong></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "magento", "bigcommerce"], "answers": [{"comments": [{"owner": {"reputation": 169, "user_id": 3838700, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/e2bccd4ce7461ee8420f44e513721550?s=128&d=identicon&r=PG&f=1", "display_name": "LanterneRouge", "link": "https://stackoverflow.com/users/3838700/lanternerouge"}, "edited": false, "score": 0, "creation_date": 1443046924, "post_id": 32749892, "comment_id": 53341484, "body": "can you explain &#39;This returns a Product object with id == @product.id? For example, how would I return a product where sku = &#39;100011&#39;?"}, {"owner": {"reputation": 48635, "user_id": 6742, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/xPawo.png?s=128&g=1", "display_name": "David Aldridge", "link": "https://stackoverflow.com/users/6742/david-aldridge"}, "edited": false, "score": 0, "creation_date": 1443047571, "post_id": 32749892, "comment_id": 53341701, "body": "Bigcommerce::Product.find_by(sku: &#39;100011&#39;)"}, {"owner": {"reputation": 169, "user_id": 3838700, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/e2bccd4ce7461ee8420f44e513721550?s=128&d=identicon&r=PG&f=1", "display_name": "LanterneRouge", "link": "https://stackoverflow.com/users/3838700/lanternerouge"}, "edited": false, "score": 0, "creation_date": 1443048362, "post_id": 32749892, "comment_id": 53341980, "body": "David, here is what I get when I try that: undefined method `find_by&#39; for Bigcommerce::Product:Class (NoMethodError)"}, {"owner": {"reputation": 1868, "user_id": 1362453, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/f8ac2cc7e4e38841fb52ea58b4bf06ef?s=128&d=identicon&r=PG", "display_name": "Leo Brito", "link": "https://stackoverflow.com/users/1362453/leo-brito"}, "reply_to_user": {"reputation": 169, "user_id": 3838700, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/e2bccd4ce7461ee8420f44e513721550?s=128&d=identicon&r=PG&f=1", "display_name": "LanterneRouge", "link": "https://stackoverflow.com/users/3838700/lanternerouge"}, "edited": false, "score": 0, "creation_date": 1443048863, "post_id": 32749892, "comment_id": 53342129, "body": "@LanterneRouge David very reasonably assumed that <code>Product</code> extended ActiveRecord, which has a method called <a href=\"http://apidock.com/rails/v4.0.2/ActiveRecord/FinderMethods/find_by\" rel=\"nofollow noreferrer\">find_by</a>. However, this is not the case, thus <code>Product</code> has no <code>find_by</code> method, resulting in the error you posted."}, {"owner": {"reputation": 1868, "user_id": 1362453, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/f8ac2cc7e4e38841fb52ea58b4bf06ef?s=128&d=identicon&r=PG", "display_name": "Leo Brito", "link": "https://stackoverflow.com/users/1362453/leo-brito"}, "reply_to_user": {"reputation": 169, "user_id": 3838700, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/e2bccd4ce7461ee8420f44e513721550?s=128&d=identicon&r=PG&f=1", "display_name": "LanterneRouge", "link": "https://stackoverflow.com/users/3838700/lanternerouge"}, "edited": false, "score": 0, "creation_date": 1443049170, "post_id": 32749892, "comment_id": 53342222, "body": "@LanterneRouge I edited my answer to address your question about searching a Product by SKU. Tldr: they are two different resources."}, {"owner": {"reputation": 169, "user_id": 3838700, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/e2bccd4ce7461ee8420f44e513721550?s=128&d=identicon&r=PG&f=1", "display_name": "LanterneRouge", "link": "https://stackoverflow.com/users/3838700/lanternerouge"}, "edited": false, "score": 0, "creation_date": 1443069792, "post_id": 32749892, "comment_id": 53347093, "body": "@brito thank you! can you give a specific code example of how I find a specific sku and return the product? I am a visual learner."}, {"owner": {"reputation": 169, "user_id": 3838700, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/e2bccd4ce7461ee8420f44e513721550?s=128&d=identicon&r=PG&f=1", "display_name": "LanterneRouge", "link": "https://stackoverflow.com/users/3838700/lanternerouge"}, "edited": false, "score": 0, "creation_date": 1443106313, "post_id": 32749892, "comment_id": 53368072, "body": "@brito what exactly do I put for &#39;@product.id&#39; and &#39;@sku.id&#39;?"}], "tags": [], "owner": {"reputation": 1868, "user_id": 1362453, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/f8ac2cc7e4e38841fb52ea58b4bf06ef?s=128&d=identicon&r=PG", "display_name": "Leo Brito", "link": "https://stackoverflow.com/users/1362453/leo-brito"}, "is_accepted": false, "score": 1, "last_activity_date": 1443049082, "last_edit_date": 1443049082, "creation_date": 1443044009, "answer_id": 32749892, "question_id": 32749837, "link": "https://stackoverflow.com/questions/32749837/bigcommerce-ruby/32749892#32749892", "title": "Bigcommerce Ruby", "body": "<blockquote>\n  <p>I understand the #list products, but it appears that #get a product is\n  just pulling the first item in the array @products and displaying it?</p>\n</blockquote>\n\n<p>Yes. It seems like just an example.</p>\n\n<blockquote>\n  <p>I don't understand this: Bigcommerce::Product.find(@product.id)</p>\n</blockquote>\n\n<p>This returns a <code>Product</code> object with <code>id == @product.id</code>.</p>\n\n<blockquote>\n  <p>Also, is @products a hash or an array?</p>\n</blockquote>\n\n<p>It is an array. See the <a href=\"http://apidock.com/rails/ActiveRecord/Base/all/class\" rel=\"nofollow\">documentation</a> for ActiveRecord's all method.</p>\n\n<p><strong>EDIT</strong> In this API, <a href=\"https://github.com/bigcommerce/bigcommerce-api-ruby/blob/master/lib/bigcommerce/resources/products/sku.rb\" rel=\"nofollow\">SKU</a> and Product are different resources (see product-related resources <a href=\"https://github.com/bigcommerce/bigcommerce-api-ruby/tree/master/lib/bigcommerce/resources/products\" rel=\"nofollow\">here</a>). To search by SKU, you should do this:</p>\n\n<pre><code># Get a product sku\nputs Bigcommerce::Sku.find(@product.id, @sku.id)\n</code></pre>\n\n<p>See the <a href=\"https://github.com/bigcommerce/bigcommerce-api-ruby/blob/master/examples/products/sku.rb\" rel=\"nofollow\">example</a>. SKUs contain a reference to their Product, so you can search by SKU and then get the Product you want. </p>\n\n<p><strong>EDIT 2</strong> Bear in mind that <a href=\"https://github.com/bigcommerce/bigcommerce-api-ruby/blob/master/lib/bigcommerce/resources/resource.rb\" rel=\"nofollow\">Resources</a> in this API are subclasses of <a href=\"https://github.com/intridea/hashie\" rel=\"nofollow\">Hashie::Trash</a>, <em>not ActiveRecord</em> which would be more usual, so we can't rely on things like find_by.</p>\n"}, {"tags": [], "owner": {"reputation": 48635, "user_id": 6742, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/xPawo.png?s=128&g=1", "display_name": "David Aldridge", "link": "https://stackoverflow.com/users/6742/david-aldridge"}, "is_accepted": false, "score": 1, "last_activity_date": 1443044040, "creation_date": 1443044040, "answer_id": 32749903, "question_id": 32749837, "link": "https://stackoverflow.com/questions/32749837/bigcommerce-ruby/32749903#32749903", "title": "Bigcommerce Ruby", "body": "<p>@products looks like it should be a collection of instances of Bigcommerce::Product. Based on that, @product = @products[0] assigns to @product the first of the collection.</p>\n\n<p>I do not understand:</p>\n\n<pre><code>puts Bigcommerce::Product.find(@product.id)\n</code></pre>\n\n<p>I would think that this would suffice:</p>\n\n<pre><code>puts @product\n</code></pre>\n"}], "owner": {"reputation": 169, "user_id": 3838700, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/e2bccd4ce7461ee8420f44e513721550?s=128&d=identicon&r=PG&f=1", "display_name": "LanterneRouge", "link": "https://stackoverflow.com/users/3838700/lanternerouge"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 191, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1443049082, "creation_date": 1443043806, "question_id": 32749837, "link": "https://stackoverflow.com/questions/32749837/bigcommerce-ruby", "title": "Bigcommerce Ruby", "body": "<p>I am referencing this: <a href=\"https://github.com/bigcommerce/bigcommerce-api-ruby/blob/master/examples/products/product.rb\" rel=\"nofollow\">https://github.com/bigcommerce/bigcommerce-api-ruby/blob/master/examples/products/product.rb</a></p>\n\n<p>Here is the code:</p>\n\n<pre><code># List products\n@products = Bigcommerce::Product.all\nputs @products\n\n# Get a product\n@product = @products[0]\nputs Bigcommerce::Product.find(@product.id)\n</code></pre>\n\n<p>I understand the #list products, but it appears that #get a product is just pulling the first item in the array @products and displaying it?</p>\n\n<p>I don't understand this: <code>Bigcommerce::Product.find(@product.id)</code></p>\n\n<p>End goal is to search @products for a specific property value. Like where SKU = some SKU or title = some time or price = some price, etc.</p>\n\n<p>Also, is @products a hash or an array?</p>\n\n<p>So confused. :(</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3", "rails-routing"], "answers": [{"tags": [], "owner": {"reputation": 575, "user_id": 2855747, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ef29652da2fde5184c329af0e72ccea?s=128&d=identicon&r=PG", "display_name": "Colto", "link": "https://stackoverflow.com/users/2855747/colto"}, "is_accepted": false, "score": 0, "last_activity_date": 1443043751, "creation_date": 1443043751, "answer_id": 32749818, "question_id": 32749744, "link": "https://stackoverflow.com/questions/32749744/ruby-on-rails-custom-rails-resource-routing-error-pages/32749818#32749818", "title": "Ruby on Rails Custom Rails Resource Routing Error Pages", "body": "<p>You want to use a catch-all in your <code>routes.rb</code>: </p>\n\n<pre><code>match 'locations/*other', to: 'locations#wrong-location'\n</code></pre>\n\n<p>or in Rails 4</p>\n\n<pre><code>match 'locations/*other', to: 'locations#wrong-location`, via: :all\n</code></pre>\n\n<p>And then just set up the controller and view.</p>\n"}], "owner": {"reputation": 1, "user_id": 5369616, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/821f52db0f5ea1ea81507830d806e5f5?s=128&d=identicon&r=PG&f=1", "display_name": "White-Orchid", "link": "https://stackoverflow.com/users/5369616/white-orchid"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 58, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1443043751, "creation_date": 1443043442, "question_id": 32749744, "link": "https://stackoverflow.com/questions/32749744/ruby-on-rails-custom-rails-resource-routing-error-pages", "title": "Ruby on Rails Custom Rails Resource Routing Error Pages", "body": "<p>I would like to route all broken site links for a rails resource to a particular custom error page and all other broken links to another custom error page.\nFor example:</p>\n\n<p>/locations/wrong-location - Invalid location error page</p>\n\n<p>/products/wrong-product - Invalid product error page</p>\n\n<p>Does anyone know how to do this in Rails 3.2?</p>\n"}, {"tags": ["mysql", "ruby", "cucumber"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1443042870, "post_id": 32749087, "comment_id": 53339843, "body": "You probably want to use <a href=\"http://guides.rubyonrails.org/active_record_querying.html\" rel=\"nofollow noreferrer\">ActiveRecord</a> or <a href=\"http://sequel.jeremyevans.net/\" rel=\"nofollow noreferrer\">Sequel</a> to connect to your database. Using the low-level driver is extremely messy."}, {"owner": {"reputation": 219, "user_id": 3630922, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aa806219082d60de4bcc7bb1be8c5dac?s=128&d=identicon&r=PG", "display_name": "hamitron", "link": "https://stackoverflow.com/users/3630922/hamitron"}, "edited": false, "score": 0, "creation_date": 1443044638, "post_id": 32749087, "comment_id": 53340627, "body": "also try loading these gems via <a href=\"http://bundler.io/\" rel=\"nofollow noreferrer\">bundler</a> and not relying on system installs (such as &#39;gem install mysql&#39;)."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 1, "creation_date": 1443045232, "post_id": 32749087, "comment_id": 53340873, "body": "This seems awful close to a duplicate of <a href=\"http://stackoverflow.com/q/5411551/128421\">stackoverflow.com/q/5411551/128421</a>"}, {"owner": {"reputation": 20735, "user_id": 307106, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/6a13e655e637138f8d571cec3f9cea76?s=128&d=identicon&r=PG", "display_name": "jrochkind", "link": "https://stackoverflow.com/users/307106/jrochkind"}, "edited": false, "score": 0, "creation_date": 1443060921, "post_id": 32749087, "comment_id": 53345048, "body": "The short answer to what you actually asked in the title is: you should use mysql2.  But normally you&#39;d use Sequel or ActiveRecord as higher level abstractions, with mysql2.  And that doesn&#39;t answer your installation problems, which you might have with mysql2 as well.  Ruby on Windows is painful."}], "owner": {"reputation": 111, "user_id": 3249517, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c142e6d5b7f523d907fcbacb96399d80?s=128&d=identicon&r=PG&f=1", "display_name": "user3249517", "link": "https://stackoverflow.com/users/3249517/user3249517"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 189, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1443045205, "creation_date": 1443040876, "last_edit_date": 1443045205, "question_id": 32749087, "link": "https://stackoverflow.com/questions/32749087/should-i-use-the-mysql-or-mysql2-gem", "title": "Should I use the mysql or mysql2 gem?", "body": "<p>I need to connect to a MySQL database.  I've found a gem called \"mysql\" and one called \"mysql2\". I tried installing and using both gems and got a message like this:</p>\n\n<pre><code>cannot load such file -- mysql (LoadError)\nC:/Automation/ta-rb5-portal-cuke/features/step_definitions/common_steps.rb:2:in\n`require'\nC:/Automation/ta-rb5-portal-cuke/features/step_definitions/common_steps.rb:2:in\n`&lt;top (required)&gt;\n</code></pre>\n\n<p>Which gem should I use and what am I doing wrong?</p>\n\n<p>I'm using Ruby 2.1.7.  </p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 679, "user_id": 1580021, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/95c100dda8b56b01970a751c1af1a317?s=128&d=identicon&r=PG", "display_name": "Romuloux", "link": "https://stackoverflow.com/users/1580021/romuloux"}, "edited": false, "score": 0, "creation_date": 1443041666, "post_id": 32748981, "comment_id": 53339242, "body": "Warden is a dependency of Devise. That is where it is coming from."}, {"owner": {"reputation": 679, "user_id": 1580021, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/95c100dda8b56b01970a751c1af1a317?s=128&d=identicon&r=PG", "display_name": "Romuloux", "link": "https://stackoverflow.com/users/1580021/romuloux"}, "edited": false, "score": 0, "creation_date": 1443041744, "post_id": 32748981, "comment_id": 53339281, "body": "Can you add/is Warden in your Gemfile.lock?"}, {"owner": {"reputation": 187, "user_id": 2873003, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/84b69ecee45187f713baf51552b75cd5?s=128&d=identicon&r=PG&f=1", "display_name": "user2873003", "link": "https://stackoverflow.com/users/2873003/user2873003"}, "reply_to_user": {"reputation": 679, "user_id": 1580021, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/95c100dda8b56b01970a751c1af1a317?s=128&d=identicon&r=PG", "display_name": "Romuloux", "link": "https://stackoverflow.com/users/1580021/romuloux"}, "edited": false, "score": 0, "creation_date": 1443042214, "post_id": 32748981, "comment_id": 53339514, "body": "Yes, I found Warden in the Gemfile.lock. Warden 1.2.3."}, {"owner": {"reputation": 575, "user_id": 2855747, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ef29652da2fde5184c329af0e72ccea?s=128&d=identicon&r=PG", "display_name": "Colto", "link": "https://stackoverflow.com/users/2855747/colto"}, "edited": false, "score": 3, "creation_date": 1443043120, "post_id": 32748981, "comment_id": 53339964, "body": "Is Devise in your Gemfile? I would try adding <code>require &#39;devise&#39;</code> to your application.rb"}, {"owner": {"reputation": 219, "user_id": 3630922, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aa806219082d60de4bcc7bb1be8c5dac?s=128&d=identicon&r=PG", "display_name": "hamitron", "link": "https://stackoverflow.com/users/3630922/hamitron"}, "edited": false, "score": 0, "creation_date": 1443044138, "post_id": 32748981, "comment_id": 53340437, "body": "please include the trace that ruby put out for the error (basically all of the long list of files and messages that go along with an error), this problem may lie outside of the gemfile."}], "owner": {"reputation": 187, "user_id": 2873003, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/84b69ecee45187f713baf51552b75cd5?s=128&d=identicon&r=PG&f=1", "display_name": "user2873003", "link": "https://stackoverflow.com/users/2873003/user2873003"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1127, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1443046151, "creation_date": 1443040554, "last_edit_date": 1443046151, "question_id": 32748981, "link": "https://stackoverflow.com/questions/32748981/rake-aborted-nameerror-uninitialized-constant-warden-rails-3-2-22-ruby-2-1-1", "title": "rake aborted! NameError: uninitialized constant Warden. Rails 3.2.22 Ruby 2.1.1", "body": "<p>I am following this tutorial:</p>\n\n<p><a href=\"http://lucatironi.net/tutorial/2012/10/15/ruby_rails_android_app_authentication_devise_tutorial_part_one/\" rel=\"nofollow\">http://lucatironi.net/tutorial/2012/10/15/ruby_rails_android_app_authentication_devise_tutorial_part_one/</a></p>\n\n<p>Using ruby 2.1.1 and Rails 3.2.22. </p>\n\n<p>I am getting the following error message:</p>\n\n<pre><code>    rake aborted!\n    NameError: uninitialized constant Warden\n</code></pre>\n\n<p>My Gemfile is:</p>\n\n<pre><code>    source 'https://rubygems.org'\n\n     gem 'rails', '3.2.22'\n\n             # Bundle edge Rails instead:\n     # gem 'rails', :git =&gt; 'git://github.com/rails/rails.git'\n\n     gem 'devise-token_authenticatable'\n\n     gem 'sqlite3'\n\n     gem 'warden'\n     #gem 'mysql'\n     #gem 'mysql2'\n\n     gem 'devise'\n\n     gem 'therubyracer'\n     gem 'execjs'\n\n             # Gems used only for assets and not required\n             # in production environments by default.\n             group :assets do\n       gem 'sass-rails',   '~&gt; 3.2.3'\n       gem 'coffee-rails', '~&gt; 3.2.1'\n\n       # See https://github.com/sstephenson/execjs#readme for more    supported runtimes\n       # gem 'therubyracer', :platforms =&gt; :ruby\n\n       gem 'uglifier', '&gt;= 1.0.3'\n     end\n\n      gem 'jquery-rails'\n\n      # To use ActiveModel has_secure_password\n      # gem 'bcrypt-ruby', '~&gt; 3.0.0'\n\n      # To use Jbuilder templates for JSON\n      # gem 'jbuilder'\n\n      # Use unicorn as the app server\n      # gem 'unicorn'\n\n      # Deploy with Capistrano\n      # gem 'capistrano'\n\n      # To use debugger\n      # gem 'debugger'\n</code></pre>\n\n<p>Trace log:</p>\n\n<pre><code>     pc@acer:~/rubycode/layer_app$ rake db:create db:migrate --trace\n     ** Invoke db:create (first_time)\n     ** Invoke db:load_config (first_time)\n     ** Execute db:load_config\n     ** Invoke rails_env (first_time)\n     ** Execute rails_env\n     ** Execute db:create\n     db/development.sqlite3 already exists\n     db/test.sqlite3 already exists\n     ** Invoke db:migrate (first_time)\n     ** Invoke environment (first_time)\n     ** Execute environment\n     rake aborted!\n     NoMethodError: undefined method `token_authentication_key=' for         \n    Devise:Module/home/pc/rubycode/layer_app/config/initializers/devise.rb:14:in `block in &lt;top (required)&gt;'\n     /home/pc/.rvm/gems/ruby-2.2.1/gems/devise-3.5.2/lib/devise.rb:278:in `setup'\n     /home/pc/rubycode/layer_app/config/initializers/devise.rb:3:in `&lt;top (required)&gt;'\n    /home/pc/.rvm/gems/ruby-2.2.1/gems/activesupport-3.2.22/lib/active_support/dependencies.rb:245:in `load'\n    /home/pc/.rvm/gems/ruby-2.2.1/gems/activesupport-3.2.22/lib/active_support/dependencies.rb:245:in `block in load'\n    /home/pc/.rvm/gems/ruby-2.2.1/gems/activesupport-3.2.22/lib/active_support/dependencies.rb:236:in `load_dependency'\n    /home/pc/.rvm/gems/ruby-2.2.1/gems/activesupport-3.2.22/lib/active_support/dependencies.rb:245:in `load'\n    /home/pc/.rvm/gems/ruby-2.2.1/gems/railties-3.2.22/lib/rails/engine.rb:593:in `block (2 levels) in &lt;class:Engine&gt;'\n    /home/pc/.rvm/gems/ruby-2.2.1/gems/railties-3.2.22/lib/rails/engine.rb:592:in `each'\n    /home/pc/.rvm/gems/ruby-2.2.1/gems/railties-3.2.22/lib/rails/engine.rb:592:in `block in &lt;class:Engine&gt;'\n    /home/pc/.rvm/gems/ruby-2.2.1/gems/railties-3.2.22/lib/rails/initializable.rb:30:in `instance_exec'\n    /home/pc/.rvm/gems/ruby-2.2.1/gems/railties-3.2.22/lib/rails/initializable.rb:30:in `run'\n    /home/pc/.rvm/gems/ruby-2.2.1/gems/railties-3.2.22/lib/rails/initializable.rb:55:in `block in run_initializers'\n    /home/pc/.rvm/gems/ruby-2.2.1/gems/railties-3.2.22/lib/rails/initializable.rb:54:in `each'\n    /home/pc/.rvm/gems/ruby-2.2.1/gems/railties-3.2.22/lib/rails/initializable.rb:54:in `run_initializers'\n    /home/pc/.rvm/gems/ruby-2.2.1/gems/railties-3.2.22/lib/rails/application.rb:136:in `initialize!'\n    /home/pc/.rvm/gems/ruby-2.2.1/gems/railties-3.2.22/lib/rails/railtie/configurable.rb:30:in `method_missing'\n    /home/pc/rubycode/layer_app/config/environment.rb:5:in `&lt;top (required)&gt;'\n     /home/pc/.rvm/gems/ruby-2.2.1/gems/activesupport-3.2.22/lib/active_support/dependencies.rb:251:in `require'\n     /home/pc/.rvm/gems/ruby-2.2.1/gems/activesupport-3.2.22/lib/active_support/dependencies.rb:251:in `block in require'\n     /home/pc/.rvm/gems/ruby-2.2.1/gems/activesupport-3.2.22/lib/active_support/dependencies.rb:236:in `load_dependency'\n     /home/pc/.rvm/gems/ruby-2.2.1/gems/activesupport-3.2.22/lib/active_support/dependencies.rb:251:in `require'\n     /home/pc/.rvm/gems/ruby-2.2.1/gems/railties-3.2.22/lib/rails/application.rb:103:in `require_environment!'\n     /home/pc/.rvm/gems/ruby-2.2.1/gems/railties-   3.2.22/lib/rails/application.rb:305:in `block (2 levels) in initialize_tasks'\n     /home/pc/.rvm/rubies/ruby-2.2.1/lib/ruby/2.2.0/rake/task.rb:240:in `call'\n     /home/pc/.rvm/rubies/ruby-2.2.1/lib/ruby/2.2.0/rake/task.rb:240:in `block in execute'\n     /home/pc/.rvm/rubies/ruby-2.2.1/lib/ruby/2.2.0/rake/task.rb:235:in `each'\n     /home/pc/.rvm/rubies/ruby-2.2.1/lib/ruby/2.2.0/rake/task.rb:235:in `execute'\n     /home/pc/.rvm/rubies/ruby-2.2.1/lib/ruby/2.2.0/rake/task.rb:179:in `block in invoke_with_call_chain'\n     /home/pc/.rvm/rubies/ruby-2.2.1/lib/ruby/2.2.0/monitor.rb:211:in `mon_synchronize'\n     /home/pc/.rvm/rubies/ruby-2.2.1/lib/ruby/2.2.0/rake/task.rb:172:in `invoke_with_call_chain'\n     /home/pc/.rvm/rubies/ruby-2.2.1/lib/ruby/2.2.0/rake/task.rb:201:in `block in invoke_prerequisites'\n     /home/pc/.rvm/rubies/ruby-2.2.1/lib/ruby/2.2.0/rake/task.rb:199:in `each'\n     /home/pc/.rvm/rubies/ruby-2.2.1/lib/ruby/2.2.0/rake/task.rb:199:in `invoke_prerequisites'\n     /home/pc/.rvm/rubies/ruby-2.2.1/lib/ruby/2.2.0/rake/task.rb:178:in `block in invoke_with_call_chain'\n      /home/pc/.rvm/rubies/ruby-2.2.1/lib/ruby/2.2.0/monitor.rb:211:in `mon_synchronize'\n      /home/pc/.rvm/rubies/ruby-2.2.1/lib/ruby/2.2.0/rake/task.rb:172:in `invoke_with_call_chain'\n      /home/pc/.rvm/rubies/ruby-2.2.1/lib/ruby/2.2.0/rake/task.rb:165:in `invoke'\n      /home/pc/.rvm/rubies/ruby-2.2.1/lib/ruby/2.2.0/rake/application.rb:150:in `invoke_task'\n     /home/pc/.rvm/rubies/ruby-2.2.1/lib/ruby/2.2.0/rake/application.rb:106:in `block (2 levels) in top_level'\n     /home/pc/.rvm/rubies/ruby-2.2.1/lib/ruby/2.2.0/rake/application.rb:106:in `each'\n     /home/pc/.rvm/rubies/ruby-2.2.1/lib/ruby/2.2.0/rake/application.rb:106:in `block in top_level'\n     /home/pc/.rvm/rubies/ruby-2.2.1/lib/ruby/2.2.0/rake/application.rb:115:in `run_with_threads'\n     /home/pc/.rvm/rubies/ruby-2.2.1/lib/ruby/2.2.0/rake/application.rb:100:in `top_level'\n     /home/pc/.rvm/rubies/ruby-2.2.1/lib/ruby/2.2.0/rake/application.rb:78:in `block in run'\n     /home/pc/.rvm/rubies/ruby-2.2.1/lib/ruby/2.2.0/rake/application.rb:176:in `standard_exception_handling'\n     /home/pc/.rvm/rubies/ruby-2.2.1/lib/ruby/2.2.0/rake/application.rb:75:in `run'\n     /home/pc/.rvm/rubies/ruby-2.2.1/bin/rake:33:in `&lt;main&gt;'\n     Tasks: TOP =&gt; db:migrate =&gt; environment\n</code></pre>\n\n<p>I am not sure what the problem is, and help is greatly appreciated.</p>\n"}, {"tags": ["ruby", "encoding", "utf-8"], "answers": [{"comments": [{"owner": {"reputation": 20735, "user_id": 307106, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/6a13e655e637138f8d571cec3f9cea76?s=128&d=identicon&r=PG", "display_name": "jrochkind", "link": "https://stackoverflow.com/users/307106/jrochkind"}, "edited": false, "score": 2, "creation_date": 1443045822, "post_id": 32749582, "comment_id": 53341085, "body": "I would add further -- setting the Encoding.default_internal tells ruby to potentially <i>transcode</i> your data upon reading it in. Which means the bytes you will be looking at will no longer be the bytes that were actually on disk. And if the external_encoding was wrong, also means you&#39;ll have garbage. Leave Encoding.default_internal nil,  especially for trying to figure out what&#39;s going on, it&#39;s only going to confuse things."}], "tags": [], "owner": {"reputation": 20735, "user_id": 307106, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/6a13e655e637138f8d571cec3f9cea76?s=128&d=identicon&r=PG", "display_name": "jrochkind", "link": "https://stackoverflow.com/users/307106/jrochkind"}, "is_accepted": true, "score": 4, "last_activity_date": 1443045920, "last_edit_date": 1443045920, "creation_date": 1443042779, "answer_id": 32749582, "question_id": 32748843, "link": "https://stackoverflow.com/questions/32748843/how-to-use-internal-external-encoding-when-importing-a-yaml-file/32749582#32749582", "title": "How to use internal/external encoding when importing a YAML file?", "body": "<p>I believe officially YAML only supports UTF-8 (and maybe UTF-16).  There have historically been all sorts of encoding confusions in YAML libraries. I think you are going to run into trouble trying to have YAML in something other than a Unicode encoding. </p>\n\n<blockquote>\n  <ol>\n  <li>What happens actually when I don't set the default_internal to utf-8?</li>\n  </ol>\n</blockquote>\n\n<p><code>Encoding.default_internal</code> controls the encoding your input will be <em>converted to</em> when it is read in, at least by some operations that respect <code>Encoding.default_internal</code>, not everything does.  Rails seems to set it to UTF-8.  So if you don't set the <code>Encoding.default_internal</code> to UTF-8, it might be UTF-8 already anyway. </p>\n\n<p>If <code>Encoding.default_internal</code> is <code>nil</code>, then those operations that respect it, and try to convert any input to <code>Encoding.default_internal</code> upon reading it in won't do that, they'll leave any input in the encoding it was believed to originate in, not try to convert it. </p>\n\n<p>If you set it to something else, like say \"WINDOWS-1252\" Ruby would automatically convert your stuff to WINDOWS-1252 when it read it in with <code>File.open</code>, which would possibly confuse <code>YAML::load</code> when you pass the string that's now encoded and tagged as WINDOWS-1252 to it. Generally there's no good reason to do this, so leave <code>Encoding.default_internal</code> alone. </p>\n\n<p>Note: The <a href=\"http://ruby-doc.org/core-1.9.3/Encoding.html#method-c-default_internal-3D\" rel=\"nofollow\">Ruby docs</a> say:</p>\n\n<blockquote>\n  <p>\"You should not set ::default_internal in Ruby code as strings created before changing the value may have a different encoding from strings created after the change. Instead you should use ruby -E to invoke Ruby with the correct default_internal.\"</p>\n</blockquote>\n\n<p>See also: <a href=\"http://ruby-doc.org/core-1.9.3/Encoding.html#method-c-default_internal\" rel=\"nofollow\">http://ruby-doc.org/core-1.9.3/Encoding.html#method-c-default_internal</a></p>\n\n<blockquote>\n  <ol start=\"2\">\n  <li>Which encodings do the strings in both examples have?</li>\n  </ol>\n</blockquote>\n\n<p>I don't really know. One would have to have to look at the bytes and try to figure out if they are legal bytes for various plausible encodings, and beyond being legal, if they mean something likely to be intended. </p>\n\n<p>For example take: <code>\"\u00c9G\u00c9\u00ec\u00c9R\u00c5[\u00c9f\u00c9B\u00c9\u00ec\u00c9O\u00c7\u00d5\u00ec\u00d4\u00c7\u00b5\u00c7\u2260\u00c7\u00bb\u00c7\u00a2\"</code>. That's a perfectly <strong>legal</strong> UTF-8 string, but as humans we know it's <em>probably</em> not intended, and is <em>probably</em> garbage, quite likely from the result of an encoding misinterpretation. But a computer has no way to know that, it's perfectly legal UTF-8, and, hey, maybe someone actually did mean to write <code>\"\u00c9G\u00c9\u00ec\u00c9R\u00c5[\u00c9f\u00c9B\u00c9\u00ec\u00c9O\u00c7\u00d5\u00ec\u00d4\u00c7\u00b5\u00c7\u2260\u00c7\u00bb\u00c7\u00a2\"</code>,  after all, I just did, when writing this post!  </p>\n\n<p>So you can try to interpret the bytes according to various encodings and see if any of them make sense.</p>\n\n<p>You're really just guessing at this point. Which means...</p>\n\n<blockquote>\n  <ol start=\"3\">\n  <li>How can I load a file even if I don't know it's encoding?</li>\n  </ol>\n</blockquote>\n\n<p>Generally, you can not. You need to know and keep track of encodings. There's no real way to know what the bytes mean without knowing their encoding. </p>\n\n<p>If you have some legacy data for which you've lost this, you've got to try to figure it out. Manually, or with some code that tries to guess likely encodings based on heuristics. Here's one Ruby gem <a href=\"https://github.com/brianmario/charlock_holmes\" rel=\"nofollow\">Charlock Holmes</a> that tries to guess, using the ICU library heuristics (this particular gem only works on MRI). </p>\n\n<p>What Ruby says in response to <code>string.encoding</code> is just the encoding the string is <em>tagged</em> with. The string can be tagged with the <em>wrong</em> encoding, the bytes in the string don't actually mean what is intended in the encoding it's tagged with... in which case you'll get garbage.  </p>\n\n<p>Ruby will do the right things with your string instead of creating garbage only if the string's encoding tag is <em>correct</em>. The string's encoding tag is determined by <code>Encoding.default_external</code> for most input operations by default (<code>Encoding.default_external</code> usually starts out as <code>UTF-8</code>, or <code>ASCII-8BIT</code> which really means the null encoding, binary data, not tagged with an encoding), or by passing an argument to File.open:  <code>File.open(\"something\", \"r:UTF-8\"</code> or, means the same thing, <code>File.open(\"something\", \"r\", :encoding =&gt; \"UTF-8\")</code>.  The actual bytes are determined by whatever is in the file. It's up to you to tell Ruby the <em>correct</em> encoding to interpret those bytes as text meaning what they were intended to mean. </p>\n\n<p>There were a couple posts recently to reddit /r/ruby that try to explain how to troubleshoot and workaround encoding issues that you may find helpful: </p>\n\n<ul>\n<li><a href=\"http://www.justinweiss.com/articles/how-to-get-from-theyre-to-theyre/\" rel=\"nofollow\">http://www.justinweiss.com/articles/how-to-get-from-theyre-to-theyre/</a></li>\n<li><a href=\"http://www.justinweiss.com/articles/3-steps-to-fix-encoding-problems-in-ruby/\" rel=\"nofollow\">http://www.justinweiss.com/articles/3-steps-to-fix-encoding-problems-in-ruby/</a></li>\n</ul>\n\n<p>Also, this is my favorite article on understanding encoding generally: <a href=\"http://kunststube.net/encoding/\" rel=\"nofollow\">http://kunststube.net/encoding/</a></p>\n\n<p>For YAML files in particular, if I were you, I'd just make sure they are all in UTF-8.  Life will be much easier and you won't have to worry about it. If you have some legacy ones that have become corrupted, it's going to be a pain to fix them, but that's what you've got to do, unless you can just rewrite them from scratch. Try to fix them to be in valid and correct UTF-8, and from here on out keep all your YAML in UTF-8. </p>\n"}, {"tags": [], "owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "is_accepted": false, "score": 4, "last_activity_date": 1443046362, "creation_date": 1443046362, "answer_id": 32750370, "question_id": 32748843, "link": "https://stackoverflow.com/questions/32748843/how-to-use-internal-external-encoding-when-importing-a-yaml-file/32750370#32750370", "title": "How to use internal/external encoding when importing a YAML file?", "body": "<p>The <a href=\"http://www.yaml.org/spec/1.2/spec.html\" rel=\"nofollow\">YAML specification</a> says in \"<a href=\"http://www.yaml.org/spec/1.2/spec.html#id2770814\" rel=\"nofollow\">5.1. Character Set</a>\":</p>\n\n<blockquote>\n  <p>To ensure readability, YAML streams use only the printable subset of the Unicode character set. The allowed character range explicitly excludes the C0 control block #x0-#x1F (except for TAB #x9, LF #xA, and CR #xD which are allowed), DEL #x7F, the C1 control block #x80-#x9F (except for NEL #x85 which is allowed), the surrogate block #xD800-#xDFFF, #xFFFE, and #xFFFF.</p>\n</blockquote>\n\n<p>This means that Windows-1252 or ISO-8859-1 encoding are acceptable as long as the characters being output are within the defined range. Windows users tend to use the \"the C1 control block #x80-#x9F\" range for diacritical and accented characters, so if those are present in a YAML file the file is not going to meet the spec and the YAML generator didn't do its job correctly. And that explains why <code>\"\u00e4\"</code> isn't acceptable.</p>\n\n<blockquote>\n  <p>On output, a YAML processor must only produce acceptable characters. Any excluded characters must be presented using escape sequences. In addition, any allowed characters known to be non-printable should also be escaped. This isn\u2019t mandatory since a full implementation would require extensive character property tables.</p>\n</blockquote>\n\n<p>These days, by default, Ruby uses UTF-8, however YAML isn't limited to that. The spec goes on to say in \"<a href=\"http://www.yaml.org/spec/1.2/spec.html#id2771184\" rel=\"nofollow\">5.2. Character Encodings</a>\":</p>\n\n<blockquote>\n  <p>On input, a YAML processor must support the UTF-8 and UTF-16 character encodings. For JSON compatibility, the UTF-32 encodings must also be supported.</p>\n  \n  <p>If a character stream begins with a byte order mark, the character encoding will be taken to be as as indicated by the byte order mark. Otherwise, the stream must begin with an ASCII character. This allows the encoding to be deduced by the pattern of null (#x00) characters.</p>\n</blockquote>\n\n<p>So, UTF-8, 16 and 32 are supported, but Ruby will assume UTF-8. If the BOM is present you'll see it when you view the file in an editor. I haven't tried loading a UTF-16 or 32 file to see what Ruby's YAML does, so that's left as an experiment.</p>\n"}], "owner": {"reputation": 1217, "user_id": 4108363, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/IWGPW.png?s=128&g=1", "display_name": "LPrc", "link": "https://stackoverflow.com/users/4108363/lprc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1912, "favorite_count": 1, "accepted_answer_id": 32749582, "answer_count": 2, "score": 6, "last_activity_date": 1443046362, "creation_date": 1443039972, "last_edit_date": 1443045413, "question_id": 32748843, "link": "https://stackoverflow.com/questions/32748843/how-to-use-internal-external-encoding-when-importing-a-yaml-file", "title": "How to use internal/external encoding when importing a YAML file?", "body": "<p>How can I load a YAML file regardlessly of its encoding?</p>\n\n<p>My YAML file can be encoded in UTF-8 or ANSI (that's what Notepad++ calls it - I guess it's Windows-1252):</p>\n\n<pre><code>:key1:\n  :key2: \"\u00e4\"\n</code></pre>\n\n<p><code>utf8.yml</code> is encoded in <code>UTF-8</code>, <code>ansi.yml</code> is encoded in <code>ANSI</code>. I load the files as follows:</p>\n\n<pre><code># encoding: utf-8\n\nEncoding.default_internal = \"utf-8\"\n\nutf8_load      = YAML::load(File.open('utf8.yml'))\nutf8_load_file = YAML::load_file('utf8.yml')\nansi_load      = YAML::load(File.open('ansi.yml'))\nansi_load_file = YAML::load_file('ansi.yml')\n</code></pre>\n\n<p>It seems like Ruby doesn't recognize the encoding correctly:</p>\n\n<pre><code>utf8_load      [:key1][:key2].encoding  #=&gt; \"UTF-8\"\nutf8_load_file [:key1][:key2].encoding  #=&gt; \"UTF-8\"\nansi_load      [:key1][:key2].encoding  #=&gt; \"UTF-8\"\nansi_load_file [:key1][:key2].encoding  #=&gt; \"UTF-8\"\n</code></pre>\n\n<p>because the bytes aren't the same:</p>\n\n<pre><code>utf8_load      [:key1][:key2].bytes  #=&gt; [195, 164]\nutf8_load_file [:key1][:key2].bytes  #=&gt; [195, 164]\nansi_load      [:key1][:key2].bytes  #=&gt; [239, 191, 189]\nansi_load_file [:key1][:key2].bytes  #=&gt; [239, 191, 189]\n</code></pre>\n\n<p>If I miss <code>Encoding.default_internal = \"utf-8\"</code>, the bytes are also different:</p>\n\n<pre><code>utf8_load      [:key1][:key2].bytes  #=&gt; [195, 131, 194, 164]\nutf8_load_file [:key1][:key2].bytes  #=&gt; [195, 164]\nansi_load      [:key1][:key2].bytes  #=&gt; [195, 164]\nansi_load_file [:key1][:key2].bytes  #=&gt; [239, 191, 189]\n</code></pre>\n\n<ol>\n<li>What happens actually when I don't set the <code>default_internal</code> to <code>utf-8</code>?</li>\n<li>Which encodings do the strings in both examples have?</li>\n<li>How can I load a file even if I don't know its encoding?</li>\n</ol>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1443047117, "post_id": 32748623, "comment_id": 53341551, "body": "You don&#39;t explain what you&#39;re trying to do, but it appears you want to descend into a directory looking for specific files. And, if so, Ruby&#39;s <a href=\"http://ruby-doc.org/stdlib-2.2.3/libdoc/find/rdoc/Find.html\" rel=\"nofollow noreferrer\">Find</a> class is a great tool. Its startup speed is faster and it is more scalable than using <code>Dir.glob</code> which will walk the hierarchy first, gathering a list, then return an array of everything found. Find&#39;s documentation shows how to <code>prune</code> directories."}, {"owner": {"reputation": 6083, "user_id": 1736601, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/898ece53307a59a16aae6fe549c5283d?s=128&d=identicon&r=PG", "display_name": "atkayla", "link": "https://stackoverflow.com/users/1736601/atkayla"}, "reply_to_user": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1443106505, "post_id": 32748623, "comment_id": 53368208, "body": "Yes I am trying to descend into a directory to get the paths to all the .css and .js files, but there happen to be some bad folder names that end in .js so I would like these to be excluded. I didn&#39;t know about Find so I will check that out."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1443111657, "post_id": 32748623, "comment_id": 53371706, "body": "It&#39;s a minor step to weed out folders, whatever the name. <code>File.directory?(&#39;path&#47;to&#47;folder_or_file&#39;)</code> will tell you. Again, the documentation specifically demonstrates how to do that."}], "answers": [{"tags": [], "owner": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "is_accepted": false, "score": 12, "last_activity_date": 1443039739, "creation_date": 1443039739, "answer_id": 32748786, "question_id": 32748623, "link": "https://stackoverflow.com/questions/32748623/how-do-i-do-a-dir-glob-but-exclude-directories/32748786#32748786", "title": "How do I do a Dir.glob but exclude directories?", "body": "<p>You can't do that with <code>Dir.glob</code>. You have to reject those entries explicitly.</p>\n\n<pre><code>only_files = Dir.glob('*').reject do |path|\n  File.directory?(path)\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 22074, "user_id": 4703663, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/kN6k0.jpg?s=128&g=1", "display_name": "Richard Hamilton", "link": "https://stackoverflow.com/users/4703663/richard-hamilton"}, "is_accepted": false, "score": 4, "last_activity_date": 1443039754, "creation_date": 1443039754, "answer_id": 32748791, "question_id": 32748623, "link": "https://stackoverflow.com/questions/32748623/how-do-i-do-a-dir-glob-but-exclude-directories/32748791#32748791", "title": "How do I do a Dir.glob but exclude directories?", "body": "<p>You can do it with <code>Dir.entries</code></p>\n\n<pre><code>Dir.entries('../directoryname').reject { |f| File.directory?(f) }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2753, "user_id": 2009612, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/VGBK2.jpg?s=128&g=1", "display_name": "FilBot3", "link": "https://stackoverflow.com/users/2009612/filbot3"}, "edited": false, "score": 0, "creation_date": 1497755085, "post_id": 32749902, "comment_id": 76209339, "body": "I like this answer, because its something that a Rakefile should be able to do. Just an alternative answer, not a round-about answer."}], "tags": [], "owner": {"reputation": 25573, "user_id": 676874, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/c8e67ec01dc3e7c402255ff26785863f?s=128&d=identicon&r=PG", "display_name": "knut", "link": "https://stackoverflow.com/users/676874/knut"}, "is_accepted": false, "score": 4, "last_activity_date": 1443044036, "creation_date": 1443044036, "answer_id": 32749902, "question_id": 32748623, "link": "https://stackoverflow.com/questions/32748623/how-do-i-do-a-dir-glob-but-exclude-directories/32749902#32749902", "title": "How do I do a Dir.glob but exclude directories?", "body": "<p>It may be an exaggeration for your problem, but <code>rake</code> defines a class <code>FileList</code>. You could replace <code>Dir.glob</code> with this class:</p>\n\n<pre><code>require 'rake'\nfilelist = FileList.new(\"dir/**/*.{css,js}\")\nfilelist.exclude('**/stupidfolder.js')\nfilelist.each do |file|\n   #... \nend\n</code></pre>\n"}], "owner": {"reputation": 6083, "user_id": 1736601, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/898ece53307a59a16aae6fe549c5283d?s=128&d=identicon&r=PG", "display_name": "atkayla", "link": "https://stackoverflow.com/users/1736601/atkayla"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4612, "favorite_count": 1, "answer_count": 3, "score": 8, "last_activity_date": 1471302038, "creation_date": 1443039030, "last_edit_date": 1443047170, "question_id": 32748623, "link": "https://stackoverflow.com/questions/32748623/how-do-i-do-a-dir-glob-but-exclude-directories", "title": "How do I do a Dir.glob but exclude directories?", "body": "<p>If I wanted to get all of the CSS and JavaScript files</p>\n\n<pre><code>Dir.glob(\"dir/**/*.{css,js})\n</code></pre>\n\n<p>gives me stuff I don't want if there's a folder named <code>stupidfolder.js</code>. I would just change the name of the folder, but I can't.  </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord", "orm", "data-modeling"], "comments": [{"owner": {"reputation": 219, "user_id": 3630922, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aa806219082d60de4bcc7bb1be8c5dac?s=128&d=identicon&r=PG", "display_name": "hamitron", "link": "https://stackoverflow.com/users/3630922/hamitron"}, "edited": false, "score": 0, "creation_date": 1443045255, "post_id": 32748543, "comment_id": 53340882, "body": "you can simplify this function using map.  So district_ids = self.districts.map(&amp;:contact_id)"}], "answers": [{"comments": [{"owner": {"reputation": 219, "user_id": 3630922, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aa806219082d60de4bcc7bb1be8c5dac?s=128&d=identicon&r=PG", "display_name": "hamitron", "link": "https://stackoverflow.com/users/3630922/hamitron"}, "edited": false, "score": 0, "creation_date": 1443045105, "post_id": 32748595, "comment_id": 53340814, "body": "apparently I can&#39;t make a single character edit, but you added an extra &#39;c&#39; in the last districts"}], "tags": [], "owner": {"reputation": 3401, "user_id": 589620, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/bd618bcfa88646d7fea535ad2073ffec?s=128&d=identicon&r=PG", "display_name": "Alexander Shlenchack", "link": "https://stackoverflow.com/users/589620/alexander-shlenchack"}, "is_accepted": false, "score": 2, "last_activity_date": 1443038933, "creation_date": 1443038933, "answer_id": 32748595, "question_id": 32748543, "link": "https://stackoverflow.com/questions/32748543/how-to-use-activerecord-to-create-a-has-many-relationship-without-a-bridge-table/32748595#32748595", "title": "How to use ActiveRecord to create a has_many relationship without a bridge table", "body": "<p>Define associations in the Workshop model:</p>\n\n<pre><code>has_many :districts\nhas_many :district_contacts, through: disctricts\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 444, "user_id": 2606208, "user_type": "registered", "profile_image": "https://graph.facebook.com/1332243860/picture?type=large", "display_name": "Abhishek Sarkar", "link": "https://stackoverflow.com/users/2606208/abhishek-sarkar"}, "is_accepted": true, "score": 1, "last_activity_date": 1443040805, "creation_date": 1443040805, "answer_id": 32749065, "question_id": 32748543, "link": "https://stackoverflow.com/questions/32748543/how-to-use-activerecord-to-create-a-has-many-relationship-without-a-bridge-table/32749065#32749065", "title": "How to use ActiveRecord to create a has_many relationship without a bridge table", "body": "<p>Your model associations should look something like this.</p>\n\n<pre><code>class Workshop &lt; ActiveRecord::Base\n  has_many :districts\n  has_many :district_contacts, through: disctricts\nend\n\nclass District &lt; ActiveRecord::Base\n  belongs_to :workshop\n  has_one :district_contract\nend  \n</code></pre>\n"}], "owner": {"reputation": 3092, "user_id": 1542306, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/dYYtt.jpg?s=128&g=1", "display_name": "Captain Stack", "link": "https://stackoverflow.com/users/1542306/captain-stack"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 387, "favorite_count": 0, "accepted_answer_id": 32749065, "answer_count": 2, "score": 0, "last_activity_date": 1443040805, "creation_date": 1443038731, "question_id": 32748543, "link": "https://stackoverflow.com/questions/32748543/how-to-use-activerecord-to-create-a-has-many-relationship-without-a-bridge-table", "title": "How to use ActiveRecord to create a has_many relationship without a bridge table", "body": "<p>Sorry, this one is hard to phrase in the title. So here's what I'm trying to do. A workshop has many districts. Each district has exactly one district_contact (actually a district_contact_id). How can I use ActiveRecord to model the relationship between workshop and district_contact? I want to be able to do this:</p>\n\n<pre><code>Workshop.district_contacts\n</code></pre>\n\n<p>And get a collection of the actual user objects. Right now, I've done it using a short function:</p>\n\n<pre><code>  def district_contacts\n    district_ids = []\n    self.districts.each do |district|\n      if district.contact_id\n        district_ids &lt;&lt; district.contact_id\n      end\n    end\n    User.find(district_ids)\n  end\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "pagination", "will-paginate"], "comments": [{"owner": {"reputation": 14364, "user_id": 1023609, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/14cd00b085c207261db49ac46be4773c?s=128&d=identicon&r=PG", "display_name": "MurifoX", "link": "https://stackoverflow.com/users/1023609/murifox"}, "edited": false, "score": 0, "creation_date": 1443038145, "post_id": 32748226, "comment_id": 53337425, "body": "The <code>paginate</code> method returns an <code>ActiveRecordRelation</code> from your model. It&#39;s like an <code>array</code> of objects that you can traverse and manipulate. Didn&#39;t understand your question really."}, {"owner": {"reputation": 718, "user_id": 3103686, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/d82778274a818df1c0379d1453462e3f?s=128&d=identicon&r=PG", "display_name": "Brit200313", "link": "https://stackoverflow.com/users/3103686/brit200313"}, "reply_to_user": {"reputation": 14364, "user_id": 1023609, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/14cd00b085c207261db49ac46be4773c?s=128&d=identicon&r=PG", "display_name": "MurifoX", "link": "https://stackoverflow.com/users/1023609/murifox"}, "edited": false, "score": 1, "creation_date": 1443038345, "post_id": 32748226, "comment_id": 53337527, "body": "Hi @MurifoX, I want to be able to access that array of objects for the current_page only. Do you know how to do so?"}], "answers": [{"tags": [], "owner": {"reputation": 3401, "user_id": 589620, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/bd618bcfa88646d7fea535ad2073ffec?s=128&d=identicon&r=PG", "display_name": "Alexander Shlenchack", "link": "https://stackoverflow.com/users/589620/alexander-shlenchack"}, "is_accepted": false, "score": -2, "last_activity_date": 1443038003, "creation_date": 1443038003, "answer_id": 32748354, "question_id": 32748226, "link": "https://stackoverflow.com/questions/32748226/access-collection-object-on-current-page-w-will-paginate/32748354#32748354", "title": "Access collection object on current page w will_paginate", "body": "<p>I've never used <code>will_paginate</code> gem but I believe the <code>@paginate_projects</code> it's your ActiveRecord relation of projects with some additional methods.</p>\n\n<p>From link that you provided:</p>\n\n<blockquote>\n  <p>Arrays returned from paginating finds are, in fact, instances of this\n  little class. You may think of WillPaginate::Collection as an ordinary\n  array with some extra properties. Those properties are used by view\n  helpers to generate correct page links.</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 405, "user_id": 1472621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc346c5eb97a9ef44347af50a81ad81f?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/1472621/matt"}, "is_accepted": false, "score": 0, "last_activity_date": 1443039290, "creation_date": 1443039290, "answer_id": 32748671, "question_id": 32748226, "link": "https://stackoverflow.com/questions/32748226/access-collection-object-on-current-page-w-will-paginate/32748671#32748671", "title": "Access collection object on current page w will_paginate", "body": "<p>Instead of paginating on <code>@projects.keys</code> (I'm not sure what this would return), I recommend paginating <code>@projects</code> (or possibly <code>Project</code>) directly.</p>\n\n<p>When you call <code>#paginate</code> on a model, or on an ActiveRecord collection or scope, it returns the records for that page only.</p>\n\n<p>Let's say, in your controller, you do:</p>\n\n<pre><code>@projects = Project.some_scope_or_query\n@paginate_projects = @projects.paginate(page: params[:page], per_page: 7)\n</code></pre>\n\n<p>In your view / template, the <code>@paginate_projects</code> variable will contain the current page's worth of projects only.</p>\n\n<p>Personally, I'd recommend paginating on the model directly, unless you have particularly complicated logic going on in the controller. Something like:</p>\n\n<pre><code>@projects = Project.some_scope_or_query\n                     .paginate(page: params[:page],\n                               per_page: 7)\n</code></pre>\n\n<p>In your view, you would use <code>@projects</code> as your record collection.</p>\n"}], "owner": {"reputation": 718, "user_id": 3103686, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/d82778274a818df1c0379d1453462e3f?s=128&d=identicon&r=PG", "display_name": "Brit200313", "link": "https://stackoverflow.com/users/3103686/brit200313"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 549, "favorite_count": 1, "answer_count": 2, "score": 4, "last_activity_date": 1443039290, "creation_date": 1443037522, "last_edit_date": 1443037604, "question_id": 32748226, "link": "https://stackoverflow.com/questions/32748226/access-collection-object-on-current-page-w-will-paginate", "title": "Access collection object on current page w will_paginate", "body": "<p>Tech specs: ruby 2.1.5p273, Rails 4.2.3. </p>\n\n<p>I'm using the will_paginate gem to paginate my model on the page. Is it possible to be able to access the instances of the model that are being printed on the current page? </p>\n\n<p>In the Projects controller: </p>\n\n<pre><code>@paginate_projects = @projects.keys.paginate(:page =&gt; params[:page], :per_page =&gt; 7)\n</code></pre>\n\n<p>Using Pry, I can get: </p>\n\n<pre><code>$ @paginate_projects.current_page =&gt; 2\n</code></pre>\n\n<p>I want to be able to do something like:</p>\n\n<pre><code>$ @paginate_projects.current_page.projects =&gt; [Project #8, Project #9, Project #10, Project #11, Project #12, Project #13, Project #14]\n</code></pre>\n\n<p>Thanks in advance for any help. I did look over this: \n<a href=\"http://www.rubydoc.info/github/mislav/will_paginate/WillPaginate/Collection\" rel=\"nofollow\">http://www.rubydoc.info/github/mislav/will_paginate/WillPaginate/Collection</a></p>\n"}, {"tags": ["ruby", "yaml"], "comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 2, "creation_date": 1443037455, "post_id": 32748079, "comment_id": 53337025, "body": "Are you sure this is copied directly from the source because what you have is valid <code>YAML</code> but generally this error occurs with lines without a colon or lines where a space is omitted between the colon and the value. YAML is very sensitive to spacing so extra spaces of even tabs instead of spaces can cause consequences. It is more difficult to help since you haven&#39;t posted the complete yaml but the error is clearly on line 12 but we only have 6 lines"}, {"owner": {"reputation": 20735, "user_id": 307106, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/6a13e655e637138f8d571cec3f9cea76?s=128&d=identicon&r=PG", "display_name": "jrochkind", "link": "https://stackoverflow.com/users/307106/jrochkind"}, "edited": false, "score": 1, "creation_date": 1443061096, "post_id": 32748079, "comment_id": 53345094, "body": "There aren&#39;t even 12 lines in the YAML sample you gave us, so I&#39;m doubting that&#39;s your real input that leads to YAML complaining about something on line 12. There&#39;s nothing in the input you showed us that would lead to that error, it&#39;s in something you haven&#39;t showed us."}, {"owner": {"reputation": 15386, "user_id": 92679, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/oJLsX.jpg?s=128&g=1", "display_name": "Satchel", "link": "https://stackoverflow.com/users/92679/satchel"}, "edited": false, "score": 0, "creation_date": 1443467394, "post_id": 32748079, "comment_id": 53495968, "body": "okay, I snipped the YAML down the list...there is comments up at the top."}, {"owner": {"reputation": 15386, "user_id": 92679, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/oJLsX.jpg?s=128&g=1", "display_name": "Satchel", "link": "https://stackoverflow.com/users/92679/satchel"}, "edited": false, "score": 0, "creation_date": 1443467447, "post_id": 32748079, "comment_id": 53495988, "body": "I think I wasn&#39;t clear on when to use a <code>-</code>, whether there has to be a value after the <code>:</code> and so forth.  but if the above is correct, let me revisit the error."}, {"owner": {"reputation": 50175, "user_id": 1307905, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a38a4f5f180194ac457cdc057f1be6e3?s=128&d=identicon&r=PG", "display_name": "Anthon", "link": "https://stackoverflow.com/users/1307905/anthon"}, "edited": false, "score": 0, "creation_date": 1536131872, "post_id": 32748079, "comment_id": 91308517, "body": "You must have sniped more than the comments. Please re-run the program without the comments in the file and update the YAML to show everything up to the line with the error and youi&#39;ll need to update the line number in the error as well."}], "answers": [{"comments": [{"owner": {"reputation": 50175, "user_id": 1307905, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a38a4f5f180194ac457cdc057f1be6e3?s=128&d=identicon&r=PG", "display_name": "Anthon", "link": "https://stackoverflow.com/users/1307905/anthon"}, "edited": false, "score": 0, "creation_date": 1536131730, "post_id": 52169344, "comment_id": 91308431, "body": "You don&#39;t need a directive end marker (<code>---</code>) if you don&#39;t have any directives and as long as your document doesn&#39;t start with <code>%</code>. You need a document end marker <code>...</code> only when you need to explicitly indicate the stream is complete (or if another document follows). The production rules of YAML allow a bare document to start with whitespace. None of your recommendations provide anything useful. But it is interesting you have the same problem as the OP, i.e. an error in line 12 when parsing a <b>six line</b> YAML document. You should file a a report, because that is certainly a bug in the parser."}, {"owner": {"reputation": 31, "user_id": 9188955, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d587bce91b824fcc4a0e7743e775852b?s=128&d=identicon&r=PG&f=1", "display_name": "yahelck", "link": "https://stackoverflow.com/users/9188955/yahelck"}, "reply_to_user": {"reputation": 50175, "user_id": 1307905, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a38a4f5f180194ac457cdc057f1be6e3?s=128&d=identicon&r=PG", "display_name": "Anthon", "link": "https://stackoverflow.com/users/1307905/anthon"}, "edited": false, "score": 0, "creation_date": 1536418838, "post_id": 52169344, "comment_id": 91421516, "body": "Oh, I missed the part with the missmatching lines. I thought the OP was just looking for an explanation for this error, like I was. The cause for this error in my case was that I didn&#39;t indent the start and end markers correctly, so I suggested this might be the cause for others reading this too."}, {"owner": {"reputation": 50175, "user_id": 1307905, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a38a4f5f180194ac457cdc057f1be6e3?s=128&d=identicon&r=PG", "display_name": "Anthon", "link": "https://stackoverflow.com/users/1307905/anthon"}, "edited": false, "score": 0, "creation_date": 1536419102, "post_id": 52169344, "comment_id": 91421583, "body": "They are both end-markers, the <code>---</code> indicateding end of directives. They are only recognised as such if they are at the start of a line <b>and</b> followed by white-space (space, newline etc)."}], "tags": [], "owner": {"reputation": 31, "user_id": 9188955, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d587bce91b824fcc4a0e7743e775852b?s=128&d=identicon&r=PG&f=1", "display_name": "yahelck", "link": "https://stackoverflow.com/users/9188955/yahelck"}, "is_accepted": false, "score": -1, "last_activity_date": 1536073812, "creation_date": 1536073812, "answer_id": 52169344, "question_id": 32748079, "link": "https://stackoverflow.com/questions/32748079/how-do-i-resolve-the-mapping-values-not-allowed-error-parsing-yaml-in-ruby/52169344#52169344", "title": "How do I resolve the mapping values not allowed error parsing YAML in ruby", "body": "<p>Try putting <code>---</code> at the beggining and <code>...</code> at the end of the YAML file. Make sure to indent them correctly (starting at column 0).\nI'm not an expert or anything and I don't know what causes this problem, but I had the same one and that fixed it.</p>\n"}], "owner": {"reputation": 15386, "user_id": 92679, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/oJLsX.jpg?s=128&g=1", "display_name": "Satchel", "link": "https://stackoverflow.com/users/92679/satchel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1081, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1536073812, "creation_date": 1443036987, "question_id": 32748079, "link": "https://stackoverflow.com/questions/32748079/how-do-i-resolve-the-mapping-values-not-allowed-error-parsing-yaml-in-ruby", "title": "How do I resolve the mapping values not allowed error parsing YAML in ruby", "body": "<p>I have the following:</p>\n\n<pre><code>  BrowserBlasterBasic:\n    name: 'Browser Blaster Basic Account'\n    app_id: 1900\n    sub_target: 'zone'\n    price: '0.99'\n    visible: 'true'\n</code></pre>\n\n<p>I get the following error:</p>\n\n<pre><code>mapping values are not allowed in this context at line 12 column 7\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "sqlite", "activerecord", "heroku"], "comments": [{"owner": {"reputation": 1600, "user_id": 1395009, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/88yfK.jpg?s=128&g=1", "display_name": "nikkypx", "link": "https://stackoverflow.com/users/1395009/nikkypx"}, "edited": false, "score": 1, "creation_date": 1443036356, "post_id": 32747762, "comment_id": 53336400, "body": "what does your database.yml file look like"}, {"owner": {"reputation": 2560, "user_id": 5112122, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206053108358704/picture?type=large", "display_name": "Horacio", "link": "https://stackoverflow.com/users/5112122/horacio"}, "edited": false, "score": 0, "creation_date": 1443036519, "post_id": 32747762, "comment_id": 53336498, "body": "could you provide us your Gemfile gem?"}, {"owner": {"reputation": 3614, "user_id": 1569930, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/7bc43a689388dd4697947ffe8f4c9dcd?s=128&d=identicon&r=PG", "display_name": "eirikir", "link": "https://stackoverflow.com/users/1569930/eirikir"}, "edited": false, "score": 1, "creation_date": 1443038040, "post_id": 32747762, "comment_id": 53337367, "body": "possible duplicate of <a href=\"http://stackoverflow.com/questions/3897431/deploying-ror-app-to-heroku-with-sqlite3-fails\">Deploying RoR app to Heroku with Sqlite3 fails</a>"}], "answers": [{"comments": [{"owner": {"reputation": 181, "user_id": 1710836, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/df8a6dd88567e78e65e6475925c1ffe6?s=128&d=identicon&r=PG", "display_name": "umayneverknow", "link": "https://stackoverflow.com/users/1710836/umayneverknow"}, "edited": false, "score": 0, "creation_date": 1443040418, "post_id": 32748332, "comment_id": 53338606, "body": "Sorry I forgot to mention. I tried doing that as well. It threw errors again. I think it has something to do with the fact that I have a class that uses <code>ActiveRecord::Base</code>"}, {"owner": {"reputation": 3614, "user_id": 1569930, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/7bc43a689388dd4697947ffe8f4c9dcd?s=128&d=identicon&r=PG", "display_name": "eirikir", "link": "https://stackoverflow.com/users/1569930/eirikir"}, "reply_to_user": {"reputation": 181, "user_id": 1710836, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/df8a6dd88567e78e65e6475925c1ffe6?s=128&d=identicon&r=PG", "display_name": "umayneverknow", "link": "https://stackoverflow.com/users/1710836/umayneverknow"}, "edited": false, "score": 0, "creation_date": 1443041252, "post_id": 32748332, "comment_id": 53339041, "body": "Its difficult to help you when you don&#39;t explain what the errors are. The above code does work, since I&#39;ve used it without issue. Also, <code>ActiveRecord::Base</code> is what all of your models inherit from"}, {"owner": {"reputation": 181, "user_id": 1710836, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/df8a6dd88567e78e65e6475925c1ffe6?s=128&d=identicon&r=PG", "display_name": "umayneverknow", "link": "https://stackoverflow.com/users/1710836/umayneverknow"}, "edited": false, "score": 0, "creation_date": 1443041757, "post_id": 32748332, "comment_id": 53339290, "body": "I am getting this error when I try to run development on my local machine.  <code>Specified &#39;sqlite3&#39; for database adapter, but the gem is not loaded. Add `gem &#39;sqlite3&#39;` to your Gemfile (and ensure its version is at the minimum required by ActiveRecord).</code>"}, {"owner": {"reputation": 3614, "user_id": 1569930, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/7bc43a689388dd4697947ffe8f4c9dcd?s=128&d=identicon&r=PG", "display_name": "eirikir", "link": "https://stackoverflow.com/users/1569930/eirikir"}, "reply_to_user": {"reputation": 181, "user_id": 1710836, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/df8a6dd88567e78e65e6475925c1ffe6?s=128&d=identicon&r=PG", "display_name": "umayneverknow", "link": "https://stackoverflow.com/users/1710836/umayneverknow"}, "edited": false, "score": 0, "creation_date": 1443042124, "post_id": 32748332, "comment_id": 53339468, "body": "Do exactly what it says... add <code>gem &#39;sqlite3&#39;</code> to your Gemfile, but add it in the group for development, e.g. <code>gem &#39;sqlite3&#39;, group: :development</code>"}, {"owner": {"reputation": 181, "user_id": 1710836, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/df8a6dd88567e78e65e6475925c1ffe6?s=128&d=identicon&r=PG", "display_name": "umayneverknow", "link": "https://stackoverflow.com/users/1710836/umayneverknow"}, "edited": false, "score": 0, "creation_date": 1443053567, "post_id": 32748332, "comment_id": 53343415, "body": "Yes. I did try that. But when I do, I get <code>remote:       Gem::Installer::ExtensionBuildError: ERROR: Failed to build gem native extension. &#47;tmp&#47;build_23334fae90f17ca215e6f12340967cbd&#47;vendor&#47;ruby-2.0.&zwnj;&#8203;0&#47;bin&#47;ruby extconf.rb remote:        checking for sqlite3.h... no remote:        sqlite3.h is missing. Try &#39;port install sqlite3 +universal&#39;, remote:        &#39;yum install sqlite-devel&#39; or &#39;apt-get install libsqlite3-dev&#39; remote:        and check your shared library search path (the remote:        location where your sqlite3 shared library is located). remote:        *** extconf.rb failed</code>"}], "tags": [], "owner": {"reputation": 3614, "user_id": 1569930, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/7bc43a689388dd4697947ffe8f4c9dcd?s=128&d=identicon&r=PG", "display_name": "eirikir", "link": "https://stackoverflow.com/users/1569930/eirikir"}, "is_accepted": true, "score": 3, "last_activity_date": 1443038385, "last_edit_date": 1443038385, "creation_date": 1443037901, "answer_id": 32748332, "question_id": 32747762, "link": "https://stackoverflow.com/questions/32747762/how-can-we-use-activerecord-and-deploy-to-heroku-without-using-sqlite3/32748332#32748332", "title": "How can we use ActiveRecord and deploy to Heroku without using sqlite3?", "body": "<p><a href=\"https://devcenter.heroku.com/articles/sqlite3\" rel=\"nofollow\">Heroku does not support SQLite</a>. It supports PostgreSQL by default (and some other databases with add-ons). To use PostgreSQL on Heroku, open <code>config/database.yml</code> and look for the production section, looking something like this:</p>\n\n<pre><code>production:\n  adapter: sqlite3\n  database: db/production.sqlite3\n  pool: 5\n  timeout: 5000\n</code></pre>\n\n<p>Change <code>adapter: sqlite3</code> to <code>adapter: postgresql</code> and modify the name of the database. The result should be something like:</p>\n\n<pre><code>production:\n  adapter: postgresql\n  database: db_production\n</code></pre>\n\n<p>You also need to add the PostgreSQL adapter to your Gemfile:</p>\n\n<pre><code>gem 'pg', group: [:production, :staging]\n</code></pre>\n\n<p>I recommend that you also configure PostgreSQL in development. Not only is SQLite much less powerful than PostgreSQL, but you also want your development environment to match production as much as possible. </p>\n"}, {"tags": [], "owner": {"reputation": 35, "user_id": 5078093, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/ace209f0457bf021a5f8b988fbf583e5?s=128&d=identicon&r=PG&f=1", "display_name": "ec3", "link": "https://stackoverflow.com/users/5078093/ec3"}, "is_accepted": false, "score": 0, "last_activity_date": 1443038385, "creation_date": 1443038385, "answer_id": 32748449, "question_id": 32747762, "link": "https://stackoverflow.com/questions/32747762/how-can-we-use-activerecord-and-deploy-to-heroku-without-using-sqlite3/32748449#32748449", "title": "How can we use ActiveRecord and deploy to Heroku without using sqlite3?", "body": "<p>the comment from mu is right re: differences with ActiveRecord - you'll probably have to go back and make query changes for some things (that's what I ended up having to do!). </p>\n\n<p>But if you just want to push to heroku and still be able to run it locally for testing now you should be able to just add group: :development (like below) when you want to include sqlite in your gemfile. That way heroku will ignore it when you're deploying. if this doesn't work, maybe post your database.yml file and gemfile so we can have more info</p>\n\n<p>gem 'sqlite3', group: :development</p>\n"}], "owner": {"reputation": 181, "user_id": 1710836, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/df8a6dd88567e78e65e6475925c1ffe6?s=128&d=identicon&r=PG", "display_name": "umayneverknow", "link": "https://stackoverflow.com/users/1710836/umayneverknow"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 728, "favorite_count": 1, "accepted_answer_id": 32748332, "answer_count": 2, "score": 0, "last_activity_date": 1443053684, "creation_date": 1443035899, "last_edit_date": 1443053684, "question_id": 32747762, "link": "https://stackoverflow.com/questions/32747762/how-can-we-use-activerecord-and-deploy-to-heroku-without-using-sqlite3", "title": "How can we use ActiveRecord and deploy to Heroku without using sqlite3?", "body": "<p>I'm using the ActiveRecord class and was using \"sqlite3\" as the default. \nThen I wanted to deploy it on Heroku (which uses PostgreSQL). So I just added that in the Gemfile and installed the dependencies. </p>\n\n<p>When I try to push to Heroku, it throws errors such as:</p>\n\n<pre><code>remote:        Gem::Installer::ExtensionBuildError: ERROR: Failed to build gem native extension.\nremote:   \nremote:        /tmp/build_12cfde1548d0f1ff19f95340a86aab63/vendor/ruby-2.0.0/bin/ruby extconf.rb\nremote:        checking for sqlite3.h... no\nremote:        sqlite3.h is missing. Try 'port install sqlite3 +universal',\nremote:        'yum install sqlite-devel' or 'apt-get install libsqlite3-dev'\nremote:        and check your shared library search path (the\nremote:        location where your sqlite3 shared library is located).\nremote:        *** extconf.rb failed ***\n</code></pre>\n\n<p>So then I tried removing the sqlite3 gem and I get this error from the application when I try to run it (I haven't tried deploying on Heroku yet):</p>\n\n<pre><code>Error:[rake --tasks] /Users/adeesh/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/activerecord-4.2.4/lib/active_record/connection_adapters/connection_specification.rb:177:in `rescue in spec': Specified 'sqlite3' for database adapter, but the gem is not loaded. Add `gem 'sqlite3'` to your Gemfile (and ensure its version is at the minimum required by ActiveRecord). (Gem::LoadError)\n    from /Users/adeesh/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/activerecord-4.2.4/lib/active_record/connection_adapters/connection_specification.rb:174:in `spec'\n    from /Users/adeesh/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/activerecord-4.2.4/lib/active_record/connection_handling.rb:50:in `establish_connection'\n    from /Users/adeesh/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/activerecord-4.2.4/lib/active_record/railtie.rb:120:in `block (2 levels) in &lt;class:Railtie&gt;'\n    from /Users/adeesh/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/activesupport-4.2.4/lib/active_support/lazy_load_hooks.rb:38:in `instance_eval'\n    from /Users/adeesh/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/activesupport-4.2.4/lib/active_support/lazy_load_hooks.rb:38:in `execute_hook'\n    from /Users/adeesh/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/activesupport-4.2.4/lib/active_support/lazy_load_hooks.rb:45:in `block in run_load_hooks'\n    from /Users/adeesh/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/activesupport-4.2.4/lib/active_support/lazy_load_hooks.rb:44:in `each'\n    from /Users/adeesh/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/activesupport-4.2.4/lib/active_support/lazy_load_hooks.rb:44:in `run_load_hooks'\n    from /Users/adeesh/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/activerecord-4.2.4/lib/active_record/base.rb:315:in `&lt;module:ActiveRecord&gt;'\n    from /Users/adeesh/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/activerecord-4.2.4/lib/active_record/base.rb:26:in `&lt;top (required)&gt;'\n    from /Users/adeesh/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/spring-1.4.0/lib/spring/application.rb:319:in `active_record_configured?'\n    from /Users/adeesh/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/spring-1.4.0/lib/spring/application.rb:251:in `disconnect_database'\n    from /Users/adeesh/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/spring-1.4.0/lib/spring/application.rb:97:in `preload'\n    from /Users/adeesh/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/spring-1.4.0/lib/spring/application.rb:143:in `serve'\n    from /Users/adeesh/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/spring-1.4.0/lib/spring/application.rb:131:in `block in run'\n    from /Users/adeesh/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/spring-1.4.0/lib/spring/application.rb:125:in `loop'\n    from /Users/adeesh/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/spring-1.4.0/lib/spring/application.rb:125:in `run'\n    from /Users/adeesh/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/spring-1.4.0/lib/spring/application/boot.rb:18:in `&lt;top (required)&gt;'\n    from /Users/adeesh/.rbenv/versions/2.2.3/lib/ruby/2.2.0/rubygems/core_ext/kernel_require.rb:54:in `require'\n    from /Users/adeesh/.rbenv/versions/2.2.3/lib/ruby/2.2.0/rubygems/core_ext/kernel_require.rb:54:in `require'\n    from -e:1:in `&lt;main&gt;'\n</code></pre>\n\n<p>I have run out of ideas and am very new to ruby or rails for that matter. Any help is appreciated!</p>\n\n<pre><code> source 'https://rubygems.org'\n\n\n # Bundle edge Rails instead: gem 'rails', github: 'rails/rails'\n gem 'rails', '4.2.4'\n # Use SCSS for stylesheets\n gem 'sass-rails', ' 5.0.2'\n # Use Uglifier as compressor for JavaScript assets\n gem 'uglifier', '&gt;= 1.3.0'\n # Use CoffeeScript for .coffee assets and views\n gem 'coffee-rails', '~&gt; 4.1.0'\n # See https://github.com/rails/execjs#readme for more supported runtimes\n # gem 'therubyracer', platforms: :ruby\n # Use jquery as the JavaScript library\n gem 'jquery-rails' , '&gt;= 4.0.3'\n # Turbolinks makes following links in your web application faster. Read more: https://github.com/rails/turbolinks\n gem 'turbolinks', '2.3.0'\n # Build JSON APIs with ease. Read more: https://github.com/rails/jbuilder\n gem 'jbuilder', '2.2.3'\n # bundle exec rake doc:rails generates the API under doc/api.\n gem 'sdoc', ' 0.4.0', group: :doc\n\n # Use ActiveModel has_secure_password\n gem 'bcrypt', '~&gt; 3.1.7'\n\n # Use Unicorn as the app server\n # gem 'unicorn'\n\n # Use Capistrano for deployment\n # gem 'capistrano-rails', group: :development\n\n group :development, :test do\n # Use sqlite3 as the database for Active Record\n   #gem 'sqlite3'\n   #gem 'activerecord'\n\n   gem 'pg'\n   gem 'rails_12factor', '&gt;= 0.0.2'\n   # Call 'byebug' anywhere in the code to stop execution and get a debugger console\n   gem 'byebug', '&gt;= 3.4.0'\n\n   # Access an IRB console on exception pages or by using &lt;%= console %&gt; in views\n   gem 'web-console', '~&gt; 2.0'\n\n   # Spring speeds up development by keeping your application running in the background. Read more: https://github.com/rails/spring\n   gem 'spring'\n\n end\n\n group :production do\n   #This is for use with Heroku\n   gem 'pg'\n   gem 'rails_12factor', '&gt;= 0.0.2'\n end\n</code></pre>\n\n<p>And here's a look at my database.ml file:</p>\n\n<pre><code># SQLite version 3.x\n#   gem install sqlite3\n#\n#   Ensure the SQLite 3 gem is defined in your Gemfile\n#   gem 'sqlite3'\n#\ndefault: &amp;default\n  adapter: sqlite3\n  pool: 5\n  timeout: 5000\n\ndevelopment:\n  &lt;&lt;: *default\n  database: db/development.sqlite3\n\n# Warning: The database defined as \"test\" will be erased and\n# re-generated from your development database when you run \"rake\".\n# Do not set this db to the same as development or production.\ntest:\n  &lt;&lt;: *default\n  database: db/test.sqlite3\n\nproduction:\n  &lt;&lt;: *default\n  database: db/production.sqlite3\n</code></pre>\n\n<p>Update 2:</p>\n\n<p>I'm getting this error if I try to run the development (localhost) db on the web page:</p>\n\n<p><a href=\"https://i.stack.imgur.com/5TrBV.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/5TrBV.png\" alt=\"Screenshot of webpage\"></a></p>\n\n<p>When I add it to the development and test group, I still get these errors:</p>\n\n<pre><code>remote:        \nremote:        Gem::Installer::ExtensionBuildError: ERROR: Failed to build gem native extension.\nremote:        \nremote:        /tmp/build_23334fae90f17ca215e6f12340967cbd/vendor/ruby-2.0.0/bin/ruby extconf.rb\nremote:        checking for sqlite3.h... no\nremote:        sqlite3.h is missing. Try 'port install sqlite3 +universal',\nremote:        'yum install sqlite-devel' or 'apt-get install libsqlite3-dev'\nremote:        and check your shared library search path (the\nremote:        location where your sqlite3 shared library is located).\nremote:        *** extconf.rb failed ***\nCould not create Makefile due to some reason, probably lack of necessary\nremote:        libraries and/or headers.  Check the mkmf.log file for more details.  You may\nremote:        need configuration options.\nremote:    \nremote:        Provided configuration options:\nremote:        --with-opt-dir\nremote:        --without-opt-dir\nremote:        --with-opt-include\nremote:        --without-opt-include=${opt-dir}/include\nremote:        --with-opt-lib\nremote:        --without-opt-lib=${opt-dir}/lib\nremote:        --with-make-prog\nremote:        --without-make-prog\nremote:        --srcdir=.\nremote:        --curdir\nremote:        --ruby=/tmp/build_23334fae90f17ca215e6f12340967cbd/vendor/ruby-2.0.0/bin/ruby\nremote:        --with-sqlite3-dir\nremote:        --without-sqlite3-dir\nremote:        --with-sqlite3-include\nremote:        --without-sqlite3-include=${sqlite3-dir}/include\nremote:        --with-sqlite3-lib\nremote:        --without-sqlite3-lib=${sqlite3-dir}/\nremote:    \nremote:    \nremote:        Gem files will remain installed in /tmp/build_23334fae90f17ca215e6f12340967cbd/vendor/bundle/ruby/2.0.0/gems/sqlite3-1.3.10 for inspection.\nremote:        Results logged to /tmp/build_23334fae90f17ca215e6f12340967cbd/vendor/bundle/ruby/2.0.0/gems/sqlite3-1.3.10/ext/sqlite3/gem_make.out\nremote:        An error occurred while installing sqlite3 (1.3.10), and Bundler cannot\nremote:        continue.\nremote:        Make sure that `gem install sqlite3 -v '1.3.10'` succeeds before bundling.\nremote:  !\nremote:  !     Failed to install gems via Bundler.\nremote:  ! \nremote:  !     Detected sqlite3 gem which is not supported on Heroku.\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec"], "comments": [{"owner": {"reputation": 6689, "user_id": 273444, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26988136c0514172417b7c7c863733f2?s=128&d=identicon&r=PG", "display_name": "Alexey Shein", "link": "https://stackoverflow.com/users/273444/alexey-shein"}, "edited": false, "score": 0, "creation_date": 1443038511, "post_id": 32747567, "comment_id": 53337618, "body": "Are you sure, that your <code>after_commit</code> hook is getting called? Because if your tests are wrapped in transactions (standard rspec setup) <code>after_commit</code> hooks don&#39;t get fired out of the box."}, {"owner": {"reputation": 4630, "user_id": 1411004, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/7121065ef6fa8322cd2ac0bb959bdbdf?s=128&d=identicon&r=PG", "display_name": "stevenspiel", "link": "https://stackoverflow.com/users/1411004/stevenspiel"}, "reply_to_user": {"reputation": 6689, "user_id": 273444, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26988136c0514172417b7c7c863733f2?s=128&d=identicon&r=PG", "display_name": "Alexey Shein", "link": "https://stackoverflow.com/users/273444/alexey-shein"}, "edited": false, "score": 0, "creation_date": 1443049495, "post_id": 32747567, "comment_id": 53342312, "body": "Good point. I&#39;m using the gem test_after_commit so after_commit is triggered."}, {"owner": {"reputation": 6689, "user_id": 273444, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26988136c0514172417b7c7c863733f2?s=128&d=identicon&r=PG", "display_name": "Alexey Shein", "link": "https://stackoverflow.com/users/273444/alexey-shein"}, "edited": false, "score": 0, "creation_date": 1443093634, "post_id": 32747567, "comment_id": 53359079, "body": "This is strange, everything should work. If you change <code>allow</code> to <code>expect</code>, do you receive a failing expectation? You may also try to stub something up on the stack, say <code>NoteMailer.send_notification</code> method. Also, try to test without <code>after_commit</code> hook, maybe that&#39;s still the case."}], "owner": {"reputation": 4630, "user_id": 1411004, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/7121065ef6fa8322cd2ac0bb959bdbdf?s=128&d=identicon&r=PG", "display_name": "stevenspiel", "link": "https://stackoverflow.com/users/1411004/stevenspiel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 813, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1443035158, "creation_date": 1443035158, "question_id": 32747567, "link": "https://stackoverflow.com/questions/32747567/rspec-allowclassto-receiveclass-method-not-working", "title": "Rspec allow(Class)to_receive(:class_method) not working", "body": "<p>I've read <a href=\"https://www.relishapp.com/rspec/rspec-mocks/v/2-14/docs/method-stubs\" rel=\"nofollow\">the docs</a>, but it appears I still can't stub this class method from outside the class's spec.</p>\n\n<p>I'm trying to stub a method called on NoteMailer</p>\n\n<p>spec:</p>\n\n<pre><code>describe '#send_notification' do\n  subject { Note.new }\n\n  it 'sends an email' do\n    expect(subject.id).to be_nil\n    expect(subject).to be_valid\n\n    # The important part\n    allow(NoteMailer).to receive(:conversation_recipients).and_return(['user@dev.null'])\n\n    note.save!\n  end\nend\n</code></pre>\n\n<p>note.rb</p>\n\n<pre><code>class Note &lt; ActiveRecord::Base\n  after_commit :send_notification\n\n  def send_notification\n    NoteMailer.send_notification(self)\n  end\nend\n</code></pre>\n\n<p>conversation_mailer.rb</p>\n\n<pre><code>class NoteMailer &lt; ActionMailer::Base\n  def self.send_notification(note)\n    recipients = conversation_recipients(note)\n\n    # This point is always reached, but recipients is always []\n  end\n\n  def self.conversation_recipients(note)\n    []\n  end\nend\n</code></pre>\n\n<p>What am I doing wrong with stubbing this method?</p>\n\n<p>It's interesting that this same line works find when within the NoteMailer spec.</p>\n\n<pre><code>allow(described_class).to receive(:conversation_recipient).and_return(['user@dev.null'])\n</code></pre>\n\n<p>How can I stub the class method?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rubygems", "erb"], "comments": [{"owner": {"reputation": 13756, "user_id": 567762, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/908c9abc72ab86111a153b11cb584f26?s=128&d=identicon&r=PG", "display_name": "Jared Beck", "link": "https://stackoverflow.com/users/567762/jared-beck"}, "edited": false, "score": 1, "creation_date": 1443034573, "post_id": 32747318, "comment_id": 53335392, "body": "The <code>d19a42b...</code> suffix is called a &quot;digest&quot;.  See <a href=\"http://guides.rubyonrails.org/asset_pipeline.html\" rel=\"nofollow noreferrer\">The Asset Pipeline</a>"}, {"owner": {"reputation": 265, "user_id": 2541224, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/88fd4dabdd08a6bc11bc9e0094594b2d?s=128&d=identicon&r=PG", "display_name": "jSmith", "link": "https://stackoverflow.com/users/2541224/jsmith"}, "reply_to_user": {"reputation": 13756, "user_id": 567762, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/908c9abc72ab86111a153b11cb584f26?s=128&d=identicon&r=PG", "display_name": "Jared Beck", "link": "https://stackoverflow.com/users/567762/jared-beck"}, "edited": false, "score": 0, "creation_date": 1443035933, "post_id": 32747318, "comment_id": 53336178, "body": "Once I&#39;ve made a change in the config/application.rb file, how do I restart the config?"}, {"owner": {"reputation": 679, "user_id": 1580021, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/95c100dda8b56b01970a751c1af1a317?s=128&d=identicon&r=PG", "display_name": "Romuloux", "link": "https://stackoverflow.com/users/1580021/romuloux"}, "edited": false, "score": 0, "creation_date": 1443042907, "post_id": 32747318, "comment_id": 53339872, "body": "To reload the config, you need to restart the app."}], "answers": [{"comments": [{"owner": {"reputation": 265, "user_id": 2541224, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/88fd4dabdd08a6bc11bc9e0094594b2d?s=128&d=identicon&r=PG", "display_name": "jSmith", "link": "https://stackoverflow.com/users/2541224/jsmith"}, "edited": false, "score": 0, "creation_date": 1443036422, "post_id": 32747442, "comment_id": 53336438, "body": "Thanks -- I&#39;ll check that. About the names with digest however, how do I get rid of it? I tried putting config.assets.digest = false in the config files but it still doesnt work. Should I reload something?"}, {"owner": {"reputation": 311, "user_id": 2517810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0cc6ac8c3f852840afa8c31f0270fa9?s=128&d=identicon&r=PG", "display_name": "joem", "link": "https://stackoverflow.com/users/2517810/joem"}, "reply_to_user": {"reputation": 265, "user_id": 2541224, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/88fd4dabdd08a6bc11bc9e0094594b2d?s=128&d=identicon&r=PG", "display_name": "jSmith", "link": "https://stackoverflow.com/users/2541224/jsmith"}, "edited": false, "score": 0, "creation_date": 1443122501, "post_id": 32747442, "comment_id": 53377647, "body": "In rails, you should be able to set     <code>config.assets.digest = false</code>  though there have apparently been some defects floating around with that.  You may need to set  precompile assets off as well.  If you don&#39;t want to do that, check out this this gem <a href=\"https://github.com/alexspeller/non-stupid-digest-assets\" rel=\"nofollow noreferrer\">github.com/alexspeller/non-stupid-digest-assets</a>"}], "tags": [], "owner": {"reputation": 311, "user_id": 2517810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0cc6ac8c3f852840afa8c31f0270fa9?s=128&d=identicon&r=PG", "display_name": "joem", "link": "https://stackoverflow.com/users/2517810/joem"}, "is_accepted": false, "score": 1, "last_activity_date": 1443034757, "creation_date": 1443034757, "answer_id": 32747442, "question_id": 32747318, "link": "https://stackoverflow.com/questions/32747318/rails-keep-using-old-version-of-my-images/32747442#32747442", "title": "Rails keep using old version of my images", "body": "<p>It sounds like you may have a web server or reverse proxy that that is responsible for serving static content.  Do you have nginx or something else in front of the rails app?  You may need to restart that server or flush the cache there. </p>\n"}], "owner": {"reputation": 265, "user_id": 2541224, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/88fd4dabdd08a6bc11bc9e0094594b2d?s=128&d=identicon&r=PG", "display_name": "jSmith", "link": "https://stackoverflow.com/users/2541224/jsmith"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 89, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1443034757, "creation_date": 1443034400, "question_id": 32747318, "link": "https://stackoverflow.com/questions/32747318/rails-keep-using-old-version-of-my-images", "title": "Rails keep using old version of my images", "body": "<p>I had a few images on my website that were over 1MB so I compressed them and uploaded them to the server (replaced them using same names, in app/assets). I also deleted the images that were previously generated in /public/assets.</p>\n\n<p>In my index.html.erb I use the image like <code>header/logo.png</code></p>\n\n<p>However in my browser, the image name is always for example <code>logo-d19a42b2a0872961c14523505539a29c.png</code> (same name as before) and the same 1MB size as the previous image. I cleared cache / cookies.\nWeirdly, on the server if I do <code>find . -name \"logo-d19a42b2a0872961c14523505539a29c.png\"</code> there is nothing found.</p>\n\n<p>Is that normal rails behavior? What should I do to fix that?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "gem"], "comments": [{"owner": {"reputation": 1994, "user_id": 606907, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/d3aca05004a1c66695d2f22ffa69c0d2?s=128&d=identicon&r=PG", "display_name": "denys281", "link": "https://stackoverflow.com/users/606907/denys281"}, "edited": false, "score": 0, "creation_date": 1443037833, "post_id": 32747212, "comment_id": 53337229, "body": "What exactly menu disappears? Can you paste code of this menu?"}, {"owner": {"reputation": 105, "user_id": 5343882, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8553f45e98cc20de5f3f8aba33ebf12e?s=128&d=identicon&r=PG&f=1", "display_name": "basania", "link": "https://stackoverflow.com/users/5343882/basania"}, "reply_to_user": {"reputation": 1994, "user_id": 606907, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/d3aca05004a1c66695d2f22ffa69c0d2?s=128&d=identicon&r=PG", "display_name": "denys281", "link": "https://stackoverflow.com/users/606907/denys281"}, "edited": false, "score": 0, "creation_date": 1443038040, "post_id": 32747212, "comment_id": 53337368, "body": "@denys281 dissapers &lt;nav class=&quot;navbar navbar-default navbar-fixed-top&quot;&gt;...&lt;/nav&gt; Do you need CSS?"}], "answers": [{"tags": [], "owner": {"reputation": 1994, "user_id": 606907, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/d3aca05004a1c66695d2f22ffa69c0d2?s=128&d=identicon&r=PG", "display_name": "denys281", "link": "https://stackoverflow.com/users/606907/denys281"}, "is_accepted": true, "score": 0, "last_activity_date": 1443043268, "creation_date": 1443043268, "answer_id": 32749703, "question_id": 32747212, "link": "https://stackoverflow.com/questions/32747212/authorization-set-up-for-rails-app-with-vk/32749703#32749703", "title": "Authorization set up for Rails app with VK", "body": "<p>After authorization it redirects you to <strong>def vkontakte end</strong> method and you see it view. </p>\n\n<p>So you can add some modification to this controller, something like <code>redirect_to root_path</code>. I don't now how you build your system but here example how you could implement it: <a href=\"http://habrahabr.ru/post/142128/\" rel=\"nofollow\">link</a> (on Russian, but you can look at code) </p>\n"}], "owner": {"reputation": 105, "user_id": 5343882, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8553f45e98cc20de5f3f8aba33ebf12e?s=128&d=identicon&r=PG&f=1", "display_name": "basania", "link": "https://stackoverflow.com/users/5343882/basania"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 100, "favorite_count": 0, "accepted_answer_id": 32749703, "answer_count": 1, "score": 1, "last_activity_date": 1443043268, "creation_date": 1443034065, "last_edit_date": 1443034992, "question_id": 32747212, "link": "https://stackoverflow.com/questions/32747212/authorization-set-up-for-rails-app-with-vk", "title": "Authorization set up for Rails app with VK", "body": "<p>I have application which works on Rails. I am using devise and omniauth-vkontakte.\nMy app can authorize user with vk.com but after user has passed authorization my navigation menu disappears. \nNavigation menu code is in <code>views/layouts/application.html.erb:</code> <p></p>\n\n<pre><code>&lt;nav class=\"navbar navbar-default navbar-fixed-top\"&gt;\n  &lt;div class=\"container\"&gt;\n    &lt;div class=\"authentication\"&gt;\n      &lt;% if user_signed_in? %&gt;\n          &lt;span&gt;Hello, &lt;%= current_user.email %&gt;&lt;/span&gt;\n          &lt;%= button_to 'Exit', destroy_user_session_path, {:method =&gt; :delete} %&gt;\n\n      &lt;% else %&gt;\n          &lt;%= button_to 'sign up', new_user_registration_path,\n                        {class: 'btn btn-default navbar-btn btn-info', id: 'sign-up-link', :method =&gt; :get} %&gt;\n          &lt;%= button_to 'sign in', new_user_session_path, {class: 'btn btn-default navbar-btn btn-info', id: 'sign-in-btn'} %&gt;\n\n      &lt;% end %&gt;\n    &lt;/div&gt;\n\n  &lt;/div&gt;\n&lt;/nav&gt;\n</code></pre>\n\n<p>And I have one more trouble. How can I do that when user has passed authorization via vkontakte there will be a exit button that redirects to the main page? \nNow it works like this: user passes auth with vkontankte and I have this message:</p>\n\n<pre><code>Users::OmniauthCallbacks#vkontakte\nFind me in app/views/users/omniauth_callbacks/vkontakte.html.haml\n</code></pre>\n\n<p>Code in app/views/users/omniauth_callbacks/vkontakte.haml.html:</p>\n\n<pre><code>%h1 Users::OmniauthCallbacks#vkontakte\n%p Find me in app/views/users/omniauth_callbacks/vkontakte.html.haml\n</code></pre>\n\n<p>Code in app/controllers/users/omniauth_callbacks_controller.rb:</p>\n\n<pre><code>class Users::OmniauthCallbacksController &lt; Devise::OmniauthCallbacksController\n\n  def vkontakte\n  end\n\nend\n</code></pre>\n"}, {"tags": ["ruby", "json", "cucumber"], "comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 1, "creation_date": 1443036874, "post_id": 32747080, "comment_id": 53336715, "body": "<code>Array</code> equality cares about order. e.g. <code>[&#39;a&#39;,&#39;b&#39;,&#39;c&#39;] == [&#39;c&#39;,&#39;b&#39;,&#39;a&#39;] #=&gt; false</code> this is explicitly defined in both <code>==</code> and <code>eql?</code> in the <code>Array</code> Documentation.(Array passes sets like <code>&#39;a&#39;</code> and <code>&#39;c&#39;</code> to determine equality) <code>Hash</code> equality cares that the <code>keys</code> are the same and the values for those keys are the same. (Hash checks the keys and then passes the keys to each to check the values)  So the answer to your question of is there a way is yes but you would have to create it."}], "answers": [{"tags": [], "owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "is_accepted": false, "score": 0, "last_activity_date": 1443035980, "last_edit_date": 1443035980, "creation_date": 1443035629, "answer_id": 32747690, "question_id": 32747080, "link": "https://stackoverflow.com/questions/32747080/is-there-any-way-the-json-comparison-ignores-the-whole-section-misplaced/32747690#32747690", "title": "Is there any way the JSON comparison ignores the whole section misplaced?", "body": "<p>The problem is that hashes and arrays have different ideas of equality. Consider these:</p>\n\n<pre><code>{a:1, b:2} == {a:1, b:2} # =&gt; true\n{a:1, b:2} == {b:2, a:1} # =&gt; true\n\n[1,2] == [1,2] # =&gt; true\n[1,2] == [2,1] # =&gt; false\n</code></pre>\n\n<p>Once the equality check hits the embedded arrays, Ruby sees that the arrays don't match and says so.</p>\n\n<p>It doesn't matter how far into the structure you look, you'll still get the same result unless you can determine on your own that one array is the same as the other. </p>\n"}], "owner": {"reputation": 1208, "user_id": 2723677, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/6e9c72eb622ed29d03101482a7a9a384?s=128&d=identicon&r=PG&f=1", "display_name": "mmar", "link": "https://stackoverflow.com/users/2723677/mmar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 164, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1443035980, "creation_date": 1443033640, "last_edit_date": 1443035338, "question_id": 32747080, "link": "https://stackoverflow.com/questions/32747080/is-there-any-way-the-json-comparison-ignores-the-whole-section-misplaced", "title": "Is there any way the JSON comparison ignores the whole section misplaced?", "body": "<p>I am trying to compare two JSON objects. When a 'key:value' pair order changes, I can use <code>JSON.parse</code>, and during comparison, the test passes like this:</p>\n\n<pre><code>doc1 = '{\n    \"KayA\": \"Value_A\",\n    \"KeyB\": \"value_B\"\n}'\n\ndoc2 = '{\n    \"KeyB\": \"value_B\",\n    \"KayA\": \"Value_A\"\n}'\n\ndoc1 = JSON.parse(doc1)\ndoc2 = JSON.parse(doc2)\n\nexpect(doc1).to eq(doc2) # true\n</code></pre>\n\n<p>But when the order of a section, an array, or a block of content changes, my assertion fails if I do the same comparison logic like below:</p>\n\n<pre><code>doc1 = '{\n    \"keys\": [\n        {\n            \"KayA\": \"Value_A\",\n            \"KeyB\": \"value_B\"\n        },\n        {\n            \"KayC\": \"Value_C\",\n            \"KeyD\": \"value_D\"\n        }\n    ]\n}'\n\ndoc2 = '{\n    \"keys\": [\n        {\n            \"KayC\": \"Value_C\",\n            \"KeyD\": \"value_D\"\n        },\n        {\n            \"KayA\": \"Value_A\",\n            \"KeyB\": \"value_B\"\n        }\n    ]\n}'\n\ndoc1 = JSON.parse(doc1)\ndoc2 = JSON.parse(doc2)\n\nexpect(doc1).to eq(doc2) # false\n</code></pre>\n\n<p>Is there anyway I can compare even if a block changes?</p>\n"}, {"tags": ["ruby", "enumeration"], "comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1443032881, "post_id": 32746066, "comment_id": 53334464, "body": "In future, consider waiting a couple of hours before selecting an answer. You don&#39;t want to discourage other answers. There&#39;s no rush."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 1, "creation_date": 1443033187, "post_id": 32746066, "comment_id": 53334655, "body": "Waste of memory isn&#39;t valid unless it&#39;s going to create an out-of-memory condition since garbage collection will clean it up. A more usable question to me is, which is the fastest way to calculate the <code>max</code> value if you have a huge array. Benchmarks hold the key to that question."}, {"owner": {"reputation": 2056, "user_id": 1838300, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/852556ae4382295d360e311debc5038a?s=128&d=identicon&r=PG", "display_name": "Sajad Rastegar", "link": "https://stackoverflow.com/users/1838300/sajad-rastegar"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1443034382, "post_id": 32746066, "comment_id": 53335261, "body": "@CarySwoveland Sorry, I didn&#39;t know this law. I will consider it the next time."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1443034804, "post_id": 32746066, "comment_id": 53335541, "body": "It&#39;s not a law. Lots of people here believe quick-draw selections are perfectly fine."}], "answers": [{"comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1443030363, "post_id": 32746158, "comment_id": 53332951, "body": "But then you have to recalculate <code>age</code> on the max element. It is a trade off."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 1, "creation_date": 1443030405, "post_id": 32746158, "comment_id": 53332981, "body": "what do you mean, recalculate <code>age</code>? I assume this is a plain field access, not a calculated field. And, as such, it is quite cheap."}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 1, "creation_date": 1443030545, "post_id": 32746158, "comment_id": 53333070, "body": "If you don&#39;t like the term &quot;recalculate&quot;, you can substitute with &quot;re-call&quot;. Whether it is cheap depends on what OP has. It all depends on that. Furthermore, using the Schwarzian-style would be better."}, {"owner": {"reputation": 80721, "user_id": 797049, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5f4f7a23e3d0134123a66015bdc4edd1?s=128&d=identicon&r=PG", "display_name": "Mark Reed", "link": "https://stackoverflow.com/users/797049/mark-reed"}, "edited": false, "score": 1, "creation_date": 1443030599, "post_id": 32746158, "comment_id": 53333107, "body": "I would instead use <code>max_by</code>.  <code>people.max_by(&amp;:age)</code>.  That only calls the method once per item instead of twice per comparison.  Not sure if it does anything different as far as turning an iterator into an array, though."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1443045548, "post_id": 32746158, "comment_id": 53340994, "body": "Sergio, you don&#39;t need to use <code>&lt;=&gt;</code>, as <a href=\"http://ruby-doc.org/core-2.2.0/Enumerable.html#method-i-max\" rel=\"nofollow noreferrer\">Enumerable#max</a> with a block returns the object whose computed block value is largest (using <code>&lt;=&gt;</code>, of course), so <code>people.max { |p| p.age }</code> is enough. Either way, you still need to tack on <code>.age</code> to get the age, of course."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1443079542, "post_id": 32746158, "comment_id": 53350872, "body": "@CarySwoveland: you confused <code>max</code> with <code>max_by</code>. <code>max</code> yields two elements to the block, so you have to do the spaceship. <a href=\"http://pastie.org/10441035\" rel=\"nofollow noreferrer\">pastie.org/10441035</a>"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1443081646, "post_id": 32746158, "comment_id": 53351941, "body": "You&#39;re right (but you know that). Beginner&#39;s mistake."}], "tags": [], "owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "is_accepted": true, "score": 6, "last_activity_date": 1443030730, "last_edit_date": 1443030730, "creation_date": 1443030309, "answer_id": 32746158, "question_id": 32746066, "link": "https://stackoverflow.com/questions/32746066/calling-max-method-on-an-enumerator/32746158#32746158", "title": "Calling max method on an enumerator", "body": "<p>Yes, <code>map</code> creates a temp array. Yes, you can use <code>max</code> directly on an enumerable using its block form</p>\n\n<pre><code>the_eldest_one = people.max { |p1, p2| p1.age &lt;=&gt; p2.age }\n# or\nthe_eldest_one = people.max_by(&amp;:age)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 80721, "user_id": 797049, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5f4f7a23e3d0134123a66015bdc4edd1?s=128&d=identicon&r=PG", "display_name": "Mark Reed", "link": "https://stackoverflow.com/users/797049/mark-reed"}, "edited": false, "score": 0, "creation_date": 1443030926, "post_id": 32746328, "comment_id": 53333294, "body": "needs to be <code>person.age</code>, not just <code>person</code>."}], "tags": [], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "is_accepted": false, "score": 1, "last_activity_date": 1443814789, "last_edit_date": 1443814789, "creation_date": 1443030862, "answer_id": 32746328, "question_id": 32746066, "link": "https://stackoverflow.com/questions/32746066/calling-max-method-on-an-enumerator/32746328#32746328", "title": "Calling max method on an enumerator", "body": "<p>Sergio's answer is great, but as an alternative way:</p>\n\n<p>Yes, it creates a new array. Yes, it is a waste. The way to avoid both creating an intermediate array and also recalculating the value is to do it manually. Assuming max is at least <code>0</code> (which you can change):</p>\n\n<pre><code>people.inject(0){|max, e| _max = e.age; _max &gt; max ? _max : max}\n</code></pre>\n"}], "owner": {"reputation": 2056, "user_id": 1838300, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/852556ae4382295d360e311debc5038a?s=128&d=identicon&r=PG", "display_name": "Sajad Rastegar", "link": "https://stackoverflow.com/users/1838300/sajad-rastegar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 328, "favorite_count": 0, "accepted_answer_id": 32746158, "answer_count": 2, "score": 0, "last_activity_date": 1443814789, "creation_date": 1443030031, "last_edit_date": 1443784316, "question_id": 32746066, "link": "https://stackoverflow.com/questions/32746066/calling-max-method-on-an-enumerator", "title": "Calling max method on an enumerator", "body": "<p>In this code:</p>\n\n<pre><code>people = [ p1, p2, p3 ]\npeople.map { |p| p.age }.max\n</code></pre>\n\n<ul>\n<li>Isn't this code creating an array and then calling <code>max</code> on it?</li>\n<li>Isn't this the waste of memory because of a redundant array\ncreated by <code>map</code> method?</li>\n<li>Couldn't we just call <code>max</code> on any enumerators and compute\nthe maximum on the fly?</li>\n</ul>\n"}, {"tags": ["ruby", "webrick"], "owner": {"reputation": 39282, "user_id": 336920, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/6e2dbeb23d3fc6552a6e26800ed63289?s=128&d=identicon&r=PG", "display_name": "B Seven", "link": "https://stackoverflow.com/users/336920/b-seven"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 88, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1443029512, "creation_date": 1443029512, "question_id": 32745906, "link": "https://stackoverflow.com/questions/32745906/how-to-configure-webrick-error-handling", "title": "How to configure WEBrick error handling?", "body": "<pre><code>@server = WEBrick::HTTPServer.new( config )    \n\n@server.mount_proc '/' do | req, res |\n  ...\nend\n\nfork do\n  @server.start\nend\n</code></pre>\n\n<p>The default error handling returns the error in the body of a 500 response.</p>\n\n<p>What is a good way to log exceptions instead of returning them in the body of the response?</p>\n"}, {"tags": ["ruby", "string", "sorting", "integer"], "comments": [{"owner": {"reputation": 48635, "user_id": 6742, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/xPawo.png?s=128&g=1", "display_name": "David Aldridge", "link": "https://stackoverflow.com/users/6742/david-aldridge"}, "edited": false, "score": 1, "creation_date": 1443028782, "post_id": 32745629, "comment_id": 53332108, "body": "Within each value you can use split on &quot;.&quot; to convert them to arrays, and map to convert to integers, and an array of arrays of integers will sort in the way you require."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1443031100, "post_id": 32745629, "comment_id": 53333391, "body": "Yes, it&#39;s a duplicate. I see @SergioTulentsev had a great answer."}, {"owner": {"reputation": 929, "user_id": 3776156, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/4cc452b37dfefdadb36828b05cee9612?s=128&d=identicon&r=PG&f=1", "display_name": "TwiceB", "link": "https://stackoverflow.com/users/3776156/twiceb"}, "edited": false, "score": 0, "creation_date": 1443033737, "post_id": 32745629, "comment_id": 53334924, "body": "The only thing different about this question is that the number of decimal points isn&#39;t guaranteed.  But the answer to the other question is the same and doesn&#39;t limit based on &quot;#.#.#&quot; format."}], "answers": [{"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1443035516, "post_id": 32745704, "comment_id": 53335942, "body": "Nice. No require needed. Your answer illustrates a weakness of closing questions that are identified as duplicates: it can prevent new, novel solutions from being seen. Sure, you could post your solution as an answer to the original question, but who&#39;s going to see it?"}], "tags": [], "owner": {"reputation": 37807, "user_id": 293686, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/1426a9fd5267e73d9e30ebaac1bde144?s=128&d=identicon&r=PG", "display_name": "Maur&#237;cio Linhares", "link": "https://stackoverflow.com/users/293686/maur%c3%adcio-linhares"}, "is_accepted": false, "score": 6, "last_activity_date": 1443029731, "last_edit_date": 1443029731, "creation_date": 1443028851, "answer_id": 32745704, "question_id": 32745629, "link": "https://stackoverflow.com/questions/32745629/sorting-a-string-of-id-values-numerically/32745704#32745704", "title": "Sorting a string of ID values numerically", "body": "<p>You can use rubygems version comparison for that:</p>\n\n<pre><code>x = [\"1.2\", \"1.1\", \"1.18\", \"1.18.3\", \"1.4\", \"1.18.20\", \"2.5\"]\nx.sort_by { |i| Gem::Version.new(i) }\n# =&gt; [\"1.1\", \"1.2\", \"1.4\", \"1.18\", \"1.18.3\", \"1.18.20\", \"2.5\"] \n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1443029929, "post_id": 32745734, "comment_id": 53332711, "body": "Cary&#39;s answer, which is similar to this, is superior in three respects: 1) You can avoid assigning a local variable by method chaining 2) You don&#39;t need a regex to split; a string is sufficient 3) You don&#39;t need to convert to a float; converting to integer is sufficient. But, as of now, please do not edit your answer to reflect this since that would make your answer only a duplicate of Cary&#39;s (Using <code>&amp;</code> with <code>Symbol#to_proc</code> is a matter of preference)."}, {"owner": {"reputation": 953, "user_id": 1993536, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/17a3a074b629368c391549294af55654?s=128&d=identicon&r=PG", "display_name": "izaban", "link": "https://stackoverflow.com/users/1993536/izaban"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 1, "creation_date": 1443030789, "post_id": 32745734, "comment_id": 53333213, "body": "@sawa Yes, I decided not to edit it for the same reason."}], "tags": [], "owner": {"reputation": 953, "user_id": 1993536, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/17a3a074b629368c391549294af55654?s=128&d=identicon&r=PG", "display_name": "izaban", "link": "https://stackoverflow.com/users/1993536/izaban"}, "is_accepted": false, "score": 1, "last_activity_date": 1443029706, "last_edit_date": 1443029706, "creation_date": 1443028947, "answer_id": 32745734, "question_id": 32745629, "link": "https://stackoverflow.com/questions/32745629/sorting-a-string-of-id-values-numerically/32745734#32745734", "title": "Sorting a string of ID values numerically", "body": "<p>You can use something like this:</p>\n\n<pre><code>x.sort_by { |n|\n  numbers = n.split(/\\./)\n  numbers.map { |a| a.to_f }\n}\n# =&gt; [\"1.1\", \"1.2\", \"1.4\", \"1.18\", \"1.18.3\", \"1.18.20\", \"2.5\"]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": true, "score": 3, "last_activity_date": 1443033752, "last_edit_date": 1443033752, "creation_date": 1443028990, "answer_id": 32745746, "question_id": 32745629, "link": "https://stackoverflow.com/questions/32745629/sorting-a-string-of-id-values-numerically/32745746#32745746", "title": "Sorting a string of ID values numerically", "body": "<pre><code>x.sort_by { |s| s.split('.').map(&amp;:to_i) }\n  #=&gt; [\"1.1\", \"1.2\", \"1.4\", \"1.18\", \"1.18.3\", \"1.18.20\", \"2.5\"]\n</code></pre>\n\n<p>This sorts like so:</p>\n\n<pre><code>[[1,1], [1,2], [1,4], [1,18,3], [1,18,20], [2,5]].sort\n  #=&gt; [[1, 1], [1, 2], [1, 4], [1, 18, 3], [1, 18, 20], [2, 5]]\n</code></pre>\n\n<p>See <a href=\"http://ruby-doc.org/core-2.2.0/Array.html#method-i-3C-3D-3E\" rel=\"nofollow\">Array#&lt;=></a> for an explanation of the result of the sort.</p>\n"}], "owner": {"reputation": 929, "user_id": 3776156, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/4cc452b37dfefdadb36828b05cee9612?s=128&d=identicon&r=PG&f=1", "display_name": "TwiceB", "link": "https://stackoverflow.com/users/3776156/twiceb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 235, "favorite_count": 0, "closed_date": 1443029896, "accepted_answer_id": 32745746, "answer_count": 3, "score": 2, "last_activity_date": 1443033752, "creation_date": 1443028549, "question_id": 32745629, "link": "https://stackoverflow.com/questions/32745629/sorting-a-string-of-id-values-numerically", "closed_reason": "Duplicate", "title": "Sorting a string of ID values numerically", "body": "<p>I have the following array of strings:</p>\n\n<pre><code>x = [\"1.2\", \"1.1\", \"1.18\", \"1.18.3\", \"1.4\", \"1.18.20\", \"2.5\"]\n</code></pre>\n\n<p>Ruby's Array sort method is sorting the strings alphabetically which results in this:</p>\n\n<pre><code>[\n[0] \"1.1\",\n[1] \"1.18\",\n[2] \"1.18.20\",\n[3] \"1.18.3\",\n[4] \"1.2\",\n[5] \"1.4\",\n[6] \"2.5\",\n]\n</code></pre>\n\n<p>I'd like to sort this array based on the numerical value within each decimal so that it returns the following order:</p>\n\n<pre><code>[\n[0] \"1.1\",\n[1] \"1.2\",\n[2] \"1.4\",\n[3] \"1.18\",\n[4] \"1.18.3\",\n[5] \"1.18.20\",\n[6] \"2.5\"\n]\n</code></pre>\n\n<p>I also can't guarantee the number of decimal points within each \"ID\".\nAny help would be greatly appreciated.  Thanks!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "spree"], "comments": [{"owner": {"reputation": 3614, "user_id": 1569930, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/7bc43a689388dd4697947ffe8f4c9dcd?s=128&d=identicon&r=PG", "display_name": "eirikir", "link": "https://stackoverflow.com/users/1569930/eirikir"}, "edited": false, "score": 0, "creation_date": 1443032592, "post_id": 32745536, "comment_id": 53334307, "body": "Can you add the controller code where the attributes would be assigned?"}, {"owner": {"reputation": 115, "user_id": 1633526, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5ebd1b3ab89e0a02e4c0260143aa544?s=128&d=identicon&r=PG", "display_name": "targaf", "link": "https://stackoverflow.com/users/1633526/targaf"}, "reply_to_user": {"reputation": 3614, "user_id": 1569930, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/7bc43a689388dd4697947ffe8f4c9dcd?s=128&d=identicon&r=PG", "display_name": "eirikir", "link": "https://stackoverflow.com/users/1569930/eirikir"}, "edited": false, "score": 0, "creation_date": 1443033909, "post_id": 32745536, "comment_id": 53335014, "body": "@eirkir it&#39;s a bit complicated as it&#39;s in the spree codebase but I&#39;ll go ahead and edit in what I think (could be wrong)  you&#39;re asking for."}, {"owner": {"user_type": "does_not_exist", "display_name": "user5376495"}, "edited": false, "score": 0, "creation_date": 1521115560, "post_id": 32745536, "comment_id": 85599697, "body": "How did you added your custom_attribute? Can you explain? I am facing same issue"}], "answers": [{"tags": [], "owner": {"reputation": 1323, "user_id": 2908330, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/Q3BG7.png?s=128&g=1", "display_name": "soltex", "link": "https://stackoverflow.com/users/2908330/soltex"}, "is_accepted": true, "score": 1, "last_activity_date": 1443268962, "last_edit_date": 1443268962, "creation_date": 1443033170, "answer_id": 32746964, "question_id": 32745536, "link": "https://stackoverflow.com/questions/32745536/saving-custom-attribute-to-order-model-in-spree-ecommerce/32746964#32746964", "title": "Saving custom attribute to Order model in Spree eCommerce", "body": "<p>I will give you an example, maybe you can translate it into your code.\n<hr> <strong>OPTIONAL</strong></p>\n\n<p>Imagine that I have a custom action, called <code>\"custom\"</code> on my <code>users</code> controller, defined this way in my routes:</p>\n\n<pre><code>resources :users do\n  collection do\n    get 'custom'\n    post 'custom'\n  end\nend\n</code></pre>\n\n<p>This way I can call it by using <strong>custom_users_path</strong>.</p>\n\n<p>Next, I want a form that submits to that function, to do that you need to specify an <strong>additional parameter in your form_for called :url</strong>, in this example I call it using <code>custom_users_path</code>, once I submit the form, It will run my custom action.</p>\n\n<p><strong>form_for would look like this:</strong></p>\n\n<pre><code>&lt;%= form_for :user, :url  =&gt; custom_users_path do |f| %&gt;\n  &lt;%= f.text_field :random %&gt;\n  &lt;%= f.submit \"Submit\" %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p><hr>\nThen, I want to be able to access some <code>:random parameter</code> in my users controller. Let's suppose that I have a text_field which I want store the value on my <code>:random parameter</code> (see above). First, you need to permit that parameter to be accessible in your controller, in this example, in users controller. This way:</p>\n\n<pre><code>params.require(:user).permit(YOUR PARAMETER HERE, {:random =&gt; []})\n</code></pre>\n\n<p>So, every time I submit the form, I can access the <code>:submit parameter</code> value, by doing this <code>params[\"controller-name\"][\"parameter-name\"]</code>, translated into this example, would look like: </p>\n\n<pre><code>params[\"user\"][\"random\"]\n</code></pre>\n\n<p>You can then convert it into string using to_s if you want.</p>\n\n<p><strong>Output</strong> (Supposing that I wrote \"444\" on my text_field):</p>\n\n<pre><code>444\n</code></pre>\n\n<p>I hope this helps you.</p>\n"}], "owner": {"reputation": 115, "user_id": 1633526, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5ebd1b3ab89e0a02e4c0260143aa544?s=128&d=identicon&r=PG", "display_name": "targaf", "link": "https://stackoverflow.com/users/1633526/targaf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 862, "favorite_count": 1, "accepted_answer_id": 32746964, "answer_count": 1, "score": 2, "last_activity_date": 1443268962, "creation_date": 1443028225, "last_edit_date": 1443108442, "question_id": 32745536, "link": "https://stackoverflow.com/questions/32745536/saving-custom-attribute-to-order-model-in-spree-ecommerce", "title": "Saving custom attribute to Order model in Spree eCommerce", "body": "<p>I have added a custom field in my spree_orders table (let's call it <code>custom_attribute</code>).</p>\n\n<p>I have added <code>Spree::PermittedAttributes.checkout_attributes &lt;&lt; [:custom_attribute]</code> to my spree.rb initializer.</p>\n\n<p>In my checkout process I have a custom form with the following code (html formatting has been removed):</p>\n\n<pre><code>&lt;%= form_for @order do |alt_form| %&gt;\n      &lt;%= alt_form.label :custom_attribute, \"Custom Attribute\" %&gt;&lt;span class=\"required\"&gt;*&lt;/span&gt;&lt;br /&gt;\n      &lt;%= alt_form.text_field :custom_attribute, :class =&gt; 'form-control required', maxlength: 11 %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>This form successfully submits the field in the post request (full dump below) to <a href=\"http://localhost:3000/checkout/update/address\" rel=\"nofollow\">http://localhost:3000/checkout/update/address</a> as <code>order[custom_attribute] xyz</code>, however, the information is not saved to the model.</p>\n\n<pre><code>_method=patch\n_method=patch\nauthenticity_token=Y+ATRotWKfI57f+b0/YGwIw9Bg6mADHBDmeEOHYzLPnB6Vbydya4ITDTopcX65EG+TiL7bwyJKQPpBU9bQTaUg==\nauthenticity_token=Y+ATRotWKfI57f+b0/YGwIw9Bg6mADHBDmeEOHYzLPnB6Vbydya4ITDTopcX65EG+TiL7bwyJKQPpBU9bQTaUg==\ncommit=Save and Continue\norder[bill_address_attributes][address1]=123 Test\norder[bill_address_attributes][address2]=\norder[bill_address_attributes][city]=Test\norder[bill_address_attributes][country_id]=232\norder[bill_address_attributes][firstname]=Test\norder[bill_address_attributes][id]=3\norder[bill_address_attributes][lastname]=Test\norder[bill_address_attributes][phone]=555555555\norder[bill_address_attributes][state_id]=3535\norder[bill_address_attributes][zipcode]=30024\norder[email]=spree@example.com\norder[custom_attribute]=2414\norder[state_lock_version]=32\nutf8=\u2713\nutf8=\u2713\n</code></pre>\n\n<p><strong>I've inserted @order.inspect on the following (payment) page to can see at that point that @order.custom_attribute is still nil.</strong></p>\n\n<p>Does anyone have any idea about what I need to do in order to get the <code>custom_attribute</code> value sent in the post request saved to the model with the other attributes sent?</p>\n\n<p>-------------------edit-------------------</p>\n\n<p>Default spree permitted attributes are defined here <a href=\"https://github.com/spree/spree/blob/3-0-stable/core/lib/spree/core/controller_helpers/strong_parameters.rb\" rel=\"nofollow\">https://github.com/spree/spree/blob/3-0-stable/core/lib/spree/core/controller_helpers/strong_parameters.rb</a> and are added on by the <code>strong_paramaters</code> helper here (don't have the rep to post a third link):</p>\n\n<pre><code>module Spree\n  module Core\n    module ControllerHelpers\n      module StrongParameters\n        def permitted_attributes\n          Spree::PermittedAttributes\n        end\n\n        delegate *Spree::PermittedAttributes::ATTRIBUTES,\n                 to: :permitted_attributes,\n                 prefix: :permitted\n\n        def permitted_payment_attributes\n          permitted_attributes.payment_attributes + [\n            source_attributes: permitted_source_attributes\n          ]\n        end\n\n        def permitted_checkout_attributes\n          permitted_attributes.checkout_attributes + [\n            bill_address_attributes: permitted_address_attributes,\n            ship_address_attributes: permitted_address_attributes,\n            payments_attributes: permitted_payment_attributes,\n            shipments_attributes: permitted_shipment_attributes\n          ]\n        end\n\n        def permitted_order_attributes\n          permitted_checkout_attributes + [\n            line_items_attributes: permitted_line_item_attributes\n          ]\n        end\n\n        def permitted_product_attributes\n          permitted_attributes.product_attributes + [\n            product_properties_attributes: permitted_product_properties_attributes\n          ]\n        end\n      end\n    end\n  end\nend\n</code></pre>\n\n<p>which can be at found <code>spree/core/lib/spree/core/controller_helpers/strong_parameters.rb</code> in the spree github repo.</p>\n\n<p>-------------------final edit-------------------\nIf anyone finds this in the future and is trying to troubleshoot a similar issue, my code above is actually correct; I had (stupidly) placed it in an <code>if Rails.env.production?</code> block.</p>\n"}, {"tags": ["ruby", "game-physics", "libgosu"], "owner": {"reputation": 1961, "user_id": 1308979, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/899f97295621824a5f482a286f5062ca?s=128&d=identicon&r=PG", "display_name": "jeremywoertink", "link": "https://stackoverflow.com/users/1308979/jeremywoertink"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 79, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1485799866, "creation_date": 1443025657, "last_edit_date": 1485799866, "question_id": 32744804, "link": "https://stackoverflow.com/questions/32744804/choppy-movement-with-ruby-gosu-and-chingu", "title": "Choppy movement with ruby Gosu and Chingu", "body": "<p>I'm doing a tile based RPG type game where the tiles (including the characters) are all <code>50x50</code>. I haven't used chingu before, but taking a look at the docs, I have this:</p>\n\n<pre><code>class Player &lt; Chingu::GameObject\n  def initialize(options)\n  end\n  def move_left\n    @x -= 50\n  end\n  def move_right\n    @x += 50\n  end\n end\n class Game &lt; Chingu::Window\n   def initialize\n     super\n     @player = Player.create\n     @player.input = {:left =&gt; :move_left, :right =&gt; :move_right}\n   end\n end\n</code></pre>\n\n<p>Using this movement there's no fluidity between steps. Now, doing the standard <code>while key_down?(:left); move_left; end</code> type deal, and then just moving the character at smaller intervals makes it smooth, but the issue ends up being that the character is able to stop between grid lines (if that makes sense). </p>\n\n<p>It seems the <code>move_left</code> and <code>move_right</code> need to return the value of <code>@x</code>, so doing recursion inside that method doesn't work. Anyone have any ideas, or should I just not use chingu and try and figure out the logic inside the <code>draw</code> method?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "wordpress", "rubypress"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1443024680, "post_id": 32744366, "comment_id": 53329818, "body": "The &quot;in a script&quot; part pertains to non-Rails operation as far as I can tell."}], "answers": [{"comments": [{"owner": {"reputation": 16402, "user_id": 4025095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/blJ4L.jpg?s=128&g=1", "display_name": "Myst", "link": "https://stackoverflow.com/users/4025095/myst"}, "edited": false, "score": 0, "creation_date": 1443028010, "post_id": 32745044, "comment_id": 53331735, "body": "Rails uses <code>bundler</code> which reads the gems files and handles the environment for you, auto-requiring any gems in the gem file... So, <code>bundler</code> is the one doing the heavy lifting for you - Just to give credit where credit is due ;-)"}, {"owner": {"reputation": 9921, "user_id": 488195, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/aa1e7477ba2f6c0ec47ed521f1cf1676?s=128&d=identicon&r=PG", "display_name": "dgilperez", "link": "https://stackoverflow.com/users/488195/dgilperez"}, "reply_to_user": {"reputation": 16402, "user_id": 4025095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/blJ4L.jpg?s=128&g=1", "display_name": "Myst", "link": "https://stackoverflow.com/users/4025095/myst"}, "edited": false, "score": 0, "creation_date": 1443030408, "post_id": 32745044, "comment_id": 53332983, "body": "Thanks for that @Myst :)"}], "tags": [], "owner": {"reputation": 9921, "user_id": 488195, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/aa1e7477ba2f6c0ec47ed521f1cf1676?s=128&d=identicon&r=PG", "display_name": "dgilperez", "link": "https://stackoverflow.com/users/488195/dgilperez"}, "is_accepted": false, "score": 3, "last_activity_date": 1443030460, "last_edit_date": 1443030460, "creation_date": 1443026598, "answer_id": 32745044, "question_id": 32744366, "link": "https://stackoverflow.com/questions/32744366/installing-rubypress/32745044#32745044", "title": "Installing RubyPress", "body": "<p>If you are on a Rails project: </p>\n\n<ol>\n<li>Add <code>gem 'rubypress'</code> to your Gemfile.</li>\n<li>Run <code>bundle install</code>.</li>\n<li>It should be auto-required and no <code>require</code> should be needed. Use it. </li>\n</ol>\n\n<p>The <code>require</code> statement is intended for external usage only (non-Rails).</p>\n"}, {"comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1443027764, "post_id": 32745132, "comment_id": 53331590, "body": "Welcome to Stack Overflow. Please look at how you&#39;ve formatted your answer and compare it to the common look. Instead of using headers to mark sections, it&#39;s standard to format in a more familiar, less formal style. Also, on Stack Overflow we don&#39;t use salutations, valedictions or signatures (your &quot;<code>~POS</code>&quot;). Also, comments are more for incidental information, if the OP has additional questions those should be asked in a separate question rather than a continuous stream of comments."}, {"owner": {"reputation": 27, "user_id": 5318808, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ff8fa8ef16afc4dd12ca4334c1c59392?s=128&d=identicon&r=PG&f=1", "display_name": "G.Pigna", "link": "https://stackoverflow.com/users/5318808/g-pigna"}, "edited": false, "score": 0, "creation_date": 1443037451, "post_id": 32745132, "comment_id": 53337021, "body": "Thanks, I already did that, and think that is working. Now I&#39;m trying &quot;pull&#39; or &quot;get&quot; the posts that I make on WP to the my app and then I&#39;ll see if it is working. Thanks again!"}], "tags": [], "owner": {"reputation": 16, "user_id": 5368601, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Id2r9.png?s=128&g=1", "display_name": "PotatoOmeletteSandwich", "link": "https://stackoverflow.com/users/5368601/potatoomelettesandwich"}, "is_accepted": true, "score": 0, "last_activity_date": 1443026911, "creation_date": 1443026911, "answer_id": 32745132, "question_id": 32744366, "link": "https://stackoverflow.com/questions/32744366/installing-rubypress/32745132#32745132", "title": "Installing RubyPress", "body": "<p>Ruby on Rails' goal is to be as simple as possible coming out of the box. I have no indication of how far along into the process you are, so I'll start from the beginning.</p>\n\n<p>To be a little more explicit on zachfeldman's instructions:</p>\n\n<h1>Checking Your Install:</h1>\n\n<h2>Installing <code>rubypress</code></h2>\n\n<p>In a terminal/command line shell, type <code>gem install rubypress</code>. This will either work, or it will fail. If you get something like <code>gem: Command not found.</code> it means you don't have gem, or maybe even ruby installed. You will need to go to <a href=\"https://rubygems.org/pages/download\" rel=\"nofollow\">https://rubygems.org/pages/download</a> and go from there.</p>\n\n<p>If you get back <code>ERROR:  could not find gem rubypress locally or in a repository</code> check your spelling, then your internet settings.</p>\n\n<p>Otherwise, rubypress should install nicely.</p>\n\n<h2>Adding <code>rubypress</code> to your bundler</h2>\n\n<p>In your <code>[path to your app]/gemfile</code> add the line: <code>gem 'rubypress'</code>. This should allow you to now access the gem from anywhere inside of your ruby application. If this doesn't exist, you'll need to build a ruby app.</p>\n\n<h2>Inside a Script</h2>\n\n<p>Anywhere you want to use <code>rubypress</code>, likely a lot of places, you simply add <code>require 'rubypress'</code> to the top of the file, and that should help you get the rubypress functions you need.</p>\n\n<p>Feel free to comment on where you get stuck, I'll help you walk through. The more details, the better.</p>\n\n<p>~POS</p>\n"}], "owner": {"reputation": 27, "user_id": 5318808, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ff8fa8ef16afc4dd12ca4334c1c59392?s=128&d=identicon&r=PG&f=1", "display_name": "G.Pigna", "link": "https://stackoverflow.com/users/5318808/g-pigna"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 88, "favorite_count": 1, "accepted_answer_id": 32745132, "answer_count": 2, "score": 2, "last_activity_date": 1443030460, "creation_date": 1443024170, "last_edit_date": 1443027569, "question_id": 32744366, "link": "https://stackoverflow.com/questions/32744366/installing-rubypress", "title": "Installing RubyPress", "body": "<p>I want to use RubyPress in my project. I've been reading <a href=\"https://github.com/zachfeldman/rubypress\" rel=\"nofollow\">the documentation</a>, and it says that I need to:</p>\n\n<ol>\n<li>Install the gem using <code>gem install rubypress</code>.</li>\n<li>Add \"rubypress\" to my gem file.</li>\n<li>In a script <code>require 'rubypress'</code>.</li>\n</ol>\n\n<p>I am not sure where to add <code>require 'rubypress'</code>, also I do not know if by doing the installation it should make a class or if I have to create one class and then continue with the process.</p>\n\n<p>I need it so that a user can make or edit the posts on WordPress and then the posts can be viewed on my website.</p>\n\n<p>I hope that someone can help me with that.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "omniauth"], "comments": [{"owner": {"reputation": 5440, "user_id": 3808414, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6f9882891a8f249b632abcc63f589f4f?s=128&d=identicon&r=PG", "display_name": "JeffD23", "link": "https://stackoverflow.com/users/3808414/jeffd23"}, "edited": false, "score": 0, "creation_date": 1443024722, "post_id": 32744286, "comment_id": 53329845, "body": "Are you having the issue with both Google and Github, or just one of them?"}, {"owner": {"reputation": 51, "user_id": 5270648, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f9fb8c76106c970ff33f8be127bf2f3f?s=128&d=identicon&r=PG&f=1", "display_name": "retrograde", "link": "https://stackoverflow.com/users/5270648/retrograde"}, "reply_to_user": {"reputation": 5440, "user_id": 3808414, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6f9882891a8f249b632abcc63f589f4f?s=128&d=identicon&r=PG", "display_name": "JeffD23", "link": "https://stackoverflow.com/users/3808414/jeffd23"}, "edited": false, "score": 0, "creation_date": 1443027815, "post_id": 32744286, "comment_id": 53331617, "body": "Github, because some people choose not to show emails publicly"}, {"owner": {"reputation": 5440, "user_id": 3808414, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6f9882891a8f249b632abcc63f589f4f?s=128&d=identicon&r=PG", "display_name": "JeffD23", "link": "https://stackoverflow.com/users/3808414/jeffd23"}, "edited": false, "score": 1, "creation_date": 1443029521, "post_id": 32744286, "comment_id": 53332492, "body": "Maybe requesting a specific scope in config/devise.rb will help. This is required for Facebook, but not sure about github.    config.omniauth :github, &quot;API KEYS&quot;,  scope: &#39;user&#39;"}, {"owner": {"reputation": 51, "user_id": 5270648, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f9fb8c76106c970ff33f8be127bf2f3f?s=128&d=identicon&r=PG&f=1", "display_name": "retrograde", "link": "https://stackoverflow.com/users/5270648/retrograde"}, "reply_to_user": {"reputation": 5440, "user_id": 3808414, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6f9882891a8f249b632abcc63f589f4f?s=128&d=identicon&r=PG", "display_name": "JeffD23", "link": "https://stackoverflow.com/users/3808414/jeffd23"}, "edited": false, "score": 0, "creation_date": 1443029870, "post_id": 32744286, "comment_id": 53332675, "body": "Yep, that did the trick Jeff! Thx very much"}, {"owner": {"reputation": 5440, "user_id": 3808414, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6f9882891a8f249b632abcc63f589f4f?s=128&d=identicon&r=PG", "display_name": "JeffD23", "link": "https://stackoverflow.com/users/3808414/jeffd23"}, "edited": false, "score": 0, "creation_date": 1443029948, "post_id": 32744286, "comment_id": 53332724, "body": "Sweet, I&#39;ll add that as the answer as well"}], "answers": [{"tags": [], "owner": {"reputation": 5440, "user_id": 3808414, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6f9882891a8f249b632abcc63f589f4f?s=128&d=identicon&r=PG", "display_name": "JeffD23", "link": "https://stackoverflow.com/users/3808414/jeffd23"}, "is_accepted": true, "score": 1, "last_activity_date": 1443030114, "creation_date": 1443030114, "answer_id": 32746093, "question_id": 32744286, "link": "https://stackoverflow.com/questions/32744286/how-can-i-view-users-personal-data-with-omniauth/32746093#32746093", "title": "How can I view user&#39;s personal data with omniauth?", "body": "<p>You will need to request a specific scope on your GitHub omniauth configuration. </p>\n\n<p><strong>config/initializers/devise.rb</strong></p>\n\n<pre><code>config.omniauth :github, 'YOUR_API_KEYS', scope: 'user'\n</code></pre>\n"}], "owner": {"reputation": 51, "user_id": 5270648, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f9fb8c76106c970ff33f8be127bf2f3f?s=128&d=identicon&r=PG&f=1", "display_name": "retrograde", "link": "https://stackoverflow.com/users/5270648/retrograde"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 196, "favorite_count": 1, "accepted_answer_id": 32746093, "answer_count": 1, "score": 2, "last_activity_date": 1443030114, "creation_date": 1443023959, "question_id": 32744286, "link": "https://stackoverflow.com/questions/32744286/how-can-i-view-users-personal-data-with-omniauth", "title": "How can I view user&#39;s personal data with omniauth?", "body": "<p>I want to view a user's personal data with the gem Omniauth with Ruby on Rails. Right now, I can only view public data. I get an error email can't be blank because I can only access public data, rather than personal user data.  All answers are appreciated. Here's the code for my application:</p>\n\n<pre><code>#identity.rb\n\nclass Identity &lt; ActiveRecord::Base\n belongs_to :user\n validates_presence_of :uid, :provider\n validates_uniqueness_of :uid, :scope =&gt; :provider\n\n def self.find_for_oauth(auth)\n   find_or_create_by(uid: auth.uid, provider: auth.provider)\n end\n\nend\n\n#user.rb\n\n\n      def self.find_for_oauth(auth, signed_in_resource = nil)\nidentity = Identity.find_for_oauth(auth)\nuser = signed_in_resource ? signed_in_resource : identity.user\nif user.nil?\n\n  email = auth.info.email\n  user = User.where(:email =&gt; email).first if email\n\n  # Create the user if it's a new registration\n  if user.nil?\n    user = User.new(\n      full_name: auth.info.name,\n      username: 'User'+auth.uid,\n      email: auth.info.email,\n      password: auth.uid\n    )\n    user.skip_confirmation!\n    user.save!\n   end \nend\n\n\nif identity.user != user\n  identity.user = user\n  identity.save!\nend\nuser\n end\n\n#omniauth_callbacks_controller.rb\n\n\n     def self.provides_callback_for(provider)\nclass_eval %Q{\n  def #{provider}\n    @user = User.find_for_oauth(env[\"omniauth.auth\"], current_user)\n\n    if @user.persisted?\n      sign_in_and_redirect @user, event: :authentication\n      set_flash_message(:notice, :success, kind: \"#{provider}\".capitalize) if is_navigational_format?\n    else\n      session[\"devise.#{provider}_data\"] = env[\"omniauth.auth\"]\n      redirect_to new_user_registration_url\n    end\n  end\n}\n end\n\n[:github, :google_oauth2].each do |provider|\nprovides_callback_for provider\n end\n</code></pre>\n"}, {"tags": ["arrays", "ruby"], "comments": [{"owner": {"reputation": 7525, "user_id": 1805902, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/0W7rW.png?s=128&g=1", "display_name": "pangpang", "link": "https://stackoverflow.com/users/1805902/pangpang"}, "edited": false, "score": 0, "creation_date": 1443023266, "post_id": 32743798, "comment_id": 53328848, "body": "you just need to let <code>num_slice = debug_context ? big_array.length  : 10 </code>"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1443024145, "post_id": 32743798, "comment_id": 53329473, "body": "What does <code>debug_context?</code> here represent? Ruby generally discourages &quot;debugging&quot; modes and leans heavily towards writing well-defined unit tests that exercise behaviour in a number of ways to expose bugs before you need to debug them."}, {"owner": {"reputation": 10377, "user_id": 2832282, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ZJ4WG.jpg?s=128&g=1", "display_name": "Cyril Duchon-Doris", "link": "https://stackoverflow.com/users/2832282/cyril-duchon-doris"}, "edited": false, "score": 0, "creation_date": 1443024558, "post_id": 32743798, "comment_id": 53329743, "body": "Sorry, <code>debug_context?</code> was actually a random name for a boolean method. In my code, I&#39;m actually using <code>Rails.env.production?</code>. Renamed."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1443036571, "post_id": 32743798, "comment_id": 53336529, "body": "Taken literally, <code>some_boolean_test?</code> is an undefined method, suggesting you meant it as a stand-in. A stand-in for what? There are no other methods in <code>MyModule</code> and <code>Foo</code> has only <code>a_method</code>."}, {"owner": {"reputation": 10377, "user_id": 2832282, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ZJ4WG.jpg?s=128&g=1", "display_name": "Cyril Duchon-Doris", "link": "https://stackoverflow.com/users/2832282/cyril-duchon-doris"}, "edited": false, "score": 0, "creation_date": 1443038667, "post_id": 32743798, "comment_id": 53337702, "body": "<code>some_boolean_test_we_dont_care_about</code> was a bit too long to write ^^&quot;"}], "answers": [{"comments": [{"owner": {"reputation": 10377, "user_id": 2832282, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ZJ4WG.jpg?s=128&g=1", "display_name": "Cyril Duchon-Doris", "link": "https://stackoverflow.com/users/2832282/cyril-duchon-doris"}, "edited": false, "score": 0, "creation_date": 1443024690, "post_id": 32744072, "comment_id": 53329823, "body": "The size of a is not known beforehand. And I was hping to define this <code>num_slice</code> variable in a different code block which does not have access to the array"}, {"owner": {"reputation": 2317, "user_id": 5314268, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/dc78ae9c49596635d47303e28831c2fd?s=128&d=identicon&r=PG&f=1", "display_name": "madcow", "link": "https://stackoverflow.com/users/5314268/madcow"}, "edited": false, "score": 0, "creation_date": 1443025133, "post_id": 32744072, "comment_id": 53330112, "body": "Then set it to <code>a.count</code> ?"}, {"owner": {"reputation": 10377, "user_id": 2832282, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ZJ4WG.jpg?s=128&g=1", "display_name": "Cyril Duchon-Doris", "link": "https://stackoverflow.com/users/2832282/cyril-duchon-doris"}, "edited": false, "score": 0, "creation_date": 1443025366, "post_id": 32744072, "comment_id": 53330241, "body": "I edited my question. num_slice is defined in a different module, and doesn&#39;t have access to <code>a</code>"}, {"owner": {"reputation": 16076, "user_id": 802618, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6111449042dd940f360673d25d61ea6b?s=128&d=identicon&r=PG", "display_name": "Kristj&#225;n", "link": "https://stackoverflow.com/users/802618/kristj%c3%a1n"}, "reply_to_user": {"reputation": 10377, "user_id": 2832282, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ZJ4WG.jpg?s=128&g=1", "display_name": "Cyril Duchon-Doris", "link": "https://stackoverflow.com/users/2832282/cyril-duchon-doris"}, "edited": false, "score": 0, "creation_date": 1443030925, "post_id": 32744072, "comment_id": 53333293, "body": "@CyrilDD The design constraints you&#39;re putting on yourself seem sort of arbitrary, but I don&#39;t have all the context. Hope this new answer helps."}, {"owner": {"reputation": 10377, "user_id": 2832282, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ZJ4WG.jpg?s=128&g=1", "display_name": "Cyril Duchon-Doris", "link": "https://stackoverflow.com/users/2832282/cyril-duchon-doris"}, "edited": false, "score": 0, "creation_date": 1443035071, "post_id": 32744072, "comment_id": 53335699, "body": "Thank you, I had tried some stuff on my own and reached something quite similar to what you wrote."}], "tags": [], "owner": {"reputation": 16076, "user_id": 802618, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6111449042dd940f360673d25d61ea6b?s=128&d=identicon&r=PG", "display_name": "Kristj&#225;n", "link": "https://stackoverflow.com/users/802618/kristj%c3%a1n"}, "is_accepted": true, "score": 4, "last_activity_date": 1443030870, "last_edit_date": 1443030870, "creation_date": 1443023329, "answer_id": 32744072, "question_id": 32743798, "link": "https://stackoverflow.com/questions/32743798/each-slice-or-keep-the-full-array/32744072#32744072", "title": "Each slice or keep the full array", "body": "<p>I'd first caution against significant logic differences between environments, since either one branch is less tested or you have twice the code to maintain. But assuming good reasons for the way you're doing it, here are some options:</p>\n\n<h3>Pass the array</h3>\n\n<p>Since <code>num_slice</code> is making a decision about the array, it seems reasonable <code>num_slice</code> should get access to it.</p>\n\n<pre><code>def num_slice(arr)\n  some_boolean_test? ? arr.size : 10\nend\n</code></pre>\n\n<h3>Environment configuration</h3>\n\n<p>You're using Rails, so you can set the slice size differently in production and your other environments. In production, make it <code>10</code>, and in test, make it arbitrarily large; then just use the configured value. This is nice because there's no code difference.</p>\n\n<pre><code>def a_method\n  big_array.each_slice(Rails.application.config.slice_size) do |array_slice|\n    # ...\n  end\nend\n</code></pre>\n\n<h3>Wrap it</h3>\n\n<p>I wouldn't recommend this method because it causes the most significant difference between your environments, but since you asked about it, here's a way.</p>\n\n<pre><code>def a_method\n  magic_slice(big_array) do |array_slice|\n    # ...\n  end\nend\n\ndef magic_slice(arr, &amp;block)\n  if some_boolean_test?\n    block.call(arr)\n  else\n    arr.each_slice(10, &amp;block)\n  end\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 10377, "user_id": 2832282, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ZJ4WG.jpg?s=128&g=1", "display_name": "Cyril Duchon-Doris", "link": "https://stackoverflow.com/users/2832282/cyril-duchon-doris"}, "edited": false, "score": 0, "creation_date": 1443024949, "post_id": 32744118, "comment_id": 53329995, "body": "Sorry, I edited my answer : I am using a method located somewhere else to define this num_slice, and I don&#39;t have access to the array in question to get its size."}], "tags": [], "owner": {"reputation": 7525, "user_id": 1805902, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/0W7rW.png?s=128&g=1", "display_name": "pangpang", "link": "https://stackoverflow.com/users/1805902/pangpang"}, "is_accepted": false, "score": 2, "last_activity_date": 1443023459, "creation_date": 1443023459, "answer_id": 32744118, "question_id": 32743798, "link": "https://stackoverflow.com/questions/32743798/each-slice-or-keep-the-full-array/32744118#32744118", "title": "Each slice or keep the full array", "body": "<pre><code>def a_method(big_array, debug_context)\n  num_slice = debug_context ? big_array.length : 10\n  big_array.each_slice(num_slice) do |array_slice|\n    # array_slice will equal to big_array if debug_context == true\n    puts array_slice.inspect\n  end\nend\n</code></pre>\n\n<p>test:</p>\n\n<pre><code>a_method([1,2,3,4,5], true)\n[1, 2, 3, 4, 5]\n</code></pre>\n"}], "owner": {"reputation": 10377, "user_id": 2832282, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ZJ4WG.jpg?s=128&g=1", "display_name": "Cyril Duchon-Doris", "link": "https://stackoverflow.com/users/2832282/cyril-duchon-doris"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 175, "favorite_count": 0, "accepted_answer_id": 32744072, "answer_count": 2, "score": 0, "last_activity_date": 1443038703, "creation_date": 1443022508, "last_edit_date": 1443038703, "question_id": 32743798, "link": "https://stackoverflow.com/questions/32743798/each-slice-or-keep-the-full-array", "title": "Each slice or keep the full array", "body": "<p><code>each_slice</code> keeps slices of length <code>n</code>, but in some cases I want to keep the full array, i.e. do nothing.</p>\n\n<pre><code>module MyModule\n  def num_slice\n    some_boolean_test? ? :full_array : 10 # Note : the content of some_boolean_test? in uninteresting, just assume sometimes it ca return true or false\n  end\nend\n\nclass Foo\n  include MyModule\n\n  def a_method\n    big_array.each_slice(num_slice) do |array_slice|\n      # I want array_slice == big_array if num_slice returns :full_array\n      ...\n    end\n  end\nend\n</code></pre>\n\n<p>I could write a wrapper around <code>Array#each_slice</code> instead so I could define a different behaviour when the parameter is <code>:full_array</code>.</p>\n\n<p>Could anyone help with that?</p>\n"}, {"tags": ["ruby", "linux", "windows", "character-encoding", "docker"], "comments": [{"owner": {"reputation": 2136, "user_id": 2835449, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/JnSSI.jpg?s=128&g=1", "display_name": "Martijn", "link": "https://stackoverflow.com/users/2835449/martijn"}, "edited": false, "score": 0, "creation_date": 1443022217, "post_id": 32743553, "comment_id": 53328179, "body": "<a href=\"https://github.com/sj26/mailcatcher/issues/147\" rel=\"nofollow noreferrer\">github.com/sj26/mailcatcher/issues/147</a>"}, {"owner": {"reputation": 2676, "user_id": 1267780, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/04ff86cde7632645e578e01a7f9113b9?s=128&d=identicon&r=PG", "display_name": "CodyK", "link": "https://stackoverflow.com/users/1267780/codyk"}, "reply_to_user": {"reputation": 2136, "user_id": 2835449, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/JnSSI.jpg?s=128&g=1", "display_name": "Martijn", "link": "https://stackoverflow.com/users/2835449/martijn"}, "edited": false, "score": 0, "creation_date": 1443023581, "post_id": 32743553, "comment_id": 53329068, "body": "Tried that, didn&#39;t work"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1443024268, "post_id": 32743553, "comment_id": 53329544, "body": "Are you sure you&#39;re working on ASCII data? I have a feeling you&#39;re operating on <a href=\"https://en.wikipedia.org/wiki/Windows-1252\" rel=\"nofollow noreferrer\">Windows-1252</a> encoded files, which are the default on Windows, but Linux defaults to ASCII instead. Generally you should be using UTF-8 on both sides, it&#39;s much more portable. Look for any characters in your file above the 7-bit ASCII barrier (character code 127)."}, {"owner": {"reputation": 2676, "user_id": 1267780, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/04ff86cde7632645e578e01a7f9113b9?s=128&d=identicon&r=PG", "display_name": "CodyK", "link": "https://stackoverflow.com/users/1267780/codyk"}, "edited": false, "score": 0, "creation_date": 1443024783, "post_id": 32743553, "comment_id": 53329878, "body": "I am trying to read CSV files, but some users will save CSV files with Excel and some users will save with open office. I need my script to work with windows or linux, and read the files properly no matter what"}, {"owner": {"reputation": 2676, "user_id": 1267780, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/04ff86cde7632645e578e01a7f9113b9?s=128&d=identicon&r=PG", "display_name": "CodyK", "link": "https://stackoverflow.com/users/1267780/codyk"}, "edited": false, "score": 0, "creation_date": 1443025603, "post_id": 32743553, "comment_id": 53330384, "body": "If I leave that line out, then I get  Unquoted fields do not allow \\r or \\n (CSV::MalformedCSVError)"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1443028356, "post_id": 32743553, "comment_id": 53331894, "body": "Welcome to Stack Overflow. We need to see an example of the data you&#39;re working with. Trying to solve encoding errors without actual data is pretty difficult. Simply replacing line-end characters won&#39;t generate the error you&#39;re seeing so odds are good you&#39;re dealing with something else, most likely Win-1252 as @tadman says."}, {"owner": {"reputation": 2676, "user_id": 1267780, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/04ff86cde7632645e578e01a7f9113b9?s=128&d=identicon&r=PG", "display_name": "CodyK", "link": "https://stackoverflow.com/users/1267780/codyk"}, "edited": false, "score": 0, "creation_date": 1443029365, "post_id": 32743553, "comment_id": 53332408, "body": "I fixed it by doing this <a href=\"http://stackoverflow.com/questions/29877310/invalid-byte-sequence-in-utf-8-argumenterror\" title=\"invalid byte sequence in utf 8 argumenterror\">stackoverflow.com/questions/29877310/&hellip;</a>"}, {"owner": {"reputation": 2676, "user_id": 1267780, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/04ff86cde7632645e578e01a7f9113b9?s=128&d=identicon&r=PG", "display_name": "CodyK", "link": "https://stackoverflow.com/users/1267780/codyk"}, "edited": false, "score": 0, "creation_date": 1443029384, "post_id": 32743553, "comment_id": 53332423, "body": "<a href=\"http://stackoverflow.com/questions/29877310/invalid-byte-sequence-in-utf-8-argumenterror\" title=\"invalid byte sequence in utf 8 argumenterror\">stackoverflow.com/questions/29877310/&hellip;</a>"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1443041322, "post_id": 32743553, "comment_id": 53339070, "body": "@Codemiester If you figured it out, you should post an answer to your own question to help someone in the future you may have had exactly the same issue. That helps everyone in the long hall."}, {"owner": {"reputation": 2676, "user_id": 1267780, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/04ff86cde7632645e578e01a7f9113b9?s=128&d=identicon&r=PG", "display_name": "CodyK", "link": "https://stackoverflow.com/users/1267780/codyk"}, "edited": false, "score": 0, "creation_date": 1443109019, "post_id": 32743553, "comment_id": 53369922, "body": "I thought I did, answer didn&#39;t get published"}], "answers": [{"tags": [], "owner": {"reputation": 2676, "user_id": 1267780, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/04ff86cde7632645e578e01a7f9113b9?s=128&d=identicon&r=PG", "display_name": "CodyK", "link": "https://stackoverflow.com/users/1267780/codyk"}, "is_accepted": true, "score": 1, "last_activity_date": 1443108951, "last_edit_date": 1495541286, "creation_date": 1443108951, "answer_id": 32765440, "question_id": 32743553, "link": "https://stackoverflow.com/questions/32743553/gsub-encoding-error-when-running-on-linux-docker-container-invalid-byte-sequence/32765440#32765440", "title": "gsub encoding error when running on Linux Docker Container Invalid byte sequence in US-ASCII", "body": "<p>I fixed it by doing this <a href=\"https://stackoverflow.com/questions/29877310/invalid-byte-sequence-in-utf-8-argumenterror\">Invalid byte sequence in UTF-8 (ArgumentError)</a></p>\n"}, {"tags": [], "owner": {"reputation": 4416, "user_id": 2552259, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e6d74162f339b5acd772d3f5dadaa8ea?s=128&d=identicon&r=PG", "display_name": "Jorge de los Santos", "link": "https://stackoverflow.com/users/2552259/jorge-de-los-santos"}, "is_accepted": false, "score": 1, "last_activity_date": 1469181322, "creation_date": 1469181322, "answer_id": 38523447, "question_id": 32743553, "link": "https://stackoverflow.com/questions/32743553/gsub-encoding-error-when-running-on-linux-docker-container-invalid-byte-sequence/38523447#38523447", "title": "gsub encoding error when running on Linux Docker Container Invalid byte sequence in US-ASCII", "body": "<p>Answering this question as documenting purposses. Looks like this encoding issues are not isolated to a single string for the user, but a known issue in docker as documented here:</p>\n\n<p><a href=\"https://oncletom.io/2015/docker-encoding/\" rel=\"nofollow\">https://oncletom.io/2015/docker-encoding/</a></p>\n\n<p>Seems that some images depends from the original Debian image and:</p>\n\n<blockquote>\n  <p><a href=\"https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=636086#3\" rel=\"nofollow\" title=\"Debian removed their dependency on the locales\">Debian removed their dependency on the locales package</a> in 2011. It\n  explains the unavailability of en_US.UTF-8.</p>\n</blockquote>\n\n<p>That will explain why some docker images on inheriting the system configuration fails to use UTF-8.</p>\n\n<pre><code>$ docker run -ti --rm ruby:2.1.5 ruby -e 'puts STDIN.external_encoding'\n&gt; US-ASCII\n</code></pre>\n\n<p>locale command in the docker shows empty values where they should be the ones in the system:</p>\n\n<pre><code>$ docker run -ti --rm ruby:2.1.5 locale\nLANG=\nLANGUAGE=\nLC_CTYPE=\"POSIX\"\nLC_NUMERIC=\"POSIX\"\nLC_TIME=\"POSIX\"\nLC_COLLATE=\"POSIX\"\nLC_MONETARY=\"POSIX\"\nLC_MESSAGES=\"POSIX\"\nLC_PAPER=\"POSIX\"\nLC_NAME=\"POSIX\"\nLC_ADDRESS=\"POSIX\"\nLC_TELEPHONE=\"POSIX\"\nLC_MEASUREMENT=\"POSIX\"\nLC_IDENTIFICATION=\"POSIX\"\nLC_ALL=\n</code></pre>\n\n<p>Defining LOCALE variable on initialize should work:</p>\n\n<pre><code>$ docker run -ti --rm -e LANG=C.UTF-8 ruby:2.1.5 ruby -e 'puts STDIN.external_encoding'\n&gt; UTF-8\n</code></pre>\n\n<p>And even better, you can define it into the Dockerfile</p>\n\n<pre><code>#/Dockerfile\nFROM ruby:2.1.5\nENV LANG C.UTF-8\n</code></pre>\n"}], "owner": {"reputation": 2676, "user_id": 1267780, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/04ff86cde7632645e578e01a7f9113b9?s=128&d=identicon&r=PG", "display_name": "CodyK", "link": "https://stackoverflow.com/users/1267780/codyk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 633, "favorite_count": 0, "accepted_answer_id": 32765440, "answer_count": 2, "score": 1, "last_activity_date": 1469181322, "creation_date": 1443021784, "last_edit_date": 1443028203, "question_id": 32743553, "link": "https://stackoverflow.com/questions/32743553/gsub-encoding-error-when-running-on-linux-docker-container-invalid-byte-sequence", "title": "gsub encoding error when running on Linux Docker Container Invalid byte sequence in US-ASCII", "body": "<p>I have a string I'm converting from <code>\"\\r\\n\"</code> to <code>\"\\n\"</code> line ends using:</p>\n\n<pre><code>input.gsub(/\\r\\n?/, \"\\n\")\n</code></pre>\n\n<p>When I run it on my Windows host, it works fine. When I run on my Linux host, in a docker container, I get this error:</p>\n\n<pre><code>in `gsub': invalid byte sequence in US-ASCII (ArgumentError)\n</code></pre>\n\n<p>I am running Ruby 2.2. </p>\n"}, {"tags": ["html", "ruby-on-rails", "ruby", "prawn", "pdfkit"], "answers": [{"tags": [], "owner": {"reputation": 795, "user_id": 3335646, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/e005d8b71b3bf46a42f38fdeec669179?s=128&d=identicon&r=PG", "display_name": "Fulvio", "link": "https://stackoverflow.com/users/3335646/fulvio"}, "is_accepted": true, "score": 2, "last_activity_date": 1443927086, "creation_date": 1443927086, "answer_id": 32929563, "question_id": 32743552, "link": "https://stackoverflow.com/questions/32743552/generate-pdf-with-prawn-and-pdfkit-on-ror/32929563#32929563", "title": "Generate PDF with Prawn and Pdfkit on RoR", "body": "<p>Well I could solved it using <code>gem 'wicked_pdf'</code> and <code>gem 'wkhtmltopdf-binary'</code>, so with <a href=\"https://github.com/mileszs/wicked_pdf\" rel=\"nofollow\">wicked_pdf</a> have <a href=\"https://github.com/mileszs/wicked_pdf#advanced-usage-with-all-available-options\" rel=\"nofollow\">options</a> that help you to make header and footer for you pdf and convert html to pdf.</p>\n\n<p>Example code for header and footer on the controller - for more options <a href=\"https://github.com/mileszs/wicked_pdf\" rel=\"nofollow\">link</a></p>\n\n<pre><code>class ThingsController &lt; ApplicationController\n  def show\n    respond_to do |format|\n      format.html\n      format.pdf do\n        render pdf: 'file_name',\n           margin:  {   top:               SIZE,                     # default 10 (mm)\n                        bottom:            SIZE,\n           header:  {   html: {            template: 'users/header.pdf.erb',  # use :template OR :url\n                                           layout:   'pdf_plain.html',        # optional, use 'pdf_plain.html' for a pdf_plain.html.erb file, defaults to main layout\n                                           url:      'www.example.com',\n                                           locals:   { foo: @bar }},\n           footer:  {   html: {   template:'shared/footer.pdf.erb', # use :template OR :url\n                                  url:     'www.example.com',\n                                  locals:  { foo: @bar }},\n      end\n    end\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 795, "user_id": 3335646, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/e005d8b71b3bf46a42f38fdeec669179?s=128&d=identicon&r=PG", "display_name": "Fulvio", "link": "https://stackoverflow.com/users/3335646/fulvio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 531, "favorite_count": 0, "accepted_answer_id": 32929563, "answer_count": 1, "score": 3, "last_activity_date": 1443927086, "creation_date": 1443021783, "question_id": 32743552, "link": "https://stackoverflow.com/questions/32743552/generate-pdf-with-prawn-and-pdfkit-on-ror", "title": "Generate PDF with Prawn and Pdfkit on RoR", "body": "<p>There any way to use the <code>gem 'prawn'</code> with <code>gem 'pdfkit'</code> for to generate PDF starting from HTML.</p>\n\n<p>With Prawn I'll make the document header and footer and the main or body for the pdf come from HTML tags with CKEditor and for this i'm using Pdfkit because Prawn is not, and will never be, is an HTML to PDF generator, have basic support for inline styling but it is limited to a very small subset of functionality and is not suitable for rendering rich HTML documents.</p>\n\n<p>I would like to know if i can mix those gem, or, any idea or advice will be helpful, </p>\n\n<p>Thank you in advance</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 2499, "user_id": 5208760, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/L6VNv.jpg?s=128&g=1", "display_name": "Mateusz", "link": "https://stackoverflow.com/users/5208760/mateusz"}, "edited": false, "score": 1, "creation_date": 1443021436, "post_id": 32743300, "comment_id": 53327608, "body": "<a href=\"http://stackoverflow.com/questions/8797507/sort-a-list-with-multiple-conditions-ruby-on-rails?rq=1\" title=\"sort a list with multiple conditions ruby on rails\">stackoverflow.com/questions/8797507/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1443028602, "post_id": 32743387, "comment_id": 53332031, "body": "While <code>sort</code> is the basic building block for sorting, it often falls down badly when the values being sorted have to be computed or dug out of a structure or object. Instead, use <a href=\"http://ruby-doc.org/core-2.2.3/Enumerable.html#method-i-sort_by\" rel=\"nofollow noreferrer\"><code>sort_by</code></a>, which uses a <a href=\"https://en.wikipedia.org/wiki/Schwartzian_transform\" rel=\"nofollow noreferrer\">Schwarzian Transform</a>, resulting in major speed improvements."}], "tags": [], "owner": {"reputation": 7240, "user_id": 1426097, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yV7IQ.jpg?s=128&g=1", "display_name": "dimakura", "link": "https://stackoverflow.com/users/1426097/dimakura"}, "is_accepted": false, "score": 1, "last_activity_date": 1443021316, "creation_date": 1443021316, "answer_id": 32743387, "question_id": 32743300, "link": "https://stackoverflow.com/questions/32743300/how-to-sort-array-by-multiple-attributes-in-ruby/32743387#32743387", "title": "How to sort array by multiple attributes in ruby?", "body": "<p>You need to use <code>sort</code> method with block:</p>\n\n<pre><code>ary.sort do |x,y|\n  if x &gt; y\n    1\n  elsif x &lt; y\n    -1\n  else\n    0\n  end\nend\n</code></pre>\n\n<p>Just make sure to return <code>+1</code> when <code>x</code> follows <code>y</code>, <code>-1</code> when <code>y</code> follows <code>x</code>, or <code>0</code> when they are equal.</p>\n\n<p><a href=\"http://ruby-doc.org/core-2.2.0/Array.html#method-i-sort\" rel=\"nofollow\">http://ruby-doc.org/core-2.2.0/Array.html#method-i-sort</a></p>\n"}, {"tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": true, "score": 4, "last_activity_date": 1443028769, "last_edit_date": 1443028769, "creation_date": 1443022653, "answer_id": 32743850, "question_id": 32743300, "link": "https://stackoverflow.com/questions/32743300/how-to-sort-array-by-multiple-attributes-in-ruby/32743850#32743850", "title": "How to sort array by multiple attributes in ruby?", "body": "<p>You could use <a href=\"http://ruby-doc.org/core-2.2.3/Enumerable.html#method-i-sort_by\" rel=\"nofollow\"><code>sort_by</code></a>:</p>\n\n<pre><code>user_profiles.sort_by do |x| \n  [(x.claim ? 0 : 1), x.complete_profile_status, x.no_of_friends]\nend\n</code></pre>\n\n<p>Also it is worth noting that <code>sort_by</code> is usually faster than <code>sort</code>, because it caches the result of the comparison operation, which in this case is</p>\n\n<pre><code>(x.claim ? 0 : 1), x.complete_profile_status, x.no_of_friends\n</code></pre>\n\n<p>and does not recalculate the values for each comparison between two elements.</p>\n"}], "owner": {"reputation": 159, "user_id": 2535116, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/0e6908594ce720157079705c89994e28?s=128&d=identicon&r=PG", "display_name": "Thangadurai Nainamalai", "link": "https://stackoverflow.com/users/2535116/thangadurai-nainamalai"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2059, "favorite_count": 1, "accepted_answer_id": 32743850, "answer_count": 2, "score": 3, "last_activity_date": 1443028769, "creation_date": 1443021127, "question_id": 32743300, "link": "https://stackoverflow.com/questions/32743300/how-to-sort-array-by-multiple-attributes-in-ruby", "title": "How to sort array by multiple attributes in ruby?", "body": "<p>I have list of user profiles. I need to sort the user profile based on following criteria as shown below:</p>\n\n<pre><code>profile_claimed(boolean) -&gt; profile_complete_status(integer) -&gt; No_of_friends(integer)\n</code></pre>\n\n<p>code:</p>\n\n<pre><code>user_profiles.sort { |x| [x.claim ? 0 : 1, x.complete_profile_status, x.no_of_friends] }\n</code></pre>\n\n<p>How to sort the user profile?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "paypal"], "answers": [{"tags": [], "owner": {"reputation": 1579, "user_id": 3533169, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rnFHj.jpg?s=128&g=1", "display_name": "pp_MSI_Jenn", "link": "https://stackoverflow.com/users/3533169/pp-msi-jenn"}, "is_accepted": true, "score": 1, "last_activity_date": 1443024969, "last_edit_date": 1443024969, "creation_date": 1443024522, "answer_id": 32744478, "question_id": 32743157, "link": "https://stackoverflow.com/questions/32743157/how-to-find-the-current-status-of-a-paypal-recurring-payment-from-the-response/32744478#32744478", "title": "How to find the current status of a PayPal recurring payment from the response?", "body": "<p>Payer status indicates if the account holder was verified by PayPal. Profile status means the status of the profile. A status of Active means the profile was created and it is currently active. </p>\n\n<p>From the PayPal Developer <a href=\"https://developer.paypal.com/docs/classic/express-checkout/digital-goods/ECDGRecurringPayments/#id08652E00HL7\" rel=\"nofollow\">Handling Recurring Payments</a> documentation:<br /></p>\n\n<blockquote>\n  <p>The recurring payments actions you may take depend on the status of\n  the profile.</p>\n  \n  <p>A recurring payments profile can have one of the following status\n  values:</p>\n\n<pre><code>ActiveProfile\nPendingProfile\nExpiredProfile\nSuspendedProfile\nCancelledProfile\n</code></pre>\n  \n  <p>If PayPal successfully creates the profile, the profile has an\n  <strong>ActiveProfile</strong> status. However, if a non-recurring initial payment\n  fails and you set <strong>FAILEDINITAMTACTION</strong> to <strong>CancelOnFailure</strong> in the\n  <strong>CreateRecurringPaymentsProfile</strong> request, PayPal creates the profile\n  with a status of <strong>PendingProfile</strong>. The profile remains in this status\n  until the initial payment either completes successfully or fails.</p>\n  \n  <p>A profile has a status of <strong>ExpiredProfile</strong> when PayPal completes the\n  total billing cycles for the optional trial and the regular payment\n  periods.</p>\n</blockquote>\n\n<p>You can use <a href=\"https://developer.paypal.com/docs/classic/api/merchant/GetRecurringPaymentsProfileDetails_API_Operation_NVP/\" rel=\"nofollow\">GetRecurringPaymentsProfileDetails</a> API call to get the details of the payment profile. It will tell you if the transaction was successful and the next billing date. </p>\n"}, {"tags": [], "owner": {"reputation": 238, "user_id": 6223167, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/1721395208137173/picture?type=large", "display_name": "Manoj Datt", "link": "https://stackoverflow.com/users/6223167/manoj-datt"}, "is_accepted": false, "score": -1, "last_activity_date": 1500275983, "creation_date": 1500275983, "answer_id": 45138147, "question_id": 32743157, "link": "https://stackoverflow.com/questions/32743157/how-to-find-the-current-status-of-a-paypal-recurring-payment-from-the-response/45138147#45138147", "title": "How to find the current status of a PayPal recurring payment from the response?", "body": "<pre><code>response = PayPal::Recurring.new(profile_id: \"I-VCEL6TRG35CU\").send(:profile)\n\nresponse.status\n</code></pre>\n\n<p>It will return :active, :canceled like this.</p>\n"}], "owner": {"reputation": 5067, "user_id": 993554, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/UV0L9.jpg?s=128&g=1", "display_name": "Victor Ferreira", "link": "https://stackoverflow.com/users/993554/victor-ferreira"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 440, "favorite_count": 0, "accepted_answer_id": 32744478, "answer_count": 2, "score": 1, "last_activity_date": 1500275983, "creation_date": 1443020760, "question_id": 32743157, "link": "https://stackoverflow.com/questions/32743157/how-to-find-the-current-status-of-a-paypal-recurring-payment-from-the-response", "title": "How to find the current status of a PayPal recurring payment from the response?", "body": "<p>I'm working on an application using the <code>paypal-sdk-rest</code> gem found here: <a href=\"https://github.com/paypal/PayPal-Ruby-SDK\" rel=\"nofollow\">https://github.com/paypal/PayPal-Ruby-SDK</a></p>\n\n<p>When status is changed, PayPal sends an HTTP Post message to a controller on my server. I made this controller save the response so I could it.</p>\n\n<p>This is what was passed:</p>\n\n<pre><code>{\n\"payment_cycle\":\"Monthly\",\n\"txn_type\":\"recurring_payment_profile_created\",\n\"last_name\":\"name of the buyer\",\n\"next_payment_date\":\"03:00:00 Sep 23, 2015 PDT\",\n\"residence_country\":\"BR\",\n\"initial_payment_amount\":\"0.00\",\n\"currency_code\":\"BRL\",\n\"time_created\":\"06:56:01 Sep 23, 2015 PDT\",\n\"verify_sign\":\"a long code\",\n\"period_type\":\" Regular\",\n\"payer_status\":\"unverified\",\n\"tax\":\"0.00\",\n\"payer_email\":\"an email\",\n\"first_name\":\"the name\",\n\"receiver_email\":\"an email\",\n\"payer_id\":\"a short code\",\n\"product_type\":\"1\",\n\"shipping\":\"0.00\",\n\"amount_per_cycle\":\"25.00\",\n\"profile_status\":\"Active\",\n\"charset\":\"windows-1252\",\n\"notify_version\":\"3.8\",\n\"amount\":\"25.00\",\n\"outstanding_balance\":\"0.00\",\n\"recurring_payment_id\":\"a short code\",\n\"product_name\":\"Prata\",\n\"ipn_track_id\":\"a short  code\",\n\"controller\":\"notifications\",\n\"action\":\"create\"\n}\n</code></pre>\n\n<p>I have to check the status of this payment, and update on my server. I need to know if it was approved, if it is pending for some reason or rejected.</p>\n\n<p>How do I know the payment status?</p>\n\n<p>Obs: what is the difference from payer_status to profile_status in this response?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "redis"], "answers": [{"comments": [{"owner": {"reputation": 628, "user_id": 1496614, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/39dc315c06e1f3a6408c99c123810ae7?s=128&d=identicon&r=PG", "display_name": "Vitaly Stanchits", "link": "https://stackoverflow.com/users/1496614/vitaly-stanchits"}, "edited": false, "score": 0, "creation_date": 1443021834, "post_id": 32743333, "comment_id": 53327893, "body": "I could design it the other way around, and store the notification keys for the user instead of the project, but the problem would be the other way around, getting the list of users for the given project that have been notified. I am looking for a system that would somehow work both ways."}, {"owner": {"reputation": 13168, "user_id": 4725756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ff02ffd62899a70a608571ec03d5a7b?s=128&d=identicon&r=PG&f=1", "display_name": "hspandher", "link": "https://stackoverflow.com/users/4725756/hspandher"}, "reply_to_user": {"reputation": 628, "user_id": 1496614, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/39dc315c06e1f3a6408c99c123810ae7?s=128&d=identicon&r=PG", "display_name": "Vitaly Stanchits", "link": "https://stackoverflow.com/users/1496614/vitaly-stanchits"}, "edited": false, "score": 0, "creation_date": 1443021945, "post_id": 32743333, "comment_id": 53327979, "body": "How about storing reverse as well as combination of keys"}, {"owner": {"reputation": 628, "user_id": 1496614, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/39dc315c06e1f3a6408c99c123810ae7?s=128&d=identicon&r=PG", "display_name": "Vitaly Stanchits", "link": "https://stackoverflow.com/users/1496614/vitaly-stanchits"}, "edited": false, "score": 0, "creation_date": 1443022132, "post_id": 32743333, "comment_id": 53328127, "body": "I thought of that too, but that would mean I have to make all my methods do double work, and also make integrity test that make sure the synchronisation ran correctly... Because of that I am looking for something in redis that just does the same as postgresql <code>Project.where(&quot;ARRAY[?] &amp;&amp; matched_users&quot;, self.id)</code> method of the users.rb, that does exactly what I need."}, {"owner": {"reputation": 628, "user_id": 1496614, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/39dc315c06e1f3a6408c99c123810ae7?s=128&d=identicon&r=PG", "display_name": "Vitaly Stanchits", "link": "https://stackoverflow.com/users/1496614/vitaly-stanchits"}, "edited": false, "score": 0, "creation_date": 1443022462, "post_id": 32743333, "comment_id": 53328349, "body": "Not only that, in case the project status changes, for example, and I need to remove all prior notifications, currently I have to only delete the key, but if I store user set of notified projects, I would have to go through every user and get the project out of there as well. Given many thousand users per project that are notified, that is quite a problem in my case."}, {"owner": {"reputation": 13168, "user_id": 4725756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ff02ffd62899a70a608571ec03d5a7b?s=128&d=identicon&r=PG&f=1", "display_name": "hspandher", "link": "https://stackoverflow.com/users/4725756/hspandher"}, "reply_to_user": {"reputation": 628, "user_id": 1496614, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/39dc315c06e1f3a6408c99c123810ae7?s=128&d=identicon&r=PG", "display_name": "Vitaly Stanchits", "link": "https://stackoverflow.com/users/1496614/vitaly-stanchits"}, "edited": false, "score": 0, "creation_date": 1443022472, "post_id": 32743333, "comment_id": 53328356, "body": "I&#39;m not sure... how about using a combination of project id as well as user id in your key. that way you don&#39;t set either"}, {"owner": {"reputation": 628, "user_id": 1496614, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/39dc315c06e1f3a6408c99c123810ae7?s=128&d=identicon&r=PG", "display_name": "Vitaly Stanchits", "link": "https://stackoverflow.com/users/1496614/vitaly-stanchits"}, "edited": false, "score": 0, "creation_date": 1443022798, "post_id": 32743333, "comment_id": 53328536, "body": "I can imagine having something like having <code>email_notifications: [project_id1:user_id1, project_id2:user_id1]</code>. That would do what I need. I cannot find the method that gives me elements of the set matching a pattern though."}], "tags": [], "owner": {"reputation": 13168, "user_id": 4725756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ff02ffd62899a70a608571ec03d5a7b?s=128&d=identicon&r=PG&f=1", "display_name": "hspandher", "link": "https://stackoverflow.com/users/4725756/hspandher"}, "is_accepted": true, "score": 2, "last_activity_date": 1443023119, "last_edit_date": 1443023119, "creation_date": 1443021199, "answer_id": 32743333, "question_id": 32743153, "link": "https://stackoverflow.com/questions/32743153/redis-find-keys-where-set-includes-element/32743333#32743333", "title": "Redis find keys where set includes element", "body": "<p>Redis is a key-value store, in key-value store mostly keys are searchable and part of queries(mostly). Instead of searching through the value set, I suggest you change your design somehow, so that you can represent the elements as keys instead of set values, which you can easily match with <code>wildcard</code>. </p>\n\n<p>So, store your elements individually with their own key, and add that key identifier to your set.</p>\n\n<pre><code>'notification_set': ['project:343', 'project:3423']\n'project:343': 'project 343 value'\n'project:3423': 'project 3423 value'\n</code></pre>\n\n<p>There is <code>SSCAN</code> command to iterate over set values. Check it out:- <a href=\"http://redis.io/commands/sscan\" rel=\"nofollow\">SSCAN</a></p>\n"}, {"tags": [], "owner": {"reputation": 628, "user_id": 1496614, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/39dc315c06e1f3a6408c99c123810ae7?s=128&d=identicon&r=PG", "display_name": "Vitaly Stanchits", "link": "https://stackoverflow.com/users/1496614/vitaly-stanchits"}, "is_accepted": false, "score": -1, "last_activity_date": 1443085445, "last_edit_date": 1443085445, "creation_date": 1443085005, "answer_id": 32757254, "question_id": 32743153, "link": "https://stackoverflow.com/questions/32743153/redis-find-keys-where-set-includes-element/32757254#32757254", "title": "Redis find keys where set includes element", "body": "<p>I will mark the previous answer as the solution, but if someone is interested, here is the method I used that seems to work for me in production. Scan is a useful function capable of quickly filtering large amounts of set data based on pattern matching.</p>\n\n<p>project.rb</p>\n\n<pre><code>def red\n  red = Redis.new(:host =&gt; \"localhost\", :port =&gt; redis_port, :db =&gt; 3)\nend \n\ndef notify!(user_id)\n  red.sadd(\"notifications\", self.id.to_i.to_s + \":\" + user_id.to_i.to_s)\n  # to get a HUGE set of project_id:user_id\nend \n\ndef notified_users_raw\n  red.sscan(\"notifications\", 0, match: self.id.to_i.to_s + \":*\", count: 1000*1000)[1]\nend  \n\ndef notified_users \n  User.where(id: self.notified_users_raw.collect { |t| t.split(\":\")[1] })\nend\n</code></pre>\n\n<p>same thing on user.rb</p>\n\n<pre><code>def notified_projects_raw\n  red.sscan(\"notifications\", 0, match: \"*:\" + self.id.to_i.to_s, count: 1000*1000)[1]\nend  \n\ndef notified_projects \n  Project.where(id: self.notified_projects_raw.collect { |t| t.split(\":\")[1] })\nend\n</code></pre>\n\n<p>The complexity is dependent on number of active projects times the number of active users, but the good thing about using Redis is that it can be deployed on a separate more powerful server, in case we face performance problems. </p>\n"}], "owner": {"reputation": 628, "user_id": 1496614, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/39dc315c06e1f3a6408c99c123810ae7?s=128&d=identicon&r=PG", "display_name": "Vitaly Stanchits", "link": "https://stackoverflow.com/users/1496614/vitaly-stanchits"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 809, "favorite_count": 0, "accepted_answer_id": 32743333, "answer_count": 2, "score": 1, "last_activity_date": 1443085445, "creation_date": 1443020753, "last_edit_date": 1443022482, "question_id": 32743153, "link": "https://stackoverflow.com/questions/32743153/redis-find-keys-where-set-includes-element", "title": "Redis find keys where set includes element", "body": "<p>I have a question regarding making Redis search for keys based on their attributes in a set. For example, I have an application that sends notifications and where, for a certain reason, I do not want to use a database to store the array of sent notifications, which I currently have to do. The application uses Ruby on Rails and ruby redis gem.\nI have:</p>\n\n<p>project.rb</p>\n\n<pre><code>def red\n  red = Redis.new(:host =&gt; \"localhost\", :port =&gt; redis_port, :db =&gt; 3)\nend \n\n# where I store the ids of notified users for the project\ndef notified_users\n  red.smembers(\"projects:\" + self.id.to_i.to_s + \":notifications\")\nend  \n\n# method to add the user_id to notifications list, called from a background job that sends mails \ndef notify!(user_id)\n  red.sadd(\"projects:\" + self.id.to_i.to_s + \":notifications\", user_id.to_i)\nend \n</code></pre>\n\n<p>The question is how do I find those project_ids, or at least the keys for all redis_objects, the set of which includes a certain user_id?\nI am trying to write something like:</p>\n\n<pre><code>def self.notified_projects(user_id)\n  # return all the keys from redis where user_id is inside a set\nend\n</code></pre>\n\n<p>Maybe I missed something in the documentation, but I did not find any methods that do exactly that. \nI appreciate any help. </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "url", "routes", "rails-routing"], "comments": [{"owner": {"reputation": 51013, "user_id": 976775, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30bd66ad1795804aebe249d8bcb14409?s=128&d=identicon&r=PG", "display_name": "MrYoshiji", "link": "https://stackoverflow.com/users/976775/mryoshiji"}, "edited": false, "score": 0, "creation_date": 1443021656, "post_id": 32743137, "comment_id": 53327765, "body": "I don&#39;t think you can do that because when hitting a URL like <code>&#47;campaigns</code> you will be redirected to the CampaignsController#show action with <code>params[:slug]</code> equal to <code>&quot;campaigns&quot;</code>"}], "answers": [{"comments": [{"owner": {"reputation": 533, "user_id": 4641520, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/yoVpZ.jpg?s=128&g=1", "display_name": "Henrique Navarro Mar&#231;ulo", "link": "https://stackoverflow.com/users/4641520/henrique-navarro-mar%c3%a7ulo"}, "edited": false, "score": 0, "creation_date": 1443021524, "post_id": 32743285, "comment_id": 53327675, "body": "But i have others routes like: <a href=\"http://localhost:3000/admin\" rel=\"nofollow noreferrer\">localhost:3000/admin</a>, so when i access any of this routes i will be redirect for the campaigns controller"}, {"owner": {"reputation": 1868, "user_id": 1362453, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/f8ac2cc7e4e38841fb52ea58b4bf06ef?s=128&d=identicon&r=PG", "display_name": "Leo Brito", "link": "https://stackoverflow.com/users/1362453/leo-brito"}, "reply_to_user": {"reputation": 533, "user_id": 4641520, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/yoVpZ.jpg?s=128&g=1", "display_name": "Henrique Navarro Mar&#231;ulo", "link": "https://stackoverflow.com/users/4641520/henrique-navarro-mar%c3%a7ulo"}, "edited": false, "score": 0, "creation_date": 1443021688, "post_id": 32743285, "comment_id": 53327782, "body": "@Henrique yes, that is to be expected. How would Rails (or any other software) know if <code>admin</code> is an object id or has some special meaning (e.g. is the name of another resource)? Think of the root <code>&#47;</code> as just another path. Think if your question makes sense if we were using another path instead of <code>&#47;</code>, say <code>mypath&#47;</code>: once we define <code>mypath&#47;:id</code> as a <code>show</code> for some resource, we would expect <code>mypath&#47;something</code> to return a <code>show</code> of the <code>something</code> resource."}, {"owner": {"reputation": 1868, "user_id": 1362453, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/f8ac2cc7e4e38841fb52ea58b4bf06ef?s=128&d=identicon&r=PG", "display_name": "Leo Brito", "link": "https://stackoverflow.com/users/1362453/leo-brito"}, "reply_to_user": {"reputation": 533, "user_id": 4641520, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/yoVpZ.jpg?s=128&g=1", "display_name": "Henrique Navarro Mar&#231;ulo", "link": "https://stackoverflow.com/users/4641520/henrique-navarro-mar%c3%a7ulo"}, "edited": false, "score": 0, "creation_date": 1443023005, "post_id": 32743285, "comment_id": 53328660, "body": "@Henrique I&#39;ve updated my answer to reproduce the behavior you requested."}, {"owner": {"reputation": 771, "user_id": 2785476, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/4e9456a7b85e0365e83bd857668b0255?s=128&d=identicon&r=PG", "display_name": "Max Alcala", "link": "https://stackoverflow.com/users/2785476/max-alcala"}, "edited": false, "score": 1, "creation_date": 1443023623, "post_id": 32743285, "comment_id": 53329105, "body": "@brito You do make a good point - that would not be the rails(tm) way, since it is good practice to make the routes as intuitive as possible. However, rails would know to differentiate - <code>routes</code> are read, and matched, from top to bottom (as you have highlighted in your answer)."}, {"owner": {"reputation": 533, "user_id": 4641520, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/yoVpZ.jpg?s=128&g=1", "display_name": "Henrique Navarro Mar&#231;ulo", "link": "https://stackoverflow.com/users/4641520/henrique-navarro-mar%c3%a7ulo"}, "edited": false, "score": 0, "creation_date": 1443026290, "post_id": 32743285, "comment_id": 53330791, "body": "@brito Thanks very much for the explanation, i know that&#39;s not good way, so i quit this task, maybe in the future this task will cause many other problems for my application. Thanks."}], "tags": [], "owner": {"reputation": 1868, "user_id": 1362453, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/f8ac2cc7e4e38841fb52ea58b4bf06ef?s=128&d=identicon&r=PG", "display_name": "Leo Brito", "link": "https://stackoverflow.com/users/1362453/leo-brito"}, "is_accepted": true, "score": 6, "last_activity_date": 1443023392, "last_edit_date": 1443023392, "creation_date": 1443021088, "answer_id": 32743285, "question_id": 32743137, "link": "https://stackoverflow.com/questions/32743137/how-to-change-route-name-in-ruby-on-rails/32743285#32743285", "title": "How to change route name in Ruby on Rails", "body": "<p>Be warned that this is highly non-recommended, but can be done as follows (ordering matters):</p>\n\n<pre><code>get '/admin' =&gt; 'admin:show'\nget '/:slug' =&gt; 'campaigns#show'\n</code></pre>\n\n<p><strong>EDIT</strong> In your comments, you mentioned that you would like <code>/admin</code> <em>not</em> to be treated by <code>campaigns#show</code> so I edited the answer to reproduce such behavior. I must say though that this is <strong>highly not recommended</strong> - reasons should be clear by reading the comments.</p>\n"}], "owner": {"reputation": 533, "user_id": 4641520, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/yoVpZ.jpg?s=128&g=1", "display_name": "Henrique Navarro Mar&#231;ulo", "link": "https://stackoverflow.com/users/4641520/henrique-navarro-mar%c3%a7ulo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1090, "favorite_count": 2, "accepted_answer_id": 32743285, "answer_count": 1, "score": 4, "last_activity_date": 1443023392, "creation_date": 1443020706, "question_id": 32743137, "link": "https://stackoverflow.com/questions/32743137/how-to-change-route-name-in-ruby-on-rails", "title": "How to change route name in Ruby on Rails", "body": "<p>I'm working in a RoR project and i have some routes that i want to change how this route paths is displayed on the browser.</p>\n\n<p>My route:</p>\n\n<pre><code>get 'campaigns/:slug' =&gt; 'campaigns#show'\n</code></pre>\n\n<p>Result:</p>\n\n<pre><code>http://localhost:3000/campaigns/cdlcuiaba\n</code></pre>\n\n<p>What i want:</p>\n\n<pre><code>http://localhost:3000/cdlcuiaba\n</code></pre>\n\n<p>Thanks</p>\n"}, {"tags": ["mysql", "ruby-on-rails", "ruby", "ruby-on-rails-4"], "answers": [{"tags": [], "owner": {"reputation": 5014, "user_id": 3640770, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HJBjs.jpg?s=128&g=1", "display_name": "IngoAlbers", "link": "https://stackoverflow.com/users/3640770/ingoalbers"}, "is_accepted": true, "score": 2, "last_activity_date": 1443020863, "creation_date": 1443020863, "answer_id": 32743194, "question_id": 32743125, "link": "https://stackoverflow.com/questions/32743125/search-query-in-two-table/32743194#32743194", "title": "Search Query in two table", "body": "<p>You should also specify the second names table:</p>\n\n<pre><code>def self.search(query)\n  query = \"%#{query}%\"\n  joins(:object).where(\"(objects.name like ? or users.name like ? or email like ?  or surname like ?)\", query, query, query, query)\nend\n</code></pre>\n"}], "owner": {"reputation": 667, "user_id": 1745190, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c432b829ab6f01f221e56a3586b8d296?s=128&d=identicon&r=PG", "display_name": "updater", "link": "https://stackoverflow.com/users/1745190/updater"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 1, "accepted_answer_id": 32743194, "answer_count": 1, "score": 1, "last_activity_date": 1443020863, "creation_date": 1443020674, "question_id": 32743125, "link": "https://stackoverflow.com/questions/32743125/search-query-in-two-table", "title": "Search Query in two table", "body": "<p>I want to search query in two table(users.name, users.email, object.name)\nWhen I type:</p>\n\n<pre><code> def self.search(query)\n    query = \"%#{query}%\"\n    where(\"(name like ? or email like ?  or surname like ?)\", query, query, query)\n  end\n</code></pre>\n\n<p>It work perfectly, but Now I want to add next field to search from other table</p>\n\n<pre><code>def self.search(query)\n        query = \"%#{query}%\"\n        joins(:object).where(\"(objects.name like ? or name like ? or email like ?  or surname like ?)\", query, query, query, query)\n      end\n</code></pre>\n\n<p>Error: </p>\n\n<pre><code>`User Load (0.2ms)  SELECT  `users`.* FROM `users`  WHERE `users`.`id` = 120  ORDER BY `users`.`id` ASC LIMIT 1\n   (1.2ms)  SELECT COUNT(*) FROM `users` INNER JOIN `objects` ON `objects`.`id` = `users`.`object_id` WHERE ((objects.name like '%ver%' or email like '%ver%' or name like '%ver%' or surname like '%ver%'))\nMysql2::Error: Column 'name' in where clause is ambiguous: SELECT COUNT(*) FROM `users` INNER JOIN `objects` ON `objects`.`id` = `users`.`object_id` WHERE ((objects.name like '%ver%' or email like '%ver%' or name like '%ver%' or surname like '%ver%'))\nCompleted 500 Internal Server Error in 6ms\n`\n</code></pre>\n\n<p>My model</p>\n\n<pre><code>User belongs_to :object\nObject has_many :users\n</code></pre>\n\n<p>How Could I add other table?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "testing"], "comments": [{"owner": {"reputation": 2028, "user_id": 1657377, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/4iVGJ.png?s=128&g=1", "display_name": "jethroo", "link": "https://stackoverflow.com/users/1657377/jethroo"}, "edited": false, "score": 0, "creation_date": 1443020636, "post_id": 32742898, "comment_id": 53327033, "body": "see also <a href=\"http://stackoverflow.com/a/4673459/1657377\">stackoverflow.com/a/4673459/1657377</a>"}, {"owner": {"reputation": 1212, "user_id": 3688538, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9u2w3.png?s=128&g=1", "display_name": "stepozer", "link": "https://stackoverflow.com/users/3688538/stepozer"}, "reply_to_user": {"reputation": 2028, "user_id": 1657377, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/4iVGJ.png?s=128&g=1", "display_name": "jethroo", "link": "https://stackoverflow.com/users/1657377/jethroo"}, "edited": false, "score": 0, "creation_date": 1443032022, "post_id": 32742898, "comment_id": 53333943, "body": "@jethroo I know about it, please read <code>NOTE</code> section in my question"}, {"owner": {"reputation": 8117, "user_id": 1207687, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/cOUI4.jpg?s=128&g=1", "display_name": "Wes Foster", "link": "https://stackoverflow.com/users/1207687/wes-foster"}, "edited": false, "score": 0, "creation_date": 1443032996, "post_id": 32742898, "comment_id": 53334530, "body": "Did you implement the answer from <a href=\"http://stackoverflow.com/questions/6209848/how-to-not-use-rails-action-parameter-in-controller\" title=\"how to not use rails action parameter in controller\">stackoverflow.com/questions/6209848/&hellip;</a> ? If so, update your code"}, {"owner": {"reputation": 1212, "user_id": 3688538, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9u2w3.png?s=128&g=1", "display_name": "stepozer", "link": "https://stackoverflow.com/users/3688538/stepozer"}, "reply_to_user": {"reputation": 8117, "user_id": 1207687, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/cOUI4.jpg?s=128&g=1", "display_name": "Wes Foster", "link": "https://stackoverflow.com/users/1207687/wes-foster"}, "edited": false, "score": 0, "creation_date": 1443034518, "post_id": 32742898, "comment_id": 53335352, "body": "@WesFoster I updated my question with new code"}], "answers": [{"comments": [{"owner": {"reputation": 1212, "user_id": 3688538, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9u2w3.png?s=128&g=1", "display_name": "stepozer", "link": "https://stackoverflow.com/users/3688538/stepozer"}, "edited": false, "score": 0, "creation_date": 1443020781, "post_id": 32743128, "comment_id": 53327130, "body": "Yes, I understand that is reserved word, but I need integrate with external payment system, that pass <code>action</code> parameter in POST request. That is why I must use this parameter name."}, {"owner": {"reputation": 8117, "user_id": 1207687, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/cOUI4.jpg?s=128&g=1", "display_name": "Wes Foster", "link": "https://stackoverflow.com/users/1207687/wes-foster"}, "reply_to_user": {"reputation": 1212, "user_id": 3688538, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9u2w3.png?s=128&g=1", "display_name": "stepozer", "link": "https://stackoverflow.com/users/3688538/stepozer"}, "edited": false, "score": 0, "creation_date": 1443020839, "post_id": 32743128, "comment_id": 53327184, "body": "You can simply pass <code>payment_action</code> to your controller, then take that value and pass it as <code>action</code> to your external payment system. You can&#39;t argue with Rails :)"}], "tags": [], "owner": {"reputation": 8117, "user_id": 1207687, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/cOUI4.jpg?s=128&g=1", "display_name": "Wes Foster", "link": "https://stackoverflow.com/users/1207687/wes-foster"}, "is_accepted": false, "score": 2, "last_activity_date": 1443020680, "creation_date": 1443020680, "answer_id": 32743128, "question_id": 32742898, "link": "https://stackoverflow.com/questions/32742898/in-rails-controller-testing-is-there-a-way-to-pass-action-parameter/32743128#32743128", "title": "In Rails Controller testing, is there a way to pass action parameter?", "body": "<p>You cannot use <code>action</code> in the params unless you are referring to a controller's action. The <code>action</code> parameter is what Rails uses to determine which method to run in the controller. Therefore, when you run your spec, it's just calling <code>paymentAdviso</code> in the controller.</p>\n\n<p>You should change the parameter name so that it does not interfere with Rails' conventions.</p>\n\n<p>For a list of other reserved Rails words, look here: <a href=\"https://reservedwords.herokuapp.com/\" rel=\"nofollow\">https://reservedwords.herokuapp.com/</a></p>\n"}], "owner": {"reputation": 1212, "user_id": 3688538, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9u2w3.png?s=128&g=1", "display_name": "stepozer", "link": "https://stackoverflow.com/users/3688538/stepozer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 356, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1443034425, "creation_date": 1443020057, "last_edit_date": 1495535222, "question_id": 32742898, "link": "https://stackoverflow.com/questions/32742898/in-rails-controller-testing-is-there-a-way-to-pass-action-parameter", "title": "In Rails Controller testing, is there a way to pass action parameter?", "body": "<blockquote>\n  <h2>NOTE</h2>\n  \n  <p>I know, that <code>action</code> is reserved word in Rails. I am implementing a third party API for Yandex Money in a Rails server and the Yandex API app is posting an <code>action</code> param into my Rails application. I know how get it (<a href=\"https://stackoverflow.com/questions/6209848/how-to-not-use-rails-action-parameter-in-controller\">How to not use Rails action parameter in controller</a>). The issue is - how write test to my controller, because my test can't send <code>action</code> parameter (see description below).</p>\n</blockquote>\n\n<p>I'm writing controller tests in Rails, and I need pass <code>action</code> parameters to the controller from test. This is my controller:</p>\n\n<pre><code>class YandexController &lt; ApplicationController\n  def notify\n    render text: request.request_parameters\n  end\nend\n</code></pre>\n\n<p>When I POST data with <code>curl</code> command:</p>\n\n<pre><code>curl --data \"action=paymentAviso&amp;some_other_param=value\" http://localhost:3000/yandex/notify\n</code></pre>\n\n<p>I get correct result:</p>\n\n<pre><code>{\"action\"=&gt;\"paymentAviso\", \"some_other_param\"=&gt;\"value\"}\n</code></pre>\n\n<p>But when I try send <code>action</code> parameter in test then it is not working. See my test below:</p>\n\n<pre><code>class YandexControllerTest &lt; ActionController::TestCase\n  test \"notify sucess\" do\n    post :notify, { action: 'paymentAviso', some_other_param: 'value' }\n    assert_response :success\n    puts response.body\n  end\nend\n</code></pre>\n\n<p>And when I run test I see:</p>\n\n<blockquote>\n  <p>Running:</p>\n  \n  <p>{\"some_other_param\"=>\"value\"}</p>\n</blockquote>\n\n<p>Is there a way to pass <code>action</code> parameter to my controller from test?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 9125, "user_id": 671422, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/85da2a1fa3e4017815ff5d3a3d70fabe?s=128&d=identicon&r=PG", "display_name": "Yule", "link": "https://stackoverflow.com/users/671422/yule"}, "edited": false, "score": 0, "creation_date": 1443020015, "post_id": 32742783, "comment_id": 53326575, "body": "How are you running basic_client.rb from the command line? What arguments are you passing?"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1443029333, "post_id": 32742783, "comment_id": 53332381, "body": "Welcome to Stack Overflow. When asking a question it&#39;s important to phrase a title that indicates the problem, not the book or website/blog you&#39;re reading. <code>&quot;Can&#39;t load bot data because no implicit conversion of nil into String (RuntimeError)&quot;</code> would be reasonable."}], "answers": [{"tags": [], "owner": {"reputation": 7525, "user_id": 1805902, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/0W7rW.png?s=128&g=1", "display_name": "pangpang", "link": "https://stackoverflow.com/users/1805902/pangpang"}, "is_accepted": false, "score": 0, "last_activity_date": 1443020470, "last_edit_date": 1443020470, "creation_date": 1443020136, "answer_id": 32742930, "question_id": 32742783, "link": "https://stackoverflow.com/questions/32742783/cant-load-bot-data-because-no-implicit-conversion-of-nil-into-string-runtimeer/32742930#32742930", "title": "Can&#39;t load bot data because no implicit conversion of nil into String (RuntimeError)", "body": "<pre><code>YAML.load(nil)\nTypeError: no implicit conversion of nil into String\n</code></pre>\n\n<p>so you should be careful: the result of <code>File.read(options[:data_file])</code> is probably nil.</p>\n\n<pre><code>YAML.load(nil.to_s)\n=&gt; false\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 47, "user_id": 5289665, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/bf408386c93e2a43d2a1e5a81230965e?s=128&d=identicon&r=PG&f=1", "display_name": "brucewayne", "link": "https://stackoverflow.com/users/5289665/brucewayne"}, "edited": false, "score": 0, "creation_date": 1443025724, "post_id": 32742968, "comment_id": 53330455, "body": "Thank you. This solved the problem. one step further but trying to solve a no method error problem now. : undefined method <code>[]&#39; for false:FalseClass (NoMethodError) \tfrom C:&#47;RailsInstaller&#47;Ruby2.1.0&#47;bin&#47;bot.rb:23:in </code>greeting&#39; \tfrom C:/RailsInstaller/Ruby2.1.0/bin/basic_client.rb:7:in `&lt;main&gt;&#39;"}, {"owner": {"reputation": 9125, "user_id": 671422, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/85da2a1fa3e4017815ff5d3a3d70fabe?s=128&d=identicon&r=PG", "display_name": "Yule", "link": "https://stackoverflow.com/users/671422/yule"}, "reply_to_user": {"reputation": 47, "user_id": 5289665, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/bf408386c93e2a43d2a1e5a81230965e?s=128&d=identicon&r=PG&f=1", "display_name": "brucewayne", "link": "https://stackoverflow.com/users/5289665/brucewayne"}, "edited": false, "score": 1, "creation_date": 1443027357, "post_id": 32742968, "comment_id": 53331342, "body": "If it solved your question, please consider accepting the answer and upvote. If you have an additional question please post as new question."}], "tags": [], "owner": {"reputation": 9125, "user_id": 671422, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/85da2a1fa3e4017815ff5d3a3d70fabe?s=128&d=identicon&r=PG", "display_name": "Yule", "link": "https://stackoverflow.com/users/671422/yule"}, "is_accepted": false, "score": 0, "last_activity_date": 1443020248, "creation_date": 1443020248, "answer_id": 32742968, "question_id": 32742783, "link": "https://stackoverflow.com/questions/32742783/cant-load-bot-data-because-no-implicit-conversion-of-nil-into-string-runtimeer/32742968#32742968", "title": "Can&#39;t load bot data because no implicit conversion of nil into String (RuntimeError)", "body": "<p>The clue is in your error message: </p>\n\n<pre><code>from C:/RailsInstaller/Ruby2.1.0/bin/bot.rb:13:in `initialize'\n</code></pre>\n\n<p>Line 13 of bot.rb, in your initialize method.</p>\n\n<pre><code>no implicit conversion of nil into String (RuntimeError)\n</code></pre>\n\n<p>It can't turn nil into a string.</p>\n\n<p>Your code specifies:</p>\n\n<pre><code>@name = options[:name] || \"Unnamed Bot\"\n</code></pre>\n\n<p>Which guards against options[:name] being nil</p>\n\n<p>However</p>\n\n<pre><code> @data = YAML.load(File.read(options[:data_file]))\n</code></pre>\n\n<p>Specifies that it tries to load a file with a path of <code>options[:data_file]</code>. Which is nil.</p>\n\n<p>So when running your client ensure to pass your name AND the data file where the yaml should be loaded from. OR create a default file and pass that:</p>\n\n<pre><code> @data = YAML.load(File.read(options[:data_file] || 'path/to/default.yml'))\n</code></pre>\n"}], "owner": {"reputation": 47, "user_id": 5289665, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/bf408386c93e2a43d2a1e5a81230965e?s=128&d=identicon&r=PG&f=1", "display_name": "brucewayne", "link": "https://stackoverflow.com/users/5289665/brucewayne"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 260, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1443038951, "creation_date": 1443019793, "last_edit_date": 1443038951, "question_id": 32742783, "link": "https://stackoverflow.com/questions/32742783/cant-load-bot-data-because-no-implicit-conversion-of-nil-into-string-runtimeer", "title": "Can&#39;t load bot data because no implicit conversion of nil into String (RuntimeError)", "body": "<p>I'm currently going through \"Beginning Ruby\", Chapter 12, \"Beginning Ruby-ChatterBox\" where it builds a conversation bot. When running the basic_client.rb file, I get an error message:</p>\n\n<pre><code>: Can't load bot data because no implicit conversion of nil into String (RuntimeError)\nfrom C:/RailsInstaller/Ruby2.1.0/bin/bot.rb:13:in `initialize'\nfrom C:/RailsInstaller/Ruby2.1.0/bin/basic_client.rb:4:in `new'\nfrom C:/RailsInstaller/Ruby2.1.0/bin/basic_client.rb:4:in `&lt;main&gt;'\n</code></pre>\n\n<p>Similar questions have been asked in the past. I consulted these examples but still can't solve this problem. Please I would appreciate if anyone could help with letting me know what I am doing wrong. Here is an extract of my code files. Please if extra information is needed, I would be glad to let you know.</p>\n\n<p>bot.rb:</p>\n\n<pre><code>require 'yaml'\nrequire_relative 'wordplay'\n\n#A basic implementation of a chatterbox\nclass Bot\n  attr_reader :name\n\n  #Initialies the bot object, loads in the external YAML data\n  # file and sets bot's name. Raises an exception if\n  # the data loading process fails.\n  def initialize(options)\n    @name = options[:name] || \"Unnamed Bot\"\n    begin\n      @data = YAML.load(File.read(options[:data_file]))\n    rescue =&gt; e\n      raise \"Can't load bot data because #{e}\"\n    end\n  end\n</code></pre>\n\n<p>end</p>\n\n<p>basic_client.rb:</p>\n\n<pre><code>require_relative 'bot'\n\nbot = Bot.new(:name =&gt; ARGV[0], :data_file =&gt; ARGV[1])\n\nputs bot.greeting\n\nwhile input = $stdin.gets and input.chomp != 'end'\n  puts '&gt;&gt; ' + bot.response_to(input)\n\nend\n\nputs bot.farewell\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "performance"], "comments": [{"owner": {"reputation": 10274, "user_id": 930207, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oy7Q3.png?s=128&g=1", "display_name": "mcfinnigan", "link": "https://stackoverflow.com/users/930207/mcfinnigan"}, "edited": false, "score": 1, "creation_date": 1443019700, "post_id": 32742669, "comment_id": 53326342, "body": "You&#39;re probably looking for something like LogStash (<a href=\"https://www.elastic.co/products/logstash\" rel=\"nofollow noreferrer\">elastic.co/products/logstash</a>)"}], "owner": {"reputation": 81, "user_id": 3830714, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/43fdcb8beffeffdba43059749f2219bf?s=128&d=identicon&r=PG&f=1", "display_name": "user3830714", "link": "https://stackoverflow.com/users/3830714/user3830714"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 53, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1443021175, "creation_date": 1443019396, "last_edit_date": 1443021175, "question_id": 32742669, "link": "https://stackoverflow.com/questions/32742669/ruby-application-monitoring", "title": "Ruby application monitoring", "body": "<p>I currently have a Rails application that runs in AWS. I am looking for a way to graphically view my logs. request-log-analyzer is great and the database feature is nice however I need something that gives me basically that view but more long term. My logs are rotated daily.   </p>\n\n<p>Is there either a way for request-log-analzyer to update a live database or is there another host-able (our logs have PHI) solution that would work in this fashion?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activeadmin"], "comments": [{"owner": {"reputation": 10298, "user_id": 1205299, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/31432723c324f68bc45e86f197c4c1eb?s=128&d=identicon&r=PG", "display_name": "davidrac", "link": "https://stackoverflow.com/users/1205299/davidrac"}, "edited": false, "score": 0, "creation_date": 1443028678, "post_id": 32742665, "comment_id": 53332059, "body": "can you provide some details? what are you tying to achieve? what is failing? batch action or plain action?"}, {"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "edited": false, "score": 0, "creation_date": 1443426380, "post_id": 32742665, "comment_id": 53471946, "body": "did you get it working?"}], "owner": {"reputation": 2417, "user_id": 343495, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/823c21aefa18ab5a917aea66cc3c0519?s=128&d=identicon&r=PG", "display_name": "Drew", "link": "https://stackoverflow.com/users/343495/drew"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 268, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1443171603, "creation_date": 1443019384, "last_edit_date": 1443020764, "question_id": 32742665, "link": "https://stackoverflow.com/questions/32742665/activeadmin-custom-alert-message-on-destroy", "title": "ActiveAdmin custom alert message on destroy", "body": "<p>Had noticed the following in the documentation:</p>\n\n<pre><code>batch_action :destroy, confirm: \"Are you sure??\" do |ids|\n  # ...\nend\n</code></pre>\n\n<p>Any thoughts as to what I may not have accounted for in terms of setting a custom alert message on destroy?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "sharding", "octopus"], "answers": [{"tags": [], "owner": {"reputation": 5186, "user_id": 529640, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/QEMNF.jpg?s=128&g=1", "display_name": "David", "link": "https://stackoverflow.com/users/529640/david"}, "is_accepted": false, "score": 0, "last_activity_date": 1444182311, "creation_date": 1444182311, "answer_id": 32982458, "question_id": 32742469, "link": "https://stackoverflow.com/questions/32742469/default-migration-group-in-octopus-gem/32982458#32982458", "title": "default migration group in Octopus gem", "body": "<p>So the purpose of the Octopus is to allows a rails application to run multiple instances of a database. So the purpose of Database Sharding provides is that it provides a method for scalability across independent servers, each with their own CPU, memory and disk. Basic example of Database Sharding is very straightforward: take a large database, and break it into a number of smaller databases across servers which will look something like this: <a href=\"http://i.imgur.com/uIuDNKw.png\" rel=\"nofollow\">Image of sharding</a>. Core advantage of sharding is that it increases scalability. </p>\n\n<p>In the above example of what you have there. You could take a particular \"client/company\" that belongs to a particular server <code>foo.company.com</code> now you don't want to share this companies data with lets say your main database. So in this scenario you can restrict your rails application to say okay. When <code>foo.company.com</code> is accessed I want to target this <code>foo_prod</code> database for example. Also when you break your databases down it makes it easier to manage and also from a security perspective it would be safer not to have your \"clients/companies\" data all munged together. </p>\n"}, {"tags": [], "owner": {"reputation": 454, "user_id": 2895291, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/7226366b61afec813362d5cf3b8b427f?s=128&d=identicon&r=PG&f=1", "display_name": "Richardlonesteen", "link": "https://stackoverflow.com/users/2895291/richardlonesteen"}, "is_accepted": false, "score": 0, "last_activity_date": 1444208627, "creation_date": 1444208627, "answer_id": 32988063, "question_id": 32742469, "link": "https://stackoverflow.com/questions/32742469/default-migration-group-in-octopus-gem/32988063#32988063", "title": "default migration group in Octopus gem", "body": "<p>Thanks for the explanation but at the end after adding <strong>using_group(:test)</strong> to every migration and making appropriate changes in shard.yml as describe in docs,  we cut the migration time on all of the servers from almost 6h to around ~25 minutes.</p>\n\n<p>At the end I couldn't figure out how to make <strong>default_migration_group: db_list</strong> work, so i just wrote a small script that added <strong>using_group(:test)</strong> to all of the existing migrations and made changes to migration generator so that all of the new migrations would have that method in them.</p>\n"}], "owner": {"reputation": 454, "user_id": 2895291, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/7226366b61afec813362d5cf3b8b427f?s=128&d=identicon&r=PG&f=1", "display_name": "Richardlonesteen", "link": "https://stackoverflow.com/users/2895291/richardlonesteen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 336, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1444208627, "creation_date": 1443018835, "question_id": 32742469, "link": "https://stackoverflow.com/questions/32742469/default-migration-group-in-octopus-gem", "title": "default migration group in Octopus gem", "body": "<p>i'm trying to understand how the default migration group on octopus gem really work. Been googling around, there isn't really much info about this part of the gem. Any help would be really appreciated. </p>\n\n<p><strong>shards.yml</strong></p>\n\n<pre><code>octopus:\n  default_migration_group: db_list\n  environments:\n    - development\n  development:\n    db1:\n      adapter: mysql2\n      database: db1\n      username: root\n      password:\n      host: localhost\n    db2:\n      adapter: mysql2\n      database: db2\n      username: root\n      password:\n      host: localhost\n</code></pre>\n\n<p>rake db:migrate only updates the database which is defined in the database.yml file</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "refactoring"], "comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1443019390, "post_id": 32742371, "comment_id": 53326058, "body": "In <code>chosen_select_array</code>, you are ensuring a value to <code>options[:value_method]</code> and <code>options[:text_method]</code>, and then deleting them without using them. Why is that for?"}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1443019665, "post_id": 32742371, "comment_id": 53326308, "body": "@SergioTulentsev Is it in <code>options_for_select(chzes, selected)</code>?"}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1443019788, "post_id": 32742371, "comment_id": 53326405, "body": "@SergioTulentsev Where is it?"}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1443020224, "post_id": 32742371, "comment_id": 53326714, "body": "@SergioTulentsev I am talking about <code>chosen_select_array</code>, not <code>chosen_select</code>."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1443020849, "post_id": 32742371, "comment_id": 53327192, "body": "@sawa: ah indeed. Sorry"}], "answers": [{"tags": [], "owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "is_accepted": true, "score": 1, "last_activity_date": 1443019163, "creation_date": 1443019163, "answer_id": 32742593, "question_id": 32742371, "link": "https://stackoverflow.com/questions/32742371/rails-refactor-code-with-blocks/32742593#32742593", "title": "Rails: refactor code with blocks", "body": "<p>This assignment in your block won't do what you think:</p>\n\n<pre><code>chzes = option_groups_from_collection_for_select(...)\n</code></pre>\n\n<p>It creates a new local variable instead of changing external one. If it's the only changeable piece here, then you can just return it from the block:</p>\n\n<pre><code>chosen_select_generic(name, method, chzes, selected = nil, options = {}, html_options = {}) do |chzes|\n  option_groups_from_collection_for_select(chzes, :entries, :status, options[:value_method], options[:text_method], selected)\nend\n</code></pre>\n\n<p>And receive the value in your generic method like this: </p>\n\n<pre><code>chzes = yield(chzes)\n</code></pre>\n"}], "owner": {"reputation": 3493, "user_id": 1323481, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/4825c6c1cdfd05c2af6fb8db0d492f73?s=128&d=identicon&r=PG", "display_name": "StandardNerd", "link": "https://stackoverflow.com/users/1323481/standardnerd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 87, "favorite_count": 0, "accepted_answer_id": 32742593, "answer_count": 1, "score": -2, "last_activity_date": 1443024032, "creation_date": 1443018603, "last_edit_date": 1443024032, "question_id": 32742371, "link": "https://stackoverflow.com/questions/32742371/rails-refactor-code-with-blocks", "title": "Rails: refactor code with blocks", "body": "<p>I use Rails 4.2 and i want to refactor my helper method to get rid of duplicate code:</p>\n\n<p>In app/helpers/admin/tasks_helper.rb</p>\n\n<pre><code>def chosen_select(name, method, chzes, selected = nil, options = {}, html_options = {})\n  options[:value_method] ||= :id\n  options[:text_method] ||= :name\n  if options.key?(:placeholder)\n    html_options['data-placeholder'.intern] = options[:placeholder]\n    options.delete(:placeholder)\n  end\n  if html_options.key?(:class)\n    html_options[:class] = 'chosen-select ' + html_options[:class]\n  else\n    html_options[:class] = 'chosen-select'\n  end\n  chzes = options_from_collection_for_select(chzes, options[:value_method], options[:text_method], selected)\n  options.delete(:value_method)\n  options.delete(:text_method)\n  select(name, method, chzes, options.merge!(include_hidden: false), html_options)\nend\n\ndef chosen_select_array(name, method, chzes, selected = nil, options = {}, html_options = {})\n  options[:value_method] ||= :id\n  options[:text_method] ||= :name\n  if options.key?(:placeholder)\n    html_options['data-placeholder'.intern] = options[:placeholder]\n    options.delete(:placeholder)\n  end\n  if html_options.key?(:class)\n    html_options[:class] = 'chosen-select ' + html_options[:class]\n  else\n    html_options[:class] = 'chosen-select'\n  end\n  chzes = options_for_select(chzes, selected)\n  options.delete(:value_method)\n  options.delete(:text_method)\n  select(name, method, chzes, options.merge!(include_hidden: false), html_options)\nend\n</code></pre>\n\n<p>I my view i have a lot of method calls like app/views/admin/tasks/index.html.erb</p>\n\n<pre><code>  &lt;%= chosen_select(:select, :project_id, [TaskFilterOptgroups.active_projects, TaskFilterOptgroups.inactive_projects] , @task_filter_configuration.project_id, {:include_blank =&gt; true, :placeholder =&gt; 'Project'}, {'data-last-project_id' =&gt; @task_filter_configuration.project_id, :style =&gt; 'width: 150px;'}) %&gt;\n</code></pre>\n\n<p>so that i don't want to change my method calls in the view.\nMy attempt is to make a generic method \"chosen_select_generic\" that will be called from the specific method like \"chosen_select\":</p>\n\n<pre><code>def chosen_select_generic(name, method, chzes, selected = nil, options = {}, html_options = {})\n  options[:value_method] ||= :id\n  options[:text_method] ||= :name\n  if options.key?(:placeholder)\n    html_options['data-placeholder'.intern] = options[:placeholder]\n    options.delete(:placeholder)\n  end\n  if html_options.key?(:class)\n    html_options[:class] = 'chosen-select ' + html_options[:class]\n  else\n    html_options[:class] = 'chosen-select'\n  end\n  # 2 different chzes in 2 methods:\n  # 1) chosen_select(...)\n  # chzes = options_from_collection_for_select(chzes, options[:value_method], options[:text_method], selected)\n  # 2) chosen_select_array(...)\n  # chzes = options_for_select(chzes, selected)     \n  yield chzes \n  options.delete(:value_method)\n  options.delete(:text_method)\n  select(name, method, chzes, options.merge!(include_hidden: false), html_options)\nend\n</code></pre>\n\n<p>and then chosen_select could look like:</p>\n\n<pre><code>def chosen_select(name, method, chzes, selected = nil, options = {}, html_options = {})\n  chosen_select_generic(name, method, chzes, selected = nil, options = {}, html_options = {}) do |contents|\n    chzes = option_groups_from_collection_for_select(chzes, :entries, :status, options[:value_method], options[:text_method], selected)\n  end\nend\n</code></pre>\n\n<p>But this doesn't work. How can i extract the duplicate code in a block without changing the method calls in the view?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "postgresql", "rspec", "database-cleaner"], "comments": [{"owner": {"reputation": 257364, "user_id": 398670, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/85f50c23bb5e9dfb061af5032bfe8e65?s=128&d=identicon&r=PG", "display_name": "Craig Ringer", "link": "https://stackoverflow.com/users/398670/craig-ringer"}, "edited": false, "score": 0, "creation_date": 1443052613, "post_id": 32742240, "comment_id": 53343186, "body": "PostgreSQL version? See <a href=\"http://stackoverflow.com/q/9407442/398670\">stackoverflow.com/q/9407442/398670</a>, <a href=\"http://stackoverflow.com/q/11419536/398670\">stackoverflow.com/q/11419536/398670</a>, <a href=\"http://stackoverflow.com/q/19936204/398670\">stackoverflow.com/q/19936204/398670</a>,"}, {"owner": {"reputation": 6732, "user_id": 1118038, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f8069adedbe2d37460c54eac8102351b?s=128&d=identicon&r=PG", "display_name": "Dougui", "link": "https://stackoverflow.com/users/1118038/dougui"}, "reply_to_user": {"reputation": 257364, "user_id": 398670, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/85f50c23bb5e9dfb061af5032bfe8e65?s=128&d=identicon&r=PG", "display_name": "Craig Ringer", "link": "https://stackoverflow.com/users/398670/craig-ringer"}, "edited": false, "score": 0, "creation_date": 1443099772, "post_id": 32742240, "comment_id": 53363154, "body": "@CraigRinger I tried on 9.3 and 9.4. I will try on 9.5"}, {"owner": {"reputation": 257364, "user_id": 398670, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/85f50c23bb5e9dfb061af5032bfe8e65?s=128&d=identicon&r=PG", "display_name": "Craig Ringer", "link": "https://stackoverflow.com/users/398670/craig-ringer"}, "edited": false, "score": 0, "creation_date": 1443100069, "post_id": 32742240, "comment_id": 53363382, "body": "The fact that it takes 10 seconds strongly suggests it could be some kind of lock held by another session that then times out."}, {"owner": {"reputation": 6732, "user_id": 1118038, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f8069adedbe2d37460c54eac8102351b?s=128&d=identicon&r=PG", "display_name": "Dougui", "link": "https://stackoverflow.com/users/1118038/dougui"}, "reply_to_user": {"reputation": 257364, "user_id": 398670, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/85f50c23bb5e9dfb061af5032bfe8e65?s=128&d=identicon&r=PG", "display_name": "Craig Ringer", "link": "https://stackoverflow.com/users/398670/craig-ringer"}, "edited": false, "score": 0, "creation_date": 1443100151, "post_id": 32742240, "comment_id": 53363457, "body": "@CraigRinger I use a docker container. There is not other container linked to this one."}, {"owner": {"reputation": 6732, "user_id": 1118038, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f8069adedbe2d37460c54eac8102351b?s=128&d=identicon&r=PG", "display_name": "Dougui", "link": "https://stackoverflow.com/users/1118038/dougui"}, "reply_to_user": {"reputation": 257364, "user_id": 398670, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/85f50c23bb5e9dfb061af5032bfe8e65?s=128&d=identicon&r=PG", "display_name": "Craig Ringer", "link": "https://stackoverflow.com/users/398670/craig-ringer"}, "edited": false, "score": 0, "creation_date": 1443100326, "post_id": 32742240, "comment_id": 53363580, "body": "@CraigRinger it&#39;s faster with <code>fsync = off</code>. Truncations take 250ms."}], "owner": {"reputation": 6732, "user_id": 1118038, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f8069adedbe2d37460c54eac8102351b?s=128&d=identicon&r=PG", "display_name": "Dougui", "link": "https://stackoverflow.com/users/1118038/dougui"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 178, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1443018987, "creation_date": 1443018234, "last_edit_date": 1443018987, "question_id": 32742240, "link": "https://stackoverflow.com/questions/32742240/specs-are-long-to-run-because-of-truncation-of-tables", "title": "Specs are long to run because of truncation of tables", "body": "<p>I have a Rails 4 app with simple specs. When I run a spec, it takes 26 seconds. If I look at the log, I can see this :</p>\n\n<pre><code>   (38.5ms)  ALTER TABLE \"schema_migrations\" DISABLE TRIGGER ALL;ALTER TABLE .............# tons of tables\n   (10.3ms)            SELECT schemaname || '.' || tablename\n          FROM pg_tables\n          WHERE\n            tablename !~ '_prt_' AND\n            tablename &lt;&gt; 'schema_migrations' AND\n            schemaname = ANY (current_schemas(false))\n\n   (2.3ms)  select table_name from information_schema.views where table_schema = 'lap-test'\n   (10708.2ms)  TRUNCATE TABLE \"public\".\"bounded_facets_service_boutiques\", \"public\".\"versions\", ..... # Tons of tables\n   (10823.0ms)  TRUNCATE TABLE \"public\".\"bounded_facets_service_boutiques\", \"public\".\"versions\", .... #Tons of tables\n   (26.2ms)  ALTER TABLE \"schema_migrations\" ENABLE TRIGGER ALL;ALTER TABLE \"bounded_facets_service_boutiques\" ENABLE TRIGGER ALL;ALTER TABLE \"versions\" .... #Tons of tables\n   (0.6ms)  BEGIN\n   (0.3ms)  COMMIT\n   (0.2ms)  BEGIN\n   (0.2ms)  SAVEPOINT active_record_1\n   (0.2ms)  RELEASE SAVEPOINT active_record_1\n   (0.2ms)  SAVEPOINT active_record_1\n   (0.5ms)  SAVEPOINT active_record_2\n  Administrator Exists (1.9ms)  SELECT  1 AS one FROM \"administrators\" WHERE \"administrators\".\"email\" = 'person1@labandprocess.com' LIMIT 1\n  SQL (2.3ms)  INSERT INTO \"administrators\" .....\n   (0.6ms)  RELEASE SAVEPOINT active_record_2\n   (0.4ms)  ROLLBACK TO SAVEPOINT active_record_1\n   (0.6ms)  ROLLBACK\n</code></pre>\n\n<p>As you can see, The truncation takes 10 seconds 2 times.</p>\n\n<p>I use database cleaner with this :</p>\n\n<pre><code>RSpec.configure do |config|\n  config.include Devise::TestHelpers, type: :controller\n\n  config.before(:suite) do\n    DatabaseCleaner.strategy = :transaction\n    DatabaseCleaner.clean_with(:truncation)\n  end\n\n  config.around(:each) do |example|\n    DatabaseCleaner.cleaning do\n      example.run\n    end\n  end\nend\n</code></pre>\n\n<p>I tested with other strategies without result.</p>\n\n<p>There is a lot of seeds in development mod but it's on another database. There is 107 models in this project.</p>\n\n<p>Is there a solution ?</p>\n"}, {"tags": ["ruby", "string", "split"], "comments": [{"owner": {"reputation": 110733, "user_id": 1009479, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/wlrC5.jpg?s=128&g=1", "display_name": "Yu Hao", "link": "https://stackoverflow.com/users/1009479/yu-hao"}, "edited": false, "score": 4, "creation_date": 1443018343, "post_id": 32742215, "comment_id": 53325262, "body": "The first and second elements are both empty strings. The comma is the separator in the result array."}, {"owner": {"reputation": 7873, "user_id": 2225104, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/195de66794c596e35bc145c80e9f5515?s=128&d=identicon&r=PG", "display_name": "BitTickler", "link": "https://stackoverflow.com/users/2225104/bittickler"}, "edited": false, "score": 0, "creation_date": 1443018405, "post_id": 32742215, "comment_id": 53325316, "body": "Maybe there might be some option like in .NET string split where you can discard empty strings...not a ruby guy so I won&#39;t know..."}, {"owner": {"reputation": 103, "user_id": 5284991, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3c1a09ace380f631fe493af5e94c049?s=128&d=identicon&r=PG&f=1", "display_name": "Razvanescu", "link": "https://stackoverflow.com/users/5284991/razvanescu"}, "edited": false, "score": 0, "creation_date": 1443018625, "post_id": 32742215, "comment_id": 53325488, "body": "Actually, the first element is empty string &quot;&quot;. The comma is used to separate the elements of the array.  The way that split works is by dividing your string into substrings based on your delimiter ( in your case is dot . ). The empty strings from your array comes from the fact that your string starts with two dots, which is your delimiter."}, {"owner": {"reputation": 5039, "user_id": 178925, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/688a0dd1d721a6ad62b8fdc0d64a5def?s=128&d=identicon&r=PG", "display_name": "JCLL", "link": "https://stackoverflow.com/users/178925/jcll"}, "edited": false, "score": 0, "creation_date": 1443018678, "post_id": 32742215, "comment_id": 53325532, "body": "Oh !!! I see it now. Sorry guys !!!"}], "answers": [{"comments": [{"owner": {"reputation": 5039, "user_id": 178925, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/688a0dd1d721a6ad62b8fdc0d64a5def?s=128&d=identicon&r=PG", "display_name": "JCLL", "link": "https://stackoverflow.com/users/178925/jcll"}, "edited": false, "score": 0, "creation_date": 1443018504, "post_id": 32742275, "comment_id": 53325399, "body": "why the comma in my result ?"}, {"owner": {"reputation": 2560, "user_id": 5112122, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206053108358704/picture?type=large", "display_name": "Horacio", "link": "https://stackoverflow.com/users/5112122/horacio"}, "reply_to_user": {"reputation": 5039, "user_id": 178925, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/688a0dd1d721a6ad62b8fdc0d64a5def?s=128&d=identicon&r=PG", "display_name": "JCLL", "link": "https://stackoverflow.com/users/178925/jcll"}, "edited": false, "score": 0, "creation_date": 1443018567, "post_id": 32742275, "comment_id": 53325441, "body": "because it&#39;s an Array not a string, what do you need to do?"}, {"owner": {"reputation": 5039, "user_id": 178925, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/688a0dd1d721a6ad62b8fdc0d64a5def?s=128&d=identicon&r=PG", "display_name": "JCLL", "link": "https://stackoverflow.com/users/178925/jcll"}, "edited": false, "score": 0, "creation_date": 1443018842, "post_id": 32742275, "comment_id": 53325655, "body": "I though the first element itself was a &quot;,  &quot;... Sorry !"}], "tags": [], "owner": {"reputation": 2560, "user_id": 5112122, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206053108358704/picture?type=large", "display_name": "Horacio", "link": "https://stackoverflow.com/users/5112122/horacio"}, "is_accepted": false, "score": 3, "last_activity_date": 1443030056, "last_edit_date": 1443030056, "creation_date": 1443018335, "answer_id": 32742275, "question_id": 32742215, "link": "https://stackoverflow.com/questions/32742215/result-of-ruby-stringsplit-method/32742275#32742275", "title": "Result of Ruby `String#split` method", "body": "<p>Because your string begins with two periods (\"..\")</p>\n\n<pre><code> \"../\".split(\".\")\n =&gt; [\"\", \"\", \"/\"]\n</code></pre>\n\n<p>Try:</p>\n\n<pre><code>str=\"../tests/sls_79.sexp\"\nstr.split(/\\.+/) #=&gt; [\"\", \"\", \"/tests/sls_79\", \"sexp\"]\n =&gt; [\"\", \"/tests/sls_79\", \"sexp\"] \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 5251, "user_id": 903842, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cfe7b10dbda86c6cb930c1ae40abfc2c?s=128&d=identicon&r=PG", "display_name": "Nimir", "link": "https://stackoverflow.com/users/903842/nimir"}, "is_accepted": false, "score": 0, "last_activity_date": 1443029961, "last_edit_date": 1443029961, "creation_date": 1443019423, "answer_id": 32742676, "question_id": 32742215, "link": "https://stackoverflow.com/questions/32742215/result-of-ruby-stringsplit-method/32742676#32742676", "title": "Result of Ruby `String#split` method", "body": "<p>Here is how the <a href=\"http://ruby-doc.org/core-2.2.0/String.html#method-i-split\" rel=\"nofollow\"><code>split</code></a> method works. Taking your string:</p>\n\n<pre><code>str = \"../tests/sls_79.sexp\"\n</code></pre>\n\n<p>Splitting with a dot delimiter \".\", will look in the string and find the delimiter. Since nothing was before it <code>split</code> will insert the first sub-string, which is an empty string.</p>\n\n<pre><code>split_result = [\"\"]\n</code></pre>\n\n<p>Going forward, immediately another occurrence of a period, and again nothing was between this occurrence and the previous one, so <code>split</code> creates another empty sub-string for the array.</p>\n\n<pre><code>split_result = [\"\", \"\"]\n</code></pre>\n\n<p>The third occurrence happens after \"9\", resulting in a sub-string of \"/tests/sls_79\".</p>\n\n<pre><code>split_result = [\"\", \"\", \"/tests/sls_79\"]  \n</code></pre>\n\n<p>Finally, the remaining sub-string will be added as a last element of the returned array.</p>\n\n<pre><code>split_result = [\"\", \"\", \"/tests/sls_79\", \"sexp\"]      \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "is_accepted": true, "score": 0, "last_activity_date": 1443124583, "last_edit_date": 1443124583, "creation_date": 1443032481, "answer_id": 32746763, "question_id": 32742215, "link": "https://stackoverflow.com/questions/32742215/result-of-ruby-stringsplit-method/32746763#32746763", "title": "Result of Ruby `String#split` method", "body": "<p>The information you seek is all in <a href=\"http://ruby-doc.org/core-2.2.3/String.html#method-i-split\" rel=\"nofollow\">the <code>split</code> documentation</a>:</p>\n\n<blockquote>\n  <p><code>split(pattern=$;, [limit]) \u2192 anArray</code></p>\n  \n  <p>Divides str into substrings based on a delimiter, returning an array of these substrings.</p>\n  \n  <p>[...]</p>\n  \n  <p>If the limit parameter is omitted, trailing null fields are suppressed. If limit is a positive number, at most that number of fields will be returned (if limit is 1, the entire string is returned as the only entry in an array). If negative, there is no limit to the number of fields returned, and trailing null fields are not suppressed.</p>\n  \n  <p>When the input str is empty an empty Array is returned as the string is considered to have no fields to split.</p>\n</blockquote>\n\n<p>Working from that information, <code>split</code> sees these as empty strings and returns empty arrays because there's nothing else to return:</p>\n\n<pre><code>'.'.split('.')  # =&gt; []\n'..'.split('.') # =&gt; []\n</code></pre>\n\n<p>If there's something to return, <code>split</code> breaks the string into as many empty elements in the array necessary to reflect the delimiters found, then returns the sub-string:</p>\n\n<pre><code>'..foo'.split('.')    # =&gt; [\"\", \"\", \"foo\"]\n'.foo.foo'.split('.') # =&gt; [\"\", \"foo\", \"foo\"]\n</code></pre>\n\n<p>At that point, the result you got should make sense:</p>\n\n<pre><code>str = '../tests/sls_79.sexp'\nstr.split('.') # =&gt; [\"\", \"\", \"/tests/sls_79\", \"sexp\"]\n</code></pre>\n\n<p>And, for thoroughness, as per the documentation, normally empty trailing elements are trimmed. <code>-1</code> tells <code>split</code> to retain trailing empty elements:</p>\n\n<pre><code>'.foo.'.split('.')     # =&gt; [\"\", \"foo\"]\n'.foo.'.split('.', -1) # =&gt; [\"\", \"foo\", \"\"]\n</code></pre>\n\n<p>But wait! There's actually a better way to do what you're trying to do, use the methods designed to work with filenames!</p>\n\n<p>We can <code>split</code> a file path into the directory and the filename.ext, or just extract the directory, just the basename of the file, or the extension of the file:</p>\n\n<pre><code>File.split(str)    # =&gt; [\"../tests\", \"sls_79.sexp\"]\nFile.dirname(str)  # =&gt; \"../tests\"\nFile.basename(str) # =&gt; \"sls_79.sexp\"\nFile.extname(str)  # =&gt; \".sexp\"\n</code></pre>\n\n<p>Finally, here's how to get just the filename without the extension:</p>\n\n<pre><code>File.basename(str, File.extname(str)) # =&gt; \"sls_79\"\n</code></pre>\n\n<p>or you can use:</p>\n\n<pre><code>File.basename(str, '.*') # =&gt; \"sls_79\"\n</code></pre>\n\n<p>See the <a href=\"http://ruby-doc.org/core-2.2.3/File.html\" rel=\"nofollow\">File</a> documentation for more information.</p>\n"}], "owner": {"reputation": 5039, "user_id": 178925, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/688a0dd1d721a6ad62b8fdc0d64a5def?s=128&d=identicon&r=PG", "display_name": "JCLL", "link": "https://stackoverflow.com/users/178925/jcll"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 197, "favorite_count": 0, "accepted_answer_id": 32746763, "answer_count": 3, "score": -3, "last_activity_date": 1443124583, "creation_date": 1443018170, "last_edit_date": 1443032878, "question_id": 32742215, "link": "https://stackoverflow.com/questions/32742215/result-of-ruby-stringsplit-method", "title": "Result of Ruby `String#split` method", "body": "<p>I cannot explain the behavior of this code:</p>\n\n<pre><code>str=\"../tests/sls_79.sexp\"\nstr.split(\".\") # =&gt; [\"\", \"\", \"/tests/sls_79\", \"sexp\"]\n</code></pre>\n\n<p>Where does the first element <code>\", \"</code> come from? Why such comma?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "answers": [{"comments": [{"owner": {"reputation": 37, "user_id": 4504017, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh5.googleusercontent.com/-pW3N1yRIRUE/AAAAAAAAAAI/AAAAAAAAASg/z6c8_dQufZ4/photo.jpg?sz=128", "display_name": "Sleed", "link": "https://stackoverflow.com/users/4504017/sleed"}, "edited": false, "score": 0, "creation_date": 1443017971, "post_id": 32742082, "comment_id": 53324973, "body": "if it&#39;s <code>if @incident.tech_id_changed?</code> it&#39;s always false"}, {"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "reply_to_user": {"reputation": 37, "user_id": 4504017, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh5.googleusercontent.com/-pW3N1yRIRUE/AAAAAAAAAAI/AAAAAAAAASg/z6c8_dQufZ4/photo.jpg?sz=128", "display_name": "Sleed", "link": "https://stackoverflow.com/users/4504017/sleed"}, "edited": false, "score": 0, "creation_date": 1443018145, "post_id": 32742082, "comment_id": 53325106, "body": "@Sleed Myself had the same problem, the explanation in <a href=\"http://stackoverflow.com/questions/32241979/how-to-detect-attribute-changes-after-update\"><b>this</b></a> answer could help you."}, {"owner": {"reputation": 37, "user_id": 4504017, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh5.googleusercontent.com/-pW3N1yRIRUE/AAAAAAAAAAI/AAAAAAAAASg/z6c8_dQufZ4/photo.jpg?sz=128", "display_name": "Sleed", "link": "https://stackoverflow.com/users/4504017/sleed"}, "edited": false, "score": 0, "creation_date": 1443018697, "post_id": 32742082, "comment_id": 53325541, "body": "Hmm. I don&#39;t understand everything, my model : <code>class Incident &lt; ActiveRecord::Base    belongs_to :user   belongs_to :category   has_many :responses    module Incidentmod     attr_accessor :name, :content, :techidchanged   end   validates :title, :presence =&gt; true   validates :content, :presence =&gt; true    after_update :techidchanged = true, :if =&gt; @incident.title_changed? end </code>"}], "tags": [], "owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "is_accepted": false, "score": 1, "last_activity_date": 1443017990, "last_edit_date": 1443017990, "creation_date": 1443017857, "answer_id": 32742082, "question_id": 32742029, "link": "https://stackoverflow.com/questions/32742029/rails-4-check-attribute-with-changed/32742082#32742082", "title": "Rails 4 Check attribute with _changed?", "body": "<p>As per the <a href=\"http://api.rubyonrails.org/classes/ActiveModel/Dirty.html\" rel=\"nofollow\"><strong>Dirty</strong></a> documentation this line <code>if :tech_id_changed?</code> should be <code>if @incident.tech_id_changed?</code></p>\n"}, {"comments": [{"owner": {"reputation": 37, "user_id": 4504017, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh5.googleusercontent.com/-pW3N1yRIRUE/AAAAAAAAAAI/AAAAAAAAASg/z6c8_dQufZ4/photo.jpg?sz=128", "display_name": "Sleed", "link": "https://stackoverflow.com/users/4504017/sleed"}, "edited": false, "score": 0, "creation_date": 1443018168, "post_id": 32742117, "comment_id": 53325126, "body": "<code>if @incident.tech_id_changed</code> is always false, even if i change <code>@incident.tech_id</code>"}, {"owner": {"reputation": 7240, "user_id": 1426097, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yV7IQ.jpg?s=128&g=1", "display_name": "dimakura", "link": "https://stackoverflow.com/users/1426097/dimakura"}, "reply_to_user": {"reputation": 37, "user_id": 4504017, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh5.googleusercontent.com/-pW3N1yRIRUE/AAAAAAAAAAI/AAAAAAAAASg/z6c8_dQufZ4/photo.jpg?sz=128", "display_name": "Sleed", "link": "https://stackoverflow.com/users/4504017/sleed"}, "edited": false, "score": 0, "creation_date": 1443018313, "post_id": 32742117, "comment_id": 53325236, "body": "@Sleed can you try an example in the end of my answer? You should get <code>true</code> in the end"}, {"owner": {"reputation": 37, "user_id": 4504017, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh5.googleusercontent.com/-pW3N1yRIRUE/AAAAAAAAAAI/AAAAAAAAASg/z6c8_dQufZ4/photo.jpg?sz=128", "display_name": "Sleed", "link": "https://stackoverflow.com/users/4504017/sleed"}, "edited": false, "score": 0, "creation_date": 1443018442, "post_id": 32742117, "comment_id": 53325345, "body": "Hmmm. <code>2.2.1 :001 &gt; incident = Incident.first NameError: uninitialized constant Incident \tfrom (irb):1 \tfrom &#47;home&#47;jeremymontesinos&#47;.rvm&#47;rubies&#47;ruby-2.2.1&#47;bin&#47;irb:11:in &lt;main&gt;&#39; </code>"}, {"owner": {"reputation": 7240, "user_id": 1426097, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yV7IQ.jpg?s=128&g=1", "display_name": "dimakura", "link": "https://stackoverflow.com/users/1426097/dimakura"}, "reply_to_user": {"reputation": 37, "user_id": 4504017, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh5.googleusercontent.com/-pW3N1yRIRUE/AAAAAAAAAAI/AAAAAAAAASg/z6c8_dQufZ4/photo.jpg?sz=128", "display_name": "Sleed", "link": "https://stackoverflow.com/users/4504017/sleed"}, "edited": false, "score": 0, "creation_date": 1443018474, "post_id": 32742117, "comment_id": 53325375, "body": "What&#39;s the name of the model for <code>@incident</code>?"}, {"owner": {"reputation": 37, "user_id": 4504017, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh5.googleusercontent.com/-pW3N1yRIRUE/AAAAAAAAAAI/AAAAAAAAASg/z6c8_dQufZ4/photo.jpg?sz=128", "display_name": "Sleed", "link": "https://stackoverflow.com/users/4504017/sleed"}, "edited": false, "score": 0, "creation_date": 1443018659, "post_id": 32742117, "comment_id": 53325519, "body": "<code>class Incident &lt; ActiveRecord::Base</code>"}, {"owner": {"reputation": 7240, "user_id": 1426097, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yV7IQ.jpg?s=128&g=1", "display_name": "dimakura", "link": "https://stackoverflow.com/users/1426097/dimakura"}, "reply_to_user": {"reputation": 37, "user_id": 4504017, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh5.googleusercontent.com/-pW3N1yRIRUE/AAAAAAAAAAI/AAAAAAAAASg/z6c8_dQufZ4/photo.jpg?sz=128", "display_name": "Sleed", "link": "https://stackoverflow.com/users/4504017/sleed"}, "edited": false, "score": 0, "creation_date": 1443019106, "post_id": 32742117, "comment_id": 53325850, "body": "You have error here: <a href=\"https://github.com/mjerem34/Tick-Master-/blob/master/app/models/incident.rb#L30\" rel=\"nofollow noreferrer\">github.com/mjerem34/Tick-Master-/blob/master/app/models/&hellip;</a>"}, {"owner": {"reputation": 37, "user_id": 4504017, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh5.googleusercontent.com/-pW3N1yRIRUE/AAAAAAAAAAI/AAAAAAAAASg/z6c8_dQufZ4/photo.jpg?sz=128", "display_name": "Sleed", "link": "https://stackoverflow.com/users/4504017/sleed"}, "edited": false, "score": 0, "creation_date": 1443019270, "post_id": 32742117, "comment_id": 53325968, "body": "Yes, but i tried to understand the @pavan response. Can you explain me ?"}, {"owner": {"reputation": 7240, "user_id": 1426097, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yV7IQ.jpg?s=128&g=1", "display_name": "dimakura", "link": "https://stackoverflow.com/users/1426097/dimakura"}, "reply_to_user": {"reputation": 37, "user_id": 4504017, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh5.googleusercontent.com/-pW3N1yRIRUE/AAAAAAAAAAI/AAAAAAAAASg/z6c8_dQufZ4/photo.jpg?sz=128", "display_name": "Sleed", "link": "https://stackoverflow.com/users/4504017/sleed"}, "edited": false, "score": 0, "creation_date": 1443019413, "post_id": 32742117, "comment_id": 53326083, "body": "What are you trying to understand?"}, {"owner": {"reputation": 7240, "user_id": 1426097, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yV7IQ.jpg?s=128&g=1", "display_name": "dimakura", "link": "https://stackoverflow.com/users/1426097/dimakura"}, "reply_to_user": {"reputation": 37, "user_id": 4504017, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh5.googleusercontent.com/-pW3N1yRIRUE/AAAAAAAAAAI/AAAAAAAAASg/z6c8_dQufZ4/photo.jpg?sz=128", "display_name": "Sleed", "link": "https://stackoverflow.com/users/4504017/sleed"}, "edited": false, "score": 0, "creation_date": 1443019527, "post_id": 32742117, "comment_id": 53326173, "body": "@Sleed if you fix model, like I did in answer it works!"}, {"owner": {"reputation": 7240, "user_id": 1426097, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yV7IQ.jpg?s=128&g=1", "display_name": "dimakura", "link": "https://stackoverflow.com/users/1426097/dimakura"}, "reply_to_user": {"reputation": 37, "user_id": 4504017, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh5.googleusercontent.com/-pW3N1yRIRUE/AAAAAAAAAAI/AAAAAAAAASg/z6c8_dQufZ4/photo.jpg?sz=128", "display_name": "Sleed", "link": "https://stackoverflow.com/users/4504017/sleed"}, "edited": false, "score": 0, "creation_date": 1443019631, "post_id": 32742117, "comment_id": 53326282, "body": "It already worked for me. Do you still have problem with your code?"}, {"owner": {"reputation": 37, "user_id": 4504017, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh5.googleusercontent.com/-pW3N1yRIRUE/AAAAAAAAAAI/AAAAAAAAASg/z6c8_dQufZ4/photo.jpg?sz=128", "display_name": "Sleed", "link": "https://stackoverflow.com/users/4504017/sleed"}, "edited": false, "score": 0, "creation_date": 1443019988, "post_id": 32742117, "comment_id": 53326559, "body": "Nope, is not working. Supposed i would change the title of the incident. I can do this ? : <code>before_update :on_after_update    def on_after_update     if self.tech_id_changed?       self.evenement_type_user = &#39;2&#39;       self.evenement_type_tech = &#39;2&#39;     else       self.evenement_type_user = 1       self.evenement_type_tech = 1     end   end</code>"}, {"owner": {"reputation": 7240, "user_id": 1426097, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yV7IQ.jpg?s=128&g=1", "display_name": "dimakura", "link": "https://stackoverflow.com/users/1426097/dimakura"}, "reply_to_user": {"reputation": 37, "user_id": 4504017, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh5.googleusercontent.com/-pW3N1yRIRUE/AAAAAAAAAAI/AAAAAAAAASg/z6c8_dQufZ4/photo.jpg?sz=128", "display_name": "Sleed", "link": "https://stackoverflow.com/users/4504017/sleed"}, "edited": false, "score": 0, "creation_date": 1443020060, "post_id": 32742117, "comment_id": 53326601, "body": "@Sleed sorry i misspelled method name. Please copy it again. It should work now"}, {"owner": {"reputation": 37, "user_id": 4504017, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh5.googleusercontent.com/-pW3N1yRIRUE/AAAAAAAAAAI/AAAAAAAAASg/z6c8_dQufZ4/photo.jpg?sz=128", "display_name": "Sleed", "link": "https://stackoverflow.com/users/4504017/sleed"}, "edited": false, "score": 0, "creation_date": 1443020194, "post_id": 32742117, "comment_id": 53326692, "body": "Yes i now, but even with the good method name it fail. I updated my first message with model"}, {"owner": {"reputation": 37, "user_id": 4504017, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh5.googleusercontent.com/-pW3N1yRIRUE/AAAAAAAAAAI/AAAAAAAAASg/z6c8_dQufZ4/photo.jpg?sz=128", "display_name": "Sleed", "link": "https://stackoverflow.com/users/4504017/sleed"}, "edited": false, "score": 0, "creation_date": 1443020361, "post_id": 32742117, "comment_id": 53326824, "body": "I would update an other attribute if an first attribute is updated."}, {"owner": {"reputation": 37, "user_id": 4504017, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh5.googleusercontent.com/-pW3N1yRIRUE/AAAAAAAAAAI/AAAAAAAAASg/z6c8_dQufZ4/photo.jpg?sz=128", "display_name": "Sleed", "link": "https://stackoverflow.com/users/4504017/sleed"}, "edited": false, "score": 0, "creation_date": 1443020606, "post_id": 32742117, "comment_id": 53327007, "body": "Not for me ... Can you send me your model file ?"}], "tags": [], "owner": {"reputation": 7240, "user_id": 1426097, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yV7IQ.jpg?s=128&g=1", "display_name": "dimakura", "link": "https://stackoverflow.com/users/1426097/dimakura"}, "is_accepted": true, "score": 0, "last_activity_date": 1443020661, "last_edit_date": 1443020661, "creation_date": 1443017928, "answer_id": 32742117, "question_id": 32742029, "link": "https://stackoverflow.com/questions/32742029/rails-4-check-attribute-with-changed/32742117#32742117", "title": "Rails 4 Check attribute with _changed?", "body": "<p><code>:tech_id_changed?</code> is not a method. If you try:</p>\n\n<pre><code>:tech_id_changed?.class.name #=&gt; Symbol\n</code></pre>\n\n<p>So your test will always pass, because falsy values in Ruby are only <code>false</code> itself and <code>nil</code>. </p>\n\n<p>What you probably mean is:</p>\n\n<pre><code>if @incident.tech_id_changed?\n  ...\nend\n</code></pre>\n\n<p>Try to run under <code>rails c</code>:</p>\n\n<pre><code>incident = Incident.new\nincident.tech_id_changed? # =&gt; false\nincident.tech_id = 999999\nincident.tech_id_changed? # =&gt; true\n</code></pre>\n\n<p>Also fix your model:</p>\n\n<pre><code>class Incident &lt; ActiveRecord::Base\n  belongs_to :user\n  belongs_to :category\n  has_many :responses\n\n  module Incidentmod\n   attr_accessor :name, :content, :techidchanged\n  end\n  validates :title, :presence =&gt; true\n  validates :content, :presence =&gt; true\n\n\n  ## I'm not sure what you are doing\n  ## This is an example of how to use it properly\n\n  before_update :on_before_update\n\n\n  def on_before_update\n    if self.tech_id_changed?\n      self.evenement_type_user = '2'\n      self.evenement_type_tech = '2'\n    else\n      self.evenement_type_user = 1\n      self.evenement_type_tech = 1\n    end\n  end\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 0, "creation_date": 1443019600, "post_id": 32742501, "comment_id": 53326251, "body": "You should post this as an update in the question, not as an answer :)"}], "tags": [], "owner": {"reputation": 37, "user_id": 4504017, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh5.googleusercontent.com/-pW3N1yRIRUE/AAAAAAAAAAI/AAAAAAAAASg/z6c8_dQufZ4/photo.jpg?sz=128", "display_name": "Sleed", "link": "https://stackoverflow.com/users/4504017/sleed"}, "is_accepted": false, "score": 0, "last_activity_date": 1443018925, "creation_date": 1443018925, "answer_id": 32742501, "question_id": 32742029, "link": "https://stackoverflow.com/questions/32742029/rails-4-check-attribute-with-changed/32742501#32742501", "title": "Rails 4 Check attribute with _changed?", "body": "<p>@pavan:</p>\n\n<p>My model :</p>\n\n<pre><code>    class Incident &lt; ActiveRecord::Base\n  belongs_to :user\n  belongs_to :category\n  has_many :responses\n\n  module Incidentmod\n    attr_accessor :name, :content, :techidchanged\n  end\n  validates :title, :presence =&gt; true\n  validates :content, :presence =&gt; true\n\n  after_update :techidchanged = true, :if =&gt; @incident.tech_id_changed?\nend\n</code></pre>\n"}], "owner": {"reputation": 37, "user_id": 4504017, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh5.googleusercontent.com/-pW3N1yRIRUE/AAAAAAAAAAI/AAAAAAAAASg/z6c8_dQufZ4/photo.jpg?sz=128", "display_name": "Sleed", "link": "https://stackoverflow.com/users/4504017/sleed"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 449, "favorite_count": 0, "accepted_answer_id": 32742117, "answer_count": 3, "score": 0, "last_activity_date": 1443021069, "creation_date": 1443017688, "last_edit_date": 1443021069, "question_id": 32742029, "link": "https://stackoverflow.com/questions/32742029/rails-4-check-attribute-with-changed", "title": "Rails 4 Check attribute with _changed?", "body": "<p>i would like check if an attribute was changed by the user with : _changed?</p>\n\n<p>Controller :</p>\n\n<pre><code>def update\n    respond_to do |format|\n      if @incident.update(incident_params)\n        if :tech_id_changed?\n          @incident.update(evenement_type_user: 2)\n          @incident.update(evenement_type_tech: 2)\n        else\n          @incident.update(evenement_type_user: 1)\n          @incident.update(evenement_type_tech: 1)\n        end\n\n        format.html { redirect_to @incident, notice: 'Incident mis \u00e0 jour.' }\n\n        format.json { render :show, status: :ok, location: @incident }\n      else\n        format.html { render :edit }\n        format.json { render json: @incident.errors, status: :unprocessable_entity }\n      end\n    end\n  end\n</code></pre>\n\n<p>But </p>\n\n<pre><code>if :tech_id_changed?\n</code></pre>\n\n<p>Return always true, even if tech_id has not changed.</p>\n\n<p>Why ?</p>\n\n<p>Nope, is not working. Supposed i would change the title of the incident. I can do this ?</p>\n\n<pre><code>      before_update :on_before_update\n\n  def on_before_update\n    if self.tech_id_changed?\n      self.evenement_type_user = '2'\n      self.evenement_type_tech = '2'\n    else\n      self.evenement_type_user = 1\n      self.evenement_type_tech = 1\n    end\n  end\n</code></pre>\n\n<p>My update function in my controller re-attribute the <code>evenement_type_user</code> to 1 :</p>\n\n<pre><code>  def update\n    respond_to do |format|\n      if @incident.update(incident_params)\n        if @incident.tech_id_changed?\n          @incident.update(evenement_type_user: 2)\n          @incident.update(evenement_type_tech: 2)\n        else\n          @incident.update(evenement_type_user: 1)\n          @incident.update(evenement_type_tech: 1)\n        end\n\n        format.html { redirect_to @incident, notice: 'Incident mis \u00e0 jour.' }\n\n        format.json { render :show, status: :ok, location: @incident }\n      else\n        format.html { render :edit }\n        format.json { render json: @incident.errors, status: :unprocessable_entity }\n      end\n    end\n  end\n</code></pre>\n\n<p>But if i delete         </p>\n\n<pre><code>        if @incident.tech_id_changed?\n      @incident.update(evenement_type_user: 2)\n      @incident.update(evenement_type_tech: 2)\n    else\n      @incident.update(evenement_type_user: 1)\n      @incident.update(evenement_type_tech: 1)\n    end\n</code></pre>\n\n<p>It works, I had forgotten to remove this piece of code.</p>\n\n<p>So, Thank you very much !!</p>\n"}, {"tags": ["arrays", "ruby"], "comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 3, "creation_date": 1443017836, "post_id": 32741965, "comment_id": 53324871, "body": "&quot;[I]f the element is nowhere in the array, the function should return <code>nil</code>&quot;-- This is a bad design. Keep things simple; do not try to make exceptions."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 2, "creation_date": 1443022586, "post_id": 32741965, "comment_id": 53328409, "body": "When you give an example you should assign all input values to variables (e.g. <code>colors = [&#39;blue&#39;,...]</code>), so that readers can reference those variables in answers and comments without having to define them."}], "answers": [{"tags": [], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "is_accepted": false, "score": 3, "last_activity_date": 1443017675, "creation_date": 1443017675, "answer_id": 32742023, "question_id": 32741965, "link": "https://stackoverflow.com/questions/32741965/how-to-retrieve-different-positions-of-an-element-within-an-array/32742023#32742023", "title": "How to retrieve different positions of an element within an array", "body": "<pre><code>result = [\"blue\", \"red\", \"blue\", \"blue\", \"red\"]\n.to_enum.with_index.select{|e, _| e == \"blue\"}.map(&amp;:last)\nresult = nil if result.empty?\nresult # =&gt; [0, 2, 3]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1443018402, "post_id": 32742216, "comment_id": 53325314, "body": "That does not give the desired result."}, {"owner": {"reputation": 1868, "user_id": 1362453, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/f8ac2cc7e4e38841fb52ea58b4bf06ef?s=128&d=identicon&r=PG", "display_name": "Leo Brito", "link": "https://stackoverflow.com/users/1362453/leo-brito"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 1, "creation_date": 1443018573, "post_id": 32742216, "comment_id": 53325449, "body": "@sawa thanks, forgot about the &quot;return nil if not found&quot; condition. I fixed the code."}], "tags": [], "owner": {"reputation": 1868, "user_id": 1362453, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/f8ac2cc7e4e38841fb52ea58b4bf06ef?s=128&d=identicon&r=PG", "display_name": "Leo Brito", "link": "https://stackoverflow.com/users/1362453/leo-brito"}, "is_accepted": true, "score": 1, "last_activity_date": 1443026029, "last_edit_date": 1443026029, "creation_date": 1443018171, "answer_id": 32742216, "question_id": 32741965, "link": "https://stackoverflow.com/questions/32741965/how-to-retrieve-different-positions-of-an-element-within-an-array/32742216#32742216", "title": "How to retrieve different positions of an element within an array", "body": "<p>Method definition:</p>\n\n<pre><code>def diff_pos arr, key\n  result = arr.each_with_index.map { |el,i| i if el == key }.compact\n  result.empty? ? nil : result\nend\n</code></pre>\n\n<p>Execution:</p>\n\n<pre><code>x = [\"blue\", \"red\", \"blue\", \"blue\", \"red\"]\ndiff_pos(x, \"blue\")\n# =&gt; [0, 2, 3] \n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 7525, "user_id": 1805902, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/0W7rW.png?s=128&g=1", "display_name": "pangpang", "link": "https://stackoverflow.com/users/1805902/pangpang"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 1, "creation_date": 1443018571, "post_id": 32742290, "comment_id": 53325445, "body": "@sawa it is rails method, I should use <code>empty?</code> method  in ruby, thanks for reminding."}], "tags": [], "owner": {"reputation": 7525, "user_id": 1805902, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/0W7rW.png?s=128&g=1", "display_name": "pangpang", "link": "https://stackoverflow.com/users/1805902/pangpang"}, "is_accepted": false, "score": 2, "last_activity_date": 1443018490, "last_edit_date": 1443018490, "creation_date": 1443018370, "answer_id": 32742290, "question_id": 32741965, "link": "https://stackoverflow.com/questions/32741965/how-to-retrieve-different-positions-of-an-element-within-an-array/32742290#32742290", "title": "How to retrieve different positions of an element within an array", "body": "<pre><code>a = [\"blue\", \"red\", \"blue\", \"blue\", \"red\"]\nresult = a.map.with_index{|e,i| i if e == \"blue\"}.compact\n=&gt;[0,2,3]\nresult = nil if result.empty?\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 2, "last_activity_date": 1443024175, "creation_date": 1443024175, "answer_id": 32744368, "question_id": 32741965, "link": "https://stackoverflow.com/questions/32741965/how-to-retrieve-different-positions-of-an-element-within-an-array/32744368#32744368", "title": "How to retrieve different positions of an element within an array", "body": "<pre><code>def offsets(arr, target)\n  off = arr.each_index.select { |i| arr[i]==target }\n  off.empty? ? nil : off\nend\n\ncolors = %w| blue red blue blue red |\n\noffsets(colors, \"blue\")\n  #=&gt; [0,2,3]\noffsets(colors, \"chartreuse\")\n  #=&gt; nil\n</code></pre>\n\n<p>One could alternatively write:</p>\n\n<pre><code>def offsets(arr, target)\n  arr.index(target) &amp;&amp; arr.each_index.select { |i| arr[i]==target }\nend\n</code></pre>\n"}], "owner": {"reputation": 223, "user_id": 2425126, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/662234d1d667d032cd7835095c789e25?s=128&d=identicon&r=PG", "display_name": "cedric", "link": "https://stackoverflow.com/users/2425126/cedric"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "accepted_answer_id": 32742216, "answer_count": 4, "score": -1, "last_activity_date": 1443026029, "creation_date": 1443017494, "last_edit_date": 1443018173, "question_id": 32741965, "link": "https://stackoverflow.com/questions/32741965/how-to-retrieve-different-positions-of-an-element-within-an-array", "title": "How to retrieve different positions of an element within an array", "body": "<p>I would like to retrieve an array containing the (not only the first) positions of an element within an array. For instance in the following array:</p>\n\n<pre><code>[\"blue\", \"red\", \"blue\", \"blue\", \"red\"]\n</code></pre>\n\n<p>I would like to retrieve <code>[0, 2, 3]</code> when I pass <code>\"blue\"</code> as a parameter. Supposedly, if the element is nowhere in the array, the function should return <code>nil</code>.</p>\n"}, {"tags": ["ruby", "libgosu"], "comments": [{"owner": {"reputation": 2420, "user_id": 410342, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af5f0b031000821a8c179733db0a2f9e?s=128&d=identicon&r=PG", "display_name": "Shotgun Ninja", "link": "https://stackoverflow.com/users/410342/shotgun-ninja"}, "edited": false, "score": 0, "creation_date": 1443021936, "post_id": 32741782, "comment_id": 53327975, "body": "Okay, this looks overly complicated, and the generic variable names don&#39;t help. I&#39;m going to try to detangle what you have and figure it out."}, {"owner": {"reputation": 2420, "user_id": 410342, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af5f0b031000821a8c179733db0a2f9e?s=128&d=identicon&r=PG", "display_name": "Shotgun Ninja", "link": "https://stackoverflow.com/users/410342/shotgun-ninja"}, "edited": false, "score": 0, "creation_date": 1443022000, "post_id": 32741782, "comment_id": 53328029, "body": "The &quot;short answer&quot; part of me wants to recommend that you use modulo operators (which you&#39;re not using right now) to calculate the offset/wrapping of the screen and just store a single horizontal offset, then take that in your <code>draw</code> step, calculate true image offsets there, and render the two backgrounds using those offsets."}, {"owner": {"reputation": 2420, "user_id": 410342, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af5f0b031000821a8c179733db0a2f9e?s=128&d=identicon&r=PG", "display_name": "Shotgun Ninja", "link": "https://stackoverflow.com/users/410342/shotgun-ninja"}, "edited": false, "score": 0, "creation_date": 1443022072, "post_id": 32741782, "comment_id": 53328083, "body": "Are you doing vertical scroll as well?"}, {"owner": {"reputation": 2420, "user_id": 410342, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af5f0b031000821a8c179733db0a2f9e?s=128&d=identicon&r=PG", "display_name": "Shotgun Ninja", "link": "https://stackoverflow.com/users/410342/shotgun-ninja"}, "edited": false, "score": 0, "creation_date": 1443022119, "post_id": 32741782, "comment_id": 53328118, "body": "Also, do you need two <code>Gosu::Image</code> instances, or can you just call <code>draw</code> twice on the same one with different coordinates?"}, {"owner": {"reputation": 29, "user_id": 3163546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/zpFxo.jpg?s=128&g=1", "display_name": "prelibiton", "link": "https://stackoverflow.com/users/3163546/prelibiton"}, "reply_to_user": {"reputation": 2420, "user_id": 410342, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af5f0b031000821a8c179733db0a2f9e?s=128&d=identicon&r=PG", "display_name": "Shotgun Ninja", "link": "https://stackoverflow.com/users/410342/shotgun-ninja"}, "edited": false, "score": 0, "creation_date": 1443022220, "post_id": 32741782, "comment_id": 53328182, "body": "Only horizontal.Left to right.Thanks about the gosu::image instances.Did not know that.Gonna fix it."}], "answers": [{"comments": [{"owner": {"reputation": 29, "user_id": 3163546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/zpFxo.jpg?s=128&g=1", "display_name": "prelibiton", "link": "https://stackoverflow.com/users/3163546/prelibiton"}, "edited": false, "score": 1, "creation_date": 1443026707, "post_id": 32744936, "comment_id": 53330979, "body": "This is what I was looking for.Thank you!"}], "tags": [], "owner": {"reputation": 2420, "user_id": 410342, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af5f0b031000821a8c179733db0a2f9e?s=128&d=identicon&r=PG", "display_name": "Shotgun Ninja", "link": "https://stackoverflow.com/users/410342/shotgun-ninja"}, "is_accepted": true, "score": 1, "last_activity_date": 1443026156, "creation_date": 1443026156, "answer_id": 32744936, "question_id": 32741782, "link": "https://stackoverflow.com/questions/32741782/looping-background-image-in-ruby-side-scrolling-game/32744936#32744936", "title": "Looping background image in Ruby side-scrolling game", "body": "<h1>Assumptions &amp; Analysis</h1>\n\n<p>I'm assuming that <code>@x1</code> and <code>@y1</code> are the offset of the left-most background's origin relative to the screen. You also have <code>@player_x</code> and <code>@player_y</code>, which denote the player's position on the screen. Your player is kept horizontally in the center of the screen, moving vertically when jumping or falling, and your background only scrolls horizontally. Also, your window size is 640x440, and your background image is 700px wide and at least 440px tall.</p>\n\n<p>Your <code>update</code> step handles things like jumping (but only to the top of the screen) and simple, constant-velocity gravity, both by modifying the player's screen coordinates. It also provides a constant horizontal scroll by subtracting 3 units per frame from <code>@x1</code>, the horizontal camera coordinate in world-space.</p>\n\n<p>Your <code>draw</code> step then takes the background image and draws two of them, offsetting them by the camera offset <code>@x1</code> plus the shift for which image is which. <strong>This shift, however, isn't important, because we can calculate it fairly simply, and we're left without having to manipulate the additional state of remembering which one is which.</strong></p>\n\n<h1>Code Solution</h1>\n\n<p>Instead of remembering the counter values <code>@k</code> and <code>@p</code>, we're going to just modulo by the image width to eliminate the excess in <code>@x1</code> and get it where we need it to be. <code>@k</code> and <code>@p</code> are useless, so delete those. <code>SHIFT</code> can be deleted as well.</p>\n\n<p>Instead, we need to do the following:</p>\n\n<ul>\n<li>Calculate the screen offset of the left-most image</li>\n<li>Determine if two images need to be drawn instead of just one</li>\n<li>Draw the image(s)</li>\n</ul>\n\n<p>Our goal looks something like this:</p>\n\n<p><a href=\"https://i.stack.imgur.com/OPViV.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/OPViV.png\" alt=\"sliding background\"></a></p>\n\n<p>Our new code:</p>\n\n<pre><code>require 'gosu'\n\nclass GameWindow &lt; Gosu::Window\n  attr_accessor :x, :y # side note - are these used at all?\n\n  def initialize\n    super 640,440\n    @background  = Gosu::Image.new(\"./images/bg.png\")\n    @player      = Gosu::Image.new(\"./images/000.png\")\n    @x1, @y1 = 0, 0\n    @player_x, @player_y = 50, 50\n  end\n\n  def update\n    @x1 -= 3\n    @player_y += 1 if @player_y &lt;= 375\n    @player_y -= 3 if button_down?(Gosu::KbSpace) and @player_y &gt;= 0\n\n    @coordinates = Gosu::Image.from_text(\n      self, \"#{@x1}\", Gosu.default_font_name, 30)\n  end\n\n  def draw\n    # the important bits!\n    @local_x = @x1 % -@background.width\n    @background.draw(@local_x, @y1, 0)\n    @background.draw(@local_x + @background.width, @y1, 0) if @local_x &lt; (@background.width - self.width)\n\n    @player.draw(@player_x, @player_y, 0)\n    @coordinates.draw(0, 0, 1)\n  end\n\n  def button_down(id) # Side note: Does this work correctly?\n    $window.close if id == Gosu::KbEscape\n  end\n\nend\n\nwindow = GameWindow.new\nwindow.show\n</code></pre>\n\n<p>What this does is, it takes <code>@x1</code> and <em>modulos</em> it with the (negative) width of the image. This means, it gives the remainder of an integer division of the two numbers. Modulo is very useful when trying to ensure that an integer value \"wraps around\" after exceeding a limit in either direction; it effectively maps it to between 0 (inclusive) and the given number (exclusive). The results of this are illustrated in the graphic above.</p>\n\n<p>Keep in mind this solution only works as-is for your circumstances; vertical scrolling will require more code, and this will break pretty quickly if your window becomes wider than your background image.</p>\n"}], "owner": {"reputation": 29, "user_id": 3163546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/zpFxo.jpg?s=128&g=1", "display_name": "prelibiton", "link": "https://stackoverflow.com/users/3163546/prelibiton"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 660, "favorite_count": 1, "accepted_answer_id": 32744936, "answer_count": 1, "score": 1, "last_activity_date": 1443027955, "creation_date": 1443017007, "last_edit_date": 1443027955, "question_id": 32741782, "link": "https://stackoverflow.com/questions/32741782/looping-background-image-in-ruby-side-scrolling-game", "title": "Looping background image in Ruby side-scrolling game", "body": "<p>I want to loop the background image in a Ruby gosu side scrolling game.I have problem with the counters <code>@k</code> and <code>@p</code> which are used to translate the background image and the duplicated background image.I can't think of a good way to plus them.Here's the code to make it more clear.</p>\n\n<pre><code>require 'gosu'\n\nclass GameWindow &lt; Gosu::Window\nattr_accessor :x, :y\n\nSHIFT = 700\n\n def initialize\n  super 640,440\n  @background  = Gosu::Image.new(\"./images/bg.png\")\n  @player      = Gosu::Image.new(\"./images/000.png\")\n  @x1, @y1 = 0, 0\n  @player_x, @player_y = 50, 50\n  @k = 0    #counter\n  @p = 1    #counter\n end\n\n def update\n  @x1 -= 3\n  @player_y += 1 if @player_y &lt;= 375\n  @player_y -= 3 if button_down?(Gosu::KbSpace) and @player_y &gt;= 0\n\n  @coordinates = Gosu::Image.from_text(\n    self, \"#{@x1},#{@k}\", Gosu.default_font_name, 30)\n  #here should be the code for @k and @p\n end\n\n def draw\n  @background.draw(@x1  + @k*SHIFT, @y1, 0)\n  @background.draw(@x1 +  @p*SHIFT, @y1, 0)\n  @player.draw(@player_x, @player_y, 0)\n  @coordinates.draw(0, 0, 1)\n end\n\n def button_down(id)\n  $window.close if id == Gosu::KbEscape\n end\n\nend\n\nwindow = GameWindow.new\nwindow.show\n</code></pre>\n\n<p>So how do I plus the counters <code>@k</code> and <code>@p</code>.Tried this</p>\n\n<pre><code>if @x1 &gt; -(SHIFT+5)*@p and @x1 &lt; -SHIFT*@p  #705 and 700\n  @k += 2\nend\n\nif @k &gt; 0 and @x1 &gt; -SHIFT*@k - 5 and @x1 &lt; -SHIFT*@k - 3  #1405 and 1403\n  @p += 2 \nend\n</code></pre>\n\n<p>but it works only in the beginning(2-3 image shifts).\nAlso tried this </p>\n\n<pre><code>if @x1 == -SHIFT*@p\n  @k += 2\nend\n</code></pre>\n\n<p>and it did not work.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3"], "comments": [{"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 0, "creation_date": 1443016045, "post_id": 32741401, "comment_id": 53323484, "body": "Can you post the relevant code in the question?"}, {"owner": {"reputation": 3773, "user_id": 991903, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/J12Hi.jpg?s=128&g=1", "display_name": "Meier", "link": "https://stackoverflow.com/users/991903/meier"}, "edited": false, "score": 0, "creation_date": 1443019119, "post_id": 32741401, "comment_id": 53325860, "body": "how did you &quot;adding a export to CSV button&quot;? what does the code to handle the response to the button looks like?"}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 3512765, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/b60babe125ec71a0065c19ec7e7a0297?s=128&d=identicon&r=PG&f=1", "display_name": "user3512765", "link": "https://stackoverflow.com/users/3512765/user3512765"}, "edited": false, "score": 0, "creation_date": 1443016557, "post_id": 32741542, "comment_id": 53323905, "body": "Both Application and Hotels have the index.html.erb files."}, {"owner": {"reputation": 1868, "user_id": 1362453, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/f8ac2cc7e4e38841fb52ea58b4bf06ef?s=128&d=identicon&r=PG", "display_name": "Leo Brito", "link": "https://stackoverflow.com/users/1362453/leo-brito"}, "reply_to_user": {"reputation": 23, "user_id": 3512765, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/b60babe125ec71a0065c19ec7e7a0297?s=128&d=identicon&r=PG&f=1", "display_name": "user3512765", "link": "https://stackoverflow.com/users/3512765/user3512765"}, "edited": false, "score": 0, "creation_date": 1443016703, "post_id": 32741542, "comment_id": 53324007, "body": "Could you post the controllers&#39; <code>index</code> definitions?"}], "tags": [], "owner": {"reputation": 1868, "user_id": 1362453, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/f8ac2cc7e4e38841fb52ea58b4bf06ef?s=128&d=identicon&r=PG", "display_name": "Leo Brito", "link": "https://stackoverflow.com/users/1362453/leo-brito"}, "is_accepted": false, "score": 0, "last_activity_date": 1443017108, "last_edit_date": 1443017108, "creation_date": 1443016360, "answer_id": 32741542, "question_id": 32741401, "link": "https://stackoverflow.com/questions/32741401/error-when-adding-an-export-to-csv-button-to-ruby-on-rails-project/32741542#32741542", "title": "Error when adding an export to CSV button to Ruby On Rails project", "body": "<p>Rails expects to find views (e.g. html files) for the <code>hotels/index, application/index</code> (controller) actions. Did you define the appropriate view files?</p>\n\n<p><strong>EDIT</strong> Seems like a problem in your controller responses. This is <em>approximately</em> what you should have in the controller's <code>index</code> definition: </p>\n\n<pre><code>respond_to do |format|\n  format.html\n  format.csv { send_data @users.to_csv, filename: \"example.csv\" } # fill these with appropriate names\nend\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 3512765, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/b60babe125ec71a0065c19ec7e7a0297?s=128&d=identicon&r=PG&f=1", "display_name": "user3512765", "link": "https://stackoverflow.com/users/3512765/user3512765"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 233, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1443017108, "creation_date": 1443015985, "last_edit_date": 1443016009, "question_id": 32741401, "link": "https://stackoverflow.com/questions/32741401/error-when-adding-an-export-to-csv-button-to-ruby-on-rails-project", "title": "Error when adding an export to CSV button to Ruby On Rails project", "body": "<p>Im getting the following error when adding a export to CSV button on my Hotel Model. </p>\n\n<pre><code>Missing template hotels/index, application/index with {:locale=&gt;[:en], :formats=&gt;[:csv], :variants=&gt;[], :handlers=&gt;[:erb, :builder, :raw, :ruby, :coffee, :haml, :jbuilder]}. Searched in:\n  * \"/Users/kallan1/Desktop/GSW-CRM/app/views\"\n  * \"/Users/kallan1/.rbenv/versions/2.2.1/lib/ruby/gems/2.2.0/gems/devise-3.4.1/app/views\"\n</code></pre>\n\n<p>Thanks in advance and let me know if you need any more information</p>\n"}, {"tags": ["ruby", "service", "rubygems", "rvm"], "comments": [{"owner": {"reputation": 6689, "user_id": 273444, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26988136c0514172417b7c7c863733f2?s=128&d=identicon&r=PG", "display_name": "Alexey Shein", "link": "https://stackoverflow.com/users/273444/alexey-shein"}, "edited": false, "score": 0, "creation_date": 1443027262, "post_id": 32741137, "comment_id": 53331281, "body": "Where do you have your RVM installed?"}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 5367865, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f0bf8b6f9a43fc427b9667a521c65c56?s=128&d=identicon&r=PG&f=1", "display_name": "A. Front", "link": "https://stackoverflow.com/users/5367865/a-front"}, "edited": false, "score": 0, "creation_date": 1443103847, "post_id": 32745483, "comment_id": 53366191, "body": "Thanks for this, I am actually waiting to see if I will be clear to do it as a root install since this is a big multiuser system."}], "tags": [], "owner": {"reputation": 6689, "user_id": 273444, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26988136c0514172417b7c7c863733f2?s=128&d=identicon&r=PG", "display_name": "Alexey Shein", "link": "https://stackoverflow.com/users/273444/alexey-shein"}, "is_accepted": true, "score": 0, "last_activity_date": 1443028048, "creation_date": 1443028048, "answer_id": 32745483, "question_id": 32741137, "link": "https://stackoverflow.com/questions/32741137/rvm-ruby-version-misinteraction-with-freebsd-service/32745483#32745483", "title": "RVM ruby version misinteraction with FreeBSD service", "body": "<p>You need to check if rvm is properly loaded in your service script. Put this command into your script</p>\n\n<pre><code>type rvm | head -1\n</code></pre>\n\n<p>it should output <code>rvm is a function</code>. If it doesn't, you need to properly load your rvm:</p>\n\n<pre><code>\\# Load RVM into a shell session *as a function*\nif [[ -s \"$HOME/.rvm/scripts/rvm\" ]] ; then\n\n  \\# First try to load from a user install\n  source \"$HOME/.rvm/scripts/rvm\"\n\nelif [[ -s \"/usr/local/rvm/scripts/rvm\" ]] ; then\n\n  \\# Then try to load from a root install\n  source \"/usr/local/rvm/scripts/rvm\"\n\nelse\n\n  printf \"ERROR: An RVM installation was not found.\\n\"\n\nfi\n</code></pre>\n\n<p>Change <code>$HOME</code> to absolute path, if it doesn't work for you. After rvm is properly loaded you can use usual <code>rvm use &lt;version&gt;</code> further in your script. </p>\n\n<p>Look here for the details: <a href=\"http://rvm.io/workflow/scripting\" rel=\"nofollow\">http://rvm.io/workflow/scripting</a>. </p>\n"}], "owner": {"reputation": 3, "user_id": 5367865, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f0bf8b6f9a43fc427b9667a521c65c56?s=128&d=identicon&r=PG&f=1", "display_name": "A. Front", "link": "https://stackoverflow.com/users/5367865/a-front"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 118, "favorite_count": 0, "accepted_answer_id": 32745483, "answer_count": 1, "score": 0, "last_activity_date": 1443028048, "creation_date": 1443015344, "last_edit_date": 1443022082, "question_id": 32741137, "link": "https://stackoverflow.com/questions/32741137/rvm-ruby-version-misinteraction-with-freebsd-service", "title": "RVM ruby version misinteraction with FreeBSD service", "body": "<p>So I have RVM installed, put root and $account into the rvm group.</p>\n\n<p>$account installs ruby 1.9.3-p551 into RVM and I set up RVM to enable</p>\n\n<pre><code>rvm use 1.9.3\n</code></pre>\n\n<p>And then I check</p>\n\n<pre><code>ruby -v\nruby 1.9.3-p551 (2014-11-13 revision 48407) [x86_64-freebsd10.1]\n</code></pre>\n\n<p>Which confirms that ruby has been changed from the system-wide 2.1 to the rvm-masked 1.9.3</p>\n\n<p>The service I attempt to run is Snorby if that helps open any eyes, and so I start it with</p>\n\n<pre><code>service snorby start\n</code></pre>\n\n<p>To which it replies</p>\n\n<pre><code>ruby1.9.3-p551 is not installed.\nTo install do: 'rvm install ruby-1.9.3-p551'\nruby1.9.3-p551 is not installed.\nTo install do: 'rvm install ruby-1.9.3-p551'\nruby1.9.3-p551 is not installed.\nruby: ruby-1.9.3-p551 not available via rvm (exit code 1)\n</code></pre>\n\n<p>If I interpreted it right, ruby was the one that returned the last error which makes me think some script is either expecting ruby-1.9.3-p551 to be in an environment variable that it is not, or when I attempt to run a service script, it is run under a different user and therefore needs to be added to the rvm group.</p>\n\n<p>To try and confirm, I ran grep in one of the directories that almost all involved files reside:</p>\n\n<pre><code>grep -rnwl '/usr/local' -e \"is not installed\"\n</code></pre>\n\n<p>Just to find the possible script that would be reading this error, almost all the ones returned were ruby or rvm related. I'm unsure where to go next with this as reinstalling 1.9.3 does not fix the issue and I do not want to modify configs haphazardly.</p>\n\n<p>Addendum_1.1:</p>\n\n<p>Upon further research the rest of Addendum_1 is misinformed, in the script $0 would resolve to the correct directory, therefore both accounts resolve properly to</p>\n\n<pre><code>/correct/directory\n</code></pre>\n\n<p>I will italicize the remainder of Addendum_1 to leave it as background material.</p>\n\n<p><em>I looked into the service script and realized that it attempts to read the .ruby-version in the wrong directory for the $account I have, on all other accounts the following code:</em></p>\n\n<pre><code>echo $(cd $(dirname $0)/.. &amp;&amp; pwd)\n</code></pre>\n\n<p><em>results in:</em></p>\n\n<pre><code>/correct/dir\n</code></pre>\n\n<p><em>But in $account the result is:</em></p>\n\n<pre><code>/\n</code></pre>\n\n<p>Addendum_2:</p>\n\n<p>Further research reveals that $? is being used to check exit codes and they are not lining up at all. When I test the exit code in $account by doing</p>\n\n<pre><code>rvm use $version &gt;/dev/null; echo $?\n</code></pre>\n\n<p>It returns 0, which is that everything's fine.</p>\n\n<p>When I edit the script though and force it to echo $? after it uses</p>\n\n<pre><code>rvm use $dynamically_acquired_version &gt;/dev/null\n</code></pre>\n\n<p>It returns 1, which makes me suspect the script is being run as a different $account. I even checked if $version = $dynamically_acquired_version and they both are identical.</p>\n\n<p>Addendum_3:</p>\n\n<p>My suspicions are confirmed by injecting the following right at the beginning of the script:</p>\n\n<pre><code>if [ -z \"$USER\" ]; then\n  echo \"USER IS NULL\"\nfi\n</code></pre>\n\n<p>The user is changed, and in fact is not even defined, the way I have RVM installed is that only root and $account are in the rvm group. Hopefully things will clear up extremely soon.</p>\n\n<p>I'll update this further when more results come up, if anyone happens upon this though feel free to throw me a bone while I'm digging.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "session", "caching", "redis"], "answers": [{"comments": [{"owner": {"reputation": 3809, "user_id": 518500, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/853a5fb8148dc8e1678c983f0a4cbaf5?s=128&d=identicon&r=PG", "display_name": "codingbunny", "link": "https://stackoverflow.com/users/518500/codingbunny"}, "edited": false, "score": 0, "creation_date": 1443081673, "post_id": 32755587, "comment_id": 53351956, "body": "checked, but we do not use fragment caching for the forms, or anything related to views really."}], "tags": [], "owner": {"reputation": 67, "user_id": 3859866, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47e7e36767c79096e120522a101818cf?s=128&d=identicon&r=PG&f=1", "display_name": "HEraju", "link": "https://stackoverflow.com/users/3859866/heraju"}, "is_accepted": false, "score": 0, "last_activity_date": 1443079276, "creation_date": 1443079276, "answer_id": 32755587, "question_id": 32741135, "link": "https://stackoverflow.com/questions/32741135/users-logged-out-after-switching-to-redis-cache/32755587#32755587", "title": "Users logged out after switching to Redis Cache", "body": "<p>One of the reason might be CSRF mismatch, this is why the users are been logged off.\nCheck if you have a fragment cached on form's where CSRF are stored in cache, in such case try omitting forms from caching.</p>\n"}], "owner": {"reputation": 3809, "user_id": 518500, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/853a5fb8148dc8e1678c983f0a4cbaf5?s=128&d=identicon&r=PG", "display_name": "codingbunny", "link": "https://stackoverflow.com/users/518500/codingbunny"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 129, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1443079276, "creation_date": 1443015344, "question_id": 32741135, "link": "https://stackoverflow.com/questions/32741135/users-logged-out-after-switching-to-redis-cache", "title": "Users logged out after switching to Redis Cache", "body": "<p>Okay,</p>\n\n<p>We are running a Ruby on Rails application, and just recently switched from the standard cookie-store for our sessions to an actual Redis Cache for the session-store.</p>\n\n<p>We're receiving now sporadic reports that people lose their login session and need to login again on the application.</p>\n\n<p>Our Redis is configured tp persist the information, and we are not explicitly calling <code>Rails.cache.clear</code> or anything.\nThe implementation of our Cache looks as follows:</p>\n\n<pre><code>class Application &lt; Rails::Application\n  # Redis Cache Configuration.\n  config.cache_store = :redis_store, Chamber[:redis][:cache]\n  config.session_store :redis_store,\n    redis_server: Chamber[:redis][:cache],\n    key: Chamber[:redis][:session_key],\n    expire_after: 1.year\n  config.action_dispatch.rack_cache = {\n    metastore: \"#{Chamber[:redis][:cache]}/metastore\",\n    entitystore: \"#{Chamber[:redis][:cache]}/entitystore\"\n  }\nend\n</code></pre>\n\n<p>I'm having a really hard time reproducing the behaviour, or running into the situation myself. </p>\n\n<p>Can anyone who has implemented a similar system provide some feedback/input to the issue at hand?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "if-statement", "mongoid"], "comments": [{"owner": {"reputation": 8861, "user_id": 561382, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/FC1BR.jpg?s=128&g=1", "display_name": "Victor Moroz", "link": "https://stackoverflow.com/users/561382/victor-moroz"}, "edited": false, "score": 0, "creation_date": 1443016757, "post_id": 32740837, "comment_id": 53324054, "body": "(1) Remove <code>self.</code> everywhere, it&#39;s not required. (2) Remove <code>.nil?</code> and swap clauses, non-nil value is considered <code>true</code> in Ruby"}], "answers": [{"tags": [], "owner": {"reputation": 1868, "user_id": 1362453, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/f8ac2cc7e4e38841fb52ea58b4bf06ef?s=128&d=identicon&r=PG", "display_name": "Leo Brito", "link": "https://stackoverflow.com/users/1362453/leo-brito"}, "is_accepted": true, "score": 1, "last_activity_date": 1443015645, "last_edit_date": 1443015645, "creation_date": 1443014921, "answer_id": 32740946, "question_id": 32740837, "link": "https://stackoverflow.com/questions/32740837/reducing-an-if-statement-to-generate-a-mongoid-query/32740946#32740946", "title": "Reducing an if statement to generate a mongoid query", "body": "<p>Not exactly shorter, but I'd say its more readable:</p>\n\n<pre><code>bank_accounts = self.client.bank_accounts\nbank_accounts = bank_accounts.where(_id: self.client_bank_account_id) unless self.client_bank_account_id.nil?\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 9125, "user_id": 671422, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/85da2a1fa3e4017815ff5d3a3d70fabe?s=128&d=identicon&r=PG", "display_name": "Yule", "link": "https://stackoverflow.com/users/671422/yule"}, "is_accepted": false, "score": 0, "last_activity_date": 1443018397, "creation_date": 1443018397, "answer_id": 32742306, "question_id": 32740837, "link": "https://stackoverflow.com/questions/32740837/reducing-an-if-statement-to-generate-a-mongoid-query/32742306#32742306", "title": "Reducing an if statement to generate a mongoid query", "body": "<p>That depends, are you going for 'shortest code possible' code golf style or simply the nicest, possibly easier reading code.</p>\n\n<p>I'd go with:</p>\n\n<pre><code>bank_accounts = client.bank_accounts\nbank_accounts = bank_accounts.where(_id: client_bank_account_id) if client_bank_account_id\n</code></pre>\n\n<p>Notes: </p>\n\n<ul>\n<li>You don't need 'self'.</li>\n<li>nil checks are probably not the best way to go.</li>\n<li>Lazy loading should stop there being two calls to the db here</li>\n</ul>\n"}], "owner": {"reputation": 65, "user_id": 1122710, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7804dba0d28b8c92d2678b37808fd5d6?s=128&d=identicon&r=PG", "display_name": "nazshal", "link": "https://stackoverflow.com/users/1122710/nazshal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 28, "favorite_count": 0, "accepted_answer_id": 32740946, "answer_count": 2, "score": 0, "last_activity_date": 1443018397, "creation_date": 1443014658, "last_edit_date": 1443015124, "question_id": 32740837, "link": "https://stackoverflow.com/questions/32740837/reducing-an-if-statement-to-generate-a-mongoid-query", "title": "Reducing an if statement to generate a mongoid query", "body": "<p>I have the code below and I would like to know if it possible to reduce the code.</p>\n\n<pre><code>bank_accounts = self.client_bank_account_id.nil? ? self.client.bank_accounts : self.client.bank_accounts.where(_id: self.client_bank_account_id)\n</code></pre>\n\n<p>I only need the <code>where</code> call when <code>client_bank_account_id</code> is not <code>nil</code>.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "sidekiq"], "answers": [{"tags": [], "owner": {"reputation": 66, "user_id": 73642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15e6b2478ed1130dabc207da2f84e03e?s=128&d=identicon&r=PG", "display_name": "Sergei Silnov", "link": "https://stackoverflow.com/users/73642/sergei-silnov"}, "is_accepted": true, "score": 0, "last_activity_date": 1443015318, "creation_date": 1443015318, "answer_id": 32741128, "question_id": 32740162, "link": "https://stackoverflow.com/questions/32740162/how-to-handle-job-failure-properly-in-sidekiq/32741128#32741128", "title": "How to handle job failure properly in sidekiq", "body": "<p>This method is normal solution, the only thing that you may want to do, is to update retry time. Just add to your worker.</p>\n\n<pre><code>sidekiq_retry_in do |count|\n  10 * (count + 1) # (i.e. 10, 20, 30, 40)\nend\n</code></pre>\n\n<p>More info in sidekiq docs: <a href=\"https://github.com/mperham/sidekiq/wiki/Error-Handling\" rel=\"nofollow\">https://github.com/mperham/sidekiq/wiki/Error-Handling</a></p>\n"}], "owner": {"reputation": 1214, "user_id": 3868605, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/a10f4fb3f76237d61cccd3997dcca1c7?s=128&d=identicon&r=PG&f=1", "display_name": "alobodzk", "link": "https://stackoverflow.com/users/3868605/alobodzk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 670, "favorite_count": 0, "accepted_answer_id": 32741128, "answer_count": 1, "score": 1, "last_activity_date": 1443015318, "creation_date": 1443012786, "question_id": 32740162, "link": "https://stackoverflow.com/questions/32740162/how-to-handle-job-failure-properly-in-sidekiq", "title": "How to handle job failure properly in sidekiq", "body": "<p>I have an application that does some processing on db data, sometimes I have optimistic concurrency error between two threads. How should I handle it with sidekiq?</p>\n\n<p>For now I throw the exception to fail the job and let the sidekiq retry later, but maybe it is not optimal?</p>\n\n<p>Is there any other method to fail a job more gracefully?</p>\n\n<p>Cheers</p>\n"}, {"tags": ["ruby", "serial-port", "ruby-serialport"], "answers": [{"comments": [{"owner": {"reputation": 119, "user_id": 5026338, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/9206ef121d9ca2cf62275de49b4fef5c?s=128&d=identicon&r=PG&f=1", "display_name": "wuhlcom", "link": "https://stackoverflow.com/users/5026338/wuhlcom"}, "edited": false, "score": 1, "creation_date": 1443060831, "post_id": 32745681, "comment_id": 53345029, "body": "both of  &quot;serial_obj.write(&quot;\\C-c\\n&quot;)&quot;   \u201cserial_obj.write(&quot;\\cc\\n&quot;)\u201d  solve my question!"}, {"owner": {"reputation": 2420, "user_id": 410342, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af5f0b031000821a8c179733db0a2f9e?s=128&d=identicon&r=PG", "display_name": "Shotgun Ninja", "link": "https://stackoverflow.com/users/410342/shotgun-ninja"}, "reply_to_user": {"reputation": 119, "user_id": 5026338, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/9206ef121d9ca2cf62275de49b4fef5c?s=128&d=identicon&r=PG&f=1", "display_name": "wuhlcom", "link": "https://stackoverflow.com/users/5026338/wuhlcom"}, "edited": false, "score": 0, "creation_date": 1443547514, "post_id": 32745681, "comment_id": 53534098, "body": "If these answer your question, you should accept this as the answer."}], "tags": [], "owner": {"reputation": 2420, "user_id": 410342, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af5f0b031000821a8c179733db0a2f9e?s=128&d=identicon&r=PG", "display_name": "Shotgun Ninja", "link": "https://stackoverflow.com/users/410342/shotgun-ninja"}, "is_accepted": false, "score": 0, "last_activity_date": 1443028751, "creation_date": 1443028751, "answer_id": 32745681, "question_id": 32740051, "link": "https://stackoverflow.com/questions/32740051/how-to-send-ctrlc-cmd-through-on-the-serial-line-by-the-ruby-serialport/32745681#32745681", "title": "How to send &quot;ctrl+c&quot; cmd through on the serial line by the ruby serialport", "body": "<p>You have to write the <code>ETX</code> character, which is <code>\"\\x03\"</code>. You may also be able to use Ruby's \"control\" escape sequences, such as <code>\"\\cc\"</code> or <code>\"\\C-c\"</code>, as referenced <a href=\"https://en.wikibooks.org/wiki/Ruby_Programming/Syntax/Literals#Backslash_Notation\" rel=\"nofollow\">here</a>, but I haven't tried this myself.</p>\n"}], "owner": {"reputation": 119, "user_id": 5026338, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/9206ef121d9ca2cf62275de49b4fef5c?s=128&d=identicon&r=PG&f=1", "display_name": "wuhlcom", "link": "https://stackoverflow.com/users/5026338/wuhlcom"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 325, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1443028751, "creation_date": 1443012453, "question_id": 32740051, "link": "https://stackoverflow.com/questions/32740051/how-to-send-ctrlc-cmd-through-on-the-serial-line-by-the-ruby-serialport", "title": "How to send &quot;ctrl+c&quot; cmd through on the serial line by the ruby serialport", "body": "<p>I send \"top\" to the device through serailport,then read the top info\n<br>\nAfter that, I don't known how to stop the \"top\"!</p>\n\n<pre><code>require 'serialport'\nport       = 2\nargs       ={\"baud\"=&gt;57600, \"data_bits\"=&gt;8,\"stop_bits\"=&gt;1,\"parity\"=&gt;SerialPort::NONE}\nserial_obj = SerialPort.new(port, args)\nserial_obj.read_timeout=1000\nserial_obj.write(\"top\\n\")\nprint serial_obj.read\n</code></pre>\n"}, {"tags": ["ruby", "encoding", "utf-8", "yaml"], "answers": [{"tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 1, "last_activity_date": 1443010871, "last_edit_date": 1443010871, "creation_date": 1443009777, "answer_id": 32739081, "question_id": 32738154, "link": "https://stackoverflow.com/questions/32738154/ruby-parse-yaml-from-ansi-to-utf-8/32739081#32739081", "title": "Ruby: parse yaml from ANSI to UTF-8", "body": "<p>The easiest way to deal with wrong encoded files is to read it in its original encoding, convert to UTF-8 and then pass to receiver (YAML in this case):</p>\n\n<pre><code>\u25b6 YAML.load File.read('/tmp/q.yml', encoding: 'ISO-8859-1').force_encoding 'UTF-8'\n#\u21d2 {:excel=&gt;{\"Test\"=&gt;{\"eins_\u00c4\"=&gt;:eins, \"zwei_\u00e4\"=&gt;:zwei}}}\n</code></pre>\n\n<p>For Ruby 1.8 you should probably use <code>Iconv</code>, but the whole process (read as is, than encode, than yaml-load) remains the same.</p>\n"}], "owner": {"reputation": 1217, "user_id": 4108363, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/IWGPW.png?s=128&g=1", "display_name": "LPrc", "link": "https://stackoverflow.com/users/4108363/lprc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1197, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1443010871, "creation_date": 1443007119, "last_edit_date": 1443007528, "question_id": 32738154, "link": "https://stackoverflow.com/questions/32738154/ruby-parse-yaml-from-ansi-to-utf-8", "title": "Ruby: parse yaml from ANSI to UTF-8", "body": "<p><strong>Problem:</strong></p>\n\n<p>I have the yaml file <code>test.yml</code> that can be encoded in UTF-8 or ANSI:</p>\n\n<pre><code>:excel:\n  \"Test\":\n    \"eins_\u00c4\": :eins\n    \"zwei_\u00e4\": :zwei\n</code></pre>\n\n<p>When I load the file I need it to be encoded in UTF-8 therefore tried to convert all of the Strings:</p>\n\n<pre><code>require 'yaml'\nfile = YAML::load_file('C:/Users/S61256/Desktop/test.yml')\n\nrequire 'iconv'\nCONV = Iconv.new(\"UTF-8\", \"ASCII\")\n\nclass Test\n\n    def convert(hash)\n        hash.each{ |key, value| \n            convert(value) if value.is_a? Hash\n            CONV.iconv(value) if value.is_a? String\n            CONV.iconv(key) if key.is_a? String\n        }\n    end\n\nend\n\nt = Test.new\nconverted = t.convert(file)\n\np file\np converted\n</code></pre>\n\n<p>But when I try to run this example script it prints:</p>\n\n<p><code>in 'iconv': eins_- (Iconv:IllegalSequence)</code></p>\n\n<p><strong>Questions:</strong></p>\n\n<p><strong>1.</strong> Why does the error show up and how can I solve it?</p>\n\n<p><strong>2.</strong> Is there another (more appropiate) way to get the file's content in UTF-8?</p>\n\n<p><strong>Note:</strong>\nI need this code to be compatible to Ruby 1.8 as well as Ruby 2.2. For Ruby 2.2 I would replace all the Iconv stuff with String::encode, but that's another topic.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "json"], "comments": [{"owner": {"reputation": 3796, "user_id": 3686898, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/IvIuI.jpg?s=128&g=1", "display_name": "Philipp Meissner", "link": "https://stackoverflow.com/users/3686898/philipp-meissner"}, "edited": false, "score": 0, "creation_date": 1443006832, "post_id": 32737917, "comment_id": 53316614, "body": "It is trying to render your destroy.html  template, but can not find it. I suggest you render your (most likely) index action afterwards to see the changes in effect. Something like: <code>render: &quot;index&quot; </code> should do the job."}, {"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 0, "creation_date": 1443006924, "post_id": 32737917, "comment_id": 53316682, "body": "Please post the full error message"}, {"owner": {"reputation": 103, "user_id": 5345960, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/eed98b48854516c5bdd72dd9b1c79ce1?s=128&d=identicon&r=PG&f=1", "display_name": "Alexander", "link": "https://stackoverflow.com/users/5345960/alexander"}, "edited": false, "score": 0, "creation_date": 1443007122, "post_id": 32737917, "comment_id": 53316819, "body": "Yes, it works! But why do we need to render this page? I would simply delete the entries, and then dynamically refresh the page java script."}, {"owner": {"reputation": 18193, "user_id": 401092, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/cdc56942ca5219ccec6147129cbff41d?s=128&d=identicon&r=PG", "display_name": "Rog", "link": "https://stackoverflow.com/users/401092/rog"}, "edited": false, "score": 0, "creation_date": 1443007262, "post_id": 32737917, "comment_id": 53316913, "body": "You are sending the delete action via HTML so it&#39;s going to trigger a html response. Why do you want to delete it &quot;by JSON&quot;?"}, {"owner": {"reputation": 103, "user_id": 5345960, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/eed98b48854516c5bdd72dd9b1c79ce1?s=128&d=identicon&r=PG&f=1", "display_name": "Alexander", "link": "https://stackoverflow.com/users/5345960/alexander"}, "edited": false, "score": 0, "creation_date": 1443007971, "post_id": 32737917, "comment_id": 53317427, "body": "Okay, so my job, I use datatables, I want by pressing the &quot;Delete&quot; page is not updated, and simply delete the entry, and then updated datatables."}], "answers": [{"tags": [], "owner": {"reputation": 7525, "user_id": 1805902, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/0W7rW.png?s=128&g=1", "display_name": "pangpang", "link": "https://stackoverflow.com/users/1805902/pangpang"}, "is_accepted": true, "score": 1, "last_activity_date": 1443007355, "creation_date": 1443007355, "answer_id": 32738228, "question_id": 32737917, "link": "https://stackoverflow.com/questions/32737917/ruby-on-rails-delete-format-json/32738228#32738228", "title": "Ruby on Rails delete format JSON", "body": "<pre><code> def destroy\n    @product.destroy\n    respond_to do |format|\n      format.html { redirect_to home_path, notice: 'Article was successfully destroyed' }\n      format.json { head :no_content }\n    end\n  end\n</code></pre>\n\n<p>You should redirect to other page if product was deleted.</p>\n"}], "owner": {"reputation": 103, "user_id": 5345960, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/eed98b48854516c5bdd72dd9b1c79ce1?s=128&d=identicon&r=PG&f=1", "display_name": "Alexander", "link": "https://stackoverflow.com/users/5345960/alexander"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1998, "favorite_count": 0, "accepted_answer_id": 32738228, "answer_count": 1, "score": 1, "last_activity_date": 1443007355, "creation_date": 1443006383, "question_id": 32737917, "link": "https://stackoverflow.com/questions/32737917/ruby-on-rails-delete-format-json", "title": "Ruby on Rails delete format JSON", "body": "<p>I'm trying to delete a row from the table by JSON.\nThe delete button is as follows:</p>\n\n<pre><code>link_to('Delete', product, method: :delete, data: { confirm: 'Are you sure?' }, remote: true)\n</code></pre>\n\n<p>controller:</p>\n\n<pre><code>  def destroy\n    @product.destroy\n    respond_to do |format|\n      format.html\n      format.json { head :no_content }\n    end\n  end\n</code></pre>\n\n<p>When I press the button, the record is deleted, but an error in the console:</p>\n\n<p><strong>ActionView::MissingTemplate Missing template products/destroy</strong></p>\n\n<p>What am i doing wrong?</p>\n"}, {"tags": ["ruby", "file", "io"], "comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1443013451, "post_id": 32737882, "comment_id": 53321379, "body": "It is your program. You have to tell why your program creates a temporal file and reads it from there. We cannot help without knowing why that is happening."}], "answers": [{"comments": [{"owner": {"reputation": 444, "user_id": 2606208, "user_type": "registered", "profile_image": "https://graph.facebook.com/1332243860/picture?type=large", "display_name": "Abhishek Sarkar", "link": "https://stackoverflow.com/users/2606208/abhishek-sarkar"}, "edited": false, "score": 0, "creation_date": 1443020386, "post_id": 32738142, "comment_id": 53326842, "body": "Why would you down vote this? This is essentially what the asker is trying to do... <i>I want my program to read from the current configuration file in order to have the most recent changes in my program.</i>"}], "tags": [], "owner": {"reputation": 444, "user_id": 2606208, "user_type": "registered", "profile_image": "https://graph.facebook.com/1332243860/picture?type=large", "display_name": "Abhishek Sarkar", "link": "https://stackoverflow.com/users/2606208/abhishek-sarkar"}, "is_accepted": false, "score": -1, "last_activity_date": 1443007077, "creation_date": 1443007077, "answer_id": 32738142, "question_id": 32737882, "link": "https://stackoverflow.com/questions/32737882/read-file-that-changes-regularly/32738142#32738142", "title": "Read file that changes regularly", "body": "<p>If you are open to using a gem for this, use the following.</p>\n\n<p><a href=\"https://github.com/thomasfl/filewatcher\" rel=\"nofollow\">https://github.com/thomasfl/filewatcher</a></p>\n\n<p>Usage</p>\n\n<pre><code>FileWatcher.new([\"lib/\", \"Rakefile\"]).watch do |filename|\n  puts \"Changed \" + filename\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2560, "user_id": 5112122, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206053108358704/picture?type=large", "display_name": "Horacio", "link": "https://stackoverflow.com/users/5112122/horacio"}, "is_accepted": true, "score": 0, "last_activity_date": 1443017323, "last_edit_date": 1443017323, "creation_date": 1443016643, "answer_id": 32741651, "question_id": 32737882, "link": "https://stackoverflow.com/questions/32737882/read-file-that-changes-regularly/32741651#32741651", "title": "Read file that changes regularly", "body": "<p>If you are on linux, you can try linux <a href=\"https://en.wikipedia.org/wiki/Inotify\" rel=\"nofollow\">inotfy service</a>, this is the <a href=\"https://github.com/nex3/rb-inotify\" rel=\"nofollow\">gem</a>. This is an <a href=\"https://github.com/aredridel/ruby-inotify/blob/master/examples/watcher.rb\" rel=\"nofollow\">example of how to use it</a>.</p>\n\n<p>First of all you have to run</p>\n\n<pre><code>gem install ruby-inotify\n</code></pre>\n\n<p>and then try this code</p>\n\n<pre><code>  notifier = Inotify.new\n  notifier.add_watch(filename, Inotify::CREATE | Inotify::MODIFY)\n\n  notifier.each_event do |ev|\n    file = File.open(filename, \"r\")\n    data = JSON.parse(file.read)\n    file.close\n  end\n</code></pre>\n"}], "owner": {"reputation": 55, "user_id": 3572412, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e2916852ef1087948755b749e86b06cb?s=128&d=identicon&r=PG&f=1", "display_name": "user3572412", "link": "https://stackoverflow.com/users/3572412/user3572412"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 37, "favorite_count": 0, "accepted_answer_id": 32741651, "answer_count": 2, "score": 0, "last_activity_date": 1443017323, "creation_date": 1443006292, "last_edit_date": 1443013260, "question_id": 32737882, "link": "https://stackoverflow.com/questions/32737882/read-file-that-changes-regularly", "title": "Read file that changes regularly", "body": "<p>My program reads a configuration file every 3 sec. within a while loop. Once I change the configuration file with an external editor like notepad, my program creates a temporary file for some reason and keeps reading from there.</p>\n\n<p>I want my program to read from the current configuration file in order to have the most recent changes in my program.</p>\n\n<p>What can I do about it? </p>\n\n<p>Simplified code:</p>\n\n<pre><code>while(true)\n  file = File.open(filename, \"r\")\n  data = JSON.parse(file.read) if file\n  file.close\n  sleep(3)\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord", "activemodel", "acts-as-audited"], "answers": [{"tags": [], "owner": {"reputation": 16407, "user_id": 157752, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Qgx5T.jpg?s=128&g=1", "display_name": "Thilo", "link": "https://stackoverflow.com/users/157752/thilo"}, "is_accepted": true, "score": 4, "last_activity_date": 1443007696, "last_edit_date": 1443007696, "creation_date": 1443007166, "answer_id": 32738166, "question_id": 32737844, "link": "https://stackoverflow.com/questions/32737844/how-to-make-a-plain-ruby-object-assignable-as-active-record-association/32738166#32738166", "title": "How to make a plain ruby object assignable as active record association", "body": "<p>Instead of hacking deeper and deeper to replicate <code>ActiveRecord</code> functionality, you may want to consider actually inheriting from <code>ActiveRecord::Base</code> instead of including <code>ActiveModel</code>. Your only constraint is that you don't have a table. There's a gem for that:</p>\n\n<p><a href=\"https://github.com/softace/activerecord-tableless\" rel=\"nofollow\">activerecord-tableless</a></p>\n\n<p>This class works with your sample app:</p>\n\n<pre><code>require 'active_record'\nrequire 'activerecord-tableless'\n\nclass User &lt; ActiveRecord::Base\n  has_no_table\n\n  # required so ActiveRecord doesn't try to create a new associated\n  # User record with the audit\n  def new_record?\n    false\n  end\n\n  def id\n    42\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 20648, "user_id": 574190, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/05e52599c776367d40161520b3c7dc88?s=128&d=identicon&r=PG", "display_name": "David Tuite", "link": "https://stackoverflow.com/users/574190/david-tuite"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 474, "favorite_count": 0, "accepted_answer_id": 32738166, "answer_count": 1, "score": 3, "last_activity_date": 1443009633, "creation_date": 1443006172, "last_edit_date": 1443009633, "question_id": 32737844, "link": "https://stackoverflow.com/questions/32737844/how-to-make-a-plain-ruby-object-assignable-as-active-record-association", "title": "How to make a plain ruby object assignable as active record association", "body": "<p>I have an <code>Audit</code> class which is backed by ActiveRecord.</p>\n\n<pre><code>class Audit &lt; ActiveRecord::Base\n  belongs_to :user, polymorphic: true\nend\n</code></pre>\n\n<p>I have a <code>User</code> class which is a plain ruby object with some ActiveModel functionality included. It's not a database model because my users are actually stored in a different database and served over an API.</p>\n\n<pre><code>class User\n  include ActiveModel::Conversion\n  include ActiveModel::Validations\n  extend  ActiveModel::Naming\n\n  def self.primary_key\n    'id'\n  end\n\n  def id\n    42\n  end\n\n  def persisted?\n    false\n  end\nend\n</code></pre>\n\n<p>I'm trying to assign a user to an audit like this:</p>\n\n<pre><code>audit = Audit.new\naudit.user = User.new\naudit.save!\n</code></pre>\n\n<p>From a data perspective, this should work ok. To define a polymorphic association, we need to put values into two columns on the audits table. We can set <code>audits.user_id</code> to the value <code>42</code> and <code>audits.user_type</code> to the string \"User\".</p>\n\n<p>However, I hit an exception:</p>\n\n<pre><code>undefined method `_read_attribute' for #&lt;User:0x007f85faa49520 @attributes={\"id\"=&gt;42}&gt; (NoMethodError)\nactive_record/associations/belongs_to_polymorphic_association.rb:13:in `replace_keys'\n</code></pre>\n\n<p>I traced that back to the <code>ActiveRecord</code> source and it seems to be defined <a href=\"https://github.com/rails/rails/blob/9f1b5c9b4032d081f5b7d7fe9697ba24e2ae3ff8/activerecord/lib/active_record/attribute_methods/read.rb\" rel=\"nofollow\">here</a>. Unfortunately, the fact that it's <code>ActiveRecord</code> rather than <code>ActiveModel</code> means that I can't include that mixin into my class.</p>\n\n<p>I tried defining my own <code>_read_attribute</code> method but I go down a rabbit hole of having to redefine more and more ActiveRecord functionality like <a href=\"https://github.com/rails/rails/blob/3e36db4406beea32772b1db1e9a16cc1e8aea14c/activerecord/lib/active_record/attribute_set.rb\" rel=\"nofollow\">AttributeSet</a> and so on.</p>\n\n<p>I also realise that I can workaround the problem by assigning <code>Audit#user_type</code> and <code>Audit#user_id</code>. That is unsatisfactory however because, in reality, I would have to fork a gem and edit it to do that.</p>\n\n<p>How can I modify my User class so that I can cleanly assign it to an audit.</p>\n\n<p>P.S. <a href=\"https://gist.github.com/dtuite/161d765b679fb5c908d6\" rel=\"nofollow\">Here's a sample app</a> so you can try this yourself.</p>\n"}, {"tags": ["arrays", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 9993, "user_id": 2128691, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/YV6xv.jpg?s=128&g=1", "display_name": "dax", "link": "https://stackoverflow.com/users/2128691/dax"}, "edited": false, "score": 0, "creation_date": 1443007357, "post_id": 32738039, "comment_id": 53316974, "body": "that&#39;s a bit cleaner, thanks - and i renamed <code>groups</code> :D"}], "tags": [], "owner": {"reputation": 45322, "user_id": 421705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/581b1760881c962648f99d6040d41829?s=128&d=identicon&r=PG", "display_name": "Holger Just", "link": "https://stackoverflow.com/users/421705/holger-just"}, "is_accepted": true, "score": 3, "last_activity_date": 1443006761, "creation_date": 1443006761, "answer_id": 32738039, "question_id": 32737672, "link": "https://stackoverflow.com/questions/32737672/determining-if-a-collection-has-more-than-one-max-value/32738039#32738039", "title": "Determining if a collection has more than one max value", "body": "<p>You can do this snippet:</p>\n\n<pre><code>groups.group_by(&amp;:size)[groups.max.size].size\n</code></pre>\n\n<p>Let me quickly explain what this does. I apologise in advance for the bad wording as \"group\" is a rather overloaded term here...</p>\n\n<p>What it does, is first to group the arrays by size. This returns a hash:</p>\n\n<pre><code>groups = [[1, 1, 1], [2, 2]]\ngrouped = groups.group_by(&amp;:size)\n# =&gt; {3=&gt;[[1, 1, 1]], 2=&gt;[[2, 2]]}\n</code></pre>\n\n<p>Then, you take the array of group arrays containing exactly as many elements as the largest group</p>\n\n<pre><code>largest_list = grouped[groups.max.size]\n# =&gt; [[2, 2]]\n</code></pre>\n\n<p>Now, you can simple get the size of this array to get the number of groups which have this length:</p>\n\n<pre><code>largest_list.size\n# =&gt; 1\n</code></pre>\n\n<p>The reason why your approach is rather slow is that you calculate <code>groups.max.size</code> in your inner loop each time again.</p>\n"}], "owner": {"reputation": 9993, "user_id": 2128691, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/YV6xv.jpg?s=128&g=1", "display_name": "dax", "link": "https://stackoverflow.com/users/2128691/dax"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "accepted_answer_id": 32738039, "answer_count": 1, "score": 0, "last_activity_date": 1443013547, "creation_date": 1443005641, "last_edit_date": 1443013547, "question_id": 32737672, "link": "https://stackoverflow.com/questions/32737672/determining-if-a-collection-has-more-than-one-max-value", "title": "Determining if a collection has more than one max value", "body": "<p>Right now I'm doing this, and it works:</p>\n\n<pre><code>groups = [[1, 1, 1], [2, 2]]\ngroups.select { |g| g.size == groups.max.size }.size\n# =&gt; 1 # a clear majority\n\ngroups = [[1, 1], [2, 2]]\ngroups.select { |g| g.size == groups.max.size }.size\n# =&gt; 2 # needs to be passed to another filter\n</code></pre>\n\n<p>but I have a suspicion there's a cleaner way.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "mongoid"], "comments": [{"owner": {"reputation": 7525, "user_id": 1805902, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/0W7rW.png?s=128&g=1", "display_name": "pangpang", "link": "https://stackoverflow.com/users/1805902/pangpang"}, "edited": false, "score": 0, "creation_date": 1443006221, "post_id": 32737593, "comment_id": 53316246, "body": "maybe these two users&#39; email are not same"}, {"owner": {"reputation": 1470, "user_id": 1987461, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/664b3ec09a4053da7ecd919255539b54?s=128&d=identicon&r=PG", "display_name": "borjagvo", "link": "https://stackoverflow.com/users/1987461/borjagvo"}, "reply_to_user": {"reputation": 7525, "user_id": 1805902, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/0W7rW.png?s=128&g=1", "display_name": "pangpang", "link": "https://stackoverflow.com/users/1805902/pangpang"}, "edited": false, "score": 0, "creation_date": 1443006584, "post_id": 32737593, "comment_id": 53316457, "body": "of course i checked and they&#39;re exactly the same"}, {"owner": {"reputation": 7525, "user_id": 1805902, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/0W7rW.png?s=128&g=1", "display_name": "pangpang", "link": "https://stackoverflow.com/users/1805902/pangpang"}, "edited": false, "score": 1, "creation_date": 1443008797, "post_id": 32737593, "comment_id": 53318030, "body": "Could you provide more info? like users&#39; email"}, {"owner": {"reputation": 1470, "user_id": 1987461, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/664b3ec09a4053da7ecd919255539b54?s=128&d=identicon&r=PG", "display_name": "borjagvo", "link": "https://stackoverflow.com/users/1987461/borjagvo"}, "reply_to_user": {"reputation": 7525, "user_id": 1805902, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/0W7rW.png?s=128&g=1", "display_name": "pangpang", "link": "https://stackoverflow.com/users/1805902/pangpang"}, "edited": false, "score": 0, "creation_date": 1443019334, "post_id": 32737593, "comment_id": 53326023, "body": "Just added it. Anything else you miss?"}, {"owner": {"reputation": 7525, "user_id": 1805902, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/0W7rW.png?s=128&g=1", "display_name": "pangpang", "link": "https://stackoverflow.com/users/1805902/pangpang"}, "edited": false, "score": 0, "creation_date": 1443019751, "post_id": 32737593, "comment_id": 53326378, "body": "open <code>rails console</code>, run <code>p = User.new(email: &quot;borjacarranza85@gmail.com&quot;); p.save</code>, then tell me the result."}, {"owner": {"reputation": 7525, "user_id": 1805902, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/0W7rW.png?s=128&g=1", "display_name": "pangpang", "link": "https://stackoverflow.com/users/1805902/pangpang"}, "edited": false, "score": 0, "creation_date": 1443019940, "post_id": 32737593, "comment_id": 53326516, "body": "if the validation take effect, it will return false."}], "owner": {"reputation": 1470, "user_id": 1987461, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/664b3ec09a4053da7ecd919255539b54?s=128&d=identicon&r=PG", "display_name": "borjagvo", "link": "https://stackoverflow.com/users/1987461/borjagvo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 125, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1443019432, "creation_date": 1443005407, "last_edit_date": 1443019432, "question_id": 32737593, "link": "https://stackoverflow.com/questions/32737593/uniqueness-validation-with-mongoid", "title": "Uniqueness validation with Mongoid", "body": "<p>Having uniqueness validation on User model:</p>\n\n<pre><code>validates_uniqueness_of :email, :message =&gt; \"Email Address Already In Use. Have You Forgot Your Password?\"\n</code></pre>\n\n<p>It fails to raise an error when creating a new user and being saved:</p>\n\n<pre><code> user = {\n         :email      =&gt; email,\n         :other_attributes =&gt; other,\n         }\n\n    user = User.new(user)\n\n    count_new_real_session(user)\n    set_timezone(user)\n\n    if user.save\n        #code that is being executed (it shouldn't!)\n    end\n</code></pre>\n\n<p>Although there is another user with same email, the user is saved. Any idea why the validation is not stopping the user to be saved?</p>\n\n<p>More info (copy and pasted right from the database):</p>\n\n<ul>\n<li>user1: \"email\" : \"borjacarranza85@gmail.com\"</li>\n<li>user2: \"email\" : \"borjacarranza85@gmail.com\"</li>\n</ul>\n"}, {"tags": ["ruby-on-rails", "ruby", "heroku", "gem"], "answers": [{"comments": [{"owner": {"reputation": 565, "user_id": 5364319, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/faa97cc49bf073367fbfe71204b2c518?s=128&d=identicon&r=PG&f=1", "display_name": "Paddy", "link": "https://stackoverflow.com/users/5364319/paddy"}, "edited": false, "score": 1, "creation_date": 1443007617, "post_id": 32737904, "comment_id": 53317150, "body": "Thank you. I got rid of the group production block of code and put pg and rails_12factor into the general section. I can now move on with the tutorial but I suspect this work around may cause problems down the line. I wonder why Heroku was ignoring the production group?"}, {"owner": {"reputation": 73119, "user_id": 1143732, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/mFUOI.jpg?s=128&g=1", "display_name": "Richard Peck", "link": "https://stackoverflow.com/users/1143732/richard-peck"}, "reply_to_user": {"reputation": 565, "user_id": 5364319, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/faa97cc49bf073367fbfe71204b2c518?s=128&d=identicon&r=PG&f=1", "display_name": "Paddy", "link": "https://stackoverflow.com/users/5364319/paddy"}, "edited": false, "score": 0, "creation_date": 1443007867, "post_id": 32737904, "comment_id": 53317340, "body": "Not sure, it shouldn&#39;t do. Have you tried setting the Heroku ENV to <code>production</code>? What about specifying <code>production</code> in your Heroku bundle install?"}, {"owner": {"reputation": 565, "user_id": 5364319, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/faa97cc49bf073367fbfe71204b2c518?s=128&d=identicon&r=PG&f=1", "display_name": "Paddy", "link": "https://stackoverflow.com/users/5364319/paddy"}, "edited": false, "score": 1, "creation_date": 1443017521, "post_id": 32737904, "comment_id": 53324639, "body": "RACK_ENV and RAILS_ENV are both set to production. I&#39;ve reintroduced the production group and it works now. I suspect it may have just been a typo or something in the code. Thank you for your help Rich."}], "tags": [], "owner": {"reputation": 73119, "user_id": 1143732, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/mFUOI.jpg?s=128&g=1", "display_name": "Richard Peck", "link": "https://stackoverflow.com/users/1143732/richard-peck"}, "is_accepted": true, "score": 1, "last_activity_date": 1443006350, "creation_date": 1443006350, "answer_id": 32737904, "question_id": 32737586, "link": "https://stackoverflow.com/questions/32737586/ruby-on-rails-tutorial-heroku-deployment-issue/32737904#32737904", "title": "Ruby on Rails Tutorial Heroku Deployment Issue", "body": "<p>Well here's the error Rails puts out:</p>\n\n<pre><code>Specified 'postgresql' for database adapter, but the gem is not loaded. Add `gem 'pg'` to your Gemfile (and ensure its version is at the minimum required by ActiveRecord). (Gem::LoadError)\n</code></pre>\n\n<p>Of course, Heroku is famous for running <a href=\"https://www.heroku.com/postgres\" rel=\"nofollow noreferrer\">PostgreSQL</a> by default.</p>\n\n<p>There are two potentialities for this error:</p>\n\n<blockquote>\n  <ol>\n  <li>Something is wrong with your Rails app (IE the <code>PG</code> gem is not loaded)</li>\n  <li>Heroku doesn't have the db created or accessible</li>\n  </ol>\n</blockquote>\n\n<p>--</p>\n\n<p>The only times I've had this problem with Heroku, have been when I didn't create or authenticate the database.</p>\n\n<p>Here's what I'd do:</p>\n\n<h1>Gem</h1>\n\n<p>Take your PG gem and put it in the general section of your gemfile. I know this may cause an issue with your dev environment; it will allow Heroku to load the gem. You can always change it back later:</p>\n\n<pre><code>#Gemfile\nsource 'https://rubygems.org'\n\ngem 'pg'\ngem 'rails',        '4.2.2' \ngem 'sass-rails',   '5.0.2' \ngem 'uglifier',     '2.5.3' \ngem 'coffee-rails', '4.1.0' \ngem 'jquery-rails', '4.0.3' \ngem 'turbolinks',   '2.3.0' \ngem 'jbuilder',    '2.2.3' \ngem 'sdoc',         '0.4.0', group: :doc\n</code></pre>\n\n<h1>DB</h1>\n\n<p>In Heroku, make sure you've set up a database and you've added its credentials to your <code>#config/database.yml</code> file:</p>\n\n<p><a href=\"https://i.stack.imgur.com/npAG2.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/npAG2.png\" alt=\"enter image description here\"></a></p>\n\n<p><a href=\"https://devcenter.heroku.com/articles/getting-started-with-rails4#migrate-your-database\" rel=\"nofollow noreferrer\">Tutorial</a></p>\n\n<p>Essentially, if you have your Heroku PG database set up, add the credentials to your <code>database.yml</code> file, and then migrate to the DB with the above tutorial, it should resolve this issue.</p>\n"}], "owner": {"reputation": 565, "user_id": 5364319, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/faa97cc49bf073367fbfe71204b2c518?s=128&d=identicon&r=PG&f=1", "display_name": "Paddy", "link": "https://stackoverflow.com/users/5364319/paddy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 406, "favorite_count": 1, "accepted_answer_id": 32737904, "answer_count": 1, "score": 2, "last_activity_date": 1443006350, "creation_date": 1443005385, "last_edit_date": 1443005704, "question_id": 32737586, "link": "https://stackoverflow.com/questions/32737586/ruby-on-rails-tutorial-heroku-deployment-issue", "title": "Ruby on Rails Tutorial Heroku Deployment Issue", "body": "<p>I've started the Ruby on Rails tutorial found here:</p>\n\n<p><a href=\"https://www.railstutorial.org/book/beginning#sec-deploying\" rel=\"nofollow\">https://www.railstutorial.org/book/beginning#sec-deploying</a></p>\n\n<p>I'm using the cloud9 online IDE and trying to deploy my hello world app on Heroku but when I try to open the app I receive the following error:</p>\n\n<blockquote>\n  <p>An error occurred in the application and your page could not be\n  served. Please try again in a few moments.If you are the application\n  owner, check your logs for details.</p>\n</blockquote>\n\n<p>According to the log it seems to be a problem with the postgres pg gem. Here is the gemfile:</p>\n\n<pre><code>source 'https://rubygems.org'\n\ngem 'rails',        '4.2.2' \ngem 'sass-rails',   '5.0.2' \ngem 'uglifier',     '2.5.3' \ngem 'coffee-rails', '4.1.0' \ngem 'jquery-rails', '4.0.3' \ngem 'turbolinks',   '2.3.0' \ngem 'jbuilder',    '2.2.3' \ngem 'sdoc',         '0.4.0', group: :doc\n\ngroup :development, :test do   \ngem 'sqlite3',     '1.3.9'   \ngem 'byebug',      '3.4.0'   \ngem 'web-console', '2.0.0.beta3'   \ngem 'spring',      '1.1.3' end\n\ngroup :production do   \ngem 'pg',             '0.17.1'   \ngem 'rails_12factor', '0.0.2' \nend\n</code></pre>\n\n<p>To prepare the system for deployment to production, we run bundle install with a special flag to prevent the local installation of any production gems (which in this case consists of pg and rails_12factor):</p>\n\n<pre><code>$ bundle install --without production\n</code></pre>\n\n<p>According to the tutorial this is to update Gemfile.lock with the pg and rails_12factor gems. However this is the Gemfile.lock:</p>\n\n<pre><code>GEM\n  remote: https://rubygems.org/\n  specs:\n    actionmailer (4.2.2)\n      actionpack (= 4.2.2)\n      actionview (= 4.2.2)\n      activejob (= 4.2.2)\n      mail (~&gt; 2.5, &gt;= 2.5.4)\n      rails-dom-testing (~&gt; 1.0, &gt;= 1.0.5)\n    actionpack (4.2.2)\n      actionview (= 4.2.2)\n      activesupport (= 4.2.2)\n      rack (~&gt; 1.6)\n      rack-test (~&gt; 0.6.2)\n      rails-dom-testing (~&gt; 1.0, &gt;= 1.0.5)\n      rails-html-sanitizer (~&gt; 1.0, &gt;= 1.0.1)\n    actionview (4.2.2)\n      activesupport (= 4.2.2)\n      builder (~&gt; 3.1)\n      erubis (~&gt; 2.7.0)\n      rails-dom-testing (~&gt; 1.0, &gt;= 1.0.5)\n      rails-html-sanitizer (~&gt; 1.0, &gt;= 1.0.1)\n    activejob (4.2.2)\n      activesupport (= 4.2.2)\n      globalid (&gt;= 0.3.0)\n    activemodel (4.2.2)\n      activesupport (= 4.2.2)\n      builder (~&gt; 3.1)\n    activerecord (4.2.2)\n      activemodel (= 4.2.2)\n      activesupport (= 4.2.2)\n      arel (~&gt; 6.0)\n    activesupport (4.2.2)\n      i18n (~&gt; 0.7)\n      json (~&gt; 1.7, &gt;= 1.7.7)\n      minitest (~&gt; 5.1)\n      thread_safe (~&gt; 0.3, &gt;= 0.3.4)\n      tzinfo (~&gt; 1.1)\n    arel (6.0.3)\n    binding_of_caller (0.7.3.pre1)\n      debug_inspector (&gt;= 0.0.1)\n    builder (3.2.2)\n    byebug (3.4.0)\n      columnize (~&gt; 0.8)\n      debugger-linecache (~&gt; 1.2)\n      slop (~&gt; 3.6)\n    coffee-rails (4.1.0)\n      coffee-script (&gt;= 2.2.0)\n      railties (&gt;= 4.0.0, &lt; 5.0)\n    coffee-script (2.4.1)\n      coffee-script-source\n      execjs\n    coffee-script-source (1.9.1.1)\n    columnize (0.9.0)\n    debug_inspector (0.0.2)\n    debugger-linecache (1.2.0)\n    erubis (2.7.0)\n    execjs (2.6.0)\n    globalid (0.3.6)\n      activesupport (&gt;= 4.1.0)\n    i18n (0.7.0)\n    jbuilder (2.2.3)\n      activesupport (&gt;= 3.0.0, &lt; 5)\n      multi_json (~&gt; 1.2)\n    jquery-rails (4.0.3)\n      rails-dom-testing (~&gt; 1.0)\n      railties (&gt;= 4.2.0)\n      thor (&gt;= 0.14, &lt; 2.0)\n    json (1.8.3)\n    loofah (2.0.3)\n      nokogiri (&gt;= 1.5.9)\n    mail (2.6.3)\n      mime-types (&gt;= 1.16, &lt; 3)\n    mime-types (2.6.2)\n    mini_portile (0.6.2)\n    minitest (5.8.0)\n    multi_json (1.11.2)\n    nokogiri (1.6.6.2)\n      mini_portile (~&gt; 0.6.0)\n    rack (1.6.4)\n    rack-test (0.6.3)\n      rack (&gt;= 1.0)\n    rails (4.2.2)\n      actionmailer (= 4.2.2)\n      actionpack (= 4.2.2)\n      actionview (= 4.2.2)\n      activejob (= 4.2.2)\n      activemodel (= 4.2.2)\n      activerecord (= 4.2.2)\n      activesupport (= 4.2.2)\n      bundler (&gt;= 1.3.0, &lt; 2.0)\n      railties (= 4.2.2)\n      sprockets-rails\n    rails-deprecated_sanitizer (1.0.3)\n      activesupport (&gt;= 4.2.0.alpha)\n    rails-dom-testing (1.0.7)\n      activesupport (&gt;= 4.2.0.beta, &lt; 5.0)\n      nokogiri (~&gt; 1.6.0)\n      rails-deprecated_sanitizer (&gt;= 1.0.1)\n    rails-html-sanitizer (1.0.2)\n      loofah (~&gt; 2.0)\n    railties (4.2.2)\n      actionpack (= 4.2.2)\n      activesupport (= 4.2.2)\n      rake (&gt;= 0.8.7)\n      thor (&gt;= 0.18.1, &lt; 2.0)\n    rake (10.4.2)\n    rdoc (4.2.0)\n    sass (3.4.18)\n    sass-rails (5.0.2)\n      railties (&gt;= 4.0.0, &lt; 5.0)\n      sass (~&gt; 3.1)\n      sprockets (&gt;= 2.8, &lt; 4.0)\n      sprockets-rails (&gt;= 2.0, &lt; 4.0)\n      tilt (~&gt; 1.1)\n    sdoc (0.4.0)\n      json (~&gt; 1.8)\n      rdoc (~&gt; 4.0, &lt; 5.0)\n    slop (3.6.0)\n    spring (1.1.3)\n    sprockets (3.3.4)\n      rack (~&gt; 1.0)\n    sprockets-rails (2.3.3)\n      actionpack (&gt;= 3.0)\n      activesupport (&gt;= 3.0)\n      sprockets (&gt;= 2.8, &lt; 4.0)\n    sqlite3 (1.3.9)\n    thor (0.19.1)\n    thread_safe (0.3.5)\n    tilt (1.4.1)\n    turbolinks (2.3.0)\n      coffee-rails\n    tzinfo (1.2.2)\n      thread_safe (~&gt; 0.1)\n    uglifier (2.5.3)\n      execjs (&gt;= 0.3.0)\n      json (&gt;= 1.8.0)\n    web-console (2.0.0.beta3)\n      activemodel (~&gt; 4.0)\n      binding_of_caller (= 0.7.3.pre1)\n      railties (~&gt; 4.0)\n      sprockets-rails (&gt;= 2.0, &lt; 4.0)\n\nPLATFORMS\n  ruby\n\nDEPENDENCIES\n  byebug (= 3.4.0)\n  coffee-rails (= 4.1.0)\n  jbuilder (= 2.2.3)\n  jquery-rails (= 4.0.3)\n  rails (= 4.2.2)\n  sass-rails (= 5.0.2)\n  sdoc (= 0.4.0)\n  spring (= 1.1.3)\n  sqlite3 (= 1.3.9)\n  turbolinks (= 2.3.0)\n  uglifier (= 2.5.3)\n  web-console (= 2.0.0.beta3)\n</code></pre>\n\n<p>Should bundle be adding pg to the Gemfile.lock maybe?</p>\n\n<p>The app runs fine on the rails server on the cloud IDE. Here's the full log incase it helps:</p>\n\n<pre><code>2015-09-22T16:24:37.291738+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.0.0/gems/railties-4.2.2/lib/rails/application.rb:352:in `initialize!'\n2015-09-22T16:24:37.291740+00:00 app[web.1]:    from /app/config/environment.rb:5:in `&lt;top (required)&gt;'\n2015-09-22T16:24:37.291743+00:00 app[web.1]:    from /app/config.ru:3:in `require'\n2015-09-22T16:24:37.291753+00:00 app[web.1]:    from /app/config.ru:in `new'\n2015-09-22T16:24:37.291748+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.0.0/gems/rack-1.6.4/lib/rack/builder.rb:55:in `instance_eval'\n2015-09-22T16:24:37.291744+00:00 app[web.1]:    from /app/config.ru:3:in `block in &lt;main&gt;'\n2015-09-22T16:24:37.291752+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.0.0/gems/rack-1.6.4/lib/rack/builder.rb:55:in `initialize'\n2015-09-22T16:24:37.291760+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.0.0/gems/rack-1.6.4/lib/rack/builder.rb:49:in `eval'\n2015-09-22T16:24:37.291757+00:00 app[web.1]:    from /app/config.ru:in `&lt;main&gt;'\n2015-09-22T16:24:37.291762+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.0.0/gems/rack-1.6.4/lib/rack/builder.rb:49:in `new_from_string'\n2015-09-22T16:24:37.291768+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.0.0/gems/rack-1.6.4/lib/rack/server.rb:299:in `build_app_and_options_from_config'\n2015-09-22T16:24:37.291765+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.0.0/gems/rack-1.6.4/lib/rack/builder.rb:40:in `parse_file'\n2015-09-22T16:24:37.291772+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.0.0/gems/rack-1.6.4/lib/rack/server.rb:208:in `app'\n2015-09-22T16:24:37.291773+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.0.0/gems/railties-4.2.2/lib/rails/commands/server.rb:61:in `app'\n2015-09-22T16:24:37.291780+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.0.0/gems/rack-1.6.4/lib/rack/server.rb:272:in `start'\n2015-09-22T16:24:37.291777+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.0.0/gems/rack-1.6.4/lib/rack/server.rb:336:in `wrapped_app'\n2015-09-22T16:24:37.291783+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.0.0/gems/railties-4.2.2/lib/rails/commands/server.rb:80:in `start'\n2015-09-22T16:24:37.291786+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.0.0/gems/railties-4.2.2/lib/rails/commands/commands_tasks.rb:80:in `block in server'\n2015-09-22T16:24:37.291790+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.0.0/gems/railties-4.2.2/lib/rails/commands/commands_tasks.rb:75:in `tap'\n2015-09-22T16:24:37.291793+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.0.0/gems/railties-4.2.2/lib/rails/commands/commands_tasks.rb:75:in `server'\n2015-09-22T16:24:37.291796+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.0.0/gems/railties-4.2.2/lib/rails/commands/commands_tasks.rb:39:in `run_command!'\n2015-09-22T16:24:37.291800+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.0.0/gems/railties-4.2.2/lib/rails/commands.rb:17:in `&lt;top (required)&gt;'\n2015-09-22T16:24:37.291803+00:00 app[web.1]:    from bin/rails:8:in `require'\n2015-09-22T16:24:37.291805+00:00 app[web.1]:    from bin/rails:8:in `&lt;main&gt;'\n2015-09-22T16:24:37.322146+00:00 app[web.1]: =&gt; Booting WEBrick\n2015-09-22T16:24:37.322150+00:00 app[web.1]: =&gt; Rails 4.2.2 application starting in production on http://0.0.0.0:13217\n2015-09-22T16:24:37.322152+00:00 app[web.1]: =&gt; Run `rails server -h` for more startup options\n2015-09-22T16:24:37.322155+00:00 app[web.1]: Exiting\n2015-09-22T16:24:37.322154+00:00 app[web.1]: =&gt; Ctrl-C to shutdown server\n2015-09-22T16:24:38.408303+00:00 heroku[web.1]: Process exited with status 1\n2015-09-22T16:24:38.423692+00:00 heroku[web.1]: State changed from starting to crashed\n2015-09-22T16:24:38.423692+00:00 heroku[web.1]: State changed from crashed to starting\n2015-09-22T16:24:41.679761+00:00 heroku[web.1]: Starting process with command `bin/rails server -p 59157 -e production`\n2015-09-22T16:24:44.946057+00:00 app[web.1]: /app/vendor/bundle/ruby/2.0.0/gems/activerecord-4.2.2/lib/active_record/connection_adapters/connection_specification.rb:177:in `rescue in spec': Specified 'postgresql' for database adapter, but the gem is not loaded. Add `gem 'pg'` to your Gemfile (and ensure its version is at the minimum required by ActiveRecord). (Gem::LoadError)\n2015-09-22T16:24:44.946084+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.0.0/gems/activerecord-4.2.2/lib/active_record/connection_adapters/connection_specification.rb:174:in `spec'\n2015-09-22T16:24:44.946088+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.0.0/gems/activerecord-4.2.2/lib/active_record/railtie.rb:120:in `block (2 levels) in &lt;class:Railtie&gt;'\n2015-09-22T16:24:44.946091+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.0.0/gems/activesupport-4.2.2/lib/active_support/lazy_load_hooks.rb:38:in `execute_hook'\n2015-09-22T16:24:44.946096+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.0.0/gems/activesupport-4.2.2/lib/active_support/lazy_load_hooks.rb:45:in `block in run_load_hooks'\n2015-09-22T16:24:44.946086+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.0.0/gems/activerecord-4.2.2/lib/active_record/connection_handling.rb:50:in `establish_connection'\n2015-09-22T16:24:44.946089+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.0.0/gems/activesupport-4.2.2/lib/active_support/lazy_load_hooks.rb:38:in `instance_eval'\n2015-09-22T16:24:44.946097+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.0.0/gems/activesupport-4.2.2/lib/active_support/lazy_load_hooks.rb:44:in `each'\n2015-09-22T16:24:44.946099+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.0.0/gems/activesupport-4.2.2/lib/active_support/lazy_load_hooks.rb:44:in `run_load_hooks'\n2015-09-22T16:24:44.946100+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.0.0/gems/activerecord-4.2.2/lib/active_record/base.rb:316:in `&lt;module:ActiveRecord&gt;'\n2015-09-22T16:24:44.946102+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.0.0/gems/activerecord-4.2.2/lib/active_record/base.rb:26:in `&lt;top (required)&gt;'\n2015-09-22T16:24:44.946103+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.0.0/gems/activerecord-4.2.2/lib/active_record/relation/predicate_builder.rb:118:in `&lt;class:PredicateBuilder&gt;'\n2015-09-22T16:24:44.946104+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.0.0/gems/activerecord-4.2.2/lib/active_record/relation/predicate_builder.rb:2:in `&lt;module:ActiveRecord&gt;'\n2015-09-22T16:24:44.946106+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.0.0/gems/activerecord-4.2.2/lib/active_record/relation/predicate_builder.rb:1:in `&lt;top (required)&gt;'\n2015-09-22T16:24:44.946107+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.0.0/gems/activesupport-4.2.2/lib/active_support/dependencies.rb:274:in `require'\n2015-09-22T16:24:44.946109+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.0.0/gems/activesupport-4.2.2/lib/active_support/dependencies.rb:274:in `block in require'\n2015-09-22T16:24:44.946110+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.0.0/gems/activesupport-4.2.2/lib/active_support/dependencies.rb:240:in `load_dependency'\n2015-09-22T16:24:44.946111+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.0.0/gems/activesupport-4.2.2/lib/active_support/dependencies.rb:274:in `require'\n2015-09-22T16:24:44.946113+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.0.0/gems/activesupport-4.2.2/lib/active_support/dependencies/autoload.rb:70:in `block in eager_load!'\n2015-09-22T16:24:44.946114+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.0.0/gems/activesupport-4.2.2/lib/active_support/dependencies/autoload.rb:70:in `each_value'\n2015-09-22T16:24:44.946115+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.0.0/gems/activesupport-4.2.2/lib/active_support/dependencies/autoload.rb:70:in `eager_load!'\n2015-09-22T16:24:44.946116+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.0.0/gems/activerecord-4.2.2/lib/active_record.rb:158:in `eager_load!'\n2015-09-22T16:24:44.946118+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.0.0/gems/railties-4.2.2/lib/rails/application/finisher.rb:56:in `each'\n2015-09-22T16:24:44.946119+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.0.0/gems/railties-4.2.2/lib/rails/application/finisher.rb:56:in `block in &lt;module:Finisher&gt;'\n2015-09-22T16:24:44.946122+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.0.0/gems/railties-4.2.2/lib/rails/initializable.rb:30:in `instance_exec'\n2015-09-22T16:24:44.946124+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.0.0/gems/railties-4.2.2/lib/rails/initializable.rb:30:in `run'\n2015-09-22T16:24:44.946125+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.0.0/gems/railties-4.2.2/lib/rails/initializable.rb:55:in `block in run_initializers'\n2015-09-22T16:24:44.946127+00:00 app[web.1]:    from /app/vendor/ruby-2.0.0/lib/ruby/2.0.0/tsort.rb:183:in `block (2 levels) in each_strongly_connected_component'\n2015-09-22T16:24:44.946126+00:00 app[web.1]:    from /app/vendor/ruby-2.0.0/lib/ruby/2.0.0/tsort.rb:150:in `block in tsort_each'\n2015-09-22T16:24:44.946130+00:00 app[web.1]:    from /app/vendor/ruby-2.0.0/lib/ruby/2.0.0/tsort.rb:182:in `block in each_strongly_connected_component'\n2015-09-22T16:24:44.946129+00:00 app[web.1]:    from /app/vendor/ruby-2.0.0/lib/ruby/2.0.0/tsort.rb:219:in `each_strongly_connected_component_from'\n2015-09-22T16:24:44.946134+00:00 app[web.1]:    from /app/vendor/ruby-2.0.0/lib/ruby/2.0.0/tsort.rb:148:in `tsort_each'\n2015-09-22T16:24:44.946133+00:00 app[web.1]:    from /app/vendor/ruby-2.0.0/lib/ruby/2.0.0/tsort.rb:180:in `each_strongly_connected_component'\n2015-09-22T16:24:44.946135+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.0.0/gems/railties-4.2.2/lib/rails/initializable.rb:54:in `run_initializers'\n2015-09-22T16:24:44.946131+00:00 app[web.1]:    from /app/vendor/ruby-2.0.0/lib/ruby/2.0.0/tsort.rb:180:in `each'\n2015-09-22T16:24:44.946142+00:00 app[web.1]:    from /app/config.ru:3:in `require'\n2015-09-22T16:24:44.946139+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.0.0/gems/railties-4.2.2/lib/rails/application.rb:352:in `initialize!'\n2015-09-22T16:24:44.946140+00:00 app[web.1]:    from /app/config/environment.rb:5:in `&lt;top (required)&gt;'\n2015-09-22T16:24:44.946144+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.0.0/gems/rack-1.6.4/lib/rack/builder.rb:55:in `instance_eval'\n2015-09-22T16:24:44.946143+00:00 app[web.1]:    from /app/config.ru:3:in `block in &lt;main&gt;'\n2015-09-22T16:24:44.946149+00:00 app[web.1]:    from /app/config.ru:in `new'\n2015-09-22T16:24:44.946146+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.0.0/gems/rack-1.6.4/lib/rack/builder.rb:55:in `initialize'\n2015-09-22T16:24:44.946153+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.0.0/gems/rack-1.6.4/lib/rack/builder.rb:49:in `new_from_string'\n2015-09-22T16:24:44.946150+00:00 app[web.1]:    from /app/config.ru:in `&lt;main&gt;'\n2015-09-22T16:24:44.946164+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.0.0/gems/rack-1.6.4/lib/rack/server.rb:336:in `wrapped_app'\n2015-09-22T16:24:44.965501+00:00 app[web.1]: =&gt; Rails 4.2.2 application starting in production on http://0.0.0.0:59157\n2015-09-22T16:24:44.946167+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.0.0/gems/rack-1.6.4/lib/rack/server.rb:272:in `start'\n2015-09-22T16:24:44.946158+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.0.0/gems/rack-1.6.4/lib/rack/server.rb:299:in `build_app_and_options_from_config'\n2015-09-22T16:24:44.946162+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.0.0/gems/railties-4.2.2/lib/rails/commands/server.rb:61:in `app'\n2015-09-22T16:24:44.946159+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.0.0/gems/rack-1.6.4/lib/rack/server.rb:208:in `app'\n2015-09-22T16:24:44.965496+00:00 app[web.1]: =&gt; Booting WEBrick\n2015-09-22T16:24:44.946171+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.0.0/gems/railties-4.2.2/lib/rails/commands/commands_tasks.rb:80:in `block in server'\n2015-09-22T16:24:44.946175+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.0.0/gems/railties-4.2.2/lib/rails/commands/commands_tasks.rb:75:in `tap'\n2015-09-22T16:24:44.946176+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.0.0/gems/railties-4.2.2/lib/rails/commands/commands_tasks.rb:75:in `server'\n2015-09-22T16:24:44.946179+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.0.0/gems/railties-4.2.2/lib/rails/commands/commands_tasks.rb:39:in `run_command!'\n2015-09-22T16:24:44.946183+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.0.0/gems/railties-4.2.2/lib/rails/commands.rb:17:in `&lt;top (required)&gt;'\n2015-09-22T16:24:44.946186+00:00 app[web.1]:    from bin/rails:8:in `require'\n2015-09-22T16:24:44.946187+00:00 app[web.1]:    from bin/rails:8:in `&lt;main&gt;'\n2015-09-22T16:24:44.965503+00:00 app[web.1]: =&gt; Run `rails server -h` for more startup options\n2015-09-22T16:24:44.965504+00:00 app[web.1]: =&gt; Ctrl-C to shutdown server\n2015-09-22T16:24:44.946156+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.0.0/gems/rack-1.6.4/lib/rack/builder.rb:40:in `parse_file'\n2015-09-22T16:24:44.965506+00:00 app[web.1]: Exiting\n2015-09-22T16:24:44.946152+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.0.0/gems/rack-1.6.4/lib/rack/builder.rb:49:in `eval'\n2015-09-22T16:24:44.946168+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.0.0/gems/railties-4.2.2/lib/rails/commands/server.rb:80:in `start'\n2015-09-22T16:24:45.724447+00:00 heroku[web.1]: Process exited with status 1\n2015-09-22T16:24:45.739191+00:00 heroku[web.1]: State changed from starting to crashed\n2015-09-22T16:24:47.758235+00:00 heroku[router]: at=error code=H10 desc=\"App crashed\" method=GET path=\"/\" host=infinite-inlet-3994.herokuapp.com request_id=c19b75bd-8c4a-427f-975d-b81f87ddc7ed fwd=\"46.7.54.39\" dyno= connect= service= status=503 bytes=\n2015-09-22T16:25:00.442110+00:00 heroku[router]: at=error code=H10 desc=\"App crashed\" method=GET path=\"/\" host=infinite-inlet-3994.herokuapp.com request_id=f26af351-7605-4fd8-a7f6-2da6996d5f1d fwd=\"46.7.54.39\" dyno= connect= service= status=503 bytes=\nWARNING: Toolbelt v3.42.2 update available.\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "sqlite"], "comments": [{"owner": {"reputation": 134, "user_id": 4976462, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-_yeQ3f2Yxzg/AAAAAAAAAAI/AAAAAAAAACo/U6ybLaqHo6w/photo.jpg?sz=128", "display_name": "Susan Joshi", "link": "https://stackoverflow.com/users/4976462/susan-joshi"}, "edited": false, "score": 0, "creation_date": 1443005516, "post_id": 32737487, "comment_id": 53315761, "body": "Did you look at this thread? <a href=\"http://stackoverflow.com/questions/17643897/cannot-load-such-file-sqlite3-sqlite3-native-loaderror-on-ruby-on-rails\" title=\"cannot load such file sqlite3 sqlite3 native loaderror on ruby on rails\">stackoverflow.com/questions/17643897/&hellip;</a>"}, {"owner": {"reputation": 2564, "user_id": 4134881, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/797360342295a3f637a9c4d71d40d113?s=128&d=identicon&r=PG&f=1", "display_name": "evianpring", "link": "https://stackoverflow.com/users/4134881/evianpring"}, "reply_to_user": {"reputation": 134, "user_id": 4976462, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-_yeQ3f2Yxzg/AAAAAAAAAAI/AAAAAAAAACo/U6ybLaqHo6w/photo.jpg?sz=128", "display_name": "Susan Joshi", "link": "https://stackoverflow.com/users/4976462/susan-joshi"}, "edited": false, "score": 0, "creation_date": 1443006899, "post_id": 32737487, "comment_id": 53316669, "body": "I saw that thread, yes. Didn&#39;t help me much. /usr/local/share/gem/specifications/sqlite3-1.3.10.gemspec which I&#39;m supposed to edit, is blank when I open it with emacs. Also, one link posted in the comments there <a href=\"https://ahmedemad.wordpress.com/2013/05/17/ruby-on-rails-install-run-error/\" rel=\"nofollow noreferrer\">ahmedemad.wordpress.com/2013/05/17/&hellip;</a> doesn&#39;t work for me, giving me a new error: rake aborted! LoadError: cannot load such file -- nokogiri/nokogiri"}, {"owner": {"reputation": 2564, "user_id": 4134881, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/797360342295a3f637a9c4d71d40d113?s=128&d=identicon&r=PG&f=1", "display_name": "evianpring", "link": "https://stackoverflow.com/users/4134881/evianpring"}, "reply_to_user": {"reputation": 134, "user_id": 4976462, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-_yeQ3f2Yxzg/AAAAAAAAAAI/AAAAAAAAACo/U6ybLaqHo6w/photo.jpg?sz=128", "display_name": "Susan Joshi", "link": "https://stackoverflow.com/users/4976462/susan-joshi"}, "edited": false, "score": 0, "creation_date": 1443006937, "post_id": 32737487, "comment_id": 53316692, "body": "Is it problematic that which sqlite3 gives me a location in anaconda, which I think is related to my Python IDE?"}], "owner": {"reputation": 2564, "user_id": 4134881, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/797360342295a3f637a9c4d71d40d113?s=128&d=identicon&r=PG&f=1", "display_name": "evianpring", "link": "https://stackoverflow.com/users/4134881/evianpring"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 30, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1443005055, "creation_date": 1443005055, "question_id": 32737487, "link": "https://stackoverflow.com/questions/32737487/rake-dbmigrate-error-perhaps-due-to-locations-of-installations", "title": "rake db:migrate error perhaps due to locations of installations", "body": "<p>I am trying to install rails, by following instructions that I found online and also instructions that I found in the book Beginning Rails 4. I thought I had installed everything, and managed to create a new Rails application. Here are my commands:</p>\n\n<pre><code>rails new blog\nrake db:create\n</code></pre>\n\n<p>Then I get an error:</p>\n\n<pre><code>rake aborted!\n\n    LoadError: cannot load such file -- sqlite3/sqlite3_native\n</code></pre>\n\n<p>I've been reading for about two hours trying to figure out what this is. I think it might have something to do with multiple ruby installations and/or location of gems. </p>\n\n<pre><code>$ which ruby\n/usr/bin/ruby\n$ which gem\n/usr/bin/gem\n$ which rake\n/usr/local/bin/rake\n$ which sqlite3\n~/anaconda/bin/sqlite3\n\n$ echo $PATH \n</code></pre>\n\n<p><code>/home/user/anaconda/bin:/home/user/anaconda/bin:/home/user/anaconda/bin:/home/user/anaconda/bin:/usr/lib64/qt-3.3/bin:/usr/local/bin:/usr/local/sbin:/usr/bin:/usr/sbin:/bin:/sbin:/home/user/.local/bin:/home/user/bin</code></p>\n\n<p>Any idea how I can solve this issue?</p>\n\n<p>Here is some additional info:</p>\n\n<pre><code>rails --version\nWarning: You're using Rubygems 2.0.14 with Spring. Upgrade to at least Rubygems 2.1.0 and run `gem pristine --all` for better startup performance.\nRails 4.2.4\nruby --version\nruby 2.0.0p598 (2014-11-13) [x86_64-linux]\nsqlite3 --version\n3.8.4.1 2014-03-11 15:27:36 018d317b1257ce68a92908b05c9c7cf1494050d0\n</code></pre>\n"}, {"tags": ["ruby", "net-sftp"], "comments": [{"owner": {"reputation": 27685, "user_id": 610979, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/ku5ga.png?s=128&g=1", "display_name": "Frank Schmitt", "link": "https://stackoverflow.com/users/610979/frank-schmitt"}, "edited": false, "score": 0, "creation_date": 1443009047, "post_id": 32737260, "comment_id": 53318209, "body": "Please post a <i>complete</i> example plus sample input - what value do you provide for <code>fname</code> ? Did you check whether <code>fname</code> contains additional characters (e.g. line breaks) that might cause the error?"}], "owner": {"reputation": 11, "user_id": 5367242, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/179708a2119f989f4020c06de1e597dc?s=128&d=identicon&r=PG&f=1", "display_name": "Ulag", "link": "https://stackoverflow.com/users/5367242/ulag"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 75, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1443004406, "creation_date": 1443004406, "question_id": 32737260, "link": "https://stackoverflow.com/questions/32737260/ruby-using-netsftp-i-am-unable-to-pass-directory-path-dynamically", "title": "Ruby : Using NET::SFTP i am unable to pass directory path dynamically", "body": "<p>For Example: snippet of the code\nfname=gets.to_s\nsftp.download!(\"/Users/#{fname}\", \".\")</p>\n\n<p>It gives me download.rb error with no such file(2) under on_open. But the same works when i am mentioning the full path directly on the path. Its not working only when i am doing string interpolation by getting the userinput. Please suggest with examples..</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 0, "creation_date": 1443002697, "post_id": 32736562, "comment_id": 53313899, "body": "Can you update your question with the actual error message and the model code please?"}, {"owner": {"reputation": 181, "user_id": 4600208, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/1f4eae1b9e73bdb4b09e580628a6472b?s=128&d=identicon&r=PG&f=1", "display_name": "Wilson", "link": "https://stackoverflow.com/users/4600208/wilson"}, "reply_to_user": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 0, "creation_date": 1443002749, "post_id": 32736562, "comment_id": 53313949, "body": "undefined method `campaigns&#39; for #&lt;User:0x007fc87a521698&gt; is the error"}, {"owner": {"reputation": 181, "user_id": 4600208, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/1f4eae1b9e73bdb4b09e580628a6472b?s=128&d=identicon&r=PG&f=1", "display_name": "Wilson", "link": "https://stackoverflow.com/users/4600208/wilson"}, "reply_to_user": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 0, "creation_date": 1443002841, "post_id": 32736562, "comment_id": 53314012, "body": "updated model and error mssage"}, {"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 0, "creation_date": 1443003036, "post_id": 32736562, "comment_id": 53314139, "body": "On which line did the error triggered?"}, {"owner": {"reputation": 181, "user_id": 4600208, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/1f4eae1b9e73bdb4b09e580628a6472b?s=128&d=identicon&r=PG&f=1", "display_name": "Wilson", "link": "https://stackoverflow.com/users/4600208/wilson"}, "reply_to_user": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 0, "creation_date": 1443003071, "post_id": 32736562, "comment_id": 53314156, "body": "@campaign = current_user.campaigns.build"}, {"owner": {"reputation": 73119, "user_id": 1143732, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/mFUOI.jpg?s=128&g=1", "display_name": "Richard Peck", "link": "https://stackoverflow.com/users/1143732/richard-peck"}, "edited": false, "score": 1, "creation_date": 1443004326, "post_id": 32736562, "comment_id": 53314934, "body": "Have you tried restarting the server? It could be cached? Also, have you tried <code>current_user.campaigns.new</code> instead of <code>.build</code>?"}, {"owner": {"reputation": 181, "user_id": 4600208, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/1f4eae1b9e73bdb4b09e580628a6472b?s=128&d=identicon&r=PG&f=1", "display_name": "Wilson", "link": "https://stackoverflow.com/users/4600208/wilson"}, "edited": false, "score": 0, "creation_date": 1443004523, "post_id": 32736562, "comment_id": 53315086, "body": "Woo hoo, .new did the trick! Thanks!!"}, {"owner": {"reputation": 991, "user_id": 3338439, "user_type": "registered", "profile_image": "https://graph.facebook.com/768618975/picture?type=large", "display_name": "Mingsheng", "link": "https://stackoverflow.com/users/3338439/mingsheng"}, "edited": false, "score": 0, "creation_date": 1443028086, "post_id": 32736562, "comment_id": 53331764, "body": "@Wilson What did the trick? Restarting? Might be good to post a proper answer to close the question..."}], "owner": {"reputation": 181, "user_id": 4600208, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/1f4eae1b9e73bdb4b09e580628a6472b?s=128&d=identicon&r=PG&f=1", "display_name": "Wilson", "link": "https://stackoverflow.com/users/4600208/wilson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 46, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1443004150, "creation_date": 1443002590, "last_edit_date": 1443004150, "question_id": 32736562, "link": "https://stackoverflow.com/questions/32736562/cant-get-user-association-working-in-rails", "title": "Can&#39;t get user association working in rails", "body": "<p>I've been struggling to get an association working. A user <code>has_many :campaigns</code> and a campaign <code>belongs_to :user</code></p>\n\n<p>but when I try to create a new campaign, it gives me an error saying campaigns is an invalid method</p>\n\n<pre><code>def index\n    @campaigns = Campaign.all.order(\"created_at DESC\")\n  end\n\n  # GET /campaigns/1\n  # GET /campaigns/1.json\n  def show\n  end\n\n  # GET /campaigns/new\n  def new\n    @campaign = current_user.campaigns.build\n  end\n\n  # GET /campaigns/1/edit\n  def edit\n  end\n\n  # POST /campaigns\n  # POST /campaigns.json\n    def create\n    @campaign = current_user.campaigns.new(campaign_params)\n\n    if @campaign.save\n      redirect_to @campaign\n    else\n      render 'new'\n    end\n</code></pre>\n\n<p>I already did all the user_id migration and stuff</p>\n\n<pre><code>class Campaign &lt; ActiveRecord::Base\n    belongs_to :user\nend\n\n\n\n   class User &lt; ActiveRecord::Base\n\n  devise :database_authenticatable, :registerable,\n         :recoverable, :rememberable, :trackable, :validatable\n  has_many :campaigns\nend\n</code></pre>\n\n<p>Error Message: undefined method `campaigns' for #</p>\n"}, {"tags": ["ruby", "json"], "answers": [{"comments": [{"owner": {"reputation": 423, "user_id": 3385136, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/100005355848045/picture?type=large", "display_name": "user3385136", "link": "https://stackoverflow.com/users/3385136/user3385136"}, "edited": false, "score": 0, "creation_date": 1443017186, "post_id": 32737122, "comment_id": 53324390, "body": "This returns an error: &quot;undefined method `group_by&#39; for nil:NilClass&quot;. Apologies but how do i correctly implement this?"}], "tags": [], "owner": {"reputation": 1305, "user_id": 623919, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/c7d2113d86e7a9b16e8cac6956096bf0?s=128&d=identicon&r=PG", "display_name": "Axel Tetzlaff", "link": "https://stackoverflow.com/users/623919/axel-tetzlaff"}, "is_accepted": false, "score": 0, "last_activity_date": 1443004064, "creation_date": 1443004064, "answer_id": 32737122, "question_id": 32736462, "link": "https://stackoverflow.com/questions/32736462/how-to-extract-messages-string-from-json/32737122#32737122", "title": "How to extract messages string from JSON", "body": "<p>This will give you a hash with the message grouped by the <code>MessageThreadID</code></p>\n\n<pre><code>@cleanmessages.group_by{ |msg_hash| msg_hash['MessageThreadID']}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 423, "user_id": 3385136, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/100005355848045/picture?type=large", "display_name": "user3385136", "link": "https://stackoverflow.com/users/3385136/user3385136"}, "edited": false, "score": 0, "creation_date": 1443006158, "post_id": 32737377, "comment_id": 53316203, "body": "Where would i implement this?"}, {"owner": {"reputation": 3267, "user_id": 581073, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4fa5f135891832c4322ece5ef0d0ce5?s=128&d=identicon&r=PG", "display_name": "Alex Zhevzhik", "link": "https://stackoverflow.com/users/581073/alex-zhevzhik"}, "reply_to_user": {"reputation": 423, "user_id": 3385136, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/100005355848045/picture?type=large", "display_name": "user3385136", "link": "https://stackoverflow.com/users/3385136/user3385136"}, "edited": false, "score": 0, "creation_date": 1443008583, "post_id": 32737377, "comment_id": 53317875, "body": "Implement what? I don&#39;t know your application, how you want to store objects (data structure), and how you want to process them. And honestly it&#39;s beyond the question. You needed a piece of code to display each message from each thread. See that &quot;puts&quot; call? You have there a &quot;thread&quot; variable that is a Hash for thread properties, and &quot;m&quot; variable that is a Hash for a single message&#39;s properties in the given thread. And there you can do whatever you want, push in some other data structure, for instance."}], "tags": [], "owner": {"reputation": 3267, "user_id": 581073, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4fa5f135891832c4322ece5ef0d0ce5?s=128&d=identicon&r=PG", "display_name": "Alex Zhevzhik", "link": "https://stackoverflow.com/users/581073/alex-zhevzhik"}, "is_accepted": false, "score": 0, "last_activity_date": 1443007888, "last_edit_date": 1443007888, "creation_date": 1443004759, "answer_id": 32737377, "question_id": 32736462, "link": "https://stackoverflow.com/questions/32736462/how-to-extract-messages-string-from-json/32737377#32737377", "title": "How to extract messages string from JSON", "body": "<p>Not clear what output you actually want. </p>\n\n<pre><code>document = JSON.parse([@messages].to_json)\ndocument.each do |thread|\n    # gives you all text messages within the current thread: \"Test Message\", \"Test this Update\", ... \n    messages = thread['Messages'].map {|m| m['MessageText']} \n\n    # iterates over all messages in the current thread \n    thread['Messages'].each {|m| puts \"Message #{m['IBMessageID']} from thread #{thread['MessageThreadID']}\"}\nend\n</code></pre>\n\n<p>In general <strong>JSON.parse</strong> doesn't return something special. It returns either <strong>Array</strong> for corresponding JSON array or <strong>Hash</strong> for corresponding JSON object. </p>\n"}], "owner": {"reputation": 423, "user_id": 3385136, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/100005355848045/picture?type=large", "display_name": "user3385136", "link": "https://stackoverflow.com/users/3385136/user3385136"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 65, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1443007888, "creation_date": 1443002341, "question_id": 32736462, "link": "https://stackoverflow.com/questions/32736462/how-to-extract-messages-string-from-json", "title": "How to extract messages string from JSON", "body": "<p>I am attempting to reference the message array contained within this JSON but cant seem to get it. </p>\n\n<pre><code>[\n  {\n    \"MessageThreadID\": 1,\n    \"CustomerID\": 171,\n    \"MessageType\": 1,\n    \"Subject\": \"Test Message\",\n    \"OpenDate\": \"2015-09-17T00:00:00\",\n    \"Closed\": false,\n    \"ClosedDate\": null,\n    \"Messages\": [\n      {\n        \"IBMessageID\": 1,\n        \"MessageThreadID\": 1,\n        \"MessageText\": \"Test Message\",\n        \"FromCustomer\": true,\n        \"UserID\": null,\n        \"Date\": \"2015-09-17T17:23:00\"\n      },\n      {\n        \"IBMessageID\": 2,\n        \"MessageThreadID\": 1,\n        \"MessageText\": \"Test this Update\",\n        \"FromCustomer\": false,\n        \"UserID\": 1,\n        \"Date\": \"2015-09-17T17:23:00\"\n      },\n      {\n        \"IBMessageID\": 3,\n        \"MessageThreadID\": 1,\n        \"MessageText\": \"My New Message\",\n        \"FromCustomer\": false,\n        \"UserID\": 1,\n        \"Date\": \"2015-09-17T17:23:00\"\n      },\n      {\n        \"IBMessageID\": 4,\n        \"MessageThreadID\": 1,\n        \"MessageText\": \"Reply\",\n        \"FromCustomer\": false,\n        \"UserID\": 1,\n        \"Date\": \"2015-09-17T17:05:00\"\n      },\n      {\n        \"IBMessageID\": 5,\n        \"MessageThreadID\": 1,\n        \"MessageText\": \"Some sensible shit\",\n        \"FromCustomer\": false,\n        \"UserID\": 1,\n        \"Date\": \"2015-09-17T17:23:00\"\n      },\n      {\n        \"IBMessageID\": 14,\n        \"MessageThreadID\": 1,\n        \"MessageText\": \"Message 2\",\n        \"FromCustomer\": true,\n        \"UserID\": null,\n        \"Date\": \"2015-09-21T14:10:00\"\n      },\n      {\n        \"IBMessageID\": 16,\n        \"MessageThreadID\": 1,\n        \"MessageText\": \"Message 2\",\n        \"FromCustomer\": true,\n        \"UserID\": null,\n        \"Date\": \"2015-09-22T16:22:00\"\n      },\n      {\n        \"IBMessageID\": 25,\n        \"MessageThreadID\": 1,\n        \"MessageText\": \"Added via abacus\\r\\n\",\n        \"FromCustomer\": false,\n        \"UserID\": 1,\n        \"Date\": \"2015-09-22T16:22:00\"\n      },\n      {\n        \"IBMessageID\": 26,\n        \"MessageThreadID\": 1,\n        \"MessageText\": \"sdsdsdsd\",\n        \"FromCustomer\": true,\n        \"UserID\": null,\n        \"Date\": \"2015-09-22T16:40:00\"\n      },\n      {\n        \"IBMessageID\": 27,\n        \"MessageThreadID\": 1,\n        \"MessageText\": \"test\",\n        \"FromCustomer\": true,\n        \"UserID\": null,\n        \"Date\": \"2015-09-22T17:02:00\"\n      },\n      {\n        \"IBMessageID\": 28,\n        \"MessageThreadID\": 1,\n        \"MessageText\": \"test\",\n        \"FromCustomer\": true,\n        \"UserID\": null,\n        \"Date\": \"2015-09-22T17:06:00\"\n      }\n    ]\n  }\n]\n</code></pre>\n\n<p>The furthest I have gotten is:</p>\n\n<pre><code>@cleanmessages = JSON.parse([@messages].to_json).first\n</code></pre>\n\n<p>This returns:</p>\n\n<pre><code> [  \n   {  \n      \"IBMessageID\"      =&gt;1,\n      \"MessageThreadID\"      =&gt;1,\n      \"MessageText\"      =&gt;\"Test Message\",\n      \"FromCustomer\"      =&gt;true,\n      \"UserID\"      =&gt;nil,\n      \"Date\"      =&gt;\"2015-09-17T17:23:00      \"}, \n   {\n      \"IBMessageID\"=&gt;2,\n      \"MessageThreadID\"      =&gt;1,\n      \"MessageText\"      =&gt;\"Test this Update\",\n      \"FromCustomer\"      =&gt;false,\n      \"UserID\"      =&gt;1,\n      \"Date\"      =&gt;\"2015-09-17T17:23:00      \"}, \n   {\n      \"IBMessageID\"=&gt;3,\n      \"MessageThreadID\"      =&gt;1,\n      \"MessageText\"      =&gt;\"My New Message\",\n      \"FromCustomer\"      =&gt;false,\n      \"UserID\"      =&gt;1,\n      \"Date\"      =&gt;\"2015-09-17T17:23:00      \"}, \n   {\n      \"IBMessageID\"=&gt;4,\n      \"MessageThreadID\"      =&gt;1,\n      \"MessageText\"      =&gt;\"Reply\",\n      \"FromCustomer\"      =&gt;false,\n      \"UserID\"      =&gt;1,\n      \"Date\"      =&gt;\"2015-09-17T17:05:00      \"}, \n    {\n      \"IBMessageID\"=&gt;5,\n      \"MessageThreadID\"      =&gt;1,\n      \"MessageText\"      =&gt;\"Some sensible shit\",\n      \"FromCustomer\"      =&gt;false,\n      \"UserID\"      =&gt;1,\n      \"Date\"      =&gt;\"2015-09-17T17:23:00      \"}, \n   {\n      \"IBMessageID\"=&gt;14,\n      \"MessageThreadID\"      =&gt;1,\n      \"MessageText\"      =&gt;\"Message 2\",\n      \"FromCustomer\"      =&gt;true,\n      \"UserID\"      =&gt;nil,\n      \"Date\"      =&gt;\"2015-09-21T14:10:00      \"}, \n   {\n      \"IBMessageID\"=&gt;16,\n      \"MessageThreadID\"      =&gt;1,\n      \"MessageText\"      =&gt;\"Message 2\",\n      \"FromCustomer\"      =&gt;true,\n      \"UserID\"      =&gt;nil,\n      \"Date\"      =&gt;\"2015-09-22T16:22:00      \"}, \n   {\n      \"IBMessageID\"=&gt;25,\n      \"MessageThreadID\"      =&gt;1,\n      \"MessageText\"      =&gt;\"Added via abacus\\r\\n\",\n      \"FromCustomer\"      =&gt;false,\n      \"UserID\"      =&gt;1,\n      \"Date\"      =&gt;\"2015-09-22T16:22:00      \"}, \n   {\n      \"IBMessageID\"=&gt;26,\n      \"MessageThreadID\"      =&gt;1,\n      \"MessageText\"      =&gt;\"sdsdsdsd\",\n      \"FromCustomer\"      =&gt;true,\n      \"UserID\"      =&gt;nil,\n      \"Date\"      =&gt;\"2015-09-22T16:40:00      \"}, \n    {\n      \"IBMessageID\"=&gt;27,\n      \"MessageThreadID\"      =&gt;1,\n      \"MessageText\"      =&gt;\"test\",\n      \"FromCustomer\"      =&gt;true,\n      \"UserID\"      =&gt;nil,\n      \"Date\"      =&gt;\"2015-09-22T17:02:00      \"}, \n    {\n      \"IBMessageID\"=&gt;28,\n      \"MessageThreadID\"      =&gt;1,\n      \"MessageText\"      =&gt;\"test\",\n      \"FromCustomer\"      =&gt;true,\n      \"UserID\"      =&gt;nil,\n      \"Date\"      =&gt;\"2015-09-22T17:06:00\n   }\n]\n</code></pre>\n\n<p>How do i reference each element within each array. I want to in the end be able to display each element sepearately for each thread.</p>\n"}, {"tags": ["arrays", "ruby", "loops"], "comments": [{"owner": {"reputation": 1905, "user_id": 775943, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/b070133f1b3fa35cad70e109d9b9ecf8?s=128&d=identicon&r=PG", "display_name": "Erveron", "link": "https://stackoverflow.com/users/775943/erveron"}, "edited": false, "score": 2, "creation_date": 1443002198, "post_id": 32736292, "comment_id": 53313514, "body": "Welcome to SO. Unfortunately it is not clear what are you asking about - please provide more information like desired result etc."}], "answers": [{"tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": false, "score": 1, "last_activity_date": 1443006651, "creation_date": 1443006651, "answer_id": 32737995, "question_id": 32736292, "link": "https://stackoverflow.com/questions/32736292/cant-sum-elements-of-array-using-loop/32737995#32737995", "title": "Can&#39;t sum elements of array using loop", "body": "<p>Instead of <code>arr[i,j]</code> use the following syntax to get a value from a nested array:</p>\n\n<pre><code>arr[i][j]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 17357, "user_id": 794242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e871d15815cfef926f21737a5ccd30c4?s=128&d=identicon&r=PG", "display_name": "Wand Maker", "link": "https://stackoverflow.com/users/794242/wand-maker"}, "is_accepted": false, "score": 0, "last_activity_date": 1443034802, "creation_date": 1443034802, "answer_id": 32747457, "question_id": 32736292, "link": "https://stackoverflow.com/questions/32736292/cant-sum-elements-of-array-using-loop/32747457#32747457", "title": "Can&#39;t sum elements of array using loop", "body": "<p>Looks like some logic issues in your code.</p>\n\n<p>Here is a code to read a 2-D array</p>\n\n<pre><code>arr = []\nfor i in 0..2\n  a = []\n  for j in 0..2\n    print \"[#{i},#{j}] = \"\n    a &lt;&lt; Integer(gets)\n  end\n  arr &lt;&lt; a\nend\n</code></pre>\n\n<p>Once you have 2-D array, you can sum it like below</p>\n\n<pre><code>sum = 0\nfor i in 0...arr.size\n  for j in 0...arr[i].size\n    sum += arr [i][j]\n  end\nend\n\np sum\n</code></pre>\n\n<p>In Ruby, the sum part can also be done with built-in methods using something like below:</p>\n\n<pre><code>p arr.flatten.reduce(:+)\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 5326243, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db646c355be1649b8723f5937a89b8f3?s=128&d=identicon&r=PG&f=1", "display_name": "Roma  Baida", "link": "https://stackoverflow.com/users/5326243/roma-baida"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "answer_count": 2, "score": -4, "last_activity_date": 1443034802, "creation_date": 1443001904, "last_edit_date": 1443001982, "question_id": 32736292, "link": "https://stackoverflow.com/questions/32736292/cant-sum-elements-of-array-using-loop", "title": "Can&#39;t sum elements of array using loop", "body": "<pre><code>arr = Array.new(3)# { Array.new(3) }\nsum = 0\nfor i in 0..2\n  for j in 0..2\n    print \"[#{i},#{j}] = \"\n    arr[i]=Integer(gets)\n    sum+=arr[i,j]#Error here: in `+': Array can't be coerced into Fixnum (TypeError)\n  end\nend\nputs \"sum = #{sum}\"\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "linux"], "answers": [{"tags": [], "owner": {"reputation": 5014, "user_id": 3640770, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HJBjs.jpg?s=128&g=1", "display_name": "IngoAlbers", "link": "https://stackoverflow.com/users/3640770/ingoalbers"}, "is_accepted": false, "score": 0, "last_activity_date": 1443001151, "last_edit_date": 1495541200, "creation_date": 1443001151, "answer_id": 32736028, "question_id": 32735924, "link": "https://stackoverflow.com/questions/32735924/gem-install-syck-v-1-0-1-is-not-working/32736028#32736028", "title": "gem install syck -v &#39;1.0.1&#39; is not working", "body": "<p>You could try to use ruby 2.1 as 2.2 seems to cause trouble with this specific version of syck.</p>\n\n<p>If you want to keep ruby 2.2 you might have to use a newer version of syck.</p>\n\n<p>See also:\n<a href=\"https://stackoverflow.com/questions/30920570/how-to-install-syck-1-0-1-on-ubuntu-15-04\">How to install syck 1.0.1 on Ubuntu 15.04?</a></p>\n"}], "owner": {"reputation": 1, "user_id": 5366477, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef3393c7d128278838305d438c81db18?s=128&d=identicon&r=PG&f=1", "display_name": "Sherry", "link": "https://stackoverflow.com/users/5366477/sherry"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 385, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1443002843, "creation_date": 1443000827, "last_edit_date": 1443002843, "question_id": 32735924, "link": "https://stackoverflow.com/questions/32735924/gem-install-syck-v-1-0-1-is-not-working", "title": "gem install syck -v &#39;1.0.1&#39; is not working", "body": "<p>I have tried running this code</p>\n\n<pre><code>gem install syck -v '1.0.1'\n</code></pre>\n\n<p>it displayed an error as follows</p>\n\n<pre><code>Building native extensions.  This could take a while... ERROR:  Error\ninstalling syck:    ERROR: Failed to build gem native extension.\n\n    /home/sherin/.rbenv/versions/2.2.1/bin/ruby -r ./siteconf20150923-19918-9w2wjv.rb extconf.rb checking for st.h... yes\ncreating Makefile\n\nmake \"DESTDIR=\" clean\n\nmake \"DESTDIR=\" compiling token.c token.re: In function\n\u2018sycklex_yaml_utf8\u2019: token.re:541:36: warning: variable \u2018lvl\u2019 set but\nnot used [-Wunused-but-set-variable] compiling implicit.c compiling\nsyck.c compiling gram.c compiling bytecode.c compiling node.c\ncompiling rubyext.c rubyext.c:31:20: error: field \u2018hash\u2019 has\nincomplete type\n     struct RHash   hash;\n                    ^ rubyext.c: In function \u2018syck_seq_initialize\u2019: rubyext.c:1529:15: warning: variable \u2018node\u2019 set but not used\n[-Wunused-but-set-variable]\n     SyckNode *node;\n               ^ make: *** [rubyext.o] Error 1\n\nmake failed, exit code 2\n\nGem files will remain installed in\n/home/sherin/.rbenv/versions/2.2.1/lib/ruby/gems/2.2.0/gems/syck-1.0.1\nfor inspection. Results logged to\n/home/sherin/.rbenv/versions/2.2.1/lib/ruby/gems/2.2.0/extensions/x86_64-linux/2.2.0-static/syck-1.0.1/gem_make.out\n</code></pre>\n\n<p>Why this is happening..?</p>\n"}, {"tags": ["ruby", "ruby-on-rails-4", "image-processing", "paperclip"], "comments": [{"owner": {"reputation": 2424, "user_id": 4604645, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/yQczD.png?s=128&g=1", "display_name": "The Fabio", "link": "https://stackoverflow.com/users/4604645/the-fabio"}, "edited": false, "score": 0, "creation_date": 1443014322, "post_id": 32735841, "comment_id": 53322105, "body": "Would the 5 file uploads be in the same http request?"}, {"owner": {"reputation": 1095, "user_id": 1451128, "user_type": "registered", "accept_rate": 7, "profile_image": "https://i.stack.imgur.com/7MUJn.jpg?s=128&g=1", "display_name": "Raju akula", "link": "https://stackoverflow.com/users/1451128/raju-akula"}, "reply_to_user": {"reputation": 2424, "user_id": 4604645, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/yQczD.png?s=128&g=1", "display_name": "The Fabio", "link": "https://stackoverflow.com/users/4604645/the-fabio"}, "edited": false, "score": 0, "creation_date": 1443019458, "post_id": 32735841, "comment_id": 53326117, "body": "Yes, those are in same post request"}], "answers": [{"tags": [], "owner": {"reputation": 2424, "user_id": 4604645, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/yQczD.png?s=128&g=1", "display_name": "The Fabio", "link": "https://stackoverflow.com/users/4604645/the-fabio"}, "is_accepted": false, "score": 0, "last_activity_date": 1443050412, "last_edit_date": 1495541201, "creation_date": 1443050412, "answer_id": 32751023, "question_id": 32735841, "link": "https://stackoverflow.com/questions/32735841/how-paperclip-will-process-multiple-files-upload-at-a-time/32751023#32751023", "title": "How paperclip will process multiple files upload at a time?", "body": "<p>The file transportation mechanism for file uploads to the web server is the <a href=\"https://stackoverflow.com/questions/16958448/what-is-http-multipart-request\">http multipart request</a>. <code>paperclip</code> would not be used until the server finishes processing this request.</p>\n\n<p><code>paperclip</code> is not the transportation mechanism, it is a gem to (in small words) handle file data and storage whilst providing helpers to be used on the back-end of your rails application.</p>\n\n<p>When uploading a file or multiple files in the same <code>http request</code>, if the <code>http request</code> fails the webserver halts the transaction, and that happens before any interaction with rails controllers.</p>\n\n<p>An alternative for you would be to process the multiple file uploads separately on the front-end of your application, but that is a separated issue and I recommend you to do some research if you would like to go this path.</p>\n"}], "owner": {"reputation": 1095, "user_id": 1451128, "user_type": "registered", "accept_rate": 7, "profile_image": "https://i.stack.imgur.com/7MUJn.jpg?s=128&g=1", "display_name": "Raju akula", "link": "https://stackoverflow.com/users/1451128/raju-akula"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 110, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1443050412, "creation_date": 1443000623, "question_id": 32735841, "link": "https://stackoverflow.com/questions/32735841/how-paperclip-will-process-multiple-files-upload-at-a-time", "title": "How paperclip will process multiple files upload at a time?", "body": "<p>Suppose, i have uploaded 5 files and after some time due to network bandwidth issue it has thrown error.</p>\n\n<p>So in that case, Is my all 5 files upload failed? Infact, I want to know paperclip internal process for \n multiple images upload. </p>\n\n<p>Is that sequential order? Or all files at one single stream?</p>\n\n<p>Could you please explain me? If any one have idea about it. Thanks!</p>\n"}, {"tags": ["ruby", "helper", "ruby-on-rails-4.2"], "comments": [{"owner": {"reputation": 514, "user_id": 4613443, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/abfa85562e754636c46ac3dc3f67decd?s=128&d=identicon&r=PG", "display_name": "mohnstrudel", "link": "https://stackoverflow.com/users/4613443/mohnstrudel"}, "reply_to_user": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1443006605, "post_id": 32735176, "comment_id": 53316478, "body": "I&#39;m sorry I don&#39;t understand your question. Where am I supposed to have this line? I do have the file though if it&#39;s that what you mean."}, {"owner": {"reputation": 6689, "user_id": 273444, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26988136c0514172417b7c7c863733f2?s=128&d=identicon&r=PG", "display_name": "Alexey Shein", "link": "https://stackoverflow.com/users/273444/alexey-shein"}, "edited": false, "score": 0, "creation_date": 1443014598, "post_id": 32735176, "comment_id": 53322338, "body": "Did you try to move your project to a folder with a simpler name (i.e. that doesn&#39;t contain any cyrillic or special symbols like <code>(</code> )? Try move your project to a home directory and check again."}, {"owner": {"reputation": 514, "user_id": 4613443, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/abfa85562e754636c46ac3dc3f67decd?s=128&d=identicon&r=PG", "display_name": "mohnstrudel", "link": "https://stackoverflow.com/users/4613443/mohnstrudel"}, "reply_to_user": {"reputation": 6689, "user_id": 273444, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26988136c0514172417b7c7c863733f2?s=128&d=identicon&r=PG", "display_name": "Alexey Shein", "link": "https://stackoverflow.com/users/273444/alexey-shein"}, "edited": false, "score": 0, "creation_date": 1443106177, "post_id": 32735176, "comment_id": 53367945, "body": "@AlexeyShein it actually worked! Is it some temporary rails issue or do I have to move every project to some &quot;simplier&quot; path?"}, {"owner": {"reputation": 6689, "user_id": 273444, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26988136c0514172417b7c7c863733f2?s=128&d=identicon&r=PG", "display_name": "Alexey Shein", "link": "https://stackoverflow.com/users/273444/alexey-shein"}, "edited": false, "score": 0, "creation_date": 1443106536, "post_id": 32735176, "comment_id": 53368231, "body": "I am afraid it&#39;s a constant issue and quite often is not rails specific, there&#39;s a lot of code in the wild that doesn&#39;t expect special or extended unicode characters in the path."}], "answers": [{"tags": [], "owner": {"reputation": 6689, "user_id": 273444, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26988136c0514172417b7c7c863733f2?s=128&d=identicon&r=PG", "display_name": "Alexey Shein", "link": "https://stackoverflow.com/users/273444/alexey-shein"}, "is_accepted": true, "score": 1, "last_activity_date": 1443119732, "creation_date": 1443119732, "answer_id": 32768541, "question_id": 32735176, "link": "https://stackoverflow.com/questions/32735176/rails-requiring-helpers-with-rb-helper-file-extension/32768541#32768541", "title": "Rails requiring helpers with rb_helper file extension", "body": "<p>Did you try to move your project to a folder with a simpler name (i.e. that doesn't contain any cyrillic or special symbols like <code>(</code> )? </p>\n\n<p>Try moving your project to a home directory and check again.</p>\n"}], "owner": {"reputation": 514, "user_id": 4613443, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/abfa85562e754636c46ac3dc3f67decd?s=128&d=identicon&r=PG", "display_name": "mohnstrudel", "link": "https://stackoverflow.com/users/4613443/mohnstrudel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "accepted_answer_id": 32768541, "answer_count": 1, "score": 0, "last_activity_date": 1443119732, "creation_date": 1442998794, "last_edit_date": 1495542577, "question_id": 32735176, "link": "https://stackoverflow.com/questions/32735176/rails-requiring-helpers-with-rb-helper-file-extension", "title": "Rails requiring helpers with rb_helper file extension", "body": "<p>After upgrading all of my gems, I now receive following error:</p>\n\n<pre><code>LoadError at /\nNo such file to load -- /users/mohnstrudel/dropbox (\u041b\u0438\u0447\u043d\u044b\u0439)/projekte/personal/mosflash/app/helpers/application_helper.rb_helper\n</code></pre>\n\n<p>The error seems rather obvious, because my helper looks like this - application_helper.rb, not application_helper.rb_helper</p>\n\n<p>If I rename all my helpers extensions to rb_helper the next error I receive is: (the template is of course there and the whole app worked before the update) </p>\n\n<pre><code>Missing template store_front/index, application/index with {:locale=&gt;[:en], :formats=&gt;[:html], :variants=&gt;[], :handlers=&gt;[:erb, :builder, :raw, :ruby, :coffee, :haml, :jbuilder]}. Searched in:\n  * \"/Users/mohnstrudel/Dropbox (\u041b\u0438\u0447\u043d\u044b\u0438\u0306)/Projekte/personal/mosflash/app/views\"\n</code></pre>\n\n<p>I stumbled upon this question - <a href=\"https://stackoverflow.com/questions/27871726/strange-error-in-rails-missing-helper/27909917#27909917\">Strange error in rails - missing helper</a></p>\n\n<p>But renaming folders didn't help.</p>\n\n<p>My file paths:</p>\n\n<pre><code>2.2.0 :001 &gt; File.expand_path (\"./\")\n =&gt; \"/Users/mohnstrudel/Dropbox (\u041b\u0438\u0447\u043d\u044b\u0438\u0306)/Projekte/personal/mosflash\" \n\nMBP-Anton:mosflash mohnstrudel$ pwd\n/Users/mohnstrudel/Dropbox/Projekte/personal/mosflash\n</code></pre>\n\n<p>Is this a problem caused by Dropbox? I'm using a private account and a corporate one, this is why there are brackets. However using cd Dropbox/ or cd Dropbox (Personal)/ leads to same folder.</p>\n"}, {"tags": ["ruby", "regex"], "comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1442996681, "post_id": 32734445, "comment_id": 53310008, "body": "You mean you cannot change the code that creates the string <code>name</code>, and you have to modify it?"}, {"owner": {"reputation": 3595, "user_id": 2462524, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62bb0f238bf55efdc41c34ad5e315408?s=128&d=identicon&r=PG", "display_name": "phts", "link": "https://stackoverflow.com/users/2462524/phts"}, "edited": false, "score": 0, "creation_date": 1442996702, "post_id": 32734445, "comment_id": 53310016, "body": "Why don&#39;t you like this solution (in question)?"}, {"owner": {"reputation": 7262, "user_id": 1120530, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/e3ceb36b9980348b4062af73b7ca7dc9?s=128&d=identicon&r=PG", "display_name": "brg", "link": "https://stackoverflow.com/users/1120530/brg"}, "edited": false, "score": 0, "creation_date": 1442996744, "post_id": 32734445, "comment_id": 53310043, "body": "I will update with full code."}, {"owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1442997752, "post_id": 32734445, "comment_id": 53310603, "body": "I think you should not have used the term <i>optimize</i> here, as what you ask for is just help with some basic regex notion of capture groups. I do not know if it &quot;optimizes&quot; your code, but definitely gives you more control over the substring replacements (if you have some specific pattern)."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 2, "creation_date": 1442998228, "post_id": 32734445, "comment_id": 53310862, "body": "An array could help: <code>[&#39;builder&#39;, (&#39;one&#39; if cond), date_time].compact.join(&#39;-&#39;)</code>"}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 2, "creation_date": 1442998375, "post_id": 32734445, "comment_id": 53310954, "body": "@Stefan I would do: <code>[&#39;builder&#39;, *(&#39;one&#39; if cond), date_time].join(&#39;-&#39;)</code>."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 1, "creation_date": 1442999300, "post_id": 32734445, "comment_id": 53311526, "body": "@sawa excellent use of <code>*</code>!"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1443000222, "post_id": 32734445, "comment_id": 53312113, "body": "...or <code>&quot;builder-%s%s&quot; % [*(&#39;one-&#39; if cond), date_time]</code>."}], "answers": [{"comments": [{"owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 2, "creation_date": 1442997285, "post_id": 32734610, "comment_id": 53310343, "body": "@Downvoter: Any hint on what is wrong? <i>I have heard of regex capture and replace. Can we use it here? If yes, how?</i> - I guess my answer addresses that."}, {"owner": {"reputation": 7262, "user_id": 1120530, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/e3ceb36b9980348b4062af73b7ca7dc9?s=128&d=identicon&r=PG", "display_name": "brg", "link": "https://stackoverflow.com/users/1120530/brg"}, "edited": false, "score": 0, "creation_date": 1442998265, "post_id": 32734610, "comment_id": 53310879, "body": "Accepting for this solution &quot;name.sub(/^([^-]*-)/, &quot;\\\\1one-&quot;)&quot; as one is also variable here and need to be interpolated at some time. Please remove other optimal way to be precise with solution."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1442998339, "post_id": 32734610, "comment_id": 53310928, "body": "How can anything be &quot;more optimal&quot; than something else? &quot;Better&quot;, yes."}, {"owner": {"reputation": 7262, "user_id": 1120530, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/e3ceb36b9980348b4062af73b7ca7dc9?s=128&d=identicon&r=PG", "display_name": "brg", "link": "https://stackoverflow.com/users/1120530/brg"}, "edited": false, "score": 0, "creation_date": 1442998363, "post_id": 32734610, "comment_id": 53310948, "body": "Thanks  anyway. I have less grip on regex :)"}, {"owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "reply_to_user": {"reputation": 7262, "user_id": 1120530, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/e3ceb36b9980348b4062af73b7ca7dc9?s=128&d=identicon&r=PG", "display_name": "brg", "link": "https://stackoverflow.com/users/1120530/brg"}, "edited": false, "score": 0, "creation_date": 1442998438, "post_id": 32734610, "comment_id": 53310986, "body": "@ram: I added that ternary operator option for the downvoters. I think they did it because I suggested the regex."}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1442998484, "post_id": 32734610, "comment_id": 53311013, "body": "How is a newline character relevant to this question?"}, {"owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1442998614, "post_id": 32734610, "comment_id": 53311108, "body": "@sawa: Could you clarify what newline character you mean? I have not mentioned any in my answer."}], "tags": [], "owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "is_accepted": true, "score": 3, "last_activity_date": 1442998191, "last_edit_date": 1442998191, "creation_date": 1442997109, "answer_id": 32734610, "question_id": 32734445, "link": "https://stackoverflow.com/questions/32734445/need-better-regex-solution-in-ruby/32734610#32734610", "title": "Need better regex solution in Ruby", "body": "<p>To utilize capturing mechanism, you need to use <em>round brackets</em> round a subpattern that you would like to refer to using a back-reference in the replacement string. </p>\n\n<p>Here is an example:</p>\n\n<pre><code>date_time = Time.now.strftime('%Y%m%d%H%M%S')\nname = \"builder-#{date_time}\"\nputs name.sub(/^([^-]*-)/, \"\\\\1one-\")\n</code></pre>\n\n<p>See <a href=\"http://ideone.com/DvlXPV\" rel=\"nofollow\">IDEONE demo</a></p>\n\n<p>The <code>^([^-]*-)</code> matches and captures all characters other than <code>-</code> from the beginning of the string (<code>^</code>) and a hyphen, and then we refer to the text with <code>\\\\1</code> in the replacement string.</p>\n\n<p>Refer to <a href=\"http://www.regular-expressions.info/brackets.html\" rel=\"nofollow\"><em>Use Parentheses for Grouping and Capturing</em> at Regular-Expressions.info</a> for more details.</p>\n\n<p>A more optimal way is using a ternary operator when initializing <code>name</code> variable:</p>\n\n<pre><code>a = 1\ndate_time = Time.now.strftime('%Y%m%d%H%M%S')\nname = \"builder-\" + (some_condition ? \"one-\" : \"\") + \"#{date_time}\"\n</code></pre>\n\n<p><a href=\"http://ideone.com/iVnPDe\" rel=\"nofollow\">IDEONE demo</a></p>\n"}, {"tags": [], "owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "is_accepted": false, "score": 1, "last_activity_date": 1442997821, "creation_date": 1442997821, "answer_id": 32734819, "question_id": 32734445, "link": "https://stackoverflow.com/questions/32734445/need-better-regex-solution-in-ruby/32734819#32734819", "title": "Need better regex solution in Ruby", "body": "<p>Strategy one - precalculate the prefix:</p>\n\n<pre><code>date_time = Time.now.strftime('%Y%m%d%H%M%S')\nprefix    = some_condition ? 'builder-one-' : 'builder-'\nname      = \"#{prefix}#{date_time}\"\n</code></pre>\n\n<p>The string <code>'builder-'</code> is repeated twice here. Obviously, you can DRY it even more, but it's an overkill IMHO.\n<hr>\nStrategy two - use a lookahead:</p>\n\n<pre><code>date_time = Time.now.strftime('%Y%m%d%H%M%S')\nname      = \"builder-#{date_time}\"\n\nname.sub!(/(?=#{date_time})/, \"one-\") if some_condition\n</code></pre>\n\n<p>Now <code>date_time</code> appears only twice. I wouldn't say it's a great improvement. I wouldn't say there is much of a problem to begin with.</p>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 0, "last_activity_date": 1443416975, "last_edit_date": 1443416975, "creation_date": 1443000902, "answer_id": 32735952, "question_id": 32734445, "link": "https://stackoverflow.com/questions/32734445/need-better-regex-solution-in-ruby/32735952#32735952", "title": "Need better regex solution in Ruby", "body": "<pre><code>\"builder-\" + (\"one-\" if some_condition).to_s + date_time\n\ndate_time = \"right now\"\n\nsome_condition = true\n\"builder-\" + (\"one-\" if some_condition).to_s + date_time\n  #=&gt; \"builder-one-right now\"\n\nsome_condition = false\n\"builder-\" + (\"one-\" if some_condition).to_s + date_time\n #=&gt; \"builder-right now\"   \n</code></pre>\n\n<p>Note that:</p>\n\n<pre><code>(\"one-\" if false).to_s #=&gt; nil.to_s =&gt; \"\"\n</code></pre>\n"}], "owner": {"reputation": 7262, "user_id": 1120530, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/e3ceb36b9980348b4062af73b7ca7dc9?s=128&d=identicon&r=PG", "display_name": "brg", "link": "https://stackoverflow.com/users/1120530/brg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "accepted_answer_id": 32734610, "answer_count": 3, "score": 0, "last_activity_date": 1443416975, "creation_date": 1442996548, "last_edit_date": 1442998003, "question_id": 32734445, "link": "https://stackoverflow.com/questions/32734445/need-better-regex-solution-in-ruby", "title": "Need better regex solution in Ruby", "body": "<p>I have following code:</p>\n\n<pre><code>date_time = Time.now.strftime('%Y%m%d%H%M%S')\nname = \"builder-#{date_time}\"   # builder-20150923125450\n\nif some_condition\n  name.sub!(\"#{date_time}\", \"one-#{date_time}\") # builder-one-20150923125450\nend\n</code></pre>\n\n<p>Above code is working fine.\nBut I think it could be better as I feel like I am repeating <code>#{date_time}</code> twice here.</p>\n\n<p>I have heard of regex <code>capture and replace</code>. Can we use it here? If yes, how?</p>\n"}, {"tags": ["ruby", "rubygems", "redcarpet", "slate"], "comments": [{"owner": {"reputation": 6689, "user_id": 273444, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26988136c0514172417b7c7c863733f2?s=128&d=identicon&r=PG", "display_name": "Alexey Shein", "link": "https://stackoverflow.com/users/273444/alexey-shein"}, "edited": false, "score": 0, "creation_date": 1443177220, "post_id": 32734286, "comment_id": 53398726, "body": "What OS are you using?"}, {"owner": {"reputation": 2591, "user_id": 2689541, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/efb8ec80d1ae2fd19fb7629da7e702db?s=128&d=identicon&r=PG&f=1", "display_name": "haradwaith", "link": "https://stackoverflow.com/users/2689541/haradwaith"}, "edited": false, "score": 0, "creation_date": 1443177348, "post_id": 32734286, "comment_id": 53398795, "body": "I cannot reproduce this problem on my computer, with the same Gemfile. Did you change the <code>slate</code> engine somehow? Usually the code snippets are shown in another column with <code>slate</code>."}, {"owner": {"reputation": 6689, "user_id": 273444, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26988136c0514172417b7c7c863733f2?s=128&d=identicon&r=PG", "display_name": "Alexey Shein", "link": "https://stackoverflow.com/users/273444/alexey-shein"}, "edited": false, "score": 1, "creation_date": 1443177643, "post_id": 32734286, "comment_id": 53398966, "body": "Your markdown compiles just fine for me. I just had to comment <code>therubyracer</code> gem since it&#39;s causing some hanging issues for me (and install <code>nodejs</code> package instead)."}, {"owner": {"reputation": 8759, "user_id": 978320, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/EVo7J.png?s=128&g=1", "display_name": "Joy", "link": "https://stackoverflow.com/users/978320/joy"}, "reply_to_user": {"reputation": 6689, "user_id": 273444, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26988136c0514172417b7c7c863733f2?s=128&d=identicon&r=PG", "display_name": "Alexey Shein", "link": "https://stackoverflow.com/users/273444/alexey-shein"}, "edited": false, "score": 0, "creation_date": 1443399654, "post_id": 32734286, "comment_id": 53464837, "body": "@AlexeyShein I am on Win7 x64. I am pretty sure that the markdown syntax is correct, because other interpreters work well. I just want to get some hint, at least, about where the probable cause is? Log file, or reinstall which gem, what so ever."}], "answers": [{"tags": [], "owner": {"reputation": 8759, "user_id": 978320, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/EVo7J.png?s=128&g=1", "display_name": "Joy", "link": "https://stackoverflow.com/users/978320/joy"}, "is_accepted": true, "score": 1, "last_activity_date": 1444456386, "last_edit_date": 1444456386, "creation_date": 1444440764, "answer_id": 33049329, "question_id": 32734286, "link": "https://stackoverflow.com/questions/32734286/markdown-not-interpreted-by-ruby-redcarpet-correctly/33049329#33049329", "title": "Markdown not interpreted by Ruby redcarpet correctly", "body": "<p>Updating to the newest version <a href=\"https://github.com/vmg/redcarpet/releases/tag/v3.3.3\" rel=\"nofollow\">(3.3.3)</a> of RedCarpet solved my problem.</p>\n\n<hr>\n\n<h3>Update 1</h3>\n\n<p>Well, it still has problems: I cannot change even a single letter inside the Markdown file. Otherwise, the generated HTML markup screws up again...</p>\n\n<hr>\n\n<h3>Update 2</h3>\n\n<p>Finally solved. Switching <a href=\"https://github.com/vmg/redcarpet\" rel=\"nofollow\">RedCarpet</a> to <a href=\"https://github.com/gettalong/kramdown\" rel=\"nofollow\">kramdown</a> solved it.</p>\n\n<p>My <code>config.rb</code>:</p>\n\n<pre><code># set :markdown_engine, :redcarpet\nset :markdown_engine, :kramdown\nset :markdown,\n    fenced_code_blocks: true,\n    smartypants: true,\n    disable_indented_code_blocks: true,\n    prettify: true,\n    tables: true,\n    with_toc_data: true,\n    no_intra_emphasis: true\n</code></pre>\n"}], "owner": {"reputation": 8759, "user_id": 978320, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/EVo7J.png?s=128&g=1", "display_name": "Joy", "link": "https://stackoverflow.com/users/978320/joy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 233, "favorite_count": 1, "accepted_answer_id": 33049329, "answer_count": 1, "score": 5, "last_activity_date": 1444456386, "creation_date": 1442996004, "last_edit_date": 1443419250, "question_id": 32734286, "link": "https://stackoverflow.com/questions/32734286/markdown-not-interpreted-by-ruby-redcarpet-correctly", "title": "Markdown not interpreted by Ruby redcarpet correctly", "body": "<p>I have a following markdown for my <a href=\"https://github.com/tripit/slate\" rel=\"nofollow noreferrer\"><code>slate</code></a> project:</p>\n\n<pre><code>---\ntitle: API Reference\nlanguage_tabs:\n  - http\n  - javascript\nsearch: true\n---\n# Getting Started\n## Logout\n# Call Management\n## Call States\n```javascript\n{\n}\n```\n## Call Notification\n## Caller ID Called Number\n## Call Information During Call\n</code></pre>\n\n<p>And I use <code>middleman</code> to serve a site: <code>bundle exec middleman server</code>. However, the last subsection title is not interpreted correctly as a <code>h2</code> tag (screenshot). The result is the same if I build it through <code>rake build</code>. </p>\n\n<p><strong>However, if I put this markdown on other interpreters like <a href=\"http://stackedit.io\" rel=\"nofollow noreferrer\">http://stackedit.io</a>, it is fine.</strong> </p>\n\n<p>So I suspect that my markdown interpreter (<a href=\"https://github.com/vmg/redcarpet\" rel=\"nofollow noreferrer\">Ruby redcarpet</a>) is broken somehow. I did not get any warning/error message on the console. I tried different versions of redcarpet. The interpreted HTML is also erroneous, although errors are different. I suppose some combination of Ruby and Redcarpet will make it?</p>\n\n<p>Here is my <code>config.rb</code>:</p>\n\n<pre><code># Markdown\nset :markdown_engine, :redcarpet\nset :markdown,\nfenced_code_blocks: true,\nsmartypants: true,\ndisable_indented_code_blocks: true,\nprettify: true,\ntables: true,\nwith_toc_data: true,\nno_intra_emphasis: true\n</code></pre>\n\n<p>Could anybody tell what the probable cause is? Or how to recover?</p>\n\n<p><a href=\"https://i.stack.imgur.com/WDHfe.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/WDHfe.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 14407, "user_id": 3035830, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/14809f2ad7f14e2867798697ab8f8006?s=128&d=identicon&r=PG", "display_name": "shivam", "link": "https://stackoverflow.com/users/3035830/shivam"}, "edited": false, "score": 2, "creation_date": 1442994966, "post_id": 32733943, "comment_id": 53309115, "body": "are both <code>@mtw.first.word</code> and <code>missing_association_words</code> of String class?"}, {"owner": {"reputation": 32682, "user_id": 120518, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/edf1077f9152b361937f12707e3af891?s=128&d=identicon&r=PG", "display_name": "Shadwell", "link": "https://stackoverflow.com/users/120518/shadwell"}, "edited": false, "score": 3, "creation_date": 1442994995, "post_id": 32733943, "comment_id": 53309132, "body": "Worth checking for whitespace after <code>text</code> too."}, {"owner": {"reputation": 51, "user_id": 2952967, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/1313409169/picture?type=large", "display_name": "Fauzan Raza", "link": "https://stackoverflow.com/users/2952967/fauzan-raza"}, "edited": false, "score": 0, "creation_date": 1442995142, "post_id": 32733943, "comment_id": 53309230, "body": "<code>missing_association_words</code> is an array and <code>@mtw</code> is also an array."}, {"owner": {"reputation": 2499, "user_id": 5208760, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/L6VNv.jpg?s=128&g=1", "display_name": "Mateusz", "link": "https://stackoverflow.com/users/5208760/mateusz"}, "edited": false, "score": 0, "creation_date": 1442995180, "post_id": 32733943, "comment_id": 53309245, "body": "Could you post them?"}, {"owner": {"reputation": 3805, "user_id": 2075801, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f845c96122bd745f0614185a840d850b?s=128&d=identicon&r=PG", "display_name": "Yury Lebedev", "link": "https://stackoverflow.com/users/2075801/yury-lebedev"}, "edited": false, "score": 0, "creation_date": 1442995325, "post_id": 32733943, "comment_id": 53309323, "body": "you are actually comparing two arrays for identical values. I posted an answer how you could do that"}, {"owner": {"reputation": 2210, "user_id": 1036696, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/wW4n9.png?s=128&g=1", "display_name": "Tim Kretschmer", "link": "https://stackoverflow.com/users/1036696/tim-kretschmer"}, "edited": false, "score": 0, "creation_date": 1442995418, "post_id": 32733943, "comment_id": 53309370, "body": "glad u used RUBY inside the title - but sad u tagged it with rails!"}, {"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 0, "creation_date": 1442995748, "post_id": 32733943, "comment_id": 53309531, "body": "What is the type of <code>@mtw.first.word</code> and what is the type of <code>missing_association_words.first</code>?"}], "answers": [{"tags": [], "owner": {"reputation": 3805, "user_id": 2075801, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f845c96122bd745f0614185a840d850b?s=128&d=identicon&r=PG", "display_name": "Yury Lebedev", "link": "https://stackoverflow.com/users/2075801/yury-lebedev"}, "is_accepted": false, "score": 0, "last_activity_date": 1442995266, "creation_date": 1442995266, "answer_id": 32734077, "question_id": 32733943, "link": "https://stackoverflow.com/questions/32733943/how-is-this-possible-ruby-if-loop-fails/32734077#32734077", "title": "How is this possible? Ruby if loop fails", "body": "<p>If you want to check if the values from the second array are also included in the first array, you can use this:</p>\n\n<pre><code>(first_array &amp; second_array).any?\n</code></pre>\n"}], "owner": {"reputation": 51, "user_id": 2952967, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/1313409169/picture?type=large", "display_name": "Fauzan Raza", "link": "https://stackoverflow.com/users/2952967/fauzan-raza"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 80, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1442996289, "creation_date": 1442994797, "last_edit_date": 1442996289, "question_id": 32733943, "link": "https://stackoverflow.com/questions/32733943/how-is-this-possible-ruby-if-loop-fails", "title": "How is this possible? Ruby if loop fails", "body": "<p>I don't understand how this can be:</p>\n\n<pre><code> (byebug) missing_association_words.include?(@mtw.first.word)\n false\n (byebug) @mtw.first.word\n text\n (byebug) missing_association_words\n text\n</code></pre>\n\n<p>This piece of code returns <code>false</code> although both contain the same value.</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1442995407, "post_id": 32733893, "comment_id": 53309364, "body": "Do you mean RFC 3339?"}], "answers": [{"tags": [], "owner": {"reputation": 7525, "user_id": 1805902, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/0W7rW.png?s=128&g=1", "display_name": "pangpang", "link": "https://stackoverflow.com/users/1805902/pangpang"}, "is_accepted": true, "score": 2, "last_activity_date": 1442995345, "last_edit_date": 1442995345, "creation_date": 1442994751, "answer_id": 32733925, "question_id": 32733893, "link": "https://stackoverflow.com/questions/32733893/how-to-get-date-and-time-from-rfc399-ruby/32733925#32733925", "title": "How to get date and time from rfc399 ruby", "body": "<pre><code>DateTime.parse(\"2015-09-23T07:12:54.404Z\")\n\nDateTime.parse(\"2015-09-23T07:12:54.404Z\").strftime(\"%d-%m-%Y,%H:%M:%S\")\n=&gt; \"23-09-2015,07:12:54\"\n\nDateTime.parse(\"2015-09-23T07:12:54.404Z\").strftime(\"%d-%m-%Y,%H:%M:%S%P\")\n=&gt; \"23-09-2015,07:12:54am\"\n</code></pre>\n\n<p>if you want to get timeZone, just need to add <code>%z</code> or <code>%Z</code>.</p>\n"}], "owner": {"reputation": 5024, "user_id": 1239665, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/yvQDs.jpg?s=128&g=1", "display_name": "Zubair", "link": "https://stackoverflow.com/users/1239665/zubair"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "accepted_answer_id": 32733925, "answer_count": 1, "score": 1, "last_activity_date": 1442995345, "creation_date": 1442994613, "last_edit_date": 1442994883, "question_id": 32733893, "link": "https://stackoverflow.com/questions/32733893/how-to-get-date-and-time-from-rfc399-ruby", "title": "How to get date and time from rfc399 ruby", "body": "<p>How to get date and time form the following timestamp or parse date: </p>\n\n<pre><code>2015-09-23T07:12:54.404Z\n</code></pre>\n\n<p>Need to display time in format 23-09-2015, 7:54Am. Also need to get timeZone.</p>\n"}, {"tags": ["ruby", "hash"], "answers": [{"comments": [{"owner": {"reputation": 169, "user_id": 5097395, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/9b03ceb4fc2f830bff550dc6c4110c8f?s=128&d=identicon&r=PG&f=1", "display_name": "karlihnos", "link": "https://stackoverflow.com/users/5097395/karlihnos"}, "edited": false, "score": 0, "creation_date": 1442995577, "post_id": 32734013, "comment_id": 53309441, "body": "Thxs for your effort, this works, however, when adding a totally new key: &#39;en.new_key.level&#39; it does not work."}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "reply_to_user": {"reputation": 169, "user_id": 5097395, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/9b03ceb4fc2f830bff550dc6c4110c8f?s=128&d=identicon&r=PG&f=1", "display_name": "karlihnos", "link": "https://stackoverflow.com/users/5097395/karlihnos"}, "edited": false, "score": 0, "creation_date": 1442995678, "post_id": 32734013, "comment_id": 53309489, "body": "There is no way to make that work. If the value for an intermediate level <code>&quot;new_key&quot;</code> is the string <code>&quot;x value&quot;</code>, then there is no sense for looking deeper."}, {"owner": {"reputation": 169, "user_id": 5097395, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/9b03ceb4fc2f830bff550dc6c4110c8f?s=128&d=identicon&r=PG&f=1", "display_name": "karlihnos", "link": "https://stackoverflow.com/users/5097395/karlihnos"}, "edited": false, "score": 0, "creation_date": 1442995856, "post_id": 32734013, "comment_id": 53309588, "body": "Well, the point is that I have a yaml data and that is why it is important to look deeper or maintain the hierarchy. I&#39;m comparing two languages (keys)."}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "reply_to_user": {"reputation": 169, "user_id": 5097395, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/9b03ceb4fc2f830bff550dc6c4110c8f?s=128&d=identicon&r=PG&f=1", "display_name": "karlihnos", "link": "https://stackoverflow.com/users/5097395/karlihnos"}, "edited": false, "score": 0, "creation_date": 1442995954, "post_id": 32734013, "comment_id": 53309632, "body": "Whatever your point is, it does not make sense to consider &quot;the value for the key <code>&quot;level&quot;</code> within the string <code>&quot;x value&quot;</code>&quot;."}, {"owner": {"reputation": 169, "user_id": 5097395, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/9b03ceb4fc2f830bff550dc6c4110c8f?s=128&d=identicon&r=PG&f=1", "display_name": "karlihnos", "link": "https://stackoverflow.com/users/5097395/karlihnos"}, "edited": false, "score": 0, "creation_date": 1442996412, "post_id": 32734013, "comment_id": 53309865, "body": "Sorry, but I do not get why it does not make sense. For YAML data the hierarchy is very important. And the insertion of new keys must keep the hierarchy, otherwise it wont work the translations."}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "reply_to_user": {"reputation": 169, "user_id": 5097395, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/9b03ceb4fc2f830bff550dc6c4110c8f?s=128&d=identicon&r=PG&f=1", "display_name": "karlihnos", "link": "https://stackoverflow.com/users/5097395/karlihnos"}, "edited": false, "score": 0, "creation_date": 1442996471, "post_id": 32734013, "comment_id": 53309894, "body": "Then tell me: What is &quot;the value for the key <code>&quot;level&quot;</code> in the string <code>&quot;x value&quot;</code>&quot;?"}, {"owner": {"reputation": 169, "user_id": 5097395, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/9b03ceb4fc2f830bff550dc6c4110c8f?s=128&d=identicon&r=PG&f=1", "display_name": "karlihnos", "link": "https://stackoverflow.com/users/5097395/karlihnos"}, "edited": false, "score": 0, "creation_date": 1442996706, "post_id": 32734013, "comment_id": 53310018, "body": "Let&#39;s say I add a new key to english, en.new_key.level = &quot;Welcome&quot;, for spanish this new key must be added like this, es.new_key.level = &quot;Bienvenidos&quot;. For looking these translations I have to follow the complete path (language.new_key.level). The &quot;x value&quot; is just a random value I gave it."}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "reply_to_user": {"reputation": 169, "user_id": 5097395, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/9b03ceb4fc2f830bff550dc6c4110c8f?s=128&d=identicon&r=PG&f=1", "display_name": "karlihnos", "link": "https://stackoverflow.com/users/5097395/karlihnos"}, "edited": false, "score": 0, "creation_date": 1442996845, "post_id": 32734013, "comment_id": 53310091, "body": "&quot;The <code>&quot;x value&quot;</code> is just a random value I gave it&quot;--You didn&#39;t write so in the question. And whatever other string it is, it does not make a difference."}], "tags": [], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "is_accepted": true, "score": 3, "last_activity_date": 1442995776, "last_edit_date": 1442995776, "creation_date": 1442995031, "answer_id": 32734013, "question_id": 32733848, "link": "https://stackoverflow.com/questions/32733848/create-key-in-hash-with-inject-method-in-ruby/32734013#32734013", "title": "Create key in hash with inject method in Ruby", "body": "<pre><code>key = 'en.countries.new_one'\n\nkey.split(\".\").inject(y) do |h, k| \n  h.key?(k) ? h[k] : h[k] = \"x value\" \nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1442995701, "post_id": 32734141, "comment_id": 53309501, "body": "That will keep returning the original <code>hash</code>. Assignment can only (correctly) happen at the deepest level (since the value is a string), so you don&#39;t need the explicit <code>hash</code> anyway."}], "tags": [], "owner": {"reputation": 7638, "user_id": 1014251, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/1c4500c91af486c885af8bb84eefd063?s=128&d=identicon&r=PG", "display_name": "ReggieB", "link": "https://stackoverflow.com/users/1014251/reggieb"}, "is_accepted": false, "score": 3, "last_activity_date": 1442996062, "last_edit_date": 1442996062, "creation_date": 1442995505, "answer_id": 32734141, "question_id": 32733848, "link": "https://stackoverflow.com/questions/32733848/create-key-in-hash-with-inject-method-in-ruby/32734141#32734141", "title": "Create key in hash with inject method in Ruby", "body": "<p>The key to getting a hash to work with inject, is to remember that on each iteration, the hash being built needs to be the item returned.</p>\n\n<p>So:</p>\n\n<pre><code>'en.countries.new_one'.split('.').inject({}) do |hash, key| \n  hash[key] ||= \"some value\" \n  hash\nend\n</code></pre>\n\n<p>Assigning a value to a hash key returns the value being assigned, not the hash. So you have to explicitly add to the end of the iteration code, a call that returns the hash being built.</p>\n"}], "owner": {"reputation": 169, "user_id": 5097395, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/9b03ceb4fc2f830bff550dc6c4110c8f?s=128&d=identicon&r=PG&f=1", "display_name": "karlihnos", "link": "https://stackoverflow.com/users/5097395/karlihnos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 263, "favorite_count": 0, "accepted_answer_id": 32734013, "answer_count": 2, "score": 0, "last_activity_date": 1443439497, "creation_date": 1442994446, "last_edit_date": 1495540702, "question_id": 32733848, "link": "https://stackoverflow.com/questions/32733848/create-key-in-hash-with-inject-method-in-ruby", "title": "Create key in hash with inject method in Ruby", "body": "<p>For accessing a nested value in the following hash:</p>\n\n<pre><code> y={\"en\"=&gt;\n  {\"slogan\"=&gt;\"Sky\",\n   \"countries\"=&gt;{\"AW\"=&gt;\"Aruba\", \"AF\"=&gt;\"Afghanistan\"},\n   \"op_modes\"=&gt;{\"classic\"=&gt;{0=&gt;\"Alert\", 10=&gt;\"Auto\"}},\n   \"reg\"=&gt;\n    {\"headline\"=&gt;\"Online\",\n     \"key1\"=&gt;\"value1\",\n     \"key2\"=&gt;\"value2\",\n     \"key3\"=&gt;\"value3\",\n     \"key4\"=&gt;\"value4\",\n     \"installation\"=&gt;\n      {\"text1\"=&gt;\n        \"'3.2 Tomorrow:'\\n\",\n       \"gridtypes\"=&gt;{\"tt\"=&gt;\"TT\", \"tn-s\"=&gt;\"TN-S\"}}}}}\n</code></pre>\n\n<p>I have this (found the way in <a href=\"https://stackoverflow.com/questions/6672007\">this post</a>):</p>\n\n<pre><code>key = 'en.countries.AW'\nki = key.split('.')\nfg = ki.inject(y) {|h, k| h[k]} # =&gt; \"Aruba\"\n</code></pre>\n\n<p>How can I assign value <code>\"x value\"</code> when a key does not exist? How can I create a new key (any depth) with this value?</p>\n\n<p>I tried something like this but there is an error:</p>\n\n<pre><code>key = 'en.countries.new_one'\n\nif fg.nil?\n  ki.inject(y) do |h, k|\n    h[k] = \"x value\"\n  end\nend\n</code></pre>\n\n<p>Update:</p>\n\n<p>The answer of sawa helped me a lot but I did a little modification to reach unlimited levels (depth).</p>\n\n<pre><code>key = 'en.countries.new_one'\n\nkey.split(\".\").inject(y) do |h, k| \n  h.key?(k) ? h[k] : h[k] = {} \nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "stripe-payments"], "comments": [{"owner": {"reputation": 1634, "user_id": 319297, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/tyBYy.png?s=128&g=1", "display_name": "Zahid", "link": "https://stackoverflow.com/users/319297/zahid"}, "edited": false, "score": 1, "creation_date": 1442993626, "post_id": 32733551, "comment_id": 53308383, "body": "On which line in this error happening?"}, {"owner": {"reputation": 69, "user_id": 4696748, "user_type": "registered", "accept_rate": 20, "profile_image": "https://lh3.googleusercontent.com/-9ZTUciI1RjU/AAAAAAAAAAI/AAAAAAAAAEA/L5JvK9DZP_M/photo.jpg?sz=128", "display_name": "Script-Kiddie", "link": "https://stackoverflow.com/users/4696748/script-kiddie"}, "reply_to_user": {"reputation": 1634, "user_id": 319297, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/tyBYy.png?s=128&g=1", "display_name": "Zahid", "link": "https://stackoverflow.com/users/319297/zahid"}, "edited": false, "score": 0, "creation_date": 1442993745, "post_id": 32733551, "comment_id": 53308460, "body": "block in _app_views_registrations_new_html_haml Here : = f.hidden_field :course_id, value: @course.id"}, {"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 1, "creation_date": 1442993797, "post_id": 32733551, "comment_id": 53308489, "body": "<code>@course</code> is <b>nil</b>."}, {"owner": {"reputation": 1634, "user_id": 319297, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/tyBYy.png?s=128&g=1", "display_name": "Zahid", "link": "https://stackoverflow.com/users/319297/zahid"}, "edited": false, "score": 0, "creation_date": 1442993891, "post_id": 32733551, "comment_id": 53308550, "body": "you are finding @course against a param[&quot;course_id&quot;] which obviously does not exist, first create a course in your db against given ID and than try to do registration."}, {"owner": {"reputation": 69, "user_id": 4696748, "user_type": "registered", "accept_rate": 20, "profile_image": "https://lh3.googleusercontent.com/-9ZTUciI1RjU/AAAAAAAAAAI/AAAAAAAAAEA/L5JvK9DZP_M/photo.jpg?sz=128", "display_name": "Script-Kiddie", "link": "https://stackoverflow.com/users/4696748/script-kiddie"}, "edited": false, "score": 0, "creation_date": 1442994036, "post_id": 32733551, "comment_id": 53308630, "body": "I already has multiple Course through seeds  Course.create name: &quot;INTRODUCTION TO REPOSTERY (4 Weeks)&quot;, price: 475"}, {"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 0, "creation_date": 1442994434, "post_id": 32733551, "comment_id": 53308833, "body": "How are you redirected to <code>new.html.erb</code> page? If by clicking a link, then post that code."}, {"owner": {"reputation": 69, "user_id": 4696748, "user_type": "registered", "accept_rate": 20, "profile_image": "https://lh3.googleusercontent.com/-9ZTUciI1RjU/AAAAAAAAAAI/AAAAAAAAAEA/L5JvK9DZP_M/photo.jpg?sz=128", "display_name": "Script-Kiddie", "link": "https://stackoverflow.com/users/4696748/script-kiddie"}, "edited": false, "score": 0, "creation_date": 1442994547, "post_id": 32733551, "comment_id": 53308895, "body": "Should i upload the code to github and then show you ?"}, {"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 0, "creation_date": 1442994636, "post_id": 32733551, "comment_id": 53308944, "body": "Please update it in your question."}], "answers": [{"comments": [{"owner": {"reputation": 69, "user_id": 4696748, "user_type": "registered", "accept_rate": 20, "profile_image": "https://lh3.googleusercontent.com/-9ZTUciI1RjU/AAAAAAAAAAI/AAAAAAAAAEA/L5JvK9DZP_M/photo.jpg?sz=128", "display_name": "Script-Kiddie", "link": "https://stackoverflow.com/users/4696748/script-kiddie"}, "edited": false, "score": 0, "creation_date": 1442994282, "post_id": 32733724, "comment_id": 53308753, "body": "well after doing this it gives me error  undefined method `registrations&#39; for nil:NilClass this won&#39;t even let the registration form pop out"}, {"owner": {"reputation": 69, "user_id": 4696748, "user_type": "registered", "accept_rate": 20, "profile_image": "https://lh3.googleusercontent.com/-9ZTUciI1RjU/AAAAAAAAAAI/AAAAAAAAAEA/L5JvK9DZP_M/photo.jpg?sz=128", "display_name": "Script-Kiddie", "link": "https://stackoverflow.com/users/4696748/script-kiddie"}, "edited": false, "score": 0, "creation_date": 1442995820, "post_id": 32733724, "comment_id": 53309574, "body": "I don&#39;t think i.e necessary as i&#39;m not creating courses separately."}, {"owner": {"reputation": 69, "user_id": 4696748, "user_type": "registered", "accept_rate": 20, "profile_image": "https://lh3.googleusercontent.com/-9ZTUciI1RjU/AAAAAAAAAAI/AAAAAAAAAEA/L5JvK9DZP_M/photo.jpg?sz=128", "display_name": "Script-Kiddie", "link": "https://stackoverflow.com/users/4696748/script-kiddie"}, "edited": false, "score": 0, "creation_date": 1442995999, "post_id": 32733724, "comment_id": 53309663, "body": "i tried with both but no success as when i put your code it don&#39;t even let me fill out the form it gives straight error when hitting on register."}], "tags": [], "owner": {"reputation": 251, "user_id": 5338062, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07cdd86ea7bd7c23f87fab877b652a00?s=128&d=identicon&r=PG&f=1", "display_name": "Florin Ionita", "link": "https://stackoverflow.com/users/5338062/florin-ionita"}, "is_accepted": false, "score": 0, "last_activity_date": 1442994476, "last_edit_date": 1442994476, "creation_date": 1442993994, "answer_id": 32733724, "question_id": 32733551, "link": "https://stackoverflow.com/questions/32733551/nomethoderror-undefined-method-id-for-nilnilclass/32733724#32733724", "title": "NoMethodError undefined method `id&#39; for nil:NilClass:", "body": "<p>Try changing Registration#new action to</p>\n\n<pre><code>def new\n\n  @course = Course.find(params[:course_id])\n  @registration = @course.registrations.new\n\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 69, "user_id": 4696748, "user_type": "registered", "accept_rate": 20, "profile_image": "https://lh3.googleusercontent.com/-9ZTUciI1RjU/AAAAAAAAAAI/AAAAAAAAAEA/L5JvK9DZP_M/photo.jpg?sz=128", "display_name": "Script-Kiddie", "link": "https://stackoverflow.com/users/4696748/script-kiddie"}, "edited": false, "score": 0, "creation_date": 1442995714, "post_id": 32733933, "comment_id": 53309513, "body": "well after this when i create new registration then instead of taking me to show page it redirects me to index page with the form(new.html.haml) i edited my question with  github repo if you can take a look at please."}], "tags": [], "owner": {"reputation": 4497, "user_id": 1050875, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/3549436942ea890da97f41d1dbd3594f?s=128&d=identicon&r=PG", "display_name": "akbarbin", "link": "https://stackoverflow.com/users/1050875/akbarbin"}, "is_accepted": false, "score": 0, "last_activity_date": 1442994777, "creation_date": 1442994777, "answer_id": 32733933, "question_id": 32733551, "link": "https://stackoverflow.com/questions/32733551/nomethoderror-undefined-method-id-for-nilnilclass/32733933#32733933", "title": "NoMethodError undefined method `id&#39; for nil:NilClass:", "body": "<p>add this in your <code>def create</code></p>\n\n<pre><code>def create\n    @course = Course.find_by id: params[\"registration\"][\"course_id\"]\n    @registration = Registration.new registration_params.merge(email: stripe_params[\"stripeEmail\"], card_token: stripe_params[\"stripeToken\"])\n    raise \"Please Check Registration Errors\" unless @registration.valid?\n    @registration.process_payment\n    @registration.save\n    redirect_to @registration, notice: 'Registration was successfully created.'\n  rescue Exception =&gt; e\n    flash[:error] = e.message\n    @course = Course.find_by id: params[\"registration\"][\"course_id\"]\n    render :new\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 69, "user_id": 4696748, "user_type": "registered", "accept_rate": 20, "profile_image": "https://lh3.googleusercontent.com/-9ZTUciI1RjU/AAAAAAAAAAI/AAAAAAAAAEA/L5JvK9DZP_M/photo.jpg?sz=128", "display_name": "Script-Kiddie", "link": "https://stackoverflow.com/users/4696748/script-kiddie"}, "edited": false, "score": 0, "creation_date": 1442998034, "post_id": 32734710, "comment_id": 53310774, "body": "Thanks Sir for your reply(+1), i quite understand a lot but this actually brings me to another error(This time Stripe) This customer has no attached payment source"}, {"owner": {"reputation": 73119, "user_id": 1143732, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/mFUOI.jpg?s=128&g=1", "display_name": "Richard Peck", "link": "https://stackoverflow.com/users/1143732/richard-peck"}, "reply_to_user": {"reputation": 69, "user_id": 4696748, "user_type": "registered", "accept_rate": 20, "profile_image": "https://lh3.googleusercontent.com/-9ZTUciI1RjU/AAAAAAAAAAI/AAAAAAAAAEA/L5JvK9DZP_M/photo.jpg?sz=128", "display_name": "Script-Kiddie", "link": "https://stackoverflow.com/users/4696748/script-kiddie"}, "edited": false, "score": 0, "creation_date": 1442998520, "post_id": 32734710, "comment_id": 53311041, "body": "Okay, thanks for the comment. For now, comment out the stripe stuff and see if your original error is fixed. If it is, you should close this question and open a new one for the Stripe issue"}, {"owner": {"reputation": 69, "user_id": 4696748, "user_type": "registered", "accept_rate": 20, "profile_image": "https://lh3.googleusercontent.com/-9ZTUciI1RjU/AAAAAAAAAAI/AAAAAAAAAEA/L5JvK9DZP_M/photo.jpg?sz=128", "display_name": "Script-Kiddie", "link": "https://stackoverflow.com/users/4696748/script-kiddie"}, "edited": false, "score": 0, "creation_date": 1442998916, "post_id": 32734710, "comment_id": 53311294, "body": "Yup already checked that, issue is fixed now. Sir can you please answer my second question too about passing ID if any guide or tutorial for that ? Again thanks for your great answer Accepting this."}, {"owner": {"reputation": 73119, "user_id": 1143732, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/mFUOI.jpg?s=128&g=1", "display_name": "Richard Peck", "link": "https://stackoverflow.com/users/1143732/richard-peck"}, "reply_to_user": {"reputation": 69, "user_id": 4696748, "user_type": "registered", "accept_rate": 20, "profile_image": "https://lh3.googleusercontent.com/-9ZTUciI1RjU/AAAAAAAAAAI/AAAAAAAAAEA/L5JvK9DZP_M/photo.jpg?sz=128", "display_name": "Script-Kiddie", "link": "https://stackoverflow.com/users/4696748/script-kiddie"}, "edited": false, "score": 0, "creation_date": 1443000380, "post_id": 32734710, "comment_id": 53312227, "body": "Where is your second question, have you got a link?"}, {"owner": {"reputation": 69, "user_id": 4696748, "user_type": "registered", "accept_rate": 20, "profile_image": "https://lh3.googleusercontent.com/-9ZTUciI1RjU/AAAAAAAAAAI/AAAAAAAAAEA/L5JvK9DZP_M/photo.jpg?sz=128", "display_name": "Script-Kiddie", "link": "https://stackoverflow.com/users/4696748/script-kiddie"}, "edited": false, "score": 0, "creation_date": 1443000581, "post_id": 32734710, "comment_id": 53312367, "body": "It&#39;s in this question only down below  Additional Can anyone please guide me through how to pass id between 2 models like this guy did between 2 models as he&#39;s creating a scaffold for one model but passing ID lets him create values for another model too without creating actions for another controller <a href=\"https://github.com/gotealeaf/stripe-basics.git\" rel=\"nofollow noreferrer\">github.com/gotealeaf/stripe-basics.git</a> I did understand from your answer but can you guide me through this in more detail please"}, {"owner": {"reputation": 73119, "user_id": 1143732, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/mFUOI.jpg?s=128&g=1", "display_name": "Richard Peck", "link": "https://stackoverflow.com/users/1143732/richard-peck"}, "reply_to_user": {"reputation": 69, "user_id": 4696748, "user_type": "registered", "accept_rate": 20, "profile_image": "https://lh3.googleusercontent.com/-9ZTUciI1RjU/AAAAAAAAAAI/AAAAAAAAAEA/L5JvK9DZP_M/photo.jpg?sz=128", "display_name": "Script-Kiddie", "link": "https://stackoverflow.com/users/4696748/script-kiddie"}, "edited": false, "score": 0, "creation_date": 1443003874, "post_id": 32734710, "comment_id": 53314666, "body": "You&#39;ll probably need to look up <code>foreign_key</code>s in Rails, and form an association between the two models."}], "tags": [], "owner": {"reputation": 73119, "user_id": 1143732, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/mFUOI.jpg?s=128&g=1", "display_name": "Richard Peck", "link": "https://stackoverflow.com/users/1143732/richard-peck"}, "is_accepted": true, "score": 1, "last_activity_date": 1442997433, "creation_date": 1442997433, "answer_id": 32734710, "question_id": 32733551, "link": "https://stackoverflow.com/questions/32733551/nomethoderror-undefined-method-id-for-nilnilclass/32734710#32734710", "title": "NoMethodError undefined method `id&#39; for nil:NilClass:", "body": "<p>From your comments, it appears the error is caused by :</p>\n\n<blockquote>\n  <p><code>@course.id</code> being <code>nil</code></p>\n</blockquote>\n\n<p>The way to fix this is to ensure <code>@course</code> is defined properly. You need to do the following:</p>\n\n<pre><code>def new\n   @registration = Registration.new\n   @course = Course.find_by id: params[\"course_id\"]\nend\n</code></pre>\n\n<p>The other issue you have here is that your routes should be able to handle <code>courses</code> without having to append them with <code>?course_id=1</code>:</p>\n\n<pre><code>#config/routes.rb\nresources :registrations do\n   get :course_id, to: \"registrations#new\" #-&gt; yoururl.com/registrations/:course_id\nend\n</code></pre>\n\n<p>This will still give you the <code>course_id</code> param in the <code>new</code> action; just makes it more Rails.</p>\n\n<p>--</p>\n\n<p><strong>Controller</strong></p>\n\n<p>You also need some structure in your code (you're aiming for <a href=\"http://www.slideshare.net/damiansromek/thin-controllers-fat-models-proper-code-structure-for-mvc\" rel=\"nofollow\">fat model, thin controller</a>). It looks like you're coming to Rails as a Ruby dev; you need to appreciate that Rails handles most of the exceptions etc for you.</p>\n\n<p>Specifically, you need to look at how to remove code out of your actions:</p>\n\n<pre><code> def create\n    @registration = Registration.new registration_params\n    @registration.process_payment\n    if @registration.save\n        redirect_to @registration, notice: 'Registration was successfully created.'\n    else\n        # handle error here\n    end\n  end\n\n  private\n\n  def registration_params\n      params.require(:registration).permit(:course_id, :full_name, :company, :telephone, :email, :card_token).merge(email: stripe_params[\"stripeEmail\"], card_token: stripe_params[\"stripeToken\"])\n  end\n</code></pre>\n\n<p>-</p>\n\n<blockquote>\n  <p>`id' for nil:NilClass</p>\n</blockquote>\n\n<p>Finally, you have to remember this error basically means the variable you're trying to invoke an action for is <code>nil</code>. </p>\n\n<p>Ruby populates <code>nil</code> variables with a <code>NilClass</code> object, thus it's difficult to determine what the error actually is. All it means is that the variable you're trying to call a method on <em>doesn't</em> have the aforementioned method, as Ruby has populated it with the <code>NilClass</code> object.</p>\n"}], "owner": {"reputation": 69, "user_id": 4696748, "user_type": "registered", "accept_rate": 20, "profile_image": "https://lh3.googleusercontent.com/-9ZTUciI1RjU/AAAAAAAAAAI/AAAAAAAAAEA/L5JvK9DZP_M/photo.jpg?sz=128", "display_name": "Script-Kiddie", "link": "https://stackoverflow.com/users/4696748/script-kiddie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 8733, "favorite_count": 0, "accepted_answer_id": 32734710, "answer_count": 3, "score": 0, "last_activity_date": 1442997433, "creation_date": 1442993448, "last_edit_date": 1442995277, "question_id": 32733551, "link": "https://stackoverflow.com/questions/32733551/nomethoderror-undefined-method-id-for-nilnilclass", "title": "NoMethodError undefined method `id&#39; for nil:NilClass:", "body": "<p>I know this kind of question is already answered multiple times but i seriously unable to figure it out what is causing a problem here, I am having trouble solving this problem. I keep getting the same error when i'm trying to create new registration ( <a href=\"http://localhost:3000/registrations/new?course_id=1\" rel=\"nofollow\">http://localhost:3000/registrations/new?course_id=1</a> ) :</p>\n\n<pre><code>NoMethodError at /registrations\n\nundefined method `id' for nil:NilClass\n</code></pre>\n\n<p>Here is my RegistrationsController: </p>\n\n<pre><code>class RegistrationsController &lt; ApplicationController\n  before_action :set_registration, only: [:show, :edit, :update, :destroy]\n\n  def index\n    @registrations = Registration.all\n  end\n\n  def show\n  end\n\n  def new\n    @registration = Registration.new\n    @course = Course.new\n    @course = Course.find_by id: params[\"course_id\"]\n  end\n\n  def create\n    @registration = Registration.new registration_params.merge(email: stripe_params[\"stripeEmail\"], card_token: stripe_params[\"stripeToken\"])\n    raise \"Please Check Registration Errors\" unless @registration.valid?\n    @registration.process_payment\n    @registration.save\n    redirect_to @registration, notice: 'Registration was successfully created.'\n  rescue Exception =&gt; e\n    flash[:error] = e.message\n    render :new\n  end\n\n  protect_from_forgery except: :webhook\n  def webhook\n    event = Stripe::Event.retrieve(params[\"id\"])\n\n    case event.type\n      when \"invoice.payment_succeeded\" #renew subscription\n        Registration.find_by_customer_id(event.data.object.customer).renew\n    end\n    render status: :ok, json: \"success\"\n  end\n\n  private\n\n    def stripe_params\n      params.permit :stripeEmail, :stripeToken\n    end\n\n    def set_registration\n      @registration = Registration.find(params[:id])\n    end\n\n    def registration_params\n      params.require(:registration).permit(:course_id, :full_name, :company, :telephone, :email, :card_token)\n    end\n\nend\n</code></pre>\n\n<p>My Registration Model:</p>\n\n<pre><code>class Registration &lt; ActiveRecord::Base\n  belongs_to :course\n\n  def process_payment\n    customer_data = {email: email, card: card_token}.merge((course.plan.blank?)? {}: {plan: course.plan})\n    customer = Stripe::Customer.create customer_data\n\n      Stripe::Charge.create customer: customer.id,\n                            amount: course.price * 100,\n                            description: course.name,\n                            currency: 'usd'\n      #Annotate Customer Id when Registration is Created\n      cusotmer_id = customer.id\n\n  end\n\n  def renew\n    update_attibute :end_date, Date.today + 1.month\n  end\n\nend\n</code></pre>\n\n<p>Registration New.html.haml File :</p>\n\n<pre><code>%section#course-content\n  %section#ruby\n    %section.detailed-syllabus\n      .wrapper-inside\n        = form_for @registration, html: { class: \"basic-grey\" } do |f|\n          - if @registration.errors.any?\n            #error_explanation\n              %h2\n                = pluralize(@registration.errors.count, \"error\")\n                prohibited this registration from being saved:\n              %ul\n                - @registration.errors.full_messages.each do |message|\n                  %li= message\n          .field\n            = f.hidden_field :course_id, value: @course.id\n          .field\n            = f.label :full_name\n            = f.text_field :full_name\n          .field\n            = f.label :company\n            = f.text_field :company\n          .field\n            = f.label :email\n            = f.text_field :email\n          .field\n            = f.label :telephone\n            = f.text_field :telephone\n\n            //\u2018Stripe.js\u2019 will recognize the card data because we have marked the inputs with \u2018data-stripe\u2019 attribute as: number, cvv, exp-month and exp-year.\n            = javascript_include_tag \"https://js.stripe.com/v2/\"\n            :javascript\n              Stripe.setPublishableKey('#{Rails.application.secrets.stripe_publishable_key}');\n\n            = label_tag \"Card Number\", nil, required: true\n            .control-group\n              .controls\n                = text_field_tag :card_number, nil, class: \"input-block-level\", \"data-stripe\" =&gt; \"number\"\n\n            = label_tag \"Card Verification\", nil, required: true\n            .control-group\n              .controls\n                = text_field_tag :card_verification, nil, class: \"input-block-level\", \"data-stripe\" =&gt; \"cvv\"\n\n            = label_tag \"Card Expires\", nil, required: true\n            = select_tag :exp_month, options_for_select(Date::MONTHNAMES.compact.each_with_index.map { |name,i| [\"#{i+1} - #{name}\", i+1] }), include_blank: false, \"data-stripe\" =&gt; \"exp-month\", class: \"span2\"\n            = select_tag :exp_year, options_for_select((Date.today.year..(Date.today.year+10)).to_a), include_blank: false, \"data-stripe\" =&gt; \"exp-year\", class: \"span1\"\n\n\n          .actions\n          = f.submit \"Registration Payment\", class: \"btn\", style: \"color: white;background: rgb(242, 118, 73);\"\n</code></pre>\n\n<p>Does anyone know how to assist me in this? Greatly appreciate all the help.\nAdditional Can anyone please guide me through how to pass id between 2 models like this guy did between 2 models as he's creating a scaffold for one model but passing ID lets him create values for another model too without creating actions for another controller <a href=\"https://github.com/gotealeaf/stripe-basics.git\" rel=\"nofollow\">https://github.com/gotealeaf/stripe-basics.git</a></p>\n\n<p>Edited:\nGitHub Repository For This Code\n<a href=\"https://github.com/ChiragArya/Stripe_CheckOut_Demo\" rel=\"nofollow\">https://github.com/ChiragArya/Stripe_CheckOut_Demo</a></p>\n"}, {"tags": ["ruby", "csv"], "comments": [{"owner": {"reputation": 20735, "user_id": 307106, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/6a13e655e637138f8d571cec3f9cea76?s=128&d=identicon&r=PG", "display_name": "jrochkind", "link": "https://stackoverflow.com/users/307106/jrochkind"}, "edited": false, "score": 0, "creation_date": 1443061345, "post_id": 32732900, "comment_id": 53345150, "body": "Are you running out of RAM, trying to keep all that data in memory at once?"}, {"owner": {"reputation": 2831, "user_id": 5305512, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/7c7a8df7cfda681c96a34d6e271b1b0b?s=128&d=identicon&r=PG&f=1", "display_name": "Kristada673", "link": "https://stackoverflow.com/users/5305512/kristada673"}, "reply_to_user": {"reputation": 20735, "user_id": 307106, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/6a13e655e637138f8d571cec3f9cea76?s=128&d=identicon&r=PG", "display_name": "jrochkind", "link": "https://stackoverflow.com/users/307106/jrochkind"}, "edited": false, "score": 0, "creation_date": 1443073330, "post_id": 32732900, "comment_id": 53348258, "body": "No, my computer is not slowing down. So, I guess RAM is okay."}, {"owner": {"reputation": 20735, "user_id": 307106, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/6a13e655e637138f8d571cec3f9cea76?s=128&d=identicon&r=PG", "display_name": "jrochkind", "link": "https://stackoverflow.com/users/307106/jrochkind"}, "edited": false, "score": 0, "creation_date": 1443098303, "post_id": 32732900, "comment_id": 53362084, "body": "If I were you, I wouldn&#39;t guess, I&#39;d use tools to actually check on how much RAM the ruby process is taking, and if your workstation is swapping."}, {"owner": {"reputation": 2831, "user_id": 5305512, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/7c7a8df7cfda681c96a34d6e271b1b0b?s=128&d=identicon&r=PG&f=1", "display_name": "Kristada673", "link": "https://stackoverflow.com/users/5305512/kristada673"}, "reply_to_user": {"reputation": 20735, "user_id": 307106, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/6a13e655e637138f8d571cec3f9cea76?s=128&d=identicon&r=PG", "display_name": "jrochkind", "link": "https://stackoverflow.com/users/307106/jrochkind"}, "edited": false, "score": 0, "creation_date": 1443116360, "post_id": 32732900, "comment_id": 53374465, "body": "Found the problem! There was one column in my CSV where the program had to check all previous values if it exists before, and if not then assign a new value to it. That was what was taking the time. It sounds simple now, but figuring it out was not obvious :D"}], "answers": [{"tags": [], "owner": {"reputation": 31555, "user_id": 677684, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/5a785c03c08d7de6a15aaea326835cd6?s=128&d=identicon&r=PG", "display_name": "Tilo", "link": "https://stackoverflow.com/users/677684/tilo"}, "is_accepted": false, "score": 0, "last_activity_date": 1457750645, "creation_date": 1457750645, "answer_id": 35953135, "question_id": 32732900, "link": "https://stackoverflow.com/questions/32732900/why-is-processing-my-csv-file-taking-forever-to-complete/35953135#35953135", "title": "Why is processing my CSV file taking forever to complete?", "body": "<p>You might want to look into the <code>smarter_csv</code> gem, which can process chunks of the CSV data (multiple rows) and hand them to an asynchronous worker, e.g. a Sidekiq worker.</p>\n\n<p>For writing the output, it might be faster for each worker to assemble output snippets for each batch into separate files and concatenate them later. </p>\n"}], "owner": {"reputation": 2831, "user_id": 5305512, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/7c7a8df7cfda681c96a34d6e271b1b0b?s=128&d=identicon&r=PG&f=1", "display_name": "Kristada673", "link": "https://stackoverflow.com/users/5305512/kristada673"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 84, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1457750645, "creation_date": 1442991217, "last_edit_date": 1457730466, "question_id": 32732900, "link": "https://stackoverflow.com/questions/32732900/why-is-processing-my-csv-file-taking-forever-to-complete", "title": "Why is processing my CSV file taking forever to complete?", "body": "<p>I have a 90GB CSV file, from which I need to extract some columns and then change the strings into integers and store it in a new CSV. I wrote the code and tested it on a small sample CSV file of about 100,000 rows. It worked fine, so I proceeded to feed the original CSV into the program. I knew it would take overnight to complete, and I in the morning I found the program was not finished, and the processed file was only about 1GB in size, which was really small as I expected it to be at least 10 GB by the time it completed, allowing for the fact that integers take less space then strings, and also that I was extracting only 10 out of 50+ columns from the original CSV.</p>\n\n<p>I modified the code to do the extraction and processing separately. I found that, without the processing, the extraction completes in 10-11 hours resulting in a CSV that is 38GB in size. Then I did the processing of the extracted CSV, which still had not finished after 18 hours of running, with the resulting CSV file only about 1.5GB in size.</p>\n\n<p>My code for processing is this:</p>\n\n<pre><code>require 'rubygems'\nrequire 'mechanize'\nrequire 'csv'\nrequire 'time'\n\nCSV.open('FormattedColumns.csv', \"wb\") do |csv|\n  csv &lt;&lt; [\"_time\", \"article_category_id\", \"articleID\", \"date_wday\", \"datetime\", \"lat\", \"lon\", \"platform\", \"push\", \"udid\"]\n  CSV.foreach('ExtractedColumns.csv', :headers=&gt;true) do |row|\n\n    time=Time.parse(row[0]).to_i\n\n    article_category_id=row[1].to_i\n\n    articleID=row[2].to_i\n\n    if row[3]=='sunday'\n      weekday=7\n    elsif row[3]=='saturday'\n      weekday=6\n    elsif row[3]=='friday'\n      weekday=5\n    elsif row[3]=='thursday'\n      weekday=4\n    elsif row[3]=='wednesday'\n      weekday=3\n    elsif row[3]=='tuesday'\n      weekday=2\n    elsif row[3]=='monday'\n      weekday=1\n    end     \n\n    datetime = row[4].to_i\n\n    lat = row[5].to_f\n\n    lon = row[6].to_f\n\n    if row[7]=='Android'\n      platform=2\n    elsif row[7]=='iPhone'\n      platform=1\n    end \n\n    if row[8]=='Y'\n      push=1\n    elsif row[8]=='N'\n      push=0\n    end\n\n    unless udids.include?(row[9])\n      udids &lt;&lt; row[9]\n    end\n    udid = udids.index(row[9]) + 1\n\n    array = [time, article_category_id, articleID, weekday, datetime, lat, lon, platform, push, udid]\n    csv&lt;&lt;array\n  end\nend\n</code></pre>\n\n<p>What could be the reason for this?</p>\n\n<p>As far as I can see, it's a simple program, and, with the smaller sample program of 100,000 rows, when I tried the extraction and processing separately, they both finished in about 1-2 minutes.</p>\n"}, {"tags": ["mysql", "ruby-on-rails", "ruby", "random"], "answers": [{"tags": [], "owner": {"reputation": 251, "user_id": 5338062, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07cdd86ea7bd7c23f87fab877b652a00?s=128&d=identicon&r=PG&f=1", "display_name": "Florin Ionita", "link": "https://stackoverflow.com/users/5338062/florin-ionita"}, "is_accepted": false, "score": 0, "last_activity_date": 1442991276, "creation_date": 1442991276, "answer_id": 32732917, "question_id": 32732765, "link": "https://stackoverflow.com/questions/32732765/rails-collection-of-random-records/32732917#32732917", "title": "Rails Collection of random records", "body": "<pre><code>Model.where(status: 1).group(:name).having('count(weight) &lt; 260')\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 7525, "user_id": 1805902, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/0W7rW.png?s=128&g=1", "display_name": "pangpang", "link": "https://stackoverflow.com/users/1805902/pangpang"}, "is_accepted": false, "score": 0, "last_activity_date": 1442992618, "last_edit_date": 1442992618, "creation_date": 1442992203, "answer_id": 32733180, "question_id": 32732765, "link": "https://stackoverflow.com/questions/32732765/rails-collection-of-random-records/32733180#32733180", "title": "Rails Collection of random records", "body": "<pre><code>Model.where(status: 1).combination(2).to_a.select{|e| e.sum(&amp;:weight) &lt; 260 }.sample\n</code></pre>\n\n<p>You can change the value of combination argument for different combinations.</p>\n"}, {"tags": [], "owner": {"reputation": 9602, "user_id": 3607136, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/NRFso.jpg?s=128&g=1", "display_name": "Gagan Gami", "link": "https://stackoverflow.com/users/3607136/gagan-gami"}, "is_accepted": false, "score": 0, "last_activity_date": 1442994885, "creation_date": 1442994885, "answer_id": 32733971, "question_id": 32732765, "link": "https://stackoverflow.com/questions/32732765/rails-collection-of-random-records/32733971#32733971", "title": "Rails Collection of random records", "body": "<p>Try this:</p>\n\n<pre><code>my_records =  Model.where(status: 1).each_cons(2).select{|x,y| x.weight + y.weight &lt; 260}\n</code></pre>\n\n<p>Now for random single:</p>\n\n<pre><code>my_records.sample # return single random record\n</code></pre>\n"}], "owner": {"reputation": 1573, "user_id": 2400445, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/h7Bym.jpg?s=128&g=1", "display_name": "Nidhin S G", "link": "https://stackoverflow.com/users/2400445/nidhin-s-g"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 50, "favorite_count": 2, "answer_count": 3, "score": 2, "last_activity_date": 1442994885, "creation_date": 1442990759, "question_id": 32732765, "link": "https://stackoverflow.com/questions/32732765/rails-collection-of-random-records", "title": "Rails Collection of random records", "body": "<p>My Database Table Structure is like as follows</p>\n\n<pre><code>Id  | Name  | Status  | Weight\n------------------------------\n1   | A     | 1       | 130\n2   | A     | 2       | 140\n3   | A     | 1       | 130\n4   | A     | 1       | 120\n5   | A     | 3       | 110\n6   | A     | 1       | 100\n7   | A     | 2       | 110\n8   | A     | 2       | 100\n9   | A     | 1       | 140\n10  | A     | 2       | 130\n11  | A     | 3       | 100\n12  | A     | 3       | 110\n13  | A     | 1       | 120\n</code></pre>\n\n<p>I would like to write a condition in my Rails model which would get all possible collection of records whose sum of <code>weight</code> is less than 260 and <code>status</code> 1</p>\n\n<p>for eg Total Sum should be less than 260 and status is 1.. the results can be</p>\n\n<p>records with id [1,4] where weight is 130 + 120 or [1,6] where weight is 130 + 100 etc... I want a random record with this condition</p>\n\n<p>I can access a random record like</p>\n\n<pre><code>Model.offset(rand(Model.count)).first\n</code></pre>\n\n<p>But I want to access get the random records that accepts this condition..and can be a single record or multiple records</p>\n"}, {"tags": ["ruby", "hash"], "answers": [{"comments": [{"owner": {"reputation": 143, "user_id": 4250440, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/EKuVW.jpg?s=128&g=1", "display_name": "thunderRX5", "link": "https://stackoverflow.com/users/4250440/thunderrx5"}, "edited": false, "score": 0, "creation_date": 1442989949, "post_id": 32732275, "comment_id": 53306301, "body": "Thanks for great explanation!   Interesting, I got it. :)"}, {"owner": {"reputation": 143, "user_id": 4250440, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/EKuVW.jpg?s=128&g=1", "display_name": "thunderRX5", "link": "https://stackoverflow.com/users/4250440/thunderrx5"}, "edited": false, "score": 0, "creation_date": 1442992517, "post_id": 32732275, "comment_id": 53307690, "body": "I wonder now if I find &quot;Six&quot; and &quot;Ten&quot; which are both most frequently words in keys.  <code>word_frequency.max.first</code>  =&gt; &quot;Ten&quot;.  &quot;Six&quot; is missing?"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 143, "user_id": 4250440, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/EKuVW.jpg?s=128&g=1", "display_name": "thunderRX5", "link": "https://stackoverflow.com/users/4250440/thunderrx5"}, "edited": false, "score": 1, "creation_date": 1442994220, "post_id": 32732275, "comment_id": 53308725, "body": "<code>max</code> returns the only value. Just use <code>group_by</code> as mentioned in the last snippet: <code>word_frequency.group_by(&amp;:last).to_a.last.last.map(&amp;:first)</code>. Not quite elegant, but you might try to play with a result of <code>group_by</code> yourself."}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": true, "score": 1, "last_activity_date": 1442994261, "last_edit_date": 1442994261, "creation_date": 1442988851, "answer_id": 32732275, "question_id": 32732251, "link": "https://stackoverflow.com/questions/32732251/find-item-in-array-that-has-most-word-frequency/32732275#32732275", "title": "Find item in array that has most word frequency", "body": "<pre><code>word_frequency.max_by { |k,v| v }.last\n</code></pre>\n\n<p>Or, one might sort:</p>\n\n<pre><code>word_frequency.sort_by { |k,v| -v }\n</code></pre>\n\n<p>and then find a max value:</p>\n\n<pre><code>word_frequency.sort_by { |k,v| -v }.max\n#\u21d2 [\"Ten\", 2]\nword_frequency.sort_by { |k,v| -v }.max.last\n#\u21d2 2\n</code></pre>\n\n<p>Please also note, that the result <code>[\"Ten\", 2]</code> is not absolutely correct, since there could be many items with the same count. Most precise solution will group by value and operate on the result:</p>\n\n<pre><code># \u21d3\u21d3\u21d3 this will get all 2s  \u21d3\u21d3\u21d3\nword_frequency.group_by(&amp;:last).to_a.last.first\n#\u21d2 2\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1442993508, "post_id": 32732287, "comment_id": 53308319, "body": "<code>max</code> will implicitly convert the hash into an array, leading to array comparison. Then it will be primarily sorted by the original key of the hash. It is just a coincidence that <code>&quot;Ten&quot;</code> is alphabetically the last within the keys."}, {"owner": {"reputation": 5014, "user_id": 3640770, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HJBjs.jpg?s=128&g=1", "display_name": "IngoAlbers", "link": "https://stackoverflow.com/users/3640770/ingoalbers"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1442993727, "post_id": 32732287, "comment_id": 53308449, "body": "You are right. This only works as Ten is the last one in the alphabetical order. So my answer was wrong, I will update it. Thanks @sawa."}], "tags": [], "owner": {"reputation": 5014, "user_id": 3640770, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HJBjs.jpg?s=128&g=1", "display_name": "IngoAlbers", "link": "https://stackoverflow.com/users/3640770/ingoalbers"}, "is_accepted": false, "score": 1, "last_activity_date": 1442993777, "last_edit_date": 1442993777, "creation_date": 1442988912, "answer_id": 32732287, "question_id": 32732251, "link": "https://stackoverflow.com/questions/32732251/find-item-in-array-that-has-most-word-frequency/32732287#32732287", "title": "Find item in array that has most word frequency", "body": "<p>You could just do </p>\n\n<pre><code>word_frequency.max_by { |k,v| v }.last\n</code></pre>\n"}], "owner": {"reputation": 143, "user_id": 4250440, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/EKuVW.jpg?s=128&g=1", "display_name": "thunderRX5", "link": "https://stackoverflow.com/users/4250440/thunderrx5"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "accepted_answer_id": 32732275, "answer_count": 2, "score": 1, "last_activity_date": 1442994261, "creation_date": 1442988721, "last_edit_date": 1442993355, "question_id": 32732251, "link": "https://stackoverflow.com/questions/32732251/find-item-in-array-that-has-most-word-frequency", "title": "Find item in array that has most word frequency", "body": "<p>I am trying to choose the value <code>2</code> without the <code>\"Ten\"</code> key.</p>\n\n<pre><code>most_count = %w(Five Ten Six Eleven Ten Six One)\nword_frequency = Hash.new(0)\nmost_count.each {|word| word_frequency[word] += 1}\nword_frequency.max_by { |k,v| v }\n# =&gt; [\"Ten\", 2]\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "error-handling", "rails-activerecord"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1442992623, "post_id": 32730969, "comment_id": 53307751, "body": "<i>&quot;the correct fallback&quot;</i> doesn&#39;t exists, it all depends on your code. You could just ignore the failed save and continue with the next tweet, you could break the loop at that point, or you could wrap everything in a transaction and invoke a rollback. It&#39;s up to you."}], "answers": [{"comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1442988775, "post_id": 32731042, "comment_id": 53305719, "body": "Or just <code>unless new_tweet.save ...</code>"}, {"owner": {"reputation": 813, "user_id": 3520852, "user_type": "registered", "accept_rate": 65, "profile_image": "https://graph.facebook.com/526035410/picture?type=large", "display_name": "NNNNNNNNNNDelicious", "link": "https://stackoverflow.com/users/3520852/nnnnnnnnnndelicious"}, "edited": false, "score": 0, "creation_date": 1443066120, "post_id": 32731042, "comment_id": 53346159, "body": "What I&#39;m curious about is either way, what is the best course of action to take? If the save fails.. whats the best course of action? Do I print to console or just return an error to the front? How would I return an error to the front?"}, {"owner": {"reputation": 7525, "user_id": 1805902, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/0W7rW.png?s=128&g=1", "display_name": "pangpang", "link": "https://stackoverflow.com/users/1805902/pangpang"}, "reply_to_user": {"reputation": 813, "user_id": 3520852, "user_type": "registered", "accept_rate": 65, "profile_image": "https://graph.facebook.com/526035410/picture?type=large", "display_name": "NNNNNNNNNNDelicious", "link": "https://stackoverflow.com/users/3520852/nnnnnnnnnndelicious"}, "edited": false, "score": 0, "creation_date": 1443070488, "post_id": 32731042, "comment_id": 53347300, "body": "@NNNNNNNNNNDelicious If save failed, you can print the error message, then continue the loop or exit the loop depending on your needs."}, {"owner": {"reputation": 813, "user_id": 3520852, "user_type": "registered", "accept_rate": 65, "profile_image": "https://graph.facebook.com/526035410/picture?type=large", "display_name": "NNNNNNNNNNDelicious", "link": "https://stackoverflow.com/users/3520852/nnnnnnnnnndelicious"}, "edited": false, "score": 0, "creation_date": 1443388329, "post_id": 32731042, "comment_id": 53462394, "body": "Thank you, also thanks for the multiple solutions its nice to see different ways of solving the problem."}], "tags": [], "owner": {"reputation": 7525, "user_id": 1805902, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/0W7rW.png?s=128&g=1", "display_name": "pangpang", "link": "https://stackoverflow.com/users/1805902/pangpang"}, "is_accepted": true, "score": 1, "last_activity_date": 1443071579, "last_edit_date": 1443071579, "creation_date": 1442982901, "answer_id": 32731042, "question_id": 32730969, "link": "https://stackoverflow.com/questions/32730969/best-way-to-recover-from-a-failed-model-save-in-rails/32731042#32731042", "title": "Best way to recover from a failed model save in rails", "body": "<p><code>save</code> only return true or false, you can use <code>save!</code>,  it will raise an exception if the record is invalid. if exception raised, you can catch it.</p>\n\n<pre><code>begin\n  ....\n  new_tweet.save!\nrescue exception =&gt; e\n  puts e.inspect\n  #you can continue the loop or exit\nend\n</code></pre>\n\n<p>as @Stefan said, you can wrap you code in a transaction, if one record save failed, all saved record will rollback. I don't advise you to do this unless you really want every record saved success.</p>\n\n<pre><code>Tweet.transaction do\n   initial_tweets = get_tweets_in_time_range self.name, (Time.now-1.weeks), Time.now \ninitial_tweets.each do |tweet|\n    new_tweet = Tweet.new\n    ..... \n    new_tweet.created_at = DateTime.strptime tweet.created_at.to_s, '%Y-%m-%d %H:%M:%S %z' \n\n    new_tweet.save! # you have to add '!', once save failed, it will trigger rolls back.\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 813, "user_id": 3520852, "user_type": "registered", "accept_rate": 65, "profile_image": "https://graph.facebook.com/526035410/picture?type=large", "display_name": "NNNNNNNNNNDelicious", "link": "https://stackoverflow.com/users/3520852/nnnnnnnnnndelicious"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 581, "favorite_count": 0, "accepted_answer_id": 32731042, "answer_count": 1, "score": 2, "last_activity_date": 1443071579, "creation_date": 1442982465, "last_edit_date": 1442994666, "question_id": 32730969, "link": "https://stackoverflow.com/questions/32730969/best-way-to-recover-from-a-failed-model-save-in-rails", "title": "Best way to recover from a failed model save in rails", "body": "<p>I have some code to get some tweets from the twitter API:</p>\n\n<pre><code>initial_tweets = get_tweets_in_time_range self.name, (Time.now-1.weeks), Time.now \n\ninitial_tweets.each do |tweet|\n    new_tweet = Tweet.new\n\n    new_tweet.favorite_count = tweet.favorite_count \n    new_tweet.filter_level = tweet.filter_level \n    new_tweet.retweet_count = tweet.retweet_count \n    new_tweet.text = tweet.text \n    new_tweet.tweeted_at = tweet.created_at \n\n    new_tweet.created_at = DateTime.strptime tweet.created_at.to_s, '%Y-%m-%d %H:%M:%S %z' \n\n    new_tweet.save \n    # What happens on a failed save\nend\n</code></pre>\n\n<p>Whats the correct fallback if that save fails? As pointed out where the comment is. Thanks for any help. </p>\n"}, {"tags": ["ruby", "json", "jsonschema"], "comments": [{"owner": {"reputation": 7525, "user_id": 1805902, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/0W7rW.png?s=128&g=1", "display_name": "pangpang", "link": "https://stackoverflow.com/users/1805902/pangpang"}, "edited": false, "score": 0, "creation_date": 1442982624, "post_id": 32730926, "comment_id": 53303682, "body": "you can write hash, then convert it to json"}, {"owner": {"reputation": 13, "user_id": 4714959, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/01a77cc6327a1a9b7ed39e3e9f488f42?s=128&d=identicon&r=PG&f=1", "display_name": "Rad N", "link": "https://stackoverflow.com/users/4714959/rad-n"}, "reply_to_user": {"reputation": 7525, "user_id": 1805902, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/0W7rW.png?s=128&g=1", "display_name": "pangpang", "link": "https://stackoverflow.com/users/1805902/pangpang"}, "edited": false, "score": 0, "creation_date": 1442983407, "post_id": 32730926, "comment_id": 53303888, "body": "but always count of employees data set is not same , it will increase if they insert new record in db"}], "answers": [{"comments": [{"owner": {"reputation": 41846, "user_id": 926143, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/3396173c3d22988be1a0732d184902aa?s=128&d=identicon&r=PG", "display_name": "7stud", "link": "https://stackoverflow.com/users/926143/7stud"}, "edited": false, "score": 0, "creation_date": 1442988176, "post_id": 32731616, "comment_id": 53305454, "body": "Argghh.  You were way ahead of me.  I found getting the nesting right to be very time consuming."}, {"owner": {"reputation": 13, "user_id": 4714959, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/01a77cc6327a1a9b7ed39e3e9f488f42?s=128&d=identicon&r=PG&f=1", "display_name": "Rad N", "link": "https://stackoverflow.com/users/4714959/rad-n"}, "edited": false, "score": 0, "creation_date": 1443000888, "post_id": 32731616, "comment_id": 53312586, "body": "@json Thank a lot dude for helping me out"}], "tags": [], "owner": {"reputation": 14922, "user_id": 1320693, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/387effdc9ab501aa1a2c36992208435d?s=128&d=identicon&r=PG", "display_name": "Jason Desrosiers", "link": "https://stackoverflow.com/users/1320693/jason-desrosiers"}, "is_accepted": true, "score": 1, "last_activity_date": 1442986068, "creation_date": 1442986068, "answer_id": 32731616, "question_id": 32730926, "link": "https://stackoverflow.com/questions/32730926/how-can-i-write-the-json-schema-if-json-has-multiple-data-set/32731616#32731616", "title": "How can i write the json schema if json has multiple data set", "body": "<p>Here is the schema you are looking for.</p>\n\n<pre><code>{\n  \"type\": \"object\",\n  \"required\": [\"employees\"],\n  \"properties\": {\n    \"employees\": {\n      \"type\": \"array\",\n      \"items\": {\n        \"type\": \"object\",\n        \"properties\": {\n          \"id\": { \"type\": \"integer\" },\n          \"name\": { \"type\": \"string\" }\n        },\n        \"required\": [\"id\", \"name\"]\n      }\n    }\n  }\n}\n</code></pre>\n\n<p>You were really close.  The <code>items</code> keyword has two forms.  The value of <code>items</code> can be a schema or an array of schemas(1).</p>\n\n<p>If <code>items</code> is a schema, it means that every item in the array must conform to that schema.  This is the form that is useful in this case.</p>\n\n<p>If the value of <code>items</code> is an array of schemas, it describes a tuple.  For example, this schema ...</p>\n\n<pre><code>{\n  \"type\": \"array\",\n  \"items\": [\n    { \"type\": \"boolean\" },\n    { \"type\": \"string\" }\n  ]\n}\n</code></pre>\n\n<p>would validate this ...</p>\n\n<pre><code>[true, \"foo\"]\n</code></pre>\n\n<ol>\n<li><a href=\"http://json-schema.org/latest/json-schema-validation.html#anchor37\" rel=\"nofollow\">http://json-schema.org/latest/json-schema-validation.html#anchor37</a></li>\n</ol>\n"}], "owner": {"reputation": 13, "user_id": 4714959, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/01a77cc6327a1a9b7ed39e3e9f488f42?s=128&d=identicon&r=PG&f=1", "display_name": "Rad N", "link": "https://stackoverflow.com/users/4714959/rad-n"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 562, "favorite_count": 0, "accepted_answer_id": 32731616, "answer_count": 1, "score": -1, "last_activity_date": 1442988283, "creation_date": 1442982177, "last_edit_date": 1442983642, "question_id": 32730926, "link": "https://stackoverflow.com/questions/32730926/how-can-i-write-the-json-schema-if-json-has-multiple-data-set", "title": "How can i write the json schema if json has multiple data set", "body": "<p>I am new to this json schema , i am able to write json schema if it has only one data set like below</p>\n\n<pre><code>{\n    \"employees\": [\n        {\n            \"id\": 1,\n            \"name\": \"aaa\"\n        }\n}\n</code></pre>\n\n<p>example json-schema for this is </p>\n\n<pre><code>{   \n        \"type\" : \"object\",\n            \"required\" : [\"employees\"],\n            \"properties\" : {        \n                \"employees\" : { \"type\" : \"Array\",\n                                \"items\" : [\n                                \"properties\" : {\n                                                    \"id\" : {\"type\" : \"integer\"},\n                                                    \"name\" : {\"type\" : \"string\"},                                                   \n                                                },\n                                            \"required\" : [\"id\",\"name\"]\n                                            ]\n                                }\n                            }\n}\n</code></pre>\n\n<p>but i got stuck to write json schema in ruby if we have multiple data sets </p>\n\n<pre><code>{\n    \"employees\": [\n        {\n            \"id\": 1,\n            \"name\": \"aaa\"\n        },\n        {\n            \"id\": 2,\n            \"name\": \"bbb\"\n        },\n        {\n            \"id\": 3,\n            \"name\": \"cccc\"\n        },\n        {\n            \"id\": 4,\n            \"name\": \"ddd\"\n        },\n        {\n            \"id\": 5,\n            \"name\": \"eeee\"\n        }\n    ]\n}\n</code></pre>\n\n<p>can anyone please help me to write json schema if it has multiple data sets for same schema to validate the response body</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 8645, "user_id": 368167, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c9596f533dcd61ecf75f150b0d9997b3?s=128&d=identicon&r=PG", "display_name": "Tamer Shlash", "link": "https://stackoverflow.com/users/368167/tamer-shlash"}, "edited": false, "score": 0, "creation_date": 1442982195, "post_id": 32730914, "comment_id": 53303573, "body": "Please give a better title to your question, describe the coding problem."}, {"owner": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 2, "creation_date": 1442982621, "post_id": 32730914, "comment_id": 53303680, "body": "Might be more suitable for Code Review since you don&#39;t actually have a problem."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 2, "creation_date": 1442982778, "post_id": 32730914, "comment_id": 53303721, "body": "Isn&#39;t this equivalent to <code>arr.sort.each_cons(2).min_by { |a, b| b - a }</code>?"}, {"owner": {"reputation": 64429, "user_id": 1188513, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wNdZG.jpg?s=128&g=1", "display_name": "Mathieu Guindon", "link": "https://stackoverflow.com/users/1188513/mathieu-guindon"}, "edited": false, "score": 0, "creation_date": 1442982872, "post_id": 32730914, "comment_id": 53303747, "body": "I&#39;ve voted to close this question as <i>too broad</i>; it would actually be a good fit for <a href=\"https://codereview.stackexchange.com\">Code Review</a>... the only thing that&#39;s keeping me from flagging for migration is that you haven&#39;t implemented the last part. Feel free to implement it, and put it up on CR for peer review. See you there!"}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 1, "creation_date": 1442983106, "post_id": 32730914, "comment_id": 53303811, "body": "&quot;Return the smallest pair if there are more than&quot; <b>what</b>?"}, {"owner": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 1, "creation_date": 1442983348, "post_id": 32730914, "comment_id": 53303874, "body": "Noted in the next paragraph."}], "answers": [{"tags": [], "owner": {"reputation": 104340, "user_id": 23649, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/7e9f543f0ffdb7c9a899e628fe76e7f3?s=128&d=identicon&r=PG", "display_name": "jtbandes", "link": "https://stackoverflow.com/users/23649/jtbandes"}, "is_accepted": false, "score": 2, "last_activity_date": 1442983436, "last_edit_date": 1442983436, "creation_date": 1442982763, "answer_id": 32731018, "question_id": 32730914, "link": "https://stackoverflow.com/questions/32730914/find-two-integer-elements-in-array-closest-to-each-other-in-numerical-difference/32731018#32731018", "title": "Find two integer elements in array closest to each other in numerical difference - Ruby", "body": "<p>The nice thing about this problem being 1-dimensional is that the closest elements are guaranteed to be adjacent when the array is sorted. So I'd take this approach:</p>\n\n<ol>\n<li>Sort the array.</li>\n<li>Scan the array linearly, computing the difference between every adjacent element.</li>\n<li>Record the minimum difference at every step \u2014\u00a0at the end of your list, this is the final answer.</li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "is_accepted": false, "score": 2, "last_activity_date": 1442982829, "creation_date": 1442982829, "answer_id": 32731031, "question_id": 32730914, "link": "https://stackoverflow.com/questions/32730914/find-two-integer-elements-in-array-closest-to-each-other-in-numerical-difference/32731031#32731031", "title": "Find two integer elements in array closest to each other in numerical difference - Ruby", "body": "<pre><code>a = [3, -43, 1, 98, 29, 8, 10, -66]\n\na.sort.each_cons(2).min_by{|x, y| y - x}\n# =&gt; [1, 3]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1442993328, "post_id": 32731336, "comment_id": 53308209, "body": "<i>&quot;you have to find the maximum number&quot;</i> - finding the maximum difference is as hard as finding the minimum, i.e. you would have to write a similar algorithm that requires a variable <code>max_diff</code> initialized with the minimum."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1442993425, "post_id": 32731336, "comment_id": 53308261, "body": "<i>&quot;You can check the smallest pair by checking the sum of the pair&quot;</i> - the OP wants to find the smallest <i>difference</i>, not the smallest <i>sum</i>."}, {"owner": {"reputation": 1455, "user_id": 5211482, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-5j35a0RpPt4/AAAAAAAAAAI/AAAAAAAAAbk/AwnpMklz1Xc/photo.jpg?sz=128", "display_name": "Chintan Shah", "link": "https://stackoverflow.com/users/5211482/chintan-shah"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1442995583, "post_id": 32731336, "comment_id": 53309446, "body": "@Stefan My solution is to find <i>the smallest pair if there are more than one [pair with the same difference between them]</i> as asked in the question!"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1442995762, "post_id": 32731336, "comment_id": 53309542, "body": "I see, but your example pairs don&#39;t have the same difference."}, {"owner": {"reputation": 1455, "user_id": 5211482, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-5j35a0RpPt4/AAAAAAAAAAI/AAAAAAAAAbk/AwnpMklz1Xc/photo.jpg?sz=128", "display_name": "Chintan Shah", "link": "https://stackoverflow.com/users/5211482/chintan-shah"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1442999860, "post_id": 32731336, "comment_id": 53311878, "body": "@Stefan No, it has. (6-5=1) &amp; (4-3=1) and we have to find (3,4) pair as answer, that what my logic does. (Pair (4,8) is used just for example.)"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1443000041, "post_id": 32731336, "comment_id": 53312000, "body": "Sorry, I thought the code was just about finding the smallest pair in an array of pairs with the same difference."}], "tags": [], "owner": {"reputation": 1455, "user_id": 5211482, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-5j35a0RpPt4/AAAAAAAAAAI/AAAAAAAAAbk/AwnpMklz1Xc/photo.jpg?sz=128", "display_name": "Chintan Shah", "link": "https://stackoverflow.com/users/5211482/chintan-shah"}, "is_accepted": false, "score": 1, "last_activity_date": 1442984613, "last_edit_date": 1592644375, "creation_date": 1442984613, "answer_id": 32731336, "question_id": 32730914, "link": "https://stackoverflow.com/questions/32730914/find-two-integer-elements-in-array-closest-to-each-other-in-numerical-difference/32731336#32731336", "title": "Find two integer elements in array closest to each other in numerical difference - Ruby", "body": "<p>I don't know about Ruby! But I can surely help out with the logic.</p>\n<blockquote>\n<p>For the answer of your question,</p>\n<p><strong>How to set <em>least_diff</em> infinity?</strong></p>\n</blockquote>\n<p>-&gt; If it is not infinite then also it will work but for that you have to find the maximum number you can store in <em>least_diff</em>, and assign that value to <em>least_diff</em>.</p>\n<p>-&gt; Also what if <code>if curr_diff &lt; least_diff</code> is not true? you must have another part to check <code>if curr_diff == least_diff</code> &amp; <code>else</code> part. (i.e. No condition is matched!)</p>\n<blockquote>\n<p>For answer of the second part of your problem,</p>\n</blockquote>\n<p>-&gt; You can check the smallest pair by checking the sum of the pair.</p>\n<p>For example,</p>\n<p>Suppose you have pairs, (5,6), (3,4) and (4,8) in your answer. Now according to problem, you have to find (3,4) from the above pairs.</p>\n<p>(4+8=12) &gt; (5+6=11) &gt; (3+4=7), so least sum '7' is your answer.</p>\n<p>So you can add in your code the following logic.</p>\n<pre><code>least_pair_sum = 9999 #Assign the maximum value as I mentioned above.\n#in the if part\nif curr_diff &lt;= least_diff\n      if ans_arr != nil\n           curr_pair_sum = arr[i] + arr[k]  #Don't know the syntax! Just see the logic\n           if curr_pair_sum &lt;= least_pair_sum\n                ans_arr.push(&quot;\\(#{arr[i]},#{arr[k]}\\)&quot;) \n           end\n      end\n      least_diff = curr_diff\n      #Removed ans_arr.push(&quot;\\(#{arr[i]},#{arr[k]}\\)&quot;) so you have only answer in the array\nend\n</code></pre>\n<p>Hope it can solve your problem.</p>\n"}], "owner": {"reputation": 107, "user_id": 5356697, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d7ee190aabb5b49246c2ca1552757301?s=128&d=identicon&r=PG&f=1", "display_name": "snctmpst", "link": "https://stackoverflow.com/users/5356697/snctmpst"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 763, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1442984613, "creation_date": 1442982108, "last_edit_date": 1442983388, "question_id": 32730914, "link": "https://stackoverflow.com/questions/32730914/find-two-integer-elements-in-array-closest-to-each-other-in-numerical-difference", "title": "Find two integer elements in array closest to each other in numerical difference - Ruby", "body": "<p>This is actually a technical interview question I found.</p>\n\n<p>Given an array, find the two integer elements that are closest to each other. Return the smallest pair if there are more than one [pair with the same difference between them]. </p>\n\n<p>I took a shot at this. As you can see, it looks ugly. I'm wondering about alternative, cleaner and more efficient approaches. I didn't do the last part of the question about returning the smallest pair if there are more than one but it works otherwise.</p>\n\n<pre><code>least_diff = 99999 #how to represent infinity?\nans_arr = []\nfor i in (0...arr.length)\n    for k in (0...arr.length)\n        if i != k \n            curr_diff = (arr[i] - arr[k]).abs\n            if curr_diff &lt; least_diff\n                if ans_arr != nil\n                    ans_arr.pop\n                end\n                least_diff = curr_diff\n                ans_arr.push(\"\\(#{arr[i]},#{arr[k]}\\)\")\n            end\n        end\n    end\nend\n\nans_arr[0]\n</code></pre>\n"}, {"tags": ["ruby", "ruby-on-rails-3", "postgresql"], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 3498512, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/ab0ca087d899f5ea418aa6c120408660?s=128&d=identicon&r=PG&f=1", "display_name": "user3498512", "link": "https://stackoverflow.com/users/3498512/user3498512"}, "edited": false, "score": 0, "creation_date": 1442980158, "post_id": 32730618, "comment_id": 53303148, "body": "What if the image is a url? - There&#39;s also 5,000 of them"}], "tags": [], "owner": {"reputation": 127, "user_id": 5365925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4c5de02772551d381ff5a9bf1a80219?s=128&d=identicon&r=PG&f=1", "display_name": "Hyung Cho", "link": "https://stackoverflow.com/users/5365925/hyung-cho"}, "is_accepted": false, "score": 0, "last_activity_date": 1442979961, "creation_date": 1442979961, "answer_id": 32730618, "question_id": 32730524, "link": "https://stackoverflow.com/questions/32730524/how-to-display-multiple-images-from-the-database-in-html-erb/32730618#32730618", "title": "How to display multiple images from the database in html.erb?", "body": "<p>If your images are titled in a way that matches your product's id:</p>\n\n<pre><code>&lt;%= image_path(\"product_#{@product.id}.jpg\") %&gt;\n</code></pre>\n\n<p>Note: <code>image_path</code> is a helper method.</p>\n"}, {"tags": [], "owner": {"reputation": 689, "user_id": 4409186, "user_type": "registered", "accept_rate": 38, "profile_image": "https://lh3.googleusercontent.com/-M_x58hCBTVU/AAAAAAAAAAI/AAAAAAAAqJw/sdHmd03mFwc/photo.jpg?sz=128", "display_name": "erikdstock", "link": "https://stackoverflow.com/users/4409186/erikdstock"}, "is_accepted": false, "score": 0, "last_activity_date": 1442981620, "creation_date": 1442981620, "answer_id": 32730842, "question_id": 32730524, "link": "https://stackoverflow.com/questions/32730524/how-to-display-multiple-images-from-the-database-in-html-erb/32730842#32730842", "title": "How to display multiple images from the database in html.erb?", "body": "<p>generally you should have a string attribute on your object pointing at the url of the image. i believe the paperclip gem facilitates this. the method of injecting the id might work, or it might quickly become too complicated a solution as your images build up.</p>\n"}, {"tags": [], "owner": {"reputation": 16089, "user_id": 726239, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/l4w57.jpg?s=128&g=1", "display_name": "Shaunak", "link": "https://stackoverflow.com/users/726239/shaunak"}, "is_accepted": true, "score": 0, "last_activity_date": 1442982534, "last_edit_date": 1442982534, "creation_date": 1442981801, "answer_id": 32730866, "question_id": 32730524, "link": "https://stackoverflow.com/questions/32730524/how-to-display-multiple-images-from-the-database-in-html-erb/32730866#32730866", "title": "How to display multiple images from the database in html.erb?", "body": "<p>On ERB first you will need access to all the <code>Product</code> records you need to display images for. </p>\n\n<p>Quick and Dirty for demo sake you can have that access like so:</p>\n\n<pre><code>Product.find(1)\nProduct.find(2)\nProduct.find(3)\n</code></pre>\n\n<p>Now assuming you have <code>image_url</code> column for every product that stores the URL for the image, you can display the image like so: </p>\n\n<pre><code>&lt;%= image_tag(Product.find(1).image_url) %&gt;\n&lt;%= image_tag(Product.find(2).image_url) %&gt;\n&lt;%= image_tag(Product.find(3).image_url) %&gt;\n</code></pre>\n\n<p>However in real world scenario its better if you have products coming in as a array from the controller and then you iterate over that array variable <code>@products</code> then in your ERB like so: </p>\n\n<pre><code>&lt;% @products.each do |product| %&gt;\n   &lt;%= image_tag(product.image_url) %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>In case if each of the product has multiple images and assuming you have the one to many relationships setup correctly in the database your ERB code may look something like this</p>\n\n<pre><code>&lt;% @product.images.each do |image| %&gt;\n  &lt;%= image_tag(image.url) %&gt;\n&lt;% end %&gt;\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 3498512, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/ab0ca087d899f5ea418aa6c120408660?s=128&d=identicon&r=PG&f=1", "display_name": "user3498512", "link": "https://stackoverflow.com/users/3498512/user3498512"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 629, "favorite_count": 0, "accepted_answer_id": 32730866, "answer_count": 3, "score": 0, "last_activity_date": 1442982534, "creation_date": 1442979299, "question_id": 32730524, "link": "https://stackoverflow.com/questions/32730524/how-to-display-multiple-images-from-the-database-in-html-erb", "title": "How to display multiple images from the database in html.erb?", "body": "<p>So basically what I would like is to know what the ruby code is to display an image from the database. Here's an example. Let's say I want to see product id:1's page - it should display the designated image correlated with that id number. Now if I want id:2 it should display that image that correlates with that number. All of this will be on a single show.html.erb page. I am lost, please help. </p>\n\n<p>Thanks! </p>\n"}, {"tags": ["javascript", "jquery", "ruby-on-rails", "ruby", "ajax"], "answers": [{"comments": [{"owner": {"reputation": 1704, "user_id": 3900606, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/c302f96e748480965d4190fcff8e347b?s=128&d=identicon&r=PG&f=1", "display_name": "bnussey", "link": "https://stackoverflow.com/users/3900606/bnussey"}, "edited": false, "score": 0, "creation_date": 1442980396, "post_id": 32730500, "comment_id": 53303197, "body": "Hey, thanks for your answer. Unfortunately nothing came through on console for that either :("}, {"owner": {"reputation": 1704, "user_id": 3900606, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/c302f96e748480965d4190fcff8e347b?s=128&d=identicon&r=PG&f=1", "display_name": "bnussey", "link": "https://stackoverflow.com/users/3900606/bnussey"}, "edited": false, "score": 0, "creation_date": 1442982209, "post_id": 32730500, "comment_id": 53303576, "body": "Hey, thanks for the update.. I got error and complete both in my console.. but no data"}, {"owner": {"reputation": 4497, "user_id": 1050875, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/3549436942ea890da97f41d1dbd3594f?s=128&d=identicon&r=PG", "display_name": "akbarbin", "link": "https://stackoverflow.com/users/1050875/akbarbin"}, "reply_to_user": {"reputation": 1704, "user_id": 3900606, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/c302f96e748480965d4190fcff8e347b?s=128&d=identicon&r=PG&f=1", "display_name": "bnussey", "link": "https://stackoverflow.com/users/3900606/bnussey"}, "edited": false, "score": 0, "creation_date": 1442982625, "post_id": 32730500, "comment_id": 53303683, "body": "What for <code>return</code> in  <code>check_coupon_code</code>? Try to remove it first."}, {"owner": {"reputation": 1704, "user_id": 3900606, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/c302f96e748480965d4190fcff8e347b?s=128&d=identicon&r=PG&f=1", "display_name": "bnussey", "link": "https://stackoverflow.com/users/3900606/bnussey"}, "edited": false, "score": 0, "creation_date": 1442982832, "post_id": 32730500, "comment_id": 53303734, "body": "Booyah, that did it.. Thank you mate! Do you want to add that to the answer for completeness?"}, {"owner": {"reputation": 4497, "user_id": 1050875, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/3549436942ea890da97f41d1dbd3594f?s=128&d=identicon&r=PG", "display_name": "akbarbin", "link": "https://stackoverflow.com/users/1050875/akbarbin"}, "reply_to_user": {"reputation": 1704, "user_id": 3900606, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/c302f96e748480965d4190fcff8e347b?s=128&d=identicon&r=PG&f=1", "display_name": "bnussey", "link": "https://stackoverflow.com/users/3900606/bnussey"}, "edited": false, "score": 0, "creation_date": 1442983147, "post_id": 32730500, "comment_id": 53303820, "body": "really? It&#39;s ajax request. Can you give me log server?"}, {"owner": {"reputation": 4497, "user_id": 1050875, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/3549436942ea890da97f41d1dbd3594f?s=128&d=identicon&r=PG", "display_name": "akbarbin", "link": "https://stackoverflow.com/users/1050875/akbarbin"}, "reply_to_user": {"reputation": 1704, "user_id": 3900606, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/c302f96e748480965d4190fcff8e347b?s=128&d=identicon&r=PG&f=1", "display_name": "bnussey", "link": "https://stackoverflow.com/users/3900606/bnussey"}, "edited": false, "score": 0, "creation_date": 1442987901, "post_id": 32730500, "comment_id": 53305351, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/90387/discussion-between-muhamad-akbar-bin-widayat-and-bnussey\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 4497, "user_id": 1050875, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/3549436942ea890da97f41d1dbd3594f?s=128&d=identicon&r=PG", "display_name": "akbarbin", "link": "https://stackoverflow.com/users/1050875/akbarbin"}, "is_accepted": true, "score": 0, "last_activity_date": 1442980935, "last_edit_date": 1442980935, "creation_date": 1442979096, "answer_id": 32730500, "question_id": 32730397, "link": "https://stackoverflow.com/questions/32730397/get-data-back-after-validating-a-coupon-with-ruby-on-rails-using-ajax/32730500#32730500", "title": "Get data back after validating a Coupon with Ruby on Rails using AJAX", "body": "<p>Try to change <code>response</code> into <code>data</code> in you condition. Then, Please update the ajax into below:</p>\n\n<pre><code>&lt;script&gt;\n  $('#subscription_stripe_coupon').change(function () {\n      coupon_code = $('#subscription_stripe_coupon').val();\n      $.ajax({\n          type: \"POST\",\n          url: \"/coupons/check_coupon_code\",\n          dataType: 'json',\n          data: {coupon: coupon_code}\n      }).done(function (data) {\n          console.log(data);\n          if (data) {\n              console.log(\"Valid Code!\");\n          } else {\n              console.log(\"Invalid Code!\");\n          }\n      }).fail(function () {\n          console.log(\"error\");\n      }).always(function () {\n          console.log(\"complete\");\n      });\n  });\n&lt;/script&gt;\n</code></pre>\n"}], "owner": {"reputation": 1704, "user_id": 3900606, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/c302f96e748480965d4190fcff8e347b?s=128&d=identicon&r=PG&f=1", "display_name": "bnussey", "link": "https://stackoverflow.com/users/3900606/bnussey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 348, "favorite_count": 1, "accepted_answer_id": 32730500, "answer_count": 1, "score": 1, "last_activity_date": 1442980935, "creation_date": 1442978265, "question_id": 32730397, "link": "https://stackoverflow.com/questions/32730397/get-data-back-after-validating-a-coupon-with-ruby-on-rails-using-ajax", "title": "Get data back after validating a Coupon with Ruby on Rails using AJAX", "body": "<p>On my Rails app I have a requirement to validate coupons and provide feedback to the user about the kind of discount they will receive.</p>\n\n<p>I have been able to successfully check if the coupon is valid or invalid using AJAX. Now I am trying to show data about the Coupon but have been unsuccessful so far in my attempts.</p>\n\n<p>I have a Model called <code>Coupon</code> with the fields of <code>code</code> and <code>discount</code>.</p>\n\n<p>Here is my controller code:</p>\n\n<pre><code>class CouponsController &lt; ApplicationController\n\n  def show\n  end\n\n  def check_coupon_code\n\n    if Coupon.exists?(:code =&gt; params[:coupon])\n      valid = true\n      @coupon = Coupon.find_by(:code =&gt; params[:coupon])\n      puts \"Code Valid\"\n    else\n      valid = false\n      puts \"Code Invalid\"\n    end\n    respond_to do |format|\n      if valid\n        format.json { render :json =&gt; @coupon }\n      else\n        format.json { }\n      end\n      return\n    end\n\n  end\n\nend\n</code></pre>\n\n<p>Javascript on the form:</p>\n\n<pre><code>&lt;script&gt;\n  $(document).ready(function(){\n    $('#subscription_stripe_coupon').change(function(){\n      coupon_code = $('#subscription_stripe_coupon').val();\n      $.ajax({\n        type: \"POST\",\n        url: \"/coupons/check_coupon_code\",\n        dataType: 'json',\n        data: { coupon : coupon_code},\n        success: function(data){\n          if (response) {\n            console.log(\"Valid Code!\");\n          } else {\n            console.log(\"Invalid Code!\");\n          }\n        }\n      });\n    });\n  });\n&lt;/script&gt;\n</code></pre>\n\n<p>My route:</p>\n\n<pre><code>post 'coupons/check_coupon_code' =&gt; 'coupons#check_coupon_code'\n</code></pre>\n\n<p>Here's the logs on an invalid coupon:</p>\n\n<pre><code>Started POST \"/coupons/check_coupon_code\" for 50.17.182.190 at 2015-09-23 03:02:35 +0000\nProcessing by CouponsController#check_coupon_code as JSON\n  Parameters: {\"coupon\"=&gt;\"asdf\"}\n  User Load (0.4ms)  SELECT  \"users\".* FROM \"users\"  WHERE \"users\".\"id\" = 1  ORDER BY \"users\".\"id\" ASC LIMIT 1\n  Coupon Exists (0.1ms)  SELECT  1 AS one FROM \"coupons\"  WHERE \"coupons\".\"code\" = 'asdf' LIMIT 1\nCode Invalid\n  Rendered coupons/check_coupon_code.html.erb within layouts/application (0.3ms)\n  Rendered layouts/_header.html.erb (1.0ms)\n  Rendered layouts/_footer.html.erb (0.4ms)\nCompleted 200 OK in 52ms (Views: 48.1ms | ActiveRecord: 0.6ms)\n</code></pre>\n\n<p>Here's the logs on a valid coupon:</p>\n\n<pre><code>Started POST \"/coupons/check_coupon_code\" for 50.17.182.190 at 2015-09-23 03:19:21 +0000\nProcessing by CouponsController#check_coupon_code as JSON\n  Parameters: {\"coupon\"=&gt;\"STARTUPBROS2015\"}\n  User Load (0.4ms)  SELECT  \"users\".* FROM \"users\"  WHERE \"users\".\"id\" = 1  ORDER BY \"users\".\"id\" ASC LIMIT 1\n   (0.1ms)  BEGIN\n  SQL (1.6ms)  UPDATE \"users\" SET \"last_seen_at\" = $1, \"updated_at\" = $2 WHERE \"users\".\"id\" = 1  [[\"last_seen_at\", \"2015-09-23 03:19:21.651990\"], [\"updated_at\", \"2015-09-23 03:19:21.653000\"]]\n   (0.9ms)  COMMIT\n  Coupon Exists (0.2ms)  SELECT  1 AS one FROM \"coupons\"  WHERE \"coupons\".\"code\" = 'STARTUPBROS2015' LIMIT 1\n  Coupon Load (0.2ms)  SELECT  \"coupons\".* FROM \"coupons\"  WHERE \"coupons\".\"code\" = 'STARTUPBROS2015' LIMIT 1\nCode Valid\n  Rendered coupons/check_coupon_code.html.erb within layouts/application (0.3ms)\n  Rendered layouts/_header.html.erb (0.9ms)\n  Rendered layouts/_footer.html.erb (0.4ms)\nCompleted 200 OK in 58ms (Views: 47.9ms | ActiveRecord: 3.3ms)\n</code></pre>\n"}, {"tags": ["jquery", "ruby-on-rails", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 923, "user_id": 2203953, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/hE0Fc.jpg?s=128&g=1", "display_name": "Pavel Tkackenko", "link": "https://stackoverflow.com/users/2203953/pavel-tkackenko"}, "edited": false, "score": 1, "creation_date": 1442985435, "post_id": 32730332, "comment_id": 53304509, "body": "Link to pdf file is expired..."}, {"owner": {"reputation": 795, "user_id": 3335646, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/e005d8b71b3bf46a42f38fdeec669179?s=128&d=identicon&r=PG", "display_name": "Fulvio", "link": "https://stackoverflow.com/users/3335646/fulvio"}, "reply_to_user": {"reputation": 923, "user_id": 2203953, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/hE0Fc.jpg?s=128&g=1", "display_name": "Pavel Tkackenko", "link": "https://stackoverflow.com/users/2203953/pavel-tkackenko"}, "edited": false, "score": 0, "creation_date": 1443010402, "post_id": 32730332, "comment_id": 53319071, "body": "@PavelTkackenko try now"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1467967269, "post_id": 32730332, "comment_id": 63944520, "body": "Expired again. Post a link without TTL."}], "answers": [{"tags": [], "owner": {"reputation": 1035, "user_id": 4146283, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/5ee6027e8e0c4d815f5d9741371eacde?s=128&d=identicon&r=PG", "display_name": "disastrous-charly", "link": "https://stackoverflow.com/users/4146283/disastrous-charly"}, "is_accepted": false, "score": 1, "last_activity_date": 1467966960, "creation_date": 1467966960, "answer_id": 38262295, "question_id": 32730332, "link": "https://stackoverflow.com/questions/32730332/upload-large-files-on-ror/38262295#38262295", "title": "Upload large files on RoR", "body": "<p>Old post but I had the same problem, so, if it can help : </p>\n\n<p>Jquery-fileupload has an option for chunked upload (upload multiple tiny files rather than one big file)\nTry with : </p>\n\n<p><code>$('#fileupload').fileupload({\n    maxChunkSize: 1000000,\n    maxFileSize: 1000000 * 10000,</code></p>\n\n<p>It works really well for large file upload.</p>\n"}], "owner": {"reputation": 795, "user_id": 3335646, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/e005d8b71b3bf46a42f38fdeec669179?s=128&d=identicon&r=PG", "display_name": "Fulvio", "link": "https://stackoverflow.com/users/3335646/fulvio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 88, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1467966960, "creation_date": 1442977824, "last_edit_date": 1443010386, "question_id": 32730332, "link": "https://stackoverflow.com/questions/32730332/upload-large-files-on-ror", "title": "Upload large files on RoR", "body": "<p>I am working on a project in Ruby on Rails 4, which as the main requirement is to upload large files between 400MB and 1.5GB, everything depends on the information containing those files, however, are currently seeking alternatives in relation to upload those files where the application kept uploading files while the user is doing any other tasks (filling a new form where also will load a new file).</p>\n\n<p>We are using the API of Google Drive (where the files will store) and <code>gem \"jquery-fileupload-rails\"</code>.</p>\n\n<p>Based on your experience, how can i do or where can I find information for this requirement or any advise will be helpful.</p>\n\n<p>Example on page 3 of this <a href=\"https://bitbucket-assetroot.s3.amazonaws.com/perkhand/id-diagnostica/1442240828.93/15/consulta%20form.pdf?Signature=1sk2oaWtC2x0slm8ITWlYD7YdhY%3D&amp;Expires=1443012153&amp;AWSAccessKeyId=0EMWEFSGA12Z1HF1TZ82\" rel=\"nofollow\">pdf</a></p>\n\n<p>Thank you in advances</p>\n"}, {"tags": ["ruby", "yaml"], "comments": [{"owner": {"reputation": 7525, "user_id": 1805902, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/0W7rW.png?s=128&g=1", "display_name": "pangpang", "link": "https://stackoverflow.com/users/1805902/pangpang"}, "edited": false, "score": 0, "creation_date": 1442977921, "post_id": 32730275, "comment_id": 53302567, "body": "I didn&#39;t see any difference."}, {"owner": {"reputation": 862, "user_id": 5093293, "user_type": "registered", "accept_rate": 5, "profile_image": "https://www.gravatar.com/avatar/dd9c048167fd906fd1cf7c68c0344946?s=128&d=identicon&r=PG&f=1", "display_name": "Angle Tom", "link": "https://stackoverflow.com/users/5093293/angle-tom"}, "reply_to_user": {"reputation": 7525, "user_id": 1805902, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/0W7rW.png?s=128&g=1", "display_name": "pangpang", "link": "https://stackoverflow.com/users/1805902/pangpang"}, "edited": false, "score": 0, "creation_date": 1442977953, "post_id": 32730275, "comment_id": 53302576, "body": "the result in ruby 1.8 : {&quot;start_time&quot;=&gt;&quot;2012-09-24T13:00:00&quot;}"}], "answers": [{"tags": [], "owner": {"reputation": 7525, "user_id": 1805902, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/0W7rW.png?s=128&g=1", "display_name": "pangpang", "link": "https://stackoverflow.com/users/1805902/pangpang"}, "is_accepted": false, "score": 1, "last_activity_date": 1442982207, "creation_date": 1442982207, "answer_id": 32730931, "question_id": 32730275, "link": "https://stackoverflow.com/questions/32730275/the-date-time-format-will-be-auto-converted-by-yaml-load-from-2-0/32730931#32730931", "title": "The date time format will be auto converted by YAML.load from 2.0", "body": "<p>You can enclose the time within single quotes, the YAML parser will treat the time as a string.</p>\n\n<pre><code>YAML.load(\"start_time: '2012-09-24T13:00:00'\")\n=&gt; {\"start_time\"=&gt;\"2012-09-24T13:00:00\"}\n</code></pre>\n"}], "owner": {"reputation": 862, "user_id": 5093293, "user_type": "registered", "accept_rate": 5, "profile_image": "https://www.gravatar.com/avatar/dd9c048167fd906fd1cf7c68c0344946?s=128&d=identicon&r=PG&f=1", "display_name": "Angle Tom", "link": "https://stackoverflow.com/users/5093293/angle-tom"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 709, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1442982207, "creation_date": 1442977364, "last_edit_date": 1442977985, "question_id": 32730275, "link": "https://stackoverflow.com/questions/32730275/the-date-time-format-will-be-auto-converted-by-yaml-load-from-2-0", "title": "The date time format will be auto converted by YAML.load from 2.0", "body": "<p>I am upgrading ruby to 2.2 from 1.8 for my production.\nIn the ruby 1.8, I will get the result as I expected.\nBut in ruby 2.2, the result is very strange, anyone knows how to fix it.</p>\n\n<pre><code>YAML.load(\"start_time: 2012-09-24T13:00:00\")\n</code></pre>\n\n<p>In ruby 1.8, <code>{\"start_time\"=&gt;\"2012-09-24T13:00:00\"}</code></p>\n\n<p>In ruby 2.2, <code>{\"start_time\"=&gt;2012-09-24 23:00:00 +1000}</code></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "angularjs"], "comments": [{"owner": {"reputation": 1197, "user_id": 1998399, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d43987f2f410be84d3e7d2137cdc00e8?s=128&d=identicon&r=PG", "display_name": "Chris Story", "link": "https://stackoverflow.com/users/1998399/chris-story"}, "edited": false, "score": 0, "creation_date": 1442976648, "post_id": 32730145, "comment_id": 53302263, "body": "I am confused.  This implementation has both rails and AngularJS.  Are you looking for the entire snippet to be only rails without any Angular?  If so, why does the Angular solution not work?"}, {"owner": {"reputation": 162909, "user_id": 1175966, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d3d9dfbd040f9cbc1a6b82f0da2b345?s=128&d=identicon&r=PG", "display_name": "charlietfl", "link": "https://stackoverflow.com/users/1175966/charlietfl"}, "edited": false, "score": 0, "creation_date": 1442976736, "post_id": 32730145, "comment_id": 53302281, "body": "what changed? Don&#39;t know why you would convert all this to ruby in the first place but final result shouldn&#39;t be any different than what you had working before. All the browser sees is html so that should be the same"}, {"owner": {"reputation": 155, "user_id": 5130282, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/2b5296c238ea22489d69c7a65bde6d2b?s=128&d=identicon&r=PG&f=1", "display_name": "Suma Chaganti", "link": "https://stackoverflow.com/users/5130282/suma-chaganti"}, "edited": false, "score": 0, "creation_date": 1442980513, "post_id": 32730145, "comment_id": 53303223, "body": "I mean even changing the ruby tags to normal html tags it didn&#39;t work on rails but when I tried the same code as a normal html file it worked."}, {"owner": {"reputation": 611, "user_id": 4868652, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/74bb082472bd5643401801185c82a8ff?s=128&d=identicon&r=PG&f=1", "display_name": "jbdev", "link": "https://stackoverflow.com/users/4868652/jbdev"}, "edited": false, "score": 0, "creation_date": 1442981698, "post_id": 32730145, "comment_id": 53303457, "body": "Did you try initiating $scope.showName = true; (or false) in your controller?"}, {"owner": {"reputation": 155, "user_id": 5130282, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/2b5296c238ea22489d69c7a65bde6d2b?s=128&d=identicon&r=PG&f=1", "display_name": "Suma Chaganti", "link": "https://stackoverflow.com/users/5130282/suma-chaganti"}, "edited": false, "score": 0, "creation_date": 1442982124, "post_id": 32730145, "comment_id": 53303548, "body": "Yes, I have that as my first step in the controller."}], "answers": [{"comments": [{"owner": {"reputation": 155, "user_id": 5130282, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/2b5296c238ea22489d69c7a65bde6d2b?s=128&d=identicon&r=PG&f=1", "display_name": "Suma Chaganti", "link": "https://stackoverflow.com/users/5130282/suma-chaganti"}, "edited": false, "score": 0, "creation_date": 1442980081, "post_id": 32730180, "comment_id": 53303125, "body": "I tried this too and it didn&#39;t work since a controller runs before ng-init. And in the angular docs <a href=\"https://docs.angularjs.org/api/ng/directive/ngInit\" rel=\"nofollow noreferrer\">docs.angularjs.org/api/ng/directive/ngInit</a>, it says ng-init is used for aliasing special properties rather than to initialize values on a scope."}], "tags": [], "owner": {"reputation": 1197, "user_id": 1998399, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d43987f2f410be84d3e7d2137cdc00e8?s=128&d=identicon&r=PG", "display_name": "Chris Story", "link": "https://stackoverflow.com/users/1998399/chris-story"}, "is_accepted": false, "score": 0, "last_activity_date": 1442976499, "creation_date": 1442976499, "answer_id": 32730180, "question_id": 32730145, "link": "https://stackoverflow.com/questions/32730145/trying-to-initiate-a-variable-on-page-load-angularjs/32730180#32730180", "title": "Trying to initiate a variable on page load Angularjs", "body": "<p>Use ng-init to initialize the variable</p>\n\n<pre><code>&lt;div class=\"row\" ng-controller=\"EditUserCtrl\" ng-init=\"showName = true\"&gt;\n</code></pre>\n"}], "owner": {"reputation": 155, "user_id": 5130282, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/2b5296c238ea22489d69c7a65bde6d2b?s=128&d=identicon&r=PG&f=1", "display_name": "Suma Chaganti", "link": "https://stackoverflow.com/users/5130282/suma-chaganti"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 260, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1442976499, "creation_date": 1442976238, "question_id": 32730145, "link": "https://stackoverflow.com/questions/32730145/trying-to-initiate-a-variable-on-page-load-angularjs", "title": "Trying to initiate a variable on page load Angularjs", "body": "<p>I am trying to initiate a variable showName when the page loads. It worked fine when I did it using just angular but when I implemented it with rails(with embedded ruby tags)  I am not able to hide the text field and save button as my variable gets undefined. I have tried couple of ways and ended with no result. </p>\n\n<p>Here is my code. Any help is really appreciated. Thanks.</p>\n\n<p>Edit.html.erb:</p>\n\n<pre><code>&lt;div class=\"row\" ng-controller=\"EditUserCtrl\"&gt;\n&lt;div class=\"col-md-6 col-md-offset-3\" id=\"editForm\"&gt;\n    &lt;%= form_for(@user) do |f| %&gt;\n        &lt;h1 id=\"editHeader\"&gt;Account Information &lt;/h1&gt;\n        &lt;%= render 'shared/error_messages' %&gt;\n        &lt;div class=\"form-group\"&gt;\n            &lt;%= f.label :name, \"Full Name:\" %&gt;&lt;br&gt;\n            &lt;div class=\"row\"&gt;\n\n                &lt;div class=\"col-sm-7\"&gt;\n                    &lt;div ng-hide=\"showName\"&gt;\n                        &lt;%= f.label :name, @user.name , id:\"editFields\" %&gt;\n                    &lt;/div&gt;\n                    &lt;%= f.text_field :name, { :'ng-show' =&gt; 'showName'}%&gt;\n                &lt;/div&gt;\n\n                &lt;div class=\"col-sm-5\" ng-show=\"showName\"&gt;\n                    &lt;%= f.button \"Save\", :action =&gt; \"update_name\" , :method =&gt; :put, class: \"btn btn-primary\", :'ng-click' =&gt; \"clicked()\", id:\"editAccount\" %&gt;\n                &lt;/div&gt;\n\n                &lt;div class=\"col-sm-5\" ng-hide=\"showName\"&gt;\n                    &lt;a href=\"\" ng-click=\"editName()\" ng-hide=\"showName\"&gt; &lt;i id=\"nav-cart-count\" class=\"glyphicon glyphicon-edit\"&gt;&lt;/i&gt; Edit &lt;/a&gt;\n                &lt;/div&gt;\n\n            &lt;/div&gt;\n        &lt;/div&gt;\n    &lt;% end %&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p></p>\n"}, {"tags": ["python", "ruby"], "comments": [{"owner": {"reputation": 79972, "user_id": 298607, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/DVW9g.jpg?s=128&g=1", "display_name": "dawg", "link": "https://stackoverflow.com/users/298607/dawg"}, "edited": false, "score": 1, "creation_date": 1442975044, "post_id": 32729970, "comment_id": 53301896, "body": "There is not a great perfect parallel construction to that. <code>try</code> <code>except</code> is probably the closest."}, {"owner": {"reputation": 49880, "user_id": 1222578, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/daae63146dbed42f50cd56f7268c6260?s=128&d=identicon&r=PG", "display_name": "Marius", "link": "https://stackoverflow.com/users/1222578/marius"}, "edited": false, "score": 1, "creation_date": 1442975375, "post_id": 32729970, "comment_id": 53301961, "body": "So at the point you use this syntax in Ruby, you don&#39;t know if <code>var</code> has actually been defined in the current scope? That&#39;s something that you would generally try pretty hard to avoid in Python. Or is it just that <code>var</code> is null, like <code>None</code> in Python?"}, {"owner": {"reputation": 11096, "user_id": 146764, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/8e55e89dc040dcf614e56175a8d44531?s=128&d=identicon&r=PG", "display_name": "Benjamin Oakes", "link": "https://stackoverflow.com/users/146764/benjamin-oakes"}, "edited": false, "score": 0, "creation_date": 1442975449, "post_id": 32729970, "comment_id": 53301978, "body": "I&#39;m much more of a Rubyist than a Pythonista, but I think Python has some memoization decorators that are relevant to this discussion..."}, {"owner": {"reputation": 8843, "user_id": 349948, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e06d0e631af3fe3d713e76f2957fb05f?s=128&d=identicon&r=PG", "display_name": "Corley Brigman", "link": "https://stackoverflow.com/users/349948/corley-brigman"}, "edited": false, "score": 1, "creation_date": 1442975559, "post_id": 32729970, "comment_id": 53302003, "body": "If the goal is just to make sure that after passing through a block of code that could (but not necessarily will) write to a variable, the more standard Python formulation would be to set it to the default value before entering the block; if it&#39;s not modified, it retains the original value. Not sure if your code has some special needs that this won&#39;t work for."}, {"owner": {"reputation": 7720, "user_id": 349659, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/3db4a8e9aa5e19682c0a65fe31cf6702?s=128&d=identicon&r=PG", "display_name": "CTS_AE", "link": "https://stackoverflow.com/users/349659/cts-ae"}, "edited": false, "score": 0, "creation_date": 1548966530, "post_id": 32729970, "comment_id": 95745337, "body": "Duplicate of: <a href=\"https://stackoverflow.com/questions/3929433/does-python-have-an-or-equals-function-like-in-ruby\" title=\"does python have an or equals function like in ruby\">stackoverflow.com/questions/3929433/&hellip;</a> but I like the answers here better \ud83d\ude1b"}], "answers": [{"comments": [{"owner": {"reputation": 8843, "user_id": 349948, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e06d0e631af3fe3d713e76f2957fb05f?s=128&d=identicon&r=PG", "display_name": "Corley Brigman", "link": "https://stackoverflow.com/users/349948/corley-brigman"}, "edited": false, "score": 0, "creation_date": 1442975670, "post_id": 32730010, "comment_id": 53302024, "body": "it&#39;s closest probably, but you&#39;d probably need to check in <code>globals()</code> too to have a full solution..."}, {"owner": {"reputation": 40575, "user_id": 793428, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/999b32fdf6b04835061fffd1c5c6cf76?s=128&d=identicon&r=PG&f=1", "display_name": "ozgur", "link": "https://stackoverflow.com/users/793428/ozgur"}, "reply_to_user": {"reputation": 8843, "user_id": 349948, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e06d0e631af3fe3d713e76f2957fb05f?s=128&d=identicon&r=PG", "display_name": "Corley Brigman", "link": "https://stackoverflow.com/users/349948/corley-brigman"}, "edited": false, "score": 2, "creation_date": 1442976018, "post_id": 32730010, "comment_id": 53302125, "body": "@CorleyBrigman there might have both a local and a global variable with the same name, so I covered only local scope."}, {"owner": {"user_type": "does_not_exist", "display_name": "user380772"}, "edited": false, "score": 0, "creation_date": 1443007827, "post_id": 32730010, "comment_id": 53317306, "body": "I have barely used Python-dictionaries and have never used locals() or globals()  before, but it seems like <code>var = locals().get(&#39;var&#39;) if &#39;var&#39; in locals().keys() else globals().get(&#39;var&#39;,var_new)</code> would handle both of those. \u200b"}], "tags": [], "owner": {"reputation": 40575, "user_id": 793428, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/999b32fdf6b04835061fffd1c5c6cf76?s=128&d=identicon&r=PG&f=1", "display_name": "ozgur", "link": "https://stackoverflow.com/users/793428/ozgur"}, "is_accepted": false, "score": 3, "last_activity_date": 1442976129, "last_edit_date": 1442976129, "creation_date": 1442975304, "answer_id": 32730010, "question_id": 32729970, "link": "https://stackoverflow.com/questions/32729970/pythons-equivalent-of-rubys/32730010#32730010", "title": "Python&#39;s equivalent of Ruby&#39;s ||=", "body": "<p>Not very safe however another option would be:</p>\n\n<pre><code>var = locals().get('var', var_new)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 0, "creation_date": 1442976135, "post_id": 32730042, "comment_id": 53302145, "body": "I&#39;d use <code>_ = var</code> so you don&#39;t get spurious output on the console."}, {"owner": {"reputation": 263593, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "reply_to_user": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 1, "creation_date": 1442976360, "post_id": 32730042, "comment_id": 53302188, "body": "@MarkRansom you wouldn&#39;t get console output for this, unless you were running in the REPL"}], "tags": [], "owner": {"reputation": 263593, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "is_accepted": false, "score": 5, "last_activity_date": 1565642778, "last_edit_date": 1565642778, "creation_date": 1442975571, "answer_id": 32730042, "question_id": 32729970, "link": "https://stackoverflow.com/questions/32729970/pythons-equivalent-of-rubys/32730042#32730042", "title": "Python&#39;s equivalent of Ruby&#39;s ||=", "body": "<p>There is no particularly elegant way in python, because it's not particularly elegant to get yourself into a situation where you don't know whether a variable is existing or not.  However, this seems closest:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>try:\n    var\nexcept NameError:\n    var = var_new\n</code></pre>\n\n<p>I'm not familiar with the <code>||=</code> operator in ruby, but from what you have described this block should have the correct behaviour.  That is, we leave <code>var</code> bound as is if it was an already existing variable, and we set it to <code>var_new</code> otherwise.  </p>\n"}, {"comments": [{"owner": {"reputation": 79972, "user_id": 298607, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/DVW9g.jpg?s=128&g=1", "display_name": "dawg", "link": "https://stackoverflow.com/users/298607/dawg"}, "edited": false, "score": 1, "creation_date": 1442984052, "post_id": 32730067, "comment_id": 53304065, "body": "In Python <code>a=a or 10</code> still produces a NameError if <code>a</code> does not exist. In Ruby, <code>a||=10</code> creates the name <code>a</code> and if it does not exist and assigns 10 to it."}, {"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "reply_to_user": {"reputation": 79972, "user_id": 298607, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/DVW9g.jpg?s=128&g=1", "display_name": "dawg", "link": "https://stackoverflow.com/users/298607/dawg"}, "edited": false, "score": 0, "creation_date": 1443014551, "post_id": 32730067, "comment_id": 53322296, "body": "@dawg Yes, and I do not believe that what I wrote implies otherwise."}], "tags": [], "owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "is_accepted": false, "score": 4, "last_activity_date": 1442976111, "last_edit_date": 1442976111, "creation_date": 1442975707, "answer_id": 32730067, "question_id": 32729970, "link": "https://stackoverflow.com/questions/32729970/pythons-equivalent-of-rubys/32730067#32730067", "title": "Python&#39;s equivalent of Ruby&#39;s ||=", "body": "<p>This is approximately, and idiomatically, what you want:</p>\n\n<pre><code>var = var or var_new\n</code></pre>\n\n<p>Python's rules for variables that \"don't exist\" are quite strict; this will throw an exception if <code>var</code> has not been previously assigned.  However, if <code>var</code> <em>evaluates as falsey</em>, it will receive the value of <code>var_new</code>.</p>\n\n<p>I say this is \"idiomatically what you want\" because the idiomatic <em>larger structure</em> for this kind of thing, in Python, goes like so:</p>\n\n<pre><code>var1 = None\nvar2 = None\nvar3 = None\n\n# ... code here that may or may not set var1 through var3 ...\n\nvar1 = var1 or \"default1\"\nvar2 = var2 or \"default2\"\nvar3 = var3 or \"default3\"\n</code></pre>\n\n<p>Note also that Python has a fairly broad notion of \"falsey\".  This construct is only valid if <code>var</code> cannot have been assigned zero, False,  or any object considered to be \"empty\" (e.g. <code>\"\"</code>, <code>[]</code>, <code>{}</code>...).  If you really want it to trigger only on None you have to write the more verbose</p>\n\n<pre><code>var = var if var is not None else var_new\n</code></pre>\n\n<p>and, rather than do that, I would generally look for another way to solve the larger problem.</p>\n\n<p>Finally, if you <em>can</em> structure your code like this instead...</p>\n\n<pre><code>var1 = \"default1\"\nvar2 = \"default2\"\nvar3 = \"default3\"\n\n# ... code here that may or may not set var1 through var3 ...\n</code></pre>\n\n<p>... then you <em>should</em>, because it's shorter and less complicated that way, and the None vs falsey issue is completely avoided.</p>\n"}, {"tags": [], "owner": {"reputation": 586, "user_id": 5356629, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sHXyu.jpg?s=128&g=1", "display_name": "gyu-don", "link": "https://stackoverflow.com/users/5356629/gyu-don"}, "is_accepted": false, "score": 1, "last_activity_date": 1442976101, "creation_date": 1442976101, "answer_id": 32730121, "question_id": 32729970, "link": "https://stackoverflow.com/questions/32729970/pythons-equivalent-of-rubys/32730121#32730121", "title": "Python&#39;s equivalent of Ruby&#39;s ||=", "body": "<pre><code>try: var\nexcept NameError: var = var_new\n</code></pre>\n\n<p>or</p>\n\n<pre><code>var = locals().get('var', var_new)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 79972, "user_id": 298607, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/DVW9g.jpg?s=128&g=1", "display_name": "dawg", "link": "https://stackoverflow.com/users/298607/dawg"}, "edited": false, "score": 1, "creation_date": 1442983818, "post_id": 32730327, "comment_id": 53304007, "body": "After <code>a=None; if not a: a=10</code> then a is guaranteed to be 10, no? Might as well just have <code>a=10</code>"}, {"owner": {"reputation": 14487, "user_id": 2505965, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5056f8ef1dc81df419a479f24d5f80f5?s=128&d=identicon&r=PG", "display_name": "Oka", "link": "https://stackoverflow.com/users/2505965/oka"}, "reply_to_user": {"reputation": 79972, "user_id": 298607, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/DVW9g.jpg?s=128&g=1", "display_name": "dawg", "link": "https://stackoverflow.com/users/298607/dawg"}, "edited": false, "score": 0, "creation_date": 1442985581, "post_id": 32730327, "comment_id": 53304556, "body": "@dawg Simply showing <i>explicitly</i> how it would look in Python, in relation to the way it just <i>is</i> in Ruby."}, {"owner": {"reputation": 14487, "user_id": 2505965, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5056f8ef1dc81df419a479f24d5f80f5?s=128&d=identicon&r=PG", "display_name": "Oka", "link": "https://stackoverflow.com/users/2505965/oka"}, "reply_to_user": {"reputation": 79972, "user_id": 298607, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/DVW9g.jpg?s=128&g=1", "display_name": "dawg", "link": "https://stackoverflow.com/users/298607/dawg"}, "edited": false, "score": 0, "creation_date": 1442986941, "post_id": 32730327, "comment_id": 53304984, "body": "I&#39;ve made some edits, hope this clarifies things a bit."}, {"owner": {"reputation": 14869, "user_id": 1794744, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/bed721a1153f97bdd0b31703673abee2?s=128&d=identicon&r=PG", "display_name": "cqcn1991", "link": "https://stackoverflow.com/users/1794744/cqcn1991"}, "edited": false, "score": 0, "creation_date": 1442990876, "post_id": 32730327, "comment_id": 53306807, "body": "I used to do <code>if not &#39;var&#39; in globals():</code>, now its get a little bit short."}, {"owner": {"reputation": 263593, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "edited": false, "score": 2, "creation_date": 1443003165, "post_id": 32730327, "comment_id": 53314219, "body": "It sounds like the explanation of what <code>||=</code> does in the original question is wrong.  Could someone more familiar with ruby edit the question to correctly state the behaviour of that operator?"}, {"owner": {"reputation": 7720, "user_id": 349659, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/3db4a8e9aa5e19682c0a65fe31cf6702?s=128&d=identicon&r=PG", "display_name": "CTS_AE", "link": "https://stackoverflow.com/users/349659/cts-ae"}, "edited": false, "score": 0, "creation_date": 1548966632, "post_id": 32730327, "comment_id": 95745376, "body": "One annoyance to note is that pylint will complain that you&#39;re using a variable before its declaration even with the example: <code>if not var_name:</code>. Edit: nevermind it seems to be my scoping, using it in a function but having it defined outside (which is bad to start with, but I wanted to cache a variable/lookup)"}], "tags": [], "owner": {"reputation": 14487, "user_id": 2505965, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5056f8ef1dc81df419a479f24d5f80f5?s=128&d=identicon&r=PG", "display_name": "Oka", "link": "https://stackoverflow.com/users/2505965/oka"}, "is_accepted": true, "score": 26, "last_activity_date": 1442988592, "last_edit_date": 1592644375, "creation_date": 1442977795, "answer_id": 32730327, "question_id": 32729970, "link": "https://stackoverflow.com/questions/32729970/pythons-equivalent-of-rubys/32730327#32730327", "title": "Python&#39;s equivalent of Ruby&#39;s ||=", "body": "<p>I think there is some confusion from the people who aren't really sure what the conditional assignment operator (<code>||=</code>) does, and also some misunderstanding about how variables are spawned in Ruby.</p>\n<p>Everyone should read <a href=\"http://www.rubyinside.com/what-rubys-double-pipe-or-equals-really-does-5488.html\" rel=\"noreferrer\">this article</a> on the subject. A TLDR quote:</p>\n<blockquote>\n<p>A common misconception is that a ||= b is equivalent to a = a || b, but it behaves like a || a = b</p>\n<p>In a = a || b, a is set to something by the statement on every run, whereas with a || a = b, a is only set if a is logically false (i.e. if it's nil or false) because || is 'short circuiting'. That is, if the left hand side of the || comparison is true, there's no need to check the right hand side.</p>\n</blockquote>\n<p>And another very important note:</p>\n<blockquote>\n<p>...a variable assignment, even if not run, immediately summons that variable into being.</p>\n</blockquote>\n<pre><code># Ruby\nx = 10 if 2 == 5\nputs x\n</code></pre>\n<blockquote>\n<p>Even though the first line won't be run, x will exist on the second line and no exception will be raised.</p>\n</blockquote>\n<p>This means that Ruby will absolutely <em>ensure</em> that there is a variable container for a value to be placed into before any righthand conditionals take place. <code>||=</code> doesn't assign if <code>a</code> is <em>not defined</em>, it assigns if <code>a</code> is falsy (again, <code>false</code> or <code>nil</code> - <code>nil</code> being the default <em>nothingness</em> value in Ruby), whilst guaranteeing <code>a</code> <em>is</em> defined.</p>\n<h3>What does this mean for Python?</h3>\n<p>Well, if <code>a</code> is defined, the following:</p>\n<pre><code># Ruby\na ||= 10\n</code></pre>\n<p>is actually equivalent to:</p>\n<pre><code># Python\nif not a:\n    a = 10\n</code></pre>\n<p>while the following:</p>\n<pre><code># Either language\na = a or 10\n</code></pre>\n<p>is close, but it <em>always</em> assigns a value, whereas the previous examples do not.</p>\n<p>And if <code>a</code> is not defined the whole operation is closer to:</p>\n<pre><code># Python\na = None\nif not a:\n    a = 10\n</code></pre>\n<p>Because a very explicit example of what <code>a ||= 10</code> does when <code>a</code> is not defined would be:</p>\n<pre><code># Ruby\nif not defined? a\n    a = nil\nend\n\nif not a\n    a = 10\nend\n</code></pre>\n<p>At the end of the day, the <code>||=</code> operator is not <em>completely</em> translatable to Python in any kind of 'Pythonic' way, because of how it relies on the underlying variable spawning in Ruby.</p>\n"}], "owner": {"reputation": 14869, "user_id": 1794744, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/bed721a1153f97bdd0b31703673abee2?s=128&d=identicon&r=PG", "display_name": "cqcn1991", "link": "https://stackoverflow.com/users/1794744/cqcn1991"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2322, "favorite_count": 1, "accepted_answer_id": 32730327, "answer_count": 5, "score": 17, "last_activity_date": 1565642778, "creation_date": 1442974844, "last_edit_date": 1443049730, "question_id": 32729970, "link": "https://stackoverflow.com/questions/32729970/pythons-equivalent-of-rubys", "title": "Python&#39;s equivalent of Ruby&#39;s ||=", "body": "<p>To check if a variable exist, and if exits, use the original value, other wise, use the new value assigned. \nIn ruby, it's\n<code>var ||= var_new</code></p>\n\n<p>How to write it in python? </p>\n\n<p>PS:\nI don't know the <code>name</code> of <code>||=</code>, I simply can't search it in Bing.</p>\n"}, {"tags": ["c", "ruby", "macos", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 5233, "user_id": 414521, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/0ed12f2bb7ec4f26252d3e8328243861?s=128&d=identicon&r=PG", "display_name": "SSpoke", "link": "https://stackoverflow.com/users/414521/sspoke"}, "edited": false, "score": 1, "creation_date": 1442973252, "post_id": 32729758, "comment_id": 53301490, "body": "<a href=\"http://stackoverflow.com/questions/29317640/gem-install-rails-fails-on-ubuntu\" title=\"gem install rails fails on ubuntu\">stackoverflow.com/questions/29317640/&hellip;</a>"}, {"owner": {"reputation": 42504, "user_id": 1161878, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/0157ddd785dc01e95342e3661d34b42a?s=128&d=identicon&r=PG", "display_name": "Gene", "link": "https://stackoverflow.com/users/1161878/gene"}, "edited": false, "score": 0, "creation_date": 1442973397, "post_id": 32729758, "comment_id": 53301520, "body": "Homebrew or one of the other OS X package managers takes most of the pain out of installing open source on Mac."}, {"owner": {"reputation": 40466, "user_id": 33226, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/8f75007bcbcb8ba4daa408592e1c65ec?s=128&d=identicon&r=PG", "display_name": "Gavin Miller", "link": "https://stackoverflow.com/users/33226/gavin-miller"}, "edited": false, "score": 1, "creation_date": 1442973471, "post_id": 32729758, "comment_id": 53301539, "body": "Can you add contents of <code>mkmf.log</code>? Also are you running <code>homebrew</code>? If so, what&#39;s the output of <code>brew list | grep libxml2</code>?"}, {"owner": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 0, "creation_date": 1442973648, "post_id": 32729758, "comment_id": 53301585, "body": "Is it <code>nokogiri</code> that failed? That gem has <a href=\"http://stackoverflow.com/questions/19643153/error-to-install-nokogiri-on-osx-10-9-maverick\">special problems on OS X</a>."}, {"owner": {"reputation": 4446, "user_id": 696485, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4de94e14f977802057b0109d079d95a1?s=128&d=identicon&r=PG", "display_name": "Iskar Jarak", "link": "https://stackoverflow.com/users/696485/iskar-jarak"}, "edited": false, "score": 0, "creation_date": 1442973795, "post_id": 32729758, "comment_id": 53301613, "body": "<i>&quot;Check the mkmf.log file for more details.&quot;</i>"}], "answers": [{"tags": [], "owner": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "is_accepted": false, "score": 0, "last_activity_date": 1442973858, "last_edit_date": 1495542782, "creation_date": 1442973858, "answer_id": 32729856, "question_id": 32729758, "link": "https://stackoverflow.com/questions/32729758/downloading-rails-c-wont-compile/32729856#32729856", "title": "Downloading rails - C won&#39;t compile", "body": "<p>I believe this line indicates it's not a Rails problem but a problem with nokogiri.</p>\n\n<pre><code>Gem files will remain installed in /Users/XXX/.rvm/gems/ruby-2.2.1/gems/nokogiri-1.6.6.2 for inspection.\n</code></pre>\n\n<p>nokogiri has problems installing on OS X. Try <a href=\"https://stackoverflow.com/a/19807558/14660\">one of the solutions here</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 21, "user_id": 2536146, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e86b255432ec7c869ba3978ca118f084?s=128&d=identicon&r=PG", "display_name": "Michael Frazis", "link": "https://stackoverflow.com/users/2536146/michael-frazis"}, "is_accepted": false, "score": 0, "last_activity_date": 1443067425, "creation_date": 1443067425, "answer_id": 32753143, "question_id": 32729758, "link": "https://stackoverflow.com/questions/32729758/downloading-rails-c-wont-compile/32753143#32753143", "title": "Downloading rails - C won&#39;t compile", "body": "<p>It does seem like it's a nokogiri problem as gem install nokogiri runs up errors (and this is in line with all the stack exchange answers I've come across - I've tried about 20 of them and spent a few hours on this).</p>\n\n<p>Where do I find the mkmf.log file? </p>\n\n<p>These are what I have in gem:</p>\n\n<pre><code>activesupport-4.2.4         nokogiri-1.6.6.2\ni18n-0.7.0              nokogiri-1.6.7.rc3\nmini_portile-0.5.3          rails-deprecated_sanitizer-1.0.3\nmini_portile-0.6.2          thread_safe-0.3.5\nmini_portile-0.7.0.rc4          tree-0.2.1\nminitest-5.8.1              tzinfo-1.2.2\nnokogiri-1.6.1\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 23, "user_id": 418522, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8c3b8b7b87357333ed7dbfa08558cac?s=128&d=identicon&r=PG", "display_name": "Can Selcik", "link": "https://stackoverflow.com/users/418522/can-selcik"}, "is_accepted": false, "score": 0, "last_activity_date": 1457820931, "creation_date": 1457820931, "answer_id": 35963974, "question_id": 32729758, "link": "https://stackoverflow.com/questions/32729758/downloading-rails-c-wont-compile/35963974#35963974", "title": "Downloading rails - C won&#39;t compile", "body": "<p>Try the following on Ubuntu 14.04:</p>\n\n<blockquote>\n  <p>sudo apt-get install libgmp-dev</p>\n</blockquote>\n\n<p>After that you should be able to proceed with <code>bundle install</code>.</p>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2602252"}, "is_accepted": false, "score": 1, "last_activity_date": 1464065845, "last_edit_date": 1464065845, "creation_date": 1464065391, "answer_id": 37404623, "question_id": 32729758, "link": "https://stackoverflow.com/questions/32729758/downloading-rails-c-wont-compile/37404623#37404623", "title": "Downloading rails - C won&#39;t compile", "body": "<p>I was facing the same issue from past two weeks while trying to run a rails 3 version application. </p>\n\n<p><strong>The issue is that your rvm/rbenv is not using the C compiler.</strong></p>\n\n<p><strong>Use this command for rvm to take compatible C compiler</strong></p>\n\n<pre><code>CC=gcc rvm install-version\n</code></pre>\n\n<p>So if you are using Ruby 1.9.3, use it this way</p>\n\n<pre><code>CC=gcc rvm install-1.9.3\n</code></pre>\n\n<p><strong>Use this command every time you are not able to bundle install or anything.</strong>\nThis thing is working on El Capitan, rails 3.2.16, ruby 1.9.3, mysql 5.7\nHopefully, It will resolve the issue.</p>\n"}], "owner": {"reputation": 21, "user_id": 2536146, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e86b255432ec7c869ba3978ca118f084?s=128&d=identicon&r=PG", "display_name": "Michael Frazis", "link": "https://stackoverflow.com/users/2536146/michael-frazis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 264, "favorite_count": 0, "answer_count": 4, "score": -1, "last_activity_date": 1464065845, "creation_date": 1442973089, "last_edit_date": 1442973293, "question_id": 32729758, "link": "https://stackoverflow.com/questions/32729758/downloading-rails-c-wont-compile", "title": "Downloading rails - C won&#39;t compile", "body": "<p>I'm trying to download rails and have gone through every solution I can find. I have redownloaded Xcode (7.0 beta) and have installed command line tools separately, including running: \n    xcode-select --install\nwhich seems to work for most people with the same problem. I'm think I may have corrupted C header files. </p>\n\n<pre><code>checking if the C compiler accepts ... *** extconf.rb failed ***\n</code></pre>\n\n<p>Would massively appreciate any help!</p>\n\n<p>The full error code:</p>\n\n<pre><code>XXX-MacBook-Pro-2:~ XXX$ gem install rails\nBuilding native extensions.  This could take a while...\nERROR:  Error installing rails:\n    ERROR: Failed to build gem native extension.\n\n/Users/XXX/.rvm/rubies/ruby-2.2.1/bin/ruby -r ./siteconf20150923-10275-18xpyzg.rb extconf.rb\nchecking if the C compiler accepts ... *** extconf.rb failed ***\nCould not create Makefile due to some reason, probably lack of necessary\nlibraries and/or headers.  Check the mkmf.log file for more details.  You may\nneed configuration options.\n\nProvided configuration options:\n--with-opt-dir\n--without-opt-dir\n--with-opt-include\n--without-opt-include=${opt-dir}/include\n--with-opt-lib\n--without-opt-lib=${opt-dir}/lib\n--with-make-prog\n--without-make-prog\n--srcdir=.\n--curdir\n--ruby=/Users/XXX/.rvm/rubies/ruby-2.2.1/bin/$(RUBY_BASE_NAME)\n--help\n--clean\n/Users/XXX/.rvm/rubies/ruby-2.2.1/lib/ruby/2.2.0/mkmf.rb:456:in `try_do': The compiler failed to generate an executable file. (RuntimeError)\nYou have to install development tools first.\nfrom /Users/XXX/.rvm/rubies/ruby-2.2.1/lib/ruby/2.2.0/mkmf.rb:571:in `block in try_compile'\nfrom /Users/XXX/.rvm/rubies/ruby-2.2.1/lib/ruby/2.2.0/mkmf.rb:522:in `with_werror'\nfrom /Users/XXX/.rvm/rubies/ruby-2.2.1/lib/ruby/2.2.0/mkmf.rb:571:in `try_compile'\nfrom extconf.rb:80:in `nokogiri_try_compile'\nfrom extconf.rb:87:in `block in add_cflags'\nfrom /Users/XXX/.rvm/rubies/ruby-2.2.1/lib/ruby/2.2.0/mkmf.rb:619:in `with_cflags'\nfrom extconf.rb:86:in `add_cflags'\nfrom extconf.rb:337:in `&lt;main&gt;'\n\nextconf failed, exit code 1\n\nGem files will remain installed in /Users/XXX/.rvm/gems/ruby-2.2.1/gems/nokogiri-1.6.6.2 for inspection.\nResults logged to /Users/XXX/.rvm/gems/ruby-2.2.1/extensions/x86_64-darwin-14/2.2.0-static/nokogiri-1.6.6.2/gem_make.out\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "postgresql"], "comments": [{"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 1, "creation_date": 1442972211, "post_id": 32729634, "comment_id": 53301285, "body": "You could set it to <code>&#39;&#39;</code> or <code>0</code> (depending on the column type) when you create the record and then use an <code>after_save</code> callback."}, {"owner": {"reputation": 3814, "user_id": 667127, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e0208844fc9fce89fb51161781096fbf?s=128&d=identicon&r=PG", "display_name": "moeabdol", "link": "https://stackoverflow.com/users/667127/moeabdol"}, "edited": false, "score": 0, "creation_date": 1442973592, "post_id": 32729634, "comment_id": 53301566, "body": "When you rake db:migrate, rake will invoke a db transaction that will run in the background. The ID is determined during this transaction. This involves  tinkering with the ActiveRecord::Migration class. That is because when you rails g migration you are creating a migration that inherits from the aforementioned class. You can check rails project on github to see the inner-wrokings of activerecord <a href=\"https://github.com/rails/rails/blob/master/activerecord/lib/active_record/migration.rb\" rel=\"nofollow noreferrer\">github.com/rails/rails/blob/master/activerecord/lib/&hellip;</a>"}, {"owner": {"reputation": 3814, "user_id": 667127, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e0208844fc9fce89fb51161781096fbf?s=128&d=identicon&r=PG", "display_name": "moeabdol", "link": "https://stackoverflow.com/users/667127/moeabdol"}, "reply_to_user": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1442973977, "post_id": 32729634, "comment_id": 53301660, "body": "I personally believe that @Jordan &#39;s answer is the best solution."}, {"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 1, "creation_date": 1442976096, "post_id": 32729634, "comment_id": 53302136, "body": "Does this really need to be a column? If it is a fixed function of the row&#39;s <code>id</code> then why store it at all? Why not generate it when you need to show it to someone?"}], "answers": [{"comments": [{"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 1, "creation_date": 1442974277, "post_id": 32729704, "comment_id": 53301732, "body": "There&#39;s no guarantee that <code>maximum(:id)</code> won&#39;t change before you call <code>create</code>."}], "tags": [], "owner": {"reputation": 1634, "user_id": 319297, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/tyBYy.png?s=128&g=1", "display_name": "Zahid", "link": "https://stackoverflow.com/users/319297/zahid"}, "is_accepted": true, "score": 0, "last_activity_date": 1442972674, "creation_date": 1442972674, "answer_id": 32729704, "question_id": 32729634, "link": "https://stackoverflow.com/questions/32729634/base-value-in-column-on-id-but-constrained-to-not-null/32729704#32729704", "title": "Base value in column on id but constrained to not-null", "body": "<p>You could write your code in transaction block, where you first find the maximum value of <strong>id</strong> column in the given table and than use that ID value to generate value of other column. Will that work for you?</p>\n\n<pre><code>ActiveRecord::Base.transaction do\n  id = maximum(:id)\n  other_column = \"#{id} some string\"\n  create(other_column: other_column)\nend\n</code></pre>\n"}], "owner": {"reputation": 5764, "user_id": 1336532, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/93e5830761f6e85757991d5915369349?s=128&d=identicon&r=PG", "display_name": "Mahoni", "link": "https://stackoverflow.com/users/1336532/mahoni"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 1, "accepted_answer_id": 32729704, "answer_count": 1, "score": 1, "last_activity_date": 1442973446, "creation_date": 1442971950, "question_id": 32729634, "link": "https://stackoverflow.com/questions/32729634/base-value-in-column-on-id-but-constrained-to-not-null", "title": "Base value in column on id but constrained to not-null", "body": "<p>I want to generate a value in a column based on the database ID ActiveRecord assigns to my record. Normally, I would just add an after save callback where this value is generated and than saved to the database.</p>\n\n<p>Unfortunately,  I have to deal with a not-null constraint on that column, so it needs to be assigned at the same time when I get an ID. Is there a thread-safe way, to combine both?</p>\n"}, {"tags": ["javascript", "ruby-on-rails", "ruby"], "answers": [{"tags": [], "owner": {"reputation": 1888, "user_id": 4322357, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/8b45d8603128dd706074ab9f1544860e?s=128&d=identicon&r=PG&f=1", "display_name": "Cole Bittel", "link": "https://stackoverflow.com/users/4322357/cole-bittel"}, "is_accepted": false, "score": 1, "last_activity_date": 1442971991, "creation_date": 1442971991, "answer_id": 32729639, "question_id": 32729555, "link": "https://stackoverflow.com/questions/32729555/updating-a-rails-model-from-js-event/32729639#32729639", "title": "Updating a Rails Model From JS Event", "body": "<p>I'm not sure if you've done much research beforehand, because this is a very common thing to do.</p>\n\n<p>Your terminology is also wrong. You're not changing anything in the model. You're simply POSTing a value to your database. Do some research on <a href=\"http://www.w3schools.com/jquery/ajax_post.asp\" rel=\"nofollow\">AJAX</a> and then ask a more detailed, but concise question.</p>\n\n<p>There's nothing wrong with being a beginner, but please do research beforehand, and then create a Stack Overflow question only if that research has led to dead ends. Then create a question featuring what you already know and where you're stuck.</p>\n"}], "owner": {"reputation": 1, "user_id": 5361639, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c50dba4d4ecc6e1e81572224b2b9fe33?s=128&d=identicon&r=PG&f=1", "display_name": "HackerHumor", "link": "https://stackoverflow.com/users/5361639/hackerhumor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1442979445, "creation_date": 1442971397, "last_edit_date": 1442979445, "question_id": 32729555, "link": "https://stackoverflow.com/questions/32729555/updating-a-rails-model-from-js-event", "title": "Updating a Rails Model From JS Event", "body": "<p>I have been looking around and cannot seem to find out if it is common practice to update a Rails model attribute from a JS callback. </p>\n\n<p>In one of my views I have a datepicker that sends a callback once the value has been changed. I would like to save this date to the current model \"date\" attribute. </p>\n\n<pre><code>$('#datetimepicker4').on('dp.change', function (e) {\n  // SAVE THIS VALUE TO SPECIFIED MODEL ATTRIBUTE HERE\n}); \n</code></pre>\n\n<p>Any suggestions would be very much appreciated. Thanks!</p>\n\n<p>Edit: This is common practice, Ended up getting it working with the following ajax put request.</p>\n\n<pre><code>  $.ajax({\n  type: \"PUT\",\n  dataType: \"script\",\n  url: '/thread/27',\n  contentType: 'application/json',\n  data: JSON.stringify({ thread:{id:27, title:\"blaaahhh title\"}, _method:'put' })\n  }).done(function( msg )\n      {\n          alert( \"Data Saved: \" + msg );\n      });\n});\n</code></pre>\n"}, {"tags": ["ruby", "gem"], "comments": [{"owner": {"reputation": 4688, "user_id": 2116518, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Hwt8F.jpg?s=128&g=1", "display_name": "Nic Nilov", "link": "https://stackoverflow.com/users/2116518/nic-nilov"}, "edited": false, "score": 0, "creation_date": 1442971694, "post_id": 32729549, "comment_id": 53301164, "body": "Does <code>ruby -v</code> return a version? What kind of error it throws?"}, {"owner": {"reputation": 3029, "user_id": 1845654, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/c0bb6a6a2630ac25e7608faded40dd97?s=128&d=identicon&r=PG&f=1", "display_name": "James Okpe George", "link": "https://stackoverflow.com/users/1845654/james-okpe-george"}, "reply_to_user": {"reputation": 4688, "user_id": 2116518, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Hwt8F.jpg?s=128&g=1", "display_name": "Nic Nilov", "link": "https://stackoverflow.com/users/2116518/nic-nilov"}, "edited": false, "score": 0, "creation_date": 1442971771, "post_id": 32729549, "comment_id": 53301177, "body": "yes ruby -v returns &quot;ruby 2.2.1p85 (2015-02-26 revision 49769) [x86_64-linux] &quot;"}, {"owner": {"reputation": 4688, "user_id": 2116518, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Hwt8F.jpg?s=128&g=1", "display_name": "Nic Nilov", "link": "https://stackoverflow.com/users/2116518/nic-nilov"}, "edited": false, "score": 0, "creation_date": 1442971900, "post_id": 32729549, "comment_id": 53301204, "body": "What is the error you see when running <code>gem list</code>?"}, {"owner": {"reputation": 3029, "user_id": 1845654, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/c0bb6a6a2630ac25e7608faded40dd97?s=128&d=identicon&r=PG&f=1", "display_name": "James Okpe George", "link": "https://stackoverflow.com/users/1845654/james-okpe-george"}, "reply_to_user": {"reputation": 4688, "user_id": 2116518, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Hwt8F.jpg?s=128&g=1", "display_name": "Nic Nilov", "link": "https://stackoverflow.com/users/2116518/nic-nilov"}, "edited": false, "score": 0, "creation_date": 1442971979, "post_id": 32729549, "comment_id": 53301220, "body": "no error, only when I try to use the gem that I installed, it tells me that require cannot load such gem"}, {"owner": {"reputation": 4688, "user_id": 2116518, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Hwt8F.jpg?s=128&g=1", "display_name": "Nic Nilov", "link": "https://stackoverflow.com/users/2116518/nic-nilov"}, "edited": false, "score": 0, "creation_date": 1442972099, "post_id": 32729549, "comment_id": 53301248, "body": "You do use Gemfile and run your command with <code>bundle exec</code>, right? Although this is not strictly necessary it takes care of dependencies."}, {"owner": {"reputation": 3029, "user_id": 1845654, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/c0bb6a6a2630ac25e7608faded40dd97?s=128&d=identicon&r=PG&f=1", "display_name": "James Okpe George", "link": "https://stackoverflow.com/users/1845654/james-okpe-george"}, "reply_to_user": {"reputation": 4688, "user_id": 2116518, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Hwt8F.jpg?s=128&g=1", "display_name": "Nic Nilov", "link": "https://stackoverflow.com/users/2116518/nic-nilov"}, "edited": false, "score": 0, "creation_date": 1442972260, "post_id": 32729549, "comment_id": 53301297, "body": "naa, I doubt I know how to use Gemfile , I am very new to ruby, so I do not know what that is"}, {"owner": {"reputation": 4688, "user_id": 2116518, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Hwt8F.jpg?s=128&g=1", "display_name": "Nic Nilov", "link": "https://stackoverflow.com/users/2116518/nic-nilov"}, "edited": false, "score": 0, "creation_date": 1442972404, "post_id": 32729549, "comment_id": 53301328, "body": "Take a look at the <a href=\"http://bundler.io/gemfile.html\" rel=\"nofollow noreferrer\">bundler docs</a>. Otherwise it seems that your ruby process cannot find the gem you want because the path you supply in <code>require</code> resolves to something else than the correct one."}, {"owner": {"reputation": 3580, "user_id": 1680728, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/844cd73e8700d810d7cc207cba7da3bd?s=128&d=identicon&r=PG&f=1", "display_name": "Felix", "link": "https://stackoverflow.com/users/1680728/felix"}, "edited": false, "score": 0, "creation_date": 1442990697, "post_id": 32729549, "comment_id": 53306699, "body": "Consider using <a href=\"https://rvm.io\" rel=\"nofollow noreferrer\">rvm.io</a> right from the start. It basically allows you to install different ruby versions (and gems for that versions) in your home-folder, so you do not need root permissions and can &quot;safely&quot; play around."}, {"owner": {"reputation": 1297, "user_id": 5042431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8VZqF.jpg?s=128&g=1", "display_name": "Charles", "link": "https://stackoverflow.com/users/5042431/charles"}, "edited": false, "score": 0, "creation_date": 1443365186, "post_id": 32729549, "comment_id": 53454993, "body": "Are you using RVM? RVM takes care of gem installs if you have RVM, and installs gems per user, so using <code>sudo gem install &lt;gem&gt;</code> installs the gem for root only, not your user."}], "answers": [{"tags": [], "owner": {"reputation": 67, "user_id": 3859866, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47e7e36767c79096e120522a101818cf?s=128&d=identicon&r=PG&f=1", "display_name": "HEraju", "link": "https://stackoverflow.com/users/3859866/heraju"}, "is_accepted": false, "score": 0, "last_activity_date": 1443079529, "creation_date": 1443079529, "answer_id": 32755656, "question_id": 32729549, "link": "https://stackoverflow.com/questions/32729549/cant-find-installed-gems/32755656#32755656", "title": "Can&#39;t find installed gems", "body": "<p>Try installing RVM instead of ruby directly, this will install the required setting and it will be easier to beginners.</p>\n\n<p><a href=\"https://rvm.io/rvm/install\" rel=\"nofollow\">https://rvm.io/rvm/install</a> </p>\n"}], "owner": {"reputation": 3029, "user_id": 1845654, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/c0bb6a6a2630ac25e7608faded40dd97?s=128&d=identicon&r=PG&f=1", "display_name": "James Okpe George", "link": "https://stackoverflow.com/users/1845654/james-okpe-george"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 97, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1443079529, "creation_date": 1442971368, "question_id": 32729549, "link": "https://stackoverflow.com/questions/32729549/cant-find-installed-gems", "title": "Can&#39;t find installed gems", "body": "<p>I am very new to ruby, and am using Ubuntu , I installed ruby last week and have been using it ever since. But when I decided to start studying rails I realised the rails server will not start, I decided to reinstall ruby, and then rails, which I did successfully.</p>\n\n<p>But now when I install a ruby gem, I do not see it, not even when I type <code>gem list</code> on the terminal, it also throws an error when I try to run it in a program. I am very frustrated and do not know what to do..</p>\n"}, {"tags": ["ruby", "ubuntu", "rbenv"], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 5365673, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/153b279d43e0185e9d22c5ca34ed0911?s=128&d=identicon&r=PG&f=1", "display_name": "Neo", "link": "https://stackoverflow.com/users/5365673/neo"}, "edited": false, "score": 2, "creation_date": 1442977363, "post_id": 32729903, "comment_id": 53302424, "body": "I did that as well it still throws the same error message."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2908819"}, "is_accepted": false, "score": 0, "last_activity_date": 1442974335, "creation_date": 1442974335, "answer_id": 32729903, "question_id": 32729531, "link": "https://stackoverflow.com/questions/32729531/build-failed-error-when-trying-to-install-ruby-v-2-2-2-with-rbenv-on-ubuntu-14-0/32729903#32729903", "title": "Build failed error when trying to install ruby v 2.2.2 with rbenv on ubuntu 14.04.3 LTS", "body": "<p>The issue seems to arise from missing packages.</p>\n\n<p>This <a href=\"https://gorails.com/setup/ubuntu/14.04\" rel=\"nofollow\">article</a> details how to \"Setup Ruby On Rails on Ubuntu 14.04 Trusty Tahr\". Your question is answered in the \"Installing Ruby\" section of the article. </p>\n\n<p>To begin, install <strong>all</strong> the dependencies.</p>\n\n<pre><code>sudo apt-get update\nsudo apt-get install git-core curl zlib1g-dev build-essential libssl-dev libreadline-dev libyaml-dev libsqlite3-dev sqlite3 libxml2-dev libxslt1-dev libcurl4-openssl-dev python-software-properties libffi-dev\n</code></pre>\n\n<p>Now you can use rbenv to install ruby:</p>\n\n<pre><code>rbenv install 2.2.2\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 11092, "user_id": 504845, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/cfd7e02060bfb5c9bb36f956949623f6?s=128&d=identicon&r=PG", "display_name": "Nowaker", "link": "https://stackoverflow.com/users/504845/nowaker"}, "is_accepted": false, "score": 1, "last_activity_date": 1483553853, "creation_date": 1483553853, "answer_id": 41470632, "question_id": 32729531, "link": "https://stackoverflow.com/questions/32729531/build-failed-error-when-trying-to-install-ruby-v-2-2-2-with-rbenv-on-ubuntu-14-0/41470632#41470632", "title": "Build failed error when trying to install ruby v 2.2.2 with rbenv on ubuntu 14.04.3 LTS", "body": "<p>This is caused by GCC version mismatch. You have GCC version that is \"too new\" for this particular Ruby version. Here's how to overcome this problem.</p>\n\n<h1>rbenv</h1>\n\n<p><code>CFLAGS=\"-O2 -fno-tree-dce -fno-optimize-sibling-calls\" rbenv install [your-version]\n</code></p>\n\n<h1>rvm</h1>\n\n<p><code>CFLAGS=\"-O2 -fno-tree-dce -fno-optimize-sibling-calls\" rvm install [your-version]\n</code></p>\n"}], "owner": {"reputation": 21, "user_id": 5365673, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/153b279d43e0185e9d22c5ca34ed0911?s=128&d=identicon&r=PG&f=1", "display_name": "Neo", "link": "https://stackoverflow.com/users/5365673/neo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 487, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1483553853, "creation_date": 1442971252, "question_id": 32729531, "link": "https://stackoverflow.com/questions/32729531/build-failed-error-when-trying-to-install-ruby-v-2-2-2-with-rbenv-on-ubuntu-14-0", "title": "Build failed error when trying to install ruby v 2.2.2 with rbenv on ubuntu 14.04.3 LTS", "body": "<p>I was trying to install ruby v2.2.2 after having installed rbenv but I got this error. I am pretty new to Ubuntu and Ruby and wanted to know if there was a way to fix this. Thank you.</p>\n\n<pre><code>BUILD FAILED (Ubuntu 14.04 using ruby-build 20150818-4-g8d6ff29)\n\nInspect or clean up the working tree at /tmp/ruby-build.20150922205847.10469\nResults logged to /tmp/ruby-build.20150922205847.10469.log\n\nLast 10 log lines:\nchecking for gmp.h... no\nchecking for special C compiler options needed for large files... no\nchecking for _FILE_OFFSET_BITS value needed for large files... 64\nchecking whether byte ordering is bigendian... no\nchecking for an ANSI C-conforming const... yes\nchecking whether char is unsigned... no\nchecking for inline... no\nchecking for working volatile... no\nchecking for typeof syntax and keyword spelling... __typeof__\nconfigure: error: ANSI C-conforming const and volatile are mandatory\n</code></pre>\n\n<p>I have also done the following, but to no avail:</p>\n\n<pre><code>udo apt-get install autoconf bison build-essential libssl-dev libyaml-dev         libreadline6 libreadline6-dev zlib1g zlib1g-dev\n</code></pre>\n"}, {"tags": ["ruby", "gem", "rubygems"], "comments": [{"owner": {"reputation": 1634, "user_id": 319297, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/tyBYy.png?s=128&g=1", "display_name": "Zahid", "link": "https://stackoverflow.com/users/319297/zahid"}, "edited": false, "score": 0, "creation_date": 1442969939, "post_id": 32729295, "comment_id": 53300773, "body": "when installing gem specify version of the gem as well and see what you get."}, {"owner": {"reputation": 43, "user_id": 1482302, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/5fb9d4d0b19b914fcf846d9089d51195?s=128&d=identicon&r=PG", "display_name": "bhaskar", "link": "https://stackoverflow.com/users/1482302/bhaskar"}, "reply_to_user": {"reputation": 1634, "user_id": 319297, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/tyBYy.png?s=128&g=1", "display_name": "Zahid", "link": "https://stackoverflow.com/users/319297/zahid"}, "edited": false, "score": 0, "creation_date": 1443123517, "post_id": 32729295, "comment_id": 53378196, "body": "@Zahid the behaviour is the same even when version is specified"}], "answers": [{"tags": [], "owner": {"reputation": 43, "user_id": 1482302, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/5fb9d4d0b19b914fcf846d9089d51195?s=128&d=identicon&r=PG", "display_name": "bhaskar", "link": "https://stackoverflow.com/users/1482302/bhaskar"}, "is_accepted": false, "score": 0, "last_activity_date": 1443123912, "creation_date": 1443123912, "answer_id": 32769677, "question_id": 32729295, "link": "https://stackoverflow.com/questions/32729295/gem-install-with-file-system-as-source-installs-wrong-gem/32769677#32769677", "title": "gem install with file system as source installs wrong gem", "body": "<p>I debugged the gem installer code and found the following.\nFirst, the gem installer looks at the current directory to find the gems. It looks for *. It finds two gems (since i was running from the gems source directory) but sorts and reverse orders it and chooses the first one which is not the right gem. It does not do version check also when looking at the local directory. To workaround this i gave 'gem install bundler-1.10.6' which is working. By the way if i run 'gem install' from some other directory it is not able to find any gems from the 'file:' source.</p>\n"}], "owner": {"reputation": 43, "user_id": 1482302, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/5fb9d4d0b19b914fcf846d9089d51195?s=128&d=identicon&r=PG", "display_name": "bhaskar", "link": "https://stackoverflow.com/users/1482302/bhaskar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 47, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1443123912, "creation_date": 1442969328, "question_id": 32729295, "link": "https://stackoverflow.com/questions/32729295/gem-install-with-file-system-as-source-installs-wrong-gem", "title": "gem install with file system as source installs wrong gem", "body": "<p>I have just started working with Ruby. I am trying to install a gem with local file system as source. </p>\n\n<pre><code>$gem source\n*** CURRENT SOURCES ***\nfile:///home/fox/shared/\n</code></pre>\n\n<p>when i try to install 'bundler' gem it actually installs 'bundler-unload' gem as below.</p>\n\n<pre><code>$gem install bundler --bindir /usr/bin --no-ri --no-rdoc\nSuccessfully installed bundler-unload-1.0.2\n1 gem installed\n</code></pre>\n\n<p>the directory contains both the gems by the way.</p>\n\n<pre><code>bundler-unload-1.0.2.gem\nbundler-1.10.6.gem\n</code></pre>\n\n<p>Is there anything that I am missing here. Why would it install the wrong gem?</p>\n"}, {"tags": ["ruby", "rspec"], "comments": [{"owner": {"reputation": 1098, "user_id": 2675670, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/1843495af1974ff177bb80d0fbbd6343?s=128&d=identicon&r=PG", "display_name": "Richard", "link": "https://stackoverflow.com/users/2675670/richard"}, "edited": false, "score": 0, "creation_date": 1443189087, "post_id": 32729254, "comment_id": 53406138, "body": "Figured out that naming the spec files: <code>01_first_spec.rb</code>, <code>02_second_spec.rb</code>, <code>03_third_spec.rb</code>, and adding the <code>--order defined</code> flag seems to give me the desired results."}], "answers": [{"comments": [{"owner": {"reputation": 1098, "user_id": 2675670, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/1843495af1974ff177bb80d0fbbd6343?s=128&d=identicon&r=PG", "display_name": "Richard", "link": "https://stackoverflow.com/users/2675670/richard"}, "edited": false, "score": 1, "creation_date": 1442969843, "post_id": 32729337, "comment_id": 53300754, "body": "Very aware that the order of tests should not be important. In this case, it has to do with introducing concepts in a particular order."}, {"owner": {"reputation": 3814, "user_id": 667127, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e0208844fc9fce89fb51161781096fbf?s=128&d=identicon&r=PG", "display_name": "moeabdol", "link": "https://stackoverflow.com/users/667127/moeabdol"}, "reply_to_user": {"reputation": 1098, "user_id": 2675670, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/1843495af1974ff177bb80d0fbbd6343?s=128&d=identicon&r=PG", "display_name": "Richard", "link": "https://stackoverflow.com/users/2675670/richard"}, "edited": false, "score": 0, "creation_date": 1442970265, "post_id": 32729337, "comment_id": 53300842, "body": "are the classes you want to test in-order separated in different spec files?"}, {"owner": {"reputation": 1098, "user_id": 2675670, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/1843495af1974ff177bb80d0fbbd6343?s=128&d=identicon&r=PG", "display_name": "Richard", "link": "https://stackoverflow.com/users/2675670/richard"}, "edited": false, "score": 0, "creation_date": 1442970589, "post_id": 32729337, "comment_id": 53300912, "body": "yes, each class/rspec test represents a separate concept"}], "tags": [], "owner": {"reputation": 3814, "user_id": 667127, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e0208844fc9fce89fb51161781096fbf?s=128&d=identicon&r=PG", "display_name": "moeabdol", "link": "https://stackoverflow.com/users/667127/moeabdol"}, "is_accepted": false, "score": 2, "last_activity_date": 1442971789, "last_edit_date": 1442971789, "creation_date": 1442969737, "answer_id": 32729337, "question_id": 32729254, "link": "https://stackoverflow.com/questions/32729254/set-order-of-rspec-tests/32729337#32729337", "title": "Set order of RSpec tests", "body": "<p>Ordering tests is <strong>not recommended</strong> by almost all testing frameworks. That is part of making sure that tests are independent and don't yield unexpected behavior when order changes.</p>\n\n<p>However, if you want to run test files in specific order then you can accomplish that by writing scripts:</p>\n\n<h2>1. Shell Script</h2>\n\n<p>Consider the following script (ordered_test_script.sh):</p>\n\n<pre><code>for f in file1_spec.rb file2_spec.rb file3_spec.rb\ndo\n  rspec $f\ndone\n</code></pre>\n\n<p>Make sure the script is executable:</p>\n\n<pre><code>chmod +x ordered_test_script.sh\n</code></pre>\n\n<p>Then you can run the script:</p>\n\n<pre><code>./ordered_test_script.sh\n</code></pre>\n\n<h2>2. Ruby Script</h2>\n\n<p>First, you might want to extend the String class to include an underscore method:</p>\n\n<pre><code>class String\n  def underscore\n    self.gsub(/::/, '/').\n    gsub(/([A-Z]+)([A-Z][a-z])/,'\\1_\\2').\n    gsub(/([a-z\\d])([A-Z])/,'\\1_\\2').\n    tr(\"-\", \"_\").\n    downcase\n  end\nend\n</code></pre>\n\n<p>This will turn camelcase class names to underscore ones. For example (MyClass => my_class)</p>\n\n<pre><code>classes = %w(MyClass1 MyClass2 MyClass3)\n\nclasses.each do |c|\n  system(\"rspec #{c.to_s.underscore}_spec.rb\")\nend\n</code></pre>\n\n<p>Hope this helps.</p>\n"}, {"tags": [], "owner": {"reputation": 1098, "user_id": 2675670, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/1843495af1974ff177bb80d0fbbd6343?s=128&d=identicon&r=PG", "display_name": "Richard", "link": "https://stackoverflow.com/users/2675670/richard"}, "is_accepted": true, "score": 8, "last_activity_date": 1443605220, "creation_date": 1443605220, "answer_id": 32862522, "question_id": 32729254, "link": "https://stackoverflow.com/questions/32729254/set-order-of-rspec-tests/32862522#32862522", "title": "Set order of RSpec tests", "body": "<p>Name the <code>_spec.rb</code> files numerically:</p>\n\n<pre><code>01_first_spec.rb\n02_second_spec.rb\n...\n</code></pre>\n\n<p>Create a <code>.rspec</code> file</p>\n\n<pre><code># .rspec\n\n--order defined\n</code></pre>\n\n<p>Now, when running <code>rspec</code> the files should be executed in sorted order.</p>\n"}, {"tags": [], "owner": {"reputation": 2912, "user_id": 602419, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/7fdf51ba57d7d893e0f19e3246f742f4?s=128&d=identicon&r=PG", "display_name": "pdg137", "link": "https://stackoverflow.com/users/602419/pdg137"}, "is_accepted": false, "score": 1, "last_activity_date": 1526680984, "last_edit_date": 1526680984, "creation_date": 1526680535, "answer_id": 50419716, "question_id": 32729254, "link": "https://stackoverflow.com/questions/32729254/set-order-of-rspec-tests/50419716#50419716", "title": "Set order of RSpec tests", "body": "<p>Of course it's good practice to have randomization by default, but in some cases, such as when trying to track down order-related issues in your specs, or for documentation generation, it might be nice to specify a temporary order.</p>\n\n<p>You can specify a \"global\" ordering for some (or all) of your spec files as follows:</p>\n\n<pre><code>config.register_ordering(:global) do |items|\n  files = &lt;&lt;END.split(\"\\n\")\n./spec/some_spec.rb\n./spec/another_spec.rb\nEND\n  # Original RSpec random order\n  randomized = RSpec::Core::Ordering::Random.new(config).order(items)\n\n  # Now do a stable sort by filename index\n  randomized.sort_by.with_index do |example_group, index|\n    files.index(example_group.file_path) || files.size + index\n  end\nend\n</code></pre>\n\n<p>Documentation for <code>register_ordering</code> is available <a href=\"https://relishapp.com/rspec/rspec-core/docs/configuration/overriding-global-ordering\" rel=\"nofollow noreferrer\">on Relish</a>.</p>\n"}], "owner": {"reputation": 1098, "user_id": 2675670, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/1843495af1974ff177bb80d0fbbd6343?s=128&d=identicon&r=PG", "display_name": "Richard", "link": "https://stackoverflow.com/users/2675670/richard"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3069, "favorite_count": 0, "accepted_answer_id": 32862522, "answer_count": 3, "score": 6, "last_activity_date": 1614487104, "creation_date": 1442968842, "last_edit_date": 1614487104, "question_id": 32729254, "link": "https://stackoverflow.com/questions/32729254/set-order-of-rspec-tests", "title": "Set order of RSpec tests", "body": "<p>I'm building a test suite to teach OOP. I want the files in my <code>spec/lib</code> folder to be executed in a specific order.</p>\n<p>I would like to define an array of class names, and their test suite would be executed in order. For example:</p>\n<pre><code>spec_order = %w(\n  FirstClass\n  SecondClass\n  ThirdClass\n)\n</code></pre>\n<p>How might I accomplish this?</p>\n"}, {"tags": ["ruby"], "answers": [{"tags": [], "owner": {"reputation": 127, "user_id": 5365925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4c5de02772551d381ff5a9bf1a80219?s=128&d=identicon&r=PG&f=1", "display_name": "Hyung Cho", "link": "https://stackoverflow.com/users/5365925/hyung-cho"}, "is_accepted": true, "score": 1, "last_activity_date": 1442978865, "creation_date": 1442978865, "answer_id": 32730467, "question_id": 32729134, "link": "https://stackoverflow.com/questions/32729134/cant-get-ruby-method-to-pass-spec-for-anagram-method/32730467#32730467", "title": "Can&#39;t get Ruby method to pass spec for Anagram method", "body": "<pre><code>words_array.each do |word|\n  if (word.chars.sort) == (check_word.chars.sort)\n    true\n  else\n    false\n  end\nend\n</code></pre>\n\n<p>I'm assuming you want to <code>return true</code> if any words are anagrams. You're currently not explicitly returning.</p>\n\n<p>Better Ruby syntax would be <code>words_array.any? { |word| word.chars.sort == check_word.chars.sort) }</code></p>\n\n<p>OR</p>\n\n<pre><code>words_array.each do |word|\n  return true if (word.chars.sort) == (check_word.chars.sort)\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 0, "last_activity_date": 1443852427, "last_edit_date": 1495541197, "creation_date": 1443852427, "answer_id": 32919483, "question_id": 32729134, "link": "https://stackoverflow.com/questions/32729134/cant-get-ruby-method-to-pass-spec-for-anagram-method/32919483#32919483", "title": "Can&#39;t get Ruby method to pass spec for Anagram method", "body": "<p>Here's another way to see if two words <code>w1</code> and <code>w2</code> are anagrams of each other:</p>\n\n<pre><code>def anagrams?(w1, w2)\n  w1.size == w2.size &amp;&amp; w1.chars.difference(w2.chars).empty?\nend\n</code></pre>\n\n<p>where <code>Array#difference</code> is how I defined it in my answer <a href=\"https://stackoverflow.com/questions/24987054/how-to-select-unique-elements\">here</a>.</p>\n\n<p><code>Array#difference</code> is similar to <a href=\"http://ruby-doc.org/core-2.2.0/Array.html#method-i-2D\" rel=\"nofollow noreferrer\">Array#-</a>. The difference is illustrated in the following example:</p>\n\n<pre><code>a = [1,2,3,4,3,2,2,4]\nb = [2,3,4,4,4]\n\na     -      b #=&gt; [1]\na.difference b #=&gt; [1, 3, 2, 2] \n</code></pre>\n\n<p>Let's try it:</p>\n\n<pre><code>anagrams?(\"tops\", \"stop\")  #=&gt; true\nanagrams?(\"tops\", \"stopz\") #=&gt; false\nanagrams?(\"tops\", \"stopz\") #=&gt; false\nanagrams?(\"tops\", \"sto\")   #=&gt; false\n</code></pre>\n"}], "owner": {"reputation": 684, "user_id": 3810696, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Wikpc.png?s=128&g=1", "display_name": "Padawan", "link": "https://stackoverflow.com/users/3810696/padawan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 98, "favorite_count": 0, "accepted_answer_id": 32730467, "answer_count": 2, "score": -1, "last_activity_date": 1443852427, "creation_date": 1442967852, "last_edit_date": 1442968972, "question_id": 32729134, "link": "https://stackoverflow.com/questions/32729134/cant-get-ruby-method-to-pass-spec-for-anagram-method", "title": "Can&#39;t get Ruby method to pass spec for Anagram method", "body": "<p>I'm trying to get this to pass spec to verify if an argument is an anagram of another word, but it's just not happening. </p>\n\n<ul>\n<li>I can get the string (starting with just one sting word) into an array, and whether it's one or multiple words, </li>\n<li>It then iterates through the array over each word. </li>\n<li>Using the If statement to compare if the sorted object is equal to the sorted argument.</li>\n<li><p>Applied .join, since it came out one letter at a time in irb, but it's still not happening, with or without .join. </p>\n\n<pre><code>  class String\n    define_method(:anagrams) do |check_word|\n      words = self.downcase\n      check_word = check_word.downcase\n      words_array = words.split(\" \")\n\n      words_array.each do |word|\n        if (word.chars.sort) == (check_word.chars.sort)\n          true\n        else\n          false\n        end\n      end\n    end\n  end\n</code></pre></li>\n</ul>\n\n<p>Any ideas why it's broken?</p>\n"}, {"tags": ["ruby", "web-scraping", "nokogiri", "mechanize"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1442966635, "post_id": 32728920, "comment_id": 53300035, "body": "You do know that Yelp has an <a href=\"https://www.yelp.com/developers/documentation/v2/overview\" rel=\"nofollow noreferrer\">API</a>, which should remove the need to scrape their pages, right?"}, {"owner": {"reputation": 276, "user_id": 2850975, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/qavgt.jpg?s=128&g=1", "display_name": "TCannadySF", "link": "https://stackoverflow.com/users/2850975/tcannadysf"}, "reply_to_user": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1442966941, "post_id": 32728920, "comment_id": 53300110, "body": "@theTinMan I&#39;m new to API&#39;s but took a peek at theirs before going the scraping route. I couldn&#39;t find anything in terns of filters (WiFi). Would value any tips/direction if you happen to see it."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1442967077, "post_id": 32728920, "comment_id": 53300155, "body": "I&#39;d send a note to their API support. It&#39;s always better to see what they support first. You can also get their code, figure out how to add it if it&#39;s not already there and submit a pull request. It&#39;s only as a final resort that you should revert to scraping. Scraping is slower, more likely to break, and more likely to run afoul of their terms of service causing your code to be banned."}, {"owner": {"reputation": 276, "user_id": 2850975, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/qavgt.jpg?s=128&g=1", "display_name": "TCannadySF", "link": "https://stackoverflow.com/users/2850975/tcannadysf"}, "reply_to_user": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1442967392, "post_id": 32728920, "comment_id": 53300243, "body": "@theTinMan I didn&#39;t know API&#39;s were that flexible and approachable. Thanks for the insight."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1442969821, "post_id": 32728920, "comment_id": 53300750, "body": "APIs are <i>supposed</i> to offer the same data as a UI in a standardized manner. They&#39;re faster and use less CPU than rendering a UI or scraping. If they don&#39;t have a way of getting to the data you want, then they should and there&#39;s your opportunity to get what you want via a more robust method."}], "owner": {"reputation": 276, "user_id": 2850975, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/qavgt.jpg?s=128&g=1", "display_name": "TCannadySF", "link": "https://stackoverflow.com/users/2850975/tcannadysf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 114, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1442966186, "creation_date": 1442966186, "question_id": 32728920, "link": "https://stackoverflow.com/questions/32728920/how-to-click-lis-using-mechanize", "title": "How to click LI&#39;s using Mechanize?", "body": "<p>I've only scraped static pages using Nokogiri. I've never tried automation, and I'm currently seeing if Mechanize can do what I need.</p>\n\n<p>Assuming I'm already on the search results page for a city in Yelp, I'm trying to click a few items using Mechanize. The goal is to get to the WiFi section which is somewhat deep in the filters. </p>\n\n<p>After some troubleshooting, I think I realized the problem is that the parse isn't showing the LI that I need to click. I think Mechanize can handle things like links and forms, but will it be able to click on a LI?</p>\n\n<p>Here's what I'm using:</p>\n\n<pre><code>require 'mechanize'\n\nagent = Mechanize.new\n\npage = agent.get('http://www.yelp.com/search?find_desc=&amp;find_loc=San+Francisco%2C+CA&amp;ns=1')\n\nall_filters = agent.page.at('.all-filters-toggle')\n\np agent.click(all_filters)\n</code></pre>\n\n<p>This is giving me a list of what appears to be all the links on the page. I noticed it jumps from the blue \"Category\" items into the search results list. In other words, the Filters are skipped.</p>\n\n<ol>\n<li>Is there a way to do this with Mechanize?</li>\n<li>Is the code above somewhat correct? I figure the result of print it out should be the entire page, including the newly-toggled items.</li>\n</ol>\n\n<p>Here's some steps to come afterwards in order to reach the WiFi search: </p>\n\n<pre><code># search a city based on user input\n# click on All Filters (list item)\n# click on More Features (link)\n# click on Wi-Fi (link)\n# select both Free and Paid (checkboxes)\n# click Search (button/form?)\n# store results\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "heroku", "rake-task"], "owner": {"reputation": 314, "user_id": 3181644, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/9c71298986d9ba855dadcc45c498fa17?s=128&d=identicon&r=PG&f=1", "display_name": "Mene", "link": "https://stackoverflow.com/users/3181644/mene"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 124, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1442963646, "creation_date": 1442963646, "question_id": 32728520, "link": "https://stackoverflow.com/questions/32728520/rails4-custom-rake-task-with-loaded-concerns-on-heroku", "title": "Rails4 Custom Rake Task with loaded Concerns on Heroku", "body": "<p>I'm new to custom rake tasks.\nI'm trying to delete events which creation isn't completed by user</p>\n\n<p>Event has nested model \"Banner\", which is a Document model sub <code>(Banner&lt;Document)</code>, used for uploading banner image.\nBanner shares a concerns with other image models (like avatarUploadable and is load in model/banner.rb with</p>\n\n<pre><code>include Uploadable\n</code></pre>\n\n<p>Uploading works properly</p>\n\n<pre><code>#event.rb\nhas_one :banner, as: :documentable, class_name: \"Banner\", dependent: :destroy\n</code></pre>\n\n<p>-</p>\n\n<pre><code>#banner.rb\nclass Hero &lt; Document\ninclude Uploadable\n</code></pre>\n\n<p>-</p>\n\n<pre><code>#document.rb\nclass Document &lt; ActiveRecord::Base\nbelongs_to :documentable, polymorphic: true\n</code></pre>\n\n<p>-</p>\n\n<pre><code>#cleanup.rake\nnamespace :cleanup do\n  desc \"removes stale and inactive events from the database\"\n     task events: :environment do\n        stale_events = Event.where(\"DATE(created_at) &lt; DATE(?)\", Date.yesterday).where.not(status: 'active')\n        stale_events.map(&amp;:destroy)\n        puts \"TASK FINISHED - UNCOMPLETED EVENTS DELETED!\"\n    end\n  end\n</code></pre>\n\n<p>When I try to run <code>rake cleanup:events</code> everything works fine locally.</p>\n\n<p>However, in production environment, <code>heroku run bundle exec rake cleanup:events</code>\ngenerates this error message :</p>\n\n<pre><code>rake aborted!\nNameError: uninitialized constant Banner::Uploadable\n</code></pre>\n\n<p>I can't figure out how to solve that. How can I load the concerns properly for rake?\nThank you for your help</p>\n"}, {"tags": ["ios", "ruby", "installation", "cocoapods"], "comments": [{"owner": {"reputation": 11736, "user_id": 1987838, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2tIuS.jpg?s=128&g=1", "display_name": "Hackerman", "link": "https://stackoverflow.com/users/1987838/hackerman"}, "edited": false, "score": 1, "creation_date": 1442963859, "post_id": 32728498, "comment_id": 53299246, "body": "possible duplicate of <a href=\"http://stackoverflow.com/questions/16049335/cocoapods-pod-install-permission-denied\">cocoaPods pod install Permission denied</a>"}, {"owner": {"reputation": 10190, "user_id": 5236226, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/ffj4X.jpg?s=128&g=1", "display_name": "Caleb Kleveter", "link": "https://stackoverflow.com/users/5236226/caleb-kleveter"}, "reply_to_user": {"reputation": 11736, "user_id": 1987838, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2tIuS.jpg?s=128&g=1", "display_name": "Hackerman", "link": "https://stackoverflow.com/users/1987838/hackerman"}, "edited": false, "score": 0, "creation_date": 1443011781, "post_id": 32728498, "comment_id": 53320097, "body": "@Hackerman, thanks for the link. The reason those solutions won&#39;t help me is because they all require sudo, since I don&#39;t have an administrator account I can&#39;t use sudo. The other solution of installing RVM I looked into, but I had trouble installing it. (Maybe because I&#39;m not an admin?)"}], "answers": [{"comments": [{"owner": {"reputation": 10190, "user_id": 5236226, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/ffj4X.jpg?s=128&g=1", "display_name": "Caleb Kleveter", "link": "https://stackoverflow.com/users/5236226/caleb-kleveter"}, "edited": false, "score": 0, "creation_date": 1443012189, "post_id": 32728694, "comment_id": 53320383, "body": "I look at that, and I was kind of confused, do I just copy and paste the commands into terminal? And is there anything I can&#39;t do with cocoapods because of not using sudo?"}], "tags": [], "owner": {"reputation": 48, "user_id": 3438662, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/83884a9d106585e1af05ae6c5a29380d?s=128&d=identicon&r=PG&f=1", "display_name": "PiotrekSo91", "link": "https://stackoverflow.com/users/3438662/piotrekso91"}, "is_accepted": true, "score": 3, "last_activity_date": 1442964677, "creation_date": 1442964677, "answer_id": 32728694, "question_id": 32728498, "link": "https://stackoverflow.com/questions/32728498/what-privileges-do-i-lose-when-i-install-cocoapods-without-sudo/32728694#32728694", "title": "What privileges do I lose when I install cocoapods without sudo?", "body": "<p>Look at cocoapods documentation:\n<a href=\"https://guides.cocoapods.org/using/getting-started.html#sudo-less-installation\" rel=\"nofollow\">https://guides.cocoapods.org/using/getting-started.html#sudo-less-installation</a></p>\n"}], "owner": {"reputation": 10190, "user_id": 5236226, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/ffj4X.jpg?s=128&g=1", "display_name": "Caleb Kleveter", "link": "https://stackoverflow.com/users/5236226/caleb-kleveter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2526, "favorite_count": 1, "accepted_answer_id": 32728694, "answer_count": 1, "score": 0, "last_activity_date": 1444061338, "creation_date": 1442963476, "last_edit_date": 1444061338, "question_id": 32728498, "link": "https://stackoverflow.com/questions/32728498/what-privileges-do-i-lose-when-i-install-cocoapods-without-sudo", "title": "What privileges do I lose when I install cocoapods without sudo?", "body": "<p>I want to install CocoaPods, but I don't have an administrator account, meaning I can't use sudo. Can I install CocoaPods without <code>sudo</code>, and if I can what privileges do I loose?</p>\n\n<h2>Update</h2>\n\n<p>I tried <code>gem install cocoapods --user-install</code> and I got this output:</p>\n\n<pre><code>/usr/local/Cellar/ruby/2.2.2/lib/ruby/2.2.0/yaml.rb:4:in `&lt;top (required)&gt;':\nIt seems your ruby installation is missing psych (for YAML output).\nTo eliminate this warning, please install libyaml and reinstall your ruby.\n/usr/local/Cellar/ruby/2.2.2/lib/ruby/2.2.0/rubygems/core_ext/kernel_require.rb:54:in `require': dlopen(/usr/local/lib/ruby/gems/2.2.0/extensions/x86_64-darwin-14/2.2.0/psych-2.0.13/psych.bundle, 9): Library not loaded: /usr/local/lib/libruby.2.2.0.dylib (LoadError)\n  Referenced from: /usr/local/lib/ruby/gems/2.2.0/extensions/x86_64-darwin-14/2.2.0/psych-2.0.13/psych.bundle\n  Reason: image not found - /usr/local/lib/ruby/gems/2.2.0/extensions/x86_64-darwin-14/2.2.0/psych-2.0.13/psych.bundle\n    from /usr/local/Cellar/ruby/2.2.2/lib/ruby/2.2.0/rubygems/core_ext/kernel_require.rb:54:in `require'\n    from /usr/local/lib/ruby/gems/2.2.0/gems/psych-2.0.13/lib/psych.rb:1:in `&lt;top (required)&gt;'\n    from /usr/local/Cellar/ruby/2.2.2/lib/ruby/2.2.0/rubygems/core_ext/kernel_require.rb:54:in `require'\n    from /usr/local/Cellar/ruby/2.2.2/lib/ruby/2.2.0/rubygems/core_ext/kernel_require.rb:54:in `require'\n    from /usr/local/Cellar/ruby/2.2.2/lib/ruby/2.2.0/yaml.rb:5:in `&lt;top (required)&gt;'\n    from /usr/local/Cellar/ruby/2.2.2/lib/ruby/2.2.0/rubygems/core_ext/kernel_require.rb:54:in `require'\n    from /usr/local/Cellar/ruby/2.2.2/lib/ruby/2.2.0/rubygems/core_ext/kernel_require.rb:54:in `require'\n    from /usr/local/Cellar/ruby/2.2.2/lib/ruby/2.2.0/rubygems.rb:624:in `load_yaml'\n    from /usr/local/Cellar/ruby/2.2.2/lib/ruby/2.2.0/rubygems/config_file.rb:328:in `load_file'\n    from /usr/local/Cellar/ruby/2.2.2/lib/ruby/2.2.0/rubygems/config_file.rb:197:in `initialize'\n    from /usr/local/Cellar/ruby/2.2.2/lib/ruby/2.2.0/rubygems/gem_runner.rb:74:in `new'\n    from /usr/local/Cellar/ruby/2.2.2/lib/ruby/2.2.0/rubygems/gem_runner.rb:74:in `do_configuration'\n    from /usr/local/Cellar/ruby/2.2.2/lib/ruby/2.2.0/rubygems/gem_runner.rb:39:in `run'\n    from /usr/local/bin/gem:21:in `&lt;main&gt;'\n</code></pre>\n\n<p>The other solution of installing RVM I looked into, but I had trouble installing it. (Maybe because I'm not an admin?) </p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 20735, "user_id": 307106, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/6a13e655e637138f8d571cec3f9cea76?s=128&d=identicon&r=PG", "display_name": "jrochkind", "link": "https://stackoverflow.com/users/307106/jrochkind"}, "edited": false, "score": 0, "creation_date": 1442956889, "post_id": 32727118, "comment_id": 53296630, "body": "What happens when you try what you describe? What about it doesn&#39;t work, or works differently than you expect? Do you get an error? Do you get different behavior than you expect, and if so how?"}, {"owner": {"reputation": 37, "user_id": 5357184, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/1dfec7889660c5d1a02221c5f365bffc?s=128&d=identicon&r=PG&f=1", "display_name": "MDS0LDI3R", "link": "https://stackoverflow.com/users/5357184/mds0ldi3r"}, "reply_to_user": {"reputation": 20735, "user_id": 307106, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/6a13e655e637138f8d571cec3f9cea76?s=128&d=identicon&r=PG", "display_name": "jrochkind", "link": "https://stackoverflow.com/users/307106/jrochkind"}, "edited": false, "score": 0, "creation_date": 1442961660, "post_id": 32727118, "comment_id": 53298524, "body": "The rspec test was indicating that I was not calling the calculate_word_frequency method from within the Initialize method. The rspec test was likely reporting this due to me not dealing properly with local vs instance variables and so the rspec test wasn&#39;t seeing the output needed during it&#39;s testing of the code to confirm I was indeed calling the method."}], "answers": [{"comments": [{"owner": {"reputation": 37, "user_id": 5357184, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/1dfec7889660c5d1a02221c5f365bffc?s=128&d=identicon&r=PG&f=1", "display_name": "MDS0LDI3R", "link": "https://stackoverflow.com/users/5357184/mds0ldi3r"}, "edited": false, "score": 0, "creation_date": 1442962723, "post_id": 32727197, "comment_id": 53298877, "body": "When I a change <code>highest_wf_words</code> and <code>highest_wf_count</code> to instance variables (<code>@highest_wf_words</code> and <code>@ highest_wf_count </code>) there is no change in rspec&#39;s test results for the initialize method. When I then add the <code>calculate_word_frequency()</code> line to the initialize method the rspec says everything fails except calling the calculate_word_frequency method. Do I need to at some point say <code>@highest_wf_words = highest_wf_words</code> and <code>@highest_wf_count = highest_wf_counts</code>?"}, {"owner": {"reputation": 16564, "user_id": 1261399, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/679444399bbf92e3a5d3f16347809f3f?s=128&d=identicon&r=PG", "display_name": "Leo Correa", "link": "https://stackoverflow.com/users/1261399/leo-correa"}, "reply_to_user": {"reputation": 37, "user_id": 5357184, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/1dfec7889660c5d1a02221c5f365bffc?s=128&d=identicon&r=PG&f=1", "display_name": "MDS0LDI3R", "link": "https://stackoverflow.com/users/5357184/mds0ldi3r"}, "edited": false, "score": 0, "creation_date": 1442962810, "post_id": 32727197, "comment_id": 53298907, "body": "In order to get a better context as to why your specs are failing it would be good to post the <code>spec</code> that is failing. The fix in my answer is still valid even if it doesn&#39;t fix your spec."}], "tags": [], "owner": {"reputation": 16564, "user_id": 1261399, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/679444399bbf92e3a5d3f16347809f3f?s=128&d=identicon&r=PG", "display_name": "Leo Correa", "link": "https://stackoverflow.com/users/1261399/leo-correa"}, "is_accepted": true, "score": 0, "last_activity_date": 1442957035, "creation_date": 1442957035, "answer_id": 32727197, "question_id": 32727118, "link": "https://stackoverflow.com/questions/32727118/ruby-how-to-call-method-within-the-initializer-method-for-a-class/32727197#32727197", "title": "Ruby: How to &quot;call method&quot; within the Initializer method for a class?", "body": "<p>You're right on calling the <code>calculate_word_frequency()</code> from the initialize method. </p>\n\n<p>Where you're not getting the right output is that the instructions tell you:</p>\n\n<pre><code>#Implement the calculate_word_frequency() method to:\n#* calculate the maximum number of times a single word appears within\n#  provided content and store that in the highest_wf_count attribute.\n#* identify the words that were used the maximum number of times and\n#  store that in the highest_wf_words attribute.\n#* identify the words that were used the maximum number of times and\n# store that in the highest_wf_words attribute.\n</code></pre>\n\n<p>From your code </p>\n\n<pre><code>def calculate_word_frequency()\n  words = content.split(\" \")\n  frequency = Hash.new\n  highest_wf_count = Hash.new\n  highest_wf_words = Hash.new\n  words.each { |word| frequencies[word.downcase] += 1}\n  frequencies = frequency.sort_by {|a, b| b }\n  frequencies.reverse!\n  highest_wf_count = frequencies.values[0].push\n  highest_wf_words = frequencies.keys[0].push\nend\n</code></pre>\n\n<p>You're simply storing the results in a local variable called <code>highest_wf_words</code> and <code>highest_wf_count</code>. I'm assuming when the tests call for <code>your_instance.highest_wf_words</code> it's attempting to read the instance variable value and returning <code>nil</code> since it hasn't been initialized.</p>\n\n<p>The fix is simply to assign the value to the instance variable <code>@highest_wf_words</code> and <code>@highest_wf_count</code> instead of a local variable. </p>\n"}, {"tags": [], "owner": {"reputation": 33, "user_id": 6305772, "user_type": "registered", "profile_image": "https://graph.facebook.com/1186608684683199/picture?type=large", "display_name": "Chantal", "link": "https://stackoverflow.com/users/6305772/chantal"}, "is_accepted": false, "score": 0, "last_activity_date": 1517791876, "last_edit_date": 1517791876, "creation_date": 1517790742, "answer_id": 48614413, "question_id": 32727118, "link": "https://stackoverflow.com/questions/32727118/ruby-how-to-call-method-within-the-initializer-method-for-a-class/48614413#48614413", "title": "Ruby: How to &quot;call method&quot; within the Initializer method for a class?", "body": "<p>Just for future reference in case someone else needs a little help here. \nI believe the order of the attributes should be accessors in the following order + calling calculate_word_frequency like this: </p>\n\n<pre><code>attr_accessor :content,\n              :line_number,\n              :highest_wf_count,\n              :highest_wf_words\n\ndef initialize(content, line_number)\n  @content = content\n  @line_number = line_number\n  @highest_wf_count = 0\n  @highest_wf_words = 0\n  calculate_word_frequency(content)\nend\n</code></pre>\n"}], "owner": {"reputation": 37, "user_id": 5357184, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/1dfec7889660c5d1a02221c5f365bffc?s=128&d=identicon&r=PG&f=1", "display_name": "MDS0LDI3R", "link": "https://stackoverflow.com/users/5357184/mds0ldi3r"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1299, "favorite_count": 0, "accepted_answer_id": 32727197, "answer_count": 2, "score": -1, "last_activity_date": 1517791876, "creation_date": 1442956673, "question_id": 32727118, "link": "https://stackoverflow.com/questions/32727118/ruby-how-to-call-method-within-the-initializer-method-for-a-class", "title": "Ruby: How to &quot;call method&quot; within the Initializer method for a class?", "body": "<p>I am currently working on writing a class that has two methods. The first method is an initialize method and the second is a method that calculates the most frequent word in a line of text that has been fed into it. I am given instructions of the what methods in the class are suppose to accomplish in the form of comments. One such instruction to be implemented in the initialize method, that I don't understand what is exactly being asked of me is:</p>\n\n<blockquote>\n  <p>#* call the calculate_word_frequency() method.</p>\n</blockquote>\n\n<p>I have tried the following to perform the instructions but I fear I simply don't understand the context of the instructions:</p>\n\n<pre><code>def initialize(content, line_number)\n  @content = content\n  @line_number = line_number\n  calculate_word_frequency()\nend\n</code></pre>\n\n<p>I am provided a way to self test if the code performs the expected duties with a rspec testing unit so I know this doesn't produce the results expected. </p>\n\n<p>Additionally, I am having trouble finding examples in which the initialize method in a class is used for anything other than initializing input variables. I thought this may be a helpful direction to look into with my problem for understanding how calling on another method from within the same class, in the initialize method, accomplishes anything. </p>\n\n<p>Code with instructions in the form of comments: </p>\n\n<pre><code>#Implement a class called LineAnalyzer.\nclass LineAnalyzer\n    #Implement the following read-only attributes in the LineAnalyzer class.\n    #* highest_wf_count - a number with maximum number of occurrences for a single word (calculated)\n    #* highest_wf_words - an array of words with the maximum number of occurrences (calculated)\n    #* content,         - the string analyzed (provided)\n    #* line_number      - the line number analyzed (provided)\n  attr_reader :highest_wf_count, :highest_wf_words, :content, :line_number\n\n  #Add the following methods in the LineAnalyzer class.\n  #* initialize() - taking a line of text (content) and a line number\n  #* calculate_word_frequency() - calculates result\n\n    #Implement the initialize() method to:\n    #* take in a line of text and line number\n    #* initialize the content and line_number attributes\n    #* call the calculate_word_frequency() method.\n  def initialize(content, line_number)\n    @content = content\n    @line_number = line_number\n  end\n\n    #Implement the calculate_word_frequency() method to:\n    #* calculate the maximum number of times a single word appears within\n    #  provided content and store that in the highest_wf_count attribute.\n    #* identify the words that were used the maximum number of times and\n    #  store that in the highest_wf_words attribute.\n  def calculate_word_frequency()\n    words = content.split(\" \")\n    frequency = Hash.new\n    highest_wf_count = Hash.new\n    highest_wf_words = Hash.new\n    words.each { |word| frequencies[word.downcase] += 1}\n    frequencies = frequency.sort_by {|a, b| b }\n    frequencies.reverse!\n    highest_wf_count = frequencies.values[0].push\n    highest_wf_words = frequencies.keys[0].push\n  end\nend\n</code></pre>\n\n<p>Any help on interpreting what the instruction in question is meaning to have accomplished by calling an outside method from within the initialize method or how to call outside methods from within a method appreciated.</p>\n"}, {"tags": ["ruby", "regex", "sensu"], "comments": [{"owner": {"reputation": 463, "user_id": 3518575, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/da1296b6f19040f49150a70b01aeca1a?s=128&d=identicon&r=PG&f=1", "display_name": "XOR-Manik", "link": "https://stackoverflow.com/users/3518575/xor-manik"}, "edited": false, "score": 0, "creation_date": 1442955940, "post_id": 32726795, "comment_id": 53296190, "body": "May be try something like this: [\\s?[\\w ]+\\s]?ERROR \\s?[\\w ]+"}, {"owner": {"reputation": 632, "user_id": 3277666, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ReRen.png?s=128&g=1", "display_name": "beardedeagle", "link": "https://stackoverflow.com/users/3277666/beardedeagle"}, "reply_to_user": {"reputation": 463, "user_id": 3518575, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/da1296b6f19040f49150a70b01aeca1a?s=128&d=identicon&r=PG&f=1", "display_name": "XOR-Manik", "link": "https://stackoverflow.com/users/3518575/xor-manik"}, "edited": false, "score": 0, "creation_date": 1442956182, "post_id": 32726795, "comment_id": 53296316, "body": "CheckLog OK: 0 warnings, 0 criticals for pattern /[\\s?[\\w ]+\\s]?ERROR \\s?[\\w ]+/.  Thanks though."}], "answers": [{"comments": [{"owner": {"reputation": 632, "user_id": 3277666, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ReRen.png?s=128&g=1", "display_name": "beardedeagle", "link": "https://stackoverflow.com/users/3277666/beardedeagle"}, "edited": false, "score": 0, "creation_date": 1442962227, "post_id": 32727442, "comment_id": 53298733, "body": "I got a error running that particular check. I even tries &#39;/*ERROR.*/&#39; and got back the same falsely passing. You can see the error here: <a href=\"https://gist.github.com/beardedeagle/8058203040acc921cf8e\" rel=\"nofollow noreferrer\">gist.github.com/beardedeagle/8058203040acc921cf8e</a>"}, {"owner": {"reputation": 33893, "user_id": 498256, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Pn7lt.jpg?s=128&g=1", "display_name": "BMW", "link": "https://stackoverflow.com/users/498256/bmw"}, "reply_to_user": {"reputation": 632, "user_id": 3277666, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ReRen.png?s=128&g=1", "display_name": "beardedeagle", "link": "https://stackoverflow.com/users/3277666/beardedeagle"}, "edited": false, "score": 0, "creation_date": 1442974264, "post_id": 32727442, "comment_id": 53301729, "body": "I still see the <code>&#47;</code> in the result, please make sure you didn&#39;t add it some else."}, {"owner": {"reputation": 632, "user_id": 3277666, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ReRen.png?s=128&g=1", "display_name": "beardedeagle", "link": "https://stackoverflow.com/users/3277666/beardedeagle"}, "edited": false, "score": 0, "creation_date": 1442974647, "post_id": 32727442, "comment_id": 53301815, "body": "Completely removed and ran the command verbatim. Reading rubydocs it appears to be an exception that get raised for invalid regex: <a href=\"http://apidock.com/ruby/RegexpError\" rel=\"nofollow noreferrer\">apidock.com/ruby/RegexpError</a>"}, {"owner": {"reputation": 632, "user_id": 3277666, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ReRen.png?s=128&g=1", "display_name": "beardedeagle", "link": "https://stackoverflow.com/users/3277666/beardedeagle"}, "edited": false, "score": 0, "creation_date": 1442975295, "post_id": 32727442, "comment_id": 53301945, "body": "so. you were 99% right. I did need to delete the cache folder. However the regex should be &#39;.*ERROR.*&#39;"}, {"owner": {"reputation": 33893, "user_id": 498256, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Pn7lt.jpg?s=128&g=1", "display_name": "BMW", "link": "https://stackoverflow.com/users/498256/bmw"}, "reply_to_user": {"reputation": 632, "user_id": 3277666, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ReRen.png?s=128&g=1", "display_name": "beardedeagle", "link": "https://stackoverflow.com/users/3277666/beardedeagle"}, "edited": false, "score": 0, "creation_date": 1442976162, "post_id": 32727442, "comment_id": 53302152, "body": "Thanks to point that, I did the test with <code>-q &#39;ERROR&#39;</code> and <code>-q &#39;.*ERROR.*&#39;</code> , both are working, but when copy/paste, some typo, I have fixed."}, {"owner": {"reputation": 33893, "user_id": 498256, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Pn7lt.jpg?s=128&g=1", "display_name": "BMW", "link": "https://stackoverflow.com/users/498256/bmw"}, "reply_to_user": {"reputation": 632, "user_id": 3277666, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ReRen.png?s=128&g=1", "display_name": "beardedeagle", "link": "https://stackoverflow.com/users/3277666/beardedeagle"}, "edited": false, "score": 1, "creation_date": 1442977606, "post_id": 32727442, "comment_id": 53302482, "body": "Thanks, it is nice to fix this issue. I am currently using the similar sensu check scripts, such as disk, cpu, memory, etc. If you have any problems, let me know."}], "tags": [], "owner": {"reputation": 33893, "user_id": 498256, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Pn7lt.jpg?s=128&g=1", "display_name": "BMW", "link": "https://stackoverflow.com/users/498256/bmw"}, "is_accepted": true, "score": 1, "last_activity_date": 1442976104, "last_edit_date": 1442976104, "creation_date": 1442958202, "answer_id": 32727442, "question_id": 32726795, "link": "https://stackoverflow.com/questions/32726795/sensu-check-log-regex-falsely-passing/32727442#32727442", "title": "Sensu check-log regex falsely passing", "body": "<p>The script generates cache in /var/cache/log, it stores the number of bytes read, and seeks to that position, so every time to do the test, you need clean the folder first.</p>\n\n<pre><code>rm -rf /var/cache/check-log\n</code></pre>\n\n<p>then run the fix code</p>\n\n<pre><code>sudo -u sensu /path/to/ruby /path/to/sensu/plugins/check-log.rb -f /path/to/log.log -q '.*ERROR.*' -r\n\nCheckLog CRITICAL: 0 warnings, 2 criticals for pattern .*ERROR.*.\n2015-09-22 06:05:44,712 ERROR more log output here\n\n2015-09-22 06:05:44,713 ERROR even more log output here\n</code></pre>\n\n<p>Refer: <a href=\"https://github.com/sensu/sensu-community-plugins/blob/master/plugins/logging/check-log.rb#L9\" rel=\"nofollow\">check-log.rb</a></p>\n"}], "owner": {"reputation": 632, "user_id": 3277666, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ReRen.png?s=128&g=1", "display_name": "beardedeagle", "link": "https://stackoverflow.com/users/3277666/beardedeagle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 754, "favorite_count": 0, "accepted_answer_id": 32727442, "answer_count": 1, "score": 0, "last_activity_date": 1442976104, "creation_date": 1442955483, "last_edit_date": 1442975369, "question_id": 32726795, "link": "https://stackoverflow.com/questions/32726795/sensu-check-log-regex-falsely-passing", "title": "Sensu check-log regex falsely passing", "body": "<p>I am trying to set up a sensu check-log check. Logs look similar to the following:</p>\n\n<pre><code>2015-09-22 06:05:44,710 DEBUG log output here\n2015-09-22 06:05:44,712 ERROR more log output here\n2015-09-22 06:05:44,713 ERROR even more log output here\n2015-09-22 06:05:44,714 WARN so much log output\n</code></pre>\n\n<p>I am running the check manually to test as follows:</p>\n\n<pre><code>sudo -u sensu /path/to/ruby /path/to/sensu/plugins/check-log.rb -f /path/to/log.log -q '/.*ERROR.*/' -r\n</code></pre>\n\n<p>which when I run the regex here:</p>\n\n<p><a href=\"http://rubular.com/r/j1NO8RFY2p\" rel=\"nofollow\">http://rubular.com/r/j1NO8RFY2p</a></p>\n\n<p>it captures the two lines I want. However the manual check returns this:</p>\n\n<pre><code>CheckLog OK: 0 warnings, 0 criticals for pattern /.*ERROR.*/.\n</code></pre>\n\n<p>So I keep getting falsely passing checks. Failing to see what I am doing wrong here and documentation is fairly lacking with this particular plugin. And yes, there are errors in the log to capture. Any and all help would be greatly appreciated. Thank you in advance.</p>\n\n<p><strong>EDIT</strong>\nWorking code:</p>\n\n<pre><code>rm -rf /var/cache/check-log\nsudo -u sensu /path/to/ruby /path/to/sensu/plugins/check-log.rb -f /path/to/log.log -q '.*ERROR.*' -r\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 810, "user_id": 2932502, "user_type": "registered", "accept_rate": 36, "profile_image": "https://graph.facebook.com/100000580013063/picture?type=large", "display_name": "Oscar Valdez Esquea", "link": "https://stackoverflow.com/users/2932502/oscar-valdez-esquea"}, "edited": false, "score": 0, "creation_date": 1442959027, "post_id": 32726789, "comment_id": 53297606, "body": "Have you considered doing a view/function in your database that brings back the data already filtered/grouped/ordered? Grouping/displaying at view time tends to make the server lag if there&#39;s a large amount of data."}, {"owner": {"reputation": 809, "user_id": 3785426, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/46574bc7f38d49bbcb8b3e2d752c286d?s=128&d=identicon&r=PG&f=1", "display_name": "SamuraiBlue", "link": "https://stackoverflow.com/users/3785426/samuraiblue"}, "reply_to_user": {"reputation": 810, "user_id": 2932502, "user_type": "registered", "accept_rate": 36, "profile_image": "https://graph.facebook.com/100000580013063/picture?type=large", "display_name": "Oscar Valdez Esquea", "link": "https://stackoverflow.com/users/2932502/oscar-valdez-esquea"}, "edited": false, "score": 0, "creation_date": 1442981740, "post_id": 32726789, "comment_id": 53303467, "body": "Thank you for your comment, @Oscar Valdez Esquea. It would be appreciated if you could give me some clues. Although I have tried some codes, it doesn&#39;t work."}], "answers": [{"comments": [{"owner": {"reputation": 809, "user_id": 3785426, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/46574bc7f38d49bbcb8b3e2d752c286d?s=128&d=identicon&r=PG&f=1", "display_name": "SamuraiBlue", "link": "https://stackoverflow.com/users/3785426/samuraiblue"}, "edited": false, "score": 0, "creation_date": 1443094096, "post_id": 32732221, "comment_id": 53359345, "body": "Thank you for your comment, @Muhamad Akbar Bin Wid. Although I tried your advice, but I couldn&#39;t. The room&#39;s name is displayed after article data such as <code>09:00 Math</code> <code>classA</code> <code>11:00 Science</code> <code>classA</code>. What I&#39;d like to do is to display the last class A such as <code>09:00 Math</code>  <code>11:00 Science</code> <code>classA</code>. It would be appreciated if you could give me a hint."}, {"owner": {"reputation": 809, "user_id": 3785426, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/46574bc7f38d49bbcb8b3e2d752c286d?s=128&d=identicon&r=PG&f=1", "display_name": "SamuraiBlue", "link": "https://stackoverflow.com/users/3785426/samuraiblue"}, "edited": false, "score": 0, "creation_date": 1443183892, "post_id": 32732221, "comment_id": 53402671, "body": "Thank you for your update, @Muhamad Akbar Bin Widayat. The result was the same. Although I wrote the number of id and day was the same in my sample articles and rooms tables, they are actually difference. Is that something to do with my problem? I updated the sample table in my question."}], "tags": [], "owner": {"reputation": 4497, "user_id": 1050875, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/3549436942ea890da97f41d1dbd3594f?s=128&d=identicon&r=PG", "display_name": "akbarbin", "link": "https://stackoverflow.com/users/1050875/akbarbin"}, "is_accepted": false, "score": 1, "last_activity_date": 1443148326, "last_edit_date": 1443148326, "creation_date": 1442988623, "answer_id": 32732221, "question_id": 32726789, "link": "https://stackoverflow.com/questions/32726789/rails4-how-to-display-the-value-one-time-only/32732221#32732221", "title": "Rails4: How to display the value one time only", "body": "<p>I would try to help to:</p>\n\n<p><strong>Controller</strong></p>\n\n<p>In this section, you need to select field that you need only. Then, join articles table with rooms.</p>\n\n<pre><code>@articles = Article.select(\"articles.id, articles.title, articles.contents, articles.category, articles.created_at, rooms.name AS room_name\").joins(:rooms).group_by{|x| [x.created_at, x.room_name]}\n</code></pre>\n\n<p><strong>Model</strong></p>\n\n<p>Remove <code>matching_detail</code> method because you don't need this method. It's method will load data in looping so I will be long to load your data.</p>\n\n<p><strong>View</strong></p>\n\n<p>For view, you have to edit some codes so it can be showed below.</p>\n\n<pre><code>&lt;div class=\"row\"&gt;\n  &lt;% @articles.each do |data, articles| %&gt;\n    &lt;h3&gt;Day &lt;%= data[0] %&gt;&lt;/h3&gt;\n    &lt;% articles.each do |a| %&gt;\n      &lt;%= a.start_time %&gt;\n      &lt;% a.category %&gt;\n      &lt;%= a.contents %&gt;&lt;br&gt;\n    &lt;% end %&gt;\n    &lt;%= data[1] %&gt;&lt;br&gt; #I'd like to display only one time\n  &lt;% end %&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p><strong>Notes:</strong>\n<code>data[0]</code> is for day and <code>data[1]</code> is for room name\nI hope this help you.</p>\n"}, {"comments": [{"owner": {"reputation": 809, "user_id": 3785426, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/46574bc7f38d49bbcb8b3e2d752c286d?s=128&d=identicon&r=PG&f=1", "display_name": "SamuraiBlue", "link": "https://stackoverflow.com/users/3785426/samuraiblue"}, "edited": false, "score": 0, "creation_date": 1444606365, "post_id": 32931329, "comment_id": 53960537, "body": "Thank you for your clear explanation, @alexanderbird. It works!"}], "tags": [], "owner": {"reputation": 3150, "user_id": 3012550, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/4e2667dc04d27136e29ccb9c9e19cfd3?s=128&d=identicon&r=PG", "display_name": "alexanderbird", "link": "https://stackoverflow.com/users/3012550/alexanderbird"}, "is_accepted": true, "score": 2, "last_activity_date": 1443946460, "last_edit_date": 1443946460, "creation_date": 1443945746, "answer_id": 32931329, "question_id": 32726789, "link": "https://stackoverflow.com/questions/32726789/rails4-how-to-display-the-value-one-time-only/32931329#32931329", "title": "Rails4: How to display the value one time only", "body": "<p>I recreated your rails project by: </p>\n\n<ol>\n<li><code>rails new SchoolScheduler</code></li>\n<li>added schema file from your question</li>\n<li><code>rails db:schema:load</code></li>\n<li>added your model files - Article and Room</li>\n<li>added your test data in db/seeds.rb to populate the database (see below)</li>\n</ol>\n\n<p>Then I made some changes:</p>\n\n<ol start=\"6\">\n<li>added a scaffold for schools: <code>rails g scaffold School title:string</code> (had to delete the migration file that was added to db/migrate)</li>\n<li>updated the school model (see below)</li>\n<li>updated the school view (show.html.erb, see below)</li>\n</ol>\n\n<p>Then I tested it out: </p>\n\n<ol start=\"9\">\n<li>Fired up <code>rails s</code></li>\n<li>navigated to <a href=\"http://localhost:3000/schools\" rel=\"nofollow noreferrer\">http://localhost:3000/schools</a></li>\n<li>Clicked on \"Show\" for \"The One You Want To Show\" </li>\n<li>Voila!</li>\n</ol>\n\n<p><a href=\"https://i.stack.imgur.com/g7BXy.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/g7BXy.jpg\" alt=\"Screenshot of final view\"></a></p>\n\n<p>db/seeds.rb</p>\n\n<pre><code>School.delete_all\n\nSchool.create(id: 1, title: \"The One You Want To Show\")\nSchool.create(id: 2, title: \"Some Other School\")\n\nArticle.delete_all\n\nArticle.create(id: 2, school_id: 1, day: 1, start_time: \"09:00\", title: \"Math\")\nArticle.create(id: 4, school_id: 1, day: 2, start_time: \"10:00\", title: \"English\")\nArticle.create(id: 5, school_id: 1, day: 1, start_time: \"11:00\", title: \"Science\")\nArticle.create(id: 8, school_id: 2, day: 3, start_time: \"12:00\", title: \"Physics\")\nArticle.create(id: 9, school_id: 1, day: 2, start_time: \"13:00\", title: \"Music\")\n\nRoom.delete_all\n\nRoom.create(id: 3, school_id: 1, day: 1, name: \"classA\")\nRoom.create(id: 6, school_id: 1, day: 2, name: \"classB\")\nRoom.create(id: 7, school_id: 2, day: 3, name: \"classC\")\n</code></pre>\n\n<p>app/models/school.rb</p>\n\n<pre><code>class School &lt; ActiveRecord::Base\n  has_many :rooms\n  has_many :articles\n\n  def days\n    self.articles.pluck(:day).uniq\n  end\nend\n</code></pre>\n\n<p>app/views/school/show.html.erb</p>\n\n<pre><code>&lt;p id=\"notice\"&gt;&lt;%= notice %&gt;&lt;/p&gt;\n\n&lt;p&gt; \n  &lt;strong&gt;Title:&lt;/strong&gt;\n  &lt;%= @school.title %&gt;\n&lt;/p&gt;\n\n&lt;% @school.days.each do |d| %&gt;\n\n  &lt;h3&gt;Day&lt;%= d %&gt;&lt;/h3&gt;\n\n  &lt;% @school.articles.where(day: d).each do |a| %&gt;\n    &lt;%= a.start_time %&gt;\n    &lt;%= a.title %&gt;&lt;br&gt;\n  &lt;% end %&gt;\n\n  &lt;p&gt;Room &lt;%= @school.rooms.where(day: d).first.name %&gt;&lt;/p&gt;  \n\n&lt;% end %&gt;\n\n&lt;/br&gt;\n&lt;%= link_to 'Edit', edit_school_path(@school) %&gt; |\n&lt;%= link_to 'Back', schools_path %&gt;\n</code></pre>\n\n<p>If I were you, I might refactor the <code>#where.(day: d)...</code> from the view into the model, but that's minor. </p>\n\n<p>As an afterthought, you can simplify your Article and Room models from what you have in your question to this: </p>\n\n<pre><code>class Article &lt; ActiveRecord::Base\n  belongs_to :school\nend\n\nclass Room &lt; ActiveRecord::Base\n  belongs_to :school\nend\n</code></pre>\n"}], "owner": {"reputation": 809, "user_id": 3785426, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/46574bc7f38d49bbcb8b3e2d752c286d?s=128&d=identicon&r=PG&f=1", "display_name": "SamuraiBlue", "link": "https://stackoverflow.com/users/3785426/samuraiblue"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 171, "favorite_count": 0, "accepted_answer_id": 32931329, "answer_count": 2, "score": 1, "last_activity_date": 1443946460, "creation_date": 1442955466, "last_edit_date": 1443183798, "question_id": 32726789, "link": "https://stackoverflow.com/questions/32726789/rails4-how-to-display-the-value-one-time-only", "title": "Rails4: How to display the value one time only", "body": "<p>I'd like to display the room name for one time only.\nSummarized as follows;</p>\n\n<p>articles table</p>\n\n<pre><code>id day start_time title\n2  1   09:00      Math\n4  2   10:00      English\n5  1   11:00      Science\n8  3   12:00      Physics\n9  2   13:00      Music\n</code></pre>\n\n<p>rooms table</p>\n\n<pre><code>id day name\n3  1   classA\n6  2   classB\n7  3   classC\n</code></pre>\n\n<p>I'd like to display the data in the view as followings;</p>\n\n<pre><code>Day1\n09:00 Math\n11:00 Science\nRoom classA\n\nDay2\n10:00 English\n13:00 Music\nRoom classB\n</code></pre>\n\n<p>Please advise me on how to display the value as above.\nThe room names are displayed each time in the code below.</p>\n\n<p>View code</p>\n\n<pre><code>&lt;div class=\"row\"&gt;\n  &lt;% @article.group_by(&amp;:day).each do |day, articles| %&gt;\n    &lt;h3&gt;Day &lt;%= day %&gt;&lt;/h3&gt;\n\n    &lt;% articles.each do |a| %&gt;\n      &lt;%= a.start_time %&gt;\n      &lt;% a.category %&gt;\n      &lt;%= a.contents %&gt;&lt;br&gt;\n      &lt;%= a.matching_detail.try(:name) %&gt;&lt;br&gt; #I'd like to display only one time\n    &lt;% end %&gt;\n\n  &lt;% end %&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>Model code</p>\n\n<pre><code>class Article &lt; ActiveRecord::Base\n    belongs_to :school\n    has_many :rooms, through: :school\n    default_scope -&gt; { order(day: :asc, start_time: :asc) }\n\n    def matching_detail\n      rooms.find_by_day day\n    end\nend\n\nclass Room &lt; ActiveRecord::Base\n    belongs_to :school\n    belongs_to :article\nend\n</code></pre>\n\n<p>Schema</p>\n\n<pre><code>ActiveRecord::Schema.define(version: 20150999999999) do\n\n  create_table \"rooms\", force: true do |t|\n    t.integer  \"school_id\"\n    t.integer  \"day\"\n    t.string   \"name\"\n    t.string   \"detail\"\n    t.datetime \"created_at\"\n    t.datetime \"updated_at\"\n  end\n\n  create_table \"articles\", force: true do |t|\n    t.integer  \"school_id\"\n    t.integer  \"day\"\n    t.string   \"start_time\"\n    t.string   \"end_time\"\n    t.integer  \"category\"\n    t.string   \"title\"\n    t.string   \"contents\"\n    t.datetime \"created_at\"\n    t.datetime \"updated_at\"\n  end\n\n  create_table \"schools\", force: true do |t|\n    t.string   \"title\"\n    t.datetime \"created_at\"\n    t.datetime \"updated_at\"\n  end\n\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "minitest"], "answers": [{"tags": [], "owner": {"reputation": 123, "user_id": 1003881, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2144083c784a67ded11d8c96843ddf99?s=128&d=identicon&r=PG", "display_name": "skatkov", "link": "https://stackoverflow.com/users/1003881/skatkov"}, "is_accepted": false, "score": 0, "last_activity_date": 1517223946, "creation_date": 1517223946, "answer_id": 48499778, "question_id": 32726759, "link": "https://stackoverflow.com/questions/32726759/minitest-5-suite-level-set-up/48499778#48499778", "title": "Minitest 5 - suite-level set up", "body": "<p>I've been looking for similar solution. And here is a proposed solution from <a href=\"https://github.com/seattlerb/minitest#how-to-run-code-before-a-group-of-tests\" rel=\"nofollow noreferrer\">minitest README file</a>:</p>\n\n<pre><code>describe Blah do\n  SETUP = begin\n     # ... this runs once when describe Blah starts\n  end\n  # ...\nend\n</code></pre>\n\n<p>I've tried this, but since i was using some of test_helper support methods, it didn't quite work out for me. I wrote this simple work-around:</p>\n\n<pre><code>class SearchServiceTest &lt; ActiveSupport::TestCase\n  @@init = 0\n\n  def setup\n    if @@init.eql?(0)\n      .. setup code goes here ..  \n\n      @@init = 1\n    end\n  end\n\n  ...\nend\n</code></pre>\n\n<p>Not most elegant solution, but worked for me.</p>\n"}], "owner": {"reputation": 171, "user_id": 4347435, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh5.googleusercontent.com/-xz45ukfg8h8/AAAAAAAAAAI/AAAAAAAAABg/oMd_rOCMOZo/photo.jpg?sz=128", "display_name": "john mitsch", "link": "https://stackoverflow.com/users/4347435/john-mitsch"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 85, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1517223946, "creation_date": 1442955363, "last_edit_date": 1495542234, "question_id": 32726759, "link": "https://stackoverflow.com/questions/32726759/minitest-5-suite-level-set-up", "title": "Minitest 5 - suite-level set up", "body": "<p>How do I run a suite-level set up and teardown (before and after ALL the tests have run) with minitest 5? I am trying to replicate the functionality of custom test runner that was written for rails 3, currently upgrading it to rails 4.</p>\n\n<p>This may appear to be a copy of <a href=\"https://stackoverflow.com/questions/6756488/ruby-minitest-suite-or-class-level-setup?rq=1\">Ruby Minitest: Suite- or Class- level setup?</a> but the functionality of .runner has been deprecated in minitest 5.0+</p>\n\n<p>For example I would like these to run before and after all the tests.</p>\n\n<pre><code>def before_suites\n  # code to run before the first test\n  p \"Before everything\"\nend\n\ndef after_suites\n  # code to run after the last test\n  p \"After everything\"\nend\n</code></pre>\n"}, {"tags": ["ruby", "git", "rvm"], "comments": [{"owner": {"reputation": 6268, "user_id": 503831, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/992c174c48fa4dadacb03854dbf7ade8?s=128&d=identicon&r=PG", "display_name": "Arnold Roa", "link": "https://stackoverflow.com/users/503831/arnold-roa"}, "edited": false, "score": 0, "creation_date": 1442955541, "post_id": 32726707, "comment_id": 53295983, "body": "I&#39;ve found this post on cpanel forum than discourage installing git on server <a href=\"https://forums.cpanel.net/threads/installing-git.294411/\" rel=\"nofollow noreferrer\">forums.cpanel.net/threads/installing-git.294411</a>"}], "answers": [{"tags": [], "owner": {"reputation": 1999, "user_id": 240015, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf8c0b428f3dbce78801b341464274fa?s=128&d=identicon&r=PG", "display_name": "corprew", "link": "https://stackoverflow.com/users/240015/corprew"}, "is_accepted": false, "score": 0, "last_activity_date": 1442965114, "creation_date": 1442965114, "answer_id": 32728768, "question_id": 32726707, "link": "https://stackoverflow.com/questions/32726707/rvm-requirements-install-git-error/32728768#32728768", "title": "rvm requirements install git error", "body": "<p>Try the answers provided here -- <a href=\"https://github.com/rvm/rvm/issues/2696\" rel=\"nofollow\">https://github.com/rvm/rvm/issues/2696</a> --  specifically fixing whatever goes wrong when you try to do this...</p>\n\n<p><code>yum install -y libyaml-devel autoconf gcc-c++ readline-devel zlib-devel openssl-devel</code></p>\n"}], "owner": {"reputation": 6268, "user_id": 503831, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/992c174c48fa4dadacb03854dbf7ade8?s=128&d=identicon&r=PG", "display_name": "Arnold Roa", "link": "https://stackoverflow.com/users/503831/arnold-roa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 198, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1442965114, "creation_date": 1442955178, "question_id": 32726707, "link": "https://stackoverflow.com/questions/32726707/rvm-requirements-install-git-error", "title": "rvm requirements install git error", "body": "<p>I'm trying to install <code>rvm</code> with latest ruby on a centos 5 server, rvm is already installed with no ruby, it throws an error when trying to install ruby, something regarding git.</p>\n\n<pre><code>$ uname -a\nLinux 2.6.18-308.24.1.el5PAE #1 SMP Tue Dec 4 18:28:32 EST 2012 i686 i686 i386 GNU/Linux\n\n$ rvm install ruby-2.2-head\nChecking requirements for centos.\nInstalling requirements for centos.\nInstalling required packages: git, autoconf.......\nError running 'requirements_centos_libs_install git autoconf',\nshowing last 15 lines of /home/ruby/.rvm/log/1442954643_ruby-2.2-head/package_install_git_autoconf.log\n  --&gt; Missing Dependency: perl(Error) is needed by package git-1.8.2.1-1.el5.i386 (epel)\ngit-1.8.2.1-1.el5.i386 from epel has depsolving problems\n  --&gt; Missing Dependency: perl(Term::ReadKey) is needed by package git-1.8.2.1-1.el5.i386 (epel)\ngit-1.8.2.1-1.el5.i386 from epel has depsolving problems\n  --&gt; Missing Dependency: perl(Git) is needed by package git-1.8.2.1-1.el5.i386 (epel)\nError: Missing Dependency: perl-Git = 1.8.2.1-1.el5 is needed by package git-1.8.2.1-1.el5.i386 (epel)\nError: Missing Dependency: perl(Term::ReadKey) is needed by package git-1.8.2.1-1.el5.i386 (epel)\nError: Missing Dependency: perl(Git) is needed by package git-1.8.2.1-1.el5.i386 (epel)\nError: Missing Dependency: perl(Error) is needed by package git-1.8.2.1-1.el5.i386 (epel)\n You could try using --skip-broken to work around the problem\n You could try running: package-cleanup --problems\n                        package-cleanup --dupes\n                        rpm -Va --nofiles --nodigest\n++ return 1\n++ return 1\nRequirements installation failed with status: 1.\n\n\n$ git --version\ngit version 1.6.4.4\n</code></pre>\n\n<p>This hosts uses cpanel.</p>\n\n<p>I've tried directly installing with yum, same error, tried also to remove git</p>\n\n<pre><code> # yum remove git\n Failed to set locale, defaulting to C\n Loaded plugins: downloadonly, fastestmirror\n Setting up Remove Process\n No Match for argument: git \n</code></pre>\n\n<p>My guess is that Cpanel has git installed, but is an outdated version, could be this?</p>\n"}]