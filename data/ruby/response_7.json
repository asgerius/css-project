[{"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 707, "user_id": 3583511, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xB5JH.jpg?s=128&g=1", "display_name": "Jake Shorty", "link": "https://stackoverflow.com/users/3583511/jake-shorty"}, "edited": false, "score": 3, "creation_date": 1424908819, "post_id": 28732080, "comment_id": 45750132, "body": "You&#39;ve misspelled <code>article</code> in your <code>params.require...</code> call in <code>article_params</code>."}, {"owner": {"reputation": 1479, "user_id": 2506819, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b60435154915157dfd7ebfc04164930?s=128&d=identicon&r=PG", "display_name": "fanta", "link": "https://stackoverflow.com/users/2506819/fanta"}, "edited": false, "score": 0, "creation_date": 1424908881, "post_id": 28732080, "comment_id": 45750148, "body": "so, first off, a good practice is to put your public methods at the top, and then use the &#39;private&#39; word to declare your private methods. About your question, looks like no &#39;article&#39; hash is being passed to the controller. With that said, it would be good if you include in your question your template, and maybe the rails log to see what it is receiving in the request."}, {"owner": {"reputation": 23, "user_id": 3255626, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f644f4bb9911550a40dffa4096511b8?s=128&d=identicon&r=PG&f=1", "display_name": "loreith", "link": "https://stackoverflow.com/users/3255626/loreith"}, "edited": false, "score": 0, "creation_date": 1424910929, "post_id": 28732080, "comment_id": 45750757, "body": "Okay, thanks for the advice, and I cannot believe that I didn&#39;t see that misspelling. Thanks!"}], "answers": [{"tags": [], "owner": {"reputation": 18773, "user_id": 91830, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2505b282d57c29be797dc35b245adb4c?s=128&d=identicon&r=PG", "display_name": "Philip Hallstrom", "link": "https://stackoverflow.com/users/91830/philip-hallstrom"}, "is_accepted": true, "score": 0, "last_activity_date": 1424909800, "creation_date": 1424909800, "answer_id": 28732277, "question_id": 28732080, "link": "https://stackoverflow.com/questions/28732080/parameter-missing-in-rails-controller-which-is-not-missing/28732277#28732277", "title": "Parameter missing in rails controller which is not missing", "body": "<p>Here's the code after taking @Jake Shorty and @fanta into consideration.  Fixing the typo and re-arranging the code.</p>\n\n<p>The advantage to using the <code>private</code> keyword is that the method order no longer matters.  No chance of accidentally making a method private or public when you meant the other one.</p>\n\n<pre><code>class ArticlesController &lt; ApplicationController\n\n  def new\n  end\n\n  def create\n    @article = Article.new(article_params)\n    @article.save\n    redirect_to @article\n  end\n\n  def article_params\n    params.require(:article).permit(:title, :text)\n  end\n  private :article_params\n\nend\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 3255626, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f644f4bb9911550a40dffa4096511b8?s=128&d=identicon&r=PG&f=1", "display_name": "loreith", "link": "https://stackoverflow.com/users/3255626/loreith"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2212, "favorite_count": 0, "accepted_answer_id": 28732277, "answer_count": 1, "score": 1, "last_activity_date": 1424909800, "creation_date": 1424908622, "question_id": 28732080, "link": "https://stackoverflow.com/questions/28732080/parameter-missing-in-rails-controller-which-is-not-missing", "title": "Parameter missing in rails controller which is not missing", "body": "<p>I have been recently learning ruby and rails in order to build a web application, so I have been following the starting out guide on the rails website.</p>\n\n<p>I have got to a point where I am attempting to submit a form to my database, and rails is throwing this error:</p>\n\n<p>ActionController::ParameterMissing in ArticlesController#create\nparam is missing or the value is empty: aritcle</p>\n\n<p>Here is the code that it is refering to:</p>\n\n<pre><code>class ArticlesController &lt; ApplicationController\ndef new\nend\n\nprivate\ndef article_params\n    params.require(:aritcle).permit(:title, :text)\nend\n\npublic\ndef create\n    @article = Article.new(article_params)\n\n    @article.save\n    redirect_to @article\nend\n</code></pre>\n\n<p>end</p>\n\n<p>What is interesting about this is that I had the code working ten minutes ago, exactly the same as it is now, but when I tried to tidy it up, it started throwing this error again, and when I put it back this way it didn't stop.</p>\n\n<p>I have not seen this elsewhere, so would really appreciate any help with this.</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["ruby", "command-line-interface"], "comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1424910616, "post_id": 28731878, "comment_id": 45750664, "body": "What is the purpose of defining <code>GLYPHS = %w[| &#47; \u2013 \\\\ | &#47; \u2013 \\\\]</code> with two cycles? What changes if it were <code>GLYPHS = %w[| &#47; \u2013 \\\\]</code>?"}], "answers": [{"tags": [], "owner": {"reputation": 18773, "user_id": 91830, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2505b282d57c29be797dc35b245adb4c?s=128&d=identicon&r=PG", "display_name": "Philip Hallstrom", "link": "https://stackoverflow.com/users/91830/philip-hallstrom"}, "is_accepted": false, "score": 0, "last_activity_date": 1424909564, "creation_date": 1424909564, "answer_id": 28732249, "question_id": 28731878, "link": "https://stackoverflow.com/questions/28731878/how-to-clean-up-command-line-spinner/28732249#28732249", "title": "How to clean up command line spinner", "body": "<p>You need to stop the thread.  I tweaked your Spinner class a little bit.</p>\n\n<pre><code>class Spinner\n\n  GLYPHS = %w[| / \u2013 \\\\ | / \u2013 \\\\]\n\n  def initialize(msg = nil)\n    print \"#{msg}... \" unless msg.nil?\n    @thread = Thread.new do\n      while true\n        GLYPHS.each do |glyph|\n          print \"\\b#{glyph}\"\n          sleep 0.10\n        end\n      end\n    end\n  end\n\n  def stop(msg = nil)\n    @thread.exit\n    print  \"\\b#{msg}\\n\"\n  end\n\nend\n</code></pre>\n\n<p>When running it looks like this:</p>\n\n<pre><code>Querying the API.../\n</code></pre>\n\n<p>And when all done like this:</p>\n\n<pre><code>Querying the API...All done.\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 4156819, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/729ec3c88f9c0c6019ea6015c3e5ae47?s=128&d=identicon&r=PG&f=1", "display_name": "Vic", "link": "https://stackoverflow.com/users/4156819/vic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 61, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1424910126, "creation_date": 1424907568, "last_edit_date": 1424910126, "question_id": 28731878, "link": "https://stackoverflow.com/questions/28731878/how-to-clean-up-command-line-spinner", "title": "How to clean up command line spinner", "body": "<p>I recreated an implementation of a spinner for my command line script:</p>\n\n<pre><code>class Spinner\n  GLYPHS = %w[| / \u2013 \\\\ | / \u2013 \\\\]\n  def render\n    Thread.new do\n      while true\n        GLYPHS.each do |glyph|\n          print \"\\r#{glyph}\"\n          sleep 0.10\n        end\n      end\n    end\n  end\nend\n</code></pre>\n\n<p>It is used as:</p>\n\n<pre><code>puts \"Querying the API...\"\n@s = Spinner.new\n@s.render\n# do some stuff, return some data, output it to the command line\nputs \"All done.\"\n</code></pre>\n\n<p>and the resulting command line output is something like</p>\n\n<pre><code>Querying the API...[spinner is spinning here]\n\\RESULTS\n|RESULTS\n\\RESULTS\n\n|All done.\n</code></pre>\n\n<p>When the script is over, the last glyph remains. My understanding is that the <code>\"\\r\"</code> at the beginning of the print string is meant to clean up the past glyph. I manually print a <code>\"\\r\"</code>, which is unintuitive and makes the code look not great. I like for the spinner to not leave one of its glyphs in front of the result without manually having to print <code>\"\\r\"</code> before each output line.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "bash", "bundler", "rbenv"], "comments": [{"owner": {"reputation": 5921, "user_id": 29470, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/926224cbb63e5b617300e99c89051ce7?s=128&d=identicon&r=PG", "display_name": "Tim Moore", "link": "https://stackoverflow.com/users/29470/tim-moore"}, "edited": false, "score": 2, "creation_date": 1424943635, "post_id": 28731800, "comment_id": 45761537, "body": "Can you be more specific about how they&#39;re not working? Copy and paste the exact error that you&#39;re getting into your question. Please also paste the output from <code>gem env</code>."}], "answers": [{"tags": [], "owner": {"reputation": 157, "user_id": 3349830, "user_type": "registered", "accept_rate": 86, "profile_image": "https://graph.facebook.com/712009991/picture?type=large", "display_name": "uechan", "link": "https://stackoverflow.com/users/3349830/uechan"}, "is_accepted": false, "score": 1, "last_activity_date": 1485305408, "last_edit_date": 1485305408, "creation_date": 1430841870, "answer_id": 30058006, "question_id": 28731800, "link": "https://stackoverflow.com/questions/28731800/bundler-install-doesnt-work-with-rbenv/30058006#30058006", "title": "Bundler install doesn&#39;t work with rbenv", "body": "<p>Try <code>ruby -v</code> to see what local ruby version is set in the app.</p>\n\n<p><code>rbenv versions</code> to see if you have that version installed. If you don't have the right version installed, run <code>rbenv install ruby-x.x.x</code> or whatever version is required, or if it is already installed do <code>rbenv local x.x.x</code>.</p>\n\n<p>After installing a new ruby you need to run <code>rbenv rehash</code> to rehash your shims.</p>\n\n<p>Then probably <code>gem install bundler</code>, then you can try <code>bundle install</code>.</p>\n"}], "owner": {"reputation": 1, "user_id": 4607727, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-9GiMeAewc48/AAAAAAAAAAI/AAAAAAAAATw/yl-rZjCNrGA/photo.jpg?sz=128", "display_name": "Khari Johnson", "link": "https://stackoverflow.com/users/4607727/khari-johnson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 675, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1485305408, "creation_date": 1424907212, "question_id": 28731800, "link": "https://stackoverflow.com/questions/28731800/bundler-install-doesnt-work-with-rbenv", "title": "Bundler install doesn&#39;t work with rbenv", "body": "<p>I'm trying to get a Middleman static site going but for the life of me cannot get Bundler to act right. This is my first time using Ruby on Rails. </p>\n\n<p>Using rbenv I\u2019ve cloned ruby 2.2.0 into a plugin folder but even after running rbenv global 2.2.0 and getting Middleman and Bundler to install, I can't get the \"bundle install\" or any other \"bundle --\" commands to work.</p>\n\n<p>I was having issues with permissions and different versions of Ruby even after rbenv so I added \"export RBENV_ROOT=\"$HOME/.rbenv\" to my bash profile.</p>\n\n<p>Once that was done the Ruby version issue that was keeping me from installing Bundler and Middleman was gone. But now that they're installed, I can't get these gems to follow any commands.</p>\n"}, {"tags": ["ruby", "stdin"], "answers": [{"comments": [{"owner": {"reputation": 1373, "user_id": 2339716, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/k8zz3.jpg?s=128&g=1", "display_name": "mralexlau", "link": "https://stackoverflow.com/users/2339716/mralexlau"}, "edited": false, "score": 0, "creation_date": 1424966642, "post_id": 28734514, "comment_id": 45776490, "body": "Thanks for going above and beyond in your answer :) I may end up turning this into a gem (will post on here if I do) - there&#39;s some other related functionality I&#39;d like to encapsulate as well."}], "tags": [], "owner": {"reputation": 56502, "user_id": 271475, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b00f41e5f2a69734051f2a78f4f3785?s=128&d=identicon&r=PG", "display_name": "Chris Heald", "link": "https://stackoverflow.com/users/271475/chris-heald"}, "is_accepted": true, "score": 1, "last_activity_date": 1424925083, "creation_date": 1424925083, "answer_id": 28734514, "question_id": 28731795, "link": "https://stackoverflow.com/questions/28731795/gem-to-capture-replay-stdin-input-in-ruby/28734514#28734514", "title": "Gem to capture/replay stdin input in ruby", "body": "<p>I don't think that a gem exists for this, but it's actually pretty easy - you can reassign $stdin to something that wraps (and restores) the usual stdin device!</p>\n\n<p>This is off the top of my head, and you can probably come up with something that fits your use case better, but it does the job:</p>\n\n<pre><code>class LoggingInputStream\n  def self.hook\n    $stdin = new($stdin)\n  end\n\n  def self.unhook\n    $stdin.finish if $stdin.is_a? LoggingInputStream\n    $stdin = STDIN\n  end\n\n  def initialize(real_stdin)\n    @real = real_stdin\n    @log = File.open(\"log\", \"a\")\n  end\n\n  def gets(*args)\n    input = @real.gets(*args)\n    log input\n    input\n  end\n\n  def log(input)\n    @log.puts input\n    @log.flush\n  end\n\n  def finish\n    @log.close\n  end\n\n  def method_missing(name, *args, &amp;block)\n    @real.send name, *args, &amp;block\n  end\nend\nLoggingInputStream.hook\n</code></pre>\n\n<p>Here we just create an object which delegates to the underlying STDIN stream for everything, and in the case of <code>#gets</code>, logs the input as it's read. You can call <code>LoggingInputStream.unhook</code> to restore $stdin to the canonical stdin stream and close the log file.</p>\n"}], "owner": {"reputation": 1373, "user_id": 2339716, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/k8zz3.jpg?s=128&g=1", "display_name": "mralexlau", "link": "https://stackoverflow.com/users/2339716/mralexlau"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 85, "favorite_count": 0, "accepted_answer_id": 28734514, "answer_count": 1, "score": 0, "last_activity_date": 1424925083, "creation_date": 1424907184, "last_edit_date": 1424924133, "question_id": 28731795, "link": "https://stackoverflow.com/questions/28731795/gem-to-capture-replay-stdin-input-in-ruby", "title": "Gem to capture/replay stdin input in ruby", "body": "<p>Is there a ruby gem that automatically logs input from $stdin, while preserving normal execution flow for the program?</p>\n\n<p>I was thinking something like:</p>\n\n<pre><code>def gets_with_logging\n  input = gets_without_logging\n  File.write('/path/to/file', input)\n  return input\nend\nalias_method_chain :gets, :logging\n</code></pre>\n\n<p>Then you could use that file later on to replay the same input. Does a gem exist with this functionality? </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "haml"], "answers": [{"tags": [], "owner": {"reputation": 1479, "user_id": 2506819, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b60435154915157dfd7ebfc04164930?s=128&d=identicon&r=PG", "display_name": "fanta", "link": "https://stackoverflow.com/users/2506819/fanta"}, "is_accepted": false, "score": 0, "last_activity_date": 1424907235, "creation_date": 1424907235, "answer_id": 28731806, "question_id": 28731648, "link": "https://stackoverflow.com/questions/28731648/rails-simple-form-not-displaying/28731806#28731806", "title": "Rails &#39;simple_form&#39; Not Displaying", "body": "<p>based on the screenshot, you're printing the code in the html. You need to use the '=' to make haml evaluate the rails code. Something like:</p>\n\n<pre><code>= simple_form_for @article do |f|\n  = f.input :title\n  = f.input :content\n  = f.submit\n</code></pre>\n"}], "owner": {"reputation": 9, "user_id": 3010391, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2990a75e16b6f01ee351b35a14b9d96e?s=128&d=identicon&r=PG&f=1", "display_name": "user3010391", "link": "https://stackoverflow.com/users/3010391/user3010391"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 97, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1424908997, "creation_date": 1424906483, "last_edit_date": 1424908997, "question_id": 28731648, "link": "https://stackoverflow.com/questions/28731648/rails-simple-form-not-displaying", "title": "Rails &#39;simple_form&#39; Not Displaying", "body": "<p>I am currently working on a Wiki app using Rails and I have done most of the back end work now I am just styling the app. I having trouble with the simple_form. I have run through all the necessary installations re: the simple_form but still no result. My project is in HAML and I am using Bootstrap. Please find an image relating to the result I am getting in the browser and what the code looks like:</p>\n\n<p><a href=\"http://tinypic.com/r/2r3gvp2/8\" rel=\"nofollow\">Browser View</a></p>\n\n<pre><code>#simple_form_for @article do |f|\n#f.input :title\n#f.input :content\n#f.submit\n</code></pre>\n\n<p>Would appreciate any type input from anyone, thanks in advance.</p>\n"}, {"tags": ["java", "ruby", "selenium", "selenium-webdriver"], "comments": [{"owner": {"reputation": 47294, "user_id": 3885376, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/XgeJ5.png?s=128&g=1", "display_name": "ROMANIA_engineer", "link": "https://stackoverflow.com/users/3885376/romania-engineer"}, "edited": false, "score": 0, "creation_date": 1424907389, "post_id": 28731433, "comment_id": 45749676, "body": "(1) Java or Ruby ? (2) Can you post the line where you click on the element ? (I want to be sure that there is a click, not a Ctrl + T) (3) Which is the version of your Selenium ?"}, {"owner": {"reputation": 13, "user_id": 3980471, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e20c6b2c4b6cc70ffe9c7380f7a43c5c?s=128&d=identicon&r=PG&f=1", "display_name": "Anton", "link": "https://stackoverflow.com/users/3980471/anton"}, "reply_to_user": {"reputation": 47294, "user_id": 3885376, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/XgeJ5.png?s=128&g=1", "display_name": "ROMANIA_engineer", "link": "https://stackoverflow.com/users/3885376/romania-engineer"}, "edited": false, "score": 0, "creation_date": 1424907766, "post_id": 28731433, "comment_id": 45749798, "body": "1. I&#39;ve tried this on java and on ruby test environment so both/any"}, {"owner": {"reputation": 13, "user_id": 3980471, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e20c6b2c4b6cc70ffe9c7380f7a43c5c?s=128&d=identicon&r=PG&f=1", "display_name": "Anton", "link": "https://stackoverflow.com/users/3980471/anton"}, "reply_to_user": {"reputation": 47294, "user_id": 3885376, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/XgeJ5.png?s=128&g=1", "display_name": "ROMANIA_engineer", "link": "https://stackoverflow.com/users/3885376/romania-engineer"}, "edited": false, "score": 0, "creation_date": 1424907795, "post_id": 28731433, "comment_id": 45749806, "body": "2.  browser.find_element(:id, &quot;aSignIn&quot;).click"}, {"owner": {"reputation": 13, "user_id": 3980471, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e20c6b2c4b6cc70ffe9c7380f7a43c5c?s=128&d=identicon&r=PG&f=1", "display_name": "Anton", "link": "https://stackoverflow.com/users/3980471/anton"}, "reply_to_user": {"reputation": 47294, "user_id": 3885376, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/XgeJ5.png?s=128&g=1", "display_name": "ROMANIA_engineer", "link": "https://stackoverflow.com/users/3885376/romania-engineer"}, "edited": false, "score": 0, "creation_date": 1424907814, "post_id": 28731433, "comment_id": 45749810, "body": "3. Selenium-webdriver 2.44"}, {"owner": {"reputation": 4516, "user_id": 4213630, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JlAuz.jpg?s=128&g=1", "display_name": "aberna", "link": "https://stackoverflow.com/users/4213630/aberna"}, "edited": false, "score": 0, "creation_date": 1424935618, "post_id": 28731433, "comment_id": 45757549, "body": "what browser is used for the emulation ? Chrome ? Firefox ?"}, {"owner": {"reputation": 13, "user_id": 3980471, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e20c6b2c4b6cc70ffe9c7380f7a43c5c?s=128&d=identicon&r=PG&f=1", "display_name": "Anton", "link": "https://stackoverflow.com/users/3980471/anton"}, "edited": false, "score": 0, "creation_date": 1424969949, "post_id": 28731433, "comment_id": 45778657, "body": "I&#39;ve tried it in IE,Chrome, FF. Older and new versions."}, {"owner": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "edited": false, "score": 0, "creation_date": 1425056221, "post_id": 28731433, "comment_id": 45819070, "body": "If the problem only happened after code changes to your product, it would help to know what those changes were."}], "answers": [{"tags": [], "owner": {"reputation": 13, "user_id": 3980471, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e20c6b2c4b6cc70ffe9c7380f7a43c5c?s=128&d=identicon&r=PG&f=1", "display_name": "Anton", "link": "https://stackoverflow.com/users/3980471/anton"}, "is_accepted": true, "score": 0, "last_activity_date": 1425409914, "creation_date": 1425409914, "answer_id": 28840004, "question_id": 28731433, "link": "https://stackoverflow.com/questions/28731433/unwanted-new-tab-opens-every-time-i-click-on-a-link-which-is-not-expected/28840004#28840004", "title": "Unwanted new tab opens every time I click on a link which is not expected", "body": "<p>I will explain how we dealt with the issue.</p>\n\n<p>We've implemented Google Analytics event tracking on our site, so it would check every link to see if it is an external one. A reg-ex for that was written to check links, but it did not incorporate the way I was bypassing basic authentication \"<a href=\"http://LOGIN:PASSWORD@yoursite.com\" rel=\"nofollow\">http://LOGIN:PASSWORD@yoursite.com</a>\". Therefore GA thought every link was an external one and GA injected its .js with \"_blank\" attribute.</p>\n"}], "owner": {"reputation": 13, "user_id": 3980471, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e20c6b2c4b6cc70ffe9c7380f7a43c5c?s=128&d=identicon&r=PG&f=1", "display_name": "Anton", "link": "https://stackoverflow.com/users/3980471/anton"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 276, "favorite_count": 1, "accepted_answer_id": 28840004, "answer_count": 1, "score": 1, "last_activity_date": 1425409914, "creation_date": 1424905545, "last_edit_date": 1424907284, "question_id": 28731433, "link": "https://stackoverflow.com/questions/28731433/unwanted-new-tab-opens-every-time-i-click-on-a-link-which-is-not-expected", "title": "Unwanted new tab opens every time I click on a link which is not expected", "body": "<p>I have an issue with my automation (selenium-webdriver). Every time I click on a link, that link would open in a new tab (this is not expected, and links do not have _blank attr. set to them), my automation fails cause it stays on the first tab.</p>\n\n<p>I've tried setting up a new automation env on a new PC - same result. I've tried releasing Ctrl key using :controlKeyUp - same result</p>\n\n<p>This issue happened during bug-fixes merge from v1 to v2 of my product.</p>\n\n<p>P.S.:</p>\n\n<ul>\n<li>On a version with older code automation works fine with no issues</li>\n<li>This issue is not reproducible manually.</li>\n</ul>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"tags": [], "owner": {"reputation": 61438, "user_id": 63034, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/ZXKMO.jpg?s=128&g=1", "display_name": "mikej", "link": "https://stackoverflow.com/users/63034/mikej"}, "is_accepted": true, "score": 0, "last_activity_date": 1424906280, "creation_date": 1424906280, "answer_id": 28731600, "question_id": 28731235, "link": "https://stackoverflow.com/questions/28731235/using-ruby-map-method-and-excluding-current-user/28731600#28731600", "title": "Using ruby map method and excluding current user", "body": "<p>The <code>.push(user.id)</code> is adding the user's own ID onto this list of friend IDs so if you just remove that you'll get the activities for just the friends.</p>\n\n<p><code>friends.map(&amp;:id)</code> takes the list of the user's friends and maps this to a list of the IDs for those friends ready for use in the <code>where</code> condition on the next line i.e. it calls <code>id</code> on each friend and returns an array of the results of that. </p>\n"}], "owner": {"reputation": 1085, "user_id": 2878929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/U2qzc.jpg?s=128&g=1", "display_name": "Seph Cordovano", "link": "https://stackoverflow.com/users/2878929/seph-cordovano"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 34, "favorite_count": 0, "accepted_answer_id": 28731600, "answer_count": 1, "score": 0, "last_activity_date": 1424906280, "creation_date": 1424904824, "last_edit_date": 1424906161, "question_id": 28731235, "link": "https://stackoverflow.com/questions/28731235/using-ruby-map-method-and-excluding-current-user", "title": "Using ruby map method and excluding current user", "body": "<p>I have an activity feed that currently show all activity including current user. My goal is to only update the feed with friends' activity and not the current user's activity. I believe it has something to do with the map(&amp;:id) method, but I'm not positive. Any guidance would be super awesome! </p>\n\n<p>activity.rb:</p>\n\n<pre><code>class Activity &lt; ActiveRecord::Base\n    belongs_to :user\n    belongs_to :targetable, polymorphic: true\n\n  self.per_page = 10\n\n  def self.for_user(user, options={})\n    options[:page] ||= 1\n    # return WillPaginate::Collection.new(1, per_page, 1) unless user\n    friend_ids = user.friends.map(&amp;:id).push(user.id)\n    collection = where(\"user_id in (?)\", friend_ids).order(\"created_at desc\")\n\n    if options[:since] &amp;&amp; !options[:since].blank?\n      since = DateTime.strptime( options[:since], '%s' )\n      collection = collection.where(\"created_at &gt; ?\", since) if since\n    end\n    collection.page(options[:page])\n  end\n\n  def user_name\n    user.name\n  end\n\n  def username\n    user.username\n  end\n\n  def as_json(options={})\n    super(\n        only: [:action, :id, :targetable_id, :targetable_type, :created_at, :id],\n        include: :targetable, \n        methods: [:user_name, :username]\n    ).merge(options)\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby", "rvm", "passenger"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1424902474, "post_id": 28730554, "comment_id": 45747531, "body": "One of the biggest problems with the internet is <i>NOTHING EVER GETS FLUSHED</i> even though it should be. In a recent conversation with the folks on the RVM IRC channel, I was told that mixed and multi-user modes are to be avoided <i>UNLESS</i> you&#39;re a <i>very</i> experienced sysadmin, capable of working through the problems encountered. I am fairly experienced but I don&#39;t want to be come more experienced, so I converted our multi-user configuration development host back to single user, at their recommendation, for simplicity and ease of use."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1424902566, "post_id": 28730554, "comment_id": 45747575, "body": "If I remember right, to disable, delete the /usr/local/rvm directory and any entries in /etc/bash.bashrc."}, {"owner": {"reputation": 407, "user_id": 4154134, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/8xUX5.jpg?s=128&g=1", "display_name": "jdussault", "link": "https://stackoverflow.com/users/4154134/jdussault"}, "reply_to_user": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1424903032, "post_id": 28730554, "comment_id": 45747791, "body": "I&#39;m afraid that single user isn&#39;t a great option for me, because on this server there are multiple users updating the apps and on our production server I have to maintain rails / sinatra apps without sudo access (it&#39;s maddening).  So unfortunately although I&#39;m not an experience sysadmin I have to do what I can. I&#39;m a bit reluctant to remove the /usr/local/rvm directory, as that is where my passenger gem is living, among other things, but if I get desperate I may try that, thanks."}, {"owner": {"reputation": 407, "user_id": 4154134, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/8xUX5.jpg?s=128&g=1", "display_name": "jdussault", "link": "https://stackoverflow.com/users/4154134/jdussault"}, "reply_to_user": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1424903797, "post_id": 28730554, "comment_id": 45748155, "body": "I believe that <code>rvm user none</code> has done the trick."}], "answers": [{"tags": [], "owner": {"reputation": 407, "user_id": 4154134, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/8xUX5.jpg?s=128&g=1", "display_name": "jdussault", "link": "https://stackoverflow.com/users/4154134/jdussault"}, "is_accepted": true, "score": 1, "last_activity_date": 1425056516, "creation_date": 1425056516, "answer_id": 28770407, "question_id": 28730554, "link": "https://stackoverflow.com/questions/28730554/rvm-change-from-mixed-mode-to-multiple-users-mode/28770407#28770407", "title": "RVM Change from Mixed-Mode to Multiple-Users Mode", "body": "<p><code>rvm user none</code></p>\n\n<p>I should have tried checking the command line documentation first, rather than hunting fruitlessly around the rvm online docs and elsewhere on google.  I took a guess at \"none\" and it paid off.</p>\n\n<pre><code>$ rvm user\nUsage: rvm user [[gemsets] [rubies] [hooks] [pkgs] [wrappers] [all] [--skel]|none]\n</code></pre>\n"}], "owner": {"reputation": 407, "user_id": 4154134, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/8xUX5.jpg?s=128&g=1", "display_name": "jdussault", "link": "https://stackoverflow.com/users/4154134/jdussault"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 255, "favorite_count": 0, "accepted_answer_id": 28770407, "answer_count": 1, "score": 2, "last_activity_date": 1425056516, "creation_date": 1424901893, "question_id": 28730554, "link": "https://stackoverflow.com/questions/28730554/rvm-change-from-mixed-mode-to-multiple-users-mode", "title": "RVM Change from Mixed-Mode to Multiple-Users Mode", "body": "<p>While trying to get a new Sinatra app up and running, I unwisely followed one of the steps on the Phusion Passenger error page which recommended enabling RVM mixed mode with rvm user gemsets.</p>\n\n<p>I gave it a try just to see if it would help me get anywhere, but now I very much regret doing it as I am further than I was before from solving my problem. Before my gems were saving to /usr/local which was perfect except for the weird problem of passenger not finding the correct wrapper.</p>\n\n<p>How can I undo mixed-mode and go back to multiple-users mode? The only instructions I can find online are for moving TO mixed mode, not how to disable it!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "devise", "unicorn"], "comments": [{"owner": {"reputation": 9921, "user_id": 488195, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/aa1e7477ba2f6c0ec47ed521f1cf1676?s=128&d=identicon&r=PG", "display_name": "dgilperez", "link": "https://stackoverflow.com/users/488195/dgilperez"}, "edited": false, "score": 0, "creation_date": 1425083473, "post_id": 28730483, "comment_id": 45831302, "body": "Can you show us your <code>routes.rb</code> regarding your <code>users</code>? Do you have a <code>users_url</code> route? Did you customized your <code>RegistrationsController</code>? Can you show it to us?"}, {"owner": {"reputation": 1388, "user_id": 2087775, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/34af15a57984ebac74f4b606b810aa69?s=128&d=identicon&r=PG&f=1", "display_name": "Remon Amin", "link": "https://stackoverflow.com/users/2087775/remon-amin"}, "reply_to_user": {"reputation": 9921, "user_id": 488195, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/aa1e7477ba2f6c0ec47ed521f1cf1676?s=128&d=identicon&r=PG", "display_name": "dgilperez", "link": "https://stackoverflow.com/users/488195/dgilperez"}, "edited": false, "score": 0, "creation_date": 1425083646, "post_id": 28730483, "comment_id": 45831346, "body": "actually , the problem happens everyday at 2.05 am , all the day I have at least 200 new registrations and no problem"}, {"owner": {"reputation": 9921, "user_id": 488195, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/aa1e7477ba2f6c0ec47ed521f1cf1676?s=128&d=identicon&r=PG", "display_name": "dgilperez", "link": "https://stackoverflow.com/users/488195/dgilperez"}, "edited": false, "score": 0, "creation_date": 1425083720, "post_id": 28730483, "comment_id": 45831361, "body": "Interesting. But you fail to answer my questions ;)"}, {"owner": {"reputation": 9921, "user_id": 488195, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/aa1e7477ba2f6c0ec47ed521f1cf1676?s=128&d=identicon&r=PG", "display_name": "dgilperez", "link": "https://stackoverflow.com/users/488195/dgilperez"}, "edited": false, "score": 0, "creation_date": 1425083827, "post_id": 28730483, "comment_id": 45831391, "body": "Hmm reviewing the log, and considering the 2.05 am, it seems to be a problem of cache invalidation from <code>rack-cache</code>. How did you configure that?"}, {"owner": {"reputation": 1388, "user_id": 2087775, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/34af15a57984ebac74f4b606b810aa69?s=128&d=identicon&r=PG&f=1", "display_name": "Remon Amin", "link": "https://stackoverflow.com/users/2087775/remon-amin"}, "reply_to_user": {"reputation": 9921, "user_id": 488195, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/aa1e7477ba2f6c0ec47ed521f1cf1676?s=128&d=identicon&r=PG", "display_name": "dgilperez", "link": "https://stackoverflow.com/users/488195/dgilperez"}, "edited": false, "score": 0, "creation_date": 1425083866, "post_id": 28730483, "comment_id": 45831402, "body": "I added my registration controller too"}, {"owner": {"reputation": 1388, "user_id": 2087775, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/34af15a57984ebac74f4b606b810aa69?s=128&d=identicon&r=PG&f=1", "display_name": "Remon Amin", "link": "https://stackoverflow.com/users/2087775/remon-amin"}, "reply_to_user": {"reputation": 9921, "user_id": 488195, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/aa1e7477ba2f6c0ec47ed521f1cf1676?s=128&d=identicon&r=PG", "display_name": "dgilperez", "link": "https://stackoverflow.com/users/488195/dgilperez"}, "edited": false, "score": 0, "creation_date": 1425083952, "post_id": 28730483, "comment_id": 45831427, "body": "how can I check for my rack-cache configuration"}, {"owner": {"reputation": 9921, "user_id": 488195, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/aa1e7477ba2f6c0ec47ed521f1cf1676?s=128&d=identicon&r=PG", "display_name": "dgilperez", "link": "https://stackoverflow.com/users/488195/dgilperez"}, "reply_to_user": {"reputation": 1388, "user_id": 2087775, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/34af15a57984ebac74f4b606b810aa69?s=128&d=identicon&r=PG&f=1", "display_name": "Remon Amin", "link": "https://stackoverflow.com/users/2087775/remon-amin"}, "edited": false, "score": 0, "creation_date": 1425084029, "post_id": 28730483, "comment_id": 45831448, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/71923/discussion-between-dgilperez-and-remon-amin\">continue this discussion in chat</a>."}, {"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 1, "creation_date": 1425513644, "post_id": 28730483, "comment_id": 45999581, "body": "Can you please post the output of <code>rake routes</code>?"}, {"owner": {"reputation": 1388, "user_id": 2087775, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/34af15a57984ebac74f4b606b810aa69?s=128&d=identicon&r=PG&f=1", "display_name": "Remon Amin", "link": "https://stackoverflow.com/users/2087775/remon-amin"}, "edited": false, "score": 0, "creation_date": 1425546961, "post_id": 28730483, "comment_id": 46010480, "body": "it not related to routes ,the problem happened everyday in the same time at 4.05 am , my unicorn instance stopped and I updated my question with unicorn.log"}, {"owner": {"reputation": 10662, "user_id": 741850, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4a92d66111d2f71d36b14aec1741fb14?s=128&d=identicon&r=PG", "display_name": "Automatico", "link": "https://stackoverflow.com/users/741850/automatico"}, "edited": false, "score": 0, "creation_date": 1425600464, "post_id": 28730483, "comment_id": 46041392, "body": "seems like it is turbolinks which is trying to do some fancy stuff which you have not taken into account. It tries to get your &quot;/users&quot; url, but you only have a POST action to users. Disabling turbolinks will probably solve your problem, but then it also will slow down load times and increase server load. On another note: If this is happening at the same time every day, then it might be someone scraping you website (could be google or someone else). Update your robots.txt if you want them to stop ;)"}, {"owner": {"reputation": 1388, "user_id": 2087775, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/34af15a57984ebac74f4b606b810aa69?s=128&d=identicon&r=PG&f=1", "display_name": "Remon Amin", "link": "https://stackoverflow.com/users/2087775/remon-amin"}, "edited": false, "score": 0, "creation_date": 1425601489, "post_id": 28730483, "comment_id": 46041706, "body": "I removed turbolinks and I made many changes in omniauth-facebook gem still having the problem but with another error Geocoding API&#39;s response was not valid JSON. Geocoding API&#39;s response was not valid JSON. Geocoding API&#39;s response was not valid JSON."}, {"owner": {"reputation": 1388, "user_id": 2087775, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/34af15a57984ebac74f4b606b810aa69?s=128&d=identicon&r=PG&f=1", "display_name": "Remon Amin", "link": "https://stackoverflow.com/users/2087775/remon-amin"}, "reply_to_user": {"reputation": 9921, "user_id": 488195, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/aa1e7477ba2f6c0ec47ed521f1cf1676?s=128&d=identicon&r=PG", "display_name": "dgilperez", "link": "https://stackoverflow.com/users/488195/dgilperez"}, "edited": false, "score": 0, "creation_date": 1425747375, "post_id": 28730483, "comment_id": 46092468, "body": "@dgilperez kindly post the answer you told me in chatting ,however I didn&#39;t solve the problem yet ,but I want to give the points to you for helping me"}], "answers": [{"comments": [{"owner": {"reputation": 1388, "user_id": 2087775, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/34af15a57984ebac74f4b606b810aa69?s=128&d=identicon&r=PG&f=1", "display_name": "Remon Amin", "link": "https://stackoverflow.com/users/2087775/remon-amin"}, "edited": false, "score": 0, "creation_date": 1425405846, "post_id": 28828599, "comment_id": 45946807, "body": "but why the problem happens every day on the same time , I removed omniautable from devise and I implement facebook auth, with omniauth-facebook gem and yesterday in the same time I got (facebook) Authentication failure! no_authorization_code: OmniAuth::Strategies::Facebook::NoAuthorizationCodeError, must pass either a  <code>code</code> (via URL or by an <code>fbsr_XXX</code> signed request cookie) in unicorn.log"}], "tags": [], "owner": {"reputation": 16077, "user_id": 319702, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Rb5G2.jpg?s=128&g=1", "display_name": "sameera207", "link": "https://stackoverflow.com/users/319702/sameera207"}, "is_accepted": false, "score": 1, "last_activity_date": 1425376094, "creation_date": 1425376094, "answer_id": 28828599, "question_id": 28730483, "link": "https://stackoverflow.com/questions/28730483/strange-error-with-devise-and-unicorn/28828599#28828599", "title": "strange error with devise and unicorn", "body": "<p>I'm not sure what exact the error is, but by looking at the gem source code, <code>def polymorphic_url</code> method, </p>\n\n<p>(<code>actionpack-4.1.5/lib/action_dispatch/routing/polymorphic_routes.rb</code></p>\n\n<pre><code># -- some code\ninflection = if options[:action] &amp;&amp; options[:action].to_s == \"new\"\n          args.pop\n          :singular\n        elsif (record.respond_to?(:persisted?) &amp;&amp; !record.persisted?)\n          args.pop\n          :plural\n        elsif record.is_a?(Class)\n          args.pop\n          :plural\n        else\n          :singular\n        end\n</code></pre>\n\n<p>it seems like, your <code>resource</code> object is become , either collection or <code>User.new</code>, then it becomes <code>:plural</code> and gives you that error. My guess is try to debug on that direction , HTH</p>\n"}], "owner": {"reputation": 1388, "user_id": 2087775, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/34af15a57984ebac74f4b606b810aa69?s=128&d=identicon&r=PG&f=1", "display_name": "Remon Amin", "link": "https://stackoverflow.com/users/2087775/remon-amin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 370, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1425546999, "creation_date": 1424901561, "last_edit_date": 1425546999, "question_id": 28730483, "link": "https://stackoverflow.com/questions/28730483/strange-error-with-devise-and-unicorn", "title": "strange error with devise and unicorn", "body": "<p>I used devise with many of my rails apps \nin development I am getting these error every day 1-2 times</p>\n\n<pre><code>NoMethodError: undefined method `users_url' for #&lt;RegistrationsController:0x007f14cd6cd958&gt;\n\n          .0/gems/turbolinks-2.5.3/lib/turbolinks/\n      xhr_headers.rb:  21:in `_compute_redirect_to_location'\n     \u20260224210521/app/controllers/\n        /home/remmon/apps/myapp/releases/20150224210521/app/controllers/registrations_controller.rb\nregistrations_controller.rb:  26:in `create'\n\u2026le/ruby/2.1.0/gems/journey-1.0.4/lib/journey/\nrouter.rb:  68:in `block in call'\n\u2026le/ruby/2.1.0/gems/journey-1.0.4/lib/journey/\nrouter.rb:  56:in `each'\n\u2026le/ruby/2.1.0/gems/journey-1.0.4/lib/journey/\nrouter.rb:  56:in `call'\n\u2026uby/2.1.0/gems/omniauth-1.2.2/lib/omniauth/\nstrategy.rb: 186:in `call!'\n\u2026uby/2.1.0/gems/omniauth-1.2.2/lib/omniauth/\nstrategy.rb: 164:in `call'\n      \u2026ems/rack-mobile-detect-0.4.0/lib/rack/\n       mobile-detect.rb: 164:in `call'\n      \u2026dle/ruby/2.1.0/gems/warden-1.2.3/lib/warden/\n      manager.rb:  35:in `block in call'\n      \u2026dle/ruby/2.1.0/gems/warden-1.2.3/lib/warden/\n      manager.rb:  34:in `catch'\n      \u2026dle/ruby/2.1.0/gems/warden-1.2.3/lib/warden/\n      manager.rb:  34:in `call'\n      \u2026red/bundle/ruby/2.1.0/gems/rack-1.4.5/lib/rack/\n       etag.rb:  23:in `call'\n        \u2026/ruby/2.1.0/gems/rack-1.4.5/lib/rack/\n     conditionalget.rb:  35:in `call'\n      \u2026/2.1.0/gems/rack-1.4.5/lib/rack/session/abstract/\n        id.rb: 210:in `context'\n          \u2026/2.1.0/gems/rack-1.4.5/lib/rack/session/abstract/\n           id.rb: 205:in `call'\n         \u2026bundle/ruby/2.1.0/gems/rack-1.4.5/lib/rack/\n           sendfile.rb: 102:in `call'\n           \u2026/ruby/2.1.0/gems/rack-1.4.5/lib/rack/\n              methodoverride.rb:  21:in `call'\n             \u2026/bundle/ruby/2.1.0/gems/rack-1.4.5/lib/rack/\n           runtime.rb:  17:in `call'\n       \u2026red/bundle/ruby/2.1.0/gems/rack-1.4.5/lib/rack/\n         lock.rb:  15:in `call'\n           \u2026by/2.1.0/gems/rack-cache-1.2/lib/rack/cache/\n     context.rb: 136:in `forward'\n      \u2026by0/gems/rack-cache-1.2/lib/rack/cache/\n    context.rb: 143:in `pass'\n\u2026by/2.1.0/gems/rack-cache-1.2/lib/rack/cache/\ncontext.rb: 155:in `invalidate'\n\u2026by/2.1.0/gems/rack-cache-1.2/lib/rack/cache/\ncontext.rb:  71:in `call!'\n\u2026by/2.1.0/gems/rack-cache-1.2/lib/rack/cache/\ncontext.rb:  51:in `call'\n\u2026undle/ruby/2.1.0/gems/rack-cors-0.3.1/lib/rack/\ncors.rb:  72:in `call'\n\u2026by/2.1.0/gems/unicorn-4.8.3/lib/unicorn/\nhttp_server.rb: 576:in `process_client'\n</code></pre>\n\n<p>in unicorn.log I found these error </p>\n\n<pre><code>(facebook) Callback phase initiated.\n(facebook) Callback phase initiated.\n(facebook) Callback phase initiated.\n(facebook) Callback phase initiated.\n(facebook) Callback phase initiated.\n(facebook) Callback phase initiated.\n</code></pre>\n\n<p>, and the only solution is to</p>\n\n<pre><code> sudo service unicorn_myapp stop \n</code></pre>\n\n<p>then starting it again with</p>\n\n<pre><code> sudo service unicorn_myapp start \n</code></pre>\n\n<p>I checked my user model and related models for callbacks ,but everything is working fine , registration working very well after restarting unicorn as I said before</p>\n\n<p>I am using ruby 2.1.5 and rails 3.2.21</p>\n\n<p>here is my gem file too</p>\n\n<pre><code>source 'https://rubygems.org'\n\ngem 'rails', '3.2.21'\n\n# Bundle edge Rails instead:\n# gem 'rails', :git =&gt; 'git://github.com/rails/rails.git'\ngem 'twilio-ruby', '~&gt; 3.12'\ngem 'omniauth-facebook'\ngem 'pg'\ngem 'thumbs_up'\ngem \"lol_dba\"\ngem \"paperclip\", \"~&gt; 3.5.1\"\ngem 'acts-as-taggable-on'\ngem 'acts_as_list'\ngem 'mobile-fu', '~&gt; 1.3.1'\ngem 'time_difference'\ngem 'mongo_mapper'\ngem 'bson_ext', \"1.10.0\"\n# Gems used only for assets and not required\n# in production environments by default.\ngem 'humanizer'\ngem 'birthday', '~&gt; 0.3.0'\ngem \"embedly\"\ngem 'jquery-fileupload-rails'\ngem \"aws-sdk\"\ngem 'zodiac'\n#gem \"searchkick\"\ngem \"geocoder\"\ngem \"strong_parameters\"\ngem 'redis-rails'\ngem 'whenever', :require =&gt; false\ngem \"wysiwyg-rails\"\ngem \"select2-rails\"\ngem 'mime-types', :require =&gt; 'mime/types'\n#gem 'asset_sync' ,:git=&gt;\"git://github.com/rumblelabs/asset_sync.git\"\ngroup :assets do\n  gem 'sass-rails',   '~&gt; 3.2.3'\n  gem 'coffee-rails', '~&gt; 3.2.1'\n  gem 'turbo-sprockets-rails3'\n\n  # See https://github.com/sstephenson/execjs#readme for more supported runtimes\n  # gem 'therubyracer', :platforms =&gt; :ruby\n\n  gem 'uglifier', '&gt;= 1.0.3'\nend\n\ngroup :development do\n\n  gem 'thin'\n\n  gem 'better_errors',\"1.1.0\"\n  gem 'binding_of_caller'\n  gem 'meta_request'\n\n  gem 'rack-mini-profiler'\nend\ngem 'ransack'\n\n# gem 'rack-mini-profiler'\n#gem 'mailboxer',:git=&gt;\"git://github.com/remon/mailboxer\"\ngem \"mailboxer\"\ngem 'turbolinks'\ngem 'jquery-rails','2.1.4'\ngem 'jquery-ui-rails','3.0.1'\n\n#gem 'activeadmin', github: 'gregbell/active_admin', branch: '0-6-stable'\ngem \"devise\"\ngem 'cache_digests'\n\n# To use ActiveModel has_secure_password\n# gem 'bcrypt-ruby', '~&gt; 3.0.0'\n\n# To use Jbuilder templates for JSON\n# gem 'jbuilder'\n\n# Use unicorn as the app server\n# gem 'unicorn'\n\n# Deploy with Capistrano\n# gem 'capistrano'\ngem 'jquery-datatables-rails', '~&gt; 2.2.1'\n#gem \"pjax_rails\"\ngem 'dalli'\ngem 'simple_form'\ngem \"cocoon\"\ngem \"squeel\"\ngem \"kaminari\" ,\"0.14.1\"\ngem \"jbuilder\",'0.9.1'\n# Use unicorn as the app server\n\n# Deploy with Capistrano\ngroup :production do\n\n  gem 'unicorn'\nend\n#gem 'exception_notification'\ngem 'newrelic_rpm'\ngem 'rack-cors', :require =&gt; 'rack/cors'\n#gem 'sidekiq',\"2.17.7\"\n#gem \"sidekiq\", \"3.3.0\"\n#gem 'capistrano-sidekiq', group: :development\ngem 'daemons'\ngem 'delayed_job_active_record'\ngem 'sinatra', require: false\ngem 'slim'\n#gem 'capistrano-sidekiq', github: 'seuros/capistrano-sidekiq'\ngem 'capistrano' ,\"2.13.5\"\n\n#gem 'jquery-turbolinks'#\n# To use debugger\n# gem 'debugger'\n</code></pre>\n\n<p>her is my routes.rb</p>\n\n<pre><code>myApp::Application.routes.draw do\n\n\n\n   namespace :api, defaults: { format: \"json\" } do\n devise_scope :user do\n   post 'users' =&gt; 'registrations#create', :as =&gt; 'user_registration'\n   post 'users/sign_in' =&gt; 'sessions#create', :as =&gt; 'user_session'\n  get '/users/sign_out' =&gt; 'sessions#destroy'\n    end\n\ndevise_for :users, :controllers =&gt; {:sessions=&gt;\"sessions\", :registrations =&gt; \"registrations\", :passwords =&gt; \"passwords\" ,:omniauth_callbacks=&gt;\"omniauth_callbacks\"}\n\n\n##etc...\nend\n</code></pre>\n\n<p>my registration controller.rb </p>\n\n<pre><code>class RegistrationsController &lt; Devise::RegistrationsController\n    before_filter :prepare_for_mobile\n  respond_to :js ,:html \n\n    def create\n    build_resource(sign_up_params)\n       #resource.skip_confirmation!\n    resource_saved = resource.save\n    yield resource if block_given?\n    if resource_saved\n      if resource.active_for_authentication?\n        set_flash_message :notice, :signed_up if is_flashing_format?\n        sign_up(resource_name, resource)\n        respond_with resource, location: after_sign_up_path_for(resource)\n      else\n        set_flash_message :notice, :\"signed_up_but_#{resource.inactive_message}\" if is_flashing_format?\n        expire_data_after_sign_in!\n        respond_with resource, location: after_inactive_sign_up_path_for(resource)\n      end\n    else\n      clean_up_passwords resource\n      @validatable = devise_mapping.validatable?\n      if @validatable\n        @minimum_password_length = resource_class.password_length.min\n      end\n      respond_with resource\n    end\n  end\n   def update\n    self.resource = resource_class.to_adapter.get!(send(:\"current_#{resource_name}\").to_key)\n    prev_unconfirmed_email = resource.unconfirmed_email if resource.respond_to?(:unconfirmed_email)\n\n    resource_updated = update_resource(resource, account_update_params)\n    yield resource if block_given?\n    if resource_updated\n      if is_flashing_format?\n        flash_key = update_needs_confirmation?(resource, prev_unconfirmed_email) ?\n          :update_needs_confirmation : :updated\n        set_flash_message :notice, flash_key\n      end\n      sign_in resource_name, resource, bypass: true\n      respond_with resource, location: after_update_path_for(resource)\n    else\n      clean_up_passwords resource\n      respond_with resource\n    end\n  end\n  protected\n\n  def after_sign_up_path_for(resource)\n step2_path\n  end\n\nend\n</code></pre>\n\n<p>also my rails traces error</p>\n\n<pre><code>\u20262.21/lib/action_dispatch/routing/\n/home/remoncpo/apps/optlar/shared/bundle/ruby/2.1.0/gems/actionpack-3.2.21/lib/action_dispatch/routing/polymorphic_routes.rb\npolymorphic_routes.rb: 129:in `polymorphic_url'\n\u2026tionpack-3.2.21/lib/action_dispatch/routing/\nurl_for.rb: 150:in `url_for'\n\u2026pack-3.2.21/lib/action_controller/metal/\nredirecting.rb: 105:in `_compute_redirect_to_location'\n\u2026pack-3.2.21/lib/action_controller/metal/\nredirecting.rb:  74:in `redirect_to'\n\u2026actionpack-3.2.21/lib/action_controller/metal/\nflash.rb:  25:in `redirect_to'\n\u2026-3.2.21/lib/action_controller/metal/\ninstrumentation.rb:  60:in `block in redirect_to'\n\u2026tivesupport-3.2.21/lib/active_support/\nnotifications.rb: 123:in `block in instrument'\n\u2026.2.21/lib/active_support/notifications/\ninstrumenter.rb:  20:in `instrument'\n\u2026tivesupport-3.2.21/lib/active_support/\nnotifications.rb: 123:in `instrument'\n\u2026-3.2.21/lib/action_controller/metal/\ninstrumentation.rb:  59:in `redirect_to'\n\u2026onpack-3.2.21/lib/action_controller/metal/\nresponder.rb: 135:in `redirect_to'\n\u2026onpack-3.2.21/lib/action_controller/metal/\nresponder.rb: 193:in `navigation_behavior'\n\u2026onpack-3.2.21/lib/action_controller/metal/\nresponder.rb: 162:in `rescue in to_html'\n\u2026onpack-3.2.21/lib/action_controller/metal/\nresponder.rb: 160:in `to_html'\n\u2026onpack-3.2.21/lib/action_controller/metal/\nresponder.rb: 153:in `respond'\n\u2026onpack-3.2.21/lib/action_controller/metal/\nresponder.rb: 146:in `call'\n\u2026ck-3.2.21/lib/action_controller/metal/\nmime_responds.rb: 239:in `respond_with'\n\u20260228155747/app/controllers/\nregistrations_controller.rb:  26:in `create'\n\u2026-3.2.21/lib/action_controller/metal/\nimplicit_render.rb:   4:in `send_action'\n\u2026gems/actionpack-3.2.21/lib/abstract_controller/\nbase.rb: 167:in `process_action'\n\u2026onpack-3.2.21/lib/action_controller/metal/\nrendering.rb:  10:in `process_action'\n\u2026actionpack-3.2.21/lib/abstract_controller/\ncallbacks.rb:  18:in `block in process_action'\n\u2026s/activesupport-3.2.21/lib/active_support/\ncallbacks.rb: 458:in `_run__2151305456332142610__process_action__86349116187657263__callbacks'\n\u2026s/activesupport-3.2.21/lib/active_support/\ncallbacks.rb: 405:in `__run_callback'\n\u2026s/activesupport-3.2.21/lib/active_support/\ncallbacks.rb: 385:in `_run_process_action_callbacks'\n\u2026s/activesupport-3.2.21/lib/active_support/\ncallbacks.rb:  81:in `run_callbacks'\n\u2026actionpack-3.2.21/lib/abstract_controller/\ncallbacks.rb:  17:in `process_action'\n\u2026ctionpack-3.2.21/lib/action_controller/metal/\nrescue.rb:  29:in `process_action'\n\u2026-3.2.21/lib/action_controller/metal/\ninstrumentation.rb:  30:in `block in process_action'\n\u2026tivesupport-3.2.21/lib/active_support/\nnotifications.rb: 123:in `block in instrument'\n\u2026.2.21/lib/active_support/notifications/\ninstrumenter.rb:  20:in `instrument'\n\u2026tivesupport-3.2.21/lib/active_support/\nnotifications.rb: 123:in `instrument'\n\u2026-3.2.21/lib/action_controller/metal/\ninstrumentation.rb:  29:in `process_action'\n\u2026k-3.2.21/lib/action_controller/metal/\nparams_wrapper.rb: 207:in `process_action'\n\u2026.2.21/lib/active_record/railties/\ncontroller_runtime.rb:  18:in `process_action'\n\u2026gems/actionpack-3.2.21/lib/abstract_controller/\nbase.rb: 121:in `process'\n\u2026actionpack-3.2.21/lib/abstract_controller/\nrendering.rb:  45:in `process'\n\u2026/gems/actionpack-3.2.21/lib/action_controller/\nmetal.rb: 203:in `dispatch'\n\u2026-3.2.21/lib/action_controller/metal/\nrack_delegation.rb:  14:in `dispatch'\n\u2026/gems/actionpack-3.2.21/lib/action_controller/\nmetal.rb: 246:in `block in action'\n\u2026onpack-3.2.21/lib/action_dispatch/routing/\nroute_set.rb:  73:in `call'\n\u2026onpack-3.2.21/lib/action_dispatch/routing/\nroute_set.rb:  73:in `dispatch'\n\u2026onpack-3.2.21/lib/action_dispatch/routing/\nroute_set.rb:  36:in `call'\n\u2026ctionpack-3.2.21/lib/action_dispatch/routing/\nmapper.rb:  43:in `call'\n\u2026le/ruby/2.1.0/gems/journey-1.0.4/lib/journey/\nrouter.rb:  68:in `block in call'\n\u2026le/ruby/2.1.0/gems/journey-1.0.4/lib/journey/\nrouter.rb:  56:in `each'\n\u2026le/ruby/2.1.0/gems/journey-1.0.4/lib/journey/\nrouter.rb:  56:in `call'\n\u2026onpack-3.2.21/lib/action_dispatch/routing/\nroute_set.rb: 608:in `call'\n\u2026uby/2.1.0/gems/omniauth-1.2.2/lib/omniauth/\nstrategy.rb: 186:in `call!'\n\u2026uby/2.1.0/gems/omniauth-1.2.2/lib/omniauth/\nstrategy.rb: 164:in `call'\n\u2026ems/rack-mobile-detect-0.4.0/lib/rack/\nmobile-detect.rb: 164:in `call'\n\u2026dle/ruby/2.1.0/gems/warden-1.2.3/lib/warden/\nmanager.rb:  35:in `block in call'\n\u2026dle/ruby/2.1.0/gems/warden-1.2.3/lib/warden/\nmanager.rb:  34:in `catch'\n\u2026dle/ruby/2.1.0/gems/warden-1.2.3/lib/warden/\nmanager.rb:  34:in `call'\n\u2026b/action_dispatch/middleware/\nbest_standards_support.rb:  17:in `call'\n\u2026red/bundle/ruby/2.1.0/gems/rack-1.4.5/lib/rack/\netag.rb:  23:in `call'\n\u2026/ruby/2.1.0/gems/rack-1.4.5/lib/rack/\nconditionalget.rb:  35:in `call'\n\u2026tionpack-3.2.21/lib/action_dispatch/middleware/\nhead.rb:  14:in `call'\n\u20263.2.21/lib/action_dispatch/middleware/\nparams_parser.rb:  21:in `call'\n\u2026ionpack-3.2.21/lib/action_dispatch/middleware/\nflash.rb: 242:in `call'\n\u2026/2.1.0/gems/rack-1.4.5/lib/rack/session/abstract/\nid.rb: 210:in `context'\n\u2026/2.1.0/gems/rack-1.4.5/lib/rack/session/abstract/\nid.rb: 205:in `call'\n\u2026npack-3.2.21/lib/action_dispatch/middleware/\ncookies.rb: 341:in `call'\n\u2026s/activerecord-3.2.21/lib/active_record/\nquery_cache.rb:  64:in `call'\n\u2026record/connection_adapters/abstract/\nconnection_pool.rb: 479:in `call'\n\u2026ack-3.2.21/lib/action_dispatch/middleware/\ncallbacks.rb:  28:in `block in call'\n\u2026s/activesupport-3.2.21/lib/active_support/\ncallbacks.rb: 405:in `_run__2996406385371488609__call__2187759682541233929__callbacks'\n\u2026s/activesupport-3.2.21/lib/active_support/\ncallbacks.rb: 405:in `__run_callback'\n\u2026s/activesupport-3.2.21/lib/active_support/\ncallbacks.rb: 385:in `_run_call_callbacks'\n\u2026s/activesupport-3.2.21/lib/active_support/\ncallbacks.rb:  81:in `run_callbacks'\n\u2026ack-3.2.21/lib/action_dispatch/middleware/\ncallbacks.rb:  27:in `call'\n\u2026bundle/ruby/2.1.0/gems/rack-1.4.5/lib/rack/\nsendfile.rb: 102:in `call'\n\u2026.21/lib/action_dispatch/middleware/\ndebug_exceptions.rb:  16:in `call'\n\u20262.21/lib/action_dispatch/middleware/\nshow_exceptions.rb:  56:in `call'\n\u2026by/2.1.0/gems/railties-3.2.21/lib/rails/rack/\nlogger.rb:  32:in `call_app'\n\u2026by/2.1.0/gems/railties-3.2.21/lib/rails/rack/\nlogger.rb:  16:in `block in call'\n\u2026ivesupport-3.2.21/lib/active_support/\ntagged_logging.rb:  22:in `tagged'\n\u2026by/2.1.0/gems/railties-3.2.21/lib/rails/rack/\nlogger.rb:  16:in `call'\n\u2026ck-3.2.21/lib/action_dispatch/middleware/\nrequest_id.rb:  22:in `call'\n\u2026/ruby/2.1.0/gems/rack-1.4.5/lib/rack/\nmethodoverride.rb:  21:in `call'\n\u2026/bundle/ruby/2.1.0/gems/rack-1.4.5/lib/rack/\nruntime.rb:  17:in `call'\n\u2026.2.21/lib/active_support/cache/strategy/\nlocal_cache.rb:  72:in `call'\n\u2026red/bundle/ruby/2.1.0/gems/rack-1.4.5/lib/rack/\nlock.rb:  15:in `call'\n\u2026by/2.1.0/gems/rack-cache-1.2/lib/rack/cache/\ncontext.rb: 136:in `forward'\n\u2026by/2.1.0/gems/rack-cache-1.2/lib/rack/cache/\ncontext.rb: 143:in `pass'\n\u2026by/2.1.0/gems/rack-cache-1.2/lib/rack/cache/\ncontext.rb: 155:in `invalidate'\n\u2026by/2.1.0/gems/rack-cache-1.2/lib/rack/cache/\ncontext.rb:  71:in `call!'\n\u2026by/2.1.0/gems/rack-cache-1.2/lib/rack/cache/\ncontext.rb:  51:in `call'\n\u2026undle/ruby/2.1.0/gems/rack-cors-0.3.1/lib/rack/\ncors.rb:  72:in `call'\n\u2026le/ruby/2.1.0/gems/railties-3.2.21/lib/rails/\nengine.rb: 484:in `call'\n\u2026by/2.1.0/gems/railties-3.2.21/lib/rails/\napplication.rb: 231:in `call'\n\u2026gems/railties-3.2.21/lib/rails/railtie/\nconfigurable.rb:  30:in `method_missing'\n\u2026by/2.1.0/gems/unicorn-4.8.3/lib/unicorn/\nhttp_server.rb: 576:in `process_client'\n\u2026by/2.1.0/gems/unicorn-4.8.3/lib/unicorn/\nhttp_server.rb: 670:in `worker_loop'\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "nested-attributes", "ruby-on-rails-4.2", "ruby-2.2"], "answers": [{"tags": [], "owner": {"reputation": 33, "user_id": 3014982, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9adfbe4cbaed30ab5f5e73d384e39d1?s=128&d=identicon&r=PG", "display_name": "luksimir", "link": "https://stackoverflow.com/users/3014982/luksimir"}, "is_accepted": false, "score": 0, "last_activity_date": 1424966144, "last_edit_date": 1424966144, "creation_date": 1424953370, "answer_id": 28742371, "question_id": 28730455, "link": "https://stackoverflow.com/questions/28730455/ruby-2-2-0-and-rails-4-2-destroying-nested-attributes/28742371#28742371", "title": "Ruby 2.2.0 and Rails 4.2 destroying nested attributes", "body": "<p>The problem was me. I put <code>dependent: :destroy</code> in both models. When deleting one, it also tried to delete the parent.</p>\n"}], "owner": {"reputation": 33, "user_id": 3014982, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9adfbe4cbaed30ab5f5e73d384e39d1?s=128&d=identicon&r=PG", "display_name": "luksimir", "link": "https://stackoverflow.com/users/3014982/luksimir"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 342, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1424966144, "creation_date": 1424901444, "last_edit_date": 1424951045, "question_id": 28730455, "link": "https://stackoverflow.com/questions/28730455/ruby-2-2-0-and-rails-4-2-destroying-nested-attributes", "title": "Ruby 2.2.0 and Rails 4.2 destroying nested attributes", "body": "<p>Apps that run in Ruby 2.2.0 and Rails 4.2 are giving me problems when dealing with nested attributes esspecialy when i am trying to delete one or more of them. The same code in previous version works as it should. I have read throug <a href=\"http://api.rubyonrails.org/classes/ActiveRecord/NestedAttributes/ClassMethods.html\" rel=\"nofollow\">these instructions</a> and can't seem to find an answer.</p>\n\n<p>I have a model location.rb</p>\n\n<pre><code>class Location &lt; ActiveRecord::Base\n\n  belongs_to :user, dependent: :destroy\n  has_many :location_images, dependent: :destroy\n  accepts_nested_attributes_for :location_images, allow_destroy: true, :reject_if =&gt; lambda { |t| t['location_image'].nil? }\n\nend\n</code></pre>\n\n<p>and location_image.rb</p>\n\n<pre><code>class LocationImage &lt; ActiveRecord::Base\n\n  belongs_to :location, dependent: :destroy\n  has_attached_file :location_image, :styles =&gt; { :thumb =&gt; '160x120#',\n                                         :small =&gt; '320x240&gt;',\n                                         :large =&gt; '640x480&gt;' }\n\n  #validates_attachment_presence :image\n  validates_attachment_size :location_image, :less_than =&gt; 8.megabytes\n  validates_attachment_content_type :location_image, :content_type =&gt; /\\Aimage\\/.*\\Z/\nend\n</code></pre>\n\n<p>This is my locations_controller.rb</p>\n\n<pre><code>class LocationsController &lt; ApplicationController\n  before_action :set_location, only: [:show, :edit, :update, :destroy]\n\n  # GET /locations\n  # GET /locations.json\n  def index\n    @locations = Location.all\n    @hash = Gmaps4rails.build_markers(@locations) do |location, marker|\n      marker.lat location.latitude\n      marker.lng location.longitude\n      end\n  end\n\n  # GET /locations/1\n  # GET /locations/1.json\n  def show\n    @hash = Gmaps4rails.build_markers(@location) do |location, marker|\n      marker.lat location.latitude\n      marker.lng location.longitude\n    end\n  end\n\n  # GET /locations/new\n  def new\n    @location = Location.new\n    ( 8 - @location.location_images.count).times { @location.location_images.build }\n  end\n\n  # GET /locations/1/edit\n  def edit\n    ( 8 - @location.location_images.count).times { @location.location_images.build }\n  end\n\n  # POST /locations\n  # POST /locations.json\n  def create\n    @location = Location.new(location_params)\n    @location.user_id = current_user.id\n\n    respond_to do |format|\n      if @location.save\n        format.html { redirect_to user_path(current_user[:id]), notice: 'Location was successfully created.' }\n        format.json { render :show, status: :created, location: @location }\n      else\n        format.html { render :new }\n        format.json { render json: @location.errors, status: :unprocessable_entity }\n      end\n    end\n  end\n\n  # PATCH/PUT /locations/1\n  # PATCH/PUT /locations/1.json\n  def update\n    respond_to do |format|\n      if @location.update(location_params)\n        format.html { redirect_to @location, notice: 'Location was successfully updated.' }\n        format.json { render :show, status: :ok, location: @location }\n      else\n        format.html { render :edit }\n        format.json { render json: @location.errors, status: :unprocessable_entity }\n      end\n    end\n  end\n\n  # DELETE /locations/1\n  # DELETE /locations/1.json\n  def destroy\n    @location.destroy\n    respond_to do |format|\n      format.html { redirect_to locations_url, notice: 'Location was successfully destroyed.' }\n      format.json { head :no_content }\n    end\n  end\n\n\n  private\n    # Use callbacks to share common setup or constraints between actions.\n    def set_location\n      @location = Location.find(params[:id])\n    end\n\n    # Never trust parameters from the scary internet, only allow the white list through.\n    def location_params\n      params.require(:location).permit(:name,\n                                       :user_id,\n                                       :image,\n                                       :latitude,\n                                       :longitude,\n                                       location_images_attributes: [:id, :location_id, :location_image, :_destroy])\n    end\nend\n</code></pre>\n\n<p>And my locations _form.html.erb</p>\n\n<pre><code>&lt;%= simple_form_for(@location) do |f| %&gt;\n    &lt;%= f.error_notification %&gt;\n\n    &lt;%= f.input :name %&gt;\n\n    &lt;%= f.input :latitude, :as =&gt; 'hidden', label: false, input_html: {id: 'lat'} %&gt;\n\n    &lt;%= f.input :longitude, :as =&gt; 'hidden', label: false, input_html: {id: 'lng'} %&gt;\n\n    &lt;%= f.fields_for :location_images do |asset| %&gt;\n        &lt;% unless asset.object.new_record? %&gt;\n            &lt;div&gt;\n              &lt;%= link_to( image_tag(asset.object.location_image.url(:thumb)), asset.object.location_image.url(:large), :class =&gt; 'thumbnail' ) %&gt;\n              &lt;%= asset.check_box :_destroy %&gt;\n\n            &lt;/div&gt;\n        &lt;% end %&gt;\n    &lt;% end %&gt;\n\n    &lt;% if @location.location_images.count &lt;=5 %&gt;\n        &lt;%= f.fields_for :location_images do |builder| %&gt;\n            &lt;% if builder.object.new_record? %&gt;\n                &lt;%= builder.file_field :location_image %&gt;\n            &lt;% end %&gt;\n        &lt;% end %&gt;\n\n    &lt;% end %&gt;\n\n    &lt;%= f.button :submit %&gt;\n\n&lt;% end %&gt;\n</code></pre>\n\n<p>Whenever i try to delete an image the server hangs. I get an internal error 500, which i have never seen before. This is the output from server:</p>\n\n<pre><code>Started PATCH \"/sl/lokacije/7\" for 127.0.0.1 at 2015-02-25 22:26:49 +0100\nProcessing by LocationsController#update as HTML\n  Parameters: {\"utf8\"=&gt;\"\u2713\", \"authenticity_token\"=&gt;\"WS+xrFB7XnDSwG1JpRztrlrCoBxpSXmEpRVj/rgHP78RrHuabKmclUFn/IWpSsp3wcI5pH+wNpxJ33uyGfUMlw==\", \"location\"=&gt;{\"name\"=&gt;\"sfsdfsdfs\", \"latitude\"=&gt;\"51.4976\", \"longitude\"=&gt;\"-0.2753\", \"location_images_attributes\"=&gt;{\"0\"=&gt;{\"_destroy\"=&gt;\"1\", \"id\"=&gt;\"8\"}, \"1\"=&gt;{\"_destroy\"=&gt;\"0\", \"id\"=&gt;\"9\"}}}, \"button\"=&gt;\"\", \"locale\"=&gt;\"sl\", \"id\"=&gt;\"7\"}\n  Location Load (0.3ms)  SELECT  `locations`.* FROM `locations` WHERE `locations`.`id` = 7 LIMIT 1\n   (0.1ms)  BEGIN\n  LocationImage Load (0.3ms)  SELECT `location_images`.* FROM `location_images` WHERE `location_images`.`location_id` = 7 AND `location_images`.`id` IN (8, 9)\n  SQL (0.3ms)  UPDATE `locations` SET `longitude` = -0.2753, `updated_at` = '2015-02-25 21:26:49.406353' WHERE `locations`.`id` = 7\n[AWS S3 200 0.597695 0 retries] head_object(:bucket_name=&gt;\"inter_d\",:key=&gt;\"location_images/location_images/000/000/008/original/Screenshot_2015-02-24_19.52.05.png\")  \n\n[AWS S3 200 0.166274 0 retries] head_object(:bucket_name=&gt;\"inter_d\",:key=&gt;\"location_images/location_images/000/000/008/thumb/Screenshot_2015-02-24_19.52.05.png\")  \n\n[AWS S3 200 0.14183 0 retries] head_object(:bucket_name=&gt;\"inter_d\",:key=&gt;\"location_images/location_images/000/000/008/small/Screenshot_2015-02-24_19.52.05.png\")  \n\n[AWS S3 200 0.172432 0 retries] head_object(:bucket_name=&gt;\"inter_d\",:key=&gt;\"location_images/location_images/000/000/008/large/Screenshot_2015-02-24_19.52.05.png\")  \n\n  SQL (0.3ms)  DELETE FROM `location_images` WHERE `location_images`.`id` = 8\n  Location Load (0.3ms)  SELECT  `locations`.* FROM `locations` WHERE `locations`.`id` = 7 LIMIT 1\n  LocationImage Load (0.2ms)  SELECT `location_images`.* FROM `location_images` WHERE `location_images`.`location_id` = 7\n[AWS S3 404 0.13343 0 retries] head_object(:bucket_name=&gt;\"inter_d\",:key=&gt;\"location_images/location_images/000/000/009/original/Screenshot_2015-02-16_08.23.57.png\") AWS::S3::Errors::NoSuchKey No Such Key\n\n[AWS S3 404 0.142441 0 retries] head_object(:bucket_name=&gt;\"inter_d\",:key=&gt;\"location_images/location_images/000/000/009/thumb/Screenshot_2015-02-16_08.23.57.png\") AWS::S3::Errors::NoSuchKey No Such Key\n\n[AWS S3 404 0.16999 0 retries] head_object(:bucket_name=&gt;\"inter_d\",:key=&gt;\"location_images/location_images/000/000/009/small/Screenshot_2015-02-16_08.23.57.png\") AWS::S3::Errors::NoSuchKey No Such Key\n\n[AWS S3 404 0.148309 0 retries] head_object(:bucket_name=&gt;\"inter_d\",:key=&gt;\"location_images/location_images/000/000/009/large/Screenshot_2015-02-16_08.23.57.png\") AWS::S3::Errors::NoSuchKey No Such Key\n\n  SQL (0.3ms)  DELETE FROM `location_images` WHERE `location_images`.`id` = 9\n  Location Load (0.2ms)  SELECT  `locations`.* FROM `locations` WHERE `locations`.`id` = 7 LIMIT 1\n  LocationImage Load (0.2ms)  SELECT `location_images`.* FROM `location_images` WHERE `location_images`.`location_id` = 7\n  SQL (0.1ms)  DELETE FROM `locations` WHERE `locations`.`id` = 7\n  User Load (0.3ms)  SELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1\n  Location Load (0.3ms)  SELECT `locations`.* FROM `locations` WHERE `locations`.`user_id` = 1\n  LocationImage Load (0.2ms)  SELECT `location_images`.* FROM `location_images` WHERE `location_images`.`location_id` = 8\n[AWS S3 200 0.135676 0 retries] head_object(:bucket_name=&gt;\"inter_d\",:key=&gt;\"location_images/location_images/000/000/007/original/Screenshot_2015-02-24_19.52.05.png\")  \n\n[AWS S3 200 0.140119 0 retries] head_object(:bucket_name=&gt;\"inter_d\",:key=&gt;\"location_images/location_images/000/000/007/thumb/Screenshot_2015-02-24_19.52.05.png\")  \n\n[AWS S3 200 0.15105 0 retries] head_object(:bucket_name=&gt;\"inter_d\",:key=&gt;\"location_images/location_images/000/000/007/small/Screenshot_2015-02-24_19.52.05.png\")  \n\n[AWS S3 200 0.144703 0 retries] head_object(:bucket_name=&gt;\"inter_d\",:key=&gt;\"location_images/location_images/000/000/007/large/Screenshot_2015-02-24_19.52.05.png\")  \n\n  SQL (0.3ms)  DELETE FROM `location_images` WHERE `location_images`.`id` = 7\n  Location Load (0.2ms)  SELECT  `locations`.* FROM `locations` WHERE `locations`.`id` = 8 LIMIT 1\n  LocationImage Load (0.2ms)  SELECT `location_images`.* FROM `location_images` WHERE `location_images`.`location_id` = 8\n  SQL (0.1ms)  DELETE FROM `locations` WHERE `locations`.`id` = 8\n  User Load (0.2ms)  SELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1\n  Location Load (0.2ms)  SELECT `locations`.* FROM `locations` WHERE `locations`.`user_id` = 1\n  LocationImage Load (0.2ms)  SELECT `location_images`.* FROM `location_images` WHERE `location_images`.`location_id` = 9\n  SQL (0.2ms)  DELETE FROM `locations` WHERE `locations`.`id` = 9\n   (0.4ms)  ROLLBACK\nCompleted 500 Internal Server Error in 2532ms\n\nRuntimeError - Can't modify frozen hash:\n  activerecord (4.2.0) lib/active_record/attribute_set/builder.rb:43:in `[]='\n  activerecord (4.2.0) lib/active_record/attribute_set.rb:39:in `write_from_user'\n  activerecord (4.2.0) lib/active_record/attribute_methods/write.rb:74:in `write_attribute_with_type_cast'\n  activerecord (4.2.0) lib/active_record/attribute_methods/write.rb:56:in `write_attribute'\n  activerecord (4.2.0) lib/active_record/attribute_methods/dirty.rb:92:in `write_attribute'\n  activerecord (4.2.0) lib/active_record/transactions.rb:393:in `restore_transaction_record_state'\n  activerecord (4.2.0) lib/active_record/transactions.rb:324:in `rolledback!'\n  activerecord (4.2.0) lib/active_record/connection_adapters/abstract/transaction.rb:73:in `rollback_records'\n  activerecord (4.2.0) lib/active_record/connection_adapters/abstract/transaction.rb:151:in `rollback'\n  activerecord (4.2.0) lib/active_record/connection_adapters/abstract/transaction.rb:183:in `rollback_transaction'\n  activerecord (4.2.0) lib/active_record/connection_adapters/abstract/transaction.rb:190:in `rescue in within_new_transaction'\n  activerecord (4.2.0) lib/active_record/connection_adapters/abstract/transaction.rb:205:in `within_new_transaction'\n  activerecord (4.2.0) lib/active_record/connection_adapters/abstract/database_statements.rb:213:in `transaction'\n  activerecord (4.2.0) lib/active_record/transactions.rb:220:in `transaction'\n  activerecord (4.2.0) lib/active_record/transactions.rb:344:in `with_transaction_returning_status'\n  activerecord (4.2.0) lib/active_record/persistence.rb:248:in `update'\n  app/controllers/locations_controller.rb:55:in `block in update'\n  actionpack (4.2.0) lib/action_controller/metal/mime_responds.rb:211:in `respond_to'\n  app/controllers/locations_controller.rb:54:in `update'\n  actionpack (4.2.0) lib/action_controller/metal/implicit_render.rb:4:in `send_action'\n  actionpack (4.2.0) lib/abstract_controller/base.rb:198:in `process_action'\n  actionpack (4.2.0) lib/action_controller/metal/rendering.rb:10:in `process_action'\n  actionpack (4.2.0) lib/abstract_controller/callbacks.rb:20:in `block in process_action'\n  activesupport (4.2.0) lib/active_support/callbacks.rb:117:in `call'\n  activesupport (4.2.0) lib/active_support/callbacks.rb:151:in `block in halting_and_conditional'\n  activesupport (4.2.0) lib/active_support/callbacks.rb:151:in `block in halting_and_conditional'\n  activesupport (4.2.0) lib/active_support/callbacks.rb:169:in `block in halting'\n  activesupport (4.2.0) lib/active_support/callbacks.rb:234:in `block in halting'\n  activesupport (4.2.0) lib/active_support/callbacks.rb:234:in `block in halting'\n  activesupport (4.2.0) lib/active_support/callbacks.rb:169:in `block in halting'\n  activesupport (4.2.0) lib/active_support/callbacks.rb:169:in `block in halting'\n  activesupport (4.2.0) lib/active_support/callbacks.rb:308:in `block (2 levels) in halting'\n  route_translator (4.0.0) lib/route_translator/extensions/action_controller.rb:20:in `set_locale_from_url'\n  activesupport (4.2.0) lib/active_support/callbacks.rb:427:in `block in make_lambda'\n  activesupport (4.2.0) lib/active_support/callbacks.rb:307:in `block in halting'\n  activesupport (4.2.0) lib/active_support/callbacks.rb:234:in `block in halting'\n  activesupport (4.2.0) lib/active_support/callbacks.rb:169:in `block in halting'\n  activesupport (4.2.0) lib/active_support/callbacks.rb:92:in `_run_callbacks'\n  activesupport (4.2.0) lib/active_support/callbacks.rb:734:in `_run_process_action_callbacks'\n  activesupport (4.2.0) lib/active_support/callbacks.rb:81:in `run_callbacks'\n  actionpack (4.2.0) lib/abstract_controller/callbacks.rb:19:in `process_action'\n  actionpack (4.2.0) lib/action_controller/metal/rescue.rb:29:in `process_action'\n  actionpack (4.2.0) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'\n  activesupport (4.2.0) lib/active_support/notifications.rb:164:in `block in instrument'\n  activesupport (4.2.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'\n  activesupport (4.2.0) lib/active_support/notifications.rb:164:in `instrument'\n  actionpack (4.2.0) lib/action_controller/metal/instrumentation.rb:30:in `process_action'\n  actionpack (4.2.0) lib/action_controller/metal/params_wrapper.rb:250:in `process_action'\n  activerecord (4.2.0) lib/active_record/railties/controller_runtime.rb:18:in `process_action'\n  actionpack (4.2.0) lib/abstract_controller/base.rb:137:in `process'\n  actionview (4.2.0) lib/action_view/rendering.rb:30:in `process'\n  actionpack (4.2.0) lib/action_controller/metal.rb:195:in `dispatch'\n  actionpack (4.2.0) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'\n  actionpack (4.2.0) lib/action_controller/metal.rb:236:in `block in action'\n  actionpack (4.2.0) lib/action_dispatch/routing/route_set.rb:73:in `dispatch'\n  actionpack (4.2.0) lib/action_dispatch/routing/route_set.rb:42:in `serve'\n  actionpack (4.2.0) lib/action_dispatch/journey/router.rb:43:in `block in serve'\n  actionpack (4.2.0) lib/action_dispatch/journey/router.rb:30:in `serve'\n  actionpack (4.2.0) lib/action_dispatch/routing/route_set.rb:802:in `call'\n  rack-pjax (0.8.0) lib/rack/pjax.rb:12:in `call'\n  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'\n  warden (1.2.3) lib/warden/manager.rb:34:in `call'\n  rack (1.6.0) lib/rack/etag.rb:24:in `call'\n  rack (1.6.0) lib/rack/conditionalget.rb:38:in `call'\n  rack (1.6.0) lib/rack/head.rb:13:in `call'\n  remotipart (1.2.1) lib/remotipart/middleware.rb:27:in `call'\n  actionpack (4.2.0) lib/action_dispatch/middleware/params_parser.rb:27:in `call'\n  actionpack (4.2.0) lib/action_dispatch/middleware/flash.rb:260:in `call'\n  rack (1.6.0) lib/rack/session/abstract/id.rb:225:in `context'\n  rack (1.6.0) lib/rack/session/abstract/id.rb:220:in `call'\n  actionpack (4.2.0) lib/action_dispatch/middleware/cookies.rb:560:in `call'\n  activerecord (4.2.0) lib/active_record/query_cache.rb:36:in `call'\n  activerecord (4.2.0) lib/active_record/connection_adapters/abstract/connection_pool.rb:647:in `call'\n  activerecord (4.2.0) lib/active_record/migration.rb:378:in `call'\n  actionpack (4.2.0) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'\n  activesupport (4.2.0) lib/active_support/callbacks.rb:88:in `_run_callbacks'\n  activesupport (4.2.0) lib/active_support/callbacks.rb:734:in `_run_call_callbacks'\n  activesupport (4.2.0) lib/active_support/callbacks.rb:81:in `run_callbacks'\n  actionpack (4.2.0) lib/action_dispatch/middleware/callbacks.rb:27:in `call'\n  actionpack (4.2.0) lib/action_dispatch/middleware/reloader.rb:73:in `call'\n  actionpack (4.2.0) lib/action_dispatch/middleware/remote_ip.rb:78:in `call'\n  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'\n  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'\n  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'\n  web-console (2.0.0) lib/action_dispatch/debug_exceptions.rb:18:in `middleware_call'\n  web-console (2.0.0) lib/action_dispatch/debug_exceptions.rb:13:in `call'\n  actionpack (4.2.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'\n  railties (4.2.0) lib/rails/rack/logger.rb:38:in `call_app'\n  railties (4.2.0) lib/rails/rack/logger.rb:20:in `block in call'\n  activesupport (4.2.0) lib/active_support/tagged_logging.rb:68:in `block in tagged'\n  activesupport (4.2.0) lib/active_support/tagged_logging.rb:26:in `tagged'\n  activesupport (4.2.0) lib/active_support/tagged_logging.rb:68:in `tagged'\n  railties (4.2.0) lib/rails/rack/logger.rb:20:in `call'\n  actionpack (4.2.0) lib/action_dispatch/middleware/request_id.rb:21:in `call'\n  rack (1.6.0) lib/rack/methodoverride.rb:22:in `call'\n  rack (1.6.0) lib/rack/runtime.rb:18:in `call'\n  activesupport (4.2.0) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'\n  rack (1.6.0) lib/rack/lock.rb:17:in `call'\n  actionpack (4.2.0) lib/action_dispatch/middleware/static.rb:113:in `call'\n  rack (1.6.0) lib/rack/sendfile.rb:113:in `call'\n  railties (4.2.0) lib/rails/engine.rb:518:in `call'\n  railties (4.2.0) lib/rails/application.rb:164:in `call'\n  rack (1.6.0) lib/rack/lock.rb:17:in `call'\n  rack (1.6.0) lib/rack/content_length.rb:15:in `call'\n  rack (1.6.0) lib/rack/handler/webrick.rb:89:in `service'\n  /Users/luka/.rvm/rubies/ruby-2.2.0/lib/ruby/2.2.0/webrick/httpserver.rb:138:in `service'\n  /Users/luka/.rvm/rubies/ruby-2.2.0/lib/ruby/2.2.0/webrick/httpserver.rb:94:in `run'\n  /Users/luka/.rvm/rubies/ruby-2.2.0/lib/ruby/2.2.0/webrick/server.rb:294:in `block in start_thread'\n\n\n\nStarted POST \"/__better_errors/15afdce6b6d2e168/variables\" for 127.0.0.1 at 2015-02-26 11:15:37 +0100\n</code></pre>\n\n<p>The problem is, that the same form works without any glitches in ruby 2.1.2 and rails 4.1.5.</p>\n\n<p>Any advice or workaround would be much appreciated.</p>\n\n<p>Best regards,\nLuka</p>\n\n<p>UPDATE:\neven if i go through console:</p>\n\n<pre><code>l=Location.last\n</code></pre>\n\n<p>Returns last location</p>\n\n<pre><code>l.location_images.find(11)\n</code></pre>\n\n<p>returns the corresponding record. If then i go</p>\n\n<pre><code>l.location_images.find(11).destroy\n</code></pre>\n\n<p>I get the same error as when running a server. Is it possible that this is due to something i have done wrong or is it a bug?</p>\n"}, {"tags": ["ruby", "twitter", "sinatra", "erb"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1424900999, "post_id": 28730110, "comment_id": 45746845, "body": "Welcome to Stack Overflow. When creating a title for a question, it isn&#39;t necessary to artificially add the tags to the sentence. Instead, create a grammatically correct sentence. The tags get added automatically by &quot;the system&quot; for you."}, {"owner": {"reputation": 37, "user_id": 4595035, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/76e671f7535b23239301fdc55baac14b?s=128&d=identicon&r=PG&f=1", "display_name": "skg22", "link": "https://stackoverflow.com/users/4595035/skg22"}, "reply_to_user": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1424901892, "post_id": 28730110, "comment_id": 45747304, "body": "Noted. Thanks for the editing aid @theTinMan"}], "answers": [{"comments": [{"owner": {"reputation": 37, "user_id": 4595035, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/76e671f7535b23239301fdc55baac14b?s=128&d=identicon&r=PG&f=1", "display_name": "skg22", "link": "https://stackoverflow.com/users/4595035/skg22"}, "edited": false, "score": 0, "creation_date": 1424904534, "post_id": 28730922, "comment_id": 45748515, "body": "Changing the method on the form to &quot;get&quot; doesn&#39;t work, unfortunately @alexcavalli"}, {"owner": {"reputation": 486, "user_id": 4280232, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/991774e0fc22ef2cc4967d9415f5f73d?s=128&d=identicon&r=PG&f=1", "display_name": "alexcavalli", "link": "https://stackoverflow.com/users/4280232/alexcavalli"}, "reply_to_user": {"reputation": 37, "user_id": 4595035, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/76e671f7535b23239301fdc55baac14b?s=128&d=identicon&r=PG&f=1", "display_name": "skg22", "link": "https://stackoverflow.com/users/4595035/skg22"}, "edited": false, "score": 0, "creation_date": 1424905719, "post_id": 28730922, "comment_id": 45749015, "body": "Hmm. Are you still seeing the sinatra 404 page with &quot;Sinatra doesn\u2019t know this ditty.&quot; on it, or something else?"}, {"owner": {"reputation": 37, "user_id": 4595035, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/76e671f7535b23239301fdc55baac14b?s=128&d=identicon&r=PG&f=1", "display_name": "skg22", "link": "https://stackoverflow.com/users/4595035/skg22"}, "edited": false, "score": 0, "creation_date": 1424908616, "post_id": 28730922, "comment_id": 45750074, "body": "I have an error which displays the statement, &quot;This page does not exist.&quot; @alexcavalli"}, {"owner": {"reputation": 486, "user_id": 4280232, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/991774e0fc22ef2cc4967d9415f5f73d?s=128&d=identicon&r=PG&f=1", "display_name": "alexcavalli", "link": "https://stackoverflow.com/users/4280232/alexcavalli"}, "reply_to_user": {"reputation": 37, "user_id": 4595035, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/76e671f7535b23239301fdc55baac14b?s=128&d=identicon&r=PG&f=1", "display_name": "skg22", "link": "https://stackoverflow.com/users/4595035/skg22"}, "edited": false, "score": 0, "creation_date": 1424909102, "post_id": 28730922, "comment_id": 45750213, "body": "@skg22 Is &quot;This page does not exist.&quot; everything that&#39;s getting rendered to the browser (or is that text embedded in one of your pages)? Can you tell me what version of sinatra you&#39;re using? I&#39;ll try to reproduce."}, {"owner": {"reputation": 37, "user_id": 4595035, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/76e671f7535b23239301fdc55baac14b?s=128&d=identicon&r=PG&f=1", "display_name": "skg22", "link": "https://stackoverflow.com/users/4595035/skg22"}, "edited": false, "score": 0, "creation_date": 1424942644, "post_id": 28730922, "comment_id": 45760933, "body": "I&#39;m using RubyMine with sinatra gem version 1.4.5 @alexcavalli"}, {"owner": {"reputation": 486, "user_id": 4280232, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/991774e0fc22ef2cc4967d9415f5f73d?s=128&d=identicon&r=PG&f=1", "display_name": "alexcavalli", "link": "https://stackoverflow.com/users/4280232/alexcavalli"}, "reply_to_user": {"reputation": 37, "user_id": 4595035, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/76e671f7535b23239301fdc55baac14b?s=128&d=identicon&r=PG&f=1", "display_name": "skg22", "link": "https://stackoverflow.com/users/4595035/skg22"}, "edited": false, "score": 0, "creation_date": 1424966515, "post_id": 28730922, "comment_id": 45776405, "body": "I&#39;m using that exact same version. I made these two test files, which is your setup minus the twitter part, and it works for me: <a href=\"https://gist.github.com/alexcavalli/31ada9f3f7e8cd2953d2\" rel=\"nofollow noreferrer\">gist.github.com/alexcavalli/31ada9f3f7e8cd2953d2</a> (but if I change the form method to post I get a 404 page) Can you provide any more information? Are there other pages in your application? If you comment out the twitter parts does it work?"}, {"owner": {"reputation": 37, "user_id": 4595035, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/76e671f7535b23239301fdc55baac14b?s=128&d=identicon&r=PG&f=1", "display_name": "skg22", "link": "https://stackoverflow.com/users/4595035/skg22"}, "edited": false, "score": 0, "creation_date": 1424967040, "post_id": 28730922, "comment_id": 45776758, "body": "My original files have href attributes which allows user to go to any of the other 5 pages from the current page. The 2 codes I posted are test files because out of the 6 pages, this is the only one that&#39;s giving me problems @alexcavalli"}, {"owner": {"reputation": 486, "user_id": 4280232, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/991774e0fc22ef2cc4967d9415f5f73d?s=128&d=identicon&r=PG&f=1", "display_name": "alexcavalli", "link": "https://stackoverflow.com/users/4280232/alexcavalli"}, "reply_to_user": {"reputation": 37, "user_id": 4595035, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/76e671f7535b23239301fdc55baac14b?s=128&d=identicon&r=PG&f=1", "display_name": "skg22", "link": "https://stackoverflow.com/users/4595035/skg22"}, "edited": false, "score": 0, "creation_date": 1424969033, "post_id": 28730922, "comment_id": 45778039, "body": "Does this problem occur if you click the form submit button with the &quot;default&quot; option selected? I.e. does it occur whenever you click the button, regardless of the option?"}], "tags": [], "owner": {"reputation": 486, "user_id": 4280232, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/991774e0fc22ef2cc4967d9415f5f73d?s=128&d=identicon&r=PG&f=1", "display_name": "alexcavalli", "link": "https://stackoverflow.com/users/4280232/alexcavalli"}, "is_accepted": false, "score": 0, "last_activity_date": 1424903462, "last_edit_date": 1495540247, "creation_date": 1424903462, "answer_id": 28730922, "question_id": 28730110, "link": "https://stackoverflow.com/questions/28730110/sorting-tweets-by-re-tweets-favourites/28730922#28730922", "title": "Sorting tweets by re-tweets/favourites", "body": "<p>I'm not especially familiar with sinatra, but it looks like you're setting the form method to <code>post</code> but there is no <code>post</code> handler for the <code>/list_of_tweets</code> route. This answer has some suggestions for defining verb-agnostic handlers:</p>\n\n<p><a href=\"https://stackoverflow.com/a/8424097/4280232\">https://stackoverflow.com/a/8424097/4280232</a></p>\n\n<p>You could try this</p>\n\n<pre><code>list_of_tweets = lambda do\n  puts \"Visiting history page...\"\n  tweets = client.user_timeline(user)\n  @history = tweets.take(20)\n  erb :tweets_list\nend\nget  '/list_of_tweets', &amp;list_of_tweets\npost '/list_of_tweets', &amp;list_of_tweets\n</code></pre>\n\n<p>Alternatively, and probably more correctly as this operation appears to be read-only, you could set the method on the form to \"get\" instead of \"post\". See <a href=\"http://www.w3.org/TR/html401/interact/forms.html#h-17.13.1\" rel=\"nofollow noreferrer\">http://www.w3.org/TR/html401/interact/forms.html#h-17.13.1</a></p>\n\n<pre><code>&lt;form method=\"get\"&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 37, "user_id": 4595035, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/76e671f7535b23239301fdc55baac14b?s=128&d=identicon&r=PG&f=1", "display_name": "skg22", "link": "https://stackoverflow.com/users/4595035/skg22"}, "is_accepted": true, "score": 0, "last_activity_date": 1426102164, "creation_date": 1426102164, "answer_id": 28995647, "question_id": 28730110, "link": "https://stackoverflow.com/questions/28730110/sorting-tweets-by-re-tweets-favourites/28995647#28995647", "title": "Sorting tweets by re-tweets/favourites", "body": "<p>.rb file:</p>\n\n<pre><code>require 'sinatra'\nrequire 'twitter'\nrequire 'erb'\ninclude ERB::Util\n\nconfig = {\n:consumer_key =&gt;  '..' ,\n:consumer_secret =&gt; '..' ,\n:access_token =&gt; '..' ,\n:access_token_secret =&gt; '..'\n}\n\nclient = Twitter::REST::Client.new(config)\nget '/list_of_tweets' do\nputs \"Visiting history page...\"\ntweets = client.user_timeline(user)\n@history = tweets.take(20)\nunless @params[:operation].nil?\n    puts \"selected #{@params[:operation]}\"\n    if @params[:operation] == \"favorite_count\"\n        @history.sort_by!{|tweet| tweet.favorite_count}\n        @history.reverse!\n    elsif @params[:operation] == \"retweet_count\"\n        @history.sort_by!{|tweet| tweet.retweet_count}\n        @history.reverse!\n    elsif @params[:operation] == \"default\"\n        puts \"default\"\n    end\nend\nerb :tweets_list\nend\n</code></pre>\n\n<p>.erb file:</p>\n\n<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n&lt;head&gt;\n  &lt;title&gt;Twitter Interface&lt;/title&gt;\n&lt;/head&gt;\n&lt;body&gt;\n\n&lt;h1&gt;List of Tweets&lt;/h1&gt;\n\n&lt;form method=\"post\"&gt;\n  &lt;h3&gt;Sort Tweets by&lt;/h3&gt;\n  &lt;input type=\"radio\" name=\"operation\" value=\"favorite_count\" checked/&gt;Favourites\n  &lt;input type=\"radio\" name=\"operation\" value=\"retweet_count\"/&gt;Retweets\n  &lt;input type=\"radio\" name=\"operation\" value=\"default\"/&gt;Default\n  &lt;input type=\"submit\" value=\"submit\"/&gt;\n&lt;/form&gt;\n\n&lt;table border=\"1\"&gt;\n  &lt;tr&gt;\n    &lt;th&gt;Time Posted&lt;/th&gt;\n    &lt;th&gt;Description of Tweets&lt;/th&gt;\n    &lt;th&gt;Number of Retweets&lt;/th&gt;\n    &lt;th&gt;Number of Favourites&lt;/th&gt;\n  &lt;/tr&gt;\n\n  &lt;% @history.each do |tweet| %&gt;\n      &lt;tr&gt;\n        &lt;td&gt;&lt;%= tweet.created_at %&gt;&lt;/td&gt;\n        &lt;td&gt;&lt;%= tweet.text %&gt;&lt;/td&gt;\n        &lt;td&gt;&lt;%= tweet.retweet_count %&gt;&lt;/td&gt;\n        &lt;td&gt;&lt;%= tweet.favorite_count %&gt; &lt;/td&gt;\n      &lt;/tr&gt;\n  &lt;% end %&gt;\n&lt;/table&gt;\n&lt;% end %&gt;\n</code></pre>\n"}], "owner": {"reputation": 37, "user_id": 4595035, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/76e671f7535b23239301fdc55baac14b?s=128&d=identicon&r=PG&f=1", "display_name": "skg22", "link": "https://stackoverflow.com/users/4595035/skg22"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 310, "favorite_count": 0, "accepted_answer_id": 28995647, "answer_count": 2, "score": 0, "last_activity_date": 1426102164, "creation_date": 1424900171, "last_edit_date": 1424900893, "question_id": 28730110, "link": "https://stackoverflow.com/questions/28730110/sorting-tweets-by-re-tweets-favourites", "title": "Sorting tweets by re-tweets/favourites", "body": "<p>I'm trying to implement a method whereby a user can manipulate three radio buttons, each with assigned methods, to sort the tweets either by retweets, by favourites or default(by date).</p>\n\n<p>Currently, the page lists the tweets by date as default but every time I pressed either of the two buttons, I get the error \"This page does not exist.\"</p>\n\n<p>My .rb file is:</p>\n\n<pre><code>require 'sinatra'\nrequire 'twitter'\nrequire 'erb'\ninclude ERB::Util\n\nconfig = {\n    :consumer_key =&gt;  '..' ,\n    :consumer_secret =&gt; '..' ,\n    :access_token =&gt; '..' ,\n    :access_token_secret =&gt; '..'\n}\n\nclient = Twitter::REST::Client.new(config)\n\nget '/list_of_tweets' do\n   puts \"Visiting history page...\"\n   tweets = client.user_timeline(user)\n   @history = tweets.take(20)\n   erb :tweets_list\nend\n</code></pre>\n\n<p>My tweets_list.erb file is:</p>\n\n<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n&lt;head&gt;\n  &lt;title&gt;Twitter Interface&lt;/title&gt;\n&lt;/head&gt;\n&lt;body&gt;\n\n&lt;h1&gt;List of Tweets&lt;/h1&gt;\n\n&lt;form method=\"post\"&gt;\n  &lt;h3&gt;Sort Tweets by&lt;/h3&gt;\n  &lt;input type=\"radio\" name=\"operation\" value=\"favorite_count\" checked/&gt;Favourites\n  &lt;input type=\"radio\" name=\"operation\" value=\"retweet_count\"/&gt;Retweets\n  &lt;input type=\"radio\" name=\"operation\" value=\"default\"/&gt;Default\n  &lt;input type=\"submit\" value=\"submit\"/&gt;\n&lt;/form&gt;\n\n&lt;% unless @history.nil? %&gt;\n    &lt;% if @params[:operation] == \"favourite_count\"%&gt;\n        &lt;% @history = tweets.take(20).sort_by!{|tweet| tweet.favorite_count} %&gt;\n    &lt;% else %&gt;\n        &lt;% @history.reverse! %&gt;\n    &lt;% end %&gt;\n    &lt;% if @params[:operation] == \"retweet_count\" %&gt;\n        &lt;% @history = tweets.take(20).sort_by!{|tweet| tweet.favorite_count} %&gt;\n    &lt;% else %&gt;\n        &lt;% @history.reverse! %&gt;\n&lt;% end %&gt;\n    &lt;% if @params[:operation] == \"default\" %&gt;\n    &lt;% @history = tweets.take(20) %&gt;\n    &lt;% else %&gt;\n        &lt;% @history.reverse! %&gt;\n    &lt;% end %&gt;\n\n    &lt;table border=\"1\"&gt;\n      &lt;tr&gt;\n        &lt;th&gt;Time Posted&lt;/th&gt;\n        &lt;th&gt;Description of Tweets&lt;/th&gt;\n        &lt;th&gt;Number of Retweets&lt;/th&gt;\n        &lt;th&gt;Number of Favourites&lt;/th&gt;\n      &lt;/tr&gt;\n\n      &lt;% @history.each do |tweet| %&gt;\n          &lt;tr&gt;\n            &lt;td&gt;&lt;%= tweet.created_at %&gt;&lt;/td&gt;\n            &lt;td&gt;&lt;%= tweet.text %&gt;&lt;/td&gt;\n            &lt;td&gt;&lt;%= tweet.retweet_count %&gt;&lt;/td&gt;\n            &lt;td&gt;&lt;%= tweet.favorite_count %&gt; &lt;/td&gt;\n          &lt;/tr&gt;\n      &lt;% end %&gt;\n    &lt;/table&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>\n</p>\n"}, {"tags": ["ruby", "gem"], "answers": [{"tags": [], "owner": {"reputation": 22303, "user_id": 2456433, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NiN8K.jpg?s=128&g=1", "display_name": "infused", "link": "https://stackoverflow.com/users/2456433/infused"}, "is_accepted": false, "score": 0, "last_activity_date": 1424899718, "creation_date": 1424899718, "answer_id": 28729970, "question_id": 28729740, "link": "https://stackoverflow.com/questions/28729740/how-to-pick-gems-from-a-specific-directory/28729970#28729970", "title": "How to pick gems from a specific directory", "body": "<p>Hopefully you are using Bundler to load the required gems.  Then you just specify the path to the gem file in your <code>Gemfile</code>:</p>\n\n<pre><code>gem 'my_gem', :path =&gt; '~/codebase/ruby/mygem'\n</code></pre>\n"}], "owner": {"reputation": 328, "user_id": 1881908, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/f56b7d9e6951162d3fc0495df58c63ab?s=128&d=identicon&r=PG", "display_name": "Ander Juaristi", "link": "https://stackoverflow.com/users/1881908/ander-juaristi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 46, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1424901053, "creation_date": 1424898882, "last_edit_date": 1424901053, "question_id": 28729740, "link": "https://stackoverflow.com/questions/28729740/how-to-pick-gems-from-a-specific-directory", "title": "How to pick gems from a specific directory", "body": "<p>I forked a gem I use a lot in order to code some enhancements on it. I want it to be installed in a subfolder called ~/codebase/ruby, where I keep all my Ruby projects, arranged in subdirectories.</p>\n\n<p>To do that, I built and installed the gem with the following commands:</p>\n\n<pre><code>gem build my_gem.gemspec\ngem install mygem-x.x.gem -i./mygem\n</code></pre>\n\n<p><code>mygem</code> is installed in <code>~/codebase/ruby/mygem</code>. I can't get my client code (which is in another directory) to grab <code>mygem</code> from there.</p>\n\n<p>I've tried all of the following without success:</p>\n\n<ul>\n<li>Running ruby with argument <code>-I&lt;path_to_mygem&gt;.</code></li>\n<li>Adding <code>&lt;path_to_mygem&gt;</code> to <code>PATH</code>.</li>\n<li>Putting <code>:gempath: &lt;path_to_mygem&gt;</code> into <code>~/.gemrc</code>.</li>\n</ul>\n\n<p>I know I could put the gem in <code>~/.gem/ruby/&lt;version&gt;</code> (since it appears in <code>gem env</code>) and that would probably work, but that would break my existing directory structure of Ruby code, forcing me to code in a different directory only for <code>mygem</code>, which is something I want to avoid unless it's the only option.</p>\n\n<p>Thoughts?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord", "named-scope"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1424901130, "post_id": 28729608, "comment_id": 45746919, "body": "Is this Rails 2.x or a more modern version?"}, {"owner": {"reputation": 20590, "user_id": 504963, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/xlYLo.jpg?s=128&g=1", "display_name": "Antarr Byrd", "link": "https://stackoverflow.com/users/504963/antarr-byrd"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1424903315, "post_id": 28729608, "comment_id": 45747919, "body": "@tadman it is 4.x, so I&#39;m guess in need a scope not named_scope"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1424903888, "post_id": 28729608, "comment_id": 45748193, "body": "Wasn&#39;t sure if you were dealing with a legacy application or not. The new <code>scope</code> method is a lot more flexible and worth checking out."}], "answers": [{"comments": [{"owner": {"reputation": 306, "user_id": 2619418, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/shBSq.jpg?s=128&g=1", "display_name": "eritiro", "link": "https://stackoverflow.com/users/2619418/eritiro"}, "reply_to_user": {"reputation": 20590, "user_id": 504963, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/xlYLo.jpg?s=128&g=1", "display_name": "Antarr Byrd", "link": "https://stackoverflow.com/users/504963/antarr-byrd"}, "edited": false, "score": 0, "creation_date": 1424901213, "post_id": 28729888, "comment_id": 45746960, "body": "my bad, I forget to delete the extra {}"}], "tags": [], "owner": {"reputation": 306, "user_id": 2619418, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/shBSq.jpg?s=128&g=1", "display_name": "eritiro", "link": "https://stackoverflow.com/users/2619418/eritiro"}, "is_accepted": false, "score": 1, "last_activity_date": 1424901072, "last_edit_date": 1424901072, "creation_date": 1424899451, "answer_id": 28729888, "question_id": 28729608, "link": "https://stackoverflow.com/questions/28729608/creating-names-scoped-based-on-join/28729888#28729888", "title": "Creating names scoped based on join", "body": "<p>conditions expects a hash, not a block.</p>\n\n<p>Try this:</p>\n\n<pre><code>named_scope :with_iphone_support,\n             conditions: 'exists(select * from versions where iphone_support = 1 and app_id = apps.id)'\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": true, "score": 1, "last_activity_date": 1424901202, "creation_date": 1424901202, "answer_id": 28730384, "question_id": 28729608, "link": "https://stackoverflow.com/questions/28729608/creating-names-scoped-based-on-join/28730384#28730384", "title": "Creating names scoped based on join", "body": "<p>Generally it should look something like this for Rails 2:</p>\n\n<pre><code>named_scope :with_iphone_support,\n  joins: :version,\n  conditions: { versions: { iphone_support: true } }\n</code></pre>\n\n<p>It's not possible to pass in a block to something like that.</p>\n\n<p>Rails 3.x and newer use the <code>scope</code> + <code>where</code> method for defining scopes.</p>\n"}], "owner": {"reputation": 20590, "user_id": 504963, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/xlYLo.jpg?s=128&g=1", "display_name": "Antarr Byrd", "link": "https://stackoverflow.com/users/504963/antarr-byrd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 26, "favorite_count": 0, "accepted_answer_id": 28730384, "answer_count": 2, "score": 0, "last_activity_date": 1424901202, "creation_date": 1424898494, "question_id": 28729608, "link": "https://stackoverflow.com/questions/28729608/creating-names-scoped-based-on-join", "title": "Creating names scoped based on join", "body": "<p>I need filter 'apps' in my rails project based on whether they support iphone. I am trying to create a named scope for this purpose but I am getting the following error.</p>\n\n<pre><code>app/models/app.rb:21: syntax error, unexpected '}', expecting =&gt;\napp/models/app.rb:21: syntax error, unexpected '}', expecting =&gt;\napp/controllers/apps_controller.rb:5:in `index'\n</code></pre>\n\n<p>app.rb</p>\n\n<pre><code>named_scope :with_iphone_support,\n              joins: :version,\n              conditions: {:versions.any{ |v| v.iphone_support == true}}\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "rails-activerecord", "optimistic-locking"], "comments": [{"owner": {"reputation": 79161, "user_id": 1064226, "user_type": "registered", "profile_image": "https://graph.facebook.com/36912842/picture?type=large", "display_name": "Frederick Cheung", "link": "https://stackoverflow.com/users/1064226/frederick-cheung"}, "edited": false, "score": 1, "creation_date": 1424897712, "post_id": 28729163, "comment_id": 45745018, "body": "Maybe it&#39;s the default, but the lock version column should have a default value of 0 (in the database)"}, {"owner": {"reputation": 2049, "user_id": 324098, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5ddb089dbe33b4f8e0d04e7f87155e0b?s=128&d=identicon&r=PG", "display_name": "CodeGroover", "link": "https://stackoverflow.com/users/324098/codegroover"}, "edited": false, "score": 0, "creation_date": 1424898414, "post_id": 28729163, "comment_id": 45745412, "body": "are u sure u doing it for first time?"}, {"owner": {"reputation": 2049, "user_id": 324098, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5ddb089dbe33b4f8e0d04e7f87155e0b?s=128&d=identicon&r=PG", "display_name": "CodeGroover", "link": "https://stackoverflow.com/users/324098/codegroover"}, "reply_to_user": {"reputation": 79161, "user_id": 1064226, "user_type": "registered", "profile_image": "https://graph.facebook.com/36912842/picture?type=large", "display_name": "Frederick Cheung", "link": "https://stackoverflow.com/users/1064226/frederick-cheung"}, "edited": false, "score": 0, "creation_date": 1424899902, "post_id": 28729163, "comment_id": 45746259, "body": "@FrederickCheung lock_version is already 0"}], "answers": [{"comments": [{"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 4, "creation_date": 1424897732, "post_id": 28729311, "comment_id": 45745031, "body": "So the migrations should have been: <code>add_column :articles, :lock_version, :integer, default: 0, null: false</code>"}, {"owner": {"reputation": 2049, "user_id": 324098, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5ddb089dbe33b4f8e0d04e7f87155e0b?s=128&d=identicon&r=PG", "display_name": "CodeGroover", "link": "https://stackoverflow.com/users/324098/codegroover"}, "edited": false, "score": 0, "creation_date": 1424900120, "post_id": 28729311, "comment_id": 45746392, "body": "i vote down, lock_version is already 0, and in the example, author using bin/rails console"}, {"owner": {"reputation": 7262, "user_id": 845371, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/8095efdc89f4a70029477fcb58cddd06?s=128&d=identicon&r=PG", "display_name": "Rafael Adel", "link": "https://stackoverflow.com/users/845371/rafael-adel"}, "reply_to_user": {"reputation": 2049, "user_id": 324098, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5ddb089dbe33b4f8e0d04e7f87155e0b?s=128&d=identicon&r=PG", "display_name": "CodeGroover", "link": "https://stackoverflow.com/users/324098/codegroover"}, "edited": false, "score": 4, "creation_date": 1424953263, "post_id": 28729311, "comment_id": 45767558, "body": "@CodeGroover Apparently rails console is showing <code>lock_verison</code> to have 0 value. But when I inspected the database it had <code>null</code> value. Changing the column to have a default values solved the problem."}], "tags": [], "owner": {"reputation": 306, "user_id": 2619418, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/shBSq.jpg?s=128&g=1", "display_name": "eritiro", "link": "https://stackoverflow.com/users/2619418/eritiro"}, "is_accepted": true, "score": 9, "last_activity_date": 1424897924, "last_edit_date": 1424897924, "creation_date": 1424897422, "answer_id": 28729311, "question_id": 28729163, "link": "https://stackoverflow.com/questions/28729163/rails-optimistic-locking-always-fires-staleobjecterror-exception/28729311#28729311", "title": "Rails - Optimistic locking always fires StaleObjectError exception", "body": "<p>You have to initialize all the articles lock_version to 0.\nLook at the query:</p>\n\n<pre><code>UPDATE \"articles\" SET \"title\" = 'dwdwd', \"updated_at\" = '2015-02-25 20:40:36.537876', \"lock_version\" = 1 WHERE (\"articles\".\"id\" = 1 AND \"articles\".\"lock_version\" = 0)\n       (0.1ms) \n</code></pre>\n\n<p>If the query returns 0 records updated, then the framework suppose that you have updated the version or deleted the object in another thread.</p>\n"}], "owner": {"reputation": 7262, "user_id": 845371, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/8095efdc89f4a70029477fcb58cddd06?s=128&d=identicon&r=PG", "display_name": "Rafael Adel", "link": "https://stackoverflow.com/users/845371/rafael-adel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2472, "favorite_count": 0, "accepted_answer_id": 28729311, "answer_count": 1, "score": 5, "last_activity_date": 1424897924, "creation_date": 1424896915, "question_id": 28729163, "link": "https://stackoverflow.com/questions/28729163/rails-optimistic-locking-always-fires-staleobjecterror-exception", "title": "Rails - Optimistic locking always fires StaleObjectError exception", "body": "<p>I'm learning rails, And read about optimistic lock. I've added <code>lock_version</code> column of type <code>integer</code> into my <code>articles</code> table.</p>\n\n<p>But now whenever I try to update a record <strong>for the first time</strong>, I get <code>StaleObjectError</code> exception.</p>\n\n<p>Here's my migration:</p>\n\n<pre><code>class AddLockVersionToArticle &lt; ActiveRecord::Migration\n  def change\n    add_column :articles, :lock_version, :integer\n  end\nend\n</code></pre>\n\n<p>When I try updating an article through rails console:</p>\n\n<pre><code>article = Article.first\n=&gt; #&lt;Article id: 1, title: \"Ccccc\", text: \"dfdsfsdfsdf\", created_at: \"2015-02-20 21:58:45\", updated_at: \"2015-02-25 20:03:12\", lock_version: 0&gt;\n</code></pre>\n\n<p>And I do:</p>\n\n<pre><code>article.title = \"new title\"\narticle.save\n</code></pre>\n\n<p>I get this:</p>\n\n<pre><code>(0.3ms)  begin transaction\n   (0.3ms)  UPDATE \"articles\" SET \"title\" = 'dwdwd', \"updated_at\" = '2015-02-25 20:40:36.537876', \"lock_version\" = 1 WHERE (\"articles\".\"id\" = 1 AND \"articles\".\"lock_version\" = 0)\n   (0.1ms)  rollback transaction\nActiveRecord::StaleObjectError: Attempted to update a stale object: Article\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "arrays", "activerecord"], "comments": [{"owner": {"reputation": 14340, "user_id": 2612259, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/70fec6995fdcaebf6362e10bd501f34f?s=128&d=identicon&r=PG", "display_name": "nPn", "link": "https://stackoverflow.com/users/2612259/npn"}, "edited": false, "score": 0, "creation_date": 1424897539, "post_id": 28729095, "comment_id": 45744915, "body": "Do you actually want to store the data as an array, or just split it after reading it from the column?"}, {"owner": {"reputation": 2549, "user_id": 3284936, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/TDrZU.jpg?s=128&g=1", "display_name": "dimitry_n", "link": "https://stackoverflow.com/users/3284936/dimitry-n"}, "reply_to_user": {"reputation": 14340, "user_id": 2612259, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/70fec6995fdcaebf6362e10bd501f34f?s=128&d=identicon&r=PG", "display_name": "nPn", "link": "https://stackoverflow.com/users/2612259/npn"}, "edited": false, "score": 0, "creation_date": 1424897783, "post_id": 28729095, "comment_id": 45745067, "body": "@nPn Thanks for bringing this up. I forgot to mention that I am aware of the <code>seriazlie</code> method, but I&#39;m looking to split the text into <code>array</code> after saving the object."}, {"owner": {"reputation": 14340, "user_id": 2612259, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/70fec6995fdcaebf6362e10bd501f34f?s=128&d=identicon&r=PG", "display_name": "nPn", "link": "https://stackoverflow.com/users/2612259/npn"}, "edited": false, "score": 0, "creation_date": 1424897890, "post_id": 28729095, "comment_id": 45745128, "body": "then just move the save <b>before</b> the bars.split(&#39;,&#39;)"}], "answers": [{"comments": [{"owner": {"reputation": 14407, "user_id": 3035830, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/14809f2ad7f14e2867798697ab8f8006?s=128&d=identicon&r=PG", "display_name": "shivam", "link": "https://stackoverflow.com/users/3035830/shivam"}, "edited": false, "score": 0, "creation_date": 1424931336, "post_id": 28729284, "comment_id": 45756002, "body": "would you please care to explain your answer?"}], "tags": [], "owner": {"reputation": 1, "user_id": 4607631, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/f404ef9747fcab5975c9d9b04e9cd8d5?s=128&d=identicon&r=PG", "display_name": "user4607631", "link": "https://stackoverflow.com/users/4607631/user4607631"}, "is_accepted": false, "score": 0, "last_activity_date": 1424897343, "creation_date": 1424897343, "answer_id": 28729284, "question_id": 28729095, "link": "https://stackoverflow.com/questions/28729095/save-activerecord-object-as-an-array-rails-4/28729284#28729284", "title": "Save ActiveRecord object as an array - Rails 4", "body": "<pre><code>class Filter &lt; ActiveRecord::Base\n  serialize :bars, Array\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2549, "user_id": 3284936, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/TDrZU.jpg?s=128&g=1", "display_name": "dimitry_n", "link": "https://stackoverflow.com/users/3284936/dimitry-n"}, "edited": false, "score": 0, "creation_date": 1424898216, "post_id": 28729393, "comment_id": 45745299, "body": "makes sense. How would modify the instance of <code>Foo</code> that&#39;s being saved then?"}, {"owner": {"reputation": 306, "user_id": 2619418, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/shBSq.jpg?s=128&g=1", "display_name": "eritiro", "link": "https://stackoverflow.com/users/2619418/eritiro"}, "reply_to_user": {"reputation": 2549, "user_id": 3284936, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/TDrZU.jpg?s=128&g=1", "display_name": "dimitry_n", "link": "https://stackoverflow.com/users/3284936/dimitry-n"}, "edited": false, "score": 0, "creation_date": 1424898632, "post_id": 28729393, "comment_id": 45745519, "body": "You can use &#39;serialize&#39;, or you could make two methods: def bars= value    serialized_bars = value.join(&#39;,&#39;) end  def bars    serialized_bars.split(&#39;,&#39;) end  alias_attribute :serialized_bars, :bars"}], "tags": [], "owner": {"reputation": 306, "user_id": 2619418, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/shBSq.jpg?s=128&g=1", "display_name": "eritiro", "link": "https://stackoverflow.com/users/2619418/eritiro"}, "is_accepted": false, "score": 0, "last_activity_date": 1424898915, "last_edit_date": 1424898915, "creation_date": 1424897777, "answer_id": 28729393, "question_id": 28729095, "link": "https://stackoverflow.com/questions/28729095/save-activerecord-object-as-an-array-rails-4/28729393#28729393", "title": "Save ActiveRecord object as an array - Rails 4", "body": "<p>The method bars.split(',') does not modify the string, just returns an array. You are discarding the returned array.</p>\n\n<p>Edit:</p>\n\n<p>You can use 'serialize', or you could make two methods:</p>\n\n<pre><code>def bars= value\n   serialized_bars = value.join(',')\nend\n\ndef bars\n   serialized_bars.split(',')\nend\n\nalias_attribute :serialized_bars, :bars\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2549, "user_id": 3284936, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/TDrZU.jpg?s=128&g=1", "display_name": "dimitry_n", "link": "https://stackoverflow.com/users/3284936/dimitry-n"}, "edited": false, "score": 0, "creation_date": 1424898133, "post_id": 28729454, "comment_id": 45745257, "body": "I&#39;m playing around with this in the console, doing <code>Foo.create(bars:&quot;Split this mother&quot;)</code>, then calling <code>Foo.last.bars_to_array</code>. <code>Foo.last.bars</code> still returns a <code>String</code>."}, {"owner": {"reputation": 14340, "user_id": 2612259, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/70fec6995fdcaebf6362e10bd501f34f?s=128&d=identicon&r=PG", "display_name": "nPn", "link": "https://stackoverflow.com/users/2612259/npn"}, "reply_to_user": {"reputation": 2549, "user_id": 3284936, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/TDrZU.jpg?s=128&g=1", "display_name": "dimitry_n", "link": "https://stackoverflow.com/users/3284936/dimitry-n"}, "edited": false, "score": 0, "creation_date": 1424898578, "post_id": 28729454, "comment_id": 45745485, "body": "the bars method will just return the actual column (string)."}], "tags": [], "owner": {"reputation": 14340, "user_id": 2612259, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/70fec6995fdcaebf6362e10bd501f34f?s=128&d=identicon&r=PG", "display_name": "nPn", "link": "https://stackoverflow.com/users/2612259/npn"}, "is_accepted": false, "score": 0, "last_activity_date": 1424899355, "last_edit_date": 1424899355, "creation_date": 1424897998, "answer_id": 28729454, "question_id": 28729095, "link": "https://stackoverflow.com/questions/28729095/save-activerecord-object-as-an-array-rails-4/28729454#28729454", "title": "Save ActiveRecord object as an array - Rails 4", "body": "<p>If what you are trying to accomplish is to have the bars method always just return the string that you store in the text column as an array (split my comma's), then do the following.</p>\n\n<p>Add the following method to your model. This will override the bars method. It will read the actual column, then spit it by comma's and retrun the array.</p>\n\n<p>You don't need your bars_to_array method, the data will be stored as a string but will always be returned as the split array.</p>\n\n<pre><code>def bars\n  read_attribute(:bars).split(',')\nend\n</code></pre>\n"}], "owner": {"reputation": 2549, "user_id": 3284936, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/TDrZU.jpg?s=128&g=1", "display_name": "dimitry_n", "link": "https://stackoverflow.com/users/3284936/dimitry-n"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 162, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1424899355, "creation_date": 1424896693, "last_edit_date": 1424897854, "question_id": 28729095, "link": "https://stackoverflow.com/questions/28729095/save-activerecord-object-as-an-array-rails-4", "title": "Save ActiveRecord object as an array - Rails 4", "body": "<p>Say I have a class <code>Foo</code>. One of <code>Foo's</code> columns is called <code>bars</code>. I want <code>bars</code> to split its <code>text</code> contents by <code>,</code>, creating an Array. So <code>\"this, to, array\"</code> to <code>[\"this\",\"to\" ,\"array\"]</code>. For some reason, after creating a new instance of <code>Foo</code>, <code>Foo.last.bars</code> still returns <code>bars</code> as <code>String</code>. I have a a feeling its my <code>bars_to_array</code> method. </p>\n\n<p>I have:</p>\n\n<p><strong>Foo Class:</strong></p>\n\n<pre><code>class Filter &lt; ActiveRecord::Base\n  ...\n  def bars_to_array\n    bars.split(',')\n    save\n  end\n  ...\nend  \n</code></pre>\n\n<p><strong>Foo's Migraiton:</strong></p>\n\n<pre><code>class CreateFoos &lt; ActiveRecord::Migration\n  def change\n    create_table :foos do |t|\n      ...     \n      t.text :bars\n      ...\n    end\n  end\nend\n</code></pre>\n\n<p><strong>foos#create:</strong> </p>\n\n<pre><code>def create\n  ...\n  @foo = Foo.new\n  @foo.bars_to_array\n  ...\nend\n</code></pre>\n\n<p><strong>EDIT 1:</strong></p>\n\n<p>I'm aware of <code>serialize</code>. I want to split after the initial data gets saved to <code>bars</code>. </p>\n"}, {"tags": ["ruby", "puppet"], "comments": [{"owner": {"reputation": 41846, "user_id": 926143, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/3396173c3d22988be1a0732d184902aa?s=128&d=identicon&r=PG", "display_name": "7stud", "link": "https://stackoverflow.com/users/926143/7stud"}, "edited": false, "score": 0, "creation_date": 1424931107, "post_id": 28729033, "comment_id": 45755933, "body": "You begin your question asking about ruby&#39;s exec() method, then you finish your question asking about puppet.  My question is: what does your ruby exec() code have to do with puppet?"}, {"owner": {"reputation": 4459, "user_id": 127251, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/9b6273d6505f5cead55793f95dbe7873?s=128&d=identicon&r=PG", "display_name": "Paul Chernoch", "link": "https://stackoverflow.com/users/127251/paul-chernoch"}, "reply_to_user": {"reputation": 41846, "user_id": 926143, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/3396173c3d22988be1a0732d184902aa?s=128&d=identicon&r=PG", "display_name": "7stud", "link": "https://stackoverflow.com/users/926143/7stud"}, "edited": false, "score": 0, "creation_date": 1424966887, "post_id": 28729033, "comment_id": 45776660, "body": "Because I am calling exec, I must pass my command to a shell invocation of ruby as a string. The hash from puppet must be serialized to a form that can be deserialized by ruby. It is a marshaling problem."}], "answers": [{"comments": [{"owner": {"reputation": 4459, "user_id": 127251, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/9b6273d6505f5cead55793f95dbe7873?s=128&d=identicon&r=PG", "display_name": "Paul Chernoch", "link": "https://stackoverflow.com/users/127251/paul-chernoch"}, "edited": false, "score": 0, "creation_date": 1424966659, "post_id": 28733136, "comment_id": 45776507, "body": "Completely forgot about this feature! Thanks."}], "tags": [], "owner": {"reputation": 12428, "user_id": 213421, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c64e85336d611bcac9ecfd54baa81cf2?s=128&d=identicon&r=PG", "display_name": "Chris Pitman", "link": "https://stackoverflow.com/users/213421/chris-pitman"}, "is_accepted": true, "score": 7, "last_activity_date": 1424915500, "creation_date": 1424915500, "answer_id": 28733136, "question_id": 28729033, "link": "https://stackoverflow.com/questions/28729033/how-do-i-turn-a-hash-to-a-string-in-puppet-dsl/28733136#28733136", "title": "How do I turn a hash to a string in Puppet DSL?", "body": "<p>You can always execute ruby code inline with your puppet module:</p>\n\n<pre><code>$my_string = inline_template('&lt;%= @my_hash.to_s %&gt;')\n</code></pre>\n\n<p>Obviously it is important to not overuse this, but it is particularly useful when a very simple ruby function can achieve what you need.</p>\n"}], "owner": {"reputation": 4459, "user_id": 127251, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/9b6273d6505f5cead55793f95dbe7873?s=128&d=identicon&r=PG", "display_name": "Paul Chernoch", "link": "https://stackoverflow.com/users/127251/paul-chernoch"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2532, "favorite_count": 0, "accepted_answer_id": 28733136, "answer_count": 1, "score": 1, "last_activity_date": 1424915500, "creation_date": 1424896453, "last_edit_date": 1424903555, "question_id": 28729033, "link": "https://stackoverflow.com/questions/28729033/how-do-i-turn-a-hash-to-a-string-in-puppet-dsl", "title": "How do I turn a hash to a string in Puppet DSL?", "body": "<p>I have a <code>hash</code> of hashes that I need to embed in an <code>exec</code> resource command. My thought was to serialize the <code>hash</code> to a <code>string</code> and interpolate it into the exec <code>call</code>. The <code>exec</code> call will be executing ruby code via <code>ruby -e 'ruby code here'</code>.</p>\n\n<p>Using irb, I know that <code>hash.to_s</code> creates a single line parse-able version of the <code>hash</code>. Or I could use json. I doubt you can call <code>to_s</code> in puppet, but am not sure.</p>\n\n<p>The stdlib for Puppet has <code>parseyaml</code> and <code>parsejson</code> to deserialize, but is there a way to serialize to a parse-able <code>string</code>? I can write a custom  puppet function to do it, but prefer an already built in solution if there is one.</p>\n\n<p><strong>Update</strong>\nI am considering defining a puppet function. I have never written one before, so am not sure of the syntax. Here is my first attempt:</p>\n\n<pre><code>Puppet::Parser::Functions.newfunction(\n    :serialize_hash, \n    :arity =&gt; 2,\n    :doc =&gt; \"Serialize a hash to any depth and optionally escape the double quotes.\",\n    :type =&gt; :rvalue) do |args| \n  hash = args[0]\n  escape_quotes = args[1]\n  serialized = hash.to_s\n  if (escape_quotes)\n    serialized.sub!(/\"/, \"\\\\\\\"\")\n  end\n  serialized \nend\n</code></pre>\n"}, {"tags": ["ruby", "soap", "savon"], "answers": [{"comments": [{"owner": {"reputation": 7633, "user_id": 417449, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/313df1d3543ef456912017412509a395?s=128&d=identicon&r=PG", "display_name": "Noah Clark", "link": "https://stackoverflow.com/users/417449/noah-clark"}, "edited": false, "score": 0, "creation_date": 1424899707, "post_id": 28729424, "comment_id": 45746107, "body": "That is working, but it isn&#39;t inserting it into the Security header, instead into the soapenv:Envelope. See updated output above."}, {"owner": {"reputation": 7633, "user_id": 417449, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/313df1d3543ef456912017412509a395?s=128&d=identicon&r=PG", "display_name": "Noah Clark", "link": "https://stackoverflow.com/users/417449/noah-clark"}, "edited": false, "score": 0, "creation_date": 1424959835, "post_id": 28729424, "comment_id": 45771735, "body": "Thanks, I&#39;ve opened up a ticket with Savon to see if I can get some guidance. Feel free to follow along or add additional input there if it seems more appropriate. <a href=\"https://github.com/savonrb/savon/issues/667\" rel=\"nofollow noreferrer\">github.com/savonrb/savon/issues/667</a>"}, {"owner": {"reputation": 7633, "user_id": 417449, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/313df1d3543ef456912017412509a395?s=128&d=identicon&r=PG", "display_name": "Noah Clark", "link": "https://stackoverflow.com/users/417449/noah-clark"}, "edited": false, "score": 0, "creation_date": 1424959869, "post_id": 28729424, "comment_id": 45771760, "body": "I think what you suggest will work, but like you say it might be a little crazy and would take me off the main line, which is always a bit concerning."}, {"owner": {"reputation": 7633, "user_id": 417449, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/313df1d3543ef456912017412509a395?s=128&d=identicon&r=PG", "display_name": "Noah Clark", "link": "https://stackoverflow.com/users/417449/noah-clark"}, "edited": false, "score": 0, "creation_date": 1425068368, "post_id": 28729424, "comment_id": 45825424, "body": "is it possible that the WSDL isn&#39;t defining some of the differences between what I&#39;m seeing in soapUI and Savon? The company gave me some special soapUI file that I loaded up. Possibly that had additional configuration to make it all work in there?"}, {"owner": {"reputation": 7633, "user_id": 417449, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/313df1d3543ef456912017412509a395?s=128&d=identicon&r=PG", "display_name": "Noah Clark", "link": "https://stackoverflow.com/users/417449/noah-clark"}, "edited": false, "score": 0, "creation_date": 1425479934, "post_id": 28729424, "comment_id": 45980272, "body": "I&#39;ve accepted this, but if any other fellow travelers come across this they should reference the github issue to learn that mustUnderstand is optional."}], "tags": [], "owner": {"reputation": 3271, "user_id": 387177, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ce58186c9663c82e5fef7fcca045fa57?s=128&d=identicon&r=PG", "display_name": "Steffen Roller", "link": "https://stackoverflow.com/users/387177/steffen-roller"}, "is_accepted": true, "score": 1, "last_activity_date": 1424908942, "last_edit_date": 1424908942, "creation_date": 1424897882, "answer_id": 28729424, "question_id": 28728851, "link": "https://stackoverflow.com/questions/28728851/mustunderstand-1-in-savon-security-header/28729424#28729424", "title": "mustUnderstand=&quot;1&quot; in Savon Security Header", "body": "<p>I think you would need to define namespaces in your client, eg.</p>\n\n<pre><code>client = Savon.client(\n    wsdl: 'gofish?wsdl',\n    pretty_print_xml: true,\n    log: true,\n    log_level: :debug,\n    env_namespace: :soapenv,\n    namespaces: {'soapenv:mustUnderstand' =&gt; \"1\"}\n)\n</code></pre>\n\n<p>You probably have to list all the other namespaces you need as well.</p>\n\n<p>You con try something crazy. Go to your gem directory and find the file\n    ...akami-1.2.2/lib/akami/wsse.rb</p>\n\n<p>change line #158 from</p>\n\n<pre><code>:attributes! =&gt; { \"wsse:Security\" =&gt; { \"xmlns:wsse\" =&gt; WSE_NAMESPACE } }\n</code></pre>\n\n<p>to</p>\n\n<pre><code>:attributes! =&gt; { \"wsse:Security\" =&gt;\n                                       { \"mustUnderstand\" =&gt; \"1\",\n                                         \"xmlns:wsse\" =&gt; WSE_NAMESPACE} }\n</code></pre>\n\n<p>That's not pretty but it might work</p>\n"}], "owner": {"reputation": 7633, "user_id": 417449, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/313df1d3543ef456912017412509a395?s=128&d=identicon&r=PG", "display_name": "Noah Clark", "link": "https://stackoverflow.com/users/417449/noah-clark"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2311, "favorite_count": 0, "accepted_answer_id": 28729424, "answer_count": 1, "score": 1, "last_activity_date": 1424959918, "creation_date": 1424895724, "last_edit_date": 1424959918, "question_id": 28728851, "link": "https://stackoverflow.com/questions/28728851/mustunderstand-1-in-savon-security-header", "title": "mustUnderstand=&quot;1&quot; in Savon Security Header", "body": "<p>Here is what the service is supposed to look like (from Soap UI):</p>\n\n<pre><code>&lt;wsse:Security soapenv:mustUnderstand=\"1\" xmlns:wsse=\"http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd\" xmlns:wsu=\"http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd\"&gt;\n    &lt;wsse:UsernameToken wsu:Id=\"UsernameToken-044848C648B0DCCFBC14248931953381\"&gt;\n        &lt;wsse:Username&gt;26613&lt;/wsse:Username&gt;\n        &lt;wsse:Password Type=\"http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#PasswordDigest\"&gt;h3hzoxJgSNIrNsJTc8gGwdNGhe0=&lt;/wsse:Password&gt;\n        &lt;wsse:Nonce EncodingType=\"http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-soap-message-security-1.0#Base64Binary\"&gt;JvR9+Aefno3PVz++ik/47w==&lt;/wsse:Nonce&gt;\n        &lt;wsu:Created&gt;2015-02-25T19:39:55.336Z&lt;/wsu:Created&gt;\n    &lt;/wsse:UsernameToken&gt;\n&lt;/wsse:Security&gt;\n</code></pre>\n\n<p>and here is what savon produces:</p>\n\n<pre><code>&lt;wsse:Security xmlns:wsse=\"http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd\"&gt;\n  &lt;wsse:UsernameToken xmlns:wsu=\"http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd\" wsu:Id=\"UsernameToken-1\"&gt;\n    &lt;wsse:Username&gt;26613&lt;/wsse:Username&gt;\n    &lt;wsse:Nonce EncodingType=\"http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-soap-message-security-1.0#Base64Binary\"&gt;NmU4NWNiYWIxM2M0ZmYyN2IxZjJiNGQ0MGZmZDJkNjJiODJmNmM5OQ==&lt;/wsse:Nonce&gt;\n    &lt;wsu:Created&gt;2015-02-25T16:55:40Z&lt;/wsu:Created&gt;\n    &lt;wsse:Password Type=\"http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#PasswordDigest\"&gt;lr8M7oMCjEsh7Maj07AyW4CoTlE=&lt;/wsse:Password&gt;\n  &lt;/wsse:UsernameToken&gt;\n&lt;/wsse:Security&gt;\n</code></pre>\n\n<p>One thing I noticed that is different is the mustUnderstand line. I've tried to add like so:</p>\n\n<pre><code> client = Savon.client(\n     wsdl: 'gofish?wsdl',\n     pretty_print_xml: true,\n     log: true,\n     log_level: :debug,\n     env_namespace: :soapenv,\n     soap_header: {'wsse:Security' =&gt; 'mustUnderstand=\"1\"'}\n)\n</code></pre>\n\n<p>But this generates the following:</p>\n\n<pre><code>&lt;wsse:Security&gt;mustUnderstand=\"1\"&lt;/wsse:Security&gt;\n&lt;wsse:Security xmlns:wsse=\"http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd\"&gt;\n</code></pre>\n\n<p>Which is not exactly what I want.  Any thoughts on how to get inside the wsse:Security element like the SoapUI has it? </p>\n\n<p><strong>EDIT:</strong></p>\n\n<p>Based upon Steffen's suggestion, I get the following results:</p>\n\n<pre><code>&lt;soapenv:Envelope xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:cmn=\"http://www.sircon.com/WebServices/services/OnboardingServices.wsdl\" xmlns:soapenv=\"http://schemas.xmlsoap.org/soap/envelope/\" soapenv:mustUnderstand=\"1\"&gt;\n  &lt;soapenv:Header&gt;\n    &lt;wsse:Security xmlns:wsse=\"http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd\"&gt;\n      &lt;wsse:UsernameToken xmlns:wsu=\"http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd\" wsu:Id=\"UsernameToken-1\"&gt;\n        &lt;wsse:Username&gt;26613&lt;/wsse:Username&gt;\n        &lt;wsse:Nonce EncodingType=\"http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-soap-message-security-1.0#Base64Binary\"&gt;NTcyN2QyNjliYmMxZjg2Yjc2YjA0MTY0NjE5MjdjZjQ4ZGY0YzlhYQ==\n&lt;/wsse:Nonce&gt;\n        &lt;wsu:Created&gt;2015-02-25T21:28:53Z&lt;/wsu:Created&gt;\n        &lt;wsse:Password Type=\"http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#PasswordDigest\"&gt;h8Qfcn6gA4swa/l+LmJR+RdCSto=&lt;/wsse:Password&gt;\n      &lt;/wsse:UsernameToken&gt;\n    &lt;/wsse:Security&gt;\n  &lt;/soapenv:Header&gt;\n  &lt;soapenv:Body&gt;\n    &lt;cmn:RecruiterOnboardingRequest&gt;\n      &lt;some&gt;key&lt;/some&gt;\n      &lt;and&gt;another one&lt;/and&gt;\n    &lt;/cmn:RecruiterOnboardingRequest&gt;\n  &lt;/soapenv:Body&gt;\n&lt;/soapenv:Envelope&gt;\n</code></pre>\n\n<p><strong>EDIT 2:</strong></p>\n\n<p>Opened a ticket around this issue here: <a href=\"https://github.com/savonrb/savon/issues/667\" rel=\"nofollow\">https://github.com/savonrb/savon/issues/667</a>. Feel free to check it out to learn more.</p>\n"}, {"tags": ["ruby", "command-line-interface", "mixins", "thor"], "answers": [{"comments": [{"owner": {"reputation": 1255, "user_id": 1253087, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a5f9e13bcfeed9a5f58284bca0fe1c3d?s=128&d=identicon&r=PG", "display_name": "lcoderre", "link": "https://stackoverflow.com/users/1253087/lcoderre"}, "edited": false, "score": 0, "creation_date": 1424959505, "post_id": 28731199, "comment_id": 45771516, "body": "It prevents the &quot;no method&quot; error, but it actually doesn&#39;t help. I believe there is no way to achieve what I want by mixins, due to Thor&#39;s limitation. I will edit my question and add my reasoning."}], "tags": [], "owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "is_accepted": false, "score": 1, "last_activity_date": 1424906311, "last_edit_date": 1424906311, "creation_date": 1424904668, "answer_id": 28731199, "question_id": 28728743, "link": "https://stackoverflow.com/questions/28728743/using-mixins-during-code-parsing-in-ruby/28731199#28731199", "title": "Using mixins during code parsing in Ruby", "body": "<p><code>desc</code> is a method of <code>Thor</code>'s singleton class, but <code>Configurable</code> isn't an instance of <code>Thor</code>'s singleton class. (Obviously.) That's why you can't call <code>desc</code> without a receiver, you will have to call it explicitly:</p>\n\n<p>(Note: I don't have Thor, therefore, I cannot test this. It may or may not work.)</p>\n\n<pre><code>module Configurable\n  Thor.desc 'config', 'You can configure the app'\n  def config\n    puts \"You configured the app!\"\n    # You can even call App 'something' method\n    something \n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 1255, "user_id": 1253087, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a5f9e13bcfeed9a5f58284bca0fe1c3d?s=128&d=identicon&r=PG", "display_name": "lcoderre", "link": "https://stackoverflow.com/users/1253087/lcoderre"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 83, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1424973426, "creation_date": 1424895288, "last_edit_date": 1424973426, "question_id": 28728743, "link": "https://stackoverflow.com/questions/28728743/using-mixins-during-code-parsing-in-ruby", "title": "Using mixins during code parsing in Ruby", "body": "<p>I want my <code>Configurable</code> module to include a <code>config</code> command to whatever app includes it.</p>\n\n<p><strong>edit</strong>: see the <em>update</em> on my reasoning a little further down</p>\n\n<p>I get that error:</p>\n\n<pre><code>cli.rb:2:in '&lt;module:Configurable&gt;': undefined method 'desc' for Configurable:Module (NoMethodError)\n</code></pre>\n\n<p>I want to do the following in a commandline:</p>\n\n<pre><code>$ app something\n&gt; I did something!\n$ app config\n&gt; You configured the app!\n&gt; I did something!\n</code></pre>\n\n<p>So here's the code:</p>\n\n<pre><code># app.rb \n\nrequire 'thor'\nrequire_relative './cli'\n\nclass App &lt; Thor\n    include Configurable\n\n    # def initialize ...\n\n    desc \"something\", \"The Cli app does something\"\n    def something\n        puts \"I did something!\"\n    end\nend\n\n# cli.rb \nmodule Configurable\n    desc 'config', \"You can configure the app\"\n    def config\n        puts \"You configured the app!\"\n        # You can even call App 'something' method\n        something \n    end\nend\n</code></pre>\n\n<p>As the above points out, when I comment out the <code>desc 'config' ..</code> line, it builds and runs, although Thor doesn't add the <code>config</code> command.</p>\n\n<p>Thanks for your help!</p>\n\n<h3>UPDATE</h3>\n\n<p>I downloaded Thor's repo, and added traces when it encountered a <code>desc</code> command. So I tried calling <code>Thor.desc</code> instead, and I could see that it was loaded in Thor's system, but still didn't appear in commands list. So I played around and ended up with the following:</p>\n\n<pre><code>module Configurable\n  Thor.desc 'config', 'You can configure the app'\n  def config\n    puts \"You configured the app!\"\n    # You can even call App 'something' method\n    something \n  end\n\n  def self.included(klass)\n    puts \"The module was included\"\n    klass.desc \"another\", \"another one\"\n  end\n\n  def another\n    puts \"Another!\"\n  end\nend\n</code></pre>\n\n<p>This way, I tested if calling desc before or after made a difference, but it didn't.</p>\n\n<p>At this point, I would say <strong>it's Thor's limitations</strong>, and I can't achieve what I want with Thor and mixins. </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "performance", "activerecord"], "comments": [{"owner": {"reputation": 79161, "user_id": 1064226, "user_type": "registered", "profile_image": "https://graph.facebook.com/36912842/picture?type=large", "display_name": "Frederick Cheung", "link": "https://stackoverflow.com/users/1064226/frederick-cheung"}, "edited": false, "score": 0, "creation_date": 1424895315, "post_id": 28728696, "comment_id": 45743676, "body": "That include should have done it - what does the code that triggers the individual queries look like?"}, {"owner": {"reputation": 3859, "user_id": 873650, "user_type": "registered", "accept_rate": 27, "profile_image": "https://i.stack.imgur.com/Br61o.jpg?s=128&g=1", "display_name": "Fernando Fabreti", "link": "https://stackoverflow.com/users/873650/fernando-fabreti"}, "reply_to_user": {"reputation": 79161, "user_id": 1064226, "user_type": "registered", "profile_image": "https://graph.facebook.com/36912842/picture?type=large", "display_name": "Frederick Cheung", "link": "https://stackoverflow.com/users/1064226/frederick-cheung"}, "edited": false, "score": 0, "creation_date": 1424896320, "post_id": 28728696, "comment_id": 45744236, "body": "I have updated the question. Trying to simplify and abstract things did not work first time. Thanks."}, {"owner": {"reputation": 16229, "user_id": 525478, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3b6c0b47a0c430a0b141baee7ea845be?s=128&d=identicon&r=PG", "display_name": "Brad Werth", "link": "https://stackoverflow.com/users/525478/brad-werth"}, "edited": false, "score": 0, "creation_date": 1424905365, "post_id": 28728696, "comment_id": 45748875, "body": "The approach detailed in this answer may interest you <a href=\"http://stackoverflow.com/a/26251892/525478\">stackoverflow.com/a/26251892/525478</a>"}], "answers": [{"comments": [{"owner": {"reputation": 3859, "user_id": 873650, "user_type": "registered", "accept_rate": 27, "profile_image": "https://i.stack.imgur.com/Br61o.jpg?s=128&g=1", "display_name": "Fernando Fabreti", "link": "https://stackoverflow.com/users/873650/fernando-fabreti"}, "edited": false, "score": 0, "creation_date": 1424947485, "post_id": 28731300, "comment_id": 45764064, "body": "yeah, select().distinct() is good, but how do I return comps with cities included ? Like .includes() would do. I have used virtual attribs. Any ideas?"}, {"owner": {"reputation": 3859, "user_id": 873650, "user_type": "registered", "accept_rate": 27, "profile_image": "https://i.stack.imgur.com/Br61o.jpg?s=128&g=1", "display_name": "Fernando Fabreti", "link": "https://stackoverflow.com/users/873650/fernando-fabreti"}, "edited": false, "score": 0, "creation_date": 1424947588, "post_id": 28731300, "comment_id": 45764142, "body": "Fixing unicode on sqlserver-adapter is out of question, I can&#39;t find any better workaround... maybe dealing with Arel..."}], "tags": [], "owner": {"reputation": 4930, "user_id": 428803, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/fb49155433fce665a2cea7d66b229b06?s=128&d=identicon&r=PG", "display_name": "Joshua", "link": "https://stackoverflow.com/users/428803/joshua"}, "is_accepted": false, "score": 0, "last_activity_date": 1424905094, "creation_date": 1424905094, "answer_id": 28731300, "question_id": 28728696, "link": "https://stackoverflow.com/questions/28728696/activerecord-and-slow-db-connection-n1-queries-how-to-hit-db-efficiently/28731300#28731300", "title": "activerecord and slow DB connection: (n+1) queries: how to hit DB efficiently?", "body": "<pre><code>comps = Company.where(company_code: ['12B1', '34C8', '87DD', ...]).select(:city_id).distinct(:city_id)\ncities = City.where(id: comps.collect { |c| c.city_id })\n</code></pre>\n\n<p>That said, the rails way is really to use \"includes\". I'd highly recommend fixing the unicode problem at the core, so you don't end up with a lot of workarounds (like this) permanently scattered throughout your code. </p>\n"}, {"tags": [], "owner": {"reputation": 3859, "user_id": 873650, "user_type": "registered", "accept_rate": 27, "profile_image": "https://i.stack.imgur.com/Br61o.jpg?s=128&g=1", "display_name": "Fernando Fabreti", "link": "https://stackoverflow.com/users/873650/fernando-fabreti"}, "is_accepted": false, "score": 0, "last_activity_date": 1424975537, "last_edit_date": 1424975537, "creation_date": 1424952933, "answer_id": 28742226, "question_id": 28728696, "link": "https://stackoverflow.com/questions/28728696/activerecord-and-slow-db-connection-n1-queries-how-to-hit-db-efficiently/28742226#28742226", "title": "activerecord and slow DB connection: (n+1) queries: how to hit DB efficiently?", "body": "<p>Better than having 2 queries (one for Companies, one for Cities), is to have only 1 query using join:</p>\n\n<pre><code>def self.get_companies_by_code(code_array)\n  sql_string = Company.where(company_code: code_array).joins(:city).select(\"*\").to_sql #['12B1', '34C8', '87DD', ...]\n  sql_string = sql_string.gsub(\"N'\",\"'\")  #remove unicode prefix\n  companies = find_by_sql(sql_string)  \nend\n</code></pre>\n\n<p>I get this only query on console:</p>\n\n<pre><code>Company Load (60.6ms)  EXEC sp_executesql N'SELECT * FROM\n  [companies] INNER JOIN [cities] ON [cities].[id] = [companies].[city_id] \n  WHERE [companies].[code] IN (''12B1'', ''34C8'', ''87DD'', ''9AA2'')'\n</code></pre>\n\n<p>Now, the <strong>weird part</strong>: On the console, it returns a array of Company objects that doesn't show up the joined cities, but they are there! I mean, if I do a <code>result.first.attributes</code> it lists all attributes from the company and city joined</p>\n\n<p>Then, I can access the \"invisible\" attributes inside the returned array:</p>\n\n<pre><code>&gt; result = Company.get_companies_by_code( ['12B1', '34C8', '87DD'] )\n&gt; result.first.city_name\n&gt; \"Atlanta\"\n</code></pre>\n\n<p>I can only imagine what happens if there are colliding collumn names...</p>\n\n<p>A more \"Rails\" approach would be to set the association manually:</p>\n\n<pre><code>def self.get_companies_by_code(code_array)\n  sql_string = Company.where(company_code: code_array).to_sql \n  sql_string = sql_string.gsub(\"N'\",\"'\")  #remove unicode prefix\n  companies = find_by_sql(sql_string)  \n\n  cities_ids_array = companies.map(&amp;:city_id)\n  cities_array = City.where(:id =&gt; cities_ids_array)\n  cities_hash = cities_array.group_by {|c| c.id}\n\n  companies.each {|comp|\n       association = comp.association(:city)\n       association.target = cities_hash[comp.city_id]\n  }\n  companies\nend\n</code></pre>\n\n<p>some references: </p>\n\n<p><a href=\"http://blog.bigbinary.com/2013/07/01/preload-vs-eager-load-vs-joins-vs-includes.html\" rel=\"nofollow\">http://blog.bigbinary.com/2013/07/01/preload-vs-eager-load-vs-joins-vs-includes.html</a></p>\n\n<p><a href=\"https://mrbrdo.wordpress.com/2013/09/25/manually-preloading-associations-in-rails-using-custom-scopessql\" rel=\"nofollow\">https://mrbrdo.wordpress.com/2013/09/25/manually-preloading-associations-in-rails-using-custom-scopessql</a></p>\n\n<p><a href=\"http://blog.arkency.com/2013/12/rails4-preloading/\" rel=\"nofollow\">http://blog.arkency.com/2013/12/rails4-preloading/</a></p>\n"}], "owner": {"reputation": 3859, "user_id": 873650, "user_type": "registered", "accept_rate": 27, "profile_image": "https://i.stack.imgur.com/Br61o.jpg?s=128&g=1", "display_name": "Fernando Fabreti", "link": "https://stackoverflow.com/users/873650/fernando-fabreti"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 176, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1424975537, "creation_date": 1424895132, "last_edit_date": 1424969100, "question_id": 28728696, "link": "https://stackoverflow.com/questions/28728696/activerecord-and-slow-db-connection-n1-queries-how-to-hit-db-efficiently", "title": "activerecord and slow DB connection: (n+1) queries: how to hit DB efficiently?", "body": "<p>I have a RoR app that hits the DB very often with individual queries. Problem is each query is taking like 100ms and some controller actions are taking too long to complete because of the amount of individual queries that ActiveRecord is generating.</p>\n\n<p>Another problem is that I cannot use AR includes() (which would generate just one query) because I am having problems with AR-sqlserver-adapter and unicode strings ignoring indexes and I am removing unicode prefix from sql query by-hand (this is a long story...)</p>\n\n<p>Example:</p>\n\n<pre><code>#model\nclass Company &lt; ActiveRecord::Base\n   has_one: city\nend\n#controller\nsql_string = where(:code =&gt; ['12B1', '34C8', '87DD', ...]).to_sql\nsql_string = sql_string.gsub(\"N'\",\"'\")  #remove unicode prefix\ncompanies = find_by_sql(sql_string)\n#companies = Company.where(:code =&gt; ['12B1', '34C8', '87DD', ...]).includes(:city) #I wish I could use this line\n</code></pre>\n\n<p>when I am accessing cities inside companies array, I see several individual queries for each city in the console, what slows down things a lot.</p>\n\n<p>I would like to have <strong>2 queries only</strong>: one for companies using <code>SQL IN</code> and one for cities. </p>\n\n<p>I have done that by hand (using virtual attributes), but, <strong>is there a \"Rails way\" of doing it ?</strong></p>\n\n<p>What I have done so far <em>(caution, ugly code ahead)</em>:</p>\n\n<pre><code>    def self.get_companies_by_code(code_array)\n       comps = Company.where(company_code: ['12B1', '34C8', '87DD', ...])\n       cities_id_array = comps.map {|c| c.city_id}.compact.uniq\n       cities = City.find(cities_id_array)\n       comps.each {|co| \n           co.virtual_city = cities.select{|ct| co.city_id==ct.id}.first }\n       comps\n   end\n</code></pre>\n"}, {"tags": ["ruby"], "answers": [{"comments": [{"owner": {"reputation": 5850, "user_id": 4501354, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/1230cfcc7f68488ad19d0022cf7b1a93?s=128&d=identicon&r=PG&f=1", "display_name": "Donato", "link": "https://stackoverflow.com/users/4501354/donato"}, "edited": false, "score": 0, "creation_date": 1463009603, "post_id": 28728534, "comment_id": 61884438, "body": "Note in recent versions of Rails, class_inheritable_accessor has been replaced by class_attribute."}], "tags": [], "owner": {"reputation": 79161, "user_id": 1064226, "user_type": "registered", "profile_image": "https://graph.facebook.com/36912842/picture?type=large", "display_name": "Frederick Cheung", "link": "https://stackoverflow.com/users/1064226/frederick-cheung"}, "is_accepted": true, "score": 0, "last_activity_date": 1424894605, "creation_date": 1424894605, "answer_id": 28728534, "question_id": 28728016, "link": "https://stackoverflow.com/questions/28728016/how-does-alias-method-not-create-infinite-loop/28728534#28728534", "title": "How does alias_method not create infinite loop?", "body": "<p><code>read_filter_by</code> calls the accessor method created with <code>class_inheritable_accessor</code>.</p>\n\n<p>The important thing is that the <code>read_filter_by</code> method points at what <code>filter_by</code> was when <code>alias_method</code> was called  - subsequent redefinitions of <code>filter_by</code> don't affect <code>read_filter_by</code></p>\n"}], "owner": {"reputation": 2499, "user_id": 3957231, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/26d8f8c8e808e383a52c580396c6993e?s=128&d=identicon&r=PG&f=1", "display_name": "Donato", "link": "https://stackoverflow.com/users/3957231/donato"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 180, "favorite_count": 1, "accepted_answer_id": 28728534, "answer_count": 1, "score": 3, "last_activity_date": 1424894605, "creation_date": 1424892912, "last_edit_date": 1424893588, "question_id": 28728016, "link": "https://stackoverflow.com/questions/28728016/how-does-alias-method-not-create-infinite-loop", "title": "How does alias_method not create infinite loop?", "body": "<p>I'm confused by <a href=\"http://ruby-doc.org//core-2.2.0/Module.html#method-i-alias_method\" rel=\"nofollow\"><code>alias_method</code></a>. The following example seems it should produce an infinite loop, but it doesn't:</p>\n\n<pre><code>  class ApplicationController\n    dual_accessor :filter_by, :default =&gt; []\n  end\n\n  class Class\n   def dual_accessor(*attributes)\n    options = attributes.extract_options!\n    attributes.each do |attribute|\n      class_eval &lt;&lt;-ruby\n        class_inheritable_accessor :#{attribute}\n\n        singleton_class.send :alias_method, :read_#{attribute}, :#{attribute}\n\n        def self.#{attribute}(value = :__read__)\n          if value == :__read__\n            read_#{attribute}\n          else\n            self.#{attribute} = value\n          end\n        end\n      ruby\n      self.send(attribute, options[:default]) if options[:default]\n    end\n   end \n  end\n</code></pre>\n\n<p>As far as I understand,</p>\n\n<ul>\n<li>we extract the hash <code>{ default: [] }</code> into the <code>options</code> local variable.</li>\n<li>Then we iterate over splatted array. In this case, the splat just contains <code>:filter_by</code>.</li>\n<li>We use <code>class_eval</code> to evaluate the string in the heredoc in the context of class object.</li>\n<li>We call <code>alias_method</code> on the singleton object of <code>self</code>, (<code>self</code> refers to an instance of the class).</li>\n<li>We create a new copy of <code>filter_by</code> called <code>read_filter_by</code>.</li>\n<li>Then we create a class method named <code>filter_by</code>, which accepts a default parameter <code>:__ read __</code>.</li>\n<li>Rest is self-explanatory.</li>\n</ul>\n\n<p>When we call <code>read_#{attribute}</code>, e.g. <code>read_filter_by</code>, how does this not create an infinite loop? It seems like the method will call itself over and over recursively.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "devise", "mongoid"], "answers": [{"tags": [], "owner": {"reputation": 13, "user_id": 3467053, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Wlly5.png?s=128&g=1", "display_name": "josleugim", "link": "https://stackoverflow.com/users/3467053/josleugim"}, "is_accepted": false, "score": 1, "last_activity_date": 1425371128, "creation_date": 1425371128, "answer_id": 28827116, "question_id": 28727495, "link": "https://stackoverflow.com/questions/28727495/undefined-method-metadata-when-im-trying-to-update-a-user-with-embedded-doc/28827116#28827116", "title": "Undefined method `__metadata&#39; when I&#39;m trying to update a User with embedded document using mongoid, devise in Rails 4", "body": "<p>hope this help a little bit. I used to had the same error when I was trying to save a embeds_one document like a embeds_many document.</p>\n\n<p>Example. My Rol model embeds_one into User model, so I was passing an array into Rol field, like this:</p>\n\n<pre><code>u2 = User.new(name: 'my_name', email: 'my_email@domain.com', password: 'pass', password_confirmation: 'pass', rol: [Rol.new(nombre: 'admin', description: '...')])\nu2.save!\n</code></pre>\n\n<p>This gave me this error: undefined method `__metadata' for #Array:0x00000104812bf8</p>\n\n<p>So I remove the brackets[] like this and works:</p>\n\n<pre><code>u2 = User.new(name: 'my_name', email: 'my_email@domain.com', password: 'pass', password_confirmation: 'pass', rol: Rol.new(nombre: 'admin', description: '...'))\nu2.save!\n</code></pre>\n\n<p>I think devise could not be passing the correct structure for the embeds_one document.</p>\n"}, {"tags": [], "owner": {"reputation": 2202, "user_id": 3607039, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/8Bj3I.jpg?s=128&g=1", "display_name": "Bustikiller", "link": "https://stackoverflow.com/users/3607039/bustikiller"}, "is_accepted": false, "score": 0, "last_activity_date": 1526976836, "creation_date": 1526976836, "answer_id": 50462861, "question_id": 28727495, "link": "https://stackoverflow.com/questions/28727495/undefined-method-metadata-when-im-trying-to-update-a-user-with-embedded-doc/50462861#50462861", "title": "Undefined method `__metadata&#39; when I&#39;m trying to update a User with embedded document using mongoid, devise in Rails 4", "body": "<p>I also faced this problem, and I finally found out what was going on. The problem was that I had <code>String</code> Mongoid field:</p>\n\n<pre><code>class MyModel\n  include Mongoid::Document\n\n  field :my_field, type: String\nend\n</code></pre>\n\n<p>and replaced that <code>String</code> field by an embedded document, using the same key: </p>\n\n<pre><code>class MyModel\n  include Mongoid::Document\n\n  embeds_one :my_field, class_name: 'MyNestedModel'\nend\n</code></pre>\n\n<p>This worked fine with new objects but crashed with non-migrated objects where the content of that field was still a <code>String</code> and not an instance of <code>MyNestedModel</code>. Mongoid was trying to load the <code>__metadata</code> of the object that was expected to be there, which was not present for those records where a <code>String</code> was stored.</p>\n\n<p>I fixed the issue with a different name for the embedded attribute, so that there is no collision between the old and the new fields in Mongo.</p>\n"}], "owner": {"reputation": 1671, "user_id": 1336582, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/a9b5728cf621d8a67a5be764edca07e6?s=128&d=identicon&r=PG", "display_name": "damianfabian", "link": "https://stackoverflow.com/users/1336582/damianfabian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1542, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1526976836, "creation_date": 1424891052, "last_edit_date": 1424905796, "question_id": 28727495, "link": "https://stackoverflow.com/questions/28727495/undefined-method-metadata-when-im-trying-to-update-a-user-with-embedded-doc", "title": "Undefined method `__metadata&#39; when I&#39;m trying to update a User with embedded document using mongoid, devise in Rails 4", "body": "<p>I'm new in RoR, I'm trying to make a simple form where a user has two Positions in one company, so I'm using devise to manage the authentication and the creation of users. I just create a class Position to embed into the User and allow the admin select from a list of Positions which Position will have each user into the system. For now I can see the form, select the positions but when I try to save I get this error:</p>\n\n<blockquote>\n  <p>undefined method `__metadata' for \"54ed0c136c6f6337ff0a0000\":String</p>\n</blockquote>\n\n<p>I saw the request and this is what the Controller receive:</p>\n\n<pre><code>Request\n\nParameters:\n\n{\"utf8\"=&gt;\"\u2713\",\n \"_method\"=&gt;\"put\",\n \"authenticity_token\"=&gt;\"auxoUaTmvkvRvLUUh3kUP0lzYo9aTotajjYVfy01OE0=\",\n \"user\"=&gt;{\"first_name\"=&gt;\"Fabian\",\n \"last_name\"=&gt;\"Jara\",\n \"email\"=&gt;\"admin@example.com\",\n \"age\"=&gt;\"35\",\n \"position_primary\"=&gt;\"54ed0c136c6f6337ff0a0000\",\n \"position_secundary\"=&gt;\"54ed0c136c6f6337ff0a0011\"},\n \"commit\"=&gt;\"Update\"}\n</code></pre>\n\n<p>This is my User model:</p>\n\n<pre><code>class User\n  include Mongoid::Document\n  include Mongoid::Timestamps\n  include User::AuthDefinitions\n  include User::Roles\n  include Mongoid::Paperclip\n\n  has_many :identities\n\n  embeds_one :position_primary, class_name: \"Position\"\n  embeds_one :position_secundary, class_name: \"Position\"\n\n  accepts_nested_attributes_for :position_primary, :position_secundary\n\n  has_mongoid_attached_file :image\n\n  validates_attachment_content_type :image, :content_type =&gt; [\"image/jpg\", \"image/jpeg\", \"image/png\", \"image/gif\"]\n\n  field :first_name, type: String\n  field :last_name, type: String\n  field :roles_mask, type: Integer\n  field :age, type: Integer\n\nend\n</code></pre>\n\n<p>and this is my Position model:</p>\n\n<pre><code>class Position\n    include Mongoid::Document\n\n    field :name, type: String\n    field :status, type: Boolean\n\n    embedded_in :users\nend\n</code></pre>\n\n<p>this is the view for edit the User information:</p>\n\n<pre><code>&lt;h2&gt;Edit &lt;%= resource_name.to_s.humanize %&gt;&lt;/h2&gt;\n&lt;%= simple_form_for(resource, :as =&gt; resource_name, :url =&gt; registration_path(resource_name), :html =&gt; { :method =&gt; :put, :class =&gt; 'form-vertical' }) do |f| %&gt;\n  &lt;%= f.input :first_name, :autofocus =&gt; true %&gt;\n  &lt;%= f.input :last_name %&gt;\n  &lt;%= f.input :email, :required =&gt; true %&gt;\n  &lt;%= f.input :age %&gt;\n  &lt;%= f.file_field :image %&gt; &lt;br&gt;\n\n  &lt;%= f.select :position_primary, Position.all.collect {|p| [ p.name, p.id ] }, :prompt =&gt; \"Select a position\" %&gt;\n  &lt;br&gt;\n\n  &lt;%= f.select :position_secundary, Position.all.collect {|p| [ p.name, p.id ] }, :prompt =&gt; \"Select a position\" %&gt;\n&lt;br&gt;\n  &lt;% if current_user.password_required? %&gt;\n    &lt;%= f.input :password, :autocomplete =&gt; \"off\", :hint =&gt; \"leave it blank if you don't want to change it\", :required =&gt; false %&gt;\n    &lt;%= f.input :password_confirmation, :required =&gt; false %&gt;\n    &lt;%= f.input :current_password, :hint =&gt; \"we need your current password to confirm your changes\", :required =&gt; true %&gt;\n  &lt;% end %&gt;\n  &lt;%= f.button :submit, 'Update', :class =&gt; 'btn-primary' %&gt;\n&lt;% end %&gt;\n&lt;h3&gt;Cancel my account&lt;/h3&gt;\n&lt;p&gt;Unhappy? &lt;%= link_to \"Cancel my account\", registration_path(resource_name), :data =&gt; { :confirm =&gt; \"Are you sure?\" }, :method =&gt; :delete %&gt;.&lt;/p&gt;\n</code></pre>\n\n<p>and this is my RegistrationController:</p>\n\n<pre><code>class Users::RegistrationsController &lt; Devise::RegistrationsController\n  before_filter :resource_params, if: :devise_controller?\n\n  def resource_params\n    devise_parameter_sanitizer.for(:sign_up) {|user| user.permit(:first_name, :last_name, :email, :password, :password_confirmation)}\n    devise_parameter_sanitizer.for(:account_update) {|user| user.permit(:first_name, :last_name, :email, :password, :password_confirmation, :current_password)}\n  end\n\n  def update\n    authorize! :update, @user, :message =&gt; 'Not authorized as an administrator.'\n    respond_to do |format|\n\n      if @user.update_attributes(user_params)\n        format.html { redirect_to @user, notice: 'User was successfully updated.' }\n      else\n        format.html { render action: 'edit' }\n      end\n    end\n  end\n\n  # Never trust parameters from the scary internet, only allow the white list through.\n  def user_params\n    params.require(:user).permit(:email, :first_name, :last_name, :image, :age, :position_primary, :position_secundary, :roles =&gt; [])\n  end\n\n  private :resource_params\nend\n</code></pre>\n\n<p>Thanks if you can give an idea of what could be wrong.</p>\n"}, {"tags": ["ruby", "hash", "block"], "comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1424891355, "post_id": 28727299, "comment_id": 45741401, "body": "Why do you think there is a line with only <code>memo</code> in the sample answer? Do you think the author wrote that without meaning?"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1424891458, "post_id": 28727299, "comment_id": 45741458, "body": "@sawa, the OP has been editing the question. I don&#39;t think it was there initially, but it doesn&#39;t matter. Edit: I see I just missed that."}, {"owner": {"reputation": 73209, "user_id": 290394, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d7908f05c89e965f6bc5308ad6f41256?s=128&d=identicon&r=PG", "display_name": "steenslag", "link": "https://stackoverflow.com/users/290394/steenslag"}, "edited": false, "score": 1, "creation_date": 1424893156, "post_id": 28727299, "comment_id": 45742445, "body": "<code>people.to_h</code>, available in Ruby 2.1 +."}], "answers": [{"comments": [{"owner": {"reputation": 371, "user_id": 1146319, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/228dcbd1cd534e3111b5570c726b70fc?s=128&d=identicon&r=PG", "display_name": "dreamfly", "link": "https://stackoverflow.com/users/1146319/dreamfly"}, "edited": false, "score": 0, "creation_date": 1424892049, "post_id": 28727518, "comment_id": 45741822, "body": "Awesome explanation to this newbie!  Thanks a lot! each_with_object didn&#39;t work though...got TypeError: no implicit conversion of Hash into Integer         from (irb):236:in `[]=&#39;"}, {"owner": {"reputation": 109029, "user_id": 2767755, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/BkC8q.jpg?s=128&g=1", "display_name": "Arup Rakshit", "link": "https://stackoverflow.com/users/2767755/arup-rakshit"}, "reply_to_user": {"reputation": 371, "user_id": 1146319, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/228dcbd1cd534e3111b5570c726b70fc?s=128&d=identicon&r=PG", "display_name": "dreamfly", "link": "https://stackoverflow.com/users/1146319/dreamfly"}, "edited": false, "score": 0, "creation_date": 1424892635, "post_id": 28727518, "comment_id": 45742116, "body": "@dreamfly fixed it now,."}, {"owner": {"reputation": 371, "user_id": 1146319, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/228dcbd1cd534e3111b5570c726b70fc?s=128&d=identicon&r=PG", "display_name": "dreamfly", "link": "https://stackoverflow.com/users/1146319/dreamfly"}, "edited": false, "score": 0, "creation_date": 1424892788, "post_id": 28727518, "comment_id": 45742197, "body": "@Arup...yes I just found out too...just more more little thing to remember--swap the sequence of the parms."}], "tags": [], "owner": {"reputation": 109029, "user_id": 2767755, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/BkC8q.jpg?s=128&g=1", "display_name": "Arup Rakshit", "link": "https://stackoverflow.com/users/2767755/arup-rakshit"}, "is_accepted": true, "score": 5, "last_activity_date": 1424892621, "last_edit_date": 1424892621, "creation_date": 1424891111, "answer_id": 28727518, "question_id": 28727299, "link": "https://stackoverflow.com/questions/28727299/why-didnt-my-one-liner-block-work/28727518#28727518", "title": "Why didn&#39;t my one liner block work?", "body": "<p>You forgot to return <code>memo</code> :</p>\n\n<pre><code>people.inject({}) {|memo, (name, number)| memo[name] = number; memo }\n</code></pre>\n\n<p><code>Hash#[]=</code>  returns the <em>value</em> after assigning. And in your <em>block</em>, you are adding <em>value</em> to the <em>key</em> using the method <code>#[]=</code>, and the <em>value</em> is being returned and assigned to the <code>memo</code>. Your <code>memo</code> is a <code>Fixnum</code> instance, and on which in the very <em>next</em> iteration, <code>#[]=</code> has been called, like <code>320#[]=</code>. But <code>Fixnum#[]=</code> doesn't exist, so you got the expected error.</p>\n\n<p>But using <code>#each_with_object</code>, you don't need to return <code>memo</code> :</p>\n\n<pre><code>people.each_with_object({}) {|(name, number), memo| memo[name] = number }\n</code></pre>\n\n<p>The above will work.</p>\n"}], "owner": {"reputation": 371, "user_id": 1146319, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/228dcbd1cd534e3111b5570c726b70fc?s=128&d=identicon&r=PG", "display_name": "dreamfly", "link": "https://stackoverflow.com/users/1146319/dreamfly"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 79, "favorite_count": 0, "accepted_answer_id": 28727518, "answer_count": 1, "score": 2, "last_activity_date": 1424892621, "creation_date": 1424890492, "last_edit_date": 1424891133, "question_id": 28727299, "link": "https://stackoverflow.com/questions/28727299/why-didnt-my-one-liner-block-work", "title": "Why didn&#39;t my one liner block work?", "body": "<p>I saw this on codequizzes.com:</p>\n\n<blockquote>\n  <p>Convert this</p>\n\n<pre><code>people = [[\"bob\", 320], [\"edgar\", 152], [\"maria\", 125]]\n</code></pre>\n  \n  <p>to</p>\n\n<pre><code>{\"bob\" =&gt; 320, \"edgar\" =&gt; 152, \"maria\" =&gt; 125}\n</code></pre>\n  \n  <p>Answer:</p>\n\n<pre><code>Hash[people]\n</code></pre>\n  \n  <p>or</p>\n\n<pre><code>people.inject({}) do |memo, (name, number)|\n  memo[name] = number\n  memo\nend\n</code></pre>\n</blockquote>\n\n<p>The above all worked.  However, my one-liner answer below didn't:</p>\n\n<pre><code>people.inject({}) {|memo, (name, number)| memo[name] = number }\n</code></pre>\n\n<p>I got this error:</p>\n\n<pre><code>NoMethodError: undefined method `[]=' for 320:Fixnum\n</code></pre>\n\n<p>What's wrong with my one-liner?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "twitter", "sinatra"], "answers": [{"comments": [{"owner": {"reputation": 95, "user_id": 4351171, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh4.googleusercontent.com/-o_P9r3ZRxiw/AAAAAAAAAAI/AAAAAAAAADA/bXPRJZLCNg8/photo.jpg?sz=128", "display_name": "John Sumner", "link": "https://stackoverflow.com/users/4351171/john-sumner"}, "edited": false, "score": 0, "creation_date": 1424966047, "post_id": 28745470, "comment_id": 45776081, "body": "I&#39;ve updated it now and added random search terms but at the moment it only works for &#39;arsenal&#39; which should is just followers ticked. When both are ticked it also searches  &#39;arsenal&#39; instead of &#39;chelsea&#39; and when just following is ticked it searches the inputted keyword instead of &#39;liverpool&#39;. Any ideas what I&#39;m doing wrong now?"}], "tags": [], "owner": {"reputation": 324, "user_id": 905987, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a0c7d88ecacb16e0fa21b4d43446425?s=128&d=identicon&r=PG", "display_name": "Ollie", "link": "https://stackoverflow.com/users/905987/ollie"}, "is_accepted": true, "score": 1, "last_activity_date": 1424962199, "creation_date": 1424962199, "answer_id": 28745470, "question_id": 28727254, "link": "https://stackoverflow.com/questions/28727254/using-sinatra-checkboxes-to-filter-searching/28745470#28745470", "title": "Using sinatra checkboxes to filter searching", "body": "<p>The problem is in your view, you have the checkboxes in another form so when you hit Search, they are not sent. You need all of the inputs in one form.</p>\n"}, {"tags": [], "owner": {"reputation": 95, "user_id": 4351171, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh4.googleusercontent.com/-o_P9r3ZRxiw/AAAAAAAAAAI/AAAAAAAAADA/bXPRJZLCNg8/photo.jpg?sz=128", "display_name": "John Sumner", "link": "https://stackoverflow.com/users/4351171/john-sumner"}, "is_accepted": false, "score": 0, "last_activity_date": 1424968191, "creation_date": 1424968191, "answer_id": 28747666, "question_id": 28727254, "link": "https://stackoverflow.com/questions/28727254/using-sinatra-checkboxes-to-filter-searching/28747666#28747666", "title": "Using sinatra checkboxes to filter searching", "body": "<p>search.rb</p>\n\n<pre><code> keywords = [\"sheffield\", \"liverpool\", \"london\", \"manchester\"]\n\nget '/search' do\n\n  @keyword = \"No keyword entered\"\n  @results = []\n  puts keywords[0]\n\n  unless params[:filter].nil?\n      @tick_box1 = params[:filter][:follower] == 'on'\n      @tick_box2 = params[:filter][:following] == 'on'\n  end\n\n  if (@tick_box1) &amp;&amp; (@tick_box2)\n    @results = @client.search('chelsea').take(20)\n  elsif (@tick_box1) &amp;&amp; (!@tick_box2)\n    @results = @client.search('arsenal').take(20)\n  elsif (!@tick_box1) &amp;&amp; (@tick_box2)\n    @results = @client.search('liverpool').take(20)\n  else\n    unless params[:keyword].nil?\n      @keyword = params[:keyword]\n      @results = @client.search(@keyword).take(20)\n    end\n\n    unless params[:use_keyword].nil?\n      @results = @client.search(keywords[0]).take(20)\n    end\n  end\n    erb :search\nend\n\n&lt;% query = \"\" %&gt;\n&lt;h1&gt;Search&lt;/h1&gt;\n</code></pre>\n\n<p>search.erb</p>\n\n<pre><code>&lt;div class=\"search-container\"&gt;\n    &lt;form&gt;\n        &lt;input type=\"search\" name=\"keyword\" value=\"&lt;%=h params[:query]%&gt;\"&gt;\n        &lt;input type=\"submit\" value=\"Search\" class=\"button\"&gt;\n        &lt;a href=\"?use_keyword=1\" class=\"button\"&gt;Use Keywords&lt;/a&gt;\n        &lt;a href=\"settings\"&gt;Edit Keywords&lt;/a&gt;\n\n        &lt;div class=\"filters\"&gt;\n            &lt;ul&gt;\n                &lt;li&gt;&lt;input type=\"checkbox\" name=\"filter[follower]\"&gt;Followers&lt;/li&gt;\n                &lt;li&gt;&lt;input type=\"checkbox\" name=\"filter[following]\"&gt;Following&lt;/li&gt;\n            &lt;/ul&gt;\n        &lt;/div&gt;\n    &lt;/form&gt;\n\n\n    &lt;% if query != \"\" %&gt;\n    &lt;p&gt;Showing results for &lt;strong&gt;&lt;%=h query %&gt;&lt;/strong&gt;&lt;/p&gt;\n    &lt;% end %&gt;\n    &lt;%= @keyword %&gt;\n    &lt;ol class=\"search-results\"&gt;\n        &lt;% @results.each do |result| %&gt;\n        &lt;li&gt;&lt;%= result.text %&gt;&lt;/li&gt;\n        &lt;% end %&gt;\n    &lt;/ol&gt;\n    &lt;%= erb :\"partials/pagination\", :locals =&gt; {\n        :total_results =&gt; 100,\n        :results_per_page =&gt; 10,\n        :current_page =&gt; 1\n    }%&gt;\n</code></pre>\n"}], "owner": {"reputation": 95, "user_id": 4351171, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh4.googleusercontent.com/-o_P9r3ZRxiw/AAAAAAAAAAI/AAAAAAAAADA/bXPRJZLCNg8/photo.jpg?sz=128", "display_name": "John Sumner", "link": "https://stackoverflow.com/users/4351171/john-sumner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 157, "favorite_count": 0, "accepted_answer_id": 28745470, "answer_count": 2, "score": 0, "last_activity_date": 1424968191, "creation_date": 1424890326, "last_edit_date": 1424965909, "question_id": 28727254, "link": "https://stackoverflow.com/questions/28727254/using-sinatra-checkboxes-to-filter-searching", "title": "Using sinatra checkboxes to filter searching", "body": "<p>search.rb </p>\n\n<pre><code>keywords = [\"sheffield\", \"liverpool\", \"london\", \"manchester\"]\n\nget '/search' do\n\n  @keyword = \"No keyword entered\"\n  @results = []\n  puts keywords[0]\n\n  unless params[:filter].nil?\n      @tick_box1 = params[:filter][:follower] == 'on'\n      @tick_box2 = params[:filter][:following] == 'on'\n  end\n\n  if (@tick_box1) &amp;&amp; (@tick_box2)\n    @results = @client.search('chelsea').take(20)\n  elsif (@tick_box1) &amp;&amp; (!@tick_box2)\n    @results = @client.search('arsenal').take(20)\n  elsif (!@tick_box1) &amp;&amp; (@tick_box2)\n    @results = @client.search('liverpool').take(20)\n  else\n    unless params[:keyword].nil?\n      @keyword = params[:keyword]\n      @results = @client.search(@keyword).take(20)\n    end\n\n    unless params[:use_keyword].nil?\n      @results = @client.search(keywords[0]).take(20)\n    end\n  end\n    erb :search\nend\n</code></pre>\n\n<p>Search.erb</p>\n\n<pre><code>&lt;% query = \"\" %&gt;\n&lt;h1&gt;Search&lt;/h1&gt;\n\n&lt;div class=\"search-container\"&gt;\n    &lt;form&gt;\n        &lt;input type=\"search\" name=\"keyword\" value=\"&lt;%=h params[:query]%&gt;\"&gt;\n        &lt;input type=\"submit\" value=\"Search\" class=\"button\"&gt;\n        &lt;a href=\"?use_keyword=1\" class=\"button\"&gt;Use Keywords&lt;/a&gt;\n        &lt;a href=\"settings\"&gt;Edit Keywords&lt;/a&gt;\n\n        &lt;div class=\"filters\"&gt;\n            &lt;ul&gt;\n                &lt;li&gt;&lt;input type=\"checkbox\" name=\"filter[follower]\"&gt;Followers&lt;/li&gt;\n                &lt;li&gt;&lt;input type=\"checkbox\" name=\"filter[folowing]\"&gt;Following&lt;/li&gt;\n            &lt;/ul&gt;\n        &lt;/div&gt;\n    &lt;/form&gt;\n\n\n    &lt;% if query != \"\" %&gt;\n    &lt;p&gt;Showing results for &lt;strong&gt;&lt;%=h query %&gt;&lt;/strong&gt;&lt;/p&gt;\n    &lt;% end %&gt;\n    &lt;%= @keyword %&gt;\n    &lt;ol class=\"search-results\"&gt;\n        &lt;% @results.each do |result| %&gt;\n        &lt;li&gt;&lt;%= result.text %&gt;&lt;/li&gt;\n        &lt;% end %&gt;\n    &lt;/ol&gt;\n    &lt;%= erb :\"partials/pagination\", :locals =&gt; {\n        :total_results =&gt; 100,\n        :results_per_page =&gt; 10,\n        :current_page =&gt; 1\n    }%&gt;\n</code></pre>\n\n<p>I want to make it so when check boxes are selected it searches the certain category (eg followers following). But at the moment even if i check the tick boxes it still searches the entered keyword. But i only want it to search the whole of twitter for the entered keyword if i don't select any of the check boxes. Does anyone have any solutions. </p>\n\n<p>ps( i will write the code for searching followers and following later when I've figured this out.)</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 21389, "user_id": 12484, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/08f53f1d60bb079c102eb9738f24888d?s=128&d=identicon&r=PG", "display_name": "Jon Schneider", "link": "https://stackoverflow.com/users/12484/jon-schneider"}, "edited": false, "score": 0, "creation_date": 1546560011, "post_id": 28727240, "comment_id": 94899221, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/5443740/how-do-i-handle-too-long-index-names-in-a-ruby-on-rails-activerecord-migration\">How do I handle too long index names in a Ruby on Rails ActiveRecord migration?</a>"}], "answers": [{"tags": [], "owner": {"reputation": 2405, "user_id": 135845, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/agZcF.jpg?s=128&g=1", "display_name": "Eric", "link": "https://stackoverflow.com/users/135845/eric"}, "is_accepted": false, "score": 1, "last_activity_date": 1424893456, "creation_date": 1424893456, "answer_id": 28728182, "question_id": 28727240, "link": "https://stackoverflow.com/questions/28727240/migrations-t-references-doesnt-allow-index-name-to-be-specified/28728182#28728182", "title": "migrations: t.references doesn&#39;t allow index name to be specified", "body": "<p>Specify it longhand:</p>\n\n<pre><code>  t.integer :othermodel_id\n  ...\nend\nadd_index :thismodel, :othermodel_id, index_name: 'othermodel_index'\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2543, "user_id": 297632, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/fIzur.jpg?s=128&g=1", "display_name": "Rafael Oliveira", "link": "https://stackoverflow.com/users/297632/rafael-oliveira"}, "edited": false, "score": 2, "creation_date": 1457661169, "post_id": 28728271, "comment_id": 59519641, "body": "I love Rails, so simple!"}], "tags": [], "owner": {"reputation": 13534, "user_id": 644810, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/ADwSQ.png?s=128&g=1", "display_name": "Rustam A. Gasanov", "link": "https://stackoverflow.com/users/644810/rustam-a-gasanov"}, "is_accepted": true, "score": 108, "last_activity_date": 1532513800, "last_edit_date": 1532513800, "creation_date": 1424893732, "answer_id": 28728271, "question_id": 28727240, "link": "https://stackoverflow.com/questions/28727240/migrations-t-references-doesnt-allow-index-name-to-be-specified/28728271#28728271", "title": "migrations: t.references doesn&#39;t allow index name to be specified", "body": "<p>According to <a href=\"https://github.com/rails/rails/blob/8e4ab75aa21cc482fc7e9c2c269ac37a40340dfa/activerecord/lib/active_record/connection_adapters/abstract/schema_definitions.rb#L351\" rel=\"noreferrer\">Rails code for <code>references</code></a>, you can do so, providing <code>index</code> a <code>Hash</code> with options, the one you need called <code>:name</code>, so:</p>\n\n<pre><code>t.references :my_field, index: { name: 'my_index_name' }\n</code></pre>\n"}], "owner": {"reputation": 7669, "user_id": 40956, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/542fc411e2ec547afd9ed7ed4caa5b3d?s=128&d=identicon&r=PG", "display_name": "Drew Dara-Abrams", "link": "https://stackoverflow.com/users/40956/drew-dara-abrams"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 12157, "favorite_count": 1, "accepted_answer_id": 28728271, "answer_count": 2, "score": 47, "last_activity_date": 1532513800, "creation_date": 1424890280, "question_id": 28727240, "link": "https://stackoverflow.com/questions/28727240/migrations-t-references-doesnt-allow-index-name-to-be-specified", "title": "migrations: t.references doesn&#39;t allow index name to be specified", "body": "<p>I have the following in a migration:</p>\n\n<pre><code>create_table :model_with_a_long_name do |t|\n  t.references :other_model_with_an_equally_long_name, index: true\nend\n</code></pre>\n\n<p>That produces an index with too long of a name for Postgres.</p>\n\n<p>Is there a way to manually specify the index name (without adding the integer column and the index separately)?</p>\n\n<p>Something like the following:</p>\n\n<pre><code>create_table :model_with_a_long_name do |t|\n  t.references :other_model_with_an_equally_long_name, index: true, index_name: 'model_and_other'\nend\n</code></pre>\n\n<p>?</p>\n"}, {"tags": ["ruby", "sinatra", "sequel"], "comments": [{"owner": {"reputation": 11331, "user_id": 132053, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f183bcc4176b308c9edabe79299e448f?s=128&d=identicon&r=PG", "display_name": "Jeremy Evans", "link": "https://stackoverflow.com/users/132053/jeremy-evans"}, "edited": false, "score": 0, "creation_date": 1424989464, "post_id": 28726719, "comment_id": 45789566, "body": "What you have is probably the best way to do it."}, {"owner": {"reputation": 630, "user_id": 785167, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/M4b8P.jpg?s=128&g=1", "display_name": "Michael R. Cook", "link": "https://stackoverflow.com/users/785167/michael-r-cook"}, "reply_to_user": {"reputation": 11331, "user_id": 132053, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f183bcc4176b308c9edabe79299e448f?s=128&d=identicon&r=PG", "display_name": "Jeremy Evans", "link": "https://stackoverflow.com/users/132053/jeremy-evans"}, "edited": false, "score": 0, "creation_date": 1425034100, "post_id": 28726719, "comment_id": 45805602, "body": "Great, thanks Jeremy."}], "answers": [{"comments": [{"owner": {"reputation": 630, "user_id": 785167, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/M4b8P.jpg?s=128&g=1", "display_name": "Michael R. Cook", "link": "https://stackoverflow.com/users/785167/michael-r-cook"}, "edited": false, "score": 0, "creation_date": 1425034065, "post_id": 28745730, "comment_id": 45805583, "body": "I ofter use counter cache when in Rails so I like this, and as I use postgres exclusively these days, I don&#39;t mind that dependency. Will definitely take a look at this. Thanks!"}], "tags": [], "owner": {"reputation": 324, "user_id": 905987, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a0c7d88ecacb16e0fa21b4d43446425?s=128&d=identicon&r=PG", "display_name": "Ollie", "link": "https://stackoverflow.com/users/905987/ollie"}, "is_accepted": true, "score": 0, "last_activity_date": 1424962866, "creation_date": 1424962866, "answer_id": 28745730, "question_id": 28726719, "link": "https://stackoverflow.com/questions/28726719/sequel-exclude-records-that-do-not-have-associations/28745730#28745730", "title": "Sequel: exclude records that do not have associations", "body": "<p>Try Jeremy's counter cache <a href=\"https://github.com/jeremyevans/sequel_postgresql_triggers\" rel=\"nofollow\">https://github.com/jeremyevans/sequel_postgresql_triggers</a></p>\n\n<pre><code># In your migration:\npgt_counter_cache :categories, :id, :posts_count, :posts, :category_id\n\n# And in your code:\ncategories = Category.exclude(posts_count: 0).all\n</code></pre>\n\n<p>The documentation isn't very good so here are the arguments: <a href=\"https://github.com/jeremyevans/sequel_postgresql_triggers/blob/master/lib/sequel_postgresql_triggers.rb#L27\" rel=\"nofollow\">https://github.com/jeremyevans/sequel_postgresql_triggers/blob/master/lib/sequel_postgresql_triggers.rb#L27</a></p>\n"}], "owner": {"reputation": 630, "user_id": 785167, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/M4b8P.jpg?s=128&g=1", "display_name": "Michael R. Cook", "link": "https://stackoverflow.com/users/785167/michael-r-cook"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "accepted_answer_id": 28745730, "answer_count": 1, "score": 0, "last_activity_date": 1424962866, "creation_date": 1424888515, "question_id": 28726719, "link": "https://stackoverflow.com/questions/28726719/sequel-exclude-records-that-do-not-have-associations", "title": "Sequel: exclude records that do not have associations", "body": "<p>I have a Sinatra app using the Sequel ORM in which I'm trying to list only Categories that have one or more Posts.</p>\n\n<p>So, if I have two categories in the database; \"Apples\" and \"Oranges\", and one Post assigned to \"Apples\", then when I list the current categories I only want the \"Apples\" category to be provided.</p>\n\n<p>After much hair-pulling I finally managed to get it working with the following;</p>\n\n<pre><code>class Post &lt; Sequel::Model\n  many_to_one :category\nend\n\nclass Category &lt; Sequel::Model\n  one_to_many :posts\n\n   dataset_module do \n     def with_posts\n       where(id: Post.select(:category_id))\n     end\n   end\nend\n\n@categories = Category.with_posts\n</code></pre>\n\n<p>If there's a better way of doing this in Sequel please do let me know.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "database", "activerecord"], "comments": [{"owner": {"reputation": 2395, "user_id": 1626261, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/v6cN0.jpg?s=128&g=1", "display_name": "Sonalkumar sute", "link": "https://stackoverflow.com/users/1626261/sonalkumar-sute"}, "edited": false, "score": 0, "creation_date": 1424887439, "post_id": 28726131, "comment_id": 45739199, "body": "<code>new_balance = account.balance + params[:account][:balance].to_f</code> then update the attribute"}], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 4602337, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cb455b1c9cb2342b75ff2d54d628394?s=128&d=identicon&r=PG&f=1", "display_name": "Nazeer Valli", "link": "https://stackoverflow.com/users/4602337/nazeer-valli"}, "is_accepted": false, "score": 0, "last_activity_date": 1424887493, "creation_date": 1424887493, "answer_id": 28726395, "question_id": 28726131, "link": "https://stackoverflow.com/questions/28726131/is-there-a-way-to-add-to-an-existing-balance-or-amount-in-a-database-column-with/28726395#28726395", "title": "Is there a way to add to an existing balance or amount in a database column without just replacing it when updating?", "body": "<p>Why not pull the existing value to your client code, do your magic adding and then update the record with the new value? </p>\n"}, {"tags": [], "owner": {"reputation": 40236, "user_id": 923315, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/j6lLI.jpg?s=128&g=1", "display_name": "peter", "link": "https://stackoverflow.com/users/923315/peter"}, "is_accepted": false, "score": 1, "last_activity_date": 1424887574, "creation_date": 1424887574, "answer_id": 28726419, "question_id": 28726131, "link": "https://stackoverflow.com/questions/28726131/is-there-a-way-to-add-to-an-existing-balance-or-amount-in-a-database-column-with/28726419#28726419", "title": "Is there a way to add to an existing balance or amount in a database column without just replacing it when updating?", "body": "<p>You can use += on a field/attribute, you don't need the assign_attributes</p>\n\n<pre><code>def deposit\n   account = find_account(params[:id])\n   account.balance += params[:account][:balance].to_f\n   if account.save\n     redirect_to accounts_path\n   else\n     redirect_to :back\n   end\nend\n</code></pre>\n"}], "owner": {"reputation": 113, "user_id": 4552045, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-msc8sAwe2l4/AAAAAAAAAAI/AAAAAAAAABI/dfgKxyt2ku8/photo.jpg?sz=128", "display_name": "Aaron Wortham", "link": "https://stackoverflow.com/users/4552045/aaron-wortham"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1424887574, "creation_date": 1424886661, "question_id": 28726131, "link": "https://stackoverflow.com/questions/28726131/is-there-a-way-to-add-to-an-existing-balance-or-amount-in-a-database-column-with", "title": "Is there a way to add to an existing balance or amount in a database column without just replacing it when updating?", "body": "<p>I am building a budgeting app of sorts. So I need to be able to make a deposit and a withdrawal. However the update method replaces the previous amount rather than adding to it. When I google this question I get active record migrations. Is there something similar to update_attributes that adds on to rather than replacing? Or is there a db column type that works this way? \nThis is what I have right now. </p>\n\n<pre><code>    def deposit\n     account = find_account(params[:id])\n     new_balance = account.balance += params[:account][:balance].to_f\n     account.assign_attributes(balance: new_balance)\n     if account.save\n      redirect_to accounts_path\n     else\n      redirect_to :back\n    end\n  end\n</code></pre>\n"}, {"tags": ["javascript", "ruby-on-rails", "ruby", "angularjs", "ruby-on-rails-3"], "answers": [{"comments": [{"owner": {"reputation": 19260, "user_id": 1727392, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/KP9Ia.jpg?s=128&g=1", "display_name": "duhaime", "link": "https://stackoverflow.com/users/1727392/duhaime"}, "edited": false, "score": 0, "creation_date": 1462149583, "post_id": 28835904, "comment_id": 61502721, "body": "I just spent a good many hours looking for <code>fd.append(&#39;user[avatar]&#39;, files[0]);</code> . You are a saint!"}], "tags": [], "owner": {"reputation": 16776, "user_id": 1620081, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/bc22b26eca68dab55ec4fe491495951e?s=128&d=identicon&r=PG", "display_name": "Augustin Riedinger", "link": "https://stackoverflow.com/users/1620081/augustin-riedinger"}, "is_accepted": false, "score": 1, "last_activity_date": 1425397464, "last_edit_date": 1495541263, "creation_date": 1425397464, "answer_id": 28835904, "question_id": 28726021, "link": "https://stackoverflow.com/questions/28726021/use-angular-js-to-submit-file-via-rails-paperclip/28835904#28835904", "title": "Use angular js to submit file via rails paperclip", "body": "<p>This <a href=\"https://stackoverflow.com/a/11111758/1620081\">answer</a> helped me a lot, but I going to go through every part of it to have a complete answer.</p>\n\n<p>Say you have a <code>User</code> model with a <code>avatar</code> attribute.</p>\n\n<p>In your Angular View:</p>\n\n<pre><code>&lt;input type=\"file\" name=\"avatar\" onchange=\"angular.element(this).scope().uploadFile(this.files)\" /&gt;\n</code></pre>\n\n<p>In the Angular Controller:</p>\n\n<pre><code>    $scope.uploadFile = function(files) {\n        var fd = new FormData();\n        fd.append('user[avatar]', files[0]); // 'user[avatar]' is important, so that params[:user][:avatar] contains the file, as expected by Rails\n        $http.put('/users.json', fd, { // The update method of the users controller\n            withCredentials: true,\n            headers: {\n                'Content-Type': undefined,\n                'X-CSRF-Token': $('meta[name=csrf-token]').attr('content')\n            },\n            transformRequest: angular.identity\n        }).success(function(e) {\n            console.log(e);\n        }).error(function(e) {\n            console.log(e);\n        });\n    };\n</code></pre>\n\n<p>In the UserController.rb:</p>\n\n<pre><code>class UserController &lt; ApplicationController\n  def update\n    @user = User.find(params[:id])\n    @user.assign_attributes(user_allowed_parameters)\n    if (@user.save)\n      render json: {msg: 'Successfully updated'}\n    else\n      render json: {msg: @user.errors.full_messages}, status: 500\n    end\n  end\n\n  private\n\n  def user_allowed_parameters\n    params.fetch(:user, {}).permit(\n      :first_name, \n      :last_name,\n      :email,\n      :avatar\n    )\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 4606872, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21925cfa53d2c64bbed45760b59b9eda?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Hall", "link": "https://stackoverflow.com/users/4606872/jordan-hall"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 545, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1425397464, "creation_date": 1424886332, "question_id": 28726021, "link": "https://stackoverflow.com/questions/28726021/use-angular-js-to-submit-file-via-rails-paperclip", "title": "Use angular js to submit file via rails paperclip", "body": "<p>I'm trying to use angular to send a file as a param to rails, and then have rails save that file as a user attachment via paperclip. The furthest I've gotten is getting rails to upload something, but it ends up being a txt file with the single line 'object file'.</p>\n\n<p><strong>Here's the relevant Angular</strong></p>\n\n<pre><code>a.uploadAnonRes = function(app){\n  if(window.FileReader){ console.log(\"supported\")};\n  console.log(($('.anonUploadField'))[0].files);\n  http = {\n    method: \"PUT\",\n    url: '/admin/upload_anon_res.json',\n    params: {\n      anon_file: btoa(($('.anonUploadField'))[0].files[0]),\n      user_id: app.raw_app.user_id\n    }\n  };\n  $http(http).success(function(data){\n      console.log(\"success\");\n  });\n};\n</code></pre>\n\n<p><strong>Here's the relevant rails</strong></p>\n\n<pre><code>def upload_anon_res\n user = User.find(params[:user_id])\n user.anon_resume = decode_res\n user.save\n respond_to do |format|\n  format.json{ render json: user, root: false }\n end\nend\n\ndef decode_res\n decoded_data = Base64.decode64(params[:anon_file])\n data = StringIO.new(decoded_data)\n return data\nend\n</code></pre>\n\n<p>As a last note, the file types that I'm trying to work with are doc/docx. I'm trying to avoid adding new dependencies, but if there's no other good way, then so be it. I really appreciate any help/suggestions.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "model", "save", "integer"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1424895345, "post_id": 28725959, "comment_id": 45743699, "body": "You want to add to a boolean column? What&#39;s the purpose of the various constants in there that are all the same?"}, {"owner": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1424898461, "post_id": 28725959, "comment_id": 45745435, "body": "@tadman I want :missed, which is an integer to represent 1 so that when a User clicks on its box the index will add up how many boxes were clicked, therefore representing how many days the User :missed"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1424899274, "post_id": 28725959, "comment_id": 45745853, "body": "It&#39;s still completely unclear why you have so many constants with identical contents, and even more baffling that they all contain just the value <code>1</code> repeated three times for no apparent reason. Keep in mind that columns should not have <code>?</code> in their name. Boolean columns do not have that in the literal column name, but a convenience method with <code>?</code> at the end is created automatically."}, {"owner": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1424904214, "post_id": 28725959, "comment_id": 45748359, "body": "Sorry for the confusion. I just left that in there to give some context but I guess it just ended up creating confusion. I just wanted to save checkboxes &amp; represent if they are checked by increasing the integer on <code>:missed</code> in the index."}, {"owner": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1424905241, "post_id": 28725959, "comment_id": 45748830, "body": "And sorry the ? was part of the sentence not the code."}], "answers": [{"comments": [{"owner": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "edited": false, "score": 0, "creation_date": 1424904122, "post_id": 28729901, "comment_id": 45748306, "body": "Tadman I think you missed a part after just do this: ... And thanks so much for your help!"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "edited": false, "score": 0, "creation_date": 1424904165, "post_id": 28729901, "comment_id": 45748333, "body": "Oh, it was there, just invisible. Code formatting issue, now fixed."}, {"owner": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "edited": false, "score": 0, "creation_date": 1424904874, "post_id": 28729901, "comment_id": 45748670, "body": "Thanks! I updated the code, but it still isn&#39;t saving in the _form. Any ideas?"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "edited": false, "score": 0, "creation_date": 1424965524, "post_id": 28729901, "comment_id": 45775689, "body": "What do you mean &quot;saving the form&quot;? If you have a valid <code>&lt;form&gt;</code> tag, then it should send the request to the server. You haven&#39;t given any insight into the controller code."}, {"owner": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "edited": false, "score": 0, "creation_date": 1424967857, "post_id": 28729901, "comment_id": 45777273, "body": "I&#39;ve been coding for a few months now, but still find rails tough. I included the controller now. Can you see where the problem lies?"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "edited": false, "score": 1, "creation_date": 1424968910, "post_id": 28729901, "comment_id": 45777957, "body": "For non-standard controls like this you&#39;ll need to convert the incoming <code>:missed</code> param into something that the model can accept. The controller&#39;s job is to intermediate between the web request interface and the various models it needs to store and retrieve data. Part of this responsibility includes mapping incoming parameters. It&#39;s really not clear from your code what you&#39;re trying to do here, what the end goal is."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "edited": false, "score": 0, "creation_date": 1424969022, "post_id": 28729901, "comment_id": 45778033, "body": "Normally a model like Habit would have some kind of identifying parameter, so if you&#39;re trying to manipulate which habits are associated with which users, or which habits are flagged as missed, then you&#39;d want to provide some context on the checkboxes. Having all as <code>1</code> makes it impossible to tell which are which."}, {"owner": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "edited": false, "score": 0, "creation_date": 1424971919, "post_id": 28729901, "comment_id": 45779889, "body": "Darn I really screwed up formatting this question. I took out the stuff was needed to provide context and left in the things that created confusion. Here is the app up-to-date: github.com/RallyWithGalli/ruletoday. I added the full blown goal of my question above. I hope it&#39;s clearer now. I know it&#39;s definitely more difficult. If you could just solve one or two aspects of the question I&#39;d greatly appreciate it."}, {"owner": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "edited": false, "score": 0, "creation_date": 1424984396, "post_id": 28729901, "comment_id": 45787207, "body": "I figured we could continue the conversation here since this one got out of hand: <a href=\"http://stackoverflow.com/questions/28752593/how-to-integrate-missed-days-with-level-days\" title=\"how to integrate missed days with level days\">stackoverflow.com/questions/28752593/&hellip;</a>"}], "tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": false, "score": 0, "last_activity_date": 1424904154, "last_edit_date": 1424904154, "creation_date": 1424899496, "answer_id": 28729901, "question_id": 28725959, "link": "https://stackoverflow.com/questions/28725959/how-to-save-checkbox-increase-integer-for-each-checkmark/28729901#28729901", "title": "How to SAVE checkbox &amp; INCREASE integer for each checkmark?", "body": "<p>If you want a bunch of checkboxes, just do this:</p>\n\n<pre><code>&lt;%- 5.times do |n| %-&gt;\n  &lt;%= f.label \"Level #{n+1}:\" %&gt;\n  &lt;%= check_box_tag 'missed[]', value: n+1 %&gt;\n&lt;%- end -%&gt;\n</code></pre>\n\n<p>Then you should receive a <code>missed</code> param with a series of numbers in it, each one corresponding to if that day was checked or not. If you want to know how many days were missed:</p>\n\n<pre><code>[params[:missed]].flatten.length\n</code></pre>\n\n<p>This handles the case where <code>params[:missed]</code> is not defined.</p>\n"}], "owner": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 92, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1424971595, "creation_date": 1424886151, "last_edit_date": 1424971595, "question_id": 28725959, "link": "https://stackoverflow.com/questions/28725959/how-to-save-checkbox-increase-integer-for-each-checkmark", "title": "How to SAVE checkbox &amp; INCREASE integer for each checkmark?", "body": "<p><strong>If a User checks off a box how can we save it?</strong> </p>\n\n<p>Right now if this happens the checkmark disappears upon refreshing and in the index <code>&lt;%= habit.missed %&gt;</code> it still shows <code>0</code> instead of <code>1</code> (I don't know if a true or false boolean would work for this).</p>\n\n<p><strong>There are 15 checkboxes, for each box a User checks, how can we add +1 to <code>t.integer :missed</code>?</strong></p>\n\n<p>In other words the checkboxes would represent 1 if clicked and 0 if not clicked.</p>\n\n<p>LAYOUT LOOK EX</p>\n\n<pre><code>        Missed:\nLevel 1: [ ] [ ] [ ]\nLevel 2: [\u221a] [\u221a] [ ]\nLevel 3: [\u221a] [ ] [ ]\nLevel 4: [\u221a] [\u221a] [\u221a] [ ]\nLevel 5: [ ] [ ] [ ]\n</code></pre>\n\n<p>END GOAL</p>\n\n<p>The +1 will then add 1 day to the <code>:level</code>, since you wouldn't count a day as completed if you didn't do it. <strong>How can we for each box clicked add +1 to <code>:level</code>?</strong></p>\n\n<p>With the example above the User would need 2 extra days before he could move onto level 3, one extra day before he could move onto level 4, etc.</p>\n\n<p><strong>AND if you miss three days in a level how can we force the User back to restarting that level?</strong> Ex, if I'm on day 66 and checked off <code>:missed</code> three times in the Level 4 row as shown above how can we recalculate the day to be 45 again?</p>\n\n<p>At this point for Level 4 an additional box would need to appear after every checkmark via AJAX in case on his second go around he misses a day. We could just refresh the boxes shown in that level I don't think because we would still need for the purpose of counting how many days he has left.</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>class Habit &lt; ActiveRecord::Base\r\nbelongs_to :user\r\nbefore_save :set_level\r\nacts_as_taggable\r\nserialize :committed, Array\r\n\r\nscope :missed, -&gt; { where(missed: 1) }\r\n\r\ndef levels\r\n\t\tcommitted_wdays = committed.map { |day| Date::DAYNAMES.index(day.titleize) }\r\n\t\tn_days = ((date_started.to_date)..Date.today).count { |date| committed_wdays.include? date.wday }\r\n\r\n  case n_days\t  \r\n  when 0..9\r\n    1\r\n  when 10..24\r\n    2\r\n  when 25..44\r\n    3\r\n  when 45..69\r\n    4\r\n  when 70..99\r\n    5\r\n  else\r\n    \"Mastery\"\r\n\tend\r\nend\r\n\r\nprotected\r\ndef set_level\r\n self.level = levels\r\nend\t\r\nend\r\nend</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;%= simple_form_for(@habit) do |f| %&gt;\r\n  &lt;%= f.error_notification %&gt;\r\n\r\n&lt;div class=\"america\"&gt;\r\n&lt;form&gt;\r\n\r\n  &lt;div class=\"committed\"&gt;\r\n  &lt;%= f.label \"Committed to:\" %&gt;&amp;nbsp;\r\n  &lt;%= f.collection_check_boxes :committed, Date::DAYNAMES, :downcase, :to_s %&gt;\r\n  &lt;/div&gt;\r\n\r\n  &lt;p&gt;&lt;div class=\"date-group\"&gt;\r\n    &lt;label&gt; Started: &lt;/label&gt;\r\n    &lt;%= f.date_select :date_started, :order =&gt; [:month, :day, :year], class: 'date-select' %&gt;\r\n  &lt;/div&gt;&lt;/p&gt;\r\n\r\n  &lt;p&gt;&lt;%= f.text_field :trigger, class: 'form-control', placeholder: 'Enter Trigger' %&gt;&lt;/p&gt;\r\n  &lt;p&gt;&lt;%= f.text_field :tag_list, habit: @habit.tag_list.to_s.titleize, class: 'form-control', placeholder: 'Enter Action' %&gt;&lt;/p&gt;\r\n  &lt;p&gt;&lt;%= f.text_field :target, class: 'form-control', placeholder: 'Enter Target' %&gt;&lt;/p&gt;\r\n  &lt;p&gt;&lt;%= f.text_field :positive, class: 'form-control', placeholder: 'Enter Reward' %&gt;&lt;/p&gt;\r\n  &lt;%= f.text_field :negative, class: 'form-control', placeholder: 'Enter Penalty' %&gt;\r\n&lt;% 5.times do |n| %&gt;\r\n  &lt;%= f.label \"Level #{n+1}:\" %&gt;\r\n  &lt;%= check_box_tag 'missed[]', value: n+1 %&gt;\r\n&lt;% end %&gt;\r\n\r\n&lt;div class=\"america2\"&gt;\r\n  &lt;%= button_tag(type: 'submit', class: \"btn\") do %&gt;\r\n  &lt;span class=\"glyphicon glyphicon-plus\"&gt;&lt;/span&gt;\r\n  &lt;% end %&gt;\r\n\r\n  &lt;%= link_to habits_path, class: 'btn' do %&gt;\r\n  &lt;span class=\"glyphicon glyphicon-chevron-left\"&gt;&lt;/span&gt;\r\n  &lt;% end %&gt;\r\n\r\n  &lt;%= link_to @habit, method: :delete, data: { confirm: 'Are you sure?' }, class: 'btn' do %&gt;\r\n  &lt;span class=\"glyphicon glyphicon-trash\"&gt;&lt;/span&gt;\r\n  &lt;% end %&gt;\r\n&lt;/div&gt;\r\n  \r\n&lt;/form&gt;\r\n&lt;/div&gt;\r\n&lt;% end %&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>class HabitsController &lt; ApplicationController\r\n  before_action :set_habit, only: [:show, :edit, :update, :destroy]\r\n  before_action :logged_in_user, only: [:create, :destroy]\r\n\r\n  def index\r\n    if params[:tag]\r\n      @habits = Habit.tagged_with(params[:tag])\r\n    else\r\n      @habits = Habit.all.order(\"date_started DESC\")\r\n      @habits = current_user.habits\r\n    end\r\n  end\r\n\r\n  def show\r\n  end\r\n\r\n  def new\r\n    @habit = current_user.habits.build\r\n  end\r\n\r\n  def edit\r\n  end\r\n\r\n  def create\r\n    @habit = current_user.habits.build(habit_params)\r\n    if  @habit.save\r\n        redirect_to @habit, notice: 'Habit was successfully created.'\r\n    else\r\n        @feed_items = []\r\n        render 'pages/home'\r\n    end\r\n  end\r\n\r\n  def update\r\n    if @habit.update(habit_params)\r\n      redirect_to @habit, notice: 'Habit was successfully updated.'\r\n    else\r\n      render action: 'edit'\r\n    end\r\n  end\r\n\r\n  def destroy\r\n    @habit.destroy\r\n    redirect_to habits_url\r\n  end\r\n\r\n  private\r\n    def set_habit\r\n      @habit = Habit.find(params[:id])\r\n    end\r\n\r\n    def correct_user\r\n      @habit = current_user.habits.find_by(id: params[:id])\r\n      redirect_to habits_path, notice: \"Not authorized to edit this habit\" if @habit.nil?\r\n    end\r\n\r\n    def habit_params\r\n      params.require(:habit).permit(:missed, :left, :level, :date_started, :trigger, :target, :positive, :negative, :tag_list, :committed =&gt; [])\r\n    end\r\nend</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p><strong>Thank you =]</strong></p>\n\n<p>P.S. Open to using select boxes, checkboxes, collection_boxes, etc so long as it gets the job done.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 11404, "user_id": 599436, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1b6fa83b64b8ad9dc7643a68bf5c214d?s=128&d=identicon&r=PG", "display_name": "Jon Egeland", "link": "https://stackoverflow.com/users/599436/jon-egeland"}, "edited": false, "score": 0, "creation_date": 1424885659, "post_id": 28725682, "comment_id": 45737945, "body": "This is rather hard to understand, but it sounds like you might want a <a href=\"http://guides.rubyonrails.org/association_basics.html#the-has-many-through-association\" rel=\"nofollow noreferrer\"><code>has_many :through</code></a>"}, {"owner": {"reputation": 380, "user_id": 1496874, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zKXbo.jpg?s=128&g=1", "display_name": "Stoic Alchemist", "link": "https://stackoverflow.com/users/1496874/stoic-alchemist"}, "reply_to_user": {"reputation": 11404, "user_id": 599436, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1b6fa83b64b8ad9dc7643a68bf5c214d?s=128&d=identicon&r=PG", "display_name": "Jon Egeland", "link": "https://stackoverflow.com/users/599436/jon-egeland"}, "edited": false, "score": 0, "creation_date": 1424886035, "post_id": 28725682, "comment_id": 45738232, "body": "The thing is, I want a HABTM relation with Mods and Models, but I want to skip the Models model so I can use the list of all <code>Activerecord::Base</code> subclases. This is to avoid maintaining the Models model and avoid using de <code>Model</code>  reserved keyword from Rails"}, {"owner": {"reputation": 380, "user_id": 1496874, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zKXbo.jpg?s=128&g=1", "display_name": "Stoic Alchemist", "link": "https://stackoverflow.com/users/1496874/stoic-alchemist"}, "edited": false, "score": 0, "creation_date": 1424887197, "post_id": 28725682, "comment_id": 45739041, "body": "Yes, I simplified in the second response."}, {"owner": {"reputation": 32543, "user_id": 528726, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/6307569a99dd77fff0463032051d7e39?s=128&d=identicon&r=PG", "display_name": "joelparkerhenderson", "link": "https://stackoverflow.com/users/528726/joelparkerhenderson"}, "edited": false, "score": 1, "creation_date": 1424887948, "post_id": 28725682, "comment_id": 45739520, "body": "IMHO it may help to edit your question to something more concrete, to make it easier to understand quickly, such as Ruby&#39;s typical examples of Song, Album, Artist. Your current question sounds to me like you want a dynamically-contructed HABTM."}, {"owner": {"reputation": 5292, "user_id": 2727267, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0e7c773908a4f6095f63cb9553bbc7af?s=128&d=identicon&r=PG", "display_name": "Beartech", "link": "https://stackoverflow.com/users/2727267/beartech"}, "edited": false, "score": 1, "creation_date": 1424891939, "post_id": 28725682, "comment_id": 45741766, "body": "I think your logic for the association is backwards. Look at how you would use it. Would you Article_title a Tag? No, you Tag an Article_title. It would seem that Article_Titles can have many Tags and Tags can belong to many Article_Titles. Your edit to the question is still kind of vague. You could map out your data structure, that might make it clearer. You say you want to be able to tag a dynamically created list, but then how will you know what tag goes with what article? How will it persist if no in the DB?"}, {"owner": {"reputation": 380, "user_id": 1496874, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zKXbo.jpg?s=128&g=1", "display_name": "Stoic Alchemist", "link": "https://stackoverflow.com/users/1496874/stoic-alchemist"}, "edited": false, "score": 0, "creation_date": 1425565293, "post_id": 28725682, "comment_id": 46021568, "body": "Ok, I see there is no interest in the subject, if someone crosses this path and want to know what I did, I did the &quot;pretend&quot; you have the models and do a has_many on the model with the relation table and the Activerecord operations have to go by hand (create, update, delete) the read part is handled well by the relation structure. To avoid doing any of this, just do a your_model Model."}], "owner": {"reputation": 380, "user_id": 1496874, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zKXbo.jpg?s=128&g=1", "display_name": "Stoic Alchemist", "link": "https://stackoverflow.com/users/1496874/stoic-alchemist"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 73, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1425048227, "creation_date": 1424885346, "last_edit_date": 1425048227, "question_id": 28725682, "link": "https://stackoverflow.com/questions/28725682/permissions-schema-with-relation-to-all-models", "title": "Permissions schema with relation to all Models", "body": "<p><em>Rewriting the question again:</em></p>\n\n<p>My goal is make a permissions scheme using cancan gem. This permission scheme will be editable to automaticaly build the cans and can'ts in the Ability file. The permissions will be related to all the models on the application so I need a Role model, a Model model and a relation between with a <code>has_many :though</code> relation between them. This is all fine but I don't want to have to add records for each Model in the application, I want the models to be available by listing the <code>Activerecord::Base</code> descendants. So, I'm building it with the Role model, the ModelRole relation and the <code>Role has_many</code> relation and <code>ModelRole belongs_to</code> relation.</p>\n\n<p>So far so good, but then, as there is no Model model (I know I would need to use other class name, model is a reserved key in ruby) I can't instance an object to relate to Role and save the role permission scheme in ModelsRoles, so I have to do it manually, but that feels akward.</p>\n\n<p>Is this the better way? is there another way? or I should write the MyModel class to avoid all this and \"eat my veggies\"?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 14979, "user_id": 291700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39e784d62dbda680c5c2ac6d9b9738aa?s=128&d=identicon&r=PG", "display_name": "Charles Caldwell", "link": "https://stackoverflow.com/users/291700/charles-caldwell"}, "edited": false, "score": 10, "creation_date": 1424885325, "post_id": 28725500, "comment_id": 45737700, "body": "Technically Ruby doesn&#39;t return two values. It can return one array which in turn gets assigned to two variables."}], "answers": [{"comments": [{"owner": {"reputation": 20407, "user_id": 1017941, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/yocPw.jpg?s=128&g=1", "display_name": "Hauleth", "link": "https://stackoverflow.com/users/1017941/hauleth"}, "edited": false, "score": 8, "creation_date": 1424904058, "post_id": 28725673, "comment_id": 45748272, "body": "You ca explictly return an array <code>[1, 2]</code> and this will work the same as your examples above."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 20407, "user_id": 1017941, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/yocPw.jpg?s=128&g=1", "display_name": "Hauleth", "link": "https://stackoverflow.com/users/1017941/hauleth"}, "edited": false, "score": 6, "creation_date": 1424904117, "post_id": 28725673, "comment_id": 45748304, "body": "@hauleth A good observation. I should&#39;ve made it clear that <code>1,2</code> by itself is invalid, but either of <code>return 1,2</code> or <code>[1,2]</code> work."}], "tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": false, "score": 173, "last_activity_date": 1424889507, "last_edit_date": 1424889507, "creation_date": 1424885319, "answer_id": 28725673, "question_id": 28725500, "link": "https://stackoverflow.com/questions/28725500/how-does-ruby-return-two-values/28725673#28725673", "title": "How does Ruby return two values?", "body": "<p>Unlike other languages, the return value of any method call in Ruby is <em>always</em> an object. This is possible because, like everything in Ruby, <code>nil</code> itself is an object.</p>\n\n<p>There's three basic patterns you'll see. Returning no particular value:</p>\n\n<pre><code>def nothing\nend\n\nnothing\n# =&gt; nil\n</code></pre>\n\n<p>Returning a singular value:</p>\n\n<pre><code>def single\n  1\nend\n\nx = single\n# =&gt; 1\n</code></pre>\n\n<p>This is in line with what you'd expect from other programming languages.</p>\n\n<p>Things get a bit different when dealing with multiple return values. These need to be specified explicitly:</p>\n\n<pre><code>def multiple\n  return 1, 2\nend\n\nx = multiple\n# =&gt; [ 1, 2 ]\nx\n# =&gt; [ 1, 2 ]\n</code></pre>\n\n<p>When making a call that returns multiple values, you can break them out into independent variables:</p>\n\n<pre><code>x, y = multiple\n# =&gt; [ 1, 2 ]\nx\n# =&gt; 1\ny\n# =&gt; 2\n</code></pre>\n\n<p>This strategy also works for the sorts of substitution you're talking about:</p>\n\n<pre><code>a, b = 1, 2\n# =&gt; [1, 2]\na, b = b, a\n# =&gt; [2, 1]\na\n# =&gt; 2\nb\n# =&gt; 1\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "is_accepted": false, "score": 53, "last_activity_date": 1587444924, "last_edit_date": 1587444924, "creation_date": 1424888839, "answer_id": 28726811, "question_id": 28725500, "link": "https://stackoverflow.com/questions/28725500/how-does-ruby-return-two-values/28726811#28726811", "title": "How does Ruby return two values?", "body": "<p>No, Ruby doesn't actually support returning two objects. (BTW: you return objects, not variables. More precisely, you return pointers to objects.)</p>\n\n<p>It does, however, support parallel assignment. If you have more than one object on the right-hand side of an assignment, the objects are collected into an <code>Array</code>:</p>\n\n<pre><code>foo = 1, 2, 3\n# is the same as\nfoo = [1, 2, 3]\n</code></pre>\n\n<p>If you have more than one \"target\" (variable or setter method) on the left-hand side of an assignment, the variables get bound to elements of an <code>Array</code> on the right-hand side:</p>\n\n<pre><code>a, b, c = ary\n# is the same as\na = ary[0]\nb = ary[1]\nc = ary[2]\n</code></pre>\n\n<p>If the right-hand side is <em>not</em> an <code>Array</code>, it will be converted to one using the <code>to_ary</code> method</p>\n\n<pre><code>a, b, c = not_an_ary\n# is the same as\nary = not_an_ary.to_ary\na = ary[0]\nb = ary[1]\nc = ary[2]\n</code></pre>\n\n<p>And if we put the two together, we get that</p>\n\n<pre><code>a, b, c = d, e, f\n# is the same as\nary = [d, e, f]\na = ary[0]\nb = ary[1]\nc = ary[2]\n</code></pre>\n\n<p>Related to this is the splat operator on the left-hand side of an assignment. It means \"take <em>all</em> the left-over elements of the <code>Array</code> on the right-hand side\":</p>\n\n<pre><code>a, b, *c = ary\n# is the same as\na = ary[0]\nb = ary[1]\nc = ary.drop(2) # i.e. the rest of the Array\n</code></pre>\n\n<p>And last but not least, parallel assignments can be nested using parentheses:</p>\n\n<pre><code>a, (b, c), d = ary\n# is the same as\na = ary[0]\nb, c = ary[1]\nd = ary[2]\n# which is the same as\na = ary[0]\nb = ary[1][0]\nc = ary[1][1]\nd = ary[2]\n</code></pre>\n\n<p>When you <code>return</code> from a method or <code>next</code> or <code>break</code> from a block, Ruby will treat this kind-of like the right-hand side of an assignment, so </p>\n\n<pre><code>return 1, 2\nnext 1, 2\nbreak 1, 2\n# is the same as\nreturn [1, 2]\nnext [1, 2]\nbreak [1, 2]\n</code></pre>\n\n<p>By the way, this also works in parameter lists of methods and blocks (with methods being more strict and blocks less strict):</p>\n\n<pre><code>def foo(a, (b, c), d) p a, b, c, d end\n\nbar {|a, (b, c), d| p a, b, c, d }\n</code></pre>\n\n<p>Blocks being \"less strict\" is for example what makes <code>Hash#each</code> work. It actually <code>yield</code>s a <em>single</em> two-element <code>Array</code> of key and value to the block, but we usually write</p>\n\n<pre><code>some_hash.each {|k, v| }\n</code></pre>\n\n<p>instead of </p>\n\n<pre><code>some_hash.each {|(k, v)| }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "is_accepted": false, "score": 17, "last_activity_date": 1424908033, "last_edit_date": 1424908033, "creation_date": 1424892211, "answer_id": 28727809, "question_id": 28725500, "link": "https://stackoverflow.com/questions/28725500/how-does-ruby-return-two-values/28727809#28727809", "title": "How does Ruby return two values?", "body": "<p>tadman and J\u00f6rg W Mittag know Ruby better than me, and their answers are not wrong, but I don't think they are answering what OP wanted to know. I think that the question was not clear though. In my understanding, what OP wanted to ask has nothing to do with returning multiple values.</p>\n\n<hr>\n\n<p>The real question is, when you want to switch the values of two variables <code>a</code> and <code>b</code> (or two positions in an array as in the original question), why is it not necessary to use a temporal variable <code>temp</code> like:</p>\n\n<pre><code>a, b = :foo, :bar\ntemp = a\na = b\nb = temp\n</code></pre>\n\n<p>but can be done directly like:</p>\n\n<pre><code>a, b = :foo, :bar\na, b = b, a\n</code></pre>\n\n<p>The answer is that in multiple assignment, the whole right hand side is evaluated prior to assignment of the whole left hand side, and it is not done one by one. So <code>a, b = b, a</code> is not equivalent to <code>a = b; b = a</code>.</p>\n\n<p>First evaluating the whole right hand side before assignment is a necessity that follows from adjustment when the both sides of <code>=</code> have different numbers of terms, and J\u00f6rg W Mittag's description may be indirectly related to that, but that is not the main issue.</p>\n"}, {"tags": [], "owner": {"reputation": 761, "user_id": 4884692, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/118303f1846a2bdfa10163cf0a3492b5?s=128&d=identicon&r=PG&f=1", "display_name": "pronoob", "link": "https://stackoverflow.com/users/4884692/pronoob"}, "is_accepted": false, "score": 8, "last_activity_date": 1552167934, "last_edit_date": 1552167934, "creation_date": 1484962206, "answer_id": 41774853, "question_id": 28725500, "link": "https://stackoverflow.com/questions/28725500/how-does-ruby-return-two-values/41774853#41774853", "title": "How does Ruby return two values?", "body": "<p>Arrays are a good option if you have only a few values. If you want multiple return values without having to know (and be confused by) the order of results, an alternative would be to return a Hash that contains whatever named values you want.</p>\n\n<p>e.g.</p>\n\n<pre><code>def make_hash\n  x = 1\n  y = 2\n  {x: x, y: y}\nend\n\nhash = make_hash\n# =&gt; {:x=&gt;1, :y=&gt;2}\nhash[:x]\n# =&gt; 1\nhash[:y]\n# =&gt; 2\n</code></pre>\n"}], "owner": {"reputation": 1370, "user_id": 4525893, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/OQ4lf.png?s=128&g=1", "display_name": "Pete", "link": "https://stackoverflow.com/users/4525893/pete"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 93096, "favorite_count": 18, "answer_count": 4, "score": 101, "last_activity_date": 1587444924, "creation_date": 1424884885, "last_edit_date": 1424901389, "question_id": 28725500, "link": "https://stackoverflow.com/questions/28725500/how-does-ruby-return-two-values", "title": "How does Ruby return two values?", "body": "<p>Whenever I swap values in an array, I make sure I stored one of the values in a reference variable. But I found that Ruby can return two values as well as automatically swap two values. For example,</p>\n\n<pre><code>array = [1, 3, 5 , 6 ,7]\narray[0], array[1] = array[1] , array[0] #=&gt; [3, 1] \n</code></pre>\n\n<p>I was wondering how Ruby does this.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 2, "creation_date": 1424884953, "post_id": 28725458, "comment_id": 45737461, "body": "you can pass arguments to scopes: <a href=\"http://guides.rubyonrails.org/active_record_querying.html#passing-in-arguments\" rel=\"nofollow noreferrer\">guides.rubyonrails.org/&hellip;</a>"}, {"owner": {"reputation": 899, "user_id": 1986039, "user_type": "registered", "accept_rate": 26, "profile_image": "https://i.stack.imgur.com/lLSu0.jpg?s=128&g=1", "display_name": "Developer", "link": "https://stackoverflow.com/users/1986039/developer"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1424885179, "post_id": 28725458, "comment_id": 45737608, "body": "thanks, i know that but can i store that scope name into type variable and call that at last of this Test.by_phase(id)."}, {"owner": {"reputation": 39050, "user_id": 2336231, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/d7kOQ.jpg?s=128&g=1", "display_name": "BroiSatse", "link": "https://stackoverflow.com/users/2336231/broisatse"}, "edited": false, "score": 1, "creation_date": 1424885470, "post_id": 28725458, "comment_id": 45737795, "body": "You mean like <code>data = Test.by_phase(id).send(type)</code>? However you should use dynamic scope anyway, everything is better if you can avoid using send."}, {"owner": {"reputation": 899, "user_id": 1986039, "user_type": "registered", "accept_rate": 26, "profile_image": "https://i.stack.imgur.com/lLSu0.jpg?s=128&g=1", "display_name": "Developer", "link": "https://stackoverflow.com/users/1986039/developer"}, "edited": false, "score": 0, "creation_date": 1424885781, "post_id": 28725458, "comment_id": 45738033, "body": "thanks, might be it will be a stupid question, can i use some thing like        Test.by_phase(id).#(type)"}], "answers": [{"tags": [], "owner": {"reputation": 679, "user_id": 2988753, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/aKneR.jpg?s=128&g=1", "display_name": "AlexLarra", "link": "https://stackoverflow.com/users/2988753/alexlarra"}, "is_accepted": false, "score": 1, "last_activity_date": 1424885480, "creation_date": 1424885480, "answer_id": 28725725, "question_id": 28725458, "link": "https://stackoverflow.com/questions/28725458/call-the-scope-in-rails/28725725#28725725", "title": "call the scope in rails", "body": "<p>As Stefan says you can use a scope with an argument:</p>\n\n<pre><code>scope :type, -&gt;(type) { where(test_type: type)}\n</code></pre>\n\n<p>Or if you want just to fix your controller, as BroiSatse says:</p>\n\n<pre><code>data = Test.by_phase(id).send(type)\n</code></pre>\n"}], "owner": {"reputation": 899, "user_id": 1986039, "user_type": "registered", "accept_rate": 26, "profile_image": "https://i.stack.imgur.com/lLSu0.jpg?s=128&g=1", "display_name": "Developer", "link": "https://stackoverflow.com/users/1986039/developer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1424885480, "creation_date": 1424884776, "question_id": 28725458, "link": "https://stackoverflow.com/questions/28725458/call-the-scope-in-rails", "title": "call the scope in rails", "body": "<p>i have two scope in my modal.rb, so what i am trying to do like</p>\n\n<p>test.rb</p>\n\n<pre><code>scope :only_type1, where(\"test.test_type = ?\", TYPE1)\nscope :only_type2, where(\"test.test_type = ?\", TYPE2)\n</code></pre>\n\n<p>controller.rb</p>\n\n<pre><code>if type\n  type = :only_type1\nelse\n  type = :only_type2\nend\ndata = Test.by_phase(id).#(can i use the type here)\n</code></pre>\n\n<p>I mean, can i append that variable depends on that condition? or any other way to do this without replicate that query?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["ruby", "chef-infra", "berkshelf"], "answers": [{"comments": [{"owner": {"reputation": 15030, "user_id": 3627607, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd5fd623c0fdd0c93a2535cf6293ec5d?s=128&d=identicon&r=PG", "display_name": "Tensibai", "link": "https://stackoverflow.com/users/3627607/tensibai"}, "edited": false, "score": 2, "creation_date": 1424885850, "post_id": 28725057, "comment_id": 45738094, "body": "why not using the branch name as mentionned in the doc (just above groups at bootom of the page)? This kind of reference is more for a specific commit than a branch. For your case <code>cookbook &#39;elasticsearch&#39;, github: &#39;D1plo1d&#47;cookbook-elasticsearch&#39;, branch: &quot;fixes&quot;</code> should do (branch is an alias to tag, more meaningfull in this case)"}, {"owner": {"reputation": 393, "user_id": 2177668, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/3333ffdcf7a7ebbc6142d6d7699a0ba9?s=128&d=identicon&r=PG", "display_name": "switchflip", "link": "https://stackoverflow.com/users/2177668/switchflip"}, "reply_to_user": {"reputation": 15030, "user_id": 3627607, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd5fd623c0fdd0c93a2535cf6293ec5d?s=128&d=identicon&r=PG", "display_name": "Tensibai", "link": "https://stackoverflow.com/users/3627607/tensibai"}, "edited": false, "score": 0, "creation_date": 1424888136, "post_id": 28725057, "comment_id": 45739627, "body": "I&#39;ll try that too. Thanks."}], "tags": [], "owner": {"reputation": 393, "user_id": 2177668, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/3333ffdcf7a7ebbc6142d6d7699a0ba9?s=128&d=identicon&r=PG", "display_name": "switchflip", "link": "https://stackoverflow.com/users/2177668/switchflip"}, "is_accepted": true, "score": 2, "last_activity_date": 1424883697, "creation_date": 1424883697, "answer_id": 28725057, "question_id": 28724450, "link": "https://stackoverflow.com/questions/28724450/using-a-feature-branch-with-berkshelf/28725057#28725057", "title": "Using a feature branch with Berkshelf", "body": "<p>Alright y'all. I just figured this out, but I thought I should share since it wasn't completely obvious from the <a href=\"http://berkshelf.com/\" rel=\"nofollow\">docs</a>.</p>\n\n<p>So you just need to grab the commit id from the commit that you want to use in berks.</p>\n\n<p>For example in my case I did</p>\n\n<p><code>cookbook \"elasticsearch\", github:\"account-name/elasticsearch\", tag:\"a27dr77g4f97420cd1a69282ce6177a2b95befda\"</code></p>\n\n<p>and vola!</p>\n"}], "owner": {"reputation": 393, "user_id": 2177668, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/3333ffdcf7a7ebbc6142d6d7699a0ba9?s=128&d=identicon&r=PG", "display_name": "switchflip", "link": "https://stackoverflow.com/users/2177668/switchflip"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 560, "favorite_count": 0, "accepted_answer_id": 28725057, "answer_count": 1, "score": 1, "last_activity_date": 1424888121, "creation_date": 1424882017, "last_edit_date": 1424888121, "question_id": 28724450, "link": "https://stackoverflow.com/questions/28724450/using-a-feature-branch-with-berkshelf", "title": "Using a feature branch with Berkshelf", "body": "<p>I'm trying to use a feature branch to test some functionality in a current cookbook I am working on. Normally I would point to the master branch like so:</p>\n\n<p><code>cookbook 'elasticsearch', github: 'account-name/cookbook-elasticsearch'</code></p>\n\n<p>Is there any way to point to a feature branch? Has anyone had any success doing that before?</p>\n\n<p>Thank-you,</p>\n"}, {"tags": ["ruby", "json", "csv"], "comments": [{"owner": {"reputation": 4251, "user_id": 4605105, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh4.googleusercontent.com/-_cFfGx1khYs/AAAAAAAAAAI/AAAAAAAAGt0/vfQ_28nwAEE/photo.jpg?sz=128", "display_name": "&#212;rel", "link": "https://stackoverflow.com/users/4605105/%c3%94rel"}, "edited": false, "score": 0, "creation_date": 1424880894, "post_id": 28723877, "comment_id": 45734710, "body": "Have you try with  http.use_ssl = true ?"}, {"owner": {"reputation": 97, "user_id": 1720723, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/7b4cbcb46b423981b7889419f51242fd?s=128&d=identicon&r=PG", "display_name": "gilles", "link": "https://stackoverflow.com/users/1720723/gilles"}, "reply_to_user": {"reputation": 4251, "user_id": 4605105, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh4.googleusercontent.com/-_cFfGx1khYs/AAAAAAAAAAI/AAAAAAAAGt0/vfQ_28nwAEE/photo.jpg?sz=128", "display_name": "&#212;rel", "link": "https://stackoverflow.com/users/4605105/%c3%94rel"}, "edited": false, "score": 0, "creation_date": 1424881172, "post_id": 28723877, "comment_id": 45734941, "body": "Yep :/ still got the same error"}, {"owner": {"reputation": 32543, "user_id": 528726, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/6307569a99dd77fff0463032051d7e39?s=128&d=identicon&r=PG", "display_name": "joelparkerhenderson", "link": "https://stackoverflow.com/users/528726/joelparkerhenderson"}, "edited": false, "score": 0, "creation_date": 1424882055, "post_id": 28723877, "comment_id": 45735542, "body": "I suggest you pare down your question code. What happens if you require &#39;net/http&#39;, then omit the CSV, the loop, and the JSON? For example, if you try to fetch just one member, what response body do you get?"}], "answers": [{"comments": [{"owner": {"reputation": 32543, "user_id": 528726, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/6307569a99dd77fff0463032051d7e39?s=128&d=identicon&r=PG", "display_name": "joelparkerhenderson", "link": "https://stackoverflow.com/users/528726/joelparkerhenderson"}, "reply_to_user": {"reputation": 97, "user_id": 1720723, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/7b4cbcb46b423981b7889419f51242fd?s=128&d=identicon&r=PG", "display_name": "gilles", "link": "https://stackoverflow.com/users/1720723/gilles"}, "edited": false, "score": 0, "creation_date": 1424882190, "post_id": 28724055, "comment_id": 45735648, "body": "Edit out more, if you can, to trigger the erorr with the least-possible code. Also, change from require &#39;net/https&#39; to &#39;net/http&#39;. You may want to omit your API key."}], "tags": [], "owner": {"reputation": 32543, "user_id": 528726, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/6307569a99dd77fff0463032051d7e39?s=128&d=identicon&r=PG", "display_name": "joelparkerhenderson", "link": "https://stackoverflow.com/users/528726/joelparkerhenderson"}, "is_accepted": false, "score": 1, "last_activity_date": 1424901689, "last_edit_date": 1424901689, "creation_date": 1424881030, "answer_id": 28724055, "question_id": 28723877, "link": "https://stackoverflow.com/questions/28723877/convert-json-key-values-to-csv/28724055#28724055", "title": "Convert JSON key values to CSV", "body": "<p>HTTPS is enabled for an HTTP connection by <code>#use_ssl=</code></p>\n\n<p>This code gets a successful response on my system using Ruby 2.2.0:</p>\n\n<pre><code>require 'net/http'  # Not HTTPS\nkey=\"...\"  # Get your personal API key from Meetup\nuri = URI.parse(\"https://api.meetup.com/2/members?order=name&amp;member_id=1&amp;format=json&amp;key=#{key}\")\nNet::HTTP.start(uri.host, uri.port, use_ssl: true) do |http|\n  request = Net::HTTP::Get.new uri\n  response = http.request request\n  p response.body\nend\n</code></pre>\n\n<p>In previous versions of Ruby you would need to <code>require 'net/https'</code> to use HTTPS. This is <a href=\"http://ruby-doc.org/stdlib-2.2.0/libdoc/net/http/rdoc/Net/HTTP.html\" rel=\"nofollow\">no longer true</a>.</p>\n\n<p>Can you try the code above on your system? </p>\n\n<p>If it works, great. If it doesn't work, then you can simplify your question code, such as omitting the CSV, the loop, the JSON, etc.</p>\n"}], "owner": {"reputation": 97, "user_id": 1720723, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/7b4cbcb46b423981b7889419f51242fd?s=128&d=identicon&r=PG", "display_name": "gilles", "link": "https://stackoverflow.com/users/1720723/gilles"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 277, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1425172522, "creation_date": 1424880586, "last_edit_date": 1425172522, "question_id": 28723877, "link": "https://stackoverflow.com/questions/28723877/convert-json-key-values-to-csv", "title": "Convert JSON key values to CSV", "body": "<p>My goal is to read a CSV file, get each ID from that file's records, use each ID into the Meetup API URL and then create a new CSV file with certain values from the JSON response.</p>\n\n<p>Here's what I have so far:</p>\n\n<pre><code>require \"net/https\"\nrequire \"uri\"\nrequire 'csv'\nrequire 'json'\n\nmembersCSV = CSV.foreach('id-members-meetup.csv') do |row|\nid = row[1]\nuri = URI.parse(\"https://api.meetup.com/2/members?order=name&amp;member_id=\" + id + \"&amp;format=json&amp;key=MY_KEY\")\nhttp = Net::HTTP.new(uri.host, uri.port)\nrequest = Net::HTTP::Get.new(uri.request_uri)\nresponse = http.request(request)\nCSV.open(\"ghmeetup.csv\", \"w\", {:col_sep =&gt; \";\"}) do |csv|\n  JSON.parse(response.body)[\"other_services\"].each do |single|\n    csv &lt;&lt; [single[\"twitter\"][\"identifier\"], single[\"facebook\"][\"identifier\"], single[\"linkedin\"][\"identifier\"]]\n  end\nend\nend\n</code></pre>\n\n<p>And this is the error I get:</p>\n\n<pre><code>/Library/Ruby/Gems/2.0.0/gems/json-1.8.2/lib/json/common.rb:155:in `parse': 757: (JSON::ParserError) '&lt;html&gt;\n&lt;head&gt;&lt;title&gt;400 The plain HTTP request was sent to HTTPS port&lt;/title&gt;&lt;/head&gt;\n&lt;body bgcolor=\"white\"&gt;\n&lt;center&gt;&lt;h1&gt;400 Bad Request&lt;/h1&gt;&lt;/center&gt;\n&lt;center&gt;The plain HTTP request was sent to HTTPS port&lt;/center&gt;\n&lt;hr&gt;&lt;center&gt;cloudflare-nginx&lt;/center&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n'\n    from /Library/Ruby/Gems/2.0.0/gems/json-1.8.2/lib/json/common.rb:155:in `parse'\n    from ghmeetup.rb:13:in `block (2 levels) in &lt;main&gt;'\n    from /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/csv.rb:1266:in `open'\n    from ghmeetup.rb:12:in `block in &lt;main&gt;'\n    from /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/csv.rb:1716:in `each'\n    from /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/csv.rb:1120:in `block in foreach'\n    from /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/csv.rb:1266:in `open'\n    from /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/csv.rb:1119:in `foreach'\n    from ghmeetup.rb:6:in `&lt;main&gt;'\n</code></pre>\n\n<p>What do you think? </p>\n\n<p><strong>EDIT</strong></p>\n\n<pre><code>require \"uri\"\nrequire 'csv'\nrequire 'json'\nrequire 'net/http'\n\nghCSV = CSV.foreach('id-gh-meetup.csv') do |row|\n    id = row[1]\n    key=\"KEY\" \n    uri = URI.parse(\"https://api.meetup.com/2/members?order=name&amp;member_id=#{id}&amp;format=json&amp;key=#{key}\")\n    Net::HTTP.start(uri.host, uri.port, use_ssl: true) do |http|\n    request = Net::HTTP::Get.new uri\n    response = http.request request\n    parseResponse = JSON.parse(response.body)['results'][0]\n    p \"working\"\n      CSV.open(\"ghmeetup.csv\", \"w\") do |csv|\n        p \"working 2\"       \n            parseResponse.each do |single|\n                p \"working 3\"\n              csv &lt;&lt; single\n            end\n        end\n    end\nend\n</code></pre>\n\n<p>So it works if I keep only JSON.parse(response.body) but when I add ['results'][0] in parseResponse I get this error:</p>\n\n<pre><code>ghmeetup.rb:15:in `block (2 levels) in &lt;main&gt;': undefined method `[]' for nil:NilClass (NoMethodError)\n</code></pre>\n\n<p>This is the JSON structure, I want to target [results][0].other_services.twitter.identifier</p>\n\n<pre><code>{\nresults: [\n - {\n   - other_services: {\n      twitter: {\n        identifier: \"@HugoAmsellem\"\n</code></pre>\n\n<p>Any idea?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"tags": [], "owner": {"reputation": 3571, "user_id": 185310, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/063c98fb1df33c7a4ea70a7d829f83c6?s=128&d=identicon&r=PG&f=1", "display_name": "Mike K.", "link": "https://stackoverflow.com/users/185310/mike-k"}, "is_accepted": true, "score": 0, "last_activity_date": 1424879677, "last_edit_date": 1592644375, "creation_date": 1424879677, "answer_id": 28723532, "question_id": 28723350, "link": "https://stackoverflow.com/questions/28723350/rails-application-questions-on-rails-internal/28723532#28723532", "title": "Rails.application - Questions on Rails Internal", "body": "<ol>\n<li><p>I believe this is done this way because you wouldn't necessarily store it in an environment variable for both development and production environments.  For <code>development</code>, you may just store it directly in the file but for <code>production</code> you may store it in an environment variable, it gives you more flexibility to do it this way.</p>\n</li>\n<li><p><code>Rails</code> is actually a module, not a class.  You can see how it works by looking at the <code>Rails</code> source code:</p>\n<p><a href=\"https://github.com/rails/rails/blob/master/railties/lib/rails.rb\" rel=\"nofollow noreferrer\">https://github.com/rails/rails/blob/master/railties/lib/rails.rb</a></p>\n</li>\n</ol>\n"}], "owner": {"reputation": 1724, "user_id": 3286513, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/bc0cef8062401f1b84db320cb56c28bd?s=128&d=identicon&r=PG", "display_name": "Steven L.", "link": "https://stackoverflow.com/users/3286513/steven-l"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "accepted_answer_id": 28723532, "answer_count": 1, "score": 1, "last_activity_date": 1424879677, "creation_date": 1424879273, "question_id": 28723350, "link": "https://stackoverflow.com/questions/28723350/rails-application-questions-on-rails-internal", "title": "Rails.application - Questions on Rails Internal", "body": "<p>I am working through \"Learn Ruby on Rails\" by Daniel Kehoe, and I came up on this piece of code:</p>\n\n<p>In <strong>config/environments/development.rb</strong>:</p>\n\n<pre><code>config.action_mailer.smtp_settings = {\n    address: \"smtp.gmail.com\",\n    port: 587,\n    domain: Rails.application.secrets.domain_name,\n    authentication: \"plain\",\n    enable_starttls_auto: true,\n    user_name: Rails.application.secrets.email_provider_username,\n    password: Rails.application.secrets.email_provider_password\n  }\n\n  # ActionMailer Config\n  config.action_mailer.default_url_options = { :host =&gt; 'localhost:3000' }\n  config.action_mailer.delivery_method = :smtp\n  config.action_mailer.raise_delivery_errors = true\n  # Send email in development mode?\n  config.action_mailer.perform_deliveries = true\n</code></pre>\n\n<p>This made me think of two questions. </p>\n\n<ol>\n<li>In <strong>config/secrets.yml</strong>, we defined environmental variables to use for sensitive data. For example, <code>email_provider_username: &lt;%= ENV[\"GMAIL_USERNAME\"]</code>. Why not just use ERB in the <strong>config/environments/development.rb</strong> file directly? The only reason I can think of is that development.rb doesn't get run through the ERB preprocessor. Is that the case? Just trying to understand the design decision here. </li>\n<li>I am guessing that, since we are using the dot notation, <code>Rails</code> is an object. Can someone explain to me how that works? Is this the \"top\" of my rails application? </li>\n</ol>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 30655, "user_id": 138557, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/73c04e9ef9ca435c5b19a2e765ae6d20?s=128&d=identicon&r=PG", "display_name": "Max Williams", "link": "https://stackoverflow.com/users/138557/max-williams"}, "edited": false, "score": 1, "creation_date": 1424880865, "post_id": 28723217, "comment_id": 45734674, "body": "You can only access <code>cookies</code> in the controller or view.  You need to add more info about your problem, eg where you are trying to access <code>cookies</code>."}, {"owner": {"reputation": 7, "user_id": 1591182, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/058d8369cd668aca88bdd51e5e8fefae?s=128&d=identicon&r=PG", "display_name": "user1591182", "link": "https://stackoverflow.com/users/1591182/user1591182"}, "reply_to_user": {"reputation": 30655, "user_id": 138557, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/73c04e9ef9ca435c5b19a2e765ae6d20?s=128&d=identicon&r=PG", "display_name": "Max Williams", "link": "https://stackoverflow.com/users/138557/max-williams"}, "edited": false, "score": 0, "creation_date": 1424882213, "post_id": 28723217, "comment_id": 45735661, "body": "I am trying to access the browser cookies from the gem"}, {"owner": {"reputation": 30655, "user_id": 138557, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/73c04e9ef9ca435c5b19a2e765ae6d20?s=128&d=identicon&r=PG", "display_name": "Max Williams", "link": "https://stackoverflow.com/users/138557/max-williams"}, "edited": false, "score": 0, "creation_date": 1424941921, "post_id": 28723217, "comment_id": 45760464, "body": "Cookies are only available when building a response or after receiving a request: ultimately you are just reading request headers and setting response headers. Outside of the context of the controller (which receives requests and makes responses), cookies are therefore not available.  If your gem has modules which are to be included in the controller then they may be able to access them.  But if it is effectively more &quot;model&quot; logic then it won&#39;t be able to access the cookies."}], "answers": [{"tags": [], "owner": {"reputation": 6039, "user_id": 2137458, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8cfca832ee746f3e3d9971148f52dc64?s=128&d=identicon&r=PG", "display_name": "NM Pennypacker", "link": "https://stackoverflow.com/users/2137458/nm-pennypacker"}, "is_accepted": false, "score": 0, "last_activity_date": 1424881180, "creation_date": 1424881180, "answer_id": 28724108, "question_id": 28723217, "link": "https://stackoverflow.com/questions/28723217/how-to-read-cookies-of-an-application-from-a-rails-gem/28724108#28724108", "title": "How to read cookies of an application from a rails gem", "body": "<p>First of all, applications don't store cookies, only browsers do. That said, you can access those cookies from your controllers. See the documentation on cookies here: <a href=\"http://guides.rubyonrails.org/action_controller_overview.html#cookies\" rel=\"nofollow\">http://guides.rubyonrails.org/action_controller_overview.html#cookies</a></p>\n\n<p>Your question is kind of vague. You might have to share some code to get a quality answer.</p>\n"}], "owner": {"reputation": 7, "user_id": 1591182, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/058d8369cd668aca88bdd51e5e8fefae?s=128&d=identicon&r=PG", "display_name": "user1591182", "link": "https://stackoverflow.com/users/1591182/user1591182"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 576, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1424881180, "creation_date": 1424878927, "last_edit_date": 1424880600, "question_id": 28723217, "link": "https://stackoverflow.com/questions/28723217/how-to-read-cookies-of-an-application-from-a-rails-gem", "title": "How to read cookies of an application from a rails gem", "body": "<p>I wrote a gem which will read the cookies of an application that installs my gem. But, I am not able to do that because when I try to add the line <code>cookies[:name]</code>, it is throwing the exception <code>undefined method \"cookies\"</code>.</p>\n\n<p>How to achieve this? Your help is appreciated.</p>\n"}, {"tags": ["c++", "ruby-on-rails", "ruby", "arrays"], "comments": [{"owner": {"reputation": 100228, "user_id": 150634, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/9f438bc04462ee5af4132921a3474842?s=128&d=identicon&r=PG", "display_name": "Joseph Mansfield", "link": "https://stackoverflow.com/users/150634/joseph-mansfield"}, "edited": false, "score": 1, "creation_date": 1424878670, "post_id": 28723045, "comment_id": 45732910, "body": "I think it makes less sense to even think about memory allocation in Ruby. What properties of a statically allocated array are you interested in? (And are you sure you&#39;re not also thinking about automatically allocated (local) arrays?)"}, {"owner": {"reputation": 9254, "user_id": 958464, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/ec2bbbbe62e540e67aeb1c3f21d9935c?s=128&d=identicon&r=PG&f=1", "display_name": "Gianluca Ghettini", "link": "https://stackoverflow.com/users/958464/gianluca-ghettini"}, "reply_to_user": {"reputation": 100228, "user_id": 150634, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/9f438bc04462ee5af4132921a3474842?s=128&d=identicon&r=PG", "display_name": "Joseph Mansfield", "link": "https://stackoverflow.com/users/150634/joseph-mansfield"}, "edited": false, "score": 0, "creation_date": 1424878809, "post_id": 28723045, "comment_id": 45733018, "body": "That&#39;s the high-level request: I&#39;m using FFI. I want to return a huge array of ints from C++ side (it&#39;s a .so shared object lib) to Ruby. I want to return it by value (i.e. not the pointer and the length). I created a struct with the array and some other satellite infos. P.S. I&#39;ve seen your blog: nice!"}, {"owner": {"reputation": 1287, "user_id": 3137549, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/H7moE.png?s=128&g=1", "display_name": "rdnewman", "link": "https://stackoverflow.com/users/3137549/rdnewman"}, "edited": false, "score": 0, "creation_date": 1424888280, "post_id": 28723045, "comment_id": 45739715, "body": "You might want to write a singleton object that owns a class array and write getter/setter for use with your FFI (FD: I know C++ and Ruby separately, but haven&#39;t used the ruby FFI or otherwise integrated C++ w/ Ruby).  You can instantiate and initialize the singleton in app initialization.  Normally this can become an anti-pattern because the singleton may devolve to just a global variable, but it would provide you with something that behaves like a static array in that I doubt the GC would ever touch it.  I agree w/ Joseph Mansfield though, usually shouldn&#39;t worry about memory alloc in Ruby."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1424904727, "post_id": 28723045, "comment_id": 45748613, "body": "There is nothing in the Ruby Language Specification that says where or how objects are allocated. It doesn&#39;t even say there has to be heap or a stack at all! You could implement Ruby with just a stack and no heap (although that would be hard) or just a heap and no stack (that&#39;s rather easy)."}, {"owner": {"reputation": 9254, "user_id": 958464, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/ec2bbbbe62e540e67aeb1c3f21d9935c?s=128&d=identicon&r=PG&f=1", "display_name": "Gianluca Ghettini", "link": "https://stackoverflow.com/users/958464/gianluca-ghettini"}, "reply_to_user": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1424942806, "post_id": 28723045, "comment_id": 45761049, "body": "@J&#246;rgWMittag that&#39;s ok, but the GC mimics the behaviour of C/C++ scope rule. For example, if you exit from a function all the local variables get GC&#39;d as it would happen in C/C++ (stack pop). If you free some dynamic allocated variable the GC&#39;s kicks in as in C/C++ when you use free(). (heap management).  Said that, how can I guarantee a variable never get GC&#39;d? In other words, how can I make such variable globally scoped? static?"}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1424943843, "post_id": 28723045, "comment_id": 45761670, "body": "@G_G: Variables don&#39;t get GCd, objects do. An object is eligible for GC, when there are no references to it. (This does not necessarily mean that it gets GCd, only that it is allowed to do so. GC is expensive, it is typically only performed when you actually run out of memory.) So, as long as there is a reference to it, say, a global variable, it cannot be GCd. It may, however, be copied (e.g., from one generation to another in a generational GC, from one region to another in a region-based GC) or moved (in a compacting GC). The spec gives great leeway there, since different GC designs have \u2026"}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1424943885, "post_id": 28723045, "comment_id": 45761705, "body": "\u2026 different tradeoffs, it is generally a good idea to not prescribe too much, so that the implementors can choose whatever makes most sense for their implementation."}, {"owner": {"reputation": 9254, "user_id": 958464, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/ec2bbbbe62e540e67aeb1c3f21d9935c?s=128&d=identicon&r=PG&f=1", "display_name": "Gianluca Ghettini", "link": "https://stackoverflow.com/users/958464/gianluca-ghettini"}, "edited": false, "score": 0, "creation_date": 1424944003, "post_id": 28723045, "comment_id": 45761787, "body": "variables get GCd as well because in Ruby everything is an object, literals too. Despite arguing how actually the Garbage Collector works, please could you explain to me how to make an object globally scoped? It&#39;s just a  matter to not lose the reference to it? thank you"}], "owner": {"reputation": 9254, "user_id": 958464, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/ec2bbbbe62e540e67aeb1c3f21d9935c?s=128&d=identicon&r=PG&f=1", "display_name": "Gianluca Ghettini", "link": "https://stackoverflow.com/users/958464/gianluca-ghettini"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 951, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1424878475, "creation_date": 1424878475, "question_id": 28723045, "link": "https://stackoverflow.com/questions/28723045/ruby-static-array", "title": "Ruby: static array?", "body": "<p>I know that in Ruby everything is an object, even literals and basic types. But I was wondering if the concept of static array exists or not.</p>\n\n<p>I mean, I can do:</p>\n\n<pre><code>a = Array.new(3, '1')\n</code></pre>\n\n<p>but this is going to be malloc'd in the heap, it's not static. Isn't it?</p>\n\n<p>I was thinking of the equivalent C/C++ style:</p>\n\n<pre><code>int values[1024]; \n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "angularjs", "rest"], "owner": {"reputation": 530, "user_id": 1298832, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/eed8337939641eac5ad0b570bd6acf96?s=128&d=identicon&r=PG", "display_name": "mspanc", "link": "https://stackoverflow.com/users/1298832/mspanc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 70, "favorite_count": 1, "answer_count": 0, "score": 2, "last_activity_date": 1424876894, "creation_date": 1424876894, "question_id": 28722478, "link": "https://stackoverflow.com/questions/28722478/is-there-any-de-facto-standarized-way-for-passing-conditions-to-rest-apis-with", "title": "Is there any de-facto standarized way for passing conditions to REST APIs? (with Ruby/JS wrappers)", "body": "<p>I am implementing an app that uses RoR for the backend and AngularJS for the frontend.</p>\n\n<p>These layers are totally split, frontend talks to the backend over REST API. Due to nature of the system sometimes it must pass certain SQL-like conditions to the request in order to limit amount of retreived data.</p>\n\n<p>Are there any de-facto standarized ways of doing this? Some conventions for naming parameters etc.? Preferably some solutions that have their Ruby implementations in gems, and JS libraries ready for AngularJS. </p>\n\n<p>I don't want to reimplement the wheel.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ubuntu", "rvm"], "comments": [{"owner": {"reputation": 14407, "user_id": 3035830, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/14809f2ad7f14e2867798697ab8f8006?s=128&d=identicon&r=PG", "display_name": "shivam", "link": "https://stackoverflow.com/users/3035830/shivam"}, "edited": false, "score": 0, "creation_date": 1424876177, "post_id": 28722180, "comment_id": 45730984, "body": "How did you install <code>rvm</code>?"}, {"owner": {"reputation": 75, "user_id": 3251831, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a88b0ced572885746e15579ab3412ac?s=128&d=identicon&r=PG&f=1", "display_name": "Sikandar", "link": "https://stackoverflow.com/users/3251831/sikandar"}, "reply_to_user": {"reputation": 14407, "user_id": 3035830, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/14809f2ad7f14e2867798697ab8f8006?s=128&d=identicon&r=PG", "display_name": "shivam", "link": "https://stackoverflow.com/users/3035830/shivam"}, "edited": false, "score": 0, "creation_date": 1424876476, "post_id": 28722180, "comment_id": 45731224, "body": "I followed the gorails tutorial for it but at that time I picked the &quot;Using rbenv&quot; option in spite off &quot;Using rvm&quot; but later I tried many times to install rvm  but failed and failed always on third command i.e. &quot;source ~/.rvm/scripts/rvm&quot;"}], "answers": [{"tags": [], "owner": {"reputation": 5651, "user_id": 2308473, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e694fbf7ee4853cdb75ffd32a4a59bf7?s=128&d=identicon&r=PG", "display_name": "Ian Kenney", "link": "https://stackoverflow.com/users/2308473/ian-kenney"}, "is_accepted": true, "score": 3, "last_activity_date": 1424876477, "creation_date": 1424876477, "answer_id": 28722326, "question_id": 28722180, "link": "https://stackoverflow.com/questions/28722180/rvm-installation-issue-on-ubuntu-no-such-file-or-directory/28722326#28722326", "title": "RVM installation issue on Ubuntu &quot; No such file or directory&quot;", "body": "<p>sounds like you need to install rvm</p>\n\n<p>follow the instructions on <a href=\"http://rvm.io\" rel=\"nofollow\">rvm.io</a></p>\n\n<pre><code>gpg --keyserver hkp://keys.gnupg.net --recv-keys 409B6B1796C275462A1703113804BB82D39DC0E3\n\n\\curl -sSL https://get.rvm.io | bash -s stable\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 109, "user_id": 2146322, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/471d547f1acde15e6a600df9a222aec2?s=128&d=identicon&r=PG", "display_name": "Valkyrie0512", "link": "https://stackoverflow.com/users/2146322/valkyrie0512"}, "is_accepted": false, "score": 3, "last_activity_date": 1424878401, "creation_date": 1424878401, "answer_id": 28723013, "question_id": 28722180, "link": "https://stackoverflow.com/questions/28722180/rvm-installation-issue-on-ubuntu-no-such-file-or-directory/28723013#28723013", "title": "RVM installation issue on Ubuntu &quot; No such file or directory&quot;", "body": "<p>try and reload your entire shell or </p>\n\n<pre><code>source ~/.bash_profile\n</code></pre>\n"}], "owner": {"reputation": 75, "user_id": 3251831, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a88b0ced572885746e15579ab3412ac?s=128&d=identicon&r=PG&f=1", "display_name": "Sikandar", "link": "https://stackoverflow.com/users/3251831/sikandar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4894, "favorite_count": 0, "accepted_answer_id": 28722326, "answer_count": 2, "score": 0, "last_activity_date": 1499537416, "creation_date": 1424876081, "last_edit_date": 1495541831, "question_id": 28722180, "link": "https://stackoverflow.com/questions/28722180/rvm-installation-issue-on-ubuntu-no-such-file-or-directory", "title": "RVM installation issue on Ubuntu &quot; No such file or directory&quot;", "body": "<p>I'm actually a newbie to Ubuntu (14.04) and RoR (development). So I want to get some help to resolve my error.\nI was following a video tutorial and stuck in a command i.e. </p>\n\n<p><code>rvm get head and rvm reload</code> </p>\n\n<p>that resulted me as</p>\n\n<p><code>No command 'rvm' found, but there are 20 similar ones\nrvm: command not found</code></p>\n\n<p>I interpreted it as RVM is not installed on Ubuntu. So I tried for it from many sources like <a href=\"https://stackoverflow.com/a/22096382/3251831\">https://stackoverflow.com/a/22096382/3251831</a> and <a href=\"https://gorails.com/setup/ubuntu/14.04#ruby\" rel=\"nofollow noreferrer\">https://gorails.com/setup/ubuntu/14.04#ruby</a> but when I run the command </p>\n\n<p><code>source ~/.rvm/scripts/rvm</code> </p>\n\n<p>It gives a message like</p>\n\n<pre><code>bash: /home/root2/.rvm/scripts/rvm: No such file or directory\n</code></pre>\n\n<p>I'm stuck here.</p>\n"}, {"tags": ["ruby"], "answers": [{"tags": [], "owner": {"reputation": 14407, "user_id": 3035830, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/14809f2ad7f14e2867798697ab8f8006?s=128&d=identicon&r=PG", "display_name": "shivam", "link": "https://stackoverflow.com/users/3035830/shivam"}, "is_accepted": false, "score": 4, "last_activity_date": 1424876054, "last_edit_date": 1424876054, "creation_date": 1424875322, "answer_id": 28721870, "question_id": 28721836, "link": "https://stackoverflow.com/questions/28721836/simple-ruby-variable-mutability/28721870#28721870", "title": "Simple Ruby variable mutability", "body": "<p>Do <code>a.capitalize!</code> this will affect <code>b</code> too.</p>\n\n<p><strong>What is happening?</strong> </p>\n\n<p>When you do <code>capitalize</code> a <em>copy</em> of string with first character converted to uppercase and the remainder to lowercase is returned. Which you are freshly assigning to a variable <code>a</code>. However <code>b</code> is still pointing to old value of <code>a</code> i.e. <code>HELLO</code>. </p>\n\n<p>However when you do <code>capitalize!</code> the string itself get modified and hence <code>b</code> will get affected too.</p>\n\n<p>Example:</p>\n\n<pre><code>a = \"hello\"\nb = a\na.capitalize\n# =&gt; \"Hello\"\na\n# =&gt; \"hello\" # remains unchanged\nb\n# =&gt; \"hello\" # which is the actual value of a\na.capitalize!\n# =&gt; \"Hello\"\na\n# =&gt; \"Hello\" # a's value is changed\nb\n# =&gt; \"Hello\" # which is the actual value of a\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 109029, "user_id": 2767755, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/BkC8q.jpg?s=128&g=1", "display_name": "Arup Rakshit", "link": "https://stackoverflow.com/users/2767755/arup-rakshit"}, "is_accepted": true, "score": 1, "last_activity_date": 1424877670, "last_edit_date": 1424877670, "creation_date": 1424877351, "answer_id": 28722605, "question_id": 28721836, "link": "https://stackoverflow.com/questions/28721836/simple-ruby-variable-mutability/28722605#28722605", "title": "Simple Ruby variable mutability", "body": "<blockquote>\n  <p>Why is it that a.upcase! affects the value of b</p>\n</blockquote>\n\n<p>Well, this can be explained using <code>#object_id</code>.</p>\n\n<pre><code>a = \"hello\"\nb = a\na.object_id # =&gt; 72370120\nb.object_id # =&gt; 72370120\na.upcase!\na.object_id # =&gt; 72370120\nb.object_id # =&gt; 72370120\n</code></pre>\n\n<p>As you can see, that you have same <em>string</em> object(<code>object_id</code> values are telling it) is referenced by the 2 local vars <code>a</code>, <code>b</code>. Now <code>#upcase!</code> method always change the original object. That's why you are seeing same change by inspecting <code>a</code> and <code>b</code>.</p>\n\n<blockquote>\n  <p>but a = a.capitalize does not?</p>\n</blockquote>\n\n<p>But, <code>#upcase</code> first take copy of the <em>string</em> object, then do changes on the new object, not the original one. Same can be seen using <code>#object_id</code> again.</p>\n\n<pre><code>a = a.capitalize # =&gt; \"Hello\"\nb.object_id # =&gt; 72370120\na.object_id # =&gt; 74438640\n</code></pre>\n\n<p>Now see the object ids are different. <code>b</code> still holding the old <em>string</em> object, but <code>a</code> is now holding the new <em>string</em> object.</p>\n"}], "owner": {"reputation": 159, "user_id": 3588841, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/480c3dc62e84e3bac122b9109ed0e0f6?s=128&d=identicon&r=PG&f=1", "display_name": "user3588841", "link": "https://stackoverflow.com/users/3588841/user3588841"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "accepted_answer_id": 28722605, "answer_count": 2, "score": 2, "last_activity_date": 1424877670, "creation_date": 1424875224, "last_edit_date": 1424876750, "question_id": 28721836, "link": "https://stackoverflow.com/questions/28721836/simple-ruby-variable-mutability", "title": "Simple Ruby variable mutability", "body": "<p>I'm a bit confused with the following Ruby code:</p>\n\n<pre><code>a = \"hello\"\nb = a\n\na #=&gt; \"hello\"\nb #=&gt; \"hello\"\n\na.upcase!\n\na #=&gt; \"HELLO\"\nb #=&gt; \"HELLO\"\n\na = a.capitalize\n\na #=&gt; \"Hello\"\nb #=&gt; \"HELLO\"\n</code></pre>\n\n<p>Why is it that <code>a.upcase!</code> affects the value of <code>b</code>, but <code>a = a.capitalize</code> does not? </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "sqlite"], "comments": [{"owner": {"reputation": 16396, "user_id": 2564298, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/BhG1x.jpg?s=128&g=1", "display_name": "Rajdeep Singh", "link": "https://stackoverflow.com/users/2564298/rajdeep-singh"}, "edited": false, "score": 0, "creation_date": 1424875210, "post_id": 28721742, "comment_id": 45730276, "body": "It&#39;s saying <code>Could not find table &#39;comments&#39;</code>"}, {"owner": {"reputation": 471, "user_id": 4262212, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/ENDig.jpg?s=128&g=1", "display_name": "camillavk", "link": "https://stackoverflow.com/users/4262212/camillavk"}, "reply_to_user": {"reputation": 16396, "user_id": 2564298, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/BhG1x.jpg?s=128&g=1", "display_name": "Rajdeep Singh", "link": "https://stackoverflow.com/users/2564298/rajdeep-singh"}, "edited": false, "score": 0, "creation_date": 1424875407, "post_id": 28721742, "comment_id": 45730441, "body": "Sorry, I made a typo, please see the edited question..."}, {"owner": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "edited": false, "score": 0, "creation_date": 1424875685, "post_id": 28721742, "comment_id": 45730642, "body": "We cannot answer based on what is posted. One of your migrations is broken. However, you shouldn&#39;t be running <code>rake db:migrate</code> to achieve what you&#39;re trying to achieve. Just run <code>rake db:setup</code>."}, {"owner": {"reputation": 471, "user_id": 4262212, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/ENDig.jpg?s=128&g=1", "display_name": "camillavk", "link": "https://stackoverflow.com/users/4262212/camillavk"}, "edited": false, "score": 0, "creation_date": 1424875788, "post_id": 28721742, "comment_id": 45730701, "body": "Sorry, that was a typo originally...I was running rake db:schema:load, NOT rake db:migrate...how can I see which migration is broken? (There are quite a lot of them...)"}, {"owner": {"reputation": 4349, "user_id": 648392, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6b2bd8a8c583866711c234a612f6b157?s=128&d=identicon&r=PG", "display_name": "Jesper", "link": "https://stackoverflow.com/users/648392/jesper"}, "edited": false, "score": 0, "creation_date": 1424876334, "post_id": 28721742, "comment_id": 45731098, "body": "Is there a way to disable the searchlogic gem?"}, {"owner": {"reputation": 471, "user_id": 4262212, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/ENDig.jpg?s=128&g=1", "display_name": "camillavk", "link": "https://stackoverflow.com/users/4262212/camillavk"}, "reply_to_user": {"reputation": 4349, "user_id": 648392, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6b2bd8a8c583866711c234a612f6b157?s=128&d=identicon&r=PG", "display_name": "Jesper", "link": "https://stackoverflow.com/users/648392/jesper"}, "edited": false, "score": 0, "creation_date": 1424880862, "post_id": 28721742, "comment_id": 45734667, "body": "@Jesper, I tried that (I just removed the gem) but it gave the &quot;Stack level too deep&quot; error again..."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1424893569, "post_id": 28721742, "comment_id": 45742693, "body": "Not sure if it helps but you can lazy evaluate default_scope by using a block e.g. <code>default_scope {order(&quot;created_at ASC&quot;)}</code> this is actually required in Rails 4"}, {"owner": {"reputation": 471, "user_id": 4262212, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/ENDig.jpg?s=128&g=1", "display_name": "camillavk", "link": "https://stackoverflow.com/users/4262212/camillavk"}, "edited": false, "score": 0, "creation_date": 1425028623, "post_id": 28721742, "comment_id": 45802463, "body": "Nope, that didn&#39;t help either. Thanks anyway!"}], "answers": [{"tags": [], "owner": {"reputation": 471, "user_id": 4262212, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/ENDig.jpg?s=128&g=1", "display_name": "camillavk", "link": "https://stackoverflow.com/users/4262212/camillavk"}, "is_accepted": false, "score": 0, "last_activity_date": 1425033451, "creation_date": 1425033451, "answer_id": 28763011, "question_id": 28721742, "link": "https://stackoverflow.com/questions/28721742/rake-dbmigrate-breaking-on-default-scope-order/28763011#28763011", "title": "rake db:migrate breaking on &#39;default_scope order&#39;", "body": "<p>In case anyone else ever comes across this problem when trying to upgrade to Rails 3, I managed to fix it by removing a gem called 'bj'. Even if you don't have this specific gem I would recommend going through every single gem you have, making sure they are still supported for Rails 3...</p>\n"}], "owner": {"reputation": 471, "user_id": 4262212, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/ENDig.jpg?s=128&g=1", "display_name": "camillavk", "link": "https://stackoverflow.com/users/4262212/camillavk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 90, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1425033451, "creation_date": 1424874979, "last_edit_date": 1424875533, "question_id": 28721742, "link": "https://stackoverflow.com/questions/28721742/rake-dbmigrate-breaking-on-default-scope-order", "title": "rake db:migrate breaking on &#39;default_scope order&#39;", "body": "<p>I've just got a new laptop so am trying to move a project over to it but can't get the database up and running. I was running linux previously but am now running Yosemite on a Mac.</p>\n\n<p>I'm on Rails 3.0.3 (it's an upgrade project), Ruby 1.9.3</p>\n\n<p>When I run <code>bundle exec rake db:schema:load --trace</code></p>\n\n<p>it says it breaks at this line:</p>\n\n<pre><code>default_scope order(\"created_at ASC\")\n</code></pre>\n\n<p>as you can see in the stack trace...</p>\n\n<pre><code>** Invoke db:migrate (first_time)\n** Invoke environment (first_time)\n** Execute environment\nrake aborted!\nCould not find table 'comments'\n/Users/camillavk/.rvm/gems/ruby-1.9.3-p551@rails3/gems/activerecord-3.0.3/lib/active_record/connection_adapters/sqlite_adapter.rb:295:in `table_structure'\n/Users/camillavk/.rvm/gems/ruby-1.9.3-p551@rails3/gems/activerecord-3.0.3/lib/active_record/connection_adapters/sqlite_adapter.rb:186:in `columns'\n/Users/camillavk/.rvm/gems/ruby-1.9.3-p551@rails3/gems/activerecord-3.0.3/lib/active_record/base.rb:679:in `columns'\n/Users/camillavk/.rvm/gems/ruby-1.9.3-p551@rails3/gems/activerecord-3.0.3/lib/active_record/base.rb:692:in `column_names'\n/Users/camillavk/.rvm/gems/ruby-1.9.3-p551@rails3/gems/activerecord-3.0.3/lib/active_record/relation.rb:367:in `block in method_missing'\n/Users/camillavk/.rvm/gems/ruby-1.9.3-p551@rails3/gems/activerecord-3.0.3/lib/active_record/relation.rb:122:in `scoping'\n/Users/camillavk/.rvm/gems/ruby-1.9.3-p551@rails3/gems/activerecord-3.0.3/lib/active_record/relation.rb:367:in `method_missing'\n/Users/camillavk/.rvm/gems/ruby-1.9.3-p551@rails3/gems/rd_searchlogic-3.0.1/lib/searchlogic/named_scopes/conditions.rb:92:in `condition_details'\n/Users/camillavk/.rvm/gems/ruby-1.9.3-p551@rails3/gems/rd_searchlogic-3.0.1/lib/searchlogic/named_scopes/conditions.rb:68:in `local_condition?'\n/Users/camillavk/.rvm/gems/ruby-1.9.3-p551@rails3/gems/rd_searchlogic-3.0.1/lib/searchlogic/named_scopes/conditions.rb:61:in `condition?'\n/Users/camillavk/.rvm/gems/ruby-1.9.3-p551@rails3/gems/rd_searchlogic-3.0.1/lib/searchlogic/named_scopes/association_conditions.rb:6:in `condition?'\n/Users/camillavk/.rvm/gems/ruby-1.9.3-p551@rails3/gems/rd_searchlogic-3.0.1/lib/searchlogic/named_scopes/association_ordering.rb:14:in `condition?'\n/Users/camillavk/.rvm/gems/ruby-1.9.3-p551@rails3/gems/rd_searchlogic-3.0.1/lib/searchlogic/named_scopes/ordering.rb:11:in `condition?'\n/Users/camillavk/.rvm/gems/ruby-1.9.3-p551@rails3/gems/rd_searchlogic-3.0.1/lib/searchlogic/named_scopes/ordering.rb:31:in `order'\n/Users/camillavk/.rvm/gems/ruby-1.9.3-p551@rails3/gems/activerecord-3.0.3/lib/active_record/base.rb:441:in `order'\n/Users/camillavk/Documents/Work/Saild/saild/app/models/comment.rb:13:in `&lt;class:Comment&gt;'\n/Users/camillavk/Documents/Work/Saild/saild/app/models/comment.rb:1:in `&lt;top (required)&gt;'\n/Users/camillavk/.rvm/gems/ruby-1.9.3-p551@rails3/gems/activesupport-3.0.3/lib/active_support/dependencies.rb:454:in `load'\n/Users/camillavk/.rvm/gems/ruby-1.9.3-p551@rails3/gems/activesupport-3.0.3/lib/active_support/dependencies.rb:454:in `block in load_file'\n/Users/camillavk/.rvm/gems/ruby-1.9.3-p551@rails3/gems/activesupport-3.0.3/lib/active_support/dependencies.rb:596:in `new_constants_in'\n/Users/camillavk/.rvm/gems/ruby-1.9.3-p551@rails3/gems/activesupport-3.0.3/lib/active_support/dependencies.rb:453:in `load_file'\n/Users/camillavk/.rvm/gems/ruby-1.9.3-p551@rails3/gems/activesupport-3.0.3/lib/active_support/dependencies.rb:340:in `require_or_load'\n/Users/camillavk/.rvm/gems/ruby-1.9.3-p551@rails3/gems/activesupport-3.0.3/lib/active_support/dependencies.rb:491:in `load_missing_constant'\n/Users/camillavk/.rvm/gems/ruby-1.9.3-p551@rails3/gems/activesupport-3.0.3/lib/active_support/dependencies.rb:183:in `block in const_missing'\n/Users/camillavk/.rvm/gems/ruby-1.9.3-p551@rails3/gems/activesupport-3.0.3/lib/active_support/dependencies.rb:181:in `each'\n/Users/camillavk/.rvm/gems/ruby-1.9.3-p551@rails3/gems/activesupport-3.0.3/lib/active_support/dependencies.rb:181:in `const_missing'\n/Users/camillavk/.rvm/gems/ruby-1.9.3-p551@rails3/gems/aws-s3-0.6.3/lib/aws/s3/extensions.rb:212:in `const_missing_from_s3_library'\n/Users/camillavk/.rvm/gems/ruby-1.9.3-p551@rails3/gems/activesupport-3.0.3/lib/active_support/inflector/methods.rb:124:in `block in constantize'\n/Users/camillavk/.rvm/gems/ruby-1.9.3-p551@rails3/gems/activesupport-3.0.3/lib/active_support/inflector/methods.rb:123:in `each'\n/Users/camillavk/.rvm/gems/ruby-1.9.3-p551@rails3/gems/activesupport-3.0.3/lib/active_support/inflector/methods.rb:123:in `constantize'\n/Users/camillavk/.rvm/gems/ruby-1.9.3-p551@rails3/gems/activesupport-3.0.3/lib/active_support/core_ext/string/inflections.rb:43:in `constantize'\n/Users/camillavk/.rvm/gems/ruby-1.9.3-p551@rails3/gems/activemodel-3.0.3/lib/active_model/observing.rb:182:in `observed_class'\n/Users/camillavk/.rvm/gems/ruby-1.9.3-p551@rails3/gems/activemodel-3.0.3/lib/active_model/observing.rb:175:in `observed_classes'\n/Users/camillavk/.rvm/gems/ruby-1.9.3-p551@rails3/gems/activemodel-3.0.3/lib/active_model/observing.rb:195:in `observed_classes'\n/Users/camillavk/.rvm/gems/ruby-1.9.3-p551@rails3/gems/activemodel-3.0.3/lib/active_model/observing.rb:191:in `initialize'\n/Users/camillavk/.rvm/gems/ruby-1.9.3-p551@rails3/gems/activerecord-3.0.3/lib/active_record/observer.rb:96:in `initialize'\n/Users/camillavk/.rvm/rubies/ruby-1.9.3-p551/lib/ruby/1.9.1/singleton.rb:141:in `new'\n/Users/camillavk/.rvm/rubies/ruby-1.9.3-p551/lib/ruby/1.9.1/singleton.rb:141:in `block in instance'\n&lt;internal:prelude&gt;:10:in `synchronize'\n/Users/camillavk/.rvm/rubies/ruby-1.9.3-p551/lib/ruby/1.9.1/singleton.rb:139:in `instance'\n/Users/camillavk/.rvm/gems/ruby-1.9.3-p551@rails3/gems/activemodel-3.0.3/lib/active_model/observing.rb:66:in `instantiate_observer'\n/Users/camillavk/.rvm/gems/ruby-1.9.3-p551@rails3/gems/activemodel-3.0.3/lib/active_model/observing.rb:39:in `block in instantiate_observers'\n/Users/camillavk/.rvm/gems/ruby-1.9.3-p551@rails3/gems/activemodel-3.0.3/lib/active_model/observing.rb:39:in `each'\n/Users/camillavk/.rvm/gems/ruby-1.9.3-p551@rails3/gems/activemodel-3.0.3/lib/active_model/observing.rb:39:in `instantiate_observers'\n/Users/camillavk/.rvm/gems/ruby-1.9.3-p551@rails3/gems/activerecord-3.0.3/lib/active_record/railtie.rb:83:in `block (2 levels) in &lt;class:Railtie&gt;'\n/Users/camillavk/.rvm/gems/ruby-1.9.3-p551@rails3/gems/activesupport-3.0.3/lib/active_support/lazy_load_hooks.rb:36:in `instance_eval'\n/Users/camillavk/.rvm/gems/ruby-1.9.3-p551@rails3/gems/activesupport-3.0.3/lib/active_support/lazy_load_hooks.rb:36:in `execute_hook'\n/Users/camillavk/.rvm/gems/ruby-1.9.3-p551@rails3/gems/activesupport-3.0.3/lib/active_support/lazy_load_hooks.rb:26:in `on_load'\n/Users/camillavk/.rvm/gems/ruby-1.9.3-p551@rails3/gems/activerecord-3.0.3/lib/active_record/railtie.rb:82:in `block in &lt;class:Railtie&gt;'\n/Users/camillavk/.rvm/gems/ruby-1.9.3-p551@rails3/gems/activesupport-3.0.3/lib/active_support/lazy_load_hooks.rb:34:in `call'\n/Users/camillavk/.rvm/gems/ruby-1.9.3-p551@rails3/gems/activesupport-3.0.3/lib/active_support/lazy_load_hooks.rb:34:in `execute_hook'\n/Users/camillavk/.rvm/gems/ruby-1.9.3-p551@rails3/gems/activesupport-3.0.3/lib/active_support/lazy_load_hooks.rb:43:in `block in run_load_hooks'\n/Users/camillavk/.rvm/gems/ruby-1.9.3-p551@rails3/gems/activesupport-3.0.3/lib/active_support/lazy_load_hooks.rb:42:in `each'\n/Users/camillavk/.rvm/gems/ruby-1.9.3-p551@rails3/gems/activesupport-3.0.3/lib/active_support/lazy_load_hooks.rb:42:in `run_load_hooks'\n/Users/camillavk/.rvm/gems/ruby-1.9.3-p551@rails3/gems/railties-3.0.3/lib/rails/application/finisher.rb:46:in `block in &lt;module:Finisher&gt;'\n/Users/camillavk/.rvm/gems/ruby-1.9.3-p551@rails3/gems/railties-3.0.3/lib/rails/initializable.rb:25:in `instance_exec'\n/Users/camillavk/.rvm/gems/ruby-1.9.3-p551@rails3/gems/railties-3.0.3/lib/rails/initializable.rb:25:in `run'\n/Users/camillavk/.rvm/gems/ruby-1.9.3-p551@rails3/gems/railties-3.0.3/lib/rails/initializable.rb:50:in `block in run_initializers'\n/Users/camillavk/.rvm/gems/ruby-1.9.3-p551@rails3/gems/railties-3.0.3/lib/rails/initializable.rb:49:in `each'\n/Users/camillavk/.rvm/gems/ruby-1.9.3-p551@rails3/gems/railties-3.0.3/lib/rails/initializable.rb:49:in `run_initializers'\n/Users/camillavk/.rvm/gems/ruby-1.9.3-p551@rails3/gems/railties-3.0.3/lib/rails/application.rb:134:in `initialize!'\n/Users/camillavk/.rvm/gems/ruby-1.9.3-p551@rails3/gems/railties-3.0.3/lib/rails/application.rb:77:in `method_missing'\n/Users/camillavk/Documents/Work/Saild/saild/config/environment.rb:7:in `&lt;top (required)&gt;'\n/Users/camillavk/.rvm/gems/ruby-1.9.3-p551@rails3/gems/activesupport-3.0.3/lib/active_support/dependencies.rb:239:in `require'\n/Users/camillavk/.rvm/gems/ruby-1.9.3-p551@rails3/gems/activesupport-3.0.3/lib/active_support/dependencies.rb:239:in `block in require'\n/Users/camillavk/.rvm/gems/ruby-1.9.3-p551@rails3/gems/activesupport-3.0.3/lib/active_support/dependencies.rb:225:in `block in load_dependency'\n/Users/camillavk/.rvm/gems/ruby-1.9.3-p551@rails3/gems/activesupport-3.0.3/lib/active_support/dependencies.rb:596:in `new_constants_in'\n/Users/camillavk/.rvm/gems/ruby-1.9.3-p551@rails3/gems/activesupport-3.0.3/lib/active_support/dependencies.rb:225:in `load_dependency'\n/Users/camillavk/.rvm/gems/ruby-1.9.3-p551@rails3/gems/activesupport-3.0.3/lib/active_support/dependencies.rb:239:in `require'\n/Users/camillavk/.rvm/gems/ruby-1.9.3-p551@rails3/gems/railties-3.0.3/lib/rails/application.rb:103:in `require_environment!'\n/Users/camillavk/.rvm/gems/ruby-1.9.3-p551@rails3/gems/railties-3.0.3/lib/rails/application.rb:216:in `block in initialize_tasks'\n/Users/camillavk/.rvm/gems/ruby-1.9.3-p551@rails3/gems/rake-0.8.7/lib/rake.rb:636:in `call'\n/Users/camillavk/.rvm/gems/ruby-1.9.3-p551@rails3/gems/rake-0.8.7/lib/rake.rb:636:in `block in execute'\n/Users/camillavk/.rvm/gems/ruby-1.9.3-p551@rails3/gems/rake-0.8.7/lib/rake.rb:631:in `each'\n/Users/camillavk/.rvm/gems/ruby-1.9.3-p551@rails3/gems/rake-0.8.7/lib/rake.rb:631:in `execute'\n/Users/camillavk/.rvm/gems/ruby-1.9.3-p551@rails3/gems/rake-0.8.7/lib/rake.rb:597:in `block in invoke_with_call_chain'\n/Users/camillavk/.rvm/rubies/ruby-1.9.3-p551/lib/ruby/1.9.1/monitor.rb:211:in `mon_synchronize'\n/Users/camillavk/.rvm/gems/ruby-1.9.3-p551@rails3/gems/rake-0.8.7/lib/rake.rb:590:in `invoke_with_call_chain'\n/Users/camillavk/.rvm/gems/ruby-1.9.3-p551@rails3/gems/rake-0.8.7/lib/rake.rb:607:in `block in invoke_prerequisites'\n/Users/camillavk/.rvm/gems/ruby-1.9.3-p551@rails3/gems/rake-0.8.7/lib/rake.rb:604:in `each'\n/Users/camillavk/.rvm/gems/ruby-1.9.3-p551@rails3/gems/rake-0.8.7/lib/rake.rb:604:in `invoke_prerequisites'\n/Users/camillavk/.rvm/gems/ruby-1.9.3-p551@rails3/gems/rake-0.8.7/lib/rake.rb:596:in `block in invoke_with_call_chain'\n/Users/camillavk/.rvm/rubies/ruby-1.9.3-p551/lib/ruby/1.9.1/monitor.rb:211:in `mon_synchronize'\n/Users/camillavk/.rvm/gems/ruby-1.9.3-p551@rails3/gems/rake-0.8.7/lib/rake.rb:590:in `invoke_with_call_chain'\n/Users/camillavk/.rvm/gems/ruby-1.9.3-p551@rails3/gems/rake-0.8.7/lib/rake.rb:583:in `invoke'\n/Users/camillavk/.rvm/gems/ruby-1.9.3-p551@rails3/gems/rake-0.8.7/lib/rake.rb:2051:in `invoke_task'\n/Users/camillavk/.rvm/gems/ruby-1.9.3-p551@rails3/gems/rake-0.8.7/lib/rake.rb:2029:in `block (2 levels) in top_level'\n/Users/camillavk/.rvm/gems/ruby-1.9.3-p551@rails3/gems/rake-0.8.7/lib/rake.rb:2029:in `each'\n/Users/camillavk/.rvm/gems/ruby-1.9.3-p551@rails3/gems/rake-0.8.7/lib/rake.rb:2029:in `block in top_level'\n/Users/camillavk/.rvm/gems/ruby-1.9.3-p551@rails3/gems/airbrake-4.1.0/lib/airbrake/rake_handler.rb:43:in `standard_exception_handling'\n/Users/camillavk/.rvm/gems/ruby-1.9.3-p551@rails3/gems/rake-0.8.7/lib/rake.rb:2023:in `top_level'\n/Users/camillavk/.rvm/gems/ruby-1.9.3-p551@rails3/gems/rake-0.8.7/lib/rake.rb:2001:in `block in run'\n/Users/camillavk/.rvm/gems/ruby-1.9.3-p551@rails3/gems/rake-0.8.7/lib/rake.rb:2068:in `standard_exception_handling'\n/Users/camillavk/.rvm/gems/ruby-1.9.3-p551@rails3/gems/rake-0.8.7/lib/rake.rb:1998:in `run'\n/Users/camillavk/.rvm/gems/ruby-1.9.3-p551@rails3/gems/rake-0.8.7/bin/rake:31:in `&lt;top (required)&gt;'\n/Users/camillavk/.rvm/gems/ruby-1.9.3-p551@rails3/bin/rake:23:in `load'\n/Users/camillavk/.rvm/gems/ruby-1.9.3-p551@rails3/bin/rake:23:in `&lt;main&gt;'\n/Users/camillavk/.rvm/gems/ruby-1.9.3-p551@rails3/bin/ruby_executable_hooks:15:in `eval'\n/Users/camillavk/.rvm/gems/ruby-1.9.3-p551@rails3/bin/ruby_executable_hooks:15:in `&lt;main&gt;'\n</code></pre>\n\n<p>If I remove that line completely from the comments model, the error when I run <code>bundle exec rake db:schema:load</code> is just:</p>\n\n<pre><code>rake aborted!\nStack level too deep\n</code></pre>\n\n<p>Any ideas?</p>\n\n<p><strong>Second Edit</strong></p>\n\n<p>When I run <code>bundle exec db:create</code> it runs fine and says that the database already exist.</p>\n\n<p>It is just breaking when I am trying to create the tables...</p>\n"}, {"tags": ["ruby", "vim", "rvm"], "comments": [{"owner": {"reputation": 28343, "user_id": 1890567, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NSohE.png?s=128&g=1", "display_name": "FDinoff", "link": "https://stackoverflow.com/users/1890567/fdinoff"}, "edited": false, "score": 0, "creation_date": 1424882089, "post_id": 28721736, "comment_id": 45735572, "body": "If vim crashes with YCM file a bug report."}, {"owner": {"reputation": 2354, "user_id": 1563673, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6338adc53993aa3e27054370489014d9?s=128&d=identicon&r=PG", "display_name": "sheldonk", "link": "https://stackoverflow.com/users/1563673/sheldonk"}, "edited": false, "score": 0, "creation_date": 1433453810, "post_id": 28721736, "comment_id": 49372069, "body": "<a href=\"https://code.google.com/p/vim/issues/detail?id=114&amp;thanks=114&amp;ts=1361483471\" rel=\"nofollow noreferrer\">code.google.com/p/vim/issues/&hellip;</a> Old but possibly relevant"}], "owner": {"reputation": 517, "user_id": 4186029, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/Umwty.jpg?s=128&g=1", "display_name": "SolomonT", "link": "https://stackoverflow.com/users/4186029/solomont"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 588, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1424874964, "creation_date": 1424874964, "question_id": 28721736, "link": "https://stackoverflow.com/questions/28721736/any-solution-for-using-vim-plugin-youcompleteme-with-rvm", "title": "Any solution for using vim plugin YouCompleteMe with RVM?", "body": "<p>I'm trying use YouCompleteMe for Rails dev on VIM. VIM always crash if I use YCM with RVM ruby. I'm reinstall YCM with system ruby, everything work find but when I use RVM ruby, VIM crash again.</p>\n"}, {"tags": ["ruby", "string", "type-conversion", "hbase", "jruby"], "comments": [{"owner": {"reputation": 3914, "user_id": 4057366, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/uZ3e5.jpg?s=128&g=1", "display_name": "Alex Holubenko", "link": "https://stackoverflow.com/users/4057366/alex-holubenko"}, "edited": false, "score": 1, "creation_date": 1424877434, "post_id": 28721709, "comment_id": 45731920, "body": "What version of Ruby do you use? Cause.. 2.1.4 :001 &gt; &quot;31ff&quot;.scan(/../).map { |x| x.hex.chr } =&gt; [&quot;1&quot;, &quot;\\xFF&quot;]"}, {"owner": {"reputation": 79161, "user_id": 1064226, "user_type": "registered", "profile_image": "https://graph.facebook.com/36912842/picture?type=large", "display_name": "Frederick Cheung", "link": "https://stackoverflow.com/users/1064226/frederick-cheung"}, "edited": false, "score": 2, "creation_date": 1424878487, "post_id": 28721709, "comment_id": 45732758, "body": "It&#39;s the same string in both cases - <code>&quot;\\377&quot; == &quot;\\xff&quot; #=&gt; true</code>"}, {"owner": {"reputation": 11936, "user_id": 204665, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/36308ddff0cad4056f623a315c6da35b?s=128&d=identicon&r=PG", "display_name": "Roman Nikitchenko", "link": "https://stackoverflow.com/users/204665/roman-nikitchenko"}, "edited": false, "score": 0, "creation_date": 1424879641, "post_id": 28721709, "comment_id": 45733688, "body": "Yes, string is the same. But why octal format is printed? This makes people confused. I need to calculate HBase row keys and print them... but they look different and people are getting afraid of this."}, {"owner": {"reputation": 13734, "user_id": 938694, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/b6678a430a805dd78366d6e135b49f2d?s=128&d=identicon&r=PG", "display_name": "Cubic", "link": "https://stackoverflow.com/users/938694/cubic"}, "edited": false, "score": 0, "creation_date": 1424883492, "post_id": 28721709, "comment_id": 45736512, "body": "@RomanNikitchenko They&#39;re the same thing. If you print them, you&#39;ll get the same result. The only difference is what it looks like in the repl."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1424883559, "post_id": 28721709, "comment_id": 45736550, "body": "What&#39;s problem here? Both are valid representations of that character. If you need consistent hex output, you should be using <code>unpack</code>."}, {"owner": {"reputation": 74087, "user_id": 214790, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f878c8230342730990acd21f889301d4?s=128&d=identicon&r=PG", "display_name": "matt", "link": "https://stackoverflow.com/users/214790/matt"}, "edited": false, "score": 1, "creation_date": 1424883649, "post_id": 28721709, "comment_id": 45736609, "body": "I think this is due to the format used by <code>String#inspect</code>. In 1.8.7 this uses the <a href=\"https://github.com/jruby/jruby/blob/1.6.8/src/org/jruby/RubyString.java#L2416\" rel=\"nofollow noreferrer\"><code>%03o</code> format</a> (i.e. octal). In 1.9 and later the hex representation is used. If you\u2019re able to start your JRuby console in 1.9 mode you might get the output you want (although that might have other effects you might not want). I don\u2019t know how you\u2019d do that with HBase, try setting the environment variable  <code>JRUBY_OPTS=&quot;--1.9&quot;</code>."}], "answers": [{"comments": [{"owner": {"reputation": 11936, "user_id": 204665, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/36308ddff0cad4056f623a315c6da35b?s=128&d=identicon&r=PG", "display_name": "Roman Nikitchenko", "link": "https://stackoverflow.com/users/204665/roman-nikitchenko"}, "edited": false, "score": 0, "creation_date": 1424891116, "post_id": 28726991, "comment_id": 45741256, "body": "Thank you for couple of reasonable points especially for p<code>rintf()</code> - based solution but all of them has notable drawback - they result ALL characters converted but I&#39;d like only non-printable. Finally I found all needed components."}], "tags": [], "owner": {"reputation": 32543, "user_id": 528726, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/6307569a99dd77fff0463032051d7e39?s=128&d=identicon&r=PG", "display_name": "joelparkerhenderson", "link": "https://stackoverflow.com/users/528726/joelparkerhenderson"}, "is_accepted": true, "score": 2, "last_activity_date": 1424891370, "last_edit_date": 1424891370, "creation_date": 1424889468, "answer_id": 28726991, "question_id": 28721709, "link": "https://stackoverflow.com/questions/28721709/why-does-ruby-convert-integer-to-octal-escaped-string-instead-of-hex-escaped-one/28726991#28726991", "title": "Why does Ruby convert integer to octal-escaped string instead of hex-escaped one?", "body": "<p><code>\"\\xff\"</code> and <code>\"\\377\"</code> are different representations of the same data:</p>\n\n<ul>\n<li><code>\"\\xff\"</code> is hexdecimal, and is typical of newer Ruby versions.</li>\n<li><code>\"\\377\"</code> is octal, and is typical of older Ruby versions.</li>\n</ul>\n\n<p>You can see how the same number produces different strings:</p>\n\n<pre><code>printf(\"%o\",255) #=&gt; \"377\"\nprintf(\"%x\",255) #=&gt; \"ff\"\n</code></pre>\n\n<p>The default representation is a typically due to your console settings and Ruby version.</p>\n\n<p>In general, do not rely on <code>String#inspect</code> to produce a consistent  represenation, even on the same Ruby version. You can see this in action if you use some of the special characters:</p>\n\n<pre><code>\"\\007\" #=&gt; \"\\a\"\n</code></pre>\n\n<p>The <code>String#inspect</code> method has altered the representation to neither octal nor hex.</p>\n\n<p>If you're outputting to a system that requires a specific format, you can be explicit:</p>\n\n<pre><code>printf(\"\\\\x%x\", 255) #=&gt; \\xff  # lower case\nprintf(\"\\\\x%X\", 255) #=&gt; \\xFF  # upper case\n</code></pre>\n\n<p>You can also try the <code>pack</code> and <code>unpack</code> methods:</p>\n\n<pre><code>[\"ff\"].pack(\"H*\") #=&gt; \"\\xFF\"\n</code></pre>\n\n<p>If your string is always hex digits, and your desired output is just inserting \"\\x\" in front of every two characters, then there's a fast solution:</p>\n\n<pre><code>print \"a1b2c3\".gsub(/../){\"\\\\x#{$&amp;}\"}\n#=&gt; \\xa1\\xb2\\xc3\n</code></pre>\n\n<p>A good quick introduction to Ruby string represenations and how to work with unprintable characters is in the <a href=\"https://www.safaribooksonline.com/library/view/ruby-cookbook/0596523696/ch01s05.html\" rel=\"nofollow\">Safari Books Ruby Cookbook</a></p>\n"}, {"tags": [], "owner": {"reputation": 11936, "user_id": 204665, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/36308ddff0cad4056f623a315c6da35b?s=128&d=identicon&r=PG", "display_name": "Roman Nikitchenko", "link": "https://stackoverflow.com/users/204665/roman-nikitchenko"}, "is_accepted": false, "score": 0, "last_activity_date": 1424890859, "creation_date": 1424890859, "answer_id": 28727431, "question_id": 28721709, "link": "https://stackoverflow.com/questions/28721709/why-does-ruby-convert-integer-to-octal-escaped-string-instead-of-hex-escaped-one/28727431#28727431", "title": "Why does Ruby convert integer to octal-escaped string instead of hex-escaped one?", "body": "<p>Lessons learned:</p>\n\n<ul>\n<li>Actually there was no any functional problem with octets. Just representation (thank to all comments and answers). Internally String content was the same.</li>\n<li>Yes, in Ruby 1.8 there was String#inspect with \"%03o\" format. And yes, HBase 0.98.6 uses this Ruby version for JRuby 1.6.8. This cannot be easily resolved in my case.</li>\n<li>Inspection has nothing to actual results so I have used Hbase <code>Bytes</code> class and prepared special <code>printer</code> for people who needs to see expected keys representation.</li>\n</ul>\n\n<p>Here is the code which actually solves all my tasks including output that was wanted:</p>\n\n<pre><code># Convert binary string to hex digits.\ndef bin_to_hex(s)\n  s.each_byte.map { |b| b.to_s(16).rjust(2, '0') }.join\nend\n\n# Convers hex string to binary string.\ndef hex_to_bin(s)\n  s.scan(/../).map { |x| x.hex.chr }.join\nend\n\n# HBase special 'convert and print' routine to get hex digits, process them and print.\ndef print_hex_to_bin(s)\n  Kernel.print \"\\\"\" + Bytes.toStringBinary(s.scan(/../).map { |x| x.hex.chr }.join.to_java_bytes) + \"\\\"\\n\"\nend\n</code></pre>\n\n<p>Composed mostly based on <a href=\"http://anthonylewis.com/2011/02/09/to-hex-and-back-with-ruby/\" rel=\"nofollow\">http://anthonylewis.com/2011/02/09/to-hex-and-back-with-ruby/</a></p>\n"}], "owner": {"reputation": 11936, "user_id": 204665, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/36308ddff0cad4056f623a315c6da35b?s=128&d=identicon&r=PG", "display_name": "Roman Nikitchenko", "link": "https://stackoverflow.com/users/204665/roman-nikitchenko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 885, "favorite_count": 0, "accepted_answer_id": 28726991, "answer_count": 2, "score": 1, "last_activity_date": 1429483368, "creation_date": 1424874881, "last_edit_date": 1429483368, "question_id": 28721709, "link": "https://stackoverflow.com/questions/28721709/why-does-ruby-convert-integer-to-octal-escaped-string-instead-of-hex-escaped-one", "title": "Why does Ruby convert integer to octal-escaped string instead of hex-escaped one?", "body": "<p>I need:</p>\n\n<pre><code>\"ff\".hex.chr #=&gt; \"\\xff\"\n</code></pre>\n\n<p>but instead I get:</p>\n\n<pre><code>\"ff\".hex.chr #=&gt; \"\\377\"\n</code></pre>\n\n<p>Where is my mistake? What is missing? Environment is HBase 0.98.6 shell, which seems to be based on JRuby 1.6.8 console.</p>\n"}, {"tags": ["ruby", "csv"], "comments": [{"owner": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "edited": false, "score": 0, "creation_date": 1424871553, "post_id": 28720446, "comment_id": 45727724, "body": "can you show us what the <code>output</code> hash looks like before you write to csv (just a few entries is fine)."}, {"owner": {"reputation": 81, "user_id": 4605853, "user_type": "registered", "accept_rate": 70, "profile_image": "https://lh6.googleusercontent.com/-Aq0XeQDPtHY/AAAAAAAAAAI/AAAAAAAAABE/Moc6NDQG8Z8/photo.jpg?sz=128", "display_name": "Vivek Nayyar", "link": "https://stackoverflow.com/users/4605853/vivek-nayyar"}, "reply_to_user": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "edited": false, "score": 0, "creation_date": 1424871871, "post_id": 28720446, "comment_id": 45727948, "body": "Anthony I have added the output hash, you can have a look now"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1424874779, "post_id": 28720446, "comment_id": 45729956, "body": "Is this a Ruby or an Excel issue?"}, {"owner": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1424874849, "post_id": 28720446, "comment_id": 45730005, "body": "It&#39;s turned into an excel issue @Stefan - I should have caught that early on."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1424875132, "post_id": 28720446, "comment_id": 45730217, "body": "See <a href=\"http://superuser.com/q/234997/273967\">How can I stop Excel from eating my delicious CSV files and excreting useless data?</a>"}, {"owner": {"reputation": 81, "user_id": 4605853, "user_type": "registered", "accept_rate": 70, "profile_image": "https://lh6.googleusercontent.com/-Aq0XeQDPtHY/AAAAAAAAAAI/AAAAAAAAABE/Moc6NDQG8Z8/photo.jpg?sz=128", "display_name": "Vivek Nayyar", "link": "https://stackoverflow.com/users/4605853/vivek-nayyar"}, "edited": false, "score": 0, "creation_date": 1424875399, "post_id": 28720446, "comment_id": 45730434, "body": "That seems to be an interesting link, will go through it.Thanks Stefan"}], "answers": [{"comments": [{"owner": {"reputation": 81, "user_id": 4605853, "user_type": "registered", "accept_rate": 70, "profile_image": "https://lh6.googleusercontent.com/-Aq0XeQDPtHY/AAAAAAAAAAI/AAAAAAAAABE/Moc6NDQG8Z8/photo.jpg?sz=128", "display_name": "Vivek Nayyar", "link": "https://stackoverflow.com/users/4605853/vivek-nayyar"}, "edited": false, "score": 0, "creation_date": 1424873150, "post_id": 28720915, "comment_id": 45728832, "body": "Anthony it&#39;s still the same with your code as well.This is how it is getting stored 9.19847E+11 in the column"}, {"owner": {"reputation": 1739, "user_id": 2863439, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7c95bb944bbbe597543ae8a88987995?s=128&d=identicon&r=PG&f=1", "display_name": "limekin", "link": "https://stackoverflow.com/users/2863439/limekin"}, "reply_to_user": {"reputation": 81, "user_id": 4605853, "user_type": "registered", "accept_rate": 70, "profile_image": "https://lh6.googleusercontent.com/-Aq0XeQDPtHY/AAAAAAAAAAI/AAAAAAAAABE/Moc6NDQG8Z8/photo.jpg?sz=128", "display_name": "Vivek Nayyar", "link": "https://stackoverflow.com/users/4605853/vivek-nayyar"}, "edited": false, "score": 0, "creation_date": 1424873669, "post_id": 28720915, "comment_id": 45729200, "body": "@Vivek : If the output hash you provided is correct then Anthony&#39;s solution should work for you."}, {"owner": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "reply_to_user": {"reputation": 81, "user_id": 4605853, "user_type": "registered", "accept_rate": 70, "profile_image": "https://lh6.googleusercontent.com/-Aq0XeQDPtHY/AAAAAAAAAAI/AAAAAAAAABE/Moc6NDQG8Z8/photo.jpg?sz=128", "display_name": "Vivek Nayyar", "link": "https://stackoverflow.com/users/4605853/vivek-nayyar"}, "edited": false, "score": 0, "creation_date": 1424873976, "post_id": 28720915, "comment_id": 45729411, "body": "@VivekNayyar - sadly with excel 2010 I had to go through the import wizard for it to display correctly.  Excel tries to be too smart sometimes. I&#39;m seeing if there&#39;s a way to fix this though it seems less to do with your ruby code now and more to do with excel."}, {"owner": {"reputation": 81, "user_id": 4605853, "user_type": "registered", "accept_rate": 70, "profile_image": "https://lh6.googleusercontent.com/-Aq0XeQDPtHY/AAAAAAAAAAI/AAAAAAAAABE/Moc6NDQG8Z8/photo.jpg?sz=128", "display_name": "Vivek Nayyar", "link": "https://stackoverflow.com/users/4605853/vivek-nayyar"}, "edited": false, "score": 0, "creation_date": 1424874018, "post_id": 28720915, "comment_id": 45729440, "body": "limekin, I even tried the exact code that Anthony gave, its still the same output in csv"}, {"owner": {"reputation": 81, "user_id": 4605853, "user_type": "registered", "accept_rate": 70, "profile_image": "https://lh6.googleusercontent.com/-Aq0XeQDPtHY/AAAAAAAAAAI/AAAAAAAAABE/Moc6NDQG8Z8/photo.jpg?sz=128", "display_name": "Vivek Nayyar", "link": "https://stackoverflow.com/users/4605853/vivek-nayyar"}, "edited": false, "score": 0, "creation_date": 1424874069, "post_id": 28720915, "comment_id": 45729466, "body": "Anthony, Yes that;s one way of doing it, but is there no other way we can display it properly"}, {"owner": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "edited": false, "score": 0, "creation_date": 1424874777, "post_id": 28720915, "comment_id": 45729954, "body": "I&#39;ve updated my answer and included some extra links that are worth reading.  You run into a dangerous scenario coercing csv files for presentation layers because the moment you start adding all sorts of extras to make it display-some-way, it starts becoming less machine-readable.  Just my 2cents"}, {"owner": {"reputation": 81, "user_id": 4605853, "user_type": "registered", "accept_rate": 70, "profile_image": "https://lh6.googleusercontent.com/-Aq0XeQDPtHY/AAAAAAAAAAI/AAAAAAAAABE/Moc6NDQG8Z8/photo.jpg?sz=128", "display_name": "Vivek Nayyar", "link": "https://stackoverflow.com/users/4605853/vivek-nayyar"}, "edited": false, "score": 0, "creation_date": 1424875050, "post_id": 28720915, "comment_id": 45730159, "body": "Thanks a lot Anthony. I tried your workaround for this as well, but Pawel Dawczak solution works the best in my case. But thank you so much for your suggestions."}], "tags": [], "owner": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "is_accepted": false, "score": 1, "last_activity_date": 1424874468, "last_edit_date": 1490004264, "creation_date": 1424872773, "answer_id": 28720915, "question_id": 28720446, "link": "https://stackoverflow.com/questions/28720446/string-containing-a-mobile-number-getting-stored-in-its-exponential-format-in-th/28720915#28720915", "title": "string containing a mobile number getting stored in its exponential format in the csv file from a ruby program", "body": "<p>So with your current code, the output of the csv is flat like this:</p>\n\n<pre><code>+919785006060,RJ\n+918884992121,KA\n...\n</code></pre>\n\n<p>By using <code>forced_quotes: true</code> you'll get csv output like this:</p>\n\n<pre><code>\"+919785006060\",\"RJ\"\n\"+918884992121\",\"KA\"\n...\n</code></pre>\n\n<p>The code to do that just requires a slight modification.  <a href=\"http://ruby-doc.org/stdlib-2.2.0/libdoc/csv/rdoc/CSV.html#method-c-new\" rel=\"nofollow noreferrer\">force_quotes: true</a> enables you to wrap all of the contents you push into the csv with quotes.  This will usually force programs like excel to read it as a string rather than try to figure out what data-type it is.</p>\n\n<pre><code>require 'csv'\n\noutputs = {\n\"+919785006060\"=&gt;\"RJ\", \"+918884992121\"=&gt;\"KA\", \"+918800220163\"=&gt;\"DL\", \"+919741645921\"=&gt;\"KA\", \"+919891548590\"=&gt;\"DL\", \"+919579594956\"=&gt;\"MH\", \"+919892587868\"=&gt;\"MU\"\n}\n\nCSV.open('output.csv', 'wb', { force_quotes: true } ) do |csv|\n  outputs.each do |k, v|\n    csv &lt;&lt; [k, v]\n  end\nend\n</code></pre>\n\n<p>I had to use excel's import wizard to get it to output like this:</p>\n\n<p><img src=\"https://i.stack.imgur.com/dOsUi.png\" alt=\"excel output\"></p>\n\n<p>If you don't want to use excels import wizard you can force this behavior by adding quotes.  (Note: I'm no excel expert but there appears to be conventions regarding this <a href=\"https://superuser.com/questions/867101/excel-adds-double-quotes-on-csv-export\">here</a> and <a href=\"https://superuser.com/questions/234997/how-can-i-stop-excel-from-eating-my-delicious-csv-files-and-excreting-useless-da?rq=1\">here</a>):</p>\n\n<pre><code>CSV.open('output.csv', 'wb', { force_quotes: true } ) do |csv|\n  outputs.each do |k, v|\n    csv &lt;&lt; ['\"' + k + '\"', v]\n  end\nend\n</code></pre>\n\n<p>In excel 2010 that comes through like this:</p>\n\n<p><img src=\"https://i.stack.imgur.com/xDI8U.png\" alt=\"with extra quotes\"></p>\n"}, {"comments": [{"owner": {"reputation": 81, "user_id": 4605853, "user_type": "registered", "accept_rate": 70, "profile_image": "https://lh6.googleusercontent.com/-Aq0XeQDPtHY/AAAAAAAAAAI/AAAAAAAAABE/Moc6NDQG8Z8/photo.jpg?sz=128", "display_name": "Vivek Nayyar", "link": "https://stackoverflow.com/users/4605853/vivek-nayyar"}, "edited": false, "score": 0, "creation_date": 1424874819, "post_id": 28721484, "comment_id": 45729980, "body": "Thanks a lot Pawel Dawczak, it gives the expected output."}], "tags": [], "owner": {"reputation": 8871, "user_id": 4381282, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-rIutmC2tG4M/AAAAAAAAAAI/AAAAAAAAAE4/wicIrC8KhUs/photo.jpg?sz=128", "display_name": "Pawe\u0142 Dawczak", "link": "https://stackoverflow.com/users/4381282/pawe%c5%82-dawczak"}, "is_accepted": true, "score": 0, "last_activity_date": 1424874266, "creation_date": 1424874266, "answer_id": 28721484, "question_id": 28720446, "link": "https://stackoverflow.com/questions/28720446/string-containing-a-mobile-number-getting-stored-in-its-exponential-format-in-th/28721484#28721484", "title": "string containing a mobile number getting stored in its exponential format in the csv file from a ruby program", "body": "<p>This is because Excel tries to understand what is put to the cells and render accordingly. What it sees is a large number with 'plus' sign, and it treats it as a number in mathematical meaning - this is where it starts to render that with mathematical representation (9.19847E+11).</p>\n\n<p>There might be a workaround for this, where you can explicitly say \"Hey Excel! Render the cell value as-is!\". Try modify your code generating CSV as follows:</p>\n\n<pre><code>CSV.open(\"output.csv\", \"wb\") {|csv| output.each {|key,value| csv &lt;&lt; ['=\"'+key+'\"',value] } }\n</code></pre>\n\n<p>In general, you should try to wrap your phonenumbers with:</p>\n\n<p><code>=\"+ 918884992121\",RJ</code></p>\n\n<p>With syntax like this, it shouldn't try to \"parse and understand\" the value, it'll just render it.</p>\n\n<p><strong>Provided solution is only to make output better to read in Excel</strong></p>\n\n<p>You have to be aware of what will be stored in your CSV document. It won't be the plain phonenumber as before and if you want to be able to process the file again later, you have to strip the syntax of <code>=\"...\"</code> while processing.</p>\n\n<p>If this is something you can live with - you can use the workaround. I'm afraid there is no other way to make it work with plain CSV.</p>\n\n<p><em>I'm not really able to test the solution on my own at the moment, but give it a try and let me know!</em></p>\n\n<p>Good luck!</p>\n"}], "owner": {"reputation": 81, "user_id": 4605853, "user_type": "registered", "accept_rate": 70, "profile_image": "https://lh6.googleusercontent.com/-Aq0XeQDPtHY/AAAAAAAAAAI/AAAAAAAAABE/Moc6NDQG8Z8/photo.jpg?sz=128", "display_name": "Vivek Nayyar", "link": "https://stackoverflow.com/users/4605853/vivek-nayyar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 256, "favorite_count": 0, "accepted_answer_id": 28721484, "answer_count": 2, "score": 0, "last_activity_date": 1424874468, "creation_date": 1424871424, "last_edit_date": 1424871847, "question_id": 28720446, "link": "https://stackoverflow.com/questions/28720446/string-containing-a-mobile-number-getting-stored-in-its-exponential-format-in-th", "title": "string containing a mobile number getting stored in its exponential format in the csv file from a ruby program", "body": "<p>Hi I am working on a small ruby program which maps mobile numbers to the respective states of india.</p>\n\n<p>This is basically done by looking at the first 4 digits of the number.\nThe code is working fine, the only problem is when I store the output to a csv file, the mobile number which is in the format \"+919845632174\" is getting stored in its exponential form with '+' character removed.</p>\n\n<p>I need it to be stored exactly the way it is.</p>\n\n<p>Also since I am a newbiew in ruby, if any of you can suggest a better way of doing this or a correct ruby style of doing this, then please leave your answers.</p>\n\n<p>My code is </p>\n\n<pre><code>require 'csv'\nnumbers=CSV.read('mapping.csv',headers:false)\nrecords=Hash.new\noutput=Hash.new\nnumbers.each{|key,value| records[key]=value}\nfile=File.read('sample.txt')\nfile=file.split(\"\\n\")\nfile.each do |number|\n    if !records[number[3,4]].nil?\n        output[number]=records[number[3,4]]\n    end\nend\nCSV.open(\"output.csv\", \"wb\") {|csv| output.each {|key,value| csv &lt;&lt; [key,value] } }\n</code></pre>\n\n<p>Here is how the output hash looks like:</p>\n\n<pre><code>{\n\"+919785006060\"=&gt;\"RJ\", \"+918884992121\"=&gt;\"KA\", \"+918800220163\"=&gt;\"DL\", \"+919741645921\"=&gt;\"KA\", \"+919891548590\"=&gt;\"DL\", \"+919579594956\"=&gt;\"MH\", \"+919892587868\"=&gt;\"MU\"\n}\n</code></pre>\n"}, {"tags": ["ruby", "redis", "resque", "worker"], "comments": [{"owner": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "edited": false, "score": 0, "creation_date": 1424871210, "post_id": 28720164, "comment_id": 45727450, "body": "also it&#39;s a little deterring to answer questions for a user that has never accepted an answer before, you should really make it a point to accept them when they are correct."}], "answers": [{"comments": [{"owner": {"reputation": 55, "user_id": 2260873, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/4ffa68032bdccbd9a97d90661634b0f3?s=128&d=identicon&r=PG", "display_name": "jenia", "link": "https://stackoverflow.com/users/2260873/jenia"}, "edited": false, "score": 0, "creation_date": 1424871198, "post_id": 28720309, "comment_id": 45727439, "body": "and in which file do I need to write it? will it work for standalone resque?"}, {"owner": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "reply_to_user": {"reputation": 55, "user_id": 2260873, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/4ffa68032bdccbd9a97d90661634b0f3?s=128&d=identicon&r=PG", "display_name": "jenia", "link": "https://stackoverflow.com/users/2260873/jenia"}, "edited": false, "score": 0, "creation_date": 1424871274, "post_id": 28720309, "comment_id": 45727500, "body": "you can do this all in one file if you prefer.  This isn&#39;t rails as you said so &quot;where this goes&quot;, isn&#39;t as important."}, {"owner": {"reputation": 55, "user_id": 2260873, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/4ffa68032bdccbd9a97d90661634b0f3?s=128&d=identicon&r=PG", "display_name": "jenia", "link": "https://stackoverflow.com/users/2260873/jenia"}, "edited": false, "score": 0, "creation_date": 1424871959, "post_id": 28720309, "comment_id": 45727998, "body": "When I try to write it e.g. to the multiplier.rb from <a href=\"https://github.com/dcestari/resque-standalone-sample\" rel=\"nofollow noreferrer\">github.com/dcestari/resque-standalone-sample</a>, it does not work. or do I really need to create a config-file?"}], "tags": [], "owner": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "is_accepted": false, "score": 1, "last_activity_date": 1424871056, "creation_date": 1424871056, "answer_id": 28720309, "question_id": 28720164, "link": "https://stackoverflow.com/questions/28720164/remote-redis-server-from-resque-standalone/28720309#28720309", "title": "Remote Redis Server from Resque Standalone", "body": "<p>You'll need to tell Resque where Redis lives:</p>\n\n<pre><code>Resque.configure do |config|\n\n  # Set the redis connection. Takes any of:\n  #   String - a redis url string (e.g., 'redis://host:port')\n  #   String - 'hostname:port[:db][/namespace]'\n  #   Redis - a redis connection that will be namespaced :resque\n  #   Redis::Namespace - a namespaced redis connection that will be used as-is\n  #   Redis::Distributed - a distributed redis connection that will be used as-is\n  #   Hash - a redis connection hash (e.g. {:host =&gt; 'localhost', :port =&gt; 6379, :db =&gt; 0})\n  config.redis = 'redis://someserverip:port:db/namespace'\n\nend\n</code></pre>\n"}], "owner": {"reputation": 55, "user_id": 2260873, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/4ffa68032bdccbd9a97d90661634b0f3?s=128&d=identicon&r=PG", "display_name": "jenia", "link": "https://stackoverflow.com/users/2260873/jenia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 595, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1424871056, "creation_date": 1424870642, "question_id": 28720164, "link": "https://stackoverflow.com/questions/28720164/remote-redis-server-from-resque-standalone", "title": "Remote Redis Server from Resque Standalone", "body": "<p>I want to run Resque workers on different servers, getting jobs from one Redis server. I know how to configure it in a Rails application, but the problem is I am using standalone Resque (<a href=\"https://github.com/dcestari/resque-standalone-sample\" rel=\"nofollow\">https://github.com/dcestari/resque-standalone-sample</a>) on every Server.</p>\n\n<p>So my question is, how can I do this without installing a Rails application and is it possible? </p>\n\n<p>Thank you!</p>\n"}, {"tags": ["ruby", "internationalization"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1424870946, "post_id": 28719789, "comment_id": 45727268, "body": "Adding the locale to your i18n backend should work."}], "answers": [{"comments": [{"owner": {"reputation": 1781, "user_id": 425271, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/8f4796eb42f2fdca85da4e9d2bfac844?s=128&d=identicon&r=PG", "display_name": "Michael Baldry", "link": "https://stackoverflow.com/users/425271/michael-baldry"}, "edited": false, "score": 6, "creation_date": 1441877021, "post_id": 28719892, "comment_id": 52855560, "body": "As a side note, I18n.available_locales &lt;&lt; :xx doesn&#39;t have any affect. You must do I18n.availabe_locales = I18n.available_locales + [:xx] instead. This got me head scratching for 10 mins."}], "tags": [], "owner": {"reputation": 985, "user_id": 1218280, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/490d74e521a4803d9363359288cd6f92?s=128&d=identicon&r=PG", "display_name": "Dan Sharp", "link": "https://stackoverflow.com/users/1218280/dan-sharp"}, "is_accepted": false, "score": 16, "last_activity_date": 1424869858, "creation_date": 1424869858, "answer_id": 28719892, "question_id": 28719789, "link": "https://stackoverflow.com/questions/28719789/how-to-add-available-locales-to-i18n-for-a-ruby-only-project/28719892#28719892", "title": "How to add available locales to i18n for a Ruby only project?", "body": "<p>Wow.</p>\n\n<p>I don't know how I overlooked it, but it was simpler than I thought:</p>\n\n<pre><code>I18n.available_locales = [:fr, :de, :es, :en]\n</code></pre>\n\n<p>I can drop that in an initializer and be good to go.</p>\n"}, {"tags": [], "owner": {"reputation": 2500, "user_id": 1431800, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef52069ce1a561e10feef902e0346ae2?s=128&d=identicon&r=PG&f=1", "display_name": "newdark-it", "link": "https://stackoverflow.com/users/1431800/newdark-it"}, "is_accepted": false, "score": 1, "last_activity_date": 1529604534, "creation_date": 1529604534, "answer_id": 50975082, "question_id": 28719789, "link": "https://stackoverflow.com/questions/28719789/how-to-add-available-locales-to-i18n-for-a-ruby-only-project/50975082#50975082", "title": "How to add available locales to i18n for a Ruby only project?", "body": "<p>Also if you want to list that includes symbolized and string versions which can be handy if you have to check both types.</p>\n\n<pre><code>&gt; I18n.config.available_locales_set\n=&gt; [\n    [ 0] \"en\",\n    [ 1] :en,\n    [ 2] \"en-GB\",\n    ...\n</code></pre>\n"}], "owner": {"reputation": 985, "user_id": 1218280, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/490d74e521a4803d9363359288cd6f92?s=128&d=identicon&r=PG", "display_name": "Dan Sharp", "link": "https://stackoverflow.com/users/1218280/dan-sharp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7218, "favorite_count": 3, "answer_count": 2, "score": 12, "last_activity_date": 1529604534, "creation_date": 1424869544, "question_id": 28719789, "link": "https://stackoverflow.com/questions/28719789/how-to-add-available-locales-to-i18n-for-a-ruby-only-project", "title": "How to add available locales to i18n for a Ruby only project?", "body": "<p>I'm working on a Ruby only project (not Ruby on Rails) that uses Mongoid for persistence. Mongoid supports language translations using I18n via localized fields: <a href=\"http://mongoid.org/en/mongoid/docs/documents.html#localized_fields\">http://mongoid.org/en/mongoid/docs/documents.html#localized_fields</a></p>\n\n<p>However, I can't figure out how to add additional locales as a configuration option. I18n.available_locales reports only :en</p>\n\n<p>All the searching I've done shows how to configure and use I18n within the context of Rails. Can anyone help me with how to configure I18n and add additional locales so that I can set localized field values for the Mongoid documents.</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["ruby", "authentication", "single-sign-on", "redmine", "redmine-plugins"], "answers": [{"tags": [], "owner": {"reputation": 452, "user_id": 1668411, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/06ccb95bf74dc164eff48d473bf3caf5?s=128&d=identicon&r=PG", "display_name": "T-Gergely", "link": "https://stackoverflow.com/users/1668411/t-gergely"}, "is_accepted": false, "score": 1, "last_activity_date": 1477398409, "creation_date": 1477398409, "answer_id": 40239964, "question_id": 28719646, "link": "https://stackoverflow.com/questions/28719646/redmine-422-invalid-form-authenticity-token/40239964#40239964", "title": "Redmine: 422 invalid form authenticity token", "body": "<p>For us, this error appeared when an already logged-on user tried to re-logon (eg. using multiple browser tabs).\nThe solution is <a href=\"http://www.redmine.org/issues/5230#note-17\" rel=\"nofollow\">here</a>, patch application_controller.rb:</p>\n\n<pre><code>-    render_error \"Invalid form authenticity token.\" \n+    redirect_back_or_default home_path\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 31, "user_id": 8607262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/255ace04905ae20394f18f71f8d51b47?s=128&d=identicon&r=PG&f=1", "display_name": "Wild Black Boar", "link": "https://stackoverflow.com/users/8607262/wild-black-boar"}, "is_accepted": false, "score": 3, "last_activity_date": 1505371733, "creation_date": 1505371733, "answer_id": 46212326, "question_id": 28719646, "link": "https://stackoverflow.com/questions/28719646/redmine-422-invalid-form-authenticity-token/46212326#46212326", "title": "Redmine: 422 invalid form authenticity token", "body": "<p><em>Some details for <strong>Redmine 3.4.2</em></strong> </p>\n\n<p>If you get an <strong>error 422 (Can't verify CSRF token authenticity)</strong>,\nyou must go to controller file</p>\n\n<p>/app/controller/aplication_controller.rb</p>\n\n<p>and remove or comment string with code</p>\n\n<pre><code>render_error :status =&gt; 422, :message =&gt; \"invalid form authenticity token.\"\n</code></pre>\n\n<p>then add code</p>\n\n<pre><code>redirect_back_or_default(home_path)\n</code></pre>\n\n<p>So, your code will be like this</p>\n\n<pre><code># render_error :status =&gt; 422, :message =&gt; \"invalid form authenticity token.\"\nredirect_back_or_default(home_path) \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1006, "user_id": 1214248, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96b793b149396fad6ae08f65bf245a7b?s=128&d=identicon&r=PG", "display_name": "JB. With Monica.", "link": "https://stackoverflow.com/users/1214248/jb-with-monica"}, "is_accepted": false, "score": 0, "last_activity_date": 1587107402, "creation_date": 1587107402, "answer_id": 61265896, "question_id": 28719646, "link": "https://stackoverflow.com/questions/28719646/redmine-422-invalid-form-authenticity-token/61265896#61265896", "title": "Redmine: 422 invalid form authenticity token", "body": "<p>It happened to us when using a reverse-proxy SSO. The configured name in the SSO was not with the same case than the user name within Redmine.</p>\n\n<p>Extract from nginx configuration :</p>\n\n<pre><code>                       # Pass the user to that stupid Passenger Phusion\n                       # that cannot evaluate variables like $http_x_forwarded_user\n                       passenger_env_var REMOTE_USER nicolasm;\n</code></pre>\n\n<p>And our user name in Redmine was <code>NicolasM</code>.</p>\n\n<p>Removing security as suggested by other answers is not a long lasting solution.</p>\n"}], "owner": {"reputation": 529, "user_id": 1320573, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/906cedf558955d7c9a1fe04094eb7899?s=128&d=identicon&r=PG&f=1", "display_name": "Chanuka Ranaba", "link": "https://stackoverflow.com/users/1320573/chanuka-ranaba"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 9044, "favorite_count": 0, "answer_count": 3, "score": 5, "last_activity_date": 1587107402, "creation_date": 1424869111, "question_id": 28719646, "link": "https://stackoverflow.com/questions/28719646/redmine-422-invalid-form-authenticity-token", "title": "Redmine: 422 invalid form authenticity token", "body": "<p>I'm using <a href=\"https://github.com/chrodriguez/redmine_omniauth_saml\" rel=\"noreferrer\">this</a> plugin to enable SSO between my IDP and redmine. Purpose is to avoid re entering username and password when login to the redmine. Both Redmine and the IDP connected to an external LDAP. Problem is after redirecting back to the redmine from my IDP (after entering username &amp; password), It's giving this error.</p>\n\n<p>Redmine version: 2.5.2,\nRuby version: 1.9.3,\nRails version: 3.2.19</p>\n\n<p><img src=\"https://i.stack.imgur.com/CePVS.png\" alt=\"error\"></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rails-admin"], "answers": [{"comments": [{"owner": {"reputation": 729, "user_id": 4238841, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/LkBDg.jpg?s=128&g=1", "display_name": "Hetal Khunti", "link": "https://stackoverflow.com/users/4238841/hetal-khunti"}, "edited": false, "score": 0, "creation_date": 1424869120, "post_id": 28719600, "comment_id": 45726060, "body": "So you mean that it is use to show item?? Then why there is separate action called show? Sorry still not understood clearly.."}, {"owner": {"reputation": 1402, "user_id": 609489, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/fef05b31d37c679848a1958c21e5c9a1?s=128&d=identicon&r=PG", "display_name": "lightsaber", "link": "https://stackoverflow.com/users/609489/lightsaber"}, "edited": false, "score": 0, "creation_date": 1490623467, "post_id": 28719600, "comment_id": 73181427, "body": "@MohammadAbuShady I&#39;ve my rails_admin in different subdomain then my www and want to open urls in www version from show_in_app action, also I&#39;m using friendly_id, how can I customize this action because as of now it returns 404 and it uses numeric ids instead of slug."}], "tags": [], "owner": {"reputation": 34818, "user_id": 2149092, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/34986a72d47c42ae5685b37ba32d1e22?s=128&d=identicon&r=PG", "display_name": "Mohammad AbuShady", "link": "https://stackoverflow.com/users/2149092/mohammad-abushady"}, "is_accepted": true, "score": 3, "last_activity_date": 1424870139, "last_edit_date": 1592644375, "creation_date": 1424868917, "answer_id": 28719600, "question_id": 28719460, "link": "https://stackoverflow.com/questions/28719460/what-is-the-use-of-show-in-app-action-in-rails-admin/28719600#28719600", "title": "what is the use of show_in_app action in rails_admin?", "body": "<p><code>Show in app</code> is a show link opens the item you are listing or editing in the backend in the frontend, it usually has an eye icon in the actions next to the items.</p>\n<p><img src=\"https://i.stack.imgur.com/Yz5eT.png\" alt=\"show in app link\" /></p>\n<p>When you click this button, it will redirect you to the show path of the item in the frontend</p>\n"}], "owner": {"reputation": 729, "user_id": 4238841, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/LkBDg.jpg?s=128&g=1", "display_name": "Hetal Khunti", "link": "https://stackoverflow.com/users/4238841/hetal-khunti"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 883, "favorite_count": 0, "accepted_answer_id": 28719600, "answer_count": 1, "score": 1, "last_activity_date": 1424870139, "creation_date": 1424868532, "question_id": 28719460, "link": "https://stackoverflow.com/questions/28719460/what-is-the-use-of-show-in-app-action-in-rails-admin", "title": "what is the use of show_in_app action in rails_admin?", "body": "<p>I am new to use of <a href=\"https://github.com/sferik/rails_admin\" rel=\"nofollow\"><strong>rails_admin</strong></a> for admin panel. I have some code in <strong>config/initializers/rails_admin.rb</strong></p>\n\n<pre><code>config.actions do\n    dashboard                     # mandatory\n    index                         # mandatory\n    new\n    export\n    bulk_delete\n    show\n    edit\n    delete\n    show_in_app # what is the use of this action?\n\n    ## With an audit adapter, you can add:\n    # history_index\n    # history_show\n  end\n</code></pre>\n\n<p>I came to know what is the use of above actions except <code>show_in_app</code> action. I have already done googling but everywhere I found it's code. I couldn't found any well described document. Can you please explain me use of this action? I have checked by <code>commenting</code> and <code>un-commenting</code> that line but no difference found in <code>localhost:3000/admin/</code> UI.</p>\n\n<p>Already Checked:</p>\n\n<ul>\n<li><a href=\"https://github.com/sferik/rails_admin/blob/master/lib/rails_admin/config/actions/show_in_app.rb\" rel=\"nofollow\">Github</a></li>\n<li><a href=\"http://ruby-doc.org/gems/docs/r/rails_admin-lbgraham-0.4.2/RailsAdmin/Config/Actions/ShowInApp.html\" rel=\"nofollow\">Ruby-doc</a></li>\n</ul>\n"}, {"tags": ["ruby", "cucumber", "dsl", "internal"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1424868793, "post_id": 28719249, "comment_id": 45725830, "body": "What do you mean by \u201cthis is a definition, and not a method call\u201d?"}, {"owner": {"reputation": 4203, "user_id": 494094, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/4f841e920d687e5706b52468061da268?s=128&d=identicon&r=PG", "display_name": "hattenn", "link": "https://stackoverflow.com/users/494094/hattenn"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1424869047, "post_id": 28719249, "comment_id": 45726022, "body": "I mean I&#39;m thinking that <code>When ... do ... end</code> is a definition in some way, because in <i>line 3</i>, we can call it using a string."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1424869502, "post_id": 28719249, "comment_id": 45726306, "body": "You have me completely confused :) What\u2019s wrong with calling a method in line 3? Take a look at how they implemented <a href=\"https://github.com/cucumber/cucumber/blob/master/lib/cucumber/rb_support/rb_dsl.rb#L49\" rel=\"nofollow noreferrer\"><code>World</code></a>. The <code>When</code> is to be defined in the same way somewhere in <i>Gherkin</i> implementation."}, {"owner": {"reputation": 4336, "user_id": 574181, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c78d396646e7612dead8bcd7c63a4fe?s=128&d=identicon&r=PG", "display_name": "Satya", "link": "https://stackoverflow.com/users/574181/satya"}, "edited": false, "score": 0, "creation_date": 1424874890, "post_id": 28719249, "comment_id": 45730037, "body": "When is a method that takes some arguments, and optionally a block. Remember that in Ruby, method arguments can be of any type and blocks can be optional."}], "answers": [{"tags": [], "owner": {"reputation": 1190, "user_id": 1047937, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/cc0285786275cb21edfefbc3d527e6de?s=128&d=identicon&r=PG&f=1", "display_name": "dgmora", "link": "https://stackoverflow.com/users/1047937/dgmora"}, "is_accepted": true, "score": 0, "last_activity_date": 1424901629, "last_edit_date": 1424901629, "creation_date": 1424884813, "answer_id": 28725477, "question_id": 28719249, "link": "https://stackoverflow.com/questions/28719249/how-does-cucumber-dsl-work/28725477#28725477", "title": "How does Cucumber DSL work?", "body": "<p>The code is the following (code taken from <a href=\"https://github.com/cucumber/cucumber/blob/master/lib/cucumber/rb_support/rb_dsl.rb\" rel=\"nofollow\">here</a>):</p>\n\n<pre><code>def register_rb_step_definition(regexp, symbol = nil, options = {}, &amp;proc)\n  proc_or_sym = symbol || proc\n  RbDsl.register_rb_step_definition(regexp, proc_or_sym, options)\nend\n</code></pre>\n\n<p><code>When</code>, <code>Given</code>, <code>Then</code> are an alias to <code>register_rb_step_definition</code>.\nYou pass a regular expression as an argument, and a block.</p>\n\n<p>Each step definition is <em>registered</em> with the regular expression and the block. When the test is executed, cucumber looks in the previously registered steps and if any regular expression matches it executes the block associated to that regular expression.</p>\n"}], "owner": {"reputation": 4203, "user_id": 494094, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/4f841e920d687e5706b52468061da268?s=128&d=identicon&r=PG", "display_name": "hattenn", "link": "https://stackoverflow.com/users/494094/hattenn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 569, "favorite_count": 0, "accepted_answer_id": 28725477, "answer_count": 1, "score": 0, "last_activity_date": 1424901629, "creation_date": 1424867908, "last_edit_date": 1424868234, "question_id": 28719249, "link": "https://stackoverflow.com/questions/28719249/how-does-cucumber-dsl-work", "title": "How does Cucumber DSL work?", "body": "<p>Let's take:</p>\n\n<pre><code>When /^(?:|I )fill in the following:$/ do |fields|\n  fields.rows_hash.each do |name, value|\n    When %{I fill in \"#{name}\" with \"#{value}\"}\n  end\nend\n</code></pre>\n\n<p>With my rudimentary Ruby knowledge, I was thinking that <code>When</code> is a method call that takes a regular expression and a block.</p>\n\n<p>But then, I am also thinking that this is a definition, and not a method call, but then how is it achieved? How can <code>When</code> define something?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "tagging", "ransack"], "comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1424876599, "post_id": 28719122, "comment_id": 45731311, "body": "<a href=\"http://railscasts.com/episodes/370-ransack\" rel=\"nofollow noreferrer\">RailsCast 370</a> has some great examples of complex search forms for association models."}, {"owner": {"reputation": 759, "user_id": 266636, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/oUwe1.jpg?s=128&g=1", "display_name": "Rami GB", "link": "https://stackoverflow.com/users/266636/rami-gb"}, "edited": false, "score": 0, "creation_date": 1425684558, "post_id": 28719122, "comment_id": 46078018, "body": "Would you give an example of what result are you expecting?"}], "answers": [{"tags": [], "owner": {"reputation": 840, "user_id": 1028939, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/61801c8fb992a44d5506b6a557831003?s=128&d=identicon&r=PG", "display_name": "MattyB", "link": "https://stackoverflow.com/users/1028939/mattyb"}, "is_accepted": false, "score": 0, "last_activity_date": 1426022637, "creation_date": 1426022637, "answer_id": 28974353, "question_id": 28719122, "link": "https://stackoverflow.com/questions/28719122/using-ransack-to-traverse-a-complex-associated-tag-hierarchy/28974353#28974353", "title": "using ransack to traverse a complex associated tag hierarchy", "body": "<p>Is it acceptable to split into two queries?</p>\n\n<pre><code>tag_ids = QuestionTag\n            .where(id: [447, 499])\n            .map{ |t| t.self_and_descendants }\n            .uniq\n            .map(&amp;:id)\n\nQuestion.ransack(question_tags_id_in: tag_ids).result\n</code></pre>\n"}], "owner": {"reputation": 1679, "user_id": 121176, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/56de7700298f470227990ba23202e6a4?s=128&d=identicon&r=PG", "display_name": "ere", "link": "https://stackoverflow.com/users/121176/ere"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 226, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1426022637, "creation_date": 1424867526, "last_edit_date": 1424869645, "question_id": 28719122, "link": "https://stackoverflow.com/questions/28719122/using-ransack-to-traverse-a-complex-associated-tag-hierarchy", "title": "using ransack to traverse a complex associated tag hierarchy", "body": "<p>I have a model I which to search using Ransack called <code>Question</code> and it has the associated models <code>question_tags</code> through <code>question_taggings</code>:</p>\n\n<pre><code>has_many :question_taggings, :dependent =&gt; :destroy\nhas_many :question_tags, :through =&gt; :question_taggings\n</code></pre>\n\n<p>I can do a basic search using these tags with something like:</p>\n\n<pre><code>Question.ransack(question_tags_id_or_question_tags_parent_id_in: [447,449]).result\n</code></pre>\n\n<p>But for tags, we're are using the <a href=\"https://github.com/mceachen/closure_tree\" rel=\"nofollow\">closure_tree</a> gem which presents a problem of how to search a more complicated hierarchy of tags.</p>\n\n<p>Specifically I'd like to be able to search parent tags and be able to return all of the tags associated with the tag and its descendants.  Which I can do using closure_tree like so (with SQL):</p>\n\n<pre><code>QuestionTag.find(447).self_and_descendants.to_sql\n=&gt; \"SELECT \\\"question_tags\\\".* FROM \\\"question_tags\\\" INNER JOIN \\\"question_tag_hierarchies\\\" ON \\\"question_tags\\\".\\\"id\\\" = \\\"question_tag_hierarchies\\\".\\\"descendant_id\\\" WHERE \\\"question_tag_hierarchies\\\".\\\"ancestor_id\\\" = 447  ORDER BY \\\"question_tag_hierarchies\\\".generations asc\"\n</code></pre>\n\n<p>Eg tag 447 is <code>sports</code> and it has the following self_and_descendants:</p>\n\n<pre><code>+-----+-------------------+---------------------------+---------------------------+-----------+\n| id  | name              | created_at                | updated_at                | parent_id |\n+-----+-------------------+---------------------------+---------------------------+-----------+\n| 447 | sports            | 2014-10-24 15:58:15 +0100 | 2015-01-12 15:10:12 +0000 |           |\n| 462 | hockey            | 2014-10-24 18:21:18 +0100 | 2014-10-24 18:21:18 +0100 | 447       |\n| 464 | basketball        | 2014-10-24 18:21:31 +0100 | 2014-10-24 18:21:31 +0100 | 447       |\n| 465 | olympics          | 2014-10-24 18:21:40 +0100 | 2014-10-24 18:21:40 +0100 | 447       |\n| 466 | world cup         | 2014-10-24 18:21:56 +0100 | 2014-10-24 18:21:56 +0100 | 447       |\n| 467 | martial arts      | 2014-10-24 18:22:20 +0100 | 2014-10-24 18:22:20 +0100 | 447       |\n| 541 | american football | 2014-11-19 06:20:16 +0000 | 2014-11-19 06:20:16 +0000 | 447       |\n| 542 | baseball          | 2014-11-19 06:20:23 +0000 | 2014-11-19 06:20:23 +0000 | 447       |\n| 506 | cricket           | 2014-11-06 06:49:05 +0000 | 2014-11-06 06:49:05 +0000 | 447       |\n| 661 | winter sports     | 2015-02-13 10:46:30 +0000 | 2015-02-13 10:46:30 +0000 | 447       |\n| 659 | surfing           | 2015-02-13 10:44:05 +0000 | 2015-02-13 10:44:05 +0000 | 447       |\n| 660 | horse racing      | 2015-02-13 10:46:07 +0000 | 2015-02-13 10:46:07 +0000 | 447       |\n| 461 | soccer            | 2014-10-24 18:21:12 +0100 | 2014-10-24 18:21:12 +0100 | 447       |\n| 463 | football          | 2014-10-24 18:21:25 +0100 | 2015-02-13 10:51:28 +0000 | 447       |\n| 570 | golf              | 2015-01-15 17:22:35 +0000 | 2015-01-15 17:22:35 +0000 | 447       |\n| 561 | tennis            | 2015-01-15 04:23:41 +0000 | 2015-01-15 04:23:41 +0000 | 447       |\n| 601 | motor racing      | 2015-02-05 16:29:11 +0000 | 2015-02-05 16:29:11 +0000 | 447       |\n| 605 | rugby             | 2015-02-05 16:30:32 +0000 | 2015-02-05 16:30:32 +0000 | 447       |\n| 621 | snooker           | 2015-02-06 14:27:35 +0000 | 2015-02-06 14:27:35 +0000 | 447       |\n| 655 | extreme sport     | 2015-02-13 10:38:04 +0000 | 2015-02-13 10:38:04 +0000 | 447       |\n| 656 | sports equipment  | 2015-02-13 10:41:42 +0000 | 2015-02-13 10:41:46 +0000 | 447       |\n| 657 | athletics         | 2015-02-13 10:42:26 +0000 | 2015-02-13 10:42:32 +0000 | 447       |\n| 658 | ballgames         | 2015-02-13 10:42:58 +0000 | 2015-02-13 10:42:58 +0000 | 447       |\n| 468 | boxing            | 2014-10-24 18:22:24 +0100 | 2014-10-24 18:22:24 +0100 | 467       |\n| 602 | f1                | 2015-02-05 16:29:16 +0000 | 2015-02-05 16:29:16 +0000 | 601       |\n| 603 | motorbikes        | 2015-02-05 16:29:24 +0000 | 2015-02-05 16:29:24 +0000 | 601       |\n+-----+-------------------+---------------------------+---------------------------+-----------+\n</code></pre>\n\n<p>My question is how could I integrate this search using Ransack?  First off, would I create a <a href=\"https://github.com/activerecord-hackery/ransack/wiki/Using-Ransackers\" rel=\"nofollow\">custom ransacker</a>?  The problem is they don't give any complicated examples or even examples which use associated models. ;-(</p>\n\n<p>Any advice would be great!  Thanks,</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "actionmailer", "rails-activejob"], "answers": [{"tags": [], "owner": {"reputation": 5828, "user_id": 144876, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/6eb647ceaf71499931542f2a83710f44?s=128&d=identicon&r=PG", "display_name": "Asfand Qazi", "link": "https://stackoverflow.com/users/144876/asfand-qazi"}, "is_accepted": true, "score": 3, "last_activity_date": 1424866871, "creation_date": 1424866871, "answer_id": 28718925, "question_id": 28718924, "link": "https://stackoverflow.com/questions/28718924/which-activejob-queue-does-actionmailer-use-in-rails-4-2/28718925#28718925", "title": "Which ActiveJob queue does ActionMailer use in Rails 4.2?", "body": "<p>The answer is: according to <a href=\"https://github.com/mperham/sidekiq/wiki/Active-Job#action-mailer\" rel=\"nofollow\">the Sidekiq wiki</a>, the \"mailers\" queue.</p>\n"}], "owner": {"reputation": 5828, "user_id": 144876, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/6eb647ceaf71499931542f2a83710f44?s=128&d=identicon&r=PG", "display_name": "Asfand Qazi", "link": "https://stackoverflow.com/users/144876/asfand-qazi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 905, "favorite_count": 0, "accepted_answer_id": 28718925, "answer_count": 1, "score": 3, "last_activity_date": 1424866871, "creation_date": 1424866871, "question_id": 28718924, "link": "https://stackoverflow.com/questions/28718924/which-activejob-queue-does-actionmailer-use-in-rails-4-2", "title": "Which ActiveJob queue does ActionMailer use in Rails 4.2?", "body": "<p>In Rails 4.2, ActionMailer supports using the new background job abstraction layer called ActiveJob. ActiveJob puts jobs into background queues to be processed later outside of the flow of code that pushed the job into it.</p>\n\n<p>The question is, since ActionMailer now supports automatic enqueuing of emails with the #deliver_later method, which queue do those emails get sent into.</p>\n"}, {"tags": ["ruby", "sequel"], "answers": [{"comments": [{"owner": {"reputation": 7562, "user_id": 819364, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/XtRZ9.png?s=128&g=1", "display_name": "Jakub Trune\u010dek", "link": "https://stackoverflow.com/users/819364/jakub-trune%c4%8dek"}, "edited": false, "score": 1, "creation_date": 1424866176, "post_id": 28718498, "comment_id": 45724192, "body": "Sorry, I was unclear, I ment the block which contains <code>ds.where(ALang__lang: I18n.locale.to_s)</code> code."}, {"owner": {"reputation": 7353, "user_id": 1378292, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/bea4eb8581883ffd109fca9ab95fdb3a?s=128&d=identicon&r=PG", "display_name": "mjgpy3", "link": "https://stackoverflow.com/users/1378292/mjgpy3"}, "reply_to_user": {"reputation": 7562, "user_id": 819364, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/XtRZ9.png?s=128&g=1", "display_name": "Jakub Trune\u010dek", "link": "https://stackoverflow.com/users/819364/jakub-trune%c4%8dek"}, "edited": false, "score": 0, "creation_date": 1424866221, "post_id": 28718498, "comment_id": 45724232, "body": "Gotcha, it appears from @spickermann&#39;s answer that my hunch was correct."}, {"owner": {"reputation": 7353, "user_id": 1378292, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/bea4eb8581883ffd109fca9ab95fdb3a?s=128&d=identicon&r=PG", "display_name": "mjgpy3", "link": "https://stackoverflow.com/users/1378292/mjgpy3"}, "reply_to_user": {"reputation": 7562, "user_id": 819364, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/XtRZ9.png?s=128&g=1", "display_name": "Jakub Trune\u010dek", "link": "https://stackoverflow.com/users/819364/jakub-trune%c4%8dek"}, "edited": false, "score": 0, "creation_date": 1424869435, "post_id": 28718498, "comment_id": 45726267, "body": "See end &quot;If you&#39;re talking abut the block passed to one_to_one it&#39;s likely Sequel::Model is calculating its result and caching it when the class is being loaded.&quot;"}, {"owner": {"reputation": 7562, "user_id": 819364, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/XtRZ9.png?s=128&g=1", "display_name": "Jakub Trune\u010dek", "link": "https://stackoverflow.com/users/819364/jakub-trune%c4%8dek"}, "edited": false, "score": 0, "creation_date": 1424869698, "post_id": 28718498, "comment_id": 45726432, "body": "Ok, this is understandable. But therefore I can&#39;t see the point to use block definition in association if it is not able to reflect dynamic state. Do you understand me? I believe I am doing something wrong, but I am not able to figure out what :(."}], "tags": [], "owner": {"reputation": 7353, "user_id": 1378292, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/bea4eb8581883ffd109fca9ab95fdb3a?s=128&d=identicon&r=PG", "display_name": "mjgpy3", "link": "https://stackoverflow.com/users/1378292/mjgpy3"}, "is_accepted": false, "score": 0, "last_activity_date": 1424869410, "last_edit_date": 1424869410, "creation_date": 1424865618, "answer_id": 28718498, "question_id": 28718348, "link": "https://stackoverflow.com/questions/28718348/association-block-is-called-only-once/28718498#28718498", "title": "Association block is called only once", "body": "<p>Assuming when you're saying \"block\" you're meaning the body of the <code>A</code> <code>class</code> or something within said body, that makes perfect sense. Classes are only loaded once (typically, unless monkey patching, but even then \"loading\" is a debatable term).</p>\n\n<p>The body of <code>A</code>, in this case, sets up the <em>declarative</em> logic of of the queries you are performing. If you're talking abut the block passed to <code>one_to_one</code> it's likely <code>Sequel::Model</code> is calculating its result and caching it when the class is being loaded.</p>\n\n<p>Am I missing the question here?</p>\n"}, {"comments": [{"owner": {"reputation": 7562, "user_id": 819364, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/XtRZ9.png?s=128&g=1", "display_name": "Jakub Trune\u010dek", "link": "https://stackoverflow.com/users/819364/jakub-trune%c4%8dek"}, "edited": false, "score": 0, "creation_date": 1424866700, "post_id": 28718533, "comment_id": 45724515, "body": "Ok, but why is the database queried in both calls? Please see the edited question. Thank you very much."}, {"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "reply_to_user": {"reputation": 7562, "user_id": 819364, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/XtRZ9.png?s=128&g=1", "display_name": "Jakub Trune\u010dek", "link": "https://stackoverflow.com/users/819364/jakub-trune%c4%8dek"}, "edited": false, "score": 0, "creation_date": 1424895320, "post_id": 28718533, "comment_id": 45743679, "body": "Do you see the query in the Rails log or in your database&#39;s log? The Rails log only tells you that Rails requested that data, but not if the caching layer was able to deliver it. In the result for a query is available in the caching layer, you would see the query in the Rails log, but not in your database&#39;s log, since it actually does not kit the database twice."}, {"owner": {"reputation": 7562, "user_id": 819364, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/XtRZ9.png?s=128&g=1", "display_name": "Jakub Trune\u010dek", "link": "https://stackoverflow.com/users/819364/jakub-trune%c4%8dek"}, "edited": false, "score": 0, "creation_date": 1424944568, "post_id": 28718533, "comment_id": 45762116, "body": "The problem was not in caching data but caching dataset for association. All is solved now. Thank you for your time."}], "tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": false, "score": 0, "last_activity_date": 1424895593, "last_edit_date": 1424895593, "creation_date": 1424865709, "answer_id": 28718533, "question_id": 28718348, "link": "https://stackoverflow.com/questions/28718348/association-block-is-called-only-once/28718533#28718533", "title": "Association block is called only once", "body": "<p>That is a feature: </p>\n\n<p>The block is only evaluated one, when the class is loaded. This is the reason why you use lambdas in ActiveRecord to define variable parts in scopes or associations. I don't know if Sequel also supports lambdas in query or association definitions.</p>\n\n<p>The database is not called twice, because associations are cached after being retrieved. See <a href=\"http://sequel.jeremyevans.net/rdoc/files/doc/association_basics_rdoc.html#label-Caching\" rel=\"nofollow\">Caching in the docs for <code>Sequel::Model</code></a> </p>\n"}, {"tags": [], "owner": {"reputation": 11331, "user_id": 132053, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f183bcc4176b308c9edabe79299e448f?s=128&d=identicon&r=PG", "display_name": "Jeremy Evans", "link": "https://stackoverflow.com/users/132053/jeremy-evans"}, "is_accepted": true, "score": 2, "last_activity_date": 1424886081, "creation_date": 1424886081, "answer_id": 28725938, "question_id": 28718348, "link": "https://stackoverflow.com/questions/28718348/association-block-is-called-only-once/28725938#28725938", "title": "Association block is called only once", "body": "<p>In this case, the block is eagerly evaluated and the resulting dataset is cached. To delay the evaluation of the current locale, you need to use a delayed evaluation:</p>\n\n<pre><code>one_to_one :lang, class: ALang, key: :a_id,\n         graph_join_type: :inner do |ds|\n           ds.where(ALang__lang: Sequel.delay{I18n.locale.to_s})\n         end\n</code></pre>\n\n<p>I've updated Sequel's documentation to reflect this.</p>\n"}], "owner": {"reputation": 7562, "user_id": 819364, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/XtRZ9.png?s=128&g=1", "display_name": "Jakub Trune\u010dek", "link": "https://stackoverflow.com/users/819364/jakub-trune%c4%8dek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41, "favorite_count": 1, "accepted_answer_id": 28725938, "answer_count": 3, "score": 0, "last_activity_date": 1424895593, "creation_date": 1424865191, "last_edit_date": 1424866658, "question_id": 28718348, "link": "https://stackoverflow.com/questions/28718348/association-block-is-called-only-once", "title": "Association block is called only once", "body": "<p>I am using Sequel and I have model defined like this:</p>\n\n<pre><code>class A &lt; Sequel::Model\n  one_to_one :lang, class: ALang, key: :a_id,\n             graph_join_type: :inner do |ds|\n               ds.where(ALang__lang: I18n.locale.to_s)\n             end\n  delegate :title, :titleSanitized, :description, to: :lang\n  # ...\nend\n\n\nI18n.lang = :de\nA.eager(:lang).all \n# block is called (\"ds.where(ALang__lang: I18n.locale.to_s)\" code)\n# database was queried (I can see the query in logs) \nI18n.lang = :en\nA.eager(:lang).all \n# block is not called\n# database was queried (I can see the query in logs)\n</code></pre>\n\n<p>Is it bug or feature? Or am I doing something wrong?</p>\n\n<p>Thank you</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "exception-handling"], "comments": [{"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1424865095, "post_id": 28718186, "comment_id": 45723527, "body": "Did you have a look into your log file if there are any errors? Is sendmail configured on the server? Where do you host your application? Did you try to send a &quot;normal&quot; ActionMailer?"}, {"owner": {"reputation": 40732, "user_id": 984621, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/817afccebcbe3a4983a5e8c584f30373?s=128&d=identicon&r=PG", "display_name": "user984621", "link": "https://stackoverflow.com/users/984621/user984621"}, "reply_to_user": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1424879147, "post_id": 28718186, "comment_id": 45733299, "body": "The log is empty (there&#39;s no message about sending an error email). The app is hosted on DigitalOcean. I am using <code>Devise</code> and when I generate there forgotten password, the email is sent out."}], "answers": [{"comments": [{"owner": {"reputation": 40732, "user_id": 984621, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/817afccebcbe3a4983a5e8c584f30373?s=128&d=identicon&r=PG", "display_name": "user984621", "link": "https://stackoverflow.com/users/984621/user984621"}, "edited": false, "score": 0, "creation_date": 1424879073, "post_id": 28719470, "comment_id": 45733213, "body": "thank you for your message, I tested it out but still no email arrived (log is empty as well - no message about sending an email out)."}], "tags": [], "owner": {"reputation": 4101, "user_id": 1482055, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/f4D9p.jpg?s=128&g=1", "display_name": "Milind", "link": "https://stackoverflow.com/users/1482055/milind"}, "is_accepted": false, "score": 1, "last_activity_date": 1424868550, "creation_date": 1424868550, "answer_id": 28719470, "question_id": 28718186, "link": "https://stackoverflow.com/questions/28718186/rails-4-exception-notifier-doesnt-send-email-if-error/28719470#28719470", "title": "Rails 4 - Exception notifier doesn&#39;t send email if error", "body": "<p><strong>try to use this...with the AppName like this:-</strong></p>\n\n<pre><code> MyAppName::Application.config.middleware.use ExceptionNotification::Rack,\n   :email =&gt; {\n     :email_prefix =&gt; \"[MyApp_Error] \",\n     :sender_address =&gt; %{\"notifier\" &lt;notifier@myAppName.com&gt;},\n     :exception_recipients =&gt; %w{your_email_id@gmail.com}\n   }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": false, "score": 2, "last_activity_date": 1496238207, "last_edit_date": 1496238207, "creation_date": 1424896923, "answer_id": 28729164, "question_id": 28718186, "link": "https://stackoverflow.com/questions/28718186/rails-4-exception-notifier-doesnt-send-email-if-error/28729164#28729164", "title": "Rails 4 - Exception notifier doesn&#39;t send email if error", "body": "<p><code>ActiveRecord::RecordNotFound</code> is a very special case (same for routing errors and some others). I would be surprised if this kind of exceptions triggered the <code>ExceptionNotifier</code> to send mails. In a production environment, Rails would handle this error by rendering the <code>404</code> (not found) page, instead of a <code>500</code> (server error) that would happen if Rails couldn't handle the exception.</p>\n\n<p>And in fact, there is the option <code>ignore_exceptions</code> in <code>ExceptionNotifier</code> that includes this exception by default. Read more about the <a href=\"https://github.com/smartinez87/exception_notification#ignore-exceptions\" rel=\"nofollow noreferrer\"><code>ignore_exceptions</code> option and its defaults</a>.</p>\n"}], "owner": {"reputation": 40732, "user_id": 984621, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/817afccebcbe3a4983a5e8c584f30373?s=128&d=identicon&r=PG", "display_name": "user984621", "link": "https://stackoverflow.com/users/984621/user984621"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1155, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1496238207, "creation_date": 1424864676, "last_edit_date": 1424879035, "question_id": 28718186, "link": "https://stackoverflow.com/questions/28718186/rails-4-exception-notifier-doesnt-send-email-if-error", "title": "Rails 4 - Exception notifier doesn&#39;t send email if error", "body": "<p>I have a Rails 4 app and using the gem <code>exception_notification</code>. The gem is installed, in <code>config/environments/production.rb</code> is following:</p>\n\n<pre><code>  config.action_mailer.delivery_method = :sendmail\n  config.action_mailer.perform_deliveries = true\n  config.action_mailer.raise_delivery_errors = true\n\n  config.middleware.use ExceptionNotification::Rack,\n    :email =&gt; {\n      :email_prefix =&gt; \"[MyProj Error Report] \",\n      :sender_address =&gt; %{\"MyProj\" &lt;no-reply@myproj.com&gt;},\n      :exception_recipients =&gt; %w{info@myproj.com}\n    }\n</code></pre>\n\n<p><code>no-reply@myproj.com</code> email address doesn't exist, <code>info@myproj.com</code> is my real email address.</p>\n\n<p>When an error will occur on production, I don't receive any email about it.</p>\n\n<p>What other configuration information do I need to add? </p>\n\n<p><strong>EDIT:</strong>\n<code>config/environments/production.rb</code>:</p>\n\n<pre><code>Rails.application.configure do\n  ...\n  MyApp::Application.config.middleware.use ExceptionNotification::Rack,\n    :email =&gt; {\n      :email_prefix =&gt; \"[MyApp_Error] \",\n      :sender_address =&gt; %{\"notifier\" &lt;notifier@myAppName.com&gt;},\n      :exception_recipients =&gt; %w{your_email_id@gmail.com}\n    }\nend\n</code></pre>\n\n<p>I modified the code with my real email addresses, but still no success. In log is nothing - when I want to fetched a record with a non-existing ID, like <code>website.com/articles/123345666777</code>, in the error log is only the following:</p>\n\n<pre><code>ActiveRecord::RecordNotFound (Couldn't find Article with 'id'=123345666777):\n  app/controllers/articles_controller.rb:175:in `set_article'\n</code></pre>\n"}, {"tags": ["html", "ruby", "xpath", "watir", "watir-webdriver"], "comments": [{"owner": {"reputation": 20027, "user_id": 1987598, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/s3j3n.jpg?s=128&g=1", "display_name": "Mathias M&#252;ller", "link": "https://stackoverflow.com/users/1987598/mathias-m%c3%bcller"}, "edited": false, "score": 0, "creation_date": 1424870263, "post_id": 28718158, "comment_id": 45726807, "body": "You need to give more context. What library/ programming language are you working with? Post that code. Specifically: What is inside <code>$condition</code> and <code>$role_type</code>? What do you mean by &quot;clickable XPath&quot;?"}, {"owner": {"reputation": 3569, "user_id": 2462759, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/d328d4b61356d8e6c763e6bb40ada158?s=128&d=identicon&r=PG", "display_name": "paul", "link": "https://stackoverflow.com/users/2462759/paul"}, "reply_to_user": {"reputation": 20027, "user_id": 1987598, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/s3j3n.jpg?s=128&g=1", "display_name": "Mathias M&#252;ller", "link": "https://stackoverflow.com/users/1987598/mathias-m%c3%bcller"}, "edited": false, "score": 0, "creation_date": 1424871362, "post_id": 28718158, "comment_id": 45727574, "body": "@Mathia Muller Done. <code>$role_type</code> and <code>$condition</code> are strings. Clickable means , clicking the a tag there."}, {"owner": {"reputation": 20027, "user_id": 1987598, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/s3j3n.jpg?s=128&g=1", "display_name": "Mathias M&#252;ller", "link": "https://stackoverflow.com/users/1987598/mathias-m%c3%bcller"}, "edited": false, "score": 1, "creation_date": 1424871739, "post_id": 28718158, "comment_id": 45727859, "body": "Post <i>all</i> of that code, or at least a <a href=\"http://stackoverflow.com/help/mcve\">minimal, complete and verifiable sample</a>. And tag the question with the languages you use."}, {"owner": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "edited": false, "score": 0, "creation_date": 1424892914, "post_id": 28718158, "comment_id": 45742286, "body": "I think you might be out of luck for using XPath as I do not believe there is a string concatenation feature. Does it really have to be a single XPath - ie are you allowed to make use of additional Watir and Ruby functionality?"}, {"owner": {"reputation": 3569, "user_id": 2462759, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/d328d4b61356d8e6c763e6bb40ada158?s=128&d=identicon&r=PG", "display_name": "paul", "link": "https://stackoverflow.com/users/2462759/paul"}, "reply_to_user": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "edited": false, "score": 0, "creation_date": 1424896200, "post_id": 28718158, "comment_id": 45744158, "body": "@JustinKo 1. I dunno using <code>xpath</code> as identified is good idea or not (I am new to <code>WATIR+Cucumber</code>). 2. Yes sure I can use any identifier but I am comfortable with <code>xpath</code> so I have been using it. which identifier would you personally suggest for <code>WATIR+Cucumber</code> 3. Yes I am allowed to do what you are ideating here, I never thought of that. What I wanted was, I wanted to pass two parameter in this method one is &quot;role_type&quot; another is &quot;condition&quot; which would generate xpath for me at run time, as xpath remains same its just these two parameters changes."}, {"owner": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "edited": false, "score": 0, "creation_date": 1424896426, "post_id": 28718158, "comment_id": 45744296, "body": "Are you trying to click the link (as suggested by <code>browser.link.click</code>) or the paragraph tag (as that is what xpath examples are returning)?"}, {"owner": {"reputation": 6589, "user_id": 409820, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b01ab32f3a9016b9e2ade35f3aeb4023?s=128&d=identicon&r=PG", "display_name": "Chuck van der Linden", "link": "https://stackoverflow.com/users/409820/chuck-van-der-linden"}, "edited": false, "score": 0, "creation_date": 1424919520, "post_id": 28718158, "comment_id": 45752876, "body": "I think you need to be more clear as to what you want to accomplish.  Is there more than one div with &quot;configure&quot; for the class?  Is there more than one link with &quot;student&quot; as part of its class?  Is the text in the spans of the paragraph sibling of the link important or part of the criteria for finding the right link to click?  Does that text appear next to other links that do not have class student?"}], "answers": [{"comments": [{"owner": {"reputation": 3569, "user_id": 2462759, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/d328d4b61356d8e6c763e6bb40ada158?s=128&d=identicon&r=PG", "display_name": "paul", "link": "https://stackoverflow.com/users/2462759/paul"}, "edited": false, "score": 0, "creation_date": 1424899023, "post_id": 28729251, "comment_id": 45745722, "body": "while you were away, I was also discussing with one of friend and he sent this to me, but I didnt gets whats going on here.<code>link_class = span_element(:text =&gt; $condition).parent.attribute(&quot;class&quot;)     config_state = link_class[&#47;student&#47;]</code> and then <code>@browser.span(:text =&gt; $condition).parent.click</code> Would you please care to compare both his and your solution in your answer, which is best practice, and how it is written. I really appreciate that."}, {"owner": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "reply_to_user": {"reputation": 3569, "user_id": 2462759, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/d328d4b61356d8e6c763e6bb40ada158?s=128&d=identicon&r=PG", "display_name": "paul", "link": "https://stackoverflow.com/users/2462759/paul"}, "edited": false, "score": 0, "creation_date": 1424901455, "post_id": 28729251, "comment_id": 45747074, "body": "I can see what your friend is doing, though I think there is some missing code - eg <code>config_state</code> is not actually used. I do not think that either approach is a better practice. However, I would argue <code>link_class[&#47;student&#47;]</code> is not ideal since it will match classes that include &quot;student&quot; not just those with the class &quot;student&quot;."}, {"owner": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "reply_to_user": {"reputation": 3569, "user_id": 2462759, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/d328d4b61356d8e6c763e6bb40ada158?s=128&d=identicon&r=PG", "display_name": "paul", "link": "https://stackoverflow.com/users/2462759/paul"}, "edited": false, "score": 1, "creation_date": 1424902476, "post_id": 28729251, "comment_id": 45747532, "body": "Actually, I do not think your colleague&#39;s <code>@browser.span(:text =&gt; $condition).parent.click</code> will work. It assumes that the &quot;Never logged as admin.&quot; text is in a single span rather than multiples. Maybe they meant to check the paragraph tag - <code>@browser.p(:text =&gt; $condition).parent.click</code>?"}, {"owner": {"reputation": 3569, "user_id": 2462759, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/d328d4b61356d8e6c763e6bb40ada158?s=128&d=identicon&r=PG", "display_name": "paul", "link": "https://stackoverflow.com/users/2462759/paul"}, "edited": false, "score": 0, "creation_date": 1424922488, "post_id": 28729251, "comment_id": 45753558, "body": "Thanks @JustinKo and Chuck . I appreciate you give valuable advice."}], "tags": [], "owner": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "is_accepted": true, "score": 1, "last_activity_date": 1424897219, "creation_date": 1424897219, "answer_id": 28729251, "question_id": 28718158, "link": "https://stackoverflow.com/questions/28718158/write-clickable-xpath-for-entire-text-in-different-span-tags-but-under-one-p/28729251#28729251", "title": "Write clickable xpath for entire text in different &quot;span&quot; tags but under one &quot;p&quot; tag", "body": "<p>I think you might be out of luck for using XPath as I do not believe there is a string concatenation feature (at least in XPath 1.0). </p>\n\n<p>Instead, I would use other Watir and Ruby methods. For example, the following will go through the config div elements and find the one that contains the role link and condition text. From the found element, you can then click its link.</p>\n\n<pre><code>$role_type = 'student'\n$condition = 'Never logged as admin.'\n\nconfig = browser.divs(class: 'config').find do |div|\n    div.link(class: $role_type).exists? &amp;&amp; div.p(text: $condition).exists?\nend\nconfig.link.click\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 6589, "user_id": 409820, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b01ab32f3a9016b9e2ade35f3aeb4023?s=128&d=identicon&r=PG", "display_name": "Chuck van der Linden", "link": "https://stackoverflow.com/users/409820/chuck-van-der-linden"}, "is_accepted": false, "score": 0, "last_activity_date": 1424920195, "creation_date": 1424920195, "answer_id": 28733796, "question_id": 28718158, "link": "https://stackoverflow.com/questions/28718158/write-clickable-xpath-for-entire-text-in-different-span-tags-but-under-one-p/28733796#28733796", "title": "Write clickable xpath for entire text in different &quot;span&quot; tags but under one &quot;p&quot; tag", "body": "<p>If you just want to locate the first link that is next to \"Never logged on as admin\", then </p>\n\n<p>@browser.p(:text => \"Never logged as admin\").parent.link.click</p>\n\n<p>Otherwise, an approach such as Justin's answer might be needed. </p>\n"}], "owner": {"reputation": 3569, "user_id": 2462759, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/d328d4b61356d8e6c763e6bb40ada158?s=128&d=identicon&r=PG", "display_name": "paul", "link": "https://stackoverflow.com/users/2462759/paul"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 344, "favorite_count": 0, "accepted_answer_id": 28729251, "answer_count": 2, "score": 0, "last_activity_date": 1424920195, "creation_date": 1424864589, "last_edit_date": 1495540616, "question_id": 28718158, "link": "https://stackoverflow.com/questions/28718158/write-clickable-xpath-for-entire-text-in-different-span-tags-but-under-one-p", "title": "Write clickable xpath for entire text in different &quot;span&quot; tags but under one &quot;p&quot; tag", "body": "<p>Here's <code>xpath</code> that I wrote but it is of not optimum <code>xpath expression</code>, I think.</p>\n\n<p><code>//div[contains(@class,'config')]/a[contains(.,'student')]/../p[contains(.,'Never logged as ') and contains(.,'admin')]</code></p>\n\n<p>HTML is this:</p>\n\n<pre><code>&lt;div class=\"config\"&gt;\n  &lt;a class=\"something student something \" href=\"something\" htmlelement = \"something\"&gt;\n     &lt;div class=\"bla bla\"/&gt;\n     &lt;div class=\"bla bls&gt; xyz &lt;/div&gt;\n     &lt;div class=\"bla blab\"&gt;abc&lt;/div&gt;\n     &lt;span&gt;Allow it&lt;/span&gt;\n  &lt;/a&gt;\n  &lt;p&gt;\n     &lt;span&gt;Never logged as&lt;/span&gt;\n     &lt;span class=\"b\"&gt;admin.&lt;/span&gt;\n     &lt;img src=\"/images/info.png\"/&gt;\n  &lt;/p&gt;\n  &lt;div class=\"bla bla\"&gt;qwerty&lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>Now what I want is to write a generic <code>xpath</code> like this:\n<code>//div[contains(@class,'config')]/a[not(contains(.,'#{$role_type}'))]/../p[contains(.,'#{$condition}')]</code></p>\n\n<p>and click on this:\n<code>@browser.link(:xpath =&gt; my_xpath).when_present.click</code></p>\n\n<p>I am passing only two parameters in above <code>xpath</code> \"role_type\" and \"condition\", but when I do that it fails to identify it, because text \"admin\" is in another span.</p>\n\n<p>So how to collect entire span text? I tried this <a href=\"https://stackoverflow.com/questions/10424117/xpath-expression-for-selecting-all-text-in-a-given-node-and-the-text-of-its-chl\">XPath expression for selecting all text in a given node, and the text of its chldren</a> post too, but here it is giving string as output but I want clickable element not string.</p>\n\n<p>I am using WATIR (Ruby+Cucumber)</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord"], "comments": [{"owner": {"reputation": 109029, "user_id": 2767755, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/BkC8q.jpg?s=128&g=1", "display_name": "Arup Rakshit", "link": "https://stackoverflow.com/users/2767755/arup-rakshit"}, "edited": false, "score": 0, "creation_date": 1424861575, "post_id": 28717071, "comment_id": 45721469, "body": "If exist what and delete what ?"}, {"owner": {"reputation": 475, "user_id": 1850179, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d0ab94df325ad33ca5ab7ded30b98f02?s=128&d=identicon&r=PG", "display_name": "Niklas", "link": "https://stackoverflow.com/users/1850179/niklas"}, "reply_to_user": {"reputation": 109029, "user_id": 2767755, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/BkC8q.jpg?s=128&g=1", "display_name": "Arup Rakshit", "link": "https://stackoverflow.com/users/2767755/arup-rakshit"}, "edited": false, "score": 0, "creation_date": 1424861750, "post_id": 28717071, "comment_id": 45721575, "body": "If the favorite by a user for a certain tip exists. The combination of user and tip is unique."}, {"owner": {"reputation": 899, "user_id": 1986039, "user_type": "registered", "accept_rate": 26, "profile_image": "https://i.stack.imgur.com/lLSu0.jpg?s=128&g=1", "display_name": "Developer", "link": "https://stackoverflow.com/users/1986039/developer"}, "edited": false, "score": 1, "creation_date": 1424861910, "post_id": 28717071, "comment_id": 45721676, "body": "Describe more? the question is not clear, also i got it like, you need to delete if the Tip exists and else you need to create that?"}, {"owner": {"reputation": 475, "user_id": 1850179, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d0ab94df325ad33ca5ab7ded30b98f02?s=128&d=identicon&r=PG", "display_name": "Niklas", "link": "https://stackoverflow.com/users/1850179/niklas"}, "edited": false, "score": 0, "creation_date": 1424862319, "post_id": 28717071, "comment_id": 45721903, "body": "I updated my question. I hope my description is more clear now."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 2, "creation_date": 1424862398, "post_id": 28717071, "comment_id": 45721963, "body": "I don&#39;t think a &quot;toggle&quot; is RESTful, I&#39;d use separate PUT and DELETE actions."}, {"owner": {"reputation": 475, "user_id": 1850179, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d0ab94df325ad33ca5ab7ded30b98f02?s=128&d=identicon&r=PG", "display_name": "Niklas", "link": "https://stackoverflow.com/users/1850179/niklas"}, "edited": false, "score": 0, "creation_date": 1424862444, "post_id": 28717071, "comment_id": 45721986, "body": "This is a good point (y)"}, {"owner": {"reputation": 30655, "user_id": 138557, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/73c04e9ef9ca435c5b19a2e765ae6d20?s=128&d=identicon&r=PG", "display_name": "Max Williams", "link": "https://stackoverflow.com/users/138557/max-williams"}, "edited": false, "score": 0, "creation_date": 1424862510, "post_id": 28717071, "comment_id": 45722026, "body": "Definitely separate create and delete actions, otherwise you run the risk of deleting when the user thought they were creating and vice versa."}, {"owner": {"reputation": 475, "user_id": 1850179, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d0ab94df325ad33ca5ab7ded30b98f02?s=128&d=identicon&r=PG", "display_name": "Niklas", "link": "https://stackoverflow.com/users/1850179/niklas"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1424862796, "post_id": 28717071, "comment_id": 45722197, "body": "@Stefan Could you create an answer? I would like to mark it as accepted."}], "answers": [{"comments": [{"owner": {"reputation": 475, "user_id": 1850179, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d0ab94df325ad33ca5ab7ded30b98f02?s=128&d=identicon&r=PG", "display_name": "Niklas", "link": "https://stackoverflow.com/users/1850179/niklas"}, "edited": false, "score": 0, "creation_date": 1424862674, "post_id": 28717422, "comment_id": 45722124, "body": "Something like this was my initial idea. I thought about a very short way to do this. But as Stefan commented under my post, seperate routes are the better way to go."}, {"owner": {"reputation": 109029, "user_id": 2767755, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/BkC8q.jpg?s=128&g=1", "display_name": "Arup Rakshit", "link": "https://stackoverflow.com/users/2767755/arup-rakshit"}, "edited": false, "score": 1, "creation_date": 1424863686, "post_id": 28717422, "comment_id": 45722694, "body": "<code>@fav !=nil</code> can be written as <code>@fav.present?</code>"}, {"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 2, "creation_date": 1424864507, "post_id": 28717422, "comment_id": 45723164, "body": "@angu: Yes, but it makes sense to use Ruby idioms if you write Ruby code, and <code>foo != nil</code> is not Ruby-sh."}, {"owner": {"reputation": 11597, "user_id": 473467, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/2270d703967bfebb9cb555f85b3bb56b?s=128&d=identicon&r=PG", "display_name": "awendt", "link": "https://stackoverflow.com/users/473467/awendt"}, "edited": false, "score": 0, "creation_date": 1424868898, "post_id": 28717422, "comment_id": 45725910, "body": "You can abbreviate the condition to <code>if @fav</code>"}], "tags": [], "owner": {"reputation": 782, "user_id": 2696509, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/qrKcd.jpg?s=128&g=1", "display_name": "Angu", "link": "https://stackoverflow.com/users/2696509/angu"}, "is_accepted": false, "score": 1, "last_activity_date": 1424862480, "creation_date": 1424862480, "answer_id": 28717422, "question_id": 28717071, "link": "https://stackoverflow.com/questions/28717071/best-way-with-activerecord-if-exists-then-delete-else-create/28717422#28717422", "title": "Best way with ActiveRecord: If exists then delete else create", "body": "<p>try this. it may useful for you</p>\n\n<pre><code>def favorite\n  @tip = Tip.find(params[:id])\n  @fav=Favorite.where(user: current_user, tip: @tip)\n  if @fav !=nil\n     @fav.destroy\n  else\n      Favorite.create(user: current_user, tip: @tip)\n  end\n\n  redirect_to :action =&gt; \"show\", :id =&gt; @tip.id\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 7638, "user_id": 1014251, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/1c4500c91af486c885af8bb84eefd063?s=128&d=identicon&r=PG", "display_name": "ReggieB", "link": "https://stackoverflow.com/users/1014251/reggieb"}, "is_accepted": false, "score": 0, "last_activity_date": 1424863147, "creation_date": 1424863147, "answer_id": 28717665, "question_id": 28717071, "link": "https://stackoverflow.com/questions/28717071/best-way-with-activerecord-if-exists-then-delete-else-create/28717665#28717665", "title": "Best way with ActiveRecord: If exists then delete else create", "body": "<p>Stealing from everyone else's answers and using find_by</p>\n\n<pre><code>def favourite\n  @tip = Tip.find(params[:id])\n  favourite = @tip.favourites.find_by(user_id: current_user.id)\n  if favourite\n    favourite.destroy\n  else\n    @tip.favorites &lt;&lt; Favorite.new(user_id: current_user.id)\n  end\n\n  redirect_to action: :show, id: @tip.id\nend\n</code></pre>\n\n<p>If you've got your routes set up using resources, the redirect will be</p>\n\n<pre><code>redirect_to @tip\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1531, "user_id": 976035, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/913e70d8b28f4ea2bd30a735e23d25b2?s=128&d=identicon&r=PG", "display_name": "Finks", "link": "https://stackoverflow.com/users/976035/finks"}, "is_accepted": false, "score": 0, "last_activity_date": 1424863434, "creation_date": 1424863434, "answer_id": 28717763, "question_id": 28717071, "link": "https://stackoverflow.com/questions/28717071/best-way-with-activerecord-if-exists-then-delete-else-create/28717763#28717763", "title": "Best way with ActiveRecord: If exists then delete else create", "body": "<p>I'd create a method in your <em>Favorite</em> model</p>\n\n<pre><code>def self.toggle_favorite(tip)\n  return tip.favorite.destroy if tip.favorite\n  tip.favorite.create(user: current_user)\nend\n</code></pre>\n\n<p>Then use that method in your controller</p>\n\n<pre><code>def favorite\n  @tip = Tip.find(params[:id])\n  Favorite.toggle_favorite(@tip)\n  redirect_to :action =&gt; \"show\", :id =&gt; @tip.id\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": false, "score": 1, "last_activity_date": 1424864265, "last_edit_date": 1424864265, "creation_date": 1424863959, "answer_id": 28717944, "question_id": 28717071, "link": "https://stackoverflow.com/questions/28717071/best-way-with-activerecord-if-exists-then-delete-else-create/28717944#28717944", "title": "Best way with ActiveRecord: If exists then delete else create", "body": "<p>IMHO \"complex\" logic like that belongs into a model:</p>\n\n<pre><code># in you Favorite model\ndef self.toggle(user, tip)\n  fav = where(user: user, tip: tip).first\n  fav.try(:destroy!) || create!(user: user, tip: tip)\nend\n\n# in your controller\ndef favorite\n  @tip = Tip.find(params[:id])\n  Favorite.toggle(current_user, @tip)\n\n  redirect_to :action =&gt; \"show\", :id =&gt; @tip.id\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 8871, "user_id": 4381282, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-rIutmC2tG4M/AAAAAAAAAAI/AAAAAAAAAE4/wicIrC8KhUs/photo.jpg?sz=128", "display_name": "Pawe\u0142 Dawczak", "link": "https://stackoverflow.com/users/4381282/pawe%c5%82-dawczak"}, "is_accepted": false, "score": 1, "last_activity_date": 1424865725, "creation_date": 1424865725, "answer_id": 28718542, "question_id": 28717071, "link": "https://stackoverflow.com/questions/28717071/best-way-with-activerecord-if-exists-then-delete-else-create/28718542#28718542", "title": "Best way with ActiveRecord: If exists then delete else create", "body": "<p>How about first_or_create (<a href=\"http://apidock.com/rails/ActiveRecord/Relation/first_or_create\" rel=\"nofollow\">Link</a>)? With that, this is how you can approach the problem:</p>\n\n<pre><code>def favorite\n  @tip = Tip.find(params[:id])\n  Favorite.where(user: current_user, tip: @tip).first_or_create\n  redirect_to :action =&gt; \"show\", :id =&gt; @tip.id\nend\n</code></pre>\n\n<p>This one might be tricky, so if there are any values you would like to pass to your Favorite object - regardless of creating or updating - you can do something like that:</p>\n\n<pre><code>def favorite\n  @tip = Tip.find(params[:id])\n  Favorite.where(user: current_user, tip: @tip).first_or_create do |favorite|\n    # favorite is the one found or the one that will be created\n    favorite.rating = 5 # just an example how you can use it\n  end\n  redirect_to :action =&gt; \"show\", :id =&gt; @tip.id\nend\n</code></pre>\n\n<p>The changes will be persisted, and you still have quite clean code (no need for any <code>if</code>'s).</p>\n\n<p>Hope that helps!</p>\n"}, {"tags": [], "owner": {"reputation": 4101, "user_id": 1482055, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/f4D9p.jpg?s=128&g=1", "display_name": "Milind", "link": "https://stackoverflow.com/users/1482055/milind"}, "is_accepted": false, "score": 0, "last_activity_date": 1424869581, "last_edit_date": 1424869581, "creation_date": 1424869266, "answer_id": 28719706, "question_id": 28717071, "link": "https://stackoverflow.com/questions/28717071/best-way-with-activerecord-if-exists-then-delete-else-create/28719706#28719706", "title": "Best way with ActiveRecord: If exists then delete else create", "body": "<p>You need to <strong>check</strong> whether user is <code>adding new or removing the existing</code> by passing <code>identifier</code> to the server which will check available entries.Such as here,i check if user is adding a tag or removing a tag by liking or disliking a tag,hence is pass <code>like/dislike identifier</code> along with the url and then use it ..</p>\n\n<p><strong>for example:Suppose user is  adding/editing /removing his favorite video tags.</strong></p>\n\n<pre><code>         def add_video_in_profile\n            ##get all available tags\n            @video_cat = VideoCategory.find_by_video_type params[:type]\n              if params[:rel]==\"Like\"\n              ##create new if not exits if like else delete selected item  \n             current_user.user_video_categories.find_or_create_by_video_category_id(:video_category_id=&gt;@video_cat.id) unless !current_user.user_video_categories.find_or_create_by_video_category_id(:video_category_id=&gt;@video_cat.id)            \n              else\n             ##delete selected item if dislike              \n            video_cat=current_user.user_video_categories.where(:video_category_id=&gt;@video_cat.id)\n                  video_cat.delete_all\n              end    \n            end\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1910, "user_id": 676788, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/16dfcfaa3f6405e9572cea3f88a68c56?s=128&d=identicon&r=PG", "display_name": "Nafaa Boutefer", "link": "https://stackoverflow.com/users/676788/nafaa-boutefer"}, "is_accepted": false, "score": 6, "last_activity_date": 1424873856, "last_edit_date": 1424873856, "creation_date": 1424873531, "answer_id": 28721211, "question_id": 28717071, "link": "https://stackoverflow.com/questions/28717071/best-way-with-activerecord-if-exists-then-delete-else-create/28721211#28721211", "title": "Best way with ActiveRecord: If exists then delete else create", "body": "<p>Try this, I think its the most concise solution:</p>\n\n<pre><code>def favorite\n  # Since this is about a favorite object, the main subject here \n  # is that favorite object, so you just need to deal with it\n  favorite = Favorite.find_or_initialize_by(user_id: current_user.id, tip_id: params[:id])\n  favorite.persisted? ? favorite.destroy : favorite.save\n  # I do not know if you should redirect to this tip if \n  # the associated favorite has been deleted \n  redirect_to favorite.tip\nend\n</code></pre>\n"}], "owner": {"reputation": 475, "user_id": 1850179, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d0ab94df325ad33ca5ab7ded30b98f02?s=128&d=identicon&r=PG", "display_name": "Niklas", "link": "https://stackoverflow.com/users/1850179/niklas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3156, "favorite_count": 1, "answer_count": 7, "score": 3, "last_activity_date": 1424873856, "creation_date": 1424861456, "last_edit_date": 1424862076, "question_id": 28717071, "link": "https://stackoverflow.com/questions/28717071/best-way-with-activerecord-if-exists-then-delete-else-create", "title": "Best way with ActiveRecord: If exists then delete else create", "body": "<p>I have this route to create a Favorite for a certain Tip:</p>\n\n<pre><code>def favorite\n  @tip = Tip.find(params[:id])\n  Favorite.create(user: current_user, tip: @tip)\n  redirect_to :action =&gt; \"show\", :id =&gt; @tip.id\nend\n</code></pre>\n\n<p>I want it to be more like a toggle. So: If a favorite from a user for a certain tip already exists then it should delete this favorite. If it's a new combination of user and tip, it should create a new favorite with these values.</p>\n\n<p>What is the best and most beautiful way to this?</p>\n"}, {"tags": ["ruby", "intellij-idea", "vagrant", "vagrantfile"], "owner": {"reputation": 751, "user_id": 1317961, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e5a544055a41ad60710ab38b7957536?s=128&d=identicon&r=PG", "display_name": "Swav", "link": "https://stackoverflow.com/users/1317961/swav"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 398, "favorite_count": 1, "answer_count": 0, "score": 5, "last_activity_date": 1424860409, "creation_date": 1424860409, "question_id": 28716721, "link": "https://stackoverflow.com/questions/28716721/intellij-idea-doesnt-recognise-vagrant-properties-when-editing-vagrantfile", "title": "IntelliJ IDEA doesn&#39;t recognise Vagrant properties when editing Vagrantfile", "body": "<p>I'm using IDEA 14 and have installed Ruby support to get syntax colouring for Vagrantfiles. Unfortunately it now complains about missing properties. From my very limited understanding of Ruby I think need to import some sort of dependency (Gem?) that would let IDEA know all the properties available, but I don't know how. In Javascript you could just list libraries for project and it would recognise and offer autocomplete. I tried looking for similar configuration option for Ruby but came up empty.\nI could just switch Inspections off, but I'd rather get it to help me than fight it.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 39050, "user_id": 2336231, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/d7kOQ.jpg?s=128&g=1", "display_name": "BroiSatse", "link": "https://stackoverflow.com/users/2336231/broisatse"}, "edited": false, "score": 1, "creation_date": 1424861057, "post_id": 28716708, "comment_id": 45721174, "body": "There is no need for explicit typecasting. Make a database column date column, rails will take care of the rest"}, {"owner": {"reputation": 1262, "user_id": 3898284, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/RG11s.jpg?s=128&g=1", "display_name": "Mani David", "link": "https://stackoverflow.com/users/3898284/mani-david"}, "reply_to_user": {"reputation": 39050, "user_id": 2336231, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/d7kOQ.jpg?s=128&g=1", "display_name": "BroiSatse", "link": "https://stackoverflow.com/users/2336231/broisatse"}, "edited": false, "score": 0, "creation_date": 1424861820, "post_id": 28716708, "comment_id": 45721626, "body": "if not typecasting the date value it is not saving into db, need to format to (&#39;yy-mm-dd&#39;)"}, {"owner": {"reputation": 39050, "user_id": 2336231, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/d7kOQ.jpg?s=128&g=1", "display_name": "BroiSatse", "link": "https://stackoverflow.com/users/2336231/broisatse"}, "edited": false, "score": 0, "creation_date": 1424862075, "post_id": 28716708, "comment_id": 45721764, "body": "Try it: just assign a string to a attribute and then read this attribute back - rails automatically converts it into a date for you. Typecasting happens on assignment, not on saving. Unless of course I don&#39;t understand what you&#39;re trying to achieve."}], "answers": [{"comments": [{"owner": {"reputation": 1262, "user_id": 3898284, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/RG11s.jpg?s=128&g=1", "display_name": "Mani David", "link": "https://stackoverflow.com/users/3898284/mani-david"}, "edited": false, "score": 0, "creation_date": 1424862657, "post_id": 28716911, "comment_id": 45722111, "body": "no , if i have value &quot;04-08-2015&quot;, &quot;04-08-2015&quot;.to_date returning Tue, 04 Aug 2015 instead  of  Wed, 08 Apr 2015"}, {"owner": {"reputation": 476, "user_id": 3265018, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/44fdc79b5bd971ee83c566ddcaba9bf2?s=128&d=identicon&r=PG&f=1", "display_name": "VDN", "link": "https://stackoverflow.com/users/3265018/vdn"}, "reply_to_user": {"reputation": 1262, "user_id": 3898284, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/RG11s.jpg?s=128&g=1", "display_name": "Mani David", "link": "https://stackoverflow.com/users/3898284/mani-david"}, "edited": false, "score": 0, "creation_date": 1424929311, "post_id": 28716911, "comment_id": 45755368, "body": "&quot;04-28-2015&quot;(mm-dd-yy) this format is wrong try to use dd-mm-yy or yy-mm-dd"}, {"owner": {"reputation": 1262, "user_id": 3898284, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/RG11s.jpg?s=128&g=1", "display_name": "Mani David", "link": "https://stackoverflow.com/users/3898284/mani-david"}, "edited": false, "score": 0, "creation_date": 1424936132, "post_id": 28716911, "comment_id": 45757757, "body": "&quot;04-28-2015&quot;(mm-dd-yy), i need this format only, its american date format. any other solution , to convert the american date format to db format"}, {"owner": {"reputation": 476, "user_id": 3265018, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/44fdc79b5bd971ee83c566ddcaba9bf2?s=128&d=identicon&r=PG&f=1", "display_name": "VDN", "link": "https://stackoverflow.com/users/3265018/vdn"}, "reply_to_user": {"reputation": 1262, "user_id": 3898284, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/RG11s.jpg?s=128&g=1", "display_name": "Mani David", "link": "https://stackoverflow.com/users/3898284/mani-david"}, "edited": false, "score": 0, "creation_date": 1424939690, "post_id": 28716911, "comment_id": 45759343, "body": "The following date format won\u2019t be parsed correctly &#39;04/28/2015&quot;.to_date ..As per i know strptime is only the solution to convert ...Date.strptime(&quot;04/28/2015&quot;, &#39;%m/%d/%Y&#39;)"}], "tags": [], "owner": {"reputation": 476, "user_id": 3265018, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/44fdc79b5bd971ee83c566ddcaba9bf2?s=128&d=identicon&r=PG&f=1", "display_name": "VDN", "link": "https://stackoverflow.com/users/3265018/vdn"}, "is_accepted": false, "score": 0, "last_activity_date": 1424861058, "creation_date": 1424861058, "answer_id": 28716911, "question_id": 28716708, "link": "https://stackoverflow.com/questions/28716708/parse-string-into-date-in-rails-without-view-helper/28716911#28716911", "title": "Parse string into date in rails without view helper", "body": "<p>You can use <code>to_date</code> to convert string into date.</p>\n\n<p>Eg: <code>\"01-01-2015\".to_date</code> </p>\n"}, {"comments": [{"owner": {"reputation": 1262, "user_id": 3898284, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/RG11s.jpg?s=128&g=1", "display_name": "Mani David", "link": "https://stackoverflow.com/users/3898284/mani-david"}, "edited": false, "score": 0, "creation_date": 1424862982, "post_id": 28717152, "comment_id": 45722299, "body": "ex: i have string &quot;04-08-2015&quot; with format of (&quot;mm-dd-yy&quot;) , if i use &quot;04-08-2015&quot;.to_date.to_s its returning 2015-08-04, instead i want the result to be &quot;2015-04-08&quot; (&quot;dd-mm-yy&quot;), using Date.strptime(value, &quot;%m-%d-%Y&quot;).to_s(:db) i can get the exact result , but without strptime how to achieve this?"}], "tags": [], "owner": {"reputation": 782, "user_id": 2696509, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/qrKcd.jpg?s=128&g=1", "display_name": "Angu", "link": "https://stackoverflow.com/users/2696509/angu"}, "is_accepted": false, "score": 0, "last_activity_date": 1424861753, "creation_date": 1424861753, "answer_id": 28717152, "question_id": 28716708, "link": "https://stackoverflow.com/questions/28716708/parse-string-into-date-in-rails-without-view-helper/28717152#28717152", "title": "Parse string into date in rails without view helper", "body": "<p>use it. i think this is helpful for you</p>\n\n<pre><code>date = DateTime.now\nputs date.to_date.to_s\n</code></pre>\n\n<p>Or</p>\n\n<pre><code>\"2011-05-19 10:30:14\".to_time\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1262, "user_id": 3898284, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/RG11s.jpg?s=128&g=1", "display_name": "Mani David", "link": "https://stackoverflow.com/users/3898284/mani-david"}, "is_accepted": true, "score": 0, "last_activity_date": 1425364366, "creation_date": 1425364366, "answer_id": 28825486, "question_id": 28716708, "link": "https://stackoverflow.com/questions/28716708/parse-string-into-date-in-rails-without-view-helper/28825486#28825486", "title": "Parse string into date in rails without view helper", "body": "<p>Used <strong>american_date</strong> gem, it automatically coverts american date format into ISO format. no need to use setter to format the date in model.</p>\n\n<pre><code>gem 'american_date'\n</code></pre>\n"}], "owner": {"reputation": 1262, "user_id": 3898284, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/RG11s.jpg?s=128&g=1", "display_name": "Mani David", "link": "https://stackoverflow.com/users/3898284/mani-david"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 540, "favorite_count": 0, "accepted_answer_id": 28825486, "answer_count": 3, "score": 0, "last_activity_date": 1425364366, "creation_date": 1424860373, "question_id": 28716708, "link": "https://stackoverflow.com/questions/28716708/parse-string-into-date-in-rails-without-view-helper", "title": "Parse string into date in rails without view helper", "body": "<p>i am converting string into date in my rails application model before saving it into database, how to achieve this using without </p>\n\n<blockquote>\n  <p>strptime</p>\n</blockquote>\n\n<p>because strptime purpose is to format and used for views and helpers .</p>\n\n<p>string format:</p>\n\n<pre><code>\"04-28-2015\"(mm-dd-yy)\n</code></pre>\n\n<p>model:</p>\n\n<pre><code>def rent_commencement_date=(value)\n    self[:rent_commencement_date] = Date.strptime(value, \"%m-%d-%Y\").to_s(:db)\n end\n</code></pre>\n"}, {"tags": ["ruby", "jekyll", "liquid"], "comments": [{"owner": {"reputation": 46692, "user_id": 1548376, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qCZQw.gif?s=128&g=1", "display_name": "David Jacquel", "link": "https://stackoverflow.com/users/1548376/david-jacquel"}, "edited": false, "score": 1, "creation_date": 1424874766, "post_id": 28716551, "comment_id": 45729943, "body": "You can&#39;t use liquid variable in front matter."}, {"owner": {"reputation": 2773, "user_id": 1003288, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/b7c2d49748426791dc98b8214dfac9d1?s=128&d=identicon&r=PG", "display_name": "Jacob Tomlinson", "link": "https://stackoverflow.com/users/1003288/jacob-tomlinson"}, "reply_to_user": {"reputation": 46692, "user_id": 1548376, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qCZQw.gif?s=128&g=1", "display_name": "David Jacquel", "link": "https://stackoverflow.com/users/1548376/david-jacquel"}, "edited": false, "score": 0, "creation_date": 1424876639, "post_id": 28716551, "comment_id": 45731353, "body": "I gathered that, so what would be the neatest way of achieving this functionality?"}, {"owner": {"reputation": 7859, "user_id": 630752, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/FEk3H.jpg?s=128&g=1", "display_name": "Harry Moreno", "link": "https://stackoverflow.com/users/630752/harry-moreno"}, "edited": false, "score": 0, "creation_date": 1429126633, "post_id": 28716551, "comment_id": 47458201, "body": "What functionality? you&#39;d like a user declared var to be displayed where? the posts title?"}, {"owner": {"reputation": 2773, "user_id": 1003288, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/b7c2d49748426791dc98b8214dfac9d1?s=128&d=identicon&r=PG", "display_name": "Jacob Tomlinson", "link": "https://stackoverflow.com/users/1003288/jacob-tomlinson"}, "edited": false, "score": 0, "creation_date": 1429469318, "post_id": 28716551, "comment_id": 47601638, "body": "Yes that could be one example."}, {"owner": {"reputation": 928, "user_id": 3089208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EGDhE.jpg?s=128&g=1", "display_name": "AntK", "link": "https://stackoverflow.com/users/3089208/antk"}, "edited": false, "score": 0, "creation_date": 1445498051, "post_id": 28716551, "comment_id": 54351122, "body": "Unfortunately jeykll does not support liquid tags within front matter. You have a great work around though. Can you post it as an answer and mark it as correct to close the question"}], "answers": [{"tags": [], "owner": {"reputation": 2773, "user_id": 1003288, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/b7c2d49748426791dc98b8214dfac9d1?s=128&d=identicon&r=PG", "display_name": "Jacob Tomlinson", "link": "https://stackoverflow.com/users/1003288/jacob-tomlinson"}, "is_accepted": true, "score": 1, "last_activity_date": 1445502141, "creation_date": 1445502141, "answer_id": 33276417, "question_id": 28716551, "link": "https://stackoverflow.com/questions/28716551/page-frontmatter-assign-to-site-frontmatter-in-jekyll/33276417#33276417", "title": "Page frontmatter assign to site frontmatter in Jekyll", "body": "<p>It seems this isn't currently possible due to limitations of Jekyll.</p>\n\n<p>As a work around you can do something along these lines:</p>\n\n<pre><code>{% if page.github-id %}\n {{ page.github-id }}\n{% else %}\n {{ site.github-id }}\n{% endif %}\n</code></pre>\n"}], "owner": {"reputation": 2773, "user_id": 1003288, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/b7c2d49748426791dc98b8214dfac9d1?s=128&d=identicon&r=PG", "display_name": "Jacob Tomlinson", "link": "https://stackoverflow.com/users/1003288/jacob-tomlinson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 1, "accepted_answer_id": 33276417, "answer_count": 1, "score": 2, "last_activity_date": 1445502164, "creation_date": 1424859969, "last_edit_date": 1445502164, "question_id": 28716551, "link": "https://stackoverflow.com/questions/28716551/page-frontmatter-assign-to-site-frontmatter-in-jekyll", "title": "Page frontmatter assign to site frontmatter in Jekyll", "body": "<p>How do I use a variable from the site _config.yml in a posts frontmatter?</p>\n\n<p>I would like to do something like</p>\n\n<pre><code>---\ngithub-id: site.github-id\n---\n</code></pre>\n\n<p>However this literally sets it to the string \"site.github-id\".</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 230, "user_id": 2841683, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001623213146/picture?type=large", "display_name": "Eugene Tkachenko", "link": "https://stackoverflow.com/users/2841683/eugene-tkachenko"}, "edited": false, "score": 0, "creation_date": 1424859885, "post_id": 28716419, "comment_id": 45720506, "body": "The best way to write the helper which will have some condition(will verify you case t.machine_name == &#39;your_value&#39; &amp;&amp; t.machine_name == &#39;another_value&#39;) and return the content_tag with some data attribute which will have display: none or visible."}, {"owner": {"reputation": 778, "user_id": 281118, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/Ywbya.jpg?s=128&g=1", "display_name": "Paul", "link": "https://stackoverflow.com/users/281118/paul"}, "reply_to_user": {"reputation": 230, "user_id": 2841683, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001623213146/picture?type=large", "display_name": "Eugene Tkachenko", "link": "https://stackoverflow.com/users/2841683/eugene-tkachenko"}, "edited": false, "score": 0, "creation_date": 1424860283, "post_id": 28716419, "comment_id": 45720718, "body": "I guess that&#39;s a good idea, but what exactly would you check in your helper? I understand the &#39;&amp;&amp;&#39; statement. Do i have to loop through the object again?"}, {"owner": {"reputation": 1739, "user_id": 2863439, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7c95bb944bbbe597543ae8a88987995?s=128&d=identicon&r=PG&f=1", "display_name": "limekin", "link": "https://stackoverflow.com/users/2863439/limekin"}, "edited": false, "score": 0, "creation_date": 1424860499, "post_id": 28716419, "comment_id": 45720850, "body": "Do you want to check if all the taxons of product.taxons contains any of &#39;rush_delivery&#39; or &#39;customization_possible&#39; in their machine_names ?"}, {"owner": {"reputation": 778, "user_id": 281118, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/Ywbya.jpg?s=128&g=1", "display_name": "Paul", "link": "https://stackoverflow.com/users/281118/paul"}, "edited": false, "score": 0, "creation_date": 1424860717, "post_id": 28716419, "comment_id": 45720990, "body": "Hi limekin, Yes that is correct. Thanks for pronouncing it right ;)"}, {"owner": {"reputation": 1739, "user_id": 2863439, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7c95bb944bbbe597543ae8a88987995?s=128&d=identicon&r=PG&f=1", "display_name": "limekin", "link": "https://stackoverflow.com/users/2863439/limekin"}, "edited": false, "score": 0, "creation_date": 1424860789, "post_id": 28716419, "comment_id": 45721032, "body": "Np. It wasn&#39;t clear in the question. I think you can make that part clearer."}, {"owner": {"reputation": 1739, "user_id": 2863439, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7c95bb944bbbe597543ae8a88987995?s=128&d=identicon&r=PG&f=1", "display_name": "limekin", "link": "https://stackoverflow.com/users/2863439/limekin"}, "edited": false, "score": 0, "creation_date": 1424861767, "post_id": 28716419, "comment_id": 45721586, "body": "Since &#39;product.taxons&#39; is an array of objects, it would then mean checking for certain values in each of the objects in the array. Then iterations are necessary and at each iteration calling &#39;taxon.machine_name&#39; would be the best way to retrieve it&#39;s value. So I would go with just &quot;okay = product.taxons.all? { |taxon| [&#39;val1&#39;, &#39;val2&#39;].include? taxons.machine_name }&quot;."}], "answers": [{"comments": [{"owner": {"reputation": 778, "user_id": 281118, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/Ywbya.jpg?s=128&g=1", "display_name": "Paul", "link": "https://stackoverflow.com/users/281118/paul"}, "edited": false, "score": 0, "creation_date": 1424862536, "post_id": 28717303, "comment_id": 45722039, "body": "Hi spickerman, Thanks for you response! This seems to be the statement i was looking for. I agree its not best to place it in the template, so i will try to move this to the controller. But aside from that, i&#39;m glad to&#39;ve discovered this syntax."}, {"owner": {"reputation": 7251, "user_id": 2493089, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c34c815a19c6a2f6ed200cbd95503682?s=128&d=identicon&r=PG", "display_name": "SHS", "link": "https://stackoverflow.com/users/2493089/shs"}, "edited": false, "score": 0, "creation_date": 1424869629, "post_id": 28717303, "comment_id": 45726386, "body": "Might want to declare the array outside the block to prevent creating it repeatedly."}, {"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "reply_to_user": {"reputation": 7251, "user_id": 2493089, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c34c815a19c6a2f6ed200cbd95503682?s=128&d=identicon&r=PG", "display_name": "SHS", "link": "https://stackoverflow.com/users/2493089/shs"}, "edited": false, "score": 0, "creation_date": 1424895929, "post_id": 28717303, "comment_id": 45744003, "body": "@Humza: Sure thing. As I wrote, it makes sense to extract that logic into something - probably a presenter. In that case it is worth it to declare a for example constant that holds the list of special machine names."}], "tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": true, "score": 1, "last_activity_date": 1424862172, "creation_date": 1424862172, "answer_id": 28717303, "question_id": 28716419, "link": "https://stackoverflow.com/questions/28716419/ruby-check-if-certain-values-exist-in-object/28717303#28717303", "title": "Ruby - check if certain values exist in object", "body": "<p>So your conditions would look like this:</p>\n\n<pre><code>product.taxons.any? { |taxon| \n  ['rush_delivery', 'customization_possible'].include?(taxon.machine_name)\n}\n</code></pre>\n\n<p>I would argue that this kind of logic doesn't belong into a view. There a different ways to clean that up, it depends on your needs which way to choose: You could only load products with a matching machine_way in your controller. You may want to use a presenter object that encapsulate the logic or just more it into a helper.</p>\n"}], "owner": {"reputation": 778, "user_id": 281118, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/Ywbya.jpg?s=128&g=1", "display_name": "Paul", "link": "https://stackoverflow.com/users/281118/paul"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 651, "favorite_count": 0, "accepted_answer_id": 28717303, "answer_count": 1, "score": 1, "last_activity_date": 1424862172, "creation_date": 1424859578, "last_edit_date": 1424860942, "question_id": 28716419, "link": "https://stackoverflow.com/questions/28716419/ruby-check-if-certain-values-exist-in-object", "title": "Ruby - check if certain values exist in object", "body": "<p>I might be approaching this all wrong (i'm fairly new to Ruby), but can someone tell me how to check for certain values in an Object?</p>\n\n<p>I  want to check if any of the taxons in <code>product.taxons</code> contains any of 'rush_delivery' or 'customization_possible' in their machine_names.</p>\n\n<p>My template code:</p>\n\n<pre><code>&lt;div class=\"expanded\"&gt;\n    &lt;% product.taxons.each do |t| %&gt;\n      &lt;% if t.machine_name == 'rush_delivery' %&gt;\n        &lt;p class=\"icon icon-urgent\"&gt;\n          &lt;span class=\"tooltip\"&gt;&lt;%= Spree.t('usp.rush_delivery') %&gt;&lt;/span&gt;\n        &lt;/p&gt;\n      &lt;% end %&gt;\n      &lt;% if t.machine_name == 'customization_possible' %&gt;\n        &lt;p class=\"icon icon-customize\"&gt;\n          &lt;span class=\"tooltip\"&gt;&lt;%= Spree.t('usp.customization_possible') %&gt;&lt;/span&gt;\n        &lt;/p&gt;\n      &lt;% end %&gt;\n    &lt;% end %&gt;\n  &lt;/div&gt;\n</code></pre>\n\n<p>The goal is to add a hide class on the parent div if they do not exist.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3", "git-bash"], "answers": [{"tags": [], "owner": {"reputation": 6351, "user_id": 7255, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2396ea17e58a9a8e6149a963362737aa?s=128&d=identicon&r=PG", "display_name": "Steve Pitchers", "link": "https://stackoverflow.com/users/7255/steve-pitchers"}, "is_accepted": false, "score": 1, "last_activity_date": 1433163692, "last_edit_date": 1433163692, "creation_date": 1433162975, "answer_id": 30573940, "question_id": 28716257, "link": "https://stackoverflow.com/questions/28716257/gitbash-error-rbenv-cannot-find-readlink-are-you-missing-gnu-coreutils/30573940#30573940", "title": "Gitbash Error - rbenv: cannot find readlink - are you missing GNU coreutils?", "body": "<p>It is coming from here: <code>https://github.com/sstephenson/rbenv/blob/master/libexec/rbenv</code>.  Look in your <code>~/.rbenv</code> installation, specifically <code>~/.rbenv/libexec/rbenv</code>.  </p>\n\n<p>It happened to me because my Git for Windows installation lacks the <code>readlink</code> command.</p>\n\n<p>Try commenting out the READLINK section and replace <code>resolve_link</code> with this:</p>\n\n<pre><code>resolve_link() { sed -n -e 's/\\x00//g'  -e 's/\\!&lt;symlink&gt;..//p' $1; }\n</code></pre>\n\n<p>I still not sure this really works, though.</p>\n"}], "owner": {"reputation": 1130, "user_id": 4574914, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/c27823d944d6c2125057e337c8700b97?s=128&d=identicon&r=PG&f=1", "display_name": "joeyk16", "link": "https://stackoverflow.com/users/4574914/joeyk16"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 302, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1433163692, "creation_date": 1424859140, "question_id": 28716257, "link": "https://stackoverflow.com/questions/28716257/gitbash-error-rbenv-cannot-find-readlink-are-you-missing-gnu-coreutils", "title": "Gitbash Error - rbenv: cannot find readlink - are you missing GNU coreutils?", "body": "<p>Hello when i open git hub i get an error right at the top.</p>\n\n<p>It literally looks like this:</p>\n\n<pre><code>rbenv: cannot find readlink - are you missing GNU coreutils?\nrbenv: cannot find readlink - are you missing GNU coreutils?\n\nJoey@JOEY-PC /c/Sites (master)\n</code></pre>\n\n<p>$</p>\n\n<p>Everything was working great before i installed rubyinstall 1.9.3.</p>\n\n<p>Then my local server wasn't working when i tried to run a new website im making.</p>\n\n<p>So i reverted back to ruby 2.1.5p273 by running rubyinstaller 2.1.5</p>\n\n<p>Anyone know what the problem is?</p>\n\n<p>Here is what my server looks like when once the above error started to appear on gitbash</p>\n\n<p><a href=\"http://i57.tinypic.com/b5p7nm.jpg\" rel=\"nofollow\">http://i57.tinypic.com/b5p7nm.jpg</a></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "printing"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1424860291, "post_id": 28716166, "comment_id": 45720724, "body": "<i>&quot;look, feel and behave&quot;</i> - the printout didn&#39;t feel and behave as expected? Please elaborate."}, {"owner": {"reputation": 9125, "user_id": 671422, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/85da2a1fa3e4017815ff5d3a3d70fabe?s=128&d=identicon&r=PG", "display_name": "Yule", "link": "https://stackoverflow.com/users/671422/yule"}, "edited": false, "score": 0, "creation_date": 1424861137, "post_id": 28716166, "comment_id": 45721226, "body": "Please explain what you are expecting and what you are getting. Also some example code would help"}, {"owner": {"reputation": 127, "user_id": 2515011, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/87758a912ef7df60f48a566ffdf3ac4c?s=128&d=identicon&r=PG", "display_name": "user2515011", "link": "https://stackoverflow.com/users/2515011/user2515011"}, "edited": false, "score": 0, "creation_date": 1424861308, "post_id": 28716166, "comment_id": 45721318, "body": "To the look, feel and behave aspect, the compression (no of characters per line) was not as expected when comparing to an existing dot matrix report - the charters were more spread out."}, {"owner": {"reputation": 127, "user_id": 2515011, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/87758a912ef7df60f48a566ffdf3ac4c?s=128&d=identicon&r=PG", "display_name": "user2515011", "link": "https://stackoverflow.com/users/2515011/user2515011"}, "edited": false, "score": 0, "creation_date": 1424861379, "post_id": 28716166, "comment_id": 45721365, "body": "In terms of sample code, I can export as CSV, write to a txt file, the question is, is there a way to write to a file in ASCII mode?"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1424861405, "post_id": 28716166, "comment_id": 45721382, "body": "Is the printer connected to the server (where the app is running) or to the client?"}, {"owner": {"reputation": 127, "user_id": 2515011, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/87758a912ef7df60f48a566ffdf3ac4c?s=128&d=identicon&r=PG", "display_name": "user2515011", "link": "https://stackoverflow.com/users/2515011/user2515011"}, "edited": false, "score": 0, "creation_date": 1424925341, "post_id": 28716166, "comment_id": 45754234, "body": "Stefan - Its connected to the client - so need to download an ascii encoded file... ( unless there is another way to do it)"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1424965296, "post_id": 28716166, "comment_id": 45775506, "body": "What is an &quot;ascii encoded file&quot;?"}, {"owner": {"reputation": 127, "user_id": 2515011, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/87758a912ef7df60f48a566ffdf3ac4c?s=128&d=identicon&r=PG", "display_name": "user2515011", "link": "https://stackoverflow.com/users/2515011/user2515011"}, "edited": false, "score": 0, "creation_date": 1424968254, "post_id": 28716166, "comment_id": 45777532, "body": "Looks like  opening the file in binary mode works..... that being said....the file needs to be opened in dos mode  &#39;edit &lt;filename&gt;&#39; before printing. If it&#39;s opened in notepad, the result will not be as expected"}], "owner": {"reputation": 127, "user_id": 2515011, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/87758a912ef7df60f48a566ffdf3ac4c?s=128&d=identicon&r=PG", "display_name": "user2515011", "link": "https://stackoverflow.com/users/2515011/user2515011"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 278, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1424858890, "creation_date": 1424858890, "question_id": 28716166, "link": "https://stackoverflow.com/questions/28716166/printing-to-a-dot-matrix-printer-from-a-rails-application", "title": "Printing to a dot matrix printer from a rails application", "body": "<p>I'm looking to print reports from a rails 4 web app to a dot matrix printer.\nI tried exporting to a text file and printing it, but no luck.. i.e. it did not look, feel and behave the same.\nThe rationale for doing this is printing large reports quickly using existing infrastructure that the client has.</p>\n\n<p>Appreciate any help I can get......</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["ruby", "regex"], "comments": [{"owner": {"reputation": 159902, "user_id": 3297613, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/KHhzd.jpg?s=128&g=1", "display_name": "Avinash Raj", "link": "https://stackoverflow.com/users/3297613/avinash-raj"}, "edited": false, "score": 0, "creation_date": 1424857957, "post_id": 28715837, "comment_id": 45719310, "body": "What&#39;s your expected output? did you want to match also the letters other than <code>[A-Z]</code> ?"}, {"owner": {"reputation": 806, "user_id": 3019122, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/606ad1200726e93700e6418c8b4b93d4?s=128&d=identicon&r=PG&f=1", "display_name": "n32303", "link": "https://stackoverflow.com/users/3019122/n32303"}, "reply_to_user": {"reputation": 159902, "user_id": 3297613, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/KHhzd.jpg?s=128&g=1", "display_name": "Avinash Raj", "link": "https://stackoverflow.com/users/3297613/avinash-raj"}, "edited": false, "score": 0, "creation_date": 1424857969, "post_id": 28715837, "comment_id": 45719313, "body": "I want to match:  HEADING and also: HEADING \u010c\u017d\u0160, but I thought those letters are already matched in [A-Z], but doesnt look like it.."}], "answers": [{"comments": [{"owner": {"reputation": 806, "user_id": 3019122, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/606ad1200726e93700e6418c8b4b93d4?s=128&d=identicon&r=PG&f=1", "display_name": "n32303", "link": "https://stackoverflow.com/users/3019122/n32303"}, "edited": false, "score": 0, "creation_date": 1424859503, "post_id": 28716037, "comment_id": 45720293, "body": "How would I use string split so that it splits, lets say recipes, from text.. such as: RECIPE ONE use this and this and this RECIPE TWO this and other  I would like to split text by heading into recipes.."}, {"owner": {"reputation": 24966, "user_id": 2001031, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/bd4f0d39f82be9c22f6f01c80d7ad800?s=128&d=identicon&r=PG", "display_name": "Neil Slater", "link": "https://stackoverflow.com/users/2001031/neil-slater"}, "reply_to_user": {"reputation": 806, "user_id": 3019122, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/606ad1200726e93700e6418c8b4b93d4?s=128&d=identicon&r=PG&f=1", "display_name": "n32303", "link": "https://stackoverflow.com/users/3019122/n32303"}, "edited": false, "score": 1, "creation_date": 1424860247, "post_id": 28716037, "comment_id": 45720701, "body": "@NejcLovrencic: That seems like a new question to me, please don&#39;t extend your question with next parts of your project. Maybe you could look at Ruby&#39;s <code>String#split</code> and <code>String#scan</code> methods as possible starting points."}], "tags": [], "owner": {"reputation": 24966, "user_id": 2001031, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/bd4f0d39f82be9c22f6f01c80d7ad800?s=128&d=identicon&r=PG", "display_name": "Neil Slater", "link": "https://stackoverflow.com/users/2001031/neil-slater"}, "is_accepted": true, "score": 5, "last_activity_date": 1424858500, "creation_date": 1424858500, "answer_id": 28716037, "question_id": 28715837, "link": "https://stackoverflow.com/questions/28715837/regex-for-capital-letters-not-matching-accented-characters/28716037#28716037", "title": "Regex for capital letters not matching accented characters", "body": "<p>You are right in that when you define the ASCII range <code>A-Z</code>, the match is made literally only for those characters. This is to do with the history of characters on computers, more and more characters have been added over time, and they are not always structured in an encoding in ways that are easy to use.</p>\n\n<p>You <em>could</em> make a larger character class that matches the slovenian characters you need, by listing them.</p>\n\n<p>But there is a shortcut. Someone else has already added necessary data to the Unicode data so that you can write shorter matches for \"all uppercase characters\":  <code>/[[:upper:]]/</code>. See <a href=\"http://ruby-doc.org//core-2.1.4/Regexp.html\" rel=\"noreferrer\">http://ruby-doc.org//core-2.1.4/Regexp.html</a> for more.</p>\n\n<p>Altering your regular expression with just this adjustment:</p>\n\n<pre><code>^[[:upper:]]{2,}\\s?([[:upper:]]{2,}\\s?)*$\n</code></pre>\n\n<p>You may need to adjust it further, for instance it would not match the heading \"I AM A HEADING\" due to the match insisting each word is at least two letters long.</p>\n\n<p>Without seeing all your examples, I would probably simplify the group matching and just allow spaces anywhere:</p>\n\n<pre><code>^[[:upper:]\\s]+$\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 658033, "user_id": 548225, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/dab08478b226280d4a30894c9a7ed719?s=128&d=identicon&r=PG", "display_name": "anubhava", "link": "https://stackoverflow.com/users/548225/anubhava"}, "is_accepted": false, "score": 2, "last_activity_date": 1424858694, "creation_date": 1424858694, "answer_id": 28716093, "question_id": 28715837, "link": "https://stackoverflow.com/questions/28715837/regex-for-capital-letters-not-matching-accented-characters/28716093#28716093", "title": "Regex for capital letters not matching accented characters", "body": "<p>You can use unicode upper case letter:</p>\n\n<pre><code>\\p{Lu}\n</code></pre>\n\n<p>Your regex:</p>\n\n<pre><code>\\b\\p{Lu}{2,}(?:\\s*\\p{Lu}{2,})\\b\n</code></pre>\n\n<p><a href=\"http://rubular.com/r/8m6s4uMB5g\" rel=\"nofollow\">RegEx Demo</a></p>\n"}], "owner": {"reputation": 806, "user_id": 3019122, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/606ad1200726e93700e6418c8b4b93d4?s=128&d=identicon&r=PG&f=1", "display_name": "n32303", "link": "https://stackoverflow.com/users/3019122/n32303"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1125, "favorite_count": 0, "accepted_answer_id": 28716037, "answer_count": 2, "score": 3, "last_activity_date": 1424859146, "creation_date": 1424857847, "last_edit_date": 1424859146, "question_id": 28715837, "link": "https://stackoverflow.com/questions/28715837/regex-for-capital-letters-not-matching-accented-characters", "title": "Regex for capital letters not matching accented characters", "body": "<p>I am new to ruby and I'm trying to work with regex.</p>\n\n<p>I have a text which looks something like:</p>\n\n<pre><code>HEADING\n\nSome text which is always non capitalized. Headings are always capitalized,     followed by a space or nothing more.\n\nYOU CAN HAVE MULTIPLE WORDS IN HEADING\n</code></pre>\n\n<p>I'm using this regular expression to choose all headings:</p>\n\n<pre><code>^[A-Z]{2,}\\s?([A-Z]{2,}\\s?)*$\n</code></pre>\n\n<p>However, it matches all headings which does not contain chars as \u010c, \u0160, \u017d(slovenian characters).</p>\n\n<p>So I'm guessing [A-Z] only matches ASCII characters? How could I get utf8?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "answers": [{"comments": [{"owner": {"reputation": 1573, "user_id": 1716509, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/d615c9a0edef754228265dd35539245e?s=128&d=identicon&r=PG", "display_name": "Kristoffer", "link": "https://stackoverflow.com/users/1716509/kristoffer"}, "edited": false, "score": 0, "creation_date": 1424865392, "post_id": 28715733, "comment_id": 45723703, "body": "Maybe this is quite a good workaround, but instead I should be able to respond with status 406."}], "tags": [], "owner": {"reputation": 4005, "user_id": 4200092, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/saOd8.png?s=128&g=1", "display_name": "GoBusto", "link": "https://stackoverflow.com/users/4200092/gobusto"}, "is_accepted": false, "score": 1, "last_activity_date": 1424867710, "last_edit_date": 1424867710, "creation_date": 1424857559, "answer_id": 28715733, "question_id": 28715631, "link": "https://stackoverflow.com/questions/28715631/disable-other-formats-than-html-in-rails-4/28715733#28715733", "title": "Disable other formats than HTML in Rails 4?", "body": "<p>You could add a <code>rescue_from</code> line to <code>ApplicationController.rb</code>:</p>\n\n<pre><code>class ApplicationController &lt; ActionController::Base\n\n  rescue_from ActionView::MissingTemplate do |e|\n    render nothing: true, status: 406\n  end\n\n  # ...\n\nend\n</code></pre>\n\n<p>If I try to access <code>document.xml</code> (rather than <code>document.pdf</code>) in my Rails application, Firefox shows the following message in the browser console:</p>\n\n<pre><code>GET http://localhost:3000/quotes/7/document.xml [HTTP/1.1 406 Not Acceptable  29ms]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1573, "user_id": 1716509, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/d615c9a0edef754228265dd35539245e?s=128&d=identicon&r=PG", "display_name": "Kristoffer", "link": "https://stackoverflow.com/users/1716509/kristoffer"}, "edited": false, "score": 0, "creation_date": 1424865468, "post_id": 28715794, "comment_id": 45723754, "body": "I tried this but it didn&#39;t do anything, at least not in development mode. Running Rails 4.0.6. Render is done by default render or <code>render &#39;the_template&#39;</code>."}, {"owner": {"reputation": 9921, "user_id": 488195, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/aa1e7477ba2f6c0ec47ed521f1cf1676?s=128&d=identicon&r=PG", "display_name": "dgilperez", "link": "https://stackoverflow.com/users/488195/dgilperez"}, "edited": false, "score": 0, "creation_date": 1424869042, "post_id": 28715794, "comment_id": 45726018, "body": "This does not provide an answer to the question. To critique or request clarification from an author, leave a comment below their post - you can always comment on your own posts, and once you have sufficient <a href=\"http://stackoverflow.com/help/whats-reputation\">reputation</a> you will be able to <a href=\"http://stackoverflow.com/help/privileges/comment\">comment on any post</a>."}, {"owner": {"reputation": 311, "user_id": 4591554, "user_type": "registered", "profile_image": "https://graph.facebook.com/410223609139845/picture?type=large", "display_name": "atomdev", "link": "https://stackoverflow.com/users/4591554/atomdev"}, "reply_to_user": {"reputation": 9921, "user_id": 488195, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/aa1e7477ba2f6c0ec47ed521f1cf1676?s=128&d=identicon&r=PG", "display_name": "dgilperez", "link": "https://stackoverflow.com/users/488195/dgilperez"}, "edited": false, "score": 0, "creation_date": 1424936100, "post_id": 28715794, "comment_id": 45757744, "body": "@dgilperez thank you, I will follow your recommendation"}], "tags": [], "owner": {"reputation": 311, "user_id": 4591554, "user_type": "registered", "profile_image": "https://graph.facebook.com/410223609139845/picture?type=large", "display_name": "atomdev", "link": "https://stackoverflow.com/users/4591554/atomdev"}, "is_accepted": false, "score": 0, "last_activity_date": 1424857720, "creation_date": 1424857720, "answer_id": 28715794, "question_id": 28715631, "link": "https://stackoverflow.com/questions/28715631/disable-other-formats-than-html-in-rails-4/28715794#28715794", "title": "Disable other formats than HTML in Rails 4?", "body": "<p>Place <code>respond_to :html</code> in ApplicationController</p>\n"}, {"comments": [{"owner": {"reputation": 1573, "user_id": 1716509, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/d615c9a0edef754228265dd35539245e?s=128&d=identicon&r=PG", "display_name": "Kristoffer", "link": "https://stackoverflow.com/users/1716509/kristoffer"}, "edited": false, "score": 0, "creation_date": 1424865570, "post_id": 28715827, "comment_id": 45723814, "body": "I tried <code>respond_to</code> earlier, maybe it didn&#39;t work because we&#39;re not doing <code>respond_with</code>. Do you have to use both?"}, {"owner": {"reputation": 12965, "user_id": 2463570, "user_type": "registered", "accept_rate": 55, "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Rajarshi Das", "link": "https://stackoverflow.com/users/2463570/rajarshi-das"}, "reply_to_user": {"reputation": 1573, "user_id": 1716509, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/d615c9a0edef754228265dd35539245e?s=128&d=identicon&r=PG", "display_name": "Kristoffer", "link": "https://stackoverflow.com/users/1716509/kristoffer"}, "edited": false, "score": 0, "creation_date": 1424865674, "post_id": 28715827, "comment_id": 45723893, "body": "yes please see more information <a href=\"http://blog.plataformatec.com.br/2009/08/embracing-rest-with-mind-body-and-soul/\" rel=\"nofollow noreferrer\">blog.plataformatec.com.br/2009/08/&hellip;</a>"}], "tags": [], "owner": {"reputation": 12965, "user_id": 2463570, "user_type": "registered", "accept_rate": 55, "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Rajarshi Das", "link": "https://stackoverflow.com/users/2463570/rajarshi-das"}, "is_accepted": false, "score": 0, "last_activity_date": 1424857812, "creation_date": 1424857812, "answer_id": 28715827, "question_id": 28715631, "link": "https://stackoverflow.com/questions/28715631/disable-other-formats-than-html-in-rails-4/28715827#28715827", "title": "Disable other formats than HTML in Rails 4?", "body": "<p>You can do it by following way</p>\n\n<pre><code>class UsersController &lt; ApplicationController\n    respond_to :html\n\n    def index\n      @users = User.all\n      respond_with(@users)\n    end\n  end\n</code></pre>\n\n<p>It will <code>respond</code>html all <code>actions</code> of <code>users</code> <code>controller</code></p>\n\n<p>Or If you want to respond_to for all controller</p>\n\n<p>then add it to <code>ApplicationController</code> just do</p>\n\n<pre><code> class ApplicationController &lt; ActionController\n    respond_to :html\n  end\n</code></pre>\n\n<p>and </p>\n\n<pre><code> class UsersController &lt; ApplicationController\n    def index\n      @users = User.all\n      respond_with(@users)\n    end\n  end\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1573, "user_id": 1716509, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/d615c9a0edef754228265dd35539245e?s=128&d=identicon&r=PG", "display_name": "Kristoffer", "link": "https://stackoverflow.com/users/1716509/kristoffer"}, "is_accepted": false, "score": 1, "last_activity_date": 1424957946, "creation_date": 1424957946, "answer_id": 28743979, "question_id": 28715631, "link": "https://stackoverflow.com/questions/28715631/disable-other-formats-than-html-in-rails-4/28743979#28743979", "title": "Disable other formats than HTML in Rails 4?", "body": "<p>I ended up going with a mix match of solutions since I couldn't get <code>respond_to</code> to work. This will send a 406 each time someone tries some unsupported mime type.</p>\n\n<pre><code>before_filter :ensure_html\n\ndef ensure_html\n  head 406 unless request.format == :html\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 16672, "user_id": 22237, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/hkobD.png?s=128&g=1", "display_name": "Kris", "link": "https://stackoverflow.com/users/22237/kris"}, "is_accepted": false, "score": 0, "last_activity_date": 1505985289, "creation_date": 1505985289, "answer_id": 46339956, "question_id": 28715631, "link": "https://stackoverflow.com/questions/28715631/disable-other-formats-than-html-in-rails-4/46339956#46339956", "title": "Disable other formats than HTML in Rails 4?", "body": "<p>If you do not use <code>respond_with</code> or want <code>ActionView::MissingTemplate</code> to be raised before the action is run (i.e. to prevent models being fetched etc.) you can use <a href=\"https://github.com/plataformatec/responders#verifying-request-formats\" rel=\"nofollow noreferrer\">verify_requested_format!</a> from the responders gem.</p>\n\n<pre><code>class UsersController &lt; ApplicationController\n  respond_to :html\n\n  before_action :verify_requested_format!\n\n  def index\n    # ...\n  end\nend\n</code></pre>\n\n<p>Then verify:</p>\n\n<pre><code>curl -v -H \"Accept: image/*\" localhost:9000/users\n\n&lt; HTTP/1.1 406 Not Acceptable\n</code></pre>\n\n<p>Incidentally you can also use <code>respond_with</code> without passing on a model instance such as:</p>\n\n<pre><code>class UsersController &lt; ApplicationController\n  respond_to :html\n\n  def index\n    @users = User.all\n    respond_with\n  end\nend\n</code></pre>\n\n<p>This however does not seem to be documented as far as I can see.</p>\n\n<ul>\n<li>rails 4.2</li>\n<li>responders 2.4</li>\n</ul>\n"}], "owner": {"reputation": 1573, "user_id": 1716509, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/d615c9a0edef754228265dd35539245e?s=128&d=identicon&r=PG", "display_name": "Kristoffer", "link": "https://stackoverflow.com/users/1716509/kristoffer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 366, "favorite_count": 1, "answer_count": 5, "score": 4, "last_activity_date": 1505985289, "creation_date": 1424857230, "last_edit_date": 1424870687, "question_id": 28715631, "link": "https://stackoverflow.com/questions/28715631/disable-other-formats-than-html-in-rails-4", "title": "Disable other formats than HTML in Rails 4?", "body": "<p>We're ending up with a lot of </p>\n\n<pre><code>ActionView::MissingTemplate (Missing template presentations/show, application/show with {:locale=&gt;[:en], :formats=&gt;[\"image/*\"], :handlers=&gt;[:erb, :builder, :raw, :ruby, :coffee, :haml]}\n</code></pre>\n\n<p>in our logs.</p>\n\n<p>The application only does HTML for the moment so I would like all other formats to return 406 (or something). Is there any way to set this once for all render calls? Or do we have to sprinkle <code>respond_to</code> everywhere?</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activeresource"], "comments": [{"owner": {"reputation": 109029, "user_id": 2767755, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/BkC8q.jpg?s=128&g=1", "display_name": "Arup Rakshit", "link": "https://stackoverflow.com/users/2767755/arup-rakshit"}, "edited": false, "score": 0, "creation_date": 1424857213, "post_id": 28715609, "comment_id": 45718819, "body": "Why not <code>@book = Book.all</code> ?"}, {"owner": {"reputation": 109029, "user_id": 2767755, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/BkC8q.jpg?s=128&g=1", "display_name": "Arup Rakshit", "link": "https://stackoverflow.com/users/2767755/arup-rakshit"}, "edited": false, "score": 0, "creation_date": 1424857518, "post_id": 28715609, "comment_id": 45719014, "body": "Nice. I never knew about this - <a href=\"http://api.rubyonrails.org/v3.2.1/classes/ActiveResource/Base.html#method-c-find\" rel=\"nofollow noreferrer\">api.rubyonrails.org/v3.2.1/classes/ActiveResource/&hellip;</a>"}, {"owner": {"reputation": 6310, "user_id": 406400, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ec35368c5a525eeb8129037891fe8611?s=128&d=identicon&r=PG", "display_name": "diya", "link": "https://stackoverflow.com/users/406400/diya"}, "reply_to_user": {"reputation": 109029, "user_id": 2767755, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/BkC8q.jpg?s=128&g=1", "display_name": "Arup Rakshit", "link": "https://stackoverflow.com/users/2767755/arup-rakshit"}, "edited": false, "score": 0, "creation_date": 1424857954, "post_id": 28715609, "comment_id": 45719305, "body": "Tried using @book = Book.all returns the same error"}, {"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1424862302, "post_id": 28715609, "comment_id": 45721893, "body": "Can you post an actual responds from <code>http:&#47;&#47;localhost:3000&#47;api&#47;v2&#47;books.json</code>."}], "owner": {"reputation": 6310, "user_id": 406400, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ec35368c5a525eeb8129037891fe8611?s=128&d=identicon&r=PG", "display_name": "diya", "link": "https://stackoverflow.com/users/406400/diya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 171, "favorite_count": 1, "answer_count": 0, "score": 2, "last_activity_date": 1424919442, "creation_date": 1424857156, "last_edit_date": 1424919442, "question_id": 28715609, "link": "https://stackoverflow.com/questions/28715609/fetching-collections-of-books-using-activeresource-returns-an-error", "title": "Fetching collections of books using ActiveResource returns an error", "body": "<p>Fetching collections of books using activeresource.</p>\n\n<p>I have a class extending from active resource as follows:</p>\n\n<pre><code>class BookResource &lt; ActiveResource::Base\n  self.site = \"http://api.book.com:3000/\"\nend\n</code></pre>\n\n<p>Here is my books_controller.rb</p>\n\n<pre><code>class BookController &lt; ApplicationController\n  def index\n    @book = Book.find(:all)\n  end\nend\n</code></pre>\n\n<p>Running the following command in rails console:</p>\n\n<pre><code>2.1.2 :009 &gt;   BookResource::Book.find(:all)\n</code></pre>\n\n<p>Actually using the above call, it is giving an error called </p>\n\n<blockquote>\n  <p>\"    ArgumentError: expected an attributes Hash, got [\"total_entries\",\n  38]\"</p>\n</blockquote>\n\n<pre><code>2.1.2 :009 &gt;   BookResource::Book.find(:all)\nI, [2015-02-25T14:04:00.492054 #12622]  INFO -- : GET http://localhost:3000/api/v2/books.json\nI, [2015-02-25T14:04:00.492197 #12622]  INFO -- : --&gt; 200 OK 5489 (50.0ms)\nArgumentError: expected an attributes Hash, got [\"total_entries\", 38]\n    from /home/diya/.rvm/gems/ruby-2.1.2@verve-offers/gems/activeresource-4.0.0/lib/active_resource/base.rb:1327:in `load'\n    from /home/diya/.rvm/gems/ruby-2.1.2@verve-offers/gems/activeresource-4.0.0/lib/active_resource/base.rb:1074:in `initialize'\n    from /home/diya/.rvm/gems/ruby-2.1.2@verve-offers/gems/activeresource-4.0.0/lib/active_resource/base.rb:1001:in `new'\n    from /home/diya/.rvm/gems/ruby-2.1.2@verve-offers/gems/activeresource-4.0.0/lib/active_resource/base.rb:1001:in `instantiate_record'\n    from /home/diya/.rvm/gems/ruby-2.1.2@verve-offers/gems/activeresource-4.0.0/lib/active_resource/base.rb:997:in `block in instantiate_collection'\n    from /home/diya/.rvm/gems/ruby-2.1.2@verve-offers/gems/activeresource-4.0.0/lib/active_resource/collection.rb:67:in `block in collect!'\n    from /home/diya/.rvm/gems/ruby-2.1.2@verve-offers/gems/activeresource-4.0.0/lib/active_resource/collection.rb:7:in `each'\n    from /home/diya/.rvm/gems/ruby-2.1.2@verve-offers/gems/activeresource-4.0.0/lib/active_resource/collection.rb:7:in `each'\n    from /home/diya/.rvm/gems/ruby-2.1.2@verve-offers/gems/activeresource-4.0.0/lib/active_resource/collection.rb:67:in `collect!'\n    from /home/diya/.rvm/gems/ruby-2.1.2@verve-offers/gems/activeresource-4.0.0/lib/active_resource/base.rb:997:in `instantiate_collection'\n    from /home/diya/.rvm/gems/ruby-2.1.2@verve-offers/gems/activeresource-4.0.0/lib/active_resource/base.rb:966:in `find_every'\n    from /home/diya/.rvm/gems/ruby-2.1.2@verve-offers/gems/activeresource-4.0.0/lib/active_resource/base.rb:873:in `find'\n    from (irb):9\n    from /home/diya/.rvm/gems/ruby-2.1.2@verve-offers/gems/railties-4.0.4/lib/rails/commands/console.rb:90:in `start'\n    from /home/diya/.rvm/gems/ruby-2.1.2@verve-offers/gems/railties-4.0.4/lib/rails/commands/console.rb:9:in `start'\n    from /home/diya/.rvm/gems/ruby-2.1.2@verve-offers/gems/railties-4.0.4/lib/rails/commands.rb:62:in `&lt;top (required)&gt;'\n    from bin/rails:4:in `require'\n    from bin/rails:4:in `&lt;main&gt;'2.1.2 :010 &gt; \n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "variables"], "comments": [{"owner": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "edited": false, "score": 0, "creation_date": 1424854220, "post_id": 28714677, "comment_id": 45717017, "body": "It&#39;s impossible to answer this question with such few data."}, {"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 1, "creation_date": 1424854273, "post_id": 28714677, "comment_id": 45717051, "body": "What is <code>@facets</code> here? and what is the exact error you got?"}, {"owner": {"reputation": 771, "user_id": 3097990, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cce75448634614d3db66e3428af65bbf?s=128&d=identicon&r=PG&f=1", "display_name": "Michael Victor", "link": "https://stackoverflow.com/users/3097990/michael-victor"}, "edited": false, "score": 0, "creation_date": 1424854804, "post_id": 28714677, "comment_id": 45717332, "body": "Apologies. I have elaborated further in the question now."}, {"owner": {"reputation": 2395, "user_id": 1626261, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/v6cN0.jpg?s=128&g=1", "display_name": "Sonalkumar sute", "link": "https://stackoverflow.com/users/1626261/sonalkumar-sute"}, "edited": false, "score": 0, "creation_date": 1424854916, "post_id": 28714677, "comment_id": 45717393, "body": "where <code>@facets</code> is coming from?, which controller is this?"}, {"owner": {"reputation": 771, "user_id": 3097990, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cce75448634614d3db66e3428af65bbf?s=128&d=identicon&r=PG&f=1", "display_name": "Michael Victor", "link": "https://stackoverflow.com/users/3097990/michael-victor"}, "edited": false, "score": 0, "creation_date": 1424855006, "post_id": 28714677, "comment_id": 45717445, "body": "This is the People Controller. I just created it on line 4 of this code. Maybe this was what I am doing wrong?"}, {"owner": {"reputation": 2395, "user_id": 1626261, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/v6cN0.jpg?s=128&g=1", "display_name": "Sonalkumar sute", "link": "https://stackoverflow.com/users/1626261/sonalkumar-sute"}, "edited": false, "score": 0, "creation_date": 1424855108, "post_id": 28714677, "comment_id": 45717504, "body": "there is no <code>@facets</code> variable is present in here that&#39;s why it is saying <code>for nil:NilClass</code>"}, {"owner": {"reputation": 771, "user_id": 3097990, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cce75448634614d3db66e3428af65bbf?s=128&d=identicon&r=PG&f=1", "display_name": "Michael Victor", "link": "https://stackoverflow.com/users/3097990/michael-victor"}, "edited": false, "score": 0, "creation_date": 1424855200, "post_id": 28714677, "comment_id": 45717547, "body": "Sorry for my ignorance, but how exactly do I define this variable so that it is present?"}, {"owner": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "edited": false, "score": 0, "creation_date": 1424855258, "post_id": 28714677, "comment_id": 45717572, "body": "Just like other instance variables, with assignment (usually): <code>@facets = ...</code>."}, {"owner": {"reputation": 2395, "user_id": 1626261, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/v6cN0.jpg?s=128&g=1", "display_name": "Sonalkumar sute", "link": "https://stackoverflow.com/users/1626261/sonalkumar-sute"}, "edited": false, "score": 0, "creation_date": 1424855348, "post_id": 28714677, "comment_id": 45717622, "body": "Can you show us <code>facet</code> model and the <code>form</code> from where you are coming to <code>index action</code>"}, {"owner": {"reputation": 771, "user_id": 3097990, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cce75448634614d3db66e3428af65bbf?s=128&d=identicon&r=PG&f=1", "display_name": "Michael Victor", "link": "https://stackoverflow.com/users/3097990/michael-victor"}, "edited": false, "score": 0, "creation_date": 1424855405, "post_id": 28714677, "comment_id": 45717655, "body": "There is no facet model, I just want to return the data of the count of certain items along with the result. Maybe making a new instance variable for it isn&#39;t the best idea?"}, {"owner": {"reputation": 2395, "user_id": 1626261, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/v6cN0.jpg?s=128&g=1", "display_name": "Sonalkumar sute", "link": "https://stackoverflow.com/users/1626261/sonalkumar-sute"}, "edited": false, "score": 0, "creation_date": 1424855479, "post_id": 28714677, "comment_id": 45717700, "body": "so you can say something like this <code>@facets_total_count = Person.all.count</code> or  <code>@facets_total_count = Person.count(:all)</code> &amp; <code>@facets_filtered_count = @people.count</code>"}, {"owner": {"reputation": 771, "user_id": 3097990, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cce75448634614d3db66e3428af65bbf?s=128&d=identicon&r=PG&f=1", "display_name": "Michael Victor", "link": "https://stackoverflow.com/users/3097990/michael-victor"}, "edited": false, "score": 0, "creation_date": 1424855598, "post_id": 28714677, "comment_id": 45717788, "body": "Ahh yes, that worked. But I just want to have too many local variables running around"}, {"owner": {"reputation": 2395, "user_id": 1626261, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/v6cN0.jpg?s=128&g=1", "display_name": "Sonalkumar sute", "link": "https://stackoverflow.com/users/1626261/sonalkumar-sute"}, "edited": false, "score": 0, "creation_date": 1424855745, "post_id": 28714677, "comment_id": 45717882, "body": "then you can create <code>@facets_total_count</code> as array with <code>[Person.count(:all), @people.count]</code> or as hash and <code>total_count</code> and <code>filtered_count</code> as keys with resp values"}, {"owner": {"reputation": 771, "user_id": 3097990, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cce75448634614d3db66e3428af65bbf?s=128&d=identicon&r=PG&f=1", "display_name": "Michael Victor", "link": "https://stackoverflow.com/users/3097990/michael-victor"}, "edited": false, "score": 0, "creation_date": 1424855781, "post_id": 28714677, "comment_id": 45717900, "body": "I think that&#39;s a good idea, I will do just that!"}], "answers": [{"tags": [], "owner": {"reputation": 660, "user_id": 2422869, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1356c45431d15bc5838dc507ec6868e0?s=128&d=identicon&r=PG&f=1", "display_name": "user2422869", "link": "https://stackoverflow.com/users/2422869/user2422869"}, "is_accepted": true, "score": 2, "last_activity_date": 1424855908, "creation_date": 1424855908, "answer_id": 28715191, "question_id": 28714677, "link": "https://stackoverflow.com/questions/28714677/how-do-i-create-an-instance-variable-in-rails-using-openstruct/28715191#28715191", "title": "How do I create an instance variable in rails using OpenStruct", "body": "<p>I think you want to use <a href=\"http://ruby-doc.org//stdlib-2.0/libdoc/ostruct/rdoc/OpenStruct.html\" rel=\"nofollow\">OpenStruct</a> variable.</p>\n\n<pre><code>require 'ostruct'\n# ...\n\ndef index\n  @people = Person.for_branch(session[:branch_id]).for_interests(params[:interest_search]).search_query(params[:search_term]).for_lead_sources(params[:lead_source_search]).page params[:page]\n  @organization = Organization.find(session[:organization_id])\n\n  @facets = OpenStruct.new # initializing OpenStruct instance\n  @facets.total_count = Person.all.count\n  @facets.filtered_count = @people.count\n  respond_to do |format|\n    format.html \n    format.json {render partial: 'table.html', locals: { people: @people, organization: @organization, facets: @facets}}\n  end\nend\n</code></pre>\n\n<p>Please note, that it is more convinient to use plain old <a href=\"http://ruby-doc.org//core-2.2.0/Hash.html\" rel=\"nofollow\">Hash</a> instead:</p>\n\n<pre><code>facets = {total_count: Person.all.count, filtered_count: @people.count}\nrespond_to do |format|\n  format.html \n  format.json {render partial: 'table.html', locals: { people: @people, organization: @organization, facets: facets}}\nend\n</code></pre>\n\n<p>and use it in your views like this:</p>\n\n<pre><code>total count is &lt;%= facets[:total_count] %&gt;\n</code></pre>\n"}], "owner": {"reputation": 771, "user_id": 3097990, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cce75448634614d3db66e3428af65bbf?s=128&d=identicon&r=PG&f=1", "display_name": "Michael Victor", "link": "https://stackoverflow.com/users/3097990/michael-victor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 213, "favorite_count": 0, "accepted_answer_id": 28715191, "answer_count": 1, "score": 0, "last_activity_date": 1470916148, "creation_date": 1424854137, "last_edit_date": 1470916148, "question_id": 28714677, "link": "https://stackoverflow.com/questions/28714677/how-do-i-create-an-instance-variable-in-rails-using-openstruct", "title": "How do I create an instance variable in rails using OpenStruct", "body": "<p>I would like to return facets along with the data in my controller. My code was : </p>\n\n<pre><code>def index\n   @people = Person.for_branch(session[:branch_id]).for_interests(params[:interest_search]).search_query(params[:search_term]).for_lead_sources(params[:lead_source_search]).page params[:page]\n   @organization = Organization.find(session[:organization_id])\n   @facets.total_count = Person.all.count\n   @facets.filtered_count = @people.count\n   respond_to do |format|\n      format.html \n      format.json {render partial: 'table.html', locals: { people: @people, organization: @organization, facets: @facets}}\n   end\nend\n</code></pre>\n\n<p>However, I keep getting the error total_count is not defined.</p>\n\n<pre><code>undefined method `total_count=' for nil:NilClass\n</code></pre>\n\n<p>How can I fixed this?</p>\n"}, {"tags": ["ruby", "mongodb", "mongoid"], "answers": [{"comments": [{"owner": {"reputation": 456, "user_id": 2148569, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d692b9881e72d0533eb2db48ee6e1175?s=128&d=identicon&r=PG", "display_name": "teano", "link": "https://stackoverflow.com/users/2148569/teano"}, "edited": false, "score": 0, "creation_date": 1424937823, "post_id": 28733163, "comment_id": 45758463, "body": "Unfortunately we mock the relation between user and user_score because user is stored in mysql. I updated the question."}, {"owner": {"reputation": 10812, "user_id": 1241782, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/576b21d9efadc9217270e971fd6d5027?s=128&d=identicon&r=PG", "display_name": "Mike S", "link": "https://stackoverflow.com/users/1241782/mike-s"}, "reply_to_user": {"reputation": 456, "user_id": 2148569, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d692b9881e72d0533eb2db48ee6e1175?s=128&d=identicon&r=PG", "display_name": "teano", "link": "https://stackoverflow.com/users/2148569/teano"}, "edited": false, "score": 0, "creation_date": 1424968801, "post_id": 28733163, "comment_id": 45777886, "body": "Try the equivalent, instead of <code>user.user_score</code>, do <code>a.user_score = &lt;your_mysql_find_query&gt;</code>"}], "tags": [], "owner": {"reputation": 10812, "user_id": 1241782, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/576b21d9efadc9217270e971fd6d5027?s=128&d=identicon&r=PG", "display_name": "Mike S", "link": "https://stackoverflow.com/users/1241782/mike-s"}, "is_accepted": false, "score": 0, "last_activity_date": 1424915637, "creation_date": 1424915637, "answer_id": 28733163, "question_id": 28714374, "link": "https://stackoverflow.com/questions/28714374/mongoid-push-new-embedded-document-in-a-single-query/28733163#28733163", "title": "Mongoid push new embedded document in a single query", "body": "<p>Have you tried this:</p>\n\n<pre><code>a = Activity.new(values)\na.user_score = user.user_score\na.save\n</code></pre>\n\n<p>This may require you to write the <code>has_many</code> and <code>belongs_to</code> relations that you're already storing the data for:</p>\n\n<pre><code>class UserScore\n    belongs_to :user\nend\n\nclass User\n    has_many :user_scores\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 456, "user_id": 2148569, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d692b9881e72d0533eb2db48ee6e1175?s=128&d=identicon&r=PG", "display_name": "teano", "link": "https://stackoverflow.com/users/2148569/teano"}, "is_accepted": true, "score": 0, "last_activity_date": 1425395828, "creation_date": 1425395828, "answer_id": 28835364, "question_id": 28714374, "link": "https://stackoverflow.com/questions/28714374/mongoid-push-new-embedded-document-in-a-single-query/28835364#28835364", "title": "Mongoid push new embedded document in a single query", "body": "<p>After some more research it seems like there is no alternative to the method I described in my question. Mongoid always loads the whole document with embedded documents. If you use only(), you can not manipulate the document.</p>\n\n<p>I also noticed that the push into the array becomes inefficient if you have more then a few thousand embedded document. The solution for the two problems was to move the embedded documents to a seperate collection.</p>\n"}], "owner": {"reputation": 456, "user_id": 2148569, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d692b9881e72d0533eb2db48ee6e1175?s=128&d=identicon&r=PG", "display_name": "teano", "link": "https://stackoverflow.com/users/2148569/teano"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 470, "favorite_count": 0, "accepted_answer_id": 28835364, "answer_count": 2, "score": 0, "last_activity_date": 1425395828, "creation_date": 1424852980, "last_edit_date": 1424937664, "question_id": 28714374, "link": "https://stackoverflow.com/questions/28714374/mongoid-push-new-embedded-document-in-a-single-query", "title": "Mongoid push new embedded document in a single query", "body": "<p>We use mongoid to store a users score:</p>\n\n<pre><code>class UserScore\n  include Mongoid::Document\n\n  field :user_id, type: Integer\n  field :points,  type: Integer, default: 0\n  embeds_many :activities\nend\n</code></pre>\n\n<p>We keep track of the activities of a user by collecting them in embedded documents called activities. As the number of activities grows, the time to access user.user_score also does if mongoid will load all embedded documents. If we add a new activity, it always results in two querys:</p>\n\n<pre><code>UserScore.where( user_id: user.id ).first.activities &lt;&lt; Activity.new(values)\n</code></pre>\n\n<p>One query to find the UserScores and one query to push.</p>\n\n<pre><code>MOPED: 127.0.0.1:27017 QUERY        database=development collection=user_scores selector={\"$query\"=&gt;{\"user_id\"=&gt;121920}, \"$orderby\"=&gt;{:_id=&gt;1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil \n(192.1866ms)\nMOPED: 127.0.0.1:27017 UPDATE       database=development collection=user_scores selector={\"_id\"=&gt;\"53cfe22869d256929d000139\"} update={\"$push\"=&gt;{\"activities\"=&gt;{\"_id\"=&gt;\"54ed824d4c5c34f157000011\", \"points\"=&gt;50, \"created_at\"=&gt;2015-02-25 08:05:33 UTC}}} flags=[] \n(0.5269ms)\n</code></pre>\n\n<p>The find-query isn't realy necessary as we could also push an new embedded document by using moped like this:</p>\n\n<pre><code>Mongoid::Sessions.default[:user_scores].find(user_id: user.id).update('$push' =&gt; {'activities' =&gt; values)})\n\nMOPED: 127.0.0.1:27017 UPDATE       database=development collection=user_scores selector={:user_id=&gt;125721} update={\"$push\"=&gt;{\"activities\"=&gt;{:points=&gt;50, \"_id\"=&gt;\"54ed80224c5c34f157000007\", :created_at=&gt;2015-02-25 07:56:18 UTC}}} flags=[] \n(0.5438ms)\n</code></pre>\n\n<p>Is there a way to achieve this in mongoid? \nThe reason we want to use mongoid is that we want to process the new activity as a ruby object. Also by pushing the values like this, the activity documents are missing the _id and created_at field that we have to create in the application which leads to more ugly code.</p>\n\n<p>We use mongoid 3.1.6. Is it possible that a kind of lazy loading was or will be added in later versions ?</p>\n\n<p><strong>Update:</strong></p>\n\n<p>We mock the relation between user and user score because user is stored in a mysql database:</p>\n\n<pre><code>class User\n  def user_score\n    UserScore.where(user_id: self.id).first\n  end\nend\n</code></pre>\n\n<p>So we can not use the relation like this</p>\n\n<pre><code>user.user_score &lt;&lt; Activity.new(values)\n</code></pre>\n\n<p>without the same result.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 4349, "user_id": 648392, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6b2bd8a8c583866711c234a612f6b157?s=128&d=identicon&r=PG", "display_name": "Jesper", "link": "https://stackoverflow.com/users/648392/jesper"}, "edited": false, "score": 2, "creation_date": 1424852147, "post_id": 28713947, "comment_id": 45716030, "body": "It&#39;s hard to understand what you&#39;re trying to do. There are errors in your code. <code>@fb_data_hash = Hash</code> makes no sense."}, {"owner": {"reputation": 115, "user_id": 4233970, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/855ad6c63074201c0dc3ac112fcd3d52?s=128&d=identicon&r=PG&f=1", "display_name": "Dung Nguyen quang", "link": "https://stackoverflow.com/users/4233970/dung-nguyen-quang"}, "reply_to_user": {"reputation": 4349, "user_id": 648392, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6b2bd8a8c583866711c234a612f6b157?s=128&d=identicon&r=PG", "display_name": "Jesper", "link": "https://stackoverflow.com/users/648392/jesper"}, "edited": false, "score": 0, "creation_date": 1424852958, "post_id": 28713947, "comment_id": 45716403, "body": "Oh! it&#39;s just a example :). Hash &lt;=&gt; {:key1 =&gt; value1, :key2 =&gt; value2, :key3 =&gt; value3}. Nothing error with my code. Normally, I can creat timelines with my code, but I don&#39;t know how to collect all of them into one array(alltimelines) each time they been created"}, {"owner": {"reputation": 4349, "user_id": 648392, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6b2bd8a8c583866711c234a612f6b157?s=128&d=identicon&r=PG", "display_name": "Jesper", "link": "https://stackoverflow.com/users/648392/jesper"}, "edited": false, "score": 2, "creation_date": 1424853072, "post_id": 28713947, "comment_id": 45716462, "body": "It&#39;s helpful if the code that you post is valid code, even if it is example code."}], "answers": [{"comments": [{"owner": {"reputation": 115, "user_id": 4233970, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/855ad6c63074201c0dc3ac112fcd3d52?s=128&d=identicon&r=PG&f=1", "display_name": "Dung Nguyen quang", "link": "https://stackoverflow.com/users/4233970/dung-nguyen-quang"}, "edited": false, "score": 0, "creation_date": 1424855262, "post_id": 28714395, "comment_id": 45717575, "body": "Sorry, but I must create timeline with get_id_and_content(key, val) method"}], "tags": [], "owner": {"reputation": 560, "user_id": 2810526, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8e5057efe9132baa64de1faaf8b368f3?s=128&d=identicon&r=PG&f=1", "display_name": "Kilian", "link": "https://stackoverflow.com/users/2810526/kilian"}, "is_accepted": false, "score": 0, "last_activity_date": 1424853617, "last_edit_date": 1424853617, "creation_date": 1424853069, "answer_id": 28714395, "question_id": 28713947, "link": "https://stackoverflow.com/questions/28713947/get-all-item-be-created-in-loop-ruby-on-rails/28714395#28714395", "title": "Get all item be created in loop, ruby on rails", "body": "<p>If you really want this format with an array like:</p>\n\n<pre><code>all_timelines = [{:id =&gt; \"1\", :content =&gt; \"abcd\"},{:id =&gt; \"2\", :content =&gt; \"efgh\"},{:id =&gt; \"3\", :content =&gt; \"ijkl\"}]\n</code></pre>\n\n<p>This code should do the trick (assuming the fact that @fb_data_hash actually contains data) :</p>\n\n<pre><code>all_timelines = Array.new\n@fb_data_hash.each do |key, val|\n  all_timelines.push({:id =&gt; key, :content =&gt; val})\nend\n</code></pre>\n\n<p>Then you can call your array like that (as an exemple)</p>\n\n<pre><code>all_timelines.first # return {:id=&gt;1, :content=&gt;\"abcd\"}\n</code></pre>\n\n<p>Hope that is you are looking for.</p>\n"}, {"tags": [], "owner": {"reputation": 4349, "user_id": 648392, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6b2bd8a8c583866711c234a612f6b157?s=128&d=identicon&r=PG", "display_name": "Jesper", "link": "https://stackoverflow.com/users/648392/jesper"}, "is_accepted": true, "score": 2, "last_activity_date": 1424853242, "creation_date": 1424853242, "answer_id": 28714435, "question_id": 28713947, "link": "https://stackoverflow.com/questions/28713947/get-all-item-be-created-in-loop-ruby-on-rails/28714435#28714435", "title": "Get all item be created in loop, ruby on rails", "body": "<p>You can use <code>map</code> for this purpose</p>\n\n<pre><code>some_hash = { key: \"value\", other_key: \"other_value\" }\nsome_hash.map do |key, val|\n  get_id_and_content(key, val)\nend\n# =&gt; equivalent to [ get_id_and_content(:key, \"value\"), get_id_and_content(:other_key, \"other_value\") ]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 34818, "user_id": 2149092, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/34986a72d47c42ae5685b37ba32d1e22?s=128&d=identicon&r=PG", "display_name": "Mohammad AbuShady", "link": "https://stackoverflow.com/users/2149092/mohammad-abushady"}, "is_accepted": false, "score": 1, "last_activity_date": 1424854612, "creation_date": 1424854612, "answer_id": 28714825, "question_id": 28713947, "link": "https://stackoverflow.com/questions/28713947/get-all-item-be-created-in-loop-ruby-on-rails/28714825#28714825", "title": "Get all item be created in loop, ruby on rails", "body": "<p>You could simply use <a href=\"http://ruby-doc.org/core-2.2.0/Enumerable.html#method-i-collect\" rel=\"nofollow\"><code>Enumerable#collect</code></a> which will return a new array by running a block on each item of the enumerable, but also it won't destroy or modify the old variable</p>\n\n<pre><code>timeline = @fb_data_hash.collect { |key, val| get_id_and_content(key, val) }\n# @fb_data_hash is still intact\n# timeline has the data that you want\n</code></pre>\n"}], "owner": {"reputation": 115, "user_id": 4233970, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/855ad6c63074201c0dc3ac112fcd3d52?s=128&d=identicon&r=PG&f=1", "display_name": "Dung Nguyen quang", "link": "https://stackoverflow.com/users/4233970/dung-nguyen-quang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "accepted_answer_id": 28714435, "answer_count": 3, "score": 0, "last_activity_date": 1424854612, "creation_date": 1424851152, "last_edit_date": 1424854209, "question_id": 28713947, "link": "https://stackoverflow.com/questions/28713947/get-all-item-be-created-in-loop-ruby-on-rails", "title": "Get all item be created in loop, ruby on rails", "body": "<p>Can I get all items been created in loop with ruby on rails?? Here my example:</p>\n\n<pre><code>@fb_data_hash = {:key1 =&gt; value1, :key2 =&gt; value2, :key3 =&gt; value3, ...}\n@fb_data_hash.each do |key, val|\ntimeline = get_id_and_content(key, val)\n  #timeline will be created like this:\n    =&gt;first:  timeline = {:id =&gt; \"1\", :content =&gt; \"abcd\"}\n    =&gt;second:  timeline = {:id =&gt; \"2\", :content =&gt; \"efgh\"}\n    =&gt;third:  timeline = {:id =&gt; \"3\", :content =&gt; \"ijkl\"}\nend\n</code></pre>\n\n<p>So, I want to get all timeline each time it been created, like this:</p>\n\n<pre><code>alltimelines = [{:id =&gt; \"1\", :content =&gt; \"abcd\"},{:id =&gt; \"2\", :content =&gt; \"efgh\"},{:id =&gt; \"3\", :content =&gt; \"ijkl\"}]\n</code></pre>\n\n<p>&lt;=></p>\n\n<pre><code>alltimelines = [timeline(first),timeline(second),timeline(third)]\n</code></pre>\n\n<p>But, I don't know how to do that, I tried create an array like this:</p>\n\n<pre><code>alltimelines = Array.new\nalltimelines &lt;&lt; timeline\n</code></pre>\n\n<p>but, it just get one timeline in first. Please help me :)</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord"], "comments": [{"owner": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "edited": false, "score": 0, "creation_date": 1424851015, "post_id": 28713867, "comment_id": 45715527, "body": "You&#39;re misusing <code>if</code> parameter. Also, you should use <code>&amp;&amp;</code> instead of <code>and</code>."}], "answers": [{"comments": [{"owner": {"reputation": 2125, "user_id": 796803, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/Jq55f.jpg?s=128&g=1", "display_name": "Andre Zimpel", "link": "https://stackoverflow.com/users/796803/andre-zimpel"}, "edited": false, "score": 0, "creation_date": 1565201864, "post_id": 28713929, "comment_id": 101281943, "body": "What if the value is not required tho? Null is not a number/integer and therefore I always get a validation error."}, {"owner": {"reputation": 2125, "user_id": 796803, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/Jq55f.jpg?s=128&g=1", "display_name": "Andre Zimpel", "link": "https://stackoverflow.com/users/796803/andre-zimpel"}, "edited": false, "score": 4, "creation_date": 1565201970, "post_id": 28713929, "comment_id": 101281990, "body": "Okaaaaay... <code>allow_blank: true</code> does the job <code>validates :age, numericality: { only_integer: true }, allow_blank: true</code>"}], "tags": [], "owner": {"reputation": 16229, "user_id": 525478, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3b6c0b47a0c430a0b141baee7ea845be?s=128&d=identicon&r=PG", "display_name": "Brad Werth", "link": "https://stackoverflow.com/users/525478/brad-werth"}, "is_accepted": true, "score": 21, "last_activity_date": 1541429454, "last_edit_date": 1541429454, "creation_date": 1424851089, "answer_id": 28713929, "question_id": 28713867, "link": "https://stackoverflow.com/questions/28713867/validating-an-attribute-to-be-an-integer-only/28713929#28713929", "title": "Validating an attribute to be an integer only", "body": "<p>The functionality already exists to check for an integer in <a href=\"http://apidock.com/rails/ActiveModel/Validations/HelperMethods/validates_numericality_of\" rel=\"noreferrer\"><code>validates_numericality_of</code></a> - just set <code>:only_integer</code> to <code>true</code></p>\n\n<p>You can use the validation in your active record models as per the <a href=\"https://edgeguides.rubyonrails.org/active_record_validations.html#numericality\" rel=\"noreferrer\">rails documentation</a>. </p>\n\n<pre><code>validates :your_column_name, numericality: { only_integer: true }\n</code></pre>\n"}], "owner": {"reputation": 256, "user_id": 4291349, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/07f5345e0ddc148df69fedcf236f08c5?s=128&d=identicon&r=PG&f=1", "display_name": "roarfromror", "link": "https://stackoverflow.com/users/4291349/roarfromror"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 8332, "favorite_count": 0, "accepted_answer_id": 28713929, "answer_count": 1, "score": 9, "last_activity_date": 1541429454, "creation_date": 1424850865, "last_edit_date": 1425367002, "question_id": 28713867, "link": "https://stackoverflow.com/questions/28713867/validating-an-attribute-to-be-an-integer-only", "title": "Validating an attribute to be an integer only", "body": "<p>product.rb model file:  </p>\n\n<pre><code>class Product &lt; ActiveRecord::Base\n  validates_numericality_of :price\n  validates_numericality_of :stock, if: Proc.new { |p| (p.stock.is_a? Integer and p.stock &gt;= 0) ? true : false }\n\n  def price=(input)\n    input.delete!(\"$\")\n    super\n  end\nend  \n</code></pre>\n\n<p>I want stock to be integer only. When I submit stock with float value say 34.48 then in Insert sql cmd in server log, I see 34 only, and it doesn't hit the validation condition above, how is this possible that the validation condition is being true even i send float number.(new to rails, hoping this question makes sense).</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "hash"], "comments": [{"owner": {"reputation": 109029, "user_id": 2767755, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/BkC8q.jpg?s=128&g=1", "display_name": "Arup Rakshit", "link": "https://stackoverflow.com/users/2767755/arup-rakshit"}, "reply_to_user": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "edited": false, "score": 0, "creation_date": 1424850881, "post_id": 28713742, "comment_id": 45715480, "body": "@MarekLipka I need to drink some water it seems :)"}], "answers": [{"comments": [{"owner": {"reputation": 5714, "user_id": 2389501, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/23f6a708c04c660111117c4613592689?s=128&d=identicon&r=PG", "display_name": "Mateusz Urba\u0144ski", "link": "https://stackoverflow.com/users/2389501/mateusz-urba%c5%84ski"}, "edited": false, "score": 0, "creation_date": 1424853320, "post_id": 28714143, "comment_id": 45716564, "body": "Thank you but your solution also didnt work. When I run my specs they gaves me validation errors."}, {"owner": {"reputation": 4349, "user_id": 648392, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6b2bd8a8c583866711c234a612f6b157?s=128&d=identicon&r=PG", "display_name": "Jesper", "link": "https://stackoverflow.com/users/648392/jesper"}, "reply_to_user": {"reputation": 5714, "user_id": 2389501, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/23f6a708c04c660111117c4613592689?s=128&d=identicon&r=PG", "display_name": "Mateusz Urba\u0144ski", "link": "https://stackoverflow.com/users/2389501/mateusz-urba%c5%84ski"}, "edited": false, "score": 0, "creation_date": 1424853500, "post_id": 28714143, "comment_id": 45716648, "body": "It&#39;s really hard &quot;to make it work&quot; when you don&#39;t specify what the desired result is and/or what validations you are running."}, {"owner": {"reputation": 5714, "user_id": 2389501, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/23f6a708c04c660111117c4613592689?s=128&d=identicon&r=PG", "display_name": "Mateusz Urba\u0144ski", "link": "https://stackoverflow.com/users/2389501/mateusz-urba%c5%84ski"}, "edited": false, "score": 0, "creation_date": 1424853643, "post_id": 28714143, "comment_id": 45716725, "body": "For example incident_time is column in drive_off_incidents_table and this validation fails."}, {"owner": {"reputation": 4349, "user_id": 648392, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6b2bd8a8c583866711c234a612f6b157?s=128&d=identicon&r=PG", "display_name": "Jesper", "link": "https://stackoverflow.com/users/648392/jesper"}, "reply_to_user": {"reputation": 5714, "user_id": 2389501, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/23f6a708c04c660111117c4613592689?s=128&d=identicon&r=PG", "display_name": "Mateusz Urba\u0144ski", "link": "https://stackoverflow.com/users/2389501/mateusz-urba%c5%84ski"}, "edited": false, "score": 0, "creation_date": 1424853800, "post_id": 28714143, "comment_id": 45716813, "body": "I really don&#39;t see what your specific validations have to do with a problem regarding strong parameters."}, {"owner": {"reputation": 4349, "user_id": 648392, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6b2bd8a8c583866711c234a612f6b157?s=128&d=identicon&r=PG", "display_name": "Jesper", "link": "https://stackoverflow.com/users/648392/jesper"}, "reply_to_user": {"reputation": 5714, "user_id": 2389501, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/23f6a708c04c660111117c4613592689?s=128&d=identicon&r=PG", "display_name": "Mateusz Urba\u0144ski", "link": "https://stackoverflow.com/users/2389501/mateusz-urba%c5%84ski"}, "edited": false, "score": 0, "creation_date": 1424853926, "post_id": 28714143, "comment_id": 45716878, "body": "Please regard my answer as an example of how to use strong parameters more correctly, not as a final solution to any other problem you may have."}], "tags": [], "owner": {"reputation": 4349, "user_id": 648392, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6b2bd8a8c583866711c234a612f6b157?s=128&d=identicon&r=PG", "display_name": "Jesper", "link": "https://stackoverflow.com/users/648392/jesper"}, "is_accepted": true, "score": 2, "last_activity_date": 1424852024, "creation_date": 1424852024, "answer_id": 28714143, "question_id": 28713742, "link": "https://stackoverflow.com/questions/28713742/undefined-method-with-indifferent-access-for/28714143#28714143", "title": "undefined method `with_indifferent_access&#39; for", "body": "<p>Are you sure you want to merge the return value of <code>shared_incident_params</code> with the hash in <code>drive_off_incident_params</code>? That value is probably a <code>Parameters</code> object, but you're trying to merge a hash into it. <code>Parameters</code> inherits from <code>ActiveSupport::HashWithIndifferentAccess</code>, which tries to coerce the other value into the same type when merging. </p>\n\n<p>I guess that what you're trying to do is to extend the rules in <code>shared_incident_params</code> when running <code>drive_off_incident_params</code>.</p>\n\n<p>Have you tried just doing something like this:</p>\n\n<pre><code>def shared_incident_params\n  params.require(:drive_off_incident).permit(*permitted_incident_params)\nend\n\ndef permitted_incident_params\n  [\n    :incident_time, \n    :product,\n    :amount_cents, \n    :where_from, \n    :where_to, \n    car_attributes: [:brand_id, :model, :color, :body_type, :plates], \n    witness_attributes: [:first_name, :last_name, :email, :phone],\n    notes_attributes: [:id, :content]\n  ]\nend\n\ndef drive_off_incident_params\n  shared_incident_params\n  params.permit(\n    person_description_attributes: [\n      :height,\n      :age, \n      :gender, \n      :nationality, \n      :features, \n      :clothes ]\n  )\nend\n</code></pre>\n"}], "owner": {"reputation": 5714, "user_id": 2389501, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/23f6a708c04c660111117c4613592689?s=128&d=identicon&r=PG", "display_name": "Mateusz Urba\u0144ski", "link": "https://stackoverflow.com/users/2389501/mateusz-urba%c5%84ski"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 9414, "favorite_count": 1, "accepted_answer_id": 28714143, "answer_count": 1, "score": 3, "last_activity_date": 1424865710, "creation_date": 1424850421, "question_id": 28713742, "link": "https://stackoverflow.com/questions/28713742/undefined-method-with-indifferent-access-for", "title": "undefined method `with_indifferent_access&#39; for", "body": "<p>In my Rails application I trying to merge some params:</p>\n\n<pre><code>def shared_incident_params\n    params.require(:drive_off_incident).permit(:incident_time, :product,\n      :amount_cents, :where_from, :where_to, car_attributes: [:brand_id,\n      :model, :color, :body_type, :plates], witness_attributes: [:first_name, :last_name, :email, :phone],\n      notes_attributes: [:id, :content])\n  end\n\n  def drive_off_incident_params\n    shared_incident_params.merge(person_description_attributes: [:height,\n      :age, :gender, :nationality, :features, :clothes])\n  end\n</code></pre>\n\n<p>But this code gives me the following error:</p>\n\n<pre><code>NoMethodError:\n   undefined method `with_indifferent_access' for [:height, :age, :gender, :nationality, :features, :clothes]:Array\n</code></pre>\n\n<p>any ideas?</p>\n"}, {"tags": ["ruby", "carrierwave", "minimagick"], "answers": [{"tags": [], "owner": {"reputation": 2374, "user_id": 3146509, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/HgDsp.jpg?s=128&g=1", "display_name": "Reza", "link": "https://stackoverflow.com/users/3146509/reza"}, "is_accepted": false, "score": 0, "last_activity_date": 1425154036, "creation_date": 1425154036, "answer_id": 28786283, "question_id": 28713680, "link": "https://stackoverflow.com/questions/28713680/carrierwave-sometimes-created-version-can-not-be-found/28786283#28786283", "title": "Carrierwave: sometimes created version can not be found", "body": "<p>We need to mention the following lines after the method. Apparently store_dimensions only works when the image is being uploaded. So, after that session expires, the version code won't be found. So the following two lines of code is necessary. </p>\n\n<pre><code>version :best do\nend\n</code></pre>\n\n<p>So, the code would be like the following.\n     process :store_dimensions</p>\n\n<pre><code> def store_dimensions\n     if file &amp;&amp; model\n      width, height = ::MiniMagick::Image.open(file.file)[:dimensions]\n        if width&gt;700\n              finalHeight=((700*height)/width)\n              self.class.version :best do\n                process :resize_to_fill =&gt; [700,finalHeight]\n              end\n        else\n              self.class.version :best do\n                process :resize_to_fill =&gt; [width,height]\n              end\n        end\n      end\nend\n\n\n #this would load compressed version during loading\n #if it is ommited, after restarting server, images won't be loaded\n version :best do\n end\n</code></pre>\n"}], "owner": {"reputation": 2374, "user_id": 3146509, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/HgDsp.jpg?s=128&g=1", "display_name": "Reza", "link": "https://stackoverflow.com/users/3146509/reza"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 141, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1425154036, "creation_date": 1424850078, "question_id": 28713680, "link": "https://stackoverflow.com/questions/28713680/carrierwave-sometimes-created-version-can-not-be-found", "title": "Carrierwave: sometimes created version can not be found", "body": "<p>My Carrierwave uploader file is like this, and I've checked that the new version is created correctly. The problem is , sometimes the view part can't find the created version.</p>\n\n<pre><code> class ImageUploader &lt; CarrierWave::Uploader::Base\n  include CarrierWave::MiniMagick\n  storage :fog\n\n  def store_dir\n   \"uploads/#{model.class.to_s.underscore}/#{mounted_as}/#{model.id}\"\n  end\n\n  def store_dimensions\n     if file &amp;&amp; model\n      width, height = ::MiniMagick::Image.open(file.file)[:dimensions]\n        if width&gt;700\n              finalHeight=((700*height)/width)\n              self.class.version :best_fit do\n                process :resize_to_fill =&gt; [700,finalHeight]\n              end\n        else\n              self.class.version :best_fit do\n                process :resize_to_fill =&gt; [width,height]\n              end\n        end\n        end\n  end\n\n#run the store_dimensions methods\n  process :store_dimensions\n\nend\n</code></pre>\n\n<p>The view file is like:</p>\n\n<pre><code>&lt;%= image_tag pp.image_url(:best_fit), id: \"plot-image-#{pp.id}\" %&gt;\n</code></pre>\n\n<p>After uploading, sometimes the page is displayed, sometimes the following message is shown:</p>\n\n<pre><code>ActionView::Template::Error (Version best_fit doesn't exist!):\n</code></pre>\n"}, {"tags": ["ruby", "erb", "ruby-1.8.7"], "comments": [{"owner": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "edited": false, "score": 2, "creation_date": 1424848970, "post_id": 28713300, "comment_id": 45714576, "body": "Ruby 1.8.7 is no longer supported."}, {"owner": {"reputation": 13257, "user_id": 335717, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66fc33d259df37b17198d0d76e0ac169?s=128&d=identicon&r=PG", "display_name": "Radek Simko", "link": "https://stackoverflow.com/users/335717/radek-simko"}, "reply_to_user": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "edited": false, "score": 1, "creation_date": 1424849388, "post_id": 28713300, "comment_id": 45714770, "body": "@MarekLipka That depends on a library you&#39;re using I guess..."}, {"owner": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "edited": false, "score": 0, "creation_date": 1424849590, "post_id": 28713300, "comment_id": 45714872, "body": "<code>erb</code> is a part of Ruby std lib."}, {"owner": {"reputation": 13257, "user_id": 335717, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66fc33d259df37b17198d0d76e0ac169?s=128&d=identicon&r=PG", "display_name": "Radek Simko", "link": "https://stackoverflow.com/users/335717/radek-simko"}, "reply_to_user": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "edited": false, "score": 0, "creation_date": 1424849847, "post_id": 28713300, "comment_id": 45715007, "body": "um, I meant project/tool/anything you&#39;re working on or contributing to that uses Ruby 1.8.7 for any reason or maintains compatibility with it."}, {"owner": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "edited": false, "score": 2, "creation_date": 1424849919, "post_id": 28713300, "comment_id": 45715031, "body": "So I meant Ruby 1.8.7 is no longer maintained by Ruby team. Reporting bugs to it is therefore pointless. <a href=\"https://www.ruby-lang.org/en/news/2013/06/30/we-retire-1-8-7/\" rel=\"nofollow noreferrer\">ruby-lang.org/en/news/2013/06/30/we-retire-1-8-7</a>"}, {"owner": {"reputation": 109029, "user_id": 2767755, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/BkC8q.jpg?s=128&g=1", "display_name": "Arup Rakshit", "link": "https://stackoverflow.com/users/2767755/arup-rakshit"}, "edited": false, "score": 0, "creation_date": 1424850672, "post_id": 28713300, "comment_id": 45715371, "body": "Well.. Now you can file a BUG(as you have reproduced it in 2.0.0).. Lets see what they say. The problem lies in ERB.."}], "answers": [{"comments": [{"owner": {"reputation": 13257, "user_id": 335717, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66fc33d259df37b17198d0d76e0ac169?s=128&d=identicon&r=PG", "display_name": "Radek Simko", "link": "https://stackoverflow.com/users/335717/radek-simko"}, "edited": false, "score": 0, "creation_date": 1425828369, "post_id": 28880460, "comment_id": 46112100, "body": "Great answer, thanks! This is the most important bit: &quot;All this happens, because the output of erb -x is not supposed to be run on its own.&quot;"}], "tags": [], "owner": {"reputation": 35107, "user_id": 1120015, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ID1fe.png?s=128&g=1", "display_name": "Uri Agassi", "link": "https://stackoverflow.com/users/1120015/uri-agassi"}, "is_accepted": true, "score": 4, "last_activity_date": 1425567044, "last_edit_date": 1425567044, "creation_date": 1425566398, "answer_id": 28880460, "question_id": 28713300, "link": "https://stackoverflow.com/questions/28713300/why-does-an-empty-erb-file-cause-a-warning-in-ruby-1-8-7/28880460#28880460", "title": "Why does an empty ERB file cause a warning in Ruby 1.8.7?", "body": "<p>The warning is caused by the second line: </p>\n\n<p><code>_erbout = '';</code><strong><code>_erbout</code></strong> </p>\n\n<p>which does nothing (<code>_erbout</code> is a local variable in that scope), and it is in a context where is does not return the value of the line (like in a last line of a method).</p>\n\n<p>In Ruby 2.0.0 this line is replaced with </p>\n\n<p><code>_erbout = '';</code><strong><code>_erbout.force_encoding(__ENCODING__)</code></strong>. </p>\n\n<p>Now ruby does not know for sure if the method call has any side-effects or not, so the warning is not raised.</p>\n\n<p>You can reproduce this with the following code:</p>\n\n<p>useless.rb</p>\n\n<pre><code>def test_me\n  unused = 1\n  unused\n  3\nend\n\np test_me\n</code></pre>\n\n<pre class=\"lang-sh prettyprint-override\"><code>$ ruby -w useless.rb\nuseless.rb:3: warning: possibly useless use of a variable in void context\n3\n</code></pre>\n\n<p>All this happens, because the output of <code>erb -x</code> is not supposed to be run on its own. When running a ruby script, the last line is <em>not</em> used as return value, unlike a method.</p>\n\n<p>If you embed the code in a program, and actually use the <code>_erbout</code>, the warning will not be shown.</p>\n"}], "owner": {"reputation": 13257, "user_id": 335717, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66fc33d259df37b17198d0d76e0ac169?s=128&d=identicon&r=PG", "display_name": "Radek Simko", "link": "https://stackoverflow.com/users/335717/radek-simko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 856, "favorite_count": 0, "accepted_answer_id": 28880460, "answer_count": 1, "score": 1, "last_activity_date": 1425567044, "creation_date": 1424848718, "last_edit_date": 1424851069, "question_id": 28713300, "link": "https://stackoverflow.com/questions/28713300/why-does-an-empty-erb-file-cause-a-warning-in-ruby-1-8-7", "title": "Why does an empty ERB file cause a warning in Ruby 1.8.7?", "body": "<p>I understand what the following warning means:</p>\n\n<blockquote>\n  <p>-:1: warning: useless use of a variable in void context</p>\n</blockquote>\n\n<p>But I don't understand why ERB in Ruby 1.8.7 generates code that uses <code>_erbout</code> variable in void context:</p>\n\n<pre><code>$ rvm use ruby 1.8.7\nUsing /Users/radeksimko/.rvm/gems/ruby-1.8.7-head\n$ touch test.erb\n$ erb -x test.erb\n_erbout = ''; _erbout\n$ erb -x test.erb | ruby -w\n-:1: warning: useless use of a variable in void context\n</code></pre>\n\n<p>This is not a problem in ERB / Ruby 2.0.0+ though as ERB generates code from the template differently:</p>\n\n<pre><code>$ rvm use 2.0.0\nUsing /Users/radeksimko/.rvm/gems/ruby-2.0.0-p598\n$ erb -x test.erb\n#coding:ASCII-8BIT\n_erbout = ''; _erbout.force_encoding(__ENCODING__)\n$ erb -x test.erb | ruby -w\n$\n</code></pre>\n\n<p>To be clear, this has nothing to do with <code>_</code> (underscores) treating in variable names in between Ruby versions:</p>\n\n<pre><code>$ rvm use 2.0.0\nUsing /Users/radeksimko/.rvm/gems/ruby-2.0.0-p598\n$ echo \"erbout = ''; erbout\" | ruby -w\n-:1: warning: possibly useless use of a variable in void context\n$ rvm use 1.8.7\nUsing /Users/radeksimko/.rvm/gems/ruby-1.8.7-head\n$ echo \"erbout = ''; erbout\" | ruby -w\n-:1: warning: useless use of a variable in void context\n</code></pre>\n\n<p>Is this a bug that should be reported to Ruby/ERB core or am I just misunderstanding something?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3", "postgresql", "activerecord"], "comments": [{"owner": {"reputation": 14827, "user_id": 645886, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2abb0123e9484284a9cb2d36aa9854b3?s=128&d=identicon&r=PG&f=1", "display_name": "Surya", "link": "https://stackoverflow.com/users/645886/surya"}, "edited": false, "score": 0, "creation_date": 1424848032, "post_id": 28712952, "comment_id": 45714125, "body": "Your table names don&#39;t match with model&#39;s expected table names(i.e. <code>ticket_affiliates</code> instead of <code>tic_affs</code>,  <code>affiliates</code> instead of <code>affs</code>), is there something you&#39;ve not mentioned or omitted here by mistake?"}, {"owner": {"reputation": 384, "user_id": 3062270, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/1985ce4a2b8afa4ed3f9813bd4b7ef34?s=128&d=identicon&r=PG&f=1", "display_name": "sreenivas", "link": "https://stackoverflow.com/users/3062270/sreenivas"}, "reply_to_user": {"reputation": 14827, "user_id": 645886, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2abb0123e9484284a9cb2d36aa9854b3?s=128&d=identicon&r=PG&f=1", "display_name": "Surya", "link": "https://stackoverflow.com/users/645886/surya"}, "edited": false, "score": 0, "creation_date": 1424854156, "post_id": 28712952, "comment_id": 45716982, "body": "Sorry I have omitted consider it as tic_affs"}], "owner": {"reputation": 384, "user_id": 3062270, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/1985ce4a2b8afa4ed3f9813bd4b7ef34?s=128&d=identicon&r=PG&f=1", "display_name": "sreenivas", "link": "https://stackoverflow.com/users/3062270/sreenivas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 66, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1424932371, "creation_date": 1424847242, "last_edit_date": 1424932371, "question_id": 28712952, "link": "https://stackoverflow.com/questions/28712952/joining-multiple-table-to-fetch-email-id", "title": "Joining Multiple table to fetch email id", "body": "<p>I have 3 models </p>\n\n<p><strong>aff.rb</strong></p>\n\n<pre><code>has_many :tic_affs, inverse_of: :aff, dependent: :restrict_with_exception\nhas_many :tic, through: :tic_affs\n</code></pre>\n\n<p><strong>tic.rb</strong></p>\n\n<pre><code>has_one  :tic_aff, inverse_of: :tic, dependent: :restrict_with_exception\nhas_one  :aff, through: :tic_aff\n</code></pre>\n\n<p><strong>use.rb</strong></p>\n\n<pre><code>has_one :aff, inverse_of: :use, dependent: :restrict_with_exception\nhas_many :tics, class_name: \"Tic\"\n</code></pre>\n\n<p>i want to fetch email id from user table using joins could any one please help me in framing the Rails query</p>\n\n<p>This is the query i wrote to fetch email id's</p>\n\n<pre><code>select uses.email \nfrom tic_affs \nFULL OUTER JOIN affs ON tic_affs.aff_id=affs.id \nJOIN uses ON affs.use_id=uses.id;\n</code></pre>\n\n<p>if this query is right help me framing this into rails query </p>\n"}, {"tags": ["ruby", "padrino"], "comments": [{"owner": {"reputation": 500, "user_id": 3037415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d02016001039ff03930f92cb2b4be71?s=128&d=identicon&r=PG&f=1", "display_name": "jgburet", "link": "https://stackoverflow.com/users/3037415/jgburet"}, "edited": false, "score": 0, "creation_date": 1425289256, "post_id": 28712929, "comment_id": 45886108, "body": "All I read from [here][1] is <code>padrino rake ...</code>.        [1]: <a href=\"http://www.padrinorb.com/guides/rake-tasks\" rel=\"nofollow noreferrer\">padrinorb.com/guides/rake-tasks</a>"}], "answers": [{"tags": [], "owner": {"reputation": 357, "user_id": 2173948, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/51f7778376f69ee84eaed8ee95f05fb2?s=128&d=identicon&r=PG", "display_name": "radiantRazor", "link": "https://stackoverflow.com/users/2173948/radiantrazor"}, "is_accepted": true, "score": 0, "last_activity_date": 1440063585, "creation_date": 1440063585, "answer_id": 32114776, "question_id": 28712929, "link": "https://stackoverflow.com/questions/28712929/how-to-run-a-script-in-a-padrino-context-by-passing-the-script-path-to-padrino/32114776#32114776", "title": "How to run a script in a padrino context by passing the script path to padrino", "body": "<pre><code>cat script/my_script.rb | padrino console\n</code></pre>\n\n<p>This worked for me</p>\n"}], "owner": {"reputation": 357, "user_id": 2173948, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/51f7778376f69ee84eaed8ee95f05fb2?s=128&d=identicon&r=PG", "display_name": "radiantRazor", "link": "https://stackoverflow.com/users/2173948/radiantrazor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 169, "favorite_count": 1, "accepted_answer_id": 32114776, "answer_count": 1, "score": 0, "last_activity_date": 1440063767, "creation_date": 1424847146, "last_edit_date": 1495540681, "question_id": 28712929, "link": "https://stackoverflow.com/questions/28712929/how-to-run-a-script-in-a-padrino-context-by-passing-the-script-path-to-padrino", "title": "How to run a script in a padrino context by passing the script path to padrino", "body": "<p>How to run a script in a padrino context by passing the script path to padrino?\nI see that similar feature is available in rails:\n<a href=\"https://stackoverflow.com/questions/1294596/executing-ruby-script-in-an-rails-application\">Executing Ruby script in an Rails application</a></p>\n\n<p>The padrino website: <a href=\"http://www.padrinorb.com/guides/development-commands\" rel=\"nofollow noreferrer\">http://www.padrinorb.com/guides/development-commands</a>\nsays this can be done by running</p>\n\n<pre><code>$ padrino r script/my_script.rb\n</code></pre>\n\n<p>But I get the error :</p>\n\n<pre><code>Could not find task \"r\".\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "heroku", "imagemagick", "rmagick"], "answers": [{"comments": [{"owner": {"reputation": 2150, "user_id": 618380, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/4znCJ.png?s=128&g=1", "display_name": "Andrew WC Brown", "link": "https://stackoverflow.com/users/618380/andrew-wc-brown"}, "edited": false, "score": 0, "creation_date": 1461693433, "post_id": 29810800, "comment_id": 61311368, "body": "If you are setting up ImageMagick yourself on your on unix build I found that these versions resulted in resolving the error above.  rmagick (2.13.2) ImageMagick 6.7.7-10"}], "tags": [], "owner": {"reputation": 73, "user_id": 3648759, "user_type": "registered", "accept_rate": 25, "profile_image": "https://graph.facebook.com/670906291/picture?type=large", "display_name": "Josh Paul", "link": "https://stackoverflow.com/users/3648759/josh-paul"}, "is_accepted": false, "score": 0, "last_activity_date": 1429745378, "creation_date": 1429745378, "answer_id": 29810800, "question_id": 28712882, "link": "https://stackoverflow.com/questions/28712882/rmagick-must-specify-image-size-in-heroku/29810800#29810800", "title": "RMagick: Must specify image size (in Heroku)", "body": "<p>You are most likely having a compatibility issue between rMagick and ImageMagick (which rMagick uses). I had the reverse problem: reading images suddenly didn't work locally, but worked fine on production.</p>\n\n<p>I just read that Heroku is using a very old version of ImageMagick (6.5, but that may have changed.)  I would try downgrading the version of rMagick you are using by setting it in your Gemfile. I'm using v 2.13.3.</p>\n\n<p><code>gem \"rmagick\", \"2.13.3\", :require =&gt; \"RMagick\"</code></p>\n"}], "owner": {"reputation": 1, "user_id": 4337639, "user_type": "registered", "profile_image": "https://graph.facebook.com/864060054/picture?type=large", "display_name": "Benedict Tan", "link": "https://stackoverflow.com/users/4337639/benedict-tan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 572, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1429745378, "creation_date": 1424846925, "question_id": 28712882, "link": "https://stackoverflow.com/questions/28712882/rmagick-must-specify-image-size-in-heroku", "title": "RMagick: Must specify image size (in Heroku)", "body": "<p>I managed to run this line in development with no problem:</p>\n\n<pre><code>canvas = Magick::Image.read(\"caption:#{something}\")\n</code></pre>\n\n<p>But deploying in Heroku, this message appears:</p>\n\n<pre><code>Magick::ImageMagickError (must specify image size `something?' @ error/caption.c/ReadCAPTIONImage/135)\n</code></pre>\n\n<p>Is there any way to proceed without providing image dimensions? I need to these image files with text on the fly and I can't provide an exact width.</p>\n\n<p>Thank you</p>\n"}, {"tags": ["ruby", "substring"], "answers": [{"comments": [{"owner": {"reputation": 13534, "user_id": 644810, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/ADwSQ.png?s=128&g=1", "display_name": "Rustam A. Gasanov", "link": "https://stackoverflow.com/users/644810/rustam-a-gasanov"}, "reply_to_user": {"reputation": 1347, "user_id": 1929187, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/4ec85f02401d596848f4aef24110afd9?s=128&d=identicon&r=PG", "display_name": "0aslam0", "link": "https://stackoverflow.com/users/1929187/0aslam0"}, "edited": false, "score": 0, "creation_date": 1424847607, "post_id": 28712813, "comment_id": 45713926, "body": "@GaganGami of course. You may also visit <a href=\"http://rubular.com/\" rel=\"nofollow noreferrer\">rubular</a> for extra tips."}], "tags": [], "owner": {"reputation": 13534, "user_id": 644810, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/ADwSQ.png?s=128&g=1", "display_name": "Rustam A. Gasanov", "link": "https://stackoverflow.com/users/644810/rustam-a-gasanov"}, "is_accepted": false, "score": 4, "last_activity_date": 1424847846, "last_edit_date": 1424847846, "creation_date": 1424846599, "answer_id": 28712813, "question_id": 28712550, "link": "https://stackoverflow.com/questions/28712550/ruby-extract-substring-from-an-array-of-strings/28712813#28712813", "title": "Ruby extract substring from an array of strings", "body": "<pre><code>s = [\"hello how are you?\", \"I am fine.What are you doing?\", \"Hey, I am having a haircut. See you at Hotel KingsMen at 10 am.\"]\ns.join.scan(/Hotel\\s(.+)?\\sat\\s(.+)?\\./).flatten\n#=&gt; [\"KingsMen\", \"10 am\"]\n</code></pre>\n\n<p>Regex description:</p>\n\n<ol>\n<li><p><code>\\s</code> - any whitespace character, </p></li>\n<li><p><code>.</code> - any character, <code>.+</code> - one or more of any character, <code>()</code> - capture everything inside, so <code>(.+)</code> - capture one or more characters</p></li>\n<li><p><code>a?</code> means zero or one of <code>a</code></p></li>\n</ol>\n"}, {"comments": [{"owner": {"reputation": 1347, "user_id": 1929187, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/4ec85f02401d596848f4aef24110afd9?s=128&d=identicon&r=PG", "display_name": "0aslam0", "link": "https://stackoverflow.com/users/1929187/0aslam0"}, "edited": false, "score": 0, "creation_date": 1424854454, "post_id": 28713384, "comment_id": 45717156, "body": "I am sorry. Where is the output? You are using binary negation operator for what purpose?"}], "tags": [], "owner": {"reputation": 661, "user_id": 2481868, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ku8h9.jpg?s=128&g=1", "display_name": "pkrawat1", "link": "https://stackoverflow.com/users/2481868/pkrawat1"}, "is_accepted": false, "score": 0, "last_activity_date": 1424855017, "last_edit_date": 1424855017, "creation_date": 1424848989, "answer_id": 28713384, "question_id": 28712550, "link": "https://stackoverflow.com/questions/28712550/ruby-extract-substring-from-an-array-of-strings/28713384#28713384", "title": "Ruby extract substring from an array of strings", "body": "<p>You could also use select method like this</p>\n\n<pre><code>[\n  \"hello how are you?\", \"I am fine.What are you doing?\",\n  \"Hey, I am having a haircut. See you at Hotel KingsMen at 10 am.\"\n].select{|str| str =~ /Hotel\\s(.+)?\\sat\\s(.+)?\\./}\n\n#=&gt;  [\"Hey, I am having a haircut. See you at Hotel KingsMen at 10 am.\"]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1739, "user_id": 2863439, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7c95bb944bbbe597543ae8a88987995?s=128&d=identicon&r=PG&f=1", "display_name": "limekin", "link": "https://stackoverflow.com/users/2863439/limekin"}, "is_accepted": false, "score": 0, "last_activity_date": 1424850301, "creation_date": 1424850301, "answer_id": 28713724, "question_id": 28712550, "link": "https://stackoverflow.com/questions/28712550/ruby-extract-substring-from-an-array-of-strings/28713724#28713724", "title": "Ruby extract substring from an array of strings", "body": "<p>In case you want to keep your current solution and do not want to use a global variable, then I suggest you use 'reduce' method : </p>\n\n<pre><code>str = [\"hello how are you?\", \"I am fine.What are you doing?\", \"Hey, I am having a haircut. See you at Hotel KingsMen at 10 am.\"]\n\nstr.reduce([]) do |res, s|\n    res == [] ? s.scan(/(.*)Hotel(.*)at(.*)\\./) : res\nend\n# =&gt; [[\"Hey, I am having a haircut. See you at \", \" KingsMen \", \" 10 am\"]]\n</code></pre>\n\n<p>IMO, this makes the temporary variable used to hold and find the result as local as possible.</p>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": true, "score": 3, "last_activity_date": 1424855025, "creation_date": 1424855025, "answer_id": 28714938, "question_id": 28712550, "link": "https://stackoverflow.com/questions/28712550/ruby-extract-substring-from-an-array-of-strings/28714938#28714938", "title": "Ruby extract substring from an array of strings", "body": "<p>Here is your array:</p>\n\n<pre><code>arr = [\"hello how are you?\",\n       \"I am fine. What are you doing?\",\n       \"Hey, I am having a haircut. See you at Hotel KingsMen at 10 am.\"]\n</code></pre>\n\n<p>The first step is to join the elements into a string. I've chosen to use a space for the separator, but you could use something else:</p>\n\n<pre><code>str = arr.join(' ')\n  #=&gt; \"hello how...doing? Hey,...haircut. See you at Hotel KingsMen at 10 am.\" \n</code></pre>\n\n<p>Without loss of generality, let's suppose this string were one of the following:</p>\n\n<pre><code>str1 = \"See you at Hotel KingsMen at 10 am.\"  \nstr2 = \"See you at 10:15am at Kingsmen hotel on Bloor Street.\"  \n</code></pre>\n\n<p><strong>Which hotel?</strong></p>\n\n<p>Let's first look at how to get the name of the hotel. We want a method that will work with both of these strings. We assume that the name of the hotel is just two words, with one of those words being \"hotel\", but we don't know which of the two words comes first, and we allow \"hotel\" to begin with a capital or lowercase letter.</p>\n\n<p>We see in <code>str1</code> that it could be \"at Hotel\" or \"Hotel KingsMen\", and in <code>str2</code> it could be \"Kingston hotel\" or \"hotel on\". The correct result is obtained by making the reasonable assumption that the word other than \"hotel\" is capitalized.</p>\n\n<p>Here's one way to do it:</p>\n\n<pre><code>def hotel(str)\n  str[/\\b[hH]otel\\s+\\K[A-Z][a-zA-Z]*|[A-Z][a-zA-Z]*(?=\\s[Hh]otel\\b)/]\nend\n\nhotel(str1) #=&gt; \"KingsMen\" \nhotel(str2) #=&gt; \"Kingsmen\" \n</code></pre>\n\n<p>Here:</p>\n\n<ul>\n<li><code>\\b</code> is a (zero-width) word break</li>\n<li><code>\\K</code> means match what comes before but do not include it in the match that is returned.</li>\n<li><code>|</code> means match what comes before or what comes after.</li>\n<li><code>(?=\\s[Hh]otel\\b)</code> is a (\"zero-width\") positive lookahead, which indicates what must immediately follow what comes before, but is not part of the match.</li>\n</ul>\n\n<p><strong>What time?</strong></p>\n\n<p>Here we must make an assumption about the way time is expressed. Should \"noon\", \"1100 hours\" and \"14:21\" be possibilites? OK, this is just an exercise, so let's assume that it's a 12-hour clock with hours and possibly minutes, but no seconds.</p>\n\n<p>We could use the following regex to extract that information:</p>\n\n<pre><code>def time(str)\n  str[/\\b(?:1[012]|[1-9])(?::[0-5]{2})?\\s?(?:[ap]m?)/i]\nend\n\ntime(str1) #=&gt; \"10 am\" \ntime(str2) #=&gt; \"10:15am\" \n</code></pre>\n\n<p>Here:</p>\n\n<ul>\n<li>(?:...) is a non-capture group, which is part of the match.</li>\n<li><code>1[012]|[1-9]</code> says to match a) <code>1</code> followed by a <code>0</code>, <code>1</code> or <code>2</code>, or (<code>|</code>) b) one digit between <code>1</code> and <code>9</code>.</li>\n<li>the second colon in <code>(?::...)</code> indicates that a match beginning with a colon is to be made in another non-capture group).</li>\n<li><code>[0-5]{2}</code> means to match two (<code>{2}</code>) characters, each a digit between <code>0</code> and <code>5</code>.</li>\n<li><code>i</code> in <code>/i</code> means to disregard case.</li>\n</ul>\n\n<p>Suppose now we had:</p>\n\n<pre><code>str3 = \"I'm leaving at 9:30 am, so I'll see you at Hotel KingsMen at 10 am.\"  \n</code></pre>\n\n<p>We want to select \"10 am\" rather than \"9:30 am\". For that we need additional assumptions. For example, we might assume that the time is preceded by the word \"at\" and that \"at\" appears immediately after the name of the hotel:</p>\n\n<pre><code>Hotel KingsMen at 10am\n</code></pre>\n\n<p>or </p>\n\n<pre><code>Kingsmen hotel at 10:15 am\n</code></pre>\n\n<p>We could use a fairly complex regex to extract the time here, or we could first find the hotel name and it's location in the string, then look for the time immediately after.</p>\n"}], "owner": {"reputation": 1347, "user_id": 1929187, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/4ec85f02401d596848f4aef24110afd9?s=128&d=identicon&r=PG", "display_name": "0aslam0", "link": "https://stackoverflow.com/users/1929187/0aslam0"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1519, "favorite_count": 0, "accepted_answer_id": 28714938, "answer_count": 4, "score": 4, "last_activity_date": 1424855025, "creation_date": 1424845471, "question_id": 28712550, "link": "https://stackoverflow.com/questions/28712550/ruby-extract-substring-from-an-array-of-strings", "title": "Ruby extract substring from an array of strings", "body": "<p>I have an array of strings.</p>\n\n<pre><code>irb(main):009:0* str_arr\n=&gt; [\"hello how are you?\", \"I am fine.What are you doing?\", \"Hey, I am having a haircut. See you at Hotel KingsMen at 10 am.\"]\n</code></pre>\n\n<p>And I am trying to extract some info from it. The name of Hotel and the time.</p>\n\n<pre><code>irb(main):010:0&gt; q = str_arr[2].scan(/(.*)Hotel(.*)at(.*)\\./)\n=&gt; [[\"Hey, I am having a haircut. See you at \", \" KingsMen \", \" 10 am\"]]\n</code></pre>\n\n<p>The thing is I cannot fix the index at 2. I need something like this:</p>\n\n<pre><code>irb(main):023:0&gt; str_arr.each { |str| $res = str.scan(/(.*)Hotel(.*)at(.*)\\./) }\n=&gt; [\"hello how are you?\", \"I am fine.What are you doing?\", \"Hey, I am having a haircut. See you at Hotel KingsMen at 10 am.\"]\nirb(main):024:0&gt; $res\n=&gt; [[\"Hey, I am having a haircut. See you at \", \" KingsMen \", \" 10 am\"]]\n</code></pre>\n\n<p>But I don't want to use global variable. Any suggestions to improve my code?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "twitter-bootstrap"], "comments": [{"owner": {"reputation": 11404, "user_id": 599436, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1b6fa83b64b8ad9dc7643a68bf5c214d?s=128&d=identicon&r=PG", "display_name": "Jon Egeland", "link": "https://stackoverflow.com/users/599436/jon-egeland"}, "edited": false, "score": 1, "creation_date": 1424844056, "post_id": 28712205, "comment_id": 45712474, "body": "Some tips: 1) The <code>Gemfile</code> isn&#39;t relevant here, so you can take it out of your question. 2) The <code>application.css.scss</code> <i>is</i> relevant, so please add it."}, {"owner": {"reputation": 115, "user_id": 1907430, "user_type": "registered", "accept_rate": 33, "profile_image": "https://graph.facebook.com/100002030805833/picture?type=large", "display_name": "Rakesh Jha", "link": "https://stackoverflow.com/users/1907430/rakesh-jha"}, "edited": false, "score": 0, "creation_date": 1424850545, "post_id": 28712205, "comment_id": 45715319, "body": "Are you trying to build a Rails4 app from scratch with bootstrap3 ? If yes, please try (<a href=\"https://github.com/Jrakesh/rails4-kickoff\" rel=\"nofollow noreferrer\">github.com/Jrakesh/rails4-kickoff</a>) or <a href=\"https://github.com/RailsApps/rails-devise\" rel=\"nofollow noreferrer\">RailsApps</a>. I got help from these."}], "owner": {"reputation": 13, "user_id": 4590484, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/618777b9e705a8e4ff9d8269f01efbe7?s=128&d=identicon&r=PG&f=1", "display_name": "subhrajyoti pradhan", "link": "https://stackoverflow.com/users/4590484/subhrajyoti-pradhan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 59, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1424866341, "creation_date": 1424843897, "question_id": 28712205, "link": "https://stackoverflow.com/questions/28712205/twitter-bootstrap-issue-using-ruby-on-rails", "title": "Twitter bootstrap issue using Ruby on Rails", "body": "<p>Can anybody please solve me one issue regarding bootstrap using in ROR.</p>\n\n<h1>Issue:</h1>\n\n<p>I have integrated gem \"'bootstrap-sass', '3.2.0.2'\" in my gem file.After adding some bootstrap navigation code in application.html.erb,it is showing one nice bootstrap navigation bar.If i am doing some changes in style sheet and refreshes the page it is splitting means the nav menu lists is not coming in inline and next time onward it is repeating.Actually i want the original nav bootstrap bar even if I did any changes in style sheet.</p>\n\n<p>Please check my below code snippets and make it correct.</p>\n\n<p>My codes are as follows:</p>\n\n<h1>Gemfile</h1>\n\n<pre><code>source 'https://rubygems.org'\n\ngem 'rails', '3.2.19'\n\n# Bundle edge Rails instead:\n# gem 'rails', :git =&gt; 'git://github.com/rails/rails.git'\n\ngem 'sqlite3'\n\n\n# Gems used only for assets and not required\n# in production environments by default.\ngroup :assets do\n  gem 'sass-rails',   '~&gt; 3.2.3'\n  gem 'coffee-rails', '~&gt; 3.2.1'\n\n  # See https://github.com/sstephenson/execjs#readme for more supported runtimes\n  # gem 'therubyracer', :platforms =&gt; :ruby\n\n  gem 'uglifier', '&gt;= 1.0.3'\nend\n\ngem 'jquery-rails'\n\n# To use ActiveModel has_secure_password\n# gem 'bcrypt-ruby', '~&gt; 3.0.0'\n\n# To use Jbuilder templates for JSON\n# gem 'jbuilder'\n\n# Use unicorn as the app server\n# gem 'unicorn'\n\n# Deploy with Capistrano\n# gem 'capistrano'\n\n# To use debugger\n# gem 'debugger'\ngem 'bootstrap-sass', '3.2.0.2'\n</code></pre>\n\n<h1>homes.css.scss</h1>\n\n<pre><code>@import \"bootstrap-sprockets\";\n@import \"bootstrap\";\nbody {\n  padding-top: 60px;\n}\n</code></pre>\n\n<h1>application.html.erb</h1>\n\n<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n&lt;head&gt;\n  &lt;title&gt;LibraryManagement&lt;/title&gt;\n  &lt;%= stylesheet_link_tag    \"application\", :media =&gt; \"all\" %&gt;\n  &lt;%= javascript_include_tag \"application\" %&gt;\n  &lt;%= csrf_meta_tags %&gt;\n&lt;/head&gt;\n&lt;body&gt;\n&lt;header class=\"navbar navbar-fixed-top navbar-default\"&gt;\n      &lt;div class=\"container\"&gt;\n        &lt;%= link_to \"Library Management System\", '#', id: \"logo\" %&gt;\n        &lt;nav&gt;\n          &lt;ul class=\"nav navbar-nav navbar-right\"&gt;\n            &lt;li&gt;&lt;%= link_to \"Home\",   '#' %&gt;&lt;/li&gt;\n            &lt;li&gt;&lt;%= link_to \"Books\",   '#' %&gt;&lt;/li&gt;\n            &lt;li&gt;&lt;%= link_to \"Member Entry\", '#' %&gt;&lt;/li&gt;\n            &lt;li&gt;&lt;%= link_to \"Admin Login\", '#' %&gt;&lt;/li&gt;\n          &lt;/ul&gt;\n        &lt;/nav&gt;\n      &lt;/div&gt;\n    &lt;/header&gt;\n    &lt;div class=\"container\"&gt;\n      &lt;%= yield %&gt;\n    &lt;/div&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<h1>homes/index.html.erb</h1>\n\n<pre><code>&lt;h1&gt;Index page&lt;/h1&gt;\n</code></pre>\n\n<p>Please help me.Thanks in advance.</p>\n"}, {"tags": ["ruby", "ssh"], "comments": [{"owner": {"reputation": 1087, "user_id": 4493368, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14606ea8342583f94b4c66bcf392cadc?s=128&d=identicon&r=PG&f=1", "display_name": "Cui Heng", "link": "https://stackoverflow.com/users/4493368/cui-heng"}, "edited": false, "score": 1, "creation_date": 1424843855, "post_id": 28712097, "comment_id": 45712401, "body": "I am afraid there is no API available in SSH for this usage. <a href=\"http://www.ietf.org/rfc/rfc4251.txt\" rel=\"nofollow noreferrer\">ietf.org/rfc/rfc4251.txt</a>  However, if you are running linux on the ssh server side, you can use &quot;du -msh&quot; to get the total size of a certain directory."}], "answers": [{"tags": [], "owner": {"reputation": 14407, "user_id": 3035830, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/14809f2ad7f14e2867798697ab8f8006?s=128&d=identicon&r=PG", "display_name": "shivam", "link": "https://stackoverflow.com/users/3035830/shivam"}, "is_accepted": false, "score": 2, "last_activity_date": 1424845177, "last_edit_date": 1424845177, "creation_date": 1424843926, "answer_id": 28712212, "question_id": 28712097, "link": "https://stackoverflow.com/questions/28712097/get-the-size-of-a-repository-over-ssh-or-sftp-in-ruby/28712212#28712212", "title": "Get the size of a repository over SSH or SFTP in Ruby", "body": "<p>You can proceed like this:</p>\n\n<pre><code>SPECIFIC_SIZE = 100\nNet::SSH.start('host', 'user', :password =&gt; \"password\") do |ssh|\n  output = ssh.exec!(\"find /path/to/dir -type f | wc -l\")\n  if output.to_i &gt; SPECIFIC_SIZE\n    ssh.exec!(\"tar czf somedir.tar /path/to/dir\") #your terminal tar command\n  end\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2430, "user_id": 1514990, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/2366019f03d3dc7dcc12f791d358a336?s=128&d=identicon&r=PG", "display_name": "PJ Bergeron", "link": "https://stackoverflow.com/users/1514990/pj-bergeron"}, "edited": false, "score": 0, "creation_date": 1424847083, "post_id": 28712640, "comment_id": 45713702, "body": "Thanks. I used this line to get the size in bytes: <code>size = ssh.exec!(&quot;du -sb #{path} | cut -f1&quot;)</code>"}, {"owner": {"reputation": 32543, "user_id": 528726, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/6307569a99dd77fff0463032051d7e39?s=128&d=identicon&r=PG", "display_name": "joelparkerhenderson", "link": "https://stackoverflow.com/users/528726/joelparkerhenderson"}, "reply_to_user": {"reputation": 2430, "user_id": 1514990, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/2366019f03d3dc7dcc12f791d358a336?s=128&d=identicon&r=PG", "display_name": "PJ Bergeron", "link": "https://stackoverflow.com/users/1514990/pj-bergeron"}, "edited": false, "score": 0, "creation_date": 1424847269, "post_id": 28712640, "comment_id": 45713775, "body": "Good, glad to know it works. Yes, <code>cut</code> and <code>awk</code> are equivalent for the typical use. For the more powerful use, <code>awk</code> is handy because it can sum easily."}], "tags": [], "owner": {"reputation": 32543, "user_id": 528726, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/6307569a99dd77fff0463032051d7e39?s=128&d=identicon&r=PG", "display_name": "joelparkerhenderson", "link": "https://stackoverflow.com/users/528726/joelparkerhenderson"}, "is_accepted": true, "score": 2, "last_activity_date": 1424880672, "last_edit_date": 1424880672, "creation_date": 1424845862, "answer_id": 28712640, "question_id": 28712097, "link": "https://stackoverflow.com/questions/28712097/get-the-size-of-a-repository-over-ssh-or-sftp-in-ruby/28712640#28712640", "title": "Get the size of a repository over SSH or SFTP in Ruby", "body": "<p>Implementation using the <code>ssh</code> gem:</p>\n\n<pre><code>require 'ssh'\ns = SSH.new \"example.com\"\nsize = s.run \"du -s /home/user | awk '{print $1}'\" \nputs size\n</code></pre>\n\n<p>Implementation using <code>Net::SSH</code>:</p>\n\n<pre><code>require 'net/ssh'\ns = Net::SSH.start(@hostname, @username, :password =&gt; @password)\nsize = s.exec!(\"du -s /home/user | awk '{print $1}'\")\nputs size\n</code></pre>\n\n<p>If your directory might have hidden items, then you can use a directory glob, or more-powerful more-flexible <code>find</code> command like this:</p>\n\n<pre><code>find /home/user -type d -maxdepth 1 -exec du -s {} + | \nawk '{sum = sum + $1}END{print sum}'\n</code></pre>\n"}], "owner": {"reputation": 2430, "user_id": 1514990, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/2366019f03d3dc7dcc12f791d358a336?s=128&d=identicon&r=PG", "display_name": "PJ Bergeron", "link": "https://stackoverflow.com/users/1514990/pj-bergeron"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 127, "favorite_count": 0, "accepted_answer_id": 28712640, "answer_count": 2, "score": 2, "last_activity_date": 1424880672, "creation_date": 1424843413, "question_id": 28712097, "link": "https://stackoverflow.com/questions/28712097/get-the-size-of-a-repository-over-ssh-or-sftp-in-ruby", "title": "Get the size of a repository over SSH or SFTP in Ruby", "body": "<p><strong>How can I get the size of a repository on an other host (with Net::SSH or Net::SFTP) in Ruby?</strong></p>\n\n<p>By the size of a repository, I mean the sum of all the files in this repository, recursively.</p>\n\n<p>I'd like to use this information to make sure the repository is smaller than a certain size. Then, if it is, I want to <code>tar</code> and download it.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "count"], "comments": [{"owner": {"reputation": 3171, "user_id": 3851249, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14baddf91060510963db71657ef6881f?s=128&d=identicon&r=PG", "display_name": "Demi Magus", "link": "https://stackoverflow.com/users/3851249/demi-magus"}, "edited": false, "score": 0, "creation_date": 1424872038, "post_id": 28711544, "comment_id": 45728049, "body": "what&#39;s the name for the column that count the number of visits? if you have that is a very simple solution. And what&#39;s the rails version that you are using?"}, {"owner": {"reputation": 37, "user_id": 4060420, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a85d37f39bf857e7afe1e8eede2718eb?s=128&d=identicon&r=PG&f=1", "display_name": "b1akely", "link": "https://stackoverflow.com/users/4060420/b1akely"}, "reply_to_user": {"reputation": 3171, "user_id": 3851249, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14baddf91060510963db71657ef6881f?s=128&d=identicon&r=PG", "display_name": "Demi Magus", "link": "https://stackoverflow.com/users/3851249/demi-magus"}, "edited": false, "score": 0, "creation_date": 1424880702, "post_id": 28711544, "comment_id": 45734539, "body": "@DemiMagus the column is impressions_count and I&#39;m using rails 4.1"}], "answers": [{"comments": [{"owner": {"reputation": 37, "user_id": 4060420, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a85d37f39bf857e7afe1e8eede2718eb?s=128&d=identicon&r=PG&f=1", "display_name": "b1akely", "link": "https://stackoverflow.com/users/4060420/b1akely"}, "edited": false, "score": 0, "creation_date": 1424904217, "post_id": 28726406, "comment_id": 45748361, "body": "This code works great for displaying the first 8 pins in my database, but it isnt displaying them in order of which pin has the most views. Is there anything I should add to sort by most viewed? I would like this to be so its most viewed in past 24 hours so it should be changing daily. You&#39;ve helped tremendously already so thank you"}, {"owner": {"reputation": 3171, "user_id": 3851249, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14baddf91060510963db71657ef6881f?s=128&d=identicon&r=PG", "display_name": "Demi Magus", "link": "https://stackoverflow.com/users/3851249/demi-magus"}, "reply_to_user": {"reputation": 37, "user_id": 4060420, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a85d37f39bf857e7afe1e8eede2718eb?s=128&d=identicon&r=PG&f=1", "display_name": "b1akely", "link": "https://stackoverflow.com/users/4060420/b1akely"}, "edited": false, "score": 0, "creation_date": 1424905501, "post_id": 28726406, "comment_id": 45748933, "body": "oh i forgot to add the 24 hours filter!"}, {"owner": {"reputation": 37, "user_id": 4060420, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a85d37f39bf857e7afe1e8eede2718eb?s=128&d=identicon&r=PG&f=1", "display_name": "b1akely", "link": "https://stackoverflow.com/users/4060420/b1akely"}, "edited": false, "score": 0, "creation_date": 1424908687, "post_id": 28726406, "comment_id": 45750096, "body": "Almost there! That solved the time issue. Now I am just trying to figure out why it is not ordered by # of page views. I have a counter_cache for each pin that stores # of unique views. This counter works and displays the number of views but the pins are only being ordered by updated_at and the view counts are neglected. Any ideas?"}, {"owner": {"reputation": 3171, "user_id": 3851249, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14baddf91060510963db71657ef6881f?s=128&d=identicon&r=PG", "display_name": "Demi Magus", "link": "https://stackoverflow.com/users/3851249/demi-magus"}, "reply_to_user": {"reputation": 37, "user_id": 4060420, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a85d37f39bf857e7afe1e8eede2718eb?s=128&d=identicon&r=PG&f=1", "display_name": "b1akely", "link": "https://stackoverflow.com/users/4060420/b1akely"}, "edited": false, "score": 0, "creation_date": 1424908870, "post_id": 28726406, "comment_id": 45750145, "body": "you said before that the counter was <code>impressions_count </code> and i&#39;m using that, but i&#39;m assuming that when you are updating the <code>impressions_count </code> or <code>counter_cache</code> you are also changing the updated at with an update query or something (maybe a <code>touch</code> to the model?)"}, {"owner": {"reputation": 37, "user_id": 4060420, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a85d37f39bf857e7afe1e8eede2718eb?s=128&d=identicon&r=PG&f=1", "display_name": "b1akely", "link": "https://stackoverflow.com/users/4060420/b1akely"}, "edited": false, "score": 0, "creation_date": 1424909952, "post_id": 28726406, "comment_id": 45750458, "body": "Okay yes I&#39;m having trouble figuring out where exactly the view count is being stored. I know it is being stored because it is showing on my page and it&#39;s working, but when I use counter_cache or impressions_cache I still have no luck. Thank you for your help as your solution is the correct solution the problem is something I am doing!"}, {"owner": {"reputation": 3171, "user_id": 3851249, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14baddf91060510963db71657ef6881f?s=128&d=identicon&r=PG", "display_name": "Demi Magus", "link": "https://stackoverflow.com/users/3851249/demi-magus"}, "reply_to_user": {"reputation": 37, "user_id": 4060420, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a85d37f39bf857e7afe1e8eede2718eb?s=128&d=identicon&r=PG&f=1", "display_name": "b1akely", "link": "https://stackoverflow.com/users/4060420/b1akely"}, "edited": false, "score": 0, "creation_date": 1424911307, "post_id": 28726406, "comment_id": 45750861, "body": "I&#39;m glad to know that i was helpful. Have you considered searching in other model? maybe that field is in a related model or something"}], "tags": [], "owner": {"reputation": 3171, "user_id": 3851249, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14baddf91060510963db71657ef6881f?s=128&d=identicon&r=PG", "display_name": "Demi Magus", "link": "https://stackoverflow.com/users/3851249/demi-magus"}, "is_accepted": true, "score": 0, "last_activity_date": 1424909033, "last_edit_date": 1424909033, "creation_date": 1424887523, "answer_id": 28726406, "question_id": 28711544, "link": "https://stackoverflow.com/questions/28711544/how-to-generate-a-view-for-most-viewed-posts/28726406#28726406", "title": "How to generate a view for most viewed posts", "body": "<p>I'm assuming that you are updating with every view of the site the column impressions_count in the Pin model.</p>\n\n<p>I will give you an example assuming that you want to show the top 8 most viewed post in your index action of the Pin Controller:</p>\n\n<h2>controllers/pins_controller.rb</h2>\n\n<pre><code>class PinsController &lt; ApplicationController\n\n  def index\n    #You can use whether 1.days.ago or 24.hours.ago\n    @top_eight_posts = Pin.where(updated_at: 1.days.ago..DateTime.now).order('impressions_count DESC').first(8)\n  end\n\nend\n</code></pre>\n\n<p>Then in your index view, or any view that matches the action in the controller, you just need to do an each loop to get the 8 top posts</p>\n\n<h2>views/pins/index.html.erb</h2>\n\n<pre><code>&lt;% @top_eight_posts.each do |post| %&gt;\n  &lt;!-- Assuming Pin Post have a title --&gt;\n  &lt;%= post.title %&gt;\n  &lt;!-- Assuming Pin Post have a content --&gt;\n  &lt;%= post.content %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>I hope it helps!!</p>\n\n<p>PD: Updated with the 24 hour filter</p>\n"}], "owner": {"reputation": 37, "user_id": 4060420, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a85d37f39bf857e7afe1e8eede2718eb?s=128&d=identicon&r=PG&f=1", "display_name": "b1akely", "link": "https://stackoverflow.com/users/4060420/b1akely"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 313, "favorite_count": 0, "accepted_answer_id": 28726406, "answer_count": 1, "score": 1, "last_activity_date": 1424909033, "creation_date": 1424840748, "last_edit_date": 1424843820, "question_id": 28711544, "link": "https://stackoverflow.com/questions/28711544/how-to-generate-a-view-for-most-viewed-posts", "title": "How to generate a view for most viewed posts", "body": "<p>I am trying to generate a view of the 8 most viewed posts in the last 24 hours in my rails app. I have implemented a view counter and it is working but I don't know how to locate the 8 most viewed. I would like each post to be shown inside of its own button type module. </p>\n\n<p>here is my pins model:</p>\n\n<pre><code>class Pin &lt; ActiveRecord::Base\nis_impressionable :counter_cache =&gt; true, :unique =&gt; true # view counter\n\nbelongs_to :user\nend\n</code></pre>\n\n<p>I would appreciate it if someone could explain what needs to be added to my pins controller and what to add to my view so that each top viewed pin is displayed in its own separate button. </p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 16527, "user_id": 3124288, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/6fa5b34aa1b0d8508347f48a8d596399?s=128&d=identicon&r=PG&f=1", "display_name": "JKillian", "link": "https://stackoverflow.com/users/3124288/jkillian"}, "edited": false, "score": 0, "creation_date": 1424842531, "post_id": 28710736, "comment_id": 45711994, "body": "No good ways come to mind immediately. Is there a reason you want to do this beyond the style difference?"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1424853847, "post_id": 28710736, "comment_id": 45716843, "body": "I don&#39;t think context should be aware of its surrounding scope. Using a block is the proper way to handle this."}, {"owner": {"reputation": 1066, "user_id": 3215470, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/rclPe.jpg?s=128&g=1", "display_name": "Andy Jones", "link": "https://stackoverflow.com/users/3215470/andy-jones"}, "edited": false, "score": 0, "creation_date": 1424882285, "post_id": 28710736, "comment_id": 45735716, "body": "Perhaps I&#39;m missing the point here, but the way you normally provide context to a block is to have it run against a class that encapsulates that context...?"}, {"owner": {"reputation": 992, "user_id": 1040598, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/d4aa83b606d76adae7b6631d586e2aad?s=128&d=identicon&r=PG", "display_name": "Felix Livni", "link": "https://stackoverflow.com/users/1040598/felix-livni"}, "reply_to_user": {"reputation": 16527, "user_id": 3124288, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/6fa5b34aa1b0d8508347f48a8d596399?s=128&d=identicon&r=PG&f=1", "display_name": "JKillian", "link": "https://stackoverflow.com/users/3124288/jkillian"}, "edited": false, "score": 0, "creation_date": 1424899535, "post_id": 28710736, "comment_id": 45746012, "body": "@JKillian, style + curiosity."}, {"owner": {"reputation": 992, "user_id": 1040598, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/d4aa83b606d76adae7b6631d586e2aad?s=128&d=identicon&r=PG", "display_name": "Felix Livni", "link": "https://stackoverflow.com/users/1040598/felix-livni"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1424899561, "post_id": 28710736, "comment_id": 45746031, "body": "@Stefan, agreed. I still want to know if it is possible. :)"}], "answers": [{"tags": [], "owner": {"reputation": 1013, "user_id": 2908285, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/905d24088d27a026570bd2049bf939e4?s=128&d=identicon&r=PG", "display_name": "mrodrigues", "link": "https://stackoverflow.com/users/2908285/mrodrigues"}, "is_accepted": false, "score": 0, "last_activity_date": 1436373578, "creation_date": 1436373578, "answer_id": 31298680, "question_id": 28710736, "link": "https://stackoverflow.com/questions/28710736/can-i-trigger-cleanup-on-leaving-scope/31298680#31298680", "title": "Can I trigger cleanup on leaving scope?", "body": "<p>Changing global state and expecting some hidden abstraction to cleanup/reset state is very error prone. If you don't like the block style, I'd recommend creating a new logger with the current context instead of changing the global state:</p>\n\n<pre><code>User.all do |u|\n  scoped_logger = custom_logger.with_context({ user_id: u.id })\n  # .. some code\n  scoped_logger.warn('something happened')\n  # .. some more code\nend\n</code></pre>\n"}], "owner": {"reputation": 992, "user_id": 1040598, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/d4aa83b606d76adae7b6631d586e2aad?s=128&d=identicon&r=PG", "display_name": "Felix Livni", "link": "https://stackoverflow.com/users/1040598/felix-livni"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 73, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1436373578, "creation_date": 1424835755, "question_id": 28710736, "link": "https://stackoverflow.com/questions/28710736/can-i-trigger-cleanup-on-leaving-scope", "title": "Can I trigger cleanup on leaving scope?", "body": "<p>Sometimes I find myself needing to attach context to a particular scope, releasing it once the scope has exited, e.g.</p>\n\n<pre><code>User.all do |u|\n  custom_logger.with_context({ user_id: u.id }) do\n    # .. some code\n    custom_logger.warn('something happened')\n    # .. some more code\n  end\nend\n</code></pre>\n\n<p>You see this pattern in rails, e.g.</p>\n\n<pre><code>I18n.with_locale(...) do\n  # some code\nend\n</code></pre>\n\n<p>I would like a similar behavior, but where cleanup could happen once I exit the current scope, e.g.</p>\n\n<pre><code>User.all do |u|\n  custom_logger.set_scoped_context({ user_id: u.id })\n  # .. some code\n  custom_logger.warn('something happened')\n  # .. some more code\nend \n</code></pre>\n\n<p>In the code above, I would like the behavior to be similar to the earlier example, but where context is scoped to the surrounding scope.</p>\n\n<p>Is this possible to achieve in ruby? </p>\n"}, {"tags": ["ruby", "sql-server", "windows-server"], "comments": [{"owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "edited": false, "score": 1, "creation_date": 1424834246, "post_id": 28710449, "comment_id": 45709797, "body": "There is. Any further answer would depend on what exactly you are doing, with which tools, and which kinds of errors you are anticipating. <code>rescue</code> and <code>if</code> probably figure prominently."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1424834385, "post_id": 28710449, "comment_id": 45709827, "body": "Welcome to Stack Overflow. Please reread your question and pretend like someone asked you the same question, and see if there is enough information for you to diagnose the problem and answer it. As is, it&#39;s way too broad and ill-defined. We need detail about what you&#39;re doing, including showing the minimal code necessary to demonstrate what you&#39;re doing. Without that we can&#39;t do much better than answer &quot;yes&quot;."}, {"owner": {"reputation": 105, "user_id": 2905629, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/320e7d923db8bc5a4260f940348df07c?s=128&d=identicon&r=PG&f=1", "display_name": "maggs", "link": "https://stackoverflow.com/users/2905629/maggs"}, "edited": false, "score": 0, "creation_date": 1424989427, "post_id": 28710449, "comment_id": 45789553, "body": "Hi I was looking for some general tips and maybe some good resources to look at. thanks"}], "owner": {"reputation": 105, "user_id": 2905629, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/320e7d923db8bc5a4260f940348df07c?s=128&d=identicon&r=PG&f=1", "display_name": "maggs", "link": "https://stackoverflow.com/users/2905629/maggs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 31, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1424833820, "creation_date": 1424833820, "question_id": 28710449, "link": "https://stackoverflow.com/questions/28710449/ruby-script-to-error-trap-when-importing-xml-files-into-an-sql-server-db", "title": "ruby script to error trap when importing XML files into an sql server DB", "body": "<p>I am using a rb file to create and download XML files from a postgresql DB from heroku onto our local Windows server. I\nA SQL script called from within the ruby script then migrates the XML into a sql server DB. \nThen another script is called to migrate some of the data into another SQL Server DB.\nIs there a way to catch errors if the XML to sql server migration is not correct?</p>\n\n<p>thanks\nmaggs</p>\n"}, {"tags": ["ruby", "google-app-engine", "cdn"], "comments": [{"owner": {"reputation": 34060, "user_id": 222467, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/e566810c16d40d7ab4f674df14edf6cb?s=128&d=identicon&r=PG", "display_name": "Igor Artamonov", "link": "https://stackoverflow.com/users/222467/igor-artamonov"}, "edited": false, "score": 0, "creation_date": 1424836306, "post_id": 28710428, "comment_id": 45710295, "body": "what programming language do you use btw? and which client library?"}, {"owner": {"reputation": 757655, "user_id": 95810, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e8d5fe90f1fe2148bf130cccd4dc311c?s=128&d=identicon&r=PG", "display_name": "Alex Martelli", "link": "https://stackoverflow.com/users/95810/alex-martelli"}, "edited": false, "score": 0, "creation_date": 1424837527, "post_id": 28710428, "comment_id": 45710555, "body": "<code>gsutil acl ch -u AllUsers:R gs:&#47;&#47;&lt;bucket-name&gt;&#47;foo.txt</code> will make the object readable by anybody on the internet (as for programming language, <code>gsutil</code> is a command-line thingy, so the language would typically be bash, cmd.exe, or some other shell one -- non-shell languages offer other APIs that are usually preferred when programming in such other languages)."}, {"owner": {"reputation": 493, "user_id": 3616806, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/5e239b7b5f6e0938a4393e0a639b0aa5?s=128&d=identicon&r=PG&f=1", "display_name": "Remember_me", "link": "https://stackoverflow.com/users/3616806/remember-me"}, "reply_to_user": {"reputation": 34060, "user_id": 222467, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/e566810c16d40d7ab4f674df14edf6cb?s=128&d=identicon&r=PG", "display_name": "Igor Artamonov", "link": "https://stackoverflow.com/users/222467/igor-artamonov"}, "edited": false, "score": 0, "creation_date": 1424872853, "post_id": 28710428, "comment_id": 45728610, "body": "@IgorArtamonov well ideally ruby, but I don&#39;t think it&#39;s supported right now, but bash is fine too."}, {"owner": {"reputation": 493, "user_id": 3616806, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/5e239b7b5f6e0938a4393e0a639b0aa5?s=128&d=identicon&r=PG&f=1", "display_name": "Remember_me", "link": "https://stackoverflow.com/users/3616806/remember-me"}, "reply_to_user": {"reputation": 757655, "user_id": 95810, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e8d5fe90f1fe2148bf130cccd4dc311c?s=128&d=identicon&r=PG", "display_name": "Alex Martelli", "link": "https://stackoverflow.com/users/95810/alex-martelli"}, "edited": false, "score": 0, "creation_date": 1424872930, "post_id": 28710428, "comment_id": 45728669, "body": "@AlexMartelli thanks for the response I&#39;ll go ahead and try that now. Wish I can do it in ruby, because I&#39;m trying to do it in automated process but bash is fine for now. Is this storage meant to be used for CDN?"}, {"owner": {"reputation": 757655, "user_id": 95810, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e8d5fe90f1fe2148bf130cccd4dc311c?s=128&d=identicon&r=PG", "display_name": "Alex Martelli", "link": "https://stackoverflow.com/users/95810/alex-martelli"}, "edited": false, "score": 0, "creation_date": 1424877856, "post_id": 28710428, "comment_id": 45732237, "body": "@Remember_me, to quote <a href=\"https://cloud.google.com/storage/docs/website-configuration\" rel=\"nofollow noreferrer\">cloud.google.com/storage/docs/website-configuration</a>, &quot;Google Cloud Storage behaves essentially like a Content Delivery Network (CDN) with no work on your part because publicly readable objects are, by default, cached in the Google Cloud Storage network&quot;.  And sure you can do it in Ruby, see <a href=\"https://developers.google.com/api-client-library/ruby/apis/storage/v1\" rel=\"nofollow noreferrer\">developers.google.com/api-client-library/ruby/apis/storage/v&zwnj;&#8203;1</a> -- in the future, I recommend you tag your Q as &quot;Ruby&quot; if it&#39;s about Ruby!-)"}, {"owner": {"reputation": 493, "user_id": 3616806, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/5e239b7b5f6e0938a4393e0a639b0aa5?s=128&d=identicon&r=PG&f=1", "display_name": "Remember_me", "link": "https://stackoverflow.com/users/3616806/remember-me"}, "reply_to_user": {"reputation": 757655, "user_id": 95810, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e8d5fe90f1fe2148bf130cccd4dc311c?s=128&d=identicon&r=PG", "display_name": "Alex Martelli", "link": "https://stackoverflow.com/users/95810/alex-martelli"}, "edited": false, "score": 0, "creation_date": 1424908133, "post_id": 28710428, "comment_id": 45749907, "body": "thanks @AlexMartelli would you like to add an answer, bash is fine for now. That worked for me. I&#39;m also taking a look at the ruby api, thanks. And I edited the tag"}, {"owner": {"reputation": 757655, "user_id": 95810, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e8d5fe90f1fe2148bf130cccd4dc311c?s=128&d=identicon&r=PG", "display_name": "Alex Martelli", "link": "https://stackoverflow.com/users/95810/alex-martelli"}, "edited": false, "score": 0, "creation_date": 1424915211, "post_id": 28710428, "comment_id": 45751870, "body": "@Remember_me, good idea, made the above content into an answer, thanks for reminding me to do it!"}], "answers": [{"tags": [], "owner": {"reputation": 757655, "user_id": 95810, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e8d5fe90f1fe2148bf130cccd4dc311c?s=128&d=identicon&r=PG", "display_name": "Alex Martelli", "link": "https://stackoverflow.com/users/95810/alex-martelli"}, "is_accepted": true, "score": 1, "last_activity_date": 1424915237, "creation_date": 1424915237, "answer_id": 28733092, "question_id": 28710428, "link": "https://stackoverflow.com/questions/28710428/uploading-to-google-app-engine-bucket-and-marking-file-as-a-public-files/28733092#28733092", "title": "Uploading to google app engine bucket and marking file as a public files", "body": "<p><code>gsutil acl ch -u AllUsers:R gs://&lt;bucket-name&gt;/foo.txt</code> will make the object readable by anybody on the internet (<code>gsutil</code> is a command-line thingy, so it would typically be used via <code>bash</code>, <code>cmd.exe</code>, or some other shell language -- non-shell languages offer other APIs that are usually preferred when programming in such other languages).</p>\n\n<p>As for the CDN sub-question, to quote <a href=\"http://cloud.google.com/storage/docs/website-configuration\" rel=\"nofollow\">http://cloud.google.com/storage/docs/website-configuration</a>:</p>\n\n<blockquote>\n  <p>Google Cloud Storage behaves essentially like a Content Delivery\n  Network (CDN) with no work on your part because publicly readable\n  objects are, by default, cached in the Google Cloud Storage network.</p>\n</blockquote>\n\n<p>Lastly, as the OP indicated specific interest in accessing GCS from Ruby, see <a href=\"http://developers.google.com/api-client-library/ruby/apis/storage/v1\" rel=\"nofollow\">http://developers.google.com/api-client-library/ruby/apis/storage/v1</a> for the purpose.</p>\n"}], "owner": {"reputation": 493, "user_id": 3616806, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/5e239b7b5f6e0938a4393e0a639b0aa5?s=128&d=identicon&r=PG&f=1", "display_name": "Remember_me", "link": "https://stackoverflow.com/users/3616806/remember-me"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 98, "favorite_count": 0, "accepted_answer_id": 28733092, "answer_count": 1, "score": 0, "last_activity_date": 1424915237, "creation_date": 1424833751, "last_edit_date": 1424908141, "question_id": 28710428, "link": "https://stackoverflow.com/questions/28710428/uploading-to-google-app-engine-bucket-and-marking-file-as-a-public-files", "title": "Uploading to google app engine bucket and marking file as a public files", "body": "<p>It seems pretty straight forward to upload files to your preexisting google storage bucket.</p>\n\n<pre><code>gsutil cp foo.txt gs://&lt;bucket-name&gt;\n</code></pre>\n\n<p>However do I make my file be publicly available? </p>\n\n<p><img src=\"https://i.stack.imgur.com/g2Bd9.png\" alt=\"enter image description here\"></p>\n\n<p>So one is publicly available other is not. \nHow do I change this programmatically, without having to do it from the web console? </p>\n\n<p>And is it smart idea to use google cloud storage as a CDN for you website, hosted on google app engine too?</p>\n"}, {"tags": ["ios", "ruby-on-rails", "ruby", "datetime", "nsdate"], "comments": [{"owner": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "edited": false, "score": 0, "creation_date": 1424836852, "post_id": 28710363, "comment_id": 45710392, "body": "You&#39;re not far off but check out the NTP article <a href=\"http://en.wikipedia.org/wiki/Network_Time_Protocol#Clock_synchronization_algorithm\" rel=\"nofollow noreferrer\">here</a>"}, {"owner": {"reputation": 18193, "user_id": 401092, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/cdc56942ca5219ccec6147129cbff41d?s=128&d=identicon&r=PG", "display_name": "Rog", "link": "https://stackoverflow.com/users/401092/rog"}, "reply_to_user": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "edited": false, "score": 0, "creation_date": 1424896553, "post_id": 28710363, "comment_id": 45744361, "body": "Thanks Anthony I had a look at that link but still fail to see how that helps with my question?"}, {"owner": {"reputation": 9921, "user_id": 488195, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/aa1e7477ba2f6c0ec47ed521f1cf1676?s=128&d=identicon&r=PG", "display_name": "dgilperez", "link": "https://stackoverflow.com/users/488195/dgilperez"}, "edited": false, "score": 0, "creation_date": 1425162653, "post_id": 28710363, "comment_id": 45851191, "body": "Which database are you using?"}, {"owner": {"reputation": 18193, "user_id": 401092, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/cdc56942ca5219ccec6147129cbff41d?s=128&d=identicon&r=PG", "display_name": "Rog", "link": "https://stackoverflow.com/users/401092/rog"}, "edited": false, "score": 0, "creation_date": 1425204202, "post_id": 28710363, "comment_id": 45859368, "body": "Thanks for your answer, it looks like a good solution. I&#39;ll do some tests with it and let you know what happens. I&#39;m using postgresql if it makes any difference."}], "answers": [{"tags": [], "owner": {"reputation": 9921, "user_id": 488195, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/aa1e7477ba2f6c0ec47ed521f1cf1676?s=128&d=identicon&r=PG", "display_name": "dgilperez", "link": "https://stackoverflow.com/users/488195/dgilperez"}, "is_accepted": true, "score": 1, "last_activity_date": 1425164250, "last_edit_date": 1425164250, "creation_date": 1425163770, "answer_id": 28787878, "question_id": 28710363, "link": "https://stackoverflow.com/questions/28710363/rails-api-vs-nsdate-precision-issues-when-comparing-dates/28787878#28787878", "title": "Rails API vs NSDate - Precision issues when comparing dates", "body": "<p>In this case, I think the best approach would be to store in the database and output as JSON <em>exactly</em> the same thing, to avoid any needs of conversion or rounding issues like that one. As I assume you'd like to preserve the 3-digit microsecond precision dates, I'd just configure your database to store dates with that precision as well. </p>\n\n<p>You can use a migration to modify the precision of the :created_at and :updated_at fields like this: </p>\n\n<pre><code>class MicrosecondsMigration &lt; ActiveRecord::Migration\n  def up\n    change_column :your_table, :created_at, :datetime, precision: 3\n    change_column :your_table, :updated_at, :datetime, precision: 3\n  end\n\n  def down\n    change_column :your_table, :created_at, :datetime\n    change_column :your_table, :updated_at, :datetime\n  end\nend\n</code></pre>\n\n<p>I believe that this will work with the major databases. <a href=\"https://github.com/rails/rails/commit/96ce1f2553f895bfd25e7ca677fb7ed746d04fdd\" rel=\"nofollow\">Check this commit at Rails</a> where support was added for Postgresql. If you are on MySQL, please note that only <a href=\"https://dev.mysql.com/doc/relnotes/mysql/5.6/en/news-5-6-4.html\" rel=\"nofollow\">MySQL 5.6.4 and above</a> supports DATETIME's with more precision than a second. That is not your problem, you already said your database stores 6 digits precision datetimes, but I think it's worth noting here.</p>\n\n<p>There are other approaches I can think of, though none looks better than the one described above, they may be worth noting as well: </p>\n\n<ul>\n<li>Change your query using some SQL to strip the extra digits from your date. I don't recommend going down that road: you'll need to take that into account in every query you need to do. Buggy, defeats AR purpose and looks ugly.</li>\n<li>Manually adding some milliseconds to your <code>ios_date</code>, which feels uglier.</li>\n<li>Of course, you can always change your JSON API to support the full 6 digits precision that your database handles. As I said before, I assumed that was not your intention.</li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 9921, "user_id": 488195, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/aa1e7477ba2f6c0ec47ed521f1cf1676?s=128&d=identicon&r=PG", "display_name": "dgilperez", "link": "https://stackoverflow.com/users/488195/dgilperez"}, "edited": false, "score": 0, "creation_date": 1425252449, "post_id": 28800242, "comment_id": 45874849, "body": "Good to see you solved your problem! I understand you went for the JSON precision extension to 6 digits (good thing to know it can be done!), but it still did not work for you since time comparisons kept failing. Can you show a practical example of such failures? And just out of curiosity: why are you then marking that approach as the accepted answer?"}, {"owner": {"reputation": 18193, "user_id": 401092, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/cdc56942ca5219ccec6147129cbff41d?s=128&d=identicon&r=PG", "display_name": "Rog", "link": "https://stackoverflow.com/users/401092/rog"}, "reply_to_user": {"reputation": 9921, "user_id": 488195, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/aa1e7477ba2f6c0ec47ed521f1cf1676?s=128&d=identicon&r=PG", "display_name": "dgilperez", "link": "https://stackoverflow.com/users/488195/dgilperez"}, "edited": false, "score": 0, "creation_date": 1425257424, "post_id": 28800242, "comment_id": 45876101, "body": "Sorry my bad, I&#39;ve accepted your answer as correct. My issue was specific to <code>NSDate</code> on iOS only returning 3 digits precision so the comparisons were still failing."}, {"owner": {"reputation": 9921, "user_id": 488195, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/aa1e7477ba2f6c0ec47ed521f1cf1676?s=128&d=identicon&r=PG", "display_name": "dgilperez", "link": "https://stackoverflow.com/users/488195/dgilperez"}, "edited": false, "score": 0, "creation_date": 1425257500, "post_id": 28800242, "comment_id": 45876120, "body": "Ok! Thanks for replying!"}], "tags": [], "owner": {"reputation": 18193, "user_id": 401092, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/cdc56942ca5219ccec6147129cbff41d?s=128&d=identicon&r=PG", "display_name": "Rog", "link": "https://stackoverflow.com/users/401092/rog"}, "is_accepted": false, "score": 1, "last_activity_date": 1425252049, "last_edit_date": 1425252049, "creation_date": 1425250437, "answer_id": 28800242, "question_id": 28710363, "link": "https://stackoverflow.com/questions/28710363/rails-api-vs-nsdate-precision-issues-when-comparing-dates/28800242#28800242", "title": "Rails API vs NSDate - Precision issues when comparing dates", "body": "<p>Even though the option of changing the precision limits for created_at and updated_at was a valid option, the cleanest / most \"Railsy\" solution I've found was to get <code>to_json</code>'s output to match the database precision.</p>\n\n<p>This can be achieved with one line of code:</p>\n\n<pre><code>ActiveSupport::JSON::Encoding.time_precision = 6\n</code></pre>\n\n<p>In practical terms this didn't really solve the problem as the underlying storage type for timestamps is a float so some time comparisons were still failing.</p>\n\n<p>In the end reducing the precision was the way to go for me as per answer from @dgilperez on this page.</p>\n"}], "owner": {"reputation": 18193, "user_id": 401092, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/cdc56942ca5219ccec6147129cbff41d?s=128&d=identicon&r=PG", "display_name": "Rog", "link": "https://stackoverflow.com/users/401092/rog"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 185, "favorite_count": 2, "accepted_answer_id": 28787878, "answer_count": 2, "score": 4, "last_activity_date": 1425252049, "creation_date": 1424833336, "question_id": 28710363, "link": "https://stackoverflow.com/questions/28710363/rails-api-vs-nsdate-precision-issues-when-comparing-dates", "title": "Rails API vs NSDate - Precision issues when comparing dates", "body": "<p>My iOS app consumes from a rails API that outputs JSON formatted dates with 3-digit microsecond precision, as per example below. This is parsed and saved for the corresponding entity, and NSDate retains the 3 digit precision as expected:</p>\n\n<pre><code>{ \"updated_at\": \"2015-02-24T22:37:57.683Z\" }\n</code></pre>\n\n<p>When I send this date back to the API for querying records, my <code>updated_at</code> field in the database seems to have (at least) 6 digit precision:</p>\n\n<pre><code>&gt;&gt; my_model.update_at.strftime('%Y-%m-%d %H:%M:%S.%N')\n&gt;&gt; 2015-02-24 22:37:57.683977000\n</code></pre>\n\n<p>This means every time I query for </p>\n\n<pre><code>&gt;&gt; ios_date = json_hash[\"updated_at\"]\n&gt;&gt; Model.where(\"updated_at &gt; ?\", ios_date) \n</code></pre>\n\n<p>I get one record that already exists in my app's database.</p>\n\n<p>I know I can add half a second to my <code>ios_date</code> to workaround this issue but this is obviously a hack.</p>\n\n<p>Can anyone recommend what is the most appropriate course of action in this case?</p>\n\n<p>TIA</p>\n"}, {"tags": ["sql", "ruby", "mysql2"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 2, "creation_date": 1424832916, "post_id": 28710277, "comment_id": 45709483, "body": "I&#39;d recommend <i>NOT</i> using the driver to talk to the database. Instead, step up one level and use an ORM. It will protect you in many ways, plus will make your life a lot easier in the long run. If you&#39;re not using Rails I&#39;d recommend looking at <a href=\"https://github.com/jeremyevans/sequel\" rel=\"nofollow noreferrer\">Sequel</a>."}, {"owner": {"reputation": 1, "user_id": 4602842, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-gdxn2vpq-a4/AAAAAAAAAAI/AAAAAAAAB8E/ffWE8VF7oGA/photo.jpg?sz=128", "display_name": "mawena", "link": "https://stackoverflow.com/users/4602842/mawena"}, "reply_to_user": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1424836354, "post_id": 28710277, "comment_id": 45710306, "body": "Thank you Tin Man.  I&#39;ve been thinking about using an ORM for a lot of reasons.   That said I&#39;m still wondering why this gem is returning an empty hash instead of the query results."}, {"owner": {"reputation": 1846, "user_id": 2816949, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/LPiwD.jpg?s=128&g=1", "display_name": "theartofbeing", "link": "https://stackoverflow.com/users/2816949/theartofbeing"}, "edited": false, "score": 0, "creation_date": 1424840399, "post_id": 28710277, "comment_id": 45711319, "body": "Agreed with the above comment, using an ORM will make things a lot easier. ActiveRecord is your friend."}, {"owner": {"reputation": 1, "user_id": 4602842, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-gdxn2vpq-a4/AAAAAAAAAAI/AAAAAAAAB8E/ffWE8VF7oGA/photo.jpg?sz=128", "display_name": "mawena", "link": "https://stackoverflow.com/users/4602842/mawena"}, "edited": false, "score": 0, "creation_date": 1424847468, "post_id": 28710277, "comment_id": 45713857, "body": "Thanks, I&#39;m implementing that now.  But I still don&#39;t have an answer to the original question."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1424891461, "post_id": 28710277, "comment_id": 45741462, "body": "We can&#39;t tell you why your query is returning nothing because we don&#39;t know what your query is. Nor do we know what your schema is. Nor do we know what data you have in the table. It&#39;s important to give us enough information for us to be able to help you."}, {"owner": {"reputation": 1, "user_id": 4602842, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-gdxn2vpq-a4/AAAAAAAAAAI/AAAAAAAAB8E/ffWE8VF7oGA/photo.jpg?sz=128", "display_name": "mawena", "link": "https://stackoverflow.com/users/4602842/mawena"}, "edited": false, "score": 0, "creation_date": 1424901087, "post_id": 28710277, "comment_id": 45746895, "body": "Sorry, I didn&#39;t make myself clear.  The query returns results when I run it directly in my client (Heidi 9.1)  But when I run that same query using  Mysql2 client it returns nothing."}], "owner": {"reputation": 1, "user_id": 4602842, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-gdxn2vpq-a4/AAAAAAAAAAI/AAAAAAAAB8E/ffWE8VF7oGA/photo.jpg?sz=128", "display_name": "mawena", "link": "https://stackoverflow.com/users/4602842/mawena"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 139, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1424832749, "creation_date": 1424832749, "question_id": 28710277, "link": "https://stackoverflow.com/questions/28710277/ruby-mysql2-client-returning-empty-results", "title": "Ruby- Mysql2 Client returning empty results", "body": "<p>I have an SQL query that I run on Heidi SQL 9.1.  It works fine and returns about 100 lines in 30 seconds. </p>\n\n<p>I try to do this same query in ruby.  When I try simple queries like   </p>\n\n<pre><code>select * from tiny_table limit 1   \n</code></pre>\n\n<p>It works fine.  But when I run my main query via ruby using Mysql2 and the following:</p>\n\n<pre><code>gateway = Net::SSH::Gateway.new('my_ssh',nil)\nport = gateway.open(\"127.0.0.1\",3306,3307)\nclient = Mysql2::Client.new(\nhost: \"127.0.0.1\",\nusername: '*****',\npassword: '****',\ndatabase: 'db',\nport: port\n)\ndata = client.query(\" MY QUERY \" )\n\n\n\ndata.each do |row|\n    puts \"#{row}\"\nend\n</code></pre>\n\n<p>I get nothing because data = {}</p>\n\n<p>Why is Msql2 client returning nothing all the time?</p>\n"}, {"tags": ["ruby", "constructor", "instance-variables", "splat"], "comments": [{"owner": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "edited": false, "score": 1, "creation_date": 1424832565, "post_id": 28710216, "comment_id": 45709399, "body": "will you also be adding attr_reader for these vars?"}, {"owner": {"reputation": 2935, "user_id": 817496, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/WdFnA.jpg?s=128&g=1", "display_name": "RedBassett", "link": "https://stackoverflow.com/users/817496/redbassett"}, "reply_to_user": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "edited": false, "score": 0, "creation_date": 1424832617, "post_id": 28710216, "comment_id": 45709409, "body": "Yes, thanks for mentioning! Updated example above!"}], "answers": [{"comments": [{"owner": {"reputation": 2935, "user_id": 817496, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/WdFnA.jpg?s=128&g=1", "display_name": "RedBassett", "link": "https://stackoverflow.com/users/817496/redbassett"}, "edited": false, "score": 0, "creation_date": 1424838489, "post_id": 28710302, "comment_id": 45710794, "body": "I was actually using an options hash initially, but stopped because I wanted to define all the possible instance variables. I&#39;m realizing now, however that this kinda makes sense as the Ruby way to do this. My concern, however, is trying to access variables that aren&#39;t defined at initialization. Am I approaching this wrong by trying to define defaults for all of these variables?"}, {"owner": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "reply_to_user": {"reputation": 2935, "user_id": 817496, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/WdFnA.jpg?s=128&g=1", "display_name": "RedBassett", "link": "https://stackoverflow.com/users/817496/redbassett"}, "edited": false, "score": 1, "creation_date": 1424867527, "post_id": 28710302, "comment_id": 45725052, "body": "Sure, that&#39;s a common use case and I updated my answer for a way to handle that."}, {"owner": {"reputation": 2935, "user_id": 817496, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/WdFnA.jpg?s=128&g=1", "display_name": "RedBassett", "link": "https://stackoverflow.com/users/817496/redbassett"}, "edited": false, "score": 0, "creation_date": 1424881941, "post_id": 28710302, "comment_id": 45735468, "body": "Yup! Merging defaults seems to be just what I was looking for!"}], "tags": [], "owner": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "is_accepted": true, "score": 5, "last_activity_date": 1424867502, "last_edit_date": 1424867502, "creation_date": 1424832900, "answer_id": 28710302, "question_id": 28710216, "link": "https://stackoverflow.com/questions/28710216/method-loop-through-arguments-with-defaults/28710302#28710302", "title": "Method: Loop Through Arguments with Defaults", "body": "<p>Typically having an initialize method require a whole bunch of arguments usually leads to the use of an options hash rather than splat. </p>\n\n<p>With an options hash you're able to dry up your initialize method, set instance variables and attr_readers in a very ruby way:</p>\n\n<pre><code>class Animal\n  def initialize(opts = {})\n    options = defaults.merge(opts)\n    options.each do |k, v|\n      instance_variable_set(\"@#{k}\", v)\n      self.class.send(:attr_reader, k)\n    end\n  end\n\n  private\n\n  def defaults\n    {\n      type: nil,\n      age: 100,\n      name: \"Unknown\"\n    }\n  end\nend\n\nanimal = Animal.new(type:'cat', age: 99)\nputs animal\nputs animal.type\nputs animal.age\nputs animal.name\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>#&lt;Animal:0x007f9773132650&gt;\ncat\n99\nUnknown\n</code></pre>\n"}], "owner": {"reputation": 2935, "user_id": 817496, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/WdFnA.jpg?s=128&g=1", "display_name": "RedBassett", "link": "https://stackoverflow.com/users/817496/redbassett"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 815, "favorite_count": 0, "accepted_answer_id": 28710302, "answer_count": 1, "score": 0, "last_activity_date": 1424867502, "creation_date": 1424832271, "last_edit_date": 1424832656, "question_id": 28710216, "link": "https://stackoverflow.com/questions/28710216/method-loop-through-arguments-with-defaults", "title": "Method: Loop Through Arguments with Defaults", "body": "<p>I am building a Ruby object that has defaults for arguments in its <code>initialize</code> method:</p>\n\n<pre><code>attr_accessor :one, :two, :three\n\ndef initialize(one: nil, two: nil, three: nil)\n  @one = one\n  @two = two\n  @three = three\nend\n</code></pre>\n\n<p>As you can see, this isn't very DRY, especially as the number of initializable variables grows. Ultimately, I would like to be able to loop through each of the arguments and assign an instance variable (some combination of a splat operator and <code>instance_variable_set</code>?), but always have a defined list of expected instance variables with defaults if they aren't defined.</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 16527, "user_id": 3124288, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/6fa5b34aa1b0d8508347f48a8d596399?s=128&d=identicon&r=PG&f=1", "display_name": "JKillian", "link": "https://stackoverflow.com/users/3124288/jkillian"}, "edited": false, "score": 3, "creation_date": 1424824789, "post_id": 28709020, "comment_id": 45707377, "body": "<code>@root</code> and <code>current</code> now both <i>reference</i> the same <code>Node</code> object. So if you modify the object that <code>current</code> is referencing you are modifying the exact same object that <code>@root</code> references."}, {"owner": {"reputation": 67463, "user_id": 203130, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/1RE8c.jpg?s=128&g=1", "display_name": "coreyward", "link": "https://stackoverflow.com/users/203130/coreyward"}, "reply_to_user": {"reputation": 16527, "user_id": 3124288, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/6fa5b34aa1b0d8508347f48a8d596399?s=128&d=identicon&r=PG&f=1", "display_name": "JKillian", "link": "https://stackoverflow.com/users/3124288/jkillian"}, "edited": false, "score": 1, "creation_date": 1424825324, "post_id": 28709020, "comment_id": 45707509, "body": "@JKillian At the risk of sounding pedantic, it might be less confusing to say that both variables refer to the <i>same instance of <code>Node</code></i>."}, {"owner": {"reputation": 339851, "user_id": 149392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a561ec0875fcbbe3066ea8fe288ec77?s=128&d=identicon&r=PG", "display_name": "sepp2k", "link": "https://stackoverflow.com/users/149392/sepp2k"}, "reply_to_user": {"reputation": 67463, "user_id": 203130, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/1RE8c.jpg?s=128&g=1", "display_name": "coreyward", "link": "https://stackoverflow.com/users/203130/coreyward"}, "edited": false, "score": 2, "creation_date": 1424825576, "post_id": 28709020, "comment_id": 45707573, "body": "@coreyward Why would &quot;instance of Node&quot; be any less or more confusing than &quot;Node object&quot;? Those two terms are completely synonymous."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1424880805, "post_id": 28709020, "comment_id": 45734620, "body": "Well, there is also a <code>Node</code> object, which is an instance of <code>Class</code>."}, {"owner": {"reputation": 67463, "user_id": 203130, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/1RE8c.jpg?s=128&g=1", "display_name": "coreyward", "link": "https://stackoverflow.com/users/203130/coreyward"}, "reply_to_user": {"reputation": 339851, "user_id": 149392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a561ec0875fcbbe3066ea8fe288ec77?s=128&d=identicon&r=PG", "display_name": "sepp2k", "link": "https://stackoverflow.com/users/149392/sepp2k"}, "edited": false, "score": 0, "creation_date": 1424887814, "post_id": 28709020, "comment_id": 45739439, "body": "@sepp2k Two reasons: 1) the ruby community largely uses \u201cinstance of\u201d terminology, and 2) as @J&#246;rg W Mittag pointed out, <code>Node</code> itself is an object, which neither <code>@root</code> or <code>current</code> reference."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 1477402, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1eebe580c92dc608b22a48d284bb144f?s=128&d=identicon&r=PG", "display_name": "alex", "link": "https://stackoverflow.com/users/1477402/alex"}, "edited": false, "score": 0, "creation_date": 1424825983, "post_id": 28709145, "comment_id": 45707660, "body": "Wow that is actually very helpful. I&#39;m not sure why I missed that. Would you mind explaining to me why something like this doesn&#39;t work the same way?  <code>one = &quot;one&quot;  =&gt; &quot;one&quot;  irb(main):002:0&gt; two = one  =&gt; &quot;one&quot;  irb(main):003:0&gt; two  =&gt; &quot;one&quot;  irb(main):004:0&gt; two = &quot;two&quot;  =&gt; &quot;two&quot;  irb(main):005:0&gt; one  =&gt; &quot;one&quot;</code>"}, {"owner": {"reputation": 851, "user_id": 2294660, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/stHgC.jpg?s=128&g=1", "display_name": "igavriil", "link": "https://stackoverflow.com/users/2294660/igavriil"}, "reply_to_user": {"reputation": 1, "user_id": 1477402, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1eebe580c92dc608b22a48d284bb144f?s=128&d=identicon&r=PG", "display_name": "alex", "link": "https://stackoverflow.com/users/1477402/alex"}, "edited": false, "score": 2, "creation_date": 1424826557, "post_id": 28709145, "comment_id": 45707806, "body": "You are creating an object (string) with value &quot;one&quot; and referencing it with the variables one and two. When writing &#39;two=&quot;two&quot;&#39; a new object (string) with value &quot;two&quot; is created an the variable two is now referencing it. Variable one still points to &quot;one&quot;."}], "tags": [], "owner": {"reputation": 851, "user_id": 2294660, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/stHgC.jpg?s=128&g=1", "display_name": "igavriil", "link": "https://stackoverflow.com/users/2294660/igavriil"}, "is_accepted": false, "score": 1, "last_activity_date": 1424833652, "last_edit_date": 1424833652, "creation_date": 1424824891, "answer_id": 28709145, "question_id": 28709020, "link": "https://stackoverflow.com/questions/28709020/why-is-this-instance-variable-5-instead-of-4/28709145#28709145", "title": "Why is this instance variable 5 instead of 4?", "body": "<p>Variables in Ruby are references to objects. </p>\n\n<p>What you are really doing is instantiating a new Node object with <code>value=4</code> and then referencing to it with 'current' variable(name) (also <code>@root</code> is referencing the same object) and then changing its value to 5.</p>\n"}], "owner": {"reputation": 1, "user_id": 1477402, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1eebe580c92dc608b22a48d284bb144f?s=128&d=identicon&r=PG", "display_name": "alex", "link": "https://stackoverflow.com/users/1477402/alex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1424833652, "creation_date": 1424824109, "last_edit_date": 1424833546, "question_id": 28709020, "link": "https://stackoverflow.com/questions/28709020/why-is-this-instance-variable-5-instead-of-4", "title": "Why is this instance variable 5 instead of 4?", "body": "<pre><code>class Node\n  attr_accessor :value\n\n  def initialize(value)\n    @value\n  end\nend\n\nclass Testo\n  attr_accessor :root\n\n  def method\n    @root = Node.new(4)\n    current = @root\n    current.value = 5\n  end\nend\n\ntesting = Testo.new\ntesting.method\nputs testing.root.value #=&gt; Returns 5\n</code></pre>\n\n<p>I don't understand. Is the local variable <code>current</code> now an instance variable? Is it a copy of <code>@root</code>? Shouldn't <code>root</code> be 4 instead of 5?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "gem", "compass"], "answers": [{"comments": [{"owner": {"reputation": 699, "user_id": 1880349, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/5a51c198a01ab7d60f17e23b973f0e66?s=128&d=identicon&r=PG", "display_name": "Tom Rogers", "link": "https://stackoverflow.com/users/1880349/tom-rogers"}, "edited": false, "score": 0, "creation_date": 1424852229, "post_id": 28709132, "comment_id": 45716056, "body": "Hi @Aaron \u2013 I&#39;ve tried running that and got the message \u2013  xcode-select: error: command line tools are already installed, use &quot;Software Updates&quot; to install updates  But there doesn&#39;t appear to be any updates."}, {"owner": {"reputation": 10647, "user_id": 64669, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Vg5iU.jpg?s=128&g=1", "display_name": "Aaron", "link": "https://stackoverflow.com/users/64669/aaron"}, "reply_to_user": {"reputation": 699, "user_id": 1880349, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/5a51c198a01ab7d60f17e23b973f0e66?s=128&d=identicon&r=PG", "display_name": "Tom Rogers", "link": "https://stackoverflow.com/users/1880349/tom-rogers"}, "edited": false, "score": 0, "creation_date": 1424873134, "post_id": 28709132, "comment_id": 45728825, "body": "That is odd. Do have the rest of Xcode installed? What version of OS X are you on?"}, {"owner": {"reputation": 699, "user_id": 1880349, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/5a51c198a01ab7d60f17e23b973f0e66?s=128&d=identicon&r=PG", "display_name": "Tom Rogers", "link": "https://stackoverflow.com/users/1880349/tom-rogers"}, "edited": false, "score": 0, "creation_date": 1424985801, "post_id": 28709132, "comment_id": 45787894, "body": "\u2013 hi @Aaron, I think so(how would I tell?). Bit new to all of this. I&#39;m on 10.10.2"}, {"owner": {"reputation": 10647, "user_id": 64669, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Vg5iU.jpg?s=128&g=1", "display_name": "Aaron", "link": "https://stackoverflow.com/users/64669/aaron"}, "reply_to_user": {"reputation": 699, "user_id": 1880349, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/5a51c198a01ab7d60f17e23b973f0e66?s=128&d=identicon&r=PG", "display_name": "Tom Rogers", "link": "https://stackoverflow.com/users/1880349/tom-rogers"}, "edited": false, "score": 0, "creation_date": 1425046593, "post_id": 28709132, "comment_id": 45813099, "body": "<code>Cmd</code>+<code>Space</code> should bring up Spotlight. Try typing &quot;Xcode&quot; in there and if it&#39;s found, you have it installed. Otherwise install it from the Mac OS X App Store."}, {"owner": {"reputation": 699, "user_id": 1880349, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/5a51c198a01ab7d60f17e23b973f0e66?s=128&d=identicon&r=PG", "display_name": "Tom Rogers", "link": "https://stackoverflow.com/users/1880349/tom-rogers"}, "edited": false, "score": 0, "creation_date": 1425137719, "post_id": 28709132, "comment_id": 45843229, "body": "\u2013 yep it&#39;s there and installed."}], "tags": [], "owner": {"reputation": 10647, "user_id": 64669, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Vg5iU.jpg?s=128&g=1", "display_name": "Aaron", "link": "https://stackoverflow.com/users/64669/aaron"}, "is_accepted": false, "score": 1, "last_activity_date": 1424824817, "creation_date": 1424824817, "answer_id": 28709132, "question_id": 28708976, "link": "https://stackoverflow.com/questions/28708976/gem-install-compass-not-working/28709132#28709132", "title": "gem install compass not working", "body": "<p>The error you're getting is</p>\n\n<pre><code>(RuntimeError)\n   You have to install development tools first.\n</code></pre>\n\n<p>If you're on OS X (my best guess from the output) you need to install the Xcode developer tools first. You can do this with the command: <code>xcode-select --install</code>.</p>\n"}], "owner": {"reputation": 699, "user_id": 1880349, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/5a51c198a01ab7d60f17e23b973f0e66?s=128&d=identicon&r=PG", "display_name": "Tom Rogers", "link": "https://stackoverflow.com/users/1880349/tom-rogers"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 962, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1424824817, "creation_date": 1424823819, "question_id": 28708976, "link": "https://stackoverflow.com/questions/28708976/gem-install-compass-not-working", "title": "gem install compass not working", "body": "<p>having trouble running the line gem install compass in terminal. It's returning the following error. Is anyone able to help out with this problem?</p>\n\n<blockquote>\n  <p>ERROR:  Error installing compass:\n        ERROR: Failed to build gem native extension.</p>\n\n<pre><code>    /usr/local/rvm/rubies/ruby-1.9.3-p392/bin/ruby -r ./siteconf20150225-51908-cfetpz.rb extconf.rb\nchecking for ffi.h... *** extconf.rb failed ***\nCould not create Makefile due to some reason, probably lack of\nnecessary libraries and/or headers.  Check the mkmf.log file for more\ndetails.  You may need configuration options.\n\nProvided configuration options:\n  --with-opt-dir\n  --without-opt-dir\n  --with-opt-include\n  --without-opt-include=${opt-dir}/include\n  --with-opt-lib\n  --without-opt-lib=${opt-dir}/lib\n  --with-make-prog\n  --without-make-prog\n  --srcdir=.\n  --curdir\n  --ruby=/usr/local/rvm/rubies/ruby-1.9.3-p392/bin/ruby\n  --with-ffi_c-dir\n  --without-ffi_c-dir\n  --with-ffi_c-include\n  --without-ffi_c-include=${ffi_c-dir}/include\n  --with-ffi_c-lib\n  --without-ffi_c-lib=${ffi_c-dir}/lib\n  --with-libffi-config\n  --without-libffi-config\n  --with-pkg-config\n  --without-pkg-config\n/usr/local/rvm/rubies/ruby-1.9.3-p392/lib/ruby/1.9.1/mkmf.rb:381:in\n</code></pre>\n  \n  <p><code>try_do': The compiler failed to generate an executable file.\n  (RuntimeError)\n      You have to install development tools first.\n        from /usr/local/rvm/rubies/ruby-1.9.3-p392/lib/ruby/1.9.1/mkmf.rb:506:in\n  </code>try_cpp'\n        from /usr/local/rvm/rubies/ruby-1.9.3-p392/lib/ruby/1.9.1/mkmf.rb:931:in\n  <code>block in have_header'\n        from /usr/local/rvm/rubies/ruby-1.9.3-p392/lib/ruby/1.9.1/mkmf.rb:790:in\n  </code>block in checking_for'\n        from /usr/local/rvm/rubies/ruby-1.9.3-p392/lib/ruby/1.9.1/mkmf.rb:284:in\n  <code>block (2 levels) in postpone'\n        from /usr/local/rvm/rubies/ruby-1.9.3-p392/lib/ruby/1.9.1/mkmf.rb:254:in\n  </code>open'\n        from /usr/local/rvm/rubies/ruby-1.9.3-p392/lib/ruby/1.9.1/mkmf.rb:284:in\n  <code>block in postpone'\n        from /usr/local/rvm/rubies/ruby-1.9.3-p392/lib/ruby/1.9.1/mkmf.rb:254:in\n  </code>open'\n        from /usr/local/rvm/rubies/ruby-1.9.3-p392/lib/ruby/1.9.1/mkmf.rb:280:in\n  <code>postpone'\n        from /usr/local/rvm/rubies/ruby-1.9.3-p392/lib/ruby/1.9.1/mkmf.rb:789:in\n  </code>checking_for'\n        from /usr/local/rvm/rubies/ruby-1.9.3-p392/lib/ruby/1.9.1/mkmf.rb:930:in\n  <code>have_header'\n        from extconf.rb:16:in</code>'</p>\n\n<pre><code>extconf failed, exit code 1\n\nGem files will remain installed in /usr/local/rvm/gems/ruby-1.9.3-p392/gems/ffi-1.9.6 for inspection.\nResults logged to /usr/local/rvm/gems/ruby-1.9.3-p392/extensions/x86_64-darwin-10/1.9.1-static/ffi-1.9.6/gem_make.out\n</code></pre>\n</blockquote>\n"}, {"tags": ["ruby-on-rails", "ruby", "sidekiq", "minitest", "rails-activejob"], "answers": [{"tags": [], "owner": {"reputation": 8260, "user_id": 5627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd8da976054ea4915eafc5d9dd096d38?s=128&d=identicon&r=PG", "display_name": "blowmage", "link": "https://stackoverflow.com/users/5627/blowmage"}, "is_accepted": true, "score": 1, "last_activity_date": 1424881586, "creation_date": 1424881586, "answer_id": 28724270, "question_id": 28708964, "link": "https://stackoverflow.com/questions/28708964/testing-activejob-with-minitest-doesnt-hit-sidekiq-queue/28724270#28724270", "title": "Testing ActiveJob with Minitest doesn&#39;t hit Sidekiq queue", "body": "<p>The reason for using an API like ActiveJob is to allow you to write your code to an abstract API so you can change adapters. In other words, your ActiveJob classes should be able to move from Sidekiq to Que without making any changes to your code. Because of this, ActiveJob::TestCase <a href=\"http://api.rubyonrails.org/classes/ActiveJob/TestHelper.html#method-i-before_setup\" rel=\"nofollow\">uses a test adapter</a> that makes asserting job behavior easier.</p>\n\n<p>That said, if you really want to make your jobs hit a running queue, you should configure your test environment accordingly and inherit from a test class that doesn't use ActiveJob::TestHelper.</p>\n"}], "owner": {"reputation": 11175, "user_id": 467255, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/9c7d80ebc20ab8994e51b9f7518909ae?s=128&d=identicon&r=PG", "display_name": "Luca G. Soave", "link": "https://stackoverflow.com/users/467255/luca-g-soave"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1954, "favorite_count": 0, "accepted_answer_id": 28724270, "answer_count": 1, "score": 0, "last_activity_date": 1424881586, "creation_date": 1424823719, "last_edit_date": 1424824347, "question_id": 28708964, "link": "https://stackoverflow.com/questions/28708964/testing-activejob-with-minitest-doesnt-hit-sidekiq-queue", "title": "Testing ActiveJob with Minitest doesn&#39;t hit Sidekiq queue", "body": "<p>On Rails 4.2 I have the following ActiveJob test :</p>\n\n<p>test/jobs/import_job_test.rb </p>\n\n<pre><code>require 'test_helper'\n\nclass ImportJobTest &lt; ActiveJob::TestCase\n\n  def setup\n    @response = ImportJob.perform_later \"'testing Sidekiq queue jobs'\"\n  end\n\n  test \"enqueued jobs\" do\n    assert_enqueued_jobs 1\n    clear_enqueued_jobs\n    assert_enqueued_jobs 0\n  end\n\n  test \"ActiveJob::QueueAdapters::SidekiqAdapter::JobWrapper\" do\n    assert_equal [\"'testing Sidekiq queue jobs'\"], @response.arguments\n  end\n\n  test \"a second new job has been enqueued with the given arguments\" do\n    assert_enqueued_jobs 1\n    assert_enqueued_with(job: ImportJob, args: [\"'queuing a second job'\"], queue: 'default') do\n      ImportJob.perform_later \"'queuing a second job'\"\n    end\n    assert_enqueued_jobs 2\n  end\n\nend\n</code></pre>\n\n<p>Running the test it goes green:</p>\n\n<pre><code>$ rake test test/jobs/import_job_test.rb\nStarted with run options --seed 35322\n\n  4/4: [===================================] 100% Time: 00:00:00, Time: 00:00:00\n\nFinished in 0.01380s\n4 tests, 7 assertions, 0 failures, 0 errors, 0 skips\n</code></pre>\n\n<p>but never touch the Sidekiq queue really. I get green also when Sidekiq is turned off, which I don't want. Of course running in console the queue is bitten.</p>\n\n<p>How can I specify to REALLY hit the queue in test mode ?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "json", "curl"], "comments": [{"owner": {"reputation": 5292, "user_id": 2727267, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0e7c773908a4f6095f63cb9553bbc7af?s=128&d=identicon&r=PG", "display_name": "Beartech", "link": "https://stackoverflow.com/users/2727267/beartech"}, "edited": false, "score": 0, "creation_date": 1424823391, "post_id": 28708662, "comment_id": 45707019, "body": "If you don&#39;t want to mess with too much post-processing, you could craft the SQL query to include  &quot;... district_resources.state AS &#39;state&#39;.....&quot; Not sure how you would do that but it&#39;s an approach. So rather than just return the state_id, have it look up the state and give it the key of &quot;state&quot;."}, {"owner": {"reputation": 5292, "user_id": 2727267, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0e7c773908a4f6095f63cb9553bbc7af?s=128&d=identicon&r=PG", "display_name": "Beartech", "link": "https://stackoverflow.com/users/2727267/beartech"}, "edited": false, "score": 0, "creation_date": 1424825860, "post_id": 28708662, "comment_id": 45707628, "body": "The Rails syntax for &quot;AS&quot; is: <code>SomeTable.select(&quot;foo as bar&quot;).first</code> . This is supposed to give you the object with the aliasing as shown, but every Rails console I try this in just gives me a nil record. i.e. <code>t = Tool.select(&quot;serial as my_serial&quot;).where(id: 38)   Tool Load (1.3ms)  SELECT serial as my_serial FROM &quot;tools&quot; WHERE &quot;tools&quot;.&quot;id&quot; = 38 =&gt; [#&lt;Tool id: nil&gt;]</code>"}], "answers": [{"tags": [], "owner": {"reputation": 5292, "user_id": 2727267, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0e7c773908a4f6095f63cb9553bbc7af?s=128&d=identicon&r=PG", "display_name": "Beartech", "link": "https://stackoverflow.com/users/2727267/beartech"}, "is_accepted": false, "score": 1, "last_activity_date": 1424824011, "last_edit_date": 1424824011, "creation_date": 1424823709, "answer_id": 28708961, "question_id": 28708662, "link": "https://stackoverflow.com/questions/28708662/flatten-json-data-in-rails-when-using-include/28708961#28708961", "title": "Flatten JSON data in Rails when using :include", "body": "<p>You can manipulate it how ever you like, i.e. pass it to another variable, use a method call etc:</p>\n\n<pre><code>  my_json[\"state\"] = my_json[\"state\"][\"name\"]\n  my_json.delete(\"state_id\")\n</code></pre>\n\n<p>This will set <code>state =&gt;</code> to the value of <code>name =&gt;</code> and then delete the unwanted <code>state_id =&gt;</code></p>\n"}, {"comments": [{"owner": {"reputation": 2140, "user_id": 1450389, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VYNKp.jpg?s=128&g=1", "display_name": "Serge Pedroza", "link": "https://stackoverflow.com/users/1450389/serge-pedroza"}, "edited": false, "score": 0, "creation_date": 1424978697, "post_id": 28719404, "comment_id": 45783957, "body": "My current output is an array of hashes. Therefore i keep getting this error  (undefined method `to_hash&#39; for #&lt;Array:0x007f8d6ffa5f38&gt;):"}, {"owner": {"reputation": 40236, "user_id": 923315, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/j6lLI.jpg?s=128&g=1", "display_name": "peter", "link": "https://stackoverflow.com/users/923315/peter"}, "reply_to_user": {"reputation": 2140, "user_id": 1450389, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VYNKp.jpg?s=128&g=1", "display_name": "Serge Pedroza", "link": "https://stackoverflow.com/users/1450389/serge-pedroza"}, "edited": false, "score": 0, "creation_date": 1424980699, "post_id": 28719404, "comment_id": 45785145, "body": "can&#39;t find that in your question, but then don&#39;t use to_hash since it&#39;s allready a hash, just flatten it while you enumerate the array"}], "tags": [], "owner": {"reputation": 40236, "user_id": 923315, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/j6lLI.jpg?s=128&g=1", "display_name": "peter", "link": "https://stackoverflow.com/users/923315/peter"}, "is_accepted": false, "score": 1, "last_activity_date": 1424868358, "creation_date": 1424868358, "answer_id": 28719404, "question_id": 28708662, "link": "https://stackoverflow.com/questions/28708662/flatten-json-data-in-rails-when-using-include/28719404#28719404", "title": "Flatten JSON data in Rails when using :include", "body": "<p>I second the remark of Beartech but let's suppose that is not possible then do it like this</p>\n\n<pre><code>require 'json'\n\ndef flatten_hash(h)\n  new_hash = {}\n  h.each_pair do |key, val|\n    if val.is_a?(Hash)\n      new_hash[key] = val.values.join(',')\n    else\n      new_hash[key] = val\n    end\n  end\n  new_hash\nend\n\njson = '{\"id\":4,\"state_id\":5,\"name\":\"School Liason Officer\",\"created_at\":\"2014-10-16T03:13:00.000Z\", \"updated_at\":\"2014-10-16T03:13:00.000Z\",\"state\":{\"name\":\"California\"}}'\nflattened_hash = flatten_hash(JSON.parse(json).to_hash)\nflattened_hash.delete(\"state_id\")\n</code></pre>\n\n<p>gives</p>\n\n<pre><code>{\"id\"=&gt;4, \"name\"=&gt;\"School Liason Officer\", \"created_at\"=&gt;\"2014-10-16T03:13:00.000Z\", \"updated_at\"=&gt;\"2014-10-16T03:13:00.000Z\", \"state\"=&gt;\"California\"}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2140, "user_id": 1450389, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VYNKp.jpg?s=128&g=1", "display_name": "Serge Pedroza", "link": "https://stackoverflow.com/users/1450389/serge-pedroza"}, "is_accepted": true, "score": 0, "last_activity_date": 1424985453, "creation_date": 1424985453, "answer_id": 28752923, "question_id": 28708662, "link": "https://stackoverflow.com/questions/28708662/flatten-json-data-in-rails-when-using-include/28752923#28752923", "title": "Flatten JSON data in Rails when using :include", "body": "<p>I combined the two answers above to get what i needed. :)</p>\n\n<pre><code>  def show\n    @search = Search.find(params[:id])\n    @searches = []\n    (@searches &lt;&lt; @search.district_resources).flatten!\n\n    json = @searches.to_json(:include =&gt; [:state =&gt; {:only =&gt; [:name]}] )\n\n    def flatten_hash(h)\n      new_hash = []\n      h.each do |val|\n        if val.is_a?(Hash)\n          val[\"state\"] = val[\"state\"][\"name\"]\n          val.delete(\"state_id\")\n          (new_hash &lt;&lt; val).flatten!\n        else\n          new_hash &lt;&lt; val\n        end\n      end\n      new_hash\n    end\n\n    flattened_hash = flatten_hash(JSON.parse(json))\n\n    respond_to do |format|\n      format.html\n      #(:include =&gt; [:state =&gt; {:only =&gt; [:name]}] )\n      format.json { render :json =&gt; flattened_hash.to_json }\n    end\n  end\n</code></pre>\n"}], "owner": {"reputation": 2140, "user_id": 1450389, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VYNKp.jpg?s=128&g=1", "display_name": "Serge Pedroza", "link": "https://stackoverflow.com/users/1450389/serge-pedroza"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 974, "favorite_count": 2, "accepted_answer_id": 28752923, "answer_count": 3, "score": 1, "last_activity_date": 1424985453, "creation_date": 1424821987, "last_edit_date": 1424982274, "question_id": 28708662, "link": "https://stackoverflow.com/questions/28708662/flatten-json-data-in-rails-when-using-include", "title": "Flatten JSON data in Rails when using :include", "body": "<p>I've added an \"Advance Search\" to my app using the \"<a href=\"http://railscasts.com/episodes/111-advanced-search-form-revised\" rel=\"nofollow\">#111 Advanced Search Form (revised)</a>\" tutorial and have created an API for it too. Everything works fine, but now I am trying to show the JSON data.</p>\n\n<p>This is the cURL command:</p>\n\n<pre><code>curl -v -H 'Content-Type: application/json' -H 'Accept: application/json' -X \nGET http://0.0.0.0:3000/api/searches/129\n</code></pre>\n\n<p>And this is the results of the Curl command (Please note the brackets[ ], therefore this is an array of hashes.):</p>\n\n<pre><code>[{\"id\":4,\"state_id\":5,\"name\":\"School Liason Officer\",\"created_at\":\"2014-10-16T03:13:00.000Z\",\n\"updated_at\":\"2014-10-16T03:13:00.000Z\",\"state\":{\"name\":\"California\"}}]\n</code></pre>\n\n<p>But I would like to change the JSON Results so that the state name is flattened with the JSON data somehow.</p>\n\n<p>Does anyone know how I can do this, or if it's even possible to flatten the data? </p>\n\n<p>This is an example of what I'd like:</p>\n\n<pre><code>[{\"id\":4,\"state\":\"California\",\"name\":\"School Liason Officer\",\"created_at\":\"2014-10-16T03:13:00.000Z\",\n\"updated_at\":\"2014-10-16T03:13:00.000Z\"}]\n</code></pre>\n\n<p>Model:</p>\n\n<pre><code>class State &lt; ActiveRecord::Base  \n  has_many :district_resources\n\nend\n\nclass DistrictResource &lt; ActiveRecord::Base\n  belongs_to :state\n\nend\n\nclass Search &lt; ActiveRecord::Base\n\n  def district_resources\n    @district_resources ||= find_district_resources\n  end\n\n  def find_district_resources\n    district_resources = DistrictResource.order(:name)\n    district_resources = district_resources.where(state_id: state_id) if state_id.present?\n    district_resources\n  end\n\nend\n</code></pre>\n\n<p>API Controller:</p>\n\n<pre><code>module Api\n  module V1\n    class SearchesController &lt; ApplicationController\n\n      respond_to :json\n\n      def show\n        @search = Search.find(params[:id])\n        @searches = []\n        (@searches &lt;&lt; @search.district_resources).flatten!\n\n        json = @searches.to_json\n\n        def flatten_hash(h)\n          new_hash = {}\n\n          ###I get an error here undefined method `each_pair' for Array\n          h.each_pair do |key, val|\n            if val.is_a?(Hash)\n              new_hash[key] = val.values.join(',')\n            else\n              new_hash[key] = val\n            end\n          end\n          new_hash\n        end\n\n        flattened_hash = flatten_hash(JSON.parse(json))\n        flattened_hash.delete(\"state_id\")\n\n        respond_to do |format|\n\n          ###How can i merge the state name with the json results\n          format.json { render :json =&gt; flattened_hash.to_json(:include =&gt; [:state =&gt; {:only =&gt; [:name]}] )}\n        end\n      end\n\n    end\n  end\nend\n</code></pre>\n\n<p>ERROR</p>\n\n<pre><code>undefined method `each_pair' for #&lt;Array:0x007f8d727b5168&gt;\n</code></pre>\n"}, {"tags": ["ruby", "rspec"], "owner": {"reputation": 5734, "user_id": 394796, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/aad9f3d17d0679d81841dc6d83a03ea3?s=128&d=identicon&r=PG", "display_name": "Cameron Martin", "link": "https://stackoverflow.com/users/394796/cameron-martin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 324, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1424820622, "creation_date": 1424819561, "question_id": 28708215, "link": "https://stackoverflow.com/questions/28708215/testing-multiple-classes-with-the-same-rspec-tests", "title": "Testing multiple classes with the same rspec tests", "body": "<p>I'm building a web app in ruby, and it does all of it's data access through repositories. To make my unit tests fast, I also have in-memory versions of these repositories.</p>\n\n<p>I would like the behaviour of these repositories to be identical, so it makes sense to use the same tests for both the real and in-memory repositories.</p>\n\n<p>How would I go about doing this?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1424819266, "post_id": 28708043, "comment_id": 45705605, "body": "What problem are you trying to solve here? You could make your instance method a class method if it has no particular dependency on the instance."}], "answers": [{"tags": [], "owner": {"reputation": 2859, "user_id": 3945932, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1794745acd9e572c24558b78b48d597?s=128&d=identicon&r=PG", "display_name": "ptd", "link": "https://stackoverflow.com/users/3945932/ptd"}, "is_accepted": false, "score": 2, "last_activity_date": 1424819081, "creation_date": 1424819081, "answer_id": 28708100, "question_id": 28708043, "link": "https://stackoverflow.com/questions/28708043/ruby-calling-instance-method-from-class-method/28708100#28708100", "title": "Ruby: Calling instance method from class method", "body": "<p>Does what you want to do really make sense? Which instance should the instance method be called on? If it doesn't matter, you can do this:</p>\n\n<pre><code>class Foo\n  def self.some_class_method\n    new.some_instance_method\n    puts self\n  end\n\n  def some_instance_method\n    self.class.some_class_method\n  end\nend\n</code></pre>\n\n<p>This will cause an infinite loop, of course.</p>\n"}, {"comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 2, "creation_date": 1424819235, "post_id": 28708115, "comment_id": 45705589, "body": "The point here is instance methods don&#39;t make any sense unless you have an instance to call them on."}], "tags": [], "owner": {"reputation": 4171, "user_id": 3258698, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/68f432d577e5550e36ec267b85884364?s=128&d=identicon&r=PG", "display_name": "hbejgel", "link": "https://stackoverflow.com/users/3258698/hbejgel"}, "is_accepted": false, "score": 0, "last_activity_date": 1424819153, "creation_date": 1424819153, "answer_id": 28708115, "question_id": 28708043, "link": "https://stackoverflow.com/questions/28708043/ruby-calling-instance-method-from-class-method/28708115#28708115", "title": "Ruby: Calling instance method from class method", "body": "<p>To call an instance method you need to have that object already instantiated somewhere, you can't call an instance method without an object.</p>\n\n<pre><code>def self.some_class_method\n  puts self.first.some_instance_method\nend\n</code></pre>\n\n<p>Something like this should work</p>\n"}, {"tags": [], "owner": {"reputation": 3178, "user_id": 2008459, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bff5fa641f4780e18fac63e311ae4247?s=128&d=identicon&r=PG", "display_name": "boulder", "link": "https://stackoverflow.com/users/2008459/boulder"}, "is_accepted": false, "score": 0, "last_activity_date": 1440710615, "creation_date": 1440710615, "answer_id": 32259669, "question_id": 28708043, "link": "https://stackoverflow.com/questions/28708043/ruby-calling-instance-method-from-class-method/32259669#32259669", "title": "Ruby: Calling instance method from class method", "body": "<p>You need to pass the instance you want to be the recipient of the call to the class method. So the new code is:</p>\n\n<pre><code>class Foo\n  def self.some_class_method(instance)\n     instance.some_other_instance_method\n     puts self\n  end\n\n  def some_instance_method\n    self.class.some_class_method(self)\n  end\nend\n</code></pre>\n\n<p>Notice that the class method is calling 'some_other_instance_method'. If the class method were to call the same method that called it, it would enter an endless loop.</p>\n"}], "owner": {"reputation": 2374, "user_id": 3146509, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/HgDsp.jpg?s=128&g=1", "display_name": "Reza", "link": "https://stackoverflow.com/users/3146509/reza"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 870, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1440710615, "creation_date": 1424818784, "last_edit_date": 1440710200, "question_id": 28708043, "link": "https://stackoverflow.com/questions/28708043/ruby-calling-instance-method-from-class-method", "title": "Ruby: Calling instance method from class method", "body": "<p>I want to call <code>some_instance_method</code> from <code>some_class_method</code>. In the following code, the class method is being called from the instance method.</p>\n\n<pre><code>class Foo\n  def self.some_class_method\n     puts self\n  end\n\n  def some_instance_method\n    self.class.some_class_method\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "edited": false, "score": 1, "creation_date": 1424818669, "post_id": 28707872, "comment_id": 45705335, "body": "age is coming through as a string, not a num so you&#39;re doing <code>i * 10 * string</code>.  In the future your question should include the output of your program and the desired output"}, {"owner": {"reputation": 73209, "user_id": 290394, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d7908f05c89e965f6bc5308ad6f41256?s=128&d=identicon&r=PG", "display_name": "steenslag", "link": "https://stackoverflow.com/users/290394/steenslag"}, "edited": false, "score": 1, "creation_date": 1424818722, "post_id": 28707872, "comment_id": 45705365, "body": "Also, there is no such thing as ++ in Ruby. Use i += 1. And read about indent style."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1424823380, "post_id": 28707872, "comment_id": 45707015, "body": "Welcome to Stack Overflow. When creating a question, it&#39;s important to create a title for it that actually indicates what you are trying to do. That helps us answer your question by understanding what you&#39;re after, and it helps others who are searching for a similar solution. &quot;I don&#39;t understand what&#39;s wrong with this simple Ruby code&quot; does absolutely nothing toward either of those. Remember, the more work you put into creating the question, the more likely it is you&#39;ll get help and will avoid getting down votes. Also, when asking, explain what&#39;s wrong and how it should work."}], "answers": [{"tags": [], "owner": {"reputation": 41, "user_id": 4064439, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/zya64.jpg?s=128&g=1", "display_name": "sam-the-milkman", "link": "https://stackoverflow.com/users/4064439/sam-the-milkman"}, "is_accepted": false, "score": 1, "last_activity_date": 1424819949, "creation_date": 1424819949, "answer_id": 28708307, "question_id": 28707872, "link": "https://stackoverflow.com/questions/28707872/i-dont-understand-whats-wrong-with-this-simple-ruby-code/28708307#28708307", "title": "I don&#39;t understand what&#39;s wrong with this simple Ruby code", "body": "<p>Many ways to accomplish what you're trying to do. Make sure you're indenting blocks correctly - it'll make your code much more readable. Note that <code>to_i</code> converts your input from a String to an Integer. Also, try to name your variables more specifically; <code>multiple</code> doesn't really mean anything in your example.</p>\n\n<pre><code>puts \"How old are you?\"\n\nage = gets.chomp.to_i\n\n(1..5).each do |i|\n  years_passed = i * 10\n  new_age = years_passed + age\n  puts \"In #{years_passed} years you will be #{new_age}\"\nend\n</code></pre>\n\n<p>If you want to use a <code>while</code> loop, you could do:</p>\n\n<pre><code>puts \"How old are you?\"\n\nage = gets.chomp.to_i\nmultiplier = 1\n\nwhile multiplier &lt;= 5\n  years_passed = multiplier * 10\n  new_age = years_passed + age\n  puts \"In #{years_passed} years you will be #{new_age}\"\n  multiplier += 1\nend\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 4603343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/178fd18b68d8e67252898867f1bdb72c?s=128&d=identicon&r=PG&f=1", "display_name": "ebarryc", "link": "https://stackoverflow.com/users/4603343/ebarryc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1424819949, "creation_date": 1424817954, "question_id": 28707872, "link": "https://stackoverflow.com/questions/28707872/i-dont-understand-whats-wrong-with-this-simple-ruby-code", "title": "I don&#39;t understand what&#39;s wrong with this simple Ruby code", "body": "<p>I wrote this program to ask users for their age, and then tell them how old they will be in 10-50 years. I don't understand what's wrong with it :( I'm just a beginner and any help would be greatly appreciated.</p>\n\n<pre><code>print \"How old are you?\"\n\nage = gets.chomp\ni = 1\n\nwhile i &lt; 6\nmultiple = i * 10 + age\nputs \"In #{multiple} years you will be #{multiple}\"\ni++\nend\n</code></pre>\n"}, {"tags": ["ruby", "json", "gem"], "answers": [{"comments": [{"owner": {"reputation": 3885, "user_id": 5133852, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/4729dc39436cac694acc61ec30f45ea7?s=128&d=identicon&r=PG&f=1", "display_name": "Vassily", "link": "https://stackoverflow.com/users/5133852/vassily"}, "edited": false, "score": 4, "creation_date": 1494538401, "post_id": 28748517, "comment_id": 74885060, "body": "It it actually answer for the question?"}], "tags": [], "owner": {"reputation": 99, "user_id": 4547252, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ce9b3fbc7d8d4923fbd870b3a527741?s=128&d=identicon&r=PG&f=1", "display_name": "Kandyyoshia", "link": "https://stackoverflow.com/users/4547252/kandyyoshia"}, "is_accepted": true, "score": -6, "last_activity_date": 1424970509, "creation_date": 1424970509, "answer_id": 28748517, "question_id": 28707738, "link": "https://stackoverflow.com/questions/28707738/how-to-change-default-gem-version/28748517#28748517", "title": "How to change default gem version", "body": "<p>I learned from GitLab support that running a <strong>bundle update</strong> will break many GitLab dependencies.</p>\n"}], "owner": {"reputation": 99, "user_id": 4547252, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ce9b3fbc7d8d4923fbd870b3a527741?s=128&d=identicon&r=PG&f=1", "display_name": "Kandyyoshia", "link": "https://stackoverflow.com/users/4547252/kandyyoshia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5365, "favorite_count": 1, "accepted_answer_id": 28748517, "answer_count": 1, "score": 6, "last_activity_date": 1424970509, "creation_date": 1424817408, "question_id": 28707738, "link": "https://stackoverflow.com/questions/28707738/how-to-change-default-gem-version", "title": "How to change default gem version", "body": "<p>Any help would be greatly appreciated!</p>\n\n<p>I tried to reconfigure my GitLab after running a bundle update. But ran into the error listed below.</p>\n\n<p>Most of the time this type of error is reported the gem that it is conflicting with will be listed in the error, but mine just says that it is having trouble with chef, so I am not sure what the real issue is here.</p>\n\n<p>At this point I am on a clean install of GitLab. I have just ran a bundle update without issue. Tried to run a Gitlab-ctl reconfigure and got the error listed below. </p>\n\n<p><strong>Ruby Version:</strong> ruby 2.2.0p0 (2014-12-25 revision 49005) [x86_64-linux]</p>\n\n<p><strong>RVM Version:</strong> rvm 1.26.10</p>\n\n<p><strong>Installed JSON Versions:</strong> json (1.8.1)</p>\n\n<p>I have tried:</p>\n\n<p><ul>\n<li>Bundle install</li>\n<li>Bundle update</li>\n<li>Install the newer version of json (1.8.2) then uninstall the older json\n<ul>\n<li>It gives me the following error when I try to uninstall version 1.8.1:</p>\n\n<blockquote>\n  <p><strong>ERROR:  While executing gem ... (Gem::InstallError)\n  gem \"json\" cannot be uninstalled because it is a default gem</strong></li>\n  </ul></li>\n  <li>Uninstall and reinstall ruby</li>\n  <li>Set default ruby</li>\n  <li>Add json to the Gemfile</p>\n  \n  <blockquote>\n    <p><strong>gem \"json\", \"~> 1.8.1\"</strong></li>\n    <li>Edited the Gemfile.lock to use the correct json</li>\n    <li>Deleted the Gemfile.lock</li>\n    </ul>\n    <strong>Error:</strong></p>\n  </blockquote>\n</blockquote>\n\n<pre><code>/opt/gitlab/embedded/lib/ruby/site_ruby/2.1.0/rubygems/specification.rb:2052:in `raise_if_conflicts': can't activate json-1.8.2, already activated json-1.8.1 (Gem::LoadError)\n        from /opt/gitlab/embedded/lib/ruby/site_ruby/2.1.0/rubygems/specification.rb:1262:in `activate'\n        from /opt/gitlab/embedded/lib/ruby/site_ruby/2.1.0/rubygems/core_ext/kernel_require.rb:96:in `block in require'\n        from /opt/gitlab/embedded/lib/ruby/site_ruby/2.1.0/rubygems/core_ext/kernel_require.rb:95:in `each'\n        from /opt/gitlab/embedded/lib/ruby/site_ruby/2.1.0/rubygems/core_ext/kernel_require.rb:95:in `require'\n        from /opt/gitlab/embedded/lib/ruby/gems/2.1.0/gems/chef-11.12.2/lib/chef/json_compat.rb:20:in `&lt;top (required)&gt;'\n        from /opt/gitlab/embedded/lib/ruby/site_ruby/2.1.0/rubygems/core_ext/kernel_require.rb:73:in `require'\n        from /opt/gitlab/embedded/lib/ruby/site_ruby/2.1.0/rubygems/core_ext/kernel_require.rb:73:in `require'\n        from /opt/gitlab/embedded/lib/ruby/gems/2.1.0/gems/chef-11.12.2/lib/chef/http/json_input.rb:20:in `&lt;top (required)&gt;'\n        from /opt/gitlab/embedded/lib/ruby/site_ruby/2.1.0/rubygems/core_ext/kernel_require.rb:73:in `require'\n        from /opt/gitlab/embedded/lib/ruby/site_ruby/2.1.0/rubygems/core_ext/kernel_require.rb:73:in `require'\n        from /opt/gitlab/embedded/lib/ruby/gems/2.1.0/gems/chef-11.12.2/lib/chef/rest.rb:32:in `&lt;top (required)&gt;'\n        from /opt/gitlab/embedded/lib/ruby/site_ruby/2.1.0/rubygems/core_ext/kernel_require.rb:73:in `require'\n        from /opt/gitlab/embedded/lib/ruby/site_ruby/2.1.0/rubygems/core_ext/kernel_require.rb:73:in `require'\n        from /opt/gitlab/embedded/lib/ruby/gems/2.1.0/gems/chef-11.12.2/lib/chef/search/query.rb:21:in `&lt;top (required)&gt;'\n        from /opt/gitlab/embedded/lib/ruby/site_ruby/2.1.0/rubygems/core_ext/kernel_require.rb:73:in `require'\n        from /opt/gitlab/embedded/lib/ruby/site_ruby/2.1.0/rubygems/core_ext/kernel_require.rb:73:in `require'\n        from /opt/gitlab/embedded/lib/ruby/gems/2.1.0/gems/chef-11.12.2/lib/chef/dsl/data_query.rb:19:in `&lt;top (required)&gt;'\n        from /opt/gitlab/embedded/lib/ruby/site_ruby/2.1.0/rubygems/core_ext/kernel_require.rb:73:in `require'\n        from /opt/gitlab/embedded/lib/ruby/site_ruby/2.1.0/rubygems/core_ext/kernel_require.rb:73:in `require'\n        from /opt/gitlab/embedded/lib/ruby/gems/2.1.0/gems/chef-11.12.2/lib/chef/mixin/language.rb:20:in `&lt;top (required)&gt;'\n        from /opt/gitlab/embedded/lib/ruby/site_ruby/2.1.0/rubygems/core_ext/kernel_require.rb:73:in `require'\n        from /opt/gitlab/embedded/lib/ruby/site_ruby/2.1.0/rubygems/core_ext/kernel_require.rb:73:in `require'\n        from /opt/gitlab/embedded/lib/ruby/gems/2.1.0/gems/chef-11.12.2/lib/chef/dsl/platform_introspection.rb:217:in `&lt;top (required)&gt;'\n        from /opt/gitlab/embedded/lib/ruby/site_ruby/2.1.0/rubygems/core_ext/kernel_require.rb:73:in `require'\n        from /opt/gitlab/embedded/lib/ruby/site_ruby/2.1.0/rubygems/core_ext/kernel_require.rb:73:in `require'\n        from /opt/gitlab/embedded/lib/ruby/gems/2.1.0/gems/chef-11.12.2/lib/chef/resource.rb:21:in `&lt;top (required)&gt;'\n        from /opt/gitlab/embedded/lib/ruby/site_ruby/2.1.0/rubygems/core_ext/kernel_require.rb:73:in `require'\n        from /opt/gitlab/embedded/lib/ruby/site_ruby/2.1.0/rubygems/core_ext/kernel_require.rb:73:in `require'\n        from /opt/gitlab/embedded/lib/ruby/gems/2.1.0/gems/chef-11.12.2/lib/chef/dsl/recipe.rb:20:in `&lt;top (required)&gt;'\n        from /opt/gitlab/embedded/lib/ruby/site_ruby/2.1.0/rubygems/core_ext/kernel_require.rb:73:in `require'\n        from /opt/gitlab/embedded/lib/ruby/site_ruby/2.1.0/rubygems/core_ext/kernel_require.rb:73:in `require'\n        from /opt/gitlab/embedded/lib/ruby/gems/2.1.0/gems/chef-11.12.2/lib/chef/provider.rb:22:in `&lt;top (required)&gt;'\n        from /opt/gitlab/embedded/lib/ruby/site_ruby/2.1.0/rubygems/core_ext/kernel_require.rb:73:in `require'\n        from /opt/gitlab/embedded/lib/ruby/site_ruby/2.1.0/rubygems/core_ext/kernel_require.rb:73:in `require'\n        from /opt/gitlab/embedded/lib/ruby/gems/2.1.0/gems/chef-11.12.2/lib/chef/provider/execute.rb:21:in `&lt;top (required)&gt;'\n        from /opt/gitlab/embedded/lib/ruby/site_ruby/2.1.0/rubygems/core_ext/kernel_require.rb:73:in `require'\n        from /opt/gitlab/embedded/lib/ruby/site_ruby/2.1.0/rubygems/core_ext/kernel_require.rb:73:in `require'\n        from /opt/gitlab/embedded/lib/ruby/gems/2.1.0/gems/chef-11.12.2/lib/chef/provider/script.rb:20:in `&lt;top (required)&gt;'\n        from /opt/gitlab/embedded/lib/ruby/site_ruby/2.1.0/rubygems/core_ext/kernel_require.rb:73:in `require'\n        from /opt/gitlab/embedded/lib/ruby/site_ruby/2.1.0/rubygems/core_ext/kernel_require.rb:73:in `require'\n        from /opt/gitlab/embedded/lib/ruby/gems/2.1.0/gems/chef-11.12.2/lib/chef/provider/windows_script.rb:19:in `&lt;top (required)&gt;'\n        from /opt/gitlab/embedded/lib/ruby/site_ruby/2.1.0/rubygems/core_ext/kernel_require.rb:73:in `require'\n        from /opt/gitlab/embedded/lib/ruby/site_ruby/2.1.0/rubygems/core_ext/kernel_require.rb:73:in `require'\n        from /opt/gitlab/embedded/lib/ruby/gems/2.1.0/gems/chef-11.12.2/lib/chef/provider/batch.rb:19:in `&lt;top (required)&gt;'\n        from /opt/gitlab/embedded/lib/ruby/site_ruby/2.1.0/rubygems/core_ext/kernel_require.rb:73:in `require'\n        from /opt/gitlab/embedded/lib/ruby/site_ruby/2.1.0/rubygems/core_ext/kernel_require.rb:73:in `require'\n        from /opt/gitlab/embedded/lib/ruby/gems/2.1.0/gems/chef-11.12.2/lib/chef/providers.rb:19:in `&lt;top (required)&gt;'\n        from /opt/gitlab/embedded/lib/ruby/site_ruby/2.1.0/rubygems/core_ext/kernel_require.rb:73:in `require'\n        from /opt/gitlab/embedded/lib/ruby/site_ruby/2.1.0/rubygems/core_ext/kernel_require.rb:73:in `require'\n        from /opt/gitlab/embedded/lib/ruby/gems/2.1.0/gems/chef-11.12.2/lib/chef.rb:25:in `&lt;top (required)&gt;'\n        from /opt/gitlab/embedded/lib/ruby/site_ruby/2.1.0/rubygems/core_ext/kernel_require.rb:73:in `require'\n        from /opt/gitlab/embedded/lib/ruby/site_ruby/2.1.0/rubygems/core_ext/kernel_require.rb:73:in `require'\n        from /opt/gitlab/embedded/lib/ruby/gems/2.1.0/gems/chef-11.12.2/lib/chef/application/solo.rb:19:in `&lt;top (required)&gt;'\n        from /opt/gitlab/embedded/lib/ruby/site_ruby/2.1.0/rubygems/core_ext/kernel_require.rb:73:in `require'\n        from /opt/gitlab/embedded/lib/ruby/site_ruby/2.1.0/rubygems/core_ext/kernel_require.rb:73:in `require'\n        from /opt/gitlab/embedded/lib/ruby/gems/2.1.0/gems/chef-11.12.2/bin/chef-solo:23:in `&lt;top (required)&gt;'\n        from /opt/gitlab/embedded/bin/chef-solo:23:in `load'\n        from /opt/gitlab/embedded/bin/chef-solo:23:in `&lt;main&gt;'\n</code></pre>\n"}, {"tags": ["ruby", "console"], "comments": [{"owner": {"reputation": 73209, "user_id": 290394, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d7908f05c89e965f6bc5308ad6f41256?s=128&d=identicon&r=PG", "display_name": "steenslag", "link": "https://stackoverflow.com/users/290394/steenslag"}, "edited": false, "score": 0, "creation_date": 1424818409, "post_id": 28707091, "comment_id": 45705227, "body": "Can&#39;t reproduce this."}, {"owner": {"reputation": 2572, "user_id": 187812, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/a0f940551239204d47630a10cd5154b4?s=128&d=identicon&r=PG", "display_name": "Josh Diehl", "link": "https://stackoverflow.com/users/187812/josh-diehl"}, "reply_to_user": {"reputation": 73209, "user_id": 290394, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d7908f05c89e965f6bc5308ad6f41256?s=128&d=identicon&r=PG", "display_name": "steenslag", "link": "https://stackoverflow.com/users/290394/steenslag"}, "edited": false, "score": 0, "creation_date": 1424818822, "post_id": 28707091, "comment_id": 45705421, "body": "Interesting. I wonder what that points to. Ruby version? Terminal? Machine?"}, {"owner": {"reputation": 73209, "user_id": 290394, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d7908f05c89e965f6bc5308ad6f41256?s=128&d=identicon&r=PG", "display_name": "steenslag", "link": "https://stackoverflow.com/users/290394/steenslag"}, "edited": false, "score": 0, "creation_date": 1424819848, "post_id": 28707091, "comment_id": 45705839, "body": "I&#39;m using 2.2.0 on ubuntu. I tried <code>puts &quot;a&quot;*2000; p gets.size</code> and copypaste the output as input. No surprises."}, {"owner": {"reputation": 32543, "user_id": 528726, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/6307569a99dd77fff0463032051d7e39?s=128&d=identicon&r=PG", "display_name": "joelparkerhenderson", "link": "https://stackoverflow.com/users/528726/joelparkerhenderson"}, "edited": false, "score": 0, "creation_date": 1424822098, "post_id": 28707091, "comment_id": 45706633, "body": "I reproduce it on Ruby 2.2.0 installed via ruby-build, Mac OSX 10.10.2, iTerm2. Bash and IRB work fine with a long copy/paste. But a ruby script that uses &quot;gets&quot; truncates and freezes when I copy/paste."}], "answers": [{"tags": [], "owner": {"reputation": 32543, "user_id": 528726, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/6307569a99dd77fff0463032051d7e39?s=128&d=identicon&r=PG", "display_name": "joelparkerhenderson", "link": "https://stackoverflow.com/users/528726/joelparkerhenderson"}, "is_accepted": true, "score": 2, "last_activity_date": 1499535009, "last_edit_date": 1499535009, "creation_date": 1424821313, "answer_id": 28708544, "question_id": 28707091, "link": "https://stackoverflow.com/questions/28707091/ruby-console-input-halting-at-1024-characters/28708544#28708544", "title": "Ruby console input halting at 1024 characters", "body": "<p>Try this:</p>\n\n<pre><code>gem install rb-readline\n</code></pre>\n\n<p>In your script:</p>\n\n<pre><code>require 'rb-readline'\n</code></pre>\n\n<p>and then, to read a line:</p>\n\n<pre><code>a = Readline::readline\n</code></pre>\n\n<p>Does that solve it?</p>\n\n<p>If so, you may also want to look at compiling your Ruby with readline:</p>\n\n<p><a href=\"https://github.com/guard/guard/wiki/Add-Readline-support-to-Ruby-on-Mac-OS-X\" rel=\"nofollow noreferrer\">https://github.com/guard/guard/wiki/Add-Readline-support-to-Ruby-on-Mac-OS-X</a></p>\n"}], "owner": {"reputation": 2572, "user_id": 187812, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/a0f940551239204d47630a10cd5154b4?s=128&d=identicon&r=PG", "display_name": "Josh Diehl", "link": "https://stackoverflow.com/users/187812/josh-diehl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 700, "favorite_count": 0, "accepted_answer_id": 28708544, "answer_count": 1, "score": 3, "last_activity_date": 1499535009, "creation_date": 1424814862, "last_edit_date": 1424824509, "question_id": 28707091, "link": "https://stackoverflow.com/questions/28707091/ruby-console-input-halting-at-1024-characters", "title": "Ruby console input halting at 1024 characters", "body": "<p>I have a script that takes console input into a variable and requires pasting in a string longer than 1024 characters.</p>\n\n<p>When I try to paste more than 1024 characters it stops accepting input after 1024 and just shows a truncated string.  Manually typing characters also hits this limit. How can I get around this?  </p>\n\n<p>iTerm doesn't seem to be the problem, I can paste more than 1024 to bash no problem.</p>\n\n<pre><code>irb\n2.1.3 :001 &gt; a = STDIN.gets\n</code></pre>\n\n<p>I have the same symptom when I use the  Highline::import gem and the <code>ask</code> method.</p>\n"}, {"tags": ["mysql", "ruby", "arrays", "json", "sequel"], "comments": [{"owner": {"reputation": 10344, "user_id": 1509401, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/HiLe4.jpg?s=128&g=1", "display_name": "thank_you", "link": "https://stackoverflow.com/users/1509401/thank-you"}, "edited": false, "score": 1, "creation_date": 1424814510, "post_id": 28706954, "comment_id": 45703330, "body": "Why are you using <code>$</code> in all your variables? Are you a PHP dev? Why don&#39;t you print out <code>$svc_details</code> and see what it looks like: <code>puts $svc_details.inspect</code>."}], "answers": [{"comments": [{"owner": {"reputation": 131, "user_id": 4150575, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/98db2b1906c92b64e58ebee339bbbf59?s=128&d=identicon&r=PG", "display_name": "Derek", "link": "https://stackoverflow.com/users/4150575/derek"}, "edited": false, "score": 0, "creation_date": 1424885448, "post_id": 28707050, "comment_id": 45737777, "body": "Sorry, should&#39;ve added that in from the get go. Applying the edit to my question."}], "tags": [], "owner": {"reputation": 61438, "user_id": 63034, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/ZXKMO.jpg?s=128&g=1", "display_name": "mikej", "link": "https://stackoverflow.com/users/63034/mikej"}, "is_accepted": true, "score": 0, "last_activity_date": 1424905717, "last_edit_date": 1424905717, "creation_date": 1424814701, "answer_id": 28707050, "question_id": 28706954, "link": "https://stackoverflow.com/questions/28706954/cant-convert-string-into-integer-extract-values-from-hash-within-a-hash/28707050#28707050", "title": "Can&#39;t Convert String into Integer - Extract Values from Hash within a Hash", "body": "<p>The <code>can't convert String into Integer (TypeError)</code> error is because <code>$svc_details</code> is an array i.e. a list of entries where you use a numeric index to select the one you want but you're trying to use a string <code>\"credentials\"</code> as an index for the array.</p>\n\n<p>If you look at your JSON you'll see that <code>\"mysql-5.1\"</code> at the start refers to an array (enclosed by the <code>[]</code> brackets) with 2 entries in it: the one that begins <code>{ \"name\":\"mysql-4f700\"...</code> and the second one that begins <code>{ \"name\":\"mysql-f1a13\"...</code></p>\n\n<p>This means that when you write:</p>\n\n<pre><code>$svc_details = $vcap[\"mysql-5.1\"]\n</code></pre>\n\n<p>then <code>$svc_details</code> is an array with 2 elements so you can't go straight to the <code>\"credentials\"</code> </p>\n\n<p>If you know whether you want the first or second entry then you can use <code>$svc_details = $vcap[\"mysql-5.1\"][0]</code> or <code>$svc_details = $vcap[\"mysql-5.1\"][1]</code> to select the appropriate section of the JSON, or you could write some code to find the entry with a particular name.</p>\n"}], "owner": {"reputation": 131, "user_id": 4150575, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/98db2b1906c92b64e58ebee339bbbf59?s=128&d=identicon&r=PG", "display_name": "Derek", "link": "https://stackoverflow.com/users/4150575/derek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 120, "favorite_count": 0, "accepted_answer_id": 28707050, "answer_count": 1, "score": 2, "last_activity_date": 1424905717, "creation_date": 1424814344, "last_edit_date": 1424886006, "question_id": 28706954, "link": "https://stackoverflow.com/questions/28706954/cant-convert-string-into-integer-extract-values-from-hash-within-a-hash", "title": "Can&#39;t Convert String into Integer - Extract Values from Hash within a Hash", "body": "<p>I've found a bunch of topics that were very similar, but I'm just missing something. >.&lt;</p>\n\n<p>Basically, I'm trying to create the a variable called <code>$db_url</code> with the database credentials, host address, and name.</p>\n\n<p>When trying to extract the value of a hash within a hash, I'm getting the following error:</p>\n\n<pre><code>`[]': can't convert String into Integer (TypeError)\n</code></pre>\n\n<p>on this line:</p>\n\n<pre><code>$credentials = $svc_details[\"credentials\"]\n</code></pre>\n\n<hr>\n\n<p>Here's the context:</p>\n\n<pre><code>if (ENV['VCAP_SERVICES'])\n\n  $vcap = JSON.parse(ENV['VCAP_SERVICES'])\n  $svc_details = $vcap[\"mysql-5.1\"]\n  $credentials = $svc_details[\"credentials\"]\n  $host = $credentials[\"host\"]\n  $username = $credentials[\"username\"]\n  $password = $credentials[\"password\"]\n  $database = $credentials[\"name\"]\n  $port = $credentials[\"port\"]\n  $db_url = \"mysql://#{$username}:#{$password}@#{$host}/#{$database}\"\n\nend\n\nconfigure do\n  Sequel.connect($db_url || ENV['DATABASE_URL'] || 'sqlite://blog.db')\n\n  require 'ostruct'\n  Blog = OpenStruct.new(\n    :title =&gt; 'My Title',\n    :author =&gt; 'My Name',\n    :url_base =&gt; ENV['SITE_URL'],\n    :admin_password =&gt; 'My Password',\n    :admin_cookie_key =&gt; 'cookie_key',\n    :admin_cookie_value =&gt; 'cookie_value',\n    :disqus_shortname =&gt; nil\n  )\nend\n</code></pre>\n\n<p><strong>EDIT:</strong></p>\n\n<p>Here's an example of the JSON I'm trying to work:</p>\n\n<pre><code>{\"mysql-5.1\":[\n    {\n        \"name\":\"mysql-4f700\",\n        \"label\":\"mysql-5.1\",\n        \"plan\":\"free\",\n        \"tags\":[\"mysql\",\"mysql-5.1\",\"relational\"],\n        \"credentials\":{\n            \"name\":\"d6d665aa69817406d8901cd145e05e3c6\",\n            \"hostname\":\"mysql-node01.us-east-1.aws.af.cm\",\n            \"host\":\"mysql-node01.us-east-1.aws.af.cm\",\n            \"port\":3306,\n            \"user\":\"uB7CoL4Hxv9Ny\",\n            \"username\":\"uB7CoL4Hxv9Ny\",\n            \"password\":\"pzAx0iaOp2yKB\"\n        }\n    },\n    {\n        \"name\":\"mysql-f1a13\",\n        \"label\":\"mysql-5.1\",\n        \"plan\":\"free\",\n        \"tags\":[\"mysql\",\"mysql-5.1\",\"relational\"],\n        \"credentials\":{\n            \"name\":\"db777ab9da32047d99dd6cdae3aafebda\",\n            \"hostname\":\"mysql-node01.us-east-1.aws.af.cm\",\n            \"host\":\"mysql-node01.us-east-1.aws.af.cm\",\n            \"port\":3306,\n            \"user\":\"uJHApvZF6JBqT\",\n            \"username\":\"uJHApvZF6JBqT\",\n            \"password\":\"p146KmfkqGYmi\"\n        }\n    }\n]}\n</code></pre>\n\n<p>I'm a programming newbie, so I apologize if I'm missing information or don't understand something.</p>\n"}, {"tags": ["ruby", "nomethoderror"], "answers": [{"comments": [{"owner": {"reputation": 484, "user_id": 4476015, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/HOHDl.jpg?s=128&g=1", "display_name": "Harjan", "link": "https://stackoverflow.com/users/4476015/harjan"}, "edited": false, "score": 0, "creation_date": 1424814275, "post_id": 28706829, "comment_id": 45703214, "body": "i see your point  problem with that is...  <code>file_1 = Computer_create.new(&quot;FileTest&quot;) file_1.create(&quot;FileTest&quot;) file_2 = Computer_create.new(&quot;FileTest2&quot;) file_2.create(&quot;FileTest2&quot;) file_1.list file_2.list</code>  it just print out that filetest 1 and 2 have been created. what im trying to do is show all the files i have in my array. but nothing shows up."}], "tags": [], "owner": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "is_accepted": true, "score": 0, "last_activity_date": 1424813880, "creation_date": 1424813880, "answer_id": 28706829, "question_id": 28706770, "link": "https://stackoverflow.com/questions/28706770/undefined-method-for-class-calling-methods-outside-of-a-class/28706829#28706829", "title": "Undefined method for class / calling methods outside of a class", "body": "<p>The error message is exactly right; the class doesn't have a <code>list</code> method.</p>\n\n<p>Call <code>list</code> on the <em>instance</em> of <code>Computer_create</code> you already created, e.g.,</p>\n\n<pre><code>file_1.list\n</code></pre>\n\n<p>In other words, exactly how you called the <em>other</em> instance method, <code>file_1.create</code>.</p>\n\n<p>You're also using <code>@@</code> in an... unusual way. As far as I can tell you mean those variables to be <em>instance</em> variables, which require only a single <code>@</code>.</p>\n\n<p>Unrelated, but putting <code>public</code> before each public method is noisy and unnecessary. In fact, I'd say only put <code>private</code>, once, in front of a collection of private methods.</p>\n"}], "owner": {"reputation": 484, "user_id": 4476015, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/HOHDl.jpg?s=128&g=1", "display_name": "Harjan", "link": "https://stackoverflow.com/users/4476015/harjan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "accepted_answer_id": 28706829, "answer_count": 1, "score": 0, "last_activity_date": 1424813880, "creation_date": 1424813649, "question_id": 28706770, "link": "https://stackoverflow.com/questions/28706770/undefined-method-for-class-calling-methods-outside-of-a-class", "title": "Undefined method for class / calling methods outside of a class", "body": "<pre><code>class Computer_create\n\n  public\n  def initialize(filename)\n    @@files = []\n    @filename = filename\n  end\n\n  public\n  def create(filename)\n    @@files &lt;&lt; filename\n    puts \"File: #{filename} has been created\"\n  end\n\n  public\n  def list\n    return @@files\n  end\nend\n\nfile_1 = Computer_create.new(\"FileTest\")\nfile_1.create(\"FileTest\")\n\nComputer_create.list\n</code></pre>\n\n<p>im just trying to make a simple sort of database which can make files, and store them in a Array, working on storing them in a hash though.\nBut every time i try out my code it gives me this:</p>\n\n<p><strong>\"computer_create.rb:24:in <code>&lt;top (required)&gt;': undefined method</code>list' for Computer_create:Class (NoMethodError)\"</strong></p>\n\n<p>what im trying to do is: make a file called <code>FileTest</code> via <code>file_1</code>\nand then list all the files in <code>@@files</code>\nbut it just doesnt seem to work.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "model", "scope"], "answers": [{"tags": [], "owner": {"reputation": 3945, "user_id": 2325598, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/wbO59.jpg?s=128&g=1", "display_name": "Dan Rubio", "link": "https://stackoverflow.com/users/2325598/dan-rubio"}, "is_accepted": true, "score": 1, "last_activity_date": 1424813615, "creation_date": 1424813615, "answer_id": 28706758, "question_id": 28706722, "link": "https://stackoverflow.com/questions/28706722/adding-scope-to-get-objects-in-reverse-order-of-their-created-time-in-rails/28706758#28706758", "title": "Adding scope to get objects in reverse order of their created time in rails", "body": "<p>Try this:</p>\n\n<p>scope :ordered_by_reverse_order, -> { order('created_at ASC') }</p>\n"}, {"tags": [], "owner": {"reputation": 7188, "user_id": 597358, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/549be4b1e60fe2cbf6b0724802961705?s=128&d=identicon&r=PG", "display_name": "messanjah", "link": "https://stackoverflow.com/users/597358/messanjah"}, "is_accepted": false, "score": 1, "last_activity_date": 1424815700, "creation_date": 1424815700, "answer_id": 28707303, "question_id": 28706722, "link": "https://stackoverflow.com/questions/28706722/adding-scope-to-get-objects-in-reverse-order-of-their-created-time-in-rails/28707303#28707303", "title": "Adding scope to get objects in reverse order of their created time in rails", "body": "<p>Sounds like you want <a href=\"http://apidock.com/rails/ActiveRecord/QueryMethods/reverse_order\" rel=\"nofollow\"><code>reverse_order</code></a> (Rails 3+).</p>\n\n<pre><code>scope :ordered_by_reverse_order, -&gt; { order(:created_at).reverse_order }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1042, "user_id": 3432885, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/68b79facf0b58be9c24a40603a295c8d?s=128&d=identicon&r=PG&f=1", "display_name": "n0rm", "link": "https://stackoverflow.com/users/3432885/n0rm"}, "is_accepted": false, "score": 0, "last_activity_date": 1424818059, "creation_date": 1424818059, "answer_id": 28707886, "question_id": 28706722, "link": "https://stackoverflow.com/questions/28706722/adding-scope-to-get-objects-in-reverse-order-of-their-created-time-in-rails/28707886#28707886", "title": "Adding scope to get objects in reverse order of their created time in rails", "body": "<p>I prefer to use class methods when defining scopes for models on rails.\nThis is the exact same as your scope method, but personally I think its cleaner.</p>\n\n<p>Try ordering your posts in ascending order instead of descending:</p>\n\n<pre><code>class Post &lt; ActiveRecord::Base\n  has_many :comments\n  belongs_to :user \n\n  def self.reversed\n    order('created_at ASC')\n  end \nend\n\n# ASC\n# Fri, 20 Feb 2015 08:41:26 UTC +00:00\n# Fri, 20 Feb 2015 08:42:25 UTC +00:00\n# Fri, 20 Feb 2015 08:43:53 UTC +00:00\n\n# DESC\n# Fri, 20 Feb 2015 12:43:25 UTC +00:00\n# Fri, 20 Feb 2015 08:44:48 UTC +00:00\n# Fri, 20 Feb 2015 08:43:53 UTC +00:00\n</code></pre>\n\n<p>Executing following command should return what you want:</p>\n\n<pre><code>Post.reversed\n</code></pre>\n"}], "owner": {"reputation": 73, "user_id": 4469144, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/afe6c5629e4074dbf462f245a1c82fc6?s=128&d=identicon&r=PG&f=1", "display_name": "Zein", "link": "https://stackoverflow.com/users/4469144/zein"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1655, "favorite_count": 0, "accepted_answer_id": 28706758, "answer_count": 3, "score": 3, "last_activity_date": 1424818059, "creation_date": 1424813513, "question_id": 28706722, "link": "https://stackoverflow.com/questions/28706722/adding-scope-to-get-objects-in-reverse-order-of-their-created-time-in-rails", "title": "Adding scope to get objects in reverse order of their created time in rails", "body": "<p>I'm new to Ruby on rails and programming.\nI am working on a exercise where I have a <strong>Post</strong> model,and I need to add a new <strong>scope</strong> to it to retrieve its objects in reverse order of their created time.</p>\n\n<p>Here is my model code:\n</p>\n\n<pre class=\"lang-or-tag-here prettyprint-override\"><code>class Post &lt; ActiveRecord::Base\n      has_many :comments\n      belongs_to :user \nscope :ordered_by_reverse_order, -&gt; { order('created_at DESC').reverse} \nend\n</code></pre>\n\n<p>I have tried <code>{reverse('created_at DESC')}</code> as well, both didn't work.</p>\n"}, {"tags": ["ruby", "metaprogramming"], "comments": [{"owner": {"reputation": 18079, "user_id": 503402, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/873ad707fb34aac8fbdfbfec676e02e9?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/503402/max"}, "edited": false, "score": 0, "creation_date": 1424813493, "post_id": 28706619, "comment_id": 45702796, "body": "An example of how you would call/use the method that accepts the symbols would be helpful."}, {"owner": {"reputation": 255, "user_id": 3740256, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/ab77835d31f494cd418392933a4a4971?s=128&d=identicon&r=PG&f=1", "display_name": "mariya", "link": "https://stackoverflow.com/users/3740256/mariya"}, "edited": false, "score": 0, "creation_date": 1424813829, "post_id": 28706619, "comment_id": 45702994, "body": "I edited the question"}, {"owner": {"reputation": 18079, "user_id": 503402, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/873ad707fb34aac8fbdfbfec676e02e9?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/503402/max"}, "edited": false, "score": 1, "creation_date": 1424817688, "post_id": 28706619, "comment_id": 45704887, "body": "This still seems like an XY problem to me. I can&#39;t think of any reason why you would ever need to pass a local variable <i>name</i>, rather than the local variable itself."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1424827377, "post_id": 28706619, "comment_id": 45708032, "body": "If I understand the question correctly, the answer is NO! It seems like you want to take an instance method from class <code>A</code> and make it an instance method of class <code>B</code>. Is that correct? Consider that when that method is invoked on an instance of <code>A</code> it can inspect instance variables, invoke other methods of <code>A</code>, etc.  None of that would be possible for an instance of <code>B</code>. If you could do that, presumably you could add the method <code>String#downcase</code> to the class <code>Hash</code>, to allow you to &quot;dowcase hashes&quot;! But as I said before, perhaps I&#39;ve misunderstood the question. If so please clarify by editing."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1424879782, "post_id": 28706619, "comment_id": 45733806, "body": "@CarySwoveland: The requirement that methods can only be bound to instances of their <code>owner</code> has been lifted sometime between 2.0 and 2.2. But actually, that is irrelevant here, since the OP&#39;s method is a &quot;global&quot; method, i.e. an instance method of <code>Object</code>, anyway."}], "answers": [{"comments": [{"owner": {"reputation": 27492, "user_id": 3773011, "user_type": "moderator", "profile_image": "https://i.stack.imgur.com/Hmfxy.jpg?s=128&g=1", "display_name": "Makyen", "link": "https://stackoverflow.com/users/3773011/makyen"}, "edited": false, "score": 1, "creation_date": 1424849923, "post_id": 28707173, "comment_id": 45715034, "body": "Please <a href=\"https://stackoverflow.com/posts/28707173/edit\">edit</a> in an explanation of why/how this code answers the question? Code-only answers are discouraged, because they are not as easy to learn from as code with an explanation. Without an explanation it takes considerably more time and effort to understand what was being done, the changes made to the code, if the code answers the question, etc.  The explanation is important both for people attempting to learn from the answer and those evaluating the answer to see if it is valid, or worth up voting."}, {"owner": {"reputation": 13651, "user_id": 1509733, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/b999a449f3dcbf15ff4278738bdbd47a?s=128&d=identicon&r=PG&f=1", "display_name": "ave", "link": "https://stackoverflow.com/users/1509733/ave"}, "reply_to_user": {"reputation": 27492, "user_id": 3773011, "user_type": "moderator", "profile_image": "https://i.stack.imgur.com/Hmfxy.jpg?s=128&g=1", "display_name": "Makyen", "link": "https://stackoverflow.com/users/3773011/makyen"}, "edited": false, "score": 0, "creation_date": 1424866537, "post_id": 28707173, "comment_id": 45724406, "body": "Okay, I added some explanation. The answer doesn&#39;t cover how to get a local variable by the symbol as it was covered by other answers but hope it&#39;s still useful."}], "tags": [], "owner": {"reputation": 13651, "user_id": 1509733, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/b999a449f3dcbf15ff4278738bdbd47a?s=128&d=identicon&r=PG&f=1", "display_name": "ave", "link": "https://stackoverflow.com/users/1509733/ave"}, "is_accepted": false, "score": 0, "last_activity_date": 1424866252, "last_edit_date": 1424866252, "creation_date": 1424815161, "answer_id": 28707173, "question_id": 28706619, "link": "https://stackoverflow.com/questions/28706619/binding-method-to-instance/28707173#28707173", "title": "Binding method to instance", "body": "<p>Let's say we have a class <code>A</code> with a method <code>a</code> and a local variable <code>c</code>.</p>\n\n<pre><code>class A\n  def a; 10 end\nend\n\nc = '5'\n</code></pre>\n\n<p>And we want to add the method <code>A#a</code> to <code>c</code>.</p>\n\n<p>This is how it can be done</p>\n\n<pre><code>c.singleton_class.send :define_method, :b, &amp;A.new.method(:a)\np c.b # =&gt; 10\n</code></pre>\n\n<p>Explanations.</p>\n\n<p>One way to add a method to an object instance and not to its class is to define it in its singleton class (which every ruby object has).</p>\n\n<p>We can get the <code>c</code>'s singleton class by calling the corresponding method <code>c.signleton_class</code>.</p>\n\n<p>Next we need to dynamically define a method in its class and this can usually be accomplished by using the <code>define_method</code> which takes a method name as its first argument (in our case <code>:b</code>) and a block. Now, converting the method into a block might look a bit tricky but the idea is relatively simple: we first transform the method into a <code>Method</code> instance by calling the <a href=\"http://ruby-doc.org/core-2.0.0/Object.html#method-i-method\" rel=\"nofollow\">Object#method</a> and then by putting the <code>&amp;</code> before <code>A.new.method(:a)</code> we tell the interpreter to call the <code>to_proc</code> method on our object (as our returned object is an instance of the <code>Method</code>, the <a href=\"http://ruby-doc.org/core-2.0.0/Method.html#method-i-to_proc\" rel=\"nofollow\">Method#to_proc</a> will be called) and after that the returned proc will be translated into a block that the <code>define_method</code> expects as its second argument.</p>\n"}, {"comments": [{"owner": {"reputation": 255, "user_id": 3740256, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/ab77835d31f494cd418392933a4a4971?s=128&d=identicon&r=PG&f=1", "display_name": "mariya", "link": "https://stackoverflow.com/users/3740256/mariya"}, "edited": false, "score": 0, "creation_date": 1424815897, "post_id": 28707228, "comment_id": 45704057, "body": "The only problem is that <code>some_instance</code> is passed as a symbol argument. Can I somehow transform the symbol <code>:some_instance</code> to the instance <code>some_instance</code>?"}, {"owner": {"reputation": 61438, "user_id": 63034, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/ZXKMO.jpg?s=128&g=1", "display_name": "mikej", "link": "https://stackoverflow.com/users/63034/mikej"}, "reply_to_user": {"reputation": 255, "user_id": 3740256, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/ab77835d31f494cd418392933a4a4971?s=128&d=identicon&r=PG&f=1", "display_name": "mariya", "link": "https://stackoverflow.com/users/3740256/mariya"}, "edited": false, "score": 0, "creation_date": 1424816341, "post_id": 28707228, "comment_id": 45704287, "body": "In Ruby 2.1 and later you can use <code>local_variable_get</code> to go from the symbol to the instance variable e.g. <code>local_variable_get(some_instance)</code>"}], "tags": [], "owner": {"reputation": 61438, "user_id": 63034, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/ZXKMO.jpg?s=128&g=1", "display_name": "mikej", "link": "https://stackoverflow.com/users/63034/mikej"}, "is_accepted": false, "score": 1, "last_activity_date": 1424815758, "last_edit_date": 1424815758, "creation_date": 1424815378, "answer_id": 28707228, "question_id": 28706619, "link": "https://stackoverflow.com/questions/28706619/binding-method-to-instance/28707228#28707228", "title": "Binding method to instance", "body": "<p>If you'd like to add a method <em>just</em> to <code>some_instance</code> i.e. it's not available on other instances of <code>Klass</code> then this can be done using <code>define_singleton_method</code> (documentation <a href=\"http://ruby-doc.org/core-2.2.0/Object.html#method-i-define_singleton_method\" rel=\"nofollow\">here</a>.)</p>\n\n<pre><code>some_instance.define_singleton_method(:some_method, method(:some_method))\n</code></pre>\n\n<p>Here the first use of the symbol <code>:some_method</code> is the name you'd like the method to have on <code>some_instance</code> and the second use as a parameter to <code>method</code> is creating a <code>Method</code> object from your existing method.</p>\n\n<p>If you'd like to use the same name as the existing method you could wrap this in your own method like:</p>\n\n<pre><code>def add_method(obj, name)\n  obj.define_singleton_method(name, method(name))\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 255, "user_id": 3740256, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/ab77835d31f494cd418392933a4a4971?s=128&d=identicon&r=PG&f=1", "display_name": "mariya", "link": "https://stackoverflow.com/users/3740256/mariya"}, "edited": false, "score": 0, "creation_date": 1424816448, "post_id": 28707299, "comment_id": 45704326, "body": "Is there a way to do this without the <code>block</code>?"}, {"owner": {"reputation": 255, "user_id": 3740256, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/ab77835d31f494cd418392933a4a4971?s=128&d=identicon&r=PG&f=1", "display_name": "mariya", "link": "https://stackoverflow.com/users/3740256/mariya"}, "edited": false, "score": 0, "creation_date": 1424816947, "post_id": 28707299, "comment_id": 45704573, "body": "No. It has to be in <code>method_that_binds</code>. It has to be something like Rails&#39; <code>delegate</code> but I can&#39;t use the original."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1424888300, "post_id": 28707299, "comment_id": 45739725, "body": "Note that <code>harry</code> cannot see instance variables referenced by <code>test</code>: <code>@a = &#39;hey&#39;; def test; puts instance_variable_defined?(:@a); end</code>. Then after defining <code>harry#test</code>, <code>harry.test =&gt; false</code>."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1424890889, "post_id": 28707299, "comment_id": 45741127, "body": "Is the end result the same as <code>def harry.test; Object.new.send(:test); end</code>? In other words, does this create a method <code>harry#test</code> that merely invokes <code>Object#test</code> on a new instance of <code>Object</code>? If so, I don&#39;t think &quot;bind&quot; is the right term."}], "tags": [], "owner": {"reputation": 2859, "user_id": 3945932, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1794745acd9e572c24558b78b48d597?s=128&d=identicon&r=PG", "display_name": "ptd", "link": "https://stackoverflow.com/users/3945932/ptd"}, "is_accepted": true, "score": 2, "last_activity_date": 1424818870, "last_edit_date": 1424818870, "creation_date": 1424815680, "answer_id": 28707299, "question_id": 28706619, "link": "https://stackoverflow.com/questions/28706619/binding-method-to-instance/28707299#28707299", "title": "Binding method to instance", "body": "<p>Your requirements are a little unusual, but it is possible to do this mostly as you say:</p>\n\n<pre><code>class Person; end\nharry = Person.new\nbarry = Person.new\n\ndef test\n  puts 'It works!'\nend\n\ndefine_method :method_that_binds do |a_method, to|\n  eval(to[:to].to_s).singleton_class.send(:define_method, a_method, &amp;Object.new.method(a_method))\nend\n\nmethod_that_binds :test, to: :harry\nharry.test\n# It works! will be sent to STDOUT\nbarry.test\n# undefined method 'test'\n</code></pre>\n\n<p>This doesn't actually use a named parameter, but accepts a hash with a <code>to</code> key, but you can see you can call it in the way you want. It also assumes that the methods you are defining are defined globally on <code>Object</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "is_accepted": false, "score": 2, "last_activity_date": 1424880593, "creation_date": 1424880593, "answer_id": 28723883, "question_id": 28706619, "link": "https://stackoverflow.com/questions/28706619/binding-method-to-instance/28723883#28723883", "title": "Binding method to instance", "body": "<p>The API you want doesn't easily work, because you have to know from <em>which scope</em> you want to access the local variable. It's not quite clear to me why you want to pass the name of the local variable instead of passing the content of the local variable \u2026 after all, the local variable <em>is</em> present at the call site.</p>\n\n<p>Anyway, if you pass in the scope in addition to the name, this can be accomplished rather easily:</p>\n\n<pre><code>def some_method(*args)\n  puts args\n  puts \"I can access some_instance's ivar: #@private_instance_var\"\nend\n\nclass Foo; def initialize; @private_instance_var = :foo end end\n\nsome_instance = Foo.new\n\ndef method_that_binds(meth, to:, within:, with: [])\n  self.class.instance_method(meth).bind(within.local_variable_get(to)).(*with)\nend\n\nmethod_that_binds(:some_method, to: :some_instance, within: binding, with: ['arg1', 'arg2'])\n# arg1\n# arg2\n# I can access some_instance's ivar: foo\n</code></pre>\n\n<p>As you can see, I also added a way to pass arguments to the method. Without that extension, it becomes even simpler:</p>\n\n<pre><code>def method_that_binds(meth, to:, within:)\n  self.class.instance_method(meth).bind(within.local_variable_get(to)).()\nend\n</code></pre>\n\n<p>But you have to pass the scope (<code>Binding</code>) into the method.</p>\n"}], "owner": {"reputation": 255, "user_id": 3740256, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/ab77835d31f494cd418392933a4a4971?s=128&d=identicon&r=PG&f=1", "display_name": "mariya", "link": "https://stackoverflow.com/users/3740256/mariya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 373, "favorite_count": 3, "accepted_answer_id": 28707299, "answer_count": 4, "score": 1, "last_activity_date": 1424880593, "creation_date": 1424813142, "last_edit_date": 1424824584, "question_id": 28706619, "link": "https://stackoverflow.com/questions/28706619/binding-method-to-instance", "title": "Binding method to instance", "body": "<p>Is there a way to bind an existing method to an existing instance of an object if both the method and the instance are passed as symbols into a method that does that if the instance is not a symbol?</p>\n\n<p>For example:</p>\n\n<pre><code>    def some_method\n      #do something\n    end\n\n    some_instance = Klass.new(something)\n\n    def method_that_binds(:some_method, to: :some_instance)\n      #how do I do that?\n    end\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "access-control"], "comments": [{"owner": {"reputation": 3976, "user_id": 1210165, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f674db9036f7245292bb87295431e31?s=128&d=identicon&r=PG", "display_name": "evanbikes", "link": "https://stackoverflow.com/users/1210165/evanbikes"}, "edited": false, "score": 1, "creation_date": 1424813717, "post_id": 28706539, "comment_id": 45702919, "body": "Before filters are called in the order that they are listed. But you can use <code>prepend_before_filter</code> for <code>allow_access_to_</code> to add it to the front of the stack of before filters."}, {"owner": {"reputation": 1287, "user_id": 3137549, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/H7moE.png?s=128&g=1", "display_name": "rdnewman", "link": "https://stackoverflow.com/users/3137549/rdnewman"}, "edited": false, "score": 1, "creation_date": 1424814985, "post_id": 28706539, "comment_id": 45703558, "body": "make a lightweight mixin module that has a method named <code>authorize</code> (or something).  Add this module at the ApplicationController level and invoke <code>authorize</code> as the <code>ApplicationController&#39;s</code> <code>before_filter</code>.   Have the default implementation of <code>authorize</code> deny everything.   In your sub-Controllers, override <code>authorize</code> to do the authorization you want.  Basically this is just a DIY form of a simple authorization gem."}, {"owner": {"reputation": 10377, "user_id": 2832282, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ZJ4WG.jpg?s=128&g=1", "display_name": "Cyril Duchon-Doris", "link": "https://stackoverflow.com/users/2832282/cyril-duchon-doris"}, "edited": false, "score": 0, "creation_date": 1424817122, "post_id": 28706539, "comment_id": 45704657, "body": "I need per-action access control. So I can&#39;t just redefine an <code>authorize</code> method in the controllers. Or, I would have to check inside this method which action I&#39;m calling."}, {"owner": {"reputation": 1287, "user_id": 3137549, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/H7moE.png?s=128&g=1", "display_name": "rdnewman", "link": "https://stackoverflow.com/users/3137549/rdnewman"}, "edited": false, "score": 0, "creation_date": 1424818062, "post_id": 28706539, "comment_id": 45705062, "body": "Same issue you&#39;d have with the generic filters approach though.   Something like <code>cancancan</code> addresses this, but then that&#39;s an external gem (reasonably lightweight, but still outside the scope of your question).  If however, you follow a basic CRUD pattern, just assign methods to each of the CRUD letters and only override when that you have something odd.  Then in <code>authorize</code> do something like <code>if :read, then </code> type logic.  Again if a mix-in, most of the sub-Controller&#39;s code would barely see it.  This keeps you from testing each action but lets you vary pretty easily (same as <code>cancancan</code>)."}, {"owner": {"reputation": 10377, "user_id": 2832282, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ZJ4WG.jpg?s=128&g=1", "display_name": "Cyril Duchon-Doris", "link": "https://stackoverflow.com/users/2832282/cyril-duchon-doris"}, "edited": false, "score": 0, "creation_date": 1424818428, "post_id": 28706539, "comment_id": 45705232, "body": "With filter approch, I can do <code>prepend_before_action :allow_access_to_, only: [:action1, :action2]</code>"}, {"owner": {"reputation": 1287, "user_id": 3137549, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/H7moE.png?s=128&g=1", "display_name": "rdnewman", "link": "https://stackoverflow.com/users/3137549/rdnewman"}, "edited": false, "score": 0, "creation_date": 1424818574, "post_id": 28706539, "comment_id": 45705296, "body": "Ah, right.   Still, breaking down <code>authorize</code> in the mixin to be <code>authorize_read</code>, etc. would let you do the same thing re the <code>only:</code>/<code>except:</code> modifiers.  By putting <code>authorize_read</code>, <code>authorize_create</code>, etc.  in the ApplicationController, you&#39;d probably get 90% of it."}, {"owner": {"reputation": 1287, "user_id": 3137549, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/H7moE.png?s=128&g=1", "display_name": "rdnewman", "link": "https://stackoverflow.com/users/3137549/rdnewman"}, "edited": false, "score": 0, "creation_date": 1424818788, "post_id": 28706539, "comment_id": 45705402, "body": "Also, I&#39;m a little worried this might be premature optimization.  You stated that you&#39;re worried an existing gem might slow the code down to use an existing gem.  Until that code shows itself to be a significant bottleneck, you may be just reinventing the wheel which is often slower/buggier than a stock solution.  If I were you, I&#39;d do a quick experiment with a gem and make sure the performance savings are really worth it before implementing a DIY solution."}, {"owner": {"reputation": 10377, "user_id": 2832282, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ZJ4WG.jpg?s=128&g=1", "display_name": "Cyril Duchon-Doris", "link": "https://stackoverflow.com/users/2832282/cyril-duchon-doris"}, "edited": false, "score": 0, "creation_date": 1424818904, "post_id": 28706539, "comment_id": 45705456, "body": "This isn&#39;t so much about performance, but rather I feel what I need to do is too simple for a gem. And concerning security, well I&#39;m just dealing with authorize/deny so I&#39;m not sure this is relevant."}, {"owner": {"reputation": 1287, "user_id": 3137549, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/H7moE.png?s=128&g=1", "display_name": "rdnewman", "link": "https://stackoverflow.com/users/3137549/rdnewman"}, "reply_to_user": {"reputation": 10377, "user_id": 2832282, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ZJ4WG.jpg?s=128&g=1", "display_name": "Cyril Duchon-Doris", "link": "https://stackoverflow.com/users/2832282/cyril-duchon-doris"}, "edited": false, "score": 0, "creation_date": 1424819147, "post_id": 28706539, "comment_id": 45705550, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/71624/discussion-between-rdnewman-and-cyril-dd\">continue this discussion in chat</a>."}, {"owner": {"reputation": 89146, "user_id": 211563, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d32a10a2f047dec1e5582e74cba6b3ec?s=128&d=identicon&r=PG", "display_name": "Andrew Marshall", "link": "https://stackoverflow.com/users/211563/andrew-marshall"}, "edited": false, "score": 0, "creation_date": 1424826991, "post_id": 28706539, "comment_id": 45707915, "body": "One thing I would say is to avoid defining authorization per controller and action, and instead by object and action. The former prevents you from authorizing something outside of a particular controller action."}, {"owner": {"reputation": 10377, "user_id": 2832282, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ZJ4WG.jpg?s=128&g=1", "display_name": "Cyril Duchon-Doris", "link": "https://stackoverflow.com/users/2832282/cyril-duchon-doris"}, "edited": false, "score": 0, "creation_date": 1424828484, "post_id": 28706539, "comment_id": 45708355, "body": "Unfortunately my controllers are very RESTless, and it makes it difficult for a really object oriented-approach. For example, my ProjectController is only 1/5 RESTful"}], "answers": [{"comments": [{"owner": {"reputation": 10377, "user_id": 2832282, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ZJ4WG.jpg?s=128&g=1", "display_name": "Cyril Duchon-Doris", "link": "https://stackoverflow.com/users/2832282/cyril-duchon-doris"}, "edited": false, "score": 0, "creation_date": 1424820337, "post_id": 28708346, "comment_id": 45706029, "body": "My users &quot;roles&quot; come from a LDAP, and I manually rebuild a cache of user groups. Not sure I could interface this easily with gems. But I&#39;ll give a try to some gems. And yes I also use Devise."}, {"owner": {"reputation": 1042, "user_id": 3432885, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/68b79facf0b58be9c24a40603a295c8d?s=128&d=identicon&r=PG&f=1", "display_name": "n0rm", "link": "https://stackoverflow.com/users/3432885/n0rm"}, "reply_to_user": {"reputation": 10377, "user_id": 2832282, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ZJ4WG.jpg?s=128&g=1", "display_name": "Cyril Duchon-Doris", "link": "https://stackoverflow.com/users/2832282/cyril-duchon-doris"}, "edited": false, "score": 0, "creation_date": 1424820566, "post_id": 28708346, "comment_id": 45706120, "body": "I don&#39;t think the problem is with the gems you could use. If you can make the <code>current_user</code> aware of the <code>roles</code> he has with corresponding allowed actions you can easily build your own authorization system with pundit.  Pundit just expects a true or false to evaluate if the person is authorized or not."}, {"owner": {"reputation": 89146, "user_id": 211563, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d32a10a2f047dec1e5582e74cba6b3ec?s=128&d=identicon&r=PG", "display_name": "Andrew Marshall", "link": "https://stackoverflow.com/users/211563/andrew-marshall"}, "edited": false, "score": 1, "creation_date": 1424827176, "post_id": 28708346, "comment_id": 45707973, "body": "Devise is for authentication, not authorization. Pundit is so simple you can roll your own with little effort, it really doesn\u2019t give you much (but it\u2019s design is, in general, good\u2014much better than CanCan(Can))."}], "tags": [], "owner": {"reputation": 1042, "user_id": 3432885, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/68b79facf0b58be9c24a40603a295c8d?s=128&d=identicon&r=PG&f=1", "display_name": "n0rm", "link": "https://stackoverflow.com/users/3432885/n0rm"}, "is_accepted": false, "score": 3, "last_activity_date": 1424856312, "last_edit_date": 1424856312, "creation_date": 1424820125, "answer_id": 28708346, "question_id": 28706539, "link": "https://stackoverflow.com/questions/28706539/rails-simple-access-control/28708346#28708346", "title": "Rails simple access control", "body": "<p>I would really advise using a proper battle tested gem for authentication &amp; authorisation instead of rolling your own. These gems have enormous test suites and aren't really all that hard to setup.</p>\n\n<p>I've recently implemented an action based authorization using roles with <a href=\"https://github.com/elabs/pundit\" rel=\"nofollow\">Pundit</a> &amp; <a href=\"https://github.com/plataformatec/devise\" rel=\"nofollow\">Devise</a></p>\n\n<p>Devise is changeable as long as the gem you are using provides a <code>current_user</code> method if you don't want to further configure pundit.</p>\n\n<pre><code># app/controllers/application_controller.rb\nclass ApplicationController &lt; ActionController::Base\n  include Pundit\n\n  rescue_from Pundit::NotAuthorizedError, with: :rescue_unauthorized\n\n  # Lock actions untill authorization is performed\n  before_action :authorize_user\n\n  # Fallback when not authorized\n  def rescue_unauthorized(exception)\n    policy_name = exception.policy.class.to_s.underscore\n    flash[:notice] = t(\n      \"#{policy_name}.#{exception.query}\",\n      scope: \"pundit\",\n      default: :default\n    )\n    redirect_to(request.referrer || root_path)\n  end\nend\n\n# app/models/user.rb\nclass User &lt; ActiveRecord::Base\n  has_many :roles, through: :memberships\n\n  def authorized?(action)\n    claim = String(action)\n    roles.pluck(:claim).any? { |role_claim| role_claim == claim }\n  end\nend\n\n# app/policies/user_policy.rb =&gt; maps to user_controller#actions\nclass UserPolicy &lt; ApplicationPolicy\n  class Scope &lt; Scope\n    attr_reader :user, :scope\n\n    # user is automagically set to current_user\n    def initialize(user, scope)\n      @user = user\n      @scope = scope\n    end\n\n    def resolve\n      scope.all\n    end\n  end\n\n  def index?\n    # If user has a role which has the claim :view_users\n    # Allow this user to use the user#index action\n    @user.authorized? :view_users \n  end\n\n  def new?\n    @user.authorized? :new_users\n  end\n\n  def edit?\n    @user.authorized? :edit_users\n  end\n\n  def create?\n    new?\n  end\n\n  def update?\n    edit?\n  end\n\n  def destroy?\n    @user.authorized? :destroy_users\n  end\nend\n</code></pre>\n\n<p>Long story short: </p>\n\n<p>If you configure pundit to force authorization on each request which is described in detail on the github page, the controller evaluates a policy based on the used controller.</p>\n\n<pre><code>UserController -&gt; UserPolicy\n</code></pre>\n\n<p>Actions get defined with a question mark, even non restful routes.</p>\n\n<pre><code>def index?\n  # authorization is done inside the method.\n  # true = authorization succes\n  # false = authorization failure\nend\n</code></pre>\n\n<p>This is my solution to action based authorization hope it helps you out.</p>\n\n<p>Optimisations &amp; feedback are welcome !</p>\n"}, {"tags": [], "owner": {"reputation": 10377, "user_id": 2832282, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ZJ4WG.jpg?s=128&g=1", "display_name": "Cyril Duchon-Doris", "link": "https://stackoverflow.com/users/2832282/cyril-duchon-doris"}, "is_accepted": false, "score": 0, "last_activity_date": 1505402622, "last_edit_date": 1505402622, "creation_date": 1424824561, "answer_id": 28709097, "question_id": 28706539, "link": "https://stackoverflow.com/questions/28706539/rails-simple-access-control/28709097#28709097", "title": "Rails simple access control", "body": "<p>EDIT : Outdated answer, I have a friendlier implementation that involves using an <code>access_control</code> block</p>\n\n<p>Going with evanbikes suggestion, for now I'll be using prepend_before action. I find it quite simple &amp; flexible, but if I ever realize it's not good enough I will try other things. </p>\n\n<p>Also if you find security issues/other problems with the solution below, please comment and/or downvote. I don't like leaving bad examples in SO.</p>\n\n<pre><code>class ApplicationController &lt; ApplicationController::Base\n  include AccessControl\n  before_filter :access_denied\n  ...\n</code></pre>\n\n<p>My Access Control module</p>\n\n<pre><code>module AccessControl\n  extend ActiveSupport::Concern\n  included do\n    def access_denied(message: nil)\n        unless @authorized\n            flash.alert = 'Unauthorized access'\n            flash.info = \"Authorized entities : #{@authorized_entities.join(', '}\" if @authorized_entities\n            render 'static_pages/home', :status =&gt; :unauthorized\n            end\n        end\n\n        def allow_access_to_managers\n            (@authorized_entities ||= []) &lt;&lt; \"Project managers\"\n            @authorized = true if manager_logged_in?\n        end\n        ...\n</code></pre>\n\n<p>How I use the AC in controllers :</p>\n\n<pre><code>class ProjectController &lt; ApplicationController\n  # In reverse because `prepend_` is LIFO\n  prepend_before_action(except: [:show, :index, :new, :create]) do |c|\n    c.allow_access_to_manager(@manager.administrateur)\n  end\n  prepend_before_action :find_manager, except: [:index, :new, :create]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 10377, "user_id": 2832282, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ZJ4WG.jpg?s=128&g=1", "display_name": "Cyril Duchon-Doris", "link": "https://stackoverflow.com/users/2832282/cyril-duchon-doris"}, "edited": false, "score": 0, "creation_date": 1425513607, "post_id": 28866784, "comment_id": 45999573, "body": "Thank you for adding this answer. I like your syntax/names, it looks clean, and I&#39;ll definitely have a look at your gem to get some inspiration !"}], "tags": [], "owner": {"reputation": 73, "user_id": 3965508, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a3600225cbff4dbae9c709ce18ab2ba?s=128&d=identicon&r=PG", "display_name": "Mat&#237;as Gagliano", "link": "https://stackoverflow.com/users/3965508/mat%c3%adas-gagliano"}, "is_accepted": true, "score": 1, "last_activity_date": 1425510389, "last_edit_date": 1425510389, "creation_date": 1425510085, "answer_id": 28866784, "question_id": 28706539, "link": "https://stackoverflow.com/questions/28706539/rails-simple-access-control/28866784#28866784", "title": "Rails simple access control", "body": "<p>Rolling your own implementation isn't necessarily bad as long as you're committed to it. </p>\n\n<p>It won't get tested and maintained by the community so you must be willing to maintain it yourself in the long run, and if it compromises security you need to be really sure of what you're doing and take extra care. If you have that covered and the existing alternatives don't really fit your needs, making your own isn't such a bad idea. And generally it's an incredibly good learning experience.</p>\n\n<p>I rolled my own with <a href=\"https://github.com/matiasgagliano/action_access\" rel=\"nofollow\">ActionAccess</a> and I couldn't be happier with the results.</p>\n\n<ul>\n<li><p><strong>Locked by default</strong> aproach:</p>\n\n<pre><code>class ApplicationController &lt; ActionController::Base\n  lock_access\n\n  # ...\nend\n</code></pre></li>\n<li><p><strong>Per-action</strong> access control:</p>\n\n<pre><code>class ArticlesController &lt; ApplicationController\n  let :admins, :all\n  let :editors, [:index, :show, :edit, :update]\n  let :all, [:index, :show]\n\n  def index\n    # ...\n  end\n\n  # ...\nend\n</code></pre></li>\n<li><p>Really <strong>lighweight</strong> implementation.</p></li>\n</ul>\n\n<p>I encourage you not to use it but to check out the source code, it has a fare share of comments and should be a good source of inspiration. <a href=\"https://github.com/matiasgagliano/action_access/blob/master/lib/action_access/controller_additions.rb\" rel=\"nofollow\">ControllerAdditions</a> might be a good place to start.</p>\n\n<p>ActionAccess follows a different approach internally, but you can refactor your answer to mimic it's API with something like this:</p>\n\n<pre><code>module AccessControl\n  extend ActiveSupport::Concern\n\n  included do\n    before_filter :lock_access\n  end\n\n  module ClassMethods\n    def lock_access\n      unless @authorized\n        # Redirect user...\n      end\n    end\n\n    def allow_manager_to(actions = [])\n      prepend_before_action only: actions do\n        @authorized = true if current_user_is_a_manager?\n      end\n    end\n  end\nend\n\nclass ApplicationController &lt; ActionController::Base\n  include AccessControl  # Locked by default\n\n  # ...\nend\n\nclass ProjectController &lt; ApplicationController\n  allow_managers_to [:edit, :update]  # Per-action access control\n\n  # ...\nend\n</code></pre>\n\n<p>Take this example as pseudo-code, I haven't tested it.</p>\n\n<p>Hope this helps.</p>\n"}, {"tags": [], "owner": {"reputation": 10377, "user_id": 2832282, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ZJ4WG.jpg?s=128&g=1", "display_name": "Cyril Duchon-Doris", "link": "https://stackoverflow.com/users/2832282/cyril-duchon-doris"}, "is_accepted": false, "score": 0, "last_activity_date": 1486065801, "creation_date": 1486065801, "answer_id": 42011319, "question_id": 28706539, "link": "https://stackoverflow.com/questions/28706539/rails-simple-access-control/42011319#42011319", "title": "Rails simple access control", "body": "<p>I didn't like my previous solution using <code>prepend_before_action</code>, here is a nice implementation using ActionController callbacks</p>\n\n<pre><code>module AccessControl\n  extend ActiveSupport::Concern\n\n  class UnauthorizedException &lt; Exception\n  end\n\n  class_methods do\n    define_method :access_control do |*names, &amp;blk|\n      _insert_callbacks(names, blk) do |name, options|\n        set_callback(:access_control, :before, name, options)\n      end\n    end\n  end\n\n  included do\n\n    define_callbacks :access_control\n\n    before_action :deny_by_default\n    around_action :perform_if_access_granted\n\n    def perform_if_access_granted\n      run_callbacks :access_control do\n        if @access_denied and not @access_authorized\n          @request_authentication = true unless user_signed_in?\n          render(\n            file: File.join(Rails.root, 'app/views/errors/403.html'),\n            status: 403,\n            layout: 'error')\n        else\n          yield\n        end\n      end\n    end\n\n    def deny_by_default\n      @access_denied ||= true\n    end\n\n    def allow_access\n      @access_authorized = true\n    end\n  end\nend\n</code></pre>\n\n<p>Then you can add your own <code>allow_access_to_x</code> methods (for example in the same AccessControl concern) :</p>\n\n<pre><code>def allow_access_to_participants_of(project)\n  return unless user_signed_in?\n  allow_access if current_user.in?(project.executants)\nend\n</code></pre>\n\n<p>Use it in your controllers the following way (don't forget to include AccessControl in your <code>ApplicationController</code></p>\n\n<pre><code>class ProjectsController &lt; ApplicationController\n  access_control(only: [:show, :edit, :update]) do\n    set_project\n    allow_access_to_participants_of(@project)\n    allow_access_to_project_managers\n  end\n\n  def index; ...; end;\n  def show; ...; end;\n  def edit; ...; end;\n  def update; ...; end;\n\n  def set_project\n    @project = Project.find(params[:project_id])\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 10377, "user_id": 2832282, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ZJ4WG.jpg?s=128&g=1", "display_name": "Cyril Duchon-Doris", "link": "https://stackoverflow.com/users/2832282/cyril-duchon-doris"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2668, "favorite_count": 1, "accepted_answer_id": 28866784, "answer_count": 4, "score": 1, "last_activity_date": 1505402622, "creation_date": 1424812851, "last_edit_date": 1424828632, "question_id": 28706539, "link": "https://stackoverflow.com/questions/28706539/rails-simple-access-control", "title": "Rails simple access control", "body": "<p>I am aware that several gems are made to handle authorization in Rails. But is it really worth it to use these gems for simple access controls ?</p>\n\n<p>I only have a few \"roles\" in my application, and I feel that a powerful gem would be useless and even slow down the response time.</p>\n\n<p>I have already implemented a solution, but then I took some security classes (:p) and I realized my model was wrong (\"Allow by default, then restrict\"  instead of \"Deny by default, then allow\").</p>\n\n<p>Now how can I simply implement a \"deny by default, allow on specific cases\" ?</p>\n\n<p>Basically I'd like to put at the very top of my ApplicationController</p>\n\n<pre><code>class ApplicationController &lt; ApplicationController::Base\n  before_filter :deny_access\n</code></pre>\n\n<p>And at the very top of my other controllers :</p>\n\n<pre><code>class some_controller &lt; ApplicationController\n  before_filter :allow_access_to_[entity/user]\n</code></pre>\n\n<p>These <code>allow_access_to_</code> before_filters should do something like <code>skip_before_filter</code></p>\n\n<pre><code>def allow_access_to_[...]\n  skip_before_filter(:deny_access) if condition\nend\n</code></pre>\n\n<p>But this doesn't work, because these <code>allow_access</code> before filters are not evaluated before the <code>deny_access</code> before_filter</p>\n\n<p>Any workaround, better solution for this custom implementation of access control ?</p>\n\n<p><strong>EDIT</strong></p>\n\n<ul>\n<li>Many non-RESTful actions</li>\n<li>I need per-action access control</li>\n<li><code>undefined method 'skip_before_filter' for #&lt;MyController...</code> why ?</li>\n<li>My before_filters can get tricky</li>\n</ul>\n\n<pre class=\"lang-rb prettyprint-override\"><code>before_action :find_project, except: [:index, :new, :create]\nbefore_action(except: [:show, :index, :new, :create]) do |c|\n   c.restrict_access_to_manager(@project.manager)\nend\n</code></pre>\n"}, {"tags": ["ruby", "libgosu"], "comments": [{"owner": {"reputation": 13553, "user_id": 643500, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c66ad2afcf08e4a22f7b3cf5ca7ebc2?s=128&d=identicon&r=PG", "display_name": "Hitham S. AlQadheeb", "link": "https://stackoverflow.com/users/643500/hitham-s-alqadheeb"}, "edited": false, "score": 0, "creation_date": 1424815627, "post_id": 28706468, "comment_id": 45703916, "body": "Everything you need is in <a href=\"https://github.com/jlnr/gosu/wiki/Ruby-Tutorial\" rel=\"nofollow noreferrer\">github.com/jlnr/gosu/wiki/Ruby-Tutorial</a>"}, {"owner": {"reputation": 24966, "user_id": 2001031, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/bd4f0d39f82be9c22f6f01c80d7ad800?s=128&d=identicon&r=PG", "display_name": "Neil Slater", "link": "https://stackoverflow.com/users/2001031/neil-slater"}, "edited": false, "score": 1, "creation_date": 1424819463, "post_id": 28706468, "comment_id": 45705696, "body": "Here are the Stack Overflow rules applying to your question: <a href=\"http://stackoverflow.com/help/on-topic\">stackoverflow.com/help/on-topic</a> - item number 4 shows that it is unfortunately off-topic to ask for links to tutorials or other off-site resources. The rest of the question is too vague/broad. You can still ask questions about your project - the best questions are about specific problems you face when writing your code."}, {"owner": {"reputation": 87, "user_id": 4529330, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c72b1ebe385f6cae4a3ad94cfbef700c?s=128&d=identicon&r=PG&f=1", "display_name": "ToricTorus", "link": "https://stackoverflow.com/users/4529330/torictorus"}, "edited": false, "score": 0, "creation_date": 1424823931, "post_id": 28706468, "comment_id": 45707169, "body": "Ok, thanks for clarifying. I will keep that in mind in the future. Also thanks Hitham, i tought i could find something like that at GitHub, i just have no idea how to use GitHub... find it seriously confusing. I guess i would have to get more acquainted with it sooner or later anyways so why not now :P"}], "owner": {"reputation": 87, "user_id": 4529330, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c72b1ebe385f6cae4a3ad94cfbef700c?s=128&d=identicon&r=PG&f=1", "display_name": "ToricTorus", "link": "https://stackoverflow.com/users/4529330/torictorus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 189, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1440698034, "creation_date": 1424812640, "last_edit_date": 1440698034, "question_id": 28706468, "link": "https://stackoverflow.com/questions/28706468/making-a-dodger-game-in-ruby-using-gosu", "title": "Making a Dodger game in ruby using Gosu", "body": "<p>I'm new to programming and Id like to make a Dodger type game using the Gosu library. I don't know if this question completely adheres to Stack Overflow's rules but I haven't seen anything to the contrary.</p>\n\n<p>Currently I know how to make window pop up where you can print some text an move it around, that's where i got the idea that all i need is some obstacles the player can avoid and some mechanism to detect if my text(Ill probably just use a \"^\" or something to simulate a spaceship.) has been hit.</p>\n\n<p>I can't seem to find any tutorials or descriptions on how I should go about this, basically what I'm asking is for any helpful information on how I should go about it or where I could find a tutorial or something similar. </p>\n"}, {"tags": ["ruby", "xcode", "macos", "xcrun"], "comments": [{"owner": {"reputation": 1102, "user_id": 1710956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ba96169513e96916e3ddc6e6fc9919a?s=128&d=identicon&r=PG", "display_name": "Ryan", "link": "https://stackoverflow.com/users/1710956/ryan"}, "edited": false, "score": 1, "creation_date": 1572322080, "post_id": 28706428, "comment_id": 103514672, "body": "I love how everyone is posting steps to follow and not a single one of them has diagnosed the problem first. Don&#39;t give people a hundred and one commands to screw up their computer state by trying. Diagnose THEN treat."}, {"owner": {"reputation": 1611, "user_id": 4101056, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tKKJV.jpg?s=128&g=1", "display_name": "David Lambl", "link": "https://stackoverflow.com/users/4101056/david-lambl"}, "reply_to_user": {"reputation": 1102, "user_id": 1710956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ba96169513e96916e3ddc6e6fc9919a?s=128&d=identicon&r=PG", "display_name": "Ryan", "link": "https://stackoverflow.com/users/1710956/ryan"}, "edited": false, "score": 0, "creation_date": 1572322338, "post_id": 28706428, "comment_id": 103514709, "body": "@Ryan Please diagnose then :)"}, {"owner": {"reputation": 1102, "user_id": 1710956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ba96169513e96916e3ddc6e6fc9919a?s=128&d=identicon&r=PG", "display_name": "Ryan", "link": "https://stackoverflow.com/users/1710956/ryan"}, "edited": false, "score": 1, "creation_date": 1572322434, "post_id": 28706428, "comment_id": 103514725, "body": "It&#39;s the responsibility of the person who posts the &quot;solution&quot; to know why it works or at least post a disclaimer so anyone following their &quot;solution&quot; knows it&#39;s a big black box that can cause potential errors. At the very least, posting sources and stating the sources have a diagnosis is required."}, {"owner": {"reputation": 1611, "user_id": 4101056, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tKKJV.jpg?s=128&g=1", "display_name": "David Lambl", "link": "https://stackoverflow.com/users/4101056/david-lambl"}, "reply_to_user": {"reputation": 1102, "user_id": 1710956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ba96169513e96916e3ddc6e6fc9919a?s=128&d=identicon&r=PG", "display_name": "Ryan", "link": "https://stackoverflow.com/users/1710956/ryan"}, "edited": false, "score": 0, "creation_date": 1572322644, "post_id": 28706428, "comment_id": 103514755, "body": "@Ryan Understood, I think this is a fair point. I will happily update the answer I accepted to an answer which also includes a diagnosis of the problem. Though, I do suspect the cause of this particular issue has shifted throughout the various versions of macOS \u2014 as well as has many root causes, some more trivial than others. Nonetheless, if someone posts the environment running in with a diagnosis, and steps to repair the problem, I will update the accepted answer based on this criteria."}], "answers": [{"comments": [{"owner": {"reputation": 315, "user_id": 1408210, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/77c82572e64211345e528791803aae0a?s=128&d=identicon&r=PG", "display_name": "Charles Lillo", "link": "https://stackoverflow.com/users/1408210/charles-lillo"}, "edited": false, "score": 1, "creation_date": 1440689938, "post_id": 28710104, "comment_id": 52387720, "body": "Thank you for this! Ran into this issue after updating to the Xcode 7.0 beta"}, {"owner": {"reputation": 3962, "user_id": 279560, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/5noux.jpg?s=128&g=1", "display_name": "Mikey", "link": "https://stackoverflow.com/users/279560/mikey"}, "edited": false, "score": 0, "creation_date": 1443701056, "post_id": 28710104, "comment_id": 53603872, "body": "invalid directory here"}, {"owner": {"reputation": 668, "user_id": 1993377, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0osGn.png?s=128&g=1", "display_name": "TMKasun", "link": "https://stackoverflow.com/users/1993377/tmkasun"}, "edited": false, "score": 7, "creation_date": 1443728523, "post_id": 28710104, "comment_id": 53620447, "body": "I&#39;m also getting  <code>xcode-select: error: invalid developer directory &#39;&#47;Applications&#47;Xcode.app&#47;Contents&#47;Developer&#47;&#39;</code> Error,(I&#39;m on MAC El Capitan)"}, {"owner": {"reputation": 1611, "user_id": 4101056, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tKKJV.jpg?s=128&g=1", "display_name": "David Lambl", "link": "https://stackoverflow.com/users/4101056/david-lambl"}, "reply_to_user": {"reputation": 3962, "user_id": 279560, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/5noux.jpg?s=128&g=1", "display_name": "Mikey", "link": "https://stackoverflow.com/users/279560/mikey"}, "edited": false, "score": 0, "creation_date": 1443754254, "post_id": 28710104, "comment_id": 53628403, "body": "@mikedroid Try using &#39;xcode-select --print-path&#39; to find your path, and then replace the bit after &#39;-switch&#39; with that"}, {"owner": {"reputation": 1611, "user_id": 4101056, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tKKJV.jpg?s=128&g=1", "display_name": "David Lambl", "link": "https://stackoverflow.com/users/4101056/david-lambl"}, "reply_to_user": {"reputation": 668, "user_id": 1993377, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0osGn.png?s=128&g=1", "display_name": "TMKasun", "link": "https://stackoverflow.com/users/1993377/tmkasun"}, "edited": false, "score": 0, "creation_date": 1443754306, "post_id": 28710104, "comment_id": 53628414, "body": "@TMKasun Try using the advice I gave to mikedroid above (xcode-select --print-path)"}, {"owner": {"reputation": 23312, "user_id": 560215, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/bb365e8477053edcc55b40c3d27781d8?s=128&d=identicon&r=PG", "display_name": "sevenseacat", "link": "https://stackoverflow.com/users/560215/sevenseacat"}, "edited": false, "score": 1, "creation_date": 1443772062, "post_id": 28710104, "comment_id": 53633811, "body": "@DavidLambl didn&#39;t help. Still invalid directory."}, {"owner": {"reputation": 668, "user_id": 1993377, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0osGn.png?s=128&g=1", "display_name": "TMKasun", "link": "https://stackoverflow.com/users/1993377/tmkasun"}, "edited": false, "score": 4, "creation_date": 1443796254, "post_id": 28710104, "comment_id": 53646976, "body": "@DavidLambl  Thanks , I tried it but didn&#39;t work instead <code>xcode-select --install</code> worked for me."}, {"owner": {"reputation": 1611, "user_id": 4101056, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tKKJV.jpg?s=128&g=1", "display_name": "David Lambl", "link": "https://stackoverflow.com/users/4101056/david-lambl"}, "reply_to_user": {"reputation": 23312, "user_id": 560215, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/bb365e8477053edcc55b40c3d27781d8?s=128&d=identicon&r=PG", "display_name": "sevenseacat", "link": "https://stackoverflow.com/users/560215/sevenseacat"}, "edited": false, "score": 0, "creation_date": 1443842306, "post_id": 28710104, "comment_id": 53664501, "body": "@sevenseacat maybe try <code>xcode-select --install</code> as TMKasun and Joe pointed out?"}, {"owner": {"reputation": 4488, "user_id": 743923, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/R7FAv.jpg?s=128&g=1", "display_name": "Danut Pralea", "link": "https://stackoverflow.com/users/743923/danut-pralea"}, "edited": false, "score": 1, "creation_date": 1448461519, "post_id": 28710104, "comment_id": 55598996, "body": "I tried using <code>xcode-select --install</code> but it prompted : <code>xcode-select: error: command line tools are already installed, use &quot;Software Update&quot; to install updates</code>"}, {"owner": {"reputation": 1502, "user_id": 3281476, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/RaC33.jpg?s=128&g=1", "display_name": "Srini", "link": "https://stackoverflow.com/users/3281476/srini"}, "reply_to_user": {"reputation": 4488, "user_id": 743923, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/R7FAv.jpg?s=128&g=1", "display_name": "Danut Pralea", "link": "https://stackoverflow.com/users/743923/danut-pralea"}, "edited": false, "score": 0, "creation_date": 1459876597, "post_id": 28710104, "comment_id": 60480227, "body": "@DanutPralea - Just use <code>sudo Xcode-select -switch &#47;</code>, instead of using the developer path. I&#39;m on Capitan and this worked for me."}, {"owner": {"reputation": 657, "user_id": 4439131, "user_type": "registered", "accept_rate": 14, "profile_image": "https://i.stack.imgur.com/EFuBa.jpg?s=128&g=1", "display_name": "Nij", "link": "https://stackoverflow.com/users/4439131/nij"}, "edited": false, "score": 0, "creation_date": 1567078369, "post_id": 28710104, "comment_id": 101860570, "body": "This happens when you change path for Xcode. This solved my issue."}, {"owner": {"reputation": 646, "user_id": 3784481, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZM2aP.jpg?s=128&g=1", "display_name": "Bahman.A", "link": "https://stackoverflow.com/users/3784481/bahman-a"}, "edited": false, "score": 0, "creation_date": 1601679593, "post_id": 28710104, "comment_id": 113490622, "body": "Can someone help me please, I can&#39;t install Xcode CLT because of this error &quot;Can\u2019t install the software because it is not currently available from the Software Update server.&quot;. I&#39;ve tried all the suggested path reset approaches but didn&#39;t work. My main issue is that when I run npm install it complains about Xcode not available. I&#39;m on macOS Catalina the latest version actually updated a minute ago. Thanks!"}], "tags": [], "owner": {"reputation": 1611, "user_id": 4101056, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tKKJV.jpg?s=128&g=1", "display_name": "David Lambl", "link": "https://stackoverflow.com/users/4101056/david-lambl"}, "is_accepted": false, "score": 63, "last_activity_date": 1513919269, "last_edit_date": 1513919269, "creation_date": 1424831343, "answer_id": 28710104, "question_id": 28706428, "link": "https://stackoverflow.com/questions/28706428/invalid-active-developer-path-on-mac-os-x-after-installing-ruby/28710104#28710104", "title": "Invalid active developer path on MAC OS X after installing Ruby", "body": "<p><strong>[Update]</strong> <em>The steps below are for OS X 10.10 (Yosemite). Those experiencing this because of an upgrade to 10.11 (El Capitan) seem need to only run</em> <code>sudo xcode-select --install</code> <em>as described in the accepted answer.</em></p>\n\n<p>I found a suggestion <a href=\"https://github.com/Homebrew/homebrew/issues/23500\" rel=\"noreferrer\">here</a> which indicated</p>\n\n<p><code>sudo xcode-select -switch /</code></p>\n\n<p>as the fix. However, this threw an error that the developer path was invalid.</p>\n\n<p>Instead, for me, I modified this to</p>\n\n<p><code>sudo xcode-select -switch /Applications/Xcode.app/Contents/Developer/</code></p>\n\n<p>(which is a mixture of the two referenced link solutions) and this worked.</p>\n\n<p><strong>[Edit]</strong> </p>\n\n<p>Try using</p>\n\n<p><code>xcode-select --print-path</code></p>\n\n<p>to find your developer path if /Applications/Xcode.app/Contents/Developer/ is still invalid for you.</p>\n"}, {"tags": [], "owner": {"reputation": 563, "user_id": 248206, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/719fa96507b55b57b6c233a0500547f6?s=128&d=identicon&r=PG", "display_name": "Joe", "link": "https://stackoverflow.com/users/248206/joe"}, "is_accepted": false, "score": 6, "last_activity_date": 1443841548, "last_edit_date": 1490004264, "creation_date": 1443841548, "answer_id": 32918481, "question_id": 28706428, "link": "https://stackoverflow.com/questions/28706428/invalid-active-developer-path-on-mac-os-x-after-installing-ruby/32918481#32918481", "title": "Invalid active developer path on MAC OS X after installing Ruby", "body": "<p>For me the solution was as easy as reinstalling Xcode. </p>\n\n<p>It was pointed out here: <a href=\"https://superuser.com/a/981126\">https://superuser.com/a/981126</a></p>\n\n<p>You can (re)install Xcode via command line like the answer above suggest, or directly from the App Store. </p>\n"}, {"comments": [{"owner": {"reputation": 1522, "user_id": 1827642, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/ee14437799d96e97c2c36169d6426d5b?s=128&d=identicon&r=PG", "display_name": "ItsGeorge", "link": "https://stackoverflow.com/users/1827642/itsgeorge"}, "edited": false, "score": 3, "creation_date": 1444703899, "post_id": 33012317, "comment_id": 54002332, "body": "This worked for me after an El Capitan upgrade. Thanks."}, {"owner": {"reputation": 4488, "user_id": 743923, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/R7FAv.jpg?s=128&g=1", "display_name": "Danut Pralea", "link": "https://stackoverflow.com/users/743923/danut-pralea"}, "edited": false, "score": 14, "creation_date": 1448461458, "post_id": 33012317, "comment_id": 55598943, "body": "<code>xcode-select: error: command line tools are already installed, use &quot;Software Update&quot; to install updates</code>"}, {"owner": {"reputation": 1502, "user_id": 3281476, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/RaC33.jpg?s=128&g=1", "display_name": "Srini", "link": "https://stackoverflow.com/users/3281476/srini"}, "reply_to_user": {"reputation": 4488, "user_id": 743923, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/R7FAv.jpg?s=128&g=1", "display_name": "Danut Pralea", "link": "https://stackoverflow.com/users/743923/danut-pralea"}, "edited": false, "score": 0, "creation_date": 1459876182, "post_id": 33012317, "comment_id": 60479970, "body": "Same issue here @DanutPralea, did yours get resolved?"}, {"owner": {"reputation": 2098, "user_id": 690787, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qpnUt.jpg?s=128&g=1", "display_name": "Shuvo", "link": "https://stackoverflow.com/users/690787/shuvo"}, "edited": false, "score": 2, "creation_date": 1537958969, "post_id": 33012317, "comment_id": 91971450, "body": "For command line tools are already installed issue, this should work :   1. removing the old tools ($ rm -rf /Library/Developer/CommandLineTools) 2. install xcode command line tools again ($ xcode-select --install).  After these steps you will see a pop to install the new version of the tools."}, {"owner": {"reputation": 1885, "user_id": 948942, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/RVb6e.png?s=128&g=1", "display_name": "Incinerator", "link": "https://stackoverflow.com/users/948942/incinerator"}, "edited": false, "score": 5, "creation_date": 1538480325, "post_id": 33012317, "comment_id": 92149140, "body": "This worked for me after updating to MacOS Mojave. I didn&#39;t have to use <code>sudo</code> though."}, {"owner": {"reputation": 1508, "user_id": 2348597, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/6UyMA.png?s=128&g=1", "display_name": "Greg", "link": "https://stackoverflow.com/users/2348597/greg"}, "edited": false, "score": 0, "creation_date": 1566109738, "post_id": 33012317, "comment_id": 101548084, "body": "This solution worked for Mojave 10.14.6 with Xcode 10.2.1. Thanks."}, {"owner": {"reputation": 17566, "user_id": 901641, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/PR8Bl.png?s=128&g=1", "display_name": "ArtOfWarfare", "link": "https://stackoverflow.com/users/901641/artofwarfare"}, "edited": false, "score": 0, "creation_date": 1570557819, "post_id": 33012317, "comment_id": 102947838, "body": "Have to restart IntelliJ after running this command before it stops displaying this error."}, {"owner": {"reputation": 1102, "user_id": 1710956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ba96169513e96916e3ddc6e6fc9919a?s=128&d=identicon&r=PG", "display_name": "Ryan", "link": "https://stackoverflow.com/users/1710956/ryan"}, "edited": false, "score": 0, "creation_date": 1572322033, "post_id": 33012317, "comment_id": 103514663, "body": "I love how everyone is posting steps to follow and not a single one of them has diagnosed the problem first. Don&#39;t give people a hundred and one commands to screw up their computer state by trying. Diagnose THEN treat."}], "tags": [], "owner": {"reputation": 2098, "user_id": 690787, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qpnUt.jpg?s=128&g=1", "display_name": "Shuvo", "link": "https://stackoverflow.com/users/690787/shuvo"}, "is_accepted": true, "score": 190, "last_activity_date": 1444298985, "last_edit_date": 1444298985, "creation_date": 1444297866, "answer_id": 33012317, "question_id": 28706428, "link": "https://stackoverflow.com/questions/28706428/invalid-active-developer-path-on-mac-os-x-after-installing-ruby/33012317#33012317", "title": "Invalid active developer path on MAC OS X after installing Ruby", "body": "<p>I started getting the same error after updating to OS X El Capitan.<br>\nIn my case, all I did was to install it:</p>\n\n<pre><code>sudo xcode-select --install\n</code></pre>\n\n<p>And it works fine for me.</p>\n"}, {"tags": [], "owner": {"reputation": 184, "user_id": 5424547, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e407a71a9a2733147151628a95681fa?s=128&d=identicon&r=PG&f=1", "display_name": "suresh", "link": "https://stackoverflow.com/users/5424547/suresh"}, "is_accepted": false, "score": 5, "last_activity_date": 1444365912, "last_edit_date": 1444365912, "creation_date": 1444328590, "answer_id": 33023256, "question_id": 28706428, "link": "https://stackoverflow.com/questions/28706428/invalid-active-developer-path-on-mac-os-x-after-installing-ruby/33023256#33023256", "title": "Invalid active developer path on MAC OS X after installing Ruby", "body": "<p>I too had the same issue after upgrading to OS X EI Captian.  I just installed xcode-select using <code>sudo xcode-select --install</code></p>\n"}, {"tags": [], "owner": {"reputation": 443, "user_id": 1290309, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/b29ace9a2a3aed2642f9a8e5711c6f30?s=128&d=identicon&r=PG", "display_name": "RinW", "link": "https://stackoverflow.com/users/1290309/rinw"}, "is_accepted": false, "score": 24, "last_activity_date": 1545551311, "creation_date": 1545551311, "answer_id": 53902042, "question_id": 28706428, "link": "https://stackoverflow.com/questions/28706428/invalid-active-developer-path-on-mac-os-x-after-installing-ruby/53902042#53902042", "title": "Invalid active developer path on MAC OS X after installing Ruby", "body": "<p>I know this is quite old but I got the same issue and then I fixed it by doing couple more extra steps. Problem came when Terminal could not find the actual path of the Command Line Tools.</p>\n\n<ol>\n<li>If you had Xcode and then removed it, then Terminal is referring to\nthe Command Line Tools inside the Xcode folder. Try using this\ncommand and check what your path is, <code>xcode-select --print-path</code>. This would most likely print <code>/Applications/Xcode.app/Contents/Developer</code>.</li>\n<li>Now to fix this, reinstall the command line tools for xcode. Initially remove any previous installations using <code>sudo rm -rf /Library/Developer/CommandLineTools</code>.</li>\n<li>Then install the command line tools <code>sudo xcode-select --install</code>\nNow the final step, change the path for the CLT to the actual path using <code>sudo xcode-select -switch /Library/Developer/CommandLineTools/</code> this will fix it.</li>\n</ol>\n"}, {"comments": [{"owner": {"reputation": 91, "user_id": 10454938, "user_type": "registered", "profile_image": "https://graph.facebook.com/1926446387448326/picture?type=large", "display_name": "Noname", "link": "https://stackoverflow.com/users/10454938/noname"}, "edited": false, "score": 0, "creation_date": 1611032293, "post_id": 56963709, "comment_id": 116312909, "body": "it helped me &lt;3"}], "tags": [], "owner": {"reputation": 453, "user_id": 2477758, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/d0f1216d621d2885f9b0afb1f1197cf3?s=128&d=identicon&r=PG", "display_name": "Kumar C", "link": "https://stackoverflow.com/users/2477758/kumar-c"}, "is_accepted": false, "score": 12, "last_activity_date": 1562735120, "creation_date": 1562735120, "answer_id": 56963709, "question_id": 28706428, "link": "https://stackoverflow.com/questions/28706428/invalid-active-developer-path-on-mac-os-x-after-installing-ruby/56963709#56963709", "title": "Invalid active developer path on MAC OS X after installing Ruby", "body": "<p>I resolved the issue with the below steps.</p>\n\n<p><strong>Xcode</strong> -> <strong>Preferences</strong> -> <strong>Locations</strong> -> <strong>Command Line Tools</strong> -> <strong>Select</strong> the command tool matching your Xcode version.</p>\n"}, {"tags": [], "owner": {"reputation": 408, "user_id": 1790643, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/16b23b0344de4524a899c53b8a6464ea?s=128&d=identicon&r=PG", "display_name": "chetu", "link": "https://stackoverflow.com/users/1790643/chetu"}, "is_accepted": false, "score": 3, "last_activity_date": 1563360006, "creation_date": 1563360006, "answer_id": 57073971, "question_id": 28706428, "link": "https://stackoverflow.com/questions/28706428/invalid-active-developer-path-on-mac-os-x-after-installing-ruby/57073971#57073971", "title": "Invalid active developer path on MAC OS X after installing Ruby", "body": "<p>I had faced the same issue when i removed one of the two Xcode installed.</p>\n\n<p>I have solve this issue by Switching the path using terminal like below</p>\n\n<p>$ sudo xcode-select --switch (drag Xcode here to get a path)</p>\n\n<p>e.g sudo xcode-select --switch /Applications/Xcode\\ 10.1.app </p>\n"}, {"comments": [{"owner": {"reputation": 269, "user_id": 8590534, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15480c00888222fee3a09b7266337c62?s=128&d=identicon&r=PG&f=1", "display_name": "hmali", "link": "https://stackoverflow.com/users/8590534/hmali"}, "edited": false, "score": 1, "creation_date": 1570829319, "post_id": 57563588, "comment_id": 103052400, "body": "yeah... done with all three steps but the 4th one was missing.. 4th one did the trick for me :)"}, {"owner": {"reputation": 1102, "user_id": 1710956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ba96169513e96916e3ddc6e6fc9919a?s=128&d=identicon&r=PG", "display_name": "Ryan", "link": "https://stackoverflow.com/users/1710956/ryan"}, "edited": false, "score": 0, "creation_date": 1572322020, "post_id": 57563588, "comment_id": 103514660, "body": "I love how everyone is posting steps to follow and not a single one of them has diagnosed the problem first. Don&#39;t give people a hundred and one commands to screw up their computer state by trying. Diagnose THEN treat."}, {"owner": {"reputation": 2311, "user_id": 10326296, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-GKdQynYzQp4/AAAAAAAAAAI/AAAAAAAAeYY/SGZ5ovY-zV8/photo.jpg?sz=128", "display_name": "Anjali Kevadiya", "link": "https://stackoverflow.com/users/10326296/anjali-kevadiya"}, "edited": false, "score": 0, "creation_date": 1572356738, "post_id": 57563588, "comment_id": 103528106, "body": "It\u2019s not a trial!! I face the same problem and i tried all above answers to resolve my issue but something was missing and I didn\u2019t know what! And finally i come up with solution of my problem by my above answer and it worked perfectly for me! No one wants to waste people\u2019s time. People answer what they have faced and how they over come to this issue."}], "tags": [], "owner": {"reputation": 2311, "user_id": 10326296, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-GKdQynYzQp4/AAAAAAAAAAI/AAAAAAAAeYY/SGZ5ovY-zV8/photo.jpg?sz=128", "display_name": "Anjali Kevadiya", "link": "https://stackoverflow.com/users/10326296/anjali-kevadiya"}, "is_accepted": false, "score": 13, "last_activity_date": 1566422076, "last_edit_date": 1566422076, "creation_date": 1566246781, "answer_id": 57563588, "question_id": 28706428, "link": "https://stackoverflow.com/questions/28706428/invalid-active-developer-path-on-mac-os-x-after-installing-ruby/57563588#57563588", "title": "Invalid active developer path on MAC OS X after installing Ruby", "body": "<p>I started getting the same error after i update macOS Mojave to macOS Catalina.</p>\n\n<p>I just installed few command lines in Terminal,</p>\n\n<pre><code> 1. $ sudo gem\u00a0install cocoapods\n 2. $ sudo xcode-select --install\n 3. $ chsh -s /bin/zsh\n</code></pre>\n\n<p>Then,</p>\n\n<pre><code>Xcode -&gt; Preferences -&gt; Locations -&gt; Command Line Tools and confirm you have current Xcode version selected there.\n</code></pre>\n\n<p>And it works fine with me.\nThanks!!</p>\n"}, {"tags": [], "owner": {"reputation": 1102, "user_id": 1710956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ba96169513e96916e3ddc6e6fc9919a?s=128&d=identicon&r=PG", "display_name": "Ryan", "link": "https://stackoverflow.com/users/1710956/ryan"}, "is_accepted": false, "score": 2, "last_activity_date": 1572323318, "creation_date": 1572323318, "answer_id": 58601435, "question_id": 28706428, "link": "https://stackoverflow.com/questions/28706428/invalid-active-developer-path-on-mac-os-x-after-installing-ruby/58601435#58601435", "title": "Invalid active developer path on MAC OS X after installing Ruby", "body": "<p>Partial diagnosis: <a href=\"https://github.com/microsoft/vcpkg/issues/8781#issuecomment-547248760\" rel=\"nofollow noreferrer\">https://github.com/microsoft/vcpkg/issues/8781#issuecomment-547248760</a></p>\n\n<p>It seems that upgrading from one MacOS version to another either uninstalls some dev tools or it moves them to another path, and this breaks compatibility with any tool using the environment variable that points to the old location where the tools were located.</p>\n\n<pre><code>sudo xcode-select --install\n</code></pre>\n\n<p>Using the install command worked for me, but it is not clear whether this simply downloaded and unpacked files and then skipped installation and simply updated an environment variable or whether it physically installed the files at the expected path. (Or it could have made links to the new folder path).</p>\n\n<p>Testing my theory, I probe the folder structure with <code>ls</code> (I should have done this before using the install command):</p>\n\n<pre><code>rej@Ryans-MacBook-Air:~$ ls /Library/Developer/CommandLineTools/usr/bin/\nrej@Ryans-MacBook-Air:~$ ls -la /Library/Developer/CommandLineTools/usr/bin/\ntotal 243776\ndrwxr-xr-x  124 root  wheel   3.9K Oct 28 23:03 ./\ndrwxr-xr-x    7 root  admin   224B Oct 28 23:05 ../\nlrwxr-xr-x    1 root  wheel    64B Oct 28 23:03 2to3@ -&gt; ../../Library/Frameworks/Python3.framework/Versions/3.7/bin/2to3\nlrwxr-xr-x    1 root  wheel    68B Oct 28 23:03 2to3-3.7@ -&gt; ../../Library/Frameworks/Python3.framework/Versions/3.7/bin/2to3-3.7\n-rwxr-xr-x    1 root  wheel   116K Sep  5 22:51 DeRez*\n-rwxr-xr-x    1 root  wheel    31K Sep  5 22:51 GetFileInfo*\n-rwxr-xr-x    1 root  wheel    33K Sep  5 22:51 ResMerger*\n-rwxr-xr-x    1 root  wheel   126K Sep  5 22:51 Rez*\n-rwxr-xr-x    1 root  wheel    31K Sep  5 22:51 SetFile*\n-rwxr-xr-x    1 root  wheel    32K Sep  5 22:51 SplitForks*\n-rwxr-xr-x    1 root  wheel    41K Sep  5 22:51 ar*\n-rwxr-xr-x    1 root  wheel    40K Sep  5 22:51 as*\n-rwxr-xr-x    1 root  wheel    27K Sep  5 22:51 asa*\n-rwxr-xr-x    1 root  wheel   216K Sep  5 22:51 bison*\n-rwxr-xr-x    1 root  wheel   159K Sep  5 22:51 bitcode_strip*\nlrwxr-xr-x    1 root  wheel     5B Oct 28 23:03 c++@ -&gt; clang\n-rwxr-xr-x    1 root  admin    31K Sep  5 22:51 c89*\n-rwxr-xr-x    1 root  admin    31K Sep  5 22:51 c99*\nlrwxr-xr-x    1 root  wheel     5B Oct 28 23:03 cc@ -&gt; clang\n-rwxr-xr-x    1 root  wheel    80M Sep  5 22:51 clang*\nlrwxr-xr-x    1 root  wheel     5B Oct 28 23:03 clang++@ -&gt; clang\n-rwxr-xr-x    1 root  wheel   125K Sep  5 22:51 cmpdylib*\n-rwxr-xr-x    1 root  wheel   154K Sep  5 22:51 codesign_allocate*\nlrwxr-xr-x    1 root  wheel    17B Oct 28 23:03 codesign_allocate-p@ -&gt; codesign_allocate\n-rwxr-xr-x    1 root  admin   3.3K Aug 16 06:55 cpp*\n-rwxr-xr-x    1 root  wheel    36K Sep  5 22:51 ctags*\n-rwxr-xr-x    1 root  wheel   150K Sep  5 22:51 ctf_insert*\n-rwxr-xr-x    1 root  wheel    30M Sep  5 22:51 dsymutil*\nlrwxr-xr-x    1 root  wheel    14B Oct 28 23:03 dwarfdump@ -&gt; llvm-dwarfdump\n-rwxr-xr-x    1 root  wheel   477K Sep  5 22:51 dwarfdump-classic*\n-rwxr-xr-x    1 root  wheel   211K Sep  5 22:51 dyldinfo*\n-rwxr-xr-x    1 root  wheel   239B Sep  5 19:18 easy_install-3.7*\n-rwxr-xr-x    1 root  wheel   572K Sep  5 22:51 flex*\n-rwxr-xr-x    1 root  wheel   572K Sep  5 22:51 flex++*\nlrwxr-xr-x    1 root  wheel     3B Oct 28 23:03 g++@ -&gt; gcc\n-rwxr-xr-x    1 root  wheel   101K Aug 16 07:31 gatherheaderdoc*\n-rwxr-xr-x    1 root  admin    27K Sep  5 22:51 gcc*\nlrwxr-xr-x    1 root  wheel     8B Oct 28 23:03 gcov@ -&gt; llvm-cov\n-rwxr-xr-x    1 root  wheel   2.4M Sep  5 22:51 git*\nlrwxr-xr-x    1 root  wheel     3B Oct 28 23:03 git-receive-pack@ -&gt; git\n-rwxr-xr-x    1 root  wheel   1.4M Sep  5 22:51 git-shell*\nlrwxr-xr-x    1 root  wheel     3B Oct 28 23:03 git-upload-archive@ -&gt; git\nlrwxr-xr-x    1 root  wheel     3B Oct 28 23:03 git-upload-pack@ -&gt; git\n-rwxr-xr-x    1 root  wheel   148K Sep  5 22:51 gm4*\n-rwxr-xr-x    1 root  wheel   166K Sep  5 22:51 gnumake*\n-rwxr-xr-x    1 root  wheel    98K Sep  5 22:51 gperf*\n-rwxr-xr-x    1 root  wheel    33K Sep  5 22:51 hdxml2manxml*\n-rwxr-xr-x    1 root  wheel   158K Aug 16 07:31 headerdoc2html*\n-rwxr-xr-x    1 root  wheel    73K Sep  5 22:51 indent*\n-rwxr-xr-x    1 root  wheel   142K Sep  5 22:51 install_name_tool*\n-rwxr-xr-x    1 root  wheel   2.5M Sep  5 22:51 ld*\n-rwxr-xr-x    1 root  wheel   230B Aug 16 07:13 lex*\n-rwxr-xr-x    1 root  wheel   163K Sep  5 22:51 libtool*\n-rwxr-xr-x    1 root  wheel    73K Sep  5 22:51 lipo*\n-rwxr-xr-x    1 root  wheel   332K Sep  5 22:51 lldb*\n-rwxr-xr-x    1 root  wheel   3.6M Sep  5 22:51 llvm-cov*\n-rwxr-xr-x    1 root  wheel   7.9M Sep  5 22:51 llvm-dwarfdump*\n-rwxr-xr-x    1 root  wheel   9.8M Sep  5 22:51 llvm-nm*\n-rwxr-xr-x    1 root  wheel    11M Sep  5 22:51 llvm-objdump*\n-rwxr-xr-x    1 root  wheel    40K Sep  5 22:51 llvm-otool*\n-rwxr-xr-x    1 root  wheel   1.6M Sep  5 22:51 llvm-profdata*\n-rwxr-xr-x    1 root  wheel   2.9M Sep  5 22:51 llvm-size*\n-rwxr-xr-x    1 root  wheel   3.5K Aug 16 07:19 lorder*\n-rwxr-xr-x    1 root  wheel   148K Sep  5 22:51 m4*\n-rwxr-xr-x    1 root  wheel   166K Sep  5 22:51 make*\n-rwxr-xr-x    1 root  wheel   7.7K Aug 16 07:16 mig*\nlrwxr-xr-x    1 root  wheel     7B Oct 28 23:03 nm@ -&gt; llvm-nm\n-rwxr-xr-x    1 root  wheel   142K Sep  5 22:51 nm-classic*\n-rwxr-xr-x    1 root  wheel   171K Sep  5 22:51 nmedit*\nlrwxr-xr-x    1 root  wheel    12B Oct 28 23:03 objdump@ -&gt; llvm-objdump\nlrwxr-xr-x    1 root  wheel    10B Oct 28 23:03 otool@ -&gt; llvm-otool\n-rwxr-xr-x    1 root  wheel   644K Sep  5 22:51 otool-classic*\n-rwxr-xr-x    1 root  wheel   138K Sep  5 22:51 pagestuff*\n-rwxr-xr-x    1 root  wheel   221B Sep  5 19:18 pip3*\n-rwxr-xr-x    1 root  wheel   221B Sep  5 19:18 pip3.7*\n-rwxr-xr-x    1 root  wheel    32K Sep  5 22:51 projectInfo*\nlrwxr-xr-x    1 root  wheel    66B Oct 28 23:03 pydoc3@ -&gt; ../../Library/Frameworks/Python3.framework/Versions/3.7/bin/pydoc3\nlrwxr-xr-x    1 root  wheel    68B Oct 28 23:03 pydoc3.7@ -&gt; ../../Library/Frameworks/Python3.framework/Versions/3.7/bin/pydoc3.7\nlrwxr-xr-x    1 root  wheel    67B Oct 28 23:03 python3@ -&gt; ../../Library/Frameworks/Python3.framework/Versions/3.7/bin/python3\nlrwxr-xr-x    1 root  wheel    74B Oct 28 23:03 python3-config@ -&gt; ../../Library/Frameworks/Python3.framework/Versions/3.7/bin/python3-config\nlrwxr-xr-x    1 root  wheel    69B Oct 28 23:03 python3.7@ -&gt; ../../Library/Frameworks/Python3.framework/Versions/3.7/bin/python3.7\nlrwxr-xr-x    1 root  wheel    76B Oct 28 23:03 python3.7-config@ -&gt; ../../Library/Frameworks/Python3.framework/Versions/3.7/bin/python3.7-config\nlrwxr-xr-x    1 root  wheel    70B Oct 28 23:03 python3.7m@ -&gt; ../../Library/Frameworks/Python3.framework/Versions/3.7/bin/python3.7m\nlrwxr-xr-x    1 root  wheel    77B Oct 28 23:03 python3.7m-config@ -&gt; ../../Library/Frameworks/Python3.framework/Versions/3.7/bin/python3.7m-config\nlrwxr-xr-x    1 root  wheel    66B Oct 28 23:03 pyvenv@ -&gt; ../../Library/Frameworks/Python3.framework/Versions/3.7/bin/pyvenv\nlrwxr-xr-x    1 root  wheel    70B Oct 28 23:03 pyvenv-3.7@ -&gt; ../../Library/Frameworks/Python3.framework/Versions/3.7/bin/pyvenv-3.7\nlrwxr-xr-x    1 root  wheel     7B Oct 28 23:03 ranlib@ -&gt; libtool\n-rwxr-xr-x    1 root  wheel    70K Sep  5 22:51 resolveLinks*\n-rwxr-xr-x    1 root  wheel    85K Sep  5 22:51 rpcgen*\n-rwxr-xr-x    1 root  wheel    56K Sep  5 22:51 segedit*\nlrwxr-xr-x    1 root  wheel    12B Oct 28 23:03 size@ -&gt; size-classic\n-rwxr-xr-x    1 root  wheel   125K Sep  5 22:51 size-classic*\n-rwxr-xr-x    1 root  admin   138K Sep  5 22:51 stapler*\n-rwxr-xr-x    1 root  wheel   126K Sep  5 22:51 strings*\n-rwxr-xr-x    1 root  wheel   179K Sep  5 22:51 strip*\n-rwxr-xr-x    1 root  wheel   330K Sep  5 22:51 svn*\n-rwxr-xr-x    1 root  wheel   118K Sep  5 22:51 svnadmin*\n-rwxr-xr-x    1 root  wheel   105K Sep  5 22:51 svnbench*\n-rwxr-xr-x    1 root  wheel    64K Sep  5 22:51 svndumpfilter*\n-rwxr-xr-x    1 root  wheel    71K Sep  5 22:51 svnfsfs*\n-rwxr-xr-x    1 root  wheel    98K Sep  5 22:51 svnlook*\n-rwxr-xr-x    1 root  wheel    70K Sep  5 22:51 svnmucc*\n-rwxr-xr-x    1 root  wheel    89K Sep  5 22:51 svnrdump*\n-rwxr-xr-x    1 root  wheel   122K Sep  5 22:51 svnserve*\n-rwxr-xr-x    1 root  wheel    90K Sep  5 22:51 svnsync*\n-rwxr-xr-x    1 root  wheel    44K Sep  5 22:51 svnversion*\n-rwxr-xr-x    1 root  wheel    90M Sep  5 22:51 swift*\nlrwxr-xr-x    1 root  wheel     5B Oct 28 23:03 swift-autolink-extract@ -&gt; swift\n-rwxr-xr-x    1 root  admin   6.1M Sep  5 22:51 swift-build*\n-rwxr-xr-x    1 root  admin   734K Sep  5 22:51 swift-build-tool*\n-rwxr-xr-x    1 root  wheel   687K Sep  5 22:51 swift-demangle*\nlrwxr-xr-x    1 root  wheel     5B Oct 28 23:03 swift-format@ -&gt; swift\n-rwxr-xr-x    1 root  admin   6.1M Sep  5 22:51 swift-package*\n-rwxr-xr-x    1 root  admin   6.1M Sep  5 22:51 swift-run*\n-rwxr-xr-x    1 root  wheel    61K Sep  5 22:51 swift-stdlib-tool*\n-rwxr-xr-x    1 root  admin   6.1M Sep  5 22:51 swift-test*\nlrwxr-xr-x    1 root  wheel     5B Oct 28 23:03 swiftc@ -&gt; swift\n-rwxr-xr-x    1 root  wheel    12M Sep  5 22:51 tapi*\n-rwxr-xr-x    1 root  wheel    41K Sep  5 22:51 unifdef*\n-rwxr-xr-x    1 root  wheel   2.9K Aug 16 07:19 unifdefall*\n-rwxr-xr-x    1 root  wheel    63K Sep  5 22:51 unwinddump*\n-rwxr-xr-x    1 root  wheel    49K Sep  5 22:51 vtool*\n-rwxr-xr-x    1 root  wheel    45K Sep  5 22:51 xml2man*\n-rwxr-xr-x    1 root  wheel   135B Aug 16 07:22 yacc*\n</code></pre>\n\n<p>It is apparent that the files are physically located at that folder location and the installer installed missing components. The fact that MacOS's upgrade process uninstalls my development environment is unfriendly and Apple should be reprimanded.</p>\n"}, {"comments": [{"owner": {"reputation": 1508, "user_id": 1425178, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/748J4.jpg?s=128&g=1", "display_name": "Tripti Kumar", "link": "https://stackoverflow.com/users/1425178/tripti-kumar"}, "edited": false, "score": 0, "creation_date": 1576303824, "post_id": 59189377, "comment_id": 104864240, "body": "Worked well for MacOS Catalina v 10.15.1"}], "tags": [], "owner": {"reputation": 198, "user_id": 1109065, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/49b8f0969fef9e859da59ac70c0732b3?s=128&d=identicon&r=PG", "display_name": "MichaelWang", "link": "https://stackoverflow.com/users/1109065/michaelwang"}, "is_accepted": false, "score": 4, "last_activity_date": 1575526960, "creation_date": 1575526960, "answer_id": 59189377, "question_id": 28706428, "link": "https://stackoverflow.com/questions/28706428/invalid-active-developer-path-on-mac-os-x-after-installing-ruby/59189377#59189377", "title": "Invalid active developer path on MAC OS X after installing Ruby", "body": "<p><code>sudo xcode-select -switch /</code> works for me.</p>\n"}, {"tags": [], "owner": {"reputation": 2692, "user_id": 1998987, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/377caef66a87322939732e01254e599c?s=128&d=identicon&r=PG", "display_name": "Sandeep M", "link": "https://stackoverflow.com/users/1998987/sandeep-m"}, "is_accepted": false, "score": 2, "last_activity_date": 1578327317, "creation_date": 1578327317, "answer_id": 59615428, "question_id": 28706428, "link": "https://stackoverflow.com/questions/28706428/invalid-active-developer-path-on-mac-os-x-after-installing-ruby/59615428#59615428", "title": "Invalid active developer path on MAC OS X after installing Ruby", "body": "<p>I got a similar error running Homebrew for the first time after upgrading from macOS Mojave v10.14 to Catalina v10.15.</p>\n\n<p>It's never a good idea to run commands without understanding what's wrong with your installation of Homebrew and what the commands actually do. Your first and best option is to run <code>brew doctor</code>. This command will not only tell you if something is wrong but also how to fix the problem. In my case it showed:</p>\n\n<pre><code>Warning: Your Xcode is configured with an invalid path.\nYou should change it to the correct path:\n  sudo xcode-select -switch /Applications/Xcode.app\n</code></pre>\n\n<p>Once you fix the problem(s), run <code>brew doctor</code> again. Basically, repeat the process until you get the all clear message. </p>\n\n<p>In some cases, you get something like:</p>\n\n<pre><code>Unbrewed dylibs/header files/static libraries were found in /usr/local/....\n</code></pre>\n\n<p>This will happen if you've installed software outside Homebrew that also use the same location to store their files. In many cases, it's safe to ignore these warnings.</p>\n"}], "owner": {"reputation": 1611, "user_id": 4101056, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tKKJV.jpg?s=128&g=1", "display_name": "David Lambl", "link": "https://stackoverflow.com/users/4101056/david-lambl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42890, "favorite_count": 14, "accepted_answer_id": 33012317, "answer_count": 11, "score": 87, "last_activity_date": 1578327317, "creation_date": 1424812527, "last_edit_date": 1566526775, "question_id": 28706428, "link": "https://stackoverflow.com/questions/28706428/invalid-active-developer-path-on-mac-os-x-after-installing-ruby", "title": "Invalid active developer path on MAC OS X after installing Ruby", "body": "<p>I get this error:</p>\n\n<p><code>xcrun: error: invalid active developer path (/Applications/Xcode.app), missing xcrun at: /Applications/Xcode.app/usr/bin/xcrun</code></p>\n\n<p>This <a href=\"https://stackoverflow.com/questions/14334708/xcrun-cant-find-xcode-path\">solution</a> works, but the error occurs again after closing my terminal and reopening it; I then have to run the same commands every time I open a new terminal window.</p>\n\n<p>How can I apply these changes such that they will save after closing the terminal window out?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "authentication"], "comments": [{"owner": {"reputation": 2395, "user_id": 1626261, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/v6cN0.jpg?s=128&g=1", "display_name": "Sonalkumar sute", "link": "https://stackoverflow.com/users/1626261/sonalkumar-sute"}, "edited": false, "score": 0, "creation_date": 1424812631, "post_id": 28706358, "comment_id": 45702360, "body": "can you also check that <code>@book</code> is also present, and write <code>if @book &amp;&amp; @book.authenticate(params[:password]</code>"}, {"owner": {"reputation": 2395, "user_id": 1626261, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/v6cN0.jpg?s=128&g=1", "display_name": "Sonalkumar sute", "link": "https://stackoverflow.com/users/1626261/sonalkumar-sute"}, "edited": false, "score": 0, "creation_date": 1424812705, "post_id": 28706358, "comment_id": 45702402, "body": "are you getting value from <code>params[:slug]</code>"}, {"owner": {"reputation": 719, "user_id": 1462711, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/57ddc608def5767805e6b13dd20c4e1f?s=128&d=identicon&r=PG", "display_name": "infinity", "link": "https://stackoverflow.com/users/1462711/infinity"}, "reply_to_user": {"reputation": 2395, "user_id": 1626261, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/v6cN0.jpg?s=128&g=1", "display_name": "Sonalkumar sute", "link": "https://stackoverflow.com/users/1626261/sonalkumar-sute"}, "edited": false, "score": 0, "creation_date": 1424812779, "post_id": 28706358, "comment_id": 45702444, "body": "@Sontya, Yea, I get the value from params[:slug]"}, {"owner": {"reputation": 719, "user_id": 1462711, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/57ddc608def5767805e6b13dd20c4e1f?s=128&d=identicon&r=PG", "display_name": "infinity", "link": "https://stackoverflow.com/users/1462711/infinity"}, "reply_to_user": {"reputation": 2395, "user_id": 1626261, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/v6cN0.jpg?s=128&g=1", "display_name": "Sonalkumar sute", "link": "https://stackoverflow.com/users/1626261/sonalkumar-sute"}, "edited": false, "score": 0, "creation_date": 1424812830, "post_id": 28706358, "comment_id": 45702467, "body": "@book is definitely present as well, I just checked"}, {"owner": {"reputation": 2395, "user_id": 1626261, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/v6cN0.jpg?s=128&g=1", "display_name": "Sonalkumar sute", "link": "https://stackoverflow.com/users/1626261/sonalkumar-sute"}, "edited": false, "score": 0, "creation_date": 1424812927, "post_id": 28706358, "comment_id": 45702513, "body": "form_for is saying<code>login_book_path</code> and your method name is <code>book_login</code> so how it is working? you have defined <code>as:</code> in routes?"}, {"owner": {"reputation": 719, "user_id": 1462711, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/57ddc608def5767805e6b13dd20c4e1f?s=128&d=identicon&r=PG", "display_name": "infinity", "link": "https://stackoverflow.com/users/1462711/infinity"}, "reply_to_user": {"reputation": 2395, "user_id": 1626261, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/v6cN0.jpg?s=128&g=1", "display_name": "Sonalkumar sute", "link": "https://stackoverflow.com/users/1626261/sonalkumar-sute"}, "edited": false, "score": 0, "creation_date": 1424813055, "post_id": 28706358, "comment_id": 45702590, "body": "@Sontya, yes I have <code>as: </code> in my routes.rb, I also just posted the terminal output in my question to help more"}, {"owner": {"reputation": 2395, "user_id": 1626261, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/v6cN0.jpg?s=128&g=1", "display_name": "Sonalkumar sute", "link": "https://stackoverflow.com/users/1626261/sonalkumar-sute"}, "edited": false, "score": 0, "creation_date": 1424813642, "post_id": 28706358, "comment_id": 45702880, "body": "are you using rails 4.1 and above"}, {"owner": {"reputation": 2395, "user_id": 1626261, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/v6cN0.jpg?s=128&g=1", "display_name": "Sonalkumar sute", "link": "https://stackoverflow.com/users/1626261/sonalkumar-sute"}, "edited": false, "score": 0, "creation_date": 1424813854, "post_id": 28706358, "comment_id": 45703003, "body": "if yes, have you permitted password field <code>params.require(:book).permit(:password, :password_confirmation)</code>"}], "owner": {"reputation": 719, "user_id": 1462711, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/57ddc608def5767805e6b13dd20c4e1f?s=128&d=identicon&r=PG", "display_name": "infinity", "link": "https://stackoverflow.com/users/1462711/infinity"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 28, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1424813014, "creation_date": 1424812330, "last_edit_date": 1424813014, "question_id": 28706358, "link": "https://stackoverflow.com/questions/28706358/authenticate-model-issue", "title": "Authenticate model issue", "body": "<p>I have a rails 4 app where I want to have certain books require a secret password to see.</p>\n\n<p>I have a model called Book.rb:</p>\n\n<pre><code>class Book &lt; ActiveRecord::Base\n   has_secure_password :validations =&gt; false\nend\n</code></pre>\n\n<p>and a sign_in.html.haml that has the form:</p>\n\n<pre><code>= form_for login_book_path do |f| \n   = f.password_field :password\n   = f.submit \"View Book\"\n</code></pre>\n\n<p>and the login book path routes to the following controller method:</p>\n\n<pre><code>def book_login\n  @book = Book.find_by(slug: params[:slug])\n  respond_to do |format|\n     if @book.authenticate(params[:password])\n        format.html { redirect_to root_path }\n     else\n        format.html { render :sign_in }\n     end\n  end\nend\n</code></pre>\n\n<p>If I hardcode the password (like <code>@book.authenticate(\"thesecretpassword\")</code>, it correctly redirects me to the root_url. But for some reason, without hardcoding it doesn't work (just sends me back to sign_in.html.haml?</p>\n\n<p>Here's the output in the terminal when I hit the \"VIEW BOOK\" button:</p>\n\n<pre><code>Started POST \"/the-wizard-book/sign_in\" for 127.0.0.1 at 2015-02-24 14:04:48   -0700\nProcessing by BooksController#book_login as HTML\nParameters: {\"utf8\"=&gt;\"\u2713\", \"authenticity_token\"=&gt;\"Nx2OkI/FjJwq6zmcT5KLSkQpr9hYa83RL7CFmLQW0/g=\", \"/the-wizard-book/sign_in\"=&gt;{\"password\"=&gt;\"[FILTERED]\"}, \"commit\"=&gt;\"View Book\", \"slug\"=&gt;\"the-wizard-book\"}\nLoad (0.2ms)  SELECT  \"books\".* FROM \"books\"  WHERE \"books\".\"slug\" = 'the-wizard-book' LIMIT 1\n</code></pre>\n"}]