[{"tags": ["ruby", "class", "module", "monkeypatching"], "comments": [{"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 2, "creation_date": 1570674582, "post_id": 58313623, "comment_id": 102989791, "body": "That error message is 100% unrelated to any of the code you posted. At no point in your code do you define nor call a method named <code>include?</code>, so the code you posted <i>cannot possibly</i> have anything to do with your problem."}, {"owner": {"reputation": 1028, "user_id": 1524189, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/597e7c8adf75343dc2ccc1c52024d4ce?s=128&d=identicon&r=PG", "display_name": "Sean", "link": "https://stackoverflow.com/users/1524189/sean"}, "reply_to_user": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1570719936, "post_id": 58313623, "comment_id": 103010389, "body": "ok...  Calling MyAPI::Client.get_company throws this error with no stacktrace. You are suggesting that include? cannot possibly be used by ruby when you call &quot;include MonkeyPatchCompanies&quot; in a module?"}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1570722648, "post_id": 58313623, "comment_id": 103011909, "body": "First off, if you had a problem with the <code>include</code> method, the error message would be talking about the <code>include</code> method instead of the <code>include?</code> method. Secondly, if you call a method without an explicit receiver, then the implicit receiver is <code>self</code>, which inside the module is the module itself. However, the receiver in the error message is <code>nil</code>. The only way this can happen is if you have a call somewhere that looks like <code>foo.include?</code>, where <code>foo</code> is an expression that evaluates to <code>nil</code>. Since you don&#39;t have that in your code, the error message is not caused by the code."}, {"owner": {"reputation": 1028, "user_id": 1524189, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/597e7c8adf75343dc2ccc1c52024d4ce?s=128&d=identicon&r=PG", "display_name": "Sean", "link": "https://stackoverflow.com/users/1524189/sean"}, "reply_to_user": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1570723095, "post_id": 58313623, "comment_id": 103012138, "body": "Thanks for replying. I guess the point was instead of focusing on the error I was receiving (which may or may not have anything to do with my new code), I was simply looking for an answer to this question: &quot;What is the best way to monkey patch something like this?&quot;"}], "answers": [{"tags": [], "owner": {"reputation": 1028, "user_id": 1524189, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/597e7c8adf75343dc2ccc1c52024d4ce?s=128&d=identicon&r=PG", "display_name": "Sean", "link": "https://stackoverflow.com/users/1524189/sean"}, "is_accepted": true, "score": 0, "last_activity_date": 1570723416, "creation_date": 1570723416, "answer_id": 58326995, "question_id": 58313623, "link": "https://stackoverflow.com/questions/58313623/how-to-monkey-patch-class-included-module/58326995#58326995", "title": "How to monkey patch class included module?", "body": "<p>I was able to solve this by first aliasing the the original method, then by calling the aliased original in my overridden method.</p>\n\n<pre><code>module_eval do\nalias_method :get_company_old, :get_company\ndefine_method :get_company do |*args|\n  # My new code here\n  send :get_company_old, *args\nend\n</code></pre>\n\n<p>The problem is that super in this context does not work. This solved the issue for me.</p>\n"}], "owner": {"reputation": 1028, "user_id": 1524189, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/597e7c8adf75343dc2ccc1c52024d4ce?s=128&d=identicon&r=PG", "display_name": "Sean", "link": "https://stackoverflow.com/users/1524189/sean"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 123, "favorite_count": 0, "accepted_answer_id": 58326995, "answer_count": 1, "score": -1, "last_activity_date": 1570723416, "creation_date": 1570665018, "last_edit_date": 1570723029, "question_id": 58313623, "link": "https://stackoverflow.com/questions/58313623/how-to-monkey-patch-class-included-module", "title": "How to monkey patch class included module?", "body": "<p>I've got a gem with a class that dynamically includes modules. I need to override all methods in those modules to insert some additional logic (for metrics tracking)</p>\n\n<p>Example class:</p>\n\n<pre><code>module MyAPI\n  class Client\n    # This dynamically requires a bunch of modules  \n    Dir[File.dirname(__FILE__) + '/client/*.rb'].each do |file|\n      require file\n      include const_get(File.basename(file).gsub('.rb','').split('_').map(&amp;:capitalize).join('').to_s)\n    end\n  end\nend\n</code></pre>\n\n<p>One of these modules might look like this:</p>\n\n<pre><code>module MyAPI\n  class Client\n    module Companies\n\n      def get_company(company_id, params = {})\n        puts \"original method\"\n      end\n\n    end\n  end\nend\n</code></pre>\n\n<p>I need to monkey patch this in my application. I have added a new file /config/initializers/monkey_patches/my_api.rb</p>\n\n<pre><code>module MyAPI\n  class Client\n    module MonkeyPatchCompanies\n      def get_company(company_id, params = {})\n        puts 'Monkey Patched'\n        super\n      end\n    end\n    module Companies\n      include MonkeyPatchCompanies\n    end\n  end\nend\n</code></pre>\n\n<p>I have tried all sorts of things like the above to add some functionality  to all of the methods in the included modules.</p>\n\n<p>Nothing I have tried has been successful. I get something like:</p>\n\n<pre><code>NoMethodError (undefined method `include?' for nil:NilClass)\n</code></pre>\n\n<p>What is the best way to monkey patch something like this?</p>\n\n<p>EDIT:</p>\n\n<p>I was able to solve this by first aliasing the the original method, then by calling the aliased original in my overridden method.</p>\n\n<pre><code>module_eval do\nalias_method :get_company_old, :get_company\ndefine_method :get_company do |*args|\n  # My new code here\n  send :get_company_old, *args\nend\n</code></pre>\n\n<p>The problem is that <code>super</code> in this context does not work. This solved the issue for me. </p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"tags": [], "owner": {"reputation": 853, "user_id": 1273175, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2925a203d2d5c7ac208881d06b90791d?s=128&d=identicon&r=PG", "display_name": "JamesSwift", "link": "https://stackoverflow.com/users/1273175/jamesswift"}, "is_accepted": false, "score": -1, "last_activity_date": 1570666592, "creation_date": 1570666592, "answer_id": 58313804, "question_id": 58313536, "link": "https://stackoverflow.com/questions/58313536/creating-comments-in-post-are-not-being-save-in-the-actual-post/58313804#58313804", "title": "Creating comments in post are not being save in the actual post", "body": "<p>If you want to associate it with a <code>Post</code> when you hit <code>POST /comments</code>, then you need to whitelist <code>post_id</code> in the <code>comment_params</code> method. Otherwise, it will be stripped out of your request.</p>\n"}, {"comments": [{"owner": {"reputation": 292, "user_id": 12132097, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gtb2S.jpg?s=128&g=1", "display_name": "Joaqu&#237;n", "link": "https://stackoverflow.com/users/12132097/joaqu%c3%adn"}, "edited": false, "score": 0, "creation_date": 1570727293, "post_id": 58315275, "comment_id": 103014083, "body": "i have to define <code>post_id</code> in the post table or rails take the one created by default?"}, {"owner": {"reputation": 292, "user_id": 12132097, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gtb2S.jpg?s=128&g=1", "display_name": "Joaqu&#237;n", "link": "https://stackoverflow.com/users/12132097/joaqu%c3%adn"}, "edited": false, "score": 0, "creation_date": 1570727498, "post_id": 58315275, "comment_id": 103014177, "body": "I was also reading yesterday and yes, I realize that my relationships between comments and posts are poorly established, so it is supposed to be one_to_many instead of has_many"}], "tags": [], "owner": {"reputation": 2345, "user_id": 4988918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/x1BRI.png?s=128&g=1", "display_name": "Mark Merritt", "link": "https://stackoverflow.com/users/4988918/mark-merritt"}, "is_accepted": false, "score": 1, "last_activity_date": 1570680892, "last_edit_date": 1570680892, "creation_date": 1570680001, "answer_id": 58315275, "question_id": 58313536, "link": "https://stackoverflow.com/questions/58313536/creating-comments-in-post-are-not-being-save-in-the-actual-post/58315275#58315275", "title": "Creating comments in post are not being save in the actual post", "body": "<p>There seems to be an issue with your data model. You setup a <code>many-to-many</code> relationship between <code>Course</code> and <code>Comment</code>...but, logically, it should be a <code>one-to-many</code> relationship. A comment can only belong to one course (I'm assuming?), so I don't see a purpose for your <code>CourseComment</code> model. </p>\n\n<p>The reason you can associate a comment with a post in your console is because you are doing it explicitly. You need to do the same thing in your controller. </p>\n\n<p>The way you do this will depend on how your routes are setup. If you have comments nested under posts in your routes file and are passing in the post, then you can grab the post and create the association with something like this...</p>\n\n<pre><code>@comment = Comment.new(comment_params)\n@comment.post = Post.find(params[:post_id]\n</code></pre>\n\n<p>If your routes are not nested then you will need to manually pass the <code>post_id</code> in as a param. </p>\n"}], "owner": {"reputation": 292, "user_id": 12132097, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gtb2S.jpg?s=128&g=1", "display_name": "Joaqu&#237;n", "link": "https://stackoverflow.com/users/12132097/joaqu%c3%adn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1570680892, "creation_date": 1570664158, "question_id": 58313536, "link": "https://stackoverflow.com/questions/58313536/creating-comments-in-post-are-not-being-save-in-the-actual-post", "title": "Creating comments in post are not being save in the actual post", "body": "<p>In my code i created a Post and in the post are comments, i created the associations with has_many and belongs to but i can only connect the creating of a comment in a post via rails consolo and if i try to create a new commment in my post the comment doesnt get saved in the post but i can see the created comment in my comments/index</p>\n\n<p>i tried filling my create method in post with the association but i couldnt make it work</p>\n\n<p>this is my comment controller:</p>\n\n<pre><code>  before_action :set_comment, only: [:show, :edit, :update, :destroy]\n\n  # GET /comments\n  # GET /comments.json\n  def index\n    @comments = Comment.all\n  end\n\n  # GET /comments/1\n  # GET /comments/1.json\n  def show\n  end\n\n  # GET /comments/new\n  def new\n    @comment = Comment.new\n  end\n\n  # GET /comments/1/edit\n  def edit\n  end\n\n  # POST /comments\n  # POST /comments.json\n  def create\n    #@Course.comment = Course.find(params[:post_id]) &lt;--what are tryed\n    @comment = Comment.new(comment_params)\n    respond_to do |format|\n      if @comment.save\n        format.html { redirect_to @comment, notice: 'Comment was successfully created.' }\n        format.json { render :show, status: :created, location: @comment }\n      else\n        format.html { render :new }\n        format.json { render json: @comment.errors, status: :unprocessable_entity }\n      end\n    end\n  end\n\n  # PATCH/PUT /comments/1\n  # PATCH/PUT /comments/1.json\n  def update\n    respond_to do |format|\n      if @comment.update(comment_params)\n        format.html { redirect_to @comment, notice: 'Comment was successfully updated.' }\n        format.json { render :show, status: :ok, location: @comment }\n      else\n        format.html { render :edit }\n        format.json { render json: @comment.errors, status: :unprocessable_entity }\n      end\n    end\n  end\n\n  # DELETE /comments/1\n  # DELETE /comments/1.json\n  def destroy\n    @comment.destroy\n    respond_to do |format|\n      format.html { redirect_to comments_url, notice: 'Comment was successfully destroyed.' }\n      format.json { head :no_content }\n    end\n  end\n\n  private\n    # Use callbacks to share common setup or constraints between actions.\n    def set_comment\n      @comment = Comment.find(params[:id])\n    end\n\n    # Never trust parameters from the scary internet, only allow the white list through.\n    def comment_params\n      params.require(:comment).permit(:title, :body)\n    end\nend\n</code></pre>\n\n<p>and this are my associations</p>\n\n<p>Post:</p>\n\n<pre><code>class Course &lt; ApplicationRecord\n    validates :user_courses, presence: true\n    has_many :student_courses\n    has_many :students, through: :student_courses\n\n    has_many :course_comments\n    has_many :comments, through: :course_comments\n\n    has_many :teacher_courses\n    has_many :teacher, through: :teacher_courses\nend\n\n</code></pre>\n\n<p>Comment:</p>\n\n<pre><code>class Comment &lt; ApplicationRecord\n    has_many :course_comments\n    has_many :courses, through: :course_comments\nend\n\n</code></pre>\n\n<p>CourseComment:</p>\n\n<pre><code>class CourseComment &lt; ApplicationRecord\n  belongs_to :course\n  belongs_to :comment\nend\n\n</code></pre>\n\n<p>what is supposed to happend is, i enter to Course(post) and the i click in new comment the loads the form_for and i create the post and get redirect to the actual post no to the comments/index so pls i need some advice for what can i do or if im missing something</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "stack-trace"], "answers": [{"tags": [], "owner": {"reputation": 4690, "user_id": 1937435, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YyN37.jpg?s=128&g=1", "display_name": "Josh Brody", "link": "https://stackoverflow.com/users/1937435/josh-brody"}, "is_accepted": false, "score": 1, "last_activity_date": 1570670618, "creation_date": 1570670618, "answer_id": 58314189, "question_id": 58313520, "link": "https://stackoverflow.com/questions/58313520/how-can-i-get-rails-to-give-me-more-details-on-an-error-its-not-logging/58314189#58314189", "title": "How can I get Rails to give me more details on an error it&#39;s not logging?", "body": "<p>Drop this in an initializer (proc.rb):</p>\n\n<pre><code>class Proc\n  def start_with?(*args)\n    puts caller  \n  end \nend \n</code></pre>\n"}], "owner": {"reputation": 5552, "user_id": 3160466, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/4aINw.png?s=128&g=1", "display_name": "ArtOfCode", "link": "https://stackoverflow.com/users/3160466/artofcode"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1570670618, "creation_date": 1570663974, "question_id": 58313520, "link": "https://stackoverflow.com/questions/58313520/how-can-i-get-rails-to-give-me-more-details-on-an-error-its-not-logging", "title": "How can I get Rails to give me more details on an error it&#39;s not logging?", "body": "<p>This has been stumping me: Rails is throwing this error, <em>after</em> it's finished rendering my views, but <em>before</em> it gets back to the browser:</p>\n\n<pre><code>ActionView::Template::Error (undefined method `start_with?' for #&lt;Proc:0x00005651bfe017f0&gt;)\n</code></pre>\n\n<p>And... that's it. There's no stack trace. I get shown the standard 500 \"We're sorry, but something went wrong\" page, despite having <code>config.consider_all_requests_local = true</code> set. There are no further details either in the terminal or in <code>log/development.log</code>.</p>\n\n<p>I can't find any Procs that it might be complaining about, nor can I find any calls to <code>start_with?</code> that might be the cause; I've gone back through Git history and isolated the issue to one commit (<a href=\"https://github.com/Charcoal-SE/metasmoke/commit/2edeb7d1112f44787a5eb441b0405ea3abf16343\" rel=\"nofollow noreferrer\">this one</a>, if you want to take a look in detail), but nothing within that commit jumps out as being obvious.</p>\n\n<p>Calling a <code>render layout: false</code> <em>does</em> work, as does simplifying my <code>layouts/application.js</code> down to just a <code>&lt;%= yield %&gt;</code>, which makes me think it might be something in there, however - I made no changes to it <em>or any views at all</em> in the commit in which the issue appeared.</p>\n\n<p>What I'd really like to know is how I can get Rails to give me the stack trace for this error, so I can figure out where it's coming from. If you have any ideas where the bug itself might be, those are more than welcome too.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "sidekiq", "software-design", "rails-activejob"], "answers": [{"comments": [{"owner": {"reputation": 742, "user_id": 1507066, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/2aa876aa0d2187ccd991e64b8008a0bc?s=128&d=identicon&r=PG", "display_name": "achempion", "link": "https://stackoverflow.com/users/1507066/achempion"}, "edited": false, "score": 0, "creation_date": 1570691721, "post_id": 58315851, "comment_id": 102994616, "body": "I can see it as <code>around_perform</code> usage makes code easier to read because we can separate re-queueing logic and execution."}, {"owner": {"reputation": 742, "user_id": 1507066, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/2aa876aa0d2187ccd991e64b8008a0bc?s=128&d=identicon&r=PG", "display_name": "achempion", "link": "https://stackoverflow.com/users/1507066/achempion"}, "edited": false, "score": 0, "creation_date": 1570725881, "post_id": 58315851, "comment_id": 103013492, "body": "the question was about the most elegant way though :)"}], "tags": [], "owner": {"reputation": 1444, "user_id": 1495113, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/85c7b0e2e64b7513b337ec1572bf9dda?s=128&d=identicon&r=PG", "display_name": "Dr.Strangelove", "link": "https://stackoverflow.com/users/1495113/dr-strangelove"}, "is_accepted": false, "score": 0, "last_activity_date": 1570684526, "creation_date": 1570684526, "answer_id": 58315851, "question_id": 58313299, "link": "https://stackoverflow.com/questions/58313299/what-is-the-best-way-to-re-queue-job-in-rails-with-delay/58315851#58315851", "title": "What is the best way to re-queue job in Rails with delay?", "body": "<pre><code>def perform\n  # will return number of processed items\n  processed_items_count = ProcessingService.handle_next_batch\n  delay_for_next_job = processed_items_count.zero? ? 10 : 0\n  next_job = self.class.set(wait: delay_for_next_job.seconds)\n  next_job.perform_later\nend\n</code></pre>\n\n<p>You can extract delay_for_next_job as private method, etc, apply refactoring as needed.</p>\n\n<p>Why to use <code>around_perform</code>? You don't need job instance here.\nDepending on your needs, you can also check if any jobs are currently pending using something like <a href=\"https://github.com/mhenrixon/sidekiq-unique-jobs\" rel=\"nofollow noreferrer\">https://github.com/mhenrixon/sidekiq-unique-jobs</a> (sorry, I'm not really familiar with ActiveJob API)</p>\n"}], "owner": {"reputation": 742, "user_id": 1507066, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/2aa876aa0d2187ccd991e64b8008a0bc?s=128&d=identicon&r=PG", "display_name": "achempion", "link": "https://stackoverflow.com/users/1507066/achempion"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 415, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1570684526, "creation_date": 1570661718, "question_id": 58313299, "link": "https://stackoverflow.com/questions/58313299/what-is-the-best-way-to-re-queue-job-in-rails-with-delay", "title": "What is the best way to re-queue job in Rails with delay?", "body": "<p>I want to re-queue the job automatically after it's done. There will be optional delay for 10 seconds if nothing was processed.</p>\n\n<p>I can see two approaches. The first one is to put the logic inside <code>perform</code> block. The second is to use <code>around_block</code> feature to do that. </p>\n\n<p>What is the more elegant way to do that?</p>\n\n<p>Here is an example of code block with such logic</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code># Process queue automatically\nclass ProcessingJob &lt; ApplicationJob\n  queue_as :processing_queue\n\n  around_perform do |_job, block|\n    if block.call.zero?\n      # wait for 10 seconds if 0 items was handled\n      self.class.set(wait: 10.seconds).perform_later\n    else\n      # don't rest, there are many work to do\n      self.class.perform_later\n    end\n  end\n\n  def perform\n    # will return number of processed items\n    ProcessingService.handle_next_batch\n  end\nend\n</code></pre>\n\n<p>Should I put <code>around_block</code> logic into the <code>perform</code> function?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "state-machine"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1570658492, "post_id": 58312339, "comment_id": 102986685, "body": "Do you mean all of these to be values like <code>&#39;successful&#39;</code> or <code>:successful</code> instead of variables? I&#39;d guess <code>case state</code> would do the job which returns a string. Never underestimate things like <code>Rails.logger.info(state.titleize)</code>"}, {"owner": {"reputation": 12694, "user_id": 1174001, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/b27f05489e2cebe5948277c2ca561a93?s=128&d=identicon&r=PG", "display_name": "CDub", "link": "https://stackoverflow.com/users/1174001/cdub"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1570723943, "post_id": 58312339, "comment_id": 103012548, "body": "I do, but the state I&#39;m transitioning <i>to</i>, not the state that I&#39;m currently <i>in</i>. I&#39;ll update the question to reflect the string of state."}], "answers": [{"tags": [], "owner": {"reputation": 742, "user_id": 1507066, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/2aa876aa0d2187ccd991e64b8008a0bc?s=128&d=identicon&r=PG", "display_name": "achempion", "link": "https://stackoverflow.com/users/1507066/achempion"}, "is_accepted": true, "score": 2, "last_activity_date": 1571008054, "creation_date": 1571008054, "answer_id": 58368475, "question_id": 58312339, "link": "https://stackoverflow.com/questions/58312339/state-machines-state-machine-next-state-in-transitions/58368475#58368475", "title": "state-machines/state_machine - Next state in transitions", "body": "<p>You can accept an argument on your <code>before_transition</code> callback and obtain all data you need to implement an expected behaviour.</p>\n\n<p>The code which passes the argument you can find at <a href=\"https://github.com/state-machines/state_machines/blob/e60fe9600b53d94484c7a3431aad994fc6a1e9d3/lib/state_machines/callback.rb#L200-L218\" rel=\"nofollow noreferrer\">the source code of the library</a>. You can implement this logic with <code>around_transition</code> as well.</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>require 'state_machines'\n\nclass Light\n\n  state_machine :state, initial: :off do\n\n    before_transition from: any, do: :log_me\n\n    event :light do\n      transition all =&gt; :on\n    end\n\n    event :dark do\n      transition [:on] =&gt; :off\n    end\n\n  end\n\n  def log_me(transition)\n    case transition.event\n    when :light\n      p \"`light` event was called to transition from #{transition.from} to #{transition.to}\"\n    when :dark\n      p \"`dark` event was called to transition from #{transition.from} to #{transition.to}\"\n    else\n      p \"`#{transition.event}` was called to transition from #{transition.from} to #{transition.to}\"\n    end\n  end\nend\n\na = Light.new\n\na.light # =&gt; \"`light` event was called to transition from off to on\"\na.dark # =&gt; \"`dark` event was called to transition from on to off\"\n</code></pre>\n"}], "owner": {"reputation": 12694, "user_id": 1174001, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/b27f05489e2cebe5948277c2ca561a93?s=128&d=identicon&r=PG", "display_name": "CDub", "link": "https://stackoverflow.com/users/1174001/cdub"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 161, "favorite_count": 0, "accepted_answer_id": 58368475, "answer_count": 1, "score": 3, "last_activity_date": 1571008054, "creation_date": 1570655302, "last_edit_date": 1570723970, "question_id": 58312339, "link": "https://stackoverflow.com/questions/58312339/state-machines-state-machine-next-state-in-transitions", "title": "state-machines/state_machine - Next state in transitions", "body": "<p>I'm using <a href=\"https://github.com/state-machines/state_machines\" rel=\"nofollow noreferrer\">https://github.com/state-machines/state_machines</a> for Rails for storing and doing work before and after a state change of an object.</p>\n\n<p>What I'd like to do is have a single method which can be called in a <code>before_transition</code> for a given set of <code>events</code>, and for a given <code>event</code>, have the method called by the <code>before_transition</code> do something a bit differently.</p>\n\n<p>For example, say the method is called <code>log_state_change</code>, something like:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>def log_state_change\n  case &lt;???&gt;\n  when \"successful\"\n    Rails.logger.info \"Successful\"\n  when \"failure\"\n    Rails.logger.info \"Failure\"\n  when \"starting_run\"\n    Rails.logger.info \"Starting run\" \n  else\n    Rails.logger.error \"Unknown\"\nend\n</code></pre>\n\n<p>I can find no methods that would fit for <code>&lt;???&gt;</code> above. Perhaps someone more familiar with this gem could assist please?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1570656951, "post_id": 58312059, "comment_id": 102986254, "body": "What Postgres version are you using?"}, {"owner": {"reputation": 2070, "user_id": 3412674, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/d828b5882e2d091c90cc5fe840c5aa2b?s=128&d=identicon&r=PG", "display_name": "JLF", "link": "https://stackoverflow.com/users/3412674/jlf"}, "reply_to_user": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1570659314, "post_id": 58312059, "comment_id": 102986887, "body": "@SebastianPalma v9.6.3 locally. is there a v11/12 feature that could solve this?"}], "answers": [{"tags": [], "owner": {"reputation": 146, "user_id": 1290568, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/331e74b102499c24e93528c7b693b6df?s=128&d=identicon&r=PG", "display_name": "DanBrooker", "link": "https://stackoverflow.com/users/1290568/danbrooker"}, "is_accepted": false, "score": 1, "last_activity_date": 1570665665, "creation_date": 1570665665, "answer_id": 58313695, "question_id": 58312059, "link": "https://stackoverflow.com/questions/58312059/ensure-uniqueness-of-a-nested-value-in-jsonb-in-rails-activerecord-without-self/58313695#58313695", "title": "Ensure uniqueness of a nested value in JSONB in Rails ActiveRecord without self.class.exists?", "body": "<p>There's special operators for use with json(b) (<a href=\"https://www.postgresql.org/docs/9.5/functions-json.html\" rel=\"nofollow noreferrer\">Postgres Docs</a>)</p>\n\n<p>The <code>-&gt;&gt;</code> will access a jsonb element as a string, ie. <code>config-&gt;&gt;api_key</code> instead of <code>config.api_key</code></p>\n\n<p>You should be able to do this <code>self.class.exists?('config-&gt;&gt;api_key = ?', api_key)</code></p>\n"}], "owner": {"reputation": 2070, "user_id": 3412674, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/d828b5882e2d091c90cc5fe840c5aa2b?s=128&d=identicon&r=PG", "display_name": "JLF", "link": "https://stackoverflow.com/users/3412674/jlf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1570665665, "creation_date": 1570654028, "question_id": 58312059, "link": "https://stackoverflow.com/questions/58312059/ensure-uniqueness-of-a-nested-value-in-jsonb-in-rails-activerecord-without-self", "title": "Ensure uniqueness of a nested value in JSONB in Rails ActiveRecord without self.class.exists?", "body": "<p>Normally, we could use <code>self.class.exists?(api_key: api_key)</code> to check if any other row in the table has a value before we save:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>def set_api_key\n  self.api_key ||= loop do\n    api_key = SecureRandom.hex(24)\n    break api_key unless self.class.exists?(api_key: api_key)\n  end\nend\n</code></pre>\n\n<p>But in this example, <code>api_key</code> is actually a value on a JSONB column called <code>config</code>:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>class User &lt; ApplicationRecord\n  before_validation :set_api_key, on: [:create]\n  validates :api_key, presence: true, uniqueness: true\n\n  store_accessor :config, :status, :plan, :api_key\n\n  def set_api_key\n    self.api_key ||= loop do\n      api_key = SecureRandom.hex(24)\n      break api_key unless self.class.exists?(api_key: api_key)\n    end\n  end\nend\n</code></pre>\n\n<p>Assume <code>:status</code>, <code>:plan</code>, <code>:api_key</code> are all top-level attributes of a JSONB column called <code>config</code>.</p>\n\n<p>This results in: <code>ActiveRecord::StatementInvalid: PG::UndefinedColumn: ERROR:  column users.api_key does not exist</code></p>\n\n<p>Is there a slick Rails-way of achieving this in a similar way that <code>self.class.exists?(key: value)</code> works? Is there a low-cost SQL query to use instead?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1570661676, "post_id": 58311709, "comment_id": 102987428, "body": "You&#39;ll need to show a bit more code for context. <code>helper_method</code> is used in controllers to make methods available inside views. It&#39;s not supposed to be used in views directly. What do you mean &quot;HTML file&quot;? Do you mean an HTML view?"}], "answers": [{"tags": [], "owner": {"reputation": 26, "user_id": 5054100, "user_type": "registered", "profile_image": "https://graph.facebook.com/10204655637856181/picture?type=large", "display_name": "Jhonatan Teixeira", "link": "https://stackoverflow.com/users/5054100/jhonatan-teixeira"}, "is_accepted": true, "score": 0, "last_activity_date": 1570653150, "creation_date": 1570653150, "answer_id": 58311871, "question_id": 58311709, "link": "https://stackoverflow.com/questions/58311709/how-to-use-a-rails-helper-in-a-pdf-template-inside-services-layer/58311871#58311871", "title": "How to use a rails helper in a PDF template inside services layer?", "body": "<p>You can make your module methods work as they were class methods by using </p>\n\n<blockquote>\n  <p>module_function :method</p>\n</blockquote>\n\n<p>The code looks like this:</p>\n\n<pre><code>module Helper\n  def helper_method; end\n\n  module_function :helper_method\nend\n</code></pre>\n\n<p>Then in your html.erb you do this:</p>\n\n<pre><code>&lt;% Helper.helper_method %&gt;\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 9169280, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbdaba57a30b0ec246bce426f1073be?s=128&d=identicon&r=PG&f=1", "display_name": "Carlos Henrique Montalione", "link": "https://stackoverflow.com/users/9169280/carlos-henrique-montalione"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 98, "favorite_count": 0, "accepted_answer_id": 58311871, "answer_count": 1, "score": 0, "last_activity_date": 1570653150, "creation_date": 1570652441, "question_id": 58311709, "link": "https://stackoverflow.com/questions/58311709/how-to-use-a-rails-helper-in-a-pdf-template-inside-services-layer", "title": "How to use a rails helper in a PDF template inside services layer?", "body": "<p>I have a PDF template and I need to use a view helper method inside a HTML file that is in the services folder to generate the PDF. However, when I try to use the default view helpers, I get an exception that the method doesn't exist.</p>\n\n<pre><code>ActionView::Template::Error: undefined method `helper_method' for #&lt;#&lt;Class:0x000000000e309bd0&gt;:0x000000000e3a0350&gt;\n</code></pre>\n\n<p>How can I make this work?</p>\n"}, {"tags": ["ruby", "data-structures", "graph", "tree"], "comments": [{"owner": {"reputation": 5580, "user_id": 490454, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/RqygM.jpg?s=128&g=1", "display_name": "BobRodes", "link": "https://stackoverflow.com/users/490454/bobrodes"}, "edited": false, "score": 1, "creation_date": 1570655282, "post_id": 58311369, "comment_id": 102985706, "body": "What&#39;s wrong with using <a href=\"https://ruby-doc.org/core-2.6.5/Struct.html\" rel=\"nofollow noreferrer\">Struct</a>?"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1570659018, "post_id": 58311369, "comment_id": 102986812, "body": "It&#39;s an interesting question but it would be much improved if you included an example together with a series of questions you&#39;d like answered that pertain to the example. On reflection, I think such an example is essential."}, {"owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "edited": false, "score": 0, "creation_date": 1570661429, "post_id": 58311369, "comment_id": 102987390, "body": "What happens when <code>add_child(&#39;Tina&#39;, &#39;bob&#39;)</code> and there are two Tina&#39;s? Or doesn&#39;t that scenario present itself?"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1570661831, "post_id": 58311369, "comment_id": 102987453, "body": "If you&#39;re doing naive trees than any structure will do, but in the real world things get so complicated you&#39;ll need a cyclic graph structure."}, {"owner": {"reputation": 171, "user_id": 7264802, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/9619647177653103cccb62e579a2cadc?s=128&d=identicon&r=PG&f=1", "display_name": "Praneetha", "link": "https://stackoverflow.com/users/7264802/praneetha"}, "reply_to_user": {"reputation": 5580, "user_id": 490454, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/RqygM.jpg?s=128&g=1", "display_name": "BobRodes", "link": "https://stackoverflow.com/users/490454/bobrodes"}, "edited": false, "score": 0, "creation_date": 1570715177, "post_id": 58311369, "comment_id": 103007441, "body": "@BobRodes I haven&#39;t used structs anytime.. will explore it."}, {"owner": {"reputation": 171, "user_id": 7264802, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/9619647177653103cccb62e579a2cadc?s=128&d=identicon&r=PG&f=1", "display_name": "Praneetha", "link": "https://stackoverflow.com/users/7264802/praneetha"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1570716027, "post_id": 58311369, "comment_id": 103008014, "body": "@CarySwoveland I wanted to do only 2 operations on the data and those 2 examples I have mentioned in the question.  To be more clear, I have 3 different  generations data and I want to represent them in a data structure so that I could perform 2 operations  <code>add_child</code> and <code>get_relationship</code> on that data and get results.  Please let me know if my question is still unclear and needs more examples."}, {"owner": {"reputation": 171, "user_id": 7264802, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/9619647177653103cccb62e579a2cadc?s=128&d=identicon&r=PG&f=1", "display_name": "Praneetha", "link": "https://stackoverflow.com/users/7264802/praneetha"}, "reply_to_user": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "edited": false, "score": 0, "creation_date": 1570716072, "post_id": 58311369, "comment_id": 103008037, "body": "@3limin4t0r I dont have that scenario now. Right now only trying to present with as simple data as possible"}, {"owner": {"reputation": 171, "user_id": 7264802, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/9619647177653103cccb62e579a2cadc?s=128&d=identicon&r=PG&f=1", "display_name": "Praneetha", "link": "https://stackoverflow.com/users/7264802/praneetha"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1570716134, "post_id": 58311369, "comment_id": 103008059, "body": "@tadman I have explored graphs but couldn&#39;t understand how I can traverse through them to get parents, siblings relationship"}, {"owner": {"reputation": 121669, "user_id": 56778, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/34b152ef95a49568ce45df38cd87e54b?s=128&d=identicon&r=PG", "display_name": "Jim Mischel", "link": "https://stackoverflow.com/users/56778/jim-mischel"}, "edited": false, "score": 1, "creation_date": 1570740433, "post_id": 58311369, "comment_id": 103019547, "body": "Possibly helpful: <a href=\"https://stackoverflow.com/questions/56519345/modeling-family-relationships-using-a-graph/56537069#56537069\" title=\"modeling family relationships using a graph\">stackoverflow.com/questions/56519345/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 171, "user_id": 7264802, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/9619647177653103cccb62e579a2cadc?s=128&d=identicon&r=PG&f=1", "display_name": "Praneetha", "link": "https://stackoverflow.com/users/7264802/praneetha"}, "is_accepted": false, "score": 0, "last_activity_date": 1570721431, "last_edit_date": 1570721431, "creation_date": 1570720546, "answer_id": 58326180, "question_id": 58311369, "link": "https://stackoverflow.com/questions/58311369/which-data-structure-to-use-to-implement-family-tree-in-ruby/58326180#58326180", "title": "Which data structure to use to implement family tree in ruby?", "body": "<p>I could figure out a way to get minimum relations using <code>RubyTree</code> itself. RubyTree has inbuilt methods like parent, siblings, children etc and also we can pass content to the nodes. \nSo I used these to get what I want. For example for creating a spouse I created a child node to the root node and passed a hash like <code>{relation: spouse}</code> in the content. In this way I am able to apply logic by putting conditions on this hash and get the relations that I want</p>\n\n<p>example:</p>\n\n<pre><code>tina = Tree::TreeNode.new('Tina', {gender: 'female', relation: 'root'})\nmike = tina &lt;&lt; Tree::TreeNode.new('Mike', {gender: 'male', relation: 'spouse'}) \nsofi = tina &lt;&lt; Tree::TreeNode.new('sofi', {gender: 'female', relation: 'child'})\n...... #add all children and their children like this\n\nputs \"--------siblings of sofi--------\"\nsiblings_of_sofi.each do |sib|\n    if sib.content[:relation] == 'child'\n        puts sib.name\n    end\nend\n\n# assume tina has 4 sons and one of them is bob and alice is daughter of bob. \nputs \"--------alice paternal uncles--------\"\nputs alice.parent.name\nputs alice.parent.content\nif alice.parent.content[:relation] == 'spouse'\n    father = alice.parent.parent #as per the question child should be added through mother only, therefore alice is added as a child to bob's wife and bob's wife is added as a child to bob as {relation: spouse}\n    uncles = father.siblings\n    uncles.each do |uncle|\n        puts uncle.name if uncle.content[:gender] == 'male' &amp;&amp; uncle.content[:relation] == 'child'\n    end\n\nend\n</code></pre>\n"}], "owner": {"reputation": 171, "user_id": 7264802, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/9619647177653103cccb62e579a2cadc?s=128&d=identicon&r=PG&f=1", "display_name": "Praneetha", "link": "https://stackoverflow.com/users/7264802/praneetha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 195, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1570721431, "creation_date": 1570650849, "question_id": 58311369, "link": "https://stackoverflow.com/questions/58311369/which-data-structure-to-use-to-implement-family-tree-in-ruby", "title": "Which data structure to use to implement family tree in ruby?", "body": "<p>I am trying to create a simple family tree in ruby where I could add children through the mother nodes. Also when I give a name and a relation as input I should be able to get the output as names of people related to the given person name. \nFor example, I should be able to do operations like\n<code>add_child('Tina', 'bob') // which will add bob as a child node to Tina</code>\n<code>get_relation(bob, maternal_uncles) // which should output all the siblings of Tina in this case.</code></p>\n\n<p>Which data structure is best to implement this and how to implement it in ruby? In my research I found graph is good approach and I was researching on its implementation since 2 days but could not find any solution.</p>\n\n<p>I tried the following libraries</p>\n\n<p><code>RubyTree</code>  <a href=\"https://github.com/evolve75/RubyTree\" rel=\"nofollow noreferrer\">https://github.com/evolve75/RubyTree</a> - This helped me to get parents, siblings, grandparents relations but I could not think of how I can use this to get relations like father's brothers(paternal uncle), wife's sisters(sister in law) etc</p>\n\n<p><code>weighted graph</code> <a href=\"https://github.com/msayson/weighted_graph\" rel=\"nofollow noreferrer\">https://github.com/msayson/weighted_graph</a> - I used 0 to represent spouse and 1 to represent children. I could not go anywhere from here. I got confused on how to even get parents and children of a given person.</p>\n\n<p>I explored a little bit about <code>ruby prefix trees</code> and <code>rgl gem</code> but I could not apply them to my application. </p>\n\n<p>Please help. Thanks in advance!</p>\n"}, {"tags": ["ruby", "text", "tk"], "answers": [{"tags": [], "owner": {"reputation": 1626, "user_id": 1136063, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a8d63377824449cc8627aae609579f50?s=128&d=identicon&r=PG", "display_name": "MarkDBlackwell", "link": "https://stackoverflow.com/users/1136063/markdblackwell"}, "is_accepted": false, "score": 0, "last_activity_date": 1571954659, "creation_date": 1571954659, "answer_id": 58549699, "question_id": 58311211, "link": "https://stackoverflow.com/questions/58311211/uncertain-on-how-to-get-text-from-the-tk-entry-or-text-widgets-in-ruby/58549699#58549699", "title": "Uncertain on how to get text from the tk entry or text widgets in ruby", "body": "<p>For me, the following code (tweaked from your example) perpetually updates the TkLabel with the value in the TkEntry:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>require 'tk'\n\nclass Gui\n    root = TkRoot.new {title \"Gui Test\"}\n    root['geometry'] = '500x500'\n\n    $user_input = TkVariable.new\n\n    label = TkLabel.new(root) do\n        textvariable $user_input\n        pack(\"padx\" =&gt; \"15\", \"pady\" =&gt; \"15\")\n    end\n\n    $user_input.value = \"Label\"\n\n    button = TkButton.new(root) do\n        text \"Button\"\n        pack(\"padx\" =&gt; \"15\", \"pady\" =&gt; \"15\")\n        command (proc {})\n    end\n    check_button = TkCheckButton.new(root) do\n        text \"Check Mate\"\n        pack(\"padx\" =&gt; \"15\", \"pady\" =&gt; \"15\")\n    end\n\n    e = Tk::Tile::Entry.new(root) {textvariable $user_input}\n    e.pack()\nend\n\nGui.new\nTk.mainloop\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 10168164, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7331eec0304728b0977a72a7b762d07e?s=128&d=identicon&r=PG&f=1", "display_name": "SkaterCoderGamerDon", "link": "https://stackoverflow.com/users/10168164/skatercodergamerdon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 42, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1571954659, "creation_date": 1570650136, "last_edit_date": 1570651626, "question_id": 58311211, "link": "https://stackoverflow.com/questions/58311211/uncertain-on-how-to-get-text-from-the-tk-entry-or-text-widgets-in-ruby", "title": "Uncertain on how to get text from the tk entry or text widgets in ruby", "body": "<p>What I am trying to accomplish is to retrieve the entry string from the TkEntry widget and use that string to change the TkLabel textvariable to:</p>\n\n<pre><code>require 'tk'\n\nclass Gui\n\n    def procc\n        label['textvariable'] = $user_input\n    end\n\n    root = TkRoot.new {title \"Gui Test\"}\n    root['geometry'] = '500x500'\n\n    label = TkLabel.new(root) do\n        textvariable\n        pack(\"padx\" =&gt; \"15\", \"pady\" =&gt; \"15\")\n    end\n\n    label['textvariable'] = \"Label\"\n\n    button = TkButton.new(root) do\n        text \"Button\"\n        pack(\"padx\" =&gt; \"15\", \"pady\" =&gt; \"15\")\n        command (proc {procc})\n    end\n    check_button = TkCheckButton.new(root) do\n        text \"Check Mate\"\n        pack(\"padx\" =&gt; \"15\", \"pady\" =&gt; \"15\")\n    end\n\n\n\n    $user_input = TkVariable.new\n\n    e = Tk::Tile::Entry.new(root) {textvariable = $user_input}\n    e.pack()\n\nend\n\nGui.new\nTk.mainloop\n</code></pre>\n"}, {"tags": ["ruby", "selenium", "testing", "web-applications", "automation"], "comments": [{"owner": {"reputation": 793, "user_id": 2377469, "user_type": "registered", "accept_rate": 23, "profile_image": "https://i.stack.imgur.com/bXhBW.jpg?s=128&g=1", "display_name": "stacktome", "link": "https://stackoverflow.com/users/2377469/stacktome"}, "edited": false, "score": 0, "creation_date": 1570649675, "post_id": 58310841, "comment_id": 102983546, "body": "Search for a Text and until the Text you look found retry(loop) the action.  If the Text found exit from the loop. share your work around that help us to answer your question."}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 8511969, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c83ee7722d06e7715575c3849b568c9?s=128&d=identicon&r=PG&f=1", "display_name": "SGh", "link": "https://stackoverflow.com/users/8511969/sgh"}, "edited": false, "score": 1, "creation_date": 1570696242, "post_id": 58311613, "comment_id": 102996760, "body": "Thank you so much. This has definitely helped me go in the right direction!"}], "tags": [], "owner": {"reputation": 5497, "user_id": 11019743, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/R8NmK.png?s=128&g=1", "display_name": "Christine", "link": "https://stackoverflow.com/users/11019743/christine"}, "is_accepted": true, "score": 0, "last_activity_date": 1570652294, "last_edit_date": 1570652294, "creation_date": 1570651992, "answer_id": 58311613, "question_id": 58310841, "link": "https://stackoverflow.com/questions/58310841/loop-for-ruby-selenium-web-testing/58311613#58311613", "title": "Loop for Ruby | Selenium | Web Testing", "body": "<p>You can set up a <code>while</code> loop that breaks once a WebElement meeting certain criteria has been located.</p>\n\n<pre><code># Keep track of whether or not invoice has been found\nfound = false\n\n# First, attempt to locate the desired invoice\nbegin\n    # click the search button\n    driver.find_element(:name, \"search_button\").click\n\n    # check if invoice exists, set found to true if it does\n    expect(driver.find_element(some_locator_here).displayed?).to eql true\n    found = true\n\nrescue Selenium::WebDriver::Error::NoSuchElementError\n    # catch NoSuchElementError if invoice does not exist, leave found as false\n    puts(\"Element not found\")\n\n# if invoice is not found, continue trying to find it in a loop\nwhile found == false do\n    begin\n        # click the search button\n        driver.find_element(:name, \"search_button\").click\n\n        # attempt to locate the invoice\n        expect(driver.find_element(some_locator_here).displayed?).to eql true\n        found = true\n\n    rescue Selenium::WebDriver::Error::NoSuchElementError\n        puts(\"Element not found\")\n\n</code></pre>\n\n<p>This will click the search button and attempt to locate the desired invoice in a loop, then catch the <code>NoSuchElementError</code> if the desired invoice does not exist. You will need to replace <code>some_locator_here</code> with something like <code>:name, \"invoice_name\"</code> so that you can locate your invoice and determine whether or not it has been found. Hope this helps a bit.</p>\n"}], "owner": {"reputation": 23, "user_id": 8511969, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c83ee7722d06e7715575c3849b568c9?s=128&d=identicon&r=PG&f=1", "display_name": "SGh", "link": "https://stackoverflow.com/users/8511969/sgh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 145, "favorite_count": 0, "accepted_answer_id": 58311613, "answer_count": 1, "score": 0, "last_activity_date": 1570652294, "creation_date": 1570648541, "question_id": 58310841, "link": "https://stackoverflow.com/questions/58310841/loop-for-ruby-selenium-web-testing", "title": "Loop for Ruby | Selenium | Web Testing", "body": "<p>I'm trying to write some ruby to perform the following:</p>\n\n<p>I'm testing a web page which has a form, a search button, and a search results underneath.</p>\n\n<p>When I enter an invoice number into the form e.g. 123456 and I click the \"Search\" button, if the Invoice has been successfully saved , then it will show up under the  \"Search Results\" section, and if not, then it will say \"No results found\". Sometimes it takes a few seconds for the database to  finish processing an invoice so I would like to make a loop that keeps pressing the search button every few seconds until the invoice is found, and once the condition is met, then do something else.</p>\n"}, {"tags": ["ruby", "parsing", "grammar", "treetop"], "comments": [{"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1570657668, "post_id": 58310638, "comment_id": 102986463, "body": "Try this one: <a href=\"https://medium.com/@gvanrossum_83706/left-recursive-peg-grammars-65dab3c580e1\" rel=\"nofollow noreferrer\">medium.com/@gvanrossum_83706/&hellip;</a>"}, {"owner": {"reputation": 2278, "user_id": 1772828, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b7831a9963c2207377c46468f6e797a?s=128&d=identicon&r=PG", "display_name": "cliffordheath", "link": "https://stackoverflow.com/users/1772828/cliffordheath"}, "edited": false, "score": 0, "creation_date": 1570745733, "post_id": 58310638, "comment_id": 103021504, "body": "The treetop examples contain an arithmetic grammar, see my example at <a href=\"https://github.com/cjheath/treetop/blob/master/examples/lambda_calculus/arithmetic.treetop\" rel=\"nofollow noreferrer\">github.com/cjheath/treetop/blob/master/examples/lambda_calcu&zwnj;&#8203;lus/&hellip;</a>"}, {"owner": {"reputation": 8960, "user_id": 262125, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/32b070e2e9b6be90f31bb4a154acb91c?s=128&d=identicon&r=PG", "display_name": "LandonSchropp", "link": "https://stackoverflow.com/users/262125/landonschropp"}, "reply_to_user": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1570753082, "post_id": 58310638, "comment_id": 103022795, "body": "@rici Thanks for the link! That helps illustrate the problem, and I think I see some ways that could be applied in this particular case."}, {"owner": {"reputation": 8960, "user_id": 262125, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/32b070e2e9b6be90f31bb4a154acb91c?s=128&d=identicon&r=PG", "display_name": "LandonSchropp", "link": "https://stackoverflow.com/users/262125/landonschropp"}, "reply_to_user": {"reputation": 2278, "user_id": 1772828, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b7831a9963c2207377c46468f6e797a?s=128&d=identicon&r=PG", "display_name": "cliffordheath", "link": "https://stackoverflow.com/users/1772828/cliffordheath"}, "edited": false, "score": 0, "creation_date": 1570753096, "post_id": 58310638, "comment_id": 103022798, "body": "@cliffordheath Thanks for the link! Is there a link available to documentation on <code>head</code> and <code>tail</code>?"}, {"owner": {"reputation": 2278, "user_id": 1772828, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b7831a9963c2207377c46468f6e797a?s=128&d=identicon&r=PG", "display_name": "cliffordheath", "link": "https://stackoverflow.com/users/1772828/cliffordheath"}, "edited": false, "score": 0, "creation_date": 1570835141, "post_id": 58310638, "comment_id": 103053732, "body": "head and tail are just node labels, they can be anything, but this is my idiom for list-like structures (one or more). Labels are in the normal documentation for Treetop syntax."}, {"owner": {"reputation": 2278, "user_id": 1772828, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b7831a9963c2207377c46468f6e797a?s=128&d=identicon&r=PG", "display_name": "cliffordheath", "link": "https://stackoverflow.com/users/1772828/cliffordheath"}, "edited": false, "score": 0, "creation_date": 1570835360, "post_id": 58310638, "comment_id": 103053762, "body": "The original error is that the first thing <code>expression</code> tries is <code>plus</code>, and the first thing <code>plus</code> tries is <code>expression</code>, which both do without moving forward. This <code>left recursion</code> has nothing to stop it so it races away until the stack overflows. Left recursion can be ok, but you must consume something before recursing."}], "answers": [{"tags": [], "owner": {"reputation": 3830, "user_id": 1177119, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/7a8513228d202b40141d295e840a4fa8?s=128&d=identicon&r=PG", "display_name": "Josh Voigts", "link": "https://stackoverflow.com/users/1177119/josh-voigts"}, "is_accepted": false, "score": 0, "last_activity_date": 1575297448, "creation_date": 1575297448, "answer_id": 59141151, "question_id": 58310638, "link": "https://stackoverflow.com/questions/58310638/simple-arithmetic-grammar-with-treetop-infinitely-recursing/59141151#59141151", "title": "Simple Arithmetic Grammar with Treetop Infinitely Recursing", "body": "<p>To avoid the left recursion, you can break up the <code>expression</code> rule into two parts like below:</p>\n\n<pre><code>grammar Calculation\n\n  rule expression\n    plus / symbol\n  end\n\n  rule symbol\n     number / variable\n   end\n\n  rule plus\n    symbol \"+\" expression\n  end\n\n  rule number\n    '-'? [0-9]+ ('.' [0-9]+)?\n  end\n\n  rule variable\n    [A-Za-z0-9]+\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 8960, "user_id": 262125, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/32b070e2e9b6be90f31bb4a154acb91c?s=128&d=identicon&r=PG", "display_name": "LandonSchropp", "link": "https://stackoverflow.com/users/262125/landonschropp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 58, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1575297448, "creation_date": 1570647777, "question_id": 58310638, "link": "https://stackoverflow.com/questions/58310638/simple-arithmetic-grammar-with-treetop-infinitely-recursing", "title": "Simple Arithmetic Grammar with Treetop Infinitely Recursing", "body": "<p>I'm trying to write a simple calculation grammar with Treetop. To simplify my example for this question, I'm only using variables, numbers and the <code>+</code> operator. I'd like to be able to write expressions like this:</p>\n\n<ul>\n<li><code>A</code></li>\n<li><code>1</code></li>\n<li><code>A+B</code></li>\n<li><code>A+1</code></li>\n<li><code>A+1+B</code></li>\n</ul>\n\n<p>Here's my grammar:</p>\n\n<pre><code>grammar Calculation\n\n  rule expression\n    (plus / number / variable)\n  end\n\n  rule plus\n    expression \"+\" expression\n  end\n\n  rule number\n    '-'? [0-9]+ ('.' [0-9]+)?\n  end\n\n  rule variable\n    [A-Za-z0-9]+\n  end\nend\n</code></pre>\n\n<p>When I run this, it infinitely recurses. After googling for a while, I think my problem has something to do with left-recursion, but I'm new to parsers and I don't really understand what that means. Could somebody explain why my particular example isn't working and how I can fix it?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "httparty", "persistent-connection"], "answers": [{"comments": [{"owner": {"reputation": 1593, "user_id": 1557674, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Z01Tq.jpg?s=128&g=1", "display_name": "SpartaSixZero", "link": "https://stackoverflow.com/users/1557674/spartasixzero"}, "edited": false, "score": 0, "creation_date": 1570714304, "post_id": 58311080, "comment_id": 103006888, "body": "What does call do again? Is that similar to initialize()?"}], "tags": [], "owner": {"reputation": 39, "user_id": 7657798, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb266f2fff71d882727314edadefd70b?s=128&d=identicon&r=PG&f=1", "display_name": "DynoMike", "link": "https://stackoverflow.com/users/7657798/dynomike"}, "is_accepted": false, "score": 0, "last_activity_date": 1570727223, "last_edit_date": 1570727223, "creation_date": 1570649552, "answer_id": 58311080, "question_id": 58310396, "link": "https://stackoverflow.com/questions/58310396/what-is-the-best-way-to-extend-httparty-restclient-for-specific-api-calls-with-p/58311080#58311080", "title": "What is the best way to extend HTTParty RestClient for specific API calls with persistent_http?", "body": "<p>what about adding initializer here, which will take timeouts hash? like:</p>\n\n<pre><code>def initialize(timeouts = {})\n@timeouts = timeouts\nend\n\ndef call\npersistent_connection_adapter({pool_size: 10, idle_timeout: 10, keep_alive: 10}.merge(timeouts))\nend\n</code></pre>\n\n<p>private\nattr_reader :timeouts</p>\n\n<p>so if you would like to set timeouts you just define while initializing.</p>\n\n<p>call is just a function to call after initialization</p>\n"}, {"comments": [{"owner": {"reputation": 1593, "user_id": 1557674, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Z01Tq.jpg?s=128&g=1", "display_name": "SpartaSixZero", "link": "https://stackoverflow.com/users/1557674/spartasixzero"}, "edited": false, "score": 0, "creation_date": 1570713182, "post_id": 58311199, "comment_id": 103006149, "body": "Thanks! I&#39;ll give that a try."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "reply_to_user": {"reputation": 1593, "user_id": 1557674, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Z01Tq.jpg?s=128&g=1", "display_name": "SpartaSixZero", "link": "https://stackoverflow.com/users/1557674/spartasixzero"}, "edited": false, "score": 1, "creation_date": 1570726286, "post_id": 58311199, "comment_id": 103013679, "body": "@SpartaSixZero &quot;didn&#39;t work&quot; is not very descriptive. However after reviewing the code in <code>persistent_httparty</code> it seems that thier mechanism does not respect any <code>HTTParty</code> default options so you would need to set the values every time you call. <code>persistent_connection_adapter</code> or for each request individually. Additionally that gem was written and has not been updated in 7 years (might want to look for a different persistent adapter that has remained in line with any change  HTTParty has made)"}], "tags": [], "owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "is_accepted": false, "score": 1, "last_activity_date": 1570672774, "last_edit_date": 1570672774, "creation_date": 1570650079, "answer_id": 58311199, "question_id": 58310396, "link": "https://stackoverflow.com/questions/58310396/what-is-the-best-way-to-extend-httparty-restclient-for-specific-api-calls-with-p/58311199#58311199", "title": "What is the best way to extend HTTParty RestClient for specific API calls with persistent_http?", "body": "<p>Given the way <code>HTTParty</code> works I am unsure what you are suggesting is going to work. \nIt seems like, from a breif run through of the code base, by calling <code>read_timeout</code>, <code>open_timeout</code>, etc. you are setting default options then when you pass options to<br>\n<code>persistent_connection_adapter</code> these are just being merged into the \"default_options\"</p>\n\n<p>This means even though you removed the method calls to <code>read_timeout</code> and  <code>open_timeout</code> from the new class chances are they will still trickle down through inheritance. </p>\n\n<p>It might make more sense to configure just the default options and then pass the variable options to persistent_connection_adapter\nFor Example:</p>\n\n<pre><code> class RestClient\n   include HTTParty\n   pool_size = 10\n   idle_timeout = 10\n   keep_alive = 10\n   persistent_connection_adapter(read_timeout: 3, open_timeout: 3)\nend \n</code></pre>\n\n<p>This means you can inherit while still configuring the connection options for this specific class: </p>\n\n<pre><code> class SpecialRestClient &lt; RestClient\n   persistent_connection_adapter\n end \n</code></pre>\n"}], "owner": {"reputation": 1593, "user_id": 1557674, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Z01Tq.jpg?s=128&g=1", "display_name": "SpartaSixZero", "link": "https://stackoverflow.com/users/1557674/spartasixzero"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 346, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1570727223, "creation_date": 1570646736, "last_edit_date": 1570723419, "question_id": 58310396, "link": "https://stackoverflow.com/questions/58310396/what-is-the-best-way-to-extend-httparty-restclient-for-specific-api-calls-with-p", "title": "What is the best way to extend HTTParty RestClient for specific API calls with persistent_http?", "body": "<p>We currently use <a href=\"https://github.com/jnunemaker/httparty\" rel=\"nofollow noreferrer\">HTTParty</a> gem for our RestClient class in our Rails Engine. Recently, we leveraged the <a href=\"https://github.com/bpardee/persistent_http\" rel=\"nofollow noreferrer\">persistent_httparty</a> wrapper to add the ability to set read timeouts and open timeouts. This allows us to then implement our own custom handling for long API calls.</p>\n\n<p>Our code looks like this for RestClient class:</p>\n\n<pre><code>require 'httparty'\nrequire 'persistent_httparty'\n\nmodule ScheduleEngine\n  class RestClient\n    include HTTParty\n\n    pool_size = 10\n    idle_timeout = 10\n    keep_alive = 10\n    read_timeout = 3\n    open_timeout = 3\n\n    persistent_connection_adapter(pool_size: pool_size, idle_timeout: idle_timeout, keep_alive: keep_alive,\n                                  read_timeout: read_timeout, open_timeout: open_timeout)\n\n    class &lt;&lt; self\n      # other stuff\n    end\n\n    # other code omitted for brevity\n  end\nend\n</code></pre>\n\n<p>Then, to use this RestClient, we simply instantiate the RestClient where ever we need to make an API call.</p>\n\n<pre><code>client = RestClient.new(user, params)\n\ndata = client.callAPI()\n</code></pre>\n\n<p>Now we want some specific API calls to not have a read timeout or an open timeout.</p>\n\n<p>I'm no Ruby expert but my initial idea is to create a new class which inherits from RestClient class. But this one would simply overwrite some of the base values. Below is an example:</p>\n\n<pre><code>module ScheduleEngine\n  class SpecialRestClient &lt; RestClient\n    pool_size = 10\n    idle_timeout = 10\n    keep_alive = 10\n\n    # Note that I'm no longer providing read_timout or open_timeout\n    persistent_connection_adapter(pool_size: pool_size, idle_timeout: idle_timeout, keep_alive: keep_alive)\n  end\nend\n</code></pre>\n\n<p>With this new class, I can simply instantiate it in places where I don't want a read timeout or an open timeout.</p>\n\n<p>My question is, is this a good approach? Or is there an even better approach?</p>\n\n<p>Update:\nHere is my 2nd attempt. Looking at the documentation for persistent_httparty, especially around the <a href=\"https://github.com/soupmatt/persistent_httparty/blob/v0.1.1/lib/httparty/persistent/connection_adapter.rb\" rel=\"nofollow noreferrer\">ConnectionAdapter</a> class, looks like I can pass in a key called timeout and if I provide that, it will overwrite the existing values for read_timeout and open_timeout. My new code looks like this:</p>\n\n<pre><code>module ScheduleEngine\n  class SpecialRestClient &lt; RestClient\n    persistent_connection_adapter(timeout: 90)\n  end\nend\n</code></pre>\n\n<p>I tried that and it didn't work. This makes me think that the method persistent_connection_adapter is supposed to be invoked only once in the beginning and once that's set, you can't change any of the settings.</p>\n"}, {"tags": ["ruby", "if-statement", "syntax"], "answers": [{"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1570664862, "post_id": 58310488, "comment_id": 102988010, "body": "Anybody know why Ruby doesn&#39;t permit <code>hit.props&amp;[:path]</code> as sugar?"}, {"owner": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1570671826, "post_id": 58310488, "comment_id": 102989253, "body": "@CarySwoveland It would be a sweet feature, but that already means <code>hit.props.&amp;([:path])</code>. For example <a href=\"https://ruby-doc.org/core-2.6.5/Array.html#method-i-26\" rel=\"nofollow noreferrer\"><code>Array#&amp;</code></a>. <code>arr = [:foo, :bar, :path]; arr&amp;[:path];</code>."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1570675982, "post_id": 58310488, "comment_id": 102990090, "body": "Ah, yes. I can scratch that off my list."}], "tags": [], "owner": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "is_accepted": true, "score": 3, "last_activity_date": 1570647606, "last_edit_date": 1570647606, "creation_date": 1570647134, "answer_id": 58310488, "question_id": 58310169, "link": "https://stackoverflow.com/questions/58310169/understanding-calling-variables-in-ruby/58310488#58310488", "title": "Understanding Calling Variables in Ruby", "body": "<blockquote>\n  <p>what's the difference between .path and [:path]</p>\n</blockquote>\n\n<p><code>.path</code> is a method call. <code>:path</code> creates a <a href=\"https://ruby-doc.org/core/Symbol.html\" rel=\"nofollow noreferrer\">Symbol</a>.</p>\n\n<hr>\n\n<p><code>hit.props.path</code> calls the <code>props</code> method on the <code>hit</code> object. Then calls <code>.path</code> on whatever is returned from that. It's equivalent to:</p>\n\n<pre><code>tmp = hit.props\ntmp.path\n</code></pre>\n\n<hr>\n\n<p><code>hit.props[:path]</code> again calls the <code>props</code> method on the <code>hit</code> object. Then fetches the value from that (which is probably a <a href=\"https://ruby-doc.org/core/Hash.html\" rel=\"nofollow noreferrer\">Hash</a>) the <code>:path</code> key. <code>:path</code> is a Symbol which is kind of like a read-only shared String. They're often used as hash keys to save a bit of memory and to make things look a bit neater.</p>\n\n<p>It's equivalent to:</p>\n\n<pre><code>tmp = hit.props\nval = tmp[:path]\n</code></pre>\n\n<p>While I said Symbols are similar to Strings, they are not Strings. <code>tmp[:path]</code> and <code>tmp[\"path\"]</code> are not equivalent.</p>\n\n<hr>\n\n<p>What your code is doing is checking that <code>hit.props</code> and <code>hit.props.path</code> exist before trying <code>hit.props[:path]</code>. This is probably incorrect; <code>hit.props.path</code> is not used.</p>\n\n<p>You probably only want to check for <code>hit.props</code> before trying to use it as a Hash.</p>\n\n<pre><code>if hit.props\n  original_path = hit.props[:path]\n</code></pre>\n\n<p>This can be further reduced using the <a href=\"https://ruby-doc.org/core-2.6/doc/syntax/calling_methods_rdoc.html#label-Safe+navigation+operator\" rel=\"nofollow noreferrer\">Safe Navigation Operator <code>&amp;.</code></a> introduced in Ruby 2.3.</p>\n\n<pre><code>original_path = hit.props&amp;.[](:path)\n</code></pre>\n\n<p>It works just like a normal method call, but if the object is <code>nil</code> the call will return <code>nil</code> rather than an error. If <code>hit.props</code> is <code>nil</code> then <code>original_path</code> will be <code>nil</code>. It DRYs up your code and eliminates redundant method calls; <code>hit.props</code> is only called once.</p>\n\n<p>Note that we're taking advantage of the fact that <code>props[:path]</code> is really syntax sugar for calling the method <code>[]</code> on the <code>props</code> object. A bit mind-bending, but all that's happening is it's <a href=\"https://ruby-doc.org/core-2.6.5/Hash.html#method-i-5B-5D\" rel=\"nofollow noreferrer\">a method with a weird name</a>.</p>\n"}], "owner": {"reputation": 103, "user_id": 10213048, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kIGhQ.png?s=128&g=1", "display_name": "ChrisP", "link": "https://stackoverflow.com/users/10213048/chrisp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "accepted_answer_id": 58310488, "answer_count": 1, "score": 0, "last_activity_date": 1570647606, "creation_date": 1570645667, "last_edit_date": 1570646115, "question_id": 58310169, "link": "https://stackoverflow.com/questions/58310169/understanding-calling-variables-in-ruby", "title": "Understanding Calling Variables in Ruby", "body": "<p>I'm trying to understand what's happening here in this short little snippet, but I'm not well versed in Ruby. Ultimately, what I'm trying to figure out is what's the difference between .path and [:path]?</p>\n\n<pre><code>if(hit.props &amp;&amp; hit.props.path)\n      original_path = hit.props[:path]\n</code></pre>\n\n<p>I understand the if-statement part. Check if hit has props, and if it does check to see if it also has path in the props. I'm just confused as to what [:path] is trying to accomplish.</p>\n"}, {"tags": ["ruby", "vagrant", "puppet"], "answers": [{"tags": [], "owner": {"reputation": 300, "user_id": 8462383, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b9ba140e56921c40c3c96c83e01009ee?s=128&d=identicon&r=PG&f=1", "display_name": "Fabio", "link": "https://stackoverflow.com/users/8462383/fabio"}, "is_accepted": true, "score": 0, "last_activity_date": 1570993827, "creation_date": 1570993827, "answer_id": 58366921, "question_id": 58309590, "link": "https://stackoverflow.com/questions/58309590/could-not-find-class-at-tmp-vagrant-puppet/58366921#58366921", "title": "Could not find class at /tmp/vagrant-puppet", "body": "<p>The solution is very simple but I leave the question for posterity.\nThe file containing the puppet specifications must be named as <code>init.pp</code> for it to be correctly recognized</p>\n"}], "owner": {"reputation": 300, "user_id": 8462383, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b9ba140e56921c40c3c96c83e01009ee?s=128&d=identicon&r=PG&f=1", "display_name": "Fabio", "link": "https://stackoverflow.com/users/8462383/fabio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "accepted_answer_id": 58366921, "answer_count": 1, "score": 0, "last_activity_date": 1570993827, "creation_date": 1570643181, "last_edit_date": 1570645641, "question_id": 58309590, "link": "https://stackoverflow.com/questions/58309590/could-not-find-class-at-tmp-vagrant-puppet", "title": "Could not find class at /tmp/vagrant-puppet", "body": "<p>I can't provision, i search in the other threads but no one is useful!\nI'm using Vagrant with Puppet both of them at the latest version, my project structure is:</p>\n\n<pre><code>prova\n|\n|__Vagrantfile\n|\n|__puppet\n        |__manifests\n        |          |__ubonda.pp\n        |\n        |__modules\n                 |\n                 |__apache\n                         |\n                         |__manifests\n                                    |\n                                    |__apache.pp\n</code></pre>\n\n<p>My VagrantFile is:</p>\n\n<pre><code>Vagrant.configure(\"2\") do |config|\n  config.vm.define \"ubonda\" do |vm0|\n    vm0.vm.hostname = \"ubonda\"\n    vm0.vm.box = \"hashicorp/precise64\"\n\n    vm0.vm.provision \"puppet\" do |puppet|\n      puppet.manifests_path = 'puppet/manifests'\n      puppet.module_path = 'puppet/modules'\n      puppet.manifest_file = \"ubonda.pp\"\n    end\n  end\nend\n</code></pre>\n\n<p>My ubonda.pp file is:</p>\n\n<pre><code># default path\nExec {\n  path =&gt; [\"/usr/bin\", \"/bin\", \"/usr/sbin\", \"/sbin\", \"/usr/local/bin\", \"/usr/local/sbin\"]\n}\n\ninclude apache\n</code></pre>\n\n<p>My apache.pp file is:</p>\n\n<pre><code>class apache {\n\n  # install apache\n  package { \"apache2\":\n  ensure =&gt; present,\n  require =&gt; Exec[\"apt-get update\"]\n  }\n\n  # ensures that mode_rewrite is loaded and modifies the default configuration file\n  file { \"/etc/apache2/mods-enabled/rewrite.load\":\n  ensure =&gt; link,\n  target =&gt; \"/etc/apache2/mods-available/rewrite.load\",\n  require =&gt; Package[\"apache2\"]\n  }\n\n  # create directory\n  file {\"/etc/apache2/sites-enabled\":\n  ensure =&gt; directory,\n  recurse =&gt; true,\n  purge =&gt; true,\n  force =&gt; true,\n  before =&gt; File[\"/etc/apache2/sites-enabled/vagrant_webroot\"],\n  require =&gt; Package[\"apache2\"],...\n  }\n}\n</code></pre>\n\n<p>If i launch <code>vagrant provision</code> i obtain :</p>\n\n<pre><code>==&gt; ubonda: Running provisioner: puppet...\n==&gt; ubonda: Running Puppet with ubonda.pp...\n==&gt; ubonda: warning: Could not retrieve fact fqdn\n==&gt; ubonda: Could not find class apache for ubonda at /tmp/vagrant-puppet/manifests-846018e2aa141a5eb79a64b4015fc5f3/ubonda.pp:6 on node ubonda\n</code></pre>\n\n<p>I search in the <code>tmp/manifests</code> folder of the ubonda vm and inside there is only the ubonda.pp while in the <code>tmp/modules</code> there is the apache but the two are not connected, so I tried to copy inside the manifest but nothing has changed, how can I do?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"tags": [], "owner": {"reputation": 1171, "user_id": 4466467, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8fa3cb584327391e71cfa7d6f7f652b1?s=128&d=identicon&r=PG&f=1", "display_name": "Sujan Adiga", "link": "https://stackoverflow.com/users/4466467/sujan-adiga"}, "is_accepted": true, "score": 1, "last_activity_date": 1570642511, "creation_date": 1570642511, "answer_id": 58309436, "question_id": 58309326, "link": "https://stackoverflow.com/questions/58309326/why-am-i-getting-an-undefined-method-errors-for-nilnilclass/58309436#58309436", "title": "Why am I getting an undefined method `errors&#39; for nil:NilClass?", "body": "<p>There seems to be a typo in your <code>edit</code> action. You should be assigning the result of <code>Article.find(params[:id])</code> to @article and not @articles</p>\n\n<p>Note that instance variables in Ruby will have a default value of <code>nil</code></p>\n"}], "owner": {"reputation": 75, "user_id": 12190279, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9805280ae731983ef3642bf3404b6ded?s=128&d=identicon&r=PG&f=1", "display_name": "Sirrah025", "link": "https://stackoverflow.com/users/12190279/sirrah025"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 34, "favorite_count": 0, "accepted_answer_id": 58309436, "answer_count": 1, "score": 1, "last_activity_date": 1570722596, "creation_date": 1570642017, "last_edit_date": 1570722596, "question_id": 58309326, "link": "https://stackoverflow.com/questions/58309326/why-am-i-getting-an-undefined-method-errors-for-nilnilclass", "title": "Why am I getting an undefined method `errors&#39; for nil:NilClass?", "body": "<p>I am doing the <a href=\"https://guides.rubyonrails.org/getting_started.html#updating-articles\" rel=\"nofollow noreferrer\">5.11</a> part of the getting started with Ruby on Rails guide. When I try to edit an article on the local server, I get the error.</p>\n\n<p>I am trying to learn Ruby on Rails for a class project. Part of the project is having a working demonstration of the framework that I have to present to the class.</p>\n\n<p>This is the code for the <code>articles_controller</code>:</p>\n\n<pre><code>class ArticlesController &lt; ApplicationController\n  def show\n    @article = Article.find(params[:id])\n  end\n\n  def index\n    @articles = Article.all\n  end\n\n  def edit\n    @articles = Article.find(params[:id])\n  end\n\n  def new\n    @article = Article.new\n  end\n\n  def create\n    @article = Article.new(article_params)\n\n    if @article.save\n      redirect_to @article\n    else\n      render 'new'\n    end\n  end\n\n  def update\n    @article = Article.find(params[:id])\n\n    if @article.update article_params\n      redirect_to @article\n    else\n      render 'edit'\n    end\n  end\n\n  def destroy\n    @article = Article.find(params[:id])\n    @article.destroy\n\n    redirect_to articles_path\n  end\n\n  private\n\n  def article_params\n    params.require(:article).permit :title, :text\n  end\nend\n</code></pre>\n\n<p>And this is the code for editing an article:</p>\n\n<pre><code>&lt;h1&gt;Edit article&lt;/h1&gt;\n\n &lt;%= form_with model: @article, local: true do |form| %&gt;\n\n   &lt;% if @article.errors.any? %&gt;\n     &lt;div id=\"error_explanation\"&gt;\n       &lt;h2&gt;\n         &lt;%= pluralize(@article.errors.count, \"error\") %&gt; prohibited\n         this article from being saved:\n       &lt;/h2&gt;\n       &lt;ul&gt;\n         &lt;% @article.errors.full_messages.each do |msg| %&gt;\n           &lt;li&gt;&lt;%= msg %&gt;&lt;/li&gt;\n         &lt;% end %&gt;\n       &lt;/ul&gt;\n     &lt;/div&gt;\n   &lt;% end %&gt;\n\n   &lt;p&gt;\n     &lt;%= form.label :title %&gt;&lt;br&gt;\n     &lt;%= form.text_field :title %&gt;\n   &lt;/p&gt;\n\n   &lt;p&gt;\n     &lt;%= form.label :text %&gt;&lt;br&gt;\n     &lt;%= form.text_area :text %&gt;\n   &lt;/p&gt;\n\n   &lt;p&gt;\n     &lt;%= form.submit %&gt;\n   &lt;/p&gt;\n\n &lt;% end %&gt;\n\n&lt;%= link_to 'Back', articles_path %&gt;\n</code></pre>\n\n<p>I expected to be able to edit an article and save it. Instead, I get an error saying that the method 'errors' is undefined.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rubocop", "rubocop-rspec"], "answers": [{"comments": [{"owner": {"reputation": 1575, "user_id": 6064543, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/8ctqb.jpg?s=128&g=1", "display_name": "Roger Perez", "link": "https://stackoverflow.com/users/6064543/roger-perez"}, "edited": false, "score": 1, "creation_date": 1595441923, "post_id": 58309319, "comment_id": 111479122, "body": "I am using VSCode and I had to install them in the terminal. I am not able to add them to my project since it is a teamwork. Instead, I did <code>gem install &lt;Gem-Name&gt;</code>"}, {"owner": {"reputation": 7944, "user_id": 10907864, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tGpcY.jpg?s=128&g=1", "display_name": "Promise Preston", "link": "https://stackoverflow.com/users/10907864/promise-preston"}, "reply_to_user": {"reputation": 1575, "user_id": 6064543, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/8ctqb.jpg?s=128&g=1", "display_name": "Roger Perez", "link": "https://stackoverflow.com/users/6064543/roger-perez"}, "edited": false, "score": 0, "creation_date": 1595451793, "post_id": 58309319, "comment_id": 111483386, "body": "Oh, @RogerPerez, that&#39;s exactly what I did, guess I missed the <code>gem install</code> command in my answer. I just fixed it. Thanks."}], "tags": [], "owner": {"reputation": 7944, "user_id": 10907864, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tGpcY.jpg?s=128&g=1", "display_name": "Promise Preston", "link": "https://stackoverflow.com/users/10907864/promise-preston"}, "is_accepted": true, "score": 3, "last_activity_date": 1595451700, "last_edit_date": 1595451700, "creation_date": 1570641968, "answer_id": 58309319, "question_id": 58309318, "link": "https://stackoverflow.com/questions/58309318/rubocop-error-rubocop-returned-exit-code-2/58309319#58309319", "title": "Rubocop: Error - rubocop returned exit code 2", "body": "<p>According to RuboCop HQ commit message in relation to this issue\n(<a href=\"https://github.com/rubocop-hq/rubocop/commit/5e741368\" rel=\"nofollow noreferrer\">Return exit code 2 if RuboCop fails due to internal error</a>), it was stated that &quot;<strong>RuboCop returns process exit code 2 if it fails due to bad configuration, bad CLI options, or an internal error. If it runs successfully but finds one or more offenses, it still exits with code 1, as was previously the case. This is helpful when invoking RuboCop programmatically, perhaps from a script.</strong>&quot;</p>\n<p>After a more thorough review of my application, I checked the log message and realized that I was also having an error below the <code>Error:Rubocop returned exit code: 2</code>, which is <code>cannot load such file -- rubocop-performance</code>.</p>\n<p>So I quickly checked my <code>Gemfile</code> and realized that some gems listed in my <code>Gemfile</code> that have <code>rubocop</code> as a <strong>runtime dependency</strong> have not been installed.</p>\n<p>The full list of the gems are</p>\n<pre><code>gem 'rubocop-performance'\ngem 'rubocop-rails'\ngem 'rubocop-rspec'\n</code></pre>\n<p>All I had to do was to simply install the gems individually via my terminal</p>\n<pre><code>gem install rubocop-performance\ngem install rubocop-rails\ngem install rubocop-rspec\n</code></pre>\n<p>And that fixed the issue for me.</p>\n<p>That's all.</p>\n<p><strong>I hope this helps</strong></p>\n"}], "owner": {"reputation": 7944, "user_id": 10907864, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tGpcY.jpg?s=128&g=1", "display_name": "Promise Preston", "link": "https://stackoverflow.com/users/10907864/promise-preston"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1982, "favorite_count": 0, "accepted_answer_id": 58309319, "answer_count": 1, "score": 3, "last_activity_date": 1595451700, "creation_date": 1570641968, "question_id": 58309318, "link": "https://stackoverflow.com/questions/58309318/rubocop-error-rubocop-returned-exit-code-2", "title": "Rubocop: Error - rubocop returned exit code 2", "body": "<p>I just cloned a Ruby on Rails project to my local machine to work on it. I have ran the command <code>bundle install</code> in order to install all the necessary gems and dependencies required for the project.</p>\n\n<p>But a message keeps popping up in my log messages, which gets me worried. It is</p>\n\n<blockquote>\n  <p>Error:Rubocop returned exit code: 2</p>\n</blockquote>\n\n<p>I have checked the version of <code>rubocop</code> that I have installed and it seems to be up-to-date.\nI have also done some research as to what might be the cause of this error, but I seem not to have any luck yet. I need some assistance.</p>\n"}, {"tags": ["javascript", "ruby", "gulp", "jekyll", "bundler"], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 12193894, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/272827fa6b6a8336aebe426d9b4c5cfe?s=128&d=identicon&r=PG&f=1", "display_name": "marhel", "link": "https://stackoverflow.com/users/12193894/marhel"}, "is_accepted": false, "score": 0, "last_activity_date": 1572441216, "last_edit_date": 1572441216, "creation_date": 1570782461, "answer_id": 58337190, "question_id": 58306614, "link": "https://stackoverflow.com/questions/58306614/bundler-2-0-2-and-jekyll-gulp-installed-still-getting-must-use-bundler-2-or-gr/58337190#58337190", "title": "Bundler 2.0.2 and Jekyll/Gulp installed, still getting &quot;must use Bundler 2 or greater&quot; message", "body": "<p><em>Edit: The <a href=\"https://github.com/Homebrew/homebrew-core/issues/40872\" rel=\"nofollow noreferrer\">Homebrew misconfiguration issue</a> was fixed 2019-10-30.</em></p>\n\n<p>If you installed Jekyll as per <a href=\"https://jekyllrb.com/docs/installation/macos/\" rel=\"nofollow noreferrer\">Jekyll on macOS instructions</a> you got Ruby 2.6.5 via Homebrew, and then the underlying problem is that Homebrew (until 2019-10-30) misconfigured RubyGems making it more or less impossible to get Ruby to load newer versions of any of <a href=\"https://stdgems.org\" rel=\"nofollow noreferrer\">Ruby's default gems</a> such as <code>bundler</code>. </p>\n\n<p>The misconfiguration is in overriding the <code>default_dir</code> in the <a href=\"https://docs.ruby-lang.org/en/master/Gem.html#module-Gem-label-RubyGems+Defaults-2C+Packaging\" rel=\"nofollow noreferrer\">RubyGems customization point</a>\u00a0<code>/usr/local/Cellar/ruby/2.6.5/lib/ruby/2.6.0/rubygems/defaults/operating_system.rb</code> in an apparent attempt to move the 'standard' gem installation folder to <code>/usr/local/lib/ruby/gems/2.6.0</code>.</p>\n\n<p>However, the <code>default_dir</code> <em>needs</em> to point to <code>/usr/local/Cellar/ruby/2.6.5/lib/ruby/gems/2.6.0</code> because it contains the <code>specifications/default</code> folder with the default gem specs.\nIf the default gems cannot be loaded from <code>Gem::Specification::default_specifications_dir</code> then RubyGems' overriding of <code>require</code> won't activate newer versions of default Gems, even if they are installed and found, which prevents loading of bundler 2.0.2. Non-default gems such as Jekyll still load as expected.</p>\n\n<p>With the Homebrew RubyGems misconfiguration, the resulting problem is that the <code>bundler</code> command in your path will be a user-installed v2.0.2, since you did <code>gem install --user-install bundler jekyll</code> and added the user installation path (<code>$HOME/.gem/ruby/2.6.0/bin</code>) to your $PATH, whereas  the <code>jekyll</code> command only sees and uses the default bundler gem v1.17.2 due to the misconfiguration - and these version mismatches causes your issues.</p>\n\n<p>Waiting for Homebrew to fix the Ruby formula, one can fix the misconfiguration in operating_system.rb by replacing it with the following.</p>\n\n<pre><code>module Gem\n  class &lt;&lt; self\n    alias :old_default_dir :default_dir\n    alias :old_default_path :default_path\n    alias :old_default_bindir :default_bindir\n    alias :old_ruby :ruby\n  end\n\n  def self.homebrew_gems_dir\n    path = [\n      \"/usr/local\",\n      \"lib\",\n      \"ruby\",\n      \"gems\",\n      \"2.6.0\"\n    ]\n    File.join(*path)\n  end\n\n  def self.default_path\n    path = []\n    path &lt;&lt; homebrew_gems_dir\n    path &lt;&lt; user_dir if user_home &amp;&amp; File.exist?(user_home)\n    path &lt;&lt; default_dir\n    path &lt;&lt; vendor_dir if vendor_dir and File.directory? vendor_dir\n    path\n  end\n\n  def self.default_bindir\n    \"/usr/local/lib/ruby/gems/2.6.0/bin\"\n  end\n\n  def self.ruby\n    \"/usr/local/opt/ruby/bin/ruby\"\n  end\nend\n</code></pre>\n\n<p>(assuming you haven't changed the HOMEBREW_PREFIX away from /usr/local)</p>\n\n<p>See also this related <a href=\"https://github.com/Homebrew/homebrew-core/issues/40872\" rel=\"nofollow noreferrer\">Homebrew issue</a> and <a href=\"https://stackoverflow.com/a/54539010\">this answer</a>.</p>\n"}], "owner": {"reputation": 262, "user_id": 7823753, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb3d5e6c2ab39a6378c4d1f1dc40fe2c?s=128&d=identicon&r=PG", "display_name": "Mike Jandreau", "link": "https://stackoverflow.com/users/7823753/mike-jandreau"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 339, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1572441216, "creation_date": 1570631801, "question_id": 58306614, "link": "https://stackoverflow.com/questions/58306614/bundler-2-0-2-and-jekyll-gulp-installed-still-getting-must-use-bundler-2-or-gr", "title": "Bundler 2.0.2 and Jekyll/Gulp installed, still getting &quot;must use Bundler 2 or greater&quot; message", "body": "<p>I'm running into an issue with my Jekyll/Gulp setup failing, and the message I keep getting is \"must use Bundler 2 or greater\" even though I have Bundler 2.0.2 installed. There are other questions out there with a similar problem, but those projects were Rails and Heroku based. So far none of the solutions I've found ended up not working for me. </p>\n\n<p>Terminal shows that I have the same version of Bundler installed as what's listed in Gemfile.lock.</p>\n\n<pre><code>fs-217-156:jekyll-gulp mrjandre$ bundler -v\nBundler version 2.0.2\n</code></pre>\n\n<p>And I'm running Ruby 2.6.5:</p>\n\n<pre><code>fs-217-156:jekyll-gulp mrjandre$ ruby -v\nruby 2.6.5p114 (2019-10-01 revision 67812) [x86_64-darwin17]\n</code></pre>\n\n<p>From Gemfile.lock:</p>\n\n<pre><code>PLATFORMS\n  ruby\n  x64-mingw32\n\nDEPENDENCIES\n  jekyll (~&gt; 3.8.5)\n  jekyll-feed (~&gt; 0.6)\n  tzinfo-data\n\nBUNDLED WITH\n   2.0.2\n</code></pre>\n\n<p>I've tried uninstalling and reinstalling Bundler and Jekyll at least a dozen times over the last couple of days.</p>\n\n<pre><code>gem uninstall bundler\n</code></pre>\n\n<pre><code>gem install bundler -v '2.0.2'\n</code></pre>\n\n<pre><code>gem update --system\n</code></pre>\n\n<pre><code>bundle update --bundler\n</code></pre>\n\n<p>No idea what <code>binstubs</code> are, but I gave this a try too:</p>\n\n<pre><code>bundle binstubs bundler\n</code></pre>\n\n<p>Results of running 'gulp':</p>\n\n<pre><code>fs-217-156:jekyll-gulp mrjandre$ gulp\n[09:48:24] Using gulpfile ~/Desktop/Repos/jekyll-gulp/gulpfile.js\n[09:48:24] Starting 'default'...\n[09:48:24] Starting 'styles'...\n[09:48:25] Finished 'styles' after 928 ms\n[09:48:25] Starting 'scripts'...\n[09:48:27] Finished 'scripts' after 1.35 s\n[09:48:27] Starting 'images'...\n[09:48:27] Finished 'images' after 3.84 ms\n[09:48:27] Starting 'jekyll-build'...\nTraceback (most recent call last):\n    13: from /usr/local/bin/jekyll:22:in `&lt;main&gt;'\n    12: from /usr/local/bin/jekyll:22:in `load'\n    11: from /usr/local/lib/ruby/gems/2.6.0/gems/jekyll-4.0.0/exe/jekyll:11:in `&lt;top (required)&gt;'\n    10: from /usr/local/lib/ruby/gems/2.6.0/gems/jekyll-4.0.0/lib/jekyll/plugin_manager.rb:52:in `require_from_bundler'\n     9: from /usr/local/Cellar/ruby/2.6.5/lib/ruby/2.6.0/bundler.rb:101:in `setup'\n     8: from /usr/local/Cellar/ruby/2.6.5/lib/ruby/2.6.0/bundler.rb:135:in `definition'\n     7: from /usr/local/Cellar/ruby/2.6.5/lib/ruby/2.6.0/bundler/definition.rb:34:in `build'\n     6: from /usr/local/Cellar/ruby/2.6.5/lib/ruby/2.6.0/bundler/dsl.rb:13:in `evaluate'\n     5: from /usr/local/Cellar/ruby/2.6.5/lib/ruby/2.6.0/bundler/dsl.rb:234:in `to_definition'\n     4: from /usr/local/Cellar/ruby/2.6.5/lib/ruby/2.6.0/bundler/dsl.rb:234:in `new'\n     3: from /usr/local/Cellar/ruby/2.6.5/lib/ruby/2.6.0/bundler/definition.rb:83:in `initialize'\n     2: from /usr/local/Cellar/ruby/2.6.5/lib/ruby/2.6.0/bundler/definition.rb:83:in `new'\n     1: from /usr/local/Cellar/ruby/2.6.5/lib/ruby/2.6.0/bundler/lockfile_parser.rb:95:in `initialize'\n/usr/local/Cellar/ruby/2.6.5/lib/ruby/2.6.0/bundler/lockfile_parser.rb:108:in `warn_for_outdated_bundler_version': You must use Bundler 2 or greater with this lockfile. (Bundler::LockfileError)\n[09:48:27] 'jekyll-build' errored after 612 ms\n[09:48:27] Error: exited with error code: 1\n    at ChildProcess.onexit (/Users/mrjandre/Desktop/Repos/jekyll-gulp/node_modules/end-of-stream/index.js:39:36)\n    at emitTwo (events.js:126:13)\n    at ChildProcess.emit (events.js:214:7)\n    at Process.ChildProcess._handle.onexit (internal/child_process.js:198:12)\n[09:48:27] 'default' errored after 2.9 s\n</code></pre>\n\n<p>This is the <code>jekyll-build</code> task in <code>gulpfile.js</code>, which is pretty standard:</p>\n\n<pre><code>gulp.task(\"jekyll-build\", function () {\n  return cp.spawn( jekyll , [\"build\"], {stdio: \"inherit\"})\n});\n</code></pre>\n\n<p>I also deleted <code>node_modules</code> and reinstalled those dependencies a few times, ran <code>npm audit fix</code> and updated npm as well.</p>\n\n<p>I switch between Mac OSX and Windows 10 often, and this setup has been reliable on both systems for years. Any pointers and suggestions would be greatly appreciated, and I'd be happy to provide additional information if I've missed something. </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "string"], "comments": [{"owner": {"reputation": 1171, "user_id": 4466467, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8fa3cb584327391e71cfa7d6f7f652b1?s=128&d=identicon&r=PG&f=1", "display_name": "Sujan Adiga", "link": "https://stackoverflow.com/users/4466467/sujan-adiga"}, "edited": false, "score": 2, "creation_date": 1570632317, "post_id": 58306364, "comment_id": 102975332, "body": "If you can make client side changes, you can send a request body with <code>application&#47;json</code> content type, and send something like {&quot;parent_id&quot;: null, ...} Rails coerces it to <code>nil</code>. However, relying on client this much doesn&#39;t sound like a solid solution"}, {"owner": {"reputation": 36888, "user_id": 293280, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/6e6e22d81a1f4f394f62301be40c2e20?s=128&d=identicon&r=PG", "display_name": "Joshua Pinter", "link": "https://stackoverflow.com/users/293280/joshua-pinter"}, "reply_to_user": {"reputation": 1171, "user_id": 4466467, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8fa3cb584327391e71cfa7d6f7f652b1?s=128&d=identicon&r=PG&f=1", "display_name": "Sujan Adiga", "link": "https://stackoverflow.com/users/4466467/sujan-adiga"}, "edited": false, "score": 0, "creation_date": 1570632384, "post_id": 58306364, "comment_id": 102975366, "body": "@SujanAdiga Thanks for the suggestion. We have full control of the client side in this case so something worth considering. What&#39;s necessary to change on the Rails view side to make this change?"}, {"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1570633204, "post_id": 58306364, "comment_id": 102975857, "body": "Don&#39;t monkey patch. Use OOP; one class implements the parent_id as nil depending the conditions you need, the other as it&#39;s."}, {"owner": {"reputation": 1171, "user_id": 4466467, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8fa3cb584327391e71cfa7d6f7f652b1?s=128&d=identicon&r=PG&f=1", "display_name": "Sujan Adiga", "link": "https://stackoverflow.com/users/4466467/sujan-adiga"}, "edited": false, "score": 1, "creation_date": 1570635622, "post_id": 58306364, "comment_id": 102977173, "body": "@ Joshua Pinter, you will have to add event listener for submit action of the enclosing form, and then post the form using XHR"}], "answers": [{"comments": [{"owner": {"reputation": 36888, "user_id": 293280, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/6e6e22d81a1f4f394f62301be40c2e20?s=128&d=identicon&r=PG", "display_name": "Joshua Pinter", "link": "https://stackoverflow.com/users/293280/joshua-pinter"}, "edited": false, "score": 0, "creation_date": 1570631456, "post_id": 58306476, "comment_id": 102974827, "body": "I can&#39;t change the &quot;blank&quot; option as I&#39;m using that to indicate &quot;All&quot; parents (i.e. no filter whatsoever)."}, {"owner": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "reply_to_user": {"reputation": 36888, "user_id": 293280, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/6e6e22d81a1f4f394f62301be40c2e20?s=128&d=identicon&r=PG", "display_name": "Joshua Pinter", "link": "https://stackoverflow.com/users/293280/joshua-pinter"}, "edited": false, "score": 0, "creation_date": 1570631587, "post_id": 58306476, "comment_id": 102974893, "body": "If not, try the other two solutions."}, {"owner": {"reputation": 36888, "user_id": 293280, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/6e6e22d81a1f4f394f62301be40c2e20?s=128&d=identicon&r=PG", "display_name": "Joshua Pinter", "link": "https://stackoverflow.com/users/293280/joshua-pinter"}, "edited": false, "score": 0, "creation_date": 1570632317, "post_id": 58306476, "comment_id": 102975331, "body": "I don&#39;t find those other two methods any more elegant than <code>( params[ :parent_id ] == &quot;nil&quot; ? nil : params[ :parent_id ] )</code>."}, {"owner": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "reply_to_user": {"reputation": 36888, "user_id": 293280, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/6e6e22d81a1f4f394f62301be40c2e20?s=128&d=identicon&r=PG", "display_name": "Joshua Pinter", "link": "https://stackoverflow.com/users/293280/joshua-pinter"}, "edited": false, "score": 1, "creation_date": 1570632649, "post_id": 58306476, "comment_id": 102975524, "body": "<i>De gustibus non est disputandum</i>  IMO nesting ternary operator related to HTTP params inside an AR query is not very readable."}, {"owner": {"reputation": 36888, "user_id": 293280, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/6e6e22d81a1f4f394f62301be40c2e20?s=128&d=identicon&r=PG", "display_name": "Joshua Pinter", "link": "https://stackoverflow.com/users/293280/joshua-pinter"}, "edited": false, "score": 0, "creation_date": 1570634194, "post_id": 58306476, "comment_id": 102976378, "body": "In fairness, I set the <code>parent_id</code> separately with <code>parent_id = params[ :parent_id ] == &quot;nil&quot; ? nil : params[ :parent_id ]</code> and then just pass it in with <code>Child.where( parent_id: parent_id )</code>."}, {"owner": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "reply_to_user": {"reputation": 36888, "user_id": 293280, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/6e6e22d81a1f4f394f62301be40c2e20?s=128&d=identicon&r=PG", "display_name": "Joshua Pinter", "link": "https://stackoverflow.com/users/293280/joshua-pinter"}, "edited": false, "score": 0, "creation_date": 1570634957, "post_id": 58306476, "comment_id": 102976782, "body": "I don&#39;t know what you do in your code, I just answer your question ;)"}], "tags": [], "owner": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "is_accepted": false, "score": 1, "last_activity_date": 1570631327, "creation_date": 1570631327, "answer_id": 58306476, "question_id": 58306364, "link": "https://stackoverflow.com/questions/58306364/clean-way-of-checking-for-a-nil-string/58306476#58306476", "title": "Clean way of checking for a &quot;nil&quot; String", "body": "<p>I'd suggest to change the select to:</p>\n\n<pre><code>  &lt;option name=\"None\" value=\"\"&gt;None&lt;/option&gt;\n</code></pre>\n\n<p>If you can't do it - I'd refrain from monkey patching.</p>\n\n<p>You can add <code>\"nil\"</code> checking to conditions:</p>\n\n<pre><code>if params[ :parent_id ].present? &amp;&amp; params[ :parent_id != 'nil' \n  Child.where(parent_id: params[:parent_id]))\nend\n</code></pre>\n\n<p>or you can filter the <code>params</code> in a separate method:</p>\n\n<pre><code>def filtered_params\n  @filtered_params |= params.tap{|p| p[:parent_id] = nil if p[:parent_id] == 'nil' }\nend\n</code></pre>\n\n<p>and use <code>filtered_params</code> instead of <code>params</code> in your controller code.</p>\n"}, {"comments": [{"owner": {"reputation": 36888, "user_id": 293280, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/6e6e22d81a1f4f394f62301be40c2e20?s=128&d=identicon&r=PG", "display_name": "Joshua Pinter", "link": "https://stackoverflow.com/users/293280/joshua-pinter"}, "edited": false, "score": 0, "creation_date": 1570645831, "post_id": 58308942, "comment_id": 102981935, "body": "Yes, this seems like a more Rails way to handle &quot;nil&quot; values in a conditional. I&#39;ll keep mulling it over."}], "tags": [], "owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "is_accepted": false, "score": 0, "last_activity_date": 1570640274, "creation_date": 1570640274, "answer_id": 58308942, "question_id": 58306364, "link": "https://stackoverflow.com/questions/58306364/clean-way-of-checking-for-a-nil-string/58308942#58308942", "title": "Clean way of checking for a &quot;nil&quot; String", "body": "<p>This is how I would go about it </p>\n\n<pre><code>class Child \n  belongs_to :parent \n\n  scope :by_parent, -&gt;(parent_id=nil) { \n    parent_id.to_i == 0 ? without_parent : where(parent_id: parent_id.to_i)\n  }\n  scope :without_parent, -&gt; { where(parent_id: nil) } \nend \n</code></pre>\n\n<p>then your controller code is simply </p>\n\n<pre><code> Child.by_parent(params[:parent_id])\n</code></pre>\n"}], "owner": {"reputation": 36888, "user_id": 293280, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/6e6e22d81a1f4f394f62301be40c2e20?s=128&d=identicon&r=PG", "display_name": "Joshua Pinter", "link": "https://stackoverflow.com/users/293280/joshua-pinter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "answer_count": 2, "score": 3, "last_activity_date": 1570640274, "creation_date": 1570630997, "last_edit_date": 1570634144, "question_id": 58306364, "link": "https://stackoverflow.com/questions/58306364/clean-way-of-checking-for-a-nil-string", "title": "Clean way of checking for a &quot;nil&quot; String", "body": "<p>I have a scenario where I'm specifically looking for a <code>String</code> with the value of <code>\"nil\"</code>. In short, I have a conditional where I want to pass <code>nil</code> if the user selects that option in the dropdown and not pass <code>\"nil\"</code>, which is what gets passed in the params: </p>\n\n<p>My Select:</p>\n\n<pre><code>&lt;select name=\"parent_id\"&gt; \n  &lt;option name=\"All\"&gt;All&lt;/option&gt;\n  &lt;option name=\"None\" value=\"nil\"&gt;None&lt;/option&gt;\n&lt;/select&gt;\n</code></pre>\n\n<p>My condition:</p>\n\n<pre><code>if params[ :parent_id ].present?\n  Child.where( parent_id: params[ :parent_id ] ) # I want this to be IS NULL when params[ :parent_id ] == \"nil\"\nend\n</code></pre>\n\n<p>Typically, you would use <code>.nil?</code> or <code>.blank?</code> on a <code>String</code> to check for a <code>nil</code> value or an empty <code>String</code>. But <code>\"nil\".nil?</code> and <code>\"nil\".blank?</code> both equal <code>false</code>, as they should.</p>\n\n<p>So I'm curious if there's a good way to check for a <code>String</code> being <code>\"nil\"</code>.</p>\n\n<p>Currently I'm using <code>myString == \"nil\"</code> but that leads to things like <code>( myString == \"nil\" ? nil : myString )</code>. </p>\n\n<pre><code>if params[ :parent_id ].present?\n  parent_id = params[ :parent_id ] == \"nil\" ? nil : params[ :parent_id ]\n  Child.where( parent_id: parent_id )\nend\n</code></pre>\n\n<p>That's fine when it's used once in a while but if this is being used frequently, it's not ideal.</p>\n\n<p>This a fairly rare occurrence, I know, but it was particularly difficult to Google so I thought I would ask SO.</p>\n\n<p>My initial thoughts are: </p>\n\n<ul>\n<li>Add a method to <code>String</code> so you could do something like <code>\"nil\".nil_literal? #=&gt; true</code>.</li>\n<li>Monkey patch <code>.presence?</code> so that <code>\"nil\".presence?</code> returns <code>nil</code> instead of <code>\"nil\"</code>.</li>\n</ul>\n"}, {"tags": ["ruby", "csv"], "comments": [{"owner": {"reputation": 3119, "user_id": 4842949, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-0agpj31wtZ8/AAAAAAAAAAI/AAAAAAAAAAA/mSolbNN-zIY/photo.jpg?sz=128", "display_name": "Joseph Cho", "link": "https://stackoverflow.com/users/4842949/joseph-cho"}, "edited": false, "score": 1, "creation_date": 1570629099, "post_id": 58304715, "comment_id": 102973451, "body": "This question could use some more clarity. Could you add one or two lines from <code>files1.csv</code> and <code>file2.csv</code> along with the expected output? I get what you are trying to say, but the (uniqueID) just makes it more confusing."}, {"owner": {"reputation": 49, "user_id": 11023740, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-a8np908WvQQ/AAAAAAAAAAI/AAAAAAAAAAc/4ITlOUaNwe4/photo.jpg?sz=128", "display_name": "Arnaud Jeannin", "link": "https://stackoverflow.com/users/11023740/arnaud-jeannin"}, "reply_to_user": {"reputation": 3119, "user_id": 4842949, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-0agpj31wtZ8/AAAAAAAAAAI/AAAAAAAAAAA/mSolbNN-zIY/photo.jpg?sz=128", "display_name": "Joseph Cho", "link": "https://stackoverflow.com/users/4842949/joseph-cho"}, "edited": false, "score": 0, "creation_date": 1570630522, "post_id": 58304715, "comment_id": 102974272, "body": "Done, just to say I could use username or userid as unique ID no matter"}, {"owner": {"reputation": 3119, "user_id": 4842949, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-0agpj31wtZ8/AAAAAAAAAAI/AAAAAAAAAAA/mSolbNN-zIY/photo.jpg?sz=128", "display_name": "Joseph Cho", "link": "https://stackoverflow.com/users/4842949/joseph-cho"}, "edited": false, "score": 1, "creation_date": 1570631214, "post_id": 58304715, "comment_id": 102974650, "body": "Why does <code>output.csv</code> have two lines. Shouldn&#39;t <code>output.csv</code> have a single <code>helloworld;1234;</code> line? If you are trying to demonstrate a scenario where there is no match, please update the line two accordingly."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 3119, "user_id": 4842949, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-0agpj31wtZ8/AAAAAAAAAAI/AAAAAAAAAAA/mSolbNN-zIY/photo.jpg?sz=128", "display_name": "Joseph Cho", "link": "https://stackoverflow.com/users/4842949/joseph-cho"}, "edited": false, "score": 0, "creation_date": 1570650544, "post_id": 58304715, "comment_id": 102983902, "body": "Rather than answering a question asking for clarification with a comment, please edit your question, as others will probably have the same question and should not be expected to have read all the comments. Put another way, questions should stand on their own. Also, when responding to a comment with a comment, include the person&#39;s username (e.g., @JosephCho) so they will be informed by SO that a comment has been left for them; else they may never see your comment."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1570650798, "post_id": 58304715, "comment_id": 102984001, "body": "Please clarify what you mean by &quot;with blank if <code>file1.csv</code> username is not found in <code>file2.csv</code>&quot;. Do you mean that in that case <code>output.csv</code> should be written as an empty file?"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1570651516, "post_id": 58304715, "comment_id": 102984278, "body": "Please make examples as small as possible and still convey their essential structure. There is no need to have as many CSV columns as you have."}], "answers": [{"tags": [], "owner": {"reputation": 3119, "user_id": 4842949, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-0agpj31wtZ8/AAAAAAAAAAI/AAAAAAAAAAA/mSolbNN-zIY/photo.jpg?sz=128", "display_name": "Joseph Cho", "link": "https://stackoverflow.com/users/4842949/joseph-cho"}, "is_accepted": false, "score": 1, "last_activity_date": 1570638541, "last_edit_date": 1570638541, "creation_date": 1570637833, "answer_id": 58308329, "question_id": 58304715, "link": "https://stackoverflow.com/questions/58304715/merge-csv-files-same-unique-id-with-ruby/58308329#58308329", "title": "Merge CSV files same unique ID with Ruby", "body": "<p>There's a lot to unpack in this script. Essentially you need to read both CSV files into a hash, merge <code>file2</code> into <code>file1</code>, and write it back to a CSV.</p>\n\n<pre><code>require \"csv\"\n\ndict = Hash.new\noptions = { col_sep: \";\", headers: true}\n\n# read file1\nCSV.foreach(\"file1.csv\", options) do |row|\n  row = row.to_h\n  user = \"#{row['username']+row['userid']}\"\n  dict[user] = row\nend\n\n# read file2\nCSV.foreach(\"file2.csv\", options) do |row|\n  row = row.to_h\n  user = \"#{row['username']+row['owner_id']}\"\n  row.delete('owner_id')\n  dict[user] = row.merge(dict[user]) if dict[user]\nend\n\n# turn hash into rows\nrows = [['username','userid','full_name','follower_count','following_count','media_count','email','category','owner_profile_pic_url','media_url','tagged_brand_username']]\ndict.each do |key, value|\n  row = rows[0].map{|h| value[h] || \"\" }\n  rows.push(row)\nend\n\n# write to csv\nFile.write(\"output.csv\", rows.map{|r| r.to_csv(col_sep: \";\") }.join)\n</code></pre>\n\n<p>This covers both when there is a match and no username match in file1.</p>\n\n<pre><code># file1.csv\nusername;userid;full_name;follower_count;following_count;media_count;email;category\nhelloworld;1234;data3;data4;data5;data6;data7;data8\ngoodbyeworld;5678;data3;data4;data5;data6;data7;file2.csv\n\n# file2.csv\nusername;owner_id;owner_profile_pic_url;media_url;tagged_brand_username\nhelloworld;1234;data3b;data4b;data5b\n\n# output.csv\nusername;userid;full_name;follower_count;following_count;media_count;email;category;owner_profile_pic_url;media_url;tagged_brand_username\nhelloworld;1234;data3;data4;data5;data6;data7;data8;data3b;data4b;data5b\ngoodbyeworld;5678;data3;data4;data5;data6;data7;data8;\"\";\"\";\"\"\n</code></pre>\n\n<p>As mentioned, the fact that there is two lines with the same ID in <code>output.csv</code> is very confusing. Next time just add an extra row showing what happens if there's no match. While this is a good question, we have guidelines on <a href=\"https://stackoverflow.com/help/how-to-ask\">how to write an excellent question</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 0, "last_activity_date": 1570658466, "last_edit_date": 1570658466, "creation_date": 1570658065, "answer_id": 58312808, "question_id": 58304715, "link": "https://stackoverflow.com/questions/58304715/merge-csv-files-same-unique-id-with-ruby/58312808#58312808", "title": "Merge CSV files same unique ID with Ruby", "body": "<p>There are two existing CSV input files and we wish to create one CSV output file: </p>\n\n<pre><code>FNAME1   = 'file1.csv'\nFNAME2   = 'file2.csv'    \nFILE_OUT = 'output.csv'\n</code></pre>\n\n<p>Let's first create the two input files.</p>\n\n<pre><code>File.write(FNAME1, \"username;userid;full_name;follower_count;following_count;media_count;email;category\\nhelloworld;1234;data3;data4;data5;data6;data7;data8\\n\")\n  #=&gt; 136\n</code></pre>\n\n<h1><p></p></h1>\n\n<pre><code>File.write(FNAME2, \"username;owner_id;owner_profile_pic_url;media_url;tagged_brand_username\\nhelloworld;1234;data3b;data4b;data5b\\n\")\n  #=&gt; 109\n</code></pre>\n\n<h1><p></p></h1>\n\n<p>Now go through the steps to read those files, manipulate their contents and write the output file.</p>\n\n<pre><code>require 'csv'\n</code></pre>\n\n<p>First read both input files and save their contents in variables.</p>\n\n<pre><code>def read_csv(fname)\n  CSV.read(fname, col_sep: ';', headers: true)\nend\n\ncsv1 = read_csv(FNAME1)\n  #=&gt; #&lt;CSV::Table mode:col_or_row row_count:2&gt; \ncsv2 = read_csv(FNAME2)\n  #=&gt; #&lt;CSV::Table mode:col_or_row row_count:2&gt;\n</code></pre>\n\n<p>Note:</p>\n\n<pre><code>csv1.to_a\n  #=&gt; [[\"username\",    \"userid\", \"full_name\", \"follower_count\", \"following_count\",\n  #     \"media_count\", \"email\",  \"category\"],\n  #    [\"helloworld\",  \"1234\",   \"data3\",     \"data4\",          \"data5\",\n  #     \"data6\",       \"data7\",  \"data8\"]] \ncsv2.to_a\n  #=&gt;  [[\"username\",   \"owner_id\", \"owner_profile_pic_url\", \"media_url\", \"tagged_brand_username\"],\n  #     [\"helloworld\", \"1234\",     \"data3b\",                \"data4b\",    \"data5b\"]] \n</code></pre>\n\n<p>As you see, these are ordinary arrays, so if we wished we could at this point forget they came from CSV files and use standard Ruby methods to create the desired output file.</p>\n\n<p>Now see if the values of <code>\"username\"</code> are the same in both files:</p>\n\n<pre><code>username1 = csv1['username'].first\n  #=&gt; \"helloworld\"\nusername2 = csv2['username'].first\n  #=&gt; \"helloworld\"\n</code></pre>\n\n<p><code>csv1['username']</code> creates an array of all values in the <code>\"helloworld\"</code> column. Here that is simply <code>[\"helloworld\"]</code>; hence <code>.first</code>. Same for <code>csv2</code>, of course.</p>\n\n<p>If <code>username1 == username2 #=&gt; false</code> we perform an action that I am not clear about, then quit. Henceforth, I assume the two usernames are equal.</p>\n\n<p>Read the headers of both files into arrays.</p>\n\n<pre><code>headers1 = csv1.headers\n  #=&gt; [\"username\", \"userid\", \"full_name\", \"follower_count\", \"following_count\",\n  #    \"media_count\", \"email\", \"category\"] \nheaders2 = csv2.headers\n  #=&gt; [\"username\", \"owner_id\", \"owner_profile_pic_url\", \"media_url\",\n  #    \"tagged_brand_username\"] \n</code></pre>\n\n<p>The output file is to contain all the columns in <code>headers1</code> and all the columns in <code>headers2</code> with the exception of <code>\"username\"</code> and <code>\"owner_id\"</code> in <code>headers2</code>, so let's next get rid of those headers in <code>headers2</code>:</p>\n\n<pre><code>headers2 -= [\"username\", \"owner_id\"]\n  #=&gt; [\"owner_profile_pic_url\", \"media_url\", \"tagged_brand_username\"] \n</code></pre>\n\n<p>Next retrieve the values of the headers in the first file:</p>\n\n<pre><code>values1 = headers1.flat_map { |h| csv1[h] }\n  #=&gt; [\"helloworld\", \"1234\", \"data3\", \"data4\", \"data5\", \"data6\", \"data7\", \"data8\"]\n</code></pre>\n\n<p>and the values of the remaining headers in the second file:</p>\n\n<pre><code>values2 = headers2.flat_map { |h| csv2[h] }\n  #=&gt; [\"data3b\", \"data4b\", \"data5b\"] \n</code></pre>\n\n<p>We will modify <code>values2</code> below so we need to save its current size:</p>\n\n<pre><code>values2_size = values2.size\n  #=&gt; i\n</code></pre>\n\n<p>The first line in the output file after the header line is to contain the values:</p>\n\n<pre><code>values1 += values2\n  #=&gt; [\"helloworld\", \"1234\", \"data3\", \"data4\", \"data5\", \"data6\", \"data7\", \"data8\",\n  #    \"data3b\", \"data4b\", \"data5b\"] \n</code></pre>\n\n<p>and the second line is to contain:</p>\n\n<pre><code>values2 = values1 - values2\n  #=&gt; [\"helloworld\", \"1234\", \"data3\", \"data4\", \"data5\", \"data6\", \"data7\", \"data8\",\n</code></pre>\n\n<p>plus <code>values2_size #=&gt; 3</code> empty fields.</p>\n\n<p>We could use <code>CSV</code> methods to write this to file, but there is really no advantage in doing so over using regular file methods. We can simply write the following string to file.</p>\n\n<pre><code>str = [(headers1 + headers2).join(';'),\n       values1.join(';'),\n       values2.join(';') + ';' * values2_size\n      ].join(\"\\n\")\n</code></pre>\n\n<h1><p></p></h1>\n\n<pre><code>puts str\nusername;userid;full_name;follower_count;following_count;media_count;email;category;owner_profile_pic_url;media_url;tagged_brand_username\nhelloworld;1234;data3;data4;data5;data6;data7;data8;data3b;data4b;data5b\nhelloworld;1234;data3;data4;data5;data6;data7;data8;;;\n</code></pre>\n\n<p>Let's do it.</p>\n\n<pre><code>File.write(FILE_OUT, str)\n  #=&gt; 265\n</code></pre>\n\n<p>Note that, if <code>a</code> and <code>b</code> are arrays, <code>a += b</code> and <code>a -= b</code> expand to <code>a = a + b</code> and <code>a = a - b</code>, respectively. The CSV methods I've used are documented <a href=\"https://ruby-doc.org/stdlib-2.6.3/libdoc/csv/rdoc/CSV.html\" rel=\"nofollow noreferrer\">here</a>.</p>\n\n<p>I will leave it to the OP to combine the operations I've discussed into a method.</p>\n"}], "owner": {"reputation": 49, "user_id": 11023740, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-a8np908WvQQ/AAAAAAAAAAI/AAAAAAAAAAc/4ITlOUaNwe4/photo.jpg?sz=128", "display_name": "Arnaud Jeannin", "link": "https://stackoverflow.com/users/11023740/arnaud-jeannin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 117, "favorite_count": 0, "answer_count": 2, "score": 3, "last_activity_date": 1570658466, "creation_date": 1570625945, "last_edit_date": 1570641954, "question_id": 58304715, "link": "https://stackoverflow.com/questions/58304715/merge-csv-files-same-unique-id-with-ruby", "title": "Merge CSV files same unique ID with Ruby", "body": "<p>I have two CSV files</p>\n\n<pre><code>file1.csv\nusername;userid;full_name;follower_count;following_count;media_count;email;category\nhelloworld;1234;data3;data4;data5;data6;data7;data8\n\nfile2.csv\nusername;owner_id;owner_profile_pic_url;media_url;tagged_brand_username\nhelloworld;1234;data3b;data4b;data5b\n</code></pre>\n\n<p>I need the following output file using Ruby with blank if <code>file1.csv</code> username is not found in <code>file2.csv</code> (e.g. row 2).</p>\n\n<pre><code>output.csv\nusername;userid;full_name;follower_count;following_count;media_count;email;category;owner_profile_pic_url;media_url;tagged_brand_username\nhelloworld;1234;data3;data4;data5;data6;data7;data8;data3b;data4b;data5b\nhelloworld;1234;data3;data4;data5;data6;data7;data8;;;\n</code></pre>\n\n<p>Currently I'm doing it using a Excel vlookup function.</p>\n\n<p>Thanks</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord"], "comments": [{"owner": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "edited": false, "score": 0, "creation_date": 1570625465, "post_id": 58304527, "comment_id": 102971239, "body": "<code>Undefined local variable or method &#39;id&#39; for...</code> what is the full error?"}], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 5650582, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/b65f280529df3cab8a3050b35a4453c9?s=128&d=identicon&r=PG&f=1", "display_name": "NeimadTL", "link": "https://stackoverflow.com/users/5650582/neimadtl"}, "edited": false, "score": 0, "creation_date": 1570626717, "post_id": 58304644, "comment_id": 102971996, "body": "I&#39;m doing this so that the current user has only the collaborations where he&#39;s the owner the tasks and not all of them. I&#39;ll try tonight as I&#39;m at work at the moment. just by adding the class_name it will suffice to get the current user id ? is that what you&#39;re saying ? why the lambda doesn&#39;t point to User ?"}, {"owner": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "reply_to_user": {"reputation": 33, "user_id": 5650582, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/b65f280529df3cab8a3050b35a4453c9?s=128&d=identicon&r=PG&f=1", "display_name": "NeimadTL", "link": "https://stackoverflow.com/users/5650582/neimadtl"}, "edited": false, "score": 0, "creation_date": 1570626795, "post_id": 58304644, "comment_id": 102972041, "body": "when you call <code>current_user.collaborations</code> with the code defined in my answer it will return only the tasks for the current user."}, {"owner": {"reputation": 33, "user_id": 5650582, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/b65f280529df3cab8a3050b35a4453c9?s=128&d=identicon&r=PG&f=1", "display_name": "NeimadTL", "link": "https://stackoverflow.com/users/5650582/neimadtl"}, "edited": false, "score": 0, "creation_date": 1570627242, "post_id": 58304644, "comment_id": 102972343, "body": "ok cool ! I&#39;ll try it out and will let you know. I was a bit skeptical about the fact that I had to add code (the lambda) to only the get those collaborations but I knew I Rails should do it for me...but looks like I was missing something. Will let know the outcome. why the lambda doesn&#39;t point to User instance though ?"}, {"owner": {"reputation": 33, "user_id": 5650582, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/b65f280529df3cab8a3050b35a4453c9?s=128&d=identicon&r=PG&f=1", "display_name": "NeimadTL", "link": "https://stackoverflow.com/users/5650582/neimadtl"}, "edited": false, "score": 0, "creation_date": 1570653789, "post_id": 58304644, "comment_id": 102985121, "body": "just tried and I actually get only the tasks for the current user like you said. What I want to do is the following. I want be able to do current_user.collaborators to get all the collaborators that the current user has. Meaning, all the users (aka collaborators) of all the tasks the current user is the owner of. and that&#39;s why I went on filtering the collaborations table to only get the collaborations records where current user is the owner of and then get the collaborators via the has_many collaborators naturally because of the previous filter. what do think please ?"}], "tags": [], "owner": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "is_accepted": false, "score": 1, "last_activity_date": 1570625722, "creation_date": 1570625722, "answer_id": 58304644, "question_id": 58304527, "link": "https://stackoverflow.com/questions/58304527/how-to-get-the-id-of-the-current-object/58304644#58304644", "title": "how to get the id of the current object?", "body": "<p>You write:</p>\n\n<pre><code>  class User &lt; ApplicationRecord\n    has_many :collaborations, -&gt; {joins(:task).where(\"tasks.user_id = ?\", self.id)}\n  end\n</code></pre>\n\n<p>It's important to note that <code>self</code> in the <code>has_many</code> lambda doesn't point to <code>User</code> instance, so it's not the way to get the id. I guess that you have a has-many relation to <code>Task</code>, but you want to call this relation <code>collaborations</code>, right?</p>\n\n<p>You can write:</p>\n\n<pre><code>has_many :collaborations, class_name: 'Task'\n</code></pre>\n\n<p>and it'll work. <a href=\"https://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html#method-i-has_many\" rel=\"nofollow noreferrer\">Docs</a> - section \"Options\"</p>\n"}, {"comments": [{"owner": {"reputation": 33, "user_id": 5650582, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/b65f280529df3cab8a3050b35a4453c9?s=128&d=identicon&r=PG&f=1", "display_name": "NeimadTL", "link": "https://stackoverflow.com/users/5650582/neimadtl"}, "edited": false, "score": 0, "creation_date": 1570655789, "post_id": 58304689, "comment_id": 102985877, "body": "here&#39;s what I wanted to do actually : <code>Collaboration.joins(:task).where(&quot;tasks.user_id = ?&quot;, self.id)</code>. so thanks because you gave me a hint. and then I wanted to have all the users (aka collaborators) where the current user is the owner of the tasks via <code>has_many :collaborators</code>. have a look at my last comment on the first answer I&#39;ve had for my question. but thanks again."}, {"owner": {"reputation": 303, "user_id": 9479253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cd34f4996365a59ad414df6950d6d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ashok Damaniya", "link": "https://stackoverflow.com/users/9479253/ashok-damaniya"}, "reply_to_user": {"reputation": 33, "user_id": 5650582, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/b65f280529df3cab8a3050b35a4453c9?s=128&d=identicon&r=PG&f=1", "display_name": "NeimadTL", "link": "https://stackoverflow.com/users/5650582/neimadtl"}, "edited": false, "score": 0, "creation_date": 1570682826, "post_id": 58304689, "comment_id": 102991535, "body": "glad you got your answer, always happy to help , although my answer is not much likely what you need. @NeimadTL"}], "tags": [], "owner": {"reputation": 303, "user_id": 9479253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cd34f4996365a59ad414df6950d6d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ashok Damaniya", "link": "https://stackoverflow.com/users/9479253/ashok-damaniya"}, "is_accepted": false, "score": 1, "last_activity_date": 1570625860, "creation_date": 1570625860, "answer_id": 58304689, "question_id": 58304527, "link": "https://stackoverflow.com/questions/58304527/how-to-get-the-id-of-the-current-object/58304689#58304689", "title": "how to get the id of the current object?", "body": "<p>self will be considered as User.id, while what you need is user object and its id of that object, you need to change your code little bit </p>\n\n<p>remove has_many relationships with collaborations and write method for fetching records</p>\n\n<pre><code>def collaborations\n  User.joins(:task).where(\"tasks.user_id = ?\", self.id)\nend \n</code></pre>\n\n<p>and call that method with user object</p>\n\n<pre><code>user = User.last\nuser.collaborations\n</code></pre>\n\n<p>and you will get collaborations for that particular user </p>\n"}, {"tags": [], "owner": {"reputation": 761, "user_id": 7786120, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3acd54907ef6cb3d7de0ebd91177850d?s=128&d=identicon&r=PG&f=1", "display_name": "Akshay Goyal", "link": "https://stackoverflow.com/users/7786120/akshay-goyal"}, "is_accepted": false, "score": 0, "last_activity_date": 1570626229, "last_edit_date": 1570626229, "creation_date": 1570625925, "answer_id": 58304711, "question_id": 58304527, "link": "https://stackoverflow.com/questions/58304527/how-to-get-the-id-of-the-current-object/58304711#58304711", "title": "how to get the id of the current object?", "body": "<p>You can't use self in the <code>has_many</code> association.</p>\n\n<p>In order to have access to the user object when building the query, the user is passed as a parameter to the block. So basically, what you can do is: </p>\n\n<pre><code>has_many :collaborations, -&gt; (user){joins(:task).where(\"tasks.user_id = ?\", user.id)}\n</code></pre>\n\n<p>Now you can call <code>User.last.collborations</code>\nThis should work.</p>\n\n<p>Go through this <a href=\"https://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html\" rel=\"nofollow noreferrer\">link</a> for more info.</p>\n"}], "owner": {"reputation": 33, "user_id": 5650582, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/b65f280529df3cab8a3050b35a4453c9?s=128&d=identicon&r=PG&f=1", "display_name": "NeimadTL", "link": "https://stackoverflow.com/users/5650582/neimadtl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 93, "favorite_count": 1, "closed_date": 1570636902, "answer_count": 3, "score": -2, "last_activity_date": 1570720678, "creation_date": 1570625400, "last_edit_date": 1570720678, "question_id": 58304527, "link": "https://stackoverflow.com/questions/58304527/how-to-get-the-id-of-the-current-object", "closed_reason": "Not suitable for this site", "title": "how to get the id of the current object?", "body": "<p>I want be able to do current_user.collaborators to get all the collaborators that the current user has. Meaning, all the users (aka collaborators) of all the tasks the current user is the owner of. and that's why I went on filtering ( the collaborations table to only get the collaborations records where current user is the owner of and then get the collaborators via the has_many collaborators naturally because of the previous filter.\nwhile trying to filter by using <code>self.id</code> in the query, I'm getting the following error when I'm calling <code>User.first.collaborations</code> in Rails console :</p>\n\n<pre><code>NoMethodError (undefined method `id' for #&lt;Collaboration::ActiveRecord_Relation:0x00007fb41c802460&gt;)\n</code></pre>\n\n<p>Any suggestion about what I should use/do to get to my goal please? Thanks for your help.</p>\n\n<p><strong>User class</strong></p>\n\n<pre><code>class User &lt; ApplicationRecord\n  # Include default devise modules. Others available are:\n  # :confirmable, :lockable, :timeoutable, :trackable and :omniauthable\n  devise :database_authenticatable, :registerable,\n         :recoverable, :rememberable, :validatable\n\n  has_many :tasks\n  has_many :collaborations, -&gt; {joins(:task).where(\"tasks.user_id = ?\", self.id)}\n  has_many :collaborators, through: :collaborations, class_name: \"User\", source: :user\nend\n</code></pre>\n\n<p><strong>Collaboration class</strong></p>\n\n<pre><code>class Collaboration &lt; ApplicationRecord\n  validates :task_id, presence: true\n  validates :user_id, presence: true\n\n  belongs_to :task\n  belongs_to :user\nend\n</code></pre>\n\n<p><strong>Task class</strong></p>\n\n<pre><code>class Task &lt; ApplicationRecord\n  validates :content, presence: true\n  validates :label, presence: true\n\n  belongs_to :user #owner of the task\n  has_many :collaborations\n  has_many :collaborators, through: :collaborations, class_name: \"User\", source: :user\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 1285, "user_id": 10443890, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de817ef35c4a2bdd0501efbdc6d9a338?s=128&d=identicon&r=PG&f=1", "display_name": "mr_muscle", "link": "https://stackoverflow.com/users/10443890/mr-muscle"}, "edited": false, "score": 0, "creation_date": 1570622623, "post_id": 58303569, "comment_id": 102969645, "body": "Thanks for that, should I define new method and call it in the code or leave like it is and it will be processed automatically ?"}, {"owner": {"reputation": 5312, "user_id": 6535997, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/10156345016155058/picture?type=large", "display_name": "Mark", "link": "https://stackoverflow.com/users/6535997/mark"}, "reply_to_user": {"reputation": 1285, "user_id": 10443890, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de817ef35c4a2bdd0501efbdc6d9a338?s=128&d=identicon&r=PG&f=1", "display_name": "mr_muscle", "link": "https://stackoverflow.com/users/10443890/mr-muscle"}, "edited": false, "score": 0, "creation_date": 1570623112, "post_id": 58303569, "comment_id": 102969936, "body": "No worries, I think common practice is to leave the <code>ActiveRecord::Base.transaction do</code> block as most developers recognise it and know what the intentions are"}, {"owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "edited": false, "score": 0, "creation_date": 1570623419, "post_id": 58303569, "comment_id": 102970102, "body": "Since <code>ActiveRecord::Base</code> methods are inherited you could replace it with <code>ApplicationRecord</code> or any of your other models."}], "tags": [], "owner": {"reputation": 5312, "user_id": 6535997, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/10156345016155058/picture?type=large", "display_name": "Mark", "link": "https://stackoverflow.com/users/6535997/mark"}, "is_accepted": true, "score": 2, "last_activity_date": 1570625161, "last_edit_date": 1570625161, "creation_date": 1570622061, "answer_id": 58303569, "question_id": 58303417, "link": "https://stackoverflow.com/questions/58303417/rails-wrap-two-process-to-the-db-transaction/58303569#58303569", "title": "Rails wrap two process to the db transaction", "body": "<p>Try <code>ActiveRecord::Base.transaction</code>:</p>\n\n<p><a href=\"https://api.rubyonrails.org/classes/ActiveRecord/Transactions/ClassMethods.html\" rel=\"nofollow noreferrer\">https://api.rubyonrails.org/classes/ActiveRecord/Transactions/ClassMethods.html</a></p>\n\n<pre><code>ActiveRecord::Base.transaction do\n  process.campaign_code.update!(state: 'used')\n  Campaign.find(process.campaign_code.campaign_id).increment!(:used_campaign_codes_amount, 1)\nend\n</code></pre>\n\n<p>If any of the commands in the transaction throw an error, all SQL transactions in the block will be reverted.</p>\n\n<p>EDIT: It's also worth changing <code>update</code> to <code>update!</code> to ensure an error is thrown if the update is unsuccessful, otherwise it can fail without throwing an error and the block will continue. </p>\n"}], "owner": {"reputation": 1285, "user_id": 10443890, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de817ef35c4a2bdd0501efbdc6d9a338?s=128&d=identicon&r=PG&f=1", "display_name": "mr_muscle", "link": "https://stackoverflow.com/users/10443890/mr-muscle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 33, "favorite_count": 0, "accepted_answer_id": 58303569, "answer_count": 1, "score": 1, "last_activity_date": 1570625161, "creation_date": 1570621560, "question_id": 58303417, "link": "https://stackoverflow.com/questions/58303417/rails-wrap-two-process-to-the-db-transaction", "title": "Rails wrap two process to the db transaction", "body": "<p>I've never done that before and I don't know if it is possible. I've got two process which I thing should most likely be wrapped in a database transaction to have the guarantee that either all changes in the database from the transaction will be made or no changes will be made.</p>\n\n<pre><code>process.campaign_code.update(state: 'used')\nCampaign.find(process.campaign_code.campaign_id).increment!(:used_campaign_codes_amount, 1)\n</code></pre>\n"}, {"tags": ["ruby"], "answers": [{"comments": [{"owner": {"reputation": 129, "user_id": 5686886, "user_type": "registered", "profile_image": "https://graph.facebook.com/1050415735021134/picture?type=large", "display_name": "Feber Castellon", "link": "https://stackoverflow.com/users/5686886/feber-castellon"}, "edited": false, "score": 0, "creation_date": 1570711253, "post_id": 58304839, "comment_id": 103004957, "body": "Thank you very much, your solution doesn&#39;t run to be honestly hehe, but the idea of using a previous_node seems very helpful"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "reply_to_user": {"reputation": 129, "user_id": 5686886, "user_type": "registered", "profile_image": "https://graph.facebook.com/1050415735021134/picture?type=large", "display_name": "Feber Castellon", "link": "https://stackoverflow.com/users/5686886/feber-castellon"}, "edited": false, "score": 0, "creation_date": 1570712338, "post_id": 58304839, "comment_id": 103005634, "body": "@FeberCastellon It probably doesn&#39;t work because your <code>get</code> method also returns the wrong thing with an index of <code>-1</code> (the above assumes it will return <code>nil</code>, but your version will return <code>@head</code>). .... But as I said, this is only meant to be an idea to point you in the right direction rather than an attempt to completely rewrite the whole thing :)"}], "tags": [], "owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "is_accepted": true, "score": 0, "last_activity_date": 1570627312, "last_edit_date": 1570627312, "creation_date": 1570626278, "answer_id": 58304839, "question_id": 58303062, "link": "https://stackoverflow.com/questions/58303062/within-a-linked-list-in-ruby-the-method-add-at-with-index-is-not-working-right/58304839#58304839", "title": "Within a Linked List in Ruby, the method add_at with index is not working right", "body": "<p>Your <code>LinkedList#add_at</code> method does not work correctly when inserting to the beginning (or end) of the list.</p>\n\n<p>In particular, when calling <code>list.add_at(0, 13)</code>, where's what happens:</p>\n\n<pre><code>def add_at(index, item)\n  current = head # Current is set to the \"3\" node\n  (index - 1).times do # This never yields\n    raise \"List not long enough\" if current.nil?\n    current = current.next_node\n  end\n\n  new_node = Node.new(item) # Creates the \"13\" node\n  new_node.next_node = current.next_node # \"13\" points to \"11\"\n  current.next_node = new_node # \"3\" points to \"13\"\nend\n</code></pre>\n\n<p>Result: Instead of turning <code>3 --&gt; 11 --&gt; 5</code> into <code>13 --&gt; 3 --&gt; 11 --&gt; 5</code>, you've turned it into <code>3 --&gt; 13 --&gt; 11 --&gt; 5</code>.</p>\n\n<p>In other words, the end result of calling <code>list.add_at(0, 13)</code> is the same as calling <code>list.add_at(1, 13)</code>.</p>\n\n<p>I don't want to dictate a single solution to you here; the key takeaway should be <strong>how to debug the problem</strong>. For example, you could try installing <a href=\"https://github.com/pry/pry\" rel=\"nofollow noreferrer\"><code>pry</code></a>, add <code>binding.pry</code> into the method and step through the code to reproduce my summary.\nThis is an absolutely vital developer skill that's needed to solve problems of this manner.</p>\n\n<p>...But with that said, here's a suggestion: Re-use the existing methods to fetch the <code>previous</code> and <code>next</code> nodes; then re-set the <code>head</code>/<code>tail</code> values if necessary (as well as \"inserting\" the new node into the list):</p>\n\n<pre><code>def add_at(index, item)\n  new_node = Node.new(item)\n\n  previous_node = get(index-1)\n  next_node = get(index)\n\n  if previous_node\n    previous_node.next_node = new_node\n  else\n    head = new_node\n  end\n\n  if next_node\n    new_node.next_node = next_node\n  else\n    tail = new_node\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 129, "user_id": 5686886, "user_type": "registered", "profile_image": "https://graph.facebook.com/1050415735021134/picture?type=large", "display_name": "Feber Castellon", "link": "https://stackoverflow.com/users/5686886/feber-castellon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "accepted_answer_id": 58304839, "answer_count": 1, "score": 0, "last_activity_date": 1570629069, "creation_date": 1570620300, "last_edit_date": 1570629069, "question_id": 58303062, "link": "https://stackoverflow.com/questions/58303062/within-a-linked-list-in-ruby-the-method-add-at-with-index-is-not-working-right", "title": "Within a Linked List in Ruby, the method add_at with index is not working right", "body": "<p>I am studying Ruby, and this Linked list exercise is a little complicated for me, I advanced, but not sure what I am doing wrong:</p>\n\n<pre><code>class Node\n  attr_accessor :value, :next_node\n  alias_method :next, :next_node\n\n  def initialize(value, next_node = nil)\n    @value = value\n    @next_node = next_node\n  end\n\n  def next\n    @next_node\n  end\nend\n\nclass LinkedList\n  attr_accessor :head, :tail\n\n  def initialize\n    @head = nil\n    @tail = nil\n  end\n\n  def add(number)\n    if @head.nil?\n      new_node = Node.new(number)\n      @head = new_node\n      @tail = new_node\n    else\n      new_node = Node.new(number)\n      @tail.next_node = new_node\n      @tail = new_node\n    end\n  end\n\n  def get(index)\n    current = @head\n    index.times do\n      current = current.next_node\n    end\n    return current.value\n  end\n\n  def add_at(index, item)\n    current = head\n    (index - 1).times do\n      raise \"List not long enough\" if current.nil?\n      current = current.next_node\n    end\n\n    new_node = Node.new(item)    \n    new_node.next_node = current.next_node   \n    current.next_node = new_node  \n  end\nend\n</code></pre>\n\n<p>Tried to change the Node method, but seems like that is not the answer</p>\n\n<p>Everything seems fine to me, but the data is not sorted in the right position according the following test: </p>\n\n<pre><code>list = LinkedList.new\n\nlist.add(3)\nlist.add(5)\nlist.add_at(1, 11)\nlist.add_at(0, 13)\n\nputs list.get(#)\n</code></pre>\n\n<p>should be 13,3,11,5 at the end</p>\n\n<p>Am I doing something wrong?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5"], "answers": [{"comments": [{"owner": {"reputation": 1423, "user_id": 2948157, "user_type": "registered", "accept_rate": 84, "profile_image": "https://graph.facebook.com/100001350795049/picture?type=large", "display_name": "Lucian Tarna", "link": "https://stackoverflow.com/users/2948157/lucian-tarna"}, "edited": false, "score": 0, "creation_date": 1570621970, "post_id": 58303202, "comment_id": 102969320, "body": "I do not have a gemfile, the folder is just empty , wanted to do a rails new but for that needed to install rails."}, {"owner": {"reputation": 162, "user_id": 1298855, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/efaf1195f54290f28f5612d36e2529c7?s=128&d=identicon&r=PG&f=1", "display_name": "Drey", "link": "https://stackoverflow.com/users/1298855/drey"}, "edited": false, "score": 0, "creation_date": 1583331550, "post_id": 58303202, "comment_id": 107080040, "body": "I do not know why, but this doesn&#39;t work for me, but direct sprockets installation from other answer works like a charm"}], "tags": [], "owner": {"reputation": 759, "user_id": 4352003, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/I0GKg.jpg?s=128&g=1", "display_name": "Yury Matusevich", "link": "https://stackoverflow.com/users/4352003/yury-matusevich"}, "is_accepted": true, "score": 12, "last_activity_date": 1583348404, "last_edit_date": 1583348404, "creation_date": 1570620819, "answer_id": 58303202, "question_id": 58302516, "link": "https://stackoverflow.com/questions/58302516/sprockets-requires-ruby-version-2-5-0-on-rails-5/58303202#58303202", "title": "sprockets requires Ruby version &gt;= 2.5.0 on rails 5", "body": "<p>The latest (4.0.0) version of sprockets really requires <code>ruby &gt;= 2.5.0</code>. Check it <a href=\"https://github.com/rails/sprockets/blob/v4.0.0/sprockets.gemspec#L42\" rel=\"noreferrer\">here</a></p>\n\n<p>Is <code>gem 'sprockets'</code> in your <code>Gemfile</code> set to a specific version?</p>\n\n<p>To manually change version of sprockets add the line bellow to your <code>Gemfile</code></p>\n\n<pre><code>gem 'sprockets', '~&gt; 3.7.2'\n</code></pre>\n\n<p>If you do not have a Gemfile yet try direct installation.</p>\n\n<p><code>gem install sprockets -v 3.7.2</code></p>\n"}, {"tags": [], "owner": {"reputation": 9368, "user_id": 316408, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/2d693c173f4a9e6cfec05c26c1df0d91?s=128&d=identicon&r=PG&f=1", "display_name": "mahatmanich", "link": "https://stackoverflow.com/users/316408/mahatmanich"}, "is_accepted": false, "score": 1, "last_activity_date": 1570621239, "creation_date": 1570621239, "answer_id": 58303322, "question_id": 58302516, "link": "https://stackoverflow.com/questions/58302516/sprockets-requires-ruby-version-2-5-0-on-rails-5/58303322#58303322", "title": "sprockets requires Ruby version &gt;= 2.5.0 on rails 5", "body": "<p>Rails 5 may only require <code>Ruby =&gt; 2.2.2</code> but if you don't version gems in your <code>Gemfile</code> it will always pull down the latest version of the gems. A later gem version then might need a higher version of Ruby. </p>\n\n<p>This however has nothing to do with rails!</p>\n\n<p>Also you might have a Problem with Ruby 2.4.1 using it with Rails 5.1.4</p>\n\n<p><a href=\"https://stackoverflow.com/questions/9087116/which-ruby-on-rails-is-compatible-with-which-ruby-version\">Which Ruby on Rails is compatible with which Ruby version?</a></p>\n"}, {"tags": [], "owner": {"reputation": 303, "user_id": 10495091, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-iL_qcyUe0Qo/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DV3-0zZbXPhZppoqKxWiOnNRLTGng/mo/photo.jpg?sz=128", "display_name": "wrsx", "link": "https://stackoverflow.com/users/10495091/wrsx"}, "is_accepted": false, "score": 9, "last_activity_date": 1570680750, "creation_date": 1570680750, "answer_id": 58315363, "question_id": 58302516, "link": "https://stackoverflow.com/questions/58302516/sprockets-requires-ruby-version-2-5-0-on-rails-5/58315363#58315363", "title": "sprockets requires Ruby version &gt;= 2.5.0 on rails 5", "body": "<p>For those that are experiencing this without having it explicitly specified in the gemfile, another workaround is to install the previous version manually:</p>\n\n<pre><code>gem install sprockets -v 3.7.2\n</code></pre>\n"}], "owner": {"reputation": 1423, "user_id": 2948157, "user_type": "registered", "accept_rate": 84, "profile_image": "https://graph.facebook.com/100001350795049/picture?type=large", "display_name": "Lucian Tarna", "link": "https://stackoverflow.com/users/2948157/lucian-tarna"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7103, "favorite_count": 1, "accepted_answer_id": 58303202, "answer_count": 3, "score": 7, "last_activity_date": 1583348404, "creation_date": 1570618304, "last_edit_date": 1570621911, "question_id": 58302516, "link": "https://stackoverflow.com/questions/58302516/sprockets-requires-ruby-version-2-5-0-on-rails-5", "title": "sprockets requires Ruby version &gt;= 2.5.0 on rails 5", "body": "<p>I have rvm installed on my PC with the default ruby gemset being 2.4.1</p>\n\n<pre><code>rvm list\n   ruby-2.4.0 [ x86_64 ]\n=* ruby-2.4.1 [ x86_64 ]\n   ruby-2.6.3 [ x86_64 ]\n\n# =&gt; - current\n# =* - current &amp;&amp; default\n#  * - default\n</code></pre>\n\n<p>I want to install rails 5 however <code>sprockets</code> fails to install requiring 2.5 ruby. However rails 5 should work with any ruby above 2.2.2:</p>\n\n<pre><code>gem install rails -v 5.1.4\nFetching: activesupport-5.1.4.gem (100%)\nSuccessfully installed activesupport-5.1.4\nFetching: actionview-5.1.4.gem (100%)\nSuccessfully installed actionview-5.1.4\nFetching: actionpack-5.1.4.gem (100%)\nSuccessfully installed actionpack-5.1.4\nERROR:  Error installing rails:\n    sprockets requires Ruby version &gt;= 2.5.0.\n</code></pre>\n\n<p>I don't care about the rails 5 version. The newer the better, but all versions do give me the errors</p>\n\n<p>Any idea why this might happen?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 761, "user_id": 7786120, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3acd54907ef6cb3d7de0ebd91177850d?s=128&d=identicon&r=PG&f=1", "display_name": "Akshay Goyal", "link": "https://stackoverflow.com/users/7786120/akshay-goyal"}, "edited": false, "score": 0, "creation_date": 1570618211, "post_id": 58302324, "comment_id": 102967280, "body": "Can you post your directoy structure? Most probably this issue can be fixed by using <code>::Services::..</code>. Give it a try."}, {"owner": {"reputation": 29, "user_id": 12073430, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41fb0f79b8f70dded0248ae8014a4431?s=128&d=identicon&r=PG&f=1", "display_name": "Maksim", "link": "https://stackoverflow.com/users/12073430/maksim"}, "reply_to_user": {"reputation": 761, "user_id": 7786120, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3acd54907ef6cb3d7de0ebd91177850d?s=128&d=identicon&r=PG&f=1", "display_name": "Akshay Goyal", "link": "https://stackoverflow.com/users/7786120/akshay-goyal"}, "edited": false, "score": 0, "creation_date": 1570618653, "post_id": 58302324, "comment_id": 102967509, "body": "@AkshayGoyal I&#39;ve uploaded the structure"}, {"owner": {"reputation": 761, "user_id": 7786120, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3acd54907ef6cb3d7de0ebd91177850d?s=128&d=identicon&r=PG&f=1", "display_name": "Akshay Goyal", "link": "https://stackoverflow.com/users/7786120/akshay-goyal"}, "edited": false, "score": 0, "creation_date": 1570618854, "post_id": 58302324, "comment_id": 102967626, "body": "Using <code>::</code> in front of <code>Services::Scrapers::FirstScraperService</code> isn&#39;t working?"}, {"owner": {"reputation": 29, "user_id": 12073430, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41fb0f79b8f70dded0248ae8014a4431?s=128&d=identicon&r=PG&f=1", "display_name": "Maksim", "link": "https://stackoverflow.com/users/12073430/maksim"}, "reply_to_user": {"reputation": 761, "user_id": 7786120, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3acd54907ef6cb3d7de0ebd91177850d?s=128&d=identicon&r=PG&f=1", "display_name": "Akshay Goyal", "link": "https://stackoverflow.com/users/7786120/akshay-goyal"}, "edited": false, "score": 0, "creation_date": 1570619223, "post_id": 58302324, "comment_id": 102967791, "body": "@AkshayGoyal I&#39;ve tried, but getting another problem <code>warning already initialized constant Services</code> and <code>warning: previous definition of Servicies was here</code>"}], "owner": {"reputation": 29, "user_id": 12073430, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41fb0f79b8f70dded0248ae8014a4431?s=128&d=identicon&r=PG&f=1", "display_name": "Maksim", "link": "https://stackoverflow.com/users/12073430/maksim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 29, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1570624667, "creation_date": 1570617685, "last_edit_date": 1570624667, "question_id": 58302324, "link": "https://stackoverflow.com/questions/58302324/running-scrapers-in-threads-in-ror", "title": "Running scrapers in threads in RoR", "body": "<p>I have a couple of scrapers in my Ruby on Rails application and I'm trying to run my data scrapers into separate threads. \nThe problem is that my scrapers are storing in <code>app/controllers/services/scrapers</code> folder and I can't access this services inside of my thread. Look at the code below:</p>\n\n<pre><code>    threads = []\n\n    data.each_key do |office|\n      threads &lt;&lt; Thread.new(office, data) do |office1, data1|\n        data1[office1].each_key do |link|\n          if (first condition)\n            Services::Scrapers::FirstScraperService.new.parse(link, data1[office1][link])\n          elsif (second condition)                      \n            Services::Scrapers::SecondScraperService.new.parse(link, data1[office1][link])  \n          end         \n        end\n      end\n    end\n    threads.each { |thr| thr.join } \n</code></pre>\n\n<p>Then I got a error: <code>uninitialized constant ParserController::Services</code>\nIf I run scrapers without threads, they working fine. </p>\n\n<p>What ideas or better solutions of my problem can be(I need to run my scrapers in parallel)?</p>\n\n<h3>Update</h3>\n\n<p>My directory structure:</p>\n\n<pre><code> app/controllers/services/scrapers\n</code></pre>\n"}, {"tags": ["python", "ruby", "ansible", "vagrant", "virtualbox"], "comments": [{"owner": {"reputation": 17777, "user_id": 9401096, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-U3FzEi4xqB8/AAAAAAAAAAI/AAAAAAAADCo/J5YMJMqKA9A/photo.jpg?sz=128", "display_name": "Zeitounator", "link": "https://stackoverflow.com/users/9401096/zeitounator"}, "edited": false, "score": 1, "creation_date": 1570633647, "post_id": 58301725, "comment_id": 102976079, "body": "I cannot reproduce your problem. Also, I do not see anywhere in your output the path that <code>which</code> has found for your tool. So I strongly suspect that, depending on the user you connect with, <code>which</code> is not finding your python install, resulting in your second command running."}, {"owner": {"reputation": 3005, "user_id": 11703358, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5pIOl.png?s=128&g=1", "display_name": "ipaleka", "link": "https://stackoverflow.com/users/11703358/ipaleka"}, "reply_to_user": {"reputation": 17777, "user_id": 9401096, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-U3FzEi4xqB8/AAAAAAAAAAI/AAAAAAAADCo/J5YMJMqKA9A/photo.jpg?sz=128", "display_name": "Zeitounator", "link": "https://stackoverflow.com/users/9401096/zeitounator"}, "edited": false, "score": 0, "creation_date": 1570637163, "post_id": 58301725, "comment_id": 102977951, "body": "I&#39;ve figured it out and have provided an answer. Tnx for your time!"}], "answers": [{"tags": [], "owner": {"reputation": 3005, "user_id": 11703358, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5pIOl.png?s=128&g=1", "display_name": "ipaleka", "link": "https://stackoverflow.com/users/11703358/ipaleka"}, "is_accepted": true, "score": 1, "last_activity_date": 1570637096, "creation_date": 1570637096, "answer_id": 58308135, "question_id": 58301725, "link": "https://stackoverflow.com/questions/58301725/how-to-prevent-conditioned-command-evaluation-in-ansibles-shell-provisioning/58308135#58308135", "title": "How to prevent conditioned command evaluation in Ansible&#39;s shell provisioning?", "body": "<p>The actual problem is a combination of two things: using python as an alias to Python3 in Arch (as contrary to Ubuntu where python is an alias for Python2) and the fact that Ubuntu doesn't ship with Python2 (and we don't need it for Ansible purposes, we use Python3).</p>\n\n<p>So the solution is to check for both <code>python</code> and <code>python3</code>:</p>\n\n<pre><code>config.vm.provision \"shell\", inline: \"if [ ! `which python`] &amp;&amp; [ ! `which python3` ]; then sudo pacman --noconfirm -S python; fi\"\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3005, "user_id": 11703358, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5pIOl.png?s=128&g=1", "display_name": "ipaleka", "link": "https://stackoverflow.com/users/11703358/ipaleka"}, "edited": false, "score": 0, "creation_date": 1570637779, "post_id": 58308188, "comment_id": 102978267, "body": "Thank you for your time, I provided the answer before seeing your answer. Yep, the problem is Ubuntu and Arch different <code>python</code> alias meaning. I&#39;ve solved it with a double <code>||</code>. Dunno for the ansible solution version, maybe if in the future current solution can&#39;t longer fit. Thanks!"}], "tags": [], "owner": {"reputation": 17777, "user_id": 9401096, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-U3FzEi4xqB8/AAAAAAAAAAI/AAAAAAAADCo/J5YMJMqKA9A/photo.jpg?sz=128", "display_name": "Zeitounator", "link": "https://stackoverflow.com/users/9401096/zeitounator"}, "is_accepted": false, "score": 1, "last_activity_date": 1570637293, "creation_date": 1570637293, "answer_id": 58308188, "question_id": 58301725, "link": "https://stackoverflow.com/questions/58301725/how-to-prevent-conditioned-command-evaluation-in-ansibles-shell-provisioning/58308188#58308188", "title": "How to prevent conditioned command evaluation in Ansible&#39;s shell provisioning?", "body": "<p>After a test on my machine with the following Vagranfile:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code> Vagrant.configure(2) do |config|\n     config.vm.box = \"generic/ubuntu1904\"\n     config.vm.hostname = \"test\"\n     config.vm.network \"private_network\", type: \"dhcp\"\n     config.vm.synced_folder \".\", \"/vagrant\", disabled: true\n     config.vm.provider \"virtualbox\" do |v|\n         v.memory = 2048\n         v.cpus = 2\n     end\n     config.vm.provision \"default\", type: \"shell\", inline: \"which python\", run: \"always\"\n end\n</code></pre>\n\n<p>this is the result of <code>vagrant up</code> (only last lines)</p>\n\n<pre><code>==&gt; default: Running provisioner: default (shell)...\n    default: Running: inline script\nThe SSH command responded with a non-zero exit status. Vagrant\nassumes that this means the command failed. The output for this command\nshould be in the log above. Please read the output to determine what\nwent wrong.\n</code></pre>\n\n<p>Checking interactively:</p>\n\n<pre><code>$ vagrant ssh\nLast login: Wed Oct  9 15:33:22 2019 from 10.0.2.2\nvagrant@test:~$ which python\nvagrant@test:~$ echo $?\n1\nvagrant@test:~$ which python3\n/usr/bin/python3\nvagrant@test:~$ echo $?\n0\nvagrant@test:~$\n</code></pre>\n\n<p>Conclusion: what you get is totally coherent. <code>python</code> does not exists in your ubuntu image so the rest of your command is run. Your scenario has a flaw and you need to find an other way.</p>\n\n<p>In your context, I would try to run everything in ansible. Here is an example just for the idea, that I didn't test and that can surely be greatly improved</p>\n\n<pre><code>- name: Make sure machine can run ansible\n  hosts: all\n  gather_facts: false\n\n  tasks:\n    - block:\n        - name: Try to ansible-ping the host. Consider python is not installed otherwise\n          ping:\n\n      rescue:\n        - name: No python available, install with low-level and dirty command\n          become: true\n          become_method: sudo\n          raw: pacman --noconfirm -S python\n\n\n</code></pre>\n"}], "owner": {"reputation": 3005, "user_id": 11703358, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5pIOl.png?s=128&g=1", "display_name": "ipaleka", "link": "https://stackoverflow.com/users/11703358/ipaleka"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "accepted_answer_id": 58308135, "answer_count": 2, "score": 1, "last_activity_date": 1570637293, "creation_date": 1570615490, "last_edit_date": 1570616959, "question_id": 58301725, "link": "https://stackoverflow.com/questions/58301725/how-to-prevent-conditioned-command-evaluation-in-ansibles-shell-provisioning", "title": "How to prevent conditioned command evaluation in Ansible&#39;s shell provisioning?", "body": "<p>I've got the following multi-machine Vagrant setup:</p>\n\n<pre><code>Vagrant.configure(2) do |config|\n\n  config.vm.define \"xfcevm\" do |xfcevm|\n    xfcevm.vm.box = \"generic/ubuntu1904\"\n    xfcevm.vm.hostname = \"xfcevm\"\n    config.vm.provider \"virtualbox\" do |vb|\n      vb.name = \"ubuntu-xfce\"\n    end\n  end\n\n  config.vm.define \"kdevm\" do |kdevm|\n    kdevm.vm.box = \"generic/arch\"\n    kdevm.vm.hostname = \"kdevm\"\n    config.vm.provider \"virtualbox\" do |vb|\n      vb.name = \"arch-kde\"\n    end\n  end\n\n  ## only Arch doesn't ship with Python installed\n  config.vm.provision \"shell\", inline: \"which python || sudo pacman --noconfirm -S python\"\n\n  config.vm.provider \"virtualbox\" do |vb|\n    vb.gui = true\n    vb.memory = \"2048\"\n    vb.cpus = 1\n    vb.customize [\"modifyvm\", :id, \"--vram\", \"32\"]\n  end\n\n  config.vm.provision \"ansible\" do |ansible|\n    ansible.verbose = \"v\"\n    ansible.compatibility_mode = \"2.0\"\n    ansible.playbook = \"setup.yml\"\n    ansible.inventory_path = \"hosts\"\n  end\n\nend\n</code></pre>\n\n<p>As Arch vagrant box doesn't include Python, so I've created an inline shell provision command that should test for the existence of Python (by <code>which python</code>) and if that evaluates to false then the <code>pacman</code> installation of Python should follow. For echoing output the second part shouldn't be evaluated and that's the case by running the command in terminal.</p>\n\n<p>But shell provisioner evaluates the part after <code>||</code> anyway, no matter if Python exists. In the case of Ubuntu, it raises an obvious error for <code>pacman</code> not being installed:</p>\n\n<pre><code>$ vagrant up --provision\nBringing machine 'xfcevm' up with 'virtualbox' provider...\nBringing machine 'kdevm' up with 'virtualbox' provider...\n==&gt; xfcevm: Checking if box 'generic/ubuntu1904' version '1.9.34' is up to date...\n==&gt; xfcevm: Running provisioner: shell...\n    xfcevm: Running: inline script\n    xfcevm: sudo\n    xfcevm: : \n    xfcevm: pacman: command not found\nThe SSH command responded with a non-zero exit status. Vagrant\nassumes that this means the command failed. The output for this command\nshould be in the log above. Please read the output to determine what\nwent wrong.\n</code></pre>\n\n<p>Also the same goes with a simple if statement instead of <code>||</code>:</p>\n\n<pre><code>config.vm.provision \"shell\", inline: \"if [ ! `which python` ]; then sudo pacman --noconfirm -S python; fi\"\n</code></pre>\n"}, {"tags": ["ruby", "rubygems", "jekyll", "static-site", "yaml-front-matter"], "answers": [{"tags": [], "owner": {"reputation": 25, "user_id": 7841223, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UZCl1.jpg?s=128&g=1", "display_name": "ollymid", "link": "https://stackoverflow.com/users/7841223/ollymid"}, "is_accepted": true, "score": 1, "last_activity_date": 1618333135, "last_edit_date": 1618333135, "creation_date": 1570619423, "answer_id": 58302834, "question_id": 58301653, "link": "https://stackoverflow.com/questions/58301653/i-am-unable-to-set-default-front-matter-for-drafts-or-posts-when-using-jekyll-co/58302834#58302834", "title": "I am unable to set default front matter for drafts or posts when using Jekyll-compose", "body": "<p>Ok I managed to fix this myself after seeing the syntax for the custom variables was different on GH compared to what I found when digging into the jekyll-compose post creation methods on rubydoc.info.</p>\n<p>Basically there was PR that changed the syntax merged in to master but not yet released, hence why I was having difficulty getting it to work</p>\n<p>The current syntax as of the latest release:</p>\n<pre class=\"lang-yaml prettyprint-override\"><code>jekyll_compose:\n  draft_default_front_matter:\n    description:\n    image:\n    category:\n    tags:\n  post_default_front_matter:\n    description:\n    image:\n    category:\n    tags:\n    published: false\n    sitemap: false\n</code></pre>\n<p>Compared to the config structure illustrated  in the Readme and on master in the jekyll-compose repo, but had't been released at the time when I looked at the docs:</p>\n<pre class=\"lang-yaml prettyprint-override\"><code>jekyll_compose:\n  default_front_matter:\n    drafts:\n      description:\n      image:\n      category:\n      tags:\n    posts:\n      description:\n      image:\n      category:\n      tags:\n      published: false\n      sitemap: false\n</code></pre>\n"}], "owner": {"reputation": 25, "user_id": 7841223, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UZCl1.jpg?s=128&g=1", "display_name": "ollymid", "link": "https://stackoverflow.com/users/7841223/ollymid"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 116, "favorite_count": 0, "accepted_answer_id": 58302834, "answer_count": 1, "score": 1, "last_activity_date": 1618333135, "creation_date": 1570615248, "question_id": 58301653, "link": "https://stackoverflow.com/questions/58301653/i-am-unable-to-set-default-front-matter-for-drafts-or-posts-when-using-jekyll-co", "title": "I am unable to set default front matter for drafts or posts when using Jekyll-compose", "body": "<p>I have installed the jekyll-compose gem to streamline creating pages, posts etc. In the <a href=\"https://github.com/jekyll/jekyll-compose\" rel=\"nofollow noreferrer\">documentation</a>. I have it working (i.e using the CLI commands I am able to generate, drafts, posts and pages).</p>\n\n<p>However when I generate a post for example, I want it to have certain variables in the front matter. There is functionality mentioned in the ReadMe of Jekyll Compose that says you can set front matter defaults for posts and for drafts. </p>\n\n<p>I have followed the instructions by adding the required lines in the config.yaml of my site, however posts and drafts that I generate using jekyll-compose do not generate with the variables I want.</p>\n\n<p>Jekyll-compose states that if you want default front matter variables you need add something like this to your _config.yaml:</p>\n\n<pre><code>jekyll_compose:\n  default_front_matter:\n    drafts:\n      description:\n      image:\n      category:\n      tags:\n    posts:\n      description:\n      image:\n      category:\n      tags:\n      published: false\n      sitemap: false\n</code></pre>\n\n<p>I have tried both their default config above and also my own below</p>\n\n<pre><code>jekyll_compose:\n  default_front_matter:\n    drafts:\n      main_img_url:\n      author_name:\n      categories:\n      description:\n    posts:\n      main_img_url:\n      author_name:\n      categories:\n      description:\n</code></pre>\n\n<p>But neither work when I generate a new post or draft. There are no error messages which makes it difficult to debug.</p>\n\n<p>Originally my Jekyll version was at 3.7.0, I thought it might be an problem of a Jekyll version being too old. However this problem persisted when I updated Jekyll to 3.8.6.</p>\n\n<p>It also does not work when I put default values for my custom variables, i.e:</p>\n\n<pre><code>jekyll_compose:\n  default_front_matter:\n    drafts:\n        main_img_url: \"https://images-we-got-pop.imgix.net/website/blog/pop-logo-small.png\"\n        author_name: \"Me\"\n        categories: \"general\"\n        description: \"Description\"\n    posts:\n        main_img_url: \"https://images-we-got-pop.imgix.net/website/blog/pop-logo-small.png\"\n        author_name: \"Me\"\n        categories: \"general\"\n        description: \"Description\"\n</code></pre>\n\n<p>My _config file looks like this:</p>\n\n<pre><code>title: Title\nemail: your-email@domain.com\ndescription: &gt; # this means to ignore newlines until \"baseurl:\"\n  Write an awesome description for your new site here. You can edit this\n  line in _config.yml. It will appear in your document head meta (for\n  Google search results) and in your feed.xml site description.\nbaseurl: \"\" # the subpath of your site, e.g. /blog\nurl: \"\" # the base hostname &amp; protocol for your site, e.g. http://example.com\ntwitter_username: name\ngithub_username:  name\n\n# Build settings\nmarkdown: kramdown\ntheme: minima\nplugins:\n  - jekyll-feed\n  - jekyll-paginate-v2\nexclude:\n  - Gemfile\n  - Gemfile.lock\n  - Makefile\n  - README.md\n\npermalink: /pages/:year/:month/:day/:title/\n\njekyll_compose:\n  default_front_matter:\n    drafts:\n      main_img_url:\n      author_name:\n      categories:\n      description:\n    posts:\n      main_img_url:\n      author_name:\n      categories:\n      description:\n\nfuture: true\n\npagination:\n  enabled: true\n  sort_reverse: true\n  trail:\n    before: 1\n    after: 1\n</code></pre>\n\n<p>and my Gemfile looks like this:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>source \"https://rubygems.org\"\nruby RUBY_VERSION\n\ngem \"jekyll\", \"3.8.6\"\n\n# This is the default theme for new Jekyll sites. You may change this to anything you like.\ngem \"minima\", \"~&gt; 2.0\"\n\n# If you want to use GitHub Pages, remove the \"gem \"jekyll\"\" above and\n# uncomment the line below. To upgrade, run `bundle update github-pages`.\n# gem \"github-pages\", group: :jekyll_plugins\n\n# If you have any plugins, put them here!\ngroup :jekyll_plugins do\n   gem \"jekyll-feed\", \"~&gt; 0.6\"\n   gem \"jekyll-paginate-v2\", \"~&gt; 1.9\"\n   gem 'jekyll-compose', \"~&gt; 0.11\"\nend\n\n</code></pre>\n\n<p>I am expecting my custom front matter to appear in my newly generated posts:</p>\n\n<pre><code>---\ntitle: this-is-a-new-post\ndate: 2019-10-09 10:45 +0100\nmain_img_url:\nauthor_name:\ncategories:\ndescription:\n---\n</code></pre>\n\n<p>But I only get the standard ones that get created with the post/draft, eg:</p>\n\n<pre><code>---\ntitle: this-is-a-new-post\ndate: 2019-10-09 10:45 +0100\n---\n</code></pre>\n\n<p>Any ideas??</p>\n"}, {"tags": ["regex", "ruby"], "comments": [{"owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1570613859, "post_id": 58301131, "comment_id": 102964998, "body": "Maybe <code>puts line[&#47;&#39;lineid&#39; -&gt; &#39;([^&#39;]+)&#39;&#47;, 1] if line.include? &quot;lineid&quot;</code>?"}, {"owner": {"reputation": 5, "user_id": 12138169, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ece955ebdea03f0f21d568a2cbfff28?s=128&d=identicon&r=PG&f=1", "display_name": "Filip", "link": "https://stackoverflow.com/users/12138169/filip"}, "reply_to_user": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1570614130, "post_id": 58301131, "comment_id": 102965153, "body": "@WiktorStribi\u017cew, yes thanks this only prints out the value of the line id. Do you also know how I now could store this in a variable? Thank you"}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1570616262, "post_id": 58301131, "comment_id": 102966304, "body": "You can use the assignment operator to assign a value to a variable."}], "answers": [{"comments": [{"owner": {"reputation": 5, "user_id": 12138169, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ece955ebdea03f0f21d568a2cbfff28?s=128&d=identicon&r=PG&f=1", "display_name": "Filip", "link": "https://stackoverflow.com/users/12138169/filip"}, "edited": false, "score": 0, "creation_date": 1570630678, "post_id": 58305995, "comment_id": 102974351, "body": "Thank you a lot"}, {"owner": {"reputation": 795, "user_id": 3662748, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8acc15309c4109ea00f420a59be35a47?s=128&d=identicon&r=PG&f=1", "display_name": "sam", "link": "https://stackoverflow.com/users/3662748/sam"}, "reply_to_user": {"reputation": 5, "user_id": 12138169, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ece955ebdea03f0f21d568a2cbfff28?s=128&d=identicon&r=PG&f=1", "display_name": "Filip", "link": "https://stackoverflow.com/users/12138169/filip"}, "edited": false, "score": 0, "creation_date": 1570633337, "post_id": 58305995, "comment_id": 102975928, "body": "@Filip If you think I answered your question, could you mark it? or if something is not quite right, please let me know. Thank you"}], "tags": [], "owner": {"reputation": 795, "user_id": 3662748, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8acc15309c4109ea00f420a59be35a47?s=128&d=identicon&r=PG&f=1", "display_name": "sam", "link": "https://stackoverflow.com/users/3662748/sam"}, "is_accepted": true, "score": 0, "last_activity_date": 1570629855, "creation_date": 1570629855, "answer_id": 58305995, "question_id": 58301131, "link": "https://stackoverflow.com/questions/58301131/extract-print-and-use-a-specific-string-from-file-line-as-a-variable/58305995#58305995", "title": "extract, print and use a specific string from file line as a variable", "body": "<p>Basically, use a group regex to capture the line id. </p>\n\n<pre class=\"lang-rb prettyprint-override\"><code> File.foreach(\"path/of/logfile.log\").each do |line|\n   if matches = line.match(/lineid.*?-&gt;\\s*'(?&lt;lineid&gt;.*?)'/) \n     lineid = matches[:lineid]\n     puts lineid\n   end\n end\n</code></pre>\n"}], "owner": {"reputation": 5, "user_id": 12138169, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ece955ebdea03f0f21d568a2cbfff28?s=128&d=identicon&r=PG&f=1", "display_name": "Filip", "link": "https://stackoverflow.com/users/12138169/filip"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 33, "favorite_count": 0, "accepted_answer_id": 58305995, "answer_count": 1, "score": -4, "last_activity_date": 1570629855, "creation_date": 1570613560, "question_id": 58301131, "link": "https://stackoverflow.com/questions/58301131/extract-print-and-use-a-specific-string-from-file-line-as-a-variable", "title": "extract, print and use a specific string from file line as a variable", "body": "<p>I am working with log files on which I want to check if parameters were set correctly. So I want to extract specific lines which contain the word \"lineid\". </p>\n\n<pre><code> File.foreach(\"path/of/logfile.log\").each do |line|\n   puts line if line.match?('lineid')\n end\n</code></pre>\n\n<p>as expected I am getting back the following: </p>\n\n<pre><code>2019-08-07 15:21:09.783             'lineid' -&gt; 'EBN.TXW.NBGNE00111'\n</code></pre>\n\n<p>Now I want to extract only the value \"EBN.TXW.NBGNE00111\" and store it in a variable. \nHow can I do this?</p>\n"}, {"tags": ["ruby", "selenium", "selenium-webdriver", "watir"], "comments": [{"owner": {"reputation": 12118, "user_id": 4714829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd1b66c22707be26afda19fe995e17ea?s=128&d=identicon&r=PG&f=1", "display_name": "supputuri", "link": "https://stackoverflow.com/users/4714829/supputuri"}, "edited": false, "score": 0, "creation_date": 1583597512, "post_id": 58296774, "comment_id": 107174206, "body": "Not sure why this is down voted."}], "answers": [{"comments": [{"owner": {"reputation": 3523, "user_id": 9043475, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FNxvn.jpg?s=128&g=1", "display_name": "Rajagopalan", "link": "https://stackoverflow.com/users/9043475/rajagopalan"}, "edited": false, "score": 0, "creation_date": 1570594461, "post_id": 58296895, "comment_id": 102956962, "body": "Hi, use watir which is the wrapper for selenium ruby binding."}, {"owner": {"reputation": 12118, "user_id": 4714829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd1b66c22707be26afda19fe995e17ea?s=128&d=identicon&r=PG&f=1", "display_name": "supputuri", "link": "https://stackoverflow.com/users/4714829/supputuri"}, "reply_to_user": {"reputation": 3523, "user_id": 9043475, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FNxvn.jpg?s=128&g=1", "display_name": "Rajagopalan", "link": "https://stackoverflow.com/users/9043475/rajagopalan"}, "edited": false, "score": 0, "creation_date": 1570594919, "post_id": 58296895, "comment_id": 102957043, "body": "Thanks for the comment Rajagopalan. Yeah, using watir. However, internally Watir will point to the same file that I have mentioned above . You will find the <code>@driver = Selenium::WebDriver.for(*selenium_args)</code> line in <code>browser.rb</code> file under watir implementation."}, {"owner": {"reputation": 3523, "user_id": 9043475, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FNxvn.jpg?s=128&g=1", "display_name": "Rajagopalan", "link": "https://stackoverflow.com/users/9043475/rajagopalan"}, "edited": false, "score": 0, "creation_date": 1570598269, "post_id": 58296895, "comment_id": 102957768, "body": "Yes, I know you will face the same problem . Now delete this question and post again using watir tag. People will come to help you."}, {"owner": {"reputation": 3523, "user_id": 9043475, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FNxvn.jpg?s=128&g=1", "display_name": "Rajagopalan", "link": "https://stackoverflow.com/users/9043475/rajagopalan"}, "edited": false, "score": 0, "creation_date": 1570615718, "post_id": 58296895, "comment_id": 102966033, "body": "Please include your code. In WATIR, you will have different syntax. To upload the file, you have to write, <code>b.file_field(id: &#39;something&#39;).Set &#39;filepath&#39;</code>"}, {"owner": {"reputation": 12118, "user_id": 4714829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd1b66c22707be26afda19fe995e17ea?s=128&d=identicon&r=PG&f=1", "display_name": "supputuri", "link": "https://stackoverflow.com/users/4714829/supputuri"}, "reply_to_user": {"reputation": 3523, "user_id": 9043475, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FNxvn.jpg?s=128&g=1", "display_name": "Rajagopalan", "link": "https://stackoverflow.com/users/9043475/rajagopalan"}, "edited": false, "score": 0, "creation_date": 1570640970, "post_id": 58296895, "comment_id": 102979658, "body": "upon further investigation, <code>w3c:true</code> capability is the one which is causing this issue. If we mark <code>w3:false</code> in the browser capabilities then the issue is not happening."}, {"owner": {"reputation": 3523, "user_id": 9043475, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FNxvn.jpg?s=128&g=1", "display_name": "Rajagopalan", "link": "https://stackoverflow.com/users/9043475/rajagopalan"}, "edited": false, "score": 0, "creation_date": 1570669322, "post_id": 58296895, "comment_id": 102988795, "body": "Ok then, seems like you found a solution"}, {"owner": {"reputation": 12118, "user_id": 4714829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd1b66c22707be26afda19fe995e17ea?s=128&d=identicon&r=PG&f=1", "display_name": "supputuri", "link": "https://stackoverflow.com/users/4714829/supputuri"}, "reply_to_user": {"reputation": 3523, "user_id": 9043475, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FNxvn.jpg?s=128&g=1", "display_name": "Rajagopalan", "link": "https://stackoverflow.com/users/9043475/rajagopalan"}, "edited": false, "score": 0, "creation_date": 1570677071, "post_id": 58296895, "comment_id": 102990316, "body": "Kind of, submitted the information to SeleniumHQ. I will submit a pull request to SeleniumHQ once they confirm. Thansk for your time Rajagopalan."}, {"owner": {"reputation": 1186, "user_id": 4007237, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1dcc728f0ed1028b0506547500726570?s=128&d=identicon&r=PG", "display_name": "Motine", "link": "https://stackoverflow.com/users/4007237/motine"}, "edited": false, "score": 0, "creation_date": 1594796534, "post_id": 58296895, "comment_id": 111247924, "body": "Here the selenium <a href=\"https://github.com/SeleniumHQ/selenium/issues/7666#issuecomment-540940600\" rel=\"nofollow noreferrer\">issue comment</a> that helped me resolve it."}], "tags": [], "owner": {"reputation": 12118, "user_id": 4714829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd1b66c22707be26afda19fe995e17ea?s=128&d=identicon&r=PG&f=1", "display_name": "supputuri", "link": "https://stackoverflow.com/users/4714829/supputuri"}, "is_accepted": true, "score": 0, "last_activity_date": 1570677837, "last_edit_date": 1570677837, "creation_date": 1570593709, "answer_id": 58296895, "question_id": 58296774, "link": "https://stackoverflow.com/questions/58296774/ruby-selenium-webdriver-3-142-6-unable-to-upload-file-due-to-seleniumwebdriv/58296895#58296895", "title": "Ruby-Selenium WebDriver 3.142.6: Unable to upload file due to &quot;Selenium::WebDriver::Error::UnknownCommandError:&quot;", "body": "<p><strong>Root Cause:</strong> <code>w3c</code> browser capability status</p>\n\n<p><strong>Explanation:</strong> When <code>w3c:true</code> selenium webdriver is throwing this error. This might be because of Selenium 3 is not at fully supporting w3c implementation.</p>\n\n<p><strong>Solution1:</strong> Simple solution would be making <code>w3c:false</code> if you don't have any dependencies based of the <code>w3c</code> capability.</p>\n\n<p><strong>Solution2:</strong> If solution 1 doesn't work then you have to update the <code>selenium-webdriver-3.142.6\\lib\\selenium\\webdriver\\remote\\w3c\\commands.rb</code> file. check for below line and then update it.</p>\n\n<blockquote>\n  <p>upload_file: [:post, 'session/:session_id/se/file']</p>\n</blockquote>\n\n<p>Updating this line to  </p>\n\n<p><strong>upload_file: [:post, 'session/:session_id/file']</strong> </p>\n\n<p><strong>Conclusion:</strong> Would prefer solution 1 until Selenium 4 is rolled out. If you go with solution 2 there is possibility of test failure when you try to run them on the machine where this change is not pushed/ the file might be set back with <code>bundle install</code>. </p>\n\n<p>You can use the method overright approach to go with solution but personally I feel it's too much.</p>\n\n<p>Posted the solution to SeleniumHQ, will submit Pull Request to SeleniumHQ once got confirmation. So that you don't face this issue in later version of Selenium Ruby WebDriver.</p>\n"}], "owner": {"reputation": 12118, "user_id": 4714829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd1b66c22707be26afda19fe995e17ea?s=128&d=identicon&r=PG&f=1", "display_name": "supputuri", "link": "https://stackoverflow.com/users/4714829/supputuri"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 237, "favorite_count": 0, "accepted_answer_id": 58296895, "answer_count": 1, "score": -1, "last_activity_date": 1570677837, "creation_date": 1570592725, "last_edit_date": 1592644375, "question_id": 58296774, "link": "https://stackoverflow.com/questions/58296774/ruby-selenium-webdriver-3-142-6-unable-to-upload-file-due-to-seleniumwebdriv", "title": "Ruby-Selenium WebDriver 3.142.6: Unable to upload file due to &quot;Selenium::WebDriver::Error::UnknownCommandError:&quot;", "body": "<p>Unable to upload the file using <code>selenium-webdriver (3.142.6)</code> gem in Ruby</p>\n<p>Tech stack:</p>\n<blockquote>\n<p>selenium-webdriver (3.142.6)</p>\n<p>Chrome Version : 77</p>\n<p>Chrome driver: 77</p>\n</blockquote>\n<p><strong>Error Message:</strong></p>\n<pre><code>Selenium::WebDriver::Error::UnknownCommandError: unknown command: unknown command: session/xxxsession_idXXX/se/file\nBacktrace:\n       Ordinal0 [0x00FDEB13+1501971]\n       Ordinal0 [0x00F5F6D1+980689]\n        Ordinal0 [0x00EE765F+489055]\n        Ordinal0 [0x00E9618E+156046]\n        Ordinal0 [0x00E95FF4+155636]\n        Ordinal0 [0x00E7220E+8718]\n  Ordinal0 [0x00E72626+9766]\n  Ordinal0 [0x00E72C10+11280]\n Ordinal0 [0x00F78F37+1085239]\n       GetHandleVerifier [0x0107D7ED+503293]\n       GetHandleVerifier [0x0107D580+502672]\n       GetHandleVerifier [0x010846AC+531644]\n       GetHandleVerifier [0x0107DFFA+505354]\n       Ordinal0 [0x00F70606+1050118]\n       Ordinal0 [0x00F7047F+1049727]\n       Ordinal0 [0x00E7204B+8267]\n  Ordinal0 [0x00E71D7C+7548]\n  GetHandleVerifier [0x013CD83C+3976780]\n      BaseThreadInitThunk [0x755738F4+36]\n RtlUnicodeStringToInteger [0x77375E13+595]\n  RtlUnicodeStringToInteger [0x77375DDE+542]\n</code></pre>\n<p>Seems to be the upload is broken with this version of gem.</p>\n<p>Code used to upload the file (watir with cheezy)</p>\n<pre><code>@browser.file_field(xpath: &quot;//*[contains(text(), 'Upload')]/input[@type='file']&quot;).set(complete_path_to_file)\n</code></pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 795, "user_id": 3662748, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8acc15309c4109ea00f420a59be35a47?s=128&d=identicon&r=PG&f=1", "display_name": "sam", "link": "https://stackoverflow.com/users/3662748/sam"}, "edited": false, "score": 3, "creation_date": 1570588806, "post_id": 58296274, "comment_id": 102956031, "body": "try <code>wantcompliment = gets.to_s.strip</code>, basically you should get rid of the line breaker."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 795, "user_id": 3662748, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8acc15309c4109ea00f420a59be35a47?s=128&d=identicon&r=PG&f=1", "display_name": "sam", "link": "https://stackoverflow.com/users/3662748/sam"}, "edited": false, "score": 2, "creation_date": 1570589765, "post_id": 58296274, "comment_id": 102956174, "body": "@sam, here <code>gets</code> returns a string, so <code>.to_s</code> is of questionable value. <code>chomp</code> is normally used to remove only the newline; <code>strip</code> is for removing whitespace at both the beginning and the end of the string returned by <code>gets</code>."}, {"owner": {"reputation": 795, "user_id": 3662748, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8acc15309c4109ea00f420a59be35a47?s=128&d=identicon&r=PG&f=1", "display_name": "sam", "link": "https://stackoverflow.com/users/3662748/sam"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1570589974, "post_id": 58296274, "comment_id": 102956200, "body": "@CarySwoveland yeah, you are right, according to the code, It&#39;s better to get rid of those white space around the actual characters when comparing to &quot;yes&quot; string."}], "answers": [{"tags": [], "owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "is_accepted": true, "score": 2, "last_activity_date": 1570589023, "creation_date": 1570589023, "answer_id": 58296342, "question_id": 58296274, "link": "https://stackoverflow.com/questions/58296274/is-there-any-way-to-get-my-while-loop-to-work-with-a-string-in-ruby/58296342#58296342", "title": "Is there any way to get my while loop to work with a string in ruby?", "body": "<p>a string returned by <code>gets</code> has a newline appended:</p>\n\n<pre><code>irb(main):002:0&gt; gets\nyes\n=&gt; \"yes\\n\"\n</code></pre>\n\n<p>You can just use <code>gets.chomp</code> instead, this will remove that trailing <code>\\n</code> char:</p>\n\n<pre><code>irb(main):003:0&gt; gets.chomp\nyes\n=&gt; \"yes\"\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 12185478, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-UrRS6R2P5Eo/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3re4DwYXD1JgDRhaS7_H3suFk_Vnqw/photo.jpg?sz=128", "display_name": "Miller", "link": "https://stackoverflow.com/users/12185478/miller"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 0, "closed_date": 1570618700, "accepted_answer_id": 58296342, "answer_count": 1, "score": 0, "last_activity_date": 1570589023, "creation_date": 1570588367, "question_id": 58296274, "link": "https://stackoverflow.com/questions/58296274/is-there-any-way-to-get-my-while-loop-to-work-with-a-string-in-ruby", "closed_reason": "Duplicate", "title": "Is there any way to get my while loop to work with a string in ruby?", "body": "<p>My problem is i am trying to write a fairly simple program where it asks the user if they would like to receive a compliment. The user can then enter a 'yes' or 'no'. I have a while loop that detects if the user says yes, then execute. However, it seems the code is just skipping right over it.</p>\n\n<p>I've tried to get rid of .downcase and I have tried .upcase. It does work with integers, just not strings. I changed the == to 1 and set it as true and it executed perfectly fine. It just happens with string values, even when I use if statements.</p>\n\n<p>Input:</p>\n\n<pre><code>compliment = Array.new\ncompliment[0] = \"You look absolutely stunning right now!\"\ncompliment[1] = \"It's always a blast to hang out with you!\"\n\n\nprint \"Do you want a compliment?\"\nwantcompliment = gets.to_s\nsize = compliment.size\n\nwhile (wantcompliment.downcase == 'yes')\n  x = rand(size)\n  xplusone = x + 1\n  puts compliment[x]\n  puts ''\n  puts \"You got compliment \" + xplusone.to_s + \" out of \" + size.to_s\n  print \"Would you like another compliment?\"\n  wantcompliment = gets.to_s\nend\nputs wantcompliment.downcase #Debug\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>C:\\Ruby26-x64\\bin\\ruby.exe C:/Users/test/RubymineProjects/Project5/Compliment.rb\nDo you want a compliment?Yes\nyes\n\nProcess finished with exit code 0\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 0, "creation_date": 1570590925, "post_id": 58296080, "comment_id": 102956349, "body": "Shows the errors from your server console... It looks like you&#39;re trying to call <code>student_courses</code> on a class and not an instance."}], "answers": [{"comments": [{"owner": {"reputation": 292, "user_id": 12132097, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gtb2S.jpg?s=128&g=1", "display_name": "Joaqu&#237;n", "link": "https://stackoverflow.com/users/12132097/joaqu%c3%adn"}, "edited": false, "score": 0, "creation_date": 1570592117, "post_id": 58296607, "comment_id": 102956562, "body": "THANKS you so much &lt;3, thats resolve all the problem and now i can create data in the console"}], "tags": [], "owner": {"reputation": 13378, "user_id": 1430810, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/v669u.jpg?s=128&g=1", "display_name": "arieljuod", "link": "https://stackoverflow.com/users/1430810/arieljuod"}, "is_accepted": true, "score": 2, "last_activity_date": 1570591354, "creation_date": 1570591354, "answer_id": 58296607, "question_id": 58296080, "link": "https://stackoverflow.com/questions/58296080/undefined-local-variable-or-method-student-courses-for-class0x000055ee7729d/58296607#58296607", "title": "undefined local variable or method `student_courses&#39; for #&lt;Class:0x000055ee7729d680&gt; after creating a model", "body": "<p>The association is configured using a symbol</p>\n\n<pre><code>has_many :courses, through: :student_courses\n</code></pre>\n\n<p>note the \":\" before \"student_courses\"</p>\n"}], "owner": {"reputation": 292, "user_id": 12132097, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gtb2S.jpg?s=128&g=1", "display_name": "Joaqu&#237;n", "link": "https://stackoverflow.com/users/12132097/joaqu%c3%adn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 36, "favorite_count": 0, "accepted_answer_id": 58296607, "answer_count": 1, "score": 0, "last_activity_date": 1570591354, "creation_date": 1570586494, "last_edit_date": 1570589733, "question_id": 58296080, "link": "https://stackoverflow.com/questions/58296080/undefined-local-variable-or-method-student-courses-for-class0x000055ee7729d", "title": "undefined local variable or method `student_courses&#39; for #&lt;Class:0x000055ee7729d680&gt; after creating a model", "body": "<p>i created a model called <code>Student Courses</code> and then i migrate the database,the page was working well before doing that and i was trying to create a has_many model for my databasei created a model called <code>StudentCourses</code> and then i migrated the database, before thoing that the page were working</p>\n\n<p>i used Scaffold to create Student with name, last name and email, the same for courses but courses only have a name for it</p>\n\n<p>Student:</p>\n\n<pre><code>class Student &lt; ApplicationRecord\n    has_many :student_courses\n    has_many :courses, through: student_courses\nend\n</code></pre>\n\n<p>Course:</p>\n\n<pre><code>class Course &lt; ApplicationRecord\n    has_many :student_courses\n    has_many :students, through: student_courses\nend\n</code></pre>\n\n<p>this is my StudentCourse model:</p>\n\n<pre><code>class StudentCourse &lt; ApplicationRecord\n  belongs_to :student\n  belongs_to :course\nend\n</code></pre>\n\n<p>the problem must be in my Student controller?</p>\n"}, {"tags": ["ruby", "self"], "comments": [{"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 1, "creation_date": 1570594175, "post_id": 58296007, "comment_id": 102956916, "body": "(1) it isn&#39;t that simple in JavaScript, consider <code>Function.prototype.bind</code> or <code>Function.prototype.call</code> or arrow functions. (2) <code>f = -&gt;{}; f.binding.receiver</code> might be worth looking at and then <a href=\"https://ruby-doc.org\" rel=\"nofollow noreferrer\">ruby-doc.org</a>."}], "answers": [{"comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1570604103, "post_id": 58297653, "comment_id": 102959860, "body": "I like your object ids :-)"}, {"owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "edited": false, "score": 0, "creation_date": 1570615510, "post_id": 58297653, "comment_id": 102965931, "body": "In a nutshell; <code>self</code> inside lambdas, procs and blocks without special trickery behave the same as <code>this</code> in a JavaScript arrow function."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "reply_to_user": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "edited": false, "score": 0, "creation_date": 1570615704, "post_id": 58297653, "comment_id": 102966029, "body": "@3limin4t0r: Yes, the changes to the scoping of <code>this</code> in arrow functions (as opposed to simply making arrow functions syntactic sugar for function expressions) were introduced because that behavior is the &quot;sane&quot; behavior, which not only Ruby but most languages with closures have."}], "tags": [], "owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "is_accepted": true, "score": 6, "last_activity_date": 1570599322, "creation_date": 1570599322, "answer_id": 58297653, "question_id": 58296007, "link": "https://stackoverflow.com/questions/58296007/how-does-ruby-resolve-the-self-keyword-in-lambda-or-block/58297653#58297653", "title": "How does ruby resolve the `self` keyword in lambda or block?", "body": "<p>In Ruby, <code>self</code> is lexically scoped, i.e. <code>self</code> inside a block or lambda is whatever it would be at that same place without being in a block or lambda.</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>class &lt;&lt; foo = Object.new\n  def bar\n    puts \"`self` inside `foo#bar` is #{self.inspect}\"\n    yield self\n  end\nend\n\nthis = self\n\nfoo.bar do |that|\n  puts \"`self` inside the block is #{self.inspect}\"\n  case\n  when this.equal?(self)\n    puts \"\u2026 which is the same as outside the block.\"\n  when that.equal?(self)\n    puts \"\u2026 which is the same as inside the method.\"\n  else\n    puts \"Ruby is really weird, `self` is something completely different!\"\n  end\nend\n\n# `self` inside `foo#bar` is #&lt;Object:0xdeadbeef48151623&gt;\n# `self` inside the block is main\n# \u2026 which is the same as outside the block.\n</code></pre>\n\n<p>This also applies to lambdas:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>class &lt;&lt; foo = Object.new\n  def bar(lambda)\n  #      \u2191\u2191\u2191\u2191\u2191\u2191\u2191\u2191\n    puts \"`self` inside `foo#bar` is #{self.inspect}\"\n    lambda.(self)\n    #\u2191\u2191\u2191\u2191\u2191\u2191\u2191\u2191\u2191\u2191\u2191\u2191\n  end\nend\n\nthis = self\n\nfoo.bar(-&gt; that do\n  #    \u2191\u2191\u2191\u2191\u2191\u2191\u2191\u2191\n  puts \"`self` inside the lambda is #{self.inspect}\"\n  case\n  when this.equal?(self)\n    puts \"\u2026 which is the same as outside the lambda.\"\n  when that.equal?(self)\n    puts \"\u2026 which is the same as inside the method.\"\n  else\n    puts \"Ruby is really weird, `self` is something completely different!\"\n  end\nend)\n\n# `self` inside `foo#bar` is #&lt;Object:0xdeadbeef48151623&gt;\n# `self` inside the lambda is main\n# \u2026 which is the same as outside the lambda.\n</code></pre>\n\n<p>There <em>are</em>, however, a fixed number of very specific reflective methods that <em>do</em> change <code>self</code>, those are the methods in the <code>*_{exec|eval}</code> family:</p>\n\n<ul>\n<li><a href=\"https://ruby-doc.org/core/BasicObject.html#method-i-instance_exec\" rel=\"noreferrer\"><code>BasicObject#instance_exec</code></a></li>\n<li><a href=\"https://ruby-doc.org/core/Module.html#method-i-module_exec\" rel=\"noreferrer\"><code>Module#module_exec</code></a></li>\n<li><a href=\"https://ruby-doc.org/core/BasicObject.html#method-i-instance_eval\" rel=\"noreferrer\"><code>BasicObject#instance_eval</code></a></li>\n<li><a href=\"https://ruby-doc.org/core/Module.html#method-i-module_eval\" rel=\"noreferrer\"><code>Module#module_eval</code></a></li>\n<li><a href=\"https://ruby-doc.org/core/Module.html#method-i-class_eval\" rel=\"noreferrer\"><code>Class#module_eval</code></a></li>\n</ul>\n\n<p>Example (changing only one relevant line from above):</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>class &lt;&lt; foo = Object.new\n  def bar(&amp;blk)\n  #      \u2191\u2191\u2191\u2191\u2191\u2191\n    puts \"`self` inside `foo#bar` is #{self.inspect}\"\n    instance_exec(self, &amp;blk)\n    #\u2191\u2191\u2191\u2191\u2191\u2191\u2191\u2191\u2191\u2191\u2191\u2191\u2191\u2191\u2191\u2191\u2191\u2191\u2191\u2191\u2191\u2191\u2191\u2191\n  end\nend\n\nthis = self\n\nfoo.bar do |that|\n  puts \"`self` inside the block is #{self.inspect}\"\n  case\n  when this.equal?(self)\n    puts \"\u2026 which is the same as outside the block.\"\n  when that.equal?(self)\n    puts \"\u2026 which is the same as inside the method.\"\n  else\n    puts \"Ruby is really weird, `self` is something completely different!\"\n  end\nend\n\n# `self` inside `foo#bar` is #&lt;Object:0xdeadbeef48151623&gt;\n# `self` inside the block is #&lt;Object:0xdeadbeef48151623&gt;\n# \u2026 which is the same as inside the method.\n#                        \u2191\u2191\u2191\u2191\u2191\u2191\u2191\u2191\u2191\u2191\u2191\u2191\u2191\u2191\u2191\u2191\u2191\u2191\n</code></pre>\n\n<p>This also applies to lambdas (converted to blocks):</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>foo.bar(&amp;-&gt; that do\n  #    \u2191\u2191\u2191\u2191\u2191\u2191\u2191\u2191\n  puts \"`self` inside the lambda is #{self.inspect}\"\n  case\n  when this.equal?(self)\n    puts \"\u2026 which is the same as outside the lambda.\"\n  when that.equal?(self)\n    puts \"\u2026 which is the same as inside the method.\"\n  else\n    puts \"Ruby is really weird, `self` is something completely different!\"\n  end\nend)\n\n# `self` inside `foo#bar` is #&lt;Object:0xdeadbeef48151623&gt;\n# `self` inside the lambda is #&lt;Object:0xdeadbeef48151623&gt;\n# \u2026 which is the same as inside the method.\n#                        \u2191\u2191\u2191\u2191\u2191\u2191\u2191\u2191\u2191\u2191\u2191\u2191\u2191\u2191\u2191\u2191\u2191\u2191\n</code></pre>\n\n<p>Lastly, Ruby allows you to reflectively reify the lexical environment at a specific call-site into a <a href=\"https://ruby-doc.org/core/Binding.html\" rel=\"noreferrer\"><code>Binding</code></a> object. You can then, in turn, evaluate code in the context of this specific binding using either the binding's <a href=\"https://ruby-doc.org/core/Binding.html#method-i-eval\" rel=\"noreferrer\"><code>Binding#eval</code></a> method or by passing the binding object to <a href=\"https://ruby-doc.org/core/Kernel.html#method-i-eval\" rel=\"noreferrer\"><code>Kernel#eval</code></a>:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>class &lt;&lt; foo = Object.new\n  def bar(str)\n    puts \"`self` inside `foo#bar`         is #{self.inspect}\"\n    binding.eval(str)\n    #\u2191\u2191\u2191\u2191\u2191\u2191\u2191\u2191\u2191\u2191\u2191\u2191\u2191\u2191\u2191\u2191\n  end\nend\n\n$this = self\n\nfoo.bar &lt;&lt;~'HERE'\n  puts \"`self` inside the eval'd string is #{self.inspect}\"\n  if $this.equal?(self)\n    puts \"\u2026 which is the same as outside the eval'd string.\"\n  end\nHERE\n\n# `self` inside `foo#bar`         is #&lt;Object:0x0070070070070070&gt;\n# `self` inside the eval'd string is #&lt;Object:0x0070070070070070&gt;\n</code></pre>\n\n<p><code>self</code> is one of three <em>implicit contexts</em> in Ruby:</p>\n\n<ul>\n<li><code>self</code></li>\n<li>the <em>default definee</em></li>\n<li>constant lookup context</li>\n</ul>\n\n<p>There is a nice blog article by yugui, which mostly talks about the default definee but also touches briefly on <code>self</code>: <a href=\"https://blog.yugui.jp/entry/846\" rel=\"noreferrer\"><em>Three implicit contexts in Ruby</em></a>. There is also an older article in Japanese which goes into a little more detail: <a href=\"https://blog.yugui.jp/entry/558\" rel=\"noreferrer\"><em>Ruby\u306e\u547c\u3073\u51fa\u3057\u53ef\u80fd\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306e\u6bd4\u8f03 (3) - \u306a\u3093\u304bklass\u306e\u8a71</em></a>.</p>\n"}], "owner": {"reputation": 4873, "user_id": 3577446, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/fc0e68b2aefe3a88efac737686282f09?s=128&d=identicon&r=PG&f=1", "display_name": "yaquawa", "link": "https://stackoverflow.com/users/3577446/yaquawa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 280, "favorite_count": 1, "accepted_answer_id": 58297653, "answer_count": 1, "score": 2, "last_activity_date": 1570599322, "creation_date": 1570585835, "last_edit_date": 1570586197, "question_id": 58296007, "link": "https://stackoverflow.com/questions/58296007/how-does-ruby-resolve-the-self-keyword-in-lambda-or-block", "title": "How does ruby resolve the `self` keyword in lambda or block?", "body": "<p>Just like JavaScript, in ruby, lambda can be passed over functions.</p>\n\n<p>In JavaScript <code>this</code> will be resolved as the caller object.</p>\n\n<p>But what about ruby? Does the same mechanism applied to ruby's lambda or block too? How? Can you give me some example code?</p>\n\n<p>By the way I've read the <a href=\"https://rads.stackoverflow.com/amzn/click/com/0596516177\" rel=\"nofollow noreferrer\" rel=\"nofollow noreferrer\">The Ruby Programming Language</a>, but I couldn't find any helpful info from it..</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "nomethoderror"], "answers": [{"tags": [], "owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "is_accepted": false, "score": 2, "last_activity_date": 1570577390, "last_edit_date": 1570577390, "creation_date": 1570577053, "answer_id": 58295156, "question_id": 58295097, "link": "https://stackoverflow.com/questions/58295097/nomethoderror-in-usercontrollerregister-undefined-method-save-for-nilnilclas/58295156#58295156", "title": "NoMethodError in UserController#register undefined method `save&#39; for nil:NilClass", "body": "<p>Try to understand what the error message is saying.  You're trying to call <code>.save</code> on <code>@user</code> but where you are calling it, <code>@user</code> may not be defined.  The problem is you can't call <code>.save</code> on a nil object so it throws <code>NoMethodError</code>.</p>\n\n<p>You're logic is incorrect so you must first make sure <code>@user</code> is instantiating a new <code>User</code> instance. It should be more like this: </p>\n\n<pre><code>def register\n  @title = \"Register\"\n  if request.post? &amp;&amp; params[:user]\n    @user = User.new(user_params)\n    if @user.save\n      flash[:notice] = \"User #{@user.screen_name} created!\"\n      redirect_to :action =&gt; \"index\"\n    else\n      # handle erorrs here\n      flash[:alert] = \"Please fix errors: #{@user.errors.full_messages.inspect}\"\n      redirect_to :back #this may need to change depending, just an example.\n    end\n  end\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 19, "user_id": 4117966, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdfda8ed1b75f6053292106588d156af?s=128&d=identicon&r=PG&f=1", "display_name": "NoobCoder", "link": "https://stackoverflow.com/users/4117966/noobcoder"}, "is_accepted": false, "score": 0, "last_activity_date": 1570612465, "creation_date": 1570612465, "answer_id": 58300799, "question_id": 58295097, "link": "https://stackoverflow.com/questions/58295097/nomethoderror-in-usercontrollerregister-undefined-method-save-for-nilnilclas/58300799#58300799", "title": "NoMethodError in UserController#register undefined method `save&#39; for nil:NilClass", "body": "<p><code>NoMethodError in UserController#register undefined method 'save' for nil:NilClass</code></p>\n\n<p>The error is thrown because you are calling <code>save</code> on a <code>nil</code>; and it is because <code>nil</code> object does not have this method. the <code>save</code> is a instance method belonging to <code>ActiveRecord::Base</code> class.</p>\n\n<p>The reason <code>@user</code> is nil is because <code>@user</code> is an instance variable in the <code>UserController</code> class which you have not given it any value. Any variable starting with <code>@</code> inside a class is an instance variable in Ruby. </p>\n\n<p>To solve this problem, you should set a value to <code>@user</code>, and in this case it should be a <code>User</code> instance. You can either create a new user object by doing <code>@user = User.new(user_params)</code> or you fetch a record from the Database by doing <code>@user = User.find(&lt;some_id&gt;)</code></p>\n"}], "owner": {"reputation": 35, "user_id": 12177861, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Ziym7Sw9M4U/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rf33P_m4XlTE5nWZqbY8KrAfxeVuQ/photo.jpg?sz=128", "display_name": "shubuya hushimo", "link": "https://stackoverflow.com/users/12177861/shubuya-hushimo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 137, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1570612465, "creation_date": 1570576446, "last_edit_date": 1570587597, "question_id": 58295097, "link": "https://stackoverflow.com/questions/58295097/nomethoderror-in-usercontrollerregister-undefined-method-save-for-nilnilclas", "title": "NoMethodError in UserController#register undefined method `save&#39; for nil:NilClass", "body": "<p>Trying to learn ruby on rails following Michael Hartl's tutorial, when I try to go to the registration page in the book I get this:</p>\n\n<blockquote>\n  <p>NoMethodError in UserController#register\n  undefined method `save' for nil:NilClass</p>\n</blockquote>\n\n<p>here is the code from the user_controller.rb file:</p>\n\n<pre><code>   class UserController &lt; ApplicationController\n    def index\n     @title = \"RailsSpace User Hub\"\n     end\n\n     def register\n     @title = \"Register\"\n     if request.post? and params[:user]\n    @user = User.new(user_params)\n    end\n    if @user.save\n    flash[:notice] = \"User #{@user.screen_name} created!\"\n    redirect_to :action =&gt; \"index\"\n   end\n  end\n\n  private\n\n  def user_params\n  # Add the user attributes that you sent with post (form) to the permit \n   method.\n  params.require(:user).permit(:name, :screen_name)\n  end\nend\n</code></pre>\n\n<p>It's complaining about line 11 where it says: <code>if @user.save</code> I'm just following the tutorial I don't know what's going on.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5", "bcrypt", "bcrypt-ruby"], "comments": [{"owner": {"reputation": 135, "user_id": 9011983, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/71412d045963c1fdaa41d46073e6e17b?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/9011983/daniel"}, "edited": false, "score": 0, "creation_date": 1570652561, "post_id": 58294972, "comment_id": 102984618, "body": "I did some more digging on <code>has_secure_password</code> and tried to disable the default validations by sending <code>validations: false</code> but this had no impact on the error."}], "answers": [{"comments": [{"owner": {"reputation": 135, "user_id": 9011983, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/71412d045963c1fdaa41d46073e6e17b?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/9011983/daniel"}, "edited": false, "score": 0, "creation_date": 1570648521, "post_id": 58296647, "comment_id": 102983061, "body": "I&#39;ve tried making this change but it had no impact on the error returned.  I also tried moving the validation into that hash instead of setting it as a variable, but that also had no impact."}], "tags": [], "owner": {"reputation": 13378, "user_id": 1430810, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/v669u.jpg?s=128&g=1", "display_name": "arieljuod", "link": "https://stackoverflow.com/users/1430810/arieljuod"}, "is_accepted": false, "score": 0, "last_activity_date": 1570591650, "creation_date": 1570591650, "answer_id": 58296647, "question_id": 58294972, "link": "https://stackoverflow.com/questions/58294972/cant-verify-csrf-token-authenticity-with-custom-password-requirements/58296647#58296647", "title": "Can&#39;t verify CSRF token authenticity with Custom Password Requirements", "body": "<p>Try adding the validation as a hash with the <code>:with</code> key</p>\n\n<pre><code>validates :password, format: {with: PASSWORD_CONFIRMATION}\n</code></pre>\n\n<p><a href=\"https://guides.rubyonrails.org/active_record_validations.html#format\" rel=\"nofollow noreferrer\">https://guides.rubyonrails.org/active_record_validations.html#format</a></p>\n"}, {"tags": [], "owner": {"reputation": 135, "user_id": 9011983, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/71412d045963c1fdaa41d46073e6e17b?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/9011983/daniel"}, "is_accepted": true, "score": 0, "last_activity_date": 1570752694, "creation_date": 1570752694, "answer_id": 58332615, "question_id": 58294972, "link": "https://stackoverflow.com/questions/58294972/cant-verify-csrf-token-authenticity-with-custom-password-requirements/58332615#58332615", "title": "Can&#39;t verify CSRF token authenticity with Custom Password Requirements", "body": "<p>There were two things I had to tweak.  Firstly, I needed to pass the <code>validations false</code> flag in my registration model, so <code>has_secure_password</code> became <code>has_secure_password :validations =&gt; false</code>.</p>\n\n<p>Secondly I was calling the wrong field name on <code>password</code> in the model.  By calling the <code>PASSWORD_CONFIRMATION</code> variable on <code>password_digest</code> instead of <code>password</code>, my login started to work.</p>\n"}], "owner": {"reputation": 135, "user_id": 9011983, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/71412d045963c1fdaa41d46073e6e17b?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/9011983/daniel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 160, "favorite_count": 0, "accepted_answer_id": 58332615, "answer_count": 2, "score": 0, "last_activity_date": 1570752694, "creation_date": 1570575322, "question_id": 58294972, "link": "https://stackoverflow.com/questions/58294972/cant-verify-csrf-token-authenticity-with-custom-password-requirements", "title": "Can&#39;t verify CSRF token authenticity with Custom Password Requirements", "body": "<p>I have a Rails 5 API and I'm setting up authentication.  I have added some custom password requirements, and everything works for account creation and logging an account out, but I get a <code>Completed 422 Unprocessable Entity</code> error that goes along with a <code>Can't verify CSRF token authenticity</code> message whenever I try to log a user in.  When I remove the line setting the custom password validation, everything works.</p>\n\n<p>I've added <code>protect_from_forgery with: :null_session</code> to my sessions controller but it had no impact.  </p>\n\n<p>Registration Model:  </p>\n\n<pre><code>class Registration &lt; ApplicationRecord\n  @username_length = (3..20)\n\n  PASSWORD_CONFIRMATION = /\\A\n    (?=.{8,})          # Must contain 8 or more characters\n    (?=.*\\d)           # Must contain a digit\n    (?=.*[a-z])        # Must contain a lower case character\n    (?=.*[A-Z])        # Must contain an upper case character\n    (?=.*[[:^alnum:]]) # Must contain a symbol\n  /x\n\n  validates :username, uniqueness: true, length: @username_length\n  has_secure_password\n  validates :password, format: PASSWORD_CONFIRMATION\n  has_secure_token :auth_token\n\n  #used to logout\n  def invalidate_token\n    self.update_columns(auth_token: nil)\n  end\n\n  # makes sure use of built-in auth method bcrypt gives and hashes the password\n  # against the password_digest in the db\n  def self.validate_login(username, password)\n    registration = find_by(username: username)\n    if registration &amp;&amp; registration.authenticate(password)\n      registration\n    end\n  end\nend\n</code></pre>\n\n<p>Sessions Controller</p>\n\n<pre><code>class SessionsController &lt; ApiController\n  skip_before_action :require_login, only: [:create], raise: false\n  protect_from_forgery with: :null_session\n\n  def create\n    if registration = Registration.validate_login(params[:username], params[:password])\n      allow_token_to_be_used_only_once_for(registration)\n      send_token_for_valid_login_of(registration)\n    else\n      render_unauthorized('Error with your login or password')\n    end\n  end\n\n  def destroy\n    logout\n    head :ok\n  end\n\n  private\n\n  def send_token_for_valid_login_of(registration)\n    render json: { token: registration.auth_token }\n  end\n\n  def allow_token_to_be_used_only_once_for(registration)\n    registration.regenerate_auth_token\n  end\n\n  def logout\n    current_registration.invalidate_token\n  end\nend\n</code></pre>\n\n<p>Registration Controller</p>\n\n<pre><code>class RegistrationController &lt; ApplicationController\n  skip_before_action :verify_authenticity_token\n\n  def index; end\n\n  def custom\n    user = Registration.create!(registration_params)\n    puts \"NEW USER #{user}\"\n    render json: { token: user.auth_token, id: user.id }\n  end\n\n  def profile\n    user = Registration.find_by_auth_token!(request.headers[:token])\n    render json: {\n      user: { username: user.username, email: user.email, name: user.name }\n    }\n  end\n\n  private\n\n  def registration_params\n    params.require(:registration).permit(:username, :email, :password, :name)\n  end\nend\n\n</code></pre>\n\n<p>Ideally, logging in should return a 200 message with an auth token as it does for account creation.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 15423, "user_id": 2069350, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/4EnA0.png?s=128&g=1", "display_name": "Henry Keiter", "link": "https://stackoverflow.com/users/2069350/henry-keiter"}, "edited": false, "score": 2, "creation_date": 1570577240, "post_id": 58294955, "comment_id": 102953990, "body": "You&#39;ll want some Controller tests (hint: <code>rspec.describe PostsController, type: :controller</code>), where you can test controller endpoints. Take a look at the docs: <a href=\"https://relishapp.com/rspec/rspec-rails/v/3-9/docs/controller-specs/controller-spec\" rel=\"nofollow noreferrer\">relishapp.com/rspec/rspec-rails/v/3-9/docs/controller-specs/&zwnj;&#8203;&hellip;</a>"}, {"owner": {"reputation": 13378, "user_id": 1430810, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/v669u.jpg?s=128&g=1", "display_name": "arieljuod", "link": "https://stackoverflow.com/users/1430810/arieljuod"}, "edited": false, "score": 2, "creation_date": 1570590179, "post_id": 58294955, "comment_id": 102956233, "body": "What do you mean by &quot;test if it works&quot;? you don&#39;t need to test that some objects gets destroyed when you call <code>destroy</code> on it, activerecords takes care of testing that. You can be confident that calling <code>destroy</code> on an object just works. What you may have is some before_destroy callback and you may want to test that, but your current example does not need to be tested. Also, you are showing controller code but model tests."}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "reply_to_user": {"reputation": 15423, "user_id": 2069350, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/4EnA0.png?s=128&g=1", "display_name": "Henry Keiter", "link": "https://stackoverflow.com/users/2069350/henry-keiter"}, "edited": false, "score": 2, "creation_date": 1570615351, "post_id": 58294955, "comment_id": 102965845, "body": "@HenryKeiter The prevailing advice these days is to write <a href=\"https://relishapp.com/rspec/rspec-rails/v/3-9/docs/request-specs/request-spec\" rel=\"nofollow noreferrer\">request specs</a>, not controller specs. (The main reason controller specs aren&#39;t officially deprecated is that there are so many already written in old code bases!). Request specs are basically the same thing, except that you&#39;re testing the <i>full</i> rails stack; including the router."}, {"owner": {"reputation": 15423, "user_id": 2069350, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/4EnA0.png?s=128&g=1", "display_name": "Henry Keiter", "link": "https://stackoverflow.com/users/2069350/henry-keiter"}, "reply_to_user": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 1, "creation_date": 1570645235, "post_id": 58294955, "comment_id": 102981654, "body": "@TomLord Fair enough!"}], "answers": [{"tags": [], "owner": {"reputation": 527, "user_id": 8197386, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-3PsfAC8lxvE/AAAAAAAAAAI/AAAAAAAAAJU/9gierdn8mII/photo.jpg?sz=128", "display_name": "sevensidedmarble", "link": "https://stackoverflow.com/users/8197386/sevensidedmarble"}, "is_accepted": false, "score": 0, "last_activity_date": 1570922445, "creation_date": 1570922445, "answer_id": 58359379, "question_id": 58294955, "link": "https://stackoverflow.com/questions/58294955/testing-destroy-with-rspec/58359379#58359379", "title": "Testing destroy with RSpec", "body": "<p>As pointed out, if you use request specs ( see <a href=\"https://relishapp.com/rspec/rspec-rails/v/3-9/docs/request-specs/request-spec\" rel=\"nofollow noreferrer\">https://relishapp.com/rspec/rspec-rails/v/3-9/docs/request-specs/request-spec</a> ) you can easily call the API that should delete the model, and then do an ActiveRecord query to expect no results.</p>\n\n<pre><code>require \"rails_helper\"\n\nRSpec.describe \"delete thing api\" do\n\n  it \"deletes thing\" do\n\n    // Create a thing with a factory of your choice here\n\n    delete \"/things\", :thing =&gt; {:id =&gt; 1}\n\n    expect(Thing.all.count).to be 0\n  end\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 81, "user_id": 11861477, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-v-HJ9r46Q-4/AAAAAAAAAAI/AAAAAAAABuI/jg6inVnyOeI/photo.jpg?sz=128", "display_name": "jorgedjr21", "link": "https://stackoverflow.com/users/11861477/jorgedjr21"}, "is_accepted": true, "score": 1, "last_activity_date": 1570938501, "creation_date": 1570938501, "answer_id": 58360435, "question_id": 58294955, "link": "https://stackoverflow.com/questions/58294955/testing-destroy-with-rspec/58360435#58360435", "title": "Testing destroy with RSpec", "body": "<p>You can check if the count of thing has change by -1, like this:</p>\n\n<pre><code>expect { delete '/things', :thing =&gt; { :id =&gt; 123'} }.to change(Thing, :count).by(-1)\n</code></pre>\n\n<p>This means that you want to have one less 'thing' and and is ensuring that something has been deleted.</p>\n\n<p>If you want to ensure that specific \"thing\" was deleted, you can create one before the test, pass the \"thing\" id as param, and ensure that this doesn't exists on database, like this:</p>\n\n<pre><code>thing = create(:thing)\ndelete '/things', :thing =&gt; { :id =&gt; thing.id'}\n\nexpect(Thing.find_by(id: thing.id)).to be_nil\n</code></pre>\n"}], "owner": {"reputation": 55, "user_id": 9339576, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-oVqqULEm96A/AAAAAAAAAAI/AAAAAAAAAHg/BAwDnFz-11c/photo.jpg?sz=128", "display_name": "Sebastian", "link": "https://stackoverflow.com/users/9339576/sebastian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 765, "favorite_count": 0, "accepted_answer_id": 58360435, "answer_count": 2, "score": 0, "last_activity_date": 1570938501, "creation_date": 1570575132, "question_id": 58294955, "link": "https://stackoverflow.com/questions/58294955/testing-destroy-with-rspec", "title": "Testing destroy with RSpec", "body": "<p>I have this in controllers </p>\n\n<pre><code>   def destroy\n        @post = Post.find(params[:id])\n        @post.destroy\n    end\n</code></pre>\n\n<p>But I'm lost as to how to actually test if it works. Any pointers would be highly appreciated! I currently have this in my RSpec file: </p>\n\n<pre><code>require 'rails_helper'\n\n\nRSpec.describe Post, type: :model do\n  it \"must have a title\" do\n    post= Post.create\n    expect(post.errors[:title]).to_not be_empty\n  end \n  it \"must have a description\" do\n    post= Post.create\n    expect(post.errors[:description]).to_not be_empty\n  end \n  it \"must have a location\" do\n    post= Post.create\n    expect(post.errors[:location]).to_not be_empty\n  end \n  it \"must have an image\" do\n    post= Post.create\n    expect(post.errors[:image]).to_not be_empty\n  end \n  it \"can be destroyed\" do\n    post= Post.destroy\n\n  end \nend \n</code></pre>\n"}, {"tags": ["arrays", "ruby", "string", "compare"], "comments": [{"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 1, "creation_date": 1570570078, "post_id": 58294166, "comment_id": 102952447, "body": "&quot;Having a bit of trouble with that.&quot; is not a precise enough error description for us to help you. <i>What</i> doesn&#39;t work? <i>How</i> doesn&#39;t it work? What trouble do you have with your code? Do you get an error message? What is the error message? Is the result you are getting not the result you are expecting? What result do you expect and why, what is the result you are getting and how do the two differ? Is the behavior you are observing not the desired behavior? What is the desired behavior and why, what is the observed behavior, and in what way do they differ?"}], "answers": [{"tags": [], "owner": {"reputation": 1892, "user_id": 3158810, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/1ebf9e065f654642fecfee399b439030?s=128&d=identicon&r=PG&f=1", "display_name": "G4143", "link": "https://stackoverflow.com/users/3158810/g4143"}, "is_accepted": false, "score": 0, "last_activity_date": 1570572859, "creation_date": 1570572859, "answer_id": 58294689, "question_id": 58294166, "link": "https://stackoverflow.com/questions/58294166/how-to-compare-letters-in-two-strings-ruby/58294689#58294689", "title": "How to compare letters in two strings Ruby", "body": "<p>I'm not sure which hangman rules you are using but here's a rough draft that allows three failed attempts and works with lowercase characters</p>\n\n<pre><code>def guess_word(word, tries)\n\n    if tries &lt; 1\n        puts \"You are hanged!\"\n    elsif word.empty?\n        puts \"You guessed it! You are saved from the gallows!\"\n    else\n        print \"Enter character: \"\n        c = STDIN.getc.downcase\n        STDIN.getc # get rid of newline\n        if word.index(c).nil?\n            puts \"Ooops, #{c} was wrong!\"\n            guess_word(word, tries - 1)\n        else\n            puts \"#{c} was correct!\"\n            guess_word(word.sub(/[\"#{c}\"]/, ''), tries)\n        end\n    end\n\nend\n\nif __FILE__ == $0\n\n    TRIES = 3\n\n    print \"Enter word to guess: \"\n    word = gets.chomp\n\n    guess_word(word.downcase, 3)    \n\nend\n</code></pre>\n\n<p>This is untested..</p>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 0, "last_activity_date": 1570587139, "last_edit_date": 1592644375, "creation_date": 1570585335, "answer_id": 58295962, "question_id": 58294166, "link": "https://stackoverflow.com/questions/58294166/how-to-compare-letters-in-two-strings-ruby/58295962#58295962", "title": "How to compare letters in two strings Ruby", "body": "<p>The rules of the game <em>hangman</em> are given at its <a href=\"https://en.wikipedia.org/wiki/Hangman_(game)#Strategy\" rel=\"nofollow noreferrer\">Wiki</a>. I've assumed the player trying to guess the word loses when all seven parts of the man on the gallows have been drawn (head, neck, left arm, body, right arm, left leg, right leg).</p>\n<p><strong>Helper methods</strong></p>\n<p><em>Draw the man being hanged</em></p>\n<p>First create a hash that can be used to draw the partial or full hangman:</p>\n<pre><code>MAN = [&quot; O\\n&quot;, &quot; |\\n&quot;, &quot;\\\\&quot;, &quot;|&quot;, &quot;/\\n&quot;, &quot; |\\n/&quot;, &quot; \\\\&quot;].\n  map.each_with_object([&quot;&quot;]) { |s,arr| arr &lt;&lt; (arr.last + s) }.\n      each.with_index.with_object({}) { |(s,i),h| h[i] = s }\n</code></pre>\n<p>The keys are the number of incorrect guesses. For example:</p>\n<pre><code>puts MAN[2]\n O\n |\nputs MAN[6]\n O\n |\n\\|/\n |\n/\n</code></pre>\n<p><em>Keep track of the positions of the letters of the word</em></p>\n<p>Next create a hash whose keys are unique letters of the secret word and whose values are arrays of indices of the keys location(s) in the word.</p>\n<pre><code>def construct_unknown(word)\n  word.each_char.with_index.with_object({}) { |(c,i),h| (h[c] ||= []) &lt;&lt; i }\nend\n</code></pre>\n<p>For example,</p>\n<pre><code>unknown = construct_unknown(&quot;beetle&quot;)\n  #=&gt; {&quot;b&quot;=&gt;[0], &quot;e&quot;=&gt;[1, 2, 5], &quot;t&quot;=&gt;[3], &quot;l&quot;=&gt;[4]}\n</code></pre>\n<p>We will also create an empty hash for letters whose positions are known:</p>\n<pre><code>known = {}\n</code></pre>\n<p><em>Move guessed letters from the hash <code>unknown</code> to the hash <code>known</code></em></p>\n<p>If a letter that is guessed is a key of <code>unknown</code> that key and value are moved to <code>known</code>.</p>\n<pre><code>def move_unknown_to_known(letter, unknown, known)\n  known.update(letter=&gt;unknown[letter])\n  unknown.delete(letter)\nend\n</code></pre>\n<p>For example (for <code>unknown</code> and <code>known</code> above),</p>\n<pre><code>move_unknown_to_known(&quot;e&quot;, unknown, known)\nunknown #=&gt; {&quot;b&quot;=&gt;[0], &quot;t&quot;=&gt;[3], &quot;l&quot;=&gt;[4]} \nknown   #=&gt; {&quot;e&quot;=&gt;[1, 2, 5]} \n</code></pre>\n<p><em>See if the guesser has won or lost</em></p>\n<p>We to determine when, after guessing a letter, the player has won or lost, or is to continue:</p>\n<pre><code>def win?(word_size, known)\n  known.values.flatten.sum == word_size\nend\n\ndef lose?(wrong_guess_count)\n  wrong_guess_count == HANGMAN.size\nend\n</code></pre>\n<p>For example,</p>\n<pre><code>win?(word.size, known)\n  #=&gt; false\n\nlose?(6) #=&gt; false\nlose?(7) #=&gt; true\n</code></pre>\n<p><em>Display the known letters</em></p>\n<pre><code>def display_known(word_size, known)\n  known.each_with_object('_' * word_size) { |(k,a),s| a.each { |i| s[i] = k } }\nend\n</code></pre>\n<p>For example (recall <code>word #=&gt; &quot;beetle&quot;</code>),</p>\n<pre><code>puts display_known(word.size, known)\n_ee__e\n</code></pre>\n<p><strong>Main method</strong></p>\n<p>We are now ready to write the main method.</p>\n<pre><code>def hangman\n  puts &quot;Player 2, please avert your eyes for a moment.&quot;\n  print &quot;Player 1: enter a secret word with at least two letters: &quot;\n  word = gets.chomp.downcase\n  unknown = construct_unknown(word)\n  known = {}\n  wrong_guess_count = 0\n  loop do\n    puts display_known(word.size, known)\n    puts MAN[wrong_guess_count] if wrong_guess_count &gt; 0\n    if win?(word.size, known)\n      puts &quot;You win! You win! Congratulations!&quot;\n      break  \n    end\n    if lose?(wrong_guess_count)\n      puts &quot;Sorry, but you've run out of guesses&quot;\n      break\n    end \n    print &quot;Player 2: enter a letter or your guess of the word: &quot;\n    guess = gets.chomp.downcase\n    if guess.size &gt; 1\n      if guess == word\n        puts word\n        puts &quot;You win! You win! Congratulations!&quot;\n        break\n      else\n        puts &quot;Sorry, that's not the word&quot;\n        wrong_guess_count += 1\n      end\n    elsif unknown.key?(guess)\n      nbr = unknown[guess].size\n      puts nbr == 1 ? &quot;There is 1 #{guess}&quot; : &quot;There are #{nbr} #{guess}'s&quot;\n      move_unknown_to_known(guess, unknown, known)                   \n    else\n      puts &quot;Sorry, the word contains no #{guess}'s&quot;\n      wrong_guess_count += 1\n    end\n  end\nend  \n</code></pre>\n<p><strong>Example</strong></p>\n<p>After explaining the rules to the two players and to the audience, the guest host ends by saying, &quot;And don't forget, when guessing a letter or the word it must be expressed as a question...one moment...hold that...I've been told it is not necessary to frame that as a question&quot;.</p>\n<p>Suppose the word is <code>beetle</code> and the letter guesses are <code>'t'</code>, <code>'i'</code>, <code>'a'</code>, <code>'l'</code>, <code>'r'</code>, <code>'s'</code>, <code>'t'</code>, <code>'u'</code>, <code>'e'</code>, <code>'beetle'</code>.</p>\n<h1><p></p></h1>\n<pre><code>hangman\n</code></pre>\n<h1><p></p></h1>\n<pre><code>Player 2, please avert your eyes for a moment.\n</code></pre>\n<h1><p></p></h1>\n<pre><code>Player 1: enter a secret word with at least two letters: beetle\n______\n</code></pre>\n<h1><p></p></h1>\n<pre><code>Player 2: enter a letter or your guess of the word: t\nThere is 1 t\n___t__\n</code></pre>\n<h1><p></p></h1>\n<pre><code>Player 2: enter a letter or your guess of the word: i\nSorry, the word contains no i's\n___t__\n O\n</code></pre>\n<h1><p></p></h1>\n<pre><code>Player 2: enter a letter or your guess of the word: a\nSorry, the word contains no a's\n___t__\n O\n |\n</code></pre>\n<h1><p></p></h1>\n<pre><code>Player 2: enter a letter or your guess of the word: l\nThere is 1 l\n___tl_\n O\n |\n</code></pre>\n<h1><p></p></h1>\n<pre><code>Player 2: enter a letter or your guess of the word: r\nSorry, the word contains no r's\n___tl_\n O\n |\n\\\n</code></pre>\n<h1><p></p></h1>\n<pre><code>Player 2: enter a letter or your guess of the word: s\nSorry, the word contains no s's\n___tl_\n O\n |\n\\|\n</code></pre>\n<h1><p></p></h1>\n<pre><code>Player 2: enter a letter or your guess of the word: t\nSorry, the word contains no t's\n___tl_\n O\n |\n\\|/\n</code></pre>\n<h1><p></p></h1>\n<pre><code>Player 2: enter a letter or your guess of the word: u\nSorry, the word contains no u's\n___tl_\n O\n |\n\\|/\n |\n/\n</code></pre>\n<h1><p></p></h1>\n<pre><code>Player 2: enter a letter or your guess of the word: e\nThere are 3 e's\n_eetle\n O\n |\n\\|/\n |\n/\n</code></pre>\n<h1><p></p></h1>\n<pre><code>Player 2: enter a letter or your guess of the word: beetle\nbeetle\nYou win! You win! Congratulations!\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 5995549, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d1ccdbf54e89e5dcc6af5d77b46dc2dc?s=128&d=identicon&r=PG&f=1", "display_name": "nmp153", "link": "https://stackoverflow.com/users/5995549/nmp153"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 264, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1570587139, "creation_date": 1570569227, "question_id": 58294166, "link": "https://stackoverflow.com/questions/58294166/how-to-compare-letters-in-two-strings-ruby", "title": "How to compare letters in two strings Ruby", "body": "<p>I am new to ruby and creating a hangman game. Soo far I have my code comparing the words to the correct word. But I want it to compare letters. So basically, if the secrect word is glue, the user enters G it would come inncorrect, but if the user enters glue it would be correct. I need it to compare letter by letter just like hangman. </p>\n\n<p>Having a bit of trouble with that. I have attached my code below. </p>\n\n<pre><code>secret_word = []\nputs \"enter a word to be guessed\"\nsecret_word = gets.chomp\n\n\n\nguess_letters = []\nguess = \"\"\nguess_limit = 3\nguess_count = 0\nout_of_guesses = false\n\nwhile guess != secret_word and !out_of_guesses\n    if guess_count &lt; guess_limit\n    puts \"enter your guess: \"\n    guess = gets.chomp()\n    guess_letters &lt;&lt; guess\n    guess_count +=1\n    puts \"you have used these letters thus far #{guess_letters.join(\", \")}\"\nelse\n    out_of_guesses = true\nend\nend\nif out_of_guesses\n    puts \"you Lose, the word was #{secret_word}\"\nelse\n    puts \"you win\"\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "activeadmin", "hidden-field"], "comments": [{"owner": {"reputation": 1023, "user_id": 3552298, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/8540fb02a16712af1b873b8bd8b6b318?s=128&d=identicon&r=PG&f=1", "display_name": "sureshprasanna70", "link": "https://stackoverflow.com/users/3552298/sureshprasanna70"}, "edited": false, "score": 0, "creation_date": 1570602549, "post_id": 58294132, "comment_id": 102959131, "body": "You should raise this question with the author of the gem or to the community at <a href=\"https://github.com/activeadmin/activeadmin\" rel=\"nofollow noreferrer\">github.com/activeadmin/activeadmin</a>. Since you are new here,this should help <a href=\"https://stackoverflow.com/help/on-topic\">stackoverflow.com/help/on-topic</a>"}, {"owner": {"reputation": 11, "user_id": 6201227, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-qV5fCWS2HV4/AAAAAAAAAAI/AAAAAAAAAjM/h_GBQ093rpA/photo.jpg?sz=128", "display_name": "Sara Carvajal", "link": "https://stackoverflow.com/users/6201227/sara-carvajal"}, "reply_to_user": {"reputation": 1023, "user_id": 3552298, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/8540fb02a16712af1b873b8bd8b6b318?s=128&d=identicon&r=PG&f=1", "display_name": "sureshprasanna70", "link": "https://stackoverflow.com/users/3552298/sureshprasanna70"}, "edited": false, "score": 0, "creation_date": 1570639450, "post_id": 58294132, "comment_id": 102978992, "body": "Oh, sorry, I&#39;ll do that then. Thank you! @sureshprasanna70"}], "owner": {"reputation": 11, "user_id": 6201227, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-qV5fCWS2HV4/AAAAAAAAAAI/AAAAAAAAAjM/h_GBQ093rpA/photo.jpg?sz=128", "display_name": "Sara Carvajal", "link": "https://stackoverflow.com/users/6201227/sara-carvajal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 21, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1570569074, "creation_date": 1570569074, "question_id": 58294132, "link": "https://stackoverflow.com/questions/58294132/why-q-and-page-are-hidden-fields-in-activeadmin", "title": "Why q and page are hidden fields in ActiveAdmin?", "body": "<p>ActiveAdmin (v2.4.0) has a private method called <code>except_hidden_fields</code>:</p>\n\n<pre><code>def except_hidden_fields\n [:q, :page]\nend\n</code></pre>\n\n<p>This means that is not possible to access the params and the page from the ActiveAdmin which can be frustrating sometimes. I wanted to know the reason behind that.</p>\n\n<p>Here's the <a href=\"https://github.com/activeadmin/activeadmin/blob/master/lib/active_admin/filters/forms.rb\" rel=\"nofollow noreferrer\">source code</a>.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 12159557, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c65a030bc6bdb664e5c4ab98231f2deb?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew", "link": "https://stackoverflow.com/users/12159557/andrew"}, "edited": false, "score": 0, "creation_date": 1570719420, "post_id": 58294149, "comment_id": 103010072, "body": "The default action is that Ruby opens up, lists transaction batches it is pulling from Braintree, and creates a file. When I modify the last part of the code with &quot;transaction_report-#{Time.zone.now}.csv&quot;, it opens up Ruby interpreter and closes immediately."}, {"owner": {"reputation": 8640, "user_id": 4055042, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cd04c63d95d27033b53d4d83fea40c02?s=128&d=identicon&r=PG&f=1", "display_name": "SRack", "link": "https://stackoverflow.com/users/4055042/srack"}, "reply_to_user": {"reputation": 1, "user_id": 12159557, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c65a030bc6bdb664e5c4ab98231f2deb?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew", "link": "https://stackoverflow.com/users/12159557/andrew"}, "edited": false, "score": 0, "creation_date": 1570719998, "post_id": 58294149, "comment_id": 103010426, "body": "Ah - that&#39;s my bad @Andrew. <code>Time.zone.now</code> is Rails specific, not available in core Ruby: I&#39;ve updated to use <code>Time.now</code> which should do what you&#39;re after. Let me know how you get on!"}, {"owner": {"reputation": 1, "user_id": 12159557, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c65a030bc6bdb664e5c4ab98231f2deb?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew", "link": "https://stackoverflow.com/users/12159557/andrew"}, "edited": false, "score": 0, "creation_date": 1570826721, "post_id": 58294149, "comment_id": 103051595, "body": "It seems to have the same error as last time. Does Ruby have an issue with doing functions inside quotes?"}, {"owner": {"reputation": 8640, "user_id": 4055042, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cd04c63d95d27033b53d4d83fea40c02?s=128&d=identicon&r=PG&f=1", "display_name": "SRack", "link": "https://stackoverflow.com/users/4055042/srack"}, "reply_to_user": {"reputation": 1, "user_id": 12159557, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c65a030bc6bdb664e5c4ab98231f2deb?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew", "link": "https://stackoverflow.com/users/12159557/andrew"}, "edited": false, "score": 0, "creation_date": 1571650809, "post_id": 58294149, "comment_id": 103298446, "body": "Did you get this working @Andrew? That&#39;s standard string interpolation, so certainly shouldn&#39;t be an issue with the current implementation. Do you get an error message? If so, post in the question and I&#39;ll take a look."}], "tags": [], "owner": {"reputation": 8640, "user_id": 4055042, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cd04c63d95d27033b53d4d83fea40c02?s=128&d=identicon&r=PG&f=1", "display_name": "SRack", "link": "https://stackoverflow.com/users/4055042/srack"}, "is_accepted": false, "score": 0, "last_activity_date": 1570720213, "last_edit_date": 1570720213, "creation_date": 1570569152, "answer_id": 58294149, "question_id": 58294099, "link": "https://stackoverflow.com/questions/58294099/create-timestamped-labels-on-csv-files-ruby-code/58294149#58294149", "title": "Create timestamped labels on csv files (ruby code)", "body": "<p>Like this?</p>\n\n<pre><code>CSV.open(\"transaction_report-#{Time.now}.csv\", \"w\") do |csv|\n  csv &lt;&lt; header_row\n  search_results.each do |transaction|\n    transaction_details_row = header_row.map{ |attribute| transaction.send(attribute) }\n    csv &lt;&lt; transaction_details_row\n  end\nend\n</code></pre>\n\n<p>This just appends the time of generation to the file name. For example:</p>\n\n<pre><code>\"transaction_report-#{Time.now}.csv\"\n# =&gt; \"transaction_report-2019-10-10 16:09:07 +0100.csv\"\n</code></pre>\n\n<p>If you want to avoid spaces in the file name, you can sub these out like so:</p>\n\n<pre><code>\"transaction_report-#{Time.now.to_s.gsub(/\\s/, '-')}.csv\"\n# =&gt; \"transaction_report-2019-10-10-16:09:40-+0100.csv\"\n</code></pre>\n\n<p>Is that what you're after? It sounds right based on the question, though happy to update if you're able to correct me :)</p>\n"}], "owner": {"reputation": 1, "user_id": 12159557, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c65a030bc6bdb664e5c4ab98231f2deb?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew", "link": "https://stackoverflow.com/users/12159557/andrew"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 34, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1570720213, "creation_date": 1570568845, "question_id": 58294099, "link": "https://stackoverflow.com/questions/58294099/create-timestamped-labels-on-csv-files-ruby-code", "title": "Create timestamped labels on csv files (ruby code)", "body": "<p>I am running a transaction download script through Ruby. I was wondering if it is possible to label each .csv it creates with the current date/time the script was run. Below is the end of the script.</p>\n\n<pre><code>CSV.open(\"transaction_report.csv\", \"w\") do |csv|\n  csv &lt;&lt; header_row\n  search_results.each do |transaction|\n    transaction_details_row = header_row.map{ |attribute| transaction.send(attribute) }\n    csv &lt;&lt; transaction_details_row\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby", "plugins", "logstash", "key-value"], "comments": [{"owner": {"reputation": 3029, "user_id": 5430055, "user_type": "registered", "profile_image": "https://graph.facebook.com/904537752944900/picture?type=large", "display_name": "Ishara Madhawa", "link": "https://stackoverflow.com/users/5430055/ishara-madhawa"}, "edited": false, "score": 0, "creation_date": 1570598697, "post_id": 58294083, "comment_id": 102957871, "body": "Why you use <code>event.get(&quot;[kv][DATE]&quot;)</code>?"}, {"owner": {"reputation": 11004, "user_id": 1526115, "user_type": "registered", "accept_rate": 34, "profile_image": "https://www.gravatar.com/avatar/356837a43b2988e17e9fc3c6c7a6cc36?s=128&d=identicon&r=PG", "display_name": "kmiklas", "link": "https://stackoverflow.com/users/1526115/kmiklas"}, "reply_to_user": {"reputation": 3029, "user_id": 5430055, "user_type": "registered", "profile_image": "https://graph.facebook.com/904537752944900/picture?type=large", "display_name": "Ishara Madhawa", "link": "https://stackoverflow.com/users/5430055/ishara-madhawa"}, "edited": false, "score": 0, "creation_date": 1570625511, "post_id": 58294083, "comment_id": 102971259, "body": "I am new to Ruby... what do you recommend?"}, {"owner": {"reputation": 3029, "user_id": 5430055, "user_type": "registered", "profile_image": "https://graph.facebook.com/904537752944900/picture?type=large", "display_name": "Ishara Madhawa", "link": "https://stackoverflow.com/users/5430055/ishara-madhawa"}, "edited": false, "score": 0, "creation_date": 1570627113, "post_id": 58294083, "comment_id": 102972254, "body": "Try this: \u2018if [kv][DATE].kind_of(Array)\u2019"}], "owner": {"reputation": 11004, "user_id": 1526115, "user_type": "registered", "accept_rate": 34, "profile_image": "https://www.gravatar.com/avatar/356837a43b2988e17e9fc3c6c7a6cc36?s=128&d=identicon&r=PG", "display_name": "kmiklas", "link": "https://stackoverflow.com/users/1526115/kmiklas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 52, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1570568786, "creation_date": 1570568786, "question_id": 58294083, "link": "https://stackoverflow.com/questions/58294083/kv-plugin-check-if-value-is-an-array-and-assign-value-to-new-field", "title": "kv plugin: Check if value is an array, and assign value to new field", "body": "<p>The Logstash key-value plugin generates an array if there are duplicate keys; else, just a value.</p>\n\n<p>How can I use the Ruby code plugin to check which it is?</p>\n\n<ul>\n<li>If it is an array, use the first value.</li>\n<li>If it is a string literal, simply use that value.</li>\n</ul>\n\n<p>Here I use the <code>kv</code> plugin to parse the DATE field out. That is working, and placed into kv.DATE. Where am I going wrong here?</p>\n\n<pre><code>    ruby {\n        code =&gt; \"\n            if event.get(\"[kv][DATE]\").kind_of(Array)\n                add_field =&gt; { \"mydate\" =&gt; \"%{[kv][DATE][0]}\"}\n            else\n                add_field =&gt; { \"mydate\" =&gt; \"%{[kv][DATE]}\"}\n        \"\n    }\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "activemodel"], "comments": [{"owner": {"reputation": 4338, "user_id": 299774, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/eab8557a9cb59427455bac3cc59d2802?s=128&d=identicon&r=PG", "display_name": "Grzegorz", "link": "https://stackoverflow.com/users/299774/grzegorz"}, "edited": false, "score": 0, "creation_date": 1570568232, "post_id": 58293917, "comment_id": 102951901, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/17335329/activemodelforbiddenattributeserror-when-creating-new-user\">ActiveModel::ForbiddenAttributesError when creating new user</a>"}], "answers": [{"tags": [], "owner": {"reputation": 3926, "user_id": 2190621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c464f439212bca87517b234f7c9bd3e?s=128&d=identicon&r=PG&f=1", "display_name": "demir", "link": "https://stackoverflow.com/users/2190621/demir"}, "is_accepted": false, "score": 0, "last_activity_date": 1570572769, "creation_date": 1570572769, "answer_id": 58294679, "question_id": 58293917, "link": "https://stackoverflow.com/questions/58293917/activemodelforbiddenattributeserror-in-usercontrollerregister/58294679#58294679", "title": "ActiveModel::ForbiddenAttributesError in UserController#register", "body": "<p>You should use <a href=\"https://guides.rubyonrails.org/action_controller_overview.html#strong-parameters\" rel=\"nofollow noreferrer\">strong parameters</a>.</p>\n\n<p>The UserController should look like this:</p>\n\n<pre><code>class UserController &lt; ApplicationController\n  def index\n    @title = \"RailsSpace User Hub\"\n  end\n\n  def register\n    @title = \"Register\"\n    if request.post? and params[:user]\n      @user = User.new(user_params)\n    end\n    if @user.save\n      flash[:notice] = \"User #{@user.screen_name} created!\"\n      redirect_to :action =&gt; \"index\"\n    end\n  end\n\n  private\n\n  def user_params\n    # Add the user attributes that you sent with post (form) to the permit method.\n    params.require(:user).permit(:name, :screen_name)\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 35, "user_id": 12177861, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Ziym7Sw9M4U/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rf33P_m4XlTE5nWZqbY8KrAfxeVuQ/photo.jpg?sz=128", "display_name": "shubuya hushimo", "link": "https://stackoverflow.com/users/12177861/shubuya-hushimo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 37, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1570572769, "creation_date": 1570567889, "last_edit_date": 1570571747, "question_id": 58293917, "link": "https://stackoverflow.com/questions/58293917/activemodelforbiddenattributeserror-in-usercontrollerregister", "title": "ActiveModel::ForbiddenAttributesError in UserController#register", "body": "<p>Im trying to register users on my rails site. When I click the register button on the register page this is what shows up:</p>\n\n<blockquote>\n  <p>ActiveModel::ForbiddenAttributesError in UserController#register\n  ActiveModel::ForbiddenAttributesError</p>\n</blockquote>\n\n<p>Here is the code for my <code>user_controller.rb</code> file:</p>\n\n<pre><code>class UserController &lt; ApplicationController\n  def index\n    @title = \"RailsSpace User Hub\"\n  end\n\n  def register\n    @title = \"Register\"\n    if request.post? and params[:user]\n      @user = User.new(params[:user])\n    end\n    if @user.save\n      flash[:notice] = \"User #{@user.screen_name} created!\"\n      redirect_to :action =&gt; \"index\"\n    end\n  end\nend\n</code></pre>\n\n<p>It's complaining about line 11: <code>@user = User.new(params[:user])</code> Im following code from a book so I dont know what's wrong with it.\nDoes anyone have any suggestions? Thanks for all your help in advance.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "heroku", "devise", "puma"], "comments": [{"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1570565935, "post_id": 58293349, "comment_id": 102951069, "body": "I do not see an error message in that log file. What exactly is your question?"}, {"owner": {"reputation": 13, "user_id": 12184422, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-gnIp64IhhWY/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdqqn3CtbGJ55OuFvxJdcbpYCPcGw/photo.jpg?sz=128", "display_name": "Yinka Ash", "link": "https://stackoverflow.com/users/12184422/yinka-ash"}, "reply_to_user": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1570566167, "post_id": 58293349, "comment_id": 102951166, "body": "Exactly... no error message per say. The user is created but not redirected to the designated route. Yet it says  &quot;We&#39;re sorry, but something went wrong. If you are the application owner check the logs for more information.&quot; but no errors in the log file and all these memory data non-stop"}, {"owner": {"reputation": 3995, "user_id": 2037537, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/f13d953be3af2552aaa1ddfa0a05fa46?s=128&d=identicon&r=PG", "display_name": "Roland Studer", "link": "https://stackoverflow.com/users/2037537/roland-studer"}, "edited": false, "score": 0, "creation_date": 1570566452, "post_id": 58293349, "comment_id": 102951287, "body": "Are you sure, there are no more lines in the log after what you just posted? And what are you getting if you run it locally on your computer?"}, {"owner": {"reputation": 13, "user_id": 12184422, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-gnIp64IhhWY/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdqqn3CtbGJ55OuFvxJdcbpYCPcGw/photo.jpg?sz=128", "display_name": "Yinka Ash", "link": "https://stackoverflow.com/users/12184422/yinka-ash"}, "reply_to_user": {"reputation": 3995, "user_id": 2037537, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/f13d953be3af2552aaa1ddfa0a05fa46?s=128&d=identicon&r=PG", "display_name": "Roland Studer", "link": "https://stackoverflow.com/users/2037537/roland-studer"}, "edited": false, "score": 0, "creation_date": 1570566579, "post_id": 58293349, "comment_id": 102951351, "body": "@RolandStuder - there are other lines of the same logs repeating infinitely"}, {"owner": {"reputation": 3995, "user_id": 2037537, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/f13d953be3af2552aaa1ddfa0a05fa46?s=128&d=identicon&r=PG", "display_name": "Roland Studer", "link": "https://stackoverflow.com/users/2037537/roland-studer"}, "edited": false, "score": 0, "creation_date": 1570566739, "post_id": 58293349, "comment_id": 102951424, "body": "@YinkaAsh There must be some error in the logs, I clearly get a 500 application error response when I fill the form. Can you share/give access to the git repo?"}, {"owner": {"reputation": 3995, "user_id": 2037537, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/f13d953be3af2552aaa1ddfa0a05fa46?s=128&d=identicon&r=PG", "display_name": "Roland Studer", "link": "https://stackoverflow.com/users/2037537/roland-studer"}, "edited": false, "score": 0, "creation_date": 1570566805, "post_id": 58293349, "comment_id": 102951452, "body": "Ah, I see the problem now, easy to fix, will put it in the answer below."}, {"owner": {"reputation": 13, "user_id": 12184422, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-gnIp64IhhWY/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdqqn3CtbGJ55OuFvxJdcbpYCPcGw/photo.jpg?sz=128", "display_name": "Yinka Ash", "link": "https://stackoverflow.com/users/12184422/yinka-ash"}, "reply_to_user": {"reputation": 3995, "user_id": 2037537, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/f13d953be3af2552aaa1ddfa0a05fa46?s=128&d=identicon&r=PG", "display_name": "Roland Studer", "link": "https://stackoverflow.com/users/2037537/roland-studer"}, "edited": false, "score": 0, "creation_date": 1570566817, "post_id": 58293349, "comment_id": 102951466, "body": "@RolandStuder - Finally something showed up. I just edited the main post. Please review. Thanks"}, {"owner": {"reputation": 643, "user_id": 2148560, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/104ea27c9f86094417685ce999daa2ea?s=128&d=identicon&r=PG", "display_name": "Sanjiv", "link": "https://stackoverflow.com/users/2148560/sanjiv"}, "edited": false, "score": 0, "creation_date": 1570566929, "post_id": 58293349, "comment_id": 102951510, "body": "@Yinka Ash You have put default mailer host. It seem that while sending mail through device, it can not find :host params."}, {"owner": {"reputation": 3995, "user_id": 2037537, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/f13d953be3af2552aaa1ddfa0a05fa46?s=128&d=identicon&r=PG", "display_name": "Roland Studer", "link": "https://stackoverflow.com/users/2037537/roland-studer"}, "edited": false, "score": 0, "creation_date": 1570567524, "post_id": 58293349, "comment_id": 102951698, "body": "@yinkaAsh This should resolve your question. I will however vote to close your question as the way you phrased it is not helpful to others, if you had found the error message and searched for an answer you would have easily found something like: <a href=\"https://stackoverflow.com/questions/36131936/missing-host-to-link-to-please-provide-the-host-parameter-for-rails-4\" title=\"missing host to link to please provide the host parameter for rails 4\">stackoverflow.com/questions/36131936/&hellip;</a> . Don&#39;t let it discourage you, if your question gets deleted. The goal is to have good questions and answers that also help other people. Good luck!"}, {"owner": {"reputation": 13, "user_id": 12184422, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-gnIp64IhhWY/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdqqn3CtbGJ55OuFvxJdcbpYCPcGw/photo.jpg?sz=128", "display_name": "Yinka Ash", "link": "https://stackoverflow.com/users/12184422/yinka-ash"}, "reply_to_user": {"reputation": 3995, "user_id": 2037537, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/f13d953be3af2552aaa1ddfa0a05fa46?s=128&d=identicon&r=PG", "display_name": "Roland Studer", "link": "https://stackoverflow.com/users/2037537/roland-studer"}, "edited": false, "score": 0, "creation_date": 1570569517, "post_id": 58293349, "comment_id": 102952294, "body": "@RolandStuder Well, like I stated earlier, it actually didn&#39;t show the main error until way later... couple other people tried it. I really appreciate your help. Everything is fixed now. However, I setup the host in the environment.rb - Thank you"}, {"owner": {"reputation": 3995, "user_id": 2037537, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/f13d953be3af2552aaa1ddfa0a05fa46?s=128&d=identicon&r=PG", "display_name": "Roland Studer", "link": "https://stackoverflow.com/users/2037537/roland-studer"}, "edited": false, "score": 0, "creation_date": 1570608478, "post_id": 58293349, "comment_id": 102962088, "body": "@YinkaAsh I am 100% sure the error was there before, you just didn&#39;t see it. It is hard to see them in the heroku logs. That&#39;s why I recommend using heroku logs --tail, or even better start using airbrake on heroku, then you will get errors by email with a detailed stacktrace"}], "answers": [{"tags": [], "owner": {"reputation": 3995, "user_id": 2037537, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/f13d953be3af2552aaa1ddfa0a05fa46?s=128&d=identicon&r=PG", "display_name": "Roland Studer", "link": "https://stackoverflow.com/users/2037537/roland-studer"}, "is_accepted": true, "score": 2, "last_activity_date": 1570567128, "creation_date": 1570567128, "answer_id": 58293782, "question_id": 58293349, "link": "https://stackoverflow.com/questions/58293349/rails-app-showing-memory-stats-in-heroku-logs/58293782#58293782", "title": "Rails app showing memory stats in heroku logs", "body": "<p>The relevant part of the error message is the following:</p>\n\n<pre><code>[2019-10-08T19:55:38.492062 #4] Rendering devise/mailer/confirmation_instructions.html.erb\n[2019-10-08T19:55:38.496444 #4] FATAL -- :ActionView::Template::Error (Missing host to link to! Please provide the :host parameter, set default_url_options[:host], or set :only_path to true):\n</code></pre>\n\n<p>So you mailing template is trying to render, but throws an <code>ActionView::Template::Error</code> and actually tells you the problem: </p>\n\n<p><code>Missing host to link to! Please provide the :host parameter, set default_url_options[:host], or set :only_path to true)</code></p>\n\n<p>So you are using a link_to in your email, that one of course has to know the hostname, in order to create a full url. So you need to define that hostname somewhere.</p>\n\n<p>For example you can set it in <code>config/environments/production.rb</code> by including</p>\n\n<pre><code>config.action_controller.default_url_options = {:host =&gt; \"naijasinglesmeet.herokuapp.com\"}\n</code></pre>\n\n<p>This is because your application does not know under which host/domain it is running, you have to tell it that.</p>\n\n<p>A little tip, if you run into such problems, run <code>heroku logs --tail</code>, this will give you a continous logs as if you were using the development server.</p>\n"}], "owner": {"reputation": 13, "user_id": 12184422, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-gnIp64IhhWY/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdqqn3CtbGJ55OuFvxJdcbpYCPcGw/photo.jpg?sz=128", "display_name": "Yinka Ash", "link": "https://stackoverflow.com/users/12184422/yinka-ash"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "accepted_answer_id": 58293782, "answer_count": 1, "score": 1, "last_activity_date": 1570567128, "creation_date": 1570565100, "last_edit_date": 1570566760, "question_id": 58293349, "link": "https://stackoverflow.com/questions/58293349/rails-app-showing-memory-stats-in-heroku-logs", "title": "Rails app showing memory stats in heroku logs", "body": "<p>I signed up on my rails app on heroku and get the following error on my heroku logs. Meanwhile, the user has been saved to the database. </p>\n\n<p>Anyone with advise on how to proceed pls. I am using devise gem, tried both Puma and Thin servers. Still get the same error. App location is at: <a href=\"https://naijasinglesmeet.herokuapp.com\" rel=\"nofollow noreferrer\">https://naijasinglesmeet.herokuapp.com</a></p>\n\n<p>Sign up for an account and this is what I get in my logs below:</p>\n\n<p>Please advise</p>\n\n<pre><code>2019-10-08T19:55:38.458871+00:00 app[web.1]: I, [2019-10-08T19:55:26.203972 #4]  INFO -- : [41600c35-8749-48f2-9c8a-8428f4a92dea] Completed 200 OK in 10ms (Views: 7.5ms | ActiveRecord: 0.0ms)\n2019-10-08T19:55:38.458873+00:00 app[web.1]: I, [2019-10-08T19:55:38.298348 #4]  INFO -- : [bf3b49db-ec4a-4bde-ae56-c5ae727b5f67] Started POST \"/users\" for 41.217.104.185 at 2019-10-08 19:55:38 +0000\n2019-10-08T19:55:38.458875+00:00 app[web.1]: I, [2019-10-08T19:55:38.299628 #4]  INFO -- : [bf3b49db-ec4a-4bde-ae56-c5ae727b5f67] Processing by RegistrationsController#create as HTML\n2019-10-08T19:55:38.45889+00:00 app[web.1]: I, [2019-10-08T19:55:38.299753 #4]  INFO -- : [bf3b49db-ec4a-4bde-ae56-c5ae727b5f67]   Parameters: {\"utf8\"=&gt;\"\u2713\", \"authenticity_token\"=&gt;\"amK9Wje7yZ2DJDtylpzVrY9HrYgc7pmtBMnbl/lrdU5/dW+A00CGgDAW8uAtyfiUDF0tvSZtCt56gOeZsmO+mA==\", \"user\"=&gt;{\"username\"=&gt;\"iamyinka\", \"first_name\"=&gt;\"Yinka\", \"last_name\"=&gt;\"Ash\", \"email\"=&gt;\"iamhere@yinka.com\", \"password\"=&gt;\"[FILTERED]\", \"password_confirmation\"=&gt;\"[FILTERED]\"}, \"commit\"=&gt;\"Sign up\"}\n2019-10-08T19:55:38.458892+00:00 app[web.1]: D, [2019-10-08T19:55:38.458466 #4] DEBUG -- : [bf3b49db-ec4a-4bde-ae56-c5ae727b5f67]    (0.7ms)  BEGIN\n2019-10-08T19:55:38.993261+00:00 heroku[router]: at=info method=GET path=\"/favicon.ico\" host=naijasinglesmeet.herokuapp.com request_id=6561ef3b-42df-48a4-a227-6d9aa163b5c9 fwd=\"41.217.104.185\" dyno=web.1 connect=0ms service=1ms status=304 bytes=62 protocol=https\n2019-10-08T19:55:41.320556+00:00 heroku[web.1]: source=web.1 dyno=heroku.148955966.114d5aad-5be9-43d4-9b68-1c16025c2349 sample#load_avg_1m=0.02\n2019-10-08T19:55:41.348659+00:00 heroku[web.1]: source=web.1 dyno=heroku.148955966.114d5aad-5be9-43d4-9b68-1c16025c2349 sample#memory_total=79.79MB sample#memory_rss=79.75MB sample#memory_cache=0.04MB sample#memory_swap=0.00MB sample#memory_pgpgin=29231pages sample#memory_pgpgout=8805pages sample#memory_quota=512.00MB\n2019-10-08T19:56:02.581435+00:00 heroku[web.1]: source=web.1 dyno=heroku.148955966.114d5aad-5be9-43d4-9b68-1c16025c2349 sample#load_avg_1m=0.01\n2019-10-08T19:56:02.606547+00:00 heroku[web.1]: source=web.1 dyno=heroku.148955966.114d5aad-5be9-43d4-9b68-1c16025c2349 sample#memory_total=79.76MB sample#memory_rss=79.75MB sample#memory_cache=0.01MB sample#memory_swap=0.00MB sample#memory_pgpgin=29231pages sample#memory_pgpgout=8813pages sample#memory_quota=512.00MB\n2019-10-08T19:56:22.544894+00:00 heroku[web.1]: source=web.1 dyno=heroku.148955966.114d5aad-5be9-43d4-9b68-1c16025c2349 sample#load_avg_1m=0.01\n2019-10-08T19:56:22.576747+00:00 heroku[web.1]: source=web.1 dyno=heroku.148955966.114d5aad-5be9-43d4-9b68-1c16025c2349 sample#memory_total=79.76MB sample#memory_rss=79.75MB sample#memory_cache=0.01MB sample#memory_swap=0.00MB sample#memory_pgpgin=29231pages sample#memory_pgpgout=8813pages sample#memory_quota=512.00MB\n2019-10-08T19:56:43.65213+00:00 heroku[web.1]: source=web.1 dyno=heroku.148955966.114d5aad-5be9-43d4-9b68-1c16025c2349 sample#load_avg_1m=0.01 sample#load_avg_5m=0.03\n2019-10-08T19:56:43.68744+00:00 heroku[web.1]: source=web.1 dyno=heroku.148955966.114d5aad-5be9-43d4-9b68-1c16025c2349 sample#memory_total=79.76MB sample#memory_rss=79.75MB sample#memory_cache=0.01MB sample#memory_swap=0.00MB sample#memory_pgpgin=29231pages sample#memory_pgpgout=8813pages sample#memory_quota=512.00MB\n\n\n</code></pre>\n\n<p>Hi guys.... Here's an update... finally, I see something come up...</p>\n\n<pre><code>2019-10-08T20:25:08.263845+00:00 app[web.1]: D, [2019-10-08T19:55:38.481415 #4] DEBUG -- : [bf3b49db-ec4a-4bde-ae56-c5ae727b5f67]    (1.9ms)  COMMIT\n2019-10-08T20:25:08.263848+00:00 app[web.1]: I, [2019-10-08T19:55:38.492062 #4]  INFO -- : [bf3b49db-ec4a-4bde-ae56-c5ae727b5f67]   Rendering devise/mailer/confirmation_instructions.html.erb\n2019-10-08T20:25:08.26385+00:00 app[web.1]: I, [2019-10-08T19:55:38.494157 #4]  INFO -- : [bf3b49db-ec4a-4bde-ae56-c5ae727b5f67]   Rendered devise/mailer/confirmation_instructions.html.erb (2.0ms)\n2019-10-08T20:25:08.263853+00:00 app[web.1]: D, [2019-10-08T19:55:38.494327 #4] DEBUG -- : [bf3b49db-ec4a-4bde-ae56-c5ae727b5f67] Devise::Mailer#confirmation_instructions: processed outbound mail in 12.1ms\n2019-10-08T20:25:08.263855+00:00 app[web.1]: I, [2019-10-08T19:55:38.494606 #4]  INFO -- : [bf3b49db-ec4a-4bde-ae56-c5ae727b5f67] Completed 500 Internal Server Error in 195ms (ActiveRecord: 14.8ms)\n2019-10-08T20:25:08.263857+00:00 app[web.1]: F, [2019-10-08T19:55:38.496369 #4] FATAL -- : [bf3b49db-ec4a-4bde-ae56-c5ae727b5f67]\n2019-10-08T20:25:08.26386+00:00 app[web.1]: F, [2019-10-08T19:55:38.496444 #4] FATAL -- : [bf3b49db-ec4a-4bde-ae56-c5ae727b5f67] ActionView::Template::Error (Missing host to link to! Please provide the :host parameter, set default_url_options[:host], or set :only_path to true):\n2019-10-08T20:25:08.263862+00:00 app[web.1]: F, [2019-10-08T19:55:38.496669 #4] FATAL -- : [bf3b49db-ec4a-4bde-ae56-c5ae727b5f67]     2:\n2019-10-08T20:25:08.263864+00:00 app[web.1]: [bf3b49db-ec4a-4bde-ae56-c5ae727b5f67]     3: &lt;p&gt;You can confirm your account email through the link below:&lt;/p&gt;\n2019-10-08T20:25:08.263866+00:00 app[web.1]: [bf3b49db-ec4a-4bde-ae56-c5ae727b5f67]     4:\n2019-10-08T20:25:08.263867+00:00 app[web.1]: [bf3b49db-ec4a-4bde-ae56-c5ae727b5f67]     5: &lt;p&gt;&lt;%= link_to 'Confirm my account', confirmation_url(@resource, confirmation_token: @token) %&gt;&lt;/p&gt;\n2019-10-08T20:25:08.263869+00:00 app[web.1]: F, [2019-10-08T19:55:38.496775 #4] FATAL -- : [bf3b49db-ec4a-4bde-ae56-c5ae727b5f67]\n2019-10-08T20:25:08.26387+00:00 app[web.1]: F, [2019-10-08T19:55:38.496845 #4] FATAL -- : [bf3b49db-ec4a-4bde-ae56-c5ae727b5f67] app/views/devise/mailer/confirmation_instructions.html.erb:5:in `_app_views_devise_mailer_confirmation_instructions_html_erb__3272380372352870108_47027054750980'\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "heroku", "logging", "cmd"], "comments": [{"owner": {"reputation": 2345, "user_id": 4988918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/x1BRI.png?s=128&g=1", "display_name": "Mark Merritt", "link": "https://stackoverflow.com/users/4988918/mark-merritt"}, "edited": false, "score": 0, "creation_date": 1570565531, "post_id": 58293346, "comment_id": 102950901, "body": "Please add the entire log output to your question. What you provided is just a standard error that doesn&#39;t provide any information about what may be causing the app to crash."}, {"owner": {"reputation": 11, "user_id": 12174261, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b21084baa3aa930f0f3067d87c4dd28d?s=128&d=identicon&r=PG&f=1", "display_name": "Sk1993", "link": "https://stackoverflow.com/users/12174261/sk1993"}, "reply_to_user": {"reputation": 2345, "user_id": 4988918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/x1BRI.png?s=128&g=1", "display_name": "Mark Merritt", "link": "https://stackoverflow.com/users/4988918/mark-merritt"}, "edited": false, "score": 0, "creation_date": 1570568263, "post_id": 58293346, "comment_id": 102951909, "body": "@MarkMerritt that is the entire log I get."}, {"owner": {"reputation": 2345, "user_id": 4988918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/x1BRI.png?s=128&g=1", "display_name": "Mark Merritt", "link": "https://stackoverflow.com/users/4988918/mark-merritt"}, "edited": false, "score": 0, "creation_date": 1570568316, "post_id": 58293346, "comment_id": 102951925, "body": "Have you tried <code>$ heroku restart</code>?"}, {"owner": {"reputation": 11, "user_id": 12174261, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b21084baa3aa930f0f3067d87c4dd28d?s=128&d=identicon&r=PG&f=1", "display_name": "Sk1993", "link": "https://stackoverflow.com/users/12174261/sk1993"}, "reply_to_user": {"reputation": 2345, "user_id": 4988918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/x1BRI.png?s=128&g=1", "display_name": "Mark Merritt", "link": "https://stackoverflow.com/users/4988918/mark-merritt"}, "edited": false, "score": 0, "creation_date": 1570568631, "post_id": 58293346, "comment_id": 102952036, "body": "@MarkMerritt let me try that."}, {"owner": {"reputation": 11, "user_id": 12174261, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b21084baa3aa930f0f3067d87c4dd28d?s=128&d=identicon&r=PG&f=1", "display_name": "Sk1993", "link": "https://stackoverflow.com/users/12174261/sk1993"}, "reply_to_user": {"reputation": 2345, "user_id": 4988918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/x1BRI.png?s=128&g=1", "display_name": "Mark Merritt", "link": "https://stackoverflow.com/users/4988918/mark-merritt"}, "edited": false, "score": 0, "creation_date": 1570568681, "post_id": 58293346, "comment_id": 102952050, "body": "<code>$ heroku restart</code>  &#187;   Error: Missing required flag:  &#187;     -a, --app APP  app to run command against  &#187;   See more help with --help"}], "answers": [{"tags": [], "owner": {"reputation": 4338, "user_id": 299774, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/eab8557a9cb59427455bac3cc59d2802?s=128&d=identicon&r=PG", "display_name": "Grzegorz", "link": "https://stackoverflow.com/users/299774/grzegorz"}, "is_accepted": false, "score": 1, "last_activity_date": 1570568496, "creation_date": 1570568496, "answer_id": 58294032, "question_id": 58293346, "link": "https://stackoverflow.com/questions/58293346/how-to-fix-app-crashed-on-heroku-in-cmd-prompt/58294032#58294032", "title": "&quot;How to fix &#39;App crashed&#39; on heroku in cmd prompt&quot;", "body": "<p>Check out docs about logs and how to work with them on Heroku \n<a href=\"https://devcenter.heroku.com/articles/logging#log-retrieval\" rel=\"nofollow noreferrer\">https://devcenter.heroku.com/articles/logging#log-retrieval</a>\nand ask again if the logs are not clear to you. </p>\n\n<p>Also, a google search shows some typical issues with rails app on heroku, for example <a href=\"https://stackoverflow.com/questions/17180495/heroku-code-h10-desc-app-crashed-cant-figure-out-why-its-crashing\">Heroku code=H10 desc=&quot;App crashed&quot; - Can&#39;t figure out why it&#39;s crashing</a></p>\n"}], "owner": {"reputation": 11, "user_id": 12174261, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b21084baa3aa930f0f3067d87c4dd28d?s=128&d=identicon&r=PG&f=1", "display_name": "Sk1993", "link": "https://stackoverflow.com/users/12174261/sk1993"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1573339387, "creation_date": 1570565060, "last_edit_date": 1573339387, "question_id": 58293346, "link": "https://stackoverflow.com/questions/58293346/how-to-fix-app-crashed-on-heroku-in-cmd-prompt", "title": "&quot;How to fix &#39;App crashed&#39; on heroku in cmd prompt&quot;", "body": "<p>I am trying to launch my app on heroku. Yet when I execute <code>heroku open</code> command I see that it is giving an issue in the logs that \"App crashed\"</p>\n\n<p>Tried checking logs and restarting rails server.</p>\n\n<p><code>heroku logs --app obscure-beyond-78036</code></p>\n\n<blockquote>\n  <p>CMD </p>\n</blockquote>\n\n<p>2019-10-08T19:49:11.686542+00:00 heroku[router]: at=error code=H10 desc=\"App crashed\" method=GET path=\"/\" host=obscure-beyond-78036.herokuapp.com request_id=db281cf3-6b5b-46fa-b35d-72617b23a864 fwd=\"73.244.194.180\" dyno= connect= service= status=503 bytes= protocol=https</p>\n\n<p>Expected functionality is to launch the app on heroku.</p>\n\n<p>Added logs</p>\n\n<pre><code>C:\\r5.1&gt;heroku logs --app obscure-beyond-78036\n2019-11-09T22:31:51.129452+00:00 heroku[web.1]: State changed from crashed to starting\n2019-11-09T22:31:56.935810+00:00 heroku[web.1]: Starting process with command `bin/rails server -p 32098 -e production`\n2019-11-09T22:31:59.364804+00:00 heroku[web.1]: State changed from starting to crashed\n2019-11-09T22:31:59.370115+00:00 heroku[web.1]: State changed from crashed to starting\n2019-11-09T22:31:59.344842+00:00 heroku[web.1]: Process exited with status 127\n2019-11-09T22:31:59.274991+00:00 app[web.1]: /usr/bin/env: \u2018ruby\\r\u2019: No such file or directory\n2019-11-09T22:32:03.221294+00:00 heroku[web.1]: Starting process with command `bin/rails server -p 37912 -e production`\n2019-11-09T22:32:05.568964+00:00 heroku[web.1]: State changed from starting to crashed\n2019-11-09T22:32:05.551998+00:00 heroku[web.1]: Process exited with status 127\n2019-11-09T22:32:05.470297+00:00 app[web.1]: /usr/bin/env: \u2018ruby\\r\u2019: No such file or directory\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "postgresql", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1570561776, "post_id": 58292619, "comment_id": 102949436, "body": "What RDBMS are you using?"}, {"owner": {"reputation": 1350, "user_id": 651359, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/199e34f059d9f042d353e9dbf2dcec69?s=128&d=identicon&r=PG", "display_name": "Altons", "link": "https://stackoverflow.com/users/651359/altons"}, "reply_to_user": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1570561815, "post_id": 58292619, "comment_id": 102949450, "body": "I am using postgresql"}, {"owner": {"reputation": 39050, "user_id": 2336231, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/d7kOQ.jpg?s=128&g=1", "display_name": "BroiSatse", "link": "https://stackoverflow.com/users/2336231/broisatse"}, "edited": false, "score": 1, "creation_date": 1570566067, "post_id": 58292619, "comment_id": 102951115, "body": "One rather big note: Never ever ever use current product price in a dynamic <code>total</code> property. You should store product price in your OrderItem as it is not to change when the product price is updated."}, {"owner": {"reputation": 1350, "user_id": 651359, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/199e34f059d9f042d353e9dbf2dcec69?s=128&d=identicon&r=PG", "display_name": "Altons", "link": "https://stackoverflow.com/users/651359/altons"}, "reply_to_user": {"reputation": 39050, "user_id": 2336231, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/d7kOQ.jpg?s=128&g=1", "display_name": "BroiSatse", "link": "https://stackoverflow.com/users/2336231/broisatse"}, "edited": false, "score": 0, "creation_date": 1570566219, "post_id": 58292619, "comment_id": 102951186, "body": "fair point @BroiSatse - thanks for the advice"}], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 2630716, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f3fc735886460d3f68165d791c52b67?s=128&d=identicon&r=PG", "display_name": "davidgarcia", "link": "https://stackoverflow.com/users/2630716/davidgarcia"}, "is_accepted": false, "score": 1, "last_activity_date": 1570563278, "creation_date": 1570563278, "answer_id": 58292952, "question_id": 58292619, "link": "https://stackoverflow.com/questions/58292619/how-to-duplicate-records-based-on-quantity/58292952#58292952", "title": "how to duplicate records based on quantity", "body": "<p>I would'nt use the same table for order items and coupons/vouchers. If I were on your place, I'd remove the claimed_on field in order_item table and create a child table </p>\n\n<pre><code>VoucherCoupon\n    id\n    order_item\n    claimed_on\n</code></pre>\n"}], "owner": {"reputation": 1350, "user_id": 651359, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/199e34f059d9f042d353e9dbf2dcec69?s=128&d=identicon&r=PG", "display_name": "Altons", "link": "https://stackoverflow.com/users/651359/altons"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1570563278, "creation_date": 1570561674, "last_edit_date": 1592644375, "question_id": 58292619, "link": "https://stackoverflow.com/questions/58292619/how-to-duplicate-records-based-on-quantity", "title": "how to duplicate records based on quantity", "body": "<p>I am implementing a voucher/coupon system where user can buy one to many vouchers for a given product. For example user can buy two vouchers for buying a soft drink with discount at retailer X. Vouchers can be claim at the same time or at  2 different points in time i.e. one claimed today and the next will be claimed tomorrow.</p>\n<p>When coupons are added the shopping cart the Order is generated along with an associated order_item per coupon + quantity.</p>\n<p>Once the checkout is successfully completed I need to duplicate coupons where the <code>quantity &gt; 1</code> since I need a claimed_on timestamp for each coupon for audit purposes.</p>\n<p>In other words, I need to update OrderItem from:</p>\n<pre><code>id,quantity,order_id,product_id,claimed_on\n1, 2, 001, 010, nil\n2, 3, 001, 020, nil\n</code></pre>\n<p>at in the shopping cart to</p>\n<pre><code>id,quantity,order_id,product_id,claimed_on\n1, 1, 001, 010, nil\n2, 1, 001, 020, nil\n3, 1, 001, 010, nil\n4, 1, 001, 020, nil\n5, 1, 001, 020, nil\n</code></pre>\n<p>once purchase has gone suscessfully.</p>\n<p>So far I have found this <a href=\"https://stackoverflow.com/questions/23726667/query-that-will-duplicate-records-based-on-quantity\">answer</a> but I am struggling to see the implementation from activerecord perspective. My main worry is to generate any kind of lock or corrupt the table when several users are using the platform.</p>\n<p>I have considered to create a 3rd table that will contain only succesful orders but doesnt seem like a good practice.</p>\n<p>Here is my models:</p>\n<pre><code>class Order &lt; ApplicationRecord\n  belongs_to :user\n  has_many :order_items\nend\n</code></pre>\n<p>OrderItem looks like:</p>\n<pre><code>#  id         :bigint(8)        not null, primary key\n#  quantity   :integer          default(0), not null\n#  created_at :datetime         not null\n#  updated_at :datetime         not null\n#  order_id   :bigint(8)\n#  product_id :bigint(8)\n#\n# Indexes\n#\n#  index_order_items_on_order_id    (order_id)\n#  index_order_items_on_product_id  (product_id)\n#\n# Foreign Keys\n#\n#  fk_rails_...  (order_id =&gt; orders.id)\n#  fk_rails_...  (product_id =&gt; products.id)\n#\n\nclass OrderItem &lt; ApplicationRecord\n  belongs_to :order\n  belongs_to :product\n  validates :quantity, numericality: { greater_than_or_equal_to: 0 }\n\n  after_save :destroy_if_zero\n\n  def total\n    quantity * product.active_product_prices.price\n  end\n\n  private\n    def destroy_if_zero\n      destroy if quantity.zero?\n\n    end\n\n\nend\n</code></pre>\n<p>UPDATE:</p>\n<p>I am using stripe to process payment so the Order model has a charge_id to store stripe token - hope this help.</p>\n"}, {"tags": ["ruby-on-rails", "json", "ruby"], "comments": [{"owner": {"reputation": 871354, "user_id": 157247, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/4HovX.jpg?s=128&g=1", "display_name": "T.J. Crowder", "link": "https://stackoverflow.com/users/157247/t-j-crowder"}, "edited": false, "score": 2, "creation_date": 1570556562, "post_id": 58291445, "comment_id": 102947267, "body": "Oh that sounds irritating."}, {"owner": {"reputation": 871354, "user_id": 157247, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/4HovX.jpg?s=128&g=1", "display_name": "T.J. Crowder", "link": "https://stackoverflow.com/users/157247/t-j-crowder"}, "edited": false, "score": 0, "creation_date": 1570556848, "post_id": 58291445, "comment_id": 102947397, "body": "I&#39;m sure you can solve this in Ruby, but if not, it&#39;s fairly easy to write a JavaScript program (for instance, to run in Node.js) to fix the files for you: <code>const { readFile, writeFile } = require(&quot;fs&quot;);  const [, , sourceFile, destFile] = process.argv;  readFile(sourceFile, &quot;utf8&quot;, (err, data) =&gt; {     writeFile(destFile, JSON.stringify(eval(</code>(${data})<code>)), &quot;utf8&quot;, (err) =&gt; {         if (err) {             console.error(err);         }     }); });</code> (<a href=\"https://pastebin.com/D70MNjLj\" rel=\"nofollow noreferrer\">On pastebin</a>) Usage: <code>node fixjson.js badfile goodfile</code>."}, {"owner": {"reputation": 871354, "user_id": 157247, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/4HovX.jpg?s=128&g=1", "display_name": "T.J. Crowder", "link": "https://stackoverflow.com/users/157247/t-j-crowder"}, "edited": false, "score": 0, "creation_date": 1570557141, "post_id": 58291445, "comment_id": 102947533, "body": "That works (in modern versions of Node) because trailing commas are valid JavaScript, and JSON is (in modern environments) valid JavaScript, so that code reads the file, evaluates it as JavaScript, then outputs the result as (correct) JSON. If you want to update the file in place, just get rid of <code>destFile</code> and replace it with <code>sourceFile</code> in the <code>writeFile</code> call."}, {"owner": {"reputation": 4836, "user_id": 439778, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/182bec9c0797c5d6ed1bb503fb97631a?s=128&d=identicon&r=PG", "display_name": "RonLugge", "link": "https://stackoverflow.com/users/439778/ronlugge"}, "reply_to_user": {"reputation": 871354, "user_id": 157247, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/4HovX.jpg?s=128&g=1", "display_name": "T.J. Crowder", "link": "https://stackoverflow.com/users/157247/t-j-crowder"}, "edited": false, "score": 0, "creation_date": 1570557189, "post_id": 58291445, "comment_id": 102947554, "body": "@T.J.Crowder the files in question are stored in zip archives on S3, identified by ActiveStorage blob identifiers contained in a Postgres database used to run a Ruby-On-Rails server.  Porting the conversion process out to Javascript would be...  non-trivial.  (Edit:  Unless I run the Javascript from within Ruby, which <i>might</i> be doable...)"}, {"owner": {"reputation": 871354, "user_id": 157247, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/4HovX.jpg?s=128&g=1", "display_name": "T.J. Crowder", "link": "https://stackoverflow.com/users/157247/t-j-crowder"}, "edited": false, "score": 0, "creation_date": 1570557378, "post_id": 58291445, "comment_id": 102947643, "body": "Ah, well. :-) Hopefully you don&#39;t have to resort to that, but if so, easy enough (for a JavaScripter who knows Node.js) to create version of the above that reads from <code>process.stdin</code> and writes to <code>process.stdout</code> to make it easy to pipe the data through it. Anyway, hope you find a Ruby solution!"}, {"owner": {"reputation": 1171, "user_id": 4466467, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8fa3cb584327391e71cfa7d6f7f652b1?s=128&d=identicon&r=PG&f=1", "display_name": "Sujan Adiga", "link": "https://stackoverflow.com/users/4466467/sujan-adiga"}, "edited": false, "score": 0, "creation_date": 1570557395, "post_id": 58291445, "comment_id": 102947652, "body": "Have you tried <a href=\"https://apidock.com/ruby/Kernel/eval\" rel=\"nofollow noreferrer\">apidock.com/ruby/Kernel/eval</a>? it is risky though(possible command injection)"}, {"owner": {"reputation": 871354, "user_id": 157247, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/4HovX.jpg?s=128&g=1", "display_name": "T.J. Crowder", "link": "https://stackoverflow.com/users/157247/t-j-crowder"}, "reply_to_user": {"reputation": 1171, "user_id": 4466467, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8fa3cb584327391e71cfa7d6f7f652b1?s=128&d=identicon&r=PG&f=1", "display_name": "Sujan Adiga", "link": "https://stackoverflow.com/users/4466467/sujan-adiga"}, "edited": false, "score": 0, "creation_date": 1570557636, "post_id": 58291445, "comment_id": 102947763, "body": "@SujanAdiga - <i>&quot;Evaluates the Ruby expression(s) in string.&quot;</i> Is JSON a valid <b>Ruby</b> expression? (I don&#39;t do Ruby.) Seems...unlikely."}, {"owner": {"reputation": 4836, "user_id": 439778, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/182bec9c0797c5d6ed1bb503fb97631a?s=128&d=identicon&r=PG", "display_name": "RonLugge", "link": "https://stackoverflow.com/users/439778/ronlugge"}, "reply_to_user": {"reputation": 871354, "user_id": 157247, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/4HovX.jpg?s=128&g=1", "display_name": "T.J. Crowder", "link": "https://stackoverflow.com/users/157247/t-j-crowder"}, "edited": false, "score": 0, "creation_date": 1570558296, "post_id": 58291445, "comment_id": 102948031, "body": "@T.J.Crowder actually, while the JSON spec itself is <i>not</i> a standard ruby expression, it comes close enough that I may be able to cheat it with some regexes.  Since <code>{&quot;a&quot;: &quot;b&quot;}</code> <i>is</i> a valid ruby expression, even though <code>{&quot;a&quot; : &quot;b&quot;}</code> isn&#39;t... it might be possible.  Tricky as hell, but possible.  And since we control the source files, we know there aren&#39;t any injections in them, making a Kernal#eval call...  less of a bad idea."}, {"owner": {"reputation": 1171, "user_id": 4466467, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8fa3cb584327391e71cfa7d6f7f652b1?s=128&d=identicon&r=PG&f=1", "display_name": "Sujan Adiga", "link": "https://stackoverflow.com/users/4466467/sujan-adiga"}, "edited": false, "score": 0, "creation_date": 1570559257, "post_id": 58291445, "comment_id": 102948431, "body": "Also, you will have to handle NULL to nil conversation."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1570561268, "post_id": 58291445, "comment_id": 102949236, "body": "Can you add more examples to your question that span the range of conversions necessary? If it&#39;s just the trailing commas in arrays that need to be removed could you just use a simple regex: <code>str.gsub(&#47;,(?= *\\])&#47;, &#39;&#39;)</code> (&quot;match a comma followed by zero or more spaces then a right bracket)? If it&#39;s a problem with hashes as well (<code>{ :a=&gt;1,:b=&gt;2, }  #=&gt; {:a=&gt;1, :b=&gt;2}</code>), make the regex <code>&#47;,(?= *(?:\\]|\\}))&#47;</code>. <code>NULL</code> to <code>nil</code> is easily done with a regex of course."}], "answers": [{"tags": [], "owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "is_accepted": true, "score": 3, "last_activity_date": 1570565381, "creation_date": 1570565381, "answer_id": 58293407, "question_id": 58291445, "link": "https://stackoverflow.com/questions/58291445/is-there-any-way-to-parse-json-with-trailing-commas-in-ruby/58293407#58293407", "title": "Is there any way to parse JSON with trailing commas in Ruby?", "body": "<p>The problem is that your are trying to parse something that looks a lot like JSON but is not actually JSON as defined by the spec.  </p>\n\n<blockquote>\n  <p>Arrays- An  array  structure  is  a  pair  of  square  bracket  tokens  surrounding  zero  or  more values.  The values are separated by commas.</p>\n</blockquote>\n\n<p>Since you have a trailing comma another value is also expected and most JSON parsers will raise an error due to this violation</p>\n\n<p>All that being said <a href=\"https://github.com/json-next/json-next\" rel=\"nofollow noreferrer\"><code>json-next</code></a> will parse this appropriately maybe give that a shot. </p>\n\n<p>It can parse JSON like representations that completely violate the JSON spec depending on the flavor you use. (HanSON, SON, JSONX as defined in the gem)</p>\n\n<p>Example: </p>\n\n<pre><code>json = \"{ \\\"sample data\\\": [1, 2, 3,] }\")\nrequire 'json/next'\nHANSON.parse(json)\n#=&gt; {\"sample data\"=&gt;[1, 2, 3]}\n</code></pre>\n\n<p>but the following is equivalent and completely violates spec</p>\n\n<pre><code>JSONX.parse(\"{ \\\"sample data\\\": [1 2 3] }\")\n#=&gt; {\"sample data\"=&gt;[1, 2, 3]} \n</code></pre>\n\n<p>So if you choose this route do not expect to use this to validate the JSON data or structure in any fashion and you could end up with unintended results.</p>\n"}], "owner": {"reputation": 4836, "user_id": 439778, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/182bec9c0797c5d6ed1bb503fb97631a?s=128&d=identicon&r=PG", "display_name": "RonLugge", "link": "https://stackoverflow.com/users/439778/ronlugge"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 435, "favorite_count": 0, "accepted_answer_id": 58293407, "answer_count": 1, "score": 3, "last_activity_date": 1570638405, "creation_date": 1570556357, "last_edit_date": 1570638405, "question_id": 58291445, "link": "https://stackoverflow.com/questions/58291445/is-there-any-way-to-parse-json-with-trailing-commas-in-ruby", "title": "Is there any way to parse JSON with trailing commas in Ruby?", "body": "<p>I'm currently coding a transition from a system that used hand-crafted JSON files to one that can automatically generate the JSON files.  The old system works; the new system works; what I need to do is transfer data from the old system to the new one.</p>\n\n<p>The JSON files are used by an iOS app to provide functionality, and have never been read by our server software in Ruby On Rails before.  To convert between the original system and the new system, I've started work on parsing the existing JSON files.</p>\n\n<p>The problem is that one of my first two sample files has trailing commas in the JSON:</p>\n\n<pre><code>{ \"sample data\": [1, 2, 3,] }\n</code></pre>\n\n<p>This apparently went through just fine with the iOS app, because that file has been in use for a while.  Now I need some way to parse the data provided in the file in my Ruby on Rails server, which (quite rightfully) throws an exception over the illegal trailing comma in the JSON file.</p>\n\n<p>I can't just JSON.parse the code, because the parser, quite rightfully, rejects it as invalid JSON.  Is there some way to parse it -- either an option I can pass to JSON.parse, or a gem that adds something, etc etc?  Or do I need to report back that we're going to have to hand-fix the broken files before the automated process can process them?</p>\n\n<p>Edit:</p>\n\n<p>Based on comments and requests, it looks like some additional data is called for.  The JSON files in question are stored in .zip files on S3, stored via ActiveStorage.  The process I'm writing needs to download, unpack, and parse the zip files, using the 'manifest.json' file as a key to convert the archived file into a database structure with multiple, smaller files stored on S3 instead of a single zip that contains everything.  A (very) long term goal is for clients to stop downloading a unitary zip file, and instead download the files individually.  The first step towards that is to break the zip files up on the <em>server</em>, which means the server needs to read in the zip files.  A more detailed sample of the data follows.  (Note that the structure contains several design decisions I later came to regret; one of the original ideas was to be able to re-use files rather than pack multiple copies of the same identical file, but YAGNI bit me in the rear there)</p>\n\n<p>The following includes comments that are not legal in JSON format:</p>\n\n<pre><code>{\n  \"defined_key\": [\n    {\n      \"name\": \"Object_with_subkeys\",\n      \"key\": \"filename\",\n      \"subkeys\": [\n        {\n          \"id\":\"1\"\n        },\n        {\n          \"id\":\"2\"\n        },\n        {\n          \"id\":\"3\" // references to identifier on another defined key\n        }, // Note trailing comma\n      ]\n    }\n  ],\n  \"another_defined_key\":[\n    {\n      \"identifier\": \"should have made parent a hash with id as key instead of an array\",\n      \"data\":\"metadata\",\n      \"display_name\":\"Names: Can be very arbitrary\",\n      \"user text\":\"Wait for the right {moment}\", // I actually don't expect { or } in the strings, but they're completely legal and may have been used\n      \"thumbnail\":\"filename-2.png\",\n      \"video-1\":\"filename-3.mov\"\n    }\n  ]\n}\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord", "hash", "enums"], "comments": [{"owner": {"reputation": 121669, "user_id": 56778, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/34b152ef95a49568ce45df38cd87e54b?s=128&d=identicon&r=PG", "display_name": "Jim Mischel", "link": "https://stackoverflow.com/users/56778/jim-mischel"}, "edited": false, "score": 0, "creation_date": 1570557070, "post_id": 58291336, "comment_id": 102947503, "body": "Is this a duplicate of <a href=\"https://stackoverflow.com/questions/58241397/how-do-i-find-and-replace-nil-values-of-ruby-hash-with-none-or-0\" title=\"how do i find and replace nil values of ruby hash with none or 0\">stackoverflow.com/questions/58241397/&hellip;</a>?"}, {"owner": {"reputation": 597, "user_id": 10239403, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44fbdaea0dedd13b281fb7e70665efe4?s=128&d=identicon&r=PG", "display_name": "Demian Sims", "link": "https://stackoverflow.com/users/10239403/demian-sims"}, "reply_to_user": {"reputation": 121669, "user_id": 56778, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/34b152ef95a49568ce45df38cd87e54b?s=128&d=identicon&r=PG", "display_name": "Jim Mischel", "link": "https://stackoverflow.com/users/56778/jim-mischel"}, "edited": false, "score": 0, "creation_date": 1570560546, "post_id": 58291336, "comment_id": 102948925, "body": "Wow I think you&#39;re right. My brain is scrambled these days. I think I also got caught up in trying to deal with 2 different type of objects and trying to normalize them before they hit Views."}], "answers": [{"tags": [], "owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "is_accepted": false, "score": 2, "last_activity_date": 1570616258, "last_edit_date": 1570616258, "creation_date": 1570556048, "answer_id": 58291361, "question_id": 58291336, "link": "https://stackoverflow.com/questions/58291336/how-to-replace-nil-and-empty-string-with-none-in-ruby-rails-in-enumerable-ob/58291361#58291361", "title": "How to replace nil and &#39;empty string&#39; with &quot;None&quot; in Ruby/Rails in enumerable object?", "body": "<p>You can try using <a href=\"https://api.rubyonrails.org/classes/Object.html#method-i-presence\" rel=\"nofollow noreferrer\"><code>presence</code></a>.</p>\n\n<pre><code>&lt;%= @records_incoming[:time_inserted].presence || \"none\" %&gt;\n</code></pre>\n\n<p>It handles the two cases you need, <code>@records_incoming[:time_inserted]</code> being nil or an empty string as it returns the receiver if it's <code>present?</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 1171, "user_id": 4466467, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8fa3cb584327391e71cfa7d6f7f652b1?s=128&d=identicon&r=PG&f=1", "display_name": "Sujan Adiga", "link": "https://stackoverflow.com/users/4466467/sujan-adiga"}, "is_accepted": false, "score": 1, "last_activity_date": 1604085356, "last_edit_date": 1604085356, "creation_date": 1570556219, "answer_id": 58291402, "question_id": 58291336, "link": "https://stackoverflow.com/questions/58291336/how-to-replace-nil-and-empty-string-with-none-in-ruby-rails-in-enumerable-ob/58291402#58291402", "title": "How to replace nil and &#39;empty string&#39; with &quot;None&quot; in Ruby/Rails in enumerable object?", "body": "<p>You can use <code>transform_values!</code> on params hash</p>\n<p>try,</p>\n<pre><code>incoming_request.transform_values! { |v| v.empty? || !v ? &quot;none&quot; : v }\n@records_incoming = incoming_request\n</code></pre>\n<p>Ref: <a href=\"https://apidock.com/rails/Hash/transform_values%21\" rel=\"nofollow noreferrer\">transform_values! doc</a></p>\n<p>Note: <code>transform_values!</code> updates the hash in place</p>\n"}], "owner": {"reputation": 597, "user_id": 10239403, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44fbdaea0dedd13b281fb7e70665efe4?s=128&d=identicon&r=PG", "display_name": "Demian Sims", "link": "https://stackoverflow.com/users/10239403/demian-sims"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1210, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1604085356, "creation_date": 1570555927, "question_id": 58291336, "link": "https://stackoverflow.com/questions/58291336/how-to-replace-nil-and-empty-string-with-none-in-ruby-rails-in-enumerable-ob", "title": "How to replace nil and &#39;empty string&#39; with &quot;None&quot; in Ruby/Rails in enumerable object?", "body": "<p>I'm taking to objects in Rails: a Record::ActiveRecord_Relation and a ActionController::Parameters and turn them into usable Hashes to be rendered in Views. I need to replace nil and \"\" with \"none\". I could do it the non-dry way and protect every key/value pair of the Hash with something like: </p>\n\n<pre><code>  &lt;div&gt;&lt;%= @records_incoming[:time_inserted] || @records_incoming[:time_inserted].empty? ? \"none\" : @records_incoming[:time_inserted]  %&gt;&lt;/div&gt;\n\n</code></pre>\n\n<p>but that doesn't seem very Ruby like (granted, I'm a newer developer). </p>\n\n<p>I've tried to handle this in the controller like so: </p>\n\n<pre><code>\ndef show\n    sent_results = Record.get_sent(params[:request][:trans_uuid]) \n\n    if !sent_results.empty? \n\n      incoming_request = params[:request].permit!\n      @records_sent = sent_results[0].attributes.each { |k,v| v.class == String &amp;&amp; v.empty? || !v ? sent_results[0].attributes[k] = \"none\" : sent_results[0].attributes[k] } \n      @records_incoming = incoming_request.to_h.map { |k, v| v.empty? || !v ? \"none\" : v }\n      byebug \n    else    \n      flash[:error] = 'No record found'\n    end \n  end\n\n</code></pre>\n\n<p>but this does not change the nil and empty string values to 'none'. If I use <code>map</code>, I of course get an array as the return value but I need to retain a Hash. </p>\n\n<p>Please advise on any better Rails ways to do this overall. Trying to get 2 hashes into views to be split out and rendered. </p>\n"}, {"tags": ["ruby", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 1, "creation_date": 1570555124, "post_id": 58290795, "comment_id": 102946635, "body": "You have not specified a response for an &quot;html&quot; request so making one results in your error. If you were to visit &quot;/patients.json&quot; you should receive a response. If this should default to a json request then specify the format in your routes <a href=\"https://guides.rubyonrails.org/routing.html#defining-defaults\" rel=\"nofollow noreferrer\">Rails routing 3.5 Defining Defaults</a>"}, {"owner": {"reputation": 14724, "user_id": 96864, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/562dfbc04cd800e8d63755d66a0400b0?s=128&d=identicon&r=PG", "display_name": "icn", "link": "https://stackoverflow.com/users/96864/icn"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1570555991, "post_id": 58290795, "comment_id": 102947016, "body": "@engineersmnky Thanks that was the problem! IT is working now"}], "answers": [{"tags": [], "owner": {"reputation": 742, "user_id": 1507066, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/2aa876aa0d2187ccd991e64b8008a0bc?s=128&d=identicon&r=PG", "display_name": "achempion", "link": "https://stackoverflow.com/users/1507066/achempion"}, "is_accepted": false, "score": 1, "last_activity_date": 1570555231, "creation_date": 1570555231, "answer_id": 58291162, "question_id": 58290795, "link": "https://stackoverflow.com/questions/58290795/rails-5-2-actioncontrollerunknownformat-in-patientscontrollerindex-error/58291162#58291162", "title": "Rails 5.2 ActionController::UnknownFormat in PatientsController#index error", "body": "<p>What you see in the error message <code>ActionController::UnknownFormat</code> is telling you what is wrong.</p>\n\n<p>As you mentioned, <code>request.format</code> returns <code>:html</code> but you only have <code>format.json</code> defined.</p>\n\n<p>It looks like you don't format your JSON request properly. In order to do that you either should define headers for a JSON request or make request to the url that ends with <code>.json</code> (a feature from rails).</p>\n\n<p>JSON request headers:</p>\n\n<pre><code>Content-Type: application/json\nAccept: application/json\n</code></pre>\n"}], "owner": {"reputation": 14724, "user_id": 96864, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/562dfbc04cd800e8d63755d66a0400b0?s=128&d=identicon&r=PG", "display_name": "icn", "link": "https://stackoverflow.com/users/96864/icn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1570558352, "creation_date": 1570553636, "last_edit_date": 1570558352, "question_id": 58290795, "link": "https://stackoverflow.com/questions/58290795/rails-5-2-actioncontrollerunknownformat-in-patientscontrollerindex-error", "title": "Rails 5.2 ActionController::UnknownFormat in PatientsController#index error", "body": "<pre><code>class PatientsController &lt; ApplicationController\n  #require 'pry';  binding.pry\n  def index\n    respond_to do |format|\n      format.json do\n        render json: Patient.all\n      end\n    end\n  end\n\nend\n</code></pre>\n\n<p>I thought <code>respond_to</code> is included in rails? If I put a pry I can see <code>request.format == :html</code> is <code>true</code> Thanks for any help!</p>\n\n<p>UDPATE:\nafter changing to </p>\n\n<pre><code>  def index\n    respond_to do |format|\n      format.json do\n        render json: Patient.all\n      end\n      format.html do\n        render :index\n      end\n    end\nend\n</code></pre>\n\n<p>It works!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "docker", "google-app-engine", "gcloud"], "answers": [{"comments": [{"owner": {"reputation": 746, "user_id": 11928097, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/K6NxO.jpg?s=128&g=1", "display_name": "Stefan G.", "link": "https://stackoverflow.com/users/11928097/stefan-g"}, "edited": false, "score": 0, "creation_date": 1570615735, "post_id": 58295865, "comment_id": 102966041, "body": "I followed the tutorial mentioned and i had similar results, @andyavd01&#39;s solution is working for me."}, {"owner": {"reputation": 769, "user_id": 782004, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0MtM7.jpg?s=128&g=1", "display_name": "Daniel Azuma", "link": "https://stackoverflow.com/users/782004/daniel-azuma"}, "edited": false, "score": 0, "creation_date": 1570741206, "post_id": 58295865, "comment_id": 103019835, "body": "Thanks for the report and potential solution. We&#39;ll take a look and update the tutorial if necessary."}, {"owner": {"reputation": 181, "user_id": 9114945, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2ab8070e607052c4158c124ead73245?s=128&d=identicon&r=PG&f=1", "display_name": "user9114945", "link": "https://stackoverflow.com/users/9114945/user9114945"}, "edited": false, "score": 0, "creation_date": 1573320847, "post_id": 58295865, "comment_id": 103847412, "body": "Probably because your tutorial is on Rails 5?"}, {"owner": {"reputation": 468, "user_id": 4245513, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/19b22a9bdf0df02409abe74a19911150?s=128&d=identicon&r=PG", "display_name": "Sam Johnson", "link": "https://stackoverflow.com/users/4245513/sam-johnson"}, "edited": false, "score": 0, "creation_date": 1576824141, "post_id": 58295865, "comment_id": 105028388, "body": "I still have this same issue, and I am already using that exact entrypoint"}], "tags": [], "owner": {"reputation": 21, "user_id": 12185351, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/ed0fa9673b06542a02e2ecdc2a332444?s=128&d=identicon&r=PG", "display_name": "andyavd01", "link": "https://stackoverflow.com/users/12185351/andyavd01"}, "is_accepted": false, "score": 2, "last_activity_date": 1570584100, "creation_date": 1570584100, "answer_id": 58295865, "question_id": 58290511, "link": "https://stackoverflow.com/questions/58290511/error-while-deploying-rails-6-app-to-google-cloud-platform-app-engine/58295865#58295865", "title": "Error while deploying Rails 6 app to Google Cloud Platform App Engine", "body": "<p>I had the same issue.</p>\n\n<p>I am using the <code>puma</code> gem as my app server. I needed to change <code>entrypoint</code> in the <code>app.yaml</code> file.</p>\n\n<p><code>entrypoint: bundle exec rails server Puma -p $PORT</code></p>\n\n<p>Documentation can be found here:\n<a href=\"https://cloud.google.com/appengine/docs/flexible/ruby/runtime\" rel=\"nofollow noreferrer\">https://cloud.google.com/appengine/docs/flexible/ruby/runtime</a></p>\n"}, {"tags": [], "owner": {"reputation": 3508, "user_id": 561019, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/a6fe758442b4e85798eea859dd671c90?s=128&d=identicon&r=PG", "display_name": "Nick Urban", "link": "https://stackoverflow.com/users/561019/nick-urban"}, "is_accepted": false, "score": 0, "last_activity_date": 1600139230, "creation_date": 1600139230, "answer_id": 63894484, "question_id": 58290511, "link": "https://stackoverflow.com/questions/58290511/error-while-deploying-rails-6-app-to-google-cloud-platform-app-engine/63894484#63894484", "title": "Error while deploying Rails 6 app to Google Cloud Platform App Engine", "body": "<p>I experienced the same problem. My <code>/config/puma.rb</code> has this:</p>\n<pre><code>pidfile ENV.fetch(&quot;PIDFILE&quot;) { &quot;tmp/pids/server.pid&quot; }\n</code></pre>\n<p>Which allowed me to set the location of the pid file to <code>/tmp</code> using <code>env_variables</code>. I added the following in <code>app.yaml</code>:</p>\n<pre><code>env_variables:\n  PIDFILE: &quot;/tmp/puma.pid&quot;\n</code></pre>\n<p>Once I did this, the error went away.</p>\n<p>I believe it was caused by the default location being read-only.</p>\n"}], "owner": {"reputation": 77, "user_id": 11609724, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b66a2c96faf599eb867bedb90fcf74ed?s=128&d=identicon&r=PG", "display_name": "robquinn", "link": "https://stackoverflow.com/users/11609724/robquinn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 805, "favorite_count": 2, "answer_count": 2, "score": 3, "last_activity_date": 1600139230, "creation_date": 1570552337, "question_id": 58290511, "link": "https://stackoverflow.com/questions/58290511/error-while-deploying-rails-6-app-to-google-cloud-platform-app-engine", "title": "Error while deploying Rails 6 app to Google Cloud Platform App Engine", "body": "<p>I have developed the first iteration of an app using Ruby on Rails (ROR - v6.0.0; Ruby - v2.6.3). I need to deploy it to gcp, google cloud platform as that is what the company I work for uses. I followed the tutorial google has for this, as seen <a href=\"https://cloud.google.com/ruby/rails/appengine\" rel=\"nofollow noreferrer\">here</a>. However, no matter what I do, near the end of the push I get this error:</p>\n\n<pre><code>8536b8dd72f7: Pushed\nf66b9865f45c: Layer already exists\n8f213bf0e9c7: Pushed\nce02b74896ad: Pushed\na79efcc05468: Pushed\nlatest: digest: sha256:93b405b42825c93798db12c14f4f5d5dd09c6fc3e32861a1a1f3947c338e45a2 size: 2419\nDONE\n-----------------------------------------------------------------------------------------------------------------------------------------------------------\n\nUpdating service [default] (this may take several minutes)...failed.\nERROR: (gcloud.app.deploy) Error Response: [9]\nApplication startup error:\nPuma starting in single mode...\n* Version 3.12.1 (ruby 2.6.3-p62), codename: Llamas in Pajamas\n* Min threads: 5, max threads: 5\n* Environment: production\n* Listening on tcp://0.0.0.0:8080\nbundler: failed to load command: rackup (/app/vendor/bundle/ruby/2.6.0/bin/rackup)\nErrno::ENOENT: No such file or directory @ rb_sysopen - tmp/pids/server.pid\n  /app/vendor/bundle/ruby/2.6.0/gems/puma-3.12.1/lib/puma/launcher.rb:133:in `initialize'\n  /app/vendor/bundle/ruby/2.6.0/gems/puma-3.12.1/lib/puma/launcher.rb:133:in `open'\n  /app/vendor/bundle/ruby/2.6.0/gems/puma-3.12.1/lib/puma/launcher.rb:133:in `write_pid'\n  /app/vendor/bundle/ruby/2.6.0/gems/puma-3.12.1/lib/puma/launcher.rb:106:in `write_state'\n  /app/vendor/bundle/ruby/2.6.0/gems/puma-3.12.1/lib/puma/single.rb:103:in `run'\n  /app/vendor/bundle/ruby/2.6.0/gems/puma-3.12.1/lib/puma/launcher.rb:186:in `run'\n  /app/vendor/bundle/ruby/2.6.0/gems/puma-3.12.1/lib/rack/handler/puma.rb:73:in `run'\n  /app/vendor/bundle/ruby/2.6.0/gems/rack-2.0.7/lib/rack/server.rb:297:in `start'\n  /app/vendor/bundle/ruby/2.6.0/gems/rack-2.0.7/lib/rack/server.rb:148:in `start'\n  /app/vendor/bundle/ruby/2.6.0/gems/rack-2.0.7/bin/rackup:4:in `&lt;top (required)&gt;'\n  /app/vendor/bundle/ruby/2.6.0/bin/rackup:23:in `load'\n  /app/vendor/bundle/ruby/2.6.0/bin/rackup:23:in `&lt;top (required)&gt;'\n\n</code></pre>\n\n<p>The strange thing is, I tried following google's tutorial with a brand new rails app (same machine, same environment), and I got the same error. Billing is enabled for the account, so I don't think it's that. The app works just fine when I run it locally. Anyway, here is my 'app.yml' file:</p>\n\n<pre><code>entrypoint: bundle exec rackup --port $PORT\nenv: flex\nruntime: ruby\n\nenv_variables:\n    SECRET_KEY_BASE: [MY_SECRET_KEY_IS_HERE]\n\n</code></pre>\n\n<p>When I run <code>bundle exec rackup --port 8080</code> on my local machine, the app starts up just fine. I've searched all over and haven't been able to find a solution. I've seen similar posts, but they either aren't answered or do not solve this issue. I'm considering 'dockerizing' the app, not sure that would fix anything; But if I understand correctly docker is a way of telling other machines how to run a specific set of instructions, like an app, so that it can run on almost any machine. Idk, that's really all I can think of. Any and all suggestions are welcome and would be appreciated. </p>\n\n<p>Thank you for your time in reading this, and I otherwise hope you have a great day.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3", "ruby-on-rails-4", "logging"], "answers": [{"comments": [{"owner": {"reputation": 7188, "user_id": 3013522, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5498748e139a6d5715a167ae64611cc8?s=128&d=identicon&r=PG", "display_name": "Wilson Silva", "link": "https://stackoverflow.com/users/3013522/wilson-silva"}, "edited": false, "score": 0, "creation_date": 1570553144, "post_id": 58290429, "comment_id": 102945731, "body": "Thanks. I just found out that this was being added by Phusion Passenger when running in threaded mode. Not sure how to disable it yet."}], "tags": [], "owner": {"reputation": 1171, "user_id": 4466467, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8fa3cb584327391e71cfa7d6f7f652b1?s=128&d=identicon&r=PG&f=1", "display_name": "Sujan Adiga", "link": "https://stackoverflow.com/users/4466467/sujan-adiga"}, "is_accepted": false, "score": 0, "last_activity_date": 1570552003, "creation_date": 1570552003, "answer_id": 58290429, "question_id": 58290146, "link": "https://stackoverflow.com/questions/58290146/how-to-remove-thr-1-from-rails-logs/58290429#58290429", "title": "How to remove [Thr-1] from Rails logs?", "body": "<p>By default the log format is set to <code>SeverityID, [DateTime #pid] SeverityLabel -- ProgName: message</code></p>\n\n<p>Ref: <a href=\"https://ruby-doc.org/stdlib-2.6.4/libdoc/logger/rdoc/Logger.html#class-Logger-label-Format\" rel=\"nofollow noreferrer\">https://ruby-doc.org/stdlib-2.6.4/libdoc/logger/rdoc/Logger.html#class-Logger-label-Format</a></p>\n\n<p>You can confirm or change the log format in <code>config/environments/&lt;environment&gt;.rb</code> file under <code>config.log_formatter</code> option.\nEx: <code>config/environments/production.rb</code> for production environment.</p>\n\n<p>I guess ProgName in your case is having thread name, you can debug and update this behavior by overriding the log_format.</p>\n\n<p>Try,</p>\n\n<pre><code>logger.formatter = proc do |severity, datetime, progname, msg|\n    # Debug statements here\nend\n</code></pre>\n"}], "owner": {"reputation": 7188, "user_id": 3013522, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5498748e139a6d5715a167ae64611cc8?s=128&d=identicon&r=PG", "display_name": "Wilson Silva", "link": "https://stackoverflow.com/users/3013522/wilson-silva"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 28, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1570552003, "creation_date": 1570550847, "question_id": 58290146, "link": "https://stackoverflow.com/questions/58290146/how-to-remove-thr-1-from-rails-logs", "title": "How to remove [Thr-1] from Rails logs?", "body": "<p>My logs are prepended with <code>[Thr-1]</code> or <code>[Thr-2]</code> and I can't figure out how to disable this behavior. I assume that they are the thread names, but I'm unsure.</p>\n"}, {"tags": ["ruby", "performance", "ruby-2.3"], "comments": [{"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 1, "creation_date": 1570548346, "post_id": 58289340, "comment_id": 102943473, "body": "<code>sum</code> was added in the version 2.4 of Ruby (Rails had it before), it was a common practice to use inject in that way."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1570552560, "post_id": 58289340, "comment_id": 102945429, "body": "Readers know what <code>scope_value.values</code> means, and that you will need to convert the values of the hash to integers with <code>to_i</code>, so your question could be improved by simplifying it to its essence: <code>scope_values = [1, 8, 15]; scope_values.map...</code>."}], "answers": [{"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 3, "creation_date": 1570552032, "post_id": 58289488, "comment_id": 102945187, "body": "@Sergio, you&#39;ve been AWOL. Forgot not an edge case: <code>[].sum #=&gt; 0; [].inject(:+) #=&gt; nil</code>. We can say that <code>arr.sum</code> produces the same result as <code>arr.inject(0, :+)</code> so long as all elements of <code>arr</code> (if any) are numeric."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1570555773, "post_id": 58289488, "comment_id": 102946928, "body": "@CarySwoveland: sorry about that. New job, new place, not so much time :) Thanks for clarification \ud83d\udc4d"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 1487, "user_id": 3575018, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/iHBDs.jpg?s=128&g=1", "display_name": "thebenman", "link": "https://stackoverflow.com/users/3575018/thebenman"}, "edited": false, "score": 0, "creation_date": 1570555905, "post_id": 58289488, "comment_id": 102946982, "body": "@thebenman: same what it does outside of inject. When used on integers, it means <a href=\"https://en.wikipedia.org/wiki/Bitwise_operation#OR\" rel=\"nofollow noreferrer\">bitwise OR</a>: <a href=\"https://ruby-doc.org/core-2.5.0/Integer.html#method-i-7C\" rel=\"nofollow noreferrer\">ruby-doc.org/core-2.5.0/Integer.html#method-i-7C</a> But as far as ruby is concerned, it&#39;s just a method. On arrays it means something else completely, for example."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1570556042, "post_id": 58289488, "comment_id": 102947040, "body": "@Sergio, non-numeric elements that respond to <code>:+</code> can be summed as well if <code>sum</code> is given its optional argument, an initial value. The doc <a href=\"https://ruby-doc.org/core-2.6.3/Array.html#method-i-sum\" rel=\"nofollow noreferrer\">Array#sum</a> gives the example <code>[&quot;a&quot;, &quot;b&quot;, &quot;c&quot;].sum(&quot;&quot;) #=&gt; &quot;abc&quot;</code>. New city? New country?"}], "tags": [], "owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "is_accepted": true, "score": 5, "last_activity_date": 1570548391, "creation_date": 1570548391, "answer_id": 58289488, "question_id": 58289340, "link": "https://stackoverflow.com/questions/58289340/does-inject-starting-from-0-mean-the-same-as-sum/58289488#58289488", "title": "Does inject starting from 0 mean the same as sum", "body": "<blockquote>\n  <p>In terms of functionality doesn't both lines of code do the same thing.</p>\n</blockquote>\n\n<p>Yes, these two snippets produce identical results.</p>\n\n<blockquote>\n  <p>Does inject starting from 0 mean the same as sum</p>\n</blockquote>\n\n<p>No, not at all. In fact, <code>0</code> is irrelevant here. You can omit it and still get the same result.</p>\n\n<pre><code>scope_value.values.map { |i| 2** i.to_i }.inject(:|)\n</code></pre>\n\n<p>Operations in these two snippets are very different. They only produce the same result because of special shape of your data. Which is \"each number has only one bit set and no two numbers have the same bit set\". Violate this rule and see results diverge.</p>\n\n<hr>\n\n<p>BTW, before we had <code>.sum</code>, we used to emulate it with <code>.inject(:+)</code>. <em>This</em> does the same thing (when used on integer arrays)</p>\n"}, {"tags": [], "owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "is_accepted": false, "score": 1, "last_activity_date": 1570605221, "last_edit_date": 1570605221, "creation_date": 1570603469, "answer_id": 58298434, "question_id": 58289340, "link": "https://stackoverflow.com/questions/58289340/does-inject-starting-from-0-mean-the-same-as-sum/58298434#58298434", "title": "Does inject starting from 0 mean the same as sum", "body": "<p>They <em>do</em> mean the same thing, but <em>only</em> because you don't use <code>Float</code>s and <em>only</em> because you don't have a <code>Range</code>.</p>\n\n<p>At least in some versions of some Ruby implementations, <code>sum</code> has some optimizations and specializations that <code>inject</code> and <code>+</code> can't have because they are much more general. For example, in YARV, <a href=\"https://github.com/ruby/ruby/blob/master/enum.c#L3833-L4085\" rel=\"nofollow noreferrer\">the current implementation of the various variations of <code>sum</code> is almost 200 lines</a>, and includes the following optimizations</p>\n\n<ul>\n<li><a href=\"https://github.com/ruby/ruby/blob/master/enum.c#L3899-L3946\" rel=\"nofollow noreferrer\"><code>Enumerable#sum</code>, when applied to an <code>Enumerable&lt;Float&gt;</code></a>, uses the <em>Kahan-Babu\u0161ka</em> balancing compensated summation algorithm to prevent floating point accuracy errors from accumulating during the summation</li>\n<li><a href=\"https://github.com/ruby/ruby/blob/master/enum.c#L3984-L4003\" rel=\"nofollow noreferrer\"><code>Range#sum</code>, when applied to a <code>Range&lt;Integer&gt;</code></a> uses the well-known closed-form formula: <code>(end - start + 1) * (end + start) / 2</code> end is thus independent of the size of the range any only depends on the length of the numbers involved</li>\n</ul>\n\n<p>The price we pay for this is that <code>sum</code> may ignore monkeypatched versions of <code>each</code> or <code>+</code>.</p>\n"}], "owner": {"reputation": 1487, "user_id": 3575018, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/iHBDs.jpg?s=128&g=1", "display_name": "thebenman", "link": "https://stackoverflow.com/users/3575018/thebenman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 0, "accepted_answer_id": 58289488, "answer_count": 2, "score": 2, "last_activity_date": 1570605221, "creation_date": 1570547823, "question_id": 58289340, "link": "https://stackoverflow.com/questions/58289340/does-inject-starting-from-0-mean-the-same-as-sum", "title": "Does inject starting from 0 mean the same as sum", "body": "<p>I'm new to ruby and was going though a piece of code </p>\n\n<pre><code>scope_value = {\"tickets_scope\"=&gt;\"1\", \"changes_scope\"=&gt;\"8\", \"solutions_scope\"=&gt;\"15\"}\nscope_value.values.map { |i| 2** i.to_i }.inject(0, :|)\n</code></pre>\n\n<p>I realised </p>\n\n<pre><code>scope_value.values.map {|i| 2** i.to_i }.sum\n</code></pre>\n\n<p>does the the same thing as well</p>\n\n<p>In terms of functionality doesn't both lines of code do the same thing. Is there any advantage to using sum over the other in terms of performance. </p>\n"}, {"tags": ["ruby", "graphql", "relay", "graphql-ruby"], "owner": {"reputation": 12290, "user_id": 228370, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/a3f87affc7032e0af7cc4ce2ddb08ce9?s=128&d=identicon&r=PG", "display_name": "23tux", "link": "https://stackoverflow.com/users/228370/23tux"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 190, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1570547145, "creation_date": 1570547145, "question_id": 58289139, "link": "https://stackoverflow.com/questions/58289139/how-is-the-clientmutationid-used-for-optimistic-updates-in-front-ends", "title": "How is the clientMutationId used for optimistic updates in front ends?", "body": "<p>I was reading about GraphQL mutations and had to decide wether to use Relay mutations or not in graphql-ruby. I stumbled upon the <code>clientMutationId</code> here <a href=\"https://graphql-ruby.org/api-doc/1.8.5/GraphQL/Schema/RelayClassicMutation.html\" rel=\"nofollow noreferrer\">https://graphql-ruby.org/api-doc/1.8.5/GraphQL/Schema/RelayClassicMutation.html</a></p>\n\n<p><code>clientMutationId</code> apparently is used for optimistic updates (found here <a href=\"https://stackoverflow.com/questions/33009657/what-is-optimistic-updates-in-front-end-development\">what is `optimistic updates` in front-end development</a>), but I'm unsure how this is intended to be used.</p>\n\n<p>It seems that you pass the <code>clientMutationId</code> along with your mutation, and the server returns this value in the response. But what's the purpose of this? Some kind of client-side idempotency?</p>\n"}, {"tags": ["ruby", "watir", "page-object-gem"], "answers": [{"comments": [{"owner": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "edited": false, "score": 0, "creation_date": 1570551812, "post_id": 58290298, "comment_id": 102945093, "body": "This isn&#39;t very ideal, so I created a feature request to make the tag name optional - <a href=\"https://github.com/cheezy/page-object/issues/491\" rel=\"nofollow noreferrer\">github.com/cheezy/page-object/issues/491</a>"}, {"owner": {"reputation": 3523, "user_id": 9043475, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FNxvn.jpg?s=128&g=1", "display_name": "Rajagopalan", "link": "https://stackoverflow.com/users/9043475/rajagopalan"}, "edited": false, "score": 0, "creation_date": 1570552811, "post_id": 58290298, "comment_id": 102945555, "body": "Hi, I think Cheezy is not maintaining the gem now. Can&#39;t you branch out and maintain by yourself ?"}, {"owner": {"reputation": 3523, "user_id": 9043475, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FNxvn.jpg?s=128&g=1", "display_name": "Rajagopalan", "link": "https://stackoverflow.com/users/9043475/rajagopalan"}, "edited": false, "score": 0, "creation_date": 1570553602, "post_id": 58290298, "comment_id": 102945940, "body": "Oh you are committer there too?"}, {"owner": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "reply_to_user": {"reputation": 3523, "user_id": 9043475, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FNxvn.jpg?s=128&g=1", "display_name": "Rajagopalan", "link": "https://stackoverflow.com/users/9043475/rajagopalan"}, "edited": false, "score": 0, "creation_date": 1570554425, "post_id": 58290298, "comment_id": 102946324, "body": "@Rajagopalan, I have commit access to Page-Object, but not permission to publish the gem (Cheezy does that as necessary). I&#39;m trying to find time to maintain this gem as well as Watir."}, {"owner": {"reputation": 3523, "user_id": 9043475, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FNxvn.jpg?s=128&g=1", "display_name": "Rajagopalan", "link": "https://stackoverflow.com/users/9043475/rajagopalan"}, "edited": false, "score": 0, "creation_date": 1570592682, "post_id": 58290298, "comment_id": 102956659, "body": "Oh okay. So even if you commit, he has to publish the next version for your new commit available to people . So it&#39;s once again seems like not useful. He will do anytime soon?"}, {"owner": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "reply_to_user": {"reputation": 3523, "user_id": 9043475, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FNxvn.jpg?s=128&g=1", "display_name": "Rajagopalan", "link": "https://stackoverflow.com/users/9043475/rajagopalan"}, "edited": false, "score": 0, "creation_date": 1570642588, "post_id": 58290298, "comment_id": 102980424, "body": "@Rajagopalan, I don&#39;t see the problem. Cheezy has been quite available for publishing the gem. It&#39;s a problem of either of us having time to actually do the development. If there was something completely broken with Page-Object, I&#39;m sure one of us would find the time to fix it. But at this point, given it&#39;s all feature requests or making it better, it&#39;s harder to find the time. But like I said, I am trying to get more into it these days. Hopefully there will be success."}], "tags": [], "owner": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "is_accepted": true, "score": 1, "last_activity_date": 1570551444, "creation_date": 1570551444, "answer_id": 58290298, "question_id": 58289054, "link": "https://stackoverflow.com/questions/58289054/cheezy-page-object-gem-dynamic-locator-for-generic-element/58290298#58290298", "title": "Cheezy Page-Object Gem Dynamic Locator for Generic Element?", "body": "<p>The generic dynamic element locator is defined in <a href=\"https://github.com/cheezy/page-object/blob/49a80488bfc9647f3869df53e06fabb9623caad2/lib/page-object/element_locators.rb\" rel=\"nofollow noreferrer\">PageObject::ElementLocators#element</a> as:</p>\n\n<pre><code>def element(tag, identifier={:index =&gt; 0})\n  platform.element_for(tag, identifier.clone)\nend\n</code></pre>\n\n<p>The first argument is the element's tag name. If you don't know the tag name, you can specify \"element\" for any tag. For example:</p>\n\n<pre><code>class MyPage\n  include PageObject\n\n  def do_stuff\n    element('element', class: 'class_name').text\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 548, "user_id": 4701396, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/0df3867dea5e05aa77615fdf2be0471b?s=128&d=identicon&r=PG&f=1", "display_name": "Bmoe", "link": "https://stackoverflow.com/users/4701396/bmoe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 94, "favorite_count": 0, "accepted_answer_id": 58290298, "answer_count": 1, "score": 2, "last_activity_date": 1570551444, "creation_date": 1570546854, "question_id": 58289054, "link": "https://stackoverflow.com/questions/58289054/cheezy-page-object-gem-dynamic-locator-for-generic-element", "title": "Cheezy Page-Object Gem Dynamic Locator for Generic Element?", "body": "<p>Using Cheezy's page-object gem I've come across the ability to have dynamic element locators. (Noted at this github issue: <a href=\"https://github.com/cheezy/page-object/issues/203\" rel=\"nofollow noreferrer\">https://github.com/cheezy/page-object/issues/203</a>).</p>\n\n<p>So for example I can do <code>span_element(id: 'some id')</code>, <code>div_element(class: 'some_class')</code>, etc. However what can I do if I need to locate a generic element? For example I could be working on a page that has angular so the elements are not traditional (like instead of a traditional html select control with options, it is a custom angular dropdown). I've tried <code>element_element(class: 'class_name')</code> and just <code>element(class: 'class_name')</code> but ruby says <code>method missing</code></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "routing", "routes"], "answers": [{"tags": [], "owner": {"reputation": 13378, "user_id": 1430810, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/v669u.jpg?s=128&g=1", "display_name": "arieljuod", "link": "https://stackoverflow.com/users/1430810/arieljuod"}, "is_accepted": false, "score": 0, "last_activity_date": 1570546196, "creation_date": 1570546196, "answer_id": 58288862, "question_id": 58288734, "link": "https://stackoverflow.com/questions/58288734/routing-error-no-route-matches-post-user-register/58288862#58288862", "title": "Routing Error No route matches [POST] &quot;/user/register&quot;", "body": "<p>You have <code>get 'user/register'</code>, it only matches a GET request, if you want to only match POST do <code>post 'user/register'</code>, if you want to match both GET and POST do <code>match 'user/register', via: [:get, :post]</code></p>\n"}, {"tags": [], "owner": {"reputation": 5312, "user_id": 6535997, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/10156345016155058/picture?type=large", "display_name": "Mark", "link": "https://stackoverflow.com/users/6535997/mark"}, "is_accepted": true, "score": 0, "last_activity_date": 1570546222, "creation_date": 1570546222, "answer_id": 58288869, "question_id": 58288734, "link": "https://stackoverflow.com/questions/58288734/routing-error-no-route-matches-post-user-register/58288869#58288869", "title": "Routing Error No route matches [POST] &quot;/user/register&quot;", "body": "<p>Try changing the get to a post:</p>\n\n<pre><code>## config/routes.rb\n\nRails.application.routes.draw do\n  get 'user/index'\n  post 'user/register'\n  get  'site/index'\n  get '/site/about'\n  get 'site/help'\n  get 'users/about', to: 'user#about'\n  get 'users/help', to: 'user#help'\n\n  root  'site#index'\nend\n</code></pre>\n"}], "owner": {"reputation": 35, "user_id": 12177861, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Ziym7Sw9M4U/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rf33P_m4XlTE5nWZqbY8KrAfxeVuQ/photo.jpg?sz=128", "display_name": "shubuya hushimo", "link": "https://stackoverflow.com/users/12177861/shubuya-hushimo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 210, "favorite_count": 0, "accepted_answer_id": 58288869, "answer_count": 2, "score": 1, "last_activity_date": 1570546222, "creation_date": 1570545825, "last_edit_date": 1570546131, "question_id": 58288734, "link": "https://stackoverflow.com/questions/58288734/routing-error-no-route-matches-post-user-register", "title": "Routing Error No route matches [POST] &quot;/user/register&quot;", "body": "<p>I'm trying to register users for my rails site. When I click the register button I get this:</p>\n\n<pre><code> Routing Error\n No route matches [POST] \"/user/register\"\n</code></pre>\n\n<p>Here is my user_controller.rb file:</p>\n\n<pre><code>class UserController &lt; ApplicationController\n\n\n  def index\n    @title = \"RailsSpace User Hub\"\n  end\n\n  def register\n    @title = \"Register\"\n    if request.post? and params[:user]\n      @user = User.new(params[:user])\n      if @user.save\n        flash[:notice] = \"User #{@user.screen_name} created!\"\n        redirect_to :action =&gt; \"index\"\n      end\n    end\n  end\nend\n</code></pre>\n\n<p>Here is my config/routes.rb file:</p>\n\n<pre><code>Rails.application.routes.draw do\n  get 'user/index'\n  get 'user/register'\n  get  'site/index'\n  get '/site/about'\n  get 'site/help'\n  get 'users/about', to: 'user#about'\n  get 'users/help', to: 'user#help'\n\n  root  'site#index'\nend\n</code></pre>\n\n<p>Here is my user/register.html.erb file:</p>\n\n<pre><code>&lt;h2&gt;Register&lt;/h2&gt;\n&lt;%= form_for :user do |form| %&gt;\n  &lt;fieldset&gt;\n    &lt;legend&gt;Enter Your Details&lt;/legend&gt;\n    &lt;div class=\"form_row\"&gt;\n      &lt;label for=\"screen_name\"&gt;Screen name:&lt;/label&gt;\n      &lt;%= form.text_field :screen_name,\n      :size =&gt; User::SCREEN_NAME_SIZE,\n      :maxlength =&gt; User::SCREEN_NAME_MAX_LENGTH %&gt;\n    &lt;/div&gt;\n    &lt;div class=\"form_row\"&gt;\n      &lt;label for=\"email\"&gt;Email:&lt;/label&gt;\n      &lt;%= form.text_field :email,\n      :size =&gt; User::EMAIL_SIZE,\n      :maxlength =&gt; User::EMAIL_MAX_LENGTH %&gt;\n    &lt;/div&gt;\n    &lt;div class=\"form_row\"&gt;\n      &lt;label for=\"password\"&gt;Password:&lt;/label&gt;\n      &lt;%= form.password_field :password,\n      :size =&gt; User::PASSWORD_SIZE,\n      :maxlength =&gt; User::PASSWORD_MAX_LENGTH %&gt;\n    &lt;/div&gt;\n    &lt;div class=\"form_row\"&gt;\n      &lt;%= submit_tag \"Register!\", :class =&gt; \"submit\" %&gt;\n    &lt;/div&gt;\n  &lt;/fieldset&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>Thanks so much for all your help in advance!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "redis", "ruby-on-rails-5", "sidekiq"], "comments": [{"owner": {"reputation": 13378, "user_id": 1430810, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/v669u.jpg?s=128&g=1", "display_name": "arieljuod", "link": "https://stackoverflow.com/users/1430810/arieljuod"}, "edited": false, "score": 3, "creation_date": 1570544609, "post_id": 58287152, "comment_id": 102941370, "body": "Check the sidekiq logs and see if you have any information there, you can also open a terminal, run the command without the <code>&amp;</code> at the end and keep the terminal open to see if it shows anything when it&#39;s kiled. Also, are you sure you want to run that with <code>-e development</code> and not production?? The only solution is log everything you can and inspect the logs until you find something."}, {"owner": {"reputation": 9877, "user_id": 92096, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0383770fd6f592f2219026793be13d3d?s=128&d=identicon&r=PG", "display_name": "pdu", "link": "https://stackoverflow.com/users/92096/pdu"}, "edited": false, "score": 0, "creation_date": 1571745403, "post_id": 58287152, "comment_id": 103335864, "body": "&quot;There is not any memory issue, My server RAM is 8 GB.&quot; - well, it still could be. If you have a leakage in your script and/or another process that is using much RAM for some reason, eventually at the same time, the OOM killer may terminate your process to free up RAM. I&#39;d suggest to also check your system logs for any indications."}, {"owner": {"reputation": 3154, "user_id": 5409748, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/DQWhS.jpg?s=128&g=1", "display_name": "Jai Kumar Rajput", "link": "https://stackoverflow.com/users/5409748/jai-kumar-rajput"}, "edited": false, "score": 0, "creation_date": 1571752252, "post_id": 58287152, "comment_id": 103339803, "body": "Hmm.. that may be a case, but I have checked in the deep didn&#39;t get any scenario."}], "owner": {"reputation": 3154, "user_id": 5409748, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/DQWhS.jpg?s=128&g=1", "display_name": "Jai Kumar Rajput", "link": "https://stackoverflow.com/users/5409748/jai-kumar-rajput"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 29, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1570540581, "creation_date": 1570540581, "question_id": 58287152, "link": "https://stackoverflow.com/questions/58287152/sidekiq-kills-in-between-without-any-reason-server-ram-is-approx-8gb", "title": "Sidekiq kills in between without any reason server RAM is approx 8GB", "body": "<p>I am working on the <strong>Ruby on rails</strong> application, my <code>workers</code> are running on the <code>sidekiq-6.0.1</code>. generally I'm using this to send the push notifications on android and ios devices etc.</p>\n\n<p>I'm running <strong>sidekiq</strong> in the background using the following command:</p>\n\n<pre><code>bundle exec sidekiq -L log/sidekiq.log -C config/sidekiq.yml -e development &amp;\n</code></pre>\n\n<p><strong>Sidekiq runs in background successfully but after a couple of hours or sometimes in a couple of minutes kills silently.</strong></p>\n\n<p>There is not any memory issue, My server RAM is 8 GB.</p>\n\n<p>Please help me to get a best way to deal with this case.</p>\n"}, {"tags": ["javascript", "ruby-on-rails", "arrays", "ruby"], "comments": [{"owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "edited": false, "score": 3, "creation_date": 1570540896, "post_id": 58287149, "comment_id": 102939159, "body": "What is the question?"}], "answers": [{"comments": [{"owner": {"reputation": 3926, "user_id": 2190621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c464f439212bca87517b234f7c9bd3e?s=128&d=identicon&r=PG&f=1", "display_name": "demir", "link": "https://stackoverflow.com/users/2190621/demir"}, "reply_to_user": {"reputation": 11, "user_id": 12124594, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-y94LPPF8IWk/AAAAAAAAAAI/AAAAAAAAABM/J4ekrbbobDo/photo.jpg?sz=128", "display_name": "Hamid Iqbal", "link": "https://stackoverflow.com/users/12124594/hamid-iqbal"}, "edited": false, "score": 0, "creation_date": 1570781100, "post_id": 58293717, "comment_id": 103029946, "body": "@HamidIqbal You&#39;re welcome. Would you mark my answer as an answer and upvote it? :)"}], "tags": [], "owner": {"reputation": 3926, "user_id": 2190621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c464f439212bca87517b234f7c9bd3e?s=128&d=identicon&r=PG&f=1", "display_name": "demir", "link": "https://stackoverflow.com/users/2190621/demir"}, "is_accepted": false, "score": 0, "last_activity_date": 1570566738, "creation_date": 1570566738, "answer_id": 58293717, "question_id": 58287149, "link": "https://stackoverflow.com/questions/58287149/iterate-ruby-array-to-javascript-array-with-passing-javascript-variable-to-ruby/58293717#58293717", "title": "Iterate ruby array to javascript array with passing javascript variable to ruby method", "body": "<p>You can\u2019t pass javascript variable to ruby code. To solve this problem, loop through the ruby array instead of javascript array:</p>\n\n<pre><code>&lt;% offer_categories_names.each_with_index do |offer_categories_name, i| %&gt;\n  if ('&lt;%= offer_categories_name %&gt;' == parent_dropdown_value) {\n    child_options_array = &lt;%= raw labels_json[i].to_json %&gt;;\n  }\n&lt;% end %&gt;\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 12124594, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-y94LPPF8IWk/AAAAAAAAAAI/AAAAAAAAABM/J4ekrbbobDo/photo.jpg?sz=128", "display_name": "Hamid Iqbal", "link": "https://stackoverflow.com/users/12124594/hamid-iqbal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 88, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1570566738, "creation_date": 1570540563, "last_edit_date": 1570566696, "question_id": 58287149, "link": "https://stackoverflow.com/questions/58287149/iterate-ruby-array-to-javascript-array-with-passing-javascript-variable-to-ruby", "title": "Iterate ruby array to javascript array with passing javascript variable to ruby method", "body": "<p>I want to iterate ruby array in javascript code. How can i pass <code>i</code> variable to <code>labels_json</code> array?</p>\n\n<pre><code>var offer_categories_names = &lt;%= raw(offer_categories_names) %&gt;;\nvar offer_sub_categories_list=new Array(offer_categories_names.length-1);\nfor (var i = 0; i &lt; offer_categories_names.length; i++) {\n  //console.log(offer_categories_names[i] + i);\n  if (offer_categories_names[i] == parent_dropdown_value) {\n    //iterator i instead of 0...9\n    child_options_array = &lt;%= raw(labels_json[0]) %&gt;;\n  }\n}\n</code></pre>\n"}, {"tags": ["ruby", "linux", "encryption", "base64"], "comments": [{"owner": {"reputation": 1278, "user_id": 2581168, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9b270277ab230e839d39ac0c67de6244?s=128&d=identicon&r=PG", "display_name": "ymbirtt", "link": "https://stackoverflow.com/users/2581168/ymbirtt"}, "edited": false, "score": 0, "creation_date": 1570540006, "post_id": 58286765, "comment_id": 102938679, "body": "You probably want to use <code>p</code> rather than <code>puts</code>. You&#39;ll find all the details here: <a href=\"https://stackoverflow.com/questions/1255324/p-vs-puts-in-ruby\">stackoverflow.com/questions/1255324/p-vs-puts-in-ruby</a>"}], "answers": [{"tags": [], "owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "is_accepted": true, "score": 0, "last_activity_date": 1570540568, "last_edit_date": 1570540568, "creation_date": 1570539747, "answer_id": 58286902, "question_id": 58286765, "link": "https://stackoverflow.com/questions/58286765/garbage-base64-decoded-string/58286902#58286902", "title": "Garbage Base64 decoded string", "body": "<p>A string like <code>\"\\x8B\"</code> is a representation of character, not the literal <code>\\x8B</code>. Ruby uses such representation if it's missing the font to display the character or if it messes with whitespacing (for example <code>\"\\n\"</code> is a newline and not <code>\\</code> followed by a <code>n</code>).</p>\n\n<p>The reason you get another output in irb is because you don't print the string using <code>puts</code> (like you do in your script). Simply calling <code>decoded_cookie</code> will return the string representation, not the actual content.</p>\n\n<p>You can display the actual content by simply printing it to an output.</p>\n\n<pre><code>require 'base64'\n\ncookie = \"YXNkZmctLTBEAiAvi95NGgcgk1W0pyUKXFEo6IuEvdxhmrfLqNVpskDv5AIgVn8wfIWf0y41cb%2Bx9I0ah%2F4BIIeRJ54nX2qGcxw567Y%3D\"\ndecoded_cookie = Base64.urlsafe_decode64(URI.decode(cookie))\nputs decoded_cookie\n# asdfg--0D /\ufffd\ufffdM \ufffdU\ufffd\ufffd%\n# \\Q(\u82c4\ufffd\ufffda\ufffd\ufffd\u02e8\ufffdi\ufffd@\ufffd\ufffd V0|\ufffd\ufffd\ufffd.5q\ufffd\ufffd\ufffd\ufffd\ufffd \ufffd\ufffd'\ufffd'_j\ufffds9\ufffd\n#=&gt; nil\n</code></pre>\n\n<p>You can find more info about the <code>\"\\xnn\"</code> representation <a href=\"https://ruby-doc.org/core-2.6.5/doc/syntax/literals_rdoc.html#label-Strings\" rel=\"nofollow noreferrer\">here</a>.</p>\n\n<p>If you'd like the script to display the string representation use <code>p</code> instead of <code>puts</code>, or use <code>puts decoded_cookie.inspect</code>.</p>\n"}], "owner": {"reputation": 27, "user_id": 11582737, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-nj7eyjxT6g8/AAAAAAAAAAI/AAAAAAAAAAg/jBWOSwVtMAw/photo.jpg?sz=128", "display_name": "Karol Mazurek", "link": "https://stackoverflow.com/users/11582737/karol-mazurek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "closed_date": 1570542202, "accepted_answer_id": 58286902, "answer_count": 1, "score": 0, "last_activity_date": 1570540568, "creation_date": 1570539217, "question_id": 58286765, "link": "https://stackoverflow.com/questions/58286765/garbage-base64-decoded-string", "closed_reason": "Duplicate", "title": "Garbage Base64 decoded string", "body": "<p>Could somebody explain me, why there are two various outputs?</p>\n\n<p>CODE IN IRB(Interactive ruby shell):</p>\n\n<pre><code>irb(main):001:0&gt; require 'base64'\n=&gt; true \nirb(main):002:0&gt; cookie = \"YXNkZmctLTBEAiAvi95NGgcgk1W0pyUKXFEo6IuEvdxhmrfLqNVpskDv5AIgVn8wfIWf0y41cb%2Bx9I0ah%2F4BIIeRJ54nX2qGcxw567Y%3D\"\n=&gt; \"YXNkZmctLTBEAiAvi95NGgcgk1W0pyUKXFEo6IuEvdxhmrfLqNVpskDv5AIgVn8wfIWf0y41cb%2Bx9I0ah%2F4BIIeRJ54nX2qGcxw567Y%3D\" \nirb(main):003:0&gt; decoded_cookie = Base64.urlsafe_decode64(URI.decode(cookie))\n=&gt; \"asdfg--0D\\x02 /\\x8B\\xDEM\\x1A\\a \\x93U\\xB4\\xA7%\\n\\\\Q(\\xE8\\x8B\\x84\\xBD\\xDCa\\x9A\\xB7\\xCB\\xA8\\xD5i\\xB2@\\xEF\\xE4\\x02 V\\x7F0|\\x85\\x9F\\xD3.5q\\xBF\\xB1\\xF4\\x8D\\x1A\\x87\\xFE\\x01 \\x87\\x91'\\x9E'_j\\x86s\\x1C9\\xEB\\xB6\"\n</code></pre>\n\n<p>Code from Linux terminal:</p>\n\n<pre><code>asd@asd:~# ruby script.rb\nasdfg--0D /\ufffd\ufffdM\ufffd \ufffdU\ufffd\ufffd%\n\\Q(\u82c4\ufffd\ufffda\ufffd\ufffd\u02e8\ufffdi\ufffd@\ufffd\ufffd V0|\ufffd\ufffd\ufffd.5q\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd \ufffd\ufffd'\ufffd'_j\ufffds9\ufffd\n</code></pre>\n\n<p>Script:</p>\n\n<pre><code>require 'base64'\nrequire 'ecdsa'\ncookie = \"YXNkZmctLTBEAiAvi95NGgcgk1W0pyUKXFEo6IuEvdxhmrfLqNVpskDv5AIgVn8wfIWf0y41cb%2Bx9I0ah%2F4BIIeRJ54nX2qGcxw567Y%3D\"\n\ndef decode_cookie(cookie)\n  decoded_cookie = Base64.urlsafe_decode64(URI.decode(cookie))\nend\n\nputs (decode_cookie(cookie))\n</code></pre>\n\n<p>How can i get the same output in terminal?\nI need the output:</p>\n\n<blockquote>\n  <p>\"asdfg--0D\\x02 /\\x8B\\xDEM\\x1A\\a \\x93U\\xB4\\xA7%\\n\\Q(\\xE8\\x8B\\x84\\xBD\\xDCa\\x9A\\xB7\\xCB\\xA8\\xD5i\\xB2@\\xEF\\xE4\\x02 V\\x7F0|\\x85\\x9F\\xD3.5q\\xBF\\xB1\\xF4\\x8D\\x1A\\x87\\xFE\\x01 \\x87\\x91'\\x9E'_j\\x86s\\x1C9\\xEB\\xB6\"</p>\n</blockquote>\n\n<p>In Linux terminal.</p>\n"}, {"tags": ["mysql", "ruby-on-rails", "ruby", "docker", "rubygems"], "comments": [{"owner": {"reputation": 1171, "user_id": 4466467, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8fa3cb584327391e71cfa7d6f7f652b1?s=128&d=identicon&r=PG&f=1", "display_name": "Sujan Adiga", "link": "https://stackoverflow.com/users/4466467/sujan-adiga"}, "edited": false, "score": 0, "creation_date": 1570534814, "post_id": 58285607, "comment_id": 102936123, "body": "Is <code>db</code> container running. Can you add the output of <code>docker-compose ps</code> to the question?"}, {"owner": {"reputation": 11, "user_id": 12181943, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-LpHI0enTBI4/AAAAAAAAAAI/AAAAAAAAAAA/yhebCRF2eBg/photo.jpg?sz=128", "display_name": "user116784", "link": "https://stackoverflow.com/users/12181943/user116784"}, "reply_to_user": {"reputation": 1171, "user_id": 4466467, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8fa3cb584327391e71cfa7d6f7f652b1?s=128&d=identicon&r=PG&f=1", "display_name": "Sujan Adiga", "link": "https://stackoverflow.com/users/4466467/sujan-adiga"}, "edited": false, "score": 0, "creation_date": 1570536070, "post_id": 58285607, "comment_id": 102936670, "body": "I&#39;m sorry. docker-compose build is taking time."}, {"owner": {"reputation": 11, "user_id": 12181943, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-LpHI0enTBI4/AAAAAAAAAAI/AAAAAAAAAAA/yhebCRF2eBg/photo.jpg?sz=128", "display_name": "user116784", "link": "https://stackoverflow.com/users/12181943/user116784"}, "reply_to_user": {"reputation": 1171, "user_id": 4466467, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8fa3cb584327391e71cfa7d6f7f652b1?s=128&d=identicon&r=PG&f=1", "display_name": "Sujan Adiga", "link": "https://stackoverflow.com/users/4466467/sujan-adiga"}, "edited": false, "score": 0, "creation_date": 1570536716, "post_id": 58285607, "comment_id": 102936982, "body": "I added docker-compose ps result inside terminal."}, {"owner": {"reputation": 1171, "user_id": 4466467, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8fa3cb584327391e71cfa7d6f7f652b1?s=128&d=identicon&r=PG&f=1", "display_name": "Sujan Adiga", "link": "https://stackoverflow.com/users/4466467/sujan-adiga"}, "edited": false, "score": 0, "creation_date": 1570538769, "post_id": 58285607, "comment_id": 102937995, "body": "I don&#39;t see service with name <code>db</code> not running(from docker-compose ps output). That is the reason why your rails application is not able to connect to mysql server at host <code>db</code> Run the service <code>db</code> by running <code>docker-compose up -d db</code>"}, {"owner": {"reputation": 2000, "user_id": 952740, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/d758ce8171d8e74b9c5f5a2e701f1b9b?s=128&d=identicon&r=PG", "display_name": "Nick M", "link": "https://stackoverflow.com/users/952740/nick-m"}, "edited": false, "score": 0, "creation_date": 1570538944, "post_id": 58285607, "comment_id": 102938097, "body": "I&#39;ve discovered if you want to reliably use container names with docker you need a middleman dns server to resolve the host names to docker IPs. There are some scripts and solutions to choose from out there."}], "answers": [{"tags": [], "owner": {"reputation": 2966, "user_id": 308523, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qOeK7.jpg?s=128&g=1", "display_name": "Fer", "link": "https://stackoverflow.com/users/308523/fer"}, "is_accepted": false, "score": 2, "last_activity_date": 1570604555, "last_edit_date": 1570604555, "creation_date": 1570540562, "answer_id": 58287148, "question_id": 58285607, "link": "https://stackoverflow.com/questions/58285607/i-want-to-delete-mysql2-error-connectionerror-unknown-mysql-server-host/58287148#58287148", "title": "I want to delete &quot;Mysql2 :: Error :: ConnectionError (Unknown MySQL server host &#39;db&#39; (0)):&quot;", "body": "<p>That error is telling you that the host <code>db</code> is unknown.</p>\n\n<p>You are running <code>rails s</code> on your terminal. That is starting your rails server <strong>outside</strong> of docker, therefore the host <code>db</code> cannot be resolved. (You only have that kind of DNS resolution for the containers running within the same docker network)</p>\n\n<p>You should just run <code>docker-compose up</code> so that <strong>both</strong> services defined in your docker-compose.yml (<code>web</code> and <code>db</code>) start in the same network (docker-compose takes care of that, you don't need to do any extra setup for it)</p>\n"}, {"comments": [{"owner": {"reputation": 2966, "user_id": 308523, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qOeK7.jpg?s=128&g=1", "display_name": "Fer", "link": "https://stackoverflow.com/users/308523/fer"}, "edited": false, "score": 0, "creation_date": 1570604484, "post_id": 58287456, "comment_id": 102960047, "body": "giving static IPs to your containers is a very very bad approach"}], "tags": [], "owner": {"reputation": 759, "user_id": 4352003, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/I0GKg.jpg?s=128&g=1", "display_name": "Yury Matusevich", "link": "https://stackoverflow.com/users/4352003/yury-matusevich"}, "is_accepted": false, "score": 0, "last_activity_date": 1570541665, "creation_date": 1570541665, "answer_id": 58287456, "question_id": 58285607, "link": "https://stackoverflow.com/questions/58285607/i-want-to-delete-mysql2-error-connectionerror-unknown-mysql-server-host/58287456#58287456", "title": "I want to delete &quot;Mysql2 :: Error :: ConnectionError (Unknown MySQL server host &#39;db&#39; (0)):&quot;", "body": "<p>You can create a network that will be shared inside your docker between images</p>\n\n<pre><code>networks:\n  my_network:\n    driver: bridge\n    ipam:\n      driver: default\n      config:\n        - subnet: 172.25.0.1/16\n          gateway: 172.25.0.1\n</code></pre>\n\n<p>Then assign specific IP to your db container:</p>\n\n<pre><code>networks:\n  my_network:\n    ipv4_address: 172.25.0.3\n</code></pre>\n\n<p>After that you need to make sure <code>db</code> hostname is linked with db container IP.\nThe code bellow will add new line <code>172.25.0.3 db</code> to you <code>/etc/hosts</code> file. </p>\n\n<pre><code>extra_hosts:\n  - 'db:172.25.0.3'\n</code></pre>\n\n<p>Final version of docker-compose will look like this:</p>\n\n<pre><code>version: '3'\nservices:\n  web:\n    build: .\n    command: bundle exec rails s -p 3000 -b '0.0.0.0'\n    volumes:\n      - .:/app\n    ports:\n      - 3000:3000\n    depends_on:\n      - db\n    tty: true\n    stdin_open: true\n  extra_hosts:\n    - 'db:172.25.0.3'\n\n  db:\n    image: mysql:5.7\n    volumes:\n      - db-volume:/var/lib/mysql\n    environment:\n      MYSQL_ROOT_PASSWORD: password\n    networks:\n      my_network:\n        ipv4_address: 172.25.0.3\n\nvolumes:\n  db-volume:\n\nnetworks:\n  my_network:\n    driver: bridge\n    ipam:\n      driver: default\n      config:\n        - subnet: 172.25.0.1/16\n          gateway: 172.25.0.1\n\n</code></pre>\n\n<p>If you do this you can be sure that <code>db</code> host will be always available. I hope that will help you.</p>\n"}], "owner": {"reputation": 11, "user_id": 12181943, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-LpHI0enTBI4/AAAAAAAAAAI/AAAAAAAAAAA/yhebCRF2eBg/photo.jpg?sz=128", "display_name": "user116784", "link": "https://stackoverflow.com/users/12181943/user116784"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2009, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1570604555, "creation_date": 1570534654, "last_edit_date": 1570536637, "question_id": 58285607, "link": "https://stackoverflow.com/questions/58285607/i-want-to-delete-mysql2-error-connectionerror-unknown-mysql-server-host", "title": "I want to delete &quot;Mysql2 :: Error :: ConnectionError (Unknown MySQL server host &#39;db&#39; (0)):&quot;", "body": "<h2>  environment</h2>\n\n<pre><code>- MacOS Mojave 10.14.6\n- Ruby 2.6.4\n- Rails 5.2.2\n- mysql  Ver 8.0.17 for osx10.14 on x86_64 (Homebrew)\n- Docker 2.1.0.3\n</code></pre>\n\n<h2>What I want to realize</h2>\n\n<p>I want to clear the following error.</p>\n\n<pre><code>Mysql2::Error::ConnectionError (Unknown MySQL server host 'db' (0)):\n</code></pre>\n\n<h2>Terminal</h2>\n\n<pre><code>$ rails s\n=&gt; Booting Puma\n=&gt; Rails 5.2.2 application starting in development\n=&gt; Run `rails server -h` for more startup options\nPuma starting in single mode...\n* Version 3.12.1 (ruby 2.6.4-p104), codename: Llamas in Pajamas\n* Min threads: 5, max threads: 5\n* Environment: development\n* Listening on tcp://localhost:3000\nUse Ctrl-C to stop\nStarted GET \"/\" for ::1 at 2019-10-07 22:11:28 +0900\n\nMysql2::Error::ConnectionError (Unknown MySQL server host 'db' (0)):\n...\n$ docker-compose ps\n      Name                    Command               State           Ports\n--------------------------------------------------------------------------------\nrails_test_db_1    docker-entrypoint.sh mysqld      Up       3306/tcp, 33060/tcp\nrails_test_web_1   bundle exec rails s -p 300 ...   Exit 1\n</code></pre>\n\n<h2>docker-compose.yml</h2>\n\n<pre><code>version: '3'\nservices:\n  web:\n    build: .\n    command: bundle exec rails s -p 3000 -b '0.0.0.0'\n    volumes:\n      - .:/app\n    ports:\n      - 3000:3000\n    depends_on:\n      - db\n    tty: true\n    stdin_open: true\n  db:\n    image: mysql:5.7\n    volumes:\n      - db-volume:/var/lib/mysql\n    environment:\n      MYSQL_ROOT_PASSWORD: password\nvolumes:\n  db-volume:\n</code></pre>\n\n<h2>database.yml</h2>\n\n<pre><code># MySQL. Versions 5.0 and up are supported.\n#\n# Install the MySQL driver\n#   gem install mysql2\n#\n# Ensure the MySQL gem is defined in your Gemfile\n#   gem 'mysql2'\n#\n# And be sure to use new-style password hashing:\n#   http://dev.mysql.com/doc/refman/5.7/en/old-client.html\n#\ndefault: &amp;default\n  adapter: mysql2\n  encoding: utf8\n  pool: 5\n  username: root\n  password: password\n  host: db\n\ndevelopment:\n  &lt;&lt;: *default\n  database: app_development\n\n# Warning: The database defined as \"test\" will be erased and\n# re-generated from your development database when you run \"rake\".\n# Do not set this db to the same as development or production.\ntest:\n  &lt;&lt;: *default\n  database: app_test\n\n# As with config/secrets.yml, you never want to store sensitive information,\n# like your database password, in your source code. If your source code is\n# ever seen by anyone, they now have access to your database.\n#\n# Instead, provide the password as a unix environment variable when you boot\n# the app. Read http://guides.rubyonrails.org/configuring.html#configuring-a-database\n# for a full rundown on how to provide these environment variables in a\n# production deployment.\n#\n# On Heroku and other platform providers, you may have a full connection URL\n# available as an environment variable. For example:\n#\n#   DATABASE_URL=\"mysql2://myuser:mypass@localhost/somedatabase\"\n#\n# You can use this database configuration with:\n#\n#   production:\n#     url: &lt;%= ENV['DATABASE_URL'] %&gt;\n#\nproduction:\n  &lt;&lt;: *default\n  database: app_production\n  username: app\n  password: &lt;%= ENV['APP_DATABASE_PASSWORD'] %&gt;\n</code></pre>\n"}, {"tags": ["regex", "ruby"], "comments": [{"owner": {"reputation": 742, "user_id": 1507066, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/2aa876aa0d2187ccd991e64b8008a0bc?s=128&d=identicon&r=PG", "display_name": "achempion", "link": "https://stackoverflow.com/users/1507066/achempion"}, "edited": false, "score": 3, "creation_date": 1570534303, "post_id": 58285469, "comment_id": 102935903, "body": "Could you please provide an example to check against? Like &quot;I expect <code>regex(&quot;abc&quot;)</code> to return <code>b</code>&quot;. Thank you."}, {"owner": {"reputation": 33, "user_id": 12182000, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mAzgRmdc7c7s5Va_cL75X9aLZ7MuwDF3ATFR-kL=k-s128", "display_name": "AshmaN3D", "link": "https://stackoverflow.com/users/12182000/ashman3d"}, "reply_to_user": {"reputation": 742, "user_id": 1507066, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/2aa876aa0d2187ccd991e64b8008a0bc?s=128&d=identicon&r=PG", "display_name": "achempion", "link": "https://stackoverflow.com/users/1507066/achempion"}, "edited": false, "score": 0, "creation_date": 1570534577, "post_id": 58285469, "comment_id": 102936029, "body": "text = &quot;&#252;bung bzw. &#228;ffchen&quot; text.gsub!(/\\W/, &#39;&#39;). Now it would return &quot;bungbzwffchen&quot;. It deletes the non word characters, but also removes the mutated vowels &#252; and &#228;, which I want to keep"}, {"owner": {"reputation": 2251, "user_id": 9785060, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IUduC.png?s=128&g=1", "display_name": "Viktor", "link": "https://stackoverflow.com/users/9785060/viktor"}, "edited": false, "score": 3, "creation_date": 1570534768, "post_id": 58285469, "comment_id": 102936102, "body": "@AshmaN3D Edit your question instead of adding comments so people interested in answering the question don&#39;t have to dig through the comment section"}, {"owner": {"reputation": 5449, "user_id": 681520, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/701baebf68d1d7faa9f9def6a24fe356?s=128&d=identicon&r=PG", "display_name": "Kimmo Lehto", "link": "https://stackoverflow.com/users/681520/kimmo-lehto"}, "edited": false, "score": 0, "creation_date": 1570535899, "post_id": 58285469, "comment_id": 102936594, "body": "Don&#39;t forget  \u1e9e / &#223;"}], "answers": [{"comments": [{"owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "edited": false, "score": 1, "creation_date": 1570534744, "post_id": 58285588, "comment_id": 102936097, "body": "Good answer. Might be worth clarifying that <code>\\W</code> is simply <code>[^\\w]</code> on its own."}, {"owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "edited": false, "score": 0, "creation_date": 1570534966, "post_id": 58285588, "comment_id": 102936195, "body": "The <code>\\p{...}</code> documentation can be found <a href=\"https://ruby-doc.org/core-2.6.5/doc/regexp_rdoc.html#label-Character+Properties\" rel=\"nofollow noreferrer\">here</a>."}, {"owner": {"reputation": 33, "user_id": 12182000, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mAzgRmdc7c7s5Va_cL75X9aLZ7MuwDF3ATFR-kL=k-s128", "display_name": "AshmaN3D", "link": "https://stackoverflow.com/users/12182000/ashman3d"}, "edited": false, "score": 0, "creation_date": 1570535801, "post_id": 58285588, "comment_id": 102936552, "body": "So \\W and [^\\w] are the same? But why does it work with [^\\w] and not with \\W?"}, {"owner": {"reputation": 5449, "user_id": 681520, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/701baebf68d1d7faa9f9def6a24fe356?s=128&d=identicon&r=PG", "display_name": "Kimmo Lehto", "link": "https://stackoverflow.com/users/681520/kimmo-lehto"}, "edited": false, "score": 1, "creation_date": 1570536700, "post_id": 58285588, "comment_id": 102936972, "body": "The <code>^</code> just works in character classes <code>[^...]</code> but you can put <code>\\w</code> inside a character class to include all word characters. <code>[a-z&#228;&#246;&#252;]</code> would work if you just want lower case."}, {"owner": {"reputation": 5449, "user_id": 681520, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/701baebf68d1d7faa9f9def6a24fe356?s=128&d=identicon&r=PG", "display_name": "Kimmo Lehto", "link": "https://stackoverflow.com/users/681520/kimmo-lehto"}, "edited": false, "score": 0, "creation_date": 1570602915, "post_id": 58285588, "comment_id": 102959301, "body": "<code>\\W</code> also just defines a character class and is a shorthand for something like <code>[ ,.-()=!&quot;#]</code>"}], "tags": [], "owner": {"reputation": 5449, "user_id": 681520, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/701baebf68d1d7faa9f9def6a24fe356?s=128&d=identicon&r=PG", "display_name": "Kimmo Lehto", "link": "https://stackoverflow.com/users/681520/kimmo-lehto"}, "is_accepted": true, "score": 5, "last_activity_date": 1570536591, "last_edit_date": 1570536591, "creation_date": 1570534581, "answer_id": 58285588, "question_id": 58285469, "link": "https://stackoverflow.com/questions/58285469/how-to-remove-all-non-word-characters-except-%c3%a4-%c3%b6-and-%c3%bc-from-a-text-using-regexp/58285588#58285588", "title": "How to remove all non word characters except &#228;,&#246; and &#252; from a text using RegExp", "body": "<p>You may be able to define a list of exclusions by using some kind of negative-lookback thing, but the simplest I think would be to just use <code>\\w</code> instead of <code>\\W</code> and negate the whole group:</p>\n\n<pre><code>word.gsub!(/[^\\w\u00c4\u00e4\u00d6\u00f6\u00dc\u00fc]/, '') \n</code></pre>\n\n<p>You could also use <code>word.gsub(/[^\\p{Letter}]/, '')</code>, that should get rid of any characters that are not listed as \"Letter\" in unicode.</p>\n\n<p>You mention German vowels in your question, I think it's worth noting here that the German alphabet also includes the long-s : \u1e9e / \u00df</p>\n\n<p>Update:</p>\n\n<p>To answer your original question, to define a list of exclusions, you use the \"negative look-behind\" <code>(?&lt;!pat)</code>:</p>\n\n<pre><code>word.gsub(/\\W(?&lt;![\u00c4\u00e4\u00d6\u00f6\u00c5\u00e5\u1e9e\u00df])/, '')\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 0, "last_activity_date": 1570545601, "last_edit_date": 1570545601, "creation_date": 1570544736, "answer_id": 58288376, "question_id": 58285469, "link": "https://stackoverflow.com/questions/58285469/how-to-remove-all-non-word-characters-except-%c3%a4-%c3%b6-and-%c3%bc-from-a-text-using-regexp/58288376#58288376", "title": "How to remove all non word characters except &#228;,&#246; and &#252; from a text using RegExp", "body": "<p>You could use the <code>&amp;&amp;</code> operator within a character class:</p>\n\n<pre><code>text = \"\u00fcbung bzw. \u00e4ffchen  \u00c4\u00d6\u00dc\"\n\ntext.gsub(/[\\W&amp;&amp;[^\u00e4\u00c4\u00f6\u00d6\u00fc\u00dc]]/, '')\n  #=&gt; \"\u00fcbungbzw\u00e4ffchen\u00c4\u00d6\u00dc\"\n</code></pre>\n\n<p>The regular expression reads, \"match a character in the set of characters formed by intersecting the set of all non-word characters with the set of all characters other than those in the string <code>\"\u00e4\u00c4\u00f6\u00d6\u00fc\u00dc\"</code>. See <a href=\"https://ruby-doc.org/core-2.6.3/Regexp.html\" rel=\"nofollow noreferrer\">Regexp</a> (search for \"&amp;&amp; operator\"). </p>\n"}], "owner": {"reputation": 33, "user_id": 12182000, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mAzgRmdc7c7s5Va_cL75X9aLZ7MuwDF3ATFR-kL=k-s128", "display_name": "AshmaN3D", "link": "https://stackoverflow.com/users/12182000/ashman3d"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 158, "favorite_count": 0, "accepted_answer_id": 58285588, "answer_count": 2, "score": 3, "last_activity_date": 1570545601, "creation_date": 1570533991, "last_edit_date": 1570538234, "question_id": 58285469, "link": "https://stackoverflow.com/questions/58285469/how-to-remove-all-non-word-characters-except-%c3%a4-%c3%b6-and-%c3%bc-from-a-text-using-regexp", "title": "How to remove all non word characters except &#228;,&#246; and &#252; from a text using RegExp", "body": "<p>I have a file and I want to remove all non-word characters from it, with the exception of <code>\u00e4</code>, <code>\u00f6</code> and <code>\u00fc</code>, which are mutated vowels in the German language. Is there a way to do <code>word.gsub!(/\\W/, '')</code> and put exceptions in it?</p>\n\n<p>Example:</p>\n\n<pre><code>text = \"\u00fcbung bzw. \u00e4ffchen\"\ntext.gsub!(/\\W/, '').\n</code></pre>\n\n<p>Now it would return <code>\"bungbzwffchen\"</code>. It deletes the non word characters, but also removes the mutated vowels <code>\u00fc</code> and <code>\u00e4</code>, which I want to keep.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "counter-cache"], "comments": [{"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1570532150, "post_id": 58284903, "comment_id": 102934936, "body": "Did my <a href=\"https://stackoverflow.com/q/58271158/1954610\">previous comment</a> help?"}, {"owner": {"reputation": 1285, "user_id": 10443890, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de817ef35c4a2bdd0501efbdc6d9a338?s=128&d=identicon&r=PG&f=1", "display_name": "mr_muscle", "link": "https://stackoverflow.com/users/10443890/mr-muscle"}, "reply_to_user": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1570532907, "post_id": 58284903, "comment_id": 102935245, "body": "@TomLord Thanks for that! It was helpful but now if I manage how to update manually this counter cache I think I will be able to implement this solution to my endpoint, like with <code>total_campaign_codes_amount</code>"}, {"owner": {"reputation": 5966, "user_id": 2477691, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/DaiPF.jpg?s=128&g=1", "display_name": "chumakoff", "link": "https://stackoverflow.com/users/2477691/chumakoff"}, "edited": false, "score": 0, "creation_date": 1570566223, "post_id": 58284903, "comment_id": 102951188, "body": "<code>... , class_name: &#39;CampaignCode&#39;, ...</code>  Are you sure this is correct?"}, {"owner": {"reputation": 1285, "user_id": 10443890, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de817ef35c4a2bdd0501efbdc6d9a338?s=128&d=identicon&r=PG&f=1", "display_name": "mr_muscle", "link": "https://stackoverflow.com/users/10443890/mr-muscle"}, "reply_to_user": {"reputation": 5966, "user_id": 2477691, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/DaiPF.jpg?s=128&g=1", "display_name": "chumakoff", "link": "https://stackoverflow.com/users/2477691/chumakoff"}, "edited": false, "score": 0, "creation_date": 1570620305, "post_id": 58284903, "comment_id": 102968383, "body": "@chumakoff Yup it is"}, {"owner": {"reputation": 5966, "user_id": 2477691, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/DaiPF.jpg?s=128&g=1", "display_name": "chumakoff", "link": "https://stackoverflow.com/users/2477691/chumakoff"}, "edited": false, "score": 0, "creation_date": 1570620749, "post_id": 58284903, "comment_id": 102968626, "body": "<code>campaign_code</code> belongs to <code>campaign_code</code>?"}, {"owner": {"reputation": 1285, "user_id": 10443890, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de817ef35c4a2bdd0501efbdc6d9a338?s=128&d=identicon&r=PG&f=1", "display_name": "mr_muscle", "link": "https://stackoverflow.com/users/10443890/mr-muscle"}, "edited": false, "score": 0, "creation_date": 1570620939, "post_id": 58284903, "comment_id": 102968743, "body": "<code>campaign_code</code> belongs to <code>used_credit_campaign</code>"}, {"owner": {"reputation": 5966, "user_id": 2477691, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/DaiPF.jpg?s=128&g=1", "display_name": "chumakoff", "link": "https://stackoverflow.com/users/2477691/chumakoff"}, "edited": false, "score": 0, "creation_date": 1570698714, "post_id": 58284903, "comment_id": 102998057, "body": "<code>used_credit_campaign</code> is a <code>CreditCampaign</code>. So it must be <code>class_name: &#39;CreditCampaign&#39;</code>"}, {"owner": {"reputation": 1285, "user_id": 10443890, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de817ef35c4a2bdd0501efbdc6d9a338?s=128&d=identicon&r=PG&f=1", "display_name": "mr_muscle", "link": "https://stackoverflow.com/users/10443890/mr-muscle"}, "reply_to_user": {"reputation": 5966, "user_id": 2477691, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/DaiPF.jpg?s=128&g=1", "display_name": "chumakoff", "link": "https://stackoverflow.com/users/2477691/chumakoff"}, "edited": false, "score": 0, "creation_date": 1570700165, "post_id": 58284903, "comment_id": 102998851, "body": "@chumakoff in such case I should move <code>used_campaign_codes_amount</code> to the <code>CreditCampaign</code> model which I don&#39;t want to do. However I think @TomLord is right, counter cache doesn&#39;t work in scope, in that case I will leave it only for <code>total_campaign_codes_amount</code>."}], "owner": {"reputation": 1285, "user_id": 10443890, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de817ef35c4a2bdd0501efbdc6d9a338?s=128&d=identicon&r=PG&f=1", "display_name": "mr_muscle", "link": "https://stackoverflow.com/users/10443890/mr-muscle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 152, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1570531815, "creation_date": 1570531815, "question_id": 58284903, "link": "https://stackoverflow.com/questions/58284903/rails-reset-counters-in-counter-cache-with-conditions", "title": "Rails reset_counters in counter_cache with conditions", "body": "<p>I've two counter_cache, one for total number of <code>campaign_codes</code> and one only when <code>campaign_code</code> was used - <code>campaign_codes.where(state: 'used')</code>. To update total number of <code>campaign_codes</code> in the <code>rails c</code> I used script like:</p>\n\n<p><code>CreditCampaign.reset_counters(CreditCampaign.first.id, :campaign_codes)</code></p>\n\n<p>but this works only for total number of campaign_codes. How to setup the script in console for used campaign?</p>\n\n<p><code>CampaignCode</code> model</p>\n\n<pre><code>class CampaignCode &lt; ApplicationRecord\n  belongs_to :credit_campaign, counter_cache: :total_campaign_codes_amount\n  belongs_to :used_credit_campaign, -&gt; { where(state: 'used') }, class_name: 'CampaignCode', counter_cache: :used_campaign_codes_amount, optional: true\nend\n</code></pre>\n\n<p><code>CreditCampaign</code> model</p>\n\n<pre><code>class CreditCampaign &lt; ApplicationRecord\n  has_many :campaign_codes\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1570531813, "post_id": 58284566, "comment_id": 102934786, "body": "You want the page to 404, if any query <code>params</code> are present? That doesn&#39;t make much sense. It sounds like what you should really be doing is changing to cacheing strategy to ignore params."}, {"owner": {"reputation": 1796, "user_id": 2809686, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/df4c97dd08b33a8a0684cd226bfe89ce?s=128&d=identicon&r=PG&f=1", "display_name": "Kingsley Simon", "link": "https://stackoverflow.com/users/2809686/kingsley-simon"}, "reply_to_user": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1570531957, "post_id": 58284566, "comment_id": 102934849, "body": "@TomLord how do i achieve the caching strategy to ignore params. And if i want o add a constraints that it should return 404 if the params field is there. how do i do that as well?"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1570532085, "post_id": 58284566, "comment_id": 102934902, "body": "What is your current cacheing strategy? I cannot answer how to improve it, if I don&#39;t know what it is currently. As for returning 404 if params are present, you could do this with a <code>before_action</code> in the controller -- but it would be <b>weird</b> behaviour! It&#39;s almost certainly going to come back to bits you in future, as a bad design."}, {"owner": {"reputation": 1796, "user_id": 2809686, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/df4c97dd08b33a8a0684cd226bfe89ce?s=128&d=identicon&r=PG&f=1", "display_name": "Kingsley Simon", "link": "https://stackoverflow.com/users/2809686/kingsley-simon"}, "reply_to_user": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1570532440, "post_id": 58284566, "comment_id": 102935054, "body": "not using any current caching strategy at the moment @TomLord. Not sure why you keep saying its a bad design. im trying to prevent against web cache deception attack"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1570534058, "post_id": 58284566, "comment_id": 102935789, "body": "So you have no cache, and are worried about someone bypassing the non-existent cache? I don&#39;t follow."}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1570534278, "post_id": 58284566, "comment_id": 102935893, "body": "It&#39;s a bad design because a request to any given URL should (unless there&#39;s a good reason otherwise, e.g. for a search endpoint) always return the same response. <code>params</code> are by default <i>ignored</i> by the server. You never know what params might be added one day - e.g. <code>referrer</code>, or <code>utm_medium</code>, or <code>new_user</code>, or ... Literally anything. Returning a <code>404 </code> status simply because it&#39;s an unknown parameter isn&#39;t how 99.999% of the internet works."}, {"owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "edited": false, "score": 0, "creation_date": 1570539040, "post_id": 58284566, "comment_id": 102938156, "body": "<i>&quot;The attacker attempts to trigger the caching of content that the origin would typically not allow to be cached.&quot;</i> - <a href=\"https://blogs.akamai.com/2017/03/on-web-cache-deception-attacks.html\" rel=\"nofollow noreferrer\">Benjamin Brown</a> This is not something you should configure in your Rails server, but rather your caching service (CDN, load balancer, etc)."}], "owner": {"reputation": 1796, "user_id": 2809686, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/df4c97dd08b33a8a0684cd226bfe89ce?s=128&d=identicon&r=PG&f=1", "display_name": "Kingsley Simon", "link": "https://stackoverflow.com/users/2809686/kingsley-simon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 39, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1570530502, "creation_date": 1570530502, "question_id": 58284566, "link": "https://stackoverflow.com/questions/58284566/handling-constraints-for-nonexistent-routes-ruby-on-rails", "title": "Handling Constraints for Nonexistent Routes Ruby on Rails", "body": "<p>I am trying to return a 404 error when certain urls are called in my application. </p>\n\n<p>In my routes.rb, i have the following</p>\n\n<pre><code>resources :motor_insurance_products, path: '/car-insurance' do\n  collection do\n    get '/:id' =&gt; 'motor_insurance_products#show'\n  end\nend\n</code></pre>\n\n<p>Which means that this is a valid url</p>\n\n<pre><code>localhost:3000/car-insurance/product-one\n</code></pre>\n\n<p>But when a user tries a web cache deception attack and uses this url </p>\n\n<blockquote>\n  <p>localhost:3000/car-insurance/product-one?field=abc/text.jpg</p>\n</blockquote>\n\n<p>This also passes and shows the correct page. </p>\n\n<p>I want when someone puts in an invalid url like this. I would like to redirect and show error code 404 page not found. How do i do it the cleanest way in ruby?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "parsing", "docx"], "comments": [{"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 1, "creation_date": 1570527253, "post_id": 58283318, "comment_id": 102932630, "body": "StackOverflow is not a forum to ask for 3rd party library recommendations. (Honestly, a quick google search would have found you the same answer.) However, if you&#39;ve tried using some library, got stuck and can <b>show us some code</b>, then StackOverflow is a good place to ask for pointers on what you might need to try next."}, {"owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "reply_to_user": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1570533171, "post_id": 58283318, "comment_id": 102935373, "body": "@TomLord Just out of curiosity. What is a good website where you can get opinion based answers? Such as recommendations about gems, pattern implementations, software, etc."}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1570534479, "post_id": 58283318, "comment_id": 102935985, "body": "A discussion forum - e.g. discourse, or reddit, or hacker news,... Or you could use a  discussion group on slack, or the ruby talk group (email list), ..."}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 11068464, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0da51aab21127e83e27fde9558a94cb4?s=128&d=identicon&r=PG&f=1", "display_name": "nobody ", "link": "https://stackoverflow.com/users/11068464/nobody"}, "edited": false, "score": 0, "creation_date": 1570527099, "post_id": 58283459, "comment_id": 102932550, "body": "But what if I need to do the same for pdf or Linux .odt file? There is no universal tool for this?"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 1, "creation_date": 1570527352, "post_id": 58283459, "comment_id": 102932680, "body": "It wouldn&#39;t make sense to build a &quot;universal tool&quot; like that. It would be code bloat. Someone else, who only wants to deal with <code>.docx</code> files, would complain that the library is unnecessarily large - as it supports all sorts of other use cases."}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 1, "creation_date": 1570527377, "post_id": 58283459, "comment_id": 102932691, "body": "If you need to process <code>.pdf</code> files (which you never mentioned in the original question, I might add), use a second library."}, {"owner": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "edited": false, "score": 1, "creation_date": 1570527606, "post_id": 58283459, "comment_id": 102932789, "body": "ODT, DOCX and PDF are completely different formats, no wonder they have separate libs for processing."}, {"owner": {"reputation": 23, "user_id": 11068464, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0da51aab21127e83e27fde9558a94cb4?s=128&d=identicon&r=PG&f=1", "display_name": "nobody ", "link": "https://stackoverflow.com/users/11068464/nobody"}, "edited": false, "score": 0, "creation_date": 1570527738, "post_id": 58283459, "comment_id": 102932854, "body": "Got it. Thank you"}], "tags": [], "owner": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "is_accepted": true, "score": 1, "last_activity_date": 1570526431, "creation_date": 1570526431, "answer_id": 58283459, "question_id": 58283318, "link": "https://stackoverflow.com/questions/58283318/how-to-parse-word-files-in-rails/58283459#58283459", "title": "How to parse word files in rails?", "body": "<p>You can use <a href=\"https://github.com/chrahunt/docx\" rel=\"nofollow noreferrer\">docx</a> gem for that.</p>\n"}], "owner": {"reputation": 23, "user_id": 11068464, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0da51aab21127e83e27fde9558a94cb4?s=128&d=identicon&r=PG&f=1", "display_name": "nobody ", "link": "https://stackoverflow.com/users/11068464/nobody"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 99, "favorite_count": 0, "closed_date": 1570538489, "accepted_answer_id": 58283459, "answer_count": 1, "score": -1, "last_activity_date": 1570526455, "creation_date": 1570525840, "last_edit_date": 1570526455, "question_id": 58283318, "link": "https://stackoverflow.com/questions/58283318/how-to-parse-word-files-in-rails", "closed_reason": "Not suitable for this site", "title": "How to parse word files in rails?", "body": "<p>I want to be able to parse Word files in my project.\nFor example, I need to find a title or a table there. Or define the font name and font size. How do i do this? Are there any gems for this?</p>\n\n<p>I will be grateful for the help.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "state-machine"], "comments": [{"owner": {"reputation": 759, "user_id": 9174431, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a8f67982fb2ef93d0ebf92453b00fe5?s=128&d=identicon&r=PG", "display_name": "Giuseppe Schembri", "link": "https://stackoverflow.com/users/9174431/giuseppe-schembri"}, "edited": false, "score": 0, "creation_date": 1571590317, "post_id": 58281942, "comment_id": 103283425, "body": "Could the following be a good solution for you? Inside <code>reject_callback</code> you may put a guard clause <code>return unless need_callback?</code>.  You need to implement <code>need_callback?</code> method so that it returns <code>true</code> if you want the execution of the call back <code>false</code> otherwise."}, {"owner": {"reputation": 401, "user_id": 7156757, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8768142e36048bf7d98b346110611ebc?s=128&d=identicon&r=PG&f=1", "display_name": "O.Vykhor", "link": "https://stackoverflow.com/users/7156757/o-vykhor"}, "reply_to_user": {"reputation": 759, "user_id": 9174431, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a8f67982fb2ef93d0ebf92453b00fe5?s=128&d=identicon&r=PG", "display_name": "Giuseppe Schembri", "link": "https://stackoverflow.com/users/9174431/giuseppe-schembri"}, "edited": false, "score": 0, "creation_date": 1571651055, "post_id": 58281942, "comment_id": 103298539, "body": "@GiuseppeSchembri This is not suitable for me. I decided to create another event for this case."}], "owner": {"reputation": 401, "user_id": 7156757, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8768142e36048bf7d98b346110611ebc?s=128&d=identicon&r=PG&f=1", "display_name": "O.Vykhor", "link": "https://stackoverflow.com/users/7156757/o-vykhor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 206, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1570519962, "creation_date": 1570519962, "question_id": 58281942, "link": "https://stackoverflow.com/questions/58281942/state-machines-skip-after-transition-callback", "title": "state_machines skip after transition callback", "body": "<p>We use <a href=\"https://github.com/state-machines/state_machines\" rel=\"nofollow noreferrer\">https://github.com/state-machines/state_machines</a> gem on the project for states and I need to skip <code>after_transition</code> callback sometimes.</p>\n\n<p>For example I have a class:</p>\n\n<pre><code>class Record\n  after_transition on: :reject, do: :reject_callback\n\n  private\n\n  def reject_callback\n    # some callback actions\n  end\nend\n</code></pre>\n\n<p>Is there any way to skip <code>reject_callback</code> on <code>reject</code> event, e.g. by passing some argument like <code>record.reject(skip_callback: true)</code> or something else, or this can be achieved only by creating new event without callback? I can to return <code>nil</code> in <code>reject_callback</code> by condition, but this approach is not suitable for me. I can't to use other gems for states, also.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3"], "comments": [{"owner": {"reputation": 2345, "user_id": 4988918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/x1BRI.png?s=128&g=1", "display_name": "Mark Merritt", "link": "https://stackoverflow.com/users/4988918/mark-merritt"}, "edited": false, "score": 1, "creation_date": 1570517847, "post_id": 58281385, "comment_id": 102928447, "body": "Take a look at <a href=\"https://github.com/plataformatec/devise/issues/4630\" rel=\"nofollow noreferrer\">this issue</a>"}, {"owner": {"reputation": 1023, "user_id": 3552298, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/8540fb02a16712af1b873b8bd8b6b318?s=128&d=identicon&r=PG&f=1", "display_name": "sureshprasanna70", "link": "https://stackoverflow.com/users/3552298/sureshprasanna70"}, "edited": false, "score": 0, "creation_date": 1570518042, "post_id": 58281385, "comment_id": 102928524, "body": "Please include a link to the github repo. It could be helpful to see some code. Since you are new here, please go through the guidelines at <a href=\"https://stackoverflow.com/help/how-to-ask\">stackoverflow.com/help/how-to-ask</a>"}], "answers": [{"tags": [], "owner": {"reputation": 5751, "user_id": 10555785, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LjnQT.jpg?s=128&g=1", "display_name": "chans", "link": "https://stackoverflow.com/users/10555785/chans"}, "is_accepted": false, "score": 0, "last_activity_date": 1570518507, "creation_date": 1570518507, "answer_id": 58281638, "question_id": 58281385, "link": "https://stackoverflow.com/questions/58281385/rails-server-exiting-automatically-immediately-after-start-in-newly-cloned-githu/58281638#58281638", "title": "Rails Server exiting automatically immediately after start in newly cloned github repo", "body": "<p>The Device version which you're using seems to be buggy, try to upgrade the version of Devise and see</p>\n\n<pre><code>gem 'devise', '~&gt; 4.4.0'\n</code></pre>\n"}], "owner": {"reputation": 91, "user_id": 12169101, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mBz6UpFdQoD_lm-k3ecWs2ge2GN3wHKOI2OBlGzyA=k-s128", "display_name": "Nitin Kumar", "link": "https://stackoverflow.com/users/12169101/nitin-kumar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 38, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1570518507, "creation_date": 1570517353, "question_id": 58281385, "link": "https://stackoverflow.com/questions/58281385/rails-server-exiting-automatically-immediately-after-start-in-newly-cloned-githu", "title": "Rails Server exiting automatically immediately after start in newly cloned github repo", "body": "<p>I have cloned a github repo and run the command bundle install, but after when I am starting the rails server it shows me the following error :</p>\n\n<p><a href=\"https://i.stack.imgur.com/K7Tk4.png\" rel=\"nofollow noreferrer\">error message</a></p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 1023, "user_id": 3552298, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/8540fb02a16712af1b873b8bd8b6b318?s=128&d=identicon&r=PG&f=1", "display_name": "sureshprasanna70", "link": "https://stackoverflow.com/users/3552298/sureshprasanna70"}, "edited": false, "score": 0, "creation_date": 1570518912, "post_id": 58281118, "comment_id": 102928890, "body": "Did you happen to look at this --&gt; <a href=\"https://stackoverflow.com/questions/5320414/form-for-but-to-post-to-a-different-action\" title=\"form for but to post to a different action\">stackoverflow.com/questions/5320414/&hellip;</a>"}, {"owner": {"reputation": 1263, "user_id": 10221813, "user_type": "registered", "profile_image": "https://graph.facebook.com/10160530708235447/picture?type=large", "display_name": "uno", "link": "https://stackoverflow.com/users/10221813/uno"}, "reply_to_user": {"reputation": 1023, "user_id": 3552298, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/8540fb02a16712af1b873b8bd8b6b318?s=128&d=identicon&r=PG&f=1", "display_name": "sureshprasanna70", "link": "https://stackoverflow.com/users/3552298/sureshprasanna70"}, "edited": false, "score": 0, "creation_date": 1570519268, "post_id": 58281118, "comment_id": 102929027, "body": "Yes I tried that and similar iterations.  The <code>...(:start_end_dates...</code> may be interfering somehow."}, {"owner": {"reputation": 1023, "user_id": 3552298, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/8540fb02a16712af1b873b8bd8b6b318?s=128&d=identicon&r=PG&f=1", "display_name": "sureshprasanna70", "link": "https://stackoverflow.com/users/3552298/sureshprasanna70"}, "edited": false, "score": 0, "creation_date": 1570519415, "post_id": 58281118, "comment_id": 102929080, "body": "If this is a form for search functionality you may try <code>form_tag</code> instead of <code>form_for</code>."}, {"owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "edited": false, "score": 0, "creation_date": 1570522915, "post_id": 58281118, "comment_id": 102930649, "body": "What does the server log say about handling the request? It should specify incoming requests, the URL requested, incoming parameters and the controller that is responsible for handling that request. Could you add the server log for the submit request to the question? Or does the request never reach the server? Meaning the generated URL might be wrong."}, {"owner": {"reputation": 1263, "user_id": 10221813, "user_type": "registered", "profile_image": "https://graph.facebook.com/10160530708235447/picture?type=large", "display_name": "uno", "link": "https://stackoverflow.com/users/10221813/uno"}, "reply_to_user": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "edited": false, "score": 0, "creation_date": 1570524363, "post_id": 58281118, "comment_id": 102931302, "body": "@3limin4t0r exactly, nothing is there.  is everything I have set up enough to get this going?  Currently, the way I got i working is to just use <code>&lt;%= form_for(:start_end_dates, url: company_orders_path, method: :get) do |f| %&gt;</code> (which is the method used for the view) and then inside the view to check the parameters and then call the method from there....I have tried so many ways to have this working from every stackoverflow post about this subject but none have seemed to be working"}, {"owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "edited": false, "score": 0, "creation_date": 1570524676, "post_id": 58281118, "comment_id": 102931425, "body": "@uno Could you then post the generated HTML for the form?"}, {"owner": {"reputation": 1263, "user_id": 10221813, "user_type": "registered", "profile_image": "https://graph.facebook.com/10160530708235447/picture?type=large", "display_name": "uno", "link": "https://stackoverflow.com/users/10221813/uno"}, "reply_to_user": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "edited": false, "score": 0, "creation_date": 1570525385, "post_id": 58281118, "comment_id": 102931754, "body": "Hey thanks... added it.  @3limin4t0r ... Not sure what to do here."}, {"owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "edited": false, "score": 0, "creation_date": 1570526700, "post_id": 58281118, "comment_id": 102932368, "body": "@uno You&#39;ve currently posted the server log of the working request, which is not really what I need. In the browser navigate to the view that uses the form that isn&#39;t working and press <code>Ctrl + U</code> (for most browsers), then search your form and add it to the question."}], "owner": {"reputation": 1263, "user_id": 10221813, "user_type": "registered", "profile_image": "https://graph.facebook.com/10160530708235447/picture?type=large", "display_name": "uno", "link": "https://stackoverflow.com/users/10221813/uno"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 55, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1570525201, "creation_date": 1570516008, "last_edit_date": 1570525201, "question_id": 58281118, "link": "https://stackoverflow.com/questions/58281118/calling-action-from-form-for-rails", "title": "calling action from form_for rails?", "body": "<p>I want to call a specific action from a <code>form_for</code> and pass parameters.</p>\n\n<p>I have a form_for that passes dates like so:</p>\n\n<pre><code>&lt;%= form_for(:start_end_dates, url: url_for(controller: 'company_dashboard', action: 'shopify_orders_sync'), method: :get) do |f| %&gt;\n   &lt;%= f.date_field :start_date, class: \"form-control\", required: true %&gt;\n   &lt;%= f.date_field :end_date, class: \"form-control\", required: true %&gt;\n   &lt;%= f.hidden_field :shop_id, value: @shop.id %&gt;\n   &lt;%= f.submit \"Apply\" %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>But this attempt doesn't seem to be calling the method:</p>\n\n<pre><code>  def shopify_orders_sync\n    @start_date = params[:start_date]\n    @end_date = params[:end_date]\n    @shop = Shop.find(params[:shop_id])\n    if (params[:start_end_dates] &amp;&amp; params[:start_end_dates][:start_date] &amp;&amp; params[:start_end_dates][:end_date])\n      start_date = params[:start_end_dates][:start_date].to_date.beginning_of_day\n      end_date = params[:start_end_dates][:end_date].to_date.end_of_day\n      if(start_date &gt; end_date)\n        ...\n      else\n        shop = Shop.find(params[:shop_id])\n        session = ShopifyAPI::Session.new(domain: shop.shopify_domain, token: shop.shopify_token, api_version: '2019-04')\n        ShopifyAPI::Base.activate_session(session)\n        ...\n        ...\n        ...\n        ...\n        ... \n        ...\n      end\n    end\n  end\n</code></pre>\n\n<p>Routes:</p>\n\n<pre><code>  get 'company/dashboard' =&gt; 'company_dashboard#dashboard'\n  get 'company/shopify-orders-sync' =&gt; 'company_dashboard#shopify_orders_sync'\n</code></pre>\n\n<p>This form is in the #dashboard views.</p>\n\n<p><strong>If i do something like:</strong></p>\n\n<pre><code>&lt;%= form_for(:start_end_dates, url: company_orders_path, method: :get) do |f| %&gt;\n  &lt;%= f.date_field :start_date, class: \"form-control\", required: true %&gt;\n  &lt;%= f.date_field :end_date, class: \"form-control\", required: true %&gt;\n  &lt;%= f.submit \"Apply\", class: \"btn btn-primary\" %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>Controller:</p>\n\n<pre><code>def orders\n    ...\n    if (params[:start_end_dates] &amp;&amp; params[:start_end_dates][:start_date] &amp;&amp; params[:start_end_dates][:end_date])\n      start_date = params[:start_end_dates][:start_date].to_date.beginning_of_day\n      end_date = params[:start_end_dates][:end_date].to_date.end_of_day\n      if(start_date &gt; end_date)\n        redirect_to vendor_dashboard_path\n        flash.keep[:notice] = \"Dates are in wrong order.\"\n      else\n         ...\n      end\n      ...\n    else\n       ...\n    end\n    ...\n  end\n</code></pre>\n\n<p>Routes:</p>\n\n<pre><code>get 'vendor/orders' =&gt; 'vendor_dashboard#orders'\n</code></pre>\n\n<p>This works, at least from the vendor/orders route.  Haven't tried it elsewhere.  The form is in the #orders and calls the #orders action.</p>\n\n<p>What can I do to the form to keep everything working as is but then call the action/method <code>def shopify_orders_sync</code> ?</p>\n\n<p>**</p>\n\n<blockquote>\n  <p>Attempt with:</p>\n</blockquote>\n\n<p>**</p>\n\n<pre><code>&lt;%= form_for :start_end_dates, url: '/company/shopify_orders_sync', method: 'get' do |f| %&gt;\n</code></pre>\n\n<p>Result:</p>\n\n<pre><code>at=info method=GET path=\"/company/shop-orders?shop_id=31\"\nat=info method=GET path=\"/favicon.ico\"\nStarted GET \"/company/shop-orders?utf8=%E2%9C%93&amp;start_end_dates%5Bstart_date%5D=2019-10-01&amp;start_end_dates%5Bend_date%5D=2019-10-08&amp;start_end_dates%5Bshop_id%5D=31&amp;commit=Apply\" for 69.118.200.110 at 2019-10-08 08:59:04 +0000\nProcessing by CompanyDashboardController#shop_orders as HTML\nParameters: {\"utf8\"=&gt;\"\u2713\", \"start_end_dates\"=&gt;{\"start_date\"=&gt;\"2019-10-01\", \"end_date\"=&gt;\"2019-10-08\", \"shop_id\"=&gt;\"31\"}, \"commit\"=&gt;\"Apply\"}\nRendering company_dashboard/shop_orders.html.erb within layouts/application\nRendered company_dashboard/shop_orders.html.erb within layouts/application (139.8ms)\nRendered layouts/_argon-navbar.html.erb (1.0ms)\nRendered layouts/_footer.html.erb (0.4ms)\nCompleted 200 OK in 161ms\nat=info method=GET path=\"/company/shop-orders?utf8=%E2%9C%93&amp;start_end_dates%5Bstart_date%5D=2019-10-01&amp;start_end_dates%5Bend_date%5D=2019-10-08&amp;start_end_dates%5Bshop_id%5D=31&amp;commit=Apply\" \nat=info method=GET path=\"/favicon.ico\"\n</code></pre>\n\n<p>I have done many iterations of the above form_for but all with the same result.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 13378, "user_id": 1430810, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/v669u.jpg?s=128&g=1", "display_name": "arieljuod", "link": "https://stackoverflow.com/users/1430810/arieljuod"}, "edited": false, "score": 1, "creation_date": 1570500159, "post_id": 58279092, "comment_id": 102924481, "body": "You are receiveng a <code>weight_unit_id</code> but you say you think you have to create the WeightUnit object, show&#39;s that you have an ID if it&#39;s not created already? If the WeightUnit object does not exists then you have to nest it&#39;s attributes with a form_for inside the excercise_type subform and use accept_nested_attributes_for."}, {"owner": {"reputation": 318, "user_id": 5287084, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh5.googleusercontent.com/-stgK_Qk69OM/AAAAAAAAAAI/AAAAAAAAJPY/zgH-naHkAG0/photo.jpg?sz=128", "display_name": "yvoloshin", "link": "https://stackoverflow.com/users/5287084/yvoloshin"}, "reply_to_user": {"reputation": 13378, "user_id": 1430810, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/v669u.jpg?s=128&g=1", "display_name": "arieljuod", "link": "https://stackoverflow.com/users/1430810/arieljuod"}, "edited": false, "score": 0, "creation_date": 1572063438, "post_id": 58279092, "comment_id": 103453830, "body": "Thank you @arieljuod! I nested attributes of WeightUnit inside the ExeciseType form and added an accept_nested_attributes statement. Now the attributes of WeightUnit are actually nested in the displayed parameters. But now I get an error thrown in the &#39;create&#39; controller function that I&#39;m stuck on. I posted a new question on this <a href=\"https://stackoverflow.com/questions/58567983/trouble-with-creating-an-object-in-a-triple-nested-rails-form\">here</a>."}], "owner": {"reputation": 318, "user_id": 5287084, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh5.googleusercontent.com/-stgK_Qk69OM/AAAAAAAAAAI/AAAAAAAAJPY/zgH-naHkAG0/photo.jpg?sz=128", "display_name": "yvoloshin", "link": "https://stackoverflow.com/users/5287084/yvoloshin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 47, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1570498256, "creation_date": 1570498256, "question_id": 58279092, "link": "https://stackoverflow.com/questions/58279092/cant-save-attribute-for-triple-nested-rails-model", "title": "Can&#39;t save attribute for triple nested Rails model", "body": "<p>I'm looking for help with creating and saving an object. \nI have three related models, WorkoutType, ExerciseType, and WeightUnit:</p>\n\n<pre><code>class WorkoutType &lt; ActiveRecord::Base\n    attr_accessor :exercise_type_attributes, :workout_type_id, :weight_unit_id\n    has_many :exercise_types, dependent: :destroy\n    belongs_to :user\n    accepts_nested_attributes_for :exercise_types\nend\n\nclass ExerciseType &lt; ActiveRecord::Base\n    attr_accessor :workout_type_id, :weight_unit_id\n    belongs_to :workout_type\n    has_many :exercises\n    belongs_to :weight_unit\nend\n\nclass WeightUnit &lt; ActiveRecord::Base\n    has_many :exercise_types\nend\n</code></pre>\n\n<p>These are the relevant table schemas:</p>\n\n<pre><code>create_table \"workout_types\", force: :cascade do |t|\n    t.string   \"type_name\"\n    t.datetime \"created_at\",  null: false\n    t.datetime \"updated_at\",  null: false\n    t.integer  \"user_id\"\n    t.boolean  \"public\"\n    t.text     \"description\"\n    t.boolean  \"is_visible\"\n  end\n\ncreate_table \"exercise_types\", force: :cascade do |t|\n    t.string   \"name\"\n    t.integer  \"sets\"\n    t.integer  \"reps\"\n    t.integer  \"workout_type_id\"\n    t.datetime \"created_at\",      null: false\n    t.datetime \"updated_at\",      null: false\n    t.string   \"load\"\n    t.string   \"url\"\n    t.integer  \"weight_unit_id\"\n  end\n\ncreate_table \"weight_units\", force: :cascade do |t|\n    t.string  \"name\"\n    t.decimal \"conversion_factor_to_lb\", precision: 10, scale: 4\n  end\n</code></pre>\n\n<p>A WorkoutType is created using a form that incorporates ExerciseTypes and WeightUnits shown in <a href=\"https://imgur.com/a/0594a7I\" rel=\"nofollow noreferrer\">this image</a>. </p>\n\n<p>A new <code>WorkoutType</code> is created in the <code>new</code> method of <code>WorkoutTypesController</code>:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>def new\n    @workout_type = WorkoutType.new\n    @exercise_types = Array.new(10) { @workout_type.exercise_types.build }\nend \n</code></pre>\n\n<p>It is saved using the create method:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>def create\n    @workout_type = current_user.workout_types.create(workout_type_params)\n    @exercise_types = @workout_type.exercise_types\nend\n\ndef workout_type_params\n    params.require(:workout_type).permit(:type_name, :public, :description, :exercise_types_attributes =&gt; [:id, :name, :sets, :reps, :load, :url, :weight_unit_id])\nend\n</code></pre>\n\n<p>The problem is that, when I save a new <code>WorkoutType</code>, the <code>weight_unit_id</code> field of <code>ExerciseTypes</code> does not get saved. In the terminal, I see that it gets passed by the form as a parameter:</p>\n\n<pre><code>Started POST \"/workout_types\" for 10.0.2.2 at 2019-10-07 22:01:22 +0000\nProcessing by WorkoutTypesController#create as HTML\n\n Parameters: {\"utf8\"=&gt;\"\u2713\", \"authenticity_token\"=&gt;\"...\", \"workout_type\"=&gt;{\"type_name\"=&gt;\"Test Routine 10\", \"description\"=&gt;\"&lt;p&gt;uygyu&lt;/p&gt;\", \"public\"=&gt;\"true\", \"exercise_types_attributes\"=&gt;{\"0\"=&gt;{\"name\"=&gt;\"exercise 1\", \"sets\"=&gt;\"2\", \"reps\"=&gt;\"34\", \"load\"=&gt;\"90\", \"weight_unit_id\"=&gt;\"2\", \"url\"=&gt;\"\"},\n}}\n</code></pre>\n\n<p>But, when time comes to save in the database, I see that <code>weight_unit_id</code> is not included in the <code>INSERT INTO \"exercise_types\"</code> statement:</p>\n\n<pre><code>   (0.0ms)  BEGIN\n  SQL (0.0ms)  INSERT INTO \"workout_types\" (\"type_name\", \"public\", \"description\", \"user_id\", \"created_at\", \"updated_at\") VALUES ($1, $2, $3, $4, $5, $6) RETURNING \"id\"  [[\"type_name\", \"Test Routine 9\"], [\"public\", \"t\"], [\"description\", \"&lt;p&gt;great new description&lt;/p&gt;\"], [\"user_id\", 1], [\"created_at\", \"2019-10-07 22:01:24.429003\"], [\"updated_at\", \"2019-10-07 22:01:24.429003\"]]\n   SQL (0.0ms)  INSERT INTO \"exercise_types\" (\"name\", \"sets\", \"reps\", \"load\", \"url\", \"workout_type_id\", \"created_at\", \"updated_at\") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING \"id\"  [[\"name\", \"exercise 1\"], [\"sets\", 2], [\"reps\", 34], [\"load\", \"90\"], [\"url\", \"\"], [\"workout_type_id\", 23], [\"created_at\", \"2019-10-07 22:11:11.522873\"], [\"updated_at\", \"2019-10-07 22:11:11.522873\"]]\n</code></pre>\n\n<p>After saving, <code>weight_unit_id</code> for the WorkoutType is <code>nil</code>. I'm guessing that I need to create the WeightUnits objects in the create method. But how can I do that? </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 3995, "user_id": 2037537, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/f13d953be3af2552aaa1ddfa0a05fa46?s=128&d=identicon&r=PG", "display_name": "Roland Studer", "link": "https://stackoverflow.com/users/2037537/roland-studer"}, "edited": false, "score": 0, "creation_date": 1570620631, "post_id": 58278164, "comment_id": 102968560, "body": "I commented with untested code of a general idea, on what you must do. Not sure if it is completely correct for rails 4 (or rails 5 for that matter)"}, {"owner": {"reputation": 3995, "user_id": 2037537, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/f13d953be3af2552aaa1ddfa0a05fa46?s=128&d=identicon&r=PG", "display_name": "Roland Studer", "link": "https://stackoverflow.com/users/2037537/roland-studer"}, "edited": false, "score": 0, "creation_date": 1570621619, "post_id": 58278164, "comment_id": 102969129, "body": "I highly recommend, you go throug some tutorial concering routing and handling paramaters and formats, as you missed some key aspects there."}], "answers": [{"tags": [], "owner": {"reputation": 3995, "user_id": 2037537, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/f13d953be3af2552aaa1ddfa0a05fa46?s=128&d=identicon&r=PG", "display_name": "Roland Studer", "link": "https://stackoverflow.com/users/2037537/roland-studer"}, "is_accepted": false, "score": 0, "last_activity_date": 1570621545, "last_edit_date": 1570621545, "creation_date": 1570620554, "answer_id": 58303119, "question_id": 58278164, "link": "https://stackoverflow.com/questions/58278164/rails-rss-feed-builder-per-item/58303119#58303119", "title": "Rails RSS Feed Builder per item", "body": "<p>You are trying to create multiple RSS feeds when the request goes to <code>metros/feed.rss</code></p>\n\n<p>First you need to setup the right<code>routes</code>, the most important thing being, that you want to pass a <code>parameter</code> to the <code>action</code>.</p>\n\n<p>routes.rb</p>\n\n<pre><code>resources :metros do\n  get ':city' to: 'metros#feed' #creates a named parameter \nend\n</code></pre>\n\n<p>So now if you can theoretically call <code>metros/chigaco.rss</code> you can use chicago in your <code>metros_controller.rb</code></p>\n\n<pre><code>def feed\n  @metro = Metro.find_by_name(params[:name])\n  @episodes = @metro.episodes.published.order(\"created_at DESC\")\n  render action: :index, name: @metro.name \nend\n</code></pre>\n\n<p>The problem is this won't work, as the route `/metros/:id' that points to index takes precedence. So it is better to set up a seperate route for that:</p>\n\n<pre><code>  get 'feed/:name', to: 'metros#feed' \n</code></pre>\n"}], "owner": {"reputation": 397, "user_id": 3462069, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/4ae9d4e99d92986f0f250274e70caac1?s=128&d=identicon&r=PG&f=1", "display_name": "beaconhill", "link": "https://stackoverflow.com/users/3462069/beaconhill"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 353, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1570621545, "creation_date": 1570489197, "question_id": 58278164, "link": "https://stackoverflow.com/questions/58278164/rails-rss-feed-builder-per-item", "title": "Rails RSS Feed Builder per item", "body": "<p>Right now I have one RSS feed that gets a list of episodes that belong_to a metro. What I'd like to do is generate an RSS feed <strong>per metro</strong>. So city1.rss, city2.rss, city3.rss, cityN.rss. </p>\n\n<p><strong>routes.rb</strong></p>\n\n<pre><code>resources :metros do\n     collection do\n       get :feed\n     end\n  end\n</code></pre>\n\n<p><strong>metros_controller.rb</strong></p>\n\n<pre><code>  def feed\n    @metros = Metro.all\n    @episodes = Episode.published.order(\"created_at DESC\")\n\n    @metros.each do |metro|\n        metro.rss { render action: :index, name: @metro.name }\n    end\n  end\n</code></pre>\n\n<p><strong>index.rss.builder</strong></p>\n\n<pre><code>xml.rss :version =&gt; \"2.0\", \"xmlns:itunes\" =&gt; \"http://www.itunes.com/dtds/podcast-1.0.dtd\",  \"xmlns:media\" =&gt; \"http://search.yahoo.com/mrss/\", \"xmlns:atom\" =&gt; \"http://www.w3.org/2005/Atom\" do\n  xml.channel do\n    xml.title title\n    xml.description description\n    xml.language 'en'\n    xml.pubDate @episodes.first.created_at.to_s(:rfc822)\n    xml.lastBuildDate @episodes.first.created_at.to_s(:rfc822)\n    xml.itunes :author, author\n    xml.itunes :keywords, keywords\n    xml.itunes :explicit, 'clean'\n    xml.itunes :image, :href =&gt; image_url('cover.jpg')\n    xml.itunes :owner do\n      xml.itunes :name, author\n    end\n    xml.itunes :block, 'no'\n    xml.itunes :category, :text =&gt; 'News' do\n      xml.itunes :category, :text =&gt; 'News'\n    end\n\n    @episodes.each do |episode|\n      xml.item do\n        xml.title episode.title\n        xml.description episode.description\n        xml.pubDate episode.created_at.to_s(:rfc822)\n        xml.enclosure :url =&gt; episode.s3, :length =&gt; 5, :type =&gt; 'mp3'\n        xml.link episode_url(episode)\n        xml.guid({:isPermaLink =&gt; \"false\"}, episode_path(episode))\n        xml.itunes :author, author\n        xml.itunes :subtitle, truncate(episode.description, :length =&gt; 150)\n        xml.itunes :summary, episode.description\n        xml.itunes :explicit, 'no'\n        xml.itunes :duration, 5\n      end\n    end\n  end\nend\n</code></pre>\n\n<p>The error I'm getting is: </p>\n\n<blockquote>\n  <p>undefined method `rss' for #Metro:0x00007faaaa96b278</p>\n</blockquote>\n"}, {"tags": ["regex", "ruby"], "comments": [{"owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1570483450, "post_id": 58277254, "comment_id": 102921011, "body": "Looks like you need <code>text.scan(JSON_FORMAT).join(&quot; &quot;)</code>"}, {"owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "edited": false, "score": 0, "creation_date": 1570484306, "post_id": 58277254, "comment_id": 102921253, "body": "Or if you expect not more than one match <code>text[JSON_FORMAT]</code>"}], "answers": [{"tags": [], "owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "is_accepted": true, "score": 2, "last_activity_date": 1570495259, "last_edit_date": 1570495259, "creation_date": 1570494567, "answer_id": 58278714, "question_id": 58277254, "link": "https://stackoverflow.com/questions/58277254/remove-from-string-what-does-not-match-a-json-pattern/58278714#58278714", "title": "Remove from string what does not match a JSON pattern", "body": "<p>Assuming string object is what you pasted as input text in your rubular link, the json is just everything between each open and closing curly brace <code>{}</code> so the regex is very simple. </p>\n\n<pre><code>require 'json' # require the standard lib\n\nstr = # the string in your rubular example\n\nregex = /\\{.*\\}/\narray = str.scan(regex).map{|j| JSON.parse(j.gsub(/\\\\/,''))}\n\n# array is now a collection of ruby hashes.\n# if you need them converted to a single json object you can do\njson = array.to_json\n</code></pre>\n\n<p>The ruby <a href=\"https://ruby-doc.org/core-2.6.5/String.html#method-i-scan\" rel=\"nofollow noreferrer\">String#scan</a> method does most of what you need.  But you will need to remove the double escape characters which is what is done inside the <code>.map</code> here using the <a href=\"https://ruby-doc.org/stdlib-2.6.3/libdoc/json/rdoc/JSON.html\" rel=\"nofollow noreferrer\">JSON stdlib</a></p>\n"}], "owner": {"reputation": 2221, "user_id": 5921203, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/lczFa.jpg?s=128&g=1", "display_name": "Steven Aguilar", "link": "https://stackoverflow.com/users/5921203/steven-aguilar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 295, "favorite_count": 0, "accepted_answer_id": 58278714, "answer_count": 1, "score": 1, "last_activity_date": 1570542257, "creation_date": 1570482928, "last_edit_date": 1570542257, "question_id": 58277254, "link": "https://stackoverflow.com/questions/58277254/remove-from-string-what-does-not-match-a-json-pattern", "title": "Remove from string what does not match a JSON pattern", "body": "<p>I'm currently trying to remove from a string what does not a regex pattern. I have a string, and I'm trying to parse out the JSON from it. Here is an example.</p>\n\n<p>I would like to remove everything from the string that doesn't match the following\nregex pattern <code>JSON_FORMAT = /\\{.*\\:\\{.*\\:.*\\}\\}/</code>. I try using <code>text.gsub(JSON_FORMAT, '')</code> but that just ended up removing what match. Which is the opposite of what im looking for.</p>\n"}, {"tags": ["python", "ruby", "towers-of-hanoi"], "comments": [{"owner": {"reputation": 2282, "user_id": 10853463, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kg5ZZ.jpg?s=128&g=1", "display_name": "red_menace", "link": "https://stackoverflow.com/users/10853463/red-menace"}, "edited": false, "score": 2, "creation_date": 1570484618, "post_id": 58276983, "comment_id": 102921350, "body": "There are other issues, but to start I think you are looking for the three dot form of the range, which excludes the high value (an array index out of bounds returns nil)."}, {"owner": {"reputation": 23, "user_id": 2537151, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ad035ceead2f2c0357aa38eea34037c?s=128&d=identicon&r=PG", "display_name": "joaaogui", "link": "https://stackoverflow.com/users/2537151/joaaogui"}, "reply_to_user": {"reputation": 2282, "user_id": 10853463, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kg5ZZ.jpg?s=128&g=1", "display_name": "red_menace", "link": "https://stackoverflow.com/users/10853463/red-menace"}, "edited": false, "score": 0, "creation_date": 1570484909, "post_id": 58276983, "comment_id": 102921449, "body": "That was it!! Thanks pal"}], "answers": [{"tags": [], "owner": {"reputation": 2282, "user_id": 10853463, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kg5ZZ.jpg?s=128&g=1", "display_name": "red_menace", "link": "https://stackoverflow.com/users/10853463/red-menace"}, "is_accepted": true, "score": 1, "last_activity_date": 1570489654, "creation_date": 1570489654, "answer_id": 58278198, "question_id": 58276983, "link": "https://stackoverflow.com/questions/58276983/converting-simple-code-from-python-to-ruby/58278198#58278198", "title": "Converting simple code from python to ruby", "body": "<p>In Python, the built-in <code>range</code> function is not inclusive, so it doesn't return the last number.  Ruby doesn't use a <em>function</em>, it has a couple of <em>operators</em> - the two-dot form <code>..</code> creates a range including the last number, and the three-dot form <code>...</code> which excludes the high value.  See the <a href=\"https://ruby-doc.org/core-2.6.1/Range.html\" rel=\"nofollow noreferrer\">documentation</a> for more information.</p>\n\n<p>Your posted code has a few additional errors and isn't very idiomatic, but your error is being caused by using the inclusive form, which results in a nil value being returned when the index goes out of bounds.  The range <code>(largestToMove...diskPositions.length)</code> would be the equivalent for the Python function.</p>\n"}], "owner": {"reputation": 23, "user_id": 2537151, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ad035ceead2f2c0357aa38eea34037c?s=128&d=identicon&r=PG", "display_name": "joaaogui", "link": "https://stackoverflow.com/users/2537151/joaaogui"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "accepted_answer_id": 58278198, "answer_count": 1, "score": 0, "last_activity_date": 1570489654, "creation_date": 1570481563, "question_id": 58276983, "link": "https://stackoverflow.com/questions/58276983/converting-simple-code-from-python-to-ruby", "title": "Converting simple code from python to ruby", "body": "<p>I have the following code on python:</p>\n\n<pre><code>f = open(\"configuration.txt\", \"r\")\nposition = {}\ncounter = 0\nwith open(\"configuration.txt\") as fileobj:\n    for line in fileobj:\n        for ch in line:\n            if ch.isdigit():\n                position[int(ch)] = counter\n        counter+=1\n# print(dict(sorted(position.items())))\n\nposition = dict(sorted(position.items()))\ndiskPositions = list(position.values())\n\ndisk = {0:'4',1:'3',2:'2',3:'1'}\npegs = {0:'A',1:'B',2:'C'}\n# print(position)\ndef moveDisks(diskPositions, largestToMove, targetPeg):\n    for badDisk in range(largestToMove, len(diskPositions)):\n        currentPeg = diskPositions[badDisk]\n        if diskPositions[badDisk] != targetPeg:\n            otherPeg = 3 - targetPeg - currentPeg\n            moveDisks(diskPositions, badDisk + 1, otherPeg)\n            print(disk[badDisk], \"-\", pegs[targetPeg])\n            diskPositions[badDisk] = targetPeg\n            moveDisks(diskPositions, badDisk + 1, targetPeg)\n            break;\n\nmoveDisks(diskPositions[::-1], 0, 2)\n\n</code></pre>\n\n<p>And I need to convert this code into ruby. I started doing it, but I'm stuck and don't know where is the error, or what I'm doing different. </p>\n\n<p>When I runt it, i receive the following error on line 30, caused by a nil variable:</p>\n\n<pre><code>/hanoi/final.rb:30:in `-': nil can't be coerced into Integer (TypeError)```\n\n</code></pre>\n\n<p>Ruby Code : </p>\n\n<pre><code>f = open(\"configuration.txt\", \"r\")\nposition = {}\ncounter = 0\n\ndef is_digit(look_ahead)\n  look_ahead =~ /[[:digit:]]/\nend\n\nFile.open('configuration.txt', 'r') do |f|\n  f.each_line do |l| # iterate on each character\n    l.each_char do |c|\n      if is_digit(c)\n        position[c.to_i] = counter\n      end\n    end\n    counter+=1\n  end\nend\n\nposition = position.sort.to_h\ndisk_positions = position.values\n\ndisk = {0 =&gt; '4', 1 =&gt; '3', 2 =&gt; '2', 3 =&gt; '1'}\npegs = {0 =&gt; 'A', 1 =&gt; 'B', 2 =&gt; 'C'}\n\ndef moveDisks(diskPositions, largestToMove, targetPeg)\n  for badDisk in (largestToMove..diskPositions.length)\n    currentPeg = diskPositions[badDisk]\n    if diskPositions[badDisk] != targetPeg\n      otherPeg = 3 - targetPeg - currentPeg\n      moveDisks(diskPositions, badDisk + 1, otherPeg)\n      print disk[badDisk].to_s + \"-\", pegs[targetPeg].to_s\n      diskPositions[badDisk] = targetPeg\n      moveDisks(diskPositions, badDisk + 1, targetPeg)\n      break\n    end\n  end\nend\n\nmoveDisks(disk_positions.reverse, 0, 2)\n\n</code></pre>\n\n<p>PS: configuration.txt is a text file containing the following lines:</p>\n\n<pre><code>A-1\nB-4:2\nC-3\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1570481603, "post_id": 58276957, "comment_id": 102920358, "body": "You can use <code>order</code> and specify which column of the <code>jobs</code> table use for ordering them (created_at perhaps)."}], "answers": [{"comments": [{"owner": {"reputation": 25, "user_id": 11649868, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-iliAisJdpDY/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3re-XWemTTFBkeOclfrsdbW8uPs3cA/mo/photo.jpg?sz=128", "display_name": "alexanserg", "link": "https://stackoverflow.com/users/11649868/alexanserg"}, "edited": false, "score": 0, "creation_date": 1570481930, "post_id": 58276999, "comment_id": 102920476, "body": "worked like a charm. except i think you meant in the controller cleverly named  jobs_controller.rb"}], "tags": [], "owner": {"reputation": 2060, "user_id": 3944700, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/4df64cd1de5941fb49263a19d80f1482?s=128&d=identicon&r=PG&f=1", "display_name": "hashrocket", "link": "https://stackoverflow.com/users/3944700/hashrocket"}, "is_accepted": true, "score": 2, "last_activity_date": 1570481975, "last_edit_date": 1570481975, "creation_date": 1570481628, "answer_id": 58276999, "question_id": 58276957, "link": "https://stackoverflow.com/questions/58276957/using-a-rails-app-with-the-most-recent-posts-on-top/58276999#58276999", "title": "using a rails app with the most recent posts on top", "body": "<p>In your controller file, (which I'm guessing is in the file jobs_controller.rb), under the index action, you can dictate an order:</p>\n\n<pre><code>def index\n  @jobs = Job.order(created_at: :desc)\nend\n</code></pre>\n\n<p>This will order your jobs by creation date. You can change the <code>created_at</code> to any other attribute on your job.</p>\n\n<p>You can learn more about order <a href=\"https://apidock.com/rails/ActiveRecord/QueryMethods/order\" rel=\"nofollow noreferrer\">here</a>.</p>\n"}], "owner": {"reputation": 25, "user_id": 11649868, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-iliAisJdpDY/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3re-XWemTTFBkeOclfrsdbW8uPs3cA/mo/photo.jpg?sz=128", "display_name": "alexanserg", "link": "https://stackoverflow.com/users/11649868/alexanserg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 27, "favorite_count": 0, "accepted_answer_id": 58276999, "answer_count": 1, "score": 0, "last_activity_date": 1570481975, "creation_date": 1570481408, "question_id": 58276957, "link": "https://stackoverflow.com/questions/58276957/using-a-rails-app-with-the-most-recent-posts-on-top", "title": "using a rails app with the most recent posts on top", "body": "<p>I am making a help wanted type app, and I would like the app to list the jobs with the most recent posts at top, and older ones being pushed down each time a newer job is posted. So far I am displaying the posts thusly:</p>\n\n<pre><code>&lt;% if @jobs.any? %&gt;\n&lt;ul&gt;\n  &lt;% @jobs.each do |job| %&gt;\n  &lt;li&gt;&lt;%= link_to job.description, job_path(job) %&gt;&lt;/li&gt;\n  &lt;% end %&gt;\n&lt;/ul&gt;\n&lt;% else %&gt;\n&lt;p&gt;There are no odd jobs yet.&lt;/p&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>any suggestions?</p>\n"}, {"tags": ["ruby", "macos", "leveldb"], "comments": [{"owner": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 0, "creation_date": 1570479465, "post_id": 58276375, "comment_id": 102919635, "body": "Looks like you have merge conflict markers in your files indicating a previous merge had conflicts which were not resolved but simply committed. You should undo that bad merge. For managing Ruby consider RVM instead. <a href=\"https://rvm.io/\" rel=\"nofollow noreferrer\">rvm.io</a>"}, {"owner": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "edited": false, "score": 0, "creation_date": 1570482252, "post_id": 58276375, "comment_id": 102920590, "body": "Install RVM with <code>\\curl -sSL https:&#47;&#47;get.rvm.io | bash -s stable</code>; restart your shell; install Ruby with <code>rvm install 2.4.5</code>. <a href=\"https://robots.thoughtbot.com/psa-do-not-use-system-ruby\" rel=\"nofollow noreferrer\">Don&#39;t</a> <a href=\"https://chrisherring.co/posts/why-you-shouldn-t-use-the-system-ruby\" rel=\"nofollow noreferrer\">use</a> <a href=\"http://billpatrianakos.me/blog/2014/05/15/never-use-system-ruby-ever/\" rel=\"nofollow noreferrer\">system Ruby</a>."}, {"owner": {"reputation": 45645, "user_id": 1056563, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/bc888aa658ab0e0d2a4d305ad7f69123?s=128&d=identicon&r=PG", "display_name": "StephenBoesch", "link": "https://stackoverflow.com/users/1056563/stephenboesch"}, "reply_to_user": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "edited": false, "score": 0, "creation_date": 1570482861, "post_id": 58276375, "comment_id": 102920801, "body": "@anothermh ok - been a long long time since I did ruby myself. Sad: great language.."}], "owner": {"reputation": 45645, "user_id": 1056563, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/bc888aa658ab0e0d2a4d305ad7f69123?s=128&d=identicon&r=PG", "display_name": "StephenBoesch", "link": "https://stackoverflow.com/users/1056563/stephenboesch"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 75, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1570478412, "creation_date": 1570478412, "question_id": 58276375, "link": "https://stackoverflow.com/questions/58276375/unable-to-upgrade-ruby-due-to-leveldb", "title": "Unable to upgrade ruby due to leveldb", "body": "<p>I need to upgrade <code>ruby</code> :</p>\n\n<pre><code>bundle install\nYour Ruby version is 2.3.7, but your Gemfile specified 2.4.5\n</code></pre>\n\n<p>So let's go do that:</p>\n\n<pre><code>brew upgrade ruby\nUpdating Homebrew...\n==&gt; Auto-updated Homebrew!\nUpdated Homebrew from 5354ba84e to 203f8d66a.\n</code></pre>\n\n<p>Oh but hit the brakes here:</p>\n\n<pre><code>Error: Failed to import:\n /usr/local/Homebrew/Library/Taps/homebrew/homebrew-core/Formula/leveldb.rb\nleveldb: /usr/local/Homebrew/Library/Taps/homebrew/homebrew-core/Formula/leveldb.rb:24: syntax error, unexpected &lt;&lt;, expecting keyword_end\n&lt;&lt;&lt;&lt;&lt;&lt;&lt; Updated upstream\n  ^\n/usr/local/Homebrew/Library/Taps/homebrew/homebrew-core/Formula/leveldb.rb:30: syntax error, unexpected ===, expecting keyword_end\n=======\n   ^\n/usr/local/Homebrew/Library/Taps/homebrew/homebrew-core/Formula/leveldb.rb:34: syntax error, unexpected &lt;&lt;, expecting keyword_end\n&lt;&lt;&lt;&lt;&lt;&lt;&lt; Updated upstream\n  ^\n/usr/local/Homebrew/Library/Taps/homebrew/homebrew-core/Formula/leveldb.rb:39: syntax error, unexpected ===, expecting keyword_end\n=======\n   ^\n/usr/local/Homebrew/Library/Taps/homebrew/homebrew-core/Formula/leveldb.rb:51: syntax error, unexpected &gt;&gt;, expecting keyword_end\n&gt;&gt;&gt;&gt;&gt;&gt;&gt; Stashed changes\n  ^\n/usr/local/Homebrew/Library/Taps/homebrew/homebrew-core/Formula/leveldb.rb:52: syntax error, unexpected &gt;&gt;, expecting keyword_end\n&gt;&gt;&gt;&gt;&gt;&gt;&gt; Stashed changes\n  ^\nError: Failed to import: /usr/local/Homebrew/Library/Taps/homebrew/homebrew-core/Formula/glog.rb\nglog: /usr/local/Homebrew/Library/Taps/homebrew/homebrew-core/Formula/glog.rb:20: syntax error, unexpected &lt;&lt;\n&lt;&lt;&lt;&lt;&lt;&lt;&lt; Updated upstream\n  ^\n/usr/local/Homebrew/Library/Taps/homebrew/homebrew-core/Formula/glog.rb:22: syntax error, unexpected ===\n=======\n   ^\n/usr/local/Homebrew/Library/Taps/homebrew/homebrew-core/Formula/glog.rb:25: syntax error, unexpected &gt;&gt;\n&gt;&gt;&gt;&gt;&gt;&gt;&gt; Stashed changes\n  ^\n/usr/local/Homebrew/Library/Taps/homebrew/homebrew-core/Formula/glog.rb:62: syntax error, unexpected ===, expecting keyword_end\n=======\n   ^\n/usr/local/Homebrew/Library/Taps/homebrew/homebrew-core/Formula/glog.rb:73: syntax error, unexpected &gt;&gt;, expecting keyword_end\n&gt;&gt;&gt;&gt;&gt;&gt;&gt; Stashed changes\n  ^\n/usr/local/Homebrew/Library/Taps/homebrew/homebrew-core/Formula/glog.rb:75: syntax error, unexpected end-of-input, expecting keyword_end\nError: Failed to import: /usr/local/Homebrew/Library/Taps/homebrew/homebrew-core/Formula/snappy.rb\nsnappy: /usr/local/Homebrew/Library/Taps/homebrew/homebrew-core/Formula/snappy.rb:30: syntax error, unexpected &lt;&lt;, expecting keyword_end\n&lt;&lt;&lt;&lt;&lt;&lt;&lt; Updated upstream\n  ^\n/usr/local/Homebrew/Library/Taps/homebrew/homebrew-core/Formula/snappy.rb:34: syntax error, unexpected ===, expecting keyword_end\n=======\n   ^\n/usr/local/Homebrew/Library/Taps/homebrew/homebrew-core/Formula/snappy.rb:41: syntax error, unexpected &gt;&gt;, expecting keyword_end\n&gt;&gt;&gt;&gt;&gt;&gt;&gt; Stashed changes\n  ^\nError: Failed to import: /usr/local/Homebrew/Library/Taps/homebrew/homebrew-science/opencv.rb\nopencv: cannot load such file -- /usr/local/Homebrew/Library/Taps/homebrew/homebrew-science/Requirements/cuda_requirement\n</code></pre>\n\n<p>And our verdict:</p>\n\n<pre><code> Error: ruby not installed\n</code></pre>\n\n<p>From the following github issue:  <a href=\"https://github.com/wbolster/plyvel/issues/95\" rel=\"nofollow noreferrer\">https://github.com/wbolster/plyvel/issues/95</a>   I tried</p>\n\n<pre><code>$brew uninstall leveldb\nUninstalling /usr/local/Cellar/leveldb/1.19... (26 files, 1.1MB)\n11:31:49/aact $brew install https://raw.githubusercontent.com/Homebrew/homebrew-core/86c8b39428a4e485e8afcc02f2e31da9d53007a0/Formula/leveldb.rb\n</code></pre>\n\n<p>But the end result was the same:</p>\n\n<pre><code>==&gt; Consider using `brew extract leveldb ...`!\nThis will extract your desired leveldb version to a stable tap instead of\ninstalling from an unstable URL!\n\n######################################################################## 100.0%\nError: snappy: /usr/local/Homebrew/Library/Taps/homebrew/homebrew-core/Formula/snappy.rb:30: syntax error, unexpected &lt;&lt;, expecting keyword_end\n&lt;&lt;&lt;&lt;&lt;&lt;&lt; Updated upstream\n  ^\n/usr/local/Homebrew/Library/Taps/homebrew/homebrew-core/Formula/snappy.rb:34: syntax error, unexpected ===, expecting keyword_end\n=======\n   ^\n/usr/local/Homebrew/Library/Taps/homebrew/homebrew-core/Formula/snappy.rb:41: syntax error, unexpected &gt;&gt;, expecting keyword_end\n&gt;&gt;&gt;&gt;&gt;&gt;&gt; Stashed changes\n</code></pre>\n\n<p>Any pointers how to get this ruby upgrade completed?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "templates"], "comments": [{"owner": {"reputation": 2060, "user_id": 3944700, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/4df64cd1de5941fb49263a19d80f1482?s=128&d=identicon&r=PG&f=1", "display_name": "hashrocket", "link": "https://stackoverflow.com/users/3944700/hashrocket"}, "edited": false, "score": 0, "creation_date": 1570482421, "post_id": 58276226, "comment_id": 102920650, "body": "Where is your layouts/site file?"}, {"owner": {"reputation": 35, "user_id": 12177861, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Ziym7Sw9M4U/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rf33P_m4XlTE5nWZqbY8KrAfxeVuQ/photo.jpg?sz=128", "display_name": "shubuya hushimo", "link": "https://stackoverflow.com/users/12177861/shubuya-hushimo"}, "reply_to_user": {"reputation": 2060, "user_id": 3944700, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/4df64cd1de5941fb49263a19d80f1482?s=128&d=identicon&r=PG&f=1", "display_name": "hashrocket", "link": "https://stackoverflow.com/users/3944700/hashrocket"}, "edited": false, "score": 0, "creation_date": 1570482428, "post_id": 58276226, "comment_id": 102920652, "body": "What source code files should I include along with my question? Does anybody have any suggestions?"}, {"owner": {"reputation": 35, "user_id": 12177861, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Ziym7Sw9M4U/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rf33P_m4XlTE5nWZqbY8KrAfxeVuQ/photo.jpg?sz=128", "display_name": "shubuya hushimo", "link": "https://stackoverflow.com/users/12177861/shubuya-hushimo"}, "reply_to_user": {"reputation": 2060, "user_id": 3944700, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/4df64cd1de5941fb49263a19d80f1482?s=128&d=identicon&r=PG&f=1", "display_name": "hashrocket", "link": "https://stackoverflow.com/users/3944700/hashrocket"}, "edited": false, "score": 0, "creation_date": 1570482886, "post_id": 58276226, "comment_id": 102920812, "body": "Hi I dont have a layouts/site file. I just have a layouts folder and a site folder, but there is no site file inside either folder. Do you have any other file recommendations? Thanks. @hashrocket"}, {"owner": {"reputation": 2060, "user_id": 3944700, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/4df64cd1de5941fb49263a19d80f1482?s=128&d=identicon&r=PG&f=1", "display_name": "hashrocket", "link": "https://stackoverflow.com/users/3944700/hashrocket"}, "edited": false, "score": 0, "creation_date": 1570482952, "post_id": 58276226, "comment_id": 102920835, "body": "In your user_controller.rb file, comment out the <code>layout &quot;site&quot;</code> line and see what happenes."}, {"owner": {"reputation": 35, "user_id": 12177861, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Ziym7Sw9M4U/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rf33P_m4XlTE5nWZqbY8KrAfxeVuQ/photo.jpg?sz=128", "display_name": "shubuya hushimo", "link": "https://stackoverflow.com/users/12177861/shubuya-hushimo"}, "reply_to_user": {"reputation": 2060, "user_id": 3944700, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/4df64cd1de5941fb49263a19d80f1482?s=128&d=identicon&r=PG&f=1", "display_name": "hashrocket", "link": "https://stackoverflow.com/users/3944700/hashrocket"}, "edited": false, "score": 0, "creation_date": 1570483433, "post_id": 58276226, "comment_id": 102921006, "body": "Hey thanks that actually did the trick. @hashrocket"}], "answers": [{"comments": [{"owner": {"reputation": 35, "user_id": 12177861, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Ziym7Sw9M4U/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rf33P_m4XlTE5nWZqbY8KrAfxeVuQ/photo.jpg?sz=128", "display_name": "shubuya hushimo", "link": "https://stackoverflow.com/users/12177861/shubuya-hushimo"}, "edited": false, "score": 0, "creation_date": 1570481557, "post_id": 58276530, "comment_id": 102920345, "body": "Hi I just edited my question providing some code as you suggested, I posted my <code>application.html.erb</code>, my <code>user_controller.rb</code>, and my <code>register.html.erb</code> files. Is there any specific source code files that you recommend I post as well? Thanks.  @noordean"}], "tags": [], "owner": {"reputation": 96, "user_id": 6139537, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0596629c3c2216a1d8bc79c094516d2b?s=128&d=identicon&r=PG&f=1", "display_name": "noordean", "link": "https://stackoverflow.com/users/6139537/noordean"}, "is_accepted": false, "score": 0, "last_activity_date": 1570479190, "creation_date": 1570479190, "answer_id": 58276530, "question_id": 58276226, "link": "https://stackoverflow.com/questions/58276226/template-is-missing-missing-template-layouts-site-with-locale-en-format/58276530#58276530", "title": "Template is missing: Missing template layouts/site with {:locale=&gt;[:en], :formats=&gt;[:html], :variants=&gt;[],", "body": "<p>You are likely not providing a template to render when your action is hit.\nFor example:\nIf your controller is <code>registrations_controller</code> and your action is <code>register_user</code>, then you must have <code>register_user.html.erb</code> in your <code>/app/views/registrations/</code> directory.</p>\n\n<p>If that doesn't help, you might want to provide some of your code to be able to understand the issue better.</p>\n"}, {"tags": [], "owner": {"reputation": 2060, "user_id": 3944700, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/4df64cd1de5941fb49263a19d80f1482?s=128&d=identicon&r=PG&f=1", "display_name": "hashrocket", "link": "https://stackoverflow.com/users/3944700/hashrocket"}, "is_accepted": true, "score": 0, "last_activity_date": 1570483715, "last_edit_date": 1570483715, "creation_date": 1570482598, "answer_id": 58277193, "question_id": 58276226, "link": "https://stackoverflow.com/questions/58276226/template-is-missing-missing-template-layouts-site-with-locale-en-format/58277193#58277193", "title": "Template is missing: Missing template layouts/site with {:locale=&gt;[:en], :formats=&gt;[:html], :variants=&gt;[],", "body": "<p>In your user_controller.rb file, you're stating that you want to use a <code>site</code> layout file. For this to work, you have to have a file in your layouts directory called site.html.erb (or something close to this if you're using something other than <code>erb</code> as your templating language). It should be in the same directory as your <code>application.html.erb</code> file. Your error says you are missing that file.</p>\n\n<p>Your other option is to comment out or remove the <code>layout \"site\"</code> line and go with the default layout file, which is <code>application.html.erb</code>.</p>\n"}], "owner": {"reputation": 35, "user_id": 12177861, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Ziym7Sw9M4U/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rf33P_m4XlTE5nWZqbY8KrAfxeVuQ/photo.jpg?sz=128", "display_name": "shubuya hushimo", "link": "https://stackoverflow.com/users/12177861/shubuya-hushimo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 327, "favorite_count": 0, "accepted_answer_id": 58277193, "answer_count": 2, "score": 0, "last_activity_date": 1570483715, "creation_date": 1570477635, "last_edit_date": 1570481229, "question_id": 58276226, "link": "https://stackoverflow.com/questions/58276226/template-is-missing-missing-template-layouts-site-with-locale-en-format", "title": "Template is missing: Missing template layouts/site with {:locale=&gt;[:en], :formats=&gt;[:html], :variants=&gt;[],", "body": "<p>When I tried to go the registration page of my rails site this is what showed up:</p>\n\n<blockquote>\n  <h2>Template is missing</h2>\n  \n  <p>Missing template layouts/site with {:locale=>[:en], :formats=>[:html],\n  :variants=>[], :handlers=>[:raw, :erb, :html, :builder, :ruby,\n  :jbuilder]}. Searched in: * \"C:/Users/Vanessa/rails_space/app/views\" *\n  \"C:/Ruby26-x64/lib/ruby/gems/2.6.0/gems/actiontext-6.0.0/app/views\" *\n  \"C:/Ruby26-x64/lib/ruby/gems/2.6.0/gems/actionmailbox-6.0.0/app/views\"</p>\n</blockquote>\n\n<p>Here is my app/views/layouts/application.html.erb file:</p>\n\n<pre><code>  &lt;!DOCTYPE HTML PUBLIC \"-//W3C//DTD XHTML 1.0 Strict//EN\"\n  \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd\"&gt;\n&lt;html&gt;\n  &lt;head&gt;\n    &lt;title&gt;&lt;%= @title %&gt;&lt;/title&gt;\n   &lt;%= stylesheet_link_tag \"site\" %&gt;\n  &lt;/head&gt;\n &lt;body&gt;\n\n  &lt;div id=\"whole_page\"&gt;\n\n &lt;div id=\"header\"&gt;RailsSpace&lt;/div&gt;\n &lt;div id=\"nav\"&gt;\n\n  &lt;%= link_to_unless_current \"Home\", :action =&gt; \"index\" %&gt; |\n  &lt;%= link_to_unless_current \"About Us\" , :action =&gt; \"about\" %&gt; |\n  &lt;%= link_to_unless_current \"Help\", :action =&gt; \"help\" %&gt;\n\n    &lt;/div&gt;\n    &lt;div id=\"content\"&gt;\n   &lt;%= yield %&gt;\n      &lt;/div&gt;\n     &lt;/div&gt;\n   &lt;/body&gt;\n  &lt;/html&gt;\n</code></pre>\n\n<p>Here is my user_controller.rb file:</p>\n\n<pre><code>class UserController &lt; ApplicationController\n   layout \"site\"\n\n    def index\n     end\n\n  def register\n   @title = \"Register\"\n     end\n   end\n</code></pre>\n\n<p>Here is my app/views/user/register.html.erb file: </p>\n\n<pre><code>&lt;h2&gt;Register&lt;/h2&gt;\n&lt;%= form_for :user do |form| %&gt;\n  &lt;fieldset&gt;\n  &lt;legend&gt;Enter Your Details&lt;/legend&gt;\n  &lt;div class=\"form_row\"&gt;\n  &lt;label for=\"screen_name\"&gt;Screen name:&lt;/label&gt;\n  &lt;%= form.text_field :screen_name %&gt;\n&lt;/div&gt;\n\n&lt;div class=\"form_row\"&gt;\n&lt;label for=\"email\"&gt;Email:&lt;/label&gt;\n&lt;%= form.text_field :email %&gt;\n&lt;/div&gt;\n\n&lt;div class=\"form_row\"&gt;\n &lt;label for=\"password\"&gt;Password:&lt;/label&gt;\n &lt;%= form.password_field :password %&gt;\n&lt;/div&gt;\n&lt;div class=\"form_row\"&gt;\n&lt;%= submit_tag \"Register!\", :class =&gt; \"submit\" %&gt;\n&lt;/div&gt;\n &lt;/fieldset&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>I have no idea why its showing this. Someone please help. Thank you all in advance.</p>\n"}, {"tags": ["css", "ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 1, "creation_date": 1570475976, "post_id": 58275778, "comment_id": 102918294, "body": "Is <code>color: #f19f4d;5</code> a valid color? That <code>;5</code> looks suspicious."}, {"owner": {"reputation": 11, "user_id": 8686117, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/514c08cc70b856169bdb20275964a2fc?s=128&d=identicon&r=PG&f=1", "display_name": "Ari Ticas", "link": "https://stackoverflow.com/users/8686117/ari-ticas"}, "reply_to_user": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 0, "creation_date": 1570476354, "post_id": 58275778, "comment_id": 102918470, "body": "I dont think that is a valid color and the actual css is coming from another developer. The problem is i can not find that line to fix it."}, {"owner": {"reputation": 11, "user_id": 8686117, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/514c08cc70b856169bdb20275964a2fc?s=128&d=identicon&r=PG&f=1", "display_name": "Ari Ticas", "link": "https://stackoverflow.com/users/8686117/ari-ticas"}, "reply_to_user": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 0, "creation_date": 1570476404, "post_id": 58275778, "comment_id": 102918486, "body": "does the (sass):916 part mean it is somewhere on line 916. Thank you in advance"}, {"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 0, "creation_date": 1570476527, "post_id": 58275778, "comment_id": 102918546, "body": "Not sure. Try grepping (searches content of files) it in the command prompt. You can google the details on how to do that."}, {"owner": {"reputation": 11, "user_id": 8686117, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/514c08cc70b856169bdb20275964a2fc?s=128&d=identicon&r=PG&f=1", "display_name": "Ari Ticas", "link": "https://stackoverflow.com/users/8686117/ari-ticas"}, "reply_to_user": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 0, "creation_date": 1570476740, "post_id": 58275778, "comment_id": 102918632, "body": "will try that now thank you"}, {"owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 0, "creation_date": 1570477431, "post_id": 58275778, "comment_id": 102918915, "body": "did you do full text search for <code>f19f4d</code> ?"}, {"owner": {"reputation": 11, "user_id": 8686117, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/514c08cc70b856169bdb20275964a2fc?s=128&d=identicon&r=PG&f=1", "display_name": "Ari Ticas", "link": "https://stackoverflow.com/users/8686117/ari-ticas"}, "edited": false, "score": 0, "creation_date": 1570477745, "post_id": 58275778, "comment_id": 102919040, "body": "no i have not done that is there a good wy to do that besides grep"}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 8686117, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/514c08cc70b856169bdb20275964a2fc?s=128&d=identicon&r=PG&f=1", "display_name": "Ari Ticas", "link": "https://stackoverflow.com/users/8686117/ari-ticas"}, "edited": false, "score": 0, "creation_date": 1570482758, "post_id": 58276452, "comment_id": 102920766, "body": "Thank you i think it may be the I need to require Jquery that was very helpful!"}], "tags": [], "owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "is_accepted": false, "score": 0, "last_activity_date": 1570491776, "last_edit_date": 1570491776, "creation_date": 1570478808, "answer_id": 58276452, "question_id": 58275778, "link": "https://stackoverflow.com/questions/58275778/detecting-syntax-error-in-css-file-and-ruby-on-rails-invalid-css/58276452#58276452", "title": "Detecting syntax error in css file and ruby on rails. invalid css", "body": "<p>If you are using Bootstrap, it depends on jQuery so you'll need to make sure to include it in your application stylesheet so for example in <code>app/assets/stylesheets</code> toward the top of the file and before any bootstrap includes or imports you'll need</p>\n\n<pre><code>//*= require jquery-ui\n</code></pre>\n\n<p>If that's not the problem, thaen precompilation is failing due to some kind of syntax error.  First try to any occurrence of <code>f19f4d</code> in your code by doing a full text search of your code.  If you have a *nix based system you can just try either of these from the terminal, </p>\n\n<p>if you are using git version control</p>\n\n<pre><code>git grep f19f4d\n</code></pre>\n\n<p>Or just</p>\n\n<pre><code>grep f19f4d\n</code></pre>\n\n<p>If that doesn't turn up the culprit, than it must be a third party dependency.  You'll need to go through any includes in your css. Check in your layout file.  You should have something like</p>\n\n<pre><code>&lt;%= stylesheet_link_tag \"application\" %&gt;\n</code></pre>\n\n<p>So then open the file <code>app/assets/stylesheets/application.scss</code>\nYou will then need to comment out any includes and add them back one by one until you find which library is causing precompilation to fail.  You will need to do this for every layout and/or stylesheet until you find which one is causing the problem.</p>\n\n<p>At the top of each stylesheet you should have a list of includes like</p>\n\n<pre><code>  @import 'bootstrap';\n</code></pre>\n\n<p>Or they may look more like this:</p>\n\n<pre><code>//*= require jquery-ui\n</code></pre>\n\n<p>So to comment them to not load you can just make them like this while you are testing.</p>\n\n<pre><code>// @import 'bootstrap';\n\n// require jquery-ui\n</code></pre>\n\n<p>You may got other compilation errors if you have a lot of 3rd party stuff all over the place, but you have to find the bug somewhere.</p>\n"}], "owner": {"reputation": 11, "user_id": 8686117, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/514c08cc70b856169bdb20275964a2fc?s=128&d=identicon&r=PG&f=1", "display_name": "Ari Ticas", "link": "https://stackoverflow.com/users/8686117/ari-ticas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 100, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1570491776, "creation_date": 1570475580, "last_edit_date": 1570475900, "question_id": 58275778, "link": "https://stackoverflow.com/questions/58275778/detecting-syntax-error-in-css-file-and-ruby-on-rails-invalid-css", "title": "Detecting syntax error in css file and ruby on rails. invalid css", "body": "<p>I am encountering a problem when trying to push my code up to heroku. I have run:</p>\n\n<pre><code>RAILS_ENV=production bundle exec rake assets:precompile\n</code></pre>\n\n<p>and got this error:</p>\n\n<pre><code>Sass::SyntaxError: Invalid CSS after \"  color: #f19f4d;5\": expected \"{\", was \";\"\n(sass):916\n</code></pre>\n\n<p>I understand there is syntax error somewhere in my css yet i have gone through all my files and can not find this line. Can someone please tell me if there is way to locate this line or where it could possibly be. Thank you so much!</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1570495617, "post_id": 58276311, "comment_id": 102923658, "body": "This seems to work fine (so long as the <code>begin</code> keyword is added), but I don&#39;t understand why <code>rescued_foo_error</code> doesn&#39;t raise a &quot;no method or local variable&quot; exception when <code>FooError</code> is not raised. That is, I thought you needed to initialize <code>rescued_foo_error</code> to <code>nil</code> or <code>false</code> at the beginning, but not so. Does Ruby create that local variable and initialize it to zero when parsing the <code>rescue</code> block (as it does when parsing some <code>if</code> statements)?"}, {"owner": {"reputation": 39282, "user_id": 336920, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/6e2dbeb23d3fc6552a6e26800ed63289?s=128&d=identicon&r=PG", "display_name": "B Seven", "link": "https://stackoverflow.com/users/336920/b-seven"}, "edited": false, "score": 0, "creation_date": 1570501641, "post_id": 58276311, "comment_id": 102924812, "body": "Sounds like it works the same as an <code>if</code> statement. Otherwise undefined variables are defined and set to <code>nil</code>. I think it has to do with the parser: <a href=\"https://stackoverflow.com/questions/12614805/why-can-i-refer-to-a-variable-outside-of-an-if-unless-case-statement-that-never\" title=\"why can i refer to a variable outside of an if unless case statement that never\">stackoverflow.com/questions/12614805/&hellip;</a>"}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 3, "creation_date": 1570559903, "post_id": 58276311, "comment_id": 102948667, "body": "@CarySwoveland since the variable is declared inside the current closure (def..end) and prior to the reference in unless, the parser (reading from top to bottom) recognizes the &quot;local-variable&quot; assignment in the lexical scope but since the assignment never occurs it is <code>nil</code>. As you mentioned the same occurs for if statements as it appears ruby does not consider <code>if</code> or <code>begin..end</code> as true closures. However constant definition does not follow the same rules for example <code>begin; raise; rescue ArgumentError; Foo = StandardError; ensure; Foo; end;</code> will result in an uninitialized constant."}], "tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": false, "score": 4, "last_activity_date": 1570478164, "creation_date": 1570478164, "answer_id": 58276311, "question_id": 58275777, "link": "https://stackoverflow.com/questions/58275777/what-is-a-good-way-to-suppress-an-ensure-block-in-ruby/58276311#58276311", "title": "What is a good way to suppress an ensure block in Ruby?", "body": "<p>What about this?</p>\n\n<pre><code>def run\n  ...\n\nrescue FooError\n  rescued_foo_error = true\n  ...\n\nrescue\n  ...\n\nensure\n  unless rescued_foo_error\n    ...\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 39282, "user_id": 336920, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/6e2dbeb23d3fc6552a6e26800ed63289?s=128&d=identicon&r=PG", "display_name": "B Seven", "link": "https://stackoverflow.com/users/336920/b-seven"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1570478164, "creation_date": 1570475576, "question_id": 58275777, "link": "https://stackoverflow.com/questions/58275777/what-is-a-good-way-to-suppress-an-ensure-block-in-ruby", "title": "What is a good way to suppress an ensure block in Ruby?", "body": "<pre><code>def run\n  ...\n\nrescue FooError\n  ...\n\nrescue\n  ...\n\nensure\n  ...\nend\n</code></pre>\n\n<p>How to suppress the ensure block only for FooError?</p>\n"}, {"tags": ["node.js", "ruby", "syntax"], "comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 2, "creation_date": 1570482888, "post_id": 58275700, "comment_id": 102920813, "body": "What is <code>this</code>? Ruby does not have such a method. If <code>this</code> is from Rails you need a Rails tag."}, {"owner": {"reputation": 103, "user_id": 10213048, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kIGhQ.png?s=128&g=1", "display_name": "ChrisP", "link": "https://stackoverflow.com/users/10213048/chrisp"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1570549051, "post_id": 58275700, "comment_id": 102943828, "body": "I was converting from Ruby to Node.js. This particular snippet was mid-conversion."}], "answers": [{"comments": [{"owner": {"reputation": 103, "user_id": 10213048, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kIGhQ.png?s=128&g=1", "display_name": "ChrisP", "link": "https://stackoverflow.com/users/10213048/chrisp"}, "edited": false, "score": 0, "creation_date": 1570549188, "post_id": 58275940, "comment_id": 102943891, "body": "Awesome! Thank you!"}], "tags": [], "owner": {"reputation": 16237, "user_id": 2166798, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/417356917295f5176d2a3e7c21d8f9e8?s=128&d=identicon&r=PG", "display_name": "pjs", "link": "https://stackoverflow.com/users/2166798/pjs"}, "is_accepted": true, "score": 2, "last_activity_date": 1570476366, "creation_date": 1570476366, "answer_id": 58275940, "question_id": 58275700, "link": "https://stackoverflow.com/questions/58275700/what-is-ruby-doing-in-this-line/58275940#58275940", "title": "What is Ruby doing in this line?", "body": "<p>Negative indices are relative to the end of the array, so <code>array[-1]</code> is the last element in the array.</p>\n\n<p>Example:</p>\n\n<pre><code>a = %w(This is the end)  # =&gt; [\"This\", \"is\", \"the\", \"end\"]\np a[-1]                  # =&gt; \"end\"\np a[-2]                  # =&gt; \"the\"\n</code></pre>\n"}], "owner": {"reputation": 103, "user_id": 10213048, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kIGhQ.png?s=128&g=1", "display_name": "ChrisP", "link": "https://stackoverflow.com/users/10213048/chrisp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "accepted_answer_id": 58275940, "answer_count": 1, "score": 0, "last_activity_date": 1570476366, "creation_date": 1570475226, "question_id": 58275700, "link": "https://stackoverflow.com/questions/58275700/what-is-ruby-doing-in-this-line", "title": "What is Ruby doing in this line?", "body": "<p>I'm trying to convert some software from Ruby to Node.js. I came across this and was curious on exactly what Ruby is trying to do:</p>\n\n<pre><code>// set the files variable\n    this.files = Dir[\"C:/folder/log/app.log*\"]\n// sort the files by last modified date/time\n    my_dir = this.files.sort_by { |file| File.mtime(file) }\n// Copy the files. Not sure what the [-1] is for\n    my_dir.each do |filename|\n    copy_files(filename, my_dir[-1])\n</code></pre>\n\n<p>So I get that they want to copy the files to a new directory, but what is the [-1] doing?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rubygems", "rack", "rackup"], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 12178295, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb3a09bdddea1133fc29a6356fcddbb0?s=128&d=identicon&r=PG&f=1", "display_name": "take_courage", "link": "https://stackoverflow.com/users/12178295/take-courage"}, "edited": false, "score": 0, "creation_date": 1570479000, "post_id": 58276436, "comment_id": 102919487, "body": "Thanks. I tried this, but I still get the same error: <code>Traceback (most recent call last): \t1: from &#47;usr&#47;local&#47;bin&#47;rackup:23:in `&lt;main&gt;&#39; &#47;usr&#47;local&#47;bin&#47;rackup:23:in `load&#39;: cannot load such file -- &#47;usr&#47;lib&#47;ruby&#47;gems&#47;2.5.0&#47;gems&#47;rack-2.0.7&#47;bin&#47;rackup (LoadError)</code>"}, {"owner": {"reputation": 1892, "user_id": 3158810, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/1ebf9e065f654642fecfee399b439030?s=128&d=identicon&r=PG&f=1", "display_name": "G4143", "link": "https://stackoverflow.com/users/3158810/g4143"}, "reply_to_user": {"reputation": 1, "user_id": 12178295, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb3a09bdddea1133fc29a6356fcddbb0?s=128&d=identicon&r=PG&f=1", "display_name": "take_courage", "link": "https://stackoverflow.com/users/12178295/take-courage"}, "edited": false, "score": 0, "creation_date": 1570479528, "post_id": 58276436, "comment_id": 102919660, "body": "Try running this command in a terminal gem list | grep -e puma -e thin -e webrick"}, {"owner": {"reputation": 1, "user_id": 12178295, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb3a09bdddea1133fc29a6356fcddbb0?s=128&d=identicon&r=PG&f=1", "display_name": "take_courage", "link": "https://stackoverflow.com/users/12178295/take-courage"}, "edited": false, "score": 0, "creation_date": 1570481081, "post_id": 58276436, "comment_id": 102920185, "body": "prints <code>webrick (1.5.0, default: 1.4.2)</code>"}, {"owner": {"reputation": 1892, "user_id": 3158810, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/1ebf9e065f654642fecfee399b439030?s=128&d=identicon&r=PG&f=1", "display_name": "G4143", "link": "https://stackoverflow.com/users/3158810/g4143"}, "reply_to_user": {"reputation": 1, "user_id": 12178295, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb3a09bdddea1133fc29a6356fcddbb0?s=128&d=identicon&r=PG&f=1", "display_name": "take_courage", "link": "https://stackoverflow.com/users/12178295/take-courage"}, "edited": false, "score": 0, "creation_date": 1570481272, "post_id": 58276436, "comment_id": 102920243, "body": "Well you do have a web server present(webrick) so rackup should work if you call rackup in the same folder as the config.ru file. I&#39;d post your OS specs and maybe someone can figure it out."}, {"owner": {"reputation": 1, "user_id": 12178295, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb3a09bdddea1133fc29a6356fcddbb0?s=128&d=identicon&r=PG&f=1", "display_name": "take_courage", "link": "https://stackoverflow.com/users/12178295/take-courage"}, "edited": false, "score": 0, "creation_date": 1570482092, "post_id": 58276436, "comment_id": 102920533, "body": "Thanks - I&#39;m like a total noob, so I&#39;m not sure what precisely you mean by OS specs. I&#39;m using Ubuntu, but should I include more detail? Like what specifically?"}, {"owner": {"reputation": 1892, "user_id": 3158810, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/1ebf9e065f654642fecfee399b439030?s=128&d=identicon&r=PG&f=1", "display_name": "G4143", "link": "https://stackoverflow.com/users/3158810/g4143"}, "reply_to_user": {"reputation": 1, "user_id": 12178295, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb3a09bdddea1133fc29a6356fcddbb0?s=128&d=identicon&r=PG&f=1", "display_name": "take_courage", "link": "https://stackoverflow.com/users/12178295/take-courage"}, "edited": false, "score": 0, "creation_date": 1570482247, "post_id": 58276436, "comment_id": 102920589, "body": "I tried removing thin(another ruby web server) from my system and call rackup -s thin and produced the same error as you are getting. Try running this in your terminal sudo gem contents webrick. Did it return anything?"}, {"owner": {"reputation": 1892, "user_id": 3158810, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/1ebf9e065f654642fecfee399b439030?s=128&d=identicon&r=PG&f=1", "display_name": "G4143", "link": "https://stackoverflow.com/users/3158810/g4143"}, "reply_to_user": {"reputation": 1, "user_id": 12178295, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb3a09bdddea1133fc29a6356fcddbb0?s=128&d=identicon&r=PG&f=1", "display_name": "take_courage", "link": "https://stackoverflow.com/users/12178295/take-courage"}, "edited": false, "score": 0, "creation_date": 1570482385, "post_id": 58276436, "comment_id": 102920638, "body": "For Ubuntu&#39;s specs, you could post the output from calling uname -a from the terminal."}, {"owner": {"reputation": 1, "user_id": 12178295, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb3a09bdddea1133fc29a6356fcddbb0?s=128&d=identicon&r=PG&f=1", "display_name": "take_courage", "link": "https://stackoverflow.com/users/12178295/take-courage"}, "edited": false, "score": 0, "creation_date": 1570524306, "post_id": 58276436, "comment_id": 102931275, "body": "Thanks G. I&#39;ve found a temporary solution - see edits above."}, {"owner": {"reputation": 1892, "user_id": 3158810, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/1ebf9e065f654642fecfee399b439030?s=128&d=identicon&r=PG&f=1", "display_name": "G4143", "link": "https://stackoverflow.com/users/3158810/g4143"}, "reply_to_user": {"reputation": 1, "user_id": 12178295, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb3a09bdddea1133fc29a6356fcddbb0?s=128&d=identicon&r=PG&f=1", "display_name": "take_courage", "link": "https://stackoverflow.com/users/12178295/take-courage"}, "edited": false, "score": 0, "creation_date": 1570530185, "post_id": 58276436, "comment_id": 102934008, "body": "Have you tried uninstalling Ruby and then Googling Ubuntu install Ruby? Hacking out solutions only works if you are acutely aware of the consequences of those actions."}], "tags": [], "owner": {"reputation": 1892, "user_id": 3158810, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/1ebf9e065f654642fecfee399b439030?s=128&d=identicon&r=PG&f=1", "display_name": "G4143", "link": "https://stackoverflow.com/users/3158810/g4143"}, "is_accepted": false, "score": 0, "last_activity_date": 1570478734, "creation_date": 1570478734, "answer_id": 58276436, "question_id": 58275650, "link": "https://stackoverflow.com/questions/58275650/rackup-loaderror-any-config-ru-file-gives-loaderror-when-rackup-command-used/58276436#58276436", "title": "Rackup LoadError - any config.ru file gives LoadError when rackup command used", "body": "<p>Try this file:</p>\n\n<p>config.ru</p>\n\n<pre><code>app = -&gt;(env){\n\n    status = 200\n    headers = {\"content-type\" =&gt; \"text/html\"}\n    body = [\"&lt;Html&gt;&lt;Body&gt;&lt;H1&gt;Hello, World!&lt;/H1&gt;&lt;/Body&gt;&lt;/Html&gt;\"]\n\n    [status, headers, body]\n\n}\n\nrun app\n</code></pre>\n\n<p>rackup config.ru</p>\n"}], "owner": {"reputation": 1, "user_id": 12178295, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb3a09bdddea1133fc29a6356fcddbb0?s=128&d=identicon&r=PG&f=1", "display_name": "take_courage", "link": "https://stackoverflow.com/users/12178295/take-courage"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 141, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1570524192, "creation_date": 1570474998, "last_edit_date": 1570524192, "question_id": 58275650, "link": "https://stackoverflow.com/questions/58275650/rackup-loaderror-any-config-ru-file-gives-loaderror-when-rackup-command-used", "title": "Rackup LoadError - any config.ru file gives LoadError when rackup command used", "body": "<p>Ok, so this is my first ever question. I'm bracing for feeling dumb, but here goes.</p>\n\n<p>I'm currently learning Ruby before I become familiar with Ruby on Rails. I've been following an online course, and at this juncture we've just learned how to use rack to handle some of the logic for a server, and running a config.ru file to start the server.</p>\n\n<p>But, every time I try to start the server using rackup, I get a <code>LoadError</code> like this:</p>\n\n<pre><code>    1: from /usr/local/bin/rackup:23:in `&lt;main&gt;'\n/usr/local/bin/rackup:23:in `load': cannot load such file -- /usr/lib/ruby/gems/2.5.0/gems/rack-2.0.7/bin/rackup (LoadError)```\n\n</code></pre>\n\n<p>Now, I've been slamming my head against every possible angle I can think of. I understand this error to be saying that path - from which the rackup command is trying to load the rack code - doesn't exist. I've tried making multiple different .ru files to test if its a problem with the shebang, a problem with the content of the .ru file, and so on. But that doesn't seem to be the case. I can't even run the example lobster.ru file that comes with the rack gem. I get the same error. </p>\n\n<p>I also tried reinstalling the rack gem, changing the default version of it. Neither helped. I considered using different versions of Ruby, but that didn't seem like it was relevant. The problem is clearly that rackup is looking in the wrong place. </p>\n\n<p>But, if I use <code>require 'rack'</code> on a simple ruby server, there aren't any problems. Rack works. So all of this told me that it must be something to do with the rackup command itself.</p>\n\n<p>Indeed, when I go to <code>/usr/lib/ruby/gems/2.5.0/gems</code> there is no <code>rack-2.0.7</code> directory. Instead, that directory is in <code>var/lib/gems/2.5.0/gems</code></p>\n\n<p>I've noticed that <code>var/lib/gems/2.5.0</code> is in the GEM PATHS of the RubyGems Environment. But <code>/usr/lib/ruby/gems/2.5.0'</code> is not.</p>\n\n<p>So my ideas on solving the issue were:</p>\n\n<ol>\n<li><p>Change the way that rackup loads the rack gem. I looked into this and it would mean changing what looks like seriously proper code in the rubygems or even rackup files. I will break it if I tamper with it because I have no clue what I'm doing. This is not a sensible option.  </p></li>\n<li><p>Add the <code>usr/lib...</code> to the GEM PATH, so that when rackup and rubygems looks for the rack gem it can find it. Having searched a bit about this possibility, it seems like manually adding things to the GEM PATH is not recommended. I tried it anyway...but it didn't work (FYI, I added to the GEM PATH by adding <code>export GEM_PATH=...</code> to the <code>.bashrc</code></p></li>\n</ol>\n\n<p>EDIT: Having slept on it, I can see why the second option above doesn't work either. Simply adding the missing directory to the GEM PATH or to the $LOAD_PATH won't help because rackup is looking in a specific place for rack but can't find it. If I look at the rackup code, it looks like this:</p>\n\n<pre><code>if Gem.respond_to?(:activate_bin_path)\nload Gem.activate_bin_path('rack', 'rackup', version)\nelse\ngem \"rack\", version\nload Gem.bin_path(\"rack\", \"rackup\", version)\nend\n</code></pre>\n\n<p>The segments of code doing the looking are directed by <code>:activate_bin_path</code> and <code>bin_path</code>, which are both defined in the <code>rubygems</code> code. </p>\n\n<p>So if I understand this correctly, its like rackup is getting the wrong directions to a place that doesn't exist. Like it's turning right when it should go left. My options are either to somehow change its directions to tell it 'go left' or to build the thing its looking for 'on the right'.</p>\n\n<p>Making sure it 'goes left' is the better solution but I can't figure out how to do that. So I built what its looking for 'on the right': I copied the rack gem to the <code>/usr/lib/ruby/gems/2.5.0/gems/</code> directory that rackup is looking in. It has solved the problem of rackup not finding  what it is looking for - rackup now works and the server works. BUT this solution is going to haunt me in the future, e.g. if rack is updated... It's a barbarian solution, and I'd prefer an elegant one. </p>\n\n<p>So if anyone has insight into how to make sure rackup gets the proper directions, please let me know! I think it must have something to do with making sure the rubygems <code>bin_path</code> and <code>:activate_bin_path</code> correspond with where the gems are actually installed. At the moment the fundamental discrepancy seems to be that the gems live in <code>var</code> but its looking in <code>usr</code>. </p>\n\n<p>Thanks in advance!  </p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 0, "creation_date": 1570473493, "post_id": 58275281, "comment_id": 102917201, "body": "Here&#39;s a <a href=\"https://www.google.com/search?q=rails+cloud+ide\" rel=\"nofollow noreferrer\">google search</a> you might find helpful."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 12178365, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e555677d903bb006574939386dd389a9?s=128&d=identicon&r=PG&f=1", "display_name": "Simon", "link": "https://stackoverflow.com/users/12178365/simon"}, "edited": false, "score": 0, "creation_date": 1570644419, "post_id": 58275339, "comment_id": 102981241, "body": "The system administrator at the library has disabled Windows PowerShell and Windows PowerShell (x86)*. I was able to open Windows PowerShell ISE and Windows PowerShell ISE (x86) and use the &quot;ruby --version&quot; command, but when I continued to the next step in my book (Beginning Rails 4) and attempted to update RubyGems and install Rails I received this error: &quot;gem : ERROR: SSL verification error at depth 1: self signed certificate in certificate chain (19)&quot; *<a href=\"https://drive.google.com/open?id=1BV0OWvYmJl6QUqMNInpiLVz8mVp805vD\" rel=\"nofollow noreferrer\">drive.google.com/open?id=1BV0OWvYmJl6QUqMNInpiLVz8mVp805vD</a> **<a href=\"https://drive.google.com/open?id=1S3tMxQZ-XHOmrTduD7DADjVCNVAjY1md\" rel=\"nofollow noreferrer\">drive.google.com/open?id=1S3tMxQZ-XHOmrTduD7DADjVCNVAjY1md</a>"}, {"owner": {"reputation": 7944, "user_id": 10907864, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tGpcY.jpg?s=128&g=1", "display_name": "Promise Preston", "link": "https://stackoverflow.com/users/10907864/promise-preston"}, "reply_to_user": {"reputation": 1, "user_id": 12178365, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e555677d903bb006574939386dd389a9?s=128&d=identicon&r=PG&f=1", "display_name": "Simon", "link": "https://stackoverflow.com/users/12178365/simon"}, "edited": false, "score": 0, "creation_date": 1570702784, "post_id": 58275339, "comment_id": 103000318, "body": "I think the issue is with your Internet provider. There seems to be a problem with your SSL certificate.  If you&#39;ve not been able to solve the problem maybe you could try connecting to another Internet provider.  Also, I would suggest that you try out <b>Rails 5</b> when you are done with the this Book, since you may face some issues down the road due to version compatibility.  Or try to look out for an updated version of the Book. I would also suggest &quot;<b>The Rails 5 Way</b>&quot; and &quot;<b>Learn Rails</b>&quot; by Michael Hartl as they are up-to-date with Rails version 5."}, {"owner": {"reputation": 1, "user_id": 12178365, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e555677d903bb006574939386dd389a9?s=128&d=identicon&r=PG&f=1", "display_name": "Simon", "link": "https://stackoverflow.com/users/12178365/simon"}, "edited": false, "score": 0, "creation_date": 1571066694, "post_id": 58275339, "comment_id": 103108036, "body": "Thanks for the reply. I&#39;ve concluded that using Rails isn&#39;t possible from a computer at the library due to the issue with the SSL certificate."}, {"owner": {"reputation": 7944, "user_id": 10907864, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tGpcY.jpg?s=128&g=1", "display_name": "Promise Preston", "link": "https://stackoverflow.com/users/10907864/promise-preston"}, "reply_to_user": {"reputation": 1, "user_id": 12178365, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e555677d903bb006574939386dd389a9?s=128&d=identicon&r=PG&f=1", "display_name": "Simon", "link": "https://stackoverflow.com/users/12178365/simon"}, "edited": false, "score": 0, "creation_date": 1571068173, "post_id": 58275339, "comment_id": 103108767, "body": "Oh, I am so sorry. I hope that this does not discourage your Ruby on Rails learning journey."}], "tags": [], "owner": {"reputation": 7944, "user_id": 10907864, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tGpcY.jpg?s=128&g=1", "display_name": "Promise Preston", "link": "https://stackoverflow.com/users/10907864/promise-preston"}, "is_accepted": false, "score": 0, "last_activity_date": 1570473454, "creation_date": 1570473454, "answer_id": 58275339, "question_id": 58275281, "link": "https://stackoverflow.com/questions/58275281/how-can-i-build-an-application-with-ruby-on-rails-4-on-a-windows-10-pro-computer/58275339#58275339", "title": "How can I build an application with Ruby on Rails 4 on a Windows 10 Pro computer when the command prompt has been disabled?", "body": "<p>You can use <strong>Powershell</strong> as an alternative.</p>\n\n<p>Powershell can be accessed by searching.</p>\n\n<p>Simply type <code>win</code> in the search box on <strong>taskbar</strong>, and choose <strong>Windows PowerShell</strong> in the result.</p>\n\n<p>That's all.</p>\n\n<p><strong>I hope this helps</strong></p>\n"}], "owner": {"reputation": 1, "user_id": 12178365, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e555677d903bb006574939386dd389a9?s=128&d=identicon&r=PG&f=1", "display_name": "Simon", "link": "https://stackoverflow.com/users/12178365/simon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 27, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1570473454, "creation_date": 1570473182, "question_id": 58275281, "link": "https://stackoverflow.com/questions/58275281/how-can-i-build-an-application-with-ruby-on-rails-4-on-a-windows-10-pro-computer", "title": "How can I build an application with Ruby on Rails 4 on a Windows 10 Pro computer when the command prompt has been disabled?", "body": "<p>I am learning how to build an application with Ruby on Rails 4 by completing the step-by-step exercises in the third edition of the book \"Beginning Rails 4\". I do not own my own computer, so I went to the public library to use a computer there. After successfully installing Ruby 2.6.5-1 and opening the command prompt to begin to install the RVM and Rails I saw that the command prompt has been disabled on the computers at the library*. Is there another way for me to get Rails up and running so that I build my first application?</p>\n\n<p><a href=\"https://i.stack.imgur.com/qgRWS.jpg\" rel=\"nofollow noreferrer\">*Screenshot of Command Prompt</a></p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 2, "creation_date": 1570466776, "post_id": 58273846, "comment_id": 102914429, "body": "<a href=\"https://api.rubyonrails.org/classes/ActiveRecord/Associations/CollectionProxy.html#method-i-create-21\" rel=\"nofollow noreferrer\">api.rubyonrails.org/classes/ActiveRecord/Associations/&hellip;</a>"}, {"owner": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "reply_to_user": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 1, "creation_date": 1570466866, "post_id": 58273846, "comment_id": 102914467, "body": "The <code>create!</code> method is slightly different than the <code>create</code> method. <code>!</code> is not an operator in this context. It&#39;s part of the method name. The documentation that @SebastianPalma linked describes the <code>create!</code> method. For comparison, check the description of the <code>create</code> method right before it."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1570467336, "post_id": 58273846, "comment_id": 102914690, "body": "Is the Hartl tutorial still the go-to reference? That seems like something worth fixing."}, {"owner": {"reputation": 33, "user_id": 12149159, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a57d61d40ac83af4d8840ea56ccc4bfb?s=128&d=identicon&r=PG&f=1", "display_name": "eric", "link": "https://stackoverflow.com/users/12149159/eric"}, "edited": false, "score": 0, "creation_date": 1570470813, "post_id": 58273846, "comment_id": 102916002, "body": "hello guys, i appreciate you for answering. do you happen to know why you would wanna be returned with &quot;ActiveRecord::RecordInvalid&quot; rather than &quot;nil&quot; ?  and when do you want to be returned with &quot;nil&quot;?   apologize for my question, i am teaching my self on how to rails. i am still new and i want to understand the bits."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1570473285, "post_id": 58273846, "comment_id": 102917108, "body": "This is really a pure-Ruby question. Rails simply follows the Ruby convention of when to end method names with a question mark or exclamation mark."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1570473723, "post_id": 58273846, "comment_id": 102917297, "body": "My fading memory tells me there is at least one core method whose name ends with an explanation mark for a reason other than it mutates its receiver. Can anyone think of one?"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 2, "creation_date": 1570476415, "post_id": 58273846, "comment_id": 102918494, "body": "@CarySwoveland The Rails Console <code>reload!</code> method just has one because it&#39;s <i>exciting</i> to reload."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 2, "creation_date": 1570479371, "post_id": 58273846, "comment_id": 102919605, "body": "The following returns a list of the 68 core bang methods in Ruby v2.6.3: <code>ObjectSpace.each_object(Module).with_object([]) { |mod,a| mod.instance_methods(false).select { |meth| meth.to_s[-1] == &#39;!&#39; }.each { |meth| a &lt;&lt; &quot;#{mod}\\##{meth.to_s}&quot; } } #=&gt;[..., &quot;Hash#merge!&quot;, &quot;Array#rotate!&quot;, ...]</code>. @tadman, I only recognize two of those that do not change their receiver: <a href=\"https://ruby-doc.org/core-2.6.5/Kernel.html#method-i-exit-21\" rel=\"nofollow noreferrer\">Kernal#exit!</a> (and possibly <code>exit!</code> methods for a few other modules) and <a href=\"https://ruby-doc.org/core-2.6.3/BasicObject.html#method-i-21\" rel=\"nofollow noreferrer\">BasicObject#!</a>."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 2, "creation_date": 1570486233, "post_id": 58273846, "comment_id": 102921827, "body": "@CarySwoveland: <code>exit!</code> exits the process without running the exit handlers, which is &quot;more surprising&quot; than <code>exit</code> which does run them, just like if the program had exited on its own. <code>!</code> is a red herring, it&#39;s the unary prefix <code>!</code> operator, i.e. <code>!foo == foo.!()</code>."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 1, "creation_date": 1570487001, "post_id": 58273846, "comment_id": 102922002, "body": "@J&#246;rg, as you say, <code>!foo</code> is candy for <code>foo.!</code>, but since <code>foo = true; foo.! #=&gt; false; foo =&gt; true</code>, the method <code>BasicObject#!</code>, whose name ends with an exclamation mark, does not mutate its receiver. No? What you say about <code>exit!</code> is true, but it does not mutate it&#39;s receiver, which is all I claimed."}], "answers": [{"comments": [{"owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "edited": false, "score": 3, "creation_date": 1570469141, "post_id": 58273964, "comment_id": 102915386, "body": "The note also applies for Ruby itself. Some methods don&#39;t have a <code>!</code> variant and still mutate the object in-place. For example <a href=\"https://ruby-doc.org/core-2.6.5/Array.html#method-i-delete\" rel=\"nofollow noreferrer\"><code>Array#delete</code></a>"}, {"owner": {"reputation": 33, "user_id": 12149159, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a57d61d40ac83af4d8840ea56ccc4bfb?s=128&d=identicon&r=PG&f=1", "display_name": "eric", "link": "https://stackoverflow.com/users/12149159/eric"}, "edited": false, "score": 0, "creation_date": 1570470970, "post_id": 58273964, "comment_id": 102916070, "body": "hi tadman, appreciate you for answering. additional question, why would you wanna be returned with &quot;ActiveRecord::RecordNotFound&quot; rather than &quot;nil&quot;? and when would you want to be returned with &quot;nil&quot; ?"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 33, "user_id": 12149159, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a57d61d40ac83af4d8840ea56ccc4bfb?s=128&d=identicon&r=PG&f=1", "display_name": "eric", "link": "https://stackoverflow.com/users/12149159/eric"}, "edited": false, "score": 1, "creation_date": 1570472542, "post_id": 58273964, "comment_id": 102916767, "body": "@eric I&#39;ve added an example at the end as to how this plays out in practice."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 33, "user_id": 12149159, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a57d61d40ac83af4d8840ea56ccc4bfb?s=128&d=identicon&r=PG&f=1", "display_name": "eric", "link": "https://stackoverflow.com/users/12149159/eric"}, "edited": false, "score": 1, "creation_date": 1570472973, "post_id": 58273964, "comment_id": 102916952, "body": "I suggest you delete &quot;Update:&quot; (the word, not the added text). Also, perhaps worth noting that many banged methods return <code>nil</code> when no change is made, which is sometimes be used to advantage. Perhaps make @eric&#39;s point as well."}], "tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": true, "score": 9, "last_activity_date": 1570472517, "last_edit_date": 1570472517, "creation_date": 1570467199, "answer_id": 58273964, "question_id": 58273846, "link": "https://stackoverflow.com/questions/58273846/what-is-the-use-of-in-rails/58273964#58273964", "title": "What is the use of ! in rails", "body": "<p>The important thing to remember is that in Ruby a trailing <code>!</code> or <code>?</code> are allowed on method names and become <em>part of the method name</em>, not a modifier added on. <code>x</code> and <code>x!</code> and <code>x?</code> are three completely different methods.</p>\n\n<p>In Ruby the convention is to add <code>!</code> to methods that make <em>in-place modifications</em>, that is they modify the object in fundamental ways. An example of this is <code>String#gsub</code> which returns a copy, and <code>String#gsub!</code> which modifies the string in-place.</p>\n\n<p>In Rails this has been ported over to mean that as well as situations where the method <em>will raise an exception on failure</em> instead of returning <code>nil</code>. This is best illustrated here:</p>\n\n<pre><code>Record.find_by(id: 10) # =&gt; Can return nil if not found\nRecord.find_by!(id: 10) # =&gt; Can raise ActiveRecord::RecordNotFound\n</code></pre>\n\n<p>Note that this is not always the case, as methods like <code>find</code> will raise exceptions even without the <code>!</code>. It's purely an informational component built into the method name and does not guarantee that it will or won't raise exceptions.</p>\n\n<p><em>Update</em>:</p>\n\n<p>The reason for using exceptions is to make flow-control easier. If you're constantly testing for <code>nil</code>, you end up with highly paranoid code that looks like this:</p>\n\n<pre><code>def update\n  if (user.save)\n    if (purchase.save)\n      if (email.sent?)\n        redirect_to(success_path)\n      else\n        render(template: 'invalid_email')\n      end\n    else\n      render(template: 'edit')\n    end\n  else\n    render(template: 'edit')\n  end\nend\n</code></pre>\n\n<p>In other words, you always need to be looking over your shoulder to be sure nothing bad is happening. With exceptions it looks like this:</p>\n\n<pre><code>def update\n  user.save!\n  purchase.save!\n  email.send!\n\n  redirect_to(success_path)\n\nrescue ActiveRecord::RecordNotFound\n  render(template: 'edit')\nrescue SomeMailer::EmailNotSent\n  render(template: 'invalid_email')\nend\n</code></pre>\n\n<p>Where you can see the flow is a lot easier to understand. It describes \"exceptional situations\" as being less likely to occur so they don't clutter up the main code.</p>\n"}], "owner": {"reputation": 33, "user_id": 12149159, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a57d61d40ac83af4d8840ea56ccc4bfb?s=128&d=identicon&r=PG&f=1", "display_name": "eric", "link": "https://stackoverflow.com/users/12149159/eric"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 264, "favorite_count": 0, "accepted_answer_id": 58273964, "answer_count": 1, "score": 3, "last_activity_date": 1570472517, "creation_date": 1570466685, "last_edit_date": 1570467172, "question_id": 58273846, "link": "https://stackoverflow.com/questions/58273846/what-is-the-use-of-in-rails", "title": "What is the use of ! in rails", "body": "<p>What is the use of <code>!</code> in rails?</p>\n\n<p>Especially in this line: From HArtl tutorial</p>\n\n<pre><code>users = User.order(:created_at).take(6)\n50.times do \n    content = Faker::Lorem.sentence(5)\n    user.each { |user| user.microposts.create!( content: content )}\nend\n</code></pre>\n\n<p>Basically this is creating tweets/microposts for 6 users.</p>\n\n<p>I am really wondering why need to use <code>!</code></p>\n"}, {"tags": ["ruby", "hash", "ruby-on-rails-5", "digest-authentication"], "comments": [{"owner": {"reputation": 1175, "user_id": 1487006, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/dbe9ed99a12fd3fa2f8dcd33e303eda0?s=128&d=identicon&r=PG", "display_name": "baarkerlounger", "link": "https://stackoverflow.com/users/1487006/baarkerlounger"}, "edited": false, "score": 0, "creation_date": 1570466769, "post_id": 58272818, "comment_id": 102914418, "body": "Does it work with <code>file_path = &quot;~&#47;Users&#47;crs&#47;Desktop&#47;index.xml&quot;</code>?"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1570467414, "post_id": 58272818, "comment_id": 102914723, "body": "That error doesn&#39;t match what you&#39;re opening. Can you double-check what you&#39;re doing and verify it&#39;s coming from this code?"}], "answers": [{"tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": false, "score": 0, "last_activity_date": 1570467390, "creation_date": 1570467390, "answer_id": 58274022, "question_id": 58272818, "link": "https://stackoverflow.com/questions/58272818/get-path-of-a-file-that-lives-in-desktop-using-rails/58274022#58274022", "title": "get path of a file that lives in desktop using rails", "body": "<p>Since <code>Users</code> is a root directory you must specify the full path:</p>\n\n<pre><code>file_path = \"/Users/crs/Desktop/index.xml\"\n</code></pre>\n\n<p>Notice the <code>/</code> prefix.</p>\n\n<p>Another thing to note is paths use slash (<code>/</code>) and <em>not</em> backslash (<code>\\\\</code>). If you use a backslash by accident it will \"disappear\" in most cases:</p>\n\n<pre><code>file_path = \"/Users/crs\\Desktop/index.xml\"\n# =&gt; \"/Users/crsDesktop/index.xml\"\n</code></pre>\n\n<p>Where <code>\\D</code> has special meaning within double-quoted strings and means, in this case, <em>literal capital D</em>.</p>\n"}], "owner": {"reputation": 55, "user_id": 11896746, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/596186715598a7f6ec103fa0e51d5b68?s=128&d=identicon&r=PG&f=1", "display_name": "john bowlee", "link": "https://stackoverflow.com/users/11896746/john-bowlee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 68, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1570467390, "creation_date": 1570462594, "question_id": 58272818, "link": "https://stackoverflow.com/questions/58272818/get-path-of-a-file-that-lives-in-desktop-using-rails", "title": "get path of a file that lives in desktop using rails", "body": "<p>I want to save the path of a file that lives in the desktop but seem that rails can not recognise it with the path specified. I tried this:</p>\n\n<pre><code> def calculate_hash\n    require 'digest'\n    file_path = \"Users/crs/Desktop/index.xml\"\n    sha1 = Digest::SHA1.file file_path\n    puts \"Checksum SHA1: #{sha1.hexdigest}\"\n  end\n</code></pre>\n\n<p>If I run this method I get an error saying \" No such file or directory @ rb_sysopen - /Users/crsDesktop/index.xml\n\"\nPlease hep me how I can make it recognisable.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"tags": [], "owner": {"reputation": 61, "user_id": 1636544, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e1738188089e55590afe16bfe599190?s=128&d=identicon&r=PG", "display_name": "Alexander Milano Manias", "link": "https://stackoverflow.com/users/1636544/alexander-milano-manias"}, "is_accepted": false, "score": 0, "last_activity_date": 1570461844, "creation_date": 1570461844, "answer_id": 58272600, "question_id": 58272434, "link": "https://stackoverflow.com/questions/58272434/error-message-psychsyntaxerror-unknown-did-not-find-expected-key-while/58272600#58272600", "title": "Error Message: Psych::SyntaxError: (&lt;unknown&gt;): did not find expected key while parsing a block mapping at line 3 column 1", "body": "<p>Try to not use tabulation on your yaml file. Instead use 4 spaces or check the configuration of your <code>tab</code> button.</p>\n"}], "owner": {"reputation": 11, "user_id": 12177361, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EfuNI.jpg?s=128&g=1", "display_name": "Phil", "link": "https://stackoverflow.com/users/12177361/phil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 245, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1570461844, "creation_date": 1570461242, "question_id": 58272434, "link": "https://stackoverflow.com/questions/58272434/error-message-psychsyntaxerror-unknown-did-not-find-expected-key-while", "title": "Error Message: Psych::SyntaxError: (&lt;unknown&gt;): did not find expected key while parsing a block mapping at line 3 column 1", "body": "<p>Book: Agile Web Development with rails 5.1</p>\n\n<p>I am running a simple code:  bin/rails test on cli. The output is as follows; 0 failures - 7 errors. </p>\n\n<p>I have run the code through - <a href=\"https://yamlchecker.com\" rel=\"nofollow noreferrer\">https://yamlchecker.com</a>.  I have no problems within the code. However, I continue to get the same errors when I run the bin/rails test.  I am following the book example to learn ruby on rails.  </p>\n\n<pre><code>require 'test_helper'\n\nclass ProductsControllerTest &lt; ActionDispatch::IntegrationTest\nsetup do\n@product = products(:one)\nend\n\ntest \"should get index\" do\nget products_url\nassert_response :success\nend\n\ntest \"should get new\" do\nget new_product_url\nassert_response :success\nend\n\ntest \"should create product\" do\nassert_difference('Product.count') do\n  post products_url, params:{ \n    product:{\n      title: @product.title, \n      description: @product.description, \n      image_url: @product.image_url, \n      price: @product.price \n    } \n  }\nend\nassert_redirected_to product_url(Product.last)\nend\n\ntest \"should show product\" do\nget product_url(@product)\nassert_response :success\nend\n\ntest \"should get edit\" do\nget edit_product_url(@product)\nassert_response :success\nend\n\ntest \"should update product\" do\npatch product_url(@product), params:{ \n  product:{\n    title: @product.title, \n    description: @product.description, \n    image_url: @product.image_url, \n    price: @product.price \n  } \n}\nassert_redirected_to product_url(@product)\nend\n\ntest \"should destroy product\" do\nassert_difference('Product.count', -1) do\n  delete product_url(@product)\nend\n\nassert_redirected_to products_url\nend\nend\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/cBo0Y.png\" rel=\"nofollow noreferrer\">Command Line Errors Messages</a></p>\n\n<p><a href=\"https://i.stack.imgur.com/cA88i.png\" rel=\"nofollow noreferrer\">Top part of code - sublime text 3</a></p>\n\n<p><a href=\"https://i.stack.imgur.com/XTLiH.png\" rel=\"nofollow noreferrer\">Bottom part of code - sublime text</a></p>\n\n<p>I am looking for 0 failures and 0 errors. Actual results: 0 failures and 7 errors. all from this file.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "doorkeeper"], "answers": [{"comments": [{"owner": {"reputation": 5562, "user_id": 931934, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/63f35d9e50dfd73281126b051a51668a?s=128&d=identicon&r=PG", "display_name": "nickcoxdotme", "link": "https://stackoverflow.com/users/931934/nickcoxdotme"}, "edited": false, "score": 0, "creation_date": 1587396658, "post_id": 61262193, "comment_id": 108489013, "body": "Thanks for your answer. Apologies that I let the bounty expire before I could award it to you. I&#39;ll attempt that today and report back."}, {"owner": {"reputation": 5562, "user_id": 931934, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/63f35d9e50dfd73281126b051a51668a?s=128&d=identicon&r=PG", "display_name": "nickcoxdotme", "link": "https://stackoverflow.com/users/931934/nickcoxdotme"}, "edited": false, "score": 1, "creation_date": 1587399244, "post_id": 61262193, "comment_id": 108490665, "body": "Update: that did look promising, because I do have <code>hash_token_secrets</code> enabled. I upgraded them gem to 5.3.1, but I&#39;m still seeing that issue. I added a comment to that effect to the issue I filed on the gem repo, so we&#39;ll see. I&#39;ll keep digging."}, {"owner": {"reputation": 132, "user_id": 4705099, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e84f0c2ea0f65a85b2d2a2a2b690ca64?s=128&d=identicon&r=PG&f=1", "display_name": "Felipe Sadoyama", "link": "https://stackoverflow.com/users/4705099/felipe-sadoyama"}, "reply_to_user": {"reputation": 5562, "user_id": 931934, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/63f35d9e50dfd73281126b051a51668a?s=128&d=identicon&r=PG", "display_name": "nickcoxdotme", "link": "https://stackoverflow.com/users/931934/nickcoxdotme"}, "edited": false, "score": 0, "creation_date": 1587663584, "post_id": 61262193, "comment_id": 108607174, "body": "Sorry to hear that it did not workout for you. If you find a solution or understand where the problem is please give me a ring, I&#39;m really curious to know what is happening"}], "tags": [], "owner": {"reputation": 132, "user_id": 4705099, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e84f0c2ea0f65a85b2d2a2a2b690ca64?s=128&d=identicon&r=PG&f=1", "display_name": "Felipe Sadoyama", "link": "https://stackoverflow.com/users/4705099/felipe-sadoyama"}, "is_accepted": false, "score": 1, "last_activity_date": 1587082653, "creation_date": 1587082653, "answer_id": 61262193, "question_id": 58271861, "link": "https://stackoverflow.com/questions/58271861/doorkeeper-refresh-tokens-not-expiring-on-reuse/61262193#61262193", "title": "Doorkeeper Refresh Tokens Not Expiring on Reuse", "body": "<p>The doorkepeer implement a few flows where the issued token whould be revoked. (I doubt I described all of them, I just remember of those)</p>\n\n<ul>\n<li>By willingly making a <a href=\"https://github.com/doorkeeper-gem/doorkeeper/wiki/API-endpoint-descriptions-and-examples#post---oauthrevoke\" rel=\"nofollow noreferrer\">request</a> to revoke the given token.</li>\n<li>By completing the <a href=\"https://github.com/doorkeeper-gem/doorkeeper/wiki/API-endpoint-descriptions-and-examples#curl-command-refresh-token-grant\" rel=\"nofollow noreferrer\">refresh token flow</a>, which will revoke the refreshed token. (unless the third flow is enabled)</li>\n<li>By successfully <a href=\"https://github.com/doorkeeper-gem/doorkeeper/blob/master/lib/doorkeeper/oauth/token.rb#L15\" rel=\"nofollow noreferrer\">completing an authentication</a> while having the refresh token flow enabled and by having the column <code>previous_refresh_token</code> on your <code>oauth_access_tokens</code> table. This column is automatically populated by doorkeeper during the refresh token flow by the current token being refreshed (becoming than the previous token). (this flow has to be enabled on the doorkeeper configuration)</li>\n<li><a href=\"https://github.com/doorkeeper-gem/doorkeeper/blob/master/lib/doorkeeper/oauth/authorization_code_request.rb#L33\" rel=\"nofollow noreferrer\">Revoking a grant token</a>, which is used as a pre auth for the other flows. The grant token is revoked as soon as it is used to get another token (such as client or access tokens)</li>\n<li>On the client credentials flow, by requesting a new token with the reuse access token configuration disabled</li>\n</ul>\n\n<p>Based on all of that I have to say, you're assumption is completly right. The spec you wrote should have revoked the token, which led me to think if that wasn't a bug on doorkeeper. Without seeing your doorkeeper configuration I would be pretty much guessing, but, I found this pull request <a href=\"https://github.com/doorkeeper-gem/doorkeeper/pull/1341\" rel=\"nofollow noreferrer\">#1341</a> from the version <a href=\"https://github.com/doorkeeper-gem/doorkeeper/blob/master/CHANGELOG.md#530\" rel=\"nofollow noreferrer\">5.3.0</a> that is suposed to fix a bug on the revocation of refresh tokens when the <code>hash_token_secrets</code> is enabled. If you have <code>hash_token_secrets</code> enabled try disabling it or updating the doorkeeper. If none of those is possible try making a monkey patch (as a last resource) and see if that fixes your problem.</p>\n"}], "owner": {"reputation": 5562, "user_id": 931934, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/63f35d9e50dfd73281126b051a51668a?s=128&d=identicon&r=PG", "display_name": "nickcoxdotme", "link": "https://stackoverflow.com/users/931934/nickcoxdotme"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 849, "favorite_count": 0, "answer_count": 1, "score": 6, "last_activity_date": 1587082653, "creation_date": 1570459202, "last_edit_date": 1571338389, "question_id": 58271861, "link": "https://stackoverflow.com/questions/58271861/doorkeeper-refresh-tokens-not-expiring-on-reuse", "title": "Doorkeeper Refresh Tokens Not Expiring on Reuse", "body": "<p>I'm using Doorkeeper 5.2.1 and Ive consulted the <a href=\"https://github.com/doorkeeper-gem/doorkeeper/wiki/Enable-Refresh-Token-Credentials#flow\" rel=\"noreferrer\">Doorkeeper docs on refresh tokens</a> and have read through several GitHub issues and pull requests related to refresh tokens, notably <a href=\"https://github.com/doorkeeper-gem/doorkeeper/issues/739\" rel=\"noreferrer\">here</a> and <a href=\"https://github.com/doorkeeper-gem/doorkeeper/pull/578\" rel=\"noreferrer\">here</a>.</p>\n\n<p>From what I gather from these conversations and from reading the spec (and <a href=\"https://stackoverflow.com/a/40587918/931934\">documents and posts referencing the spec</a>, the following statements are true:</p>\n\n<ul>\n<li>Refresh tokens are long lived (as opposed to access tokens, which typically expire after a relatively short TTL)</li>\n<li>An authorization server MAY implement revocation</li>\n<li>Doorkeeper implements refresh token revocation <em>on some basis</em> (though I'm not clear what, keep reading)</li>\n</ul>\n\n<p>I'm confused, though, based on <a href=\"https://github.com/doorkeeper-gem/doorkeeper/pull/578\" rel=\"noreferrer\">this pull request</a>, which implements refresh token expiry after an \"access token created with that refresh token is successfully used once.\" How would Doorkeeper know if I've made an API request with that access token successfully? It's my API that works out the authorization logic based on that access token. Doorkeeper is agnostic to my API requests being successful or not. However, I've interpreted that to mean that if the <code>resource_owner_authenticator</code> block returns a user, that could constitute successful use. Yet I have not found that that expires a refresh token successfully. (See my spec below.)</p>\n\n<p>It also appears from reading <a href=\"https://github.com/doorkeeper-gem/doorkeeper/blob/master/spec/lib/oauth/refresh_token_request_spec.rb#L48-L50\" rel=\"noreferrer\">this spec file</a> that if you successfully use a refresh token, it revokes the previous refresh tokens, which would make sense.</p>\n\n<p>I'm trying to work all this out in my spec file, though, and I'm running into an issue where it doesn't appear that a refresh token is revoked, even when it's used multiple times, or it (\"refresh token A\") is reused <em>after</em> the refresh token (\"token B\") that returns with the access token that refresh token A is used to generate, is also used. My spec file will make this clearer:</p>\n\n<pre><code>describe 'OAuth flow' do\n  # ...\n  describe 'refresh tokens' do\n\n    # ...\n    context 'when attempting reuse of a refresh token' do\n      before do\n        redirect_uri = 'https://localhost:3002'\n\n        # ivars necessary brecause plaintext tokens/secrets are only available upon creation of the object\n        @client = Doorkeeper::Application.create(name: 'foo', uid: 'bar', redirect_uri: redirect_uri, scopes: 'project_index')\n        @secret = @client.plaintext_secret\n        @grant = Doorkeeper::AccessGrant.create(resource_owner_id: user.id, organization_id: org.id, application_id: @client.id, scopes: 'project_index', expires_in: 600, redirect_uri: redirect_uri)\n        @code = @grant.plaintext_token\n      end\n\n      it 'revokes the initial refresh token' do\n        # Get an initial access token and refresh token\n        post \"/oauth/token?client_id=#{@client.uid}&amp;client_secret=#{@secret}&amp;code=#{@code}&amp;grant_type=authorization_code&amp;redirect_uri=#{@client.redirect_uri}&amp;scope=project_index\"\n        expect(response.status).to eq(200)\n\n        # Use refresh token to get a new access token\n        previous_refresh_token = JSON.parse(response.body)['refresh_token']\n\n        post \"/oauth/token?client_id=#{@client.uid}&amp;client_secret=#{@secret}&amp;code=#{@code}&amp;grant_type=refresh_token&amp;refresh_token=#{previous_refresh_token}&amp;redirect_uri=#{@client.redirect_uri}&amp;scope=project_index\"\n        expect(response.status).to eq(200)\n        json_body = JSON.parse(response.body)\n        new_access_token = json_body['access_token']\n        new_refresh_token = json_body['refresh_token']\n\n        # Use the new access token successfully\n        get \"/api/v1/projects?access_token=#{new_access_token}\"\n        expect(response.status).to eq(200)\n\n        # Use the new refresh token to get yet another access token\n        post \"/oauth/token?client_id=#{@client.uid}&amp;client_secret=#{@secret}&amp;code=#{@code}&amp;grant_type=refresh_token&amp;refresh_token=#{new_refresh_token}&amp;redirect_uri=#{@client.redirect_uri}&amp;scope=project_index\"\n        expect(response.status).to eq(200)\n\n        # Attempt reuse of the first refresh token\n        post \"/oauth/token?client_id=#{@client.uid}&amp;client_secret=#{@secret}&amp;code=#{@code}&amp;grant_type=refresh_token&amp;refresh_token=#{previous_refresh_token}&amp;redirect_uri=#{@client.redirect_uri}&amp;scope=project_index\"\n        expect(response.status).to eq(400)\n\n        # ^^^ fails, response is 200 and a new access token and refresh token are generated\n      end\n    end\n  end\n\n  # ...\nend\n</code></pre>\n\n<p>This spec fails on the last assertion, suggesting that for a given refresh token, it is not revoked when the access token it is used to generate is used successfully (contrary to what's stated above), or when the refresh token issued with the refreshed access token is used.</p>\n\n<p>My question is, with Doorkeeper, under what circumstances is a refresh token revoked?</p>\n"}, {"tags": ["ruby", "ruby-on-rails-4", "encryption", "ubuntu-16.04", "gpgme"], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 4107618, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-XjD9TzkgLA0/AAAAAAAAAAI/AAAAAAAAAaI/u6wKlAB1k_A/photo.jpg?sz=128", "display_name": "Ernst Arnold", "link": "https://stackoverflow.com/users/4107618/ernst-arnold"}, "is_accepted": false, "score": 0, "last_activity_date": 1570509535, "creation_date": 1570509535, "answer_id": 58280277, "question_id": 58270499, "link": "https://stackoverflow.com/questions/58270499/gpgmectx-decrypt-gpgmeerror-not-supported/58280277#58280277", "title": "GPGME::Ctx decrypt &gt; GPGME::Error Not supported", "body": "<p>The GPGME README says: To build GPGME you need to install libgpg-error (>= 1.24) and\nlibassuan (>= 2.4.2).</p>\n\n<p>On Ubuntu 16.04.6 I do not find libgpg-error (>= 1.24)</p>\n\n<p>Workaround, execute a command line GPG command:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>`export GPG_TTY=$(tty) &amp;&amp; echo \"#{passphrase]}\" | gpg --yes --passphrase-fd 0 --output #{out_path} --decrypt #{in_path}`\n</code></pre>\n\n<p>Unfortunately in my case GPG made easy was not easy</p>\n"}], "owner": {"reputation": 11, "user_id": 4107618, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-XjD9TzkgLA0/AAAAAAAAAAI/AAAAAAAAAaI/u6wKlAB1k_A/photo.jpg?sz=128", "display_name": "Ernst Arnold", "link": "https://stackoverflow.com/users/4107618/ernst-arnold"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 122, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1570509535, "creation_date": 1570454638, "question_id": 58270499, "link": "https://stackoverflow.com/questions/58270499/gpgmectx-decrypt-gpgmeerror-not-supported", "title": "GPGME::Ctx decrypt &gt; GPGME::Error Not supported", "body": "<p>On my Desktop Debian GNU/Linux 9.11 (stretch)  the code works but not on a server Ubuntu 16.04.6</p>\n\n<p>The problem occures in the method\nFunction: gpgme_error_t gpgme_op_decrypt (gpgme_ctx_t ctx, gpgme_data_t cipher, gpgme_data_t plain)\n<a href=\"https://www.gnupg.org/documentation/manuals/gpgme/Decrypt.html\" rel=\"nofollow noreferrer\">https://www.gnupg.org/documentation/manuals/gpgme/Decrypt.html</a></p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>crypto = GPGME::Ctx.new(\n      pinentry_mode: GPGME::PINENTRY_MODE_LOOPBACK,\n      passphrase_callback: method(:passfunc)\n    )\n    data = crypto.decrypt(encrypted_data)\n</code></pre>\n\n<p>raises exception GPGME::Error with message 'Not supported'</p>\n\n<p>The error occurs in the GEM\nshared/bundle/ruby/2.5.0/gems/gpgme-2.0.18/lib/gpgme/ctx.rb:428:in `decrypt'</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code> def decrypt(cipher, plain = Data.new)\n      err = GPGME::gpgme_op_decrypt(self, cipher, plain)\n</code></pre>\n\n<p>The exception GPGME::Error with message 'Not supported' is not documented at <a href=\"https://www.rubydoc.info/gems/gpgme/2.0.18/GPGME/Error\" rel=\"nofollow noreferrer\">https://www.rubydoc.info/gems/gpgme/2.0.18/GPGME/Error</a></p>\n\n<p>On my development PC the exception is not raised!</p>\n"}, {"tags": ["ruby", "public-key", "dsa"], "comments": [{"owner": {"reputation": 23625, "user_id": 2868801, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ec5567811049b7ce8192be0bc0246d1?s=128&d=identicon&r=PG&f=1", "display_name": "dave_thompson_085", "link": "https://stackoverflow.com/users/2868801/dave-thompson-085"}, "edited": false, "score": 0, "creation_date": 1570518745, "post_id": 58269483, "comment_id": 102928821, "body": "The elliptic curve equation y^2=x^3+7 (for Koblitz prime curves like secp256k1) is over a <b>finite field</b> mathematicians denote F_p not the &#39;normal&#39; integers denoted Z. Effectively dupe <a href=\"https://stackoverflow.com/questions/43629265/deriving-an-ecdsa-uncompressed-public-key-from-a-compressed-one\" title=\"deriving an ecdsa uncompressed public key from a compressed one\">stackoverflow.com/questions/43629265/&hellip;</a> which includes python and C#, although I don&#39;t recognize the language you are using. Or <a href=\"https://bitcoin.stackexchange.com/questions/44024/get-uncompressed-public-key-from-compressed-form\" title=\"get uncompressed public key from compressed form\">bitcoin.stackexchange.com/questions/44024/&hellip;</a> for Java with some fixes."}, {"owner": {"reputation": 27, "user_id": 11582737, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-nj7eyjxT6g8/AAAAAAAAAAI/AAAAAAAAAAg/jBWOSwVtMAw/photo.jpg?sz=128", "display_name": "Karol Mazurek", "link": "https://stackoverflow.com/users/11582737/karol-mazurek"}, "reply_to_user": {"reputation": 23625, "user_id": 2868801, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ec5567811049b7ce8192be0bc0246d1?s=128&d=identicon&r=PG&f=1", "display_name": "dave_thompson_085", "link": "https://stackoverflow.com/users/2868801/dave-thompson-085"}, "edited": false, "score": 0, "creation_date": 1570537868, "post_id": 58269483, "comment_id": 102937531, "body": "I added tag Ruby. Thanks for links, i will check it out and try to validate my results."}], "migrated_from": {"other_site": {"aliases": ["http://cryptography.stackexchange.com"], "markdown_extensions": ["MathJax"], "launch_date": 1435671420, "open_beta_date": 1312315906, "closed_beta_date": 1310497200, "site_state": "normal", "high_resolution_icon_url": "https://cdn.sstatic.net/Sites/crypto/Img/apple-touch-icon@2.png", "twitter_account": "StackCrypto", "favicon_url": "https://cdn.sstatic.net/Sites/crypto/Img/favicon.ico", "icon_url": "https://cdn.sstatic.net/Sites/crypto/Img/apple-touch-icon.png", "audience": "software developers, mathematicians and others interested in cryptography", "site_url": "https://crypto.stackexchange.com", "api_site_parameter": "crypto", "logo_url": "https://cdn.sstatic.net/Sites/crypto/Img/logo.png", "name": "Cryptography", "site_type": "main_site"}, "on_date": 1570451021, "question_id": 74869}, "owner": {"reputation": 27, "user_id": 11582737, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-nj7eyjxT6g8/AAAAAAAAAAI/AAAAAAAAAAg/jBWOSwVtMAw/photo.jpg?sz=128", "display_name": "Karol Mazurek", "link": "https://stackoverflow.com/users/11582737/karol-mazurek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1098, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1571956053, "creation_date": 1570450809, "last_edit_date": 1570531305, "question_id": 58269483, "link": "https://stackoverflow.com/questions/58269483/ecdsa-public-key-recovery", "title": "ECDSA Public key recovery", "body": "<p>Helo,</p>\n\n<p>I try to recover the public key from cookie, here is what i've done, not sure if thats correct...</p>\n\n<p>1) Register and login to get the cookie:</p>\n\n<pre><code>user: test\npass: asd\ncookie: dGVzdC0tMEYCIQDkk9vxwQ2A81geSQSTCxQEzGwTkA7gdYR0%2BpSr6MTNEwIhAJLLemlZFZZT6unXBg4i1WvdJy6tKVJrLQmj%2FM8SujPA\n</code></pre>\n\n<p>2) Decode the cookie as a url:</p>\n\n<pre><code>dGVzdC0tMEYCIQDkk9vxwQ2A81geSQSTCxQEzGwTkA7gdYR0+pSr6MTNEwIhAJLLemlZFZZT6unXBg4i1WvdJy6tKVJrLQmj/M8SujPA\n</code></pre>\n\n<p>3) Decode the cookie as a base64</p>\n\n<pre><code>test--0F\\x02!\\x00\\xE4\\x93\\xDB\\xF1\\xC1\\r\\x80\\xF3X\\x1EI\\x04\\x93\\v\\x14\\x04\\xCCl\\x13\\x90\\x0E\\xE0u\\x84t\\xFA\\x94\\xAB\\xE8\\xC4\\xCD\\x13\\x02!\\x00\\x92\\xCBziY\\x15\\x96S\\xEA\\xE9\\xD7\\x06\\x0E\\\"\\xD5k\\xDD'.\\xAD)Rk-\\t\\xA3\\xFC\\xCF\\x12\\xBA3\\xC0\n</code></pre>\n\n<p>4) Decode the part of cookie after \"--\" as a ECDSA (DER) lets say its 'sig'.</p>\n\n<pre><code>    ECDSA::Format::SignatureDerString.decode(sig)\n&lt;ECDSA::Signature:0x000056532e7cc928 @s=66397190700537287645903651815357348182011798486667182586289641565984306901952, @r=103388573995635080359749164254216598308788835304023601477803095234286494993683&gt;\n</code></pre>\n\n<p>5) Check the code: (this is not important now*)\n*============================================================</p>\n\n<pre><code>$group = Secp256k1\n$private_key = UNKNOWN\n\ndef sign(str)\n    digest = Digest::SHA256.digest(str) \n    temp_key = str.size \n    signature = ECDSA.sign($group, $private_key, digest, temp_key)\nend\n\ntemp_key = 'test'.size ==&gt; 4\n</code></pre>\n\n<p>=============================================================*</p>\n\n<p>6) PUBLIC KEY RECOVERY:</p>\n\n<p>1) Check if s and r are integer:</p>\n\n<pre><code>signature.r.class\nsignature.s.class\n</code></pre>\n\n<p>2) Calculate curve point R (x1,y1) where x(h) x can be r, r+n (r+2n etc.) depens on h value in $group.</p>\n\n<p>Convert n from hex</p>\n\n<pre><code>n = 0xFFFFFFFF_FFFFFFFF_FFFFFFFF_FFFFFFFE_BAAEDCE6_AF48A03B_BFD25E8C_D0364141.ord\nn = 115792089237316195423570985008687907852837564279074904382605163141518161494337\n</code></pre>\n\n<p>3) Calculate the xj when h = 1 ==>   j &lt;= h </p>\n\n<p>So i got x0 = r and x1 = r + n</p>\n\n<pre><code>x0 = 103388573995635080359749164254216598308788835304023601477803095234286494993683\nx1 = 219180663232951275783320149262904506162058819969664165517260679242195329665346```\n# y\u00b2 = x\u00b3 + 7  ==&gt; x\u00b3 + 7 - y\u00b2 = 0  ==&gt; y = sqrt(x\u00b3 + 7)\n    So there are Y that can be -Y.\n</code></pre>\n\n<pre><code>y0 = (Math.sqrt(x0**3 + 7)).to_i \ny0 = 33243658930125968263381409750062872803328956523994685349884711523646619725501695561221713273581676204319400941060096\n\ny1 = 102613229253348668425867949464551151644184036880118254846069064957181439439331464178252481009905814258844193460846592`\n\nR0 = (x0, y0) or R0 = (x0, -y0)  ==&gt; R0 = x0,y0 R0m = x0,-y0   (arrays)\nR1 = (x1, y1) or R1 = (x1, -y1)  ==&gt; R0 = x1,y1 R1m = x1,-y1   (arrays)\n</code></pre>\n\n<p>3) Calculate e = HASH(m)</p>\n\n<pre><code>m = \"test\"\ne = Digest::SHA256.digest(m)\n\"\\x9F\\x86\\xD0\\x81\\x88L}e\\x9A/\\xEA\\xA0\\xC5Z\\xD0\\x15\\xA3\\xBFO\\e+\\v\\x82,\\xD1]l\\x15\\xB0\\xF0\\n\\b\"\ne.unpack(\"H*\")\n\"9f86d081884c7d659a2feaa0c55ad015a3bf4f1b2b0b822cd15d6c15b0f00a08\"\n==&gt; IN BINARY \"1001111110000110110100001000000110001000010011000111110101100101100110100010111111101010101000001100010101011010110100000001010110100011101111110100111100011011001010110000101110000010001011001101000101011101011011000001010110110000111100000000101000001000\"\n</code></pre>\n\n<p>4) z = (Ln - first len(n) n=256)  leftmost bits of e</p>\n\n<pre><code>z = 1000000000001000100010001000100010000000000000000000100010000000100010000000100000000000000000001000000000000000000000000000100010000000000000001000000000000000000010000000000010001000000000000000100010001000100010000000100000001000100000000000100000001000\n==&gt; IN DECIMAL 57911121712712222031468434730037426356855313884841210343156710740660779485192\n</code></pre>\n\n<p>5) Calculate u1 = -z * r^(-1) mod n and u2 = s * r^(-1) mod n</p>\n\n<pre><code> u1 = (-z * r**(-1)) % n\n=&gt; 11971578986221445867450691250469536884332685577127711573660715696043877254293372045122426347501727868950695322967745945196078037375262636091467191875787979/103388573995635080359749164254216598308788835304023601477803095234286494993683\nu2 = (-z * s**(-1)) % n\n=&gt;(66397190700537287645903651815357348182011798486667182586289641565984306901952/103388573995635080359749164254216598308788835304023601477803095234286494993683)\n\n6) Calculate curve point Qa = (Xa, Ya) = u1 *G + u2 * R\n\nG = [55066263022277343669578718895168534326250603453777594175500187360389116729240, 32670510020758816978083085130507043184471273380659243275938904335757337482424]\n\nu1.to_int = 115792089237316195423570985008687907852837564279074904382605163141518161494336  \nu2.to_int = 115792089237316195423570985008687907852837564279074904382605163141518161494336\n</code></pre>\n\n<p>Now its time to calcluate the Qa for every R. R0, R0m, R1, R1m, but i feel like i wasted time... Could somebody look at this and help me understand how to recover the public key from cookie?</p>\n\n<p>I used wikipedia [ecdsa recovery public key]</p>\n\n<p><a href=\"https://en.m.wikipedia.org/wiki/Elliptic_Curve_Digital_Signature_Algorithm\" rel=\"nofollow noreferrer\">https://en.m.wikipedia.org/wiki/Elliptic_Curve_Digital_Signature_Algorithm</a> </p>\n\n<p>and these sites:</p>\n\n<p>References:</p>\n\n<p>1) <a href=\"https://www.instructables.com/id/Understanding-how-ECDSA-protects-your-data/\" rel=\"nofollow noreferrer\">https://www.instructables.com/id/Understanding-how-ECDSA-protects-your-data/</a></p>\n\n<p>2) <a href=\"https://www.johndcook.com/blog/2018/08/14/bitcoin-elliptic-curves/\" rel=\"nofollow noreferrer\">https://www.johndcook.com/blog/2018/08/14/bitcoin-elliptic-curves/</a></p>\n\n<p>3) <a href=\"http://www.secg.org/sec1-v2.pdf\" rel=\"nofollow noreferrer\">http://www.secg.org/sec1-v2.pdf</a> </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "azure-active-directory"], "answers": [{"comments": [{"owner": {"reputation": 199, "user_id": 11018517, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bq3gQ.jpg?s=128&g=1", "display_name": "jdps", "link": "https://stackoverflow.com/users/11018517/jdps"}, "edited": false, "score": 0, "creation_date": 1570616403, "post_id": 58276730, "comment_id": 102966382, "body": "Thanks. I can now retrieve directory information in my server using adal. After searches, i still can&#39;t display those info in my view. Do you have any idea?"}, {"owner": {"reputation": 20467, "user_id": 4989676, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jP8H6.jpg?s=128&g=1", "display_name": "Peter Pan", "link": "https://stackoverflow.com/users/4989676/peter-pan"}, "reply_to_user": {"reputation": 199, "user_id": 11018517, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bq3gQ.jpg?s=128&g=1", "display_name": "jdps", "link": "https://stackoverflow.com/users/11018517/jdps"}, "edited": false, "score": 0, "creation_date": 1570617475, "post_id": 58276730, "comment_id": 102966931, "body": "@jdps If you have got those info from Azure AD, I think it should be simple for displaying them to a web page in rails. May you can create a new SO thread and post what code you did currently to ask for helps."}, {"owner": {"reputation": 199, "user_id": 11018517, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bq3gQ.jpg?s=128&g=1", "display_name": "jdps", "link": "https://stackoverflow.com/users/11018517/jdps"}, "edited": false, "score": 0, "creation_date": 1570635145, "post_id": 58276730, "comment_id": 102976888, "body": "Here is my new question: <a href=\"https://stackoverflow.com/questions/58307567/azure-active-directory-display-directory-information-in-views\" title=\"azure active directory display directory information in views\">stackoverflow.com/questions/58307567/&hellip;</a>"}], "tags": [], "owner": {"reputation": 20467, "user_id": 4989676, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jP8H6.jpg?s=128&g=1", "display_name": "Peter Pan", "link": "https://stackoverflow.com/users/4989676/peter-pan"}, "is_accepted": true, "score": 0, "last_activity_date": 1570480225, "creation_date": 1570480225, "answer_id": 58276730, "question_id": 58267536, "link": "https://stackoverflow.com/questions/58267536/get-azure-ad-directory-users-in-a-rails-app/58276730#58276730", "title": "Get Azure AD directory users in a Rails app", "body": "<p>Just according to your code, I think you want to get the collection of users via the Azure AD Graph REST API <a href=\"https://docs.microsoft.com/en-us/previous-versions/azure/ad/graph/api/users-operations#get-users--\" rel=\"nofollow noreferrer\"><code>Get users</code></a> using <a href=\"https://github.com/jnunemaker/httparty\" rel=\"nofollow noreferrer\"><code>jnunemaker/httparty</code></a> library. </p>\n\n<p>However, it seems to be missing the required header <code>Authorization</code> with its value like <code>Bearer eyJ0eX ... FWSXfwtQ</code> as the section <a href=\"https://docs.microsoft.com/en-us/previous-versions/azure/ad/graph/howto/azure-ad-graph-api-operations-overview#authentication-and-authorization--\" rel=\"nofollow noreferrer\"><code>Authentication and authorization</code></a> of the offical document <a href=\"https://docs.microsoft.com/en-us/previous-versions/azure/ad/graph/howto/azure-ad-graph-api-operations-overview\" rel=\"nofollow noreferrer\"><code>Operations overview | Graph API concepts</code></a> said. Meanwhile, you have done the authentication with <code>OpenID Connect</code>, but Azure AD Graph API requires the access token as <code>Authorization</code> value from OAuth2 as the content below said.</p>\n\n<blockquote>\n  <p>The Graph API performs authorization based on OAuth 2.0 permission scopes present in the token. For more information about the permission scopes that the Graph API exposes, see <a href=\"https://msdn.microsoft.com/library/azure/ad/graph/howto/azure-ad-graph-api-permission-scopes\" rel=\"nofollow noreferrer\">Graph API Permission Scopes</a>.</p>\n  \n  <p>In order for your app to authenticate with Azure AD and call the Graph API, you must add it to your tenant and configure it to require permissions (OAuth 2.0 permission scopes) for Windows Azure Active Directory. For information about adding and configuring an app, see <a href=\"https://azure.microsoft.com/documentation/articles/active-directory-integrating-applications/\" rel=\"nofollow noreferrer\">Integrating Applications with Azure Active Directory</a>.</p>\n  \n  <p>Azure AD uses the OAuth 2.0 authentication protocol. You can learn more about OAuth 2.0 in Azure AD, including supported flows and access tokens in <a href=\"https://msdn.microsoft.com/en-us/library/azure/dn645545.aspx\" rel=\"nofollow noreferrer\">OAuth 2.0 in Azure AD</a>.</p>\n</blockquote>\n\n<p>So I'm afraid you have to get the access token manually via OAuth2 for Azure AD again for using Graph API, or just simply refer to the sample code <a href=\"https://github.com/AzureAD/azure-activedirectory-library-for-ruby/blob/dev/samples/authorization_code_example/web_app.rb\" rel=\"nofollow noreferrer\"><code>samples/authorization_code_example/web_app.rb</code></a> using the <code>adal</code> library of GitHub repo <a href=\"https://github.com/AzureAD/azure-activedirectory-library-for-ruby\" rel=\"nofollow noreferrer\"><code>AzureAD/azure-activedirectory-library-for-ruby</code></a> for Ruby.</p>\n"}], "owner": {"reputation": 199, "user_id": 11018517, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bq3gQ.jpg?s=128&g=1", "display_name": "jdps", "link": "https://stackoverflow.com/users/11018517/jdps"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 544, "favorite_count": 0, "accepted_answer_id": 58276730, "answer_count": 1, "score": 0, "last_activity_date": 1570480225, "creation_date": 1570443316, "question_id": 58267536, "link": "https://stackoverflow.com/questions/58267536/get-azure-ad-directory-users-in-a-rails-app", "title": "Get Azure AD directory users in a Rails app", "body": "<p>I have a Rails 6 application and I want to use Azure Active Directory as an authentication system (with open id connect, saml2 and ldap).\nThe authentication is done.\nNow I am trying to display user information like names or email addresses. I also want to be able to export all users of a directory.</p>\n\n<p>I have tried to set a configuration up like so:</p>\n\n<ul>\n<li>In my Rails app, in the admin panel, an admin can configure Azure AD for my application</li>\n<li>in the config, the admin copies and pastes the configuration link provided by Azure AD (a JSON response)</li>\n<li>Then, copies and pastes the app client_id</li>\n<li>Then, the tenant_id (directory id)</li>\n</ul>\n\n<p>Here is a piece of code that I expected to work:</p>\n\n<pre><code>def update_oidc\n    identity_provider = IdentityProvider.find_by(provider_type: 'open_id_connect', id: params[:id])\n    client_id = params[:client_id].strip\n    metadata_url = params[:metadata_url].strip\n    tenant_id = params[:tenant_id].strip\n\n    metadata = HTTParty.get(metadata_url).parsed_response\n\n    identity_provider.update(config: {\n      metadata: metadata,\n      metadata_url: metadata_url,\n      client_id: client_id,\n      tenant_id: tenant_id,\n    })\n\n    if tenant_id \n      directory_access_url = \"https://graph.windows.net/#{tenant_id}/users?api-version=1.6\"\n      result = HTTParty.get(directory_access_url).parsed_response\n\n      identity_provider.directories.find_or_create_by(tenant_id: tenant_id).update(\n        business_phones: result[\"business_phones\"],\n        display_name: result[\"display_name\"],\n        given_name: result[\"given_name\"],\n        job_title: result[\"job_title\"],\n        email: result[\"user_principal_name\"],\n        mobile_phone: result[\"mobile_phone\"],\n        office_location: result[\"office_location\"],\n        surname: result[\"surname\"]\n      )\n    end\n\n    redirect_to identity_provider\n  end\n</code></pre>\n\n<p>As the <code>tenant_id</code> is the directory id, i thought that we might be able to access user info this way (and following the Microsoft Docs). The thing is, it doesn't work because even though I'm connected to my Azure AD directory in my app, when I run <code>result = HTTParty.get(directory_access_url).parsed_response</code>, i have an authentication error telling me the token has expired or that i need to be connected.</p>\n\n<p>I don't want to use PowerShell or anything like this. I want to be able to access directories data through my app.</p>\n\n<p>Can someone tell me what i'm doing wrong or come up with an idea ?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["ruby", "zendesk", "devkit"], "comments": [{"owner": {"reputation": 596, "user_id": 2223138, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/tXTZI.jpg?s=128&g=1", "display_name": "Jimmy Long", "link": "https://stackoverflow.com/users/2223138/jimmy-long"}, "edited": false, "score": 0, "creation_date": 1570825114, "post_id": 58267335, "comment_id": 103051058, "body": "Can you share more details about your environment and which steps you followed?"}, {"owner": {"reputation": 7, "user_id": 11123759, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-LRK4OC1kxOw/AAAAAAAAAAI/AAAAAAAAKE8/pzF08s7X03Q/photo.jpg?sz=128", "display_name": "Adnan Zahry", "link": "https://stackoverflow.com/users/11123759/adnan-zahry"}, "reply_to_user": {"reputation": 596, "user_id": 2223138, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/tXTZI.jpg?s=128&g=1", "display_name": "Jimmy Long", "link": "https://stackoverflow.com/users/2223138/jimmy-long"}, "edited": false, "score": 0, "creation_date": 1571034547, "post_id": 58267335, "comment_id": 103091800, "body": "I followed the step in this article <a href=\"https://develop.zendesk.com/hc/en-us/articles/360001075048-Installing-and-using-the-Zendesk-apps-tools\" rel=\"nofollow noreferrer\">develop.zendesk.com/hc/en-us/articles/&hellip;</a>,  Env: Windows 10 64bit, ruby 2.5"}, {"owner": {"reputation": 596, "user_id": 2223138, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/tXTZI.jpg?s=128&g=1", "display_name": "Jimmy Long", "link": "https://stackoverflow.com/users/2223138/jimmy-long"}, "edited": false, "score": 0, "creation_date": 1571154109, "post_id": 58267335, "comment_id": 103142084, "body": "The guide mentioned that ZAT doesn&#39;t work in Ruby 2.5 for Windows.."}], "answers": [{"tags": [], "owner": {"reputation": 23, "user_id": 8862524, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b13deea80d1702be8944d0c3ff1aec3c?s=128&d=identicon&r=PG&f=1", "display_name": "JasonHorsleyTech", "link": "https://stackoverflow.com/users/8862524/jasonhorsleytech"}, "is_accepted": false, "score": 0, "last_activity_date": 1583859113, "last_edit_date": 1583859113, "creation_date": 1583854557, "answer_id": 60620959, "question_id": 58267335, "link": "https://stackoverflow.com/questions/58267335/installing-zat-error-error-installing-zendesk-apps-tools-error-failed-to-bu/60620959#60620959", "title": "Installing ZAT : ERROR: Error installing zendesk_apps_tools: ERROR: Failed to build gem native extension", "body": "<p>As <a href=\"https://stackoverflow.com/questions/58267335/installing-zat-error-error-installing-zendesk-apps-tools-error-failed-to-bu/60620959#comment103142084_58267335\">Jimmy Long mentions in a comment</a>:</p>\n\n<blockquote>\n  <p>The guide mentioned that ZAT doesn't work in Ruby 2.5 for Windows..</p>\n</blockquote>\n\n<p>You'll need both ruby and gem to be at 2.6.5.</p>\n"}], "owner": {"reputation": 7, "user_id": 11123759, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-LRK4OC1kxOw/AAAAAAAAAAI/AAAAAAAAKE8/pzF08s7X03Q/photo.jpg?sz=128", "display_name": "Adnan Zahry", "link": "https://stackoverflow.com/users/11123759/adnan-zahry"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 802, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1583859113, "creation_date": 1570442617, "question_id": 58267335, "link": "https://stackoverflow.com/questions/58267335/installing-zat-error-error-installing-zendesk-apps-tools-error-failed-to-bu", "title": "Installing ZAT : ERROR: Error installing zendesk_apps_tools: ERROR: Failed to build gem native extension", "body": "<p>I'm following Installing and using the Zendesk apps tools documentation but I'm getting an error when trying to install ZAT.</p>\n\n<p>Have searched some articles and followed all the step but still got the error.</p>\n\n<pre><code>ERROR:  Error installing zendesk_apps_tools:\n        ERROR: Failed to build gem native extension.\n\n    current directory: /var/lib/gems/2.5.0/gems/eventmachine-1.2.7/ext\n/usr/bin/ruby2.5 -r ./siteconf20191007-7424-q18lo1.rb extconf.rb\nmkmf.rb can't find header files for ruby at /usr/lib/ruby/include/ruby.h\n\nextconf failed, exit code 1\n\nGem files will remain installed in /var/lib/gems/2.5.0/gems/eventmachine-1.2.7 for inspection.\nResults logged to /var/lib/gems/2.5.0/extensions/x86_64-linux/2.5.0/eventmachine-1.2.7/gem_make.out\n</code></pre>\n"}, {"tags": ["ruby", "jwt", "sinatra", "rack"], "comments": [{"owner": {"reputation": 1123, "user_id": 7964557, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-9W8nHaY7V4Y/AAAAAAAAAAI/AAAAAAAAAGA/aoLc6RbiiRc/photo.jpg?sz=128", "display_name": "Marcelo Fonseca", "link": "https://stackoverflow.com/users/7964557/marcelo-fonseca"}, "edited": false, "score": 0, "creation_date": 1600430272, "post_id": 58267058, "comment_id": 113093335, "body": "rescue JWT::ExpiredSignature must come before rescue JWT::DecodeError or expired tokens will be caught by JWT::DecodeError"}], "answers": [{"tags": [], "owner": {"reputation": 67, "user_id": 9024324, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d1b202b955629b508e5c16f1437de97c?s=128&d=identicon&r=PG&f=1", "display_name": "Johann Venter", "link": "https://stackoverflow.com/users/9024324/johann-venter"}, "is_accepted": true, "score": 0, "last_activity_date": 1570459492, "creation_date": 1570459492, "answer_id": 58271945, "question_id": 58267058, "link": "https://stackoverflow.com/questions/58267058/sinatra-cors-not-responding-with-200-when-using-middleware/58271945#58271945", "title": "sinatra-cors not responding with 200 when using middleware", "body": "<p>The issue was related to an error in my middleware (Error module was not included in the source, and the default configuration of Rack caused errors not to be displayed)</p>\n"}], "owner": {"reputation": 67, "user_id": 9024324, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d1b202b955629b508e5c16f1437de97c?s=128&d=identicon&r=PG&f=1", "display_name": "Johann Venter", "link": "https://stackoverflow.com/users/9024324/johann-venter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 0, "closed_date": 1570523468, "accepted_answer_id": 58271945, "answer_count": 1, "score": -1, "last_activity_date": 1595144807, "creation_date": 1570441497, "last_edit_date": 1595144807, "question_id": 58267058, "link": "https://stackoverflow.com/questions/58267058/sinatra-cors-not-responding-with-200-when-using-middleware", "closed_reason": "Not suitable for this site", "title": "sinatra-cors not responding with 200 when using middleware", "body": "<p>I am writing a little app for my own curiosity, and am having trouble with the sinatra-cors gem not responding with a 200. This causes Chrome to fail the options request (and subsequently not completing the things on the page). </p>\n\n<p>I have the following set in both a <code>Private</code> Controller, and a <code>Public</code> controller. The <code>Public</code> controller handles routes that require no authentication (such as login), and the <code>Private</code> controller handles routes that require authentication via JWT.</p>\n\n<p>In the <code>Public</code> controller, I have : </p>\n\n<pre><code>    enable :cross_origin\n  end\n\n  before do\n    response.headers['Access-Control-Allow-Origin'] = '*'\n  end\n\n  # routes...\n  options '*' do\n    response.headers['Allow'] = 'GET, PUT, POST, DELETE, OPTIONS'\n    response.headers['Access-Control-Allow-Headers'] = 'Authorization, X-Requested-With, X-HTTP-Method-Override, Content-Type, Cache-Control, Accept'\n    response.headers['Access-Control-Allow-Origin'] = '*'\n    200\n  end \n\n</code></pre>\n\n<p>The <code>paths</code> in the <code>Public</code> controller correctly return 200 for its options requests, since CORS is set to allow all domains.\nThe <code>paths</code> in the <code>Private</code> controller fail with a 500, even though the same cors config is specified in the controller.</p>\n\n<p>The difference, is that the <code>Private</code> controller, has a <code>use JwtAuth</code> statement at the start of the controller, which is the <code>middleware</code> that I have defined for using <code>JWT</code> tokens. When I remove this, the controllers pass the options request successfully. </p>\n\n<p>The <code>JWT middleware</code> is as follows : </p>\n\n<pre><code>\nrequire 'json'\nrequire 'jwt'\n\nclass JwtAuth\n  CONTENT_TYPE = { 'Content-Type' =&gt; 'text/plain' }.freeze\n\n  def initialize(app)\n    @app = app\n  end\n\n  # rubocop:disable Metrics/MethodLength\n  def call(env)\n    options = { algorithm: 'HS256', iss: 'Jade-Liberty-Backend' }\n    bearer = env.fetch('HTTP_AUTHORIZATION', '').slice(7..-1)\n    payload, _header = JWT.decode(bearer, 'thereisnospoon', true, options)\n\n    env[:scopes] = payload['scopes']\n    env[:user] = payload['user']\n\n    @app.call env\n  rescue JWT::DecodeError\n    [401, CONTENT_TYPE, [Errors::INVALID_TOKEN]]\n  rescue JWT::ExpiredSignature\n    [403, CONTENT_TYPE, [Errors::TOKEN_EXPIRED]]\n  rescue JWT::InvalidIssuerError\n    [403, CONTENT_TYPE, [Errors::INVALID_ISSUER]]\n  rescue JWT::InvalidIatError\n    [403, CONTENT_TYPE, [Errors::INVALID_ISSUED_AT]]\n  rescue e\n    [500, CONTENT_TYPE, [Errors::INTERNAL_SERVER_ERROR]]\n  end\n  # rubocop:enable Metrics/MethodLength\nend\n</code></pre>\n\n<p>I followed the following to create the middleware: <a href=\"https://auth0.com/blog/ruby-authentication-secure-rack-apps-with-jwt/\" rel=\"nofollow noreferrer\">https://auth0.com/blog/ruby-authentication-secure-rack-apps-with-jwt/</a></p>\n\n<p>I am unsure why adding the middleware causes the options request to fail.</p>\n"}, {"tags": ["ruby", "rspec", "rack"], "owner": {"reputation": 4616, "user_id": 284257, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/f4e37ffbbf81653b797ec4cf995a23b1?s=128&d=identicon&r=PG", "display_name": "Sig", "link": "https://stackoverflow.com/users/284257/sig"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 47, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1578958409, "creation_date": 1570440939, "last_edit_date": 1578958409, "question_id": 58266918, "link": "https://stackoverflow.com/questions/58266918/using-env-with-rack-test", "title": "Using env with rack_test", "body": "<p>In a Rails app, I have the following configuration to run <code>System</code> Rspec specs.</p>\n\n<pre><code>RSpec.configure do |config|\n  config.before(:each, type: :system) do\n    driven_by :rack_test\n  end\n\n  config.before(:each, type: :system, js: true) do\n    driven_by :selenium, using: :headless_chrome, screen_size: [1300, 1240]\n  end\nend\n</code></pre>\n\n<p>Now, I have added a middleware that depends upon <code>env['REQUEST_PATH']</code> and, when I run the specs using <code>rack_test</code> I get </p>\n\n<blockquote>\n  <p>Failure/Error: _, id, request_path = env['REQUEST_PATH'].split('/', 3)\n  NoMethodError: undefined method `split' for nil:NilClass</p>\n</blockquote>\n\n<p>However, if I always use <code>selenium</code>, all the specs pass like before.</p>\n\n<p>Is there a way to use/set <code>env['REQUEST_PATH']</code> with <code>rack_test</code>?</p>\n"}, {"tags": ["ruby", "db2", "sinatra"], "comments": [{"owner": {"reputation": 8474, "user_id": 8290634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d23c338d78a579b717f1cb6e9f16fb1b?s=128&d=identicon&r=PG&f=1", "display_name": "mao", "link": "https://stackoverflow.com/users/8290634/mao"}, "edited": false, "score": 0, "creation_date": 1570442718, "post_id": 58266863, "comment_id": 102902007, "body": "You have tagged Db2, but there&#39;s no information in your question regarding the SQL or the environment (operating systems, versions, bitness), or <i>where</i> the exception is happening (ruby, ibm_db, Db2-client etc).  Do  some debugging or most a minimal complete example."}, {"owner": {"reputation": 368, "user_id": 1906858, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/afd82cb1bb168bf70f10d0262f115737?s=128&d=identicon&r=PG", "display_name": "user_pruser", "link": "https://stackoverflow.com/users/1906858/user-pruser"}, "reply_to_user": {"reputation": 8474, "user_id": 8290634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d23c338d78a579b717f1cb6e9f16fb1b?s=128&d=identicon&r=PG&f=1", "display_name": "mao", "link": "https://stackoverflow.com/users/8290634/mao"}, "edited": false, "score": 0, "creation_date": 1570443283, "post_id": 58266863, "comment_id": 102902251, "body": "it is ibm_db, I wanted to add that as tag but there is no ibm_db tag on stack owerflow. I will and to the question, thanks for pointing out."}, {"owner": {"reputation": 8474, "user_id": 8290634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d23c338d78a579b717f1cb6e9f16fb1b?s=128&d=identicon&r=PG&f=1", "display_name": "mao", "link": "https://stackoverflow.com/users/8290634/mao"}, "edited": false, "score": 0, "creation_date": 1570444426, "post_id": 58266863, "comment_id": 102902842, "body": "You may be caught in a version-support trap with your ruby version and your ibm_db version. Bitness and Db2-client version, and Db2-server version+platform may be relevant, along with the actual SQL.  If you cannot debug or make an mcve for your question, maybe open an issue on github where the module is maintained:  <a href=\"https://github.com/ibmdb/ruby-ibmdb/issues\" rel=\"nofollow noreferrer\">github.com/ibmdb/ruby-ibmdb/issues</a> ."}], "owner": {"reputation": 368, "user_id": 1906858, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/afd82cb1bb168bf70f10d0262f115737?s=128&d=identicon&r=PG", "display_name": "user_pruser", "link": "https://stackoverflow.com/users/1906858/user-pruser"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 101, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1570443375, "creation_date": 1570440729, "last_edit_date": 1570443375, "question_id": 58266863, "link": "https://stackoverflow.com/questions/58266863/floating-point-exception-8-on-ruby-sinatra-with-ibm-db-gem", "title": "Floating point exception: 8 on ruby sinatra with ibm_db gem", "body": "<p>I am getting </p>\n\n<pre><code>Floating point exception: 8\n</code></pre>\n\n<p>with no further description, the program just fails</p>\n\n<p>when I run it as test from rspec, everything is fine, but when I run it as a method from route endpoint, it fails</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>post '/test' do\n  test_code\nend\n</code></pre>\n\n<p>is there any way to catch more meaning full error than that? How to do that?</p>\n\n<p>test code just do regular database connection and inserts data. As I stated, works ok when alone, but not from sinatra.</p>\n\n<p>I am calling endpoint from Postman.</p>\n\n<p>Did you encounter something similar? </p>\n\n<p>If you need more detail, please ask.</p>\n\n<p>Thank you for help.</p>\n\n<p>specs:\nruby 2.3.3, sinatra 2+,  ibm_db 3.0.5 with arel 8.0.0, os x 10.14.6</p>\n"}, {"tags": ["ruby", "gentoo", "diaspora"], "comments": [{"owner": {"reputation": 2142, "user_id": 614659, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/3bac45fa9b4da356a1daf06690208ee6?s=128&d=identicon&r=PG", "display_name": "Logemann", "link": "https://stackoverflow.com/users/614659/logemann"}, "edited": false, "score": 0, "creation_date": 1570440939, "post_id": 58266676, "comment_id": 102901189, "body": "thats a pain to read. Please use code formatting blocks for your error messages so that user can separate your text form the program output stuff."}, {"owner": {"reputation": 4157, "user_id": 2199687, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/025d3e869f59dba49fdf7cc4b4a1dd9b?s=128&d=identicon&r=PG", "display_name": "Jonne Ha&#223;", "link": "https://stackoverflow.com/users/2199687/jonne-ha%c3%9f"}, "edited": false, "score": 0, "creation_date": 1570480418, "post_id": 58266676, "comment_id": 102919960, "body": "To be honest you probably just got confused. The only way I can imagine it loading <code>development.rb</code> with  <code>RAILS_ENV=production</code>  is when spring is running and while the backtrace does not indicate it does, ensure so by running <code>bin&#47;spring stop</code> or even rebooting the box. Also that you went from a missing or borked bundler install to this error just by switching <code>RAILS_ENV</code> is more than unlikely, you probably did things not described here in between. Make sure to run in production mode again if this is aimed as a production install and describe your current state and setup better :)"}, {"owner": {"reputation": 11, "user_id": 12175574, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1eb7864512a053225b44a3cb2c306cd?s=128&d=identicon&r=PG&f=1", "display_name": "whosoever", "link": "https://stackoverflow.com/users/12175574/whosoever"}, "edited": false, "score": 0, "creation_date": 1570481759, "post_id": 58266676, "comment_id": 102920406, "body": "I explained what happens, if I execute it in production mode. It just prints out, that I shall read stderr. And the log file regarding stderr just says, that it can not load that what I said so above. I executed it later in development mode, because the output at production mode was not helpful for me. I am gonna try now what u propose!"}, {"owner": {"reputation": 11, "user_id": 12175574, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1eb7864512a053225b44a3cb2c306cd?s=128&d=identicon&r=PG&f=1", "display_name": "whosoever", "link": "https://stackoverflow.com/users/12175574/whosoever"}, "edited": false, "score": 0, "creation_date": 1570482780, "post_id": 58266676, "comment_id": 102920774, "body": "bin/spring stop tells me:  Could not find &#39;spring&#39;. Why havent it had installed spring from their Gemfile? I am a Ruby Deployment newbie."}, {"owner": {"reputation": 11, "user_id": 12175574, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1eb7864512a053225b44a3cb2c306cd?s=128&d=identicon&r=PG&f=1", "display_name": "whosoever", "link": "https://stackoverflow.com/users/12175574/whosoever"}, "edited": false, "score": 0, "creation_date": 1570483766, "post_id": 58266676, "comment_id": 102921106, "body": "It did not install spring, because it belongs to the development group in der Gemfile, but what I want is production mode."}], "owner": {"reputation": 11, "user_id": 12175574, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1eb7864512a053225b44a3cb2c306cd?s=128&d=identicon&r=PG&f=1", "display_name": "whosoever", "link": "https://stackoverflow.com/users/12175574/whosoever"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 40, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1570480108, "creation_date": 1570439997, "last_edit_date": 1570480108, "question_id": 58266676, "link": "https://stackoverflow.com/questions/58266676/diaspora-ruby-run-error-maybe-path-problem-uninitialized-constant-turbodeva", "title": "Diaspora (Ruby) run Error, Maybe PATH Problem? &quot;uninitialized constant TurboDevAssets (NameError)&quot;", "body": "<p>I try to migrate diaspora from a damaged debian 8 to another gentoo. I want to be able to can run diaspora before I deploy the web server. I crashes because of Ruby Errors, maybe kind of <code>PATH</code> errors.</p>\n\n<p>When I run diaspora with <code>script/server</code> in production mode it crashes because the thing behind web.pid crashes. In the log <code>eye_processes_stderr.log</code> is:</p>\n\n<pre><code>bin/bundle:3:in `load': cannot load such file -- /usr/lib/ruby/bin/bundle (LoadError) \n        from bin/bundle:3:in `&lt;main&gt;'\n</code></pre>\n\n<p>In development mode I can not execute correctly (I tried it to get better error message reporting):</p>\n\n<pre><code>RAILS_ENV=development bin/rake db:migrate RAILS_ENV=development\nbin/rake assets:precompile\n</code></pre>\n\n<p>because of the stdout and stderr of <code>script/server</code> I run: <code>bin/bundle exec unicorn -c config/unicorn.rb</code></p>\n\n<p>In production mode it returns:\nthat I shall look into stderr \nand in the log there is nothing helpful, in:\n<code>tail log/eye_processes_stderr.log</code>:</p>\n\n<pre><code>bin/bundle:3:in `load': cannot load such file -- /usr/lib/ruby/bin/bundle (LoadError)\n         from bin/bundle:3:in `&lt;main&gt;' bin/bundle:3:in `load': cannot load such file -- /usr/lib/ruby/bin/bundle (LoadError)\n         from bin/bundle:3:in `&lt;main&gt;'\n</code></pre>\n\n<p>But in development mode it returns:</p>\n\n<pre><code>I, [2019-10-07T11:14:20.840060 #20262]  INFO -- : Refreshing Gem list\n/home/diaspora/diaspora-2017-07-07-newest/config/environments/development.rb:64:in `block in &lt;top (required)&gt;': uninitialized constant TurboDevAssets (NameError)\n         from /home/diaspora/diaspora-2017-07-07-newest/vendor/bundle/ruby/2.4.0/gems/railties-5.1.6.2/lib/rails/railtie.rb:211:in `instance_eval'\n         from /home/diaspora/diaspora-2017-07-07-newest/vendor/bundle/ruby/2.4.0/gems/railties-5.1.6.2/lib/rails/railtie.rb:211:in `configure'\n        from /home/diaspora/diaspora-2017-07-07-newest/config/environments/development.rb:3:in `&lt;top (required)&gt;'\n        from /home/diaspora/diaspora-2017-07-07-newest/vendor/bundle/ruby/2.4.0/gems/railties-5.1.6.2/lib/rails/engine.rb:600:in `block (2 levels) in &lt;class:Engine&gt;'\n        from /home/diaspora/diaspora-2017-07-07-newest/vendor/bundle/ruby/2.4.0/gems/railties-5.1.6.2/lib/rails/engine.rb:599:in `each'\n        from /home/diaspora/diaspora-2017-07-07-newest/vendor/bundle/ruby/2.4.0/gems/railties-5.1.6.2/lib/rails/engine.rb:599:in `block in &lt;class:Engine&gt;'\n        from /home/diaspora/diaspora-2017-07-07-newest/vendor/bundle/ruby/2.4.0/gems/railties-5.1.6.2/lib/rails/initializable.rb:30:in `instance_exec'\n        from /home/diaspora/diaspora-2017-07-07-newest/vendor/bundle/ruby/2.4.0/gems/railties-5.1.6.2/lib/rails/initializable.rb:30:in `run'\n        from /home/diaspora/diaspora-2017-07-07-newest/vendor/bundle/ruby/2.4.0/gems/railties-5.1.6.2/lib/rails/initializable.rb:59:in `block in run_initializers'\n        from /usr/lib/ruby/2.4.0/tsort.rb:228:in `block in tsort_each'\n        from /usr/lib/ruby/2.4.0/tsort.rb:350:in `block (2 levels) in each_strongly_connected_component'\n        from /usr/lib/ruby/2.4.0/tsort.rb:422:in `block (2 levels) in each_strongly_connected_component_from'\n        from /usr/lib/ruby/2.4.0/tsort.rb:431:in `each_strongly_connected_component_from'\n        from /usr/lib/ruby/2.4.0/tsort.rb:421:in `block in each_strongly_connected_component_from'\n        from /home/diaspora/diaspora-2017-07-07-newest/vendor/bundle/ruby/2.4.0/gems/railties-5.1.6.2/lib/rails/initializable.rb:48:in `each'\n        from /home/diaspora/diaspora-2017-07-07-newest/vendor/bundle/ruby/2.4.0/gems/railties-5.1.6.2/lib/rails/initializable.rb:48:in `tsort_each_child'\n        from /usr/lib/ruby/2.4.0/tsort.rb:415:in `call'\n        from /usr/lib/ruby/2.4.0/tsort.rb:415:in `each_strongly_connected_component_from'\n        from /usr/lib/ruby/2.4.0/tsort.rb:349:in `block in each_strongly_connected_component'\n        from /usr/lib/ruby/2.4.0/tsort.rb:347:in `each'\n        from /usr/lib/ruby/2.4.0/tsort.rb:347:in `call'\n        from /usr/lib/ruby/2.4.0/tsort.rb:347:in `each_strongly_connected_component'\n        from /usr/lib/ruby/2.4.0/tsort.rb:226:in `tsort_each'\n        from /usr/lib/ruby/2.4.0/tsort.rb:205:in `tsort_each'\n        from /home/diaspora/diaspora-2017-07-07-newest/vendor/bundle/ruby/2.4.0/gems/railties-5.1.6.2/lib/rails/initializable.rb:58:in `run_initializers'\n        from /home/diaspora/diaspora-2017-07-07-newest/vendor/bundle/ruby/2.4.0/gems/railties-5.1.6.2/lib/rails/application.rb:353:in `initialize!'\n        from /home/diaspora/diaspora-2017-07-07-newest/config/environment.rb:7:in `&lt;top (required)&gt;'\n        from config.ru:10:in `require'\n        from config.ru:10:in `block in &lt;main&gt;'\n        from /home/diaspora/diaspora-2017-07-07-newest/vendor/bundle/ruby/2.4.0/gems/rack-2.0.6/lib/rack/builder.rb:55:in `instance_eval'\n        from /home/diaspora/diaspora-2017-07-07-newest/vendor/bundle/ruby/2.4.0/gems/rack-2.0.6/lib/rack/builder.rb:55:in `initialize'\n        from config.ru:1:in `new'\n        from config.ru:1:in `&lt;main&gt;'\n        from /home/diaspora/diaspora-2017-07-07-newest/vendor/bundle/ruby/2.4.0/gems/unicorn-5.5.0/lib/unicorn.rb:54:in `eval'\n        from /home/diaspora/diaspora-2017-07-07-newest/vendor/bundle/ruby/2.4.0/gems/unicorn-5.5.0/lib/unicorn.rb:54:in `block in builder'\n        from /home/diaspora/diaspora-2017-07-07-newest/vendor/bundle/ruby/2.4.0/gems/unicorn-5.5.0/lib/unicorn/http_server.rb:794:in `build_app!'\n        from /home/diaspora/diaspora-2017-07-07-newest/vendor/bundle/ruby/2.4.0/gems/unicorn-5.5.0/lib/unicorn/http_server.rb:141:in `start'\n        from /home/diaspora/diaspora-2017-07-07-newest/vendor/bundle/ruby/2.4.0/gems/unicorn-5.5.0/bin/unicorn:128:in `&lt;top (required)&gt;'\n        from /home/diaspora/diaspora-2017-07-07-newest/vendor/bundle/ruby/2.4.0/bin/unicorn:23:in `load'\n        from /home/diaspora/diaspora-2017-07-07-newest/vendor/bundle/ruby/2.4.0/bin/unicorn:23:in `&lt;main&gt;'\n</code></pre>\n\n<p>and now it returns that also in production mode, after I executed it in development mode.</p>\n\n<p>line 64 in \n<code>/home/diaspora/diaspora-2017-07-07-newest/config/environments/development.rb</code>\n is:</p>\n\n<pre><code>  # Speed up asset serving\n  config.middleware.insert 0, TurboDevAssets\n</code></pre>\n\n<p>It shall run as it did with every working diaspora as it has worked on debian 8 when I used rvm in the home directory. (as I also tried that on the Gentoo machine)</p>\n"}, {"tags": ["ruby", "amazon-s3", "fog"], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 7488020, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-hFiz_2KygAk/AAAAAAAAAAI/AAAAAAAADEA/WRu_MZw7t_U/photo.jpg?sz=128", "display_name": "rohitrtg", "link": "https://stackoverflow.com/users/7488020/rohitrtg"}, "edited": false, "score": 0, "creation_date": 1570871712, "post_id": 58288485, "comment_id": 103059172, "body": "Thanks for the help! Just instead of {file.key}, I used {file.key.split(&quot;/&quot;)[-1]} to correctly copy the exact file name."}, {"owner": {"reputation": 2337, "user_id": 967276, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/391f7ae8dd8c10dc323b7fbfe55b71a2?s=128&d=identicon&r=PG", "display_name": "geemus", "link": "https://stackoverflow.com/users/967276/geemus"}, "reply_to_user": {"reputation": 3, "user_id": 7488020, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-hFiz_2KygAk/AAAAAAAAAAI/AAAAAAAADEA/WRu_MZw7t_U/photo.jpg?sz=128", "display_name": "rohitrtg", "link": "https://stackoverflow.com/users/7488020/rohitrtg"}, "edited": false, "score": 0, "creation_date": 1571011826, "post_id": 58288485, "comment_id": 103087641, "body": "Oh yeah, that makes total sense. Glad that helped. I&#39;ll update my answer to reflect this in case anyone else comes across this."}], "tags": [], "owner": {"reputation": 2337, "user_id": 967276, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/391f7ae8dd8c10dc323b7fbfe55b71a2?s=128&d=identicon&r=PG", "display_name": "geemus", "link": "https://stackoverflow.com/users/967276/geemus"}, "is_accepted": true, "score": 0, "last_activity_date": 1571011876, "last_edit_date": 1571011876, "creation_date": 1570545098, "answer_id": 58288485, "question_id": 58266529, "link": "https://stackoverflow.com/questions/58266529/how-to-copy-all-files-in-a-folder-on-s3-using-fog-in-ruby/58288485#58288485", "title": "How to copy all files in a folder on s3 using Fog in Ruby", "body": "<p>I don't think there is a direct way to do that per se, and that instead you would need to iterate over the appropriate files to do the move. I think it would look something like this:</p>\n\n<pre><code>require 'rubygems'\nrequire 'fog'\n\n# create a connection\nconnection = Fog::Storage.new({\n  provider:             'AWS',\n  aws_access_key_id:     YOUR_AWS_ACCESS_KEY_ID,\n  aws_secret_access_key: YOUR_AWS_SECRET_ACCESS_KEY\n})\n\ndirectory = connection.directories.get(BUCKET, prefix: '/foo/')\n\ndirectory.files.each do |file|\n  file.copy(BUCKET, \"/bar/#{file.key.split('/').last}\")\nend\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 7488020, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-hFiz_2KygAk/AAAAAAAAAAI/AAAAAAAADEA/WRu_MZw7t_U/photo.jpg?sz=128", "display_name": "rohitrtg", "link": "https://stackoverflow.com/users/7488020/rohitrtg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 279, "favorite_count": 0, "accepted_answer_id": 58288485, "answer_count": 1, "score": 0, "last_activity_date": 1571011876, "creation_date": 1570439415, "question_id": 58266529, "link": "https://stackoverflow.com/questions/58266529/how-to-copy-all-files-in-a-folder-on-s3-using-fog-in-ruby", "title": "How to copy all files in a folder on s3 using Fog in Ruby", "body": "<p>How do I copy all the files present in an s3 directory(same prefix) to another directory in the same bucket using fog? </p>\n\n<p>For eg: Copy all files with prefix <code>&lt;bucket&gt;/foo/</code> to <code>&lt;bucket&gt;/bar/</code></p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 375, "user_id": 3966282, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f69b65949432095fc05ee93edf2d6efb?s=128&d=identicon&r=PG&f=1", "display_name": "Ryan Tran", "link": "https://stackoverflow.com/users/3966282/ryan-tran"}, "edited": false, "score": 0, "creation_date": 1570615381, "post_id": 58265678, "comment_id": 102965864, "body": "Thanks Sebastian Palma !"}], "tags": [], "owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "is_accepted": true, "score": 1, "last_activity_date": 1570436726, "last_edit_date": 1570436726, "creation_date": 1570435875, "answer_id": 58265678, "question_id": 58265160, "link": "https://stackoverflow.com/questions/58265160/how-to-just-fill-time-into-text-field-in-edit-form/58265678#58265678", "title": "How to just fill time into text field in edit form?", "body": "<p>In case you want to use <code>strftime</code>, use just \"%I:%M\":</p>\n\n<pre><code>@post.time_from.strftime(\"%I:%M\")\n</code></pre>\n\n<p>Or you can also use <code>to_s</code> plus <code>:time</code>:</p>\n\n<pre><code>@post.time_from.to_s(:time)\n</code></pre>\n\n<hr>\n\n<p>Date, DateTime and Time <code>to_s</code> methods are aliases for <a href=\"https://api.rubyonrails.org/classes/Time.html#method-i-to_formatted_s\" rel=\"nofollow noreferrer\"><code>to_formatted_s</code></a>.</p>\n"}], "owner": {"reputation": 375, "user_id": 3966282, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f69b65949432095fc05ee93edf2d6efb?s=128&d=identicon&r=PG&f=1", "display_name": "Ryan Tran", "link": "https://stackoverflow.com/users/3966282/ryan-tran"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 27, "favorite_count": 0, "accepted_answer_id": 58265678, "answer_count": 1, "score": 1, "last_activity_date": 1570615621, "creation_date": 1570433366, "last_edit_date": 1570615621, "question_id": 58265160, "link": "https://stackoverflow.com/questions/58265160/how-to-just-fill-time-into-text-field-in-edit-form", "title": "How to just fill time into text field in edit form?", "body": "<p>In migrate : </p>\n\n<pre><code>t.time :time_from\n</code></pre>\n\n<p>=> in postgress, time_from column is type: <strong><em>time without time zone</em></strong></p>\n\n<p>When i add new data:\n=> time_from = <strong><em>08:00:00</em></strong></p>\n\n<p>When i get in edit :</p>\n\n<pre><code>@post = Post.find([params[:id]])\n</code></pre>\n\n<p>In form:</p>\n\n<p><a href=\"https://i.stack.imgur.com/uQxKV.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/uQxKV.png\" alt=\"enter image description here\"></a></p>\n\n<p>But i just want to show time => 08:00\nI tried like this, but it does not working.</p>\n\n<pre><code>@post = Post.find([params[:id]])\n@post.time_from = Time.parse(@post.time_from.strftime(\"%I:%M%p\"))\n</code></pre>\n\n<p>How can i do that ? </p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1570461698, "post_id": 58264378, "comment_id": 102911835, "body": "Good question, but \u201c...\u201dfields <code>&#39;a&#39;</code> and <code>&#39;c&#39;</code>\u201d should be \u201cfields <code>:a</code> and <code>:c</code>\u201d. It would be better to assign a variable to an array of those keys (e.g., <code>target = [:a, :b]</code>), so that readers could refer to that variable in answers and comments without having to define it ( just as they can refer to <code>test</code>)."}], "answers": [{"comments": [{"owner": {"reputation": 2029, "user_id": 6703569, "user_type": "registered", "accept_rate": 74, "profile_image": "https://lh4.googleusercontent.com/-SEU_x8PjYg4/AAAAAAAAAAI/AAAAAAAAAA8/9Ht4S0ndBuI/photo.jpg?sz=128", "display_name": "Bhawan", "link": "https://stackoverflow.com/users/6703569/bhawan"}, "edited": false, "score": 0, "creation_date": 1570431328, "post_id": 58264514, "comment_id": 102897216, "body": "It is working perfect. Can you please explain it a little bit?"}, {"owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "reply_to_user": {"reputation": 2029, "user_id": 6703569, "user_type": "registered", "accept_rate": 74, "profile_image": "https://lh4.googleusercontent.com/-SEU_x8PjYg4/AAAAAAAAAAI/AAAAAAAAAA8/9Ht4S0ndBuI/photo.jpg?sz=128", "display_name": "Bhawan", "link": "https://stackoverflow.com/users/6703569/bhawan"}, "edited": false, "score": 0, "creation_date": 1570431662, "post_id": 58264514, "comment_id": 102897323, "body": "first check how map works to provide data in array, so then test this -&gt; <code>test.map { |e| e[:a] }</code> which will provide you <code>[1, 4]</code> so for <code>:c</code> so I have iterated this code on one more map iterated on [:a, :c] array which provided array of array."}, {"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1570445312, "post_id": 58264514, "comment_id": 102903245, "body": "@ray, sorry, I didn&#39;t see the big difference between <code>[[1, 4], [3, 6]]</code> and <code>[[1, 3], [4, 6]]</code>."}, {"owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "reply_to_user": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1570446226, "post_id": 58264514, "comment_id": 102903670, "body": "@SebastianPalma I guess, me too"}, {"owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "edited": false, "score": 0, "creation_date": 1570449442, "post_id": 58264514, "comment_id": 102905221, "body": "<code>test.map { |e| e[x] }</code> could be <code>test.pluck(x)</code>"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "edited": false, "score": 1, "creation_date": 1570460865, "post_id": 58264514, "comment_id": 102911420, "body": "My initial reaction was that this was relatively inefficient, but since hash lookups are very fast and have a computational complexity close to <code>O(1)</code>, if <code>n</code>is the number of keys of interest (<code>2</code> in the example), your solution has a computational complexity <i>close to</i> the minimum possible of <code>O(n*test.size)</code>. Moreover, your solution reads well, but would read better, and be slightly more efficient, if you were to adopt @3limin4t0r\u2018s suggestion. Good answer."}, {"owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1570601908, "post_id": 58264514, "comment_id": 102958877, "body": "@CarySwoveland helped as I did not think about <i>computational complexity</i> initially."}], "tags": [], "owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "is_accepted": true, "score": 7, "last_activity_date": 1570430299, "creation_date": 1570430299, "answer_id": 58264514, "question_id": 58264378, "link": "https://stackoverflow.com/questions/58264378/create-list-of-lists-from-list-of-json-objects-ruby/58264514#58264514", "title": "Create list of lists from list of json objects ruby", "body": "<p>You were looking for following,</p>\n\n<pre><code>%i(a c).map { |x| test.map { |e| e[x] } }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1570458969, "post_id": 58268943, "comment_id": 102910435, "body": "...the pure Ruby equivalent being <code>test.map { |h| h.values_at(:a, :c) }.transpose</code>. Good answer."}, {"owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1570459447, "post_id": 58268943, "comment_id": 102910676, "body": "@CarySwoveland Yep, but OP already uses <code>pluck</code> and tagged the question with <a href=\"https://stackoverflow.com/questions/tagged/ruby-on-rails\">ruby-on-rails</a>, so I went with <code>pluck</code> since it&#39;s a lot shorter. But providing a pure Ruby equivalent doesn&#39;t hurt, and is useful for readers who don&#39;t use Rails."}], "tags": [], "owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "is_accepted": false, "score": 4, "last_activity_date": 1570449379, "last_edit_date": 1570449379, "creation_date": 1570448776, "answer_id": 58268943, "question_id": 58264378, "link": "https://stackoverflow.com/questions/58264378/create-list-of-lists-from-list-of-json-objects-ruby/58268943#58268943", "title": "Create list of lists from list of json objects ruby", "body": "<p>You could use <a href=\"https://ruby-doc.org/core-2.6.5/Array.html#method-i-transpose\" rel=\"nofollow noreferrer\"><code>Array#transpose</code></a> on the <code>pluck</code> result. Which assumes the array represents rows or columns and swaps the representation around.</p>\n\n<pre><code>test.pluck(:a, :c).transpose\n#=&gt; [[1, 4], [3, 6]]\n</code></pre>\n"}], "owner": {"reputation": 2029, "user_id": 6703569, "user_type": "registered", "accept_rate": 74, "profile_image": "https://lh4.googleusercontent.com/-SEU_x8PjYg4/AAAAAAAAAAI/AAAAAAAAAA8/9Ht4S0ndBuI/photo.jpg?sz=128", "display_name": "Bhawan", "link": "https://stackoverflow.com/users/6703569/bhawan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 462, "favorite_count": 0, "accepted_answer_id": 58264514, "answer_count": 2, "score": 4, "last_activity_date": 1570449379, "creation_date": 1570429377, "last_edit_date": 1570429827, "question_id": 58264378, "link": "https://stackoverflow.com/questions/58264378/create-list-of-lists-from-list-of-json-objects-ruby", "title": "Create list of lists from list of json objects ruby", "body": "<p>I have a list of json objects something like this:</p>\n\n<pre><code>test = [{\"a\": 1, \"b\": 2, \"c\": 3}, {\"a\": 4, \"b\": 5, \"c\":6}]\n</code></pre>\n\n<p>I want to fetch the fields <code>'a'</code> and <code>'c'</code> from the above test list to create a list of list something like this:</p>\n\n<pre><code>[[1, 4], [3, 6]]\n</code></pre>\n\n<p>The idea is to make a list of all the values of a, then the values of c. </p>\n\n<p>When I am using pluck:</p>\n\n<pre><code>test.pluck(:a, :c)\n</code></pre>\n\n<p>I am getting output like this:</p>\n\n<pre><code>[[1, 3], [4, 6]]\n</code></pre>\n\n<p>One approach I tried which is working fine.</p>\n\n<pre><code>res = []\nres &lt;&lt; test.pluck(:a)\nres &lt;&lt; test.pluck(:c)\n</code></pre>\n\n<p>But I am thinking it would be better if I get one or two liner solution,\n<br> with or without <code>inbuilt function</code> because the number of fields in the future may increase.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "edited": false, "score": 3, "creation_date": 1570427062, "post_id": 58263951, "comment_id": 102895964, "body": "Where did you get this <code>sort_method</code> from? There&#39;s no such method in Ruby as well as in Rails, as far as I know."}, {"owner": {"reputation": 1285, "user_id": 10443890, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de817ef35c4a2bdd0501efbdc6d9a338?s=128&d=identicon&r=PG&f=1", "display_name": "mr_muscle", "link": "https://stackoverflow.com/users/10443890/mr-muscle"}, "reply_to_user": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "edited": false, "score": 0, "creation_date": 1570428716, "post_id": 58263951, "comment_id": 102896405, "body": "@MarekLipka I think it is from some gem but I don&#39;t know tbh. Is there any other method to sort that hash?"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 2, "creation_date": 1570439537, "post_id": 58263951, "comment_id": 102900452, "body": "@mr_muscle The error is that no such method exists. And indeed, no such method <i>does</i> exist in ruby. So if you&#39;re unable to say where you expect this method to be defined, then the answer to your question is: <i>The method does not exist</i>."}, {"owner": {"reputation": 1285, "user_id": 10443890, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de817ef35c4a2bdd0501efbdc6d9a338?s=128&d=identicon&r=PG&f=1", "display_name": "mr_muscle", "link": "https://stackoverflow.com/users/10443890/mr-muscle"}, "reply_to_user": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1570440265, "post_id": 58263951, "comment_id": 102900838, "body": "@TomLord Ok so instead of <code>sort_method</code> what should I do to get this hash sorted by e.g. <code>name</code> or <code>total_campaign_codes_amount</code> or id ? this is used in an admin panel where admin have to have ability to sort things by these parameters."}, {"owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "edited": false, "score": 0, "creation_date": 1570440768, "post_id": 58263951, "comment_id": 102901083, "body": "Need to define <code>sort_method</code> to sort data."}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 4, "creation_date": 1570441459, "post_id": 58263951, "comment_id": 102901430, "body": "@mr_muscle What do you expect the result to be? What other arguments do you want to pass into this method (e.g. Do you also want to sort by <code>&#39;attributes.interest_name&#39; =&gt; &#39;desc&#39;</code>)? And also, <code>id</code> is a <code>String</code> -- so unless you also want to perform some implicit conversion conversion to <code>Integer</code>, you&#39;ll get weird results in the ordering for IDs <code>9, 10, 11</code> for example - have you considered this?"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 3, "creation_date": 1570441549, "post_id": 58263951, "comment_id": 102901478, "body": "As it currently stands, you haven&#39;t stated what you want the code to do, and it fails for the simple reason that the called method does not exist. Unless you clarify the requirements significantly, I must unfortunately vote to close the question as it&#39;s very unclear what you are asking."}], "owner": {"reputation": 1285, "user_id": 10443890, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de817ef35c4a2bdd0501efbdc6d9a338?s=128&d=identicon&r=PG&f=1", "display_name": "mr_muscle", "link": "https://stackoverflow.com/users/10443890/mr-muscle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 74, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1570436419, "creation_date": 1570426357, "last_edit_date": 1570435620, "question_id": 58263951, "link": "https://stackoverflow.com/questions/58263951/sorting-of-hash-by-specific-params-undefined-method-sort-method-for-hash", "title": "Sorting of hash by specific params - undefined method `sort_method&#39; for Hash", "body": "<p>I've got a hash <code>collection</code> which I want to sort by <code>declared_params[:sort]</code>. So I wrote something like that</p>\n\n<p><code>collection.sort_method(declared_params[:sort])</code></p>\n\n<p>but I've got an error</p>\n\n<blockquote>\n  <p>undefined method `sort_method for #Hash:0x00007ffaafcab140></p>\n</blockquote>\n\n<p>The hash <code>collection</code> which I want to sort looks like:</p>\n\n<pre><code>{\n  data: [{\n    id: \"1\",\n    type: :credit_campaign,\n    attributes: {\n      name: \"Credit Campaign #1\",\n      interest_rate: 12,\n      start_date: \"Fri, 04 Oct 2019\",\n      end_date: \"Mon, 04 Nov 2019\",\n      total_campaign_codes_amount: 15,\n      used_campaign_codes_amount: 0\n    }\n  }]\n}\n</code></pre>\n\n<p>declared_params: <code>{ \"page\" =&gt; 1, \"per_page\" =&gt; 10, \"sort\" =&gt; { \"id\" =&gt; \"desc\" } }</code></p>\n"}, {"tags": ["ruby", "file"], "comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1570424301, "post_id": 58262969, "comment_id": 102895378, "body": "Do you mean something like the use of an <a href=\"https://blog.newrelic.com/engineering/weird-ruby-2-rescue-interrupt-ensure/\" rel=\"nofollow noreferrer\">ensure clause</a>, such as <code>def m; f = File.open(fname, mode);...; x = meth1(f); ..., y = meth2(f);...; begin; ensure; f.close; unlink(fname), end; end</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1570472265, "post_id": 58265306, "comment_id": 102916656, "body": "It&#39;s always best to close a file before--not after--deleting it."}, {"owner": {"reputation": 1892, "user_id": 3158810, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/1ebf9e065f654642fecfee399b439030?s=128&d=identicon&r=PG&f=1", "display_name": "G4143", "link": "https://stackoverflow.com/users/3158810/g4143"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1570473804, "post_id": 58265306, "comment_id": 102917332, "body": "I guess I could return nil at the end of that sequence(handle.close;File.unlink(fname); nil)"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1570473906, "post_id": 58265306, "comment_id": 102917374, "body": "Check the sequence in your answer. My previous comment was made <a href=\"https://dictionary.cambridge.org/dictionary/english/tongue-in-cheek\" rel=\"nofollow noreferrer\">tongue in cheek</a>."}], "tags": [], "owner": {"reputation": 1892, "user_id": 3158810, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/1ebf9e065f654642fecfee399b439030?s=128&d=identicon&r=PG&f=1", "display_name": "G4143", "link": "https://stackoverflow.com/users/3158810/g4143"}, "is_accepted": false, "score": 0, "last_activity_date": 1570434800, "last_edit_date": 1570434800, "creation_date": 1570434042, "answer_id": 58265306, "question_id": 58262969, "link": "https://stackoverflow.com/questions/58262969/read-once-file-handle/58265306#58265306", "title": "Read once file handle", "body": "<p>Does it have to return a file handle type or can it be something that works on a file handle? If its the latter then you could use a closure and a lambda. Something like below:</p>\n\n<pre><code>def sp_handle(fname)\n  handle = File.open(fname)\n\n  -&gt;(){\n    line = handle.gets\n    line ? line : (File.unlink(fname); handle.close)\n  }\n\nend\n</code></pre>\n"}], "owner": {"reputation": 557, "user_id": 5527374, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/OQmV2.png?s=128&g=1", "display_name": "tscheingeld", "link": "https://stackoverflow.com/users/5527374/tscheingeld"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 37, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1570434800, "creation_date": 1570416811, "question_id": 58262969, "link": "https://stackoverflow.com/questions/58262969/read-once-file-handle", "title": "Read once file handle", "body": "<p>I have a situation where I'd like to return a file handle from a routine. When the last byte of that file handle is read, the file being read is deleted. This will be a simple way to create a temporary file that is deleted once it's been read.</p>\n\n<p><a href=\"https://ruby-doc.org/stdlib-2.4.0/libdoc/tempfile/rdoc/Tempfile.html\" rel=\"nofollow noreferrer\">Tempfile</a> doesn't really work for this purpose. To use Tempfile I would have to create the Tempfile, read and write in the entire contents of the source file to the Tempfile, rewind the Tempfile, then return the Tempfile object. Very wasteful. I just want to open a file and return a file handle, but one which deletes the file when the last byte is read.</p>\n\n<p>I could probably write this class myself, but I'd rather use an existing solution if it exists.</p>\n"}, {"tags": ["ruby", "macos", "sass", "rubygems", "macos-catalina"], "answers": [{"comments": [{"owner": {"reputation": 588, "user_id": 825945, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/b9c0d96042280a43ebe11bec24acd80f?s=128&d=identicon&r=PG", "display_name": "alpsystems.com", "link": "https://stackoverflow.com/users/825945/alpsystems-com"}, "edited": false, "score": 1, "creation_date": 1573470717, "post_id": 58262740, "comment_id": 103880686, "body": "In addition to the above, I also installed the latest version of XCode and restarted.  I am not sure which steps are required but together, Sass is now finally back to working.  Thanks Delowar!"}, {"owner": {"reputation": 412, "user_id": 1627681, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PIvxs.png?s=128&g=1", "display_name": "Tusko Trush", "link": "https://stackoverflow.com/users/1627681/tusko-trush"}, "edited": false, "score": 0, "creation_date": 1580908383, "post_id": 58262740, "comment_id": 106251725, "body": "It fixed my problem too. Thank you"}], "tags": [], "owner": {"reputation": 1682, "user_id": 6544266, "user_type": "registered", "accept_rate": 88, "profile_image": "https://lh6.googleusercontent.com/-80Bs6ytjduI/AAAAAAAAAAI/AAAAAAAAAC4/W2JWZXH9Z0c/photo.jpg?sz=128", "display_name": "Delowar Hosain", "link": "https://stackoverflow.com/users/6544266/delowar-hosain"}, "is_accepted": true, "score": 13, "last_activity_date": 1570414207, "creation_date": 1570414207, "answer_id": 58262740, "question_id": 58262697, "link": "https://stackoverflow.com/questions/58262697/sass-is-not-working-cant-install-ruby-sass-on-macos-catalina/58262740#58262740", "title": "Sass is not working &amp; Can&#39;t install ruby-sass on macOS Catalina", "body": "<p><strong>Problem solved, here's the solution</strong></p>\n\n<p>Open terminal &amp; run these code</p>\n\n<ul>\n<li>Step 1: <code>brew update</code></li>\n<li>Step 2: <code>xcode-select --install</code></li>\n<li>Step 3: <code>sudo gem install -n /usr/local/bin sass</code></li>\n</ul>\n\n<p>Now check your sass version: <code>sass -v</code></p>\n"}, {"comments": [{"owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 0, "creation_date": 1572960220, "post_id": 58316584, "comment_id": 103717948, "body": "This assumes user is running ZSH as their default shell."}, {"owner": {"reputation": 1258, "user_id": 2544348, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/efe3a480714276555ae45c09994c6427?s=128&d=identicon&r=PG", "display_name": "Marnix Harderwijk", "link": "https://stackoverflow.com/users/2544348/marnix-harderwijk"}, "reply_to_user": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 4, "creation_date": 1572963896, "post_id": 58316584, "comment_id": 103720006, "body": "Didn&#39;t Catalina drop bash for ZSH?"}, {"owner": {"reputation": 2366, "user_id": 1746685, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/950a763dd208f8e9019dee20fa4cdb25?s=128&d=identicon&r=PG", "display_name": "observer", "link": "https://stackoverflow.com/users/1746685/observer"}, "edited": false, "score": 0, "creation_date": 1581350199, "post_id": 58316584, "comment_id": 106393806, "body": "<i>zsh (Z shell) is the default shell <b>for all newly created user accounts</b>, starting with macOS Catalina.</i>  Quoted from: <a href=\"https://support.apple.com/en-us/HT208050\" rel=\"nofollow noreferrer\">support.apple.com/en-us/HT208050</a> (emphasis mine)"}, {"owner": {"reputation": 2366, "user_id": 1746685, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/950a763dd208f8e9019dee20fa4cdb25?s=128&d=identicon&r=PG", "display_name": "observer", "link": "https://stackoverflow.com/users/1746685/observer"}, "edited": false, "score": 0, "creation_date": 1581354564, "post_id": 58316584, "comment_id": 106396129, "body": "I found this info: <i><b>Ruby Sass was the original implementation of Sass, but it reached its end of life as of 26 March 2019.</b> It&#39;s no longer supported, and Ruby Sass users should migrate to another implementation.</i>  (from <a href=\"https://sass-lang.com/ruby-sass\" rel=\"nofollow noreferrer\">sass-lang.com/ruby-sass</a>, emphasis mine). Sounds like people should get Sass running without Ruby in future, right?"}], "tags": [], "owner": {"reputation": 1258, "user_id": 2544348, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/efe3a480714276555ae45c09994c6427?s=128&d=identicon&r=PG", "display_name": "Marnix Harderwijk", "link": "https://stackoverflow.com/users/2544348/marnix-harderwijk"}, "is_accepted": false, "score": 6, "last_activity_date": 1572963820, "last_edit_date": 1572963820, "creation_date": 1570688341, "answer_id": 58316584, "question_id": 58262697, "link": "https://stackoverflow.com/questions/58262697/sass-is-not-working-cant-install-ruby-sass-on-macos-catalina/58316584#58316584", "title": "Sass is not working &amp; Can&#39;t install ruby-sass on macOS Catalina", "body": "<p>Let me start by pressing people not to install gems with <code>sudo</code>. Since Catalina, user permissions changed for core/system files, which perfectly makes sense. This way no program can change the core files and they are save and secure.</p>\n\n<p>Now the correct way to solve this issue is to install an additional Ruby build in your <code>home</code> folder which can be altered and tempered with.</p>\n\n<ol>\n<li><code>brew update &amp;&amp; brew install rbenv ruby-build</code></li>\n<li><code>xcode-select --install</code></li>\n<li><code>vim ~/.zshenv</code></li>\n<li>add the following to the opened file <code>export PATH=\"$HOME/.rbenv/bin:$PATH\"</code></li>\n<li><code>vim ~/.zshrc</code></li>\n<li>add the following to the opened file:</li>\n</ol>\n\n<pre><code>source $HOME/.zshenv\neval \"$(rbenv init - zsh)\"\n</code></pre>\n\n<ol start=\"7\">\n<li><code>source ~/.zshrc</code></li>\n<li><code>rbenv install 2.6.4</code> or any version you feel comfortable with</li>\n<li><code>rbenv global 2.6.4</code></li>\n<li><code>ruby -v</code> check current running ruby version</li>\n<li><code>ruby -e \"puts (1..100).reduce(:+)\"</code> outputs <code>5050</code></li>\n<li>Now install any gem you want <code>gem install sass</code></li>\n</ol>\n"}, {"comments": [{"owner": {"reputation": 2366, "user_id": 1746685, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/950a763dd208f8e9019dee20fa4cdb25?s=128&d=identicon&r=PG", "display_name": "observer", "link": "https://stackoverflow.com/users/1746685/observer"}, "edited": false, "score": 0, "creation_date": 1581353513, "post_id": 58332301, "comment_id": 106395624, "body": "For occasional users of Sass, like me: <i>Dart Sass is the primary implementation of Sass [...]. It compiles to pure JavaScript</i> (see <a href=\"https://sass-lang.com/dart-sass\" rel=\"nofollow noreferrer\">sass-lang.com/dart-sass</a>)"}], "tags": [], "owner": {"reputation": 1065, "user_id": 1742945, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/s4vz3.jpg?s=128&g=1", "display_name": "SteppingHat", "link": "https://stackoverflow.com/users/1742945/steppinghat"}, "is_accepted": false, "score": 2, "last_activity_date": 1581381051, "last_edit_date": 1592644375, "creation_date": 1570749629, "answer_id": 58332301, "question_id": 58262697, "link": "https://stackoverflow.com/questions/58262697/sass-is-not-working-cant-install-ruby-sass-on-macos-catalina/58332301#58332301", "title": "Sass is not working &amp; Can&#39;t install ruby-sass on macOS Catalina", "body": "<p>Since macOS Catalina has removed ruby from the base install, you are no longer able to execute the sass executable installed via gem.</p>\n<p>However, you can install Dart Sass as instructed on the <a href=\"https://sass-lang.com/install\" rel=\"nofollow noreferrer\">sass website</a>:</p>\n<blockquote>\n<p>Install on Mac OS X (Homebrew)</p>\n<p>If you use <a href=\"https://brew.sh/\" rel=\"nofollow noreferrer\">the Homebrew package manager</a> for Mac OS X, you can install Dart Sass by running</p>\n<pre><code>brew install sass/sass/sass\n</code></pre>\n</blockquote>\n<hr />\n<p>Before doing this however, it may be wise to uninstall the instance of sass that was installed via gem</p>\n<pre><code>gem uninstall sass\n</code></pre>\n<p>If you come across any issues with linking the sass that was installed via brew, you may need to manually link it (brew will usually tell you this if it is the case)</p>\n<pre><code>brew link --overwrite sass\n</code></pre>\n"}], "owner": {"reputation": 1682, "user_id": 6544266, "user_type": "registered", "accept_rate": 88, "profile_image": "https://lh6.googleusercontent.com/-80Bs6ytjduI/AAAAAAAAAAI/AAAAAAAAAC4/W2JWZXH9Z0c/photo.jpg?sz=128", "display_name": "Delowar Hosain", "link": "https://stackoverflow.com/users/6544266/delowar-hosain"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5853, "favorite_count": 2, "accepted_answer_id": 58262740, "answer_count": 3, "score": 4, "last_activity_date": 1581381051, "creation_date": 1570413707, "last_edit_date": 1573638519, "question_id": 58262697, "link": "https://stackoverflow.com/questions/58262697/sass-is-not-working-cant-install-ruby-sass-on-macos-catalina", "title": "Sass is not working &amp; Can&#39;t install ruby-sass on macOS Catalina", "body": "<p>Ruby sass is not working after upgrading to macOS Catalina beta.</p>\n\n<p>When I run <code>sudo gem install sass</code>, I'm getting an error: </p>\n\n<pre><code>ERROR:  Error installing sass:\n    ERROR: Failed to build gem native extension.\n\n    current directory: /Library/Ruby/Gems/2.6.0/gems/ffi-1.11.1/ext/ffi_c\n/System/Library/Frameworks/Ruby.framework/Versions/2.6/usr/bin/ruby -I /Library/Ruby/Site/2.6.0 -r ./siteconf20191007-37566-177grvx.rb extconf.rb\nmkmf.rb can't find header files for ruby at /System/Library/Frameworks/Ruby.framework/Versions/2.6/usr/lib/ruby/include/ruby.h\n\nYou might have to install separate package for the ruby development\nenvironment, ruby-dev or ruby-devel for example.\n\nextconf failed, exit code 1\n\nGem files will remain installed in /Library/Ruby/Gems/2.6.0/gems/ffi-1.11.1 for inspection.\nResults logged to /Library/Ruby/Gems/2.6.0/extensions/universal-darwin-19/2.6.0/ffi-1.11.1/gem_make.out```\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 3867, "user_id": 3906189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/432b41df14bd9197f1b8601cabf49386?s=128&d=identicon&r=PG", "display_name": "siegy22", "link": "https://stackoverflow.com/users/3906189/siegy22"}, "edited": false, "score": 0, "creation_date": 1570449535, "post_id": 58262079, "comment_id": 102905254, "body": "Are you using a proxy in your postman configuration? If so, you&#39;ll need to make sure that the same proxy is used for your ruby application."}], "answers": [{"tags": [], "owner": {"reputation": 2294, "user_id": 2245697, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/931e42fa59a041551b7f63e703ea909a?s=128&d=identicon&r=PG&f=1", "display_name": "Tan", "link": "https://stackoverflow.com/users/2245697/tan"}, "is_accepted": false, "score": 0, "last_activity_date": 1570416038, "creation_date": 1570416038, "answer_id": 58262896, "question_id": 58262079, "link": "https://stackoverflow.com/questions/58262079/http-request-works-in-postman-but-not-in-ruby-502-error/58262896#58262896", "title": "HTTP request works in Postman but not in Ruby (502 error)", "body": "<p>Would you try to include the <code>Content-Type</code> header like</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>request = Net::HTTP::Post.new(url)\nrequest[\"Content-Type\"] = \"application/json\"\n</code></pre>\n"}], "owner": {"reputation": 996, "user_id": 11153160, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Qr9JL.png?s=128&g=1", "display_name": "ostrebler", "link": "https://stackoverflow.com/users/11153160/ostrebler"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 199, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1570416038, "creation_date": 1570405326, "last_edit_date": 1570406125, "question_id": 58262079, "link": "https://stackoverflow.com/questions/58262079/http-request-works-in-postman-but-not-in-ruby-502-error", "title": "HTTP request works in Postman but not in Ruby (502 error)", "body": "<p>I'm quite new to Ruby but have to debug a Ruby code that I did not write.</p>\n\n<p>In the Ruby code, an HTTP request is made. After a bit of logging, I found out that the response object shows a 502 error. When I try the exact same request in Postman, I get the expected successful response :</p>\n\n<p><a href=\"https://i.stack.imgur.com/LC5aj.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/LC5aj.png\" alt=\"enter image description here\"></a></p>\n\n<p>I even tried to literally copy/past Postman's generated Ruby snippet, and it still gives me a 502 error when fired from the Ruby code.</p>\n\n<p>Here is the part responsible for the query (the request method, post part) :</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>class PatentApi\n  # Patent analysis API wrapper\n\n  require 'uri'\n  require 'net/http'\n\n  DEFAULT_ENDPOINT = configatron.patent_api.endpoint.freeze\n\n  # POST /api/v1/graph\n  def post_complete_patent_graph(data)\n    response = post('graph', data.to_json)\n    response\n  end\n\n  # Send as POST request\n  def post(path, options = {})\n    request(:post, path, options)\n  end\n\n  # Build the request and return response\n  def request(method, path, options)\n    url = URI.parse(DEFAULT_ENDPOINT + path)\n    Rails.logger.info (url.inspect) # The url looks ok in the logs !\n    params = options # After logging, this value is ok\n    case method\n      when :get\n        url.query = URI.encode_www_form(params)\n        http = Net::HTTP.new(url.host, url.port)\n        request = Net::HTTP::Get.new(url.request_uri)\n        request[\"Accept\"] = 'application/json'\n        request[\"Content-Type\"] = 'application/json'\n        response = http.request(request)\n        return response\n      when :post\n        request = Net::HTTP::Post.new(url, 'Content-Type' =&gt; 'application/json')\n        request.body = params\n        response = Net::HTTP.start(url.host, url.port, :read_timeout =&gt; 320) do |http|\n          http.request(request)\n        end\n        Rails.logger.info 'RESPONSE'\n        Rails.logger.info (response.code) # 502 ! :(\n        Rails.logger.info (response.message)\n        Rails.logger.info 'END RESPONSE'\n        return response\n    end\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1570406996, "post_id": 58262058, "comment_id": 102892790, "body": "Note that the elements other than nil (e.g., x and y) are variables or methods. Are you sure you don&#39;t want them to be literals (e.g., :x or &quot;x&quot; or 7, etc.)? \u2013 Cary Swoveland 5 mins ago    Dele"}], "answers": [{"comments": [{"owner": {"reputation": 3523, "user_id": 9043475, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FNxvn.jpg?s=128&g=1", "display_name": "Rajagopalan", "link": "https://stackoverflow.com/users/9043475/rajagopalan"}, "edited": false, "score": 0, "creation_date": 1570418019, "post_id": 58262241, "comment_id": 102894369, "body": "Thank you very much. Second one is such a beautiful solution."}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": true, "score": 2, "last_activity_date": 1570409035, "last_edit_date": 1570409035, "creation_date": 1570407496, "answer_id": 58262241, "question_id": 58262058, "link": "https://stackoverflow.com/questions/58262058/how-to-replace-this-nil-value-in-ruby-style/58262241#58262241", "title": "How to replace this nil value in Ruby style", "body": "<pre><code>arr = [['a',1,2],[nil,3,4],[nil,5,6],[nil,7,8],['b',9,10],[nil,11,12],[nil,13,14]]\n</code></pre>\n\n<h1><p></p></h1>\n\n<pre><code>last = nil\narr.map do |f,*rest|\n  if f.nil?\n    [last, *rest]\n  else\n    last = f\n    [f, *rest]\n  end\nend\n  #=&gt; [[\"a\", 1, 2], [\"a\", 3, 4], [\"a\", 5, 6], [\"a\", 7, 8],\n  #    [\"b\", 9, 10], [\"b\", 11, 12], [\"b\", 13, 14]] \n</code></pre>\n\n<p>The steps are as follows:</p>\n\n<pre><code>last = nil\nenum = arr.map\n  #=&gt; #&lt;Enumerator: [[\"a\", 1, 2], [nil, 3, 4], [nil, 5, 6], [nil, 7, 8],\n  #                  [\"b\", 9, 10], [nil, 11, 12], [nil, 13, 14]]:map&gt; \nf,*rest = enum.next\n  #=&gt; [\"a\", 1, 2]\nf #=&gt; \"a\"\nrest\n  #=&gt; [1, 2] \nf.nil?\n  #=&gt; false \nlast = f\n  #=&gt; \"a\" \n[f, *rest]\n  #=&gt; [\"a\", 1, 2] \n\nf,*rest = enum.next\n  #=&gt; [nil, 3, 4] \nf.nil?\n  #=&gt; true \n[last, *rest]\n  #=&gt; [\"a\", 3, 4] \n\nf,*rest = enum.next\n  #=&gt; [nil, 5, 6] \nf.nil?\n  #=&gt; true \n[last, *rest]\n  #=&gt; [\"a\", 5, 6] \n\nf,*rest = enum.next\n  #=&gt; [nil, 7, 8] \nf.nil?\n  #=&gt; true \n[last, *rest]\n  #=&gt; [\"a\", 7, 8] \n</code></pre>\n\n<p>and so on.</p>\n\n<p>Alternatively,</p>\n\n<pre><code>arr.drop(1).each_with_object([arr.first]) { |a,ar|\n  ar &lt;&lt; [a.first || ar.last.first, *a.drop(1)] }\n  #=&gt; [[\"a\", 1, 2], [\"a\", 3, 4], [\"a\", 5, 6], [\"a\", 7, 8],\n  #    [\"b\", 9, 10], [\"b\", 11, 12], [\"b\", 13, 14]] \n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "edited": false, "score": 0, "creation_date": 1570450624, "post_id": 58268548, "comment_id": 102905750, "body": "I personally find the names <code>first</code> and <code>last</code> a bit confusing and would simply call them <code>a</code> and <code>b</code>."}, {"owner": {"reputation": 3523, "user_id": 9043475, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FNxvn.jpg?s=128&g=1", "display_name": "Rajagopalan", "link": "https://stackoverflow.com/users/9043475/rajagopalan"}, "edited": false, "score": 0, "creation_date": 1570451809, "post_id": 58268548, "comment_id": 102906371, "body": "That&#39;s amazing idea as well and it&#39;s very simpler."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1570467302, "post_id": 58268548, "comment_id": 102914669, "body": "Clever! I hadn&#39;t noticed that the OP wanted to mutate <code>A</code>."}], "tags": [], "owner": {"reputation": 73209, "user_id": 290394, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d7908f05c89e965f6bc5308ad6f41256?s=128&d=identicon&r=PG", "display_name": "steenslag", "link": "https://stackoverflow.com/users/290394/steenslag"}, "is_accepted": false, "score": 3, "last_activity_date": 1570447198, "creation_date": 1570447198, "answer_id": 58268548, "question_id": 58262058, "link": "https://stackoverflow.com/questions/58262058/how-to-replace-this-nil-value-in-ruby-style/58268548#58268548", "title": "How to replace this nil value in Ruby style", "body": "<pre><code>A = [['a',1,2],[nil,3,4],[nil,5,6],[nil,7,8],['b',9,10],[nil,11,12],[nil,13,14]]\n\nA.each_cons(2){|first, last| last[0] ||= first[0] }\n</code></pre>\n\n<p><code>last[0] ||= first[0]</code> means something like \"Give last[0] the value of first[0], unless it already has a value (not nil or false)\".</p>\n"}], "owner": {"reputation": 3523, "user_id": 9043475, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FNxvn.jpg?s=128&g=1", "display_name": "Rajagopalan", "link": "https://stackoverflow.com/users/9043475/rajagopalan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "accepted_answer_id": 58262241, "answer_count": 2, "score": 1, "last_activity_date": 1570447198, "creation_date": 1570405106, "question_id": 58262058, "link": "https://stackoverflow.com/questions/58262058/how-to-replace-this-nil-value-in-ruby-style", "title": "How to replace this nil value in Ruby style", "body": "<p>I have an array like </p>\n\n<pre><code> A=[[a,x,y,z],[nil,e,f,d],[nil,k,j,u],[nil,w,p,k],[b,x,y,z],[nil,e,f,d],[nil,k,j,u],[nil,w,p,k]]\n</code></pre>\n\n<p>Result</p>\n\n<pre><code> A=[[a,x,y,z],[a,e,f,d],[a,k,j,u],[a,w,p,k],[b,x,y,z],[b,e,f,d],[b,k,j,u],[b,w,p,k]]\n</code></pre>\n\n<p>You might be noticing that first character of the first array is replacing the upcoming nil value until first character of the first array is b and then nil values are replaced with b.</p>\n\n<p>This one I have achieved through iterating the array and writing the if condition and storing the first character somewhere and then by  comparing the first character while I am iterating. But I don't still don't find a ruby way of doing this. Can someone help me here </p>\n"}, {"tags": ["ruby", "jekyll", "jekyll-theme"], "comments": [{"owner": {"reputation": 115, "user_id": 3561210, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2cbaad222f50c97e407a0f67c743dab?s=128&d=identicon&r=PG&f=1", "display_name": "doubllle", "link": "https://stackoverflow.com/users/3561210/doubllle"}, "edited": false, "score": 0, "creation_date": 1610438918, "post_id": 58261528, "comment_id": 116125616, "body": "Did you manage to get it work?"}, {"owner": {"reputation": 685, "user_id": 9470078, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-FA8PnJ768P8/AAAAAAAAAAI/AAAAAAAAARQ/9QBFMw1uCfA/photo.jpg?sz=128", "display_name": "Monolith", "link": "https://stackoverflow.com/users/9470078/monolith"}, "reply_to_user": {"reputation": 115, "user_id": 3561210, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2cbaad222f50c97e407a0f67c743dab?s=128&d=identicon&r=PG&f=1", "display_name": "doubllle", "link": "https://stackoverflow.com/users/3561210/doubllle"}, "edited": false, "score": 0, "creation_date": 1610480822, "post_id": 58261528, "comment_id": 116145874, "body": "Yeah, I just posted an answer. Completely forgot about it, thanks for the reminder! Let me know if the solution works for you. I actually haven&#39;t touched Jekyll in a while so I might have missed something :)"}], "answers": [{"comments": [{"owner": {"reputation": 685, "user_id": 9470078, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-FA8PnJ768P8/AAAAAAAAAAI/AAAAAAAAARQ/9QBFMw1uCfA/photo.jpg?sz=128", "display_name": "Monolith", "link": "https://stackoverflow.com/users/9470078/monolith"}, "edited": false, "score": 0, "creation_date": 1570401787, "post_id": 58261737, "comment_id": 102891993, "body": "How would I deploy two websites on a service like github pages? Also, if I did it this way could I directly link to the other website with a relative link? If not how could I link to the other website that holds the docs?"}, {"owner": {"reputation": 685, "user_id": 9470078, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-FA8PnJ768P8/AAAAAAAAAAI/AAAAAAAAARQ/9QBFMw1uCfA/photo.jpg?sz=128", "display_name": "Monolith", "link": "https://stackoverflow.com/users/9470078/monolith"}, "edited": false, "score": 0, "creation_date": 1570403421, "post_id": 58261737, "comment_id": 102892257, "body": "Ok, I would like to make it be able to host on github pages (sorry I should have added it to my question)."}, {"owner": {"reputation": 9244, "user_id": 2397550, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/iAb8N.jpg?s=128&g=1", "display_name": "JoostS", "link": "https://stackoverflow.com/users/2397550/joosts"}, "reply_to_user": {"reputation": 685, "user_id": 9470078, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-FA8PnJ768P8/AAAAAAAAAAI/AAAAAAAAARQ/9QBFMw1uCfA/photo.jpg?sz=128", "display_name": "Monolith", "link": "https://stackoverflow.com/users/9470078/monolith"}, "edited": false, "score": 0, "creation_date": 1570403559, "post_id": 58261737, "comment_id": 102892276, "body": "I don&#39;t think that that is possible (as stated)."}, {"owner": {"reputation": 685, "user_id": 9470078, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-FA8PnJ768P8/AAAAAAAAAAI/AAAAAAAAARQ/9QBFMw1uCfA/photo.jpg?sz=128", "display_name": "Monolith", "link": "https://stackoverflow.com/users/9470078/monolith"}, "edited": false, "score": 0, "creation_date": 1570403905, "post_id": 58261737, "comment_id": 102892333, "body": "I might be able to create a website for and organization and use a different <code>base_url</code> for the documentation then link to it as an absolute link (e.g. <code>org_name.github.io&#47;docs</code> and <code>&#47;home</code> as different websites). I think kind of like <a href=\"https://www.youtube.com/watch?v=fqFjuX4VZmU\" rel=\"nofollow noreferrer\">this</a> with more than one repo under the organization, but thats the sort of thing I want to avoid and seems kinda hacky."}, {"owner": {"reputation": 9244, "user_id": 2397550, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/iAb8N.jpg?s=128&g=1", "display_name": "JoostS", "link": "https://stackoverflow.com/users/2397550/joosts"}, "reply_to_user": {"reputation": 685, "user_id": 9470078, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-FA8PnJ768P8/AAAAAAAAAAI/AAAAAAAAARQ/9QBFMw1uCfA/photo.jpg?sz=128", "display_name": "Monolith", "link": "https://stackoverflow.com/users/9470078/monolith"}, "edited": false, "score": 0, "creation_date": 1570403981, "post_id": 58261737, "comment_id": 102892349, "body": "I think themes in general assume you use them for the whole repo. I see no obvious solution here."}, {"owner": {"reputation": 685, "user_id": 9470078, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-FA8PnJ768P8/AAAAAAAAAAI/AAAAAAAAARQ/9QBFMw1uCfA/photo.jpg?sz=128", "display_name": "Monolith", "link": "https://stackoverflow.com/users/9470078/monolith"}, "edited": false, "score": 0, "creation_date": 1570404239, "post_id": 58261737, "comment_id": 102892376, "body": "What I mean is create two different repositories under one organization and host them on different <code>base_names</code> of the organization. For example, if I have a domain <code>org.github.io</code> it could have two basenames <code>org.github.io&#47;home</code> and <code>org.github.io&#47;docs</code>, hosted on different repositories. I&#39;m not quite sure though."}], "tags": [], "owner": {"reputation": 9244, "user_id": 2397550, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/iAb8N.jpg?s=128&g=1", "display_name": "JoostS", "link": "https://stackoverflow.com/users/2397550/joosts"}, "is_accepted": false, "score": 0, "last_activity_date": 1570402569, "last_edit_date": 1570402569, "creation_date": 1570401077, "answer_id": 58261737, "question_id": 58261528, "link": "https://stackoverflow.com/questions/58261528/use-multiple-themes-on-one-website-jeykll/58261737#58261737", "title": "Use multiple themes on one website jeykll", "body": "<p>The solution is to create two separate websites. The first site contains just the homepage and should be deployed to the root of your web folder. The second site contains all docs and should be deployed to a subdirectory, like '/docs/'. You might want to use baseurl for this: <a href=\"https://byparker.com/blog/2014/clearing-up-confusion-around-baseurl/\" rel=\"nofollow noreferrer\">https://byparker.com/blog/2014/clearing-up-confusion-around-baseurl/</a></p>\n\n<p>I do not think you can use this solution on Github pages. You can TRY to add the same CNAME to both repositories, as I am not 100% sure. Any other static hosting environment should work.</p>\n\n<p>You can link from the docs to the homepage by linking to '/'. You can link from the homepage to the docs by linking to '/docs/pagename/' (assuming you use <code>permalink: pretty</code>).</p>\n"}, {"comments": [{"owner": {"reputation": 685, "user_id": 9470078, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-FA8PnJ768P8/AAAAAAAAAAI/AAAAAAAAARQ/9QBFMw1uCfA/photo.jpg?sz=128", "display_name": "Monolith", "link": "https://stackoverflow.com/users/9470078/monolith"}, "edited": false, "score": 0, "creation_date": 1570561986, "post_id": 58290229, "comment_id": 102949513, "body": "Good idea! I will try it, and will get back to you."}], "tags": [], "owner": {"reputation": 4449, "user_id": 7681659, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47bc1a3b7231505d61b7f80642bc1a14?s=128&d=identicon&r=PG&f=1", "display_name": "ashmaroli", "link": "https://stackoverflow.com/users/7681659/ashmaroli"}, "is_accepted": false, "score": 1, "last_activity_date": 1570551137, "creation_date": 1570551137, "answer_id": 58290229, "question_id": 58261528, "link": "https://stackoverflow.com/questions/58261528/use-multiple-themes-on-one-website-jeykll/58290229#58290229", "title": "Use multiple themes on one website jeykll", "body": "<p>Since you plan to use one of the themes on just a single page, I think the best solution would be to use <strong>two base layouts</strong> instead of two themes.</p>\n\n<p>It will take some minor work initially, but will greatly ease future maintenance.</p>\n\n<p>First set up the site to render <code>just-the-docs</code> theme for <em>all pages</em> including the landing page. Then modify <code>_layouts/home.html</code> to be a <em>parent layout</em> (like the <code>default</code> layout)\nto render the markup from the <code>ubuild..</code> theme.</p>\n"}, {"tags": [], "owner": {"reputation": 479, "user_id": 2766598, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/f03f4c20d671bacd2f8e67f5e61781df?s=128&d=identicon&r=PG", "display_name": "Delfino", "link": "https://stackoverflow.com/users/2766598/delfino"}, "is_accepted": false, "score": 0, "last_activity_date": 1586735113, "creation_date": 1586735113, "answer_id": 61179643, "question_id": 58261528, "link": "https://stackoverflow.com/questions/58261528/use-multiple-themes-on-one-website-jeykll/61179643#61179643", "title": "Use multiple themes on one website jeykll", "body": "<p>The simplest way to maintain two layouts on the same site using Jekyll with GitHub Pages is for you to create a new repository for the new layout, so the main site is in a GitHub organization and the pages that need to use a different layout must be in your repositories.</p>\n\n<p>However, if you are not using GitHub, just jekyll, just configure each folder as a new Jekyll project, and direct them to write to the respective subfolders in the _site folder. For everything to work out you need to start Jekyll Server from the main folder, and then build each subfolder separately, so it will update without removing the main one</p>\n"}, {"tags": [], "owner": {"reputation": 685, "user_id": 9470078, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-FA8PnJ768P8/AAAAAAAAAAI/AAAAAAAAARQ/9QBFMw1uCfA/photo.jpg?sz=128", "display_name": "Monolith", "link": "https://stackoverflow.com/users/9470078/monolith"}, "is_accepted": true, "score": 1, "last_activity_date": 1610480777, "creation_date": 1610480777, "answer_id": 65691013, "question_id": 58261528, "link": "https://stackoverflow.com/questions/58261528/use-multiple-themes-on-one-website-jeykll/65691013#65691013", "title": "Use multiple themes on one website jeykll", "body": "<p>I solved this with help from @JoostS's answer but with a few modifications:</p>\n<ol>\n<li><p><strong>Make an organization</strong> on GitHub pages with a repo called <code>&lt;org-name&gt;.github.io</code>. This repo should contain the theme for the home page (<code>ubuild</code> in my case) and all the content for it.</p>\n</li>\n<li><p><strong>Make another repo</strong> with a jeykll site, called <code>docs</code>. This site should have the theme you want for the other page (<code>just-the-docs</code> in my case) and all the content along with it.</p>\n</li>\n<li><p>In the <code>docs</code> repo, <strong>add <code>baseurl: &quot;/docs&quot;</code> to your <code>_config.yml</code></strong></p>\n</li>\n<li><p>The <code>&lt;org-name&gt;.github.io</code> repo, should now be hosted at <code>&lt;org-name&gt;.github.io/</code>:</p>\n<p><a href=\"https://i.stack.imgur.com/1ircv.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/1ircv.png\" alt=\"Site is published\" /></a></p>\n</li>\n<li><p>The <code>docs</code> repo should now be hosted at the <code>&lt;org-name&gt;.github.io/docs</code> url:</p>\n<p><a href=\"https://i.stack.imgur.com/nB58D.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/nB58D.png\" alt=\"Docs repo\" /></a></p>\n</li>\n<li><p>To link to the <code>docs</code> page, you should just be able to use <code>/docs</code> now.</p>\n</li>\n</ol>\n"}], "owner": {"reputation": 685, "user_id": 9470078, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-FA8PnJ768P8/AAAAAAAAAAI/AAAAAAAAARQ/9QBFMw1uCfA/photo.jpg?sz=128", "display_name": "Monolith", "link": "https://stackoverflow.com/users/9470078/monolith"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 755, "favorite_count": 1, "accepted_answer_id": 65691013, "answer_count": 4, "score": 5, "last_activity_date": 1610480777, "creation_date": 1570398883, "last_edit_date": 1570403452, "question_id": 58261528, "link": "https://stackoverflow.com/questions/58261528/use-multiple-themes-on-one-website-jeykll", "title": "Use multiple themes on one website jeykll", "body": "<p>I have recently found out about <a href=\"https://jekyllrb.com/\" rel=\"nofollow noreferrer\">jekyll</a>, and want to make a project landing page with it. What I want to do is to have a home page using one theme (e.g. <a href=\"https://github.com/forestryio/ubuild-jekyll\" rel=\"nofollow noreferrer\">ubuild</a>) and have another page for the docs (linked by a navagation bar at the top) that uses a different theme (e.g. <a href=\"https://github.com/pmarsceill/just-the-docs\" rel=\"nofollow noreferrer\">just-the-docs</a>). How can I go about doing this?</p>\n\n<p>EDIT: I want to use Github Pages for this.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "bundler", "windows-subsystem-for-linux"], "answers": [{"tags": [], "owner": {"reputation": 107303, "user_id": 572, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/Ct4o3.jpg?s=128&g=1", "display_name": "Thomas Owens", "link": "https://stackoverflow.com/users/572/thomas-owens"}, "is_accepted": true, "score": 3, "last_activity_date": 1595109809, "last_edit_date": 1595109809, "creation_date": 1587219926, "answer_id": 61290729, "question_id": 58261192, "link": "https://stackoverflow.com/questions/58261192/is-there-a-reliable-way-to-avoid-permission-denied-errors-when-installing-ruby-g/61290729#61290729", "title": "Is there a reliable way to avoid permission denied errors when installing Ruby gems with native extensions on Windows Subsystem for Linux?", "body": "<p>The problem that I'm experiencing may be related to Visual Studio Code's file watching. It is reflected in two GitHub issues against WSL - <a href=\"https://github.com/Microsoft/WSL/issues/1956\" rel=\"nofollow noreferrer\">1956</a> and <a href=\"https://github.com/Microsoft/WSL/issues/3395\" rel=\"nofollow noreferrer\">3395</a>. Visual Studio Code has <code>remote.WSL.fileWatcher.polling</code>, which can be enabled which works around this issue. However, <a href=\"https://code.visualstudio.com/docs/remote/wsl#_i-see-eaccess-permission-denied-error-trying-to-rename-a-folder-in-the-open-workspace\" rel=\"nofollow noreferrer\">the documentation states that there is a performance impact for large workspaces</a> and it may be necessary to also adjust the <code>remote.WSL.fileWatcher.pollingInterval</code> setting. WSL2 will resolve these issues.</p>\n<p>Since enabling this flag, I haven't seen the error while working with VS Code running.</p>\n<hr />\n<p>Now that WSL2 is out, I was able to disable this flag and the issue has not reappeared. It appears that if you can upgrade to WSL2, that may be a preferred solution. However, for anyone who hasn't yet upgraded or can't upgrade, toggling the <code>remote.WSL.fileWatcher.polling</code> and <code>remote.WSL.fileWatcher.pollingInterval</code> should be good.</p>\n"}], "owner": {"reputation": 107303, "user_id": 572, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/Ct4o3.jpg?s=128&g=1", "display_name": "Thomas Owens", "link": "https://stackoverflow.com/users/572/thomas-owens"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1085, "favorite_count": 0, "accepted_answer_id": 61290729, "answer_count": 1, "score": 7, "last_activity_date": 1595109809, "creation_date": 1570395700, "question_id": 58261192, "link": "https://stackoverflow.com/questions/58261192/is-there-a-reliable-way-to-avoid-permission-denied-errors-when-installing-ruby-g", "title": "Is there a reliable way to avoid permission denied errors when installing Ruby gems with native extensions on Windows Subsystem for Linux?", "body": "<p>I'm hoping that WSL2 solves these problems and makes this question obsolete in the next 6 months or so, but in the meantime, I don't feel comfortable running bleeding edge or other preview releases of Windows on my primary laptop.</p>\n\n<p>Sometimes, when I'm installing Ruby gems (<code>bundle install</code> or <code>bundle install --path=vendor/bundle</code>) inside of WSL, I get <code>Permission denied</code> errors when installing a gem with a native extension.</p>\n\n<p>The most recent incarnation of this error was this:</p>\n\n<pre><code>Permission denied @ rb_file_s_rename - (./.gem.20191006-12131-11th7ub/byebug, /home/thomasowens/project/vendor/bundle/ruby/2.6.0/extensions/x86_64-linux/2.6.0-static/byebug-11.0.1/byebug)\n</code></pre>\n\n<p>To resolve it, I simply deleted <code>/home/thomasowens/project/vendor/bundle/ruby/2.6.0/extensions/x86_64-linux/2.6.0-static/byebug-11.0.1/byebug</code>, reran the bundle command, and it succeeded. Sometimes, I need to do this multiple times, but it usually works.</p>\n\n<p>In the end, I can get all of the gems installed properly, but it's hard when setting up a new project and there are many gems with native extensions. Same when I'm introducing a new gem or updating a gem that causes the native dependencies to need to be updated.</p>\n\n<p>I haven't found much about this issue, but I'm wondering if there is something that I can do to alleviate the pain of needing to run <code>bundle install</code> multiple times to get a project set up and running under WSL.</p>\n"}, {"tags": ["ruby", "activerecord", "rspec", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 1, "creation_date": 1570396710, "post_id": 58261082, "comment_id": 102891123, "body": "Add the failing test."}], "answers": [{"tags": [], "owner": {"reputation": 4338, "user_id": 299774, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/eab8557a9cb59427455bac3cc59d2802?s=128&d=identicon&r=PG", "display_name": "Grzegorz", "link": "https://stackoverflow.com/users/299774/grzegorz"}, "is_accepted": false, "score": 0, "last_activity_date": 1570457218, "creation_date": 1570457218, "answer_id": 58271272, "question_id": 58261082, "link": "https://stackoverflow.com/questions/58261082/associationtypemismatch-but-expected-and-got-are-the-same-class-with-the-sam/58271272#58271272", "title": "AssociationTypeMismatch but `expected` and `got` are the same class with the same object id", "body": "<p>It looks like in your spec you're expecting a class, but an object of this class is being returned.</p>\n\n<blockquote>\n  <p>Patient(#47184337056660) expected, got # which is an instance of Patient(#47184337056660)</p>\n</blockquote>\n\n<p>This is a key information here:\n<strong>which is an instance of</strong></p>\n\n<p>It's hard to tell if you need to fix the specs or the code, since you didn't share the specs at all. </p>\n"}, {"tags": [], "owner": {"reputation": 45, "user_id": 11037755, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9bb95565b91ec15fb7e0d34ab18ff590?s=128&d=identicon&r=PG&f=1", "display_name": "Sam J", "link": "https://stackoverflow.com/users/11037755/sam-j"}, "is_accepted": false, "score": 0, "last_activity_date": 1570535027, "creation_date": 1570535027, "answer_id": 58285694, "question_id": 58261082, "link": "https://stackoverflow.com/questions/58261082/associationtypemismatch-but-expected-and-got-are-the-same-class-with-the-sam/58285694#58285694", "title": "AssociationTypeMismatch but `expected` and `got` are the same class with the same object id", "body": "<p>For future thread readers, I found the problem:</p>\n\n<p>The test had stubbed the <code>is_a?</code> method to return false for this particular <code>Patient</code> instance.</p>\n\n<p>Lord knows why 3-months-ago-me did this! </p>\n\n<p>Under the hood rails uses this method to confirm the correct associated object type. In this case, rails checked whether the instance <code>is_a?(Patient)</code> and it returned false. So the patient instance was acting like it was not an instance of the <code>Patient</code> class</p>\n"}], "owner": {"reputation": 45, "user_id": 11037755, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9bb95565b91ec15fb7e0d34ab18ff590?s=128&d=identicon&r=PG&f=1", "display_name": "Sam J", "link": "https://stackoverflow.com/users/11037755/sam-j"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 76, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1570535027, "creation_date": 1570394628, "question_id": 58261082, "link": "https://stackoverflow.com/questions/58261082/associationtypemismatch-but-expected-and-got-are-the-same-class-with-the-sam", "title": "AssociationTypeMismatch but `expected` and `got` are the same class with the same object id", "body": "<p>This is a rails application. Rails 5.1, Rspec 3.6. I have a failing test in my Rspec test suite and I cannot understand the error message. As far as I can see, the association expects and gets exactly the same object, yet it is still throwing an error. I would appreciate any insight into understanding this error and working towards a fix.</p>\n\n<p>The relevant (minimal) model definitions:</p>\n\n<pre><code>class Member &lt; ApplicationRecord\n  belongs_to :membership, inverse_of: :members\n  belongs_to :patient\nend\n</code></pre>\n\n<pre><code>class Patient &lt; Client\n  has_many :members, dependent: :destroy\nend\n</code></pre>\n\n<p>The error:</p>\n\n<pre><code>Failure/Error: return if member.update(membership: membership, patient: person)\n\n     ActiveRecord::AssociationTypeMismatch:\n       Patient(#47184337056660) expected, got #&lt;Patient id: 163, ...&gt; which is an instance of Patient(#47184337056660)\n</code></pre>\n"}, {"tags": ["json", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1570400654, "post_id": 58261152, "comment_id": 102891812, "body": "This assumes the key <code>:items</code> is known. You might want to replace it with <code>items_hash.keys.first</code>, provided you assume that, as in the example, the hash has a single key. You have also assumed that if two hashes have the same value of <code>:code</code> they will also have the same value of <code>:name</code>. That&#39;s unclear from the question but would be an odd design for a hash. Lastly, the operation that modifies elements in <code>collected_items</code> is relatively inefficient; it has a computational complexity of <code>O(2)</code> whereas it could be close to <code>O(1)</code> with a different design."}, {"owner": {"reputation": 3926, "user_id": 2190621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c464f439212bca87517b234f7c9bd3e?s=128&d=identicon&r=PG&f=1", "display_name": "demir", "link": "https://stackoverflow.com/users/2190621/demir"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1570438519, "post_id": 58261152, "comment_id": 102900015, "body": "@CarySwoveland Yes, it is not a general solution."}], "tags": [], "owner": {"reputation": 3926, "user_id": 2190621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c464f439212bca87517b234f7c9bd3e?s=128&d=identicon&r=PG&f=1", "display_name": "demir", "link": "https://stackoverflow.com/users/2190621/demir"}, "is_accepted": true, "score": 0, "last_activity_date": 1570395689, "last_edit_date": 1570395689, "creation_date": 1570395248, "answer_id": 58261152, "question_id": 58261051, "link": "https://stackoverflow.com/questions/58261051/join-json-with-a-common-attribute/58261152#58261152", "title": "Join JSON with a common attribute", "body": "<p>This should work:</p>\n\n<pre><code>items_hash = { items: [{ code: 1, name: 'A', quantity: 2.0 }, { code: 1, name: 'A', quantity: 3.0 }, { code: 2, name: 'B', quantity: 4.0 }] }\n\nitems_hash[:items] = items_hash[:items].each_with_object([]) do |item, collected_items|\n  if item_in_collected_items = collected_items.find { |i| i[:code] == item[:code] }\n    item_in_collected_items[:quantity] += item[:quantity]\n  else\n    collected_items &lt;&lt; item\n  end\nend\n\np items_hash\n#=&gt; { items: [{ code: 1, name: 'A', quantity: 5.0 }, { code: 2, name: 'B', quantity: 4.0 }] }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 0, "last_activity_date": 1570399970, "last_edit_date": 1570399970, "creation_date": 1570399491, "answer_id": 58261582, "question_id": 58261051, "link": "https://stackoverflow.com/questions/58261051/join-json-with-a-common-attribute/58261582#58261582", "title": "Join JSON with a common attribute", "body": "<p><strong>Code</strong></p>\n\n<pre><code>def group_em(h)       \n  h.transform_values do |a|\n    a.each_with_object({}) do |g,h|\n      h.update([g[:code], g[:name]]=&gt;g) do |_,o,n|\n        g.merge(quantity: o[:quantity] + n[:quantity])\n      end\n    end.values\n  end\nend\n</code></pre>\n\n<p><strong>Examples</strong></p>\n\n<pre><code>h = { items: [{ code: 1, name: 'A', quantity: 2.0 },\n              { code: 1, name: 'A', quantity: 3.0 },\n              { code: 2, name: 'B', quantity: 4.0 }] }\n\ngroup_em(h)\n  #=&gt; { items: [{ code: 1, name: 'A', quantity: 5.0 },\n  #             { code: 2, name: 'B', quantity: 4.0 }] }\n</code></pre>\n\n<h1><p></p></h1>\n\n<pre><code>h = { items: [{ code: 1, name: 'A', quantity: 2.0 },\n              { code: 1, name: 'A', quantity: 3.0 },\n              { code: 1, name: 'C', quantity: 6.0 },\n              { code: 2, name: 'B', quantity: 4.0 }] }\n\ngroup_em(h)\n  #=&gt; {:items=&gt;[{:code=&gt;1, :name=&gt;\"A\", :quantity=&gt;5.0},\n  #             {:code=&gt;1, :name=&gt;\"C\", :quantity=&gt;6.0},\n  #             {:code=&gt;2, :name=&gt;\"B\", :quantity=&gt;4.0}]} \n</code></pre>\n\n<h1><p></p></h1>\n\n<pre><code>h = { items:   [{ code: 1, name: 'A', quantity: 2.0 },\n                { code: 1, name: 'A', quantity: 3.0 },\n                { code: 1, name: 'C', quantity: 6.0 },\n                { code: 2, name: 'B', quantity: 4.0 }],\n      returns: [{ code: 2, name: 'B', quantity: 1.0 },\n                { code: 1, name: 'A', quantity: 3.0 },\n                { code: 1, name: 'C', quantity: 1.0 },\n                { code: 2, name: 'B', quantity: 2.0 }]       \n    }\n\ngroup_em(h)\n  #=&gt; {:items=&gt;[{:code=&gt;1, :name=&gt;\"A\", :quantity=&gt;5.0},\n  #             {:code=&gt;1, :name=&gt;\"C\", :quantity=&gt;6.0},\n  #             {:code=&gt;2, :name=&gt;\"B\", :quantity=&gt;4.0}],\n  #  :returns=&gt;[{:code=&gt;2, :name=&gt;\"B\", :quantity=&gt;3.0},\n  #             {:code=&gt;1, :name=&gt;\"A\", :quantity=&gt;3.0},\n  #             {:code=&gt;1, :name=&gt;\"C\", :quantity=&gt;1.0}]} \n</code></pre>\n\n<p><strong>Explanation</strong></p>\n\n<p>See <a href=\"https://ruby-doc.org/core-2.6.3/Hash.html#method-i-transform_values\" rel=\"nofollow noreferrer\">Hash#transform_values</a>, <a href=\"https://ruby-doc.org/core-2.6.3/Hash.html#method-i-update\" rel=\"nofollow noreferrer\">Enumerable#each_with_object</a>, <a href=\"https://ruby-doc.org/core-2.6.3/Hash.html#method-i-transform_values\" rel=\"nofollow noreferrer\">Hash#merge</a> and the form of <a href=\"https://ruby-doc.org/core-2.6.3/Hash.html#method-i-update\" rel=\"nofollow noreferrer\">Hash#update</a> (aka <code>merge!</code>) that employs a block to determine the values of keys that are present in both hashes being merged. Here that block is:</p>\n\n<pre><code>do |_,o,n|\n  g.merge(quantity: o[:quantity] + n[:quantity])\nend\n</code></pre>\n\n<p>The values of the three block variables, <code>_</code>, <code>o</code> and <code>n</code>, are defined in the doc. I've used an underscore (a valid local variable) as the first variable--the common key--to signify that it is not used in the block calculation. That is common practice.</p>\n\n<p>Note that:</p>\n\n<pre><code>h.update([g[:code], g[:name]]=&gt;g)\n</code></pre>\n\n<p>is shorthand for:</p>\n\n<pre><code>h.update({ [g[:code], g[:name]]=&gt;g })\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 12173625, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-koo3p1VJFJQ/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3recpyHsi2LPg8RA_204xOtvw8k4tg/photo.jpg?sz=128", "display_name": "Ronaldo Marques", "link": "https://stackoverflow.com/users/12173625/ronaldo-marques"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "accepted_answer_id": 58261152, "answer_count": 2, "score": 2, "last_activity_date": 1570399970, "creation_date": 1570394373, "last_edit_date": 1570394448, "question_id": 58261051, "link": "https://stackoverflow.com/questions/58261051/join-json-with-a-common-attribute", "title": "Join JSON with a common attribute", "body": "<p>I have a JSON with product items with a code, name and quantity. Sometimes items are duplicated (same code and name, different quantity). I'd like to sum the quantity of them in a single one.</p>\n\n<p>Ex:</p>\n\n<p>FROM</p>\n\n<pre><code>{ items: [{ code: 1, name: 'A', quantity: 2.0 }, { code: 1, name: 'A', quantity: 3.0 }, { code: 2, name: 'B', quantity: 4.0 }] }\n</code></pre>\n\n<p>TO</p>\n\n<pre><code>{ items: [{ code: 1, name: 'A', quantity: 5.0 }, { code: 2, name: 'B', quantity: 4.0 }] }\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 69, "user_id": 10927701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5eef80517111079e3b8b8ecf3a347972?s=128&d=identicon&r=PG&f=1", "display_name": "Marshmello", "link": "https://stackoverflow.com/users/10927701/marshmello"}, "edited": false, "score": 1, "creation_date": 1570392404, "post_id": 58260822, "comment_id": 102890300, "body": "Thank you! You are my savior!"}], "tags": [], "owner": {"reputation": 3926, "user_id": 2190621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c464f439212bca87517b234f7c9bd3e?s=128&d=identicon&r=PG&f=1", "display_name": "demir", "link": "https://stackoverflow.com/users/2190621/demir"}, "is_accepted": true, "score": 4, "last_activity_date": 1570393338, "last_edit_date": 1570393338, "creation_date": 1570392246, "answer_id": 58260822, "question_id": 58260803, "link": "https://stackoverflow.com/questions/58260803/from-array-to-2d-array-devided-by-2-values/58260822#58260822", "title": "From array to 2D array devided by 2 values", "body": "<p><strong>For rails</strong> you can use <a href=\"https://api.rubyonrails.org/classes/Array.html#method-i-in_groups_of\" rel=\"nofollow noreferrer\">in_groups_of</a> method:</p>\n\n<pre><code>arr.in_groups_of(2)\n  #=&gt; [[\"112000666\", \"10\"], [\"111282637\", \"15\"], [\"111342625\", \"12\"],\n  #    [\"112000674\", \"11\"], [\"111488203\", \"18\"], [\"111237150\", \"20\"]]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 3, "last_activity_date": 1570392768, "creation_date": 1570392768, "answer_id": 58260875, "question_id": 58260803, "link": "https://stackoverflow.com/questions/58260803/from-array-to-2d-array-devided-by-2-values/58260875#58260875", "title": "From array to 2D array devided by 2 values", "body": "<p>Pure Ruby:</p>\n\n<pre><code>arr.each_slice(2).to_a\n  #=&gt; [[\"112000666\", \"10\"], [\"111282637\", \"15\"], [\"111342625\", \"12\"],\n  #    [\"112000674\", \"11\"], [\"111488203\", \"18\"], [\"111237150\", \"20\"]]\n</code></pre>\n\n<p>See <a href=\"https://ruby-doc.org/core-2.6.3/Enumerable.html#method-i-each_slice\" rel=\"nofollow noreferrer\">Enumerable#each_slice</a>.</p>\n"}], "owner": {"reputation": 69, "user_id": 10927701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5eef80517111079e3b8b8ecf3a347972?s=128&d=identicon&r=PG&f=1", "display_name": "Marshmello", "link": "https://stackoverflow.com/users/10927701/marshmello"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "accepted_answer_id": 58260822, "answer_count": 2, "score": 1, "last_activity_date": 1570393338, "creation_date": 1570392079, "last_edit_date": 1570392620, "question_id": 58260803, "link": "https://stackoverflow.com/questions/58260803/from-array-to-2d-array-devided-by-2-values", "title": "From array to 2D array devided by 2 values", "body": "<p>I'm having an array:</p>\n\n<pre><code>arr =[\"112000666\", \"10\", \"111282637\", \"15\", \"111342625\", \"12\", \"112000674\",\n      \"11\", \"111488203\", \"18\", \"111237150\", \"20\"]\n</code></pre>\n\n<p>Is there any way to make a 2D array and divided by 2 values? Something like this:</p>\n\n<pre><code>[[\"112000666\", \"10\"], [\"111282637\", \"15\"], [\"111342625\", \"12\"],\n [\"112000674\", \"11\"], [\"111488203\", \"18\"], [\"111237150\", \"20\"]]\n</code></pre>\n\n<p>The number of elements will always be even.</p>\n"}, {"tags": ["ruby", "css-selectors", "nokogiri"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1571377723, "post_id": 58260752, "comment_id": 103227947, "body": "Welcome to SO! Please see &quot;<a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>&quot; and the linked pages and &quot;<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">mcve</a>&quot;. If a co-worker handed you the question on a paper and stepped away, would you be able to understand it and answer it? If not, what would you want to know? That&#39;s the sort of information we need also otherwise we have to make a lot of assumptions and guesses. What did you try? Why didn&#39;t it work?"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1571378014, "post_id": 58260752, "comment_id": 103228051, "body": "CSS selectors are not really up to the job. Instead you&#39;d be better off using XPath which has a much more rich set of tools for looking at embedded text and siblings."}], "answers": [{"comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1575765159, "post_id": 58291013, "comment_id": 104675972, "body": "Don&#39;t use regular expressions to search HTML. It&#39;s really easy for the pattern to break or leak if the HTML changes. Instead use a parser."}], "tags": [], "owner": {"reputation": 795, "user_id": 3662748, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8acc15309c4109ea00f420a59be35a47?s=128&d=identicon&r=PG&f=1", "display_name": "sam", "link": "https://stackoverflow.com/users/3662748/sam"}, "is_accepted": false, "score": 0, "last_activity_date": 1571378099, "last_edit_date": 1571378099, "creation_date": 1570554589, "answer_id": 58291013, "question_id": 58260752, "link": "https://stackoverflow.com/questions/58260752/how-to-select-from-between-header-elements-in-ruby/58291013#58291013", "title": "How to select from between header elements in Ruby", "body": "<p>According to \"<a href=\"https://stackoverflow.com/questions/1520429/is-there-a-css-selector-for-elements-containing-certain-text\">Is there a CSS selector for elements containing certain text?</a>\", I'm afraid there is no CSS selector working on element text. How about first extract \"(Part 2)\", and then using Nokogiri to select table elements inside it?</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>text = \"\" //your string, or content from a file\n\npart2 = text.scan(/&lt;h2&gt;Title 2&lt;\\/h2&gt;\\s+(.+)?&lt;h2&gt;/ms).first.first\n\ndoc = Nokogiri::HTML(part2)\n\n# continue select table elements from doc\n</code></pre>\n\n<p><code>(Part 2)</code> can not contain any <code>h2</code> tag, or the regex should be different.</p>\n"}, {"tags": [], "owner": {"reputation": 547, "user_id": 3396971, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52c75295766cfc6c5950bb398fa6c7e2?s=128&d=identicon&r=PG", "display_name": "NemyaNation", "link": "https://stackoverflow.com/users/3396971/nemyanation"}, "is_accepted": false, "score": 0, "last_activity_date": 1575643652, "creation_date": 1575643652, "answer_id": 59215346, "question_id": 58260752, "link": "https://stackoverflow.com/questions/58260752/how-to-select-from-between-header-elements-in-ruby/59215346#59215346", "title": "How to select from between header elements in Ruby", "body": "<p>If you know that the tables will be static, and the data you require will always be in the second table. You can do something like:</p>\n\n<pre><code>page.css('table')[1].css('tr')[3].css('td')\n</code></pre>\n\n<p>This will get us the second table on the page, access the 4th row of that table and get us all the values of that row.</p>\n\n<p>I haven't tested this, but this would be the way I would do it if the table I require doesn't have a class or identifier. </p>\n"}, {"tags": [], "owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "is_accepted": false, "score": 1, "last_activity_date": 1575765078, "creation_date": 1575765078, "answer_id": 59231492, "question_id": 58260752, "link": "https://stackoverflow.com/questions/58260752/how-to-select-from-between-header-elements-in-ruby/59231492#59231492", "title": "How to select from between header elements in Ruby", "body": "<p>I'd probably use this as a first attempt:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>require 'nokogiri'\n\ndoc = Nokogiri::HTML(&lt;&lt;EOT)\n  &lt;h2&gt;Title 1&lt;/h2&gt;\n    (Part 1)\n  &lt;h2&gt;Title 2&lt;/h2&gt;\n    &lt;table&gt;\n      &lt;tr&gt;&lt;td&gt;(Part 2)&lt;/td&gt;&lt;/tr&gt;\n    &lt;/table&gt;\n  &lt;h2&gt;Title 3&lt;/h2&gt;\n    (Part 3)\nEOT\n\ndoc.css('h2')[1].next_element\n  .to_html # =&gt; \"&lt;table&gt;\\n      &lt;tr&gt;&lt;td&gt;(Part 2)&lt;/td&gt;&lt;/tr&gt;\\n    &lt;/table&gt;\"\n</code></pre>\n\n<p>Alternately, rather than use <code>css('h2')[1]</code>, I could pass some of the task to the CSS selector:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>doc.at('h2:nth-of-type(2)').next_element\n  .to_html # =&gt; \"&lt;table&gt;\\n      &lt;tr&gt;&lt;td&gt;(Part 2)&lt;/td&gt;&lt;/tr&gt;\\n    &lt;/table&gt;\"\n</code></pre>\n\n<p>Once you have the table then it's easy to grab data from it. There are lots of examples how to do it out there.</p>\n"}, {"tags": [], "owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "is_accepted": false, "score": 0, "last_activity_date": 1575765315, "creation_date": 1575765315, "answer_id": 59231507, "question_id": 58260752, "link": "https://stackoverflow.com/questions/58260752/how-to-select-from-between-header-elements-in-ruby/59231507#59231507", "title": "How to select from between header elements in Ruby", "body": "<p>I'd probably use this as a first attempt:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>require 'nokogiri'\n\ndoc = Nokogiri::HTML(&lt;&lt;EOT)\n  &lt;h2&gt;Title 1&lt;/h2&gt;\n    (Part 1)\n  &lt;h2&gt;Title 2&lt;/h2&gt;\n    &lt;table&gt;\n      &lt;tr&gt;&lt;td&gt;(Part 2)&lt;/td&gt;&lt;/tr&gt;\n    &lt;/table&gt;\n  &lt;h2&gt;Title 3&lt;/h2&gt;\n    (Part 3)\nEOT\n\ndoc.css('h2')[1].next_element.to_html # =&gt; \"&lt;table&gt;\\n      &lt;tr&gt;&lt;td&gt;(Part 2)&lt;/td&gt;&lt;/tr&gt;\\n    &lt;/table&gt;\"\n</code></pre>\n\n<p>Alternately, rather than use <code>css('h2')[1]</code>, I could pass some of the task to the CSS selector:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>doc.at('h2:nth-of-type(2)').next_element\n  .to_html # =&gt; \"&lt;table&gt;\\n      &lt;tr&gt;&lt;td&gt;(Part 2)&lt;/td&gt;&lt;/tr&gt;\\n    &lt;/table&gt;\"\n</code></pre>\n\n<p><a href=\"https://www.rubydoc.info/github/sparklemotion/nokogiri/Nokogiri/XML/Node#next_element-instance_method\" rel=\"nofollow noreferrer\"><code>next_element</code></a> is the trick used to find the node following the current one. There are many \"next\" and \"previous\" methods so read up on them as they're very useful for this sort of situation.</p>\n\n<p>Finally, <a href=\"https://www.rubydoc.info/github/sparklemotion/nokogiri/Nokogiri/XML/Node#to_html-instance_method\" rel=\"nofollow noreferrer\"><code>to_html</code></a> is used above to show us what Nokogiri returned in a more friendly output. You wouldn't use it unless it was necessary to output HTML.</p>\n"}], "owner": {"reputation": 39, "user_id": 11599060, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f21721ed0e382ccc2c2b97dd6bfa32a?s=128&d=identicon&r=PG", "display_name": "Joe McCauley", "link": "https://stackoverflow.com/users/11599060/joe-mccauley"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 131, "favorite_count": 0, "answer_count": 4, "score": 1, "last_activity_date": 1575765315, "creation_date": 1570391634, "last_edit_date": 1571377949, "question_id": 58260752, "link": "https://stackoverflow.com/questions/58260752/how-to-select-from-between-header-elements-in-ruby", "title": "How to select from between header elements in Ruby", "body": "<p>I'm working on a Ruby script that uses Nokogiri and CSS selectors. I'm trying to scrape some data from HTML that looks like this:</p>\n\n<pre><code>&lt;h2&gt;Title 1&lt;/h2&gt;\n(Part 1)\n&lt;h2&gt;Title 2&lt;/h2&gt;\n(Part 2)\n&lt;h2&gt;Title 3&lt;/h2&gt;\n(Part 3)\n</code></pre>\n\n<p>Is there a way to select from <code>Part 2</code> only by specifying the text of the <code>h2</code> elements that represent the start and end points?</p>\n\n<p>The data of interest in <code>Part 2</code> is a table with <code>tr</code> and <code>td</code> elements that don't have any <code>class</code> or <code>id</code> identifiers. The other parts also have tables I'm not interested in. Something like </p>\n\n<pre><code>page.css('table tr td')\n</code></pre>\n\n<p>on the entire page would select from all of those other tables in addition to the one I'm after, and I'd like to avoid that if at all possible.</p>\n"}]