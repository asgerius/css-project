[{"tags": ["ruby", "regex", "bash", "perl", "sed"], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 4893168, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d673063365ec93cf01a14566622a6524?s=128&d=identicon&r=PG&f=1", "display_name": "Ken Harvey", "link": "https://stackoverflow.com/users/4893168/ken-harvey"}, "edited": false, "score": 0, "creation_date": 1435193466, "post_id": 31039211, "comment_id": 50102677, "body": "Precise, informative, and instructive for those of us just beginning, Thank you!"}], "tags": [], "owner": {"reputation": 729, "user_id": 3069115, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9220d416e46ec9b73cab61afbb26798b?s=128&d=identicon&r=PG&f=1", "display_name": "Tim Tom", "link": "https://stackoverflow.com/users/3069115/tim-tom"}, "is_accepted": true, "score": 2, "last_activity_date": 1435204224, "last_edit_date": 1435204224, "creation_date": 1435191077, "answer_id": 31039211, "question_id": 31039102, "link": "https://stackoverflow.com/questions/31039102/sed-or-perl-one-file-with-regex-instructions-one-instruction-per-line-execute/31039211#31039211", "title": "Sed or Perl: One file with regex instructions, one instruction per line, executed on another file", "body": "<p>The basic answer is that you need a semicolon after each line.</p>\n\n<p>Paraphrased from <a href=\"http://perldoc.perl.org/perlrun.html\" rel=\"nofollow\" title=\"perlrun\">perlrun</a>, <code>-p</code> reads all lines of input, runs the commands you specified, and then prints out the value in <code>$_</code> (the implicit variable you're running your substitute commands on in this script).</p>\n\n<p>So, removing the magic, <code>-p</code> transformed your code into:</p>\n\n<pre><code>LINE:\nwhile (&lt;&gt;) {\n    # regex.pl\n    s/^(?!Mr)/Ms./g\n    s/Ms./Mrs./g\n} continue {\n    print or die \"-p destination: $!\\n\";\n}\n</code></pre>\n\n<p>Perl requires a semicolon between statements (but a terminal semicolon at the end of a block is optional) hence the error.</p>\n\n<p>I personally would recommend writing the whole script above into the file instead of using <code>-p</code> because it is far less magical, but you're welcome to do it either way.</p>\n\n<p>If you were going to write the whole script, I would recommend something more like the following:</p>\n\n<pre><code>use strict;\nuse warnings;\n\nwhile ( my $line = &lt;ARGV&gt; ) {\n\n    $line =~ s/^(?!Mr)/Ms./g;\n    print \"After first subst: $line\";\n\n    $line =~ s/Ms./Mrs./g;\n    print \"After second subst: $line\";\n}\n</code></pre>\n\n<p><code>use strict</code> and <code>use warnings</code> are the boilerplate you want at the top of any perl script (to catch typos and other common mistakes) and explicitly calling the variable <code>$line</code> gives you a better understanding of how the script is working (<code>$_</code> is very magical for beginners and the source of many errors IMO, but great when you know what's what).</p>\n\n<p>If you're wondering about <code>&lt;&gt;</code> vs. <code>&lt;ARGV&gt;</code> they are the same thing and mean \"Read through all the lines of files provided as command-line arguments to this script or standard input if no files are provided\".\"</p>\n"}], "owner": {"reputation": 33, "user_id": 4893168, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d673063365ec93cf01a14566622a6524?s=128&d=identicon&r=PG&f=1", "display_name": "Ken Harvey", "link": "https://stackoverflow.com/users/4893168/ken-harvey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 95, "favorite_count": 0, "accepted_answer_id": 31039211, "answer_count": 1, "score": 2, "last_activity_date": 1435204224, "creation_date": 1435190235, "last_edit_date": 1435191209, "question_id": 31039102, "link": "https://stackoverflow.com/questions/31039102/sed-or-perl-one-file-with-regex-instructions-one-instruction-per-line-execute", "title": "Sed or Perl: One file with regex instructions, one instruction per line, executed on another file", "body": "<p>I'm setting up a regex learning environment purely in bash/tmux with a pane for the file containing a regex, a pane for a text-file-for-processing, and a pane for the bash shell. I'm at the start of \"<a href=\"http://ruby.bastardsbook.com/chapters/regexes/\" rel=\"nofollow\">The Bastards Book of Ruby</a>\"-regex chapter.</p>\n\n<p>The 'Bastard's Book' shows an example of a 'negative-lookahead' regex (perfect, lets learn), where perl is recommended over sed. As I'm going for a CLI approach-> Bash command: <code>$ perl -p file_with_regex.pl test.txt</code>\n(This prints the lines from test.txt with the intended substitutions)</p>\n\n<p>Question: How would I add a second regex (on a new line) of the regex.pl file, and have perl execute both the first <strong>and</strong> (next) this second instruction for processing the text file? </p>\n\n<pre><code>    # regex.pl\n    s/^(?!Mr)/Ms./g\n    s/Ms./Mrs./g\n</code></pre>\n\n<p>(Adding the second regex results in \"Execution of regex.pl aborted due to compilation errors.\")</p>\n\n<p>The overall aim here is to progress in Ruby, while testing Regular Expressions as concisely as possible. Picking up a bare minimum of sed/perl while doing so would be a plus, as a proper dive into perl would take time from Ruby (and when it's time for the perl dive, I'll have had some time with the basics). <em>The more I look at this the more it seems necessary to just do it in Ruby, if there isn't a perl switch that would enable a command-line-with-files approach.</em></p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 12557, "user_id": 1270789, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/FXwoB.png?s=128&g=1", "display_name": "Ken Y-N", "link": "https://stackoverflow.com/users/1270789/ken-y-n"}, "edited": false, "score": 2, "creation_date": 1435190219, "post_id": 31039018, "comment_id": 50101892, "body": "I recommend you use an editor with syntax colouring - I can see the problem here on Stack Overflow due to its colouring: <code>print &quot;What movie would you like to update?</code> is missing a closing quote."}], "answers": [{"comments": [{"owner": {"reputation": 348, "user_id": 5046696, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/xi6xI.jpg?s=128&g=1", "display_name": "cpppatrick", "link": "https://stackoverflow.com/users/5046696/cpppatrick"}, "edited": false, "score": 0, "creation_date": 1435191430, "post_id": 31039057, "comment_id": 50102189, "body": "That&#39;s embarrassing. Thank you very much."}, {"owner": {"reputation": 2944, "user_id": 5014959, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/0452d1509d5759ec646b4638b4af6eb4?s=128&d=identicon&r=PG&f=1", "display_name": "Alp", "link": "https://stackoverflow.com/users/5014959/alp"}, "reply_to_user": {"reputation": 348, "user_id": 5046696, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/xi6xI.jpg?s=128&g=1", "display_name": "cpppatrick", "link": "https://stackoverflow.com/users/5046696/cpppatrick"}, "edited": false, "score": 0, "creation_date": 1435191575, "post_id": 31039057, "comment_id": 50102226, "body": "I have a bad news for you: You are not perfect.! =D (and here is a hint: nobody is as we all make mistakes =] ). Glad I could help. Cheers."}], "tags": [], "owner": {"reputation": 2944, "user_id": 5014959, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/0452d1509d5759ec646b4638b4af6eb4?s=128&d=identicon&r=PG&f=1", "display_name": "Alp", "link": "https://stackoverflow.com/users/5014959/alp"}, "is_accepted": true, "score": 2, "last_activity_date": 1435189981, "creation_date": 1435189981, "answer_id": 31039057, "question_id": 31039018, "link": "https://stackoverflow.com/questions/31039018/codecademy-ruby-programming-a-night-at-the-movies/31039057#31039057", "title": "Codecademy Ruby Programming A Night at the Movies", "body": "<p>Three lines above, you forgot to close a string literal. Add a \" there.</p>\n\n<p>Change</p>\n\n<pre><code> print \"What movie would you like to update?\n</code></pre>\n\n<p>to</p>\n\n<pre><code> print \"What movie would you like to update?\"\n</code></pre>\n"}], "owner": {"reputation": 348, "user_id": 5046696, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/xi6xI.jpg?s=128&g=1", "display_name": "cpppatrick", "link": "https://stackoverflow.com/users/5046696/cpppatrick"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1004, "favorite_count": 0, "accepted_answer_id": 31039057, "answer_count": 1, "score": 0, "last_activity_date": 1435191057, "creation_date": 1435189750, "last_edit_date": 1435191057, "question_id": 31039018, "link": "https://stackoverflow.com/questions/31039018/codecademy-ruby-programming-a-night-at-the-movies", "title": "Codecademy Ruby Programming A Night at the Movies", "body": "<p>I'm learning how to code in Ruby from the Codecademy website. I'm having trouble getting my code to execute. I've been working on the \"update\" branch of the case statement.</p>\n\n<pre><code>movies = {\noceansEleven: 4.5\n}\n\nputs \"Would you like to Add, Update, Display or Delete?\"\nchoice = gets.chomp\n\ncase choice\nwhen \"add\"\n    print \"What movie would you like to add\"\n    title = gets.chomp\nif movies[title.to_sym].nil?\n    print \"How would you rate this movie? (1-5)\"\n    rating = gets.chomp\n        movies[title.to_sym] = rating.to_i\n    puts \"#{title} has been added with a #{rating} rating.\"\nelse\n    puts \"That movie already exists! It's rating is #{rating}\"\nend\nwhen \"update\"\n    print \"What movie would you like to update?\n    title = gets.chomp\n    if movies[title].nil?\n        puts \"Movie not found!\"\nelse\n    puts \"What is your new rating for the movie? (1-5)\"\n    rating = gets.chomp\n    movies[title.to_sym] = rating.to_i\n    puts \"#{title} has been updated with a #{rating} rating.\"\nend\nwhen \"display\"\n    puts \"Movies\"\nwhen \"delete\"\n    puts \"Deleted!\"\nelse\n    puts \"Error!\"\nend\n</code></pre>\n\n<p>Here are the error messages that I'm receiving:</p>\n\n<pre><code>(ruby):23: syntax error, unexpected tCONSTANT, expecting keyword_end\n    puts \"Movie not found!\"\n               ^\n(ruby):25: syntax error, unexpected tCONSTANT, expecting $end\nputs \"What is your new rating for the movie? (1-5)\"\n</code></pre>\n"}, {"tags": ["ruby", "rspec"], "comments": [{"owner": {"reputation": 18773, "user_id": 91830, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2505b282d57c29be797dc35b245adb4c?s=128&d=identicon&r=PG", "display_name": "Philip Hallstrom", "link": "https://stackoverflow.com/users/91830/philip-hallstrom"}, "edited": false, "score": 0, "creation_date": 1435190024, "post_id": 31038994, "comment_id": 50101850, "body": "Must be somewhere in your environment. Start picking through your dot files and ENV vars looking for the culprit."}], "answers": [{"comments": [{"owner": {"reputation": 15, "user_id": 5046614, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/36bfd65b258cb5dd3825f74ff77edd8e?s=128&d=identicon&r=PG&f=1", "display_name": "Leigh", "link": "https://stackoverflow.com/users/5046614/leigh"}, "edited": false, "score": 0, "creation_date": 1435193206, "post_id": 31039386, "comment_id": 50102617, "body": "Thanks for your reply, Aaron. I&#39;ve done the &quot;forgot to save&quot; thing at least twice! But in this case I did save. Also SPEC_OPTS is not set and there are no command line switches, just the bare &#39;rspec&#39; command. Rspec is in the correct gemset and it&#39;s not aliased."}, {"owner": {"reputation": 6498, "user_id": 47438, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/27a7b65804bca13793acd4b67fa32d83?s=128&d=identicon&r=PG", "display_name": "Aaron K", "link": "https://stackoverflow.com/users/47438/aaron-k"}, "reply_to_user": {"reputation": 15, "user_id": 5046614, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/36bfd65b258cb5dd3825f74ff77edd8e?s=128&d=identicon&r=PG&f=1", "display_name": "Leigh", "link": "https://stackoverflow.com/users/5046614/leigh"}, "edited": false, "score": 0, "creation_date": 1435197199, "post_id": 31039386, "comment_id": 50103479, "body": "Added a short script to help trace things down."}], "tags": [], "owner": {"reputation": 6498, "user_id": 47438, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/27a7b65804bca13793acd4b67fa32d83?s=128&d=identicon&r=PG", "display_name": "Aaron K", "link": "https://stackoverflow.com/users/47438/aaron-k"}, "is_accepted": true, "score": 1, "last_activity_date": 1435363709, "last_edit_date": 1435363709, "creation_date": 1435192642, "answer_id": 31039386, "question_id": 31038994, "link": "https://stackoverflow.com/questions/31038994/rspec-in-non-rails-project-is-looking-for-rails-helper-why/31039386#31039386", "title": "RSpec in Non-Rails Project is Looking for rails_helper -- Why?", "body": "<p>RSpec has <a href=\"https://www.relishapp.com/rspec/rspec-core/v/3-3/docs/configuration/read-command-line-configuration-options-from-files\" rel=\"nofollow\">several locations</a> it aggregates the options from (listed in lowest to highest precedence):</p>\n\n<ul>\n<li><code>~/.rspec</code></li>\n<li><code>.rspec</code></li>\n<li><code>.rspec-local</code></li>\n<li>command line switches</li>\n<li><code>SPEC_OPTS</code> environment variable</li>\n</ul>\n\n<p>I would double check all of those. It may seem silly but be sure your <code>~/.rspec</code> file has been saved; done this one to myself too many times. Also, stop any pre-loaders such as spring, guard, and spork. I would also check to make sure you didn't accidentally alias <code>rspec</code> with something else (i.e. check <code>which rspec</code> and <code>alias | grep rspec</code>).</p>\n\n<p>If all that fails, you can peek into RSpec's internals (this is specific to your current version, but may work for others). Add the following to a file in your project for example: <code>trace_opts.rb</code></p>\n\n<pre><code>require 'rspec/core'\nmodule TraceOpts\n  def self.trace_options(opt)\n    name = opt.to_s.split('_').map(&amp;:capitalize).join(' ')\n    define_method(opt) do |*args, &amp;block|\n      super(*args, &amp;block) { |opts| puts \"#{name}: #{opts}\" }\n    end\n  end\n\n  def self.trace_file(opt)\n    name = opt.to_s.split('_').map(&amp;:capitalize).join(' ')\n    define_method(opt) do |*args, &amp;block|\n      super(*args, &amp;block).tap { |opts|\n        opts = opts ? File.expand_path(opts) : \"No File Specified\"\n        puts \"#{name}: #{opts}\"\n      }\n    end\n  end\n\n  trace_options :env_options\n  trace_options :command_line_options\n  trace_options :custom_options\n  trace_options :local_options\n  trace_options :project_options\n  trace_options :global_options\n\n  trace_file :custom_options_file\n  trace_file :project_options_file\n  trace_file :local_options_file\n  trace_file :global_options_file\nend\nRSpec::Core::ConfigurationOptions.prepend(TraceOpts)\nRSpec::Core::Runner.invoke\n</code></pre>\n\n<p>Then run it with <code>ruby trace_opts.rb</code> and it should show you where things are being loaded from.</p>\n\n<p><strong>EDIT:</strong> The option files that RSpec reads are parsed as <a href=\"http://ruby-doc.org/stdlib-2.2.2/libdoc/erb/rdoc/ERB.html\" rel=\"nofollow\">ERB</a> files. They are then fed through <a href=\"http://ruby-doc.org/stdlib-2.2.1/libdoc/optparse/rdoc/OptionParser.html\" rel=\"nofollow\"><code>OptionParser</code></a>. Setting can be ignored at the ERB parsing level by using the ERB comment:</p>\n\n<pre><code>&lt;%# --require rails_helper %&gt;\n</code></pre>\n\n<p>When the line is commented out with plain Ruby <code>#</code> it is provided to the option parser. Depending where in the order this occurs can have an affect on what the option parser does. In the few permutations I tried the commented option was included as part of the <code>files_or_directories_to_run</code>. The RSpec configuration code removes that particular option before proceeding.</p>\n"}, {"tags": [], "owner": {"reputation": 15, "user_id": 5046614, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/36bfd65b258cb5dd3825f74ff77edd8e?s=128&d=identicon&r=PG&f=1", "display_name": "Leigh", "link": "https://stackoverflow.com/users/5046614/leigh"}, "is_accepted": false, "score": 0, "last_activity_date": 1435202432, "creation_date": 1435202432, "answer_id": 31040649, "question_id": 31038994, "link": "https://stackoverflow.com/questions/31038994/rspec-in-non-rails-project-is-looking-for-rails-helper-why/31040649#31040649", "title": "RSpec in Non-Rails Project is Looking for rails_helper -- Why?", "body": "<p>I now know that the # mark is NOT a comment indicator in the .rspec file!</p>\n\n<p>It showed that ~/.rspec was including rails_helper when I thought the # made it invisible. Removing \"#--require rails_helper\" did the trick!</p>\n\n<p>Thanks for the script, Aaron, and for taking the time to help out!</p>\n\n<p>**Leigh</p>\n"}], "owner": {"reputation": 15, "user_id": 5046614, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/36bfd65b258cb5dd3825f74ff77edd8e?s=128&d=identicon&r=PG&f=1", "display_name": "Leigh", "link": "https://stackoverflow.com/users/5046614/leigh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 194, "favorite_count": 0, "accepted_answer_id": 31039386, "answer_count": 2, "score": 1, "last_activity_date": 1435363709, "creation_date": 1435189593, "question_id": 31038994, "link": "https://stackoverflow.com/questions/31038994/rspec-in-non-rails-project-is-looking-for-rails-helper-why", "title": "RSpec in Non-Rails Project is Looking for rails_helper -- Why?", "body": "<p>I'm trying to do the \"hello rspec\" example from \"The RSpec Book\" and rspec complains it can't find \"rails_helper\". It doesn't complain in directories containg rails apps with rspec installed in the app-specific gemset. Rails is not installed in either of the gemsets in the rvm GEM_PATH for hello.</p>\n\n<p>I set up the hello directory with: rspec --init.</p>\n\n<p>I'm puzzled because this is not a Ruby On Rails project. I can't figure out where rspec is being told to require rails_helper. I'd appreciate any suggestions. Thanks!</p>\n\n<p>**Leigh</p>\n\n<pre><code>  Mingus:hello $ rspec\n    /Users/leigh/.rvm/rubies/ruby-2.2.1/lib/ruby/site_ruby/2.2.0/rubygems/core_ext/kernel_require.rb:54:in `require': cannot load such file -- rails_helper (LoadError)\n        from /Users/leigh/.rvm/rubies/ruby-2.2.1/lib/ruby/site_ruby/2.2.0/rubygems/core_ext/kernel_require.rb:54:in `require'\n        from /Users/leigh/.rvm/gems/ruby-2.2.1@rspec-hello/gems/rspec-core-3.3.1/lib/rspec/core/configuration.rb:1283:in `block in requires='\n        from /Users/leigh/.rvm/gems/ruby-2.2.1@rspec-hello/gems/rspec-core-3.3.1/lib/rspec/core/configuration.rb:1283:in `each'\n        from /Users/leigh/.rvm/gems/ruby-2.2.1@rspec-hello/gems/rspec-core-3.3.1/lib/rspec/core/configuration.rb:1283:in `requires='\n        from /Users/leigh/.rvm/gems/ruby-2.2.1@rspec-hello/gems/rspec-core-3.3.1/lib/rspec/core/configuration_options.rb:109:in `block in process_options_into'\n        from /Users/leigh/.rvm/gems/ruby-2.2.1@rspec-hello/gems/rspec-core-3.3.1/lib/rspec/core/configuration_options.rb:108:in `each'\n        from /Users/leigh/.rvm/gems/ruby-2.2.1@rspec-hello/gems/rspec-core-3.3.1/lib/rspec/core/configuration_options.rb:108:in `process_options_into'\n        from /Users/leigh/.rvm/gems/ruby-2.2.1@rspec-hello/gems/rspec-core-3.3.1/lib/rspec/core/configuration_options.rb:21:in `configure'\n        from /Users/leigh/.rvm/gems/ruby-2.2.1@rspec-hello/gems/rspec-core-3.3.1/lib/rspec/core/runner.rb:101:in `setup'\n        from /Users/leigh/.rvm/gems/ruby-2.2.1@rspec-hello/gems/rspec-core-3.3.1/lib/rspec/core/runner.rb:88:in `run'\n        from /Users/leigh/.rvm/gems/ruby-2.2.1@rspec-hello/gems/rspec-core-3.3.1/lib/rspec/core/runner.rb:73:in `run'\n        from /Users/leigh/.rvm/gems/ruby-2.2.1@rspec-hello/gems/rspec-core-3.3.1/lib/rspec/core/runner.rb:41:in `invoke'\n        from /Users/leigh/.rvm/gems/ruby-2.2.1@rspec-hello/gems/rspec-core-3.3.1/exe/rspec:4:in `&lt;top (required)&gt;'\n        from /Users/leigh/.rvm/gems/ruby-2.2.1@rspec-hello/bin/rspec:23:in `load'\n        from /Users/leigh/.rvm/gems/ruby-2.2.1@rspec-hello/bin/rspec:23:in `&lt;main&gt;'\n        from /Users/leigh/.rvm/gems/ruby-2.2.1@rspec-hello/bin/ruby_executable_hooks:15:in `eval'\n        from /Users/leigh/.rvm/gems/ruby-2.2.1@rspec-hello/bin/ruby_executable_hooks:15:in `&lt;main&gt;'\n</code></pre>\n\n<p>Here are the path vars from /Users/leigh/.rvm/gems/ruby-2.2.1@rspec-hello/gems/rspec-core-3.3.1/lib/rspec/core/configuration.rb:1283:in `block in requires='</p>\n\n<pre><code>  # @private\n  def requires=(paths)\n    directories = ['lib', default_path].select { |p| File.directory? p }\n    RSpec::Core::RubyProject.add_to_load_path(*directories)\n    STDERR.puts \"paths  ------&gt;&gt;   #{paths}\"\n    STDERR.puts \"default_path  ------&gt;&gt;   #{default_path}\"\n    STDERR.puts \"$LOAD_PATH  ------&gt;&gt;   #{$LOAD_PATH}\"\n    paths.each { |path| require path }\n    @requires += paths\n  end\n\n  paths  ------&gt;&gt;   [\"spec_helper\", \"rails_helper\", \"spec_helper\"]\n  default_path  ------&gt;&gt;   spec\n  $LOAD_PATH:\n  /Users/leigh/Programming/wapp_dev/hello/spec\n  /Users/leigh/.rvm/gems/ruby-2.2.1@global/gems/executable-hooks-1.3.2/lib\n  /Users/leigh/.rvm/gems/ruby-2.2.1@global/extensions/x86_64-darwin-14/2.2.0-static/executable-hooks-1.3.2\n  /Users/leigh/.rvm/gems/ruby-2.2.1@global/gems/bundler-unload-1.0.2/lib\n  /Users/leigh/.rvm/gems/ruby-2.2.1@global/gems/rubygems-bundler-1.4.4/lib\n  /Users/leigh/.rvm/gems/ruby-2.2.1@global/gems/bundler-1.10.3/lib\n  /Users/leigh/.rvm/gems/ruby-2.2.1@rspec-hello/gems/rspec-support-3.3.0/lib\n  /Users/leigh/.rvm/gems/ruby-2.2.1@rspec-hello/gems/rspec-core-3.3.1/lib\n  /Users/leigh/.rvm/rubies/ruby-2.2.1/lib/ruby/site_ruby/2.2.0\n  /Users/leigh/.rvm/rubies/ruby-2.2.1/lib/ruby/site_ruby/2.2.0/x86_64-darwin14\n  /Users/leigh/.rvm/rubies/ruby-2.2.1/lib/ruby/site_ruby\n  /Users/leigh/.rvm/rubies/ruby-2.2.1/lib/ruby/vendor_ruby/2.2.0\n  /Users/leigh/.rvm/rubies/ruby-2.2.1/lib/ruby/vendor_ruby/2.2.0/x86_64-darwin14\n  /Users/leigh/.rvm/rubies/ruby-2.2.1/lib/ruby/vendor_ruby\n  /Users/leigh/.rvm/rubies/ruby-2.2.1/lib/ruby/2.2.0\n  /Users/leigh/.rvm/rubies/ruby-2.2.1/lib/ruby/2.2.0/x86_64-darwin14\n</code></pre>\n\n<pre>\n~/.rspec:\n    --color\n    --format documentation\n    --require spec_helper\n    #--require rails_helper\n</pre>\n\n<pre>\nhello/.rspec:\n    --color\n    --require spec_helper\n</pre>\n\n<pre>\nhello/greeter_spec.rb:\n  describe \"RSpec Greeter\" do\n    it \"should say 'Hello RSpec!' when it receives the greet() message\" do\n      greeter = RSpecGreeter.new\n      greeting = greeter.greet\n      greeting.should == \"Hello RSpec!\"\n    end\n  end\n</pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "rake", "rake-task"], "comments": [{"owner": {"reputation": 6604, "user_id": 1331774, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vYiV5.png?s=128&g=1", "display_name": "ifyouseewendy", "link": "https://stackoverflow.com/users/1331774/ifyouseewendy"}, "edited": false, "score": 0, "creation_date": 1435230456, "post_id": 31038804, "comment_id": 50118511, "body": "Not quite understand. You want to catch the Ruby rake ouput, and display it in activeadmin?"}, {"owner": {"reputation": 13, "user_id": 2367043, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/6488290a4b1abc87fc353dfa0ce86221?s=128&d=identicon&r=PG", "display_name": "Oscar", "link": "https://stackoverflow.com/users/2367043/oscar"}, "reply_to_user": {"reputation": 6604, "user_id": 1331774, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vYiV5.png?s=128&g=1", "display_name": "ifyouseewendy", "link": "https://stackoverflow.com/users/1331774/ifyouseewendy"}, "edited": false, "score": 0, "creation_date": 1441012078, "post_id": 31038804, "comment_id": 52490566, "body": "yes I want to do this"}], "owner": {"reputation": 13, "user_id": 2367043, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/6488290a4b1abc87fc353dfa0ce86221?s=128&d=identicon&r=PG", "display_name": "Oscar", "link": "https://stackoverflow.com/users/2367043/oscar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 116, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1435317270, "creation_date": 1435188357, "question_id": 31038804, "link": "https://stackoverflow.com/questions/31038804/how-to-stream-output-of-system-process-in-ruby-rake-task", "title": "How to stream output of system process in Ruby rake task?", "body": "<p>I have a ruby rake task programated to run every night. And I want to enter to my activeadmin and see the result from this task and also run it manually.</p>\n"}, {"tags": ["ruby-on-rails", "arrays", "ruby", "activerecord"], "answers": [{"tags": [], "owner": {"reputation": 39050, "user_id": 2336231, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/d7kOQ.jpg?s=128&g=1", "display_name": "BroiSatse", "link": "https://stackoverflow.com/users/2336231/broisatse"}, "is_accepted": true, "score": 2, "last_activity_date": 1435190016, "last_edit_date": 1435190016, "creation_date": 1435189623, "answer_id": 31038997, "question_id": 31038752, "link": "https://stackoverflow.com/questions/31038752/create-an-array-from-database-rails/31038997#31038997", "title": "Create an array from database rails", "body": "<p>Much simpler:</p>\n\n<pre><code>@users = User.find(Appointment.where(event_id: &lt;id&gt;).pluck(:id))\n</code></pre>\n\n<p>Your code does not work as you misunderstood what method <code>fill</code> does - it substitutes all elements of the array with passed object (pretty much like this, might take some extra params to alter its behaviour a little bit). You were most liekly looking for <code>push</code> or <code>unshift</code> methods.</p>\n\n<h2>Much better solution</h2>\n\n<p>If I am correct, your associations most likely looks like this:</p>\n\n<pre><code>Event has_many :appointments\nAppointment belongs_to :user\n</code></pre>\n\n<p>n that case, you can simply create has_many :through association:</p>\n\n<pre><code>class Event &lt; ActiveRecord::Base\n  has_many :appointments\n  has_many :users, through: :appointments\nend\n</code></pre>\n\n<p>Then your query is just:</p>\n\n<pre><code>Event.find(&lt;id&gt;).users\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 12345, "user_id": 429758, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/ff984622cd3a9ca31bd0e7e034fc8b17?s=128&d=identicon&r=PG", "display_name": "Prakash Murthy", "link": "https://stackoverflow.com/users/429758/prakash-murthy"}, "is_accepted": false, "score": 0, "last_activity_date": 1435189947, "last_edit_date": 1435189947, "creation_date": 1435189736, "answer_id": 31039016, "question_id": 31038752, "link": "https://stackoverflow.com/questions/31038752/create-an-array-from-database-rails/31039016#31039016", "title": "Create an array from database rails", "body": "<pre><code>@users = Appointment.includes(:user).where(:event_id =&gt; &lt;id&gt;).map(&amp;:user) \n</code></pre>\n\n<p>should work, assuming you have the <code>User has_many :appointments</code> &amp; <code>Appointments belongs_to :user</code> associations setup.</p>\n"}], "owner": {"reputation": 25, "user_id": 5000665, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-aehkvcysFLw/AAAAAAAAAAI/AAAAAAAAAJc/Mo_ExGu0FVw/photo.jpg?sz=128", "display_name": "Carlos Valls", "link": "https://stackoverflow.com/users/5000665/carlos-valls"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "accepted_answer_id": 31038997, "answer_count": 2, "score": 1, "last_activity_date": 1435190016, "creation_date": 1435188039, "last_edit_date": 1435188982, "question_id": 31038752, "link": "https://stackoverflow.com/questions/31038752/create-an-array-from-database-rails", "title": "Create an array from database rails", "body": "<p>i need help with the following topic:</p>\n\n<p>I'm trying to create an array of users based on their ids </p>\n\n<pre><code>  def show\n    @appointment = Appointment.where(:event_id =&gt; :id).all\n    @users = Array.new\n    @appointment.each do |appointment|\n      @users.fill(User.find(appointment.user_id))\n    end\n\n  end\n</code></pre>\n\n<p>First, im getting all appointments which event_id are the same to :id (which comes from the Event table) . Then i proceed to create an array to be filled later with users inside the .each do expression.</p>\n\n<p>The problem is that @users is empty after the expresion ends.</p>\n\n<p>What am i doing wrong?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "heroku", "timeout", "puma"], "comments": [{"owner": {"reputation": 1813, "user_id": 516450, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a366b7dc44d166da3ca966111f04b3a8?s=128&d=identicon&r=PG", "display_name": "Pablo B.", "link": "https://stackoverflow.com/users/516450/pablo-b"}, "edited": false, "score": 0, "creation_date": 1441145729, "post_id": 31038740, "comment_id": 52558005, "body": "I&#39;m facing the exact same issue but on a dedicated server. I&#39;m also running puma, so it may be related to the web server and not to Heroku."}, {"owner": {"reputation": 1196, "user_id": 454360, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/6cf21cecc8224e5ba0f4b37d071688e1?s=128&d=identicon&r=PG&f=1", "display_name": "brahmana", "link": "https://stackoverflow.com/users/454360/brahmana"}, "reply_to_user": {"reputation": 1813, "user_id": 516450, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a366b7dc44d166da3ca966111f04b3a8?s=128&d=identicon&r=PG", "display_name": "Pablo B.", "link": "https://stackoverflow.com/users/516450/pablo-b"}, "edited": false, "score": 2, "creation_date": 1441294244, "post_id": 31038740, "comment_id": 52630137, "body": "@PabloB. In my case it was an issue with the external service itself. Neither Heroku nor Puma is at fault here. When I was trying it from the heroku console, I was not going through the same code path at the service side which made it appear that the calls are going through. In your case, try extensive logging to figure what is different when the external request is made from the console and your server process. That will tell you where the problem is. Happy to help if you have more questions."}], "owner": {"reputation": 1196, "user_id": 454360, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/6cf21cecc8224e5ba0f4b37d071688e1?s=128&d=identicon&r=PG&f=1", "display_name": "brahmana", "link": "https://stackoverflow.com/users/454360/brahmana"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 273, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1435187950, "creation_date": 1435187950, "question_id": 31038740, "link": "https://stackoverflow.com/questions/31038740/request-to-external-service-times-out-on-heroku-web-process-but-works-in-console", "title": "Request to external service times out on Heroku web process but works in console process", "body": "<p>I have a Rails 4 application running on Heroku. For one type of request I make a HTTP call to an external service and then return the response to the client.</p>\n\n<p>As I see from the logs, the request to the external service is taking too long and resulting in the Heroku's H12 error where it sends a 503 after 30 seconds. The HTTP request that I am making to the external service eventually comes back with a Net::ReadTimeout after some more time (60 seconds).</p>\n\n<p>However if I run <code>heroku run console</code> and make the same HTTP call (through the same Ruby code), it works just fine. The request completes in about a second or two at the max.</p>\n\n<p>I am unable to understand why this request is timing out when run from the web process while it works seamlessly in the <code>heroku run console</code>.</p>\n\n<p>I am running Puma as my webserver. I followed guidelines given here : <a href=\"https://devcenter.heroku.com/articles/deploying-rails-applications-with-the-puma-web-server\" rel=\"nofollow\">https://devcenter.heroku.com/articles/deploying-rails-applications-with-the-puma-web-server</a>\nI also tried the basic WEBrick server to see if that helps. But no avail.</p>\n\n<p>Has anyone faced this issue? Any hints on how to debug this?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1435194977, "post_id": 31038676, "comment_id": 50102995, "body": "Well, Perl is a different language than Ruby, the fact that it works in Perl means exactly nothing. There are plenty of things which work in plenty of languages which don&#39;t work in Ruby. For example, in Smalltalk, an array literal is written like this <code>#(1 2 3 4)</code>, but that won&#39;t work in Ruby."}], "answers": [{"comments": [{"owner": {"reputation": 11922, "user_id": 765271, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/t2IUe.jpg?s=128&g=1", "display_name": "Nasser", "link": "https://stackoverflow.com/users/765271/nasser"}, "edited": false, "score": 0, "creation_date": 1435189927, "post_id": 31038820, "comment_id": 50101819, "body": "The syntax I used is actually valid, at least for Perl it was. Hence I assumed it will work with Ruby. What you show is just one other way to do it, but it should have worked as well as I showed and I do not see why it did not. I&#39;ll update my question showing the Perl code."}, {"owner": {"reputation": 4127, "user_id": 4231385, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d89a541a4609cafea3957e4cdfcca50f?s=128&d=identicon&r=PG&f=1", "display_name": "cremno", "link": "https://stackoverflow.com/users/4231385/cremno"}, "reply_to_user": {"reputation": 11922, "user_id": 765271, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/t2IUe.jpg?s=128&g=1", "display_name": "Nasser", "link": "https://stackoverflow.com/users/765271/nasser"}, "edited": false, "score": 0, "creation_date": 1435190864, "post_id": 31038820, "comment_id": 50102049, "body": "@Nasser: Ruby just doesn&#39;t like the newline before the comma unlike Perl (in general, so this isn&#39;t some special case for arrays). You could also write it like this: <a href=\"https://eval.in/private/4a9bda6aef9b5a\" rel=\"nofollow noreferrer\">eval.in/private/4a9bda6aef9b5a</a>"}, {"owner": {"reputation": 4127, "user_id": 4231385, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d89a541a4609cafea3957e4cdfcca50f?s=128&d=identicon&r=PG&f=1", "display_name": "cremno", "link": "https://stackoverflow.com/users/4231385/cremno"}, "reply_to_user": {"reputation": 11922, "user_id": 765271, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/t2IUe.jpg?s=128&g=1", "display_name": "Nasser", "link": "https://stackoverflow.com/users/765271/nasser"}, "edited": false, "score": 0, "creation_date": 1435191532, "post_id": 31038820, "comment_id": 50102214, "body": "@Nasser: No, see the program output.  Maybe you didn&#39;t spot the comma, did you? Yes, it likely looks weird but its placement is necessary in Ruby (because of the newline) however it also works in Perl: <a href=\"https://eval.in/private/5a9491a129a3bc\" rel=\"nofollow noreferrer\">eval.in/private/5a9491a129a3bc</a>"}, {"owner": {"reputation": 11922, "user_id": 765271, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/t2IUe.jpg?s=128&g=1", "display_name": "Nasser", "link": "https://stackoverflow.com/users/765271/nasser"}, "reply_to_user": {"reputation": 4127, "user_id": 4231385, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d89a541a4609cafea3957e4cdfcca50f?s=128&d=identicon&r=PG&f=1", "display_name": "cremno", "link": "https://stackoverflow.com/users/4231385/cremno"}, "edited": false, "score": 0, "creation_date": 1435191937, "post_id": 31038820, "comment_id": 50102312, "body": "@cremno sorry, I overlooked at the output, I was just looking at code (too many things on my screen). Yes, it works! Why not post this as answer and I will upvote it also. thanks. (it is little strange that it worked without &quot;,&quot; in the middle, but may be this is Ruby&#39;s way)"}], "tags": [], "owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "is_accepted": true, "score": 2, "last_activity_date": 1435188458, "creation_date": 1435188458, "answer_id": 31038820, "question_id": 31038676, "link": "https://stackoverflow.com/questions/31038676/error-when-having-two-here-documents-in-a-list-how-to-resolve/31038820#31038820", "title": "Error when having two HERE-DOCUMENTS in a list, how to resolve", "body": "<pre><code>$data = [\n&lt;&lt;'EOT1', &lt;&lt;'EOT2'\nmore text\nEOT1\nand more\nEOT2\n]\n</code></pre>\n\n<p>Your heredoc markers are simply in the wrong place.</p>\n"}], "owner": {"reputation": 11922, "user_id": 765271, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/t2IUe.jpg?s=128&g=1", "display_name": "Nasser", "link": "https://stackoverflow.com/users/765271/nasser"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 29, "favorite_count": 0, "accepted_answer_id": 31038820, "answer_count": 1, "score": 1, "last_activity_date": 1435190124, "creation_date": 1435187548, "last_edit_date": 1435190124, "question_id": 31038676, "link": "https://stackoverflow.com/questions/31038676/error-when-having-two-here-documents-in-a-list-how-to-resolve", "title": "Error when having two HERE-DOCUMENTS in a list, how to resolve", "body": "<p>I found I get an error when I have two HERE-DOCUMENTS inside one list. I'd like to ask how to resolve this. Here is a MWE</p>\n\n<pre><code>#!/usr/local/bin/ruby -w\n$data=[\n&lt;&lt;'EOT'        \nmore text\nEOT\n        ,\n&lt;&lt;'EOT'        \nand more\nEOT\n]\nputs $data\n</code></pre>\n\n<p>The error is</p>\n\n<pre><code>&gt;./t9.rb \n./t9.rb:6: syntax error, unexpected ',', expecting ']'\n        ,\n         ^\n./t9.rb:7: warning: possibly useless use of a literal in void context\n./t9.rb:10: syntax error, unexpected ']', expecting end-of-input\n</code></pre>\n\n<p>When using <code>%q{</code> instead of <code>EOT</code> the error goes away (even though I would have expected the semantics to be the same as above example):</p>\n\n<pre><code>#!/usr/local/bin/ruby -w\n$data=[\n%q{more text},\n%q{and more}\n]\nputs $data\n</code></pre>\n\n<p>And using <code>EOT</code> in separate list entries works (i.e. list of lists)</p>\n\n<pre><code>#!/usr/local/bin/ruby -w\n$data=[[\n&lt;&lt;'EOT'\nmore text\nEOT\n      ],\n      [\n&lt;&lt;'EOT'\nand more\nEOT\n      ]]\n\nputs $data\n</code></pre>\n\n<p>No error.</p>\n\n<p>So the problem is <em>only</em> where more than one <code>EOT</code> is inside the same list entry. Why does this cause a problem?</p>\n\n<pre><code>&gt;ruby -v\nruby 2.2.2p95 (2015-04-13 revision 50295) [i686-linux]\n</code></pre>\n\n<p>When trying these example, make sure the <code>EOT</code> is flushed all the way to the let and that there is no spaces after it on the same line.</p>\n\n<p><strong>Update</strong></p>\n\n<p>For reference, the syntax I used in first example above works in perl</p>\n\n<pre><code>&gt;perl -v\n\nThis is perl 5, version 18, subversion 2 (v5.18.2) built for \ni686-linux-gnu-thread-multi-64int\n</code></pre>\n\n<p>The script is</p>\n\n<pre><code>&gt;cat t10.pl\n#!/usr/bin/perl -w\nuse strict;\nuse warnings;\n\nmy @data = (\n&lt;&lt;'EOT'\nfirst line\nEOT\n     ,\n&lt;&lt;'EOT'\nsecond line\nEOT\n);\n\nprint @data\n</code></pre>\n\n<p>Running it</p>\n\n<pre><code>&gt;./t10.pl \nfirst line\nsecond line\n&gt;\n</code></pre>\n\n<p>So it works with Perl, that is why I expected it to work in Ruby.</p>\n"}, {"tags": ["ruby", "grouping", "tf-idf"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 1, "creation_date": 1435188020, "post_id": 31038333, "comment_id": 50101328, "body": "Welcome to Stack Overflow. We&#39;d like to see your code attempt, and specific questions regarding your attempt to solve the problem rather than us generate a shotgun pattern of ideas for you."}], "answers": [{"tags": [], "owner": {"reputation": 16402, "user_id": 4025095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/blJ4L.jpg?s=128&g=1", "display_name": "Myst", "link": "https://stackoverflow.com/users/4025095/myst"}, "is_accepted": false, "score": 0, "last_activity_date": 1435289380, "last_edit_date": 1435289380, "creation_date": 1435190324, "answer_id": 31039118, "question_id": 31038333, "link": "https://stackoverflow.com/questions/31038333/how-can-i-group-words-based-on-how-often-they-are-used-in-the-same-sentence/31039118#31039118", "title": "How can I group words based on how often they are used in the same sentence?", "body": "<p>I liked the puzzle and here is my take on a possible solution*...</p>\n\n<p><em>* although, I would recommend that next time you don't just throw your question without showing what you tried and where you're stuck ... Otherwise, it might seem that you're throwing your class homework at us...</em></p>\n\n<p>Let's assume this is our text:</p>\n\n<pre><code>text = 'This is a sentence about pink killer cats chasing madonna.\n        Sometimes when whales fight bricklayers, everyone drinks champaigne.\n        You know Madonna has little cats on her slippers.\n        When whales drink whiskey, your golf game is over.'\n</code></pre>\n\n<p>Seems to me that there are a number of stages to the tasks at hand...</p>\n\n<ol>\n<li><p>Create a \"words\" catalog.</p></li>\n<li><p>Count how many times each word appears in the text.</p>\n\n<pre><code>require 'strscan'\nwords = {}\nscn = StringScanner.new(text.downcase)\n( words[scn.matched] =  words[scn.matched].to_i + 1 if scn.scan(/[\\w]*/) ) while (scn.skip(/[^\\w]*/) &gt; 0) || !scn.eos?\n</code></pre></li>\n<li><p>Remove any word that appears only once - it's irrelevant.</p>\n\n<pre><code>words.delete_if {|w, v| v &lt;= 1}\n</code></pre></li>\n<li><p>split the text into lowercase sentences.</p></li>\n<li><p>Make a <code>sentences =&gt; relevant_words_used</code> Hash.</p>\n\n<pre><code>sentences = {}\ntext.downcase.split(/\\.[\\s]*/).each {|s| sentences[s] = []}\n</code></pre></li>\n<li><p>Fill in the sentences Hash with the words used in each sentence. The following is a simplified way to do this (in an actual application you would need to separate words, to make sure 'cat' and 'caterpillar' don't overlap):</p>\n\n<pre><code>words.each {|w, c| sentences.each {|s, v| v &lt;&lt; w if s.include? w} }\n</code></pre>\n\n<p>an example for the more complex version would be:</p>\n\n<pre><code>sentences.each {|s, v| tmp = s.split(/[^\\w]+/); words.each {|w, c| v &lt;&lt; w if tmp.include? w} }\n</code></pre></li>\n<li><p>Your groups are in the <code>sentences.values</code> Array. Now it's time to find common groups and count how many times they repeat.</p>\n\n<pre><code>common_groups = {}\ntmp_groups = sentences.values\nuntil tmp_groups.empty?\n   active_group = tmp_groups.pop\n   tmp_groups.each do |g|\n        common = active_group &amp; g\n        next if common.empty?\n        common_groups[common] = [2,(common_groups[common].to_i + 1)].max\n   end\nend\n</code></pre></li>\n</ol>\n\n<p>Voila, these are the common groups:</p>\n\n<pre><code>common_groups.each {|g, c| puts \"the word(s) #{g} were common to #{c} sentences.\"}\n\n# =&gt; the word(s) [\"is\"] were common to 2 sentences.\n# =&gt; the word(s) [\"when\", \"whales\"] were common to 2 sentences.\n# =&gt; the word(s) [\"cats\", \"madonna\"] were common to 2 sentences.\n</code></pre>\n\n<p>The whole of the code might look like so:</p>\n\n<pre><code>text = 'This is a sentence about pink killer cats chasing madonna.\n        Sometimes when whales fight bricklayers, everyone drinks champaigne.\n        You know Madonna has little cats on her slippers.\n        When whales drink whiskey, your golf game is over.'\n\nrequire 'strscan'\ntext.downcase!\nwords = {}\nscn = StringScanner.new(text)\n\n( words[scn.matched] =  words[scn.matched].to_i + 1 if scn.scan(/[\\w]*/) ) while (scn.skip(/[^\\w]*/) &gt; 0) || !scn.eos?\n\nwords.delete_if {|w, v| v &lt;= 1}\n\nsentences = {}\ntext.split(/\\.[\\s]*/).each {|s| sentences[s] = []}\n\n# # A better code will split the sentences into words to\n# # avoid partial recognition (cat vs. caterpillar).\n# # for example:\nsentences.each {|s, v| tmp = s.split(/[^\\w]+/); words.each {|w, c| v &lt;&lt; w if tmp.include? w} }\n# # The following is the simplified version above:\n# words.each {|w, c| sentences.each {|s, v| v &lt;&lt; w if s.include? w} }\n\ncommon_groups = {}\ntmp_groups = sentences.values\nuntil tmp_groups.empty?\n   active_group = tmp_groups.pop\n   tmp_groups.each do |g|\n        common = active_group &amp; g\n        next if common.empty?\n        common_groups[common] = [2,(common_groups[common].to_i + 1)].max\n   end\nend\n\ncommon_groups.each {|g, c| puts \"the word(s) #{g} were common to #{c} sentences.\"}\n\n# =&gt; the word(s) [\"is\"] were common to 2 sentences.\n# =&gt; the word(s) [\"when\", \"whales\"] were common to 2 sentences.\n# =&gt; the word(s) [\"cats\", \"madonna\"] were common to 2 sentences.\n</code></pre>\n\n<p><strong>EDIT</strong></p>\n\n<p>I corrected an issue with the code where the text wasn't persistent as lowercase.\n (<code>text.downcase!</code> vs. <code>text.downcase</code>)</p>\n\n<p><strong>EDIT2</strong></p>\n\n<p>I reviewed the issue of partial word issues (i.e. <code>cat</code> vs. <code>caterpillar</code> or <code>dog</code> vs. <code>dogma</code>)</p>\n"}], "owner": {"reputation": 213, "user_id": 1536264, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/30b8a044f481c52edfdca376c55ebba6?s=128&d=identicon&r=PG", "display_name": "Jared Smith", "link": "https://stackoverflow.com/users/1536264/jared-smith"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 101, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1435289380, "creation_date": 1435185457, "question_id": 31038333, "link": "https://stackoverflow.com/questions/31038333/how-can-i-group-words-based-on-how-often-they-are-used-in-the-same-sentence", "title": "How can I group words based on how often they are used in the same sentence?", "body": "<p>I have a body of text, 500 sentences. Sentences are clearly deliniated, lets assume by a period for simpleness sake. Each sentence has about 10-20 words.</p>\n\n<p>I want to break it down into groups of words that statistically are used in the same sentence most often. Here's a simple example.</p>\n\n<pre><code>This is a sentence about pink killer cats chasing madonna.\nSometimes when whales fight bricklayers, everyone drinks champaigne.\nYou know Madonna has little cats on her slippers.\nWhen whales drink whiskey, your golf game is over.\n</code></pre>\n\n<p>I do have a list of stopwords that get filtered out, in the case above I could imagine wanting to build these groups.</p>\n\n<p>group 1:  pink cats madonna<br>\ngroup 2:  whales drink when</p>\n\n<p>Or something like that. I realize this can be a quite complicated endeavor. I've been experimenting with TF IDF similarity, and haven't really gotten anywhere yet. I'm working in ruby, and would love to hear any thoughts/directions/suggestions people might have.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 53905, "user_id": 2864740, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/e7a05a144f218bde07b659bc98e1ca7d?s=128&d=identicon&r=PG&f=1", "display_name": "user2864740", "link": "https://stackoverflow.com/users/2864740/user2864740"}, "edited": false, "score": 0, "creation_date": 1435184259, "post_id": 31038065, "comment_id": 50100131, "body": "&quot;wasn&#39;t having it&quot; is not a valid problem description. Also the code that was not having is not shown."}, {"owner": {"reputation": 303, "user_id": 3707261, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/100000290502490/picture?type=large", "display_name": "xHocquet", "link": "https://stackoverflow.com/users/3707261/xhocquet"}, "reply_to_user": {"reputation": 53905, "user_id": 2864740, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/e7a05a144f218bde07b659bc98e1ca7d?s=128&d=identicon&r=PG&f=1", "display_name": "user2864740", "link": "https://stackoverflow.com/users/2864740/user2864740"}, "edited": false, "score": 0, "creation_date": 1435184686, "post_id": 31038065, "comment_id": 50100293, "body": "It was a no method error when I called it on the hash"}, {"owner": {"reputation": 53905, "user_id": 2864740, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/e7a05a144f218bde07b659bc98e1ca7d?s=128&d=identicon&r=PG&f=1", "display_name": "user2864740", "link": "https://stackoverflow.com/users/2864740/user2864740"}, "edited": false, "score": 0, "creation_date": 1435187105, "post_id": 31038065, "comment_id": 50101067, "body": "A no method error was raised when it (&quot;some message&quot;) was <i>sent to nil</i>. Which is a very basic mistake - there was nothing (nil) when something was expected. In this case it is likely that <code>@data</code> is nil - was it assigned/loaded?"}, {"owner": {"reputation": 303, "user_id": 3707261, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/100000290502490/picture?type=large", "display_name": "xHocquet", "link": "https://stackoverflow.com/users/3707261/xhocquet"}, "reply_to_user": {"reputation": 53905, "user_id": 2864740, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/e7a05a144f218bde07b659bc98e1ca7d?s=128&d=identicon&r=PG&f=1", "display_name": "user2864740", "link": "https://stackoverflow.com/users/2864740/user2864740"}, "edited": false, "score": 0, "creation_date": 1435241611, "post_id": 31038065, "comment_id": 50126771, "body": "Yes, I just wasn&#39;t accessing the object&#39;s children properly. See below."}], "answers": [{"comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1435252715, "post_id": 31038321, "comment_id": 50134649, "body": "Define an array outside the <code>delete_if</code> block that contains the values to be removed: <code>vals = %w(Val1 Val2); data[&#39;records&#39;].delete_if{ |h| vals.include?(h[&#39;title&#39;]) }</code>. That runs about 10% faster with just two entries and will run even faster as <code>data[&#39;records&#39;]</code> or <code>vals</code> grow in size. As is, the array has to be redefined every time <code>delete_if</code> loops which wastes CPU."}, {"owner": {"reputation": 303, "user_id": 3707261, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/100000290502490/picture?type=large", "display_name": "xHocquet", "link": "https://stackoverflow.com/users/3707261/xhocquet"}, "edited": false, "score": 0, "creation_date": 1435261172, "post_id": 31038321, "comment_id": 50139469, "body": "That&#39;s what I ended up doing, I had my exception array that I matched against."}], "tags": [], "owner": {"reputation": 1910, "user_id": 676788, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/16dfcfaa3f6405e9572cea3f88a68c56?s=128&d=identicon&r=PG", "display_name": "Nafaa Boutefer", "link": "https://stackoverflow.com/users/676788/nafaa-boutefer"}, "is_accepted": true, "score": 2, "last_activity_date": 1435185404, "creation_date": 1435185404, "answer_id": 31038321, "question_id": 31038065, "link": "https://stackoverflow.com/questions/31038065/deleting-nested-hash-elements-based-on-those-elements-properties/31038321#31038321", "title": "Deleting nested hash elements based on those elements&#39; properties", "body": "<p>So simple</p>\n\n<pre><code>data['records'].delete_if{ |h| %w(Val1 Val2).include?(h['title']) }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 435, "user_id": 134809, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/24f49d448968ea24c8630c31fae12758?s=128&d=identicon&r=PG", "display_name": "bparanj", "link": "https://stackoverflow.com/users/134809/bparanj"}, "is_accepted": false, "score": 0, "last_activity_date": 1435204372, "creation_date": 1435204372, "answer_id": 31040916, "question_id": 31038065, "link": "https://stackoverflow.com/questions/31038065/deleting-nested-hash-elements-based-on-those-elements-properties/31040916#31040916", "title": "Deleting nested hash elements based on those elements&#39; properties", "body": "<p>You can also do this:</p>\n\n<pre><code>data['records'].delete_if{ |h| (h['title'] == 'Val1') || (h['title'] == 'Val2') }\n</code></pre>\n"}], "owner": {"reputation": 303, "user_id": 3707261, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/100000290502490/picture?type=large", "display_name": "xHocquet", "link": "https://stackoverflow.com/users/3707261/xhocquet"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 326, "favorite_count": 2, "accepted_answer_id": 31038321, "answer_count": 2, "score": 0, "last_activity_date": 1435257385, "creation_date": 1435184076, "last_edit_date": 1435257385, "question_id": 31038065, "link": "https://stackoverflow.com/questions/31038065/deleting-nested-hash-elements-based-on-those-elements-properties", "title": "Deleting nested hash elements based on those elements&#39; properties", "body": "<p>I have some data:</p>\n\n<pre><code>data = {\n\"total_records\"=&gt;3,\n\"records\"=&gt;\n   [{\"title\"=&gt;\"Val1\",\n   \"coins\"=&gt;1},\n   {\"title\"=&gt;\"Val2\",\n   \"coins\"=&gt;1},\n   {\"title\"=&gt;\"Val3\",\n   \"coins\"=&gt;1}]\n}\n</code></pre>\n\n<p>How would I go about deleting the records that have <code>title = 'Val1'||'Val2'</code>?</p>\n\n<p>I tried something along these lines:</p>\n\n<pre><code>@data.records.each_value do |e|\n    if exceptions.include?(e.title)\n      delete @envelopes.records.e\n    end\n  end\n</code></pre>\n\n<p>But I get a no method error on <code>@data.records</code>.</p>\n"}, {"tags": ["ruby", "json", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1435257778, "post_id": 31037792, "comment_id": 50137657, "body": "Your question is confusing. You say you&#39;re using JSON but your examples are XML. What have you tried to generate the link? Imagine that a colleague asked you this question, what would you need to answer it? Add that information to your question."}, {"owner": {"reputation": 1691, "user_id": 2564673, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/0KPFu.jpg?s=128&g=1", "display_name": "Cyrus Zei", "link": "https://stackoverflow.com/users/2564673/cyrus-zei"}, "reply_to_user": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1435269690, "post_id": 31037792, "comment_id": 50143573, "body": "yes, I dont know why chrome spit it out in xml since the default is in json, no ide here.  Well, I need to know how to get the id from the output that the url i giving me and push that in to the url with params. Something like this &lt;%= link_to &#39;city&#39;, cityp_path %&gt;  and in my routes file I think i need to add the params id or am I totalt wrong here ?  I can make a view for all of the city and states, but I dont think that is good practice. So I wounder how do I make a link that push the id from that view to the next"}], "owner": {"reputation": 1691, "user_id": 2564673, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/0KPFu.jpg?s=128&g=1", "display_name": "Cyrus Zei", "link": "https://stackoverflow.com/users/2564673/cyrus-zei"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 54, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1435350077, "creation_date": 1435182812, "last_edit_date": 1435350077, "question_id": 31037792, "link": "https://stackoverflow.com/questions/31037792/api-json-use-4-views-and-push-id-from-json-list-to-next-view", "title": "api json use 4 views and push id from json list to next view", "body": "<p>I have done alot of google searching and I can refrase my question.\nI wounder how I push params from the lan_view to the kommuner_controller</p>\n\n<p>so in the lan_view it will list all the states and the state name is a link_to. so when I click on it it will take that states id and push it to the next view so that view will show the citys for that state. I need it to push the id from the @results.each do to the kommuner view so that the url in the controller kommuner will be </p>\n\n<pre><code>http://api.arbetsformedlingen.se/af/v0/platsannonser/soklista/kommuner?lanid=20\n</code></pre>\n\n<p>I have 4 controllers</p>\n\n<pre><code>def lan\n    base_url = \"http://api.arbetsformedlingen.se/af/v0\"\n    lan = \"/platsannonser/soklista/lan\"\n    @results = JSON.parse(open(base_url + lan, \"Accept\" =&gt;application/json\",\n    \"Accept-Language\" =&gt; \"sv\").read)\n\nend\n\ndef kommuner\n    kommuner = \"/platsannonser/soklista/kommuner?lanid=\"\n    @results = JSON.parse(open(base_url + lan, \"Accept\" =&gt;application/json\",     \n    \"Accept-Language\" =&gt; \"sv\").read)\nend\n</code></pre>\n\n<p>and here is my lan_view</p>\n\n<pre><code>&lt;tbody&gt;\n&lt;% @results[\"soklista\"][\"sokdata\"].each do |sokdata| %&gt;\n  &lt;tr&gt;\n\n    &lt;% links = sokdata[\"namn\"].downcase.gsub(' ','_').gsub('\u00e4','a').gsub('\u00e5','a').gsub('\u00f6','o').downcase.to_s %&gt;\n    &lt;%= lan_id = sokdata[\"id\"] %&gt;\n    &lt;td&gt;&lt;%= link_to sokdata[\"namn\"], links %&gt;&lt;/td&gt;\n\n\n\n    &lt;td&gt;&lt;%= sokdata[\"antal_platsannonser\"] %&gt;&lt;/td&gt;\n\n  &lt;/tr&gt;\n&lt;% end %&gt;\n&lt;/tbody&gt;\n&lt;/table&gt;\n</code></pre>\n\n<p>I am using a api that can show xml and json and I am going with json here.</p>\n\n<p>this list all the states in sweden\n<a href=\"http://api.arbetsformedlingen.se/af/v0/platsannonser/soklista/lan\" rel=\"nofollow\">http://api.arbetsformedlingen.se/af/v0/platsannonser/soklista/lan</a></p>\n\n<p>and you can see that there is a ID node</p>\n\n<pre><code>&lt;sokdata&gt;\n&lt;id&gt;20&lt;/id&gt;\n</code></pre>\n\n<p>so if you put the state id in this url\n<a href=\"http://api.arbetsformedlingen.se/af/v0/platsannonser/soklista/kommuner?lanid=20\" rel=\"nofollow\">http://api.arbetsformedlingen.se/af/v0/platsannonser/soklista/kommuner?lanid=20</a></p>\n\n<p>it will list all the citys in that state\nand here is also a ID node</p>\n\n<pre><code>&lt;id&gt;2081&lt;/id&gt;\n&lt;namn&gt;Borl\u00e4nge&lt;/namn&gt;\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "cancancan"], "answers": [{"comments": [{"owner": {"reputation": 542, "user_id": 1222686, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc20c50605a4005303bfc6452899b723?s=128&d=identicon&r=PG", "display_name": "kimrgrey", "link": "https://stackoverflow.com/users/1222686/kimrgrey"}, "edited": false, "score": 0, "creation_date": 1452869716, "post_id": 31040390, "comment_id": 57369445, "body": "This approach is possible, but actually you don&#39;t need to store information about &quot;default role&quot; because it&#39;s just user without any roles."}], "tags": [], "owner": {"reputation": 3728, "user_id": 2612713, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/0a7f606f9e135589780620d1160d941e?s=128&d=identicon&r=PG&f=1", "display_name": "neo", "link": "https://stackoverflow.com/users/2612713/neo"}, "is_accepted": false, "score": 1, "last_activity_date": 1435242703, "last_edit_date": 1435242703, "creation_date": 1435200605, "answer_id": 31040390, "question_id": 31037642, "link": "https://stackoverflow.com/questions/31037642/cancancan-default-role/31040390#31040390", "title": "Cancancan default role", "body": "<p>You can do a callback on your User model:</p>\n\n<pre><code>class User &lt; ActiveRecord::Base\n  after_create :assign_default_role\n\n  def assign_default_role\n    add_role(:default_role) if self.roles.blank?\n  end\nend\n</code></pre>\n\n<p>If after_create isn't suitable, try another callback, more info\n<a href=\"http://guides.rubyonrails.org/active_record_callbacks.html\" rel=\"nofollow\">here</a></p>\n"}, {"tags": [], "owner": {"reputation": 157, "user_id": 2237869, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/d48028cd0026e905beffb1d539f86bb5?s=128&d=identicon&r=PG", "display_name": "Tom H", "link": "https://stackoverflow.com/users/2237869/tom-h"}, "is_accepted": false, "score": 0, "last_activity_date": 1452868245, "creation_date": 1452868245, "answer_id": 34813283, "question_id": 31037642, "link": "https://stackoverflow.com/questions/31037642/cancancan-default-role/34813283#34813283", "title": "Cancancan default role", "body": "<p>When defining abilities, we use an ability called 'user' for default user permissions. In other words, a user with no other roles gets the default set of abilities. </p>\n\n<p>We also use a set of 'guest' permissions for visitors that are not signed in. </p>\n"}, {"tags": [], "owner": {"reputation": 542, "user_id": 1222686, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc20c50605a4005303bfc6452899b723?s=128&d=identicon&r=PG", "display_name": "kimrgrey", "link": "https://stackoverflow.com/users/1222686/kimrgrey"}, "is_accepted": false, "score": 0, "last_activity_date": 1452869870, "last_edit_date": 1452869870, "creation_date": 1452869557, "answer_id": 34813759, "question_id": 31037642, "link": "https://stackoverflow.com/questions/31037642/cancancan-default-role/34813759#34813759", "title": "Cancancan default role", "body": "<p>You can use following pattern to simplify <code>Ability</code> class. Notice, that defining rules for \"default\" role here is very simple, because it's just signed in user without roles.</p>\n\n<pre><code>class Ability\n  include CanCan::Ability\n\n  def initialize(user)\n    user ||= User.new\n\n    # this is abitilites for anonymous user\n\n    can :read, Post\n\n    return unless user.persisted?\n\n    # ok, now we know that this user is logged in and can define common abilities\n\n    can :create, Post\n\n    # and after it we can define abilities for different roles\n    # user.roles here should return name of roles for user, \n    # like [:admin, :moderator]\n\n    user.roles.each { |role| self.public_send(role, user) if respond_to?(role) }\n  end\n\n  def admin(user)\n    # abitlites for admin here\n  end\n\n  def moderator(user)\n    # abilities for moderator here\n  end\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1341, "user_id": 743975, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/6b0899d70c3239ead231cebc7e8ce9af?s=128&d=identicon&r=PG", "display_name": "Dmitry Polyakovsky", "link": "https://stackoverflow.com/users/743975/dmitry-polyakovsky"}, "is_accepted": false, "score": 0, "last_activity_date": 1452892538, "creation_date": 1452892538, "answer_id": 34819950, "question_id": 31037642, "link": "https://stackoverflow.com/questions/31037642/cancancan-default-role/34819950#34819950", "title": "Cancancan default role", "body": "<p>Instead of callback I would set default value on field or in enumeration.  </p>\n\n<pre><code>class User\n  include Mongoid::Document\n  ...\n  field :roles,       type: Array # ,  default: [:am]\n  extend Enumerize\n  enumerize :roles, in: [:superadmin, :am, :salesrep], multiple: true #,  default: :am\nend\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user4978103"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 325, "favorite_count": 0, "answer_count": 4, "score": 1, "last_activity_date": 1452892538, "creation_date": 1435182265, "question_id": 31037642, "link": "https://stackoverflow.com/questions/31037642/cancancan-default-role", "title": "Cancancan default role", "body": "<p>I'm building rails app that has some role\\abilities separation. I decided to use cancancan + devise, but i can't figure out how to set standard user role?</p>\n\n<pre><code>class User &lt; ActiveRecord::Base\n  ROLES = %i[admin moderator author banned]\nend\n</code></pre>\n"}, {"tags": ["ruby", "parsing", "split"], "answers": [{"comments": [{"owner": {"reputation": 2139, "user_id": 413016, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/abd1546dde5e3d988b23b9898ddd874a?s=128&d=identicon&r=PG", "display_name": "ThG", "link": "https://stackoverflow.com/users/413016/thg"}, "edited": false, "score": 0, "creation_date": 1435180920, "post_id": 31037193, "comment_id": 50098671, "body": "omg, that was fast (I can only accept the answer in 7 minutes)... and it worked ;-) Thank you very much !"}], "tags": [], "owner": {"reputation": 4230, "user_id": 945873, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/d561be4c73996732e6639b5421abfb97?s=128&d=identicon&r=PG&f=1", "display_name": "itdoesntwork", "link": "https://stackoverflow.com/users/945873/itdoesntwork"}, "is_accepted": true, "score": 2, "last_activity_date": 1435180552, "creation_date": 1435180552, "answer_id": 31037193, "question_id": 31037169, "link": "https://stackoverflow.com/questions/31037169/ruby-simple-split-and-parse/31037193#31037193", "title": "Ruby simple split and parse?", "body": "<pre><code>str = \"Revenue - Costs * (1 + Profitpercentage)\"\np str.scan(/[A-Za-z]+/)\n# =&gt; [\"Revenue\", \"Costs\", \"Profitpercentage\"]\n</code></pre>\n\n<p><a href=\"http://ruby-doc.org/core-2.2.2/String.html#method-i-scan\" rel=\"nofollow\"><code>String#scan</code></a></p>\n"}], "owner": {"reputation": 2139, "user_id": 413016, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/abd1546dde5e3d988b23b9898ddd874a?s=128&d=identicon&r=PG", "display_name": "ThG", "link": "https://stackoverflow.com/users/413016/thg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 31, "favorite_count": 0, "accepted_answer_id": 31037193, "answer_count": 1, "score": 0, "last_activity_date": 1435180552, "creation_date": 1435180448, "question_id": 31037169, "link": "https://stackoverflow.com/questions/31037169/ruby-simple-split-and-parse", "title": "Ruby simple split and parse?", "body": "<p>I have the following formula : </p>\n\n<pre><code>Revenue - Costs * (1 + Profitpercentage)\n</code></pre>\n\n<p>I want to parse it and keep only the significant strings, which requires eliminating : spaces, [-+*/=], and parentheses.</p>\n\n<p>I came up with the following code :</p>\n\n<pre><code>p \"Revenue - Costs * (1 + Profitpercentage)\".split (/(\\s|\\.|\\+|\\-|\\/|\\*|\\\\)/)\n</code></pre>\n\n<p>but that only gave :</p>\n\n<pre><code>[\"Revenue\", \" \", \"\", \"-\", \"\", \" \", \"Costs\", \" \", \"\", \"*\", \"\", \" \", \"(1\", \" \", \"\", \"+\", \"\", \" \", \"Profitpercentage)\"]\n</code></pre>\n\n<p>How can I sanitize my code ?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "foreman"], "comments": [{"owner": {"reputation": 17529, "user_id": 398606, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9922e981f96ab7d809dfdc02c723fd41?s=128&d=identicon&r=PG", "display_name": "Sunil D.", "link": "https://stackoverflow.com/users/398606/sunil-d"}, "edited": false, "score": 0, "creation_date": 1435181216, "post_id": 31036798, "comment_id": 50098798, "body": "The logging output youve shown is from the worker process, does the web process see the environment variables, like rails console does?"}, {"owner": {"reputation": 3365, "user_id": 2200277, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f0a95ec105629f01fab28845338ab409?s=128&d=identicon&r=PG", "display_name": "Wally Altman", "link": "https://stackoverflow.com/users/2200277/wally-altman"}, "edited": false, "score": 0, "creation_date": 1435204487, "post_id": 31036798, "comment_id": 50105112, "body": "I don&#39;t think any of your values from development.env are being used. Rails itself sets the <code>RAILS_ENV</code> environment variable to &#39;development&#39; if it isn&#39;t set already. You could verify this by trying to set <code>RAILS_ENV</code> to a different value."}], "answers": [{"tags": [], "owner": {"reputation": 7994, "user_id": 1625339, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b8ba46f911517c8b2ccc39e0be9050c0?s=128&d=identicon&r=PG", "display_name": "Aetherus", "link": "https://stackoverflow.com/users/1625339/aetherus"}, "is_accepted": false, "score": 0, "last_activity_date": 1435188008, "last_edit_date": 1435188008, "creation_date": 1435187649, "answer_id": 31038690, "question_id": 31036798, "link": "https://stackoverflow.com/questions/31036798/foreman-fails-to-load-environment-variables/31038690#31038690", "title": "foreman fails to load environment variables", "body": "<p>Try modify your <code>development.env</code> like</p>\n\n<pre><code>export S3_BUCKET=bucketname\nexport AWS_ACCESS_KEY_ID=accesskey\nexport AWS_SECRET_ACCESS_KEY=secretaccesskey\nexport RAILS_ENV=development\nexport PORT=3000\n</code></pre>\n\n<p>Then in the terminal</p>\n\n<pre><code>$ source /path/to/development.env\n$ foreman start\n</code></pre>\n\n<h2>Advanced</h2>\n\n<p>You can use <a href=\"https://github.com/bkeepers/dotenv\" rel=\"nofollow\">dotenv</a> to manage some of your environment variables without polluting your system environment. Though it can't manage those environment variables required for server booting like <code>PORT</code>.</p>\n"}], "owner": {"reputation": 888, "user_id": 1782030, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/gbMei.png?s=128&g=1", "display_name": "kev", "link": "https://stackoverflow.com/users/1782030/kev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1293, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1435188008, "creation_date": 1435179077, "question_id": 31036798, "link": "https://stackoverflow.com/questions/31036798/foreman-fails-to-load-environment-variables", "title": "foreman fails to load environment variables", "body": "<p>I'm using rails 4.0.0 and ruby 2.0.0</p>\n\n<p>When I start the server with foreman <strong>some</strong> of the environment variables fail to load. It really bugs me that some of the variables are loaded.</p>\n\n<pre><code>foreman start -e development.env\n</code></pre>\n\n<p>Procfile</p>\n\n<pre><code>web: bundle exec passenger start -p $PORT -e $RAILS_ENV\nworker: bundle exec rake jobs:work RAILS_ENV=$RAILS_ENV\n</code></pre>\n\n<p>development.env file</p>\n\n<pre><code>S3_BUCKET=bucketname\nAWS_ACCESS_KEY_ID=accesskey\nAWS_SECRET_ACCESS_KEY=secretaccesskey\nRAILS_ENV=development\nPORT=3000\n</code></pre>\n\n<p>In my application.rb file i've added some logging to help debug this problem</p>\n\n<pre><code>puts \"PORT is #{ENV[\"PORT\"].inspect}\"\nputs \"RAILS_ENV is #{ENV[\"RAILS_ENV\"].inspect}\"\nputs \"S3_BUCKET is #{ENV[\"S3_BUCKET\"].inspect}\"\nputs \"AWS_ACCESS_KEY_ID is #{ENV[\"AWS_ACCESS_KEY_ID\"].inspect}\"\nputs \"AWS_SECRET_ACCESS_KEY is #{ENV[\"AWS_SECRET_ACCESS_KEY\"].inspect}\"\n</code></pre>\n\n<p>Once I start the server this is the output for the logging code</p>\n\n<pre><code>23:34:52 worker.1 | PORT is nil\n23:34:52 worker.1 | RAILS_ENV is \"development\"\n23:34:52 worker.1 | S3_BUCKET is nil\n23:34:52 worker.1 | AWS_ACCESS_KEY_ID is nil\n23:34:52 worker.1 | AWS_SECRET_ACCESS_KEY is nil\n</code></pre>\n\n<p>Why oh Why ? :-(</p>\n\n<p>When I load the rails console with foreman it successfully loads the variables</p>\n\n<pre><code>foreman run -e development.env rails c\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4.2", "active-model-serializers"], "answers": [{"tags": [], "owner": {"reputation": 130, "user_id": 2017708, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e608a3d0ac1e4b37df99428b746979f?s=128&d=identicon&r=PG", "display_name": "Ravindra", "link": "https://stackoverflow.com/users/2017708/ravindra"}, "is_accepted": false, "score": 0, "last_activity_date": 1435179719, "creation_date": 1435179719, "answer_id": 31036964, "question_id": 31036616, "link": "https://stackoverflow.com/questions/31036616/getting-the-active-model-serializer-for-model/31036964#31036964", "title": "Getting the active_model_serializer for model", "body": "<p>use active_model_serializers gem</p>\n\n<pre><code>render :json =&gt; object, :serializer =&gt; ApiUser \n</code></pre>\n\n<p>or you have an array of object than </p>\n\n<pre><code>render :json =&gt; objects, :each_serializer =&gt; ApiUser\n</code></pre>\n\n<p>create a file api_user.rb in serializers folder</p>\n"}], "owner": {"reputation": 1644, "user_id": 3090249, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/1589107501/picture?type=large", "display_name": "gilmishal", "link": "https://stackoverflow.com/users/3090249/gilmishal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 64, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1435179719, "creation_date": 1435178474, "question_id": 31036616, "link": "https://stackoverflow.com/questions/31036616/getting-the-active-model-serializer-for-model", "title": "Getting the active_model_serializer for model", "body": "<p>I am trying to send multiple different objects over a generic request\n- more specificly - I have different types of users, with different model, all might be return when creating a new session.\nlooking at rail casts #409 - ryan calls model.active_model_serializers.new - this does not work for me.\nis there any other way to get the seriailzer without knowing what model am I serializing? </p>\n\n<p>I am using rails 4.2 and active_model_serializers 0.9.3</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "controller", "worker"], "comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 1, "creation_date": 1435179000, "post_id": 31036506, "comment_id": 50097676, "body": "Are the workers one off or is it using the same thread as the application? I would assume the hang is due to an increased work load for the worker because as the lifespan of the application increases generally so does the database and the jobs workers must do."}, {"owner": {"reputation": 121, "user_id": 1646600, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/46c6223708b30304aa8c425585957c78?s=128&d=identicon&r=PG", "display_name": "cobrabb", "link": "https://stackoverflow.com/users/1646600/cobrabb"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1435179268, "post_id": 31036506, "comment_id": 50097821, "body": "I am not sure what you mean by the first question, but I am fairly sure that this is not a simple issue of job size increasing."}, {"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 1, "creation_date": 1435182059, "post_id": 31036506, "comment_id": 50099199, "body": "Perhaps a long running database query that locks an important table like <code>users</code>? That would lead to a situation in which all other processes have to wait for the one job to finish."}, {"owner": {"reputation": 121, "user_id": 1646600, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/46c6223708b30304aa8c425585957c78?s=128&d=identicon&r=PG", "display_name": "cobrabb", "link": "https://stackoverflow.com/users/1646600/cobrabb"}, "edited": false, "score": 0, "creation_date": 1435183383, "post_id": 31036506, "comment_id": 50099797, "body": "I&#39;ll further look into the query logs, but the tables that this job is interacting with are relatively small."}, {"owner": {"reputation": 121, "user_id": 1646600, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/46c6223708b30304aa8c425585957c78?s=128&d=identicon&r=PG", "display_name": "cobrabb", "link": "https://stackoverflow.com/users/1646600/cobrabb"}, "edited": false, "score": 0, "creation_date": 1435187072, "post_id": 31036506, "comment_id": 50101056, "body": "Also, that still doesn&#39;t seem to explain why even the home page (which is just static content, no database calls) hangs."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1435239149, "post_id": 31036506, "comment_id": 50124695, "body": "My first question pertains to how your workers are running. If your workers are running in the same thread as the application itself then the rest of the application will have to wait until the worker has completed. You can run workers in a one off configuration where the worker has its own thread to run in thus freeing up the application thread to run the application. As for setting this up though I am not very familiar with EC2. Although this doesn&#39;t pertain directly to your case <a href=\"https://aws.amazon.com/code/1151\" rel=\"nofollow noreferrer\">this article</a> seems like it might help you get an idea of &quot;workers&quot; in EC2"}, {"owner": {"reputation": 121, "user_id": 1646600, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/46c6223708b30304aa8c425585957c78?s=128&d=identicon&r=PG", "display_name": "cobrabb", "link": "https://stackoverflow.com/users/1646600/cobrabb"}, "edited": false, "score": 0, "creation_date": 1435247056, "post_id": 31036506, "comment_id": 50131134, "body": "The workers are each running in their own process (children of the Foreman process)."}], "owner": {"reputation": 121, "user_id": 1646600, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/46c6223708b30304aa8c425585957c78?s=128&d=identicon&r=PG", "display_name": "cobrabb", "link": "https://stackoverflow.com/users/1646600/cobrabb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 151, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1435183714, "creation_date": 1435178070, "last_edit_date": 1435183714, "question_id": 31036506, "link": "https://stackoverflow.com/questions/31036506/why-is-my-rails-app-hanging", "title": "Why is my Rails app hanging?", "body": "<p>I am using Rails 4.2 and Ruby 2.2.0. Recently, I have noticed that my app will hang for long periods of time when a certain worker is working. This is an app that has been under development for several years and I have never seen this sort of hanging behavior before (nor am I unfortunately completely aware of what changes I've made since it was last not hanging).</p>\n\n<p>What I mean by \"hang\" is: No pages will load (no controllers can be reached, and even the default homepage which is basically a static page won't load). None of my logs will update. Standard output is not being written to. The application also has many background worker processes (managed by Resque), which also appear to be hung.</p>\n\n<p>I have looked at top and netstat and various other Unix utilities and I don't see anything alarming there, either.</p>\n\n<p>Finally, I'm not sure if it's worth mentioning but this application is running via Foreman on an EC2 instance.</p>\n\n<p><strong>EDIT:</strong> I don't believe that it is query related, because nothing abnormal shows up on top. Also, I'm a little inexperienced with rails, but each job has its own entry in the process table, if that helps.</p>\n"}, {"tags": ["javascript", "jquery", "ruby-on-rails", "ruby", "autocomplete"], "comments": [{"owner": {"reputation": 6638, "user_id": 1093087, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/b937aa2b2b48b79431e9ad2565948f3b?s=128&d=identicon&r=PG", "display_name": "klenwell", "link": "https://stackoverflow.com/users/1093087/klenwell"}, "edited": false, "score": 1, "creation_date": 1435386896, "post_id": 31036207, "comment_id": 50189141, "body": "I don&#39;t think js event hook is what you&#39;re looking for. That fires when a value is selected, after the list of values (with the duplicates you&#39;re trying to eliminate) are already being display. The <a href=\"https://github.com/bigtunacan/rails-jquery-autocomplete#scopes\" rel=\"nofollow noreferrer\">scopes option</a> looks more promising. Try adding a scope to your model that filters out duplicates, then include that scope as an option in the <code>autocomplete</code> call in your controller."}, {"owner": {"reputation": 829, "user_id": 3833362, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/3cd6f6e52a08b01dcaf954730a270458?s=128&d=identicon&r=PG&f=1", "display_name": "Suavocado", "link": "https://stackoverflow.com/users/3833362/suavocado"}, "reply_to_user": {"reputation": 6638, "user_id": 1093087, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/b937aa2b2b48b79431e9ad2565948f3b?s=128&d=identicon&r=PG", "display_name": "klenwell", "link": "https://stackoverflow.com/users/1093087/klenwell"}, "edited": false, "score": 0, "creation_date": 1435517139, "post_id": 31036207, "comment_id": 50221954, "body": "Thank you for the response. I&#39;ll look into this option.  I&#39;m still new to Rails so I&#39;ll get back to this when i figure it out."}, {"owner": {"reputation": 829, "user_id": 3833362, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/3cd6f6e52a08b01dcaf954730a270458?s=128&d=identicon&r=PG&f=1", "display_name": "Suavocado", "link": "https://stackoverflow.com/users/3833362/suavocado"}, "reply_to_user": {"reputation": 6638, "user_id": 1093087, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/b937aa2b2b48b79431e9ad2565948f3b?s=128&d=identicon&r=PG", "display_name": "klenwell", "link": "https://stackoverflow.com/users/1093087/klenwell"}, "edited": false, "score": 0, "creation_date": 1435689086, "post_id": 31036207, "comment_id": 50301900, "body": "@klenwell Hey, I hadn&#39;t had a chance to do this last week.  I&#39;m trying to write the scope but it doesn&#39;t seem to have an effect  \tscope :companies, -&gt; {order(&quot;company DESC&quot;).select(&quot;DISTINCT company&quot;)}"}, {"owner": {"reputation": 6638, "user_id": 1093087, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/b937aa2b2b48b79431e9ad2565948f3b?s=128&d=identicon&r=PG", "display_name": "klenwell", "link": "https://stackoverflow.com/users/1093087/klenwell"}, "edited": false, "score": 0, "creation_date": 1435689863, "post_id": 31036207, "comment_id": 50302368, "body": "A couple sanity checks: 1) Is your new scope returning a unique list of companies? 2) Are you referencing the scope in autocomplete as <a href=\"https://github.com/bigtunacan/rails-jquery-autocomplete#scopes\" rel=\"nofollow noreferrer\">documented here</a>?"}, {"owner": {"reputation": 829, "user_id": 3833362, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/3cd6f6e52a08b01dcaf954730a270458?s=128&d=identicon&r=PG&f=1", "display_name": "Suavocado", "link": "https://stackoverflow.com/users/3833362/suavocado"}, "reply_to_user": {"reputation": 6638, "user_id": 1093087, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/b937aa2b2b48b79431e9ad2565948f3b?s=128&d=identicon&r=PG", "display_name": "klenwell", "link": "https://stackoverflow.com/users/1093087/klenwell"}, "edited": false, "score": 0, "creation_date": 1435690277, "post_id": 31036207, "comment_id": 50302636, "body": "I just checked the scope in irb, it does seem to return the values I want"}, {"owner": {"reputation": 829, "user_id": 3833362, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/3cd6f6e52a08b01dcaf954730a270458?s=128&d=identicon&r=PG&f=1", "display_name": "Suavocado", "link": "https://stackoverflow.com/users/3833362/suavocado"}, "reply_to_user": {"reputation": 6638, "user_id": 1093087, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/b937aa2b2b48b79431e9ad2565948f3b?s=128&d=identicon&r=PG", "display_name": "klenwell", "link": "https://stackoverflow.com/users/1093087/klenwell"}, "edited": false, "score": 0, "creation_date": 1435691010, "post_id": 31036207, "comment_id": 50303096, "body": "The scope is in the RFQ controller as such    autocomplete  :customer, :company, full:true, :scopes =&gt; [:companies]  I think that&#39;s correct but maybe I&#39;m just not seeing something."}, {"owner": {"reputation": 1221, "user_id": 9375533, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a08c00e9e6694fe8222c6918801dcc0?s=128&d=identicon&r=PG&f=1", "display_name": "dcangulo", "link": "https://stackoverflow.com/users/9375533/dcangulo"}, "edited": false, "score": 0, "creation_date": 1538720139, "post_id": 31036207, "comment_id": 92248960, "body": "Have you ever found a solution for this?"}], "owner": {"reputation": 829, "user_id": 3833362, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/3cd6f6e52a08b01dcaf954730a270458?s=128&d=identicon&r=PG&f=1", "display_name": "Suavocado", "link": "https://stackoverflow.com/users/3833362/suavocado"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 170, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1435177192, "creation_date": 1435177192, "last_edit_date": 1592644375, "question_id": 31036207, "link": "https://stackoverflow.com/questions/31036207/rails-jquery-autocomplete-avoid-duplicates", "title": "Rails-Jquery-Autocomplete avoid duplicates", "body": "<p>I have a rails app with an &quot;Order&quot; model and a &quot;Customer&quot; model. The customers frequently have the same company so I added the <a href=\"https://github.com/bigtunacan/rails-jquery-autocomplete\" rel=\"nofollow noreferrer\">Rails-Jquery-Autocomplete</a> field to the form.</p>\n<p>I configured the form normally except in the controller I set</p>\n<pre><code>autocomplete :customer, :company\n</code></pre>\n<p>instead of</p>\n<pre><code>autocomplete :customer, :name\n</code></pre>\n<p>In my form I have</p>\n<pre><code>= f.autocomplete_field :company, :autocomplete_customer_company\n</code></pre>\n<p>The field works as intended however, it will show repeated instances of the same company if more than 1 customer exists with that company.</p>\n<p>I found this on the documentation of the gem</p>\n<blockquote>\n<p>Running custom code on selection</p>\n<p>A javascript event named railsAutocomplete.select is fired on the\ninput field when a value is selected from the autocomplete drop down.\nIf you need to do something more complex than update fields with data,\nyou can hook into this event, like so:</p>\n<p>$('#my_autocomplete_field').bind('railsAutocomplete.select',\nfunction(event, data){   /* Do something here */<br />\nalert(data.item.id); });</p>\n</blockquote>\n<p>Though I'm not familiar enough with either Rails or Javascript to properly apply it. (If this is even helpful)</p>\n"}, {"tags": ["ruby", "migration", "sequel"], "answers": [{"comments": [{"owner": {"reputation": 1829, "user_id": 1442966, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/2347a5fea07665538a73887817f30b85?s=128&d=identicon&r=PG", "display_name": "Edward", "link": "https://stackoverflow.com/users/1442966/edward"}, "edited": false, "score": 0, "creation_date": 1435177776, "post_id": 31036322, "comment_id": 50097031, "body": "Sweet, you must have meant <code>unless self[t] ...</code> haha, but it worked like a charm. Thanks for the help!"}, {"owner": {"reputation": 25573, "user_id": 676874, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/c8e67ec01dc3e7c402255ff26785863f?s=128&d=identicon&r=PG", "display_name": "knut", "link": "https://stackoverflow.com/users/676874/knut"}, "reply_to_user": {"reputation": 1829, "user_id": 1442966, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/2347a5fea07665538a73887817f30b85?s=128&d=identicon&r=PG", "display_name": "Edward", "link": "https://stackoverflow.com/users/1442966/edward"}, "edited": false, "score": 0, "creation_date": 1435178448, "post_id": 31036322, "comment_id": 50097414, "body": "You are right, just the other way ;)  I will adapt the answer."}], "tags": [], "owner": {"reputation": 25573, "user_id": 676874, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/c8e67ec01dc3e7c402255ff26785863f?s=128&d=identicon&r=PG", "display_name": "knut", "link": "https://stackoverflow.com/users/676874/knut"}, "is_accepted": true, "score": 2, "last_activity_date": 1435178519, "last_edit_date": 1435178519, "creation_date": 1435177523, "answer_id": 31036322, "question_id": 31036129, "link": "https://stackoverflow.com/questions/31036129/sequel-migration-only-add-column-if-table-does-not-have-it-yet/31036322#31036322", "title": "Sequel migration - only add column if table does not have it yet", "body": "<p>Yes, it is possible. The method <code>Dataset#columns</code> returns a list of columns. This result can be used to be checked with <code>include?</code></p>\n\n<p>Full example:</p>\n\n<pre><code>Sequel.migration do\n  change do\n    table_list = [:table1, :table2, :table3]\n\n    table_list.each do |t|\n      if ! self[t].columns.include?(:specific_column)\n        alter_table(t) do\n          add_column :specific_column, type: String\n        end\n      end\n    end\n  end\nend\n</code></pre>\n\n<p>or</p>\n\n<pre><code>Sequel.migration do\n  change do\n    table_list = [:table1, :table2, :table3]\n\n    table_list.each do |t|\n        alter_table(t) do\n          add_column :specific_column, type: String\n        end unless self[t].columns.include?(:specific_column)\n      end\n    end\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 1829, "user_id": 1442966, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/2347a5fea07665538a73887817f30b85?s=128&d=identicon&r=PG", "display_name": "Edward", "link": "https://stackoverflow.com/users/1442966/edward"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 970, "favorite_count": 0, "accepted_answer_id": 31036322, "answer_count": 1, "score": 0, "last_activity_date": 1435178519, "creation_date": 1435176940, "question_id": 31036129, "link": "https://stackoverflow.com/questions/31036129/sequel-migration-only-add-column-if-table-does-not-have-it-yet", "title": "Sequel migration - only add column if table does not have it yet", "body": "<p>I am trying to create a Sequel migration that goes through a list of tables, and try to add a specific column if the table does not of that column yet.</p>\n\n<p>For example:</p>\n\n<pre><code>Sequel.migration do\n  change do\n    table_list = [:table1, :table2, :table3]\n\n    table_list.each do |t|\n      if t does not have :specific_column yet\n        alter_table(t) do\n          add_column :sepcific_column, type: String\n        end\n      end\n    end\n  end\nend\n</code></pre>\n\n<p>Is is possible to tell if the column already exist in a table, so I can do stuff accordingly?</p>\n"}, {"tags": ["ruby", "git", "hash", "yaml"], "answers": [{"tags": [], "owner": {"reputation": 5207, "user_id": 3277393, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/a2967a01798ad7d675a6b39f41232a5b?s=128&d=identicon&r=PG&f=1", "display_name": "user12341234", "link": "https://stackoverflow.com/users/3277393/user12341234"}, "is_accepted": true, "score": 2, "last_activity_date": 1435246829, "creation_date": 1435246829, "answer_id": 31054880, "question_id": 31036126, "link": "https://stackoverflow.com/questions/31036126/ruby-parsing-a-string-of-a-hash-using-yaml-error-if-hash-entered-raw-and-coe/31054880#31054880", "title": "Ruby - Parsing a string of a Hash using YAML - Error if hash entered raw and coerced to string rather than entered as string", "body": "<p>In your <code>get</code> method you call <code>YAML.load</code>, but in your set method you use <code>.to_s</code>. This means that the YAML parser is trying to read an arbitrary string as if it were YAML. For symmetry <code>YAML.dump</code> should be used in the <code>set</code> method instead.</p>\n\n<p>I've created a pull request with the changes.</p>\n"}], "owner": {"reputation": 1030, "user_id": 2997644, "user_type": "registered", "accept_rate": 38, "profile_image": "https://graph.facebook.com/1419960053/picture?type=large", "display_name": "yburyug", "link": "https://stackoverflow.com/users/2997644/yburyug"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 371, "favorite_count": 0, "accepted_answer_id": 31054880, "answer_count": 1, "score": 3, "last_activity_date": 1435246829, "creation_date": 1435176934, "last_edit_date": 1435243055, "question_id": 31036126, "link": "https://stackoverflow.com/questions/31036126/ruby-parsing-a-string-of-a-hash-using-yaml-error-if-hash-entered-raw-and-coe", "title": "Ruby - Parsing a string of a Hash using YAML - Error if hash entered raw and coerced to string rather than entered as string", "body": "<p>I have a gem I have created that wraps Git as a key:value store (dictionary/hash). The source is <a href=\"http://github.com/ybur-yug/gkv\" rel=\"nofollow\">here</a>.</p>\n\n<p>The way it works in the process referenced is as follows:</p>\n\n<ol>\n<li>run the function <code>set</code> containing a key and a value argument</li>\n<li>hash these with git, have the key point at the hash</li>\n<li>return the key if this operation is successful and it is added to the global dictionary holing keys and hashes</li>\n</ol>\n\n<p>Now, if I call something like</p>\n\n<pre><code>db.set('key', {some: 'value'})\n# =&gt; 'key'\n</code></pre>\n\n<p>and then try to retrieve this,</p>\n\n<pre><code>db.get('key')\nPsych::SyntaxError: (&lt;unknown&gt;): did not find expected node content while parsing a flow node at line 1 column 2\nfrom /home/bobby/.rvm/rubies/ruby-2.2.1/lib/ruby/2.2.0/psych.rb:370:in `parse'\nfrom /home/bobby/.rvm/rubies/ruby-2.2.1/lib/ruby/2.2.0/psych.rb:370:in `parse_stream'\nfrom /home/bobby/.rvm/rubies/ruby-2.2.1/lib/ruby/2.2.0/psych.rb:318:in `parse'\nfrom /home/bobby/.rvm/rubies/ruby-2.2.1/lib/ruby/2.2.0/psych.rb:245:in `load'\nfrom /home/bobby/.rvm/gems/ruby-2.2.1/gems/gkv-0.2.1/lib/gkv/database.rb:21:in `get'\nfrom (irb):6\nfrom /home/bobby/.rvm/rubies/ruby-2.2.1/bin/irb:11:in `&lt;main&gt;'\n</code></pre>\n\n<p>Now, if I set the key as that same dictionary, but as a string:</p>\n\n<pre><code>db.set('key', \"{some: 'value'}\")\n# =&gt; 'key'\ndb.get('key')\n# =&gt; {\"key\"=&gt;\"value\"} \ndb.get('key').class\n=&gt; Hash\n</code></pre>\n\n<p>The operation that is performing the git operations' and wrapping them to a kv store source is:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>...\n    def get(key)\n      if $ITEMS.keys.include? key\n        YAML.load(Gkv::GitFunctions.cat_file($ITEMS[key].last))\n      else\n        raise KeyError\n      end\n    end\n\n    def set(key, value)\n      update_items(key, value.to_s)\n      key\n    end\n...\n</code></pre>\n\n<p>And the <code>get_items</code> function being referenced here's source is:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>...    \n  def update_items(key, value)\n      if $ITEMS.keys.include? key\n        history = $ITEMS[key]\n        history &lt;&lt; Gkv::GitFunctions.hash_object(value.to_s)\n        $ITEMS[key] = history\n      else\n        $ITEMS[key] = [Gkv::GitFunctions.hash_object(value.to_s)]\n      end\n    end\n  end\n...\n</code></pre>\n\n<p><code>hash_object</code> and <code>cat_object</code> simple wrap <code>git hash-object</code> and <code>git cat-file</code> in a method writing the input to a tmpfile, <code>git add</code>ing it, and then erasing the tempfile.</p>\n\n<p>I'm really at a loss as to why this works with strings but not true dictionaries. It results in the exact same error if you use the old hashrocket syntax as well:</p>\n\n<pre><code>db.set('a', {:key =&gt; 'value'})\n=&gt; \"a\" \ndb.get('a')\n# =&gt; Psych::SyntaxError: (&lt;unknown&gt;): did not find expected node content while parsing a flow node at line 1 column 2\nfrom /home/bobby/.rvm/rubies/ruby-2.2.1/lib/ruby/2.2.0/psych.rb:370:in `parse'\nfrom /home/bobby/.rvm/rubies/ruby-2.2.1/lib/ruby/2.2.0/psych.rb:370:in `parse_stream'\nfrom /home/bobby/.rvm/rubies/ruby-2.2.1/lib/ruby/2.2.0/psych.rb:318:in `parse'\nfrom /home/bobby/.rvm/rubies/ruby-2.2.1/lib/ruby/2.2.0/psych.rb:245:in `load'\nfrom /home/bobby/.rvm/gems/ruby-2.2.1/gems/gkv-0.2.1/lib/gkv/database.rb:21:in `get'\nfrom (irb):6\nfrom /home/bobby/.rvm/rubies/ruby-2.2.1/bin/irb:11:in `&lt;main&gt;'\n</code></pre>\n\n<p>Any ideas?</p>\n"}, {"tags": ["ruby"], "answers": [{"comments": [{"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1435178727, "post_id": 31035983, "comment_id": 50097541, "body": "The interesting question isn&#39;t so much why the local variable is accessible inside the block (of course it is, blocks are closures, having access to local variables from the surrounding scope is kind of the point), but rather why the instance variable isn&#39;t. Because, actually, it <i>should</i> be accessible."}], "tags": [], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "is_accepted": false, "score": 3, "last_activity_date": 1435176355, "creation_date": 1435176355, "answer_id": 31035983, "question_id": 31035939, "link": "https://stackoverflow.com/questions/31035939/how-can-i-access-an-instance-variable-inside-of-a-ruby-block/31035983#31035983", "title": "How can I access an instance variable inside of a Ruby block?", "body": "<p>It is because local variables, unlike instance variables, have lexical scope. <a href=\"https://en.wikipedia.org/wiki/Scope_(computer_science)#Lexical_scope_vs._dynamic_scope\" rel=\"nofollow\">This Wikipedia article</a> may help.</p>\n"}, {"comments": [{"owner": {"reputation": 11596, "user_id": 465986, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/592491f3adae59ba7f0416760d5361ab?s=128&d=identicon&r=PG", "display_name": "AKWF", "link": "https://stackoverflow.com/users/465986/akwf"}, "edited": false, "score": 0, "creation_date": 1435189166, "post_id": 31036692, "comment_id": 50101627, "body": "That&#39;s an excellent, excellent description of why it happened the way it did. Makes perfect sense now."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "reply_to_user": {"reputation": 11596, "user_id": 465986, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/592491f3adae59ba7f0416760d5361ab?s=128&d=identicon&r=PG", "display_name": "AKWF", "link": "https://stackoverflow.com/users/465986/akwf"}, "edited": false, "score": 0, "creation_date": 1435189405, "post_id": 31036692, "comment_id": 50101681, "body": "See also <a href=\"http://stackoverflow.com/a/3071983/2988\">How does <code>instance_eval</code> work and why does DHH hate it?</a>"}], "tags": [], "owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "is_accepted": true, "score": 2, "last_activity_date": 1435189396, "last_edit_date": 1495541750, "creation_date": 1435178755, "answer_id": 31036692, "question_id": 31035939, "link": "https://stackoverflow.com/questions/31035939/how-can-i-access-an-instance-variable-inside-of-a-ruby-block/31036692#31036692", "title": "How can I access an instance variable inside of a Ruby block?", "body": "<p>The interesting question isn't so much why the local variable is accessible inside the block (of course it is, blocks are closures, having access to local variables from the surrounding scope is kind of the point), but rather why the instance variable isn't. Because, actually, it <em>should</em> be accessible.</p>\n\n<p>However, <em>if</em> the block is being <code>instance_eval</code>ed or <code>instance_exec</code>ed, then the value of <code>self</code> will be changed to the receiver of the <code>instance_eval</code> or <code>instance_exec</code> message, and instance variables are always looked up in <code>self</code>, so since <code>self</code> is now a different object, it probably won't have an <code>@line_hash</code> instance variable. You would have to look at the implementation of <code>Xml::Parser::new</code> to find out.</p>\n\n<p>See also <a href=\"https://stackoverflow.com/a/3071983/2988\">How does <code>instance_eval</code> work and why does DHH hate it?</a></p>\n"}, {"comments": [{"owner": {"reputation": 11596, "user_id": 465986, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/592491f3adae59ba7f0416760d5361ab?s=128&d=identicon&r=PG", "display_name": "AKWF", "link": "https://stackoverflow.com/users/465986/akwf"}, "edited": false, "score": 0, "creation_date": 1435245229, "post_id": 31041043, "comment_id": 50129774, "body": "That&#39;s because the &quot;each&quot; block does not execute in a separate context."}], "tags": [], "owner": {"reputation": 435, "user_id": 134809, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/24f49d448968ea24c8630c31fae12758?s=128&d=identicon&r=PG", "display_name": "bparanj", "link": "https://stackoverflow.com/users/134809/bparanj"}, "is_accepted": false, "score": 0, "last_activity_date": 1435205381, "creation_date": 1435205381, "answer_id": 31041043, "question_id": 31035939, "link": "https://stackoverflow.com/questions/31035939/how-can-i-access-an-instance-variable-inside-of-a-ruby-block/31041043#31041043", "title": "How can I access an instance variable inside of a Ruby block?", "body": "<p>I cannot reproduce the problem. Here is a simple test case, I created:</p>\n\n<pre><code>          class MyReader\n\n            def initialize\n              @line_hash = {}\n            end\n\n            def read\n              [1,2].each do |x|\n                @line_hash[x] = '0'\n              end\n            end\n\n          end  \n\n          p MyReader.new.read\n</code></pre>\n"}], "owner": {"reputation": 11596, "user_id": 465986, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/592491f3adae59ba7f0416760d5361ab?s=128&d=identicon&r=PG", "display_name": "AKWF", "link": "https://stackoverflow.com/users/465986/akwf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1126, "favorite_count": 0, "closed_date": 1451357077, "accepted_answer_id": 31036692, "answer_count": 3, "score": 3, "last_activity_date": 1435205381, "creation_date": 1435176229, "question_id": 31035939, "link": "https://stackoverflow.com/questions/31035939/how-can-i-access-an-instance-variable-inside-of-a-ruby-block", "closed_reason": "Duplicate", "title": "How can I access an instance variable inside of a Ruby block?", "body": "<p>I have the following code:</p>\n\n<pre><code>class MyXmlReader\n\n  attr_accessor :filename, :lines\n\n  def initialize(filename)\n    @filename = filename\n    @line_hash = {}\n  end\n\n  def read\n    reader = Nokogiri::XML::Reader(open(@filename))\n    Xml::Parser.new(reader) do\n      ... do stuff\n      @line_hash[var] = line           # ERROR!\n    end\n  end\n\nend  \n</code></pre>\n\n<p>It looks like the block runs in a new scope. Because I'm getting:</p>\n\n<pre><code>NoMethodError: undefined method `[]' for nil:NilClass\n</code></pre>\n\n<p>This is easily worked around by creating local variables and then assigning those variables to the instance variables at the end of the <code>read</code> method. But I'm wondering why a local variable is accessible within the block, but not an instance variable.</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1435177015, "post_id": 31035920, "comment_id": 50096625, "body": "What is <code>@myvar</code>? What is <code>@myvar[&#39;one&#39;]</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 10255, "user_id": 1155142, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/c680db41999d478ca34d1a77a470e30d?s=128&d=identicon&r=PG", "display_name": "gabrielhilal", "link": "https://stackoverflow.com/users/1155142/gabrielhilal"}, "edited": false, "score": 0, "creation_date": 1435177183, "post_id": 31035942, "comment_id": 50096718, "body": "<code>@myvar.has_key?(&#39;one&#39;)</code> raise an error if <code>@myvar</code> is <code>nil</code>"}, {"owner": {"reputation": 10255, "user_id": 1155142, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/c680db41999d478ca34d1a77a470e30d?s=128&d=identicon&r=PG", "display_name": "gabrielhilal", "link": "https://stackoverflow.com/users/1155142/gabrielhilal"}, "edited": false, "score": 0, "creation_date": 1435177227, "post_id": 31035942, "comment_id": 50096731, "body": "also, the original code is expecting two different variables depending on conditions: newvar and input"}], "tags": [], "owner": {"reputation": 12694, "user_id": 1174001, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/b27f05489e2cebe5948277c2ca561a93?s=128&d=identicon&r=PG", "display_name": "CDub", "link": "https://stackoverflow.com/users/1174001/cdub"}, "is_accepted": false, "score": 1, "last_activity_date": 1435177980, "last_edit_date": 1435177980, "creation_date": 1435176237, "answer_id": 31035942, "question_id": 31035920, "link": "https://stackoverflow.com/questions/31035920/variable-assignment-if-it-doesnt-exist/31035942#31035942", "title": "Variable assignment if it doesn&#39;t exist", "body": "<p>If I understand your question correctly, you could do something like:</p>\n\n<pre><code>newvar = if @myvar['one']['two']\n           {:three =&gt; @config['one']['two']}\n         else\n           {}\n         end\n</code></pre>\n\n<p>You could then use <code>newvar</code> as the variable assigned either to a populated hash or an empty hash.  Additionally, you'll want to check to ensure <code>@myvar</code> exists, and  has a key of <code>'one'</code> before calling <code>'two'</code>:</p>\n\n<pre><code>newvar = if @myvar &amp;&amp; @myvar.has_key?('one') &amp;&amp; @myvar['one']['two']\n           {:three =&gt; @config['one']['two']}\n         else\n           {}\n         end\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 12694, "user_id": 1174001, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/b27f05489e2cebe5948277c2ca561a93?s=128&d=identicon&r=PG", "display_name": "CDub", "link": "https://stackoverflow.com/users/1174001/cdub"}, "edited": false, "score": 0, "creation_date": 1435176681, "post_id": 31035955, "comment_id": 50096432, "body": "The only issue with this ternary is if <code>@myvar[&#39;one&#39;]</code> doesn&#39;t exist, <code>[&#39;two&#39;]</code> will result in a NilClass error."}, {"owner": {"reputation": 12694, "user_id": 1174001, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/b27f05489e2cebe5948277c2ca561a93?s=128&d=identicon&r=PG", "display_name": "CDub", "link": "https://stackoverflow.com/users/1174001/cdub"}, "edited": false, "score": 0, "creation_date": 1435177077, "post_id": 31035955, "comment_id": 50096654, "body": "Fair, but I don&#39;t like assuming anything. ;-)"}], "tags": [], "owner": {"reputation": 10255, "user_id": 1155142, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/c680db41999d478ca34d1a77a470e30d?s=128&d=identicon&r=PG", "display_name": "gabrielhilal", "link": "https://stackoverflow.com/users/1155142/gabrielhilal"}, "is_accepted": false, "score": 1, "last_activity_date": 1435177548, "last_edit_date": 1435177548, "creation_date": 1435176268, "answer_id": 31035955, "question_id": 31035920, "link": "https://stackoverflow.com/questions/31035920/variable-assignment-if-it-doesnt-exist/31035955#31035955", "title": "Variable assignment if it doesn&#39;t exist", "body": "<p>Assuming your code works... In one line:</p>\n\n<pre><code>@myvar['one']['two'] ? newvar = {:three =&gt; @config['one']['two']} : input = {}\n</code></pre>\n\n<p>If you want to prevent a nil <code>@myvar</code> and ensure it has a key of <code>one</code> and <code>two</code>:</p>\n\n<pre><code>@myvar &amp;&amp; @myvar.has_key?('one') &amp;&amp; @myvar['one']['two'] ? newvar = {:three =&gt; @config['one']['two']} : input = {}\n</code></pre>\n"}], "owner": {"reputation": 2773, "user_id": 1003288, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/b7c2d49748426791dc98b8214dfac9d1?s=128&d=identicon&r=PG", "display_name": "Jacob Tomlinson", "link": "https://stackoverflow.com/users/1003288/jacob-tomlinson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1435177980, "creation_date": 1435176142, "last_edit_date": 1435176988, "question_id": 31035920, "link": "https://stackoverflow.com/questions/31035920/variable-assignment-if-it-doesnt-exist", "title": "Variable assignment if it doesn&#39;t exist", "body": "<p>I want to assign an object to a variable containing another variable unless that variable doesn't exist, in which case I want to assign an empty object.</p>\n\n<p>I have this code which works:</p>\n\n<pre><code>if @myvar['one']['two']\n  newvar = {:three =&gt; @config['one']['two']}\nelse\n  input = {}\nend\n</code></pre>\n\n<p>Is there a neater way to do this?</p>\n"}, {"tags": ["ruby", "recursion", "hash", "tree", "hierarchical-data"], "answers": [{"comments": [{"owner": {"reputation": 5, "user_id": 1282460, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c5ee69d79a03844d3458a59977847c5?s=128&d=identicon&r=PG", "display_name": "Dave Schile", "link": "https://stackoverflow.com/users/1282460/dave-schile"}, "edited": false, "score": 0, "creation_date": 1435182980, "post_id": 31037236, "comment_id": 50099630, "body": "Excellent!  I was focusing on primarily iterating the obj_list first.  In this approach, you focus on the work hash, which I think of as the accumulator.   Thank you."}], "tags": [], "owner": {"reputation": 7435, "user_id": 319479, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/ace524a50dbd1e03c7df9f0bba2102a4?s=128&d=identicon&r=PG", "display_name": "Christopher Neylan", "link": "https://stackoverflow.com/users/319479/christopher-neylan"}, "is_accepted": true, "score": 0, "last_activity_date": 1435180710, "creation_date": 1435180710, "answer_id": 31037236, "question_id": 31035767, "link": "https://stackoverflow.com/questions/31035767/recursively-create-hierarchical-hash-from-mongo-collection-in-ruby/31037236#31037236", "title": "Recursively create hierarchical hash from Mongo collection in Ruby", "body": "<p>So looking at your sample input, I'm going to make a core assumption:</p>\n\n<p>The order of the hash objects in the input list are somewhat well-defined.  Namely, that if the <code>globalSettings</code> hash refers to the group <code>difficulty</code>, then the next object in the list with <code>_id == 'difficulty'</code> and <code>parent == 'globalSettings'</code> is the correct match.</p>\n\n<p>If this is true, then you can write a function that accepts a description of what you're looking for (i.e., the object with <code>_id == 'difficulty'</code> and <code>parent == 'globalSettings'</code>) along with a reference to where you want that data stored, which can then recurse using deeper references.</p>\n\n<pre><code>def doit(obj_list, work = {})\n  work.each do |key, data|\n    # fetch the node\n    node_i = obj_list.index { |n| n['_id'] == key &amp;&amp; n['parent'] == data[:parent] } or next\n    node = obj_list.delete_at(node_i)\n\n    # for each group of this node, create a new hash\n    # under this node's output pointer and queue it for parsing\n    new_work = {}\n    node['groups'].each do |group|\n      data[:output][group] = {}\n      new_work[group] = { parent: key, output: data[:output][group] }\n    end\n\n    # get the group data for this node\n    doit(obj_list, new_work)\n  end\nend\n\ninput_data = JSON.parse(IO.read './input.json')\noutput_data = {}\ndoit( input_data, 'globalSettings' =&gt; { parent: nil, output: output_data } )\n</code></pre>\n\n<p>The trick here is that I'm handing the recursive call to <code>doit</code> the names of the next objects that I'm looking for from the list (using the current object's group list) and pairing each of those desired names with their parent and a reference to where I want the function to put the found data.  Each recursive call to <code>doit</code> will use deeper and deeper references into the original output hash.</p>\n"}], "owner": {"reputation": 5, "user_id": 1282460, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c5ee69d79a03844d3458a59977847c5?s=128&d=identicon&r=PG", "display_name": "Dave Schile", "link": "https://stackoverflow.com/users/1282460/dave-schile"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 113, "favorite_count": 0, "accepted_answer_id": 31037236, "answer_count": 1, "score": 0, "last_activity_date": 1435180710, "creation_date": 1435175603, "question_id": 31035767, "link": "https://stackoverflow.com/questions/31035767/recursively-create-hierarchical-hash-from-mongo-collection-in-ruby", "title": "Recursively create hierarchical hash from Mongo collection in Ruby", "body": "<p>I am trying to create a hash that looks like this:</p>\n\n<pre><code>{\"difficulty\"=&gt;{\"easy\"=&gt;{}, \"normal\"=&gt;{}, \"hard\"=&gt;{}}, \"terrain\"=&gt;{\"snow\"=&gt;{\"sleet\"=&gt;{}, \"powder\"=&gt;{}}, \"jungle\"=&gt;{}, \"city\"=&gt;{}}}\n</code></pre>\n\n<p>From a MongoDB collection which is and enumerable list of hashes that looks like this:</p>\n\n<pre><code>{\n\"_id\" : \"globalSettings\",\n\"groups\" : [\n    \"difficulty\",\n    \"terrain\"\n],\n\"parent\" : null,\n\"settings\" : {\n    \"maxEnemyCount\" : 10,\n    \"maxDamageInflicted\" : 45,\n    \"enemyHealthPoints\" : 40,\n    \"maxEnemySpeed\" : 25,\n    \"maxPlayerSpeed\" : 32,\n    \"lightShader\" : \"diffuse\",\n    \"fogDepth\" : 12,\n    \"terrainModifier\" : 9\n}\n},\n{\n\"_id\" : \"difficulty\",\n\"groups\" : [\n    \"easy\",\n    \"normal\",\n    \"hard\"\n],\n\"parent\" : \"globalSettings\",\n\"settings\" : {\n\n}\n}\n{\n\"_id\" : \"terrain\",\n\"groups\" : [\n    \"snow\",\n    \"jungle\",\n    \"city\"\n],\n\"parent\" : \"globalSettings\",\n\"settings\" : {\n}\n}\n{\n\"_id\" : \"snow\",\n\"groups\" : [\n    \"sleet\",\n    \"powder\"\n],\n\"parent\" : \"terrain\",\n\"settings\" : {\n    \"fogDepth\" : 4\n}\n}\n{\n\"_id\" : \"jungle\",\n\"groups\" : [ ],\n\"parent\" : \"terrain\",\n\"settings\" : {\n    \"terrainModifier\" : 6\n}\n}\n{\n\"_id\" : \"city\",\n\"groups\" : [ ],\n\"parent\" : \"terrain\",\n\"settings\" : {\n    \"lightShader\" : \"bumpedDiffuse\"\n}\n}\n{\n\"_id\" : \"easy\",\n\"groups\" : [ ],\n\"parent\" : \"difficulty\",\n\"settings\" : {\n    \"maxEnemyCount\" : 5\n}\n}\n{\n\"_id\" : \"normal\",\n\"groups\" : [ ],\n\"parent\" : \"difficulty\",\n\"settings\" : {\n\n}\n}\n{\n\"_id\" : \"hard\",\n\"groups\" : [ ],\n\"parent\" : \"difficulty\",\n\"settings\" : {\n    \"maxEnemyCount\" : 20\n}\n}\n{\n\"_id\" : \"sleet\",\n\"groups\" : [ ],\n\"parent\" : \"snow\",\n\"settings\" : {\n    \"fogDepth\" : 2\n}\n}\n{\n\"_id\" : \"powder\",\n\"groups\" : [ ],\n\"parent\" : \"snow\",\n\"settings\" : {\n    \"terrainModifier\" : 2\n}\n}\n</code></pre>\n\n<p>Every time I try to write the function, I get stuck when setting the parent of the group.  How do I recurse, yet keep track of the path of hierarchy?</p>\n\n<p>The closest I've come is with this:</p>\n\n<pre><code>def dbCurse(nodes, parent = nil)\n  withParent, withoutParent = nodes.partition { |n| n['parent'] == parent }\n  withParent.map do |node|\n    newNode={}\n    newNode[node[\"_id\"]]={}\n    newNode[node[\"_id\"]].merge(node[\"_id\"] =&gt; dbCurse(withoutParent, node['_id']))\n  end\nend\n</code></pre>\n\n<p>which gives me a crazy mix of arrays and hashes:</p>\n\n<pre><code>{\"globalSettings\"=&gt;[{\"difficulty\"=&gt;[{\"easy\"=&gt;[]}, {\"normal\"=&gt;[]}, {\"hard\"=&gt;[]}]}, {\"terrain\"=&gt;[{\"snow\"=&gt;[{\"sleet\"=&gt;[]}, {\"powder\"=&gt;[]}]}, {\"jungle\"=&gt;[]}, {\"city\"=&gt;[]}]}]}\n</code></pre>\n\n<p>I think the arrays are getting mixed in there from the #map but I'm not sure how to get rid of them to get the clean hash of hashes I show at the top of my question.</p>\n\n<p>Thank you,\nDavid</p>\n"}, {"tags": ["java", "ruby", "rest", "stripe-payments"], "answers": [{"tags": [], "owner": {"reputation": 19272, "user_id": 1606729, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/SZetZ.png?s=128&g=1", "display_name": "koopajah", "link": "https://stackoverflow.com/users/1606729/koopajah"}, "is_accepted": true, "score": 2, "last_activity_date": 1435175480, "creation_date": 1435175480, "answer_id": 31035728, "question_id": 31035617, "link": "https://stackoverflow.com/questions/31035617/programmatically-create-coupon-code-in-stripe/31035728#31035728", "title": "Programmatically create coupon code in Stripe", "body": "<p>It's definitely possible using the <a href=\"https://stripe.com/docs/api/java#create_coupon\" rel=\"nofollow\">Create Coupon</a> API. You'd be able to use their <a href=\"https://github.com/stripe/stripe-java\" rel=\"nofollow\">Java</a> library to create all those in a loop. Here's a basic example taken from the documentation that creates a 25% off coupon for 3 months:</p>\n\n<pre><code>Stripe.apiKey = \"sk_test_XXX\";\n\nMap&lt;String, Object&gt; couponParams = new HashMap&lt;String, Object&gt;();\ncouponParams.put(\"percent_off\", 25);\ncouponParams.put(\"duration\", \"repeating\");\ncouponParams.put(\"duration_in_months\", 3);\ncouponParams.put(\"id\", \"25OFF\");\n\nCoupon.create(couponParams);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 435, "user_id": 134809, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/24f49d448968ea24c8630c31fae12758?s=128&d=identicon&r=PG", "display_name": "bparanj", "link": "https://stackoverflow.com/users/134809/bparanj"}, "is_accepted": false, "score": 2, "last_activity_date": 1435205694, "creation_date": 1435205694, "answer_id": 31041097, "question_id": 31035617, "link": "https://stackoverflow.com/questions/31035617/programmatically-create-coupon-code-in-stripe/31041097#31041097", "title": "Programmatically create coupon code in Stripe", "body": "<p>You can create a coupon using Stripe Ruby api like this:</p>\n\n<pre><code>      require \"stripe\"\n\n      Stripe.api_key = \"sk_test_BQokikJOvBiI2HlWgH4olfQ2\"\n       =&gt; \"sk_test_BQokikJOvBiI2HlWgH4olfQ2\" \n\n         Stripe::Coupon.create(\n             :percent_off =&gt; 25,\n             :duration =&gt; 'repeating',\n             :duration_in_months =&gt; 3,\n             :id =&gt; '25008OFF'\n         )\n       =&gt; #&lt;Stripe::Coupon:0x3ff55618447c id=25008OFF&gt; JSON: {\n        \"id\": \"25008OFF\",\n        \"created\": 1435205613,\n        \"percent_off\": 25,\n        \"amount_off\": null,\n        \"currency\": null,\n        \"object\": \"coupon\",\n        \"livemode\": false,\n        \"duration\": \"repeating\",\n        \"redeem_by\": null,\n        \"max_redemptions\": null,\n        \"times_redeemed\": 0,\n        \"duration_in_months\": 3,\n        \"valid\": true,\n        \"metadata\": {}\n      } \n</code></pre>\n"}], "owner": {"reputation": 7158, "user_id": 1445444, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/e0baa59194d1ab50811481dd6b4aab5c?s=128&d=identicon&r=PG&f=1", "display_name": "Horse Voice", "link": "https://stackoverflow.com/users/1445444/horse-voice"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1007, "favorite_count": 0, "accepted_answer_id": 31035728, "answer_count": 2, "score": 2, "last_activity_date": 1435205694, "creation_date": 1435175087, "question_id": 31035617, "link": "https://stackoverflow.com/questions/31035617/programmatically-create-coupon-code-in-stripe", "title": "Programmatically create coupon code in Stripe", "body": "<p>I need to create over a 1000 coupon codes in my Stripe account so that customers can redeem the discount at my site. I don't want to do this manually through the dashboard or else I'll go crazy. </p>\n\n<p>I have not been able to find instructions in STRIPE documentation to create coupon codes programmatically or through a REST client.</p>\n\n<p>Does anyone know if this is possible using the Stripe api. Could you provide an example if you gotten this to work?</p>\n\n<p>Thank you in advance.</p>\n"}, {"tags": ["arrays", "ruby", "hash"], "answers": [{"tags": [], "owner": {"reputation": 3129, "user_id": 227397, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lVdnG.jpg?s=128&g=1", "display_name": "Jeff Price", "link": "https://stackoverflow.com/users/227397/jeff-price"}, "is_accepted": false, "score": 0, "last_activity_date": 1435175924, "creation_date": 1435175924, "answer_id": 31035848, "question_id": 31035567, "link": "https://stackoverflow.com/questions/31035567/add-key-value-pair-to-array-of-hashes-when-unique-ids-match/31035848#31035848", "title": "Add key value pair to Array of Hashes when unique Id&#39;s match", "body": "<p>This does the trick. Iterate over your sent array and attempt to find a record in your active_array that has that :asin. If you find something, set the price and you are done. </p>\n\n<p>Your code I believe used detect/find incorrectly. What you want out of that method is the hash that matches and then do something with that. You were trying to do everything inside of detect.</p>\n\n<pre><code>sent_array.each do |sent|\n  item = active_array.find{ |i| i.has_value? sent[:asin] }\n  sent[:price] = item[:price] if item\nend\n\n =&gt; [{:sellersku=&gt;\"0421077128\", :asin=&gt;\"B00ND80WKY\", :price=&gt;39.99}, {:sellersku=&gt;\"0320248102\", :asin=&gt;\"B00WTEF9FG\"}, {:sellersku=&gt;\"0324823180\", :asin=&gt;\"B00HXZLB4E\", :price=&gt;10}] \n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2168, "user_id": 4386626, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/f2c9512ee4dac8ccbbf45fc2cf1a8046?s=128&d=identicon&r=PG&f=1", "display_name": "ToddT", "link": "https://stackoverflow.com/users/4386626/toddt"}, "edited": false, "score": 0, "creation_date": 1435177881, "post_id": 31035995, "comment_id": 50097082, "body": "@Jeff Price.. Shivam, good points. thank you. Yes I&#39;m still getting the TypeError in &quot;Jeff Price&#39;s&quot; solution. But your solution doesn&#39;t work either because sent_array is a subset of active_array.. any other ideas?"}, {"owner": {"reputation": 14407, "user_id": 3035830, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/14809f2ad7f14e2867798697ab8f8006?s=128&d=identicon&r=PG", "display_name": "shivam", "link": "https://stackoverflow.com/users/3035830/shivam"}, "reply_to_user": {"reputation": 2168, "user_id": 4386626, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/f2c9512ee4dac8ccbbf45fc2cf1a8046?s=128&d=identicon&r=PG&f=1", "display_name": "ToddT", "link": "https://stackoverflow.com/users/4386626/toddt"}, "edited": false, "score": 0, "creation_date": 1435178288, "post_id": 31035995, "comment_id": 50097321, "body": "@ToddT thats because your input is incorrect. I already mentioned that in the first line of my answer. Im making an assumption."}, {"owner": {"reputation": 14407, "user_id": 3035830, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/14809f2ad7f14e2867798697ab8f8006?s=128&d=identicon&r=PG", "display_name": "shivam", "link": "https://stackoverflow.com/users/3035830/shivam"}, "reply_to_user": {"reputation": 2168, "user_id": 4386626, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/f2c9512ee4dac8ccbbf45fc2cf1a8046?s=128&d=identicon&r=PG&f=1", "display_name": "ToddT", "link": "https://stackoverflow.com/users/4386626/toddt"}, "edited": false, "score": 0, "creation_date": 1435178720, "post_id": 31035995, "comment_id": 50097538, "body": "@ToddT I have updated my solution for the given case too. Please check"}, {"owner": {"reputation": 2168, "user_id": 4386626, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/f2c9512ee4dac8ccbbf45fc2cf1a8046?s=128&d=identicon&r=PG&f=1", "display_name": "ToddT", "link": "https://stackoverflow.com/users/4386626/toddt"}, "edited": false, "score": 0, "creation_date": 1435196934, "post_id": 31035995, "comment_id": 50103414, "body": "Shoot.. that doesn&#39;t work either.. I&#39;m trying to figure this out, but I&#39;m lost.. basically the results of the group_by is exactly the same as the result from the map. It looks like this: B0039UTCYI&quot;=&gt;[{:price=&gt;&quot;79&quot;, :asin1=&gt;&quot;B0039UTCYI&quot;}] so the missing piece now is :sellersku"}], "tags": [], "owner": {"reputation": 14407, "user_id": 3035830, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/14809f2ad7f14e2867798697ab8f8006?s=128&d=identicon&r=PG", "display_name": "shivam", "link": "https://stackoverflow.com/users/3035830/shivam"}, "is_accepted": false, "score": 0, "last_activity_date": 1435178669, "last_edit_date": 1495535203, "creation_date": 1435176395, "answer_id": 31035995, "question_id": 31035567, "link": "https://stackoverflow.com/questions/31035567/add-key-value-pair-to-array-of-hashes-when-unique-ids-match/31035995#31035995", "title": "Add key value pair to Array of Hashes when unique Id&#39;s match", "body": "<p>I am assuming second element of both <code>sent_array</code> and <code>active_array</code> has <code>B00WTEF9FG</code> as asin and asin1 respectively. (seeing your final result)</p>\n\n<p>Now:</p>\n\n<pre><code>a = active_array.group_by{|a| a[:asin1]}\nb = sent_array.group_by{|a| a[:asin]}\na.map { |k,v|\n   v[0].merge(b[k][0])\n}\n\n#  =&gt; [{:price=&gt;39.99, :asin1=&gt;\"B00ND80WKY\", :sellersku=&gt;\"0421077128\", :asin=&gt;\"B00ND80WKY\"}, {:price=&gt;7.99, :asin1=&gt;\"B00WTEF9FG\", :sellersku=&gt;\"0320248102\", :asin=&gt;\"B00WTEF9FG\"}, {:price=&gt;10, :asin1=&gt;\"B00HXZLB4E\", :sellersku=&gt;\"0324823180\", :asin=&gt;\"B00HXZLB4E\"}] \n</code></pre>\n\n<p><strong>Why were you getting TypeError?</strong></p>\n\n<p>You are doing <code>active_array[:asin1]</code>. Remember <code>active_array</code> itself is an Array. Unless you iterate over it, you cannot look for keys.</p>\n\n<p>Another issue with your approach is, you are using <code>Hash#detect</code></p>\n\n<blockquote>\n  <p><code>find</code> is implemented in terms of <code>each</code>. And <code>each</code>, when called on a\n  <code>Hash</code>, returns key-value pairs in form of arrays with 2 elements\n  each. That's why <code>find</code> returns an array.</p>\n</blockquote>\n\n<p><a href=\"https://stackoverflow.com/a/16250770/3035830\">source</a> </p>\n\n<p>Same is true for <code>detect</code>. So <code>x.detect { |key, value| .. }</code> is not going to work as you are expecting it to. </p>\n\n<p><strong>Solution without assumption</strong></p>\n\n<pre><code>a.map { |k,v|\n   b[k] ? v[0].merge(b[k][0]) : v[0]\n}.compact\n# =&gt; [{:price=&gt;39.99, :asin1=&gt;\"B00ND80WKY\", :sellersku=&gt;\"0421077128\", :asin=&gt;\"B00ND80WKY\"}, {:price=&gt;7.99, :asin1=&gt;\"B00YSN9QOG\"}, {:price=&gt;10, :asin1=&gt;\"B00HXZLB4E\", :sellersku=&gt;\"0324823180\", :asin=&gt;\"B00HXZLB4E\"}] \n</code></pre>\n\n<p>Here since <code>asin1 =&gt; \"B00ND80WKY\"</code> has no match, it cannot get <code>sellersku</code>  from other hash.</p>\n"}, {"comments": [{"owner": {"reputation": 2168, "user_id": 4386626, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/f2c9512ee4dac8ccbbf45fc2cf1a8046?s=128&d=identicon&r=PG&f=1", "display_name": "ToddT", "link": "https://stackoverflow.com/users/4386626/toddt"}, "edited": false, "score": 0, "creation_date": 1435243356, "post_id": 31040436, "comment_id": 50128251, "body": "Thanks Cary! Worked like a charm.. and I took some time to figure out what the heck each_with_object does.. And correct me if I&#39;m wrong, but first it creates a new hash, and in stepping thru active_array creates keys from the values in :asin1 and assigns :price as its value."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 2168, "user_id": 4386626, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/f2c9512ee4dac8ccbbf45fc2cf1a8046?s=128&d=identicon&r=PG&f=1", "display_name": "ToddT", "link": "https://stackoverflow.com/users/4386626/toddt"}, "edited": false, "score": 0, "creation_date": 1435252012, "post_id": 31040436, "comment_id": 50134242, "body": "Yes, and <a href=\"http://ruby-doc.org/core-2.2.2/Enumerable.html#method-i-max_by\" rel=\"nofollow noreferrer\">Enumerable#each_with_object</a> does one more thing:it returns the object. It therefore saves two steps over: <code>h={}; active_array.each { |g| ... }; h</code>. That method made its debut in v1.9. That&#39;s before my time--I was just a kid then--but I&#39;m told that pre-1.9,  <a href=\"http://ruby-doc.org/core-2.2.2/Enumerable.html#method-i-reduce\" rel=\"nofollow noreferrer\">Enumerable#reduce</a> (aka <code>inject</code>) would have been used here.  (btw <code>reduce</code> still has many wondrous uses)"}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": true, "score": 2, "last_activity_date": 1435252304, "last_edit_date": 1435252304, "creation_date": 1435200895, "answer_id": 31040436, "question_id": 31035567, "link": "https://stackoverflow.com/questions/31035567/add-key-value-pair-to-array-of-hashes-when-unique-ids-match/31040436#31040436", "title": "Add key value pair to Array of Hashes when unique Id&#39;s match", "body": "<p>For reasons of both efficiency and readability, it makes sense to first construct a lookup hash on <code>active_array</code>:</p>\n\n<pre><code>h = active_array.each_with_object({}) { |g,h| h[g[:asin1]] = g[:price] } \n  #=&gt; {\"B00ND80WKY\"=&gt;39.99, \"B00YSN9QOG\"=&gt;7.99, \"B00HXZLB4E\"=&gt;10}\n</code></pre>\n\n<p>We now merely step through <code>sent_array</code>, updating the hashes:</p>\n\n<pre><code>sent_array.each { |g| g[:price] = h[g[:asin]] if h.key?(g[:asin]) }\n  #=&gt; [{:sellersku=&gt;\"0421077128\", :asin=&gt;\"B00ND80WKY\", :price=&gt;39.99},\n  #    {:sellersku=&gt;\"0320248102\", :asin=&gt;\"B00WTEF9FG\"}, \n  #    {:sellersku=&gt;\"0324823180\", :asin=&gt;\"B00HXZLB4E\", :price=&gt;10}] \n</code></pre>\n\n<p>Retrieving a key-value pair from a hash (<code>h</code>) is much faster, of course,  than searching for a key-value pair in an array of hashes.</p>\n"}], "owner": {"reputation": 2168, "user_id": 4386626, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/f2c9512ee4dac8ccbbf45fc2cf1a8046?s=128&d=identicon&r=PG&f=1", "display_name": "ToddT", "link": "https://stackoverflow.com/users/4386626/toddt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 780, "favorite_count": 1, "accepted_answer_id": 31040436, "answer_count": 3, "score": 1, "last_activity_date": 1435252304, "creation_date": 1435174875, "question_id": 31035567, "link": "https://stackoverflow.com/questions/31035567/add-key-value-pair-to-array-of-hashes-when-unique-ids-match", "title": "Add key value pair to Array of Hashes when unique Id&#39;s match", "body": "<p>I have two arrays of hashes</p>\n\n<pre><code>sent_array = [{:sellersku=&gt;\"0421077128\", :asin=&gt;\"B00ND80WKY\"},\n{:sellersku=&gt;\"0320248102\", :asin=&gt;\"B00WTEF9FG\"}, \n{:sellersku=&gt;\"0324823180\", :asin=&gt;\"B00HXZLB4E\"}]\n\nactive_array = [{:price=&gt;39.99, :asin1=&gt;\"B00ND80WKY\"}, \n{:price=&gt;7.99, :asin1=&gt;\"B00YSN9QOG\"}, \n{:price=&gt;10, :asin1=&gt;\"B00HXZLB4E\"}]\n</code></pre>\n\n<p>I want to loop through sent_array, and find where the value in :asin is equal to the value in :asin1 in active_array, then copy the key &amp; value of :price to sent_array. Resulting in this:</p>\n\n<pre><code>final_array = [{:sellersku=&gt;\"0421077128\", :asin=&gt;\"B00ND80WKY\", :price=&gt;39.99},\n{:sellersku=&gt;\"0320248102\", :asin=&gt;\"B00WTEF9FG\"}, \n{:sellersku=&gt;\"0324823180\", :asin=&gt;\"B00HXZLB4E\", :price=&gt;10}]\n</code></pre>\n\n<p>I tried this, but I get a TypeError - no implicit conversion of Symbol into Integer (TypeError)</p>\n\n<pre><code>sent_array.each do |x|\n x.detect { |key, value| \n  if value == active_array[:asin1]\n    x[:price] &lt;&lt; active_array[:price]\n  end\n }\nend\n</code></pre>\n"}, {"tags": ["ruby", "sinatra", "put"], "comments": [{"owner": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 0, "creation_date": 1435175165, "post_id": 31035398, "comment_id": 50095533, "body": "You have to make a PUT request like with curl, httpie, Postman, etc."}, {"owner": {"reputation": 41846, "user_id": 926143, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/3396173c3d22988be1a0732d184902aa?s=128&d=identicon&r=PG", "display_name": "7stud", "link": "https://stackoverflow.com/users/926143/7stud"}, "edited": false, "score": 1, "creation_date": 1435175246, "post_id": 31035398, "comment_id": 50095578, "body": "See here: <a href=\"http://mikeebert.tumblr.com/post/26877173686/quick-tip-using-put-and-delete-in-sinatra\" rel=\"nofollow noreferrer\">mikeebert.tumblr.com/post/26877173686/&hellip;</a>, but replace the line where he says, <b><i>In order to use POST in Sinatra...</i></b> with <b><i>In order to use PUT in Sinatra...</i></b>  Also, check out the links he refers to."}, {"owner": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "reply_to_user": {"reputation": 1155, "user_id": 258676, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/2fa3aca6fc6f3870ba6595cea9e1536a?s=128&d=identicon&r=PG", "display_name": "NKijak", "link": "https://stackoverflow.com/users/258676/nkijak"}, "edited": false, "score": 0, "creation_date": 1435175432, "post_id": 31035398, "comment_id": 50095694, "body": "@NKijak OMG I GET PAID FOR THIS?! Dave n&#39; Buster tokens?"}, {"owner": {"reputation": 41846, "user_id": 926143, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/3396173c3d22988be1a0732d184902aa?s=128&d=identicon&r=PG", "display_name": "7stud", "link": "https://stackoverflow.com/users/926143/7stud"}, "edited": false, "score": 0, "creation_date": 1435175710, "post_id": 31035398, "comment_id": 50095878, "body": "Also see <b>method_override</b> configuration setting here: <a href=\"http://www.sinatrarb.com/configuration.html\" rel=\"nofollow noreferrer\">sinatrarb.com/configuration.html</a>"}, {"owner": {"reputation": 11068, "user_id": 335847, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/o0AC7.png?s=128&g=1", "display_name": "iain", "link": "https://stackoverflow.com/users/335847/iain"}, "edited": false, "score": 0, "creation_date": 1435273122, "post_id": 31035398, "comment_id": 50144842, "body": "A helpful synopsis and list of HTTP verbs <a href=\"https://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol#Request_methods\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": true, "score": 4, "last_activity_date": 1435174668, "creation_date": 1435174668, "answer_id": 31035508, "question_id": 31035398, "link": "https://stackoverflow.com/questions/31035398/how-does-sinatras-put-work/31035508#31035508", "title": "How does Sinatra&#39;s `put` work?", "body": "<p>The <code>put</code> method corresponds with an HTTP <code>PUT</code> request. If you're making a <code>GET</code>, which is what the browser does by default, you should change that to:</p>\n\n<pre><code>get '/:name' do |name|\n  # ...\nend\n</code></pre>\n\n<p>If you're talking about \"how do I write to the browser\" then you need this:</p>\n\n<pre><code>get '/:name' do |name|\n  \"hello #{name}\"\nend\n</code></pre>\n\n<p>Don't write things to STDOUT with <code>puts</code>, just return the content you want to be sent. That's how Sinatra works.</p>\n\n<p>If you want to make a <code>PUT</code> request you need to tell your tool to use that method. For example, with <code>curl -X PUT</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 435, "user_id": 134809, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/24f49d448968ea24c8630c31fae12758?s=128&d=identicon&r=PG", "display_name": "bparanj", "link": "https://stackoverflow.com/users/134809/bparanj"}, "is_accepted": false, "score": 0, "last_activity_date": 1435206051, "creation_date": 1435206051, "answer_id": 31041141, "question_id": 31035398, "link": "https://stackoverflow.com/questions/31035398/how-does-sinatras-put-work/31041141#31041141", "title": "How does Sinatra&#39;s `put` work?", "body": "<p>You can use Advanced REST Client Chrome Extension. Enter your URL in the URL field, select PUT for the http verb and click on Send button. You will the result in the Response text area.</p>\n"}], "owner": {"reputation": 228, "user_id": 4926416, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/4d070bb169cd682d87532a39be50f5db?s=128&d=identicon&r=PG&f=1", "display_name": "mgtemp", "link": "https://stackoverflow.com/users/4926416/mgtemp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 209, "favorite_count": 0, "accepted_answer_id": 31035508, "answer_count": 2, "score": 1, "last_activity_date": 1435206051, "creation_date": 1435174318, "last_edit_date": 1435174679, "question_id": 31035398, "link": "https://stackoverflow.com/questions/31035398/how-does-sinatras-put-work", "title": "How does Sinatra&#39;s `put` work?", "body": "<p><code>get</code> in Sinatra displays whatever you want when you type the path into the URL. I don't <code>put</code>. How do you call <code>put</code>?</p>\n\n<p>I am trying to run</p>\n\n<pre><code>put '/:name' do |name|\n  puts \"hello \" + name\nend\n</code></pre>\n\n<p>How do I actually call this? I type into my browser:</p>\n\n<pre><code>http://localhost:4567/examplename\\\n</code></pre>\n\n<p>but when I read it in my terminal (cmd prompt), it tries to access it as <code>get</code>. What am I missing regarding how <code>put</code> works?</p>\n"}, {"tags": ["ruby", "url", "opalrb", "voltrb"], "answers": [{"comments": [{"owner": {"reputation": 1798, "user_id": 2636454, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/FyyQr.png?s=128&g=1", "display_name": "GDP2", "link": "https://stackoverflow.com/users/2636454/gdp2"}, "edited": false, "score": 0, "creation_date": 1435242386, "post_id": 31042490, "comment_id": 50127437, "body": "Thanks for the help :)"}], "tags": [], "owner": {"reputation": 96, "user_id": 5043383, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-ezuly86PIHg/AAAAAAAAAAI/AAAAAAAAAwk/InDeLTS5NPo/photo.jpg?sz=128", "display_name": "Julian Fahrer", "link": "https://stackoverflow.com/users/5043383/julian-fahrer"}, "is_accepted": true, "score": 2, "last_activity_date": 1435212667, "creation_date": 1435212667, "answer_id": 31042490, "question_id": 31034666, "link": "https://stackoverflow.com/questions/31034666/how-to-access-a-pages-url-in-voltrb/31042490#31042490", "title": "How to access a page&#39;s URL in VoltRb", "body": "<p>If you are using bindings in your URL, for example</p>\n\n<pre><code>client '/examples/{{ category }}/{{ example }}', controller: 'examples', action: 'template'\n</code></pre>\n\n<p>you can access those in the controller via the params collection:</p>\n\n<pre><code>params._category\nparams._example\n</code></pre>\n\n<p>In other cases you URL should be static anyway.</p>\n"}, {"comments": [{"owner": {"reputation": 1798, "user_id": 2636454, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/FyyQr.png?s=128&g=1", "display_name": "GDP2", "link": "https://stackoverflow.com/users/2636454/gdp2"}, "edited": false, "score": 0, "creation_date": 1435372863, "post_id": 31064689, "comment_id": 50187014, "body": "Thanks, this also useful to know."}], "tags": [], "owner": {"reputation": 876, "user_id": 368602, "user_type": "registered", "profile_image": "https://graph.facebook.com/144900684/picture?type=large", "display_name": "Ryan", "link": "https://stackoverflow.com/users/368602/ryan"}, "is_accepted": false, "score": 1, "last_activity_date": 1435291442, "creation_date": 1435291442, "answer_id": 31064689, "question_id": 31034666, "link": "https://stackoverflow.com/questions/31034666/how-to-access-a-pages-url-in-voltrb/31064689#31064689", "title": "How to access a page&#39;s URL in VoltRb", "body": "<p>Sorry for the late reply.  I added docs for the <code>url</code> method which is available from controllers:</p>\n\n<p><a href=\"http://docs.voltframework.com/en/docs/url.html\" rel=\"nofollow\">http://docs.voltframework.com/en/docs/url.html</a></p>\n"}], "owner": {"reputation": 1798, "user_id": 2636454, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/FyyQr.png?s=128&g=1", "display_name": "GDP2", "link": "https://stackoverflow.com/users/2636454/gdp2"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 1, "accepted_answer_id": 31042490, "answer_count": 2, "score": 1, "last_activity_date": 1435291442, "creation_date": 1435171946, "question_id": 31034666, "link": "https://stackoverflow.com/questions/31034666/how-to-access-a-pages-url-in-voltrb", "title": "How to access a page&#39;s URL in VoltRb", "body": "<p>I'm trying to run some code on a controller in Volt, but only on certain pages. I've looked through the docs, but I'm not really sure how to get access to a given page's URL. Is there perhaps some hidden variable or something in the <code>page</code> model, like so?:</p>\n\n<pre><code>module Main\n  class MyController &lt; Volt::ModelController\n    model :page\n\n    def index\n    end\n\n    def template_page\n      if page.url == \"/foo/bar\" # obviously, this doesn't actually work\n        # run some code\n      end\n    end\n  end\nend\n</code></pre>\n"}, {"tags": ["arrays", "ruby", "hash"], "answers": [{"tags": [], "owner": {"reputation": 86, "user_id": 4425597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9bd696a36f89b9a3c5668049a8bbbf36?s=128&d=identicon&r=PG&f=1", "display_name": "Snags88", "link": "https://stackoverflow.com/users/4425597/snags88"}, "is_accepted": false, "score": 0, "last_activity_date": 1435172412, "creation_date": 1435172412, "answer_id": 31034814, "question_id": 31034549, "link": "https://stackoverflow.com/questions/31034549/modify-hashes-in-an-array-based-on-another-array/31034814#31034814", "title": "Modify hashes in an array based on another array", "body": "<p>The problem you're having is that your <code>(0..a.length)</code> is inclusive. <code>a.length = 2</code> so you want to modify it to be <code>0...a.length</code> which is exclusive.</p>\n\n<p>On a side note, you could use <code>Array#each_with_index</code> like this so you don't have to worry about the length and so on.</p>\n\n<pre><code>a.each_with_index do |hash, index|\n  hash['language'] =  b[index]\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "is_accepted": true, "score": 0, "last_activity_date": 1435173186, "creation_date": 1435173186, "answer_id": 31035042, "question_id": 31034549, "link": "https://stackoverflow.com/questions/31034549/modify-hashes-in-an-array-based-on-another-array/31035042#31035042", "title": "Modify hashes in an array based on another array", "body": "<p>When the <code>each</code> iterator over your <code>Range</code> reaches the last element (i.e. <code>a.length</code>), you will attempt to access a nonexisting element of <code>a</code>.</p>\n\n<p>In your example, <code>a.length</code> is <code>2</code>, so on the last iteration of your <code>each</code>, you will attempt to access <code>a[2]</code>, which doesn't exist. (<code>a</code> only contains 2 elements wich indices 0 and 1.) <code>a[2]</code> evaluates to <code>nil</code>, so you will now attempt to call <code>nil['language']=b[2]</code>, which is syntactic sugar for <code>nil.[]=('language', b[2])</code>, and since <code>nil</code> doesn't have a <code>[]=</code> method, you get a <code>NoMethodError</code>.</p>\n\n<p>The immediate fix is to not iterate off the end of <code>a</code>, by using an exclusive <code>Range</code>:</p>\n\n<pre><code>(0...a.length).each {|c| a[c]['language'] = b[c] }\n</code></pre>\n\n<p>By the way, the code you posted:</p>\n\n<pre><code>(0..a.length).each {|c| puts c }\n</code></pre>\n\n<p>should <em>clearly</em> have shown you that you iterate till <code>2</code> instead of <code>1</code>.</p>\n\n<p>That's only the immediate fix, however. The <em>real</em> fix is to simply never iterate over a datastructure manually. That's what iterators are for.</p>\n\n<p>Something like this, where Ruby will keep track of the index for you:</p>\n\n<pre><code>a.each_with_index do |hsh, i| hsh['language'] = b[i] end\n</code></pre>\n\n<p>Or, without fiddling with indices at all:</p>\n\n<pre><code>a.zip(b.zip(['language'].cycle).map(&amp;:reverse).map(&amp;Array.method(:[])).map(&amp;:to_h)).map {|x, y| x.merge!(y) }\n</code></pre>\n\n<p>[Note: this last one doesn't mutate the original <code>Array</code>s and <code>Hash</code>es unlike the other ones.]</p>\n"}, {"tags": [], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "is_accepted": false, "score": 1, "last_activity_date": 1435174422, "creation_date": 1435174422, "answer_id": 31035439, "question_id": 31034549, "link": "https://stackoverflow.com/questions/31034549/modify-hashes-in-an-array-based-on-another-array/31035439#31035439", "title": "Modify hashes in an array based on another array", "body": "<pre><code>a.zip(b){|h, v| h[\"language\"] = v}\na # =&gt; [\n  #      {\"one\"=&gt;1, \"two\"=&gt;2, \"language\"=&gt;\"english\"},\n  #      {\"uno\"=&gt;1, \"dos\"=&gt;2, \"language\"=&gt;\"spanish\"}\n  #    ]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "is_accepted": false, "score": 0, "last_activity_date": 1435174669, "creation_date": 1435174669, "answer_id": 31035509, "question_id": 31034549, "link": "https://stackoverflow.com/questions/31034549/modify-hashes-in-an-array-based-on-another-array/31035509#31035509", "title": "Modify hashes in an array based on another array", "body": "<p>Here is another method you could use </p>\n\n<pre><code> b.each_with_index.with_object(a) do |(lang,i),obj|\n   obj[i][\"language\"] = lang\n   obj\n end\n #=&gt;[\n     {\"one\"=&gt;1, \"two\"=&gt;2, \"language\"=&gt;\"english\"}, \n     {\"uno\"=&gt;1, \"dos\"=&gt;2, \"language\"=&gt;\"spanish\"}\n    ]\n</code></pre>\n\n<p>What this does is creates an <code>Enumerator</code> for <code>b</code> with <code>[element,index]</code> then it calls <code>with_object</code> using <code>a</code> as the object. It then iterates over the <code>Enumerator</code> passing in each language and its index along with the <code>a</code> object. It then uses the index from <code>b</code> to find the proper index in <code>a</code> and adds a language key to the hash that is equal to the language. </p>\n\n<p>Please know this is a destructive method where the objects in <code>a</code> will mutate during the process. You could make it non destructive using <code>with_object(a.map(&amp;:dup))</code> this will <code>dup</code> the hashes in a and the originals will remain untouched.</p>\n\n<p>All that being said I think <code>YAML</code> would be better suited for a task like this but I am not sure what your constraints are. As an example:   </p>\n\n<pre><code>yml = &lt;&lt;YML\n-\n  one: 1\n  two: 2\n  language: \"english\"\n-\n  uno: 1\n  dos: 2\n  language: \"spanish\"\nYML\nrequire 'yaml'\nYAML.load(yml)\n#=&gt;[\n     {\"one\"=&gt;1, \"two\"=&gt;2, \"language\"=&gt;\"english\"}, \n     {\"uno\"=&gt;1, \"dos\"=&gt;2, \"language\"=&gt;\"spanish\"}\n    ]\n</code></pre>\n\n<p>Although using <code>YAML</code> I would change the structure for numbers to be more like language => Array of numbers by index e.g. <code>{\"english\" =&gt; [\"zero\",\"one\",\"two\"]}</code>. That way you can can access them like <code>[\"english\"][0] #=&gt; \"zero\"</code></p>\n"}], "owner": {"reputation": 531, "user_id": 4801466, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-LKQUV9yTvkc/AAAAAAAAAAI/AAAAAAAAABM/3umg80-LeJM/photo.jpg?sz=128", "display_name": "Iv&#225;n Cort&#233;s Romero", "link": "https://stackoverflow.com/users/4801466/iv%c3%a1n-cort%c3%a9s-romero"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 33, "favorite_count": 0, "accepted_answer_id": 31035042, "answer_count": 4, "score": 0, "last_activity_date": 1435174669, "creation_date": 1435171559, "last_edit_date": 1435174211, "question_id": 31034549, "link": "https://stackoverflow.com/questions/31034549/modify-hashes-in-an-array-based-on-another-array", "title": "Modify hashes in an array based on another array", "body": "<p>I have two arrays like this:</p>\n\n<pre><code>a = [{'one'=&gt;1, 'two'=&gt;2},{'uno'=&gt;1, 'dos'=&gt;2}]\nb = ['english', 'spanish']\n</code></pre>\n\n<p>I need to add a key-value pair to each hash in <code>a</code> to get this:</p>\n\n<pre><code>a = [{'one'=&gt;1, 'two'=&gt;2, 'language'=&gt;'english'},{'uno'=&gt;1, 'dos'=&gt;2, 'language'=&gt;'spanish'}]\n</code></pre>\n\n<p>I attempted this:</p>\n\n<pre><code>(0..a.length).each {|c| a[c]['language']=b[c]}\n</code></pre>\n\n<p>and it does not work. With this:</p>\n\n<pre><code>a[1]['language']=b[1]\n(0..a.length).each {|c| puts c}\n</code></pre>\n\n<p>an error is shown:</p>\n\n<pre><code>NoMethodError (undefined method '[]=' for nil:NilClass)\n</code></pre>\n\n<p>How can I fix this?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "angularjs"], "comments": [{"owner": {"reputation": 2683, "user_id": 595152, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/c171c7edd235e33799e747bf8b7d3dbb?s=128&d=identicon&r=PG", "display_name": "Betty St", "link": "https://stackoverflow.com/users/595152/betty-st"}, "edited": false, "score": 0, "creation_date": 1435171841, "post_id": 31034517, "comment_id": 50093668, "body": "looks good to me, what is your actual question? :)"}, {"owner": {"reputation": 85, "user_id": 5045936, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c788a94550c08415f672e9bd7c26920?s=128&d=identicon&r=PG&f=1", "display_name": "user5045936", "link": "https://stackoverflow.com/users/5045936/user5045936"}, "reply_to_user": {"reputation": 2683, "user_id": 595152, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/c171c7edd235e33799e747bf8b7d3dbb?s=128&d=identicon&r=PG", "display_name": "Betty St", "link": "https://stackoverflow.com/users/595152/betty-st"}, "edited": false, "score": 0, "creation_date": 1435172065, "post_id": 31034517, "comment_id": 50093803, "body": "I want to be able to get to a new function called &quot;angular&quot;.  If I try to go to positions/angular it tries to go to the &quot;show&quot; method and thinks the id is &quot;angular&quot;.  &quot;Angular&quot; will basically be a copy of &quot;index&quot; but with a few things changed."}, {"owner": {"reputation": 17529, "user_id": 398606, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9922e981f96ab7d809dfdc02c723fd41?s=128&d=identicon&r=PG", "display_name": "Sunil D.", "link": "https://stackoverflow.com/users/398606/sunil-d"}, "edited": false, "score": 0, "creation_date": 1435172668, "post_id": 31034517, "comment_id": 50094162, "body": "Because the show route expects a url like <code>&#47;positions&#47;:id</code> where <code>:id</code> can be any string (not just numbers), you need to use a route that does not match the pattern &quot;/positions/XXX&quot;. Use different pattern for your route  (use better names than these): /positions/whatever/angular or /positions_angular or /whatever"}, {"owner": {"reputation": 85, "user_id": 5045936, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c788a94550c08415f672e9bd7c26920?s=128&d=identicon&r=PG&f=1", "display_name": "user5045936", "link": "https://stackoverflow.com/users/5045936/user5045936"}, "edited": false, "score": 0, "creation_date": 1435199399, "post_id": 31034517, "comment_id": 50103907, "body": "Thanks a lot!  I ended up just adding the following to the routes, making a new angular function and a new angular view.   get &#39;positions_angular&#39; =&gt; &#39;positions#angular&#39;"}], "answers": [{"tags": [], "owner": {"reputation": 85, "user_id": 5045936, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c788a94550c08415f672e9bd7c26920?s=128&d=identicon&r=PG&f=1", "display_name": "user5045936", "link": "https://stackoverflow.com/users/5045936/user5045936"}, "is_accepted": false, "score": 0, "last_activity_date": 1435199733, "creation_date": 1435199733, "answer_id": 31040276, "question_id": 31034517, "link": "https://stackoverflow.com/questions/31034517/add-a-route-to-ruby-on-rails-to-test-some-code/31040276#31040276", "title": "Add a route to ruby on rails to test some code", "body": "<p>I added this to routes.rb</p>\n\n<pre><code>       get 'positions_angular' =&gt; 'positions#angular'\n</code></pre>\n\n<p>I added an angular function to my positions_controller.rb, and created an angular view.</p>\n"}], "owner": {"reputation": 85, "user_id": 5045936, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c788a94550c08415f672e9bd7c26920?s=128&d=identicon&r=PG&f=1", "display_name": "user5045936", "link": "https://stackoverflow.com/users/5045936/user5045936"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 44, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1435199733, "creation_date": 1435171471, "question_id": 31034517, "link": "https://stackoverflow.com/questions/31034517/add-a-route-to-ruby-on-rails-to-test-some-code", "title": "Add a route to ruby on rails to test some code", "body": "<p>I have a Ruby on Rails project.  I am trying to create a new /positions page that will use Angular.  I want to be able to test the new code and the old code at the same time, so I can't overwrite the current function.</p>\n\n<p>To get to my old code, I simply go to /positions, this executes the code in the positions controller in the index function.</p>\n\n<p>I'd like to create a new method in /positions called \"angular\" so that when I got to /positions/angular I can get to it.  If I just go to /positions I can still get to my current index function.</p>\n\n<p>How do I setup my route?  Also, is there a better way to do this?\nHere is how it currently looks:</p>\n\n<pre><code>resources :positions do\nget 'add_edit', on: :collection\nmember do\n  get 'angular',    action: :angular,    as: :angular\n  get 'add_transaction/:order_number',    action: :add_transaction,    as: :add_transaction\n  get 'remove_transaction/:order_number', action: :remove_transaction, as: :remove_transaction\nend\n</code></pre>\n\n<p>end</p>\n"}, {"tags": ["ruby", "parsing"], "answers": [{"comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1435171686, "post_id": 31034581, "comment_id": 50093564, "body": "That&#39;s close, but not quite. Between the <i>quotes</i>, not the brackets."}, {"owner": {"reputation": 247, "user_id": 3281388, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/5e916cd434f861cc125e843059eb41e1?s=128&d=identicon&r=PG&f=1", "display_name": "user3281388", "link": "https://stackoverflow.com/users/3281388/user3281388"}, "edited": false, "score": 1, "creation_date": 1435171817, "post_id": 31034581, "comment_id": 50093652, "body": "Thanks so much shivam - I appreciate your help. Works perfectly!"}], "tags": [], "owner": {"reputation": 14407, "user_id": 3035830, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/14809f2ad7f14e2867798697ab8f8006?s=128&d=identicon&r=PG", "display_name": "shivam", "link": "https://stackoverflow.com/users/3035830/shivam"}, "is_accepted": true, "score": 2, "last_activity_date": 1435171694, "last_edit_date": 1435171694, "creation_date": 1435171650, "answer_id": 31034581, "question_id": 31034488, "link": "https://stackoverflow.com/questions/31034488/parsing-between-quotes-in-ruby/31034581#31034581", "title": "Parsing between quotes in Ruby", "body": "<p>You can use regex. Here:</p>\n\n<pre><code>puts str.scan(/\"(.*)\"/)[0][0]\n# ^This is the text I want to save.\n</code></pre>\n\n<p>The above regex basically looks for everything that is between <code>\"</code> and <code>\"</code> and returns them.</p>\n"}, {"tags": [], "owner": {"reputation": 326, "user_id": 4749545, "user_type": "registered", "accept_rate": 10, "profile_image": "https://lh3.googleusercontent.com/-aNUbSys3fyY/AAAAAAAAAAI/AAAAAAAAACk/OhdFdx7TaDg/photo.jpg?sz=128", "display_name": "Rohit Deshmukh", "link": "https://stackoverflow.com/users/4749545/rohit-deshmukh"}, "is_accepted": false, "score": 0, "last_activity_date": 1435172350, "last_edit_date": 1435172350, "creation_date": 1435172232, "answer_id": 31034755, "question_id": 31034488, "link": "https://stackoverflow.com/questions/31034488/parsing-between-quotes-in-ruby/31034755#31034755", "title": "Parsing between quotes in Ruby", "body": "<p>If you want to get array of arrays of different size, you may do it in two steps: <code>.split</code> and <code>.scan</code>. In your case <code>.scan</code> has <code>()</code> on two sides of <code>|</code>, that's why you have trouble with nil (Which supposed to be useful, but not it your case). So you have either use <code>.flatten.compact</code> or add the 3rd step of <code>.delete</code>.</p>\n\n<p>Try this:</p>\n\n<pre><code>text.split(\"\\n\").map{|i|p i.scan(/'([^']+)'|(\\w+)/).flatten.compact}\ntext.split(\"\\n\").map{|i|p i.scan(/'[^']+'|\\w+/).map{|i|i.delete \"'\"}}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 18079, "user_id": 503402, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/873ad707fb34aac8fbdfbfec676e02e9?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/503402/max"}, "edited": false, "score": 2, "creation_date": 1435174182, "post_id": 31034922, "comment_id": 50094983, "body": "It&#39;s simple enough to change the <code>.</code> to <code>[^&quot;]</code> to account for multiple quotes. Also you don&#39;t need to escape <code>&quot;</code> in regex."}, {"owner": {"reputation": 247, "user_id": 3281388, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/5e916cd434f861cc125e843059eb41e1?s=128&d=identicon&r=PG&f=1", "display_name": "user3281388", "link": "https://stackoverflow.com/users/3281388/user3281388"}, "edited": false, "score": 0, "creation_date": 1435176565, "post_id": 31034922, "comment_id": 50096369, "body": "Yes, very good point @Joshua - I was just thinking about that as well."}], "tags": [], "owner": {"reputation": 2009, "user_id": 20769, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/922e7e3c612566756735b2def78827d8?s=128&d=identicon&r=PG", "display_name": "Joshua", "link": "https://stackoverflow.com/users/20769/joshua"}, "is_accepted": false, "score": 2, "last_activity_date": 1435178664, "last_edit_date": 1435178664, "creation_date": 1435172797, "answer_id": 31034922, "question_id": 31034488, "link": "https://stackoverflow.com/questions/31034488/parsing-between-quotes-in-ruby/31034922#31034922", "title": "Parsing between quotes in Ruby", "body": "<p>This should work - assuming you don't expect there to be multiple quoted sections. The 1 specifies the match group you want.</p>\n\n<pre><code>puts str[/\"(.*)\"/, 1]                                            \n# ^This is the text I want to save.\n</code></pre>\n"}], "owner": {"reputation": 247, "user_id": 3281388, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/5e916cd434f861cc125e843059eb41e1?s=128&d=identicon&r=PG&f=1", "display_name": "user3281388", "link": "https://stackoverflow.com/users/3281388/user3281388"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 160, "favorite_count": 0, "accepted_answer_id": 31034581, "answer_count": 3, "score": 0, "last_activity_date": 1435178664, "creation_date": 1435171377, "question_id": 31034488, "link": "https://stackoverflow.com/questions/31034488/parsing-between-quotes-in-ruby", "title": "Parsing between quotes in Ruby", "body": "<p>I'm trying to parse a string, but I'm running into trouble: </p>\n\n<p><code>str = \" @Var(\\\"^This is the text I want to save.\\\") \"</code></p>\n\n<p>What I want to parse out is: <code>^This is the text I want to save.</code> Basically anything that's between the quotes. </p>\n\n<p>I was trying to use a <code>str.split()</code>... but I'm unsure about what to specify. </p>\n\n<p>Thanks</p>\n"}, {"tags": ["ruby", "switch-statement"], "answers": [{"tags": [], "owner": {"reputation": 24966, "user_id": 2001031, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/bd4f0d39f82be9c22f6f01c80d7ad800?s=128&d=identicon&r=PG", "display_name": "Neil Slater", "link": "https://stackoverflow.com/users/2001031/neil-slater"}, "is_accepted": true, "score": 6, "last_activity_date": 1435171693, "last_edit_date": 1435171693, "creation_date": 1435171244, "answer_id": 31034447, "question_id": 31034253, "link": "https://stackoverflow.com/questions/31034253/alternative-to-ruby-case-statement/31034447#31034447", "title": "Alternative to Ruby Case statement", "body": "<p>I am assuming that at some point the system or end user is effectively selecting a text type and you need to convert that into a class to use. Otherwise you could write calling code that simply referred and instantiated the correct class.</p>\n\n<p>You can make what you have cleaner by defining a mapping between the symbol <code>type</code> and the class. So you could do this in the scope of <code>create_account</code>:</p>\n\n<pre><code>ACCOUNT_CLASS_FOR = Hash[\n  current:  CurrentAccount,\n  savings:  SavingsAccount,\n  business: BusinessAccount,\n  ir:       IRAccount,\n  smb:      SMBAccount,\n  student:  StudentAccount\n]\n\ndef create_account(type, holder)\n  if account_class = ACCOUNT_CLASS_FOR[ type ]\n    account_class.new( holder, @account_number )\n  else\n    raise \"Bad account type #{type}\"\n  end\nend\n</code></pre>\n\n<p>This has less repeated code, and makes the mapping between the symbol names and matching Ruby classes more explicit. If you need to apply or test the conversion elsewhere, you could make the constant available in a different scope without repeating yourself.</p>\n\n<p>You can make this even cleaner by having each class know its own label e.g.</p>\n\n<pre><code>class CurrentAccount\n  def self.label\n     :current\n  end\nend\n</code></pre>\n\n<p>Then you could have something like this:</p>\n\n<pre><code>ALLOWED_ACCOUNT_CLASSES = [CurrentAccount,SavingsAccount,BusinessAccount, # etc.\n\nACCOUNT_CLASS_FOR = Hash[\n  ALLOWED_ACCOUNT_CLASSES.map { |klass| [klass.label, klass] }\n]\n</code></pre>\n\n<p>Note it's quite common practice to use the mis-spelled <code>klass</code> variable here to avoid clashing with Ruby's <code>class</code> keyword, but you could also just use <code>account_class</code></p>\n"}, {"comments": [{"owner": {"reputation": 3533, "user_id": 1955990, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/5112f123adc37e54a218f4571b784f32?s=128&d=identicon&r=PG", "display_name": "aceofbassgreg", "link": "https://stackoverflow.com/users/1955990/aceofbassgreg"}, "edited": false, "score": 0, "creation_date": 1435193286, "post_id": 31034573, "comment_id": 50102637, "body": "I would break this to two lines (one to store the class name in a variable, the next to instantiate it) and add error handling, but I prefer this to the accepted answer."}], "tags": [], "owner": {"reputation": 6267, "user_id": 1144104, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/c135bc644610fabc6e059b73fdd7f8ad?s=128&d=identicon&r=PG", "display_name": "jazzytomato", "link": "https://stackoverflow.com/users/1144104/jazzytomato"}, "is_accepted": false, "score": 3, "last_activity_date": 1435171633, "creation_date": 1435171633, "answer_id": 31034573, "question_id": 31034253, "link": "https://stackoverflow.com/questions/31034253/alternative-to-ruby-case-statement/31034573#31034573", "title": "Alternative to Ruby Case statement", "body": "<p>Here's another way, but you would need the type to be accordingly named with the class (ie.  :ir -> :i_r )</p>\n\n<pre><code>def create_account(type, holder)\n    Object.const_get(type.to_s.camelize + \"Account\").new(holder, @account_number)\nend\n</code></pre>\n\n<p>Even if this one is shorter, I like Neil answer because it looks safer</p>\n"}], "owner": {"reputation": 468, "user_id": 4543415, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/96xKS.jpg?s=128&g=1", "display_name": "Phil Brockwell", "link": "https://stackoverflow.com/users/4543415/phil-brockwell"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1648, "favorite_count": 0, "accepted_answer_id": 31034447, "answer_count": 2, "score": 3, "last_activity_date": 1435171693, "creation_date": 1435170602, "question_id": 31034253, "link": "https://stackoverflow.com/questions/31034253/alternative-to-ruby-case-statement", "title": "Alternative to Ruby Case statement", "body": "<p>I am currently writing a program for a banking administration system using Ruby. One of the capabilities of this system is that it can create a new account, accounts can be one of six types.</p>\n\n<p><strong>I have the following method in my controller to cater for this function:</strong></p>\n\n<pre><code>def create_account(type, holder)\n  case type\n  when :current  then CurrentAccount.new(holder, @account_number)\n  when :savings  then SavingsAccount.new(holder, @account_number)\n  when :business then BusinessAccount.new(holder, @account_number)\n  when :ir       then IRAccount.new(holder, @account_number)\n  when :smb      then SMBAccount.new(holder, @account_number)\n  when :student  then StudentAccount.new(holder, @account_number)\n  end\nend\n</code></pre>\n\n<p>Each of these accounts inherits from a base account and will eventually contain individual attributes, e.g. Interest rate, overdraft, etc.</p>\n\n<p>Although this is functional and delivers the required results it feels a bit lengthy. However I can't think of any obvious ways to refactor.</p>\n\n<p>Any suggestions welcome...</p>\n"}, {"tags": ["ruby", "activemq", "stomp"], "owner": {"reputation": 13, "user_id": 4801376, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/88a0d63f600780bfbb371be6cded53a9?s=128&d=identicon&r=PG&f=1", "display_name": "Abhishek", "link": "https://stackoverflow.com/users/4801376/abhishek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 46, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1435170130, "creation_date": 1435170130, "question_id": 31034115, "link": "https://stackoverflow.com/questions/31034115/reconnect-an-activemq-subscriber-over-stomp-protocol-written-in-ruby-if-activemq", "title": "reconnect an activemq subscriber over stomp protocol written in ruby if activemq broker goes down", "body": "<p>I have an activemq subscriber written in ruby i want it to reconnect back automatically if activemq broker goes down, when it comes up. I tried adding failover protocol and it does work for one time but not after that.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "heroku", "amazon-s3"], "owner": {"reputation": 23981, "user_id": 2813589, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/9axBj.jpg?s=128&g=1", "display_name": "\u30a2\u30ec\u30c3\u30af\u30b9", "link": "https://stackoverflow.com/users/2813589/%e3%82%a2%e3%83%ac%e3%83%83%e3%82%af%e3%82%b9"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 59, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1435169885, "creation_date": 1435169885, "question_id": 31034053, "link": "https://stackoverflow.com/questions/31034053/locally-my-app-is-loading-assets-from-s3-properly-with-e-production-but-on-hero", "title": "Locally my app is loading assets from S3 properly with -e production but on Heroku not", "body": "<p>I have an app which assets are served by S3. When I'm running it locally with <strong>-e production</strong> it's working well, each asset is being loaded <strong>from amazon S3</strong> correctly.</p>\n\n<p>However, on Heroku they aren't. Moreover, they aren't get found because the names of, for example, of <code>application-....*.css</code> and <code>application-....*.js</code> on heroku is different from the names of the corresponding files on localhost and S3.</p>\n\n<p>On localhost it loads, say:</p>\n\n<pre><code>https://s3.amazonaws.com/aaa/assets/application-aaabbbcccdd.css \n</code></pre>\n\n<p>and this file does exist on S3. But on Heroku it loads:</p>\n\n<pre><code>https://s3.amazonaws.com/aaa/assets/application-eeefffccc.css \n</code></pre>\n\n<p>and it doesn't exist on S3 (<strong>what makes it load the different file?</strong>). It's not forbidden or something, it just doesn't exist. </p>\n\n<p>The same goes for <code>application-fdsfdsfdsfs.js</code></p>\n\n<p>I uploaded the assets to S3 using s3cmd (please don't suggest me to use any gem).</p>\n\n<pre><code>cd public\ns3cmd sync . s3://......\n</code></pre>\n\n<p>Here's my <strong>production.rb</strong></p>\n\n<pre><code>  config.action_controller.asset_host = \"https://s3.amazonaws.com/my_bucket\"\n  config.assets.initialize_on_precompile = true\n  config.assets.digest = true\n  config.assets.enabled = true\n  config.assets.compile = false\n</code></pre>\n\n<p>What's the matter?</p>\n\n<p>P.S. A few hours ago it somehow was working almost well on Heroku, meaning, it didn't load the files mentioned above properly.</p>\n"}, {"tags": ["jquery", "ruby-on-rails", "ruby", "ajax", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 576, "user_id": 4628440, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/afa3da493842e50c2fcfcf3805165065?s=128&d=identicon&r=PG", "display_name": "Santiago Su&#225;rez", "link": "https://stackoverflow.com/users/4628440/santiago-su%c3%a1rez"}, "edited": false, "score": 0, "creation_date": 1435172996, "post_id": 31033997, "comment_id": 50094339, "body": "your <code>flash notice</code> is not working because flash notice doesn&#39;t work with ajax by default, look at this: <a href=\"http://stackoverflow.com/questions/366311/how-do-you-handle-rails-flash-with-ajax-requests\" title=\"how do you handle rails flash with ajax requests\">stackoverflow.com/questions/366311/&hellip;</a>"}, {"owner": {"reputation": 576, "user_id": 4628440, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/afa3da493842e50c2fcfcf3805165065?s=128&d=identicon&r=PG", "display_name": "Santiago Su&#225;rez", "link": "https://stackoverflow.com/users/4628440/santiago-su%c3%a1rez"}, "edited": false, "score": 0, "creation_date": 1435173191, "post_id": 31033997, "comment_id": 50094464, "body": "also, can I see your index view, or wherever your ajax method is being called? also on your controller on the create you are not responding anything with js format, take a look at the controller part here: <a href=\"http://guides.rubyonrails.org/working_with_javascript_in_rails.html\" rel=\"nofollow noreferrer\">guides.rubyonrails.org/working_with_javascript_in_rails.html</a>"}, {"owner": {"reputation": 735, "user_id": 2188368, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a0a43b221a642dda68bc5cb3296fdebf?s=128&d=identicon&r=PG", "display_name": "pyRabbit", "link": "https://stackoverflow.com/users/2188368/pyrabbit"}, "edited": false, "score": 0, "creation_date": 1435173439, "post_id": 31033997, "comment_id": 50094581, "body": "Can&#39;t you respond with a .js file instead and using Javascript add the record to the modal or add the flash error to the page? Whichever may occur."}, {"owner": {"reputation": 838, "user_id": 3904392, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/655c5717c3eaed5807ab199604a096ad?s=128&d=identicon&r=PG", "display_name": "shroy", "link": "https://stackoverflow.com/users/3904392/shroy"}, "reply_to_user": {"reputation": 576, "user_id": 4628440, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/afa3da493842e50c2fcfcf3805165065?s=128&d=identicon&r=PG", "display_name": "Santiago Su&#225;rez", "link": "https://stackoverflow.com/users/4628440/santiago-su%c3%a1rez"}, "edited": false, "score": 0, "creation_date": 1435174597, "post_id": 31033997, "comment_id": 50095209, "body": "@SantiagoSu&#225;rez - Thank you for the response with the helpful links.  This is my first time using JQuery and AJAX so I&#39;m not too familiar with what&#39;s exactly needed. I&#39;m using the simple <code>remote: true</code> functionality and some JQuery lines I found on SO to get the job done. I&#39;ll add the <code>respond_to format.js</code>."}, {"owner": {"reputation": 838, "user_id": 3904392, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/655c5717c3eaed5807ab199604a096ad?s=128&d=identicon&r=PG", "display_name": "shroy", "link": "https://stackoverflow.com/users/3904392/shroy"}, "reply_to_user": {"reputation": 735, "user_id": 2188368, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a0a43b221a642dda68bc5cb3296fdebf?s=128&d=identicon&r=PG", "display_name": "pyRabbit", "link": "https://stackoverflow.com/users/2188368/pyrabbit"}, "edited": false, "score": 0, "creation_date": 1435174723, "post_id": 31033997, "comment_id": 50095282, "body": "@pyRabbit - I&#39;m not too sure how to do that but I assumed Rails would make it fairly easy with the Ruby code already in the controller. However, this is new territory for me and javascript is my greatest weakness.."}, {"owner": {"reputation": 735, "user_id": 2188368, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a0a43b221a642dda68bc5cb3296fdebf?s=128&d=identicon&r=PG", "display_name": "pyRabbit", "link": "https://stackoverflow.com/users/2188368/pyrabbit"}, "edited": false, "score": 0, "creation_date": 1435175155, "post_id": 31033997, "comment_id": 50095531, "body": "Trust me, I am bad at Javascript too. However you can use a respond_to block and respond with a .js file... This would look for (as oddly as it sounds) a file inside your app/views/feature for a file called the create.js (assuming your submitting a request to the create action."}, {"owner": {"reputation": 735, "user_id": 2188368, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a0a43b221a642dda68bc5cb3296fdebf?s=128&d=identicon&r=PG", "display_name": "pyRabbit", "link": "https://stackoverflow.com/users/2188368/pyrabbit"}, "edited": false, "score": 1, "creation_date": 1435175248, "post_id": 31033997, "comment_id": 50095580, "body": "Here you go... check this out <a href=\"http://codebeerstartups.com/2012/12/ajaxify-your-site-with-remote-true/\" rel=\"nofollow noreferrer\">codebeerstartups.com/2012/12/ajaxify-your-site-with-remote-t&zwnj;&#8203;rue</a> I guarantee this is the pattern you are looking for"}], "owner": {"reputation": 838, "user_id": 3904392, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/655c5717c3eaed5807ab199604a096ad?s=128&d=identicon&r=PG", "display_name": "shroy", "link": "https://stackoverflow.com/users/3904392/shroy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 408, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1435174784, "creation_date": 1435169708, "last_edit_date": 1435174784, "question_id": 31033997, "link": "https://stackoverflow.com/questions/31033997/rails-display-record-after-ajax-save", "title": "Rails: Display Record After AJAX Save", "body": "<p>I have a complex form page that saves records via AJAX without redirecting to the <code>show</code> page. Once the record is saved, there is a button that appears called <code>Execute &amp; Confirm</code>. </p>\n\n<p><strong>Note:</strong> </p>\n\n<ul>\n<li><p><code>save</code> is really saving a <code>draft</code>, so it saves the\nrecord in the database until the user executes it.</p></li>\n<li><p><code>execute</code> is when the record is used in a rake task.</p></li>\n</ul>\n\n<p>When clicking on the <code>Execute &amp; Confirm</code> button, a <strong>modal</strong> appears in which I would like it to display the record that was just saved - asking the user if it is correct and to other execute or cancel. </p>\n\n<p>I thought I would be able to use the instance variables in my controller's <code>create</code> method by using the <code>show</code> method in it but I get <code>undefined method</code> error for each attribute's method such as <code>@campaign.program.name</code>. I'm also suspicious that it's not being called since my <code>flash[:success]</code> does not appear when the record is saved via AJAX.</p>\n\n<p>Here is the controller..</p>\n\n<p><strong>controllers/campaigns_controller.rb</strong></p>\n\n<pre><code>class CampaignsController &lt; ApplicationController\n\n      def index\n        @campaigns = Campaign.order(\"created_at DESC\").page(params[:page]).per(7)\n        @total_campaigns = Campaign.all\n      end\n\n      def new\n        @campaign = Campaign.new\n      end\n\n      def create\n        @campaign = Campaign.new(campaign_params)\n\n        if @campaign.save\n\n            zip = Uploadzip.find(params[:uploadzip_id])\n            zip.campaign = @campaign\n            zip.save\n\n            flash[:success] = \"Successfully saved a draft.\"\n            respond_to format.js\n            show\n        else\n            flash[:error] = \"There was a problem saving your Campaign.\"\n            redirect_to new_campaign_path\n        end\n      end\n\n      def show\n        @campaign = Campaign.includes(:program, :uploadzip, :plan, :uploadpdfs).find(params[:id])\n      end\n\n  private\n\n      def campaign_params\n        params.require(:campaign).permit(:name, :comment, :plan_id, :program_id, :campaign_id, uploadpdf_ids: [], channels: [])\n      end\nend\n</code></pre>\n\n<p>How do I display the newly saved record in the execute modal?</p>\n\n<p><strong>EDIT:</strong></p>\n\n<p><em>Note: I mistakenly thought my form was on the <code>create</code> page but realized is was actually the <code>new</code>. I tried adding the same functionality with the <code>show</code> method but still got the same <code>undefined method</code> errors.</em> </p>\n\n<p><strong>views/campaigns/_form.html.erb</strong></p>\n\n<pre><code>&lt;%= form_for @campaign, url: {action: \"create\"}, remote: true, validate: true do |f| %&gt;\n\n\n  &lt;div class=\"row full-width\"&gt;\n    &lt;div class=\"large-6 columns camp-form-section\"&gt;\n        &lt;h3 class=\"row\"&gt;Campaign Attributes&lt;/h3&gt;\n\n            &lt;div class=\"row\"&gt;\n                &lt;div class=\"large-4 columns\"&gt;\n                    &lt;label class=\"right-inline\"&gt;\n                        &lt;%= f.label :campaign_name, \"Campaign Name\", class: \"right-label\" %&gt;\n                        &lt;/label&gt;\n                  &lt;/div&gt;\n                          &lt;div class=\"large-8 columns\"&gt;\n                                &lt;%= f.text_field :name %&gt;\n                          &lt;/div&gt;\n                &lt;/div&gt;\n\n        &lt;div class=\"row\"&gt;\n            &lt;div class=\"large-4 columns\"&gt;\n                &lt;label class=\"right-inline\"&gt;\n                    &lt;%= f.label :comments %&gt;\n                    &lt;/label&gt;\n                    &lt;/div&gt;\n                    &lt;div class=\"large-8 columns\"&gt;\n                    &lt;%= f.text_area :comment %&gt;\n            &lt;/div&gt;\n        &lt;/div&gt;\n\n        &lt;div class=\"row\"&gt;\n            &lt;div class=\"large-4 columns\"&gt;\n                &lt;label class=\"right-inline\"&gt;\n                    &lt;%= f.label :program %&gt;\n                    &lt;/label&gt;\n              &lt;/div&gt;\n                      &lt;div class=\"large-8 columns\"&gt;\n                            &lt;%= f.select :program_id, \n                                    Program.all.collect { |p| [ p.name, p.id ] }, { include_blank: true }, validate: { presence: true } %&gt;\n                      &lt;/div&gt;\n            &lt;/div&gt;\n\n    &lt;/div&gt; &lt;!-- large-6 --&gt;\n\n\n    &lt;div class=\"large-6 columns camp-form-section\"&gt;\n      &lt;h3 class=\"row\"&gt;Campaign Content&lt;/h3&gt;\n\n        &lt;div class=\"row\"&gt;\n            &lt;div class=\"large-3 columns\"&gt;\n                &lt;label class=\"right-inline\"&gt;\n                    &lt;%= f.label :data_file, \"Data File (.zip)\", class: \"right-label\" %&gt;\n                    &lt;/label&gt;\n              &lt;/div&gt;\n                      &lt;div class=\"large-9 columns\"&gt;\n                            &lt;%= select_tag :uploadzip_id, \n                                    options_from_collection_for_select(\n                                    Uploadzip.all, :id, :file_name\n                                    ), { include_blank: \"Include a Zip File\" } %&gt;\n                      &lt;/div&gt;\n            &lt;/div&gt;\n\n        &lt;div class=\"row\"&gt;\n            &lt;div class=\"large-3 columns\"&gt;\n                &lt;label class=\"right-inline\"&gt;\n                    &lt;%= f.label :additional_files %&gt;\n                    &lt;/label&gt;\n                &lt;/div&gt;\n\n                        &lt;div class= \"large-9 columns\"&gt;\n                            &lt;ul&gt;&lt;%= f.collection_check_boxes :uploadpdf_ids, Uploadpdf.last(5).reverse, :id,\n                                 :file_name, { mulitple: true } do |b| %&gt;\n                                     &lt;li&gt;&lt;%= b.label do %&gt;\n                                            &lt;%= b.check_box + truncate(File.basename(b.text,'.*'), length: 45) %&gt;\n                                        &lt;% end %&gt;\n                                &lt;% end %&gt;\n                                    &lt;/li&gt;\n                            &lt;/ul&gt;\n                    &lt;/div&gt;\n\n        &lt;/div&gt;\n    &lt;/div&gt;\n  &lt;/div&gt;\n\n\n    &lt;%= button_tag \"Define Targeting\", type: \"button\", id: \"target-button\" %&gt;\n\n    &lt;%= render 'target', :f =&gt; f %&gt;\n\n    &lt;div class=\"modalDarken\"&gt;&lt;/div&gt;\n\n    &lt;%= button_tag \"Confirm &amp; Execute\", type: \"button\", id: \"campaign-create-button\", remote: true %&gt;\n\n\n\n&lt;% end %&gt;\n</code></pre>\n\n<p><strong>views/campaigns/_target.html.erb</strong></p>\n\n<pre><code>&lt;div id=\"targetModal\" class=\"row tiny \" role=\"dialog\"&gt;\n\n  &lt;div class=\"large-12 columns modal-header\"&gt;\n      &lt;h3 class=\"row\"&gt;Target&lt;/h3&gt;\n      &lt;/div&gt;\n\n        &lt;div class=\"row\"&gt;\n            &lt;div class=\"large-4 columns\"&gt;\n                &lt;label class=\"right-inline\"&gt;\n                    &lt;%= f.label :plan, \"Pick a Plan\", class: \"right-label\" %&gt;\n                &lt;/label&gt;\n            &lt;/div&gt;\n\n\n            &lt;div class=\"large-8 columns\"&gt;\n                &lt;%= f.select :plan_id,\n                        Plan.all.collect { |p| \n                            [ p.name, p.id ] \n                            }, { include_blank: true } %&gt;\n            &lt;/div&gt;\n\n\n\n\n            &lt;div class=\"large-4 columns\"&gt;\n                &lt;label class=\"right-inline\"&gt;\n                    &lt;%= f.label :channels, \"Distribution Channel\", class: \"right-label\" %&gt;\n                &lt;/label&gt;\n            &lt;/div&gt;\n\n\n            &lt;div class=\"large-8 columns\"&gt;\n                &lt;ul class=\"channels-list\"&gt;\n                    &lt;% [\"Folder\", \"Fax\", \"Email\"].each do |channel| %&gt;\n\n                    &lt;li&gt;&lt;%= check_box_tag \"campaign[channels][]\", channel,\n                            @campaign.channels.include?(channel), \n                            id: \"campaign_channels_#{channel}\", validate: true  %&gt; &lt;%= channel %&gt;&lt;/li&gt;\n                    &lt;% end %&gt;\n                &lt;/ul&gt;\n            &lt;/div&gt;\n        &lt;/div&gt;\n\n      &lt;%= f.submit \"Done\", class: \"close-button\", id: \"done-button\" %&gt;\n&lt;/div&gt;\n\n\n\n\n&lt;div id=\"executeModal\" class=\"row large \" role=\"dialog\"&gt;\n\n  &lt;div class=\"large-12 columns modal-header\"&gt;\n      &lt;h3 class=\"row\"&gt;Warning: Confirm Campaign&lt;/h3&gt;\n      &lt;/div&gt;\n\n      &lt;div&gt;\n        &lt;p&gt;You are about to execute a campaign. Please confirm campaign settings one last time before executing.&lt;/p&gt;\n      &lt;/div&gt;\n\n\n        &lt;div class=\"row\"&gt;\n        &lt;table&gt;\n            &lt;tbody&gt;\n                &lt;tr&gt;\n                    &lt;td&gt;\n                    Campaign Name:\n                    &lt;/td&gt;\n                    &lt;td&gt;\n                    &lt;%= @campaign.name %&gt;\n                    &lt;/td&gt;\n                &lt;/tr&gt;\n                &lt;tr&gt;\n                    &lt;td&gt;\n                    Program:\n                    &lt;/td&gt;\n                    &lt;td&gt;\n                     &lt;%#= @campaign.program.name %&gt;\n                    &lt;/td&gt;\n                &lt;/tr&gt;\n                &lt;tr&gt;\n                    &lt;td&gt;\n                    Zip File:\n                    &lt;/td&gt;\n                    &lt;td&gt;\n                    &lt;%#= @campaign.uploadzip.file_name %&gt; \n                    &lt;/td&gt;\n                &lt;/tr&gt;\n                &lt;tr&gt;\n                    &lt;td&gt;\n                    Additional Files:\n                    &lt;/td&gt;\n                    &lt;td&gt;\n                    &lt;%# @campaign.uploadpdfs.each do |f| %&gt;\n                        &lt;li&gt;&lt;%#= f.file_name %&gt;&lt;/li&gt;\n                    &lt;%# end %&gt;\n                    &lt;/td&gt;\n                &lt;/tr&gt;\n                &lt;tr&gt;\n                    &lt;td&gt;\n                    Plan:\n                    &lt;/td&gt;\n                    &lt;td&gt;\n                    &lt;%#= @campaign.plan.name %&gt; \n                    &lt;/td&gt;\n                &lt;/tr&gt;\n                &lt;tr&gt;\n                    &lt;td&gt;\n                    Channels:\n                    &lt;/td&gt;\n                    &lt;td&gt;\n                    &lt;%#= @campaign.channels.to_sentence %&gt;\n                    &lt;/td&gt;\n                &lt;/tr&gt;\n\n            &lt;/tbody&gt;\n        &lt;/table&gt;\n\n        &lt;button class=\"cancelButton\"&gt;Cancel&lt;/button&gt;\n        &lt;button&gt;Execute Campaign&lt;/button&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n\n&lt;/div&gt;\n</code></pre>\n\n<p><strong>views/campaigns/new.html.erb</strong></p>\n\n<pre><code>&lt;div class=\"row title\"&gt;\n    &lt;div class=\"small-12 large-12 columns\"&gt;\n    &lt;h2&gt;Launch a Campaign&lt;/h2&gt;\n    &lt;/div&gt;\n&lt;/div&gt;\n\n\n&lt;%= render 'form' %&gt;\n</code></pre>\n\n<p><strong>assets/javascripts/campaign_form.js</strong></p>\n\n<pre><code>$(document).ready(function(){\n\n\n\n$(\"form #target-button\").click(function(e){\n    e.preventDefault();\n    $(\"#targetModal, .modalDarken\").fadeIn();\n});\n\n$('.modalDarken, .cancelButton').click(function(e){\n    e.preventDefault();\n    $(\"#targetModal, #executeModal, .modalDarken\").fadeOut();\n    $(\"#campaign-create-button\").hide();\n    $(\"#target-button\").css(\"display\", \"block\");\n});\n\n\n    $(\".close-button\").click(function(e){\n        e.preventDefault();\n\n        var planId = $(\"#campaign_plan_id\").val();\n        var nameId = $(\"#campaign_name\").val();\n        var programId = $(\"#campaign_program_id\").val();\n        var uploadZip = $(\"#uploadzip_id\").val();\n        var uploadPdf = $(\"campaign[uploadpdf_ids][]\").val();\n\n        if (planId.length &gt; 0 &amp;&amp; \n            nameId.length &gt; 0 &amp;&amp; \n            programId.length &gt; 0 &amp;&amp; \n            uploadZip.length &gt; 0){\n            $('form#new_campaign').trigger('submit.rails');\n            $(\"#targetModal, .modalDarken\").fadeOut();\n            $(\"#target-button\").hide();\n            $(\"#campaign-create-button\").css(\"display\", \"block\").css(\"background-color\", \"#E37368\");\n        } else {\n            $(\"#targetModal, .modalDarken\").fadeOut();\n\n        }\n\n    });\n\n    //this is for showing the execute modal\n    $(\"#campaign-create-button\").click(function(e){\n        e.preventDefault();\n        $(\"#executeModal, .modalDarken\").fadeIn();\n    });\n\n})\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "simple-form"], "comments": [{"owner": {"reputation": 662, "user_id": 4747096, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/0b85639c3c1cc226a5962b469c8bbbab?s=128&d=identicon&r=PG&f=1", "display_name": "IvanSelivanov", "link": "https://stackoverflow.com/users/4747096/ivanselivanov"}, "edited": false, "score": 0, "creation_date": 1435170586, "post_id": 31033779, "comment_id": 50092906, "body": "Did you permit these parameters in controller?"}, {"owner": {"reputation": 139, "user_id": 4698545, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f7f9d0000fa9c34adbef443b513857db?s=128&d=identicon&r=PG&f=1", "display_name": "Zoe Steinkamp", "link": "https://stackoverflow.com/users/4698545/zoe-steinkamp"}, "reply_to_user": {"reputation": 662, "user_id": 4747096, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/0b85639c3c1cc226a5962b469c8bbbab?s=128&d=identicon&r=PG&f=1", "display_name": "IvanSelivanov", "link": "https://stackoverflow.com/users/4747096/ivanselivanov"}, "edited": false, "score": 0, "creation_date": 1435170792, "post_id": 31033779, "comment_id": 50093023, "body": "Yes they are permitted in the controller"}, {"owner": {"reputation": 1514, "user_id": 3749865, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1873b0d2c86671bb1b3d44b53b48c09?s=128&d=identicon&r=PG", "display_name": "Christian Rolle", "link": "https://stackoverflow.com/users/3749865/christian-rolle"}, "edited": false, "score": 0, "creation_date": 1438717851, "post_id": 31033779, "comment_id": 51561306, "body": "Please post the generated HTML. Also post the send parameter hash, which was generated by submitting the form."}], "answers": [{"comments": [{"owner": {"reputation": 1670, "user_id": 1392229, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/083edb871ee8732be160ca6930f8b7ef?s=128&d=identicon&r=PG", "display_name": "Dawid Gos\u0142awski", "link": "https://stackoverflow.com/users/1392229/dawid-gos%c5%82awski"}, "edited": false, "score": 0, "creation_date": 1438717091, "post_id": 31817784, "comment_id": 51560917, "body": "Please share more about that problem for others to get help in future."}], "tags": [], "owner": {"reputation": 139, "user_id": 4698545, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f7f9d0000fa9c34adbef443b513857db?s=128&d=identicon&r=PG&f=1", "display_name": "Zoe Steinkamp", "link": "https://stackoverflow.com/users/4698545/zoe-steinkamp"}, "is_accepted": true, "score": 1, "last_activity_date": 1438717463, "last_edit_date": 1438717463, "creation_date": 1438716971, "answer_id": 31817784, "question_id": 31033779, "link": "https://stackoverflow.com/questions/31033779/ruby-simple-form-checkbox-not-checking-when-true/31817784#31817784", "title": "Ruby Simple Form Checkbox not checking when True", "body": "<p>It was a javascript problem just in case anyone else comes along and sees this. Be carful using jquery and simpleform together. My problem was that we had jquery code to make our buttons more aesthetically appealing. </p>\n\n<pre><code>//$(function checkbox() {\n//  'use strict'\n//\n//  var originalElement = $('input[type=\"checkbox\"]');\n//  var overlay = '&lt;div class=\"checkbox-overlay\"&gt;&lt;div class=\"inner\"&gt;&lt;/div&gt;&lt;/div&gt;';\n//\n//  function swapCheckbox() {\n//    originalElement.replaceWith(overlay);\n//  }\n//\n//  function toggleCheckbox() {\n//    $(this).toggleClass('checked');\n//\n//  }\n//\n//  function initialize() {\n//    swapCheckbox();\n//    $('body .checkbox-overlay').on('click', toggleCheckbox);\n//  }\n//\n//  initialize();\n//});\n</code></pre>\n\n<p>But in reality this was making it so simpleform was receiving only 0, and never 1's. In ohter words even if you checked the box it would never actually work because this Jquery code was manipulating the variables as they were sent to simpleform. In the future Ill update this post if i fix the checkboxes so they can look \"pretty\" while not messing with the functionality. This problem took a long time to solve, considering i was unaware of this file till a SimpleForm developer pointed out their might be a js file messing with my code. </p>\n\n<p>Edit: I hope this explains the problem better!</p>\n"}], "owner": {"reputation": 139, "user_id": 4698545, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f7f9d0000fa9c34adbef443b513857db?s=128&d=identicon&r=PG&f=1", "display_name": "Zoe Steinkamp", "link": "https://stackoverflow.com/users/4698545/zoe-steinkamp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 803, "favorite_count": 0, "accepted_answer_id": 31817784, "answer_count": 1, "score": 2, "last_activity_date": 1438717463, "creation_date": 1435168945, "question_id": 31033779, "link": "https://stackoverflow.com/questions/31033779/ruby-simple-form-checkbox-not-checking-when-true", "title": "Ruby Simple Form Checkbox not checking when True", "body": "<p>So I have multiple checkboxes made using simple form a Ruby Gem. But the issue is that they are not appearing checked even when I have checked and set them \"true\" and pressed the update button. I have three examples, all of them do not work, and I have tried doing different code for all three.</p>\n\n<pre><code>  &lt;%= f.input :same_as_client_email,\n              inline_label: \"Same as Client Email\",\n              as: :boolean %&gt;\n</code></pre>\n\n<p>The first example</p>\n\n<pre><code>&lt;%= f.input :same_as_client_name,\n    inline_label: \"Same as Client Name\",\n    as: :boolean,  checked_value: true,unchecked_value: false\n    %&gt;\n</code></pre>\n\n<p>Second example</p>\n\n<pre><code>&lt;%= f.input :active,\n    as: :boolean,\n    checked_value: true, unchecked_value: false,\n    input_html: { value: '1', checked: true },\n    inline_label: \"Active\"%&gt;\n</code></pre>\n\n<p>Final example.</p>\n\n<p>None of these actual work or stay checked. I have other inputs and they are saving when I press the update button. But the check boxes are not. Any help would be appreciated.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3.2", "link-to"], "comments": [{"owner": {"reputation": 3178, "user_id": 2008459, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bff5fa641f4780e18fac63e311ae4247?s=128&d=identicon&r=PG", "display_name": "boulder", "link": "https://stackoverflow.com/users/2008459/boulder"}, "edited": false, "score": 0, "creation_date": 1435169451, "post_id": 31033720, "comment_id": 50092326, "body": "what&#39;s the output of &#39;rake routes |grep utils&#39;? Also, it will be helpful to see your routes.rb"}, {"owner": {"reputation": 1, "user_id": 5045741, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-cL_qfOHrMkQ/AAAAAAAAAAI/AAAAAAAAAGk/L56iHTM47Hw/photo.jpg?sz=128", "display_name": "NtroP", "link": "https://stackoverflow.com/users/5045741/ntrop"}, "reply_to_user": {"reputation": 3178, "user_id": 2008459, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bff5fa641f4780e18fac63e311ae4247?s=128&d=identicon&r=PG", "display_name": "boulder", "link": "https://stackoverflow.com/users/2008459/boulder"}, "edited": false, "score": 0, "creation_date": 1435172652, "post_id": 31033720, "comment_id": 50094147, "body": "Added requested information - and the actual action I was using in this case was <code>update_vpp_license_info</code> - although when I change that to the actual URL the error just happens on the next <code>link_to</code> with a <code>:controller</code> element in it..."}, {"owner": {"reputation": 3178, "user_id": 2008459, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bff5fa641f4780e18fac63e311ae4247?s=128&d=identicon&r=PG", "display_name": "boulder", "link": "https://stackoverflow.com/users/2008459/boulder"}, "edited": false, "score": 0, "creation_date": 1435178492, "post_id": 31033720, "comment_id": 50097437, "body": "Does it fail when you use the named route instead of controller, action? That is utils_update_vpp_license_info_path"}, {"owner": {"reputation": 1, "user_id": 5045741, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-cL_qfOHrMkQ/AAAAAAAAAAI/AAAAAAAAAGk/L56iHTM47Hw/photo.jpg?sz=128", "display_name": "NtroP", "link": "https://stackoverflow.com/users/5045741/ntrop"}, "reply_to_user": {"reputation": 3178, "user_id": 2008459, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bff5fa641f4780e18fac63e311ae4247?s=128&d=identicon&r=PG", "display_name": "boulder", "link": "https://stackoverflow.com/users/2008459/boulder"}, "edited": false, "score": 0, "creation_date": 1435184435, "post_id": 31033720, "comment_id": 50100202, "body": "Yes. With the exact same error."}, {"owner": {"reputation": 1, "user_id": 5045741, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-cL_qfOHrMkQ/AAAAAAAAAAI/AAAAAAAAAGk/L56iHTM47Hw/photo.jpg?sz=128", "display_name": "NtroP", "link": "https://stackoverflow.com/users/5045741/ntrop"}, "reply_to_user": {"reputation": 3178, "user_id": 2008459, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bff5fa641f4780e18fac63e311ae4247?s=128&d=identicon&r=PG", "display_name": "boulder", "link": "https://stackoverflow.com/users/2008459/boulder"}, "edited": false, "score": 0, "creation_date": 1435186939, "post_id": 31033720, "comment_id": 50101020, "body": "If I use <code>=link_to &quot;Update VPP License Info&quot;, Rails.application.routes.url_helpers.utils_update_vpp_licens&zwnj;&#8203;e_info_path</code> then it works... I wonder what&#39;s different about this controller that others..."}, {"owner": {"reputation": 3178, "user_id": 2008459, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bff5fa641f4780e18fac63e311ae4247?s=128&d=identicon&r=PG", "display_name": "boulder", "link": "https://stackoverflow.com/users/2008459/boulder"}, "edited": false, "score": 0, "creation_date": 1435187241, "post_id": 31033720, "comment_id": 50101105, "body": "it looks like the env variable (set by the middleware) has become corrupted. As in somewhere in your controller&#39;s code there is a <code>env=false</code>?"}, {"owner": {"reputation": 1, "user_id": 5045741, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-cL_qfOHrMkQ/AAAAAAAAAAI/AAAAAAAAAGk/L56iHTM47Hw/photo.jpg?sz=128", "display_name": "NtroP", "link": "https://stackoverflow.com/users/5045741/ntrop"}, "reply_to_user": {"reputation": 3178, "user_id": 2008459, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bff5fa641f4780e18fac63e311ae4247?s=128&d=identicon&r=PG", "display_name": "boulder", "link": "https://stackoverflow.com/users/2008459/boulder"}, "edited": false, "score": 0, "creation_date": 1435188947, "post_id": 31033720, "comment_id": 50101577, "body": "You rock!  It turns out I had a <code>def env</code> method in my controller. Renaming it fixed the issue.  I wonder why it never gave me problems in 3.0?"}, {"owner": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 0, "creation_date": 1435190532, "post_id": 31033720, "comment_id": 50101960, "body": "Please put answers as an answer, not part of the question."}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 5045741, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-cL_qfOHrMkQ/AAAAAAAAAAI/AAAAAAAAAGk/L56iHTM47Hw/photo.jpg?sz=128", "display_name": "NtroP", "link": "https://stackoverflow.com/users/5045741/ntrop"}, "is_accepted": false, "score": 0, "last_activity_date": 1435194629, "creation_date": 1435194629, "answer_id": 31039622, "question_id": 31033720, "link": "https://stackoverflow.com/questions/31033720/undefined-method-for-falsefalseclass-in-link-to/31039622#31039622", "title": "undefined method `[]&#39; for false:FalseClass in link_to", "body": "<p>My controller was overriding the <code>env</code> variable.  I had:</p>\n\n<pre><code>def env\n  ...\nend\n</code></pre>\n\n<p>...in the controller that did't cause problems until upgrading to 3.2. Changing the name of the method fixed the problem. Thanks @boulder for pointing me in the right direction!</p>\n"}], "owner": {"reputation": 1, "user_id": 5045741, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-cL_qfOHrMkQ/AAAAAAAAAAI/AAAAAAAAAGk/L56iHTM47Hw/photo.jpg?sz=128", "display_name": "NtroP", "link": "https://stackoverflow.com/users/5045741/ntrop"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 770, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1435194629, "creation_date": 1435168783, "last_edit_date": 1435190543, "question_id": 31033720, "link": "https://stackoverflow.com/questions/31033720/undefined-method-for-falsefalseclass-in-link-to", "title": "undefined method `[]&#39; for false:FalseClass in link_to", "body": "<p>I upgraded my rails 3.0 app to 3.1 (and then 3.2 hoping it would resolve this - it didn't).  Ever since the upgrade the link_to function in my views fail if I include a <code>:controller</code> and <code>:action</code></p>\n\n<pre><code>%li\n    =link_to \"foo\",:controller =&gt; \"utils\", :action =&gt;  'my_controller_action'\n</code></pre>\n\n<p>Here's the stack-trace I get:</p>\n\n<pre><code>NoMethodError - undefined method `[]' for false:FalseClass:\n  actionpack (3.2.22) lib/action_controller/metal/url_for.rb:36:in `url_options'\n  actionpack (3.2.22) lib/action_view/helpers/url_helper.rb:37:in `url_options'\n  actionpack (3.2.22) lib/action_dispatch/routing/url_for.rb:148:in `url_for'\n  actionpack (3.2.22) lib/action_view/helpers/url_helper.rb:107:in `url_for'\n  actionpack (3.2.22) lib/action_view/helpers/url_helper.rb:242:in `link_to'\n  app/views/utils/index.html.haml:27:in `_app_views_utils_index_html_haml___1636103521089972327_70322425585740'\n  actionpack (3.2.22) lib/action_view/template.rb:145:in `block in render'\n  activesupport (3.2.22) lib/active_support/notifications.rb:125:in `instrument'\n  actionpack (3.2.22) lib/action_view/template.rb:143:in `render'\n  actionpack (3.2.22) lib/action_view/renderer/template_renderer.rb:47:in `block (2 levels) in render_template'\n  actionpack (3.2.22) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'\n  activesupport (3.2.22) lib/active_support/notifications.rb:123:in `block in instrument'\n  activesupport (3.2.22) lib/active_support/notifications/instrumenter.rb:20:in `instrument'\n  activesupport (3.2.22) lib/active_support/notifications.rb:123:in `instrument'\n  actionpack (3.2.22) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'\n  actionpack (3.2.22) lib/action_view/renderer/template_renderer.rb:46:in `block in render_template'\n  actionpack (3.2.22) lib/action_view/renderer/template_renderer.rb:54:in `render_with_layout'\n  actionpack (3.2.22) lib/action_view/renderer/template_renderer.rb:45:in `render_template'\n  actionpack (3.2.22) lib/action_view/renderer/template_renderer.rb:18:in `render'\n  actionpack (3.2.22) lib/action_view/renderer/renderer.rb:36:in `render_template'\n  actionpack (3.2.22) lib/action_view/renderer/renderer.rb:17:in `render'\n  actionpack (3.2.22) lib/abstract_controller/rendering.rb:110:in `_render_template'\n  actionpack (3.2.22) lib/action_controller/metal/streaming.rb:225:in `_render_template'\n  actionpack (3.2.22) lib/abstract_controller/rendering.rb:103:in `render_to_body'\n  actionpack (3.2.22) lib/action_controller/metal/renderers.rb:28:in `render_to_body'\n  actionpack (3.2.22) lib/action_controller/metal/compatibility.rb:50:in `render_to_body'\n  actionpack (3.2.22) lib/abstract_controller/rendering.rb:88:in `render'\n  actionpack (3.2.22) lib/action_controller/metal/rendering.rb:16:in `render'\n  actionpack (3.2.22) lib/action_controller/metal/instrumentation.rb:40:in `block (2 levels) in render'\n...\n</code></pre>\n\n<p>The route and method is there (it worked fine in 3.0). It works if I hard-code the URL.</p>\n\n<p>When I debugged the code I get to: lib/action_controller/metal/url_for.rb</p>\n\n<pre><code>module ActionController\n  module UrlFor\n    extend ActiveSupport::Concern\n\n    include AbstractController::UrlFor\n\n    def url_options\n      @_url_options ||= super.reverse_merge(\n        :host =&gt; request.host,\n        :port =&gt; request.optional_port,\n        :protocol =&gt; request.protocol,\n        :_path_segments =&gt; request.symbolized_path_parameters\n      ).freeze\n\n      if _routes.equal?(env[\"action_dispatch.routes\"])\n        @_url_options.dup.tap do |options|\n          options[:script_name] = request.script_name.dup\n          options.freeze\n        end\n      else\n        @_url_options\n      end\n    end\n\n  end\nend\n</code></pre>\n\n<p>When I inspect <code>if _routes.equal?(env[\"action_dispatch.routes\"])</code>, <code>env</code> is <em>false</em> instead of the usual array of routes...</p>\n\n<p>Any ideas?</p>\n\n<hr>\n\n<h2>Updated with requested info:</h2>\n\n<pre><code> rake routes |grep utils\n                 utils_switch_redeemable_to_managed GET    /utils/switch_redeemable_to_managed(.:format)                       utils#switch_redeemable_to_managed\n                                      utils_viewlog GET    /utils/viewlog(.:format)                                            utils#viewlog\n                        utils_enable_device_polling GET    /utils/enable_device_polling(.:format)                              utils#enable_device_polling\n                        utils_fetch_all_dep_devices GET    /utils/fetch_all_dep_devices(.:format)                              utils#fetch_all_dep_devices\n                     utils_build_apps_from_licenses GET    /utils/build_apps_from_licenses(.:format)                           utils#build_apps_from_licenses\n                      utils_update_vpp_license_info GET    /utils/update_vpp_license_info(.:format)                            utils#update_vpp_license_info\n                         utils_update_vpp_user_info GET    /utils/update_vpp_user_info(.:format)                               utils#update_vpp_user_info\n                            utils_update_app_prices GET    /utils/update_app_prices(.:format)                                  utils#update_app_prices\n                    utils_clean_bad_license_imports GET    /utils/clean_bad_license_imports(.:format)                          utils#clean_bad_license_imports\n                   utils_fix_stuck_license_download GET    /utils/fix_stuck_license_download(.:format)                         utils#fix_stuck_license_download\n                                   utils_change_log GET    /utils/change_log(.:format)                                         utils#change_log\n                                          utils_env GET    /utils/env(.:format)                                                utils#env\n                                     utils_evaluate GET    /utils/evaluate(.:format)                                           utils#evaluate\n                                                    POST   /utils/evaluate(.:format)                                           utils#evaluate\n                               utils_restore_backup GET    /utils/restore_backup(.:format)                                     utils#restore_backup\n                                  utils_make_backup GET    /utils/make_backup(.:format)                                        utils#make_backup\n                                   utils_where_am_i GET    /utils/where_am_i(.:format)                                         utils#where_am_i\n                                 utils_system_stats GET    /utils/system_stats(.:format)                                       utils#system_stats\n                     utils_clear_completed_mdm_jobs GET    /utils/clear_completed_mdm_jobs(.:format)                           utils#clear_completed_mdm_jobs\n                 utils_clear_old_completed_mdm_jobs GET    /utils/clear_old_completed_mdm_jobs(.:format)                       utils#clear_old_completed_mdm_jobs\n                           utils_clear_old_mdm_jobs GET    /utils/clear_old_mdm_jobs(.:format)                                 utils#clear_old_mdm_jobs\n                       utils_find_missing_app_names GET    /utils/find_missing_app_names(.:format)                             utils#find_missing_app_names\n                      utils_find_missing_bundle_ids GET    /utils/find_missing_bundle_ids(.:format)                            utils#find_missing_bundle_ids\n                              utils_data_validation GET    /utils/data_validation(.:format)                                    utils#data_validation\n                      utils_truncate_sessions_table GET    /utils/truncate_sessions_table(.:format)                            utils#truncate_sessions_table\n                  utils_truncate_delayed_jobs_table GET    /utils/truncate_delayed_jobs_table(.:format)                        utils#truncate_delayed_jobs_table\n                 utils_fix_invalid_pool_memberships GET    /utils/fix_invalid_pool_memberships(.:format)                       utils#fix_invalid_pool_memberships\n          utils_remove_duplicate_device_enrollments GET    /utils/remove_duplicate_device_enrollments(.:format)                utils#remove_duplicate_device_enrollments\n      utils_fix_licenses_of_legacy_orders_for_users GET    /utils/fix_licenses_of_legacy_orders_for_users(.:format)            utils#fix_licenses_of_legacy_orders_for_users\n                          utils_test_email_accepted GET    /utils/test_email_accepted(.:format)                                utils#test_email_accepted\n                             utils_harvest_licenses GET    /utils/harvest_licenses(.:format)                                   utils#harvest_licenses\n                        utils_reset_table_sequences GET    /utils/reset_table_sequences(.:format)                              utils#reset_table_sequences\n                                utils_fix_pool_apps GET    /utils/fix_pool_apps(.:format)                                      utils#fix_pool_apps\n                            utils_fix_license_costs GET    /utils/fix_license_costs(.:format)                                  utils#fix_license_costs\n                             utils_update_app_icons GET    /utils/update_app_icons(.:format)                                   utils#update_app_icons\n                                        utils_index GET    /utils/index(.:format)                                              utils#index\n                             utils_check_order_data GET    /utils/check_order_data(.:format)                                   utils#check_order_data\n                         utils_check_order_data_fix GET    /utils/check_order_data_fix(.:format)                               utils#check_order_data_fix\n</code></pre>\n\n<hr>\n\n<p>relevant parts of routes.rb:</p>\n\n<pre><code>  get \"/utils/switch_redeemable_to_managed\"\n\n  get \"/utils/viewlog\"\n\n  get \"/utils/enable_device_polling\"\n\n  get \"/utils/fetch_all_dep_devices\"\n\n  get \"/utils/build_apps_from_licenses\"\n\n  get \"/utils/update_vpp_license_info\"\n\n  get \"/utils/update_vpp_user_info\"\n\n  get \"/utils/update_app_prices\"\n\n  get \"/utils/clean_bad_license_imports\"\n\n  get \"/utils/fix_stuck_license_download\"\n\n  get \"/utils/change_log\"\n\n  get \"/utils/env\"\n\n  get \"/utils/evaluate\"\n\n  post \"/utils/evaluate\"\n\n  get \"/utils/restore_backup\"\n\n  get \"/utils/make_backup\"\n\n  get \"/utils/where_am_i\"\n\n  get \"/utils/system_stats\"\n\n  get \"/utils/clear_completed_mdm_jobs\"\n\n  get \"/utils/clear_old_completed_mdm_jobs\"\n\n  get \"/utils/clear_old_mdm_jobs\"\n\n  get \"/utils/find_missing_app_names\"\n\n  get \"/utils/find_missing_bundle_ids\"\n\n  get \"/utils/data_validation\"\n\n  get \"/utils/truncate_sessions_table\"\n\n  get \"/utils/truncate_delayed_jobs_table\"\n\n  get \"/utils/fix_invalid_pool_memberships\"\n\n  get \"/utils/remove_duplicate_device_enrollments\"\n\n  get \"/utils/fix_licenses_of_legacy_orders_for_users\"\n\n  get \"/utils/test_email_accepted\"\n\n  get \"/utils/harvest_licenses\"\n\n  get \"/utils/reset_table_sequences\"\n\n  get \"/utils/fix_pool_apps\"\n\n  get \"/utils/fix_license_costs\"\n\n  get \"/utils/update_app_icons\"\n\n  get \"/utils/index\"\n\n  get \"/utils/check_order_data\"\n\n  get \"/utils/check_order_data_fix\"\n</code></pre>\n\n<hr>\n\n<p>Gemfile (in case it matters):</p>\n\n<pre><code>source 'http://rubygems.org'\n\ngem 'rails', '~&gt; 3.2.0'\n\ngem 'nokogiri'\n\n# Deploy with Capistrano\n\ngem 'capistrano'\n\n# Use Postgres DB\ngem 'pg'\n\n# Bundle gems for the local environment. Make sure to\n# put test-only gems in this group so their generators\n# and rake tasks are available in development mode:\ngroup :development, :test do\n  gem 'nifty-generators'\n  gem 'ruby-debug19'\n  gem 'looksee'\n  #gem 'bullet'\n  gem 'better_errors', '~&gt; 1.0'\n  gem 'binding_of_caller'\n  #gem 'rack-mini-profiler'\nend\n\ngem 'bcrypt-ruby'#, '~&gt; 3.1.5'\ngem 'devise'\ngem \"devise_ldap_authenticatable\"\ngem 'haml'\ngem 'haml-rails'\ngem 'hpricot'\ngem 'cancan'\ngem 'seedbank'\ngem 'mechanize'#, '~&gt; 2.7'\ngem 'roo'\ngem 'rubyzip'\ngem 'client_side_validations'\ngem 'yaml_db'\ngem 'sass'\ngem 'will_paginate'\ngem 'gibberish', '~&gt; 1'\ngem 'aws-s3'\ngem 'delayed_job_active_record'#, '0.3.3'\ngem 'daemons'\ngem 'awesome_print'\ngem \"uuidtools\"#, \"~&gt; 2.1.2\"\ngem \"carrierwave\"\ngem \"rmagick\", :require =&gt; false\ngem 'fog'\ngem 'ruby-prof'\ngem 'exception_notification'\ngem 'grape'\ngem 'yajl-ruby'\ngem 'rqrcode'\ngem 'pretender'\ngem 'chronic'\ngem 'unscoped_associations'\ngem 'memoist'\ngem 'oauth'\ngem 'bcat'\n\n# Gems used only for assets and not required\n# in production environments by default.\ngroup :assets do\n  gem 'sass-rails'\n  gem 'coffee-rails'\n  gem 'uglifier'\nend\n\ngem 'jquery-rails'\n</code></pre>\n\n<hr>\n\n<p>Solution:  I had a</p>\n\n<pre><code>def env\n  ...\nend\n</code></pre>\n\n<p>in my controller that never gave me a problem in rails 3.0. Renaming that fixed the issue.</p>\n"}, {"tags": ["ruby", "regex"], "comments": [{"owner": {"reputation": 17349, "user_id": 1951708, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/uUTYl.jpg?s=128&g=1", "display_name": "Lorenz Meyer", "link": "https://stackoverflow.com/users/1951708/lorenz-meyer"}, "edited": false, "score": 0, "creation_date": 1435168798, "post_id": 31033670, "comment_id": 50091986, "body": "Can you please elaborate : replace what by what?"}, {"owner": {"reputation": 540, "user_id": 739870, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a98831d6edeea2d833df7036e535b48e?s=128&d=identicon&r=PG", "display_name": "tonchis", "link": "https://stackoverflow.com/users/739870/tonchis"}, "edited": false, "score": 0, "creation_date": 1435169685, "post_id": 31033670, "comment_id": 50092447, "body": "Could you give us an example of what the output should be?"}], "answers": [{"comments": [{"owner": {"reputation": 89, "user_id": 2479981, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/47f9bfbd2c03455c363a4744bf626c5b?s=128&d=identicon&r=PG", "display_name": "BugsBunny", "link": "https://stackoverflow.com/users/2479981/bugsbunny"}, "edited": false, "score": 0, "creation_date": 1435279634, "post_id": 31033943, "comment_id": 50146551, "body": "Thank you for hints, and I worked out the pattern I need. <code>pattern = &#47;(?&lt;!&quot;)\\&lt;.*?\\&gt;(?!&quot;)&#47;</code>, just in case anyone need."}], "tags": [], "owner": {"reputation": 2927, "user_id": 3863903, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f5bdf8cace56e1ded5d3a56730b8871?s=128&d=identicon&r=PG&f=1", "display_name": "Rakholiya Jenish", "link": "https://stackoverflow.com/users/3863903/rakholiya-jenish"}, "is_accepted": false, "score": 1, "last_activity_date": 1435170461, "last_edit_date": 1435170461, "creation_date": 1435169485, "answer_id": 31033943, "question_id": 31033670, "link": "https://stackoverflow.com/questions/31033670/ruby-replace-first-appearance-of-a-pattern/31033943#31033943", "title": "Ruby Replace First Appearance of A Pattern", "body": "<pre><code>a = 'abc &lt;abc&gt; def \"&lt;def&gt;\"\n</code></pre>\n\n<p>To replace <code>&lt;abc&gt;</code> with <code>REPLACE_WITH</code>:</p>\n\n<pre><code>b = a.sub(/(?&lt;!\")&lt;[^&gt;]*&gt;(?!\")/,\"REPLACE_WITH\")\nputs b\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>abc REPLACE_WITH def \"&lt;def&gt;\"\n</code></pre>\n\n<p>To replace <code>abc</code> in <code>&lt;abc&gt;</code> with <code>REPLACE_WITH</code>:</p>\n\n<pre><code>b = a.sub(/(?&lt;!\"&lt;)(?&lt;=&lt;)[^&gt;]*(?=&gt;)(?!&gt;\")/,\"REPLACE_WITH\")\nputs b\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>abc &lt;REPLACE_WITH&gt;  def \"&lt;def&gt;\"\n</code></pre>\n\n<p>If you want to replace globally (not only first appearance), then use <code>gsub</code> instead of <code>sub</code>.</p>\n\n<p>I don't know Ruby. This syntax is just that I learned from looking at other answers to use regex in Ruby. So, I am not sure if syntax is correct or not.</p>\n"}], "owner": {"reputation": 89, "user_id": 2479981, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/47f9bfbd2c03455c363a4744bf626c5b?s=128&d=identicon&r=PG", "display_name": "BugsBunny", "link": "https://stackoverflow.com/users/2479981/bugsbunny"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 33, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1435279229, "creation_date": 1435168612, "last_edit_date": 1435279229, "question_id": 31033670, "link": "https://stackoverflow.com/questions/31033670/ruby-replace-first-appearance-of-a-pattern", "title": "Ruby Replace First Appearance of A Pattern", "body": "<p>can any one help me with replace patterns in ruby?</p>\n\n<p>I have a string like this: </p>\n\n<pre><code>abc &lt;abc&gt; def \"&lt;def&gt;\" \n</code></pre>\n\n<p>Rule is:  to replace anything with &lt;> with an empty string, but do not replace those with \"&lt;>\". replace <code>&lt;abc&gt;</code> by an empty string <code>''</code>, and leave <code>\"&lt;def&gt;\"</code> as it is.</p>\n\n<p>So the result needs to be \n<code>abc def \"&lt;def&gt;\"</code></p>\n"}, {"tags": ["html", "ruby", "watir", "watir-webdriver"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1435168971, "post_id": 31033461, "comment_id": 50092089, "body": "That is a pretty gnarly chunk of HTML. Any chance of stripping that down to a more minimalist example?"}, {"owner": {"reputation": 13, "user_id": 5020368, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh6.googleusercontent.com/-aOfswo5Kh0c/AAAAAAAAAAI/AAAAAAAAASU/JetYxEEybBY/photo.jpg?sz=128", "display_name": "Lorraine Botros", "link": "https://stackoverflow.com/users/5020368/lorraine-botros"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1435169239, "post_id": 31033461, "comment_id": 50092229, "body": "that is the minimalist example :) let me know if the formatting helped."}, {"owner": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "edited": false, "score": 0, "creation_date": 1435170637, "post_id": 31033461, "comment_id": 50092954, "body": "You have stripped the HTML too far as now the Watir code no longer matches - eg there is no table and there is no Japanese option. Please also clarify what happens when you tried your code - eg was there an exception."}, {"owner": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "edited": false, "score": 2, "creation_date": 1435175975, "post_id": 31033461, "comment_id": 50096046, "body": "The Watir code is looking for a select element with class &quot;ContractPriceSourceLocale&quot; but the HTML shows the class as &quot;select2 visible currency-select select2-offscreen&quot;. That would explain why the element cannot be found."}, {"owner": {"reputation": 769, "user_id": 4392644, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/5Hgdj.png?s=128&g=1", "display_name": "meatspace", "link": "https://stackoverflow.com/users/4392644/meatspace"}, "edited": false, "score": 0, "creation_date": 1464959615, "post_id": 31033461, "comment_id": 62713270, "body": "As Justin Ko points out, that select element isn&#39;t in the HTML you provided. Is the HTML you provided perhaps mistaken, or should you modify your code?"}], "owner": {"reputation": 13, "user_id": 5020368, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh6.googleusercontent.com/-aOfswo5Kh0c/AAAAAAAAAAI/AAAAAAAAASU/JetYxEEybBY/photo.jpg?sz=128", "display_name": "Lorraine Botros", "link": "https://stackoverflow.com/users/5020368/lorraine-botros"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 104, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1435171715, "creation_date": 1435167938, "last_edit_date": 1435171715, "question_id": 31033461, "link": "https://stackoverflow.com/questions/31033461/how-to-select-a-list-element-that-is-hidden-or-in-a-table", "title": "How to select a list element that is hidden or in a table", "body": "<p>I need some help understanding the logic behind selecting list elements when they are in a table and may be hidden. Earlier I had posted a similar question and was able to figure out how to get to the elements however this one eludes me.</p>\n\n<p>The last try was this:\n    @b.table(:class => \"ContractPriceTable\").select_list(:class => \"ContractPriceSourceLocale\").option(:text => \"Japanese (Japan)\").select</p>\n\n<pre><code>&lt;table id=\"ContractPriceTable\" class=\"table table-bordered table-nomargin ContractPriceTable\"&gt;\n    &lt;tr&gt;\n    &lt;td&gt;\n    &lt;div id=\"s2id_Contracts_142c5493-fc46-4608-91f9-addfcc04162d__ContractTranslationQualities_293ac7e9-f083-4c27-abeb-41b90e907716__ContractPrices_7fc81280-14c2-4a1b-a659-af99105af152__CurrencyId\" class=\"select2-container select2 visible currency-select\"&gt;\n    &lt;a class=\"select2-choice\" tabindex=\"-1\" onclick=\"return false;\" href=\"javascript:void(0)\"&gt;\n    &lt;input id=\"s2id_autogen3\" class=\"select2-focusser select2-offscreen\" type=\"text\"&gt;\n    &lt;/div&gt;\n    &lt;select id=\"Contracts_142c5493-fc46-4608-91f9-addfcc04162d__ContractTranslationQualities_293ac7e9-f083-4c27-abeb-41b90e907716__ContractPrices_7fc81280-14c2-4a1b-a659-af99105af152__CurrencyId\" class=\"select2 visible currency-select select2-offscreen\" name=\"Contracts[142c5493-fc46-4608-91f9-addfcc04162d].ContractTranslationQualities[293ac7e9-f083-4c27-abeb-41b90e907716].ContractPrices[7fc81280-14c2-4a1b-a659-af99105af152].CurrencyId\" data-val-required=\"The CurrencyId field is required.\" data-val=\"true\" tabindex=\"-1\"&gt;\n    &lt;option value=\"b32ad865-00b7-4969-b9af-053538405bf8\"&gt;Yuan (CNY) - \u00a5&lt;/option&gt;\n    &lt;option value=\"a6f8185b-4119-4b4b-8c23-7211bef8b2bd\"&gt;Japanese (Japan)&lt;/option&gt;\n</code></pre>\n"}, {"tags": ["ruby", "ubuntu", "background-process"], "comments": [{"owner": {"reputation": 3074, "user_id": 1833232, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/48vBr.jpg?s=128&g=1", "display_name": "Naim Rajiv", "link": "https://stackoverflow.com/users/1833232/naim-rajiv"}, "edited": false, "score": 0, "creation_date": 1435166962, "post_id": 31033137, "comment_id": 50090829, "body": "You can see <a href=\"http://stackoverflow.com/questions/6391187/run-ruby-script-on-background\" title=\"run ruby script on background\">stackoverflow.com/questions/6391187/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 2488, "user_id": 4358503, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a54100ba3041f8e01dfb2e0b7b8ddce1?s=128&d=identicon&r=PG&f=1", "display_name": "Datise", "link": "https://stackoverflow.com/users/4358503/datise"}, "is_accepted": false, "score": 0, "last_activity_date": 1435168243, "last_edit_date": 1495542688, "creation_date": 1435168243, "answer_id": 31033567, "question_id": 31033137, "link": "https://stackoverflow.com/questions/31033137/how-to-run-a-ruby-shell-script-that-shows-some-information-then-asks-for-input/31033567#31033567", "title": "How to run a ruby shell script that shows some information, then asks for input and goes background?", "body": "<p>It's definitely possible, My understanding is that non-essential features are pushed to background jobs to alleviate some processing burden for the user experience. I'm doing something along these lines right now but not activated by the user.</p>\n\n<p>You have to ask some questions first I think: Does the process give user feedback in real time (not a good use case for a background job)? How many jobs can one expect to be running simultaneously? How will it interfere or operate with production workers (like unicorn spawn)? What happens if the background jobs fail? Are they processing high priority information? These questions guided me to figure out what to leverage how/when to monitor and whether or not I want it triggered by user input vs on boot vs etc. </p>\n\n<p>Anyway, I would suggest using: <a href=\"http://sidekiq.org/\" rel=\"nofollow noreferrer\">http://sidekiq.org/</a>   , It seems to be winner amongst a lot of developers. I would probably implement it by accepting the parameters in the controller and instantiating the worker class  (as you can see in sidekiqs documentation) inside a controller method. That worker class will run your ruby shell script probably with Runner like the question here? <a href=\"https://stackoverflow.com/questions/11037753/runner-in-ruby-on-rails\">Runner in Ruby on Rails</a></p>\n\n<p>You can even trigger them off a model (like emailing after user creation) or what have you. </p>\n\n<p>Another frequently used gem is <a href=\"https://github.com/collectiveidea/delayed_job\" rel=\"nofollow noreferrer\">https://github.com/collectiveidea/delayed_job</a> . I am personally using <a href=\"https://github.com/javan/whenever\" rel=\"nofollow noreferrer\">https://github.com/javan/whenever</a> to activate rake tasks (as cron jobs) when deploying to production. Thats doesn't seem very relevant to you though.</p>\n\n<p>For future questions of this broad nature you should provide some more information on the jobs requirements, such like answering some of the questions in the second paragraph. What are you using for? Do the parameters trigger different scripts? What rails version are you using? Is it used on production or development? </p>\n"}, {"tags": [], "owner": {"reputation": 45754, "user_id": 17410, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1022b779bdc1ddef7cd9d29abd70ed15?s=128&d=identicon&r=PG", "display_name": "zetetic", "link": "https://stackoverflow.com/users/17410/zetetic"}, "is_accepted": true, "score": 0, "last_activity_date": 1435169930, "creation_date": 1435169930, "answer_id": 31034069, "question_id": 31033137, "link": "https://stackoverflow.com/questions/31033137/how-to-run-a-ruby-shell-script-that-shows-some-information-then-asks-for-input/31034069#31034069", "title": "How to run a ruby shell script that shows some information, then asks for input and goes background?", "body": "<p>Here's a simple example:</p>\n\n<pre><code>def do_stuff(input)\n  puts \"Input received: #{input}\"\n  sleep 10\nend\n\nprint \"Enter input value: \"\ninput = gets\npid = fork { do_stuff(input) }\nputs \"test.rb started, pid: #{pid}\"\nProcess.detach pid\n</code></pre>\n\n<p>Note the use of <code>fork</code> to start a new process, and <code>detach</code> to allow the subprocess to continue running while the main process exits.</p>\n\n<p>Some platforms (Windows) don't support <code>fork</code>. </p>\n"}], "owner": {"reputation": 13, "user_id": 4528461, "user_type": "registered", "profile_image": "https://graph.facebook.com/1573461439561757/picture?type=large", "display_name": "Jo&#227;o Carlos Melati F", "link": "https://stackoverflow.com/users/4528461/jo%c3%a3o-carlos-melati-f"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "accepted_answer_id": 31034069, "answer_count": 2, "score": 1, "last_activity_date": 1435169930, "creation_date": 1435166744, "question_id": 31033137, "link": "https://stackoverflow.com/questions/31033137/how-to-run-a-ruby-shell-script-that-shows-some-information-then-asks-for-input", "title": "How to run a ruby shell script that shows some information, then asks for input and goes background?", "body": "<p>I have a ruby shell script that I want to run on background.\nHowever, before going to background I need to ask for an user input.</p>\n\n<p>Is it possible? How can it be achieved?</p>\n\n<p>Thanks in advance!</p>\n"}, {"tags": ["ruby", "ruby-on-rails-3", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 3074, "user_id": 1833232, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/48vBr.jpg?s=128&g=1", "display_name": "Naim Rajiv", "link": "https://stackoverflow.com/users/1833232/naim-rajiv"}, "edited": false, "score": 0, "creation_date": 1435166460, "post_id": 31033026, "comment_id": 50090534, "body": "do you want to show all countries or just the country in your array?"}], "answers": [{"comments": [{"owner": {"reputation": 671, "user_id": 540852, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/fb761b886d9368481e81ea3389310755?s=128&d=identicon&r=PG&f=1", "display_name": "Kumar", "link": "https://stackoverflow.com/users/540852/kumar"}, "edited": false, "score": 0, "creation_date": 1435166726, "post_id": 31033069, "comment_id": 50090684, "body": "Wow. Awesome. Thanks so much."}], "tags": [], "owner": {"reputation": 2009, "user_id": 20769, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/922e7e3c612566756735b2def78827d8?s=128&d=identicon&r=PG", "display_name": "Joshua", "link": "https://stackoverflow.com/users/20769/joshua"}, "is_accepted": true, "score": 2, "last_activity_date": 1435166514, "creation_date": 1435166514, "answer_id": 31033069, "question_id": 31033026, "link": "https://stackoverflow.com/questions/31033026/how-to-put-specific-options-on-top-of-dropdown-list-in-rails/31033069#31033069", "title": "How to put specific options on top of dropdown list in rails", "body": "<pre><code>list = [2,1,3,4]\n\nlist = [list.delete(4)] + list.sort\n\nputs list.inspect\n\n# [4, 1, 2, 3]\n</code></pre>\n"}], "owner": {"reputation": 671, "user_id": 540852, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/fb761b886d9368481e81ea3389310755?s=128&d=identicon&r=PG&f=1", "display_name": "Kumar", "link": "https://stackoverflow.com/users/540852/kumar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "accepted_answer_id": 31033069, "answer_count": 1, "score": 0, "last_activity_date": 1435166514, "creation_date": 1435166388, "last_edit_date": 1435166486, "question_id": 31033026, "link": "https://stackoverflow.com/questions/31033026/how-to-put-specific-options-on-top-of-dropdown-list-in-rails", "title": "How to put specific options on top of dropdown list in rails", "body": "<p>I need to show some specific options in a dropdown list on top and should sort other options in alpha order. For example if the list is,</p>\n\n<pre><code>[\"CANADA\", \"PORTUGAL\", \"AUSTRALIA\", \"USA\", \"BRAZIL\"]\n</code></pre>\n\n<p>I need to show the dropdown list as (usa and portugal as per requirements on top of the list and others in alpha order.)</p>\n\n<pre><code>[\"USA\", \"PORTUGAL\", \"AUSTRALIA\", \"BRAZIL\", \"CANADA\"]\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1435166447, "post_id": 31033008, "comment_id": 50090528, "body": "What does <code>log&#47;development.log</code> say when you make that request for <code>&#47;</code>?"}, {"owner": {"reputation": 3630, "user_id": 4799659, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153200714295120/picture?type=large", "display_name": "fylooi", "link": "https://stackoverflow.com/users/4799659/fylooi"}, "edited": false, "score": 0, "creation_date": 1435166670, "post_id": 31033008, "comment_id": 50090655, "body": "What does your <code>PagesController#index</code> action contain?"}, {"owner": {"reputation": 735, "user_id": 2188368, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a0a43b221a642dda68bc5cb3296fdebf?s=128&d=identicon&r=PG", "display_name": "pyRabbit", "link": "https://stackoverflow.com/users/2188368/pyrabbit"}, "edited": false, "score": 0, "creation_date": 1435167155, "post_id": 31033008, "comment_id": 50090936, "body": "At one point was your root path tasks#index? If so did you restart your server after changing your routes?"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1435169037, "post_id": 31033008, "comment_id": 50092121, "body": "A successul request should include the action and params as well as the controller. Make sure these are correct."}, {"owner": {"reputation": 31, "user_id": 5045651, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7fb36961fa1031aa2a9019e7645e8e71?s=128&d=identicon&r=PG&f=1", "display_name": "Liam Harwood", "link": "https://stackoverflow.com/users/5045651/liam-harwood"}, "edited": false, "score": 0, "creation_date": 1435169408, "post_id": 31033008, "comment_id": 50092310, "body": "I&#39;m sorry, but what do you mean?"}, {"owner": {"reputation": 31, "user_id": 5045651, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7fb36961fa1031aa2a9019e7645e8e71?s=128&d=identicon&r=PG&f=1", "display_name": "Liam Harwood", "link": "https://stackoverflow.com/users/5045651/liam-harwood"}, "edited": false, "score": 0, "creation_date": 1435169650, "post_id": 31033008, "comment_id": 50092428, "body": "Also the problem has now changed, it is showing the &quot;hello&quot; page but when i refresh it switches to the tasks page and alternates like this. What is going on?"}, {"owner": {"reputation": 31, "user_id": 5045651, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7fb36961fa1031aa2a9019e7645e8e71?s=128&d=identicon&r=PG&f=1", "display_name": "Liam Harwood", "link": "https://stackoverflow.com/users/5045651/liam-harwood"}, "edited": false, "score": 0, "creation_date": 1435169936, "post_id": 31033008, "comment_id": 50092578, "body": "The problem seems to have been fixed now. I rebooted the server and the problem seems to have gone away."}], "owner": {"reputation": 31, "user_id": 5045651, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7fb36961fa1031aa2a9019e7645e8e71?s=128&d=identicon&r=PG&f=1", "display_name": "Liam Harwood", "link": "https://stackoverflow.com/users/5045651/liam-harwood"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 832, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1435169678, "creation_date": 1435166303, "last_edit_date": 1435169678, "question_id": 31033008, "link": "https://stackoverflow.com/questions/31033008/rails-root-not-working", "title": "Rails root not working?", "body": "<p>I'm using Unicorn and Nginx for my rails app with PostgreSQL for the db, and I've been running into a problem. When I go to the root of my site in the browser (my own domain name), it displays the \"tasks\" scaffold page rather than the view indicated by \"pages#index\". I'm not sure what the problem is, I'm also rather new to this so I apologize if my explanation isn't clear, just let me know.</p>\n\n<p>routes.rb</p>\n\n<pre><code>root 'pages#index'\n\nresources :tasks\n</code></pre>\n\n<p>rake routes:</p>\n\n<pre><code>  Prefix Verb   URI Pattern               Controller#Action\n     root GET    /                         pages#index\n    tasks GET    /tasks(.:format)          tasks#index\n          POST   /tasks(.:format)          tasks#create\n new_task GET    /tasks/new(.:format)      tasks#new\nedit_task GET    /tasks/:id/edit(.:format) tasks#edit\n     task GET    /tasks/:id(.:format)      tasks#show\n          PATCH  /tasks/:id(.:format)      tasks#update\n          PUT    /tasks/:id(.:format)      tasks#update\n          DELETE /tasks/:id(.:format)      tasks#destroy\n</code></pre>\n\n<p>After looking at other similar questions, I just want to say that there is no \"index.html\" in public. </p>\n\n<p>My app/view/pages/index.html.erb consists of a single paragraph element with \"hello\".</p>\n\n<p>EDIT: Also the problem has now changed, it is showing the \"hello\" page but when i refresh it switches to the tasks page and alternates like this. What is going on?</p>\n\n<p>EDIT2: The problem seems to have been fixed now. I rebooted the server and the problem seems to have gone away. Thanks for any help.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "stripe-payments"], "comments": [{"owner": {"reputation": 175, "user_id": 2778205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cffecf5fc1bbc0b5d9d89e5f5bf6c448?s=128&d=identicon&r=PG", "display_name": "Tamiz Ahmed", "link": "https://stackoverflow.com/users/2778205/tamiz-ahmed"}, "reply_to_user": {"reputation": 2078, "user_id": 812668, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/7a983e9ebe557af4bf98e021ce457d55?s=128&d=identicon&r=PG&f=1", "display_name": "Benjamin", "link": "https://stackoverflow.com/users/812668/benjamin"}, "edited": false, "score": 0, "creation_date": 1435252576, "post_id": 31032979, "comment_id": 50134576, "body": "@Benjamin yep - just posted solution"}], "answers": [{"comments": [{"owner": {"reputation": 2078, "user_id": 812668, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/7a983e9ebe557af4bf98e021ce457d55?s=128&d=identicon&r=PG&f=1", "display_name": "Benjamin", "link": "https://stackoverflow.com/users/812668/benjamin"}, "edited": false, "score": 0, "creation_date": 1435290581, "post_id": 31056701, "comment_id": 50149093, "body": "Thank you, i figured it out too."}], "tags": [], "owner": {"reputation": 175, "user_id": 2778205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cffecf5fc1bbc0b5d9d89e5f5bf6c448?s=128&d=identicon&r=PG", "display_name": "Tamiz Ahmed", "link": "https://stackoverflow.com/users/2778205/tamiz-ahmed"}, "is_accepted": true, "score": 4, "last_activity_date": 1435252560, "creation_date": 1435252560, "answer_id": 31056701, "question_id": 31032979, "link": "https://stackoverflow.com/questions/31032979/rails-stripe-custom-form-wont-submit-stripe-is-double-loaded-error/31056701#31056701", "title": "Rails: Stripe Custom Form Won&#39;t Submit (Stripe is Double Loaded Error)", "body": "<p>Just heard back from Stripe support, and then solution they suggested (which worked!) was to pass the Stripe.card.createToken as an object, rather than form fields. This required adding relevant classes to each form field (see below) and updating the jQuery function.</p>\n\n<p>The updated part of my orders.js now looks like:</p>\n\n<pre><code>jQuery(function($) {\n  $('#payment-form').submit(function(event) {\n    var $form = $(this);\n\n    // Disable the submit button to prevent repeated clicks\n    $form.find('button').prop('disabled', true);\n\n    Stripe.card.createToken({\n      number: $('.card-number').val(),\n      cvc: $('.card-cvc').val(),\n      exp_month: $('.card-expiry-month').val(),\n      exp_year: $('.card-expiry-year').val()\n    }, stripeResponseHandler);\n\n    // Prevent the form from submitting with the default action\n    return false;\n  });\n});\n</code></pre>\n"}], "owner": {"reputation": 175, "user_id": 2778205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cffecf5fc1bbc0b5d9d89e5f5bf6c448?s=128&d=identicon&r=PG", "display_name": "Tamiz Ahmed", "link": "https://stackoverflow.com/users/2778205/tamiz-ahmed"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2218, "favorite_count": 0, "accepted_answer_id": 31056701, "answer_count": 1, "score": 1, "last_activity_date": 1435252560, "creation_date": 1435166235, "question_id": 31032979, "link": "https://stackoverflow.com/questions/31032979/rails-stripe-custom-form-wont-submit-stripe-is-double-loaded-error", "title": "Rails: Stripe Custom Form Won&#39;t Submit (Stripe is Double Loaded Error)", "body": "<p>I've been trying for days to implement a custom Stripe form. I've followed many tutorials, and am currently following <a href=\"https://stripe.com/docs/tutorials/forms\" rel=\"nofollow\">Stripe's own tutorial</a> to a T. The error message I receive when trying to submit my form is: </p>\n\n<p>POST <a href=\"https://api.stripe.com/v1/tokens\" rel=\"nofollow\">https://api.stripe.com/v1/tokens</a> 400 (Bad Request)</p>\n\n<p>When expanded, this shows: </p>\n\n<pre><code>Stripe.isDoubleLoaded.c @   (index):3\nStripe.isDoubleLoaded.e @   (index):3\nStripe.isDoubleLoaded.a @   (index):3\nStripe.isDoubleLoaded.Stripe.xhr    @   (index):3\nStripe.a._rawRequest    @   (index):2\nStripe.a.request    @   (index):2\nStripe.token.a.create   @   (index):2\nStripe.card.b.createToken   @   (index):2\nStripe.a._channelListener   @   (index):2\nStripe.isDoubleLoaded.H.Socket.t.concat.incoming    @   (index):2\nf\n</code></pre>\n\n<p>I'm really stuck at this point so would appreciate any insight!</p>\n\n<p><em>orders.new [FORM]</em></p>\n\n<pre><code>&lt;form action=\"\" method=\"POST\" id=\"payment-form\"&gt;\n\n&lt;label class=\"form-label\" for=\"number\"&gt;Card Number&lt;/label&gt;\n&lt;input type=\"text\" data-stripe=\"number\" /&gt;\n\n&lt;label class=\"form-label\" for=\"cvc\"&gt;CVC&lt;/label&gt;\n&lt;input type=\"text\" data-stripe=\"cvc\" /&gt;\n\n&lt;label class=\"form-label\"&gt;Exp (MM)&lt;/label&gt;\n&lt;input type=\"text\" data-stripe=\"exp-month\" /&gt;\n\n&lt;label class=\"form-label\"&gt;Exp (YYYY)&lt;/label&gt;\n&lt;input type=\"text\" data-stripe=\"exp-year\" /&gt;\n\n&lt;button type=\"submit\"&gt;Submit Payment&lt;/button&gt;\n</code></pre>\n\n<p><em>orders.js</em></p>\n\n<pre><code>Stripe.setPublishableKey('MY STRIPE TEST KEY');\n\njQuery(function($) {\n  $('#payment-form').submit(function(event) {\n    var $form = $(this);\n\n    // Disable the submit button to prevent repeated clicks\n    $form.find('button').prop('disabled', true);\n\n    Stripe.card.createToken($form, stripeResponseHandler);\n\n    // Prevent the form from submitting with the default action\n    return false;\n  });\n});\n\nfunction stripeResponseHandler(status, response) {\n  var $form = $('#payment-form');\n\n  if (response.error) {\n    // Show the errors on the form\n    $form.find('.payment-errors').text(response.error.message);\n    $form.find('button').prop('disabled', false);\n  } else {\n    // response contains id and card, which contains additional card details\n    var token = response.id;\n    // Insert the token into the form so it gets submitted to the server\n    $form.append($('&lt;input type=\"hidden\" name=\"stripeToken\" /&gt;').val(token));\n    // and submit\n    $form.get(0).submit();\n  }\n};\n</code></pre>\n\n<p><em>orders_controller</em>[relevant part]</p>\n\n<pre><code>    begin\n        charge = Stripe::Charge.create(\n          :amount      =&gt; @amountCents,\n          :source =&gt; params[:stripeToken],\n          :currency    =&gt; 'usd')\n\n      rescue Stripe::CardError =&gt; e\n        charge_error = e.message\n      end\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "passwords"], "answers": [{"tags": [], "owner": {"reputation": 1049, "user_id": 3251199, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/bf61d317161fc12eb6c9b74c546be321?s=128&d=identicon&r=PG&f=1", "display_name": "nicholas79171", "link": "https://stackoverflow.com/users/3251199/nicholas79171"}, "is_accepted": true, "score": 1, "last_activity_date": 1435168452, "creation_date": 1435168452, "answer_id": 31033621, "question_id": 31032770, "link": "https://stackoverflow.com/questions/31032770/hartl-rails-tutorial-chapter-8-test-error-password-should-be-present/31033621#31033621", "title": "Hartl Rails Tutorial: Chapter 8 test error &quot;Password should be present&quot;", "body": "<p>Try changing your password validation to <code>validates :password, length: { minimum: 6 }, presence: true</code></p>\n\n<p>Look at section 6.2.2 of the book. Listing 6.9 uses the following code to validate the presence of a name:</p>\n\n<pre><code>class User &lt; ActiveRecord::Base\n  validates :name, presence: true\nend\n</code></pre>\n\n<p>Michael then goes on to explain that <code>presence: true</code> also requires the <code>name</code> attribute to be something other than a list of spaces which Rails considers to be \"blank\".</p>\n"}], "owner": {"reputation": 4782, "user_id": 3914509, "user_type": "registered", "accept_rate": 56, "profile_image": "https://graph.facebook.com/618920827/picture?type=large", "display_name": "Jeremy Thomas", "link": "https://stackoverflow.com/users/3914509/jeremy-thomas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 452, "favorite_count": 0, "accepted_answer_id": 31033621, "answer_count": 1, "score": 0, "last_activity_date": 1435168452, "creation_date": 1435165554, "question_id": 31032770, "link": "https://stackoverflow.com/questions/31032770/hartl-rails-tutorial-chapter-8-test-error-password-should-be-present", "title": "Hartl Rails Tutorial: Chapter 8 test error &quot;Password should be present&quot;", "body": "<p>I am very new to Ruby/Rails and have been working through the Hartl tutorial and I've made it to Chapter 8, but now one of my tests will not pass.  The test that fails is as follows:</p>\n\n<pre><code>  test \"password should be present (nonblank)\" do\n    @user.password = @user.password_confirmation = \" \" * 6\n    assert_not @user.valid?\n  end\n</code></pre>\n\n<p>The test outputs the following when I run it:</p>\n\n<pre><code>2) Failure:\nUserTest#test_password_should_be_present_(nonblank) [/home/ubuntu/workspace/sample_app/test/models/user_test.rb:61]:\nExpected true to be nil or false\n</code></pre>\n\n<p>This test passed until I ran the line:</p>\n\n<pre><code>$ rails generate migration add_remember_digest_to_users remember_digest:string\n$ bundle exec rake db:migrate\n</code></pre>\n\n<p>I finished the remainder of the chapter and all test failures have been resolved other than the one I mentioned previously. It seems as though this test expects false or nil but my code is returning true for some reason.  </p>\n\n<p>Here is my user.rb</p>\n\n<pre><code>class User &lt; ActiveRecord::Base\n  attr_accessor :remember_token\n  before_save { self.email = email.downcase }\n  validates :name,  presence: true, length: { maximum: 50 }\n  VALID_EMAIL_REGEX = /\\A[\\w+\\-.]+@[a-z\\d\\-.]+\\.[a-z]+\\z/i\n  validates :email, presence: true, length: { maximum: 255 },\n                    format: { with: VALID_EMAIL_REGEX },\n                    uniqueness: { case_sensitive: false }\n  has_secure_password\n  validates :password, length: { minimum: 6 }\n\n  # Returns the hash digest of the given string.\n  def User.digest(string)\n    cost = ActiveModel::SecurePassword.min_cost ? BCrypt::Engine::MIN_COST :\n                                                  BCrypt::Engine.cost\n    BCrypt::Password.create(string, cost: cost)\n  end\n\n  # Returns a random token.\n  def User.new_token\n    SecureRandom.urlsafe_base64\n  end\n\n  # Remembers a user in the database for use in persistent sessions.\n  def remember\n    self.remember_token = User.new_token\n    update_attribute(:remember_digest, User.digest(remember_token))\n  end\n\n  # Returns true if the given token matches the digest.\n  def authenticated?(remember_token)\n    return false if remember_digest.nil?\n    BCrypt::Password.new(remember_digest).is_password?(remember_token)\n  end\n\n  # Forgets a user.\n  def forget\n    update_attribute(:remember_digest, nil)\n  end\nend\n</code></pre>\n\n<p>My users_controller.rb</p>\n\n<pre><code>class UsersController &lt; ApplicationController\n\n  def show\n    @user = User.find(params[:id])\n  end\n\n  def new\n    @user = User.new\n  end\n\n  def create\n    @user = User.new(user_params)\n    if @user.save\n      log_in @user\n      flash[:success] = \"Welcome to the Sample App!\"\n      redirect_to @user\n    else\n      render 'new'\n    end\n  end\n\n  private\n\n    def user_params\n      params.require(:user).permit(:name, :email, :password, \n                                   :password_confirmation)\n   end\nend\n</code></pre>\n\n<p>My sessions_controller.rb</p>\n\n<pre><code>class SessionsController &lt; ApplicationController\n  def new\n  end\n\n  def create\n    user = User.find_by(email: params[:session][:email].downcase)\n    if user &amp;&amp; user.authenticate(params[:session][:password])\n      log_in user\n      params[:session][:remember_me] == '1' ? remember(user) : forget(user)\n      redirect_to user\n    else\n      flash.now[:danger] = 'Invalid email/password combination'\n      render 'new'\n    end\n  end\n\n  def destroy\n    log_out if logged_in?\n    redirect_to root_url\n  end\nend\n</code></pre>\n\n<p>...and lastly my sessions_helper.rb</p>\n\n<p>module SessionsHelper</p>\n\n<pre><code>  # Logs in the given user.\n  def log_in(user)\n    session[:user_id] = user.id\n  end\n\n  # Remembers a user in a persistent session.\n  def remember(user)\n    user.remember\n    cookies.permanent.signed[:user_id] = user.id\n    cookies.permanent[:remember_token] = user.remember_token\n  end\n\n  # Returns the user corresponding to the remember token cookie.\n  def current_user\n    if (user_id = session[:user_id])\n      @current_user ||= User.find_by(id: user_id)\n    elsif (user_id = cookies.signed[:user_id])\n      user = User.find_by(id: user_id)\n      if user &amp;&amp; user.authenticated?(cookies[:remember_token])\n        log_in user\n        @current_user = user\n      end\n    end\n  end\n\n  # Returns true if the user is logged in, false otherwise.\n  def logged_in?\n    !current_user.nil?\n  end\n\n  # Forgets a persistent session.\n  def forget(user)\n    user.forget\n    cookies.delete(:user_id)\n    cookies.delete(:remember_token)\n  end\n\n  # Logs out the current user.\n  def log_out\n    forget(current_user)\n    session.delete(:user_id)\n    @current_user = nil\n  end\nend\n</code></pre>\n\n<p>My apologies if this is a simple mistake, but I am new to these languages and have been scratching my head over this for a while.</p>\n\n<p>Thanks</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 117, "user_id": 4521269, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/FMrJw.jpg?s=128&g=1", "display_name": "Matt White", "link": "https://stackoverflow.com/users/4521269/matt-white"}, "edited": false, "score": 0, "creation_date": 1435166924, "post_id": 31032802, "comment_id": 50090814, "body": "Since I&#39;m bringing in the ID as a param from the User show view, how do I feed that into the hidden field?"}, {"owner": {"reputation": 10255, "user_id": 1155142, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/c680db41999d478ca34d1a77a470e30d?s=128&d=identicon&r=PG", "display_name": "gabrielhilal", "link": "https://stackoverflow.com/users/1155142/gabrielhilal"}, "reply_to_user": {"reputation": 117, "user_id": 4521269, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/FMrJw.jpg?s=128&g=1", "display_name": "Matt White", "link": "https://stackoverflow.com/users/4521269/matt-white"}, "edited": false, "score": 0, "creation_date": 1435167213, "post_id": 31032802, "comment_id": 50090975, "body": "if you have set the <code>@user</code> in the users controller show action: <code>&lt;%= f.hidden_field :id, :value =&gt; @user.id %&gt;</code>"}], "tags": [], "owner": {"reputation": 10255, "user_id": 1155142, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/c680db41999d478ca34d1a77a470e30d?s=128&d=identicon&r=PG", "display_name": "gabrielhilal", "link": "https://stackoverflow.com/users/1155142/gabrielhilal"}, "is_accepted": true, "score": 1, "last_activity_date": 1435165662, "creation_date": 1435165662, "answer_id": 31032802, "question_id": 31032734, "link": "https://stackoverflow.com/questions/31032734/form-for-error-in-ruby-on-rails/31032802#31032802", "title": "Form_for error in Ruby on Rails", "body": "<p>The problem is in this line:</p>\n\n<pre><code>@message.receiver_id = User.find(params[:id])\n</code></pre>\n\n<p><code>params[:id]</code> is <code>nil</code>. You must send the <code>id</code> in the form:</p>\n\n<pre><code>&lt;%= form_for Message.new do |f| %&gt;\n&lt;%= f.text_field :message %&gt;\n&lt;%= f.hidden_field :id, :value =&gt; the_user_id_goes_here %&gt;\n&lt;%= f.submit %&gt;\n&lt;% end %&gt;\n</code></pre>\n"}], "owner": {"reputation": 117, "user_id": 4521269, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/FMrJw.jpg?s=128&g=1", "display_name": "Matt White", "link": "https://stackoverflow.com/users/4521269/matt-white"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 123, "favorite_count": 0, "accepted_answer_id": 31032802, "answer_count": 1, "score": -1, "last_activity_date": 1435165662, "creation_date": 1435165431, "question_id": 31032734, "link": "https://stackoverflow.com/questions/31032734/form-for-error-in-ruby-on-rails", "title": "Form_for error in Ruby on Rails", "body": "<p>I keep running into an issue while attempting to send messages from one user to another.</p>\n\n<h1>User Model</h1>\n\n<pre><code>has_many :sent_messages, class_name: \"Message\" , foreign_key: :sender_id\nhas_many :received_messages, class_name: \"Message\", foreign_key: :receiver_id\n\ndef friendships\n Friendship.where(\"sender_id = ? or receiver_id = ? and status = ?\", self.id, self.id, \"accepted\")\nend\n\ndef friends\n ids = friendships.pluck(:sender_id, :receiver_id).flatten.uniq\n ids.delete(self.id)\n\n friends = User.where(id: ids)\nend\n</code></pre>\n\n<h1>User show view</h1>\n\n<pre><code>&lt;% current_user.friends.map do |f| %&gt;\n    &lt;strong&gt;&lt;%= link_to \"#{f.name}\", conversation_path(f.id) %&gt;&lt;/strong&gt;&lt;p&gt;&lt;/p&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<h1>Conversations show view</h1>\n\n<pre><code>&lt;% @test.map do |c| %&gt;\n&lt;%= c.sender.name %&gt;:\n&lt;%= c.message %&gt;&lt;p&gt;&lt;/p&gt;\n&lt;% end %&gt;\n\n&lt;%= form_for Message.new do |f| %&gt;\n&lt;%= f.text_field :message %&gt;\n&lt;%= f.submit %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<h1>Conversations controller</h1>\n\n<pre><code>class ConversationsController &lt; ApplicationController\n\ndef show\n #current user\n #other use in conversation\n @other_user = User.find(params[:id])\n @test = Message.where(\"sender_id IN (#{current_user.id},#{@other_user.id}) AND receiver_id IN (#{current_user.id}, #{@other_user.id})\")\nend\n\nend\n</code></pre>\n\n<h1>Messages create controller</h1>\n\n<pre><code>class MessagesController &lt; ApplicationController\n\n  def index\n   @message = current_user.friends\n  end\n\n\n  def create\n    @message = Message.new(params[:message].permit!)\n    @message.sender_id = current_user.id\n    @message.receiver_id = User.find(params[:id])\n  if @message.save\n    redirect_to :root \n  end\nend\nend\n</code></pre>\n\n<p>When I use the form_for in conversations show view, I get the \"Couldn't find User without an ID\" error, although I feel like it should be feeding it the IDs for both users?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "gem"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1435165434, "post_id": 31032480, "comment_id": 50089860, "body": "That&#39;s not much to go on. You&#39;ll have to give more context."}, {"owner": {"reputation": 12326, "user_id": 1125159, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/3b5e38afbccf47011db011b392f8a178?s=128&d=identicon&r=PG", "display_name": "Powers", "link": "https://stackoverflow.com/users/1125159/powers"}, "edited": false, "score": 0, "creation_date": 1435165837, "post_id": 31032480, "comment_id": 50090128, "body": "Whatever object <code>@app</code> is doesn&#39;t have a call method.  What is <code>@app</code>?"}, {"owner": {"reputation": 423, "user_id": 3385136, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/100005355848045/picture?type=large", "display_name": "user3385136", "link": "https://stackoverflow.com/users/3385136/user3385136"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1435221356, "post_id": 31032480, "comment_id": 50112837, "body": "@tadman Apologies for the lack of context. I assumed it was relating to the gem and thought it may have been a problem experienced before. What further information would be helpful."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1435247743, "post_id": 31032480, "comment_id": 50131630, "body": "A full stack trace, if applicable? Any error messages from the log? <b>Anything</b>, really."}], "answers": [{"tags": [], "owner": {"reputation": 423, "user_id": 3385136, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/100005355848045/picture?type=large", "display_name": "user3385136", "link": "https://stackoverflow.com/users/3385136/user3385136"}, "is_accepted": false, "score": 0, "last_activity_date": 1435226334, "creation_date": 1435226334, "answer_id": 31047072, "question_id": 31032480, "link": "https://stackoverflow.com/questions/31032480/nomethoderror-at-undefined-method-call-for/31047072#31047072", "title": "NoMethodError at / undefined method `call&#39; for", "body": "<p>The problem seemed to be a poor deployment as when i redepoyed the application it worked this time. No understanding of why though.</p>\n"}], "owner": {"reputation": 423, "user_id": 3385136, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/100005355848045/picture?type=large", "display_name": "user3385136", "link": "https://stackoverflow.com/users/3385136/user3385136"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 101, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1435226334, "creation_date": 1435164647, "question_id": 31032480, "link": "https://stackoverflow.com/questions/31032480/nomethoderror-at-undefined-method-call-for", "title": "NoMethodError at / undefined method `call&#39; for", "body": "<p>I get this error when loading a ror site i am responsible for. The strange thing is its deployed from a war file that hasnt changed since the last deploy. It happens randomly every so often when i restart tomcat. Backtrace is as follows;</p>\n\n<pre><code>file:/var/lib/tomcat8/webapps/ROOT/WEB-INF/lib/gems-gems-jruby-rack-1.1.16-lib-jruby-rack-1.1.16.jar!/rack/handler/servlet.rb in call\n\nline22: self.class.response.new(@app.call(create_env(servlet_env)))\n</code></pre>\n\n<p>I'm assuming this is a problem with a gem file. Why would this be happening given other sites using the same setup dont have this problem? What can i do to stop this occuring?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "string"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1435163356, "post_id": 31031984, "comment_id": 50088555, "body": "What is a &quot;phone number&quot;? If you can define that with a singular regular expression I think you&#39;ll win a Nobel Prize."}, {"owner": {"reputation": 1925, "user_id": 2386548, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fb0c86baa20f25404248077f3c01e0b8?s=128&d=identicon&r=PG", "display_name": "Carpela", "link": "https://stackoverflow.com/users/2386548/carpela"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1435165429, "post_id": 31031984, "comment_id": 50089854, "body": "Not worrying about getting it absolutely right. But there&#39;s got to be a decent way of getting close..."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1435166462, "post_id": 31031984, "comment_id": 50090536, "body": "I&#39;m very tempted to mark this as a duplicate, but will leave that to others. You need to read &quot;<a href=\"http://stackoverflow.com/q/123559/128421\">A comprehensive regex for phone number validation</a>&quot;. What you&#39;re trying to do is difficult as there are a wide range of possible formats, and people can arbitrarily/accidentally alter their number format so strip everything but the values that can only exist in a phone number and go from there."}, {"owner": {"reputation": 1925, "user_id": 2386548, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fb0c86baa20f25404248077f3c01e0b8?s=128&d=identicon&r=PG", "display_name": "Carpela", "link": "https://stackoverflow.com/users/2386548/carpela"}, "edited": false, "score": 0, "creation_date": 1435179700, "post_id": 31031984, "comment_id": 50098051, "body": "I should probably clarify, I don&#39;t need this to turn into proper phone numbers. Using the phony gem for that which will do it far better than any regex. It&#39;s more that I&#39;m trying to sanitize the string and remove the numbers from it, knowing what I&#39;m removing so I can replace it with something sensible"}], "answers": [{"tags": [], "owner": {"reputation": 2258, "user_id": 4705221, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-cEecftAf1DQ/AAAAAAAAAAI/AAAAAAAAACM/LLt-m2bDNZw/photo.jpg?sz=128", "display_name": "Patrick Murphy", "link": "https://stackoverflow.com/users/4705221/patrick-murphy"}, "is_accepted": false, "score": 0, "last_activity_date": 1435164030, "creation_date": 1435164030, "answer_id": 31032294, "question_id": 31031984, "link": "https://stackoverflow.com/questions/31031984/checking-whether-a-string-contains-a-phone-number/31032294#31032294", "title": "Checking whether a string contains a phone number", "body": "<p>This pattern will get rid of the space but not match your third case with spaces:</p>\n\n<pre><code>/([^A-Z|^\"|^\\s]{6,})/i\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1925, "user_id": 2386548, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fb0c86baa20f25404248077f3c01e0b8?s=128&d=identicon&r=PG", "display_name": "Carpela", "link": "https://stackoverflow.com/users/2386548/carpela"}, "edited": false, "score": 0, "creation_date": 1436790887, "post_id": 31032374, "comment_id": 50744271, "body": "It&#39;s almost there, but but deletes all the spaces in the numbers before the scan (I want to be able to find the string later and replace it with something so that won&#39;t help). i.e. I just want to drop the leading space and keep the remaining string exactly as it started."}], "tags": [], "owner": {"reputation": 1967, "user_id": 2355344, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5309fb1bc1f467ac017b7fdd89ce5154?s=128&d=identicon&r=PG", "display_name": "Collin Graves", "link": "https://stackoverflow.com/users/2355344/collin-graves"}, "is_accepted": false, "score": 5, "last_activity_date": 1435166211, "last_edit_date": 1435166211, "creation_date": 1435164306, "answer_id": 31032374, "question_id": 31031984, "link": "https://stackoverflow.com/questions/31031984/checking-whether-a-string-contains-a-phone-number/31032374#31032374", "title": "Checking whether a string contains a phone number", "body": "<p>Adding in the third use-case with spaces is difficult. I think the only way to successfully meet that acceptance criteria would be to chain a <code>#gsub</code> call on to your <code>#scan</code>. </p>\n\n<p>Thus: </p>\n\n<pre><code>text.gsub(/\\s+/, \"\").scan(/([^A-Z|^\"|^\\s]{6,})/i)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1925, "user_id": 2386548, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fb0c86baa20f25404248077f3c01e0b8?s=128&d=identicon&r=PG", "display_name": "Carpela", "link": "https://stackoverflow.com/users/2386548/carpela"}, "is_accepted": false, "score": 0, "last_activity_date": 1436794341, "last_edit_date": 1436794341, "creation_date": 1436792153, "answer_id": 31384024, "question_id": 31031984, "link": "https://stackoverflow.com/questions/31031984/checking-whether-a-string-contains-a-phone-number/31384024#31384024", "title": "Checking whether a string contains a phone number", "body": "<p>This is what I came to in the end in case it helps somebody</p>\n\n<pre><code>numbers = text.scan(/([^A-Z|^\"]{6,})/i).collect{|x| x[0].strip }\n</code></pre>\n\n<p>That gives me an array of </p>\n\n<pre><code>[\"+442031234567\", \"02031234567\"]\n</code></pre>\n\n<p>I'm sure there is a more elegant way of doing this and possibly you'd want to check the numbers for likelihood of being phonelike - e.g. using the brilliant <a href=\"https://github.com/floere/phony\" rel=\"nofollow\">Phony</a> gem.</p>\n\n<pre><code>numbers = text.scan(/([^A-Z|^\"]{6,})/i).collect{|x| x[0].strip }\nreal_numbers = numbers.keep_if{|n| Phony.plausible? PhonyRails.normalize_number(n, default_country_code: \"GB\")}\n</code></pre>\n\n<p>Which should help exclude serial numbers or the like from being identified as numbers. You'll obviously want to change the country code to something relevant for you.</p>\n"}, {"comments": [{"owner": {"reputation": 1925, "user_id": 2386548, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fb0c86baa20f25404248077f3c01e0b8?s=128&d=identicon&r=PG", "display_name": "Carpela", "link": "https://stackoverflow.com/users/2386548/carpela"}, "edited": false, "score": 0, "creation_date": 1436872841, "post_id": 31386267, "comment_id": 50783902, "body": "Should thenumber actually necessarily be preceded by a space? e.g.        &quot;Give me a call (07123456789)&quot;   the other piece is defeinitely an improvement though, I had to add a special piece to remove a leading colon (as many emails have something like &quot;T: 0123456789&quot;) which was getting picked up by the previous one."}, {"owner": {"reputation": 1925, "user_id": 2386548, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fb0c86baa20f25404248077f3c01e0b8?s=128&d=identicon&r=PG", "display_name": "Carpela", "link": "https://stackoverflow.com/users/2386548/carpela"}, "edited": false, "score": 0, "creation_date": 1436873147, "post_id": 31386267, "comment_id": 50784095, "body": "Also, might want to add &quot;.&quot; as a potential separator (apparently popular across the pond). Just added above."}, {"owner": {"reputation": 1925, "user_id": 2386548, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fb0c86baa20f25404248077f3c01e0b8?s=128&d=identicon&r=PG", "display_name": "Carpela", "link": "https://stackoverflow.com/users/2386548/carpela"}, "edited": false, "score": 0, "creation_date": 1436877577, "post_id": 31386267, "comment_id": 50787239, "body": "Also having the issue where we have a piece of punctuation followed by a phone number. e.g. &quot;Telephone - 02071234567&quot;  Returns &quot;- 02071234567&quot; as the number."}, {"owner": {"reputation": 94, "user_id": 4806936, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-llTODeO6jIM/AAAAAAAAAAI/AAAAAAAAABk/H4jQ5EFKZt8/photo.jpg?sz=128", "display_name": "RAWdaMedia", "link": "https://stackoverflow.com/users/4806936/rawdamedia"}, "reply_to_user": {"reputation": 1925, "user_id": 2386548, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fb0c86baa20f25404248077f3c01e0b8?s=128&d=identicon&r=PG", "display_name": "Carpela", "link": "https://stackoverflow.com/users/2386548/carpela"}, "edited": false, "score": 0, "creation_date": 1437031313, "post_id": 31386267, "comment_id": 50863810, "body": "I tried to cover the cases that you gave as examples.  I guess it is important to think of all the edge cases when trying to write tests... here is the quick code that I used to test whether the regex works: <code>samples = [&quot;Give me a call (07123456789)&quot;,&quot;T: 0123456789&quot;]</code>   <code>for text in samples do</code>   <code>puts text.scan(&#47;(?&lt;=[ \\-(])[+\\(\\d][\\d \\-+()]+$|(?&lt;=[ \\-(])[+\\(\\d][\\d \\-+()]+(?=[ ]\\w|[.\\)])&#47;).inspect</code>   <code>end</code>  NB some tweaking to get rid of a leading &quot;-&quot;, but I will let you figure out how to get rid of brackets around the whole number if that is important to you."}, {"owner": {"reputation": 94, "user_id": 4806936, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-llTODeO6jIM/AAAAAAAAAAI/AAAAAAAAABk/H4jQ5EFKZt8/photo.jpg?sz=128", "display_name": "RAWdaMedia", "link": "https://stackoverflow.com/users/4806936/rawdamedia"}, "reply_to_user": {"reputation": 1925, "user_id": 2386548, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fb0c86baa20f25404248077f3c01e0b8?s=128&d=identicon&r=PG", "display_name": "Carpela", "link": "https://stackoverflow.com/users/2386548/carpela"}, "edited": false, "score": 0, "creation_date": 1437032215, "post_id": 31386267, "comment_id": 50864348, "body": "It is starting to be really confusing to look at, so you would want to have really good tests to make sure that it works.  Ideally break your constructor of the regex into smaller steps that you could then comment properly, so that months down the track you would still know what is going on!!!!"}], "tags": [], "owner": {"reputation": 94, "user_id": 4806936, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-llTODeO6jIM/AAAAAAAAAAI/AAAAAAAAABk/H4jQ5EFKZt8/photo.jpg?sz=128", "display_name": "RAWdaMedia", "link": "https://stackoverflow.com/users/4806936/rawdamedia"}, "is_accepted": true, "score": 4, "last_activity_date": 1436798512, "last_edit_date": 1436798512, "creation_date": 1436798146, "answer_id": 31386267, "question_id": 31031984, "link": "https://stackoverflow.com/questions/31031984/checking-whether-a-string-contains-a-phone-number/31386267#31386267", "title": "Checking whether a string contains a phone number", "body": "<p>The following code will extract all the numbers for you:</p>\n\n<pre><code>text.scan(/(?&lt;=[ ])[\\d \\-+()]+$|(?&lt;=[ ])[\\d \\-+()]+(?=[ ]\\w)/)\n</code></pre>\n\n<p>For the examples you supplied this results in:</p>\n\n<pre><code>[\"02031234567\"]\n[\"+442031234567\"]\n[\"+44 (0) 203 123 4567\"]\n[\"0207-123-4567\"]\n[\"02031234567\", \"+44207-1234567\"]\n</code></pre>\n\n<p>To understand this regex, what we are matching is:</p>\n\n<ul>\n<li><code>[\\d \\-+()]+</code> which is a sequence of one or more digits, spaces, minus, plus, opening or closing brackets (in any order - NB regex is greedy by default, so it will match as many of these characters next to each other as possible)</li>\n<li>that must be preceded by a space <code>(?&lt;=[ ])</code> - NB the space in the positive look-behind is not captured, and therefore this makes sure that there are no leading spaces in the results</li>\n<li>and is either at the end of the string <code>$</code>, or <code>|</code> is followed by a space then a word character <code>(?=[ ]\\w)</code> (NB this lookahead is not captured)</li>\n</ul>\n"}], "owner": {"reputation": 1925, "user_id": 2386548, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fb0c86baa20f25404248077f3c01e0b8?s=128&d=identicon&r=PG", "display_name": "Carpela", "link": "https://stackoverflow.com/users/2386548/carpela"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1381, "favorite_count": 1, "accepted_answer_id": 31386267, "answer_count": 4, "score": 0, "last_activity_date": 1436798512, "creation_date": 1435163184, "last_edit_date": 1436791455, "question_id": 31031984, "link": "https://stackoverflow.com/questions/31031984/checking-whether-a-string-contains-a-phone-number", "title": "Checking whether a string contains a phone number", "body": "<p>Trying to work out how to parse out phone numbers that are left in a string. </p>\n\n<p>e.g. </p>\n\n<pre><code> \"Hi Han, this is Chewie, Could you give me a call on 02031234567\"\n \"Hi Han, this is Chewie, Could you give me a call on +442031234567\"\n \"Hi Han, this is Chewie, Could you give me a call on +44 (0) 203 123 4567\"\n \"Hi Han, this is Chewie, Could you give me a call on 0207-123-4567\"\n \"Hi Han, this is Chewie, Could you give me a call on 02031234567 OR +44207-1234567\"\n</code></pre>\n\n<p>And be able to consistently replace any one of them with some other item (e.g. some text, or a link). </p>\n\n<p>Am assuming it's a regex type approach (I'm already doing something similar with email which works well).</p>\n\n<p>I've got to </p>\n\n<pre><code> text.scan(/([^A-Z|^\"]{6,})/i)\n</code></pre>\n\n<p>Which leaves me a leading space I can't work out how to drop (would appreciate the help there). \nIs there a standard way of doing this that people use?</p>\n\n<p>It also drops things into arrays, which isn't particularly helpful</p>\n\n<p>i.e. if there were multiple numbers. </p>\n\n<pre><code>[[\"02031234567\"][\"+44207-1234567\"]]\n</code></pre>\n\n<p>as opposed to </p>\n\n<pre><code>[\"02031234567\",\"+44207-1234567\"]\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 1849, "user_id": 3437721, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/3e6fac72d7b35f2177b6f56eab43db28?s=128&d=identicon&r=PG&f=1", "display_name": "user3437721", "link": "https://stackoverflow.com/users/3437721/user3437721"}, "edited": false, "score": 0, "creation_date": 1435163903, "post_id": 31031950, "comment_id": 50088904, "body": "Will try tomorrow,  I might need to post the calling code which calls the method. Will the loop return a true or false for each row? Or just return a final boolean?"}], "tags": [], "owner": {"reputation": 1118, "user_id": 3243794, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/QxQsp.jpg?s=128&g=1", "display_name": "nesiseka", "link": "https://stackoverflow.com/users/3243794/nesiseka"}, "is_accepted": false, "score": 0, "last_activity_date": 1435163095, "creation_date": 1435163095, "answer_id": 31031950, "question_id": 31031842, "link": "https://stackoverflow.com/questions/31031842/ruby-loop-to-check-if-at-least-one-pair-of-values-are-populated/31031950#31031950", "title": "Ruby - loop to check if at least one pair of values are populated", "body": "<p>The function looks ok, but there seems to be syntax errors, I'd also make a few amendments:</p>\n\n<pre><code>def form_valid?(single_field, aggregate_field)\n    self.lo_item.lo_line_items.each do |item|\n      return true if !item.send(single_field).nil? &amp;&amp; !item.send(aggregate_field)\n    end\n    false\n  end\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1849, "user_id": 3437721, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/3e6fac72d7b35f2177b6f56eab43db28?s=128&d=identicon&r=PG&f=1", "display_name": "user3437721", "link": "https://stackoverflow.com/users/3437721/user3437721"}, "edited": false, "score": 0, "creation_date": 1435167427, "post_id": 31032279, "comment_id": 50091107, "body": "Thanks for this makes sense week try in my am."}], "tags": [], "owner": {"reputation": 191, "user_id": 4987274, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/eaaee67835027c503d4634fbec58c9e3?s=128&d=identicon&r=PG", "display_name": "user4987274", "link": "https://stackoverflow.com/users/4987274/user4987274"}, "is_accepted": true, "score": 1, "last_activity_date": 1435164001, "last_edit_date": 1495535203, "creation_date": 1435164001, "answer_id": 31032279, "question_id": 31031842, "link": "https://stackoverflow.com/questions/31031842/ruby-loop-to-check-if-at-least-one-pair-of-values-are-populated/31032279#31032279", "title": "Ruby - loop to check if at least one pair of values are populated", "body": "<p>Try leveraging <code>any?</code> or <code>none?</code> from the <code>Enumerable</code> module.</p>\n\n<p>Your code could be rewritten as</p>\n\n<pre><code>def no_values_present?(single_field, aggregate_field)\n    self.lo_item.lo_line_items.none? { |item|\n        !(item.send(single_field).nil?) &amp;&amp; !(item.send(aggregate_field).nil?)\n    }\nend\n</code></pre>\n\n<p>although I think that it would be clearer to have the condition be positive and to return <code>true</code> when there is a match found. I would write</p>\n\n<pre><code>def any_pairs_present?(single_field, aggregate_field)\n    self.lo_item.lo_line_items.any? { |item|\n        !(item.send(single_field).nil?) &amp;&amp; !(item.send(aggregate_field).nil?)\n    }\nend\n</code></pre>\n\n<hr>\n\n<p>Note that <code>\"!item.#{single_field}\"</code> will never be <code>nil</code> because it will always be a string! If you want to access instance fields dynamically then one way to do that is with <code>send</code>, but for other options you could look <a href=\"https://stackoverflow.com/questions/903763/how-to-convert-from-a-string-to-object-attribute-name\">here</a> which suggests the alternatives of <code>instance_eval</code> and <code>instance_variable_get</code>.</p>\n"}], "owner": {"reputation": 1849, "user_id": 3437721, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/3e6fac72d7b35f2177b6f56eab43db28?s=128&d=identicon&r=PG&f=1", "display_name": "user3437721", "link": "https://stackoverflow.com/users/3437721/user3437721"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "accepted_answer_id": 31032279, "answer_count": 2, "score": 0, "last_activity_date": 1435164001, "creation_date": 1435162766, "question_id": 31031842, "link": "https://stackoverflow.com/questions/31031842/ruby-loop-to-check-if-at-least-one-pair-of-values-are-populated", "title": "Ruby - loop to check if at least one pair of values are populated", "body": "<p>So in my rails form there are several rows of 2 textfields.  For the form to save ok, at least one of the <em>pair</em> of textfields needs to be filled out.</p>\n\n<p>So</p>\n\n<pre><code>nil   nil\n10    20\nnil   nil\nnil   nil\n</code></pre>\n\n<p>is valid.</p>\n\n<p>This:</p>\n\n<pre><code>nil   nil\nnil   nil\nnil   nil\nnil   nil\n</code></pre>\n\n<p>is invalid</p>\n\n<p>This:</p>\n\n<pre><code>nil   10\nnil   nil\nnil   nil\nnil   nil\n</code></pre>\n\n<p>is invalid</p>\n\n<p>Here is the method I am using to check all the fields (note that single_field and aggregate_field are strings and are the field names):</p>\n\n<pre><code>def no_values_present?(single_field, aggregate_field)\n    self.lo_item.lo_line_items.each do |item|\n    return false if \"!item.#{single_field}\".nil? &amp;&amp; \"!item.#{aggregate_field}\".nil?\n    end\n    true\n  end\n</code></pre>\n\n<p>But I guess this doesn't work as it will return true or false several times and will determine that a row is invalid even though a previous row may have been valid.</p>\n\n<p>I need an overall true or false.</p>\n\n<p>How can this be achieved?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "email", "postmark"], "comments": [{"owner": {"reputation": 18773, "user_id": 91830, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2505b282d57c29be797dc35b245adb4c?s=128&d=identicon&r=PG", "display_name": "Philip Hallstrom", "link": "https://stackoverflow.com/users/91830/philip-hallstrom"}, "edited": false, "score": 1, "creation_date": 1435165465, "post_id": 31031545, "comment_id": 50089889, "body": "Try another test to a non gmail account and see if it&#39;s garbled there."}, {"owner": {"reputation": 310, "user_id": 2876701, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/92c6r.jpg?s=128&g=1", "display_name": "Dave Urban", "link": "https://stackoverflow.com/users/2876701/dave-urban"}, "reply_to_user": {"reputation": 18773, "user_id": 91830, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2505b282d57c29be797dc35b245adb4c?s=128&d=identicon&r=PG", "display_name": "Philip Hallstrom", "link": "https://stackoverflow.com/users/91830/philip-hallstrom"}, "edited": false, "score": 0, "creation_date": 1435171133, "post_id": 31031545, "comment_id": 50093232, "body": "Just for fun I tried it with an AOL account, and got a slightly different but still garbled header: <code>&quot;Sally Smith,sallysmithmd@aol.com</code>"}, {"owner": {"reputation": 310, "user_id": 2876701, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/92c6r.jpg?s=128&g=1", "display_name": "Dave Urban", "link": "https://stackoverflow.com/users/2876701/dave-urban"}, "reply_to_user": {"reputation": 18773, "user_id": 91830, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2505b282d57c29be797dc35b245adb4c?s=128&d=identicon&r=PG", "display_name": "Philip Hallstrom", "link": "https://stackoverflow.com/users/91830/philip-hallstrom"}, "edited": false, "score": 0, "creation_date": 1435177626, "post_id": 31031545, "comment_id": 50096954, "body": "Actually I miscopied the header from gmail (now fixed).  I get the same garbled header, <code>&quot;Sally Smith,sallysmithmd@whatever.com</code>, in both cases."}, {"owner": {"reputation": 18773, "user_id": 91830, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2505b282d57c29be797dc35b245adb4c?s=128&d=identicon&r=PG", "display_name": "Philip Hallstrom", "link": "https://stackoverflow.com/users/91830/philip-hallstrom"}, "edited": false, "score": 1, "creation_date": 1435185718, "post_id": 31031545, "comment_id": 50100657, "body": "Sounds like a Postmark problem then."}, {"owner": {"reputation": 942, "user_id": 418633, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf1f4211f78bdffc7d4a9cb52bff671d?s=128&d=identicon&r=PG", "display_name": "JP Toto", "link": "https://stackoverflow.com/users/418633/jp-toto"}, "edited": false, "score": 1, "creation_date": 1435239617, "post_id": 31031545, "comment_id": 50125042, "body": "We identified this as a Postmark problem in our back-end. I&#39;m working on a fix now and should have it rolled out shortly."}, {"owner": {"reputation": 310, "user_id": 2876701, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/92c6r.jpg?s=128&g=1", "display_name": "Dave Urban", "link": "https://stackoverflow.com/users/2876701/dave-urban"}, "edited": false, "score": 0, "creation_date": 1435247664, "post_id": 31031545, "comment_id": 50131566, "body": "Well, that clears that up.  Thanks!"}], "owner": {"reputation": 310, "user_id": 2876701, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/92c6r.jpg?s=128&g=1", "display_name": "Dave Urban", "link": "https://stackoverflow.com/users/2876701/dave-urban"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 315, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1435177535, "creation_date": 1435161940, "last_edit_date": 1495541648, "question_id": 31031545, "link": "https://stackoverflow.com/questions/31031545/when-i-send-an-email-with-a-comma-in-the-to-header-the-header-gets-garbled-e", "title": "When I send an email with a comma in the &quot;To&quot; header, the header gets garbled, even though the display name is in quotes. Why?", "body": "<p>I have a Rails app (rails 4.1.11) using Postmark for email delivery.  I'm trying to include the user's name in the \"To\" header of my emails, and I'm having trouble in cases where the name contains a comma, even though I'm putting the name in quotes.</p>\n\n<p>I'm generating the \"To\" header like so:</p>\n\n<pre><code>address = Mail::Address.new user.email\naddress.display_name = user.name\naddress.format\n</code></pre>\n\n<p>(as suggested in the second answer to <a href=\"https://stackoverflow.com/questions/957422/rails-actionmailer-format-sender-and-recipient-name-email-address\">Rails ActionMailer - format sender and recipient name/email address</a>).  This automatically puts quotes around the name when necessary, so if the user's name is \"Sally Smith, MD\" the \"To\" header will be <code>\"Sally Smith, MD\" &lt;sallysmithmd@example.com&gt;</code>.</p>\n\n<p>However, when the email is delivered, the \"To\" header is rendered as <code>\"Sally Smith,sallysmithmd@example.com</code> (at least that's how it shows up in Gmail).  When I look at the raw source of the email in Postmark, I see the expected value, <code>To: \"Sally Smith, MD\" &lt;sallysmithmd@example.com&gt;</code>.  So somewhere between Postmark and Gmail, the header is getting garbled.  Am I doing something wrong when formatting the header?  Is this a Postmark problem?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3", "ruby-on-rails-4", "devise"], "answers": [{"comments": [{"owner": {"reputation": 1824, "user_id": 935394, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/452f4ef4bec908313c9df902632ab7bb?s=128&d=identicon&r=PG", "display_name": "Max Rose-Collins", "link": "https://stackoverflow.com/users/935394/max-rose-collins"}, "edited": false, "score": 0, "creation_date": 1435224058, "post_id": 31045879, "comment_id": 50114460, "body": "I am trying to get the number of keywords the current member has when they are adding a new keyword."}, {"owner": {"reputation": 1824, "user_id": 935394, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/452f4ef4bec908313c9df902632ab7bb?s=128&d=identicon&r=PG", "display_name": "Max Rose-Collins", "link": "https://stackoverflow.com/users/935394/max-rose-collins"}, "edited": false, "score": 0, "creation_date": 1435243183, "post_id": 31045879, "comment_id": 50128096, "body": "any idea how i can do that??"}, {"owner": {"reputation": 23, "user_id": 1225376, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de921fa18c4541dce82705c5875749b6?s=128&d=identicon&r=PG", "display_name": "Sushma", "link": "https://stackoverflow.com/users/1225376/sushma"}, "reply_to_user": {"reputation": 1824, "user_id": 935394, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/452f4ef4bec908313c9df902632ab7bb?s=128&d=identicon&r=PG", "display_name": "Max Rose-Collins", "link": "https://stackoverflow.com/users/935394/max-rose-collins"}, "edited": false, "score": 0, "creation_date": 1435279670, "post_id": 31045879, "comment_id": 50146565, "body": "Since group belongs_to member, maybe member has_many groups? So maybe ` member.groups.collect { |group| group.keywords }.uniq` may work."}], "tags": [], "owner": {"reputation": 23, "user_id": 1225376, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de921fa18c4541dce82705c5875749b6?s=128&d=identicon&r=PG", "display_name": "Sushma", "link": "https://stackoverflow.com/users/1225376/sushma"}, "is_accepted": false, "score": 1, "last_activity_date": 1435223584, "last_edit_date": 1435223584, "creation_date": 1435223245, "answer_id": 31045879, "question_id": 31031205, "link": "https://stackoverflow.com/questions/31031205/ruby-on-rails-delegate-devise-member-on-has-and-belongs-to-many-association/31045879#31045879", "title": "Ruby on Rails - delegate devise member on has_and_belongs_to_many association", "body": "<p>From what I can see there is a many to many mapping between keyword and group. So the groups method would return a collection of groups and not a single record for group. So when you delegate 'member', it is delegated to a collection of groups rather than a group object as you are expecting. </p>\n\n<p>The <code>#&lt;ActiveRecord::Associations::CollectionProxy []</code>> in your error message\nis the groups collection.</p>\n\n<p>If you are looking to collect members of all the groups you may need to do something like: </p>\n\n<pre><code>def members\n  groups.collect { |group| group.member }\nend\n</code></pre>\n"}], "owner": {"reputation": 1824, "user_id": 935394, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/452f4ef4bec908313c9df902632ab7bb?s=128&d=identicon&r=PG", "display_name": "Max Rose-Collins", "link": "https://stackoverflow.com/users/935394/max-rose-collins"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 225, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1435240092, "creation_date": 1435161007, "last_edit_date": 1435240092, "question_id": 31031205, "link": "https://stackoverflow.com/questions/31031205/ruby-on-rails-delegate-devise-member-on-has-and-belongs-to-many-association", "title": "Ruby on Rails - delegate devise member on has_and_belongs_to_many association", "body": "<p>I have a <code>has_and_belongs_to_many</code> association between <code>keywords</code> and <code>groups</code> and then a  <code>groups</code> <code>belongs_to</code> <code>member</code> association  between group and devise.</p>\n\n<pre><code>class Keyword &lt; ActiveRecord::Base\n  has_and_belongs_to_many :groups\n  delegate :member, to: :groups\n  validate :keywords_within_limit, on: :create\n\n  def keywords_within_limit\n    if self.member.keywords(:reload).count &gt;= self.member.keyword_limit\n       errors.add(:keyword, \"exceeded limit\")\n    end\n  end\nend\n</code></pre>\n\n<p>Im trying access my current members methods using <code>delegate</code> but I am getting the error <code>NoMethodError - undefined method member for #&lt;ActiveRecord::Associations::CollectionProxy []&gt;:</code></p>\n\n<p>I can see member is a method by doing <code>self.methods</code></p>\n\n<p>Why can't I access my members methods using <code>delegate</code>?</p>\n"}, {"tags": ["arrays", "ruby", "coding-style", "hashmap", "upsert"], "answers": [{"tags": [], "owner": {"reputation": 191, "user_id": 4987274, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/eaaee67835027c503d4634fbec58c9e3?s=128&d=identicon&r=PG", "display_name": "user4987274", "link": "https://stackoverflow.com/users/4987274/user4987274"}, "is_accepted": true, "score": 7, "last_activity_date": 1435159906, "creation_date": 1435159906, "answer_id": 31030812, "question_id": 31030675, "link": "https://stackoverflow.com/questions/31030675/ruby-more-idiomatic-way-of-upserting-an-array-value-in-a-hash/31030812#31030812", "title": "Ruby: more idiomatic way of &quot;upserting&quot; an array value in a hash", "body": "<p>Hashes in ruby can be constructed with a codeblock that is executed when an element is first accessed. The idiomatic way in ruby to rewrite your code would be:</p>\n\n<pre><code>people = Hash.new { |hash, key| hash[key] = [] }\n\npeople[name] &lt;&lt; item\n</code></pre>\n"}], "owner": {"reputation": 17385, "user_id": 160406, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/hVRes.jpg?s=128&g=1", "display_name": "Ollie Glass", "link": "https://stackoverflow.com/users/160406/ollie-glass"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 331, "favorite_count": 0, "accepted_answer_id": 31030812, "answer_count": 1, "score": 2, "last_activity_date": 1435159906, "creation_date": 1435159512, "question_id": 31030675, "link": "https://stackoverflow.com/questions/31030675/ruby-more-idiomatic-way-of-upserting-an-array-value-in-a-hash", "title": "Ruby: more idiomatic way of &quot;upserting&quot; an array value in a hash", "body": "<p>I have a hash of people, where each person holds an array of values.</p>\n\n<p>If a person doesn't exist in the hash, I want to create a new array with a value, and add it to the hash. If they do exist, I want to find the corresponding array and add the item to it.</p>\n\n<p>This code seems a bit long-winded for such a simple operation (an upsert, basically). Is there a more idiomatic way of writing this?</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>people = {}\n\nperson_values = people.fetch(name, [])\nperson_values &lt;&lt; item\npeople[name] = person_values\n</code></pre>\n"}, {"tags": ["ruby", "http", "http-headers"], "comments": [{"owner": {"reputation": 12542, "user_id": 156746, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/8TsPx.jpg?s=128&g=1", "display_name": "DiegoSalazar", "link": "https://stackoverflow.com/users/156746/diegosalazar"}, "edited": false, "score": 0, "creation_date": 1435164843, "post_id": 31030547, "comment_id": 50089485, "body": "What&#39;s your server&#39;s response? Server logs?"}, {"owner": {"reputation": 23, "user_id": 5045090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ea92fff3966d9a670ff898f12284b90?s=128&d=identicon&r=PG&f=1", "display_name": "Jason Bain", "link": "https://stackoverflow.com/users/5045090/jason-bain"}, "reply_to_user": {"reputation": 12542, "user_id": 156746, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/8TsPx.jpg?s=128&g=1", "display_name": "DiegoSalazar", "link": "https://stackoverflow.com/users/156746/diegosalazar"}, "edited": false, "score": 0, "creation_date": 1435175948, "post_id": 31030547, "comment_id": 50096036, "body": "@diego.greyrobot let me check.  We have a lot of the REST servers behind our load balancer"}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 5045090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ea92fff3966d9a670ff898f12284b90?s=128&d=identicon&r=PG&f=1", "display_name": "Jason Bain", "link": "https://stackoverflow.com/users/5045090/jason-bain"}, "edited": false, "score": 0, "creation_date": 1435175624, "post_id": 31032953, "comment_id": 50095818, "body": "Ruby blow up with the following error: /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/l&zwnj;&#8203;ib/ruby/2.0.0/net/pr&zwnj;&#8203;otocol.rb:153:in `read_nonblock&#39;: Connection reset by peer (Errno::ECONNRESET)"}, {"owner": {"reputation": 2094, "user_id": 237129, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ff94ffd9e21dd379044ea0317634b97b?s=128&d=identicon&r=PG", "display_name": "jtzero", "link": "https://stackoverflow.com/users/237129/jtzero"}, "reply_to_user": {"reputation": 23, "user_id": 5045090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ea92fff3966d9a670ff898f12284b90?s=128&d=identicon&r=PG&f=1", "display_name": "Jason Bain", "link": "https://stackoverflow.com/users/5045090/jason-bain"}, "edited": false, "score": 0, "creation_date": 1435289025, "post_id": 31032953, "comment_id": 50148744, "body": "That one line is not really enough to determine what&#39;s wrong but to venture a guess I would say authentication. Without more info on how the API handles authentication I can&#39;t answer it. <a href=\"http://stackoverflow.com/questions/319530/restful-authentication\">example types</a>"}], "tags": [], "owner": {"reputation": 2094, "user_id": 237129, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ff94ffd9e21dd379044ea0317634b97b?s=128&d=identicon&r=PG", "display_name": "jtzero", "link": "https://stackoverflow.com/users/237129/jtzero"}, "is_accepted": false, "score": 0, "last_activity_date": 1435288317, "last_edit_date": 1435288317, "creation_date": 1435166134, "answer_id": 31032953, "question_id": 31030547, "link": "https://stackoverflow.com/questions/31030547/ruby-nethttp-delete-method-with-uri-params-and-form-data/31032953#31032953", "title": "Ruby Net::HTTP delete method with uri params and form data", "body": "<p>The Parameters have to be sent in the Body, as implied by <code>application/x-www-form-urlencoded</code>. In your cURL example you would have to add the <code>-d</code> flag </p>\n\n<pre><code>curl -X DELETE -d \"a=myaccount&amp;p=someprofile\" \"https://my.domain.com/rest/removeProfile\"\n\nreq = Net::HTTP::Delete.new(\"/rest/removeProfile\")\nreq.body = \"a=myaccount&amp;p=someprofile\"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 146, "user_id": 3683297, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/82283478bb02a85cd0d5b0c0204461d1?s=128&d=identicon&r=PG&f=1", "display_name": "user3683297", "link": "https://stackoverflow.com/users/3683297/user3683297"}, "is_accepted": true, "score": 0, "last_activity_date": 1490787061, "creation_date": 1490787061, "answer_id": 43092280, "question_id": 31030547, "link": "https://stackoverflow.com/questions/31030547/ruby-nethttp-delete-method-with-uri-params-and-form-data/43092280#43092280", "title": "Ruby Net::HTTP delete method with uri params and form data", "body": "<p>To pass arguments in url of delete call, you can do the following:</p>\n\n<pre><code>    uri = URI.parse('http://localhost/test')\n    http = Net::HTTP.new(uri.host, uri.port)\n    attribute_url = '?'\n    attribute_url &lt;&lt; body.map{|k,v| \"#{k}=#{v}\"}.join('&amp;')\n    request = Net::HTTP::Delete.new(uri.request_uri+attribute_url)\n    response = http.request(request)\n</code></pre>\n\n<p>where body is a hashmap of your parameters:\n  in your example: <code>{:a=&gt; 'myaccount' :p=&gt;'someprofile'}</code></p>\n"}], "owner": {"reputation": 23, "user_id": 5045090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ea92fff3966d9a670ff898f12284b90?s=128&d=identicon&r=PG&f=1", "display_name": "Jason Bain", "link": "https://stackoverflow.com/users/5045090/jason-bain"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1117, "favorite_count": 0, "accepted_answer_id": 43092280, "answer_count": 2, "score": 2, "last_activity_date": 1490787061, "creation_date": 1435159217, "last_edit_date": 1435175704, "question_id": 31030547, "link": "https://stackoverflow.com/questions/31030547/ruby-nethttp-delete-method-with-uri-params-and-form-data", "title": "Ruby Net::HTTP delete method with uri params and form data", "body": "<p>So I can successfully get a session token with my REST api like so:</p>\n\n<pre><code>uri = URI.parse(\"#{@restapi}/users/login/cloud\")\nresponse = Net::HTTP.post_form(uri, {\"username\" =&gt; \"jason\", \"password\" =&gt; \"password123\"})\n</code></pre>\n\n<p>It returns the following JSON:</p>\n\n<pre><code>{ \"username\" : \"jason\" , \"token\" : \"1234sometoken567890\" , \"account\" : \"myaccount\" , \"profile\" : \"main\"}\n</code></pre>\n\n<p>I need to use the token with my form data to call this function as stated in the APIs WADL:</p>\n\n<pre><code>&lt;resource path=\"/removeProfile\"&gt;\n  &lt;method id=\"removeProfile\" name=\"DELETE\"&gt;\n    &lt;request&gt;\n      &lt;representation mediaType=\"application/x-www-form-urlencoded\"&gt;\n        &lt;param xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" name=\"a\" style=\"query\" type=\"xs:string\"/&gt;\n        &lt;param xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" name=\"p\" style=\"query\" type=\"xs:string\"/&gt;\n      &lt;/representation&gt;\n    &lt;/request&gt;\n    &lt;response&gt;\n      &lt;representation mediaType=\"application/json\"/&gt;\n    &lt;/response&gt;\n  &lt;/method&gt;\n&lt;/resource&gt;\n</code></pre>\n\n<p>This tells me that I need to do the following in my REST call:</p>\n\n<pre><code>1) Request Method:DELETE\n2) Form Data a= and p=\n3) append the token to the url\n</code></pre>\n\n<p>In the browser it looks like:\n<a href=\"https://my.domain.com/rest/removeProfile?token=1234sometoken567890\" rel=\"nofollow\">https://my.domain.com/rest/removeProfile?token=1234sometoken567890</a></p>\n\n<p>with Form Data:</p>\n\n<pre><code>a=myaccount&amp;p=someprofile\n</code></pre>\n\n<p>I tried this in Ruby:</p>\n\n<pre><code>uri = URI.parse(\"#{@rest}/removeProfile\")\n# get the token with the connection code\nuri.query = URI.encode_www_form(utk: \"#{@token}\")\nhttp = Net::HTTP.new(uri.host, uri.port)\nhttp.set_form_data({\"a\" =&gt; \"#{@account}\", \"p\" =&gt; \"#{@profile}\"})\nrequest = Net::HTTP::Delete.new(uri.path)\nresponse = http.request(request)\n</code></pre>\n\n<p>Trying to mimic curl doing this (which doesn't work by the way):</p>\n\n<pre><code>curl -i -X DELETE \"https://my.domain.com/rest/removeProfile?utk=1234sometoken567890&amp;a=myaccount&amp;p=someprofile\"\n</code></pre>\n\n<p>What is the proper way to send a http DELETE method with Query String Parameters and form data?</p>\n\n<p>NOTE:</p>\n\n<p>Here is my current code:</p>\n\n<pre><code>  def remove_profile(account, profile)\n\n    @account = account\n    @profile = profile\n\n    uri = URI.parse(\"#{@rest}/removeProfile\")\n    http = Net::HTTP.new(uri.host, uri.port)\n    puts 'uri.path = ' + uri.path\n    request = Net::HTTP::Delete.new(uri.path)\n    request.body = \"utk=#{@utk}&amp;a=#{@account}&amp;p=#{@profile}\"\n    puts 'request.body = ' + request.body\n    response = http.request(request)\n\n  end\n</code></pre>\n\n<p>Ruby blows up with a stack trace like so:</p>\n\n<pre><code>/System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/net/protocol.rb:153:in `read_nonblock': Connection reset by peer (Errno::ECONNRESET)\n</code></pre>\n\n<p>Any idea what I am doing wrong here?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 9795, "user_id": 1566187, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/00cb2ecc49f0f05736dc7c14bbccfeaa?s=128&d=identicon&r=PG", "display_name": "Ely", "link": "https://stackoverflow.com/users/1566187/ely"}, "edited": false, "score": 0, "creation_date": 1435159330, "post_id": 31030546, "comment_id": 50085693, "body": "Try not to use float. Use BigDecimal (to_d)."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1435159521, "post_id": 31030546, "comment_id": 50085837, "body": "Empty string <code>.to_f</code> is zero, not <code>nil</code>.<code>&#39;&#39;.to_f == 0</code>, not <code>nil</code>."}], "answers": [{"comments": [{"owner": {"reputation": 2139, "user_id": 413016, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/abd1546dde5e3d988b23b9898ddd874a?s=128&d=identicon&r=PG", "display_name": "ThG", "link": "https://stackoverflow.com/users/413016/thg"}, "edited": false, "score": 0, "creation_date": 1435161959, "post_id": 31031028, "comment_id": 50087613, "body": "Thank you very much for your answer."}], "tags": [], "owner": {"reputation": 464, "user_id": 3597524, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/93146aea7d2a3644cf11e4a2e51ff2e1?s=128&d=identicon&r=PG&f=1", "display_name": "Mourad", "link": "https://stackoverflow.com/users/3597524/mourad"}, "is_accepted": true, "score": 1, "last_activity_date": 1435160482, "creation_date": 1435160482, "answer_id": 31031028, "question_id": 31030546, "link": "https://stackoverflow.com/questions/31030546/ruby-case-statement-for-a-very-simple-solver/31031028#31031028", "title": "Ruby case statement for a very simple solver", "body": "<p>You should not use <code>nil</code>. Just replace <code>nil</code> with <code>0</code>.</p>\n\n<p>here what you should do and it will work for you:</p>\n\n<pre><code>puts \"What is your Revenue ?\"\ninputRevenue = gets\nputs \"What are your Costs ?\"\ninputCosts = gets\nputs \"What is your Profit percentage ?\"\ninputProfitpercentage = gets\n\nrevenue = inputRevenue.to_f\ncosts = inputCosts.to_f\nprofitpercentage = inputProfitpercentage.to_f\n\ncase\n       when (revenue == 0) then \n       puts \"Your Revenue is : #{costs * (1 + profitpercentage)}\"       \n       when (costs == 0) then\n       puts \"Your Costs are : #{revenue / (1 + profitpercentage)}\"\n       else (profitpercentage == 0)\n       puts \"Your Profit percentage is : #{(revenue / costs) - 1}\"\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2139, "user_id": 413016, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/abd1546dde5e3d988b23b9898ddd874a?s=128&d=identicon&r=PG", "display_name": "ThG", "link": "https://stackoverflow.com/users/413016/thg"}, "edited": false, "score": 0, "creation_date": 1435161878, "post_id": 31031036, "comment_id": 50087546, "body": "First, thanks. It works, of course. Nevertheless I accepted @Mourad&#39;s answer... because I understand it, for the simple reason it is very close to my own attempt. My knowledge in Ruby does not allow me to grasp - yet - the full meaning of your solution. Thanks again, anyway."}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 1, "last_activity_date": 1435160503, "creation_date": 1435160503, "answer_id": 31031036, "question_id": 31030546, "link": "https://stackoverflow.com/questions/31030546/ruby-case-statement-for-a-very-simple-solver/31031036#31031036", "title": "Ruby case statement for a very simple solver", "body": "<pre><code>input = []\nputs \"What is your Revenue ?\"\ninput &lt;&lt; gets.chomp      # get rid of carriage returns\nputs \"What are your Costs ?\"\ninput &lt;&lt; gets.chomp\nputs \"What is your Profit percentage ?\"\ninput &lt;&lt; gets.chomp\n\ninput.map! do |rcp| \n  rcp.strip.empty? ? nil : rcp.to_f\nend\n\ncase\n  when input[0].nil? \n    puts \"Your Revenue is : #{input[1] * (1 + input[2])}\"       \n  when input[1].nil?\n    puts \"Your Costs are : #{input[0] / (1 + input[2])}\"\n  when input[2].nil?\n    puts \"Your Profit percentage is : #{(input[0] / input[1]) - 1}\"\n  else\n    puts \"Oooups. Entered everything.\"\nend\n</code></pre>\n"}], "owner": {"reputation": 2139, "user_id": 413016, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/abd1546dde5e3d988b23b9898ddd874a?s=128&d=identicon&r=PG", "display_name": "ThG", "link": "https://stackoverflow.com/users/413016/thg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 0, "accepted_answer_id": 31031028, "answer_count": 2, "score": 1, "last_activity_date": 1435161357, "creation_date": 1435159215, "last_edit_date": 1435161357, "question_id": 31030546, "link": "https://stackoverflow.com/questions/31030546/ruby-case-statement-for-a-very-simple-solver", "title": "Ruby case statement for a very simple solver", "body": "<p>I tried to write a small program that would calculate the (very) simple equation </p>\n\n<pre><code>Revenue = Costs * (1 + Profitpercentage)\n</code></pre>\n\n<p>e.g., 121 = 110 * (1 + .10), when any one\u2014and only one\u2014of the 3 elements is missing.</p>\n\n<p>I came up with: </p>\n\n<pre><code>puts \"What is your Revenue ?\"\ninputRevenue = gets\nputs \"What are your Costs ?\"\ninputCosts = gets\nputs \"What is your Profit percentage ?\"\ninputProfitpercentage = gets\n\nrevenue = inputRevenue.to_f\ncosts = inputCosts.to_f\nprofitpercentage = inputProfitpercentage.to_f\n\ncase\n       when (revenue == nil) then \n       puts \"Your Revenue is : #{costs * (1 + profitpercentage)}\"       \n       when (costs == nil) then\n       puts \"Your Costs are : #{revenue / (1 + profitpercentage)}\"\n       else (profitpercentage == nil)\n       puts \"Your Profit percentage is : #{(revenue / costs) - 1}\"\nend\n</code></pre>\n\n<p>To designate the element to be calculated, I simply skip the answer (I only type Enter).</p>\n\n<p>It works with <code>Profitpercentage</code> unknown.</p>\n\n<p>With <code>Costs</code> unknown it gives:</p>\n\n<blockquote>\n  <p>Your Profit percentage is : Infinity</p>\n</blockquote>\n\n<p>With <code>Revenue</code> unknown it gives:</p>\n\n<blockquote>\n  <p>Your Profit percentage is : -1.0</p>\n</blockquote>\n\n<p>Where did I go wrong? (furthermore, it is clumsy...)</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4.2"], "answers": [{"comments": [{"owner": {"reputation": 2376, "user_id": 3311657, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9d1d7b5444ea5fbb3b5e0ecb8303a88e?s=128&d=identicon&r=PG", "display_name": "steve klein", "link": "https://stackoverflow.com/users/3311657/steve-klein"}, "edited": false, "score": 1, "creation_date": 1435159835, "post_id": 31030673, "comment_id": 50086096, "body": "as I mentioned in my OP, link_to encodes the ampersand in the query string so this doesn&#39;t change anything (although it is a nicer way to generate the query string)."}, {"owner": {"reputation": 735, "user_id": 3689069, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/7EuEZ.jpg?s=128&g=1", "display_name": "R&#233;mi Delhaye", "link": "https://stackoverflow.com/users/3689069/r%c3%a9mi-delhaye"}, "reply_to_user": {"reputation": 2376, "user_id": 3311657, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9d1d7b5444ea5fbb3b5e0ecb8303a88e?s=128&d=identicon&r=PG", "display_name": "steve klein", "link": "https://stackoverflow.com/users/3311657/steve-klein"}, "edited": false, "score": 0, "creation_date": 1435582631, "post_id": 31030673, "comment_id": 50245879, "body": "Just tried it in my rails console, got it : <code>root_path(foo: CGI.escape(&#39;foo&#39;), bar: CGI.escape(&#39;bar&#39;))</code> and i got a well formated path : <code>&#47;?foo=foo&amp;bar=bar</code> with the ampersand. Can you give me the code you use for your not-working <code>link_to</code> ?"}, {"owner": {"reputation": 2376, "user_id": 3311657, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9d1d7b5444ea5fbb3b5e0ecb8303a88e?s=128&d=identicon&r=PG", "display_name": "steve klein", "link": "https://stackoverflow.com/users/3311657/steve-klein"}, "edited": false, "score": 0, "creation_date": 1435596068, "post_id": 31030673, "comment_id": 50254874, "body": "Sorry @Remi I moved on a few days ago and no longer am working on this."}], "tags": [], "owner": {"reputation": 735, "user_id": 3689069, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/7EuEZ.jpg?s=128&g=1", "display_name": "R&#233;mi Delhaye", "link": "https://stackoverflow.com/users/3689069/r%c3%a9mi-delhaye"}, "is_accepted": false, "score": 0, "last_activity_date": 1435582664, "last_edit_date": 1435582664, "creation_date": 1435159505, "answer_id": 31030673, "question_id": 31030495, "link": "https://stackoverflow.com/questions/31030495/prevent-escaped-ampersand-in-query-string/31030673#31030673", "title": "Prevent escaped ampersand in query string", "body": "<p>Try this</p>\n\n<pre><code>link_to \"Sign up\", my_signup_url(name: CGI.escape(@name), email: CGI.escape(@email))\n</code></pre>\n\n<p>in your mailer.</p>\n\n<p>For more details on link_to use <a href=\"http://api.rubyonrails.org/classes/ActionView/Helpers/UrlHelper.html#method-i-link_to\" rel=\"nofollow\">this</a></p>\n"}], "owner": {"reputation": 2376, "user_id": 3311657, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9d1d7b5444ea5fbb3b5e0ecb8303a88e?s=128&d=identicon&r=PG", "display_name": "steve klein", "link": "https://stackoverflow.com/users/3311657/steve-klein"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 765, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1435582664, "creation_date": 1435159094, "question_id": 31030495, "link": "https://stackoverflow.com/questions/31030495/prevent-escaped-ampersand-in-query-string", "title": "Prevent escaped ampersand in query string", "body": "<p>In my mailer, I am generating a link to my sign up form so that I can include it in the email to the user.  I'd like to prepopulate the sign up form with the user's name and email address.</p>\n\n<p>I create an instance variable @signup_query like so:</p>\n\n<pre><code>@signup_query = \"?name=\" &lt;&lt; \n                CGI.escape(@name) &lt;&lt; \n                \"&amp;\" &lt;&lt; \n                \"email=\" &lt;&lt; \n                CGI.escape(@email)\n</code></pre>\n\n<p>But when I call <code>link_to</code> in my view, Rails encodes the query string, which adds 'amp;' to the '&amp;'.  As a result, my <code>params</code> hash has key 'amp;email' instead of key 'email' so in my sign up view, I have this ugliness:</p>\n\n<pre><code>= f.email_field :email, class: 'form-control', :value =&gt; params['amp;email']\n</code></pre>\n\n<p>This works but I know there must be a better way.</p>\n"}, {"tags": ["ruby", "cucumber", "capybara"], "comments": [{"owner": {"reputation": 727, "user_id": 4024964, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/t0rq7.png?s=128&g=1", "display_name": "Phil", "link": "https://stackoverflow.com/users/4024964/phil"}, "edited": false, "score": 0, "creation_date": 1435267953, "post_id": 31030121, "comment_id": 50142824, "body": "I&#39;ve also asked the same question some time ago <a href=\"http://stackoverflow.com/questions/29286772/difference-between-using-page-find-and-find\">here</a>  ...  I&#39;ve given up using the page variable as my specs look a lot cleaner now.  I still have no idea what the difference is in terms of what it is really used for."}], "answers": [{"tags": [], "owner": {"reputation": 362, "user_id": 2787566, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b9c8f0b4fc470756aa44845c610c7c94?s=128&d=identicon&r=PG&f=1", "display_name": "iskvmk", "link": "https://stackoverflow.com/users/2787566/iskvmk"}, "is_accepted": true, "score": 1, "last_activity_date": 1485432434, "creation_date": 1485432434, "answer_id": 41873119, "question_id": 31030121, "link": "https://stackoverflow.com/questions/31030121/what-is-the-page-variable-in-capybara-tests/41873119#41873119", "title": "What is the page variable in Capybara tests?", "body": "<p>As it is described in source code:</p>\n\n<pre><code># Shortcut to accessing the current session.\n# @return [Capybara::Session] The current session object\n\ndef page\n  Capybara.current_session\nend\n</code></pre>\n\n<p>When you do <code>find('#name')</code> current session's <code>find</code> method is called. So there is no difference between calling <code>page.find('#name')</code> and <code>find('#name')</code>.   <br>\nI guess this shortcut was created just to keep asserts code intuitive and understandable:</p>\n\n<pre><code>expect(page).to have_css(#name)\n</code></pre>\n\n<p>looks better than</p>\n\n<pre><code>expect(Capybara.current_session).to have_css(#name)\n</code></pre>\n"}], "owner": {"reputation": 2463, "user_id": 259477, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/be1f59e4118912d487c5330586f39b72?s=128&d=identicon&r=PG", "display_name": "Daryn", "link": "https://stackoverflow.com/users/259477/daryn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 459, "favorite_count": 0, "accepted_answer_id": 41873119, "answer_count": 1, "score": 1, "last_activity_date": 1485432434, "creation_date": 1435158193, "last_edit_date": 1495535356, "question_id": 31030121, "link": "https://stackoverflow.com/questions/31030121/what-is-the-page-variable-in-capybara-tests", "title": "What is the page variable in Capybara tests?", "body": "<p>When using Capybara, what is the difference between calling <code>page.find('#name')</code> and <code>find('#name')</code>.</p>\n\n<p>Is it that same thing, as this answer states <a href=\"https://stackoverflow.com/questions/30800699/whats-the-meaning-of-page-and-page-body-in-capybara\">What&#39;s the meaning of page and page.body in Capybara</a></p>\n\n<p>I am just looking for more of an explanation and when I would need to use <code>page</code> outside of asserts.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "twitter-bootstrap", "ruby-on-rails-4", "twitter-bootstrap-3"], "answers": [{"tags": [], "owner": {"reputation": 735, "user_id": 3689069, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/7EuEZ.jpg?s=128&g=1", "display_name": "R&#233;mi Delhaye", "link": "https://stackoverflow.com/users/3689069/r%c3%a9mi-delhaye"}, "is_accepted": true, "score": 4, "last_activity_date": 1435158559, "creation_date": 1435158559, "answer_id": 31030265, "question_id": 31029976, "link": "https://stackoverflow.com/questions/31029976/how-do-i-connect-my-rails-search-form-with-the-bootstrap-search-design/31030265#31030265", "title": "How do I connect my Rails search form with the bootstrap search design?", "body": "<p>This should work:</p>\n\n<pre><code>&lt;div class=\"input-group\"&gt;\n  &lt;%= form_tag(posts_path, :method =&gt; \"get\", id: \"search-form\") do %&gt;\n    &lt;%= text_field_tag :search, params[:search], placeholder: \"Search Posts\", class: 'form-control' %&gt;\n    &lt;span class=\"input-group-btn\"&gt;\n      &lt;%= submit_tag \"Search\", class: 'btn btn-default' %&gt;\n    &lt;/span&gt;\n  &lt;% end %&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>Documentation <a href=\"http://api.rubyonrails.org/classes/ActionView/Helpers/FormTagHelper.html#method-i-text_field_tag\" rel=\"nofollow\">here</a> and <a href=\"http://api.rubyonrails.org/classes/ActionView/Helpers/FormTagHelper.html#method-i-submit_tag\" rel=\"nofollow\">here</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 41, "user_id": 2602518, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40978867608e81b4fb066c2e92f45620?s=128&d=identicon&r=PG", "display_name": "Larissa Reis", "link": "https://stackoverflow.com/users/2602518/larissa-reis"}, "is_accepted": false, "score": 1, "last_activity_date": 1435160190, "creation_date": 1435160190, "answer_id": 31030921, "question_id": 31029976, "link": "https://stackoverflow.com/questions/31029976/how-do-i-connect-my-rails-search-form-with-the-bootstrap-search-design/31030921#31030921", "title": "How do I connect my Rails search form with the bootstrap search design?", "body": "<p>You can use the <a href=\"https://github.com/seyhunak/twitter-bootstrap-rails\" rel=\"nofollow\">twitter bootstrap gem</a>, and then this would be enough:</p>\n\n<pre><code>&lt;%= form_tag(posts_path, :method =&gt; \"get\", id: \"search-form\") do %&gt;\n  &lt;%= text_field_tag :search, params[:search], placeholder: \"Search Posts\" %&gt;\n  &lt;%= submit_tag \"Search\", class: 'btn btn-default' %&gt;\n&lt;% end %&gt;\n</code></pre>\n"}], "owner": {"reputation": 55, "user_id": 2647078, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/VHt9d.jpg?s=128&g=1", "display_name": "Alexander Tekle", "link": "https://stackoverflow.com/users/2647078/alexander-tekle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2825, "favorite_count": 0, "accepted_answer_id": 31030265, "answer_count": 2, "score": 3, "last_activity_date": 1435160190, "creation_date": 1435157757, "question_id": 31029976, "link": "https://stackoverflow.com/questions/31029976/how-do-i-connect-my-rails-search-form-with-the-bootstrap-search-design", "title": "How do I connect my Rails search form with the bootstrap search design?", "body": "<p>Here's my search_form I created with Ruby - </p>\n\n<pre><code>        &lt;%= form_tag(posts_path, :method =&gt; \"get\", id: \"search-form\") do %&gt;\n        &lt;%= text_field_tag :search, params[:search], placeholder: \"Search Posts\" %&gt;\n        &lt;%= submit_tag \"Search\" %&gt;\n</code></pre>\n\n<p>I don't like how it's so plain. I want it to look like the design that Bootstrap provide in its templates.</p>\n\n<pre><code>&lt;div class=\"input-group\"&gt;\n  &lt;input type=\"text\" class=\"form-control\" placeholder=\"Search for...\"&gt;\n  &lt;span class=\"input-group-btn\"&gt;\n    &lt;button class=\"btn btn-default\" type=\"button\"&gt;Go!&lt;/button&gt;\n  &lt;/span&gt;\n&lt;/div&gt;&lt;!-- /input-group --&gt;\n</code></pre>\n\n<p>So how do I use the bootstrap search form design, but still let it have proper search capabilities through my database?</p>\n"}, {"tags": ["arrays", "ruby"], "comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1435163230, "post_id": 31029851, "comment_id": 50088481, "body": "Another way, that&#39;s quite efficient though a bit homely: <code>n = [10, 54, 50, 30].min_by { |e| (e &lt; 52) ? 52-e : 61 }; n = nil if n==61 #=&gt; 50</code>."}], "answers": [{"comments": [{"owner": {"reputation": 36449, "user_id": 2453699, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a0b0a49d160baf7d95b81d798ea0cb65?s=128&d=identicon&r=PG", "display_name": "vee", "link": "https://stackoverflow.com/users/2453699/vee"}, "edited": false, "score": 0, "creation_date": 1435157998, "post_id": 31029993, "comment_id": 50084663, "body": "Think showing <code>sort</code> call would add value: <code>[10, 30, 50, 54, 56, 95, 97, 99].sort.reverse.find { |el| el &lt; number }</code>"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1435163370, "post_id": 31029993, "comment_id": 50088565, "body": "Sorting is expensive. In general, if you only want a largest or smallest value, don&#39;t sort."}], "tags": [], "owner": {"reputation": 2314, "user_id": 2882921, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ffb2397ff2a97e133bdaa6cb2b449b7e?s=128&d=identicon&r=PG&f=1", "display_name": "Piotr Kruczek", "link": "https://stackoverflow.com/users/2882921/piotr-kruczek"}, "is_accepted": false, "score": 2, "last_activity_date": 1435158068, "last_edit_date": 1435158068, "creation_date": 1435157837, "answer_id": 31029993, "question_id": 31029851, "link": "https://stackoverflow.com/questions/31029851/filter-an-array-by-number/31029993#31029993", "title": "Filter an array by number?", "body": "<p>I think this can work for a sorted array:</p>\n\n<pre><code>[10, 30, 50, 54, 56, 95, 97, 99].sort.reverse.find { |el| el &lt; number }\n</code></pre>\n\n<p>It simply changes the sorting direction to descending and finds first smaller element</p>\n"}, {"tags": [], "owner": {"reputation": 1118, "user_id": 3243794, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/QxQsp.jpg?s=128&g=1", "display_name": "nesiseka", "link": "https://stackoverflow.com/users/3243794/nesiseka"}, "is_accepted": true, "score": 9, "last_activity_date": 1435158065, "creation_date": 1435158065, "answer_id": 31030074, "question_id": 31029851, "link": "https://stackoverflow.com/questions/31029851/filter-an-array-by-number/31030074#31030074", "title": "Filter an array by number?", "body": "<p>I'd go for something like this (no need for sorting):</p>\n\n<pre><code>[10, 30, 50, 54, 56, 95, 97, 99].select {|n| n &lt; 52}.max\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1435163680, "post_id": 31030090, "comment_id": 50088757, "body": "<code>ary.partition{|n| n &lt; pivot}[0]</code> is the same as <code>ary.select { |n| n &lt; pivot }</code>, which is more direct. What if the array is not sorted? You don&#39;t want to sort to find just one value, so you are led to nesiseka&#39;s solution."}], "tags": [], "owner": {"reputation": 7994, "user_id": 1625339, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b8ba46f911517c8b2ccc39e0be9050c0?s=128&d=identicon&r=PG", "display_name": "Aetherus", "link": "https://stackoverflow.com/users/1625339/aetherus"}, "is_accepted": false, "score": 0, "last_activity_date": 1435200376, "last_edit_date": 1435200376, "creation_date": 1435158091, "answer_id": 31030090, "question_id": 31029851, "link": "https://stackoverflow.com/questions/31029851/filter-an-array-by-number/31030090#31030090", "title": "Filter an array by number?", "body": "<p>Supposing the array is sorted:</p>\n\n<pre><code>ary = [...]\npivot = 52\nary.partition{|n| n &lt; pivot}[0][-1]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4999, "user_id": 4151953, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39d405a824f3f34d13b9e57532532f99?s=128&d=identicon&r=PG&f=1", "display_name": "Alejandro Babio", "link": "https://stackoverflow.com/users/4151953/alejandro-babio"}, "is_accepted": false, "score": 0, "last_activity_date": 1435158197, "creation_date": 1435158197, "answer_id": 31030122, "question_id": 31029851, "link": "https://stackoverflow.com/questions/31029851/filter-an-array-by-number/31030122#31030122", "title": "Filter an array by number?", "body": "<p>You must try <a href=\"http://ruby-doc.org/core-2.2.2/Array.html#method-i-rindex\" rel=\"nofollow\">rindex</a></p>\n\n<pre><code>ary.sort.rindex {|el| el &lt; number}\n</code></pre>\n\n<p>and that return the first matching element.</p>\n"}, {"tags": [], "owner": {"reputation": 1415, "user_id": 2980254, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0671f8dc70553b21bf135577a96700e2?s=128&d=identicon&r=PG&f=1", "display_name": "O-I", "link": "https://stackoverflow.com/users/2980254/o-i"}, "is_accepted": false, "score": 1, "last_activity_date": 1435158982, "creation_date": 1435158982, "answer_id": 31030442, "question_id": 31029851, "link": "https://stackoverflow.com/questions/31029851/filter-an-array-by-number/31030442#31030442", "title": "Filter an array by number?", "body": "<p>Another way to do it with a sorted array is to use <a href=\"http://ruby-doc.org/core-2.2.2/Array.html#method-i-bsearch\" rel=\"nofollow\"><code>Array#bsearch</code></a> on its reverse:</p>\n\n<pre><code>[10, 30, 50, 54, 56, 95, 97, 99].reverse.bsearch { |n| n &lt; 52 } # =&gt; 50\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1118, "user_id": 3243794, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/QxQsp.jpg?s=128&g=1", "display_name": "nesiseka", "link": "https://stackoverflow.com/users/3243794/nesiseka"}, "edited": false, "score": 0, "creation_date": 1435217665, "post_id": 31030490, "comment_id": 50110503, "body": "The array has to be sorted. You even sort it in your answer!"}, {"owner": {"reputation": 1288, "user_id": 2344804, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JnZ76.jpg?s=128&g=1", "display_name": "d34n5", "link": "https://stackoverflow.com/users/2344804/d34n5"}, "reply_to_user": {"reputation": 1118, "user_id": 3243794, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/QxQsp.jpg?s=128&g=1", "display_name": "nesiseka", "link": "https://stackoverflow.com/users/3243794/nesiseka"}, "edited": false, "score": 0, "creation_date": 1435249466, "post_id": 31030490, "comment_id": 50132768, "body": "yes, it&#39;s what I&#39;m saying. The input array doesn&#39;t have to be sorted, because the line I wrote sort it before returning the lowest value. but I don&#39;t iterate through all of the array because of the detect."}], "tags": [], "owner": {"reputation": 1288, "user_id": 2344804, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JnZ76.jpg?s=128&g=1", "display_name": "d34n5", "link": "https://stackoverflow.com/users/2344804/d34n5"}, "is_accepted": false, "score": 1, "last_activity_date": 1435159077, "creation_date": 1435159077, "answer_id": 31030490, "question_id": 31029851, "link": "https://stackoverflow.com/questions/31029851/filter-an-array-by-number/31030490#31030490", "title": "Filter an array by number?", "body": "<p>Use detect instead of select because select iterate through all your elements. detect returns the first occurrence that matched.</p>\n\n<p>The array doesn't have to be sorted.</p>\n\n<pre><code>[10, 30, 50, 54, 56, 95, 97, 99].sort { |a, b| b &lt;=&gt; a }.detect { |v| v &lt;= 52 }\n</code></pre>\n"}], "owner": {"reputation": 14586, "user_id": 222151, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/fbbe2adedf4308c5978d92fa1a8dbbff?s=128&d=identicon&r=PG", "display_name": "cjm2671", "link": "https://stackoverflow.com/users/222151/cjm2671"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 86, "favorite_count": 0, "accepted_answer_id": 31030074, "answer_count": 6, "score": 3, "last_activity_date": 1435200376, "creation_date": 1435157448, "last_edit_date": 1435157797, "question_id": 31029851, "link": "https://stackoverflow.com/questions/31029851/filter-an-array-by-number", "title": "Filter an array by number?", "body": "<p>I've got an array with a list of numbers, e.g.</p>\n\n<pre><code>[10, 30, 50, 54, 56, 95, 97, 99] \n</code></pre>\n\n<p>If I provide a number e.g. 52, it needs to return the next lowest number in the array, in this case that would be 50.</p>\n\n<p><strong>What's the cleanest way to do this?</strong> </p>\n\n<p>Please state if the array must be sorted first.</p>\n"}, {"tags": ["ruby"], "answers": [{"tags": [], "owner": {"reputation": 2314, "user_id": 2882921, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ffb2397ff2a97e133bdaa6cb2b449b7e?s=128&d=identicon&r=PG&f=1", "display_name": "Piotr Kruczek", "link": "https://stackoverflow.com/users/2882921/piotr-kruczek"}, "is_accepted": false, "score": 0, "last_activity_date": 1435158362, "last_edit_date": 1435158362, "creation_date": 1435157523, "answer_id": 31029887, "question_id": 31029834, "link": "https://stackoverflow.com/questions/31029834/ruby-string-interpolation-and-dynamic-programming/31029887#31029887", "title": "ruby string interpolation and dynamic programming", "body": "<p>Yes, you need to use <code>send</code> or a form of <code>eval</code> to \"change\" a string to a variable. Right now it just checks is the string is <code>present?</code> </p>\n\n<p>Example: <code>loa_item.send(effective_on_attribute).present?</code></p>\n"}, {"comments": [{"owner": {"reputation": 109029, "user_id": 2767755, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/BkC8q.jpg?s=128&g=1", "display_name": "Arup Rakshit", "link": "https://stackoverflow.com/users/2767755/arup-rakshit"}, "edited": false, "score": 0, "creation_date": 1435157640, "post_id": 31029899, "comment_id": 50084398, "body": "I like your <i>Yo!</i> looks.. :)"}], "tags": [], "owner": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "is_accepted": true, "score": 0, "last_activity_date": 1435157554, "creation_date": 1435157554, "answer_id": 31029899, "question_id": 31029834, "link": "https://stackoverflow.com/questions/31029834/ruby-string-interpolation-and-dynamic-programming/31029899#31029899", "title": "ruby string interpolation and dynamic programming", "body": "<p>Yes, it'll need to be different&ndash;you're calling <code>present?</code> on a string that has a value: <code>\"loa_item.interpolated_value\"</code> where <code>interpolated_value</code> is the string representation of <code>effective_on_attribute</code>'s evaluation. </p>\n\n<p>It can't <em>not</em> be <code>present?</code> because there's an immediate, non-interpolated value.</p>\n\n<p>You'd want something closer to:</p>\n\n<pre><code>loa_item.send(effective_on_attribute.to_sym) etc.\n</code></pre>\n"}], "owner": {"reputation": 1849, "user_id": 3437721, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/3e6fac72d7b35f2177b6f56eab43db28?s=128&d=identicon&r=PG&f=1", "display_name": "user3437721", "link": "https://stackoverflow.com/users/3437721/user3437721"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 120, "favorite_count": 0, "accepted_answer_id": 31029899, "answer_count": 2, "score": 0, "last_activity_date": 1435158362, "creation_date": 1435157412, "question_id": 31029834, "link": "https://stackoverflow.com/questions/31029834/ruby-string-interpolation-and-dynamic-programming", "title": "ruby string interpolation and dynamic programming", "body": "<p>So I'm trying to be smart and make a generic method which can create the variable names and use them correctly.  I am passing into 2 symbols into this method, and creating the correct variables and trying to use them.</p>\n\n<pre><code> def are_numeric_fields_valid (column_name)\n    single_name = column_name[0].to_s\n    aggregate_name = column_name[1].to_s\n    short_column_attribute = single_name.sub(\"_single\", \"\")\n\n    effective_on_attribute = :\"#{short_column_attribute}_effective_on\"\n    expire_on_attribute = :\"#{short_column_attribute}_expire_on\"\n\n      if (\"loa_item.#{effective_on_attribute}\".present? &amp;&amp; \"loa_item.#{expire_on_attribute}\".present?) &amp;&amp; (no_values_present?(single_name, aggregate_name))\n            loa_item.errors.add(:base, \"You must provide single and aggregate values when providing dates at the #{short_column_attribute} role level\")\n          end\n\nend\n</code></pre>\n\n<p>But this always is true, even when the actual values are blank:</p>\n\n<pre><code>if (\"loa_item.#{effective_on_attribute}\".present? &amp;&amp; \"loa_item.#{expire_on_attribute}\".present?)\n</code></pre>\n\n<p>Do I need something else so this will evaluate correctly?  Like a send?</p>\n"}, {"tags": ["ruby", "unit-testing", "minitest", "testunit"], "answers": [{"tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": true, "score": 0, "last_activity_date": 1435156642, "creation_date": 1435156642, "answer_id": 31029562, "question_id": 31029366, "link": "https://stackoverflow.com/questions/31029366/load-error-in-file-when-running-with-minitest/31029562#31029562", "title": "Load Error in file when running with minitest", "body": "<p>Whether you want to use a relative path during <code>require</code>, use:</p>\n\n<pre><code>require_relative 'FileB'\n</code></pre>\n\n<p>Hope it helps.</p>\n"}], "owner": {"reputation": 17, "user_id": 404062, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e169de8813b4ad149288172bebcc2ce?s=128&d=identicon&r=PG", "display_name": "QPSK", "link": "https://stackoverflow.com/users/404062/qpsk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 333, "favorite_count": 0, "accepted_answer_id": 31029562, "answer_count": 1, "score": 0, "last_activity_date": 1435156642, "creation_date": 1435156122, "question_id": 31029366, "link": "https://stackoverflow.com/questions/31029366/load-error-in-file-when-running-with-minitest", "title": "Load Error in file when running with minitest", "body": "<p>I'm somewhat new to Ruby so I apologize if this is a stupid question.  I've searched pretty hard, and can't really find anything that works.</p>\n\n<p>My issue, I am trying to unit test a framework i'm writing that is located in the lib directory of a rails project.  I'm using the minitest unit testing framework (executing via a rake task) in my unit test i have a require that is referencing \"File A\".  That loads fine.  However \"File A\" has a require to \"File B\"</p>\n\n<p>like this:\n    require './FileB'</p>\n\n<p>when that runs from minitest I get the cannot load such file error</p>\n\n<p>this is how my rake task looks\n    require 'rake/testtask'</p>\n\n<pre><code>Rake::TestTask.new do |t|\n  t.libs = [\"lib\", \"test\"]\n  t.name = \"test:file_a_tests\"\n  t.warning = true\n  t.test_files = FileList['test/file_a_test.rb']\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 9878, "user_id": 3315785, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/YsMo6.jpg?s=128&g=1", "display_name": "j-dexx", "link": "https://stackoverflow.com/users/3315785/j-dexx"}, "edited": false, "score": 2, "creation_date": 1435155949, "post_id": 31029245, "comment_id": 50083116, "body": "Can you post more code?  What is self in this situation?  What is <code>black_list</code>?  How did you get whatever is in the black_list variable?"}, {"owner": {"reputation": 10255, "user_id": 1155142, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/c680db41999d478ca34d1a77a470e30d?s=128&d=identicon&r=PG", "display_name": "gabrielhilal", "link": "https://stackoverflow.com/users/1155142/gabrielhilal"}, "edited": false, "score": 0, "creation_date": 1435155965, "post_id": 31029245, "comment_id": 50083135, "body": "what is <code>self.profile_type</code> and <code>black_list</code>?"}, {"owner": {"reputation": 30655, "user_id": 138557, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/73c04e9ef9ca435c5b19a2e765ae6d20?s=128&d=identicon&r=PG", "display_name": "Max Williams", "link": "https://stackoverflow.com/users/138557/max-williams"}, "edited": false, "score": 0, "creation_date": 1435156173, "post_id": 31029245, "comment_id": 50083314, "body": "This will generate a single SQL query.  However, you may be calling this line of code multiple times.  I think you need to add some more context."}, {"owner": {"reputation": 3138, "user_id": 1448966, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/aNPnb.jpg?s=128&g=1", "display_name": "A Fader Darkly", "link": "https://stackoverflow.com/users/1448966/a-fader-darkly"}, "edited": false, "score": 0, "creation_date": 1435156250, "post_id": 31029245, "comment_id": 50083375, "body": "You may be looking at the wrong code. There are a number of gems which tell you exactly where in the code your query is coming from. For example: <a href=\"https://github.com/ruckus/active-record-query-trace\" rel=\"nofollow noreferrer\">github.com/ruckus/active-record-query-trace</a>"}, {"owner": {"reputation": 3138, "user_id": 1448966, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/aNPnb.jpg?s=128&g=1", "display_name": "A Fader Darkly", "link": "https://stackoverflow.com/users/1448966/a-fader-darkly"}, "edited": false, "score": 0, "creation_date": 1435156405, "post_id": 31029245, "comment_id": 50083510, "body": "Look for loops in your code. Also look for use of the results of such queries which find associated objects. For example, if you assigned the above to <code>results</code> then look for things like <code>user.permission.role</code> or <code>user.permissions.all do ...</code>"}], "answers": [{"tags": [], "owner": {"reputation": 5800, "user_id": 4287733, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/835e993afb1e20c1981dd6b8b59ded2d?s=128&d=identicon&r=PG", "display_name": "Nermin", "link": "https://stackoverflow.com/users/4287733/nermin"}, "is_accepted": false, "score": 0, "last_activity_date": 1435156151, "creation_date": 1435156151, "answer_id": 31029373, "question_id": 31029245, "link": "https://stackoverflow.com/questions/31029245/avoiding-n1-with-where-query-active-record/31029373#31029373", "title": "Avoiding n+1 with where query active record", "body": "<pre><code>User.where(profile_type: self.profile_type).where.not(id: black_list)\n</code></pre>\n\n<p>Is only 1 query, even if you have multiple <code>where</code> clauses, <code>rails</code> is smart to make from it 1 <code>sql</code> query.</p>\n\n<p>If you had</p>\n\n<pre><code>users = User.where(profile_type: self.profile_type)\nusers.each do |u|\n   u.get_all_comments\nend\n</code></pre>\n\n<p>This is n+1 query, because you ask for all <code>users</code>, then for each <code>user</code> you make new request for its <code>comments</code>, this is N (queries for comments) and 1 query for all users</p>\n"}], "owner": {"reputation": 4039, "user_id": 2954587, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/9faba4c8f1437084ee1b2b976eeadaa3?s=128&d=identicon&r=PG&f=1", "display_name": "user2954587", "link": "https://stackoverflow.com/users/2954587/user2954587"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 56, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1435156455, "creation_date": 1435155848, "last_edit_date": 1435156455, "question_id": 31029245, "link": "https://stackoverflow.com/questions/31029245/avoiding-n1-with-where-query-active-record", "title": "Avoiding n+1 with where query active record", "body": "<p>I'm looking at my server log and there's a lot of <code>SELECT</code> statements from a particular query. I'm aware of <a href=\"http://guides.rubyonrails.org/active_record_querying.html\" rel=\"nofollow\">n+1</a> issues and this seems to be one. However I'm not sure what the solution would be for this query. Is this a single query or multiple for every user that is returned (I believe <code>WHERE</code> is a single query)?</p>\n\n<pre><code>User.where(profile_type: self.profile_type).where.not(id: black_list)\n</code></pre>\n\n<p>EDIT: </p>\n\n<p><code>user.rb</code></p>\n\n<pre><code>  def suggested_friends\n    black_list = self.friendships.map(&amp;:friend_id)\n    black_list.push(self.id)\n    return User.where(profile_type: self.profile_type).where.not(id: black_list)\n  end\n</code></pre>\n\n<p><code>index.json.jbuilder</code></p>\n\n<pre><code>json.suggested_friends @user.suggested_friends do |friend|\n  json.set! :user_id, friend.id\n  json.(friend.profile, *friend.profile.attributes.keys)\nend\n</code></pre>\n\n<p>the issue was leaving out the <code>includes(:profile)</code>. Using the following query solved my problem</p>\n\n<pre><code>User.where(profile_type: self.profile_type).where.not(id: black_list).includes(:profile)\n</code></pre>\n\n<p>thank you for the comments to point me in the right direction</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "testing", "integration-testing"], "comments": [{"owner": {"reputation": 9878, "user_id": 3315785, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/YsMo6.jpg?s=128&g=1", "display_name": "j-dexx", "link": "https://stackoverflow.com/users/3315785/j-dexx"}, "edited": false, "score": 0, "creation_date": 1435155683, "post_id": 31029117, "comment_id": 50082881, "body": "Shouldn&#39;t the <code>before_action</code> be <code>@organisation = @admin.organisation</code> based on what you&#39;ve explained?"}, {"owner": {"reputation": 2754, "user_id": 4499505, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/2d1e61c81e3933b4ff09de01b9ff81d4?s=128&d=identicon&r=PG&f=1", "display_name": "Nick", "link": "https://stackoverflow.com/users/4499505/nick"}, "reply_to_user": {"reputation": 9878, "user_id": 3315785, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/YsMo6.jpg?s=128&g=1", "display_name": "j-dexx", "link": "https://stackoverflow.com/users/3315785/j-dexx"}, "edited": false, "score": 0, "creation_date": 1435156076, "post_id": 31029117, "comment_id": 50083245, "body": "It&#39;s just one line from the <code>before_action</code>. @admin in a variable in the test file, while the before_action exists in the controller."}], "answers": [{"comments": [{"owner": {"reputation": 2754, "user_id": 4499505, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/2d1e61c81e3933b4ff09de01b9ff81d4?s=128&d=identicon&r=PG&f=1", "display_name": "Nick", "link": "https://stackoverflow.com/users/4499505/nick"}, "edited": false, "score": 0, "creation_date": 1435155906, "post_id": 31029183, "comment_id": 50083073, "body": "Yes, this worked. Included the organization in the <code>setup</code> of the test and passed the id."}, {"owner": {"reputation": 2314, "user_id": 2882921, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ffb2397ff2a97e133bdaa6cb2b449b7e?s=128&d=identicon&r=PG&f=1", "display_name": "Piotr Kruczek", "link": "https://stackoverflow.com/users/2882921/piotr-kruczek"}, "reply_to_user": {"reputation": 2754, "user_id": 4499505, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/2d1e61c81e3933b4ff09de01b9ff81d4?s=128&d=identicon&r=PG&f=1", "display_name": "Nick", "link": "https://stackoverflow.com/users/4499505/nick"}, "edited": false, "score": 0, "creation_date": 1435155936, "post_id": 31029183, "comment_id": 50083107, "body": "Glad I helped then :)"}], "tags": [], "owner": {"reputation": 2314, "user_id": 2882921, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ffb2397ff2a97e133bdaa6cb2b449b7e?s=128&d=identicon&r=PG&f=1", "display_name": "Piotr Kruczek", "link": "https://stackoverflow.com/users/2882921/piotr-kruczek"}, "is_accepted": true, "score": 2, "last_activity_date": 1435155653, "creation_date": 1435155653, "answer_id": 31029183, "question_id": 31029117, "link": "https://stackoverflow.com/questions/31029117/is-this-possible-in-controller-test/31029183#31029183", "title": "Is this possible in controller test?", "body": "<p>You expect to have <code>params[:id]</code>, and you don't pass it. Try</p>\n\n<pre><code>test \"should get new\" do\n  log_in_as(\"user\", @admin)\n  get :new, id: 1 # or any other\n  assert_response :success\nend\n</code></pre>\n\n<p>You either need to change your <code>before_action</code> filter or update your tests.</p>\n"}, {"tags": [], "owner": {"reputation": 156, "user_id": 3445608, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de4239680f98b8f92272d3f9828d602c?s=128&d=identicon&r=PG&f=1", "display_name": "jerrytao", "link": "https://stackoverflow.com/users/3445608/jerrytao"}, "is_accepted": false, "score": 0, "last_activity_date": 1435156051, "last_edit_date": 1435156051, "creation_date": 1435155738, "answer_id": 31029205, "question_id": 31029117, "link": "https://stackoverflow.com/questions/31029117/is-this-possible-in-controller-test/31029205#31029205", "title": "Is this possible in controller test?", "body": "<p>As the information you showed, i think the problem is you should limit the before action.\nFor example \n<code>before_action :set_organization, except:[:index,:new]</code> or use only\n<code>before_action :set_organization, only:[:show,:edit,:update,:destroy]</code>.</p>\n\n<p>If you want set organization for all actions, then you should provide the id params.</p>\n\n<p>eg:</p>\n\n<pre><code>  before_action :set_organization\n\n  def set_organization\n     @organization = Organization.friendly.find(params[:organization_id])\n  end\n\n\n  get :new,organization_id: 1\n</code></pre>\n"}], "owner": {"reputation": 2754, "user_id": 4499505, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/2d1e61c81e3933b4ff09de01b9ff81d4?s=128&d=identicon&r=PG&f=1", "display_name": "Nick", "link": "https://stackoverflow.com/users/4499505/nick"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 28, "favorite_count": 0, "accepted_answer_id": 31029183, "answer_count": 2, "score": 0, "last_activity_date": 1435156051, "creation_date": 1435155469, "question_id": 31029117, "link": "https://stackoverflow.com/questions/31029117/is-this-possible-in-controller-test", "title": "Is this possible in controller test?", "body": "<p>In my user controller I have a before_action for the new page/method. This before_action includes:</p>\n\n<pre><code>@organization = Organization.friendly.find(params[:id])\n</code></pre>\n\n<p>In my user fixtures I have an <code>organization: one</code> for user @admin, and in my organizations fixtures I have a record for this organization \"one\". Still my controller test fails on the above line with the message:</p>\n\n<blockquote>\n  <p>ActiveRecord::RecordNotFound: Couldn't find Organization without an ID</p>\n</blockquote>\n\n<p>Why is this? Is it not possible to do this in a controller test and should I use an integration test instead? If I can use a controller test (which I here prefer), what is wrong with my code?</p>\n\n<hr>\n\n<p>The controller test:</p>\n\n<pre><code>  test \"should get new\" do\n    log_in_as(\"user\", @admin) # Test helper that functions properly\n    get :new                  # It fails here on the before_action defined in the users controller.\n    assert_response :success\n  end\n</code></pre>\n"}, {"tags": ["html", "ruby", "watir"], "answers": [{"tags": [], "owner": {"reputation": 13, "user_id": 5020368, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh6.googleusercontent.com/-aOfswo5Kh0c/AAAAAAAAAAI/AAAAAAAAASU/JetYxEEybBY/photo.jpg?sz=128", "display_name": "Lorraine Botros", "link": "https://stackoverflow.com/users/5020368/lorraine-botros"}, "is_accepted": false, "score": 0, "last_activity_date": 1435158661, "creation_date": 1435158661, "answer_id": 31030301, "question_id": 31028907, "link": "https://stackoverflow.com/questions/31028907/trying-to-select-a-list-item-with-watir/31030301#31030301", "title": "Trying to select a list item with Watir", "body": "<p>I was able to come up with a solution. If anyone has another that is more elegant please post. Thanks.</p>\n\n<pre><code>@b.link(:id =&gt; \"addQuality\").click\n@b.div(:class =&gt; \"col-md-12\").ul.li(:text =&gt; \"Publication\").click\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 5020368, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh6.googleusercontent.com/-aOfswo5Kh0c/AAAAAAAAAAI/AAAAAAAAASU/JetYxEEybBY/photo.jpg?sz=128", "display_name": "Lorraine Botros", "link": "https://stackoverflow.com/users/5020368/lorraine-botros"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 286, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1435158661, "creation_date": 1435154967, "question_id": 31028907, "link": "https://stackoverflow.com/questions/31028907/trying-to-select-a-list-item-with-watir", "title": "Trying to select a list item with Watir", "body": "<p>I am unable to select a list element when I click on the link I get the list to appear which should make the style display block visible however watir cannot find the element and times out. </p>\n\n<p>Here is a sample of the code just showing one list item but they are all the same. The unique aspect would be the text. \"Machine Translation\"</p>\n\n<pre><code>&lt;a id=\"addQuality\" data-toggle=\"tooltip\" data-placement=\"top\" title=\"\" data-original-title=\"Add New Output Quality\"&gt;\n&lt;ul id=\"addQualityList\" class=\"dropdown-menu\" style=\"display: none;\"&gt;\n&lt;li id=\"3d3c4316-b8ad-45bf-b8be-03ee69452deb\" class=\"dropdown-menu-list addQualityTabItem add-quality-dropdown\" data-url=\"/Client/AddContractTranslationQuality?id=255b9627-5452-4b6a-af46-084af684ff27&amp;qualityId=3d3c4316-b8ad-45bf-b8be-03ee69452deb&amp;prefix=Contracts[43c13738-abc4-42e1-89b1-7211d581e4be]\"&gt;Machine Translation&lt;/li&gt;\n\n\n@b.link(:id =&gt; \"addQuality\").click # This will display the list\n@b.select_list(:id =&gt; \"addQualityList\").option(:text =&gt;   \"Presentation\").when_present.select\n</code></pre>\n\n<p>and I tried...</p>\n\n<pre><code>@b.select_list(:id =&gt; \"addQualityList\").when_present(2).click\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 30655, "user_id": 138557, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/73c04e9ef9ca435c5b19a2e765ae6d20?s=128&d=identicon&r=PG", "display_name": "Max Williams", "link": "https://stackoverflow.com/users/138557/max-williams"}, "edited": false, "score": 0, "creation_date": 1435155870, "post_id": 31028855, "comment_id": 50083047, "body": "This isn&#39;t the answer to your question, but when i do <code>&#39;Username 15&#39;.gsub(&#47;\\d&#47;, &#39;&#39;)</code> i get <code>&quot;Username &quot;</code>  (note extra space) not <code>&quot;Username&quot;</code>.  Both of these pass your validation regex tho."}, {"owner": {"reputation": 30655, "user_id": 138557, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/73c04e9ef9ca435c5b19a2e765ae6d20?s=128&d=identicon&r=PG", "display_name": "Max Williams", "link": "https://stackoverflow.com/users/138557/max-williams"}, "edited": false, "score": 0, "creation_date": 1435155917, "post_id": 31028855, "comment_id": 50083087, "body": "Do you have any other callbacks on User?"}, {"owner": {"reputation": 713, "user_id": 4788075, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/03ac1d3de35f9e5531559aad52bcd72c?s=128&d=identicon&r=PG", "display_name": "Gena  Shumilkin", "link": "https://stackoverflow.com/users/4788075/gena-shumilkin"}, "reply_to_user": {"reputation": 30655, "user_id": 138557, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/73c04e9ef9ca435c5b19a2e765ae6d20?s=128&d=identicon&r=PG", "display_name": "Max Williams", "link": "https://stackoverflow.com/users/138557/max-williams"}, "edited": false, "score": 0, "creation_date": 1435156445, "post_id": 31028855, "comment_id": 50083544, "body": "@MaxWilliams About regex - I invented it especially for question, in real app it&#39;s ok, doesn&#39;t matter.  No, only this callback."}, {"owner": {"reputation": 30655, "user_id": 138557, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/73c04e9ef9ca435c5b19a2e765ae6d20?s=128&d=identicon&r=PG", "display_name": "Max Williams", "link": "https://stackoverflow.com/users/138557/max-williams"}, "edited": false, "score": 0, "creation_date": 1435157710, "post_id": 31028855, "comment_id": 50084458, "body": "When &quot;translating&quot; your actual code into something else for the purposes of the question, there is always the danger that you complicate things by eg accidentally not causing the bug in question.  For example, if i add this validation to my model, then it is saved successfully, ie if i reload it then the  name is <code>&quot;Username&quot;</code>.  If you use the code exactly as it is written in your question do you see the same issue?"}, {"owner": {"reputation": 713, "user_id": 4788075, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/03ac1d3de35f9e5531559aad52bcd72c?s=128&d=identicon&r=PG", "display_name": "Gena  Shumilkin", "link": "https://stackoverflow.com/users/4788075/gena-shumilkin"}, "reply_to_user": {"reputation": 30655, "user_id": 138557, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/73c04e9ef9ca435c5b19a2e765ae6d20?s=128&d=identicon&r=PG", "display_name": "Max Williams", "link": "https://stackoverflow.com/users/138557/max-williams"}, "edited": false, "score": 0, "creation_date": 1435160405, "post_id": 31028855, "comment_id": 50086509, "body": "@MaxWilliams i&#39;m terribly sorry, i just update question: <code>gsub!</code> instead of <code>gsub</code>. In my real app i just changed <code>gsub!</code> to <code>gsub</code> and it resolved my problem. But I dont understand why it doesn&#39;t work with <code>gsub!</code>"}, {"owner": {"reputation": 30655, "user_id": 138557, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/73c04e9ef9ca435c5b19a2e765ae6d20?s=128&d=identicon&r=PG", "display_name": "Max Williams", "link": "https://stackoverflow.com/users/138557/max-williams"}, "edited": false, "score": 0, "creation_date": 1435160892, "post_id": 31028855, "comment_id": 50086874, "body": "if it doesn&#39;t find a match, <code>gsub!</code> will return nil, whereas <code>gsub</code> will just return the unchanged string.  I&#39;m not sure if this is the exact problem, i can&#39;t see why it would cause it and when i try it in my code it still saves the record.  Either way, you shouldn&#39;t set a variable to the result of doing <code>gsub!</code> since it changes the object in place anyway.  Either do <code>self.name = self.name.gsub(&#47;\\d&#47;, &#39;&#39;)</code> OR <code>self.name.gsub!(&#47;\\d&#47;, &#39;&#39;)</code> : these two functions are equivalent. (the last one is neater IMO)"}], "answers": [{"tags": [], "owner": {"reputation": 16076, "user_id": 802618, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6111449042dd940f360673d25d61ea6b?s=128&d=identicon&r=PG", "display_name": "Kristj&#225;n", "link": "https://stackoverflow.com/users/802618/kristj%c3%a1n"}, "is_accepted": true, "score": 1, "last_activity_date": 1435161057, "creation_date": 1435161057, "answer_id": 31031226, "question_id": 31028855, "link": "https://stackoverflow.com/questions/31028855/rails-4-strange-behavior-when-working-with-before-validation-callback/31031226#31031226", "title": "Rails 4. Strange behavior when working with before_validation callback", "body": "<p>The <code>gsub!</code> in <code>delete_digits_from_name</code> changes the name in place, so Rails thinks <code>name</code> is the same thing it loaded from the DB. It's the same object, even though you've changed its value. Rails does this to optimize away DB updates when no data has changed, and in-place editing confuses it.</p>\n\n<p>Switching to <code>self.name = self.name.gsub(/\\d/, '')</code> (no <code>!</code>) assigns a new <code>String</code> that Rails will recognize as dirty and needing saving.</p>\n\n<p>You can also add <code>name_will_change!</code> after your <code>gsub!</code> to tell Rails the attribute needs saving.</p>\n"}], "owner": {"reputation": 713, "user_id": 4788075, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/03ac1d3de35f9e5531559aad52bcd72c?s=128&d=identicon&r=PG", "display_name": "Gena  Shumilkin", "link": "https://stackoverflow.com/users/4788075/gena-shumilkin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 0, "accepted_answer_id": 31031226, "answer_count": 1, "score": 0, "last_activity_date": 1435161057, "creation_date": 1435154797, "last_edit_date": 1435160007, "question_id": 31028855, "link": "https://stackoverflow.com/questions/31028855/rails-4-strange-behavior-when-working-with-before-validation-callback", "title": "Rails 4. Strange behavior when working with before_validation callback", "body": "<p>Suppose there are users records in the database. And we decided to add validation in model. Model:</p>\n\n<pre><code>class User &lt; ActiveRecord::Base\n  validates_format_of :name, with: /\\A[^\\d]*\\z/, allow_blank: true\n\n  before_validation :delete_digits_from_name\n\n  def delete_digits_from_name\n    self.name = name.gsub!(/\\d/, '')\n  end\nend\n</code></pre>\n\n<p>Scenario 1 in console:</p>\n\n<pre><code>User.create(name: 'Username 15')\nUser.last\n=&gt; #&lt;User id: 14154, name: \"Username\"\n</code></pre>\n\n<p>And it's ok. But there are old record (created before adding validation) and.. scenario 2:</p>\n\n<pre><code>user = User.first\n=&gt; #&lt;User id: 1, name: \"Username 15\"\nuser.save\n=&gt; true\nuser\n=&gt; #&lt;User id: 1, name: \"Username\"\nuser.reload\n=&gt; #&lt;User id: 1, name: \"Username 15\"\n</code></pre>\n\n<p>But why?? Why changes not saved?</p>\n"}, {"tags": ["ruby", "gwt", "watir", "page-object-gem"], "comments": [{"owner": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "edited": false, "score": 0, "creation_date": 1435162877, "post_id": 31028735, "comment_id": 50088257, "body": "If you only have one of these controls, a method in the BasePage is not terrible. However, if you use similar controls throughout the application, using the PageObject::Widgets will greatly improve the maintainability of your code. There are a couple of examples online (<a href=\"https://rubygems.org/gems/gwt_widgets/versions/0.0.7\" rel=\"nofollow noreferrer\">gwt_widgets</a> and <a href=\"https://github.com/snowe2010/gwt-widgets\" rel=\"nofollow noreferrer\">gwt-widgets</a>), however neither seems to cover your exact dropdown."}, {"owner": {"reputation": 139, "user_id": 3078381, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/PNcYS.jpg?s=128&g=1", "display_name": "brbrr", "link": "https://stackoverflow.com/users/3078381/brbrr"}, "reply_to_user": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "edited": false, "score": 0, "creation_date": 1435218893, "post_id": 31028735, "comment_id": 50111299, "body": "That&#39;s why I&#39;m looking for a way to implement widget fro this case. Main problem - it&#39;s not clear (from docs or examples) how to redefine location strategy for ::Accessors or add custom logic"}, {"owner": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "edited": false, "score": 0, "creation_date": 1435236724, "post_id": 31028735, "comment_id": 50122757, "body": "What do you mean by &quot;redefine location strategy&quot;? An example of what you have tried and where it is that you are stuck would help."}, {"owner": {"reputation": 139, "user_id": 3078381, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/PNcYS.jpg?s=128&g=1", "display_name": "brbrr", "link": "https://stackoverflow.com/users/3078381/brbrr"}, "reply_to_user": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "edited": false, "score": 0, "creation_date": 1436365559, "post_id": 31028735, "comment_id": 50581833, "body": "@JustinKo I&#39;ve just updated description. these are methods which I would like to get. I&#39;m not sure that will work, as select tag is hidden. so to select it actually need to interact with button&gt;ul tags. any advices will be helpful"}, {"owner": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "edited": false, "score": 0, "creation_date": 1436372842, "post_id": 31028735, "comment_id": 50587302, "body": "The starting point should be figuring out how to relate the elements of the same control together. Do you have a page where 2 of these types of select lists exist - for example is there a page that shows both the gender and nationality select lists? If there is, can you share the HTML?"}, {"owner": {"reputation": 139, "user_id": 3078381, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/PNcYS.jpg?s=128&g=1", "display_name": "brbrr", "link": "https://stackoverflow.com/users/3078381/brbrr"}, "reply_to_user": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "edited": false, "score": 0, "creation_date": 1436440236, "post_id": 31028735, "comment_id": 50618921, "body": "@JustinKo Here you can find html of these select lists: <a href=\"http://pastebin.com/t7p9qC5Z\" rel=\"nofollow noreferrer\">pastebin.com/t7p9qC5Z</a> And here is screenshot how it should look like: <a href=\"http://take.ms/h3V44\" rel=\"nofollow noreferrer\">take.ms/h3V44</a>"}], "answers": [{"tags": [], "owner": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "is_accepted": true, "score": 1, "last_activity_date": 1436459460, "creation_date": 1436459460, "answer_id": 31323297, "question_id": 31028735, "link": "https://stackoverflow.com/questions/31028735/how-to-define-custom-locating-strategy-for-select/31323297#31323297", "title": "How to define custom locating strategy for select", "body": "<p>The select list appears to have the most identify attributes, therefore I would use it as the base element of the widget. All of the other elements, ie the button and list items, would need to be located with respect to the select list. In this case, they all share the same <code>div.form-group</code> ancestor.</p>\n\n<p>The widget could be defined as:</p>\n\n<pre><code>class BoolList &lt; PageObject::Elements::SelectList\n  def select(value)\n    dropdown_toggle_element.click\n    option = span_element(xpath: \"./..//span[.='#{value}']\")\n    option.when_visible\n    option.click\n  end\n\n  def dropdown_toggle_element\n    button_element(xpath: './../div/button')\n  end\n\n  def self.accessor_methods(widget, name)\n    widget.send('define_method', \"#{name}_btn_element\") do\n      self.send(\"#{name}_element\").dropdown_toggle_element\n    end\n\n    widget.send('define_method', \"#{name}?\") do\n      self.send(\"#{name}_btn_element\").exists?\n    end\n\n    widget.send('define_method', name) do\n      self.send(\"#{name}_element\").value\n    end\n\n    widget.send('define_method', \"#{name}=\") do |value|\n      self.send(\"#{name}_element\").select(value)\n    end\n\n    widget.send('define_method', \"#{name}_options\") do\n      # Since the element is not displayed, we need to check the inner HTML\n      element = self.send(\"#{name}_element\")\n      (element &amp;&amp; element.options) ? element.options.map { |o| o.element.inner_html } : []\n    end\n  end\nend\nPageObject.register_widget :bool_list, BoolList, :select\n</code></pre>\n\n<p>Notice that all locators are in relation to the select list. As well, notice that we use the <code>accessor_methods</code> to add the extra methods to the page object.</p>\n\n<p>The page object would then use the <code>bool_list</code> accessor method. Note that the identifier is for locating the select element, which we said would be the base element of the widget.</p>\n\n<pre><code>class MyPage\n  include PageObject\n\n  bool_list(:gender, title: 'Gender')\n  bool_list(:nationality, title: 'Nationality')\nend\n</code></pre>\n\n<p>The page will now be able to call the following methods:</p>\n\n<pre><code>page.gender_btn_element.click\npage.gender_btn_element.exists?\npage.gender\npage.gender = 'Female'\npage.gender_options\n\npage.nationality_btn_element.click\npage.nationality_btn_element.exists?\npage.nationality\npage.nationality = 'Barbados'\npage.nationality_options\n</code></pre>\n"}], "owner": {"reputation": 139, "user_id": 3078381, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/PNcYS.jpg?s=128&g=1", "display_name": "brbrr", "link": "https://stackoverflow.com/users/3078381/brbrr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 149, "favorite_count": 0, "accepted_answer_id": 31323297, "answer_count": 1, "score": 0, "last_activity_date": 1436459460, "creation_date": 1435154542, "last_edit_date": 1436365244, "question_id": 31028735, "link": "https://stackoverflow.com/questions/31028735/how-to-define-custom-locating-strategy-for-select", "title": "How to define custom locating strategy for select", "body": "<p>I looking for a proper way to redefine/extend locating strategy for select tag in Gwt app. \nFrom html snippet you can see that <code>select</code> tag is not visible.\nSo to select option from list I need to click on <code>button</code> tag, and than select needed <code>li</code> tag from dropdown.  </p>\n\n<pre><code>&lt;div class=\"form-group\"&gt;\n  &lt;select class=\"bootstrap-select form-control\" style=\"display: none; locator='gender\"&gt;\n    &lt;div class=\"btn-group\"&gt;\n    &lt;button class=\"dropdown-toggle\" type=\"button\" title=\"Male\"&gt;\n      &lt;div class=\"dropdown-menu open\"&gt;\n        &lt;ul class=\"dropdown-menu inner selectpicker\" role=\"menu\"&gt;\n          &lt;li data-original-index=\"1\"&gt; (contains a&gt;span with option text)\n            .....more options\n      &lt;/ul&gt;\n    &lt;/div&gt;\n  &lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>I see dirty solution: to implement method in BasePage class. This approach nice page_object sugar(options,get value, etc):</p>\n\n<pre><code>def set_nationality(country, nationality='Nationality')\n  select = button_element(xpath: \"//button[@title='#{nationality}']\")\n  select.click\n  option = span_element(xpath: \"//span[.='#{country}']\")\n  option.when_visible\n  option.click\nend\n</code></pre>\n\n<p>Is there any other more clear way to do so? Using `PageObject::Widgets maybe?</p>\n\n<p>UPD: Here what I expect to get:</p>\n\n<pre><code>def bool_list(name, identifier={:index =&gt; 0}, &amp;block)\n  define_method(\"#{name}_btn_element\") do\n    platform.send('button_for', identifier.clone + \"//button\")\n  end\n  define_method(\"#{name}?\") do\n    platform.send('button_for', identifier.clone + \"//button\").exists?\n  end\n  define_method(name) do\n    return platform.select_list_value_for identifier.clone + '/select' unless block_given?\n    self.send(\"#{name}_element\").value\n  end\n  define_method(\"#{name}=\") do |value|\n    return platform.select_list_value_set(identifier.clone + '/select', value) unless block_given?\n    self.send(\"#{name}_element\").select(value)\n  end\n  define_method(\"#{name}_options\") do\n    element = self.send(\"#{name}_element\")\n    (element &amp;&amp; element.options) ? element.options.collect(&amp;:text) : []\n  end\nend \n</code></pre>\n"}, {"tags": ["html", "ruby-on-rails", "ruby", "haml", "erb"], "comments": [{"owner": {"reputation": 2420, "user_id": 410342, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af5f0b031000821a8c179733db0a2f9e?s=128&d=identicon&r=PG", "display_name": "Shotgun Ninja", "link": "https://stackoverflow.com/users/410342/shotgun-ninja"}, "edited": false, "score": 0, "creation_date": 1435154590, "post_id": 31028534, "comment_id": 50081998, "body": "What errors are you getting?"}], "answers": [{"comments": [{"owner": {"reputation": 73, "user_id": 922081, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/54ab33d21cff512a557f266494d0c7c2?s=128&d=identicon&r=PG", "display_name": "raybesiga", "link": "https://stackoverflow.com/users/922081/raybesiga"}, "edited": false, "score": 0, "creation_date": 1435307266, "post_id": 31028731, "comment_id": 50156271, "body": "Thanks @piotr-kruczek Just starting out with Ruby and Rails after ages. I realize I may have been complacent but I will make sure not to ask any more questions on here. Thanks again."}], "tags": [], "owner": {"reputation": 2314, "user_id": 2882921, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ffb2397ff2a97e133bdaa6cb2b449b7e?s=128&d=identicon&r=PG&f=1", "display_name": "Piotr Kruczek", "link": "https://stackoverflow.com/users/2882921/piotr-kruczek"}, "is_accepted": true, "score": 1, "last_activity_date": 1435154535, "creation_date": 1435154535, "answer_id": 31028731, "question_id": 31028534, "link": "https://stackoverflow.com/questions/31028534/how-do-i-convert-this-haml-code-to-erb/31028731#31028731", "title": "How do I convert this haml code to erb?", "body": "<p>First google search for converter: <a href=\"https://haml2erb.org/\" rel=\"nofollow\">https://haml2erb.org/</a></p>\n\n<p>Converting returns error:</p>\n\n<pre><code>(line 1, column 37):\nunexpected \"?\"\nexpecting space, \"(\" or \"[\"\n</code></pre>\n\n<p>Meaning he doesn't understand <code>?</code> in that context. First guess is to change first line to:</p>\n\n<pre><code>%header.main{:class =&gt; (@full_header ? 'full' : 'basic')}\n</code></pre>\n\n<p>Ohmygoditworks.</p>\n\n<p>Try to put a little effort into something before posting it here</p>\n"}], "owner": {"reputation": 73, "user_id": 922081, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/54ab33d21cff512a557f266494d0c7c2?s=128&d=identicon&r=PG", "display_name": "raybesiga", "link": "https://stackoverflow.com/users/922081/raybesiga"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 216, "favorite_count": 0, "accepted_answer_id": 31028731, "answer_count": 1, "score": -4, "last_activity_date": 1435159950, "creation_date": 1435153982, "last_edit_date": 1435159950, "question_id": 31028534, "link": "https://stackoverflow.com/questions/31028534/how-do-i-convert-this-haml-code-to-erb", "title": "How do I convert this haml code to erb?", "body": "<p>Need to convert this HAML code to ERB. Getting errors when I use the HamltoErb converter. Any help will be appreciated. </p>\n\n<pre><code>%header.main{:class =&gt; @full_header ? 'full' : 'basic'}\n  .inner\n    / Primary navigation\n    %nav.main\n      %ul\n        %li= link_to \"Home\", root_path, :nav_item =&gt; :home\n        %li\n          = link_to \"Our catalogue\", catalogue_path, :nav_item =&gt; :catalogue, :class =&gt; 'noborder'\n          %ul\n            - for category in Shoppe::ProductCategory.ordered\n              %li= link_to category.name, products_path(category.permalink)\n        %li= link_to \"Why shop with us?\", page_path(:why), :nav_item =&gt; :why\n        %li= link_to \"FAQs\", page_path(:faqs), :nav_item =&gt; :faqs\n        %li= link_to \"Get in touch\", page_path(:contact), :nav_item =&gt; :contact\n      %h1= link_to Shoppe.settings.store_name, root_path\n\n    - if @full_header\n      %h2 Welcome to our &lt;em&gt;shoppe&lt;/em&gt;.\n      %p.intro Check out our lovely products on this page and then you can buy them through the website with just a few clicks using our supremely simple ordering system.\n\n  - if @full_header\n    .bar\n      .inner\n        %p.call Call us today on &lt;b&gt;01202 901 101&lt;/b&gt; if you have any questions.\n        %p.offer &lt;b&gt;This week only!&lt;/b&gt; FREE next day shipping on all orders over &amp;pound;30.\n</code></pre>\n"}, {"tags": ["ruby", "zip", "rake", "rake-task", "rakefile"], "answers": [{"comments": [{"owner": {"reputation": 2125, "user_id": 1529156, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/106451904fd9ff13f9fb21a0d474098e?s=128&d=identicon&r=PG", "display_name": "David Watts", "link": "https://stackoverflow.com/users/1529156/david-watts"}, "edited": false, "score": 0, "creation_date": 1435154903, "post_id": 31028818, "comment_id": 50082239, "body": "changing from exec to task seems to complete, but there is no zip file in the output. Looks like I have a new issue. Made the string interpolation changes too, and I much prefer them! Thankyou!"}], "tags": [], "owner": {"reputation": 7179, "user_id": 222163, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/ldCVf.jpg?s=128&g=1", "display_name": "Paul D&#39;Ambra", "link": "https://stackoverflow.com/users/222163/paul-dambra"}, "is_accepted": false, "score": 1, "last_activity_date": 1435157219, "last_edit_date": 1435157219, "creation_date": 1435154719, "answer_id": 31028818, "question_id": 31028230, "link": "https://stackoverflow.com/questions/31028230/create-a-zip-file-using-rakepackagetask/31028818#31028818", "title": "Create a zip file using Rake::PackageTask", "body": "<p>the <code>exec</code> task tells rake to run things at the command line / shell. Not to run a task.</p>\n\n<p>you probably want to:</p>\n\n<pre><code>task :package_zip do\n    create_zip_file DEPLOY_DIRECTORY, 'ProjectName'\nend\n</code></pre>\n\n<p>also all of your variable <em>should</em> be snake case. it's not a big deal though just more easily readable Ruby.</p>\n\n<p>and you really want to look into string interpolation which will make your life easy </p>\n\n<p>so for example</p>\n\n<pre><code>puts \"target: #{target_directory}\"\nputs \"Zipping #{project_to_zip}\"\nsemver_contents = get_contents_of('SEMVER')\nzipFileName = \"ProjectName.#{semver_contents}\"\n</code></pre>\n\n<p>(code sample provided without running it so beware!)</p>\n\n<hr>\n\n<p>Ah, also, looking at the <a href=\"http://ruby-doc.org/stdlib-2.0.0/libdoc/rake/rdoc/Rake/PackageTask.html\" rel=\"nofollow\">docs for PackageTask</a></p>\n\n<p>Your code that runs <code>Rake::PackageTask.new</code> only creates other tasks - it doesn't actually run them!</p>\n\n<p>This <a href=\"http://naildrivin5.com/blog/2008/09/17/getting-rakes-packagetask-to-depend-on-generated-files.html\" rel=\"nofollow\">article</a> shows an example of usage</p>\n\n<pre><code>    # Have to keep a reference to the PackageTask object\npackage_task = Rake::PackageTask.new(\"gliffy-php-client\",GLIFFY_VERSION) do |p|\n    p.need_tar = true\n    p.need_zip = true\n    # Executed BEFORE any other tasks; DOC_FILES don't exist  yet\n    p.package_files = SRC_FILES + EXAMPLE_FILES\nend\n\nfile package_task.package_dir_path =&gt; DOC_DIR\n\nfile DOC_DIR =&gt; SRC_FILES + EXAMPLE_FILES do |t|\n    system(\"phpdoc #{PHP_DOC_ARGS}\");\n    doc_files = FileList.new(DOC_DIR + \"/**/**\");\n    # Have to add these files to the package_task file list\n    package_task.package_files = package_task.package_files + doc_files\nend\n</code></pre>\n\n<p>However, if you look at <a href=\"https://www.omniref.com/ruby/gems/rake/10.3.2/files/lib/rake/packagetask.rb\" rel=\"nofollow\">the source of the task</a> it ultimately just calls into the shell with a filelist and the zip command. If you know that zip is on the path on whatever machine will be running your task (or where it is installed) you might be better simply running something like:</p>\n\n<pre><code>task :make_zip do\n  semver_contents = get_contents_of('SEMVER')\n  zipFileName = \"ProjectName.#{semver_contents}\"\n  targetDir = \"../#{projectToZip}/bin/#{BUILD_CONFIG}/**\"\n `zip -r #{zipFileName} #{targetDir}`\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2125, "user_id": 1529156, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/106451904fd9ff13f9fb21a0d474098e?s=128&d=identicon&r=PG", "display_name": "David Watts", "link": "https://stackoverflow.com/users/1529156/david-watts"}, "is_accepted": true, "score": 2, "last_activity_date": 1435161332, "creation_date": 1435161332, "answer_id": 31031327, "question_id": 31028230, "link": "https://stackoverflow.com/questions/31028230/create-a-zip-file-using-rakepackagetask/31031327#31031327", "title": "Create a zip file using Rake::PackageTask", "body": "<p>After talking with a few people around the office, trying lots of different things relating to Pauls answer, I finally found a solution, and that was to not use the package task at all. Instead, we used rubyzip. </p>\n\n<p>Here is what we ended up with </p>\n\n<pre><code>def create_zip_file(targetDirectory, projectToZip)\n    semver_contents = get_contents_of('SEMVER')\n    zipFileName = \"#{targetDirectory}/#{projectToZip}.#{semver_contents}.zip\"\n    filesToZip =  FileList[\"../#{projectToZip}/bin/#{BUILD_CONFIG}/**\"]   \n    Zip::File.open(zipFileName, Zip::File::CREATE) do |zipFile|\n        filesToZip.each do |filename|\n            zipFile.add(filename, filename)\n        end\n    end     \nend\n</code></pre>\n"}], "owner": {"reputation": 2125, "user_id": 1529156, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/106451904fd9ff13f9fb21a0d474098e?s=128&d=identicon&r=PG", "display_name": "David Watts", "link": "https://stackoverflow.com/users/1529156/david-watts"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1202, "favorite_count": 0, "accepted_answer_id": 31031327, "answer_count": 2, "score": 2, "last_activity_date": 1435161332, "creation_date": 1435153189, "last_edit_date": 1435153801, "question_id": 31028230, "link": "https://stackoverflow.com/questions/31028230/create-a-zip-file-using-rakepackagetask", "title": "Create a zip file using Rake::PackageTask", "body": "<p>I am trying to package up a zip file in my rake file and I am pretty inexperienced with Rake and ruby, so I am having a hard time identifying why this is failing. </p>\n\n<p>This is what I have tried: </p>\n\n<pre><code>def create_zip_file(targetDirectory, projectToZip)\n    puts \"target:\" + targetDirectory\n    puts \"Zipping \" + projectToZip\n    semver_contents = get_contents_of('SEMVER')\n    zipFileName = 'ProjectName.' + semver_contents\n    puts zipFileName\n    files_to_include = \"../\"+ projectToZip + \"/bin/\" + BUILD_CONFIG + \"/**\"\n    puts \"Including the following files: \" + files_to_include\n    Rake::PackageTask.new(zipFileName, semver_contents) do |p|\n        p.need_zip = true\n        p.package_files.include(files_to_include)\n    end\nend\n</code></pre>\n\n<p>My task invocation looks like this: </p>\n\n<pre><code>exec(:package_zip) {create_zip_file DEPLOY_DIRECTORY, 'ProjectName'} \n</code></pre>\n\n<p>And I am calling it like so:</p>\n\n<pre><code>bundle exec rake package_zip\n</code></pre>\n\n<p>Now, the command window that I am running this from lists the contents of all of the put statements I have in the script, so I assume that the failure is occurring internally to the PackageTask task. </p>\n\n<p>The error output in the console looks like this: </p>\n\n<pre><code>Exec failed, see the build log for more details.\nC:/tools/ruby200/lib/ruby/gems/2.0.0/gems/albacore-1.0.0/lib/albacore/support/failure.rb:12:in `fail_with_message'\nC:/tools/ruby200/lib/ruby/gems/2.0.0/gems/albacore-1.0.0/lib/albacore/exec.rb:18:in `execute'\nC:/tools/ruby200/lib/ruby/gems/2.0.0/gems/albacore-1.0.0/lib/albacore/support/createtask.rb:24:in `block in exec'\nC:/tools/ruby200/lib/ruby/gems/2.0.0/gems/rake-10.4.2/lib/rake/task.rb:240:in `call'\nC:/tools/ruby200/lib/ruby/gems/2.0.0/gems/rake-10.4.2/lib/rake/task.rb:240:in `block in execute'\nC:/tools/ruby200/lib/ruby/gems/2.0.0/gems/rake-10.4.2/lib/rake/task.rb:235:in `each'\nC:/tools/ruby200/lib/ruby/gems/2.0.0/gems/rake-10.4.2/lib/rake/task.rb:235:in `execute'\nC:/tools/ruby200/lib/ruby/gems/2.0.0/gems/rake-10.4.2/lib/rake/task.rb:179:in `block in invoke_with_call_chain'\nC:/tools/ruby200/lib/ruby/2.0.0/monitor.rb:211:in `mon_synchronize'\nC:/tools/ruby200/lib/ruby/gems/2.0.0/gems/rake-10.4.2/lib/rake/task.rb:172:in `invoke_with_call_chain'\nC:/tools/ruby200/lib/ruby/gems/2.0.0/gems/rake-10.4.2/lib/rake/task.rb:201:in `block in invoke_prerequisites'\nC:/tools/ruby200/lib/ruby/gems/2.0.0/gems/rake-10.4.2/lib/rake/task.rb:199:in `each'\nC:/tools/ruby200/lib/ruby/gems/2.0.0/gems/rake-10.4.2/lib/rake/task.rb:199:in `invoke_prerequisites'\nC:/tools/ruby200/lib/ruby/gems/2.0.0/gems/rake-10.4.2/lib/rake/task.rb:178:in `block in invoke_with_call_chain'\nC:/tools/ruby200/lib/ruby/2.0.0/monitor.rb:211:in `mon_synchronize'\nC:/tools/ruby200/lib/ruby/gems/2.0.0/gems/rake-10.4.2/lib/rake/task.rb:172:in `invoke_with_call_chain'\nC:/tools/ruby200/lib/ruby/gems/2.0.0/gems/rake-10.4.2/lib/rake/task.rb:165:in `invoke'\nC:/tools/ruby200/lib/ruby/gems/2.0.0/gems/rake-10.4.2/lib/rake/application.rb:150:in `invoke_task'\nC:/tools/ruby200/lib/ruby/gems/2.0.0/gems/rake-10.4.2/lib/rake/application.rb:106:in `block (2 levels) in top_level'\nC:/tools/ruby200/lib/ruby/gems/2.0.0/gems/rake-10.4.2/lib/rake/application.rb:106:in `each'\nC:/tools/ruby200/lib/ruby/gems/2.0.0/gems/rake-10.4.2/lib/rake/application.rb:106:in `block in top_level'\nC:/tools/ruby200/lib/ruby/gems/2.0.0/gems/rake-10.4.2/lib/rake/application.rb:115:in `run_with_threads'\nC:/tools/ruby200/lib/ruby/gems/2.0.0/gems/rake-10.4.2/lib/rake/application.rb:100:in `top_level'\nC:/tools/ruby200/lib/ruby/gems/2.0.0/gems/rake-10.4.2/lib/rake/application.rb:78:in `block in run'\nC:/tools/ruby200/lib/ruby/gems/2.0.0/gems/rake-10.4.2/lib/rake/application.rb:176:in `standard_exception_handling'\nC:/tools/ruby200/lib/ruby/gems/2.0.0/gems/rake-10.4.2/lib/rake/application.rb:75:in `run'\nC:/tools/ruby200/lib/ruby/gems/2.0.0/gems/rake-10.4.2/bin/rake:33:in `&lt;top (required)&gt;'\nC:/tools/ruby200/bin/rake:23:in `load'\nC:/tools/ruby200/bin/rake:23:in `&lt;main&gt;'\nTasks: TOP =&gt; package =&gt; package_zip\n</code></pre>\n\n<p>The likelyhood is I have missed something pretty obvious or done something stupid, just having a hard time catching it.</p>\n"}, {"tags": ["ruby", "haml", "middleman"], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 5846788, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/98b698d47526f827586a7f3946607ef4?s=128&d=identicon&r=PG", "display_name": "skoji", "link": "https://stackoverflow.com/users/5846788/skoji"}, "is_accepted": false, "score": 1, "last_activity_date": 1453901094, "last_edit_date": 1453901094, "creation_date": 1453898828, "answer_id": 35037821, "question_id": 31027868, "link": "https://stackoverflow.com/questions/31027868/middleman-check-if-page-exists/35037821#35037821", "title": "Middleman check if page exists", "body": "<p>The argument of <code>sitemap.find_resource_by_path</code> is a <strong>resource</strong> path, not destination url path. So you must do something like this :</p>\n\n<pre><code>resource_path = current_resource.path.split('/')[1..-1].join('/')\nsr_resource_path = sitemap.find_resource_by_path \"sr/#{resource_path}\"\nif sr_resource_path\n  return sr_resource_path.destination_path\nend\n</code></pre>\n"}], "owner": {"reputation": 7782, "user_id": 82660, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/26500d78e0b6cd27df08e87dde13dafe?s=128&d=identicon&r=PG", "display_name": "majkinetor", "link": "https://stackoverflow.com/users/82660/majkinetor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 210, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1453901094, "creation_date": 1435152297, "last_edit_date": 1435155847, "question_id": 31027868, "link": "https://stackoverflow.com/questions/31027868/middleman-check-if-page-exists", "title": "Middleman check if page exists", "body": "<p>I have a language menu such as this (it switches the current page to another language):</p>\n\n<pre><code>- path = current_page.path.split('/')[1..-1].join('/')\n%ul{ role: 'langmenu'}\n  -if I18n.locale != :en\n    %li\n      =link_to 'English', \"/en/#{path}\"\n  -if I18n.locale != :sr\n    %li\n      =link_to 'Serbian', \"/sr/#{path}\"\n</code></pre>\n\n<p>I want to show the link to the locale only if the destination page actually exists since not all pages will have translation. I tried with <code>sitemap.find_resource_by_path(\"/sr/#{path}\")</code> but it always returns false even when it exists. What am I missing ?</p>\n"}, {"tags": ["ruby"], "answers": [{"comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1435153016, "post_id": 31027894, "comment_id": 50080769, "body": "excellent answer but I am much more interested in how you inserted those down arrows as this seems like it would be extremely useful in the future"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1435153426, "post_id": 31027894, "comment_id": 50081093, "body": "@engineersmnky I use my own keyboard mapping. Whether you are on Linux, it\u2019s quite easy. MacOS/Win suck as usual."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1435153706, "post_id": 31027894, "comment_id": 50081294, "body": "Microsoft has a free program called the Microsoft Keyboard Layout Creator, which is actually quite good and easy to use."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1435154241, "post_id": 31027894, "comment_id": 50081703, "body": "@J&#246;rgWMittag Ah, they did it finally? It sounds like past another decade we could expect them to ship with Windows 25 a ready-to-use console out of the box."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1435154587, "post_id": 31027894, "comment_id": 50081992, "body": "It was released over a decade ago, actually."}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": true, "score": 2, "last_activity_date": 1435152351, "creation_date": 1435152351, "answer_id": 31027894, "question_id": 31027849, "link": "https://stackoverflow.com/questions/31027849/ruby-gsub-not-working-as-expected/31027894#31027894", "title": "ruby gsub not working as expected", "body": "<p>You have a superfluous double quotes inside your regular expression:</p>\n\n<pre><code>#                \u21d3       \u21d3\nshort_name.gsub(/\"_single\"/, \"\")\n</code></pre>\n\n<p>The correct version is:</p>\n\n<pre><code>short_name.gsub(/_single/, \"\")\n</code></pre>\n\n<p>Or, in case there is simple string removal, regexp itself is superfluous:</p>\n\n<pre><code>short_name.gsub('_single', \"\")\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2314, "user_id": 2882921, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ffb2397ff2a97e133bdaa6cb2b449b7e?s=128&d=identicon&r=PG&f=1", "display_name": "Piotr Kruczek", "link": "https://stackoverflow.com/users/2882921/piotr-kruczek"}, "is_accepted": false, "score": 0, "last_activity_date": 1435152378, "creation_date": 1435152378, "answer_id": 31027903, "question_id": 31027849, "link": "https://stackoverflow.com/questions/31027849/ruby-gsub-not-working-as-expected/31027903#31027903", "title": "ruby gsub not working as expected", "body": "<p>You don't need to use a regex, just write</p>\n\n<pre><code>short_name.gsub('_single', '')\n</code></pre>\n"}], "owner": {"reputation": 1849, "user_id": 3437721, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/3e6fac72d7b35f2177b6f56eab43db28?s=128&d=identicon&r=PG&f=1", "display_name": "user3437721", "link": "https://stackoverflow.com/users/3437721/user3437721"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 170, "favorite_count": 0, "accepted_answer_id": 31027894, "answer_count": 2, "score": 0, "last_activity_date": 1435152378, "creation_date": 1435152266, "question_id": 31027849, "link": "https://stackoverflow.com/questions/31027849/ruby-gsub-not-working-as-expected", "title": "ruby gsub not working as expected", "body": "<p>I am passing in a symbol -  :table_single</p>\n\n<p>I want to remove \"_single\": </p>\n\n<pre><code>short_name = column_name[0].to_s\n    short_column_attribute = short_name.gsub(/\"_single\"/, \"\")\n</code></pre>\n\n<p>But it is still coming in as \"table_single\"?</p>\n\n<p>Any help?</p>\n"}, {"tags": ["ruby", "wxruby", "fxruby"], "answers": [{"tags": [], "owner": {"reputation": 1270, "user_id": 2572999, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/e8b1aa402292ffaaa730adce6b52c1ef?s=128&d=identicon&r=PG", "display_name": "Swaathi Kakarla", "link": "https://stackoverflow.com/users/2572999/swaathi-kakarla"}, "is_accepted": true, "score": 2, "last_activity_date": 1435166540, "creation_date": 1435166540, "answer_id": 31033074, "question_id": 31027746, "link": "https://stackoverflow.com/questions/31027746/using-fxregistry-to-store-persistent-data-in-fxruby/31033074#31033074", "title": "Using FXRegistry to store persistent data in FXRuby", "body": "<p>So, I finally found out why my perfectly looking code didn't work. It all had to do with the proper way I exited my app. I was using the normal \"exit\" command to exit out, and it <strong>clearly</strong> says in the <a href=\"http://www.rubydoc.info/gems/fxruby/Fox/FXRegistry#write-instance_method\" rel=\"nofollow\">FXRegistry</a> documentation that, \"<em>The registry is read when FXApp::init() is called, and written back to the system when FXApp::exit() is called.</em>\"</p>\n\n<p>So for those of us who don't know how to do that, here's how to do that,</p>\n\n<pre><code>getApp().exit(0)\n</code></pre>\n\n<p>An example at <a href=\"http://www.fxruby.org/examples/imageviewer.rb\" rel=\"nofollow\">fxruby.org</a> actually uses FXRegistry to store app data.</p>\n"}], "owner": {"reputation": 1270, "user_id": 2572999, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/e8b1aa402292ffaaa730adce6b52c1ef?s=128&d=identicon&r=PG", "display_name": "Swaathi Kakarla", "link": "https://stackoverflow.com/users/2572999/swaathi-kakarla"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 33, "favorite_count": 1, "accepted_answer_id": 31033074, "answer_count": 1, "score": 1, "last_activity_date": 1435166540, "creation_date": 1435151980, "question_id": 31027746, "link": "https://stackoverflow.com/questions/31027746/using-fxregistry-to-store-persistent-data-in-fxruby", "title": "Using FXRegistry to store persistent data in FXRuby", "body": "<p>I'm using FXRegistry to store the username and password, so that I can authenticate with my web service. When a user logs in, the username and password get written to the FXRegistry, and everything <em>seems</em> great. But when I exit out of the application and run it again, it doesn't seem to be able to ready from FXRegistry. I'm not sure what I'm doing wrong. </p>\n\n<p>Here's the code,</p>\n\n<pre><code>regis = FXRegistry.new(APP_KEY, VENDOR_KEY)\nregis.writeStringEntry(\"USER_CACHE\", \"username\", usrTextField.text)\nregis.writeStringEntry(\"USER_CACHE\", \"password\", pwdTextField.text)\n</code></pre>\n\n<p>And here's how I read from it,</p>\n\n<pre><code>regis.readStringEntry(\"USER_CACHE\", \"username\")\nregis.readStringEntry(\"USER_CACHE\", \"password\")\n</code></pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 1982, "user_id": 1957674, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/b9fa3c9e811e22d933f19f24e8a6797d?s=128&d=identicon&r=PG", "display_name": "BinaryMee", "link": "https://stackoverflow.com/users/1957674/binarymee"}, "edited": false, "score": 1, "creation_date": 1435151635, "post_id": 31027478, "comment_id": 50079688, "body": "Go through  this question <a href=\"http://stackoverflow.com/questions/512466/how-to-implement-an-abstract-class-in-ruby\" title=\"how to implement an abstract class in ruby\">stackoverflow.com/questions/512466/&hellip;</a>"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 2, "creation_date": 1435163270, "post_id": 31027478, "comment_id": 50088503, "body": "Abstract base classes with strict enforcement like this do go against the usual Ruby style. If you really, really need to be a jerk about people instantiating your class: <code>def initialize; raise &quot;Nope&quot;; end</code> then let subclasses redefine that."}, {"owner": {"reputation": 11741, "user_id": 1934428, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/072774c5d4204a1c2385560e6114a887?s=128&d=identicon&r=PG", "display_name": "user1934428", "link": "https://stackoverflow.com/users/1934428/user1934428"}, "edited": false, "score": 0, "creation_date": 1435308575, "post_id": 31027478, "comment_id": 50157019, "body": "I don&#39;t think this answers my question. Or is it possible, that Ruby&#39;s integer class raises &quot;NoMethodError: undefined method `new&#39;&quot;? If this were the case, I think the stack trace would show &#39;initialize&#39; as the source of the exception, wouldn&#39;t it?"}, {"owner": {"reputation": 11741, "user_id": 1934428, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/072774c5d4204a1c2385560e6114a887?s=128&d=identicon&r=PG", "display_name": "user1934428", "link": "https://stackoverflow.com/users/1934428/user1934428"}, "reply_to_user": {"reputation": 1982, "user_id": 1957674, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/b9fa3c9e811e22d933f19f24e8a6797d?s=128&d=identicon&r=PG", "display_name": "BinaryMee", "link": "https://stackoverflow.com/users/1957674/binarymee"}, "edited": false, "score": 0, "creation_date": 1435308671, "post_id": 31027478, "comment_id": 50157070, "body": "@BinaryMee: This would also not explain the wording of the exception I got."}], "answers": [{"comments": [{"owner": {"reputation": 4127, "user_id": 4231385, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d89a541a4609cafea3957e4cdfcca50f?s=128&d=identicon&r=PG&f=1", "display_name": "cremno", "link": "https://stackoverflow.com/users/4231385/cremno"}, "edited": false, "score": 1, "creation_date": 1435153832, "post_id": 31027731, "comment_id": 50081399, "body": "There&#39;s also the <code>undef</code> keyword."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 2, "creation_date": 1435163193, "post_id": 31027731, "comment_id": 50088452, "body": "Don&#39;t forget this will mean you need to add that back in for subclasses which could get kind of messy."}, {"owner": {"reputation": 11741, "user_id": 1934428, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/072774c5d4204a1c2385560e6114a887?s=128&d=identicon&r=PG", "display_name": "user1934428", "link": "https://stackoverflow.com/users/1934428/user1934428"}, "edited": false, "score": 0, "creation_date": 1435308876, "post_id": 31027731, "comment_id": 50157181, "body": "@toro2k: I think your solution is the right one. It explains at least the effect I see from instantiating an Integer. I wonder why a Ruby core class was defined as being abstract. It is a rarely used concept in duck-typing languages...."}], "tags": [], "owner": {"reputation": 18308, "user_id": 1375209, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/dweAo.png?s=128&g=1", "display_name": "toro2k", "link": "https://stackoverflow.com/users/1375209/toro2k"}, "is_accepted": true, "score": 5, "last_activity_date": 1435223775, "last_edit_date": 1435223775, "creation_date": 1435151944, "answer_id": 31027731, "question_id": 31027478, "link": "https://stackoverflow.com/questions/31027478/integer-and-other-abstract-classes-in-ruby/31027731#31027731", "title": "Integer and other (?) abstract classes in Ruby", "body": "<p>You can undefine the <code>new</code> class method calling <a href=\"http://ruby-doc.org/core/Module.html#method-i-undef_method\" rel=\"nofollow\"><code>undef_method</code></a> on the <a href=\"http://ruby-doc.org/core/doc/syntax/modules_and_classes_rdoc.html#label-Singleton+Classes\" rel=\"nofollow\">singleton class</a> of your class, for example:</p>\n\n<pre><code>class Foo\n  class &lt;&lt; self\n    undef_method(:new)\n  end\nend\n\nFoo.new\n# NoMethodError: undefined method `new' for Foo:Class\n</code></pre>\n\n<p>Or alternatively:</p>\n\n<pre><code>class Foo; end\nFoo.singleton_class.send(:undef_method, :new)\n</code></pre>\n\n<p><strong>Update</strong>: for the sake of completeness here's a quick (and possibly dirty) solution to the problem mentioned by @tadman in the comments. It uses the <a href=\"http://ruby-doc.org/core/Class.html#method-i-inherited\" rel=\"nofollow\"><code>inherited</code></a> method to define a <code>new</code> singleton method for the subclasses of <code>Foo</code> that mimics the implementation of <a href=\"http://ruby-doc.org/core/Class.html#method-i-new\" rel=\"nofollow\"><code>Class#new</code></a>:</p>\n\n<pre><code>class Foo\n  class &lt;&lt; self\n    undef_method(:new)\n\n    def inherited(subclass)\n      subclass.define_singleton_method(:new) do |*args|\n        obj = subclass.allocate\n        obj.send(:initialize, *args)\n        obj\n      end\n    end\n  end\n\nend\n\nclass Bar &lt; Foo\n  attr_reader :bar\n  def initialize(bar)\n    @bar = bar\n  end\nend\n\nBar.new('foobar').bar # =&gt; \"foobar\" \n</code></pre>\n"}], "owner": {"reputation": 11741, "user_id": 1934428, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/072774c5d4204a1c2385560e6114a887?s=128&d=identicon&r=PG", "display_name": "user1934428", "link": "https://stackoverflow.com/users/1934428/user1934428"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 213, "favorite_count": 0, "accepted_answer_id": 31027731, "answer_count": 1, "score": 1, "last_activity_date": 1435223775, "creation_date": 1435151293, "last_edit_date": 1435153138, "question_id": 31027478, "link": "https://stackoverflow.com/questions/31027478/integer-and-other-abstract-classes-in-ruby", "title": "Integer and other (?) abstract classes in Ruby", "body": "<p>I admit that in duck-typing languages, abstract classes aren't used so often, so this question is more out of curiosity than of actual need:</p>\n\n<p>In Ruby (at least 2.0), <code>Fixnum</code> and <code>Bignum</code> have a common superclass called <code>Integer</code>. It looks to me, that this is an abstract class; at least, it can't be instantiated, i.e. when you do in irb:</p>\n\n<pre><code>irb(main):047:0&gt; Integer.new(8)\nNoMethodError: undefined method `new' for Integer:Class\n    from (irb):47\n    from /usr/bin/irb:12:in `&lt;main&gt;'\n</code></pre>\n\n<p>Now, if I would decide to roll out my own class which behaves like <code>Integer</code>, i.e. being \"as abstract as <code>Integer</code> is\", how would I do this? I thought that <em>every</em> class contains a (hidden) <code>new</code> method (which calls my <code>initialize</code> method if present).</p>\n"}, {"tags": ["mysql", "ruby", "upsert"], "answers": [{"tags": [], "owner": {"reputation": 53, "user_id": 250153, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9abb652511a01f5e1772c42838df475e?s=128&d=identicon&r=PG", "display_name": "Joe", "link": "https://stackoverflow.com/users/250153/joe"}, "is_accepted": false, "score": 1, "last_activity_date": 1435179362, "creation_date": 1435179362, "answer_id": 31036884, "question_id": 31027466, "link": "https://stackoverflow.com/questions/31027466/access-denied-when-using-upsert-with-mysql2-and-rails-4/31036884#31036884", "title": "Access denied when using Upsert with MySQL2 and Rails 4", "body": "<p>Hopefully this helps someone else... but it turns out the \"developer\" user didn\u2019t have <em>CREATE PROCEDURE</em> permissions for that MySQL database.</p>\n\n<p>Once those permissions were given to the \"developer\" user, things worked just swell.</p>\n"}], "owner": {"reputation": 53, "user_id": 250153, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9abb652511a01f5e1772c42838df475e?s=128&d=identicon&r=PG", "display_name": "Joe", "link": "https://stackoverflow.com/users/250153/joe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 101, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1435179362, "creation_date": 1435151273, "question_id": 31027466, "link": "https://stackoverflow.com/questions/31027466/access-denied-when-using-upsert-with-mysql2-and-rails-4", "title": "Access denied when using Upsert with MySQL2 and Rails 4", "body": "<p>I'm using the <a href=\"https://github.com/seamusabshere/upsert\" rel=\"nofollow\">Upsert gem</a> with Rails 4.2.1 and mysql2 gem v0.3.18.  But I keep getting an \"Access denied\" error whenever I try to upsert anything.</p>\n\n<p>For example:\n<code>\nupsert = Upsert.new User.connection, User.table_name\n</code>\nseems to work fine.  </p>\n\n<p>But when I actually try to use Upsert, like this:\n<code>\nupsert.row({id: 123}, name: 'Neat')\n</code></p>\n\n<p>I get this error:\n<code>\nMysql2::Error: Access denied for user 'developer'@'%' to database 'project_development'\n        from /usr/local/rvm/gems/ruby-2.2.0@project/gems/upsert-2.1.0/lib/upsert/connection/Mysql2_Client.rb:7:in `query'\n        from /usr/local/rvm/gems/ruby-2.2.0@project/gems/upsert-2.1.0/lib/upsert/connection/Mysql2_Client.rb:7:in `execute'\n        from /usr/local/rvm/gems/ruby-2.2.0@project/gems/upsert-2.1.0/lib/upsert/merge_function/mysql.rb:28:in `create!'\n        from /usr/local/rvm/gems/ruby-2.2.0@project/gems/upsert-2.1.0/lib/upsert/merge_function.rb:39:in `initialize'\n        from /usr/local/rvm/gems/ruby-2.2.0@project/gems/upsert-2.1.0/lib/upsert.rb:229:in `new'\n        from /usr/local/rvm/gems/ruby-2.2.0@project/gems/upsert-2.1.0/lib/upsert.rb:229:in `merge_function'\n        from /usr/local/rvm/gems/ruby-2.2.0@project/gems/upsert-2.1.0/lib/upsert.rb:218:in `row'\n</code></p>\n\n<p>I've used Upsert before with PostgreSQL, and it worked beautifully.  Has anyone else seen this error before with MySQL and Upsert, and if so, do you have any advice?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "activerecord", "has-many"], "comments": [{"owner": {"reputation": 3805, "user_id": 2075801, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f845c96122bd745f0614185a840d850b?s=128&d=identicon&r=PG", "display_name": "Yury Lebedev", "link": "https://stackoverflow.com/users/2075801/yury-lebedev"}, "edited": false, "score": 0, "creation_date": 1435151400, "post_id": 31027280, "comment_id": 50079509, "body": "actually you don&#39;t need to call <code>update</code> and <code>save</code> after the <code>increment!</code> command, <code>increment!</code> already writes the data to the db"}, {"owner": {"reputation": 3805, "user_id": 2075801, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f845c96122bd745f0614185a840d850b?s=128&d=identicon&r=PG", "display_name": "Yury Lebedev", "link": "https://stackoverflow.com/users/2075801/yury-lebedev"}, "edited": false, "score": 2, "creation_date": 1435151447, "post_id": 31027280, "comment_id": 50079551, "body": "also you can call <code>.reload</code> on the item later, to reload it. Looks like the increment command does not updates the instance in your case."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1435151470, "post_id": 31027280, "comment_id": 50079572, "body": "I think you have to <code>reload</code> to see the changes at the database level e.g. <code>self.posts.reload.inspect</code>"}, {"owner": {"reputation": 47, "user_id": 5044618, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/1b12831609f3b191d67eafe168301ea4?s=128&d=identicon&r=PG&f=1", "display_name": "Zak", "link": "https://stackoverflow.com/users/5044618/zak"}, "edited": false, "score": 0, "creation_date": 1435151595, "post_id": 31027280, "comment_id": 50079658, "body": "Yury Lebedev : I tried also with update_attributes and +="}, {"owner": {"reputation": 47, "user_id": 5044618, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/1b12831609f3b191d67eafe168301ea4?s=128&d=identicon&r=PG&f=1", "display_name": "Zak", "link": "https://stackoverflow.com/users/5044618/zak"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1435151804, "post_id": 31027280, "comment_id": 50079828, "body": "Thank you very much @engineersmnky and @ Yury Lebedev! Reload works fine. So I need to reload a collection after each update?"}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1435152021, "post_id": 31027280, "comment_id": 50079984, "body": "only sometimes. If the method updates the database directly but does not reflect on the instance itself like <code>increment!</code> does."}, {"owner": {"reputation": 47, "user_id": 5044618, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/1b12831609f3b191d67eafe168301ea4?s=128&d=identicon&r=PG&f=1", "display_name": "Zak", "link": "https://stackoverflow.com/users/5044618/zak"}, "edited": false, "score": 0, "creation_date": 1435153432, "post_id": 31027280, "comment_id": 50081095, "body": "I&#39;ll stay with reload solution. I tried also with nb+=2 and item.save(item.attributes) and same issue. Anyway, thank you"}], "answers": [{"comments": [{"owner": {"reputation": 47, "user_id": 5044618, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/1b12831609f3b191d67eafe168301ea4?s=128&d=identicon&r=PG&f=1", "display_name": "Zak", "link": "https://stackoverflow.com/users/5044618/zak"}, "edited": false, "score": 0, "creation_date": 1435153533, "post_id": 31027818, "comment_id": 50081164, "body": "Thank you it&#39;s works also, but i&#39;ll stay with reload."}], "tags": [], "owner": {"reputation": 109029, "user_id": 2767755, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/BkC8q.jpg?s=128&g=1", "display_name": "Arup Rakshit", "link": "https://stackoverflow.com/users/2767755/arup-rakshit"}, "is_accepted": true, "score": 0, "last_activity_date": 1435152189, "creation_date": 1435152189, "answer_id": 31027818, "question_id": 31027280, "link": "https://stackoverflow.com/questions/31027280/ruby-on-rails-has-many-collection-not-updated/31027818#31027818", "title": "Ruby On Rails : has_many collection not updated", "body": "<p>You can do</p>\n\n<pre><code>logger.info self.posts(true).inspect\n</code></pre>\n\n<p>By default, <a href=\"http://apidock.com/rails/ActiveRecord/Associations/ClassMethods/has_many\" rel=\"nofollow\"><code>force_reload</code></a> is <code>false</code>.</p>\n"}], "owner": {"reputation": 47, "user_id": 5044618, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/1b12831609f3b191d67eafe168301ea4?s=128&d=identicon&r=PG&f=1", "display_name": "Zak", "link": "https://stackoverflow.com/users/5044618/zak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 218, "favorite_count": 0, "accepted_answer_id": 31027818, "answer_count": 1, "score": 1, "last_activity_date": 1435154684, "creation_date": 1435150782, "last_edit_date": 1435154684, "question_id": 31027280, "link": "https://stackoverflow.com/questions/31027280/ruby-on-rails-has-many-collection-not-updated", "title": "Ruby On Rails : has_many collection not updated", "body": "<p>I have a problem when i update an object in a has_many association :</p>\n\n<pre><code>l = self.posts.where(...)\nl.each do |item|\n  item.increment!(:nb, 2)         \n  item.update\n  item.save\nend\n</code></pre>\n\n<p>When I do :</p>\n\n<pre><code>logger.info Post.all.inspect\nlogger.info self.posts.inspect\n</code></pre>\n\n<p>The posts are updated with the first line but not with the second</p>\n\n<p>Is there a way to force the update or am i doing something wrong? I also tried to disable the cache but it still the same problem.</p>\n"}, {"tags": ["arrays", "ruby"], "comments": [{"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1435149995, "post_id": 31026867, "comment_id": 50078461, "body": "There is no hash in your code. What hash are you talking about?"}, {"owner": {"reputation": 1849, "user_id": 3437721, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/3e6fac72d7b35f2177b6f56eab43db28?s=128&d=identicon&r=PG&f=1", "display_name": "user3437721", "link": "https://stackoverflow.com/users/3437721/user3437721"}, "reply_to_user": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1435150099, "post_id": 31026867, "comment_id": 50078533, "body": "sorry I&#39;m new to ruby, I have modfiied"}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 3, "creation_date": 1435150251, "post_id": 31026867, "comment_id": 50078650, "body": "Now your question is a duplicate of <a href=\"http://stackoverflow.com/q/10816125/\"><i>ruby array loop always pair</i></a> and many others."}], "answers": [{"comments": [{"owner": {"reputation": 1849, "user_id": 3437721, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/3e6fac72d7b35f2177b6f56eab43db28?s=128&d=identicon&r=PG&f=1", "display_name": "user3437721", "link": "https://stackoverflow.com/users/3437721/user3437721"}, "edited": false, "score": 0, "creation_date": 1435150033, "post_id": 31026993, "comment_id": 50078491, "body": "so will this pass in two at a time, how do I access each of them in my other method?"}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1435150746, "post_id": 31026993, "comment_id": 50079005, "body": "rather than referencing them by <code>pair[0]</code> and <code>pair[1]</code> why not just pass them to the block as separate variables e.g. <code>NUMERIC_FIELDS.each_slice(2){ |column1,column2| are_numeric_fields_valid(column1,column2) }</code> It adds to readability in my opinion."}, {"owner": {"reputation": 1118, "user_id": 3243794, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/QxQsp.jpg?s=128&g=1", "display_name": "nesiseka", "link": "https://stackoverflow.com/users/3243794/nesiseka"}, "edited": false, "score": 1, "creation_date": 1435151002, "post_id": 31026993, "comment_id": 50079204, "body": "Yes, that works too. I also liked passing it to the method with the splat (*) operator."}], "tags": [], "owner": {"reputation": 1118, "user_id": 3243794, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/QxQsp.jpg?s=128&g=1", "display_name": "nesiseka", "link": "https://stackoverflow.com/users/3243794/nesiseka"}, "is_accepted": true, "score": 3, "last_activity_date": 1435150515, "last_edit_date": 1435150515, "creation_date": 1435149983, "answer_id": 31026993, "question_id": 31026867, "link": "https://stackoverflow.com/questions/31026867/loop-with-two-elements-of-an-array-at-a-time/31026993#31026993", "title": "Loop with two elements of an array at a time", "body": "<p>First of all, this isn't a Hash, it's an Array of Symbols.</p>\n\n<p>To get what you need you should use the <a href=\"http://ruby-doc.org/core-1.9.3/Enumerable.html#method-i-each_slice\" rel=\"nofollow\">Enumerable#each_slice</a> method</p>\n\n<pre><code>NUMERIC_FIELDS.each_slice(2) do |pair|\n  are_numeric_fields_valid(pair[0], pair[1])\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 399, "user_id": 4886550, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/175fd001763e76e8d61e86462321582a?s=128&d=identicon&r=PG&f=1", "display_name": "caspg", "link": "https://stackoverflow.com/users/4886550/caspg"}, "is_accepted": false, "score": 0, "last_activity_date": 1435150132, "creation_date": 1435150132, "answer_id": 31027037, "question_id": 31026867, "link": "https://stackoverflow.com/questions/31026867/loop-with-two-elements-of-an-array-at-a-time/31027037#31027037", "title": "Loop with two elements of an array at a time", "body": "<pre><code>NUMERIC_FIELDS.each_slice(2) do |column_name|\n # and you can grab each symbol like: column_name[0] and column_name[1]\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1435150999, "post_id": 31027103, "comment_id": 50079202, "body": "This answer is probably the best method if you are not going to split variables in the block (as I mentioned in a comment on @nesiseka&#39;s answer) but I still think splitting the variables adds to readability"}], "tags": [], "owner": {"reputation": 110733, "user_id": 1009479, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/wlrC5.jpg?s=128&g=1", "display_name": "Yu Hao", "link": "https://stackoverflow.com/users/1009479/yu-hao"}, "is_accepted": false, "score": 2, "last_activity_date": 1435150777, "last_edit_date": 1435150777, "creation_date": 1435150278, "answer_id": 31027103, "question_id": 31026867, "link": "https://stackoverflow.com/questions/31026867/loop-with-two-elements-of-an-array-at-a-time/31027103#31027103", "title": "Loop with two elements of an array at a time", "body": "<p>Use <a href=\"http://ruby-doc.org/core-1.9.3/Enumerable.html#method-i-each_slice\" rel=\"nofollow\"><code>Enumerate#each_slice</code></a>:</p>\n\n<pre><code>NUMERIC_FIELDS.each_slice(2) do |column_name|\n  are_numeric_fields_valid(*column_name)\nend\n</code></pre>\n\n<p>The splat operator <code>*</code> is to pass two arguments instead of a single <code>Array</code>, i.e,  <code>are_numeric_fields_valid(:a_single, :a_aggregate)</code> instead of <code>are_numeric_fields_valid([:a_single, :a_aggregate])</code>.</p>\n"}], "owner": {"reputation": 1849, "user_id": 3437721, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/3e6fac72d7b35f2177b6f56eab43db28?s=128&d=identicon&r=PG&f=1", "display_name": "user3437721", "link": "https://stackoverflow.com/users/3437721/user3437721"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1260, "favorite_count": 0, "accepted_answer_id": 31026993, "answer_count": 3, "score": 0, "last_activity_date": 1435151081, "creation_date": 1435149629, "last_edit_date": 1435151071, "question_id": 31026867, "link": "https://stackoverflow.com/questions/31026867/loop-with-two-elements-of-an-array-at-a-time", "title": "Loop with two elements of an array at a time", "body": "<p>Given this array:</p>\n\n<pre><code>NUMERIC_FIELDS = [:a_single, :a_aggregate,\n                  :field_single, :field_aggregate,\n                  :line_manager_single, :line_manager_aggregate,\n                  :off_single, :off_aggregate,\n                  :regional_single, :regional_aggregate]\n</code></pre>\n\n<p>How can I loop over it and pass two elements of it to a method at a time? I should first pass <code>a_single</code> and <code>a_aggregate</code>, then pass <code>field_single</code> and <code>field_aggregate</code>. The method needs to loop only five times as there are five pairs of items.</p>\n\n<pre><code>NUMERIC_FIELDS.each do |column_name|\n  are_numeric_fields_valid(column_name)\nend\n</code></pre>\n"}, {"tags": ["ruby", "http", "ruby-on-rails-4", "routes"], "comments": [{"owner": {"reputation": 2376, "user_id": 3311657, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9d1d7b5444ea5fbb3b5e0ecb8303a88e?s=128&d=identicon&r=PG", "display_name": "steve klein", "link": "https://stackoverflow.com/users/3311657/steve-klein"}, "edited": false, "score": 0, "creation_date": 1435150374, "post_id": 31026186, "comment_id": 50078750, "body": "Can you post the <code>edit_attr_3</code> view (called <code>edit_attr_3.html.erb</code> I assume)?  Not sure what is happening but you can specify the controller path with the <code>:url</code> option in your form."}, {"owner": {"reputation": 35, "user_id": 4154817, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/00f9fd799b3e59763e59f2c954dbb496?s=128&d=identicon&r=PG&f=1", "display_name": "Sag", "link": "https://stackoverflow.com/users/4154817/sag"}, "reply_to_user": {"reputation": 2376, "user_id": 3311657, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9d1d7b5444ea5fbb3b5e0ecb8303a88e?s=128&d=identicon&r=PG", "display_name": "steve klein", "link": "https://stackoverflow.com/users/3311657/steve-klein"}, "edited": false, "score": 0, "creation_date": 1435241732, "post_id": 31026186, "comment_id": 50126861, "body": "I am posting the edit_attr_3 view for other people facing with same issue, but you are right Steve,  the :url option was missing in my form. Thanks!"}, {"owner": {"reputation": 2376, "user_id": 3311657, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9d1d7b5444ea5fbb3b5e0ecb8303a88e?s=128&d=identicon&r=PG", "display_name": "steve klein", "link": "https://stackoverflow.com/users/3311657/steve-klein"}, "edited": false, "score": 0, "creation_date": 1435242166, "post_id": 31026186, "comment_id": 50127223, "body": "Glad you got it sorted @Sag"}], "answers": [{"comments": [{"owner": {"reputation": 35, "user_id": 4154817, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/00f9fd799b3e59763e59f2c954dbb496?s=128&d=identicon&r=PG&f=1", "display_name": "Sag", "link": "https://stackoverflow.com/users/4154817/sag"}, "edited": false, "score": 0, "creation_date": 1435241590, "post_id": 31027273, "comment_id": 50126749, "body": "That was it. I was not specifying the custom update_attr_3 url in my edit_attr_3 form, as with standard show/edit actions it is not necessary. Problem solved ! Thanks. :)"}], "tags": [], "owner": {"reputation": 326, "user_id": 3732240, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bf79ad14416b3daf699b46f9378cec?s=128&d=identicon&r=PG", "display_name": "Ross", "link": "https://stackoverflow.com/users/3732240/ross"}, "is_accepted": true, "score": 3, "last_activity_date": 1435150763, "creation_date": 1435150763, "answer_id": 31027273, "question_id": 31026186, "link": "https://stackoverflow.com/questions/31026186/rails-4-custom-routes-multiple-edit-forms-for-a-single-model/31027273#31027273", "title": "Rails 4 : Custom routes, multiple edit forms for a single model", "body": "<p>It's hard to say without seeing the code for your form... but if you are using <code>form_for</code> then the route it will map to the update action in both cases (with an object that is not a new object). </p>\n\n<p>To make it work with your unique update action, you will have to specify the url that <code>form_for</code> should use. Something like:</p>\n\n<pre><code>&lt;%= form_for @thing, url: things_update_attr_3_path(@thing) do |f| %&gt;\n  # other form stuff .......\n</code></pre>\n\n<p>You can use <code>bundle exec rake routes</code> at the command prompt to see what your current routes are, so that you now what route helper to use with form for.</p>\n"}], "owner": {"reputation": 35, "user_id": 4154817, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/00f9fd799b3e59763e59f2c954dbb496?s=128&d=identicon&r=PG&f=1", "display_name": "Sag", "link": "https://stackoverflow.com/users/4154817/sag"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 748, "favorite_count": 1, "accepted_answer_id": 31027273, "answer_count": 1, "score": 1, "last_activity_date": 1435242593, "creation_date": 1435147847, "last_edit_date": 1495535203, "question_id": 31026186, "link": "https://stackoverflow.com/questions/31026186/rails-4-custom-routes-multiple-edit-forms-for-a-single-model", "title": "Rails 4 : Custom routes, multiple edit forms for a single model", "body": "<p>I have a Rails 4 app, with a Thing model that have 3 attributes : attr_1, attr_2, attr_3.</p>\n\n<p>I would like to have two edit forms :</p>\n\n<ul>\n<li>the first one would update attr_1 and attr_2</li>\n<li>the second one would only update attr_3</li>\n</ul>\n\n<p>I have written four methods in my things_controller.rb :</p>\n\n<pre><code>def edit\n  #edit form for attr_1 &amp; attr_2\nend\n\ndef edit_attr_3\n  #edit form for attr_3 only\nend\n\ndef update\n  #update attr_1 &amp; attr_2\nend\n\ndef update_attr_3\n  #update attr_3 only\nend\n</code></pre>\n\n<p>And here's my routes.db </p>\n\n<pre><code>resources :things do \n  member do\n    get :edit_attr_3\n    put :update_attr_3\n  end\nend\n</code></pre>\n\n<p>Now, GET to both edit views work (/things/:id/edit and /things/:id/edit_attr_3) but on submit, the thing#update form is called both times (thing#update_attr_3 is never called)</p>\n\n<p>How can I proceed to get thing#edit_attr_3 action linked to thing#update_attr_3 please ?</p>\n\n<hr>\n\n<h2>EDIT :</h2>\n\n<p>Answer, thanks to <a href=\"https://stackoverflow.com/users/3732240/ross\">Ross</a> &amp; <a href=\"https://stackoverflow.com/users/3311657/steve-klein\">Steve Klein</a> :</p>\n\n<p>In my views, I am using <a href=\"https://github.com/bootstrap-ruby/rails-bootstrap-forms\" rel=\"nofollow noreferrer\">bootstrap_form_for</a>. Usually the :url parameter is optional, as standard edit/update are linked by convention. In the case of custom edit or update actions, it is necessary to specify the update path.</p>\n\n<pre><code>&lt;%= bootstrap_form_for @thing, url: update_attr_3_thing_path(@thing) do |f| %&gt;\n&lt;% end %&gt;\n</code></pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 53, "user_id": 5039563, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/2b8449cbc2109dbd272162db76fa8107?s=128&d=identicon&r=PG&f=1", "display_name": "naqash", "link": "https://stackoverflow.com/users/5039563/naqash"}, "reply_to_user": {"reputation": 42694, "user_id": 1175077, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AWgLI.jpg?s=128&g=1", "display_name": "jpw", "link": "https://stackoverflow.com/users/1175077/jpw"}, "edited": false, "score": 0, "creation_date": 1435147659, "post_id": 31025963, "comment_id": 50076817, "body": "thanks for the reply but error is still there"}, {"owner": {"reputation": 53, "user_id": 5039563, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/2b8449cbc2109dbd272162db76fa8107?s=128&d=identicon&r=PG&f=1", "display_name": "naqash", "link": "https://stackoverflow.com/users/5039563/naqash"}, "reply_to_user": {"reputation": 42694, "user_id": 1175077, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AWgLI.jpg?s=128&g=1", "display_name": "jpw", "link": "https://stackoverflow.com/users/1175077/jpw"}, "edited": false, "score": 0, "creation_date": 1435147719, "post_id": 31025963, "comment_id": 50076850, "body": "i have intalled ruby , and verified by typing irb .but it doesnt running my code &lt;Load error&gt; appears on cmd"}, {"owner": {"reputation": 53, "user_id": 5039563, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/2b8449cbc2109dbd272162db76fa8107?s=128&d=identicon&r=PG&f=1", "display_name": "naqash", "link": "https://stackoverflow.com/users/5039563/naqash"}, "reply_to_user": {"reputation": 42694, "user_id": 1175077, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AWgLI.jpg?s=128&g=1", "display_name": "jpw", "link": "https://stackoverflow.com/users/1175077/jpw"}, "edited": false, "score": 0, "creation_date": 1435148087, "post_id": 31025963, "comment_id": 50077098, "body": "no , i am using sublime text and i have saved the file by name project.rb and when i run this code in cmd and type ruby project.rb , then error appears"}, {"owner": {"reputation": 4127, "user_id": 4231385, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d89a541a4609cafea3957e4cdfcca50f?s=128&d=identicon&r=PG&f=1", "display_name": "cremno", "link": "https://stackoverflow.com/users/4231385/cremno"}, "edited": false, "score": 0, "creation_date": 1435150880, "post_id": 31025963, "comment_id": 50079114, "body": "The error message is clear. <code>mycode.rb</code> doesn&#39;t exist in the current directory (or just isn&#39;t readable). Make sure it does (<code>dir</code> to get a file/dir list and <code>cd</code> to change it). Also, please copy and paste error messages."}, {"owner": {"reputation": 53, "user_id": 5039563, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/2b8449cbc2109dbd272162db76fa8107?s=128&d=identicon&r=PG&f=1", "display_name": "naqash", "link": "https://stackoverflow.com/users/5039563/naqash"}, "reply_to_user": {"reputation": 4127, "user_id": 4231385, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d89a541a4609cafea3957e4cdfcca50f?s=128&d=identicon&r=PG&f=1", "display_name": "cremno", "link": "https://stackoverflow.com/users/4231385/cremno"}, "edited": false, "score": 0, "creation_date": 1435154254, "post_id": 31025963, "comment_id": 50081717, "body": "H:\\Naqash Data\\Studies\\Imtiaz bro RUBY&gt;ruby Project ruby: No such file or directory -- Project (LoadError)"}, {"owner": {"reputation": 53, "user_id": 5039563, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/2b8449cbc2109dbd272162db76fa8107?s=128&d=identicon&r=PG&f=1", "display_name": "naqash", "link": "https://stackoverflow.com/users/5039563/naqash"}, "reply_to_user": {"reputation": 4127, "user_id": 4231385, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d89a541a4609cafea3957e4cdfcca50f?s=128&d=identicon&r=PG&f=1", "display_name": "cremno", "link": "https://stackoverflow.com/users/4231385/cremno"}, "edited": false, "score": 0, "creation_date": 1435154271, "post_id": 31025963, "comment_id": 50081731, "body": "This is the annoying error , help help"}, {"owner": {"reputation": 4127, "user_id": 4231385, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d89a541a4609cafea3957e4cdfcca50f?s=128&d=identicon&r=PG&f=1", "display_name": "cremno", "link": "https://stackoverflow.com/users/4231385/cremno"}, "edited": false, "score": 0, "creation_date": 1435155811, "post_id": 31025963, "comment_id": 50082984, "body": "What&#39;s <code>H:</code> exactly? A local hard drive? Also tell us the full path of the <code>mycode.rb</code> file. Does <a href=\"https://technet.microsoft.com/en-us/library/cc755121.aspx\" rel=\"nofollow noreferrer\"><code>dir</code></a> list it?"}, {"owner": {"reputation": 53, "user_id": 5039563, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/2b8449cbc2109dbd272162db76fa8107?s=128&d=identicon&r=PG&f=1", "display_name": "naqash", "link": "https://stackoverflow.com/users/5039563/naqash"}, "reply_to_user": {"reputation": 4127, "user_id": 4231385, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d89a541a4609cafea3957e4cdfcca50f?s=128&d=identicon&r=PG&f=1", "display_name": "cremno", "link": "https://stackoverflow.com/users/4231385/cremno"}, "edited": false, "score": 0, "creation_date": 1435157540, "post_id": 31025963, "comment_id": 50084335, "body": "YES , dir is listing mycode.rb"}, {"owner": {"reputation": 53, "user_id": 5039563, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/2b8449cbc2109dbd272162db76fa8107?s=128&d=identicon&r=PG&f=1", "display_name": "naqash", "link": "https://stackoverflow.com/users/5039563/naqash"}, "reply_to_user": {"reputation": 4127, "user_id": 4231385, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d89a541a4609cafea3957e4cdfcca50f?s=128&d=identicon&r=PG&f=1", "display_name": "cremno", "link": "https://stackoverflow.com/users/4231385/cremno"}, "edited": false, "score": 0, "creation_date": 1435157579, "post_id": 31025963, "comment_id": 50084350, "body": "i have posted full path of my H:/ drive where project.rb is located"}], "answers": [{"comments": [{"owner": {"reputation": 53, "user_id": 5039563, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/2b8449cbc2109dbd272162db76fa8107?s=128&d=identicon&r=PG&f=1", "display_name": "naqash", "link": "https://stackoverflow.com/users/5039563/naqash"}, "edited": false, "score": 0, "creation_date": 1435150643, "post_id": 31026707, "comment_id": 50078939, "body": "i have still the same error :(. but thanks for reply . actually the error is &quot; ruby : no such file or directory -- mycode.rb &lt;Load Error&gt;"}, {"owner": {"reputation": 67, "user_id": 5044544, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f58cc1079e6ca869292e588afe9ffcdb?s=128&d=identicon&r=PG&f=1", "display_name": "Blackorade", "link": "https://stackoverflow.com/users/5044544/blackorade"}, "reply_to_user": {"reputation": 53, "user_id": 5039563, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/2b8449cbc2109dbd272162db76fa8107?s=128&d=identicon&r=PG&f=1", "display_name": "naqash", "link": "https://stackoverflow.com/users/5039563/naqash"}, "edited": false, "score": 0, "creation_date": 1435150909, "post_id": 31026707, "comment_id": 50079137, "body": "Try shift+rightclick in the directory =&gt; open command window here; In the command window that opens type &quot;ruby mycode.rb&quot;; Also you could open cmd normally and type &quot;cd PATHTOTHEFILE&quot; and then &quot;ruby mycode.rb&quot;"}, {"owner": {"reputation": 53, "user_id": 5039563, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/2b8449cbc2109dbd272162db76fa8107?s=128&d=identicon&r=PG&f=1", "display_name": "naqash", "link": "https://stackoverflow.com/users/5039563/naqash"}, "edited": false, "score": 0, "creation_date": 1435151195, "post_id": 31026707, "comment_id": 50079346, "body": "buddy , i am doing the same thing :( but i think there is an installation problem"}, {"owner": {"reputation": 67, "user_id": 5044544, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f58cc1079e6ca869292e588afe9ffcdb?s=128&d=identicon&r=PG&f=1", "display_name": "Blackorade", "link": "https://stackoverflow.com/users/5044544/blackorade"}, "reply_to_user": {"reputation": 53, "user_id": 5039563, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/2b8449cbc2109dbd272162db76fa8107?s=128&d=identicon&r=PG&f=1", "display_name": "naqash", "link": "https://stackoverflow.com/users/5039563/naqash"}, "edited": false, "score": 0, "creation_date": 1435151204, "post_id": 31026707, "comment_id": 50079353, "body": "In short: Go to the directory first.There you can open your script."}, {"owner": {"reputation": 53, "user_id": 5039563, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/2b8449cbc2109dbd272162db76fa8107?s=128&d=identicon&r=PG&f=1", "display_name": "naqash", "link": "https://stackoverflow.com/users/5039563/naqash"}, "edited": false, "score": 0, "creation_date": 1435151320, "post_id": 31026707, "comment_id": 50079448, "body": "i dont have a dev kit yet btw."}, {"owner": {"reputation": 67, "user_id": 5044544, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f58cc1079e6ca869292e588afe9ffcdb?s=128&d=identicon&r=PG&f=1", "display_name": "Blackorade", "link": "https://stackoverflow.com/users/5044544/blackorade"}, "reply_to_user": {"reputation": 53, "user_id": 5039563, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/2b8449cbc2109dbd272162db76fa8107?s=128&d=identicon&r=PG&f=1", "display_name": "naqash", "link": "https://stackoverflow.com/users/5039563/naqash"}, "edited": false, "score": 0, "creation_date": 1435151445, "post_id": 31026707, "comment_id": 50079549, "body": "It dosnt matter if you use an IDE. I am using Notepad too."}], "tags": [], "owner": {"reputation": 67, "user_id": 5044544, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f58cc1079e6ca869292e588afe9ffcdb?s=128&d=identicon&r=PG&f=1", "display_name": "Blackorade", "link": "https://stackoverflow.com/users/5044544/blackorade"}, "is_accepted": false, "score": 0, "last_activity_date": 1435149230, "creation_date": 1435149230, "answer_id": 31026707, "question_id": 31025963, "link": "https://stackoverflow.com/questions/31025963/ruby-how-to-run-ruby-code-on-windows-cmd/31026707#31026707", "title": "Ruby - how to run ruby code on windows cmd", "body": "<p>When installing Ruby (no matter which version), check the boxes \n\"Add Ruby executables to your PATH\" \nand \n\"Associate .rb and .rbw files with this Ruby installation\"</p>\n\n<p>Now you can just type \"mycode\" and cmd will open it. You can also open it by double-clicking.</p>\n"}], "owner": {"reputation": 53, "user_id": 5039563, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/2b8449cbc2109dbd272162db76fa8107?s=128&d=identicon&r=PG&f=1", "display_name": "naqash", "link": "https://stackoverflow.com/users/5039563/naqash"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 842, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1435149230, "creation_date": 1435147265, "question_id": 31025963, "link": "https://stackoverflow.com/questions/31025963/ruby-how-to-run-ruby-code-on-windows-cmd", "title": "Ruby - how to run ruby code on windows cmd", "body": "<p>help me. actually i have installed ruby from RubyInstaller.org but when i run the script on cmd prompt like ( ruby mycode.rb) then error occurs ( no suck file or directory) -- mycode.rb  what is this ? and what is the solution ?\nThankyou</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 5580, "user_id": 382827, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/68941f6897d0fb799c898958c84f1fbe?s=128&d=identicon&r=PG", "display_name": "Omid Kamangar", "link": "https://stackoverflow.com/users/382827/omid-kamangar"}, "edited": false, "score": 0, "creation_date": 1435146879, "post_id": 31025647, "comment_id": 50076257, "body": "Is the logic in all your <code>support_</code> the same?"}, {"owner": {"reputation": 6584, "user_id": 1831520, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/QFRGt.jpg?s=128&g=1", "display_name": "sadaf2605", "link": "https://stackoverflow.com/users/1831520/sadaf2605"}, "reply_to_user": {"reputation": 5580, "user_id": 382827, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/68941f6897d0fb799c898958c84f1fbe?s=128&d=identicon&r=PG", "display_name": "Omid Kamangar", "link": "https://stackoverflow.com/users/382827/omid-kamangar"}, "edited": false, "score": 0, "creation_date": 1435147752, "post_id": 31025647, "comment_id": 50076869, "body": "yep pretty much same."}], "answers": [{"tags": [], "owner": {"reputation": 5580, "user_id": 382827, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/68941f6897d0fb799c898958c84f1fbe?s=128&d=identicon&r=PG", "display_name": "Omid Kamangar", "link": "https://stackoverflow.com/users/382827/omid-kamangar"}, "is_accepted": true, "score": 3, "last_activity_date": 1435210950, "last_edit_date": 1435210950, "creation_date": 1435148195, "answer_id": 31026308, "question_id": 31025647, "link": "https://stackoverflow.com/questions/31025647/easy-way-to-check-up-series-of-consistency-in-rails-model-object/31026308#31026308", "title": "easy way to check up series of consistency in rails model object", "body": "<p>You can use the <code>method_missing</code> method like this:</p>\n\n<pre><code>class A &lt; ActiveRecord::Base\n\n   def method_missing(m, *args, &amp;block)\n     if m.to_s.start_with? 'support_'\n       # Check the full method name and do whatever you want with args\n     else\n       super\n     end\n   end\n\n\n   def report(cart)\n       report=[]\n       parts = ['x', 'y', 'z']\n       parts.each do |part|\n         if self.send(\"support_#{part}\", cart.a)\n           report &lt;&lt; \"a does not support #{part} operation\"\n         end\n       end\n   end\nend\n</code></pre>\n\n<p>Note that I haven't tested this, and it's more like a pseudocode to give you an idea.</p>\n"}], "owner": {"reputation": 6584, "user_id": 1831520, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/QFRGt.jpg?s=128&g=1", "display_name": "sadaf2605", "link": "https://stackoverflow.com/users/1831520/sadaf2605"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "accepted_answer_id": 31026308, "answer_count": 1, "score": 0, "last_activity_date": 1435210950, "creation_date": 1435146312, "question_id": 31025647, "link": "https://stackoverflow.com/questions/31025647/easy-way-to-check-up-series-of-consistency-in-rails-model-object", "title": "easy way to check up series of consistency in rails model object", "body": "<p>In my ruby on rails project, I have a model of different parts: A, B, C. A has different fields, depending on that which entity of B and C may fit in. When user put A,B,C in cart I have to tell them if A,B,C these parts fits in or not?</p>\n\n<pre><code>class A &lt; ActiveRecord::Base\n   def supports_x(B)\n         ...\n      return true\n   end\n   def supports_y(C)\n         ...\n      return true\n   end\n   ....10/15 methods like this\n\n\n   def report(cart)\n       report=[]\n       if support_x(cart.a)\n          report&lt;&lt;\"a does not support x opporation\"\n       end\n       .... like this 10/15 hand written if else operation.\n   end\nend\n</code></pre>\n\n<p>Personally I can do that, I can write 10/15 similar looking methods and if else blocks, but my instinct is telling me I am doing it wrong, I am violating DRY principle. </p>\n\n<p>Is there any way I can avoid this in ruby/rails?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 30655, "user_id": 138557, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/73c04e9ef9ca435c5b19a2e765ae6d20?s=128&d=identicon&r=PG", "display_name": "Max Williams", "link": "https://stackoverflow.com/users/138557/max-williams"}, "edited": false, "score": 0, "creation_date": 1435145780, "post_id": 31025351, "comment_id": 50075555, "body": "The argument to <code>system</code> needs to be a string, eg <code>system &quot;cc program.c&quot;</code>"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1435146346, "post_id": 31025351, "comment_id": 50075907, "body": "<code>require &#39;inline&#39;</code> in controller?"}, {"owner": {"reputation": 67, "user_id": 5039929, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/3b88feabe892300f09baf67792cedf58?s=128&d=identicon&r=PG&f=1", "display_name": "pokiri", "link": "https://stackoverflow.com/users/5039929/pokiri"}, "edited": false, "score": 0, "creation_date": 1435146581, "post_id": 31025351, "comment_id": 50076057, "body": "I changed my code to system &quot;cc program.c&quot; but i don&#39;t get the output"}, {"owner": {"reputation": 67, "user_id": 5039929, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/3b88feabe892300f09baf67792cedf58?s=128&d=identicon&r=PG&f=1", "display_name": "pokiri", "link": "https://stackoverflow.com/users/5039929/pokiri"}, "edited": false, "score": 0, "creation_date": 1435146641, "post_id": 31025351, "comment_id": 50076096, "body": "Thamks i included require &#39;inline&#39; in my controller but that doesn&#39;t seem to work i still get the same error &quot;undefined method `inline&#39; for #&lt;ChallengesController&quot;"}, {"owner": {"reputation": 67, "user_id": 5039929, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/3b88feabe892300f09baf67792cedf58?s=128&d=identicon&r=PG&f=1", "display_name": "pokiri", "link": "https://stackoverflow.com/users/5039929/pokiri"}, "edited": false, "score": 0, "creation_date": 1435146866, "post_id": 31025351, "comment_id": 50076247, "body": "I tried to store the output from system in a variable like  output = system &quot;cc program.c&quot; p output but i cant see any ouput"}], "answers": [{"comments": [{"owner": {"reputation": 67, "user_id": 5039929, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/3b88feabe892300f09baf67792cedf58?s=128&d=identicon&r=PG&f=1", "display_name": "pokiri", "link": "https://stackoverflow.com/users/5039929/pokiri"}, "edited": false, "score": 0, "creation_date": 1435149627, "post_id": 31026692, "comment_id": 50078204, "body": "Thanks I am currently using gcc version 4.8.2 (Ubuntu 4.8.2-19ubuntu1) On executing this command output = system &quot;cc test.c&quot;   output contains false"}, {"owner": {"reputation": 1977, "user_id": 5028977, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-fLfAbWiOybA/AAAAAAAAAAI/AAAAAAAAA6o/F3lnvkMZNrQ/photo.jpg?sz=128", "display_name": "mziccard", "link": "https://stackoverflow.com/users/5028977/mziccard"}, "reply_to_user": {"reputation": 67, "user_id": 5039929, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/3b88feabe892300f09baf67792cedf58?s=128&d=identicon&r=PG&f=1", "display_name": "pokiri", "link": "https://stackoverflow.com/users/5039929/pokiri"}, "edited": false, "score": 0, "creation_date": 1435149805, "post_id": 31026692, "comment_id": 50078329, "body": "@pokiri read my answer: system returns <code>false</code> for non zero exit status. This means that <code>cc test.c</code> is returning a non zero exit status which means that compilation failed."}, {"owner": {"reputation": 67, "user_id": 5039929, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/3b88feabe892300f09baf67792cedf58?s=128&d=identicon&r=PG&f=1", "display_name": "pokiri", "link": "https://stackoverflow.com/users/5039929/pokiri"}, "edited": false, "score": 0, "creation_date": 1435149970, "post_id": 31026692, "comment_id": 50078447, "body": "but this is the code which i have written in my program.c #include&lt;stdio.h&gt; main() { printf(&quot;Hello World&quot;); }  how can this fail??"}, {"owner": {"reputation": 1977, "user_id": 5028977, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-fLfAbWiOybA/AAAAAAAAAAI/AAAAAAAAA6o/F3lnvkMZNrQ/photo.jpg?sz=128", "display_name": "mziccard", "link": "https://stackoverflow.com/users/5028977/mziccard"}, "reply_to_user": {"reputation": 67, "user_id": 5039929, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/3b88feabe892300f09baf67792cedf58?s=128&d=identicon&r=PG&f=1", "display_name": "pokiri", "link": "https://stackoverflow.com/users/5039929/pokiri"}, "edited": false, "score": 0, "creation_date": 1435150472, "post_id": 31026692, "comment_id": 50078820, "body": "@pokiri Does the program have a newline after <code>#include&lt;stdio.h&gt;</code>?"}, {"owner": {"reputation": 67, "user_id": 5039929, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/3b88feabe892300f09baf67792cedf58?s=128&d=identicon&r=PG&f=1", "display_name": "pokiri", "link": "https://stackoverflow.com/users/5039929/pokiri"}, "edited": false, "score": 0, "creation_date": 1435150707, "post_id": 31026692, "comment_id": 50078983, "body": "actually NO eventhough i provide the input from textbox with newline and when I printout the content of the textbox i get it as: &quot;#include&lt;stdio.h&gt; main() { printf(&quot;Hello World&quot;); }&quot;  Does the new line really matter?? provided i make some manipulations and get the new line inserted I can only get the output as either &#39;true&#39; or &#39;false&#39; using &#39;system&#39;  How can i get &#39;Hello world &#39; as my output???"}, {"owner": {"reputation": 1977, "user_id": 5028977, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-fLfAbWiOybA/AAAAAAAAAAI/AAAAAAAAA6o/F3lnvkMZNrQ/photo.jpg?sz=128", "display_name": "mziccard", "link": "https://stackoverflow.com/users/5028977/mziccard"}, "reply_to_user": {"reputation": 67, "user_id": 5039929, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/3b88feabe892300f09baf67792cedf58?s=128&d=identicon&r=PG&f=1", "display_name": "pokiri", "link": "https://stackoverflow.com/users/5039929/pokiri"}, "edited": false, "score": 0, "creation_date": 1435151040, "post_id": 31026692, "comment_id": 50079228, "body": "Yes it matters. I feel like we are moving to an unrelated topic. Consider voting/accepting the answer if you found it useful."}, {"owner": {"reputation": 1977, "user_id": 5028977, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-fLfAbWiOybA/AAAAAAAAAAI/AAAAAAAAA6o/F3lnvkMZNrQ/photo.jpg?sz=128", "display_name": "mziccard", "link": "https://stackoverflow.com/users/5028977/mziccard"}, "reply_to_user": {"reputation": 67, "user_id": 5039929, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/3b88feabe892300f09baf67792cedf58?s=128&d=identicon&r=PG&f=1", "display_name": "pokiri", "link": "https://stackoverflow.com/users/5039929/pokiri"}, "edited": false, "score": 0, "creation_date": 1435154218, "post_id": 31026692, "comment_id": 50081691, "body": "@pokiri I updated my answer to show how to run a program and read its stdout."}, {"owner": {"reputation": 67, "user_id": 5039929, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/3b88feabe892300f09baf67792cedf58?s=128&d=identicon&r=PG&f=1", "display_name": "pokiri", "link": "https://stackoverflow.com/users/5039929/pokiri"}, "edited": false, "score": 0, "creation_date": 1435167889, "post_id": 31026692, "comment_id": 50091392, "body": "thanks @mziccard when i typed my code in the text_area as defined above it gets saved in the file in the same format as i have entered i.e., including all the new line characters  now when I write the following code output = system &quot;cc #{path}&quot; where path =&quot; /home/User/test.c&quot; I still get false when i print out the value of output"}, {"owner": {"reputation": 67, "user_id": 5039929, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/3b88feabe892300f09baf67792cedf58?s=128&d=identicon&r=PG&f=1", "display_name": "pokiri", "link": "https://stackoverflow.com/users/5039929/pokiri"}, "edited": false, "score": 0, "creation_date": 1435168633, "post_id": 31026692, "comment_id": 50091872, "body": "I get exitstatus as &quot;1&quot; @mziccard but when i compile the same file using gcc in my terminal  i get no error"}], "tags": [], "owner": {"reputation": 1977, "user_id": 5028977, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-fLfAbWiOybA/AAAAAAAAAAI/AAAAAAAAA6o/F3lnvkMZNrQ/photo.jpg?sz=128", "display_name": "mziccard", "link": "https://stackoverflow.com/users/5028977/mziccard"}, "is_accepted": false, "score": 0, "last_activity_date": 1435154105, "last_edit_date": 1435154105, "creation_date": 1435149192, "answer_id": 31026692, "question_id": 31025351, "link": "https://stackoverflow.com/questions/31025351/unable-to-excute-c-code-in-rails/31026692#31026692", "title": "unable to excute C code in rails", "body": "<p>The <code>system</code> method calls a system program that can be passed as a string. \n<code>system</code> returns <code>true</code> if the command gives zero exit status, <code>false</code> for non zero exit status. Returns <code>nil</code> if command execution fails. If the program you are trying to execute does not exist, <code>system</code> return <code>nil</code>. </p>\n\n<p>When you write: </p>\n\n<pre><code>system \"cc program.c\"\n</code></pre>\n\n<p>You are executing the <code>cc</code> program on the input the file <code>program.c</code>. Here I suspect that <code>cc</code> is not installed on the computer running the Ruby script. On linux/unix <code>cc</code> stands for C Compiler and is usually installed with the Gnu C Compiler <code>gcc</code>. Try installing <code>gcc</code>.</p>\n\n<p>Edit:<br>\nSince what you want is to show to the user the program's output you then have to execute the compiled program and collect it's output. By default <code>cc program.c</code> creates an executable named <code>a.out</code> in the current directory, to execute it and get its output do:</p>\n\n<pre><code>output = `./a.out`\n</code></pre>\n\n<p>If you surround a program with backticks it will be executed as if you run it with <code>system</code> and it will also return its output as a string. </p>\n"}], "owner": {"reputation": 67, "user_id": 5039929, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/3b88feabe892300f09baf67792cedf58?s=128&d=identicon&r=PG&f=1", "display_name": "pokiri", "link": "https://stackoverflow.com/users/5039929/pokiri"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 72, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1435154105, "creation_date": 1435145349, "last_edit_date": 1435146264, "question_id": 31025351, "link": "https://stackoverflow.com/questions/31025351/unable-to-excute-c-code-in-rails", "title": "unable to excute C code in rails", "body": "<p>I am currently working on a college-project in which the user enters a C code in a form and expects the output in the browser. I am working on this project in rails. \nhere is the code for my form</p>\n\n<pre><code>&lt;%= form_tag({action: :show}, {method: :get}) do %&gt;\n\nComment: &lt;%= text_area_tag(:comment, nil, :rows =&gt; 5, :cols =&gt; 15) %&gt;\n  &lt;%= submit_tag (\"Save data\") %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>i have accessed the code from my controller from the following code and saved it to a file locally </p>\n\n<pre><code>@code_from_form = params['comment']\n\n        path = \"/home/User/test.c\"\n        content = @code_from_form\n        File.open(path, \"w+\") do |f|\n        f.write(content)\n</code></pre>\n\n<p>I have read in a forum to run a file use</p>\n\n<pre><code>system cc program.c\n</code></pre>\n\n<p>I included this in my controller but i get the following error \"undefined method `cc'\"</p>\n\n<p>i have added the following gem to myGemFile</p>\n\n<pre><code>gem 'RubyInline'\n</code></pre>\n\n<p>and included the following code in my controller .</p>\n\n<pre><code>inline do |builder|\n    builder.c_singleton '\n    int testfunc() {\n      return 0;\n    }'\n  end\n  p testfunc\n</code></pre>\n\n<p>I get the following error</p>\n\n<pre><code>undefined method `inline' for #&lt;ChallengesController\n</code></pre>\n\n<p>Should i use CGI scripts in C?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "heroku", "amazon-s3"], "answers": [{"comments": [{"owner": {"reputation": 23981, "user_id": 2813589, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/9axBj.jpg?s=128&g=1", "display_name": "\u30a2\u30ec\u30c3\u30af\u30b9", "link": "https://stackoverflow.com/users/2813589/%e3%82%a2%e3%83%ac%e3%83%83%e3%82%af%e3%82%b9"}, "edited": false, "score": 0, "creation_date": 1435143794, "post_id": 31024735, "comment_id": 50074222, "body": "how about my 3rd question?"}, {"owner": {"reputation": 2484, "user_id": 772450, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3fb3c2b290d7cc1e681aef4fc2bbeda?s=128&d=identicon&r=PG", "display_name": "arturhoo", "link": "https://stackoverflow.com/users/772450/arturhoo"}, "reply_to_user": {"reputation": 23981, "user_id": 2813589, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/9axBj.jpg?s=128&g=1", "display_name": "\u30a2\u30ec\u30c3\u30af\u30b9", "link": "https://stackoverflow.com/users/2813589/%e3%82%a2%e3%83%ac%e3%83%83%e3%82%af%e3%82%b9"}, "edited": false, "score": 0, "creation_date": 1435143948, "post_id": 31024735, "comment_id": 50074314, "body": "Sorry if it isn&#39;t clear on my answer. When you create or setup a Rails App, the path where the precompiled assets live is ignored by git. Consequently, it will not be pushed to Heroku and your overall repo size should be way below the 300MB. If you want to track large asset files in git, I would recommend taking a look at <a href=\"https://git-lfs.github.com/\" rel=\"nofollow noreferrer\">git-lfs.github.com</a>"}, {"owner": {"reputation": 23981, "user_id": 2813589, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/9axBj.jpg?s=128&g=1", "display_name": "\u30a2\u30ec\u30c3\u30af\u30b9", "link": "https://stackoverflow.com/users/2813589/%e3%82%a2%e3%83%ac%e3%83%83%e3%82%af%e3%82%b9"}, "edited": false, "score": 0, "creation_date": 1435145337, "post_id": 31024735, "comment_id": 50075237, "body": "but the matter is that the folder I&#39;m talking about and which is &gt; 300 Mb is my_app/assets"}, {"owner": {"reputation": 2484, "user_id": 772450, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3fb3c2b290d7cc1e681aef4fc2bbeda?s=128&d=identicon&r=PG", "display_name": "arturhoo", "link": "https://stackoverflow.com/users/772450/arturhoo"}, "reply_to_user": {"reputation": 23981, "user_id": 2813589, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/9axBj.jpg?s=128&g=1", "display_name": "\u30a2\u30ec\u30c3\u30af\u30b9", "link": "https://stackoverflow.com/users/2813589/%e3%82%a2%e3%83%ac%e3%83%83%e3%82%af%e3%82%b9"}, "edited": false, "score": 0, "creation_date": 1435145691, "post_id": 31024735, "comment_id": 50075495, "body": "Take a look at the Git Large File Storage that I mentioned in my previous comment. People don&#39;t usually commit large files to a git repo. By the way, the limit on the repo size at Heroku is 1GB <a href=\"https://devcenter.heroku.com/articles/limits#git-repos\" rel=\"nofollow noreferrer\">devcenter.heroku.com/articles/limits#git-repos</a>"}, {"owner": {"reputation": 23981, "user_id": 2813589, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/9axBj.jpg?s=128&g=1", "display_name": "\u30a2\u30ec\u30c3\u30af\u30b9", "link": "https://stackoverflow.com/users/2813589/%e3%82%a2%e3%83%ac%e3%83%83%e3%82%af%e3%82%b9"}, "edited": false, "score": 0, "creation_date": 1435146368, "post_id": 31024735, "comment_id": 50075920, "body": "I mean the free heroku account."}, {"owner": {"reputation": 23981, "user_id": 2813589, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/9axBj.jpg?s=128&g=1", "display_name": "\u30a2\u30ec\u30c3\u30af\u30b9", "link": "https://stackoverflow.com/users/2813589/%e3%82%a2%e3%83%ac%e3%83%83%e3%82%af%e3%82%b9"}, "edited": false, "score": 0, "creation_date": 1435146445, "post_id": 31024735, "comment_id": 50075974, "body": "The assets in my_app/assets are not big, but they are big <b>all together and there&#39;re lots of them</b>."}, {"owner": {"reputation": 2484, "user_id": 772450, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3fb3c2b290d7cc1e681aef4fc2bbeda?s=128&d=identicon&r=PG", "display_name": "arturhoo", "link": "https://stackoverflow.com/users/772450/arturhoo"}, "reply_to_user": {"reputation": 23981, "user_id": 2813589, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/9axBj.jpg?s=128&g=1", "display_name": "\u30a2\u30ec\u30c3\u30af\u30b9", "link": "https://stackoverflow.com/users/2813589/%e3%82%a2%e3%83%ac%e3%83%83%e3%82%af%e3%82%b9"}, "edited": false, "score": 0, "creation_date": 1435146563, "post_id": 31024735, "comment_id": 50076043, "body": "Do you need to version control them? If not, simply upload them to S3 and remove them from the repo - <a href=\"https://rtyley.github.io/bfg-repo-cleaner/\" rel=\"nofollow noreferrer\">rtyley.github.io/bfg-repo-cleaner</a> can help you on this task."}, {"owner": {"reputation": 23981, "user_id": 2813589, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/9axBj.jpg?s=128&g=1", "display_name": "\u30a2\u30ec\u30c3\u30af\u30b9", "link": "https://stackoverflow.com/users/2813589/%e3%82%a2%e3%83%ac%e3%83%83%e3%82%af%e3%82%b9"}, "edited": false, "score": 0, "creation_date": 1435146919, "post_id": 31024735, "comment_id": 50076291, "body": "I think I do need. Maybe I should them to gitignore? Although, I&#39;ve never seen anyone did that."}, {"owner": {"reputation": 23981, "user_id": 2813589, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/9axBj.jpg?s=128&g=1", "display_name": "\u30a2\u30ec\u30c3\u30af\u30b9", "link": "https://stackoverflow.com/users/2813589/%e3%82%a2%e3%83%ac%e3%83%83%e3%82%af%e3%82%b9"}, "edited": false, "score": 0, "creation_date": 1435147054, "post_id": 31024735, "comment_id": 50076405, "body": "by the way, why do you think that <b>When you create or setup a Rails App, the path where the precompiled assets live is ignored by git.</b> ?"}], "tags": [], "owner": {"reputation": 2484, "user_id": 772450, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3fb3c2b290d7cc1e681aef4fc2bbeda?s=128&d=identicon&r=PG", "display_name": "arturhoo", "link": "https://stackoverflow.com/users/772450/arturhoo"}, "is_accepted": false, "score": 1, "last_activity_date": 1435143462, "creation_date": 1435143462, "answer_id": 31024735, "question_id": 31024494, "link": "https://stackoverflow.com/questions/31024494/deploying-a-rails-app-at-heroku-with-its-assets-being-located-at-amazon-s3/31024735#31024735", "title": "Deploying a Rails app at heroku with its assets being located at Amazon S3", "body": "<p>You will need to change the <code>config.action_controller.asset_host</code> option on the Rails Configuration. Take a look at <a href=\"http://guides.rubyonrails.org/configuring.html#rails-general-configuration\" rel=\"nofollow\">http://guides.rubyonrails.org/configuring.html#rails-general-configuration</a></p>\n\n<p>You will indeed need to precompile the assets and sync them to S3. Remember to use <code>RAILS_ENV=production</code>. A good place to look at and then replicate manually would be in the <a href=\"https://github.com/rumblelabs/asset_sync\" rel=\"nofollow\"><code>asset_sync</code> gem</a>.</p>\n"}], "owner": {"reputation": 23981, "user_id": 2813589, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/9axBj.jpg?s=128&g=1", "display_name": "\u30a2\u30ec\u30c3\u30af\u30b9", "link": "https://stackoverflow.com/users/2813589/%e3%82%a2%e3%83%ac%e3%83%83%e3%82%af%e3%82%b9"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 93, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1435143462, "creation_date": 1435142738, "question_id": 31024494, "link": "https://stackoverflow.com/questions/31024494/deploying-a-rails-app-at-heroku-with-its-assets-being-located-at-amazon-s3", "title": "Deploying a Rails app at heroku with its assets being located at Amazon S3", "body": "<p>I'm trying to make a Rails app server its assets at S3. I'm not using any gems because want to do it manually to better understand the process. My questions regarding serving the <strong>static</strong> assets are:</p>\n\n<ol>\n<li>Which assets should I upload to my S3 bucket: from my_app/assets or from  my_app/public/assets?</li>\n<li>If the second option, it means I have to precompile them first, right? And then  upload the whole folder my_app/public (or my_app/public/assets?) ?</li>\n<li>Since right now I'm deploying the website at heroku and the max size of the repo at heroku is 300Mb and the size of my assets is much bigger, <strong>how and should I at all</strong> make the app somehow \"understand\" that its assets are located at S3 so that when I say \"git push heroku master\" it won't upload all them  from its <code>my_app/assets</code> or <code>my_app/public/ folder</code>?</li>\n</ol>\n"}, {"tags": ["ruby", "api", "voltrb"], "comments": [{"owner": {"reputation": 350, "user_id": 199205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/818368a59c6201cb1bf1dbe3235d6310?s=128&d=identicon&r=PG", "display_name": "Jason Southwell", "link": "https://stackoverflow.com/users/199205/jason-southwell"}, "edited": false, "score": 0, "creation_date": 1435151225, "post_id": 31024435, "comment_id": 50079371, "body": "Is your api using Mongo for data storage?"}, {"owner": {"reputation": 236, "user_id": 696610, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/06eb37722f46e1627ff2bdaf6a02287a?s=128&d=identicon&r=PG", "display_name": "Travis Todd", "link": "https://stackoverflow.com/users/696610/travis-todd"}, "reply_to_user": {"reputation": 350, "user_id": 199205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/818368a59c6201cb1bf1dbe3235d6310?s=128&d=identicon&r=PG", "display_name": "Jason Southwell", "link": "https://stackoverflow.com/users/199205/jason-southwell"}, "edited": false, "score": 0, "creation_date": 1435152082, "post_id": 31024435, "comment_id": 50080034, "body": "Yes it is. But I&#39;d prefer to keep the databases seperate"}, {"owner": {"reputation": 350, "user_id": 199205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/818368a59c6201cb1bf1dbe3235d6310?s=128&d=identicon&r=PG", "display_name": "Jason Southwell", "link": "https://stackoverflow.com/users/199205/jason-southwell"}, "edited": false, "score": 0, "creation_date": 1435166524, "post_id": 31024435, "comment_id": 50090576, "body": "I don&#39;t know how to use multiple stores, but you can simply declare models in your volt app that match the collections in your mongo db and it just works.  Then declare Admin* models for your volt specific store."}], "answers": [{"comments": [{"owner": {"reputation": 236, "user_id": 696610, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/06eb37722f46e1627ff2bdaf6a02287a?s=128&d=identicon&r=PG", "display_name": "Travis Todd", "link": "https://stackoverflow.com/users/696610/travis-todd"}, "edited": false, "score": 0, "creation_date": 1435241404, "post_id": 31033426, "comment_id": 50126589, "body": "Thanks Ryan. I looked through the Tasks documentation but am still a bit unclear on when/how to fire them."}, {"owner": {"reputation": 876, "user_id": 368602, "user_type": "registered", "profile_image": "https://graph.facebook.com/144900684/picture?type=large", "display_name": "Ryan", "link": "https://stackoverflow.com/users/368602/ryan"}, "reply_to_user": {"reputation": 236, "user_id": 696610, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/06eb37722f46e1627ff2bdaf6a02287a?s=128&d=identicon&r=PG", "display_name": "Travis Todd", "link": "https://stackoverflow.com/users/696610/travis-todd"}, "edited": false, "score": 0, "creation_date": 1435249160, "post_id": 31033426, "comment_id": 50132586, "body": "So this won&#39;t help you on the updating side of things, but a common thing I do with external API&#39;s is to call a task when a page action happens (<a href=\"http://docs.voltframework.com/en/docs/callbacks_and_actions.html\" rel=\"nofollow noreferrer\">docs.voltframework.com/en/docs/callbacks_and_actions.html</a>), then take the results of the task and place it into the <code>page</code> collection.  Then from the view/controller I can access the data."}], "tags": [], "owner": {"reputation": 876, "user_id": 368602, "user_type": "registered", "profile_image": "https://graph.facebook.com/144900684/picture?type=large", "display_name": "Ryan", "link": "https://stackoverflow.com/users/368602/ryan"}, "is_accepted": false, "score": 3, "last_activity_date": 1435167838, "creation_date": 1435167838, "answer_id": 31033426, "question_id": 31024435, "link": "https://stackoverflow.com/questions/31024435/syncing-with-an-external-api-in-volt-ruby-framework/31033426#31033426", "title": "Syncing with an External API in Volt Ruby Framework", "body": "<p>So this is a fairly common thing, so I think long term the solution will be to support multiple stores in an app and have a REST data provider that you can extend.  However that might be a while before that's ready.  In the mean time, you can always load and save data via tasks.  (I realize its not ideal, but it will work right now)  Let me know if you need more info on using tasks to load and save.  I'll add the REST data provider to the TODO list.</p>\n"}], "owner": {"reputation": 236, "user_id": 696610, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/06eb37722f46e1627ff2bdaf6a02287a?s=128&d=identicon&r=PG", "display_name": "Travis Todd", "link": "https://stackoverflow.com/users/696610/travis-todd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 149, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1435167838, "creation_date": 1435142560, "question_id": 31024435, "link": "https://stackoverflow.com/questions/31024435/syncing-with-an-external-api-in-volt-ruby-framework", "title": "Syncing with an External API in Volt Ruby Framework", "body": "<p>I'm looking into <a href=\"http://voltframework.com\" rel=\"nofollow\">Volt</a> as an option for building an Admin interface to our REST API. The API is a separate application. I would like the Admin application to persist data to the API but also store it's own data that is irrelevant to the API (such as admin users and notes on the API data objects) locally. </p>\n\n<p>Is there a way to sync each local change in the Admin with our remote API, like a callback, for example? Or do I need to wait until the Data Provider API is ready as mentioned in the <a href=\"http://blog.voltframework.com/post/121128931859/volt-0-9-3-released-with-support-for-clustering\" rel=\"nofollow\">most recent Volt blog post</a> (as of writing)?</p>\n"}, {"tags": ["ruby", "gem"], "comments": [{"owner": {"reputation": 3412, "user_id": 3344236, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003962689676/picture?type=large", "display_name": "ares777", "link": "https://stackoverflow.com/users/3344236/ares777"}, "edited": false, "score": 1, "creation_date": 1435142635, "post_id": 31024376, "comment_id": 50073451, "body": "--platform=ruby -- --with-sqlite3-dir=C:/programs/sqlite --with-sqlite3-include=C:/programs/sqlite are you sure C:/programs/sqlite exists? Then try withour double -- --"}, {"owner": {"reputation": 1081, "user_id": 1688203, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/AWeAc.png?s=128&g=1", "display_name": "retif", "link": "https://stackoverflow.com/users/1688203/retif"}, "reply_to_user": {"reputation": 3412, "user_id": 3344236, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003962689676/picture?type=large", "display_name": "ares777", "link": "https://stackoverflow.com/users/3344236/ares777"}, "edited": false, "score": 0, "creation_date": 1435142840, "post_id": 31024376, "comment_id": 50073603, "body": "@user3344236 it&#39;s not about <code>sqlite</code>, I get error <code>invalid option</code> for <i>any gem</i> install with specific options. But I tried your options - same result."}, {"owner": {"reputation": 3412, "user_id": 3344236, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003962689676/picture?type=large", "display_name": "ares777", "link": "https://stackoverflow.com/users/3344236/ares777"}, "edited": false, "score": 0, "creation_date": 1435142959, "post_id": 31024376, "comment_id": 50073677, "body": "I use this kind of -- --:  gem install sqlite3 -- --with-sqlite3-lib=c:/"}, {"owner": {"reputation": 1081, "user_id": 1688203, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/AWeAc.png?s=128&g=1", "display_name": "retif", "link": "https://stackoverflow.com/users/1688203/retif"}, "reply_to_user": {"reputation": 3412, "user_id": 3344236, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003962689676/picture?type=large", "display_name": "ares777", "link": "https://stackoverflow.com/users/3344236/ares777"}, "edited": false, "score": 0, "creation_date": 1435143315, "post_id": 31024376, "comment_id": 50073888, "body": "@user3344236 it doesn&#39;t matter, error is the same for any other gem with any other options after <code>--</code>"}, {"owner": {"reputation": 3412, "user_id": 3344236, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003962689676/picture?type=large", "display_name": "ares777", "link": "https://stackoverflow.com/users/3344236/ares777"}, "edited": false, "score": 0, "creation_date": 1435143645, "post_id": 31024376, "comment_id": 50074126, "body": "I don&#39;t mind to ask anyway: what versions have you for gem,  ruby, rails (-v) ? Have multiple installs, old one present? for me it sounds like mismatching versions. And how you manage to put dependencies at work offline?"}, {"owner": {"reputation": 1081, "user_id": 1688203, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/AWeAc.png?s=128&g=1", "display_name": "retif", "link": "https://stackoverflow.com/users/1688203/retif"}, "reply_to_user": {"reputation": 3412, "user_id": 3344236, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003962689676/picture?type=large", "display_name": "ares777", "link": "https://stackoverflow.com/users/3344236/ares777"}, "edited": false, "score": 0, "creation_date": 1435143949, "post_id": 31024376, "comment_id": 50074315, "body": "@user3344236 yeah, forgot to mention this. Updated the post."}, {"owner": {"reputation": 1081, "user_id": 1688203, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/AWeAc.png?s=128&g=1", "display_name": "retif", "link": "https://stackoverflow.com/users/1688203/retif"}, "reply_to_user": {"reputation": 3412, "user_id": 3344236, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003962689676/picture?type=large", "display_name": "ares777", "link": "https://stackoverflow.com/users/3344236/ares777"}, "edited": false, "score": 0, "creation_date": 1435144906, "post_id": 31024376, "comment_id": 50074980, "body": "@user3344236 no other installs of Ruby, this is the one and only."}, {"owner": {"reputation": 2504, "user_id": 3729369, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/FYV4M.png?s=128&g=1", "display_name": "simonwo", "link": "https://stackoverflow.com/users/3729369/simonwo"}, "edited": false, "score": 1, "creation_date": 1435146933, "post_id": 31024376, "comment_id": 50076301, "body": "Try putting everything after the <code>--</code> in quotes, that has been necessary for me in the past."}, {"owner": {"reputation": 1081, "user_id": 1688203, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/AWeAc.png?s=128&g=1", "display_name": "retif", "link": "https://stackoverflow.com/users/1688203/retif"}, "reply_to_user": {"reputation": 2504, "user_id": 3729369, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/FYV4M.png?s=128&g=1", "display_name": "simonwo", "link": "https://stackoverflow.com/users/3729369/simonwo"}, "edited": false, "score": 0, "creation_date": 1435147200, "post_id": 31024376, "comment_id": 50076514, "body": "@simonwo same result, unfortunately. I also removed <code>--</code> but that did not help as well."}], "answers": [{"tags": [], "owner": {"reputation": 1081, "user_id": 1688203, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/AWeAc.png?s=128&g=1", "display_name": "retif", "link": "https://stackoverflow.com/users/1688203/retif"}, "is_accepted": true, "score": 0, "last_activity_date": 1435218679, "last_edit_date": 1495542118, "creation_date": 1435218679, "answer_id": 31044351, "question_id": 31024376, "link": "https://stackoverflow.com/questions/31024376/ruby-install-gem-offline-in-windows/31044351#31044351", "title": "Ruby install gem offline in Windows", "body": "<p>Got the reason. I ran all commands in Windows <code>PowerShell</code>.</p>\n\n<p>Now I tried to do it in usual <code>cmd.exe</code> - and it just worked.</p>\n\n<p>Just for a case here is how I installed <code>sqlite3.gem</code>: followed instructions from <a href=\"https://stackoverflow.com/a/16023062\">https://stackoverflow.com/a/16023062</a> and executed command:</p>\n\n<pre><code>gem install sqlite3-1.3.10.gem --local --platform=ruby -- '--with-sqlite3-dir=\"c:/programs/sqlite\" --with-sqlite3-lib=\"c:/programs/sqlite/.libs\" --with-sqlite3-include=\"c:/programs/sqlite\"'\n</code></pre>\n\n<p>Thank you for comments, they helped to correct the command.</p>\n"}], "owner": {"reputation": 1081, "user_id": 1688203, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/AWeAc.png?s=128&g=1", "display_name": "retif", "link": "https://stackoverflow.com/users/1688203/retif"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1128, "favorite_count": 0, "accepted_answer_id": 31044351, "answer_count": 1, "score": 0, "last_activity_date": 1435218679, "creation_date": 1435142313, "last_edit_date": 1435143870, "question_id": 31024376, "link": "https://stackoverflow.com/questions/31024376/ruby-install-gem-offline-in-windows", "title": "Ruby install gem offline in Windows", "body": "<p>I need to install some Ruby gems in Windows in the offline-mode (without internet). I have gem files downloaded from the other PC.</p>\n\n<p>As long as the gem does not require specific options (with <code>--</code>), I just execute <code>gem install somegem --local</code> and everything is fine.</p>\n\n<p>But if the gem does require those options, there is a trouble. For example, I want to install <code>sqlite3-1.3.10.gem</code>:</p>\n\n<pre><code>gem install sqlite3 --local -- --with-sqlite3-dir=\"c:\\programs\\sqlite\"\n</code></pre>\n\n<p>This returns me an error:</p>\n\n<pre><code>ERROR:  While executing gem ... (OptionParser::InvalidOption)\ninvalid option: --with-sqlite3-dir=c:\\programs\\sqlite\n</code></pre>\n\n<p>What is wrong?</p>\n\n<ul>\n<li>ruby 2.2.2p95 (2015-04-13 revision 50295) [x64-mingw32]</li>\n<li>Rails 4.2.2</li>\n</ul>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "activerecord", "orm"], "answers": [{"comments": [{"owner": {"reputation": 1824, "user_id": 935394, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/452f4ef4bec908313c9df902632ab7bb?s=128&d=identicon&r=PG", "display_name": "Max Rose-Collins", "link": "https://stackoverflow.com/users/935394/max-rose-collins"}, "edited": false, "score": 0, "creation_date": 1435144804, "post_id": 31024993, "comment_id": 50074897, "body": "Ah okay! I understand now."}], "tags": [], "owner": {"reputation": 8378, "user_id": 2076787, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2bfe965ab5ef94a0568bc61c36b46d4c?s=128&d=identicon&r=PG", "display_name": "D-side", "link": "https://stackoverflow.com/users/2076787/d-side"}, "is_accepted": true, "score": 2, "last_activity_date": 1435144274, "last_edit_date": 1592644375, "creation_date": 1435144274, "answer_id": 31024993, "question_id": 31024253, "link": "https://stackoverflow.com/questions/31024253/rails-has-and-belongs-to-many-only-works-one-way/31024993#31024993", "title": "Rails has_and_belongs_to_many only works one way", "body": "<h3>Associations are defined for <strong>instances</strong>.</h3>\n<p><code>Keyword.groups</code> indeed does not exist (as a <strong>class method</strong>).</p>\n<p>However, <code>Keyword#groups</code>, as in <code>Keyword.first.groups</code>, does work. The reason for that is that <code>Keyword.first</code> returns an instance of <code>Keyword</code> class, which <code>Keyword</code> class itself is not.</p>\n"}, {"tags": [], "owner": {"reputation": 16234, "user_id": 2202702, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/lTGWe.jpg?s=128&g=1", "display_name": "Arslan Ali", "link": "https://stackoverflow.com/users/2202702/arslan-ali"}, "is_accepted": false, "score": 0, "last_activity_date": 1435145318, "last_edit_date": 1435145318, "creation_date": 1435144960, "answer_id": 31025203, "question_id": 31024253, "link": "https://stackoverflow.com/questions/31024253/rails-has-and-belongs-to-many-only-works-one-way/31025203#31025203", "title": "Rails has_and_belongs_to_many only works one way", "body": "<p>When you do <code>Keyword.group(1)</code>, it doesn't do what you think it is doing. It just finds all the keywords and groups them by 1.</p>\n\n<pre><code>SELECT * \"keywords\".* FROM \"keywords\" GROUP BY 1\n</code></pre>\n\n<p>Indeed, you can't actually call <em>these kind of method</em> on Class level, associations are accessed through instance level. And as you have defined them <code>has_and_belongs_to_many</code>, you will have to be plural about them, not single.</p>\n\n<pre><code>keyword = Keyword.first\nkeyword.groups # Not 'group', and on instance level\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 16234, "user_id": 2202702, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/lTGWe.jpg?s=128&g=1", "display_name": "Arslan Ali", "link": "https://stackoverflow.com/users/2202702/arslan-ali"}, "edited": false, "score": 1, "creation_date": 1435145236, "post_id": 31025207, "comment_id": 50075164, "body": "When rails is giving us magic, why we are writing it ourselves?"}, {"owner": {"reputation": 8378, "user_id": 2076787, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2bfe965ab5ef94a0568bc61c36b46d4c?s=128&d=identicon&r=PG", "display_name": "D-side", "link": "https://stackoverflow.com/users/2076787/d-side"}, "reply_to_user": {"reputation": 16234, "user_id": 2202702, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/lTGWe.jpg?s=128&g=1", "display_name": "Arslan Ali", "link": "https://stackoverflow.com/users/2202702/arslan-ali"}, "edited": false, "score": 1, "creation_date": 1435186995, "post_id": 31025207, "comment_id": 50101034, "body": "@ArslanAli there is magic, then there is control. Perfection is somewhere in between."}], "tags": [], "owner": {"reputation": 2376, "user_id": 3311657, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9d1d7b5444ea5fbb3b5e0ecb8303a88e?s=128&d=identicon&r=PG", "display_name": "steve klein", "link": "https://stackoverflow.com/users/3311657/steve-klein"}, "is_accepted": false, "score": 0, "last_activity_date": 1435144980, "creation_date": 1435144980, "answer_id": 31025207, "question_id": 31024253, "link": "https://stackoverflow.com/questions/31024253/rails-has-and-belongs-to-many-only-works-one-way/31025207#31025207", "title": "Rails has_and_belongs_to_many only works one way", "body": "<p>A better way to implement a many to many relationship is with the has_many :through idiom:</p>\n\n<pre><code>class Keyword\n  has_many :keyword_groups\n  has_many :groups, :through =&gt; :keyword_groups\n\nclass Group\n  has_many :keyword_groups\n  has_many :keywords, :through =&gt; :keyword_groups\n\nclass KeywordGroup\n  belongs_to :keyword\n  belongs_to :group\n</code></pre>\n\n<p>This will give you flexibility in the future if you need to extend your join model.</p>\n"}], "owner": {"reputation": 1824, "user_id": 935394, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/452f4ef4bec908313c9df902632ab7bb?s=128&d=identicon&r=PG", "display_name": "Max Rose-Collins", "link": "https://stackoverflow.com/users/935394/max-rose-collins"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 169, "favorite_count": 0, "accepted_answer_id": 31024993, "answer_count": 3, "score": 1, "last_activity_date": 1435145318, "creation_date": 1435141897, "last_edit_date": 1435143933, "question_id": 31024253, "link": "https://stackoverflow.com/questions/31024253/rails-has-and-belongs-to-many-only-works-one-way", "title": "Rails has_and_belongs_to_many only works one way", "body": "<p>I am trying to create a many to many relationship between my <code>groups</code> table and my <code>keywords</code> table.</p>\n\n<p>When I am in my controller I cant do <code>Keyword.groups</code> or <code>Group.keywords</code> as I get a no method error. I have checked <code>Group.methods</code> and  I only have these related methods</p>\n\n<pre><code>  \"before_add_for_groups_keywords\",\n  \"before_add_for_groups_keywords?\",\n  \"before_add_for_groups_keywords=\",\n  \"after_add_for_groups_keywords\",\n  \"after_add_for_groups_keywords?\",\n  \"after_add_for_groups_keywords=\",\n  \"before_remove_for_groups_keywords\",\n  \"before_remove_for_groups_keywords?\",\n  \"before_remove_for_groups_keywords=\",\n  \"after_remove_for_groups_keywords\",\n  \"after_remove_for_groups_keywords?\",\n  \"after_remove_for_groups_keywords=\",\n  \"before_add_for_keywords\",\n  \"before_add_for_keywords?\",\n  \"before_add_for_keywords=\",\n  \"after_add_for_keywords\",\n  \"after_add_for_keywords?\",\n  \"after_add_for_keywords=\",\n  \"before_remove_for_keywords\",\n  \"before_remove_for_keywords?\",\n  \"before_remove_for_keywords=\",\n  \"after_remove_for_keywords\",\n  \"after_remove_for_keywords?\",\n  \"after_remove_for_keywords=\",\n</code></pre>\n\n<p>Where as <code>Keyword.methods</code> gives me these</p>\n\n<pre><code>  \"before_add_for_keywords_groups\",\n  \"before_add_for_keywords_groups?\",\n  \"before_add_for_keywords_groups=\",\n  \"after_add_for_keywords_groups\",\n  \"after_add_for_keywords_groups?\",\n  \"after_add_for_keywords_groups=\",\n  \"before_remove_for_keywords_groups\",\n  \"before_remove_for_keywords_groups?\",\n  \"before_remove_for_keywords_groups=\",\n  \"after_remove_for_keywords_groups\",\n  \"after_remove_for_keywords_groups?\",\n  \"after_remove_for_keywords_groups=\",\n  \"before_add_for_groups\",\n  \"before_add_for_groups?\",\n  \"before_add_for_groups=\",\n  \"after_add_for_groups\",\n  \"after_add_for_groups?\",\n  \"after_add_for_groups=\",\n  \"before_remove_for_groups\",\n  \"before_remove_for_groups?\",\n  \"before_remove_for_groups=\",\n  \"after_remove_for_groups\",\n  \"after_remove_for_groups?\",\n  \"after_remove_for_groups=\",\n</code></pre>\n\n<p>My models</p>\n\n<p><code>has_and_belongs_to_many :keywords</code></p>\n\n<p><code>has_and_belongs_to_many :groups</code></p>\n\n<p>My db schema is the following </p>\n\n<pre><code>  create_table \"groups\", force: :cascade do |t|\n    t.integer  \"member_id\"\n    t.string   \"name\"\n    t.datetime \"created_at\", null: false\n    t.datetime \"updated_at\", null: false\n\n  end\n\n  add_index \"groups\", [\"member_id\"], name: \"index_groups_on_member_id\", using: :btree\n\n  create_table \"groups_keywords\", id: false, force: :cascade do |t|\n    t.integer \"group_id\"\n    t.integer \"keyword_id\"\n  end\n\n  add_index \"groups_keywords\", [\"group_id\", \"keyword_id\"], name: \"index_groups_keywords_on_group_id_and_keyword_id\", unique: true, using: :btree\n\n  create_table \"keywords\", force: :cascade do |t|\n    t.string   \"keyword\"\n    t.string   \"keyword_hash\"\n    t.datetime \"checked_at\"\n    t.datetime \"created_at\",              null: false\n    t.datetime \"updated_at\",              null: false\n  end\n</code></pre>\n"}, {"tags": ["ruby", "windows", "cygwin", "pik"], "comments": [{"owner": {"reputation": 4288, "user_id": 527152, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c784b2e1c3fb28d8bad8f50ca0282b4?s=128&d=identicon&r=PG", "display_name": "Azolo", "link": "https://stackoverflow.com/users/527152/azolo"}, "edited": false, "score": 0, "creation_date": 1435155898, "post_id": 31023862, "comment_id": 50083067, "body": "Have you tried using a <code>&#47;</code>? <code>pik_install C:&#47;cygwin64</code> or just <code>pik_install &#47;cygwin64</code>"}, {"owner": {"reputation": 111, "user_id": 4908437, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24c8807cfd4d183ee25fca59c6ee1bfe?s=128&d=identicon&r=PG", "display_name": "inakan", "link": "https://stackoverflow.com/users/4908437/inakan"}, "reply_to_user": {"reputation": 4288, "user_id": 527152, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c784b2e1c3fb28d8bad8f50ca0282b4?s=128&d=identicon&r=PG", "display_name": "Azolo", "link": "https://stackoverflow.com/users/527152/azolo"}, "edited": false, "score": 0, "creation_date": 1435224775, "post_id": 31023862, "comment_id": 50114926, "body": "Yes I have, they deliver the same result as above."}], "owner": {"reputation": 111, "user_id": 4908437, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24c8807cfd4d183ee25fca59c6ee1bfe?s=128&d=identicon&r=PG", "display_name": "inakan", "link": "https://stackoverflow.com/users/4908437/inakan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 43, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1435167632, "creation_date": 1435140846, "last_edit_date": 1435167632, "question_id": 31023862, "link": "https://stackoverflow.com/questions/31023862/installing-pik-in-windows-7-path-variable-naming-error", "title": "Installing Pik in Windows 7 PATH variable naming error", "body": "<p>On installation of Pik, it seems that the directory naming conventions utilized in the program are erroneous, as can be seen below where <code>C:</code> is not reconciled as <code>C:\\</code> for the install directory. I suspect this my be the culprit. My PATH definitely does contain <code>C:\\cygwin64</code> as a variable, but it isn't recognized by Pik.</p>\n\n<p>I have tried altering the name of the directory as <code>C:\\\\cygwin64</code> during installation as a workaround and other similar variations just for the sake of trial and error, but to no avail. Interestingly, the <a href=\"https://github.com/vertiginous/pik/blob/master/bin/pik_install\" rel=\"nofollow\">Github directory</a> shows a similar double backslash naming convention for this component, but I'm not sure how this might solve the problem.</p>\n\n<p>The version of Pik I am using is 0.2.8.</p>\n\n<pre><code>$ pik_install C:\\cygwin64\nThank you for using pik.\n\nmkdir -p C:cygwin64\nmkdir -p C:\\Users\\Adam/.pik\nInstalling to C:cygwin64\n\ncp /home/Name/.gem/ruby/gems/pik-0.2.8/tools/pik_runner.exe C:cygwin64\ncp /home/Name/.gem/ruby/gems/pik-0.2.8/tools/pik.bat C:cygwin64\ncp /home/Name/.gem/ruby/gems/pik-0.2.8/tools/pik.ps1 C:cygwin64\n\ncreating C:\\Users\\Name/.pik/.pikrc\n\npik is installed\n\nThe directory you installed to is not in the sytem path.\nC:cygwin64\n\nYou will need to add it.\n\n\nif you want to use pik with git bash, add the following line to your ~/.bashrc:\n\n  [[ -s $USERPROFILE/.pik/.pikrc ]] &amp;&amp; source $USERPROFILE/.pik/.pikrc\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord"], "comments": [{"owner": {"reputation": 3138, "user_id": 1448966, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/aNPnb.jpg?s=128&g=1", "display_name": "A Fader Darkly", "link": "https://stackoverflow.com/users/1448966/a-fader-darkly"}, "edited": false, "score": 0, "creation_date": 1435142392, "post_id": 31023788, "comment_id": 50073276, "body": "I believe you need to use the numeric values of your enum in <code>where</code> queries. <code>Task.statuses(&quot;awaiting&quot;)</code> IIRC. I may be wrong though - I jumped on Rails 4 before enums were available and got locked in by RailsAdmin, so I don&#39;t have direct experience."}, {"owner": {"reputation": 3138, "user_id": 1448966, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/aNPnb.jpg?s=128&g=1", "display_name": "A Fader Darkly", "link": "https://stackoverflow.com/users/1448966/a-fader-darkly"}, "edited": false, "score": 0, "creation_date": 1435142543, "post_id": 31023788, "comment_id": 50073381, "body": "Can you also add your database schema for these objects?"}, {"owner": {"reputation": 11760, "user_id": 2926641, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/962e08aff17872bda3f89a9ee6849ab3?s=128&d=identicon&r=PG", "display_name": "asiniy", "link": "https://stackoverflow.com/users/2926641/asiniy"}, "reply_to_user": {"reputation": 3138, "user_id": 1448966, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/aNPnb.jpg?s=128&g=1", "display_name": "A Fader Darkly", "link": "https://stackoverflow.com/users/1448966/a-fader-darkly"}, "edited": false, "score": 0, "creation_date": 1435143127, "post_id": 31023788, "comment_id": 50073777, "body": "I&#39;ve add my <code>db&#47;schema.rb</code> code. Also, I&#39;ve updated my models (I forgot to write about inverse of)"}], "answers": [{"comments": [{"owner": {"reputation": 3853, "user_id": 18197, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e68162a00c688d604d5514e0b719b90e?s=128&d=identicon&r=PG", "display_name": "Pavling", "link": "https://stackoverflow.com/users/18197/pavling"}, "edited": false, "score": 0, "creation_date": 1435156251, "post_id": 31025606, "comment_id": 50083377, "body": "I&#39;d suggest <code>.joins</code> rather that <code>.includes</code> - if you&#39;re interested in the query join but not on a preload"}, {"owner": {"reputation": 8081, "user_id": 746882, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65377dfe5545065f755e7cf9d026a844?s=128&d=identicon&r=PG", "display_name": "Frost", "link": "https://stackoverflow.com/users/746882/frost"}, "reply_to_user": {"reputation": 3853, "user_id": 18197, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e68162a00c688d604d5514e0b719b90e?s=128&d=identicon&r=PG", "display_name": "Pavling", "link": "https://stackoverflow.com/users/18197/pavling"}, "edited": false, "score": 0, "creation_date": 1435156329, "post_id": 31025606, "comment_id": 50083448, "body": "That is a very good point. I actually mention &quot;include or join&quot; in my answer, so I should probably clarify that you can use <code>.joins</code> instead, and why that should be considered. Thank you."}, {"owner": {"reputation": 11760, "user_id": 2926641, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/962e08aff17872bda3f89a9ee6849ab3?s=128&d=identicon&r=PG", "display_name": "asiniy", "link": "https://stackoverflow.com/users/2926641/asiniy"}, "edited": false, "score": 0, "creation_date": 1435156864, "post_id": 31025606, "comment_id": 50083858, "body": "Just copy pasted your answer. <code>ActiveRecord::StatementInvalid: PG::UndefinedColumn: ERROR:  column taskables.tasks does not exist</code>"}, {"owner": {"reputation": 8081, "user_id": 746882, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65377dfe5545065f755e7cf9d026a844?s=128&d=identicon&r=PG", "display_name": "Frost", "link": "https://stackoverflow.com/users/746882/frost"}, "edited": false, "score": 1, "creation_date": 1435157486, "post_id": 31025606, "comment_id": 50084299, "body": "Ah, of course. Have a look at @Glupo&#39;s answer, in that case, or simply do <code>Supply.joins(:taskable: :task).where(tasks: { status: :awaiting, :starting] })</code>. That might work better."}], "tags": [], "owner": {"reputation": 8081, "user_id": 746882, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65377dfe5545065f755e7cf9d026a844?s=128&d=identicon&r=PG", "display_name": "Frost", "link": "https://stackoverflow.com/users/746882/frost"}, "is_accepted": false, "score": 1, "last_activity_date": 1435156471, "last_edit_date": 1435156471, "creation_date": 1435146172, "answer_id": 31025606, "question_id": 31023788, "link": "https://stackoverflow.com/questions/31023788/rails-cant-understand-association-when-querying-using-activerecord/31025606#31025606", "title": "Rails can&#39;t understand association when querying using activerecord", "body": "<p>You are getting the <code>PG::UndefinedTable</code> error because when querying on where-clauses on associations, you need to specify the table names, and not the association name.</p>\n\n<p>This might give you a better result:</p>\n\n<pre><code>Supply.where(\n  taskables: {\n    tasks: { \n      status: [:awaiting, :starting]\n    }\n  }\n)\n</code></pre>\n\n<p>You might also have to include or join in the actual associations, depending on whether you only want the join query, or if you are looking to preload the associations. Use <code>.includes</code> for preloading, and <code>.joins</code> for just the join query.</p>\n\n<pre><code>Supply.includes(taskable: :task).where(...)\n</code></pre>\n\n<p>or</p>\n\n<pre><code>Supply.joins(taskable: :task).where(...)\n</code></pre>\n\n<p>EDIT: thanks @Pavling for mentioning the difference between <code>.joins</code> and <code>.includes</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 11760, "user_id": 2926641, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/962e08aff17872bda3f89a9ee6849ab3?s=128&d=identicon&r=PG", "display_name": "asiniy", "link": "https://stackoverflow.com/users/2926641/asiniy"}, "edited": false, "score": 0, "creation_date": 1435147775, "post_id": 31026135, "comment_id": 50076884, "body": "I&#39;m rails <code>4.2</code> user. Should I pass numeric values?"}, {"owner": {"reputation": 489, "user_id": 1303501, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d44af6531fbd70f0c0df5dce8b83f72?s=128&d=identicon&r=PG", "display_name": "Glupo", "link": "https://stackoverflow.com/users/1303501/glupo"}, "reply_to_user": {"reputation": 11760, "user_id": 2926641, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/962e08aff17872bda3f89a9ee6849ab3?s=128&d=identicon&r=PG", "display_name": "asiniy", "link": "https://stackoverflow.com/users/2926641/asiniy"}, "edited": false, "score": 0, "creation_date": 1435148265, "post_id": 31026135, "comment_id": 50077215, "body": "Then it should be ok to use names for enum. Still you can easily check it by looking at <code>Task.where(status: :awaiting).to_sql</code>. If it will have <code>&quot;status&quot; = NULL</code> in the end, you should pass numeric values :) As I can see this ability was added in 4.2.3 version and 4.2.2 don&#39;t have it <a href=\"http://api.rubyonrails.org/v4.2.2/classes/ActiveRecord/Enum.html\" rel=\"nofollow noreferrer\">api.rubyonrails.org/v4.2.2/classes/ActiveRecord/Enum.html</a>"}, {"owner": {"reputation": 11760, "user_id": 2926641, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/962e08aff17872bda3f89a9ee6849ab3?s=128&d=identicon&r=PG", "display_name": "asiniy", "link": "https://stackoverflow.com/users/2926641/asiniy"}, "edited": false, "score": 0, "creation_date": 1435300425, "post_id": 31026135, "comment_id": 50152489, "body": "where are you? Please approve my edit, I&#39;ll accept your answer"}, {"owner": {"reputation": 489, "user_id": 1303501, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d44af6531fbd70f0c0df5dce8b83f72?s=128&d=identicon&r=PG", "display_name": "Glupo", "link": "https://stackoverflow.com/users/1303501/glupo"}, "reply_to_user": {"reputation": 11760, "user_id": 2926641, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/962e08aff17872bda3f89a9ee6849ab3?s=128&d=identicon&r=PG", "display_name": "asiniy", "link": "https://stackoverflow.com/users/2926641/asiniy"}, "edited": false, "score": 0, "creation_date": 1435304600, "post_id": 31026135, "comment_id": 50154812, "body": "Sorry, I wasn&#39;t able to approve due to rating amount. Added your edit as my edit."}, {"owner": {"reputation": 11760, "user_id": 2926641, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/962e08aff17872bda3f89a9ee6849ab3?s=128&d=identicon&r=PG", "display_name": "asiniy", "link": "https://stackoverflow.com/users/2926641/asiniy"}, "edited": false, "score": 0, "creation_date": 1435305425, "post_id": 31026135, "comment_id": 50155288, "body": "Oh, ok! Thanks for answer anyway!"}], "tags": [], "owner": {"reputation": 489, "user_id": 1303501, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d44af6531fbd70f0c0df5dce8b83f72?s=128&d=identicon&r=PG", "display_name": "Glupo", "link": "https://stackoverflow.com/users/1303501/glupo"}, "is_accepted": true, "score": 1, "last_activity_date": 1435304562, "last_edit_date": 1435304562, "creation_date": 1435147724, "answer_id": 31026135, "question_id": 31023788, "link": "https://stackoverflow.com/questions/31023788/rails-cant-understand-association-when-querying-using-activerecord/31026135#31026135", "title": "Rails can&#39;t understand association when querying using activerecord", "body": "<p>As far as I know <code>where</code> cannot go deep through relations.\nWhat it should look like from my point of view is:</p>\n\n<pre><code>class Task &lt AR::Base\n  has_one :taskable, inverse_of: :task, autosave: true\n  enum status: { :awaiting, :restarting, ... }\nclass Taskable &lt AR::Base\n  belongs_to :task, inverse_of: :taskable, autosave: true\n  has_many :supplies\nclass Supply &lt AR::Base\n  belongs_to :taskable\n  has_many :supplies, through: :taskable</code></pre>\n\n<p>And to get what you want you'll be able to use:\n<code>Supply.joins(:tasks).where(tasks: {status: [:awaiting, :starting]})</code></p>\n\n<p>Also pay attention to status values in <code>where</code> clause. If you are using rails 4.1 you'll have to pass numeric values of statuses.</p>\n\n<p><strong>UPDATED</strong></p>\n\n<p>Or the simpler way without <code>has_many :through</code></p>\n\n<p><code>Supply.joins(taskable: :tasks).where(tasks: {status: [:awaiting, :starting]})</code></p>\n"}], "owner": {"reputation": 11760, "user_id": 2926641, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/962e08aff17872bda3f89a9ee6849ab3?s=128&d=identicon&r=PG", "display_name": "asiniy", "link": "https://stackoverflow.com/users/2926641/asiniy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 236, "favorite_count": 0, "accepted_answer_id": 31026135, "answer_count": 2, "score": 0, "last_activity_date": 1435304562, "creation_date": 1435140663, "last_edit_date": 1435143069, "question_id": 31023788, "link": "https://stackoverflow.com/questions/31023788/rails-cant-understand-association-when-querying-using-activerecord", "title": "Rails can&#39;t understand association when querying using activerecord", "body": "<p>I have a models, <code>Task</code>, <code>Taskable</code> &amp; <code>Supply</code>. They have this associations relationship.</p>\n\n<pre><code>class Task &lt; AR::Base\n  has_one :taskable, inverse_of: :task, autosave: true\n  enum status: { :awaiting, :restarting, ... }\n\nclass Taskable &lt; AR::Base\n  belongs_to :task, inverse_of: :taskable, autosave: true\n  has_many :supplies\n\nclass Supply &lt; AR::Base\n  belongs_to :taskable\n</code></pre>\n\n<p>I need to find supplies, which are connected to tasks with some enum value. Here's how I construct a query:</p>\n\n<pre><code>Supply.where(\n  taskable: {\n    task: {\n      status: [ :awaiting, :starting ]\n    }\n  })\n</code></pre>\n\n<p>But I catch an exception:</p>\n\n<pre><code>PG::UndefinedTable: ERROR:  missing FROM-clause entry for table \"taskable\"\nLINE 1: ...upplies\" WHERE \"supplies\".\"component_id\" = $1 AND \"taskable\"...\n: SELECT  \"supplies\".* FROM \"supplies\" WHERE \"supplies\".\"component_id\" =  $1 AND \"taskable\".\"task_id\" = '---\n:status:\n- :awaiting\n- :starting\n'  ORDER BY \"supplies\".\"id\" ASC LIMIT 1\n(0.1ms)  ROLLBACK\nActiveRecord::StatementInvalid: PG::UndefinedTable: ERROR:  missing FROM-clause entry for table \"taskable\"\nLINE 1: ...upplies\" WHERE \"supplies\".\"component_id\" = $1 AND \"taskable\"...                                                             ^\n: SELECT  \"supplies\".* FROM \"supplies\" WHERE \"supplies\".\"component_id\" = $1 AND \"taskable\".\"task_id\" = '---\n:status:\n- :awaiting\n- :starting\n'  ORDER BY \"supplies\".\"id\" ASC LIMIT 1\n</code></pre>\n\n<p>How can I query exactly what I want w/o exceptions?</p>\n\n<p><strong>UPDATED</strong></p>\n\n<p><code>db/schema.rb</code></p>\n\n<pre><code>create_table \"tasks\", force: :cascade do |t|\n  t.string   \"title\"\n  t.datetime \"created_at\",      null: false\n  t.datetime \"updated_at\",      null: false\n  t.integer  \"responsible_id\",  null: false\n  t.integer  \"status\",          null: false\nend\n\ncreate_table \"taskables\", force: :cascade do |t|\n  t.integer  \"task_id\",    null: false\n  t.datetime \"created_at\", null: false\n  t.datetime \"updated_at\", null: false\nend\n\ncreate_table \"supplies\", force: :cascade do |t|\n  t.integer  \"taskable_id\",  null: false\n  t.datetime \"expired_at\"\n  t.datetime \"created_at\",   null: false\n  t.datetime \"updated_at\",   null: false\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "mongodb", "best-in-place"], "comments": [{"owner": {"reputation": 16396, "user_id": 2564298, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/BhG1x.jpg?s=128&g=1", "display_name": "Rajdeep Singh", "link": "https://stackoverflow.com/users/2564298/rajdeep-singh"}, "edited": false, "score": 0, "creation_date": 1435140364, "post_id": 31023557, "comment_id": 50071976, "body": "Show us what you have tried?"}, {"owner": {"reputation": 95, "user_id": 4354298, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/4626b92297a55b5ff58458407ffc988c?s=128&d=identicon&r=PG&f=1", "display_name": "arunwrc", "link": "https://stackoverflow.com/users/4354298/arunwrc"}, "reply_to_user": {"reputation": 16396, "user_id": 2564298, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/BhG1x.jpg?s=128&g=1", "display_name": "Rajdeep Singh", "link": "https://stackoverflow.com/users/2564298/rajdeep-singh"}, "edited": false, "score": 0, "creation_date": 1435142187, "post_id": 31023557, "comment_id": 50073150, "body": "<code>&#47;&#47;= require best_in_place.jquery-ui</code> inside application.js    <code>&lt;%= best_in_place employee, :mydate ,:type =&gt; :date %&gt;</code>  inside form  <code>$.datepicker.formatDate( &quot;yy-mm-dd&quot;, new Date( 2007, 1 - 1, 26 ) );</code> inside JS"}], "answers": [{"comments": [{"owner": {"reputation": 7779, "user_id": 5495523, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/kRpDR.png?s=128&g=1", "display_name": "maxhb", "link": "https://stackoverflow.com/users/5495523/maxhb"}, "edited": false, "score": 1, "creation_date": 1449358190, "post_id": 34112016, "comment_id": 55974091, "body": "This is not an answer. please use comment functions for remarks like that."}, {"owner": {"reputation": 109, "user_id": 2848422, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c06c626c8ee995504ebb8a380e49fe09?s=128&d=identicon&r=PG&f=1", "display_name": "evanchurchill", "link": "https://stackoverflow.com/users/2848422/evanchurchill"}, "reply_to_user": {"reputation": 7779, "user_id": 5495523, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/kRpDR.png?s=128&g=1", "display_name": "maxhb", "link": "https://stackoverflow.com/users/5495523/maxhb"}, "edited": false, "score": 2, "creation_date": 1449510033, "post_id": 34112016, "comment_id": 56027493, "body": "I don&#39;t have 50 reputation to comment, and this answers his question sufficiently (as in, its not possible with rails 4)."}], "tags": [], "owner": {"reputation": 109, "user_id": 2848422, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c06c626c8ee995504ebb8a380e49fe09?s=128&d=identicon&r=PG&f=1", "display_name": "evanchurchill", "link": "https://stackoverflow.com/users/2848422/evanchurchill"}, "is_accepted": false, "score": 2, "last_activity_date": 1449356946, "creation_date": 1449356946, "answer_id": 34112016, "question_id": 31023557, "link": "https://stackoverflow.com/questions/31023557/datepicker-for-ror-4-best-in-place/34112016#34112016", "title": "Datepicker for ROR 4 best_in_place", "body": "<p>according to this issue on github issue for the gem <a href=\"https://github.com/bernat/best_in_place/issues/68\" rel=\"nofollow\">https://github.com/bernat/best_in_place/issues/68</a> the datepicker will only work with rails 3.X verisons. </p>\n"}], "owner": {"reputation": 95, "user_id": 4354298, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/4626b92297a55b5ff58458407ffc988c?s=128&d=identicon&r=PG&f=1", "display_name": "arunwrc", "link": "https://stackoverflow.com/users/4354298/arunwrc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 468, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1449356946, "creation_date": 1435140076, "last_edit_date": 1435142322, "question_id": 31023557, "link": "https://stackoverflow.com/questions/31023557/datepicker-for-ror-4-best-in-place", "title": "Datepicker for ROR 4 best_in_place", "body": "<p>I would like to implement a datepicker for my app.</p>\n\n<p>I went through the bates calender railcast, but I need something similar to that where it is possible to use it in <code>rails4</code> with backend <code>mongodb</code>.</p>\n\n<p>I have tried the following, but to no avail:</p>\n\n<pre><code>&lt;%= best_in_place employee, :mydate ,:type =&gt; :date %&gt;\n</code></pre>\n"}, {"tags": ["javascript", "jquery", "ruby"], "comments": [{"owner": {"reputation": 1613, "user_id": 3122407, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0556984fa880d15cc8caf386d822b60f?s=128&d=identicon&r=PG&f=1", "display_name": "manta", "link": "https://stackoverflow.com/users/3122407/manta"}, "edited": false, "score": 0, "creation_date": 1435139287, "post_id": 31023145, "comment_id": 50071202, "body": "select tag needs a name attr"}, {"owner": {"reputation": 173, "user_id": 4269376, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh6.googleusercontent.com/-Ql5zd-si208/AAAAAAAAAAI/AAAAAAAAABU/RLcCIezCdBI/photo.jpg?sz=128", "display_name": "Khaled Karam", "link": "https://stackoverflow.com/users/4269376/khaled-karam"}, "reply_to_user": {"reputation": 1613, "user_id": 3122407, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0556984fa880d15cc8caf386d822b60f?s=128&d=identicon&r=PG&f=1", "display_name": "manta", "link": "https://stackoverflow.com/users/3122407/manta"}, "edited": false, "score": 0, "creation_date": 1435139361, "post_id": 31023145, "comment_id": 50071257, "body": "Already tried that, but I don&#39;t want to show the submit the select tag, I want to submit the &lt;li&gt; tag that&#39;s put dynamically"}, {"owner": {"reputation": 2162, "user_id": 3796431, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/ukRt6.png?s=128&g=1", "display_name": "iamawebgeek", "link": "https://stackoverflow.com/users/3796431/iamawebgeek"}, "edited": false, "score": 0, "creation_date": 1435139616, "post_id": 31023145, "comment_id": 50071452, "body": "Are you searching this: <code>JSON.stringify($(this).serializeArray())</code>?"}, {"owner": {"reputation": 2162, "user_id": 3796431, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/ukRt6.png?s=128&g=1", "display_name": "iamawebgeek", "link": "https://stackoverflow.com/users/3796431/iamawebgeek"}, "edited": false, "score": 0, "creation_date": 1435139868, "post_id": 31023145, "comment_id": 50071606, "body": "I cant get what you want."}, {"owner": {"reputation": 173, "user_id": 4269376, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh6.googleusercontent.com/-Ql5zd-si208/AAAAAAAAAAI/AAAAAAAAABU/RLcCIezCdBI/photo.jpg?sz=128", "display_name": "Khaled Karam", "link": "https://stackoverflow.com/users/4269376/khaled-karam"}, "edited": false, "score": 0, "creation_date": 1435140909, "post_id": 31023145, "comment_id": 50072320, "body": "I have dropdown menu that I choose values from, those values are then added to the form in &lt;li&gt; tag inside the &lt;ul&gt; specified. I can&#39;t get those in serialize"}], "answers": [{"tags": [], "owner": {"reputation": 2162, "user_id": 3796431, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/ukRt6.png?s=128&g=1", "display_name": "iamawebgeek", "link": "https://stackoverflow.com/users/3796431/iamawebgeek"}, "is_accepted": true, "score": 1, "last_activity_date": 1435141306, "creation_date": 1435141306, "answer_id": 31024027, "question_id": 31023145, "link": "https://stackoverflow.com/questions/31023145/jquery-serialize-doesnt-work-on-dynamic-elements/31024027#31024027", "title": "JQuery serialize doesn&#39;t work on dynamic elements", "body": "<p>If I understood you correctly, this should help you:</p>\n\n<pre><code>$(\"form#ajax-show\").on('submit', function (e) {\n  'use strict';\n  e.preventDefault();\n  var formEmulation = $(\"&lt;form/&gt;\").append($(\"#price-list\"));\n  console.log(JSON.stringify(formEmulation.serializeArray()));\n});\n</code></pre>\n"}], "owner": {"reputation": 173, "user_id": 4269376, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh6.googleusercontent.com/-Ql5zd-si208/AAAAAAAAAAI/AAAAAAAAABU/RLcCIezCdBI/photo.jpg?sz=128", "display_name": "Khaled Karam", "link": "https://stackoverflow.com/users/4269376/khaled-karam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 423, "favorite_count": 0, "accepted_answer_id": 31024027, "answer_count": 1, "score": 0, "last_activity_date": 1435141306, "creation_date": 1435139075, "last_edit_date": 1435140615, "question_id": 31023145, "link": "https://stackoverflow.com/questions/31023145/jquery-serialize-doesnt-work-on-dynamic-elements", "title": "JQuery serialize doesn&#39;t work on dynamic elements", "body": "<p>I'm using the jQuery .serialize function and can't get it to serialize the this particular dyamic elements form on submit. Note that I've tried the form on static and dynamic code and it worked fine. But I can't find the bug in this code</p>\n\n<p>Here's my form code</p>\n\n<pre><code>&lt;%= form_tag({action: :show}, method: \"post\", id: \"ajax-show\") do %&gt;\n            &lt;select id=\"xtime\"&gt;\n              &lt;% (0..95).each do |min| %&gt;\n                  &lt;option&gt;&lt;%= Time.at(min*15*60).utc.strftime(\"%H:%M\") %&gt;&lt;/option&gt;\n              &lt;% end %&gt;\n            &lt;/select&gt;\n            &lt;input id=\"xprice\" value=\"12\"/&gt;\n            &lt;a href=\"#\" id=\"price-add\"&gt;add&lt;/a&gt;\n\n            &lt;ul id=\"price-list\"&gt;\n\n            &lt;/ul&gt;\n            &lt;hr/&gt;\n            &lt;%= submit_tag(\"Submit\") %&gt;\n        &lt;% end %&gt;\n</code></pre>\n\n<p>and here's my jQuery code</p>\n\n<pre><code>    $(\"form#ajax-show\").on('submit', function (e) {\n        'use strict';\n        e.preventDefault();\n        console.debug($(this).serializeJSON());\n    });\n    $(document).on('click', '#price-add', function (e) {\n        e.preventDefault();\n        var t = '&lt;input enabled checked type=\"checkbox\" name=\"times[]\" value=\"' + $('#xtime').val() + '\"/&gt;' + $('#xtime').val();\n        var p = '&lt;input enabled checked type=\"checkbox\" name=\"prices[]\" value=\"' + $('#xprice').val() + '\"/&gt;' + $('#xprice').val();\n        $('#price-list').append('&lt;li&gt;time:  ' + t + '  .  price: ' + p + '  .  &lt;a href=\"#\" id=\"price-remove\"&gt;remove&lt;/a&gt;&lt;/li&gt;')\n    });\n    $(document).on('click', '#price-remove', function (e) {\n        e.preventDefault();\n        $(this).parent('li').remove();\n    });\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "if-statement"], "answers": [{"tags": [], "owner": {"reputation": 13508, "user_id": 230202, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/014443228ec95795e9359bb239294dc1?s=128&d=identicon&r=PG", "display_name": "antpaw", "link": "https://stackoverflow.com/users/230202/antpaw"}, "is_accepted": false, "score": 5, "last_activity_date": 1435139078, "creation_date": 1435139078, "answer_id": 31023147, "question_id": 31023014, "link": "https://stackoverflow.com/questions/31023014/how-to-check-object-is-exits-or-not-in-view-ror/31023147#31023147", "title": "how to check object is exits or not in view ROR", "body": "<p>this should work:</p>\n\n<pre><code> &lt;% if r.respond_to?(:distant) %&gt;\n</code></pre>\n\n<p>however this is too much logic in the view, i suggest you refactor some of your code to have very simple and safe methods in your view</p>\n"}, {"tags": [], "owner": {"reputation": 1461, "user_id": 2059047, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5e1327cb46137894ca902795db2111ac?s=128&d=identicon&r=PG", "display_name": "Prashant4224", "link": "https://stackoverflow.com/users/2059047/prashant4224"}, "is_accepted": false, "score": 1, "last_activity_date": 1435139087, "creation_date": 1435139087, "answer_id": 31023154, "question_id": 31023014, "link": "https://stackoverflow.com/questions/31023014/how-to-check-object-is-exits-or-not-in-view-ror/31023154#31023154", "title": "how to check object is exits or not in view ROR", "body": "<p>Try this</p>\n\n<pre><code>&lt;%= r.try(:distant) %&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 0, "last_activity_date": 1435139728, "last_edit_date": 1435139728, "creation_date": 1435139348, "answer_id": 31023264, "question_id": 31023014, "link": "https://stackoverflow.com/questions/31023014/how-to-check-object-is-exits-or-not-in-view-ror/31023264#31023264", "title": "how to check object is exits or not in view ROR", "body": "<p>I would use another approach:</p>\n\n<pre><code>user =  if longitude.present? &amp;&amp; latitude.present? &amp;&amp; fulladdress.present?\n          distantQuery = QUERY_BODY_HERE\n          User.select(SELECT_QUERY_HERE).where(distantQuery)\n        else\n          User.all\n        end\n\nunless user.respond_to(:distant)\n  class &lt;&lt; user\n    def distant ; nil ; end\n  end\nend\n</code></pre>\n\n<p>The advantage of this approach is that you have consistent <code>User</code> class, responding to <code>#distant</code> correctly regardless of whether it was calculated.</p>\n"}], "owner": {"reputation": 1451, "user_id": 3425009, "user_type": "registered", "accept_rate": 41, "profile_image": "https://i.stack.imgur.com/GMKbt.jpg?s=128&g=1", "display_name": "Harman", "link": "https://stackoverflow.com/users/3425009/harman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 1, "answer_count": 3, "score": 1, "last_activity_date": 1435139728, "creation_date": 1435138707, "question_id": 31023014, "link": "https://stackoverflow.com/questions/31023014/how-to-check-object-is-exits-or-not-in-view-ror", "title": "how to check object is exits or not in view ROR", "body": "<p>I have implemented query on distant lat long and create virtual field in query like this</p>\n\n<pre><code>user        = User.all\nif longitude.present? &amp;&amp; latitude.present? &amp;&amp; fulladdress.present?\n\n   distantQuery = \"(3959 * acos( cos( radians(\"+latitude+\") ) * cos( radians( latitude ) ) * cos( radians( longitude ) - radians(\"+longitude+\")) + sin( radians(\"+latitude +\")) * sin(radians(latitude))))  &lt; \" + miles\n   user = User.select(\"*, (3959 * acos(cos(radians(\"+latitude+\")) * cos( radians(latitude)) * cos(radians(longitude) - radians(\"+longitude+\")) + sin(radians(\" +latitude +\")) * sin(radians(latitude))))  as distant\").where(distantQuery)\nend\n</code></pre>\n\n<p>when my if condition run then distant is coming other wise it will not coming</p>\n\n<pre><code>&lt;% @result.each do |r| %&gt;\n&lt;tr&gt;\n&lt;td&gt;\n &lt;%= r.distant.present %&gt;\n\n&lt;/td&gt;\n&lt;/tr&gt;\n</code></pre>\n\n<p>now in view my distant is come form query then it will show result and when it will not come then it show me error </p>\n\n<pre><code>undefined method `distant' for #&lt;User:0x000000092a6558&gt;\n</code></pre>\n\n<p>I have implement \"present\" in view </p>\n\n<pre><code>  &lt;% if r.distant.present? %&gt;\n                        &lt;%= r.distant.to_i %&gt;   \n\n\n                &lt;% end %&gt;\n</code></pre>\n\n<p>but still it show me error, What will i use to check if distant is coming then it will show and other wise not ?</p>\n"}, {"tags": ["python", "ruby", "macos"], "comments": [{"owner": {"reputation": 37256, "user_id": 736308, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/o5EqQ.jpg?s=128&g=1", "display_name": "cdarke", "link": "https://stackoverflow.com/users/736308/cdarke"}, "edited": false, "score": 0, "creation_date": 1435139608, "post_id": 31023008, "comment_id": 50071445, "body": "Why not print <code>b</code> as well as <code>char(b)</code>, won&#39;t that answer your question?"}, {"owner": {"reputation": 1157, "user_id": 1101109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cfJAB.jpg?s=128&g=1", "display_name": "pzrq", "link": "https://stackoverflow.com/users/1101109/pzrq"}, "reply_to_user": {"reputation": 37256, "user_id": 736308, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/o5EqQ.jpg?s=128&g=1", "display_name": "cdarke", "link": "https://stackoverflow.com/users/736308/cdarke"}, "edited": false, "score": 0, "creation_date": 1435500159, "post_id": 31023008, "comment_id": 50216535, "body": "@cdarke Sorry been busy, added simpler case to reproduce it. I&#39;m still stumped why Y-ESC-Z-ESC (if that&#39;s the sequence being printed) would also cause an extra <code>1;2c</code>"}], "owner": {"reputation": 1157, "user_id": 1101109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cfJAB.jpg?s=128&g=1", "display_name": "pzrq", "link": "https://stackoverflow.com/users/1101109/pzrq"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 130, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1435503145, "creation_date": 1435138688, "last_edit_date": 1435503145, "question_id": 31023008, "link": "https://stackoverflow.com/questions/31023008/12c-osx-mystery-sometimes-12c-appears-on-the-next-input-line", "title": "1;2c OSX mystery: Sometimes 1;2c appears on the next input line", "body": "<p>EDIT: Simplified version (skips <a href=\"https://en.wikipedia.org/wiki/Fuzz_testing\" rel=\"nofollow\">fuzzing</a> the console for other issues):</p>\n\n<pre><code>pzrq@icebox:~$ python\nPython 2.7.6 (default, Sep  9 2014, 15:04:36) \n[GCC 4.2.1 Compatible Apple LLVM 6.0 (clang-600.0.39)] on darwin\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n&gt;&gt;&gt; for b in [89,90]: print chr(b)+chr(27)\n... \nY\n\n&gt;&gt; 1;2c\n</code></pre>\n\n<p>EDIT2: Reproduced in Ruby:</p>\n\n<pre><code>Last login: Mon Jun 29 00:43:22 on ttys000\npzrq@icebox:~$ irb\n2.1.1 :001 &gt; for b in [89,90]\n2.1.1 :002?&gt;   putc b\n2.1.1 :003?&gt;   putc 27\n2.1.1 :004?&gt;   end\nY=&gt; [89, 90] \n2.1.1 :005 &gt; 1;2c\n</code></pre>\n\n<hr>\n\n<p>Original: </p>\n\n<p>Reproducible (most of the time) enigma I've never seen before:</p>\n\n<pre><code># Setup\n$ mkvirtualenv pycrypto_test\n$ pip install pycrypto\n$ python\n\n# Script 1\n&gt;&gt;&gt; from Crypto import Random\n&gt;&gt;&gt; for _ in range(10**3): print(Random.get_random_bytes(130))\n\n# On the next input line, get 1;2c printed 0-10 times\n# Just OSX Python 2.7.6, does not affect Homebrew Python 3.4.2\n# Happens with or without ipython\n&gt;&gt;&gt; 1;2c1;2c1;2c\n</code></pre>\n\n<p>Have also seen it change the ipython shell prompt twice from normal square brackets (but can't reproduce reliably) to:</p>\n\n<pre><code>In \u00e91\u00ea: \n</code></pre>\n\n<p>I'd guess the first script is printing ASCII control characters under Python2, but in Python3 it's just printing byte strings.</p>\n\n<pre><code># Script 2: Reproduced under (OSX) `brew install python3` v3.4.2 with\n&gt;&gt;&gt; for _ in range(10**3):\n...   for b in Random.get_random_bytes(130):\n...     print(chr(b))\n\n# Lots of output\n&gt;&gt;&gt; 1;2c1;2c\n</code></pre>\n\n<p>What ASCII or other control characters might cause this? Or is there another explanation?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "server", "rake"], "answers": [{"tags": [], "owner": {"reputation": 999, "user_id": 2039718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4URjU.jpg?s=128&g=1", "display_name": "Dnyanarth lonkar", "link": "https://stackoverflow.com/users/2039718/dnyanarth-lonkar"}, "is_accepted": false, "score": 0, "last_activity_date": 1435139643, "last_edit_date": 1435139643, "creation_date": 1435139025, "answer_id": 31023125, "question_id": 31022778, "link": "https://stackoverflow.com/questions/31022778/run-local-rake-task-on-remote-application/31023125#31023125", "title": "Run local rake task on remote application", "body": "<p>Check out <a href=\"https://github.com/seattlerb/rake-remote_task\" rel=\"nofollow\">https://github.com/seattlerb/rake-remote_task</a>. Here is a snippet to show you how it works:</p>\n\n<pre><code>require 'rake/remote_task'\nset :domain, 'abc.example.com'\n\nremote_task :foo do\n  run \"ls\"\nend\n</code></pre>\n"}], "owner": {"reputation": 195, "user_id": 4075220, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/82d0ebc91df77ca9ecc5185b811fe7cd?s=128&d=identicon&r=PG", "display_name": "Jesper Lugner", "link": "https://stackoverflow.com/users/4075220/jesper-lugner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 152, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1435139643, "creation_date": 1435138096, "question_id": 31022778, "link": "https://stackoverflow.com/questions/31022778/run-local-rake-task-on-remote-application", "title": "Run local rake task on remote application", "body": "<p>I'd like to be able to create and run local rake tasks on a application running on a remote server. My basic use case is as follows: I need to be able to quickly create various tasks for monitoring the database of the application without having to go through my various deploy steps. The ideal scenario for me would be to easily create rake tasks on my local machine, and run them at whatever interval I want on my live application. </p>\n\n<p>Is this at all possible, and if not, is there any other way to accomplish something similar?</p>\n\n<p>To clarify: this is only for the purpose of monitoring, not to change any live data.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "heroku", "web-worker", "puma"], "comments": [{"owner": {"reputation": 2210, "user_id": 4811651, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ozvMA.jpg?s=128&g=1", "display_name": "Sean Magyar", "link": "https://stackoverflow.com/users/4811651/sean-magyar"}, "edited": false, "score": 0, "creation_date": 1453417284, "post_id": 31022313, "comment_id": 57604664, "body": "Sag, I&#39;m facing the same problem at the moment. Could you solve it somehow?"}], "answers": [{"tags": [], "owner": {"reputation": 528, "user_id": 1259478, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8477d49605b3522c05c4dc157bf3ee6c?s=128&d=identicon&r=PG", "display_name": "Eduardo Sztokbant", "link": "https://stackoverflow.com/users/1259478/eduardo-sztokbant"}, "is_accepted": false, "score": 0, "last_activity_date": 1440189283, "creation_date": 1440189283, "answer_id": 32148865, "question_id": 31022313, "link": "https://stackoverflow.com/questions/31022313/heroku-puma-rails-4-getting-r14-errors-how-do-i-scale-my-server-up/32148865#32148865", "title": "Heroku Puma Rails 4 : Getting R14 errors, how do I scale my server up?", "body": "<p>I have no personal experience with setting up Heroku worker dynos, but as for your question #2 the file should be fine as long as you are running Rails 4.1 or newer, otherwise the config should match the recommendation in this link: <a href=\"https://devcenter.heroku.com/articles/deploying-rails-applications-with-the-puma-web-server#on-worker-boot\" rel=\"nofollow\">https://devcenter.heroku.com/articles/deploying-rails-applications-with-the-puma-web-server#on-worker-boot</a>.</p>\n\n<p>In a recent attempt to upgrade my app to Rails 4.2, memory consumption raised significantly and R14 errors became much more frequent. So I downgraded back to Rails 4.1 (Ruby version is 2.2.2). Maybe that's something you could give a try.</p>\n\n<p>Also, if you haven't done so, I recommend you installing the New Relic add-on and taking a look at the per-instance memory consumption at the \"Monitoring/Instances\" link.</p>\n"}], "owner": {"reputation": 35, "user_id": 4154817, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/00f9fd799b3e59763e59f2c954dbb496?s=128&d=identicon&r=PG&f=1", "display_name": "Sag", "link": "https://stackoverflow.com/users/4154817/sag"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 321, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1440189283, "creation_date": 1435136820, "question_id": 31022313, "link": "https://stackoverflow.com/questions/31022313/heroku-puma-rails-4-getting-r14-errors-how-do-i-scale-my-server-up", "title": "Heroku Puma Rails 4 : Getting R14 errors, how do I scale my server up?", "body": "<p>I am running a Rails 4 app on Heroku, with Puma server. I am using only one basic web dyno (no worker), with 512MB ram. </p>\n\n<p>Recently, I have been facing a lot of R14 errors (Memory Quota Exceeded), my server crashed three times yesterday.</p>\n\n<p>Here's my Puma config file :</p>\n\n<pre><code>workers Integer(ENV['WEB_CONCURRENCY'] || 0)\nthreads_count = Integer(ENV['MAX_THREADS'] || 5)\nthreads threads_count, threads_count\n\npreload_app!\n\nrackup      DefaultRackup\nport        ENV['PORT']     || 3000\nenvironment ENV['RACK_ENV'] || 'development'\n\non_worker_boot do\n  # Worker specific setup for Rails 4.1+\n  # See: https://devcenter.heroku.com/articles/deploying-rails-applications-with-the-puma-web-server#on-worker-boot\n  ActiveRecord::Base.establish_connection\nend\n</code></pre>\n\n<p>I have few time-consuming tasks being performed each day on my server, I think they are the reason why I am getting these R14 errors and server crashes :</p>\n\n<ul>\n<li><p>rake tasks being performed with Heroku Scheduler</p></li>\n<li><p>imports of 10 photos (size max : 10 x 3MB) when creating / updating a model named Thing</p></li>\n<li><p>exports of logs from my database, that can contain up to 6k rows</p></li>\n</ul>\n\n<p>Here are my questions : </p>\n\n<ol>\n<li><p>Will putting these time-consuming tasks on a new worker dyno help me avoid R14 errors / server crashes ? If yes, do you recommend using <a href=\"https://devcenter.heroku.com/articles/delayed-job\" rel=\"nofollow\" title=\"delayed_job_active_record\">delayed_job_active_record</a> gem or <a href=\"https://devcenter.heroku.com/articles/queuing-ruby-resque\" rel=\"nofollow\">resque</a> gem? </p></li>\n<li><p>Do you think my Puma config file is ok ?</p></li>\n<li><p>I can't figure out how to put rake tasks performed by Heroku Scheduler on a worker dyno. Any idea ?</p></li>\n</ol>\n\n<p>Thanks a lot for your help !</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "testing", "model-view-controller", "tdd"], "comments": [{"owner": {"reputation": 30655, "user_id": 138557, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/73c04e9ef9ca435c5b19a2e765ae6d20?s=128&d=identicon&r=PG", "display_name": "Max Williams", "link": "https://stackoverflow.com/users/138557/max-williams"}, "edited": false, "score": 0, "creation_date": 1435135457, "post_id": 31021578, "comment_id": 50068618, "body": "Can you include the code where you set the value of <code>@meeting</code>?"}, {"owner": {"reputation": 113, "user_id": 4833746, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57c747a665a65aae7dbe91008eb96429?s=128&d=identicon&r=PG&f=1", "display_name": "MeanStackeD", "link": "https://stackoverflow.com/users/4833746/meanstacked"}, "reply_to_user": {"reputation": 30655, "user_id": 138557, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/73c04e9ef9ca435c5b19a2e765ae6d20?s=128&d=identicon&r=PG", "display_name": "Max Williams", "link": "https://stackoverflow.com/users/138557/max-williams"}, "edited": false, "score": 0, "creation_date": 1435137329, "post_id": 31021578, "comment_id": 50069823, "body": "I&#39;ve included the code."}, {"owner": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 0, "creation_date": 1435138513, "post_id": 31021578, "comment_id": 50070643, "body": "Rails version?  Did you try using a Date object to_s(:db)?"}, {"owner": {"reputation": 30655, "user_id": 138557, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/73c04e9ef9ca435c5b19a2e765ae6d20?s=128&d=identicon&r=PG", "display_name": "Max Williams", "link": "https://stackoverflow.com/users/138557/max-williams"}, "edited": false, "score": 0, "creation_date": 1435143234, "post_id": 31021578, "comment_id": 50073844, "body": "In your setup action can you log out the value of <code>@meeting.inspect</code> and <code>@meeting.date.inspect</code>"}, {"owner": {"reputation": 113, "user_id": 4833746, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57c747a665a65aae7dbe91008eb96429?s=128&d=identicon&r=PG&f=1", "display_name": "MeanStackeD", "link": "https://stackoverflow.com/users/4833746/meanstacked"}, "edited": false, "score": 0, "creation_date": 1435184249, "post_id": 31021578, "comment_id": 50100126, "body": "I&#39;ve logged the values."}], "answers": [{"comments": [{"owner": {"reputation": 113, "user_id": 4833746, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57c747a665a65aae7dbe91008eb96429?s=128&d=identicon&r=PG&f=1", "display_name": "MeanStackeD", "link": "https://stackoverflow.com/users/4833746/meanstacked"}, "edited": false, "score": 0, "creation_date": 1435266476, "post_id": 31032799, "comment_id": 50142101, "body": "Hmm. This would be interesting; the fixture was automatically generated with that date back when I created the meeting model."}], "tags": [], "owner": {"reputation": 18773, "user_id": 91830, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2505b282d57c29be797dc35b245adb4c?s=128&d=identicon&r=PG", "display_name": "Philip Hallstrom", "link": "https://stackoverflow.com/users/91830/philip-hallstrom"}, "is_accepted": false, "score": 0, "last_activity_date": 1435165650, "creation_date": 1435165650, "answer_id": 31032799, "question_id": 31021578, "link": "https://stackoverflow.com/questions/31021578/bizarre-undefined-method-strftime-for-43200fixnum-in-rails-controller-test/31032799#31032799", "title": "Bizarre &quot;undefined method &#39;strftime&#39; for 43200:Fixnum&quot; in Rails controller test but works fine in actual view", "body": "<p>I don't use fixtures, but <code>date: 2015-06-24</code> probably isn't being converted to a proper Date object prior to being used.</p>\n"}, {"tags": [], "owner": {"reputation": 113, "user_id": 4833746, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57c747a665a65aae7dbe91008eb96429?s=128&d=identicon&r=PG&f=1", "display_name": "MeanStackeD", "link": "https://stackoverflow.com/users/4833746/meanstacked"}, "is_accepted": true, "score": 0, "last_activity_date": 1438904575, "creation_date": 1438904575, "answer_id": 31867525, "question_id": 31021578, "link": "https://stackoverflow.com/questions/31021578/bizarre-undefined-method-strftime-for-43200fixnum-in-rails-controller-test/31867525#31867525", "title": "Bizarre &quot;undefined method &#39;strftime&#39; for 43200:Fixnum&quot; in Rails controller test but works fine in actual view", "body": "<p>I ended up doing a workaround for testing. Instead of defining fixtures in meetings.yml, I wrote a custom test helper method that generated some random meetings. Those random meetings had dates that worked just fine in the test.</p>\n\n<p>Passing in things like <code>Date.now</code> into the Meeting constructor did give proper dates.</p>\n"}], "owner": {"reputation": 113, "user_id": 4833746, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57c747a665a65aae7dbe91008eb96429?s=128&d=identicon&r=PG&f=1", "display_name": "MeanStackeD", "link": "https://stackoverflow.com/users/4833746/meanstacked"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 544, "favorite_count": 1, "accepted_answer_id": 31867525, "answer_count": 2, "score": 0, "last_activity_date": 1438904575, "creation_date": 1435134753, "last_edit_date": 1435400796, "question_id": 31021578, "link": "https://stackoverflow.com/questions/31021578/bizarre-undefined-method-strftime-for-43200fixnum-in-rails-controller-test", "title": "Bizarre &quot;undefined method &#39;strftime&#39; for 43200:Fixnum&quot; in Rails controller test but works fine in actual view", "body": "<p>I was working on a Rails application (version 4.2.0) and one part of the app involves displaying formatted dates in views. When I use the <em>strftime</em> method of a date to format in the view, everything works fine. However, one of the controller tests related to the views fails, saying that the <em>strftime</em> method doesn't exist for a \"Fixnum\", despite the fact that the property I run the method on is a date.</p>\n\n<p>Specifically, in the <strong>View</strong> I have this:</p>\n\n<pre><code>...\n&lt;div&gt;&lt;%= @meeting.date.strftime(\"%B %d, %Y\") %&gt;&lt;/div&gt;\n...\n</code></pre>\n\n<p>The <strong>Controller Test</strong> has this:</p>\n\n<pre><code>  def setup do\n    @person = persons(:bob)\n    @meeting = meetings(:important)\n  end\n  ...\n  test \"should get show when logged in\" do\n    log_in_as(@person)\n    get :show, id: @meeting.id  # Errors here\n    assert_response :success\n  end\n</code></pre>\n\n<p>The date property of the meeting model is a date (as expected):</p>\n\n<pre><code>create_table \"meetings\", force: :cascade do |t|\n  ...\n  t.date  \"date\"\n  ...\nend\n</code></pre>\n\n<p>Prior to the test, the @meeting variable is set to one of the fixtures in <strong>meetings.yml</strong>:</p>\n\n<pre><code>important:\n  name: Important meeting\n  date: 2015-06-24\n  ...\n  description: At this meeting, important things happen.\n</code></pre>\n\n<p>What is going on here? It's strange\u2014the property works fine in the view and in rails console, but errors during the test which picks up the property as a Fixnum rather than a Date.</p>\n\n<p><strong>Update</strong>: Inspecting the meeting and its date gives the following:</p>\n\n<pre><code>puts @meeting.inspect\n#&lt;Meeting id: 92075913, name: \"Important Meeting\", date: \"2015-06-24\", ..., updated_at: \"2015-06-24 22:13:43\"&gt;\n\nputs @meeting.date.inspect\n# Wed, 24 Jun 2015\n</code></pre>\n\n<p>I need to resolve this issue soon as it's affecting me in multiple tests (controller and integration tests).</p>\n"}, {"tags": ["ruby", "string", "rust", "ffi"], "comments": [{"owner": {"reputation": 44438, "user_id": 42353, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f05e802879a805c03a55645dfcc0d4ea?s=128&d=identicon&r=PG", "display_name": "DK.", "link": "https://stackoverflow.com/users/42353/dk"}, "edited": false, "score": 7, "creation_date": 1435136170, "post_id": 31021453, "comment_id": 50069052, "body": "Quick comment: there are two immediate problems with this.  Firstly, <code>CStr</code> <b>is not a FFI-safe type</b> and should not be used like this.  You should be using <code>*const libc::c_char</code>.  Secondly, the answer depends entirely on who, exactly, owns the resulting string.  Does Ruby manage it?  If so, how?  Which heap does it need to be allocated on?  Does Rust still own it?  If so, how do you provide a cleanup function?  All I can recommend is to find out how to do this in C, then just do it that way in Rust."}, {"owner": {"reputation": 269529, "user_id": 155423, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/419218774d04a581476ea1887a0921e0?s=128&d=identicon&r=PG", "display_name": "Shepmaster", "link": "https://stackoverflow.com/users/155423/shepmaster"}, "edited": false, "score": 2, "creation_date": 1435148429, "post_id": 31021453, "comment_id": 50077315, "body": "Also look at <a href=\"http://stackoverflow.com/q/30510764/155423\">stackoverflow.com/q/30510764/155423</a>, as it covers all the important parts. Adapting it to Ruby is easy at that point."}, {"owner": {"reputation": 11441, "user_id": 24817, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/233c279c012ebac792aaa805f966cbc7?s=128&d=identicon&r=PG", "display_name": "Steve Klabnik", "link": "https://stackoverflow.com/users/24817/steve-klabnik"}, "edited": false, "score": 1, "creation_date": 1435164632, "post_id": 31021453, "comment_id": 50089357, "body": "<a href=\"http://clalance.blogspot.ca/2011/01/writing-ruby-extensions-in-c-part-8.html\" rel=\"nofollow noreferrer\">clalance.blogspot.ca/2011/01/&hellip;</a> will be helpful, as will be <a href=\"https://github.com/ruby/ruby/blob/trunk/doc/extension.rdoc\" rel=\"nofollow noreferrer\">github.com/ruby/ruby/blob/trunk/doc/extension.rdoc</a>"}], "answers": [{"tags": [], "owner": {"reputation": 642, "user_id": 2626490, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7c9fda048420a5139f7ed90cc03e708a?s=128&d=identicon&r=PG", "display_name": "mpiccolo", "link": "https://stackoverflow.com/users/2626490/mpiccolo"}, "is_accepted": true, "score": 6, "last_activity_date": 1435520074, "last_edit_date": 1495541257, "creation_date": 1435520074, "answer_id": 31103942, "question_id": 31021453, "link": "https://stackoverflow.com/questions/31021453/ruby-string-to-rust-and-back-again/31103942#31103942", "title": "Ruby string to rust and back again", "body": "<p>Thanks to some guidance from <a href=\"https://stackoverflow.com/users/24817/steve-klabnik\" title=\"Steve Klabnik\">Steve Klabnik</a>, <a href=\"https://stackoverflow.com/users/155423/shepmaster\">shepmaster</a> and <a href=\"https://stackoverflow.com/users/42353/dk\">DK</a>  I figured out how to write a external string concat function in Rust and use it in Ruby.</p>\n\n<pre class=\"lang-rust prettyprint-override\"><code>// lib.rs\n#![feature(libc)]\n#![feature(cstr_to_str)]\n#![feature(cstr_memory)]\nextern crate libc;\nuse std::ffi::{CStr,CString};\n\n#[no_mangle]\npub extern fn concat(s1: *const libc::c_char, s2: *const libc::c_char) -&gt; *const libc::c_char {\n    let s1_cstr = unsafe { CStr::from_ptr(s1) };  // &amp;std::ffi::c_str::CStr\n    let s2_cstr = unsafe { CStr::from_ptr(s2) };  // &amp;std::ffi::c_str::CStr\n    let s1_and_str = s1_cstr.to_str().unwrap();  // &amp;str\n    let s2_and_str = s2_cstr.to_str().unwrap();  // &amp;str\n\n    let mut s1_string = s1_and_str.to_string();  // collections::string::String\n\n    s1_string.push_str(s2_and_str);\n    // s1_string + s2_and_str); // same thing\n\n    let concated_string = CString::new(s1_string).unwrap();  // std::ffi::c_str::CString\n\n    concated_string.into_ptr() // const i8\n}\n</code></pre>\n\n<pre class=\"lang-ruby prettyprint-override\"><code># rust.rb\nrequire 'ffi'\n\nmodule Rust\n  extend FFI::Library\n  ffi_lib './bin/libembed.dylib'\n\n  attach_function :concat, [:string, :string], :string\nend\n</code></pre>\n\n<pre class=\"lang-ruby prettyprint-override\"><code>#calling the function in Ruby\n\nRust.concat('This is a ', 'cohesive sentence') # =&gt; 'This is a cohesive sentence'\n</code></pre>\n"}], "owner": {"reputation": 642, "user_id": 2626490, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7c9fda048420a5139f7ed90cc03e708a?s=128&d=identicon&r=PG", "display_name": "mpiccolo", "link": "https://stackoverflow.com/users/2626490/mpiccolo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 594, "favorite_count": 1, "accepted_answer_id": 31103942, "answer_count": 1, "score": 9, "last_activity_date": 1435520074, "creation_date": 1435134398, "last_edit_date": 1435135253, "question_id": 31021453, "link": "https://stackoverflow.com/questions/31021453/ruby-string-to-rust-and-back-again", "title": "Ruby string to rust and back again", "body": "<p>I am trying to pass a string in Ruby to a rust executable, manipulate it and pass the manipulated string back.</p>\n\n<p>So far I can pass the string in and return it but I am at a loss as to how to convert it into a rust string, manipulate it and then pass it back to ruby.  Here is what I have so far:</p>\n\n<pre class=\"lang-rust prettyprint-override\"><code>// lib.rs\nuse std::ffi::CStr;\n\n#[no_mangle]\npub extern fn return_string(test_str: &amp;CStr) -&gt; &amp;CStr {\n    // working funciton\n    test_str\n}\n\n#[no_mangle]\npub extern fn manipulate_and_return_string(mystr: &amp;CStr) -&gt; &amp;CStr {\n    // mystr type == &amp;std::ffi::c_str::CStr\n    // println!(\"{:?}\", mystr); =&gt; std::ffi::c_str::CStr` cannot be formatted using `:?`\n    let cstr = mystr.to_bytes_with_nul();\n    // println!(\"{:?}\", mystr); =&gt; []\n    // cstr type == &amp;[u8]\n    let ptr = cstr.as_ptr();\n    // ptr type == *const u8\n    // println!(\"{:?}\", mystr); =&gt; 0x7fd898edb520\n    let str_slice: &amp;str = std::str::from_utf8(cstr).unwrap();\n    // str type == &amp;str\n    // println!(\"{:?}\", mystr); =&gt; \"\"\n    let str_buf: String = str_slice.to_owned();\n    // str_bug == collections::string::String\n    // println!(\"{:?}\", mystr); =&gt; \"\"\n}\n</code></pre>\n\n<pre class=\"lang-ruby prettyprint-override\"><code># rust.rb\nrequire 'ffi'\n\nmodule Rust\n  extend FFI::Library\n  ffi_lib './bin/libembed.dylib'\n\n  attach_function :return_string, [:string], :string\n  attach_function :manipulate_and_return_string, [:string], :string\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "separation-of-concerns", "aasm"], "answers": [{"tags": [], "owner": {"reputation": 11796, "user_id": 1942551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/97a80fd6531adf0db0c3bc9c7c11a8ea?s=128&d=identicon&r=PG", "display_name": "karlingen", "link": "https://stackoverflow.com/users/1942551/karlingen"}, "is_accepted": false, "score": 1, "last_activity_date": 1435133792, "creation_date": 1435133792, "answer_id": 31021258, "question_id": 31021194, "link": "https://stackoverflow.com/questions/31021194/how-to-use-model-concerns-in-rails/31021258#31021258", "title": "How to use model concerns in rails", "body": "<p>The module needs to be defined outside the class. </p>\n\n<p>So inside <code>app/models/concerns/user_aasm.rb</code>:</p>\n\n<pre><code>module UserAasm\n  extend ActiveSupport::Concern\n  included do\n    include AASM\n    aasm do\n    state :unverified, initial: true\n    state :approved\n    state :suspended\n    state :deleted\n    state :banned\n    end\n  end\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 5800, "user_id": 4287733, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/835e993afb1e20c1981dd6b8b59ded2d?s=128&d=identicon&r=PG", "display_name": "Nermin", "link": "https://stackoverflow.com/users/4287733/nermin"}, "is_accepted": true, "score": 3, "last_activity_date": 1435133888, "creation_date": 1435133888, "answer_id": 31021294, "question_id": 31021194, "link": "https://stackoverflow.com/questions/31021194/how-to-use-model-concerns-in-rails/31021294#31021294", "title": "How to use model concerns in rails", "body": "<p>You need to define it like.</p>\n\n<pre><code>require 'active_support/concern'\n\nmodule UserAasm\n    extend ActiveSupport::Concern\n    included do\n        include AASM\n        aasm do\n        state :unverified, initial: true\n        state :approved\n        state :suspended\n        state :deleted\n        state :banned\n      end\n    end\nend\n</code></pre>\n\n<p>Then in your <code>User</code> model</p>\n\n<pre><code>include UserAasm\n</code></pre>\n\n<p>This is not the right way to make your model skiny, because <code>concerns</code> folder is used to put code that is shared among more <code>models</code>. You should put <code>modules</code> that implement some behaviour, not extract code from your model and put it inside <code>concerns</code></p>\n\n<p>Read this article from <a href=\"http://blog.codeclimate.com/blog/2012/10/17/7-ways-to-decompose-fat-activerecord-models/\" rel=\"nofollow\">CodeClimate</a></p>\n\n<p>Quote from this link.</p>\n\n<p>'Using mixins like this is akin to \u201ccleaning\u201d a messy room by dumping the clutter into six separate junk drawers and slamming them shut. Sure, it looks cleaner at the surface, but the junk drawers actually make it harder to identify and implement the decompositions and extractions necessary to clarify the domain model.'</p>\n"}], "owner": {"reputation": 2202, "user_id": 1156761, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/c259c1adbed8fb52084c9b80c5d9f52a?s=128&d=identicon&r=PG", "display_name": "Chris Yeung", "link": "https://stackoverflow.com/users/1156761/chris-yeung"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1232, "favorite_count": 0, "accepted_answer_id": 31021294, "answer_count": 2, "score": 1, "last_activity_date": 1435134820, "creation_date": 1435133600, "last_edit_date": 1435134820, "question_id": 31021194, "link": "https://stackoverflow.com/questions/31021194/how-to-use-model-concerns-in-rails", "title": "How to use model concerns in rails", "body": "<p>I am trying to move different parts of a model into concerns. Two of each are the states defined by AASM, and attachments with Paperclip. </p>\n\n<p>So, I am moving the related codes into separate files. </p>\n\n<p><strong>app/models/concerns/user_aasm.rb</strong></p>\n\n<pre><code>class User\n    module UserAasm\n        extend ActiveSupport::Concern\n        included do\n            include AASM\n            aasm do\n            state :unverified, initial: true\n            state :approved\n            state :suspended\n            state :deleted\n            state :banned\n          end\n        end\n    end\nend\n</code></pre>\n\n<p>and in my user.rb, I do </p>\n\n<pre><code>include UserAasm\n</code></pre>\n\n<p>I got the following error: </p>\n\n<pre><code>Unable to autoload constant UserAasm, expected app/models/concerns/user_aasm.rb to define it\n</code></pre>\n\n<p>I wonder what I got wrong in the code.. How to use it in a correct way?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "gem", "environment-variables"], "answers": [{"tags": [], "owner": {"reputation": 11796, "user_id": 1942551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/97a80fd6531adf0db0c3bc9c7c11a8ea?s=128&d=identicon&r=PG", "display_name": "karlingen", "link": "https://stackoverflow.com/users/1942551/karlingen"}, "is_accepted": true, "score": 2, "last_activity_date": 1435134049, "creation_date": 1435134049, "answer_id": 31021349, "question_id": 31021101, "link": "https://stackoverflow.com/questions/31021101/figaro-gem-declare-a-variable-for-2-environment/31021349#31021349", "title": "Figaro Gem - Declare a variable for 2 environment", "body": "<p>Use shared values:</p>\n\n<pre><code>defaults: &amp;defaults\n  COUCHBASE_URL: 'couch-1.io'\n\ndevelopment:\n  &lt;&lt;: *defaults\ntest:\n  &lt;&lt;: *defaults\n</code></pre>\n\n<p>Now both environments would share the same variables defined under <code>defaults</code></p>\n"}], "owner": {"reputation": 197, "user_id": 4542899, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/46b9e936a41bc6054998c5d4098b0ae9?s=128&d=identicon&r=PG", "display_name": "MrHello", "link": "https://stackoverflow.com/users/4542899/mrhello"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 25, "favorite_count": 0, "accepted_answer_id": 31021349, "answer_count": 1, "score": 0, "last_activity_date": 1435134049, "creation_date": 1435133291, "question_id": 31021101, "link": "https://stackoverflow.com/questions/31021101/figaro-gem-declare-a-variable-for-2-environment", "title": "Figaro Gem - Declare a variable for 2 environment", "body": "<p>I am using FIGARO with the application.yml file. </p>\n\n<p>I would like to declare a variable for both environment, for exemple let's say: </p>\n\n<pre><code>development:\n  COUCHBASE_URL: couch-1.io\ntest:\n  COUCHBASE_URL: couch-1.io\nproduction:\n  COUCHBASE_URL: couch-2.io\n</code></pre>\n\n<p>how could I do something like that:</p>\n\n<pre><code>development, test:\n  COUCHBASE_URL: couch-1.io\n</code></pre>\n\n<p>Do you know the correct way to do it ?</p>\n\n<p>Thanks =)</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "validation"], "answers": [{"tags": [], "owner": {"reputation": 3630, "user_id": 4799659, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153200714295120/picture?type=large", "display_name": "fylooi", "link": "https://stackoverflow.com/users/4799659/fylooi"}, "is_accepted": false, "score": 1, "last_activity_date": 1435133531, "creation_date": 1435133531, "answer_id": 31021169, "question_id": 31021072, "link": "https://stackoverflow.com/questions/31021072/validation-for-few-not-saved-objects/31021169#31021169", "title": "Validation for few not saved objects", "body": "<p>You can wrap them in a transaction which will roll back the entire batch if one fails. </p>\n\n<pre><code>begin\n  ActiveRecord::Base.transaction do\n    @users.map(&amp;:save!)\n  end\nrescue  ActiveRecord::RecordInvalid\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1118, "user_id": 3243794, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/QxQsp.jpg?s=128&g=1", "display_name": "nesiseka", "link": "https://stackoverflow.com/users/3243794/nesiseka"}, "is_accepted": false, "score": 1, "last_activity_date": 1435133568, "creation_date": 1435133568, "answer_id": 31021180, "question_id": 31021072, "link": "https://stackoverflow.com/questions/31021072/validation-for-few-not-saved-objects/31021180#31021180", "title": "Validation for few not saved objects", "body": "<p>Why not just check the <code>user.valid</code>? that validates the DB records and then manually check the <code>@users</code> and only save if it's not a duplicate.</p>\n\n<pre><code>@users.each do |user|\n\n  #the following would check for identical objects in @users, but that may not be what you want\n  valid_users &lt;&lt; user if user.valid? and @users.count(user)&lt;2\n\n  #this would check only the required field on the array\n  valid_users &lt;&lt; user if user.valid? and @users.map(&amp;:email).count(user.email)&lt;2\n\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 16396, "user_id": 2564298, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/BhG1x.jpg?s=128&g=1", "display_name": "Rajdeep Singh", "link": "https://stackoverflow.com/users/2564298/rajdeep-singh"}, "is_accepted": true, "score": 1, "last_activity_date": 1435133680, "creation_date": 1435133680, "answer_id": 31021218, "question_id": 31021072, "link": "https://stackoverflow.com/questions/31021072/validation-for-few-not-saved-objects/31021218#31021218", "title": "Validation for few not saved objects", "body": "<p>You first need to check if all the unsaved object pass the validation test or not, if yes, to do that you can do this instead for the unique field <code>email</code></p>\n\n<pre><code>if @users.map { |user| user.email.downcase }.uniq.length == @users.size\n  @users.each do |user|\n    valid_users &lt;&lt; user if user.valid?   \n  end\nelse\n  # Error: Emails of the users must be unique\nend\n</code></pre>\n\n<p>Hope this helps!</p>\n"}, {"comments": [{"owner": {"reputation": 2119, "user_id": 1411047, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/673ade5df575380a2e2cd5a0c1503784?s=128&d=identicon&r=PG", "display_name": "Avdept", "link": "https://stackoverflow.com/users/1411047/avdept"}, "edited": false, "score": 0, "creation_date": 1435137702, "post_id": 31021307, "comment_id": 50070100, "body": "this wont check if there are any collisions in scope on not-saved collection, e.g. 2 users with same email"}, {"owner": {"reputation": 14827, "user_id": 645886, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2abb0123e9484284a9cb2d36aa9854b3?s=128&d=identicon&r=PG&f=1", "display_name": "Surya", "link": "https://stackoverflow.com/users/645886/surya"}, "reply_to_user": {"reputation": 2119, "user_id": 1411047, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/673ade5df575380a2e2cd5a0c1503784?s=128&d=identicon&r=PG", "display_name": "Avdept", "link": "https://stackoverflow.com/users/1411047/avdept"}, "edited": false, "score": 0, "creation_date": 1435144744, "post_id": 31021307, "comment_id": 50074858, "body": "@Avdept : Well, that wasn&#39;t mentioned anywhere in the question."}], "tags": [], "owner": {"reputation": 14827, "user_id": 645886, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2abb0123e9484284a9cb2d36aa9854b3?s=128&d=identicon&r=PG&f=1", "display_name": "Surya", "link": "https://stackoverflow.com/users/645886/surya"}, "is_accepted": false, "score": 0, "last_activity_date": 1435133925, "creation_date": 1435133925, "answer_id": 31021307, "question_id": 31021072, "link": "https://stackoverflow.com/questions/31021072/validation-for-few-not-saved-objects/31021307#31021307", "title": "Validation for few not saved objects", "body": "<p>One way to do this, can be using <a href=\"http://ruby-doc.org/core-2.2.2/Enumerable.html#method-i-all-3F\" rel=\"nofollow\"><code>all?</code></a>:</p>\n\n<pre><code>if @users.all?{|u| u.valid? } # true, only when all users are validated\n   # save all users\nelse\n   # redirect/render with error message.\nend\n</code></pre>\n"}], "owner": {"reputation": 2119, "user_id": 1411047, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/673ade5df575380a2e2cd5a0c1503784?s=128&d=identicon&r=PG", "display_name": "Avdept", "link": "https://stackoverflow.com/users/1411047/avdept"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 132, "favorite_count": 1, "accepted_answer_id": 31021218, "answer_count": 4, "score": 2, "last_activity_date": 1435133925, "creation_date": 1435133221, "question_id": 31021072, "link": "https://stackoverflow.com/questions/31021072/validation-for-few-not-saved-objects", "title": "Validation for few not saved objects", "body": "<p>I have form, that creates some objects in batch. For my flow i have to either save them all at once, or not save at all. Problem is - when I do my validations, they are not failing, since each object, validates according to current records in db(i have uniqueness validation), but i also need to validate current object to each of my unsaved objects. Small example</p>\n\n<pre><code>class User\n    #field: email\nend\n</code></pre>\n\n<p>In my form object i have an array of users. And in loop i do</p>\n\n<pre><code>@users.each do |user|\n  valid_users &lt;&lt; user if user.valid?   #and this is where i need to validate `user` within not just DB, but within @users aswell\nend\n</code></pre>\n\n<p>How do i achieve this?</p>\n"}, {"tags": ["javascript", "ruby-on-rails", "ruby", "angularjs", "django"], "comments": [{"owner": {"reputation": 3335, "user_id": 465311, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/b8fac58b927d2d263defca6e9e31c2e2?s=128&d=identicon&r=PG", "display_name": "masimplo", "link": "https://stackoverflow.com/users/465311/masimplo"}, "edited": false, "score": 1, "creation_date": 1435132965, "post_id": 31020890, "comment_id": 50067213, "body": "You can use your build system (grunt/gulp etc) to generate a .js file as an angular module from your html templates and include that in your index.html. Angular will resolve templates from there if found."}], "answers": [{"tags": [], "owner": {"reputation": 3335, "user_id": 465311, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/b8fac58b927d2d263defca6e9e31c2e2?s=128&d=identicon&r=PG", "display_name": "masimplo", "link": "https://stackoverflow.com/users/465311/masimplo"}, "is_accepted": true, "score": 1, "last_activity_date": 1435133669, "creation_date": 1435133669, "answer_id": 31021216, "question_id": 31020890, "link": "https://stackoverflow.com/questions/31020890/angularjs-load-partials-in-the-beginning-and-not-at-when-needed-in-django/31021216#31021216", "title": "AngularJS load partials in the beginning and not at when needed in django?", "body": "<p>Depending on your build system, there are plugins that can take care of this for you.</p>\n\n<p>For GruntJS:\n<a href=\"https://www.npmjs.com/package/grunt-angular-templates\" rel=\"nofollow\">https://www.npmjs.com/package/grunt-angular-templates</a></p>\n\n<p>and for Gulp:\n<a href=\"https://www.npmjs.com/package/gulp-angular-templatecache\" rel=\"nofollow\">https://www.npmjs.com/package/gulp-angular-templatecache</a></p>\n\n<p>just point them to your html files and they will create a javascript file that looks like:</p>\n\n<pre><code>  angular.module('app').run([\"$templateCache\", function($templateCache) {\n  $templateCache.put(\"home.html\",\n    // contents for home.html ... \n  );\n</code></pre>\n\n<p>and will resolve the templates from there instead of making an http request to fetch the actual files.\nYou just need to include this js file along with your app script tags and you are good to go.</p>\n"}, {"tags": [], "owner": {"reputation": 1507, "user_id": 1165579, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/932909cb1e2fa3fd3536f87b15a5fbed?s=128&d=identicon&r=PG", "display_name": "Mikalai", "link": "https://stackoverflow.com/users/1165579/mikalai"}, "is_accepted": false, "score": 0, "last_activity_date": 1435133949, "creation_date": 1435133949, "answer_id": 31021313, "question_id": 31020890, "link": "https://stackoverflow.com/questions/31020890/angularjs-load-partials-in-the-beginning-and-not-at-when-needed-in-django/31021313#31021313", "title": "AngularJS load partials in the beginning and not at when needed in django?", "body": "<p>You can insert templates in index.html like here:</p>\n\n<pre><code>&lt;script type=\"text/ng-template\" id=\"/landing-partial\"&gt;\n  Content of the template.\n&lt;/script&gt;\n&lt;script type=\"text/ng-template\" id=\"/query-partial\"&gt;\n  Content of the template.\n&lt;/script&gt;\n</code></pre>\n\n<p>After that you can use these templates in your router:</p>\n\n<pre><code>var myApp = angular.module('myApp', []).\nconfig(['$routeProvider', function ($routeProvider) {\n$routeProvider.\n    when('/landing', {\n        templateUrl: '/landing-partial',\n        controller: landingController\n    }).\n    when('/:wkspId/query', {\n        templateUrl: '/query-partial',\n        controller: queryController\n    }).\n    otherwise({\n        redirectTo: '/landing'\n    });\n}]);\n</code></pre>\n\n<p>It works similar to provided by you module. After angular bootstrapping templates  will be put to $templateCache and can be used anywhere.</p>\n"}], "owner": {"reputation": 3945, "user_id": 2439751, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/7ec8c1b97d2764dc413ae540e943ace4?s=128&d=identicon&r=PG", "display_name": "Navneet", "link": "https://stackoverflow.com/users/2439751/navneet"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 439, "favorite_count": 0, "accepted_answer_id": 31021216, "answer_count": 2, "score": 1, "last_activity_date": 1435133949, "creation_date": 1435132617, "question_id": 31020890, "link": "https://stackoverflow.com/questions/31020890/angularjs-load-partials-in-the-beginning-and-not-at-when-needed-in-django", "title": "AngularJS load partials in the beginning and not at when needed in django?", "body": "<p>I have the template folder in django where all the templates/partials for my app resides. I want to load all my partials to the template cache of the angular at the beginning instead as per controller request.</p>\n\n<p>I have route setup like this:</p>\n\n<pre><code>var myApp = angular.module('myApp', []).\nconfig(['$routeProvider', function ($routeProvider) {\n$routeProvider.\n    when('/landing', {\n        templateUrl: '/landing-partial',\n        controller: landingController\n    }).\n    when('/:wkspId/query', {\n        templateUrl: '/query-partial',\n        controller: queryController\n    }).\n    otherwise({\n        redirectTo: '/landing'\n    });\n}]);\n</code></pre>\n\n<p>I want to solution similar to this rails gem(<a href=\"https://github.com/pitr/angular-rails-templates\" rel=\"nofollow\">https://github.com/pitr/angular-rails-templates</a>) in django.</p>\n"}, {"tags": ["ruby", "puppet"], "comments": [{"owner": {"reputation": 12428, "user_id": 213421, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c64e85336d611bcac9ecfd54baa81cf2?s=128&d=identicon&r=PG", "display_name": "Chris Pitman", "link": "https://stackoverflow.com/users/213421/chris-pitman"}, "edited": false, "score": 4, "creation_date": 1435153866, "post_id": 31020640, "comment_id": 50081428, "body": "Are you aware that this function will find the puppet master&#39;s php version, not the version on the node being configured?"}, {"owner": {"reputation": 5447, "user_id": 1024322, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/pm2Uh.jpg?s=128&g=1", "display_name": "xorinzor", "link": "https://stackoverflow.com/users/1024322/xorinzor"}, "reply_to_user": {"reputation": 12428, "user_id": 213421, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c64e85336d611bcac9ecfd54baa81cf2?s=128&d=identicon&r=PG", "display_name": "Chris Pitman", "link": "https://stackoverflow.com/users/213421/chris-pitman"}, "edited": false, "score": 0, "creation_date": 1435167416, "post_id": 31020640, "comment_id": 50091100, "body": "At the time I wasn&#39;t and got pointed towards it by a colleague, thanks for the information though as I would&#39;ve continued thinking it would&#39;ve been the client&#39;s version.   Either way I&#39;m still quite curious as to how to solve this issue so I can prevent/fix it in the future"}], "answers": [{"comments": [{"owner": {"reputation": 12428, "user_id": 213421, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c64e85336d611bcac9ecfd54baa81cf2?s=128&d=identicon&r=PG", "display_name": "Chris Pitman", "link": "https://stackoverflow.com/users/213421/chris-pitman"}, "edited": false, "score": 0, "creation_date": 1435204037, "post_id": 31038465, "comment_id": 50105021, "body": "Looks like the quotes in the exec need to be escaped."}], "tags": [], "owner": {"reputation": 4497, "user_id": 2417812, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/b93b8e30afdedfaae41d81f412b9085e?s=128&d=identicon&r=PG", "display_name": "Peter Souter", "link": "https://stackoverflow.com/users/2417812/peter-souter"}, "is_accepted": true, "score": 3, "last_activity_date": 1435186187, "creation_date": 1435186187, "answer_id": 31038465, "question_id": 31020640, "link": "https://stackoverflow.com/questions/31020640/puppet-ruby-wrong-number-of-arguments-1-for-0/31038465#31038465", "title": "puppet ruby wrong number of arguments (1 for 0)", "body": "<p>If you're trying to get the version of php, it'd probably be easier to do it as a fact:</p>\n\n<pre><code>Facter.add(:phpversion) do\n  setcode do\n    if Facter::Util::Resolution.which('php')\n      Facter::Util::Resolution.exec('/usr/bin/php -r 'echo PHP_MAJOR_VERSION . \\\".\\\" . PHP_MINOR_VERSION;'\"').lines.first.split(/\"/)[1].strip\n    end\n  end\nend\n</code></pre>\n\n<p>Put this a directory <code>lib/facter/</code> in your module, then reference it in your manifest as <code>$::phpversion</code></p>\n"}], "owner": {"reputation": 5447, "user_id": 1024322, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/pm2Uh.jpg?s=128&g=1", "display_name": "xorinzor", "link": "https://stackoverflow.com/users/1024322/xorinzor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1030, "favorite_count": 0, "accepted_answer_id": 31038465, "answer_count": 1, "score": 0, "last_activity_date": 1435186187, "creation_date": 1435131834, "question_id": 31020640, "link": "https://stackoverflow.com/questions/31020640/puppet-ruby-wrong-number-of-arguments-1-for-0", "title": "puppet ruby wrong number of arguments (1 for 0)", "body": "<p>First off, I know there are a lot of questions regarding this error and I have checked them all, mine is not solved using any of their solutions however.</p>\n\n<p>I am working for the first time with Puppet / Ruby and am having the following issue.</p>\n\n<p>I created this function:</p>\n\n<pre><code>module Puppet::Parser::Functions\n    newfunction(:phpversion, :type =&gt; :rvalue) do\n        %x[\"/usr/bin/php -r 'echo PHP_MAJOR_VERSION . \\\".\\\" . PHP_MINOR_VERSION;'\"]\n    end\nend\n</code></pre>\n\n<p>And when I call it in my manifest file using:</p>\n\n<pre><code>$phpversion = phpversion()\n</code></pre>\n\n<p>It throws, when I execute the agent, the error \"<code>Error: Could not retrieve catalog from remote server: Error 400 on SERVER: wrong number of arguments (1 for 0) at /etc/puppetlabs/puppet/modules/x/manifests/somefile.pp:123 on node foo.example.bar\"</code></p>\n\n<p>I tried adding <code>|args|</code> after the <code>do</code> statement and removing <code>:type</code> but it keeps throwing the same error. when I use <code>$phpversion = phpversion</code> it just thinks its a text string instead of a function (which I expected, but tried anyway).</p>\n\n<p>Any help would be greatly appreciated.</p>\n"}, {"tags": ["ruby", "opalrb"], "answers": [{"tags": [], "owner": {"reputation": 979, "user_id": 601782, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c82630c82a3c675d2928804f432fcf17?s=128&d=identicon&r=PG", "display_name": "Elia Schito", "link": "https://stackoverflow.com/users/601782/elia-schito"}, "is_accepted": true, "score": 1, "last_activity_date": 1435148435, "creation_date": 1435148435, "answer_id": 31026406, "question_id": 31020612, "link": "https://stackoverflow.com/questions/31020612/opal-rb-eval-method-throws-undefined-method/31026406#31026406", "title": "Opal rb eval method throws &#39;undefined method&#39;", "body": "<p><code>Kernel#eval</code> <a href=\"https://github.com/opal/opal/blob/master/stdlib/opal-parser.rb#L7-L10\" rel=\"nofollow\">is defined in opal-parser</a> as it needs to be able to parse Ruby into JS in the browser, so you need to <code>require \"opal-parser\"</code> first.</p>\n"}], "owner": {"reputation": 625, "user_id": 4338130, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/b6d3e0ab83a934b9a7fa02afe81a5902?s=128&d=identicon&r=PG&f=1", "display_name": "ClassyPimp", "link": "https://stackoverflow.com/users/4338130/classypimp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 135, "favorite_count": 0, "accepted_answer_id": 31026406, "answer_count": 1, "score": 0, "last_activity_date": 1435148435, "creation_date": 1435131759, "last_edit_date": 1435134932, "question_id": 31020612, "link": "https://stackoverflow.com/questions/31020612/opal-rb-eval-method-throws-undefined-method", "title": "Opal rb eval method throws &#39;undefined method&#39;", "body": "<p>Doesn't Opal.rb have an eval method?\nUsing eval both in classes and outside throws <code>undefined method 'eval'</code>\nEverything else works fine. </p>\n"}, {"tags": ["arrays", "ruby", "object", "attributes", "unique"], "comments": [{"owner": {"reputation": 14827, "user_id": 645886, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2abb0123e9484284a9cb2d36aa9854b3?s=128&d=identicon&r=PG&f=1", "display_name": "Surya", "link": "https://stackoverflow.com/users/645886/surya"}, "edited": false, "score": 0, "creation_date": 1435132041, "post_id": 31020571, "comment_id": 50066622, "body": "Hash you have posted is not valid. Please post the correct hash."}], "answers": [{"comments": [{"owner": {"reputation": 1412, "user_id": 524226, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/J9KIG.jpg?s=128&g=1", "display_name": "Jakub Zak", "link": "https://stackoverflow.com/users/524226/jakub-zak"}, "edited": false, "score": 0, "creation_date": 1435132457, "post_id": 31020674, "comment_id": 50066894, "body": "Returns only one object/hash."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 1412, "user_id": 524226, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/J9KIG.jpg?s=128&g=1", "display_name": "Jakub Zak", "link": "https://stackoverflow.com/users/524226/jakub-zak"}, "edited": false, "score": 0, "creation_date": 1435132479, "post_id": 31020674, "comment_id": 50066909, "body": "Exactly as you requested."}, {"owner": {"reputation": 1412, "user_id": 524226, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/J9KIG.jpg?s=128&g=1", "display_name": "Jakub Zak", "link": "https://stackoverflow.com/users/524226/jakub-zak"}, "edited": false, "score": 0, "creation_date": 1435132879, "post_id": 31020674, "comment_id": 50067160, "body": "No, you must have misunderstood, like I said my outcome in this example wold be three hashes/objects. You can see expected outcome in my question. Sorry if my explanation didn&#39;t make that clear, english is a second language for me."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 1412, "user_id": 524226, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/J9KIG.jpg?s=128&g=1", "display_name": "Jakub Zak", "link": "https://stackoverflow.com/users/524226/jakub-zak"}, "edited": false, "score": 1, "creation_date": 1435132990, "post_id": 31020674, "comment_id": 50067231, "body": "Go give it a try. It returns exactly the result you requested."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1435135923, "post_id": 31020674, "comment_id": 50068907, "body": "Consider <a href=\"http://ruby-doc.org/core-2.2.2/Enumerable.html#method-i-max_by\" rel=\"nofollow noreferrer\">Enumerable#max_by</a> rather than sorting."}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": true, "score": 4, "last_activity_date": 1435137811, "last_edit_date": 1435137811, "creation_date": 1435131955, "answer_id": 31020674, "question_id": 31020571, "link": "https://stackoverflow.com/questions/31020571/return-array-of-objects-hashes-sorted-by-attributes/31020674#31020674", "title": "Return Array of Objects/Hashes sorted by attributes", "body": "<p>Assuming you have your input in <code>arr</code>:</p>\n\n<pre><code>arr.group_by do |h| \n  h['mid']                   # group same mids\nend.values.map do |all|\n  all.max_by do |h|\n    Date.parse h['updated']  # pick latest by date\n  end\nend\n\n#\u21d2 [\n#    {\"mid\"=&gt;123, \"updated\"=&gt;\"2015-05-05 05:05:07\"},\n#    {\"mid\"=&gt;456, \"updated\"=&gt;\"2015-05-05 05:06:05\"},\n#    {\"mid\"=&gt;789, \"updated\"=&gt;\"2015-05-05 05:05:05\"}\n# ]\n</code></pre>\n\n<p>Please avoid writing phpish code using ruby syntax.</p>\n\n<p><strong>UPD</strong> Credits to Cary Swoveland, <code>sort_by+last</code> reduced to <code>max_by</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 1412, "user_id": 524226, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/J9KIG.jpg?s=128&g=1", "display_name": "Jakub Zak", "link": "https://stackoverflow.com/users/524226/jakub-zak"}, "edited": false, "score": 0, "creation_date": 1435132291, "post_id": 31020762, "comment_id": 50066786, "body": "That produces only one object/hash."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1435132409, "post_id": 31020762, "comment_id": 50066852, "body": "Apparently not every hash has an indirect access. <i>Hint</i>: OP has string keys."}, {"owner": {"reputation": 8160, "user_id": 163640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d63f02794544d271573750a83842cf59?s=128&d=identicon&r=PG", "display_name": "eugen", "link": "https://stackoverflow.com/users/163640/eugen"}, "edited": false, "score": 0, "creation_date": 1435133112, "post_id": 31020762, "comment_id": 50067289, "body": "If your hash objects in the array don&#39;t have symbol keys, use strings, but the code should work."}], "tags": [], "owner": {"reputation": 8160, "user_id": 163640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d63f02794544d271573750a83842cf59?s=128&d=identicon&r=PG", "display_name": "eugen", "link": "https://stackoverflow.com/users/163640/eugen"}, "is_accepted": false, "score": -1, "last_activity_date": 1435133071, "last_edit_date": 1435133071, "creation_date": 1435132186, "answer_id": 31020762, "question_id": 31020571, "link": "https://stackoverflow.com/questions/31020571/return-array-of-objects-hashes-sorted-by-attributes/31020762#31020762", "title": "Return Array of Objects/Hashes sorted by attributes", "body": "<p>You can use something like:</p>\n\n<pre><code>queue.sort_by { |r| DateTime.parse(r[:updated]) }.reverse.uniq { |r| r[:mid] }\n\n# =&gt; [{:mid=&gt;456, :updated=&gt;\"2015-05-05 05:06:05\"}, {:mid=&gt;123, :updated=&gt;\"2015-05-05 05:05:07\"}, {:mid=&gt;789, :updated=&gt;\"2015-05-05 05:05:05\"}]\n</code></pre>\n\n<p>where <code>queue</code> is your input array.</p>\n"}], "owner": {"reputation": 1412, "user_id": 524226, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/J9KIG.jpg?s=128&g=1", "display_name": "Jakub Zak", "link": "https://stackoverflow.com/users/524226/jakub-zak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "accepted_answer_id": 31020674, "answer_count": 2, "score": -2, "last_activity_date": 1435137811, "creation_date": 1435131611, "last_edit_date": 1435133559, "question_id": 31020571, "link": "https://stackoverflow.com/questions/31020571/return-array-of-objects-hashes-sorted-by-attributes", "title": "Return Array of Objects/Hashes sorted by attributes", "body": "<p>I have an array of objects, in this example represented as hashes:</p>\n\n<pre><code>[\n { \"mid\" =&gt; 123, \"updated\" =&gt; \"2015-05-05 05:05:05\"}\n { \"mid\" =&gt; 456, \"updated\" =&gt; \"2015-05-05 05:06:05\"}\n { \"mid\" =&gt; 789, \"updated\" =&gt; \"2015-05-05 05:05:05\"}\n { \"mid\" =&gt; 123, \"updated\" =&gt; \"2015-05-05 05:05:07\"}\n { \"mid\" =&gt; 456, \"updated\" =&gt; \"2015-05-05 05:05:05\"}\n]\n</code></pre>\n\n<p>And I need to get back only elements with the unique mid, in a process of selecting unique objects, timestamp needs to be taken to consideration, where higher datetime is the one to return. So my examples outcome would be:</p>\n\n<pre><code>[\n { \"mid\" =&gt; 456, \"updated\" =&gt; \"2015-05-05 05:06:05\"}\n { \"mid\" =&gt; 789, \"updated\" =&gt; \"2015-05-05 05:05:05\"}\n { \"mid\" =&gt; 123, \"updated\" =&gt; \"2015-05-05 05:05:07\"}\n]\n</code></pre>\n\n<p>I tried couple of different approaches, but I have a problem with my logic, I always get 20 objects back instead of 3. Here is my code:</p>\n\n<pre><code>res = []\nqueue.length.times do\n    a = queue.pop\n    queue.each do |job|\n        if a.mid == job.mid\n            if DateTime.parse(a.updated) &gt;= DateTime.parse(a.updated)\n                res &lt;&lt; a\n            end\n        else\n            res &lt;&lt; a\n        end\n    end\n    queue &lt;&lt; a\nend\n</code></pre>\n\n<p>Any idea?</p>\n"}, {"tags": ["ruby", "prawn"], "comments": [{"owner": {"reputation": 15010, "user_id": 567863, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/abda861707b1e78e0fce47ced55f84ee?s=128&d=identicon&r=PG", "display_name": "Paul Fioravanti", "link": "https://stackoverflow.com/users/567863/paul-fioravanti"}, "edited": false, "score": 1, "creation_date": 1435134107, "post_id": 31020348, "comment_id": 50067830, "body": "I copy and pasted your code and tried it out, and for me the LAW-2013 part wasn&#39;t line breaking (all was displaying as I would expect).  Maybe it has to do with the versions of the Prawn gems you&#39;re using...? (I&#39;m used prawn 2.0.1 and prawn-table 0.2.1 to generate the PDF, the latest versions at the time of this writing)"}, {"owner": {"reputation": 20389, "user_id": 1620210, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/8f130b2fa9903fca10a10b31ed3f7b94?s=128&d=identicon&r=PG", "display_name": "Kokizzu", "link": "https://stackoverflow.com/users/1620210/kokizzu"}, "reply_to_user": {"reputation": 15010, "user_id": 567863, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/abda861707b1e78e0fce47ced55f84ee?s=128&d=identicon&r=PG", "display_name": "Paul Fioravanti", "link": "https://stackoverflow.com/users/567863/paul-fioravanti"}, "edited": false, "score": 0, "creation_date": 1435143138, "post_id": 31020348, "comment_id": 50073781, "body": "ah wait, my bad, i use shorter data on stackoverflow. The real data has long text on the 4th till the last cell columns on another rows"}], "owner": {"reputation": 20389, "user_id": 1620210, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/8f130b2fa9903fca10a10b31ed3f7b94?s=128&d=identicon&r=PG", "display_name": "Kokizzu", "link": "https://stackoverflow.com/users/1620210/kokizzu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 59, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1435143055, "creation_date": 1435130892, "last_edit_date": 1435143055, "question_id": 31020348, "link": "https://stackoverflow.com/questions/31020348/kmake-prawnpdf-table-cell-do-not-break", "title": "KMake PrawnPDF table cell do not break", "body": "<p>How to make <code>prawnpdf</code> cell do not break?</p>\n\n<pre><code>require 'prawn'\nrequire 'prawn/table'\n\nt = [\n  ['No.', 'Batch', 'Prog Session', 'Class Group', 'Subject', 'Lecturer', 'Coord. By', 'Room', 'Time', 'Merged', 'Capacity'],      \n  ['1', 'LAW-2013', 'M', 'Class 1', 'MEDIA AND IT LAW', 'Muhammad Abdul Sholeh', '', '', '', 'Merged with another class', '40']\n]\n\nPrawn::Document.generate(OUTFILE, page_layout: :landscape) do\n  text 'foo'\n  font_size 9\n  table t, header: true\nend\n</code></pre>\n\n<p><img src=\"https://i.stack.imgur.com/0edoe.png\" alt=\"broken cell\"></p>\n\n<p>the 'LAW-2013' part is breaking, I need it in one line.</p>\n"}, {"tags": ["ruby", "windows", "openssl"], "comments": [{"owner": {"reputation": 16538, "user_id": 2602869, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PkMYa.jpg?s=128&g=1", "display_name": "Jikku Jose", "link": "https://stackoverflow.com/users/2602869/jikku-jose"}, "edited": false, "score": 1, "creation_date": 1435129868, "post_id": 31019796, "comment_id": 50065293, "body": "Side note: You should update your Ruby version, its too dated."}], "answers": [{"comments": [{"owner": {"reputation": 396, "user_id": 751756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28a292b3b588b0818326d839e499cdf4?s=128&d=identicon&r=PG", "display_name": "Sukeerthi Adiga", "link": "https://stackoverflow.com/users/751756/sukeerthi-adiga"}, "edited": false, "score": 0, "creation_date": 1540197516, "post_id": 31030521, "comment_id": 92759873, "body": "What about the openssl.so file? Can that remain same?"}, {"owner": {"reputation": 4288, "user_id": 527152, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c784b2e1c3fb28d8bad8f50ca0282b4?s=128&d=identicon&r=PG", "display_name": "Azolo", "link": "https://stackoverflow.com/users/527152/azolo"}, "reply_to_user": {"reputation": 396, "user_id": 751756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28a292b3b588b0818326d839e499cdf4?s=128&d=identicon&r=PG", "display_name": "Sukeerthi Adiga", "link": "https://stackoverflow.com/users/751756/sukeerthi-adiga"}, "edited": false, "score": 0, "creation_date": 1540294090, "post_id": 31030521, "comment_id": 92803826, "body": "In MOST cases yes. There are probably some cases that I can&#39;t think of where it wouldn&#39;t work."}], "tags": [], "owner": {"reputation": 4288, "user_id": 527152, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c784b2e1c3fb28d8bad8f50ca0282b4?s=128&d=identicon&r=PG", "display_name": "Azolo", "link": "https://stackoverflow.com/users/527152/azolo"}, "is_accepted": true, "score": 1, "last_activity_date": 1435159149, "creation_date": 1435159149, "answer_id": 31030521, "question_id": 31019796, "link": "https://stackoverflow.com/questions/31019796/how-to-update-openssl-module-which-is-associated-with-ruby-on-windows/31030521#31030521", "title": "how to update openssl module which is associated with ruby on Windows?", "body": "<p>You can drag and drop the respective OpenSSL DLL files <code>[libeay32.dll, ssleay32.dll]</code> into the Ruby bin folder, <em>replacing the old versions</em>, and it will use those DLLs as a replacement.</p>\n\n<p>However <code>OpenSSL::OPENSSL_VERSION</code> is set at compile time and will not reflect the version of the libraries you may be using. To check the version you would have to access the library directly from Ruby and ask it.</p>\n\n<p>For <code>OpenSSL::OPENSSL_VERSION</code> to reflect the version you're using you will have to recompile Ruby using that version.</p>\n\n<p>The <a href=\"https://bintray.com/oneclick/OpenKnapsack\" rel=\"nofollow\">OpenKnapsack Project</a> has compiled versions of the binaries you can use. Alternatively, you can compile your own.</p>\n\n<p>Since Ruby 1.9.3 has reached it's <strong>End of Life</strong> date, I can't guarantee any of the new OpenSSL versions will actually work with it.</p>\n"}], "owner": {"reputation": 171, "user_id": 3890904, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/8U3EL.png?s=128&g=1", "display_name": "owgitt", "link": "https://stackoverflow.com/users/3890904/owgitt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 749, "favorite_count": 1, "accepted_answer_id": 31030521, "answer_count": 1, "score": 0, "last_activity_date": 1435159149, "creation_date": 1435129278, "question_id": 31019796, "link": "https://stackoverflow.com/questions/31019796/how-to-update-openssl-module-which-is-associated-with-ruby-on-windows", "title": "how to update openssl module which is associated with ruby on Windows?", "body": "<p>Is it possible to update the openssl module which is associated with ruby on Windows?</p>\n\n<p>If yes, how?</p>\n\n<p>Following are the gem details installed on my Windows:</p>\n\n<blockquote>\n  <p>gem -v</p>\n</blockquote>\n\n<pre><code>1.8.1.6\n</code></pre>\n\n<blockquote>\n  <p>ruby --version</p>\n</blockquote>\n\n<pre><code>ruby 1.9.3p125 (2012-02-16) [i386-mingw32]\n</code></pre>\n\n<blockquote>\n  <p>ruby -ropenssl -e 'puts OpenSSL::OPENSSL_VERSION'</p>\n</blockquote>\n\n<pre><code>OpenSSL 1.0.0k 5 Feb 2013\n</code></pre>\n"}, {"tags": ["ruby", "operators"], "comments": [{"owner": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "edited": false, "score": 0, "creation_date": 1435129339, "post_id": 31019746, "comment_id": 50064964, "body": "Because for some <code>i</code>, <code>fibo[i]</code> doesn&#39;t exist."}, {"owner": {"reputation": 110733, "user_id": 1009479, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/wlrC5.jpg?s=128&g=1", "display_name": "Yu Hao", "link": "https://stackoverflow.com/users/1009479/yu-hao"}, "edited": false, "score": 1, "creation_date": 1435129347, "post_id": 31019746, "comment_id": 50064969, "body": "You never modified <code>fibo</code>, it&#39;s always an <code>Array</code> that has one element."}, {"owner": {"reputation": 110733, "user_id": 1009479, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/wlrC5.jpg?s=128&g=1", "display_name": "Yu Hao", "link": "https://stackoverflow.com/users/1009479/yu-hao"}, "edited": false, "score": 0, "creation_date": 1435129456, "post_id": 31019746, "comment_id": 50065047, "body": "Also, why are you using <code>for r in 1..4000000</code> and give <code>r</code> a new value immediately in the iteration? My suggestion is: learn how to debug, not necessarily an advanced debugger, just starts with using <code>puts</code> and <code>p</code> to output values of variables and debug."}, {"owner": {"reputation": 1257, "user_id": 764110, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/9872112655afa82c2bc7a6dedbc4d173?s=128&d=identicon&r=PG", "display_name": "Kranthi", "link": "https://stackoverflow.com/users/764110/kranthi"}, "edited": false, "score": 0, "creation_date": 1435129534, "post_id": 31019746, "comment_id": 50065101, "body": "Also dont use <code>for</code> loop. ruby has <code>each</code> and others"}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1435133714, "post_id": 31019746, "comment_id": 50067589, "body": "What is your question?"}, {"owner": {"reputation": 41, "user_id": 2089628, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d26e59b10a987dd9b652ec574ab3a372?s=128&d=identicon&r=PG", "display_name": "AbsoluteBeginner", "link": "https://stackoverflow.com/users/2089628/absolutebeginner"}, "edited": false, "score": 0, "creation_date": 1435168447, "post_id": 31019746, "comment_id": 50091745, "body": "My question was - why is the error being shown? I think the term &#39;not sure why&#39; makes that sufficiently clear.  I figured out the answer. The assignment operator needed to be reversed. (See below.)"}], "answers": [{"tags": [], "owner": {"reputation": 1257, "user_id": 764110, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/9872112655afa82c2bc7a6dedbc4d173?s=128&d=identicon&r=PG", "display_name": "Kranthi", "link": "https://stackoverflow.com/users/764110/kranthi"}, "is_accepted": false, "score": 0, "last_activity_date": 1435129413, "creation_date": 1435129413, "answer_id": 31019848, "question_id": 31019746, "link": "https://stackoverflow.com/questions/31019746/undefined-method-for-nilnilclass-nomethoderror-trying-to-build-an-array/31019848#31019848", "title": "undefined method `+&#39; for nil:NilClass (NoMethodError) *Trying to build an array*", "body": "<p>In your case fibo has only one element in array. you are trying to get element from index 1(i). which is causing error</p>\n"}, {"comments": [{"owner": {"reputation": 41, "user_id": 2089628, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d26e59b10a987dd9b652ec574ab3a372?s=128&d=identicon&r=PG", "display_name": "AbsoluteBeginner", "link": "https://stackoverflow.com/users/2089628/absolutebeginner"}, "edited": false, "score": 0, "creation_date": 1435130035, "post_id": 31019862, "comment_id": 50065389, "body": "These are the changes I made:  fibo = [] fibo[0]=1 fibo[1]= 2  .....    r=fibo[i]   t=fibo[i-1]   s=r+t   r+=s   i+=1 end  I still get the same error."}], "tags": [], "owner": {"reputation": 3074, "user_id": 1833232, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/48vBr.jpg?s=128&g=1", "display_name": "Naim Rajiv", "link": "https://stackoverflow.com/users/1833232/naim-rajiv"}, "is_accepted": false, "score": 2, "last_activity_date": 1435129467, "creation_date": 1435129467, "answer_id": 31019862, "question_id": 31019746, "link": "https://stackoverflow.com/questions/31019746/undefined-method-for-nilnilclass-nomethoderror-trying-to-build-an-array/31019862#31019862", "title": "undefined method `+&#39; for nil:NilClass (NoMethodError) *Trying to build an array*", "body": "<p>In your assign fibo=[1] that means fibo[0] = 1 but what is the value of fibo[1] ?</p>\n\n<pre><code>fibo[1]  will be nill\n\nr=fibo[i] # r = 1\nt=fibo[i-1] # t = nil\n\ns=r+t # will show undefined method for nill\n</code></pre>\n\n<p>To fix your issue, assign </p>\n\n<pre><code> fibo[1] = 1\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 41, "user_id": 2089628, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d26e59b10a987dd9b652ec574ab3a372?s=128&d=identicon&r=PG", "display_name": "AbsoluteBeginner", "link": "https://stackoverflow.com/users/2089628/absolutebeginner"}, "is_accepted": false, "score": 0, "last_activity_date": 1435168616, "last_edit_date": 1435168616, "creation_date": 1435130528, "answer_id": 31020242, "question_id": 31019746, "link": "https://stackoverflow.com/questions/31019746/undefined-method-for-nilnilclass-nomethoderror-trying-to-build-an-array/31020242#31020242", "title": "undefined method `+&#39; for nil:NilClass (NoMethodError) *Trying to build an array*", "body": "<p>The error was fixed by reversing how I wrote the assignment operator. Instead of</p>\n\n<pre><code>r=fibo[i]\nt=fibo[i-1]\ns=r+t\n</code></pre>\n\n<p>I did</p>\n\n<pre><code>fibo[i]=r\nfibo[i-1]=t\ns=r+t\n</code></pre>\n\n<p>This is because since the code is read right to left, the fibo[i] parts (which were nil) were being assigned to the variables. The variables then could not be operated on.</p>\n\n<p>Once the initialized variables were instead first assigned to the array indices, the array indices were not nil, and the variables themselves could be operated on. </p>\n"}], "owner": {"reputation": 41, "user_id": 2089628, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d26e59b10a987dd9b652ec574ab3a372?s=128&d=identicon&r=PG", "display_name": "AbsoluteBeginner", "link": "https://stackoverflow.com/users/2089628/absolutebeginner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1435168616, "creation_date": 1435129127, "last_edit_date": 1435129611, "question_id": 31019746, "link": "https://stackoverflow.com/questions/31019746/undefined-method-for-nilnilclass-nomethoderror-trying-to-build-an-array", "title": "undefined method `+&#39; for nil:NilClass (NoMethodError) *Trying to build an array*", "body": "<p>I am getting the \"undefined method '+'\" eror on line 11. Not sure why.</p>\n\n<pre><code>#Make an array of Fibonacci numbers till 4 million\nr=2\ni=1\nfibo=[1]\ns=0\nt=0\n\nfor r in 1..4000000\n  r=fibo[i]\n  t=fibo[i-1]\n  s=r+t\n  r+=s\n  i+=1\nend\n\nputs fibo\n</code></pre>\n"}, {"tags": ["ruby", "selenium-webdriver"], "comments": [{"owner": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "edited": false, "score": 0, "creation_date": 1435150256, "post_id": 31019637, "comment_id": 50078654, "body": "If you are looking for only one element, perhaps you meant to use <code>find_element</code> instead of <code>find_elements</code>?"}, {"owner": {"reputation": 75, "user_id": 1666580, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/Avdx4.jpg?s=128&g=1", "display_name": "Sakib", "link": "https://stackoverflow.com/users/1666580/sakib"}, "reply_to_user": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "edited": false, "score": 0, "creation_date": 1435218923, "post_id": 31019637, "comment_id": 50111330, "body": "Tried with find_element but noting happens. This line was skipped and rest of the code was executed. Also there was no error in console."}], "answers": [{"comments": [{"owner": {"reputation": 75, "user_id": 1666580, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/Avdx4.jpg?s=128&g=1", "display_name": "Sakib", "link": "https://stackoverflow.com/users/1666580/sakib"}, "edited": false, "score": 0, "creation_date": 1435218834, "post_id": 31023094, "comment_id": 50111254, "body": "Tried your code, but no hope. It looks like this statement has been skipped cause there is no error."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 75, "user_id": 1666580, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/Avdx4.jpg?s=128&g=1", "display_name": "Sakib", "link": "https://stackoverflow.com/users/1666580/sakib"}, "edited": false, "score": 0, "creation_date": 1435219032, "post_id": 31023094, "comment_id": 50111399, "body": "You have asked: \u201cIs it possible to get element by class?\u201d The answer above correctly answers this question. Whether you have some other questions, please, post them separately."}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 0, "last_activity_date": 1435138935, "creation_date": 1435138935, "answer_id": 31023094, "question_id": 31019637, "link": "https://stackoverflow.com/questions/31019637/is-it-possible-to-get-element-by-class-in-selenium-webdriver-ruby/31023094#31023094", "title": "Is it possible to get element by class in selenium webdriver ruby?", "body": "<p>You obviously <strong>got</strong> element<strong>s</strong> by class. Look:</p>\n\n<blockquote>\n  <p>undefined method `send_keys' for [# Selenium::WebDriver::Element:0x65990040 id=\"33\"]:Array</p>\n</blockquote>\n\n<p>the error above clearly says: the call to <code>find_elements</code> succeeded and returned an <code>Array</code> instance, containing <code>Element</code>s. Everything you now need is to either <code>send_keys</code> to each found element:</p>\n\n<pre><code>driver.find_elements(:class, \"qa-share-message\").each do |e|\n  e.send_keys(\"This is a test message\")\nend\n</code></pre>\n\n<p>or to send it to one of them, e.g. to the very first one:</p>\n\n<pre><code>driver.find_elements(:class, \"qa-share-message\")\n      .first\n      .send_keys(\"This is a test message\")\n</code></pre>\n"}], "owner": {"reputation": 75, "user_id": 1666580, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/Avdx4.jpg?s=128&g=1", "display_name": "Sakib", "link": "https://stackoverflow.com/users/1666580/sakib"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1871, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1435138935, "creation_date": 1435128798, "question_id": 31019637, "link": "https://stackoverflow.com/questions/31019637/is-it-possible-to-get-element-by-class-in-selenium-webdriver-ruby", "title": "Is it possible to get element by class in selenium webdriver ruby?", "body": "<p>I have a class like this:</p>\n\n<pre><code>&lt;div class=\"qa-share-message ng-isolate-scope ng-valid ta-root\nng-dirty focussed\" ng-model=\"message\" text-angular=\"\"&gt;\n</code></pre>\n\n<p>I want to type in this field. i have tried this:  </p>\n\n<pre><code>driver.find_elements(:class, \"qa-share-message\").send_keys(\"This is a test message\")\n</code></pre>\n\n<p>After running the code it shows error:  </p>\n\n<pre><code>undefined method `send_keys' for [#&lt;Selenium::WebDriver::Element:0x65990040 id=\"33\"&gt;]:Array\n</code></pre>\n\n<p>Is it possible to get element by class?</p>\n"}, {"tags": ["ruby", "chef-infra", "x509certificate", "embedded-ruby"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1435128631, "post_id": 31019137, "comment_id": 50064540, "body": "Did you tried <code>knife ssl check</code>/<code>knife ssl fetch</code> as suggested?"}, {"owner": {"reputation": 170, "user_id": 1584256, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/cEQhb.jpg?s=128&g=1", "display_name": "Rahul", "link": "https://stackoverflow.com/users/1584256/rahul"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1435128754, "post_id": 31019137, "comment_id": 50064620, "body": "Yes i have already done that as said in the post , the connection is established but fails on more hierarchial directory structure or many files,the ouput for the same is:- Connecting to host xyz:443 Successfully verified certificates from `xyz.com&#39;"}, {"owner": {"reputation": 15030, "user_id": 3627607, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd5fd623c0fdd0c93a2535cf6293ec5d?s=128&d=identicon&r=PG", "display_name": "Tensibai", "link": "https://stackoverflow.com/users/3627607/tensibai"}, "edited": false, "score": 2, "creation_date": 1435130179, "post_id": 31019137, "comment_id": 50065475, "body": "may you try with option <code>--concurrency 1</code> (the default is 10) ? I suspect a race condition between many threads uploading files. I think there&#39;s a bug about it that was fixed. If it works with 1, try increasing until it errors again."}, {"owner": {"reputation": 170, "user_id": 1584256, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/cEQhb.jpg?s=128&g=1", "display_name": "Rahul", "link": "https://stackoverflow.com/users/1584256/rahul"}, "edited": false, "score": 0, "creation_date": 1435136580, "post_id": 31019137, "comment_id": 50069314, "body": "Hi i tried with concurrency as 1 it took way too long but returned this :INFO: HTTP Request Returned 403 Forbidden: ERROR: Chef::Exceptions::ContentLengthMismatch: Response body length 0 does not match HTTP Content-Length header 206. Will try to hit once more , had tried with 5 and 2 both times got certificate error again"}, {"owner": {"reputation": 170, "user_id": 1584256, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/cEQhb.jpg?s=128&g=1", "display_name": "Rahul", "link": "https://stackoverflow.com/users/1584256/rahul"}, "edited": false, "score": 0, "creation_date": 1435139500, "post_id": 31019137, "comment_id": 50071359, "body": "I tied again now its giving the below exception :- INFO: HTTP Request Returned 403 Forbidden:ERROR: Failed to upload filepath\\file (7a81e65b51f0d514ec645da49de6417d) to <a href=\"https://example.com:443/bookshelf/organization-00000000000000000000000000000000/checksum-7a81e65b51f0d514ec645da49de6417d?AWSAccessKeyId=6d\" rel=\"nofollow noreferrer\">example.com:443/bookshelf/&hellip;</a> 3088476d373416dfbaf187590b5d5687210a75&amp;Expires=1435139052&amp;Si&zwnj;&#8203;gnature=SP/70MZP4C2U&zwnj;&#8203;dUd9%2B5Ct1jEV1EQ%3D : 403 &quot;Forbidden&quot; &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;Error&gt;&lt;Code&gt;AccessDenied&lt;/Code&gt;&lt;Message&gt;A&zwnj;&#8203;ccess Denied&lt;/Message&gt;&lt;RequestId&gt;g2gCZAATYm9va3NoZWxmQDEyNy4wLjAuM&zwnj;&#8203;WgDYgAABZtiAAIfLWIAA&zwnj;&#8203;HNh&lt;/R"}, {"owner": {"reputation": 170, "user_id": 1584256, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/cEQhb.jpg?s=128&g=1", "display_name": "Rahul", "link": "https://stackoverflow.com/users/1584256/rahul"}, "edited": false, "score": 0, "creation_date": 1435139689, "post_id": 31019137, "comment_id": 50071496, "body": "Reading on a forum i had increased the erchef value of s3_ssl_ttl from 900 to 7200 for Response body length 0 error"}, {"owner": {"reputation": 170, "user_id": 1584256, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/cEQhb.jpg?s=128&g=1", "display_name": "Rahul", "link": "https://stackoverflow.com/users/1584256/rahul"}, "edited": false, "score": 0, "creation_date": 1435140141, "post_id": 31019137, "comment_id": 50071807, "body": "Also the access denied error came with ERROR: You authenticated successfully to <a href=\"https://example.com:443\" rel=\"nofollow noreferrer\">example.com:443</a> as node but you are not authorized for this action Response:  &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;Error&gt;&lt;Code&gt;AccessDenied&lt;/Code&gt;&lt;Message&gt;A&zwnj;&#8203;ccess Denied&lt;/Message&gt;&lt;RequestId&gt;g2gCZAATYm9va3NoZWxmQDEyNy4wLjAuM&zwnj;&#8203;WgDYgAABZtiAAIfLWIAA&zwnj;&#8203;HNh &lt;/RequestId&gt;&lt;HostId&gt;&lt;/HostId&gt;&lt;/Error&gt;"}, {"owner": {"reputation": 15030, "user_id": 3627607, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd5fd623c0fdd0c93a2535cf6293ec5d?s=128&d=identicon&r=PG", "display_name": "Tensibai", "link": "https://stackoverflow.com/users/3627607/tensibai"}, "edited": false, "score": 0, "creation_date": 1435158489, "post_id": 31019137, "comment_id": 50085040, "body": "@Raul Ping people with @ in comments (so there&#39;s a notification) and edit your question to include the new messages, comments are bad to format and unreadable"}, {"owner": {"reputation": 15030, "user_id": 3627607, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd5fd623c0fdd0c93a2535cf6293ec5d?s=128&d=identicon&r=PG", "display_name": "Tensibai", "link": "https://stackoverflow.com/users/3627607/tensibai"}, "edited": false, "score": 0, "creation_date": 1435158603, "post_id": 31019137, "comment_id": 50085149, "body": "So the problem with little concurency is that the Auth_key for the request time out (15 mins max). Could confirm the knife version with <code>knife --version</code> ? (should be <code>Chef : xx.yy.z</code>)"}], "answers": [{"comments": [{"owner": {"reputation": 170, "user_id": 1584256, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/cEQhb.jpg?s=128&g=1", "display_name": "Rahul", "link": "https://stackoverflow.com/users/1584256/rahul"}, "edited": false, "score": 0, "creation_date": 1435223844, "post_id": 31045374, "comment_id": 50114318, "body": "Thanks I will try that out , as far as creating tarball goes i cannot update a file individually from the same cookbook if there is a minor change , will have to create tarball again etc."}, {"owner": {"reputation": 15030, "user_id": 3627607, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd5fd623c0fdd0c93a2535cf6293ec5d?s=128&d=identicon&r=PG", "display_name": "Tensibai", "link": "https://stackoverflow.com/users/3627607/tensibai"}, "reply_to_user": {"reputation": 170, "user_id": 1584256, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/cEQhb.jpg?s=128&g=1", "display_name": "Rahul", "link": "https://stackoverflow.com/users/1584256/rahul"}, "edited": false, "score": 0, "creation_date": 1435224161, "post_id": 31045374, "comment_id": 50114529, "body": "@Raul that&#39;s where continuous integration (CI) come in place, building an artifact from files when changed, and deploying a new artifact to servers (using jenkins and a repo like nexus or artifactory for exemple)"}, {"owner": {"reputation": 170, "user_id": 1584256, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/cEQhb.jpg?s=128&g=1", "display_name": "Rahul", "link": "https://stackoverflow.com/users/1584256/rahul"}, "edited": false, "score": 0, "creation_date": 1435231938, "post_id": 31045374, "comment_id": 50119435, "body": "I changed in http section <code>client_max_body_size 2M;</code> and restarted the nginx service but it didnt help as you already said you can&#39;t guarantee it will work i will go ahead with reducing the size of directories, thanks for the suggestions."}], "tags": [], "owner": {"reputation": 15030, "user_id": 3627607, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd5fd623c0fdd0c93a2535cf6293ec5d?s=128&d=identicon&r=PG", "display_name": "Tensibai", "link": "https://stackoverflow.com/users/3627607/tensibai"}, "is_accepted": false, "score": 1, "last_activity_date": 1435221848, "last_edit_date": 1495535243, "creation_date": 1435221848, "answer_id": 31045374, "question_id": 31019137, "link": "https://stackoverflow.com/questions/31019137/cert-already-in-hash-table-exception/31045374#31045374", "title": "Cert already in hash table exception", "body": "<blockquote>\n  <p>Should i decrease the number of files or is there any other option?</p>\n</blockquote>\n\n<p>Ususally the files inside a cookbook are not intended to be too large and too numerous, if you got a lot of files to ditribute it's a sign you should change the way you distribute thoose files.</p>\n\n<p>One option could be to make a tarball, but this makes harder to manage the deleted files.</p>\n\n<p>Another option if you're on an internal chef-server is to follow the advice <a href=\"https://stackoverflow.com/a/13020549/3627607\">here</a> and change the <code>client_max_body_size 2M;</code> value for nginx but I can't guarantee it will work.</p>\n"}, {"tags": [], "owner": {"reputation": 3022, "user_id": 7975584, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/030d5cfb9e7cc96289b54dfde181c6d0?s=128&d=identicon&r=PG&f=1", "display_name": "Innocent Anigbo", "link": "https://stackoverflow.com/users/7975584/innocent-anigbo"}, "is_accepted": false, "score": 0, "last_activity_date": 1508241063, "creation_date": 1508241063, "answer_id": 46789461, "question_id": 31019137, "link": "https://stackoverflow.com/questions/31019137/cert-already-in-hash-table-exception/46789461#46789461", "title": "Cert already in hash table exception", "body": "<p>I had same error and i ran <code>chef-server-ctl reconfigure</code> on chef server then tried uploading cookbook again and all started working fine again</p>\n"}], "owner": {"reputation": 170, "user_id": 1584256, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/cEQhb.jpg?s=128&g=1", "display_name": "Rahul", "link": "https://stackoverflow.com/users/1584256/rahul"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3648, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1508241063, "creation_date": 1435127252, "last_edit_date": 1495540513, "question_id": 31019137, "link": "https://stackoverflow.com/questions/31019137/cert-already-in-hash-table-exception", "title": "Cert already in hash table exception", "body": "<p>I am using chef dk version 12 and i have done basic setup and uploaded many cookbooks , currently i am using remote_directory in my default.rb \nWhat i have observed is whenever there are too many files /hierarchy in the directory the upload fails with the below exception :-</p>\n\n<pre><code>ERROR: SSL Validation failure connecting to host: xyz.com - SSL_write: cert already in hash table\nERROR: Could not establish a secure connection to the server.\nUse `knife ssl check` to troubleshoot your SSL configuration.\nIf your Chef Server uses a self-signed certificate, you can use\n`knife ssl fetch` to make knife trust the server's certificates. \nOriginal Exception: OpenSSL::SSL::SSLError: SSL_write: cert already in hash table \n</code></pre>\n\n<p>As mentioned earlier connection to server isnt a problem it happens only when there are too many files/the hierarchy is more . \nCan you please suggest what i can do? I have tried searching online for solutions but failed to get a solution </p>\n\n<p>I have checked the question <a href=\"https://stackoverflow.com/questions/23263121/opensslx509storeerror-cert-already-in-hash-table\" title=\"here\">here</a> but it doesnt solve my problem\nChef uses embedded ruby and openssl for people not working with chef</p>\n\n<p>Some updates on suggestion of <a href=\"https://stackoverflow.com/users/3627607/tensibai\">tensibai</a>, \nThe exceptions have changed since adding the option of <code>--concurrency 1</code> ,\nInitially i had received, \n<code>INFO: HTTP Request Returned 403 Forbidden:ERROR: Failed to upload filepath\\file (7a81e65b51f0d514ec645da49de6417d) to example.com:443/bookshelf/\u2026 3088476d373416dfbaf187590b5d5687210a75&amp;Expires=1435139052&amp;Signature=SP/70MZP4C2U\u200c\u200bdUd9%2B5Ct1jEV1EQ%3D : 403 \"Forbidden\" &lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;&lt;Error&gt;&lt;Code&gt;AccessDenied&lt;/Code&gt;&lt;Message&gt;Access Denied&lt;/Message&gt;</code></p>\n\n<p>Then yesterday it has changed to \n<code>INFO: HTTP Request Returned 413 Request Entity Too Large: error\nERROR: Request Entity Too Large \nResponse: JSON must be no more than 1000000 bytes.</code></p>\n\n<p>Should i decrease the number of files or is there any other option?</p>\n\n<p><code>Knife --version</code> results in Chef: 12.3.0</p>\n"}]