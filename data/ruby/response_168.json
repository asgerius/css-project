[{"tags": ["ruby"], "comments": [{"owner": {"reputation": 1674, "user_id": 341677, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/01ff7358e865790ac22fdb5312dd473d?s=128&d=identicon&r=PG", "display_name": "Cninroh", "link": "https://stackoverflow.com/users/341677/cninroh"}, "edited": false, "score": 0, "creation_date": 1522329196, "post_id": 49545393, "comment_id": 86121508, "body": "This is an incomplete and overly generalized answer so I am posting it as a comment instead. In a pretty standard situation, where most of the things you use are Model&#39;s the answer is no, however, as you have also implied in your own question, it is ridiculously easy to construct something that would not support it. Almost everything in Ruby is an array, so a string representation is always possible. If you would actually want to do that is a different question altogether."}], "answers": [{"comments": [{"owner": {"reputation": 1439, "user_id": 334582, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0adff13c4bbb337e2ccee14870161615?s=128&d=identicon&r=PG", "display_name": "Jonas Fagundes", "link": "https://stackoverflow.com/users/334582/jonas-fagundes"}, "edited": false, "score": 1, "creation_date": 1522277896, "post_id": 49545444, "comment_id": 86098491, "body": "<code>BasicObject</code> should be used if you want to create a class from scratch, just make sure that you don&#39;t need any of the features we expect in standard classes."}], "tags": [], "owner": {"reputation": 339851, "user_id": 149392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a561ec0875fcbbe3066ea8fe288ec77?s=128&d=identicon&r=PG", "display_name": "sepp2k", "link": "https://stackoverflow.com/users/149392/sepp2k"}, "is_accepted": true, "score": 5, "last_activity_date": 1522277655, "creation_date": 1522277655, "answer_id": 49545444, "question_id": 49545393, "link": "https://stackoverflow.com/questions/49545393/ruby-objects-without-to-s/49545444#49545444", "title": "Ruby objects without &#39;to_s&#39;", "body": "<p>The <code>BasicObject</code> class does not define a <code>to_s</code> method, so any instance of that class would not have a <code>to_s</code> method.</p>\n"}, {"comments": [{"owner": {"reputation": 769, "user_id": 5784956, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e2edfb655831f5996138372784f45239?s=128&d=identicon&r=PG&f=1", "display_name": "Matthias Michael Engh", "link": "https://stackoverflow.com/users/5784956/matthias-michael-engh"}, "edited": false, "score": 0, "creation_date": 1522277845, "post_id": 49545453, "comment_id": 86098478, "body": "That doesn&#39;t answer the main question, but that is definitely what I thought of when asking for additional details, so thank you of course!"}, {"owner": {"reputation": 1439, "user_id": 334582, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0adff13c4bbb337e2ccee14870161615?s=128&d=identicon&r=PG", "display_name": "Jonas Fagundes", "link": "https://stackoverflow.com/users/334582/jonas-fagundes"}, "reply_to_user": {"reputation": 769, "user_id": 5784956, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e2edfb655831f5996138372784f45239?s=128&d=identicon&r=PG&f=1", "display_name": "Matthias Michael Engh", "link": "https://stackoverflow.com/users/5784956/matthias-michael-engh"}, "edited": false, "score": 3, "creation_date": 1522278159, "post_id": 49545453, "comment_id": 86098554, "body": "We have a semantic detail here :)  All classes in ruby inherits from <code>Object</code> by default (you have to explicitly inherit from <code>BasicObject</code> to avoid the default parent). So the answer to &quot;Are there any Objects in ruby that don&#39;t respond to to_s?&quot; is no :) (<code>BasicObject</code>s are not <code>Object</code>s but the other way around is true :) )"}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 2, "creation_date": 1522294238, "post_id": 49545453, "comment_id": 86102492, "body": "The term object is ambiguous in the context of Ruby. Under the first sense, it means (an instance of) the <code>Object</code> class, and is usually written not as &quot;an object&quot; but as &quot;(an instance of) Object&quot;, in capitals. In the other sense, it means what object means in object oriented programming, and that includes instances of the <code>BasicObject</code> class as well. You rewrote the OP&#39;s writing &quot;Are there any <b>objects</b> ...&quot; to &quot;Are there any <b>Objects</b> ...&quot; (bold added by me), but that is your trick. Perhaps you already noticed that the OP meant object in the second sense, not the first."}, {"owner": {"reputation": 24179, "user_id": 1672429, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/0815eb7d4e9dd58022d51ba2011b9c0a?s=128&d=identicon&r=PG", "display_name": "Stefan Pochmann", "link": "https://stackoverflow.com/users/1672429/stefan-pochmann"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 1, "creation_date": 1522310371, "post_id": 49545453, "comment_id": 86108744, "body": "@sawa You&#39;d better look at the question&#39;s revision history."}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 1, "creation_date": 1522315530, "post_id": 49545453, "comment_id": 86111917, "body": "Oh, sorry about that. Jonas&#39; comment was right."}], "tags": [], "owner": {"reputation": 1439, "user_id": 334582, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0adff13c4bbb337e2ccee14870161615?s=128&d=identicon&r=PG", "display_name": "Jonas Fagundes", "link": "https://stackoverflow.com/users/334582/jonas-fagundes"}, "is_accepted": false, "score": 0, "last_activity_date": 1522277680, "creation_date": 1522277680, "answer_id": 49545453, "question_id": 49545393, "link": "https://stackoverflow.com/questions/49545393/ruby-objects-without-to-s/49545453#49545453", "title": "Ruby objects without &#39;to_s&#39;", "body": "<p>We should never specialize a subclass, since the subclass would not attend to the parent expectation anymore, have a look in the <a href=\"https://en.wikipedia.org/wiki/Liskov_substitution_principle\" rel=\"nofollow noreferrer\">Liskov Substitution Principle</a>.</p>\n"}], "owner": {"reputation": 769, "user_id": 5784956, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e2edfb655831f5996138372784f45239?s=128&d=identicon&r=PG&f=1", "display_name": "Matthias Michael Engh", "link": "https://stackoverflow.com/users/5784956/matthias-michael-engh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 226, "favorite_count": 0, "closed_date": 1522311034, "accepted_answer_id": 49545444, "answer_count": 2, "score": 3, "last_activity_date": 1522283531, "creation_date": 1522277356, "last_edit_date": 1522283531, "question_id": 49545393, "link": "https://stackoverflow.com/questions/49545393/ruby-objects-without-to-s", "closed_reason": "Needs more focus", "title": "Ruby objects without &#39;to_s&#39;", "body": "<p>Are there any objects in ruby that don't respond to <code>to_s</code>?</p>\n\n<p>The question isn't meant to ask whether it is possible to create one, which I know can be done by <code>undef_method</code>. Feel free to explain details, including caveats of undefining.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "httparty", "net-http"], "comments": [{"owner": {"reputation": 973, "user_id": 1693169, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b132e6176f5115b43f6a0c5446dea0c2?s=128&d=identicon&r=PG", "display_name": "Sean", "link": "https://stackoverflow.com/users/1693169/sean"}, "edited": false, "score": 0, "creation_date": 1522274204, "post_id": 49544792, "comment_id": 86097311, "body": "could you give a more complete stack trace? It is hard to deduce much from just the error line."}, {"owner": {"reputation": 4690, "user_id": 1937435, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YyN37.jpg?s=128&g=1", "display_name": "Josh Brody", "link": "https://stackoverflow.com/users/1937435/josh-brody"}, "edited": false, "score": 2, "creation_date": 1522274512, "post_id": 49544792, "comment_id": 86097433, "body": "Your problem is merely syntactical. <code>Time.now.to_i.to_s</code> will do the trick."}, {"owner": {"reputation": 385, "user_id": 1350408, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/RqWVL.jpg?s=128&g=1", "display_name": "Steve Q", "link": "https://stackoverflow.com/users/1350408/steve-q"}, "reply_to_user": {"reputation": 973, "user_id": 1693169, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b132e6176f5115b43f6a0c5446dea0c2?s=128&d=identicon&r=PG", "display_name": "Sean", "link": "https://stackoverflow.com/users/1693169/sean"}, "edited": false, "score": 0, "creation_date": 1522274931, "post_id": 49544792, "comment_id": 86097598, "body": "@Sean there&#39;s nothing else to the stack trace. It&#39;s not my API so I don&#39;t see what&#39;s happening on the other end all I get back is #&lt;NoMethodError: undefined method `strip&#39; for 1522274875:Integer&gt;"}, {"owner": {"reputation": 385, "user_id": 1350408, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/RqWVL.jpg?s=128&g=1", "display_name": "Steve Q", "link": "https://stackoverflow.com/users/1350408/steve-q"}, "reply_to_user": {"reputation": 4690, "user_id": 1937435, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YyN37.jpg?s=128&g=1", "display_name": "Josh Brody", "link": "https://stackoverflow.com/users/1937435/josh-brody"}, "edited": false, "score": 0, "creation_date": 1522274971, "post_id": 49544792, "comment_id": 86097624, "body": "@JoshBrody I tried .to_s but unfortunately no luck. If do that they hit me back with an error saying &quot;Replay attack detected&quot; it has to be an integer not a string"}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 2, "creation_date": 1522275017, "post_id": 49544792, "comment_id": 86097641, "body": "You can&#39;t send an integer in a header. <a href=\"https://tools.ietf.org/html/rfc7230#section-3.2\" rel=\"nofollow noreferrer\">tools.ietf.org/html/rfc7230#section-3.2</a>"}], "answers": [{"comments": [{"owner": {"reputation": 385, "user_id": 1350408, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/RqWVL.jpg?s=128&g=1", "display_name": "Steve Q", "link": "https://stackoverflow.com/users/1350408/steve-q"}, "edited": false, "score": 0, "creation_date": 1522275059, "post_id": 49544944, "comment_id": 86097653, "body": "I tried .to_s but unfortunately no luck. If do that they hit me back with an error saying &quot;Replay attack detected&quot; it has to be an integer not a string  It&#39;s good to know it&#39;s not just me that it seemed weird to. I&#39;ll have to reach out to the API developer and see if they can change it or handle the conversion on their end"}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "reply_to_user": {"reputation": 385, "user_id": 1350408, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/RqWVL.jpg?s=128&g=1", "display_name": "Steve Q", "link": "https://stackoverflow.com/users/1350408/steve-q"}, "edited": false, "score": 1, "creation_date": 1522275732, "post_id": 49544944, "comment_id": 86097869, "body": "They have to handle conversion on their end - HTTP headers are defined by the IETF as a plaintext format. Its just not possible to do it any other way. You can&#39;t put a poodle in a fax machine and expect to get anything else than a piece of paper out in the other end."}, {"owner": {"reputation": 385, "user_id": 1350408, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/RqWVL.jpg?s=128&g=1", "display_name": "Steve Q", "link": "https://stackoverflow.com/users/1350408/steve-q"}, "edited": false, "score": 0, "creation_date": 1522285912, "post_id": 49544944, "comment_id": 86100492, "body": "haha thanks I asked them about it. I&#39;ll accept the answer because there&#39;s no other way around it."}], "tags": [], "owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "is_accepted": true, "score": 2, "last_activity_date": 1522274802, "creation_date": 1522274802, "answer_id": 49544944, "question_id": 49544792, "link": "https://stackoverflow.com/questions/49544792/httparty-integer-in-request-headers/49544944#49544944", "title": "HTTParty integer in request headers", "body": "<p>Call <code>.to_s</code> on the integer:</p>\n\n<pre><code>response = HTTParty.post(route, body: options[:body].to_json,headers: { 'Timestamp' =&gt; Time.now.to_i.to_s, 'Authorization' =&gt; \"Bearer #{options[:token]}\",'Content-Type' =&gt; 'application/json' })\n</code></pre>\n\n<p>You can't really send an integer in a header - its the server on the receiving end that must convert the plaintext headers from the request.</p>\n\n<blockquote>\n  <p>Header fields are colon-separated name-value pairs in clear-text\n  string format, terminated by a carriage return (CR) and line feed (LF)\n  character sequence.<br>\n  <a href=\"https://en.wikipedia.org/wiki/List_of_HTTP_header_fields#General_format\" rel=\"nofollow noreferrer\">List of HTTP header fields - Wikipedia</a></p>\n</blockquote>\n"}], "owner": {"reputation": 385, "user_id": 1350408, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/RqWVL.jpg?s=128&g=1", "display_name": "Steve Q", "link": "https://stackoverflow.com/users/1350408/steve-q"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1308, "favorite_count": 0, "accepted_answer_id": 49544944, "answer_count": 1, "score": 2, "last_activity_date": 1522295271, "creation_date": 1522274067, "last_edit_date": 1522295271, "question_id": 49544792, "link": "https://stackoverflow.com/questions/49544792/httparty-integer-in-request-headers", "title": "HTTParty integer in request headers", "body": "<p>I need to POST to an API, which requires a header in the request called <code>\"Timestamp\"</code>, whose value has to be an integer (current time from epoch as an integer).</p>\n\n<p>I tried to do this with <code>HTTParty</code> and with <code>Net::HTTP</code> as follows:</p>\n\n<pre><code>response = HTTParty.post(route, body: options[:body].to_json,headers: { 'Timestamp' =&gt; Time.now.to_i, 'Authorization' =&gt; \"Bearer #{options[:token]}\",'Content-Type' =&gt; 'application/json' })\n# &gt;&gt; NoMethodError: undefined method `strip' for 1522273989:Integer\n</code></pre>\n\n<p>It calls <code>strip</code> on the header value, which throws an error because you can't call <code>strip</code> on an integer.</p>\n\n<p>Does anyone have any idea how I can pass an integer in the request headers?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5"], "answers": [{"comments": [{"owner": {"reputation": 496, "user_id": 2332309, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2a70bf66549b8673723a7d9d4422932a?s=128&d=identicon&r=PG", "display_name": "Kevin Custer", "link": "https://stackoverflow.com/users/2332309/kevin-custer"}, "edited": false, "score": 0, "creation_date": 1522274809, "post_id": 49544499, "comment_id": 86097558, "body": "I changed my scope to includes instead of joins.  I now get transaction_balances in one query.  Is there any way to get transactions AND transaction_balances in one query?"}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "reply_to_user": {"reputation": 496, "user_id": 2332309, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2a70bf66549b8673723a7d9d4422932a?s=128&d=identicon&r=PG", "display_name": "Kevin Custer", "link": "https://stackoverflow.com/users/2332309/kevin-custer"}, "edited": false, "score": 1, "creation_date": 1522348757, "post_id": 49544499, "comment_id": 86134040, "body": "@odinsride do you mean something like <code>@account.transactions.eager_load(:transaction_balance)</code> or <code>@account.transactions.includes(:transaction_balance).referen&zwnj;&#8203;ces(:transaction_bal&zwnj;&#8203;ance)</code>? Both of these will execute as a single query for <code>Transaction</code>s and their <code>TransactionBalance</code>. Alternatively you could just take the 1 column you need from <code>transaction_balances</code> like <code>@account.transactions.joins(:transaction_balance).select(&quot;tr&zwnj;&#8203;ansactions.*,transac&zwnj;&#8203;tion_balances.runnin&zwnj;&#8203;g_balance as &#39;running_balance&#39;)</code> then <code>#running_balance</code> would be a virtual attribute of the <code>Transaction</code> object"}, {"owner": {"reputation": 4600, "user_id": 5961578, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/df7cbfdd2a92a7926af3bbb8648318aa?s=128&d=identicon&r=PG", "display_name": "moveson", "link": "https://stackoverflow.com/users/5961578/moveson"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 2, "creation_date": 1522349884, "post_id": 49544499, "comment_id": 86134635, "body": "@engineersmnky I stand corrected. I didn&#39;t want to go into the <code>select</code> technique with virtual attributes, but adding <code>references(:transaction_balance)</code> is simple and does indeed result in a single query."}, {"owner": {"reputation": 496, "user_id": 2332309, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2a70bf66549b8673723a7d9d4422932a?s=128&d=identicon&r=PG", "display_name": "Kevin Custer", "link": "https://stackoverflow.com/users/2332309/kevin-custer"}, "edited": false, "score": 0, "creation_date": 1522421676, "post_id": 49544499, "comment_id": 86160714, "body": "Ah yes, I updated the scope for my model to be <code>scope :with_balance, -&gt; { includes(:transaction_balance).references(:transaction_balan&zwnj;&#8203;ce) }</code> and it works just as I want it to with only one query :)"}, {"owner": {"reputation": 4600, "user_id": 5961578, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/df7cbfdd2a92a7926af3bbb8648318aa?s=128&d=identicon&r=PG", "display_name": "moveson", "link": "https://stackoverflow.com/users/5961578/moveson"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1522421897, "post_id": 49544499, "comment_id": 86160848, "body": "Updated code to generate a single query per @engineersmnky."}], "tags": [], "owner": {"reputation": 4600, "user_id": 5961578, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/df7cbfdd2a92a7926af3bbb8648318aa?s=128&d=identicon&r=PG", "display_name": "moveson", "link": "https://stackoverflow.com/users/5961578/moveson"}, "is_accepted": true, "score": 2, "last_activity_date": 1522421849, "last_edit_date": 1522421849, "creation_date": 1522272654, "answer_id": 49544499, "question_id": 49543894, "link": "https://stackoverflow.com/questions/49543894/in-rails-my-model-association-with-a-view-is-causing-a-new-select-statement-for/49544499#49544499", "title": "In Rails, my model association with a view is causing a new SELECT statement for every row", "body": "<p>In your <code>TransactionsController#index</code> action, change this line:</p>\n\n<pre><code>@transactions = @account.transactions.paginate(page: params[:page], per_page: 25)\n</code></pre>\n\n<p>to this (credit to @engineersmnky):</p>\n\n<pre><code>@transactions = @account.transactions.includes(:transaction_balance).references(:transaction_balance).paginate(page: params[:page], per_page: 25)\n</code></pre>\n\n<p>This will generate a single query that allows your view to access the transaction_balance for each transaction without going back to the database. </p>\n"}, {"comments": [{"owner": {"reputation": 496, "user_id": 2332309, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2a70bf66549b8673723a7d9d4422932a?s=128&d=identicon&r=PG", "display_name": "Kevin Custer", "link": "https://stackoverflow.com/users/2332309/kevin-custer"}, "edited": false, "score": 0, "creation_date": 1522273791, "post_id": 49544522, "comment_id": 86097143, "body": "I just updated my original post with the full contents of my transactions controller. Perhaps I&#39;m doing something wrong there?"}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1522349175, "post_id": 49544522, "comment_id": 86134237, "body": "<code>joins</code> just creates an  <code>INNER JOIN</code> but it will not load them in the same query. maybe you meant <code>includes().references()</code> or <code>eager_load()</code>"}, {"owner": {"reputation": 102358, "user_id": 15245, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/9a2a53db8e9b4476038c94a64b32833f?s=128&d=identicon&r=PG", "display_name": "Ryan Bigg", "link": "https://stackoverflow.com/users/15245/ryan-bigg"}, "edited": false, "score": 0, "creation_date": 1522378105, "post_id": 49544522, "comment_id": 86143881, "body": "<code>joins</code> loads the data from the <code>transactions</code> and <code>transaction_balances</code> table <i>in the same query</i>. If you go to query a transaction balance on a transaction loaded through a join, it <i>will not</i> execute another query."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1522422505, "post_id": 49544522, "comment_id": 86161144, "body": "@RyanBigg not sure this is true since the query generated does not load any data for <code>transaction_balances</code> (e.g. <code>SELECT transactions.* FROM transactions INNER JOIN transaction_balances ON transaction_balances.transaction_id = transactions.transaction_id</code> does not have any <code>transaction_balances</code> data)  it would need to execute at least 1 additional query to load that data and in a loop would cause the <code>n+1</code>"}], "tags": [], "owner": {"reputation": 102358, "user_id": 15245, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/9a2a53db8e9b4476038c94a64b32833f?s=128&d=identicon&r=PG", "display_name": "Ryan Bigg", "link": "https://stackoverflow.com/users/15245/ryan-bigg"}, "is_accepted": false, "score": 1, "last_activity_date": 1522272736, "creation_date": 1522272736, "answer_id": 49544522, "question_id": 49543894, "link": "https://stackoverflow.com/questions/49543894/in-rails-my-model-association-with-a-view-is-causing-a-new-select-statement-for/49544522#49544522", "title": "In Rails, my model association with a view is causing a new SELECT statement for every row", "body": "<p>This is happening because you're not loading the <code>TransactionBalance</code> records when you load the transactions in your controller. Here's what you're doing:</p>\n\n<pre><code>@account.transactions\n</code></pre>\n\n<p>And here's what will fix the problem:</p>\n\n<pre><code>@account.transactions.with_balance\n</code></pre>\n\n<p>This will use the <code>with_balance</code> scope in your model, which does <code>joins(:balance)</code>, which will load both the transacations and all their balances in the one query.</p>\n"}, {"comments": [{"owner": {"reputation": 76, "user_id": 9566514, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Steven Kang", "link": "https://stackoverflow.com/users/9566514/steven-kang"}, "edited": false, "score": 0, "creation_date": 1522273205, "post_id": 49544526, "comment_id": 86096920, "body": "Whoops, looks like I didn&#39;t see that all the queries were from TransactionBalance not Transaction. The principle remains the same though :]"}], "tags": [], "owner": {"reputation": 76, "user_id": 9566514, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Steven Kang", "link": "https://stackoverflow.com/users/9566514/steven-kang"}, "is_accepted": false, "score": 1, "last_activity_date": 1522272759, "creation_date": 1522272759, "answer_id": 49544526, "question_id": 49543894, "link": "https://stackoverflow.com/questions/49543894/in-rails-my-model-association-with-a-view-is-causing-a-new-select-statement-for/49544526#49544526", "title": "In Rails, my model association with a view is causing a new SELECT statement for every row", "body": "<p>I'm not sure where you're getting your <code>@account</code> from in your <code>TransactionsController</code>, but you may want to do a <code>join</code> or an <code>includes</code>.</p>\n\n<p>For instance, <code>@account = Account.includes(:transactions).find(params[:account_id])</code> before you query the transactions will eager load the transactions and pull them in one query rather than \"n+1-ing\" them.</p>\n\n<p><a href=\"https://apidock.com/rails/ActiveRecord/QueryMethods/includes\" rel=\"nofollow noreferrer\" title=\"The apidock entry on includes\">The API dock entry</a> can tell you more about the <code>includes</code> method</p>\n\n<p>and</p>\n\n<p><a href=\"https://blog.codeship.com/speed-up-activerecord/\" rel=\"nofollow noreferrer\">This article</a> can tell you more about how to get rid of the n+1 querying problem.</p>\n\n<p>Good luck!</p>\n"}], "owner": {"reputation": 496, "user_id": 2332309, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2a70bf66549b8673723a7d9d4422932a?s=128&d=identicon&r=PG", "display_name": "Kevin Custer", "link": "https://stackoverflow.com/users/2332309/kevin-custer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "accepted_answer_id": 49544499, "answer_count": 3, "score": 0, "last_activity_date": 1522421849, "creation_date": 1522270049, "last_edit_date": 1522273757, "question_id": 49543894, "link": "https://stackoverflow.com/questions/49543894/in-rails-my-model-association-with-a-view-is-causing-a-new-select-statement-for", "title": "In Rails, my model association with a view is causing a new SELECT statement for every row", "body": "<p>I have an issue with bringing a view into my app, which calculates a running balance for a transactions table using SQL.  I have the following models:</p>\n\n<p><strong>account.rb</strong></p>\n\n<pre><code>class Account &lt; ApplicationRecord\n    belongs_to :user\n    has_many :transactions, dependent: :destroy\n\n    validates :name, presence: true, length: { maximum: 50, minimum: 2 }\n    validates :starting_balance, presence: true\n    #validates_associated :transactions\n\n    after_create :create_initial_transaction\n\n    def create_initial_transaction\n        self.update_attributes(current_balance: 0.00)\n        Transaction.create(trx_type: 'credit', trx_date: DateTime.now, account_id: self.id, description: \"Starting Balance\", amount: self.starting_balance)\n        #self.update_attributes(current_balance: @initbalance)\n    end\n\nend\n</code></pre>\n\n<p><strong>transaction.rb</strong></p>\n\n<pre><code>class Transaction &lt; ApplicationRecord\n    belongs_to :account\n    has_one :transaction_balance\n\n    delegate :running_balance, to: :transaction_balance\n\n    attr_accessor :trx_type\n\n    #default_scope { order('trx_date, id DESC') }\n    validates_presence_of :trx_type, :message =&gt; \"Please select debit or credit\"\n    validates :trx_date, presence: true\n    validates :description, presence: true, length: { maximum: 150 }\n    validates :amount, presence: true, numericality: { greater_than_or_equal_to: 0 }\n    validates :memo, length: { maximum: 500 }\n\n    before_save :convert_amount\n    after_create :update_account_balance_new\n    after_update :update_account_balance_edit\n    after_destroy :update_account_balance_destroy\n\n    scope :with_balance, -&gt; { joins(:transaction_balance) }\n    scope :desc, -&gt; { order('trx_date, id DESC') }\n\n    # Determine the transaction_type for existing records based on amount\n    def transaction_type\n        if !new_record?\n            if self.amount &gt;= 0\n                return ['Credit', 'credit']\n            else\n                return ['Debit', 'debit']\n            end\n        else\n            return ['Debit', 'debit']\n        end\n    end\n\nprivate\n\n    def convert_amount\n        if self.trx_type == \"debit\"\n            self.amount = -self.amount.abs\n        end\n    end\n\n    def update_account_balance_new\n        @account = Account.find(account_id)\n        @account.update_attributes(current_balance: @account.current_balance + amount)\n    end\n\n    def update_account_balance_edit\n        @account = Account.find(account_id)\n        if saved_change_to_amount?\n            @account.update_attributes(current_balance: @account.current_balance - amount_was + amount)\n        end\n    end\n\n    def update_account_balance_destroy\n        @account = Account.find(account_id)\n        @account.update_attributes(current_balance: @account.current_balance - amount_was)\n    end\n\nend\n</code></pre>\n\n<p>Basically my app allows users to create bank accounts, then add transactions to them to keep track of finances.  I wanted to add a running balance at the transaction level, so I created a view which joins back to the transactions table 1:1 ....</p>\n\n<p><strong>Migration for view</strong></p>\n\n<pre><code>class CreateTransactionBalancesView &lt; ActiveRecord::Migration[5.1]\n    def up\n        execute &lt;&lt;-SQL\n          CREATE VIEW transaction_balances AS (\n            SELECT id AS transaction_id,\n                   SUM(amount) OVER(PARTITION BY account_id ORDER BY trx_date, id) AS running_balance\n              FROM transactions\n          )\n        SQL\n    end\n\n    def down\n        execute(\"DROP VIEW transaction_balances\")\n    end\nend\n</code></pre>\n\n<p>Now, when I created a model for this view, I had issues referencing \"belongs_to :transaction\" because it was complaining that \"transaction\" was a reserved word, so I had to find a workaround, as seen in my model below:</p>\n\n<p><strong>transaction_balance.rb</strong></p>\n\n<pre><code>class TransactionBalance &lt; ApplicationRecord\n    self.primary_key = \"transaction_id\"\n\n    #belongs_to :transaction\n    belongs_to :user_transaction, foreign_key: \"transaction_id\", class_name: \"Transaction\"\nend\n</code></pre>\n\n<p><strong>transactions_controller.rb</strong></p>\n\n<pre><code>class TransactionsController &lt; ApplicationController\n    before_action :find_account\n    before_action :find_transaction, only: [:edit, :update, :show, :destroy]\n\n    # Index action to render all transactions\n    def index\n        @transactions = @account.transactions.paginate(page: params[:page], per_page: 25)\n\n        respond_to do |format|\n            format.html # index.html.erb\n            format.xml  { render :xml =&gt; @transactions }\n        end\n    end\n\n    # New action for creating transaction\n    def new\n        @transaction = @account.transactions.build\n\n        respond_to do |format|\n          format.html # new.html.erb\n          format.xml  { render :xml =&gt; @transaction }\n        end\n    end\n\n    # Create action saves the trasaction into database\n    def create\n        @transaction = @account.transactions.build(transaction_params)\n\n        respond_to do |format|\n            if @transaction.save\n                format.html { redirect_to([@transaction.account, @transaction], :notice =&gt; 'Transaction was successfully created.') }\n                format.xml  { render :xml =&gt; @transaction, :status =&gt; :created, :location =&gt; [@transaction.account, @transaction] }\n            else\n                format.html { render :action =&gt; \"new\" }\n                format.xml  { render :xml =&gt; @transaction.errors, :status =&gt; :unprocessable_entity }\n            end\n        end\n    end\n\n    # Edit action retrieves the transaction and renders the edit page\n    def edit\n    end\n\n      # Update action updates the transaction with the new information\n    def update\n        respond_to do |format|\n            if @transaction.update_attributes(transaction_params)\n                format.html { redirect_to([@transaction.account, @transaction], :notice =&gt; 'Transaction was successfully updated.') }\n                format.xml  { head :ok }\n            else\n                format.html { render :action =&gt; \"edit\" }\n                format.xml  { render :xml =&gt; @transaction.errors, :status =&gt; :unprocessable_entity }\n            end\n        end\n    end\n\n    # The show action renders the individual transaction after retrieving the the id\n    def show\n        respond_to do |format|\n            format.html # show.html.erb\n            format.xml  { render :xml =&gt; @transaction }\n        end\n    end\n\n    # The destroy action removes the transaction permanently from the database\n    def destroy\n        @transaction.destroy\n\n        respond_to do |format|\n            format.html { redirect_to(account_transactions_url) }\n            format.xml  { head :ok }\n        end\n    end\n\n    private\n\n    def transaction_params\n        params.require(:transaction).permit(:trx_date, :description, :amount, :trx_type, :memo)\n    end\n\n    def find_account\n        @account = current_user.accounts.find(params[:account_id])\n    end\n\n    def find_transaction\n        @transaction = @account.transactions.find(params[:id])\n    end\nend\n</code></pre>\n\n<p><strong>And finally, my transactions index view, where I reference the running_balance field</strong></p>\n\n<pre><code>&lt;% @transactions.with_balance.desc.each do |transaction| %&gt;\n                        &lt;tr class=\"row m-0\"&gt;\n                            &lt;td class=\"col-sm-1 text-center\"&gt;&lt;%= link_to transaction.id, [transaction.account, transaction] %&gt;&lt;/td&gt;\n                            &lt;td class=\"col-sm-1 text-center\"&gt;&lt;%= transaction.trx_date.strftime('%m/%d/%Y') %&gt;&lt;/td&gt;\n                            &lt;td class=\"col-sm-4\"&gt;&lt;%= transaction.description %&gt;&lt;/td&gt;\n                            &lt;td class=\"col-sm-2 text-right\"&gt;&lt;%= if transaction.amount &gt;= 0 then number_to_currency(transaction.amount) end %&gt;&lt;/td&gt;\n                            &lt;td class=\"col-sm-2 text-right\"&gt;&lt;%= if transaction.amount &lt; 0 then \"(\" + number_to_currency(transaction.amount.abs) + \")\" end %&gt;&lt;/td&gt;\n                            &lt;td class=\"col-sm-2 text-right\"&gt;&lt;%= number_to_currency(transaction.running_balance) %&gt;&lt;/td&gt;\n\n                        &lt;/tr&gt;\n                    &lt;% end %&gt;\n</code></pre>\n\n<p>Now, my problem is when I access the transactions index page in browser, my server console shows the following:</p>\n\n<pre><code>Started GET \"/accounts/1/transactions\" for 127.0.0.1 at 2018-03-28 16:32:08 -0400\nProcessing by TransactionsController#index as HTML\n  Parameters: {\"account_id\"=&gt;\"1\"}\n  User Load (0.6ms)  SELECT  \"users\".* FROM \"users\" WHERE \"users\".\"id\" = $1 ORDER BY \"users\".\"id\" ASC LIMIT $2  [[\"id\", 1], [\"LIMIT\", 1]]\n  Account Load (1.1ms)  SELECT  \"accounts\".* FROM \"accounts\" WHERE \"accounts\".\"user_id\" = $1 AND \"accounts\".\"id\" = $2 LIMIT $3  [[\"user_id\", 1], [\"id\", 1], [\"LIMIT\", 1]]\n  Rendering transactions/index.html.erb within layouts/application\n  Transaction Load (0.8ms)  SELECT  \"transactions\".* FROM \"transactions\" INNER JOIN \"transaction_balances\" ON \"transaction_balances\".\"transaction_id\" = \"transactions\".\"id\" WHERE \"transactions\".\"account_id\" = $1 ORDER BY trx_date, id DESC LIMIT $2 OFFSET $3  [[\"account_id\", 1], [\"LIMIT\", 25], [\"OFFSET\", 0]]\n  TransactionBalance Load (0.3ms)  SELECT  \"transaction_balances\".* FROM \"transaction_balances\" WHERE \"transaction_balances\".\"transaction_id\" = $1 LIMIT $2  [[\"transaction_id\", 8], [\"LIMIT\", 1]]\n  TransactionBalance Load (1.5ms)  SELECT  \"transaction_balances\".* FROM \"transaction_balances\" WHERE \"transaction_balances\".\"transaction_id\" = $1 LIMIT $2  [[\"transaction_id\", 7], [\"LIMIT\", 1]]\n  TransactionBalance Load (0.3ms)  SELECT  \"transaction_balances\".* FROM \"transaction_balances\" WHERE \"transaction_balances\".\"transaction_id\" = $1 LIMIT $2  [[\"transaction_id\", 6], [\"LIMIT\", 1]]\n  TransactionBalance Load (0.2ms)  SELECT  \"transaction_balances\".* FROM \"transaction_balances\" WHERE \"transaction_balances\".\"transaction_id\" = $1 LIMIT $2  [[\"transaction_id\", 5], [\"LIMIT\", 1]]\n  TransactionBalance Load (0.2ms)  SELECT  \"transaction_balances\".* FROM \"transaction_balances\" WHERE \"transaction_balances\".\"transaction_id\" = $1 LIMIT $2  [[\"transaction_id\", 4], [\"LIMIT\", 1]]\n  TransactionBalance Load (0.3ms)  SELECT  \"transaction_balances\".* FROM \"transaction_balances\" WHERE \"transaction_balances\".\"transaction_id\" = $1 LIMIT $2  [[\"transaction_id\", 3], [\"LIMIT\", 1]]\n  TransactionBalance Load (1.0ms)  SELECT  \"transaction_balances\".* FROM \"transaction_balances\" WHERE \"transaction_balances\".\"transaction_id\" = $1 LIMIT $2  [[\"transaction_id\", 1], [\"LIMIT\", 1]]\n   (1.8ms)  SELECT COUNT(*) FROM \"transactions\" WHERE \"transactions\".\"account_id\" = $1  [[\"account_id\", 1]]\n  Rendered transactions/index.html.erb within layouts/application (59.8ms)\n  Account Load (0.5ms)  SELECT \"accounts\".* FROM \"accounts\" WHERE \"accounts\".\"user_id\" = $1  [[\"user_id\", 1]]\n  Rendered layouts/_navbar.html.erb (3.9ms)\nCompleted 200 OK in 255ms (Views: 169.1ms | ActiveRecord: 19.5ms)\n</code></pre>\n\n<p>As seen above, the view is being selected from for each individual record.  What I expect it to do is to join the transactions table with the transaction_balances view in one single select statement.  Any help on this would be greatly appreciated! Thanks!</p>\n"}, {"tags": ["css", "ruby-on-rails", "ruby", "twitter-bootstrap", "sass"], "comments": [{"owner": {"reputation": 3997, "user_id": 3998420, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/55ea542584d3fd2a430c3d409bdafc95?s=128&d=identicon&r=PG&f=1", "display_name": "bkunzi01", "link": "https://stackoverflow.com/users/3998420/bkunzi01"}, "edited": false, "score": 0, "creation_date": 1522270118, "post_id": 49543824, "comment_id": 86095488, "body": "Is there some reliance on jquery/js to add classes etc?  Since many times you&#39;ll only load that after the page is loaded that would be a starting point if you have js in your app."}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 1, "creation_date": 1522276253, "post_id": 49543824, "comment_id": 86098033, "body": "Its known as a Flash of Unstyled Content (FOUC) and there are quite a few potential causes. I would try a HTML validator and make sure there are no errors in the browser console."}, {"owner": {"reputation": 191, "user_id": 5281834, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/b5Vmy.jpg?s=128&g=1", "display_name": "olucube.com", "link": "https://stackoverflow.com/users/5281834/olucube-com"}, "edited": false, "score": 0, "creation_date": 1522282442, "post_id": 49543824, "comment_id": 86099656, "body": "also possible that the order of your asset is causing that i.e. the stylesheet should be loaded before the page."}], "owner": {"reputation": 59, "user_id": 6503647, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/7068933f8882da99344e87024fb69801?s=128&d=identicon&r=PG&f=1", "display_name": "tak", "link": "https://stackoverflow.com/users/6503647/tak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 25, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1522269720, "creation_date": 1522269720, "question_id": 49543824, "link": "https://stackoverflow.com/questions/49543824/losing-css-for-0-1s-when-redirecting-pages-in-rails", "title": "Losing CSS for 0.1s when redirecting pages in Rails", "body": "<p>I build a simple app using Ruby on Rails,\nand I dont know why when I go to other pages, the css will be lost for 0.1s\nThe page will be displayed without any styling for a really short period of time and load the css afterwards.\nHow can I fix this?</p>\n\n<p>Thank you very much!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3"], "comments": [{"owner": {"reputation": 2165, "user_id": 1811752, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/sSedp.png?s=128&g=1", "display_name": "M&#225;t&#233;", "link": "https://stackoverflow.com/users/1811752/m%c3%a1t%c3%a9"}, "edited": false, "score": 3, "creation_date": 1522268416, "post_id": 49543315, "comment_id": 86094539, "body": "Great, what have you tried so far?"}], "answers": [{"tags": [], "owner": {"reputation": 9659, "user_id": 6136634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7487290ff90aebf6848d9c638c067bb?s=128&d=identicon&r=PG", "display_name": "Gerry", "link": "https://stackoverflow.com/users/6136634/gerry"}, "is_accepted": true, "score": 2, "last_activity_date": 1522269579, "creation_date": 1522269579, "answer_id": 49543787, "question_id": 49543315, "link": "https://stackoverflow.com/questions/49543315/ruby-convert-string-to-date-format/49543787#49543787", "title": "Ruby - convert string to date format", "body": "<p>I think the easiest way to do it is using <a href=\"https://ruby-doc.org/stdlib-2.5.0/libdoc/date/rdoc/Date.html#method-c-parse\" rel=\"nofollow noreferrer\"><code>Date::parse</code></a> and <a href=\"https://ruby-doc.org/stdlib-2.5.0/libdoc/date/rdoc/Date.html#method-i-yday\" rel=\"nofollow noreferrer\"><code>Date#yday</code></a>:</p>\n\n<pre><code>require 'date'\n\nDate.parse(\"20170319\").yday\n#=&gt; 78\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 9565987, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb91525e6de39b2c2f6fe97a9f1a01f2?s=128&d=identicon&r=PG&f=1", "display_name": "one plus", "link": "https://stackoverflow.com/users/9565987/one-plus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 88, "favorite_count": 0, "accepted_answer_id": 49543787, "answer_count": 1, "score": -3, "last_activity_date": 1522269579, "creation_date": 1522267786, "question_id": 49543315, "link": "https://stackoverflow.com/questions/49543315/ruby-convert-string-to-date-format", "title": "Ruby - convert string to date format", "body": "<p>I want to convert a string like 20170319 to a date Format, and then to day of the year. </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5", "rails-activestorage"], "answers": [{"comments": [{"owner": {"reputation": 638, "user_id": 2462218, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/c9e8c9b9746d2a9d163c0b53b191173a?s=128&d=identicon&r=PG&f=1", "display_name": "darkcode", "link": "https://stackoverflow.com/users/2462218/darkcode"}, "edited": false, "score": 1, "creation_date": 1522342131, "post_id": 49561180, "comment_id": 86130659, "body": "<code>images_path</code> is not provided by activestorage so I think it can not be used"}, {"owner": {"reputation": 12542, "user_id": 156746, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/8TsPx.jpg?s=128&g=1", "display_name": "DiegoSalazar", "link": "https://stackoverflow.com/users/156746/diegosalazar"}, "reply_to_user": {"reputation": 638, "user_id": 2462218, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/c9e8c9b9746d2a9d163c0b53b191173a?s=128&d=identicon&r=PG&f=1", "display_name": "darkcode", "link": "https://stackoverflow.com/users/2462218/darkcode"}, "edited": false, "score": 0, "creation_date": 1522342167, "post_id": 49561180, "comment_id": 86130679, "body": "Right, you have to call it on <code>Rails.application.routes.url_helpers</code> like you&#39;re already doing."}, {"owner": {"reputation": 638, "user_id": 2462218, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/c9e8c9b9746d2a9d163c0b53b191173a?s=128&d=identicon&r=PG&f=1", "display_name": "darkcode", "link": "https://stackoverflow.com/users/2462218/darkcode"}, "edited": false, "score": 0, "creation_date": 1522342258, "post_id": 49561180, "comment_id": 86130728, "body": "I mean the <code>images_path</code> helper is not even available in activestorage, it won&#39;t work even using <code>Rails.application.routes.url_helpers.images_path</code>"}, {"owner": {"reputation": 12542, "user_id": 156746, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/8TsPx.jpg?s=128&g=1", "display_name": "DiegoSalazar", "link": "https://stackoverflow.com/users/156746/diegosalazar"}, "reply_to_user": {"reputation": 638, "user_id": 2462218, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/c9e8c9b9746d2a9d163c0b53b191173a?s=128&d=identicon&r=PG&f=1", "display_name": "darkcode", "link": "https://stackoverflow.com/users/2462218/darkcode"}, "edited": false, "score": 0, "creation_date": 1522342309, "post_id": 49561180, "comment_id": 86130754, "body": "I was assuming you had declared a named route in the routes.rb file. Replace <code>images_path</code> with your relevant named route or just use <code>url_for</code> with the options as stated above."}, {"owner": {"reputation": 638, "user_id": 2462218, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/c9e8c9b9746d2a9d163c0b53b191173a?s=128&d=identicon&r=PG&f=1", "display_name": "darkcode", "link": "https://stackoverflow.com/users/2462218/darkcode"}, "edited": false, "score": 0, "creation_date": 1522342454, "post_id": 49561180, "comment_id": 86130837, "body": "I don&#39;t think that declare a new route in routes.rb should be correct, must be an easier why to handle this with activestorage, looking again into use <code>url_for </code> with the hash options"}, {"owner": {"reputation": 12542, "user_id": 156746, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/8TsPx.jpg?s=128&g=1", "display_name": "DiegoSalazar", "link": "https://stackoverflow.com/users/156746/diegosalazar"}, "reply_to_user": {"reputation": 638, "user_id": 2462218, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/c9e8c9b9746d2a9d163c0b53b191173a?s=128&d=identicon&r=PG&f=1", "display_name": "darkcode", "link": "https://stackoverflow.com/users/2462218/darkcode"}, "edited": false, "score": 0, "creation_date": 1522342546, "post_id": 49561180, "comment_id": 86130890, "body": "It&#39;s typical to have a named route related to your models, so I included it in my answer. Go with the correct usage of <code>url_for</code> i.e. don&#39;t pass the image into it, use the options as I&#39;ve stated above, you can also read the docs I linked to for more information."}], "tags": [], "owner": {"reputation": 12542, "user_id": 156746, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/8TsPx.jpg?s=128&g=1", "display_name": "DiegoSalazar", "link": "https://stackoverflow.com/users/156746/diegosalazar"}, "is_accepted": false, "score": -1, "last_activity_date": 1609485916, "last_edit_date": 1609485916, "creation_date": 1522341596, "answer_id": 49561180, "question_id": 49542881, "link": "https://stackoverflow.com/questions/49542881/generate-image-url-in-model-activestorage/49561180#49561180", "title": "Generate image URL in model - ActiveStorage", "body": "<p><code>url_for</code> typicaly takes a hash of options and if you pass in a model you won't be able to provide a <code>host</code> option: <a href=\"https://apidock.com/rails/ActionView/RoutingUrlFor/url_for\" rel=\"nofollow noreferrer\">https://apidock.com/rails/ActionView/RoutingUrlFor/url_for</a></p>\n<p>It would be easier to use the named route helper For example. <code>image_path(image)</code> or <code>image_url(image, host: 'your host')</code>.</p>\n<p>If you really want to use <code>url_for</code> provide the path options for controller and action: <code>url_for(controller: 'images', action: 'show', id: image.id, host: 'your host')</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 638, "user_id": 2462218, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/c9e8c9b9746d2a9d163c0b53b191173a?s=128&d=identicon&r=PG&f=1", "display_name": "darkcode", "link": "https://stackoverflow.com/users/2462218/darkcode"}, "is_accepted": false, "score": 0, "last_activity_date": 1522569450, "last_edit_date": 1522569450, "creation_date": 1522343349, "answer_id": 49561665, "question_id": 49542881, "link": "https://stackoverflow.com/questions/49542881/generate-image-url-in-model-activestorage/49561665#49561665", "title": "Generate image URL in model - ActiveStorage", "body": "<p>After investigate the only solution that I found is to use <code>url_for</code> with a hash of options as suggested by @DiegoSalazar, then use the <code>blobs</code> controller provided by activeresource and the correct params, ej:</p>\n\n<p><code>Rails.application.routes.url_for(controller: 'active_storage/blobs', action: :show, signed_id: image.signed_id, filename: image.filename, host: 'www.example.com')</code></p>\n\n<p>To be honest I think should be an easier way to access the permanent url of the image in the model scope, but for now is the only solution that I found.</p>\n"}, {"tags": [], "owner": {"reputation": 546, "user_id": 2632214, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7KQFi.jpg?s=128&g=1", "display_name": "Jonatas  Eduardo", "link": "https://stackoverflow.com/users/2632214/jonatas-eduardo"}, "is_accepted": true, "score": 3, "last_activity_date": 1546932866, "creation_date": 1546932866, "answer_id": 54087133, "question_id": 49542881, "link": "https://stackoverflow.com/questions/49542881/generate-image-url-in-model-activestorage/54087133#54087133", "title": "Generate image URL in model - ActiveStorage", "body": "<h1>Use the method <code>rails_blob_path</code> for attachements in a models and controllers</h1>\n\n<p>For example, if you need create a method (e.g. <code>cover_url</code>) in a model, first you should include <code>url_helpers</code> and after use method <code>rails_blob_path</code> with some parameters. You can do the same in any controller, worker etc.</p>\n\n<p>Complete example below:</p>\n\n<pre><code>class Event &lt; ApplicationRecord\n\n  include Rails.application.routes.url_helpers\n\n  def cover_url \n    rails_blob_path(self.cover, disposition: \"attachment\", only_path: true)\n  end\n\nend\n</code></pre>\n"}], "owner": {"reputation": 638, "user_id": 2462218, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/c9e8c9b9746d2a9d163c0b53b191173a?s=128&d=identicon&r=PG&f=1", "display_name": "darkcode", "link": "https://stackoverflow.com/users/2462218/darkcode"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5074, "favorite_count": 0, "accepted_answer_id": 54087133, "answer_count": 3, "score": 1, "last_activity_date": 1609485916, "creation_date": 1522266142, "question_id": 49542881, "link": "https://stackoverflow.com/questions/49542881/generate-image-url-in-model-activestorage", "title": "Generate image URL in model - ActiveStorage", "body": "<p>I have a simple model using ActiveStorage (Rails 5.2.0.rc2), the model looks like this:</p>\n\n<pre><code>class Vacancy &lt; ApplicationRecord\n  has_one_attached :image\n\n  validates_presence_of :title\n\n  def to_builder\n    Jbuilder.new do |vacancy|\n      vacancy.call(self, :id, :title, :description, :created_at, :updated_at)\n      vacancy.image do\n        vacancy.url image.attached? ? Rails.application.routes.url_helpers.url_for(image) : nil\n      end\n    end\n  end\nend\n</code></pre>\n\n<p>Then in the <code>to_builder</code> method I want to show the permanent URL for the image, I'm trying with <code>Rails.application.routes.url_helpers.url_for(image)</code> as suggested in the rails guides (<a href=\"http://edgeguides.rubyonrails.org/active_storage_overview.html#linking-to-files\" rel=\"nofollow noreferrer\">http://edgeguides.rubyonrails.org/active_storage_overview.html#linking-to-files</a>) but it raises this error:</p>\n\n<p><code>Missing host to link to! Please provide the :host parameter, set default_url_options[:host], or set :only_path to true</code></p>\n\n<p>In my application I already have the <code>default_url_options[:host]</code> set but it doesn't work, even writing <code>url_for(image, host: 'www.example.com')</code> or <code>url_for(image, only_path: true)</code> doesn't work either as it raises another error: <code>wrong number of arguments (given 2, expected 1)</code></p>\n\n<p>What is the correct way to show the permanent URL in the model scope using activestorage? </p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 5850, "user_id": 4501354, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/1230cfcc7f68488ad19d0022cf7b1a93?s=128&d=identicon&r=PG&f=1", "display_name": "Donato", "link": "https://stackoverflow.com/users/4501354/donato"}, "edited": false, "score": 0, "creation_date": 1522264607, "post_id": 49542101, "comment_id": 86092419, "body": "Note that I deleted my other post about Docket::PracticeFactory.constants(true) not returning any of the classes defined in this Module. That is related to this issue - the fact that autoload_paths does not work and does not load the files in lib directory and therefore Docket::PracticeFactory.constants(true)  does not see the constants because they are not loaded in memory."}], "answers": [{"comments": [{"owner": {"reputation": 5850, "user_id": 4501354, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/1230cfcc7f68488ad19d0022cf7b1a93?s=128&d=identicon&r=PG&f=1", "display_name": "Donato", "link": "https://stackoverflow.com/users/4501354/donato"}, "edited": false, "score": 0, "creation_date": 1522266275, "post_id": 49542416, "comment_id": 86093365, "body": "<a href=\"https://stackoverflow.com/questions/3672586/what-is-the-difference-between-require-relative-and-require-in-ruby\" title=\"what is the difference between require relative and require in ruby\">stackoverflow.com/questions/3672586/&hellip;</a>"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 5850, "user_id": 4501354, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/1230cfcc7f68488ad19d0022cf7b1a93?s=128&d=identicon&r=PG&f=1", "display_name": "Donato", "link": "https://stackoverflow.com/users/4501354/donato"}, "edited": false, "score": 0, "creation_date": 1522266792, "post_id": 49542416, "comment_id": 86093620, "body": "So what? I know what is the difference, I just shortened the statement so that it fits the screen."}, {"owner": {"reputation": 5850, "user_id": 4501354, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/1230cfcc7f68488ad19d0022cf7b1a93?s=128&d=identicon&r=PG&f=1", "display_name": "Donato", "link": "https://stackoverflow.com/users/4501354/donato"}, "edited": false, "score": 1, "creation_date": 1522267342, "post_id": 49542416, "comment_id": 86093930, "body": "I added that link for myself, I did not know the difference between the two."}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": true, "score": 1, "last_activity_date": 1522264353, "creation_date": 1522264353, "answer_id": 49542416, "question_id": 49542101, "link": "https://stackoverflow.com/questions/49542101/circular-dependency-detected-while-autoloading-constant-in-lib-directory/49542416#49542416", "title": "Circular dependency detected while autoloading constant in lib directory", "body": "<p>I have nothing to say about autoloading, the magic never worked for me and I try to avoid it wherever possible.</p>\n\n<p>For the latter, the error cause is clear: you try to load <code>PbFactory</code> that requires <code>Factory</code> class to be defined (since it derives from it,) and it is not yet defined. To resolve an issue just put your</p>\n\n<pre><code>Dir[\"*_factory.rb\"].each {|file| require_relative file }\n</code></pre>\n\n<p><strong>after</strong> the <code>Factory</code> class declaration.</p>\n"}], "owner": {"reputation": 5850, "user_id": 4501354, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/1230cfcc7f68488ad19d0022cf7b1a93?s=128&d=identicon&r=PG&f=1", "display_name": "Donato", "link": "https://stackoverflow.com/users/4501354/donato"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1095, "favorite_count": 0, "accepted_answer_id": 49542416, "answer_count": 1, "score": 0, "last_activity_date": 1522264353, "creation_date": 1522263114, "question_id": 49542101, "link": "https://stackoverflow.com/questions/49542101/circular-dependency-detected-while-autoloading-constant-in-lib-directory", "title": "Circular dependency detected while autoloading constant in lib directory", "body": "<p>In Rails, there is a lib directory. It is not autoloaded by default. So when you load the Rails environment, all the modules and classes in this folder will not be known at runtime. I tried to autoload lib in the <code>application.rb</code>:</p>\n\n<pre><code>config.autoload_paths += %W(#{config.root}/app/models/ckeditor #{config.root}/lib)\n</code></pre>\n\n<p>But it does not work. It does not load the modules and classes in lib I want loaded.</p>\n\n<p>File structure is as so:</p>\n\n<pre><code>\\lib\n  \\docket\n    \\practice_factory\n      factory.rb\n      pa_factory.rb\n</code></pre>\n\n<p>I have this in factory.rb:</p>\n\n<pre><code>module Docket\n  module PracticeFactory\n    class Factory\n      def self.practice_methods\n        descendants.collect {|descendant| descendant.practice_methods }\n      end\n    end\n  end\nend\n</code></pre>\n\n<p>And in pa_factory.rb:</p>\n\n<pre><code>module Docket\n  module PracticeFactory\n    class PaFactory &lt; Factory\n      def self.practice_methods\n        {\n            some: 'data',\n            more: 'stuff'\n        }\n      end\n    end\n  end\nend\n</code></pre>\n\n<p>When I load rails console, and I get empty array when I run:</p>\n\n<pre><code>Docket::PracticeFactory::Factory.practice_methods\n =&gt; [] \n</code></pre>\n\n<p>The reason why array is empty is because the PaFactory is not loaded in memory. This is despite the fact that I included lib to autoload path! So why is not not autoloaded #1?</p>\n\n<p>Also, I added the following to factory.rb:</p>\n\n<pre><code>Dir[\"#{Rails.root}/lib/docket/practice_factory/*_factory.rb\"].each {|file| require file }\n</code></pre>\n\n<p>And it gives me error:</p>\n\n<blockquote>\n  <p>RuntimeError: Circular dependency detected while autoloading constant\n  Docket::PracticeFactory::Factory</p>\n</blockquote>\n\n<p>Interesting error, I am loading files with *_factory.rb and factory.rb does not have an underscore, but those other files do inherit from Factory. How can this error be avoided?</p>\n"}, {"tags": ["ruby", "irb", "ruby-2.4"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 2, "creation_date": 1522263095, "post_id": 49541986, "comment_id": 86091596, "body": "You&#39;re overriding <a href=\"http://ruby-doc.org/core-2.5.0/BasicObject.html#method-i-21\" rel=\"nofollow noreferrer\"><code>BasicObject#!</code></a>"}, {"owner": {"reputation": 9435, "user_id": 2626000, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/j8GY0.jpg?s=128&g=1", "display_name": "Aaron Christiansen", "link": "https://stackoverflow.com/users/2626000/aaron-christiansen"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1522263284, "post_id": 49541986, "comment_id": 86091712, "body": "@Stefan I had no idea it was even possible to override negation. Thanks!"}, {"owner": {"reputation": 22377, "user_id": 2288659, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/bBg8v.png?s=128&g=1", "display_name": "Silvio Mayolo", "link": "https://stackoverflow.com/users/2288659/silvio-mayolo"}, "edited": false, "score": 5, "creation_date": 1522263946, "post_id": 49541986, "comment_id": 86092093, "body": "Ruby is nice in that, if you ask it to slowly burn to death, it will put on a smile and douse itself in gasoline."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1522264131, "post_id": 49541986, "comment_id": 86092187, "body": "FYI \u2013 just type <code>method(:!)</code> in IRB to see the method&#39;s origin."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "reply_to_user": {"reputation": 22377, "user_id": 2288659, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/bBg8v.png?s=128&g=1", "display_name": "Silvio Mayolo", "link": "https://stackoverflow.com/users/2288659/silvio-mayolo"}, "edited": false, "score": 1, "creation_date": 1522265478, "post_id": 49541986, "comment_id": 86092903, "body": "@SilvioMayolo hands you enough rope to shoot your self in the foot :)"}], "answers": [{"tags": [], "owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "is_accepted": true, "score": 2, "last_activity_date": 1522267120, "last_edit_date": 1522267120, "creation_date": 1522266761, "answer_id": 49543032, "question_id": 49541986, "link": "https://stackoverflow.com/questions/49541986/why-does-defining-a-method-called-break-irb/49543032#49543032", "title": "Why does defining a method called ! break IRB?", "body": "<p>tl;dr: Overriding <code>!</code> outside of a class is a <em>very</em> weird thing to do! There are countless ways that you can \"break\" ruby by doing crazy things like this - so you may find it fun to play around with such strange ideas, but obviously don't do this in important code!</p>\n\n<p>In ruby, <em>all</em> classes inherit from the top-level base class: <code>BasicObject</code>. This class <a href=\"https://ruby-doc.org/core/BasicObject.html#method-i-21\" rel=\"nofollow noreferrer\">defines top-level object negation</a> - i.e. Whenever you write</p>\n\n<pre><code>!foo\n</code></pre>\n\n<p>this is actually calling a <em>method</em> called <code>!</code> on your object <code>foo</code>:</p>\n\n<pre><code>foo.send(:!)\n</code></pre>\n\n<p>This makes it possible (although it's a very rare thing to do!) to <em>redefine</em> the method on a specific class. For example, when implementing the <a href=\"http://www.virtuouscode.com/2011/05/30/null-objects-and-falsiness/\" rel=\"nofollow noreferrer\">null object pattern</a> you could do something like this:</p>\n\n<pre><code>class NullObject\n  def !\n    true\n  end\nend\n\nmy_null = NullObject.new\n!!my_null #=&gt; false\n</code></pre>\n\n<p>(Normally, the <em>only</em> objects that would return <code>false</code> in the above line are <code>nil</code> and <code>false</code>!)</p>\n\n<p>Now then, back to your example. What you actually did here was define a method called <code>!</code> on the class <code>Object</code> (and didn't call <code>super</code> to trigger the original method!). In other words, you basically re-defined the response a fundamental method that gets used <em>all over the place</em> internally. Something, somewhere (??) got confused by this bizarre behaviour and failed non-gracefully.</p>\n\n<pre><code>irb(main):001:0&gt; def !\nirb(main):002:1&gt; puts \"foo\"\nirb(main):003:1&gt; super # &lt;-- !! This stops it from breaking completely !!\nirb(main):004:1&gt; end\n=&gt; :!\nirb(main):005:0* method(:!)\nfoo\nfoo\n=&gt; #&lt;Method: Object#!&gt;\nirb(main):006:0&gt; method(:!).source_location\nfoo\nfoo\n=&gt; [\"(irb)\", 1]\nirb(main):007:0&gt; method(:!).super_method\nfoo\nfoo\n=&gt; #&lt;Method: BasicObject#!&gt;\n</code></pre>\n\n<p>Here are some other ways you could re-define methods to cause bizarre behaviour/errors, for example:</p>\n\n<pre><code>def nil?\n  true\nend\n# Will now die in weird ways!\n\nclass String\n  def ===(other)\n    true\n  end\nend\n\n\"ruby\" === \"awesome\"\n#=&gt; true\n</code></pre>\n"}], "owner": {"reputation": 9435, "user_id": 2626000, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/j8GY0.jpg?s=128&g=1", "display_name": "Aaron Christiansen", "link": "https://stackoverflow.com/users/2626000/aaron-christiansen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 89, "favorite_count": 0, "accepted_answer_id": 49543032, "answer_count": 1, "score": 1, "last_activity_date": 1522267120, "creation_date": 1522262732, "last_edit_date": 1522263380, "question_id": 49541986, "link": "https://stackoverflow.com/questions/49541986/why-does-defining-a-method-called-break-irb", "title": "Why does defining a method called ! break IRB?", "body": "<p>IRB appears to have strange behaviour when defining a method called <code>!</code>.</p>\n\n<p>To reproduce this, enter the following into IRB:</p>\n\n<pre><code>def !\n  puts \"foo\"\nend\n</code></pre>\n\n<p>Upon creating the method, IRB infinitely prints <em>foo</em>:</p>\n\n<pre><code>irb(main):001:0&gt; def !\nirb(main):002:1&gt;   puts \"foo\"\nirb(main):003:1&gt; end\nfoo\nfoo\nfoo\n...\n</code></pre>\n\n<p><s>As far as I know, you can't directly call a method named <code>!</code> from Ruby syntax; you have to use <code>send</code> instead.</s> <em>Edit: You can invoke <code>!</code> as a prefix operator; it's just negation: <code>!x</code></em></p>\n\n<p>Why does this definition cause IRB to loop infinitely? Does IRB rely on a method named <code>!</code> for printing its prompt or something similar?</p>\n\n<p>I'm using Ruby 2.4.3 and IRB 0.9.6 on Windows 10.</p>\n"}, {"tags": ["ruby", "terminal", "stdin", "gets"], "comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 1, "creation_date": 1522261332, "post_id": 49541348, "comment_id": 86090555, "body": "did you try <a href=\"https://github.com/acook/remedy\" rel=\"nofollow noreferrer\"><code>remedy</code></a>? the library the gist you showed was rolled into? Seems fairly high functioning"}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 1, "creation_date": 1522261441, "post_id": 49541348, "comment_id": 86090613, "body": "i&#39;m not sure there&#39;s a way to do this without manually handling <i>all</i> user input, but i would be interested to be proved wrong."}, {"owner": {"reputation": 18079, "user_id": 503402, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/873ad707fb34aac8fbdfbfec676e02e9?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/503402/max"}, "edited": false, "score": 1, "creation_date": 1522262529, "post_id": 49541348, "comment_id": 86091234, "body": "This is actually non-trivial. What you want is essentially &quot;<a href=\"http://ruby-doc.org/stdlib/libdoc/io/console/rdoc/IO.html#method-i-cooked\" rel=\"nofollow noreferrer\">cooked</a>&quot; input except for a few exceptional cases. There isn&#39;t going to be an easy solution. You can use something like getch or remedy or curses to get raw input access, but you&#39;ll need to re-implement line editing yourself i.e. handle cases like the user pressing left/right/backspace/delete to modify the input."}], "answers": [{"tags": [], "owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "is_accepted": false, "score": 2, "last_activity_date": 1522264766, "last_edit_date": 1522264766, "creation_date": 1522261590, "answer_id": 49541644, "question_id": 49541348, "link": "https://stackoverflow.com/questions/49541348/how-to-capture-some-special-key-presses-for-ruby-input-prompt-in-terminal-and-l/49541644#49541644", "title": "How to capture some special key presses for Ruby input prompt in Terminal (and let others through normally)", "body": "<p>You could use <a href=\"http://ruby-doc.org/stdlib-2.5.0/libdoc/io/console/rdoc/IO.html#method-i-getch\" rel=\"nofollow noreferrer\"><code>getch</code></a> but since arrow keys are given as <a href=\"https://en.wikipedia.org/wiki/ANSI_escape_code\" rel=\"nofollow noreferrer\">ANSI escape sequences</a>, some parsing is required:</p>\n\n<pre><code>require 'io/console'\n\nloop do\n  case $stdin.getch\n  when 'q'    then exit\n  when \"\\c?\"  then puts 'backspace'\n  when \"\\e\"   # ANSI escape sequence\n    case $stdin.getch\n    when '['  # CSI\n      case $stdin.getch\n      when 'A' then puts 'up'\n      when 'B' then puts 'down'\n      when 'C' then puts 'right'\n      when 'D' then puts 'left'\n      end\n    end\n  end\nend\n</code></pre>\n\n<p>This is just an example. There are <em>many</em> other escape sequences you'll have to consider.</p>\n"}, {"tags": [], "owner": {"reputation": 407, "user_id": 330813, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2hnas.jpg?s=128&g=1", "display_name": "Piotr Murach", "link": "https://stackoverflow.com/users/330813/piotr-murach"}, "is_accepted": false, "score": 1, "last_activity_date": 1607277351, "creation_date": 1607277351, "answer_id": 65171228, "question_id": 49541348, "link": "https://stackoverflow.com/questions/49541348/how-to-capture-some-special-key-presses-for-ruby-input-prompt-in-terminal-and-l/65171228#65171228", "title": "How to capture some special key presses for Ruby input prompt in Terminal (and let others through normally)", "body": "<p>I'm the author of <a href=\"https://github.com/piotrmurach/tty-reader\" rel=\"nofollow noreferrer\">tty-reader</a> that provides a higher-level API for handling keyboard input. Using it you can read a single keypress, entire line or multiline content. It also allows you to listen for different key events like key up or backspace.</p>\n<p>For example, to prompt the user for input and perform actions when arrows or backspace are pressed:</p>\n<pre><code>require &quot;tty-reader&quot;\n\nreader = TTY::Reader.new\n\nreader.on(:keydown) { puts &quot;down we go&quot; }\n      .on(:keyup) { puts &quot;up we go&quot; }\n      .on(:keybackspace) { puts &quot;backspace pressed&quot; }\n\nanswer = reader.read_line\n</code></pre>\n<p>The gem has been tested to work on all major platforms including Windows.</p>\n"}], "owner": {"reputation": 966, "user_id": 4364535, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/luj45.png?s=128&g=1", "display_name": "PlacateTheCattin", "link": "https://stackoverflow.com/users/4364535/placatethecattin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 561, "favorite_count": 1, "answer_count": 2, "score": 2, "last_activity_date": 1607277351, "creation_date": 1522260367, "question_id": 49541348, "link": "https://stackoverflow.com/questions/49541348/how-to-capture-some-special-key-presses-for-ruby-input-prompt-in-terminal-and-l", "title": "How to capture some special key presses for Ruby input prompt in Terminal (and let others through normally)", "body": "<p>I am in a Ruby script something like:</p>\n\n<pre><code>something = gets      # or STDIN.gets\nputs something\n\ndef arrow_pressed\n    puts \"arrow totally pressed\"\nend\n</code></pre>\n\n<p>Once the user prompt exists I want all keyboard input to happen normally <strong>except</strong> for the arrow keys. If those are pressed I don't want anything to appear in the terminal (e.g. <code>^[[A</code>).  I just want to execute my <code>arrow_pressed</code> method.  And I want to execute it without the user needing to hit <code>Return</code>  </p>\n\n<p>I already tried this <a href=\"https://gist.github.com/acook/4190379\" rel=\"nofollow noreferrer\">gist</a> - which works well except that even after changing it to let through most keystrokes normally, I still can't get <code>Backspace</code> (or other specials) to work.  </p>\n\n<p>I'm happy to use something other than <code>gets</code> (a library or whatever).  Any help would be appreciated!</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 45, "user_id": 6513655, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96fc4080ebb1443ab02b13061194e3ad?s=128&d=identicon&r=PG&f=1", "display_name": "Marie", "link": "https://stackoverflow.com/users/6513655/marie"}, "edited": false, "score": 0, "creation_date": 1522259787, "post_id": 49540974, "comment_id": 86089657, "body": "Hi. Thank you for replying Is there any specific reason that you stick with resources? What if you would like rather to use customer url name as it can be done in django and laravel, beautify your URL basically. How can you correctly achieve it in rails"}, {"owner": {"reputation": 539, "user_id": 9006638, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kV5us.jpg?s=128&g=1", "display_name": "Michael Arkhipov", "link": "https://stackoverflow.com/users/9006638/michael-arkhipov"}, "reply_to_user": {"reputation": 45, "user_id": 6513655, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96fc4080ebb1443ab02b13061194e3ad?s=128&d=identicon&r=PG&f=1", "display_name": "Marie", "link": "https://stackoverflow.com/users/6513655/marie"}, "edited": false, "score": 0, "creation_date": 1522260547, "post_id": 49540974, "comment_id": 86090095, "body": "@Marie Because this is a RESTful :) And there are many reasons why that&#39;s good. Just try &quot;RESTful why&quot; in google."}, {"owner": {"reputation": 539, "user_id": 9006638, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kV5us.jpg?s=128&g=1", "display_name": "Michael Arkhipov", "link": "https://stackoverflow.com/users/9006638/michael-arkhipov"}, "reply_to_user": {"reputation": 45, "user_id": 6513655, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96fc4080ebb1443ab02b13061194e3ad?s=128&d=identicon&r=PG&f=1", "display_name": "Marie", "link": "https://stackoverflow.com/users/6513655/marie"}, "edited": false, "score": 0, "creation_date": 1522260886, "post_id": 49540974, "comment_id": 86090296, "body": "@Marie Moreover, you can using another unique parameter, like <code>resources :articles, param: :path_name</code>"}], "tags": [], "owner": {"reputation": 539, "user_id": 9006638, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kV5us.jpg?s=128&g=1", "display_name": "Michael Arkhipov", "link": "https://stackoverflow.com/users/9006638/michael-arkhipov"}, "is_accepted": false, "score": 1, "last_activity_date": 1522259005, "creation_date": 1522259005, "answer_id": 49540974, "question_id": 49540599, "link": "https://stackoverflow.com/questions/49540599/rails-actioncontrollerroutingerror-no-route-matches-patch-article-viewin/49540974#49540974", "title": "rails: ActionController::RoutingError (No route matches [PATCH] &quot;/article/viewing-article-2&quot;):", "body": "<p>At first, you really should using <a href=\"http://guides.rubyonrails.org/routing.html#resource-routing-the-rails-default\" rel=\"nofollow noreferrer\">resource routing</a> for you article model:</p>\n\n<pre><code>Rails.application.routes.draw do\n  root 'pages#index'\n  resources :articles\nend\n</code></pre>\n\n<p>This is what controller should look like. About permit params read <a href=\"http://edgeguides.rubyonrails.org/action_controller_overview.html#strong-parameters\" rel=\"nofollow noreferrer\">here</a>.</p>\n\n<pre><code>def index\n  @articles = Article.all\nend\n\ndef show\n  @article = Article.find(params[:id])\nend\n\ndef edit\n  @article = Article.find(params[:id])\nend\n\ndef update\n  return unless request.patch?\n  @article = Article.find(params[:id])\n\n  if @article.update(article_params)\n    redirect_to root_path\n  else\n    render :edit\n  end\nend\n\nprivate\n\ndef article_params\n  params.require(:article).permit(:title, :author, :publisher, :content)\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 45, "user_id": 6513655, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96fc4080ebb1443ab02b13061194e3ad?s=128&d=identicon&r=PG&f=1", "display_name": "Marie", "link": "https://stackoverflow.com/users/6513655/marie"}, "edited": false, "score": 0, "creation_date": 1522259928, "post_id": 49541033, "comment_id": 86089731, "body": "Hi. Thank you for replying Is there any specific reason that you stick with resources? What if you would like rather to use customer url name as it can be done in django and laravel, beautify your URL basically. How can you correctly achieve it in rails"}, {"owner": {"reputation": 1607, "user_id": 7804093, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pFFFH.jpg?s=128&g=1", "display_name": "Ganesh", "link": "https://stackoverflow.com/users/7804093/ganesh"}, "reply_to_user": {"reputation": 45, "user_id": 6513655, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96fc4080ebb1443ab02b13061194e3ad?s=128&d=identicon&r=PG&f=1", "display_name": "Marie", "link": "https://stackoverflow.com/users/6513655/marie"}, "edited": false, "score": 0, "creation_date": 1522260058, "post_id": 49541033, "comment_id": 86089803, "body": "I don&#39;t know about laravel and django, would you like to display some text instead of id?"}, {"owner": {"reputation": 45, "user_id": 6513655, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96fc4080ebb1443ab02b13061194e3ad?s=128&d=identicon&r=PG&f=1", "display_name": "Marie", "link": "https://stackoverflow.com/users/6513655/marie"}, "edited": false, "score": 0, "creation_date": 1522260256, "post_id": 49541033, "comment_id": 86089936, "body": "let say something like &#39;article/viewing-article-id"}, {"owner": {"reputation": 1607, "user_id": 7804093, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pFFFH.jpg?s=128&g=1", "display_name": "Ganesh", "link": "https://stackoverflow.com/users/7804093/ganesh"}, "reply_to_user": {"reputation": 45, "user_id": 6513655, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96fc4080ebb1443ab02b13061194e3ad?s=128&d=identicon&r=PG&f=1", "display_name": "Marie", "link": "https://stackoverflow.com/users/6513655/marie"}, "edited": false, "score": 0, "creation_date": 1522260416, "post_id": 49541033, "comment_id": 86090030, "body": "please check <a href=\"https://github.com/norman/friendly_id\" rel=\"nofollow noreferrer\">github.com/norman/friendly_id</a> gem may work for you."}], "tags": [], "owner": {"reputation": 1607, "user_id": 7804093, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pFFFH.jpg?s=128&g=1", "display_name": "Ganesh", "link": "https://stackoverflow.com/users/7804093/ganesh"}, "is_accepted": true, "score": 1, "last_activity_date": 1522259222, "creation_date": 1522259222, "answer_id": 49541033, "question_id": 49540599, "link": "https://stackoverflow.com/questions/49540599/rails-actioncontrollerroutingerror-no-route-matches-patch-article-viewin/49541033#49541033", "title": "rails: ActionController::RoutingError (No route matches [PATCH] &quot;/article/viewing-article-2&quot;):", "body": "<p>Modify <code>form_for</code> as follows with custom url</p>\n\n<pre><code>&lt;%= form_for @article, url: @article.new_record? ? article_create_new_article_path : update_article(@post)do |f| %&gt;\n</code></pre>\n\n<p>but I will suggest you to use Resourceful Routing instead.</p>\n"}], "owner": {"reputation": 45, "user_id": 6513655, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96fc4080ebb1443ab02b13061194e3ad?s=128&d=identicon&r=PG&f=1", "display_name": "Marie", "link": "https://stackoverflow.com/users/6513655/marie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 248, "favorite_count": 1, "accepted_answer_id": 49541033, "answer_count": 2, "score": 1, "last_activity_date": 1522259222, "creation_date": 1522257612, "question_id": 49540599, "link": "https://stackoverflow.com/questions/49540599/rails-actioncontrollerroutingerror-no-route-matches-patch-article-viewin", "title": "rails: ActionController::RoutingError (No route matches [PATCH] &quot;/article/viewing-article-2&quot;):", "body": "<p>I am currently learning rails and facing a totally weird issue. \nI am trying to update an existing article by following a tutorial that I am doing, however it is not getting updated. I am receiving the following errors from the terminal and browser respectively:</p>\n\n<pre><code>- Terminal: \n* Started PATCH \"/article/viewing-article-2\" for 127.0.0.1 at 2018-03-28 18:54:46 +0200\n* No route matches [PATCH] \"/article/viewing-article-2\"\n- Browser: ActionController::RoutingError (No route matches [PATCH] \"/article/viewing-article-2\"):\n</code></pre>\n\n<p>My routes are such as</p>\n\n<pre><code>**routes.erb**\n\nRails.application.routes.draw do\n\n  root to: 'pages#index'\n\n  post 'article/create-new-article', to: 'pages#create'\n\n  get 'article/viewing-article-:id', to: 'pages#show', as: 'article'\n\n  get 'article/:id/edit', to: 'pages#edit', as: 'article_edit'\n\n  patch 'article/:id/update', to: 'pages#update', as: 'update_article'\n\n  get 'article/new-article', to: 'pages#new'\n\n  get 'article/destroy', to: 'pages#destroy'\n\nend\n</code></pre>\n\n<p>and my controller:</p>\n\n<pre><code>controller.erb\n\ndef index\n    @articles = @@all_articles.all\n  end\n\n  def show\n    @article = Article.find(params[:id])\n  end\n\n  def edit\n    @article = Article.find(params[:id])\n  end\n\n  def update\n    @article = Article.find(params[:id])\n    article_params = params.require(:article).permit(:title, :author, :publisher, :content)\n    @article.update(article_params)\n    redirect_to root_path\n  end\n</code></pre>\n\n<p>and my html: </p>\n\n<pre><code>edit.html.erb\n\n&lt;% content_for :title do %&gt;Editing &lt;%= @article.title %&gt;&lt;% end %&gt;\n\n&lt;% content_for :bodycontent do %&gt;\n\n &lt;h3&gt;Editing &lt;%= @article.title %&gt;&lt;/h3&gt; \n\n  &lt;%= form_for @article do |f| %&gt;\n     &lt;%= f.text_field :title,  class: 'form-control'%&gt;\n     &lt;%= f.text_field :author,  class: 'form-control'%&gt;\n     &lt;%= f.text_field :publisher,  class: 'form-control'%&gt;\n     &lt;%= f.text_area :content,  class: 'form-control'%&gt; \n     &lt;%= f.submit class: 'form-control btn btn-primary' %&gt;\n  &lt;% end %&gt;\n\n&lt;% end %&gt;\n</code></pre>\n\n<p>I am not surely what I am doing wrong, as the selected article does not get updated. </p>\n\n<p>I have loved rails so far, and hope to get better at it. Will appreciate any help.</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 2607, "user_id": 4470392, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CvLjT.jpg?s=128&g=1", "display_name": "Maxim Pontyushenko", "link": "https://stackoverflow.com/users/4470392/maxim-pontyushenko"}, "edited": false, "score": 4, "creation_date": 1522256885, "post_id": 49540392, "comment_id": 86088018, "body": "What you want to achieve as a result?"}, {"owner": {"reputation": 711, "user_id": 1436565, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/IgTW0.png?s=128&g=1", "display_name": "Ralitza", "link": "https://stackoverflow.com/users/1436565/ralitza"}, "reply_to_user": {"reputation": 2607, "user_id": 4470392, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CvLjT.jpg?s=128&g=1", "display_name": "Maxim Pontyushenko", "link": "https://stackoverflow.com/users/4470392/maxim-pontyushenko"}, "edited": false, "score": 0, "creation_date": 1522257300, "post_id": 49540392, "comment_id": 86088255, "body": "I&#39;m curious about how the conversion from a hash to array works. I was expecting an array, such as [:type, &#39;sedan&#39;], [:color, &#39;blue&#39;], [:year, 2003]] when using .to_a. I&#39;m confused as to why there are curly braces after the conversion?"}, {"owner": {"reputation": 2607, "user_id": 4470392, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CvLjT.jpg?s=128&g=1", "display_name": "Maxim Pontyushenko", "link": "https://stackoverflow.com/users/4470392/maxim-pontyushenko"}, "edited": false, "score": 0, "creation_date": 1522257370, "post_id": 49540392, "comment_id": 86088299, "body": "Ok, that&#39;s a simple question and i will answer it right now. If you have other questions, than you should ask it in comments."}, {"owner": {"reputation": 35276, "user_id": 182590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/134ea397777886d6f0aa992672a50eaa?s=128&d=identicon&r=PG", "display_name": "Mark Thomas", "link": "https://stackoverflow.com/users/182590/mark-thomas"}, "edited": false, "score": 0, "creation_date": 1522258237, "post_id": 49540392, "comment_id": 86088800, "body": "I don&#39;t understand how you have them in the hash to begin with. What happens if you have more than one car?"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1522258614, "post_id": 49540392, "comment_id": 86088994, "body": "Do you want simply <code>vehicles[:car].to_a #=&gt; [[:type, &quot;sedan&quot;], [:color, &quot;red&quot;], [:year, 2007]]</code>?"}, {"owner": {"reputation": 35276, "user_id": 182590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/134ea397777886d6f0aa992672a50eaa?s=128&d=identicon&r=PG", "display_name": "Mark Thomas", "link": "https://stackoverflow.com/users/182590/mark-thomas"}, "edited": false, "score": 2, "creation_date": 1522258812, "post_id": 49540392, "comment_id": 86089103, "body": "Why do you need to convert to an array? Do you care that color is the 2nd attribute? Why not just use <code>vehicles[:car][:color]</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 35276, "user_id": 182590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/134ea397777886d6f0aa992672a50eaa?s=128&d=identicon&r=PG", "display_name": "Mark Thomas", "link": "https://stackoverflow.com/users/182590/mark-thomas"}, "edited": false, "score": 0, "creation_date": 1522258655, "post_id": 49540573, "comment_id": 86089008, "body": "or <code>vehicles.values.map(&amp;:to_a)</code>."}, {"owner": {"reputation": 711, "user_id": 1436565, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/IgTW0.png?s=128&g=1", "display_name": "Ralitza", "link": "https://stackoverflow.com/users/1436565/ralitza"}, "edited": false, "score": 0, "creation_date": 1522260011, "post_id": 49540573, "comment_id": 86089779, "body": "This makes sense, thank you! I\u2019m not doing anything with the data; I\u2019m simply trying to understand how the conversion works and your explanation made it a bit more clear! One thing, say I leave the nested array as is how would I access an individual value? <code>[[:car, {:type=&gt;&quot;sedan&quot;, :color=&gt;&quot;red&quot;, :year=&gt;2007}]]</code>"}, {"owner": {"reputation": 2607, "user_id": 4470392, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CvLjT.jpg?s=128&g=1", "display_name": "Maxim Pontyushenko", "link": "https://stackoverflow.com/users/4470392/maxim-pontyushenko"}, "reply_to_user": {"reputation": 711, "user_id": 1436565, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/IgTW0.png?s=128&g=1", "display_name": "Ralitza", "link": "https://stackoverflow.com/users/1436565/ralitza"}, "edited": false, "score": 0, "creation_date": 1522260188, "post_id": 49540573, "comment_id": 86089904, "body": "@Ralitza Dont get it fully but maybe something like this? <code>a= [[:car, {:type=&gt;&quot;sedan&quot;, :color=&gt;&quot;red&quot;, :year=&gt;2007}]]; a.first.last[:type]</code> or <code>a.first.last.to_a</code>"}, {"owner": {"reputation": 711, "user_id": 1436565, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/IgTW0.png?s=128&g=1", "display_name": "Ralitza", "link": "https://stackoverflow.com/users/1436565/ralitza"}, "edited": false, "score": 0, "creation_date": 1522261882, "post_id": 49540573, "comment_id": 86090884, "body": "Ah, that&#39;s great! Thank you so much for answering all of my questions!"}], "tags": [], "owner": {"reputation": 2607, "user_id": 4470392, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CvLjT.jpg?s=128&g=1", "display_name": "Maxim Pontyushenko", "link": "https://stackoverflow.com/users/4470392/maxim-pontyushenko"}, "is_accepted": true, "score": 1, "last_activity_date": 1522258555, "last_edit_date": 1522258555, "creation_date": 1522257495, "answer_id": 49540573, "question_id": 49540392, "link": "https://stackoverflow.com/questions/49540392/nested-hash-to-nested-array-how-to-access-individual-values/49540573#49540573", "title": "Nested Hash to Nested Array: How to access individual values", "body": "<pre><code>vehicles = {\n   car: { type: 'sedan', color: 'red', year: 2007 },\n }\n</code></pre>\n\n<p>Here you have a hash with nested hash in it: <code>vehicles[:car]</code>. When you attempt to convert it to array with <code>.to_a</code> you convert only higher level of this hash but not nested. To achieve what you want you can convert nested hashes also by doing this:</p>\n\n<pre><code>result = vehicles.to_a.map { |v| v.last.to_a }\n=&gt; [[[:type, \"sedan\"], [:color, \"red\"], [:year, 2007]]]\n</code></pre>\n\n<p>Either way you are not doing your solution the right way. It seems too strange and complex, but I don't know your case, so ...</p>\n"}, {"comments": [{"owner": {"reputation": 711, "user_id": 1436565, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/IgTW0.png?s=128&g=1", "display_name": "Ralitza", "link": "https://stackoverflow.com/users/1436565/ralitza"}, "edited": false, "score": 0, "creation_date": 1522259505, "post_id": 49540935, "comment_id": 86089511, "body": "Yes, I\u2019m sorry for not being more clear - I had so many questions in mind and wasn\u2019t quite able to articulate them properly. Thank you for this!"}], "tags": [], "owner": {"reputation": 80721, "user_id": 797049, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5f4f7a23e3d0134123a66015bdc4edd1?s=128&d=identicon&r=PG", "display_name": "Mark Reed", "link": "https://stackoverflow.com/users/797049/mark-reed"}, "is_accepted": false, "score": 3, "last_activity_date": 1522258878, "creation_date": 1522258878, "answer_id": 49540935, "question_id": 49540392, "link": "https://stackoverflow.com/questions/49540392/nested-hash-to-nested-array-how-to-access-individual-values/49540935#49540935", "title": "Nested Hash to Nested Array: How to access individual values", "body": "<p>Your question is not clear, but based on your comment, you want something like this:</p>\n\n<pre><code>vehicles[:car].to_a\n</code></pre>\n\n<p>Which yields this:</p>\n\n<pre><code>[[:type, \"sedan\"], [:color, \"red\"], [:year, 2007]]\n</code></pre>\n"}], "owner": {"reputation": 711, "user_id": 1436565, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/IgTW0.png?s=128&g=1", "display_name": "Ralitza", "link": "https://stackoverflow.com/users/1436565/ralitza"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 0, "accepted_answer_id": 49540573, "answer_count": 2, "score": 0, "last_activity_date": 1522258878, "creation_date": 1522256811, "last_edit_date": 1522256938, "question_id": 49540392, "link": "https://stackoverflow.com/questions/49540392/nested-hash-to-nested-array-how-to-access-individual-values", "title": "Nested Hash to Nested Array: How to access individual values", "body": "<p>I apologize in advance for the newbie question!</p>\n\n<p>I have the following nested hash and want to convert it into a nested array, and be able to access individual values using their indices. </p>\n\n<pre><code>vehicles = {\n    car: { type: 'sedan', color: 'red', year: 2007 },\n  }\n</code></pre>\n\n<p>I attempted to do this a couple of different ways below, however, I was not able to access an individual value, like 'sedan' using its index. My questions are 1) How do I access an individual element in each solution? 2) Is it recommended to use .map as I have or to_a for future cases?   </p>\n\n<pre><code> car_array1 = vehicles.to_a\n # =&gt; [[:car, {:type=&gt;\"sedan\", :color=&gt;\"red\", :year=&gt;2007}]] \n\n car_array2 = []\n vehicles.map { |k, v| car_array2 &lt;&lt; [k, v] }\n # =&gt; [[[:car, {:type=&gt;\"sedan\", :color=&gt;\"red\", :year=&gt;2007}]]] \n\n puts 'car_array1:'\n p car_array1[0][1]\n # {:type=&gt;\"sedan\", :color=&gt;\"red\", :year=&gt;2007}\n\n puts '-' * 10 \n\n puts 'car_array2'\n p car_array2[0][1]\n # {:type=&gt;\"sedan\", :color=&gt;\"red\", :year=&gt;2007}\n</code></pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 4243, "user_id": 4638378, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pGqPN.png?s=128&g=1", "display_name": "Brian", "link": "https://stackoverflow.com/users/4638378/brian"}, "edited": false, "score": 1, "creation_date": 1522253682, "post_id": 49539339, "comment_id": 86086096, "body": "Can you show your <code>plainprogram.txt</code>? My guess is that you have some Unicode or other non-ASCII characters in there somehow."}, {"owner": {"reputation": 5139, "user_id": 1735262, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fGuXb.png?s=128&g=1", "display_name": "Reinstate Monica -- notmaynard", "link": "https://stackoverflow.com/users/1735262/reinstate-monica-notmaynard"}, "edited": false, "score": 0, "creation_date": 1522254882, "post_id": 49539339, "comment_id": 86086849, "body": "I though Ruby defaulted to Unicode."}, {"owner": {"reputation": 5141, "user_id": 193980, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/aafa8848c4b764f080b1b31a51eab73d?s=128&d=identicon&r=PG", "display_name": "Phlip", "link": "https://stackoverflow.com/users/193980/phlip"}, "edited": false, "score": 1, "creation_date": 1522255294, "post_id": 49539339, "comment_id": 86087083, "body": "If you use a GNU-based environment (such as Linux or Cygwin), I want to see <code>hexdump -C plainprogram.txt | head</code>. It will show what funny characters might be in there."}, {"owner": {"reputation": 13, "user_id": 9565178, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "nick n", "link": "https://stackoverflow.com/users/9565178/nick-n"}, "edited": false, "score": 0, "creation_date": 1522255447, "post_id": 49539339, "comment_id": 86087170, "body": "no, its on windows"}, {"owner": {"reputation": 5139, "user_id": 1735262, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fGuXb.png?s=128&g=1", "display_name": "Reinstate Monica -- notmaynard", "link": "https://stackoverflow.com/users/1735262/reinstate-monica-notmaynard"}, "edited": false, "score": 2, "creation_date": 1522256121, "post_id": 49539339, "comment_id": 86087567, "body": "I don&#39;t know what utility for Windows has the same function as hexdump. I checked the program text, and here&#39;s the culprit: in <code>x \u2013 1</code> there&#39;s a <code>U+2013 \u2013 EN DASH</code> being used as the minus sign (rather than the regular hypen-minus character), which is outside the ASCII range. Not sure how it got there, but I imagine the terrible programming language would also crash on this program. See XavierShay&#39;s answer below for how to get Ruby to work with it."}, {"owner": {"reputation": 16237, "user_id": 2166798, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/417356917295f5176d2a3e7c21d8f9e8?s=128&d=identicon&r=PG", "display_name": "pjs", "link": "https://stackoverflow.com/users/2166798/pjs"}, "reply_to_user": {"reputation": 5139, "user_id": 1735262, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fGuXb.png?s=128&g=1", "display_name": "Reinstate Monica -- notmaynard", "link": "https://stackoverflow.com/users/1735262/reinstate-monica-notmaynard"}, "edited": false, "score": 1, "creation_date": 1522259018, "post_id": 49539339, "comment_id": 86089212, "body": "@iamnotmaynard I would bet that <code>plainprogram.txt</code> was created using a word processor rather than a text editor."}, {"owner": {"reputation": 5141, "user_id": 193980, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/aafa8848c4b764f080b1b31a51eab73d?s=128&d=identicon&r=PG", "display_name": "Phlip", "link": "https://stackoverflow.com/users/193980/phlip"}, "edited": false, "score": 0, "creation_date": 1522261312, "post_id": 49539339, "comment_id": 86090541, "body": "And a final word of advice to nick n:  On Windows, install Cygwin to get zillions of programming tools, including <code>hexdump</code>."}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1522301813, "post_id": 49539339, "comment_id": 86104629, "body": "What is your question?"}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 9565178, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "nick n", "link": "https://stackoverflow.com/users/9565178/nick-n"}, "edited": false, "score": 0, "creation_date": 1522255875, "post_id": 49540038, "comment_id": 86087422, "body": "you know what you may be right, i am using an online compiler, and you code doesn&#39;t have slip throw and error"}], "tags": [], "owner": {"reputation": 3629, "user_id": 379639, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/4fa63505dd4dd4691b87d30508b1bfd3?s=128&d=identicon&r=PG", "display_name": "Xavier Shay", "link": "https://stackoverflow.com/users/379639/xavier-shay"}, "is_accepted": false, "score": 5, "last_activity_date": 1522255494, "creation_date": 1522255494, "answer_id": 49540038, "question_id": 49539339, "link": "https://stackoverflow.com/questions/49539339/split-invalid-byte-sequence-in-us-ascii/49540038#49540038", "title": "Split invalid byte sequence in US-ASCII", "body": "<p>Ruby typically defaults to UTF-8, but something about your environment/version does not appear to be. You can force an encoding like this:</p>\n\n<pre><code>File.readlines('plainprogram.txt', :encoding =&gt; 'UTF-8')\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 16237, "user_id": 2166798, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/417356917295f5176d2a3e7c21d8f9e8?s=128&d=identicon&r=PG", "display_name": "pjs", "link": "https://stackoverflow.com/users/2166798/pjs"}, "is_accepted": false, "score": 0, "last_activity_date": 1522259744, "creation_date": 1522259744, "answer_id": 49541174, "question_id": 49539339, "link": "https://stackoverflow.com/questions/49539339/split-invalid-byte-sequence-in-us-ascii/49541174#49541174", "title": "Split invalid byte sequence in US-ASCII", "body": "<p>You have a non-ascii character in the input, the following slight modification to your program can identify it in the absence of tools such as <code>hexdump</code>:</p>\n\n<pre><code>File.readlines(\"plainprogram.txt\").each do |line|\n  line.each_char { |chr| STDERR.puts \"#{chr} : #{chr.ord}\" if chr.ord &gt; 127 }\n  pieces = line.split()\nend\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 9565178, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "nick n", "link": "https://stackoverflow.com/users/9565178/nick-n"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1992, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1522301746, "creation_date": 1522253219, "last_edit_date": 1522301746, "question_id": 49539339, "link": "https://stackoverflow.com/questions/49539339/split-invalid-byte-sequence-in-us-ascii", "title": "Split invalid byte sequence in US-ASCII", "body": "<p>I'm trying to take a line from a file <code>plainprogram.txt</code>, split it at the spaces, and store them in an array. This is the plain program text in <code>plainprogram.txt</code>:</p>\n\n<pre><code>5 cmt A program with a simple loop that counts down.\n10 get x\n20 if x = 0 goto 90\n30 output x\n40 let x = x \u2013 1\n50 goto 20\n90 stop\n</code></pre>\n\n<p>It is supposed to resemble code from a terrible programming language. This is my code:</p>\n\n<pre><code>File.readlines(\"plainprogram.txt\").each do |line|\n  pieces = line.split()\nend\n</code></pre>\n\n<p>I get this error</p>\n\n<pre><code>Traceback (most recent call last):\n3: from main.rb:13:in &lt;main&gt;\n2: from main.rb:13:in each\n1: from main.rb:14:in block in &lt;main&gt;\nmain.rb:14:in split: invalid byte sequence in US-ASCII\n(ArgumentError)\n</code></pre>\n\n<p>I can't figure out why this code raises an error. I don't understand why <code>split</code> throws this error, nor how to fix it.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "git-bash"], "comments": [{"owner": {"reputation": 2607, "user_id": 4470392, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CvLjT.jpg?s=128&g=1", "display_name": "Maxim Pontyushenko", "link": "https://stackoverflow.com/users/4470392/maxim-pontyushenko"}, "edited": false, "score": 0, "creation_date": 1522252713, "post_id": 49538963, "comment_id": 86085372, "body": "What OS do you use?"}, {"owner": {"reputation": 947, "user_id": 7372897, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/fef45f6e174d50b0fb51c2069653b3c6?s=128&d=identicon&r=PG&f=1", "display_name": "Jake", "link": "https://stackoverflow.com/users/7372897/jake"}, "reply_to_user": {"reputation": 2607, "user_id": 4470392, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CvLjT.jpg?s=128&g=1", "display_name": "Maxim Pontyushenko", "link": "https://stackoverflow.com/users/4470392/maxim-pontyushenko"}, "edited": false, "score": 0, "creation_date": 1522252770, "post_id": 49538963, "comment_id": 86085414, "body": "I&#39;m using Windows"}], "answers": [{"comments": [{"owner": {"reputation": 947, "user_id": 7372897, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/fef45f6e174d50b0fb51c2069653b3c6?s=128&d=identicon&r=PG&f=1", "display_name": "Jake", "link": "https://stackoverflow.com/users/7372897/jake"}, "edited": false, "score": 0, "creation_date": 1522253866, "post_id": 49539244, "comment_id": 86086205, "body": "I&#39;m not quite sure how to apply this. Can you help me understand how to go about doing this?"}, {"owner": {"reputation": 947, "user_id": 7372897, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/fef45f6e174d50b0fb51c2069653b3c6?s=128&d=identicon&r=PG&f=1", "display_name": "Jake", "link": "https://stackoverflow.com/users/7372897/jake"}, "edited": false, "score": 0, "creation_date": 1522254084, "post_id": 49539244, "comment_id": 86086352, "body": "I tried installing the gem and this happened:  <code>$ gem install rabl -v &#39;0.13.1&#39; ERROR:  While executing gem ... (Errno::EACCES)     Permission denied @ rb_file_s_symlink - (fixtures&#47;ashared&#47;views_rails_3&#47;users&#47;phone_number.json.rabl&zwnj;&#8203;, C:&#47;RailsInstaller&#47;Ruby2.3.0&#47;lib&#47;ruby&#47;gems&#47;2.3.0&#47;gems&#47;rabl-0.&zwnj;&#8203;13.1&#47;fixtures&#47;ashare&zwnj;&#8203;d&#47;views_rails_3&#47;user&zwnj;&#8203;s&#47;phone_number.xml.r&zwnj;&#8203;abl)</code>"}, {"owner": {"reputation": 2607, "user_id": 4470392, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CvLjT.jpg?s=128&g=1", "display_name": "Maxim Pontyushenko", "link": "https://stackoverflow.com/users/4470392/maxim-pontyushenko"}, "reply_to_user": {"reputation": 947, "user_id": 7372897, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/fef45f6e174d50b0fb51c2069653b3c6?s=128&d=identicon&r=PG&f=1", "display_name": "Jake", "link": "https://stackoverflow.com/users/7372897/jake"}, "edited": false, "score": 0, "creation_date": 1522256263, "post_id": 49539244, "comment_id": 86087646, "body": "@Jake You should run terminal as administrator first by right clicking on its icon."}], "tags": [], "owner": {"reputation": 2607, "user_id": 4470392, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CvLjT.jpg?s=128&g=1", "display_name": "Maxim Pontyushenko", "link": "https://stackoverflow.com/users/4470392/maxim-pontyushenko"}, "is_accepted": true, "score": 1, "last_activity_date": 1522252940, "creation_date": 1522252940, "answer_id": 49539244, "question_id": 49538963, "link": "https://stackoverflow.com/questions/49538963/ruby-on-rails-bundle-error-possibly-due-to-spree-gems/49539244#49539244", "title": "Ruby on rails Bundle error possibly due to spree gems", "body": "<p>Since you are working on windows it has to be <a href=\"https://github.com/spree/spree/issues/8065\" rel=\"nofollow noreferrer\">this</a> issue, check it out for more details. It looks like this might help you:</p>\n\n<blockquote>\n  <p>Search cmd, right click, (Run as administrator), gem install rabl -v '0.13.1', and you're done.</p>\n</blockquote>\n"}], "owner": {"reputation": 947, "user_id": 7372897, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/fef45f6e174d50b0fb51c2069653b3c6?s=128&d=identicon&r=PG&f=1", "display_name": "Jake", "link": "https://stackoverflow.com/users/7372897/jake"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 170, "favorite_count": 0, "accepted_answer_id": 49539244, "answer_count": 1, "score": 0, "last_activity_date": 1522252940, "creation_date": 1522252197, "question_id": 49538963, "link": "https://stackoverflow.com/questions/49538963/ruby-on-rails-bundle-error-possibly-due-to-spree-gems", "title": "Ruby on rails Bundle error possibly due to spree gems", "body": "<p>After Adding into my Gemfile the spree gems from their documentation I came across this error when trying to <code>bundle install</code>:</p>\n\n<pre><code>Bundler could not find compatible versions for gem \"cocaine\":\n  In snapshot (Gemfile.lock):\n    cocaine (= 0.6.0)\n\n  In Gemfile:\nckeditor (&gt;= 4.2.4, ~&gt; 4.2) x86-mingw32 was resolved to 4.2.4, which depends on\n  cocaine x86-mingw32\n\nspree (~&gt; 3.4.4) x86-mingw32 was resolved to 3.4.4, which depends on\n  spree_core (= 3.4.4) x86-mingw32 was resolved to 3.4.4, which depends on\n    paperclip (~&gt; 5.1.0) x86-mingw32 was resolved to 5.1.0, which depends on\n      cocaine (~&gt; 0.5.5) x86-mingw32\n\nRunning `bundle update` will rebuild your snapshot from scratch, using only\nthe gems in your Gemfile, which may resolve the conflict.\n</code></pre>\n\n<p>Then When I try to <code>Bundle Update</code> I get this:</p>\n\n<pre><code>Errno::EACCES: Permission denied @ rb_file_s_symlink -\n(fixtures/ashared/views_rails_3/users/phone_number.json.rabl,\nC:/RailsInstaller/Ruby2.3.0/lib/ruby/gems/2.3.0/gems/rabl- \n0.13.1/fixtures/ashared/views_rails_3/users/phone_number.xml.rabl)\nAn error occurred while installing rabl (0.13.1), and Bundler cannot continue.\nMake sure that `gem install rabl -v '0.13.1'` succeeds before bundling.\n</code></pre>\n\n<p>This is my Gemfile:</p>\n\n<pre><code>source 'https://rubygems.org'\n\n# Bundle edge Rails instead: gem 'rails', github: 'rails/rails'\ngem 'rails', '~&gt; 5.1', '&gt;= 5.1.5'\n\n# This just fixes everything?\ngem 'actionpack', '~&gt; 5.1', '&gt;= 5.1.5'\n\n# Use sqlite3 as the database for Active Record\ngem 'sqlite3'\n\n# Use Puma as the app server\ngem 'puma', '~&gt; 3.11', '&gt;= 3.11.3'\n\n# Use SCSS for stylesheets\ngem 'sass-rails', '~&gt; 5.0', '&gt;= 5.0.7'\n\n# Use Uglifier as compressor for JavaScript assets\ngem 'uglifier', '~&gt; 4.1', '&gt;= 4.1.6'\n\n# Use CoffeeScript for .coffee assets and views\ngem 'coffee-rails', '~&gt; 4.2', '&gt;= 4.2.2'\n\n# See https://github.com/rails/execjs#readme for more supported runtimes\n# gem 'therubyracer', platforms: :ruby\n\n# Use jquery as the JavaScript library\ngem 'jquery-rails'\n\n# Turbolinks makes navigating your web application faster. Read more: https://github.com/turbolinks/turbolinks\ngem 'turbolinks', '~&gt; 5.1'\n\n# Build JSON APIs with ease. Read more: https://github.com/rails/jbuilder\ngem 'jbuilder', '~&gt; 2.5'\n\n# Use Redis adapter to run Action Cable in production\n# hiredis is not supported on windows\n# gem 'redis', '~&gt; 3.0'\n\n# Use ActiveModel has_secure_password\ngem 'bcrypt', '~&gt; 3.1.11'\n\n# Use Capistrano for deployment\n# gem 'capistrano-rails', group: :development\n\ngroup :development, :test do\n  # Call 'byebug' anywhere in the code to stop execution and get a debugger console\n  gem 'byebug', platform: [:mri, :mingw, :x64_mingw]\nend\n\ngroup :development do\n  # Access an IRB console on exception pages or by using &lt;%= console %&gt; anywhere in the code.\n  gem 'web-console', '&gt;= 3.3.0'\nend\n\n# Windows does not include zoneinfo files, so bundle the tzinfo-data gem\ngem 'tzinfo-data', platforms: [:mingw, :mswin, :x64_mingw, :jruby]\n\n# SEO &amp; Meta Tags\ngem 'meta-tags'\n\n# Text editor for blog posts\ngem 'ckeditor', '~&gt; 4.2', '&gt;= 4.2.4'\n\n# Framework for forms, (forms that require ckeditor especially).\ngem 'simple_form', '~&gt; 3.5', '&gt;= 3.5.1'\n\n# Contact form email delivery\ngem 'mail_form'\n\n# Ecommerce solution\ngem 'spree', '~&gt; 3.4.4'\ngem 'spree_gateway', '~&gt; 3.3'\n</code></pre>\n\n<p>I have no idea why or how this is even happening due to the newly added spree gems. Thank you in advance for any help you may be able to provide!</p>\n"}, {"tags": ["ruby", "selenium-webdriver", "cucumber"], "answers": [{"comments": [{"owner": {"reputation": 83, "user_id": 9419102, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3b0a94b437e39bbb234559d4300691ef?s=128&d=identicon&r=PG&f=1", "display_name": "Fatna", "link": "https://stackoverflow.com/users/9419102/fatna"}, "edited": false, "score": 0, "creation_date": 1522253175, "post_id": 49539169, "comment_id": 86085725, "body": "Thanks Eric, now even I saw the popup dialog box, I got this error :  No modal dialog is currently open (Selenium::WebDriver::Error::NoSuchAlertError)"}], "tags": [], "owner": {"reputation": 397, "user_id": 1642511, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1f2c418f2e87d63e2ccbf538ed70fdb?s=128&d=identicon&r=PG", "display_name": "Eric Himmelreich", "link": "https://stackoverflow.com/users/1642511/eric-himmelreich"}, "is_accepted": true, "score": 0, "last_activity_date": 1522252725, "creation_date": 1522252725, "answer_id": 49539169, "question_id": 49538886, "link": "https://stackoverflow.com/questions/49538886/ruby-cucumber-selenium-alert-undefined-local-variable-or-method-page/49539169#49539169", "title": "ruby, cucumber selenium, alert , undefined local variable or method `page&#39;", "body": "<p>The correct code is:</p>\n\n<pre><code>When /^I confirm popup$/ do   \n  driver.switch_to.alert.accept\nend\n\nWhen /^I dismiss popup$/ do\n  driver.switch_to.alert.dismiss\nend\n</code></pre>\n\n<p>More driver methods <a href=\"http://www.rubydoc.info/gems/selenium-webdriver/3.11.0/Selenium/WebDriver/Driver#switch_to-instance_method\" rel=\"nofollow noreferrer\">here</a></p>\n"}], "owner": {"reputation": 83, "user_id": 9419102, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3b0a94b437e39bbb234559d4300691ef?s=128&d=identicon&r=PG&f=1", "display_name": "Fatna", "link": "https://stackoverflow.com/users/9419102/fatna"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 234, "favorite_count": 0, "accepted_answer_id": 49539169, "answer_count": 1, "score": 1, "last_activity_date": 1522252725, "creation_date": 1522252006, "question_id": 49538886, "link": "https://stackoverflow.com/questions/49538886/ruby-cucumber-selenium-alert-undefined-local-variable-or-method-page", "title": "ruby, cucumber selenium, alert , undefined local variable or method `page&#39;", "body": "<p>I have a web application that when you login a pop up dialog box appears, here is what I did :</p>\n\n<pre><code>When /^I confirm popup$/ do\npage.driver.browser.switch_to.alert.accept    \nend\n\nWhen /^I dismiss popup$/ do\npage.driver.browser.switch_to.alert.dismiss\nend\n</code></pre>\n\n<p>I don't know where the variable page should come from , here is what I got :</p>\n\n<pre><code>undefined local variable or method `page' for #&lt;Object:0x0000000003c64618&gt; (NameError)\n</code></pre>\n\n<p>Thanks,</p>\n"}, {"tags": ["ruby", "pdf", "rubygems", "pdf-reader"], "comments": [{"owner": {"reputation": 2607, "user_id": 4470392, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CvLjT.jpg?s=128&g=1", "display_name": "Maxim Pontyushenko", "link": "https://stackoverflow.com/users/4470392/maxim-pontyushenko"}, "edited": false, "score": 0, "creation_date": 1522253079, "post_id": 49538586, "comment_id": 86085641, "body": "Can you share this document?"}], "answers": [{"tags": [], "owner": {"reputation": 3, "user_id": 1669556, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d428faedea14e26022a8dbdfca604767?s=128&d=identicon&r=PG", "display_name": "user1669556", "link": "https://stackoverflow.com/users/1669556/user1669556"}, "is_accepted": true, "score": 0, "last_activity_date": 1522789869, "creation_date": 1522789869, "answer_id": 49639206, "question_id": 49538586, "link": "https://stackoverflow.com/questions/49538586/get-metadata-from-a-pdf-file-in-ruby/49639206#49639206", "title": "get metadata from a pdf file in ruby", "body": "<pre><code>Fixed by reading from raw data..\n</code></pre>\n\n<p>thanks for help.</p>\n"}], "owner": {"reputation": 3, "user_id": 1669556, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d428faedea14e26022a8dbdfca604767?s=128&d=identicon&r=PG", "display_name": "user1669556", "link": "https://stackoverflow.com/users/1669556/user1669556"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 159, "favorite_count": 0, "accepted_answer_id": 49639206, "answer_count": 1, "score": 0, "last_activity_date": 1522789869, "creation_date": 1522251161, "question_id": 49538586, "link": "https://stackoverflow.com/questions/49538586/get-metadata-from-a-pdf-file-in-ruby", "title": "get metadata from a pdf file in ruby", "body": "<p>I am trying to read unique number from pdf by \"pdf-reader\" gem but for some reason its not reading just that page. other then the first page, all pages read ok. when it reads, it returns empty.</p>\n\n<pre><code>I am using following code\n\n      reader = PDF::Reader.new(filename)\n      reader.pages.each do |page|\n        puts page.text\n      end\n</code></pre>\n"}, {"tags": ["ruby", "mongodb", "sinatra", "mongoid"], "comments": [{"owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 0, "creation_date": 1522306333, "post_id": 49538391, "comment_id": 86106573, "body": "Why would you add field <code>id</code> to each model?"}, {"owner": {"reputation": 303, "user_id": 335740, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/e8cd268f1e2fabdded1831548c4c6342?s=128&d=identicon&r=PG", "display_name": "303", "link": "https://stackoverflow.com/users/335740/303"}, "reply_to_user": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 0, "creation_date": 1522338182, "post_id": 49538391, "comment_id": 86128148, "body": "@JagdeepSingh I&#39;ve migrated from MongoMapper to Mongoid. Mongomapper autmatically created id property and converted value to string while serializing model to json. Mongoid however doesn&#39;t do that and I was getting _id&quot;:{&quot;$oid&quot;:&quot;575e83f98b9b540003000004&quot;} when serializing to json. I added this extra id property so I don&#39;t have to update my Javascript files."}], "owner": {"reputation": 303, "user_id": 335740, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/e8cd268f1e2fabdded1831548c4c6342?s=128&d=identicon&r=PG", "display_name": "303", "link": "https://stackoverflow.com/users/335740/303"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 69, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1522250610, "creation_date": 1522250610, "question_id": 49538391, "link": "https://stackoverflow.com/questions/49538391/issue-with-mongoid-and-embedded-documents", "title": "Issue with mongoid and embedded documents", "body": "<p>Ican't solve issue with deleting embedded documents - that is simply not happening even tough that parent and embedded document are getting found. I have searched other questions on Stackoverflow and Github issues but none of the suggestions work.</p>\n\n<p>Here is the code responsible for deleting embedded doc (using latest sinatra, mongo and mongoid gems):</p>\n\n<pre><code>delete '/api/items/:id/notes/:note_id' do\n    owner_email = session[:logged_user].email\n    id = params[:id]\n    item = ToDoItem.by_user(owner_email).find(id)\n    if item.nil?\n        halt 404, 'Item not found'\n    else\n        note_id = params[:note_id]\n        note = item.notes.find(note_id)\n        # logger.info BSON::ObjectId(note_id).to_s\n        # logger.info note.to_json\n\n        note.destroy      \n        item.save!\n        item.reload\n        { :success =&gt; true }.to_json\n    end\nend\n</code></pre>\n\n<p>Here is model:</p>\n\n<pre><code>class ToDoItem\n    include Mongoid::Document\n    include Mongoid::Timestamps\n    include Mongoid::Attributes::Dynamic\n\n    field :sort_order,  type: Integer,  default: 1\n    field :name,        type: String\n    field :completed,   type: Boolean,  default: false\n    field :owner_email, type: String\n    field :categories,  type: Array,    default: ['general']\n    field :id,          type: String\n    embeds_many :notes\n\n    def self.by_user(email)\n        where(owner_email: email)\n    end\n\n    def self.by_category(category)\n        where(categories: category)\n    end\n\n    def self.by_completed\n        where(completed: true)\n    end\n\n    def id\n        BSON::ObjectId(_id).to_s\n    end\nend\n\n class Note\n  include Mongoid::Document\n  include Mongoid::Timestamps\n  field :text, type: String\n  field :id,   type: String\n\n  def id\n    BSON::ObjectId(_id).to_s\n   end\n\n  embedded_in :todoitem\n end\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "activerecord"], "comments": [{"owner": {"reputation": 51013, "user_id": 976775, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30bd66ad1795804aebe249d8bcb14409?s=128&d=identicon&r=PG", "display_name": "MrYoshiji", "link": "https://stackoverflow.com/users/976775/mryoshiji"}, "edited": false, "score": 1, "creation_date": 1522250321, "post_id": 49538090, "comment_id": 86083625, "body": "I strongly recommend you to renamed you column <code>valid</code> to something else because it is already used by <code>ActiveRecord</code> &amp; <code>ActiveModel::Errors</code> (see <code>valid?</code> method)"}], "answers": [{"comments": [{"owner": {"reputation": 1256, "user_id": 2713696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9Ebob.jpg?s=128&g=1", "display_name": "Mukesh Kumar Gupta", "link": "https://stackoverflow.com/users/2713696/mukesh-kumar-gupta"}, "edited": false, "score": 0, "creation_date": 1522259036, "post_id": 49538378, "comment_id": 86089224, "body": "I like the first one, it is neat and clean and it also makes only one query."}], "tags": [], "owner": {"reputation": 51013, "user_id": 976775, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30bd66ad1795804aebe249d8bcb14409?s=128&d=identicon&r=PG", "display_name": "MrYoshiji", "link": "https://stackoverflow.com/users/976775/mryoshiji"}, "is_accepted": true, "score": 1, "last_activity_date": 1522250567, "creation_date": 1522250567, "answer_id": 49538378, "question_id": 49538090, "link": "https://stackoverflow.com/questions/49538090/reject-records-where-associations-have-specific-attribute-value/49538378#49538378", "title": "Reject records where associations have specific attribute value", "body": "<p>You have two options:</p>\n\n<p><strong>Option 1</strong> using a <code>INNER JOIN</code>:</p>\n\n<pre><code>games_with_invalid_players = Game.joins(:players).where(players: { valid: false })\n# add .distinct at the end if you want to remove the duplicated game records\n</code></pre>\n\n<p><strong>Option 2</strong> using a sub-select:</p>\n\n<pre><code>game_ids = Player.where(valid: false).select(:game_id).distinct\ngames_with_invalid_players = Game.where(id: game_ids)\n</code></pre>\n"}], "owner": {"reputation": 2401, "user_id": 2873548, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/b90a1fd45fc72bd55f8948b385d4626f?s=128&d=identicon&r=PG&f=1", "display_name": "anonn023432", "link": "https://stackoverflow.com/users/2873548/anonn023432"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 397, "favorite_count": 0, "accepted_answer_id": 49538378, "answer_count": 1, "score": 1, "last_activity_date": 1522250567, "creation_date": 1522249658, "question_id": 49538090, "link": "https://stackoverflow.com/questions/49538090/reject-records-where-associations-have-specific-attribute-value", "title": "Reject records where associations have specific attribute value", "body": "<p>I have 3 models as:</p>\n\n<pre><code>class Server\n  has_many: games\nend\n\nclass Game\n  belongs_to: server\n  has_many: players\nend\n\nclass Player\n  belongs_to: game\nend\n</code></pre>\n\n<p>The <code>Player</code> model has an attribute <code>valid</code> which may be true/false</p>\n\n<p>Now I want to get a list of <code>games</code> which belong to a particular <code>server</code> but while pulling the <code>games</code> for a <code>server</code> I want to reject all <code>games</code> which <strong>ONLY</strong> have <code>players</code> with attribute <code>valid</code> set as <code>true</code>. </p>\n\n<p>Any <code>game</code> which has even one <code>player</code> with attribute <code>valid</code> as <code>false</code> should show up in the result.</p>\n\n<p>I can do it the following way:</p>\n\n<pre><code>@server.games.reject { |g| g.players.reject(&amp;:valid).empty? } \n</code></pre>\n\n<p>But this seems highly inefficient. Is there a better way to implement the same?</p>\n"}, {"tags": ["arrays", "ruby", "hash", "iteration", "enumerate"], "answers": [{"comments": [{"owner": {"reputation": 8640, "user_id": 4055042, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cd04c63d95d27033b53d4d83fea40c02?s=128&d=identicon&r=PG&f=1", "display_name": "SRack", "link": "https://stackoverflow.com/users/4055042/srack"}, "edited": false, "score": 0, "creation_date": 1522252290, "post_id": 49538210, "comment_id": 86085041, "body": "This is a really nice answer, +1. Perhaps worth using lower snake case and adding a note to reflect this? Looks a little off using the caps in variable names."}, {"owner": {"reputation": 435, "user_id": 4995725, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-VVnw39rs050/AAAAAAAAAAI/AAAAAAAAAhk/ukAYsLTcqrk/photo.jpg?sz=128", "display_name": "Mauricio Klein", "link": "https://stackoverflow.com/users/4995725/mauricio-klein"}, "reply_to_user": {"reputation": 8640, "user_id": 4055042, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cd04c63d95d27033b53d4d83fea40c02?s=128&d=identicon&r=PG&f=1", "display_name": "SRack", "link": "https://stackoverflow.com/users/4055042/srack"}, "edited": false, "score": 0, "creation_date": 1522827054, "post_id": 49538210, "comment_id": 86298327, "body": "@SRack I totally agree. Ruby convention says to use lower snake case for variables and upper camel case for constants, modules and classes. I just kept the same name for convenience, so it matches the variables described in the question :)"}], "tags": [], "owner": {"reputation": 435, "user_id": 4995725, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-VVnw39rs050/AAAAAAAAAAI/AAAAAAAAAhk/ukAYsLTcqrk/photo.jpg?sz=128", "display_name": "Mauricio Klein", "link": "https://stackoverflow.com/users/4995725/mauricio-klein"}, "is_accepted": true, "score": 3, "last_activity_date": 1523889836, "last_edit_date": 1523889836, "creation_date": 1522250033, "answer_id": 49538210, "question_id": 49537731, "link": "https://stackoverflow.com/questions/49537731/iterating-through-two-arrays-to-make-a-hash-in-ruby/49538210#49538210", "title": "Iterating through two arrays to make a hash in Ruby", "body": "<p>I suggest to slice the values array on the keys array length, and then just map them into an array of hashes. For example:</p>\n\n<pre><code>sliced_values = Data_examples.each_slice(Array_headers.length)\nresult = sliced_values.map { |slice| Array_headers.zip(slice).to_h }\n</code></pre>\n\n<p>You will never get a single hash as result, because you'll have collision on the keys and, then, only the last result will be returned, since it overwrites the previous ones. Remember that hash keys are unique in Ruby.</p>\n"}, {"tags": [], "owner": {"reputation": 36, "user_id": 2696478, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7dbf136fbfae4e79970fc7bbe7d272f2?s=128&d=identicon&r=PG", "display_name": "Toby Chin", "link": "https://stackoverflow.com/users/2696478/toby-chin"}, "is_accepted": false, "score": 1, "last_activity_date": 1522250372, "creation_date": 1522250372, "answer_id": 49538318, "question_id": 49537731, "link": "https://stackoverflow.com/questions/49537731/iterating-through-two-arrays-to-make-a-hash-in-ruby/49538318#49538318", "title": "Iterating through two arrays to make a hash in Ruby", "body": "<p>Looks like you actually want an array of hashes. So, your first array is going to be your list of keys for your hashes (I'll reference to this as \"HEADER_KEYS\"). In your second array, I see \"\\r\\n\". You may want to back up a step. I'm assuming this is coming from a CSV, so there are known delimiters and an unknown number of rows. To start parsing your CSV, split on the \"\\r\\n\" (or whatever the line break happens to be), and then iterate over each of those items and split on the commas. Something like:\n</p>\n\n<pre><code>final_dataset = []\nHEADER_KEYS = [].freeze # put your actual array_of_headers here and freeze it\narray_of_rows = []\ncsv_string.split(\"\\r\\n\").each { |row| array_of_rows.push(row.split) }\n</code></pre>\n\n<p>This should give you an array of arrays that you can loop over.</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>array_of_rows.each do |row|\n  row_hash = {}\n  HEADER_KEYS.each_with_index do |key, index|\n    row_hash[key] = row[index]\n  end\n  final_dataset.push(row_hash)\nend\n</code></pre>\n\n<p>There may be a more elegant way of handling this, but this should do the trick to get you going.</p>\n"}], "owner": {"reputation": 111, "user_id": 8567086, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/--tz6W7bCZ4k/AAAAAAAAAAI/AAAAAAAAAmM/LoZMeMzLmQE/photo.jpg?sz=128", "display_name": "chase dougherty", "link": "https://stackoverflow.com/users/8567086/chase-dougherty"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 347, "favorite_count": 0, "accepted_answer_id": 49538210, "answer_count": 2, "score": 1, "last_activity_date": 1523889836, "creation_date": 1522248659, "last_edit_date": 1522251491, "question_id": 49537731, "link": "https://stackoverflow.com/questions/49537731/iterating-through-two-arrays-to-make-a-hash-in-ruby", "title": "Iterating through two arrays to make a hash in Ruby", "body": "<p>I have two arrays that need to be combined into a hash. However, one of the arrays will always be the key. So I need to go through a list of names, numbers, addresses, etc and give them all titles. An example would be:</p>\n\n<pre><code>Adjustor name =&gt; Chase, Firm name =&gt; Chase Bank\n</code></pre>\n\n<p>and then repeat for another location. </p>\n\n<pre><code>Adjustor name =&gt; Rob, Firm name =&gt; Walmart.  \n</code></pre>\n\n<p><strong>Here is what I have so far:</strong></p>\n\n<pre><code>Array_headers = ['Adjuster Name','Firm Name', 'Firm Number', 'Adjustment Type', 'Address 1', 'Address 2', 'City', 'State', 'Zip Code', 'Phone', 'Fax', 'Website', 'Comments', 'Latitude', 'Longitude', 'Manual LongLatCalc', 'LongLat Error']\n\nData_examples = [\"AdjusterName\", \"FirmName\", \"FirmNumber\", \"AdjustmentType\", \"Address1\", \"Address2\", \"City\", \"State\", \"ZipCode\", \"Phone\", \"Fax\", \"WebSite\", \"Comments\", \"Latitude\", \"Longitude\", \"ManualLongLatCalc\", \"LongLatError\", \"chase\", \"chase bank\", \"260-239-1761\", \"property\", \"501 w\", \"200 s\", \"albion\", \"in\", \"46701\", \"555-555-5555\", \"c@gamil\", \"whatsupwhatups.com\", \"hahahah\", \"12.332\", \"12.222\", \"no\", \"none\"]\n\nCombiningArrays= Hash[Array_headers.zip data_examples]\n\np CombiningArrays\n</code></pre>\n\n<p><strong>It should return the following:</strong></p>\n\n<pre><code>{\"Adjuster Name\"=&gt;\"AdjusterName\", \"Firm Name\"=&gt;\"FirmName\", \"Firm Number\"=&gt;\"FirmNumber\", \"Adjustment Type\"=&gt;\"AdjustmentType\", \"Address 1\"=&gt;\"Address1\", \"Address 2\"=&gt;\"Address2\", \"City\"=&gt;\"City\", \"State\"=&gt;\"State\", \"Zip Code\"=&gt;\"ZipCode\", \"Phone\"=&gt;\"Phone\", \"Fax\"=&gt;\"Fax\", \"Website\"=&gt;\"WebSite\", \"Comments\"=&gt;\"Comments\", \"Latitude\"=&gt;\"Latitude\", \"Longitude\"=&gt;\"Longitude\", \"Manual LongLatCalc\"=&gt;\"ManualLongLatCalc\", \"LongLat Error\"=&gt;\"LongLatError\", *\"Adjuster Name\"=&gt;\" \\r\\nchase\", \"Firm Name\"=&gt;\"chase\", \"Firm Number\"=&gt;\"260-239-1761\", \"Adjustment Type\"=&gt;\"property\", \"Address 1\"=&gt;\"501 w\", \"Address 2\"=&gt;\"200 s\", \"City\"=&gt;\"albion\", \"State\"=&gt;\"in\", \"Zip Code\"=&gt;\"46701\", \"Phone\"=&gt;\"555-555-5555\", \"Fax\"=&gt;\"c@gamil\", \"Website\"=&gt;\"whatsupwhatups.com\", \"Comments\"=&gt;\"hahahah\", \"Latitude\"=&gt;\"12.332\", \"Longitude\"=&gt;\"12.222\", \"Manual LongLatCalc\"=&gt;\"no\", \"LongLat Error\"=&gt;\"none\"*}\n</code></pre>\n\n<p>It stops at <code>\"LongLat Error\"=&gt;\"LongLatError\"</code> and everything that is italicized does not show up. How do I get it to continually loop through my other array?</p>\n\n<p><strong>I also tried the following code:</strong></p>\n\n<p><em>#Creating a method to go through arrays</em></p>\n\n<pre><code>def array_hash_converter headers, data\n    hash = Hash.new\n\nheaders.each_with_index do |header, index|\n    hash[header] = data[index]\n  end\n    puts hash\n  end\n\ni=0\n\nwhile i &lt; data.count do\n    array_hash_converter Array_header, data\n    i+=1\n    end\n</code></pre>\n\n<p>Please Help!</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1522248739, "post_id": 49537557, "comment_id": 86082321, "body": "Just call <code>super</code> in your prepended methods."}, {"owner": {"reputation": 13, "user_id": 8916889, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b43d070650dc50061178010955651a3?s=128&d=identicon&r=PG&f=1", "display_name": "B. DC", "link": "https://stackoverflow.com/users/8916889/b-dc"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1522248814, "post_id": 49537557, "comment_id": 86082381, "body": "Is this not going to call Text each time ?"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1522248859, "post_id": 49537557, "comment_id": 86082415, "body": "nope, it&#39;s not."}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 1, "creation_date": 1522296322, "post_id": 49537557, "comment_id": 86103038, "body": "I don&#39;t understand your question at all, but my guess is that you are misunderstanding the term &quot;recursive&quot;."}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 8916889, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b43d070650dc50061178010955651a3?s=128&d=identicon&r=PG&f=1", "display_name": "B. DC", "link": "https://stackoverflow.com/users/8916889/b-dc"}, "edited": false, "score": 0, "creation_date": 1522248997, "post_id": 49537826, "comment_id": 86082533, "body": "And if i can&#39;t modify any module ?   Capitalize call just the recursive method and after that get the text modified by previous modules (if some exists) and after that capitalize the text and returns it, with no super"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 13, "user_id": 8916889, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b43d070650dc50061178010955651a3?s=128&d=identicon&r=PG&f=1", "display_name": "B. DC", "link": "https://stackoverflow.com/users/8916889/b-dc"}, "edited": false, "score": 0, "creation_date": 1522249547, "post_id": 49537826, "comment_id": 86082963, "body": "@B.DC: what do you mean &quot;can&#39;t modify&quot;? 1) you can. 2) where did you imagine to put this code that will traverse the ancestors and call their implementations?"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 13, "user_id": 8916889, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b43d070650dc50061178010955651a3?s=128&d=identicon&r=PG&f=1", "display_name": "B. DC", "link": "https://stackoverflow.com/users/8916889/b-dc"}, "edited": false, "score": 0, "creation_date": 1522249651, "post_id": 49537826, "comment_id": 86083050, "body": "@B.DC: If your modules don&#39;t handle <code>super</code>, then they&#39;re not  prepend-friendly, and you may have to choose some other way of building your processing pipeline."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "reply_to_user": {"reputation": 13, "user_id": 8916889, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b43d070650dc50061178010955651a3?s=128&d=identicon&r=PG&f=1", "display_name": "B. DC", "link": "https://stackoverflow.com/users/8916889/b-dc"}, "edited": false, "score": 0, "creation_date": 1522263284, "post_id": 49537826, "comment_id": 86091713, "body": "@B.DC I am still not sure I really understand the question here but you could hack together the functionality without <code>super</code> (which as pointed out is the only way to make prepend friendly modules). Here is a very <a href=\"https://repl.it/@engineersmnky/IgnorantVirtualScreencast\" rel=\"nofollow noreferrer\">awkward example</a> based on my limited understanding of your situation"}], "tags": [], "owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "is_accepted": true, "score": 2, "last_activity_date": 1522248886, "creation_date": 1522248886, "answer_id": 49537826, "question_id": 49537557, "link": "https://stackoverflow.com/questions/49537557/call-previous-ancestors-explicitely/49537826#49537826", "title": "Call previous ancestors explicitely", "body": "<p>Just call <code>super</code> in your prepended methods. </p>\n\n<pre><code>module Capitalize\n  def correct_text\n    super.capitalize\n  end\nend\n\nmodule Trim\n  def correct_text\n    super.strip\n  end\nend\n\nclass Text\n  prepend Capitalize\n  prepend Trim\n\n  def correct_text\n    'hello '\n  end\nend\n\nText.new.correct_text # =&gt; \"Hello\"\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 8916889, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b43d070650dc50061178010955651a3?s=128&d=identicon&r=PG&f=1", "display_name": "B. DC", "link": "https://stackoverflow.com/users/8916889/b-dc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 31, "favorite_count": 0, "accepted_answer_id": 49537826, "answer_count": 1, "score": -1, "last_activity_date": 1522296114, "creation_date": 1522248175, "last_edit_date": 1522296114, "question_id": 49537557, "link": "https://stackoverflow.com/questions/49537557/call-previous-ancestors-explicitely", "title": "Call previous ancestors explicitely", "body": "<p>I have a class <code>Text</code>, to which I prepend different modules such as <code>Capitalize</code> or <code>Trim</code>. At the end, I get:</p>\n\n<pre><code>Text.ancestors # =&gt; [Capitalize,Trim,Text,Object,Kernel]\n</code></pre>\n\n<p>I want to call a method that corrects a text. By calling a method that returns a text with the behaviour of the previous ancestor, I want to recursively go through each ancestor until I reach <code>Text</code> class, and return the text.</p>\n\n<p>I have a problem. Each module and class has the same method named <code>correct_text</code>, and I can't create any alias. When I pass through <code>Capitalize</code>, it has no problem, but when I recursively call a method in <code>Trim</code>, I cannot call the method on this ancestor (private method or by using <code>send</code>) since there is a method with the same name on <code>Capitalize</code>, which ends up being called according to the order. </p>\n\n<p>Is it possible to call a method on an ancestor? Is it possible to undo a <code>prepend</code>/<code>include</code>/<code>extend</code> without using <code>undef_method</code>?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec", "factory-bot"], "comments": [{"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1522247892, "post_id": 49537022, "comment_id": 86081631, "body": "I wonder if a circular dependency like this is a good idea?"}, {"owner": {"reputation": 313, "user_id": 3702804, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/808845f311afec7b91b8dd8cb0eed4f3?s=128&d=identicon&r=PG", "display_name": "Alex Tatarnikov", "link": "https://stackoverflow.com/users/3702804/alex-tatarnikov"}, "edited": false, "score": 0, "creation_date": 1522249562, "post_id": 49537022, "comment_id": 86082973, "body": "<code>survey.questions = build_list(question, 5, survey: nil)</code>"}], "answers": [{"comments": [{"owner": {"reputation": 1183, "user_id": 3659230, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/9a8578a7f367a3140fa21ea6a528b01b?s=128&d=identicon&r=PG&f=1", "display_name": "dpst", "link": "https://stackoverflow.com/users/3659230/dpst"}, "edited": false, "score": 0, "creation_date": 1527045974, "post_id": 49538188, "comment_id": 87972212, "body": "<code>But as commented on your question, you really should consider allowing an empty survey to be created. It&#39;s just a lot less hair pulling.</code> -&gt; Was ultimately the best solution."}], "tags": [], "owner": {"reputation": 48, "user_id": 4983172, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/266f482bb71b7f8994a4a625a7853e55?s=128&d=identicon&r=PG&f=1", "display_name": "jfr", "link": "https://stackoverflow.com/users/4983172/jfr"}, "is_accepted": true, "score": 1, "last_activity_date": 1522249973, "creation_date": 1522249973, "answer_id": 49538188, "question_id": 49537022, "link": "https://stackoverflow.com/questions/49537022/i-have-two-models-that-depend-on-each-other-to-be-valid-how-do-i-create-valid-f/49538188#49538188", "title": "I have two models that depend on each other to be valid. How do I create valid factories for them?", "body": "<p>Why not have the survey factory point to a question factory without a survey factory?</p>\n\n<pre><code>FactoryBot.define do\n  factory :question do\n    title  { Faker::Lorem.characters(10) }\n    survey nil\n\n    factory :question_and_survey do\n      survey\n    end\n  end\nend\n</code></pre>\n\n<p>This does mean that this <code>create(:question_and_survey)</code> would return a question in a survey with 6 total questions in it. Better than nothing, right?</p>\n\n<p>But as commented on your question, you really should consider allowing an empty survey to be created. It's just a lot less hair pulling.</p>\n\n<p><a href=\"https://github.com/thoughtbot/factory_bot/blob/master/GETTING_STARTED.md#inheritance\" rel=\"nofollow noreferrer\">Reference to inheritance in factorybot</a></p>\n"}], "owner": {"reputation": 1183, "user_id": 3659230, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/9a8578a7f367a3140fa21ea6a528b01b?s=128&d=identicon&r=PG&f=1", "display_name": "dpst", "link": "https://stackoverflow.com/users/3659230/dpst"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 193, "favorite_count": 0, "accepted_answer_id": 49538188, "answer_count": 1, "score": 2, "last_activity_date": 1522249973, "creation_date": 1522246827, "last_edit_date": 1522247776, "question_id": 49537022, "link": "https://stackoverflow.com/questions/49537022/i-have-two-models-that-depend-on-each-other-to-be-valid-how-do-i-create-valid-f", "title": "I have two models that depend on each other to be valid. How do I create valid factories for them?", "body": "<p>I have a <code>Survey</code> model and <code>Question</code> model as below. <code>Survey</code> must have a minimum of 1 <code>Question</code> and <code>Question</code> must belong to a <code>Survey</code> shown below:</p>\n\n<pre><code>class Survey &lt; ActiveRecord::Base\n  has_many :questions, class_name: 'Question', inverse_of: :survey\n\n  validates :title, presence: true, length: { maximum: 200 }\n  validates_length_of :questions, maximum: 100, minimum: 1\nend\n\nclass Question &lt; ActiveRecord::Base\n  belongs_to :survey, class_name: 'Survey', inverse_of: :questions\n\n  validates :title, presence: true, length: { maximum: 200 }\n  validates :survey, presence: true\nend\n</code></pre>\n\n<p>When I write the factories, such as below, I will get a StackOverflow error since a Survey will build a Question after creation and Question will build a Survey after creation, leading to an infinite loop.</p>\n\n<pre><code>FactoryBot.define do\n  factory :question, class: Question do\n    association :survey, factory: :survey\n    title  { Faker::Lorem.characters(10) }\n\n  end\nend\n\nFactoryBot.define do\n  factory :aya_pg_portfolio_survey_survey, class: Survey do\n    after(:build) do |survey|\n      survey.questions = build_list(question, 5)\n    end\n\n    title { Faker::Lorem.characters(10) }\n  end\nend\n</code></pre>\n\n<p>I then thought to remove either the Survey association in the Question factory or remove the <code>after(:build)</code> call back in the Survey factory. This however will result in invalid factories. </p>\n\n<p>There seems like there should be an easy way to solve this since all I have are two models that simple require the other but I am stuck...</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "apache", "docker", "nginx"], "answers": [{"comments": [{"owner": {"reputation": 107, "user_id": 3547146, "user_type": "registered", "accept_rate": 69, "profile_image": "https://graph.facebook.com/100001773186250/picture?type=large", "display_name": "Icaro", "link": "https://stackoverflow.com/users/3547146/icaro"}, "edited": false, "score": 0, "creation_date": 1522243487, "post_id": 49535479, "comment_id": 86078015, "body": "Nice explanation of Justin Wess, but PUMA can handle the web requests this is not the role of Nginx? and if PUMA can handle with this why a i need Ngix for production deploy? Maybe i get wrong the Nginx role (i say Nginx but can be any web server)."}, {"owner": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "reply_to_user": {"reputation": 107, "user_id": 3547146, "user_type": "registered", "accept_rate": 69, "profile_image": "https://graph.facebook.com/100001773186250/picture?type=large", "display_name": "Icaro", "link": "https://stackoverflow.com/users/3547146/icaro"}, "edited": false, "score": 1, "creation_date": 1522243672, "post_id": 49535479, "comment_id": 86078165, "body": "Puma role is to host your ruby web application - transform HTTP to ruby data structures and back, manage threads/processes etc. Nginx takes care of caching, handling static files, SSL, traffic limiting."}, {"owner": {"reputation": 107, "user_id": 3547146, "user_type": "registered", "accept_rate": 69, "profile_image": "https://graph.facebook.com/100001773186250/picture?type=large", "display_name": "Icaro", "link": "https://stackoverflow.com/users/3547146/icaro"}, "edited": false, "score": 1, "creation_date": 1522244408, "post_id": 49535479, "comment_id": 86078705, "body": "So Nginx help me to control the requests, but i still dont understand why i must have this for production"}, {"owner": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "reply_to_user": {"reputation": 107, "user_id": 3547146, "user_type": "registered", "accept_rate": 69, "profile_image": "https://graph.facebook.com/100001773186250/picture?type=large", "display_name": "Icaro", "link": "https://stackoverflow.com/users/3547146/icaro"}, "edited": false, "score": 1, "creation_date": 1522244681, "post_id": 49535479, "comment_id": 86078915, "body": "<a href=\"https://www.nginx.com/resources/glossary/application-server-vs-web-server/\" rel=\"nofollow noreferrer\">Nginx page</a> | <a href=\"https://www.quora.com/Why-do-we-need-to-put-our-web-server-applications-behind-other-web-servers-like-Apache-and-NGINX-Whats-the-point-Do-they-primarily-serve-as-load-balancers\" rel=\"nofollow noreferrer\">Quora thread</a> | <a href=\"https://serverfault.com/questions/605853/what-is-thin-and-why-do-i-need-it\">Server fault question</a>"}, {"owner": {"reputation": 107, "user_id": 3547146, "user_type": "registered", "accept_rate": 69, "profile_image": "https://graph.facebook.com/100001773186250/picture?type=large", "display_name": "Icaro", "link": "https://stackoverflow.com/users/3547146/icaro"}, "edited": false, "score": 0, "creation_date": 1522248528, "post_id": 49535479, "comment_id": 86082134, "body": "Now much things have sense, but i have a last question. how my docker container with nginx as server, communicate with host? cause if i get a request on my host ip how this is handled to container?"}, {"owner": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "reply_to_user": {"reputation": 107, "user_id": 3547146, "user_type": "registered", "accept_rate": 69, "profile_image": "https://graph.facebook.com/100001773186250/picture?type=large", "display_name": "Icaro", "link": "https://stackoverflow.com/users/3547146/icaro"}, "edited": false, "score": 1, "creation_date": 1522248657, "post_id": 49535479, "comment_id": 86082233, "body": "You have a docker container with puma and nginx on the host? You need to configure reverse proxy on nginx and use good old TCP sockets to communicate with puma (you need to expose a port from docker)."}], "tags": [], "owner": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "is_accepted": true, "score": 2, "last_activity_date": 1522242509, "creation_date": 1522242509, "answer_id": 49535479, "question_id": 49535412, "link": "https://stackoverflow.com/questions/49535412/how-my-app-is-published-on-www-without-a-web-server/49535479#49535479", "title": "How my app is published on WWW without a Web Server?", "body": "<p>Puma is a rack-compliant application server that handles HTTP requests for you. </p>\n\n<p>You'll need a web server for production deployment (but it's a different story). </p>\n\n<p>Read also</p>\n\n<ul>\n<li>Rack:  <a href=\"https://rack.github.io/\" rel=\"nofollow noreferrer\">https://rack.github.io/</a></li>\n<li>Nice explaination by Justin Weiss: <a href=\"https://www.justinweiss.com/articles/a-web-server-vs-an-app-server/\" rel=\"nofollow noreferrer\">https://www.justinweiss.com/articles/a-web-server-vs-an-app-server/</a></li>\n<li>Comparison or Ruby servers (a bit dated): <a href=\"https://www.digitalocean.com/community/tutorials/a-comparison-of-rack-web-servers-for-ruby-web-applications\" rel=\"nofollow noreferrer\">https://www.digitalocean.com/community/tutorials/a-comparison-of-rack-web-servers-for-ruby-web-applications</a> </li>\n</ul>\n"}], "owner": {"reputation": 107, "user_id": 3547146, "user_type": "registered", "accept_rate": 69, "profile_image": "https://graph.facebook.com/100001773186250/picture?type=large", "display_name": "Icaro", "link": "https://stackoverflow.com/users/3547146/icaro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "accepted_answer_id": 49535479, "answer_count": 1, "score": 0, "last_activity_date": 1522242509, "creation_date": 1522242336, "question_id": 49535412, "link": "https://stackoverflow.com/questions/49535412/how-my-app-is-published-on-www-without-a-web-server", "title": "How my app is published on WWW without a Web Server?", "body": "<p>I'm studing Docker and i just created a Rails app following the guide here <a href=\"https://docs.docker.com/compose/rails/\" rel=\"nofollow noreferrer\">https://docs.docker.com/compose/rails/</a> , the image used in this guide use the PUMA as server APP. When i up my container the app is already published on WWW by myipnumber:3000.</p>\n\n<p>So here is my doubt, how is possible to my app is published on WWW without a Web Server like NGINX/Apache since these are aparenttly not installed in my host or container? (maybe they are but i cant see).</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activeadmin"], "comments": [{"owner": {"reputation": 5312, "user_id": 6535997, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/10156345016155058/picture?type=large", "display_name": "Mark", "link": "https://stackoverflow.com/users/6535997/mark"}, "edited": false, "score": 0, "creation_date": 1522243454, "post_id": 49535012, "comment_id": 86077991, "body": "Can you post the controller method where you save the product? If instead of save you call save! it will throw an error and show why the product is failing to save rather than just rolling back"}, {"owner": {"reputation": 21, "user_id": 9564058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c6e91c09d420df67a237eb676615407?s=128&d=identicon&r=PG&f=1", "display_name": "Alx", "link": "https://stackoverflow.com/users/9564058/alx"}, "reply_to_user": {"reputation": 5312, "user_id": 6535997, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/10156345016155058/picture?type=large", "display_name": "Mark", "link": "https://stackoverflow.com/users/6535997/mark"}, "edited": false, "score": 0, "creation_date": 1522244505, "post_id": 49535012, "comment_id": 86078773, "body": "OK, that was my mistake, I had not modified the default ActiveRecord controller. I copied my code from my products_controller and it works. Sorry about that."}, {"owner": {"reputation": 5312, "user_id": 6535997, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/10156345016155058/picture?type=large", "display_name": "Mark", "link": "https://stackoverflow.com/users/6535997/mark"}, "edited": false, "score": 0, "creation_date": 1522319157, "post_id": 49535012, "comment_id": 86114460, "body": "No worries happy it&#39;s fixed :)"}], "owner": {"reputation": 21, "user_id": 9564058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c6e91c09d420df67a237eb676615407?s=128&d=identicon&r=PG&f=1", "display_name": "Alx", "link": "https://stackoverflow.com/users/9564058/alx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 137, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1522241314, "creation_date": 1522241314, "question_id": 49535012, "link": "https://stackoverflow.com/questions/49535012/ror-activeadmin-impossible-to-create-a-new-product-with-nested-form", "title": "RoR - ActiveAdmin Impossible to create a new product with nested form", "body": "<p>I am new to rails and I'm trying to customize ActiveAdmin.\nMy app has 3 models: User (which has many products), Product (which has many prices) and Price. I am trying to customize ActiveAdmin with a nested form to be able to create/update a product directly with its prices.\nAlthough the update works perfectly (updating product and even adding a new price), the create action doesn't work. I get \"rollback\" in the console but no specific error message.\nCan you tell me what I'm doing wrong?</p>\n\n<pre><code># app/admin/products.rb\nActiveAdmin.register Product do\n  form do |f|\n    f.semantic_errors\n    f.inputs do\n      f.input :name\n      f.input :size\n    end\n    f.inputs \"Prices\" do\n      f.has_many :prices do |price|\n        price.input :value\n        price.input :currency, :collection =&gt; [\"dollars\", \"euros\", \"pounds\"]\n      end\n    end\n  f.actions\nend\npermit_params :name, :size, :user_id, prices_attributes: [:id, :currency, :value, :product_id, :_edit, :_update, :_new, :_create]\n</code></pre>\n\n<p>I have also put \"accepts_nested_attributes_for :prices\" in app/models/product.rb.</p>\n\n<p>The logs form the console</p>\n\n<pre><code>Started POST \"/admin/products\" for 127.0.0.1 at 2018-03-28 14:46:05 +0200\nProcessing by Admin::ProductsController#create as HTML\nParameters: {\"utf8\"=&gt;\"\u2713\", \"authenticity_token\"=&gt;\"W9OJHqyFzXREfi4/DuBN1xnf0KIhAjJDfGsZjQqvGJ7BZOb11fVAz78djOf1k3XZdmpJxuPYinYi6Knu2agvnQ==\", \"product\"=&gt;{\"name\"=&gt;\"Shorts\", \"size\"=&gt;\"XL\", \"prices_attributes\"=&gt;{\"0\"=&gt;{\"value\"=&gt;\"40\", \"currency\"=&gt;\"euros\"}}}, \"commit\"=&gt;\"Create Product\"}\nUser Load (0.9ms)  SELECT  \"users\".* FROM \"users\" WHERE \"users\".\"id\" = $1 ORDER BY \"users\".\"id\" ASC LIMIT $2  [[\"id\", 1], [\"LIMIT\", 1]]\nAdminUser Load (0.4ms)  SELECT  \"admin_users\".* FROM \"admin_users\" WHERE \"admin_users\".\"id\" = $1 ORDER BY \"admin_users\".\"id\" ASC LIMIT $2  [[\"id\", 1], [\"LIMIT\", 1]]\n(0.2ms)  BEGIN\n(0.3ms)  ROLLBACK\nRendering /Users/alex/.rbenv/versions/2.4.3/lib/ruby/gems/2.4.0/gems/activeadmin-1.2.1/app/views/active_admin/resource/new.html.arb\nRendered /Users/alex/.rbenv/versions/2.4.3/lib/ruby/gems/2.4.0/gems/activeadmin-1.2.1/app/views/active_admin/resource/new.html.arb (100.1ms)\nCompleted 200 OK in 248ms (Views: 132.6ms | ActiveRecord: 1.9ms)\n</code></pre>\n\n<p>Thank you very much for you help.</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1522233753, "post_id": 49532148, "comment_id": 86070881, "body": "Don&#39;t answer it in the question. You can answer your own question as a separate answer. But note that there is already an answer given."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1522241927, "post_id": 49532148, "comment_id": 86076811, "body": "<code>y=x.a.b.c.d.e.f</code> \u2013 that kind of expressions are called <a href=\"http://wiki.c2.com/?TrainWreck\" rel=\"nofollow noreferrer\">train wreck</a> ;-)"}, {"owner": {"reputation": 11741, "user_id": 1934428, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/072774c5d4204a1c2385560e6114a887?s=128&d=identicon&r=PG", "display_name": "user1934428", "link": "https://stackoverflow.com/users/1934428/user1934428"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1522305213, "post_id": 49532148, "comment_id": 86106034, "body": "@sawa: I didn&#39;t see the answer when I updated my post. Thanks for pointing it out; you&#39;re absolutely right."}], "answers": [{"comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1522242225, "post_id": 49532325, "comment_id": 86077035, "body": "It might be worth noting that <a href=\"http://ruby-doc.org/core-2.5.0/Object.html#method-i-yield_self\" rel=\"nofollow noreferrer\"><code>yield_self</code></a> was introduced in Ruby 2.5."}], "tags": [], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "is_accepted": true, "score": 3, "last_activity_date": 1522233549, "creation_date": 1522233549, "answer_id": 49532325, "question_id": 49532148, "link": "https://stackoverflow.com/questions/49532148/chaining-methods-in-ruby-and-injecting-a-block-into-the-chain/49532325#49532325", "title": "Chaining methods in Ruby, and injecting a block into the chain", "body": "<p>(a) Yes. Ruby already has that. It is called <code>yield_self</code>.</p>\n\n<p>(b) No. It is not a bad style.</p>\n"}], "owner": {"reputation": 11741, "user_id": 1934428, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/072774c5d4204a1c2385560e6114a887?s=128&d=identicon&r=PG", "display_name": "user1934428", "link": "https://stackoverflow.com/users/1934428/user1934428"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 126, "favorite_count": 0, "accepted_answer_id": 49532325, "answer_count": 1, "score": 1, "last_activity_date": 1522242632, "creation_date": 1522233030, "last_edit_date": 1522242632, "question_id": 49532148, "link": "https://stackoverflow.com/questions/49532148/chaining-methods-in-ruby-and-injecting-a-block-into-the-chain", "title": "Chaining methods in Ruby, and injecting a block into the chain", "body": "<p>Consider the following Ruby expression:</p>\n\n<pre><code>y=x.a.b.c.d.e.f\n</code></pre>\n\n<p>Of course, <code>x</code> is an object and <code>a</code> to <code>f</code> are methods defined for a class which matches the return value of the previous method in the chain. Now say that I want to replace the invocation of method <code>c</code> by a custom block, i.e. I would like to achieve the effect of</p>\n\n<pre><code>temp=x.a.b\ntemp1=.... (calculate something based on the value of temp)\ny=temp1.d.e.f\n</code></pre>\n\n<p>but with using method chaining.</p>\n\n<p>It is of course trivial to define a suitable method to achieve this:</p>\n\n<pre><code>class Object\n\n  def pass\n    yield(self)\n  end\n\nend\n</code></pre>\n\n<p>which would allow me to write something like</p>\n\n<pre><code>y=x.a.b.pass {|the_b| .....}.d.e.f\n</code></pre>\n\n<p>Now to my question: </p>\n\n<p>Given that Ruby already has a method for a similar problem (Object#tap), I wonder why it does not have a method similar to the Object#pass which I just explained. I suspect, that either</p>\n\n<p>(a) Ruby already offers a feature like this, and I'm just to stupid to find it, or</p>\n\n<p>(b) What I want to achieve would be considered bad programming style (but then, why?)</p>\n\n<p>Is (a) or (b) correct, or did I miss something here?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 1596, "user_id": 768635, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ebff4f2dd33516a86ccdc11c7f13edf9?s=128&d=identicon&r=PG", "display_name": "lloydpick", "link": "https://stackoverflow.com/users/768635/lloydpick"}, "edited": false, "score": 0, "creation_date": 1522243030, "post_id": 49531469, "comment_id": 86077664, "body": "I think instead of just having it match <code>*</code>, you need to get it to match to <code>*path</code>. It&#39;s hard to test this myself as you&#39;re using a subdomain constraint."}], "answers": [{"tags": [], "owner": {"reputation": 5836, "user_id": 1153022, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/JgpPs.jpg?s=128&g=1", "display_name": "okay56k", "link": "https://stackoverflow.com/users/1153022/okay56k"}, "is_accepted": true, "score": 0, "last_activity_date": 1522283112, "creation_date": 1522283112, "answer_id": 49546206, "question_id": 49531469, "link": "https://stackoverflow.com/questions/49531469/rails-5-redirect-wildcards-except-mentioned-ones-in-routes/49546206#49546206", "title": "Rails 5: redirect wildcards except mentioned ones in routes", "body": "<p>Putting this at the bottom of the <code>SubdomainConstraint</code> block did the trick:</p>\n\n<pre><code>get '*path', to: 'hub_categories#index'\n</code></pre>\n\n<p>Rails 5 deprecated <code>match</code>, and my error was due to a corrupt RVM install.</p>\n"}], "owner": {"reputation": 5836, "user_id": 1153022, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/JgpPs.jpg?s=128&g=1", "display_name": "okay56k", "link": "https://stackoverflow.com/users/1153022/okay56k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 94, "favorite_count": 0, "accepted_answer_id": 49546206, "answer_count": 1, "score": 2, "last_activity_date": 1522283112, "creation_date": 1522231032, "last_edit_date": 1522283089, "question_id": 49531469, "link": "https://stackoverflow.com/questions/49531469/rails-5-redirect-wildcards-except-mentioned-ones-in-routes", "title": "Rails 5: redirect wildcards except mentioned ones in routes", "body": "<p>I've got this in my routes.rb</p>\n\n<pre><code>constraints SubdomainConstraint do\n  scope '/', controller: :hub_categories do\n    get '/', to: 'hub_categories#index'\n    get 'list', to: 'hub_categories#list'\n\n    post 'documents', to: 'hub_categories#create'\n    delete 'documents/:id', to: 'hub_categories#destroy'\n    get 'documents/:id/request', to: 'hub_categories#request'\n    get 'documents/:id/result', to: 'hub_categories#result'\n    get 'documents/:id/word', to: 'hub_categories#word'\n  end\n\n  root to: 'hub_categories#index'\nend\n</code></pre>\n\n<p>Outside this constraint I've got a lot more routes, like <code>/documents</code> and the like. How can I match anything except those routes inside the constraint (including, let's say, <code>get 'documents'</code>) to <code>'hub_categories#index'</code>?</p>\n\n<p>All my attempts, like <code>match '*', to: 'hub_categories#index', via: :all</code> in the constraint block itself, wind up with this error:</p>\n\n<blockquote>\n  <p>ruby /Users/cdrum/.rvm/gems/ruby-2.5.0@aplus/bin/rspec(51938,0x7fff9ee53340) malloc: *** error for object 0x7fef03d21210: incorrect checksum for freed object - object was probably modified after being freed.\n  set a breakpoint in malloc_error_break to debug</p>\n</blockquote>\n\n<p><strong>Off-topic update</strong></p>\n\n<p>That error was owing to a corrupt RVM install, so if you're getting that run <code>rvm implode</code> then reinstall RVM, then Ruby, then your gems.</p>\n"}, {"tags": ["json", "ruby", "mongodb"], "answers": [{"tags": [], "owner": {"reputation": 2303, "user_id": 109274, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a59b0daee5e5570e07a9f976721017e7?s=128&d=identicon&r=PG", "display_name": "mikezter", "link": "https://stackoverflow.com/users/109274/mikezter"}, "is_accepted": true, "score": 2, "last_activity_date": 1522225755, "creation_date": 1522225755, "answer_id": 49529610, "question_id": 49529131, "link": "https://stackoverflow.com/questions/49529131/is-it-possible-to-combine-two-json-with-ruby-in-mongodb/49529610#49529610", "title": "Is it possible to combine two Json with Ruby in MongoDB?", "body": "<p>You can use all the operators in ruby, too. You need to get the underlying collection object first.</p>\n\n<pre><code>require 'mongo' \n\ndb = Mongo::Connection.new.db(\"mydb\")\ncoll = db.collection('posts')\n\ncoll.aggregate([ \n  {\"$project\" =&gt; {\"last_name\" =&gt; 1, \"first_name\" =&gt; 1 }}, \n  {\"$match\" =&gt; {\"last_name\" =&gt; \"Jones\"}}\n])\n</code></pre>\n\n<p>This is an example pipeline. You can give the same aggregation pipeline that worked for you on the mongo shell to <code>aggregate</code>. </p>\n\n<p>For more information, refer to the MongoDB Ruby driver documentation: \n<a href=\"http://www.rubydoc.info/gems/mongo/1.8.2/Mongo%2FCollection%3Aaggregate\" rel=\"nofollow noreferrer\">http://www.rubydoc.info/gems/mongo/1.8.2/Mongo%2FCollection%3Aaggregate</a></p>\n"}], "owner": {"reputation": 91, "user_id": 7389030, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-0kWrTF5o-mU/AAAAAAAAAAI/AAAAAAAAH4c/T3X98BGhIZU/photo.jpg?sz=128", "display_name": "Siya", "link": "https://stackoverflow.com/users/7389030/siya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 182, "favorite_count": 1, "accepted_answer_id": 49529610, "answer_count": 1, "score": -1, "last_activity_date": 1522227898, "creation_date": 1522224143, "last_edit_date": 1522227898, "question_id": 49529131, "link": "https://stackoverflow.com/questions/49529131/is-it-possible-to-combine-two-json-with-ruby-in-mongodb", "title": "Is it possible to combine two Json with Ruby in MongoDB?", "body": "<p>I have to insert documents in my Mongo database by using Ruby (not on Rails, on Notepad++), many documents have duplicates with some modifications.</p>\n\n<p>I want to write a script which use a json file, read it, import it in MongoDB by checking if each documents do not have any duplicate in the database, and if there is a duplicate I want to combine it if it contains any additional information:</p>\n\n<p>Such as :</p>\n\n<p>Document 1</p>\n\n<pre><code> { \"Name\" : \"Lila\",\n    \"Files\":\n      [\n             { \"Name\": \"File1\", \"Date\" : \"05-11-2017\"},\n             { \"Name\": \"File2\", \"Date\" : \"26-03-2018\"}\n      ]\n}\n</code></pre>\n\n<p>Document 2</p>\n\n<pre><code>{ \"Name\" : \"Lila\",\n  \"Files\":\n  [\n         { \"Name\": \"File3\", \"Date\" : \"26-03-2018\"}\n  ]\n}\n</code></pre>\n\n<p>Combine them to have:</p>\n\n<pre><code> { \"Name\" : \"Lila\",\n   \"Files\":\n      [\n             { \"Name\": \"File1\", \"Date\" : \"05-11-2017\"},\n             { \"Name\": \"File2\", \"Date\" : \"26-03-2018\"},\n             { \"Name\": \"File3\", \"Date\" : \"26-03-2018\"}\n      ]\n  }\n</code></pre>\n\n<p>I founded that it is possible in mongo shell thanks to the aggregation-accumulation $mergeObjects, but in Ruby it do not seems to exists.</p>\n"}, {"tags": ["ruby", "ubuntu", "cron", "rbenv", "geckodriver"], "comments": [{"owner": {"reputation": 3523, "user_id": 9043475, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FNxvn.jpg?s=128&g=1", "display_name": "Rajagopalan", "link": "https://stackoverflow.com/users/9043475/rajagopalan"}, "edited": false, "score": 0, "creation_date": 1522226171, "post_id": 49529066, "comment_id": 86065153, "body": "I suggest you to use legacy firefox driver which is far better than geckodriver."}], "answers": [{"tags": [], "owner": {"reputation": 2381, "user_id": 698718, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4cd0961baf17c537ac87c543a3bcb5c5?s=128&d=identicon&r=PG", "display_name": "Mark Huk", "link": "https://stackoverflow.com/users/698718/mark-huk"}, "is_accepted": true, "score": 2, "last_activity_date": 1522235397, "creation_date": 1522235397, "answer_id": 49532953, "question_id": 49529066, "link": "https://stackoverflow.com/questions/49529066/cronjob-unable-to-find-mozilla-geckodriver/49532953#49532953", "title": "Cronjob - Unable to find Mozilla geckodriver", "body": "<p>It could be that your export is located in place which is not called by cron daemon. </p>\n\n<p>To investigate that replace your cronjob with <code>echo $PATH &gt;&gt; /tmp/crontab.log</code> and then check '/tmp/crontab.log' for PATH and check if <code>/usr/local/bin</code> is there.</p>\n\n<p>Another reason could be that cron daemon is running as different user and thus has no access to geckodriver. Check <code>ls -la /usr/local/bin | grep gecko</code>. If that's the case, please checkout <a href=\"https://stackoverflow.com/questions/8475694/how-to-specify-in-crontab-by-what-user-to-run-script\">this SO question</a></p>\n"}], "owner": {"reputation": 101, "user_id": 8143895, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b10923a225e7a2c439508ba830bdf81b?s=128&d=identicon&r=PG&f=1", "display_name": "justintime", "link": "https://stackoverflow.com/users/8143895/justintime"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 407, "favorite_count": 0, "accepted_answer_id": 49532953, "answer_count": 1, "score": 3, "last_activity_date": 1522235397, "creation_date": 1522223991, "last_edit_date": 1522226786, "question_id": 49529066, "link": "https://stackoverflow.com/questions/49529066/cronjob-unable-to-find-mozilla-geckodriver", "title": "Cronjob - Unable to find Mozilla geckodriver", "body": "<p>I have geckodriver installed in the <code>usr/local/bin</code> directory and exported to the $PATH variable.</p>\n\n<p><code>export PATH=$PATH:~/usr/local/bin/geckodriver</code></p>\n\n<p>You can see <code>usr/local/bin</code> is in my $PATH</p>\n\n<p><code>root/.rbenv/plugins/ruby-build/bin:/root/.rbenv/shims:/root/.rbenv/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/snap/bin</code></p>\n\n<p>However, I run the ruby script by cronjob I get the following error message: <strong>Unable to find Mozilla geckodriver.</strong></p>\n\n<p>My Cronjob</p>\n\n<p><code>*/20 * * * * ~/.rbenv/bin/rbenv exec ruby /home/path/to/the/ruby/script/report_export.rb</code></p>\n\n<p>I start the ruby script so it all works. Can someone help me that it also works by cronjob</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "jbuilder"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1522223561, "post_id": 49528875, "comment_id": 86063512, "body": "class method of od?"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1522223615, "post_id": 49528875, "comment_id": 86063549, "body": "<code>json.od od</code> - this presumably calls a jbuilder view for this od. Let&#39;s see that."}, {"owner": {"reputation": 197, "user_id": 9446541, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca77ea568f4a9f3a32d5ad3848d8dc85?s=128&d=identicon&r=PG&f=1", "display_name": "daveanderson88", "link": "https://stackoverflow.com/users/9446541/daveanderson88"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1522224278, "post_id": 49528875, "comment_id": 86063970, "body": "{ ods: [ { od: { id: 300, sophead_id: 126, created_at: &quot;2018-03-27T14:46:41.789Z&quot;, updated_at: &quot;2018-03-27T15:52:29.935Z&quot;, status: &quot;Open&quot;, del_postcode: &quot; &quot;, route_name: &quot;Call &amp; Collect - 10&quot;, route_id: 23, est_pick_pack_time: 180, due_date_time: &quot;2018-03-26T22:57:00.000Z&quot; } }, { od: { id: 314, sophead_id: 493, created_at: &quot;2018-03-27T14:46:43.600Z&quot;, updated_at: &quot;2018-03-27T15:52:31.226Z&quot;, status: &quot;Open&quot;, del_postcode: &quot; &quot;, route_name: &quot; - 17&quot;, route_id: null, est_pick_pack_time: 120, due_date_time: &quot;2018-03-26T22:58:00.000Z&quot; } },...etc for each od"}], "answers": [{"comments": [{"owner": {"reputation": 197, "user_id": 9446541, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca77ea568f4a9f3a32d5ad3848d8dc85?s=128&d=identicon&r=PG&f=1", "display_name": "daveanderson88", "link": "https://stackoverflow.com/users/9446541/daveanderson88"}, "edited": false, "score": 0, "creation_date": 1522233913, "post_id": 49529506, "comment_id": 86070992, "body": "Thanks, when doing  json.ods sorted_ods do |od|   json.od od   json.test od.test end  It returns the result of .test correctly  ods: [ { od: { id: 314, sophead_id: 493, ...etc }, test: 1 },  But I want to merge this with the other attributes of od, but trying:  json.ods sorted_ods do |od|   json.od od.merge(od_test: od.test) end  returns undefined method `merge&#39; for od"}, {"owner": {"reputation": 1156, "user_id": 4955546, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-3ypcYA0ACXs/AAAAAAAAAAI/AAAAAAAABgY/gcCpBwKBymI/photo.jpg?sz=128", "display_name": "Sikandar Tariq", "link": "https://stackoverflow.com/users/4955546/sikandar-tariq"}, "reply_to_user": {"reputation": 197, "user_id": 9446541, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca77ea568f4a9f3a32d5ad3848d8dc85?s=128&d=identicon&r=PG&f=1", "display_name": "daveanderson88", "link": "https://stackoverflow.com/users/9446541/daveanderson88"}, "edited": false, "score": 0, "creation_date": 1522234557, "post_id": 49529506, "comment_id": 86071454, "body": "you can merge by using attributes like this <code>od.attributes.merge(od_test: od.test)</code>, but remember returned json will be a hash in that case and not an object"}, {"owner": {"reputation": 197, "user_id": 9446541, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca77ea568f4a9f3a32d5ad3848d8dc85?s=128&d=identicon&r=PG&f=1", "display_name": "daveanderson88", "link": "https://stackoverflow.com/users/9446541/daveanderson88"}, "edited": false, "score": 0, "creation_date": 1522237721, "post_id": 49529506, "comment_id": 86073596, "body": "Thanks, this worked:  json.ods sorted_ods do |od|   json.od od.attributes.merge(od_test: od.test) end"}, {"owner": {"reputation": 1156, "user_id": 4955546, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-3ypcYA0ACXs/AAAAAAAAAAI/AAAAAAAABgY/gcCpBwKBymI/photo.jpg?sz=128", "display_name": "Sikandar Tariq", "link": "https://stackoverflow.com/users/4955546/sikandar-tariq"}, "reply_to_user": {"reputation": 197, "user_id": 9446541, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca77ea568f4a9f3a32d5ad3848d8dc85?s=128&d=identicon&r=PG&f=1", "display_name": "daveanderson88", "link": "https://stackoverflow.com/users/9446541/daveanderson88"}, "edited": false, "score": 0, "creation_date": 1522238552, "post_id": 49529506, "comment_id": 86074213, "body": "@daveanderson88 I&#39;ve updated the answer please accept it for the sake of others convenience."}], "tags": [], "owner": {"reputation": 1156, "user_id": 4955546, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-3ypcYA0ACXs/AAAAAAAAAAI/AAAAAAAABgY/gcCpBwKBymI/photo.jpg?sz=128", "display_name": "Sikandar Tariq", "link": "https://stackoverflow.com/users/4955546/sikandar-tariq"}, "is_accepted": true, "score": 0, "last_activity_date": 1522238386, "last_edit_date": 1522238386, "creation_date": 1522225427, "answer_id": 49529506, "question_id": 49528875, "link": "https://stackoverflow.com/questions/49528875/how-to-output-a-class-method-as-an-attribute-in-jbuilder/49529506#49529506", "title": "How to output a class method as an attribute in Jbuilder", "body": "<p>if you want to call class method</p>\n\n<pre><code>json.method ClassName.method_name\njson.ods @ods do |od|\n  json.od od\nend\n</code></pre>\n\n<p>or for instance method</p>\n\n<pre><code>json.ods @ods do |od|\n  json.od od\n  json.method od.method\nend\n</code></pre>\n\n<p>to merge with the instance attributes</p>\n\n<pre><code>json.ods @ods do |od|\n  json.od od.attributes.merge(method: od.method)\nend\n</code></pre>\n"}], "owner": {"reputation": 197, "user_id": 9446541, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca77ea568f4a9f3a32d5ad3848d8dc85?s=128&d=identicon&r=PG&f=1", "display_name": "daveanderson88", "link": "https://stackoverflow.com/users/9446541/daveanderson88"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 385, "favorite_count": 0, "accepted_answer_id": 49529506, "answer_count": 1, "score": 0, "last_activity_date": 1522238386, "creation_date": 1522223359, "question_id": 49528875, "link": "https://stackoverflow.com/questions/49528875/how-to-output-a-class-method-as-an-attribute-in-jbuilder", "title": "How to output a class method as an attribute in Jbuilder", "body": "<p>I am currently using the following jbuilder code to output all attributes of each of the @ods</p>\n\n<pre><code>json.ods @ods do |od|\n  json.od od\nend\n</code></pre>\n\n<p>I want to add the result of a class method to output as an additional attribute.  Is this possible without having to list each and every attribute individually?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": true, "score": 3, "last_activity_date": 1522215023, "creation_date": 1522215023, "answer_id": 49526759, "question_id": 49526034, "link": "https://stackoverflow.com/questions/49526034/trigger-state-change-in-model-from-another-model/49526759#49526759", "title": "Trigger state change in model from another model", "body": "<p>You can use <a href=\"https://github.com/aasm/aasm#lifecycle\" rel=\"nofollow noreferrer\">lifecycle callbacks</a> to trigger further methods on an actor:</p>\n\n<pre><code>class Actor &lt; ApplicationRecord\n  include AASM\n\n  has_many :fans \n\n  aasm do\n    state :laughing, :initial =&gt; true\n    state :crying, :success =&gt; :fans_cry_too\n\n    # ...\n  end\n\n  private\n\n  def fans_cry_too\n    fans.each(&amp;:cry)\n  end\nend\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user5872304"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 102, "favorite_count": 0, "accepted_answer_id": 49526759, "answer_count": 1, "score": 1, "last_activity_date": 1522215023, "creation_date": 1522210771, "question_id": 49526034, "link": "https://stackoverflow.com/questions/49526034/trigger-state-change-in-model-from-another-model", "title": "Trigger state change in model from another model", "body": "<p>New to rails and learning how to use <a href=\"https://github.com/aasm/aasm\" rel=\"nofollow noreferrer\">state machines.</a> How would I make the fans of an actor, whose state is crying, change to the same crying state?</p>\n\n<pre><code>class Actor &lt; ApplicationRecord\n  include AASM\n\n  has_many :fans \n\n  aasm do\n    state :laughing, :initial =&gt; true\n    state :crying\n\n    event :cry do\n      transitions :from =&gt; :laughing, :to =&gt; :crying\n    end\n    event :laugh do\n      transitions :from =&gt; :crying, :to =&gt; :laughing\n    end\n  end\nend  \n\nclass Fan &lt; ApplicationRecord\n  include AASM\n\n  belongs_to :author \n\n  aasm do\n    state :laughing, :initial =&gt; true\n    state :crying\n\n    event :cry do\n      transitions :from =&gt; :laughing, :to =&gt; :crying\n    end\n    event :laugh do\n      transitions :from =&gt; :crying, :to =&gt; :laughing\n    end\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "postgresql", "pgadmin"], "comments": [{"owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 0, "creation_date": 1522206759, "post_id": 49525349, "comment_id": 86056725, "body": "The Firehose stack is just a core box with nothing  really set up.  You need to configure an app, a DB etc.  What have you done so far?"}, {"owner": {"reputation": 27, "user_id": 5020245, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70b44547cf1c764ea556320339fbba4b?s=128&d=identicon&r=PG&f=1", "display_name": "Austin", "link": "https://stackoverflow.com/users/5020245/austin"}, "reply_to_user": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 0, "creation_date": 1522207276, "post_id": 49525349, "comment_id": 86056877, "body": "I followed this guide (<a href=\"http://blog.thefirehoseproject.com/posts/setting-codeanywhere-development-environment/\" rel=\"nofollow noreferrer\">blog.thefirehoseproject.com/posts/&hellip;</a>) which sets up the Postgres DB as well as creating a rails app and verifying it works"}, {"owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 0, "creation_date": 1522207739, "post_id": 49525349, "comment_id": 86057007, "body": "Those instructions will get you a basic development app but won&#39;t expose a production database which you&#39;d need to connect to remotely.  If you need help with that, you&#39;ll need to re-write your question to ask for it."}], "answers": [{"comments": [{"owner": {"reputation": 27, "user_id": 5020245, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70b44547cf1c764ea556320339fbba4b?s=128&d=identicon&r=PG&f=1", "display_name": "Austin", "link": "https://stackoverflow.com/users/5020245/austin"}, "edited": false, "score": 0, "creation_date": 1522207469, "post_id": 49525385, "comment_id": 86056937, "body": "Thanks for the response KayCee, I looked in my database.yml file and it shows the host as <code>localhost</code>. Does this mean I wouldn&#39;t be able to connect to it via PGAdmin installed on my desktop?"}, {"owner": {"reputation": 164, "user_id": 3514632, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/389ef9cca0dfc82cb9cf244d6628ad62?s=128&d=identicon&r=PG", "display_name": "KayCee", "link": "https://stackoverflow.com/users/3514632/kaycee"}, "reply_to_user": {"reputation": 27, "user_id": 5020245, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70b44547cf1c764ea556320339fbba4b?s=128&d=identicon&r=PG&f=1", "display_name": "Austin", "link": "https://stackoverflow.com/users/5020245/austin"}, "edited": false, "score": 0, "creation_date": 1522207643, "post_id": 49525385, "comment_id": 86056972, "body": "@Austin If you&#39;d like to connect to it via pgAdmin, you will need to change the binding to the IP of your server. If you want it to work on both localhost and externally, bind it to 0.0.0.0 You might want to setup some firewall rules to allow connections only from certain IPs"}, {"owner": {"reputation": 164, "user_id": 3514632, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/389ef9cca0dfc82cb9cf244d6628ad62?s=128&d=identicon&r=PG", "display_name": "KayCee", "link": "https://stackoverflow.com/users/3514632/kaycee"}, "reply_to_user": {"reputation": 27, "user_id": 5020245, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70b44547cf1c764ea556320339fbba4b?s=128&d=identicon&r=PG&f=1", "display_name": "Austin", "link": "https://stackoverflow.com/users/5020245/austin"}, "edited": false, "score": 0, "creation_date": 1522208039, "post_id": 49525385, "comment_id": 86057097, "body": "@Austin I wasn&#39;t clear earlier, the postgres config needs to be changed not rails. Follow the guide <a href=\"https://www.google.com/amp/s/www.cyberciti.biz/tips/postgres-allow-remote-access-tcp-connection.html/amp#ampshare=https://www.cyberciti.biz/tips/postgres-allow-remote-access-tcp-connection.html\" rel=\"nofollow noreferrer\">here</a>"}, {"owner": {"reputation": 164, "user_id": 3514632, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/389ef9cca0dfc82cb9cf244d6628ad62?s=128&d=identicon&r=PG", "display_name": "KayCee", "link": "https://stackoverflow.com/users/3514632/kaycee"}, "reply_to_user": {"reputation": 27, "user_id": 5020245, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70b44547cf1c764ea556320339fbba4b?s=128&d=identicon&r=PG&f=1", "display_name": "Austin", "link": "https://stackoverflow.com/users/5020245/austin"}, "edited": false, "score": 0, "creation_date": 1522254998, "post_id": 49525385, "comment_id": 86086905, "body": "@Austin If this answer solved your problem, make sure to upvote it and select it as correct (<a href=\"https://stackoverflow.com/help/someone-answers\">info here</a>)"}, {"owner": {"reputation": 27, "user_id": 5020245, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70b44547cf1c764ea556320339fbba4b?s=128&d=identicon&r=PG&f=1", "display_name": "Austin", "link": "https://stackoverflow.com/users/5020245/austin"}, "edited": false, "score": 0, "creation_date": 1522255619, "post_id": 49525385, "comment_id": 86087280, "body": "thanks for the guidance. I am going to try that tonight and if all is well I will mark it as correct! Appreciate the help!"}], "tags": [], "owner": {"reputation": 164, "user_id": 3514632, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/389ef9cca0dfc82cb9cf244d6628ad62?s=128&d=identicon&r=PG", "display_name": "KayCee", "link": "https://stackoverflow.com/users/3514632/kaycee"}, "is_accepted": true, "score": 1, "last_activity_date": 1522206737, "last_edit_date": 1522206737, "creation_date": 1522206133, "answer_id": 49525385, "question_id": 49525349, "link": "https://stackoverflow.com/questions/49525349/connect-rails-app-to-pgadmin-4/49525385#49525385", "title": "Connect Rails app to PGAdmin 4", "body": "<p>Try running this command from the terminal. </p>\n\n<pre><code>netstat -tunalp \n</code></pre>\n\n<p>And look/grep for Postgres. You can pipe the output of the above command into grep. </p>\n\n<p>This will give you the Host. </p>\n\n<p>If you want to find it via Rails. Try looking for the file </p>\n\n<pre><code>config/database.yml\n</code></pre>\n"}], "owner": {"reputation": 27, "user_id": 5020245, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70b44547cf1c764ea556320339fbba4b?s=128&d=identicon&r=PG&f=1", "display_name": "Austin", "link": "https://stackoverflow.com/users/5020245/austin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 771, "favorite_count": 0, "accepted_answer_id": 49525385, "answer_count": 1, "score": 1, "last_activity_date": 1522206737, "creation_date": 1522205781, "question_id": 49525349, "link": "https://stackoverflow.com/questions/49525349/connect-rails-app-to-pgadmin-4", "title": "Connect Rails app to PGAdmin 4", "body": "<p>I am using a CodeAnywhere.com (Firehose) development stack and I am attempting to connect the Postgres SQL database to PGAdmin just so I can have some kind of graphical representation.</p>\n\n<p>The issue is I have no idea how to find the host / server name or databasename.</p>\n\n<p>I saw another question <a href=\"https://stackoverflow.com/questions/399396/can-you-get-db-username-pw-database-name-in-rails\">here</a> and saw that I can run this command <code>Rails.configuration.database_configuration[Rails.env]</code> however I am not sure where exactly to run that from the SSH terminal. IRB? Because I get an error running through IRB.</p>\n\n<p>Please let me know if any other information is needed.</p>\n"}, {"tags": ["angularjs", "ruby", "ruby-on-rails-3"], "comments": [{"owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 1, "creation_date": 1522208965, "post_id": 49525217, "comment_id": 86057304, "body": "<code>if !params[:case_size] == &quot;26-35 mm&quot;.nil? ? true : false</code> doesn&#39;t make sense, can you explain what you&#39;re trying to do here?"}], "answers": [{"tags": [], "owner": {"reputation": 101, "user_id": 2788627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dcd00779176191c7f835a04068eb246f?s=128&d=identicon&r=PG&f=1", "display_name": "bpieck", "link": "https://stackoverflow.com/users/2788627/bpieck"}, "is_accepted": false, "score": 0, "last_activity_date": 1522314143, "creation_date": 1522314143, "answer_id": 49551934, "question_id": 49525217, "link": "https://stackoverflow.com/questions/49525217/how-to-check-filter-params-from-one-to-another-params/49551934#49551934", "title": "How to check filter params from one to another params?", "body": "<ol>\n<li>strange line of code: <code>if !params[:case_size] == \"26-35 mm\".nil? ? true : false</code></li>\n</ol>\n\n<p>To show what you are doing, I hacked following code into irb:</p>\n\n<pre><code>2.5.0 :001 &gt; params = {case_size: '26-35 mm'}\n=&gt; {:case_size=&gt;\"26-35 mm\"}\n2.5.0 :002 &gt; puts 'yes' if !params[:case_size] == \"26-35 mm\".nil? ? true : false\nyes\n=&gt; nil\n2.5.0 :003 &gt; params = {case_size: 'all'}\n=&gt; {:case_size=&gt;\"all\"}\n2.5.0 :004 &gt; puts 'yes' if !params[:case_size] == \"26-35 mm\".nil? ? true : false\nyes\n=&gt; nil\n2.5.0 :005 &gt; params = {case_size: nil}\n=&gt; {:case_size=&gt;nil}\n2.5.0 :006 &gt; puts 'yes' if !params[:case_size] == \"26-35 mm\".nil? ? true : false\n=&gt; nil\n</code></pre>\n\n<p>To step you a little more through the code: <code>!params[:case_size] == \"26-35 mm\".nil? ? true : false</code> you can replace by: <code>!params[:case_size] == false ? true : false</code> (since a static string never is nil) you could replace by: <code>params[:case_size] ? true : false</code> what even is redundant, since params[:case_size] already acts as truthy in every case it is not nil or false. So you just test if params[:case_size] is not nil (or false) in a quite complicated way.\n  But you are not even using it as a guard and you do not store the outcome in any variable. So I am quite sure, intention here was to test something and you forgot to cleanup afterwards. It looks more similar to code you want to have in the view for having radio buttons checked or something similar.</p>\n\n<ol start=\"2\">\n<li><p><code>@products = @products.where(\"brand ILIKE '%#{params[:search_brand]}%'\")</code></p>\n\n<p>Please never do something alike. You are opening for SQl injection here. I think you wanted something alike: <code>@products = @products.where('brand LIKE ?', \"%#{params[:search_brand]}%\")</code>\nThis way rails ensures for securing against sql injections!</p></li>\n<li><p><code>if params[:search_case] == \"all\"\n@products = @products.where(case_size: 0..Float::INFINITY)\nend</code>\nThis looks kind of useless at all. You are only filtering out negative case_size. I think you should validate instead, that case_size is never negative. You will not need this condition, since you want to allow here all.</p></li>\n</ol>\n\n<p>So in the end I assume, your controller maybe should look alike:</p>\n\n<pre><code>@products = @products.order('created_at ASC')\nif params[:search_brand].present?\n  @products = @products.where('brand LIKE ?',\"%#{params[:search_brand]}%\")\nend\nif params[:search_case] == \"26-35 mm\"\n  @products = @products.where(case_size: 26..35)\nend\n</code></pre>\n\n<p>If you now want to check, if the sql is correct - include pry or something similar, set a <code>binding.pry</code> after this line and check:</p>\n\n<pre><code>@products.to_sql\n</code></pre>\n\n<p>Then you will get something alike: `\"SELECT \\\"products\\\".* FROM \\\"products\\\" WHERE \\\"products\\\".\\\"case_size\\\" BETWEEN '26' AND '35') ORDER BY created_at ASC\"\nThis sometimes just helps very good to check, if the sql query is really what you want to get.</p>\n\n<p>I hope my answer helps you to get deeper into coding rails. Although I see more potential to improve the code further.</p>\n"}], "owner": {"reputation": 161, "user_id": 5116973, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d53c35bd1d22377c1c76518ec9048dde?s=128&d=identicon&r=PG", "display_name": "GYTO", "link": "https://stackoverflow.com/users/5116973/gyto"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 51, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1522314143, "creation_date": 1522204842, "question_id": 49525217, "link": "https://stackoverflow.com/questions/49525217/how-to-check-filter-params-from-one-to-another-params", "title": "How to check filter params from one to another params?", "body": "<p>I am new to Ruby on Rails and I am trying to create a small filter for the page with Angular. However, I have an issue to check if the 26-35mm exists in the following brand array. So if I change the Brand Name from <code>All</code> to <code>G-shock</code> I am trying to check if the <code>:case_size</code> is available in the following filter from 26 to 35 mm, if it is not available then disable the radio button.</p>\n\n<p>My product controller</p>\n\n<pre><code>if params[:search_brand] == \"all\"\n  @products = @products.order('created_at ASC')\nelsif params[:search_brand].present?\n  @products = @products.where(\"brand ILIKE '%#{params[:search_brand]}%'\")\n  if !params[:case_size] == \"26-35 mm\".nil? ? true : false\nend\nif params[:search_case] == \"all\"\n  @products = @products.where(case_size: 0..Float::INFINITY)\nend\nif params[:search_case] == \"26-35 mm\"\n  @products = @products.where(case_size: 26..35)\nend\n</code></pre>\n\n<p>For example:</p>\n\n<p>I have an array of brands in my filter which has a radio button option to select</p>\n\n<pre><code>&lt;% @brands.each do |item| %&gt;\n  &lt;%= radio_button_tag :search_brand,\n                       item.parameterize.underscore,\n                       params[:search_brand] == item.parameterize.underscore ? true : false,\n                       :onchange =&gt; \"window.location.assign(selectBrand(window.location, escape(this.value)));\" %&gt;\n  &lt;%= label :search_brand,\n            item.parameterize.underscore %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>And this is the second part of the code</p>\n\n<pre><code>&lt;%= radio_button_tag :search_case,\n                     \"All\".parameterize.underscore,\n                     true,\n                     :onchange =&gt; \"window.location.assign(selectCase(window.location, escape(this.value)));\" %&gt;\n&lt;%= label :search_case,\n          \"All\".parameterize.underscore,\n          class: 'menu_item__block_item' %&gt;\n&lt;%= radio_button_tag :search_case,\n                     '26-35 mm',\n                     params[:search_case] == '26-35 mm' ? true : false,\n                     :onchange =&gt; \"window.location.assign(selectCase(window.location, escape(this.value)));\" %&gt;\n&lt;%= label :search_case,\n          '26-35 mm',\n          class: 'menu_item__block_item', for: \"search_case_26-35_mm\" %&gt;\n</code></pre>\n\n<p>My script to filter the product when it changes the filter option will add the URL</p>\n\n<pre><code>&lt;script type=\"text/javascript\"&gt;\nfunction selectBrand(path, brand) {\n    var p = path.toString();\n\n    p = p.replace(/&amp;search_brand=.+/, \"\");\n\n    if (p.search(\"\\\\?\") == -1) {\n        p = p + \"?\";\n    }\n\n    p = p + \"&amp;search_brand=\" + brand;\n\n    return p;\n}\nfunction selectCase(path, caseSize) {\n   var p = path.toString();\n\n   p = p.replace(/&amp;search_case=.+/, \"\");\n\n   if (p.search(\"\\\\?\") == -1) {\n     p = p + \"?\";\n   }\n\n   p = p + \"&amp;search_case=\" + caseSize;\n\n   return p;\n}\n&lt;/script&gt;\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 452, "user_id": 2105198, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/d8d71b35e59634845c7b1b522824a832?s=128&d=identicon&r=PG", "display_name": "andrefurquin", "link": "https://stackoverflow.com/users/2105198/andrefurquin"}, "edited": false, "score": 0, "creation_date": 1522244352, "post_id": 49524983, "comment_id": 86078657, "body": "using render instead of present should do the trick"}], "owner": {"reputation": 452, "user_id": 2105198, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/d8d71b35e59634845c7b1b522824a832?s=128&d=identicon&r=PG", "display_name": "andrefurquin", "link": "https://stackoverflow.com/users/2105198/andrefurquin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 28, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1522202837, "creation_date": 1522202837, "question_id": 49524983, "link": "https://stackoverflow.com/questions/49524983/grapeapi-jsonapi-adapter", "title": "GrapeAPI + JSONAPI Adapter", "body": "<p>How can I have related resource to be loaded with grape api ?\nI'm using ActiveModelSerializers 0.10 and I'm doing something like this in the api: </p>\n\n<pre><code>present region, include: ['courts']\n</code></pre>\n\n<p>I get the relationship but I can't get the included array along with the data.</p>\n"}, {"tags": ["ruby", "regex"], "comments": [{"owner": {"reputation": 43580, "user_id": 1020526, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/Scjj8.jpg?s=128&g=1", "display_name": "revo", "link": "https://stackoverflow.com/users/1020526/revo"}, "edited": false, "score": 0, "creation_date": 1522193688, "post_id": 49523930, "comment_id": 86053778, "body": "<code>?</code> when comes before a quantifier it makes it non-greedy. So remove that <code>?</code> and add it before <code>.*</code>: <code>.*?</code>"}, {"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 1, "creation_date": 1522193706, "post_id": 49523930, "comment_id": 86053782, "body": "<code>e?</code> means &quot;zero or one e&quot;, <code>.*?</code> is the non-greedy <code>.*</code>."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1522200549, "post_id": 49523930, "comment_id": 86055257, "body": "Why <code>\\String</code> rather than <code>String</code>, considering that <code>&quot;Btring&quot;</code> matches <code>\\String</code>. <code>\\S</code> means &quot;match any character other than a whitespace&quot;?"}, {"owner": {"reputation": 11741, "user_id": 1934428, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/072774c5d4204a1c2385560e6114a887?s=128&d=identicon&r=PG", "display_name": "user1934428", "link": "https://stackoverflow.com/users/1934428/user1934428"}, "edited": false, "score": 0, "creation_date": 1522218039, "post_id": 49523930, "comment_id": 86060336, "body": "Side note: I wonder why this post got downvotes. It is a perfectly legal programming question, the question is expressed in an understandable way, and the OP at least shows his attempts and even explained his approach."}], "answers": [{"tags": [], "owner": {"reputation": 5141, "user_id": 193980, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/aafa8848c4b764f080b1b31a51eab73d?s=128&d=identicon&r=PG", "display_name": "Phlip", "link": "https://stackoverflow.com/users/193980/phlip"}, "is_accepted": false, "score": 1, "last_activity_date": 1522194117, "creation_date": 1522194117, "answer_id": 49523997, "question_id": 49523930, "link": "https://stackoverflow.com/questions/49523930/how-to-end-regex-match-at-first-occurrence-of-end-word/49523997#49523997", "title": "How to end regex match at first occurrence of end word", "body": "<p>Add a non-greedy <code>?</code> to the <code>.*</code>:</p>\n\n<pre><code>matchString = myString[/\\String which\\b.*?here?/,0]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 43580, "user_id": 1020526, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/Scjj8.jpg?s=128&g=1", "display_name": "revo", "link": "https://stackoverflow.com/users/1020526/revo"}, "edited": false, "score": 2, "creation_date": 1522194521, "post_id": 49524019, "comment_id": 86053985, "body": "OP doesn&#39;t want to start match from beginning of string, explicitly."}, {"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "reply_to_user": {"reputation": 43580, "user_id": 1020526, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/Scjj8.jpg?s=128&g=1", "display_name": "revo", "link": "https://stackoverflow.com/users/1020526/revo"}, "edited": false, "score": 0, "creation_date": 1522197611, "post_id": 49524019, "comment_id": 86054652, "body": "@revo yes you are correct. I misunderstood the question."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1522199930, "post_id": 49524019, "comment_id": 86055152, "body": "Is <code>\\A</code> needed (if the match were to start at the beginning of the string)?"}, {"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1522232265, "post_id": 49524019, "comment_id": 86069784, "body": "@Cary I hadn&#39;t thought about that but I guess not. If only to add some clarity perhaps."}], "tags": [], "owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "is_accepted": false, "score": 1, "last_activity_date": 1522194255, "creation_date": 1522194255, "answer_id": 49524019, "question_id": 49523930, "link": "https://stackoverflow.com/questions/49523930/how-to-end-regex-match-at-first-occurrence-of-end-word/49524019#49524019", "title": "How to end regex match at first occurrence of end word", "body": "<p>As noted in the comments <code>.*</code> is greedy, you need to make it lazy. Use <code>\\A</code> meaning start of string as well.</p>\n\n<pre><code>str = \"Test String which should end here here\"\nstr[/\\A.*?here/] #=&gt; \"Test String which should end here\"\n</code></pre>\n\n<p>Do not use camelCase for variables, use snake_case as above.</p>\n"}, {"tags": [], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "is_accepted": false, "score": 0, "last_activity_date": 1522212848, "creation_date": 1522212848, "answer_id": 49526364, "question_id": 49523930, "link": "https://stackoverflow.com/questions/49523930/how-to-end-regex-match-at-first-occurrence-of-end-word/49526364#49526364", "title": "How to end regex match at first occurrence of end word", "body": "<pre><code>myString[/\\String which\\b.*?here/]\n#=&gt; \"String which should end here\"\n</code></pre>\n"}], "owner": {"reputation": 11214, "user_id": 366207, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/a8f20cf31acead835f9eacc605210903?s=128&d=identicon&r=PG", "display_name": "Ahmad", "link": "https://stackoverflow.com/users/366207/ahmad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 139, "favorite_count": 0, "closed_date": 1522227613, "answer_count": 3, "score": -1, "last_activity_date": 1522212848, "creation_date": 1522193528, "last_edit_date": 1522212665, "question_id": 49523930, "link": "https://stackoverflow.com/questions/49523930/how-to-end-regex-match-at-first-occurrence-of-end-word", "closed_reason": "Not suitable for this site", "title": "How to end regex match at first occurrence of end word", "body": "<p>I have:</p>\n\n<pre><code>myString = String.new(\"Test String which should end here here\")\n</code></pre>\n\n<p>I want <code>matchString</code> to be <code>\"String which should end here\"</code>. I did:</p>\n\n<pre><code>matchString = myString[/\\String which\\b.*here?/,0]\n</code></pre>\n\n<p>The <code>matchString</code> is <code>\"String which should end here here\"</code>. The match is going until the end of the second <code>'here'</code> word. I have tried adding the non-greedy <code>?</code> after <code>'here'</code>, but its not working.</p>\n\n<p>How do I stop the match after the first <code>'here'</code>?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "devise"], "comments": [{"owner": {"reputation": 1651, "user_id": 7499455, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-pALqkvJ9LpE/AAAAAAAAAAI/AAAAAAAAATE/gXYryXAigJg/photo.jpg?sz=128", "display_name": "Ashik Salman", "link": "https://stackoverflow.com/users/7499455/ashik-salman"}, "edited": false, "score": 0, "creation_date": 1522242626, "post_id": 49523596, "comment_id": 86077331, "body": "You can <a href=\"https://github.com/plataformatec/devise/wiki/Tool:-Generate-and-customize-controllers\" rel=\"nofollow noreferrer\">generate controllers for devise</a> and can edit the response section as per your requirement. You can also override particular method for a single controller instead of generating all."}], "answers": [{"tags": [], "owner": {"reputation": 135, "user_id": 3756612, "user_type": "registered", "profile_image": "https://graph.facebook.com/510650564/picture?type=large", "display_name": "bryanfeller", "link": "https://stackoverflow.com/users/3756612/bryanfeller"}, "is_accepted": true, "score": 1, "last_activity_date": 1522245451, "creation_date": 1522245451, "answer_id": 49536518, "question_id": 49523596, "link": "https://stackoverflow.com/questions/49523596/using-devise-how-do-i-customize-a-failed-authentication/49536518#49536518", "title": "Using Devise, how do I customize a failed authentication?", "body": "<p>First you will need to skip the standard authentication on the page you want to do this on..</p>\n\n<pre><code>before_filter :authenticate_user!, except: [:mydifferentcontroller]\n</code></pre>\n\n<p>then you will need add some logic for the controller to bring you to your alternate response</p>\n\n<pre><code>def mydifferentcontroller\n  unless user_signed_in?\n    ## add redirect_to if you want to send them to an entirely different page or whatever change in logic can go in here \n  end\nend\n</code></pre>\n\n<p>Or if you just want to change a certain part of the page you can use the user_signed_in? in the view as well</p>\n\n<pre><code>- if user_signed_in?\n  .classyclass You're signed in\n- else\n  .classyclass You're not signed in\n</code></pre>\n\n<p>if that's what you meant....</p>\n"}], "owner": {"reputation": 3046, "user_id": 227403, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/3f149861a296511ce45656426643ce68?s=128&d=identicon&r=PG", "display_name": "Travis", "link": "https://stackoverflow.com/users/227403/travis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 28, "favorite_count": 0, "accepted_answer_id": 49536518, "answer_count": 1, "score": 0, "last_activity_date": 1522245451, "creation_date": 1522190870, "last_edit_date": 1522221593, "question_id": 49523596, "link": "https://stackoverflow.com/questions/49523596/using-devise-how-do-i-customize-a-failed-authentication", "title": "Using Devise, how do I customize a failed authentication?", "body": "<p>I have a controller that uses Devise to authenticate actions. I'd like the default behavior of responding with a 401 on every action except for one. I'd like to proceed with the request but provide a different response body. </p>\n\n<p>What method do I provide or override to accomplish this?</p>\n"}, {"tags": ["ruby", "gtk3"], "comments": [{"owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 0, "creation_date": 1522192918, "post_id": 49523513, "comment_id": 86053607, "body": "Does your program use bundler?  Is there a <code>Gemfile</code> in the application? How does the application load the gems?"}, {"owner": {"reputation": 33, "user_id": 6688877, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/249c06c7be2cb470e93c1c43be8d91d3?s=128&d=identicon&r=PG&f=1", "display_name": "D Adams", "link": "https://stackoverflow.com/users/6688877/d-adams"}, "reply_to_user": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 0, "creation_date": 1522196302, "post_id": 49523513, "comment_id": 86054359, "body": "No. I compiled ruby 2.5.0 from source and installed it in my home directory. I prefer to do it this way and I have done so in the past. In fact, I have the same setup on my desktop computer and do not have any problems with it. I have a number of gems installed and they appear to work fine. David"}, {"owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 0, "creation_date": 1522200739, "post_id": 49523513, "comment_id": 86055301, "body": "The error shows a version conflict but it&#39;s hard to debug because you&#39;ve not posted any code and we don&#39;t know how your gem is getting loaded into your program."}, {"owner": {"reputation": 33, "user_id": 6688877, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/249c06c7be2cb470e93c1c43be8d91d3?s=128&d=identicon&r=PG&f=1", "display_name": "D Adams", "link": "https://stackoverflow.com/users/6688877/d-adams"}, "reply_to_user": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 0, "creation_date": 1522204482, "post_id": 49523513, "comment_id": 86056169, "body": "I load the gem or gems into my program by using &quot;require&quot; like this: require &#39;gtk3&#39;"}], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 6688877, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/249c06c7be2cb470e93c1c43be8d91d3?s=128&d=identicon&r=PG&f=1", "display_name": "D Adams", "link": "https://stackoverflow.com/users/6688877/d-adams"}, "edited": false, "score": 0, "creation_date": 1522248001, "post_id": 49525354, "comment_id": 86081712, "body": "In test program:  #start excerpted code fragment require &#39;gtk3&#39; require &#39;pry&#39;  binding.pry class RubyApp &lt; Gtk::Window  def initialize #end excerpted code fragment  Running the program:     19: def load     20:   self.version = &quot;3.0&quot;  =&gt; 21:   super(&quot;Gdk&quot;)     22: end  Then, finishing: /home/david/.gem/ruby/2.5.0/gems/gobject-introspection-3.2.1&zwnj;&#8203;/lib/gobject-introsp&zwnj;&#8203;ection/loader.rb:37:&zwnj;&#8203;in `require&#39;: Requiring namespace &#39;Gdk&#39; version &#39;4.0&#39;, but &#39;3.0&#39; is already loaded (GObjectIntrospection::RepositoryError::NamespaceVersionConf&zwnj;&#8203;lict)"}, {"owner": {"reputation": 33, "user_id": 6688877, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/249c06c7be2cb470e93c1c43be8d91d3?s=128&d=identicon&r=PG&f=1", "display_name": "D Adams", "link": "https://stackoverflow.com/users/6688877/d-adams"}, "edited": false, "score": 0, "creation_date": 1522248102, "post_id": 49525354, "comment_id": 86081798, "body": "Sorry about that formatting, I&#39;m not experienced with posting here."}], "tags": [], "owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "is_accepted": false, "score": 0, "last_activity_date": 1522205859, "creation_date": 1522205859, "answer_id": 49525354, "question_id": 49523513, "link": "https://stackoverflow.com/questions/49523513/error-requiring-namespace-gdk-version-4-0-but-3-0-is-already-loaded/49525354#49525354", "title": "Error: Requiring namespace &#39;Gdk&#39; version &#39;4.0&#39;, but &#39;3.0&#39; is already loaded", "body": "<p>The error message indicates a version conflict.  Try the following.</p>\n\n<p>Go to root of your application and run:</p>\n\n<pre><code>gem list gtk\n</code></pre>\n\n<p>See if you have the correct version you expect and if any other versions may also be installed.  Perhaps then just try:</p>\n\n<pre><code>gem uninstall gtk3\ngem install gtk3\n</code></pre>\n\n<p>If you still get the error check to see if any other gems your app is loading may require a different version.  As a test maybe do</p>\n\n<pre><code>gem install pry\n</code></pre>\n\n<p>Launch a pry session</p>\n\n<pre><code>pry\n</code></pre>\n\n<p>From pry shell:</p>\n\n<p>require 'gtk3'\n   cd Gtk\n   show-method Loader # you should see a method like:</p>\n\n<pre><code>def load\n  self.version = \"3.0\"\n   super(\"Gtk\")\nend\n\n!!! # will get you out of pry shell.\n</code></pre>\n\n<p>From here you know you're able to load the correct version of Gtk so again, it must be something else trying to load the wrong/another version.</p>\n\n<p>Also make sure you update your system dependencies.</p>\n\n<pre><code>sudo apt-get update\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 33, "user_id": 6688877, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/249c06c7be2cb470e93c1c43be8d91d3?s=128&d=identicon&r=PG&f=1", "display_name": "D Adams", "link": "https://stackoverflow.com/users/6688877/d-adams"}, "is_accepted": false, "score": 0, "last_activity_date": 1522363599, "creation_date": 1522363599, "answer_id": 49566116, "question_id": 49523513, "link": "https://stackoverflow.com/questions/49523513/error-requiring-namespace-gdk-version-4-0-but-3-0-is-already-loaded/49566116#49566116", "title": "Error: Requiring namespace &#39;Gdk&#39; version &#39;4.0&#39;, but &#39;3.0&#39; is already loaded", "body": "<p>Fixed my problem. It turned out that I had apparently installed\ngir1.2-gtk-4.0 from synaptic along with some other software when\nI first set up my system. I do not think it was installed by default.</p>\n\n<p>I uninstalled that file and my graphical programs ran fine.\nThis file was not on my desktop computer and I had no problems with it.</p>\n\n<p>The responses to my post were intelligent and appreciated.</p>\n"}], "owner": {"reputation": 33, "user_id": 6688877, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/249c06c7be2cb470e93c1c43be8d91d3?s=128&d=identicon&r=PG&f=1", "display_name": "D Adams", "link": "https://stackoverflow.com/users/6688877/d-adams"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 262, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1532090364, "creation_date": 1522190345, "last_edit_date": 1532090364, "question_id": 49523513, "link": "https://stackoverflow.com/questions/49523513/error-requiring-namespace-gdk-version-4-0-but-3-0-is-already-loaded", "title": "Error: Requiring namespace &#39;Gdk&#39; version &#39;4.0&#39;, but &#39;3.0&#39; is already loaded", "body": "<p>I have a Linux install on a laptop. Ubuntu Mate 17.10.1. I installed Ruby 2.5.0 in a sub-directory in my home directory. When attempting to run a Ruby program that requires gtk3, I get this:</p>\n\n<pre><code>Traceback (most recent call last):\n    6: from /home/david/Public/zeta-code-example-1-laptop.rb:17:in `&lt;main&gt;'\n    5: from /home/david/.gem/ruby/2.5.0/gems/gtk3-3.2.1/lib/gtk3.rb:40:in `const_missing'\n    4: from /home/david/.gem/ruby/2.5.0/gems/gtk3-3.2.1/lib/gtk3.rb:64:in `init'\n    3: from /home/david/.gem/ruby/2.5.0/gems/gdk3-3.2.1/lib/gdk3.rb:59:in `init'\n    2: from /home/david/.gem/ruby/2.5.0/gems/gdk3-3.2.1/lib/gdk3/x11-loader.rb:21:in `load'\n    1: from /home/david/.gem/ruby/2.5.0/gems/gobject-introspection-3.2.1/lib/gobject-introspection/loader.rb:37:in `load'\n/home/david/.gem/ruby/2.5.0/gems/gobject-introspection-3.2.1/lib/gobject-introspection/loader.rb:37:in `require': Requiring namespace 'Gdk' version '4.0', but '3.0' is already loaded (GObjectIntrospection::RepositoryError::NamespaceVersionConflict)\n</code></pre>\n\n<p>I have run the program on my desktop with a similar setup with no problem. I have the appropriate gems installed under /home/david/.gem.<br>\nI have a number of other programs requiring gtk3. I get the same errors with them, also.</p>\n\n<p>Also, using the distro's Ruby (2.3) with the appropriate gems installed, I get the same results.</p>\n\n<p>I have done a fair amount of searching online about this and have not found anything relevant.</p>\n\n<p>Anyone know what is going on here? Thanks in advance.</p>\n"}, {"tags": ["ruby", "regex"], "answers": [{"comments": [{"owner": {"reputation": 15006, "user_id": 520567, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/6cb1b2c58abc2116f910ec9253ee387f?s=128&d=identicon&r=PG", "display_name": "akostadinov", "link": "https://stackoverflow.com/users/520567/akostadinov"}, "edited": false, "score": 0, "creation_date": 1522236528, "post_id": 49523044, "comment_id": 86072799, "body": "hmm, embarrassed for missing this :/, Thank you."}], "tags": [], "owner": {"reputation": 73209, "user_id": 290394, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d7908f05c89e965f6bc5308ad6f41256?s=128&d=identicon&r=PG", "display_name": "steenslag", "link": "https://stackoverflow.com/users/290394/steenslag"}, "is_accepted": true, "score": 4, "last_activity_date": 1522187705, "creation_date": 1522187705, "answer_id": 49523044, "question_id": 49522860, "link": "https://stackoverflow.com/questions/49522860/what-effect-does-the-ruby-regular-expression-option-n-have/49523044#49523044", "title": "What effect does the ruby regular expression option `n` have?", "body": "<p>Scroll down a bit in the docs, you'll find: <code>/pat/n - ASCII-8BIT</code></p>\n\n<p>This overrules the current source encoding (default UTF-8)</p>\n"}, {"tags": [], "owner": {"reputation": 5141, "user_id": 193980, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/aafa8848c4b764f080b1b31a51eab73d?s=128&d=identicon&r=PG", "display_name": "Phlip", "link": "https://stackoverflow.com/users/193980/phlip"}, "is_accepted": false, "score": 4, "last_activity_date": 1522187913, "creation_date": 1522187913, "answer_id": 49523090, "question_id": 49522860, "link": "https://stackoverflow.com/questions/49522860/what-effect-does-the-ruby-regular-expression-option-n-have/49523090#49523090", "title": "What effect does the ruby regular expression option `n` have?", "body": "<p><code>//n</code> means <code>NOENCODING</code>. From the Ruby tests:</p>\n\n<pre><code>def test_has_NOENCODING\n  assert Regexp::NOENCODING\n  re = //n\n  assert_equal Regexp::NOENCODING, re.options\nend\n</code></pre>\n\n<p>So it must mean to disregard all multiple byte character sequences and treat everything as raw bytes.</p>\n"}], "owner": {"reputation": 15006, "user_id": 520567, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/6cb1b2c58abc2116f910ec9253ee387f?s=128&d=identicon&r=PG", "display_name": "akostadinov", "link": "https://stackoverflow.com/users/520567/akostadinov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "accepted_answer_id": 49523044, "answer_count": 2, "score": 2, "last_activity_date": 1522212269, "creation_date": 1522186839, "last_edit_date": 1522212269, "question_id": 49522860, "link": "https://stackoverflow.com/questions/49522860/what-effect-does-the-ruby-regular-expression-option-n-have", "title": "What effect does the ruby regular expression option `n` have?", "body": "<p>I'm reading this line in ruby <a href=\"https://github.com/ruby/ruby/blob/ruby_2_5/lib/net/http/response.rb#L41\" rel=\"nofollow noreferrer\">source code</a>:</p>\n\n<pre><code>m = /\\AHTTP(?:\\/(\\d+\\.\\d+))?\\s+(\\d\\d\\d)(?:\\s+(.*))?\\z/in.match(str) or\n</code></pre>\n\n<p>I don't see the <code>n</code> option described in the <a href=\"https://ruby-doc.org/core-2.5.0/Regexp.html#class-Regexp-label-Options\" rel=\"nofollow noreferrer\">docs</a>. What does it do? To test properly, I'd need an HTTP server that will return 1xx responses. So I couldn't yet do it. But it looks like a bug. A <code>sock.readline</code> will return something like <code>\"HTTP/1.1 200 OK\\r\\n\"</code>, and this doesn't match the RE. If the option was <code>m</code>, it would have made more sense. I'm wondering whether this is some untested code path and somebody used <code>n</code> vs <code>m</code>. Why does <code>n</code> not fail if this was the case? I tried other random letters, and they fail. See some simple tests:</p>\n\n<pre><code>\"HTTP/1.1 200 OK\\r\\n\" =~ /\\AHTTP(?:\\/(\\d+\\.\\d+))?\\s+(\\d\\d\\d)(?:\\s+(.*))?\\z/im\n#=&gt; 0\n\"HTTP/1.1 200 OK\\r\\n\" =~ /\\AHTTP(?:\\/(\\d+\\.\\d+))?\\s+(\\d\\d\\d)(?:\\s+(.*))?\\z/in\n#=&gt; nil\n\"HTTP/1.1 200 OK\\r\\n\" =~ /\\AHTTP(?:\\/(\\d+\\.\\d+))?\\s+(\\d\\d\\d)(?:\\s+(.*))?\\z/iz\n#=&gt; SyntaxError: (eval):2: unknown regexp option - z\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "aasm"], "comments": [{"owner": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "edited": false, "score": 3, "creation_date": 1522184737, "post_id": 49522101, "comment_id": 86050693, "body": "why is it capitalized?  You could write a migration to lower it all and then if you need it capitalized in a view do it there.  I don&#39;t see a way to change the naming in aasm"}, {"owner": {"reputation": 208, "user_id": 5629127, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153351616801275/picture?type=large", "display_name": "Abhishek Jain", "link": "https://stackoverflow.com/users/5629127/abhishek-jain"}, "reply_to_user": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "edited": false, "score": 0, "creation_date": 1522186865, "post_id": 49522101, "comment_id": 86051613, "body": "Unfortunately, this is not possible. We have many external services which depend upon these values. This would lead to too many changes for us to keep those services happy."}, {"owner": {"reputation": 5579, "user_id": 3970701, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a937016807c66d89d0a62d7a1b235533?s=128&d=identicon&r=PG", "display_name": "Amin Shah Gilani", "link": "https://stackoverflow.com/users/3970701/amin-shah-gilani"}, "edited": false, "score": 2, "creation_date": 1522209078, "post_id": 49522101, "comment_id": 86057324, "body": "Do those services access the database directly or via your Rails API?"}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1522210391, "post_id": 49522101, "comment_id": 86057662, "body": "have you checked if it works with capitals?"}, {"owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 0, "creation_date": 1522219159, "post_id": 49522101, "comment_id": 86060874, "body": "Anthony&#39;s suggestion looks best to me."}, {"owner": {"reputation": 208, "user_id": 5629127, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153351616801275/picture?type=large", "display_name": "Abhishek Jain", "link": "https://stackoverflow.com/users/5629127/abhishek-jain"}, "edited": false, "score": 0, "creation_date": 1522250770, "post_id": 49522101, "comment_id": 86083938, "body": "I would have loved to lower it all, but we have a couple of services which use the DB directly. Changing in all the services would be very time-consuming. I would probably have to find a workaround or if I have time then maybe downcase all."}, {"owner": {"reputation": 208, "user_id": 5629127, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153351616801275/picture?type=large", "display_name": "Abhishek Jain", "link": "https://stackoverflow.com/users/5629127/abhishek-jain"}, "edited": false, "score": 0, "creation_date": 1522250790, "post_id": 49522101, "comment_id": 86083949, "body": "Thanks everyone!"}], "owner": {"reputation": 208, "user_id": 5629127, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153351616801275/picture?type=large", "display_name": "Abhishek Jain", "link": "https://stackoverflow.com/users/5629127/abhishek-jain"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 193, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1522183371, "creation_date": 1522183371, "question_id": 49522101, "link": "https://stackoverflow.com/questions/49522101/store-aasm-state-value-as-capitalized-strings", "title": "Store aasm state value as capitalized strings", "body": "<p>I was looking to implement this wonderful gem called aasm to my existing project.\nIn my current project, the status column on which I am trying to add aasm, the values are saved as a capitalized string like 'Draft', 'Published' etc</p>\n\n<p>How do I define my state in aasm so, that when an event to change the state is called, the value is saved correctly in capitalized form?</p>\n\n<p>Thanks for the help.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "paperclip", "rails-admin"], "answers": [{"tags": [], "owner": {"reputation": 11394, "user_id": 794481, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/344337b6819f2f513fa80bb227be3c2d?s=128&d=identicon&r=PG", "display_name": "Tallboy", "link": "https://stackoverflow.com/users/794481/tallboy"}, "is_accepted": false, "score": 0, "last_activity_date": 1522184167, "creation_date": 1522184167, "answer_id": 49522259, "question_id": 49521807, "link": "https://stackoverflow.com/questions/49521807/rails-admin-paperclip-wont-upload-to-s3/49522259#49522259", "title": "rails_admin + paperclip wont upload to S3", "body": "<p>Bahhhhh. The answer is because if you use an initializer you can't use the first example from their docs, you have to format it like this:</p>\n\n<pre><code>Paperclip::Attachment.default_options[:storage] = :s3\nPaperclip::Attachment.default_options[:s3_credentials] = {\n  bucket: Settings.s3.bucket_name,\n  access_key_id: Settings.s3.access_key,\n  secret_access_key: Settings.s3.secret_key,\n  s3_region: Settings.s3.region\n}\n</code></pre>\n"}], "owner": {"reputation": 11394, "user_id": 794481, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/344337b6819f2f513fa80bb227be3c2d?s=128&d=identicon&r=PG", "display_name": "Tallboy", "link": "https://stackoverflow.com/users/794481/tallboy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 111, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1522184167, "creation_date": 1522182192, "last_edit_date": 1522183462, "question_id": 49521807, "link": "https://stackoverflow.com/questions/49521807/rails-admin-paperclip-wont-upload-to-s3", "title": "rails_admin + paperclip wont upload to S3", "body": "<p>I'm using <code>rails_admin</code>, and I have Paperclip configured to use an S3 bucket.</p>\n\n<p>When I upload however, it just uploads locally. I have scoured internet and GitHub issues and can't find how I can achieve this.</p>\n\n<p>Thank you</p>\n\n<p><strong>initializers/paperclip.rb</strong></p>\n\n<pre><code>Rails.application.config.paperclip_defaults = {\n  storage: :s3,\n  s3_credentials: {\n    bucket: Settings.s3.bucket_name,\n    access_key_id: Settings.s3.access_key,\n    secret_access_key: Settings.s3.secret_key,\n    s3_region: Settings.s3.region\n  }\n}\n</code></pre>\n\n<h3>EDIT</h3>\n\n<p>It appears it will not even upload to S3 at all with the most basic form... is there some other step I have to do? This is my form 'test'</p>\n\n<pre><code>  &lt;%= form_for Gamer.new, url: root_path, html: { multipart: true } do |form| %&gt;\n    &lt;%= form.file_field :profile %&gt;\n    &lt;%= form.text_field :name %&gt;\n    &lt;%= form.text_field :rank %&gt;\n    &lt;%= form.submit %&gt;\n  &lt;% end %&gt;\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "postgresql", "activerecord"], "comments": [{"owner": {"reputation": 482, "user_id": 3609100, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/6fte8.png?s=128&g=1", "display_name": "Krzysztof Witczak", "link": "https://stackoverflow.com/users/3609100/krzysztof-witczak"}, "edited": false, "score": 0, "creation_date": 1522181115, "post_id": 49521141, "comment_id": 86048899, "body": "Try this: <code>Book.where.not(id: @client.books.pluck(:id))</code> (assuming you have correct <code>has_many</code> declarations in <code>Client</code> class)"}], "answers": [{"comments": [{"owner": {"reputation": 537, "user_id": 6665356, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/4c86625b9dd9d7d9505758a743d871ea?s=128&d=identicon&r=PG&f=1", "display_name": "matQ", "link": "https://stackoverflow.com/users/6665356/matq"}, "edited": false, "score": 0, "creation_date": 1522181473, "post_id": 49521566, "comment_id": 86049066, "body": "class Client has_many: books, through: : client_books.  Is this correct?"}, {"owner": {"reputation": 4600, "user_id": 5961578, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/df7cbfdd2a92a7926af3bbb8648318aa?s=128&d=identicon&r=PG", "display_name": "moveson", "link": "https://stackoverflow.com/users/5961578/moveson"}, "edited": false, "score": 0, "creation_date": 1522181648, "post_id": 49521566, "comment_id": 86049145, "body": "The method illustrated here will run two queries: one to obtain book ids, and another to determine books that don&#39;t have a relation. It is possible to do this with a single query. See my answer, which uses one query and also uses a scope to allow you to determine which client to use."}], "tags": [], "owner": {"reputation": 126, "user_id": 616256, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a35ef71da5861ed68ee079bf4fc325d8?s=128&d=identicon&r=PG", "display_name": "lhdv", "link": "https://stackoverflow.com/users/616256/lhdv"}, "is_accepted": false, "score": 0, "last_activity_date": 1522181128, "creation_date": 1522181128, "answer_id": 49521566, "question_id": 49521141, "link": "https://stackoverflow.com/questions/49521141/rails-5-select-where-with-no-id-reference-on-third-model-using-active-record/49521566#49521566", "title": "Rails 5 select where with no id reference on third model, using active record", "body": "<p>Assuming that you have a has_many through(Client > ClientBook > Book), you could try:</p>\n\n<pre><code>Books.where.not(Client.first.book_ids)\n</code></pre>\n\n<p>References:</p>\n\n<p><a href=\"http://guides.rubyonrails.org/association_basics.html#has-and-belongs-to-many-association-reference\" rel=\"nofollow noreferrer\">http://guides.rubyonrails.org/association_basics.html#has-and-belongs-to-many-association-reference</a>\n<a href=\"http://guides.rubyonrails.org/active_record_querying.html#not-conditions\" rel=\"nofollow noreferrer\">http://guides.rubyonrails.org/active_record_querying.html#not-conditions</a></p>\n"}, {"tags": [], "owner": {"reputation": 4600, "user_id": 5961578, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/df7cbfdd2a92a7926af3bbb8648318aa?s=128&d=identicon&r=PG", "display_name": "moveson", "link": "https://stackoverflow.com/users/5961578/moveson"}, "is_accepted": true, "score": 4, "last_activity_date": 1522182730, "last_edit_date": 1522182730, "creation_date": 1522181427, "answer_id": 49521631, "question_id": 49521141, "link": "https://stackoverflow.com/questions/49521141/rails-5-select-where-with-no-id-reference-on-third-model-using-active-record/49521631#49521631", "title": "Rails 5 select where with no id reference on third model, using active record", "body": "<p>You want something like this:</p>\n\n<pre><code># models/book.rb\n\nclass Book &lt; ApplicationRecord\n  has_many :client_books\n  has_many :clients, through: :client_books\n  scope :unread_by, -&gt; (client) { where.not(id: client.books) }\nend\n\n\n# models/client.rb\n\nclass Client &lt; ApplicationRecord\n  has_many :client_books\n  has_many :books, through: :client_books\nend\n</code></pre>\n\n<p>Now you can do:</p>\n\n<pre><code>&gt;&gt; client = Client.find(1)\n&gt;&gt; Book.unread_by(client)\n#&gt; &lt;ActiveRecord::Relation ...&gt;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 4600, "user_id": 5961578, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/df7cbfdd2a92a7926af3bbb8648318aa?s=128&d=identicon&r=PG", "display_name": "moveson", "link": "https://stackoverflow.com/users/5961578/moveson"}, "edited": false, "score": 1, "creation_date": 1522181769, "post_id": 49521695, "comment_id": 86049195, "body": "You don&#39;t need <code>select(:id)</code>. You can just use <code>where.not(id: @client.books)</code>."}, {"owner": {"reputation": 7844, "user_id": 1520557, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/9KKRA.png?s=128&g=1", "display_name": "Drenmi", "link": "https://stackoverflow.com/users/1520557/drenmi"}, "reply_to_user": {"reputation": 4600, "user_id": 5961578, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/df7cbfdd2a92a7926af3bbb8648318aa?s=128&d=identicon&r=PG", "display_name": "moveson", "link": "https://stackoverflow.com/users/5961578/moveson"}, "edited": false, "score": 0, "creation_date": 1522181927, "post_id": 49521695, "comment_id": 86049269, "body": "Indeed. I intentionally used it because it makes the code a bit less strange (by not having to ask &quot;how does an id equal a book object?&quot;) It also works for all cases (i.e. if the column is not <code>id</code>.)"}, {"owner": {"reputation": 4600, "user_id": 5961578, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/df7cbfdd2a92a7926af3bbb8648318aa?s=128&d=identicon&r=PG", "display_name": "moveson", "link": "https://stackoverflow.com/users/5961578/moveson"}, "edited": false, "score": 0, "creation_date": 1522200847, "post_id": 49521695, "comment_id": 86055319, "body": "Interesting. Do you also specify, for example, <code>split(&#39; &#39;)</code> instead of just <code>split</code>, because that also works for all cases? Or <code>inject(:+)</code> instead of <code>sum</code>? Not saying it&#39;s wrong, just curious why you wouldn&#39;t use the shortcut built into the language."}, {"owner": {"reputation": 7844, "user_id": 1520557, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/9KKRA.png?s=128&g=1", "display_name": "Drenmi", "link": "https://stackoverflow.com/users/1520557/drenmi"}, "reply_to_user": {"reputation": 4600, "user_id": 5961578, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/df7cbfdd2a92a7926af3bbb8648318aa?s=128&d=identicon&r=PG", "display_name": "moveson", "link": "https://stackoverflow.com/users/5961578/moveson"}, "edited": false, "score": 0, "creation_date": 1522250095, "post_id": 49521695, "comment_id": 86083434, "body": "I explained it already in the previous comment. It&#39;s unlikely I can explain it any simpler than that. The shortcut is slightly misleading, as it can look like a mistake at first. There&#39;s a clear disparity between the key and the value. That&#39;s not true for any of your other examples. (Although if the delimiter to <code>#split</code> is likely to change, I might explicate or even extract it on a case by case basis.)"}, {"owner": {"reputation": 4600, "user_id": 5961578, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/df7cbfdd2a92a7926af3bbb8648318aa?s=128&d=identicon&r=PG", "display_name": "moveson", "link": "https://stackoverflow.com/users/5961578/moveson"}, "edited": false, "score": 0, "creation_date": 1522266928, "post_id": 49521695, "comment_id": 86093690, "body": "That&#39;s an interesting philosophy. What do you do for path helpers? Do you write <code>client_path(@client.id)</code> or <code>client_path(@client)</code>? If I understand your philosophy correctly, you should prefer the first, as it is more explicit and more clearly states what you want to do (build a path that includes the client id). But in practice I nearly always see the second variation used."}], "tags": [], "owner": {"reputation": 7844, "user_id": 1520557, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/9KKRA.png?s=128&g=1", "display_name": "Drenmi", "link": "https://stackoverflow.com/users/1520557/drenmi"}, "is_accepted": false, "score": 0, "last_activity_date": 1522181674, "creation_date": 1522181674, "answer_id": 49521695, "question_id": 49521141, "link": "https://stackoverflow.com/questions/49521141/rails-5-select-where-with-no-id-reference-on-third-model-using-active-record/49521695#49521695", "title": "Rails 5 select where with no id reference on third model, using active record", "body": "<p>I would do this:</p>\n\n<pre><code>@books_to_offer = Book.where.not(id: @client.books.select(:id))\n</code></pre>\n\n<p>Using <code>#select</code> allows Rails to combine this into a single query, preventing the client book objects or even ids from being queried into memory first.</p>\n"}], "owner": {"reputation": 537, "user_id": 6665356, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/4c86625b9dd9d7d9505758a743d871ea?s=128&d=identicon&r=PG&f=1", "display_name": "matQ", "link": "https://stackoverflow.com/users/6665356/matq"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 524, "favorite_count": 1, "accepted_answer_id": 49521631, "answer_count": 3, "score": 1, "last_activity_date": 1522182730, "creation_date": 1522179456, "question_id": 49521141, "link": "https://stackoverflow.com/questions/49521141/rails-5-select-where-with-no-id-reference-on-third-model-using-active-record", "title": "Rails 5 select where with no id reference on third model, using active record", "body": "<p>I have 3 models, Client, Book, ClientBook. ClientBook belongs to Client and Book. this model (ClientBook) keeps all the books that a client already bougth or read.</p>\n\n<p>I want to select from Books, I want to select all the books that the client did not buy or read yet, using active record, example:</p>\n\n<pre><code>@books_to_offer = Book.all\n</code></pre>\n\n<p>I hope to be clear, if you need more information, please ask. thanks</p>\n"}, {"tags": ["ruby", "selenium", "firefox", "capybara", "selenium-firefoxdriver"], "answers": [{"comments": [{"owner": {"reputation": 2096, "user_id": 2108990, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/886481640b3ab8f05cdf3be8c0efdad6?s=128&d=identicon&r=PG", "display_name": "Zack", "link": "https://stackoverflow.com/users/2108990/zack"}, "edited": false, "score": 0, "creation_date": 1522183737, "post_id": 49520843, "comment_id": 86050216, "body": "Eric this gives me a <code>uninitialized constant Selenium::WebDriver::Firefox::Remote</code>"}, {"owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "reply_to_user": {"reputation": 2096, "user_id": 2108990, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/886481640b3ab8f05cdf3be8c0efdad6?s=128&d=identicon&r=PG", "display_name": "Zack", "link": "https://stackoverflow.com/users/2108990/zack"}, "edited": false, "score": 0, "creation_date": 1522190485, "post_id": 49520843, "comment_id": 86052930, "body": "@Zack That&#39;s because it should be  either of Selenium::WebDriver::Remote::Capabilities.firefox(accept_ins&zwnj;&#8203;ecure_certs: true)  or more likely <code>Selenium::WebDriver::Remote::W3C::Capabilities.firefox(accep&zwnj;&#8203;t_insecure_certs: true)</code> -  The selenium docs are wrong, or haven&#39;t been updated to match the current class structure in selenium-webdriver"}], "tags": [], "owner": {"reputation": 397, "user_id": 1642511, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1f2c418f2e87d63e2ccbf538ed70fdb?s=128&d=identicon&r=PG", "display_name": "Eric Himmelreich", "link": "https://stackoverflow.com/users/1642511/eric-himmelreich"}, "is_accepted": false, "score": 1, "last_activity_date": 1522252286, "last_edit_date": 1522252286, "creation_date": 1522178292, "answer_id": 49520843, "question_id": 49520422, "link": "https://stackoverflow.com/questions/49520422/force-ruby-selenium-to-work-with-untrusted-certificates/49520843#49520843", "title": "Force ruby selenium to work with untrusted certificates", "body": "<pre><code>capabilities = Selenium::WebDriver::Remote::W3C::Capabilities.firefox(accept_insecure_certs: true)\ndriver = Selenium::WebDriver.for :firefox, desired_capabilities: :capabilities\n</code></pre>\n\n<p>see <a href=\"https://github.com/SeleniumHQ/selenium/wiki/Ruby-Bindings#ssl-certificates\" rel=\"nofollow noreferrer\">selenium docs</a></p>\n"}], "owner": {"reputation": 2096, "user_id": 2108990, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/886481640b3ab8f05cdf3be8c0efdad6?s=128&d=identicon&r=PG", "display_name": "Zack", "link": "https://stackoverflow.com/users/2108990/zack"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 754, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1522252286, "creation_date": 1522176697, "question_id": 49520422, "link": "https://stackoverflow.com/questions/49520422/force-ruby-selenium-to-work-with-untrusted-certificates", "title": "Force ruby selenium to work with untrusted certificates", "body": "<p>For context I'm running ruby-rspec with selenium and capybara. When I navigate to the app_host I'm getting an InsecureCertificateError in the browser. How do I load a profile into selenium so that it will ignore the untrusted certificates? Below is what I'm currently trying to work with...</p>\n\n<pre><code>Capybara.register_driver :selenium do |app|\n  profile = Selenium::WebDriver::Firefox::Profile.new\n  profile.assume_untrusted_certificate_issuer=false\n  Capybara::Selenium::Driver.new(app, browser: :firefox, profile: profile)\nend\n</code></pre>\n"}, {"tags": ["ruby", "rubygems"], "comments": [{"owner": {"reputation": 2260, "user_id": 5687152, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/J754G.jpg?s=128&g=1", "display_name": "mabe02", "link": "https://stackoverflow.com/users/5687152/mabe02"}, "edited": false, "score": 0, "creation_date": 1522252524, "post_id": 49519604, "comment_id": 86085221, "body": "hi @dannyc1943 is this issue any helpful <a href=\"https://github.com/rubygems/rubygems/issues/1907\" rel=\"nofollow noreferrer\">github.com/rubygems/rubygems/issues/1907</a> ? try to run <code>gem install --platform=ruby --verbose</code>  if you are on windows 10."}, {"owner": {"reputation": 11, "user_id": 6480624, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aa6cf5ca4e40bfded31544e3507f1bea?s=128&d=identicon&r=PG&f=1", "display_name": "dannyc1943", "link": "https://stackoverflow.com/users/6480624/dannyc1943"}, "reply_to_user": {"reputation": 2260, "user_id": 5687152, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/J754G.jpg?s=128&g=1", "display_name": "mabe02", "link": "https://stackoverflow.com/users/5687152/mabe02"}, "edited": false, "score": 0, "creation_date": 1522320551, "post_id": 49519604, "comment_id": 86115377, "body": "Thanks... That solved the problem"}, {"owner": {"reputation": 2260, "user_id": 5687152, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/J754G.jpg?s=128&g=1", "display_name": "mabe02", "link": "https://stackoverflow.com/users/5687152/mabe02"}, "edited": false, "score": 0, "creation_date": 1522320732, "post_id": 49519604, "comment_id": 86115510, "body": "You are welcome! I answered then. You can accept the answer to close the question."}], "answers": [{"tags": [], "owner": {"reputation": 2260, "user_id": 5687152, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/J754G.jpg?s=128&g=1", "display_name": "mabe02", "link": "https://stackoverflow.com/users/5687152/mabe02"}, "is_accepted": false, "score": 0, "last_activity_date": 1522320681, "creation_date": 1522320681, "answer_id": 49554183, "question_id": 49519604, "link": "https://stackoverflow.com/questions/49519604/installing-gem-byebug-on-windows-7-x64/49554183#49554183", "title": "Installing gem byebug on Windows 7 x64", "body": "<p>As confirmed in the comment, you can try to install as:</p>\n\n<pre><code>gem install --platform=ruby --verbose\n</code></pre>\n\n<p>To stay updated, follow this <a href=\"https://github.com/rubygems/rubygems/issues/1907\" rel=\"nofollow noreferrer\">issue on rubygems repo</a> which is reporting the same problem you experienced</p>\n"}], "owner": {"reputation": 11, "user_id": 6480624, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aa6cf5ca4e40bfded31544e3507f1bea?s=128&d=identicon&r=PG&f=1", "display_name": "dannyc1943", "link": "https://stackoverflow.com/users/6480624/dannyc1943"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 140, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1522320681, "creation_date": 1522173706, "last_edit_date": 1522260675, "question_id": 49519604, "link": "https://stackoverflow.com/questions/49519604/installing-gem-byebug-on-windows-7-x64", "title": "Installing gem byebug on Windows 7 x64", "body": "<p>I've seen there have been others who have had a problem installing byebug on a Windows x64 system... Reading over the comments and trying a number of entries I am still not able to get it to install.  Here is the response I get each time I try:</p>\n\n<pre><code>D:\\Ruby25-x64\\bin&gt;gem install byebug\nTemporarily enhancing PATH for MSYS/MINGW...\nBuilding native extensions. This could take a while...\nERROR:  Error installing byebug:\nERROR: Failed to build gem native extension.\n\ncurrent directory: D:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/byebug-10.0.1/ext/byebug\nD:/Ruby25-x64/bin/ruby.exe -r ./siteconf20180327-5764-1i0l197.rb extconf.rb\nD:/Ruby25-x64/bin/ruby.exe: No such file or directory -- extconf.rb (LoadError)\n\nextconf failed, exit code 1\n\nGem files will remain installed in D:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/byebug-10.0.1 for inspection.\nResults logged to D:/Ruby25-x64/lib/ruby/gems/2.5.0/extensions/x64-mingw32/2.5.0/byebug-10.0.1/gem_make.out\n\n(gem_make.out Log)\n\ncurrent directory: \n\nD:/Ruby25x64/lib/ruby/gems/2.5.0/gems/byebug10.0.1/ext/byebug\nD:/Ruby25-x64/bin/ruby.exe -r ./siteconf20180327-2084hqddnk.rb extconf.rb\nD:/Ruby25-x64/bin/ruby.exe: No such file or directory -- extconf.rb \n(LoadError) extconf failed, exit code 1\n</code></pre>\n\n<p>Is there anyone out there who can give me a clear solution to this problem.  Thanks</p>\n"}, {"tags": ["ruby", "selenium", "firefox", "rspec", "capybara"], "comments": [{"owner": {"reputation": 1543, "user_id": 4321213, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6eb8ee864f581864dd312055a2da8e42?s=128&d=identicon&r=PG&f=1", "display_name": "Breaks Software", "link": "https://stackoverflow.com/users/4321213/breaks-software"}, "edited": false, "score": 1, "creation_date": 1522174178, "post_id": 49519427, "comment_id": 86044920, "body": "what happens if you manually navigate to that url with the port specified?  the error is indicating an InsecureCertificateError, so it&#39;s probably Firefox being a bit more picky about certificates?"}, {"owner": {"reputation": 2096, "user_id": 2108990, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/886481640b3ab8f05cdf3be8c0efdad6?s=128&d=identicon&r=PG", "display_name": "Zack", "link": "https://stackoverflow.com/users/2108990/zack"}, "reply_to_user": {"reputation": 1543, "user_id": 4321213, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6eb8ee864f581864dd312055a2da8e42?s=128&d=identicon&r=PG&f=1", "display_name": "Breaks Software", "link": "https://stackoverflow.com/users/4321213/breaks-software"}, "edited": false, "score": 0, "creation_date": 1522174376, "post_id": 49519427, "comment_id": 86045047, "body": "@BreaksSoftware you hit the nail on the head... It prompted me with a security error. I was able to add an exception, but how do I make that translate over the when the selenium test run?"}, {"owner": {"reputation": 166, "user_id": 9405451, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/63e8346fbd71e0bb896aa99f0996801f?s=128&d=identicon&r=PG&f=1", "display_name": "JollyProgrammer", "link": "https://stackoverflow.com/users/9405451/jollyprogrammer"}, "edited": false, "score": 0, "creation_date": 1522176267, "post_id": 49519427, "comment_id": 86046164, "body": "You can check the accepted answer <a href=\"https://stackoverflow.com/questions/37868425/accept-ssl-cert-with-marionette-firefox-webdrive-python-splinter#41711649\">here</a>. I think it may help you."}, {"owner": {"reputation": 2096, "user_id": 2108990, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/886481640b3ab8f05cdf3be8c0efdad6?s=128&d=identicon&r=PG", "display_name": "Zack", "link": "https://stackoverflow.com/users/2108990/zack"}, "reply_to_user": {"reputation": 166, "user_id": 9405451, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/63e8346fbd71e0bb896aa99f0996801f?s=128&d=identicon&r=PG&f=1", "display_name": "JollyProgrammer", "link": "https://stackoverflow.com/users/9405451/jollyprogrammer"}, "edited": false, "score": 0, "creation_date": 1522176513, "post_id": 49519427, "comment_id": 86046298, "body": "@JollyProgrammer appreciate the help, sadly that is for Python. I&#39;m in Ruby."}], "owner": {"reputation": 2096, "user_id": 2108990, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/886481640b3ab8f05cdf3be8c0efdad6?s=128&d=identicon&r=PG", "display_name": "Zack", "link": "https://stackoverflow.com/users/2108990/zack"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 222, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1522178458, "creation_date": 1522173125, "question_id": 49519427, "link": "https://stackoverflow.com/questions/49519427/capybara-app-host-with-colon-wont-work-with-firefox", "title": "Capybara app_host with colon won&#39;t work with Firefox", "body": "<p>I'm having a very odd issue with some capybara/selenium tests. For context I'm running ruby-rspec with selenium and capybara. My test work just fine when I run them on Chrome, but for some reason with Firefox, the 2nd URL fails.</p>\n\n<p><strong>spec_helper.rb</strong></p>\n\n<pre><code>BROWSER = :chrome\nBROWSER = :firefox\n\nCapybara.register_driver :selenium do |app|\n  Capybara::Selenium::Driver.new(app, browser: BROWSER)\nend\n\nCapybara.default_driver = :selenium\n# This one works\nCapybara.app_host = \"https://bar.foo.com/home\"\n# This one doesn't\nCapybara.app_host = \"https://foo.bar.com:18661/home\"\n</code></pre>\n\n<p><strong>The error I get:</strong></p>\n\n<pre><code>Selenium::WebDriver::Error::WebDriverError: \nWebDriverError@chrome://marionette/content/error.js:172:5\nInsecureCertificateError@chrome://marionette/content/error.js:291:5\nhandleReadyState@chrome://marionette/content/listener.js:274:21\nhandleEvent@chrome://marionette/content/listener.js:247:9\n</code></pre>\n"}, {"tags": ["ruby", "hashmap"], "comments": [{"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 1, "creation_date": 1522173096, "post_id": 49519387, "comment_id": 86044297, "body": "Please show a working example of what doesn&#39;t work for you."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1522174881, "post_id": 49519387, "comment_id": 86045363, "body": "Does <code>titles[item]</code> work?"}, {"owner": {"reputation": 145, "user_id": 9236683, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-HrM6Wl8fr5Q/AAAAAAAAAAI/AAAAAAAAAGo/UTiinTsPndw/photo.jpg?sz=128", "display_name": "Saahil", "link": "https://stackoverflow.com/users/9236683/saahil"}, "reply_to_user": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1522174897, "post_id": 49519387, "comment_id": 86045377, "body": "@SagarPandya I added the context of my program. Hope it helps!"}, {"owner": {"reputation": 145, "user_id": 9236683, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-HrM6Wl8fr5Q/AAAAAAAAAAI/AAAAAAAAAGo/UTiinTsPndw/photo.jpg?sz=128", "display_name": "Saahil", "link": "https://stackoverflow.com/users/9236683/saahil"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1522174995, "post_id": 49519387, "comment_id": 86045427, "body": "@tadman So you are saying to do something like: puts titles[item]"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1522175035, "post_id": 49519387, "comment_id": 86045442, "body": "That&#39;s the idea. If you type in the key correctly that will give you the answer."}, {"owner": {"reputation": 145, "user_id": 9236683, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-HrM6Wl8fr5Q/AAAAAAAAAAI/AAAAAAAAAGo/UTiinTsPndw/photo.jpg?sz=128", "display_name": "Saahil", "link": "https://stackoverflow.com/users/9236683/saahil"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1522175091, "post_id": 49519387, "comment_id": 86045471, "body": "@tadman Ok! Thank you so much"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1522175142, "post_id": 49519387, "comment_id": 86045500, "body": "If you&#39;re learning Ruby it really helps to have a good reference book on hand at all times. The <a href=\"http://ruby-doc.com/docs/ProgrammingRuby/\" rel=\"nofollow noreferrer\">Pickaxe book</a> is a good place to start. The online version is older but still very good. Newer versions in print or ebook contain more up-to-date advice."}], "answers": [{"tags": [], "owner": {"reputation": 397, "user_id": 1642511, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1f2c418f2e87d63e2ccbf538ed70fdb?s=128&d=identicon&r=PG", "display_name": "Eric Himmelreich", "link": "https://stackoverflow.com/users/1642511/eric-himmelreich"}, "is_accepted": true, "score": 1, "last_activity_date": 1522178578, "creation_date": 1522178578, "answer_id": 49520937, "question_id": 49519387, "link": "https://stackoverflow.com/questions/49519387/how-to-search-through-a-hash-for-a-specific-key-if-the-key-is-a-string/49520937#49520937", "title": "How to search through a hash for a specific key if the key is a string", "body": "<p>Add the following code:</p>\n\n<pre><code>puts titles[item]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 11741, "user_id": 1934428, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/072774c5d4204a1c2385560e6114a887?s=128&d=identicon&r=PG", "display_name": "user1934428", "link": "https://stackoverflow.com/users/1934428/user1934428"}, "is_accepted": false, "score": -1, "last_activity_date": 1522218556, "creation_date": 1522218556, "answer_id": 49527560, "question_id": 49519387, "link": "https://stackoverflow.com/questions/49519387/how-to-search-through-a-hash-for-a-specific-key-if-the-key-is-a-string/49527560#49527560", "title": "How to search through a hash for a specific key if the key is a string", "body": "<p>You did not specify the intended behaviour, when the user enters a key which is not present in the hash.</p>\n\n<pre><code>titles[item]\n</code></pre>\n\n<p>returns the associated value if <code>item</code> is a key in the hash, and returns nil otherwise. </p>\n\n<p>Note also that you can test with <code>titles.has_key?(item)</code>, whether the key exists in the hash. This is useful if you have a hash where some of the values can be nil.</p>\n"}], "owner": {"reputation": 145, "user_id": 9236683, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-HrM6Wl8fr5Q/AAAAAAAAAAI/AAAAAAAAAGo/UTiinTsPndw/photo.jpg?sz=128", "display_name": "Saahil", "link": "https://stackoverflow.com/users/9236683/saahil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "accepted_answer_id": 49520937, "answer_count": 2, "score": -5, "last_activity_date": 1522218556, "creation_date": 1522172931, "last_edit_date": 1522212975, "question_id": 49519387, "link": "https://stackoverflow.com/questions/49519387/how-to-search-through-a-hash-for-a-specific-key-if-the-key-is-a-string", "title": "How to search through a hash for a specific key if the key is a string", "body": "<p>I can't find a specific key in a hash. From here,</p>\n\n<pre><code>titles = {'book1' =&gt; 396, 'book2' =&gt; 346}\nprint 'What title would you like to search for? '\nitem = gets.chomp\n</code></pre>\n\n<p>I need to search for the item in the hash. Please let me know how. I found other methods, but they don't work when the key is a string.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "computer-science"], "answers": [{"comments": [{"owner": {"reputation": 1001, "user_id": 1509291, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/okmBh.jpg?s=128&g=1", "display_name": "Andrei", "link": "https://stackoverflow.com/users/1509291/andrei"}, "edited": false, "score": 0, "creation_date": 1522206270, "post_id": 49519064, "comment_id": 86056605, "body": "This is probably the most elegant solution."}], "tags": [], "owner": {"reputation": 61438, "user_id": 63034, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/ZXKMO.jpg?s=128&g=1", "display_name": "mikej", "link": "https://stackoverflow.com/users/63034/mikej"}, "is_accepted": true, "score": 3, "last_activity_date": 1522171736, "creation_date": 1522171736, "answer_id": 49519064, "question_id": 49518919, "link": "https://stackoverflow.com/questions/49518919/finding-the-differences-in-2-arrays/49519064#49519064", "title": "Finding the differences in 2 arrays", "body": "<p>You could write your own method along the lines of:</p>\n\n<pre><code>def ruby_method(array_1, array_2)\n  [array_1 - array_2, array_2 - array_1]\nend\n</code></pre>\n\n<p>This would return an array with the 2 differences, but you can unpack this into 2 separate variables on the left hand side of the call in exactly the way you mentioned:</p>\n\n<pre><code>difference_1, difference_2 = ruby_method(array_1, array_2)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 124, "user_id": 6557119, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e60b1380300235209c22a0c1b9f36fc?s=128&d=identicon&r=PG&f=1", "display_name": "Karthik P R", "link": "https://stackoverflow.com/users/6557119/karthik-p-r"}, "is_accepted": false, "score": 1, "last_activity_date": 1522172792, "last_edit_date": 1522172792, "creation_date": 1522171875, "answer_id": 49519095, "question_id": 49518919, "link": "https://stackoverflow.com/questions/49518919/finding-the-differences-in-2-arrays/49519095#49519095", "title": "Finding the differences in 2 arrays", "body": "<p>When you use array_1 - array_2 may give inappropriate results in your case,</p>\n\n<p>Suppose you have,</p>\n\n<pre><code>array_1 = [1, 2, 3] \narray_2 = [1, 3, 4] \narray_1 - array_2 = [2]\n</code></pre>\n\n<p>So in your case, you need to use the following</p>\n\n<pre><code>difference_1 = array_1.map.with_index { |v, i| v-array_2[i] }\ndifference_2 = array_2.map.with_index { |v, i| v-array_1[i] }\n</code></pre>\n\n<p>If you want to add it as a method</p>\n\n<pre><code>def find_difference(array_1, array_2)\n  difference_1 = array_1.map.with_index { |v, i| v-array_2[i] }\n  difference_2 = array_2.map.with_index { |v, i| v-array_1[i] }\n  return [difference_1, difference_2]\nend\n</code></pre>\n\n<p>You can call, </p>\n\n<pre><code>difference_array = find_difference(array_1, array_2)\n</code></pre>\n"}], "owner": {"reputation": 1001, "user_id": 1509291, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/okmBh.jpg?s=128&g=1", "display_name": "Andrei", "link": "https://stackoverflow.com/users/1509291/andrei"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 83, "favorite_count": 0, "closed_date": 1522176866, "accepted_answer_id": 49519064, "answer_count": 2, "score": -1, "last_activity_date": 1522176642, "creation_date": 1522171203, "question_id": 49518919, "link": "https://stackoverflow.com/questions/49518919/finding-the-differences-in-2-arrays", "closed_reason": "Duplicate", "title": "Finding the differences in 2 arrays", "body": "<p>Is there a more elegant way of accomplishing the following in Ruby?</p>\n\n<pre><code>array_1 = [1,2,3]\narray_2 = [3,4,5]\n\n(array_1 - array_2).each do |num|\n  some_method_z(num)\nend\n\n(array_2 - array_1).each do |num|\n  some_method_x(num)\nend\n</code></pre>\n\n<p>For example-- would love to be able to do something like:</p>\n\n<pre><code>difference_1, difference_2 = ruby_method(array_1, array_2)\n</code></pre>\n\n<p>which would be the equivalent to:</p>\n\n<pre><code>difference_1 = array_1 - array_2\ndifference_2 = array_2 - array_1\n</code></pre>\n"}, {"tags": ["ruby", "unit-testing", "testing", "rspec"], "comments": [{"owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 0, "creation_date": 1522171449, "post_id": 49518270, "comment_id": 86043435, "body": "This question is too broad and confusing for anyone to provide a reasonable answer.  Please see <a href=\"https://stackoverflow.com/help/how-to-ask\">stackoverflow.com/help/how-to-ask</a> or this could get flagged.  Furthermore you&#39;re not doing TDD correctly.  You should have each method isolated and write a unit tests."}, {"owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 0, "creation_date": 1522171576, "post_id": 49518270, "comment_id": 86043509, "body": "See <a href=\"https://stackoverflow.com/questions/2512504/tdd-how-to-start-really-thinking-tdd#2512873\" title=\"tdd how to start really thinking tdd%232512873\">stackoverflow.com/questions/2512504/&hellip;</a>"}, {"owner": {"reputation": 1312, "user_id": 2280562, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/3a1ecbfd6f642d6f18eaa9a51edbed89?s=128&d=identicon&r=PG", "display_name": "Sebastian Corneliu V&#238;rlan", "link": "https://stackoverflow.com/users/2280562/sebastian-corneliu-v%c3%aerlan"}, "reply_to_user": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 0, "creation_date": 1522176414, "post_id": 49518270, "comment_id": 86046249, "body": "@lacostenycoder yes I agree and I have for StepManager but when you want to test a method which generates a report and in order to get something on that reports you must call complex code? ... I will read your post."}, {"owner": {"reputation": 7844, "user_id": 1520557, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/9KKRA.png?s=128&g=1", "display_name": "Drenmi", "link": "https://stackoverflow.com/users/1520557/drenmi"}, "edited": false, "score": 2, "creation_date": 1522176976, "post_id": 49518270, "comment_id": 86046574, "body": "Sounds like you might want a state machine. Look into something like <code>aasm</code>. You may also want to look into <code>factory_bot</code> for a way to set up more complex test fixtures."}, {"owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "reply_to_user": {"reputation": 7844, "user_id": 1520557, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/9KKRA.png?s=128&g=1", "display_name": "Drenmi", "link": "https://stackoverflow.com/users/1520557/drenmi"}, "edited": false, "score": 0, "creation_date": 1522190058, "post_id": 49518270, "comment_id": 86052805, "body": "@SebastianCorneliuV&#238;rlan it sounds like you need help with design patterns. You should probably be storing state of the students progress in a database. As each step gets completed, update the state in the database.  There are many ways to build fixtures and/or factories for testing state. In Rails you might use <code>factory_girl</code> or as @Drenmi suggested <a href=\"https://github.com/thoughtbot/factory_bot\" rel=\"nofollow noreferrer\">github.com/thoughtbot/factory_bot</a>"}, {"owner": {"reputation": 1312, "user_id": 2280562, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/3a1ecbfd6f642d6f18eaa9a51edbed89?s=128&d=identicon&r=PG", "display_name": "Sebastian Corneliu V&#238;rlan", "link": "https://stackoverflow.com/users/2280562/sebastian-corneliu-v%c3%aerlan"}, "reply_to_user": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 0, "creation_date": 1522224857, "post_id": 49518270, "comment_id": 86064310, "body": "@lacostenycoder yep, this is what I am doing now, on a specific step I have a different status and I am already handling this with <code>StepManager</code> as I said. But attention! Each next step, comes with additional inserts and updates in database beside the status update, as I said I am saving schedules, action_histories, and let&#39;s say for example I want an student at <code>completed</code> status. Imagine that I have to insert 5 action histories etc. As I said each next step is not just changing status and current step. Yes I use factory girl but never thought to achieve this with it."}], "answers": [{"tags": [], "owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "is_accepted": false, "score": 0, "last_activity_date": 1522258167, "creation_date": 1522258167, "answer_id": 49540754, "question_id": 49518270, "link": "https://stackoverflow.com/questions/49518270/replicate-logic-or-using-existent-in-tests/49540754#49540754", "title": "Replicate logic or using existent in tests?", "body": "<p>Use TDD best practices.  In a rails project for example, write unit tests for your models and controller actions.  Same for services.  Test each unit for it's expectations.  If you need more complex data state to check, it's recommended to use factories using <a href=\"https://github.com/thoughtbot/factory_bot\" rel=\"nofollow noreferrer\">https://github.com/thoughtbot/factory_bot</a> or <a href=\"https://github.com/thoughtbot/factory_bot_rails\" rel=\"nofollow noreferrer\">https://github.com/thoughtbot/factory_bot_rails</a> if you're using rails.</p>\n"}], "owner": {"reputation": 1312, "user_id": 2280562, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/3a1ecbfd6f642d6f18eaa9a51edbed89?s=128&d=identicon&r=PG", "display_name": "Sebastian Corneliu V&#238;rlan", "link": "https://stackoverflow.com/users/2280562/sebastian-corneliu-v%c3%aerlan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 44, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1522258167, "creation_date": 1522168824, "question_id": 49518270, "link": "https://stackoverflow.com/questions/49518270/replicate-logic-or-using-existent-in-tests", "title": "Replicate logic or using existent in tests?", "body": "<p>I have some concerns about writing too much logic in the spec tests.</p>\n\n<p>So let's assume we have a <code>student</code> with <code>statuses</code> and <code>steps</code></p>\n\n<p>Student statuses starts from</p>\n\n<pre><code>pending -&gt; learning -&gt; graduated -&gt; completed\n</code></pre>\n\n<p>and steps are:</p>\n\n<pre><code>nil -&gt; learning_step1 -&gt; learning_step2 -&gt; learning_step3 -&gt; monitoring_step1 -&gt; monitoring_step2\n</code></pre>\n\n<p>With each step going forward a lot of things are happening depending where you are: e.g.</p>\n\n<pre><code>nil -&gt; learning_step1\n</code></pre>\n\n<p>Student status changes to <code>learning</code>\nWrites an action history ( which is used by report stats )\nUpdate a contact schedule</p>\n\n<pre><code>learning_step1 -&gt; learning_step2\n</code></pre>\n\n<p>....the same...</p>\n\n<p>and so ..... until</p>\n\n<pre><code>learning_step3 -&gt; monitoring_step1\n</code></pre>\n\n<p>Student status changes to <code>graduated</code>\nWrites different action histories ( which is used by report stats )\nUpdate a contact schedule</p>\n\n<p>and when</p>\n\n<pre><code>monitoring_step2 -&gt; there is no next step\n</code></pre>\n\n<p>Student status changes to <code>completed</code>\nWrites different action histories ( which is used by report stats )\nDelete any contact schedule</p>\n\n<p>So imagine that I need a test case of a <code>completed</code> student, I would have to think all the possibilities that may come and achieve that student as <code>completed</code> and also I can forget to write an action history and will mess with the reports.</p>\n\n<p>Or ....</p>\n\n<p>Using an already implemented class:</p>\n\n<pre><code># assuming we have like in the above example 5 steps I do\n\nStepManager.new(student).proceed # goes status learning and step1\nStepManager.new(student).proceed\nStepManager.new(student).proceed\nStepManager.new(student).proceed # goes status graduated and monitoring1\nStepManager.new(student).proceed # this will proceed the student in the 5th step which is monitoring2\nStepManager.new(student).next_step # here will go completed\n</code></pre>\n\n<p>or to make my job easier with something like:</p>\n\n<pre><code>StepManager.new(student).proceed.proceed.proceed.proceed.proceed.proceed\n</code></pre>\n\n<p>or</p>\n\n<pre><code>StepManager.new(student).complete_student # which in background does the same thing\n</code></pre>\n\n<p>And by doing that I am sure I will never miss something. But then the tests wouldn't be so clear about what I am doing.</p>\n\n<p>So should I replicate the logic or using my classes?</p>\n"}, {"tags": ["ruby", "symbols", "ruby-1.8.7"], "comments": [{"owner": {"reputation": 1136, "user_id": 5215927, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/w06Fv.jpg?s=128&g=1", "display_name": "mr_sudaca", "link": "https://stackoverflow.com/users/5215927/mr-sudaca"}, "edited": false, "score": 1, "creation_date": 1522166756, "post_id": 49517423, "comment_id": 86040620, "body": "i think the problem it&#39;s on the <code>select.options...</code> call. Why don&#39;t you try with <code>inject</code> instead? like <code>options.inject([]) { |memo, (k, v)| memo &lt;&lt; { :k  =&gt; v } if MY_WHITELIST.include?(k); memo }</code>"}, {"owner": {"reputation": 2260, "user_id": 5687152, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/J754G.jpg?s=128&g=1", "display_name": "mabe02", "link": "https://stackoverflow.com/users/5687152/mabe02"}, "reply_to_user": {"reputation": 1136, "user_id": 5215927, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/w06Fv.jpg?s=128&g=1", "display_name": "mr_sudaca", "link": "https://stackoverflow.com/users/5215927/mr-sudaca"}, "edited": false, "score": 0, "creation_date": 1522167582, "post_id": 49517423, "comment_id": 86041179, "body": "thansk @mr_sudaca Now I tried <code>Hash[options.to_a.select { |k, _| MY_WHITELIST.include?(k) }]</code> and I am waiting for the ci"}, {"owner": {"reputation": 2260, "user_id": 5687152, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/J754G.jpg?s=128&g=1", "display_name": "mabe02", "link": "https://stackoverflow.com/users/5687152/mabe02"}, "reply_to_user": {"reputation": 1136, "user_id": 5215927, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/w06Fv.jpg?s=128&g=1", "display_name": "mr_sudaca", "link": "https://stackoverflow.com/users/5215927/mr-sudaca"}, "edited": false, "score": 0, "creation_date": 1522168798, "post_id": 49517423, "comment_id": 86041979, "body": "The code I put in my comment is working. @mr_sudaca if you want to post this answer I will accept it!"}, {"owner": {"reputation": 1136, "user_id": 5215927, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/w06Fv.jpg?s=128&g=1", "display_name": "mr_sudaca", "link": "https://stackoverflow.com/users/5215927/mr-sudaca"}, "edited": false, "score": 0, "creation_date": 1522168863, "post_id": 49517423, "comment_id": 86042030, "body": "it&#39;s ok!, glad you made it work! :)"}], "answers": [{"tags": [], "owner": {"reputation": 2260, "user_id": 5687152, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/J754G.jpg?s=128&g=1", "display_name": "mabe02", "link": "https://stackoverflow.com/users/5687152/mabe02"}, "is_accepted": true, "score": 0, "last_activity_date": 1525098058, "creation_date": 1525098058, "answer_id": 50102465, "question_id": 49517423, "link": "https://stackoverflow.com/questions/49517423/ruby-1-8-7-array-of-symbols-raising-typeerror-symbol-as-array-index/50102465#50102465", "title": "Ruby 1.8.7 Array of symbols raising TypeError: Symbol as array index", "body": "<p>As suggested in a comment by @mr_sudaca, the solution was to make the selection on an array:</p>\n\n<pre><code>Hash[options.to_a.select { |k, _| MY_WHITELIST.include?(k) }]\n</code></pre>\n"}], "owner": {"reputation": 2260, "user_id": 5687152, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/J754G.jpg?s=128&g=1", "display_name": "mabe02", "link": "https://stackoverflow.com/users/5687152/mabe02"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 92, "favorite_count": 0, "accepted_answer_id": 50102465, "answer_count": 1, "score": 0, "last_activity_date": 1525098058, "creation_date": 1522166070, "question_id": 49517423, "link": "https://stackoverflow.com/questions/49517423/ruby-1-8-7-array-of-symbols-raising-typeerror-symbol-as-array-index", "title": "Ruby 1.8.7 Array of symbols raising TypeError: Symbol as array index", "body": "<p>I recently created a <a href=\"https://github.com/onelogin/ruby-saml/pull/454\" rel=\"nofollow noreferrer\">pull request for a gem</a> which is building on travis against quite old ruby versions for backward compatibility.</p>\n\n<p>In my commit I wanted to introduce a whitelist on some method options passed as an hash parameter.</p>\n\n<p>In Rails with a recent ruby version it would look like:</p>\n\n<pre><code>MY_WHITELIST = %i(a b c)\ndef my_method(options={})\n  @options = options.slice(*MY_WHITELIST)\nend\n</code></pre>\n\n<p>In order to grant backward compatibility in a standalone gem, I provided a solution like:</p>\n\n<pre><code>MY_WHITELIST = [:a, :b, :c]\ndef my_method(options={})\n  @options = options.select { |k, _| MY_WHITELIST.include?(k) }\nend\n</code></pre>\n\n<p>This pass for ruby <code>1.9.3</code> but raise the following exception for <code>1.8.7</code>:</p>\n\n<pre><code>TypeError: Symbol as array index\n</code></pre>\n\n<p>According to the <a href=\"https://ruby-doc.org/core-1.8.7/Array.html\" rel=\"nofollow noreferrer\">documentation</a>, this way to initialise an array should be accepted.</p>\n\n<p>Have you ever experienced with use? What would you suggest?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 56328, "user_id": 4265352, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-lzAUc5pYb24/AAAAAAAAAAI/AAAAAAAAAGQ/q3h7bZUnqrs/photo.jpg?sz=128", "display_name": "axiac", "link": "https://stackoverflow.com/users/4265352/axiac"}, "edited": false, "score": 0, "creation_date": 1522161930, "post_id": 49515946, "comment_id": 86036976, "body": "Welcome to <a href=\"https://stackoverflow.com\">Stack Overflow</a>. Please take your time and <a href=\"https://stackoverflow.com/posts/49515946/edit\">edit</a> the question to make it readable. Select the code and use the <code>code</code> button (<code>{}</code>) in the toolbar of the editor to format it nicely."}, {"owner": {"reputation": 2322, "user_id": 3088748, "user_type": "registered", "accept_rate": 63, "profile_image": "https://graph.facebook.com/544821277/picture?type=large", "display_name": "AJFaraday", "link": "https://stackoverflow.com/users/3088748/ajfaraday"}, "edited": false, "score": 1, "creation_date": 1522161944, "post_id": 49515946, "comment_id": 86036995, "body": "I&#39;m fairly sure the first set of brackets in your regex is saying &quot;I&#39;m a vowel&quot;, then the second is saying &quot;I&#39;m not a vowel&quot;. It doesn&#39;t seem to do anything until it&#39;s seen a vowel."}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1522162054, "post_id": 49515946, "comment_id": 86037097, "body": "Your code is not valid syntax. I don&#39;t know how to reproduce your problem for sure, since the code you provided is clearly not what you&#39;re running. Can you please update the question correctly?"}, {"owner": {"reputation": 56328, "user_id": 4265352, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-lzAUc5pYb24/AAAAAAAAAAI/AAAAAAAAAGQ/q3h7bZUnqrs/photo.jpg?sz=128", "display_name": "axiac", "link": "https://stackoverflow.com/users/4265352/axiac"}, "reply_to_user": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1522162185, "post_id": 49515946, "comment_id": 86037220, "body": "@TomLord the code is valid. Because it was not formatted as code, the <code>&lt;vowel&gt;</code> and <code>&lt;non_vowel&gt;</code> pieces were interpreted as HTML tags and not displayed."}], "answers": [{"tags": [], "owner": {"reputation": 56328, "user_id": 4265352, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-lzAUc5pYb24/AAAAAAAAAAI/AAAAAAAAAGQ/q3h7bZUnqrs/photo.jpg?sz=128", "display_name": "axiac", "link": "https://stackoverflow.com/users/4265352/axiac"}, "is_accepted": true, "score": 1, "last_activity_date": 1522163995, "creation_date": 1522163995, "answer_id": 49516729, "question_id": 49515946, "link": "https://stackoverflow.com/questions/49515946/ruby-string-slice-function/49516729#49516729", "title": "Ruby string slice function", "body": "<p>Your regular expression, piece by piece:</p>\n\n<pre><code>/                   # regex delimiter; part of the syntax, not of the regex\n  (?&lt;vowel&gt;         # start of a capturing group named \"vowel\"\n  [aeiou]           # matches one char from the class ('a', 'e', 'i', 'o' or 'u')\n  )                 # end of the capturing group\n  (?&lt;non_vowel&gt;     # start of another capturing group (named \"non_vowel\")\n  [^aeiou]          # matches one character that is not in the class (a consonant)\n  )                 # end of the capturing group\n/                   # regex delimiter\n</code></pre>\n\n<p>It matches the first vowel that is followed by a non-vowel (a consonant). When the regex matches, the capturing groups capture the matching pieces.</p>\n\n<p>For the string <code>\"hello there\"</code> it matches <code>el</code>. The <code>vowel</code> capturing group contains <code>e</code>, the <code>non_vowel</code> group contains <code>l</code>.</p>\n\n<p>All of the above are general <code>regex</code> information; they are not specific to Ruby, they work the same in other languages.</p>\n\n<p>The code you posted is given as example of the <a href=\"http://ruby-doc.org/core-2.5.0/String.html#method-i-5B-5D\" rel=\"nofollow noreferrer\"><code>String#[]</code></a> method; the documentation explains that the second argument of <code>str[regex, capture]</code> is the name of the capturing group to use as the value of the expression when <code>str</code> matches <code>regex</code>.</p>\n"}], "owner": {"reputation": 1, "user_id": 9558961, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "callum mackenzie", "link": "https://stackoverflow.com/users/9558961/callum-mackenzie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "accepted_answer_id": 49516729, "answer_count": 1, "score": -1, "last_activity_date": 1522213175, "creation_date": 1522161801, "last_edit_date": 1522213175, "question_id": 49515946, "link": "https://stackoverflow.com/questions/49515946/ruby-string-slice-function", "title": "Ruby string slice function", "body": "<pre><code>a = \"hello there\"\na[/(?&lt;vowel&gt;[aeiou])(?&lt;non_vowel&gt;[^aeiou])/, \"non_vowel\"] #=&gt; \"l\"\n</code></pre>\n\n<p>Can anyone explain why <code>\"l\"</code> is returned and not <code>\"h\"</code>?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1522161230, "post_id": 49515639, "comment_id": 86036388, "body": "Do you get the error at define time or later, when you call the generated <code>create</code>?"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1522161425, "post_id": 49515639, "comment_id": 86036535, "body": "Why are you using <code>class_eval</code>? At a glance, this looks like something to be solved with inheritance."}, {"owner": {"reputation": 814, "user_id": 5479076, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/ebf84ecaf15f684b53f18b9313cd1325?s=128&d=identicon&r=PG&f=1", "display_name": "Orsay", "link": "https://stackoverflow.com/users/5479076/orsay"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1522161549, "post_id": 49515639, "comment_id": 86036638, "body": "@SergioTulentsev I get the error when I launch the server."}, {"owner": {"reputation": 814, "user_id": 5479076, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/ebf84ecaf15f684b53f18b9313cd1325?s=128&d=identicon&r=PG&f=1", "display_name": "Orsay", "link": "https://stackoverflow.com/users/5479076/orsay"}, "reply_to_user": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1522161552, "post_id": 49515639, "comment_id": 86036639, "body": "@TomLord I use class_eval because I&#39;d like to override the create method from VotesController"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1522161899, "post_id": 49515639, "comment_id": 86036951, "body": "@Orsay That sounds like something to be solved with inheritance."}, {"owner": {"reputation": 814, "user_id": 5479076, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/ebf84ecaf15f684b53f18b9313cd1325?s=128&d=identicon&r=PG&f=1", "display_name": "Orsay", "link": "https://stackoverflow.com/users/5479076/orsay"}, "reply_to_user": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1522162123, "post_id": 49515639, "comment_id": 86037161, "body": "@TomLord can you give me an example for my case please ?"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1522165374, "post_id": 49515639, "comment_id": 86039711, "body": "@Orsay <code>class MyCustomisedVotesController &lt; VotesController; def create; ....; end; end</code>"}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1522168594, "post_id": 49515639, "comment_id": 86041855, "body": "So you have dynamically created a instance method for the controller, that&#39;s cool. Have you also made a route for it? Have you tried hitting the route?"}], "answers": [{"comments": [{"owner": {"reputation": 814, "user_id": 5479076, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/ebf84ecaf15f684b53f18b9313cd1325?s=128&d=identicon&r=PG&f=1", "display_name": "Orsay", "link": "https://stackoverflow.com/users/5479076/orsay"}, "edited": false, "score": 0, "creation_date": 1522248128, "post_id": 49525858, "comment_id": 86081823, "body": "In this app I cannot edit the existed files. If I want to edit something I have to patch it. That&#39;s why i&#39;m using a <code>class_eval</code> and cannot use inheritance. I tried your proposal, but it doesn&#39;t work, I still have the current_user issue"}], "tags": [], "owner": {"reputation": 5579, "user_id": 3970701, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a937016807c66d89d0a62d7a1b235533?s=128&d=identicon&r=PG", "display_name": "Amin Shah Gilani", "link": "https://stackoverflow.com/users/3970701/amin-shah-gilani"}, "is_accepted": false, "score": 0, "last_activity_date": 1522209529, "creation_date": 1522209529, "answer_id": 49525858, "question_id": 49515639, "link": "https://stackoverflow.com/questions/49515639/rails-how-to-use-current-user-in-a-class-eval/49525858#49525858", "title": "Rails : How to use &quot;current_user&quot; in a class_eval?", "body": "<p>I have no idea what you're doing with the <code>class_eval</code> and why you can't just use inheritance to overwrite the <code>VotesController</code>, but <code>current_user</code> is set after you run <code>authenticate_user!</code>, so, this should work:</p>\n\n<pre><code>VotesController.class_eval do\n  def create\n    authenticate_user!\n    ...\n\n    @current_user = current_user\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 814, "user_id": 5479076, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/ebf84ecaf15f684b53f18b9313cd1325?s=128&d=identicon&r=PG&f=1", "display_name": "Orsay", "link": "https://stackoverflow.com/users/5479076/orsay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 53, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1522209529, "creation_date": 1522161071, "last_edit_date": 1522161239, "question_id": 49515639, "link": "https://stackoverflow.com/questions/49515639/rails-how-to-use-current-user-in-a-class-eval", "title": "Rails : How to use &quot;current_user&quot; in a class_eval?", "body": "<p>I'd like to use the method <code>current_user</code> in a class_eval.\nFor now I get :</p>\n\n<blockquote>\n  <blockquote>\n    <p>undefined method `current_user'</p>\n  </blockquote>\n</blockquote>\n\n<p><strong>lib/extends/votes_controller_extended.rb</strong></p>\n\n<pre><code>VotesController.class_eval do\n  def create\n    ...\n\n    @current_user = current_user\n  end\nend\n</code></pre>\n\n<p>I guess the <code>current_user</code> is not available at this stage... But may be there is a way to get it anyway.</p>\n"}, {"tags": ["ruby"], "answers": [{"tags": [], "owner": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "is_accepted": true, "score": 2, "last_activity_date": 1522159668, "creation_date": 1522159668, "answer_id": 49515132, "question_id": 49514934, "link": "https://stackoverflow.com/questions/49514934/ruby-httpclient-set-content-type-to-json/49515132#49515132", "title": "Ruby HTTPClient set content_type to json", "body": "<p>Use:</p>\n\n<pre><code>require 'jsonclient'\n</code></pre>\n\n<p>Then you can use JSONClient just as HTTPClient.</p>\n"}, {"tags": [], "owner": {"reputation": 372, "user_id": 9141855, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a68f4ad4f0df2aaf0d37f23cf960ce52?s=128&d=identicon&r=PG&f=1", "display_name": "Max Forasteiro", "link": "https://stackoverflow.com/users/9141855/max-forasteiro"}, "is_accepted": false, "score": 2, "last_activity_date": 1522159810, "creation_date": 1522159810, "answer_id": 49515168, "question_id": 49514934, "link": "https://stackoverflow.com/questions/49514934/ruby-httpclient-set-content-type-to-json/49515168#49515168", "title": "Ruby HTTPClient set content_type to json", "body": "<p>In the <a href=\"http://www.rubydoc.info/gems/httpclient/HTTPClient:initialize\" rel=\"nofollow noreferrer\">doc</a> you see that the <code>new</code> method accept a Hash of args and you can pass a header with  <code>Content-type:application/json</code></p>\n\n<p>ALSO, a tip: This <a href=\"https://webhook.site\" rel=\"nofollow noreferrer\">site</a> let you test your requests (oh, and don't forget to remove the s of http, lol)</p>\n\n<pre><code>a = HTTPClient.new({proxy: \"http://webhook.site/052626ab-3128-41c5-a5a5-799a2f5ecd94\", header: \"Content-type:application/json\"})\na.post(\"http://webhook.site/052626ab-3128-41c5-a5a5-799a2f5ecd94\",{\"msg\": \"olar\"})\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 124, "user_id": 411795, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e64721cde675cb002a74b98fbfdca84?s=128&d=identicon&r=PG", "display_name": "Salz", "link": "https://stackoverflow.com/users/411795/salz"}, "is_accepted": false, "score": 0, "last_activity_date": 1522160086, "creation_date": 1522160086, "answer_id": 49515277, "question_id": 49514934, "link": "https://stackoverflow.com/questions/49514934/ruby-httpclient-set-content-type-to-json/49515277#49515277", "title": "Ruby HTTPClient set content_type to json", "body": "<p>use either:</p>\n\n<pre><code>require 'httpclient'\nHTTPClient.new.get('https://jsonplaceholder.typicode.com/photos', nil, ['Accept', 'application/json; charset=utf-8'])\n</code></pre>\n\n<p>or</p>\n\n<pre><code>require 'httpclient'\nJSONClient.new.get('https://jsonplaceholder.typicode.com/photos')\n</code></pre>\n"}], "owner": {"reputation": 4039, "user_id": 2954587, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/9faba4c8f1437084ee1b2b976eeadaa3?s=128&d=identicon&r=PG&f=1", "display_name": "user2954587", "link": "https://stackoverflow.com/users/2954587/user2954587"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 804, "favorite_count": 0, "accepted_answer_id": 49515132, "answer_count": 3, "score": 0, "last_activity_date": 1522160086, "creation_date": 1522159144, "question_id": 49514934, "link": "https://stackoverflow.com/questions/49514934/ruby-httpclient-set-content-type-to-json", "title": "Ruby HTTPClient set content_type to json", "body": "<p>How can I set the content type of JSON for <a href=\"http://www.rubydoc.info/gems/httpclient/HTTPClient\" rel=\"nofollow noreferrer\">HTTPClient</a>? This is an embarassingly simple question but I can't seem to find a headers hash to use. The other option I see is <a href=\"http://www.rubydoc.info/gems/httpclient/JSONClient\" rel=\"nofollow noreferrer\">JSONClient</a> but I'm not sure how to access the object as I get the error <code>NameError: uninitialized constant JSONClient</code>. </p>\n\n<p>My gemfile is <code>gem 'httpclient'</code></p>\n"}, {"tags": ["ruby", "logstash"], "answers": [{"tags": [], "owner": {"reputation": 16219, "user_id": 2785358, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JegPt.jpg?s=128&g=1", "display_name": "Alcanzar", "link": "https://stackoverflow.com/users/2785358/alcanzar"}, "is_accepted": true, "score": 0, "last_activity_date": 1522174148, "creation_date": 1522174148, "answer_id": 49519733, "question_id": 49513978, "link": "https://stackoverflow.com/questions/49513978/logstash-ruby-filter-to-parse-json-and-get-key-field-as-a-value/49519733#49519733", "title": "Logstash ruby filter to parse json and get key field as a value", "body": "<p>Generally errors like this are caused when you receive events that don't have the field you are trying to de-reference present.  If you surround your ruby filter with:</p>\n\n<pre><code>if [json] {\n// ruby filter here\n}\n</code></pre>\n\n<p>the error will likely go away.  Even if your source data always has the value populated, I've run into situations where you get events that you might not be expecting in the filter.</p>\n"}], "owner": {"reputation": 5, "user_id": 4197097, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe3553d992212df7daf3150d12ec2bf5?s=128&d=identicon&r=PG&f=1", "display_name": "Darshan", "link": "https://stackoverflow.com/users/4197097/darshan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1259, "favorite_count": 0, "accepted_answer_id": 49519733, "answer_count": 1, "score": 0, "last_activity_date": 1522174148, "creation_date": 1522156713, "question_id": 49513978, "link": "https://stackoverflow.com/questions/49513978/logstash-ruby-filter-to-parse-json-and-get-key-field-as-a-value", "title": "Logstash ruby filter to parse json and get key field as a value", "body": "<p>Hi my logstash ruby filter code is as below.</p>\n\n<pre><code>ruby {\n    code =&gt; \"jsondata = event.get('[json]')\n           puts jsondata\n           jsondata.to_hash\n           jsondata.each { |key, value|\n               puts key\n               puts value\n               event.set(['json']['#{key}']['command_ip'], key)\n           }\n        \"\n}\n</code></pre>\n\n<p>and my json string is </p>\n\n<pre><code>{\n\"182.1xx.xx.xx\": {\n    \"status\": \"Failed\",\n    \"result\": \"Error String\"\n},\n\"192.1xx.xx.xx\": {\n    \"status\": \"Success\"\n}\n}\n</code></pre>\n\n<p>I need final result should be like this. how to insert the key value to inside the json block. </p>\n\n<pre><code>{\n\"182.1xx.xx.xx\": {\n    \"host\"   : \"182.1xx.xx.xx\"\n    \"status\": \"Failed\",\n    \"result\": \"Error String\"\n},\n\"192.1xx.xx.xx\": {\n    \"host\"   : \"192.1xx.xx.xx\"\n    \"status\": \"Success\"\n}\n}\n</code></pre>\n\n<p>But when i try to insert the host value that i can extracted from the json key its throwing me exception as \"Ruby exception occurred: no implicit conversion of String into Integer\".</p>\n\n<p>please help me to fix out this thanks.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5", "cancan"], "comments": [{"owner": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "edited": false, "score": 1, "creation_date": 1522155896, "post_id": 49513572, "comment_id": 86031945, "body": "Could you t show what fields has <code>User</code> model?"}, {"owner": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "edited": false, "score": 0, "creation_date": 1522156097, "post_id": 49513572, "comment_id": 86032114, "body": "And the DB fields?"}], "answers": [{"comments": [{"owner": {"reputation": 106, "user_id": 9381757, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/ac80c2bed5a456bba446c380321bce60?s=128&d=identicon&r=PG&f=1", "display_name": "kart-able", "link": "https://stackoverflow.com/users/9381757/kart-able"}, "edited": false, "score": 0, "creation_date": 1522158931, "post_id": 49514141, "comment_id": 86034467, "body": "I have tried user.admin? and the other possibilities to check with your solution. A good thing is I have no more &#39;undefined method&#39; alerts but I get redirected to the home page. A puts in the if condition to detect admin user doesn&#39;t show any return in the console."}, {"owner": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "reply_to_user": {"reputation": 106, "user_id": 9381757, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/ac80c2bed5a456bba446c380321bce60?s=128&d=identicon&r=PG&f=1", "display_name": "kart-able", "link": "https://stackoverflow.com/users/9381757/kart-able"}, "edited": false, "score": 0, "creation_date": 1522159443, "post_id": 49514141, "comment_id": 86034874, "body": "Could you post the code that causes redirects? Plus - do you use two models for admin and for users? Is is possible that <code>current_user</code> is an instance of <code>AdminUser</code>?"}, {"owner": {"reputation": 106, "user_id": 9381757, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/ac80c2bed5a456bba446c380321bce60?s=128&d=identicon&r=PG&f=1", "display_name": "kart-able", "link": "https://stackoverflow.com/users/9381757/kart-able"}, "edited": false, "score": 0, "creation_date": 1522160201, "post_id": 49514141, "comment_id": 86035510, "body": "I&#39;ve just added the redirection above. As for your question, I don&#39;t know. I realize that the tutorials don&#39;t mention adding the definition of admin in the model(s)!"}, {"owner": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "reply_to_user": {"reputation": 106, "user_id": 9381757, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/ac80c2bed5a456bba446c380321bce60?s=128&d=identicon&r=PG&f=1", "display_name": "kart-able", "link": "https://stackoverflow.com/users/9381757/kart-able"}, "edited": false, "score": 0, "creation_date": 1522161281, "post_id": 49514141, "comment_id": 86036424, "body": "So you probably need to add a new field to <code>User</code> model (e.g. <code>is_admin</code>), set it to true for admins and the check it in an <code>admin?</code> method."}], "tags": [], "owner": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "is_accepted": true, "score": 2, "last_activity_date": 1522157150, "creation_date": 1522157150, "answer_id": 49514141, "question_id": 49513572, "link": "https://stackoverflow.com/questions/49513572/undefined-method-admin-with-cancan/49514141#49514141", "title": "undefined method `admin?&#39; with Cancan", "body": "<p>It seems that you have two separate models - one for regular users (<code>users</code> table) and another one for admin (<code>admin_users</code> table). You can add <code>admin?</code> method to both of them - for users returning false and for admin - true.</p>\n\n<pre><code>class User &lt; ApplicationRecord\n  # ...\n  def admin?\n    false\n  end\nend\n\nclass AdminUser &lt; ApplicationRecord\n  # ...\n  def admin?\n    true\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 106, "user_id": 9381757, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/ac80c2bed5a456bba446c380321bce60?s=128&d=identicon&r=PG&f=1", "display_name": "kart-able", "link": "https://stackoverflow.com/users/9381757/kart-able"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 471, "favorite_count": 0, "accepted_answer_id": 49514141, "answer_count": 1, "score": 2, "last_activity_date": 1522234529, "creation_date": 1522155607, "last_edit_date": 1522234529, "question_id": 49513572, "link": "https://stackoverflow.com/questions/49513572/undefined-method-admin-with-cancan", "title": "undefined method `admin?&#39; with Cancan", "body": "<p>I have a problem finding out how to check for admin rights in CanCanCan.</p>\n\n<p>With</p>\n\n<ul>\n<li><code>if user.admin?</code> I get undefined method</li>\n<li><code>if user.is?</code> I get undefined method</li>\n<li><code>if user.has_attribute?(:admin)</code></li>\n<li><code>if user.user_type == \"admin\"</code> I get undefined method</li>\n</ul>\n\n<p>I had some hopes with has_attribute, but it does not help, even if I get no alert. A <code>puts 'hey'</code> proves it in the console.</p>\n\n<p>I started learning Rails a month ago and I experienced some limitations due to windows. Is it possible that my problem occurs because of windows?</p>\n\n<blockquote>\n  <p>On the other hand, <code>if user.present?</code> works and it gives some hopes again.</p>\n</blockquote>\n\n<p>My user model:</p>\n\n<pre><code>class User &lt; ApplicationRecord\n  # Include default devise modules. Others available are:\n  # :confirmable, :lockable, :timeoutable and :omniauthable\n  devise :database_authenticatable, :registerable,\n         :recoverable, :rememberable, :trackable, :validatable\n  has_many :posts, dependent: :destroy\n\nend\n</code></pre>\n\n<p>And the DB fields</p>\n\n<pre><code>  create_table \"active_admin_comments\", force: :cascade do |t|\n    t.string \"namespace\"\n    t.text \"body\"\n    t.string \"resource_type\"\n    t.integer \"resource_id\"\n    t.string \"author_type\"\n    t.integer \"author_id\"\n    t.datetime \"created_at\", null: false\n    t.datetime \"updated_at\", null: false\n    t.index [\"author_type\", \"author_id\"], name: \"index_active_admin_comments_on_author_type_and_author_id\"\n    t.index [\"namespace\"], name: \"index_active_admin_comments_on_namespace\"\n    t.index [\"resource_type\", \"resource_id\"], name: \"index_active_admin_comments_on_resource_type_and_resource_id\"\n  end\n\n  create_table \"admin_users\", force: :cascade do |t|\n    t.string \"email\", default: \"\", null: false\n    t.string \"encrypted_password\", default: \"\", null: false\n    t.string \"reset_password_token\"\n    t.datetime \"reset_password_sent_at\"\n    t.datetime \"remember_created_at\"\n    t.integer \"sign_in_count\", default: 0, null: false\n    t.datetime \"current_sign_in_at\"\n    t.datetime \"last_sign_in_at\"\n    t.string \"current_sign_in_ip\"\n    t.string \"last_sign_in_ip\"\n    t.datetime \"created_at\", null: false\n    t.datetime \"updated_at\", null: false\n    t.index [\"email\"], name: \"index_admin_users_on_email\", unique: true\n    t.index [\"reset_password_token\"], name: \"index_admin_users_on_reset_password_token\", unique: true\n  end\n\n  create_table \"posts\", force: :cascade do |t|\n    t.string \"title\"\n    t.text \"body\"\n    t.datetime \"created_at\", null: false\n    t.datetime \"updated_at\", null: false\n    t.string \"image_file_name\"\n    t.string \"image_content_type\"\n    t.integer \"image_file_size\"\n    t.datetime \"image_updated_at\"\n    t.integer \"author_id\"\n  end\n\n  create_table \"users\", force: :cascade do |t|\n    t.string \"email\", default: \"\", null: false\n    t.string \"encrypted_password\", default: \"\", null: false\n    t.string \"reset_password_token\"\n    t.datetime \"reset_password_sent_at\"\n    t.datetime \"remember_created_at\"\n    t.integer \"sign_in_count\", default: 0, null: false\n    t.datetime \"current_sign_in_at\"\n    t.datetime \"last_sign_in_at\"\n    t.string \"current_sign_in_ip\"\n    t.string \"last_sign_in_ip\"\n    t.datetime \"created_at\", null: false\n    t.datetime \"updated_at\", null: false\n    t.index [\"email\"], name: \"index_users_on_email\", unique: true\n    t.index [\"reset_password_token\"], name: \"index_users_on_reset_password_token\", unique: true\n  end\n</code></pre>\n\n<p>From application_controller.rb</p>\n\n<pre><code>def access_denied(exception)\n    respond_to do |format|\n      format.json { head :forbidden, content_type: 'text/html' }\n      format.html { redirect_to main_app.root_url, notice: exception.message }\n   end\nend \n</code></pre>\n\n<p>EDIT</p>\n\n<blockquote>\n  <p>I thought for a while that the code suggested by @mrzasa would bring a solution as I had no more alert. This was because of my ability.rb :</p>\n</blockquote>\n\n<pre><code>if user.present?\n  if user.admin?\n    puts 'hey admin'\n    can :manage, :all\n  end\n  can :read, all\n  can :manage, Post, :author_id =&gt; user.id\n    puts 'hey user'\nend\n</code></pre>\n\n<blockquote>\n  <p>If I comment <code># if user.present?</code> the alert <code>undefined method 'admin?'</code>comes back again. A proof that user.present works, but here to say that there is no user, until I log in outside of the admin panel as a user and then I can see the puts in the console. But I can't perform any action, unless I state <code>can :manage, :all</code> to ANY user.</p>\n</blockquote>\n\n<p>At this stage, I've added <code>user ||= User.new</code> to create an instance of user before checking for an admin. Even if I allow any visitor to log in as an admin, user.admin? is never verified, unless I set <code>def admin?</code> to true in user.rb </p>\n\n<p>I see that many people using Cancancan define roles instead. Maybe I should go for it...</p>\n\n<p>EDIT 2</p>\n\n<blockquote>\n  <p>It works! I worked on it again from the install of Cancancan to the point where I was with the additions of @mrzasa. This time, active admin understands admin? from the class AdminUser which was not the case yesterday. The beautiful thing is that I did not change any line of code, except commenting <code># user ||= User.new</code> to get the expected results. </p>\n</blockquote>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 2395, "user_id": 1626261, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/v6cN0.jpg?s=128&g=1", "display_name": "Sonalkumar sute", "link": "https://stackoverflow.com/users/1626261/sonalkumar-sute"}, "edited": false, "score": 0, "creation_date": 1522155193, "post_id": 49513322, "comment_id": 86031390, "body": "which OS you have?"}, {"owner": {"reputation": 743, "user_id": 9558225, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ME97i.jpg?s=128&g=1", "display_name": "Neeraj Amoli", "link": "https://stackoverflow.com/users/9558225/neeraj-amoli"}, "reply_to_user": {"reputation": 2395, "user_id": 1626261, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/v6cN0.jpg?s=128&g=1", "display_name": "Sonalkumar sute", "link": "https://stackoverflow.com/users/1626261/sonalkumar-sute"}, "edited": false, "score": 0, "creation_date": 1522155488, "post_id": 49513322, "comment_id": 86031623, "body": "i am using ubuntu 16.04"}, {"owner": {"reputation": 6207, "user_id": 5117953, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/Ca0RW.jpg?s=128&g=1", "display_name": "Vishal", "link": "https://stackoverflow.com/users/5117953/vishal"}, "edited": false, "score": 0, "creation_date": 1522155578, "post_id": 49513322, "comment_id": 86031694, "body": "@NeerajAmoli Can you please add whole error log in question ?"}, {"owner": {"reputation": 743, "user_id": 9558225, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ME97i.jpg?s=128&g=1", "display_name": "Neeraj Amoli", "link": "https://stackoverflow.com/users/9558225/neeraj-amoli"}, "edited": false, "score": 0, "creation_date": 1522155948, "post_id": 49513322, "comment_id": 86031990, "body": "Makefile:197: recipe for target &#39;ossl_rand.o&#39; failed make[1]: *** [ossl_rand.o] Error 1 Makefile:197: recipe for target &#39;ossl_bio.o&#39; failed make[1]: *** [ossl_bio.o] Error 1 make[1]: Leaving directory &#39;/home/yasar/.rvm/src/ruby-1.8.7-p374/ext/openssl&#39; Makefile:293: recipe for target &#39;all&#39; failed make: *** [all] Error 1 +++ return 2"}, {"owner": {"reputation": 6207, "user_id": 5117953, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/Ca0RW.jpg?s=128&g=1", "display_name": "Vishal", "link": "https://stackoverflow.com/users/5117953/vishal"}, "edited": false, "score": 0, "creation_date": 1522156189, "post_id": 49513322, "comment_id": 86032177, "body": "@NeerajAmoli add this log in your question, please update your question with full error log"}, {"owner": {"reputation": 743, "user_id": 9558225, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ME97i.jpg?s=128&g=1", "display_name": "Neeraj Amoli", "link": "https://stackoverflow.com/users/9558225/neeraj-amoli"}, "edited": false, "score": 0, "creation_date": 1522156446, "post_id": 49513322, "comment_id": 86032395, "body": "<a href=\"https://drive.google.com/file/d/1hk3XqwJ_wuzR9hUvAh3VnNr98yCwiOvR/view?usp=sharing\" rel=\"nofollow noreferrer\">drive.google.com/file/d/1hk3XqwJ_wuzR9hUvAh3VnNr98yCwiOvR/&hellip;</a>"}, {"owner": {"reputation": 2395, "user_id": 1626261, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/v6cN0.jpg?s=128&g=1", "display_name": "Sonalkumar sute", "link": "https://stackoverflow.com/users/1626261/sonalkumar-sute"}, "edited": false, "score": 0, "creation_date": 1522156453, "post_id": 49513322, "comment_id": 86032404, "body": "@NeerajAmoli- try <code>rvm pkg install openssl</code> and then  force install ruby <code>rvm reinstall 1.8.7 --force -C --with-openssl-dir=$HOME&#47;.rvm&#47;usr</code>"}, {"owner": {"reputation": 743, "user_id": 9558225, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ME97i.jpg?s=128&g=1", "display_name": "Neeraj Amoli", "link": "https://stackoverflow.com/users/9558225/neeraj-amoli"}, "reply_to_user": {"reputation": 2395, "user_id": 1626261, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/v6cN0.jpg?s=128&g=1", "display_name": "Sonalkumar sute", "link": "https://stackoverflow.com/users/1626261/sonalkumar-sute"}, "edited": false, "score": 0, "creation_date": 1522159116, "post_id": 49513322, "comment_id": 86034626, "body": "@Sonalkumar sute  now this error comming Error running &#39;__rvm_with ruby-1.8.7-head gemset_pristine&#39; it saying you need to fix this gem manually . should i install it like this gem install pristine ?"}, {"owner": {"reputation": 1596, "user_id": 768635, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ebff4f2dd33516a86ccdc11c7f13edf9?s=128&d=identicon&r=PG", "display_name": "lloydpick", "link": "https://stackoverflow.com/users/768635/lloydpick"}, "edited": false, "score": 0, "creation_date": 1522166187, "post_id": 49513322, "comment_id": 86040236, "body": "What does running <code>rvm requirements</code> do?"}, {"owner": {"reputation": 743, "user_id": 9558225, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ME97i.jpg?s=128&g=1", "display_name": "Neeraj Amoli", "link": "https://stackoverflow.com/users/9558225/neeraj-amoli"}, "reply_to_user": {"reputation": 1596, "user_id": 768635, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ebff4f2dd33516a86ccdc11c7f13edf9?s=128&d=identicon&r=PG", "display_name": "lloydpick", "link": "https://stackoverflow.com/users/768635/lloydpick"}, "edited": false, "score": 0, "creation_date": 1522213749, "post_id": 49513322, "comment_id": 86058571, "body": "@lloydpick it says, requirements installation successfull."}], "owner": {"reputation": 743, "user_id": 9558225, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ME97i.jpg?s=128&g=1", "display_name": "Neeraj Amoli", "link": "https://stackoverflow.com/users/9558225/neeraj-amoli"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 179, "favorite_count": 2, "answer_count": 0, "score": 2, "last_activity_date": 1522165213, "creation_date": 1522154987, "last_edit_date": 1522165213, "question_id": 49513322, "link": "https://stackoverflow.com/questions/49513322/ruby-1-8-7-is-not-installing-through-rvm", "title": "Ruby 1.8.7 is not installing through RVM", "body": "<p>I am trying to install ruby  version 1.8.7 through Rvm, but can't installed this version and getting following error </p>\n\n<pre><code>Error running '__rvm_make -j4',\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 3467, "user_id": 906511, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/61286bced0ae2da15261439d1bb62297?s=128&d=identicon&r=PG", "display_name": "lcguida", "link": "https://stackoverflow.com/users/906511/lcguida"}, "edited": false, "score": 0, "creation_date": 1522151174, "post_id": 49512037, "comment_id": 86028308, "body": "What do have so far? What are your models? With which attributes?"}, {"owner": {"reputation": 710, "user_id": 3685411, "user_type": "registered", "accept_rate": 82, "profile_image": "https://graph.facebook.com/651824110/picture?type=large", "display_name": "Snoobie", "link": "https://stackoverflow.com/users/3685411/snoobie"}, "edited": false, "score": 0, "creation_date": 1522151279, "post_id": 49512037, "comment_id": 86028392, "body": "You need to search with attribute by filter ? O search a simple string inside DB ?"}, {"owner": {"reputation": 2193, "user_id": 7435814, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df7bf4e466073c2af1e8f41f1f27a0e8?s=128&d=identicon&r=PG", "display_name": "alex kucksdorf", "link": "https://stackoverflow.com/users/7435814/alex-kucksdorf"}, "edited": false, "score": 0, "creation_date": 1522151343, "post_id": 49512037, "comment_id": 86028434, "body": "If you are using <code>ActiveRecord</code>, which I&#39;m assuming you do, checkout <a href=\"http://guides.rubyonrails.org/active_record_basics.html#read\" rel=\"nofollow noreferrer\">this overview</a> and this <a href=\"http://guides.rubyonrails.org/active_record_querying.html\" rel=\"nofollow noreferrer\">detailed explaination</a> for further information about querying."}, {"owner": {"reputation": 31, "user_id": 9550906, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e150d63ba0d5d5567b320548284d53b?s=128&d=identicon&r=PG&f=1", "display_name": "absolado", "link": "https://stackoverflow.com/users/9550906/absolado"}, "edited": false, "score": 0, "creation_date": 1522152163, "post_id": 49512037, "comment_id": 86029037, "body": "Here&#39;s a little recipe of my index.html.erb (show above). How the search should work: Type something into it (surname, room_id (you should get all results related to the room_id and so on)) and get a new view of the search results."}, {"owner": {"reputation": 6207, "user_id": 5117953, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/Ca0RW.jpg?s=128&g=1", "display_name": "Vishal", "link": "https://stackoverflow.com/users/5117953/vishal"}, "edited": false, "score": 0, "creation_date": 1522156705, "post_id": 49512037, "comment_id": 86032619, "body": "@absolado Please take look at my this answer <a href=\"https://stackoverflow.com/a/44816633/5117953\">stackoverflow.com/a/44816633/5117953</a>"}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 6259888, "user_type": "registered", "profile_image": "https://graph.facebook.com/1104047736307430/picture?type=large", "display_name": "Neeraj Kumar", "link": "https://stackoverflow.com/users/6259888/neeraj-kumar"}, "is_accepted": false, "score": 0, "last_activity_date": 1522160974, "last_edit_date": 1522160974, "creation_date": 1522153848, "answer_id": 49512897, "question_id": 49512037, "link": "https://stackoverflow.com/questions/49512037/ruby-on-rails-search-for-database-items-students/49512897#49512897", "title": "Ruby on Rails: Search for database items (students)", "body": "<p>You should create a <code>StudentsController</code> and add a search method in it to search for the students.</p>\n\n<p>eg. below <code>search</code> method will search students on the basis of name</p>\n\n<pre><code>class StudentsController &lt; ApplicationController\n  def search  \n    @students = Student.where(name: params[:name])  \n  end\nend\n</code></pre>\n\n<p>And in routes</p>\n\n<pre><code>resources :students do  \n  collection do\n    get :search  \n  end  \nend\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 9550906, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e150d63ba0d5d5567b320548284d53b?s=128&d=identicon&r=PG&f=1", "display_name": "absolado", "link": "https://stackoverflow.com/users/9550906/absolado"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 79, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1539085465, "creation_date": 1522151098, "last_edit_date": 1539085465, "question_id": 49512037, "link": "https://stackoverflow.com/questions/49512037/ruby-on-rails-search-for-database-items-students", "title": "Ruby on Rails: Search for database items (students)", "body": "<p>I have 2 questions.</p>\n\n<p>I want to add a search to my database. All items of my database are shown at the main page, there's a list where you can see all of the students. Can anyone tell me how I can add a function to my search? Where should I start, what should I create? And can you also tell me what any of that steps are doing? And how can I display the search results?</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>  &lt;p class=\"lead\"&gt;Student management at a glance.\r\n      &lt;form class=\"form-inline my-2 my-lg-0\"&gt;\r\n        &lt;!-- Search should be here --&gt;\r\n    &lt;/form&gt;\r\n  &lt;/div&gt;\r\n&lt;/div&gt;\r\n&lt;/div&gt;\r\n\r\n&lt;!-- Student Summary --&gt;\r\n  &lt;div class=\"row justify-content-md-center\"&gt;\r\n    &lt;div class=\"col-12\"&gt;\r\n      &lt;div class=\"card\"&gt;\r\n        &lt;div class=\"card-header\"&gt;\r\n          &lt;i class=\"fas fa-graduation-cap\"&gt;&lt;/i&gt; Students\r\n          &lt;div class=\"btn-group float-right\"&gt;\r\n            &lt;%= link_to new_student_path, :class =&gt; \"btn btn-outline-dark btn-sm\" do %&gt;\r\n            &lt;i class=\"fa fa-plus fa-fw\"&gt;&lt;/i&gt;\r\n            New\r\n            &lt;% end %&gt;\r\n          &lt;/div&gt;\r\n        &lt;/div&gt;\r\n          &lt;table class=\"table table-hover\"&gt;\r\n            &lt;thead class=\"thead\"&gt;\r\n              &lt;tr&gt;\r\n                &lt;th scope=\"col\"&gt;&lt;div class=\"btn btn-fhg-0\"&gt;&lt;i class=\"fas fa-hashtag\"&gt;&lt;/div&gt;&lt;/i&gt;&lt;/th&gt;\r\n                &lt;th scope=\"col\"&gt;&lt;div class=\"btn btn-fhg-0\"&gt;&lt;%= sort_link \"surname\", \"Name, Surname\" %&gt;&lt;/div&gt;&lt;/th&gt;\r\n                &lt;th scope=\"col\"&gt;&lt;div class=\"btn btn-fhg-0\"&gt;&lt;%= sort_link \"room_id\", \"Room\" %&gt;&lt;/div&gt;&lt;/th&gt;\r\n                &lt;th scope=\"col\"&gt;&lt;div class=\"btn btn-fhg-0\"&gt;&lt;%= sort_link \"harddrive_id\", \"Hard Drive\" %&gt;&lt;/div&gt;&lt;/th&gt;\r\n&lt;th scope=\"col\"&gt;&lt;div class=\"btn btn-fhg-0\"&gt;&lt;%= sort_link \"key_id\", \"Key\" %&gt;&lt;/div&gt;&lt;/th&gt;\r\n            &lt;th scope=\"col\"&gt;&lt;div class=\"btn btn-fhg-0\"&gt;&lt;%= sort_link \"os\", \"OS\" %&gt;&lt;/div&gt;&lt;/th&gt;\r\n            &lt;th scope=\"col\"&gt;&lt;div class=\"btn btn-fhg-0\"&gt;&lt;%= sort_link \"manager\" %&gt;&lt;/div&gt;&lt;/th&gt;\r\n            &lt;th scope=\"col\"&gt;&lt;div class=\"btn btn-fhg-0\"&gt;&lt;%= sort_link \"pawn\" %&gt;&lt;/div&gt;&lt;/th&gt;\r\n            &lt;th scope=\"col\"&gt;&lt;div class=\"btn btn-fhg-0\"&gt;&lt;%= sort_link \"eol\", \"EOL\" %&gt;&lt;/div&gt;&lt;/th&gt;\r\n            &lt;th scope=\"col\"&gt;&lt;div class=\"btn btn-fhg-0\"&gt;&lt;%= sort_link \"comment\" %&gt;&lt;/div&gt;&lt;/th&gt;\r\n            &lt;th scope=\"col\"&gt;&lt;div class=\"btn btn-fhg-0\"&gt;&lt;i class=\"fas fa-bars\"&gt;&lt;/i&gt;&lt;/div&gt;&lt;/i&gt;&lt;/th&gt;\r\n          &lt;/tr&gt;\r\n        &lt;/thead&gt;\r\n        &lt;tbody&gt;\r\n          &lt;% counter = 1 %&gt;\r\n          &lt;% @students.each do |student| %&gt;\r\n          &lt;tr&gt;\r\n            &lt;td class=\"align-middle\"&gt;&lt;%= counter %&gt;&lt;/td&gt;\r\n            &lt;td class=\"align-middle\"&gt;&lt;%= student.to_s %&gt;&lt;/td&gt;\r\n            &lt;td class=\"align-middle\"&gt;&lt;%= Room.find(student.room_id).to_s %&gt;&lt;/td&gt;\r\n            &lt;td class=\"align-middle\"&gt;&lt;%= student.harddrive %&gt;&lt;/td&gt;\r\n            &lt;td class=\"align-middle\"&gt;&lt;%= student.key %&gt;&lt;/td&gt;\r\n            &lt;td class=\"align-middle\"&gt;&lt;%= student.os.capitalize %&gt;&lt;/td&gt;\r\n            &lt;td class=\"align-middle\"&gt;&lt;%= student.manager %&gt;&lt;/td&gt;\r\n            &lt;td class=\"align-middle\"&gt;&lt;%= student.pawn ? 'Paid' : 'Not paid' %&gt;&lt;/td&gt;\r\n            &lt;td class=\"align-middle\"&gt;&lt;%= student.eol.strftime(\"%d.%m.%Y\") %&gt;&lt;/td&gt;\r\n            &lt;td class=\"align-middle\" data-toggle=\"popover\" title=\"&lt;%= student.to_s %&gt;\" data-content=\"&lt;%= student.comment %&gt;\"&gt;&lt;%= truncate(student.comment, length: 30, separator: ' ') %&gt;&lt;/td&gt;\r\n            &lt;td&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>I also want to list the amount of items of a category I have saved in my database. As example:</p>\n\n<p>There are 50 students, 60 hard drives, 70 keys and 80 rooms.\nIs it possible to list the exact amount of items on my page? Something like </p>\n\n<pre><code>&lt;h1&gt;There are &lt;%= amount of students %&gt; total queries.&lt;/h1&gt;\n</code></pre>\n\n<p>Thanks!</p>\n"}, {"tags": ["ruby-on-rails", "json", "ruby", "neo4j", "graph-databases"], "answers": [{"tags": [], "owner": {"reputation": 561, "user_id": 204581, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3843532a5178e5486efa68ca64f66d8?s=128&d=identicon&r=PG", "display_name": "Leonhardt Wille", "link": "https://stackoverflow.com/users/204581/leonhardt-wille"}, "is_accepted": true, "score": 1, "last_activity_date": 1522239549, "creation_date": 1522239549, "answer_id": 49534355, "question_id": 49511645, "link": "https://stackoverflow.com/questions/49511645/how-to-generate-graphjson-from-neo4jactivemodel-using-jbuilder/49534355#49534355", "title": "How to generate GraphJSON from Neo4j::ActiveModel using jbuilder", "body": "<p>I found a relatively elegant solution, so just in case anyone else is looking for this:</p>\n\n<pre><code># Collect all relations into flat array\nrelations = [service.dependencies, service.dependent_services].map {|r| r.rels}.flatten\n# Collect relation into edges array\njson.edges relations.map do |edge|\n  json.source edge.start_node_id.to_s.to_i\n  json.target edge.end_node_id.to_s.to_i\n  json.caption edge.type\nend\n</code></pre>\n\n<p>Of course the second part is <code>jbuilder</code> specific, but most importantly theres the <code>.rels</code> property that holds a list of all outgoing/incoming relations.</p>\n\n<p>I'm using the <code>neo4j</code> gem @9.0.7 for this, documentation can be found here: <a href=\"https://github.com/neo4jrb/neo4j-core/wiki/Relationship\" rel=\"nofollow noreferrer\">https://github.com/neo4jrb/neo4j-core/wiki/Relationship</a></p>\n"}], "owner": {"reputation": 561, "user_id": 204581, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3843532a5178e5486efa68ca64f66d8?s=128&d=identicon&r=PG", "display_name": "Leonhardt Wille", "link": "https://stackoverflow.com/users/204581/leonhardt-wille"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 0, "accepted_answer_id": 49534355, "answer_count": 1, "score": 1, "last_activity_date": 1522933397, "creation_date": 1522149907, "last_edit_date": 1522933397, "question_id": 49511645, "link": "https://stackoverflow.com/questions/49511645/how-to-generate-graphjson-from-neo4jactivemodel-using-jbuilder", "title": "How to generate GraphJSON from Neo4j::ActiveModel using jbuilder", "body": "<p>A frontend library used to render graph data in the browser <a href=\"http://graphalchemist.github.io/Alchemy\" rel=\"nofollow noreferrer\">alchemy.js</a> requires data in the <a href=\"https://github.com/GraphAlchemist/GraphJSON\" rel=\"nofollow noreferrer\">GraphJSON</a> format, which mainly consists of a <code>nodes</code> and <code>edges</code> top-level keys.</p>\n\n<p>Consider a graph of <code>Services</code> that can have <code>dependencies</code> (and thus <code>dependent_services</code>):</p>\n\n<pre><code>class Service\n  include Neo4j::ActiveNode\n  has_many :out, :dependencies, type: :DEPENDS_ON, model_class: :Service\n  has_many :in, :dependent_services, origin: :dependencies, model_class: :Service\nend\n</code></pre>\n\n<p>Retrieving the node data in the jbuilder template works like a charm:</p>\n\n<pre><code>nodes = ([service] + service.dependencies + service.dependent_services).uniq\njson.nodes nodes do |node|\n  json.id node.id\n  json.name node.name\n  json.type node.class.to_s\n  json.url \"#{url_for(node)}.json\"\nend\n</code></pre>\n\n<p>Is there a neat way to retrieve the <strong>list of edges (Relationships)</strong> between the nodes?</p>\n"}, {"tags": ["javascript", "jquery", "ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 166, "user_id": 9405451, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/63e8346fbd71e0bb896aa99f0996801f?s=128&d=identicon&r=PG&f=1", "display_name": "JollyProgrammer", "link": "https://stackoverflow.com/users/9405451/jollyprogrammer"}, "edited": false, "score": 0, "creation_date": 1522148967, "post_id": 49511279, "comment_id": 86026748, "body": "Since he only needs one result it should be Hiding.find_by(document_id: params[:id]), but where().first does the same."}, {"owner": {"reputation": 1393, "user_id": 6206501, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JENfJ.jpg?s=128&g=1", "display_name": "Abhilash Reddy", "link": "https://stackoverflow.com/users/6206501/abhilash-reddy"}, "reply_to_user": {"reputation": 166, "user_id": 9405451, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/63e8346fbd71e0bb896aa99f0996801f?s=128&d=identicon&r=PG&f=1", "display_name": "JollyProgrammer", "link": "https://stackoverflow.com/users/9405451/jollyprogrammer"}, "edited": false, "score": 0, "creation_date": 1522149511, "post_id": 49511279, "comment_id": 86027133, "body": "@JollyProgrammer Good recommendation. Updated the answer."}], "tags": [], "owner": {"reputation": 1393, "user_id": 6206501, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JENfJ.jpg?s=128&g=1", "display_name": "Abhilash Reddy", "link": "https://stackoverflow.com/users/6206501/abhilash-reddy"}, "is_accepted": true, "score": 4, "last_activity_date": 1522149458, "last_edit_date": 1522149458, "creation_date": 1522148769, "answer_id": 49511279, "question_id": 49510950, "link": "https://stackoverflow.com/questions/49510950/rails-actionviewtemplateerror-while-removing-row-from-table-using-designate/49511279#49511279", "title": "Rails: ActionView::Template::Error while removing row from table using designated .js.erb", "body": "<pre><code>def unhide\n   @hidings = Hiding.all.page params[:page]\n   @hiding = Hiding.where(document_id: params[:id]).first\n\n   # update document and delete hiding from DB \n   search_un_hide_document(false, nil)\nend\n</code></pre>\n\n<blockquote>\n  <p>Probably you forgot to add .first for @hiding</p>\n</blockquote>\n\n<p>Edited:</p>\n\n<blockquote>\n  <p>Instead of where().first, you can also use find_by(document_id:\n  params[:id])</p>\n</blockquote>\n\n<p>find_by is defined like this</p>\n\n<pre><code>def find_by(*args)\n  where(*args).take\nend\n</code></pre>\n\n<p>Now, 'take' differs from 'first' in regards to order. first returns the first record according to the order of the primary key while take returns whatever the database spits out first.</p>\n"}], "owner": {"reputation": 399, "user_id": 4942371, "user_type": "registered", "profile_image": "https://graph.facebook.com/1108098145872549/picture?type=large", "display_name": "mareck_ste", "link": "https://stackoverflow.com/users/4942371/mareck-ste"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "accepted_answer_id": 49511279, "answer_count": 1, "score": 2, "last_activity_date": 1522150932, "creation_date": 1522147814, "last_edit_date": 1522150932, "question_id": 49510950, "link": "https://stackoverflow.com/questions/49510950/rails-actionviewtemplateerror-while-removing-row-from-table-using-designate", "title": "Rails: ActionView::Template::Error while removing row from table using designated .js.erb", "body": "<p>I <strong>need a help with removing rows from a table using jQuery</strong> in Rails 4.2. Once I click on the green button, I want to have the entire row deleted and the table refreshed. </p>\n\n<p>As for the logic, I am working with documents and users. A user is able to hide a document and attach a note to specific hiding. Therefore, I've decided to create additional model <strong>Hiding</strong>, which contains references to <strong>User</strong> and <strong>Document</strong> along with other relevant information:</p>\n\n<p><strong>hiding.rb</strong></p>\n\n<pre><code>class Hiding &lt; ActiveRecord::Base\n  belongs_to :document\n  belongs_to :user\nend\n</code></pre>\n\n<p>From the other perspective, <strong>Document</strong> and <strong>User</strong> models have the following association:  </p>\n\n<pre><code>has_one :hiding\n</code></pre>\n\n<p>After clicking the green button, the controller's <em>unhide</em> action gets called:</p>\n\n<pre><code>class Admin::HidingsController &lt; AdminController\n  authorize_resource\n\n  def index\n    @hidings = Hiding.all.page params[:page]\n  end\n\n  def unhide\n    @hidings = Hiding.all.page params[:page]\n    @hiding = Hiding.where(document_id: params[:id])\n\n    # update document and delete hiding from DB \n    search_un_hide_document(false, nil)\n  end\nend\n</code></pre>\n\n<p>However, when I want to perform deletion of table row via <strong>unhide.js.erb</strong></p>\n\n<pre><code>$('#&lt;%=@hiding.document.id%&gt;').remove()\n</code></pre>\n\n<p>the following exception is triggered:</p>\n\n<blockquote>\n  <p>ActionView::Template::Error (undefined method `document' for #Hiding::ActiveRecord_Relation:0x0000000c4508d8>)</p>\n</blockquote>\n\n<p>I've been stuck on this for some time as I am a newbie in Rails. Could not figure out, how to properly remove those rows without re-rendering entire page again, though. </p>\n\n<p>Your suggestions would be appreciated with big gratitude. Thanks in advance!</p>\n"}, {"tags": ["arrays", "ruby", "hash"], "comments": [{"owner": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "edited": false, "score": 1, "creation_date": 1522146202, "post_id": 49510350, "comment_id": 86024818, "body": "sure it is, what have you already tried?"}, {"owner": {"reputation": 3467, "user_id": 906511, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/61286bced0ae2da15261439d1bb62297?s=128&d=identicon&r=PG", "display_name": "lcguida", "link": "https://stackoverflow.com/users/906511/lcguida"}, "edited": false, "score": 0, "creation_date": 1522146948, "post_id": 49510350, "comment_id": 86025317, "body": "Agreed, show what have you already tried. Meanwhile take a look at <code>each_with_object</code> and <code>reject</code> methods from <code>Enumerable</code>module (<a href=\"https://ruby-doc.org/core-2.5.0/Enumerable.html\" rel=\"nofollow noreferrer\">ruby-doc.org/core-2.5.0/Enumerable.html</a>)"}], "answers": [{"comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 3, "creation_date": 1522147947, "post_id": 49510662, "comment_id": 86026017, "body": "Note that <code>delete</code> will mutate the hashes within <code>array</code>."}], "tags": [], "owner": {"reputation": 2418, "user_id": 1232832, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/2c492983af89b49d44250c79579a2641?s=128&d=identicon&r=PG", "display_name": "Shou Ya", "link": "https://stackoverflow.com/users/1232832/shou-ya"}, "is_accepted": false, "score": 1, "last_activity_date": 1522147005, "creation_date": 1522147005, "answer_id": 49510662, "question_id": 49510350, "link": "https://stackoverflow.com/questions/49510350/ruby-array-of-hashes-to-a-hash/49510662#49510662", "title": "Ruby Array of hashes to a Hash", "body": "<p>I'm not sure what problem you're trying to solve. This is what I come out with:</p>\n\n<pre><code>def group_by_key(array, key)\n  array.map { |x| [x.delete(key), x] }.to_h\nend\n</code></pre>\n\n<p>It works good on your example:</p>\n\n<pre><code>array = [{ a: 123, b: 'foo', c: 'bar' }, { a: 456, b: 'baz', c: 'qux' }]\ngroup_by_key(array, :a)\n#=&gt; {123=&gt;{:b=&gt;\"foo\", :c=&gt;\"bar\"}, 456=&gt;{:b=&gt;\"baz\", :c=&gt;\"qux\"}}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "is_accepted": true, "score": 2, "last_activity_date": 1522149131, "creation_date": 1522149131, "answer_id": 49511412, "question_id": 49510350, "link": "https://stackoverflow.com/questions/49510350/ruby-array-of-hashes-to-a-hash/49511412#49511412", "title": "Ruby Array of hashes to a Hash", "body": "<pre><code>array.each_with_object({}){|e, h| e = e.dup; h[e.delete(:a)] = e}\n# =&gt; {123=&gt;{:b=&gt;\"foo\", :c=&gt;\"bar\"}, 456=&gt;{:b=&gt;\"baz\", :c=&gt;\"qux\"}}\n</code></pre>\n\n<p>If you don't care about side effects:</p>\n\n<pre><code>array.each_with_object({}){|e, h| h[e.delete(:a)] = e}\n# =&gt; {123=&gt;{:b=&gt;\"foo\", :c=&gt;\"bar\"}, 456=&gt;{:b=&gt;\"baz\", :c=&gt;\"qux\"}}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 0, "last_activity_date": 1522192064, "creation_date": 1522192064, "answer_id": 49523755, "question_id": 49510350, "link": "https://stackoverflow.com/questions/49510350/ruby-array-of-hashes-to-a-hash/49523755#49523755", "title": "Ruby Array of hashes to a Hash", "body": "<p>Assuming that all elements of <code>array</code> (hashes) have a key <code>:a</code> and that <code>array</code> cannot be mutated, use <a href=\"http://ruby-doc.org/core-2.4.0/Hash.html#method-i-reject\" rel=\"nofollow noreferrer\">Hash#reject</a>:</p>\n\n<pre><code>array.each_with_object({}) { |g,h| h[g[:a]] = g.reject { |k,_| k == :a } }\n  #=&gt; {123=&gt;{:b=&gt;\"foo\", :c=&gt;\"bar\"}, 456=&gt;{:b=&gt;\"baz\", :c=&gt;\"qux\"}}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1651, "user_id": 7499455, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-pALqkvJ9LpE/AAAAAAAAAAI/AAAAAAAAATE/gXYryXAigJg/photo.jpg?sz=128", "display_name": "Ashik Salman", "link": "https://stackoverflow.com/users/7499455/ashik-salman"}, "is_accepted": false, "score": 0, "last_activity_date": 1522314328, "last_edit_date": 1522314328, "creation_date": 1522308653, "answer_id": 49550353, "question_id": 49510350, "link": "https://stackoverflow.com/questions/49510350/ruby-array-of-hashes-to-a-hash/49550353#49550353", "title": "Ruby Array of hashes to a Hash", "body": "<p>Using <a href=\"https://apidock.com/ruby/Hash/select\" rel=\"nofollow noreferrer\">Hash#select</a> method.</p>\n\n<pre><code>array.map { |v| [v.fetch(:a), v.select { |k,_| k != :a }] }.to_h\n</code></pre>\n\n<p>Exact <code>:a, :b &amp; :c</code></p>\n\n<pre><code>array.map { |v| [v.fetch(:a), v.select { |k,_| [:b, :c].include? k }] }.to_h\n</code></pre>\n\n<p>Output</p>\n\n<pre><code>{123=&gt;{:b=&gt;\"foo\", :c=&gt;\"bar\"}, 456=&gt;{:b=&gt;\"baz\", :c=&gt;\"qux\"}} \n</code></pre>\n"}], "owner": {"reputation": 353, "user_id": 1339562, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/26d8ac943a0adde28b25ad732de2beae?s=128&d=identicon&r=PG", "display_name": "Niro", "link": "https://stackoverflow.com/users/1339562/niro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 371, "favorite_count": 0, "accepted_answer_id": 49511412, "answer_count": 4, "score": 0, "last_activity_date": 1522314328, "creation_date": 1522146109, "last_edit_date": 1522148982, "question_id": 49510350, "link": "https://stackoverflow.com/questions/49510350/ruby-array-of-hashes-to-a-hash", "title": "Ruby Array of hashes to a Hash", "body": "<p>I have an array that looks something like this</p>\n\n<pre><code>array = [{ a: 123, b: 'foo', c: 'bar' }, { a: 456, b: 'baz', c: 'qux' }]\n</code></pre>\n\n<p>I would like to convert this to a hash whose keys are the values of <code>:a</code> in the hashes in <code>array</code>, and whose values consist of hashes with <code>:b</code> and <code>:c</code>.</p>\n\n<pre><code>{ 123 =&gt; { b: 'foo', c: 'bar' }, 456 =&gt; { b: 'baz', c: 'qux' } }\n</code></pre>\n\n<p>Is this doable using ruby?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rails-activestorage"], "answers": [{"comments": [{"owner": {"reputation": 12330, "user_id": 123048, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5c82e898061afc2931fc6284f2f323af?s=128&d=identicon&r=PG", "display_name": "richard", "link": "https://stackoverflow.com/users/123048/richard"}, "edited": false, "score": 0, "creation_date": 1524579250, "post_id": 49521005, "comment_id": 87024095, "body": "Is there any efficient way to use the &quot;with_attached_#{}&quot; macro using this solution?"}, {"owner": {"reputation": 24879, "user_id": 128546, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/205ede43beb3ae5dd2695d88e7929612?s=128&d=identicon&r=PG", "display_name": "George Claghorn", "link": "https://stackoverflow.com/users/128546/george-claghorn"}, "reply_to_user": {"reputation": 12330, "user_id": 123048, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5c82e898061afc2931fc6284f2f323af?s=128&d=identicon&r=PG", "display_name": "richard", "link": "https://stackoverflow.com/users/123048/richard"}, "edited": false, "score": 6, "creation_date": 1524582445, "post_id": 49521005, "comment_id": 87026512, "body": "@Richard, you can use <code>ActiveRecord::Base#includes</code> and <code>#merge</code> to define your own <code>with_attached_images</code> scope. Here\u2019s a fuller example: <a href=\"https://gist.github.com/georgeclaghorn/9baf3b9f1796eed5a983d35825b7f86c\" rel=\"nofollow noreferrer\">gist.github.com/georgeclaghorn/9baf3b9f1796eed5a983d35825b7f&zwnj;&#8203;86c</a>"}, {"owner": {"reputation": 12330, "user_id": 123048, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5c82e898061afc2931fc6284f2f323af?s=128&d=identicon&r=PG", "display_name": "richard", "link": "https://stackoverflow.com/users/123048/richard"}, "edited": false, "score": 0, "creation_date": 1524598659, "post_id": 49521005, "comment_id": 87035743, "body": "Thank you so much for the example, will try this tomorrow!"}, {"owner": {"reputation": 4014, "user_id": 1156973, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/JSL6O.gif?s=128&g=1", "display_name": "hellion", "link": "https://stackoverflow.com/users/1156973/hellion"}, "edited": false, "score": 0, "creation_date": 1546823502, "post_id": 49521005, "comment_id": 94968057, "body": "Hi @GeorgeClaghorn.  I just stumbled upon this post investigating similar needs.  I have implemented user rotate and crop functionality.  In order for it to work, those values need to be saved in the db and called by active storage on render.  Is saving additional attributes with an attachment a possible feature in future active storage versions?"}], "tags": [], "owner": {"reputation": 24879, "user_id": 128546, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/205ede43beb3ae5dd2695d88e7929612?s=128&d=identicon&r=PG", "display_name": "George Claghorn", "link": "https://stackoverflow.com/users/128546/george-claghorn"}, "is_accepted": true, "score": 36, "last_activity_date": 1522179218, "last_edit_date": 1522179218, "creation_date": 1522178878, "answer_id": 49521005, "question_id": 49510195, "link": "https://stackoverflow.com/questions/49510195/rails-5-2-active-storage-add-custom-attributes/49521005#49521005", "title": "Rails 5.2 Active Storage add custom attributes", "body": "<p>If you need to store additional data with each image and perform queries based on that data, I\u2019d recommend extracting an <code>Image</code> model that wraps an attached <code>file</code>:</p>\n\n<pre><code># app/models/project.rb\nclass Project &lt; ApplicationRecord\n  has_many :images, dependent: :destroy\nend\n</code></pre>\n\n\n\n<pre><code># app/models/image.rb\nclass Image &lt; ApplicationRecord\n  belongs_to :project\n\n  has_one_attached :file\n  delegate_missing_to :file\n\n  scope :positioned, -&gt; { order(position: :asc) }\nend\n</code></pre>\n\n\n\n<pre><code>&lt;%# app/views/projects/show.html.erb %&gt;\n&lt;% @project.images.positioned.each do |image| %&gt;\n  &lt;%= image_tag image %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>Note that the example view above causes 2N+1 queries for a project with N images (one query for the project\u2019s images, another for each image\u2019s <code>ActiveStorage::Attachment</code> record, and one more for each attached <code>ActiveStorage::Blob</code>). I deliberately avoided optimizing the number of queries for clarity\u2019s sake.</p>\n"}, {"tags": [], "owner": {"reputation": 1261, "user_id": 1072655, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1c38e4b0c87c8caec09fe6a441f3e35c?s=128&d=identicon&r=PG", "display_name": "tomb", "link": "https://stackoverflow.com/users/1072655/tomb"}, "is_accepted": false, "score": 0, "last_activity_date": 1613025271, "creation_date": 1613025271, "answer_id": 66149830, "question_id": 49510195, "link": "https://stackoverflow.com/questions/49510195/rails-5-2-active-storage-add-custom-attributes/66149830#66149830", "title": "Rails 5.2 Active Storage add custom attributes", "body": "<p>If you simply need to order the images, you could customize the filename and order the images by filename. I use the down gem which I highly recommend.</p>\n<p>For example:</p>\n<pre><code>image = Down.download(image_url)\nfilename = &quot;description-#{order}&quot;\n@object.images.attach(io: image, filename: filename)\n</code></pre>\n<p>then in your controller for @object:</p>\n<pre><code>@images = @object.images_attachments.joins(:blob).order('active_storage_blobs.filename ASC')\n</code></pre>\n<p>then in your view for @object</p>\n<pre><code>&lt;%@images.each do |image|%&gt;\n&lt;%= image_tag image%&gt;\n&lt;% end %&gt;\n</code></pre>\n"}], "owner": {"reputation": 891, "user_id": 338897, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/d988fc15e408ceea129cfb04878308cb?s=128&d=identicon&r=PG", "display_name": "paxer", "link": "https://stackoverflow.com/users/338897/paxer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6894, "favorite_count": 8, "accepted_answer_id": 49521005, "answer_count": 2, "score": 26, "last_activity_date": 1613025271, "creation_date": 1522145677, "question_id": 49510195, "link": "https://stackoverflow.com/questions/49510195/rails-5-2-active-storage-add-custom-attributes", "title": "Rails 5.2 Active Storage add custom attributes", "body": "<p>I have a model with attachments:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>class Project &lt; ApplicationRecord\n  has_many_attached :images\nend\n</code></pre>\n\n\n\n<p>When I attach and save the image I also want to save an additional custom attribute - <code>display_order</code> (integer) with the attached image. I want to use it to sort the attached images and display them in the order I specified in this custom attribute. I've reviewed ActiveStorage source code for <code>#attach</code> method as well as <code>ActiveStorage::Blob</code> model but it looks like there is no built in method to pass some custom metadata.</p>\n\n<p>I wonder, what's the idiomatic way to solve this problem with ActiveStorage? In the past I would usually just add a <code>display_order</code> attribute to the ActiveRecord model which represents my attachment and then simply use it with <code>.order(display_order: :asc)</code> query.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"tags": [], "owner": {"reputation": 1156, "user_id": 4955546, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-3ypcYA0ACXs/AAAAAAAAAAI/AAAAAAAABgY/gcCpBwKBymI/photo.jpg?sz=128", "display_name": "Sikandar Tariq", "link": "https://stackoverflow.com/users/4955546/sikandar-tariq"}, "is_accepted": true, "score": 2, "last_activity_date": 1522144796, "creation_date": 1522144796, "answer_id": 49509867, "question_id": 49509536, "link": "https://stackoverflow.com/questions/49509536/render-a-js-file-on-my-homepage/49509867#49509867", "title": "Render a js file on my homepage", "body": "<p>You are rendering html &amp; js formats in both conditions</p>\n\n<pre><code>  if current_user.name.nil?\n    format.html { render \"home\" }\n    format.js { render \"pages/js/confirmation\" }\n  else\n    format.html { render \"home\" }\n    format.js { render \"pages/js/confirmation\" }\n  end\n</code></pre>\n\n<p>but only one format will render in actual which will depend on the request to that action, if you want to render js format you might want to do something like this </p>\n\n<pre><code>link_to 'Home' home_path, remote: true\n</code></pre>\n\n<p>or maybe</p>\n\n<pre><code>  if current_user.name.nil?\n    format.js { render \"pages/js/confirmation\" }\n  else\n    format.html { render \"home\" }\n  end\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1957, "user_id": 816534, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/70bacfa0a93dfc516f0e328c8baf7010?s=128&d=identicon&r=PG", "display_name": "gdurelle", "link": "https://stackoverflow.com/users/816534/gdurelle"}, "is_accepted": false, "score": 1, "last_activity_date": 1522144935, "creation_date": 1522144935, "answer_id": 49509922, "question_id": 49509536, "link": "https://stackoverflow.com/questions/49509536/render-a-js-file-on-my-homepage/49509922#49509922", "title": "Render a js file on my homepage", "body": "<p>You need some JS code to call your home method and have it being flagged as <strong>JS</strong>.</p>\n\n<p>Otherwise it will only render the <strong>html</strong> block</p>\n\n<p>The JS link suggested by @Sikandar Tariq is one good way. (the <code>, remote: true</code> make it an ajax call)</p>\n"}], "owner": {"reputation": 487, "user_id": 7847797, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh5.googleusercontent.com/-k7pSuJNJeV4/AAAAAAAAAAI/AAAAAAAAApY/6cIE0jxiCM8/photo.jpg?sz=128", "display_name": "jacques Mesnet", "link": "https://stackoverflow.com/users/7847797/jacques-mesnet"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 33, "favorite_count": 0, "accepted_answer_id": 49509867, "answer_count": 2, "score": 0, "last_activity_date": 1522144935, "creation_date": 1522143896, "question_id": 49509536, "link": "https://stackoverflow.com/questions/49509536/render-a-js-file-on-my-homepage", "title": "Render a js file on my homepage", "body": "<p>I would like to use a js file in my homepage if the user is not completely registered to display a modal.</p>\n\n<p>To do that I wrote :</p>\n\n<pre><code>class PagesController &lt; ApplicationController\n  before_action :info_table, only: [:home]\n\n  def home  \n  end\n\n  private \n\n  def info_table\n    respond_to do |format|\n      if current_user.name.nil?\n        format.html { render \"home\" }\n        format.js { render \"pages/js/confirmation\" }\n      else\n        format.html { render \"home\" }\n        format.js { render \"pages/js/confirmation\" }\n      end\n    end\n  end\n\nend\n</code></pre>\n\n<p>`\nAnd into my confirmation.js.erb :</p>\n\n<pre><code>alert(\"this is an alert !\")\n</code></pre>\n\n<p>But nothing appeared !\nDo you have an idea of what i'm doing wrong ?</p>\n"}, {"tags": ["ruby", "bitcoin", "json-rpc", "bitcoind"], "answers": [{"comments": [{"owner": {"reputation": 87, "user_id": 8299039, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/a56020059800011bdeba95cbd6837242?s=128&d=identicon&r=PG&f=1", "display_name": "Rubz", "link": "https://stackoverflow.com/users/8299039/rubz"}, "edited": false, "score": 0, "creation_date": 1522302445, "post_id": 49507731, "comment_id": 86104892, "body": "There was an error :Traceback (most recent call last):         6: from /root/.rbenv/versions/2.5.0/bin/irb:11:in <code>&lt;main&gt;&#39;         5: from (irb):52         4: from &#47;root&#47;.rbenv&#47;versions&#47;2.5.0&#47;lib&#47;ruby&#47;2.5.0&#47;csv.rb:1289:in </code>open&#39;         3: from (irb):54:in <code>block in irb_binding&#39;         2: from (irb):54:in </code>each&#39;         1: from (irb):54:in <code>block (2 levels) in irb_binding&#39; NoMethodError (undefined method </code>&lt;&#39; for #&lt;CSV:0x0000557c853d7d70&gt; Did you mean?  &lt;&lt;)"}, {"owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "reply_to_user": {"reputation": 87, "user_id": 8299039, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/a56020059800011bdeba95cbd6837242?s=128&d=identicon&r=PG&f=1", "display_name": "Rubz", "link": "https://stackoverflow.com/users/8299039/rubz"}, "edited": false, "score": 0, "creation_date": 1522315089, "post_id": 49507731, "comment_id": 86111590, "body": "@Rubz yep I had a typo, the error even told what it was.  I fixed it, see updated answer. Thanks."}], "tags": [], "owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "is_accepted": false, "score": 0, "last_activity_date": 1522315034, "last_edit_date": 1522315034, "creation_date": 1522138681, "answer_id": 49507731, "question_id": 49507408, "link": "https://stackoverflow.com/questions/49507408/how-to-export-the-output-of-bitcoind-json-rpc-calls-using-bitcoin-ruby-interface/49507731#49507731", "title": "How to export the output of bitcoind JSON-RPC calls using bitcoin-ruby interface to a text file in tab-delimited format", "body": "<p>I assume your <code>blk</code> object is just a ruby hash at this point so you should be able to just do:</p>\n\n<pre><code>keys = %w[hash tx time difficulty]  # array of strings (keys you want)\ndata = keys.map{|key| blk[key]} # array of data from the keys\n\nrequire 'csv'\nCSV.open(\"myfile.csv\", \"w\") do |csv|\n  csv &lt;&lt; keys # keys will be header row of csv\n  data.each{|d| csv &lt;&lt; d} # loop over data and push into new row of csv\nend\n</code></pre>\n"}], "owner": {"reputation": 87, "user_id": 8299039, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/a56020059800011bdeba95cbd6837242?s=128&d=identicon&r=PG&f=1", "display_name": "Rubz", "link": "https://stackoverflow.com/users/8299039/rubz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 229, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1522315034, "creation_date": 1522137674, "question_id": 49507408, "link": "https://stackoverflow.com/questions/49507408/how-to-export-the-output-of-bitcoind-json-rpc-calls-using-bitcoin-ruby-interface", "title": "How to export the output of bitcoind JSON-RPC calls using bitcoin-ruby interface to a text file in tab-delimited format", "body": "<p>I am running the bitcoind server in Ubuntu 16.04. Also using a method of connecting to bitcoind's RPC using bitcoin-ruby:</p>\n\n<pre><code>require 'bitcoin'\nrequire 'net/http'\nrequire 'json'\nRPCUSER = \"**\"\nRPCPASSWORD = \"**\"\nHOST = \"localhost\"\nPORT= 8332\n\ndef bitcoinRPC(method,param)\n    http = Net::HTTP.new(HOST,PORT)\n    request = Net::HTTP::Post.new('/')\n    request.basic_auth(RPCUSER,RPCPASSWORD)\n    request.content_type = 'application/json'\n    request.body = {method:method,params:param,id:'jsonrpc'}.to_json\n    JSON.parse(http.request(request).body)[\"result\"]\n</code></pre>\n\n<p>end </p>\n\n<p>The following RPC commands shows the parsed data of block number 514641 :</p>\n\n<pre><code>bhash= 514641\nbid= bitcoinRPC('getblockhash',[bhash])\nbid=\"0000000000000000003b34a5f6cb571435b71449c38e54bf2cbafb7ca3800501\"\nblk= bitcoinRPC(\"getblock\",[bid])\n</code></pre>\n\n<p>And the keys inside the blk variables are as follows:</p>\n\n<pre><code>blk.keys\n[\"hash\", \"confirmations\", \"strippedsize\", \"size\", \"weight\", \"height\", \n\"version\", \"versionHex\", \"merkleroot\", \"tx\", \"time\", \"mediantime\", \"nonce\", \n\"bits\", \"difficulty\", \"chainwork\", \"previousblockhash\", \"nextblockhash\"]\n</code></pre>\n\n<p>I want to parse the key values of \"hash\" , \"tx\", \"time\", \"difficulty\" from inside the block number 514641 calculating back to block number 1 using ruby programming and parse the output to a text file in tab-delimited following format:</p>\n\n<pre><code>hash     tx      time     difficulty\n000...  12X....  2344556   5455345\n --     13X...      --     5678899\n --     14X...      --     6454545\n</code></pre>\n\n<p>Here, the \"hash\" and \"time\" will be same values for the same block. I am new to ruby programming. Any guideline will be highly appreciated.</p>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 1607, "user_id": 7804093, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pFFFH.jpg?s=128&g=1", "display_name": "Ganesh", "link": "https://stackoverflow.com/users/7804093/ganesh"}, "edited": false, "score": 0, "creation_date": 1522137802, "post_id": 49507181, "comment_id": 86018920, "body": "if you want just value of an <code>id</code> then why you are using each loop? you can get id directly by using <code>test[&#39;foo&#39;][&#39;id&#39;]</code>."}, {"owner": {"reputation": 1253, "user_id": 4733879, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5iiSX.png?s=128&g=1", "display_name": "Filnor", "link": "https://stackoverflow.com/users/4733879/filnor"}, "edited": false, "score": 1, "creation_date": 1522138432, "post_id": 49507181, "comment_id": 86019329, "body": "Rather than edit the question to add the solution, post it as answer! <a href=\"https://meta.stackoverflow.com/a/250208/4733879\">Answering your own question is not forbidden</a>, but <a href=\"https://stackoverflow.com/help/self-answer\">officially encouraged</a>. (there is even an option to answer the question directly at the <a href=\"https://stackoverflow.com/questions/ask\">Ask a Question</a> page)"}], "answers": [{"comments": [{"owner": {"reputation": 19261, "user_id": 4758119, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/F4dJY.jpg?s=128&g=1", "display_name": "Deepak Mahakale", "link": "https://stackoverflow.com/users/4758119/deepak-mahakale"}, "edited": false, "score": 2, "creation_date": 1522137285, "post_id": 49507276, "comment_id": 86018597, "body": "Please add some description"}, {"owner": {"reputation": 5241, "user_id": 1016958, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/88b80a2d90163023d2c88893c6a13491?s=128&d=identicon&r=PG", "display_name": "EastsideDev", "link": "https://stackoverflow.com/users/1016958/eastsidedev"}, "edited": false, "score": 0, "creation_date": 1522137621, "post_id": 49507276, "comment_id": 86018795, "body": "@apneadiving My question, is how do I get id from value (to use your example)"}, {"owner": {"reputation": 5241, "user_id": 1016958, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/88b80a2d90163023d2c88893c6a13491?s=128&d=identicon&r=PG", "display_name": "EastsideDev", "link": "https://stackoverflow.com/users/1016958/eastsidedev"}, "edited": false, "score": 0, "creation_date": 1522138304, "post_id": 49507276, "comment_id": 86019259, "body": "Yes, a second loop was needed. I updated the question"}], "tags": [], "owner": {"reputation": 110512, "user_id": 350087, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/808bec1c640143bd7091888d9edfb2f2?s=128&d=identicon&r=PG", "display_name": "apneadiving", "link": "https://stackoverflow.com/users/350087/apneadiving"}, "is_accepted": true, "score": 3, "last_activity_date": 1522137873, "last_edit_date": 1522137873, "creation_date": 1522137238, "answer_id": 49507276, "question_id": 49507181, "link": "https://stackoverflow.com/questions/49507181/accessing-elements-of-a-ruby-hash/49507276#49507276", "title": "Accessing elements of a ruby hash", "body": "<p>With a Hash, iteration is made through key first, then value. So have your block use what you need.</p>\n\n<pre><code>test.each do |key|\n  puts key\nend\n\ntest.each do |key, value|\n  puts key\n  puts value\nend\n</code></pre>\n\n<p>There are also</p>\n\n<pre><code>test.each_key do |key|\n  puts key\nend\n\ntest.each_value do |value|\n  puts value\nend\n</code></pre>\n\n<hr>\n\n<p>Sidenote: <code>id</code> is inside <code>test[\"foo\"]</code>, so maybe you'd need 2 loops</p>\n\n<hr>\n\n<p>To get <code>id</code> from your hash directly: </p>\n\n<pre><code>test[\"foo\"][\"id\"]\n\ntest[\"foo\"].each {|k, v| puts \"#{k}: #{v}\" }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "is_accepted": false, "score": 0, "last_activity_date": 1522138150, "last_edit_date": 1522138150, "creation_date": 1522137768, "answer_id": 49507439, "question_id": 49507181, "link": "https://stackoverflow.com/questions/49507181/accessing-elements-of-a-ruby-hash/49507439#49507439", "title": "Accessing elements of a ruby hash", "body": "<p>In your example we assume you've previously done:</p>\n\n<pre><code>test = Hash.new\n</code></pre>\n\n<p>In your example variable <code>test</code> is a hash and <code>foo</code> is a key who's value contains a hash of key values.  If you want to target those, you'll need to loop over them</p>\n\n<pre><code>test['foo'].each do |k,v|\n  puts \"my key is #{k}\"\n  puts \"it's value is {v}\nend\n</code></pre>\n\n<p>If you want to do both at the same time:</p>\n\n<pre><code>test.each do |k,v|\n  puts \"base hash key #{k}\"\n  puts \"base hash value #{v}\"\n  v.each do |kk,vv|\n    puts \"key #{kk}\"\n    puts \"value #{vv}\"\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 5241, "user_id": 1016958, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/88b80a2d90163023d2c88893c6a13491?s=128&d=identicon&r=PG", "display_name": "EastsideDev", "link": "https://stackoverflow.com/users/1016958/eastsidedev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 933, "favorite_count": 0, "accepted_answer_id": 49507276, "answer_count": 2, "score": 0, "last_activity_date": 1522138506, "creation_date": 1522136970, "last_edit_date": 1522138506, "question_id": 49507181, "link": "https://stackoverflow.com/questions/49507181/accessing-elements-of-a-ruby-hash", "title": "Accessing elements of a ruby hash", "body": "<pre><code>Ruby 2.15\n</code></pre>\n\n<p>I defined the following hash:</p>\n\n<pre><code>test = Hash.new\ntest[\"foo\"] = {\n  'id' =&gt; 5,\n  'lobbyist_id' =&gt; 19,\n  'organization_id' =&gt; 8\n}\n</code></pre>\n\n<p>If I do</p>\n\n<pre><code>test.each do |t|\n  print t[\"id\"] \nend\n</code></pre>\n\n<p>I get:</p>\n\n<pre><code>TypeError: no implicit conversion of String into Integer\n    from (irb):1571:in `[]'\n</code></pre>\n\n<p>How do I access the elements, using an each loop?</p>\n\n<h1>Answer:</h1>\n\n<pre><code>test.each do |t|\n   t.each do |t1|\n     puts t1[\"id\"]\n   end  \nend\n</code></pre>\n"}, {"tags": ["ruby", "loops", "lambda"], "answers": [{"comments": [{"owner": {"reputation": 797, "user_id": 8574922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh5.googleusercontent.com/-H7r02ZlEyhE/AAAAAAAAAAI/AAAAAAAAAPc/RiIKejtdmws/photo.jpg?sz=128", "display_name": "Dmitry Dmitriev", "link": "https://stackoverflow.com/users/8574922/dmitry-dmitriev"}, "edited": false, "score": 0, "creation_date": 1522136614, "post_id": 49506880, "comment_id": 86018192, "body": "Great. Thanks for answer, and thanks for markup. So stackoverflow automatically selects code? no need to user 3 backquotes to select code as like as at the github?"}, {"owner": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "reply_to_user": {"reputation": 797, "user_id": 8574922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh5.googleusercontent.com/-H7r02ZlEyhE/AAAAAAAAAAI/AAAAAAAAAPc/RiIKejtdmws/photo.jpg?sz=128", "display_name": "Dmitry Dmitriev", "link": "https://stackoverflow.com/users/8574922/dmitry-dmitriev"}, "edited": false, "score": 1, "creation_date": 1522136800, "post_id": 49506880, "comment_id": 86018307, "body": "You need to indent the code to have it highlighted: <a href=\"https://stackoverflow.com/editing-help#code\">stackoverflow.com/editing-help#code</a>. Btw it the answer helps you. pls consider accepting it :)"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 3, "creation_date": 1522139157, "post_id": 49506880, "comment_id": 86019786, "body": "<code>loop</code> is also commonly used with enumerators. If <code>e</code> is enumerator (that is, an instance of the class <code>Enumerator</code>), <code>e.next</code> or <code>e.peek</code> will raise a <code>StopIteration</code> exception if <code>e</code> is at its last position. <code>loop</code> will then handle the exception by breaking out of the loop."}, {"owner": {"reputation": 797, "user_id": 8574922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh5.googleusercontent.com/-H7r02ZlEyhE/AAAAAAAAAAI/AAAAAAAAAPc/RiIKejtdmws/photo.jpg?sz=128", "display_name": "Dmitry Dmitriev", "link": "https://stackoverflow.com/users/8574922/dmitry-dmitriev"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1522151629, "post_id": 49506880, "comment_id": 86028650, "body": "@CarySwoveland thank you. This is great:  <code>a = [1,2,3].each; loop {p a.next}</code>. I did not know this approach before."}], "tags": [], "owner": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "is_accepted": true, "score": 5, "last_activity_date": 1522136028, "creation_date": 1522136028, "answer_id": 49506880, "question_id": 49506671, "link": "https://stackoverflow.com/questions/49506671/ruby-loop-via-lambda-how-to-break/49506880#49506880", "title": "Ruby loop via lambda, how to break?", "body": "<p>You can raise <code>StopIteration</code> exception from the lambda:</p>\n\n<pre><code>a = 0\nlambda = -&gt;{ a += 1; puts \"#{a}\"; sleep 1; raise StopIteration if a&gt;10}\nloop &amp;lambda\np a\n</code></pre>\n\n<p><a href=\"https://apidock.com/ruby/Kernel/loop\" rel=\"noreferrer\">Docs</a> says:</p>\n\n<blockquote>\n  <p><code>loop() public</code>\n  Repeatedly executes the block.\n  If no block is given, an enumerator is returned instead.\n  (...)<code>StopIteration</code> raised in the block breaks the loop.</p>\n</blockquote>\n"}], "owner": {"reputation": 797, "user_id": 8574922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh5.googleusercontent.com/-H7r02ZlEyhE/AAAAAAAAAAI/AAAAAAAAAPc/RiIKejtdmws/photo.jpg?sz=128", "display_name": "Dmitry Dmitriev", "link": "https://stackoverflow.com/users/8574922/dmitry-dmitriev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 309, "favorite_count": 0, "accepted_answer_id": 49506880, "answer_count": 1, "score": 1, "last_activity_date": 1522136137, "creation_date": 1522135404, "last_edit_date": 1522136137, "question_id": 49506671, "link": "https://stackoverflow.com/questions/49506671/ruby-loop-via-lambda-how-to-break", "title": "Ruby loop via lambda, how to break?", "body": "<p>It is possible to create <code>dead loop</code> using lambdas in ruby:</p>\n\n<pre><code>a = 0\nlambda = -&gt;{ a += 1; puts \"#{a}\"; sleep 1}\nloop &amp;lambda\np a\n</code></pre>\n\n<p><strong>Now I'm seeking for a way how to <code>break</code> this kind of loop generated by a <code>lambda</code> transferred into block</strong>. Both apparent approaches I used to try dose not finish a loop they just exit out of the lambda, but loop still works:</p>\n\n<p><code>break</code> dose not stop a loop:</p>\n\n<pre><code>a = 0\nlambda = -&gt;{ a += 1; puts \"#{a} break\"; sleep 1; break; p \"This line will not appears\"}\nloop &amp;lambda\np a\n</code></pre>\n\n<p><code>return</code> dose not stop a loop too:</p>\n\n<pre><code>a = 0\nlambda = -&gt;{ a += 1; puts \"#{a} return\"; sleep 1; return; p \"This line will not appears\"}\nloop &amp;lambda\np a\n</code></pre>\n\n<p>If I use <code>proc</code> instead of <code>lambda</code> I able to <code>return</code> out of a loop, but also I exit out of the program:</p>\n\n<pre><code>a = 0\nprc_ = Proc.new{a += 1; puts \"#{a} proc return\"; sleep 1; return; p \"This line will not appears\"}\nloop &amp;prc_\np a\n</code></pre>\n\n<p>The same situations when I use <code>break</code> inside <code>proc</code>, I just throw away from the program with <code>LocalJumpError</code> exception.</p>\n\n<pre><code>a = 0\nprc_ = Proc.new{a += 1; puts \"#{a} proc break\"; sleep 1; break; p \"This line will not appears\"}\nloop &amp;prc_\np a\n</code></pre>\n"}, {"tags": ["ruby", "sequel"], "comments": [{"owner": {"reputation": 1582, "user_id": 787980, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/046251d17c44282a905b0bd951d72040?s=128&d=identicon&r=PG", "display_name": "Pramod Solanky", "link": "https://stackoverflow.com/users/787980/pramod-solanky"}, "edited": false, "score": 0, "creation_date": 1522135979, "post_id": 49506667, "comment_id": 86017771, "body": "Why not execute that sql in <code>#find_by_sql</code> method of rails ?"}, {"owner": {"reputation": 1213, "user_id": 3825408, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/e6a977bb7d71d35589d3cfa3738e5a46?s=128&d=identicon&r=PG&f=1", "display_name": "zombie_ghast", "link": "https://stackoverflow.com/users/3825408/zombie-ghast"}, "reply_to_user": {"reputation": 1582, "user_id": 787980, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/046251d17c44282a905b0bd951d72040?s=128&d=identicon&r=PG", "display_name": "Pramod Solanky", "link": "https://stackoverflow.com/users/787980/pramod-solanky"}, "edited": false, "score": 0, "creation_date": 1522136160, "post_id": 49506667, "comment_id": 86017888, "body": "I could use it but I need to chain more scopes. <code>find_by_sql</code> does not seem to work with sequel."}], "answers": [{"comments": [{"owner": {"reputation": 1213, "user_id": 3825408, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/e6a977bb7d71d35589d3cfa3738e5a46?s=128&d=identicon&r=PG&f=1", "display_name": "zombie_ghast", "link": "https://stackoverflow.com/users/3825408/zombie-ghast"}, "edited": false, "score": 0, "creation_date": 1522139301, "post_id": 49507164, "comment_id": 86019866, "body": "it does not change much"}, {"owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "reply_to_user": {"reputation": 1213, "user_id": 3825408, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/e6a977bb7d71d35589d3cfa3738e5a46?s=128&d=identicon&r=PG&f=1", "display_name": "zombie_ghast", "link": "https://stackoverflow.com/users/3825408/zombie-ghast"}, "edited": false, "score": 0, "creation_date": 1522139428, "post_id": 49507164, "comment_id": 86019971, "body": "what is <code>query</code> defined as in your example?  Can you paste the output of your current example and the one I posted?"}, {"owner": {"reputation": 1213, "user_id": 3825408, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/e6a977bb7d71d35589d3cfa3738e5a46?s=128&d=identicon&r=PG&f=1", "display_name": "zombie_ghast", "link": "https://stackoverflow.com/users/3825408/zombie-ghast"}, "edited": false, "score": 0, "creation_date": 1522140227, "post_id": 49507164, "comment_id": 86020500, "body": "actually I put this as second argument and put inside rest of string query and it worked: <code>.left_outer_join(:table_2, Sequel.lit(&#39;table_2.table_1_id = table_1.id AND table_2.col_1 = ? AND table_2.col_2 &gt; ?&#39;, id, date))</code>, it &#39;s cool it worked but would be nice to have more sequel-like solution"}, {"owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "reply_to_user": {"reputation": 1213, "user_id": 3825408, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/e6a977bb7d71d35589d3cfa3738e5a46?s=128&d=identicon&r=PG&f=1", "display_name": "zombie_ghast", "link": "https://stackoverflow.com/users/3825408/zombie-ghast"}, "edited": false, "score": 0, "creation_date": 1522140423, "post_id": 49507164, "comment_id": 86020646, "body": "I updated my answer, but glad you figured it out., you should post your solution too."}], "tags": [], "owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "is_accepted": false, "score": 0, "last_activity_date": 1522141723, "last_edit_date": 1522141723, "creation_date": 1522136919, "answer_id": 49507164, "question_id": 49506667, "link": "https://stackoverflow.com/questions/49506667/ruby-sequel-left-outer-join-query/49507164#49507164", "title": "Ruby Sequel left outer join query", "body": "<p>This is might be a bit cleaner:</p>\n\n<pre><code>.left_outer_join(:table_2,\n   table_2.where(table_1_id: 'table_1.id')\n          .where(col_1: id)\n          .where('col 2 &gt; ?', date)\n )\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 0, "creation_date": 1522154800, "post_id": 49508390, "comment_id": 86031102, "body": "you should be able to chain <code>AND</code> statements with <code>.where()</code> see my updated answer"}], "tags": [], "owner": {"reputation": 1213, "user_id": 3825408, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/e6a977bb7d71d35589d3cfa3738e5a46?s=128&d=identicon&r=PG&f=1", "display_name": "zombie_ghast", "link": "https://stackoverflow.com/users/3825408/zombie-ghast"}, "is_accepted": false, "score": 0, "last_activity_date": 1522140753, "creation_date": 1522140753, "answer_id": 49508390, "question_id": 49506667, "link": "https://stackoverflow.com/questions/49506667/ruby-sequel-left-outer-join-query/49508390#49508390", "title": "Ruby Sequel left outer join query", "body": "<p>I will post my own answer, but will not accept it because I think it could be done better.</p>\n\n<pre><code>.left_outer_join(:table_2, \nSequel.lit('table_2.table_1_id = table_1.id AND table_2.col_1 = ? \nAND table_2.col_2 &gt; ?', id, date))\n</code></pre>\n\n<p>So waiting for other suggestions.</p>\n"}, {"comments": [{"owner": {"reputation": 3887, "user_id": 7914637, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-x_BhuHcC8Ww/AAAAAAAAAAI/AAAAAAAAABg/hiPWIjRXbhI/photo.jpg?sz=128", "display_name": "Alexander", "link": "https://stackoverflow.com/users/7914637/alexander"}, "edited": false, "score": 0, "creation_date": 1522250220, "post_id": 49537584, "comment_id": 86083532, "body": "While this code may answer the question, providing additional context regarding <b>how</b> and/or <b>why</b> it solves the problem would improve the answer&#39;s long-term value."}], "tags": [], "owner": {"reputation": 11331, "user_id": 132053, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f183bcc4176b308c9edabe79299e448f?s=128&d=identicon&r=PG", "display_name": "Jeremy Evans", "link": "https://stackoverflow.com/users/132053/jeremy-evans"}, "is_accepted": false, "score": 1, "last_activity_date": 1522248239, "creation_date": 1522248239, "answer_id": 49537584, "question_id": 49506667, "link": "https://stackoverflow.com/questions/49506667/ruby-sequel-left-outer-join-query/49537584#49537584", "title": "Ruby Sequel left outer join query", "body": "<pre><code>.left_outer_join(:table_2, :table_1_id=&gt;:id, :col_1=&gt;id){Sequel[:table_2][:col_2] &gt; date}\n</code></pre>\n"}], "owner": {"reputation": 1213, "user_id": 3825408, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/e6a977bb7d71d35589d3cfa3738e5a46?s=128&d=identicon&r=PG&f=1", "display_name": "zombie_ghast", "link": "https://stackoverflow.com/users/3825408/zombie-ghast"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 463, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1522248239, "creation_date": 1522135382, "last_edit_date": 1522140360, "question_id": 49506667, "link": "https://stackoverflow.com/questions/49506667/ruby-sequel-left-outer-join-query", "title": "Ruby Sequel left outer join query", "body": "<p>I have a more complex query (does not work)</p>\n\n<pre><code>query.select_all(:table_1).select_more(:col_1)\n.left_outer_join(:table_2, table_1_id: :id, col_1: 1, \nSeqel.lit('col_2 &gt; ?', 1.week.ago)\n</code></pre>\n\n<p>I need to compare <code>col_2</code> like this:</p>\n\n<pre><code>\"col_2 &gt; '2018-01-01 10:10:10'\"\n</code></pre>\n\n<p>it is easy to write whole query as custom sql, but I would like to chain methods and so far I couldn't succeed in adding the above.</p>\n\n<p>expected result ~:</p>\n\n<pre><code>\"SELECT `table_1`.*, `table_2`.`col_1` FROM `table_1`\nLEFT OUTER JOIN `table_2` \nON (\n`table_2`.`table_1_id` = `table_1`.`id`\nAND\n`table_2`.`col_1` = 1 \nAND \n`table_2`.`col_2` &gt; '2018-01-01 10:10:10')\"\n</code></pre>\n\n<hr>\n\n<p>I used <code>with_sql</code> but it ignores other scopes.\nAlso I tried:</p>\n\n<pre><code> .left_outer_join(\"`table_2` ON (`table_2`.`table_1_id` =\n `table_1`.`id` AND `table_2`.`col_1` = 1 AND `table_2`.`col_2` &gt;\n '2017-09-28 06:49:53 UTC')\")\n</code></pre>\n\n<p>Problem in last one is that it wraps that whole string with extra <code>``</code></p>\n\n<hr>\n\n<p>what worked for me:</p>\n\n<pre><code>.left_outer_join(:table_2, \nSequel.lit('table_2.table_1_id = table_1.id AND table_2.col_1 = ? \nAND table_2.col_2 &gt; ?', id, date))\n</code></pre>\n\n<p>but is there a way to accomplish it without using string queries?</p>\n"}, {"tags": ["ruby"], "answers": [{"tags": [], "owner": {"reputation": 311, "user_id": 8146498, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0f48334949958c5f6a2ff9c2a6fcb745?s=128&d=identicon&r=PG", "display_name": "Ryan Stewart", "link": "https://stackoverflow.com/users/8146498/ryan-stewart"}, "is_accepted": false, "score": 0, "last_activity_date": 1522428401, "creation_date": 1522428401, "answer_id": 49578173, "question_id": 49506473, "link": "https://stackoverflow.com/questions/49506473/get-air-ticket-prices-to-show-on-website/49578173#49578173", "title": "Get air ticket prices to show on website", "body": "<p>To get airline ticket prices, you'd need an <strong>API or a web-page you can scrape from</strong>. </p>\n\n<p>Depending on what you want, you can make a list of websites you want to compile, such as American Airlines, United Airlines, etc, and scrape each one. </p>\n\n<p>Google has an airline API where you can get the prices of flights. You can see it in action <a href=\"https://rapidapi.com/serg.osipchuk/api/GoogleFlightsAPI/functions\" rel=\"nofollow noreferrer\">here.</a> Unfortunately, (I assume it's the same thing as Google QPX Express), <strong>it's being shut down April 10, 2018</strong>.</p>\n\n<p>Best bet is to use a web scraping library like <strong>Nokogiri</strong>.</p>\n"}], "owner": {"reputation": 1, "user_id": 8070397, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/018dbc4540aa2e4d3666974fe5e7b693?s=128&d=identicon&r=PG&f=1", "display_name": "Shailendra Singh", "link": "https://stackoverflow.com/users/8070397/shailendra-singh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 82, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1522428401, "creation_date": 1522134741, "last_edit_date": 1522145096, "question_id": 49506473, "link": "https://stackoverflow.com/questions/49506473/get-air-ticket-prices-to-show-on-website", "title": "Get air ticket prices to show on website", "body": "<p>How can I get all airline ticket prices? I want to show them on my website. Any free resource available? I already tried Skyscanner API, but that gives old deals.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "intercom"], "comments": [{"owner": {"reputation": 107, "user_id": 1200840, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/7772f79201c0f70d0fa895c4b20a7b55?s=128&d=identicon&r=PG", "display_name": "amarradi", "link": "https://stackoverflow.com/users/1200840/amarradi"}, "edited": false, "score": 0, "creation_date": 1522142112, "post_id": 49506339, "comment_id": 86021770, "body": "Oh i see you asked the same question at the git repo. ... wait... Maybe you have to ask in the helpcenter. I also couldn&#39;t find a change in the git repo."}, {"owner": {"reputation": 39, "user_id": 5078151, "user_type": "registered", "profile_image": "https://graph.facebook.com/1027582673948534/picture?type=large", "display_name": "Kurian Benny", "link": "https://stackoverflow.com/users/5078151/kurian-benny"}, "reply_to_user": {"reputation": 107, "user_id": 1200840, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/7772f79201c0f70d0fa895c4b20a7b55?s=128&d=identicon&r=PG", "display_name": "amarradi", "link": "https://stackoverflow.com/users/1200840/amarradi"}, "edited": false, "score": 0, "creation_date": 1522151489, "post_id": 49506339, "comment_id": 86028528, "body": "@amarradi am using create event and user data fetching functions do you know how to change API key to Access token ?"}, {"owner": {"reputation": 107, "user_id": 1200840, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/7772f79201c0f70d0fa895c4b20a7b55?s=128&d=identicon&r=PG", "display_name": "amarradi", "link": "https://stackoverflow.com/users/1200840/amarradi"}, "edited": false, "score": 0, "creation_date": 1522152560, "post_id": 49506339, "comment_id": 86029370, "body": "No I don&amp;#39;t. I&amp;#39;m only working with a &amp;quot;stock rails&amp;quot;.  I created an account a and I could imagine that you can change the API key at the site. Like Google or Facebook"}, {"owner": {"reputation": 39, "user_id": 5078151, "user_type": "registered", "profile_image": "https://graph.facebook.com/1027582673948534/picture?type=large", "display_name": "Kurian Benny", "link": "https://stackoverflow.com/users/5078151/kurian-benny"}, "reply_to_user": {"reputation": 107, "user_id": 1200840, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/7772f79201c0f70d0fa895c4b20a7b55?s=128&d=identicon&r=PG", "display_name": "amarradi", "link": "https://stackoverflow.com/users/1200840/amarradi"}, "edited": false, "score": 0, "creation_date": 1522817453, "post_id": 49506339, "comment_id": 86293555, "body": "I found that Intercom ruby needs to be updated to access token hence i replaced mu api key with access token it works fine for me and am using its for create event also."}], "answers": [{"tags": [], "owner": {"reputation": 39, "user_id": 5078151, "user_type": "registered", "profile_image": "https://graph.facebook.com/1027582673948534/picture?type=large", "display_name": "Kurian Benny", "link": "https://stackoverflow.com/users/5078151/kurian-benny"}, "is_accepted": false, "score": 0, "last_activity_date": 1523002549, "last_edit_date": 1523002549, "creation_date": 1522817517, "answer_id": 49643026, "question_id": 49506339, "link": "https://stackoverflow.com/questions/49506339/intercom-rails-api-key-to-access-token-updation/49643026#49643026", "title": "Intercom rails API key to access token updation", "body": "<p>I found that Intercom ruby needs to be updated to access token hence i replaced my api key with access token it works fine for me. I am using api  for create event and current user manager.</p>\n"}], "owner": {"reputation": 39, "user_id": 5078151, "user_type": "registered", "profile_image": "https://graph.facebook.com/1027582673948534/picture?type=large", "display_name": "Kurian Benny", "link": "https://stackoverflow.com/users/5078151/kurian-benny"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 155, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1523002549, "creation_date": 1522134263, "question_id": 49506339, "link": "https://stackoverflow.com/questions/49506339/intercom-rails-api-key-to-access-token-updation", "title": "Intercom rails API key to access token updation", "body": "<p>Hi am new to Ruby On Rails. I got an email from intercom regarding depricating API keys. Am using Intercom-rails but i didnt see any updation changes in git can any one help me thanks in advance.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "selenium", "geckodriver"], "comments": [{"owner": {"reputation": 19261, "user_id": 4758119, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/F4dJY.jpg?s=128&g=1", "display_name": "Deepak Mahakale", "link": "https://stackoverflow.com/users/4758119/deepak-mahakale"}, "edited": false, "score": 0, "creation_date": 1522127273, "post_id": 49504504, "comment_id": 86013468, "body": "Check if this helps <a href=\"https://stackoverflow.com/a/11190317/4758119\">stackoverflow.com/a/11190317/4758119</a>"}, {"owner": {"reputation": 123770, "user_id": 2830850, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e48b39b77bf324de9aeefd6c5bfc10c6?s=128&d=identicon&r=PG&f=1", "display_name": "Tarun Lalwani", "link": "https://stackoverflow.com/users/2830850/tarun-lalwani"}, "edited": false, "score": 0, "creation_date": 1522128153, "post_id": 49504504, "comment_id": 86013784, "body": "You are doing this on a server or a machine with UI/Desktop?"}, {"owner": {"reputation": 25, "user_id": 3750667, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/db63ed5fdd114c84c511cf1109cd01b5?s=128&d=identicon&r=PG&f=1", "display_name": "user3750667", "link": "https://stackoverflow.com/users/3750667/user3750667"}, "edited": false, "score": 0, "creation_date": 1522167249, "post_id": 49504504, "comment_id": 86040940, "body": "Doing it on a RHEL 7 VM, it has a UI and desktop"}], "owner": {"reputation": 25, "user_id": 3750667, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/db63ed5fdd114c84c511cf1109cd01b5?s=128&d=identicon&r=PG&f=1", "display_name": "user3750667", "link": "https://stackoverflow.com/users/3750667/user3750667"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 223, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1522127075, "creation_date": 1522125823, "last_edit_date": 1522127075, "question_id": 49504504, "link": "https://stackoverflow.com/questions/49504504/selenium-ruby-500-error", "title": "Selenium Ruby 500 error", "body": "<p>Here is my Code:</p>\n\n<pre><code>require 'selenium-webdriver'\n\nclass TestSelenium\n\n  def initialize\n    driver = Selenium::WebDriver.for :firefox\n    driver.navigate.to \"http://google.com\"\n  end\nend\n</code></pre>\n\n<p>And here is my error message:</p>\n\n<pre><code>/usr/local/rvm/gems/ruby-2.3.1/gems/selenium-webdriver-3.11.0/lib/selenium/webdriver/remote/http/common.rb:88:in `create_response': unexpected response, code=500, content-type=\"text/html\" (Selenium::WebDriver::Error::WebDriverError)\n    from /usr/local/rvm/gems/ruby-2.3.1/gems/selenium-webdriver-3.11.0/lib/selenium/webdriver/remote/http/default.rb:104:in 'request'\n    from /usr/local/rvm/gems/ruby-2.3.1/gems/selenium-webdriver-3.11.0/lib/selenium/webdriver/remote/http/common.rb:59:in 'call'\n    from /usr/local/rvm/gems/ruby-2.3.1/gems/selenium-webdriver-3.11.0/lib/selenium/webdriver/remote/bridge.rb:164:in 'execute'\n    from /usr/local/rvm/gems/ruby-2.3.1/gems/selenium-webdriver-3.11.0/lib/selenium/webdriver/remote/bridge.rb:97:in 'create_session'\n    from /usr/local/rvm/gems/ruby-2.3.1/gems/selenium-webdriver-3.11.0/lib/selenium/webdriver/firefox/marionette/driver.rb:50:in 'initialize'\n    from /usr/local/rvm/gems/ruby-2.3.1/gems/selenium-webdriver-3.11.0/lib/selenium/webdriver/firefox/driver.rb:31:in 'new'\n    from /usr/local/rvm/gems/ruby-2.3.1/gems/selenium-webdriver-3.11.0/lib/selenium/webdriver/firefox/driver.rb:31:in 'new'\n    from /usr/local/rvm/gems/ruby-2.3.1/gems/selenium-webdriver-3.11.0/lib/selenium/webdriver/common/driver.rb:52:in 'for'\n    from /usr/local/rvm/gems/ruby-2.3.1/gems/selenium-webdriver-3.11.0/lib/selenium/webdriver.rb:85:in 'for'\n    from test_selenium.rb:6:in 'initialize'\n    from test_selenium.rb:11:in 'new'\n    from test_selenium.rb:11:in '&lt;main&gt;'\n</code></pre>\n"}, {"tags": ["arrays", "ruby", "graph", "hash", "push"], "comments": [{"owner": {"reputation": 2946, "user_id": 1430057, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/Tbizp.jpg?s=128&g=1", "display_name": "Subash", "link": "https://stackoverflow.com/users/1430057/subash"}, "edited": false, "score": 0, "creation_date": 1522124896, "post_id": 49504346, "comment_id": 86012858, "body": "I think you should do some reading on Ruby <code>array</code> and <code>hash</code>"}, {"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1522128048, "post_id": 49504346, "comment_id": 86013737, "body": "You&#39;re free to say <code>some_hash[[&#39;1&#39;,&#39;2&#39;]] = 2445</code>, an array is a hash key like any other."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 9556017, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-5PxevfsH618/AAAAAAAAAAI/AAAAAAAAABM/k-CCbCw2h88/photo.jpg?sz=128", "display_name": "Juan Francisco ", "link": "https://stackoverflow.com/users/9556017/juan-francisco"}, "edited": false, "score": 0, "creation_date": 1522218448, "post_id": 49505021, "comment_id": 86060533, "body": "Thanks a lot, i ended by using the last lines, also a very complete answer, thanks a lot mate. Sorry for my bad english."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 11, "user_id": 9556017, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-5PxevfsH618/AAAAAAAAAAI/AAAAAAAAABM/k-CCbCw2h88/photo.jpg?sz=128", "display_name": "Juan Francisco ", "link": "https://stackoverflow.com/users/9556017/juan-francisco"}, "edited": false, "score": 0, "creation_date": 1522222188, "post_id": 49505021, "comment_id": 86062641, "body": "Glad to help. Every time I see someone apologizing for their English I am reminded of my woeful knowledge of languages other than English."}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": true, "score": 1, "last_activity_date": 1522221124, "last_edit_date": 1522221124, "creation_date": 1522128633, "answer_id": 49505021, "question_id": 49504346, "link": "https://stackoverflow.com/questions/49504346/i-want-to-push-more-arrays-into-this-hash/49505021#49505021", "title": "I want to push more arrays into this Hash?", "body": "<p>Presumably you will begin with some data such as the following array of arrays:</p>\n\n<pre><code>arr = [[\"1\", \"2\", 2445], [\"2\", \"3\", 2015], [\"2\", \"4\", 1547],\n       [\"3\", \"4\", 939], [\"5\", \"1\", \"7\", 1548], [\"1\", \"2\", -71]]\n</code></pre>\n\n<p>Step one is to create an empty hash:</p>\n\n<pre><code>h = {}\n</code></pre>\n\n<p>Now iterate over the elements of <code>arr</code> to build the hash <code>h</code>.</p>\n\n<pre><code>arr.each do |a|\n  *first, last = a\n  h[first] = last\nend\n  #=&gt; [[\"1\", \"2\", 2445], [\"2\", \"3\", 2015], [\"2\", \"4\", 1547],\n  #    [\"3\", \"4\", 939], [\"5\", \"1\", \"7\", 1548], [\"1\", \"2\", -71]]\n</code></pre>\n\n<p>We want the value of <code>h</code>, not the above return value.</p>\n\n<pre><code>h #=&gt; {[\"1\", \"2\"]=&gt;-71, [\"2\", \"3\"]=&gt;2015, [\"2\", \"4\"]=&gt;1547,\n  #    [\"3\", \"4\"]=&gt;939, [\"5\", \"1\"]=&gt;1548, [\"5\", \"1\", \"7\"]=&gt;1548}\n</code></pre>\n\n<p>Note that Ruby's <em>splat</em> operator<sup>1</sup> is used to break up an array in various ways:</p>\n\n<pre><code>*first, last = [\"5\", \"1\", \"7\", 1548]\nfirst\n  #=&gt; [\"5\", \"1\", \"7\"]\nlast\n  #=&gt; 1548\n</code></pre>\n\n<p>Is the result above for <code>h</code> what you were expecting? Recall that hashes have unique keys. After the first element of <code>arr</code> is passed to the block we execute</p>\n\n<pre><code>h[[\"1\", \"2\"]] = 2445\n</code></pre>\n\n<p>so that <code>h</code> becomes <code>{ [\"1\", \"2\"]=&gt;2445 }</code>. Later, when the last element of <code>arr</code>--which has the same key (<code>[\"1\", \"2\"]</code>)--is passed to the block, we execute</p>\n\n<pre><code>h[[\"1\", \"2\"]] = -71\n</code></pre>\n\n<p>which <em>overwrites</em> the value of that key. If you'd prefer to keep the value of the <em>first</em> key encountered you could write</p>\n\n<pre><code>arr.each do |a|\n  *first, last = a\n  h[first] = last unless h.key?(first)\nend\n</code></pre>\n\n<p>See <a href=\"http://ruby-doc.org/core-2.4.0/Hash.html#method-i-key-3F\" rel=\"nofollow noreferrer\">Hash#key?</a> (aka, <code>has_key?</code> and <code>include?</code>). (Aside: you could write <code>...if !h.key?(first)</code>, <code>!</code> read <em>not</em>, but it's generally clearer to avoid negation by using <code>unless</code>.)</p>\n\n<p>The \"Ruby way\" of writing the original construct is to use the method <a href=\"http://ruby-doc.org/core-2.4.0/Enumerable.html#method-i-each_with_object\" rel=\"nofollow noreferrer\">Enumerable#each_with_object</a> and to splat the block variables <code>a</code>:</p>\n\n<pre><code>arr.each_with_object({}) do |(*first, last),h|\n  h[first] = last\nend\n  #=&gt; {[\"1\", \"2\"]=&gt;-71, [\"2\", \"3\"]=&gt;2015, [\"2\", \"4\"]=&gt;1547,\n  #    [\"3\", \"4\"]=&gt;939, [\"5\", \"1\"]=&gt;1548, [\"5\", \"1\", \"7\"]=&gt;1548}\n</code></pre>\n\n<p>This avoids the need to use a separate statement to create an empty hash and the code block returns the value of <code>h</code>.</p>\n\n<p>(Don't worry if you don't understand this.)</p>\n\n<p>One other common way to construct a hash is to use the method <a href=\"http://ruby-doc.org/core-2.4.0/Hash.html#method-i-update\" rel=\"nofollow noreferrer\">Hash#update</a> (aka <code>merge!</code>):</p>\n\n<pre><code>arr.each_with_object({}) do |(*first, last),h|\n  h.update({ first=&gt;last })\nend\n</code></pre>\n\n<p>Note Ruby allows a shorthand version of the second line:</p>\n\n<pre><code>  h.update(first=&gt;last)\n</code></pre>\n\n<p><sup>1 See \"Multiple variable assignment\" <a href=\"https://jacopretorius.net/2012/01/splat-operator-in-ruby.html\" rel=\"nofollow noreferrer\">here</a>.</sup></p>\n"}, {"tags": [], "owner": {"reputation": 9602, "user_id": 3607136, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/NRFso.jpg?s=128&g=1", "display_name": "Gagan Gami", "link": "https://stackoverflow.com/users/3607136/gagan-gami"}, "is_accepted": false, "score": 0, "last_activity_date": 1522130263, "creation_date": 1522130263, "answer_id": 49505311, "question_id": 49504346, "link": "https://stackoverflow.com/questions/49504346/i-want-to-push-more-arrays-into-this-hash/49505311#49505311", "title": "I want to push more arrays into this Hash?", "body": "<p>you can pass array as <code>key</code> and assign <code>value</code> to it:</p>\n\n<pre><code>&gt; edge_weights = {}\n&gt; edge_weights[[\"1\",\"2\"]] = 2445\n&gt; edge_weights[[\"2\", \"4\"]] = 1547\n&gt; edge_weights\n#=&gt; {[\"1\", \"2\"]=&gt;2445, [\"2\", \"4\"]=&gt;1547}\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 9556017, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-5PxevfsH618/AAAAAAAAAAI/AAAAAAAAABM/k-CCbCw2h88/photo.jpg?sz=128", "display_name": "Juan Francisco ", "link": "https://stackoverflow.com/users/9556017/juan-francisco"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "accepted_answer_id": 49505021, "answer_count": 2, "score": 0, "last_activity_date": 1522221124, "creation_date": 1522124713, "question_id": 49504346, "link": "https://stackoverflow.com/questions/49504346/i-want-to-push-more-arrays-into-this-hash", "title": "I want to push more arrays into this Hash?", "body": "<p>i want to push an array into this part, i'm a newbie in Ruby</p>\n\n<pre><code>@edge_weights = {[position, position2] =&gt; node_distance}\n</code></pre>\n\n<p>That is a Hash? i think i want to push some other hashes of the same way to have a result like this:</p>\n\n<pre><code>{[\"1\", \"2\"]=&gt;2445, [\"2\", \"3\"]=&gt;2015, [\"2\", \"4\"]=&gt;1547, [\"3\", \"4\"]=&gt;939, [\"5\", \"1\"]=&gt;1548}\n</code></pre>\n\n<p>Not like this:</p>\n\n<pre><code>{[\"1\", \"2\"]=&gt;111},{[\"2\", \"3\"]=&gt;222},{[\"1\", \"3\"]=&gt;333}\n</code></pre>\n\n<p>How can i achieve this?. Sorry for my bad english :(</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "sidekiq", "capistrano3", "sidekiq-monitor"], "answers": [{"tags": [], "owner": {"reputation": 2465, "user_id": 3042016, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6kVHc.jpg?s=128&g=1", "display_name": "will_in_wi", "link": "https://stackoverflow.com/users/3042016/will-in-wi"}, "is_accepted": false, "score": 0, "last_activity_date": 1522152452, "creation_date": 1522152452, "answer_id": 49512463, "question_id": 49503880, "link": "https://stackoverflow.com/questions/49503880/permissions-with-sidekiq-monit-and-capistrano/49512463#49512463", "title": "Permissions with sidekiq monit and capistrano", "body": "<p>You have a couple of options, of which I'll define two, the right one, and the easy/bad one.</p>\n\n<h2>Local User Monit</h2>\n\n<p>My personal usage of Monit is on a shared server on which I do not have root access. So I run Monit itself as a non-root user.</p>\n\n<p>In order to do this, I compiled Monit with its prefix as <code>$HOME/apps</code>, so that the config files are in <code>$HOME/apps/etc</code>. This avoids the sudo issue. If you have access to the package manager and installed Monit that way, you can run monit as your user with the <code>-c</code> param to define where it should look for configuration files:</p>\n\n<pre><code>monit -c $HOME/config/monitrc\n</code></pre>\n\n<p>In order to get Capistrano to recognize the local monit, you will need some extra parameters in <code>config/deploy.rb</code>:</p>\n\n<pre><code>#set :monit_bin, '/usr/bin/monit' # Use this if you compile monit yourself.\nset :sidekiq_monit_conf_dir, '/home/myuser/config/monit.d' # Feel free to customize.\nset :sidekiq_monit_use_sudo, false\n</code></pre>\n\n<p>In the monitrc file you have defined with the <code>-c</code> option, you will need to make sure whatever folder you define in <code>:sidekiq_monit_conf_dir</code> is pulled in via includes:</p>\n\n<pre><code>include /home/myuser/config/monit.d/*.conf\n</code></pre>\n\n<p>Since I don't have an init system, I have Cron start Monit every 30 minutes, which is a noop if it is already running:</p>\n\n<pre><code># Restart monit if it dies\n*/30 * * * * $HOME/apps/bin/monit &gt; /dev/null\n</code></pre>\n\n<p>If you have root access, you can improve upon this by having an init script (or <a href=\"https://mmonit.com/wiki/Monit/Systemd\" rel=\"nofollow noreferrer\">systemd unit file</a>) start Monit as your local user.</p>\n\n<h2>Bad option: give your user access to the conf dir</h2>\n\n<p>You can edit <code>/etc/monit/monitrc</code> to include your local user config directory as above. Similarly, you can allow your user to write to <code>/etc/monit/conf.d</code>. The major downside of these solutions is that you are now allowing your non-root user to create files which will be executes as root, opening a privilege escalation vulnerability. If your user ever got compromised, you certainly don't want an easy way for the attacker to get to root.</p>\n\n<p>I include this option mostly because it's commonly considered, and should be avoided in the vast majority of cases (such as whenever you care about security). However, this might be useful in occasional rare cases (such as when you have a short term server for internal use only behind a firewall with only trusted users, and you need to set it up in a hurry).</p>\n"}], "owner": {"reputation": 471, "user_id": 1806667, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd8dceb8c7ecaa363fe4aa746c8e2b31?s=128&d=identicon&r=PG", "display_name": "ffscalco", "link": "https://stackoverflow.com/users/1806667/ffscalco"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 406, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1522152452, "creation_date": 1522121193, "last_edit_date": 1522123852, "question_id": 49503880, "link": "https://stackoverflow.com/questions/49503880/permissions-with-sidekiq-monit-and-capistrano", "title": "Permissions with sidekiq monit and capistrano", "body": "<p>I'm having troubles with capistrano and sidekiq monit.</p>\n\n<p>I setup a user for capistrano and everything was going smoothly until I installed Sidekiq.</p>\n\n<p>My problem is when I try to execute <code>cap staging sidekiq:monit:config</code> (<code>sidekiq:monit:start</code> has the same permission problem).\nEverytime I've tried, it \"freezes\" because it asks for the password.</p>\n\n<p>Then I tryed to set <code>sidekiq_monit_use_sudo</code> to false. It's ok, it doesn't use sudo, but then it doesn't have permission to copy the <code>/tmp/monit.conf</code> into <code>/etc/monit/conf.d/</code> folder.</p>\n\n<p>It's the first time I'm setting up a server and I'm kinda lost here =|\nMaybe try to config the sidekiq monit manually? </p>\n\n<p>I'm using ruby 2.5 and these gems:</p>\n\n<ul>\n<li>capistrano 3.10</li>\n<li>capistrano-sidekiq 1.0</li>\n<li>rails 5.1</li>\n</ul>\n\n<p>Also I have the <code>:pty</code> config set to <code>true</code> as I don't feel comfortable not using a password.</p>\n\n<p>Thank you!</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 19261, "user_id": 4758119, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/F4dJY.jpg?s=128&g=1", "display_name": "Deepak Mahakale", "link": "https://stackoverflow.com/users/4758119/deepak-mahakale"}, "edited": false, "score": 0, "creation_date": 1522122204, "post_id": 49503661, "comment_id": 86012141, "body": "You are not redirecting to any action if user is not present"}, {"owner": {"reputation": 19261, "user_id": 4758119, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/F4dJY.jpg?s=128&g=1", "display_name": "Deepak Mahakale", "link": "https://stackoverflow.com/users/4758119/deepak-mahakale"}, "edited": false, "score": 0, "creation_date": 1522122228, "post_id": 49503661, "comment_id": 86012148, "body": "So, rails end up trying to render the <code>create.html.haml</code>"}], "answers": [{"tags": [], "owner": {"reputation": 19261, "user_id": 4758119, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/F4dJY.jpg?s=128&g=1", "display_name": "Deepak Mahakale", "link": "https://stackoverflow.com/users/4758119/deepak-mahakale"}, "is_accepted": true, "score": 9, "last_activity_date": 1522122534, "creation_date": 1522122534, "answer_id": 49504052, "question_id": 49503661, "link": "https://stackoverflow.com/questions/49503661/no-template-found-for-userscontrollercreate-rendering-head-no-content/49504052#49504052", "title": "No template found for UsersController#create, rendering head :no_content", "body": "<p>As per your code if the <code>User</code> is not present it will not enter in the if block. Rails end up trying to find <code>create.html</code> as the current action is <code>create</code>.</p>\n\n<p>To avoid this you must redirect it somewhere or render a template which you have done in the next <code>if</code> and <code>else</code> but it's not executing. </p>\n\n<p>The condition is not letting it redirect to anywhere. Try moving the if block out like this.</p>\n\n<pre><code>def create\n  @user = User.new(user_params)\n  if User.exists?(email: params[:email]) # I think this should be `user_params[:email]` instead of `params[:email]`\n    flash[:error] = \"User already exists.\" \n    redirect_to 'whereever/you/want/to/redirect' and return\n  end\n  if @user.save\n    session[:user_id] = user.id\n    flash[:success] = \"New User created.\"\n    redirect_to '/layouts/application'\n  else\n    render 'new'\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 65, "user_id": 9531919, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de4d89e15aa83acf2e7839fd9f7b8933?s=128&d=identicon&r=PG&f=1", "display_name": "nephilim", "link": "https://stackoverflow.com/users/9531919/nephilim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 10111, "favorite_count": 0, "accepted_answer_id": 49504052, "answer_count": 1, "score": 6, "last_activity_date": 1522122534, "creation_date": 1522119230, "last_edit_date": 1522122087, "question_id": 49503661, "link": "https://stackoverflow.com/questions/49503661/no-template-found-for-userscontrollercreate-rendering-head-no-content", "title": "No template found for UsersController#create, rendering head :no_content", "body": "<p>OK, previously I had a problem with a no template error from users#create, now it complete 200 OK however does not redirect at all.  Below is my edited users_controller.rb </p>\n\n<p>I have a Signup, Login, Logout rails application with users as a resource.  I am trying to save the first user in the database so I can then login but this error is server output when I try to \"users#new\" and \"users#create\"  the full error is below, then my users_controller.rb and views/users -> new.html.erb</p>\n\n<pre><code>No template found for UsersController#create, rendering head :no_content\nCompleted 204 No Content in 35ms (ActiveRecord: 0.5ms)\n</code></pre>\n\n<p>users_controller.rb</p>\n\n<pre><code>def new\n  @user = User.new\nend\n\ndef create\n  @user = User.new(user_params)\n  if (@user = User.find_by_email(params[:email]))\n    flash[:success] = \"User already exists.\"\n    if @user.save\n      session[:user_id] = user.id\n      flash[:success] = \"New User created.\"\n      redirect_to '/layouts/application'\n    else\n      render 'new'\n    end\n  end\nend\n</code></pre>\n\n<p>new.html.erb</p>\n\n<pre><code>&lt;h1&gt;Sign Up&lt;/h1&gt;\n&lt;%= form_with(model: @user) do |f| %&gt;\n&lt;p&gt; Username:&lt;/br&gt; &lt;%= f.text_field :username %&gt; &lt;/p&gt;\n&lt;p&gt; Email:&lt;/br&gt; &lt;%= f.text_field :email %&gt; &lt;/p&gt;\n&lt;p&gt; Password:&lt;/br&gt; &lt;%= f.password_field :password%&gt;&lt;/p&gt;\n\n&lt;%= f.submit \"Signup\" %&gt;\n&lt;% end %&gt;\n&lt;% if @user.errors.any? %&gt;\n&lt;ul class=\"Signup_Errors\"&gt;\n&lt;% for message_error in @user.errors.full_messages %&gt;\n  &lt;li&gt;* &lt;%= message_error %&gt;&lt;/li&gt;\n&lt;% end %&gt;\n&lt;/ul&gt;\n&lt;% end %&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>Do I have to have another html.erb file?  And how can I tell what that has to be?  Sorry for the obvious question, newb here.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"tags": [], "owner": {"reputation": 2285, "user_id": 2039726, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1fc7ff9bf8f9489ab7715282a9b7e9c?s=128&d=identicon&r=PG", "display_name": "MrShemek", "link": "https://stackoverflow.com/users/2039726/mrshemek"}, "is_accepted": true, "score": 1, "last_activity_date": 1522134107, "creation_date": 1522134107, "answer_id": 49506286, "question_id": 49503503, "link": "https://stackoverflow.com/questions/49503503/include-child-record-count-in-json-rails/49506286#49506286", "title": "Include Child Record Count in json Rails", "body": "<p>You can add <code>item_count</code> to the partial like this:</p>\n\n<pre><code>json.item_count category.items.count\n</code></pre>\n\n<p>However, for each category, it will execute an additional query (to get the number of items):</p>\n\n<pre><code>SELECT COUNT(*) FROM `items` WHERE `items`.`category_id` = ID\n</code></pre>\n"}], "owner": {"reputation": 2960, "user_id": 7426461, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/Ldwxy.jpg?s=128&g=1", "display_name": "Cannon Moyer", "link": "https://stackoverflow.com/users/7426461/cannon-moyer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 150, "favorite_count": 0, "accepted_answer_id": 49506286, "answer_count": 1, "score": 1, "last_activity_date": 1522134107, "creation_date": 1522117942, "question_id": 49503503, "link": "https://stackoverflow.com/questions/49503503/include-child-record-count-in-json-rails", "title": "Include Child Record Count in json Rails", "body": "<p>I'm trying to include a <code>item_count</code> field in a json response on Rails. I have a list of <code>Categories</code> and each of those records has one or more <code>Items</code>. </p>\n\n<p>Here is my current index.json.jbuilder file:</p>\n\n<pre><code>json.array! @categories, partial: 'categories/category', as: :category\n</code></pre>\n\n<p>And the _category.json.jbuilder partial</p>\n\n<pre><code>json.extract! category, :id, :name, :created_at, :updated_at\njson.url category_url(category, format: :json)\n</code></pre>\n\n<p>I want to include <code>category.item_count</code> in the response but I'm not exactly sure how to do this. Thanks in advance. </p>\n"}, {"tags": ["ruby", "regex"], "comments": [{"owner": {"reputation": 1140, "user_id": 9031481, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb96414dd951748628438200bd27442c?s=128&d=identicon&r=PG&f=1", "display_name": "Shen Yudong", "link": "https://stackoverflow.com/users/9031481/shen-yudong"}, "edited": false, "score": 0, "creation_date": 1522117169, "post_id": 49503385, "comment_id": 86010959, "body": "^[A-Za-z]+(\\s[A-Za-z])?$, try this one. you set a mistake postion"}], "answers": [{"tags": [], "owner": {"reputation": 895, "user_id": 2322427, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/Do5ip.jpg?s=128&g=1", "display_name": "tsogtgerel.ts", "link": "https://stackoverflow.com/users/2322427/tsogtgerel-ts"}, "is_accepted": false, "score": 1, "last_activity_date": 1522117232, "creation_date": 1522117232, "answer_id": 49503403, "question_id": 49503385, "link": "https://stackoverflow.com/questions/49503385/target-of-repeat-operator-is-not-specified-when-using-optional-character/49503403#49503403", "title": "target of repeat operator is not specified when using optional character", "body": "<pre><code>/^[A-Za-z]+\\s*[A-Za-z]*$/\n</code></pre>\n\n<p><code>*</code> mean length is 0 or any</p>\n"}, {"tags": [], "owner": {"reputation": 9971, "user_id": 8255744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de22299534b5a8ed244ee8ff4aa6c481?s=128&d=identicon&r=PG&f=1", "display_name": "Simple Lime", "link": "https://stackoverflow.com/users/8255744/simple-lime"}, "is_accepted": true, "score": 1, "last_activity_date": 1524516530, "last_edit_date": 1524516530, "creation_date": 1522117527, "answer_id": 49503447, "question_id": 49503385, "link": "https://stackoverflow.com/questions/49503385/target-of-repeat-operator-is-not-specified-when-using-optional-character/49503447#49503447", "title": "target of repeat operator is not specified when using optional character", "body": "<p>The problem is you misplaced the opening parenthesis and have a \"1 or more\" operator (<code>+</code>) right next to it, so the regex doesn't know what you can have one or more of:</p>\n\n<pre><code>^[A-Za-z]+(\\s[A-Za-z])?$\n</code></pre>\n\n<p>Is the regex you likely intended to use (and which seems to work on <a href=\"http://www.rubular.com/r/3okvKCKsc2\" rel=\"nofollow noreferrer\">Rubular</a> for your test cases).</p>\n"}], "owner": {"reputation": 5850, "user_id": 4501354, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/1230cfcc7f68488ad19d0022cf7b1a93?s=128&d=identicon&r=PG&f=1", "display_name": "Donato", "link": "https://stackoverflow.com/users/4501354/donato"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6116, "favorite_count": 0, "accepted_answer_id": 49503447, "answer_count": 2, "score": 1, "last_activity_date": 1524516530, "creation_date": 1522117005, "question_id": 49503385, "link": "https://stackoverflow.com/questions/49503385/target-of-repeat-operator-is-not-specified-when-using-optional-character", "title": "target of repeat operator is not specified when using optional character", "body": "<p>I want to match a pattern like this:</p>\n\n<pre><code>ssfd\n</code></pre>\n\n<p>or this:</p>\n\n<pre><code>oifdsofijsdf d\n</code></pre>\n\n<p>So a first name alone or first name and middle initial.</p>\n\n<pre><code>\"dsfsf m\" =~ /^[A-Za-z]+\\s[A-Za-z]$/\n</code></pre>\n\n<p>To make the middle initial optional, I added the ?:</p>\n\n<pre><code>\"dsfsf\" =~ /^[A-Za-z](+\\s[A-Za-z])?$/\n</code></pre>\n\n<p>But it gives me error:</p>\n\n<blockquote>\n  <p>target of repeat operator is not specified</p>\n</blockquote>\n\n<p>What am I doing wrong?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1522116557, "post_id": 49503137, "comment_id": 86010831, "body": "Don&#39;t use <code>attr_accessor</code> if it leads to a semantically wrong getter name, <code>update_me</code> in this case."}, {"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 2, "creation_date": 1522117294, "post_id": 49503137, "comment_id": 86010994, "body": "Execute summary: If you say <code>x = y</code> then <code>x</code> is a local variable, if you say <code>self.x = y</code> then the <code>#x=</code> method is called."}], "owner": {"reputation": 21, "user_id": 9493876, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd2c39af0493064a860720aaa2f405a8?s=128&d=identicon&r=PG&f=1", "display_name": "tracyjs", "link": "https://stackoverflow.com/users/9493876/tracyjs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 38, "favorite_count": 0, "closed_date": 1522117240, "answer_count": 0, "score": 2, "last_activity_date": 1522114824, "creation_date": 1522114824, "question_id": 49503137, "link": "https://stackoverflow.com/questions/49503137/why-is-my-attr-accessor-working-for-getting-but-not-for-setting", "closed_reason": "Duplicate", "title": "why is my attr_accessor working for getting but not for setting?", "body": "<p>ruby version: 2.3.4</p>\n\n<p>I am fairly new to Ruby and can't figure out why the following code will not update my variable.</p>\n\n<pre><code>class Blah\n  attr_accessor :update_me\n\n  def initialize\n    @update_me = 6\n  end\n\n  def addy\n    puts update_me\n    if update_me == nil\n      update_me = 1\n    else\n      update_me += 1\n    end\n  end\n\nend\n</code></pre>\n\n<p>Here is my input and the results from irb </p>\n\n<pre><code>&gt; a = Blah.new\n =&gt; #&lt;Blah:0x007fdcfe819dd0 @update_me=6&gt;\n\n&gt; a.addy\n6\nNoMethodError: undefined method `+' for nil:NilClass\n  from (irb):35:in `addy'\n  from (irb):42\n  from /Users/tracy/.rvm/rubies/ruby-2.3.4/bin/irb:11:in `&lt;main&gt;'\n</code></pre>\n\n<p>In my addy method it is clearly seeing the initial value of the update_me variable as 6, and it is passing by the if == nil statement as expected, but when it tries to update the value I get a nil:NilClass error. There is something I appear to be fundamentally misunderstanding here.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 3502, "user_id": 2558108, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/DUiG3.jpg?s=128&g=1", "display_name": "Qwertie", "link": "https://stackoverflow.com/users/2558108/qwertie"}, "edited": false, "score": 0, "creation_date": 1522119228, "post_id": 49503074, "comment_id": 86011458, "body": "is infected a row in your database schema?"}, {"owner": {"reputation": 5237, "user_id": 2325924, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/XSXrT.jpg?s=128&g=1", "display_name": "7urkm3n", "link": "https://stackoverflow.com/users/2325924/7urkm3n"}, "edited": false, "score": 0, "creation_date": 1522121000, "post_id": 49503074, "comment_id": 86011816, "body": "what u want to see from model in the controller ? U can return and initiate new variable of the object."}, {"owner": {"reputation": 4497, "user_id": 1050875, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/3549436942ea890da97f41d1dbd3594f?s=128&d=identicon&r=PG", "display_name": "akbarbin", "link": "https://stackoverflow.com/users/1050875/akbarbin"}, "edited": false, "score": 0, "creation_date": 1522133200, "post_id": 49503074, "comment_id": 86016043, "body": "You can change <code>def self.estimative</code> to <code>def estimative</code>."}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 9389105, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-bYPZyY5wNvE/AAAAAAAAAAI/AAAAAAAAAXU/634SKJYOkHY/photo.jpg?sz=128", "display_name": "pauljoe george", "link": "https://stackoverflow.com/users/9389105/pauljoe-george"}, "is_accepted": false, "score": 0, "last_activity_date": 1522129546, "creation_date": 1522129546, "answer_id": 49505176, "question_id": 49503074, "link": "https://stackoverflow.com/questions/49503074/how-to-send-data-from-controller-to-model-and-send-model-variables-to-controller/49505176#49505176", "title": "How to send data from controller to model and send model variables to controllers?", "body": "<ol>\n<li>Cut method \"def estimative(s_infected)\" from MODEL and place it in Controller.</li>\n<li>I think instance variables (\"@water ..\") are not supported in MODEL because of security issues</li>\n</ol>\n"}], "owner": {"reputation": 59, "user_id": 9266697, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f6f02d961f38ffa3966a462a1c2c5448?s=128&d=identicon&r=PG&f=1", "display_name": "denispolicarpocampos", "link": "https://stackoverflow.com/users/9266697/denispolicarpocampos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 64, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1522129546, "creation_date": 1522114336, "last_edit_date": 1522114948, "question_id": 49503074, "link": "https://stackoverflow.com/questions/49503074/how-to-send-data-from-controller-to-model-and-send-model-variables-to-controller", "title": "How to send data from controller to model and send model variables to controllers?", "body": "<p>How can I send data to my model to do the logical processing and send data in some variables back to the controller so that it returns json?</p>\n\n<p>I tried to do the same below, but I did not succeed i have the following message: </p>\n\n<blockquote>\n  <p>NoMethodError: undefined method `infected=' for \n  Class:0x00007f8d780d5d10</p>\n</blockquote>\n\n<p>I'm trying to retrieve the infected, non_infected, and points_lost of my models variables.</p>\n\n<p>Controller:</p>\n\n<pre><code>def index\n    @survivor = Survivor.all\n    @survivor_infected = Survivor.where(infected: true)\n    @survivor.estimative (@survivor_infected)\n\n    render json: { infected: \"#{@survivor.infected}%\",\n                   non_infected: \"#{}%\",\n                   points_lost: \"\"\n                 }\n  end\n</code></pre>\n\n<p>My models:</p>\n\n<pre><code>def self.estimative (s_infected)\n    @survivor_infected = s_infected\n    @water = []\n    @water_price = []\n    @food = []\n    @food_price = []\n    @medication = []\n    @medication_price = []\n    @ammunition = []\n    @ammunition_price = []\n\n    @survivor_infected.each do |s|\n      @water &lt;&lt; s.inventory.items.where(item: \"Water\").pluck(:quantity).join.to_i\n      @water_price &lt;&lt; s.inventory.items.where(item: \"Water\").pluck(:price).join.to_i\n      @food &lt;&lt; s.inventory.items.where(item: \"Food\").pluck(:quantity).join.to_i\n      @food_price &lt;&lt; s.inventory.items.where(item: \"Food\").pluck(:price).join.to_i\n      @medication &lt;&lt; s.inventory.items.where(item: \"Medication\").pluck(:quantity).join.to_i\n      @medication_price &lt;&lt; s.inventory.items.where(item: \"Medication\").pluck(:price).join.to_i\n      @ammunition &lt;&lt; s.inventory.items.where(item: \"Ammunition\").pluck(:quantity).join.to_i\n      @ammunition_price &lt;&lt; s.inventory.items.where(item: \"Ammunition\").pluck(:price).join.to_i\n    end\n\n    self.infected = ((@survivor_infected.count * 100)/(self.count))\n    non_infected =((@survivor_infected.rewhere(infected: false).count * 100)/(self.count))\n    points_lost = ( @water.reduce(:+) * @water_price.reduce(:+)) + (@food.reduce(:+) * @food_price.reduce(:+)) + (@medication.reduce(:+) * @medication_price.reduce(:+)) + (@ammunition.reduce(:+) * @ammunition_price.reduce(:+))\n\n  end\n</code></pre>\n\n<p>Someone can help?</p>\n"}, {"tags": ["ruby", "xml", "nokogiri"], "comments": [{"owner": {"reputation": 2946, "user_id": 1430057, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/Tbizp.jpg?s=128&g=1", "display_name": "Subash", "link": "https://stackoverflow.com/users/1430057/subash"}, "edited": false, "score": 0, "creation_date": 1522111654, "post_id": 49502755, "comment_id": 86009636, "body": "Try pasting the code itself, its more readable and easier than an image"}, {"owner": {"reputation": 11, "user_id": 8590750, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ba6c54af9c543d3f360a31a4f028871?s=128&d=identicon&r=PG&f=1", "display_name": "Han-Cydarm", "link": "https://stackoverflow.com/users/8590750/han-cydarm"}, "reply_to_user": {"reputation": 2946, "user_id": 1430057, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/Tbizp.jpg?s=128&g=1", "display_name": "Subash", "link": "https://stackoverflow.com/users/1430057/subash"}, "edited": false, "score": 0, "creation_date": 1522113033, "post_id": 49502755, "comment_id": 86009941, "body": "@subash edited, thank you for letting me know"}, {"owner": {"reputation": 2946, "user_id": 1430057, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/Tbizp.jpg?s=128&g=1", "display_name": "Subash", "link": "https://stackoverflow.com/users/1430057/subash"}, "edited": false, "score": 0, "creation_date": 1522114698, "post_id": 49502755, "comment_id": 86010368, "body": "What is it that you are trying to do, do you just want to print the data or do you need to store that data in a variable and send it somewhere for processing?"}, {"owner": {"reputation": 11, "user_id": 8590750, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ba6c54af9c543d3f360a31a4f028871?s=128&d=identicon&r=PG&f=1", "display_name": "Han-Cydarm", "link": "https://stackoverflow.com/users/8590750/han-cydarm"}, "reply_to_user": {"reputation": 2946, "user_id": 1430057, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/Tbizp.jpg?s=128&g=1", "display_name": "Subash", "link": "https://stackoverflow.com/users/1430057/subash"}, "edited": false, "score": 0, "creation_date": 1522123026, "post_id": 49502755, "comment_id": 86012339, "body": "@Subash extract the data from xml file and output the data"}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 8590750, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ba6c54af9c543d3f360a31a4f028871?s=128&d=identicon&r=PG&f=1", "display_name": "Han-Cydarm", "link": "https://stackoverflow.com/users/8590750/han-cydarm"}, "edited": false, "score": 0, "creation_date": 1522122742, "post_id": 49503698, "comment_id": 86012270, "body": "thanks @phlip for the answer but im unable to change the xml file to a single root as this is a part of requirement"}, {"owner": {"reputation": 5141, "user_id": 193980, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/aafa8848c4b764f080b1b31a51eab73d?s=128&d=identicon&r=PG", "display_name": "Phlip", "link": "https://stackoverflow.com/users/193980/phlip"}, "reply_to_user": {"reputation": 11, "user_id": 8590750, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ba6c54af9c543d3f360a31a4f028871?s=128&d=identicon&r=PG&f=1", "display_name": "Han-Cydarm", "link": "https://stackoverflow.com/users/8590750/han-cydarm"}, "edited": false, "score": 0, "creation_date": 1522122999, "post_id": 49503698, "comment_id": 86012330, "body": "Can you parse with <code>Nokogiri::XML(&#39;&lt;records&gt;&#39; + File.open(&#39;yo.xml&#39;).read() + &#39;&lt;&#47;records&gt;&#39;)</code>? But the answer with <code>Nokogiri::XML::DocumentFragment.parse(xml)</code> should be the winning solution here."}], "tags": [], "owner": {"reputation": 5141, "user_id": 193980, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/aafa8848c4b764f080b1b31a51eab73d?s=128&d=identicon&r=PG", "display_name": "Phlip", "link": "https://stackoverflow.com/users/193980/phlip"}, "is_accepted": false, "score": 1, "last_activity_date": 1522119469, "creation_date": 1522119469, "answer_id": 49503698, "question_id": 49502755, "link": "https://stackoverflow.com/questions/49502755/overwrite-issue-in-ruby-nokogiri/49503698#49503698", "title": "Overwrite issue in ruby Nokogiri", "body": "<p>When I write your XML into a file called <code>yo.xml</code>, and run this little program...</p>\n\n<pre><code>require 'nokogiri'\nfile = Nokogiri::XML(File.open('yo.xml').read())\np file.xpath('//record').size\n</code></pre>\n\n<p>...I get <code>1</code>. One record.</p>\n\n<p>This is probably because your XML has no single top-level node, so Nokogiri assumed when it found the first <code>&lt;/record&gt;</code> that the XML ended there.</p>\n\n<p>When I wrap your content with <code>&lt;records&gt;...&lt;/records&gt;</code>, I get <code>2</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 11, "user_id": 8590750, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ba6c54af9c543d3f360a31a4f028871?s=128&d=identicon&r=PG&f=1", "display_name": "Han-Cydarm", "link": "https://stackoverflow.com/users/8590750/han-cydarm"}, "edited": false, "score": 0, "creation_date": 1522122852, "post_id": 49503718, "comment_id": 86012292, "body": "I did change my code to your suggestion but i didnt get any output from the program    file.xpath(&quot;//record&quot;).each do |node|     $records &lt;&lt; {     &quot;id&quot; =&gt; node.xpath(&#39;id&#39;).text,      &quot;first_name&quot; =&gt; node.xpath(&#39;first_name&#39;).text,      &quot;last_name&quot; =&gt; node.xpath(&#39;last_name&#39;).text,      &quot;email&quot; =&gt; node.xpath(&#39;email&#39;).text,      &quot;gender&quot; =&gt; node.xpath(&#39;gender&#39;).text,      &quot;ip_address&quot; =&gt; node.xpath(&#39;ip_address&#39;).text,     &quot;send_date&quot; =&gt; node.xpath(&#39;send_date&#39;).text,     &quot;email_body&quot; =&gt; node.xpath(&#39;email_body&#39;).text,     &quot;email_title&quot; =&gt; node.xpath(&#39;email_title&#39;).text     }     end"}], "tags": [], "owner": {"reputation": 9971, "user_id": 8255744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de22299534b5a8ed244ee8ff4aa6c481?s=128&d=identicon&r=PG&f=1", "display_name": "Simple Lime", "link": "https://stackoverflow.com/users/8255744/simple-lime"}, "is_accepted": false, "score": 0, "last_activity_date": 1522119591, "creation_date": 1522119591, "answer_id": 49503718, "question_id": 49502755, "link": "https://stackoverflow.com/questions/49502755/overwrite-issue-in-ruby-nokogiri/49503718#49503718", "title": "Overwrite issue in ruby Nokogiri", "body": "<p>I believe the issue is because you have 2 root nodes in your xml document, which isn't allowed and isn't liked (nokogiri appears to parse the first one then stop). What you have isn't an xml document, it's an xml fragment, but nokogiri does let you work with those as well, you just need to initialize the file as:</p>\n\n<pre><code>file = Nokogiri::XML::DocumentFragment.parse(xml)\n</code></pre>\n\n<p>and then you can iterate both of the <code>record</code> elements using the xpath:</p>\n\n<pre><code>file.xpath(\"./record\").each do |node|\n</code></pre>\n\n<p>I'm not the greatest at xpath, this seems to be working though, I'm not sure why <code>//record</code> doesn't work when you use a fragment while this does.</p>\n"}, {"tags": [], "owner": {"reputation": 2946, "user_id": 1430057, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/Tbizp.jpg?s=128&g=1", "display_name": "Subash", "link": "https://stackoverflow.com/users/1430057/subash"}, "is_accepted": false, "score": 0, "last_activity_date": 1522123891, "creation_date": 1522123891, "answer_id": 49504226, "question_id": 49502755, "link": "https://stackoverflow.com/questions/49502755/overwrite-issue-in-ruby-nokogiri/49504226#49504226", "title": "Overwrite issue in ruby Nokogiri", "body": "<p>If you can't change the incoming data then you can use this to get exactly what you are looking for</p>\n\n<pre><code>Nokogiri::XML::DocumentFragment.parse(xml_string).search('record').each {|record| p Hash.from_xml(record.to_xml)}\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 8590750, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ba6c54af9c543d3f360a31a4f028871?s=128&d=identicon&r=PG&f=1", "display_name": "Han-Cydarm", "link": "https://stackoverflow.com/users/8590750/han-cydarm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1522130969, "creation_date": 1522111440, "last_edit_date": 1522130969, "question_id": 49502755, "link": "https://stackoverflow.com/questions/49502755/overwrite-issue-in-ruby-nokogiri", "title": "Overwrite issue in ruby Nokogiri", "body": "<p><a href=\"https://i.stack.imgur.com/Jry7f.png\" rel=\"nofollow noreferrer\">below is my code, it only print out 1 records rather than all records in the file</a></p>\n\n<pre><code>file.xpath(\"//record\").each do |node|\n  $records &lt;&lt; {\n  \"id\" =&gt; node.xpath('id').text, \n  \"first_name\" =&gt; node.xpath('first_name').text, \n  \"last_name\" =&gt; node.xpath('last_name').text, \n  \"email\" =&gt; node.xpath('email').text, \n  \"gender\" =&gt; node.xpath('gender').text, \n  \"ip_address\" =&gt; node.xpath('ip_address').text,\n  \"send_date\" =&gt; node.xpath('send_date').text,\n  \"email_body\" =&gt; node.xpath('email_body').text,\n  \"email_title\" =&gt; node.xpath('email_title').text\n}\nputs $records\nend\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/sH9B5.png\" rel=\"nofollow noreferrer\">this is the xml file for records</a></p>\n\n<pre><code>&lt;record&gt;\n&lt;id&gt;1&lt;/id&gt;\n&lt;first_name&gt;Adiana&lt;/first_name&gt;\n&lt;last_name&gt;Paulat&lt;/last_name&gt;\n&lt;email&gt;apaulat0@technorati.com&lt;/email&gt;\n&lt;gender&gt;Female&lt;/gender&gt;\n&lt;ip_address&gt;216.250.245.57&lt;/ip_address&gt;\n&lt;send_date&gt;2017-05-17T23:04:27Z&lt;/send_date&gt;\n&lt;email_body&gt;\u200b&lt;/email_body&gt;\n&lt;email_title&gt;Up-sized&lt;/email_title&gt;\n&lt;/record&gt;\n&lt;record&gt;\n&lt;id&gt;2&lt;/id&gt;\n&lt;first_name&gt;Jaye&lt;/first_name&gt;\n&lt;last_name&gt;O'Donnelly&lt;/last_name&gt;\n&lt;email&gt;jodonnelly1@amazon.com&lt;/email&gt;\n&lt;gender&gt;Male&lt;/gender&gt;\n&lt;ip_address&gt;15.66.35.144&lt;/ip_address&gt;\n&lt;send_date&gt;2017-11-09T05:08:56Z&lt;/send_date&gt;\n&lt;email_body&gt;&lt;script&gt;alert('hi')&lt;/script&gt;&lt;/email_body&gt;\n&lt;email_title&gt;real-time&lt;/email_title&gt;\n&lt;/record&gt;\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/9u2Qz.png\" rel=\"nofollow noreferrer\">this is the output of the system</a></p>\n\n<pre><code>{\"id\"=&gt;\"1\", \"first_name\"=&gt;\"Adiana\", \"last_name\"=&gt;\"Paulat\", \"email\"=&gt;\"apaulat0@technorati.com\", \"gender\"=&gt;\"Female\", \"ip_address\"=&gt;\"216.250.245.57\", \"send_date\"=&gt;\"2017-05-17T23:04:27Z\", \"email_body\"=&gt;\"\u200b\", \"email_title\"=&gt;\"Up-sized\"}\n</code></pre>\n\n<p>I asked my tutor and he said that I had overwrite issue in my line and I couldnt find it. Anyone can help?</p>\n\n<p>Thank you in advanced</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 0, "creation_date": 1522107860, "post_id": 49502261, "comment_id": 86008646, "body": "do you know basic ruby at all?"}, {"owner": {"reputation": 5141, "user_id": 193980, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/aafa8848c4b764f080b1b31a51eab73d?s=128&d=identicon&r=PG", "display_name": "Phlip", "link": "https://stackoverflow.com/users/193980/phlip"}, "edited": false, "score": 1, "creation_date": 1522108011, "post_id": 49502261, "comment_id": 86008696, "body": "I was going to suggest <code>Dogs::DogsPopularity.all.in_groups_of 10</code>, but the basic Ruby needs to be addressed first"}], "answers": [{"tags": [], "owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "is_accepted": false, "score": 0, "last_activity_date": 1522108639, "last_edit_date": 1522108639, "creation_date": 1522108286, "answer_id": 49502368, "question_id": 49502261, "link": "https://stackoverflow.com/questions/49502261/need-help-spliting-a-list-into-2-different-list/49502368#49502368", "title": "need help spliting a list into 2 different list", "body": "<p>We have to assume that your class/module returns 20 dogs, and if so:</p>\n\n<pre><code>def list_dogs\n  Dogs::DogsPopularity.all.each_slice(10).each do |dog_arr|\n    dog_arr.each_with_index do |dog, i|\n      puts \"#{i+1}. #{dog.name}\"\n    end\n  end\nend\n</code></pre>\n\n<p>To see that this works on a basic array see:</p>\n\n<pre><code>[*1..100].each_slice(10).each_with_index{|arr, i| puts \"#{i+1}: #{arr}\"}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 9555285, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "michael pope", "link": "https://stackoverflow.com/users/9555285/michael-pope"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 36, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1522108639, "creation_date": 1522107492, "question_id": 49502261, "link": "https://stackoverflow.com/questions/49502261/need-help-spliting-a-list-into-2-different-list", "title": "need help spliting a list into 2 different list", "body": "<p>This is my code it creates a list of 20 items and I want to split it into 2 lists of 10 and only display one list at a time. How can I make this happen in ruby?</p>\n\n<pre><code>def list_dogs\ncounter = 0\nif counter &lt;= 10\n  Dogs::DogsPopularity.all.each do |dog|\n\n    puts \"#{counter +=1}. #{dog.name}\"\n    #binding.pry\n  end\n\nelsif counter &gt; 10 &amp;&amp; counter &lt;= 20\n  Dogs::DogsPopularity.all.each do |dog|\n    puts \"#{counter +=1}. #{dog.name}\"\n  #  binding.pry\n  end\nend\n#binding.pry\nend\n</code></pre>\n\n<p>This is what it prints out.....</p>\n\n<ol>\n<li>Labrador Retriever</li>\n<li>Golden Retriever</li>\n<li>Bulldog</li>\n<li>Beagle</li>\n<li>French Bulldog</li>\n<li>Poodle</li>\n<li>Yorkshire Terrier</li>\n<li>Boxer</li>\n<li>Dachshund</li>\n<li>Australian Shepherd</li>\n<li>Pembroke Welsh Corgi</li>\n<li>Cavalier King Charles Spaniel</li>\n<li>Shih Tzu</li>\n<li>Boston Terrier</li>\n<li>Havanese</li>\n<li>Brittany</li>\n<li>American Cocker Spaniel</li>\n<li>Chihuahua</li>\n<li>Pug</li>\n<li>Maltese</li>\n</ol>\n"}, {"tags": ["ruby", "go"], "answers": [{"comments": [{"owner": {"reputation": 42799, "user_id": 720999, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/04ee78e90161fa1c4dce14d615315160?s=128&d=identicon&r=PG", "display_name": "kostix", "link": "https://stackoverflow.com/users/720999/kostix"}, "edited": false, "score": 1, "creation_date": 1522142405, "post_id": 49502719, "comment_id": 86021973, "body": "@KVS7, <a href=\"https://golang.org/pkg/regexp/syntax\" rel=\"nofollow noreferrer\">here</a> is the documentation describing the syntax of REs supported by Go."}], "tags": [], "owner": {"reputation": 26448, "user_id": 10322, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa46a3814b72439b1d2efa8f7c9162c2?s=128&d=identicon&r=PG", "display_name": "ctcherry", "link": "https://stackoverflow.com/users/10322/ctcherry"}, "is_accepted": true, "score": 6, "last_activity_date": 1522111200, "creation_date": 1522111200, "answer_id": 49502719, "question_id": 49502260, "link": "https://stackoverflow.com/questions/49502260/porting-from-ruby-to-go-find-and-replace-in-a-file/49502719#49502719", "title": "Porting from ruby to go: find and replace in a file", "body": "<p>Turn on multiline mode, and your original pattern will work:</p>\n\n<pre><code>r := regexp.MustCompile(`(?m)^\\s*$`)\n</code></pre>\n\n<p>Demo using strings: <a href=\"https://play.golang.org/p/6TsfgB83WgX\" rel=\"noreferrer\">https://play.golang.org/p/6TsfgB83WgX</a></p>\n"}], "owner": {"reputation": 33, "user_id": 8038257, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0388b283e5bb1e6ccd96ae14ed4ceee0?s=128&d=identicon&r=PG&f=1", "display_name": "KVS7", "link": "https://stackoverflow.com/users/8038257/kvs7"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 87, "favorite_count": 0, "accepted_answer_id": 49502719, "answer_count": 1, "score": 3, "last_activity_date": 1522111200, "creation_date": 1522107491, "question_id": 49502260, "link": "https://stackoverflow.com/questions/49502260/porting-from-ruby-to-go-find-and-replace-in-a-file", "title": "Porting from ruby to go: find and replace in a file", "body": "<p>I am porting some ruby code to golang.  I'm having difficulty finding a good equivalent for the below line and wondered if someone knew of a better solution than what I have below.  The basic premise is find a line in a file that has a lot of spaces and remove the line.</p>\n\n<p>I also thought of just using exec to call sed -i but when I tried that it didn't work, and the below did finally work.</p>\n\n<p>Ruby:</p>\n\n<pre><code>File.write(filename, File.read(filename).gsub(/^\\s*$/,\"\"))\n</code></pre>\n\n<p>Golang:</p>\n\n<pre><code>b, err := ioutil.ReadFile(filename)\nif err != nil {\n    return\n}\n\n// I happen to know that there will be at least 30 spaces,\n// but I would really prefer to not use a hardcoded value here.\n// I was just never able to make using '^\\s*$' work in the regex.\n\nr := regexp.MustCompile(`[ ]{30,}`)  // there's a space in the []\nnewb := r.ReplaceAll(b, []byte(\"\"))\nerr = ioutil.WriteFile(filename, newb, 0666)\nif err != nil {\n    fmt.Printf(\"Unable to write to file (%+v)\\n\", err)\n    return\n}\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "rubygems", "bundler"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 2, "creation_date": 1522105293, "post_id": 49501656, "comment_id": 86007918, "body": "Have you tried <code>bin&#47;rails s</code>? Note you don&#39;t run the built-in Rails server in production, you use something like <a href=\"https://www.phusionpassenger.com\" rel=\"nofollow noreferrer\">Passenger</a> for hosting."}, {"owner": {"reputation": 3411, "user_id": 294022, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/qsrDd.jpg?s=128&g=1", "display_name": "GorillaApe", "link": "https://stackoverflow.com/users/294022/gorillaape"}, "edited": false, "score": 0, "creation_date": 1522157601, "post_id": 49501656, "comment_id": 86033353, "body": "there is a hidden folder .bundle/config holding that information. Do you have it ?"}, {"owner": {"reputation": 87, "user_id": 2014614, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/bcf82614395ca5033438c7b6047da721?s=128&d=identicon&r=PG", "display_name": "Jason Burgett", "link": "https://stackoverflow.com/users/2014614/jason-burgett"}, "edited": false, "score": 0, "creation_date": 1522201387, "post_id": 49501656, "comment_id": 86055422, "body": "Actually, I don&#39;t have a <code>.bundle</code> directory in my project at all. It does seem like everything has been downloaded into the <code>vendor&#47;bundle</code> directory however."}], "owner": {"reputation": 87, "user_id": 2014614, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/bcf82614395ca5033438c7b6047da721?s=128&d=identicon&r=PG", "display_name": "Jason Burgett", "link": "https://stackoverflow.com/users/2014614/jason-burgett"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 57, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1522103524, "creation_date": 1522103524, "question_id": 49501656, "link": "https://stackoverflow.com/questions/49501656/how-do-i-execute-my-rails-app-after-issuing-a-bundle-deployment", "title": "How do I execute my rails app after issuing a bundle --deployment?", "body": "<p>I understand that running the above command will install all of the gems necessary for my rails app to work properly into <code>vendor/bundle</code>. I believe I should then be able to copy the entire app directory to any system that has a compatible version of Ruby running on it and run my app without having to install the gems at a system or user level.</p>\n\n<p>My question is, how do I actually execute that app? From what I gather, I should be able to run:</p>\n\n<p><code>bundle exec rails s</code></p>\n\n<p>For the app to look internally for the gems rather than looking to the system to supply them. But, I get the error:</p>\n\n<p><code>bundler: command not found: rails</code></p>\n\n<p>I'd like to be able to do this without altering the PATH variable on the host system if possible.</p>\n"}, {"tags": ["ruby", "rubygems", "byebug"], "answers": [{"comments": [{"owner": {"reputation": 69, "user_id": 5782092, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/r1CSy.jpg?s=128&g=1", "display_name": "Yuri Melo", "link": "https://stackoverflow.com/users/5782092/yuri-melo"}, "edited": false, "score": 0, "creation_date": 1522201417, "post_id": 49502280, "comment_id": 86055427, "body": "Hi there, I&#39;m using Ubuntu. I get the error when I typed: gem install byebug -v &#39;10.0.1&#39; --use-system-libraries ERROR:  While executing gem ... (OptionParser::InvalidOption)     invalid option: --use-system-libraries"}, {"owner": {"reputation": 69, "user_id": 5782092, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/r1CSy.jpg?s=128&g=1", "display_name": "Yuri Melo", "link": "https://stackoverflow.com/users/5782092/yuri-melo"}, "edited": false, "score": 0, "creation_date": 1522201637, "post_id": 49502280, "comment_id": 86055473, "body": "which ruby -&gt; /usr/bin/ruby ruby -v -&gt; ruby 2.3.1p112 (2016-04-26) [i386-linux-gnu] gem -v -&gt; 2.7.6 echo &quot;${PATH//:/\\n}&quot; -&gt; /usr/local/sbinn/usr/local/binn/usr/sbinn/usr/binn/sbinn/bin&zwnj;&#8203;n/usr/gamesn/usr/loc&zwnj;&#8203;al/gamesn/snap/binn/&zwnj;&#8203;home/yuri/.rvm/binn/&zwnj;&#8203;home/yuri/.rvm/bin"}, {"owner": {"reputation": 69, "user_id": 5782092, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/r1CSy.jpg?s=128&g=1", "display_name": "Yuri Melo", "link": "https://stackoverflow.com/users/5782092/yuri-melo"}, "edited": false, "score": 0, "creation_date": 1522201714, "post_id": 49502280, "comment_id": 86055493, "body": "rvm -v ---&gt; rvm 1.29.3 (latest) by Michal Papis, Piotr Kuczynski, Wayne E. Seguin [<a href=\"https://rvm.io]\" rel=\"nofollow noreferrer\">rvm.io]</a>"}, {"owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "reply_to_user": {"reputation": 69, "user_id": 5782092, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/r1CSy.jpg?s=128&g=1", "display_name": "Yuri Melo", "link": "https://stackoverflow.com/users/5782092/yuri-melo"}, "edited": false, "score": 0, "creation_date": 1522201918, "post_id": 49502280, "comment_id": 86055529, "body": "What type of application?  Is there a Gemfile in your project root?"}, {"owner": {"reputation": 69, "user_id": 5782092, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/r1CSy.jpg?s=128&g=1", "display_name": "Yuri Melo", "link": "https://stackoverflow.com/users/5782092/yuri-melo"}, "edited": false, "score": 1, "creation_date": 1522202213, "post_id": 49502280, "comment_id": 86055592, "body": "It worked out now. Greats. I think that was some updating that I done yesterday"}, {"owner": {"reputation": 69, "user_id": 5782092, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/r1CSy.jpg?s=128&g=1", "display_name": "Yuri Melo", "link": "https://stackoverflow.com/users/5782092/yuri-melo"}, "edited": false, "score": 1, "creation_date": 1522202285, "post_id": 49502280, "comment_id": 86055607, "body": "Thank you so much for helping!"}], "tags": [], "owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "is_accepted": false, "score": 0, "last_activity_date": 1522202643, "last_edit_date": 1522202643, "creation_date": 1522107615, "answer_id": 49502280, "question_id": 49501168, "link": "https://stackoverflow.com/questions/49501168/error-when-try-install-byebug/49502280#49502280", "title": "error when try install byebug", "body": "<p>This error <code>mkmf.rb can't find header files for ruby at /usr/lib/ruby/include/ruby.h</code> is telling you it can't find the header file needed to build the gem.  </p>\n\n<p>Also, why are you installing with <code>sudo</code> ?  What system are you on? Are you using a version manager <code>rvm</code> or <code>rbenv</code> ?   I recommend <a href=\"https://rvm.io/rvm/install\" rel=\"nofollow noreferrer\">https://rvm.io/rvm/install</a></p>\n\n<p>Try to install with system libraries</p>\n\n<pre><code>gem install byebug -v '10.0.1' --use-system-libraries\n</code></pre>\n\n<p>If that doesn't work please run the following commands and post their output:</p>\n\n<pre><code>which ruby\nruby -v\ngem -v\necho \"${PATH//:/\\n}\" #may not work if your not on an *nix system\n</code></pre>\n\n<p>UPDATE:</p>\n\n<p>Go to root of the project.  Pick a ruby version but it looks like the ruby is pointing to a system ruby, not an rvm version.  Try install a new ruby:</p>\n\n<pre><code>rvm install 2.4.1\nrvm use 2.4.1\ngem install byebug\n</code></pre>\n\n<p>If you have a Gemfile in your project and if it has <code>ruby -v</code> make sure it matches your version you set with rvm and add <code>gem 'byebug'</code> to your Gemfile then run</p>\n\n<pre><code>bundle install\n</code></pre>\n"}], "owner": {"reputation": 69, "user_id": 5782092, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/r1CSy.jpg?s=128&g=1", "display_name": "Yuri Melo", "link": "https://stackoverflow.com/users/5782092/yuri-melo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1134, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1522202643, "creation_date": 1522100905, "question_id": 49501168, "link": "https://stackoverflow.com/questions/49501168/error-when-try-install-byebug", "title": "error when try install byebug", "body": "<p>I get the error when I try to install byebug.\nWhat's the reason for this?</p>\n\n<pre><code>sudo gem install byebug -v '10.0.1'\nBuilding native extensions. This could take a while...\nERROR:  Error installing byebug:\n    ERROR: Failed to build gem native extension.\n\n    current directory: /var/lib/gems/2.3.0/gems/byebug-10.0.1/ext/byebug\n/usr/bin/ruby2.3 -r ./siteconf20180326-12662-69j4pj.rb extconf.rb\nmkmf.rb can't find header files for ruby at /usr/lib/ruby/include/ruby.h\n\nextconf failed, exit code 1\n\nGem files will remain installed in /var/lib/gems/2.3.0/gems/byebug-10.0.1 for inspection.\nResults logged to /var/lib/gems/2.3.0/extensions/x86-linux/2.3.0/byebug-10.0.1/gem_make.out\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "authentication", "devise"], "answers": [{"tags": [], "owner": {"reputation": 1072, "user_id": 1566489, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6584d3f0db98cba147f20ec853c48a3a?s=128&d=identicon&r=PG", "display_name": "Gregoire Mulliez", "link": "https://stackoverflow.com/users/1566489/gregoire-mulliez"}, "is_accepted": false, "score": 0, "last_activity_date": 1522105902, "creation_date": 1522105902, "answer_id": 49502043, "question_id": 49500697, "link": "https://stackoverflow.com/questions/49500697/rails-how-to-model-user-patient-and-doctor/49502043#49502043", "title": "Rails : How to model User, Patient and Doctor", "body": "<p>I am working on a similar project, I created 2 devise models and, maybe because of my lake of experience, I rewrote most of the functionalities I needed. IMO Devise is like scaffolding, it's nice at the beginning but when you have change your logic it's getting bad</p>\n\n<p>What I achieved : one devise model, for my 'doctors', because I am too lazy to avoid using current_user in my admin</p>\n\n<p>A lot of has_many :through, KISS (Keep it simple, stupid)</p>\n\n<p>My experience, after 3 months on this model</p>\n\n<p>Gr\u00e9goire</p>\n"}], "owner": {"reputation": 15, "user_id": 9382728, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7086859cac16871697c9b87db0231937?s=128&d=identicon&r=PG&f=1", "display_name": "Mohamed Ahmed", "link": "https://stackoverflow.com/users/9382728/mohamed-ahmed"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 284, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1522264726, "creation_date": 1522098814, "question_id": 49500697, "link": "https://stackoverflow.com/questions/49500697/rails-how-to-model-user-patient-and-doctor", "title": "Rails : How to model User, Patient and Doctor", "body": "<p>I am building a doctor appointment web application much like : practo and zocdoc.</p>\n\n<p>I have a patient with his personal information name and all the date, a patient can book an appointment with any doctor.</p>\n\n<p>A doctor with his personal information much like the patient and his professional data like education experience etc ...</p>\n\n<p>\u064eA doctor will have a very different dashboard than the patient to manage his appointments, calendar, patients, rapports and more, also the doctor will have to be confirmed by the administration for his account to be visible.</p>\n\n<p>I am very confused about how to handle the authentication using devise.</p>\n\n<p>I was thinking of having a User devise model that belongs to patient and belongs to a doctor.</p>\n\n<p>Both Patient and Doctor has_one :user. Then I will have two registrations pages one for doctor and the other for a patient to pass the type attribute.</p>\n\n<p>Or Using two devise models one for patient and other for doctor.</p>\n\n<p>I tried using polymorphic association but I think it's not stable solution.\nI need guidance about the best approach to achieve this.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 107, "user_id": 1200840, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/7772f79201c0f70d0fa895c4b20a7b55?s=128&d=identicon&r=PG", "display_name": "amarradi", "link": "https://stackoverflow.com/users/1200840/amarradi"}, "edited": false, "score": 0, "creation_date": 1522099114, "post_id": 49500226, "comment_id": 86005611, "body": "do you need the info, then you have to save the data.  Maybe you can use the state-machine <a href=\"https://github.com/pluginaweek/state_machine\" rel=\"nofollow noreferrer\">github.com/pluginaweek/state_machine</a> requested_id is not so good. Rails used _id columns as columns for foreign-keys."}, {"owner": {"reputation": 26120, "user_id": 219883, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c35b5b0f9e7cce48864f4f1545ead995?s=128&d=identicon&r=PG", "display_name": "Taryn East", "link": "https://stackoverflow.com/users/219883/taryn-east"}, "edited": false, "score": 0, "creation_date": 1522109213, "post_id": 49500226, "comment_id": 86009040, "body": "Yes, I would definitely add <code>requested_by</code> column. Then you can do something like <code>if listing.requested_by == listing.owner</code> to figure out whether the person requesting is the owner or another user."}, {"owner": {"reputation": 2885, "user_id": 3372172, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Q3RaO.png?s=128&g=1", "display_name": "Pablo", "link": "https://stackoverflow.com/users/3372172/pablo"}, "edited": false, "score": 0, "creation_date": 1522110519, "post_id": 49500226, "comment_id": 86009331, "body": "Just a comment. I think you need to use <code>user_id: current_user.id</code> or <code>user_id: user.id</code> in show. Is it working ok without the <code>.id</code>?"}, {"owner": {"reputation": 370, "user_id": 4657565, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ingejXhdSic/AAAAAAAAAAI/AAAAAAAAABQ/aVAF1TaNnrU/photo.jpg?sz=128", "display_name": "Mohammed", "link": "https://stackoverflow.com/users/4657565/mohammed"}, "reply_to_user": {"reputation": 26120, "user_id": 219883, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c35b5b0f9e7cce48864f4f1545ead995?s=128&d=identicon&r=PG", "display_name": "Taryn East", "link": "https://stackoverflow.com/users/219883/taryn-east"}, "edited": false, "score": 0, "creation_date": 1522263925, "post_id": 49500226, "comment_id": 86092082, "body": "Thanks @TarynEast for your answer, Not sure why amarradi dose not agree with this idea.. Hi Pablo, Its working fine without add .id :) I think Rails smart to know that or anyone could explain better for us."}], "owner": {"reputation": 370, "user_id": 4657565, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ingejXhdSic/AAAAAAAAAAI/AAAAAAAAABQ/aVAF1TaNnrU/photo.jpg?sz=128", "display_name": "Mohammed", "link": "https://stackoverflow.com/users/4657565/mohammed"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 68, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1522096710, "creation_date": 1522096710, "question_id": 49500226, "link": "https://stackoverflow.com/questions/49500226/rails-relationship-between-company-and-workers", "title": "Rails relationship between Company and workers", "body": "<p>I am still new to Rails and learning to build a simple app.\nThe idea is there is a user who can create a post \"listing\" and the user can join that listing. user can join or the listing's owner can add users and its need approve from the other side. </p>\n\n<p>erd:\n<a href=\"https://www.dropbox.com/s/ux0e78g8l3c38p6/erd.pdf?dl=0\" rel=\"nofollow noreferrer\">https://www.dropbox.com/s/ux0e78g8l3c38p6/erd.pdf?dl=0</a></p>\n\n<p>How can I check if the user already joined listing from listing view and user view? \nif a user request to join listing then the listing in set to pending, but how can I only allow the owner of listing to approve it?\nAnd if a listing's owner request to add user, how I only allow that user to approve the request? \nShould I create new column for ex: requested_by to check who created the relationship and check for that? or any other way?\nThanks</p>\n\n<p>User model: user.rb</p>\n\n<pre><code>class User &lt; ApplicationRecord\n\nhas_many :employeeships\n\nhas_many :pending_listings,   -&gt; {where employeeships: { status: 0 }}, :through =&gt; :employeeships, source: :listing\nhas_many :accepted_listings,  -&gt; {where employeeships: { status: 1 }}, :through =&gt; :employeeships, source: :listing\n\n# User owner listing relation\nhas_many :listings, -&gt;{ order \"created_at Desc\" }\n\nend\n</code></pre>\n\n<p>Listing model: listing.rb</p>\n\n<pre><code>class Listing &lt; ApplicationRecord\n\n  has_many :employeeships\n\n  has_many :pending_users,   -&gt; {where employeeships: { status: 0 }}, :through =&gt; :employeeships, source: :user\n  has_many :accepted_users,  -&gt; {where employeeships: { status: 1 }}, :through =&gt; :employeeships, source: :user\n\n\n  # User owner listing relation\n  belongs_to :user\nend\n</code></pre>\n\n<p>Employeeship model: employeeship.rb</p>\n\n<pre><code>class Employeeship &lt; ApplicationRecord\n  belongs_to :user\n  belongs_to :listing\n\n  # User status for listings\n  enum status: [ :pending, :accepted ]\n\nend\n</code></pre>\n\n<p>Employeeships controller: employeeships_controller.rb</p>\n\n<pre><code>class EmployeeshipsController &lt; ApplicationController\n\n  def create\n    listing = Listing.find(params[:listing_id])\n    user = User.find(params[:user_id])\n    @user_listing = Employeeship.create(user: user, listing: listing, status: 0)\n    flash[:info] = \"#{@user_listing.user.name} was successfully added to #{@user_listing.listing.title}\"\n    redirect_to listing\n  end\n\n\n\n  def update\n    user = params[:user_id]\n    listing = params[:listing_id]\n    @employeeship = Employeeship.where(user: user, listing: listing).first\n    @employeeship.status = 1\n    if @employeeship.update(employeeship_params)\n      flash[:success] = \"Employeeship was successfully accepted.\"\n      redirect_to request.referrer\n    end\n  end\n\n  def destroy\n    user = params[:user_id]\n    listing = params[:listing_id]\n    @employeeship = Employeeship.where(user: user, listing: listing).first\n    @employeeship.destroy\n    flash[:success] = \"Employeeship was successfully deleted.\"\n    #redirect_to listing_path()\n    redirect_to request.referrer\n  end\n\n\n  private\n    def employeeship_params\n      params.permit(:user, :listing, :status)\n    end\n\nend\n</code></pre>\n\n<p>Routes.eb</p>\n\n<pre><code>resources :users\n\nresources :listings\n\nresources :employeeships, only: [:create, :destroy, :update]\n</code></pre>\n\n<p>Listings/show.html.rb</p>\n\n<pre><code>&lt;%= link_to 'Join Listing', employeeships_path(user_id: current_user, listing_id: @listing.id), method: :post %&gt;\n\n&lt;% @listing.pending_users.each do |user| %&gt;\n    &lt;%= link_to user.name, user_path(user) %&gt;\n    &lt;%= link_to 'Accept', employeeship_path(user_id: user, listing_id: @listing.id), method: :put, data: { confirm: \"Are you sure?\"} %&gt;\n    &lt;%= link_to 'Cancel', employeeship_path(user_id: user, listing_id: @listing.id), method: :delete, data: { confirm: \"Are you sure?\"} %&gt;\n&lt;% end %&gt;\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "xml-parsing", "saxparser"], "answers": [{"tags": [], "owner": {"reputation": 397, "user_id": 1642511, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1f2c418f2e87d63e2ccbf538ed70fdb?s=128&d=identicon&r=PG", "display_name": "Eric Himmelreich", "link": "https://stackoverflow.com/users/1642511/eric-himmelreich"}, "is_accepted": false, "score": 0, "last_activity_date": 1522179068, "creation_date": 1522179068, "answer_id": 49521050, "question_id": 49499879, "link": "https://stackoverflow.com/questions/49499879/how-to-use-sax-parser-for-large-xml-file-on-ruby-on-rails/49521050#49521050", "title": "How to use SAX parser for large XML file on Ruby on Rails", "body": "<p>You should try <a href=\"https://github.com/ohler55/ox\" rel=\"nofollow noreferrer\">Ox</a></p>\n\n<p>It also has some SAX examples <a href=\"http://www.ohler.com/ox/#label-SAX+XML+Parsing-3A\" rel=\"nofollow noreferrer\">in the documentation</a></p>\n\n<pre><code>require 'stringio'\nrequire 'ox'\n\nclass Sample &lt; ::Ox::Sax\n  def start_element(name); puts \"start: #{name}\";        end\n  def end_element(name);   puts \"end: #{name}\";          end\n  def attr(name, value);   puts \"  #{name} =&gt; #{value}\"; end\n  def text(value);         puts \"text #{value}\";         end\nend\n\nio = StringIO.new(%{\n&lt;top name=\"sample\"&gt;\n  &lt;middle name=\"second\"&gt;\n    &lt;bottom name=\"third\"/&gt;\n  &lt;/middle&gt;\n&lt;/top&gt;\n})\n\nhandler = Sample.new()\nOx.sax_parse(handler, io)\n</code></pre>\n"}], "owner": {"reputation": 26, "user_id": 9460103, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60ff0c1c8e710f0e368f06c3849a0b55?s=128&d=identicon&r=PG&f=1", "display_name": "angeldev", "link": "https://stackoverflow.com/users/9460103/angeldev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 150, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1522179068, "creation_date": 1522095291, "last_edit_date": 1522104776, "question_id": 49499879, "link": "https://stackoverflow.com/questions/49499879/how-to-use-sax-parser-for-large-xml-file-on-ruby-on-rails", "title": "How to use SAX parser for large XML file on Ruby on Rails", "body": "<p>I'm going to parse the large XML on Ruby on Rails.\nI've checked many solutions, including SAX-parser, but the help link is not working now.\n(<a href=\"https://stackoverflow.com/questions/14662728/using-sax-parser-to-get-several-sub-nodes\">Using SAX Parser to get several sub-nodes?</a>)</p>\n\n<p>I'm a newbie. If someone have a code working well, please share for beginners.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "postgresql", "activerecord"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1522087967, "post_id": 49497918, "comment_id": 85999870, "body": "&quot;<code>.first</code> retrieves all data from the table and then pulls the first record&quot; - no, it doesn&#39;t. At least on my machine. Here it correctly applies <code>LIMIT 1</code> to the query."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1522088124, "post_id": 49497918, "comment_id": 85999957, "body": "It could happen that <code>mcc</code> in <code>@e.mcc</code> is not a normal <code>has_many</code> relation. But is instead a custom method which fetches some data (or something like that). In which cast, it&#39;s this <code>mcc</code> method that is responsible for reading all that data, not <code>first</code>."}, {"owner": {"reputation": 39, "user_id": 9273301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca7c6bb0a2c6cd0fab56b84fc97cc102?s=128&d=identicon&r=PG&f=1", "display_name": "Wayne E. Pfeffer", "link": "https://stackoverflow.com/users/9273301/wayne-e-pfeffer"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1522088262, "post_id": 49497918, "comment_id": 86000036, "body": "Thank you, I will look into that."}], "answers": [{"tags": [], "owner": {"reputation": 39, "user_id": 9273301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca7c6bb0a2c6cd0fab56b84fc97cc102?s=128&d=identicon&r=PG&f=1", "display_name": "Wayne E. Pfeffer", "link": "https://stackoverflow.com/users/9273301/wayne-e-pfeffer"}, "is_accepted": false, "score": 0, "last_activity_date": 1522176843, "creation_date": 1522176843, "answer_id": 49520456, "question_id": 49497918, "link": "https://stackoverflow.com/questions/49497918/what-ruby-on-rails-methods-return-a-full-data-set-before-filtering/49520456#49520456", "title": "What ruby on rails methods return a full data set before filtering?", "body": "<p>Figured out the solution. Using <code>.find_by()</code> solved the issue I was having. The line of code now looks like this:</p>\n\n<pre><code>@al ||= CC.find_by(id: (MCC.find_by(export_id: @e.id).cc_id)).additional_languages&amp;.split(',') || [] \n</code></pre>\n\n<p>Thank you all for your help.</p>\n"}], "owner": {"reputation": 39, "user_id": 9273301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca7c6bb0a2c6cd0fab56b84fc97cc102?s=128&d=identicon&r=PG&f=1", "display_name": "Wayne E. Pfeffer", "link": "https://stackoverflow.com/users/9273301/wayne-e-pfeffer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 35, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1522176843, "creation_date": 1522087714, "question_id": 49497918, "link": "https://stackoverflow.com/questions/49497918/what-ruby-on-rails-methods-return-a-full-data-set-before-filtering", "title": "What ruby on rails methods return a full data set before filtering?", "body": "<p><strong>Database:</strong> PostgreSQL 9.6.6<br/>\n<strong>Rails Version:</strong> 5.0.2<br/>\n<strong>Ruby Version:</strong> 2.3.1p112 (2016-04-26 revision 54768) [x86_64-darwin16]<br/></p>\n\n<p>I am working on debugging a piece of application code that returns a subset of data and one of the problems that I'm seeing is that Rails' Active Record is returning all data before filtering. The line of code that I'm debugging is:</p>\n\n<pre><code>@al ||= CC.find(@e.mcc.first.cc_id).additional_languages&amp;.split(',') || []\n</code></pre>\n\n<p>The <code>.first</code> method retrieves all data from the table and then pulls the first record. There are over 91 million rows in the table and I would like it if the query didn't pull all of those back prior to grabbing the <code>.first</code> row.</p>\n\n<p>Is there a list or some documentation that will tell me which rails methods return a full result set and which ones do not?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1522087186, "post_id": 49497734, "comment_id": 85999481, "body": "A <code>&#47;24</code> is only 256 addresses, so if you&#39;re having memory problems you should dig deeper to find out why."}, {"owner": {"reputation": 23, "user_id": 9142876, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/V6NfJ.jpg?s=128&g=1", "display_name": "Derek", "link": "https://stackoverflow.com/users/9142876/derek"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1522087443, "post_id": 49497734, "comment_id": 85999609, "body": "I agree, it seems like it shouldn&#39;t run out of memory, the total amount between all the subnets in the site is roughly 415, but with 8gb of ram I am still at a loss as to why I&#39;m running out of memory. If I run the code against a smaller subset it works fine. I don&#39;t know the limit yet but I do know against say 24 ip addresses it doesn&#39;t choke out."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1522088084, "post_id": 49497734, "comment_id": 85999935, "body": "My usual technique in situations like this is to delete or comment out code until the problem goes away, then enable things selectively until it happens again, finding out precisely what triggers that behaviour."}, {"owner": {"reputation": 23, "user_id": 9142876, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/V6NfJ.jpg?s=128&g=1", "display_name": "Derek", "link": "https://stackoverflow.com/users/9142876/derek"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1522088622, "post_id": 49497734, "comment_id": 86000241, "body": "With the way lines are printed to the screen in the code previous to this section, it is this section that is causing the problem. My issue is I&#39;m not adept with the debugging tools to see why the memory just keeps increasing as soon as it goes to create the array in line 2."}, {"owner": {"reputation": 23, "user_id": 9142876, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/V6NfJ.jpg?s=128&g=1", "display_name": "Derek", "link": "https://stackoverflow.com/users/9142876/derek"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1522093489, "post_id": 49497734, "comment_id": 86002876, "body": "Ran a heap dump and the file became 13Gb in size. Not sure what to look for at the moment as every parse method fails due to size, however I the best I can tell is it is holding on to each ip address so in total 449 ip addresses and is allocating 40bytes to each address. It is then holding on to each address and never releases the arrays."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1522093585, "post_id": 49497734, "comment_id": 86002932, "body": "Heap dumps aren&#39;t very useful. Like I said, try and disable code until the problem goes away, then carefully re-enable things until it comes back. You may be creating huge garbage-filled structures the garbage collector can&#39;t deal with."}, {"owner": {"reputation": 23, "user_id": 9142876, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/V6NfJ.jpg?s=128&g=1", "display_name": "Derek", "link": "https://stackoverflow.com/users/9142876/derek"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1522152397, "post_id": 49497734, "comment_id": 86029231, "body": "I found the memory leak, problem is it is a necessary function and I don&#39;t know how to fix it. Where it maps out the IP Range in line 2 (ip.from..ip.to).map(&amp;to_s) it consumes all available memory and swap. So how can I get the same results without the memory consumption?"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1522168365, "post_id": 49497734, "comment_id": 86041721, "body": "What values of <code>from</code> and <code>to</code> are you dealing with when that happens?"}], "owner": {"reputation": 23, "user_id": 9142876, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/V6NfJ.jpg?s=128&g=1", "display_name": "Derek", "link": "https://stackoverflow.com/users/9142876/derek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 36, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1522087338, "creation_date": 1522087098, "last_edit_date": 1522087338, "question_id": 49497734, "link": "https://stackoverflow.com/questions/49497734/only-convert-a-subset-of-iprange-to-ip-array-in-ruby", "title": "Only convert a subset of iprange to ip array in ruby", "body": "<p>I have a range of ip addresses that thanks to some google fu I have been able to take the range and convert to an array of IP addresses. However I am running out of memory when the script is ran against a range of say 10.234.xxx.1/24. As such I am trying to see if there is a way to pull out a subset of 32 addresses so that I don't have this extra memory usage.</p>\n\n<pre><code>  ips.each do |ip|\n    ip_from = ip.instance_of?(Nexpose::HostName) ? ip.host : (ip.from..ip.to).map(&amp;:to_s)\n    ip_from2 = ip_from.select{ |i| /[0-9]*\\.[0-9]*\\.[0-9]*\\.([2-3][0-9]|64)$/ =~ i }\n    ip_from2.each do |ip2|\n      log.log_debug_message(\"Getting credentials for #{ip2}\")\n      secret_summary = ss.get_secret_id(token, ip2)\n      unless secret_summary.nil?\n        log.log_debug_message(\"Found credentials for #{ip2}\")\n        # Gets OS\n        asset_data = {}\n        asset_data[:ip] = ip2\n        res = ss.get_secret_simple(token, secret_summary[:secret_id])\n        asset_data[:username] = res[:username]\n        asset_data[:password] = res[:password]\n        credential = Nexpose::SiteCredential.for_service(ss.check_type(secret_summary[:secret_type]),\n                                                    asset_data[:username],\n                                                    asset_data[:password],\n                                                    nil,\n                                                    ip2)\n</code></pre>\n\n<p>I would like to only have it hold 32 addresses in the array as you can see in the select statement on line 3. Any help is appreciated.</p>\n\n<p>Sidenote: I have modified the nexpose_thycotic gem to make this work for my purposes. I am working through rapid7 as well but I was hoping someone on StackOverflow may be able to answer a little quicker as this is a time sensitive matter.</p>\n"}, {"tags": ["arrays", "ruby", "hashmap"], "comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1522105274, "post_id": 49496940, "comment_id": 86007912, "body": "It&#39;s a no-no to change the question after answers have been posted, for obvious reasons."}, {"owner": {"reputation": 69864, "user_id": 421018, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/e8lcr.jpg?s=128&g=1", "display_name": "Fogmeister", "link": "https://stackoverflow.com/users/421018/fogmeister"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1522105379, "post_id": 49496940, "comment_id": 86007936, "body": "@CarySwoveland wtf, lol! That\u2019s the most bizarre thing I\u2019ve ever heard. Of course you can change questions even after answers have been posted. That\u2019s what the edit button is for. Yes, it\u2019s not ideal but i realised that the question needed more info. Lol! You\u2019re a funny guy."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1522123670, "post_id": 49496940, "comment_id": 86012532, "body": "It&#39;s true, I&#39;m funny, but in this instance I&#39;m serious. Changes to questions can and often do render answers incorrect or even nonsensical. All of the answers given here can now be faulted because they don&#39;t address your edit, but most readers will not be aware that the edit was done after the answers were posted. The edit button is for clarifying the question, not changing it. (cont.)"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1522124012, "post_id": 49496940, "comment_id": 86012637, "body": "(cont.) See the Community Wiki answer (concerning editing questions) <a href=\"https://meta.stackexchange.com/questions/11474/what-is-the-etiquette-for-modifying-posts\">here</a>: &quot;You edit to make things better, clearer, more effective -- <i>never to change meaning</i> [my emphasis].&quot; That pertains to anyone editing a question, including the asker. Aside: your antepenultimate paragraph needs clarification. (I would have mentioned that even if I didn&#39;t have the opportunity to use that word.)"}, {"owner": {"reputation": 69864, "user_id": 421018, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/e8lcr.jpg?s=128&g=1", "display_name": "Fogmeister", "link": "https://stackoverflow.com/users/421018/fogmeister"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1522130912, "post_id": 49496940, "comment_id": 86014873, "body": "I did clarify the question. I have asked people to make bigger changes to their own questions after answering them myself. In the 8 years I\u2019ve been using StackOverflow I\u2019ve never heard any such rule about editing questions. Sorry you didn\u2019t like the edit. But what option was there? Leave it here and not get an answer to the question I wanted? Delete it in order to replicate it and add a sentence to the end? I get that you shouldn\u2019t ask a question and then change it to something entirely unrelated (I have seen that before) but that is not what I\u2019ve done."}], "answers": [{"comments": [{"owner": {"reputation": 69864, "user_id": 421018, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/e8lcr.jpg?s=128&g=1", "display_name": "Fogmeister", "link": "https://stackoverflow.com/users/421018/fogmeister"}, "edited": false, "score": 0, "creation_date": 1522088265, "post_id": 49497036, "comment_id": 86000039, "body": "Hi. I have cleared up some ambiguity in my question. Sorry for the ambiguous question in the first place."}, {"owner": {"reputation": 69864, "user_id": 421018, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/e8lcr.jpg?s=128&g=1", "display_name": "Fogmeister", "link": "https://stackoverflow.com/users/421018/fogmeister"}, "edited": false, "score": 0, "creation_date": 1522088586, "post_id": 49497036, "comment_id": 86000222, "body": "thanks. Will have a look tomorrow and try to implement it. :-)"}], "tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": false, "score": 2, "last_activity_date": 1522088530, "last_edit_date": 1522088530, "creation_date": 1522084443, "answer_id": 49497036, "question_id": 49496940, "link": "https://stackoverflow.com/questions/49496940/ruby-iterating-array-of-dictionaries/49497036#49497036", "title": "Ruby iterating array of dictionaries", "body": "<p>First you'll want to define the key preference in a constant:</p>\n\n<pre><code>PECKING_ORDER = %w[ person dog fruit ]\n</code></pre>\n\n<p>Then you can use that to find it:</p>\n\n<pre><code>def detect(item)\n  PECKING_ORDER.lazy.map do |key|\n    [ key, item.dig(key) ]\n  end.find do |key, v|\n    v\n  end\nend\n</code></pre>\n\n<p>Where that can dig up the first item that's found. <code>lazy</code> is used here so it doesn't dig them all up needlessly, just does them one at a time until there's a hit.</p>\n\n<p>This gives you a key/value pair which you can use with dynamic dispatch:</p>\n\n<pre><code>items.each do |item|\n  key, value = detect(item)\n\n  if (key)\n    send(:\"transform_#{key}\", value)\n  end\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 69864, "user_id": 421018, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/e8lcr.jpg?s=128&g=1", "display_name": "Fogmeister", "link": "https://stackoverflow.com/users/421018/fogmeister"}, "edited": false, "score": 0, "creation_date": 1522088445, "post_id": 49497101, "comment_id": 86000138, "body": "I like this idea (if I don\u2019t fully understand it). I will have a look tomorrow to have a go at it. Thanks."}, {"owner": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "reply_to_user": {"reputation": 69864, "user_id": 421018, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/e8lcr.jpg?s=128&g=1", "display_name": "Fogmeister", "link": "https://stackoverflow.com/users/421018/fogmeister"}, "edited": false, "score": 0, "creation_date": 1528923427, "post_id": 49497101, "comment_id": 88695822, "body": "did I answer your question?"}], "tags": [], "owner": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "is_accepted": false, "score": 1, "last_activity_date": 1522085736, "last_edit_date": 1522085736, "creation_date": 1522084688, "answer_id": 49497101, "question_id": 49496940, "link": "https://stackoverflow.com/questions/49496940/ruby-iterating-array-of-dictionaries/49497101#49497101", "title": "Ruby iterating array of dictionaries", "body": "<p>if you know the mapping, you could make a pseudo factory hash:</p>\n\n<pre><code>methods_mapped = {\n  \"person\" =&gt; -&gt;(person) { do_something_with_person(person) },\n  \"dog\" =&gt; -&gt;(dog) { do_something_with_dog(dog) },\n  \"fruit\" =&gt; -&gt;(fruit) { do_something_with_fruit(fruit) }\n}\n\nitems.map do |item|\n  key = item.keys.first # what if keys.size &gt; 1 ?\n  method = methods_mapped.fetch(key)\n  method.call(item[key])\nend\n</code></pre>\n\n<p>or you could it from the opposite direction:</p>\n\n<pre><code>methods_mapped.each do |key, method|\n  method.call(items.dig(key))\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1522090866, "post_id": 49497198, "comment_id": 86001453, "body": "The first continues to execute after  <code>item.dig(...)</code> is <code>true</code>. Why <code>item.dig</code> rather than simply <code>item.key?(...)</code>?"}], "tags": [], "owner": {"reputation": 9165, "user_id": 655769, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/ylFlJ.jpg?s=128&g=1", "display_name": "rorra", "link": "https://stackoverflow.com/users/655769/rorra"}, "is_accepted": false, "score": 0, "last_activity_date": 1522085108, "creation_date": 1522085108, "answer_id": 49497198, "question_id": 49496940, "link": "https://stackoverflow.com/questions/49496940/ruby-iterating-array-of-dictionaries/49497198#49497198", "title": "Ruby iterating array of dictionaries", "body": "<p>I would kept it simple:</p>\n\n<pre><code>items.map do |item|\n  do_something_with_person(item) if item.dig('person')\n  do_something_with_dog(item) if item.dig('dog')\n  do_something_with_fruit(item) if item.dig('fruit')\nend\n</code></pre>\n\n<p>or</p>\n\n<pre><code>items.each do |item|\n  case item\n    when item.dig('person') then do_something_with_person(item)\n    when item.dig('dog') then do_something_with_dog(item)\n    when item.dig('fruit') then do_something_with_fruit(item)\n  end\nend\n</code></pre>\n\n<p>or</p>\n\n<pre><code>def do_something(item)\n  case\n    when item.dig('person') then do_something_with_person(item)\n    when item.dig('dog') then do_something_with_dog(item)\n    when item.dig('fruit') then do_something_with_fruit(item)\n  end\nend\nitems.map { |item| do_something(item) }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 69864, "user_id": 421018, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/e8lcr.jpg?s=128&g=1", "display_name": "Fogmeister", "link": "https://stackoverflow.com/users/421018/fogmeister"}, "edited": false, "score": 0, "creation_date": 1522097749, "post_id": 49498690, "comment_id": 86004972, "body": "Excellent. This will take a while to sink in. Haha. I will be giving this a try tomorrow. Thanks"}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 1, "last_activity_date": 1522105187, "last_edit_date": 1522105187, "creation_date": 1522090520, "answer_id": 49498690, "question_id": 49496940, "link": "https://stackoverflow.com/questions/49496940/ruby-iterating-array-of-dictionaries/49498690#49498690", "title": "Ruby iterating array of dictionaries", "body": "<p>Let <code>f</code> be a given method that takes as an argument a hash. Without loss of generality, suppose it is as follows. This corresponds to the OP's <code>transform_person</code>, <code>transform_dog</code> and <code>transform_fruit</code> methods combined.</p>\n\n<pre><code>def f(h)\n  case h.keys.first\n  when :person then \"somebody\"\n  when :dog    then \"doggie\" \n  when :fruit  then \"juicy\"\n  end\nend\n</code></pre>\n\n<p>Suppose we are also given (no need for <code>dig</code> here)</p>\n\n<pre><code>items = data[:items]\n  #=&gt; [{:person=&gt;{:name=&gt;\"Melba\"}},\n  #    {:dog=&gt;{:tricks=&gt;[:roll_over, :shake_a_paw]}},\n  #    {:fruit=&gt;{:good=&gt;\"raspberries\"}}]\n</code></pre>\n\n<p>and</p>\n\n<pre><code>key_order = [:bird, :marsupial, :dog, :person]\n</code></pre>\n\n<p>We wish to find the first element <code>k</code> of <code>key_order</code> for which <code>items</code> contains a hash <code>h</code> for which <code>h.key?(k) #=&gt; true</code>. If such a hash <code>h</code> is found we are to then execute <code>f(h)</code>.</p>\n\n<p>First compute a hash <code>key_map</code>.</p>\n\n<pre><code>key_map = items.each_with_object({}) { |g,h| h[g.keys.first] = g }\n  #=&gt; {:person=&gt;{:person=&gt;{:name=&gt;\"Melba\"}},\n  #    :dog=&gt;{:dog=&gt;{:tricks=&gt;[:roll_over, :shake_a_paw]}},\n  #    :fruit=&gt;{:fruit=&gt;{:good=&gt;\"raspberries\"}}}\n</code></pre>\n\n<p>Then we simply execute</p>\n\n<pre><code>k = key_order.find { |k| key_map[k] }\n  #=&gt; :dog\nk ? f(key_map[k]) : nil\n  #=&gt; \"doggie\"\n</code></pre>\n"}], "owner": {"reputation": 69864, "user_id": 421018, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/e8lcr.jpg?s=128&g=1", "display_name": "Fogmeister", "link": "https://stackoverflow.com/users/421018/fogmeister"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 389, "favorite_count": 0, "answer_count": 4, "score": 0, "last_activity_date": 1522105187, "creation_date": 1522084113, "last_edit_date": 1522088207, "question_id": 49496940, "link": "https://stackoverflow.com/questions/49496940/ruby-iterating-array-of-dictionaries", "title": "Ruby iterating array of dictionaries", "body": "<p>I have a JSON data structure like this...</p>\n\n<pre><code>{\n  \"items\": [\n      {\n        \"person\": { // person hash }\n      },\n      {\n        \"dog\": { // dog hash }\n      },\n      {\n        \"fruit\": { // fruit hash }\n      },\n      {\n        \u201cperson\u201d: { // person hash }\n      }\n    ]\n  }\n}\n</code></pre>\n\n<p>Each item in the array contains only one key:value pair. The key is the bot that tells me what type of item the value is.</p>\n\n<p>What I'd like to do is iterate the array and run a different function for each type of item.</p>\n\n<p>So I have something like this...</p>\n\n<pre><code>items = data.dig('items')\n\nitems.map do |item|\n  if person = item.dig('person')\n    transform_person(person)\n  elsif dog = item.dig('dog')\n    transform_dog(dog)\n  elsif fruit = item.dig('fruit')\n    transform_fruit(fruit)\n  end\nend\n</code></pre>\n\n<p>But I feel like there should be a more elegant way to do this?</p>\n\n<p>Apologies. I appear to have left some ambiguity in my question.</p>\n\n<p>The initial array may contain multiple items with the same key. What I am trying to do is map to an array of items that are transformed into what is required by the front end. The input contains a strange structure and info that is not needed by the front end.</p>\n\n<p>So the output array order must match the input array order.</p>\n\n<p>Sorry for the confusion.</p>\n"}, {"tags": ["javascript", "ruby", "amazon-web-services", "alexa"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1522084157, "post_id": 49496045, "comment_id": 85997809, "body": "This is an \u201cI want a pony\u201d question and it\u2019s too broad to give a specific technical answer, making it off-topic here on Stack Overflow. You\u2019ll need to attempt to solve this problem and show your code so we can understand what you\u2019re trying to do on a technical level as well as to demonstrate your commitment to solving this problem."}, {"owner": {"reputation": 124, "user_id": 7479469, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/03cb36fa5b1fa37f5e54c1797f05bcf6?s=128&d=identicon&r=PG&f=1", "display_name": "Zero Soul Eater", "link": "https://stackoverflow.com/users/7479469/zero-soul-eater"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1522090926, "post_id": 49496045, "comment_id": 86001483, "body": "hm, but I&#180;d like to start a projekt and cant find a startpoint. I need a Framework to work with and cant find one"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1522092841, "post_id": 49496045, "comment_id": 86002557, "body": "Both Node.js and Ruby (including Ruby on Rails) are very well supported by Amazon&#39;s SDK."}, {"owner": {"reputation": 124, "user_id": 7479469, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/03cb36fa5b1fa37f5e54c1797f05bcf6?s=128&d=identicon&r=PG&f=1", "display_name": "Zero Soul Eater", "link": "https://stackoverflow.com/users/7479469/zero-soul-eater"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1522093518, "post_id": 49496045, "comment_id": 86002889, "body": "But only usable with AWS?"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1522093534, "post_id": 49496045, "comment_id": 86002901, "body": "Usable on anything that can run Node.js or Ruby."}, {"owner": {"reputation": 124, "user_id": 7479469, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/03cb36fa5b1fa37f5e54c1797f05bcf6?s=128&d=identicon&r=PG&f=1", "display_name": "Zero Soul Eater", "link": "https://stackoverflow.com/users/7479469/zero-soul-eater"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1522098833, "post_id": 49496045, "comment_id": 86005486, "body": "Ok but the official node sdk is not designed to run without (AWS) lamda. It looks like it can run with a workarround. That why there is the Framework I mentioned in my post it is designed to run without AWS. But this Framework doesn&#39;t look like it supports the smarthome API...   and there is no official supported ruby lib?"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1522102036, "post_id": 49496045, "comment_id": 86006854, "body": "It can run anywhere, it&#39;s just an ordinary NPM package."}], "answers": [{"tags": [], "owner": {"reputation": 138098, "user_id": 1695906, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/638d2ec6b52f3db1583890be23d74cc6?s=128&d=identicon&r=PG", "display_name": "Michael - sqlbot", "link": "https://stackoverflow.com/users/1695906/michael-sqlbot"}, "is_accepted": true, "score": 4, "last_activity_date": 1522120177, "creation_date": 1522120177, "answer_id": 49503778, "question_id": 49496045, "link": "https://stackoverflow.com/questions/49496045/alexa-smarthome-skill-without-aws/49503778#49503778", "title": "Alexa Smarthome-Skill without AWS", "body": "<blockquote>\n  <p><em>Is it possible to build a Alexa Smarthome Skill without hosting it on AWS.</em></p>\n</blockquote>\n\n<p>No, it is not -- not entirely, anyway.</p>\n\n<p>Alexa supports hosting <em>custom</em> skills entirely externally.  They call this \"hosting a skill as a web service\" -- that is, a web-accessible endpoint that Alexa can send requests to.  However:</p>\n\n<blockquote>\n  <p>Web services can only be used for custom skills.</p>\n  \n  <p><a href=\"https://developer.amazon.com/docs/custom-skills/host-a-custom-skill-as-a-web-service.html\" rel=\"nofollow noreferrer\">https://developer.amazon.com/docs/custom-skills/host-a-custom-skill-as-a-web-service.html</a></p>\n</blockquote>\n\n<p>Smart Home Skills must be run in Lambda.  Of course, the Lambda function for a Smart Home Skill can make is own external requests to the \"device cloud\" -- whatever that means to you, and which may involve servers of your own -- but this is done using either HTTPS request or requests using any other custom protocol you might use, either way, from inside the Lambda function that Alexa invokes.</p>\n\n<blockquote>\n  <p>Your skill code, <strong>which is hosted as a Lambda function</strong> receives and parses the directive, validating the authentication information. <strong>Your skill communicates with your systems</strong>, or device cloud, using communication channels you've defined to turn on the customer\u2019s kitchen light. <em>(emphasis added)</em></p>\n  \n  <p><a href=\"https://developer.amazon.com/docs/smarthome/understand-the-smart-home-skill-api.html\" rel=\"nofollow noreferrer\">https://developer.amazon.com/docs/smarthome/understand-the-smart-home-skill-api.html</a></p>\n</blockquote>\n"}], "owner": {"reputation": 124, "user_id": 7479469, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/03cb36fa5b1fa37f5e54c1797f05bcf6?s=128&d=identicon&r=PG&f=1", "display_name": "Zero Soul Eater", "link": "https://stackoverflow.com/users/7479469/zero-soul-eater"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3024, "favorite_count": 0, "accepted_answer_id": 49503778, "answer_count": 1, "score": 0, "last_activity_date": 1522120177, "creation_date": 1522080925, "question_id": 49496045, "link": "https://stackoverflow.com/questions/49496045/alexa-smarthome-skill-without-aws", "title": "Alexa Smarthome-Skill without AWS", "body": "<p>Im a little confuse atm.</p>\n\n<p>Is it possible to build a Alexa Smarthome Skill without hosting it on AWS.</p>\n\n<p>For my last custom skill I used <a href=\"https://github.com/alexa-js/alexa-app\" rel=\"nofollow noreferrer\">Alexa-App</a> but this doesn't support the Smarthome-API from Amazon, as far as I know. Also I did not found any library that does support the Smarthome-API.</p>\n\n<p>Maybe you can Help me find a lib, so I can host my Smart home-Skill on my own Server.</p>\n\n<p>Pref language: <strong>JavaScript</strong> and <strong>Ruby</strong></p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 1597, "user_id": 717626, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/303d9f5c2135f14f277775052bcb131b?s=128&d=identicon&r=PG", "display_name": "Aaron Breckenridge", "link": "https://stackoverflow.com/users/717626/aaron-breckenridge"}, "edited": false, "score": 0, "creation_date": 1522078063, "post_id": 49494966, "comment_id": 85994070, "body": "To me, the word <code>Base</code> implies that there could be more than one vehicle and/or driver there (although you&#39;ve made it a <code>belongs_to</code> association instead of a <code>has_many</code>). If that&#39;s the case, nesting is probably not the right thing to do. At the moment, a <code>resource</code> route seems more appropriate than a <code>resources</code> route for a nested vehicle&#39;s or driver&#39;s <code>base</code>."}, {"owner": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "edited": false, "score": 1, "creation_date": 1522080729, "post_id": 49494966, "comment_id": 85995840, "body": "what is a <code>Base</code> modeling?  That word doesn&#39;t mean much to me in this context"}, {"owner": {"reputation": 408, "user_id": 1987724, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/IsH6B.jpg?s=128&g=1", "display_name": "Fam", "link": "https://stackoverflow.com/users/1987724/fam"}, "reply_to_user": {"reputation": 1597, "user_id": 717626, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/303d9f5c2135f14f277775052bcb131b?s=128&d=identicon&r=PG", "display_name": "Aaron Breckenridge", "link": "https://stackoverflow.com/users/717626/aaron-breckenridge"}, "edited": false, "score": 0, "creation_date": 1522082292, "post_id": 49494966, "comment_id": 85996748, "body": "@AaronBreckenridge, please see my updated post (the bottom paragraph). At the moment, I have already decided that Bases will be a singular resource, I&#39;m trying to figure out the best place to put them. I think I might nest it under the Drivers resource, and then set up a <code>has_one :through</code> association for Vehicles so Bases can be easily accessed."}, {"owner": {"reputation": 766, "user_id": 1772133, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf9816fbc30091abe048f667191cc81e?s=128&d=identicon&r=PG", "display_name": "Chris Hall", "link": "https://stackoverflow.com/users/1772133/chris-hall"}, "edited": false, "score": 0, "creation_date": 1522083512, "post_id": 49494966, "comment_id": 85997428, "body": "@Fam I have to echo Aaron.  Given your description of <code>Base</code>, it sounds like it should have <code>has_many</code> associations and the vehicle and driver should <code>belong_to</code> it.  Otherwise, the idea of all drivers for a vehicle being affiliated with the same base breaks down - since only one base can exist for a given vehicle/driver pair.  Having a shared base object seems like it would improve data integrity without functionally changing your domain model."}, {"owner": {"reputation": 408, "user_id": 1987724, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/IsH6B.jpg?s=128&g=1", "display_name": "Fam", "link": "https://stackoverflow.com/users/1987724/fam"}, "reply_to_user": {"reputation": 766, "user_id": 1772133, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf9816fbc30091abe048f667191cc81e?s=128&d=identicon&r=PG", "display_name": "Chris Hall", "link": "https://stackoverflow.com/users/1772133/chris-hall"}, "edited": false, "score": 0, "creation_date": 1522084352, "post_id": 49494966, "comment_id": 85997907, "body": "@ChrisHall, thank you for your input. What would the route structure look like for your suggestion? Should <code>Base</code> exist as a top level resource alongside <code>Insured</code>?"}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1522085938, "post_id": 49494966, "comment_id": 85998769, "body": "@Fam i think the route structure is less important than the model setup. You can easily change the routes at any time."}, {"owner": {"reputation": 766, "user_id": 1772133, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf9816fbc30091abe048f667191cc81e?s=128&d=identicon&r=PG", "display_name": "Chris Hall", "link": "https://stackoverflow.com/users/1772133/chris-hall"}, "edited": false, "score": 0, "creation_date": 1522087081, "post_id": 49494966, "comment_id": 85999415, "body": "@Fam for maximum RESTful-ness, I would say that all of your objects should probably be accessible from the top level, nesting only as circumstance requires.  For example, having a route for <code>&#47;vehicle&#47;:id&#47;base</code> probably makes sense.  Personally, I try to avoid routes like <code>bases&#47;:base_id&#47;vehicles&#47;:vehicle_id</code> unless doing so allows me to do something application specific that just routing to <code>&#47;vehicles&#47;:id</code> wouldn&#39;t."}], "answers": [{"tags": [], "owner": {"reputation": 766, "user_id": 1772133, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf9816fbc30091abe048f667191cc81e?s=128&d=identicon&r=PG", "display_name": "Chris Hall", "link": "https://stackoverflow.com/users/1772133/chris-hall"}, "is_accepted": true, "score": 1, "last_activity_date": 1522087532, "creation_date": 1522087532, "answer_id": 49497860, "question_id": 49494966, "link": "https://stackoverflow.com/questions/49494966/idiomatic-route-structure-for-rails-model-that-belongs-to-multiple-parent-models/49497860#49497860", "title": "Idiomatic route structure for Rails model that belongs_to multiple parent models", "body": "<p>Setting aside the specific models referenced, answering the question of routes for resources with multiple parent models seems more straightforward.</p>\n\n<p>Given a structure similar to:</p>\n\n<pre><code>class Child &lt; ApplicationRecord\n  belongs_to :first_parent\n  belongs_to :second_parent\nend\n\nclass FirstParent &lt; ApplicationRecord\n  has_one :child\nend\n\nclass SecondParent &lt; ApplicationRecord\n  has_one :child\nend\n</code></pre>\n\n<p>I might go for routes like:</p>\n\n<pre><code># This makes changing all parents easier\nconcern :has_child do\n  resource :child\nend\n\nresources :first_parents, concerns: :has_child\n\nresources :second_parents, concerns: :has_child\n\n# Rails may be smart enough for us to use :children instead of :childs\nresources :children do\n  resource :first_parent\n  resource :second_parent\nend\n</code></pre>\n\n<p>In this case, using <code>resource</code> instead of <code>resources</code> makes the resulting paths more representative of the actual relationships.  E.G. referencing a parent's child would use a path like <code>first_parents/:id/child</code> - assuming I'm correctly reading the documentation.</p>\n\n<p>Further, I wouldn't recommend a combined route of some kind because only one parent resource is really required to look up the child resource.</p>\n\n<p>However, if your parent models have many children, you'll need to use <code>resources :child</code> since the resulting record is no longer unique.</p>\n\n<p>In this case, I still wouldn't recommend some kind of combined route since it doesn't do a good job of explaining the relationship between them all.  There is some potential benefit in that you could use it to, for example, look up the children shared by a given pair of parents, but I feel like that would be better served by a child search route of some kind.</p>\n"}], "owner": {"reputation": 408, "user_id": 1987724, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/IsH6B.jpg?s=128&g=1", "display_name": "Fam", "link": "https://stackoverflow.com/users/1987724/fam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 150, "favorite_count": 0, "accepted_answer_id": 49497860, "answer_count": 1, "score": 0, "last_activity_date": 1522087532, "creation_date": 1522077482, "last_edit_date": 1522082258, "question_id": 49494966, "link": "https://stackoverflow.com/questions/49494966/idiomatic-route-structure-for-rails-model-that-belongs-to-multiple-parent-models", "title": "Idiomatic route structure for Rails model that belongs_to multiple parent models", "body": "<p><strong>EDIT</strong>: Please see updated base modelling information at the bottom of this post.</p>\n\n<p>I would like to write an ActiveRecord model that has two <code>belongs_to</code> associations.</p>\n\n<p><code>base.rb</code>:</p>\n\n<pre><code>class Base &lt; ApplicationRecord\n    belongs_to :vehicle\n    belongs_to :driver\nend\n</code></pre>\n\n<p><code>vehicle.rb</code>:</p>\n\n<pre><code>class Vehicle &lt; ApplicationRecord\n    has_many :drivers\n    has_one  :base\nend\n</code></pre>\n\n<p><code>driver.rb</code>:</p>\n\n<pre><code>class Driver &lt; ApplicationRecord\n    belongs_to :vehicle\n    has_one    :base\nend\n</code></pre>\n\n<p><code>Vehicle</code> is the parent model for both <code>Driver</code> and <code>Base</code>, but the domain model requires at least one combined Vehicle/Driver association for a <code>Base</code> to exist.</p>\n\n<p>My <code>routes.rb</code> right now:</p>\n\n<pre><code>resources :vehicles do\n    resources :drivers\nend\n</code></pre>\n\n<p>A route to a driver looks like this:</p>\n\n<p><code>/vehicles/:vehicle_id/drivers/:id</code></p>\n\n<p>How do I setup the routes for my new <code>Base</code> model and what would the URL look like? Should it exist as a nested resource under <code>:drivers</code>? Is this idiomatic Rails? Should I reconsider my data model approach? Your inputs are appreciated.</p>\n\n<p>What are bases modelling? A Driver must affiliate his Vehicle with a Base to get a specific kind of insurance. Vehicles have a parent association, Insured, who owns the Vehicle. Insureds can drive their own Vehicle or hire Drivers, hence the reason Driver is a child of Vehicle. One Vehicle can have many Drivers, but a Driver can only work with one Vehicle. Once a Vehicle is affiliated with a Base, all future Drivers for that Vehicle must also affiliate with that base, unless the affiliation is changed at a later date. It is uncommon to see more than two Drivers working with a Vehicle.</p>\n"}, {"tags": ["ruby", "automated-tests", "selenium-chromedriver", "watir"], "answers": [{"tags": [], "owner": {"reputation": 397, "user_id": 1642511, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1f2c418f2e87d63e2ccbf538ed70fdb?s=128&d=identicon&r=PG", "display_name": "Eric Himmelreich", "link": "https://stackoverflow.com/users/1642511/eric-himmelreich"}, "is_accepted": false, "score": 0, "last_activity_date": 1522179147, "creation_date": 1522179147, "answer_id": 49521069, "question_id": 49493874, "link": "https://stackoverflow.com/questions/49493874/how-to-disable-pdf-viewer-built-in-in-chromedriver/49521069#49521069", "title": "How to disable pdf-viewer built-in in chromedriver", "body": "<p>You can't disable the PDF viewer but you can cycle through the windows and close the PDF window.</p>\n"}, {"tags": [], "owner": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "is_accepted": false, "score": 2, "last_activity_date": 1522184039, "creation_date": 1522184039, "answer_id": 49522224, "question_id": 49493874, "link": "https://stackoverflow.com/questions/49493874/how-to-disable-pdf-viewer-built-in-in-chromedriver/49522224#49522224", "title": "How to disable pdf-viewer built-in in chromedriver", "body": "<p>You can disable the PDF viewer by enabling the always_open_pdf_externally setting. This will cause the file to be downloaded instead.</p>\n\n<pre><code>prefs = {\n  plugins: {\n    always_open_pdf_externally: true\n  }\n}\nbrowser = Watir::Browser.new :chrome, prefs: prefs\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 13, "user_id": 9553108, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-TcmvE_iZHYw/AAAAAAAAAAI/AAAAAAAAChM/1R8FlD37vS8/photo.jpg?sz=128", "display_name": "Alejandro Garcia Alfonso", "link": "https://stackoverflow.com/users/9553108/alejandro-garcia-alfonso"}, "is_accepted": false, "score": 0, "last_activity_date": 1522844954, "creation_date": 1522844954, "answer_id": 49651064, "question_id": 49493874, "link": "https://stackoverflow.com/questions/49493874/how-to-disable-pdf-viewer-built-in-in-chromedriver/49651064#49651064", "title": "How to disable pdf-viewer built-in in chromedriver", "body": "<p>Thanks for the answers.</p>\n\n<p>The context of my test was to check if the pdf available in the web is the same as the pdf of reference. At the end to check if the pdf downloaded was the same as the pdf taken as reference, my best option was to read both contents and compare between them. I create a simpe and small function</p>\n\n<pre><code>def pdf_text(url_file_input)\n  pdf_text = Array.new\n  io = open(url_file_input)\n  reader = PDF::Reader.new(io)\n  reader.pages.each do |page|\n   pdf_text &lt;&lt; page.text\n  end\n  return pdf_text\nend\n</code></pre>\n\n<p>And later comparing using expect:</p>\n\n<pre><code>expect(pdf_text(\"url_to_file.pdf\")).to eql(pdf_text('path_to_file.pdf'))\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 9553108, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-TcmvE_iZHYw/AAAAAAAAAAI/AAAAAAAAChM/1R8FlD37vS8/photo.jpg?sz=128", "display_name": "Alejandro Garcia Alfonso", "link": "https://stackoverflow.com/users/9553108/alejandro-garcia-alfonso"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 513, "favorite_count": 1, "answer_count": 3, "score": 1, "last_activity_date": 1522844954, "creation_date": 1522074463, "last_edit_date": 1522079908, "question_id": 49493874, "link": "https://stackoverflow.com/questions/49493874/how-to-disable-pdf-viewer-built-in-in-chromedriver", "title": "How to disable pdf-viewer built-in in chromedriver", "body": "<p>I am using Ruby, Watir and Chromedriver. And I need to disable the pdf-viewer when clicingk in a pdf link in my web tests. I tried, without any luck, a lot of different settings like:</p>\n\n<pre><code>prefs = {\n    plugins: {\n      plugins_disabled: ['Chrome PDF Viewer']\n    },\n    download: {\n      prompt_for_download: false,\n      directory_upgrade:   true,\n      default_directory:   '/pdf_downloads'\n    }\n}\n@browser = Watir::Browser.new :chrome, :prefs =&gt; prefs\n</code></pre>\n\n<p>Or</p>\n\n<pre><code>prefs= {\n  'profile' =&gt; {\n  'default_content_setting_values' =&gt; {'automatic_downloads' =&gt; 1}\n  }\n}\n@browser = Watir::Browser.new :chrome, :prefs =&gt; prefs\n</code></pre>\n\n<p>Could anyone give some tips or advice?</p>\n"}, {"tags": ["ruby", "phpmailer", "mustache"], "comments": [{"owner": {"reputation": 1712, "user_id": 369446, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/zO6tb.jpg?s=128&g=1", "display_name": "Michael Shopsin", "link": "https://stackoverflow.com/users/369446/michael-shopsin"}, "edited": false, "score": 0, "creation_date": 1522073634, "post_id": 49493541, "comment_id": 85990656, "body": "Please show us some code and mustache configuration files so we can help you."}, {"owner": {"reputation": 29469, "user_id": 333340, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/EUElo.jpg?s=128&g=1", "display_name": "Synchro", "link": "https://stackoverflow.com/users/333340/synchro"}, "edited": false, "score": 0, "creation_date": 1522074746, "post_id": 49493541, "comment_id": 85991536, "body": "You&#39;re using ruby and PHPMailer? I&#39;m not surprised you&#39;re having trouble..."}, {"owner": {"reputation": 1, "user_id": 9457735, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5eb8b2713cc742b9765523d2a478fc4a?s=128&d=identicon&r=PG&f=1", "display_name": "Declan", "link": "https://stackoverflow.com/users/9457735/declan"}, "edited": false, "score": 0, "creation_date": 1522074954, "post_id": 49493541, "comment_id": 85991707, "body": "Im not sure what to actually post beacuse its more of a lack of knowledge on mustache thats my problem.I have the project compiling and have it looking the way I want but a functioning email from the homepage.mustache file is the issue.But if you do get a moment you could have a look at the original proj its onetimesecret"}, {"owner": {"reputation": 1, "user_id": 9457735, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5eb8b2713cc742b9765523d2a478fc4a?s=128&d=identicon&r=PG&f=1", "display_name": "Declan", "link": "https://stackoverflow.com/users/9457735/declan"}, "edited": false, "score": 0, "creation_date": 1522075082, "post_id": 49493541, "comment_id": 85991815, "body": "well they are not actually working together the project is coded in Ruby and I am trying to get an email working just to take the genereated token as an attachment.Should I be going in another direction?"}, {"owner": {"reputation": 1, "user_id": 9457735, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5eb8b2713cc742b9765523d2a478fc4a?s=128&d=identicon&r=PG&f=1", "display_name": "Declan", "link": "https://stackoverflow.com/users/9457735/declan"}, "edited": false, "score": 0, "creation_date": 1522076028, "post_id": 49493541, "comment_id": 85992574, "body": "Come on Synchro gimme something positive"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1522077347, "post_id": 49493541, "comment_id": 85993590, "body": "I&#39;m with Synchro here. PHPMailer has no business being involved in a Ruby project. The &quot;When in Rome...&quot; principle applies here. Use a Ruby mailer like the venerable <a href=\"https://github.com/mikel/mail\" rel=\"nofollow noreferrer\">Mail</a> package, or use a PHP-only solution without any Ruby involved."}, {"owner": {"reputation": 1, "user_id": 9457735, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5eb8b2713cc742b9765523d2a478fc4a?s=128&d=identicon&r=PG&f=1", "display_name": "Declan", "link": "https://stackoverflow.com/users/9457735/declan"}, "edited": false, "score": 0, "creation_date": 1522136178, "post_id": 49493541, "comment_id": 86017897, "body": "ok thanks i have tried using mail, sendgrid actionmailer but trying to get from the mustache file to anything outside it is proving really difficult.it just says not found.This may be becuase theres already a post made to an external entity for the generated passwod"}], "owner": {"reputation": 1, "user_id": 9457735, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5eb8b2713cc742b9765523d2a478fc4a?s=128&d=identicon&r=PG&f=1", "display_name": "Declan", "link": "https://stackoverflow.com/users/9457735/declan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 25, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1522077289, "creation_date": 1522073533, "last_edit_date": 1522077289, "question_id": 49493541, "link": "https://stackoverflow.com/questions/49493541/cannot-get-mustache-file-to-read-sendmail-php-file", "title": "Cannot get mustache file to read sendmail.php file", "body": "<p>I have a project downloaded from github it uses mustache files and ruby.The project required account setup to send an email straight from the page in which a secret token is generated however i do not want the account part of the project therefore the email setup does not load up when i start my modified version of the project.</p>\n\n<p>It seems to be difficult to get the mustache file in which my homepage is to read any other file for example i set up phpmailer and have it working however when i try to get it to work with the project 'not found' just appears on the top left corner.</p>\n\n<p>Can I perhaps convert the mustache file to html which might make it a bit easier or how can i deal with these mustache files.</p>\n"}, {"tags": ["ruby", "logstash", "logstash-grok"], "answers": [{"tags": [], "owner": {"reputation": 15819, "user_id": 1149423, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/KmNLc.png?s=128&g=1", "display_name": "Sufiyan Ghori", "link": "https://stackoverflow.com/users/1149423/sufiyan-ghori"}, "is_accepted": true, "score": 1, "last_activity_date": 1526430936, "creation_date": 1526430936, "answer_id": 50360897, "question_id": 49493435, "link": "https://stackoverflow.com/questions/49493435/check-and-remove-multiple-null-values-using-ruby-filter/50360897#50360897", "title": "Check and remove multiple null values using ruby filter", "body": "<p>You need to iterate through all the fields and check if value is <code>nil</code> (null in ruby); remove the <code>key</code> if it is <code>nil</code>.</p>\n\n<p>This ruby filter will work,</p>\n\n<pre><code>ruby {\n    code =&gt; \"\n        hash = event.to_hash\n        hash.each do |key,value|\n            if value == nil\n                event.remove(key)\n            end\n        end\n    \"\n}\n</code></pre>\n\n<p>Please let me know if it helps.</p>\n"}], "owner": {"reputation": 542, "user_id": 8017314, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/AYExH.jpg?s=128&g=1", "display_name": "Ardenne", "link": "https://stackoverflow.com/users/8017314/ardenne"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1005, "favorite_count": 1, "accepted_answer_id": 50360897, "answer_count": 1, "score": 1, "last_activity_date": 1527141287, "creation_date": 1522073222, "last_edit_date": 1527141287, "question_id": 49493435, "link": "https://stackoverflow.com/questions/49493435/check-and-remove-multiple-null-values-using-ruby-filter", "title": "Check and remove multiple null values using ruby filter", "body": "<p>I am trying to write a filter that can check and remove multiple null value fields. </p>\n\n<p>For instance, </p>\n\n<pre><code>filter {\n  mutate {\n   remove_tag =&gt; [ \"foo_%{somefield}\" ] }\n}\n</code></pre>\n\n<p>but I need to do this check for many fields inside the json, so I would like to avoid using multiple if conditions. \nSearching on Google I found this </p>\n\n<pre><code>ruby {\n    code =&gt; \"event.to_hash.delete_if {|field, value| value == 'null' }\"\n }\n</code></pre>\n\n<p>but it's not working and I am not really sure how this work. \nAny idea?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"tags": [], "owner": {"reputation": 313, "user_id": 3702804, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/808845f311afec7b91b8dd8cb0eed4f3?s=128&d=identicon&r=PG", "display_name": "Alex Tatarnikov", "link": "https://stackoverflow.com/users/3702804/alex-tatarnikov"}, "is_accepted": false, "score": 0, "last_activity_date": 1522073555, "creation_date": 1522073555, "answer_id": 49493548, "question_id": 49493083, "link": "https://stackoverflow.com/questions/49493083/conver-to-html-entites-only-not-matching-tags/49493548#49493548", "title": "conver to html entites only not matching tags", "body": "<p>You can specify allowed tags as options to the <code>sanitize</code> method. </p>\n\n<pre><code>sanitize @comment.body, tags: %w(strong em a), attributes: %w(href)\n</code></pre>\n\n<p>Check for more information <a href=\"http://api.rubyonrails.org/classes/ActionView/Helpers/SanitizeHelper.html\" rel=\"nofollow noreferrer\">ActionView::Helpers::SanitizeHelper </a></p>\n"}], "owner": {"reputation": 6268, "user_id": 503831, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/992c174c48fa4dadacb03854dbf7ade8?s=128&d=identicon&r=PG", "display_name": "Arnold Roa", "link": "https://stackoverflow.com/users/503831/arnold-roa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 16, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1522073555, "creation_date": 1522072104, "question_id": 49493083, "link": "https://stackoverflow.com/questions/49493083/conver-to-html-entites-only-not-matching-tags", "title": "conver to html entites only not matching tags", "body": "<p>I was using: <code>ActionView::Helpers::SanitizeHelper.sanitize</code> in order to get rid of some html tags, however I'm interested in convert to html entities all the non-matching tags.</p>\n\n<p>For example, giving this text:</p>\n\n<pre><code>&lt;b&gt;this is an acceptable tag&lt;b&gt; &lt;iframe&gt;this is not acceptable&lt;/iframe&gt;\n</code></pre>\n\n<p>I'm interested in get this output</p>\n\n<pre><code>&lt;b&gt;this is an acceptable tag&lt;b&gt; &amp;lt;iframe&amp;gt;this is not acceptable&amp;lt;/iframe&amp;gt;\n</code></pre>\n"}, {"tags": ["ruby", "macos", "macos-high-sierra"], "comments": [{"owner": {"reputation": 5312, "user_id": 6535997, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/10156345016155058/picture?type=large", "display_name": "Mark", "link": "https://stackoverflow.com/users/6535997/mark"}, "edited": false, "score": 0, "creation_date": 1522070022, "post_id": 49492261, "comment_id": 85988068, "body": "Have you tried uninstalling the gem in question and then reinstalling? gem uninstall &#39;gemname&#39;, some gems may be valid for different versions of ruby and therefore won&#39;t reinstall"}, {"owner": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 0, "creation_date": 1522070057, "post_id": 49492261, "comment_id": 85988093, "body": "What&#39;s <code>.&#47;run_test.command</code> do? Do you have an explicit gemset for the stuff in question? Are you running it from the directory the app was installed into?"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1522079950, "post_id": 49492261, "comment_id": 85995377, "body": "Always be <b>extremely careful</b> when calling <code>system</code> with string arguments. Whenever possible use discrete arguments: <code>system(ruby, runsuite_path.realpath, *args)</code> ensures that string interpolation problems don&#39;t trip you up or create command injection bugs."}, {"owner": {"reputation": 2210, "user_id": 548862, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/4106e2159a4ddcb3e46a74a61897ce32?s=128&d=identicon&r=PG", "display_name": "Brian Kendig", "link": "https://stackoverflow.com/users/548862/brian-kendig"}, "edited": false, "score": 0, "creation_date": 1544729344, "post_id": 49492261, "comment_id": 94389447, "body": "What and where is <code>run_test.command</code>, and why is it being run? I&#39;m hitting the same problem as you, but I can&#39;t find that file."}, {"owner": {"reputation": 2210, "user_id": 548862, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/4106e2159a4ddcb3e46a74a61897ce32?s=128&d=identicon&r=PG", "display_name": "Brian Kendig", "link": "https://stackoverflow.com/users/548862/brian-kendig"}, "edited": false, "score": 0, "creation_date": 1544729385, "post_id": 49492261, "comment_id": 94389459, "body": "Also - you may want to pull your solution into a separate answer, rather than making it an edit on your question."}], "answers": [{"tags": [], "owner": {"reputation": 1596, "user_id": 768635, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ebff4f2dd33516a86ccdc11c7f13edf9?s=128&d=identicon&r=PG", "display_name": "lloydpick", "link": "https://stackoverflow.com/users/768635/lloydpick"}, "is_accepted": false, "score": -1, "last_activity_date": 1522158091, "creation_date": 1522158091, "answer_id": 49514522, "question_id": 49492261, "link": "https://stackoverflow.com/questions/49492261/how-do-i-make-ruby-on-osx-read-the-correct-gems/49514522#49514522", "title": "How do I make ruby on OSX read the correct Gems", "body": "<p>The ruby binary that is found at <code>/usr/bin/ruby</code> is the version of Ruby installed by MacOS and should be left alone. Homebrew, Chruby, RVM &amp; RBEnv all will install rubies in different locations away from the base so that they don't overwrite it or change it. This is expected behaviour, as you don't know what could be depending on the system ruby, or what has been natively compiled against it.</p>\n"}], "owner": {"reputation": 117, "user_id": 5963805, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/56e979406f24224245a5e9df544490c5?s=128&d=identicon&r=PG&f=1", "display_name": "Jon Hodgson", "link": "https://stackoverflow.com/users/5963805/jon-hodgson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 135, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1522158091, "creation_date": 1522069676, "last_edit_date": 1522075130, "question_id": 49492261, "link": "https://stackoverflow.com/questions/49492261/how-do-i-make-ruby-on-osx-read-the-correct-gems", "title": "How do I make ruby on OSX read the correct Gems", "body": "<p>I am running OSX High Sierra.</p>\n\n<p>I have a ruby script I'm attempting to run on OSX (it's an Avid validation tool, but I don't think that matters).</p>\n\n<p>When I run it, I get the following output ( added the code to print the version and the gem path)</p>\n\n<pre><code>MacBook-Pro:DTT jon$ ./run_test.command -h -v\n-----\nRuby Version : 2.5.0\nGem Path : \n/Users/jon/.gem/ruby/2.5.0\n/Users/jon/.rbenv/versions/2.5.0/lib/ruby/gems/2.5.0\n-----\n/System/Library/Frameworks/Ruby.framework/Versions/2.3/usr/lib/ruby/2.3.0/rubygems/core_ext/kernel_require.rb:55:in `require': cannot load such file -- curses (LoadError)\n    from /System/Library/Frameworks/Ruby.framework/Versions/2.3/usr/lib/ruby/2.3.0/rubygems/core_ext/kernel_require.rb:55:in `require'\n    from /Users/jon/Downloads/AAX_Tools_DSH_0p2p1x753_2/DTT/sources/DishTestTool.rb:21:in `&lt;top (required)&gt;'\n    from /Users/jon/Downloads/AAX_Tools_DSH_0p2p1x753_2/DTT/sources/bin/runsuite.rb:82:in `require_relative'\n    from /Users/jon/Downloads/AAX_Tools_DSH_0p2p1x753_2/DTT/sources/bin/runsuite.rb:82:in `&lt;main&gt;'\n</code></pre>\n\n<p>Note that it appears to be reading gems from version 2.3, but I am actually running 2.5.0</p>\n\n<p>and if I do gem env, there is no sign of that 2.3 folder</p>\n\n<pre><code>MacBook-Pro:DTT jon$ gem env\nRubyGems Environment:\n  - RUBYGEMS VERSION: 2.7.6\n  - RUBY VERSION: 2.5.0 (2017-12-25 patchlevel 0) [x86_64-darwin17]\n  - INSTALLATION DIRECTORY: /Users/jon/.rbenv/versions/2.5.0/lib/ruby/gems/2.5.0\n  - USER INSTALLATION DIRECTORY: /Users/jon/.gem/ruby/2.5.0\n  - RUBY EXECUTABLE: /Users/jon/.rbenv/versions/2.5.0/bin/ruby\n  - EXECUTABLE DIRECTORY: /Users/jon/.rbenv/versions/2.5.0/bin\n  - SPEC CACHE DIRECTORY: /Users/jon/.gem/specs\n  - SYSTEM CONFIGURATION DIRECTORY: /Users/jon/.rbenv/versions/2.5.0/etc\n  - RUBYGEMS PLATFORMS:\n    - ruby\n    - x86_64-darwin-17\n  - GEM PATHS:\n     - /Users/jon/.rbenv/versions/2.5.0/lib/ruby/gems/2.5.0\n     - /Users/jon/.gem/ruby/2.5.0\n  - GEM CONFIGURATION:\n     - :update_sources =&gt; true\n     - :verbose =&gt; true\n     - :backtrace =&gt; false\n     - :bulk_threshold =&gt; 1000\n  - REMOTE SOURCES:\n     - https://rubygems.org/\n  - SHELL PATH:\n     - /Users/jon/.rbenv/versions/2.5.0/bin\n     - /usr/local/Cellar/rbenv/1.1.1/libexec\n     - /Users/jon/.rbenv/shims\n     - /usr/local/bin\n     - /usr/bin\n     - /bin\n     - /usr/sbin\n     - /sbin\n     - /opt/local/bin\n     - /opt/X11/bin\n</code></pre>\n\n<p>I've tried installing ruby with rvm, then uninstalled it, removed rvm, installed it again with rbenv. Installing and updating gems (curses in particular), etc etc (I'm a newbie with ruby and moderately familiar with the workings of Unix systems, but no systems guru), but all to no avail.</p>\n\n<p>Does anybody know how I get ruby to read the correct gems? </p>\n\n<p>--------------- Edit ----------------\nI've discovered cause of the issue\nThe ruby script run_test.command called another ruby script, with the line</p>\n\n<pre><code>system(\"#{ruby} \\\"#{runsuite_path.realpath}\\\" #{args}\")\n</code></pre>\n\n<p>Where, crucially</p>\n\n<pre><code>ruby = '/usr/bin/ruby'\n</code></pre>\n\n<p>For some reason, updating ruby does not change the version of ruby executed with /usr/bin/ruby</p>\n\n<p>changing that line to</p>\n\n<pre><code>ruby = '/usr/bin/env ruby'\n</code></pre>\n\n<p>Seems to fix the issue</p>\n\n<p>Which begs two questions. Why is /usr/bin/ruby not changed to reflect the update, and can I change it manually without issues?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "devise"], "answers": [{"comments": [{"owner": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "edited": false, "score": 1, "creation_date": 1522069173, "post_id": 49491921, "comment_id": 85987469, "body": "There&#39;s no reason to indent <code>current_user</code> definition more than <code>alias_method</code> call."}], "tags": [], "owner": {"reputation": 1506, "user_id": 4265308, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/GOuYQ.jpg?s=128&g=1", "display_name": "Pooja Mokariya", "link": "https://stackoverflow.com/users/4265308/pooja-mokariya"}, "is_accepted": false, "score": 0, "last_activity_date": 1522068668, "creation_date": 1522068668, "answer_id": 49491921, "question_id": 49491907, "link": "https://stackoverflow.com/questions/49491907/want-to-customise-the-current-user-methode-of-devise-gem/49491921#49491921", "title": "want to customise the current_user methode of devise gem", "body": "<p>I got solution by my self letter on.</p>\n\n<p>Below code is the solution of above problem</p>\n\n<pre><code>alias_method :devise_current_user, :current_user\n  def current_user\n    if session[:user_id].blank?\n      devise_current_user\n    else\n      User.find(session[:user_id])\n    end   \n  end\n</code></pre>\n\n<p>This works fine for me</p>\n"}], "owner": {"reputation": 1506, "user_id": 4265308, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/GOuYQ.jpg?s=128&g=1", "display_name": "Pooja Mokariya", "link": "https://stackoverflow.com/users/4265308/pooja-mokariya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 38, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1576500960, "creation_date": 1522068610, "last_edit_date": 1576500960, "question_id": 49491907, "link": "https://stackoverflow.com/questions/49491907/want-to-customise-the-current-user-methode-of-devise-gem", "title": "want to customise the current_user methode of devise gem", "body": "<p>I want to user <code>current_user</code> method for two purpose.</p>\n\n<p>I have user gmail log in and personal  registration from site.</p>\n\n<p>But <code>current_user</code> method of devise gem is not working for gmail user.</p>\n\n<p>for gmail user I used below method</p>\n\n<pre><code> helper_method :current_user\n\n def current_user\n   @current_user ||= User.find(session[:user_id]) if session[:user_id]\n end\n</code></pre>\n\n<p>kindly help me to fix this.\nThanks</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rubygems"], "comments": [{"owner": {"reputation": 1223, "user_id": 3422357, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/F984j.jpg?s=128&g=1", "display_name": "Vishal Taj PM", "link": "https://stackoverflow.com/users/3422357/vishal-taj-pm"}, "edited": false, "score": 0, "creation_date": 1522067067, "post_id": 49491152, "comment_id": 85985955, "body": "<code>helper</code> suppose to be under <code>app directory</code> right. on what moto you wanted to move it to some other places?"}, {"owner": {"reputation": 126, "user_id": 5616944, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca1d9d73f7ce8943637f42421f23f7da?s=128&d=identicon&r=PG&f=1", "display_name": "NRaghavendra", "link": "https://stackoverflow.com/users/5616944/nraghavendra"}, "edited": false, "score": 2, "creation_date": 1522067333, "post_id": 49491152, "comment_id": 85986138, "body": "As you said you are working on it for a gem, include it in <code>lib</code> folder   <a href=\"http://guides.rubyonrails.org/plugins.html#generate-a-gemified-plugin\" rel=\"nofollow noreferrer\">Link</a>"}, {"owner": {"reputation": 16672, "user_id": 22237, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/hkobD.png?s=128&g=1", "display_name": "Kris", "link": "https://stackoverflow.com/users/22237/kris"}, "edited": false, "score": 0, "creation_date": 1522069111, "post_id": 49491152, "comment_id": 85987423, "body": "is the gem a Rails engine or plain gem?"}, {"owner": {"reputation": 4708, "user_id": 1827284, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/cOtJk.png?s=128&g=1", "display_name": "drinor", "link": "https://stackoverflow.com/users/1827284/drinor"}, "edited": false, "score": 0, "creation_date": 1522069369, "post_id": 49491152, "comment_id": 85987609, "body": "Plain gem, it only adds some authentication helper methods."}], "answers": [{"comments": [{"owner": {"reputation": 1066, "user_id": 3628295, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5c87fee58a1e77b9f4ddbae72a87f7f?s=128&d=identicon&r=PG&f=1", "display_name": "ogelacinyc", "link": "https://stackoverflow.com/users/3628295/ogelacinyc"}, "edited": false, "score": 0, "creation_date": 1522067201, "post_id": 49491408, "comment_id": 85986056, "body": "I agee +1 if you only use to controller"}], "tags": [], "owner": {"reputation": 1607, "user_id": 7804093, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pFFFH.jpg?s=128&g=1", "display_name": "Ganesh", "link": "https://stackoverflow.com/users/7804093/ganesh"}, "is_accepted": false, "score": 3, "last_activity_date": 1522066953, "creation_date": 1522066953, "answer_id": 49491408, "question_id": 49491152, "link": "https://stackoverflow.com/questions/49491152/rails-gem-correct-place-for-a-controller-helper/49491408#49491408", "title": "Rails gem: correct place for a controller helper?", "body": "<p>I think you should use it in controller <code>concern</code>, then include helper module into Application controller</p>\n\n<p>So I will prefer <code>app/controllers/concerns/gem_name/my_helper.rb</code> for creating controller helper inside gem.</p>\n"}], "owner": {"reputation": 4708, "user_id": 1827284, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/cOtJk.png?s=128&g=1", "display_name": "drinor", "link": "https://stackoverflow.com/users/1827284/drinor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1522066953, "creation_date": 1522066194, "question_id": 49491152, "link": "https://stackoverflow.com/questions/49491152/rails-gem-correct-place-for-a-controller-helper", "title": "Rails gem: correct place for a controller helper?", "body": "<p>I'm working on a private gem for Rails which includes a controller helper.</p>\n\n<p>I doubt between these two places for this helper:</p>\n\n<ul>\n<li><code>lib/gem_name/my_helper.rb</code></li>\n<li><code>app/controllers/concerns/gem_name/my_helper.rb</code></li>\n</ul>\n\n<p>What is the correct place for it?</p>\n"}, {"tags": ["ruby", "multithreading", "ruby-2.4", "ruby-2.5"], "answers": [{"comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1522079779, "post_id": 49490317, "comment_id": 85995279, "body": "It&#39;s worth noting that <code>join</code> blocks the calling thread until the thread&#39;s been terminated properly."}], "tags": [], "owner": {"reputation": 9435, "user_id": 2626000, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/j8GY0.jpg?s=128&g=1", "display_name": "Aaron Christiansen", "link": "https://stackoverflow.com/users/2626000/aaron-christiansen"}, "is_accepted": true, "score": 11, "last_activity_date": 1522063530, "creation_date": 1522063530, "answer_id": 49490317, "question_id": 49490278, "link": "https://stackoverflow.com/questions/49490278/wait-for-a-thread-to-die-in-ruby/49490317#49490317", "title": "Wait for a thread to die in Ruby", "body": "<p>Figured it out; you can still <code>#join</code> the thread after killing it, so you can use <code>thread.kill.join</code> to block until the thread dies.</p>\n\n<p>This code never prints <em>Not dead</em>:</p>\n\n<pre><code>thread = Thread.new { loop {} }\nthread.kill.join\nputs \"Not dead\" while thread.alive?\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 93455, "user_id": 187141, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/f9e28dc83496320c87c55b3cf988ab60?s=128&d=identicon&r=PG", "display_name": "yegor256", "link": "https://stackoverflow.com/users/187141/yegor256"}, "is_accepted": false, "score": 1, "last_activity_date": 1546951894, "creation_date": 1546951894, "answer_id": 54092195, "question_id": 49490278, "link": "https://stackoverflow.com/questions/49490278/wait-for-a-thread-to-die-in-ruby/54092195#54092195", "title": "Wait for a thread to die in Ruby", "body": "<p>I'm doing this:</p>\n\n<pre><code>thread = Thread.new { loop {} }\nthread.kill\nsleep 0.001 while thread.alive?\n</code></pre>\n\n<p>This is how I terminate threads in my <a href=\"https://github.com/zold-io/zold/blob/master/lib/zold/thread_pool.rb\" rel=\"nofollow noreferrer\">ThreadPool</a>.</p>\n"}], "owner": {"reputation": 9435, "user_id": 2626000, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/j8GY0.jpg?s=128&g=1", "display_name": "Aaron Christiansen", "link": "https://stackoverflow.com/users/2626000/aaron-christiansen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 926, "favorite_count": 0, "accepted_answer_id": 49490317, "answer_count": 2, "score": 8, "last_activity_date": 1546951894, "creation_date": 1522063421, "last_edit_date": 1522142930, "question_id": 49490278, "link": "https://stackoverflow.com/questions/49490278/wait-for-a-thread-to-die-in-ruby", "title": "Wait for a thread to die in Ruby", "body": "<p>It appears that, in Ruby 2.4 and 2.5, threads don't die as soon as you invoke <code>#kill</code> on them. This code snippet will print <em>Not dead</em> a few times:</p>\n\n<pre><code>thread = Thread.new { loop {} }\nthread.kill\nputs \"Not dead\" while thread.alive?\n</code></pre>\n\n<p>I'd like to block execution of the main thread until the secondary thread is killed. I tried using <code>thread.join.kill</code>, but of course this blocks the main thread because the thread's loop never terminates.</p>\n\n<p>How can I ensure that a thread is killed before the main thread continues?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 9550906, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e150d63ba0d5d5567b320548284d53b?s=128&d=identicon&r=PG&f=1", "display_name": "absolado", "link": "https://stackoverflow.com/users/9550906/absolado"}, "edited": false, "score": 0, "creation_date": 1522064067, "post_id": 49490385, "comment_id": 85983872, "body": "Thank you so much! It&#39;s now working as it should. Do you also know how I can set the select fields also to required as I did with the text field?"}], "tags": [], "owner": {"reputation": 1607, "user_id": 7804093, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pFFFH.jpg?s=128&g=1", "display_name": "Ganesh", "link": "https://stackoverflow.com/users/7804093/ganesh"}, "is_accepted": true, "score": 2, "last_activity_date": 1522063754, "creation_date": 1522063754, "answer_id": 49490385, "question_id": 49490178, "link": "https://stackoverflow.com/questions/49490178/ruby-on-rails-text-form-how-to-change-fields-to-required/49490385#49490385", "title": "Ruby On Rails: Text form - how to change fields to required?", "body": "<p>To avoid exception, just modify code as follows:</p>\n\n<pre><code>@student = Student.find(params[:id])\nif @student\n  Key.find(@student.key_id).update(student_id: 0) if @student.key_id.present?\n  Harddrive.find(@student.harddrive_id).update(student_id: 0)\nend\n@student.destroy\n</code></pre>\n\n<p>Or you can add required validation from model itself for <code>key_id</code></p>\n\n<pre><code>class Student\n  validates :key_id, :presence =&gt; true\nend\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 9550906, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e150d63ba0d5d5567b320548284d53b?s=128&d=identicon&r=PG&f=1", "display_name": "absolado", "link": "https://stackoverflow.com/users/9550906/absolado"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 139, "favorite_count": 0, "accepted_answer_id": 49490385, "answer_count": 1, "score": 1, "last_activity_date": 1522064347, "creation_date": 1522063033, "last_edit_date": 1522064347, "question_id": 49490178, "link": "https://stackoverflow.com/questions/49490178/ruby-on-rails-text-form-how-to-change-fields-to-required", "title": "Ruby On Rails: Text form - how to change fields to required?", "body": "<p>Actually, I have a little issue. I have a form where you can pick a name and so on. One is a text field, the other ones are select. I can change text field to required which means that you need to write something into it, but how can I do it with the other ones?</p>\n\n<p>It's not a problem that I can add the user instead, but if I try to delete the user, I'm in trouble with this error: </p>\n\n<pre><code>Couldn't find Key with 'id'=\nExtracted source (around line #51):\n\n49  @student = Student.find(params[:id])\n50  if @student\n51      Key.find(@student.key_id).update(student_id: 0)\n52      Harddrive.find(@student.harddrive_id).update(student_id: 0)\n53  end\n54  @student.destroy\n</code></pre>\n\n<p>And this is the code of my form:</p>\n\n<pre><code>&lt;%= form_for @student, remote: true do |f| %&gt;\n    &lt;%= f.label 'Account' %&gt;\n    &lt;%= f.text_field :account, :class =&gt; \"form-control form-control-text\", :required =&gt; true %&gt;\n    &lt;br&gt;\n    &lt;%= f.label 'Operating system' %&gt;\n    &lt;%= f.select :os, '&lt;option value=\"linux\"&gt;Linux&lt;/option&gt;&lt;option value=\"windows\"&gt;Windows&lt;/option&gt;'.html_safe, \n        {include_blank: false}, {:class =&gt; \"form-control\"} %&gt;\n    &lt;br&gt;\n    &lt;%= f.label 'Hard drive' %&gt;\n    &lt;%= f.select :harddrive_id, Harddrive.where(student_id: 0).map { |drive| [drive.name, drive.id] }, \n        {include_blank: false}, {:class =&gt; \"form-control\"} %&gt;\n    &lt;br&gt;\n    &lt;%= f.label 'Key' %&gt;\n    &lt;%= f.select :key_id, Key.where(student_id: 0).map { |key| [key.name, key.id] }, {include_blank: false}, {:class =&gt; \"form-control\"} %&gt;\n    &lt;br&gt;\n    &lt;%= f.label 'Pawn' %&gt;\n    &lt;%= f.select :pawn, '&lt;option value=\"true\"&gt;Paid&lt;/option&gt;&lt;option value=\"false\"&gt;Not paid&lt;/option&gt;'.html_safe,\n            {include_blank: false}, {:class =&gt; \"form-control\"} %&gt;\n    &lt;br&gt;\n    &lt;%= f.label 'Comment' %&gt;\n    &lt;%= f.text_field :comment, :class =&gt; \"form-control form-control-text\" %&gt;\n    &lt;br&gt;\n    &lt;%= f.submit (f.object.new_record? ? 'Create' : 'Update'), :class =&gt; \"btn btn-outline-dark\" %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>Cheers,\nabsolado</p>\n"}, {"tags": ["ruby", "regex"], "comments": [{"owner": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "edited": false, "score": 3, "creation_date": 1522062489, "post_id": 49489976, "comment_id": 85982726, "body": "Why not simply <code>string1.split(&#39;-&#39;).first</code>?"}, {"owner": {"reputation": 541, "user_id": 3252477, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dQsXR.jpg?s=128&g=1", "display_name": "Kineolyan", "link": "https://stackoverflow.com/users/3252477/kineolyan"}, "edited": false, "score": 0, "creation_date": 1522062773, "post_id": 49489976, "comment_id": 85982944, "body": "Your code is already doing what you want, i.e. capturing <code>foo</code> in <code>foo-bar0164</code>. If you want to capture the hyphen as well, there is an answer for that below. Otherwise, could you complete your question ?"}, {"owner": {"reputation": 56328, "user_id": 4265352, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-lzAUc5pYb24/AAAAAAAAAAI/AAAAAAAAAGQ/q3h7bZUnqrs/photo.jpg?sz=128", "display_name": "axiac", "link": "https://stackoverflow.com/users/4265352/axiac"}, "edited": false, "score": 0, "creation_date": 1522062828, "post_id": 49489976, "comment_id": 85982986, "body": "<i>&quot;But it does match all characters except <code>-</code>.&quot;</i> -- because there is nothing in your <code>regex</code> that matches <code>-</code>."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "reply_to_user": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "edited": false, "score": 0, "creation_date": 1522070888, "post_id": 49489976, "comment_id": 85988695, "body": "For this simple use case a <code>Regexp</code> is going to be multitudes slower than the <code>split</code> suggested by @MarekLipka or other <code>String</code> methods like <code>partition</code> (similar to the split) or <code>slice</code> (e.g. <code>string1.slice(0,string1.index(&#39;-&#39;))</code>)"}], "answers": [{"tags": [], "owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "is_accepted": true, "score": 1, "last_activity_date": 1522063745, "last_edit_date": 1522063745, "creation_date": 1522062564, "answer_id": 49490029, "question_id": 49489976, "link": "https://stackoverflow.com/questions/49489976/ruby-string-match-until/49490029#49490029", "title": "Ruby string match until &quot;-&quot;", "body": "<p>Try this</p>\n\n<pre><code>string1.match(/(.*)-/).captures\n=&gt; [\"foo\"]\n</code></pre>\n\n<p>or</p>\n\n<pre><code>string1.match(/(.*)-/) { $1 }\n=&gt; \"foo\"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1468, "user_id": 4627980, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e240d4da8ddf23ba77c27bb076165923?s=128&d=identicon&r=PG", "display_name": "dloeda", "link": "https://stackoverflow.com/users/4627980/dloeda"}, "is_accepted": false, "score": 1, "last_activity_date": 1522062568, "creation_date": 1522062568, "answer_id": 49490034, "question_id": 49489976, "link": "https://stackoverflow.com/questions/49489976/ruby-string-match-until/49490034#49490034", "title": "Ruby string match until &quot;-&quot;", "body": "<p>You could try to match <code>/([^-]+)-/</code>. This will ensure the match ends in the first <code>-</code> character.</p>\n"}, {"tags": [], "owner": {"reputation": 1215, "user_id": 4481541, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fe7030cf38c1eacc3ce817ef07242e77?s=128&d=identicon&r=PG&f=1", "display_name": "LenglBoy", "link": "https://stackoverflow.com/users/4481541/lenglboy"}, "is_accepted": false, "score": 0, "last_activity_date": 1522063166, "creation_date": 1522063166, "answer_id": 49490215, "question_id": 49489976, "link": "https://stackoverflow.com/questions/49489976/ruby-string-match-until/49490215#49490215", "title": "Ruby string match until &quot;-&quot;", "body": "<p>This Regex will match the pattern [-]</p>\n\n<pre><code>^([\\w]*)-([\\w\\d]*)$\n</code></pre>\n\n<p>With the () you can no get the matchgroup 1 and 2 for letters efore the - and after it.</p>\n\n<p>A faster and more common solution would be <code>string.split(\"-\")[0]</code> - you will get the first part of it as <code>String</code> - but be aware of NullPointers (length should >1 or at least emptystring)</p>\n\n<hr>\n\n<p>I like to check my regex <a href=\"https://regex101.com/\" rel=\"nofollow noreferrer\">here</a></p>\n"}, {"tags": [], "owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "is_accepted": false, "score": 2, "last_activity_date": 1522064042, "creation_date": 1522064042, "answer_id": 49490480, "question_id": 49489976, "link": "https://stackoverflow.com/questions/49489976/ruby-string-match-until/49490480#49490480", "title": "Ruby string match until &quot;-&quot;", "body": "<p>Something with a positive lookahead:</p>\n\n<pre><code>string1[/\\A.*?(?=-)/] #=&gt; \"foo\"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 9602, "user_id": 3607136, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/NRFso.jpg?s=128&g=1", "display_name": "Gagan Gami", "link": "https://stackoverflow.com/users/3607136/gagan-gami"}, "is_accepted": false, "score": 2, "last_activity_date": 1522066688, "creation_date": 1522066688, "answer_id": 49491311, "question_id": 49489976, "link": "https://stackoverflow.com/questions/49489976/ruby-string-match-until/49491311#49491311", "title": "Ruby string match until &quot;-&quot;", "body": "<p>How about this straightforward way:</p>\n\n<pre><code>&gt; string1.split(\"-\").first\n#=&gt; \"foo\" \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 0, "last_activity_date": 1522092879, "creation_date": 1522092879, "answer_id": 49499275, "question_id": 49489976, "link": "https://stackoverflow.com/questions/49489976/ruby-string-match-until/49499275#49499275", "title": "Ruby string match until &quot;-&quot;", "body": "<p>If it is known that the string contains a hyphen</p>\n\n<pre><code>str = \"1234-567\"\nstr[0,str.index('-)]\n  #=&gt; \"1234\"\n</code></pre>\n\n<p>If not</p>\n\n<pre><code>str_len = str.index('-)\nstr_len ? str[0,str_len] : nil\n</code></pre>\n\n<p>Notice that this method neither uses a regex nor creates a temporary array.</p>\n"}], "owner": {"reputation": 635, "user_id": 8650103, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/c2958550eb45f9470d4f34d405a98495?s=128&d=identicon&r=PG&f=1", "display_name": "Trinity76", "link": "https://stackoverflow.com/users/8650103/trinity76"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 99, "favorite_count": 1, "accepted_answer_id": 49490029, "answer_count": 6, "score": 0, "last_activity_date": 1522093021, "creation_date": 1522062383, "last_edit_date": 1522062466, "question_id": 49489976, "link": "https://stackoverflow.com/questions/49489976/ruby-string-match-until", "title": "Ruby string match until &quot;-&quot;", "body": "<p>I have a string like <code>string1 = \"foo-bar0164\"</code> and I want store all characters until \"-\" in a variable. In this example only \"foo\".</p>\n\n<p>My attempt is:</p>\n\n<pre><code>string1.match(/([^-]+)/)\n</code></pre>\n\n<p>But it does match all characters except -.</p>\n"}, {"tags": ["ruby", "chef-infra"], "comments": [{"owner": {"reputation": 1223, "user_id": 3422357, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/F984j.jpg?s=128&g=1", "display_name": "Vishal Taj PM", "link": "https://stackoverflow.com/users/3422357/vishal-taj-pm"}, "edited": false, "score": 0, "creation_date": 1522066555, "post_id": 49488562, "comment_id": 85985567, "body": "can u explain what is this <code>include_recipe &quot;#{cookbook}::#{recipe}&quot;</code> referring too? is it a <code>Class</code> or <code>Instance</code>."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1522071436, "post_id": 49488562, "comment_id": 85989070, "body": "I am going to assume you are looking for <code>load</code> (as this appears to be what <code>include_recipe</code> actually does only with a bit of require type logic e.g. do not reload if already loaded) that being said you would need to strictly adhere to a specific file structure to work appropriately because you must be able to infer the file path from the class name. which is what <code>&quot;#{cookbook}::#{recipe}&quot;</code> is specifying. Otherwise how you want to go about this or why is extremely unclear from this question"}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 9551814, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29324396f79b45573ae9d336ffaf42bc?s=128&d=identicon&r=PG&f=1", "display_name": "hfskappel", "link": "https://stackoverflow.com/users/9551814/hfskappel"}, "edited": false, "score": 0, "creation_date": 1522134660, "post_id": 49502344, "comment_id": 86016881, "body": "thanks! this is what i was looking for. the loop was for illustrating using variables."}], "tags": [], "owner": {"reputation": 43208, "user_id": 78722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf611565f0b79abd0b3dc200ad867661?s=128&d=identicon&r=PG", "display_name": "coderanger", "link": "https://stackoverflow.com/users/78722/coderanger"}, "is_accepted": true, "score": 1, "last_activity_date": 1522108152, "creation_date": 1522108152, "answer_id": 49502344, "question_id": 49488562, "link": "https://stackoverflow.com/questions/49488562/custom-resource-name-as-variable/49502344#49502344", "title": "Custom resource name as variable", "body": "<p>I probably wouldn't actually use a loop for this but:</p>\n\n<pre><code>%w{one two three}.each do |res|\n  declare_resource(:\"mycookbook_#{res}\", \"nameofresource\") do\n     # Normal resource body block goes here.\n  end\nend\n</code></pre>\n\n<p>If you can be more specific about the use case, I can try to give you a better example of what to actually use instead.</p>\n"}], "owner": {"reputation": 3, "user_id": 9551814, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29324396f79b45573ae9d336ffaf42bc?s=128&d=identicon&r=PG&f=1", "display_name": "hfskappel", "link": "https://stackoverflow.com/users/9551814/hfskappel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 127, "favorite_count": 0, "accepted_answer_id": 49502344, "answer_count": 1, "score": 0, "last_activity_date": 1522108152, "creation_date": 1522057925, "last_edit_date": 1522068974, "question_id": 49488562, "link": "https://stackoverflow.com/questions/49488562/custom-resource-name-as-variable", "title": "Custom resource name as variable", "body": "<p>In chef you can call a recipe by using string variables like </p>\n\n<p><code>cookbook='my_cookbook'\n%w[ recipe1 recipe2 recipe3 ].each do |recipe|\n   include_recipe \"#{cookbook}::#{recipe}\"\nend</code></p>\n\n<p>Is it possible to do a similar thing to execute different custom resources?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3", "routes"], "answers": [{"tags": [], "owner": {"reputation": 1308, "user_id": 3759158, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/70BLw.jpg?s=128&g=1", "display_name": "Manishh", "link": "https://stackoverflow.com/users/3759158/manishh"}, "is_accepted": true, "score": 4, "last_activity_date": 1522060751, "last_edit_date": 1522060751, "creation_date": 1522056161, "answer_id": 49487979, "question_id": 49487881, "link": "https://stackoverflow.com/questions/49487881/actioncontrollerroutingerror-uninitialized-constant-basecontroller/49487979#49487979", "title": "ActionController::RoutingError (uninitialized constant BaseController)", "body": "<p>Yes it will be undefined as you have created your controller within module namespace. You can simply get rid of this issue by providing proper namespace for the base.</p>\n\n<pre><code>class Api::WhiteLabel::V1::CarMakeController &lt; Api::WhiteLabel::V1::BaseController\n</code></pre>\n\n<p>Or</p>\n\n<pre><code>module Api::WhiteLabel::V1\n  class CarMakeController &lt; BaseController\n</code></pre>\n"}], "owner": {"reputation": 5144, "user_id": 5411461, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/RyJfN.jpg?s=128&g=1", "display_name": "Haseeb Ahmad", "link": "https://stackoverflow.com/users/5411461/haseeb-ahmad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 416, "favorite_count": 0, "accepted_answer_id": 49487979, "answer_count": 1, "score": 0, "last_activity_date": 1522060751, "creation_date": 1522055796, "question_id": 49487881, "link": "https://stackoverflow.com/questions/49487881/actioncontrollerroutingerror-uninitialized-constant-basecontroller", "title": "ActionController::RoutingError (uninitialized constant BaseController)", "body": "<p>I create controller in app/controllers/v1/white_label_api</p>\n\n<pre><code>class Api::WhiteLabel::V1::BaseController &lt; ApplicationController\nend\n</code></pre>\n\n<p>and in other controllers I do</p>\n\n<pre><code>class Api::WhiteLabel::V1::CarMakeController &lt; BaseController\n</code></pre>\n\n<p>But it gives an error uninitialized constant BaseController</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 0, "creation_date": 1522059817, "post_id": 49487624, "comment_id": 85980963, "body": "May be you can tell what you want to achieve by fetching object of your application&#39;s <code>Foo</code> class and then we can find the best way to do that."}, {"owner": {"reputation": 13, "user_id": 1973970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ae4f86ddc70bfdb8b6c8a2001f1ce7d?s=128&d=identicon&r=PG", "display_name": "kudrin", "link": "https://stackoverflow.com/users/1973970/kudrin"}, "reply_to_user": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 0, "creation_date": 1522060842, "post_id": 49487624, "comment_id": 85981615, "body": "@JagdeepSingh method Foo &amp; Bar - it&#39;s value objects, gem - client to api. That&#39;s gem included to few microservices. I want programmers don&#39;t expand gem, they should write their functions in microservices."}, {"owner": {"reputation": 1066, "user_id": 2692292, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edc9547cefa57fafd20952ccf570251a?s=128&d=identicon&r=PG", "display_name": "romainsalles", "link": "https://stackoverflow.com/users/2692292/romainsalles"}, "edited": false, "score": 1, "creation_date": 1522063851, "post_id": 49487624, "comment_id": 85983701, "body": "What if your ApplicationNamespace class doesn&#39;t have a Foo class ? Do you return a GemNamespace::Foo instance ? There is something strange in your code I think."}], "answers": [{"tags": [], "owner": {"reputation": 267, "user_id": 2328827, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3836cfdf2aa2e725587722233a09621c?s=128&d=identicon&r=PG", "display_name": "Daniel Christiany", "link": "https://stackoverflow.com/users/2328827/daniel-christiany"}, "is_accepted": false, "score": 0, "last_activity_date": 1522147756, "last_edit_date": 1522147756, "creation_date": 1522065765, "answer_id": 49491008, "question_id": 49487624, "link": "https://stackoverflow.com/questions/49487624/inheritance-on-different-namespace/49491008#49491008", "title": "Inheritance on different namespace", "body": "<p>Your Problem is not, that you have several Namespaces, but that GemNamespace::Bar is tightly coupled to GemNamespace::Foo.</p>\n\n<p>You could use something like this:</p>\n\n<pre><code>class Bar\n\n    def initialize(klass)\n        @klass = klass\n    end\n\n    def foo\n        @foo ||= @klass.new\n    end\nend\n</code></pre>\n\n<p>So instead of only ever using GemNamespace::Foo within Bar, you could pass any class.</p>\n"}, {"tags": [], "owner": {"reputation": 131, "user_id": 9190379, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-u3hJRH-INhg/AAAAAAAAAAI/AAAAAAAAABA/1ZSQo2bdBNY/photo.jpg?sz=128", "display_name": "Shirotha", "link": "https://stackoverflow.com/users/9190379/shirotha"}, "is_accepted": false, "score": 0, "last_activity_date": 1522276712, "creation_date": 1522276712, "answer_id": 49545290, "question_id": 49487624, "link": "https://stackoverflow.com/questions/49487624/inheritance-on-different-namespace/49545290#49545290", "title": "Inheritance on different namespace", "body": "<p>Your current version of the <code>foo</code> method will allways refer to <code>GemNamespace::Foo</code> because its context is set at definition (not at execution). Instead you could get the module of the current executing class dynamically. I don't think there is a build-in method that does this so you have to get it manually:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>def foo\n    @foo ||= self.class.name.split(\"::\")[0..-2].inject(Kernel) { |s, c| s.const_get c }.const_get(\"Foo\").new\nend\n</code></pre>\n\n<p>This will work for any number of nested modules.</p>\n"}], "owner": {"reputation": 13, "user_id": 1973970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ae4f86ddc70bfdb8b6c8a2001f1ce7d?s=128&d=identicon&r=PG", "display_name": "kudrin", "link": "https://stackoverflow.com/users/1973970/kudrin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 181, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1522276712, "creation_date": 1522054923, "question_id": 49487624, "link": "https://stackoverflow.com/questions/49487624/inheritance-on-different-namespace", "title": "Inheritance on different namespace", "body": "<p>I have self-writed gem</p>\n\n<pre><code>module GemNamespace\n  class Foo; end\n  class Bar\n    def foo\n      @foo ||= Foo.new\n    end\n  end\nend\n</code></pre>\n\n<p>Also I have application</p>\n\n<pre><code>module ApplicationNamespace\n  class Foo &lt; GemNamespace::Foo; end\n  class Bar &lt; GemNamespace::Bar; end\nend\n</code></pre>\n\n<p>When I call <code>foo</code> method at my application it returned me instanceof <code>GemNamespace</code> object:</p>\n\n<pre><code>bar = ApplicationNamespace::Bar.new\nputs bar.foo\n=&gt; #&lt;GemNamespace::Foo:0x007f849d8169f0&gt;\n</code></pre>\n\n<p>But I want get object of <code>ApplicationNamespace</code> how I can do this without redefine <code>foo</code> method</p>\n"}, {"tags": ["ruby", "bundle", "jekyll", "ffi"], "answers": [{"tags": [], "owner": {"reputation": 4449, "user_id": 7681659, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47bc1a3b7231505d61b7f80642bc1a14?s=128&d=identicon&r=PG&f=1", "display_name": "ashmaroli", "link": "https://stackoverflow.com/users/7681659/ashmaroli"}, "is_accepted": false, "score": 3, "last_activity_date": 1531051604, "last_edit_date": 1531051604, "creation_date": 1522054028, "answer_id": 49487357, "question_id": 49485905, "link": "https://stackoverflow.com/questions/49485905/jekyll-install-with-ruby-2-5/49487357#49487357", "title": "Jekyll install with Ruby 2.5", "body": "<p>The recent versions of <code>ffi</code> installs fine on Ruby 2.5. Bundler automatically requests for the latest version, unless there's a Gemfile.lock file, or a constraint has been specified in a Gemfile file or a dependency's gemspec.</p>\n\n<p>You can first try running <code>bundle update</code>.<br>\nIf that doesn't work, you can edit the Gemfile file (if available), and add <code>gem 'ffi', '~&gt; 1.9'</code> before running <code>bundle install</code>. You can also manually install the gem with <code>gem install ffi</code>.</p>\n"}], "owner": {"reputation": 126, "user_id": 8225159, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-ABpMrdbHzGo/AAAAAAAAAAI/AAAAAAAAACg/DJofRKNyWiw/photo.jpg?sz=128", "display_name": "AAAAR", "link": "https://stackoverflow.com/users/8225159/aaaar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 615, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1531051604, "creation_date": 1522048783, "question_id": 49485905, "link": "https://stackoverflow.com/questions/49485905/jekyll-install-with-ruby-2-5", "title": "Jekyll install with Ruby 2.5", "body": "<p>I got a problem when i was installing Jekyll on win10.\nWhen I finished deployment for ruby and wanna install Jekyll, it needs to install bundle first. </p>\n\n<pre><code>Fetching ffi 1.9.17 (x64-mingw32)\nInstalling ffi 1.9.17 (x64-mingw32)\nGem::RuntimeRequirementNotMetError: ffi requires Ruby version &lt; 2.5, &gt;= 2.0. The\ncurrent ruby version is 2.5.0.\nAn error occurred while installing ffi (1.9.17), and Bundler cannot continue.\nMake sure that `gem install ffi -v '1.9.17'` succeeds before bundling.\n</code></pre>\n\n<p>Then I followed the instruction </p>\n\n<pre><code>gem install ffi -v 1.9.17\n</code></pre>\n\n<p>The Error log is </p>\n\n<pre><code>ERROR:  Error installing ffi:\n        The last version of ffi (= 1.9.17) to support your Ruby &amp; RubyGems was 1.9.17. Try installing it with `gem install ffi -v 1.9.17`\n        ffi requires Ruby version &lt; 2.5, &gt;= 2.0. The current ruby version is 2.5.0.\n</code></pre>\n\n<p>Also I have tried to followed the solution by <a href=\"https://github.com/ffi/ffi/issues/598\" rel=\"nofollow noreferrer\">vbortone</a>.</p>\n\n<pre><code>gem install ffi -f\n</code></pre>\n\n<p>It also didn't work.</p>\n\n<pre><code>ERROR:  Error installing ffi:\n    The last version of ffi (= 1.9.17) to support your Ruby &amp; RubyGems was 1.9.17. Try installing it with `gem install ffi -v 1.9.17`\n    ffi requires Ruby version &lt; 2.5, &gt;= 2.0. The current ruby version is 2.5.0.\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "session-variables"], "comments": [{"owner": {"reputation": 668, "user_id": 2812350, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/819EP.png?s=128&g=1", "display_name": "Igor Belo", "link": "https://stackoverflow.com/users/2812350/igor-belo"}, "edited": false, "score": 0, "creation_date": 1522052111, "post_id": 49485864, "comment_id": 85976212, "body": "what do you use as session storage?"}, {"owner": {"reputation": 16672, "user_id": 22237, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/hkobD.png?s=128&g=1", "display_name": "Kris", "link": "https://stackoverflow.com/users/22237/kris"}, "edited": false, "score": 0, "creation_date": 1522069355, "post_id": 49485864, "comment_id": 85987601, "body": "Maybe if you don&#39;t store the session data in a cookie (i.e. client side)."}, {"owner": {"reputation": 1597, "user_id": 717626, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/303d9f5c2135f14f277775052bcb131b?s=128&d=identicon&r=PG", "display_name": "Aaron Breckenridge", "link": "https://stackoverflow.com/users/717626/aaron-breckenridge"}, "edited": false, "score": 0, "creation_date": 1522076225, "post_id": 49485864, "comment_id": 85992722, "body": "In my opinion, it sounds like you&#39;re relying too much on session data. You&#39;ll also need to consider what happens when a product is deleted. It sounds ripe for further concerns. Adding a dedicated model that represents a product comparison stored in a session (ie. SessionProductComparison) may help reveal that elegance you&#39;re looking for (and hopefully wrap in tests). Unfortunately, as others have noted, much may depend on <i>how</i> you&#39;re storing sessions."}], "owner": {"reputation": 1863, "user_id": 972644, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/d8dd83b6ebef2ec950680fd01d69ed67?s=128&d=identicon&r=PG", "display_name": "amburnside", "link": "https://stackoverflow.com/users/972644/amburnside"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 47, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1522048640, "creation_date": 1522048640, "question_id": 49485864, "link": "https://stackoverflow.com/questions/49485864/how-to-delete-session-data-after-a-background-task-has-occured", "title": "How to delete session data after a background task has occured", "body": "<p>I am building an e-commerce site with Ruby on Rails version 5.1. The site allows a user to compare up to three products.  This is achieved by storing the product id's in a session array, then querying the db for those products.</p>\n\n<p>I have a scenario where an automated task will run and will remove a product from stock.  This is just simply setting a flag to false on the product table in the db.</p>\n\n<p>My question is: Is there a way to automate the removal of the product id in the session data for product compare if the product goes out of stock. I know I could probably do a check on the application controller, but I was hoping that there could be a more elegant approach?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "capistrano"], "comments": [{"owner": {"reputation": 3272, "user_id": 2389628, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/A4nuI.jpg?s=128&g=1", "display_name": "smallbutton", "link": "https://stackoverflow.com/users/2389628/smallbutton"}, "edited": false, "score": 0, "creation_date": 1522048656, "post_id": 49485461, "comment_id": 85974339, "body": "Is it possible that you have multiple ruby versions on that server installed via rvm?"}, {"owner": {"reputation": 587, "user_id": 4297122, "user_type": "registered", "accept_rate": 53, "profile_image": "https://graph.facebook.com/100000722742064/picture?type=large", "display_name": "Jais Anasrulloh Ja&#39;fari", "link": "https://stackoverflow.com/users/4297122/jais-anasrulloh-jafari"}, "reply_to_user": {"reputation": 3272, "user_id": 2389628, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/A4nuI.jpg?s=128&g=1", "display_name": "smallbutton", "link": "https://stackoverflow.com/users/2389628/smallbutton"}, "edited": false, "score": 0, "creation_date": 1522049056, "post_id": 49485461, "comment_id": 85974531, "body": "yes, i have 2 two version in my server, one is running locally as localhost and second one is like above to be public, any ideas ?"}, {"owner": {"reputation": 543, "user_id": 3227190, "user_type": "registered", "profile_image": "https://graph.facebook.com/694991591/picture?type=large", "display_name": "Enrai", "link": "https://stackoverflow.com/users/3227190/enrai"}, "edited": false, "score": 1, "creation_date": 1522062131, "post_id": 49485461, "comment_id": 85982484, "body": "Check the ruby version when you run <code>gem install bundler</code> with <code>ruby -v</code>. If it is different than the one that Capistrano is trying to use (2.2.1) switch to it and install bundler <code>rvm use 2.2.1 &amp;&amp; gem install bundler</code>."}], "owner": {"reputation": 587, "user_id": 4297122, "user_type": "registered", "accept_rate": 53, "profile_image": "https://graph.facebook.com/100000722742064/picture?type=large", "display_name": "Jais Anasrulloh Ja&#39;fari", "link": "https://stackoverflow.com/users/4297122/jais-anasrulloh-jafari"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 768, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1522047846, "creation_date": 1522046878, "last_edit_date": 1522047846, "question_id": 49485461, "link": "https://stackoverflow.com/questions/49485461/capistrano-bash-bundle-command-not-found-even-has-been-installed", "title": "Capistrano bash: bundle: command not found even has been installed", "body": "<p>Hi guys i have problem to deploy my rails app to production server. Actually i have install <code>bundle</code> in server via <code>gem install bundler</code>. Unfortunately when i typed <code>cap production deploy</code> it becomes like this:</p>\n\n<pre><code>** [out :: server url] bash: bundle: command not found\n    command finished in 772ms\n*** [deploy:update_code] rolling back\n  * executing \"rm -rf /home/deployer/crawler/releases/20180326063414; true\"\n    servers: [\"server url\"]\n    [server url] executing command\n    command finished in 833ms\nfailed: \"rvm_path=$HOME/.rvm/ $HOME/.rvm/bin/rvm-shell 'ruby-2.2.1' -c 'cd /home/deployer/crawler/releases/20180326063414 &amp;&amp; bundle install --gemfile /home/deployer/crawler/releases/20180326063414/Gemfile --path /home/deployer/crawler/shared/bundle --deployment --quiet --without development test'\" on server url\n</code></pre>\n\n<p>it says <code>bash: bundle: command not found</code>. I typed <code>bundle --version</code> the output is: </p>\n\n<blockquote>\n  <p>Bundler version 1.16.1</p>\n</blockquote>\n\n<p>here is my gemfile</p>\n\n<pre><code>group :development do\n  gem 'capistrano', '~&gt;2.15.4'\n  gem 'rvm-capistrano', '1.4.1', require: false\n  gem 'invoker'\n  gem 'regularity', require: nil\n  gem 'pry-rails'\nend\n</code></pre>\n\n<p>and here is my deploy.rb:</p>\n\n<pre><code>require \"bundler/capistrano\"\nrequire \"rvm/capistrano\"\nrequire 'capistrano/ext/multistage'\nrequire 'rollbar/capistrano'\n\n#set :rollbar_token, '3dc5b293a0c74c3e8b98ab26f07bea74'\nset :rollbar_token, 'de21e333f1d5469ea521c2ef3a29bd3d'\n\nset :application, \"crawler\"\n# set :repository,  \"git@bitbucket.org:terbang-ventures/linkedin-scraper.git\"\nset :repository,  \"git@bitbucket.org:terbang-ventures/linkedin-scraper.git\"\n\nset :rails_env, \"production\"\nset :branch, \"master\"\n\nset :scm, :git\nset :default_shell, '/bin/bash -l'\n\n# set :whenever_environment, defer { stage }\n# require \"whenever/capistrano\"\nset :stages, %w(production staging)\nset :user, 'deployer'\nset :rvm_type, :user\nset :rvm_ruby_string, 'ruby-2.2.1'\nset :rvm_binary, '~/.rvm/bin/rvm'\n$:.unshift(File.expand_path('./lib', ENV['rvm_path']))\n\nset :deploy_to, \"/home/#{user}/#{application}\"\nset :use_sudo, false\n\nset :deploy_via, :remote_cache\n\ndefault_run_options[:pty] = true\nssh_options[:forward_agent] = true\n\nnamespace :deploy do\n  desc 'Load environment variables'\n  task :load_env_vars do\n    run \"ln -s /home/#{user}/env.yml #{current_release}/config/env.yml\"\n  end\n\n  desc \"Migrate DB1\"\n  task :migrate_db1  do\n    # rake db:migrate_db1 RAILS_ENV=staging\n    run \"cd #{current_path} &amp;&amp; bundle exec rake db:migrate_db1 RAILS_ENV=#{rails_env}\"\n  end\n\n  desc 'Re-establish mongoid.yml'\n  task :set_database_symlink do\n    run \"ln -s /home/#{user}/mongoid.yml #{current_release}/config/mongoid.yml\"\n  end\n\n  desc 'Re-establish database.yml'\n  task :set_database_symlink_active_record do\n    run \"ln -s /home/#{user}/database.yml #{current_release}/config/database.yml\"\n  end\n\n  desc 'run bundle install'\n  task :install_bundle do\n    run \"cd #{current_path} &amp;&amp; bundle install\"\n  end\n\n  task :restart, :roles =&gt; :app, :except =&gt; { :no_release =&gt; true } do\n    run \"ps axf | grep puma | grep -v grep | awk '{print \\\"kill -9 \\\" $1}' | sh\"\n    run \"cd #{current_path} &amp;&amp; bundle exec puma -e #{rails_env} -p 9292 -d\"\n    run \"cd #{current_path} &amp;&amp; bundle exec puma -e #{rails_env} -p 9293 -d\"\n  end\n\n  task :stop, :roles =&gt; :app, :except =&gt; { :no_release =&gt; true } do\n    run \"ps axf | grep puma | grep -v grep | awk '{print \\\"kill -9 \\\" $1}' | sh\"\n  end\n\n  task :start, :roles =&gt; :app, :except =&gt; { :no_release =&gt; true } do\n    run \"cd #{current_path} &amp;&amp; bundle exec puma -e #{rails_env} -p 9292 -d\"\n    run \"cd #{current_path} &amp;&amp; bundle exec puma -e #{rails_env} -p 9293 -d\"\n  end\nend\n\n\nnamespace :searchkick do\n  # reindex\n  namespace :reindex do\n    # Reindex Contact\n    task :contact, except: {no_release: true} do\n      run \"cd #{current_path} &amp;&amp; bundle exec rake searchkick:reindex CLASS=Contact RAILS_ENV=#{rails_env}\"\n    end\n\n    # Reindex Contact\n    task :company, except: {no_release: true} do\n      run \"cd #{current_path} &amp;&amp; bundle exec rake searchkick:reindex CLASS=Company RAILS_ENV=#{rails_env}\"\n    end\n\n    task :user, except: {no_release: true} do\n      run \"cd #{current_path} &amp;&amp; bundle exec rake searchkick:reindex CLASS=User RAILS_ENV=#{rails_env}\"\n    end\n\n    task :all, except: {no_release: true} do\n      run \"cd #{current_path} &amp;&amp; bundle exec rake searchkick:reindex:all RAILS_ENV=#{rails_env}\"\n    end\n  end\nend\n\n\nnamespace :importer do\n  task :department, roles: :app, except: {no_release: true} do\n    run \"cd #{current_path} &amp;&amp; bundle exec rake importer:import_department RAILS_ENV=#{rails_env}\"\n  end\n\n  task :staff_level, roles: :app, except: {no_release: true} do\n    run \"cd #{current_path} &amp;&amp; bundle exec rake importer:import_staff_level RAILS_ENV=#{rails_env}\"\n  end\n\n  task :email_format, roles: :app, except: {no_release: true} do\n    run \"cd #{current_path} &amp;&amp; bundle exec rake importer:import_email_format RAILS_ENV=#{rails_env}\"\n  end\n\n  task :combined_emails, roles: :app, except: {no_release: true} do\n    run \"cd #{current_path} &amp;&amp; bundle exec rake importer:import_combined_emails RAILS_ENV=#{rails_env}\"\n  end\n\n  task :late_address, roles: :app, except: {no_release: true} do\n    run \"cd #{current_path} &amp;&amp; bundle exec rake importer:import_late_address RAILS_ENV=#{rails_env}\"\n  end\nend\n\nnamespace :rails do\n  desc \"Remote console\"\n  task :console, roles: :app, except: { no_release: true } do\n    run_interactively \"bundle exec rails c -e #{rails_env}\"\n  end\n\n  desc \"Remote dbconsole\"\n  task :dbconsole, roles: :app, except: { no_release: true } do\n    run_interactively \"bundle exec rails dbconsole -e #{rails_env}\"\n  end\n\n  # Short aliases\n  task :c, roles: :app do\n    console\n  end\n\n  task :dbc, roles: :app do\n    dbconsole\n  end\n\n  desc \"Monitor log\"\n  task :log, roles: :app, except: { no_release: true } do\n    run_interactively \"tail -f log/#{rails_env}.log\"\n  end\n\n  def run_interactively(command)\n    server ||= find_servers_for_task(current_task).first\n    puts \"    running `#{command}` as #{user}@#{server}\"\n    exec %Q(ssh #{user}@#{server} -t \"bash --login -c 'cd #{current_path} &amp;&amp; #{command}'\")\n  end\nend\n\n\nafter \"deploy\", \"deploy:cleanup\"\nafter \"deploy\", \"deploy:migrate\"\nafter \"deploy:migrate\", \"deploy:migrate_db1\"\nafter \"deploy:start\", \"sidekiq:start\"\nafter \"deploy\", \"sidekiq:restart\"\nbefore \"deploy:assets:precompile\", \"deploy:load_env_vars\"\nbefore \"deploy:assets:precompile\", \"deploy:set_database_symlink\"\nbefore \"deploy:assets:precompile\", \"deploy:set_database_symlink_active_record\"\nbefore \"deploy:assets:precompile\", \"deploy:assets:clean\"\nbefore \"deploy:migrate\", \"deploy:install_bundle\"\n</code></pre>\n\n<p>My question is, why that capistrano still asking my <code>bundle</code> command not found if i trace it failed in <code>rvm_path=$HOME/.rvm/ $HOME/.rvm/bin/rvm-shell 'ruby-2.2.1' -c 'cd /home/deployer/crawler/releases/20180326065919 &amp;&amp; bundle install --gemfile /home/deployer/crawler/releases/20180326065919/Gemfile --path /home/deployer/crawler/shared/bundle --deployment --quiet --without development test'</code>?</p>\n"}]