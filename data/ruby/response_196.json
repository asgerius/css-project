[{"tags": ["ruby", "grape"], "answers": [{"tags": [], "owner": {"reputation": 1480, "user_id": 4741620, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/13911648aa5b99a6542494b4c8fcbc38?s=128&d=identicon&r=PG&f=1", "display_name": "jedi", "link": "https://stackoverflow.com/users/4741620/jedi"}, "is_accepted": false, "score": 0, "last_activity_date": 1539285913, "creation_date": 1539285913, "answer_id": 52767524, "question_id": 52750304, "link": "https://stackoverflow.com/questions/52750304/grape-api-problem-making-a-post-request-using-curl-with-data-option/52767524#52767524", "title": "Grape API - problem making a post request using curl with data option", "body": "<p>I figured this out. <code>-d</code> sends the Content-Type <code>application/x-www-form-urlencoded</code> which means I needed to specify <code>JSON</code> Content-Type in the Header which I didn't do. What I did to solve it was:</p>\n\n<pre><code>curl -i -H \"Content-Type: application/json\" -X POST -d '{ \"start_address\": \"asdasd\", \"destination_address\": \"asdasdada\", \"price\": 120, \"date\": \"10.10.2018\" }' http://localhost:3000/api/trips\n</code></pre>\n"}], "owner": {"reputation": 1480, "user_id": 4741620, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/13911648aa5b99a6542494b4c8fcbc38?s=128&d=identicon&r=PG&f=1", "display_name": "jedi", "link": "https://stackoverflow.com/users/4741620/jedi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 87, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1539285913, "creation_date": 1539215857, "question_id": 52750304, "link": "https://stackoverflow.com/questions/52750304/grape-api-problem-making-a-post-request-using-curl-with-data-option", "title": "Grape API - problem making a post request using curl with data option", "body": "<p>I have an endpoint written in Grape that inherits from the base class which looks like this:</p>\n\n<pre><code>module API\n  class Core &lt; Grape::API\n    default_format :json\n    prefix :api\n    content_type :json, 'application/json'\n\n    mount ::Trips::Base\n  end\nend\n</code></pre>\n\n<p>This is my endpoint:</p>\n\n<pre><code>module Trips\n  class TripsAPI &lt; API::Core\n    helpers do\n      params :trips_params do\n        requires :start_address, type: String\n        requires :destination_address, type: String\n        requires :price, type: Float\n        requires :date, type: Date\n      end\n    end\n\n    resources :trips do\n      params do\n        use :trips_params\n      end\n      desc 'Creates new ride'\n      post do\n        Rides::CreateRide.new(params).call\n      end\n    end\n  end\nend\n</code></pre>\n\n<p>When I make an explicit post request it works fine.</p>\n\n<pre><code>curl -d \"start_address=some address&amp;destination_address=some address&amp;price=120&amp;date=10.10.2018\" -X POST http://localhost:3000/api/trips\n</code></pre>\n\n<p>When I try to make a post request using <code>curl</code> with -d option I get an error: <code>{\"error\":\"start_address is missing, destination_address is missing, price is missing, date is missing\"}</code></p>\n\n<pre><code>curl -i -H \"Accept: application/vnd.api+json\" -X POST -d '{ \"start_address\": \"asdasd\", \"destination_address\": \"asdasdada\", \"price\": 120, \"date\": \"10.10.2018\" }' http://localhost:3000/api/trips\n</code></pre>\n\n<p>What am I doing wrong?</p>\n"}, {"tags": ["ruby", "variables"], "comments": [{"owner": {"reputation": 5579, "user_id": 3970701, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a937016807c66d89d0a62d7a1b235533?s=128&d=identicon&r=PG", "display_name": "Amin Shah Gilani", "link": "https://stackoverflow.com/users/3970701/amin-shah-gilani"}, "edited": false, "score": 0, "creation_date": 1539209759, "post_id": 52749419, "comment_id": 92423398, "body": "Hi Domani! Welcome to Stack Overflow! Your question lacks context and code examples. As a person that hasn&#39;t seen the specific code you&#39;re talking about, I&#39;m unsure what you&#39;re asking. Could you please include an example?  By the way, there is an <code>|</code> operator in Ruby, it&#39;s called the &quot;bitwise or&quot; operator; Here: <a href=\"https://ruby-doc.org/core-2.0.0/Fixnum.html#method-i-7C\" rel=\"nofollow noreferrer\">ruby-doc.org/core-2.0.0/Fixnum.html#method-i-7C</a>"}, {"owner": {"reputation": 2251, "user_id": 9785060, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IUduC.png?s=128&g=1", "display_name": "Viktor", "link": "https://stackoverflow.com/users/9785060/viktor"}, "edited": false, "score": 1, "creation_date": 1539209830, "post_id": 52749419, "comment_id": 92423412, "body": "You mean block variables ? Like this <code>(1..5).each do |x| puts  x end</code> or <code>{|x| puts x}</code>"}, {"owner": {"reputation": 1880, "user_id": 3574603, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/71a7b92124991652bf4dd64a9c50a9ca?s=128&d=identicon&r=PG&f=1", "display_name": "user3574603", "link": "https://stackoverflow.com/users/3574603/user3574603"}, "edited": false, "score": 0, "creation_date": 1539209843, "post_id": 52749419, "comment_id": 92423417, "body": "Are these <code>| |</code>s preceded by <code>{</code>s or the <code>do</code> keyword?"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 3, "creation_date": 1539211088, "post_id": 52749419, "comment_id": 92423768, "body": "I&#39;ve voted to close the question because of it being too broad. It is at present also unclear, but if clarified I suspect the reference is to block variables, in which case explaining what blocks are is much too general a topic for an SO question."}, {"owner": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1539211789, "post_id": 52749419, "comment_id": 92423947, "body": "@CarySwoveland This information is surprisingly hard to find in the Ruby docs if you don&#39;t already know where to look."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 0, "creation_date": 1539220700, "post_id": 52749419, "comment_id": 92425838, "body": "@Schwern, I&#39;m sure you&#39;re right, but it&#39;s not hard to find in any introductory book on Ruby, a better source for learning the language than exclusive reliance on Ruby docs."}, {"owner": {"reputation": 189, "user_id": 10480674, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/krkYd.png?s=128&g=1", "display_name": "Domani Tomlindo", "link": "https://stackoverflow.com/users/10480674/domani-tomlindo"}, "reply_to_user": {"reputation": 2251, "user_id": 9785060, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IUduC.png?s=128&g=1", "display_name": "Viktor", "link": "https://stackoverflow.com/users/9785060/viktor"}, "edited": false, "score": 0, "creation_date": 1539221223, "post_id": 52749419, "comment_id": 92425941, "body": "@\u0412\u0438\u043a\u0442\u043e\u0440 Yes, that is exactly what I&#39;m talking about"}], "answers": [{"tags": [], "owner": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "is_accepted": false, "score": 6, "last_activity_date": 1539211752, "creation_date": 1539211752, "answer_id": 52749809, "question_id": 52749419, "link": "https://stackoverflow.com/questions/52749419/putting-variables-between-in-ruby/52749809#52749809", "title": "Putting Variables Between | | in Ruby", "body": "<p>These are arguments to a closure, a little anonymous function.</p>\n\n<pre><code>my_method do |argument1, argument2|\n  puts argument1, argument2\nend\n</code></pre>\n\n<p><code>|argument1, argument2|</code> says it takes two arguments. Just like if you wrote a method you'd say <code>def method(argument1, argument2)</code>. Then <code>my_method</code> can accept the closure using <code>&amp;</code> and call it using <a href=\"https://ruby-doc.org/core/Proc.html#method-i-call\" rel=\"noreferrer\"><code>call</code></a>.</p>\n\n<pre><code>def my_method(&amp;block)\n  block.call(23, 42)\nend\n</code></pre>\n\n<p>This is how Ruby does iterators. For example, here's how you'd implement <code>map</code>.</p>\n\n<pre><code>def my_map(list, &amp;block)\n  list.each do |element|\n    block.call(element)\n  end\nend\n\nmy_map([23, 42, 99]) do |element|\n  puts element\nend\n</code></pre>\n\n<p>Or you can use <code>yield</code> which implicitly calls the block and it's slightly faster.</p>\n\n<pre><code>def my_map(list)\n  list.each do |element|\n    yield element\n  end\nend\n</code></pre>\n\n<p>A method can check if a block was passed in with <a href=\"https://ruby-doc.org/core/Kernel.html#method-i-block_given-3F\" rel=\"noreferrer\"><code>block_given?</code></a>. This is how, for example, <a href=\"https://ruby-doc.org/core/File.html#method-c-open\" rel=\"noreferrer\"><code>File.open</code></a> can either return an open filehandle, or it can give it to a block and close it when the block is done.</p>\n\n<pre><code>def open(filename, mode='r')\n  file = File.new(filename, mode)\n  if block_given?\n    yield file\n    file.close\n  else\n    file\n  end\nend\n\n# open foo.txt\nputs open(\"foo.txt\")\n\n# open foo.txt, execute the block, and close it\nopen(\"foo.txt\") do |file|\n  puts file.read\nend\n</code></pre>\n\n<p>This is very useful for when you need to take action, such as closing a file or shutting down a connection, once the work is done,</p>\n\n<p>For more see <a href=\"https://ruby-doc.org/core-2.5.1/doc/syntax/calling_methods_rdoc.html#label-Block+Argument\" rel=\"noreferrer\">Block Arguments in the Ruby Docs</a>.</p>\n"}], "owner": {"reputation": 189, "user_id": 10480674, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/krkYd.png?s=128&g=1", "display_name": "Domani Tomlindo", "link": "https://stackoverflow.com/users/10480674/domani-tomlindo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 2, "closed_date": 1539247449, "answer_count": 1, "score": -5, "last_activity_date": 1539230261, "creation_date": 1539209186, "last_edit_date": 1539230261, "question_id": 52749419, "link": "https://stackoverflow.com/questions/52749419/putting-variables-between-in-ruby", "closed_reason": "Needs more focus", "title": "Putting Variables Between | | in Ruby", "body": "<p>In Ruby code, I noticed some variables or other objects placed in between <code>| |</code>. I have no idea why. Is it usually used in hashmaps?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "testing", "capybara", "minitest"], "comments": [{"owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "edited": false, "score": 0, "creation_date": 1539208957, "post_id": 52749118, "comment_id": 92423161, "body": "What doesn&#39;t work about your test (exact error message would help)? What driver are you using with Capybara? Does it support JS ? - <a href=\"https://github.com/teamcapybara/capybara#drivers\" rel=\"nofollow noreferrer\">github.com/teamcapybara/capybara#drivers</a>.  Also you should be using <code>assert_selector</code> (or any of the other Capybara provided assertions, assert_css, assert_xpath, ...) rather than asserting against a predicate, the error message will be a lot more descriptive"}, {"owner": {"reputation": 157, "user_id": 8435162, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4ac84b00c049dadefb287dbc164d2c86?s=128&d=identicon&r=PG&f=1", "display_name": "danieljacky", "link": "https://stackoverflow.com/users/8435162/danieljacky"}, "reply_to_user": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "edited": false, "score": 0, "creation_date": 1539210816, "post_id": 52749118, "comment_id": 92423678, "body": "Error message with assert_selector: expected to find visible css &quot;#shipping_costs&quot; with text &quot;39.28&quot; but there were no matches. Also found &quot;&quot;, which matched the selector but not all filters.  Capybara driver: selenium_chrome"}, {"owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "edited": false, "score": 0, "creation_date": 1539214345, "post_id": 52749118, "comment_id": 92424544, "body": "That error tells you that the <code>#shipping_costs</code> element exists, but that it&#39;s either not visible on the page or the text in it doesn&#39;t match.  To diagnose, rather than the assert, do something like <code>sleep 3; puts find(&#39;#shipping_costs&#39;).text</code> to see what the actual contents are - If it&#39;s showing 0.0 or blank then you need to check for JS errors on your page. Also check your test.log to see what requests are being made to the google distance matrix api and the results you&#39;re getting."}, {"owner": {"reputation": 766, "user_id": 1772133, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf9816fbc30091abe048f667191cc81e?s=128&d=identicon&r=PG", "display_name": "Chris Hall", "link": "https://stackoverflow.com/users/1772133/chris-hall"}, "edited": false, "score": 0, "creation_date": 1539217706, "post_id": 52749118, "comment_id": 92425260, "body": "<a href=\"https://www.varvet.com/blog/why-wait_until-was-removed-from-capybara/\" rel=\"nofollow noreferrer\">You should never need to use sleep or manually wait with capybara.</a>  More likely is that the page requires javascript that&#39;s not supported by the driver (capybara_webkit is notoriously bad) or that the request to Google didn&#39;t work.  Either way, I would recommend stubbing the call to Google so that it returns a stable value (and doesn&#39;t cost any money)"}, {"owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "reply_to_user": {"reputation": 766, "user_id": 1772133, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf9816fbc30091abe048f667191cc81e?s=128&d=identicon&r=PG", "display_name": "Chris Hall", "link": "https://stackoverflow.com/users/1772133/chris-hall"}, "edited": false, "score": 0, "creation_date": 1539220966, "post_id": 52749118, "comment_id": 92425888, "body": "@ChrisHall Yes - we know -- but the OP is using selenium with chrome (as indicated) so it&#39;s not an unsupported JS issues, and the <code>sleep</code> was suggested as a diagnostic measure to ensure the element has updated before checking what its actual text contents are - not as a solution to fix the problem."}, {"owner": {"reputation": 766, "user_id": 1772133, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf9816fbc30091abe048f667191cc81e?s=128&d=identicon&r=PG", "display_name": "Chris Hall", "link": "https://stackoverflow.com/users/1772133/chris-hall"}, "reply_to_user": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "edited": false, "score": 0, "creation_date": 1539225319, "post_id": 52749118, "comment_id": 92426823, "body": "@ThomasWalpole ah, I missed that part of his comment.  Either way, capybara automatically waits and the assert printed the contents of the element (&quot;&quot;).  So, like you said, checking the logs to see what requests were made and adding some debug statements will probably narrow down the culprits."}, {"owner": {"reputation": 157, "user_id": 8435162, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4ac84b00c049dadefb287dbc164d2c86?s=128&d=identicon&r=PG&f=1", "display_name": "danieljacky", "link": "https://stackoverflow.com/users/8435162/danieljacky"}, "edited": false, "score": 0, "creation_date": 1539249014, "post_id": 52749118, "comment_id": 92435772, "body": "It\u2019s solved now, thank you! It was a beginner\u2019s mistake. The shipping_costs are saved in the database, then the database entry is displayed in the view. When running the test, the test-database was empty &amp; no session had started so the shipping_costs could\u2019t be saved and the output was an empty \u201c\u201d."}], "owner": {"reputation": 157, "user_id": 8435162, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4ac84b00c049dadefb287dbc164d2c86?s=128&d=identicon&r=PG&f=1", "display_name": "danieljacky", "link": "https://stackoverflow.com/users/8435162/danieljacky"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 42, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1539210957, "creation_date": 1539207314, "last_edit_date": 1539210957, "question_id": 52749118, "link": "https://stackoverflow.com/questions/52749118/rails-testing-google-distance-calculation-with-minitest-capybara", "title": "Rails: Testing Google Distance Calculation with Minitest + Capybara", "body": "<p>I'm trying to write a system test for a shipping cost calculation (uses Google Distance Matrix API). My current tests don't work. I don't know how I would test this.</p>\n\n<p>Demo image of the UI: <a href=\"https://i.stack.imgur.com/gE1lZ.png\" rel=\"nofollow noreferrer\">Calculate shipping costs by distance</a></p>\n\n<p>After you click the button the shipping costs will be updated via JavaScript in <code>&lt;td id=\"shipping_costs\"&gt;39.28&lt;/td&gt;</code></p>\n\n<p>My current test (which doesn't work):</p>\n\n<pre><code>test \"should calculate the correct shipping costs\" do\n  fill_in('postcode_delivery', with: '2100')\n  fill_in('postcode_pickup', with: '1010')\n  click_button('Calculate shipping')\n  assert_selector('#shipping_costs', text: '39.28')\nend\n</code></pre>\n\n<p>Error message: expected to find visible css \"#shipping_costs\" with text \"39.28\" but there were no matches. Also found \"\", which matched the selector but not all filters.</p>\n\n<p>Capybara driver: selenium_chrome</p>\n"}, {"tags": ["ruby", "logstash"], "answers": [{"tags": [], "owner": {"reputation": 21, "user_id": 7886646, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46dd93023defff559a0eed18eb3b3124?s=128&d=identicon&r=PG&f=1", "display_name": "Princewill Ezeidei", "link": "https://stackoverflow.com/users/7886646/princewill-ezeidei"}, "is_accepted": false, "score": 1, "last_activity_date": 1539299657, "creation_date": 1539299657, "answer_id": 52770087, "question_id": 52748956, "link": "https://stackoverflow.com/questions/52748956/logstash-errors-while-executing-ruby-code-ruby-exception-occurred-allocator-un/52770087#52770087", "title": "Logstash errors while executing ruby code (Ruby exception occurred: allocator undefined for Float)", "body": "<p>Thanks to a logstash community member @Ganesh_Venkataraman, i was able to figure the solution out. I had to add a \"rescue nil\" (will read up more on that later). \nHere's the code that finally worked for me. </p>\n\n<pre><code>if [received_at] and [sent_at] {\n    ruby {\n        init =&gt; \"require 'time'\"\n        code =&gt; \"\n            received_by_finacle   = (Time.parse(event.get('received_at')).to_f)*1000;\n            sent_out_by_finacle   = (Time.parse(event.get('sent_at')).to_f)*1000;\n            timetaken = (sent_out_by_finacle - received_by_finacle) rescue nil;\n            event.set('time_delta',timetaken);\n            event.set('epoch_received_at_in_milliseconds',received_by_finacle);\n            event.set('epoch_sent_at_in_milliseconds',sent_out_by_finacle);\n            \"\n            add_tag =&gt; [ \"calculated_time_difference\" ]\n    }\n} \n</code></pre>\n\n<p>Thanks.</p>\n"}], "owner": {"reputation": 21, "user_id": 7886646, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46dd93023defff559a0eed18eb3b3124?s=128&d=identicon&r=PG&f=1", "display_name": "Princewill Ezeidei", "link": "https://stackoverflow.com/users/7886646/princewill-ezeidei"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 180, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1539299657, "creation_date": 1539206458, "question_id": 52748956, "link": "https://stackoverflow.com/questions/52748956/logstash-errors-while-executing-ruby-code-ruby-exception-occurred-allocator-un", "title": "Logstash errors while executing ruby code (Ruby exception occurred: allocator undefined for Float)", "body": "<p>Was trying to execute below code in logstash but it keeps throwing an exception.</p>\n\n<pre><code>if [received_at] and [sent_at] {\n    ruby {\n      init =&gt; \"require 'time'\"\n      code =&gt; \"\n        received_by_finacle = (Time.parse(event.get('received_at').to_f)*1000).round(2);\n        sent_out_by_finacle = (Time.parse(event.get('sent_at').to_f)*1000).round(2);\n        event.set('delta', (sent_out_by_finacle - received_by_finacle)).to_s;\n        event.set('epoch_received_at_in_milliseconds', received_by_finacle);\n        event.set('epoch_sent_at_in_milliseconds', sent_out_by_finacle);\n        \"\n      add_tag =&gt; [ \"calculated_time_difference\" ]\n    }\n}  \n</code></pre>\n\n<p>the error returned is </p>\n\n<pre><code>[2018-10-10T22:01:05,631][ERROR][logstash.filters.ruby ] Ruby exception occurred: allocator undefined for Float\n[2018-10-10T22:01:05,640][ERROR][logstash.filters.ruby ] Ruby exception occurred: allocator undefined for Float\n</code></pre>\n\n<p>any ideas why please?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "postgresql", "ubuntu"], "comments": [{"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1539206187, "post_id": 52748746, "comment_id": 92422230, "body": "The password for <code>sudo -u postgres createuser -s $(whoami);</code> is whatever you want the password for the postgres role to be. But I would really name the default postgres account something different than your OS username like for example <code>pg_user</code>. The only reason you would want them to be the same is for a passwordless ident authentication."}, {"owner": {"reputation": 51013, "user_id": 976775, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30bd66ad1795804aebe249d8bcb14409?s=128&d=identicon&r=PG", "display_name": "MrYoshiji", "link": "https://stackoverflow.com/users/976775/mryoshiji"}, "edited": false, "score": 0, "creation_date": 1539206501, "post_id": 52748746, "comment_id": 92422337, "body": "This QA might help: <a href=\"https://stackoverflow.com/questions/12720967/how-to-change-postgresql-user-password\" title=\"how to change postgresql user password\">stackoverflow.com/questions/12720967/&hellip;</a>"}, {"owner": {"reputation": 766, "user_id": 1772133, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf9816fbc30091abe048f667191cc81e?s=128&d=identicon&r=PG", "display_name": "Chris Hall", "link": "https://stackoverflow.com/users/1772133/chris-hall"}, "edited": false, "score": 0, "creation_date": 1539218231, "post_id": 52748746, "comment_id": 92425372, "body": "You&#39;ll want to look at your config/database.yml file.  The problem probably isn&#39;t with Postgres, it&#39;s with your Rails configuration.  By default, with no <code>user:</code> listed, Rails will attempt to connect with the name of the user that started the server."}], "answers": [{"comments": [{"owner": {"reputation": 766, "user_id": 1772133, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf9816fbc30091abe048f667191cc81e?s=128&d=identicon&r=PG", "display_name": "Chris Hall", "link": "https://stackoverflow.com/users/1772133/chris-hall"}, "edited": false, "score": 1, "creation_date": 1539217929, "post_id": 52749165, "comment_id": 92425304, "body": "Where the rails gem is installed is not relevant to where his configuration files are.  They would be relative to the project <i>using</i> rails, not the gem itself."}], "tags": [], "owner": {"reputation": 647, "user_id": 857156, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66412a85a83783c2061838e1b44a9bbb?s=128&d=identicon&r=PG", "display_name": "Dave Gray", "link": "https://stackoverflow.com/users/857156/dave-gray"}, "is_accepted": false, "score": 1, "last_activity_date": 1539239703, "last_edit_date": 1539239703, "creation_date": 1539207584, "answer_id": 52749165, "question_id": 52748746, "link": "https://stackoverflow.com/questions/52748746/ruby-on-rails-postgres-how-can-i-create-a-new-database-for-a-user-that-doesnt/52749165#52749165", "title": "Ruby on Rails/Postgres - How can I create a new database for a user that doesn&#39;t exist?", "body": "<p>You can change the user Rails uses to connect to PostgreSQL by editing <code>&lt;project_root&gt;/config/database.yml</code> (<a href=\"https://www.digitalocean.com/community/tutorials/how-to-setup-ruby-on-rails-with-postgres\" rel=\"nofollow noreferrer\">source</a>).</p>\n\n<p>Also, the reason your first <code>psql</code> command didn't work is <code>-h localhost</code> requires a <code>host</code> entry in <code>pg_hba.conf</code>, not <code>local</code>. You can omit the <code>-h localhost</code> for the <code>local</code> entry to take effect since the default is to connect via a local socket.</p>\n"}], "owner": {"reputation": 299, "user_id": 9454269, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/0edb637e57ce3cad9745d80e6739b567?s=128&d=identicon&r=PG&f=1", "display_name": "KuroGane", "link": "https://stackoverflow.com/users/9454269/kurogane"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 314, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1539239703, "creation_date": 1539205377, "question_id": 52748746, "link": "https://stackoverflow.com/questions/52748746/ruby-on-rails-postgres-how-can-i-create-a-new-database-for-a-user-that-doesnt", "title": "Ruby on Rails/Postgres - How can I create a new database for a user that doesn&#39;t exist?", "body": "<p>I've cloned a repository, and set up everything via a virtual machine loaded with Ubuntu and using RVM. Everything regarding Ruby on Rails was installed via RVM.</p>\n\n<p>My issue is that, my Ubuntu login is different to the user that I assume the data base wants. Example, my Ubuntu login is Matt, but when I start rails server and load into the localhost:3000, it is saying this:</p>\n\n<pre><code>ActiveRecord::NoDatabaseError\nFATAL: role \"James\" does not exist \n</code></pre>\n\n<p>I understand this is a postgres error, but what should I do now to make this work? I've search through the previous StackOverflow answers and the methods just don't work.</p>\n\n<p>Eg. I've changed </p>\n\n<pre><code>local   all             postgres                                peer\n</code></pre>\n\n<p>to</p>\n\n<pre><code>local   all             postgres                                trust\n</code></pre>\n\n<p>Or using <code>psql -h localhost -U postgres</code> or <code>sudo -u postgres createuser -s $(whoami); createdb $(whoami)</code> and again, it doesn't work. The first command asks for a password, which I can't figure out.</p>\n"}, {"tags": ["ruby", "activerecord", "jointable"], "comments": [{"owner": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "edited": false, "score": 0, "creation_date": 1539207042, "post_id": 52748734, "comment_id": 92422522, "body": "<code>@drink.ingredients.create(...)</code>"}, {"owner": {"reputation": 7975, "user_id": 1577357, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/9db0054df76cc4b80888ff713527a652?s=128&d=identicon&r=PG", "display_name": "Zulhilmi Zainudin", "link": "https://stackoverflow.com/users/1577357/zulhilmi-zainudin"}, "edited": false, "score": 0, "creation_date": 1539208551, "post_id": 52748734, "comment_id": 92423014, "body": "Do you have <code>ingredient_params</code> in the same controller?"}, {"owner": {"reputation": 31, "user_id": 10453044, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4bb29dc8d3597bd255223d0580f6e3a0?s=128&d=identicon&r=PG&f=1", "display_name": "aared", "link": "https://stackoverflow.com/users/10453044/aared"}, "edited": false, "score": 0, "creation_date": 1539209572, "post_id": 52748734, "comment_id": 92423352, "body": "Yes, but I stil don&#39;t know what should be there. When I trying with  if drink.save   ingredient = Ingredient.find(params[:ingredient_id])   drink.ingredients &lt;&lt; ingredient   I have an error &#39;Couldn&#39;t find Ingredient without an ID&#39;"}], "owner": {"reputation": 31, "user_id": 10453044, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4bb29dc8d3597bd255223d0580f6e3a0?s=128&d=identicon&r=PG&f=1", "display_name": "aared", "link": "https://stackoverflow.com/users/10453044/aared"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 29, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1539205330, "creation_date": 1539205330, "question_id": 52748734, "link": "https://stackoverflow.com/questions/52748734/how-i-can-add-record-to-join-table-in-create-method", "title": "How I can add record to join table in create method?", "body": "<p>I have a problem with create method, when I trying to add record to join table.</p>\n\n<pre><code>def create\n  @drink = Drink.new(drink_params)\n  if @drink.save\n    @drink.ingredients &lt; ??? \n    redirect_to drink_path\n  else\n    render action: :new\n  end\nend\n</code></pre>\n\n<p>And at place ??? should be an array of choosen ingredients (by the user), but I don't know how I can do it. Any ideas?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "erb", "rouge"], "comments": [{"owner": {"reputation": 2630, "user_id": 1706670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a901672979d5870dc01f9787c0b2a4?s=128&d=identicon&r=PG", "display_name": "PGill", "link": "https://stackoverflow.com/users/1706670/pgill"}, "edited": false, "score": 0, "creation_date": 1539206684, "post_id": 52748672, "comment_id": 92422401, "body": "<code>rouge(&quot;&lt;%= p &#39;world&#39; %&gt;&quot;, &quot;erb&quot;)</code>  should be <code>rouge(p(&#39;world&#39;), &quot;erb&quot;)</code>"}, {"owner": {"reputation": 1825, "user_id": 772309, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/e22e46e4e9a0bc49ae068749a1315e86?s=128&d=identicon&r=PG", "display_name": "Ryan Grush", "link": "https://stackoverflow.com/users/772309/ryan-grush"}, "reply_to_user": {"reputation": 2630, "user_id": 1706670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a901672979d5870dc01f9787c0b2a4?s=128&d=identicon&r=PG", "display_name": "PGill", "link": "https://stackoverflow.com/users/1706670/pgill"}, "edited": false, "score": 0, "creation_date": 1539207007, "post_id": 52748672, "comment_id": 92422514, "body": "@PGill I&#39;m not trying print &#39;world&#39;, I&#39;m trying to print an entire html.erb partial. I tweaked the question slightly so hopefully its more clear."}], "owner": {"reputation": 1825, "user_id": 772309, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/e22e46e4e9a0bc49ae068749a1315e86?s=128&d=identicon&r=PG", "display_name": "Ryan Grush", "link": "https://stackoverflow.com/users/772309/ryan-grush"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 76, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1539206860, "creation_date": 1539205033, "last_edit_date": 1539206860, "question_id": 52748672, "link": "https://stackoverflow.com/questions/52748672/use-erb-block-as-a-literal-in-rouge-syntax-highlighting", "title": "Use ERB block as a literal in Rouge syntax highlighting", "body": "<p>I'm trying to setup <a href=\"https://github.com/jneen/rouge\" rel=\"nofollow noreferrer\">Rouge</a> for my Rails app and I'm having issues with passing in inline ERB strings or blocks. When it reads ERB from a file it works fine however. Here is an example of what I have - </p>\n\n<p><strong>Works</strong></p>\n\n<p><em>rouge_helper.rb</em></p>\n\n<pre><code>def rouge(file, language)\n  formatter = Rouge::Formatters::HTML.new(css_class: 'highlight', wrap: true)\n  lexer     = Rouge::Lexer.find(language)\n  output    = formatter.format(lexer.lex(file))\n\n  output\nend\n</code></pre>\n\n<p><em>app/views/example/_partial.html.erb</em></p>\n\n<pre><code>&lt;p&gt;hello &lt;%= p \"world\" %&gt;&lt;/p&gt;\n</code></pre>\n\n<p><em>app/views/example/index.html.erb</em></p>\n\n<pre><code>&lt;pre class=\"highlight\"&gt;\n  &lt;code&gt;\n    &lt;%= raw rouge(File.read(Rails.root + \"app/views/example/_partial.html.erb\"), \"erb\") %&gt;\n  &lt;/code&gt;\n&lt;/pre&gt;\n</code></pre>\n\n<p><strong>Does not work</strong></p>\n\n<p>When I repleace the <em>index.html.erb</em> file with this - </p>\n\n<pre><code>&lt;pre class=\"highlight\"&gt;\n  &lt;code&gt;\n    &lt;%= raw rouge(\"&lt;p&gt;hello &lt;%= p 'world' %&gt;&lt;/p&gt;\", \"erb\") %&gt;\n  &lt;/code&gt;\n&lt;/pre&gt;\n</code></pre>\n\n<p>I get this error - </p>\n\n<blockquote>\n  <p>app/views/styleguide/index.html.erb:3: syntax error, unexpected '>' \n  app/views/styleguide/index.html.erb:5: unknown regexp options - pr \n  app/views/styleguide/index.html.erb:6: unterminated string meets end\n  of file  app/views/styleguide/index.html.erb:6: syntax error,\n  unexpected end-of-input, expecting ')'</p>\n</blockquote>\n\n<p><strong>Desired Result</strong></p>\n\n<pre><code>&lt;p&gt;hello &lt;%= p \"world\" %&gt;&lt;/p&gt;\n</code></pre>\n"}, {"tags": ["arrays", "ruby", "hash"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1539205978, "post_id": 52748627, "comment_id": 92422160, "body": "First question: What have you tried? Hint: <a href=\"https://ruby-doc.org/core-2.5.0/Array.html#method-i-combination\" rel=\"nofollow noreferrer\"><code>combination</code></a> and <a href=\"https://ruby-doc.org/core-2.5.0/Array.html#method-i-zip\" rel=\"nofollow noreferrer\"><code>zip</code></a>."}, {"owner": {"reputation": 165, "user_id": 2213193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e7223dcb6f85b892fc815922653308aa?s=128&d=identicon&r=PG", "display_name": "Eddie Prislac", "link": "https://stackoverflow.com/users/2213193/eddie-prislac"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1539207841, "post_id": 52748627, "comment_id": 92422786, "body": "@tadman  zip&#39;s no good. Zipping the value of each key with the following key produces nils if the arrays are different sizes. This gives me the values I want: <code>hsh[:a].product(hsh[:b]).product(hsh[:c]).map(&amp;:flatten)</code>, now I just need to figure out how to do it without manually getting the product and flattening for each key, and the apply each value to its proper key in the new array of hashes"}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1539230583, "post_id": 52748627, "comment_id": 92427966, "body": "Are you talking about permutations or combinations? Or do you not even know what they mean?"}], "answers": [{"tags": [], "owner": {"reputation": 4866, "user_id": 6603195, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-nZGPkfcc0EE/AAAAAAAAAAI/AAAAAAAAAoE/op-TBiFRNzg/photo.jpg?sz=128", "display_name": "Marcin Ko\u0142odziej", "link": "https://stackoverflow.com/users/6603195/marcin-ko%c5%82odziej"}, "is_accepted": true, "score": 6, "last_activity_date": 1539206450, "creation_date": 1539206450, "answer_id": 52748954, "question_id": 52748627, "link": "https://stackoverflow.com/questions/52748627/given-a-hash-of-arrays-how-to-create-an-array-of-hashes-with-each-possible-comb/52748954#52748954", "title": "Given a hash of arrays, how to create an array of hashes with each possible combo", "body": "<pre><code>keys = hash.keys\nhash.values.inject(:product).map do |p|\n  Hash[keys.zip(p.flatten)]\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 165, "user_id": 2213193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e7223dcb6f85b892fc815922653308aa?s=128&d=identicon&r=PG", "display_name": "Eddie Prislac", "link": "https://stackoverflow.com/users/2213193/eddie-prislac"}, "edited": false, "score": 0, "creation_date": 1539208256, "post_id": 52749051, "comment_id": 92422920, "body": "I&#39;m no newbie, just facing a mass of tangled legacy spaghetti code"}], "tags": [], "owner": {"reputation": 2496, "user_id": 3046905, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/692eb06201cbed91c3c6a9cf11ed0511?s=128&d=identicon&r=PG", "display_name": "Ilya Konyukhov", "link": "https://stackoverflow.com/users/3046905/ilya-konyukhov"}, "is_accepted": false, "score": 0, "last_activity_date": 1539206925, "creation_date": 1539206925, "answer_id": 52749051, "question_id": 52748627, "link": "https://stackoverflow.com/questions/52748627/given-a-hash-of-arrays-how-to-create-an-array-of-hashes-with-each-possible-comb/52749051#52749051", "title": "Given a hash of arrays, how to create an array of hashes with each possible combo", "body": "<p>There are many ways to do so. Personally, I like @Marcin Ko\u0142odziej solution for compactness and effectiveness, however, it may look a little cryptic for newbies.</p>\n\n<p>The other way to solve it is to manually iterate over the hash and build an array:</p>\n\n<pre><code>hash = { a: [1, 2, 3], b: [1, 2], c: [1] }\nout = []\n\nhash.each do |key, values|\n  if out.empty?\n    out = values.map { |v| { key =&gt; v } }\n  else\n    new_out = []\n    out.each do |o|\n      new_out += values.map { |v| o.merge(key =&gt; v) }\n    end\n    out = new_out\n  end\nend\n\nout\n\n# [{:a=&gt;1, :b=&gt;1, :c=&gt;1}, {:a=&gt;1, :b=&gt;2, :c=&gt;1}, {:a=&gt;2, :b=&gt;1, :c=&gt;1}, {:a=&gt;2, :b=&gt;2, :c=&gt;1}, {:a=&gt;3, :b=&gt;1, :c=&gt;1}, {:a=&gt;3, :b=&gt;2, :c=&gt;1}] \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 2, "last_activity_date": 1539241754, "last_edit_date": 1539241754, "creation_date": 1539209715, "answer_id": 52749499, "question_id": 52748627, "link": "https://stackoverflow.com/questions/52748627/given-a-hash-of-arrays-how-to-create-an-array-of-hashes-with-each-possible-comb/52749499#52749499", "title": "Given a hash of arrays, how to create an array of hashes with each possible combo", "body": "<pre><code>h = { a:[1,2,3], b:[1,2], c: [1] }\n\nfirst, *rest = h.map { |k,v| [k].product(v) }\n  #=&gt; [[[:a, 1], [:a, 2], [:a, 3]], [[:b, 1], [:b, 2]], [[:c, 1]]]\nfirst.product(*rest).map(&amp;:to_h)\n  #=&gt; [{:a=&gt;1, :b=&gt;1, :c=&gt;1}, {:a=&gt;1, :b=&gt;2, :c=&gt;1}, {:a=&gt;2, :b=&gt;1, :c=&gt;1},\n  #    {:a=&gt;2, :b=&gt;2, :c=&gt;1}, {:a=&gt;3, :b=&gt;1, :c=&gt;1}, {:a=&gt;3, :b=&gt;2, :c=&gt;1}]\n</code></pre>\n\n<p>Note the intermediate calculation in the second step:</p>\n\n<pre><code>first.product(*rest)\n  #=&gt; [[[:a, 1], [:b, 1], [:c, 1]],\n  #    [[:a, 1], [:b, 2], [:c, 1]],\n  #    [[:a, 2], [:b, 1], [:c, 1]],\n  #    [[:a, 2], [:b, 2], [:c, 1]],\n  #    [[:a, 3], [:b, 1], [:c, 1]],\n  #    [[:a, 3], [:b, 2], [:c, 1]]]\n</code></pre>\n"}], "owner": {"reputation": 165, "user_id": 2213193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e7223dcb6f85b892fc815922653308aa?s=128&d=identicon&r=PG", "display_name": "Eddie Prislac", "link": "https://stackoverflow.com/users/2213193/eddie-prislac"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 153, "favorite_count": 2, "accepted_answer_id": 52748954, "answer_count": 3, "score": 2, "last_activity_date": 1539241754, "creation_date": 1539204807, "last_edit_date": 1539230526, "question_id": 52748627, "link": "https://stackoverflow.com/questions/52748627/given-a-hash-of-arrays-how-to-create-an-array-of-hashes-with-each-possible-comb", "title": "Given a hash of arrays, how to create an array of hashes with each possible combo", "body": "<p>Given a hash with values containing arrays of unequal lengths,</p>\n\n<pre><code>{a: [1, 2, 3], b: [1, 2], c: [1]}\n</code></pre>\n\n<p>is it possible to create an array of hashes containing the same keys, of all permutations of single values like the following without resorting to nesting multiple loops?</p>\n\n<pre><code>[\n  {a: 1, b: 1, c: 1},\n  {a: 1, b: 2, c: 1},\n  {a: 2, b: 1, c: 1},\n  {a: 2, b: 2, c: 1},\n  {a: 3, b: 2, c: 1},\n  {a: 3, b: 2, c: 1}\n]\n</code></pre>\n\n<p>We accomplish this using nested <code>each</code> loops for each key, but this looks nasty at a large scale. Actual data contain many more keys.</p>\n"}, {"tags": ["ruby", "pact"], "answers": [{"tags": [], "owner": {"reputation": 1020, "user_id": 832671, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/x4Lc1.png?s=128&g=1", "display_name": "Beth Skurrie", "link": "https://stackoverflow.com/users/832671/beth-skurrie"}, "is_accepted": false, "score": 0, "last_activity_date": 1540286907, "creation_date": 1540286907, "answer_id": 52945625, "question_id": 52748319, "link": "https://stackoverflow.com/questions/52748319/pact-error-while-loading-pact-helper-rb-malformed-version-number-string/52945625#52945625", "title": "PACT error while loading pact_helper.rb (Malformed version number string )", "body": "<p>Can you please raise an issue in the <a href=\"https://github.com/pact-foundation/pact-ruby\" rel=\"nofollow noreferrer\">pact-ruby</a> and include all the relevant versions, and the steps to recreate the issue, preferably with an executable code example.</p>\n"}], "owner": {"reputation": 13, "user_id": 10485913, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-JO2jSyfWtxg/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DXJacHVTdE-MiNcKf7nIWhAgJBbCA/mo/photo.jpg?sz=128", "display_name": "Juan", "link": "https://stackoverflow.com/users/10485913/juan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 42, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1540286907, "creation_date": 1539203333, "last_edit_date": 1539204188, "question_id": 52748319, "link": "https://stackoverflow.com/questions/52748319/pact-error-while-loading-pact-helper-rb-malformed-version-number-string", "title": "PACT error while loading pact_helper.rb (Malformed version number string )", "body": "<p>When I run the pact test, I get the following error. </p>\n\n<blockquote>\n  <p>An error occurred while loading ./spec/mailers/mailing_spec.rb.  </p>\n  \n  <p>&nbsp;Failure/Error:<br>\n  &nbsp;mock_service :core_service do<br>\n  &nbsp;&nbsp;&nbsp;    port \"3003\"<br>\n  &nbsp;end  </p>\n  \n  <p>ArgumentError:<br>\n  &nbsp;  Malformed version number string </p>\n</blockquote>\n\n<p>Any ideas around this issue? \nThanks in advance. </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "rubygems"], "comments": [{"owner": {"reputation": 1560, "user_id": 5614748, "user_type": "registered", "accept_rate": 68, "profile_image": "https://graph.facebook.com/10153324566173505/picture?type=large", "display_name": "Afolabi Olaoluwa Akinwumi", "link": "https://stackoverflow.com/users/5614748/afolabi-olaoluwa-akinwumi"}, "edited": false, "score": 0, "creation_date": 1539278097, "post_id": 52747981, "comment_id": 92453903, "body": "@theTinMan. Can give an input on this?"}], "answers": [{"comments": [{"owner": {"reputation": 1560, "user_id": 5614748, "user_type": "registered", "accept_rate": 68, "profile_image": "https://graph.facebook.com/10153324566173505/picture?type=large", "display_name": "Afolabi Olaoluwa Akinwumi", "link": "https://stackoverflow.com/users/5614748/afolabi-olaoluwa-akinwumi"}, "edited": false, "score": 0, "creation_date": 1539251208, "post_id": 52748768, "comment_id": 92437209, "body": "That sounds interesting. But when I get my result and put it in a different table, how do I now go about filtering that table by date just to see the total_charge_fee and total_network_fee based on date. e.g. filtering to see the total between yesterday and now"}, {"owner": {"reputation": 4866, "user_id": 6603195, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-nZGPkfcc0EE/AAAAAAAAAAI/AAAAAAAAAoE/op-TBiFRNzg/photo.jpg?sz=128", "display_name": "Marcin Ko\u0142odziej", "link": "https://stackoverflow.com/users/6603195/marcin-ko%c5%82odziej"}, "reply_to_user": {"reputation": 1560, "user_id": 5614748, "user_type": "registered", "accept_rate": 68, "profile_image": "https://graph.facebook.com/10153324566173505/picture?type=large", "display_name": "Afolabi Olaoluwa Akinwumi", "link": "https://stackoverflow.com/users/5614748/afolabi-olaoluwa-akinwumi"}, "edited": false, "score": 0, "creation_date": 1539260353, "post_id": 52748768, "comment_id": 92442810, "body": "Well, that is definitely out of the scope of your original question. You need to prepare an HTML somewhere on your page where you will allow user to pick dates, route that form to an action in your orders controller and use the date parameter to chain a <code>.where(date: params[:date])</code> to the query method above."}, {"owner": {"reputation": 1560, "user_id": 5614748, "user_type": "registered", "accept_rate": 68, "profile_image": "https://graph.facebook.com/10153324566173505/picture?type=large", "display_name": "Afolabi Olaoluwa Akinwumi", "link": "https://stackoverflow.com/users/5614748/afolabi-olaoluwa-akinwumi"}, "edited": false, "score": 0, "creation_date": 1539267528, "post_id": 52748768, "comment_id": 92447742, "body": "I can do that (filter) but the object won&#39;t return datetime in the .group clause you suggested above"}], "tags": [], "owner": {"reputation": 4866, "user_id": 6603195, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-nZGPkfcc0EE/AAAAAAAAAAI/AAAAAAAAAoE/op-TBiFRNzg/photo.jpg?sz=128", "display_name": "Marcin Ko\u0142odziej", "link": "https://stackoverflow.com/users/6603195/marcin-ko%c5%82odziej"}, "is_accepted": true, "score": 1, "last_activity_date": 1539205462, "creation_date": 1539205462, "answer_id": 52748768, "question_id": 52747981, "link": "https://stackoverflow.com/questions/52747981/how-do-i-return-a-key-value-pair-from-a-database-table-and-render-the-response-i/52748768#52748768", "title": "how do I return a key-value pair from a database table and render the response in a tabular form", "body": "<p>From Rails perspective, you need to prepare data that will be rendered in your view. From database perspective, you want to group your orders by currency and sum their charged and network fees. Using a query like this:</p>\n\n<pre><code>Order.group(:currency)\n     .select(\"currency, SUM(charged_fee) AS total_charged, SUM(network_fee) AS total_network\")\n</code></pre>\n\n<p>If you simply want to render that, assign it to an instance variable inside some action in a controller and use it in a view. You will be able to access your totals by calling</p>\n\n<pre><code>order.total_charged\norder.total_network\n</code></pre>\n\n<p>for each of the orders.</p>\n\n<p>Hope this makes it clearer for you.</p>\n"}], "owner": {"reputation": 1560, "user_id": 5614748, "user_type": "registered", "accept_rate": 68, "profile_image": "https://graph.facebook.com/10153324566173505/picture?type=large", "display_name": "Afolabi Olaoluwa Akinwumi", "link": "https://stackoverflow.com/users/5614748/afolabi-olaoluwa-akinwumi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 92, "favorite_count": 0, "accepted_answer_id": 52748768, "answer_count": 1, "score": 0, "last_activity_date": 1539205462, "creation_date": 1539201908, "last_edit_date": 1539202327, "question_id": 52747981, "link": "https://stackoverflow.com/questions/52747981/how-do-i-return-a-key-value-pair-from-a-database-table-and-render-the-response-i", "title": "how do I return a key-value pair from a database table and render the response in a tabular form", "body": "<p>I have a database table (order's table) that is densely populated with order information as it happens from users with their ids, <strong>and I want to get the sum of fees based on different currencies, and render them as a key-value pair report, at the frontend but in a tabular form</strong>, and I don't even know how to go about it. Below is an example of the table before I proceed</p>\n\n<p><strong>Orders Table</strong>\n<a href=\"https://i.stack.imgur.com/sTFTN.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/sTFTN.png\" alt=\"order-table\"></a></p>\n\n<p>So how do I craft this such that I will have a comprehensive sum of like currencies and show it in a tablular form in the frontend of the app, such that I have this table below:</p>\n\n<p><strong>comprehensive summary of like currencies based on sum of whatever existed in the orders table above</strong>\n<a href=\"https://i.stack.imgur.com/VP5R3.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/VP5R3.png\" alt=\"total\"></a></p>\n\n<p><strong>How do I go about this</strong>? Any help will be appreciated. All am thinking of is a key-value pair logic to render that object on the frontend.  </p>\n"}, {"tags": ["ruby", "rvm", "sudo"], "answers": [{"tags": [], "owner": {"reputation": 3571, "user_id": 185310, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/063c98fb1df33c7a4ea70a7d829f83c6?s=128&d=identicon&r=PG&f=1", "display_name": "Mike K.", "link": "https://stackoverflow.com/users/185310/mike-k"}, "is_accepted": true, "score": 1, "last_activity_date": 1539201420, "creation_date": 1539201420, "answer_id": 52747859, "question_id": 52747757, "link": "https://stackoverflow.com/questions/52747757/how-to-run-sudo-things-as-when-using-rvm/52747859#52747859", "title": "How to run sudo things as when using RVM", "body": "<p>RVM has sudo integration, see <a href=\"https://rvm.io/integration/sudo\" rel=\"nofollow noreferrer\">here</a>. </p>\n\n<blockquote>\n  <p>By default, when you use sudo your current shell environment is not\n  passed through to the session created by it, but RVM already allows\n  for easier access to sudo calls with rvmsudo. However, sudo's defaults\n  are very strict and you might end up getting password prompts on\n  commands that are set to use the sudo NOPASSWD directive.</p>\n</blockquote>\n"}], "owner": {"reputation": 579, "user_id": 9572280, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/V1qIs.png?s=128&g=1", "display_name": "Practical1", "link": "https://stackoverflow.com/users/9572280/practical1"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "accepted_answer_id": 52747859, "answer_count": 1, "score": 0, "last_activity_date": 1539201420, "creation_date": 1539200965, "last_edit_date": 1539201187, "question_id": 52747757, "link": "https://stackoverflow.com/questions/52747757/how-to-run-sudo-things-as-when-using-rvm", "title": "How to run sudo things as when using RVM", "body": "<p>I'm testing out a library called <code>packetgen</code> on my machine. The problem is not the library itself; I'm trying to inject a single packet on my network just for a simple test. However when I inject it, it raises and error:</p>\n\n<pre><code>Traceback (most recent call last):\n    3: from packet.rb:5:in `&lt;main&gt;'\n    2: from /home/COM-COM/.rvm/gems/ruby-2.5.1/gems/packetgen-2.8.6/lib   /packetgen/packet.rb:240:in `to_w'\n    1: from /home/COM-COM/.rvm/gems/ruby-2.5.1/gems/packetgen-2.8.6/lib/ packetgen/header/eth.rb:95:in `to_w'\n/home/COM_COM/.rvm/gems/ruby-2.5.1/gems/packetgen-2.8.6/lib/packetgen /header/eth.rb:95:in `open_live': wlp2s0: You don't have permission to capture on that device (socket: Operation not permitted) (RuntimeError)\n</code></pre>\n\n<p>I need superuser privileges to capture or inject packets on the network, but if I run <code>sudo 'ruby packet.rb'</code> it raises and a different error because<code>packetgen</code> isn't installed on my machine's version of ruby. I'm running a version of ruby different from my machine's preinstalled version courtesy of RVM (Ruby Version Mananger). Does anyone have a workaround or a way to run this program without sudo? Thanks!</p>\n"}, {"tags": ["ruby", "root", "sudo"], "answers": [{"tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": true, "score": 6, "last_activity_date": 1571246370, "last_edit_date": 1571246370, "creation_date": 1539200233, "answer_id": 52747608, "question_id": 52747306, "link": "https://stackoverflow.com/questions/52747306/how-to-check-for-root-prvileges-from-the-user-in-ruby/52747608#52747608", "title": "How to check for root prvileges from the user in Ruby?", "body": "<p>You can check with <code>Process.uid</code>:</p>\n\n<pre><code>case (Process.uid)\nwhen 0\n  # We're root!\nelse\n  $stderr.puts(\"You must run this with root privileges via sudo\")\nend\n</code></pre>\n\n<p>Remember to be <strong>extra super careful</strong> when writing scripts that run as root. Consider code like this:</p>\n\n<pre><code>system(\"convert #{image_path} #{target_path}\")\n</code></pre>\n\n<p>This is a massive security vulnerability because none of the shell arguments are properly escaped.</p>\n\n<p>A safer way:</p>\n\n<pre><code>system(\"convert\", image_path, target_path)\n</code></pre>\n\n<p>You'll need to ensure that anything and everything you do with any user data of any kind, no matter how carefully you think you've screened it, is treated with extreme suspicion. This is especially true for any operations that can read or write files.</p>\n"}, {"comments": [{"owner": {"reputation": 579, "user_id": 9572280, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/V1qIs.png?s=128&g=1", "display_name": "Practical1", "link": "https://stackoverflow.com/users/9572280/practical1"}, "edited": false, "score": 0, "creation_date": 1539200580, "post_id": 52747611, "comment_id": 92419846, "body": "What do <code>Etc.getpwuid.uid</code> and <code>exit 1</code> mean?"}, {"owner": {"reputation": 1230, "user_id": 511203, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ec96aadd672b8056173e4e8a5225d8b?s=128&d=identicon&r=PG", "display_name": "Mike Gorski", "link": "https://stackoverflow.com/users/511203/mike-gorski"}, "reply_to_user": {"reputation": 579, "user_id": 9572280, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/V1qIs.png?s=128&g=1", "display_name": "Practical1", "link": "https://stackoverflow.com/users/9572280/practical1"}, "edited": false, "score": 1, "creation_date": 1539204581, "post_id": 52747611, "comment_id": 92421602, "body": "<code>Etc.getpwuid</code> returns the current user&#39;s /etc/passwd information which contains the user&#39;s uid. The uid of 0 is assigned to root on unixy systems. The <code>exit 1</code> returns a value of 1 to the shell. This indicates the command did not complete successfully. 0 would be success."}, {"owner": {"reputation": 579, "user_id": 9572280, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/V1qIs.png?s=128&g=1", "display_name": "Practical1", "link": "https://stackoverflow.com/users/9572280/practical1"}, "edited": false, "score": 0, "creation_date": 1539209533, "post_id": 52747611, "comment_id": 92423336, "body": "Just curious, how would I do this on Windows?"}], "tags": [], "owner": {"reputation": 1230, "user_id": 511203, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ec96aadd672b8056173e4e8a5225d8b?s=128&d=identicon&r=PG", "display_name": "Mike Gorski", "link": "https://stackoverflow.com/users/511203/mike-gorski"}, "is_accepted": false, "score": 3, "last_activity_date": 1539200249, "creation_date": 1539200249, "answer_id": 52747611, "question_id": 52747306, "link": "https://stackoverflow.com/questions/52747306/how-to-check-for-root-prvileges-from-the-user-in-ruby/52747611#52747611", "title": "How to check for root prvileges from the user in Ruby?", "body": "<p>It's best to ask the user to run the script as root or using <code>sudo</code> than to implicitly try to grab that privilege in the script. Here's an approach that asks the user to run as root or using sudo:</p>\n\n<pre><code>require 'etc'\n\nif Etc.getpwuid.uid != 0\n  puts \"You need to run this script as root or using sudo\"\n  exit 1\nelse\n  puts \"Running in privileged mode\"\n  # Do stuff only superuser can do\nend\n</code></pre>\n"}], "owner": {"reputation": 579, "user_id": 9572280, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/V1qIs.png?s=128&g=1", "display_name": "Practical1", "link": "https://stackoverflow.com/users/9572280/practical1"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 708, "favorite_count": 4, "accepted_answer_id": 52747608, "answer_count": 2, "score": 5, "last_activity_date": 1571246370, "creation_date": 1539198964, "last_edit_date": 1541021744, "question_id": 52747306, "link": "https://stackoverflow.com/questions/52747306/how-to-check-for-root-prvileges-from-the-user-in-ruby", "title": "How to check for root prvileges from the user in Ruby?", "body": "<p>I'm trying to write a program that requires root privileges, but whenever it runs it raises an permission error. Is there a better way to run programs as root without entering <code>sudo 'example_script.rb'</code> Also, is there a possibly a way to request `sudo' from inside a ruby script or to check to see if a user is running as sudo when using the program? Thanks!</p>\n"}, {"tags": ["ruby", "ruby-on-rails-5", "actionmailer", "mailchimp", "transactional-email"], "comments": [{"owner": {"reputation": 2701, "user_id": 1653333, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3ac34fc537b2e89308d5876e2d721a7?s=128&d=identicon&r=PG", "display_name": "Hernan Velasquez", "link": "https://stackoverflow.com/users/1653333/hernan-velasquez"}, "edited": false, "score": 0, "creation_date": 1539196629, "post_id": 52745262, "comment_id": 92418056, "body": "Are you able to see the content of your email in your development logs (or in your terminal if running rails server)?"}, {"owner": {"reputation": 724, "user_id": 5494897, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7cd2f409e842eb3572bc8ca0f33b68f3?s=128&d=identicon&r=PG", "display_name": "Bradley", "link": "https://stackoverflow.com/users/5494897/bradley"}, "reply_to_user": {"reputation": 2701, "user_id": 1653333, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3ac34fc537b2e89308d5876e2d721a7?s=128&d=identicon&r=PG", "display_name": "Hernan Velasquez", "link": "https://stackoverflow.com/users/1653333/hernan-velasquez"}, "edited": false, "score": 0, "creation_date": 1539251509, "post_id": 52745262, "comment_id": 92437413, "body": "No. The email content does not show up in the server. I&#39;m not sure the Post call is getting actioned."}], "owner": {"reputation": 724, "user_id": 5494897, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7cd2f409e842eb3572bc8ca0f33b68f3?s=128&d=identicon&r=PG", "display_name": "Bradley", "link": "https://stackoverflow.com/users/5494897/bradley"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 310, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1539190566, "creation_date": 1539190566, "question_id": 52745262, "link": "https://stackoverflow.com/questions/52745262/rails-5-2-actionmailer-mail-wont-send-cant-see-any-error-in-server", "title": "Rails 5.2 ActionMailer Mail won&#39;t send. Can&#39;t see any error in server", "body": "<p>Trying to send a volunteering form through SMTP using Gmail, Sendgrid or anything really however I have Action Mailer all set up and I presume I should really be seeing the email come through when I look at the email. I can see this error below but cannot see any error or receive any email at all. I've tried writing puts in my create action but I do not see those either so this is hopefully an easy fix as I'm missing something or have something not follow the usual Rails convention.</p>\n\n<p>I'm using rails 5.2 </p>\n\n<p>What I see in the server: </p>\n\n<pre><code>Started GET \"/volunteer?utf8=%E2%9C%93&amp;authenticity_token=AZ%2FAflVf%2BlqRUYm45Jo82wAMpq%2B%2BY%2F93piLbeRXdK5n%2FQIWhuaUL3Oe2%2FSwzR%2FCLvj%2FAKW%2BBgD8dPd8vJYRDBA%3D%3D&amp;volunteer_message%5Bname%5D=test+name&amp;volunteer_message%5Bemail%5D=email%40test.com&amp;volunteer_message%5Bphone_number%5D=88888888&amp;volunteer_message%5Bbody%5D=test+email&amp;commit=Send\" for 127.0.0.1 at 2018-10-10 17:29:42 +0100\n\nProcessing by PagesController#volunteer as HTML\n      Parameters: {\"utf8\"=&gt;\"\u2713\", \"authenticity_token\"=&gt;\"AZ/AflVf+lqRUYm45Jo82wAMpq++Y/93piLbeRXdK5n/QIWhuaUL3Oe2/SwzR/CLvj/AKW+BgD8dPd8vJYRDBA==\", \"volunteer_message\"=&gt;{\"name\"=&gt;\"test name\", \"email\"=&gt;\"email@test.com\", \"phone_number\"=&gt;\"88888888\", \"body\"=&gt;\"test email\"}, \"commit\"=&gt;\"Send\"}\n</code></pre>\n\n<p>Ok so here's my code and the way it's all layed out. </p>\n\n<p>PagesController.rb contains a page called volunteer and this contains the partial (Called _new.html.erb) which is the form which is in it's own folder called volunteer_messages</p>\n\n<p>views/volunteer_messages/_new.html.erb</p>\n\n<pre><code> &lt;%= simple_form_for @volunteer_message, url: create_volunteer_message_url do |f| %&gt;\n  &lt;%= @volunteer_message.errors.full_messages.join(', ') %&gt;\n\n  &lt;%= f.input :name, placeholder: 'name' %&gt;\n  &lt;%= f.input :email, placeholder: 'email' %&gt;\n  &lt;%= f.input :phone_number, placeholder: 'phone number' %&gt;\n  &lt;%= f.input :body, placeholder: 'body' %&gt;\n  &lt;%= f.submit 'Send' %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>routes created </p>\n\n<pre><code>   # is this causing a problem do you think? \n   get '/volunteer' =&gt; 'pages#volunteer'\n\n   # volunteer message routes\n   get '/volunteer', to: 'volunteer_message#new', as: 'new_volunteer_message'\n   post '/volunteer', to: 'volunteer_message#create', as: 'create_volunteer_message'\n</code></pre>\n\n<p>models/volunteer_message.rb</p>\n\n<pre><code>class VolunteerMessage\n    include ActiveModel::Model\n    attr_accessor :name, :email, :phone_number, :body\n#   validates :name, :email, :phone_number, :body, presence: true\nend\n</code></pre>\n\n<p>mailers/volunteer_message_mailer.rb</p>\n\n<pre><code>class VolunteerMessageMailer &lt; ApplicationMailer\n\n      # Subject can be set in your I18n file at config/locales/en.yml\n      # with the following lookup:\n      #\n      #   en.volunteer_message_mailer.volunteer.subject\n      #\n      def volunteer(volunteer_message)\n            @body = volunteer_message.body\n            @subject = \"Volunteer Request sent from www.myapp.com\"\n        mail to: \"myemail@example.com\", from: volunteer_message.email\n      end\n    end\n</code></pre>\n\n<p>volunteer_messages_controller.rb</p>\n\n<pre><code>class VolunteerMessagesController &lt; ApplicationController\n\n    def new\n    @volunteer_message = VolunteerMessage.new\n  end\n\n    def create\n    @volunteer_message = VolunteerMessage.new volunteer_message_params\n    if @volunteer_message.valid?\n      VolunteerMessageMailer.volunteer(@volunteer_message).deliver_now\n      redirect_to new_volunteer_message_url\n      flash.now[:notice] = \"We have received your volunteer request and will be in touch soon!\"\n    else\n      flash.now[:notice] = \"There was an error sending your volunteer request. Please try again.\"\n      render :new\n    end\n  end\n\n    private\n\n    def volunteer_message_params\n    params.require(:volunteer_message).permit(:name, :email, :phone_number, :body)\n  end\nend\n</code></pre>\n\n<p>pages_controller.rb</p>\n\n<pre><code>class PagesController &lt; ApplicationController\n  def volunteer\n    @lead = Lead.new\n    @volunteer_message = VolunteerMessage.new\n  end\nend\n</code></pre>\n\n<p>development.rb</p>\n\n<pre><code>  # Don't care if the mailer can't send.\n  config.action_mailer.raise_delivery_errors = true\n  config.action_mailer.perform_deliveries = true\n\n    config.action_mailer.default_url_options = { host: 'localhost', port: 3000 }\n\n\n    config.action_mailer.delivery_method = :smtp\n    config.action_mailer.smtp_settings = {\n            address: 'smtp.gmail.com',\n            port: 587,\n            domain: 'gmail.com',\n            enable_starttls_auto: true,\n            user_name: 'me@gmail.com',\n            password: 'gmailapppassword',\n            authentication: 'plain'\n    }\n</code></pre>\n\n<p>Not sure what else I can add here. I do not think I even need he stmp_settings to see action mailer actually show the template of the email being sent? </p>\n\n<p>Also I'm guessing it is somehting to do with the form and the route because ive added puts messages into the create action on the volunteer_message controller and do not see them in my server log. </p>\n\n<p>I'm not getting any errors when pressing submit. I do notice the params going into the url but that's it. it stays there and when refreshes stays on the same screen. </p>\n\n<p>example: </p>\n\n<pre><code>http://localhost:3000/volunteer?utf8=%E2%9C%93&amp;authenticity_token=AZ%2FAflVf%2BlqRUYm45Jo82wAMpq%2B%2BY%2F93piLbeRXdK5n%2FQIWhuaUL3Oe2%2FSwzR%2FCLvj%2FAKW%2BBgD8dPd8vJYRDBA%3D%3D&amp;volunteer_message%5Bname%5D=test+name&amp;volunteer_message%5Bemail%5D=email%40test.com&amp;volunteer_message%5Bphone_number%5D=88888888&amp;volunteer_message%5Bbody%5D=test+email&amp;commit=Send\n</code></pre>\n\n<p>Is the clue in the server text in the image that shows params going to the pages controller. I do not really want that. Just want the partial to be there but the action to work of the create action in the volunteer_messages controller. </p>\n\n<p>Any help be much appreciated. Thanks.</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1539195479, "post_id": 52745033, "comment_id": 92417534, "body": "What are you optimizing for? Reducing repetition? Shorter lines? Readability? Maintainability?"}, {"owner": {"reputation": 12440, "user_id": 688266, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/7987473923dcc33913003686350b33f6?s=128&d=identicon&r=PG", "display_name": "Kamilski81", "link": "https://stackoverflow.com/users/688266/kamilski81"}, "reply_to_user": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1549053180, "post_id": 52745033, "comment_id": 95780230, "body": "All of the above: shorter lines, reducing repetition, maintainability!"}], "answers": [{"comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1539196592, "post_id": 52745542, "comment_id": 92418038, "body": "That&#39;s certainly one way to tackle this problem, but it does seem like overkill. All that&#39;s needed here is a simple alias."}], "tags": [], "owner": {"reputation": 2496, "user_id": 3046905, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/692eb06201cbed91c3c6a9cf11ed0511?s=128&d=identicon&r=PG", "display_name": "Ilya Konyukhov", "link": "https://stackoverflow.com/users/3046905/ilya-konyukhov"}, "is_accepted": false, "score": 0, "last_activity_date": 1539191640, "creation_date": 1539191640, "answer_id": 52745542, "question_id": 52745033, "link": "https://stackoverflow.com/questions/52745033/how-can-i-avoid-typing-a-module-name-every-time-in-rspec/52745542#52745542", "title": "How can I avoid typing a module name every time in rspec?", "body": "<p>Just an idea. Instead of</p>\n\n<pre><code>RecipientMatcher::RecipientMatchFound\n</code></pre>\n\n<p>you could use</p>\n\n<pre><code>magic_resolver('RecipientMatchFound')\n</code></pre>\n\n<p>where it is defined as an RSpec-helper:</p>\n\n<pre><code>def magic_resolver(class_name)\n  \"RecipientMatcher::#{class_name}\".constantize\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3692, "user_id": 2102591, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/18ebe6ebe65a7aff45e6d09e96af9701?s=128&d=identicon&r=PG", "display_name": "Andrew Schwartz", "link": "https://stackoverflow.com/users/2102591/andrew-schwartz"}, "is_accepted": false, "score": 2, "last_activity_date": 1539192251, "last_edit_date": 1539192251, "creation_date": 1539191919, "answer_id": 52745620, "question_id": 52745033, "link": "https://stackoverflow.com/questions/52745033/how-can-i-avoid-typing-a-module-name-every-time-in-rspec/52745620#52745620", "title": "How can I avoid typing a module name every time in rspec?", "body": "<p>Perennially, I'd just say write it out. A little more typing but pretty easy reading.</p>\n\n<p>That said, here's what I'd suggest:</p>\n\n<p>Method 1: shorten it by assigning the module to a variable</p>\n\n<pre><code>rm = RecipientMatcher\nrm::RecipientMatchFound.new(...)\n...\n</code></pre>\n\n<p>or even further down to the individual nested classes</p>\n\n<pre><code>match_found = RecipientMatcher::RecipientNotFound\nmatch_obj = RecipientMatcher::MatchObject\n\nmatch_found.new(...)\n</code></pre>\n\n<hr>\n\n<p>Method 2: wrap your constructions in a helper method for each commonly used segment</p>\n\n<pre><code>def build_match(str)\n  RecipientMatcher::RecipientMatchFound.new(build(:group), RecipientMatcher::MatchObject.new(nil,str), ocr_text, ocr_text.match(/#{str}/))\nend\n\nrecipient_matches = [\n  build_match('Jim'),\n  build_match(...),\n  ...\n]\n</code></pre>\n\n<p>or in loops</p>\n\n<pre><code>recipient_matches = ['Jim', 'Baker &amp; Co', ...].map{|str| build_match(str)}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1905, "user_id": 232838, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8342950f34a66d9ec7cfe10b33d5494c?s=128&d=identicon&r=PG", "display_name": "koffeinfrei", "link": "https://stackoverflow.com/users/232838/koffeinfrei"}, "is_accepted": true, "score": 2, "last_activity_date": 1539192278, "last_edit_date": 1539192278, "creation_date": 1539191971, "answer_id": 52745632, "question_id": 52745033, "link": "https://stackoverflow.com/questions/52745033/how-can-i-avoid-typing-a-module-name-every-time-in-rspec/52745632#52745632", "title": "How can I avoid typing a module name every time in rspec?", "body": "<p>You can use RSpec's <a href=\"https://relishapp.com/rspec/rspec-core/docs/metadata/described-class\" rel=\"nofollow noreferrer\">described_class</a>, provided you supply the class as the argument to the main <code>describe</code> block, as follows:</p>\n\n<pre><code>RSpec.describe RecipientMatcher::RecipientMatchFound do\n  it 'whatever' do\n    described_class.new(...)\n  end\nend\n</code></pre>\n\n<p>Alternatively you may define a variable (or a <code>let</code> in RSpec) for the class, e.g. something like this:</p>\n\n<pre><code>let(:match_found) { RecipientMatcher::RecipientMatchFound }\nlet(:match_object) { RecipientMatcher::MatchObject }\n\nit 'whatever' do\n  match_found.new(build(:group), match_object.new(...))\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": false, "score": 1, "last_activity_date": 1539196883, "creation_date": 1539196883, "answer_id": 52746802, "question_id": 52745033, "link": "https://stackoverflow.com/questions/52745033/how-can-i-avoid-typing-a-module-name-every-time-in-rspec/52746802#52746802", "title": "How can I avoid typing a module name every time in rspec?", "body": "<p>You can always create an alias, it's really easy:</p>\n\n<pre><code>RecipientMatchFound = RecipientMatcher::RecipientMatchFound\nMatchObject = RecipientMatcher::MatchObject\n\nocr_text = 'Jim Baker &amp; Co'\nrecipient_matches = [\n  RecipientMatchFound.new(build(:group), MatchObject.new(nil,'Jim'), ocr_text, ocr_text.match(/Jim/)),\n  RecipientMatchFound.new(build(:group), MatchObject.new(nil, 'Jim Baker &amp; Co'), ocr_text, ocr_text.match(/Jim Baker &amp; Co/)),\n  RecipientMatchFound.new(build(:group), MatchObject.new(nil, 'Jim Baker'), ocr_text, ocr_text.match(/Jim Baker/)),\n]\n\nsection_meta_data = RecipientMatcher::PossibleRecipientsCalculator.determine_primary_recipients_in_section(recipient_matches)\nprimary_recipients = section_meta_data.primary_recipients\n\nexpect(true).to eq(true)\n</code></pre>\n\n<p>Though refactoring a bit more you can really boil this down by applying the tried-and-true method called <em>Don't Repeat Yourself</em> or DRY:</p>\n\n<pre><code>recipient_matches = [\n  'Jim',\n  'Jim Baker &amp; Co',\n  'Jim Baker'\n].map do |name|\n  RecipientMatchFound.new(\n    build(:group),\n    MatchObject.new(nil, name), ocr_text, ocr_text.match(name)\n  )\nend\n</code></pre>\n\n<p>Try and think about Ruby programs in terms of data transformation. You can often start with something simple, like this array of names, and build out exactly the structures you want step-by-step.</p>\n"}], "owner": {"reputation": 12440, "user_id": 688266, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/7987473923dcc33913003686350b33f6?s=128&d=identicon&r=PG", "display_name": "Kamilski81", "link": "https://stackoverflow.com/users/688266/kamilski81"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 89, "favorite_count": 0, "accepted_answer_id": 52745632, "answer_count": 4, "score": 0, "last_activity_date": 1539196883, "creation_date": 1539189579, "question_id": 52745033, "link": "https://stackoverflow.com/questions/52745033/how-can-i-avoid-typing-a-module-name-every-time-in-rspec", "title": "How can I avoid typing a module name every time in rspec?", "body": "<p>I am testing a class within my module 'RecipientMatcher'.</p>\n\n<p>It is very cumbersome to have to keep typing the prefaced name 'RecipientMatcher' in front of all of my classes.  I was wondering if there is a better way?</p>\n\n<p>Today's code:</p>\n\n<pre><code>ocr_text = 'Jim Baker &amp; Co'\nrecipient_matches = [\nRecipientMatcher::RecipientMatchFound.new(build(:group), RecipientMatcher::MatchObject.new(nil,'Jim'), ocr_text, ocr_text.match(/Jim/)),\nRecipientMatcher::RecipientMatchFound.new(build(:group), RecipientMatcher::MatchObject.new(nil, 'Jim Baker &amp; Co'), ocr_text, ocr_text.match(/Jim Baker &amp; Co/)),\nRecipientMatcher::RecipientMatchFound.new(build(:group), RecipientMatcher::MatchObject.new(nil, 'Jim Baker'), ocr_text, ocr_text.match(/Jim Baker/)),\n]\n\nsection_meta_data = RecipientMatcher::PossibleRecipientsCalculator.determine_primary_recipients_in_section(recipient_matches)\nprimary_recipients = section_meta_data.primary_recipients\n\nexpect(true).to eq(true)\n</code></pre>\n\n<p>It would be ideal if I could just write this:</p>\n\n<pre><code>RecipientMatcher.magic_method do\n    ocr_text = 'Jim Baker &amp; Co'\n    recipient_matches = [\n    ::RecipientMatchFound.new(build(:group), ::MatchObject.new(nil,'Jim'), ocr_text, ocr_text.match(/Jim/)),\n    ::RecipientMatchFound.new(build(:group), ::MatchObject.new(nil, 'Jim Baker &amp; Co'), ocr_text, ocr_text.match(/Jim Baker &amp; Co/)),\n    ::RecipientMatchFound.new(build(:group), ::MatchObject.new(nil, 'Jim Baker'), ocr_text, ocr_text.match(/Jim Baker/)),\n    ]\n\n    section_meta_data = ::PossibleRecipientsCalculator.determine_primary_recipients_in_section(recipient_matches)\n    primary_recipients = section_meta_data.primary_recipients\n\n    expect(true).to eq(true)\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "routes"], "comments": [{"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1539308531, "post_id": 52744960, "comment_id": 92464428, "body": "This question does not make sense - you do realize that sinatra is a completely different framework?"}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 10398813, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e74abf3c2d8d9b3be14a42c66734ae03?s=128&d=identicon&r=PG&f=1", "display_name": "Jay", "link": "https://stackoverflow.com/users/10398813/jay"}, "edited": false, "score": 0, "creation_date": 1539190458, "post_id": 52745202, "comment_id": 92415129, "body": "The controller would be muffins_controlller.rb"}, {"owner": {"reputation": 2034, "user_id": 9897223, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/O1Nan.png?s=128&g=1", "display_name": "Sumanth Madishetty", "link": "https://stackoverflow.com/users/9897223/sumanth-madishetty"}, "reply_to_user": {"reputation": 13, "user_id": 10398813, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e74abf3c2d8d9b3be14a42c66734ae03?s=128&d=identicon&r=PG&f=1", "display_name": "Jay", "link": "https://stackoverflow.com/users/10398813/jay"}, "edited": false, "score": 0, "creation_date": 1539190616, "post_id": 52745202, "comment_id": 92415216, "body": "then you need to specify like   resources :muffins, only: %i(index)"}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1539200660, "post_id": 52745202, "comment_id": 92419885, "body": "its <code>resources :resource_name(plural)</code>. The controller name is inferred."}], "tags": [], "owner": {"reputation": 2034, "user_id": 9897223, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/O1Nan.png?s=128&g=1", "display_name": "Sumanth Madishetty", "link": "https://stackoverflow.com/users/9897223/sumanth-madishetty"}, "is_accepted": false, "score": 0, "last_activity_date": 1539190662, "last_edit_date": 1539190662, "creation_date": 1539190337, "answer_id": 52745202, "question_id": 52744960, "link": "https://stackoverflow.com/questions/52744960/ruby-on-rails-routes-trouble-for-deployment/52745202#52745202", "title": "Ruby on Rails routes trouble for deployment", "body": "<p>In order to have routes for only index action for various controllers you need to specify as below:</p>\n\n<pre><code>resources :controller_name, only: %i(index)\n  or\nresources :controller_name, only: [:index]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 6942, "user_id": 4172515, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/BYWxd.jpg?s=128&g=1", "display_name": "fool-dev", "link": "https://stackoverflow.com/users/4172515/fool-dev"}, "is_accepted": false, "score": 0, "last_activity_date": 1539191861, "last_edit_date": 1539191861, "creation_date": 1539190623, "answer_id": 52745277, "question_id": 52744960, "link": "https://stackoverflow.com/questions/52744960/ruby-on-rails-routes-trouble-for-deployment/52745277#52745277", "title": "Ruby on Rails routes trouble for deployment", "body": "<p>It would be </p>\n\n<pre><code>resources :cookies, only: [:index]\nresources :cakes, only: [:index]\nresources :muffins, only: [:index]\n ..... \n</code></pre>\n\n<p>Check out the official guide for clear concept <a href=\"https://guides.rubyonrails.org/routing.html#shallow-nesting\" rel=\"nofollow noreferrer\">guides.rubyonrails.org/routing</a></p>\n"}], "owner": {"reputation": 13, "user_id": 10398813, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e74abf3c2d8d9b3be14a42c66734ae03?s=128&d=identicon&r=PG&f=1", "display_name": "Jay", "link": "https://stackoverflow.com/users/10398813/jay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 27, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1539191861, "creation_date": 1539189306, "question_id": 52744960, "link": "https://stackoverflow.com/questions/52744960/ruby-on-rails-routes-trouble-for-deployment", "title": "Ruby on Rails routes trouble for deployment", "body": "<p>I tried running this program in Sinatra, but Heroku wouldn't let me work with it.  It deployed successfully but it would not run in Heroku so I decided to start this program in rails.</p>\n\n<pre><code>Rails.application.routes.draw do\n  root 'pages#index'\n  # get 'cookies#index'\n  # get 'cakes#index'\n  # get 'cookies#index'\n  # get 'crumbcakes#index'\n  # get 'cupcakes#index'\n  # get 'events#index'\n  # get 'muffins#index'\n  # get 'pastries#index'\n\n  resources :index\n  # resources :about\n  # resources :cakes\n  # resources :cookies\n  # resources :crumbcakes\n  # resources :cupcakes\n  # resources :events\n  # resources :muffins\n  # resources :pastries\nend\n</code></pre>\n\n<p>I have this as the routes in Rails, but I commented them out because it would only work on the index page.  I have index on the controllers and views for each one.  Only an index.  I do not know if I did not put the routes in the correct format.  Let me know if you could help me thanks!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "sorcery"], "comments": [{"owner": {"reputation": 5237, "user_id": 2325924, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/XSXrT.jpg?s=128&g=1", "display_name": "7urkm3n", "link": "https://stackoverflow.com/users/2325924/7urkm3n"}, "edited": false, "score": 0, "creation_date": 1539194503, "post_id": 52744595, "comment_id": 92417065, "body": "<code>User.where(guest: false) </code> will return array and you cant authenticate it."}, {"owner": {"reputation": 119, "user_id": 7738138, "user_type": "registered", "accept_rate": 55, "profile_image": "https://graph.facebook.com/1728017913892004/picture?type=large", "display_name": "JiaPing", "link": "https://stackoverflow.com/users/7738138/jiaping"}, "reply_to_user": {"reputation": 5237, "user_id": 2325924, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/XSXrT.jpg?s=128&g=1", "display_name": "7urkm3n", "link": "https://stackoverflow.com/users/2325924/7urkm3n"}, "edited": false, "score": 0, "creation_date": 1539307045, "post_id": 52744595, "comment_id": 92464147, "body": "I know. But I want to know if there are some ways to override gem sorcery&#39;s login method that can scope where(guest: false) directly. Finally, I use STI association to separate guest and member user&#39;s model."}], "answers": [{"tags": [], "owner": {"reputation": 5237, "user_id": 2325924, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/XSXrT.jpg?s=128&g=1", "display_name": "7urkm3n", "link": "https://stackoverflow.com/users/2325924/7urkm3n"}, "is_accepted": true, "score": 1, "last_activity_date": 1539195406, "creation_date": 1539195406, "answer_id": 52746467, "question_id": 52744595, "link": "https://stackoverflow.com/questions/52744595/ruby-on-rails-sorcery-override-login-method/52746467#52746467", "title": "Ruby on Rails - Sorcery override login method", "body": "<pre><code>  # find specific user and check guest or not\n  user = User.find_by_email(email)\n  if user &amp;&amp; user.guest == false\n     User.authenticate(email, password)\n  end\n</code></pre>\n"}], "owner": {"reputation": 119, "user_id": 7738138, "user_type": "registered", "accept_rate": 55, "profile_image": "https://graph.facebook.com/1728017913892004/picture?type=large", "display_name": "JiaPing", "link": "https://stackoverflow.com/users/7738138/jiaping"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 219, "favorite_count": 0, "accepted_answer_id": 52746467, "answer_count": 1, "score": 0, "last_activity_date": 1539195406, "creation_date": 1539187941, "question_id": 52744595, "link": "https://stackoverflow.com/questions/52744595/ruby-on-rails-sorcery-override-login-method", "title": "Ruby on Rails - Sorcery override login method", "body": "<p>I have a user table with guest column(boolean) to distinguish user's identity.\nI don't want user with guest? => true able to login. \nIs it possible to override Sorcery's login method?</p>\n\n<p>I want it work like\n<code>\nUser.where(guest: false).authenticate(email, password)\n</code></p>\n\n<p>Another way I'm thinking is to separate User and GuestUser using polymorphic association.\nHowever, I don't really want to create GuestUser with same columns as User.</p>\n\n<p>Please give me some suggestions.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "visual-studio-code", "text-editor"], "comments": [{"owner": {"reputation": 2251, "user_id": 9785060, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IUduC.png?s=128&g=1", "display_name": "Viktor", "link": "https://stackoverflow.com/users/9785060/viktor"}, "edited": false, "score": 2, "creation_date": 1539187447, "post_id": 52744079, "comment_id": 92413364, "body": "Have you installed the rails gem ?"}], "answers": [{"tags": [], "owner": {"reputation": 1686, "user_id": 7264341, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Oz5dfb6ASr8/AAAAAAAAAAI/AAAAAAAAAC8/33rQJBMPZZI/photo.jpg?sz=128", "display_name": "Javier Men&#233;ndez Rizo", "link": "https://stackoverflow.com/users/7264341/javier-men%c3%a9ndez-rizo"}, "is_accepted": false, "score": 3, "last_activity_date": 1539191347, "creation_date": 1539191347, "answer_id": 52745475, "question_id": 52744079, "link": "https://stackoverflow.com/questions/52744079/error-while-running-ruby-server-on-text-editor/52745475#52745475", "title": "Error while running ruby server on text editor", "body": "<p>On a new ruby on rails project run this to install your dependencies</p>\n\n<pre><code>gem install bundler\nbundle install\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 7540538, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2bde37eefd8c6fcc0bc59921e6e47af?s=128&d=identicon&r=PG&f=1", "display_name": "Chinedu Williams Adibe", "link": "https://stackoverflow.com/users/7540538/chinedu-williams-adibe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1539191347, "creation_date": 1539186260, "question_id": 52744079, "link": "https://stackoverflow.com/questions/52744079/error-while-running-ruby-server-on-text-editor", "title": "Error while running ruby server on text editor", "body": "<p>I am new to ruby on rail i have installed ruby on my system globally  ruby -v command is working fine on my CMD but when i run it from other command prompt it give me not found error now i tried running it on my visual Code terminal and it is saying </p>\n\n<pre><code>\"rails : The term 'rails' is not recognized as the name of a cmdlet, function, script file, or operable program. Check the spelling of the name, or if a path was included, verify\nthat the path is correct and try again.\"\n</code></pre>\n\n<p>i need help with this please anyone </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ngrok"], "answers": [{"tags": [], "owner": {"reputation": 323, "user_id": 9926423, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b7da8be774571b983ae54e271b0c76b?s=128&d=identicon&r=PG&f=1", "display_name": "Rickchip", "link": "https://stackoverflow.com/users/9926423/rickchip"}, "is_accepted": true, "score": 2, "last_activity_date": 1539192043, "creation_date": 1539192043, "answer_id": 52745655, "question_id": 52744044, "link": "https://stackoverflow.com/questions/52744044/how-do-i-fix-ngrok-permission-denied/52745655#52745655", "title": "How do I fix ngrok permission denied?", "body": "<p>I fixed this by moving the ngrok exe to the <code>/usr/local/bin</code> folder.</p>\n"}, {"tags": [], "owner": {"reputation": 351, "user_id": 4188418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c55e882e3496d979f5e1d012d82633e?s=128&d=identicon&r=PG&f=1", "display_name": "emma", "link": "https://stackoverflow.com/users/4188418/emma"}, "is_accepted": false, "score": 2, "last_activity_date": 1580334634, "creation_date": 1580334634, "answer_id": 59976118, "question_id": 52744044, "link": "https://stackoverflow.com/questions/52744044/how-do-i-fix-ngrok-permission-denied/59976118#59976118", "title": "How do I fix ngrok permission denied?", "body": "<p>I was getting the <code>Permission denied</code> error message because I was running the command from a folder that only had a shortcut to ngrok instead of the actual executable.  Silly mistake, but figured I would post in case anyone else does the same thing.</p>\n"}, {"tags": [], "owner": {"reputation": 31, "user_id": 4781051, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mfigo.jpg?s=128&g=1", "display_name": "Raul F. de Melo", "link": "https://stackoverflow.com/users/4781051/raul-f-de-melo"}, "is_accepted": false, "score": 0, "last_activity_date": 1584274497, "creation_date": 1584274497, "answer_id": 60692748, "question_id": 52744044, "link": "https://stackoverflow.com/questions/52744044/how-do-i-fix-ngrok-permission-denied/60692748#60692748", "title": "How do I fix ngrok permission denied?", "body": "<p>I solved making it executable via <code>chmod -x ngrok</code></p>\n"}], "owner": {"reputation": 323, "user_id": 9926423, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b7da8be774571b983ae54e271b0c76b?s=128&d=identicon&r=PG&f=1", "display_name": "Rickchip", "link": "https://stackoverflow.com/users/9926423/rickchip"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 10145, "favorite_count": 0, "accepted_answer_id": 52745655, "answer_count": 3, "score": 3, "last_activity_date": 1584274497, "creation_date": 1539186156, "question_id": 52744044, "link": "https://stackoverflow.com/questions/52744044/how-do-i-fix-ngrok-permission-denied", "title": "How do I fix ngrok permission denied?", "body": "<p>I've installed ngrok and created an alias in my user folder. When I run the following command</p>\n\n<pre><code>./ngrok authtoken tokenhere\n</code></pre>\n\n<p>I get</p>\n\n<pre><code>./ngrok: Permission denied\n</code></pre>\n\n<p>Is there somewhere I need to set permissions?</p>\n"}, {"tags": ["ruby", "logstash"], "comments": [{"owner": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 0, "creation_date": 1539186275, "post_id": 52743944, "comment_id": 92412680, "body": "What is <code>event</code>? What is being shoved into logstash? How do you know, or why do you think, that it&#39;s an issue with the <code>files</code> value? If you explicitly set <code>files</code> to something like <code>[1, 2, 3]</code> does the error go away?"}, {"owner": {"reputation": 12085, "user_id": 632688, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b6c6e4e8117bbd27fd25e9e2ea350458?s=128&d=identicon&r=PG", "display_name": "Wizard of Ogz", "link": "https://stackoverflow.com/users/632688/wizard-of-ogz"}, "edited": false, "score": 0, "creation_date": 1539188433, "post_id": 52743944, "comment_id": 92413925, "body": "<code>no implicit conversion of String into Integer</code> happens when you try to use the subscript operator (square brackets) on an Array (or Integer) and pass a string as an argument. It is likely that in <code>a.map { |e| e[&quot;MD5&quot;] }</code> there are cases where <code>e</code> is not a Hash like you expect. I can&#39;t see how that would happen with the info you have provided."}, {"owner": {"reputation": 162, "user_id": 5786261, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ae2b0793b0cd60e81cf334174a37d84?s=128&d=identicon&r=PG&f=1", "display_name": "creed", "link": "https://stackoverflow.com/users/5786261/creed"}, "edited": false, "score": 0, "creation_date": 1539249326, "post_id": 52743944, "comment_id": 92435987, "body": "I believe that the problem is with   &quot;files&quot;: {       &quot;MD5&quot;: &quot;BF61205C5E493491FB43543545396EF0&quot;,       &quot;SHA256&quot;: &quot;781E65DAF30170A13054A3AE785A8604EC61910B9B17349B7DBE8F0C6A3&zwnj;&#8203;D8B24&quot;,       &quot;SHA1&quot;: &quot;DB33A474F739EAD56B1BBABD4D4EEA6BF9C62B5E&quot;     } that does not have more than one occurence. But I do not understand why is that happening. The event I believe it means in this context read the json element."}], "owner": {"reputation": 162, "user_id": 5786261, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ae2b0793b0cd60e81cf334174a37d84?s=128&d=identicon&r=PG&f=1", "display_name": "creed", "link": "https://stackoverflow.com/users/5786261/creed"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 920, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1539185853, "creation_date": 1539185853, "question_id": 52743944, "link": "https://stackoverflow.com/questions/52743944/ruby-exception-occurred-no-implicit-conversion-of-string-into-integer-in-logsta", "title": "Ruby exception occurred: no implicit conversion of String into Integer in Logstash ruby filter", "body": "<p>I am getting the Logstash errors:</p>\n\n<pre><code>[2018-10-10T17:24:11,048][ERROR][logstash.filters.ruby    ] Ruby exception occurred: no implicit conversion of String into Integer\n[2018-10-10T17:24:11,049][ERROR][logstash.filters.ruby    ] Ruby exception occurred: no implicit conversion of String into Integer\n[2018-10-10T17:24:11,047][ERROR][logstash.filters.ruby    ] Ruby exception occurred: no implicit conversion of String into Integer\n</code></pre>\n\n<p>My input:</p>\n\n<pre><code>\"files\": [{\n        \"SHA256\": \"1213447D713ECA24484983E754474D9D2F4A283D77DDBD9C8084CD7AA0574ACF\",\n        \"MD5\": \"7D332F11DD7389C8121AA523F07CFEEC\",\n        \"SHA1\": \"6026B28C6049115272138AD357A5AF67B99354A5\"\n    }, {\n        \"SHA256\": \"1213447D713ECA24484983E754474D9D2F4A283D77DDBD9C8084CD7AA0574ACF\",\n        \"MD5\": \"7D332F11DD7389C8121AA523F07CFEEC\",\n        \"SHA1\": \"6026B28C6049115272138AD357A5AF67B99354A5\"\n    }, {\n        \"SHA256\": \"1212447D713ECA24484983E754474D9D2F4A283D77DDBD9C8084CD7AA0574ACF\",\n        \"MD5\": \"7D332F11DD7389C8121AA523F07CFEEC\",\n        \"SHA1\": \"6026B28C6049115272138AD357A5AF67B99354A5\"\n    }\n]\n</code></pre>\n\n<p>My code: </p>\n\n<pre><code>a = event.get(\"files\"); event.set(\"files_md5\", a.map { |e| e[\"MD5\"]\n</code></pre>\n\n<p>The code is doing a transformation of the input above to:</p>\n\n<pre><code>\"files\":[\"7D332F11DD7389C8121AA523F07CFEEC\",\"7D332F11DD7389C8121AA523F07CFEEC\",\"7D332F11DD7389C8121AA523F07CFEEC\"]\n</code></pre>\n\n<p>No data is being dropped because of those errors, however, I would like not to have them. \nI have tried:</p>\n\n<pre><code>a = event.get(\"files\"); event.set(\"files_md5\", a.map { |e| e[\"MD5\"].to_i \n</code></pre>\n\n<p>Is there a way to do the implicit conversion correctly in this case?\nHelp greatly appreciated.</p>\n"}, {"tags": ["ruby", "nokogiri"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1572236826, "post_id": 52743781, "comment_id": 103485384, "body": "Please see &quot;<a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>&quot; and the linked pages and &quot;<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">mcve</a>. What is the desired output?"}], "answers": [{"tags": [], "owner": {"reputation": 2492, "user_id": 5085788, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bWlXI.jpg?s=128&g=1", "display_name": "luisenrike", "link": "https://stackoverflow.com/users/5085788/luisenrike"}, "is_accepted": false, "score": 0, "last_activity_date": 1539186324, "creation_date": 1539186324, "answer_id": 52744099, "question_id": 52743781, "link": "https://stackoverflow.com/questions/52743781/find-end-replace-content-in-all-tags/52744099#52744099", "title": "Find end replace content in all tags", "body": "<p>Do <code>each</code> instead of <code>first</code>:</p>\n\n<pre><code>doc.search(node).each do |n|\n  n.content = content\nend\n</code></pre>\n"}], "owner": {"reputation": 7004, "user_id": 1103606, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/0d93cc650b93939ea91066fcb5aefae0?s=128&d=identicon&r=PG", "display_name": "Peter Penzov", "link": "https://stackoverflow.com/users/1103606/peter-penzov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 36, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1539186324, "creation_date": 1539185385, "question_id": 52743781, "link": "https://stackoverflow.com/questions/52743781/find-end-replace-content-in-all-tags", "title": "Find end replace content in all tags", "body": "<p>I want to find and replace all nodes in XML files. I tried this:</p>\n\n<pre><code>def modify_xml_content(request_body, node, content)\n    doc = Nokogiri::XML(request_body)\n    node = doc.search(node).first\n    node.content = content\n    puts \"Modifying #{node}\"\n    doc.to_xml\n  rescue\n    request_body\n  end\n</code></pre>\n\n<p><strong><em>Example XML</em></strong></p>\n\n<pre><code>&lt;billing_address&gt;\n    &lt;first_name&gt;Max&lt;/first_name&gt;\n    &lt;last_name&gt;Mustermann&lt;/last_name&gt;\n    &lt;address1&gt;Muster Str. 12&lt;/address1&gt;\n    &lt;zip_code&gt;10178&lt;/zip_code&gt;\n    &lt;city&gt;New York&lt;/city&gt;\n    &lt;state&gt;WA&lt;/state&gt;\n    &lt;country&gt;US&lt;/country&gt;\n  &lt;/billing_address&gt;\n  &lt;shipping_address&gt;\n    &lt;first_name&gt;Max&lt;/first_name&gt;\n    &lt;last_name&gt;Mustermann&lt;/last_name&gt;\n    &lt;address1&gt;Muster Str. 12&lt;/address1&gt;\n    &lt;zip_code&gt;10178&lt;/zip_code&gt;\n    &lt;city&gt;New York&lt;/city&gt;\n    &lt;state&gt;WA&lt;/state&gt;\n    &lt;country&gt;US&lt;/country&gt;\n  &lt;/shipping_address&gt;\n</code></pre>\n\n<p>How I can find and replace all content in tags  for example not only the first found matching tag?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 2496, "user_id": 3046905, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/692eb06201cbed91c3c6a9cf11ed0511?s=128&d=identicon&r=PG", "display_name": "Ilya Konyukhov", "link": "https://stackoverflow.com/users/3046905/ilya-konyukhov"}, "edited": false, "score": 0, "creation_date": 1539185160, "post_id": 52743519, "comment_id": 92412009, "body": "I wonder why you submit your form to <code>url: permissions_path</code>, ie by sending POST/PUT request to <code>index</code> method? Why not using standard <code>create &#47; update</code>?"}, {"owner": {"reputation": 2496, "user_id": 3046905, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/692eb06201cbed91c3c6a9cf11ed0511?s=128&d=identicon&r=PG", "display_name": "Ilya Konyukhov", "link": "https://stackoverflow.com/users/3046905/ilya-konyukhov"}, "edited": false, "score": 0, "creation_date": 1539185319, "post_id": 52743519, "comment_id": 92412100, "body": "Instead of <code>permissionscontroller.rb</code> you probably mean <code>permissions_controller.rb</code> ?"}, {"owner": {"reputation": 995, "user_id": 3233927, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/9f21d807f80f42e9a5c1832d48842ed7?s=128&d=identicon&r=PG&f=1", "display_name": "Rebirth", "link": "https://stackoverflow.com/users/3233927/rebirth"}, "reply_to_user": {"reputation": 2496, "user_id": 3046905, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/692eb06201cbed91c3c6a9cf11ed0511?s=128&d=identicon&r=PG", "display_name": "Ilya Konyukhov", "link": "https://stackoverflow.com/users/3046905/ilya-konyukhov"}, "edited": false, "score": 0, "creation_date": 1539185436, "post_id": 52743519, "comment_id": 92412169, "body": "My bad, typo on my part, the file is named correctly as permissions_controller.rb. as of the extra url, you&#39;re right it is unnecessary, the form helper should handle it correctly on it&#39;s own"}, {"owner": {"reputation": 2496, "user_id": 3046905, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/692eb06201cbed91c3c6a9cf11ed0511?s=128&d=identicon&r=PG", "display_name": "Ilya Konyukhov", "link": "https://stackoverflow.com/users/3046905/ilya-konyukhov"}, "edited": false, "score": 0, "creation_date": 1539185561, "post_id": 52743519, "comment_id": 92412231, "body": "I just had an idea that in case of failed form validation you might call rendering <code>new.haml</code> template from <code>index</code> action, where <code>@permission</code> is not set"}, {"owner": {"reputation": 995, "user_id": 3233927, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/9f21d807f80f42e9a5c1832d48842ed7?s=128&d=identicon&r=PG&f=1", "display_name": "Rebirth", "link": "https://stackoverflow.com/users/3233927/rebirth"}, "reply_to_user": {"reputation": 2496, "user_id": 3046905, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/692eb06201cbed91c3c6a9cf11ed0511?s=128&d=identicon&r=PG", "display_name": "Ilya Konyukhov", "link": "https://stackoverflow.com/users/3046905/ilya-konyukhov"}, "edited": false, "score": 0, "creation_date": 1539185726, "post_id": 52743519, "comment_id": 92412328, "body": "even if I set <code>@permission = Permission.new</code> in <code>index</code> the problem keeps occurring. So I&#39;m guessing that&#39;s not the reason."}], "answers": [{"comments": [{"owner": {"reputation": 995, "user_id": 3233927, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/9f21d807f80f42e9a5c1832d48842ed7?s=128&d=identicon&r=PG&f=1", "display_name": "Rebirth", "link": "https://stackoverflow.com/users/3233927/rebirth"}, "edited": false, "score": 0, "creation_date": 1539188791, "post_id": 52744730, "comment_id": 92414123, "body": "I&#39;m aware that it would work like that, but as you said it is not recommended and it also won&#39;t properly populate the fields again if the resource cannot be saved. Also I have updated my question, I&#39;m fairly certain something weird is happening under the hood."}, {"owner": {"reputation": 1918, "user_id": 9224452, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb0f303869bf090269cbcc46cef14991?s=128&d=identicon&r=PG&f=1", "display_name": "John Baker", "link": "https://stackoverflow.com/users/9224452/john-baker"}, "reply_to_user": {"reputation": 995, "user_id": 3233927, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/9f21d807f80f42e9a5c1832d48842ed7?s=128&d=identicon&r=PG&f=1", "display_name": "Rebirth", "link": "https://stackoverflow.com/users/3233927/rebirth"}, "edited": false, "score": 0, "creation_date": 1539189268, "post_id": 52744730, "comment_id": 92414401, "body": "is the form being rendered by the <code>new</code> action of <code>PermissionsController</code>, can you confirm that?"}, {"owner": {"reputation": 995, "user_id": 3233927, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/9f21d807f80f42e9a5c1832d48842ed7?s=128&d=identicon&r=PG&f=1", "display_name": "Rebirth", "link": "https://stackoverflow.com/users/3233927/rebirth"}, "edited": false, "score": 0, "creation_date": 1539189485, "post_id": 52744730, "comment_id": 92414549, "body": "Affirmative, the form is rendered by the <code>new</code> action. I have kinda solved my problem, but this leaves me with greater questions of why a <code>Set</code> works in weird ways towards the framework architecture"}], "tags": [], "owner": {"reputation": 1918, "user_id": 9224452, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb0f303869bf090269cbcc46cef14991?s=128&d=identicon&r=PG&f=1", "display_name": "John Baker", "link": "https://stackoverflow.com/users/9224452/john-baker"}, "is_accepted": false, "score": 0, "last_activity_date": 1539188399, "creation_date": 1539188399, "answer_id": 52744730, "question_id": 52743519, "link": "https://stackoverflow.com/questions/52743519/first-argument-in-form-cannot-contain-nil-or-be-empty-while-it-should-not-be-nil/52744730#52744730", "title": "First argument in form cannot contain nil or be empty while it should not be nil or empty", "body": "<p>One way that it would work but is <strong>not recommended</strong> would be to initialize a <code>Permission</code> instance inside the form: </p>\n\n<pre><code>&lt;%= form_for Permission.new do |f| %&gt;\n</code></pre>\n\n<p>Check if the view containing your form is actually being rendered by the <code>new</code> action of your <code>PermissionsController</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 995, "user_id": 3233927, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/9f21d807f80f42e9a5c1832d48842ed7?s=128&d=identicon&r=PG&f=1", "display_name": "Rebirth", "link": "https://stackoverflow.com/users/3233927/rebirth"}, "is_accepted": true, "score": 0, "last_activity_date": 1539191639, "creation_date": 1539191639, "answer_id": 52745540, "question_id": 52743519, "link": "https://stackoverflow.com/questions/52743519/first-argument-in-form-cannot-contain-nil-or-be-empty-while-it-should-not-be-nil/52745540#52745540", "title": "First argument in form cannot contain nil or be empty while it should not be nil or empty", "body": "<p>I think I have figured it out.</p>\n\n<p>What I noticed is that in <code>modules.rb</code> I'm loading the actions inside a controller through <code>controller.action_methods</code>. after this I'm deleting the <code>new</code> and <code>edit</code> actions.</p>\n\n<p>I was under the assumption that I was simply receiving a set of strings containing the action names instead of the actual actions. So it seems logical that if I delete the <code>new</code> and <code>edit</code> actions that my views would default to the <code>new</code> and <code>edit</code> actions in ActionController::Base. Which would mean that @permission is not set and the view throws a well deserved error.</p>\n\n<p>I'm assuming that doing this removes these actions in runtime for the controller. which means that it would of course work again after I restart the server.</p>\n\n<p>So I fixed my issue by doing <code>controller.action_methods.to_a</code> which forces decoupling of the actual actions in the controller. After this I'm free to delete strings in this array that I don't require.</p>\n\n<p>Moral of the story: Watch out with <code>controller.action_methods</code>?</p>\n"}], "owner": {"reputation": 995, "user_id": 3233927, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/9f21d807f80f42e9a5c1832d48842ed7?s=128&d=identicon&r=PG&f=1", "display_name": "Rebirth", "link": "https://stackoverflow.com/users/3233927/rebirth"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "accepted_answer_id": 52745540, "answer_count": 2, "score": -1, "last_activity_date": 1539191639, "creation_date": 1539184557, "last_edit_date": 1539191114, "question_id": 52743519, "link": "https://stackoverflow.com/questions/52743519/first-argument-in-form-cannot-contain-nil-or-be-empty-while-it-should-not-be-nil", "title": "First argument in form cannot contain nil or be empty while it should not be nil or empty", "body": "<p>I'm having this issue where the 'new' and sometimes 'edit' actions of my controllers will throw: </p>\n\n<p><code>First argument in form cannot contain nil or be empty</code> </p>\n\n<p>While I'm 100% certain that the first argument is not nil nor empty. To hone down on this I'll only ask about the 'new' action since the resource is simply set to <code>Resource.new</code></p>\n\n<p>permissions/new.haml</p>\n\n<pre><code>= form_for @permission do |f|\n  = f.label :name, class: 'form-control-label'\n  = f.text_field :name, class: 'form-control'\n</code></pre>\n\n<p>permissions_controller.rb</p>\n\n<pre><code>class PermissionsController &lt; ApplicationController\n  before_action :set_permission, only: [:show, :edit, :update, :destroy]\n\n  def new\n    @permission = Permission.new\n  end\n\n  def show\n    @modules = Modules.all\n  end\n\n  def index\n    // handling content with api calls instead\n  end\n\n  ...\nend\n</code></pre>\n\n<p>I have had this issue for a long time but I never figured out to successfully reproduce it in my development environment, until now.</p>\n\n<p>I can reproduce this issue by going to the 'show' action of the same controller, then going back to the 'index' action and then going to the 'new' action. At this point the 'new' page does not work anymore until I edit the controller file or restart the server.</p>\n\n<p>After changing the controller (adding a space at the end) or restarting the server it suddenly works again. </p>\n\n<p>This is not the only resource this happens to. Often other resources like User have the same issue. I've had multiple projects that had the same issue that somehow disappeared so I never bothered to investigate more on this. </p>\n\n<p>Ruby version: 2.3.5p376</p>\n\n<p>Rails version: 5.1.4</p>\n\n<p>edit:</p>\n\n<p>I have noticed that I can't reproduce it anymore if I comment out <code>Modules.all</code>.</p>\n\n<p>modules is not a activerecord class, it is a helper class for me to read out the different files in my directories, might this reading out give problems?</p>\n\n<p>modules.rb</p>\n\n<pre><code>class Modules\n  def self.all\n    controllers = Dir.glob(\"#{Rails.root}/app/controllers/**/*.rb\").\n      map{ |e|\n        if e.include?('/api/')\n          e.match(/api\\/[^\\/]*\\/[^\\/]*.rb/)[0].gsub('.rb', '').gsub('/', '::_').camelcase\n        else\n          e.match(/[^\\/]*.rb/)[0].gsub('.rb', '').camelcase\n        end\n      }\n    modules = {}\n    controllers.each do |e|\n      c = Object.const_get e\n      modules[e.gsub(':','').gsub('Controller', '').underscore] = get_actions_for c if\n        !no_permission_needed_for e and c.action_methods.size &gt; 0\n    end\n\n    return modules\n  end\n\n  def self.get_actions_for(controller)\n    actions = controller.action_methods\n    grouped_actions.each do |key, value|\n      actions.delete(key)\n    end\n\n    return actions\n  end\n\n  def self.grouped_actions\n    {\"new\" =&gt; \"create\", \"edit\" =&gt; \"update\"}\n  end\n\nend\n</code></pre>\n\n<p>edit:</p>\n\n<p>What I have noticed is that I'm trying to call <code>actions.delete(key)</code> where actions is a <code>Set</code> of strings where <code>key</code> is a <code>String</code></p>\n\n<p>When I do <code>actions = controller.action_methods.to_a</code> and force the set to an array my issue seems to go away. At least I can't reproduce it anymore. Now I'm wondering if there is something fundamentally going wrong in ruby where deleting something from a <code>Set</code> does weird stuff under the hood.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 2496, "user_id": 3046905, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/692eb06201cbed91c3c6a9cf11ed0511?s=128&d=identicon&r=PG", "display_name": "Ilya Konyukhov", "link": "https://stackoverflow.com/users/3046905/ilya-konyukhov"}, "edited": false, "score": 0, "creation_date": 1539184885, "post_id": 52743406, "comment_id": 92411819, "body": "I guess you also missed closing <code>&lt;% end %&gt;</code> for your <code>each</code> block"}, {"owner": {"reputation": 51, "user_id": 10192738, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EBCq0.jpg?s=128&g=1", "display_name": "Kaido", "link": "https://stackoverflow.com/users/10192738/kaido"}, "reply_to_user": {"reputation": 2496, "user_id": 3046905, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/692eb06201cbed91c3c6a9cf11ed0511?s=128&d=identicon&r=PG", "display_name": "Ilya Konyukhov", "link": "https://stackoverflow.com/users/3046905/ilya-konyukhov"}, "edited": false, "score": 0, "creation_date": 1539187020, "post_id": 52743406, "comment_id": 92413101, "body": "I just forgot to copy the rest of the iteration&#39;s code. Thanks"}], "answers": [{"tags": [], "owner": {"reputation": 1918, "user_id": 9224452, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb0f303869bf090269cbcc46cef14991?s=128&d=identicon&r=PG&f=1", "display_name": "John Baker", "link": "https://stackoverflow.com/users/9224452/john-baker"}, "is_accepted": true, "score": 0, "last_activity_date": 1539185142, "last_edit_date": 1539185142, "creation_date": 1539184507, "answer_id": 52743509, "question_id": 52743406, "link": "https://stackoverflow.com/questions/52743406/image-tag-with-link-to-helper-in-a-ternary-operator-condition/52743509#52743509", "title": "Image_tag with Link_to helper in a ternary operator condition", "body": "<p>Seems youre trying to use ternary operator to decide what to display. Try: </p>\n\n<pre><code>  &lt;%= x.picture? ? (link_to image_tag(x.picture_url, :alt =&gt; x.name), root_path) : image_tag(\"https://via.placeholder.com/250x250\") %&gt;\n</code></pre>\n\n<p>I think the comma between the arguments for <code>link_to</code> method is throwing the syntax error, so now that the <code>link_to</code> method with it's arguments is inside round brackets it should not break the syntax for ternary operator.</p>\n"}], "owner": {"reputation": 51, "user_id": 10192738, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EBCq0.jpg?s=128&g=1", "display_name": "Kaido", "link": "https://stackoverflow.com/users/10192738/kaido"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 98, "favorite_count": 0, "accepted_answer_id": 52743509, "answer_count": 1, "score": 0, "last_activity_date": 1539185142, "creation_date": 1539184227, "question_id": 52743406, "link": "https://stackoverflow.com/questions/52743406/image-tag-with-link-to-helper-in-a-ternary-operator-condition", "title": "Image_tag with Link_to helper in a ternary operator condition", "body": "<p>I'm trying to get a sample of the latest 3 products on sell inside my store first-page view and make them clickable to redirect the user to their reciprocal show page.\nThis is the controller:</p>\n\n<pre><code>  def home\n  @productsample = Product.where(:ordinable =&gt; true).last(3).shuffle\n  end\n</code></pre>\n\n<p>This is my view:</p>\n\n<pre><code>&lt;h2&gt;Latest product on sell!&lt;/h2&gt;\n&lt;% @productsample.each do |x| %&gt;\n&lt;div&gt;\n  &lt;%= x.picture? ? link_to image_tag(x.picture_url, :alt =&gt; x.name), product_path(x) : image_tag(\"https://via.placeholder.com/250x250\") %&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>for some reason i don't understand i keep getting this sintax error:</p>\n\n<pre><code>/home/luis/code/levisn1/development/ezmarkt/app/views/pages/home.html.erb:9: syntax error, unexpected tIDENTIFIER, expecting keyword_do or '{' or '(' x.picture? ? link_to image_tag(x.picture_url, :alt =&gt; x.name ^ /home/luis/code/levisn1/development/ezmarkt/app/views/pages/home.html.erb:9: syntax error, unexpected ',', expecting ')' .picture_url, :alt =&gt; x.name), root_path : image_tag(\"https: ^\n</code></pre>\n\n<p>with this code, instead, it works perfectly of course:</p>\n\n<pre><code>&lt;%= link_to image_tag(x.picture_url), product_path(x) %&gt;\n</code></pre>\n\n<p>what's the right syntax to get my first code working? Thanks</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1539244857, "post_id": 52742666, "comment_id": 92433409, "body": "What is a value that exits? Do you mean the return value?"}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1539244920, "post_id": 52742666, "comment_id": 92433437, "body": "Question is not clear. Why would it not return <code>[]</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "reply_to_user": {"reputation": 81, "user_id": 10435612, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-J5IUKwG8YaM/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DWbs4uAQJlzopnMWULploFQ83JTnA/mo/photo.jpg?sz=128", "display_name": "john simons", "link": "https://stackoverflow.com/users/10435612/john-simons"}, "edited": false, "score": 0, "creation_date": 1539182457, "post_id": 52742702, "comment_id": 92410226, "body": "My pleasure Sir ;)"}, {"owner": {"reputation": 1197, "user_id": 400743, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a0d5c51291898c92154ba4ac1c56cd6?s=128&d=identicon&r=PG", "display_name": "Bartosz Pietraszko", "link": "https://stackoverflow.com/users/400743/bartosz-pietraszko"}, "edited": false, "score": 1, "creation_date": 1539183237, "post_id": 52742702, "comment_id": 92410704, "body": "@Ursus actually it should be just <code>abc.product_ids</code> - it will contain actual ids, so attempt to map would cause error. Assuming, of course, that it&#39;s a method generated by <code>has_many :products</code> association."}, {"owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "edited": false, "score": 0, "creation_date": 1539183422, "post_id": 52742702, "comment_id": 92410826, "body": "Yeah, that too."}], "tags": [], "owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "is_accepted": true, "score": 4, "last_activity_date": 1539244988, "last_edit_date": 1539244988, "creation_date": 1539182146, "answer_id": 52742702, "question_id": 52742666, "link": "https://stackoverflow.com/questions/52742666/why-does-operator-return/52742702#52742702", "title": "Why does &#39;||&#39; operator return &#39;[ ]&#39;?", "body": "<p>Because <code>[]</code> is truthy value in Ruby, so the second part of your expression is never executed, it always evaluates to <code>[]</code>. In Ruby, just <code>false</code> and <code>nil</code> aren't truthy.</p>\n\n<p>Oh, anyway, you don't need that. <code>map</code> returns an empty array if the array is empty.</p>\n\n<pre><code>Model.new(\n  name: abc.name,\n  description: abc.description,\n  product_ids: abc.product_ids.map(&amp;:id) \n)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1918, "user_id": 9224452, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb0f303869bf090269cbcc46cef14991?s=128&d=identicon&r=PG&f=1", "display_name": "John Baker", "link": "https://stackoverflow.com/users/9224452/john-baker"}, "is_accepted": false, "score": 3, "last_activity_date": 1539182652, "creation_date": 1539182652, "answer_id": 52742874, "question_id": 52742666, "link": "https://stackoverflow.com/questions/52742666/why-does-operator-return/52742874#52742874", "title": "Why does &#39;||&#39; operator return &#39;[ ]&#39;?", "body": "<p>The exact semantics of <code>||</code> are:</p>\n\n<ol>\n<li>if first expression is not <code>nil</code> or <code>false</code>, return it</li>\n<li>if first expression is <code>nil</code> or <code>false</code>, return the second expression</li>\n</ol>\n\n<p>So since <code>[]</code> is truthy it will evaluate to <code>[]</code>, as explained by @Ursus.</p>\n"}], "owner": {"reputation": 81, "user_id": 10435612, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-J5IUKwG8YaM/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DWbs4uAQJlzopnMWULploFQ83JTnA/mo/photo.jpg?sz=128", "display_name": "john simons", "link": "https://stackoverflow.com/users/10435612/john-simons"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "accepted_answer_id": 52742702, "answer_count": 2, "score": 0, "last_activity_date": 1539244988, "creation_date": 1539182055, "last_edit_date": 1539244840, "question_id": 52742666, "link": "https://stackoverflow.com/questions/52742666/why-does-operator-return", "title": "Why does &#39;||&#39; operator return &#39;[ ]&#39;?", "body": "<p>I tested this on console:</p>\n\n<pre><code>[] || 1 # =&gt; []\n</code></pre>\n\n<p>Shouldn't it return the value that exits, and not <code>[]</code>? I can change it to ternary operator, which works fine, but why does the condition above not work?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1539180820, "post_id": 52742211, "comment_id": 92409176, "body": "your rates don&#39;t have value for <code>:speed</code>"}, {"owner": {"reputation": 2168, "user_id": 4386626, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/f2c9512ee4dac8ccbbf45fc2cf1a8046?s=128&d=identicon&r=PG&f=1", "display_name": "ToddT", "link": "https://stackoverflow.com/users/4386626/toddt"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1539180923, "post_id": 52742211, "comment_id": 92409247, "body": "good lord.. need more coffee.. thanks"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1539182119, "post_id": 52742211, "comment_id": 92410014, "body": "Ruby is an object oriented language, not an Arrays-of-Hashes-of-Strings oriented language. I suspect you would find this much easier to code and debug if you defined some classes to handle this data - e.g. <code>Rate</code>."}], "answers": [{"comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1539180841, "post_id": 52742255, "comment_id": 92409192, "body": "More like ALL of them :)"}, {"owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1539180878, "post_id": 52742255, "comment_id": 92409214, "body": "Oops, I did not check the array :D"}, {"owner": {"reputation": 2168, "user_id": 4386626, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/f2c9512ee4dac8ccbbf45fc2cf1a8046?s=128&d=identicon&r=PG&f=1", "display_name": "ToddT", "link": "https://stackoverflow.com/users/4386626/toddt"}, "edited": false, "score": 1, "creation_date": 1539180955, "post_id": 52742255, "comment_id": 92409264, "body": "arghhhhh.. sorry for the post.. not enough coffee!!"}], "tags": [], "owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "is_accepted": false, "score": 2, "last_activity_date": 1539181283, "last_edit_date": 1539181283, "creation_date": 1539180808, "answer_id": 52742255, "question_id": 52742211, "link": "https://stackoverflow.com/questions/52742211/delete-if-returning-undefined-method-include-for-nilnilclass/52742255#52742255", "title": "delete_if returning undefined method `include?&#39; for nil:NilClass", "body": "<p>Nope, it's not about <code>delete_if</code>. One (or more) of your <code>rate[:speed]</code>s is <code>nil</code>.</p>\n\n<pre><code>{|rate| rate.fetch(:speed, []).include?(non_enabled_rate)}\n</code></pre>\n"}], "owner": {"reputation": 2168, "user_id": 4386626, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/f2c9512ee4dac8ccbbf45fc2cf1a8046?s=128&d=identicon&r=PG&f=1", "display_name": "ToddT", "link": "https://stackoverflow.com/users/4386626/toddt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1539181283, "creation_date": 1539180666, "last_edit_date": 1539180815, "question_id": 52742211, "link": "https://stackoverflow.com/questions/52742211/delete-if-returning-undefined-method-include-for-nilnilclass", "title": "delete_if returning undefined method `include?&#39; for nil:NilClass", "body": "<p>Not sure why this is happening, I'm just using the method how I see it here: <a href=\"https://apidock.com/ruby/Array/delete_if\" rel=\"nofollow noreferrer\">delete_if</a></p>\n\n<p>But obviously I'm doing something wrong, just can't tell what.</p>\n\n<p>This is my code:</p>\n\n<pre><code>non_enabled_speeds = [\"Expedited\", \"Standard\"]\n\nparsed_rates = [{:service_name=&gt;\"Expedited\",\n  :service_code=&gt;\"XYZ\", :total_price=&gt;800, :currency=&gt;\"USD\"}, \n  {:service_name=&gt;\"Priority\", :service_code=&gt;\"PYT\", \n:total_price=&gt;1300, :currency=&gt;\"USD\"},\n  {:service_name=&gt;\"Standard\", :service_code=&gt;\"XYZ\", \n:total_price=&gt;500, :currency=&gt;\"USD\"}]\n\nnon_enabled_speeds.each do |non_enabled_rate|\n  parsed_rates.delete_if \n{|rate| rate[:speed].include?(non_enabled_rate)}\nend\n</code></pre>\n\n<p>I understand that <code>delete_if</code> uses <code>include?</code> under the covers, but I'm not sure why I'm getting this error:</p>\n\n<pre><code>undefined method `include?' for nil:NilClass\n</code></pre>\n"}, {"tags": ["ruby", "markdown", "jekyll", "jekyll-extensions"], "answers": [{"tags": [], "owner": {"reputation": 527, "user_id": 1680906, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/wrLz3.jpg?s=128&g=1", "display_name": "Harrix", "link": "https://stackoverflow.com/users/1680906/harrix"}, "is_accepted": true, "score": 0, "last_activity_date": 1539412084, "creation_date": 1539412084, "answer_id": 52790163, "question_id": 52742065, "link": "https://stackoverflow.com/questions/52742065/get-the-full-filename-of-the-post-in-convecter-of-jekyll/52790163#52790163", "title": "Get the full filename of the post in convecter of Jekyll", "body": "<p>Use <code>Jekyll::Hook</code>:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>module Jekyll\n  class MyHookProcess\n    class &lt;&lt; self\n      def my_process(content)\n        # something\n        content\n      end\n    end\n  end\nend\n\nJekyll::Hooks.register([:posts], :pre_render) do |post|\n  #puts (\"post.date = \" + post.date)\n  #puts (\"post.path = \" + post.path)\n  #puts (\"post.url = \" + post.url)\n  post.content = Jekyll::MyHookProcess.my_process(post.content)\nend\n</code></pre>\n"}], "owner": {"reputation": 527, "user_id": 1680906, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/wrLz3.jpg?s=128&g=1", "display_name": "Harrix", "link": "https://stackoverflow.com/users/1680906/harrix"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 102, "favorite_count": 0, "accepted_answer_id": 52790163, "answer_count": 1, "score": 0, "last_activity_date": 1546282194, "creation_date": 1539180202, "last_edit_date": 1546282194, "question_id": 52742065, "link": "https://stackoverflow.com/questions/52742065/get-the-full-filename-of-the-post-in-convecter-of-jekyll", "title": "Get the full filename of the post in convecter of Jekyll", "body": "<p>I am using markdown extension in jekyll using convecter. For example:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>module Jekyll\n  class MyConverter &lt; Converter\n    safe false\n    priority :high\n\n    def matches(ext)\n      ext =~ /^.(md|markdown)$/i\n    end\n\n    def output_ext(ext)\n      \".html\"\n    end\n\n    def my_process (content)\n      # something\n    end\n\n    def convert(content)\n      # Here my markdown processing\n      # content = my_process(content)\n\n      # Here I want to use the path to the markdown file\n      # puts (filename)\n\n      site = Jekyll::Site.new(@config)\n      converter = site.find_converter_instance(Jekyll::Converters::Markdown)\n      converter.convert(content)\n    end\n  end\nend\n</code></pre>\n\n<p>Is it possible to get the full name of the file or its location for which markdown text is converted to html?</p>\n\n<p>For example, I have a markdown file:</p>\n\n<pre><code>Bla bla bla.\n\n[Text of the link](gallery)\n\nBla bla bla\n</code></pre>\n\n<p>And I want a list of the files in directory <code>gallery</code>. How to get a list of files from a specific directory I know, but in the convecter I need to know the full path to this markdown file. Is there any way to do that?</p>\n"}, {"tags": ["ruby", "pangram"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 3, "creation_date": 1539179273, "post_id": 52741644, "comment_id": 92408212, "body": "The issue is here: <code>string.downcase[i] == alpha.any?</code> LHO is a letter, while <code>alpha.any?</code> returns boolean denoting whether the array is not empty. This condition never meets. It should be <code>alpha.include?(string.downcase[i])</code>."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1539242508, "post_id": 52741644, "comment_id": 92432187, "body": "@Aleksei, what have you done? Surely you must recognize that my past references to &quot;mudsie&quot; will now be met with blank stares! (Readers: until recently Aleksei went by the SO user name &quot;mudasobwa&quot;.)"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1539242530, "post_id": 52741644, "comment_id": 92432200, "body": "@Cary I would appreciate if you\u2019ll continue reference me as mudsie, I definitely love it."}], "answers": [{"comments": [{"owner": {"reputation": 19, "user_id": 10484506, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-sU3FSHSZ7wU/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DVhOP5z-jBK1KCRUxhaCZYiNOQzAw/mo/photo.jpg?sz=128", "display_name": "Hn Nm", "link": "https://stackoverflow.com/users/10484506/hn-nm"}, "edited": false, "score": 0, "creation_date": 1539192503, "post_id": 52743892, "comment_id": 92416196, "body": "why is that cleaner?"}, {"owner": {"reputation": 19, "user_id": 10484506, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-sU3FSHSZ7wU/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DVhOP5z-jBK1KCRUxhaCZYiNOQzAw/mo/photo.jpg?sz=128", "display_name": "Hn Nm", "link": "https://stackoverflow.com/users/10484506/hn-nm"}, "edited": false, "score": 0, "creation_date": 1539192548, "post_id": 52743892, "comment_id": 92416220, "body": "also why did you split the string first?"}, {"owner": {"reputation": 3119, "user_id": 4842949, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-0agpj31wtZ8/AAAAAAAAAAI/AAAAAAAAAAA/mSolbNN-zIY/photo.jpg?sz=128", "display_name": "Joseph Cho", "link": "https://stackoverflow.com/users/4842949/joseph-cho"}, "reply_to_user": {"reputation": 19, "user_id": 10484506, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-sU3FSHSZ7wU/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DVhOP5z-jBK1KCRUxhaCZYiNOQzAw/mo/photo.jpg?sz=128", "display_name": "Hn Nm", "link": "https://stackoverflow.com/users/10484506/hn-nm"}, "edited": false, "score": 0, "creation_date": 1539192606, "post_id": 52743892, "comment_id": 92416255, "body": "It doesn&#39;t keep track of the <code>i</code> variable, and the <code>while</code> loop has been reduced to one line of code.  You need to <code>split</code> first in order to iterate over it. Ruby can run <code>each</code> over an array but not a string."}, {"owner": {"reputation": 3119, "user_id": 4842949, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-0agpj31wtZ8/AAAAAAAAAAI/AAAAAAAAAAA/mSolbNN-zIY/photo.jpg?sz=128", "display_name": "Joseph Cho", "link": "https://stackoverflow.com/users/4842949/joseph-cho"}, "reply_to_user": {"reputation": 19, "user_id": 10484506, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-sU3FSHSZ7wU/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DVhOP5z-jBK1KCRUxhaCZYiNOQzAw/mo/photo.jpg?sz=128", "display_name": "Hn Nm", "link": "https://stackoverflow.com/users/10484506/hn-nm"}, "edited": false, "score": 0, "creation_date": 1539192744, "post_id": 52743892, "comment_id": 92416326, "body": "Currently the way you iterate over string is very manual. A simple <code>each</code> can handle it."}], "tags": [], "owner": {"reputation": 3119, "user_id": 4842949, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-0agpj31wtZ8/AAAAAAAAAAI/AAAAAAAAAAA/mSolbNN-zIY/photo.jpg?sz=128", "display_name": "Joseph Cho", "link": "https://stackoverflow.com/users/4842949/joseph-cho"}, "is_accepted": false, "score": 1, "last_activity_date": 1539185717, "creation_date": 1539185717, "answer_id": 52743892, "question_id": 52741644, "link": "https://stackoverflow.com/questions/52741644/testing-for-pangram/52743892#52743892", "title": "Testing for pangram", "body": "<p>Aleksei has already answered the question... here's a slightly cleaner way of doing it.</p>\n\n<pre><code>def is_pangram(string)\n\n  alpha = (\"a\"..\"z\").to_a\n  string.downcase.split(\"\").each do |i|\n    alpha.delete(i) if alpha.include?(i)\n  end\n\n  if alpha.empty?\n    puts \"This string is a pangram\"\n  else\n    puts \"This string is not a pangram\"\n  end\n\n  puts alpha.length\n  puts alpha\nend\n\nis_pangram(\"The quick brown fox jumps over the lazy dog\")\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4856, "user_id": 349333, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/25b78ea128b61107fc07250603c981e2?s=128&d=identicon&r=PG", "display_name": "Jochem Schulenklopper", "link": "https://stackoverflow.com/users/349333/jochem-schulenklopper"}, "is_accepted": false, "score": 0, "last_activity_date": 1539192941, "creation_date": 1539192941, "answer_id": 52745878, "question_id": 52741644, "link": "https://stackoverflow.com/questions/52741644/testing-for-pangram/52745878#52745878", "title": "Testing for pangram", "body": "<blockquote>\n  <p>but I didn't quite understand it</p>\n</blockquote>\n\n<p>The (intended) algorithm builds an array containing all the (26) letters of the alphabet. Then it processes the string, character by character, removing that character from the first array (if it is still in there). After that, it simply tests whether the first array is empty. If so, the characters in the string have led to removal of all the characters in the array, and the string is thus a pangram. If not, some character was 'missing' in the string, and that character is still in the array.</p>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 1, "last_activity_date": 1539279448, "last_edit_date": 1539279448, "creation_date": 1539201600, "answer_id": 52747906, "question_id": 52741644, "link": "https://stackoverflow.com/questions/52741644/testing-for-pangram/52747906#52747906", "title": "Testing for pangram", "body": "<p>How about the following?</p>\n\n<pre><code>def is_pangram?(str)\n  str.downcase.scan(/[a-z]/).uniq.size == 26\nend\n\nis_pangram? \"The quick brown dog jumps over the lazy fox.\"\n  #=&gt; true\nis_pangram? \"The quick brown dog jumps over the wary fox.\"\n  #=&gt; false\n</code></pre>\n"}], "owner": {"reputation": 19, "user_id": 10484506, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-sU3FSHSZ7wU/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DVhOP5z-jBK1KCRUxhaCZYiNOQzAw/mo/photo.jpg?sz=128", "display_name": "Hn Nm", "link": "https://stackoverflow.com/users/10484506/hn-nm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 280, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1539279448, "creation_date": 1539178949, "last_edit_date": 1539192607, "question_id": 52741644, "link": "https://stackoverflow.com/questions/52741644/testing-for-pangram", "title": "Testing for pangram", "body": "<p>I have seen a way of testing whether a string is a pangram -- a sentence containing every letter of the alphabet -- but I didn't quite understand it. I want to know why my way isn't working.</p>\n\n<pre><code>def is_pangram(string)\n\n  alpha = (\"a\"..\"z\").to_a\n  i = 0\n  while i &lt; string.length\n    if string.downcase[i] == alpha.any? \n        alpha.delete(string.downcase[i])\n    end\n    i += 1\n  end\n\n  if alpha.length &gt; 0\n    puts \"This string is not a pangram\"\n  else\n    puts \"This string is a pangram\"\n  end\n\n  puts alpha.length\n  puts alpha\nend\n\nis_pangram(\"The quick brown fox jumps over the lazy dog\")\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "pundit"], "answers": [{"comments": [{"owner": {"reputation": 194, "user_id": 9252006, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf140a21843b445b7ea06baef8e054df?s=128&d=identicon&r=PG", "display_name": "benl96", "link": "https://stackoverflow.com/users/9252006/benl96"}, "edited": false, "score": 0, "creation_date": 1539179889, "post_id": 52741825, "comment_id": 92408591, "body": "Thanks for the quick answer. That is exactly what I was looking for. Don&#39;t really know why I didn&#39;t come up with a redirect."}], "tags": [], "owner": {"reputation": 646, "user_id": 6695861, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/845e32a9576a6670db748fb456c089e8?s=128&d=identicon&r=PG&f=1", "display_name": "P. Boro", "link": "https://stackoverflow.com/users/6695861/p-boro"}, "is_accepted": true, "score": 1, "last_activity_date": 1539179488, "creation_date": 1539179488, "answer_id": 52741825, "question_id": 52741511, "link": "https://stackoverflow.com/questions/52741511/how-to-solve-nomethoderror-with-pundit/52741825#52741825", "title": "How to solve NoMethodError with Pundit", "body": "<p>The most common approach is to redirect users from pages that are not accessible by not logged in users. Just add a before action in your controller:</p>\n\n<pre><code>class CategoriesController &lt; ApplicationController\n  before_action :redirect_if_not_logged_in\n\n  &lt;...&gt;\n\n  private\n\n  def redirect_if_not_logged_in\n    redirect_to :home unless current_user\n  end\nend\n</code></pre>\n\n<p>(I assume here that you have <code>current_user</code> method which returns user instance or nil. Please change :home to wherever you want to redirect users)</p>\n"}, {"tags": [], "owner": {"reputation": 565, "user_id": 1308476, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/91609c7503907cb8cc3a6e78df9e15d3?s=128&d=identicon&r=PG", "display_name": "Airat Shigapov", "link": "https://stackoverflow.com/users/1308476/airat-shigapov"}, "is_accepted": false, "score": 0, "last_activity_date": 1539180459, "creation_date": 1539180459, "answer_id": 52742134, "question_id": 52741511, "link": "https://stackoverflow.com/questions/52741511/how-to-solve-nomethoderror-with-pundit/52742134#52742134", "title": "How to solve NoMethodError with Pundit", "body": "<p>There are multiple ways of achieving what you want.</p>\n\n<ol>\n<li><p>The most obvious (but kind of dirty) and straightforward-looking way of doing that would be to add a check for user presence in every condition:</p>\n\n<p><code>user &amp;&amp; user.admin?\n</code></p>\n\n<p>It won't fail with <code>nil</code> error as the second part of the condition won't get executed. But it doesn't look very nice, right? Especially if you have to copy this over to all methods you have in <code>CategoryPolicy</code>.</p></li>\n<li><p>What you can do instead, is to make Pundit \"think\" that you passed a <code>User</code>, by creating a <code>GuestUser</code> class which responds with <code>false</code> to <code>admin?</code> method (<a href=\"https://en.wikipedia.org/wiki/Null_object_pattern\" rel=\"nofollow noreferrer\">https://en.wikipedia.org/wiki/Null_object_pattern</a>):</p>\n\n<blockquote>\n  <p>In object-oriented computer programming, a null object is an object with no referenced value or with defined neutral (\"null\") behavior. The null object design pattern describes the uses of such objects and their behavior (or lack thereof)</p>\n</blockquote>\n\n<p>And use it when <code>user</code> is <code>nil</code>. In practice, it will look like this:</p>\n\n<pre><code>class ApplicationPolicy\n  attr_reader :user, :record\n\n  def initialize(user, record)\n    @user = user || GuestUser.new\n    @record = record\n  end\n\n  # ...\nend\n\nclass GuestUser\n  def admin?\n    false\n  end\nend\n</code></pre>\n\n<p>This way you won't have to alter any of your other code, as the model you passed responds to the method which is expected by policy (<code>admin?</code>). You may want to define this <code>GuestUser</code> somewhere else (not in the policy file), depending if you want other parts of the app to reuse that behavior.</p></li>\n<li><p>You can also proceed with the redirect approach from P. Boro answer. It's less flexible in some sense but can totally work fine if you don't need anything besides redirecting all non-logged in users.</p></li>\n</ol>\n"}], "owner": {"reputation": 194, "user_id": 9252006, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf140a21843b445b7ea06baef8e054df?s=128&d=identicon&r=PG", "display_name": "benl96", "link": "https://stackoverflow.com/users/9252006/benl96"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 165, "favorite_count": 0, "accepted_answer_id": 52741825, "answer_count": 2, "score": 0, "last_activity_date": 1539180459, "creation_date": 1539178596, "question_id": 52741511, "link": "https://stackoverflow.com/questions/52741511/how-to-solve-nomethoderror-with-pundit", "title": "How to solve NoMethodError with Pundit", "body": "<p>I don't know if I'm doing something wrong here but it seems like.</p>\n\n<p>I use Pundit for authorization and I have set up a few models with it now.</p>\n\n<p>Ive got a Category model which can only be created by admins. Also I don't want users to see the show/edit/destroy views either. I just want it to be accessed by admins. So far so good.</p>\n\n<p>Will add some code below:</p>\n\n<p>category_policy.rb</p>\n\n<pre><code>class CategoryPolicy &lt; ApplicationPolicy\n  def index?\n    user.admin?\n  end\n\n  def create?\n    user.admin?\n  end\n\n  def show?\n    user.admin?\n  end\n\n  def new?\n    user.admin?\n  end\n\n  def update?\n    return true if user.admin?\n  end\n\n  def destroy?\n    return true if user.admin?\n  end\nend\n</code></pre>\n\n<p>categories_controller.rb</p>\n\n<pre><code>class CategoriesController &lt; ApplicationController\n  layout 'scaffold'\n\n  before_action :set_category, only: %i[show edit update destroy]\n\n  # GET /categories\n  def index\n    @category = Category.all\n    authorize @category\n  end\n\n  # GET /categories/1\n  def show\n    @category = Category.find(params[:id])\n\n    authorize @category\n  end\n\n  # GET /categories/new\n  def new\n    @category = Category.new\n    authorize @category\n  end\n\n  # GET /categories/1/edit\n  def edit\n    authorize @category\n  end\n\n  # POST /categories\n  def create\n    @category = Category.new(category_params)\n    authorize @category\n    if @category.save\n      redirect_to @category, notice: 'Category was successfully created.'\n    else\n      render :new\n    end\n  end\n\n  # PATCH/PUT /categories/1\n  def update\n    authorize @category\n    if @category.update(category_params)\n      redirect_to @category, notice: 'Category was successfully updated.'\n    else\n      render :edit\n    end\n  end\n\n  # DELETE /categories/1\n  def destroy\n    authorize @category\n    @category.destroy\n    redirect_to categories_url, notice: 'Category was successfully destroyed.'\n  end\n\n  private\n\n  # Use callbacks to share common setup or constraints between actions.\n  def set_category\n    @category = Category.find(params[:id])\n  end\n\n  # Only allow a trusted parameter \"white list\" through.\n  def category_params\n    params.require(:category).permit(:name)\n  end\nend\n</code></pre>\n\n<p>application_policy.rb</p>\n\n<pre><code>class ApplicationPolicy\n  attr_reader :user, :record\n\n  def initialize(user, record)\n    @user = user\n    @record = record\n  end\n\n  def index?\n    false\n  end\n\n  def create?\n    create?\n  end\n\n  def new?\n    create?\n  end\n\n  def update?\n    false\n  end\n\n  def edit?\n    update?\n  end\n\n  def destroy?\n    false\n  end\n\n  class Scope\n    attr_reader :user, :scope\n\n    def initialize(user, scope)\n      @user = user\n      @scope = scope\n    end\n\n    def resolve\n      scope.all\n    end\n  end\nend\n</code></pre>\n\n<p>Ive got Pundit included in my ApplicationController and <code>rescue_from Pundit::NotAuthorizedError, with: :forbidden</code> this set up there as well.</p>\n\n<p>The authorization itself works, if I'm logged in with an admin account I have access to /categories/*. If I'm logged out I get the following: <code>NoMethodError at /categories\nundefined method</code>admin?' for nil:NilClass`\nWhile writing the question I think I found the problem- I guess Pundit looks for a User that is nil because I'm not logged in. What would the correct approach of solving this issue look like?</p>\n\n<p>Best regards</p>\n"}, {"tags": ["ruby", "logstash"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1539178676, "post_id": 52741498, "comment_id": 92407821, "body": "<code>a = event.get(&quot;files&quot;); event.set(&quot;files&quot;, a.map { |e| e[&quot;MD5&quot;] })</code> should do."}, {"owner": {"reputation": 162, "user_id": 5786261, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ae2b0793b0cd60e81cf334174a37d84?s=128&d=identicon&r=PG&f=1", "display_name": "creed", "link": "https://stackoverflow.com/users/5786261/creed"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1539179464, "post_id": 52741498, "comment_id": 92408332, "body": "It does the job done."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1539179562, "post_id": 52741498, "comment_id": 92408392, "body": "Cool then, cheers."}, {"owner": {"reputation": 162, "user_id": 5786261, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ae2b0793b0cd60e81cf334174a37d84?s=128&d=identicon&r=PG&f=1", "display_name": "creed", "link": "https://stackoverflow.com/users/5786261/creed"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1539179776, "post_id": 52741498, "comment_id": 92408528, "body": "It does the job done, but I get lots of ERROR messages about implicit conversions. I dont see records being dropped when processing the same dataset however, so seems just to be just a cosmetics issue.   [2018-10-10T15:47:51,820][ERROR][logstash.filters.ruby    ] Ruby exception occurred: no implicit conversion of String into Integer  Will try to work that out now."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1539179907, "post_id": 52741498, "comment_id": 92408604, "body": "I am not familiar with <a href=\"https://stackoverflow.com/questions/tagged/logstash\">logstash</a> at all, sorry for that."}, {"owner": {"reputation": 162, "user_id": 5786261, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ae2b0793b0cd60e81cf334174a37d84?s=128&d=identicon&r=PG&f=1", "display_name": "creed", "link": "https://stackoverflow.com/users/5786261/creed"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 1, "creation_date": 1539180072, "post_id": 52741498, "comment_id": 92408724, "body": "That is okay, I will work it out and post the solution in the comment for the community."}], "owner": {"reputation": 162, "user_id": 5786261, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ae2b0793b0cd60e81cf334174a37d84?s=128&d=identicon&r=PG&f=1", "display_name": "creed", "link": "https://stackoverflow.com/users/5786261/creed"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 290, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1539178536, "creation_date": 1539178536, "question_id": 52741498, "link": "https://stackoverflow.com/questions/52741498/ruby-code-modification-to-flatten-json-file-in-logstash", "title": "Ruby code modification to flatten json file in Logstash", "body": "<p>I am trying to flatten out one JSON file stored in Elastic Search using Logstash. \nThe data flow is as follows: </p>\n\n<blockquote>\n  <p>input {\"querying the elasticsearch for fields [files][md5]\"}</p>\n  \n  <p>filter {\"my custom ruby code to flatten the [files][md5]\"}</p>\n  \n  <p>output {\"exporting the flattened files to csv\"}</p>\n</blockquote>\n\n<p>My input: </p>\n\n<pre><code>\"files\": [{         \"SHA256\": \"1213447D713ECA24484983E754474D9D2F4A283D77DDBD9C8084CD7AA0574ACF\",       \"MD5\": \"7D332F11DD7389C8121AA523F07CFEEC\",      \"SHA1\": \"6026B28C6049115272138AD357A5AF67B99354A5\"  }, {        \"SHA256\": \"1213447D713ECA24484983E754474D9D2F4A283D77DDBD9C8084CD7AA0574ACF\",       \"MD5\": \"7D332F11DD7389C8121AA523F07CFEEC\",      \"SHA1\": \"6026B28C6049115272138AD357A5AF67B99354A5\"  }, {        \"SHA256\": \"1212447D713ECA24484983E754474D9D2F4A283D77DDBD9C8084CD7AA0574ACF\",       \"MD5\": \"7D332F11DD7389C8121AA523F07CFEEC\",      \"SHA1\": \"6026B28C6049115272138AD357A5AF67B99354A5\"  } ]\n</code></pre>\n\n<p>Filtering code: </p>\n\n<pre><code>ruby {\n    code =&gt; '\n        a = event.get(\"files\")\n        a.each_index { |i|\n             event.set(\"files-#{i}-total\", a[i][\"MD5\"])\n        }\n    '\n}\n</code></pre>\n\n<p>My output: </p>\n\n<pre><code>\"files-1-total\":\"7D332F11DD7389C8121AA523F07CFEEC\",\n\"files-2-total\":\"7D332F11DD7389C8121AA523F07CFEEC\",\n\"files-3-total\":\"7D332F11DD7389C8121AA523F07CFEEC\"\n</code></pre>\n\n<p>What I want to accomplish is:</p>\n\n<pre><code>\"files\":[\"7D332F11DD7389C8121AA523F07CFEEC\",\"7D332F11DD7389C8121AA523F07CFEEC\",\"7D332F11DD7389C8121AA523F07CFEEC\"]\n</code></pre>\n\n<p>How can I modify the code to have all of the MD5 in one array?\nThank you for help. </p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 646, "user_id": 6695861, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/845e32a9576a6670db748fb456c089e8?s=128&d=identicon&r=PG&f=1", "display_name": "P. Boro", "link": "https://stackoverflow.com/users/6695861/p-boro"}, "edited": false, "score": 0, "creation_date": 1539178597, "post_id": 52741326, "comment_id": 92407770, "body": "Please provide you models code so we can help."}], "answers": [{"comments": [{"owner": {"reputation": 5, "user_id": 6619789, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f975ae625a49884b1d2705403250907?s=128&d=identicon&r=PG&f=1", "display_name": "zekorius", "link": "https://stackoverflow.com/users/6619789/zekorius"}, "edited": false, "score": 0, "creation_date": 1539180844, "post_id": 52741649, "comment_id": 92409193, "body": "&gt;That said, you simply cannot associate records by custom methods. God damn, I thank that it&#39;s possible and spend plenty of time on looking for a way to accomplish this.  &gt;That means if you need the return value of the id_s string to associate records then add a column to your table and use that column instead of a custom method. I have no other option then. However it sounds like a waste of space to make additional column that would only store ids but as a varchars..."}, {"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "reply_to_user": {"reputation": 5, "user_id": 6619789, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f975ae625a49884b1d2705403250907?s=128&d=identicon&r=PG&f=1", "display_name": "zekorius", "link": "https://stackoverflow.com/users/6619789/zekorius"}, "edited": false, "score": 2, "creation_date": 1539192225, "post_id": 52741649, "comment_id": 92416039, "body": "Why do you store then in two different formats in the two tables in the first place?"}], "tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": false, "score": 0, "last_activity_date": 1539178962, "creation_date": 1539178962, "answer_id": 52741649, "question_id": 52741326, "link": "https://stackoverflow.com/questions/52741326/rails-method-instead-of-id-in-models-has-many/52741649#52741649", "title": "Rails method instead of id in model&#39;s has_many", "body": "<p>From the <a href=\"https://edgeguides.rubyonrails.org/association_basics.html#options-for-belongs-to-primary-key\" rel=\"nofollow noreferrer\">docs</a>:</p>\n\n<blockquote>\n  <p>By convention, Rails assumes that the <code>id</code> column is used to hold the primary key of its tables. The <code>:primary_key</code> option allows you to specify a different <em>column</em>.</p>\n</blockquote>\n\n<p>That said, you simply cannot associate records by custom methods. You have to associate them by columns in the database. That means if you need the return value of the <code>id_s</code> string to associate records then add a column to your table and use that column instead of a custom method.</p>\n"}], "owner": {"reputation": 5, "user_id": 6619789, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f975ae625a49884b1d2705403250907?s=128&d=identicon&r=PG&f=1", "display_name": "zekorius", "link": "https://stackoverflow.com/users/6619789/zekorius"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 75, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1539178962, "creation_date": 1539177976, "last_edit_date": 1539178903, "question_id": 52741326, "link": "https://stackoverflow.com/questions/52741326/rails-method-instead-of-id-in-models-has-many", "title": "Rails method instead of id in model&#39;s has_many", "body": "<p>Somewhere in my model I have:</p>\n\n<pre><code>  has_many :custom_values, -&gt; { where(custom_field: CustomField.where(field_format: \"company\"))}, :foreign_key =&gt; \"value\", :primary_key =&gt; :id_s, :dependent =&gt; :destroy\n  def id_s\n    read_attribute(:id).to_s\n  end\n</code></pre>\n\n<p><code>custom_value.value</code> is varchar so I'm trying to make string from <code>id</code> with method <code>id_s</code></p>\n\n<p>But it doesn't work, it allways compare <code>custom_value.value</code> to <code>NULL</code></p>\n\n<p>FE:</p>\n\n<pre><code>2.5.0 :037 &gt; WkAccount.first().custom_values\n  WkAccount Load (0.7ms)  SELECT  `wk_accounts`.* FROM `wk_accounts`  ORDER BY `wk_accounts`.`id` ASC LIMIT 1\n  CustomValue Load (36.5ms)  SELECT `custom_values`.* FROM `custom_values` WHERE `custom_values`.`value` = NULL AND `custom_values`.`custom_field_id` IN (SELECT `custom_fields`.`id` FROM `custom_fields` WHERE `custom_fields`.`field_format` = 'company')\n</code></pre>\n\n<p>while:</p>\n\n<pre><code>2.5.0 :039 &gt; WkAccount.first().id_s\n  WkAccount Load (1.2ms)  SELECT  `wk_accounts`.* FROM `wk_accounts`  ORDER BY `wk_accounts`.`id` ASC LIMIT 1\n =&gt; \"7\" \n</code></pre>\n\n<p>I can't figure out, why is there</p>\n\n<pre><code>WHERE `custom_values`.`value` = NULL\n</code></pre>\n\n<p>Instead of</p>\n\n<pre><code>WHERE `custom_values`.`value` = \"5\"\n</code></pre>\n\n<p>Any idea?</p>\n\n<p><strong>EDIT:</strong> added whole model</p>\n\n<pre><code>class WkAccount &lt; ActiveRecord::Base\n  unloadable\n  belongs_to :address, :class_name =&gt; 'WkAddress', :dependent =&gt; :destroy\n  has_many :billable_projects, as: :parent, class_name: \"WkAccountProject\", :dependent =&gt; :destroy\n  has_many :invoices, as: :parent, class_name: \"WkInvoice\", :dependent =&gt; :restrict_with_error\n  has_many :invoice_items, through: :invoices\n  has_many :custom_values, -&gt; { where(custom_field: CustomField.where(field_format: \"company\"))}, :foreign_key =&gt; \"value\", :primary_key =&gt; \"id_s\", :dependent =&gt; :destroy\n  has_many :projects, through: :billable_projects\n  has_many :contracts, as: :parent, class_name: \"WkContract\", :dependent =&gt; :destroy\n  has_many :opportunities, as: :parent, class_name: \"WkOpportunity\", :dependent =&gt; :destroy\n  has_many :activities, as: :parent, class_name: 'WkCrmActivity', :dependent =&gt; :destroy\n  has_many :contacts, foreign_key: \"account_id\", class_name: \"WkCrmContact\", :dependent =&gt; :destroy\n  has_many :payments, as: :parent, class_name: \"WkPayment\"\n  belongs_to :location, :class_name =&gt; 'WkLocation'\n  validates_presence_of :name\n  validate :hasAnyValues\n\n  def id_s\n    read_attribute(:id).to_s\n  end\n\n  def hasAnyValues\n    name.blank? &amp;&amp; address_id.blank? &amp;&amp; activity_id.blank? &amp;&amp; industry.blank? &amp;&amp; annual_revenue.blank? &amp;&amp; assigned_user_id.blank? &amp;&amp; id.blank?\n  end\n\n  # Returns account's contracts for the given project\n  # or nil if the account do not have contract\n  def contract(project)\n    contract = nil\n    unless project.blank?\n        contract = contracts.where(:project_id =&gt; project.id).first\n        contract = contracts[0] if contract.blank?\n    end\n    contract\n  end\n\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 1012, "user_id": 10347572, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iottG.jpg?s=128&g=1", "display_name": "escanxr", "link": "https://stackoverflow.com/users/10347572/escanxr"}, "edited": false, "score": 0, "creation_date": 1539175943, "post_id": 52740692, "comment_id": 92406036, "body": "This is what I have in my layout, in the last elsif"}], "tags": [], "owner": {"reputation": 12085, "user_id": 632688, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b6c6e4e8117bbd27fd25e9e2ea350458?s=128&d=identicon&r=PG", "display_name": "Wizard of Ogz", "link": "https://stackoverflow.com/users/632688/wizard-of-ogz"}, "is_accepted": false, "score": 0, "last_activity_date": 1539175760, "creation_date": 1539175760, "answer_id": 52740692, "question_id": 52740586, "link": "https://stackoverflow.com/questions/52740586/rails-rendered-but-doesnt-appear/52740692#52740692", "title": "Rails rendered but doesn&#39;t appear", "body": "<p>It should be <code>= yield :leftbar</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 646, "user_id": 6695861, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/845e32a9576a6670db748fb456c089e8?s=128&d=identicon&r=PG&f=1", "display_name": "P. Boro", "link": "https://stackoverflow.com/users/6695861/p-boro"}, "is_accepted": true, "score": 1, "last_activity_date": 1539176172, "creation_date": 1539176172, "answer_id": 52740805, "question_id": 52740586, "link": "https://stackoverflow.com/questions/52740586/rails-rendered-but-doesnt-appear/52740805#52740805", "title": "Rails rendered but doesn&#39;t appear", "body": "<p>In your <code>application.slim</code> you have <code>- if content_for(:full_width)</code>. This probably returns some truthy value so any other <code>elsif</code> won't be executed. I believe it should be <code>- if content_for?(:full_width)</code></p>\n"}], "owner": {"reputation": 1012, "user_id": 10347572, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iottG.jpg?s=128&g=1", "display_name": "escanxr", "link": "https://stackoverflow.com/users/10347572/escanxr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 31, "favorite_count": 0, "accepted_answer_id": 52740805, "answer_count": 2, "score": 0, "last_activity_date": 1539176172, "creation_date": 1539175458, "question_id": 52740586, "link": "https://stackoverflow.com/questions/52740586/rails-rendered-but-doesnt-appear", "title": "Rails rendered but doesn&#39;t appear", "body": "<p>Please excuse my english if it's not perfect.</p>\n\n<p>I know there are already different topics about this type of problem but none has brought an effective solution in my case.</p>\n\n<p>I have a sidebar and in logs, I can see it's rendered but it doesn't appear in the view or when I inspect the elements.</p>\n\n<p>I don't see any error in the code but maybe you'll see something.</p>\n\n<p><strong>_sidebar.slim:</strong></p>\n\n<pre><code>= content_for(:leftbar) do\n  .leftbar-nav\n    .leftbar-content\n      .leftbar-block\n        = render('shared/clients_ratings')\n      .leftbar-block\n        = render('themes/list')\n      .leftbar-block\n        = render('shared/social_share')\n      .cta-block\n        = widget_content('sidebar-list-public-orders')\n</code></pre>\n\n<p><strong>Rendered in _orders.slim:</strong></p>\n\n<pre><code>- unless identity_signed_in?\n  = render 'shared/cta_blocks'\n\n- if @orders.size &gt; 0\n    = render @orders\n    = paginate @orders\n- else\n  p\n    | There are no orders.\n\n= render('themes/sidebar')\n</code></pre>\n\n<p><strong>Rendered in index.slim:</strong></p>\n\n<pre><code>- content_for(:full_width) do\n  .neo-page-header\n    .container\n      .neo-page-header-title\n        h1 Title\n\n  .container\n    = render('orders/orders')\n</code></pre>\n\n<p><strong>Finally, I have a content_for?(:leftbar) in my application.slim:</strong></p>\n\n<pre><code>doctype html\nhtml lang=\"fr\"\n  = render \"layouts/head\"\n  body class= \"#{yield(:app_class)}\"\n    #wrap\n      = render 'shared/flash_messages'\n      = render 'shared/admin_navbar'\n      - if identity_signed_in?\n        = render 'shared/navbar'\n      - else\n        = render 'shared/navbar_guest'\n      = render 'shared/banner' unless hide_banner? or identity_signed_in?\n\n      = render('shared/confirmation_notice')\n\n      - if content_for(:full_width)\n        = yield(:full_width)\n\n      - elsif content_for?(:sidebar)\n        .container\n          .row\n            .col-lg-9.col-md-9\n              = yield\n            .col-lg-3.col-md-3\n              = yield :sidebar\n\n      - elsif content_for?(:leftbar)\n        .container\n          .row\n            .col-lg-3.col-md-3\n              = yield :leftbar\n            .col-lg-9.col-md-9.main-content\n              = yield\n      - else\n        .container\n          = yield\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "simple-form", "simple-form-for"], "comments": [{"owner": {"reputation": 1918, "user_id": 9224452, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb0f303869bf090269cbcc46cef14991?s=128&d=identicon&r=PG&f=1", "display_name": "John Baker", "link": "https://stackoverflow.com/users/9224452/john-baker"}, "edited": false, "score": 0, "creation_date": 1539181972, "post_id": 52739480, "comment_id": 92409910, "body": "does it work if you click on the &quot;Choose file&quot; button, are there any logs if it doesn&#39;t?"}, {"owner": {"reputation": 11, "user_id": 10442019, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-xKUAiiDob7w/AAAAAAAAAAI/AAAAAAAAACo/ZuJWhPOmOaQ/photo.jpg?sz=128", "display_name": "Thomas Bromehead", "link": "https://stackoverflow.com/users/10442019/thomas-bromehead"}, "reply_to_user": {"reputation": 1918, "user_id": 9224452, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb0f303869bf090269cbcc46cef14991?s=128&d=identicon&r=PG&f=1", "display_name": "John Baker", "link": "https://stackoverflow.com/users/9224452/john-baker"}, "edited": false, "score": 0, "creation_date": 1539423723, "post_id": 52739480, "comment_id": 92503849, "body": "@JohnBaker: apparently Uppy uses the default file_field but hides it so it does need to be there. Didn&#39;t implement it but reading other&#39;s code that&#39;s what I understood. Tried using this with Shrine and S3 but more than I can handle right now ;) Thanks for trying to help and to answer you, yes the button worked but Uppy wasn&#39;t displayed as I wasn&#39;t calling it properly in the JS."}], "answers": [{"tags": [], "owner": {"reputation": 21, "user_id": 5931660, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KeG3r.jpg?s=128&g=1", "display_name": "Ross Young", "link": "https://stackoverflow.com/users/5931660/ross-young"}, "is_accepted": false, "score": 2, "last_activity_date": 1551129203, "creation_date": 1551129203, "answer_id": 54874760, "question_id": 52739480, "link": "https://stackoverflow.com/questions/52739480/trying-to-display-uppy-uploader-within-a-simple-from/54874760#54874760", "title": "Trying to display Uppy uploader within a simple_from", "body": "<p>So if you're using Webpacker to handle your Webpack config, this setup worked for me:</p>\n\n<pre><code>import Uppy from '@uppy/core'\nimport Dashboard from '@uppy/dashboard'\n\nconst uppy = Uppy({\n  id: 'yourIdName',\n})\n  .use(Dashboard, {\n    target: '#your-target-element',\n    replaceTargetContent: true,\n    inline: true,\n  })\n\nuppy.on('complete', (result) =&gt; {\n  console.log('Upload complete! We\u2019ve uploaded these files:', result.successful)\n})\n</code></pre>\n\n<p>The important values here are the <code>replaceTargetContent</code> and <code>inline</code> properties. <code>inline</code> displays the Dashboard in the target element instead of as a modal, and <code>replaceTargetContent</code> does what it says, putting the Dashboard inside your target instead of whatever content (ie. a form field) was there before.</p>\n\n<p>Uppy docs to refer are here: </p>\n\n<p><a href=\"https://uppy.io/docs/dashboard/#inline-false\" rel=\"nofollow noreferrer\">https://uppy.io/docs/dashboard/#inline-false</a></p>\n\n<p><a href=\"https://uppy.io/docs/dashboard/#replaceTargetContent-false\" rel=\"nofollow noreferrer\">https://uppy.io/docs/dashboard/#replaceTargetContent-false</a></p>\n"}], "owner": {"reputation": 11, "user_id": 10442019, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-xKUAiiDob7w/AAAAAAAAAAI/AAAAAAAAACo/ZuJWhPOmOaQ/photo.jpg?sz=128", "display_name": "Thomas Bromehead", "link": "https://stackoverflow.com/users/10442019/thomas-bromehead"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 704, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1551129203, "creation_date": 1539171786, "last_edit_date": 1539175135, "question_id": 52739480, "link": "https://stackoverflow.com/questions/52739480/trying-to-display-uppy-uploader-within-a-simple-from", "title": "Trying to display Uppy uploader within a simple_from", "body": "<p>I have successfully managed to include the uppy uploader by adding a class called \"dashboard-container\" to simple_form's <code>input[type=file]</code> class list but my uploader doesn't display within the field.</p>\n\n<p>As you can see from the console it is being loaded properly but the default \"Choose file\" button is still being rendered and there must be a conflict somewhere.</p>\n\n<p>I am also managing to play with the simple_form css and my dashboard-container class as well, as you can see I've added a bit of radius from simple_form scss itself and some black border from my dashboard container.</p>\n\n<p><a href=\"https://i.stack.imgur.com/X93FK.png\" rel=\"nofollow noreferrer\">Results from the console</a></p>\n\n<p>Here's my simple_form code:</p>\n\n<pre><code>&lt;div id=\"new_flat_form_container\"&gt;\n    &lt;div id=\"new_flat_form\"&gt;\n        &lt;%= simple_form_for flat do |f| %&gt;\n        &lt;%= f.input :title, label: \"Titre\", hint:\"Quelques mots pour d\u00e9crire votre logement\" %&gt;\n        &lt;%= f.input :category, label: \"Cat\u00e9gorie\", collection: [\"maison\", \"appartement\", \"terrain\", \"caravane\", \"camping-car\"]%&gt;\n        &lt;%= f.input :description, as: :text %&gt;\n        &lt;%= f.input :nb_of_bathrooms, label: \"Nombre de salles de bain\", input_html: {class: 'form-control btn-lg col-sm-6'}, collection:1..5 %&gt;\n        &lt;%= f.input :photos, as: :file, multiple: true,direct_upload: true %&gt;\n        &lt;%= f.input :price_per_night, label: \"Prix par nuit, en DU\", hint:\"A exprimer en DU pour nous habituer \u00e0 compter ainsi\"%&gt;\n        &lt;div class=\"row\"&gt;\n            &lt;%= f.button :submit, value: \"Je cr\u00e9e mon logement\", class:\"btn btn-success col-sm-6 col-sm-offset-3\" %&gt;\n        &lt;/div&gt;\n        &lt;% end %&gt;\n    &lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>The repo is here: <a href=\"https://github.com/thomasbromehead/log1/tree/simple_form\" rel=\"nofollow noreferrer\">https://github.com/thomasbromehead/log1/tree/simple_form</a></p>\n\n<p>I would greatly appreciate some help.\nI am on Rails 5.2 and Webpack 3.12</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "carrierwave", "rmagick"], "comments": [{"owner": {"reputation": 12464, "user_id": 1376448, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f16da5431a99911ebc32093a28bc591?s=128&d=identicon&r=PG", "display_name": "kiddorails", "link": "https://stackoverflow.com/users/1376448/kiddorails"}, "edited": false, "score": 0, "creation_date": 1539171884, "post_id": 52738875, "comment_id": 92403425, "body": "not working for pdf because your uploader&#39;s manipulators are specifically designed for images and they can&#39;t work on pdf?"}, {"owner": {"reputation": 12464, "user_id": 1376448, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f16da5431a99911ebc32093a28bc591?s=128&d=identicon&r=PG", "display_name": "kiddorails", "link": "https://stackoverflow.com/users/1376448/kiddorails"}, "edited": false, "score": 0, "creation_date": 1539171986, "post_id": 52738875, "comment_id": 92403486, "body": "add <code>, :if =&gt; :image?</code> after <code>version :thumb</code> and <code>version :web</code> ?"}, {"owner": {"reputation": 71, "user_id": 5400081, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Fp4Z6nUhdLc/AAAAAAAAAAI/AAAAAAAAAAs/4-qpTltufK0/photo.jpg?sz=128", "display_name": "Ranganath Nyamagoudar", "link": "https://stackoverflow.com/users/5400081/ranganath-nyamagoudar"}, "reply_to_user": {"reputation": 12464, "user_id": 1376448, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f16da5431a99911ebc32093a28bc591?s=128&d=identicon&r=PG", "display_name": "kiddorails", "link": "https://stackoverflow.com/users/1376448/kiddorails"}, "edited": false, "score": 0, "creation_date": 1539174538, "post_id": 52738875, "comment_id": 92405121, "body": "Ya, agree I have made those changes but I&#39;m wondering how that was working before."}, {"owner": {"reputation": 12464, "user_id": 1376448, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f16da5431a99911ebc32093a28bc591?s=128&d=identicon&r=PG", "display_name": "kiddorails", "link": "https://stackoverflow.com/users/1376448/kiddorails"}, "edited": false, "score": 0, "creation_date": 1539174744, "post_id": 52738875, "comment_id": 92405236, "body": "maybe the version updated and they used to handle something like this before? not sure"}, {"owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 0, "creation_date": 1539175058, "post_id": 52738875, "comment_id": 92405455, "body": "Hopefully you&#39;re using git version control and can see what may have changed in your code?  Have you found a solution?  You may not need <code>CarrierWave::MiniMagick</code> did you try to comment it out?"}, {"owner": {"reputation": 71, "user_id": 5400081, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Fp4Z6nUhdLc/AAAAAAAAAAI/AAAAAAAAAAs/4-qpTltufK0/photo.jpg?sz=128", "display_name": "Ranganath Nyamagoudar", "link": "https://stackoverflow.com/users/5400081/ranganath-nyamagoudar"}, "edited": false, "score": 0, "creation_date": 1539175488, "post_id": 52738875, "comment_id": 92405702, "body": "I have removed MiniMagic and manipulator and its working me. But I just wanted to know how it stopped suddenly."}], "answers": [{"tags": [], "owner": {"reputation": 1666, "user_id": 935514, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc914ba17a1c31060e83fc5a9f115d8d?s=128&d=identicon&r=PG", "display_name": "Will Koehler", "link": "https://stackoverflow.com/users/935514/will-koehler"}, "is_accepted": false, "score": 0, "last_activity_date": 1545169665, "last_edit_date": 1545169665, "creation_date": 1545168717, "answer_id": 53841395, "question_id": 52738875, "link": "https://stackoverflow.com/questions/52738875/carrierwave-pdf-upload-failed-to-manipulate/53841395#53841395", "title": "Carrierwave pdf upload failed to manipulate", "body": "<p>This was caused by a security update in ImageMagick that was released in Oct 2018 (<a href=\"https://launchpad.net/ubuntu/+source/imagemagick/8:6.7.7.10-6ubuntu3.13\" rel=\"nofollow noreferrer\">https://launchpad.net/ubuntu/+source/imagemagick/8:6.7.7.10-6ubuntu3.13</a>).</p>\n\n<p>There's a pretty simple fix. See <a href=\"https://stackoverflow.com/a/52661288/935514\">https://stackoverflow.com/a/52661288/935514</a>.</p>\n\n<p>Note: you only need to change the <code>&lt;policy domain=\"coder\" rights=\"read|write\" pattern=\"PDF\" /&gt;</code> line and you only need to restart the web workers, not the entire server.</p>\n"}], "owner": {"reputation": 71, "user_id": 5400081, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Fp4Z6nUhdLc/AAAAAAAAAAI/AAAAAAAAAAs/4-qpTltufK0/photo.jpg?sz=128", "display_name": "Ranganath Nyamagoudar", "link": "https://stackoverflow.com/users/5400081/ranganath-nyamagoudar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 715, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1545169665, "creation_date": 1539169755, "last_edit_date": 1539174225, "question_id": 52738875, "link": "https://stackoverflow.com/questions/52738875/carrierwave-pdf-upload-failed-to-manipulate", "title": "Carrierwave pdf upload failed to manipulate", "body": "<p>I am using CarrierWave for file uploads in my application. All of sudden since 6th October 2018, pdf files are not able to upload, and app raises this error: </p>\n\n<pre><code>Failed to manipulate with MiniMagick, maybe it is not an image? Original Error: \n`identify /tmp/mini_magick20181010-10534-s5jchg.pdf` failed with error: \nidentify: not authorized `/tmp/mini_magick20181010-10534-s5jchg.pdf' @ \nerror/constitute.c/ReadImage/412. \n</code></pre>\n\n<p>There are lot of question on same but none of the answers have solved this issue. I have also tried with Rmagick but no luck.</p>\n\n<p>Below is my uploader set up </p>\n\n<pre><code>class AttachmentUploader &lt; CarrierWave::Uploader::Base\n\n  # Include RMagick or MiniMagick support:\n  # include CarrierWave::RMagick\n  include CarrierWave::MiniMagick\n\n  # Choose what kind of storage to use for this uploader:\n  #storage :file\n  storage :fog\n\n  # Override the directory where uploaded files will be stored.\n  # This is a sensible default for uploaders that are meant to be mounted:\n  def store_dir\n    \"uploads/#{model.class.to_s.underscore}/#{mounted_as}/#{model.id}\"\n  end\n\n  # Provide a default URL as a default if there hasn't been a file uploaded:\n  def default_url\n    \"no-photo.png\"\n  end\n\n\n  # Create different versions of your uploaded files:\n\n  version :thumb do\n    # crop to exactly 80px x 80px\n    process :resize_to_fill =&gt; [80, 80]\n  end\n\n  version :web do\n    # scale to be no larger than 800px x 500px\n    process :resize_to_limit =&gt; [800, 500]\n  end\n\n  # Add a white list of extensions which are allowed to be uploaded.\n  # For images you might use something like this:\n  # def extension_white_list\n  #   %w(jpg jpeg gif png)\n  # end\n\n  # Override the filename of the uploaded files:\n  # Avoid using model.id or version_name here, see uploader/store.rb for details.\n  # def filename\n  #   \"something.jpg\" if original_filename\n  # end\n\nend\n</code></pre>\n\n<p>Let me know your thoughts.</p>\n\n<p>Thank you</p>\n"}, {"tags": ["arrays", "json", "ruby"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1539166500, "post_id": 52737849, "comment_id": 92400302, "body": "Your input is not a valid ruby nor json."}, {"owner": {"reputation": 421, "user_id": 10130996, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58411fd54b0352f580242debb34e4583?s=128&d=identicon&r=PG&f=1", "display_name": "zseikyocho", "link": "https://stackoverflow.com/users/10130996/zseikyocho"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1539166620, "post_id": 52737849, "comment_id": 92400376, "body": "@AlekseiMatiushkin Sorry, edited."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1539166684, "post_id": 52737849, "comment_id": 92400418, "body": "@AlekseiMatiushkin: huh, what happened with the nickname? :)"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 2, "creation_date": 1539166760, "post_id": 52737849, "comment_id": 92400469, "body": "@SergioTulentsev that was a challenge: I decided to switch it to use my real name as soon as I got gold <a href=\"https://stackoverflow.com/questions/tagged/elixir\">elixir</a> badge."}, {"owner": {"reputation": 14511, "user_id": 384417, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/966d07471c4adb05fed0e12d31e36584?s=128&d=identicon&r=PG", "display_name": "rewritten", "link": "https://stackoverflow.com/users/384417/rewritten"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 1, "creation_date": 1539166945, "post_id": 52737849, "comment_id": 92400580, "body": "@AlekseiMatiushkin then stick with elixir then and let normal humans get some rep on ruby... ;)"}], "answers": [{"tags": [], "owner": {"reputation": 14511, "user_id": 384417, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/966d07471c4adb05fed0e12d31e36584?s=128&d=identicon&r=PG", "display_name": "rewritten", "link": "https://stackoverflow.com/users/384417/rewritten"}, "is_accepted": true, "score": 3, "last_activity_date": 1539166867, "creation_date": 1539166867, "answer_id": 52738002, "question_id": 52737849, "link": "https://stackoverflow.com/questions/52737849/how-to-remove-an-element-from-a-json-with-ruby/52738002#52738002", "title": "How to remove an element from a json with ruby?", "body": "<p>Even if <code>.delete</code> would return the mutated hash (which it doesn't, it returns the deleted value), you are assigning <code>$json_data = JSON.parse(response)[\"b_path\"][0]</code>.</p>\n\n<p>Just assign the base hash, and mutate it in a loop with <code>.each</code>.</p>\n\n<pre><code>json_data = JSON.parse(response)\njson_data['a_path']['b_path'].each { |h| h.delete('id') }\njson_data\n# =&gt; the expected hash\n</code></pre>\n"}], "owner": {"reputation": 421, "user_id": 10130996, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58411fd54b0352f580242debb34e4583?s=128&d=identicon&r=PG&f=1", "display_name": "zseikyocho", "link": "https://stackoverflow.com/users/10130996/zseikyocho"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1200, "favorite_count": 0, "accepted_answer_id": 52738002, "answer_count": 1, "score": -2, "last_activity_date": 1539167270, "creation_date": 1539166439, "last_edit_date": 1539167032, "question_id": 52737849, "link": "https://stackoverflow.com/questions/52737849/how-to-remove-an-element-from-a-json-with-ruby", "title": "How to remove an element from a json with ruby?", "body": "<p>For this json structs:</p>\n\n<pre><code>{\n  \"a_path\": {\n    \"b_path\": [\n      {\n        \"id\": 1,\n        \"name\": \"a\"\n      },\n      {\n        \"id\": 2,\n        \"name\": \"b\"\n      }\n    ]\n  }\n}\n</code></pre>\n\n<p>Want to remove <code>id</code> element as:</p>\n\n<pre><code>{\n    \"a_path\": {\n      \"b_path\": [\n        {\n          \"name\": \"a\"\n        },\n        {\n          \"name\": \"b\"\n        }\n      ]\n    }\n}\n</code></pre>\n\n<p>Is there a good way? I have tried:</p>\n\n<pre><code>$json_data = JSON.parse(response)[\"b_path\"][0].delete(\"id\")\n</code></pre>\n\n<p>But got this result:</p>\n\n<pre><code>\"a_path\": \"1\"\n</code></pre>\n"}, {"tags": ["mysql", "ruby-on-rails", "ruby", "ruby-on-rails-3"], "comments": [{"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1539166125, "post_id": 52736983, "comment_id": 92400053, "body": "Can you please add the controller method&#39;s code and how the like query looks like? Please check what collation you configured in your database."}], "answers": [{"tags": [], "owner": {"reputation": 5312, "user_id": 6535997, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/10156345016155058/picture?type=large", "display_name": "Mark", "link": "https://stackoverflow.com/users/6535997/mark"}, "is_accepted": false, "score": 1, "last_activity_date": 1539170970, "creation_date": 1539170970, "answer_id": 52739232, "question_id": 52736983, "link": "https://stackoverflow.com/questions/52736983/how-to-recreate-issue-mysql2error-illegal-mix-of-collations-latin1-swedish/52739232#52739232", "title": "How to recreate issue: Mysql2::Error: Illegal mix of collations (latin1_swedish_ci,IMPLICIT)", "body": "<p>You're using the wrong character set. Try using UTF-8, add the following at the top of your offending file:</p>\n\n<pre><code>#!/bin/env ruby\n# encoding: utf-8\n</code></pre>\n"}], "owner": {"reputation": 752, "user_id": 4645982, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/6R1yX.jpg?s=128&g=1", "display_name": "Neelabh Singh", "link": "https://stackoverflow.com/users/4645982/neelabh-singh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 187, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1539170970, "creation_date": 1539163873, "question_id": 52736983, "link": "https://stackoverflow.com/questions/52736983/how-to-recreate-issue-mysql2error-illegal-mix-of-collations-latin1-swedish", "title": "How to recreate issue: Mysql2::Error: Illegal mix of collations (latin1_swedish_ci,IMPLICIT)", "body": "<p>Can anyone suggest how to recreate issue <code>Mysql2::Error: Illegal mix of collations (latin1_swedish_ci,IMPLICIT)</code></p>\n\n<p>This was triggered due API <code>/admin/products</code> and \"action\"=>\"index\". </p>\n\n<p>Error:</p>\n\n<pre><code>/admin/products#GET params: { \"controller\"=&gt;\"admin/products\"}, \nexception: ActiveRecord::StatementInvalid, message: Mysql2::Error:\n Illegal mix of collations (latin1_swedish_ci,IMPLICIT) and \n(utf8_general_ci,COERCIBLE) for operation 'like'\n</code></pre>\n"}, {"tags": ["ruby", "rspec", "factory-bot"], "comments": [{"owner": {"reputation": 646, "user_id": 6695861, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/845e32a9576a6670db748fb456c089e8?s=128&d=identicon&r=PG&f=1", "display_name": "P. Boro", "link": "https://stackoverflow.com/users/6695861/p-boro"}, "edited": false, "score": 1, "creation_date": 1539166411, "post_id": 52736394, "comment_id": 92400247, "body": "Have you checked if it really doesn&#39;t create associated objects? Maybe there is a bug somewhere else? Add smth like <code>expect(Paragraph.count).to eq(5)</code> in your test to check if they exist.  Also: please provide your ProofreadDocument and Paragraph models code so we can help."}, {"owner": {"reputation": 14511, "user_id": 384417, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/966d07471c4adb05fed0e12d31e36584?s=128&d=identicon&r=PG", "display_name": "rewritten", "link": "https://stackoverflow.com/users/384417/rewritten"}, "edited": false, "score": 0, "creation_date": 1539176806, "post_id": 52736394, "comment_id": 92406631, "body": "Can you share the implementation of <code>number_of_paragraphs_for</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 646, "user_id": 6695861, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/845e32a9576a6670db748fb456c089e8?s=128&d=identicon&r=PG&f=1", "display_name": "P. Boro", "link": "https://stackoverflow.com/users/6695861/p-boro"}, "edited": false, "score": 1, "creation_date": 1539169401, "post_id": 52738381, "comment_id": 92402019, "body": "There is no need for reloading association in OP example as it was not cached."}, {"owner": {"reputation": 14511, "user_id": 384417, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/966d07471c4adb05fed0e12d31e36584?s=128&d=identicon&r=PG", "display_name": "rewritten", "link": "https://stackoverflow.com/users/384417/rewritten"}, "reply_to_user": {"reputation": 646, "user_id": 6695861, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/845e32a9576a6670db748fb456c089e8?s=128&d=identicon&r=PG&f=1", "display_name": "P. Boro", "link": "https://stackoverflow.com/users/6695861/p-boro"}, "edited": false, "score": 0, "creation_date": 1539176825, "post_id": 52738381, "comment_id": 92406644, "body": "True that. It might be something else then."}, {"owner": {"reputation": 534, "user_id": 1055045, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e3bea0eb5ce2333ae2839f56c198ff4?s=128&d=identicon&r=PG", "display_name": "dft", "link": "https://stackoverflow.com/users/1055045/dft"}, "edited": false, "score": 0, "creation_date": 1585006918, "post_id": 52738381, "comment_id": 107612336, "body": "Not sure why you got a down vote for this. This is an actual known problem (not that it&#39;s a problem because factory_bot runs outside the context of orm). If you create in a callback you have to reload the object to access associated objects. See <a href=\"https://github.com/thoughtbot/factory_bot/issues/585\" rel=\"nofollow noreferrer\">github.com/thoughtbot/factory_bot/issues/585</a>"}], "tags": [], "owner": {"reputation": 14511, "user_id": 384417, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/966d07471c4adb05fed0e12d31e36584?s=128&d=identicon&r=PG", "display_name": "rewritten", "link": "https://stackoverflow.com/users/384417/rewritten"}, "is_accepted": false, "score": 0, "last_activity_date": 1539168092, "creation_date": 1539168092, "answer_id": 52738381, "question_id": 52736394, "link": "https://stackoverflow.com/questions/52736394/factorybot-is-not-creating-the-associated-models-list-in-the-after-create-callba/52738381#52738381", "title": "FactoryBot is not creating the associated models list in the after create callback", "body": "<p>Associations are not magically reloaded on existing instances. This is not due to FactoryBot, but to ActiveRecord itself.</p>\n\n<pre><code># example with activerecord:\n\nclass Foo\n  has_many :bars\nend\n\nclass Bar\n  belongs_to :foo\nend\n\nfoo = Foo.first\nfoo.bars\n# =&gt; []\n3.times { Bar.create(foo: foo) }\nfoo.bars\n# =&gt; []\nfoo.reload.bars\n# =&gt; [&lt;#Bar ...&gt;, &lt;#Bar ...&gt;, &lt;#Bar ...&gt;]\n</code></pre>\n\n<p>So you just need to reload the record (or just the association)</p>\n\n<pre><code>after(:create) do |inst|\n  create_list(...)\n  inst.paragraphs.reload\n  # or inst.reload\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 6994, "user_id": 623266, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/aab060b3da7fa08ba0b531e2204c6469?s=128&d=identicon&r=PG", "display_name": "chell", "link": "https://stackoverflow.com/users/623266/chell"}, "is_accepted": true, "score": 0, "last_activity_date": 1539234075, "creation_date": 1539234075, "answer_id": 52752533, "question_id": 52736394, "link": "https://stackoverflow.com/questions/52736394/factorybot-is-not-creating-the-associated-models-list-in-the-after-create-callba/52752533#52752533", "title": "FactoryBot is not creating the associated models list in the after create callback", "body": "<p>I found the problem.</p>\n\n<p>In my paragraphs model I had placed a default scope as follows:</p>\n\n<pre><code>default_scope :minimum_word_count,  -&gt;{ where(proofread_word_count: MINIMUM_LEVEL_DATA_WORD_COUNT..Float::INFINITY)}\n</code></pre>\n\n<p>This caused some issues as the paragraph I was saving in my tests had a word count too low for the parameters defined in this scope.</p>\n\n<p>@P.Boro and @rewritten helped by getting me to re-check my models and scopes.</p>\n"}], "owner": {"reputation": 6994, "user_id": 623266, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/aab060b3da7fa08ba0b531e2204c6469?s=128&d=identicon&r=PG", "display_name": "chell", "link": "https://stackoverflow.com/users/623266/chell"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1014, "favorite_count": 0, "accepted_answer_id": 52752533, "answer_count": 2, "score": 0, "last_activity_date": 1539234075, "creation_date": 1539161911, "question_id": 52736394, "link": "https://stackoverflow.com/questions/52736394/factorybot-is-not-creating-the-associated-models-list-in-the-after-create-callba", "title": "FactoryBot is not creating the associated models list in the after create callback", "body": "<p>I have two factories as follows:</p>\n\n<pre><code>FactoryBot.define do\n  factory :proofread_document do\n\n    factory :proofread_document_with_paragraphs do\n      after(:create) {|instance| create_list(:paragraph, 5, proofread_document: instance) }\n    end\n  end\nend\n\n    FactoryBot.define do\n      factory :paragraph do\n        level { 1 }\n        association :proofread_document\n    end\nend\n</code></pre>\n\n<p>In my RSpec test:</p>\n\n<pre><code>  describe '#number_of_paragraphs_for' do\n\n    let(:proofread_document) { create(:proofread_document_with_paragraphs)}\n\n    it 'returns the number of paragraphs for the given level' do\n      expect(proofread_document.number_of_paragraphs_for(\"level_1\")).to eq(1)\n    end\n  end\n</code></pre>\n\n<p>The test fails because there are no paragraphs:</p>\n\n<pre><code>proofead_document.paragraphs\n=&gt; []\n</code></pre>\n\n<p>Why are the associated paragraph objects not being created?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5", "paperclip", "rails-activestorage"], "comments": [{"owner": {"reputation": 712, "user_id": 929251, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69ef9fdd5a6cd663670253f5a73527a4?s=128&d=identicon&r=PG", "display_name": "Igor Kasyanchuk", "link": "https://stackoverflow.com/users/929251/igor-kasyanchuk"}, "edited": false, "score": 0, "creation_date": 1579956836, "post_id": 52735756, "comment_id": 105944208, "body": "you can use <a href=\"https://github.com/igorkasyanchuk/active_storage_validations\" rel=\"nofollow noreferrer\">github.com/igorkasyanchuk/active_storage_validations</a>"}], "answers": [{"comments": [{"owner": {"reputation": 909, "user_id": 9534861, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-HEqJQasw6sM/AAAAAAAAAAI/AAAAAAAABHA/HiEIzDPH-l0/photo.jpg?sz=128", "display_name": "Saqib Shahzad", "link": "https://stackoverflow.com/users/9534861/saqib-shahzad"}, "edited": false, "score": 0, "creation_date": 1539242225, "post_id": 52750081, "comment_id": 92432035, "body": "You just gave me guide for integrating paperclip with my app. I don&#39;t need paperclip. I want to integrate ActiveStorage in my app and have same functionalities like we have in Paperclip."}, {"owner": {"reputation": 1682, "user_id": 6392696, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/09WDQ.jpg?s=128&g=1", "display_name": "nourza", "link": "https://stackoverflow.com/users/6392696/nourza"}, "reply_to_user": {"reputation": 909, "user_id": 9534861, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-HEqJQasw6sM/AAAAAAAAAAI/AAAAAAAABHA/HiEIzDPH-l0/photo.jpg?sz=128", "display_name": "Saqib Shahzad", "link": "https://stackoverflow.com/users/9534861/saqib-shahzad"}, "edited": false, "score": 0, "creation_date": 1539276861, "post_id": 52750081, "comment_id": 92453264, "body": "yeah by adding something like this rails g migration AddAvatarToProfiles"}], "tags": [], "owner": {"reputation": 1682, "user_id": 6392696, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/09WDQ.jpg?s=128&g=1", "display_name": "nourza", "link": "https://stackoverflow.com/users/6392696/nourza"}, "is_accepted": false, "score": 0, "last_activity_date": 1539213948, "creation_date": 1539213948, "answer_id": 52750081, "question_id": 52735756, "link": "https://stackoverflow.com/questions/52735756/styling-and-validations-in-activestorage-rails-like-paperclip/52750081#52750081", "title": "Styling and Validations in ActiveStorage Rails like Paperclip", "body": "<p>Here in this link <a href=\"https://devcenter.heroku.com/articles/paperclip-s3\" rel=\"nofollow noreferrer\">https://devcenter.heroku.com/articles/paperclip-s3</a></p>\n\n<p>Add this to gemfile</p>\n\n<pre><code>gem 'paperclip'\ngem 'aws-sdk', '~&gt; 2.3'\n</code></pre>\n\n<p>Then bundle install</p>\n\n<h1>config/environments/production.rb</h1>\n\n<pre><code>config.paperclip_defaults = {\n  storage: :s3,\n  s3_credentials: {\n    bucket: ENV.fetch('S3_BUCKET_NAME'),\n    access_key_id: ENV.fetch('AWS_ACCESS_KEY_ID'),\n    secret_access_key: ENV.fetch('AWS_SECRET_ACCESS_KEY'),\n    s3_region: ENV.fetch('AWS_REGION'),\n  }\n}\n</code></pre>\n\n<p>Additionally, we\u2019ll need to the set the AWS configuration variables on the Heroku application.</p>\n\n<pre><code>heroku config:set S3_BUCKET_NAME=your_bucket_name\nheroku config:set AWS_ACCESS_KEY_ID=your_access_key_id\nheroku config:set AWS_SECRET_ACCESS_KEY=your_secret_access_key\nheroku config:set AWS_REGION=your_aws_region\n\n$ rails g migration AddAvatarToProfiles\n\nclass AddAvatarToProfiless &lt; ActiveRecord::Migration\n  def self.up\n    add_attachment :profiles, :avatar\n  end\n\n  def self.down\n    remove_attachment :profiles, :avatar\n  end\nend\n</code></pre>\n\n<p>Then <code>rake db:migrate</code></p>\n\n<p>This is in the view </p>\n\n<pre><code>&lt;%= form_for(@profile, multipart: true) do |f| %&gt;\n  &lt;div class=\"field\"&gt;\n    &lt;%= f.label :name %&gt;\n    &lt;%= f.text_field :name %&gt;\n  &lt;/div&gt;\n  &lt;div class=\"field\"&gt;\n    &lt;%= f.label :avatar %&gt;\n    &lt;%= f.file_field :avatar %&gt;\n  &lt;/div&gt;\n  &lt;div class=\"actions\"&gt;\n    &lt;%= f.submit 'Make a friend' %&gt;\n    &lt;%= link_to 'Nevermind', friends_path, class: 'button' %&gt;\n  &lt;/div&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>and this is inside the controller</p>\n\n<p>class ProfilesController &lt; ApplicationController\n  # Other CRUD actions omitted</p>\n\n<pre><code> def create\n    @profile = Profile.new(profile_params)\n\n    if @profile.save\n      redirect_to @friend, notice: 'Profile was successfully created.'\n     else\n       render action: 'new'\n    end\n  end\n\n  private\n\n  def profile_params\n    params.require(:profile).permit(:avatar, :name)\n  end\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 2210986, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1fdc93a1666defd62879f92298c5797b?s=128&d=identicon&r=PG", "display_name": "marinad", "link": "https://stackoverflow.com/users/2210986/marinad"}, "is_accepted": false, "score": 1, "last_activity_date": 1548232365, "creation_date": 1548232365, "answer_id": 54322962, "question_id": 52735756, "link": "https://stackoverflow.com/questions/52735756/styling-and-validations-in-activestorage-rails-like-paperclip/54322962#54322962", "title": "Styling and Validations in ActiveStorage Rails like Paperclip", "body": "<p>There's no validation in ActiveStorage yet, so you could use <a href=\"https://guides.rubyonrails.org/active_record_validations.html#custom-validators\" rel=\"nofollow noreferrer\">custom validator</a> like this:</p>\n\n<pre><code>class MyModel &lt; ApplicationRecord\n  has_one_attached :some_img\n  validates :some_img, image: true\nend\n\n\nclass ImageValidator &lt; ActiveModel::EachValidator\n  def validate_each(record, attribute, value)\n    record.errors[attribute] &lt;&lt; I18n.t('errors.file_size') unless file_size_valid?(value)\n    record.errors[attribute] &lt;&lt; I18n.t('errors.file_type') unless file_type_valid?(value)\n  end\n\n  private\n\n  def file_size_valid?(value)\n    value.blob.byte_size &lt;= 5.megabytes\n  end\n\n  def file_type_valid?(value)\n    !value.blob.content_type.starts_with?('image/')\n  end\nend\n</code></pre>\n\n<p>There's no paperclip-like syntax for styling, but you could use <a href=\"https://guides.rubyonrails.org/active_storage_overview.html#transforming-images\" rel=\"nofollow noreferrer\">variant</a> for this purpose:</p>\n\n<pre><code>my_object.some_img.variant(resize: '100x100&gt;')\n</code></pre>\n\n<p>It passes <a href=\"http://www.imagemagick.org/script/command-line-options.php#resize\" rel=\"nofollow noreferrer\">options</a> directly to ImageMagick.</p>\n\n<p>Also there's no default image option, so it may be helpful to create some sort of method in the model, or as decorator.</p>\n"}], "owner": {"reputation": 909, "user_id": 9534861, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-HEqJQasw6sM/AAAAAAAAAAI/AAAAAAAABHA/HiEIzDPH-l0/photo.jpg?sz=128", "display_name": "Saqib Shahzad", "link": "https://stackoverflow.com/users/9534861/saqib-shahzad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 373, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1548232365, "creation_date": 1539159839, "last_edit_date": 1539974406, "question_id": 52735756, "link": "https://stackoverflow.com/questions/52735756/styling-and-validations-in-activestorage-rails-like-paperclip", "title": "Styling and Validations in ActiveStorage Rails like Paperclip", "body": "<p>I am using Active Storage for the first time, in my new project, before that I used  Paperclip. In paperclip, we had option to add default styles and validations for content type. like: </p>\n\n<pre><code>has_attached_file :avatar, styles: { medium: \"300x300&gt;\", thumb: \"100x100&gt;\" }, default_url: \"/images/:style/missing.png\"\nvalidates_attachment_content_type :avatar, content_type: /\\Aimage\\/.*\\z/\n</code></pre>\n\n<p>I cannot seem to find any documentation for how to implement these functionalities in ActiveStorage.</p>\n"}, {"tags": ["ruby", "visual-studio-code"], "answers": [{"comments": [{"owner": {"reputation": 11760, "user_id": 2926641, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/962e08aff17872bda3f89a9ee6849ab3?s=128&d=identicon&r=PG", "display_name": "asiniy", "link": "https://stackoverflow.com/users/2926641/asiniy"}, "edited": false, "score": 0, "creation_date": 1539233018, "post_id": 52737491, "comment_id": 92428535, "body": "Awesome. Thank you"}], "tags": [], "owner": {"reputation": 60165, "user_id": 836330, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47fd5f542a64b8b2dac00112a4829de8?s=128&d=identicon&r=PG&f=1", "display_name": "Mark", "link": "https://stackoverflow.com/users/836330/mark"}, "is_accepted": true, "score": 0, "last_activity_date": 1539165392, "creation_date": 1539165392, "answer_id": 52737491, "question_id": 52735415, "link": "https://stackoverflow.com/questions/52735415/how-to-prevent-abc-text-based-hints-from-being-on-the-top-of-suggestions-lis/52737491#52737491", "title": "How to prevent &quot;abc&quot; (text-based) hints from being on the top of suggestions list", "body": "<blockquote>\n  <p>// Controls whether snippets are shown with other suggestions and how\n  they are sorted.<br>\n   //  - top: Show snippet suggestions on top of other\n  suggestions.<br>\n  //  - bottom: Show snippet suggestions below other\n  suggestions.<br>\n  //  - inline: Show snippets suggestions with other\n  suggestions.<br>\n  //  - none: Do not show snippet suggestions.</p>\n</blockquote>\n\n<pre><code>\"editor.snippetSuggestions\": \"top\",\n</code></pre>\n\n<p>will move your snippets to the top of the suggestions list and</p>\n\n<blockquote>\n  <p>// Controls whether completions should be computed based on words in\n  the document.</p>\n</blockquote>\n\n<pre><code>\"editor.wordBasedSuggestions\": false,\n</code></pre>\n\n<p>will remove suggestions that are derived solely from other text in the file (hence the little \"abc\" in the box preceding your first \"def\" - that means it is text-based and not snippet-based for example).</p>\n"}], "owner": {"reputation": 11760, "user_id": 2926641, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/962e08aff17872bda3f89a9ee6849ab3?s=128&d=identicon&r=PG", "display_name": "asiniy", "link": "https://stackoverflow.com/users/2926641/asiniy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 20, "favorite_count": 0, "accepted_answer_id": 52737491, "answer_count": 1, "score": 0, "last_activity_date": 1539196358, "creation_date": 1539158643, "last_edit_date": 1539196358, "question_id": 52735415, "link": "https://stackoverflow.com/questions/52735415/how-to-prevent-abc-text-based-hints-from-being-on-the-top-of-suggestions-lis", "title": "How to prevent &quot;abc&quot; (text-based) hints from being on the top of suggestions list", "body": "<p><a href=\"https://i.stack.imgur.com/AiXfJ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/AiXfJ.png\" alt=\"enter image description here\"></a></p>\n\n<p>You could see hints on the picture above when I type <code>def</code>. The problem is that the hint on the top doesn't do anything (if I click <code>Tab</code> or <code>Enter</code> it just returns <code>def</code>) but the hint below creates a method like:</p>\n\n<pre><code>def (method_name)\n  ()\nend\n</code></pre>\n\n<p>How could I remove (or down in priority) hint on the top?</p>\n"}, {"tags": ["arrays", "ruby", "hash"], "comments": [{"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 1, "creation_date": 1539156844, "post_id": 52734854, "comment_id": 92394615, "body": "Can&#39;t reproduce. Works perfectly fine."}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1539161601, "post_id": 52734854, "comment_id": 92397212, "body": "What is <code>args</code>? What is <code>fetch_c</code>? What is <code>fetch_d</code>?"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1539162049, "post_id": 52734854, "comment_id": 92397502, "body": "<code>data[:array] = data[:array].map { |h| h.merge(c: fetch_c(args: args), d: fetch_d(args: args)) }</code>?"}, {"owner": {"reputation": 9, "user_id": 4384929, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7555813f3a172ad617dbd3d47648e48?s=128&d=identicon&r=PG&f=1", "display_name": "Shravan", "link": "https://stackoverflow.com/users/4384929/shravan"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1539163057, "post_id": 52734854, "comment_id": 92398152, "body": "@sawa  <code>args</code> is some input for <code>fetch_c</code> and <code>fetch_d</code>..  And <code>fetch_c</code> and <code>fetch_d</code> are some methods that give me output as <code>c</code> and  <code>d</code>."}, {"owner": {"reputation": 9, "user_id": 4384929, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7555813f3a172ad617dbd3d47648e48?s=128&d=identicon&r=PG&f=1", "display_name": "Shravan", "link": "https://stackoverflow.com/users/4384929/shravan"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1539164988, "post_id": 52734854, "comment_id": 92399362, "body": "@AlekseiMatiushkin merge is not even updating the hash. I am getting the same hash as whatever I am passing."}], "answers": [{"comments": [{"owner": {"reputation": 9, "user_id": 4384929, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7555813f3a172ad617dbd3d47648e48?s=128&d=identicon&r=PG&f=1", "display_name": "Shravan", "link": "https://stackoverflow.com/users/4384929/shravan"}, "edited": false, "score": 0, "creation_date": 1539163274, "post_id": 52735149, "comment_id": 92398316, "body": "No.. I am sure my methods are not throwing the error. because I can see the outputs when I add a breakpoint after those methods."}], "tags": [], "owner": {"reputation": 14407, "user_id": 3035830, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/14809f2ad7f14e2867798697ab8f8006?s=128&d=identicon&r=PG", "display_name": "shivam", "link": "https://stackoverflow.com/users/3035830/shivam"}, "is_accepted": false, "score": 0, "last_activity_date": 1539158096, "last_edit_date": 1539158096, "creation_date": 1539157581, "answer_id": 52735149, "question_id": 52734854, "link": "https://stackoverflow.com/questions/52734854/iterate-over-an-array-of-hashes-and-update-each-hash/52735149#52735149", "title": "Iterate over an array of hashes and update each hash", "body": "<p>The only way I can reproduce the issue is if <code>fetch_c</code> or <code>fetch_d</code> is throwing error in between.</p>\n\n<p>Steps to reproduce:</p>\n\n<pre><code>def fetch_c(i)\n  10/i\nend\n\ndata[:array] = [{:a=&gt;\"a\", :b=&gt;\"b\"},{:a=&gt;\"a\", :b=&gt;\"b\"}]\n\ndata[:array].each_with_index do |array, index|\n    c_info = fetch_c(index-1)\n    d_info = fetch_c(index-1)\n    array.merge!(c: c_info, d: d_info)\nend\n# ZeroDivisionError: divided by 0\n\ndata\n# =&gt; {:array=&gt;[{:a=&gt;\"a\", :b=&gt;\"b\", :c=&gt;-10, :d=&gt;-10}, {:a=&gt;\"a\", :b=&gt;\"b\"}]}\n</code></pre>\n\n<p>Please ensure that your methods are not throwing error. </p>\n"}], "owner": {"reputation": 9, "user_id": 4384929, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7555813f3a172ad617dbd3d47648e48?s=128&d=identicon&r=PG&f=1", "display_name": "Shravan", "link": "https://stackoverflow.com/users/4384929/shravan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 75, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1539165106, "creation_date": 1539156540, "last_edit_date": 1539165106, "question_id": 52734854, "link": "https://stackoverflow.com/questions/52734854/iterate-over-an-array-of-hashes-and-update-each-hash", "title": "Iterate over an array of hashes and update each hash", "body": "<p>I have an array of hashes like below:</p>\n\n<pre><code>data[:array] = [{:a=&gt;\"a\", :b=&gt;\"b\"}, {:a=&gt;\"a\", :b=&gt;\"b\"}]\n</code></pre>\n\n<p>I need to update each hash with new key-value pairs like below.</p>\n\n<pre><code>data[:array] = [{:a=&gt;\"a\", :b=&gt;\"b\", :c=&gt;\"c\", :d=&gt;\"d\"},\n                {:a=&gt;\"a\", :b=&gt;\"b\", :c=&gt;\"c\", :d=&gt;\"d\"}]\n</code></pre>\n\n<p>I am trying to perform this as follows:</p>\n\n<pre><code>data[:array].each do |array|\n  c_info = fetch_c(args: args) # Say fetch_c gives out c as output \n  d_info = fetch_d(args: args) # Say fetch_d gives out d as output \n  array.merge!(c: c_info, d: d_info)\nend\n</code></pre>\n\n<p>I get the output:</p>\n\n<pre><code>data[:array] = [{:a=&gt;\"a\", :b=&gt;\"b\", :c=&gt;\"c\", :d=&gt;\"d\"},\n                {:a=&gt;\"a\", :b=&gt;\"b\"}]\n</code></pre>\n\n<p>The hash is not updated in the second iteration. Please suggest.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "twitter-bootstrap"], "answers": [{"tags": [], "owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "is_accepted": true, "score": 0, "last_activity_date": 1539156247, "creation_date": 1539156247, "answer_id": 52734775, "question_id": 52734442, "link": "https://stackoverflow.com/questions/52734442/bootstrap-rubygem-vs-twitter-bootstrap-rails-gem/52734775#52734775", "title": "Bootstrap-rubygem vs twitter-bootstrap-rails gem", "body": "<p>The latter uses <code>sass</code> while the former uses <code>less</code>, since rails typically uses scss (sass) I would go with <a href=\"https://github.com/twbs/bootstrap-rubygem\" rel=\"nofollow noreferrer\">https://github.com/twbs/bootstrap-rubygem</a> but do keep in mind that uses bootstrap 4.  If you need 3 or less, use <a href=\"https://github.com/twbs/bootstrap-sass\" rel=\"nofollow noreferrer\">https://github.com/twbs/bootstrap-sass</a></p>\n"}], "owner": {"reputation": 33, "user_id": 10482510, "user_type": "registered", "profile_image": "https://graph.facebook.com/309938086465290/picture?type=large", "display_name": "Samreid Manez", "link": "https://stackoverflow.com/users/10482510/samreid-manez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 83, "favorite_count": 0, "accepted_answer_id": 52734775, "answer_count": 1, "score": 2, "last_activity_date": 1539156247, "creation_date": 1539154874, "question_id": 52734442, "link": "https://stackoverflow.com/questions/52734442/bootstrap-rubygem-vs-twitter-bootstrap-rails-gem", "title": "Bootstrap-rubygem vs twitter-bootstrap-rails gem", "body": "<p>I'm running a Rails 5 application and am looking to implement Bootstrap for the front-end styling. Can't find a general consensus on the difference between these two gems: <a href=\"https://github.com/seyhunak/twitter-bootstrap-rails\" rel=\"nofollow noreferrer\">https://github.com/seyhunak/twitter-bootstrap-rails</a> and <a href=\"https://github.com/twbs/bootstrap-rubygem\" rel=\"nofollow noreferrer\">https://github.com/twbs/bootstrap-rubygem</a> </p>\n\n<p>The first is more popular by downloads, but the second is maintained by the official Bootstrap team. The first also seems to have generators which would be handy, but if someone could explain the differences that would be great.</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "redis", "sidekiq", "sidekiq-monitor"], "comments": [{"owner": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "edited": false, "score": 0, "creation_date": 1539155128, "post_id": 52734412, "comment_id": 92393667, "body": "Make sure the sidekiq is up, check sidekiq log, use sidekiq web ui and find for enqueued but not executed jobs, check queues - there are number of possible explanations to this."}, {"owner": {"reputation": 97, "user_id": 6927514, "user_type": "registered", "profile_image": "https://graph.facebook.com/1417569534938796/picture?type=large", "display_name": "Harsimar Sandhu", "link": "https://stackoverflow.com/users/6927514/harsimar-sandhu"}, "reply_to_user": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "edited": false, "score": 0, "creation_date": 1539155814, "post_id": 52734412, "comment_id": 92394040, "body": "Sidekiq is up 24 * 7 no downtime. The job ran minimum 20 times as rake was scheduled every 24 hours. Enqueuing might not be a problem here as Sidekiq also retries to finish the failed job plus job was executed every day for 20 days."}, {"owner": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "edited": false, "score": 0, "creation_date": 1539156605, "post_id": 52734412, "comment_id": 92394474, "body": "Well then maybe your worker isn&#39;t written correctly? Does it work if you run <code>Worker.new.perform(object.id)</code> from console?"}, {"owner": {"reputation": 97, "user_id": 6927514, "user_type": "registered", "profile_image": "https://graph.facebook.com/1417569534938796/picture?type=large", "display_name": "Harsimar Sandhu", "link": "https://stackoverflow.com/users/6927514/harsimar-sandhu"}, "reply_to_user": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "edited": false, "score": 0, "creation_date": 1539156738, "post_id": 52734412, "comment_id": 92394552, "body": "yes as I said in the post some objects get processed with perform_async for some I have to do new.perform. assume all objects are identical and pass all conditions in perform."}, {"owner": {"reputation": 17782, "user_id": 1494519, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af54a0871600db7fbdbb5c558a6e29a3?s=128&d=identicon&r=PG", "display_name": "Mike Perham", "link": "https://stackoverflow.com/users/1494519/mike-perham"}, "edited": false, "score": 1, "creation_date": 1539203004, "post_id": 52734412, "comment_id": 92420937, "body": "Instead of a boolean sidekiq_processed, use a nullable sidekiq_jid column which stores the JID associated with the element.  Set it to &quot;&quot; when done.  Null == not processed.  JID == in progress, &quot;&quot; == done."}, {"owner": {"reputation": 17782, "user_id": 1494519, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af54a0871600db7fbdbb5c558a6e29a3?s=128&d=identicon&r=PG", "display_name": "Mike Perham", "link": "https://stackoverflow.com/users/1494519/mike-perham"}, "edited": false, "score": 0, "creation_date": 1539203086, "post_id": 52734412, "comment_id": 92420980, "body": "Then you can grep the Sidekiq logs for the JID to see associated logging.  The JID is returned by perform_async."}], "owner": {"reputation": 97, "user_id": 6927514, "user_type": "registered", "profile_image": "https://graph.facebook.com/1417569534938796/picture?type=large", "display_name": "Harsimar Sandhu", "link": "https://stackoverflow.com/users/6927514/harsimar-sandhu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 342, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1539154794, "creation_date": 1539154794, "question_id": 52734412, "link": "https://stackoverflow.com/questions/52734412/perform-async-sidekiq-issue", "title": "perform_async Sidekiq Issue", "body": "<p>Let's say we have 100 objects to send in Sidekiq to process some data.\nA rake is written which runs every 24 hours and picks up all 100 object where the object has column sidekiq_processed as false and send it into Sidekiq queue for processing. After Sidekiq has processed data sidekiq_processed column of the object is updated as true so that next time when the rake is scheduled that object is not picked up.</p>\n\n<p>The problem I'm facing is some objects after say 20 days still have sidekiq_processed as false. I have also implemented logging inside perform function to note each event/state in which my objects are. </p>\n\n<p>Let's say there were 20 objects left which didn't get processed. Their logs were checked and no logs of these objects were found. After triggering new.perform on the 21st day all objects were finally processed. </p>\n\n<p>I don't want to trigger them manually is there a way we could check why Sidekiq didn't consume my queue objects.</p>\n\n<pre><code>task :process_some_objects =&gt; :environment do\n    Object.where(sidekiq_processed: false).each do |object|\n        Worker.perform_async(object.id)\n    end\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "rvm", "rbenv"], "comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1539152829, "post_id": 52733679, "comment_id": 92392585, "body": "What is the difference between &quot;ruby on rails&quot;, &quot;RoR&quot;, &quot;rails&quot;, &quot;and &quot;ror&quot;?"}, {"owner": {"reputation": 703, "user_id": 10268122, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bad16d3391f1131bd3996108eb400edc?s=128&d=identicon&r=PG&f=1", "display_name": "shashi verma", "link": "https://stackoverflow.com/users/10268122/shashi-verma"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1539153099, "post_id": 52733679, "comment_id": 92392715, "body": "@sawa Oh god ! I didn&#39;t  notice that all these mistake , please forgive me , my English is too bad, by the way  &quot;RoR&quot;, &quot;rails&quot;, &quot;and &quot;ror&quot; all these are same."}, {"owner": {"reputation": 6207, "user_id": 5117953, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/Ca0RW.jpg?s=128&g=1", "display_name": "Vishal", "link": "https://stackoverflow.com/users/5117953/vishal"}, "edited": false, "score": 0, "creation_date": 1539153889, "post_id": 52733679, "comment_id": 92393045, "body": "I think you should follow steps given in this article <a href=\"https://www.digitalocean.com/community/tutorials/how-to-install-ruby-on-rails-with-rvm-on-ubuntu-16-04\" rel=\"nofollow noreferrer\">digitalocean.com/community/tutorials/&hellip;</a>"}, {"owner": {"reputation": 6207, "user_id": 5117953, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/Ca0RW.jpg?s=128&g=1", "display_name": "Vishal", "link": "https://stackoverflow.com/users/5117953/vishal"}, "edited": false, "score": 0, "creation_date": 1539153979, "post_id": 52733679, "comment_id": 92393084, "body": "You can also use gist created by me <a href=\"https://gist.github.com/vishaltps/b0b5a456c337e40d3ec47df9f6073ff8\" rel=\"nofollow noreferrer\">gist.github.com/vishaltps/b0b5a456c337e40d3ec47df9f6073ff8</a>"}, {"owner": {"reputation": 703, "user_id": 10268122, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bad16d3391f1131bd3996108eb400edc?s=128&d=identicon&r=PG&f=1", "display_name": "shashi verma", "link": "https://stackoverflow.com/users/10268122/shashi-verma"}, "reply_to_user": {"reputation": 6207, "user_id": 5117953, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/Ca0RW.jpg?s=128&g=1", "display_name": "Vishal", "link": "https://stackoverflow.com/users/5117953/vishal"}, "edited": false, "score": 0, "creation_date": 1539154383, "post_id": 52733679, "comment_id": 92393294, "body": "@Vishal thanks for the responce, but what is the difference  between  the installation with rvm and rbenv.?"}, {"owner": {"reputation": 6207, "user_id": 5117953, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/Ca0RW.jpg?s=128&g=1", "display_name": "Vishal", "link": "https://stackoverflow.com/users/5117953/vishal"}, "edited": false, "score": 0, "creation_date": 1539154554, "post_id": 52733679, "comment_id": 92393387, "body": "@shashiverma You can use any rvm or rbenv for managing the version of ruby. its depend on you what you have to use"}], "answers": [{"tags": [], "owner": {"reputation": 66, "user_id": 8145050, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gvHsa.png?s=128&g=1", "display_name": "Nick D", "link": "https://stackoverflow.com/users/8145050/nick-d"}, "is_accepted": false, "score": 1, "last_activity_date": 1539152613, "creation_date": 1539152613, "answer_id": 52733856, "question_id": 52733679, "link": "https://stackoverflow.com/questions/52733679/how-to-install-ruby-on-rails-on-ubuntu-with-rvm-or-rbenv/52733856#52733856", "title": "How to install ruby on rails on ubuntu with rvm or rbenv", "body": "<p>You have to follow a completed guide in order to setup a ruby on rails environment.</p>\n\n<p>Here is a good guide for ubuntu 16.04.</p>\n\n<p><a href=\"https://gorails.com/setup/ubuntu/16.04\" rel=\"nofollow noreferrer\">https://gorails.com/setup/ubuntu/16.04</a></p>\n"}], "owner": {"reputation": 703, "user_id": 10268122, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bad16d3391f1131bd3996108eb400edc?s=128&d=identicon&r=PG&f=1", "display_name": "shashi verma", "link": "https://stackoverflow.com/users/10268122/shashi-verma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 117, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1539152785, "creation_date": 1539151906, "last_edit_date": 1539152785, "question_id": 52733679, "link": "https://stackoverflow.com/questions/52733679/how-to-install-ruby-on-rails-on-ubuntu-with-rvm-or-rbenv", "title": "How to install ruby on rails on ubuntu with rvm or rbenv", "body": "<p>I am trying to setup RoR on my system (ubuntu 16.04).</p>\n\n<p>I followed the rubyonrails.org, which says to install ruby and sqlite3 before installing rails. I installed ruby from rubyinstaller and sqlite3 from stackoverflow. After that, I ran:</p>\n\n<pre><code>gem install rails\n</code></pre>\n\n<p>but it didn't work. I found rvm. I did that, but that also didn't work. Then I found rbenv from digital ocean, and I ended up having rails and ruby installed through rbenv.</p>\n\n<p>I want to know what the proper way is to install ror on a system.</p>\n"}, {"tags": ["arrays", "ruby", "hash"], "comments": [{"owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "edited": false, "score": 2, "creation_date": 1539146158, "post_id": 52732636, "comment_id": 92390251, "body": "Note that in Ruby <code>1 != &#39;1&#39;</code>."}, {"owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 1, "creation_date": 1539150486, "post_id": 52732636, "comment_id": 92391539, "body": "Can multiple arrays have same element?"}, {"owner": {"reputation": 1397, "user_id": 4940278, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/06NHi.jpg?s=128&g=1", "display_name": "Luna Lovegood", "link": "https://stackoverflow.com/users/4940278/luna-lovegood"}, "reply_to_user": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 0, "creation_date": 1539155327, "post_id": 52732636, "comment_id": 92393765, "body": "@Jagdeep Singh No"}, {"owner": {"reputation": 1397, "user_id": 4940278, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/06NHi.jpg?s=128&g=1", "display_name": "Luna Lovegood", "link": "https://stackoverflow.com/users/4940278/luna-lovegood"}, "reply_to_user": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "edited": false, "score": 0, "creation_date": 1539155369, "post_id": 52732636, "comment_id": 92393782, "body": "@Amadan Made the change in the question."}], "answers": [{"tags": [], "owner": {"reputation": 3523, "user_id": 9043475, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FNxvn.jpg?s=128&g=1", "display_name": "Rajagopalan", "link": "https://stackoverflow.com/users/9043475/rajagopalan"}, "is_accepted": false, "score": 0, "last_activity_date": 1539146232, "creation_date": 1539146232, "answer_id": 52732709, "question_id": 52732636, "link": "https://stackoverflow.com/questions/52732636/from-a-hash-with-array-elements-how-can-i-find-the-key-for-a-particular-array-v/52732709#52732709", "title": "From a hash with array elements, how can I find the key for a particular array value?", "body": "<p>You can use detect method </p>\n\n<pre><code> k, v = tab_details.detect{ |_,v| v.include?(\"1\") }\n\n p k\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 1, "last_activity_date": 1539146909, "creation_date": 1539146909, "answer_id": 52732797, "question_id": 52732636, "link": "https://stackoverflow.com/questions/52732636/from-a-hash-with-array-elements-how-can-i-find-the-key-for-a-particular-array-v/52732797#52732797", "title": "From a hash with array elements, how can I find the key for a particular array value?", "body": "<pre><code>tab_details.find { |_,v| v.include?(\"1\") }&amp;.first\n  #=&gt; \"ex1\"\n\ntab_details.find { |_,v| v.include?(\"cat\") }&amp;.first\n  #=&gt; nil\n</code></pre>\n\n<p><code>&amp;</code> is the <a href=\"http://mitrev.net/ruby/2015/11/13/the-operator-in-ruby/\" rel=\"nofollow noreferrer\">Safe Navigation Operator</a>. In the second example above the block returns <code>nil</code> so, because of the SNO, <code>first</code> is not executed and <code>nil</code> is returned.</p>\n"}, {"tags": [], "owner": {"reputation": 9602, "user_id": 3607136, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/NRFso.jpg?s=128&g=1", "display_name": "Gagan Gami", "link": "https://stackoverflow.com/users/3607136/gagan-gami"}, "is_accepted": false, "score": 0, "last_activity_date": 1539152572, "last_edit_date": 1539152572, "creation_date": 1539151004, "answer_id": 52733477, "question_id": 52732636, "link": "https://stackoverflow.com/questions/52732636/from-a-hash-with-array-elements-how-can-i-find-the-key-for-a-particular-array-v/52733477#52733477", "title": "From a hash with array elements, how can I find the key for a particular array value?", "body": "<pre><code>&gt; tab_details = {\"ex1\"=&gt;[\"1\", \"2\"], \"ex2\"=&gt;[\"3\", \"4\", \"5\"], \"ex3\"=&gt;[\"2\", \"1\", \"9\"]}\n&gt; tab_details.select{|k,v| v.include? \"1\"}.keys\n#=&gt; [\"ex1\", \"ex3\"]\n</code></pre>\n\n<p>to check against <strong>integer</strong> convert array elements to integer using <code>map(&amp;:to_i)</code></p>\n\n<pre><code>&gt; tab_details.select{|k,v| v.map(&amp;:to_i).include? 1}.keys\n#=&gt; [\"ex1\", \"ex3\"]\n</code></pre>\n\n<p>use <strong>select</strong> if same element can be in multiple arrays</p>\n"}, {"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1539190339, "post_id": 52733493, "comment_id": 92415066, "body": "The OP did not say whether the given element could appear in more than one hash value (array), so I don&#39;t think you need the assumption given in your last sentence. If the OP regards the keys ordered and wants the first key that has the given element in the key&#39;s value you need to invert the hash in such a way that the values (former keys) are in reverse key order. Perhaps use <a href=\"http://ruby-doc.org/core-2.5.1/String.html#method-i-scan\" rel=\"nofollow noreferrer\">Enumerable#reverse_each</a> in that case."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1539199467, "post_id": 52733493, "comment_id": 92419369, "body": "This would be the best approach if the method were called frequently."}, {"owner": {"reputation": 1397, "user_id": 4940278, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/06NHi.jpg?s=128&g=1", "display_name": "Luna Lovegood", "link": "https://stackoverflow.com/users/4940278/luna-lovegood"}, "edited": false, "score": 0, "creation_date": 1573622389, "post_id": 52733493, "comment_id": 103937145, "body": "Modifying the method a little bit so that it returns all the keys that has the particular value.  <code>inverted_hash = tab_details.each_with_object({}) do |(k, ary), out|       ary.each { |elem|         if out[elem].nil?        \tout[elem] = []        end       \tout[elem].push k       } end</code>"}], "tags": [], "owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "is_accepted": true, "score": 2, "last_activity_date": 1539151069, "creation_date": 1539151069, "answer_id": 52733493, "question_id": 52732636, "link": "https://stackoverflow.com/questions/52732636/from-a-hash-with-array-elements-how-can-i-find-the-key-for-a-particular-array-v/52733493#52733493", "title": "From a hash with array elements, how can I find the key for a particular array value?", "body": "<p>One (not so direct) way of doing this can be to <em>invert</em> the Hash by <em>expanding</em> each array to make each element a key:</p>\n\n<pre><code>tab_details = {\n  'foo' =&gt; [2, 3, 5],\n  'bar' =&gt; [1, 4, 6]\n}\n# =&gt; {\"foo\"=&gt;[2, 3, 5], \"bar\"=&gt;[1, 4, 6]}\n\ninverted_hash = tab_details.each_with_object({}) do |(k, ary), out|\n                  ary.each { |elem| out[elem] = k }\n                end\n# =&gt; {2=&gt;\"foo\", 3=&gt;\"foo\", 5=&gt;\"foo\", 1=&gt;\"bar\", 4=&gt;\"bar\", 6=&gt;\"bar\"}\n\ninput = 1\ninverted_hash[input]\n# =&gt; \"bar\"\n</code></pre>\n\n<p>Now, of course, it assumes that the <code>input</code> and array elements are of <strong>same type</strong> i.e. Integer. You can convert them acc. to what is given in your question:</p>\n\n<pre><code># If all the array elements are strings\ninverted_hash[input.to_s]\n# =&gt; \"bar\"\n</code></pre>\n\n<p>Another assumption it makes is, that <strong>no</strong> element is present in <em>more than one array</em>.</p>\n"}, {"comments": [{"owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 3, "creation_date": 1539152421, "post_id": 52733781, "comment_id": 92392377, "body": "The known element to search for key is not <code>[&#39;1&#39;, &#39;2&#39;]</code>, but <code>1</code>."}], "tags": [], "owner": {"reputation": 367, "user_id": 7852372, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Ukz2Q.jpg?s=128&g=1", "display_name": "rhunal", "link": "https://stackoverflow.com/users/7852372/rhunal"}, "is_accepted": false, "score": 0, "last_activity_date": 1539152313, "creation_date": 1539152313, "answer_id": 52733781, "question_id": 52732636, "link": "https://stackoverflow.com/questions/52732636/from-a-hash-with-array-elements-how-can-i-find-the-key-for-a-particular-array-v/52733781#52733781", "title": "From a hash with array elements, how can I find the key for a particular array value?", "body": "<pre><code>hash.key(value) =&gt; key\n</code></pre>\n\n<p>In your case,</p>\n\n<p><code>irb(main):012:0&gt; tab_details.key(['1', '2'])\n=&gt; \"ex1\"\n</code></p>\n"}], "owner": {"reputation": 1397, "user_id": 4940278, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/06NHi.jpg?s=128&g=1", "display_name": "Luna Lovegood", "link": "https://stackoverflow.com/users/4940278/luna-lovegood"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 96, "favorite_count": 0, "accepted_answer_id": 52733493, "answer_count": 5, "score": 0, "last_activity_date": 1539155352, "creation_date": 1539145710, "last_edit_date": 1539155352, "question_id": 52732636, "link": "https://stackoverflow.com/questions/52732636/from-a-hash-with-array-elements-how-can-i-find-the-key-for-a-particular-array-v", "title": "From a hash with array elements, how can I find the key for a particular array value?", "body": "<p>Every value of my hash is an array:</p>\n\n<pre><code>tab_details = {\n  'ex1' =&gt; ['1', '2']\n}\n</code></pre>\n\n<p>I want to pass an element and get the key that corresponds to an array that has the element.</p>\n\n<p>This is one way to do so:</p>\n\n<pre><code>tab_details.each{|k, v|\n  return key = k if tab_details[k].include? '1'\n}\n</code></pre>\n\n<p>Is there any other optimal way to handle this?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 7, "creation_date": 1539137499, "post_id": 52731615, "comment_id": 92388347, "body": "<code>(1..3).method(:to_a).owner #=&gt; Enumerable</code>, so see <a href=\"http://ruby-doc.org/core-2.5.1/Enumerable.html#method-i-to_a\" rel=\"nofollow noreferrer\">Enumerable#to_a</a>. Recall <code>Range.ancestors #=&gt; [Range, Enumerable, Object,...]</code>."}, {"owner": {"reputation": 5428, "user_id": 107122, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/a853e46e13bd048ae88fe160b8d4d874?s=128&d=identicon&r=PG", "display_name": "John", "link": "https://stackoverflow.com/users/107122/john"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1539137841, "post_id": 52731615, "comment_id": 92388416, "body": "Oh, I see, sorry, like I said, I&#39;m a newbie.  Thanks for clarifying."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 2, "creation_date": 1539138424, "post_id": 52731615, "comment_id": 92388526, "body": "<code>(1..3)</code> is a <code>Range</code> instance so <code>m = (1..3).method(:to_a) #=&gt; #&lt;Method: Range(Enumerable)#to_a&gt;</code> returns the method object associated with the symbol <code>:to_a</code> when defined on a <code>Range</code> instance. <code>m.owner #=&gt; Enumerable</code> tells you where the method is defined. (Look carefully at the return value from  <code>(1..3).method(:to_a)</code> to see we really didn&#39;t need <code>owner</code>.) See <a href=\"http://ruby-doc.org/core-2.5.1/Object.html#method-i-method\" rel=\"nofollow noreferrer\">Object#method</a> and <a href=\"http://ruby-doc.org/core-2.5.1/Method.html#method-i-owner\" rel=\"nofollow noreferrer\">Method#owner</a>. Lastly, note one could write <code>Range.instance_method(:to_a).owner</code> instead."}], "answers": [{"tags": [], "owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "is_accepted": true, "score": 1, "last_activity_date": 1539172476, "creation_date": 1539172476, "answer_id": 52739673, "question_id": 52731615, "link": "https://stackoverflow.com/questions/52731615/to-a-is-not-a-method-in-range-yet-it-works-on-range/52739673#52739673", "title": "&#39;to_a&#39; is not a method in &#39;Range&#39;, yet, it works on &#39;Range&#39;?", "body": "<blockquote>\n  <p>The following code is valid ruby:</p>\n\n<pre><code>b = (1..5).to_a\n</code></pre>\n  \n  <p><code>(1..5)</code> is a <code>Range</code> object, and <code>b</code> is an <code>Array</code> object.  The official(?) documentation for the Class <a href=\"https://ruby-doc.org/core-2.3.0/Range.html\" rel=\"nofollow noreferrer\">Range</a> does not document the method <code>to_a</code>, which appears to convert a range to an array.</p>\n  \n  <p>So, how is the above legal Ruby?  </p>\n</blockquote>\n\n<p>Ruby has something called \"inheritance\". Inheritance is a method for differential code-reuse that actually does not only exist in Ruby, but is in fact quite popular in many languages such as Java, C\u266f, C++, Python, PHP, Scala, Kotlin, Ceylon, and so on and so forth.</p>\n\n<p>Inheritance allows you to define methods in one place, and then <em>inherit</em> them in another place, overriding and defining <em>only</em> the methods whose behavior <em>differs</em>. Hence, \"differential code re-use\".</p>\n\n<p>In this particular case, the method you are looking at is <a href=\"https://ruby-doc.org/core/Enumerable.html#method-i-to_a\" rel=\"nofollow noreferrer\"><code>Enumerable#to_a</code></a>.</p>\n\n<p>Note: Ruby actually has two forms of inheritance, <em>mixin inheritance</em> and <em>class inheritance</em>. Mixin inheritance is like class inheritance where the mixin doesn't know its superclass. (The definitive resource about mixin inheritance is <a href=\"http://bracha.org/\" rel=\"nofollow noreferrer\">Gilad Bracha</a>'s PhD Thesis <a href=\"http://bracha.org/jigsaw.ps\" rel=\"nofollow noreferrer\"><em>The Programming Language Jigsaw\u00a0\u2013\udbff\udc00 Mixins,\udbff\udc01 Modularity, and Multiple Inheritance</em></a>.)</p>\n\n<blockquote>\n  <p>The official(?) documentation</p>\n</blockquote>\n\n<p>Actually, ruby-doc is a third-party site. There is no official documentation site. (However, the documentation on ruby-doc is generated from documentation comments in YARV, one of the major Ruby implementations, and one that Yukihiro Matsumoto actively contributes to.)</p>\n\n<blockquote>\n  <p>Since this documentation is presumably autogenerated from the source with Yard,</p>\n</blockquote>\n\n<p>It is actually autogenerated from the YARV source with RDoc, not YARD.</p>\n\n<blockquote>\n  <p>I'm confused how it could not be in the list of methods,</p>\n</blockquote>\n\n<p>Note that the explanation I gave is the correct one, but there could be many other explanations. The most simple one: the reason why the method is not in the documentation is that it is not documented. Another reason could be a bug in the documentation generator that prevents the documentation for that method being displayed, a typo in the source code that prevents the documentation generator from recognizing the documentation, and many, many others.</p>\n\n<blockquote>\n  <p>so is there auto conversion going on?</p>\n</blockquote>\n\n<p>No. Ruby does not have automatic conversions in the language. There are <em>some</em> methods which for reasons of efficiency are implemented in a non-object-oriented manner, and require an object to be an instance of a <em>specific</em> class (as opposed to the object-oriented manner, which would only require the object to conform to a specific protocol). Because it is a severe restriction to require an object to be an instance of a specific class, those methods will usually offer an \"escape hatch\" to the programmer, by sending a specific message and allowing the object to respond with an object of the required class.</p>\n\n<p>For example, all methods printing something to the console, require an instance of <code>String</code>, but they will try sending <code>to_s</code> first, before rejecting the argument.</p>\n\n<p>These are <em>sometimes</em> called \"implicit conversions\", but they have nothing to do with implicit conversions as in Scala or implicit casts as in C\u266f. They are in fact not even part of the language, they are just a convention for library writers.</p>\n"}], "owner": {"reputation": 5428, "user_id": 107122, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/a853e46e13bd048ae88fe160b8d4d874?s=128&d=identicon&r=PG", "display_name": "John", "link": "https://stackoverflow.com/users/107122/john"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 85, "favorite_count": 0, "accepted_answer_id": 52739673, "answer_count": 1, "score": 0, "last_activity_date": 1539172476, "creation_date": 1539137346, "last_edit_date": 1539147782, "question_id": 52731615, "link": "https://stackoverflow.com/questions/52731615/to-a-is-not-a-method-in-range-yet-it-works-on-range", "title": "&#39;to_a&#39; is not a method in &#39;Range&#39;, yet, it works on &#39;Range&#39;?", "body": "<p>The following code is valid:</p>\n\n<pre><code>(1..5).to_a\n</code></pre>\n\n<p><code>(1..5)</code> is a <code>Range</code>. The method <code>to_a</code> appears to convert a range to an array.</p>\n\n<p>However, the documentation for <a href=\"https://ruby-doc.org/core-2.3.0/Range.html\" rel=\"nofollow noreferrer\">Range</a> does not document. Since this documentation is presumably auto-generated from the source with Yard, I doubt it could not be in the list of methods. Is there auto conversion going on?</p>\n\n<p>How is the above legal Ruby?</p>\n"}, {"tags": ["ruby", "rubygems"], "answers": [{"tags": [], "owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "is_accepted": true, "score": 1, "last_activity_date": 1539128144, "last_edit_date": 1539128144, "creation_date": 1539122451, "answer_id": 52729939, "question_id": 52729801, "link": "https://stackoverflow.com/questions/52729801/ruby-packetgen-installation-gives-gem-install-error/52729939#52729939", "title": "ruby- packetgen installation gives gem install error", "body": "<p>Don't use <code>sudo gem install</code> but rather it is highly recommended that you use a ruby version manager, probably RVM, for more reasons why, see <a href=\"https://stackoverflow.com/questions/2119064/sudo-gem-install-or-gem-install-and-gem-locations\">&#39;sudo gem install&#39; or &#39;gem install&#39; and gem locations</a></p>\n\n<p>Based on your error it looks like you're trying to use your system ruby which will likely have permission and/or library dependency issues.  These are easily solved by using a version manager which has many advantages including the ability to use different ruby versions on the same system and not having to use <code>sudo</code> or root level installs of gems.</p>\n\n<p>You can install <a href=\"https://rvm.io/rvm/install\" rel=\"nofollow noreferrer\">RVM from here</a></p>\n\n<p>Instructions on gem link you posted do say gem depends on <code>sudo apt install libpcap-dev</code> which is a system lib your gem needs to build.  I assume you did that step already right?</p>\n"}], "owner": {"reputation": 579, "user_id": 9572280, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/V1qIs.png?s=128&g=1", "display_name": "Practical1", "link": "https://stackoverflow.com/users/9572280/practical1"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 89, "favorite_count": 0, "accepted_answer_id": 52729939, "answer_count": 1, "score": 0, "last_activity_date": 1539128144, "creation_date": 1539121630, "question_id": 52729801, "link": "https://stackoverflow.com/questions/52729801/ruby-packetgen-installation-gives-gem-install-error", "title": "ruby- packetgen installation gives gem install error", "body": "<p>I'm trying to install packetgen, a library for crafting and manipulating network packets. I followed all the instructions, and installed all the necessary libraries. However, when I ran <code>sudo gem install packetgen</code>\nto install it on my Linux machine it raised an error:</p>\n\n<pre><code>ERROR:  Error installing packetgen:\nERROR: Failed to build gem native extension.\n\ncurrent directory: /var/lib/gems/2.3.0/gems/pcaprub-0.12.4/ext/pcaprub_c\n/usr/bin/ruby2.3 -r ./siteconf20181009-29130-us1azm.rb extconf.rb\nmkmf.rb can't find header files for ruby at /usr/lib/ruby/include/ruby.h\n\nextconf failed, exit code 1\n\nGem files will remain installed in /var/lib/gems/2.3.0/gems/pcaprub-0.12.4                  for inspection.\nResults logged to /var/lib/gems/2.3.0/extensions/x86_64-linux/2.3.0   /pcaprub-0.12.4/gem_make.out [here][1]\n</code></pre>\n\n<p>I ran the command as sudo, but got the same error. Does anyone know what I'm doing wrong here? The link to installation instructions is <a href=\"https://github.com/sdaubert/packetgen/blob/master/README.md\" rel=\"nofollow noreferrer\">here.</a></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "tree", "treeview", "hierarchical-data"], "answers": [{"comments": [{"owner": {"reputation": 2496, "user_id": 3046905, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/692eb06201cbed91c3c6a9cf11ed0511?s=128&d=identicon&r=PG", "display_name": "Ilya Konyukhov", "link": "https://stackoverflow.com/users/3046905/ilya-konyukhov"}, "edited": false, "score": 0, "creation_date": 1539112056, "post_id": 52727722, "comment_id": 92380763, "body": "Great! What is your question then?"}, {"owner": {"reputation": 692, "user_id": 3431546, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/796590c1b3b4f390753560dbc09910ca?s=128&d=identicon&r=PG", "display_name": "Sahidur Rahman Suman", "link": "https://stackoverflow.com/users/3431546/sahidur-rahman-suman"}, "reply_to_user": {"reputation": 2496, "user_id": 3046905, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/692eb06201cbed91c3c6a9cf11ed0511?s=128&d=identicon&r=PG", "display_name": "Ilya Konyukhov", "link": "https://stackoverflow.com/users/3046905/ilya-konyukhov"}, "edited": false, "score": 0, "creation_date": 1539112112, "post_id": 52727722, "comment_id": 92380781, "body": "It&#39;s one kind of Q&amp;A."}, {"owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 0, "creation_date": 1539151274, "post_id": 52727722, "comment_id": 92391850, "body": "Does this answer solve your question above? If not, paste it in the question itself and mention what exactly is the issue?"}], "tags": [], "owner": {"reputation": 692, "user_id": 3431546, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/796590c1b3b4f390753560dbc09910ca?s=128&d=identicon&r=PG", "display_name": "Sahidur Rahman Suman", "link": "https://stackoverflow.com/users/3431546/sahidur-rahman-suman"}, "is_accepted": false, "score": -1, "last_activity_date": 1539111653, "creation_date": 1539111653, "answer_id": 52727722, "question_id": 52727721, "link": "https://stackoverflow.com/questions/52727721/sort-json-hierarchical-data-in-ruby/52727722#52727722", "title": "Sort json hierarchical data in Ruby", "body": "<p>I write a method with the sort of whole hierarchical data recursively - </p>\n\n<pre><code>require 'json'\n\ndef sort_tree_array(data, attr, asc = true)\n  data = data.is_a?(String) ? JSON.parse(data) : data\n  sorted = data.sort_by {|elem| [elem[attr]]}\n  sorted = asc ? sorted : sorted.reverse\n  sorted.each{ |item| item[:children] = sort_tree_array(item[:children], attr, asc) if (item[:children].nil? ? [] : item[:children]).size &gt; 0 }\n  sorted\nend\n\n\n# Get the sorted array with ascending order name\np sort_tree_array(data, :name)\n\n# Get the sorted array with descending order name\np sort_tree_array(data, :name, false)\n\n# Get the sorted array with ascending order created_at_in_sec\np sort_tree_array(data, :created_at_in_sec)\n\n# Get the sorted array with descending order created_at_in_sec\np sort_tree_array(data, :created_at_in_sec, false)\n</code></pre>\n"}], "owner": {"reputation": 692, "user_id": 3431546, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/796590c1b3b4f390753560dbc09910ca?s=128&d=identicon&r=PG", "display_name": "Sahidur Rahman Suman", "link": "https://stackoverflow.com/users/3431546/sahidur-rahman-suman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 95, "favorite_count": 0, "answer_count": 1, "score": -4, "last_activity_date": 1539111653, "creation_date": 1539111653, "question_id": 52727721, "link": "https://stackoverflow.com/questions/52727721/sort-json-hierarchical-data-in-ruby", "title": "Sort json hierarchical data in Ruby", "body": "<p>Here is a hierarchical data set.     </p>\n\n<pre><code>data = [\n    {\n        name: \"Project success\",\n        owner_name: \"Nusaiba S.\",\n        created_at_in_sec: 1539089917,\n        children: [\n            {\n                name: \"Develop MVP\",\n                parent_name: \"Project success\",\n                owner_name: \"Nusaiba S.\",\n                created_at_in_sec: 1539105107,\n                children: [\n                    {\n                        name: \"Requirement Analysis\",\n                        parent_name: \"Develop MVP\",\n                        owner_name: \"Nusaiba S.\",\n                        created_at_in_sec: 1539105117\n                    },\n                    {\n                        name: \"New Feature Implement\",\n                        parent_name: \"Develop MVP\",\n                        owner_name: \"Nusaiba S.\",\n                        created_at_in_sec: 1539105119\n                    }\n                ]\n            },\n            {\n                name: \"Added Task to Jira\",\n                parent_name: \"Project success\",\n                owner_name: \"Nusaiba S.\",\n                created_at_in_sec: 1539090003\n            },\n            {\n                name: \"Meeting with Client\",\n                parent_name: \"Project success\",\n                owner_name: \"Jawad S.\",\n                created_at_in_sec: 1539104779\n\n            }\n        ]\n    }\n]\n</code></pre>\n\n<p>I want to sort this hierarchical data with following requirement -</p>\n\n<ul>\n<li>Sorting should be ascending or descending order</li>\n<li>Sorting is need for every sub-level</li>\n<li>Sorting should be done with a specific key</li>\n</ul>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "ruby-on-rails-5", "active-model-serializers"], "answers": [{"tags": [], "owner": {"reputation": 1480, "user_id": 4741620, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/13911648aa5b99a6542494b4c8fcbc38?s=128&d=identicon&r=PG&f=1", "display_name": "jedi", "link": "https://stackoverflow.com/users/4741620/jedi"}, "is_accepted": true, "score": 2, "last_activity_date": 1539115656, "creation_date": 1539115656, "answer_id": 52728566, "question_id": 52726919, "link": "https://stackoverflow.com/questions/52726919/activemodel-serializer-access-attributes-as-methods/52728566#52728566", "title": "ActiveModel Serializer: access attributes as methods", "body": "<p>Attribute methods are no longer defined on the serializer, and must be explicitly accessed through object</p>\n\n<pre><code>class MySerializer\n  attributes :foo, :bar\n\n  def foo\n    bar + 1 # bar does not work, needs to be object.bar in 0.10\n  end\nend\n</code></pre>\n\n<p>See <a href=\"https://github.com/rails-api/active_model_serializers/blob/v0.10.6/docs/howto/upgrade_from_0_8_to_0_10.md#010-breaking-changes\" rel=\"nofollow noreferrer\">https://github.com/rails-api/active_model_serializers/blob/v0.10.6/docs/howto/upgrade_from_0_8_to_0_10.md#010-breaking-changes</a></p>\n"}], "owner": {"reputation": 1689, "user_id": 3791027, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/a240d8bb3d536a1ecc16adf28f7b1feb?s=128&d=identicon&r=PG&f=1", "display_name": "RockNinja", "link": "https://stackoverflow.com/users/3791027/rockninja"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 657, "favorite_count": 0, "accepted_answer_id": 52728566, "answer_count": 1, "score": 0, "last_activity_date": 1539115656, "creation_date": 1539108258, "last_edit_date": 1539108940, "question_id": 52726919, "link": "https://stackoverflow.com/questions/52726919/activemodel-serializer-access-attributes-as-methods", "title": "ActiveModel Serializer: access attributes as methods", "body": "<p>How can I access the defined attributes in a serializer as a methods?</p>\n\n<pre><code>class Test &lt; ActiveModel::Serializer \n  attributes :a, :b, :c\nend\n\ns = Test.new(Object)\ns.a\n</code></pre>\n\n<p>I need this for delegation, it used to be available in version 0.8/</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 25, "user_id": 4673707, "user_type": "registered", "profile_image": "https://graph.facebook.com/1068722963156031/picture?type=large", "display_name": "Manoj", "link": "https://stackoverflow.com/users/4673707/manoj"}, "edited": false, "score": 0, "creation_date": 1539124337, "post_id": 52728703, "comment_id": 92385496, "body": "Thank you for the detailed reply. My customization is not limited to just CSS, my project needs to change the complete theme and even to play with the results from the database. Unfortunately, there is no API documentation for the Hyrax so I have to face the complications."}, {"owner": {"reputation": 25, "user_id": 4673707, "user_type": "registered", "profile_image": "https://graph.facebook.com/1068722963156031/picture?type=large", "display_name": "Manoj", "link": "https://stackoverflow.com/users/4673707/manoj"}, "edited": false, "score": 0, "creation_date": 1539124575, "post_id": 52728703, "comment_id": 92385547, "body": "I&#39;ve another Idea,what do you think about editing the view files before installation so that it would be easy. But to check the changes I might have to install it lot of times."}, {"owner": {"reputation": 3571, "user_id": 185310, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/063c98fb1df33c7a4ea70a7d829f83c6?s=128&d=identicon&r=PG&f=1", "display_name": "Mike K.", "link": "https://stackoverflow.com/users/185310/mike-k"}, "reply_to_user": {"reputation": 25, "user_id": 4673707, "user_type": "registered", "profile_image": "https://graph.facebook.com/1068722963156031/picture?type=large", "display_name": "Manoj", "link": "https://stackoverflow.com/users/4673707/manoj"}, "edited": false, "score": 0, "creation_date": 1539126178, "post_id": 52728703, "comment_id": 92385892, "body": "It would not be unusual to override views in the generated app, I guess I was just pointing out the maintenance of it."}, {"owner": {"reputation": 25, "user_id": 4673707, "user_type": "registered", "profile_image": "https://graph.facebook.com/1068722963156031/picture?type=large", "display_name": "Manoj", "link": "https://stackoverflow.com/users/4673707/manoj"}, "edited": false, "score": 0, "creation_date": 1540233834, "post_id": 52728703, "comment_id": 92780687, "body": "Thanks mike that was really helpful. I have changed the views part of the Hyrax, and I know we have to edit the homepage controller and the CRUD of hyrax is not in typical ruby syntax but it is linked to solr. So, I have tried looking in to Solr for field &#39;date_uploaded&#39; as mentioned in the file"}], "tags": [], "owner": {"reputation": 3571, "user_id": 185310, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/063c98fb1df33c7a4ea70a7d829f83c6?s=128&d=identicon&r=PG&f=1", "display_name": "Mike K.", "link": "https://stackoverflow.com/users/185310/mike-k"}, "is_accepted": true, "score": 0, "last_activity_date": 1539116219, "creation_date": 1539116219, "answer_id": 52728703, "question_id": 52726575, "link": "https://stackoverflow.com/questions/52726575/editing-ui-of-samvera-hyrax/52728703#52728703", "title": "Editing UI of Samvera Hyrax", "body": "<p>Assuming you followed the Hyrax installation procedure detailed on the github wiki <a href=\"https://github.com/samvera/hyrax#creating-a-hyrax-based-app\" rel=\"nofollow noreferrer\">here</a>, what you'll notice looking at your routes in <code>config/routes.rb</code> is that Hyrax is mounted as a rails engine.  So using the template you didn't clone Hyrax, but you created a new rails app that uses Hyrax as an Engine. If you haven't used Engines before, it may be worth reading up on them <a href=\"https://guides.rubyonrails.org/engines.html\" rel=\"nofollow noreferrer\">here</a>.  This is why you don't see all the views from the Hyrax project in the application you've generated using their template.  </p>\n\n<p>You can override views from the Engine by creating the <code>view</code> in your own project in the same path as it is in Hyrax.  You may want to do some additional digging to determine if this is a path you really want to go down, as it can get complicated to maintain overridden views, and there may be alternative strategies that can accomplish some of what you want to do with CSS or themeing within Hyrax.  It may depend on how much you want to override and how custom a theme you are trying to achieve.</p>\n"}], "owner": {"reputation": 25, "user_id": 4673707, "user_type": "registered", "profile_image": "https://graph.facebook.com/1068722963156031/picture?type=large", "display_name": "Manoj", "link": "https://stackoverflow.com/users/4673707/manoj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 143, "favorite_count": 0, "accepted_answer_id": 52728703, "answer_count": 1, "score": 1, "last_activity_date": 1539116219, "creation_date": 1539106726, "question_id": 52726575, "link": "https://stackoverflow.com/questions/52726575/editing-ui-of-samvera-hyrax", "title": "Editing UI of Samvera Hyrax", "body": "<p>I wanted to customize the UI of Samvera Hyrax application and I've built a HTML template. Now, I want to replace the old UI with the content of my HTML files, when I say it on github I found view files where I can edit the application to implement my design. But after installing I could not find any files under views. Though I found <strong>application.html.erb.</strong> </p>\n\n<p>I cannot figure out where <code>&lt;%= yeild %&gt;</code> has been pointing and when I replaced all the content with my home page code. It made no changes in the hyrax working. </p>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "mongoid"], "comments": [{"owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 0, "creation_date": 1539150050, "post_id": 52726415, "comment_id": 92391363, "body": "Did you try something?"}], "answers": [{"comments": [{"owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 0, "creation_date": 1539150084, "post_id": 52727461, "comment_id": 92391373, "body": "assign it to the user association*"}], "tags": [], "owner": {"reputation": 653, "user_id": 7148414, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KMhlJ.jpg?s=128&g=1", "display_name": "baseballlover723", "link": "https://stackoverflow.com/users/7148414/baseballlover723"}, "is_accepted": true, "score": 1, "last_activity_date": 1539110591, "creation_date": 1539110591, "answer_id": 52727461, "question_id": 52726415, "link": "https://stackoverflow.com/questions/52726415/how-to-change-model-owner-in-ruby-in-rails/52727461#52727461", "title": "How to change model owner in Ruby in rails?", "body": "<p>you should be able to just assign it to the user field and then save it to persist it to the database</p>\n\n<pre><code>project = Project.find(project_id)\nnew_owner = User.find(new_owner_id)\nproject.user = new_owner\nproject.save\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 399, "user_id": 2952784, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb2b676404d68e77e98277dd820db9e6?s=128&d=identicon&r=PG&f=1", "display_name": "TLbiz", "link": "https://stackoverflow.com/users/2952784/tlbiz"}, "is_accepted": false, "score": 0, "last_activity_date": 1539151767, "creation_date": 1539151767, "answer_id": 52733646, "question_id": 52726415, "link": "https://stackoverflow.com/questions/52726415/how-to-change-model-owner-in-ruby-in-rails/52733646#52733646", "title": "How to change model owner in Ruby in rails?", "body": "<p>i did not use mongoid long time ago, but you can try running these commands on your <code>rails console</code>:</p>\n\n<pre><code>project.user = owner_object;\nproject.save\n</code></pre>\n\n<p>OR </p>\n\n<pre><code>project.user_id = owner_id\nproject.save\n</code></pre>\n"}], "owner": {"reputation": 169, "user_id": 2572248, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/eZnef.jpg?s=128&g=1", "display_name": "Anton Ipatov", "link": "https://stackoverflow.com/users/2572248/anton-ipatov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 200, "favorite_count": 0, "accepted_answer_id": 52727461, "answer_count": 2, "score": 1, "last_activity_date": 1543105166, "creation_date": 1539106143, "last_edit_date": 1539168252, "question_id": 52726415, "link": "https://stackoverflow.com/questions/52726415/how-to-change-model-owner-in-ruby-in-rails", "title": "How to change model owner in Ruby in rails?", "body": "<p>I use Ruby on rails and mongoid.\nI have two models User.rb and Project.rb. If I want to change owner of Project model, how should I do this?</p>\n\n<p>User.rb</p>\n\n<pre><code>class User\n  include Mongoid::Document\n\n  field :name, type: String\n  has_many :projects, dependent: :destroy\nend\n</code></pre>\n\n<p>Project.rb</p>\n\n<pre><code>class Project\n  include Mongoid::Document\n\n  field :title, type: String\n\n  validates :user_id, presence: true\n\n  belongs_to :user, touch: true\nend\n</code></pre>\n\n<p>in form.html.erb i have select mode</p>\n\n<pre><code>  &lt;div class=\"form-group\"&gt;\n    &lt;%= f.collection_select :user_id, User.all, :id, :name, class: 'form-control' %&gt;\n  &lt;/div&gt;\n</code></pre>\n"}, {"tags": ["ruby", "chef-infra", "test-kitchen"], "answers": [{"comments": [{"owner": {"reputation": 715, "user_id": 6928292, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/a0nBD.jpg?s=128&g=1", "display_name": "aphexlog", "link": "https://stackoverflow.com/users/6928292/aphexlog"}, "edited": false, "score": 0, "creation_date": 1539109827, "post_id": 52727236, "comment_id": 92379726, "body": "I receive the following error when adding that line: undefined method `include&#39; for cookbook: java, recipe: windows :Chef::Recipe"}, {"owner": {"reputation": 2496, "user_id": 3046905, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/692eb06201cbed91c3c6a9cf11ed0511?s=128&d=identicon&r=PG", "display_name": "Ilya Konyukhov", "link": "https://stackoverflow.com/users/3046905/ilya-konyukhov"}, "reply_to_user": {"reputation": 715, "user_id": 6928292, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/a0nBD.jpg?s=128&g=1", "display_name": "aphexlog", "link": "https://stackoverflow.com/users/6928292/aphexlog"}, "edited": false, "score": 0, "creation_date": 1539110833, "post_id": 52727236, "comment_id": 92380206, "body": "Interesting. How about this one: <code>Chef::Resource.send(:include, Windows::Helper)</code> ?"}, {"owner": {"reputation": 715, "user_id": 6928292, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/a0nBD.jpg?s=128&g=1", "display_name": "aphexlog", "link": "https://stackoverflow.com/users/6928292/aphexlog"}, "edited": false, "score": 0, "creation_date": 1539111252, "post_id": 52727236, "comment_id": 92380406, "body": "I edited my question to include the following: I have tried both Chef::Resource.send(:include, Windows::Helper) and ::Chef::Resource.send(:include, Windows::Helper) resulting in the following error:  value is a required property"}], "tags": [], "owner": {"reputation": 2496, "user_id": 3046905, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/692eb06201cbed91c3c6a9cf11ed0511?s=128&d=identicon&r=PG", "display_name": "Ilya Konyukhov", "link": "https://stackoverflow.com/users/3046905/ilya-konyukhov"}, "is_accepted": false, "score": 1, "last_activity_date": 1539109727, "creation_date": 1539109727, "answer_id": 52727236, "question_id": 52726277, "link": "https://stackoverflow.com/questions/52726277/ruby-returns-uninitialized-constant-error-when-trying-to-include-a-module-within/52727236#52727236", "title": "Ruby returns uninitialized constant error when trying to include a module within a chef recipe", "body": "<p>Try this</p>\n\n<pre><code>include Windows::Helper\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 715, "user_id": 6928292, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/a0nBD.jpg?s=128&g=1", "display_name": "aphexlog", "link": "https://stackoverflow.com/users/6928292/aphexlog"}, "is_accepted": true, "score": -1, "last_activity_date": 1539638454, "creation_date": 1539638454, "answer_id": 52824926, "question_id": 52726277, "link": "https://stackoverflow.com/questions/52726277/ruby-returns-uninitialized-constant-error-when-trying-to-include-a-module-within/52824926#52824926", "title": "Ruby returns uninitialized constant error when trying to include a module within a chef recipe", "body": "<p>Inserting the following line resolved this issue for me:</p>\n\n<p><code>::Chef::Recipe.send(:include, Windows::Helper)</code></p>\n\n<p>This allows me to use the variables following module from the windows cookbook:</p>\n\n<pre><code>module Windows\n  module Helper\n...\n{Variable}\n  {Other_variable}\n...\n</code></pre>\n"}], "owner": {"reputation": 715, "user_id": 6928292, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/a0nBD.jpg?s=128&g=1", "display_name": "aphexlog", "link": "https://stackoverflow.com/users/6928292/aphexlog"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 332, "favorite_count": 1, "accepted_answer_id": 52824926, "answer_count": 2, "score": 0, "last_activity_date": 1539638454, "creation_date": 1539105594, "last_edit_date": 1539110321, "question_id": 52726277, "link": "https://stackoverflow.com/questions/52726277/ruby-returns-uninitialized-constant-error-when-trying-to-include-a-module-within", "title": "Ruby returns uninitialized constant error when trying to include a module within a chef recipe", "body": "<p>I have a <code>java/recipes/windows</code> recipe that uses a method called <code>win_friendly_path</code> and it doesn't work because <code>win_friendly_path</code> is not yet defined.</p>\n\n<p><code>win_friendly_path</code> is however defined in the <code>../windows/libraries/windows_helper.rb</code> as follows:</p>\n\n<pre><code>module Windows\n  module Helper\ndef win_friendly_path(path)\n      path.gsub(::File::SEPARATOR, ::File::ALT_SEPARATOR || '\\\\') if path\n    end\n</code></pre>\n\n<p>I already have my <code>berksfile</code> and <code>metadata.rb</code> setup in the <code>java (./)</code> recipe to depend on the <code>windows</code> cookbook.</p>\n\n<p>I'm not sure how to include this module so right now I am trying to just use <code>include WindowsHelper</code> in the <code>java/cookbook/windows</code> recipe and receiving this error:</p>\n\n<p><code>uninitialized constant #&lt;Class:#&lt;Chef::Recipe:0x00000000029a2188&gt;&gt;::WindowsHelper</code></p>\n\n<p>I have tried several variations of this and now feel like I have spent way too much time troubleshooting the issue so any help is appreciated.</p>\n\n<p>UPDATE: plugging in this line <code>::Chef::Resource.send(:include, Windows::Helper)</code> to my <code>java/recipes/windows</code> recipe gives me the following error: </p>\n\n<pre><code>Chef::Exceptions::ValidationFailed\n       ----------------------------------\n       value is a required property\n</code></pre>\n"}, {"tags": ["ruby", "mongodb"], "answers": [{"tags": [], "owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "is_accepted": false, "score": 1, "last_activity_date": 1539151775, "last_edit_date": 1539151775, "creation_date": 1539150944, "answer_id": 52733467, "question_id": 52725341, "link": "https://stackoverflow.com/questions/52725341/mongodb-ruby-driver-edit-collectionview-instance-filter/52733467#52733467", "title": "Mongodb ruby driver: edit Collection::View instance filter", "body": "<p>I don't think you can. <code>.filter</code> is a method which takes arguments.  It is not a hash.<br>\nSee <a href=\"https://github.com/mongodb/mongo-ruby-driver/blob/master/examples/query.rb\" rel=\"nofollow noreferrer\">examples</a> \nand also search <a href=\"https://github.com/mongodb/mongo-ruby-driver/search?q=def+find&amp;unscoped_q=def+find\" rel=\"nofollow noreferrer\">the code</a></p>\n\n<p>However you might be able to do something like:</p>\n\n<pre><code>view = lambda { |hash|  client[:users].find(hash) }\n\nsearch_params = { name: \"Sally\" }\n\nview.(search_params)\n\nview.(search_params.merge!({foo: 'bar'})) \n</code></pre>\n"}], "owner": {"reputation": 4708, "user_id": 1827284, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/cOtJk.png?s=128&g=1", "display_name": "drinor", "link": "https://stackoverflow.com/users/1827284/drinor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 36, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1539151775, "creation_date": 1539101888, "question_id": 52725341, "link": "https://stackoverflow.com/questions/52725341/mongodb-ruby-driver-edit-collectionview-instance-filter", "title": "Mongodb ruby driver: edit Collection::View instance filter", "body": "<p>When I create Collection::View instance with:</p>\n\n<pre><code>client = Mongo::Client.new('mongodb://127.0.0.1:27017/test')\n\nview = client[:users].find( { name: \"Sally\" } )\n=&gt; #&lt;Mongo::Collection::View:0x69824029475340 namespace='test.users' @filter={\"name\" =&gt; \"Sally\"} @options={}&gt;\n</code></pre>\n\n<p>How I can change <code>filter</code> hash of this instance later? This does not work:</p>\n\n<pre><code>view.filter.merge!(\"age\" =&gt; 30)\n=&gt; #FrozenError: can't modify frozen BSON::Document\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5", "minitest"], "answers": [{"comments": [{"owner": {"reputation": 7056, "user_id": 16642, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/2J6d2.jpg?s=128&g=1", "display_name": "Mark Kadlec", "link": "https://stackoverflow.com/users/16642/mark-kadlec"}, "edited": false, "score": 0, "creation_date": 1539350232, "post_id": 52730729, "comment_id": 92482149, "body": "Thanks @Masa!  Couple of questions, why does your test array have <code>true, false, and 5</code>?  Is there any significance?  Also, what does the variable <code>tobe</code> represent?"}, {"owner": {"reputation": 930, "user_id": 3577922, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eURpm.jpg?s=128&g=1", "display_name": "Masa Sakano", "link": "https://stackoverflow.com/users/3577922/masa-sakano"}, "reply_to_user": {"reputation": 7056, "user_id": 16642, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/2J6d2.jpg?s=128&g=1", "display_name": "Mark Kadlec", "link": "https://stackoverflow.com/users/16642/mark-kadlec"}, "edited": false, "score": 0, "creation_date": 1539358822, "post_id": 52730729, "comment_id": 92487155, "body": "The variable <code>tobe</code> represents the value the block returns, which is yielded in the method <code>show_benefits_section?</code>. Your method <code>show_benefits_section?</code> (as in your post) returns whatever value returned from the block as it is. My code in the answer tests when true/false/5 is returned from the given block, the method <code>show_benefits_section?</code> certainly returns true/false/5, respectively.  That is what the last paragraph of my answer explains."}, {"owner": {"reputation": 930, "user_id": 3577922, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eURpm.jpg?s=128&g=1", "display_name": "Masa Sakano", "link": "https://stackoverflow.com/users/3577922/masa-sakano"}, "reply_to_user": {"reputation": 7056, "user_id": 16642, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/2J6d2.jpg?s=128&g=1", "display_name": "Mark Kadlec", "link": "https://stackoverflow.com/users/16642/mark-kadlec"}, "edited": false, "score": 0, "creation_date": 1539359059, "post_id": 52730729, "comment_id": 92487283, "body": "Correction. Your method <code>show_benefits_section?</code> returns whatever value returned from the block as it is, <b>if</b> the block is read.  If the block is not read, that is, <code>if has_any_context?</code> fails, nil is returned. The last part of the test in my answer tests the case when nil is returned."}], "tags": [], "owner": {"reputation": 930, "user_id": 3577922, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eURpm.jpg?s=128&g=1", "display_name": "Masa Sakano", "link": "https://stackoverflow.com/users/3577922/masa-sakano"}, "is_accepted": true, "score": 1, "last_activity_date": 1539128854, "creation_date": 1539128854, "answer_id": 52730729, "question_id": 52725243, "link": "https://stackoverflow.com/questions/52725243/what-is-the-proper-way-to-write-a-minitest-test-for-a-method-that-yields/52730729#52730729", "title": "What is the proper way to write a Minitest test for a method that yields?", "body": "<p>First, your code is testing nothing and it always succeeds no matter what.  Try this, which succeeds, to demonstrate the point:</p>\n\n<pre><code>[1].each do |first=nil, second=2|\n  assert_equal(1, first)\n  assert_equal(2, second)\nend\n</code></pre>\n\n<p>Let me exaplain; the variable <code>second</code> is always 2, no matter what, as the method <code>each</code> does not affect it and the default is set to be 2.  By contrast, the default value <code>nil</code> for <code>first</code> is ignored, beucase <code>each</code> passes an object.</p>\n\n<p>Here is an improved code snippet to test your case.\nIt tests both the cases where the block returns true and false, and both the cases where <code>has_any_context?</code> is true and false.  I do not think there is a general way to validate specifically the yielded value from the block. Instead you validate what the methods returns.</p>\n\n<pre><code># Test: :has_any_context? == true \ntest_class.stub(:has_any_context?, true) do\n  # Test: a block must be given.\n  assert_raises(LocalJumpError) { test_class.show_benefits_section? }\n\n  # Test: yield\n  [true, false, 5].each do |tobe|\n    # If 5 is given, 5 is returned.\n    ret = test_class.show_benefits_section? do\n      tobe\n    end\n    assert_equal(tobe, ret)\n  end\nend\n\n# Test: :has_any_context? == false\ntest_class.stub(:has_any_context?, false) do\n  ret = test_class.show_benefits_section?{true}\n  assert_nil(ret)\nend\n</code></pre>\n\n<p>Note that your method <code>show_benefits_section?</code> returns whatever returned from the block.  My example above tests it, too, by giving a random value, 5. In Ruby's convention, a method name ending with '?' should return either true or false (though there are exceptions like <code>FileTest.size?</code>).  If you want to follow the convention, the easiest way is perhaps to rewrite the relevant part as</p>\n\n<pre><code>!!yield if has_any_context?\n</code></pre>\n\n<p>You can confirm the test above fails now, once you have done this modification.</p>\n"}], "owner": {"reputation": 7056, "user_id": 16642, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/2J6d2.jpg?s=128&g=1", "display_name": "Mark Kadlec", "link": "https://stackoverflow.com/users/16642/mark-kadlec"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 321, "favorite_count": 1, "accepted_answer_id": 52730729, "answer_count": 1, "score": 1, "last_activity_date": 1539128854, "creation_date": 1539101497, "question_id": 52725243, "link": "https://stackoverflow.com/questions/52725243/what-is-the-proper-way-to-write-a-minitest-test-for-a-method-that-yields", "title": "What is the proper way to write a Minitest test for a method that yields?", "body": "<p>I have a method in a class defined as follows:</p>\n\n<pre><code>  def show_benefits_section?\n    yield if has_any_context?\n  end\n</code></pre>\n\n<p>I would like to write a test around this, so far I have this (which works):</p>\n\n<pre><code>  test_class.stub(:has_any_context?, true) do\n    test_class.show_benefits_section? do |show_section=true|\n      assert_equal(show_section, true)\n    end\n  end\n</code></pre>\n\n<p>I'm just not sure if this is the best way to test that method...\nAnd how do I test for the negative condition?</p>\n\n<p>Any help would be appreciated!</p>\n"}, {"tags": ["ruby", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "edited": false, "score": 1, "creation_date": 1539102129, "post_id": 52725149, "comment_id": 92376072, "body": "FYI <code>if @past_shifts.each</code> is not doing anything useful or correct. The result of <code>.each</code> is just the collection itself, so that <code>if</code> can never be <code>false</code>. Calling <code>.save</code> inside the <code>each</code> is also not safe, the <code>.save</code> method just returns <code>false</code> on failure, and you&#39;re silently ignoring the return value. You probably want a <code>.save!</code> which will raise an exception on failure."}, {"owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 0, "creation_date": 1539104401, "post_id": 52725149, "comment_id": 92377120, "body": "Have a look at this gem which might help you achieve your end goal  <a href=\"https://github.com/amoeba-rb/amoeba\" rel=\"nofollow noreferrer\">github.com/amoeba-rb/amoeba</a>"}, {"owner": {"reputation": 177, "user_id": 10095385, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-AQNUq2AuhX0/AAAAAAAAAAI/AAAAAAAACeM/W_ToTsU2GKw/photo.jpg?sz=128", "display_name": "Sachin", "link": "https://stackoverflow.com/users/10095385/sachin"}, "edited": false, "score": 0, "creation_date": 1539104905, "post_id": 52725149, "comment_id": 92377360, "body": ".save! outside of the loop?"}], "answers": [{"comments": [{"owner": {"reputation": 2496, "user_id": 3046905, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/692eb06201cbed91c3c6a9cf11ed0511?s=128&d=identicon&r=PG", "display_name": "Ilya Konyukhov", "link": "https://stackoverflow.com/users/3046905/ilya-konyukhov"}, "reply_to_user": {"reputation": 177, "user_id": 10095385, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-AQNUq2AuhX0/AAAAAAAAAAI/AAAAAAAACeM/W_ToTsU2GKw/photo.jpg?sz=128", "display_name": "Sachin", "link": "https://stackoverflow.com/users/10095385/sachin"}, "edited": false, "score": 0, "creation_date": 1539104939, "post_id": 52725356, "comment_id": 92377389, "body": "I don&#39;t think your <code>ActiveRecord</code> object for <code>Shift</code> model has a <code>new</code> method. So it won&#39;t work at all. Please check the docs: <a href=\"https://guides.rubyonrails.org/active_record_basics.html\" rel=\"nofollow noreferrer\">guides.rubyonrails.org/active_record_basics.html</a>"}, {"owner": {"reputation": 177, "user_id": 10095385, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-AQNUq2AuhX0/AAAAAAAAAAI/AAAAAAAACeM/W_ToTsU2GKw/photo.jpg?sz=128", "display_name": "Sachin", "link": "https://stackoverflow.com/users/10095385/sachin"}, "edited": false, "score": 0, "creation_date": 1539104986, "post_id": 52725356, "comment_id": 92377417, "body": "I guess I answered my own question, Shift.new resulted in undefined method undefined method `new&#39; for #&lt;Shift:0x00007fba82717bd8&gt;"}, {"owner": {"reputation": 177, "user_id": 10095385, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-AQNUq2AuhX0/AAAAAAAAAAI/AAAAAAAACeM/W_ToTsU2GKw/photo.jpg?sz=128", "display_name": "Sachin", "link": "https://stackoverflow.com/users/10095385/sachin"}, "edited": false, "score": 0, "creation_date": 1539105333, "post_id": 52725356, "comment_id": 92377582, "body": "Shift.new worked as well, but it&#39;s again creating exact copies with same start and end times.  I want those fields to return nil or empty until pasted back in."}], "tags": [], "owner": {"reputation": 2496, "user_id": 3046905, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/692eb06201cbed91c3c6a9cf11ed0511?s=128&d=identicon&r=PG", "display_name": "Ilya Konyukhov", "link": "https://stackoverflow.com/users/3046905/ilya-konyukhov"}, "is_accepted": true, "score": 0, "last_activity_date": 1539101945, "creation_date": 1539101945, "answer_id": 52725356, "question_id": 52725149, "link": "https://stackoverflow.com/questions/52725149/how-to-update-attributes-while-doing-a-duplicate-rails/52725356#52725356", "title": "How to update attributes while doing a duplicate Rails", "body": "<p>Just curious - are you sure <code>params</code> for your <code>copy</code> method contains values for <code>start_time</code> and <code>end_time</code>? If so, why not to use them directly:</p>\n\n<pre><code>shift.start_time = params['start_time']\nshift.end_time   = params['end_time']\n</code></pre>\n\n<p>With use <code>shift_params</code> you will also update other 3 attributes: <code>:calendar_id, :capacity, :published</code>. Not sure if this is necessary in this case.</p>\n\n<p>Using <code>shift.update</code> method, in this case, is not reasonable. It works with existing record and saves updated attributes to the database. In your case the record is new, and you save all the changes with calling <code>shift.save</code> later.</p>\n"}], "owner": {"reputation": 177, "user_id": 10095385, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-AQNUq2AuhX0/AAAAAAAAAAI/AAAAAAAACeM/W_ToTsU2GKw/photo.jpg?sz=128", "display_name": "Sachin", "link": "https://stackoverflow.com/users/10095385/sachin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 384, "favorite_count": 0, "accepted_answer_id": 52725356, "answer_count": 1, "score": 1, "last_activity_date": 1539101945, "creation_date": 1539101133, "question_id": 52725149, "link": "https://stackoverflow.com/questions/52725149/how-to-update-attributes-while-doing-a-duplicate-rails", "title": "How to update attributes while doing a duplicate Rails", "body": "<p>We are creating a scheduling app and attempting to create a copy/paste function for schedules from week to week.  I am trying to figure out how to duplicate a schedule for certain period of time, while updating the attributes upon paste.  Right now I can copy the schedule, but when running it on postman, the dates and times stay the exact same (as we would expect with a .dup.)  I believe it would be best to set the start/end times to nil and then upon paste maybe the attributes get updated at that time?  </p>\n\n<p>Here is the function I have so far:</p>\n\n<pre><code>def copy\n    set_calendar\n    if params[\"start_date\"] &amp;&amp; params[\"end_date\"]\n       start_date = params[\"start_date\"].to_date\n       end_date = params[\"end_date\"].to_date\n        if @calendar.users.owners.include?(current_user) || @calendar.users.managers.include?(current_user)\n            @past_shifts = Shift.where(calendar_id: @calendar.id, start_time: start_date.beginning_of_day .. end_date.end_of_day).to_a\n            if\n              @past_shifts.each do |past_shift|\n                shift = past_shift.dup\n                shift.users = past_shift.users\n                shift.update(shift_params)\n                shift.save\n              end\n             render json: \"copied\", status: :ok\n            else\n             render json: @usershift.errors, status: :uprocessable_entity\n            end\n        else\n            render json: (\"You do not have access to copy shifts\"), status: :unauthorized\n        end\n    end\nend\n</code></pre>\n\n<p>The shift.update(shift_params) is the part that needs to update the start and end times.  Here are the shift params:</p>\n\n<pre><code>def shift_params\n    params.permit(:start_time, :end_time, :calendar_id, :capacity, :published)\nend\n</code></pre>\n\n<p>As far as relationship set ups, this current method is being created in the shifts controller.  Shift has many users through usershifts, user has many shifts through usershifts, and usershift model belongs to both.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rails-activerecord"], "comments": [{"owner": {"reputation": 5312, "user_id": 6535997, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/10156345016155058/picture?type=large", "display_name": "Mark", "link": "https://stackoverflow.com/users/6535997/mark"}, "reply_to_user": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "edited": false, "score": 0, "creation_date": 1539099639, "post_id": 52724562, "comment_id": 92374790, "body": "Thank you - if you post that as an answer I&#39;ll accept it when it lets me :)"}], "answers": [{"tags": [], "owner": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "is_accepted": true, "score": 2, "last_activity_date": 1539099675, "creation_date": 1539099675, "answer_id": 52724753, "question_id": 52724562, "link": "https://stackoverflow.com/questions/52724562/rails-joining-active-record-relations/52724753#52724753", "title": "Rails - joining active record relations", "body": "<p>If you're using plain sql you should use pluralize table names.</p>\n\n<p>Change: <code>image.workflow_state</code> to <code>images.workflow_state</code></p>\n"}, {"comments": [{"owner": {"reputation": 5312, "user_id": 6535997, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/10156345016155058/picture?type=large", "display_name": "Mark", "link": "https://stackoverflow.com/users/6535997/mark"}, "edited": false, "score": 0, "creation_date": 1539100230, "post_id": 52724759, "comment_id": 92375114, "body": "I didn&#39;t realise it could be written as that - have used the other answer but thanks for the info! :)"}], "tags": [], "owner": {"reputation": 2496, "user_id": 3046905, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/692eb06201cbed91c3c6a9cf11ed0511?s=128&d=identicon&r=PG", "display_name": "Ilya Konyukhov", "link": "https://stackoverflow.com/users/3046905/ilya-konyukhov"}, "is_accepted": false, "score": 2, "last_activity_date": 1539099693, "creation_date": 1539099693, "answer_id": 52724759, "question_id": 52724562, "link": "https://stackoverflow.com/questions/52724562/rails-joining-active-record-relations/52724759#52724759", "title": "Rails - joining active record relations", "body": "<blockquote>\n  <p>I have the following that works but takes a few seconds to execute:</p>\n</blockquote>\n\n<p>The query from <code>self.published</code> method fetches all record with <code>status: STATUS_ACTIVE</code>, and then scans the resulting array, fetching those ones which have given <code>image.workflow_state</code>. So it fetches results which will be thrown away with <code>select</code>, which is a waste of resources. What is worse, for every row it creates an ActiveRecord object and makes an additional request to the database to fetch its <code>image</code> association. It's notorious <a href=\"https://guides.rubyonrails.org/active_record_querying.html#eager-loading-associations\" rel=\"nofollow noreferrer\">N + 1 pattern problem</a>.</p>\n\n<p>To fix it you need to rewrite your query as</p>\n\n<pre><code>  joins(:image).where(status: STATUS_ACTIVE, images: { workflow_state: Publishable::Meta.published_key } )\n</code></pre>\n"}], "owner": {"reputation": 5312, "user_id": 6535997, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/10156345016155058/picture?type=large", "display_name": "Mark", "link": "https://stackoverflow.com/users/6535997/mark"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 0, "accepted_answer_id": 52724753, "answer_count": 2, "score": 1, "last_activity_date": 1539101344, "creation_date": 1539099019, "last_edit_date": 1539101344, "question_id": 52724562, "link": "https://stackoverflow.com/questions/52724562/rails-joining-active-record-relations", "title": "Rails - joining active record relations", "body": "<p>I'm trying to follow through <a href=\"https://guides.rubyonrails.org/active_record_querying.html#specifying-conditions-on-the-joined-tables\" rel=\"nofollow noreferrer\">https://guides.rubyonrails.org/active_record_querying.html#specifying-conditions-on-the-joined-tables</a></p>\n\n<p>I have a class, ImageCollection, that has a status which can be 'active'. This class belongs to one Image, which has an attribute called 'workflow_state'.</p>\n\n<p>I have the following that works but takes a few seconds to execute:</p>\n\n<pre><code>def self.published\n  where(status: STATUS_ACTIVE).select { |x| x.image.workflow_state == Publishable::Meta.published_key }\nend\n</code></pre>\n\n<p>The following does not work:</p>\n\n<pre><code>scope :published, lambda {\n  where(status: STATUS_ACTIVE).joins(:image).where(\n    'image.workflow_state = ?', Publishable::Meta.published_key\n  )\n}\n</code></pre>\n\n<p>And returns:</p>\n\n<pre><code>ActiveRecord::StatementInvalid: Mysql2::Error: Unknown column 'image.workflow_state' in 'where clause': SELECT  `image_containers`.* FROM `image_containers` INNER JOIN `images` ON `images`.`id` = `image_containers`.`image_id` WHERE `image_containers`.`status` = 'active' AND (image.workflow_state = 'published') ORDER BY `image.containers`.`id` ASC LIMIT 1\n</code></pre>\n\n<p>I'm confused as the image table has a workflow_state</p>\n\n<p>Any help is greatly appreciated</p>\n"}, {"tags": ["ruby"], "answers": [{"comments": [{"owner": {"reputation": 859, "user_id": 7227222, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ec1eb8473ab73ded224fbbdc2414005?s=128&d=identicon&r=PG&f=1", "display_name": "AlbertMunichMar", "link": "https://stackoverflow.com/users/7227222/albertmunichmar"}, "edited": false, "score": 0, "creation_date": 1539166231, "post_id": 52724692, "comment_id": 92400118, "body": "oh I see first point. Second point: I thought the attr_reader &amp; attr_writer methods are created, since I can use later on <code>ubser_hash.anything = &quot;hola&quot;</code>. That&#39;s why I thought that they were created. The <code>def anything=(arg)</code> method should be somehow created, right?"}, {"owner": {"reputation": 2386, "user_id": 2933305, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/223ba397b1fef4a7bec7bfc59ca74f11?s=128&d=identicon&r=PG", "display_name": "maicher", "link": "https://stackoverflow.com/users/2933305/maicher"}, "reply_to_user": {"reputation": 859, "user_id": 7227222, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ec1eb8473ab73ded224fbbdc2414005?s=128&d=identicon&r=PG&f=1", "display_name": "AlbertMunichMar", "link": "https://stackoverflow.com/users/7227222/albertmunichmar"}, "edited": false, "score": 0, "creation_date": 1539166590, "post_id": 52724692, "comment_id": 92400356, "body": "Yes, but I would advice against doing so, because metaprogramming is tricky. It looks like you are trying to build something similar to OpenStruct. Do you know OpenStruct? <a href=\"https://ruby-doc.org/stdlib-2.5.1/libdoc/ostruct/rdoc/OpenStruct.html\" rel=\"nofollow noreferrer\">ruby-doc.org/stdlib-2.5.1/libdoc/ostruct/rdoc/OpenStruct.htm&zwnj;&#8203;l</a>"}, {"owner": {"reputation": 859, "user_id": 7227222, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ec1eb8473ab73ded224fbbdc2414005?s=128&d=identicon&r=PG&f=1", "display_name": "AlbertMunichMar", "link": "https://stackoverflow.com/users/7227222/albertmunichmar"}, "edited": false, "score": 1, "creation_date": 1539166755, "post_id": 52724692, "comment_id": 92400467, "body": "No worries, never gonna use it for production, just learning for fun. I still don&#39;t see the point of making things so complex. Maybe in some years. I checked OpenStruct, nice one. Thanks a lot for your help, the first point helped me a lot."}], "tags": [], "owner": {"reputation": 2386, "user_id": 2933305, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/223ba397b1fef4a7bec7bfc59ca74f11?s=128&d=identicon&r=PG", "display_name": "maicher", "link": "https://stackoverflow.com/users/2933305/maicher"}, "is_accepted": false, "score": 0, "last_activity_date": 1539099461, "creation_date": 1539099461, "answer_id": 52724692, "question_id": 52724253, "link": "https://stackoverflow.com/questions/52724253/why-do-i-not-see-instance-variable-after-creation-attr-reader/52724692#52724692", "title": "Why do I not see instance variable after creation? (attr reader)", "body": "<p>You don't see the instance variable in the first inspect. You expect it the be there because in previous line you call <code>uber_hash.anything</code>, right?</p>\n\n<p>Well, the <code>uber_hash.anything</code> call evaluates the <code>else</code> in the <code>#method_missing</code> conditional: <code>self.instance_variable_get(\"@#{m}\")</code> - that's why no instance variable is set.</p>\n\n<p>Also, in <code>#method_missing</code> conditional you print two messages: <code>puts \"create attr writer\"</code> and <code>puts \"create attr reader\"</code> - they are wrong. It should be: <code>puts \"create instance variable\"</code> and <code>puts \"read instance variable\"</code></p>\n"}, {"tags": [], "owner": {"reputation": 930, "user_id": 3577922, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eURpm.jpg?s=128&g=1", "display_name": "Masa Sakano", "link": "https://stackoverflow.com/users/3577922/masa-sakano"}, "is_accepted": false, "score": 0, "last_activity_date": 1539450630, "last_edit_date": 1539450630, "creation_date": 1539449631, "answer_id": 52795202, "question_id": 52724253, "link": "https://stackoverflow.com/questions/52724253/why-do-i-not-see-instance-variable-after-creation-attr-reader/52795202#52795202", "title": "Why do I not see instance variable after creation? (attr reader)", "body": "<blockquote>\n  <p>After creating the first instance variable anything, with the method <code>instnace_variable_set</code>, I understand that I create an attr_reader right?</p>\n</blockquote>\n\n<p>No, that is not correct.  Your class never creates (or runs) <code>attr_reader</code>.  Try this (after running your example commands)</p>\n\n<pre><code>p( uber_hash.methods - Object.new.methods )\n</code></pre>\n\n<p>and you see only the methods additionally defined in your class be <code>[:color, :color=, :method_missing]</code> in your class.</p>\n\n<p>The method <code>:color</code> is defined because of <code>attr_accessor :color</code>.  Remember <code>attr_accessor</code> etc is just a shortcut to define methods.\nBy contrast, the method <code>:anything</code> is <strong>not</strong> defined because your class has never defined the method.\nInstead, in your class, every time a method <code>uber_hash.anything</code> is called, <code>uber_hash.method_missing</code> is run and does the job, that is, manipulation or viewing of the instance variable <code>@anything</code>.</p>\n\n<p>Secondly, while <code>instance_variable_set</code> does set a value to an instance variable (and creates it if it does not exists), <code>instance_variable_get</code> refers to it only if it exists, else returns nil and does <em>not</em> create an instance variable. That is why <code>@anything</code> is created after <code>instance_variable_set</code>, but not just after <code>instance_variable_get</code>.  Try this to see the point (after your definition of the class).</p>\n\n<pre><code>class UberHash\n  def test_pr\n    print 'color='; p instance_variable_get(\"@color\")\n    print 'other='; p instance_variable_get(\"@other\")\n    p instance_variables  # =&gt; @other is not defined\n    print 'other='; p instance_variable_set(\"@other\", 99)\n    p instance_variables  # =&gt; @other is NOW defined\n  end\nend\n\nuber_hash.test_pr\n</code></pre>\n\n<p>Consequently, the behaviour you see is perfectly legitimate.</p>\n\n<p>Note: <a href=\"https://stackoverflow.com/questions/11925855/get-all-instance-variables-declared-in-class/11925908#11925908\">this past answer</a> explains it.</p>\n"}], "owner": {"reputation": 859, "user_id": 7227222, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ec1eb8473ab73ded224fbbdc2414005?s=128&d=identicon&r=PG&f=1", "display_name": "AlbertMunichMar", "link": "https://stackoverflow.com/users/7227222/albertmunichmar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 134, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1539450630, "creation_date": 1539097840, "question_id": 52724253, "link": "https://stackoverflow.com/questions/52724253/why-do-i-not-see-instance-variable-after-creation-attr-reader", "title": "Why do I not see instance variable after creation? (attr reader)", "body": "<p>I have following code, which creates instance variables dynamically. If the instance variable does not exist, I use the no method error to create the <code>attr_reader</code> and <code>attr_writer</code> methods dynamically. All works fine, but I don't understand why I don't see the <code>@anything</code> instance variable after having created the first <code>attr_reader</code>.</p>\n\n<pre><code>require \"pry-byebug\"\n\nclass UberHash\n  attr_accessor :color\n  def initialize\n    @color = nil\n  end\n\n  def method_missing(m, *args, &amp;block)\n    if m.match(/=/)\n      puts \"create attr writer\"\n      self.instance_variable_set(\"@#{m[0..-2]}\", args[0])\n    else\n      puts \"create attr reader\"\n      self.instance_variable_get(\"@#{m}\")\n    end\n  end\nend\n\nuber_hash = UberHash.new\nputs \"call 1 ..................\"\np \"uber_hash.anything: #{uber_hash.anything}\"\np \"uber_hash.inspect: #{uber_hash.inspect}\"\np uber_hash.anything = \"hola\"\np uber_hash.inspect\n</code></pre>\n\n<p>With following results:</p>\n\n<pre><code>call 1 ..................\ncreate attr reader\n\"uber_hash.anything: \"\n\"uber_hash.inspect: #&lt;UberHash:0x00007f851b1e41a8 @color=nil&gt;\"\n\"#&lt;UberHash:0x00007f851b1e41a8 @color=nil&gt;\"\ncreate attr writer\n\"hola\"\n\"#&lt;UberHash:0x00007f851b1e41a8 @color=nil, @anything=\\\"hola\\\"&gt;\"\n</code></pre>\n\n<p>After creating the first instance variable <code>anything</code>, with the method instnace_variable_set, I understand that I create an attr_reader right?</p>\n\n<p>Why do I not see the <code>@anything</code> instance variable if I inspect the instance?</p>\n"}, {"tags": ["ruby", "ruby-on-rails-3", "rubygems"], "comments": [{"owner": {"reputation": 689, "user_id": 10280525, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ar3KN.jpg?s=128&g=1", "display_name": "Nifriz", "link": "https://stackoverflow.com/users/10280525/nifriz"}, "edited": false, "score": 0, "creation_date": 1539096636, "post_id": 52723624, "comment_id": 92373038, "body": "Which OS do you have? Anyhow, try this <a href=\"https://www.ruby-lang.org/en/documentation/installation/\" rel=\"nofollow noreferrer\">link</a>"}, {"owner": {"reputation": 15, "user_id": 10298861, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Q0xzO-ovRtg/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaORhFzxWCSSZvoMKHVD2apAELLPWA/mo/photo.jpg?sz=128", "display_name": "The Digital Academy", "link": "https://stackoverflow.com/users/10298861/the-digital-academy"}, "reply_to_user": {"reputation": 689, "user_id": 10280525, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ar3KN.jpg?s=128&g=1", "display_name": "Nifriz", "link": "https://stackoverflow.com/users/10280525/nifriz"}, "edited": false, "score": 0, "creation_date": 1539096863, "post_id": 52723624, "comment_id": 92373177, "body": "@Nifriz windows 10"}, {"owner": {"reputation": 15, "user_id": 10298861, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Q0xzO-ovRtg/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaORhFzxWCSSZvoMKHVD2apAELLPWA/mo/photo.jpg?sz=128", "display_name": "The Digital Academy", "link": "https://stackoverflow.com/users/10298861/the-digital-academy"}, "reply_to_user": {"reputation": 689, "user_id": 10280525, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ar3KN.jpg?s=128&g=1", "display_name": "Nifriz", "link": "https://stackoverflow.com/users/10280525/nifriz"}, "edited": false, "score": 0, "creation_date": 1539100337, "post_id": 52723624, "comment_id": 92375166, "body": "anyone there to answer??"}], "owner": {"reputation": 15, "user_id": 10298861, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Q0xzO-ovRtg/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaORhFzxWCSSZvoMKHVD2apAELLPWA/mo/photo.jpg?sz=128", "display_name": "The Digital Academy", "link": "https://stackoverflow.com/users/10298861/the-digital-academy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 158, "favorite_count": 0, "closed_date": 1539100445, "answer_count": 0, "score": 0, "last_activity_date": 1539095840, "creation_date": 1539095840, "question_id": 52723624, "link": "https://stackoverflow.com/questions/52723624/how-to-upgrade-from-ruby-2-2-6-to-2-3-0", "closed_reason": "Duplicate", "title": "how to upgrade from ruby 2.2.6 to 2.3.0", "body": "<p>I have installed rails installer which have <strong>rails 5.0.7</strong> and <strong>ruby 2.2.6</strong>.Now i want to install \"<strong>Capybara</strong>\" gem which requires at least ruby 2.3.0.How can i upgrade ruby version from <strong>2.2.6 to 2.3.0</strong>?</p>\n"}, {"tags": ["javascript", "ruby-on-rails", "ruby", "clockpicker"], "answers": [{"tags": [], "owner": {"reputation": 85, "user_id": 10441922, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe858ee8c4f32ff9953c2b6cf98b90ec?s=128&d=identicon&r=PG&f=1", "display_name": "Markos Tzetzis", "link": "https://stackoverflow.com/users/10441922/markos-tzetzis"}, "is_accepted": true, "score": 0, "last_activity_date": 1539946116, "creation_date": 1539946116, "answer_id": 52890867, "question_id": 52723086, "link": "https://stackoverflow.com/questions/52723086/how-to-get-value-from-clockpicker-and-pass-it-to-my-form-f-date-field/52890867#52890867", "title": "How to get value from clockpicker and pass it to my form f.date_field?", "body": "<p>I find the answer , well a not JS way to do this is to add to input\n   ... <strong>name='game[time]</strong> ..></p>\n\n<p>and then take this value to the contoller like this </p>\n\n<pre><code>    #get time from clock and concatenate it with date to start_time\n    date = params['game']['start_time']\n    time = params['game']['time']\n    @game.start_time = Time.parse(\"#{date} #{time}\") + 3.hours\n</code></pre>\n\n<p>the +3.hours is because it took the hour in a different timezone from mine and i had to adjust it.</p>\n"}], "owner": {"reputation": 85, "user_id": 10441922, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe858ee8c4f32ff9953c2b6cf98b90ec?s=128&d=identicon&r=PG&f=1", "display_name": "Markos Tzetzis", "link": "https://stackoverflow.com/users/10441922/markos-tzetzis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 311, "favorite_count": 0, "accepted_answer_id": 52890867, "answer_count": 1, "score": 0, "last_activity_date": 1539946116, "creation_date": 1539094132, "last_edit_date": 1539094513, "question_id": 52723086, "link": "https://stackoverflow.com/questions/52723086/how-to-get-value-from-clockpicker-and-pass-it-to-my-form-f-date-field", "title": "How to get value from clockpicker and pass it to my form f.date_field?", "body": "<p>I am building an app that needs user input for a date and a hour of an event.I am using a form_for helper and get the values before f.submit.I am able to take the date correctly through the f.date_field that gives u a build in minicalendar and i am using a bootstrap clockpicker to get the hour.Here is the problem.I want to get the hour and concatenate it to f.date_field because it takes a default hour 00:00:00 UTC but i dont know how to do it.I am a beginner at Javascript .Any help would be appreciated. This is my code:</p>\n\n<p><strong>html with some ruby</strong></p>\n\n<pre><code> &lt;div class=\"input-group clockpicker\" data- \n  placement=\"right\" data-align=\"top\" data- \n  autoclose=\"true\"&gt;\n   &lt;input id =\"time1\" type=\"text\" class=\"form-control\" \n    value=\"\u03ce\u03c1\u03b1..\"&gt;\n   &lt;span class=\"input-group-addon\"&gt;\n    &lt;span class=\"glyphicon glyphicon-time\"&gt;&lt;/span&gt;\n\n  &lt;/span&gt;\n &lt;/div&gt;\n\n\n&lt;br&gt;\n\n&lt;div id=\"newgame\"&gt;\n  &lt;%= f.submit \"New Game\" %&gt;\n&lt;/div&gt;\n</code></pre>\n\n   \n\n<p><strong>and here is my script for clockpicker</strong></p>\n\n<pre><code>&lt;script type=\"text/javascript\" src=\"dist/bootstrap- \n              clockpicker.min.js\"&gt;&lt;/script&gt;\n&lt;script type=\"text/javascript\"&gt;\n       $('.clockpicker').clockpicker();\n&lt;/script&gt;\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "answers": [{"tags": [], "owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "is_accepted": true, "score": 0, "last_activity_date": 1539094299, "creation_date": 1539094299, "answer_id": 52723135, "question_id": 52723025, "link": "https://stackoverflow.com/questions/52723025/grep-command-in-ruby-during-iteration/52723135#52723135", "title": "Grep command in ruby during iteration", "body": "<p>Ruby way of writing that would be something like this:</p>\n\n<pre><code>File.open('list').each_line.grep(/phone/i)\n</code></pre>\n\n<p>Documentation:</p>\n\n<ul>\n<li><a href=\"http://ruby-doc.org/core-2.5.1/IO.html#method-i-each_line\" rel=\"nofollow noreferrer\">IO#each_line</a></li>\n<li><a href=\"https://ruby-doc.org/core-2.5.1/Enumerable.html#method-i-grep\" rel=\"nofollow noreferrer\">Enumerable#grep</a></li>\n</ul>\n"}], "owner": {"reputation": 7, "user_id": 10008716, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-7NWGSSan85U/AAAAAAAAAAI/AAAAAAAAAOc/KG4eIedeVOM/photo.jpg?sz=128", "display_name": "Karthikraj", "link": "https://stackoverflow.com/users/10008716/karthikraj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 95, "favorite_count": 0, "accepted_answer_id": 52723135, "answer_count": 1, "score": 0, "last_activity_date": 1539094299, "creation_date": 1539093918, "question_id": 52723025, "link": "https://stackoverflow.com/questions/52723025/grep-command-in-ruby-during-iteration", "title": "Grep command in ruby during iteration", "body": "<p>Can do it in shell script , but wanted to try in ruby since learning, please help on this.</p>\n\n<p>While trying to grep the the variable (<code>line</code>)from the file (<code>list</code>) during iteration , no output is showing </p>\n\n<p>However while doing separately like below , can see the output  </p>\n\n<pre><code>Getting Output: (\"Phone\" is one of the lines present in the file)\n\n    value = `grep -i \"phone\" list`\n        puts value\n\n No Output:\n     File.open(\"list\") do |f|\n            f.each_line do |line|\n            puts line\n            value = `grep -i \"line\" list`\n    #       puts list\n            puts value\n            end\n    end\n</code></pre>\n"}, {"tags": ["ruby", "syntax"], "comments": [{"owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "edited": false, "score": 1, "creation_date": 1539082308, "post_id": 52719237, "comment_id": 92363786, "body": "Ruby allows semicolon as statement separator, it just doesn&#39;t require it. It is typically enough to just place statements into separate lines."}, {"owner": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "edited": false, "score": 2, "creation_date": 1539083211, "post_id": 52719237, "comment_id": 92364314, "body": "About the UPD: Yeah, Ruby is different language than Java with different syntax rules."}, {"owner": {"reputation": 31, "user_id": 10321907, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-sW-6QqUPX_M/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaOLNLmIAvUyqXQW7mZs9zOUPdILaQ/mo/photo.jpg?sz=128", "display_name": "Katerina Sychik", "link": "https://stackoverflow.com/users/10321907/katerina-sychik"}, "edited": false, "score": 0, "creation_date": 1539083768, "post_id": 52719237, "comment_id": 92364653, "body": "thanks, i understand this. but your comment doesn&#39;t answer my questions"}, {"owner": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "edited": false, "score": 2, "creation_date": 1539083964, "post_id": 52719237, "comment_id": 92364782, "body": "Amadan&#39;s comment does answer your original question."}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 2, "creation_date": 1539084486, "post_id": 52719237, "comment_id": 92365052, "body": "Ruby != Java. Semicolons are optional, and curly brackets have a different meaning."}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1539084544, "post_id": 52719237, "comment_id": 92365085, "body": "Also, whitespace is (mostly) optional (e.g. you can intent arbitrary amounts, although 2 spaces is the convention) - So your question is like saying &quot;this isn&#39;t valid in Python; why does it work in Ruby?&quot;."}], "answers": [{"comments": [{"owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "edited": false, "score": 0, "creation_date": 1539087126, "post_id": 52719824, "comment_id": 92366605, "body": "&quot;The following is invalid (with ruby &gt;= 2.3 this seems to be fine though)&quot; - there is almost always an implied statement separator before <code>end</code>, even if it looks weird if you&#39;re not used to it (and you&#39;re not used to it likely because few people write like that; because most people would think it looks weird, and here we go :P ) Some of it was legal even in olden days, but inconsistent (I just checked my 1.9, <code>class Dog end</code> and <code>def bark end</code> are illegal but <code>if true; puts &quot;woo&quot; end</code>, <code>3.times do puts &quot;moo&quot; end</code> and <code>def bark() end</code> are fine). BTW <code>def bark end</code> is still illegal. Go figure."}, {"owner": {"reputation": 4127, "user_id": 4231385, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d89a541a4609cafea3957e4cdfcca50f?s=128&d=identicon&r=PG&f=1", "display_name": "cremno", "link": "https://stackoverflow.com/users/4231385/cremno"}, "edited": false, "score": 0, "creation_date": 1539092099, "post_id": 52719824, "comment_id": 92370021, "body": "The 2.3 change was intentional but experimental. It also makes sense as <code>module Dog end</code> was already valid and even for a class requiring a semicolon (or newline) was unnecessary."}], "tags": [], "owner": {"reputation": 1905, "user_id": 232838, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8342950f34a66d9ec7cfe10b33d5494c?s=128&d=identicon&r=PG", "display_name": "koffeinfrei", "link": "https://stackoverflow.com/users/232838/koffeinfrei"}, "is_accepted": true, "score": 2, "last_activity_date": 1539084052, "creation_date": 1539084052, "answer_id": 52719824, "question_id": 52719237, "link": "https://stackoverflow.com/questions/52719237/semicolon-after-class-declaration/52719824#52719824", "title": "Semicolon after class declaration", "body": "<blockquote>\n  <p>Explain, please, why is it possible to use semicolon here and what does ';' means in these context </p>\n</blockquote>\n\n<p>Semicolons are optional in ruby. This means that using them is actually valid syntax. Having a newline is enough for the parser to separate statements. In the case you mention the semicolon is required as there is not a newline as a statement separator.</p>\n\n<p>The following are all valid options:</p>\n\n<pre><code>class Dog\nend\n\nclass Dog;\nend\n\nclass Dog; end\n</code></pre>\n\n<p>The following is invalid (with ruby >= 2.3 this seems to be fine though)</p>\n\n<pre><code>class Dog end\n</code></pre>\n\n<p>For class or method definitions with an empty body using one line with a semicolon separator is idiomatic in ruby. If you have a body you'll usually omit the semicolon and place the content on a new line.</p>\n\n<blockquote>\n  <p>UPD: I thought, that</p>\n</blockquote>\n\n<p>Java's syntax parser doesn't allow as much flexibility as ruby's parser. A class or method definition in Java is strict syntax which requires a newline after the class name and before the definition body.</p>\n"}, {"tags": [], "owner": {"reputation": 135, "user_id": 5060168, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc9e87dba4abc728d6995b6b47f4da0e?s=128&d=identicon&r=PG&f=1", "display_name": "Praveen Dhawan", "link": "https://stackoverflow.com/users/5060168/praveen-dhawan"}, "is_accepted": false, "score": 2, "last_activity_date": 1539084335, "creation_date": 1539084335, "answer_id": 52719909, "question_id": 52719237, "link": "https://stackoverflow.com/questions/52719237/semicolon-after-class-declaration/52719909#52719909", "title": "Semicolon after class declaration", "body": "<p>Like Java and C, you can use <code>;</code> to terminate statements. However, this is only required if you put more than 1 statements on the same line. According to the ruby convention, you should omit writing <code>;</code> in all other cases.</p>\n\n<p>For Eg.</p>\n\n<p><code>[1, 2, 3].each { |num| incremented = num + 1; puts incremented }</code> is valid ruby statement. </p>\n\n<p>Similarly you can use the same concept to create classes and methods in ruby.</p>\n\n<p><code>class Abc; end</code> => will create a class named <code>Abc</code></p>\n\n<p><code>def abc; end</code> => will create method named <code>abc</code></p>\n\n<p>All of these above examples are valid ruby statements.</p>\n"}], "owner": {"reputation": 31, "user_id": 10321907, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-sW-6QqUPX_M/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaOLNLmIAvUyqXQW7mZs9zOUPdILaQ/mo/photo.jpg?sz=128", "display_name": "Katerina Sychik", "link": "https://stackoverflow.com/users/10321907/katerina-sychik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 405, "favorite_count": 0, "accepted_answer_id": 52719824, "answer_count": 2, "score": -1, "last_activity_date": 1539148356, "creation_date": 1539082187, "last_edit_date": 1539148356, "question_id": 52719237, "link": "https://stackoverflow.com/questions/52719237/semicolon-after-class-declaration", "title": "Semicolon after class declaration", "body": "<p>I thought that Ruby code:</p>\n\n<pre><code>class ClassName ..some methods.. end\n</code></pre>\n\n<p>is the same as Java code:</p>\n\n<pre><code>class ClassName { ..some methods.. }\n</code></pre>\n\n<p>And if I write in Java:</p>\n\n<pre><code>class ClassName; { ..some methods.. }\n</code></pre>\n\n<p>or:</p>\n\n<pre><code>class ClassName { ; ..some methods.. }\n</code></pre>\n\n<p>it raises an error. Therefore, I expected that Ruby code:</p>\n\n<pre><code>class Dog; end\n</code></pre>\n\n<p>would raise an exception like <code>unexpected symbol ';'</code>. However, the Ruby code works. Please explain why it is possible to use a semicolon here, and what <code>;</code> means in this context.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "git", "rspec"], "comments": [{"owner": {"reputation": 429, "user_id": 7617687, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ceb0c380ac37c50e2c0574e0ecec1a98?s=128&d=identicon&r=PG&f=1", "display_name": "radoAngelov", "link": "https://stackoverflow.com/users/7617687/radoangelov"}, "edited": false, "score": 0, "creation_date": 1539089384, "post_id": 52718988, "comment_id": 92368072, "body": "Seems like you checked out a commit, not a branch. Try switching the working branch to <code>master</code> for example and try again."}, {"owner": {"reputation": 55797, "user_id": 7976758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/512cfbaf98d63ca4acd57b2df792aec6?s=128&d=identicon&r=PG", "display_name": "phd", "link": "https://stackoverflow.com/users/7976758/phd"}, "edited": false, "score": 0, "creation_date": 1539102794, "post_id": 52718988, "comment_id": 92376386, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/5772192/how-can-i-reconcile-detached-head-with-master-origin\">How can I reconcile detached HEAD with master/origin?</a>"}, {"owner": {"reputation": 1439, "user_id": 2993674, "user_type": "registered", "accept_rate": 6, "profile_image": "https://i.stack.imgur.com/TRxII.jpg?s=128&g=1", "display_name": "rld", "link": "https://stackoverflow.com/users/2993674/rld"}, "edited": false, "score": 0, "creation_date": 1539179518, "post_id": 52718988, "comment_id": 92408366, "body": "I already tried this and don&#39;t work&#39;s. But I send a email for the autor of the book and I downloaded again the app and work&#39;s fine. Anyway thank&#39;s guys!"}], "owner": {"reputation": 1439, "user_id": 2993674, "user_type": "registered", "accept_rate": 6, "profile_image": "https://i.stack.imgur.com/TRxII.jpg?s=128&g=1", "display_name": "rld", "link": "https://stackoverflow.com/users/2993674/rld"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 41, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1539081410, "creation_date": 1539081410, "question_id": 52718988, "link": "https://stackoverflow.com/questions/52718988/testing-with-rspec-i-have-a-message-like-git-detached-head-state", "title": "Testing with RSpec I have a message like git detached HEAD state", "body": "<p>I'm reading a book Multitenancy with Rails 2nd edition. \nAnd I configured the project and then testing with RSpec.\nThe results of the test was <code>48 examples, 0 failures</code>.\nBut before that I take a lot of messages who I don't like to show any time I will run the tests. The long messages is like this:</p>\n\n<pre><code>    bundle exec rspec spec\n.Note: checking out '97753aca66e66a54d496db7c743b93c231b54378'.\n\nYou are in 'detached HEAD' state. You can look around, make experimental\nchanges and commit them, and you can discard any commits you make in this\nstate without impacting any branches by performing another checkout.\n\nIf you want to create a new branch to retain commits you create, you may\ndo so (now or later) by using -b with the checkout command again. Example:\n\n  git checkout -b &lt;new-branch-name&gt;\n\n.Note: checking out '97753aca66e66a54d496db7c743b93c231b54378'.\n\nYou are in 'detached HEAD' state. You can look around, make experimental\nchanges and commit them, and you can discard any commits you make in this\nstate without impacting any branches by performing another checkout.\n\nIf you want to create a new branch to retain commits you create, you may\ndo so (now or later) by using -b with the checkout command again. Example:\n\n  git checkout -b &lt;new-branch-name&gt;\n\n.Note: checking out '97753aca66e66a54d496db7c743b93c231b54378'.\n\nYou are in 'detached HEAD' state. You can look around, make experimental\nchanges and commit them, and you can discard any commits you make in this\nstate without impacting any branches by performing another checkout.\n\nIf you want to create a new branch to retain commits you create, you may\ndo so (now or later) by using -b with the checkout command again. Example:\n\n  git checkout -b &lt;new-branch-name&gt;\n\n.Note: checking out '97753aca66e66a54d496db7c743b93c231b54378'.\n\nYou are in 'detached HEAD' state. You can look around, make experimental\nchanges and commit them, and you can discard any commits you make in this\nstate without impacting any branches by performing another checkout.\n\nIf you want to create a new branch to retain commits you create, you may\ndo so (now or later) by using -b with the checkout command again. Example:\n\n  git checkout -b &lt;new-branch-name&gt;\n\n.Note: checking out '97753aca66e66a54d496db7c743b93c231b54378'.\n\nYou are in 'detached HEAD' state. You can look around, make experimental\nchanges and commit them, and you can discard any commits you make in this\nstate without impacting any branches by performing another checkout.\n\nIf you want to create a new branch to retain commits you create, you may\ndo so (now or later) by using -b with the checkout command again. Example:\n\n  git checkout -b &lt;new-branch-name&gt;\n\n.Note: checking out '97753aca66e66a54d496db7c743b93c231b54378'.\n\nYou are in 'detached HEAD' state. You can look around, make experimental\nchanges and commit them, and you can discard any commits you make in this\nstate without impacting any branches by performing another checkout.\n\nIf you want to create a new branch to retain commits you create, you may\ndo so (now or later) by using -b with the checkout command again. Example:\n\n  git checkout -b &lt;new-branch-name&gt;\n\n.Note: checking out '97753aca66e66a54d496db7c743b93c231b54378'.\n\nYou are in 'detached HEAD' state. You can look around, make experimental\nchanges and commit them, and you can discard any commits you make in this\nstate without impacting any branches by performing another checkout.\n\nIf you want to create a new branch to retain commits you create, you may\ndo so (now or later) by using -b with the checkout command again. Example:\n\n  git checkout -b &lt;new-branch-name&gt;\n\n.Note: checking out '97753aca66e66a54d496db7c743b93c231b54378'.\n\nYou are in 'detached HEAD' state. You can look around, make experimental\nchanges and commit them, and you can discard any commits you make in this\nstate without impacting any branches by performing another checkout.\n\nIf you want to create a new branch to retain commits you create, you may\ndo so (now or later) by using -b with the checkout command again. Example:\n\n  git checkout -b &lt;new-branch-name&gt;\n\n.Note: checking out '97753aca66e66a54d496db7c743b93c231b54378'.\n\nYou are in 'detached HEAD' state. You can look around, make experimental\nchanges and commit them, and you can discard any commits you make in this\nstate without impacting any branches by performing another checkout.\n\nIf you want to create a new branch to retain commits you create, you may\ndo so (now or later) by using -b with the checkout command again. Example:\n\n  git checkout -b &lt;new-branch-name&gt;\n\n.Note: checking out '97753aca66e66a54d496db7c743b93c231b54378'.\n\nYou are in 'detached HEAD' state. You can look around, make experimental\nchanges and commit them, and you can discard any commits you make in this\nstate without impacting any branches by performing another checkout.\n\nIf you want to create a new branch to retain commits you create, you may\ndo so (now or later) by using -b with the checkout command again. Example:\n\n  git checkout -b &lt;new-branch-name&gt;\n\n.......Note: checking out '97753aca66e66a54d496db7c743b93c231b54378'.\n\nYou are in 'detached HEAD' state. You can look around, make experimental\nchanges and commit them, and you can discard any commits you make in this\nstate without impacting any branches by performing another checkout.\n\nIf you want to create a new branch to retain commits you create, you may\ndo so (now or later) by using -b with the checkout command again. Example:\n\n  git checkout -b &lt;new-branch-name&gt;\n\n..................Note: checking out '97753aca66e66a54d496db7c743b93c231b54378'.\n\nYou are in 'detached HEAD' state. You can look around, make experimental\nchanges and commit them, and you can discard any commits you make in this\nstate without impacting any branches by performing another checkout.\n\nIf you want to create a new branch to retain commits you create, you may\ndo so (now or later) by using -b with the checkout command again. Example:\n\n  git checkout -b &lt;new-branch-name&gt;\n\n.Note: checking out '97753aca66e66a54d496db7c743b93c231b54378'.\n\nYou are in 'detached HEAD' state. You can look around, make experimental\nchanges and commit them, and you can discard any commits you make in this\nstate without impacting any branches by performing another checkout.\n\nIf you want to create a new branch to retain commits you create, you may\ndo so (now or later) by using -b with the checkout command again. Example:\n\n  git checkout -b &lt;new-branch-name&gt;\n\n.Note: checking out '97753aca66e66a54d496db7c743b93c231b54378'.\n\nYou are in 'detached HEAD' state. You can look around, make experimental\nchanges and commit them, and you can discard any commits you make in this\nstate without impacting any branches by performing another checkout.\n\nIf you want to create a new branch to retain commits you create, you may\ndo so (now or later) by using -b with the checkout command again. Example:\n\n  git checkout -b &lt;new-branch-name&gt;\n\n.Note: checking out '97753aca66e66a54d496db7c743b93c231b54378'.\n\nYou are in 'detached HEAD' state. You can look around, make experimental\nchanges and commit them, and you can discard any commits you make in this\nstate without impacting any branches by performing another checkout.\n\nIf you want to create a new branch to retain commits you create, you may\ndo so (now or later) by using -b with the checkout command again. Example:\n\n  git checkout -b &lt;new-branch-name&gt;\n\n.Note: checking out '97753aca66e66a54d496db7c743b93c231b54378'.\n\nYou are in 'detached HEAD' state. You can look around, make experimental\nchanges and commit them, and you can discard any commits you make in this\nstate without impacting any branches by performing another checkout.\n\nIf you want to create a new branch to retain commits you create, you may\ndo so (now or later) by using -b with the checkout command again. Example:\n\n  git checkout -b &lt;new-branch-name&gt;\n\n.Note: checking out '97753aca66e66a54d496db7c743b93c231b54378'.\n\nYou are in 'detached HEAD' state. You can look around, make experimental\nchanges and commit them, and you can discard any commits you make in this\nstate without impacting any branches by performing another checkout.\n\nIf you want to create a new branch to retain commits you create, you may\ndo so (now or later) by using -b with the checkout command again. Example:\n\n  git checkout -b &lt;new-branch-name&gt;\n\n.Note: checking out '97753aca66e66a54d496db7c743b93c231b54378'.\n\nYou are in 'detached HEAD' state. You can look around, make experimental\nchanges and commit them, and you can discard any commits you make in this\nstate without impacting any branches by performing another checkout.\n\nIf you want to create a new branch to retain commits you create, you may\ndo so (now or later) by using -b with the checkout command again. Example:\n\n  git checkout -b &lt;new-branch-name&gt;\n\n.Note: checking out '97753aca66e66a54d496db7c743b93c231b54378'.\n\nYou are in 'detached HEAD' state. You can look around, make experimental\nchanges and commit them, and you can discard any commits you make in this\nstate without impacting any branches by performing another checkout.\n\nIf you want to create a new branch to retain commits you create, you may\ndo so (now or later) by using -b with the checkout command again. Example:\n\n  git checkout -b &lt;new-branch-name&gt;\n\n.Note: checking out '97753aca66e66a54d496db7c743b93c231b54378'.\n\nYou are in 'detached HEAD' state. You can look around, make experimental\nchanges and commit them, and you can discard any commits you make in this\nstate without impacting any branches by performing another checkout.\n\nIf you want to create a new branch to retain commits you create, you may\ndo so (now or later) by using -b with the checkout command again. Example:\n\n  git checkout -b &lt;new-branch-name&gt;\n\n.Note: checking out '97753aca66e66a54d496db7c743b93c231b54378'.\n\nYou are in 'detached HEAD' state. You can look around, make experimental\nchanges and commit them, and you can discard any commits you make in this\nstate without impacting any branches by performing another checkout.\n\nIf you want to create a new branch to retain commits you create, you may\ndo so (now or later) by using -b with the checkout command again. Example:\n\n  git checkout -b &lt;new-branch-name&gt;\n\n.Note: checking out '97753aca66e66a54d496db7c743b93c231b54378'.\n\nYou are in 'detached HEAD' state. You can look around, make experimental\nchanges and commit them, and you can discard any commits you make in this\nstate without impacting any branches by performing another checkout.\n\nIf you want to create a new branch to retain commits you create, you may\ndo so (now or later) by using -b with the checkout command again. Example:\n\n  git checkout -b &lt;new-branch-name&gt;\n\n.Note: checking out '97753aca66e66a54d496db7c743b93c231b54378'.\n\nYou are in 'detached HEAD' state. You can look around, make experimental\nchanges and commit them, and you can discard any commits you make in this\nstate without impacting any branches by performing another checkout.\n\nIf you want to create a new branch to retain commits you create, you may\ndo so (now or later) by using -b with the checkout command again. Example:\n\n  git checkout -b &lt;new-branch-name&gt;\n\n.Note: checking out '97753aca66e66a54d496db7c743b93c231b54378'.\n\nYou are in 'detached HEAD' state. You can look around, make experimental\nchanges and commit them, and you can discard any commits you make in this\nstate without impacting any branches by performing another checkout.\n\nIf you want to create a new branch to retain commits you create, you may\ndo so (now or later) by using -b with the checkout command again. Example:\n\n  git checkout -b &lt;new-branch-name&gt;\n\n.\n\nFinished in 17.62 seconds (files took 4.05 seconds to load)\n48 examples, 0 failures\n</code></pre>\n\n<p>What I need to do for don't show this anymore?</p>\n"}, {"tags": ["javascript", "python", "ruby", "sqlite"], "comments": [{"owner": {"reputation": 31155, "user_id": 4744514, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RQ2Np.jpg?s=128&g=1", "display_name": "MikeT", "link": "https://stackoverflow.com/users/4744514/miket"}, "edited": false, "score": 0, "creation_date": 1539079026, "post_id": 52718057, "comment_id": 92361790, "body": "<a href=\"https://www.sqlite.org/inmemorydb.html\" rel=\"nofollow noreferrer\">In-Memory Databases</a>"}, {"owner": {"reputation": 449, "user_id": 7350840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f227a3d5410f1e4f63473de9c15bfd?s=128&d=identicon&r=PG", "display_name": "MoYummy", "link": "https://stackoverflow.com/users/7350840/moyummy"}, "reply_to_user": {"reputation": 31155, "user_id": 4744514, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RQ2Np.jpg?s=128&g=1", "display_name": "MikeT", "link": "https://stackoverflow.com/users/4744514/miket"}, "edited": false, "score": 0, "creation_date": 1539079610, "post_id": 52718057, "comment_id": 92362149, "body": "@MikeT The 1st and the 3rd create an empty db. How can I load data? And the 2nd seems to support only <code>file</code> scheme not <code>http</code>."}, {"owner": {"reputation": 31155, "user_id": 4744514, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RQ2Np.jpg?s=128&g=1", "display_name": "MikeT", "link": "https://stackoverflow.com/users/4744514/miket"}, "edited": false, "score": 1, "creation_date": 1539080245, "post_id": 52718057, "comment_id": 92362536, "body": "You create tables and insert data using sql in the empty database, same as you would in a not in-memory database."}, {"owner": {"reputation": 449, "user_id": 7350840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f227a3d5410f1e4f63473de9c15bfd?s=128&d=identicon&r=PG", "display_name": "MoYummy", "link": "https://stackoverflow.com/users/7350840/moyummy"}, "reply_to_user": {"reputation": 31155, "user_id": 4744514, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RQ2Np.jpg?s=128&g=1", "display_name": "MikeT", "link": "https://stackoverflow.com/users/4744514/miket"}, "edited": false, "score": 0, "creation_date": 1539080837, "post_id": 52718057, "comment_id": 92362920, "body": "@MikeT That is not as expected. The <code>.db</code> file on the server already has data. I expect I can do query right after I open the db."}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1539098680, "post_id": 52718057, "comment_id": 92374291, "body": "If you want to access data in the file, you have to open it, not an in-memory database."}], "answers": [{"tags": [], "owner": {"reputation": 157205, "user_id": 11654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/586424ca0847070dc1868aa58077003e?s=128&d=identicon&r=PG", "display_name": "CL.", "link": "https://stackoverflow.com/users/11654/cl"}, "is_accepted": false, "score": 2, "last_activity_date": 1539289813, "creation_date": 1539289813, "answer_id": 52768477, "question_id": 52718057, "link": "https://stackoverflow.com/questions/52718057/does-sqlite3-support-loading-from-string-bytes-instead-of-file/52768477#52768477", "title": "Does sqlite3 support loading from string/bytes instead of file?", "body": "<p>This would be possible with the function <a href=\"https://www.sqlite.org/c3ref/deserialize.html\" rel=\"nofollow noreferrer\">sqlite3_deserialize()</a>, if you were using C.</p>\n"}], "owner": {"reputation": 449, "user_id": 7350840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f227a3d5410f1e4f63473de9c15bfd?s=128&d=identicon&r=PG", "display_name": "MoYummy", "link": "https://stackoverflow.com/users/7350840/moyummy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1539289813, "creation_date": 1539078559, "question_id": 52718057, "link": "https://stackoverflow.com/questions/52718057/does-sqlite3-support-loading-from-string-bytes-instead-of-file", "title": "Does sqlite3 support loading from string/bytes instead of file?", "body": "<p><code>sqlite3</code> supports dumping to and opening from <code>.db</code> file and file is actually a container of string/bytes, so I have the question.</p>\n\n<p>I store <code>.db</code> file on cdn server and have a client (maybe <code>python</code>, <code>javascript</code> or <code>ruby</code>) to send HTTP request. After having received HTTP response, I intend to open a temporary db from response body instead of saving it to file and opening from file. In this case, all is done in memory without access to local file system. Is this possible or I am going the wrong way?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "datagrid"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1539079121, "post_id": 52717797, "comment_id": 92361843, "body": "Unindent the whole block with <code>- if @fee_groups</code>."}, {"owner": {"reputation": 1560, "user_id": 5614748, "user_type": "registered", "accept_rate": 68, "profile_image": "https://graph.facebook.com/10153324566173505/picture?type=large", "display_name": "Afolabi Olaoluwa Akinwumi", "link": "https://stackoverflow.com/users/5614748/afolabi-olaoluwa-akinwumi"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1539079524, "post_id": 52717797, "comment_id": 92362095, "body": "Even with that it wont work."}, {"owner": {"reputation": 1560, "user_id": 5614748, "user_type": "registered", "accept_rate": 68, "profile_image": "https://graph.facebook.com/10153324566173505/picture?type=large", "display_name": "Afolabi Olaoluwa Akinwumi", "link": "https://stackoverflow.com/users/5614748/afolabi-olaoluwa-akinwumi"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1539079539, "post_id": 52717797, "comment_id": 92362105, "body": "Can you give more insight ?"}], "answers": [{"tags": [], "owner": {"reputation": 777, "user_id": 2485907, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Fvk07.jpg?s=128&g=1", "display_name": "Robbert van Elk", "link": "https://stackoverflow.com/users/2485907/robbert-van-elk"}, "is_accepted": false, "score": 0, "last_activity_date": 1539096726, "creation_date": 1539096726, "answer_id": 52723931, "question_id": 52717797, "link": "https://stackoverflow.com/questions/52717797/doing-away-with-loop-result-in-rails/52723931#52723931", "title": "doing away with loop result in rails", "body": "<p>Because you sum strings in you're @fee_groups query that will results in putting strings next to each other instead of a total amount.</p>\n\n<p>If you call it like this</p>\n\n<pre><code>@fee_groups = { fee: @assets.sum{|t| t.fee}}\n</code></pre>\n\n<p>You will get the total sum of you're assets.</p>\n"}], "owner": {"reputation": 1560, "user_id": 5614748, "user_type": "registered", "accept_rate": 68, "profile_image": "https://graph.facebook.com/10153324566173505/picture?type=large", "display_name": "Afolabi Olaoluwa Akinwumi", "link": "https://stackoverflow.com/users/5614748/afolabi-olaoluwa-akinwumi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 60, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1539096726, "creation_date": 1539077807, "last_edit_date": 1592644375, "question_id": 52717797, "link": "https://stackoverflow.com/questions/52717797/doing-away-with-loop-result-in-rails", "title": "doing away with loop result in rails", "body": "<p>I am working on a kind of order where I have multiple amount in different currencies in just one attribute. So am trying to make <code>sum</code> on different currencies inside that attribute using other attributes in the table, which works fine but outputs the result as a count of all the rows instead of just showing the sum of the random values calculated.</p>\n<p><strong>orders_controller.rb</strong></p>\n<pre><code>module Admin\n  module Statistic\n    class OrdersController &lt; BaseController\n      def show\n        @orders_grid = ::Statistic::OrdersGrid.new(params[:statistic_orders_grid]) do |value|\n          value.page(params[:page]).per(20)\n        end\n        @assets = @orders_grid.assets\n\n\n        #@fee_groups = {:fee =&gt; @assets.sum(:fee)}\n        @fee_groups = {\n          :fee =&gt; @assets.sum{|t|\n            olaoa = t.type\n            market_string = t.currency\n            base_currency = market_string.slice(0..2)\n            quote_currency = market_string.slice(3..5)\n            if olaoa == 'OrderBid' and base_currency == 'btc'\n              &quot;#{ t.fee.to_s + ' ' + base_currency.upcase }&quot;\n            elsif olaoa == 'OrderAsk' and quote_currency == 'ngn'\n              &quot;#{ t.fee.to_s + ' ' + quote_currency.upcase }&quot;\n            end\n          }\n        }\n\n        @orders_filter = true\n        @orders_group = true\n      end\n    end\n  end\nend\n</code></pre>\n<p><strong>summary.htm.slim</strong></p>\n<pre><code>.panel.panel-default\n  .panel-heading\n    h4.panel-title.row\n      a data-parent=&quot;#filter-accordion&quot; data-toggle=&quot;collapse&quot; href=&quot;#summary&quot;\n        span.col-xs-8.text-muted = t('admin.statistic.summary')\n        span.col-xs-4.text-right.text-muted = t('admin.statistic.click-to-expand')\n  #summary.panel-collapse.collapse\n    .panel-body\n      .datagrid-groups\n        - if !@orders_group\n          - if groups\n            - groups.each do |key, val|\n              .datagrid.group.row\n                span.col-xs-2.title = t(&quot;admin.statistic.#{controller_name}.#{controller.action_name}.#{key}&quot;)\n                span.col-xs-10.value = val\n        - if @orders_group\n          / Summary Count Loop\n          - if groups\n            - groups.each do |key, val|\n              .datagrid.group.row\n                span.col-xs-2.title = t(&quot;admin.statistic.#{controller_name}.#{controller.action_name}.#{key}&quot;)\n                span.col-xs-10.value = pluralize(val, 'Order')\n          / Summary Fees Loop. This is the Fee loop causing problem if am rigth and I dont know how to fix this.\n          - if @fee_groups\n            - @fee_groups.each do |key, val|\n              .datagrid.group.row\n                span.col-xs-2.title = t(&quot;admin.statistic.#{controller_name}.#{controller.action_name}.#{key}&quot;)\n                span.col-xs-10.value = val\n</code></pre>\n<p><strong>The result of the code</strong></p>\n<p><a href=\"https://i.stack.imgur.com/r4Icp.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/r4Icp.png\" alt=\"Result Image\" /></a></p>\n<p>So as you can see it renders 0.0BTC 5 times because the filter only has 5 orders. How do i deal with this. I want just the sum of all BTCs to show in the result instead of showing it 5 times.</p>\n<p>Any help will be appreciated.</p>\n"}, {"tags": ["ruby", "kaminari"], "comments": [{"owner": {"reputation": 953, "user_id": 942135, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6940a140b70676e63569f347b6642f68?s=128&d=identicon&r=PG", "display_name": "trueunlessfalse", "link": "https://stackoverflow.com/users/942135/trueunlessfalse"}, "edited": false, "score": 3, "creation_date": 1539078261, "post_id": 52717438, "comment_id": 92361312, "body": "In the else part of the statement you&#39;re assigning to <code>@domain</code> instead of <code>@domains</code> however you always render <code>@domain</code>"}, {"owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 1, "creation_date": 1539084616, "post_id": 52717438, "comment_id": 92365127, "body": "Where is <code>page</code> and <code>per_page</code> defined? In the gem?"}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 10407914, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db604fbd9aa99d72fb9805ed98e7192d?s=128&d=identicon&r=PG&f=1", "display_name": "K.K.H", "link": "https://stackoverflow.com/users/10407914/k-k-h"}, "edited": false, "score": 0, "creation_date": 1539609057, "post_id": 52724501, "comment_id": 92552382, "body": "thanks, its working, but still I&#39;m in the problem that kaminari return only 25  page per default"}, {"owner": {"reputation": 2496, "user_id": 3046905, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/692eb06201cbed91c3c6a9cf11ed0511?s=128&d=identicon&r=PG", "display_name": "Ilya Konyukhov", "link": "https://stackoverflow.com/users/3046905/ilya-konyukhov"}, "reply_to_user": {"reputation": 3, "user_id": 10407914, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db604fbd9aa99d72fb9805ed98e7192d?s=128&d=identicon&r=PG&f=1", "display_name": "K.K.H", "link": "https://stackoverflow.com/users/10407914/k-k-h"}, "edited": false, "score": 0, "creation_date": 1539609273, "post_id": 52724501, "comment_id": 92552527, "body": "You could change it in initializer: <a href=\"https://github.com/kaminari/kaminari#general-configuration-options\" rel=\"nofollow noreferrer\">github.com/kaminari/kaminari#general-configuration-options</a>"}], "tags": [], "owner": {"reputation": 2496, "user_id": 3046905, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/692eb06201cbed91c3c6a9cf11ed0511?s=128&d=identicon&r=PG", "display_name": "Ilya Konyukhov", "link": "https://stackoverflow.com/users/3046905/ilya-konyukhov"}, "is_accepted": true, "score": 1, "last_activity_date": 1539098755, "creation_date": 1539098755, "answer_id": 52724501, "question_id": 52717438, "link": "https://stackoverflow.com/questions/52717438/test-if-kaminari-params-exist-using-ruby-on-rails/52724501#52724501", "title": "Test if kaminari params exist using ruby on rails", "body": "<p>Controller method receives request parameters via <code>params</code> object. Variables <code>page</code> and <code>per_page</code> are undefined which will throw an exception <code>undefined local variable, etc.</code>.</p>\n\n<p>A few more things:</p>\n\n<ul>\n<li>I guess that <code>@domain</code> variable is a misprint and <code>@domains</code> should be used instead.</li>\n<li>Since both expressions of <code>if</code> fork return a value assigning to <code>@domains</code> variable, it can be simplified.</li>\n</ul>\n\n<p>To sum up, here is improved controller method:</p>\n\n<pre><code>def index\n  @domains = if params[:page].present? &amp;&amp; params[:per_page].present?\n               Domain.accessible_by(access_token)\n                     .page(params[:page])\n                     .per(params[:per_page])\n             else\n               Domain.accessible_by(access_token).all\n             end\n\n  render json: @domains\nend\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 10407914, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db604fbd9aa99d72fb9805ed98e7192d?s=128&d=identicon&r=PG&f=1", "display_name": "K.K.H", "link": "https://stackoverflow.com/users/10407914/k-k-h"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 214, "favorite_count": 0, "accepted_answer_id": 52724501, "answer_count": 1, "score": -1, "last_activity_date": 1539098755, "creation_date": 1539076679, "last_edit_date": 1539078449, "question_id": 52717438, "link": "https://stackoverflow.com/questions/52717438/test-if-kaminari-params-exist-using-ruby-on-rails", "title": "Test if kaminari params exist using ruby on rails", "body": "<p>I'm new to Ruby, and my task is to add pagination for the get method, but I try to test if the params (page) and(per_page) exist, if they dont exist it should return all the data in the database, because by defaulkt kaminari return only the 25 page.</p>\n\n<p>this is my function</p>\n\n<pre><code>def index\n  if page.present? &amp;&amp; per_page.present?\n    @domains = Domain.accessible_by(access_token).page(page).per(per_page)\n  else\n    @domain = Domain.accessible_by(access_token).all\n  end\n  render json: @domain\nend\n</code></pre>\n\n<p>at it return a <code>200 OK</code> response but null</p>\n"}, {"tags": ["java", "ruby", "timezone"], "comments": [{"owner": {"reputation": 64281, "user_id": 5772882, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/58mlb.png?s=128&g=1", "display_name": "Ole V.V.", "link": "https://stackoverflow.com/users/5772882/ole-v-v"}, "edited": false, "score": 1, "creation_date": 1539076182, "post_id": 52717215, "comment_id": 92359999, "body": "There is no built-in easy way. I don\u2019t know of any external library or database that might help, I would search for one, though."}, {"owner": {"reputation": 64281, "user_id": 5772882, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/58mlb.png?s=128&g=1", "display_name": "Ole V.V.", "link": "https://stackoverflow.com/users/5772882/ole-v-v"}, "edited": false, "score": 1, "creation_date": 1539076331, "post_id": 52717215, "comment_id": 92360079, "body": "Aren\u2019t you migrating to <a href=\"https://docs.oracle.com/javase/tutorial/datetime/\" rel=\"nofollow noreferrer\">java.time, the modern Java date and time API</a>? The <code>TimeZone</code> class is long outdated and poorly designed, and it friends, like <code>Calendar</code> and <code>DateFormat</code>, are yet worse. The modern API is so much nicer to work with. The class you want for time zones is <code>ZoneId</code>."}, {"owner": {"reputation": 64281, "user_id": 5772882, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/58mlb.png?s=128&g=1", "display_name": "Ole V.V.", "link": "https://stackoverflow.com/users/5772882/ole-v-v"}, "edited": false, "score": 2, "creation_date": 1539076872, "post_id": 52717215, "comment_id": 92360419, "body": "Your problem is that whoever wrote the Ruby program confused presentation and storage and saved user-friendly strings to the database instead of strings suitable for programs. If you could persuade Ruby to save strings like <code>America&#47;New_York</code>, you\u2019d be better off (i.e., <i>region/city</i>). The page you link to seems to indicate that Ruby knows such strings too, but I don\u2019t know how this works. If you can\u2019t afford to change the existing DB column, maybe you can add a redundant one with the proper format? Or better, a conversion table?"}, {"owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "reply_to_user": {"reputation": 64281, "user_id": 5772882, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/58mlb.png?s=128&g=1", "display_name": "Ole V.V.", "link": "https://stackoverflow.com/users/5772882/ole-v-v"}, "edited": false, "score": 2, "creation_date": 1539077562, "post_id": 52717215, "comment_id": 92360888, "body": "Agreed with @OleV.V.; just a couple of notes. a) This is not Ruby, but Rails. b) The TimeZone::MAPPING is right there on the linked page; just translate it into Java <code>TreeMap</code>or something and Java can <code>TimeZone.getTimeZone(railsTimezoneMapping[railsName])</code>."}, {"owner": {"reputation": 1567, "user_id": 2479786, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/eiYsP.jpg?s=128&g=1", "display_name": "Ehud Lev", "link": "https://stackoverflow.com/users/2479786/ehud-lev"}, "reply_to_user": {"reputation": 64281, "user_id": 5772882, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/58mlb.png?s=128&g=1", "display_name": "Ole V.V.", "link": "https://stackoverflow.com/users/5772882/ole-v-v"}, "edited": false, "score": 0, "creation_date": 1539080533, "post_id": 52717215, "comment_id": 92362729, "body": "Thank you all, I guess I will use ZoneId (thanks to @OleV.V.), and write it hard coded since I can&#39;t touch the rails code (others are using it and it is too expensive to refactor)."}, {"owner": {"reputation": 1567, "user_id": 2479786, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/eiYsP.jpg?s=128&g=1", "display_name": "Ehud Lev", "link": "https://stackoverflow.com/users/2479786/ehud-lev"}, "edited": false, "score": 0, "creation_date": 1539544208, "post_id": 52717215, "comment_id": 92530654, "body": "Since I already wrote it if someone need it it is here (in scala :) <a href=\"https://gist.github.com/ehudl/3e6ded0d4557d7beb34ad9ea17c3a682\" rel=\"nofollow noreferrer\">gist.github.com/ehudl/3e6ded0d4557d7beb34ad9ea17c3a682</a>"}], "answers": [{"tags": [], "owner": {"reputation": 195413, "user_id": 634824, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/889cf720c96957e615463b5c903a5e18?s=128&d=identicon&r=PG", "display_name": "Matt Johnson-Pint", "link": "https://stackoverflow.com/users/634824/matt-johnson-pint"}, "is_accepted": false, "score": 2, "last_activity_date": 1539109601, "creation_date": 1539109601, "answer_id": 52727214, "question_id": 52717215, "link": "https://stackoverflow.com/questions/52717215/ruby-timezone-string-to-java-timezone/52727214#52727214", "title": "Ruby Timezone String to java Timezone", "body": "<p>The authoritative source for Rails time zone names to standard TZDB/IANA time zone identifiers is the <code>TimeZone.MAPPING</code> constant in the Rails source code <a href=\"https://github.com/rails/rails/blob/master/activesupport/lib/active_support/values/time_zone.rb\" rel=\"nofollow noreferrer\">here</a>.  If you are able to access this mapping in your Rails code, then you don't need to hardcode anything.</p>\n\n<p>If rather (as it appears in the question comments) that you need to do the translation in your Java code, then you'll have to parse this mapping from the Rails code into something usable in your Java code, and periodically check for changes.   Thankfully, the Rails developers don't seem to change this list often.</p>\n\n<p>I don't know of a Java library that already does this for you, but .NET developers can take advantage of my <a href=\"https://github.com/mj1856/TimeZoneConverter\" rel=\"nofollow noreferrer\">TimeZoneConverter</a> library, which imports this mapping.  If you want to write your own code for this, feel free to translate my <a href=\"https://github.com/mj1856/TimeZoneConverter/blob/aa041f9422b06fc5b3c94b6ebb2d80262291f6b8/src/TimeZoneConverter.DataBuilder/DataExtractor.cs#L128-L150\" rel=\"nofollow noreferrer\"><code>LoadRailsMapping</code></a> function from C# to Java.</p>\n\n<p>See also my notes on Rails time zone names at the bottom of <a href=\"https://stackoverflow.com/tags/timezone/info\">the timezone tag wiki</a>.</p>\n"}], "owner": {"reputation": 1567, "user_id": 2479786, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/eiYsP.jpg?s=128&g=1", "display_name": "Ehud Lev", "link": "https://stackoverflow.com/users/2479786/ehud-lev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 199, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1539109601, "creation_date": 1539075897, "question_id": 52717215, "link": "https://stackoverflow.com/questions/52717215/ruby-timezone-string-to-java-timezone", "title": "Ruby Timezone String to java Timezone", "body": "<p>I have a ruby process that writes to DB timezones according to <a href=\"https://api.rubyonrails.org/classes/ActiveSupport/TimeZone.html\" rel=\"nofollow noreferrer\">ruby TimeZone Class</a> so at the table I get strings such as:</p>\n\n<ul>\n<li>\"Pacific Time (US &amp; Canada)\"</li>\n<li>\"Eastern Time (US &amp; Canada)\"</li>\n<li>\"UTC\"</li>\n<li>\"Paris\"</li>\n</ul>\n\n<p>and so on .. \nIs there a way (not hard coded map) to read those strings and convert them into <a href=\"https://docs.oracle.com/javase/7/docs/api/java/util/TimeZone.html\" rel=\"nofollow noreferrer\">java Timezone instance</a>? </p>\n"}, {"tags": ["ruby", "xml", "nokogiri"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1572236924, "post_id": 52715998, "comment_id": 103485401, "body": "Please see &quot;<a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>&quot; and the linked pages and &quot;<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">mcve</a>. We need the minimal code necessary to demonstrate the problem you&#39;re having."}], "answers": [{"comments": [{"owner": {"reputation": 125, "user_id": 8332030, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8e47e9a2a1cc4bad85b7e4212ef87e6?s=128&d=identicon&r=PG&f=1", "display_name": "Bastian", "link": "https://stackoverflow.com/users/8332030/bastian"}, "edited": false, "score": 0, "creation_date": 1539075881, "post_id": 52716450, "comment_id": 92359806, "body": "oh gosh, that was exactly my issue. Now i get something to work with. I will check the tutorial, thanks a lot !"}], "tags": [], "owner": {"reputation": 1197, "user_id": 400743, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a0d5c51291898c92154ba4ac1c56cd6?s=128&d=identicon&r=PG", "display_name": "Bartosz Pietraszko", "link": "https://stackoverflow.com/users/400743/bartosz-pietraszko"}, "is_accepted": true, "score": 0, "last_activity_date": 1539074897, "last_edit_date": 1539074897, "creation_date": 1539073403, "answer_id": 52716450, "question_id": 52715998, "link": "https://stackoverflow.com/questions/52715998/ruby-parsing-xml-with-nokogiri/52716450#52716450", "title": "Ruby - Parsing XML with Nokogiri", "body": "<p>Get rid of anything before <code>&lt;?xml version=\\\"1.0\\\" encoding=\\\"ISO-8859-1\\\"?&gt;</code> XML declaration - in you case, omit <code>\"show ip int brief vrf all | xml\\r\\n\"</code> line. </p>\n\n<p>Once your document is parsed, follow <a href=\"http://www.nokogiri.org/tutorials/searching_a_xml_html_document.html\" rel=\"nofollow noreferrer\">official tutorial on searching</a> - for a beginner IMHO it's best to avoid Xpath and just stick with <code>.css</code> selectors, which will be easy to grasp if you've ever done any CSS or Jquery. </p>\n"}], "owner": {"reputation": 125, "user_id": 8332030, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8e47e9a2a1cc4bad85b7e4212ef87e6?s=128&d=identicon&r=PG&f=1", "display_name": "Bastian", "link": "https://stackoverflow.com/users/8332030/bastian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "accepted_answer_id": 52716450, "answer_count": 1, "score": -1, "last_activity_date": 1539074897, "creation_date": 1539071839, "last_edit_date": 1539072944, "question_id": 52715998, "link": "https://stackoverflow.com/questions/52715998/ruby-parsing-xml-with-nokogiri", "title": "Ruby - Parsing XML with Nokogiri", "body": "<p>I'm not familiar with XML and trying to get a bit network automation going. I get some XML responses like the following, and try to convert it to a hash or something to easily work with it. I have no idea if I'm doing something wrong. I get the output shown below.</p>\n\n<p>Anyone can push me into a direction ? I tried the nokogiri documentation and guides, but I'm kinda lost.</p>\n\n<p>My Data:</p>\n\n<pre><code>\"show ip int brief vrf all | xml\\r\\n\" +\n\"&lt;?xml version=\\\"1.0\\\" encoding=\\\"ISO-8859-1\\\"?&gt;\\n\" +\n\"&lt;nf:rpc-reply xmlns:nf=\\\"urn:ietf:params:xml:ns:netconf:base:1.0\\\" xmlns=\\\"http://www.cisco.com/nxos:1.0:ip\\\"&gt;\\n\" +\n\" &lt;nf:data&gt;\\n\" +\n\"  &lt;show&gt;\\n\" +\n\"   &lt;ip&gt;\\n\" +\n\"    &lt;interface&gt;\\n\" +\n\"     &lt;__XML__BLK_Cmd_ip_show_interface_command_brief&gt;\\n\" +\n\"      &lt;__XML__OPT_Cmd_ip_show_interface_command_operational&gt;\\n\" +\n\"       &lt;__XML__OPT_Cmd_ip_show_interface_command_vrf&gt;\\n\" +\n\"        &lt;__XML__OPT_Cmd_ip_show_interface_command___readonly__&gt;\\n\" +\n\"         &lt;__readonly__&gt;\\n\" +\n\"          &lt;TABLE_vrf&gt;\\n\" +\n\"           &lt;ROW_vrf&gt;\\n\" +\n\"            &lt;vrf-name-out&gt;management&lt;/vrf-name-out&gt;\\n\" +\n\"           &lt;/ROW_vrf&gt;\\n\" +\n\"          &lt;/TABLE_vrf&gt;\\n\" +\n\"          &lt;TABLE_intf&gt;\\n\" +\n\"           &lt;ROW_intf&gt;\\n\" +\n\"            &lt;intf-name&gt;mgmt0&lt;/intf-name&gt;\\n\" +\n\"            &lt;prefix&gt;10.70.237.15&lt;/prefix&gt;\\n\" +\n\"            &lt;ip-disabled&gt;FALSE&lt;/ip-disabled&gt;\\n\" +\n\"            &lt;iod&gt;316&lt;/iod&gt;\\n\" +\n\"            &lt;proto-state&gt;up&lt;/proto-state&gt;\\n\" +\n\"            &lt;link-state&gt;up&lt;/link-state&gt;\\n\" +\n\"            &lt;admin-state&gt;up&lt;/admin-state&gt;\\n\" +\n\"           &lt;/ROW_intf&gt;\\n\" +\n\"          &lt;/TABLE_intf&gt;\\n\" +\n\"         &lt;/__readonly__&gt;\\n\" +\n\"        &lt;/__XML__OPT_Cmd_ip_show_interface_command___readonly__&gt;\\n\" +\n\"       &lt;/__XML__OPT_Cmd_ip_show_interface_command_vrf&gt;\\n\" +\n\"      &lt;/__XML__OPT_Cmd_ip_show_interface_command_operational&gt;\\n\" +\n\"     &lt;/__XML__BLK_Cmd_ip_show_interface_command_brief&gt;\\n\" +\n\"    &lt;/interface&gt;\\n\" +\n\"   &lt;/ip&gt;\\n\" +\n\"  &lt;/show&gt;\\n\" +\n\" &lt;/nf:data&gt;\\n\" +\n\"&lt;/nf:rpc-reply&gt;\\n\" +\n\n\n2.4.1 :363 &gt; doc = Nokogiri::XML(my_data)\n =&gt; #&lt;Nokogiri::XML::Document:0x173dda8 name=\"document\"&gt; \n2.4.1 :364 &gt; doc.elements\n =&gt; [] \n</code></pre>\n"}, {"tags": ["ruby", "string"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 9, "creation_date": 1539064686, "post_id": 52714196, "comment_id": 92353943, "body": "<code>str = &quot; ( #{str} ) &quot;</code>"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 3, "creation_date": 1539064765, "post_id": 52714196, "comment_id": 92353977, "body": "The esoteric variant: <code>str = [&#39; ( &#39;, &#39; ) &#39;].join(str)</code>."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 3, "creation_date": 1539064797, "post_id": 52714196, "comment_id": 92353995, "body": "<code>str = &#39; ( &#39; &lt;&lt; str &lt;&lt; &#39; ) &#39;</code>"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1539075857, "post_id": 52714196, "comment_id": 92359793, "body": "Using a template string: <code>str = &#39; ( %s ) &#39; % str</code>"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1539076081, "post_id": 52714196, "comment_id": 92359927, "body": "Or <code>str.prepend(&#39; ( &#39;).concat(&#39; ) &#39;)</code> which changes <code>str</code> in-place, making the assignment superfluous."}, {"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1539082779, "post_id": 52714196, "comment_id": 92364081, "body": "<code>str.sub(&#47;.+&#47;, &#39; ( \\0 ) &#39;)</code> or use <code>sub!</code> for in-place."}], "answers": [{"comments": [{"owner": {"reputation": 99, "user_id": 7023241, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-2mkYORILlgg/AAAAAAAAAAI/AAAAAAAAACw/kndjy-KzTZg/photo.jpg?sz=128", "display_name": "Muhammad Zubair", "link": "https://stackoverflow.com/users/7023241/muhammad-zubair"}, "edited": false, "score": 0, "creation_date": 1539065200, "post_id": 52714239, "comment_id": 92354171, "body": "String interpolation seems a good option. Other two options will produce exception, if str is nil"}, {"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "reply_to_user": {"reputation": 99, "user_id": 7023241, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-2mkYORILlgg/AAAAAAAAAAI/AAAAAAAAACw/kndjy-KzTZg/photo.jpg?sz=128", "display_name": "Muhammad Zubair", "link": "https://stackoverflow.com/users/7023241/muhammad-zubair"}, "edited": false, "score": 2, "creation_date": 1539065807, "post_id": 52714239, "comment_id": 92354418, "body": "Yes, that is true when <code>str</code>  might be <code>nil</code> then the last two version will not work. I would prefer string interpolation (the first option) for various reasons: able to handle <code>nil</code>, performances (if I remember correctly) and most important: it is easy to read and to understand."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 1, "creation_date": 1539066061, "post_id": 52714239, "comment_id": 92354520, "body": "<code>join</code> gracefully handles <code>nil</code>."}], "tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": false, "score": 3, "last_activity_date": 1539064678, "creation_date": 1539064678, "answer_id": 52714239, "question_id": 52714196, "link": "https://stackoverflow.com/questions/52714196/ruby-function-for-putting-string-in-parentheses/52714239#52714239", "title": "Ruby function for putting string in parentheses", "body": "<p>I would use string interpolation:</p>\n\n<pre><code>str = \" ( #{str} ) \"\n</code></pre>\n\n<p>Some other options might be:</p>\n\n<pre><code>str = ' ( ' +  str + ' ) '\nstr = [' ( ', str, ' ) '].join\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "is_accepted": false, "score": 0, "last_activity_date": 1539066274, "creation_date": 1539066274, "answer_id": 52714561, "question_id": 52714196, "link": "https://stackoverflow.com/questions/52714196/ruby-function-for-putting-string-in-parentheses/52714561#52714561", "title": "Ruby function for putting string in parentheses", "body": "<p>If this is something you'll need often you can also monkey patch the string class, and would be prefered to use string interpolation.</p>\n\n<pre><code>class String\n  def in_parens\n    \"( #{self} )\"\n  end\nend\n\nputs 'foo'.in_perens \n#=&gt; ( foo )\nputs ''.in_perens \n#=&gt; ( )\n\nrequire 'date'\nputs Date.today.to_s.in_parens \n#=&gt; ( 2018-10-09 )\n\ndate = Date.today.to_s.in_parens\nputs date.in_parens\n#=&gt; ( ( 2018-10-09 ) )\n</code></pre>\n\n<p>Well you get the idea</p>\n"}, {"tags": [], "owner": {"reputation": 9602, "user_id": 3607136, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/NRFso.jpg?s=128&g=1", "display_name": "Gagan Gami", "link": "https://stackoverflow.com/users/3607136/gagan-gami"}, "is_accepted": false, "score": 4, "last_activity_date": 1539068551, "last_edit_date": 1539068551, "creation_date": 1539067925, "answer_id": 52714931, "question_id": 52714196, "link": "https://stackoverflow.com/questions/52714196/ruby-function-for-putting-string-in-parentheses/52714931#52714931", "title": "Ruby function for putting string in parentheses", "body": "<p>I preferred String interpolation, this is just for alternate solution <strong><a href=\"https://ruby-doc.org/core-2.2.0/String.html#method-i-insert\" rel=\"nofollow noreferrer\">String#insert</a></strong></p>\n\n<pre><code>&gt; \"Gagan Gami\".insert(0, '(').insert(-1, ')')\n#=&gt; \"(Gagan Gami)\"\n# OR\n&gt; \"()\".insert(1, \"Gagan Gami\")\n#=&gt; \"(Gagan Gami)\"\n</code></pre>\n\n<hr>\n\n<blockquote>\n  <p>Ruby function for putting string in parentheses</p>\n</blockquote>\n\n<pre><code>&gt; parentheses = \"()\"\n&gt; str = \"Gagan Gami\"\n&gt; parentheses.insert(1, str)\n#=&gt; \"(Gagan Gami)\"\n</code></pre>\n"}], "owner": {"reputation": 99, "user_id": 7023241, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-2mkYORILlgg/AAAAAAAAAAI/AAAAAAAAACw/kndjy-KzTZg/photo.jpg?sz=128", "display_name": "Muhammad Zubair", "link": "https://stackoverflow.com/users/7023241/muhammad-zubair"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 520, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1539068551, "creation_date": 1539064489, "last_edit_date": 1539065384, "question_id": 52714196, "link": "https://stackoverflow.com/questions/52714196/ruby-function-for-putting-string-in-parentheses", "title": "Ruby function for putting string in parentheses", "body": "<p>Is there any function to place parentheses on both sides of a string as with <code>str</code> in the following?</p>\n\n<pre><code>str = ' ( '.concat(str.concat(' ) '))\n</code></pre>\n"}, {"tags": ["sql", "ruby", "odbc", "sanitization"], "comments": [{"owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "edited": false, "score": 2, "creation_date": 1539063140, "post_id": 52713606, "comment_id": 92353389, "body": "You are not sanitizing input at all. You are using Ruby string interpolation, not prepared statement parametrisation. You should have <code>query = &quot;INSERT INTO Table1 ( col_name1) VALUES (?)&quot;</code> and <code>stmt.execute(str)</code>."}], "answers": [{"tags": [], "owner": {"reputation": 778, "user_id": 4229641, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/VxtFd.jpg?s=128&g=1", "display_name": "vishnuprasanth", "link": "https://stackoverflow.com/users/4229641/vishnuprasanth"}, "is_accepted": true, "score": 1, "last_activity_date": 1539069119, "creation_date": 1539069119, "answer_id": 52715242, "question_id": 52713606, "link": "https://stackoverflow.com/questions/52713606/ruby-odbc-noscan/52715242#52715242", "title": "Ruby ODBC noscan", "body": "<p>As @Amadan mentioned in the comments. Try using a prepared statement.</p>\n\n<pre><code>str = \"some'ss\"\nquery = \"INSERT INTO Table1 ( col_name1) VALUES (?), str\"\nconn = ODBC.connect(@odbc,@user,@pw)  \nstmt = conn.prepare(query)\nstmt.noscan = false\nstmt.execute\nconn.disconnect\n</code></pre>\n"}], "owner": {"reputation": 172, "user_id": 1389297, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67a01a118cb2582c77316ee026d36540?s=128&d=identicon&r=PG", "display_name": "Ali Akbar", "link": "https://stackoverflow.com/users/1389297/ali-akbar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "accepted_answer_id": 52715242, "answer_count": 1, "score": 1, "last_activity_date": 1539069119, "creation_date": 1539060937, "last_edit_date": 1539067256, "question_id": 52713606, "link": "https://stackoverflow.com/questions/52713606/ruby-odbc-noscan", "title": "Ruby ODBC noscan", "body": "<p>I am trying to insert a value into sql db through ruby. I am using ruby 2.0 and ruby-odbc 0.99995.</p>\n\n<p>I am having an issue sanitizing the input. I tried setting <code>noscan</code> to <code>true</code> and <code>false</code>. It still throws an error.</p>\n\n<pre><code>str = \"some'ss\"\nquery = \"INSERT INTO Table1 ( col_name1) VALUES (#{str})\"\nconn = ODBC.connect(@odbc,@user,@pw)  \nstmt = conn.prepare(query)\nstmt.noscan = false\nstmt.execute\nconn.disconnect\n</code></pre>\n\n<p>How to sanitize the query string? I hope there is an inbuilt method in ODBC</p>\n\n<p>Here the string str apostrophe to be inserted.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ubuntu", "rvm"], "answers": [{"tags": [], "owner": {"reputation": 416, "user_id": 10439606, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aa88acb63902e7a94968084c0bad59cb?s=128&d=identicon&r=PG&f=1", "display_name": "Chirag", "link": "https://stackoverflow.com/users/10439606/chirag"}, "is_accepted": false, "score": 0, "last_activity_date": 1539061082, "creation_date": 1539061082, "answer_id": 52713625, "question_id": 52713415, "link": "https://stackoverflow.com/questions/52713415/running-a-ruby-on-rails-app-locally-different-versions-of-ruby/52713625#52713625", "title": "Running a ruby on rails app locally - Different versions of ruby", "body": "<p>You can create a <code>.rvmrc</code> file or <code>.ruby-version</code> and <code>.ruby-gemset</code> files for isolating gems for your projects. Here's the official documentation on that - <a href=\"https://rvm.io/workflow/projects#project-file-ruby-version\" rel=\"nofollow noreferrer\">https://rvm.io/workflow/projects#project-file-ruby-version</a></p>\n"}, {"comments": [{"owner": {"reputation": 299, "user_id": 9454269, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/0edb637e57ce3cad9745d80e6739b567?s=128&d=identicon&r=PG&f=1", "display_name": "KuroGane", "link": "https://stackoverflow.com/users/9454269/kurogane"}, "edited": false, "score": 1, "creation_date": 1539069028, "post_id": 52715030, "comment_id": 92355840, "body": "Thanks for that brilliant explanation lacoste! I was getting quite frustrated thinking &quot;why&quot; it was locked in the first place, but your explanation makes perfect sense as to why it needs to be locked."}], "tags": [], "owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "is_accepted": true, "score": 1, "last_activity_date": 1539068320, "creation_date": 1539068320, "answer_id": 52715030, "question_id": 52713415, "link": "https://stackoverflow.com/questions/52713415/running-a-ruby-on-rails-app-locally-different-versions-of-ruby/52715030#52715030", "title": "Running a ruby on rails app locally - Different versions of ruby", "body": "<p>You're dealing with what is known as dependency issues.  The point of Gemfile and Gemfile.lock is to insure that there will be no dependency issues for the application and <code>bundle install</code> will handle that. However it is common for versions to be set in the Gemfile to lock to a specific major release version which might allow for minor version updates.  This will look something like:</p>\n\n<pre><code>#Gemfile\ngem 'rails', '4.2.10'\ngem 'pg', '0.20.0'\n\ngem 'after_party', '~&gt; 1.10' #minor version updates will run here\ngem 'kaminari', '~&gt; 1.1'\n\nruby '2.3.6'\n</code></pre>\n\n<p>This ia a brief example.  Now when you run <code>bundle install</code> it will make sure everything is compatible with these versions.  While running <code>bundle update</code> will only update the versions with <code>~&gt;</code> before the version and will upgrade only minor semantic versions as they are not supposed to have breaking changes.  </p>\n\n<p>So, why is your app not working?  Well the Gemfile should have contained a ruby version.  RVM should determine your ruby version in <code>.ruby-version</code> file in base of your rails app and should match the version in Gemfile.  If you need to upgrade your ruby version bundler will help insure all your gems are compatible with that version and with each-other.  You'll first need to upgrade your ruby version with RVM, then set it in Gemfile.  </p>\n\n<p>However, there is no guarantee that out of date gems will be compatible.  That's the whole point of locking them so that you know which versions are stable at a give point in time. Updates / upgrades to gems have to be tested for compatibility which can sometimes be a project.  </p>\n\n<p>Also see <a href=\"https://stackoverflow.com/questions/6338344/rails-bundle-gems-conflicts-best-way-to-solve-it\">Rails Bundle, gems conflicts, best way to solve it</a></p>\n"}, {"tags": [], "owner": {"reputation": 399, "user_id": 2952784, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb2b676404d68e77e98277dd820db9e6?s=128&d=identicon&r=PG&f=1", "display_name": "TLbiz", "link": "https://stackoverflow.com/users/2952784/tlbiz"}, "is_accepted": false, "score": 0, "last_activity_date": 1539152168, "creation_date": 1539152168, "answer_id": 52733748, "question_id": 52713415, "link": "https://stackoverflow.com/questions/52713415/running-a-ruby-on-rails-app-locally-different-versions-of-ruby/52733748#52733748", "title": "Running a ruby on rails app locally - Different versions of ruby", "body": "<p>you can add \n<code>echo '2.3.1' &gt; .ruby-version</code> and <code>echo 'newgemset' &gt; .ruby-gemset</code> into working folder\nthen run </p>\n\n<pre><code>cd ./\nrvm install ruby-2.3.1\ngem install bundle\nbundle install\n</code></pre>\n"}], "owner": {"reputation": 299, "user_id": 9454269, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/0edb637e57ce3cad9745d80e6739b567?s=128&d=identicon&r=PG&f=1", "display_name": "KuroGane", "link": "https://stackoverflow.com/users/9454269/kurogane"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 639, "favorite_count": 0, "accepted_answer_id": 52715030, "answer_count": 3, "score": 0, "last_activity_date": 1539152168, "creation_date": 1539059425, "last_edit_date": 1539066219, "question_id": 52713415, "link": "https://stackoverflow.com/questions/52713415/running-a-ruby-on-rails-app-locally-different-versions-of-ruby", "title": "Running a ruby on rails app locally - Different versions of ruby", "body": "<p>I'm using RVM to manage the different ruby versions I have. One particular application is using an older ruby version (2.3.1), and I've noticed that, once I've changed to that version and run <code>rails server</code> on it, it doesn't work because I'm required to change a whole cascade of Gems or other files, such as nokogiri, to make it run. </p>\n\n<p>Generally, from what I've read online, I should just do a simple <code>bundle install</code> to do all of this before running <code>rails server</code>. However, it doesn't work as there are more conflicting things in this file, specifically that the versions are hard coded into it.</p>\n\n<p>Based on this, how can I run this app on my local server, if the above steps I've done, just doesn't work? I'm using Ubuntu, if that helps. </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "webpack", "webpacker", "react-rails"], "answers": [{"comments": [{"owner": {"reputation": 2804, "user_id": 5263363, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nOi2T.jpg?s=128&g=1", "display_name": "ARS81", "link": "https://stackoverflow.com/users/5263363/ars81"}, "edited": false, "score": 0, "creation_date": 1539084319, "post_id": 52716242, "comment_id": 92364968, "body": "If <code>Libsass</code> throws a deprecation warning during the compilation, <a href=\"https://github.com/sass/node-sass/issues/2362#issuecomment-396239814\" rel=\"nofollow noreferrer\">here is the why</a> and <a href=\"https://github.com/FortAwesome/Font-Awesome/issues/14086\" rel=\"nofollow noreferrer\">here is my feature request</a> to FontAwesome to easily avoid it."}, {"owner": {"reputation": 6988, "user_id": 114558, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/bab612017b2cd60149999f197e9e5cc3?s=128&d=identicon&r=PG", "display_name": "rinogo", "link": "https://stackoverflow.com/users/114558/rinogo"}, "edited": false, "score": 0, "creation_date": 1588362679, "post_id": 52716242, "comment_id": 108875808, "body": "This is what I needed, but there&#39;s a lot of extra information that was confusing. For others who have this problem, you probably just need to make the change that was mentioned to <code>application.scss</code> (or equivalent) and that&#39;s it."}], "tags": [], "owner": {"reputation": 2804, "user_id": 5263363, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nOi2T.jpg?s=128&g=1", "display_name": "ARS81", "link": "https://stackoverflow.com/users/5263363/ars81"}, "is_accepted": true, "score": 6, "last_activity_date": 1539079267, "last_edit_date": 1539079267, "creation_date": 1539072655, "answer_id": 52716242, "question_id": 52713399, "link": "https://stackoverflow.com/questions/52713399/load-fonts-from-node-modules-in-react-rails-application-with-webpack/52716242#52716242", "title": "Load fonts from node_modules in react-rails application with webpack", "body": "<p><strong>FontAwesome with webfonts:</strong></p>\n\n<p>For me with the free version the example below is working well. I don't know the pro version, but if I'm not mistaken, you just have to rename <code>fontawesome-free</code> to <code>fontawesome-pro</code> in the paths.</p>\n\n<p>application.scss:</p>\n\n<pre><code>$fa-font-path: \"~@fortawesome/fontawesome-free/webfonts\";\n@import \"~@fortawesome/fontawesome-free/scss/fontawesome.scss\";\n@import \"~@fortawesome/fontawesome-free/scss/solid.scss\";\n@import \"~@fortawesome/fontawesome-free/scss/regular.scss\";\n@import \"~@fortawesome/fontawesome-free/scss/brands.scss\";\n</code></pre>\n\n<p><em>In SCSS <code>~</code> (tilde import) means that look for the nearest <code>node_modules</code> directory. Not all SASS compilers supports it, but <code>node-sass</code> does, and this is the common for Webpack.</em></p>\n\n<p>This way in your <code>html</code> you only have to use your <code>application.css</code>. There's no need to include any other FontAwesome css files.</p>\n\n<p>Your font loader config seems OK (tested, worked). With that Webpack should resolve the font files and then copy them to your desired output as you wanted. This needs that your <code>css-loader</code> be configured with <code>url: true</code> but I that is the default.</p>\n\n<p>A minimal/usual config for the loaders in your Webpack config file:</p>\n\n<pre><code>module: {\n  rules: [\n    {\n      test: /\\.s?css$/,\n      use: [\n        MiniCssExtractPlugin.loader, // optional (the most common way to export css)\n        \"css-loader\", // its url option must be true, but that is the default\n        \"sass-loader\"\n      ]\n    },\n    {\n      // find these extensions in our css, copy the files to the outputPath,\n      // and rewrite the url() in our css to point them to the new (copied) location\n      test: /\\.(woff(2)?|eot|otf|ttf|svg)(\\?v=[0-9]\\.[0-9]\\.[0-9])?$/,\n      use: {\n        loader: 'file-loader',\n        options: {\n          outputPath: 'fonts/'\n        }\n      }\n    }\n  ]\n},\n</code></pre>\n\n<p><strong>Loading only the needed fonts (the new way with JS and SVGs)</strong></p>\n\n<p><em>Again, I will demonstrate it with the free version because I don't have the pro version.</em></p>\n\n<p>This way your generated bundle will only contain those icons what you need, resulting in a much smaller size which means faster page loads. (I'm using this in my projects)</p>\n\n<p>The needed packages:</p>\n\n<pre><code>@fortawesome/fontawesome-svg-core\n@fortawesome/free-brands-svg-icons\n@fortawesome/free-regular-svg-icons\n@fortawesome/free-solid-svg-icons\n</code></pre>\n\n<p>Include this in your scss file:</p>\n\n<pre><code>@import \"~@fortawesome/fontawesome-svg-core/styles\";\n</code></pre>\n\n<p>Create a new file, name it fontawesome.js:</p>\n\n<pre><code>import { library, dom, config } from '@fortawesome/fontawesome-svg-core';\n\nconfig.autoAddCss = false;\nconfig.keepOriginalSource = false;\nconfig.autoReplaceSvg = true;\nconfig.observeMutations = true;\n\n// this is the 100% working way (deep imports)\nimport { faUser } from '@fortawesome/free-solid-svg-icons/faUser';\nimport { faHome } from '@fortawesome/free-solid-svg-icons/faHome';\nimport { faFacebook } from '@fortawesome/free-brands-svg-icons/faFacebook';\nimport { faYoutube } from '@fortawesome/free-brands-svg-icons/faYoutube';\n\n// this is the treeshaking way (better, but read about it below)\nimport { faUser, faHome } from '@fortawesome/free-solid-svg-icons';\nimport { faFacebook, faYoutube } from '@fortawesome/free-brands-svg-icons';\n\nlibrary.add(faUser, faHome, faFacebook, faYoutube);\ndom.watch();\n</code></pre>\n\n<p>.. and then require it somewhere in your js:</p>\n\n<pre><code>require('./fontawesome');\n</code></pre>\n\n<p>That's all. If you want to read more on this, start with understanding <a href=\"https://fontawesome.com/how-to-use/on-the-web/advanced/svg-javascript-core\" rel=\"noreferrer\">SVG JavaScript Core</a>, have a look on its <a href=\"https://fontawesome.com/how-to-use/with-the-api/setup/configuration\" rel=\"noreferrer\">configuration</a> and read the documantation of <a href=\"https://fontawesome.com/how-to-use/with-the-api/other/tree-shaking\" rel=\"noreferrer\">treeshaking</a>. </p>\n"}], "owner": {"reputation": 1737, "user_id": 4476186, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/f3452238962a96a1515d4ab4420aaf35?s=128&d=identicon&r=PG&f=1", "display_name": "Gerard Simpson", "link": "https://stackoverflow.com/users/4476186/gerard-simpson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1807, "favorite_count": 0, "accepted_answer_id": 52716242, "answer_count": 1, "score": 0, "last_activity_date": 1539079267, "creation_date": 1539059328, "question_id": 52713399, "link": "https://stackoverflow.com/questions/52713399/load-fonts-from-node-modules-in-react-rails-application-with-webpack", "title": "Load fonts from node_modules in react-rails application with webpack", "body": "<p>I have a react-rails application set up with webpacker.</p>\n\n<p>I am trying to load font-awesome-pro with it's fonts from node_modules.</p>\n\n<p>I assume this is a trivial task but I can't seem to find any good documentation on how to do this.</p>\n\n<p>This is what I have so far:</p>\n\n<p>package.json dependencies:</p>\n\n<pre><code>  \"dependencies\": {\n    \"@rails/webpacker\": \"3.5\",\n    \"babel-preset-react\": \"^6.24.1\",\n    \"bootstrap\": \"^4.1.3\",\n    \"prop-types\": \"^15.6.2\",\n    \"react\": \"^16.5.2\",\n    \"react-dom\": \"^16.5.2\",\n    \"react-slick\": \"^0.23.1\",\n    \"react_ujs\": \"^2.4.4\",\n    \"slick-carousel\": \"^1.8.1\",\n    \"tachyons-z-index\": \"^1.0.9\"\n  },\n  \"devDependencies\": {\n    \"@fortawesome/fontawesome-pro\": \"^5.2.0\",\n    \"babel-plugin-transform-class-properties\": \"^6.24.1\",\n    \"babel-preset-env\": \"^1.7.0\",\n    \"file-loader\": \"^2.0.0\",\n    \"path\": \"^0.12.7\",\n    \"webpack-dev-server\": \"2.11.2\"\n  }\n</code></pre>\n\n<p>file.js:</p>\n\n<pre><code>var path = require('path');\n\nmodule.exports = {\n  test: /\\.(woff(2)?|eot|otf|ttf|svg)(\\?v=[0-9]\\.[0-9]\\.[0-9])?$/,\n    exclude: path.resolve(__dirname, '../../app/assets'),\n    use: {\n      loader: 'file-loader',\n      options: {\n        outputPath: 'fonts/',\n        useRelativePath: false\n      }\n    }\n}\n</code></pre>\n\n<p>environment.js</p>\n\n<pre><code>const { environment } = require('@rails/webpacker')\nconst file = require('./file')\n\nenvironment.loaders.prepend('file', file)\n\nmodule.exports = environment\n</code></pre>\n\n<p>application.scss:</p>\n\n<pre><code>@import '@fortawesome/fontawesome-pro/scss/fontawesome.scss';\n</code></pre>\n\n<p>application.rb:</p>\n\n<pre><code>config.assets.paths &lt;&lt; Rails.root.join('node_modules')\n</code></pre>\n\n<p>What am I missing? From what I can gather, webpack should be looking at the <code>node_modules</code> directory, finding font files based on the webpack <code>test</code> and putting the assets into the output directory: <code>fonts/</code>.</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 1, "creation_date": 1539054471, "post_id": 52712625, "comment_id": 92351293, "body": "Don&#39;t have a answer for how it&#39;s built internally, but this is special &quot;syntactic sugar&quot;. See <a href=\"https://stackoverflow.com/questions/7705693/are-there-rules-for-ruby-syntactic-sugar\" title=\"are there rules for ruby syntactic sugar\">stackoverflow.com/questions/7705693/&hellip;</a>"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1539057326, "post_id": 52712625, "comment_id": 92351908, "body": "There are many Ruby methods that end with an equals sign. Often, they are one of a pair of methods that have the same name except one has an equals sign tacked onto the end. The one with the equals sign is used to set a value, the other returns a value..."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1539057336, "post_id": 52712625, "comment_id": 92351910, "body": "...Some built-in examples are <a href=\"http://ruby-doc.org/core-2.5.1/String.html#method-i-5B-5D-3D\" rel=\"nofollow noreferrer\">String#&#91;&#93;=</a>, <a href=\"http://ruby-doc.org/core-2.5.1/Hash.html#method-i-5B-5D-3D\" rel=\"nofollow noreferrer\">Hash#&#91;&#93;=</a>, <a href=\"http://ruby-doc.org/core-2.5.1/Hash.html#method-i-default_proc-3D\" rel=\"nofollow noreferrer\">Hash#default_proc=</a>, <a href=\"http://ruby-doc.org/core-2.5.1/Array.html#method-i-5B-5D-3D\" rel=\"nofollow noreferrer\">Array#&#91;&#93;=</a> and five more in the class <a href=\"http://ruby-doc.org/core-2.5.1/IO.html\" rel=\"nofollow noreferrer\">IO</a>."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 2, "creation_date": 1539058320, "post_id": 52712625, "comment_id": 92352155, "body": "Consider <code>String#[]</code> and suppose <code>str = &#39;cat&#39;</code>. We could use this method in the conventional Ruby way: <code>str = &#39;cat&#39;; str.[]=(1,&#39;u&#39;); str #=&gt; &quot;cut&quot;</code>. The presence of the equals sign, however, means that we can write it more conveniently as <code>str[1] = &#39;u&#39;; str #=&gt; &#39;cut&#39;</code>. This is what @maxpleaner means by <i>syntactic sugar</i>. Note that this does not apply only to built-in methods; you can use the <i>sugar</i> form for your own methods whose names end with an equals sign."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1539077844, "post_id": 52712625, "comment_id": 92361056, "body": "Methods ending with <code>=</code> indicate <i>assignment methods</i> because they can be invoked like an assignment (so we have <code>car.color = &#39;green&#39;</code> instead of <code>car.set_color(&#39;green&#39;)</code> in Ruby). The <code>=</code> is an essential part of the method&#39;s name, it cannot be omitted. See the documentation for <a href=\"http://ruby-doc.org/core-2.5.1/doc/syntax/methods_rdoc.html#label-Method+Names\" rel=\"nofollow noreferrer\">method names</a>."}], "answers": [{"tags": [], "owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "is_accepted": false, "score": 0, "last_activity_date": 1539055614, "creation_date": 1539055614, "answer_id": 52712922, "question_id": 52712625, "link": "https://stackoverflow.com/questions/52712625/defining-an-attr-writer-method-def-color-new-color-why-the/52712922#52712922", "title": "Defining an attr_writer method def color=(new_color). Why the =?", "body": "<p>It is intuitive since <code>attr_writer</code> is a setter method and since variable assignment is done in ruby with <code>my_string = 'foo'</code> for example, it makes sense.</p>\n\n<p>If you want the source see  <a href=\"https://apidock.com/ruby/Module/attr_writer\" rel=\"nofollow noreferrer\">https://apidock.com/ruby/Module/attr_writer</a></p>\n"}], "owner": {"reputation": 859, "user_id": 7227222, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ec1eb8473ab73ded224fbbdc2414005?s=128&d=identicon&r=PG&f=1", "display_name": "AlbertMunichMar", "link": "https://stackoverflow.com/users/7227222/albertmunichmar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 67, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1539059724, "creation_date": 1539053114, "last_edit_date": 1539059724, "question_id": 52712625, "link": "https://stackoverflow.com/questions/52712625/defining-an-attr-writer-method-def-color-new-color-why-the", "title": "Defining an attr_writer method def color=(new_color). Why the =?", "body": "<p>In order to give write access to an instance variable, we use <code>attr_writer</code>, or define an accessor method manually by:</p>\n\n<pre><code>class Car\n  attr_reader :color\n\n  def initialize(color)\n    @color = color\n  end\n\n  def color=(new_color)\n    @color = new_color\n  end\nend\n</code></pre>\n\n<p>Why the <code>=</code>? I thought it was just a convention. If I use <code>*</code> instead of <code>=</code>, it doesn't work.</p>\n\n<p>Where can I find information on how this method is built internally in Ruby?</p>\n"}, {"tags": ["ruby", "sequel"], "answers": [{"comments": [{"owner": {"reputation": 1173, "user_id": 384936, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/5044d0567cc7ae2e52cbd511958e2c15?s=128&d=identicon&r=PG", "display_name": "junkone", "link": "https://stackoverflow.com/users/384936/junkone"}, "edited": false, "score": 0, "creation_date": 1539049332, "post_id": 52712152, "comment_id": 92350303, "body": "yes i do have sqlite3 and updated teh code above. I still have the same issue. I am guessing that it has somethign to do with how i connect. My database is in p: how do i create a Sequel.connect using a file name in windows?"}, {"owner": {"reputation": 694, "user_id": 6481767, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/881dc5adac4bec55f445d812f2e32505?s=128&d=identicon&r=PG&f=1", "display_name": "Aaditya Maheshwari", "link": "https://stackoverflow.com/users/6481767/aaditya-maheshwari"}, "reply_to_user": {"reputation": 1173, "user_id": 384936, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/5044d0567cc7ae2e52cbd511958e2c15?s=128&d=identicon&r=PG", "display_name": "junkone", "link": "https://stackoverflow.com/users/384936/junkone"}, "edited": false, "score": 0, "creation_date": 1539049902, "post_id": 52712152, "comment_id": 92350410, "body": "@junkone try moving your db into the same working directory as your project."}, {"owner": {"reputation": 1173, "user_id": 384936, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/5044d0567cc7ae2e52cbd511958e2c15?s=128&d=identicon&r=PG", "display_name": "junkone", "link": "https://stackoverflow.com/users/384936/junkone"}, "edited": false, "score": 0, "creation_date": 1539050254, "post_id": 52712152, "comment_id": 92350485, "body": "tried that too. for eg.irb(main):025:0&gt; File.exists?(&quot;StockSymbols.db&quot;) =&gt; true irb(main):026:0&gt; FileUtils.pwd =&gt; &quot;P:/&quot; irb(main):027:0&gt; File.exists?(&quot;StockSymbols.db&quot;) =&gt; true irb(main):028:0&gt; Sequel.connect(&quot;sqllite:////StockSymbols.db&quot;) Sequel::AdapterNotFound: LoadError: cannot load such file -- sequel/adapters/sqllite         from C:/Ruby24-"}, {"owner": {"reputation": 694, "user_id": 6481767, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/881dc5adac4bec55f445d812f2e32505?s=128&d=identicon&r=PG&f=1", "display_name": "Aaditya Maheshwari", "link": "https://stackoverflow.com/users/6481767/aaditya-maheshwari"}, "reply_to_user": {"reputation": 1173, "user_id": 384936, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/5044d0567cc7ae2e52cbd511958e2c15?s=128&d=identicon&r=PG", "display_name": "junkone", "link": "https://stackoverflow.com/users/384936/junkone"}, "edited": false, "score": 0, "creation_date": 1539050965, "post_id": 52712152, "comment_id": 92350609, "body": "@junkone four forward slashes? shouldn&#39;t that be 2 or 3?"}], "tags": [], "owner": {"reputation": 694, "user_id": 6481767, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/881dc5adac4bec55f445d812f2e32505?s=128&d=identicon&r=PG&f=1", "display_name": "Aaditya Maheshwari", "link": "https://stackoverflow.com/users/6481767/aaditya-maheshwari"}, "is_accepted": false, "score": 0, "last_activity_date": 1539050895, "last_edit_date": 1539050895, "creation_date": 1539048935, "answer_id": 52712152, "question_id": 52712021, "link": "https://stackoverflow.com/questions/52712021/how-do-connect-from-sequel-to-sqlite/52712152#52712152", "title": "How do connect from Sequel to SQLite", "body": "<p>Hope you have sqlite3 installed too. You probably need to <code>require 'sqlite3'</code> too in the same irb session before <code>Sequel.connect</code>.</p>\n\n<p>Also, rename the db using snake_case. Just a convention.</p>\n\n<pre><code>require 'sequel'\nrequire 'sqlite3'\n\nDB = Sequel.connect('sqlite://your_db.db') # ./your_db.db\n</code></pre>\n"}], "owner": {"reputation": 1173, "user_id": 384936, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/5044d0567cc7ae2e52cbd511958e2c15?s=128&d=identicon&r=PG", "display_name": "junkone", "link": "https://stackoverflow.com/users/384936/junkone"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 296, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1539084284, "creation_date": 1539047550, "last_edit_date": 1539084284, "question_id": 52712021, "link": "https://stackoverflow.com/questions/52712021/how-do-connect-from-sequel-to-sqlite", "title": "How do connect from Sequel to SQLite", "body": "<p>My  SQLite database is located at <code>p:\\StockSymbols.db</code></p>\n\n<p>I am trying to connect via the <a href=\"https://github.com/jeremyevans/sequel\" rel=\"nofollow noreferrer\">sequel gem</a>, but it does not like it. </p>\n\n<pre><code>C:\\Users\\murth&gt;irb irb(main):001:0&gt; require 'sqlite3'\n=&gt; true irb(main):002:0&gt; require 'sequel'\n=&gt; true irb(main):003:0&gt; Sequel.sqlite('P:\\\\StockSymbols.db')\n=&gt; #&lt;Sequel::SQLite::Database: {:adapter=&gt;:sqlite, :database=&gt;\"P:\\\\StockSymbols.db\"}&gt; irb(main):004:0&gt;  Sequel.connect(\"P:\\\\StockSymbols.db\") URI::InvalidURIError: bad URI(is not URI?): P:\\StockSymbols.db\n        from C:/Ruby24-x64/lib/ruby/2.4.0/uri/rfc3986_parser.rb:67:in `split'\n        from C:/Ruby24-x64/lib/ruby/2.4.0/uri/rfc3986_parser.rb:73:in `parse'\n        from C:/Ruby24-x64/lib/ruby/2.4.0/uri/common.rb:231:in `parse'\n        from C:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/sequel-5.13.0/lib/sequel/database/connecting.rb:34:in `connect'\n        from C:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/sequel-5.13.0/lib/sequel/core.rb:121:in `connect'\n        from (irb):4\n        from C:/Ruby24-x64/bin/irb.cmd:19:in `&lt;main&gt;' irb(main):005:0&gt; Sequel.connect(\"sqllite:///P:/StockSymbols.db\") Sequel::AdapterNotFound: LoadError: cannot load such file -- sequel/adapters/sqllite\n        from C:/Ruby24-x64/lib/ruby/2.4.0/rubygems/core_ext/kernel_require.rb:55:in `require'\n        from C:/Ruby24-x64/lib/ruby/2.4.0/rubygems/core_ext/kernel_require.rb:55:in `require'\n        from C:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/sequel-5.13.0/lib/sequel/database/connecting.rb:88:in `load_adapter'\n        from C:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/sequel-5.13.0/lib/sequel/database/connecting.rb:17:in `adapter_class'\n        from C:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/sequel-5.13.0/lib/sequel/database/connecting.rb:36:in `connect'\n        from C:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/sequel-5.13.0/lib/sequel/core.rb:121:in `connect'\n        from (irb):5\n        from C:/Ruby24-x64/bin/irb.cmd:19:in `&lt;main&gt;'\n</code></pre>\n"}, {"tags": ["javascript", "ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 1, "creation_date": 1539050127, "post_id": 52711920, "comment_id": 92350454, "body": "first of all on the first line of your function, catch <code>document.getElementById(&quot;bbcode2&quot;).</code> in a variable instead of multiple DOM queries to the same object. Then use it everywhere else inside this function."}, {"owner": {"reputation": 416, "user_id": 10439606, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aa88acb63902e7a94968084c0bad59cb?s=128&d=identicon&r=PG&f=1", "display_name": "Chirag", "link": "https://stackoverflow.com/users/10439606/chirag"}, "edited": false, "score": 1, "creation_date": 1539064652, "post_id": 52711920, "comment_id": 92353934, "body": "Using same &quot;ID&quot; multiple times on the same page is invalid html, you can probably use a class and then use closest function to get the relevant cell.  If you have jQuery on your app, then this code can be made smaller/cleaner"}, {"owner": {"reputation": 145, "user_id": 8371714, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41001419cf5313eb31a80621923535eb?s=128&d=identicon&r=PG&f=1", "display_name": "JimBob", "link": "https://stackoverflow.com/users/8371714/jimbob"}, "edited": false, "score": 0, "creation_date": 1539133216, "post_id": 52711920, "comment_id": 92387432, "body": "Thanks for the help so far - I have made an edit, but still need help, please!"}, {"owner": {"reputation": 145, "user_id": 8371714, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41001419cf5313eb31a80621923535eb?s=128&d=identicon&r=PG&f=1", "display_name": "JimBob", "link": "https://stackoverflow.com/users/8371714/jimbob"}, "edited": false, "score": 0, "creation_date": 1539250699, "post_id": 52711920, "comment_id": 92436887, "body": "Any further help, please?"}], "answers": [{"tags": [], "owner": {"reputation": 145, "user_id": 8371714, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41001419cf5313eb31a80621923535eb?s=128&d=identicon&r=PG&f=1", "display_name": "JimBob", "link": "https://stackoverflow.com/users/8371714/jimbob"}, "is_accepted": true, "score": 0, "last_activity_date": 1539473744, "creation_date": 1539473744, "answer_id": 52798259, "question_id": 52711920, "link": "https://stackoverflow.com/questions/52711920/javascript-copytoclipboard-on-same-row-as-onclick-button/52798259#52798259", "title": "JavaScript CopyToClipboard on same row as onclick button", "body": "<p>What I did was use rails to add an ID to the onclick </p>\n\n<pre><code>CopyToClipboard2(&lt;%=f.id %&gt;)\n</code></pre>\n\n<p>Then use that to tell the JS what ID to target</p>\n\n<pre><code>&lt;script type=\"text/javascript\"&gt;\nfunction CopyToClipboard2(clicked_id) {\n    document.getElementById(clicked_id).style.display = 'block';\n    document.getElementById(clicked_id).focus();\n    if (document.selection) {\n        var range = document.body.createTextRange();\n        range.moveToElementText(document.getElementById(clicked_id));\n        range.select().createTextRange();\n        document.execCommand(\"Copy\");\n    } else if (window.getSelection) {\n        window.getSelection().removeAllRanges();\n        var range = document.createRange();\n        range.selectNode(document.getElementById(clicked_id));\n        window.getSelection().addRange(range);\n        document.execCommand(\"Copy\");\n    }\n    document.getElementById(clicked_id).style.display = 'none';\n}\n</code></pre>\n\n<p></p>\n\n<p>Works a treat :)</p>\n"}], "owner": {"reputation": 145, "user_id": 8371714, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41001419cf5313eb31a80621923535eb?s=128&d=identicon&r=PG&f=1", "display_name": "JimBob", "link": "https://stackoverflow.com/users/8371714/jimbob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "accepted_answer_id": 52798259, "answer_count": 1, "score": 2, "last_activity_date": 1539473744, "creation_date": 1539046648, "last_edit_date": 1539133175, "question_id": 52711920, "link": "https://stackoverflow.com/questions/52711920/javascript-copytoclipboard-on-same-row-as-onclick-button", "title": "JavaScript CopyToClipboard on same row as onclick button", "body": "<p>I have the following script which copies a cell data from a table (that cell is hidden - the JS grabs the data, show has to momentary show it); it works great, but only on the \"bbcode2\" ID and the \"onclick=\"CopyToClipboard2\" on any row only affects the very first row \"bbcode2\" ID record</p>\n\n<p>I have no idea how to get the JS to grab the same cell on the same row as onclick button.  I tried adding .closest(#bbcode2), but that still only grabs the first instance of bbcode2</p>\n\n<p>I can replace the bbcode2 with a dynamic ID if I need to</p>\n\n<pre><code>&lt;script type=\"text/javascript\"&gt;\nfunction CopyToClipboard2() {\n    document.getElementById(\"bbcode2\").style.display = 'block';\n    document.getElementById(\"bbcode2\").focus();\n    if (document.selection) {\n        var range = document.body.createTextRange();\n        range.moveToElementText(document.getElementById(\"bbcode2\"));\n        range.select().createTextRange();\n        document.execCommand(\"Copy\");\n    } else if (window.getSelection) {\n        window.getSelection().removeAllRanges();\n        var range = document.createRange();\n        range.selectNode(document.getElementById(\"bbcode2\"));\n        window.getSelection().addRange(range);\n        document.execCommand(\"Copy\");\n    }\n    document.getElementById(\"bbcode2\").style.display = 'none';\n}\n</code></pre>\n\n<p></p>\n\n<p>Edit -</p>\n\n<p>I added a variable ID to each record, and I now have the following, but it requires I click on the cell for it to work.  I want it to occur via a button on the same row in the table</p>\n\n<p>Ideas?</p>\n\n<pre><code>addEventListener('click', function (ev) {\n    var serviceID = ev.target.id;\n    alert(serviceID);\n    if (document.selection) {\n        var range = document.body.createTextRange();\n        range.moveToElementText(document.getElementById(serviceID));\n        range.select().createTextRange();\n        document.execCommand(\"Copy\");\n    } else if (window.getSelection) {\n        window.getSelection().removeAllRanges();\n        var range = document.createRange();\n        range.selectNode(document.getElementById(serviceID));\n        window.getSelection().addRange(range);\n        document.execCommand(\"Copy\");\n    }\n    document.getElementById(serviceID).style.display = 'none';\n})\n</code></pre>\n\n<p></p>\n"}, {"tags": ["ruby", "unit-testing", "rake", "rakefile"], "comments": [{"owner": {"reputation": 5141, "user_id": 193980, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/aafa8848c4b764f080b1b31a51eab73d?s=128&d=identicon&r=PG", "display_name": "Phlip", "link": "https://stackoverflow.com/users/193980/phlip"}, "edited": false, "score": 1, "creation_date": 1539045260, "post_id": 52711764, "comment_id": 92349571, "body": "Edit your post and paste in the actual error message."}, {"owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 0, "creation_date": 1539046496, "post_id": 52711764, "comment_id": 92349793, "body": "Did you try adding the requires in the Rakefile ?"}, {"owner": {"reputation": 1279, "user_id": 781970, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef1e51a7a1e596d943685c7d93a4d071?s=128&d=identicon&r=PG", "display_name": "JanuskaE", "link": "https://stackoverflow.com/users/781970/januskae"}, "edited": false, "score": 0, "creation_date": 1539048449, "post_id": 52711764, "comment_id": 92350137, "body": "no I did not try that"}], "answers": [{"comments": [{"owner": {"reputation": 1279, "user_id": 781970, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef1e51a7a1e596d943685c7d93a4d071?s=128&d=identicon&r=PG", "display_name": "JanuskaE", "link": "https://stackoverflow.com/users/781970/januskae"}, "edited": false, "score": 0, "creation_date": 1539048391, "post_id": 52711982, "comment_id": 92350125, "body": "That second part doesn&#39;t work, not sure what the first part does."}, {"owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "reply_to_user": {"reputation": 1279, "user_id": 781970, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef1e51a7a1e596d943685c7d93a4d071?s=128&d=identicon&r=PG", "display_name": "JanuskaE", "link": "https://stackoverflow.com/users/781970/januskae"}, "edited": false, "score": 0, "creation_date": 1539048578, "post_id": 52711982, "comment_id": 92350160, "body": "Yeah I realized that and removed it. But the first part or a variation should work"}, {"owner": {"reputation": 1279, "user_id": 781970, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef1e51a7a1e596d943685c7d93a4d071?s=128&d=identicon&r=PG", "display_name": "JanuskaE", "link": "https://stackoverflow.com/users/781970/januskae"}, "edited": false, "score": 0, "creation_date": 1539048936, "post_id": 52711982, "comment_id": 92350215, "body": "Wow, that fixed it. Can you tell me why?"}, {"owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "reply_to_user": {"reputation": 1279, "user_id": 781970, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef1e51a7a1e596d943685c7d93a4d071?s=128&d=identicon&r=PG", "display_name": "JanuskaE", "link": "https://stackoverflow.com/users/781970/januskae"}, "edited": false, "score": 0, "creation_date": 1539049574, "post_id": 52711982, "comment_id": 92350336, "body": "Updated my answer but basically <code>require</code> will load a ruby file only if it has not already been loaded.  Doing the require&#39;s inside the <code>Rakefile</code> should required any libraries need by your task."}], "tags": [], "owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "is_accepted": false, "score": 1, "last_activity_date": 1539049804, "last_edit_date": 1539049804, "creation_date": 1539047166, "answer_id": 52711982, "question_id": 52711764, "link": "https://stackoverflow.com/questions/52711764/rake-cannot-load-such-file-unit-test/52711982#52711982", "title": "Rake cannot load such file Unit Test", "body": "<p>What about trying to add something like this to the top of your Rakefile, you might need to modify this to only require files needed by your rake task.</p>\n\n<pre><code>Dir[File.join(__dir__, \"/**/*.rb\")].each do |file|\n  require file\nend\n</code></pre>\n\n<p>More specifically for your case this would work:</p>\n\n<pre><code>my_files = FileList['home/lib/radar_mon/*.rb', 'home/tests/radar_mon.*rb']\n\nmy_files.each do |file|\n  require file\nend\n\ntask default: %w[test]\n\ntask :test do\n  ruby \"tests/radar_mon/test_geoname.rb\"\nend\n</code></pre>\n\n<p>This works because Rake is handling the requires in this case recursively.  <code>FileList</code> is provided by <code>rake</code>.</p>\n\n<p>For more info you might wanna refer to the <a href=\"http://github.com/ruby/rake\" rel=\"nofollow noreferrer\">rake gem documentation</a>\nand perhaps <a href=\"http://www.virtuouscode.com/2014/04/24/rake-part-4-pathmap/\" rel=\"nofollow noreferrer\">http://www.virtuouscode.com/2014/04/24/rake-part-4-pathmap/</a></p>\n"}], "owner": {"reputation": 1279, "user_id": 781970, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef1e51a7a1e596d943685c7d93a4d071?s=128&d=identicon&r=PG", "display_name": "JanuskaE", "link": "https://stackoverflow.com/users/781970/januskae"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 152, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1539049804, "creation_date": 1539045165, "last_edit_date": 1539048784, "question_id": 52711764, "link": "https://stackoverflow.com/questions/52711764/rake-cannot-load-such-file-unit-test", "title": "Rake cannot load such file Unit Test", "body": "<p>I'm want to automate testing with rake. \nWhen I run this from the command prompt, in the home directory, my tests run fine.</p>\n\n<pre><code>ruby -I  lib/radar_mon/ tests/radar_mon/test_geoname.rb\n</code></pre>\n\n<p>my Rakefile looks like this:</p>\n\n<pre><code>task default: %w[test]\n\ntask :test do\n   ruby \"tests/radar_mon/test_geoname.rb\"\nend\n</code></pre>\n\n<p>my test file test_geoname.rb looks like this</p>\n\n<pre><code>require 'test/unit'\nrequire 'geoname'\n\nclass TestGeoname &lt; Test::Unit::TestCase\n   def test_first\n      g = Geoname.new( [0.0,0.0] )\n      assert_equal( [0.0,0.0], g.location)\n   end\nend\n</code></pre>\n\n<p>Library structure is like this</p>\n\n<pre><code>home/lib/radar_mon/geoname.rb\n\nhome/tests/radar_mon/test_geoname.rb\n\nhome/Rakefile\n</code></pre>\n\n<p>How can I configure my rake file to run the test? I'm not supposed to change the require statement in the test file.</p>\n\n<pre><code>/home/pi/.rvm/rubies/ruby-2.2.10/bin/ruby tests/radar_mon/test_geoname.rb\ntests/radar_mon/test_geoname.rb:2:in `require_relative': cannot load such file -- /home/pi/Documents/HurricaneTracker/tests/radar_mon/geoname (LoadError)\n        from tests/radar_mon/test_geoname.rb:2:in `&lt;main&gt;'\nrake aborted!\n</code></pre>\n\n<p>Not sure if it matters but I'm using rvm.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 0, "creation_date": 1539044269, "post_id": 52711610, "comment_id": 92349386, "body": "what about a <code>preventDefault()</code> ?"}], "answers": [{"tags": [], "owner": {"reputation": 2205, "user_id": 591172, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/475c453e241134dd9e51fc6b1ada721e?s=128&d=identicon&r=PG", "display_name": "Sean", "link": "https://stackoverflow.com/users/591172/sean"}, "is_accepted": true, "score": 0, "last_activity_date": 1539118712, "creation_date": 1539118712, "answer_id": 52729242, "question_id": 52711610, "link": "https://stackoverflow.com/questions/52711610/submitted-an-embedded-link-to-remote-in-a-form-remote-causes-form-ajax-to-fire/52729242#52729242", "title": "Submitted an embedded link_to remote in a form remote causes form ajax to fire", "body": "<p>So, the approach I took was to check for the object type I'm dealing with in the javascript using similar code as below (you could take it a step further and check ID's for multiple forms -- or what we did in our actual code was to <code>extend</code> the javascript and pass option variables):</p>\n\n<pre><code>&lt;script&gt;\n    $('#edit_profile_1').on('ajax:before', function(e) {\n        if ($(e.target).is('form')) {\n            alert('do something with form');\n        } else {\n            alert('do something with a non-form');\n        }\n    }).on('ajax:success', function(e) {\n        if ($(e.target).is('form')) {\n            // ...\n        } else {\n            // ...\n        }\n    });\n&lt;/script&gt;\n</code></pre>\n\n<p>Not sure if this is the most efficient way of handling this, but it's working the purposes for what we need.</p>\n"}], "owner": {"reputation": 2205, "user_id": 591172, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/475c453e241134dd9e51fc6b1ada721e?s=128&d=identicon&r=PG", "display_name": "Sean", "link": "https://stackoverflow.com/users/591172/sean"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "accepted_answer_id": 52729242, "answer_count": 1, "score": 0, "last_activity_date": 1539118712, "creation_date": 1539043550, "question_id": 52711610, "link": "https://stackoverflow.com/questions/52711610/submitted-an-embedded-link-to-remote-in-a-form-remote-causes-form-ajax-to-fire", "title": "Submitted an embedded link_to remote in a form remote causes form ajax to fire", "body": "<p>Consider the code below:</p>\n\n<pre><code>&lt;script&gt;\n  $('#edit_profile_1').on('ajax:before', function(e) {\n      alert('ajax:before');\n  }).on('ajax:success', function(e) {\n      // the form saved, alert the user via frontend visual changes\n  });\n&lt;/script&gt;\n\n&lt;%= form_for @profile, remote: true do |f| %&gt;\n    &lt;p&gt;... Some stuff in form ...&lt;/p&gt;\n    &lt;%= link_to some_path(@profile.some_fk_id), remote: true do %&gt;\n        Some Link\n    &lt;% end %&gt;\n    &lt;%= f.button :submit do %&gt;\n        Save\n    &lt;% end %&gt;\n    &lt;p&gt;... some footer stuff&lt;/p&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>When submitting the form above, everything works as expected.  However, when clicking on the <code>&lt;% link_to %&gt;</code> in the above form, it also fires the form's ajax.</p>\n\n<p>When a user clicks on the link in the form, the logic is to fire an access check on the backend controller and determines if a <code>javascript</code> modal partial loads or doesn't load (based on some business logic).  As it stands, the form saves (which is not what we want at when they click the link).</p>\n\n<p>The question I have is how do you keep the form remote from firing, when I want just the links remote to fire?</p>\n"}, {"tags": ["ruby", "path"], "comments": [{"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 2, "creation_date": 1539041308, "post_id": 52711222, "comment_id": 92348772, "body": "<code>__dir__</code> does not depend on where you call the script. What&#39;s wrong with that solution?"}, {"owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "reply_to_user": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1539043939, "post_id": 52711222, "comment_id": 92349305, "body": "what are you trying to do with <code>.csv</code> files in this project? But you should be able to use relative path as @TomLord has suggested."}, {"owner": {"reputation": 859, "user_id": 7227222, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ec1eb8473ab73ded224fbbdc2414005?s=128&d=identicon&r=PG&f=1", "display_name": "AlbertMunichMar", "link": "https://stackoverflow.com/users/7227222/albertmunichmar"}, "edited": false, "score": 0, "creation_date": 1539046776, "post_id": 52711222, "comment_id": 92349853, "body": "yeah it works. File.dirname(<b>dir</b>) works, not with the expand_path"}], "owner": {"reputation": 859, "user_id": 7227222, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ec1eb8473ab73ded224fbbdc2414005?s=128&d=identicon&r=PG&f=1", "display_name": "AlbertMunichMar", "link": "https://stackoverflow.com/users/7227222/albertmunichmar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 24, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1539065926, "creation_date": 1539040338, "last_edit_date": 1539065926, "question_id": 52711222, "link": "https://stackoverflow.com/questions/52711222/why-does-absolute-path-depend-on-where-we-call-the-script", "title": "Why does absolute path depend on where we call the script?", "body": "<p>I have the following structure in my computer:</p>\n\n<pre><code>.\n\u251c\u2500\u2500 README.md\n\u251c\u2500\u2500 Rakefile\n\u251c\u2500\u2500 lib\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 box_office.rb\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 movies.csv\n\u2514\u2500\u2500 spec\n    \u2514\u2500\u2500 box_office_spec.rb\n</code></pre>\n\n<p>When I run <code>box.office.rb</code>, I want to load the <code>movies.csv</code> file. If I hard-code the path, it works:</p>\n\n<pre><code>current_directory = Dir.pwd\nfile_path = \"#{current_directory}/lib/movies.csv\"\nputs file_path\n</code></pre>\n\n<p>How can I do this without hard-coding the path (this <code>lib/</code> directory)? I need the current directory of the file, where I do ruby: <code>XXXX.rb</code>.</p>\n\n<p>I've tried:</p>\n\n<pre><code>current_directory = File.expand_path(File.dirname(__dir__))\nputs current_directory\n\ncurrent_directory = Dir.pwd\n\npath = Pathname.new(__FILE__)\np path.realpath\n</code></pre>\n"}, {"tags": ["ruby", "rspec"], "answers": [{"tags": [], "owner": {"reputation": 14511, "user_id": 384417, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/966d07471c4adb05fed0e12d31e36584?s=128&d=identicon&r=PG", "display_name": "rewritten", "link": "https://stackoverflow.com/users/384417/rewritten"}, "is_accepted": true, "score": 1, "last_activity_date": 1539166117, "last_edit_date": 1539166117, "creation_date": 1539036322, "answer_id": 52710713, "question_id": 52710563, "link": "https://stackoverflow.com/questions/52710563/when-would-you-use-spies-over-doubles-in-rspec/52710713#52710713", "title": "When would you use spies over doubles in Rspec?", "body": "<p>A spy tracks the calls that are made onto it (the messages it is sent, specifically). So you use a spy whenever you need to assert that a specific call is made on a collaborator. </p>\n\n<p>The typical use case is to check that your implementation is/isn\u2019t using the external collaborator depending on input. Say you intend to conditionally log, or you might check that a job is enqueued with specific arguments, or a certain mailer method is called... </p>\n\n<p>Spies are the tool to guarantee that your objects are cooperating correctly.</p>\n\n<p><em>UPDATE</em></p>\n\n<p>Examples can be found in @meta's answer, <a href=\"https://stackoverflow.com/a/52717158/384417\">https://stackoverflow.com/a/52717158/384417</a>. </p>\n\n<p>A simple use case with code is the logger one:</p>\n\n<pre><code>class SomeCommand\n  def call(arg:, other:)\n    if arg &lt;= 0\n      logger.warn(\"args should be positive\")\n    else\n      logger.debug(\"all fine\")\n    end\n    # more\n  end\n\n  def logger\n    Rails.logger # for instance\n  end\nend\n\ndescribe SomeCommand\n  let(:logger) { spy('Logger') }\n\n  # replace collaborator\n  before { allow(subject).to receive(:logger) { logger } }\n\n  context 'with negative value' do\n    it 'warns' do\n      subject.call(arg: -1, other: 6)\n      expect(logger).to have_received(:warn)\n      expect(logger).not_to have_received(:debug)\n    end\n  end\n\n  context 'with positive value' do\n    it 'logs as debug' do\n      subject.call(arg: 1, other: 6)\n      expect(logger).not_to have_received(:warn)\n      expect(logger).to have_received(:debug)\n    end\n  end\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 14511, "user_id": 384417, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/966d07471c4adb05fed0e12d31e36584?s=128&d=identicon&r=PG", "display_name": "rewritten", "link": "https://stackoverflow.com/users/384417/rewritten"}, "edited": false, "score": 0, "creation_date": 1539166430, "post_id": 52717158, "comment_id": 92400256, "body": "&quot;You can&#39;t set what spy is returning&quot; this is not completely correct. You can set up responses on a spy the same way you set up responses on a double, using <code>allow(spy).to_receive(:msg)</code> using whatever response configuration mechanism. Documentation in <a href=\"https://relishapp.com/rspec/rspec-mocks/v/3-8/docs/configuring-responses\" rel=\"nofollow noreferrer\">relishapp.com/rspec/rspec-mocks/v/3-8/docs/&hellip;</a>"}, {"owner": {"reputation": 4338, "user_id": 299774, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/eab8557a9cb59427455bac3cc59d2802?s=128&d=identicon&r=PG", "display_name": "Grzegorz", "link": "https://stackoverflow.com/users/299774/grzegorz"}, "reply_to_user": {"reputation": 14511, "user_id": 384417, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/966d07471c4adb05fed0e12d31e36584?s=128&d=identicon&r=PG", "display_name": "rewritten", "link": "https://stackoverflow.com/users/384417/rewritten"}, "edited": false, "score": 0, "creation_date": 1539187871, "post_id": 52717158, "comment_id": 92413610, "body": "Thanks, you are correct. What I meant was that with this interface you (obviously) can&#39;t do stuff like this <code>.to have_received().and_returned(something)</code>"}, {"owner": {"reputation": 14511, "user_id": 384417, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/966d07471c4adb05fed0e12d31e36584?s=128&d=identicon&r=PG", "display_name": "rewritten", "link": "https://stackoverflow.com/users/384417/rewritten"}, "edited": false, "score": 1, "creation_date": 1539333715, "post_id": 52717158, "comment_id": 92472968, "body": "Well you indeed can, on partial doubles. Pure spies are not backed with an original implementation. If you need to check the original impelmentation, you have to do <code>allow(partial).to receive(:msg).and_wrap_original { |m, *args| m.call(*args).tap { |resp| @resp = resp } }</code>. Then you can <code>expect(@resp).to something</code> after you have called it. Again, this is not a spy, but a partial doouble with wrapping."}], "tags": [], "owner": {"reputation": 4338, "user_id": 299774, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/eab8557a9cb59427455bac3cc59d2802?s=128&d=identicon&r=PG", "display_name": "Grzegorz", "link": "https://stackoverflow.com/users/299774/grzegorz"}, "is_accepted": false, "score": 0, "last_activity_date": 1539187969, "last_edit_date": 1539187969, "creation_date": 1539075719, "answer_id": 52717158, "question_id": 52710563, "link": "https://stackoverflow.com/questions/52710563/when-would-you-use-spies-over-doubles-in-rspec/52717158#52717158", "title": "When would you use spies over doubles in Rspec?", "body": "<p>I'd add one more case on top what <a href=\"https://stackoverflow.com/a/52710713/299774\">rewritten wrote</a></p>\n\n<p>Spies give you some flexibility. If you need to check that the method was called you can do it with mocks in a before:</p>\n\n<pre><code>before do\n  expect(foo).to receive(:do_stuff)\nend\n\nspecify do\n  bar.run\nend\n</code></pre>\n\n<p>But <code>before</code> is not the best place to add expectations. You're <a href=\"https://en.wikipedia.org/wiki/Test-driven_development#Test_structure\" rel=\"nofollow noreferrer\">supposed to separate setup, run and test stages</a>. You can do this:</p>\n\n<pre><code>specify do \n  expect(foo).to receive(:do_stuff)\n  bar.run\nend\n</code></pre>\n\n<p>But it looks better to do</p>\n\n<pre><code>before do\n  bar.run\nend\n\nspecify do\n  expect(foo).to have_received(:do_stuff)\nend\n</code></pre>\n\n<p>You'd have cleaner code when there's more stuff to check</p>\n\n<pre><code>before { bar.run }\n\nspecify do\n  expect(foo).to have_received(:do_stuff)\nend\n\ncontext 'with some special conditions' do\n  before { set_up_special_conditions }\n\n  specify do\n    expect(foo).not_to have_received(:do_stuff)\n  end\nend\n</code></pre>\n\n<p>It's maybe not a big deal, and you could still live with</p>\n\n<pre><code>specify do\n  bar.run\n  expect(foo).to have_received(:do_stuff)\nend\n\ncontext 'with some special conditions' do\n  before { set_up_special_conditions } # * check the note at the bottom\n\n  specify do\n    bar.run\n    expect(foo).not_to have_received(:do_stuff)\n  end\nend\n</code></pre>\n\n<p>But I think a good approach to define contexts is to have only essential differences (<code>set_up_special_conditions</code> and <code>expect(foo).not_to have_received(:do_stuff)</code> in the example) explicitly mentioned. Whatever is not different than the context \"above\" should not appear in more specific context \"below\". It helps with managing bigger specs.</p>\n\n<p>*Note: I'm not sure about the order of the <code>before</code> blocks defined this way, and after looking at <a href=\"https://relishapp.com/rspec/rspec-core/v/2-2/docs/hooks/before-and-after-hooks\" rel=\"nofollow noreferrer\">rspec docs</a> I'm not sure this order is guaranteed. Can't check right that moment. But for just for demonstration purposes we can pretend that <code>before { set_up_special_conditions }</code> will run before <code>before { bar.run }</code>. But if that's not the case - there are other ways to ensure that, but it seems outside of the scope of this question.</p>\n"}], "owner": {"reputation": 5850, "user_id": 4501354, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/1230cfcc7f68488ad19d0022cf7b1a93?s=128&d=identicon&r=PG&f=1", "display_name": "Donato", "link": "https://stackoverflow.com/users/4501354/donato"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 215, "favorite_count": 0, "accepted_answer_id": 52710713, "answer_count": 2, "score": 0, "last_activity_date": 1539187969, "creation_date": 1539035381, "last_edit_date": 1539063885, "question_id": 52710563, "link": "https://stackoverflow.com/questions/52710563/when-would-you-use-spies-over-doubles-in-rspec", "title": "When would you use spies over doubles in Rspec?", "body": "<p>I can understand the application of test doubles in Rspec. You might want to test a method, which has an object that performs an expensive network query. So you use a fill-in (the test double) to return a value that you need from the expensive operation:</p>\n\n<pre><code>class Contact\n  def update\n    @api_result = AmazonAPI.perform_expensive_task\n    self.status = @api_result['status']\n    self.last_checked = @api_result['last_checked']\n    save!\n  end\nend\n\ndescribe Contact do\n  subject { Contact.new }\n\n  describe '#update' do\n    it \"updates contact with api criteria\" do \n      api = double('Amazon API')\n      allow(api).to receive(:perform_expensive_task).and_return({ status: 1, last_checked: Time.now })\n      subject.update\n      expect(subject.status).to eq 1\n    end\n  end\nend\n</code></pre>\n\n<p>We need to test the update method, but we do not want to test the API query. So we use a test double and stub it, to work around the requirement.</p>\n\n<p>But then I come across spies. And I see no use case for this. This is the example provided in the tutorial:</p>\n\n<pre><code>let(:order) do\n  spy('Order', process_line_items: nil, charge_credit_card: true, send_email: true)\nend\n\nbefore(:example) do\n  order.process_line_items\n  order.charge_credit_card\n  order.send_email\nend\n\nit 'calls #process_line_items on the order' do\n  expect(order).to have_received(:process_line_items)\nend\n\nit 'calls #charge_credit_card on the order' do\n  expect(order).to have_received(:charge_credit_card)\nend\n\nit 'calls #send_email on the order' do\n  expect(order).to have_received(:send_email)\nend\n</code></pre>\n\n<p>This specific example explicitly calls the three methods it later checks whether it called. Of course, it called them. It did it right in the test. In real situations, when should I use spies?</p>\n"}, {"tags": ["ruby"], "answers": [{"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 2, "creation_date": 1539035279, "post_id": 52710291, "comment_id": 92347273, "body": "Extracting the strings into an array then converting the strings to integers in a separate step is wasteful. Better to convert the strings to integers as they being extracted, as @Bartosz has done."}], "tags": [], "owner": {"reputation": 548, "user_id": 1991143, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/621ca75fc83f6387c31eefbb2e94262b?s=128&d=identicon&r=PG", "display_name": "Alexander Lazarov", "link": "https://stackoverflow.com/users/1991143/alexander-lazarov"}, "is_accepted": false, "score": 1, "last_activity_date": 1539033759, "creation_date": 1539033759, "answer_id": 52710291, "question_id": 52710264, "link": "https://stackoverflow.com/questions/52710264/extract-a-value-from-an-array-of-objects/52710291#52710291", "title": "Extract a value from an array of objects", "body": "<p>You can use something like:</p>\n\n<pre><code>data.map { |v| v[:value] }.map(&amp;:to_i)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1197, "user_id": 400743, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a0d5c51291898c92154ba4ac1c56cd6?s=128&d=identicon&r=PG", "display_name": "Bartosz Pietraszko", "link": "https://stackoverflow.com/users/400743/bartosz-pietraszko"}, "is_accepted": true, "score": 5, "last_activity_date": 1539033782, "creation_date": 1539033782, "answer_id": 52710295, "question_id": 52710264, "link": "https://stackoverflow.com/questions/52710264/extract-a-value-from-an-array-of-objects/52710295#52710295", "title": "Extract a value from an array of objects", "body": "<pre><code> ary = [{:type=&gt;\"adSource\", :value=&gt;\"27\"}, {:type=&gt;\"adSource\", :value=&gt;\"28\"}]\n ary.map{ |h| h[:value].to_i }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 909, "user_id": 9534861, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-HEqJQasw6sM/AAAAAAAAAAI/AAAAAAAABHA/HiEIzDPH-l0/photo.jpg?sz=128", "display_name": "Saqib Shahzad", "link": "https://stackoverflow.com/users/9534861/saqib-shahzad"}, "reply_to_user": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1539071382, "post_id": 52710354, "comment_id": 92357143, "body": "Sorry for the repetition, but when I typed the answer, there were zero answers for this post. Again, I am sorry for any inconvenience."}], "tags": [], "owner": {"reputation": 909, "user_id": 9534861, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-HEqJQasw6sM/AAAAAAAAAAI/AAAAAAAABHA/HiEIzDPH-l0/photo.jpg?sz=128", "display_name": "Saqib Shahzad", "link": "https://stackoverflow.com/users/9534861/saqib-shahzad"}, "is_accepted": false, "score": 1, "last_activity_date": 1539034102, "creation_date": 1539034102, "answer_id": 52710354, "question_id": 52710264, "link": "https://stackoverflow.com/questions/52710264/extract-a-value-from-an-array-of-objects/52710354#52710354", "title": "Extract a value from an array of objects", "body": "<pre><code>arr = [{:type=&gt;\"adSource\", :value=&gt;\"27\"}, {:type=&gt;\"adSource\", :value=&gt;\"28\"}]\n</code></pre>\n\n<p>And then you can get your required result by:</p>\n\n<pre><code>arr.map{|x| x[:value].to_i}\n</code></pre>\n"}], "owner": {"reputation": 16919, "user_id": 152825, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e990c2bcb4dfb7fd0c398098da9bca59?s=128&d=identicon&r=PG", "display_name": "timpone", "link": "https://stackoverflow.com/users/152825/timpone"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "accepted_answer_id": 52710295, "answer_count": 3, "score": -1, "last_activity_date": 1539059839, "creation_date": 1539033616, "last_edit_date": 1539059839, "question_id": 52710264, "link": "https://stackoverflow.com/questions/52710264/extract-a-value-from-an-array-of-objects", "title": "Extract a value from an array of objects", "body": "<p>I have an array as follows:</p>\n\n<pre><code> [{:type=&gt;\"adSource\", :value=&gt;\"27\"}, {:type=&gt;\"adSource\", :value=&gt;\"28\"}]\n</code></pre>\n\n<p>I'd like to get <code>[27,28]</code>, converted to int. Is there a way to do this?</p>\n"}, {"tags": ["json", "ruby", "validation"], "answers": [{"comments": [{"owner": {"reputation": 14511, "user_id": 384417, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/966d07471c4adb05fed0e12d31e36584?s=128&d=identicon&r=PG", "display_name": "rewritten", "link": "https://stackoverflow.com/users/384417/rewritten"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1539035941, "post_id": 52710422, "comment_id": 92347457, "body": "Added version info + link"}], "tags": [], "owner": {"reputation": 14511, "user_id": 384417, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/966d07471c4adb05fed0e12d31e36584?s=128&d=identicon&r=PG", "display_name": "rewritten", "link": "https://stackoverflow.com/users/384417/rewritten"}, "is_accepted": true, "score": 3, "last_activity_date": 1539035916, "last_edit_date": 1539035916, "creation_date": 1539034531, "answer_id": 52710422, "question_id": 52710167, "link": "https://stackoverflow.com/questions/52710167/check-existence-of-json-nested-attribute/52710422#52710422", "title": "Check existence of JSON nested attribute", "body": "<p>You can use <code>Hash#dig</code> which will just return <code>nil</code> as soon as a key is not found:</p>\n\n<pre><code>json_obj.dig('fake', 'name')\n</code></pre>\n\n<p>I assume you are on a recent version of ruby (>= 2.3). </p>\n\n<p>Documentation for <code>dig</code> here: <a href=\"http://ruby-doc.org/core-2.5.1/Hash.html#method-i-dig\" rel=\"nofollow noreferrer\">http://ruby-doc.org/core-2.5.1/Hash.html#method-i-dig</a></p>\n"}], "owner": {"reputation": 3680, "user_id": 7723882, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/6aUwy.png?s=128&g=1", "display_name": "Matias Barrios", "link": "https://stackoverflow.com/users/7723882/matias-barrios"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 131, "favorite_count": 0, "accepted_answer_id": 52710422, "answer_count": 1, "score": 0, "last_activity_date": 1539035916, "creation_date": 1539033083, "question_id": 52710167, "link": "https://stackoverflow.com/questions/52710167/check-existence-of-json-nested-attribute", "title": "Check existence of JSON nested attribute", "body": "<p>I need to test whether a nested attribute exists in a JSON object before doing something with it. How can I accomplish this?</p>\n\n<p>I know I can test one level at the time but this seems crazy when is a complex data structure. (Ruby code)</p>\n\n<pre><code>#!/usr/bin/ruby\n\nrequire 'json'\n\njson_string = '\n    {\n        \"name\" : \"Matias\",\n        \"age\" : 31,\n        \"team\" : {\n            \"name\" : \"Some team\",\n            \"size\" : 3\n        }\n\n    }\n'\n\njson_obj = JSON.parse(json_string)\n\n\nputs json_obj['name'] if json_obj['fake']['name']\n</code></pre>\n"}, {"tags": ["ruby", "validation", "date", "datetime", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 1905, "user_id": 232838, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8342950f34a66d9ec7cfe10b33d5494c?s=128&d=identicon&r=PG", "display_name": "koffeinfrei", "link": "https://stackoverflow.com/users/232838/koffeinfrei"}, "edited": false, "score": 0, "creation_date": 1539026815, "post_id": 52708777, "comment_id": 92343912, "body": "&quot;But if today is October 8, I need to pick up the next 10&quot; -&gt; do you mean &quot;But if today is October 18, I need to pick up the next 10&quot;, i.e. a day &gt; 10?"}, {"owner": {"reputation": 65, "user_id": 5009179, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-fONrH5SuAIQ/AAAAAAAAAAI/AAAAAAAABOA/obJfG5aYtKo/photo.jpg?sz=128", "display_name": "Denis Gubaua", "link": "https://stackoverflow.com/users/5009179/denis-gubaua"}, "reply_to_user": {"reputation": 1905, "user_id": 232838, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8342950f34a66d9ec7cfe10b33d5494c?s=128&d=identicon&r=PG", "display_name": "koffeinfrei", "link": "https://stackoverflow.com/users/232838/koffeinfrei"}, "edited": false, "score": 0, "creation_date": 1539034950, "post_id": 52708777, "comment_id": 92347167, "body": "@koffeinfrei, no... I need 3 days interval before generate, so if today is october 08, I need november 10"}], "answers": [{"comments": [{"owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "edited": false, "score": 0, "creation_date": 1539032317, "post_id": 52709053, "comment_id": 92346229, "body": "Pretty clean. However this answer is not complete since the the 8th, 9th and 10th should return the next month, not the current."}, {"owner": {"reputation": 1905, "user_id": 232838, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8342950f34a66d9ec7cfe10b33d5494c?s=128&d=identicon&r=PG", "display_name": "koffeinfrei", "link": "https://stackoverflow.com/users/232838/koffeinfrei"}, "reply_to_user": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "edited": false, "score": 0, "creation_date": 1539072252, "post_id": 52709053, "comment_id": 92357638, "body": "@JohanWentholt Thanks you&#39;re right, I misunderstood the question. Updated my answer."}], "tags": [], "owner": {"reputation": 1905, "user_id": 232838, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8342950f34a66d9ec7cfe10b33d5494c?s=128&d=identicon&r=PG", "display_name": "koffeinfrei", "link": "https://stackoverflow.com/users/232838/koffeinfrei"}, "is_accepted": false, "score": 3, "last_activity_date": 1539078454, "last_edit_date": 1539078454, "creation_date": 1539027713, "answer_id": 52709053, "question_id": 52708777, "link": "https://stackoverflow.com/questions/52708777/how-to-pick-the-next-10th-of-the-month-ruby/52709053#52709053", "title": "How to pick the next 10th of the month ruby", "body": "<p>You can make use of a <a href=\"http://ruby-doc.org/core-2.0.0/Enumerator/Lazy.html\" rel=\"nofollow noreferrer\">lazy enumerator</a> in ruby to find the next valid day, starting today.</p>\n\n<pre><code>(Date.today..Date::Infinity.new)\n  .lazy\n  .find { |date| date.day == 7 }\n  .next_day(3)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "edited": false, "score": 0, "creation_date": 1539031856, "post_id": 52709619, "comment_id": 92346017, "body": "Alternatively you could replace <code>(month - 1) % 12 + 1</code> with <code>month &gt; 12 ? 1 : month</code>. Since I don&#39;t like having <i>if</i> statements in method call parameters I&#39;ve chosen the former. This is however just personal preference."}, {"owner": {"reputation": 65, "user_id": 5009179, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-fONrH5SuAIQ/AAAAAAAAAAI/AAAAAAAABOA/obJfG5aYtKo/photo.jpg?sz=128", "display_name": "Denis Gubaua", "link": "https://stackoverflow.com/users/5009179/denis-gubaua"}, "edited": false, "score": 0, "creation_date": 1539035248, "post_id": 52709619, "comment_id": 92347257, "body": "This solved my problem and code is more clean than mine, thank you!  @Johan &gt; thanks for suggest this"}], "tags": [], "owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "is_accepted": false, "score": 3, "last_activity_date": 1539030839, "last_edit_date": 1539030839, "creation_date": 1539030307, "answer_id": 52709619, "question_id": 52708777, "link": "https://stackoverflow.com/questions/52708777/how-to-pick-the-next-10th-of-the-month-ruby/52709619#52709619", "title": "How to pick the next 10th of the month ruby", "body": "<p>You could use something like this:</p>\n\n<pre><code>def next_10th(date)\n  year, month, day = date.year, date.month, date.day\n\n  month += 1 if day &gt; 7\n  year += 1 if month &gt; 12\n\n  Date.new(year, (month - 1) % 12 + 1, 10)\nend\n</code></pre>\n\n<p></p>\n\n<pre><code>next_10th(Date.new(2017, 11, 7)).to_s\n#=&gt; \"2017-11-10\"\n\nnext_10th(Date.new(2017, 11, 8)).to_s\n#=&gt; \"2017-12-10\"\n\nnext_10th(Date.new(2017, 11, 10)).to_s\n#=&gt; \"2017-12-10\"\n\nnext_10th(Date.new(2017, 12, 8)).to_s\n#=&gt; \"2018-01-10\"\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "edited": false, "score": 0, "creation_date": 1539032766, "post_id": 52709978, "comment_id": 92346394, "body": "I&#39;ve completely forgotten about <i>next_month</i>. I&#39;ll leave my answer as is since otherwise it&#39;s too similar to yours."}, {"owner": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "reply_to_user": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "edited": false, "score": 0, "creation_date": 1539033480, "post_id": 52709978, "comment_id": 92346632, "body": "@JohanWentholt, I came out with a method pretty close to yours, but you&#39;ve been faster (got my up). So, I had to review the <a href=\"https://ruby-doc.org/stdlib-2.5.1/libdoc/date/rdoc/Date.html\" rel=\"nofollow noreferrer\">ruby-doc.org/stdlib-2.5.1/libdoc/date/rdoc/Date.html</a> for finding an alternative. ;)"}, {"owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "edited": false, "score": 0, "creation_date": 1539033741, "post_id": 52709978, "comment_id": 92346720, "body": "The answer looks cleaner when removing the old code. I&#39;d also remove the date parsing at the start and <i>to_s</i> at the end of the method. Furthermore the <i>to_i</i> call is unnecessary since a <i>Rational</i> can be compared with an <i>Integer</i> without issue. A clean answer is easier to understand."}, {"owner": {"reputation": 65, "user_id": 5009179, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-fONrH5SuAIQ/AAAAAAAAAAI/AAAAAAAABOA/obJfG5aYtKo/photo.jpg?sz=128", "display_name": "Denis Gubaua", "link": "https://stackoverflow.com/users/5009179/denis-gubaua"}, "edited": false, "score": 0, "creation_date": 1539035677, "post_id": 52709978, "comment_id": 92347391, "body": "Thanks for suggest this Is very useful and clean"}], "tags": [], "owner": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "is_accepted": true, "score": 4, "last_activity_date": 1539034126, "last_edit_date": 1539034126, "creation_date": 1539032071, "answer_id": 52709978, "question_id": 52708777, "link": "https://stackoverflow.com/questions/52708777/how-to-pick-the-next-10th-of-the-month-ruby/52709978#52709978", "title": "How to pick the next 10th of the month ruby", "body": "<p>Another option:</p>\n\n<pre><code>def next_10th_deadline_from date\n  deadline = Date.new(date.year, date.month, 10)\n  deadline = deadline.next_month if (deadline - date) &lt; 3\n  deadline\nend\n</code></pre>\n\n<p><hr>\nOr if input string and output string:</p>\n\n<pre><code>def next_10th_deadline_from date\n  date = Date.parse date\n  deadline = Date.new(date.year, date.month, 10)\n  deadline = deadline.next_month if (deadline - date) &lt; 3\n  deadline.to_s\nend\n\nnext_10th_deadline_from '2018-12-07' #=&gt; \"2018-12-10\"\nnext_10th_deadline_from '2018-12-08' #=&gt; \"2019-01-10\"\n</code></pre>\n\n<hr>\n\n<p>To work <code>require 'date'</code></p>\n"}], "owner": {"reputation": 65, "user_id": 5009179, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-fONrH5SuAIQ/AAAAAAAAAAI/AAAAAAAABOA/obJfG5aYtKo/photo.jpg?sz=128", "display_name": "Denis Gubaua", "link": "https://stackoverflow.com/users/5009179/denis-gubaua"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 143, "favorite_count": 0, "accepted_answer_id": 52709978, "answer_count": 3, "score": 2, "last_activity_date": 1539078454, "creation_date": 1539026430, "question_id": 52708777, "link": "https://stackoverflow.com/questions/52708777/how-to-pick-the-next-10th-of-the-month-ruby", "title": "How to pick the next 10th of the month ruby", "body": "<p>I'm having a date calculation problem, which is confusing my logic.</p>\n\n<p>I have an application that accepts debit payments to a bank account, this charge must be generated at least three days before the day to be billed.</p>\n\n<p>I need to pick up the next tenth day of the month, which may be the current month or the next month, depending on the current day.</p>\n\n<p>For example, today is October 7, I need to get the next day 10, as long as starting today has an interval of three days, in this case I need to be returned October 10.</p>\n\n<p>But if today is October 8, I need to pick up the next 10, in which case I need to be returned November 10.</p>\n\n<p>What is the best solution to do this in Ruby?</p>\n"}, {"tags": ["ruby-on-rails", "node.js", "ruby"], "comments": [{"owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 0, "creation_date": 1539051384, "post_id": 52708521, "comment_id": 92350674, "body": "how have you installed ruby? are you using RVM?  did you try <a href=\"https://github.com/ai/autoprefixer-rails\" rel=\"nofollow noreferrer\">github.com/ai/autoprefixer-rails</a> ?"}, {"owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 0, "creation_date": 1539051734, "post_id": 52708521, "comment_id": 92350750, "body": "run your rails console and past the output of these: <code>ENV[&#39;NVM_PATH&#39;] ENV[&#39;NVM_BIN&#39;] ENV[&#39;PATH&#39;]</code>"}, {"owner": {"reputation": 2060, "user_id": 3944700, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/4df64cd1de5941fb49263a19d80f1482?s=128&d=identicon&r=PG&f=1", "display_name": "hashrocket", "link": "https://stackoverflow.com/users/3944700/hashrocket"}, "reply_to_user": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 0, "creation_date": 1539088527, "post_id": 52708521, "comment_id": 92367487, "body": "<code>ENV[&#39;NVM_PATH&#39;] and ENV[&#39;NVM_BIN&#39;]</code> both give me nil. `ENV[&#39;PATH&#39;] gives me /.rvm/rubies /ruby-2.5.1/bin:/Users/myname/.rvm/bin:/usr/local/bin:/usr/b&zwnj;&#8203;in:/bin:/usr/sbin:/s&zwnj;&#8203;bin"}, {"owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 0, "creation_date": 1539095380, "post_id": 52708521, "comment_id": 92372232, "body": "It&#39;s likely your environment <code>$PATH</code> is not correct in terminal configuration.  Please paste in your answer the output of <code>gem env</code> also what shell are you using?  bash? zsh ?"}], "answers": [{"comments": [{"owner": {"reputation": 3619, "user_id": 135160, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/ukXAo.jpg?s=128&g=1", "display_name": "anka", "link": "https://stackoverflow.com/users/135160/anka"}, "edited": false, "score": 0, "creation_date": 1560407565, "post_id": 52726454, "comment_id": 99727179, "body": "I experienced the same problem on Gitlab within our CI pipeline and using a ruby <code>2.5.3</code> container. Adding <code>curl -sL https:&#47;&#47;deb.nodesource.com&#47;setup_10.x | bash -</code> fixed the problem."}], "tags": [], "owner": {"reputation": 6018, "user_id": 3446655, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/AH6Ys.jpg?s=128&g=1", "display_name": "HarlemSquirrel", "link": "https://stackoverflow.com/users/3446655/harlemsquirrel"}, "is_accepted": false, "score": 17, "last_activity_date": 1539108517, "last_edit_date": 1539108517, "creation_date": 1539106290, "answer_id": 52726454, "question_id": 52708521, "link": "https://stackoverflow.com/questions/52708521/autoprefixer-doesn-t-support-node-v4-8-2-update-it/52726454#52726454", "title": "Autoprefixer doesn\u2019t support Node v4.8.2. Update it", "body": "<p>You need to update the version of Node.js installed. </p>\n\n<p>This issue was addressed here: <a href=\"https://github.com/ai/autoprefixer-rails/issues/144\" rel=\"noreferrer\">https://github.com/ai/autoprefixer-rails/issues/144</a></p>\n\n<p>If you have Node.js installed by <a href=\"https://github.com/creationix/nvm\" rel=\"noreferrer\">NPM</a> and your operating system package manager (such as <code>apt</code>, <code>dnf</code>, <code>yum</code>, or <code>pacman</code>), then remove the version installed by the OS package manager.</p>\n\n<pre><code># Using apt on Debian or Ubuntu based Linux distributions\nsudo apt remove nodejs\n</code></pre>\n\n<p>If you are using a recent version of Debian or Ubuntu you can install Node.js like so</p>\n\n<pre><code>curl -sL https://deb.nodesource.com/setup_10.x | sudo -E bash -\nsudo apt-get install -y nodejs\n</code></pre>\n\n<p>If using a <a href=\"https://github.com/docker-library/ruby/issues/226\" rel=\"noreferrer\">Ruby Docker container</a> add the following before installing the nodejs package. Notice that we are not using <code>sudo</code> in the container.</p>\n\n<pre><code>curl -sL https://deb.nodesource.com/setup_10.x | bash -\n</code></pre>\n\n<p>More information on installing and updating Node.js can be found here:\n<a href=\"https://nodejs.org/en/download/package-manager\" rel=\"noreferrer\">https://nodejs.org/en/download/package-manager</a></p>\n"}], "owner": {"reputation": 2060, "user_id": 3944700, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/4df64cd1de5941fb49263a19d80f1482?s=128&d=identicon&r=PG&f=1", "display_name": "hashrocket", "link": "https://stackoverflow.com/users/3944700/hashrocket"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5172, "favorite_count": 0, "answer_count": 1, "score": 5, "last_activity_date": 1539108517, "creation_date": 1539025181, "question_id": 52708521, "link": "https://stackoverflow.com/questions/52708521/autoprefixer-doesn-t-support-node-v4-8-2-update-it", "title": "Autoprefixer doesn\u2019t support Node v4.8.2. Update it", "body": "<p>I have a Rails app running Rails 5.2.1 and Ruby 2.5.1. When I run the Rails server, I get the following error:</p>\n\n<pre><code>Autoprefixer doesn\u2019t support Node v4.8.2. Update it.\n</code></pre>\n\n<p>When I go to the console to check the version of Node I have installed, with <code>node -v</code> I get:</p>\n\n<pre><code>v10.11.0\n</code></pre>\n\n<p>When I type <code>nvm ls</code>, I get:</p>\n\n<pre><code>default -&gt; node (-&gt; v10.11.0)\nnode -&gt; stable (-&gt; v10.11.0) (default)\nstable -&gt; 10.11 (-&gt; v10.11.0) (default)\niojs -&gt; N/A (default)\nlts/* -&gt; lts/carbon (-&gt; N/A)\nlts/argon -&gt; v4.9.1 (-&gt; N/A)\nlts/boron -&gt; v6.14.4 (-&gt; N/A)\nlts/carbon -&gt; v8.12.0 (-&gt; N/A)\n</code></pre>\n\n<p>I've looked at other answers on Stackoverflow, and most make mention of therubyracer gem, but I don't have that gem installed for this app. Where can this version of Node be hiding and how can I delete it?</p>\n"}, {"tags": ["ruby", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 177, "user_id": 10095385, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-AQNUq2AuhX0/AAAAAAAAAAI/AAAAAAAACeM/W_ToTsU2GKw/photo.jpg?sz=128", "display_name": "Sachin", "link": "https://stackoverflow.com/users/10095385/sachin"}, "edited": false, "score": 0, "creation_date": 1539023604, "post_id": 52708119, "comment_id": 92342627, "body": "I&#39;m getting the shift to copy over, but the employees of the shifts are not coming through.  Currently I have to put a similar function in the employee shifts controller, and would like a way to do it all in one."}, {"owner": {"reputation": 2958, "user_id": 3597730, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/d76b8f632aeb1d920d79d7dd5ab63097?s=128&d=identicon&r=PG", "display_name": "ruby_newbie", "link": "https://stackoverflow.com/users/3597730/ruby-newbie"}, "edited": false, "score": 0, "creation_date": 1539026562, "post_id": 52708119, "comment_id": 92343811, "body": "You need to include the employees in your @past_shift query.  so <code>@past_shift = Shift.find(params[:id]).includes(:employees)</code>"}, {"owner": {"reputation": 2496, "user_id": 3046905, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/692eb06201cbed91c3c6a9cf11ed0511?s=128&d=identicon&r=PG", "display_name": "Ilya Konyukhov", "link": "https://stackoverflow.com/users/3046905/ilya-konyukhov"}, "edited": false, "score": 0, "creation_date": 1539029061, "post_id": 52708119, "comment_id": 92344864, "body": "Please provide your data schema -- migrations for <code>shifts</code> and <code>employees</code> tables"}, {"owner": {"reputation": 2496, "user_id": 3046905, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/692eb06201cbed91c3c6a9cf11ed0511?s=128&d=identicon&r=PG", "display_name": "Ilya Konyukhov", "link": "https://stackoverflow.com/users/3046905/ilya-konyukhov"}, "edited": false, "score": 0, "creation_date": 1539029159, "post_id": 52708119, "comment_id": 92344902, "body": "<code>ActiveRecords</code>&#39;s <code>clone</code> methods generates a &quot;shallow&quot; copy of the model. No wonder that associated records not cloned: <a href=\"https://apidock.com/rails/ActiveRecord/Core/clone\" rel=\"nofollow noreferrer\">apidock.com/rails/ActiveRecord/Core/clone</a>"}, {"owner": {"reputation": 177, "user_id": 10095385, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-AQNUq2AuhX0/AAAAAAAAAAI/AAAAAAAACeM/W_ToTsU2GKw/photo.jpg?sz=128", "display_name": "Sachin", "link": "https://stackoverflow.com/users/10095385/sachin"}, "edited": false, "score": 0, "creation_date": 1539029436, "post_id": 52708119, "comment_id": 92345018, "body": "I&#39;m getting an undefined method &#39;includes&#39; when attempting this"}, {"owner": {"reputation": 177, "user_id": 10095385, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-AQNUq2AuhX0/AAAAAAAAAAI/AAAAAAAACeM/W_ToTsU2GKw/photo.jpg?sz=128", "display_name": "Sachin", "link": "https://stackoverflow.com/users/10095385/sachin"}, "edited": false, "score": 0, "creation_date": 1539029578, "post_id": 52708119, "comment_id": 92345071, "body": "I&#39;ve added the schema"}, {"owner": {"reputation": 177, "user_id": 10095385, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-AQNUq2AuhX0/AAAAAAAAAAI/AAAAAAAACeM/W_ToTsU2GKw/photo.jpg?sz=128", "display_name": "Sachin", "link": "https://stackoverflow.com/users/10095385/sachin"}, "reply_to_user": {"reputation": 2496, "user_id": 3046905, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/692eb06201cbed91c3c6a9cf11ed0511?s=128&d=identicon&r=PG", "display_name": "Ilya Konyukhov", "link": "https://stackoverflow.com/users/3046905/ilya-konyukhov"}, "edited": false, "score": 0, "creation_date": 1539030429, "post_id": 52708119, "comment_id": 92345438, "body": "Yes @IlyaKonyukhov, I&#39;ve also tried deep_dup as well with no luck."}], "answers": [{"comments": [{"owner": {"reputation": 177, "user_id": 10095385, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-AQNUq2AuhX0/AAAAAAAAAAI/AAAAAAAACeM/W_ToTsU2GKw/photo.jpg?sz=128", "display_name": "Sachin", "link": "https://stackoverflow.com/users/10095385/sachin"}, "edited": false, "score": 0, "creation_date": 1539031935, "post_id": 52709767, "comment_id": 92346064, "body": "First, thank you for taking the time to help.  When I attempted this method, I received the following error:  NoMethodError (undefined method `users&#39; for #&lt;Shift::ActiveRecord_Relation:0x00007fbd7048ee20&gt;)"}, {"owner": {"reputation": 2496, "user_id": 3046905, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/692eb06201cbed91c3c6a9cf11ed0511?s=128&d=identicon&r=PG", "display_name": "Ilya Konyukhov", "link": "https://stackoverflow.com/users/3046905/ilya-konyukhov"}, "reply_to_user": {"reputation": 177, "user_id": 10095385, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-AQNUq2AuhX0/AAAAAAAAAAI/AAAAAAAACeM/W_ToTsU2GKw/photo.jpg?sz=128", "display_name": "Sachin", "link": "https://stackoverflow.com/users/10095385/sachin"}, "edited": false, "score": 0, "creation_date": 1539032090, "post_id": 52709767, "comment_id": 92346135, "body": "Well, it means my assumptions were wrong and your Shift model does not have that <code>has_many</code> association. I think you need to create it."}, {"owner": {"reputation": 177, "user_id": 10095385, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-AQNUq2AuhX0/AAAAAAAAAAI/AAAAAAAACeM/W_ToTsU2GKw/photo.jpg?sz=128", "display_name": "Sachin", "link": "https://stackoverflow.com/users/10095385/sachin"}, "edited": false, "score": 0, "creation_date": 1539032216, "post_id": 52709767, "comment_id": 92346179, "body": "The purpose of what we are trying to accomplish is all of the users (aka employees) as well as all of their shifts be copied over week to week.  You are correct, the users and shifts are tied together by usershifts.  My previous attempts at cloning only copied over the shifts, along with using .dup, as well as .deep_dup.  Attempting your method returned error above"}, {"owner": {"reputation": 177, "user_id": 10095385, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-AQNUq2AuhX0/AAAAAAAAAAI/AAAAAAAACeM/W_ToTsU2GKw/photo.jpg?sz=128", "display_name": "Sachin", "link": "https://stackoverflow.com/users/10095385/sachin"}, "edited": false, "score": 0, "creation_date": 1539032365, "post_id": 52709767, "comment_id": 92346239, "body": "User model has a has_many :shifts, through :usershifts, and usershift model belongs_to both users and shifts."}, {"owner": {"reputation": 2496, "user_id": 3046905, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/692eb06201cbed91c3c6a9cf11ed0511?s=128&d=identicon&r=PG", "display_name": "Ilya Konyukhov", "link": "https://stackoverflow.com/users/3046905/ilya-konyukhov"}, "reply_to_user": {"reputation": 177, "user_id": 10095385, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-AQNUq2AuhX0/AAAAAAAAAAI/AAAAAAAACeM/W_ToTsU2GKw/photo.jpg?sz=128", "display_name": "Sachin", "link": "https://stackoverflow.com/users/10095385/sachin"}, "edited": false, "score": 0, "creation_date": 1539032677, "post_id": 52709767, "comment_id": 92346357, "body": "Could you try <code>dup</code> instead of <code>clone</code> ?"}, {"owner": {"reputation": 177, "user_id": 10095385, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-AQNUq2AuhX0/AAAAAAAAAAI/AAAAAAAACeM/W_ToTsU2GKw/photo.jpg?sz=128", "display_name": "Sachin", "link": "https://stackoverflow.com/users/10095385/sachin"}, "edited": false, "score": 0, "creation_date": 1539033255, "post_id": 52709767, "comment_id": 92346568, "body": "Yes I attempted that, still gives undefined method users"}, {"owner": {"reputation": 2496, "user_id": 3046905, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/692eb06201cbed91c3c6a9cf11ed0511?s=128&d=identicon&r=PG", "display_name": "Ilya Konyukhov", "link": "https://stackoverflow.com/users/3046905/ilya-konyukhov"}, "reply_to_user": {"reputation": 177, "user_id": 10095385, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-AQNUq2AuhX0/AAAAAAAAAAI/AAAAAAAACeM/W_ToTsU2GKw/photo.jpg?sz=128", "display_name": "Sachin", "link": "https://stackoverflow.com/users/10095385/sachin"}, "edited": false, "score": 0, "creation_date": 1539034369, "post_id": 52709767, "comment_id": 92346963, "body": "<code>undefined method `users&#39; for #&lt;Shift::ActiveRecord_Relation:0x00007fbd7048ee20&gt;</code> means that <code>@shift</code> was obtained as <code>Shift.where</code> call, not <code>Shift.find</code>. Please double check it. If model <code>Shift</code> has that relation, then non-nil <code>Shift.find(...)</code> should have <code>users</code>"}, {"owner": {"reputation": 177, "user_id": 10095385, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-AQNUq2AuhX0/AAAAAAAAAAI/AAAAAAAACeM/W_ToTsU2GKw/photo.jpg?sz=128", "display_name": "Sachin", "link": "https://stackoverflow.com/users/10095385/sachin"}, "edited": false, "score": 0, "creation_date": 1539035483, "post_id": 52709767, "comment_id": 92347343, "body": "It worked, you were correct I had put a .where and forgot to switch it back to .find.  Thanks for the help!"}], "tags": [], "owner": {"reputation": 2496, "user_id": 3046905, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/692eb06201cbed91c3c6a9cf11ed0511?s=128&d=identicon&r=PG", "display_name": "Ilya Konyukhov", "link": "https://stackoverflow.com/users/3046905/ilya-konyukhov"}, "is_accepted": true, "score": 0, "last_activity_date": 1539032546, "last_edit_date": 1539032546, "creation_date": 1539031081, "answer_id": 52709767, "question_id": 52708119, "link": "https://stackoverflow.com/questions/52708119/copying-data-in-rails/52709767#52709767", "title": "Copying Data in Rails", "body": "<p>Ok, I suppose you don't want to clone user records when cloning shift. Also, based on the migrations, it seems that <code>Shift</code> and <code>User</code> models are connected through <code>usershifts</code> table, ie <code>Shift</code> model <code>has_many :users, through :usershifts</code>.</p>\n\n<p>If so, the code can be:</p>\n\n<pre><code>@shift = @past_shift.dup\n@shift.users = @past_shift.users\nif @shift.save\n  ...\nelse\n  ...\nend\n</code></pre>\n\n<p><code>@past_shift.dup</code> returns a duplicate of the record that hasn't been assigned an id yet and is treated as a new record. <code>@shift.users = @past_shift.users</code> copies associated users (it does not create new records in <code>users</code> but only in join table <code>usershifts</code>, and these records are not saved yet). <code>@shift.save</code> saves it all :)</p>\n"}], "owner": {"reputation": 177, "user_id": 10095385, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-AQNUq2AuhX0/AAAAAAAAAAI/AAAAAAAACeM/W_ToTsU2GKw/photo.jpg?sz=128", "display_name": "Sachin", "link": "https://stackoverflow.com/users/10095385/sachin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 28, "favorite_count": 0, "accepted_answer_id": 52709767, "answer_count": 1, "score": 0, "last_activity_date": 1539032546, "creation_date": 1539023270, "last_edit_date": 1539029561, "question_id": 52708119, "link": "https://stackoverflow.com/questions/52708119/copying-data-in-rails", "title": "Copying Data in Rails", "body": "<p>We are building a scheduling app in class, and attempting to create a function to allow for the copying of a previous shift, and all employees under that shift to the next week of scheduling.  Here is my code currently:</p>\n\n<pre><code>def copy\n        set_calendar\n        @past_shift = Shift.find(params[:id])\n        if @calendar.users.owners.include?(current_user) || @calendar.users.managers.include?(current_user)\n          @shift = @past_shift.clone\n          if @shift.save\n            render json: (\"Shift copied successfully\"), status: :ok\n          else\n            render json: @usershift.errors, status: :uprocessable_entity\n          end\n        else\n          render json: (\"You do not have access to copy shifts\"), status: :unauthorized\n        end\nend\n</code></pre>\n\n<p>I've used both .clone and .dup, but it seems it only copies the shifts over, without copying the employees associated with those shifts.  Any help or guidance in the right path would be appreciated.</p>\n\n<p>Below is the entire controller for shifts:</p>\n\n<pre><code>class ShiftsController &lt; ApplicationController\n\n\n    def index\n        set_calendar\n\n        if params[\"start_date\"] &amp;&amp; params[\"end_date\"]\n            start_date = params[\"start_date\"].to_date\n            end_date = params[\"end_date\"].to_date\n            if @calendar.users.include?(current_user)\n                @shifts = Shift.where(\n                    calendar_id: @calendar.id,\n                    start_time: start_date.beginning_of_day .. end_date.end_of_day)\n                render \"/shifts/index.json\", status: :ok\n            else\n                render json: '{}', status: :unauthorized\n            end\n        else\n            render json: {'error': 'start date and end date are required'}, status: :unprocessable_entity\n        end\n    end\n\n    def myschedule\n        @user = User.find(params[:user_id])\n        @publishedshifts = @user.shifts.where(published: true)\n        if @user\n            render \"/shifts/index2.json\", status: :ok\n        else\n            render json: ('You do not have access to these shifts'), status: :unauthorized\n        end\n    end\n\n\n    def create\n        set_calendar\n        if @calendar.users.owners.include?(current_user) || @calendar.users.managers.include?(current_user)\n          @shift = Shift.new(shift_params)\n            if @shift.save\n                render \"/shifts/create.json\", status: :ok\n            else\n                render json: @shift.errors\n            end\n        else  render json: ('You do not have access to create a shift.'), status: :unauthorized\n        end\n    end\n\n    def copy\n        set_calendar\n        @past_shift = Shift.find(params[:id])\n        if @calendar.users.owners.include?(current_user) || @calendar.users.managers.include?(current_user)\n          @shift = @past_shift.clone\n          if @shift.save\n            render json: (\"Shift copied successfully\"), status: :ok\n          else\n            render json: @usershift.errors, status: :uprocessable_entity\n          end\n        else\n          render json: (\"You do not have access to copy shifts\"), status: :unauthorized\n        end\n    end\n\n    def update\n        set_calendar\n        set_shift\n        if @calendar.users.owners.include?(current_user) || @calendar.users.managers.include?(current_user)\n           if @shift.update_attributes(shift_params)\n              render \"/shifts/update.json\", status: :ok\n           else\n              render json: @shift.errors, status: :uprocessable_entity\n           end\n        else  render json: (\"You don't have access to update shifts.\"), status: :unauthorized\n        end\n    end\n\n    def destroy\n        set_calendar\n        set_shift\n        if @calendar.users.owners.include?(current_user) || @calendar.users.managers.include?(current_user)\n            if @shift.destroy\n                render json: (\"Shift deleted!\"), status: :ok\n            else\n                render json: @shift.errors, status: :uprocessable_entity\n            end\n        else  render json: (\"You don't have access to delete shifts.\")\n        end\n    end\n\n\n\n    private\n\n    def set_calendar\n        @calendar = Calendar.find(params[:calendar_id])\n    end\n\n    def set_shift\n        @shift = Shift.find(params[:id])\n    end\n\n\n    def shift_params\n        params.permit(:start_time, :end_time, :calendar_id, :capacity, :published)\n    end\nend\n</code></pre>\n\n<p>Schema:</p>\n\n<pre><code>create_table \"users\", force: :cascade do |t|\n    t.string \"email\"\n    t.string \"phone_number\"\n    t.string \"name\"\n    t.datetime \"created_at\", null: false\n    t.datetime \"updated_at\", null: false\n    t.string \"password_digest\"\n    t.string \"api_token\"\n    t.string \"reset_password_token\"\n    t.datetime \"reset_password_sent_at\"\n  end\n\n  create_table \"usershifts\", force: :cascade do |t|\n    t.bigint \"user_id\"\n    t.bigint \"shift_id\"\n    t.datetime \"created_at\", null: false\n    t.datetime \"updated_at\", null: false\n    t.index [\"shift_id\"], name: \"index_usershifts_on_shift_id\"\n    t.index [\"user_id\"], name: \"index_usershifts_on_user_id\"\n  end\n\ncreate_table \"shifts\", force: :cascade do |t|\nt.datetime \"start_time\"\nt.datetime \"end_time\"\nt.bigint \"calendar_id\"\nt.integer \"capacity\"\nt.boolean \"published\"\nt.datetime \"created_at\", null: false\nt.datetime \"updated_at\", null: false\nt.index [\"calendar_id\"], name: \"index_shifts_on_calendar_id\"\n</code></pre>\n\n<p>end</p>\n"}, {"tags": ["ios", "ruby", "cocoapods", "react-native-firebase"], "comments": [{"owner": {"reputation": 1178, "user_id": 2656732, "user_type": "registered", "accept_rate": 49, "profile_image": "https://i.stack.imgur.com/F6V3N.jpg?s=128&g=1", "display_name": "Marc", "link": "https://stackoverflow.com/users/2656732/marc"}, "edited": false, "score": 0, "creation_date": 1539022814, "post_id": 52707932, "comment_id": 92342273, "body": "Have a look here: <a href=\"https://stackoverflow.com/questions/41755885/brew-permission-denied#41935559\" title=\"brew permission denied%2341935559\">stackoverflow.com/questions/41755885/&hellip;</a> maybe you can find something useful..."}, {"owner": {"reputation": 1136, "user_id": 8434189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gawtn.jpg?s=128&g=1", "display_name": "mahmoudafer", "link": "https://stackoverflow.com/users/8434189/mahmoudafer"}, "reply_to_user": {"reputation": 1178, "user_id": 2656732, "user_type": "registered", "accept_rate": 49, "profile_image": "https://i.stack.imgur.com/F6V3N.jpg?s=128&g=1", "display_name": "Marc", "link": "https://stackoverflow.com/users/2656732/marc"}, "edited": false, "score": 0, "creation_date": 1539023122, "post_id": 52707932, "comment_id": 92342402, "body": "i tried but the problem is that it also says no such file or directory. I looked in Library/Caches there&#39;s no cocoapods folder even after reinstalling cocoapods"}], "answers": [{"comments": [{"owner": {"reputation": 1136, "user_id": 8434189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gawtn.jpg?s=128&g=1", "display_name": "mahmoudafer", "link": "https://stackoverflow.com/users/8434189/mahmoudafer"}, "edited": false, "score": 0, "creation_date": 1539024373, "post_id": 52708235, "comment_id": 92342931, "body": "still gives Errno::EACCES - Permission denied @ dir_s_mkdir - /react-native-firebase-starter/ios/Pods"}, {"owner": {"reputation": 1178, "user_id": 2656732, "user_type": "registered", "accept_rate": 49, "profile_image": "https://i.stack.imgur.com/F6V3N.jpg?s=128&g=1", "display_name": "Marc", "link": "https://stackoverflow.com/users/2656732/marc"}, "reply_to_user": {"reputation": 1136, "user_id": 8434189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gawtn.jpg?s=128&g=1", "display_name": "mahmoudafer", "link": "https://stackoverflow.com/users/8434189/mahmoudafer"}, "edited": false, "score": 0, "creation_date": 1539024634, "post_id": 52708235, "comment_id": 92343036, "body": "Try a complete cleanup (pod reset) according to <a href=\"https://stackoverflow.com/questions/46428752/how-to-clear-or-clean-specific-pod-cache\" title=\"how to clear or clean specific pod cache\">stackoverflow.com/questions/46428752/&hellip;</a>"}, {"owner": {"reputation": 1136, "user_id": 8434189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gawtn.jpg?s=128&g=1", "display_name": "mahmoudafer", "link": "https://stackoverflow.com/users/8434189/mahmoudafer"}, "edited": false, "score": 0, "creation_date": 1539025321, "post_id": 52708235, "comment_id": 92343338, "body": "still same error.. the problem is don&#39;t know what&#39;s the cause of this error :&#39;("}], "tags": [], "owner": {"reputation": 1178, "user_id": 2656732, "user_type": "registered", "accept_rate": 49, "profile_image": "https://i.stack.imgur.com/F6V3N.jpg?s=128&g=1", "display_name": "Marc", "link": "https://stackoverflow.com/users/2656732/marc"}, "is_accepted": false, "score": -2, "last_activity_date": 1539023755, "creation_date": 1539023755, "answer_id": 52708235, "question_id": 52707932, "link": "https://stackoverflow.com/questions/52707932/pod-install-no-permission/52708235#52708235", "title": "Pod install no permission", "body": "<p>Try <code>pod cache clean --all</code> # will clean all pods</p>\n"}, {"comments": [{"owner": {"reputation": 1136, "user_id": 8434189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gawtn.jpg?s=128&g=1", "display_name": "mahmoudafer", "link": "https://stackoverflow.com/users/8434189/mahmoudafer"}, "edited": false, "score": 0, "creation_date": 1539100580, "post_id": 52710624, "comment_id": 92375315, "body": "i tried the command but didn&#39;t work, BUT i cloned it to a folder in /users and worked.. THANKS A LOT"}], "tags": [], "owner": {"reputation": 61, "user_id": 6130035, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-OWEJMdoaVnU/AAAAAAAAAAI/AAAAAAAAAFs/9D792C-XTok/photo.jpg?sz=128", "display_name": "Rogojan Nicolae", "link": "https://stackoverflow.com/users/6130035/rogojan-nicolae"}, "is_accepted": true, "score": 1, "last_activity_date": 1539074530, "last_edit_date": 1539074530, "creation_date": 1539035721, "answer_id": 52710624, "question_id": 52707932, "link": "https://stackoverflow.com/questions/52707932/pod-install-no-permission/52710624#52710624", "title": "Pod install no permission", "body": "<p>Seems to be Privilege Read only of the project and cocoapods can create folder Pod.</p>\n\n<p>Try <code>chmod 755 /react-native-firebase-starter/ios</code> will give permission to create folder Pod</p>\n\n<p>or clone react-native-firebase-starter on folder with permission read &amp; write</p>\n"}], "owner": {"reputation": 1136, "user_id": 8434189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gawtn.jpg?s=128&g=1", "display_name": "mahmoudafer", "link": "https://stackoverflow.com/users/8434189/mahmoudafer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1500, "favorite_count": 0, "accepted_answer_id": 52710624, "answer_count": 2, "score": 1, "last_activity_date": 1539074530, "creation_date": 1539022377, "question_id": 52707932, "link": "https://stackoverflow.com/questions/52707932/pod-install-no-permission", "title": "Pod install no permission", "body": "<p>I'm trying to install react native firebase starter kit on a virtual machine running macOS 10.3 on windows 10. I'm totally new to macOS.</p>\n\n<p>I started with cloning it then following the instructions: cd react-native-firebase-starter npm install cd ios then pod install (already installed cocoapods with sudo gems)</p>\n\n<p>when i run pod install this error occurs:</p>\n\n<blockquote>\n  <h3>Command</h3>\n  \n  <p><code>/usr/local/bin/pod install</code></p>\n  \n  <h3>Report</h3>\n  \n  <ul>\n  <li><p>What did you do?</p></li>\n  <li><p>What did you expect to happen?</p></li>\n  <li><p>What happened instead?</p></li>\n  </ul>\n  \n  <h3>Stack</h3>\n  \n  <p><code>CocoaPods : 1.5.3\n          Ruby : ruby 2.3.3p222 (2016-11-21 revision 56859) [universal.x86_64-darwin17]\n      RubyGems : 2.5.2\n          Host : Mac OS X 10.13.5 (17F77)\n         Xcode : 9.4 (9F1027a)\n           Git : git version 2.15.1 (Apple Git-101) Ruby lib dir : /System/Library/Frameworks/Ruby.framework/Versions/2.3/usr/lib\n  Repositories :</code></p>\n  \n  <h3>Plugins</h3>\n  \n  <p><code>cocoapods-deintegrate : 1.0.2 cocoapods-plugins     : 1.0.0\n  cocoapods-search      : 1.0.0 cocoapods-stats       : 1.0.0\n  cocoapods-trunk       : 1.3.1 cocoapods-try         : 1.1.0</code></p>\n  \n  <h3>Podfile</h3>\n  \n  <p>```ruby</p>\n  \n  <h1>Uncomment the next line to define a global platform for your project platform :ios, '9.0'</h1>\n  \n  <p>target 'RNFirebaseStarter' do   # Uncomment the next line if you're\n  using Swift or would like to use dynamic frameworks   #\n  use_frameworks!</p>\n  \n  <p># Pods for RNFirebaseStarter</p>\n  \n  <p># Required by RNFirebase   pod 'Firebase/Core', '~> 5.3.0'</p>\n  \n  <p># [OPTIONAL PODS] - comment out pods for firebase products you won't\n  be using.   pod 'Firebase/AdMob', '~> 5.3.0'   pod 'Firebase/Auth',\n  '~> 5.3.0'   pod 'Firebase/Crash', '~> 5.3.0'   pod\n  'Firebase/Database', '~> 5.3.0'   pod 'Firebase/Functions', '~> 5.3.0'\n  pod 'Firebase/DynamicLinks', '~> 5.3.0'   pod 'Firebase/Firestore',\n  '~> 5.3.0'   # pod 'Firebase/Invites', '~> 5.3.0'   pod\n  'Firebase/Messaging', '~> 5.3.0'   pod 'Firebase/RemoteConfig', '~>\n  5.3.0'   pod 'Firebase/Storage', '~> 5.3.0'   pod 'Firebase/Performance', '~> 5.3.0'   pod 'Fabric', '~> 1.7.5'   pod\n  'Crashlytics', '~> 3.10.4'</p>\n  \n  <p>end ```</p>\n  \n  <h3>Error</h3>\n  \n  <p><code>Errno::EACCES - Permission denied @ dir_s_mkdir -\n  /react-native-firebase-starter/ios/Pods\n  /System/Library/Frameworks/Ruby.framework/Versions/2.3/usr/lib/ruby/2.3.0/fileutils.rb:253:in\n  `mkdir'\n  /System/Library/Frameworks/Ruby.framework/Versions/2.3/usr/lib/ruby/2.3.0/fileutils.rb:253:in\n  `fu_mkdir'\n  /System/Library/Frameworks/Ruby.framework/Versions/2.3/usr/lib/ruby/2.3.0/fileutils.rb:227:in\n  `block (2 levels) in mkdir_p'\n  /System/Library/Frameworks/Ruby.framework/Versions/2.3/usr/lib/ruby/2.3.0/fileutils.rb:225:in\n  `reverse_each'\n  /System/Library/Frameworks/Ruby.framework/Versions/2.3/usr/lib/ruby/2.3.0/fileutils.rb:225:in\n  `block in mkdir_p'\n  /System/Library/Frameworks/Ruby.framework/Versions/2.3/usr/lib/ruby/2.3.0/fileutils.rb:211:in\n  `each'\n  /System/Library/Frameworks/Ruby.framework/Versions/2.3/usr/lib/ruby/2.3.0/fileutils.rb:211:in\n  `mkdir_p'\n  /Users/zolz/.gem/ruby/2.3.0/gems/cocoapods-1.5.3/lib/cocoapods/sandbox.rb:58:in\n  `initialize'\n  /Users/zolz/.gem/ruby/2.3.0/gems/cocoapods-1.5.3/lib/cocoapods/config.rb:184:in\n  `new'\n  /Users/zolz/.gem/ruby/2.3.0/gems/cocoapods-1.5.3/lib/cocoapods/config.rb:184:in\n  `sandbox'\n  /Users/zolz/.gem/ruby/2.3.0/gems/cocoapods-1.5.3/lib/cocoapods/command.rb:140:in\n  `installer_for_config'\n  /Users/zolz/.gem/ruby/2.3.0/gems/cocoapods-1.5.3/lib/cocoapods/command/install.rb:38:in\n  `run'\n  /Library/Ruby/Gems/2.3.0/gems/claide-1.0.2/lib/claide/command.rb:334:in\n  `run'\n  /Users/zolz/.gem/ruby/2.3.0/gems/cocoapods-1.5.3/lib/cocoapods/command.rb:52:in\n  `run' /Users/zolz/.gem/ruby/2.3.0/gems/cocoapods-1.5.3/bin/pod:55:in\n  `&lt;top (required)&gt;' /usr/local/bin/pod:22:in `load'\n  /usr/local/bin/pod:22:in `&lt;main&gt;'</code></p>\n  \n  <p>\u2015\u2015\u2015 TEMPLATE END\n  \u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015</p>\n  \n  <p>[!] Oh no, an error occurred.</p>\n  \n  <p>Search for existing GitHub issues similar to yours:\n  <a href=\"https://github.com/CocoaPods/CocoaPods/search?q=Permission+denied+%40+dir_s_mkdir+-+%2Freact-native-firebase-starter%2Fios%2FPods&amp;type=Issues\" rel=\"nofollow noreferrer\">https://github.com/CocoaPods/CocoaPods/search?q=Permission+denied+%40+dir_s_mkdir+-+%2Freact-native-firebase-starter%2Fios%2FPods&amp;type=Issues</a></p>\n  \n  <p>If none exists, create a ticket, with the template displayed above,\n  on: <a href=\"https://github.com/CocoaPods/CocoaPods/issues/new\" rel=\"nofollow noreferrer\">https://github.com/CocoaPods/CocoaPods/issues/new</a></p>\n  \n  <p>Be sure to first read the contributing guide for details on how to\n  properly submit a ticket:\n  <a href=\"https://github.com/CocoaPods/CocoaPods/blob/master/CONTRIBUTING.md\" rel=\"nofollow noreferrer\">https://github.com/CocoaPods/CocoaPods/blob/master/CONTRIBUTING.md</a></p>\n  \n  <p>Don't forget to anonymize any private data!</p>\n  \n  <p>Looking for related issues on cocoapods/cocoapods... Found no similar\n  issues. To create a new issue, please visit:\n  <a href=\"https://github.com/cocoapods/cocoapods/issues/new\" rel=\"nofollow noreferrer\">https://github.com/cocoapods/cocoapods/issues/new</a></p>\n</blockquote>\n\n<p>I already tried:</p>\n\n<pre><code>sudo chown -R username:groupname ~/Library/Caches/CocoaPods\n</code></pre>\n\n<p>but it says directory not found.</p>\n\n<p>Thanks a lot.</p>\n"}, {"tags": ["css", "ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 909, "user_id": 9534861, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-HEqJQasw6sM/AAAAAAAAAAI/AAAAAAAABHA/HiEIzDPH-l0/photo.jpg?sz=128", "display_name": "Saqib Shahzad", "link": "https://stackoverflow.com/users/9534861/saqib-shahzad"}, "edited": false, "score": 0, "creation_date": 1539031181, "post_id": 52707904, "comment_id": 92345741, "body": "are you using Bootstrap in your project?"}], "answers": [{"comments": [{"owner": {"reputation": 408, "user_id": 1987724, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/IsH6B.jpg?s=128&g=1", "display_name": "Fam", "link": "https://stackoverflow.com/users/1987724/fam"}, "edited": false, "score": 0, "creation_date": 1539028647, "post_id": 52708054, "comment_id": 92344694, "body": "Adding classes isn&#39;t the problem, knowing what class to add is."}], "tags": [], "owner": {"reputation": 1027, "user_id": 1457459, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TBcbz.jpg?s=128&g=1", "display_name": "Erick Eduardo Garcia", "link": "https://stackoverflow.com/users/1457459/erick-eduardo-garcia"}, "is_accepted": false, "score": -1, "last_activity_date": 1539022968, "creation_date": 1539022968, "answer_id": 52708054, "question_id": 52707904, "link": "https://stackoverflow.com/questions/52707904/rails-link-to-with-default-html-button-style/52708054#52708054", "title": "Rails link_to with default HTML button style", "body": "<p>You have to add the class option</p>\n\n<pre><code>&lt;p&gt;&lt;%= link_to 'Cancel', base_files_path(), class: \"your_class_here\" %&gt;&lt;/p&gt;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 408, "user_id": 1987724, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/IsH6B.jpg?s=128&g=1", "display_name": "Fam", "link": "https://stackoverflow.com/users/1987724/fam"}, "edited": false, "score": 0, "creation_date": 1539028585, "post_id": 52708062, "comment_id": 92344670, "body": "I want to get the appearance of an <code>&lt;input type=&#39;button&#39;&gt;</code> element. Is that possible to do with the <code>link_to</code> FormHelper? I would rather not write my own styles for a button since I am perfectly content with the look of the submit button created by Rails. Looking at the <a href=\"https://apidock.com/rails/ActionView/Helpers/UrlHelper/button_to\" rel=\"nofollow noreferrer\">documentation</a>, those buttons have the <code>form_class</code> of <code>button_to</code>. Using that class on my <code>link_to</code> element does nothing. Where can I peruse the default styles that Rails uses?"}, {"owner": {"reputation": 67463, "user_id": 203130, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/1RE8c.jpg?s=128&g=1", "display_name": "coreyward", "link": "https://stackoverflow.com/users/203130/coreyward"}, "reply_to_user": {"reputation": 408, "user_id": 1987724, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/IsH6B.jpg?s=128&g=1", "display_name": "Fam", "link": "https://stackoverflow.com/users/1987724/fam"}, "edited": false, "score": 0, "creation_date": 1539031658, "post_id": 52708062, "comment_id": 92345948, "body": "@Fam Rails isn&#39;t styling those buttons. Those are naked <code>&lt;input type=&quot;submit&quot;&gt;</code> elements, which browsers tend to render similar to <code>&lt;button&gt;</code> elements. Again, you can use <code>appearance: button</code> to get this effect, which is what I suggested 2 hours ago."}, {"owner": {"reputation": 408, "user_id": 1987724, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/IsH6B.jpg?s=128&g=1", "display_name": "Fam", "link": "https://stackoverflow.com/users/1987724/fam"}, "edited": false, "score": 0, "creation_date": 1539043324, "post_id": 52708062, "comment_id": 92349186, "body": "I tried using <code>appearance</code> and it gets me halfway there, but the button text is using the wrong font. I ended up using a button element that uses an <code>onclick</code> event handler."}], "tags": [], "owner": {"reputation": 67463, "user_id": 203130, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/1RE8c.jpg?s=128&g=1", "display_name": "coreyward", "link": "https://stackoverflow.com/users/203130/coreyward"}, "is_accepted": false, "score": 0, "last_activity_date": 1539023002, "creation_date": 1539023002, "answer_id": 52708062, "question_id": 52707904, "link": "https://stackoverflow.com/questions/52707904/rails-link-to-with-default-html-button-style/52708062#52708062", "title": "Rails link_to with default HTML button style", "body": "<p>Styling is the job of CSS. You might want to \u201ctag\u201d your link with a CSS class name and reference it from a stylesheet: </p>\n\n<pre><code>link_to 'Cancel', base_fules_path, class: \"button\"\n\n.button {\n  /* your styles here */\n}\n</code></pre>\n\n<p>Native styles are dependent on the platform. You can use <code>appearance: button</code> styles on your link, but <a href=\"https://caniuse.com/#search=appearance\" rel=\"nofollow noreferrer\"><code>appearance</code> isn't particularly well supported</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 909, "user_id": 9534861, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-HEqJQasw6sM/AAAAAAAAAAI/AAAAAAAABHA/HiEIzDPH-l0/photo.jpg?sz=128", "display_name": "Saqib Shahzad", "link": "https://stackoverflow.com/users/9534861/saqib-shahzad"}, "is_accepted": false, "score": 0, "last_activity_date": 1539031325, "creation_date": 1539031325, "answer_id": 52709815, "question_id": 52707904, "link": "https://stackoverflow.com/questions/52707904/rails-link-to-with-default-html-button-style/52709815#52709815", "title": "Rails link_to with default HTML button style", "body": "<p>If you are using Bootstrap with your project, you can get the same format by:</p>\n\n<pre><code>&lt;%= link_to 'Cancel', base_files_path,class: \"btn btn-default\" %&gt;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 1, "creation_date": 1539063723, "post_id": 52711604, "comment_id": 92353593, "body": "Why do you use one of the helpers like <code>button</code>, <code>button_tag</code> or <code>button_to</code> (depending on your needs)?"}, {"owner": {"reputation": 408, "user_id": 1987724, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/IsH6B.jpg?s=128&g=1", "display_name": "Fam", "link": "https://stackoverflow.com/users/1987724/fam"}, "reply_to_user": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1539829672, "post_id": 52711604, "comment_id": 92646133, "body": "@spickermann Hi, please see my addendum relating to your comment in the answer."}], "tags": [], "owner": {"reputation": 408, "user_id": 1987724, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/IsH6B.jpg?s=128&g=1", "display_name": "Fam", "link": "https://stackoverflow.com/users/1987724/fam"}, "is_accepted": true, "score": 0, "last_activity_date": 1539829596, "last_edit_date": 1539829596, "creation_date": 1539043510, "answer_id": 52711604, "question_id": 52707904, "link": "https://stackoverflow.com/questions/52707904/rails-link-to-with-default-html-button-style/52711604#52711604", "title": "Rails link_to with default HTML button style", "body": "<p><em>EDIT</em>: I want to add that it is possible to use the <code>button_to</code> helper, and it works like <code>link_to</code>, but only when you aren't working with a form, because then the <code>button_to</code> form will raise conflicts. This was an issue for me because the cancel button was triggering form validation on my form. </p>\n\n<p>AFAIK this isn't possible to do with any built-in Rails components, so instead I opted to use HTML and Javascript to get what I wanted.</p>\n\n<p>Old code:</p>\n\n<pre><code>&lt;%= link_to 'Cancel', base_files_path() %&gt;\n</code></pre>\n\n<p>New code:</p>\n\n<pre><code>&lt;button type='button' onclick=\"location.href='&lt;%= base_files_path() %&gt;';\"&gt;Cancel&lt;/button&gt;\n</code></pre>\n\n<p>The code isn't pretty, but it's the quickest way for me to get the look I was going for.</p>\n"}], "owner": {"reputation": 408, "user_id": 1987724, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/IsH6B.jpg?s=128&g=1", "display_name": "Fam", "link": "https://stackoverflow.com/users/1987724/fam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 513, "favorite_count": 0, "accepted_answer_id": 52711604, "answer_count": 4, "score": 0, "last_activity_date": 1539829596, "creation_date": 1539022235, "question_id": 52707904, "link": "https://stackoverflow.com/questions/52707904/rails-link-to-with-default-html-button-style", "title": "Rails link_to with default HTML button style", "body": "<p>I have a Rails form that has a submit button using a FormHelper.</p>\n\n<pre><code>&lt;p&gt;&lt;%= form.submit %&gt;&lt;/p&gt;\n</code></pre>\n\n<p>On the same page, I have a cancel button that goes back to the previous page (the index page).</p>\n\n<pre><code>&lt;p&gt;&lt;%= link_to 'Cancel', base_files_path() %&gt;&lt;/p&gt;\n</code></pre>\n\n<p>I want to style my <code>link_to</code> element so that it looks like the submit button. I tried the <code>button_to</code> FormHelper but it creates its own submit button, which is interfering with the normal form's submit operation. Is there a class that I can attach to the <code>link_to</code> element that will style it like that?</p>\n\n<p><a href=\"https://i.imgur.com/Ws84qeO.png\" rel=\"nofollow noreferrer\">Here is a screenshot for reference</a> </p>\n"}, {"tags": ["ruby", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1539019938, "post_id": 52707320, "comment_id": 92341014, "body": "Why do you need to sanitize all strings like that in the controller? Isn&#39;t that a view responsibility? Especially because in the view should know if a value is a string and usually escapes strings automatically."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1539020904, "post_id": 52707320, "comment_id": 92341405, "body": "<code>transform_values</code> returns a <code>Hash</code> and <code>map!</code> replaces the current object with the block response. What exactly did you expect?"}, {"owner": {"reputation": 3, "user_id": 7432125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4324f3743be4d6477182ca61e07472de?s=128&d=identicon&r=PG&f=1", "display_name": "emplumb", "link": "https://stackoverflow.com/users/7432125/emplumb"}, "reply_to_user": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1539021992, "post_id": 52707320, "comment_id": 92341927, "body": "@spickermann - One of my other models has over 20 attributes. I&#39;m trying to DRY up the view so I don&#39;t do sanitize(object, tags: %w(strong, sup, sub, etc)) as many times. If you have a better idea, I&#39;m all ears"}, {"owner": {"reputation": 3, "user_id": 7432125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4324f3743be4d6477182ca61e07472de?s=128&d=identicon&r=PG&f=1", "display_name": "emplumb", "link": "https://stackoverflow.com/users/7432125/emplumb"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1539022181, "post_id": 52707320, "comment_id": 92342022, "body": "@engineersmnky - Your response isn&#39;t helpful at all"}, {"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1539022641, "post_id": 52707320, "comment_id": 92342212, "body": "Why do you need to sanitize only a few tags? Are html tags generally allowed and possible on all that attributes?"}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1539022830, "post_id": 52707320, "comment_id": 92342284, "body": "@emplumb I am asking what your expectation is. No one can help you without understanding your expectation which is very unclear at the moment. I am sorry if I somehow offended you when all I was doing is explaining what you refer to as <i>&quot;...a nondescript array of hashes&quot;</i>. As for the sanitation this is the default behavior and thus probably is not required at all, however I still do not understand your goal or your implementation so I cannot say for sure."}, {"owner": {"reputation": 3, "user_id": 7432125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4324f3743be4d6477182ca61e07472de?s=128&d=identicon&r=PG&f=1", "display_name": "emplumb", "link": "https://stackoverflow.com/users/7432125/emplumb"}, "reply_to_user": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1539023357, "post_id": 52707320, "comment_id": 92342508, "body": "@spickermann - There&#39;s only a handful that should ever be needed for my use case. Isn&#39;t it good practice to only whitelist the ones you need? Or does it really make no difference?"}, {"owner": {"reputation": 3, "user_id": 7432125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4324f3743be4d6477182ca61e07472de?s=128&d=identicon&r=PG&f=1", "display_name": "emplumb", "link": "https://stackoverflow.com/users/7432125/emplumb"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1539023644, "post_id": 52707320, "comment_id": 92342639, "body": "@engineersmnky - I thought I explained my purpose, but I suppose it could have been clearer. Instead of sanitizing the sources in the view, I want to sanitize behind the scenes so my view isn&#39;t cluttered"}, {"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 1, "creation_date": 1539023837, "post_id": 52707320, "comment_id": 92342726, "body": "There is no need to manually sanitize strings in Rails unless you need something special like not sanitizing everything but only specific html tags. Therefore your question is about unclear. Would you mind posting some examples of your data, your view and your expected output?"}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1539028788, "post_id": 52707320, "comment_id": 92344747, "body": "@emplumb my point was you do not need to sanitize this data. The sanitation is default you actually have to intentionally avoid it, using things like <code>raw</code> or <code>html_safe</code>, not implement it."}, {"owner": {"reputation": 3, "user_id": 7432125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4324f3743be4d6477182ca61e07472de?s=128&d=identicon&r=PG&f=1", "display_name": "emplumb", "link": "https://stackoverflow.com/users/7432125/emplumb"}, "edited": false, "score": 0, "creation_date": 1539440763, "post_id": 52707320, "comment_id": 92508088, "body": "Sorry for the delayed response, but thank you both for your input. I see now that I was approaching this problem incorrectly. Cheers"}], "answers": [{"tags": [], "owner": {"reputation": 14511, "user_id": 384417, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/966d07471c4adb05fed0e12d31e36584?s=128&d=identicon&r=PG", "display_name": "rewritten", "link": "https://stackoverflow.com/users/384417/rewritten"}, "is_accepted": true, "score": 0, "last_activity_date": 1539035556, "creation_date": 1539035556, "answer_id": 52710596, "question_id": 52707320, "link": "https://stackoverflow.com/questions/52707320/mutating-list-of-instantiated-objects-in-rails/52710596#52710596", "title": "Mutating list of instantiated objects in Rails", "body": "<p><code>map!</code> replaces each item in the array with the result of the block. This is not what you intend to do, because you just want to mutate the items, not replace them with something else. Use a plain <code>each</code> instead of <code>map!</code> would do the trick. </p>\n\n<p>On another side, sanitization is actually a responsibility of the view (that\u2019s why it\u2019s defined in a helper). If you need to sanitize often with the same argument, define your own helper:</p>\n\n<pre><code>class ApplicationHelper\n  def sany(str)\n    sanitize(str, %w[...])\n  end\nend\n\n&lt;%= sany(source.some_attr) %&gt;\n</code></pre>\n\n<p>You could also set the default sanitization options following the documentation:</p>\n\n<pre><code># In config/application.rb\nconfig.action_view.sanitized_allowed_tags = ['strong', 'em', 'a']\nconfig.action_view.sanitized_allowed_attributes = ['href', 'title']\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 7432125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4324f3743be4d6477182ca61e07472de?s=128&d=identicon&r=PG&f=1", "display_name": "emplumb", "link": "https://stackoverflow.com/users/7432125/emplumb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 34, "favorite_count": 0, "accepted_answer_id": 52710596, "answer_count": 1, "score": 0, "last_activity_date": 1539035556, "creation_date": 1539019636, "question_id": 52707320, "link": "https://stackoverflow.com/questions/52707320/mutating-list-of-instantiated-objects-in-rails", "title": "Mutating list of instantiated objects in Rails", "body": "<p>I'm attempting to clean up my view by moving Rails' sanitizer method to a helper, but it's not producing the desired result. So below is what my index action looks like. I know it's ugly and not very OOP, but I simplified it down so I could follow what was happening when debugging. </p>\n\n<p>I'm attempting to loop through all the sources' attributes, running the sanitizer on any attribute that is a non-empty string, replacing original strings with the sanitized strings (transform_values!), and writing over the original @sources (map!). </p>\n\n<p>I tried storing them in different variables than <code>@sources</code> and using <code>.each</code> instead of <code>.map!</code> but the sanitized values don't make it through. </p>\n\n<pre><code>def index\n  @sources = Source.all\n  @sources.map! { |source| \n    source.attributes.transform_values! { |attr|\n      attr.blank? || !attr.is_a?(String) ? attr \n      : ActionController::Base.helpers.sanitize(attr) } }\nend\n</code></pre>\n\n<p>However, after examining my list of sources in the view, it's removing the source instances and instead returning a nondescript array of hashes. I can loop through these, but I can't call specific attributes like <code>source.author</code> which is not great.</p>\n\n<p>Here's some images for reference. The first one is what it should look like and second is what I'm currently getting</p>\n\n<p><a href=\"https://i.stack.imgur.com/zTALV.png\" rel=\"nofollow noreferrer\">Unsanitized sources</a></p>\n\n<p><a href=\"https://i.stack.imgur.com/EcCAm.png\" rel=\"nofollow noreferrer\">Sanitized sources</a></p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 1078, "user_id": 1116374, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gDRlJ.jpg?s=128&g=1", "display_name": "Skydan", "link": "https://stackoverflow.com/users/1116374/skydan"}, "edited": false, "score": 0, "creation_date": 1539019382, "post_id": 52707088, "comment_id": 92340750, "body": "try to add <code>require &#39;password_generator&#39;</code>"}, {"owner": {"reputation": 1480, "user_id": 4741620, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/13911648aa5b99a6542494b4c8fcbc38?s=128&d=identicon&r=PG&f=1", "display_name": "jedi", "link": "https://stackoverflow.com/users/4741620/jedi"}, "reply_to_user": {"reputation": 1078, "user_id": 1116374, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gDRlJ.jpg?s=128&g=1", "display_name": "Skydan", "link": "https://stackoverflow.com/users/1116374/skydan"}, "edited": false, "score": 0, "creation_date": 1539020189, "post_id": 52707088, "comment_id": 92341106, "body": "Well, I think I shouldn&#39;t have to but I already tried that and got an error <code>require&#39;: cannot load such file -- password_generator ~ (LoadError)</code>"}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 1, "creation_date": 1539021139, "post_id": 52707088, "comment_id": 92341506, "body": "is the file called <code>password_generator.rb</code>? We have no idea what your gem looks like so it is very difficult to help"}, {"owner": {"reputation": 1078, "user_id": 1116374, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gDRlJ.jpg?s=128&g=1", "display_name": "Skydan", "link": "https://stackoverflow.com/users/1116374/skydan"}, "edited": false, "score": 0, "creation_date": 1539024575, "post_id": 52707088, "comment_id": 92343013, "body": "maybe upload your sample app on github? it will be easier to help."}, {"owner": {"reputation": 7810, "user_id": 2671317, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f13862b290e178f5a6c40b8d8dfc4f05?s=128&d=identicon&r=PG", "display_name": "ptierno", "link": "https://stackoverflow.com/users/2671317/ptierno"}, "edited": false, "score": 1, "creation_date": 1539026198, "post_id": 52707088, "comment_id": 92343670, "body": "Seems using <code>path</code> in the Gemfile is causing this... when running ruby through bundle exec it works fine for me <code>bundle exec ruby test.rb</code>"}, {"owner": {"reputation": 1480, "user_id": 4741620, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/13911648aa5b99a6542494b4c8fcbc38?s=128&d=identicon&r=PG&f=1", "display_name": "jedi", "link": "https://stackoverflow.com/users/4741620/jedi"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1539027850, "post_id": 52707088, "comment_id": 92344326, "body": "@engineersmnky I added my gem repo in the description. It does have PasswordGenerator module."}, {"owner": {"reputation": 1480, "user_id": 4741620, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/13911648aa5b99a6542494b4c8fcbc38?s=128&d=identicon&r=PG&f=1", "display_name": "jedi", "link": "https://stackoverflow.com/users/4741620/jedi"}, "edited": false, "score": 0, "creation_date": 1539028108, "post_id": 52707088, "comment_id": 92344451, "body": "when I run <code>bundle exec ruby password_reset.rb</code> I get an error <code>undefined method </code>generate&#39; for PasswordGenerator:Module (NoMethodError)`"}, {"owner": {"reputation": 2496, "user_id": 3046905, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/692eb06201cbed91c3c6a9cf11ed0511?s=128&d=identicon&r=PG", "display_name": "Ilya Konyukhov", "link": "https://stackoverflow.com/users/3046905/ilya-konyukhov"}, "edited": false, "score": 0, "creation_date": 1539029316, "post_id": 52707088, "comment_id": 92344967, "body": "Please provide the way, how you use that gem. Inside of Rails app, or by calling some <code>rake</code> task, or from Rails console?"}, {"owner": {"reputation": 1480, "user_id": 4741620, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/13911648aa5b99a6542494b4c8fcbc38?s=128&d=identicon&r=PG&f=1", "display_name": "jedi", "link": "https://stackoverflow.com/users/4741620/jedi"}, "edited": false, "score": 0, "creation_date": 1539029974, "post_id": 52707088, "comment_id": 92345248, "body": "As I wrote in my original question, I have a file password_reset.rb where I do PasswordGenerator.generate. This module and its method do exist in this gem. So I am building a separate ruby app and in there I try to use it."}, {"owner": {"reputation": 49960, "user_id": 32453, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/bec38d63650c8912b6ba9b557fb953b9?s=128&d=identicon&r=PG", "display_name": "rogerdpack", "link": "https://stackoverflow.com/users/32453/rogerdpack"}, "edited": false, "score": 0, "creation_date": 1539032863, "post_id": 52707088, "comment_id": 92346432, "body": "What&#39;s in password_reset.rb"}, {"owner": {"reputation": 1480, "user_id": 4741620, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/13911648aa5b99a6542494b4c8fcbc38?s=128&d=identicon&r=PG&f=1", "display_name": "jedi", "link": "https://stackoverflow.com/users/4741620/jedi"}, "edited": false, "score": 0, "creation_date": 1539033169, "post_id": 52707088, "comment_id": 92346539, "body": "I also wrote that in my question."}], "answers": [{"tags": [], "owner": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "is_accepted": true, "score": 2, "last_activity_date": 1539188973, "creation_date": 1539188973, "answer_id": 52744887, "question_id": 52707088, "link": "https://stackoverflow.com/questions/52707088/ruby-cannot-use-locally-installed-gem/52744887#52744887", "title": "Ruby - Cannot use locally installed gem", "body": "<p>There are potentially two issues. The first is how you are starting Ruby and the second is how you are requiring your module.</p>\n\n<p>First, if you are starting Ruby by running <code>ruby password_reset.rb</code> then you are ignoring the <code>Gemfile</code>. The <code>Gemfile</code> is only used when you're using <code>bundler</code>, so you want to make sure you are starting Ruby by running <code>bundle exec ruby password_reset.rb</code>. This causes bundler to read your Gemfile and execute Ruby in that context.</p>\n\n<p>Second, you're not properly including your module in your Ruby file. Just because you've added the gem to your Gemfile and started Ruby using bundler doesn't mean that the Ruby process knows you intend to use that gem's module; it just makes the module <em>available</em> for use. You might wonder, \"Why don't I have to do that in Rails?\" Because <a href=\"https://stackoverflow.com/a/11763555/3784008\">Rails does that for you automatically via <code>config/application.rb</code></a>.</p>\n\n<p>Given these two issues, the correct way to accomplish your goal is to configure your app as follows:</p>\n\n<p>First, create your <code>Gemfile</code>:</p>\n\n<pre><code># Gemfile\ngem 'password_generator', path: '~/workspace/gems/password_generator'\n</code></pre>\n\n<p>Second, create your <code>password_reset.rb</code> file:</p>\n\n<pre><code># password_reset.rb\n# Manually require any libraries that this app will use, even if defined in Gemfile\nrequire 'password_generator'\n# Call `puts` so something is printed to the console when this app runs\nputs PasswordGenerator.generate\n</code></pre>\n\n<p>Third, run <code>bundle install</code> to ensure your <code>Gemfile</code> is properly formatted and to generate your <code>Gemfile.lock</code>:</p>\n\n<pre><code>\u21d2  bundle install\nUsing bundler 1.16.5\nUsing password_generator 0.1.0 from source at `../../gems/password_generator`\nBundle complete! 1 Gemfile dependency, 2 gems now installed.\nUse `bundle info [gemname]` to see where a bundled gem is installed.\n</code></pre>\n\n<p>Fourth, run <code>bundle exec ruby password_reset.rb</code> and observe the output:</p>\n\n<pre><code>\u21d2  bundle exec ruby password_reset.rb\nkpiDfyTxtdAsKmYuZqmK\n</code></pre>\n\n<p>Everything works because:</p>\n\n<ol>\n<li>Ruby is started with Bundler</li>\n<li>Bundler reads your Gemfile and makes the gems available to Ruby</li>\n<li>Your app requires the module from the gem before attempting to use the module</li>\n</ol>\n"}], "owner": {"reputation": 1480, "user_id": 4741620, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/13911648aa5b99a6542494b4c8fcbc38?s=128&d=identicon&r=PG&f=1", "display_name": "jedi", "link": "https://stackoverflow.com/users/4741620/jedi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 0, "accepted_answer_id": 52744887, "answer_count": 1, "score": 3, "last_activity_date": 1539188973, "creation_date": 1539018502, "last_edit_date": 1592644375, "question_id": 52707088, "link": "https://stackoverflow.com/questions/52707088/ruby-cannot-use-locally-installed-gem", "title": "Ruby - Cannot use locally installed gem", "body": "<p>I've written a simple PasswordGenerator gem that I have at <code>~/workspace/gems/password_generator</code> and have an app at <code>~/workspace/rubysamples/app</code> where I want to use it. I have a <code>Gemfile</code>, the content of it is this:</p>\n<pre><code>gem 'password_generator', path: '~/workspace/gems/password_generator'\n</code></pre>\n<p>I installed it locally, like this:</p>\n<pre><code>bundle install --local\nResolving dependencies...\nUsing bundler 1.16.5\nUsing password_generator 0.1.0 from source at `~/workspace/gems/password_generator`\nBundle complete! 1 Gemfile dependency, 2 gems now installed.\nUse `bundle info [gemname]` to see where a bundled gem is installed.\n</code></pre>\n<p>It looks like it's installed locally:</p>\n<pre><code>bundle info password_generator\n  * password_generator (0.1.0)\n    Summary: Simple password generator\n    Homepage: https://github.com/jedrekdomanski/password_generator\n    Path: /home/jedrek/workspace/gems/password_generator\n</code></pre>\n<p>When I try to use it</p>\n<h3>~/workspace/rubysamples/app/password_reset.rb</h3>\n<pre><code>PasswordGenerator.generate\n</code></pre>\n<p>I get an error</p>\n<pre><code>uninitialized constant PasswordGenerator (NameError)\n</code></pre>\n<p>What am I doing wrong? Am I missing anything?</p>\n<p>Here's my gem repo: <a href=\"https://github.com/jedrekdomanski/password_generator\" rel=\"nofollow noreferrer\">https://github.com/jedrekdomanski/password_generator</a></p>\n<p>I also tried pointing to my repo and branch in the Gemfile</p>\n<pre><code>gem 'password_generator', git: 'git@github.com:jedrekdomanski/password_generator.git', branch: 'master'\n</code></pre>\n<p>but I get the same error message <code>uninitialized constant PasswordGenerator (NameError)</code></p>\n"}, {"tags": ["sql", "ruby-on-rails", "ruby"], "answers": [{"tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": true, "score": 3, "last_activity_date": 1539018845, "creation_date": 1539018845, "answer_id": 52707166, "question_id": 52706955, "link": "https://stackoverflow.com/questions/52706955/optimize-rails-query-deleting-select-method/52707166#52707166", "title": "Optimize rails query deleting select method", "body": "<p>I would expect that a simple <code>joins(:rtrs)</code> should work because it is able to handle <code>has_many through</code> associations and builds an <code>INNER JOIN</code> that will only return users that have at least one <code>rtrs</code>.</p>\n\n<pre><code>User.joins(:rtrs).invited.not_rejected.order(updated_at: :desc)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 67463, "user_id": 203130, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/1RE8c.jpg?s=128&g=1", "display_name": "coreyward", "link": "https://stackoverflow.com/users/203130/coreyward"}, "is_accepted": false, "score": 0, "last_activity_date": 1539022757, "creation_date": 1539022757, "answer_id": 52708015, "question_id": 52706955, "link": "https://stackoverflow.com/questions/52706955/optimize-rails-query-deleting-select-method/52708015#52708015", "title": "Optimize rails query deleting select method", "body": "<p>If you're unable to use <code>joins</code> like @spickermann suggests, you can compose multiple <code>ActiveRecord_Relation</code>s together: </p>\n\n<pre><code>users = User.not_rejected.invited.order(updated_at: desc)\nusers.where(rtrs: Rtr.all)\n</code></pre>\n\n<p>Or if you have a scope on <code>Rtr</code> you can use it: </p>\n\n<pre><code>class Rtr &lt; ApplicationRecord\n  scope :upside_down, where(upside_down: true)\nend\n\nusers.where(rtrs: Rtr.upside_down)\n</code></pre>\n"}], "owner": {"reputation": 28, "user_id": 6157101, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-d7DLXPGUJJU/AAAAAAAAAAI/AAAAAAAAAEY/WN3laR8YxRo/photo.jpg?sz=128", "display_name": "Salcedo Jesus", "link": "https://stackoverflow.com/users/6157101/salcedo-jesus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "accepted_answer_id": 52707166, "answer_count": 2, "score": 0, "last_activity_date": 1539022757, "creation_date": 1539017983, "last_edit_date": 1539020493, "question_id": 52706955, "link": "https://stackoverflow.com/questions/52706955/optimize-rails-query-deleting-select-method", "title": "Optimize rails query deleting select method", "body": "<p>I am triying to optimize the following due to slow work on method <em>select</em> from ruby into more than 16.000 records, but i really dont know how to build it into SQL query or using joins and includes:</p>\n\n<pre><code>User.invited.not_rejected.order('users.updated_at desc').select{|x| x unless x.rtr.nil?}\n</code></pre>\n\n<p>The relations are:</p>\n\n<pre><code>class User &lt; ApplicationRecord\n  hass_many :transition_elements\n  has_many :rtrs, through: :transition_elements\n\n  scope :not_rejected -&gt; { where(rejected: false) }\n  scope :invited -&gt; { where(invited: true) }\nend\n\nclass TransitionElement &lt; ApplicationRecord\n  has_many :rtrs\n  belongs_to :user\nend\n\nclass Rtr &lt; ApplicationRecord\n  belongs_to :transition_element\nend\n</code></pre>\n"}, {"tags": ["ruby", "imagemagick", "imagemagick-convert", "minimagick"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 1, "creation_date": 1539017639, "post_id": 52706832, "comment_id": 92339965, "body": "Please define what \u201cblank\u201d means for the jpeg file."}, {"owner": {"reputation": 27, "user_id": 10002350, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/449cc60efa3879072036038a577889fd?s=128&d=identicon&r=PG&f=1", "display_name": "Yash Madane", "link": "https://stackoverflow.com/users/10002350/yash-madane"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1539018003, "post_id": 52706832, "comment_id": 92340137, "body": "Blank as in all pixels white with a threshold"}], "answers": [{"comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1539021616, "post_id": 52707015, "comment_id": 92341752, "body": "Actually converting this to ruby should not be very difficult take a look at <a href=\"https://github.com/minimagick/minimagick\" rel=\"nofollow noreferrer\"><code>mini_magick</code></a>. It leverages the CLI for ImageMagick and offers direct access to the <a href=\"https://github.com/minimagick/minimagick#attributes\" rel=\"nofollow noreferrer\">raw attributes</a>."}, {"owner": {"reputation": 27, "user_id": 10002350, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/449cc60efa3879072036038a577889fd?s=128&d=identicon&r=PG&f=1", "display_name": "Yash Madane", "link": "https://stackoverflow.com/users/10002350/yash-madane"}, "edited": false, "score": 0, "creation_date": 1539027224, "post_id": 52707015, "comment_id": 92344076, "body": "@fmw42 , can we incorporate some noise in the image. As in if there are a few dots in the image, can it still assign it as full white . In this command, if there are a few dots on the image it assigns it as 0"}, {"owner": {"reputation": 27168, "user_id": 7355741, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6CMNt.jpg?s=128&g=1", "display_name": "fmw42", "link": "https://stackoverflow.com/users/7355741/fmw42"}, "edited": false, "score": 0, "creation_date": 1539041117, "post_id": 52707015, "comment_id": 92348721, "body": "If the dots have gray level above your threshold, then it should still work. Otherwise change the test to mean&lt;=.99 or whatever value you want to consider as a degradation from white."}], "tags": [], "owner": {"reputation": 27168, "user_id": 7355741, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6CMNt.jpg?s=128&g=1", "display_name": "fmw42", "link": "https://stackoverflow.com/users/7355741/fmw42"}, "is_accepted": false, "score": 2, "last_activity_date": 1539018246, "creation_date": 1539018246, "answer_id": 52707015, "question_id": 52706832, "link": "https://stackoverflow.com/questions/52706832/identifying-whether-a-jpg-image-is-blank-using-ruby-programming/52707015#52707015", "title": "Identifying whether a jpg image is blank using RUBY programming", "body": "<p>In Imagemagick 6 command line, one could do the following. Threshold the image, then use fx to test if the mean is equal to 1 (full white). If so, return 1, else return 0.</p>\n\n<pre><code>convert image -threshold X% -format \"%[fx:mean==1?1:0]\" info:\n</code></pre>\n\n<p><br>\nSorry, I do not know ruby.</p>\n"}], "owner": {"reputation": 27, "user_id": 10002350, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/449cc60efa3879072036038a577889fd?s=128&d=identicon&r=PG&f=1", "display_name": "Yash Madane", "link": "https://stackoverflow.com/users/10002350/yash-madane"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 104, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1539018246, "creation_date": 1539017411, "question_id": 52706832, "link": "https://stackoverflow.com/questions/52706832/identifying-whether-a-jpg-image-is-blank-using-ruby-programming", "title": "Identifying whether a jpg image is blank using RUBY programming", "body": "<p>I have an input image known as test.jpg. I want to create a function in Ruby which will identify if the image is blank and return a boolean value true or false. </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "amazon-s3", "file-upload", "shrine"], "answers": [{"tags": [], "owner": {"reputation": 341, "user_id": 8208791, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154392642776710/picture?type=large", "display_name": "Rui Freitas", "link": "https://stackoverflow.com/users/8208791/rui-freitas"}, "is_accepted": false, "score": 0, "last_activity_date": 1539025298, "creation_date": 1539025298, "answer_id": 52708546, "question_id": 52706180, "link": "https://stackoverflow.com/questions/52706180/rails-5-shrine-polymorphic-model-pretty-location/52708546#52708546", "title": "Rails 5 + Shrine + Polymorphic model + Pretty Location", "body": "<p>The above setup actually works. I was using a breakpoint inside the <code>generate_location</code> FileUploader method and the api was breaking because that method was returning nil.</p>\n\n<p>After fixing that, the first time it ran <code>documentable</code> was still nil but the method would run a second time with the <code>documentable</code> attributes present.</p>\n\n<pre><code>def generate_location(io, context = {})\n  return \"\" unless context[:record].documentable\n  path =  if context[:record].documentable_type == \"SomeClass\"\n            # do something\n          elsif context[:record].documentable_type == \"OtherClass\"\n            # do something else\n          else\n            # do something else\n          end\n  return path\nend\n</code></pre>\n"}], "owner": {"reputation": 341, "user_id": 8208791, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154392642776710/picture?type=large", "display_name": "Rui Freitas", "link": "https://stackoverflow.com/users/8208791/rui-freitas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 552, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1539025298, "creation_date": 1539014687, "question_id": 52706180, "link": "https://stackoverflow.com/questions/52706180/rails-5-shrine-polymorphic-model-pretty-location", "title": "Rails 5 + Shrine + Polymorphic model + Pretty Location", "body": "<p>I'm using Shrine for direct uploads to S3 and I'm trying to user the <code>pretty_location</code> plugin to set the location in my S3 bucket.</p>\n\n<p>I have a document model has the <code>file_data</code>text attribute and is connected to a FileUploader:</p>\n\n<pre><code>class Document &lt; ApplicationRecord\n  belongs_to :documentable, polymorphic: true\n  include FileUploader[:file]\n\n  validates :file, presence: true\nend\n</code></pre>\n\n<p>Other models are associated with the document model through the following concern:</p>\n\n<pre><code>module Documentable\n  extend ActiveSupport::Concern\n\n  included do\n    has_one :document, as: :documentable, dependent: :destroy\n    accepts_nested_attributes_for :document, allow_destroy: true\n  end\nend\n</code></pre>\n\n<p>This is my FileUploader:</p>\n\n<pre><code>class FileUploader &lt; Shrine\n  Attacher.promote { |data| PromoteJob.perform_later(data) }\n  Attacher.delete { |data| DeleteJob.perform_later(data) }\n\n  plugin :upload_options, cache: {acl: \"public-read\"}\n  plugin :upload_options, store: {acl: \"public-read\"}\n  plugin :logging, logger: Rails.logger\n  plugin :pretty_location\n  plugin :processing\n  plugin :delete_promoted\n  plugin :recache\n  plugin :restore_cached_data\n  plugin :delete_raw\n  plugin :validation_helpers\n\n  def generate_location(io, context = {})\n    # do something depending on context[:record].documentable\n  end\nend\n</code></pre>\n\n<p>When uploading files from the user's filesystem via the client browser through nested attributes all works as expected and I'm able to generate a pretty location in my S3 bucket.</p>\n\n<p>However, I have another model where I am trying to upload to S3 a PDF file which is generated in the backend with the following setup.</p>\n\n<pre><code>class Invoice &lt; ApplicationRecord\n  has_one :documents, as: :documentable, dependent: :destroy\nend \n</code></pre>\n\n<p>The Invoice model doesn't use the concern as I want it to connect to the polymorphic document with a <code>has_many</code> association.</p>\n\n<pre><code>class Api::V1::InvoicesController &lt; Api::V1::BaseController\n  def upload_pdf\n    pdf = InvoicePdf.new(@invoice)\n    attachment = pdf.render\n    file = StringIO.new(attachment)\n    file.class.class_eval { attr_accessor :original_filename, :content_type }\n    file.original_filename = \"invoice_#{@invoice.reference}.pdf\"\n    file.content_type = \"application/pdf\"\n    @document = @invoice.documents.new(file: file)\n    if @document.save\n      render \"documents/show.json\", status: :created\n    else\n      render json: { errors: @document.errors }, status: :unprocessable_entity\n    end\n  end\nend\n</code></pre>\n\n<p>The upload works fine and I am able to upload the PDF to my S3 bucket, but I am not able to generate a pretty location because when I'm inside the <code>generate_location</code> method the <code>context[:record]</code> both the <code>documentable_type</code> and the <code>documentable_id</code> are <code>nil</code>.</p>\n\n<p>This is a strange behaviour as in the rails console I am able to see that the association is correctly set after the upload has been done (without pretty_location) by running <code>Invoice.last.documents.file.url</code>.</p>\n\n<p>I have tried creating the document record in different ways, have tried using the same <code>documentable</code> concern that works for other models but the result is alway the same and I have run out of ideas.</p>\n\n<p>Does anyone have a clue why the <code>documentable_type</code> and <code>documentable_id</code> are not being passed into the <code>context</code> object inside the FileUploader?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "elasticsearch", "searchkick"], "comments": [{"owner": {"reputation": 1174, "user_id": 1425962, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cbb89b486429603c7e2bef834aa29e15?s=128&d=identicon&r=PG", "display_name": "Slomo", "link": "https://stackoverflow.com/users/1425962/slomo"}, "edited": false, "score": 0, "creation_date": 1539015632, "post_id": 52705874, "comment_id": 92339126, "body": "Have you checked some entries? That would happen if last_contacted is null for all entries. Also, check the mapping on the index <a href=\"https://www.elastic.co/guide/en/elasticsearch/reference/current/indices-get-mapping.html\" rel=\"nofollow noreferrer\">elastic.co/guide/en/elasticsearch/reference/current/&hellip;</a> - what is the mapping for last_contacted?"}, {"owner": {"reputation": 4576, "user_id": 5095957, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uSIvc.jpg?s=128&g=1", "display_name": "Nikolay Vasiliev", "link": "https://stackoverflow.com/users/5095957/nikolay-vasiliev"}, "edited": false, "score": 0, "creation_date": 1539025025, "post_id": 52705874, "comment_id": 92343219, "body": "May you please post your mapping and a couple of example documents?"}], "answers": [{"tags": [], "owner": {"reputation": 2662, "user_id": 10443105, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-9CdeAHKgoxY/AAAAAAAAAAI/AAAAAAAAAHo/UQGyNrqE0ao/photo.jpg?sz=128", "display_name": "Tarek Essam", "link": "https://stackoverflow.com/users/10443105/tarek-essam"}, "is_accepted": false, "score": 0, "last_activity_date": 1539022555, "creation_date": 1539022555, "answer_id": 52707968, "question_id": 52705874, "link": "https://stackoverflow.com/questions/52705874/elasticsearch-datetime-range-query-inconsistent/52707968#52707968", "title": "Elasticsearch DateTime Range Query Inconsistent", "body": "<p>Try to insert the format of the date: </p>\n\n<pre><code>{\n  query: {\n    range: {\n        last_contacted: {\n          gte: \"01/01/2012\",\n          lte: \"now\",\n          format: \"dd/MM/yyyy\"\n        }\n      }\n   }\n}\n</code></pre>\n"}], "owner": {"reputation": 217, "user_id": 8662972, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/983aa9e2a21470a85dfdb84410f762bb?s=128&d=identicon&r=PG&f=1", "display_name": "Spikerr", "link": "https://stackoverflow.com/users/8662972/spikerr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 281, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1539022555, "creation_date": 1539013600, "question_id": 52705874, "link": "https://stackoverflow.com/questions/52705874/elasticsearch-datetime-range-query-inconsistent", "title": "Elasticsearch DateTime Range Query Inconsistent", "body": "<p>I am trying to use elastic search with searchkick in a rails application to query a date range. I have tried many things but this is the current state. I am trying to search by <code>last_contacted</code> which is stored on the schema as a <code>datetime</code>. </p>\n\n<p>My <code>searchdata</code> function looks as follows</p>\n\n<pre><code> def search_data_attributes\n{\n  tag: tags.map { |t| t.name.downcase },\n  trait: person_traits.map { |pt| format('%s:%s', traits.find(pt.trait_id).name.downcase, pt.value.downcase) },\n  question: questions.map(&amp;:id),\n  answer: answers.map { |a| a.value.downcase },\n  last_participated: last_participation_date.to_s,\n  signup_at: signup_at.to_s,\n  full_name: full_name,\n  last_contacted: last_contacted\n}\n</code></pre>\n\n<p>end</p>\n\n<p>I have tried making <code>last_contacted.to_s</code>. </p>\n\n<p>My search query looks as follows</p>\n\n<pre><code>{\n    query: {\n        range: {\n            last_contacted: {\n              gte: \"2018-09-15\",\n              lte: \"now\"\n            }\n          }\n    }\n  }\n</code></pre>\n\n<p>I have tried use date math such as <code>now-20d</code> but that returns zero results. If I have no <code>gte</code> limit searching by <code>now</code> in <code>lte</code> returns all results as expected but any change I make to <code>gte</code> returns zero results using datemath. </p>\n\n<p>I appreciate any help and would be happy to answer questions.</p>\n\n<p>Thank You.</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 1493, "user_id": 3912981, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FV2oF.png?s=128&g=1", "display_name": "Gabriel Balsa Cant&#250;", "link": "https://stackoverflow.com/users/3912981/gabriel-balsa-cant%c3%ba"}, "edited": false, "score": 0, "creation_date": 1539019141, "post_id": 52705587, "comment_id": 92340640, "body": "Welcome to StackOverflow Danny, please elaborate and edit your question correctly as it&#39;s very generalistic. Follow this guidelines <a href=\"https://stackoverflow.com/help/how-to-ask\">stackoverflow.com/help/how-to-ask</a>"}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1539060110, "post_id": 52705587, "comment_id": 92352565, "body": "The piece of code you provided is nothing. It is not even a step toward what you are trying to do."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 10473860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/422d0dc5280a994498ab0fcff58d868e?s=128&d=identicon&r=PG&f=1", "display_name": "Danny K", "link": "https://stackoverflow.com/users/10473860/danny-k"}, "edited": false, "score": 0, "creation_date": 1539021980, "post_id": 52706058, "comment_id": 92341916, "body": "Hey ! Petr Balaban"}, {"owner": {"reputation": 1, "user_id": 10473860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/422d0dc5280a994498ab0fcff58d868e?s=128&d=identicon&r=PG&f=1", "display_name": "Danny K", "link": "https://stackoverflow.com/users/10473860/danny-k"}, "edited": false, "score": 0, "creation_date": 1539022024, "post_id": 52706058, "comment_id": 92341944, "body": "Thank you for you help. Such a simple but yet effective solution."}, {"owner": {"reputation": 3995, "user_id": 2037537, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/f13d953be3af2552aaa1ddfa0a05fa46?s=128&d=identicon&r=PG", "display_name": "Roland Studer", "link": "https://stackoverflow.com/users/2037537/roland-studer"}, "reply_to_user": {"reputation": 1, "user_id": 10473860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/422d0dc5280a994498ab0fcff58d868e?s=128&d=identicon&r=PG&f=1", "display_name": "Danny K", "link": "https://stackoverflow.com/users/10473860/danny-k"}, "edited": false, "score": 0, "creation_date": 1539076508, "post_id": 52706058, "comment_id": 92360181, "body": "@danny: If then answer helped you, then please mark it as the correct answer to reward the effort of the person who helped you. ;-)"}], "tags": [], "owner": {"reputation": 645, "user_id": 589384, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8957681fbb8dba72e9c710e4ddf57c83?s=128&d=identicon&r=PG", "display_name": "Peter Balaban", "link": "https://stackoverflow.com/users/589384/peter-balaban"}, "is_accepted": false, "score": 1, "last_activity_date": 1539014267, "creation_date": 1539014267, "answer_id": 52706058, "question_id": 52705587, "link": "https://stackoverflow.com/questions/52705587/gets-accepts-uppercase-or-lowercase/52706058#52706058", "title": "&#39;gets&#39; accepts uppercase or lowercase", "body": "<p>You can use:</p>\n\n<pre><code>gets.downcase\n</code></pre>\n\n<p>and then assign it to the variable</p>\n"}], "owner": {"reputation": 1, "user_id": 10473860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/422d0dc5280a994498ab0fcff58d868e?s=128&d=identicon&r=PG&f=1", "display_name": "Danny K", "link": "https://stackoverflow.com/users/10473860/danny-k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1539060011, "creation_date": 1539012540, "last_edit_date": 1539060011, "question_id": 52705587, "link": "https://stackoverflow.com/questions/52705587/gets-accepts-uppercase-or-lowercase", "title": "&#39;gets&#39; accepts uppercase or lowercase", "body": "<p>I want to allow the user to input a choice given in my CLI using <code>gets</code> in either uppercase or lowercase. For example:</p>\n\n<pre><code>puts \"please type info for more details\" \n</code></pre>\n\n<p>How can I accomplish this task?</p>\n"}, {"tags": ["ruby", "postgresql", "activerecord", "ruby-on-rails-5"], "answers": [{"comments": [{"owner": {"reputation": 230, "user_id": 4350037, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-2rfEW9Say3A/AAAAAAAAAAI/AAAAAAAAABU/AffQsOpqhrY/photo.jpg?sz=128", "display_name": "James Woodrow", "link": "https://stackoverflow.com/users/4350037/james-woodrow"}, "edited": false, "score": 0, "creation_date": 1539033544, "post_id": 52709552, "comment_id": 92346654, "body": "Going to try this out later, but this sounds right I completely forgot about <code>MAX()</code> thanks. How would I go about using <code>event.created_at</code> when there wouldn&#39;t be any gifs for that event ? (Second example in my question)"}, {"owner": {"reputation": 2496, "user_id": 3046905, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/692eb06201cbed91c3c6a9cf11ed0511?s=128&d=identicon&r=PG", "display_name": "Ilya Konyukhov", "link": "https://stackoverflow.com/users/3046905/ilya-konyukhov"}, "reply_to_user": {"reputation": 230, "user_id": 4350037, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-2rfEW9Say3A/AAAAAAAAAAI/AAAAAAAAABU/AffQsOpqhrY/photo.jpg?sz=128", "display_name": "James Woodrow", "link": "https://stackoverflow.com/users/4350037/james-woodrow"}, "edited": false, "score": 0, "creation_date": 1539033871, "post_id": 52709552, "comment_id": 92346759, "body": "Well, you can use <code>event.created_at</code> in case event has no gifs. The order expression depends on database. For PostgreSQL it will be <code>COALESCE(MAX(gifs.created_at), MAX(events.created_at)) DESC</code>"}, {"owner": {"reputation": 230, "user_id": 4350037, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-2rfEW9Say3A/AAAAAAAAAAI/AAAAAAAAABU/AffQsOpqhrY/photo.jpg?sz=128", "display_name": "James Woodrow", "link": "https://stackoverflow.com/users/4350037/james-woodrow"}, "edited": false, "score": 0, "creation_date": 1539036571, "post_id": 52709552, "comment_id": 92347664, "body": "got errors with your queries, for the second one I got <code>ActiveRecord::StatementInvalid: PG::UndefinedTable: ERROR:  missing FROM-clause entry for table &quot;gifs&quot;</code>"}, {"owner": {"reputation": 2496, "user_id": 3046905, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/692eb06201cbed91c3c6a9cf11ed0511?s=128&d=identicon&r=PG", "display_name": "Ilya Konyukhov", "link": "https://stackoverflow.com/users/3046905/ilya-konyukhov"}, "reply_to_user": {"reputation": 230, "user_id": 4350037, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-2rfEW9Say3A/AAAAAAAAAAI/AAAAAAAAABU/AffQsOpqhrY/photo.jpg?sz=128", "display_name": "James Woodrow", "link": "https://stackoverflow.com/users/4350037/james-woodrow"}, "edited": false, "score": 0, "creation_date": 1539037065, "post_id": 52709552, "comment_id": 92347788, "body": "I updated the query, added <code>references</code> call. Try now please"}, {"owner": {"reputation": 230, "user_id": 4350037, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-2rfEW9Say3A/AAAAAAAAAAI/AAAAAAAAABU/AffQsOpqhrY/photo.jpg?sz=128", "display_name": "James Woodrow", "link": "https://stackoverflow.com/users/4350037/james-woodrow"}, "edited": false, "score": 0, "creation_date": 1539037133, "post_id": 52709552, "comment_id": 92347802, "body": "got another error <code>ActiveRecord::StatementInvalid: PG::GroupingError: ERROR:  column &quot;gifs.id&quot; must appear in the GROUP BY clause or be used in an aggregate function</code>. By the way first query doesn&#39;t produce an error, but it only returns 2 events in my second scenario (just tested it)"}, {"owner": {"reputation": 2496, "user_id": 3046905, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/692eb06201cbed91c3c6a9cf11ed0511?s=128&d=identicon&r=PG", "display_name": "Ilya Konyukhov", "link": "https://stackoverflow.com/users/3046905/ilya-konyukhov"}, "reply_to_user": {"reputation": 230, "user_id": 4350037, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-2rfEW9Say3A/AAAAAAAAAAI/AAAAAAAAABU/AffQsOpqhrY/photo.jpg?sz=128", "display_name": "James Woodrow", "link": "https://stackoverflow.com/users/4350037/james-woodrow"}, "edited": false, "score": 0, "creation_date": 1539037317, "post_id": 52709552, "comment_id": 92347860, "body": "&quot;first query only returns 2 events in my second scenario (just tested it)&quot; - that&#39;s right, it returns events with gifs; I noticed that in my answer"}, {"owner": {"reputation": 230, "user_id": 4350037, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-2rfEW9Say3A/AAAAAAAAAAI/AAAAAAAAABU/AffQsOpqhrY/photo.jpg?sz=128", "display_name": "James Woodrow", "link": "https://stackoverflow.com/users/4350037/james-woodrow"}, "reply_to_user": {"reputation": 2496, "user_id": 3046905, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/692eb06201cbed91c3c6a9cf11ed0511?s=128&d=identicon&r=PG", "display_name": "Ilya Konyukhov", "link": "https://stackoverflow.com/users/3046905/ilya-konyukhov"}, "edited": false, "score": 0, "creation_date": 1539037347, "post_id": 52709552, "comment_id": 92347867, "body": "Let us <a href=\"https://chat.stackoverflow.com/rooms/181507/discussion-between-james-woodrow-and-ilya-konyukhov\">continue this discussion in chat</a>."}, {"owner": {"reputation": 230, "user_id": 4350037, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-2rfEW9Say3A/AAAAAAAAAAI/AAAAAAAAABU/AffQsOpqhrY/photo.jpg?sz=128", "display_name": "James Woodrow", "link": "https://stackoverflow.com/users/4350037/james-woodrow"}, "edited": false, "score": 0, "creation_date": 1539037457, "post_id": 52709552, "comment_id": 92347896, "body": "Didn&#39;t understand that in your answer the first time I read it but makes sense now, still can&#39;t seem to get the second one to work though"}], "tags": [], "owner": {"reputation": 2496, "user_id": 3046905, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/692eb06201cbed91c3c6a9cf11ed0511?s=128&d=identicon&r=PG", "display_name": "Ilya Konyukhov", "link": "https://stackoverflow.com/users/3046905/ilya-konyukhov"}, "is_accepted": true, "score": 0, "last_activity_date": 1539041609, "last_edit_date": 1539041609, "creation_date": 1539029948, "answer_id": 52709552, "question_id": 52705181, "link": "https://stackoverflow.com/questions/52705181/how-to-order-by-latest-nested-model-created-at-in-a-query/52709552#52709552", "title": "How to order by latest nested model created_at in a query", "body": "<p>As an example:</p>\n\n<pre><code>Event.joins(:gifs)\n     .group('events.id')\n     .order('MAX(gifs.created_at) DESC')\n</code></pre>\n\n<p>This query takes <code>events</code>, joins them with <code>gifs</code>, groups by <code>event.id</code> (to eliminate event duplicates in case one event has several gifs) and sorts result by latest (maximal) <code>created_at</code> time of event's gifs, in descending order.</p>\n\n<p>Since it uses <code>joins</code> method, which unwraps to <code>INNER JOIN</code> in SQL query, events without gifs won't be returned by this query. To fix it use <code>left_outer_joins</code>:</p>\n\n<pre><code>Event.left_outer_joins(:gifs)\n     .group('events.id')\n     .order('MAX(gifs.created_at) DESC')\n</code></pre>\n"}], "owner": {"reputation": 230, "user_id": 4350037, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-2rfEW9Say3A/AAAAAAAAAAI/AAAAAAAAABU/AffQsOpqhrY/photo.jpg?sz=128", "display_name": "James Woodrow", "link": "https://stackoverflow.com/users/4350037/james-woodrow"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 154, "favorite_count": 1, "accepted_answer_id": 52709552, "answer_count": 1, "score": 0, "last_activity_date": 1539041609, "creation_date": 1539011269, "last_edit_date": 1539038701, "question_id": 52705181, "link": "https://stackoverflow.com/questions/52705181/how-to-order-by-latest-nested-model-created-at-in-a-query", "title": "How to order by latest nested model created_at in a query", "body": "<p>I've got a question, I don't know if this is possible but suppose these models</p>\n\n<pre class=\"lang-ruby prettyprint-override\"><code>class Event &lt; ApplicationRecord\n  has_many :gifs\nend\n\nclass Gif &lt; ApplicationRecord\n  belongs_to :event\nend\n</code></pre>\n\n<p>blank database using <code>rails console</code> you do this</p>\n\n<pre class=\"lang-ruby prettyprint-override\"><code>gif_1 = Gif.create\ngif_2 = Gif.create\ngif_3 = Gif.create\nevent_1 = Event.new\nevent_1.gifs = [gif_1, gif_3]\nevent_1.save\nevent_2 = Event.new\nevent_2.gifs = [gif_2]\nevent_2.save\n</code></pre>\n\n<p>How would you order events by their last gifs created's <code>created_at</code> attribute.</p>\n\n<p>Here is an example of what I've tried but that doesn't produce the correct result</p>\n\n<pre class=\"lang-ruby prettyprint-override\"><code>ordered_events = Event.includes(:gifs).joins(:gifs).order(\"gifs.created_at DESC\")\nordered_events.first.id\n=&gt; 2 # I want this to return 1\n</code></pre>\n\n<p>Now I understand why my attempt probably didn't work. I think it's because it probably only looked at the first <code>Gif</code> to do the ordering.</p>\n\n<p>On top of this I had another thought, and here I have no idea where to begin trying to do this in a query, but what if the <code>Event</code> has 0 <code>Gif</code>, from what I wrote it seems no gifs simply relegates those events to after the ones who do have gifs but this would not work for me.</p>\n\n<p>here's another context in <code>rails console</code> which is more realistic since normally you'd need an event first to store the <code>Gif</code></p>\n\n<pre class=\"lang-ruby prettyprint-override\"><code>event_1 = Event.create\nevent_2 = Event.create\ngif_1 = Gif.create(event_id: event_1.id)\ngif_2 = Gif.create(event_id: event_2.id)\nevent_1 = Event.create\ngif_3 = Gif.create(event_id: event_1.id)\n</code></pre>\n\n<p>Now here what I would like to get back from my query would be something of the sorts of <code>[event_1, event_3, event_2]</code> because since <code>event_3</code> has no gifs I want to use his <code>created_at</code> to order.</p>\n\n<p>I know how I could do this by hand via some helper function or other but I would really love to be able to this kind of thing in one query directly.</p>\n"}, {"tags": ["ruby", "unix", "process", "privileges"], "answers": [{"comments": [{"owner": {"reputation": 533, "user_id": 1358698, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5f813eb3399968848571df028332428d?s=128&d=identicon&r=PG", "display_name": "Tensho", "link": "https://stackoverflow.com/users/1358698/tensho"}, "edited": false, "score": 0, "creation_date": 1539027936, "post_id": 52706217, "comment_id": 92344364, "body": "For MacOS <code>suid</code> should be replaced with <code>svuid</code>"}, {"owner": {"reputation": 533, "user_id": 1358698, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5f813eb3399968848571df028332428d?s=128&d=identicon&r=PG", "display_name": "Tensho", "link": "https://stackoverflow.com/users/1358698/tensho"}, "edited": false, "score": 1, "creation_date": 1539028268, "post_id": 52706217, "comment_id": 92344523, "body": "Shorter version \u2013 <code>`ps -p #{Process.pid} -o svuid=`.strip</code>"}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": true, "score": 1, "last_activity_date": 1539014859, "creation_date": 1539014859, "answer_id": 52706217, "question_id": 52704650, "link": "https://stackoverflow.com/questions/52704650/get-current-process-saved-set-user-id/52706217#52706217", "title": "Get current process saved set-user-id", "body": "<p>Well, you are not going to like this, but AFAICT, this is the only way to get <code>suid</code> for the process.</p>\n\n<pre><code>suid = `ps -o pid,suid`[/(?&lt;=^#{Process.pid}\\s)\\s*\\d+/].strip\n#\u21d2 \"1000\"\n</code></pre>\n\n<p>Probably one should check if <code>suid</code> is available upfront. Basically, this regexp searches for the line starting with the current process\u2019 <code>pid</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 57967, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 0, "creation_date": 1539041304, "post_id": 52710085, "comment_id": 92348770, "body": "link-only answers are frowned upon because if the external resource gets changed, deleted or moved the answer becomes useless. Please post the relevat parts from the link here."}, {"owner": {"reputation": 219, "user_id": 10474577, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3137e930cf7c117b2c7aa711df8f74f6?s=128&d=identicon&r=PG&f=1", "display_name": "Ivan Gurzhiy", "link": "https://stackoverflow.com/users/10474577/ivan-gurzhiy"}, "reply_to_user": {"reputation": 57967, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 0, "creation_date": 1539072709, "post_id": 52710085, "comment_id": 92357852, "body": "Thanks @bolov for comments to improve answer"}, {"owner": {"reputation": 219, "user_id": 10474577, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3137e930cf7c117b2c7aa711df8f74f6?s=128&d=identicon&r=PG&f=1", "display_name": "Ivan Gurzhiy", "link": "https://stackoverflow.com/users/10474577/ivan-gurzhiy"}, "edited": false, "score": 0, "creation_date": 1539072729, "post_id": 52710085, "comment_id": 92357863, "body": "Thanks @Cristic for comments to improve answer."}, {"owner": {"reputation": 533, "user_id": 1358698, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5f813eb3399968848571df028332428d?s=128&d=identicon&r=PG", "display_name": "Tensho", "link": "https://stackoverflow.com/users/1358698/tensho"}, "edited": false, "score": 0, "creation_date": 1539110932, "post_id": 52710085, "comment_id": 92380248, "body": "Let me resume your answer to make sure I understood it correctly. As far as kernel copies (saves) effective UID to saved UID on a process start, everything else doesn&#39;t matter (is <code>suid</code> flag is set or not) \u2013 we just check the executable file owner and consider it as saved ID (<code>suid</code>) \u2013 <code>File.stat($0).uid</code>. Or do I miss some specific case?"}], "tags": [], "owner": {"reputation": 219, "user_id": 10474577, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3137e930cf7c117b2c7aa711df8f74f6?s=128&d=identicon&r=PG&f=1", "display_name": "Ivan Gurzhiy", "link": "https://stackoverflow.com/users/10474577/ivan-gurzhiy"}, "is_accepted": false, "score": 1, "last_activity_date": 1539072612, "last_edit_date": 1539072612, "creation_date": 1539032619, "answer_id": 52710085, "question_id": 52704650, "link": "https://stackoverflow.com/questions/52704650/get-current-process-saved-set-user-id/52710085#52710085", "title": "Get current process saved set-user-id", "body": "<p>Answer based on this question: <a href=\"https://superuser.com/questions/1149421/how-do-i-find-the-effective-user-id-euid-real-user-id-ruid-and-saved-user-i\">https://superuser.com/questions/1149421/how-do-i-find-the-effective-user-id-euid-real-user-id-ruid-and-saved-user-i</a></p>\n\n<blockquote>\n  <p>The initial effective UID (as well as the saved UID) can be guessed here: since the file has the 'setuid' flag set, and is owned by the user 'anna', running it will create a process with the effective UID of the 'anna' user.</p>\n</blockquote>\n\n<p>suid it's one of the attributes on the file, so we can just compare current process uid and owner id of the file</p>\n\n<p>From documentation <a href=\"https://ruby-doc.org/core-1.9.3/File/Stat.html#method-i-owned-3F\" rel=\"nofollow noreferrer\">https://ruby-doc.org/core-1.9.3/File/Stat.html#method-i-owned-3F</a></p>\n\n<p>You can try use this method from stat:</p>\n\n<blockquote>\n  <p><code>owned? \u2192 true or false</code> </p>\n  \n  <p>Returns true if the effective user id of the process is the same as the owner of stat.\n  Examples:\n  <code>File.stat(\"testfile\").owned?      #=&gt; true</code></p>\n  \n  <p><code>File.stat(\"/etc/passwd\").owned?   #=&gt; false</code></p>\n</blockquote>\n\n<p>And if process uid and file owner not equal we can possibly say that binary has suid, and we can better determine is we have suid with next method from documentation:</p>\n\n<p><a href=\"https://ruby-doc.org/core-1.9.3/File/Stat.html#method-i-setuid-3F\" rel=\"nofollow noreferrer\">https://ruby-doc.org/core-1.9.3/File/Stat.html#method-i-setuid-3F</a></p>\n\n<blockquote>\n  <p><code>setuid? \u2192 true or false</code> </p>\n  \n  <p>Returns true if stat has the set-user-id permission bit set, false if it doesn't or if the operating system doesn't support this feature.</p>\n  \n  <p><code>File.stat(\"/bin/su\").setuid?   #=&gt; true</code></p>\n</blockquote>\n"}], "owner": {"reputation": 533, "user_id": 1358698, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5f813eb3399968848571df028332428d?s=128&d=identicon&r=PG", "display_name": "Tensho", "link": "https://stackoverflow.com/users/1358698/tensho"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 356, "favorite_count": 0, "accepted_answer_id": 52706217, "answer_count": 2, "score": 2, "last_activity_date": 1539781613, "creation_date": 1539009490, "question_id": 52704650, "link": "https://stackoverflow.com/questions/52704650/get-current-process-saved-set-user-id", "title": "Get current process saved set-user-id", "body": "<p>It's pretty obvious how to get <strong>real user ID</strong> (<a href=\"https://ruby-doc.org/core-2.5.1/Process.html#method-c-uid\" rel=\"nofollow noreferrer\"><code>Process.uid</code></a>) and <strong>effective user ID</strong> (<a href=\"https://ruby-doc.org/core-2.5.1/Process.html#method-c-egid\" rel=\"nofollow noreferrer\"><code>Process.euid</code></a>) of the current running process in Ruby with stdlib help. But I wonder where is a sibling method for the <strong>saved set-user-ID</strong>, something like <code>Process.suid</code>? There is only <a href=\"http://ruby-doc.org/core-2.5.1/Process/UID.html#method-c-sid_available-3F\" rel=\"nofollow noreferrer\"><code>Process::UID.sid_available?</code></a> method, which allows to determine, does the running platform supports described feature.</p>\n"}, {"tags": ["ruby", "regex"], "comments": [{"owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 1, "creation_date": 1539008227, "post_id": 52704261, "comment_id": 92335035, "body": "There have been such questions. E.g. <code>&#47;\\A(.+?)(\\(\\d{4}\\))?\\z&#47;</code>"}, {"owner": {"reputation": 7638, "user_id": 120615, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/188a96403bfb1b3781ab95fc1bc92241?s=128&d=identicon&r=PG", "display_name": "jordelver", "link": "https://stackoverflow.com/users/120615/jordelver"}, "reply_to_user": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1539009943, "post_id": 52704261, "comment_id": 92336061, "body": "Thank you @WiktorStribi\u017cew"}], "owner": {"reputation": 7638, "user_id": 120615, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/188a96403bfb1b3781ab95fc1bc92241?s=128&d=identicon&r=PG", "display_name": "jordelver", "link": "https://stackoverflow.com/users/120615/jordelver"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 26, "favorite_count": 0, "closed_date": 1539009919, "answer_count": 0, "score": 0, "last_activity_date": 1539008167, "creation_date": 1539008167, "question_id": 52704261, "link": "https://stackoverflow.com/questions/52704261/how-do-i-make-a-ruby-regular-expression-capture-group-optional", "closed_reason": "Duplicate", "title": "How do I make a Ruby regular expression capture group optional?", "body": "<p>I need to match text such as this, with and without the parentheses and numbers.</p>\n\n<pre><code>Foo Bar Baz (1234)\nFoo Bar Baz\n</code></pre>\n\n<p>So far I have this, which matches if the <code>(1234)</code> is not present.</p>\n\n<pre><code>\\A(.+)(\\(\\d{4}\\))\\z\n</code></pre>\n\n<p>How can I make the second group optional?</p>\n"}, {"tags": ["ruby", "rubygems", "jekyll"], "comments": [{"owner": {"reputation": 19724, "user_id": 1165509, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/2ebdffd5ddb4a98b0cc77117503d2711?s=128&d=identicon&r=PG", "display_name": "marcanuy", "link": "https://stackoverflow.com/users/1165509/marcanuy"}, "edited": false, "score": 0, "creation_date": 1539027910, "post_id": 52702276, "comment_id": 92344354, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/35301292/excluding-a-directory-from-jekyll-watch\">Excluding a directory from Jekyll watch</a>"}, {"owner": {"reputation": 333, "user_id": 4423576, "user_type": "registered", "accept_rate": 56, "profile_image": "https://lh5.googleusercontent.com/-cFhBtGfTo4g/AAAAAAAAAAI/AAAAAAAAAOI/wYcw7kC62bE/photo.jpg?sz=128", "display_name": "Lukas Chen", "link": "https://stackoverflow.com/users/4423576/lukas-chen"}, "reply_to_user": {"reputation": 19724, "user_id": 1165509, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/2ebdffd5ddb4a98b0cc77117503d2711?s=128&d=identicon&r=PG", "display_name": "marcanuy", "link": "https://stackoverflow.com/users/1165509/marcanuy"}, "edited": false, "score": 0, "creation_date": 1539839493, "post_id": 52702276, "comment_id": 92648288, "body": "I have edited my question so it&#39;s not a duplicate"}], "answers": [{"tags": [], "owner": {"reputation": 694, "user_id": 6481767, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/881dc5adac4bec55f445d812f2e32505?s=128&d=identicon&r=PG&f=1", "display_name": "Aaditya Maheshwari", "link": "https://stackoverflow.com/users/6481767/aaditya-maheshwari"}, "is_accepted": false, "score": 3, "last_activity_date": 1539006044, "creation_date": 1539006044, "answer_id": 52703625, "question_id": 52702276, "link": "https://stackoverflow.com/questions/52702276/is-there-a-way-for-a-folder-to-be-included-in-the-production-build-but-not-have/52703625#52703625", "title": "Is there a way for a folder to be included in the production build but not have jekyll compile it?", "body": "<p>You might wanna check this out:\n<a href=\"https://stackoverflow.com/questions/35301292/excluding-a-directory-from-jekyll-watch\">Excluding a directory from Jekyll watch</a></p>\n\n<p>P.S.: Always explore stack overflow before posting a question; yours could be a duplicate or answered before. You get downvoted otherwise.</p>\n"}], "owner": {"reputation": 333, "user_id": 4423576, "user_type": "registered", "accept_rate": 56, "profile_image": "https://lh5.googleusercontent.com/-cFhBtGfTo4g/AAAAAAAAAAI/AAAAAAAAAOI/wYcw7kC62bE/photo.jpg?sz=128", "display_name": "Lukas Chen", "link": "https://stackoverflow.com/users/4423576/lukas-chen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 0, "answer_count": 1, "score": 6, "last_activity_date": 1539218275, "creation_date": 1539001547, "last_edit_date": 1539050545, "question_id": 52702276, "link": "https://stackoverflow.com/questions/52702276/is-there-a-way-for-a-folder-to-be-included-in-the-production-build-but-not-have", "title": "Is there a way for a folder to be included in the production build but not have jekyll compile it?", "body": "<p>I think the best example for this would an <code>images/</code> folder or <code>node_modules/</code> for images &amp; dependencies to be included in the final build without taking a really long time to compile.</p>\n\n<p>edit:</p>\n\n<p>sorry for not specifying but I'm well aware of <code>keep_files</code> and <code>exclude</code> and both don't help with my situation.</p>\n\n<p><code>exclude</code> excludes the folder and files from the compiling and site build and would require additional pipelining tools to move them manually each time.</p>\n\n<p><code>keep_files</code> requires the files to exist in the final build in the first place, which is not possible for some production environment (GitHub's gh-pages etc. etc.)</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 9602, "user_id": 3607136, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/NRFso.jpg?s=128&g=1", "display_name": "Gagan Gami", "link": "https://stackoverflow.com/users/3607136/gagan-gami"}, "edited": false, "score": 0, "creation_date": 1539002555, "post_id": 52701868, "comment_id": 92331579, "body": "@does : what&#39;s your expected output? should return only number or both number and character ?"}, {"owner": {"reputation": 9602, "user_id": 3607136, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/NRFso.jpg?s=128&g=1", "display_name": "Gagan Gami", "link": "https://stackoverflow.com/users/3607136/gagan-gami"}, "edited": false, "score": 0, "creation_date": 1539005076, "post_id": 52701868, "comment_id": 92333074, "body": "check my answer it will work for any word, you don&#39;t need to change code again and again ;)"}], "answers": [{"comments": [{"owner": {"reputation": 67, "user_id": 10370468, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b17c7d4feeea415cfafebafe1332c713?s=128&d=identicon&r=PG&f=1", "display_name": "Does", "link": "https://stackoverflow.com/users/10370468/does"}, "edited": false, "score": 0, "creation_date": 1539001102, "post_id": 52702085, "comment_id": 92330702, "body": "but what if we have string like &quot;zeb&quot;?"}, {"owner": {"reputation": 3523, "user_id": 9043475, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FNxvn.jpg?s=128&g=1", "display_name": "Rajagopalan", "link": "https://stackoverflow.com/users/9043475/rajagopalan"}, "reply_to_user": {"reputation": 67, "user_id": 10370468, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b17c7d4feeea415cfafebafe1332c713?s=128&d=identicon&r=PG&f=1", "display_name": "Does", "link": "https://stackoverflow.com/users/10370468/does"}, "edited": false, "score": 0, "creation_date": 1539001281, "post_id": 52702085, "comment_id": 92330799, "body": "@Does Oh okay, Now I understood your requirement clearly, wait I will come up with another solution."}, {"owner": {"reputation": 67, "user_id": 10370468, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b17c7d4feeea415cfafebafe1332c713?s=128&d=identicon&r=PG&f=1", "display_name": "Does", "link": "https://stackoverflow.com/users/10370468/does"}, "edited": false, "score": 0, "creation_date": 1539002112, "post_id": 52702085, "comment_id": 92331330, "body": "Amazing dude, thats what I was looking for!"}], "tags": [], "owner": {"reputation": 3523, "user_id": 9043475, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FNxvn.jpg?s=128&g=1", "display_name": "Rajagopalan", "link": "https://stackoverflow.com/users/9043475/rajagopalan"}, "is_accepted": true, "score": 3, "last_activity_date": 1539001585, "last_edit_date": 1539001585, "creation_date": 1539000914, "answer_id": 52702085, "question_id": 52701868, "link": "https://stackoverflow.com/questions/52701868/how-to-find-highest-char-value-in-ruby/52702085#52702085", "title": "How to find highest char value in ruby?", "body": "<p>You can do this</p>\n\n<p>For <code>zep</code> string</p>\n\n<pre><code>p [*'a'..'z'].zip([1, 3, 1, 3, 1, 4, 1, 3, 2, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5])\n    .select{|x|(\"zeb\".chars).include?x[0]}.max_by{|x|x[1]}\n</code></pre>\n\n<p>output</p>\n\n<pre><code>[\"z\", 5]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 9602, "user_id": 3607136, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/NRFso.jpg?s=128&g=1", "display_name": "Gagan Gami", "link": "https://stackoverflow.com/users/3607136/gagan-gami"}, "is_accepted": false, "score": 2, "last_activity_date": 1539004446, "last_edit_date": 1539004446, "creation_date": 1539002659, "answer_id": 52702624, "question_id": 52701868, "link": "https://stackoverflow.com/questions/52701868/how-to-find-highest-char-value-in-ruby/52702624#52702624", "title": "How to find highest char value in ruby?", "body": "<p>You can pass any priority <code>array</code> and any <code>word</code> as arguments:</p>\n\n<pre><code>def designer_pdf(h, word)\n  alpha =  Hash[('a'..'z').zip(h)]\n\n  # if you want only character from word with highest priority\n  character = word.chars.max_by{|e| alpha[e]}\n\n  # if you want only highest char value\n  value = alpha[character]\n\n  # if you want both character and value\n  [character, value]\nend\n\n&gt; designer_pdf([1, 3, 1, 3, 1, 4, 1, 3, 2, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5], \"abc\")\n#=&gt; [\"b\", 3] \n\n&gt; designer_pdf([1, 3, 1, 3, 1, 4, 1, 3, 2, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5], \"zeb\")\n#=&gt; [\"z\", 5] \n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3523, "user_id": 9043475, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FNxvn.jpg?s=128&g=1", "display_name": "Rajagopalan", "link": "https://stackoverflow.com/users/9043475/rajagopalan"}, "edited": false, "score": 0, "creation_date": 1539027692, "post_id": 52708029, "comment_id": 92344272, "body": "Is there any reason why you use each_char instead of chars?"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 3523, "user_id": 9043475, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FNxvn.jpg?s=128&g=1", "display_name": "Rajagopalan", "link": "https://stackoverflow.com/users/9043475/rajagopalan"}, "edited": false, "score": 0, "creation_date": 1539028471, "post_id": 52708029, "comment_id": 92344610, "body": "<code>each_char</code> returns an enumerator; <code>chars</code> returns an unneeded temporary array. The only time I use <code>chars</code> is when I want to set a variable equal to an array of characters or when I&#39;m chaining to an <code>Array</code> method (rather than an <code>Enumerable</code> method). For example, <code>&#39;cat&#39;.chars.combination(2)..</code> returns an enumerator, whereas  <code>&#39;cat&#39;.each_char.combination(2)</code> raises the exception <code>NoMethodError (undefined method &#39;combination&#39; for #&lt;Enumerator: &quot;cat&quot;:each_char&gt;)</code>."}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 1, "last_activity_date": 1539026772, "last_edit_date": 1539026772, "creation_date": 1539022815, "answer_id": 52708029, "question_id": 52701868, "link": "https://stackoverflow.com/questions/52701868/how-to-find-highest-char-value-in-ruby/52708029#52708029", "title": "How to find highest char value in ruby?", "body": "<p>There is no need to construct a hash.</p>\n\n<pre><code>def largest_mapped_value(word, values)\n  base = 'a'.ord\n  values[word.each_char.max_by { |c| values[c.ord-base] }.ord-base]\nend\n\n  #       a  b  c  d  e  f  g  h  i  j  k  l  m  n  o  p  q  r  s  t\nvalues = [1, 3, 1, 3, 1, 4, 1, 3, 2, 5, 6, 5, 5, 7, 5, 5, 5, 5, 5, 1,\n          5, 5, 5, 5, 5, 5]\n  #       u  v  w  x  y  z\n\n%w| cat kite zebra fined a |.each { |word|\n  puts \"#{word}: #{largest_mapped_value(word, values)}\" }\ncat:   1\nkite:  6\nzebra: 5\nfined: 7\na:     1\n</code></pre>\n\n<p>A variant is the following.</p>\n\n<pre><code>word = \"fined\"\nbase = 'a'.ord\n  #=&gt; 97\nword.each_char.map { |c| values[c.ord-base] }.max\n  #=&gt; 7\n</code></pre>\n"}], "owner": {"reputation": 67, "user_id": 10370468, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b17c7d4feeea415cfafebafe1332c713?s=128&d=identicon&r=PG&f=1", "display_name": "Does", "link": "https://stackoverflow.com/users/10370468/does"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 193, "favorite_count": 0, "accepted_answer_id": 52702085, "answer_count": 3, "score": 0, "last_activity_date": 1539026772, "creation_date": 1539000224, "last_edit_date": 1539004336, "question_id": 52701868, "link": "https://stackoverflow.com/questions/52701868/how-to-find-highest-char-value-in-ruby", "title": "How to find highest char value in ruby?", "body": "<p>Suppose I'm given a string \"Nas\". I want to select the char which has the highest integer value. How can I do this in Ruby?</p>\n\n<p>My implementation involved creating a hash with the numerical value for each char:</p>\n\n<pre><code>alpha = {}\n('a'...'z').zip(1. .26).each do |x| alpha[x[0]] = x[1] end\n</code></pre>\n\n<p>And then I'd loop through my word like so:</p>\n\n<pre><code>word.each_char do |c |\n    puts c\nend\n</code></pre>\n\n<p>I have defined a method which takes two parameters, the first param is an array which specifies the \"importance of a char\", and second param takes a word:</p>\n\n<pre><code>def designer_pdf(h, word)\n  alpha = {}\n  ('a'...'z').zip(1..26).each do |x|\n    alpha[x[0]] = x[1]\n  end\n\n  word.each_char do |c|\n    puts c\n  end\nend\n\ndesigner_pdf (\n  [1, 3, 1, 3, 1, 4, 1, 3, 2, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5],\n  'abc'\n)\n</code></pre>\n\n<p>The goal is two return the highest value from the <code>h</code> array based on the character from <code>word</code>.</p>\n\n<p>For example, <code>word: 'abc'</code>:</p>\n\n<pre><code>a = 1\nb = 3\nc = 1\n</code></pre>\n\n<p>So return 3 because b is highest.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rubocop"], "comments": [{"owner": {"reputation": 7844, "user_id": 1520557, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/9KKRA.png?s=128&g=1", "display_name": "Drenmi", "link": "https://stackoverflow.com/users/1520557/drenmi"}, "edited": false, "score": 0, "creation_date": 1539146901, "post_id": 52700506, "comment_id": 92390451, "body": "Note that static attributes are deprecated in FactoryBot. In the next version you&#39;ll need to use brackets <code>{}</code> around all values."}], "answers": [{"tags": [], "owner": {"reputation": 2496, "user_id": 3046905, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/692eb06201cbed91c3c6a9cf11ed0511?s=128&d=identicon&r=PG", "display_name": "Ilya Konyukhov", "link": "https://stackoverflow.com/users/3046905/ilya-konyukhov"}, "is_accepted": false, "score": 1, "last_activity_date": 1539009662, "last_edit_date": 1539009662, "creation_date": 1539001511, "answer_id": 52702259, "question_id": 52700506, "link": "https://stackoverflow.com/questions/52700506/lint-ambiguousoperator-ambiguous-negative-number-operator/52702259#52702259", "title": "Lint/AmbiguousOperator: Ambiguous negative number operator", "body": "<p>I can't add more to Rubocop's error description, it's clear and comprehensive. Adding brackets to -1:</p>\n\n<pre><code>max_colors_cut_together { -1 }\n</code></pre>\n\n<p>should eliminate that error.</p>\n\n<p>See this <a href=\"https://devhints.io/factory_bot\" rel=\"nofollow noreferrer\">cheatsheet</a> as a quick guide on factory_bot patterns.</p>\n"}, {"comments": [{"owner": {"reputation": 85, "user_id": 8654845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a062881eb20b954b7e041a6d4ff7106?s=128&d=identicon&r=PG&f=1", "display_name": "Bablu Patel", "link": "https://stackoverflow.com/users/8654845/bablu-patel"}, "edited": false, "score": 0, "creation_date": 1539061961, "post_id": 52705098, "comment_id": 92353032, "body": "Thanks a lot. llya Konyukhov&#39;s and your answer both are working."}], "tags": [], "owner": {"reputation": 9297, "user_id": 764546, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/OfNpk.jpg?s=128&g=1", "display_name": "MikDiet", "link": "https://stackoverflow.com/users/764546/mikdiet"}, "is_accepted": true, "score": 1, "last_activity_date": 1539011001, "creation_date": 1539011001, "answer_id": 52705098, "question_id": 52700506, "link": "https://stackoverflow.com/questions/52700506/lint-ambiguousoperator-ambiguous-negative-number-operator/52705098#52705098", "title": "Lint/AmbiguousOperator: Ambiguous negative number operator", "body": "<p><code>max_colors_cut_together -1</code> is actually ruby's syntax sugar for method invocation <code>max_colors_cut_together(-1)</code> </p>\n"}], "owner": {"reputation": 85, "user_id": 8654845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a062881eb20b954b7e041a6d4ff7106?s=128&d=identicon&r=PG&f=1", "display_name": "Bablu Patel", "link": "https://stackoverflow.com/users/8654845/bablu-patel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 550, "favorite_count": 0, "accepted_answer_id": 52705098, "answer_count": 2, "score": -1, "last_activity_date": 1539011049, "creation_date": 1538995249, "last_edit_date": 1539011049, "question_id": 52700506, "link": "https://stackoverflow.com/questions/52700506/lint-ambiguousoperator-ambiguous-negative-number-operator", "title": "Lint/AmbiguousOperator: Ambiguous negative number operator", "body": "<p>I am using <a href=\"https://github.com/rubocop-hq/rubocop\" rel=\"nofollow noreferrer\">rubocop</a> gem. \nFollowing is my factorybot code.                                    </p>\n\n<pre><code>factory :cut, class: CutSetting do\n\n  maximum_length 100\n  max_colors_cut_together -1\n\nend\n</code></pre>\n\n<p>Rubocop give the following errors for negative value -1.</p>\n\n<p>Lint/AmbiguousOperator: Ambiguous negative number operator. Parenthesize the method arguments if it's surely a negative number operator, or add a whitespace to the right of the - if it should be a subtraction. (<a href=\"https://github.com/rubocop-hq/ruby-style-guide#method-invocation-parens\" rel=\"nofollow noreferrer\">https://github.com/rubocop-hq/ruby-style-guide#method-invocation-parens</a>)</p>\n\n<p>How to solve this problem. PLEASE HELP ME :(.</p>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5", "associations"], "comments": [{"owner": {"reputation": 1049, "user_id": 5832250, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2SnJA.jpg?s=128&g=1", "display_name": "Gagan Gupta", "link": "https://stackoverflow.com/users/5832250/gagan-gupta"}, "edited": false, "score": 0, "creation_date": 1538991366, "post_id": 52699299, "comment_id": 92325121, "body": "is admin associated with user or not?"}, {"owner": {"reputation": 909, "user_id": 9534861, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-HEqJQasw6sM/AAAAAAAAAAI/AAAAAAAABHA/HiEIzDPH-l0/photo.jpg?sz=128", "display_name": "Saqib Shahzad", "link": "https://stackoverflow.com/users/9534861/saqib-shahzad"}, "reply_to_user": {"reputation": 1049, "user_id": 5832250, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2SnJA.jpg?s=128&g=1", "display_name": "Gagan Gupta", "link": "https://stackoverflow.com/users/5832250/gagan-gupta"}, "edited": false, "score": 0, "creation_date": 1538991525, "post_id": 52699299, "comment_id": 92325201, "body": "No, Admin model is a separate devise model and not associated with User model."}, {"owner": {"reputation": 1049, "user_id": 5832250, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2SnJA.jpg?s=128&g=1", "display_name": "Gagan Gupta", "link": "https://stackoverflow.com/users/5832250/gagan-gupta"}, "edited": false, "score": 0, "creation_date": 1538991922, "post_id": 52699299, "comment_id": 92325432, "body": "have you defined <code>owner_type (string) &amp; owner_id</code> in followers table?"}, {"owner": {"reputation": 909, "user_id": 9534861, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-HEqJQasw6sM/AAAAAAAAAAI/AAAAAAAABHA/HiEIzDPH-l0/photo.jpg?sz=128", "display_name": "Saqib Shahzad", "link": "https://stackoverflow.com/users/9534861/saqib-shahzad"}, "reply_to_user": {"reputation": 1049, "user_id": 5832250, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2SnJA.jpg?s=128&g=1", "display_name": "Gagan Gupta", "link": "https://stackoverflow.com/users/5832250/gagan-gupta"}, "edited": false, "score": 0, "creation_date": 1538992386, "post_id": 52699299, "comment_id": 92325710, "body": "Yes I have these."}], "answers": [{"comments": [{"owner": {"reputation": 909, "user_id": 9534861, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-HEqJQasw6sM/AAAAAAAAAAI/AAAAAAAABHA/HiEIzDPH-l0/photo.jpg?sz=128", "display_name": "Saqib Shahzad", "link": "https://stackoverflow.com/users/9534861/saqib-shahzad"}, "edited": false, "score": 0, "creation_date": 1538994613, "post_id": 52699697, "comment_id": 92326976, "body": "Thank you, this is what I needed."}], "tags": [], "owner": {"reputation": 5304, "user_id": 740394, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/796442b522b037319711277a81d775ca?s=128&d=identicon&r=PG", "display_name": "Rodrigo", "link": "https://stackoverflow.com/users/740394/rodrigo"}, "is_accepted": true, "score": 2, "last_activity_date": 1538992419, "creation_date": 1538992419, "answer_id": 52699697, "question_id": 52699299, "link": "https://stackoverflow.com/questions/52699299/how-to-get-associated-polymorphic-objects-in-rails-5/52699697#52699697", "title": "How to get associated polymorphic objects in rails 5?", "body": "<p>I'm not sure, but I think that AR doesn't provide a way to load polymorphic associations in just one query. But you can use:</p>\n\n<pre><code>post = Post.find(1)\npost_followers = post.followers.includes(:owner)\npost_owners = post_followers.map(&amp;:owner)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 909, "user_id": 9534861, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-HEqJQasw6sM/AAAAAAAAAAI/AAAAAAAABHA/HiEIzDPH-l0/photo.jpg?sz=128", "display_name": "Saqib Shahzad", "link": "https://stackoverflow.com/users/9534861/saqib-shahzad"}, "edited": false, "score": 0, "creation_date": 1538993055, "post_id": 52699709, "comment_id": 92326122, "body": "I want to have something from Post to User/Admin, in opposite direction."}, {"owner": {"reputation": 1049, "user_id": 5832250, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2SnJA.jpg?s=128&g=1", "display_name": "Gagan Gupta", "link": "https://stackoverflow.com/users/5832250/gagan-gupta"}, "reply_to_user": {"reputation": 909, "user_id": 9534861, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-HEqJQasw6sM/AAAAAAAAAAI/AAAAAAAABHA/HiEIzDPH-l0/photo.jpg?sz=128", "display_name": "Saqib Shahzad", "link": "https://stackoverflow.com/users/9534861/saqib-shahzad"}, "edited": false, "score": 0, "creation_date": 1538993422, "post_id": 52699709, "comment_id": 92326328, "body": "Yeah this will create a reverse association from post using followers table as a joining table."}], "tags": [], "owner": {"reputation": 1049, "user_id": 5832250, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2SnJA.jpg?s=128&g=1", "display_name": "Gagan Gupta", "link": "https://stackoverflow.com/users/5832250/gagan-gupta"}, "is_accepted": false, "score": 2, "last_activity_date": 1538992458, "creation_date": 1538992458, "answer_id": 52699709, "question_id": 52699299, "link": "https://stackoverflow.com/questions/52699299/how-to-get-associated-polymorphic-objects-in-rails-5/52699709#52699709", "title": "How to get associated polymorphic objects in rails 5?", "body": "<p>The solution you're looking for is polymorphic has many through. You can add these lines in your model of User and Admin.</p>\n\n<pre><code>has_many :followers\nhas_many :posts, through: :followers, source: :owner, source_type: 'Owner'\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 909, "user_id": 9534861, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-HEqJQasw6sM/AAAAAAAAAAI/AAAAAAAABHA/HiEIzDPH-l0/photo.jpg?sz=128", "display_name": "Saqib Shahzad", "link": "https://stackoverflow.com/users/9534861/saqib-shahzad"}, "edited": false, "score": 0, "creation_date": 1538992917, "post_id": 52699747, "comment_id": 92326037, "body": "I already have this in my schema. This will return me all of the posts a User has wrote, But I want all of the followers of a specific Post. The user who creates any Post is added as a follower of that Post, and then whenever any other User or Admin adds any Comment on this Post, they are also added as Follower of this Post. So I should be able to send Notifications to all of the Followers of any Post."}, {"owner": {"reputation": 684, "user_id": 6607918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rL2uz.png?s=128&g=1", "display_name": "Stuart", "link": "https://stackoverflow.com/users/6607918/stuart"}, "reply_to_user": {"reputation": 909, "user_id": 9534861, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-HEqJQasw6sM/AAAAAAAAAAI/AAAAAAAABHA/HiEIzDPH-l0/photo.jpg?sz=128", "display_name": "Saqib Shahzad", "link": "https://stackoverflow.com/users/9534861/saqib-shahzad"}, "edited": false, "score": 0, "creation_date": 1538993230, "post_id": 52699747, "comment_id": 92326234, "body": "Hm. Strange. Just to be clear: You are saying that with an instance of a post: <code>post = Post.last</code>, you cannot do <code>post.owners</code> to get all the Users/Followers for that post?"}, {"owner": {"reputation": 909, "user_id": 9534861, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-HEqJQasw6sM/AAAAAAAAAAI/AAAAAAAABHA/HiEIzDPH-l0/photo.jpg?sz=128", "display_name": "Saqib Shahzad", "link": "https://stackoverflow.com/users/9534861/saqib-shahzad"}, "edited": false, "score": 0, "creation_date": 1538994010, "post_id": 52699747, "comment_id": 92326627, "body": "yes, exactly, right now I cannot do this but I want to do this."}], "tags": [], "owner": {"reputation": 684, "user_id": 6607918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rL2uz.png?s=128&g=1", "display_name": "Stuart", "link": "https://stackoverflow.com/users/6607918/stuart"}, "is_accepted": false, "score": 0, "last_activity_date": 1538992585, "creation_date": 1538992585, "answer_id": 52699747, "question_id": 52699299, "link": "https://stackoverflow.com/questions/52699299/how-to-get-associated-polymorphic-objects-in-rails-5/52699747#52699747", "title": "How to get associated polymorphic objects in rails 5?", "body": "<p>I think you want something like this:</p>\n\n<pre><code>class Post &lt; ApplicationRecord\n  belongs_to :owner, polymorphic: true\nend\n\nclass User &lt; ApplicationRecord\n  has_many :posts, as: :owner\nend\n\nclass Follower &lt; ApplicationRecord\n  has_many :posts, as: :owner\nend\n</code></pre>\n\n<p>From an instance of your User you can then retrieve their posts with @user.posts\nThe same goes for your Follower, @follower.posts</p>\n\n<p>If you want to get to the parent of your post instance, you can do so via @post.owner.  To make this work, however, we need to set up the schema correctly by  declaring both a foreign key column and a type column in the model that declares the polymorphic interface using the references form:</p>\n\n<pre><code>class CreatePosts &lt; ActiveRecord::Migration[5.0]\n  def change\n    create_table :posts do |t|\n      # your attribs here\n      t.references :owner, polymorphic: true, index: true\n    end\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 909, "user_id": 9534861, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-HEqJQasw6sM/AAAAAAAAAAI/AAAAAAAABHA/HiEIzDPH-l0/photo.jpg?sz=128", "display_name": "Saqib Shahzad", "link": "https://stackoverflow.com/users/9534861/saqib-shahzad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 674, "favorite_count": 0, "accepted_answer_id": 52699697, "answer_count": 3, "score": 0, "last_activity_date": 1538992585, "creation_date": 1538991168, "question_id": 52699299, "link": "https://stackoverflow.com/questions/52699299/how-to-get-associated-polymorphic-objects-in-rails-5", "title": "How to get associated polymorphic objects in rails 5?", "body": "<p>In my Post model, I have</p>\n\n<pre><code>has_many :followers\n</code></pre>\n\n<p>In my Follower model, I have</p>\n\n<pre><code>belongs_to :model\nbelongs_to :owner,polymorphic: true\n</code></pre>\n\n<p>In my User and Admin devise models, I have</p>\n\n<pre><code>has_many :followers,as: :owner\n</code></pre>\n\n<p><strong>Requirement:</strong>  I want to have something like <code>Post.owners</code>  and it should return me a list of all users and/or admins that are following this post.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 45322, "user_id": 421705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/581b1760881c962648f99d6040d41829?s=128&d=identicon&r=PG", "display_name": "Holger Just", "link": "https://stackoverflow.com/users/421705/holger-just"}, "edited": false, "score": 3, "creation_date": 1538989790, "post_id": 52696102, "comment_id": 92324235, "body": "Instead of catching the exception, you probably want to use <a href=\"https://ruby-doc.org/core/Hash.html#method-i-dig\" rel=\"nofollow noreferrer\">Hash#dig</a> instead (available since Ruby 2.3)."}, {"owner": {"reputation": 1049, "user_id": 5832250, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2SnJA.jpg?s=128&g=1", "display_name": "Gagan Gupta", "link": "https://stackoverflow.com/users/5832250/gagan-gupta"}, "reply_to_user": {"reputation": 45322, "user_id": 421705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/581b1760881c962648f99d6040d41829?s=128&d=identicon&r=PG", "display_name": "Holger Just", "link": "https://stackoverflow.com/users/421705/holger-just"}, "edited": false, "score": 0, "creation_date": 1538994655, "post_id": 52696102, "comment_id": 92326998, "body": "@HolgerJust Thanks, I will also look into it."}], "answers": [{"comments": [{"owner": {"reputation": 194, "user_id": 6103692, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/d7aa9eec51b09f4b803d8c39570f62a7?s=128&d=identicon&r=PG&f=1", "display_name": "karthik", "link": "https://stackoverflow.com/users/6103692/karthik"}, "edited": false, "score": 0, "creation_date": 1538984168, "post_id": 52696498, "comment_id": 92321291, "body": "it worked,Thanks..seems only the code should be under <code>begin</code> though we iterating?"}], "tags": [], "owner": {"reputation": 1049, "user_id": 5832250, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2SnJA.jpg?s=128&g=1", "display_name": "Gagan Gupta", "link": "https://stackoverflow.com/users/5832250/gagan-gupta"}, "is_accepted": true, "score": 3, "last_activity_date": 1538985084, "last_edit_date": 1538985084, "creation_date": 1538979953, "answer_id": 52696498, "question_id": 52696102, "link": "https://stackoverflow.com/questions/52696102/continue-script-after-rescue-in-ruby/52696498#52696498", "title": "Continue script after rescue in ruby", "body": "<p>Try this:</p>\n\n<pre><code>def inc\n  page3 = `curl https://api.statuspage.io/v1/pages/incidents.json?page=3 -H \"Authorization: OAuth a8ef42\"`\n  JSON.parse(page3).each do |h|\n    begin\n      puts \"ID : #{h[\"id\"]} , CREATED AT : #{h[\"created_at\"]} , LINK : #{h[\"shortlink\"]} , ISSUE NAME : #{h[\"name\"]} , DESCRIPTION #{h[\"incident_updates\"][0][\"status\"]} , DESCRIPTION #{h[\"incident_updates\"][1][\"status\"]}\"\n    rescue NoMethodError =&gt; e\n      puts e\n    end\n  end\nend\n</code></pre>\n\n<p>Explanation: </p>\n\n<p>Whenever the exception is caught it tries to exit out of the block in which the exception has occurred. </p>\n\n<p>In your previous code, you're handling it in the scope of the function. So, when the exception was occurring in the iteration it was exiting out of the loop because because it wasn't handled inside the scope in which it was occurring (loop) and was caught right outside the loop because you wrote it there (outside the loop). </p>\n\n<p>To continue the iteration process you must handle it where it was occurring so that the system must know that it's been handled perfectly and it can perform the next iteration.</p>\n"}], "owner": {"reputation": 194, "user_id": 6103692, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/d7aa9eec51b09f4b803d8c39570f62a7?s=128&d=identicon&r=PG&f=1", "display_name": "karthik", "link": "https://stackoverflow.com/users/6103692/karthik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1023, "favorite_count": 0, "accepted_answer_id": 52696498, "answer_count": 1, "score": 0, "last_activity_date": 1538985084, "creation_date": 1538977879, "last_edit_date": 1538981081, "question_id": 52696102, "link": "https://stackoverflow.com/questions/52696102/continue-script-after-rescue-in-ruby", "title": "Continue script after rescue in ruby", "body": "<p>I am parsing JSON output by using the curl mentioned below , \nHowever I am getting <code>no method error</code> while parsing the output due to <code>DESCRIPTION #{h[\"incident_updates\"][1][\"status\"]</code> . because  <code>[[\"incident_updates\"][1][status]]</code> is not present in some cases, only the values of <code>[[\"incident_updates\"][0][status]]</code> is available .</p>\n\n<p>( But others iteration contains values for both <code>[0][status]</code>\n <code>[1][status]</code>  )</p>\n\n<p>So to avoid the error used <code>rescue</code> method ,however error is prevented but script is not executing after the first error(iteration stopped on first error itself, script is not continuing ) . Need to run the script till the iteration completes     (i.e., though no values present for <code>[1] [status]</code> script should run to bring the value for next iteration element because next element may contain <code>[1] [status]</code>) \nPlease help on this .\nThanks in advance</p>\n\n<pre><code>def inc\n  begin\n    page3 = `curl https://api.statuspage.io/v1/pages/incidents.json?page=3 -H \"Authorization: OAuth a8ef42\"`\n    JSON.parse(page3).each do |h|\n      puts \"ID : #{h[\"id\"]} , CREATED AT : #{h[\"created_at\"]} , LINK : #{h[\"shortlink\"]} , ISSUE NAME : #{h[\"name\"]} , DESCRIPTION #{h[\"incident_updates\"][0][\"status\"]} , DESCRIPTION #{h[\"incident_updates\"][1][\"status\"]}\"\n    end\n  rescue NoMethodError =&gt; e\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby", "watir"], "comments": [{"owner": {"reputation": 3523, "user_id": 9043475, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FNxvn.jpg?s=128&g=1", "display_name": "Rajagopalan", "link": "https://stackoverflow.com/users/9043475/rajagopalan"}, "edited": false, "score": 0, "creation_date": 1538969294, "post_id": 52694943, "comment_id": 92316522, "body": "There may be a chance that it may contain more than one div with the same class so it&#39;s returning text of first div which doesn&#39;t have any text."}, {"owner": {"reputation": 1173, "user_id": 384936, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/5044d0567cc7ae2e52cbd511958e2c15?s=128&d=identicon&r=PG", "display_name": "junkone", "link": "https://stackoverflow.com/users/384936/junkone"}, "reply_to_user": {"reputation": 3523, "user_id": 9043475, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FNxvn.jpg?s=128&g=1", "display_name": "Rajagopalan", "link": "https://stackoverflow.com/users/9043475/rajagopalan"}, "edited": false, "score": 0, "creation_date": 1538969941, "post_id": 52694943, "comment_id": 92316657, "body": "did more tests as i added to the original code segment.  irb(main):021:0&gt; divs=browser.divs(:class=&gt;&quot;sal-dp-panel&quot;).count =&gt; 0"}, {"owner": {"reputation": 3523, "user_id": 9043475, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FNxvn.jpg?s=128&g=1", "display_name": "Rajagopalan", "link": "https://stackoverflow.com/users/9043475/rajagopalan"}, "edited": false, "score": 0, "creation_date": 1538970561, "post_id": 52694943, "comment_id": 92316779, "body": "If count is zero then you haven&#39;t found any div, that&#39;s the problem too. Wait for the text there may be chance you are trying to grasp the value even before page loads properly."}, {"owner": {"reputation": 1173, "user_id": 384936, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/5044d0567cc7ae2e52cbd511958e2c15?s=128&d=identicon&r=PG", "display_name": "junkone", "link": "https://stackoverflow.com/users/384936/junkone"}, "reply_to_user": {"reputation": 3523, "user_id": 9043475, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FNxvn.jpg?s=128&g=1", "display_name": "Rajagopalan", "link": "https://stackoverflow.com/users/9043475/rajagopalan"}, "edited": false, "score": 0, "creation_date": 1538971390, "post_id": 52694943, "comment_id": 92316913, "body": "This is really where I am confused.  I can find the text via code browser.text.include?&quot;Sector&quot; but i am not able to find the div tag that holds this"}, {"owner": {"reputation": 3523, "user_id": 9043475, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FNxvn.jpg?s=128&g=1", "display_name": "Rajagopalan", "link": "https://stackoverflow.com/users/9043475/rajagopalan"}, "edited": false, "score": 0, "creation_date": 1538971700, "post_id": 52694943, "comment_id": 92316980, "body": "Check this <code>browser.div(:class=&gt;&quot;sal-dp-panel&quot;).text</code>"}], "answers": [{"tags": [], "owner": {"reputation": 3523, "user_id": 9043475, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FNxvn.jpg?s=128&g=1", "display_name": "Rajagopalan", "link": "https://stackoverflow.com/users/9043475/rajagopalan"}, "is_accepted": false, "score": 1, "last_activity_date": 1539010808, "last_edit_date": 1539010808, "creation_date": 1539003398, "answer_id": 52702857, "question_id": 52694943, "link": "https://stackoverflow.com/questions/52694943/scrape-sector-and-industry-form-morningstar/52702857#52702857", "title": "scrape sector and industry form morningstar", "body": "<p>I think you are using the wrong locator</p>\n\n<p>Try below</p>\n\n<pre><code>b = Watir::Browser.new \nb.goto 'http://quote.morningstar.ca/Quicktakes/stock/stock_beta.aspx?t=GOOG&amp;region=USA&amp;culture=en-CA'\n\np b.divs(class: 'sal-dp-name')[7].text\n\np b.div(text: 'Technology').preceding_sibling.text\n</code></pre>\n\n<p>output</p>\n\n<pre><code>\"Sector\"\n\"Sector\"\n</code></pre>\n\n<p>I have located <code>Sector</code> in two different way, second one is more reliable than the first one, because I used <code>Technology</code> to locate the <code>Sector</code> String.</p>\n"}, {"tags": [], "owner": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "is_accepted": true, "score": 0, "last_activity_date": 1539023850, "creation_date": 1539023850, "answer_id": 52708250, "question_id": 52694943, "link": "https://stackoverflow.com/questions/52694943/scrape-sector-and-industry-form-morningstar/52708250#52708250", "title": "scrape sector and industry form morningstar", "body": "<p>The problem is that there are no elements on the page with the class \"sal-dp-panel\". Maybe you meant to get the \"sal-dp-pair\", which is the div containing the name/value pair?</p>\n\n<pre><code>&lt;div class=\"sal-dp-pair\"&gt;\n  &lt;div class=\"sal-dp-name ng-binding\"&gt;Sector&lt;/div&gt;\n  &lt;div class=\"sal-dp-value ng-binding\"&gt;Technology&lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>To scrape the sector and industry, you can find the relevant \"sal-dp-name\" and then find it's corresponding value (ie following sibling):</p>\n\n<pre><code>browser.div(class: 'sal-dp-name', text: 'Sector').following_sibling.text\n#=&gt; \"Technology\"\n\nbrowser.div(class: 'sal-dp-name', text: 'Industry').following_sibling.text\n#=&gt; Internet Content &amp; Information\"\n</code></pre>\n"}], "owner": {"reputation": 1173, "user_id": 384936, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/5044d0567cc7ae2e52cbd511958e2c15?s=128&d=identicon&r=PG", "display_name": "junkone", "link": "https://stackoverflow.com/users/384936/junkone"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 117, "favorite_count": 0, "accepted_answer_id": 52708250, "answer_count": 2, "score": -1, "last_activity_date": 1539023850, "creation_date": 1538968648, "last_edit_date": 1538969878, "question_id": 52694943, "link": "https://stackoverflow.com/questions/52694943/scrape-sector-and-industry-form-morningstar", "title": "scrape sector and industry form morningstar", "body": "<p>I want to scrape the Sector and Industry from Morningstar page. I can see the data and the Watir is also seeing it. But when I try to grab the div it does not return anything.</p>\n\n<pre><code>   irb(main):001:0&gt; require 'watir'\n=&gt; true\n\nirb(main):008:0&gt; browser= Watir::Browser.new\n\nDevTools listening on ws://127.0.0.1:49780/devtools/browser/4e473d9e-4818-45ad-8238-587bc931099a\n=&gt; #&lt;Watir::Browser:0x..f0e9773de url=\"data:,\" title=\"\"&gt;\nirb(main):006:0&gt; path=\"http://quote.morningstar.ca/Quicktakes/stock/stock_beta.aspx?t=GOOG&amp;region=USA&amp;culture=en-CA\"\n=&gt; \"http://quote.morningstar.ca/Quicktakes/stock/stock_beta.aspx?t=GOOG&amp;region=USA&amp;culture=en-CA\"\nirb(main):007:0&gt; goto(path)\nirb(main):009:0&gt; browser.goto(path)\n[41088:42292:1007/225520.743:ERROR:platform_sensor_reader_win.cc(242)] NOT IMPLEMENTED\n=&gt; \"http://quote.morningstar.ca/Quicktakes/stock/stock_beta.aspx?t=GOOG&amp;region=USA&amp;culture=en-CA\"\nirb(main):010:0&gt; browser.text.include?\"Sector\"  #### CAN FIND THE word sector.\n=&gt; true\nirb(main):011:0&gt; browser.div(:class=&gt;\"sal-dp-panel\")  ##### it cannot find the class at all.\n=&gt; #&lt;Watir::Div: located: false; {:class=&gt;\"sal-dp-panel\", :tag_name=&gt;\"div\"}&gt;\n    irb(main):015:0&gt; divs=browser.divs(:class=&gt;\"sal-dp-panel\")\n=&gt; #&lt;Watir::DivCollection:0x000000079722d0 @query_scope=#&lt;Watir::Browser:0xdbd2266a url=\"http://quote.morningstar.ca/Quicktakes/stock/stock_beta.aspx?t=GOOG&amp;region=USA&amp;culture=en-CA\" title=\"GOOG 1157.35 -0.93 (Alphabet Inc Class C)\"&gt;, @selector={:class=&gt;\"sal-dp-panel\", :tag_name=&gt;\"div\"}&gt;\nirb(main):018:0&gt; divs.count\n=&gt; 0\nirb(main):019:0&gt; divs.each{|div| puts div.text}\n=&gt; []\nirb(main):020:0&gt; divs.each{|div| puts \"got one\"}\n=&gt; []\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/e0BrE.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/e0BrE.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "visual-studio-code", "vscode-debugger", "ruby-debug-ide"], "comments": [{"owner": {"reputation": 794, "user_id": 1839692, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/3pZBl.jpg?s=128&g=1", "display_name": "Raphael Pr", "link": "https://stackoverflow.com/users/1839692/raphael-pr"}, "edited": false, "score": 1, "creation_date": 1538986298, "post_id": 52694673, "comment_id": 92322338, "body": "Apparently it is a feature requested -&gt; <a href=\"https://github.com/rubyide/vscode-ruby/issues/125\" rel=\"nofollow noreferrer\">github.com/rubyide/vscode-ruby/issues/125</a> but not yet implemented"}], "answers": [{"comments": [{"owner": {"reputation": 3545, "user_id": 1554860, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/RGb4x.png?s=128&g=1", "display_name": "james", "link": "https://stackoverflow.com/users/1554860/james"}, "edited": false, "score": 0, "creation_date": 1539004593, "post_id": 52697232, "comment_id": 92332803, "body": "Yes, that was my first attempt. <code>rdebug-ide --host 0.0.0.0 --port 1234 -- bin&#47;rails server --port=3000 --binding=0.0.0.0</code> and then my rails app wouldn&#39;t start until i attached the debugger."}], "tags": [], "owner": {"reputation": 5935, "user_id": 365860, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/PPe6C.jpg?s=128&g=1", "display_name": "Nezir", "link": "https://stackoverflow.com/users/365860/nezir"}, "is_accepted": false, "score": 0, "last_activity_date": 1538983095, "creation_date": 1538983095, "answer_id": 52697232, "question_id": 52694673, "link": "https://stackoverflow.com/questions/52694673/attach-ruby-debug-ide-to-existing-rails-server/52697232#52697232", "title": "Attach ruby-debug-ide to existing Rails server", "body": "<p>Did you tried this: \n<code>rdebug-ide --host 0.0.0.0 --port 1234 -- bin/rails s -b 0.0.0.0</code></p>\n"}], "owner": {"reputation": 3545, "user_id": 1554860, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/RGb4x.png?s=128&g=1", "display_name": "james", "link": "https://stackoverflow.com/users/1554860/james"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1199, "favorite_count": 1, "answer_count": 1, "score": 3, "last_activity_date": 1538983095, "creation_date": 1538965905, "question_id": 52694673, "link": "https://stackoverflow.com/questions/52694673/attach-ruby-debug-ide-to-existing-rails-server", "title": "Attach ruby-debug-ide to existing Rails server", "body": "<h3>Background</h3>\n\n<p>I have <code>ruby-debug-ide</code> all setup to remote debug (I'm using Docker) in Visual Studio Code. I am using this command in my <code>docker-compose.yml</code> to start <code>ruby-debug-ide</code> and my rails server:</p>\n\n<pre><code>rm -f /api/tmp/pids/server.pid &amp;&amp; rdebug-ide --host 0.0.0.0 --port 1234 -- bin/rails server --port=3000 --binding=0.0.0.0\n</code></pre>\n\n<p>and then in vscode I have this launch.json script:</p>\n\n<pre><code>{\n  \"name\": \"Listen for rdebug-ide\",\n  \"type\": \"Ruby\",\n  \"request\": \"attach\",\n  \"cwd\": \"${workspaceRoot}\",\n  \"remoteHost\": \"127.0.0.1\",\n  \"remotePort\": \"1234\",\n  \"remoteWorkspaceRoot\": \"/app\",\n  \"showDebuggerOutput\": true\n}\n</code></pre>\n\n<p>and when I go to vscode and start that launch.json script, my rails server starts up as well as the debugger. But when I stop/detach the launch.json script, the rails server dies.</p>\n\n<h3>My Question</h3>\n\n<p>Is there a way to start my Rails server and <code>ruby-debug-ide</code> independently? I want to be able to access my Rails application when I am <strong>not</strong> debugging. Is it possible to do something like this:</p>\n\n<pre><code># start my rails server\nrm -f /api/tmp/pids/server.pid &amp;&amp; bin/rails server --port=3000 --binding=0.0.0.0\n\n# also start rdebug-ide and wait for something (vscode) to attach to it later on\nrdebug-ide --host 0.0.0.0 --port 1234 -- &lt;attach_to_my_rails_server&gt;\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "postgresql", "heroku", "apartment-gem"], "comments": [{"owner": {"reputation": 639, "user_id": 1863494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf04dd701601d45dfb132db228ded81?s=128&d=identicon&r=PG", "display_name": "Mauricio Mora", "link": "https://stackoverflow.com/users/1863494/mauricio-mora"}, "edited": false, "score": 0, "creation_date": 1539136804, "post_id": 52694250, "comment_id": 92388203, "body": "Did you try running db:migrate? there are some posts with the same issue which suggest to run this task as a workaround. <a href=\"https://www.reddit.com/r/rails/comments/2y4bdt/how_to_implement_tdd/\" rel=\"nofollow noreferrer\">reddit.com/r/rails/comments/2y4bdt/how_to_implement_tdd</a> <a href=\"https://github.com/CartoDB/cartodb/issues/331\" rel=\"nofollow noreferrer\">github.com/CartoDB/cartodb/issues/331</a>"}, {"owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 0, "creation_date": 1539141243, "post_id": 52694250, "comment_id": 92389122, "body": "Do you have a working app currently on Heroku?  Do you have the DB configured on Heroku? Have any migrations been run there? Are you deploying with <code>git push heroku master</code> ?"}], "answers": [{"comments": [{"owner": {"reputation": 563, "user_id": 1146001, "user_type": "registered", "accept_rate": 76, "profile_image": "https://graph.facebook.com/100002925624517/picture?type=large", "display_name": "Nelson Patricio Jimenez", "link": "https://stackoverflow.com/users/1146001/nelson-patricio-jimenez"}, "edited": false, "score": 0, "creation_date": 1539196348, "post_id": 52731503, "comment_id": 92417924, "body": "hahahaha, I made a rookie&#39;s mistake. I had my schema into <code>.gitignore</code> file.  Thanks you."}], "tags": [], "owner": {"reputation": 30101, "user_id": 783412, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/895a112c66d93cefcd06d2cf371219e6?s=128&d=identicon&r=PG", "display_name": "hd1", "link": "https://stackoverflow.com/users/783412/hd1"}, "is_accepted": true, "score": 5, "last_activity_date": 1539136152, "creation_date": 1539136152, "answer_id": 52731503, "question_id": 52694250, "link": "https://stackoverflow.com/questions/52694250/heroku-apartment-apartmentfilenotfound-app-db-schema-rb-doesnt-exist-yet/52731503#52731503", "title": "Heroku + Apartment: Apartment::FileNotFound: /app/db/schema.rb doesn&#39;t exist yet", "body": "<p>Add <code>db/schema.rb</code> to your repository and push again?</p>\n"}], "owner": {"reputation": 563, "user_id": 1146001, "user_type": "registered", "accept_rate": 76, "profile_image": "https://graph.facebook.com/100002925624517/picture?type=large", "display_name": "Nelson Patricio Jimenez", "link": "https://stackoverflow.com/users/1146001/nelson-patricio-jimenez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 220, "favorite_count": 0, "accepted_answer_id": 52731503, "answer_count": 1, "score": 1, "last_activity_date": 1539136152, "creation_date": 1538961003, "last_edit_date": 1539135962, "question_id": 52694250, "link": "https://stackoverflow.com/questions/52694250/heroku-apartment-apartmentfilenotfound-app-db-schema-rb-doesnt-exist-yet", "title": "Heroku + Apartment: Apartment::FileNotFound: /app/db/schema.rb doesn&#39;t exist yet", "body": "<p>I'm building a SAAS platform with heroku and Rails. For these, I'm managing the tenant with <code>apartment gem</code>. </p>\n\n<p>In my local development this found without issues, but when I tried to use into heroku appear the next error: </p>\n\n<blockquote>\n  <p>/app/db/schema.rb doesn't exist yet</p>\n</blockquote>\n\n<p>This error is produced it when run the next command:</p>\n\n<blockquote>\n  <p>Apartment::Tenant.create('foo_schema')</p>\n</blockquote>\n\n<p>I'm going to write the main steps to setting up a heroku with subdomains + apartment configuration.</p>\n\n<ol>\n<li>Setting up a wildcard domain (This configuration it's ok).</li>\n<li>I'm using <code>postgresql</code> in <code>production</code> and <code>development</code></li>\n<li>Setting up <code>apartment.rb</code> file into <code>initializer</code> directory.</li>\n</ol>\n\n<p>my <code>apartment.rb</code></p>\n\n<pre><code>require 'apartment/elevators/subdomain'\n\nApartment.configure do |config|\n  config.excluded_models = %w{Account Company App Acteco Country Currency Price}\n  config.tenant_names = lambda { Company.pluck(:slug) }\n  config.use_schemas = true\nend\n\nRails.application.config.middleware.insert_before Warden::Manager, Apartment::Elevators::Subdomain\n</code></pre>\n\n<p>Any suggestion ?</p>\n"}]