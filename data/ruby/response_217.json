[{"tags": ["ruby", "class", "documentation"], "answers": [{"comments": [{"owner": {"reputation": 4127, "user_id": 4231385, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d89a541a4609cafea3957e4cdfcca50f?s=128&d=identicon&r=PG&f=1", "display_name": "cremno", "link": "https://stackoverflow.com/users/4231385/cremno"}, "edited": false, "score": 2, "creation_date": 1551933170, "post_id": 55034164, "comment_id": 96824226, "body": "You can make an educated guess though. The documentation mentions <code>time.c</code> so it&#39;s most likely this <a href=\"https://github.com/ruby/ruby/blob/v2_6_1/time.c#L5292\" rel=\"nofollow noreferrer\">line</a>. rdoc sees a class definition but no string literal (like basically everywhere else) but it fallbacks to <code>unknown</code> for better or for worse. It also belongs to a new 2.6 feature and the <code>unknown</code> class doesn&#39;t appear in the docs of previous versions."}, {"owner": {"reputation": 203, "user_id": 4851566, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/68998e20f52bb4dc774377c2bafd8bb3?s=128&d=identicon&r=PG", "display_name": "chemturion", "link": "https://stackoverflow.com/users/4851566/chemturion"}, "edited": false, "score": 1, "creation_date": 1551935828, "post_id": 55034164, "comment_id": 96824964, "body": "Super interesting! The <code>unknown</code> doesn&#39;t even show on the Ruby 2.5.x or 2.4.x versions. Keep going back and the file mentioned changes to <code>io.c</code> in 2.2.x and 2.3.x, and then to <code>process.c</code> in 2.1.x, 2.0.0 and the 1.9 series. Landing back in 1.8.x it mentions <code>prec.c</code>."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1551952706, "post_id": 55034164, "comment_id": 96832699, "body": "BTW, the docs at <a href=\"https://docs.ruby-lang.org/en/2.6.0/\" rel=\"nofollow noreferrer\">docs.ruby-lang.org/en/2.6.0</a> don&#39;t have an entry for &quot;unknown&quot;"}, {"owner": {"reputation": 4127, "user_id": 4231385, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d89a541a4609cafea3957e4cdfcca50f?s=128&d=identicon&r=PG&f=1", "display_name": "cremno", "link": "https://stackoverflow.com/users/4231385/cremno"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1551963611, "post_id": 55034164, "comment_id": 96839380, "body": "@Stefan: docs.ruby-lang.org (official) is using the latest RDoc version. Maybe ruby-doc.org (inofficial) is using an older one. The 2.6 <code>NEWS</code> file even mentions RDoc parsing fixes."}, {"owner": {"reputation": 203, "user_id": 4851566, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/68998e20f52bb4dc774377c2bafd8bb3?s=128&d=identicon&r=PG", "display_name": "chemturion", "link": "https://stackoverflow.com/users/4851566/chemturion"}, "edited": false, "score": 1, "creation_date": 1551978926, "post_id": 55034164, "comment_id": 96848821, "body": "There&#39;s a couple issues that already mention <b>unknown.html</b>: a closed one about <a href=\"https://github.com/ruby/rdoc/pull/661\" rel=\"nofollow noreferrer\">ignoring dynamically added methods</a>, and an open one from 2013 about <a href=\"https://github.com/ruby/rdoc/issues/218\" rel=\"nofollow noreferrer\">C parsing valid files</a>. Given this info, should a new issue be opened?"}], "tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": true, "score": 5, "last_activity_date": 1551917543, "creation_date": 1551917543, "answer_id": 55034164, "question_id": 55033591, "link": "https://stackoverflow.com/questions/55033591/what-is-the-purpose-of-rubys-unknown-class/55034164#55034164", "title": "What is the purpose of Ruby&#39;s unknown class?", "body": "<p>It looks like this is some kind of artifact of the documentation system and not an actual class in Ruby.</p>\n\n<p>The documentation is produced by parsing the Ruby source code and can often get a little confused about what it's seeing. There's ways of coaching it with additional comments to ignore things it shouldn't document and so on, but tracking down which particular file or line produced this \"unknown\" reference is not necessarily easy.</p>\n\n<p>You may want to report this as a bug in the documentation. That page isn't helpful, and is more confusing than anything.</p>\n"}, {"comments": [{"owner": {"reputation": 4127, "user_id": 4231385, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d89a541a4609cafea3957e4cdfcca50f?s=128&d=identicon&r=PG&f=1", "display_name": "cremno", "link": "https://stackoverflow.com/users/4231385/cremno"}, "edited": false, "score": 2, "creation_date": 1551933465, "post_id": 55035031, "comment_id": 96824310, "body": "Well, there&#39;s <a href=\"https://ruby-doc.org/core/fatal.html\" rel=\"nofollow noreferrer\"><code>fatal</code></a> which is not capitalized and is definitely a thing unlike <code>unknown</code>."}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1551941226, "post_id": 55035031, "comment_id": 96826631, "body": "Capitalization is just a rule for constant. It is possible to assign a class to a method or a local variable with non-capitalized name."}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1551941282, "post_id": 55035031, "comment_id": 96826648, "body": "It does not make sense to check the capitalized <code>Unknown</code>, which appears nowhere. It still makes sense that you checked the non-capitalized <code>unknown</code>."}, {"owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 0, "creation_date": 1551948301, "post_id": 55035031, "comment_id": 96829904, "body": "Updated my answer"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1551948560, "post_id": 55035031, "comment_id": 96830071, "body": "The code shows that there&#39;s no constant <code>Unknown</code> and no method or variable <code>unknown</code>. There could still be an <code>unknown</code> class which just wasn&#39;t assigned to a constant, just like the <code>fatal</code> class."}], "tags": [], "owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "is_accepted": false, "score": 1, "last_activity_date": 1551948181, "last_edit_date": 1551948181, "creation_date": 1551925017, "answer_id": 55035031, "question_id": 55033591, "link": "https://stackoverflow.com/questions/55033591/what-is-the-purpose-of-rubys-unknown-class/55035031#55035031", "title": "What is the purpose of Ruby&#39;s unknown class?", "body": "<p>There is no <code>unknown</code> class in Ruby.  To prove @tadman's point simply run an IRB console:</p>\n\n<pre><code>irb(main):006:0&gt; NilClass\n=&gt; NilClass\nirb(main):007:0&gt; Object\n=&gt; Object\nirb(main):008:0&gt; ZeroDivisionError\n=&gt; ZeroDivisionError\nirb(main):009:0&gt; Unknown\nNameError: uninitialized constant Unknown\nirb(main):010:0&gt; unknown\nNameError: undefined local variable or method `unknown' for main:Object\n</code></pre>\n"}], "owner": {"reputation": 203, "user_id": 4851566, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/68998e20f52bb4dc774377c2bafd8bb3?s=128&d=identicon&r=PG", "display_name": "chemturion", "link": "https://stackoverflow.com/users/4851566/chemturion"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 116, "favorite_count": 0, "accepted_answer_id": 55034164, "answer_count": 2, "score": 3, "last_activity_date": 1551948181, "creation_date": 1551913424, "question_id": 55033591, "link": "https://stackoverflow.com/questions/55033591/what-is-the-purpose-of-rubys-unknown-class", "title": "What is the purpose of Ruby&#39;s unknown class?", "body": "<p>I was looking through the Ruby Core API and noticed \"unknown\" at the bottom of the <em>Classes</em> list. When you go to that class's page at <a href=\"https://ruby-doc.org/core-2.6.1/unknown.html\" rel=\"nofollow noreferrer\">https://ruby-doc.org/core-2.6.1/unknown.html</a>, you will notice that there is no content.</p>\n\n<p>What is the purpose of this class, i.e. when and how would you use it? If there is no purpose, why is it documented on ruby-doc.org?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 2946, "user_id": 1430057, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/Tbizp.jpg?s=128&g=1", "display_name": "Subash", "link": "https://stackoverflow.com/users/1430057/subash"}, "edited": false, "score": 1, "creation_date": 1551912413, "post_id": 55033346, "comment_id": 96819227, "body": "this might help <a href=\"https://stackoverflow.com/questions/2603617/ruby-print-the-variable-name-and-then-its-value\" title=\"ruby print the variable name and then its value\">stackoverflow.com/questions/2603617/&hellip;</a> but I can&#39;t think of a good use case for this, why do you need this behaviour ?"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 2, "creation_date": 1551912613, "post_id": 55033346, "comment_id": 96819327, "body": "No. Consider: <code>THAT = cat = dog = OWL = THIS = Test.new</code>. What is the name of the constant or variable to which <code>Test.new</code> is assigned? This is not limited to instances; it applies to all Ruby objects."}, {"owner": {"reputation": 27, "user_id": 3645712, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh6.googleusercontent.com/-qAiX8TDpo0Y/AAAAAAAAAAI/AAAAAAAAAAA/FzxM4JB-8FQ/photo.jpg?sz=128", "display_name": "QOps1981", "link": "https://stackoverflow.com/users/3645712/qops1981"}, "edited": false, "score": 0, "creation_date": 1551913036, "post_id": 55033346, "comment_id": 96819514, "body": "The reason I was looking for this behavior was to use the variable name as a name and also as a position within a grid of data. So if had a 2 dimensional Grid of variable names like &quot;AA&quot;, &quot;AB&quot;, &quot;BC&quot;, etc. And it could know its name it would also know its position. There are a lot of ways I can get the position in the class, But I was curious if there was an interesting Rubyism I just didn&#39;t know about yet."}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1551941590, "post_id": 55033346, "comment_id": 96826775, "body": "Your example does not match your text. <code>THIS</code> is not a variable, it is a constant."}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1551944760, "post_id": 55033346, "comment_id": 96828200, "body": "Furthermore, <code>THIS</code> is an instance of <code>Test</code>. It is not a class. <code>who_am_I_assinged_to</code> is not a class method."}], "answers": [{"tags": [], "owner": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "is_accepted": true, "score": 0, "last_activity_date": 1551914163, "creation_date": 1551914163, "answer_id": 55033700, "question_id": 55033346, "link": "https://stackoverflow.com/questions/55033346/can-i-get-the-variable-name-from-its-assignee/55033700#55033700", "title": "Can I get the variable name from it&#39;s assignee?", "body": "<h1>Technically yes, sort of.</h1>\n\n<p>But you'd have to recursively search through all the <a href=\"https://ruby-doc.org/core-2.5.1/Object.html#method-i-instance_variables\" rel=\"nofollow noreferrer\">instance_variables</a> of every object. And, <a href=\"https://stackoverflow.com/questions/55033346/ruby-can-i-get-the-variable-name-i-am-assigned-from-its-class#comment96819327_55033346\">as Cary points out</a>, an object can be assigned to more than one variable at a time.</p>\n\n<h1>Don't do that.</h1>\n\n<blockquote>\n  <p><em>The reason I was looking for this behavior was to use the variable name but also as a position within a grid of data. So if had a 2 dimensional Grid the variable names would be like \"AA\", \"AB\", \"BC\", etc. It is knew its name it would also know its position.</em></p>\n</blockquote>\n\n<p>What you're describing is an <a href=\"https://en.wikipedia.org/wiki/Action_at_a_distance_(computer_programming)\" rel=\"nofollow noreferrer\">\"action at a distance\" anti-pattern</a> where changes to one part of a program change another part of a program with no obvious connection. This violates encapsulation; good encapsulation allows you to understand a single piece of a system by just looking at its inputs and outputs. Violating encapsulation means in order to understand one part of the system you have to understand <em>every</em> part of the system leading to a maintenance nightmare. Modern languages and practices strive to avoid this as much as possible.</p>\n\n<p>For example, a variable's name should never matter to the behavior of the program. You should be able to safely perform a <a href=\"https://refactoring.com/catalog/renameVariable.html\" rel=\"nofollow noreferrer\">Rename Variable refactoring</a> to name a variable according to what makes sense to the user of the object. In your example this would alter the behavior of the program violating the <a href=\"https://en.wikipedia.org/wiki/Principle_of_least_astonishment\" rel=\"nofollow noreferrer\">Principle of Least Astonishment</a>.</p>\n\n<p>Instead you'd have an object to represent your Grid and this would manage the relationships between Nodes in the Grid. Rather than passing around individual Nodes you'd pass around the Grid.</p>\n\n<p>Or each Node can know who their neighboring Nodes are. An example of this would be a traditional <a href=\"https://en.wikipedia.org/wiki/Tree_(data_structure)\" rel=\"nofollow noreferrer\">Tree</a>, <a href=\"https://en.wikipedia.org/wiki/Graph_(abstract_data_type)\" rel=\"nofollow noreferrer\">Graph</a>, or <a href=\"https://en.wikipedia.org/wiki/Linked_list\" rel=\"nofollow noreferrer\">Linked List</a> structure. The advantage here is there is no fixed position and the data structure can grow or shrink in any direction. Any Node can be passed around and it knows its position within the structure.</p>\n"}], "owner": {"reputation": 27, "user_id": 3645712, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh6.googleusercontent.com/-qAiX8TDpo0Y/AAAAAAAAAAI/AAAAAAAAAAA/FzxM4JB-8FQ/photo.jpg?sz=128", "display_name": "QOps1981", "link": "https://stackoverflow.com/users/3645712/qops1981"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "accepted_answer_id": 55033700, "answer_count": 1, "score": -1, "last_activity_date": 1551944706, "creation_date": 1551912055, "last_edit_date": 1551944706, "question_id": 55033346, "link": "https://stackoverflow.com/questions/55033346/can-i-get-the-variable-name-from-its-assignee", "title": "Can I get the variable name from it&#39;s assignee?", "body": "<p>Is it possible to have a class method that prints the name of the variable its parent class is assigned to? Example:</p>\n\n<pre><code>class Test\n  def who_am_I_assigned_to\n    puts \"#{??}\"\n  end\nend\n\nTHIS = Test.new\nTHIS.who_am_I_assigned_to\n# &gt;&gt; THIS\n</code></pre>\n"}, {"tags": ["ruby", "unit-testing", "testing", "tdd", "rspec3"], "answers": [{"tags": [], "owner": {"reputation": 13, "user_id": 11140903, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5tQQi.jpg?s=128&g=1", "display_name": "Brian Monaccio", "link": "https://stackoverflow.com/users/11140903/brian-monaccio"}, "is_accepted": true, "score": 0, "last_activity_date": 1551998711, "creation_date": 1551998711, "answer_id": 55054014, "question_id": 55033020, "link": "https://stackoverflow.com/questions/55033020/testing-recursive-io-prompt-in-rspec/55054014#55054014", "title": "Testing recursive IO prompt in rspec", "body": "<p>I was able to solve my problem by removing the <code>input</code> and <code>output</code> from <code>get_col_choice</code>:</p>\n\n<pre><code>def get_col_choice\n    print \"Player #{@player}, choose a column from 0-6: \" \n    input_string = gets.chomp\n    begin\n        col_choice = Integer(input_string)\n        raise(\"The column you chose is out of bounds.\") if out_of_bounds?(col_choice)\n        raise(\"The column you chose is fully occupied.\") if @board.unavailable?(col_choice)\n        return col_choice\n    rescue TypeError, ArgumentError\n        puts \"Your choice of column is invalid. Try again.\"            \n    rescue RuntimeError =&gt; err\n        puts err.message\n    end\n    get_col_choice\nend\n</code></pre>\n\n<p>In my rspec file, instead of using <code>StringIO</code> to inject the behavior I expected into <code>get_col_choice</code>, I stubbed <code>gets</code> to return the values I needed to trigger expected behaviors:</p>\n\n<pre><code>#code left out for brevity\nbefore(:each) do\n    @game = ConnectFourGame.new\nend\n\ndescribe '#get_col_choice' do\n    before(:each) do\n        allow($stdout).to receive(:write)\n        @game.player = 1\n    end\n\n    context 'valid input' do\n        before(:each) do\n            allow(@game).to receive(:gets) {\"0\\n\"}\n        end\n\n        it 'notifies users which player gets to choose a column' do\n            expect{ @game.get_col_choice }.to output('Player 1, choose a column from 0-6: ').to_stdout\n        end\n\n        it \"returns the user's column choice as an integer\" do\n            expect(@game.get_col_choice).to eq(0)\n        end\n    end\n\n    context 'invalid input' do\n        output_expectation = Proc.new{ expect { @game.get_col_choice }.to output(output).to_stdout }\n\n        it 'notifies the user if the column they chose is already full of pieces' do\n            allow(@game).to receive(:gets).and_return(\"0\\n\", \"1\\n\")\n            6.times { @game.board.add_game_piece_to(0, \"\\u2648\") }\n            output = \"Player 1, choose a column from 0-6: The column you chose is fully occupied.\\nPlayer 1, choose a column from 0-6: \"\n            output_expectation\n        end\n\n        it 'notifies the user their input is invalid when a non-numeric string is entered' do\n            allow(@game).to receive(:gets).and_return(\"foo\\n\", \"0\\n\")\n            output = \"Player 1, choose a column from 0-6: Your choice of column is invalid. Try again.\\nPlayer 1, choose a column from 0-6: \"\n            output_expectation\n        end\n\n        it 'notifies the user their column choice is out of bounds when col is greater than 6' do\n            allow(@game).to receive(:gets).and_return(\"7\\n\", \"0\\n\")\n            output = \"Player 1, choose a column from 0-6: The column you chose is out of bounds.\\nPlayer 1, choose a column from 0-6: \"\n            output_expectation\n        end\n\n        it 'notifies the user their column choice is out of bounds when col is less than 0' do\n            allow(@game).to receive(:gets).and_return(\"-1\\n\", \"0\\n\")\n            output = \"Player 1, choose a column from 0-6: The column you chose is out of bounds.\\nPlayer 1, choose a column from 0-6: \"\n            output_expectation\n        end\n    end        \nend\n</code></pre>\n\n<p>The reason I received errors in my previous implementation of <code>get_col_choice</code> was because after <code>StringIO</code> received my first input string, it closed, resulting in a value of <code>nil</code> that I tried to call <code>gets</code> on. </p>\n"}], "owner": {"reputation": 13, "user_id": 11140903, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5tQQi.jpg?s=128&g=1", "display_name": "Brian Monaccio", "link": "https://stackoverflow.com/users/11140903/brian-monaccio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 151, "favorite_count": 0, "accepted_answer_id": 55054014, "answer_count": 1, "score": 1, "last_activity_date": 1551998711, "creation_date": 1551910414, "last_edit_date": 1551917026, "question_id": 55033020, "link": "https://stackoverflow.com/questions/55033020/testing-recursive-io-prompt-in-rspec", "title": "Testing recursive IO prompt in rspec", "body": "<p>I am writing a connect-four game for more OO and rspec practice. As part of my program, I would like to prompt the user to choose a column that they would like to put their game piece in. Here's that method:</p>\n\n<pre><code>def get_col_choice(input, output)\n     output.print \"Player #{@player}, choose a column from 0-6: \" \n     input_string = input.gets.chomp\n     begin\n         col_choice = Integer(input_string)\n         raise(\"The column you chose is out of bounds.\") if out_of_bounds?(col_choice)\n         raise(\"The column you chose is fully occupied.\") if unavailable?(col_choice)\n         return col_choice\n     rescue TypeError, ArgumentError\n         output.puts \"Your choice of column is invalid. Try again.\"\n     rescue RuntimeError =&gt; err\n         puts err.message\n     end\n     get_col_choice(input, output)\nend\n</code></pre>\n\n<p>In IRB, everything works as I planned. My hangup is in rspec where I am faced with a NoMethodError, which I think is coming from my recursive call to <code>get_col_choice</code>. </p>\n\n<p>Can anyone help me understand what I can do to either improve <code>get_col_choice</code> or write the correct tests in Rspec? This is what my console output from my rspec file looks like:</p>\n\n<pre><code>Failures:\n\n1) ConnectFourGame#get_col_choice notifies users which player gets to choose a column\n Failure/Error: $connect_four.get_col_choice(input, output)\n\n NoMethodError:\n   undefined method `chomp' for nil:NilClass\n # /home/learnsometing/Desktop/the_Odin_Project/ruby/connect-four/lib/connect_four_game.rb:31:in `get_col_choice'\n # /home/learnsometing/Desktop/the_Odin_Project/ruby/connect-four/lib/connect_four_game.rb:42:in `get_col_choice'\n # ./connect_four_game_spec.rb:52:in `block (3 levels) in &lt;top (required)&gt;'\n\n2) ConnectFourGame#get_col_choice returns the player's column choice\n Failure/Error: expect($connect_four.get_col_choice(input, output)).to eq(0)\n\n NoMethodError:\n   undefined method `chomp' for nil:NilClass\n # /home/learnsometing/Desktop/the_Odin_Project/ruby/connect-four/lib/connect_four_game.rb:31:in `get_col_choice'\n # /home/learnsometing/Desktop/the_Odin_Project/ruby/connect-four/lib/connect_four_game.rb:42:in `get_col_choice'\n # ./connect_four_game_spec.rb:57:in `block (3 levels) in &lt;top (required)&gt;'\n\n3) ConnectFourGame#get_col_choice notifies the user if the column they chose is already full of pieces\n Failure/Error: expect(output.string).to include(\"The column you chose is fully occupied.\")\n   expected \"\" to include \"The column you chose is fully occupied.\"\n # ./connect_four_game_spec.rb:62:in `block (3 levels) in &lt;top (required)&gt;'\n\n4) ConnectFourGame#get_col_choice notifies the user their input is invalid when a non-numeric string is entered\n Failure/Error: $connect_four.get_col_choice(input, output)\n\n NoMethodError:\n   undefined method `chomp' for nil:NilClass\n # /home/learnsometing/Desktop/the_Odin_Project/ruby/connect-four/lib/connect_four_game.rb:31:in `get_col_choice'\n # /home/learnsometing/Desktop/the_Odin_Project/ruby/connect-four/lib/connect_four_game.rb:42:in `get_col_choice'\n # ./connect_four_game_spec.rb:67:in `block (3 levels) in &lt;top (required)&gt;'\n\n5) ConnectFourGame#get_col_choice column choice is out of bounds notifies the user their column choice is out of bounds when col is greater than 6\n Failure/Error: $connect_four.get_col_choice(input, output)\n\n NoMethodError:\n   undefined method `chomp' for nil:NilClass\n # /home/learnsometing/Desktop/the_Odin_Project/ruby/connect-four/lib/connect_four_game.rb:31:in `get_col_choice'\n # /home/learnsometing/Desktop/the_Odin_Project/ruby/connect-four/lib/connect_four_game.rb:42:in `get_col_choice'\n # ./connect_four_game_spec.rb:74:in `block (4 levels) in &lt;top (required)&gt;'\n\n6) ConnectFourGame#get_col_choice column choice is out of bounds notifies the user their column choice is out of bounds when col is less than 0\n Failure/Error: $connect_four.get_col_choice(input, output)\n\n NoMethodError:\n   undefined method `chomp' for nil:NilClass\n # /home/learnsometing/Desktop/the_Odin_Project/ruby/connect-four/lib/connect_four_game.rb:31:in `get_col_choice'\n # /home/learnsometing/Desktop/the_Odin_Project/ruby/connect-four/lib/connect_four_game.rb:42:in `get_col_choice'\n # ./connect_four_game_spec.rb:80:in `block (4 levels) in &lt;top (required)&gt;'\n\nFinished in 0.02399 seconds (files took 0.1108 seconds to load)\n12 examples, 6 failures\n\nFailed examples:\n\nrspec ./connect_four_game_spec.rb:51 # ConnectFourGame#get_col_choice notifies users which player gets to choose a column\nrspec ./connect_four_game_spec.rb:56 # ConnectFourGame#get_col_choice returns the player's column choice\nrspec ./connect_four_game_spec.rb:60 # ConnectFourGame#get_col_choice notifies the user if the column they chose is already full of pieces\nrspec ./connect_four_game_spec.rb:66 # ConnectFourGame#get_col_choice notifies the user their input is invalid when a non-numeric string is entered\nrspec ./connect_four_game_spec.rb:73 # ConnectFourGame#get_col_choice column choice is out of bounds notifies the user their column choice is out of bounds when col is greater than 6\nrspec ./connect_four_game_spec.rb:79 # ConnectFourGame#get_col_choice column choice is out of bounds notifies the user their column choice is out of bounds when col is less than 0\n</code></pre>\n\n<p>Here are the tests I wrote for <code>get_col_choice</code>:</p>\n\n<pre><code>describe '#get_col_choice' do\n    let(:output) { StringIO.new }\n    let(:input) { StringIO.new(\"0\\n\") }\n    it 'notifies users which player gets to choose a column' do\n        $connect_four.get_col_choice(input, output)\n        expect(output.string).to include(\"Player 2, choose a column from 0-6: \")\n    end\n\n    it \"returns the player's column choice\" do\n        expect($connect_four.get_col_choice(input, output)).to eq(0)\n    end\n\n    it 'notifies the user if the column they chose is already full of pieces' do\n        6.times { $connect_four.board.add_game_piece_to(0, \"\\u2468\") }\n        expect(output.string).to include(\"The column you chose is fully occupied.\")\n    end\n\n    let(:input) { StringIO.new(\"!\\n\") }        \n    it 'notifies the user their input is invalid when a non-numeric string is entered' do\n        $connect_four.get_col_choice(input, output)\n        expect(output.string).to include(\"Your choice of column is invalid. Try again.\")\n    end\n\n    context 'column choice is out of bounds' do\n        let(:input) { StringIO.new(\"7\\n\") }\n        it 'notifies the user their column choice is out of bounds when col is greater than 6' do\n            $connect_four.get_col_choice(input, output)\n            expect(output.string).to include(\"The column you chose is out of bounds.\")\n        end\n\n        let(:input) { StringIO.new(\"-1\\n\") }\n        it 'notifies the user their column choice is out of bounds when col is less than 0' do\n            $connect_four.get_col_choice(input, output)\n            expect(output.string).to include(\"The column number you chose is out of bounds.\")\n        end\n    end        \nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "devise"], "answers": [{"comments": [{"owner": {"reputation": 17253, "user_id": 577199, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/df8c59bf29696babd35e0bb7e0182e78?s=128&d=identicon&r=PG", "display_name": "Ceasar Bautista", "link": "https://stackoverflow.com/users/577199/ceasar-bautista"}, "edited": false, "score": 0, "creation_date": 1551910621, "post_id": 55032923, "comment_id": 96818597, "body": "This looks like it&#39;s in the right direction, but is not enough for me to solve my issue. I&#39;m investigating it more closely though."}, {"owner": {"reputation": 426, "user_id": 10257568, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd3d7bf7a71c92494ba6c2e2230b1c0a?s=128&d=identicon&r=PG&f=1", "display_name": "vinyl", "link": "https://stackoverflow.com/users/10257568/vinyl"}, "reply_to_user": {"reputation": 17253, "user_id": 577199, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/df8c59bf29696babd35e0bb7e0182e78?s=128&d=identicon&r=PG", "display_name": "Ceasar Bautista", "link": "https://stackoverflow.com/users/577199/ceasar-bautista"}, "edited": false, "score": 0, "creation_date": 1551911085, "post_id": 55032923, "comment_id": 96818747, "body": "I&#39;m curious what you&#39;re expecting a user to see/experience when they try to access a URL protected by authentication if there&#39;s no redirect.  Are you working with an API only codebase?"}, {"owner": {"reputation": 17253, "user_id": 577199, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/df8c59bf29696babd35e0bb7e0182e78?s=128&d=identicon&r=PG", "display_name": "Ceasar Bautista", "link": "https://stackoverflow.com/users/577199/ceasar-bautista"}, "edited": false, "score": 0, "creation_date": 1551911305, "post_id": 55032923, "comment_id": 96818813, "body": "No, some routes are API routes (begin with <code>&#47;api&#47;v1&#47;</code>) and other routes are a normal Rails app. If a user is not logged in and tries to access an API route, I want them to see a 401 and not be redirected anywhere."}], "tags": [], "owner": {"reputation": 426, "user_id": 10257568, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd3d7bf7a71c92494ba6c2e2230b1c0a?s=128&d=identicon&r=PG&f=1", "display_name": "vinyl", "link": "https://stackoverflow.com/users/10257568/vinyl"}, "is_accepted": false, "score": 2, "last_activity_date": 1551909997, "creation_date": 1551909997, "answer_id": 55032923, "question_id": 55032668, "link": "https://stackoverflow.com/questions/55032668/devise-how-to-return-401-unauthorized-without-redirect-if-user-is-not-signed-in/55032923#55032923", "title": "Devise: how to return 401 Unauthorized without redirect if user is not signed in", "body": "<p>Is this what you're looking for?</p>\n\n<p><a href=\"https://github.com/plataformatec/devise/wiki/How-To:-Redirect-to-a-specific-page-when-the-user-can-not-be-authenticated\" rel=\"nofollow noreferrer\">https://github.com/plataformatec/devise/wiki/How-To:-Redirect-to-a-specific-page-when-the-user-can-not-be-authenticated</a></p>\n\n<p>This still redirects a user, although you can control where that redirect goes.  </p>\n"}, {"comments": [{"owner": {"reputation": 4600, "user_id": 5961578, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/df7cbfdd2a92a7926af3bbb8648318aa?s=128&d=identicon&r=PG", "display_name": "moveson", "link": "https://stackoverflow.com/users/5961578/moveson"}, "edited": false, "score": 0, "creation_date": 1593967034, "post_id": 55033382, "comment_id": 110955329, "body": "Rails 5.2 and 6.0 do not use <code>request.env[&#39;REQUEST_PATH&#39;]</code>. And in any case, it&#39;s better to use the public methods provided for <code>ActionDispatch::Request</code> when available. Try using <code>request.original_fullpath.start_with?(&#39;&#47;api&#39;)</code>."}], "tags": [], "owner": {"reputation": 17253, "user_id": 577199, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/df8c59bf29696babd35e0bb7e0182e78?s=128&d=identicon&r=PG", "display_name": "Ceasar Bautista", "link": "https://stackoverflow.com/users/577199/ceasar-bautista"}, "is_accepted": true, "score": 3, "last_activity_date": 1551912288, "creation_date": 1551912288, "answer_id": 55033382, "question_id": 55032668, "link": "https://stackoverflow.com/questions/55032668/devise-how-to-return-401-unauthorized-without-redirect-if-user-is-not-signed-in/55033382#55033382", "title": "Devise: how to return 401 Unauthorized without redirect if user is not signed in", "body": "<p>Building off @vinyl's answer, the following will return a 401 without redirecting if the user is not signed in:</p>\n\n<pre><code># lib/custom_failure.rb\nclass CustomFailure &lt; Devise::FailureApp\n  def respond\n    http_auth\n  end\nend\n\n# config/initializers/devise.rb\nconfig.warden do |manager|\n  manager.failure_app = CustomFailure\nend\n</code></pre>\n\n<p>You can customize <code>respond</code> to redirect in some cases and throw 401 cases in others. For my use case, the following was sufficient:</p>\n\n<pre><code>class CustomFailure &lt; Devise::FailureApp\n  def respond\n    if request.env['REQUEST_PATH'].start_with?('/api')\n      http_auth\n    else\n      redirect\n    end\n  end\nend\n</code></pre>\n\n<p>I don't understand why overriding <code>authenticate_user!</code> did not work here.</p>\n"}], "owner": {"reputation": 17253, "user_id": 577199, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/df8c59bf29696babd35e0bb7e0182e78?s=128&d=identicon&r=PG", "display_name": "Ceasar Bautista", "link": "https://stackoverflow.com/users/577199/ceasar-bautista"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1528, "favorite_count": 1, "accepted_answer_id": 55033382, "answer_count": 2, "score": 1, "last_activity_date": 1551912288, "creation_date": 1551908749, "question_id": 55032668, "link": "https://stackoverflow.com/questions/55032668/devise-how-to-return-401-unauthorized-without-redirect-if-user-is-not-signed-in", "title": "Devise: how to return 401 Unauthorized without redirect if user is not signed in", "body": "<p>Rails version: 4.0.13</p>\n\n<p>Devise version: 3.2.0</p>\n\n<p>When a user tries to view a page which they are not authorized to view, my application redirects them to a sign in page.</p>\n\n<p>If the user is not signed in, I want to:</p>\n\n<ol>\n<li><em>Not</em> redirect the user to a new URL and</li>\n<li>Return a '401 Unauthorized' response with an empty body</li>\n</ol>\n\n<p>So far, I tried to override <code>authenticate_user!</code> like so:</p>\n\n<pre><code>class BaseApiController &lt; ActionController::Base\n  before_filter :authenticate_user!\n\n  def authenticate_user!\n    head :unauthorized\n  end\nend\n</code></pre>\n\n<p>However, while this does return a '401 Unauthorized', it also redirects to the sign in URL first.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "unicorn"], "comments": [{"owner": {"reputation": 1463, "user_id": 2448104, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/QEF9u.jpg?s=128&g=1", "display_name": "John Smith", "link": "https://stackoverflow.com/users/2448104/john-smith"}, "edited": false, "score": 3, "creation_date": 1551916750, "post_id": 55031954, "comment_id": 96820578, "body": "try downgrading to 5.4"}, {"owner": {"reputation": 600, "user_id": 8129831, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/awcNg.jpg?s=128&g=1", "display_name": "H Dox", "link": "https://stackoverflow.com/users/8129831/h-dox"}, "edited": false, "score": 0, "creation_date": 1551929025, "post_id": 55031954, "comment_id": 96823326, "body": "Could you upload your unicorn config code?"}, {"owner": {"reputation": 527, "user_id": 7858691, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh5.googleusercontent.com/-ig5olmA66Rw/AAAAAAAAAAI/AAAAAAAAABk/qHdhKSRoxXs/photo.jpg?sz=128", "display_name": "Pedro Sturmer", "link": "https://stackoverflow.com/users/7858691/pedro-sturmer"}, "reply_to_user": {"reputation": 600, "user_id": 8129831, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/awcNg.jpg?s=128&g=1", "display_name": "H Dox", "link": "https://stackoverflow.com/users/8129831/h-dox"}, "edited": false, "score": 0, "creation_date": 1551962809, "post_id": 55031954, "comment_id": 96838929, "body": "updated it @HDox"}, {"owner": {"reputation": 527, "user_id": 7858691, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh5.googleusercontent.com/-ig5olmA66Rw/AAAAAAAAAAI/AAAAAAAAABk/qHdhKSRoxXs/photo.jpg?sz=128", "display_name": "Pedro Sturmer", "link": "https://stackoverflow.com/users/7858691/pedro-sturmer"}, "reply_to_user": {"reputation": 721, "user_id": 10073327, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6095e3ce3253310251450dc1fe85529e?s=128&d=identicon&r=PG&f=1", "display_name": "FailingCoder", "link": "https://stackoverflow.com/users/10073327/failingcoder"}, "edited": false, "score": 0, "creation_date": 1551962816, "post_id": 55031954, "comment_id": 96838935, "body": "updated @FailingCoder"}, {"owner": {"reputation": 437, "user_id": 780194, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/162b112c82bf5adfd9e78ce3ef306748?s=128&d=identicon&r=PG", "display_name": "jjcf89", "link": "https://stackoverflow.com/users/780194/jjcf89"}, "edited": false, "score": 0, "creation_date": 1552569762, "post_id": 55031954, "comment_id": 97066286, "body": "Is it a bug in the updated unicorns or was something deprecated?"}], "answers": [{"comments": [{"owner": {"reputation": 527, "user_id": 7858691, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh5.googleusercontent.com/-ig5olmA66Rw/AAAAAAAAAAI/AAAAAAAAABk/qHdhKSRoxXs/photo.jpg?sz=128", "display_name": "Pedro Sturmer", "link": "https://stackoverflow.com/users/7858691/pedro-sturmer"}, "edited": false, "score": 0, "creation_date": 1552078368, "post_id": 55055944, "comment_id": 96889263, "body": "Yes!! The problem for me was definitively the gemset, I removed the gemset and added again it works for me."}, {"owner": {"reputation": 245, "user_id": 5278235, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/wCnP1.jpg?s=128&g=1", "display_name": "dyeje", "link": "https://stackoverflow.com/users/5278235/dyeje"}, "edited": false, "score": 0, "creation_date": 1559920137, "post_id": 55055944, "comment_id": 99582698, "body": "You no longer need to downgrade. The newest version (5.5.1) fixes this issue, simply upgrade now."}], "tags": [], "owner": {"reputation": 532, "user_id": 219025, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3a12bb528909b2beda629b742e15ecc7?s=128&d=identicon&r=PG", "display_name": "adg", "link": "https://stackoverflow.com/users/219025/adg"}, "is_accepted": true, "score": 3, "last_activity_date": 1552026689, "last_edit_date": 1552026689, "creation_date": 1552012756, "answer_id": 55055944, "question_id": 55031954, "link": "https://stackoverflow.com/questions/55031954/unicorn-refreshing-gem-list/55055944#55055944", "title": "Unicorn Refreshing Gem List", "body": "<p>I was having the same problem and following John Smith's advice this worked for me: </p>\n\n<pre><code>bundle exec gem list | grep unicorn # returns unicorn (5.5.0)\n</code></pre>\n\n<p>change Gemfile to gem 'unicorn', '5.4.1'</p>\n\n<pre><code>bundle install\n\nbundle exec gem list | grep unicorn # returns unicorn (5.4.1)\n</code></pre>\n\n<p>Then I was able to restart unicorn without error</p>\n"}, {"tags": [], "owner": {"reputation": 437, "user_id": 780194, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/162b112c82bf5adfd9e78ce3ef306748?s=128&d=identicon&r=PG", "display_name": "jjcf89", "link": "https://stackoverflow.com/users/780194/jjcf89"}, "is_accepted": false, "score": 4, "last_activity_date": 1552572269, "creation_date": 1552572269, "answer_id": 55164539, "question_id": 55031954, "link": "https://stackoverflow.com/questions/55031954/unicorn-refreshing-gem-list/55164539#55164539", "title": "Unicorn Refreshing Gem List", "body": "<p>Looks like there was a bug introduced in 5.5.0\n<a href=\"https://bogomips.org/unicorn-public/20190307022859.mxz7m3mbspujo4c2@dcvr/\" rel=\"nofollow noreferrer\">https://bogomips.org/unicorn-public/20190307022859.mxz7m3mbspujo4c2@dcvr/</a></p>\n\n<p>I tested his patched version and it works:</p>\n\n<p>Set unicorn version in Gemfile</p>\n\n<pre><code>gem \"unicorn\", \"~&gt; 5.5.0.1.g6836\"\n</code></pre>\n\n<p>And ran <code>bundle update unicorn</code></p>\n"}], "owner": {"reputation": 527, "user_id": 7858691, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh5.googleusercontent.com/-ig5olmA66Rw/AAAAAAAAAAI/AAAAAAAAABk/qHdhKSRoxXs/photo.jpg?sz=128", "display_name": "Pedro Sturmer", "link": "https://stackoverflow.com/users/7858691/pedro-sturmer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2535, "favorite_count": 2, "accepted_answer_id": 55055944, "answer_count": 2, "score": 2, "last_activity_date": 1552572269, "creation_date": 1551905585, "last_edit_date": 1592644375, "question_id": 55031954, "link": "https://stackoverflow.com/questions/55031954/unicorn-refreshing-gem-list", "title": "Unicorn Refreshing Gem List", "body": "<p>Guys I'm trying to restart my unicorn service and seems it get stuck on this</p>\n<blockquote>\n<p>[2019-03-06T20:45:05.938802 #7614]  INFO -- : Refreshing Gem list</p>\n<p>/usr/local/rvm/gems/ruby-2.5.1@citius_artis/gems/unicorn-5.5.0/lib/unicorn.rb:49:in</p>\n<p>`block in builder': wrong number of arguments (given 0, expected 2)\n(ArgumentError)</p>\n</blockquote>\n<p>Did not change anything on gemfile</p>\n<p>If I run rails s -e staging the rails starts normally</p>\n<p>Any ideas?</p>\n<p>My unicorn.rb config</p>\n<pre><code>APP_ROOT = File.expand_path(File.dirname(File.dirname(__FILE__)))\n\n# puts &quot;APP ROOT -&gt;&gt;&gt; #{APP_ROOT}&quot;\n\nif ENV['MY_RUBY_HOME'] &amp;&amp; ENV['MY_RUBY_HOME'].include?('rvm')\n  begin\n    rvm_path = File.dirname(File.dirname(ENV['MY_RUBY_HOME']))\n    # puts &quot;RUBY HOME -&gt;&gt;&gt; #{rvm_path}&quot;\n    rvm_lib_path = File.join(rvm_path, 'lib')\n    # $LOAD_PATH.unshift rvm_lib_path\n    # require 'rvm'\n    # RVM.use_from_path! APP_ROOT\n  rescue LoadError\n    raise &quot;RVM ruby lib is currently unavailable.&quot;\n  end\nend\n\nENV['BUNDLE_GEMFILE'] = File.expand_path('../Gemfile', File.dirname(__FILE__))\nrequire 'bundler/setup'\n\nif ENV['RAILS_ENV'] == 'production'\n  worker_processes 2\nelse\n  worker_processes 2\nend\n\nworking_directory APP_ROOT\n\npreload_app true\n\ntimeout 60\n\nlisten APP_ROOT + &quot;/tmp/sockets/unicorn.sock&quot;, :backlog =&gt; 64\n\npid APP_ROOT + &quot;/tmp/pids/unicorn.pid&quot;\n\nstderr_path APP_ROOT + &quot;/log/unicorn.stderr.log&quot;\nstdout_path APP_ROOT + &quot;/log/unicorn.stdout.log&quot;\n\nbefore_fork do |server, worker|\n  # puts &quot;SERVER -&gt;&gt;&gt; #{server}&quot;\n\n  defined?(ActiveRecord::Base) &amp;&amp; ActiveRecord::Base.connection.disconnect!\n\n  old_pid = APP_ROOT + '/tmp/pids/unicorn.pid.oldbin'\n  if File.exists?(old_pid) &amp;&amp; server.pid != old_pid\n    begin\n      Process.kill(&quot;QUIT&quot;, File.read(old_pid).to_i)\n    rescue Errno::ENOENT, Errno::ESRCH\n      # puts &quot;Old master alerady dead&quot;\n    end\n  end\nend\n\nafter_fork do |server, worker|\n  if defined?(ActiveRecord::Base)\n    config = ActiveRecord::Base.configurations[Rails.env] || Rails.application.config.database_configuration[Rails.env]\n    config['pool'] = ENV[&quot;DB_POOL&quot;] || ENV['RAILS_MAX_THREADS'] || 5\n\n    ActiveRecord::Base.establish_connection(config)\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby", "selenium", "cucumber"], "comments": [{"owner": {"reputation": 1, "user_id": 11161846, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Z9PHU5nQCOQ/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdgSlT7fKXdFeZ6TVxbJnFGN3iIZQ/mo/photo.jpg?sz=128", "display_name": "Syed Zaidi", "link": "https://stackoverflow.com/users/11161846/syed-zaidi"}, "edited": false, "score": 1, "creation_date": 1551902939, "post_id": 55031242, "comment_id": 96815370, "body": "I should have mentioned this is using Cucumber for Ruby."}], "answers": [{"tags": [], "owner": {"reputation": 2352, "user_id": 157931, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/986d255e94481d2249bae7911e7845e8?s=128&d=identicon&r=PG", "display_name": "Danilo Cabello", "link": "https://stackoverflow.com/users/157931/danilo-cabello"}, "is_accepted": false, "score": 0, "last_activity_date": 1551911335, "creation_date": 1551911335, "answer_id": 55033208, "question_id": 55031242, "link": "https://stackoverflow.com/questions/55031242/how-can-i-access-a-variable-inside-a-multi-step-step-definition/55033208#55033208", "title": "How can I access a variable inside a multi-step step definition?", "body": "<p>Are you using single quote or double quotes? Double quotes allow for interpolation while single quotes will just use the contents without translating any variables. <code>\"#{policy_name}\"</code> should work, while <code>'#{any_variable}'</code> should not work.</p>\n"}, {"tags": [], "owner": {"reputation": 3257, "user_id": 4341733, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b1793f226cb3189da8bc9c6264d72b7?s=128&d=identicon&r=PG", "display_name": "diabolist", "link": "https://stackoverflow.com/users/4341733/diabolist"}, "is_accepted": false, "score": 0, "last_activity_date": 1552002907, "creation_date": 1552002907, "answer_id": 55054693, "question_id": 55031242, "link": "https://stackoverflow.com/questions/55031242/how-can-i-access-a-variable-inside-a-multi-step-step-definition/55054693#55054693", "title": "How can I access a variable inside a multi-step step definition?", "body": "<p>Don't write steps like this and don't nest steps, you will just get into a mess. Also Given's are for setting up state, not for doing something.</p>\n\n<p>If you have a complex step like this you have two better options than nesting steps</p>\n\n<ol>\n<li>Break the step into simpler steps</li>\n<li>Push the complexity down out of the step definitions and into helper methods</li>\n</ol>\n\n<p>Having steps like \"When I click something\" is counter productive. That step is all about HOW something is done. Scenarios should be about WHAT you are doing and WHY its important. Features and scenarios are not for programming, they are for describing behaviour and should be very simple. So you should be writing something like</p>\n\n<pre><code>Scenario: When I foo then the back button is disabled\n  Given ...\n  When I foo\n  Then the back button should be disabled\n</code></pre>\n\n<p>an example for my bank would be</p>\n\n<pre><code>Scenario: Smile login disables back button\n  Given I am logged into smile banking\n  When I try and use the back button\n  Then I should see the back button disabled warning\n</code></pre>\n\n<p>Finally each step definition should just be a call to a helper method. e.g.</p>\n\n<pre><code>Given 'I am logged into smile banking' do\n  # NOTE: both params are also helper methods\n  login(site: smile_banking, user: create_user)\nend\n</code></pre>\n\n<p>this allows you to push all the complexity out of cucumber and into code. Code can handle complexity, Cucumber cannot.</p>\n"}], "owner": {"reputation": 1, "user_id": 11161846, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Z9PHU5nQCOQ/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdgSlT7fKXdFeZ6TVxbJnFGN3iIZQ/mo/photo.jpg?sz=128", "display_name": "Syed Zaidi", "link": "https://stackoverflow.com/users/11161846/syed-zaidi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 64, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1552002907, "creation_date": 1551902194, "last_edit_date": 1551906977, "question_id": 55031242, "link": "https://stackoverflow.com/questions/55031242/how-can-i-access-a-variable-inside-a-multi-step-step-definition", "title": "How can I access a variable inside a multi-step step definition?", "body": "<p>I am currently trying to define a multi-step step definition in Cucumber (for Ruby) but I'm having trouble using a variable in one of the sub-steps. Below I am trying to use the \"policy_name\" variable in the last sub step but can not get Cucumber to recognize it for its variable value, instead it keeps using it as a string.</p>\n\n<pre><code> Given(\"I should NOT be able to go back using the browser back button \n after doing something {string}\") do |policy|\n\n   step 'I click on \"something\"'\n   step 'I \"do this\" via computer'\n   step 'I click on the browser back button'\n\n   policy_name = case policy\n   when \"policy1\" then \"something1\"\n   when \"policy2\" then \"something2\"\n   end\n\n   step 'I should be on the \"Specified\" page \n   for #{policy_name}'\n end\n</code></pre>\n"}, {"tags": ["ruby", "macos"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1551900716, "post_id": 55030725, "comment_id": 96814135, "body": "A bunch? You need only this one."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1551904224, "post_id": 55030725, "comment_id": 96815938, "body": "I doubt that anyone will search for questions with a tag &quot;macos&quot;."}, {"owner": {"reputation": 45322, "user_id": 421705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/581b1760881c962648f99d6040d41829?s=128&d=identicon&r=PG", "display_name": "Holger Just", "link": "https://stackoverflow.com/users/421705/holger-just"}, "edited": false, "score": 0, "creation_date": 1551905476, "post_id": 55030725, "comment_id": 96816465, "body": "There are <a href=\"http://www.lostsaloon.com/technology/7-keyboard-shortcuts-you-should-know-in-linux-command-shell/\" rel=\"nofollow noreferrer\">quite a few more</a> signals a user can send from the terminal, e.g. <code>SIGQUIT</code> with <code>CTRL+\\ </code> and <code>SIGTSTP</code> with <code>CTRL+Z</code>. There might be more depending on your used shell. You should probably not strongly rely on being able to capture all these signals for any actual security purposes."}, {"owner": {"reputation": 2352, "user_id": 157931, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/986d255e94481d2249bae7911e7845e8?s=128&d=identicon&r=PG", "display_name": "Danilo Cabello", "link": "https://stackoverflow.com/users/157931/danilo-cabello"}, "edited": false, "score": 0, "creation_date": 1551911428, "post_id": 55030725, "comment_id": 96818858, "body": "Possibly duplicate of: <a href=\"https://stackoverflow.com/questions/2089421/capturing-ctrl-c-in-ruby?noredirect=1&amp;lq=1\" title=\"capturing ctrl c in ruby\">stackoverflow.com/questions/2089421/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 653, "user_id": 7148414, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KMhlJ.jpg?s=128&g=1", "display_name": "baseballlover723", "link": "https://stackoverflow.com/users/7148414/baseballlover723"}, "is_accepted": true, "score": 3, "last_activity_date": 1551900982, "creation_date": 1551900982, "answer_id": 55030944, "question_id": 55030725, "link": "https://stackoverflow.com/questions/55030725/how-to-disable-control-c-in-ruby/55030944#55030944", "title": "How to disable control-c in ruby", "body": "<p>you can trap SIGINT like this</p>\n\n<pre><code>trap \"SIGINT\" do\n  # this is called when you press control-c\n  # be very careful, you can't kill this program with control-c\nend\n</code></pre>\n\n<p>You can also see <a href=\"https://stackoverflow.com/questions/2089421/capturing-ctrl-c-in-ruby\">Capturing Ctrl-c in ruby</a> for some other ways to interact with control-c</p>\n"}], "owner": {"reputation": 3, "user_id": 11161692, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-WVhr5oVlm1g/AAAAAAAAAAI/AAAAAAAAHp0/oRnYPrxX-Pw/photo.jpg?sz=128", "display_name": "DangerDC", "link": "https://stackoverflow.com/users/11161692/dangerdc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 144, "favorite_count": 0, "accepted_answer_id": 55030944, "answer_count": 1, "score": 0, "last_activity_date": 1551903902, "creation_date": 1551900196, "last_edit_date": 1551903902, "question_id": 55030725, "link": "https://stackoverflow.com/questions/55030725/how-to-disable-control-c-in-ruby", "title": "How to disable control-c in ruby", "body": "<p>I am working on a program that requires that you type a password to exit a ruby program, and I need a way to disable control-c, as it is failing my evil plans. I need to make it so that the user cannot interrupt the program, without having a bunch of these:</p>\n\n<pre><code>rescue Interrupt\n    while true\n        puts \"\\nExiting...\"\n    end\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "thin"], "comments": [{"owner": {"reputation": 1894, "user_id": 481023, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/59CR5.png?s=128&g=1", "display_name": "elc", "link": "https://stackoverflow.com/users/481023/elc"}, "edited": false, "score": 0, "creation_date": 1551909154, "post_id": 55030300, "comment_id": 96818038, "body": "Switched to puma, getting different errors but at least something that gets some hits online.  Seems like it might be some kind of corporate firewall thing blocking port 3000 even when the VDI is just talking to itself."}], "answers": [{"tags": [], "owner": {"reputation": 1894, "user_id": 481023, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/59CR5.png?s=128&g=1", "display_name": "elc", "link": "https://stackoverflow.com/users/481023/elc"}, "is_accepted": true, "score": 0, "last_activity_date": 1574028095, "last_edit_date": 1574028095, "creation_date": 1551984662, "answer_id": 55050876, "question_id": 55030300, "link": "https://stackoverflow.com/questions/55030300/rails-server-dies-with-eafnosupport-windows-10-ruby-2-4-rails-4-2-thin/55050876#55050876", "title": "Rails Server dies with EAFNOSUPPORT - Windows 10, Ruby 2.4, Rails 4.2,Thin", "body": "<p>I got the server running by switching to Puma and forcing it to IPv6 by using </p>\n\n<pre><code>rails s -b [::]\n</code></pre>\n\n<p>That might be a workaround instead of an answer.  I suspect there is a corporate setting or perhaps firewall issue that blocks <code>127.0.0.1:3000</code> but I never got a clear answer on that.</p>\n"}], "owner": {"reputation": 1894, "user_id": 481023, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/59CR5.png?s=128&g=1", "display_name": "elc", "link": "https://stackoverflow.com/users/481023/elc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 176, "favorite_count": 0, "accepted_answer_id": 55050876, "answer_count": 1, "score": 0, "last_activity_date": 1574028095, "creation_date": 1551898495, "last_edit_date": 1574028015, "question_id": 55030300, "link": "https://stackoverflow.com/questions/55030300/rails-server-dies-with-eafnosupport-windows-10-ruby-2-4-rails-4-2-thin", "title": "Rails Server dies with EAFNOSUPPORT - Windows 10, Ruby 2.4, Rails 4.2,Thin", "body": "<p>I can run rake tasks and a console, but the development server dies a few moments after launch before I make any requests to it.</p>\n\n<p>It seems like it has something to do with IPV6 based on the ::1 address but I can't find where I can do anything about that.</p>\n\n<p>Any ideas?</p>\n\n<pre><code>C:\\Rails Projects\\cfhtrust&gt;rails s\n[factory_girl warning, below]\n=&gt; Booting Thin\n=&gt; Rails 4.2.11 application starting in development on http://localhost:3000\n=&gt; Run `rails server -h` for more startup options\n=&gt; Ctrl-C to shutdown server\n[eventmachine warnings below]\nThin web server (v1.7.2 codename Bachmanity)\nMaximum connections set to 1024\nListening on localhost:3000, CTRL+C to stop\nExiting\nC:/Ruby24/lib/ruby/gems/2.4.0/gems/eventmachine-1.2.7/lib/em/pure_ruby.rb:1054:in `bind': An address incompatible with the requested protocol was used. - bind(2) for [::1]:3000 (Errno::EAFNOSUPPORT)\n        from C:/Ruby24/lib/ruby/gems/2.4.0/gems/eventmachine-1.2.7/lib/em/pure_ruby.rb:1054:in `start_server'\n        from C:/Ruby24/lib/ruby/gems/2.4.0/gems/eventmachine-1.2.7/lib/em/pure_ruby.rb:185:in `start_tcp_server'\n        from C:/Ruby24/lib/ruby/gems/2.4.0/gems/eventmachine-1.2.7/lib/eventmachine.rb:531:in `start_server'\n        from C:/Ruby24/lib/ruby/gems/2.4.0/gems/thin-1.7.2/lib/thin/backends/tcp_server.rb:16:in `connect'\n        from C:/Ruby24/lib/ruby/gems/2.4.0/gems/thin-1.7.2/lib/thin/backends/base.rb:63:in `block in start'\n        from C:/Ruby24/lib/ruby/gems/2.4.0/gems/eventmachine-1.2.7/lib/eventmachine.rb:1545:in `event_callback'\n        from C:/Ruby24/lib/ruby/gems/2.4.0/gems/eventmachine-1.2.7/lib/em/pure_ruby.rb:571:in `block in run_timers'\n        from C:/Ruby24/lib/ruby/2.4.0/set.rb:699:in `each'\n        from C:/Ruby24/lib/ruby/2.4.0/set.rb:699:in `each'\n        from C:/Ruby24/lib/ruby/gems/2.4.0/gems/eventmachine-1.2.7/lib/em/pure_ruby.rb:568:in `run_timers'\n        from C:/Ruby24/lib/ruby/gems/2.4.0/gems/eventmachine-1.2.7/lib/em/pure_ruby.rb:551:in `block in run'\n        from C:/Ruby24/lib/ruby/gems/2.4.0/gems/eventmachine-1.2.7/lib/em/pure_ruby.rb:547:in `loop'\n        from C:/Ruby24/lib/ruby/gems/2.4.0/gems/eventmachine-1.2.7/lib/em/pure_ruby.rb:547:in `run'\n        from C:/Ruby24/lib/ruby/gems/2.4.0/gems/eventmachine-1.2.7/lib/em/pure_ruby.rb:144:in `run_machine'\n        from C:/Ruby24/lib/ruby/gems/2.4.0/gems/eventmachine-1.2.7/lib/eventmachine.rb:195:in `run'\n        from C:/Ruby24/lib/ruby/gems/2.4.0/gems/thin-1.7.2/lib/thin/backends/base.rb:73:in `start'\n        from C:/Ruby24/lib/ruby/gems/2.4.0/gems/thin-1.7.2/lib/thin/server.rb:162:in `start'\n        from C:/Ruby24/lib/ruby/gems/2.4.0/gems/rack-1.6.2/lib/rack/handler/thin.rb:19:in `run'\n        from C:/Ruby24/lib/ruby/gems/2.4.0/gems/rack-1.6.2/lib/rack/server.rb:286:in `start'\n        from C:/Ruby24/lib/ruby/gems/2.4.0/gems/railties-4.2.11/lib/rails/commands/server.rb:80:in `start'\n        from C:/Ruby24/lib/ruby/gems/2.4.0/gems/railties-4.2.11/lib/rails/commands/commands_tasks.rb:80:in `block in server'\n        from C:/Ruby24/lib/ruby/gems/2.4.0/gems/railties-4.2.11/lib/rails/commands/commands_tasks.rb:75:in `tap'\n        from C:/Ruby24/lib/ruby/gems/2.4.0/gems/railties-4.2.11/lib/rails/commands/commands_tasks.rb:75:in `server'\n        from C:/Ruby24/lib/ruby/gems/2.4.0/gems/railties-4.2.11/lib/rails/commands/commands_tasks.rb:39:in `run_command!'\n        from C:/Ruby24/lib/ruby/gems/2.4.0/gems/railties-4.2.11/lib/rails/commands.rb:17:in `&lt;top (required)&gt;'\n        from bin/rails:4:in `require'\n        from bin/rails:4:in `&lt;main&gt;'\n</code></pre>\n\n<p>I see these warnings when I start the server, but I see the same things when I start a Rails console and then the Rails console works, so that gives me some reason to believe these are not the actual show-stoppers killing the server.</p>\n\n<pre><code>DEPRECATION WARNING: The factory_girl gem is deprecated. Please upgrade to factory_bot. See https://github.com/thoughtbot/factory_bot/blob/v4.9.0/UPGRADE_FROM_FACTORY_GIRL.md for further instructions. (called from require at C:/Ruby24/lib/ruby/site_ruby/2.4.0/bundler/runtime.rb:81)\nC:/Ruby24/lib/ruby/gems/2.4.0/gems/eventmachine-1.2.7/lib/em/pure_ruby.rb:467: warning: already initialized constant EventMachine::TimerFired\nC:/Ruby24/lib/ruby/gems/2.4.0/gems/eventmachine-1.2.7/lib/em/pure_ruby.rb:469: warning: already initialized constant EventMachine::ConnectionData\nC:/Ruby24/lib/ruby/gems/2.4.0/gems/eventmachine-1.2.7/lib/em/pure_ruby.rb:471: warning: already initialized constant EventMachine::ConnectionUnbound\nC:/Ruby24/lib/ruby/gems/2.4.0/gems/eventmachine-1.2.7/lib/em/pure_ruby.rb:473: warning: already initialized constant EventMachine::ConnectionAccepted\nC:/Ruby24/lib/ruby/gems/2.4.0/gems/eventmachine-1.2.7/lib/em/pure_ruby.rb:475: warning: already initialized constant EventMachine::ConnectionCompleted\nC:/Ruby24/lib/ruby/gems/2.4.0/gems/eventmachine-1.2.7/lib/em/pure_ruby.rb:477: warning: already initialized constant EventMachine::LoopbreakSignalled\nC:/Ruby24/lib/ruby/gems/2.4.0/gems/eventmachine-1.2.7/lib/em/pure_ruby.rb:479: warning: already initialized constant EventMachine::ConnectionNotifyReadable\nC:/Ruby24/lib/ruby/gems/2.4.0/gems/eventmachine-1.2.7/lib/em/pure_ruby.rb:481: warning: already initialized constant EventMachine::ConnectionNotifyWritable\nC:/Ruby24/lib/ruby/gems/2.4.0/gems/eventmachine-1.2.7/lib/em/pure_ruby.rb:483: warning: already initialized constant EventMachine::SslHandshakeCompleted\nC:/Ruby24/lib/ruby/gems/2.4.0/gems/eventmachine-1.2.7/lib/em/pure_ruby.rb:485: warning: already initialized constant EventMachine::SslVerify\nC:/Ruby24/lib/ruby/gems/2.4.0/gems/eventmachine-1.2.7/lib/em/pure_ruby.rb:487: warning: already initialized constant EventMachine::EM_PROTO_SSLv2\nC:/Ruby24/lib/ruby/gems/2.4.0/gems/eventmachine-1.2.7/lib/em/pure_ruby.rb:489: warning: already initialized constant EventMachine::EM_PROTO_SSLv3\nC:/Ruby24/lib/ruby/gems/2.4.0/gems/eventmachine-1.2.7/lib/em/pure_ruby.rb:491: warning: already initialized constant EventMachine::EM_PROTO_TLSv1\nC:/Ruby24/lib/ruby/gems/2.4.0/gems/eventmachine-1.2.7/lib/em/pure_ruby.rb:493: warning: already initialized constant EventMachine::EM_PROTO_TLSv1_1\nC:/Ruby24/lib/ruby/gems/2.4.0/gems/eventmachine-1.2.7/lib/em/pure_ruby.rb:495: warning: already initialized constant EventMachine::EM_PROTO_TLSv1_2\n</code></pre>\n"}, {"tags": ["ruby", "idioms"], "answers": [{"comments": [{"owner": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "edited": false, "score": 1, "creation_date": 1551898210, "post_id": 55029934, "comment_id": 96812940, "body": "The first approach is better than passing hash, passing just a hash obscures arguments of the method. Parameters to a method are clear, self sufficient documentation of what is required to make the method behave."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "edited": false, "score": 1, "creation_date": 1551898876, "post_id": 55029934, "comment_id": 96813226, "body": "@\u0417\u0435\u043b\u0451\u043d\u044b\u0439 Where self-documentation fails, documentation can take over."}], "tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": false, "score": 2, "last_activity_date": 1551896985, "creation_date": 1551896985, "answer_id": 55029934, "question_id": 55029882, "link": "https://stackoverflow.com/questions/55029882/idiomatic-ruby-for-breaking-up-method-definition/55029934#55029934", "title": "Idiomatic Ruby for breaking up method definition", "body": "<p>The convention is you usually don't break up lines like that, you just deal with it. Not everything can be neatly expressed as short lines even if you strive to do that.</p>\n\n<p>One approach to make the line shorter is to reduce the length of the variable names:</p>\n\n<pre><code>define_method(\"start_#{event}!\") do |on, setting = nil, node = nil|\n</code></pre>\n\n<p>Or to use an options-style definition:</p>\n\n<pre><code>define_method(\"start_#{event}!\") do |on, options = { }|\n</code></pre>\n\n<p>Where you call it like:</p>\n\n<pre><code>start_x!(user, setting: setting_name, node_id: node.id)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 45322, "user_id": 421705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/581b1760881c962648f99d6040d41829?s=128&d=identicon&r=PG", "display_name": "Holger Just", "link": "https://stackoverflow.com/users/421705/holger-just"}, "is_accepted": false, "score": 1, "last_activity_date": 1551897518, "creation_date": 1551897518, "answer_id": 55030057, "question_id": 55029882, "link": "https://stackoverflow.com/questions/55029882/idiomatic-ruby-for-breaking-up-method-definition/55030057#55030057", "title": "Idiomatic Ruby for breaking up method definition", "body": "<p>Block parameters can be split over multiple lines, the same way you can do it when defining method parameters:</p>\n\n<pre><code>define_method(\"start_#{event}!\") do |\n                                     user_or_enrollment,\n                                     setting_name = nil,\n                                     node_id = nil\n                                    |\n  # method body\nend\n</code></pre>\n\n<p>Alternatively, you can indent differently depending on personal preference, e.g.</p>\n\n<pre><code>define_method(\"start_#{event}!\") do |\n  user_or_enrollment,\n  setting_name = nil,\n  node_id = nil\n|\n  # method body\nend\n</code></pre>\n\n<p>How exactly you format this is up to you. Various style guide recommend different things in that case. However, they usually all agree that it is desirable to keep the number of parameters small and to try to avoid splitting argument or parameter lists over multiple lines if possible.</p>\n"}, {"tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": false, "score": 0, "last_activity_date": 1551898133, "creation_date": 1551898133, "answer_id": 55030196, "question_id": 55029882, "link": "https://stackoverflow.com/questions/55029882/idiomatic-ruby-for-breaking-up-method-definition/55030196#55030196", "title": "Idiomatic Ruby for breaking up method definition", "body": "<p>This is primarily based on opinion. I would go with:</p>\n\n<pre><code>define_method(\n  \"start_#{event}!\"\n) do |user_or_enrollment, setting_name = nil, node_id = nil|\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user11113981"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 1, "closed_date": 1551936531, "answer_count": 3, "score": 0, "last_activity_date": 1551927454, "creation_date": 1551896786, "last_edit_date": 1551927454, "question_id": 55029882, "link": "https://stackoverflow.com/questions/55029882/idiomatic-ruby-for-breaking-up-method-definition", "closed_reason": "Opinion-based", "title": "Idiomatic Ruby for breaking up method definition", "body": "<p>I am trying to cut a line into pieces</p>\n\n<pre><code>define_method(\"start_#{event}!\") do |user_or_enrollment, setting_name = nil, node_id = nil|\n</code></pre>\n\n<p>What is the conventional style for breaking up these long method call lines?</p>\n"}, {"tags": ["ruby", "concurrency", "atomic", "atomicity", "mri"], "answers": [{"comments": [{"owner": {"reputation": 61, "user_id": 6827794, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/980574015386257/picture?type=large", "display_name": "Antonio Gonz&#225;lez Borrego", "link": "https://stackoverflow.com/users/6827794/antonio-gonz%c3%a1lez-borrego"}, "edited": false, "score": 1, "creation_date": 1551900192, "post_id": 55030227, "comment_id": 96813845, "body": "Could you provide the source of your answer for MRI?"}, {"owner": {"reputation": 45322, "user_id": 421705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/581b1760881c962648f99d6040d41829?s=128&d=identicon&r=PG", "display_name": "Holger Just", "link": "https://stackoverflow.com/users/421705/holger-just"}, "reply_to_user": {"reputation": 61, "user_id": 6827794, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/980574015386257/picture?type=large", "display_name": "Antonio Gonz&#225;lez Borrego", "link": "https://stackoverflow.com/users/6827794/antonio-gonz%c3%a1lez-borrego"}, "edited": false, "score": 0, "creation_date": 1551905034, "post_id": 55030227, "comment_id": 96816288, "body": "Well, the whole idea of a GIL is to guarantee that individual operations on a Ruby level will never be interrupted by a concurrent thread. Even things like the += operator (which is definitely unsafe to use on JRuby and others) is <a href=\"https://github.com/jondot/pcwr/blob/dca092d03d060ece104e3aa7c1aef9efe2cd224e/README.md#state-of-the-union\" rel=\"nofollow noreferrer\">safe</a> on MRI."}], "tags": [], "owner": {"reputation": 45322, "user_id": 421705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/581b1760881c962648f99d6040d41829?s=128&d=identicon&r=PG", "display_name": "Holger Just", "link": "https://stackoverflow.com/users/421705/holger-just"}, "is_accepted": true, "score": 2, "last_activity_date": 1551898230, "creation_date": 1551898230, "answer_id": 55030227, "question_id": 55029799, "link": "https://stackoverflow.com/questions/55029799/is-assignment-an-atomic-operation-in-ruby-mri/55030227#55030227", "title": "Is assignment an atomic operation in ruby MRI?", "body": "<p>This depends a bit on the Ruby implementation you are using. As for MRI Ruby (the \"default\" Ruby), this is a safe (atomic) operation due to its Global Interpreter Lock which guards some operations such as assignments from bein interrupted by context switches.</p>\n\n<p>JRuby also <a href=\"https://github.com/jruby/jruby/wiki/Concurrency-in-jruby#language-features-and-the-jruby-runtime\" rel=\"nofollow noreferrer\">guarantees</a> that some operations are thread-safe, including assignment to instance variables.</p>\n\n<p>In any case, please make sure to take into account that any such concurrent access can be serialized in a seemingly random way. That is, you can't guarantee which threads assigns first and which one last unless you use explicit locks such as a <a href=\"https://ruby-doc.org/core/Mutex.html\" rel=\"nofollow noreferrer\">Mutex</a>.</p>\n"}], "owner": {"reputation": 61, "user_id": 6827794, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/980574015386257/picture?type=large", "display_name": "Antonio Gonz&#225;lez Borrego", "link": "https://stackoverflow.com/users/6827794/antonio-gonz%c3%a1lez-borrego"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 134, "favorite_count": 0, "accepted_answer_id": 55030227, "answer_count": 1, "score": 1, "last_activity_date": 1551942027, "creation_date": 1551896440, "last_edit_date": 1551942027, "question_id": 55029799, "link": "https://stackoverflow.com/questions/55029799/is-assignment-an-atomic-operation-in-ruby-mri", "title": "Is assignment an atomic operation in ruby MRI?", "body": "<p>Let's say I have these two methods in my class.</p>\n\n<pre><code>def set_val(val)\n  @val = val\nend\n\ndef get_val\n  @val\nend\n</code></pre>\n\n<p>I'll spawn multiple threads to call <code>set_val</code> with different values. Is it guaranteed that reading from <code>@val</code> returns the correct value, i.e., not the last assigned value, but a value that was passed to <code>set_val</code>? Could I get something strange when reading? Is the assignment operation atomic? Is it indivisible irrespective of the number of threads?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 3, "creation_date": 1551896350, "post_id": 55029719, "comment_id": 96812113, "body": "&quot;The following works&quot; - does it though? Try with a non-nil."}, {"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 6, "creation_date": 1551896497, "post_id": 55029719, "comment_id": 96812179, "body": "You must use the <code>&amp;</code> again in the result of <code>attribute_value&amp;.length</code>, since <code>&gt;=</code> is also a method being invoked in an object (<code>nil&amp;.length&amp;.&gt;= 1</code>)"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1551896521, "post_id": 55029719, "comment_id": 96812192, "body": "I personally would go with your first line. It&#39;s short and dead simple. I could be persuaded to tolerate the <code>attribute_value&amp;.length.to_i</code>, temporarily (if we need to deploy a hotfix <i>right now</i> and this is the only concern with the pull request)"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1551896715, "post_id": 55029719, "comment_id": 96812278, "body": "@SebastianPalma: oh my. Something something back to perl roots :) (this how I imagine perl code looks like, unreadable mess of random sigils)"}, {"owner": {"reputation": 31606, "user_id": 227863, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/AtDIv.jpg?s=128&g=1", "display_name": "stephenmurdoch", "link": "https://stackoverflow.com/users/227863/stephenmurdoch"}, "reply_to_user": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1551896803, "post_id": 55029719, "comment_id": 96812319, "body": "Thanks @SebastianPalma for showing how to make it work."}, {"owner": {"reputation": 31606, "user_id": 227863, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/AtDIv.jpg?s=128&g=1", "display_name": "stephenmurdoch", "link": "https://stackoverflow.com/users/227863/stephenmurdoch"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1551896822, "post_id": 55029719, "comment_id": 96812329, "body": "Thanks @SergioTulentsev for advising to go with the simple solution. That&#39;s what I will do. It&#39;s easier to read and look at."}, {"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1551897458, "post_id": 55029719, "comment_id": 96812622, "body": "Yes @SergioTulentsev, I personally would take a time to avoid chaining <code>&amp;</code>&#39;s and <code>try</code>&#39;s. But is how you say, temporarily tolerable if a hotfix is needed."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1551901018, "post_id": 55029719, "comment_id": 96814296, "body": "You could write <code>attribute_value.length &gt; 255 unless attribute_value.nil?</code>, which returns <code>nil</code> if <code>attribute_value #=&gt; nil</code>."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1551901256, "post_id": 55029719, "comment_id": 96814427, "body": "<code>class NilClass; def length; -Float::INFINITY; end; end</code>. &#175;\\_(\u30c4)_/&#175;"}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1551905224, "post_id": 55029719, "comment_id": 96816370, "body": "@CarySwoveland then why not simply <code>class NilClass; Comparable.instance_methods.each { |m| next if m == :==; define_method(m) {|*| false} }; end</code>? Also <code>attribute_value.length &gt; 255 unless attribute_value.nil?</code> seems better as <code>attribute_value.length &gt; 255 if attribute_value</code> since <code>false</code> has no length either. Although <code>.respond_to?(:length)</code> would be more correct"}], "answers": [{"tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": false, "score": 1, "last_activity_date": 1551897344, "creation_date": 1551897344, "answer_id": 55030025, "question_id": 55029719, "link": "https://stackoverflow.com/questions/55029719/using-ruby-safe-operator-with-greater-than/55030025#55030025", "title": "Using Ruby safe operator with greater than", "body": "<p>This sort of thing depends on what kind of missing values you're trying to accommodate and if failing to define it is the same as being within bounds, or outside of.</p>\n\n<p>Your approach of:</p>\n\n<pre><code>attribute_value&amp;.length.to_i &gt; 255\n</code></pre>\n\n<p>Seems reasonable enough so long as <code>nil</code> means \"not outside of bounds\".</p>\n\n<p>Often I handle this with guard conditions like:</p>\n\n<pre><code>return unless attribute_value\n\nif attribute_value.length &gt; 255\n  # ... Handle condition\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3692, "user_id": 2102591, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/18ebe6ebe65a7aff45e6d09e96af9701?s=128&d=identicon&r=PG", "display_name": "Andrew Schwartz", "link": "https://stackoverflow.com/users/2102591/andrew-schwartz"}, "is_accepted": false, "score": 4, "last_activity_date": 1551909234, "creation_date": 1551909234, "answer_id": 55032763, "question_id": 55029719, "link": "https://stackoverflow.com/questions/55029719/using-ruby-safe-operator-with-greater-than/55032763#55032763", "title": "Using Ruby safe operator with greater than", "body": "<p>As a direct answer to the question asked, you can use the safe navigation operator directly since <code>x &gt; y</code> is really just calling the <code>&gt;</code> <a href=\"https://ruby-doc.org/core-2.2.0/Fixnum.html#method-i-3E\" rel=\"nofollow noreferrer\">method</a> on the object x. That is, <code>x &gt; y</code> is the same as <code>x.&gt;(y)</code> or <code>x.send(:&gt;, y)</code></p>\n\n<p>Therefore, you can use <code>x&amp;.&gt; y</code>. Or, in your situation, <code>attribute_value&amp;.length&amp;.&gt; 255</code></p>\n\n<p>Personally, I'd prefer <code>attribute_value &amp;&amp; attribute_value.length &gt; 255</code>, but maybe that's just me.</p>\n"}], "owner": {"reputation": 31606, "user_id": 227863, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/AtDIv.jpg?s=128&g=1", "display_name": "stephenmurdoch", "link": "https://stackoverflow.com/users/227863/stephenmurdoch"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 579, "favorite_count": 0, "answer_count": 2, "score": 6, "last_activity_date": 1580451721, "creation_date": 1551896137, "question_id": 55029719, "link": "https://stackoverflow.com/questions/55029719/using-ruby-safe-operator-with-greater-than", "title": "Using Ruby safe operator with greater than", "body": "<p>I'm trying to figure out how to use Ruby's safe operator in the following scenario:</p>\n\n<pre><code>if attribute_value &amp;&amp; attribute_value.length &gt; 255\n</code></pre>\n\n<p>The following does not work if the attribute_value is nil:</p>\n\n<pre><code>if attribute_value&amp;.length &gt; 255\n\n# NoMethodError: undefined method `&gt;' for nil:NilClass\n</code></pre>\n\n<p>I get why, but what I'd like to know is how to I get round this. The following works, but it's ugly as hell:</p>\n\n<pre><code>if attribute_value&amp;.(length &gt; 255)\n</code></pre>\n\n<p>What's the recommended way of doing this? I guess I could do the following:</p>\n\n<pre><code>if attribute_value&amp;.length.to_i &gt; 255\n</code></pre>\n\n<p>That's not so bad for this situation. Anything else?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1551893187, "post_id": 55028858, "comment_id": 96810484, "body": "There are no static classes in ruby. This inheritance here works just fine. Bar#test fails to find super method because there&#39;s none. <code>test</code> that is in Foo lives on another level. Not instances of the class, but the class object itself. Overall, it&#39;s not clear what you&#39;re trying to ask here."}, {"owner": {"user_type": "does_not_exist", "display_name": "user5466293"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1551894045, "post_id": 55028858, "comment_id": 96810984, "body": "@SergioTulentsev Is there a way for me to call <code>super</code> so that <code>&quot;this is test&quot;</code> would be printed?"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1551894097, "post_id": 55028858, "comment_id": 96811014, "body": "Yes, define <code>test</code> in Bar the same way, as singleton method. This would make <code>Foo.test</code> its proper super method."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1551904782, "post_id": 55028858, "comment_id": 96816181, "body": "There&#39;s nothing wrong with the way you&#39;ve defined <code>Foo::test</code> (the &quot;::&quot; meaning it&#39;s a class method, as opposed to <code>Foo#test</code> if it were an instance method), but the normal (shorthand) way it&#39;s written is <code>def self.test; ... ; end</code> (which here is the same as <code>def Foo.test; ... ; end</code>)."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user5466293"}, "edited": false, "score": 0, "creation_date": 1551896405, "post_id": 55029338, "comment_id": 96812139, "body": "So the only way to make it work is to make <code>test</code> method inside <code>Bar</code> singleton as well?"}, {"owner": {"reputation": 3692, "user_id": 2102591, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/18ebe6ebe65a7aff45e6d09e96af9701?s=128&d=identicon&r=PG", "display_name": "Andrew Schwartz", "link": "https://stackoverflow.com/users/2102591/andrew-schwartz"}, "edited": false, "score": 0, "creation_date": 1551907141, "post_id": 55029338, "comment_id": 96817172, "body": "Yes, otherwise you&#39;re not overriding anything. Another way to see this:  <code>Foo.new.test</code> will <i>not</i> call your method defined on the class <code>Foo</code>. (Protip: don&#39;t use the name <code>test</code> since that&#39;s a method on <code>Kernel</code> so the error messages may be more confusing than they need to be.)"}], "tags": [], "owner": {"reputation": 3692, "user_id": 2102591, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/18ebe6ebe65a7aff45e6d09e96af9701?s=128&d=identicon&r=PG", "display_name": "Andrew Schwartz", "link": "https://stackoverflow.com/users/2102591/andrew-schwartz"}, "is_accepted": false, "score": 0, "last_activity_date": 1551894644, "creation_date": 1551894644, "answer_id": 55029338, "question_id": 55028858, "link": "https://stackoverflow.com/questions/55028858/overriding-parents-singleton-method/55029338#55029338", "title": "Overriding parent&#39;s singleton method", "body": "<blockquote>\n  <p>Is there a way for <code>Bar</code> to inherit from <code>Foo</code></p>\n</blockquote>\n\n<p>You've done that part correctly</p>\n\n<blockquote>\n  <p>and override <code>test</code>?</p>\n</blockquote>\n\n<p>You need to define <code>Bar.test</code> as a class method, but what you have written is an instance method definition (and invocation).  Try</p>\n\n<pre><code>class Bar &lt; Foo\n  class &lt;&lt; self\n    def test\n      super + \", man\"\n    end\n  end\nend\n\nBar.test\n#=&gt; \"this is a test, man\"\n</code></pre>\n\n<p>There is no such thing as a static class or method in Ruby, so the instance method invocation <code>Bar.new.test</code> will never refer to the same thing as the class method invocation <code>Bar.test</code> as it might in languages with the concept of static methods.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user5466293"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 159, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1551945141, "creation_date": 1551892963, "last_edit_date": 1551945141, "question_id": 55028858, "link": "https://stackoverflow.com/questions/55028858/overriding-parents-singleton-method", "title": "Overriding parent&#39;s singleton method", "body": "<p>In C#, a regular class cannot inherit from a static class. A similar case for Ruby seems to be:</p>\n\n<pre><code>class Foo\n  class &lt;&lt; self\n    def test\n      \"this is test\"\n    end\n  end\nend\n\nclass Bar &lt; Foo\n  def test\n    puts super\n  end\nend\n\nBar.new.test # &gt;&gt; error\n</code></pre>\n\n<p>Is there a way for a regular class <code>Bar</code> to inherit from <code>Foo</code> and override <code>test</code>?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "metaprogramming"], "comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 1, "creation_date": 1551893382, "post_id": 55028771, "comment_id": 96810592, "body": "Wow. I think that plugin should be called &quot;acts_like_a_fox&quot; because that is crazy. That being said is the class not defined or the methods themselves the reason I ask is because I cam into ruby @ 1.9.3 but the docs for 1.8.6 do not seem to suggest passing a block to <code>Class.new</code> is an option. Also why use eval?"}, {"owner": {"reputation": 18203, "user_id": 100731, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/056c32203f8017f075ac060069823b66?s=128&d=identicon&r=PG", "display_name": "phoet", "link": "https://stackoverflow.com/users/100731/phoet"}, "edited": false, "score": 0, "creation_date": 1551896390, "post_id": 55028771, "comment_id": 96812133, "body": "this is wrong on so many levels... why are you asking questions on deprecated languages and unsupported frameworks. thats just a waste of everyones time. is it really necessary to use metaprogramming here? is there no way around it?"}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 2, "creation_date": 1551897143, "post_id": 55028771, "comment_id": 96812465, "body": "Is there any additional functionality needed? If not why not just create a <code>Squirrel::Base</code>  that inherits from AR and already has all the required methods then should be simple as <code>Object.const_set(&quot;Squirrel#{self.name}&quot;,Class.new(Squirrel::&zwnj;&#8203;Base))</code>"}, {"owner": {"reputation": 30655, "user_id": 138557, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/73c04e9ef9ca435c5b19a2e765ae6d20?s=128&d=identicon&r=PG", "display_name": "Max Williams", "link": "https://stackoverflow.com/users/138557/max-williams"}, "reply_to_user": {"reputation": 18203, "user_id": 100731, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/056c32203f8017f075ac060069823b66?s=128&d=identicon&r=PG", "display_name": "phoet", "link": "https://stackoverflow.com/users/100731/phoet"}, "edited": false, "score": 0, "creation_date": 1551906227, "post_id": 55028771, "comment_id": 96816785, "body": "@phoet <i>&quot;why are you asking questions on deprecated languages and unsupported frameworks&quot;</i> - because we live in an imperfect world.  <i>&quot; is it really necessary to use metaprogramming here?&quot;</i> - Maybe not, that&#39;s why I&#39;m asking."}, {"owner": {"reputation": 30655, "user_id": 138557, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/73c04e9ef9ca435c5b19a2e765ae6d20?s=128&d=identicon&r=PG", "display_name": "Max Williams", "link": "https://stackoverflow.com/users/138557/max-williams"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1551906341, "post_id": 55028771, "comment_id": 96816829, "body": "@engineersmnky that could work - what I want really is to be able to say things like <code>Resource.squirrel_class.find</code> or <code>Resource.squirrel_class.create</code> and have the normal active record methods available.  I don&#39;t think i need any additional methods in those &#39;side&#39; classes.  Maybe that doesn&#39;t require me to actually create a new class.  I&#39;ll try your suggestion."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1551912699, "post_id": 55028771, "comment_id": 96819362, "body": "In that case there are easier methods than this. I am away from my computer but if no one answers by tomorrow I will propose a solution"}, {"owner": {"reputation": 30655, "user_id": 138557, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/73c04e9ef9ca435c5b19a2e765ae6d20?s=128&d=identicon&r=PG", "display_name": "Max Williams", "link": "https://stackoverflow.com/users/138557/max-williams"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1551950406, "post_id": 55028771, "comment_id": 96831196, "body": "@engineersmnky ok thanks!  In the meantime I will just do SQL from the &quot;main&quot; classes to get the records (which might be the best thing to do anyway)."}], "owner": {"reputation": 30655, "user_id": 138557, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/73c04e9ef9ca435c5b19a2e765ae6d20?s=128&d=identicon&r=PG", "display_name": "Max Williams", "link": "https://stackoverflow.com/users/138557/max-williams"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 36, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1551892895, "creation_date": 1551892732, "last_edit_date": 1551892895, "question_id": 55028771, "link": "https://stackoverflow.com/questions/55028771/rails-2-2-create-a-new-arbase-class-dynamically", "title": "Rails 2.2 - create a new AR::Base class dynamically", "body": "<p>I'm using Ruby 1.8.6 and Rails 2.2 for an old app.  I know, I know.  </p>\n\n<p>I'm making a plugin called \"acts_as_squirrel\", which builds another table for the caller class, to store custom data and allow FULL TEXT searching.</p>\n\n<p>The table creation stuff is all working fine, but one of the things I want it to do is to make a new ActiveRecord::Base-inheriting class, called Squirrel.</p>\n\n<p>So, for example, the Resource class calls <code>acts_as_squirrel(\"name\", \"keywords\")</code>.  My acts_as_squirrel code makes (if it doesn't exist) a <code>squirrel_resources</code> table, with <code>id, record_id, name, keywords</code> columns.  That's all fine.</p>\n\n<p>But, the next thing it needs to do is to define a new ActiveRecord::Base class, to go with this newly created table.  So in this instance, I want to create a <code>SquirrelResource</code> class, which goes with the <code>squirrel_resources</code> table.  </p>\n\n<p>This is what I'm doing at the moment, which doesn't seem to be working:</p>\n\n<pre><code>def acts_as_squirrel(options={})\n  #create the Squirrel&lt;ClassName&gt; class which goes with this class, eg SquirrelResource to go with Resource.  This is an AR:Base class\n  unless defined?(\"Squirrel#{self.name}\")\n    eval \"\n    Squirrel#{self.name} = Class.new(ActiveRecord::Base) do\n      extend SquirrelClassMethods\n      include SquirrelInstanceMethods\n    end\n    \"\n  end\nend\n</code></pre>\n\n<p>After doing this, it seems that the SquirrelResource class hasn't been defined.  </p>\n\n<p>What's the best way to dynamically add another class in this way, in a way that makes it accessable to the environment, generally, so it's like any other Ar::Base class?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "server"], "answers": [{"tags": [], "owner": {"reputation": 653, "user_id": 7148414, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KMhlJ.jpg?s=128&g=1", "display_name": "baseballlover723", "link": "https://stackoverflow.com/users/7148414/baseballlover723"}, "is_accepted": false, "score": 1, "last_activity_date": 1551901548, "creation_date": 1551901548, "answer_id": 55031079, "question_id": 55028736, "link": "https://stackoverflow.com/questions/55028736/can-i-deploy-rails-project-without-gemfile/55031079#55031079", "title": "Can i deploy rails project without Gemfile", "body": "<blockquote>\n  <p>can i deploy this project without Gemfile?</p>\n</blockquote>\n\n<p>probably, but it is likely to be very painful and the only way I can think that it could work would be to manually install all the gems you need, which probably isn't that great for you, since your Gemfile is missing, and I presume that you didn't have it memorized.</p>\n\n<blockquote>\n  <p>is there any solution to recreate Gemfile which have same env with current server?</p>\n</blockquote>\n\n<p>check and see if theres a Gemfile.lock, you should hopefully be able to recreate your Gemfile from that, since it should list your dependencies and their version ranges. Other then that, you can try generating a new rails project, and copying that Gemfile, and then adding any Gems you know it uses to that, and then either running tests (if you have them) or doing manual tests to see if it breaks because of a missing gem.</p>\n\n<blockquote>\n  <p>I wanna upgrade ruby, rails. Will it take a lot of time to upgrade to the lastest version?</p>\n</blockquote>\n\n<p>Depends on what version of Ruby and Rails your currently on and also how big and complex your project is. Hard to say without knowing your project, but you can check the upgrade guides for Rails. <a href=\"https://guides.rubyonrails.org/upgrading_ruby_on_rails.html\" rel=\"nofollow noreferrer\">https://guides.rubyonrails.org/upgrading_ruby_on_rails.html</a> </p>\n"}], "owner": {"reputation": 35, "user_id": 4468766, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000016151087/picture?type=large", "display_name": "\u0110\u1ea1i L&#227;o Gia", "link": "https://stackoverflow.com/users/4468766/%c4%90%e1%ba%a1i-l%c3%a3o-gia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1551901548, "creation_date": 1551892595, "last_edit_date": 1551894058, "question_id": 55028736, "link": "https://stackoverflow.com/questions/55028736/can-i-deploy-rails-project-without-gemfile", "title": "Can i deploy rails project without Gemfile", "body": "<p><strong>Problem:</strong> I have rails project runing in server A. I want to move this project to server B. But gemfile is missing in the source code in Server A</p>\n\n<p><strong>Question:</strong> \n1. can i deploy this project without Gemfile? \n- if yes please share me how.\n- else: is there any solution to recreate Gemfile which have same env with current server?\n2. I wanna upgrade ruby, rails. Will it take a lot of time to upgrade to the lastest version? </p>\n"}, {"tags": ["ruby"], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 11124196, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-yb7PTQFCt6E/AAAAAAAAAAI/AAAAAAAAFvQ/9i7CDm_XGfU/photo.jpg?sz=128", "display_name": "Alessandro Lopresti", "link": "https://stackoverflow.com/users/11124196/alessandro-lopresti"}, "edited": false, "score": 0, "creation_date": 1551952376, "post_id": 55036973, "comment_id": 96832488, "body": "I have problem with the namespace, how can I remove it?"}, {"owner": {"reputation": 11, "user_id": 11124196, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-yb7PTQFCt6E/AAAAAAAAAAI/AAAAAAAAFvQ/9i7CDm_XGfU/photo.jpg?sz=128", "display_name": "Alessandro Lopresti", "link": "https://stackoverflow.com/users/11124196/alessandro-lopresti"}, "edited": false, "score": 0, "creation_date": 1551952719, "post_id": 55036973, "comment_id": 96832707, "body": "I have to deal with namespace but the method you gave me return an error"}, {"owner": {"reputation": 61, "user_id": 11162681, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gd5u4.jpg?s=128&g=1", "display_name": "David Wolfe", "link": "https://stackoverflow.com/users/11162681/david-wolfe"}, "reply_to_user": {"reputation": 11, "user_id": 11124196, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-yb7PTQFCt6E/AAAAAAAAAAI/AAAAAAAAFvQ/9i7CDm_XGfU/photo.jpg?sz=128", "display_name": "Alessandro Lopresti", "link": "https://stackoverflow.com/users/11124196/alessandro-lopresti"}, "edited": false, "score": 0, "creation_date": 1552018083, "post_id": 55036973, "comment_id": 96862112, "body": "You could try <code>remove_namespaces!</code> -<a href=\"https://nokogiri.org/rdoc/Nokogiri/XML/Document#remove_namespaces%21-instance_method\" rel=\"nofollow noreferrer\">nokogiri.org/rdoc/Nokogiri/XML/&hellip;</a>"}], "tags": [], "owner": {"reputation": 61, "user_id": 11162681, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gd5u4.jpg?s=128&g=1", "display_name": "David Wolfe", "link": "https://stackoverflow.com/users/11162681/david-wolfe"}, "is_accepted": false, "score": 0, "last_activity_date": 1551938184, "creation_date": 1551938184, "answer_id": 55036973, "question_id": 55028436, "link": "https://stackoverflow.com/questions/55028436/parsing-an-xml-file-with-nokigiri-ruby/55036973#55036973", "title": "Parsing an XML file with Nokigiri (RUBY)", "body": "<p>The namespace needs to be registered:</p>\n\n<pre><code>doc.xpath('//dms:ComplexResponse', 'dms' =&gt; 'http://dmsmanagerservice').first.attributes['ErrorCode'].value\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 11124196, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-yb7PTQFCt6E/AAAAAAAAAAI/AAAAAAAAFvQ/9i7CDm_XGfU/photo.jpg?sz=128", "display_name": "Alessandro Lopresti", "link": "https://stackoverflow.com/users/11124196/alessandro-lopresti"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 29, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1551938184, "creation_date": 1551891566, "question_id": 55028436, "link": "https://stackoverflow.com/questions/55028436/parsing-an-xml-file-with-nokigiri-ruby", "title": "Parsing an XML file with Nokigiri (RUBY)", "body": "<p>I'm trying to pull out some informations from my xml file. </p>\n\n<p>XML: </p>\n\n<pre><code>            &lt;CONTENT&gt;\n            &lt;dms:ComplexResponse ErrorCode=\"430\" ErrorDescription=\"null :  PrivacyUE Mancante\" Return=\"false\" xmlns:dms=\"http://dmsmanagerservice\"&gt;\n                &lt;dms:Element Name=\"DMSVERSION\"&gt;2.7&lt;/dms:Element&gt;\n            &lt;/dms:ComplexResponse&gt;\n        &lt;/CONTENT&gt;\n</code></pre>\n\n<p>I need to see the \"ErrorCode\" and the \"ErrorDescription\". </p>\n\n<p>This is my code:</p>\n\n<pre><code>    require 'nokogiri'\n\n    def see_error(response_xml.xml)\n\n\n         doc = Nokogiri::XML(File.open(response_xml.xml))\n         #it shows me the file\n\n         doc.xpath('//dms:ComplexResponse/ErrorCode/ErrorDescription')\n\n\n    end\n</code></pre>\n\n<p>After that It gives me nothing in return, just an empty array []</p>\n\n<p>Can you please help me?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "sqlite"], "comments": [{"owner": {"reputation": 5519, "user_id": 938947, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/f611b152b4fa9fe2a05f4ee9b84fdcb7?s=128&d=identicon&r=PG", "display_name": "widjajayd", "link": "https://stackoverflow.com/users/938947/widjajayd"}, "edited": false, "score": 0, "creation_date": 1551890802, "post_id": 55028140, "comment_id": 96808942, "body": "can you show your model relationship"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1551891259, "post_id": 55028140, "comment_id": 96809223, "body": "Try not to do an <code>unless</code> with an <code>else</code>, as that&#39;s a double negative. Instead use an <code>if</code> and reverse the order of the blocks. You&#39;ll also want to indent your code properly as right now it&#39;s all jumbled and hard to read, structurally speaking."}, {"owner": {"reputation": 31, "user_id": 7132462, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9543d1791ad5c02af8da3f765fd9b66c?s=128&d=identicon&r=PG&f=1", "display_name": "Kush", "link": "https://stackoverflow.com/users/7132462/kush"}, "reply_to_user": {"reputation": 5519, "user_id": 938947, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/f611b152b4fa9fe2a05f4ee9b84fdcb7?s=128&d=identicon&r=PG", "display_name": "widjajayd", "link": "https://stackoverflow.com/users/938947/widjajayd"}, "edited": false, "score": 0, "creation_date": 1551891259, "post_id": 55028140, "comment_id": 96809224, "body": "@widjajayd added both models, thanks"}], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 7132462, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9543d1791ad5c02af8da3f765fd9b66c?s=128&d=identicon&r=PG&f=1", "display_name": "Kush", "link": "https://stackoverflow.com/users/7132462/kush"}, "edited": false, "score": 0, "creation_date": 1552303108, "post_id": 55041143, "comment_id": 96944216, "body": "Thanks @merehghost. I tried this but get a undefined error on the (or) part"}], "tags": [], "owner": {"reputation": 688, "user_id": 202613, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89806d4eddb1df26f1d75240011afa9d?s=128&d=identicon&r=PG", "display_name": "Mereghost", "link": "https://stackoverflow.com/users/202613/mereghost"}, "is_accepted": false, "score": 0, "last_activity_date": 1551953469, "creation_date": 1551953469, "answer_id": 55041143, "question_id": 55028140, "link": "https://stackoverflow.com/questions/55028140/show-results-depending-on-association/55041143#55041143", "title": "Show results depending on association", "body": "<p>If I understood you correctly, you want to show all requests that were made by the user or made for his real-state.</p>\n\n<p>The code below will create your initial filter, then you can call your <code>search</code> method over it.</p>\n\n<pre><code>Request.where(user_id: current_user.id).or(Request.where(house: { user_id: current_user.id}))\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 7132462, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9543d1791ad5c02af8da3f765fd9b66c?s=128&d=identicon&r=PG&f=1", "display_name": "Kush", "link": "https://stackoverflow.com/users/7132462/kush"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 28, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1551953469, "creation_date": 1551890579, "last_edit_date": 1551944246, "question_id": 55028140, "link": "https://stackoverflow.com/questions/55028140/show-results-depending-on-association", "title": "Show results depending on association", "body": "<p>I am building a landlord mgt application. But I am having an issue - I only want to index requests where the <code>house.id</code> (association value) matches the current user.</p>\n\n<p>Currently, I have got it to work depending if the user has created it. But I would like the landlord to see all requests that are related to their properties. </p>\n\n<p>requests_controller.rb:</p>\n\n<pre><code>def index\n  unless current_user.estate_agent?\n    @requests = Request.where(user_id: current_user).search(params[:search])\n  else\n    @requests = Request.search(params[:search])\n  end\nend\n</code></pre>\n\n<p>request.rb</p>\n\n<pre><code>class Request &lt; ActiveRecord::Base\n  belongs_to :user\n  belongs_to :house\n\n  def self.search(search)\n    key = \"%#{search}%\"\n    if search\n      where('description LIKE ? OR title LIKE ?', key, key)\n    else\n      all\n    end\n  end\nend\n</code></pre>\n\n<p>house.rb</p>\n\n<pre><code>class House &lt; ActiveRecord::Base\n  belongs_to :user\n  belongs_to :tenant\n  has_many :requests\n  belongs_to :contract\n\n  mount_uploader :energy, EnergyUploader\n\n  validates_presence_of :house_title, :description, :doorno, :postcode, :price, :bedroom, :house_type\n\n  def full_house_name\n   \"#{doorno} #{house_title}\"\n  end\n\n  def self.search(search)\n    key = \"%#{search}%\"\n    if search\n      where('doorno LIKE ? OR house_title LIKE ? OR price LIKE ? OR postcode LIKE ? OR house_type LIKE ? OR bedroom LIKE ?', key, key, key, key, key, key)\n    else\n      all\n    end\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "email", "rspec", "capybara"], "answers": [{"comments": [{"owner": {"reputation": 5735, "user_id": 269404, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/jHC9T.jpg?s=128&g=1", "display_name": "MintDeparture", "link": "https://stackoverflow.com/users/269404/mintdeparture"}, "edited": false, "score": 0, "creation_date": 1551960883, "post_id": 55030282, "comment_id": 96837818, "body": "That&#39;s brilliant thanks. And that gem suggestion is great too, I&#39;ll move over to that at some point."}], "tags": [], "owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "is_accepted": true, "score": 1, "last_activity_date": 1551898428, "creation_date": 1551898428, "answer_id": 55030282, "question_id": 55027890, "link": "https://stackoverflow.com/questions/55027890/rspec-capybara-fails-when-plain-text-email-templates-are-added-to-features-in/55030282#55030282", "title": "Rspec / capybara fails when plain text email templates are added to features in rails", "body": "<p>The email objects stored in <code>deliveries</code> should have the html and text parts available separately via <code>html_part</code> and <code>text_part</code>. So to look at the html only part you'd do something like</p>\n\n<pre><code>fragment = Nokogiri::HTML::fragment(last_email.html_part.body.to_s)\n</code></pre>\n\n<p>Note: Since you're using capybara there is a gem that can make this sort of testing/email link following easier called <code>capybara-email</code></p>\n"}], "owner": {"reputation": 5735, "user_id": 269404, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/jHC9T.jpg?s=128&g=1", "display_name": "MintDeparture", "link": "https://stackoverflow.com/users/269404/mintdeparture"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "accepted_answer_id": 55030282, "answer_count": 1, "score": 0, "last_activity_date": 1551898428, "creation_date": 1551889745, "question_id": 55027890, "link": "https://stackoverflow.com/questions/55027890/rspec-capybara-fails-when-plain-text-email-templates-are-added-to-features-in", "title": "Rspec / capybara fails when plain text email templates are added to features in rails", "body": "<p>I am testing a html email (<code>somemail.html.erb</code>) email in rails with the following code:</p>\n\n<pre><code>last_email = ActionMailer::Base.deliveries.last\nfragment = Nokogiri::HTML::fragment(last_email.body.raw_source)\nfragment.at_css('[id=\"some-id\"]').attr('href')\n</code></pre>\n\n<p>This looks for an link with an id in the code, and then get the url to follow it later in a test.</p>\n\n<p>However if I add a <code>somemail.text.erb</code> file the test suit breaks.</p>\n\n<p>How do I get the config on my test suit to look at the html email, or even better look at both emails? I have to currently move my text emails out the map to get the feature tests to run and pass.</p>\n"}, {"tags": ["ruby", "chef-infra", "chef-recipe", "chef-solo"], "answers": [{"tags": [], "owner": {"reputation": 162, "user_id": 3956630, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DzNBP.jpg?s=128&g=1", "display_name": "Yugendran", "link": "https://stackoverflow.com/users/3956630/yugendran"}, "is_accepted": false, "score": 0, "last_activity_date": 1552492893, "creation_date": 1552492893, "answer_id": 55146266, "question_id": 55027746, "link": "https://stackoverflow.com/questions/55027746/chef-guard-block-ruby-code-not-executed-at-run-time/55146266#55146266", "title": "Chef guard block ruby code not executed at run time", "body": "<p>Basically the issue is Chef doesn't wait for the state of the system post service resource execution. Chef doesn't bother if the service is up and running, it just cares about the execution of the service. </p>\n\n<p>It's a classic example of <strong>race condition</strong> with chef moving head to execute the next resource. To avoid this I had to introduce a desired sleep time in a ruby block. The other approach is to add a <code>until true</code> condition but that didn't work in my case as the ruby block in chef was stuck infinitely, though the service was up and running.</p>\n\n<pre><code>service 'openvpn' do\n   supports :status =&gt; true, :restart =&gt; true, :start =&gt; true, :stop =&gt; true\n   action :nothing\n   Chef::Log.info (\"\\n \\t *********Restarting OPEN-VPN*********\")\nend\n\n\nruby_block 'wait for vpn ip' do\n    block do\n        Chef::Log.warn (\"****************** Sleep block starts ********************\")\n        sleep 30\n        Chef::Log.warn (\"****************** Sleep block exits ********************\")\n    end \n    action :run\nend\n\nruby_block 'manual_vpn' do\nblock do\n    if node.run_state['error'] == \"file not found\"\n        Chef::Log.info (\"\\n \\t ******** VPN IP has not been assigned. File may be corrupted &amp; initiating re-run********\")\n        uri = URI.parse(\"http://some-url2=#{host}&amp;action=create\")\n        Chef::Log.info (uri)\n        http = Net::HTTP.new(uri.host,uri.port)\n        request = Net::HTTP::Get.new(uri.request_uri)\n        response = http.request(request)\n        case response.body\n        when \"error\"\n            Chef::Log.info (\"\\n \\t Website reported an Error. Config for the given serial number could have already been generated\")\n        when \"Request for vpn successfully added.\"  \n            Chef::Log.warn (\"\\n \\t **** Inside response processing =&gt; Request Accepted **\")\n            Chef::Log.warn (\"\\n \\t *** New vpn config request has been accepted. Waiting for 3 minutes ***\")\n            sleep 180\n        else\n            Chef::Log.info (\"\\n \\t Nothing to do - Extra option for future\")    \n        end \n    else \n        puts \"Config file exists and hence not downloading\"\n    end     \nend \nnotifies :run, 'ruby_block[re-download-vpn-conf]', :delayed\nonly_if { Socket.ip_address_list.select{ |ip| ip.ip_address.match(/^10.12/) }.size.eql?(0) }\nnot_if {node.run_state['error'].eql?(\"too many redirects\")}\nend  \n</code></pre>\n"}], "owner": {"reputation": 162, "user_id": 3956630, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DzNBP.jpg?s=128&g=1", "display_name": "Yugendran", "link": "https://stackoverflow.com/users/3956630/yugendran"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 523, "favorite_count": 2, "answer_count": 1, "score": 1, "last_activity_date": 1552492893, "creation_date": 1551889314, "last_edit_date": 1552009433, "question_id": 55027746, "link": "https://stackoverflow.com/questions/55027746/chef-guard-block-ruby-code-not-executed-at-run-time", "title": "Chef guard block ruby code not executed at run time", "body": "<p>According to Chef's two pass model any code inside ruby-block, guard blocks and lazy are executed only during run time.</p>\n\n<p>I have a recipe with three resources.</p>\n\n<p>Variables whose values are assigned during compile phase.</p>\n\n<pre><code>require 'socket'\nrequire 'down'\nrequire 'net/http'\n\nconf = `hostname`.chomp\nvpn_ip_list = Socket.ip_address_list.select{ |ip| ip.ip_address.match(/^10.12/) }\n!vpn_ip_list.empty? ? ip_addr = vpn_ip_list.first.ip_address : ip_addr = \"\"\n</code></pre>\n\n<p>1st resource - Checks if desired VPN IP address is assigned using code in guard block and if not assigned downloads the conf file and notifies 2nd service resource to restart openvpn. The values for variables inside guard block are obtained during compiled phase.</p>\n\n<pre><code>ruby_block 'download_openvpn_conf' do\nblock do \n    attempt = 2\n    begin\n        retries ||= 0\n        tempfile = Down.download(\"http://some-url1/#{conf}\",max_redirects: 0)\n        FileUtils.mv tempfile.path, \"#{node['openvpn-conf-path']}/#{tempfile.original_filename}\"\n        FileUtils.chmod 0644, \"#{node['openvpn-conf-path']}/#{tempfile.original_filename}\"\n    rescue Down::Error =&gt; e\n        node.run_state['error'] = e.to_s\n        puts e\n        Chef::Log.warn (\"\\n \\t ***********#{e}***********\")\n        retry if (retries += 1) &lt; 1\n    end \nend\nonly_if {vpn_ip_list.size.eql?(0) || vpn_ip_list.size &gt;= 2}\naction :run\nnotifies :restart, 'service[openvpn]', :immediately\nnotifies :delete, \"file[#{node['openvpn-conf-path']}/#{conf}]\", :before\nend\n</code></pre>\n\n<p>2nd resource - Restarts the openvpn service. By this time the VPN IP is assigned to system.</p>\n\n<pre><code>service 'openvpn' do\nsupports :status =&gt; true, :restart =&gt; true, :start =&gt; true, :stop =&gt; true\naction :nothing\nChef::Log.info (\"\\n \\t *********Restarting OPEN-VPN*********\")\nend\n</code></pre>\n\n<p>Since the above service is executed during the converge phase, the VPN ip address should have been assigned based on the downloaded configuration file. </p>\n\n<p>3rd resource - If the VPN IP is not assigned by the time of execution of 2nd resource, this places a request for new vpn conf file.</p>\n\n<pre><code>ruby_block 'manual_vpn' do\nblock do\n    if node.run_state['error'] == \"file not found\"\n        Chef::Log.info (\"\\n \\t ******** VPN IP has not been assigned. File may be corrupted &amp; initiating re-run********\")\n        uri = URI.parse(\"http://some-url2=#{host}&amp;action=create\")\n        Chef::Log.info (uri)\n        http = Net::HTTP.new(uri.host,uri.port)\n        request = Net::HTTP::Get.new(uri.request_uri)\n        response = http.request(request)\n        case response.body\n        when \"error\"\n            Chef::Log.info (\"\\n \\t Website reported an Error. Config for the given serial number could have already been generated\")\n        when \"Request for vpn successfully added.\"  \n            Chef::Log.warn (\"\\n \\t **** Inside response processing =&gt; Request Accepted **\")\n            Chef::Log.warn (\"\\n \\t *** New vpn config request has been accepted. Waiting for 3 minutes ***\")\n            sleep 180\n        else\n            Chef::Log.info (\"\\n \\t Nothing to do - Extra option for future\")    \n        end \n    else \n        puts \"Config file exists and hence not downloading\"\n    end     \nend \nnotifies :run, 'ruby_block[re-download-vpn-conf]', :delayed\nonly_if { Socket.ip_address_list.select{ |ip| ip.ip_address.match(/^10.12/) }.size.eql?(0) }\nnot_if {node.run_state['error'].eql?(\"too many redirects\")}\nend \n</code></pre>\n\n<p>The VPN IP assigned is checked by the code in guard block <code>only_if { Socket.ip_address_list.select{ |ip| ip.ip_address.match(/^10.12/) }.size.eql?(0) }</code> and is supposed to be executed only at run time. By the end of 2nd resource execution the VPN IP is assigned for sure but code inside the above guard could not detect it.</p>\n\n<p>I have used Pry debugger at the end of recipe within a test ruby block to verify that IP is assigned post the execution of 2nd service restart resource. Wondering why code inside the guard block of Chef is not able to detect the VPN assigned by the previous resource execution.</p>\n"}, {"tags": ["ruby", "recursion"], "comments": [{"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 1, "creation_date": 1551890173, "post_id": 55027514, "comment_id": 96808592, "body": "What should be the result if the array has 0 or 1 elements?"}], "answers": [{"tags": [], "owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "is_accepted": false, "score": 1, "last_activity_date": 1551902572, "last_edit_date": 1551902572, "creation_date": 1551890118, "answer_id": 55027990, "question_id": 55027514, "link": "https://stackoverflow.com/questions/55027514/ruby-deep-nested-hash-from-array/55027990#55027990", "title": "Ruby deep nested hash from array", "body": "<pre><code>items = [:a, :b, :c, :d, :e]\n\n# Iterative version\ndef hashify(items)\n  items = items.dup\n\n  result = items.pop\n  result = {items.pop =&gt; result} until items.empty?\n  result\nend\n\nhashify(items) # =&gt; {:a=&gt;{:b=&gt;{:c=&gt;{:d=&gt;:e}}}}\n\n# Recursive version\ndef hashify(items)\n  return items.last if items.size &lt; 2\n\n  *head, penultimate, last = items\n  hashify(head + [{penultimate =&gt; last}])\nend\n\nhashify(items) # =&gt; {:a=&gt;{:b=&gt;{:c=&gt;{:d=&gt;:e}}}}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "is_accepted": false, "score": 1, "last_activity_date": 1551890284, "creation_date": 1551890284, "answer_id": 55028040, "question_id": 55027514, "link": "https://stackoverflow.com/questions/55027514/ruby-deep-nested-hash-from-array/55028040#55028040", "title": "Ruby deep nested hash from array", "body": "<pre><code>array = [*:a..:e]\narray[0..-2].reverse.reduce(array[-1]) { |b, a| { a =&gt; b } }\n#  {:a=&gt;{:b=&gt;{:c=&gt;{:d=&gt;:e}}}}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": false, "score": 3, "last_activity_date": 1551890745, "creation_date": 1551890745, "answer_id": 55028191, "question_id": 55027514, "link": "https://stackoverflow.com/questions/55027514/ruby-deep-nested-hash-from-array/55028191#55028191", "title": "Ruby deep nested hash from array", "body": "<p>What <code>send</code> does is call <em>a</em> method, just one, with zero or more arguments. It can't call multiple methods at once. Your example here:</p>\n\n<pre><code>send(\"[:a][:b][:c][:d]=\", :e)\n</code></pre>\n\n<p>This is trying to call a method named, literally, <code>[:a][:b][:b][:d]=</code> which doesn't exist, so the <code>send</code> fails.</p>\n\n<p>Now this bit of actual Ruby code:</p>\n\n<pre><code>x[:a][:b][:c][:d] = :e\n</code></pre>\n\n<p>Becomes interpreted by Ruby as:</p>\n\n<pre><code>x.send(:[], :a).send(:[], :b).send(:[], :c).send(:[]=, :d, :e)\n</code></pre>\n\n<p>Which is just a really long, ugly way of doing what the original code did. The key here is that each <code>[...]</code> part represents a method call that returns something and then the next part is evaluated against that, or <em>chained on</em>.</p>\n\n<p>Now for the original part, this pretzel-stab:</p>\n\n<pre><code>super &amp;-&gt; h, k { h[k] = self.class.new }\n</code></pre>\n\n<p>The <code>&amp;</code> means \"pass through this Proc as a block argument\", as in for a method with the signature:</p>\n\n<pre><code>initialize(&amp;block)\n</code></pre>\n\n<p>Where <code>&amp;block</code> represents a block, if given, to that method, as in:</p>\n\n<pre><code>Hash.new { |h,k| h[k] = { } }\n</code></pre>\n\n<p>In a more basic implementation.</p>\n\n<p>The <code>-&gt; h, k { ... }</code> part is traditionally written as:</p>\n\n<pre><code>lambda { |h, k| ... }\n</code></pre>\n\n<p>Where that's probably more recognizable.</p>\n"}, {"tags": [], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "is_accepted": true, "score": 2, "last_activity_date": 1551945436, "creation_date": 1551945436, "answer_id": 55038723, "question_id": 55027514, "link": "https://stackoverflow.com/questions/55027514/ruby-deep-nested-hash-from-array/55038723#55038723", "title": "Ruby deep nested hash from array", "body": "<pre><code>[:a, :b, :c, :d, :e].reverse_each.inject{|h, k| {k =&gt; h}}\n# =&gt; {:a=&gt;{:b=&gt;{:c=&gt;{:d=&gt;:e}}}}\n</code></pre>\n"}], "owner": {"reputation": 1211, "user_id": 4483213, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4GN3P.jpg?s=128&g=1", "display_name": "JP Duffy", "link": "https://stackoverflow.com/users/4483213/jp-duffy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "accepted_answer_id": 55038723, "answer_count": 4, "score": 1, "last_activity_date": 1551945436, "creation_date": 1551888596, "last_edit_date": 1551891197, "question_id": 55027514, "link": "https://stackoverflow.com/questions/55027514/ruby-deep-nested-hash-from-array", "title": "Ruby deep nested hash from array", "body": "<p>I need to convert this array: </p>\n\n<pre><code>[:a, :b, :c, :d, :e]\n</code></pre>\n\n<p>Into this hash:</p>\n\n<pre><code>{:a=&gt;{:b=&gt;{:c=&gt;{:d=&gt;:e}}}}\n</code></pre>\n\n<p>Unfortunately, I'm missing the Recursion Lobe of the brain.  I found <a href=\"http://firedev.com/posts/2015/bottomless-ruby-hash/\" rel=\"nofollow noreferrer\">BottomlessHash</a></p>\n\n<pre class=\"lang-rb prettyprint-override\"><code># http://firedev.com/posts/2015/bottomless-ruby-hash/\nclass BottomlessHash &lt; Hash\n  def initialize\n    super &amp;-&gt; h, k { h[k] = self.class.new }\n  end\nend\n</code></pre>\n\n<p>While I'm struggling to understand the \"<a href=\"http://symbolhound.com/?q=ruby+%26-%3E\" rel=\"nofollow noreferrer\">pretzel stab</a>\", it does the trick if you write it out explicitly, </p>\n\n<pre><code>bhash = BottomlessHash.new\nbhash[:a][:b][:c][:d] = :e \nbhash # =&gt; {:a=&gt;{:b=&gt;{:c=&gt;{:d=&gt;:e}}}} \n</code></pre>\n\n<p>However I can't figure out a way to pass arbitrary values programmatically.</p>\n\n<p><code>store</code> doesn't work, nor does <code>send(\"[:a][:b][:c][:d]=\", :e)</code></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "inheritance", "controller", "pundit"], "answers": [{"tags": [], "owner": {"reputation": 376, "user_id": 629519, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f03cf0eca27051510b530e285244b9a?s=128&d=identicon&r=PG", "display_name": "seorc", "link": "https://stackoverflow.com/users/629519/seorc"}, "is_accepted": true, "score": 1, "last_activity_date": 1551891409, "last_edit_date": 1551891409, "creation_date": 1551889409, "answer_id": 55027784, "question_id": 55027235, "link": "https://stackoverflow.com/questions/55027235/punditnotauthorizederror-applicationpolicy-inheritance-doesnt-work/55027784#55027784", "title": "Pundit::NotAuthorizedError - ApplicationPolicy inheritance doesn&#39;t work", "body": "<p>You must define your policy methods out of RestaurantPolicy::Scope, like so:</p>\n\n<pre><code>class RestaurantPolicy &lt; ApplicationPolicy\n  class Scope &lt; Scope\n    def index?\n      true\n    end\n  end\n\n  # Notice we have closed the definition of Scope class.\n  def show?\n    scope.where(:id =&gt; record.id).exists?\n  end\n\n  def create?\n    true\n  end\n\n  def new?\n    create?\n  end\n\n  def update?\n    true\n  end\n\n  def edit?\n    update?\n  end\n\n  def destroy?\n    true\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 15, "user_id": 11101899, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33a3016846b328ba49fcd6fecc1e46da?s=128&d=identicon&r=PG&f=1", "display_name": "Julie", "link": "https://stackoverflow.com/users/11101899/julie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 474, "favorite_count": 1, "accepted_answer_id": 55027784, "answer_count": 1, "score": 0, "last_activity_date": 1551891409, "creation_date": 1551887792, "question_id": 55027235, "link": "https://stackoverflow.com/questions/55027235/punditnotauthorizederror-applicationpolicy-inheritance-doesnt-work", "title": "Pundit::NotAuthorizedError - ApplicationPolicy inheritance doesn&#39;t work", "body": "<p>I am installing pundit on my app. My RestaurantPolicy file inherits from the ApplicationPolicy one (which by default gives access to none of the methods). When changing the methods in RestaurantPolicy (from false to true) it seems to have no effect as I still have access to none of the methods. BUT when changing falses to trues in the ApplicationPolicy file...I have the accesses ! Any idea why methods in the RestaurantPolicy file do not override the ApplicationPolicy's ones ? Thank youuu!!</p>\n\n<p>application_controller.rb</p>\n\n<pre><code>class ApplicationController &lt; ActionController::Base\n  protect_from_forgery with: :exception\n  before_action :authenticate_user!\n  include Pundit\n\n  # Pundit: white-list approach.\n  after_action :verify_authorized, except: :index, unless: :skip_pundit?\n  after_action :verify_policy_scoped, only: :index, unless: :skip_pundit?\n\n  private\n\n  def skip_pundit?\n    devise_controller? || params[:controller] =~ /(^(rails_)?admin)|(^pages$)/\n  end\nend\n</code></pre>\n\n<p>restaurants_controller.rb</p>\n\n<pre><code>class RestaurantsController &lt; ApplicationController\n  before_action :set_restaurant, only: [:show, :edit, :update, :destroy]\n\n  def index\n    @restaurants = Restaurant.all\n    authorize @restaurants\n  end\n\n  def show\n  end\n\n  def new\n    @restaurant = Restaurant.new\n    authorize @restaurant\n  end\n\n\n  def edit\n  end\n\n\n  def create\n    @restaurant = Restaurant.new(restaurant_params)\n    @restaurant.user = current_user\n# OU :     @restaurant = current_user.restaurants.build(restaurant_params)\n\n\n    respond_to do |format|\n      if @restaurant.save\n        format.html { redirect_to @restaurant, notice: 'Restaurant was successfully created.' }\n        format.json { render :show, status: :created, location: @restaurant }\n      else\n        format.html { render :new }\n        format.json { render json: @restaurant.errors, status: :unprocessable_entity }\n      end\n    end\n  end\n\n  def update\n    respond_to do |format|\n      if @restaurant.update(restaurant_params)\n        format.html { redirect_to @restaurant, notice: 'Restaurant was successfully updated.' }\n        format.json { render :show, status: :ok, location: @restaurant }\n      else\n        format.html { render :edit }\n        format.json { render json: @restaurant.errors, status: :unprocessable_entity }\n      end\n    end\n  end\n\n  def destroy\n    @restaurant.destroy\n    respond_to do |format|\n      format.html { redirect_to restaurants_url, notice: 'Restaurant was successfully destroyed.' }\n      format.json { head :no_content }\n    end\n  end\n\n  private\n\n    def set_restaurant\n      @restaurant = Restaurant.find(params[:id])\n    end\n\n    def restaurant_params\n      params.require(:restaurant).permit(:name)\n    end\nend\n</code></pre>\n\n<p>restaurant.rb</p>\n\n<pre><code>class Restaurant &lt; ApplicationRecord\n  belongs_to :user\nend\n</code></pre>\n\n<p>user.rb</p>\n\n<pre><code>class User &lt; ApplicationRecord\n</code></pre>\n\n<p>devise :database_authenticatable, :registerable,\n         :recoverable, :rememberable, :validatable\n  has_many :restaurants\nend</p>\n\n<p>application_policy.rb</p>\n\n<pre><code>class ApplicationPolicy\n  attr_reader :user, :record\n\n  def initialize(user, record)\n    @user = user\n    @record = record\n  end\n\n  def index?\n    false\n  end\n\n  def show?\n    scope.where(:id =&gt; record.id).exists?\n  end\n\n  def create?\n    false\n  end\n\n  def new?\n    create?\n  end\n\n  def update?\n    false\n  end\n\n  def edit?\n    update?\n  end\n\n  def destroy?\n    false\n  end\n\n  def scope\n    Pundit.policy_scope!(user, record.class)\n  end\n\n  class Scope\n    attr_reader :user, :scope\n\n    def initialize(user, scope)\n      @user = user\n      @scope = scope\n    end\n\n    def resolve\n      scope\n    end\n  end\nend\n</code></pre>\n\n<p>restaurant_policy.rb</p>\n\n<pre><code>class RestaurantPolicy &lt; ApplicationPolicy\n  class Scope &lt; Scope\n    def index?\n      true\n    end\n\n    def show?\n      scope.where(:id =&gt; record.id).exists?\n    end\n\n    def create?\n      true\n    end\n\n    def new?\n      create?\n    end\n\n    def update?\n      true\n    end\n\n    def edit?\n      update?\n    end\n\n    def destroy?\n      true\n    end\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby", "rubygems", "bundler", "rhel7", "rhel6"], "comments": [{"owner": {"reputation": 2487, "user_id": 8098012, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0cbdb5ca9b079de1c9700271166feead?s=128&d=identicon&r=PG", "display_name": "Pavel Mikhailyuk", "link": "https://stackoverflow.com/users/8098012/pavel-mikhailyuk"}, "edited": false, "score": 0, "creation_date": 1552909581, "post_id": 55026856, "comment_id": 97176177, "body": "<code>--deployment</code> option has common neither with <code>--binstubs</code>, nor with <code>--without</code> ones. Its behavior is exactly described in <a href=\"https://bundler.io/man/bundle-install.1.html#DEPLOYMENT-MODE\" rel=\"nofollow noreferrer\">bundler.io/man/bundle-install.1.html#DEPLOYMENT-MODE</a>"}, {"owner": {"reputation": 2487, "user_id": 8098012, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0cbdb5ca9b079de1c9700271166feead?s=128&d=identicon&r=PG", "display_name": "Pavel Mikhailyuk", "link": "https://stackoverflow.com/users/8098012/pavel-mikhailyuk"}, "edited": false, "score": 1, "creation_date": 1552909719, "post_id": 55026856, "comment_id": 97176269, "body": "There is one insignificant moment about output color: <a href=\"https://github.com/bundler/bundler/blob/master/lib/bundler/cli/install.rb#L19\" rel=\"nofollow noreferrer\">github.com/bundler/bundler/blob/master/lib/bundler/cli/&hellip;</a>"}], "owner": {"reputation": 71199, "user_id": 1301972, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/T5G7N.jpg?s=128&g=1", "display_name": "Todd A. Jacobs", "link": "https://stackoverflow.com/users/1301972/todd-a-jacobs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 213, "favorite_count": 1, "answer_count": 0, "score": 5, "last_activity_date": 1552771046, "creation_date": 1551886675, "question_id": 55026856, "link": "https://stackoverflow.com/questions/55026856/why-use-bundle-deployment-instead-of-bundle-without", "title": "Why use &quot;bundle --deployment&quot; instead of &quot;bundle --without&quot;?", "body": "<h2>Background: <em>Not</em> the Question</h2>\n\n<p>I have a project that is running in both development and production in a chruby environment, where ruby-install was installed as root and rubies are stored in /opt/rubies. I have a really hard time (as many people do) getting nokogiri to compile its native extensions as part of a bundle, but it compiles fine as any chruby user outside of the project directory and so long as there are no binstubs. <strong>That's just background context; it's not really what my question is about.</strong></p>\n\n<h3>My Current Hack</h3>\n\n<p>I find that when I have committed binstubs to my project, all kinds of badness happens. So far, my best solution seems to be:</p>\n\n<pre><code># skip any bundled/binstub version of bundler\nrm -rf ./bin\n`which bundle` install --binstubs --without=\"development test\"\n</code></pre>\n\n<p>which seems to work just fine. Nokogiri is apparently not a production dependency (yay!) and the ./bin directory gets trimmed down to just the gems needed for production.</p>\n\n<h2>Question: Would the Bundler Deployment Flag Fix Anything?</h2>\n\n<p>So, here's the question: What's the difference between what I'm doing here, and <code>bundle install --deploy</code> with or without binstubs? I know it points to <em>vendor/bundle</em> instead of <em>bin</em> by default, but <a href=\"https://bundler.io/man/bundle-install.1.html\" rel=\"noreferrer\">the docs</a> don't really explain the pros and cons of this approach (at least not in a way that I'm understanding).</p>\n\n<p>Aside from knowledge, which is valuable for its own sake, I'd really like to vendor in production gems in a way that it's likely to work across systems (e.g. RHEL6 and RHEL7) without having to rebuild native extensions or strip out development/test gems on production machines.</p>\n\n<p>Is the deployment flag the answer? Or is there a better way to vendor gems with native extensions for cross-distro projects?</p>\n"}, {"tags": ["java", "ruby-on-rails", "ruby", "jruby"], "answers": [{"tags": [], "owner": {"reputation": 6788, "user_id": 454312, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jNMNF.jpg?s=128&g=1", "display_name": "kares", "link": "https://stackoverflow.com/users/454312/kares"}, "is_accepted": true, "score": 1, "last_activity_date": 1551946209, "creation_date": 1551946209, "answer_id": 55038913, "question_id": 55025969, "link": "https://stackoverflow.com/questions/55025969/how-can-i-use-java-util-properties-in-jruby/55038913#55038913", "title": "How can I use java.util.properties in jruby?", "body": "<p>treat the <code>java.util.Properties</code> Java class like a Ruby one (all of its <a href=\"https://docs.oracle.com/javase/7/docs/api/java/util/Properties.html\" rel=\"nofollow noreferrer\">API</a> methods are available)</p>\n\n<p>also if you look at the docs <code>Properties extends Hashtable</code> and <a href=\"https://docs.oracle.com/javase/7/docs/api/java/util/Hashtable.html\" rel=\"nofollow noreferrer\">Hashtable</a> is a (implements) <code>Map</code>. </p>\n\n<p>JRuby provides extension for all map types to act very much like a Ruby <code>Hash</code>.</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>properties = java.util.Properties.new\nproperties.put 'a.ssl.key', 'A-VALUE' # Java style (put inherited from Hashtable)\nproperties['another.ssl.key'] = 'ANOTHER' # Ruby Hash style\n</code></pre>\n"}], "owner": {"reputation": 153, "user_id": 3956692, "user_type": "registered", "accept_rate": 86, "profile_image": "https://graph.facebook.com/720397335/picture?type=large", "display_name": "Joshua Hedges", "link": "https://stackoverflow.com/users/3956692/joshua-hedges"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 101, "favorite_count": 0, "accepted_answer_id": 55038913, "answer_count": 1, "score": 0, "last_activity_date": 1551946209, "creation_date": 1551884063, "last_edit_date": 1551914162, "question_id": 55025969, "link": "https://stackoverflow.com/questions/55025969/how-can-i-use-java-util-properties-in-jruby", "title": "How can I use java.util.properties in jruby?", "body": "<p>I'm working with a class provided on this site:<a href=\"https://www.oracle.com/technetwork/articles/dsl/jruby-oracle11g-330825.html\" rel=\"nofollow noreferrer\">https://www.oracle.com/technetwork/articles/dsl/jruby-oracle11g-330825.html</a></p>\n\n<p>I'm setting up SSL and I need to pass a list of java.util.properties to Driver manager.</p>\n\n<p>I figure I do something like this...</p>\n\n<pre><code># jdbc_connection.rb\n\nrequire 'java'\n\njava_import 'oracle.jdbc.OracleDriver'\njava_import 'java.sql.DriverManager'\njava_import 'java.util.Properties' #&lt;---Import here\n\nclass OracleConnection\n\n  @conn = nil\n\n  def initialize (url)\n    @url = url\n    #I want to create the array of properties here and populate it with my SSL properties. I'm really lost here.\n\n    # Load driver class\n    oradriver = OracleDriver.new\n\n    DriverManager.registerDriver oradriver\n    #I want to pass the Properties to DriverManager.\n    @conn = DriverManager.get_connection url, properties \n    @conn.auto_commit = false\n\n  end\n</code></pre>\n\n<p>I'm hung up on how to create the properties in ruby and pass them. Any ideas?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rubygems", "ruby-on-rails-5", "rails-activestorage"], "comments": [{"owner": {"reputation": 18203, "user_id": 100731, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/056c32203f8017f075ac060069823b66?s=128&d=identicon&r=PG", "display_name": "phoet", "link": "https://stackoverflow.com/users/100731/phoet"}, "edited": false, "score": 0, "creation_date": 1551886698, "post_id": 55025646, "comment_id": 96806419, "body": "look into your logs and post the complete stacktrace. here is an article that describes multiple debugging techniques to use in development <a href=\"http://nofail.de/2013/10/debugging-rails-applications-in-development/\" rel=\"nofollow noreferrer\">nofail.de/2013/10/debugging-rails-applications-in-developmen&zwnj;&#8203;t</a>"}, {"owner": {"reputation": 808, "user_id": 496517, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/091bc95204caaf52b0d299bd9ac59540?s=128&d=identicon&r=PG", "display_name": "Mason Stewart", "link": "https://stackoverflow.com/users/496517/mason-stewart"}, "edited": false, "score": 0, "creation_date": 1551918483, "post_id": 55025646, "comment_id": 96820975, "body": "These two actions look relatively normal, except that you probably don&#39;t need both a <code>create!</code> and a <code>save</code> in the <code>create</code> action. Can you share the <code>Treatment</code> model and its definition in schema.rb?"}, {"owner": {"reputation": 53, "user_id": 10528295, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JsehK.jpg?s=128&g=1", "display_name": "Josh", "link": "https://stackoverflow.com/users/10528295/josh"}, "reply_to_user": {"reputation": 18203, "user_id": 100731, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/056c32203f8017f075ac060069823b66?s=128&d=identicon&r=PG", "display_name": "phoet", "link": "https://stackoverflow.com/users/100731/phoet"}, "edited": false, "score": 0, "creation_date": 1551955041, "post_id": 55025646, "comment_id": 96834221, "body": "Thanks @phoet that&#39;s a useful article! I have added the trace above."}, {"owner": {"reputation": 53, "user_id": 10528295, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JsehK.jpg?s=128&g=1", "display_name": "Josh", "link": "https://stackoverflow.com/users/10528295/josh"}, "reply_to_user": {"reputation": 808, "user_id": 496517, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/091bc95204caaf52b0d299bd9ac59540?s=128&d=identicon&r=PG", "display_name": "Mason Stewart", "link": "https://stackoverflow.com/users/496517/mason-stewart"}, "edited": false, "score": 0, "creation_date": 1551955056, "post_id": 55025646, "comment_id": 96834231, "body": "And the model and schema @Masondesu"}], "answers": [{"tags": [], "owner": {"reputation": 53, "user_id": 10528295, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JsehK.jpg?s=128&g=1", "display_name": "Josh", "link": "https://stackoverflow.com/users/10528295/josh"}, "is_accepted": false, "score": 0, "last_activity_date": 1552055454, "creation_date": 1552055454, "answer_id": 55065289, "question_id": 55025646, "link": "https://stackoverflow.com/questions/55025646/rails-unable-to-create-a-global-id-for-model-without-a-model-id/55065289#55065289", "title": "Rails: Unable to create a Global ID for Model without a model id", "body": "<p>After realising that the app is in Rails 5.1.6, I decided to get rid of Active Storage in favour of the Paperclip gem. The error is no more!</p>\n"}], "owner": {"reputation": 53, "user_id": 10528295, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JsehK.jpg?s=128&g=1", "display_name": "Josh", "link": "https://stackoverflow.com/users/10528295/josh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 918, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1552055454, "creation_date": 1551883116, "last_edit_date": 1592644375, "question_id": 55025646, "link": "https://stackoverflow.com/questions/55025646/rails-unable-to-create-a-global-id-for-model-without-a-model-id", "title": "Rails: Unable to create a Global ID for Model without a model id", "body": "<p>I am getting the following error from a Rails app:</p>\n<blockquote>\n<p>URI::GID::MissingModelIdError in Treatment</p>\n<p>Unable to create a Global ID for Treatment without a model id.</p>\n</blockquote>\n<pre><code>globalid (0.4.1) lib/global_id/uri/gid.rb:167:in `validate_model_id'\nglobalid (0.4.1) lib/global_id/uri/gid.rb:151:in `set_model_components'\nglobalid (0.4.1) lib/global_id/uri/gid.rb:136:in `check_path'\n/Users/josh/.asdf/installs/ruby/2.5.1/lib/ruby/2.5.0/uri/generic.rb:819:in `path='\n/Users/josh/.asdf/installs/ruby/2.5.1/lib/ruby/2.5.0/uri/generic.rb:193:in `initialize'\n/Users/josh/.asdf/installs/ruby/2.5.1/lib/ruby/2.5.0/uri/generic.rb:138:in `new'\n/Users/josh/.asdf/installs/ruby/2.5.1/lib/ruby/2.5.0/uri/generic.rb:138:in `build'\nglobalid (0.4.1) lib/global_id/uri/gid.rb:92:in `build'\nglobalid (0.4.1) lib/global_id/uri/gid.rb:68:in `create'\nglobalid (0.4.1) lib/global_id/global_id.rb:15:in `create'\nglobalid (0.4.1) lib/global_id/identification.rb:8:in `to_global_id'\nactivestorage (0.1) lib/active_storage/attached/one.rb:5:in `attachment'\nactivestorage (0.1) lib/active_storage/attached/one.rb:13:in `attached?'\napp/views/treatments/_form.html.erb:52:in `block in _app_views_treatments__form_html_erb___357661333339907035_70285432864960'\nactionview (5.1.6) lib/action_view/helpers/capture_helper.rb:39:in `block in capture'\nactionview (5.1.6) lib/action_view/helpers/capture_helper.rb:203:in `with_output_buffer'\nactionview (5.1.6) lib/action_view/helpers/capture_helper.rb:39:in `capture'\nactionview (5.1.6) lib/action_view/helpers/form_helper.rb:450:in `form_for'\napp/views/treatments/_form.html.erb:1:in `_app_views_treatments__form_html_erb___357661333339907035_70285432864960'\nactionview (5.1.6) lib/action_view/template.rb:157:in `block in render'\nactivesupport (5.1.6) lib/active_support/notifications.rb:168:in `instrument'\nactionview (5.1.6) lib/action_view/template.rb:352:in `instrument_render_template'\nactionview (5.1.6) lib/action_view/template.rb:155:in `render'\nactionview (5.1.6) lib/action_view/renderer/partial_renderer.rb:342:in `block in render_partial'\nactionview (5.1.6) lib/action_view/renderer/abstract_renderer.rb:42:in `block in instrument'\nactivesupport (5.1.6) lib/active_support/notifications.rb:166:in `block in instrument'\nactivesupport (5.1.6) lib/active_support/notifications/instrumenter.rb:21:in `instrument'\nactivesupport (5.1.6) lib/active_support/notifications.rb:166:in `instrument'\nactionview (5.1.6) lib/action_view/renderer/abstract_renderer.rb:41:in `instrument'\nactionview (5.1.6) lib/action_view/renderer/partial_renderer.rb:331:in `render_partial'\nactionview (5.1.6) lib/action_view/renderer/partial_renderer.rb:310:in `render'\nactionview (5.1.6) lib/action_view/renderer/renderer.rb:47:in `render_partial'\nactionview (5.1.6) lib/action_view/helpers/rendering_helper.rb:35:in `render'\napp/views/treatments/new.html.erb:42:in `_app_views_treatments_new_html_erb___2682657173693281074_70285432951520'\nactionview (5.1.6) lib/action_view/template.rb:157:in `block in render'\nactivesupport (5.1.6) lib/active_support/notifications.rb:168:in `instrument'\nactionview (5.1.6) lib/action_view/template.rb:352:in `instrument_render_template'\nactionview (5.1.6) lib/action_view/template.rb:155:in `render'\nactionview (5.1.6) lib/action_view/renderer/template_renderer.rb:52:in `block (2 levels) in render_template'\nactionview (5.1.6) lib/action_view/renderer/abstract_renderer.rb:42:in `block in instrument'\nactivesupport (5.1.6) lib/active_support/notifications.rb:166:in `block in instrument'\nactivesupport (5.1.6) lib/active_support/notifications/instrumenter.rb:21:in `instrument'\nactivesupport (5.1.6) lib/active_support/notifications.rb:166:in `instrument'\nactionview (5.1.6) lib/action_view/renderer/abstract_renderer.rb:41:in `instrument'\nactionview (5.1.6) lib/action_view/renderer/template_renderer.rb:51:in `block in render_template'\nactionview (5.1.6) lib/action_view/renderer/template_renderer.rb:59:in `render_with_layout'\nactionview (5.1.6) lib/action_view/renderer/template_renderer.rb:50:in `render_template'\nactionview (5.1.6) lib/action_view/renderer/template_renderer.rb:14:in `render'\nactionview (5.1.6) lib/action_view/renderer/renderer.rb:42:in `render_template'\nactionview (5.1.6) lib/action_view/renderer/renderer.rb:23:in `render'\nactionview (5.1.6) lib/action_view/rendering.rb:103:in `_render_template'\nactionpack (5.1.6) lib/action_controller/metal/streaming.rb:217:in `_render_template'\nactionview (5.1.6) lib/action_view/rendering.rb:83:in `render_to_body'\nactionpack (5.1.6) lib/action_controller/metal/rendering.rb:52:in `render_to_body'\nactionpack (5.1.6) lib/action_controller/metal/renderers.rb:141:in `render_to_body'\nactionpack (5.1.6) lib/abstract_controller/rendering.rb:24:in `render'\nactionpack (5.1.6) lib/action_controller/metal/rendering.rb:36:in `render'\nactionpack (5.1.6) lib/action_controller/metal/instrumentation.rb:44:in `block (2 levels) in render'\nactivesupport (5.1.6) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'\n/Users/josh/.asdf/installs/ruby/2.5.1/lib/ruby/2.5.0/benchmark.rb:308:in `realtime'\nactivesupport (5.1.6) lib/active_support/core_ext/benchmark.rb:12:in `ms'\nactionpack (5.1.6) lib/action_controller/metal/instrumentation.rb:44:in `block in render'\nactionpack (5.1.6) lib/action_controller/metal/instrumentation.rb:87:in `cleanup_view_runtime'\nactiverecord (5.1.6) lib/active_record/railties/controller_runtime.rb:29:in `cleanup_view_runtime'\nactionpack (5.1.6) lib/action_controller/metal/instrumentation.rb:43:in `render'\nactionpack (5.1.6) lib/action_controller/metal/implicit_render.rb:33:in `default_render'\nactionpack (5.1.6) lib/action_controller/metal/basic_implicit_render.rb:4:in `block in send_action'\nactionpack (5.1.6) lib/action_controller/metal/basic_implicit_render.rb:4:in `tap'\nactionpack (5.1.6) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'\nactionpack (5.1.6) lib/abstract_controller/base.rb:186:in `process_action'\nactionpack (5.1.6) lib/action_controller/metal/rendering.rb:30:in `process_action'\nactionpack (5.1.6) lib/abstract_controller/callbacks.rb:20:in `block in process_action'\nactivesupport (5.1.6) lib/active_support/callbacks.rb:131:in `run_callbacks'\nactionpack (5.1.6) lib/abstract_controller/callbacks.rb:19:in `process_action'\nactionpack (5.1.6) lib/action_controller/metal/rescue.rb:20:in `process_action'\nactionpack (5.1.6) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'\nactivesupport (5.1.6) lib/active_support/notifications.rb:166:in `block in instrument'\nactivesupport (5.1.6) lib/active_support/notifications/instrumenter.rb:21:in `instrument'\nactivesupport (5.1.6) lib/active_support/notifications.rb:166:in `instrument'\nactionpack (5.1.6) lib/action_controller/metal/instrumentation.rb:30:in `process_action'\nactionpack (5.1.6) lib/action_controller/metal/params_wrapper.rb:252:in `process_action'\nactiverecord (5.1.6) lib/active_record/railties/controller_runtime.rb:22:in `process_action'\nactionpack (5.1.6) lib/abstract_controller/base.rb:124:in `process'\nactionview (5.1.6) lib/action_view/rendering.rb:30:in `process'\nactionpack (5.1.6) lib/action_controller/metal.rb:189:in `dispatch'\nactionpack (5.1.6) lib/action_controller/metal.rb:253:in `dispatch'\nactionpack (5.1.6) lib/action_dispatch/routing/route_set.rb:49:in `dispatch'\nactionpack (5.1.6) lib/action_dispatch/routing/route_set.rb:31:in `serve'\nactionpack (5.1.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'\nactionpack (5.1.6) lib/action_dispatch/journey/router.rb:33:in `each'\nactionpack (5.1.6) lib/action_dispatch/journey/router.rb:33:in `serve'\nactionpack (5.1.6) lib/action_dispatch/routing/route_set.rb:844:in `call'\nwarden (1.2.7) lib/warden/manager.rb:36:in `block in call'\nwarden (1.2.7) lib/warden/manager.rb:35:in `catch'\nwarden (1.2.7) lib/warden/manager.rb:35:in `call'\nrack (2.0.5) lib/rack/etag.rb:25:in `call'\nrack (2.0.5) lib/rack/conditional_get.rb:25:in `call'\nrack (2.0.5) lib/rack/head.rb:12:in `call'\nrack (2.0.5) lib/rack/session/abstract/id.rb:232:in `context'\nrack (2.0.5) lib/rack/session/abstract/id.rb:226:in `call'\nactionpack (5.1.6) lib/action_dispatch/middleware/cookies.rb:613:in `call'\nactiverecord (5.1.6) lib/active_record/migration.rb:556:in `call'\nactionpack (5.1.6) lib/action_dispatch/middleware/callbacks.rb:26:in `block in call'\nactivesupport (5.1.6) lib/active_support/callbacks.rb:97:in `run_callbacks'\nactionpack (5.1.6) lib/action_dispatch/middleware/callbacks.rb:24:in `call'\nactionpack (5.1.6) lib/action_dispatch/middleware/executor.rb:12:in `call'\nactionpack (5.1.6) lib/action_dispatch/middleware/debug_exceptions.rb:59:in `call'\nweb-console (3.7.0) lib/web_console/middleware.rb:135:in `call_app'\nweb-console (3.7.0) lib/web_console/middleware.rb:30:in `block in call'\nweb-console (3.7.0) lib/web_console/middleware.rb:20:in `catch'\nweb-console (3.7.0) lib/web_console/middleware.rb:20:in `call'\nactionpack (5.1.6) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'\nrailties (5.1.6) lib/rails/rack/logger.rb:36:in `call_app'\nrailties (5.1.6) lib/rails/rack/logger.rb:24:in `block in call'\nactivesupport (5.1.6) lib/active_support/tagged_logging.rb:69:in `block in tagged'\nactivesupport (5.1.6) lib/active_support/tagged_logging.rb:26:in `tagged'\nactivesupport (5.1.6) lib/active_support/tagged_logging.rb:69:in `tagged'\nrailties (5.1.6) lib/rails/rack/logger.rb:24:in `call'\nsprockets-rails (3.2.1) lib/sprockets/rails/quiet_assets.rb:13:in `call'\nactionpack (5.1.6) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'\nactionpack (5.1.6) lib/action_dispatch/middleware/request_id.rb:25:in `call'\nrack (2.0.5) lib/rack/method_override.rb:22:in `call'\nrack (2.0.5) lib/rack/runtime.rb:22:in `call'\nactivesupport (5.1.6) lib/active_support/cache/strategy/local_cache_middleware.rb:27:in `call'\nactionpack (5.1.6) lib/action_dispatch/middleware/executor.rb:12:in `call'\nactionpack (5.1.6) lib/action_dispatch/middleware/static.rb:125:in `call'\nrack (2.0.5) lib/rack/sendfile.rb:111:in `call'\nrailties (5.1.6) lib/rails/engine.rb:522:in `call'\npuma (3.12.0) lib/puma/configuration.rb:225:in `call'\npuma (3.12.0) lib/puma/server.rb:658:in `handle_request'\npuma (3.12.0) lib/puma/server.rb:472:in `process_client'\npuma (3.12.0) lib/puma/server.rb:332:in `block in run'\npuma (3.12.0) lib/puma/thread_pool.rb:133:in `block in spawn_thread'\n</code></pre>\n<p>I am getting this error when I try to load either the <code>new</code> or <code>create</code> method.</p>\n<pre><code>def new\n    @treatment = Treatment.new\nend\n\ndef create\n    @treatment = Treatment.create!(treatment_params)\n\n    if @treatment.save\n        redirect_to root_path, notice: &quot;Treatment added successfully&quot;\n    else\n        render 'new', notice: &quot;Oh no, Zuber u silly man!&quot;\n    end\nend\n</code></pre>\n<p>The error is generated by the Global ID gem</p>\n<p>Seems to be a problem with the <code>@treatment</code> variable. When trying to use this in the view I get the error, but also when trying to save the data to the database.</p>\n<p>The model looks like this (not sure why there are 6 separate images rather than many):</p>\n<pre><code>class Treatment &lt; ApplicationRecord\n    extend FriendlyId\n    friendly_id :link, use: :slugged\n    \n    validates :speciality,:link,:price,:duration,:image, presence: true\n    validates :content, presence: true, length: { minimum: 15}\n\n    has_one_attached :image\n    has_one_attached :image1\n    has_one_attached :image2\n    has_one_attached :image3\n    has_one_attached :image4\n    has_one_attached :image5\n    has_one_attached :image6\n\nend\n</code></pre>\n<p>And the schema:</p>\n<pre><code>create_table &quot;treatments&quot;, force: :cascade do |t|\n    t.string &quot;category&quot;\n    t.string &quot;speciality&quot;\n    t.text &quot;content&quot;\n    t.integer &quot;price&quot;\n    t.string &quot;duration&quot;\n    t.string &quot;link&quot;\n    t.string &quot;image&quot;\n    t.string &quot;image1&quot;\n    t.string &quot;image2&quot;\n    t.string &quot;image3&quot;\n    t.string &quot;image4&quot;\n    t.string &quot;image5&quot;\n    t.string &quot;image6&quot;\n    t.datetime &quot;created_at&quot;, null: false\n    t.datetime &quot;updated_at&quot;, null: false\n    t.string &quot;slug&quot;\n    t.index [&quot;slug&quot;], name: &quot;index_treatments_on_slug&quot;, unique: true\n  end\n</code></pre>\n<p>I'm pretty new to Rails and am looking at this on behalf of a friend who is even newer, and I don't know what he may or may not have done previously to cause the error.</p>\n<p>I hope someone can help, after a couple of hours of searching I couldn't find anything helpful.</p>\n<p>Thanks!</p>\n<hr />\n<p>EDIT:</p>\n<p>I think this is something to do with Active Storage, as if I try to use <code>@treatments.image.attached?</code> in the view I get an error, but if just <code>@treatments.image</code> is used there is no error.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "sqlite", "search"], "comments": [{"owner": {"reputation": 31, "user_id": 7132462, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9543d1791ad5c02af8da3f765fd9b66c?s=128&d=identicon&r=PG&f=1", "display_name": "Kush", "link": "https://stackoverflow.com/users/7132462/kush"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1551881092, "post_id": 55024277, "comment_id": 96802846, "body": "@sawa i would like to know the correct syntax to carry out this search between the 2 date fields"}, {"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1551882062, "post_id": 55024277, "comment_id": 96803410, "body": "Where does <code>date_from</code> and <code>date_to</code> actually come from? Are both instances of <code>Time</code>, <code>Date</code> or just <code>String</code>?"}, {"owner": {"reputation": 31, "user_id": 7132462, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9543d1791ad5c02af8da3f765fd9b66c?s=128&d=identicon&r=PG&f=1", "display_name": "Kush", "link": "https://stackoverflow.com/users/7132462/kush"}, "reply_to_user": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1551885096, "post_id": 55024277, "comment_id": 96805393, "body": "they are datetime field types just created for purpose of search form. @spickermann"}, {"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1551885716, "post_id": 55024277, "comment_id": 96805811, "body": "Can you share the log entries for one example request? Especially the parameters coming in from the browser and the SQL query string generated by Rails?"}], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 7132462, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9543d1791ad5c02af8da3f765fd9b66c?s=128&d=identicon&r=PG&f=1", "display_name": "Kush", "link": "https://stackoverflow.com/users/7132462/kush"}, "edited": false, "score": 0, "creation_date": 1551879739, "post_id": 55024310, "comment_id": 96802006, "body": "Thank you but i get errors on both. For the first one i get an issue with the :: and the second one it does not regcongize beginning_of_day and end_of_day. When i remove these i get NO errors but no results are displaying."}, {"owner": {"reputation": 31, "user_id": 7132462, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9543d1791ad5c02af8da3f765fd9b66c?s=128&d=identicon&r=PG&f=1", "display_name": "Kush", "link": "https://stackoverflow.com/users/7132462/kush"}, "edited": false, "score": 0, "creation_date": 1551879959, "post_id": 55024310, "comment_id": 96802127, "body": "I can also confirm they are both date fields. Thanks"}, {"owner": {"reputation": 5669, "user_id": 7429104, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/TZAPt.jpg?s=128&g=1", "display_name": "Aman", "link": "https://stackoverflow.com/users/7429104/aman"}, "reply_to_user": {"reputation": 31, "user_id": 7132462, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9543d1791ad5c02af8da3f765fd9b66c?s=128&d=identicon&r=PG&f=1", "display_name": "Kush", "link": "https://stackoverflow.com/users/7132462/kush"}, "edited": false, "score": 0, "creation_date": 1551882424, "post_id": 55024310, "comment_id": 96803631, "body": "@kush can you show how do you form date_to and date _from?"}, {"owner": {"reputation": 31, "user_id": 7132462, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9543d1791ad5c02af8da3f765fd9b66c?s=128&d=identicon&r=PG&f=1", "display_name": "Kush", "link": "https://stackoverflow.com/users/7132462/kush"}, "edited": false, "score": 0, "creation_date": 1551884957, "post_id": 55024310, "comment_id": 96805304, "body": "sure i will update the question with full syntax thanks @gabbar"}, {"owner": {"reputation": 5669, "user_id": 7429104, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/TZAPt.jpg?s=128&g=1", "display_name": "Aman", "link": "https://stackoverflow.com/users/7429104/aman"}, "reply_to_user": {"reputation": 31, "user_id": 7132462, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9543d1791ad5c02af8da3f765fd9b66c?s=128&d=identicon&r=PG&f=1", "display_name": "Kush", "link": "https://stackoverflow.com/users/7132462/kush"}, "edited": false, "score": 0, "creation_date": 1551934379, "post_id": 55024310, "comment_id": 96824555, "body": "@Kush Still i can&#39;t see how did you form <code>date_from</code>  and <code>date_to </code>  ? from where this is coming?"}], "tags": [], "owner": {"reputation": 5669, "user_id": 7429104, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/TZAPt.jpg?s=128&g=1", "display_name": "Aman", "link": "https://stackoverflow.com/users/7429104/aman"}, "is_accepted": false, "score": 0, "last_activity_date": 1551879387, "last_edit_date": 1551879387, "creation_date": 1551879062, "answer_id": 55024310, "question_id": 55024277, "link": "https://stackoverflow.com/questions/55024277/search-between-2-dates/55024310#55024310", "title": "Search between 2 dates", "body": "<p>Make sure <code>date_from</code> and <code>date_to</code> are <code>date</code> type otherwise convert it inito date</p>\n\n<pre><code>#date_to = date_to.to_date\n#date_from =  date_from.to_date\n</code></pre>\n\n<p>Query -</p>\n\n<pre><code>requests = requests.where(\"created_at::date &gt;= ? AND completed_at::date &lt; ?\", date_from, date_to)\n</code></pre>\n\n<p>Or</p>\n\n<pre><code>requests = requests.where(\"created_at &gt;= ? AND completed_at &lt; ?\", date_from.beginning_of_day, date_to.end_of_day)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 5961654, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-ImmciBBtjlc/AAAAAAAAAAI/AAAAAAAAGrE/qnNYYzJ3b6A/photo.jpg?sz=128", "display_name": "Pratham Sharma", "link": "https://stackoverflow.com/users/5961654/pratham-sharma"}, "is_accepted": false, "score": 0, "last_activity_date": 1551894841, "creation_date": 1551894841, "answer_id": 55029389, "question_id": 55024277, "link": "https://stackoverflow.com/questions/55024277/search-between-2-dates/55029389#55029389", "title": "Search between 2 dates", "body": "<p>You can typecast the dates to <code>date</code> format and use as follows:</p>\n\n<pre><code>requests = requests.where(\"DATE(created_at) &gt; ? AND DATE(completed_at) &lt; ?\", date_from, date_to)\n</code></pre>\n\n<p>it triggers like this on-rails console,</p>\n\n<pre><code>Request Load (1.9ms)  SELECT \"requests\".* FROM \"requests\" WHERE (DATE(created_at) &gt; '2019-03-03' AND DATE(completed_at) &lt; '2019-03-09')\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 7132462, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9543d1791ad5c02af8da3f765fd9b66c?s=128&d=identicon&r=PG&f=1", "display_name": "Kush", "link": "https://stackoverflow.com/users/7132462/kush"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 65, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1551894841, "creation_date": 1551878976, "last_edit_date": 1551885052, "question_id": 55024277, "link": "https://stackoverflow.com/questions/55024277/search-between-2-dates", "title": "Search between 2 dates", "body": "<p>I am trying to do a search between 2 dates. I have created an advanced search form with 2 fields, <code>date_from</code> and <code>date_to</code>. I want to use these fields to search between the dates ranges of created_at &amp; completed_at.</p>\n\n<p>I wrote a query but I get blank result (no entries) with it:</p>\n\n<pre><code>def search_requests\nrequests = Request.all\n\nrequests = requests.where(\"created_at &gt; ? AND completed_at &lt; ?\", date_from, date_to)\nrequests = requests.where([\"title LIKE ? OR description LIKE ?\", \"%#{keywords}%\", \"%#{keywords}%\"]) if keywords.present?\nrequests = requests.where([\"incomplete LIKE ?\", incomplete]) if incomplete.present?\n\nreturn requests\nend\n</code></pre>\n"}, {"tags": ["ruby", "sinatra"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1551882599, "post_id": 55023799, "comment_id": 96803729, "body": "<i>&quot;I&#39;ve tried a few things&quot;</i> \u2013 show your code (the one on the other end), so we know what&#39;s wrong. You probably don&#39;t want a Sinatra tutorial as an answer :-)"}, {"owner": {"user_type": "does_not_exist", "display_name": "user9485690"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1551896807, "post_id": 55023799, "comment_id": 96812321, "body": "Edited. Thanks for the tip. :) I&#39;m new here."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user9485690"}, "edited": false, "score": 0, "creation_date": 1551897359, "post_id": 55026795, "comment_id": 96812579, "body": "I do indeed have a webserver on the other end, I&#39;m just not sure how to access the passed hash.   Thank you for your response, though. :)"}], "tags": [], "owner": {"reputation": 18203, "user_id": 100731, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/056c32203f8017f075ac060069823b66?s=128&d=identicon&r=PG", "display_name": "phoet", "link": "https://stackoverflow.com/users/100731/phoet"}, "is_accepted": false, "score": 0, "last_activity_date": 1551886492, "creation_date": 1551886492, "answer_id": 55026795, "question_id": 55023799, "link": "https://stackoverflow.com/questions/55023799/how-to-read-data-sent-by-httparty-in-sinatra/55026795#55026795", "title": "How to read data sent by HTTParty in Sinatra", "body": "<p>if you want to post data via HTTP you need a web-server on the receiving end.</p>\n\n<p>sinatra describes itself as <code>Sinatra is a DSL for quickly creating web applications in Ruby with minimal effort</code></p>\n\n<p>so in itself it is not a webserver, but it can be run through a webserver to process the data that you post via HTTP. it is bundled with a webserver, so you can start it right away.</p>\n\n<p>if you look at the sinatra <a href=\"http://sinatrarb.com/intro.html\" rel=\"nofollow noreferrer\">README</a> it says</p>\n\n<blockquote>\n  <p>It is recommended to also run gem install thin, which Sinatra will pick up if available.</p>\n</blockquote>\n\n<p>thin is a reliable webserver that is recommended to run sinatra web applications.</p>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user9485690"}, "edited": false, "score": 0, "creation_date": 1551962845, "post_id": 55031119, "comment_id": 96838954, "body": "Thank you so much. I was missing the <code>body:</code> key. :)"}], "tags": [], "owner": {"reputation": 74087, "user_id": 214790, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f878c8230342730990acd21f889301d4?s=128&d=identicon&r=PG", "display_name": "matt", "link": "https://stackoverflow.com/users/214790/matt"}, "is_accepted": true, "score": 1, "last_activity_date": 1551901757, "creation_date": 1551901757, "answer_id": 55031119, "question_id": 55023799, "link": "https://stackoverflow.com/questions/55023799/how-to-read-data-sent-by-httparty-in-sinatra/55031119#55031119", "title": "How to read data sent by HTTParty in Sinatra", "body": "<p>The post data is available in the <code>params</code> object inside your Sinatra route:</p>\n\n<pre><code>post '/post_data' do \n  data = params[\"something\"] # =&gt; my_value is now 'foo' in this example\n  #... rest of code\nend\n</code></pre>\n\n<p>Sinatra only parses the data if it is <code>application/x-www-form-urlencoded</code> (which it is in this case) or <code>multipart/form-data</code>. If you wanted to POST another type (e.g. JSON) you would need to parse the request body yourself using <code>request.body</code>:</p>\n\n<pre><code>post '/json_data'\n  # request.body is an IO object\n  data = JSON.parse(request.body.read)\nend\n</code></pre>\n\n<hr>\n\n<p>Be sure to get the syntax of your <code>HTTParty</code> call correct. You need to specify the <code>body:</code> key of the options:</p>\n\n<pre><code>HTTParty.post('http://localhost:4567/post_data', body: {something: \"foo\"})\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user9485690"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 208, "favorite_count": 0, "accepted_answer_id": 55031119, "answer_count": 2, "score": 0, "last_activity_date": 1552041390, "creation_date": 1551877447, "last_edit_date": 1552041390, "question_id": 55023799, "link": "https://stackoverflow.com/questions/55023799/how-to-read-data-sent-by-httparty-in-sinatra", "title": "How to read data sent by HTTParty in Sinatra", "body": "<p>I am trying to have two separate Ruby programs to communicate, one with the Sinatra gem, and another with the HTTParty gem. What I am attempting to do is post data to the Sinatra program from a HTTP post request in the other program. </p>\n\n<p>This is the code that sends the data.</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>HTTParty.post('https://notgivingawaymydomain/post_data', {something: foo})\n</code></pre>\n\n<p>However, I don't know how to receive the data on the other end. I've tried a few things I researched on the internet but none seem to work.</p>\n\n<p>EDIT</p>\n\n<p>My code on the other end is really nothing special at the moment, but I'll put what I've been trying. </p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>post '/post_data' do \n   #not sure how to access the hash that my post request sent here\nend\n</code></pre>\n"}, {"tags": ["ruby", "string"], "answers": [{"comments": [{"owner": {"reputation": 113, "user_id": 11159536, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08b835cc5eaaca8bcd7d3e8beaa6bedd?s=128&d=identicon&r=PG&f=1", "display_name": "drkvader", "link": "https://stackoverflow.com/users/11159536/drkvader"}, "edited": false, "score": 0, "creation_date": 1551921273, "post_id": 55022902, "comment_id": 96821589, "body": "got it! Thanks :)"}], "tags": [], "owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "is_accepted": false, "score": 2, "last_activity_date": 1551875106, "last_edit_date": 1551875106, "creation_date": 1551874482, "answer_id": 55022902, "question_id": 55022684, "link": "https://stackoverflow.com/questions/55022684/matching-a-sliced-string/55022902#55022902", "title": "Matching a sliced string", "body": "<p>Your <code>month</code> is <code>\"MAR \"</code></p>\n\n<p>Try</p>\n\n<pre><code>month = week.slice(8..10)\n</code></pre>\n\n<p>And makes sense, from 8 to 10 inclusive are three characters. Same for the other parts.</p>\n"}, {"tags": [], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "is_accepted": true, "score": 3, "last_activity_date": 1551875376, "last_edit_date": 1551875376, "creation_date": 1551874488, "answer_id": 55022905, "question_id": 55022684, "link": "https://stackoverflow.com/questions/55022684/matching-a-sliced-string/55022905#55022905", "title": "Matching a sliced string", "body": "<p>You are using <code>puts</code> to examine what you have, and therefore you are missing to observe whitespaces in your results. You actually have:</p>\n\n<pre><code>week.slice(0..2) # =&gt; \"03 \"\nweek.slice(5..7) # =&gt; \"09 \"\nweek.slice(8..11) # =&gt; \"MAR \"\nweek.slice(12..17) # =&gt; \"2019\"\n</code></pre>\n\n<p>To observe what you have, it is better to use <code>p</code> rather than <code>puts</code>.</p>\n\n<p>You have the wrong range. Actually, there is no reason to use ranges here. It is much easier to use the second argument to specify the length:</p>\n\n<pre><code>week.slice(0, 2) # =&gt; \"03\"\nweek.slice(5, 2) # =&gt; \"09\"\nweek.slice(8, 3) # =&gt; \"MAR\"\nweek.slice(12, 4) # =&gt; \"2019\"\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 113, "user_id": 11159536, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08b835cc5eaaca8bcd7d3e8beaa6bedd?s=128&d=identicon&r=PG&f=1", "display_name": "drkvader", "link": "https://stackoverflow.com/users/11159536/drkvader"}, "edited": false, "score": 0, "creation_date": 1551921460, "post_id": 55023909, "comment_id": 96821623, "body": "I did not know about these commands.. I&#39;ll try it also.. thank you very much"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "reply_to_user": {"reputation": 113, "user_id": 11159536, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08b835cc5eaaca8bcd7d3e8beaa6bedd?s=128&d=identicon&r=PG&f=1", "display_name": "drkvader", "link": "https://stackoverflow.com/users/11159536/drkvader"}, "edited": false, "score": 1, "creation_date": 1551947356, "post_id": 55023909, "comment_id": 96829406, "body": "@DerekSanders you&#39;re welcome. Consider given the green check mark to sawa or Ursus since they answered your actual question."}], "tags": [], "owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "is_accepted": false, "score": 2, "last_activity_date": 1551882429, "last_edit_date": 1551882429, "creation_date": 1551877790, "answer_id": 55023909, "question_id": 55022684, "link": "https://stackoverflow.com/questions/55022684/matching-a-sliced-string/55023909#55023909", "title": "Matching a sliced string", "body": "<p>Seems like you want to parse a string containing data in a specific format. Instead of relying on absolute indices, you could use a <a href=\"http://ruby-doc.org/core-2.6.1/Regexp.html\" rel=\"nofollow noreferrer\">regular expression</a> to match the date format, e.g:</p>\n\n<pre><code>PATTERN = /\n  (?&lt;first_day&gt;\\d{2}) # 2-digit first day\n  \\s*                 # optional whitespace\n  [\u2013-]                # delimiter(s)\n  \\s*\n  (?&lt;last_day&gt;\\d{2})  # 2-digit last day\n  \\s*\n  (?&lt;month&gt;\\w{3})     # 3-letter month name\n  \\s*\n  (?&lt;year&gt;\\d{4})      # 4-digit year\n/ix\n</code></pre>\n\n<p>To extract the data:</p>\n\n<pre><code>str = '03 \u2013 09 MAR 2019'\nm = str.match(PATTERN)\n#=&gt; #&lt;MatchData \"03 \u2013 09 MAR 2019\" first_day:\"03\" last_day:\"09\" month:\"MAR\" year:\"2019\"&gt;\n\nm[:first_day] #=&gt; \"03\"\nm[:last_day]  #=&gt; \"09\"\nm[:month]     #=&gt; \"MAR\"\nm[:year]      #=&gt; \"2019\"\n</code></pre>\n\n<p>The results could further be fed into <a href=\"http://ruby-doc.org/stdlib-2.6.1/libdoc/date/rdoc/Date.html#method-c-strptime\" rel=\"nofollow noreferrer\"><code>Date.strptime</code></a>:</p>\n\n<pre><code>require 'date'\n\nfrom = m.values_at(:first_day, :month, :year).join(' ') #=&gt; \"03 MAR 2019\"\nto   = m.values_at(:first_day, :month, :year).join(' ') #=&gt; \"09 MAR 2019\"\n\nDate.strptime(from, '%d %b %Y')  #=&gt; #&lt;Date: 2019-03-03 ...&gt;\nDate.strptime(to, '%d %b %Y')    #=&gt; #&lt;Date: 2019-03-09 ...&gt;\n</code></pre>\n\n<p>Or <a href=\"http://ruby-doc.org/stdlib-2.6.1/libdoc/date/rdoc/Date.html#method-c-_strptime\" rel=\"nofollow noreferrer\"><code>_strptime</code></a> if you're just interested in the raw values:</p>\n\n<pre><code>Date._strptime(from, '%d %b %Y')\n#=&gt; {:mday=&gt;3, :mon=&gt;3, :year=&gt;2019}\n</code></pre>\n"}], "owner": {"reputation": 113, "user_id": 11159536, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08b835cc5eaaca8bcd7d3e8beaa6bedd?s=128&d=identicon&r=PG&f=1", "display_name": "drkvader", "link": "https://stackoverflow.com/users/11159536/drkvader"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "accepted_answer_id": 55022905, "answer_count": 3, "score": 0, "last_activity_date": 1551882429, "creation_date": 1551873716, "last_edit_date": 1551875316, "question_id": 55022684, "link": "https://stackoverflow.com/questions/55022684/matching-a-sliced-string", "title": "Matching a sliced string", "body": "<p>I am trying to use the <code>case</code> statement:</p>\n\n<pre><code>week # =&gt; \"03 \u2013 09 MAR 2019\"\nfirst_day = week.slice(0..2) # =&gt; 03\nlast_day = week.slice(5..7) # =&gt; 09\nmonth = week.slice(8..11) # =&gt; MAR\nyear = week.slice(12..17) # =&gt; 2019\nputs month # &gt;&gt; MAR\ncase month\nwhen 'JAN' then month_num = '01'\nwhen 'FEB' then month_num = '02'\nwhen 'MAR' then month_num = '03'\nwhen 'APR' then month_num = '04'\nwhen 'MAY' then month_num = '05'\nwhen 'JUN' then month_num = '06'\nwhen 'JUL' then month_num = '07'\nwhen 'AGO' then month_num = '08'\nwhen 'SEP' then month_num = '09'\nwhen 'OCT' then month_num = '10'\nwhen 'NOV' then month_num = '11'\nwhen 'DEC' then month_num = '12'\nelse month_num = 'ERROR'\nend\nputs month_num # &gt;&gt; ERROR\n</code></pre>\n\n<p>However, the <code>case</code> statement always goes to the <code>else</code> branch.</p>\n\n<p>Why is the var <code>month_num</code> equal to the string <code>\"ERROR\"</code> instead of <code>\"03\"</code>?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 6039, "user_id": 2137458, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8cfca832ee746f3e3d9971148f52dc64?s=128&d=identicon&r=PG", "display_name": "NM Pennypacker", "link": "https://stackoverflow.com/users/2137458/nm-pennypacker"}, "edited": false, "score": 0, "creation_date": 1551877057, "post_id": 55022406, "comment_id": 96800386, "body": "Where is your production environment hosted? Perhaps Heroku?"}, {"owner": {"reputation": 1, "user_id": 9251127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/234c13d3bed7fac73552b92674bb2cbd?s=128&d=identicon&r=PG&f=1", "display_name": "Ricardo", "link": "https://stackoverflow.com/users/9251127/ricardo"}, "reply_to_user": {"reputation": 6039, "user_id": 2137458, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8cfca832ee746f3e3d9971148f52dc64?s=128&d=identicon&r=PG", "display_name": "NM Pennypacker", "link": "https://stackoverflow.com/users/2137458/nm-pennypacker"}, "edited": false, "score": 0, "creation_date": 1551879094, "post_id": 55022406, "comment_id": 96801612, "body": "no. I am using passenger + nginx. I am hosting my own server."}], "owner": {"reputation": 1, "user_id": 9251127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/234c13d3bed7fac73552b92674bb2cbd?s=128&d=identicon&r=PG&f=1", "display_name": "Ricardo", "link": "https://stackoverflow.com/users/9251127/ricardo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 45, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1551875170, "creation_date": 1551872872, "question_id": 55022406, "link": "https://stackoverflow.com/questions/55022406/ruby-on-rails-production-mode-not-serving-files-under-sub-directories", "title": "Ruby on rails - production mode, not serving files under sub directories", "body": "<p>I have a ruby on rails app, I have a data folder inside the public folder and this data folder contains subfolders. The data is well displayed (visually) in the browser in development mode, but in production mode it only displays the data inside the folder but not the data inside the subfolders. For example: it would display public/data/sample.json but it does not display public/data/folder/sample.json. </p>\n\n<p>Does anyone have any ideas?</p>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 4216, "user_id": 9269043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a2763bcfa8917a365c88f8639494de7?s=128&d=identicon&r=PG", "display_name": "Vasilisa", "link": "https://stackoverflow.com/users/9269043/vasilisa"}, "edited": false, "score": 0, "creation_date": 1551867281, "post_id": 55020203, "comment_id": 96794561, "body": "Could you please clarify. If somebody want to delete truck1 and truck2 (truck1 has no crews, truck2 has some crews), should he receive an error or should only truck1 be deleted?"}, {"owner": {"reputation": 4216, "user_id": 9269043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a2763bcfa8917a365c88f8639494de7?s=128&d=identicon&r=PG", "display_name": "Vasilisa", "link": "https://stackoverflow.com/users/9269043/vasilisa"}, "edited": false, "score": 0, "creation_date": 1551867313, "post_id": 55020203, "comment_id": 96794578, "body": "Btw, maybe you should display only trucks without crews on frontend for deletion?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user11027209"}, "reply_to_user": {"reputation": 4216, "user_id": 9269043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a2763bcfa8917a365c88f8639494de7?s=128&d=identicon&r=PG", "display_name": "Vasilisa", "link": "https://stackoverflow.com/users/9269043/vasilisa"}, "edited": false, "score": 0, "creation_date": 1551867621, "post_id": 55020203, "comment_id": 96794779, "body": "Only truck1,  json message with trucks who can&#39;t delete its not important now, just a simple msg what a someone cannot be delete :)"}, {"owner": {"user_type": "does_not_exist", "display_name": "user11027209"}, "reply_to_user": {"reputation": 4216, "user_id": 9269043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a2763bcfa8917a365c88f8639494de7?s=128&d=identicon&r=PG", "display_name": "Vasilisa", "link": "https://stackoverflow.com/users/9269043/vasilisa"}, "edited": false, "score": 0, "creation_date": 1551867851, "post_id": 55020203, "comment_id": 96794930, "body": "\u041d\u0435, \u043f\u0440\u043e\u0441\u0442\u043e \u043e\u0442\u043e\u0431\u0440\u0430\u0436\u0430\u0442\u044c \u043d\u0435 \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u0441\u044f) \u041d\u0443\u0436\u043d\u043e \u0438\u043c\u0435\u043d\u043d\u043e \u0438\u0437 \u043f\u0440\u0438\u0445\u043e\u0434\u044f\u0449\u0435\u0433\u043e array \u0441 ids \u043d\u0430\u0445\u043e\u0434\u0438\u0442\u044c \u043a\u0430\u0436\u0434\u043e\u0433\u043e \u0443 \u043a\u043e\u0433\u043e \u043f\u043e id \u0435\u0441\u0442\u044c crew, \u0438\u0445 \u043d\u0435 \u0443\u0434\u0430\u043b\u044f\u0442\u044c, \u0430 \u0442\u0435\u0445 \u043a\u0442\u043e \u0431\u0435\u0437 \u043a\u0440\u044e \u0442\u0435\u0445 \u0443\u0434\u0430\u043b\u044f\u0442\u044c)"}, {"owner": {"reputation": 4216, "user_id": 9269043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a2763bcfa8917a365c88f8639494de7?s=128&d=identicon&r=PG", "display_name": "Vasilisa", "link": "https://stackoverflow.com/users/9269043/vasilisa"}, "edited": false, "score": 0, "creation_date": 1551869244, "post_id": 55020203, "comment_id": 96795823, "body": "Let speak in English since we are on English SO"}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user11027209"}, "edited": false, "score": 0, "creation_date": 1551872598, "post_id": 55021198, "comment_id": 96797844, "body": "Thx very much :)"}], "tags": [], "owner": {"reputation": 4216, "user_id": 9269043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a2763bcfa8917a365c88f8639494de7?s=128&d=identicon&r=PG", "display_name": "Vasilisa", "link": "https://stackoverflow.com/users/9269043/vasilisa"}, "is_accepted": true, "score": 1, "last_activity_date": 1551869218, "creation_date": 1551869218, "answer_id": 55021198, "question_id": 55020203, "link": "https://stackoverflow.com/questions/55020203/how-to-map-ids-in-a-query/55021198#55021198", "title": "How to map ids in a query", "body": "<p>At first you can add a restriction to Truck model to not delete accidentally a truck with crew</p>\n\n<pre><code>has_many :crews, dependent: :restrict_with_exception \n</code></pre>\n\n<p>Let's refactor your controller code:</p>\n\n<pre><code>def bulk_destroy      \n  # let find truck which should be deleted\n  trucks_wo_crew = current_company.trucks.includes(:crews)\n    .where(id: params[:ids]).where(crews: { id: nil })\n  # and delete them\n  trucks_wo_crew.destroy_all\n\n  # if we search by id after deletion we'll get trucks with crew, \n  # because we already deleted other. \n  # We can get only names, since we don't need other info\n  trucks_with_crew = current_company.trucks.where(id: params[:ids]).pluck(:name)\n\n  return head :no_content if trucks_with_crew.empty?\n\n  render json: { message: \"Trucks: '#{trucks_with_crew.join(', ')}' can't be deleted because used by crews.\" }, status: :unprocessable_entity\nend\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user11027209"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "accepted_answer_id": 55021198, "answer_count": 1, "score": 0, "last_activity_date": 1551879746, "creation_date": 1551866267, "last_edit_date": 1551879746, "question_id": 55020203, "link": "https://stackoverflow.com/questions/55020203/how-to-map-ids-in-a-query", "title": "How to map ids in a query", "body": "<p>I have Truck and Crew models, Truck <code>has_many :crews</code>. On frontend-side in checkboxes I select truck ids and send them to my controller. I need to destroy only trucks which have no crews. What I have now:</p>\n\n<pre><code># app/models/truck.rb\nbelongs_to :company\nhas_many :crews\n\n# app/models/crew.rb\nbelongs_to :truck, optional: true\n\n# trucks_controller.rb\ndef bulk_destroy\n  trucks_with_crews = []\n  current_company.trucks.where(id: params[:ids]).find_each do |truck|\n    if truck.crews.exists?\n      trucks_with_crews &lt;&lt; truck\n      next\n    end\n    truck.destroy\n  end\n  if trucks_with_crews.empty?\n    head :no_content\n  else\n    message = []\n    trucks_with_crews.each_with_object([]) { |x| message &lt;&lt; x.name }\n    render json: { message: \"Trucks: '#{message.join(', ')}' can't be deleted because used by crews.\" }, status: :unprocessable_entity\n  end\nend\n</code></pre>\n\n<p>But it's very overcomplicated, and I want to make it better in the query. Anyone can help me? </p>\n\n<p>I think it should be something like:</p>\n\n<ul>\n<li>select ids of all who cannot be deleted (of course from those whose\nids came to us)    </li>\n<li>subtract them from the general list of incoming ids    </li>\n<li>delete remaining in the general list</li>\n</ul>\n\n<p>I don't know exactly how to do it: </p>\n\n<pre><code>a = current_company.trucks.where(id: params[:ids])\nb = current_company.trucks.includes(:crews).where(truck.crews.map(&amp;:id))\na = a - b\n</code></pre>\n\n<p>I hope you understand what I mean. Thanks :)</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "distinct"], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 10889678, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/612ae16dc92d0689c0b2f60f9a7d0769?s=128&d=identicon&r=PG&f=1", "display_name": "Shahroz Ashraf", "link": "https://stackoverflow.com/users/10889678/shahroz-ashraf"}, "edited": false, "score": 0, "creation_date": 1551867136, "post_id": 55020486, "comment_id": 96794443, "body": "params[:page] ||= 1 where should i put this?"}, {"owner": {"reputation": 5669, "user_id": 7429104, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/TZAPt.jpg?s=128&g=1", "display_name": "Aman", "link": "https://stackoverflow.com/users/7429104/aman"}, "reply_to_user": {"reputation": 3, "user_id": 10889678, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/612ae16dc92d0689c0b2f60f9a7d0769?s=128&d=identicon&r=PG&f=1", "display_name": "Shahroz Ashraf", "link": "https://stackoverflow.com/users/10889678/shahroz-ashraf"}, "edited": false, "score": 0, "creation_date": 1551867245, "post_id": 55020486, "comment_id": 96794529, "body": "@ShahrozAshraf just above the query line, you can have a look at updated answer"}, {"owner": {"reputation": 5669, "user_id": 7429104, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/TZAPt.jpg?s=128&g=1", "display_name": "Aman", "link": "https://stackoverflow.com/users/7429104/aman"}, "reply_to_user": {"reputation": 3, "user_id": 10889678, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/612ae16dc92d0689c0b2f60f9a7d0769?s=128&d=identicon&r=PG&f=1", "display_name": "Shahroz Ashraf", "link": "https://stackoverflow.com/users/10889678/shahroz-ashraf"}, "edited": false, "score": 0, "creation_date": 1551867339, "post_id": 55020486, "comment_id": 96794597, "body": "@ShahrozAshraf Also don&#39;t pass any param in <code>distinct</code> please have a look at complete answer on updated answer."}, {"owner": {"reputation": 5669, "user_id": 7429104, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/TZAPt.jpg?s=128&g=1", "display_name": "Aman", "link": "https://stackoverflow.com/users/7429104/aman"}, "reply_to_user": {"reputation": 3, "user_id": 10889678, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/612ae16dc92d0689c0b2f60f9a7d0769?s=128&d=identicon&r=PG&f=1", "display_name": "Shahroz Ashraf", "link": "https://stackoverflow.com/users/10889678/shahroz-ashraf"}, "edited": false, "score": 0, "creation_date": 1551867467, "post_id": 55020486, "comment_id": 96794680, "body": "@ShahrozAshraf Possibly replace <code>page</code> to  <code>paginate(:page =&gt; params[:page], :per_page =&gt; 30)</code> answer updated."}, {"owner": {"reputation": 5669, "user_id": 7429104, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/TZAPt.jpg?s=128&g=1", "display_name": "Aman", "link": "https://stackoverflow.com/users/7429104/aman"}, "reply_to_user": {"reputation": 3, "user_id": 10889678, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/612ae16dc92d0689c0b2f60f9a7d0769?s=128&d=identicon&r=PG&f=1", "display_name": "Shahroz Ashraf", "link": "https://stackoverflow.com/users/10889678/shahroz-ashraf"}, "edited": false, "score": 0, "creation_date": 1551867866, "post_id": 55020486, "comment_id": 96794945, "body": "@ShahrozAshraf Have you replaced page with paginate(..) ?"}, {"owner": {"reputation": 5669, "user_id": 7429104, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/TZAPt.jpg?s=128&g=1", "display_name": "Aman", "link": "https://stackoverflow.com/users/7429104/aman"}, "reply_to_user": {"reputation": 3, "user_id": 10889678, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/612ae16dc92d0689c0b2f60f9a7d0769?s=128&d=identicon&r=PG&f=1", "display_name": "Shahroz Ashraf", "link": "https://stackoverflow.com/users/10889678/shahroz-ashraf"}, "edited": false, "score": 0, "creation_date": 1551868196, "post_id": 55020486, "comment_id": 96795181, "body": "@ShahrozAshraf Hmm can you just try it <code>@search_data = RtaDubai.paginate(:page =&gt; params[:page], :per_page =&gt; 30)</code> ?"}, {"owner": {"reputation": 3, "user_id": 10889678, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/612ae16dc92d0689c0b2f60f9a7d0769?s=128&d=identicon&r=PG&f=1", "display_name": "Shahroz Ashraf", "link": "https://stackoverflow.com/users/10889678/shahroz-ashraf"}, "edited": false, "score": 0, "creation_date": 1551868297, "post_id": 55020486, "comment_id": 96795251, "body": "with this i will not get any data beacuse we are removing where clause"}, {"owner": {"reputation": 5669, "user_id": 7429104, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/TZAPt.jpg?s=128&g=1", "display_name": "Aman", "link": "https://stackoverflow.com/users/7429104/aman"}, "reply_to_user": {"reputation": 3, "user_id": 10889678, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/612ae16dc92d0689c0b2f60f9a7d0769?s=128&d=identicon&r=PG&f=1", "display_name": "Shahroz Ashraf", "link": "https://stackoverflow.com/users/10889678/shahroz-ashraf"}, "edited": false, "score": 0, "creation_date": 1551869753, "post_id": 55020486, "comment_id": 96796147, "body": "@ShahrozAshraf With this you will get all data of that table, with limit of 30. i&#39;m just trying to test it if it&#39;s working then will modify this query accordingly."}, {"owner": {"reputation": 3, "user_id": 10889678, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/612ae16dc92d0689c0b2f60f9a7d0769?s=128&d=identicon&r=PG&f=1", "display_name": "Shahroz Ashraf", "link": "https://stackoverflow.com/users/10889678/shahroz-ashraf"}, "edited": false, "score": 0, "creation_date": 1551870098, "post_id": 55020486, "comment_id": 96796340, "body": "Thanks for your efforts"}, {"owner": {"reputation": 5669, "user_id": 7429104, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/TZAPt.jpg?s=128&g=1", "display_name": "Aman", "link": "https://stackoverflow.com/users/7429104/aman"}, "reply_to_user": {"reputation": 3, "user_id": 10889678, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/612ae16dc92d0689c0b2f60f9a7d0769?s=128&d=identicon&r=PG&f=1", "display_name": "Shahroz Ashraf", "link": "https://stackoverflow.com/users/10889678/shahroz-ashraf"}, "edited": false, "score": 0, "creation_date": 1551870202, "post_id": 55020486, "comment_id": 96796410, "body": "@ShahrozAshraf Glad to know that, also i think <code>.paginate(...)</code> will be required to make pagination work. anyway feel free to accept/upvote answer for future SO searchers."}], "tags": [], "owner": {"reputation": 5669, "user_id": 7429104, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/TZAPt.jpg?s=128&g=1", "display_name": "Aman", "link": "https://stackoverflow.com/users/7429104/aman"}, "is_accepted": false, "score": 1, "last_activity_date": 1551870120, "last_edit_date": 1551870120, "creation_date": 1551867033, "answer_id": 55020486, "question_id": 55019232, "link": "https://stackoverflow.com/questions/55019232/rails-giving-error-when-using-distinct-for-removing-duplicate-records/55020486#55020486", "title": "Rails giving error when using distinct for removing duplicate records", "body": "<pre><code>def search_results\n  params[:page] ||= 1\n  @search_data = RtaDubai.where(query_string: @topic.title)\n    .uniq\n    .order('id desc')\n    .paginate(:page =&gt; params[:page], :per_page =&gt; 30)\nend\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 10889678, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/612ae16dc92d0689c0b2f60f9a7d0769?s=128&d=identicon&r=PG&f=1", "display_name": "Shahroz Ashraf", "link": "https://stackoverflow.com/users/10889678/shahroz-ashraf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1551876407, "creation_date": 1551863162, "last_edit_date": 1592644375, "question_id": 55019232, "link": "https://stackoverflow.com/questions/55019232/rails-giving-error-when-using-distinct-for-removing-duplicate-records", "title": "Rails giving error when using distinct for removing duplicate records", "body": "<p>I have a controller method in which I am crawling data from different websites. I use distinct in query so that duplicate records should not be displayed.</p>\n<p>When I add pagination in my view file it gives some error but without pagination it works fine.</p>\n<p>Here is my controller method:</p>\n<pre><code>def search_results\n  @search_data = RtaDubai.where(query_string: @topic.title)\n    .distinct(:query_string).page(params[:page]).order('id desc')\nend\n</code></pre>\n<p>Here is my view file pagination code:</p>\n<pre><code>&lt;%= will_paginate @search_data %&gt;\n</code></pre>\n<p>Here is the error:</p>\n<blockquote>\n<p>F, [2019-03-06T08:52:03.692939 #106281] FATAL -- : [c72525d9-dcd2-   4e7d-9851-d72f3940ec09] ActionView::Template::Error (PG::SyntaxError:ERROR:  syntax error at or near &quot;)&quot;</p>\n<p>LINE 1: SELECT COUNT(DISTINCT ) FROM &quot;rta_dubai&quot; WHERE &quot;rta_dubai&quot;.&quot;...</p>\n<p>: SELECT COUNT(DISTINCT ) FROM &quot;rta_dubai&quot; WHERE &quot;rta_dubai&quot;.&quot;query_string&quot; = $1):</p>\n<p>F, [2019-03-06T08:53:41.989800 #107285] FATAL -- : [3946d2c4-3fa3-486c-aa48-c5454b54d111]     94:   &lt;% end %&gt;\n<br>[3946d2c4-3fa3-486c-aa48-c5454b54d111]     95: \n<br>[3946d2c4-3fa3-486c-aa48-c5454b54d111]     96: -->\n<br>[3946d2c4-3fa3-486c-aa48-c5454b54d111]     97:   &lt;%= will_paginate  @search_data %&gt;\n<br>[3946d2c4-3fa3-486c-aa48-c5454b54d111]     98: -->\n<br>[3946d2c4-3fa3-486c-aa48-c5454b54d111]     99: \n<br>[3946d2c4-3fa3-486c-aa48-c5454b54d111]    100:\n<br>F, [2019-03-06T08:53:41.989829 #107285] FATAL -- : [3946d2c4-3fa3-486c-aa48-c5454b54d111]<br />\n<br>F, [2019-03-06T08:53:41.989852 #107285] FATAL -- : [3946d2c4-3fa3-486c-aa48-c5454b54d111]\n<br>app/views/sentiment_analysis/search_results.html.erb:97:in     `_app_views_sentiment_analysis_search_results_html_erb__418975307880197008\n2_38946080'</p>\n</blockquote>\n"}, {"tags": ["ruby-on-rails", "ruby", "aws-sdk"], "comments": [{"owner": {"reputation": 323, "user_id": 10171839, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7iTyi.jpg?s=128&g=1", "display_name": "sultania23", "link": "https://stackoverflow.com/users/10171839/sultania23"}, "edited": false, "score": 0, "creation_date": 1551865226, "post_id": 55019065, "comment_id": 96793271, "body": "I hope it will help a lot .<a href=\"https://docs.aws.amazon.com/amazonglacier/latest/dev/downloading-an-archive-two-steps.html\" rel=\"nofollow noreferrer\">docs.aws.amazon.com/amazonglacier/latest/dev/&hellip;</a>"}, {"owner": {"reputation": 315, "user_id": 6056677, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh4.googleusercontent.com/-B72_N5GQ-zo/AAAAAAAAAAI/AAAAAAAAAFw/pKrxdPKBz_U/photo.jpg?sz=128", "display_name": "Priyadarshani mini", "link": "https://stackoverflow.com/users/6056677/priyadarshani-mini"}, "reply_to_user": {"reputation": 323, "user_id": 10171839, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7iTyi.jpg?s=128&g=1", "display_name": "sultania23", "link": "https://stackoverflow.com/users/10171839/sultania23"}, "edited": false, "score": 0, "creation_date": 1551866383, "post_id": 55019065, "comment_id": 96793982, "body": "Hi Pawan I&#39;m also follow this doc and get that response.But I m not getting my file url in response.only get Id.So using these id how we get file url"}, {"owner": {"reputation": 1671, "user_id": 3427659, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/3KKqj.jpg?s=128&g=1", "display_name": "Kamal Panhwar", "link": "https://stackoverflow.com/users/3427659/kamal-panhwar"}, "edited": false, "score": 0, "creation_date": 1551926497, "post_id": 55019065, "comment_id": 96822761, "body": "Jai, purpose is to make it simple to read, you have made is more difficult to read in name of grammar I rolled back, as want to make it simple to read."}], "answers": [{"comments": [{"owner": {"reputation": 315, "user_id": 6056677, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh4.googleusercontent.com/-B72_N5GQ-zo/AAAAAAAAAAI/AAAAAAAAAFw/pKrxdPKBz_U/photo.jpg?sz=128", "display_name": "Priyadarshani mini", "link": "https://stackoverflow.com/users/6056677/priyadarshani-mini"}, "edited": false, "score": 0, "creation_date": 1551885471, "post_id": 55021941, "comment_id": 96805651, "body": "Hello Kamal, I m  passing job id in url like : <a href=\"https://glacier.xxxxxx.amazonaws.com/&lt;Account\" rel=\"nofollow noreferrer\">glacier.xxxxxx.amazonaws.com/&lt;Account</a> ID&gt;/vaults/&lt;valut name&gt;/jobs/&lt;job_id&gt;/output  It&#39;s Provide me the Response : &lt;File:0x007f5d46d0ddd8&gt;"}, {"owner": {"reputation": 1671, "user_id": 3427659, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/3KKqj.jpg?s=128&g=1", "display_name": "Kamal Panhwar", "link": "https://stackoverflow.com/users/3427659/kamal-panhwar"}, "reply_to_user": {"reputation": 315, "user_id": 6056677, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh4.googleusercontent.com/-B72_N5GQ-zo/AAAAAAAAAAI/AAAAAAAAAFw/pKrxdPKBz_U/photo.jpg?sz=128", "display_name": "Priyadarshani mini", "link": "https://stackoverflow.com/users/6056677/priyadarshani-mini"}, "edited": false, "score": 0, "creation_date": 1551934091, "post_id": 55021941, "comment_id": 96824479, "body": "Please follow these instructions <a href=\"https://www.spacevatican.org/2012/9/4/using-glacier-with-fog/\" rel=\"nofollow noreferrer\">spacevatican.org/2012/9/4/using-glacier-with-fog</a>"}], "tags": [], "owner": {"reputation": 1671, "user_id": 3427659, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/3KKqj.jpg?s=128&g=1", "display_name": "Kamal Panhwar", "link": "https://stackoverflow.com/users/3427659/kamal-panhwar"}, "is_accepted": false, "score": 1, "last_activity_date": 1551926445, "last_edit_date": 1551926445, "creation_date": 1551871494, "answer_id": 55021941, "question_id": 55019065, "link": "https://stackoverflow.com/questions/55019065/how-to-upload-and-download-image-and-video-to-s3-glacier-using-rails/55021941#55021941", "title": "How to upload and download image and video to s3 glacier using rails", "body": "<p>There is a primary difference between S3 and Glacier. The basic concept of Glacier is to store long term files for backups. S3 is quick to access. But Glacier is to save files for a long time rarely access. So it is good to the user for doing backups where you want to save files but rarely retrieve unless any emergency arise. So the price to retrieve the file is more expensive than saving it.  I am not sure why you want to save videos in Glacier but be firm that retrieval speed of Glacier is slow, and to save images/videos you may consider S3 than a glacier. Following is a reply to your answer</p>\n\n<ol>\n<li><p>Yes, you are doing correctly, and this is the way you have to do it.</p></li>\n<li><p>This is a little bit tricky. You have to use the database to save all those ids retrieved. So later you can easily retrieve. That meant instead of having any directory you can save all information in the database so later on you can retrieve it.</p></li>\n</ol>\n\n<pre><code>id=\"return my job id\",   # save it to database\naction=\"ArchiveRetrieval\",   \narchive_id=\"return my archive id\", # better save in relation table of archives\narchive_size=24,\ncompleted=true,\ncompleted_at=2019-03-05 19:49:36 UTC,\ncreated_at=2019-03-05 15:55:29 UTC,\ninventory_size=0,\ndescription=nil,\ntree_hash=\"xxxxxx\",\nsns_topic=nil,\nstatus_code=\"Succeeded\",\nstatus_message=\"Succeeded\",\nvault_arn=\"xxxxxxxxxx:vaults/myvalutname\",\nformat=nil,\ntype=nil\n</code></pre>\n\n<p>So it mean all uploads you will have following fields in db to access back.</p>\n\n<ol start=\"3\">\n<li>To retrieve files you have to use your database and get everything. Now just use your object ID to get your file.</li>\n</ol>\n\n<pre><code>archive_id         -          id             -  description\nreturn my archive id  -   return my job id  -  my first archive\n</code></pre>\n\n<p>When you want to do a list of files, just run ActiveRecord db records to get it and link it in a way so that action can retrieve that files using object id.</p>\n"}], "owner": {"reputation": 315, "user_id": 6056677, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh4.googleusercontent.com/-B72_N5GQ-zo/AAAAAAAAAAI/AAAAAAAAAFw/pKrxdPKBz_U/photo.jpg?sz=128", "display_name": "Priyadarshani mini", "link": "https://stackoverflow.com/users/6056677/priyadarshani-mini"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 278, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1551926445, "creation_date": 1551862660, "last_edit_date": 1551877637, "question_id": 55019065, "link": "https://stackoverflow.com/questions/55019065/how-to-upload-and-download-image-and-video-to-s3-glacier-using-rails", "title": "How to upload and download image and video to s3 glacier using rails", "body": "<p>I want to upload images and videos on s3 glacier using ruby on rails.\nNow I created a vault on S3 glacier and set all permissions.</p>\n\n<p><strong>Now I created an archive inside vault using rails method like :</strong></p>\n\n<blockquote>\n  <p>vault.archives.create(:body => File.open(video_path).to_s,\n  :description => 'my first archive')</p>\n</blockquote>\n\n<p><strong>And after that I create archive based job like:</strong></p>\n\n<blockquote>\n  <p>vault.jobs.create(:type => Fog::AWS::Glacier::Job::ARCHIVE,\n  :archive_id =>\"my archive id\" )</p>\n</blockquote>\n\n<p><strong>And getting these jobs by:</strong></p>\n\n<blockquote>\n  <p>vault.jobs.get(\"my job id\")</p>\n</blockquote>\n\n<p>** it provides me the response like:** </p>\n\n<blockquote>\n<pre><code>id=\"return my job id\",\naction=\"ArchiveRetrieval\",\narchive_id=\"return my archive id\",\narchive_size=24,\ncompleted=true,\ncompleted_at=2019-03-05 19:49:36 UTC,\ncreated_at=2019-03-05 15:55:29 UTC,\ninventory_size=0,\ndescription=nil,\ntree_hash=\"xxxxxx\",\nsns_topic=nil,\nstatus_code=\"Succeeded\",\nstatus_message=\"Succeeded\",\nvault_arn=\"xxxxxxxxxx:vaults/myvalutname\",\nformat=nil,\ntype=nil\n</code></pre>\n</blockquote>\n\n<p><strong>My questions are:</strong></p>\n\n<blockquote>\n  <ol>\n  <li>Is the approach of uploading image/video in the above code is correct or not? If it's not correct please suggest me the right way for uploading.</li>\n  <li>How I'll get uploaded image/video URL from the glacier s3. </li>\n  <li>Where I'll see uploaded videos and images stored on the glacier. Now it only shows Number of archives in my vault.</li>\n  </ol>\n</blockquote>\n\n<p>I need the Experts suggestions for my problem.\nPlease help me out.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3", "has-many", "has-one"], "answers": [{"comments": [{"owner": {"reputation": 121, "user_id": 8662236, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-KWTVuL7YyAY/AAAAAAAAAAI/AAAAAAAAABk/qbaw7pIIIqc/photo.jpg?sz=128", "display_name": "Anshul Riyal", "link": "https://stackoverflow.com/users/8662236/anshul-riyal"}, "edited": false, "score": 0, "creation_date": 1551860805, "post_id": 55018553, "comment_id": 96790733, "body": "This works fine, if i use belongs_to instead of has_one. but not in has_one case"}, {"owner": {"reputation": 6207, "user_id": 5117953, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/Ca0RW.jpg?s=128&g=1", "display_name": "Vishal", "link": "https://stackoverflow.com/users/5117953/vishal"}, "reply_to_user": {"reputation": 121, "user_id": 8662236, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-KWTVuL7YyAY/AAAAAAAAAAI/AAAAAAAAABk/qbaw7pIIIqc/photo.jpg?sz=128", "display_name": "Anshul Riyal", "link": "https://stackoverflow.com/users/8662236/anshul-riyal"}, "edited": false, "score": 0, "creation_date": 1551860931, "post_id": 55018553, "comment_id": 96790804, "body": "@AnshulEnbake Sorry i misunderstood, please check updated answer"}], "tags": [], "owner": {"reputation": 6207, "user_id": 5117953, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/Ca0RW.jpg?s=128&g=1", "display_name": "Vishal", "link": "https://stackoverflow.com/users/5117953/vishal"}, "is_accepted": false, "score": 2, "last_activity_date": 1551860915, "last_edit_date": 1551860915, "creation_date": 1551860736, "answer_id": 55018553, "question_id": 55018471, "link": "https://stackoverflow.com/questions/55018471/delete-has-one-id-associate-with-has-many-primary-key/55018553#55018553", "title": "Delete has_one id associate with has_many primary key?", "body": "<p>Rails provides this option, please check below, it will update id to null in agency. for more info check <a href=\"https://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html\" rel=\"nofollow noreferrer\">this</a> </p>\n\n<pre><code>class Branding &lt; ApplicationRecord\n  has_many :agencies, dependent: :nullify\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 121, "user_id": 8662236, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-KWTVuL7YyAY/AAAAAAAAAAI/AAAAAAAAABk/qbaw7pIIIqc/photo.jpg?sz=128", "display_name": "Anshul Riyal", "link": "https://stackoverflow.com/users/8662236/anshul-riyal"}, "edited": false, "score": 0, "creation_date": 1551861163, "post_id": 55018574, "comment_id": 96790922, "body": "i am using has_one cuz its not necessary if an agency has branding or not... if I am creating agency without branding in <code>belongs_to</code>. it rolls back and doesn&#39;t commit in DB as branding_id is necessary due to that. @Marek Thanks in advance."}, {"owner": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "reply_to_user": {"reputation": 121, "user_id": 8662236, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-KWTVuL7YyAY/AAAAAAAAAAI/AAAAAAAAABk/qbaw7pIIIqc/photo.jpg?sz=128", "display_name": "Anshul Riyal", "link": "https://stackoverflow.com/users/8662236/anshul-riyal"}, "edited": false, "score": 0, "creation_date": 1551861528, "post_id": 55018574, "comment_id": 96791140, "body": "@AnshulEnbake it&#39;s not about if it&#39;s necessary or not, if <code>branding_id</code> column is in <code>Agency</code> model, you have to use <code>belongs_to</code>, you can set <code>optional: true</code> to this method if it&#39;s not necessary (I updated my answer)."}, {"owner": {"reputation": 121, "user_id": 8662236, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-KWTVuL7YyAY/AAAAAAAAAAI/AAAAAAAAABk/qbaw7pIIIqc/photo.jpg?sz=128", "display_name": "Anshul Riyal", "link": "https://stackoverflow.com/users/8662236/anshul-riyal"}, "edited": false, "score": 0, "creation_date": 1551861965, "post_id": 55018574, "comment_id": 96791395, "body": "Thanks @Marek Now it working fine but i still can see the id number in console but value is null."}, {"owner": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "reply_to_user": {"reputation": 121, "user_id": 8662236, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-KWTVuL7YyAY/AAAAAAAAAAI/AAAAAAAAABk/qbaw7pIIIqc/photo.jpg?sz=128", "display_name": "Anshul Riyal", "link": "https://stackoverflow.com/users/8662236/anshul-riyal"}, "edited": false, "score": 0, "creation_date": 1551862129, "post_id": 55018574, "comment_id": 96791481, "body": "I don&#39;t understand your comment. What id do you see? What value is null?"}, {"owner": {"reputation": 121, "user_id": 8662236, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-KWTVuL7YyAY/AAAAAAAAAAI/AAAAAAAAABk/qbaw7pIIIqc/photo.jpg?sz=128", "display_name": "Anshul Riyal", "link": "https://stackoverflow.com/users/8662236/anshul-riyal"}, "edited": false, "score": 0, "creation_date": 1551862255, "post_id": 55018574, "comment_id": 96791538, "body": "<code>Agency.last</code> city: nil, url: nil, branding_id: 6 in console, but when i am <code>Agency.last.branding</code> it giving null... how it will update its value in Agency table? is it possible to update <code>branding_id: 6</code> field to <code>branding_id:  null</code> ?"}, {"owner": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "reply_to_user": {"reputation": 121, "user_id": 8662236, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-KWTVuL7YyAY/AAAAAAAAAAI/AAAAAAAAABk/qbaw7pIIIqc/photo.jpg?sz=128", "display_name": "Anshul Riyal", "link": "https://stackoverflow.com/users/8662236/anshul-riyal"}, "edited": false, "score": 0, "creation_date": 1551862646, "post_id": 55018574, "comment_id": 96791755, "body": "Are you sure you wrote <code>dependent: :nullify</code> in <code>Branding</code> model?"}], "tags": [], "owner": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "is_accepted": true, "score": 1, "last_activity_date": 1551861534, "last_edit_date": 1551861534, "creation_date": 1551860824, "answer_id": 55018574, "question_id": 55018471, "link": "https://stackoverflow.com/questions/55018471/delete-has-one-id-associate-with-has-many-primary-key/55018574#55018574", "title": "Delete has_one id associate with has_many primary key?", "body": "<p>First of all, if <code>Agency</code> model has <code>branding_id</code> column, it should have <code>belongs_to</code> instead of <code>has_one</code> and provide <code>optional: true</code> option to make <code>branding</code> association not required:</p>\n\n<pre><code>class Agency &lt; ApplicationRecord\n  belongs_to :branding, optional: true\nend\n</code></pre>\n\n<p>Second, to do this, you should use <code>nullify</code> option, like this:</p>\n\n<pre><code>class Branding &lt; ApplicationRecord\n  has_many :agencies, dependent: :nullify\nend\n</code></pre>\n"}], "owner": {"reputation": 121, "user_id": 8662236, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-KWTVuL7YyAY/AAAAAAAAAAI/AAAAAAAAABk/qbaw7pIIIqc/photo.jpg?sz=128", "display_name": "Anshul Riyal", "link": "https://stackoverflow.com/users/8662236/anshul-riyal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 0, "accepted_answer_id": 55018574, "answer_count": 2, "score": 0, "last_activity_date": 1551861534, "creation_date": 1551860401, "last_edit_date": 1551860656, "question_id": 55018471, "link": "https://stackoverflow.com/questions/55018471/delete-has-one-id-associate-with-has-many-primary-key", "title": "Delete has_one id associate with has_many primary key?", "body": "<h2>I have 2 models :</h2>\n\n<pre><code>class Agency &lt; ApplicationRecord\n  has_one :branding\nend\n</code></pre>\n\n<hr>\n\n<pre><code>class Branding &lt; ApplicationRecord\n  has_many :agencies\nend\n</code></pre>\n\n<p>when I was destroying any branding, it still keeps its key with the Agency, where I made a field <code>branding_id</code>.</p>\n\n<p>I want something which nullifies it when any branding got to destroy in the process.\nIt automatically updates the agency <code>branding_id</code> to <code>null</code>.</p>\n"}, {"tags": ["ruby", "properties", "datamapper"], "comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1551860258, "post_id": 55018386, "comment_id": 96790425, "body": "Don&#39;t put too much information in the title. The title should just give a summary. Write the elaborated question in the main text."}], "answers": [{"tags": [], "owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "is_accepted": true, "score": 0, "last_activity_date": 1551866444, "creation_date": 1551866444, "answer_id": 55020266, "question_id": 55018386, "link": "https://stackoverflow.com/questions/55018386/how-to-set-a-property-in-ruby-datamapper-that-is-a-function-of-another-property/55020266#55020266", "title": "How to set a property in ruby datamapper that is a function of another property of the same object?", "body": "<p>You should see the docs: <a href=\"https://datamapper.org/docs/properties.html\" rel=\"nofollow noreferrer\">https://datamapper.org/docs/properties.html</a></p>\n\n<p>Specifically the sections on \"Available Types\" and \"Setting default values\".</p>\n\n<p>You can do it like this: </p>\n\n<pre><code>property :date_date, Date, default: -&gt; do |obj, prop|\n  obj.date.to_date\nend\n</code></pre>\n\n<p>You can alternatively set it through a callback (<a href=\"https://datamapper.org/docs/callbacks.html\" rel=\"nofollow noreferrer\">https://datamapper.org/docs/callbacks.html</a>), for example:</p>\n\n<pre><code>property :date_date, Date\n\nbefore_save :set_date_date\n\ndef set_date_date\n  self.date_date = date.to_date\nend\n</code></pre>\n\n<p>Note it works basically the same way in Rails' ActiveRecord as well.</p>\n"}], "owner": {"reputation": 3, "user_id": 3846732, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ebf6b45bebf0ccbcbcb79503306f6b9?s=128&d=identicon&r=PG&f=1", "display_name": "DTHZ", "link": "https://stackoverflow.com/users/3846732/dthz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 83, "favorite_count": 0, "accepted_answer_id": 55020266, "answer_count": 1, "score": 0, "last_activity_date": 1551866444, "creation_date": 1551860052, "last_edit_date": 1551860953, "question_id": 55018386, "link": "https://stackoverflow.com/questions/55018386/how-to-set-a-property-in-ruby-datamapper-that-is-a-function-of-another-property", "title": "How to set a property in ruby datamapper that is a function of another property of the same object?", "body": "<p>I want to add two new properties to a ruby datamapper model, one that is a date cast of a timestamp property and another that is a value from another object connected through a unique key.</p>\n\n<p>So for the first case I have \n    property :date, DateTime</p>\n\n<p>and I want to add another\n    property :date_date, Date\nthat by default will be equal to date.to_date</p>\n"}, {"tags": ["ruby", "nokogiri"], "comments": [{"owner": {"reputation": 2301, "user_id": 19317, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47035e07012da3162b6e83650ee3abe0?s=128&d=identicon&r=PG", "display_name": "aridlehoover", "link": "https://stackoverflow.com/users/19317/aridlehoover"}, "edited": false, "score": 0, "creation_date": 1551857625, "post_id": 55017626, "comment_id": 96789125, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/1708504/how-do-i-remove-a-node-with-nokogiri\">How do I remove a node with Nokogiri?</a>"}], "answers": [{"tags": [], "owner": {"reputation": 47898, "user_id": 966023, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/917fcb4327159076f752c0c3c3fddfbb?s=128&d=identicon&r=PG", "display_name": "pguardiario", "link": "https://stackoverflow.com/users/966023/pguardiario"}, "is_accepted": true, "score": 1, "last_activity_date": 1551863252, "creation_date": 1551863252, "answer_id": 55019264, "question_id": 55017626, "link": "https://stackoverflow.com/questions/55017626/using-nokogiri-how-do-i-remove-all-elements-with-a-certain-classname/55019264#55019264", "title": "Using nokogiri how do I remove all elements with a certain classname", "body": "<p>Should be:</p>\n\n<pre><code>doc.css('a.target').remove\nputs doc.at('html').to_s\n</code></pre>\n"}], "owner": {"reputation": 467, "user_id": 1386354, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/4b352dbafb1792c956714dbc6838dc70?s=128&d=identicon&r=PG", "display_name": "bob", "link": "https://stackoverflow.com/users/1386354/bob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "accepted_answer_id": 55019264, "answer_count": 1, "score": 0, "last_activity_date": 1551863252, "creation_date": 1551856793, "question_id": 55017626, "link": "https://stackoverflow.com/questions/55017626/using-nokogiri-how-do-i-remove-all-elements-with-a-certain-classname", "title": "Using nokogiri how do I remove all elements with a certain classname", "body": "<p>I'm experimenting with Ruby and Nokogiri.</p>\n\n<p>I've figured out how to open a local html document and select nodes by classname:</p>\n\n<pre><code>require 'rubygems'                                                                                               \nrequire 'nokogiri'                                                                                               \n\ndoc = Nokogiri::HTML(open(\"file\"))                                                                          \n\n\nputs doc.css('a.target') \n</code></pre>\n\n<p>How then do I dump the document <em>without</em> the nodes I've selected for?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 1, "creation_date": 1551856582, "post_id": 55017488, "comment_id": 96788657, "body": "Not sure what you are trying to do. Will <code>var[Regexp.new(&#39;\\((.*)\\)&#39;), 1]</code> not work?"}, {"owner": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 1, "creation_date": 1551856638, "post_id": 55017488, "comment_id": 96788687, "body": "I&#39;d ask why you&#39;re having to pass regexes around as strings."}, {"owner": {"reputation": 3523, "user_id": 9043475, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FNxvn.jpg?s=128&g=1", "display_name": "Rajagopalan", "link": "https://stackoverflow.com/users/9043475/rajagopalan"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1551856757, "post_id": 55017488, "comment_id": 96788734, "body": "@sawa It will work, but I am asking Don&#39;t I have the way to convert the entire <code>&#47;\\((.*)\\)&#47;, 1</code> into a regular expression?"}, {"owner": {"reputation": 3523, "user_id": 9043475, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FNxvn.jpg?s=128&g=1", "display_name": "Rajagopalan", "link": "https://stackoverflow.com/users/9043475/rajagopalan"}, "reply_to_user": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 0, "creation_date": 1551856777, "post_id": 55017488, "comment_id": 96788744, "body": "@Schwern Because I have to read the regular expression from the sheet and use it in my program."}, {"owner": {"reputation": 3523, "user_id": 9043475, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FNxvn.jpg?s=128&g=1", "display_name": "Rajagopalan", "link": "https://stackoverflow.com/users/9043475/rajagopalan"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1551856853, "post_id": 55017488, "comment_id": 96788787, "body": "@sawa I have to write the regular expression into a single cell in Excel which I need to read and use it in my program."}], "answers": [{"tags": [], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "is_accepted": true, "score": 3, "last_activity_date": 1551856883, "creation_date": 1551856883, "answer_id": 55017642, "question_id": 55017488, "link": "https://stackoverflow.com/questions/55017488/extracting-a-substring-from-a-string-using-regexp-new/55017642#55017642", "title": "Extracting a substring from a string using `Regexp.new`", "body": "<p>Not sure what you are trying to do, but you can get rid of capturing groups using a different regex:</p>\n\n<pre><code>var[/(?&lt;=\\().*(?=\\))/]\n# =&gt; \"Payment Pending\"\n</code></pre>\n\n<p>or</p>\n\n<pre><code>var[Regexp.new('(?&lt;=\\().*(?=\\))')]\n# =&gt; \"Payment Pending\"\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1551857115, "post_id": 55017683, "comment_id": 96788889, "body": "You might want to add the conclusion of you argument. Perhaps: &quot;so, it is impossible to do that&quot; or &quot;so, it does not make sense to try to do that.&quot;"}, {"owner": {"reputation": 3523, "user_id": 9043475, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FNxvn.jpg?s=128&g=1", "display_name": "Rajagopalan", "link": "https://stackoverflow.com/users/9043475/rajagopalan"}, "edited": false, "score": 0, "creation_date": 1551857192, "post_id": 55017683, "comment_id": 96788926, "body": "yes, I am aware of that but I have to read the regular expression as a single string from the excel sheet and use it in my program, My program receives the argument inside <code>Regex[&quot;]</code>"}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1551857247, "post_id": 55017683, "comment_id": 96788954, "body": "@Schwern It is impossible/does not make sense to include the <code>1</code> information in the regex. Wasn&#39;t that your point?"}, {"owner": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1551857302, "post_id": 55017683, "comment_id": 96788976, "body": "@sawa I&#39;d assumed it was a requirement that the list of regexes has to include a capture group."}, {"owner": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "reply_to_user": {"reputation": 3523, "user_id": 9043475, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FNxvn.jpg?s=128&g=1", "display_name": "Rajagopalan", "link": "https://stackoverflow.com/users/9043475/rajagopalan"}, "edited": false, "score": 0, "creation_date": 1551857316, "post_id": 55017683, "comment_id": 96788983, "body": "@Rajagopalan Can you require that the regexes include a capture group?"}, {"owner": {"reputation": 3523, "user_id": 9043475, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FNxvn.jpg?s=128&g=1", "display_name": "Rajagopalan", "link": "https://stackoverflow.com/users/9043475/rajagopalan"}, "edited": false, "score": 0, "creation_date": 1551857452, "post_id": 55017683, "comment_id": 96789052, "body": "I said I have written this regexp <code>var[&#47;\\((.*)\\)&#47;, 1]</code> to find out what I am expecting but I have to pass the argument to Regex.new[&#39;&#39;] to extract the expected string, so sawa answer perfectly fits for me."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1551861094, "post_id": 55017683, "comment_id": 96790886, "body": "I thinks it&#39;s instructive to show how it&#39;s done both with lookarounds (@sawa) and with a capture group (you), regardless of the wording of the question, as that choice is often available for these types of problems. A nitpik: I would say <code>1</code>, together with <code>:[]</code>, are passed (sent) to <code>var</code>."}], "tags": [], "owner": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "is_accepted": false, "score": 1, "last_activity_date": 1551857137, "last_edit_date": 1551857137, "creation_date": 1551857031, "answer_id": 55017683, "question_id": 55017488, "link": "https://stackoverflow.com/questions/55017488/extracting-a-substring-from-a-string-using-regexp-new/55017683#55017683", "title": "Extracting a substring from a string using `Regexp.new`", "body": "<p><code>/\\((.*)\\)/</code> is just shorthand for <code>Regexp.new('\\((.*)\\)')</code>.</p>\n\n<p><a href=\"https://ruby-doc.org/core/String.html#method-i-5B-5D\" rel=\"nofollow noreferrer\"><code>String#[]</code></a> takes a regex and a capture group as two separate arguments. <code>var[/\\((.*)\\)/, 1]</code> is <code>var[Regex, 1]</code>.</p>\n\n<p>The important thing to realize is <code>1</code> is passed to <code>var[]</code>, not the regex.</p>\n\n<pre><code>re = Regexp.new('\\((.*)\\)')\nmatch = var[re, 1]\n</code></pre>\n\n<p>Note: you might want to require a named capture group rather than a numbered one. It's very easy to accidentally include an extra capture group in a regex.</p>\n"}, {"comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1551860001, "post_id": 55018317, "comment_id": 96790299, "body": "Your answer is educational, but you seem to be missing the point. The issue is to express the entire instruction in a single string."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1551860362, "post_id": 55018317, "comment_id": 96790487, "body": "@sawa, yes, I know."}, {"owner": {"reputation": 3523, "user_id": 9043475, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FNxvn.jpg?s=128&g=1", "display_name": "Rajagopalan", "link": "https://stackoverflow.com/users/9043475/rajagopalan"}, "edited": false, "score": 0, "creation_date": 1551861385, "post_id": 55018317, "comment_id": 96791055, "body": "Thank you. Another way, yes. But it has to be one single expression."}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 1, "last_activity_date": 1551896055, "last_edit_date": 1551896055, "creation_date": 1551859761, "answer_id": 55018317, "question_id": 55017488, "link": "https://stackoverflow.com/questions/55017488/extracting-a-substring-from-a-string-using-regexp-new/55018317#55018317", "title": "Extracting a substring from a string using `Regexp.new`", "body": "<p>Assuming there are no nested parenthesis in the string, one way to do that without using a regular expression is as follows.</p>\n\n<pre><code>instance_eval \"var[(i=var.index('(')+1)..var.index(')',i)-1]\"\n  #=&gt; \"Payment Pending\"\n</code></pre>\n\n<p>See <a href=\"http://ruby-doc.org/core-2.5.1/String.html#method-i-index\" rel=\"nofollow noreferrer\">String#index</a>, particularly the reference to the optional second argument, \"offset\".</p>\n"}], "owner": {"reputation": 3523, "user_id": 9043475, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FNxvn.jpg?s=128&g=1", "display_name": "Rajagopalan", "link": "https://stackoverflow.com/users/9043475/rajagopalan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "accepted_answer_id": 55017642, "answer_count": 3, "score": 0, "last_activity_date": 1551896055, "creation_date": 1551856213, "last_edit_date": 1551857877, "question_id": 55017488, "link": "https://stackoverflow.com/questions/55017488/extracting-a-substring-from-a-string-using-regexp-new", "title": "Extracting a substring from a string using `Regexp.new`", "body": "<p>I have a string like this:</p>\n\n<pre><code>var = \"Renewal Quote RQ00041233 (Payment Pending) Policy R38A014294-1\"\n</code></pre>\n\n<p>I have to extract <code>\"Payment Pending\"</code> from that string using only the information included in another single string.</p>\n\n<p>The following:</p>\n\n<pre><code>var[/\\((.*)\\)/, 1]\n</code></pre>\n\n<p>will extract what I want. I can include the string representation of the regex in the string to be given, and construct the regular expression from it using <code>Regexp.new</code>, but I have no way to achieve the information <code>1</code> used as the second argument of <code>[]</code>.</p>\n\n<p>Without the second argument <code>1</code>,</p>\n\n<pre><code>regex_string = '\\((.*)\\)'\nvar[Regexp.new(regex_string)]\n</code></pre>\n\n<p>fetches the string <code>\"(Payment Pending)\"</code>instead of the expected <code>\"Payment Pending\"</code>.</p>\n\n<p>Can someone help me?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "jruby"], "comments": [{"owner": {"reputation": 48004, "user_id": 216513, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30a45c64b2ef288f7ec098c5fb353a22?s=128&d=identicon&r=PG", "display_name": "nathanvda", "link": "https://stackoverflow.com/users/216513/nathanvda"}, "edited": false, "score": 0, "creation_date": 1551857512, "post_id": 55016876, "comment_id": 96789084, "body": "Could you elaborate &quot;calling a java service&quot;, is that like SOAP? Anyway, when interacting with java objects directly, this might help: <a href=\"https://github.com/jruby/jruby/wiki/GeneratingJavaClasses\" rel=\"nofollow noreferrer\">github.com/jruby/jruby/wiki/GeneratingJavaClasses</a>"}, {"owner": {"reputation": 135, "user_id": 7061266, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aafbc4e2ddaaa46b8de7ab91ad0571e8?s=128&d=identicon&r=PG&f=1", "display_name": "laahaa", "link": "https://stackoverflow.com/users/7061266/laahaa"}, "reply_to_user": {"reputation": 48004, "user_id": 216513, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30a45c64b2ef288f7ec098c5fb353a22?s=128&d=identicon&r=PG", "display_name": "nathanvda", "link": "https://stackoverflow.com/users/216513/nathanvda"}, "edited": false, "score": 0, "creation_date": 1551905632, "post_id": 55016876, "comment_id": 96816531, "body": "It&#39;s a RESTful Java service. Updated in the description."}], "answers": [{"comments": [{"owner": {"reputation": 135, "user_id": 7061266, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aafbc4e2ddaaa46b8de7ab91ad0571e8?s=128&d=identicon&r=PG&f=1", "display_name": "laahaa", "link": "https://stackoverflow.com/users/7061266/laahaa"}, "edited": false, "score": 0, "creation_date": 1551905713, "post_id": 55023470, "comment_id": 96816559, "body": "Thanks, you&#39;re right. I think I might have messed up with something else. Tried to do it from scratch again and use <code>java.time.Instant</code>, it worked."}], "tags": [], "owner": {"reputation": 6788, "user_id": 454312, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jNMNF.jpg?s=128&g=1", "display_name": "kares", "link": "https://stackoverflow.com/users/454312/kares"}, "is_accepted": true, "score": 1, "last_activity_date": 1551876347, "creation_date": 1551876347, "answer_id": 55023470, "question_id": 55016876, "link": "https://stackoverflow.com/questions/55016876/jruby-cannot-convert-instance-of-class-org-jruby-rubyobject-to-class-java-time/55023470#55023470", "title": "JRuby: cannot convert instance of class org.jruby.RubyObject to class java.time.Instant", "body": "<p>JRuby 9.2 supports these by default when doing <code>Time/DateTime#to_java</code></p>\n\n<p>so when JRuby's Java Integration sees a <code>java.time.Instant</code> parameter it will auto-convert a Ruby <code>Time</code> (or <code>DateTime</code>) object. </p>\n\n<p>for (old) JRuby 1.7 this obviously won't work, but creating a <code>java.time.Instant</code> type directly really should have worked, so keep looking into that. its hard to tell what failure are you having with that.</p>\n"}], "owner": {"reputation": 135, "user_id": 7061266, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aafbc4e2ddaaa46b8de7ab91ad0571e8?s=128&d=identicon&r=PG&f=1", "display_name": "laahaa", "link": "https://stackoverflow.com/users/7061266/laahaa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 352, "favorite_count": 0, "accepted_answer_id": 55023470, "answer_count": 1, "score": 0, "last_activity_date": 1551894460, "creation_date": 1551853614, "last_edit_date": 1592644375, "question_id": 55016876, "link": "https://stackoverflow.com/questions/55016876/jruby-cannot-convert-instance-of-class-org-jruby-rubyobject-to-class-java-time", "title": "JRuby: cannot convert instance of class org.jruby.RubyObject to class java.time.Instant", "body": "<p>I'm developing on a Ruby on rails (Rails 3.2.22.4) application. Ruby is JRuby (jruby1.7.x).</p>\n<h2>Problem</h2>\n<p>I'm calling a RESTful Java service from this rails application. The request of calling java service contains <code>java.time.Instant</code>, I tried to use ruby <code>Time</code>, <code>DateTime</code>, and use <code>java_import</code> directly to create java.time.Instant, but none of them worked. I got</p>\n<blockquote>\n<p>TypeError: cannot convert instance of class org.jruby.RubyObject to class java.time.Instant</p>\n</blockquote>\n<h2>Question</h2>\n<p>Is there any ruby class, or other work around I should use to address this type conversion problem?</p>\n<p>Thanks!</p>\n"}, {"tags": ["javascript", "jquery", "ruby-on-rails", "ruby", "turbolinks"], "comments": [{"owner": {"reputation": 15122, "user_id": 4452553, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/TdlCJ.jpg?s=128&g=1", "display_name": "guradio", "link": "https://stackoverflow.com/users/4452553/guradio"}, "edited": false, "score": 0, "creation_date": 1551852301, "post_id": 55016411, "comment_id": 96786959, "body": "<code>$(document).on(&quot;focusout&quot;, &quot;.virtualkeyboard&quot;, addThousandSeperators);</code> inside document ready"}, {"owner": {"reputation": 1, "user_id": 11100497, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-q_NVhCOQ3yM/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQMUA6MiwOcpSHsLX_GsFuzwWgcs_A/mo/photo.jpg?sz=128", "display_name": "KEYUR PADARIYA", "link": "https://stackoverflow.com/users/11100497/keyur-padariya"}, "reply_to_user": {"reputation": 15122, "user_id": 4452553, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/TdlCJ.jpg?s=128&g=1", "display_name": "guradio", "link": "https://stackoverflow.com/users/4452553/guradio"}, "edited": false, "score": 0, "creation_date": 1551853147, "post_id": 55016411, "comment_id": 96787262, "body": "@guradio  Like that ?  $(document).ready(function() {   $(document).on(&quot;focusout&quot;, &quot;.virtualkeyboard&quot;, addThousandSeparators); });"}, {"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1551853483, "post_id": 55016411, "comment_id": 96787386, "body": "Are you using TurboLinks?"}, {"owner": {"reputation": 1, "user_id": 11100497, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-q_NVhCOQ3yM/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQMUA6MiwOcpSHsLX_GsFuzwWgcs_A/mo/photo.jpg?sz=128", "display_name": "KEYUR PADARIYA", "link": "https://stackoverflow.com/users/11100497/keyur-padariya"}, "reply_to_user": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1551853696, "post_id": 55016411, "comment_id": 96787479, "body": "@muistooshort yup"}, {"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1551861450, "post_id": 55016411, "comment_id": 96791096, "body": "Executive summary: <code>$(document).ready()</code> doesn&#39;t work with TurboLinks, you want <code>$(document).on(&#39;turbolinks:load&#39;, ...)</code> instead."}, {"owner": {"reputation": 1, "user_id": 11100497, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-q_NVhCOQ3yM/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQMUA6MiwOcpSHsLX_GsFuzwWgcs_A/mo/photo.jpg?sz=128", "display_name": "KEYUR PADARIYA", "link": "https://stackoverflow.com/users/11100497/keyur-padariya"}, "reply_to_user": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1551934833, "post_id": 55016411, "comment_id": 96824679, "body": "@muistooshort its working fine now thnks a lot"}], "owner": {"reputation": 1, "user_id": 11100497, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-q_NVhCOQ3yM/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQMUA6MiwOcpSHsLX_GsFuzwWgcs_A/mo/photo.jpg?sz=128", "display_name": "KEYUR PADARIYA", "link": "https://stackoverflow.com/users/11100497/keyur-padariya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 42, "favorite_count": 1, "closed_date": 1551861409, "answer_count": 0, "score": 0, "last_activity_date": 1551861464, "creation_date": 1551851418, "last_edit_date": 1551861464, "question_id": 55016411, "link": "https://stackoverflow.com/questions/55016411/how-to-call-a-function-on-onfocusout-event-in-jquery", "closed_reason": "Duplicate", "title": "How to call a function on onfocusout event in jquery", "body": "<p>When I am trying to call \"focusout\" jquery using class \"virtualkeyboard\" jquery doesn't call function of addThousandSeparator</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>function addThousandSeparators(nStr) {\r\n  nStr += '';\r\n  var x = nStr.split('.');\r\n  var x1 = x[0];\r\n  var x2 = x.length &gt; 1 ? '.' + x[1] : '';\r\n  var rgx = /(\\d+)(\\d{3})/;\r\n  while (rgx.test(x1)) {\r\n      x1 = x1.replace(rgx, '$1' + ' ' + '$2');\r\n  }\r\n  return x1 + x2;\r\n}\r\n\r\n$(document).on(\"focusout\", \".virtualkeyboard\", function(){\r\n    addThousandSeperators(this);\r\n  });</code></pre>\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;%= f.text_field :customer_price_estimation, :class =&gt; \"form-control virtualKeyboard w150\"%&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "testing", "minitest"], "comments": [{"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1551855096, "post_id": 55016342, "comment_id": 96788018, "body": "are you sure it&#39;s not <code>console</code>? Seems that way from the <a href=\"https://github.com/rails/web-console\" rel=\"nofollow noreferrer\">readme</a>. Not sure how this will work in tests though."}], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 10092374, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-QKi_Bcf8Q-0/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7otF2EgXWUMMt9Z4aKHFvxYhQG4ZQ/mo/photo.jpg?sz=128", "display_name": "Abdul rahim", "link": "https://stackoverflow.com/users/10092374/abdul-rahim"}, "edited": false, "score": 0, "creation_date": 1551877000, "post_id": 55017301, "comment_id": 96800357, "body": "I did that, but i&#39;m getting this message <code>Web Console is activated in the test environment. This is usually a mistake. To ensure it&#39;s only activated in development mode, move it to the development group of your Gemfile:      gem &#39;web-console&#39;, group: :development  If you still want to run it in the test environment (and know what you are doing), put this in your Rails application configuration:      config.web_console.development_only = false</code>"}], "tags": [], "owner": {"reputation": 1671, "user_id": 3427659, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/3KKqj.jpg?s=128&g=1", "display_name": "Kamal Panhwar", "link": "https://stackoverflow.com/users/3427659/kamal-panhwar"}, "is_accepted": false, "score": 0, "last_activity_date": 1551855448, "creation_date": 1551855448, "answer_id": 55017301, "question_id": 55016342, "link": "https://stackoverflow.com/questions/55016342/missing-method-when-include-require-test-helper/55017301#55017301", "title": "Missing Method when include require &#39;test_helper&#39;", "body": "<p>Please put <code>gem 'web-console'</code> into your Gemfile's test section. You can change the following lines</p>\n\n<pre><code>group :development, :test do\n  gem 'pry'\n\n  # Use mysql as the database for Active Record\n  gem 'mysql2', '~&gt; 0.4.6'\nend\n</code></pre>\n\n<p>with following</p>\n\n<pre><code>group :development, :test do\n  gem 'pry'\n  gem 'web-console'\n  # Use mysql as the database for Active Record\n  gem 'mysql2', '~&gt; 0.4.6'\nend\n</code></pre>\n\n<p>And remove <code>web-console</code> from following lines</p>\n\n<pre><code>group :development do\n  gem 'wdm', '&gt;= 0.1.0' if Gem.win_platform?\n  # Access an IRB console on exception pages or by using &lt;%= console %&gt; anywhere in the code.\n  gem 'web-console' # remove this\n</code></pre>\n\n<p>Now run following command to update bundles</p>\n\n<pre><code>bundle install\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 10092374, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-QKi_Bcf8Q-0/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7otF2EgXWUMMt9Z4aKHFvxYhQG4ZQ/mo/photo.jpg?sz=128", "display_name": "Abdul rahim", "link": "https://stackoverflow.com/users/10092374/abdul-rahim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 105, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1551855448, "creation_date": 1551851102, "question_id": 55016342, "link": "https://stackoverflow.com/questions/55016342/missing-method-when-include-require-test-helper", "title": "Missing Method when include require &#39;test_helper&#39;", "body": "<p>i'm trying to test using minitest but when running this file with</p>\n\n<blockquote>\n  <p>bin/rails test test/controllers/api/v1/blogs_api_controller_test.rb</p>\n</blockquote>\n\n<p>But it gives this error</p>\n\n<blockquote>\n  <p>.rvm/gems/ruby-2.3.1/gems/railties-5.1.1/lib/rails/railtie/configuration.rb:95:in\n  <code>method_missing': undefined method</code>web_console' for</p>\n  \n  <h1> (NoMethodError) Did you mean?  console</h1>\n</blockquote>\n\n<pre><code>require 'test_helper'\n\nclass BlogsApiControllerTest &lt; ActiveSupport::TestCase\n  test 'Get all Blogs' do\n    assert false\n  end\nend\n</code></pre>\n\n<p>Rails version <code>5.1.1</code> Ruby <code>2.3.1</code></p>\n\n<p>Gem File</p>\n\n<pre><code>source 'https://rubygems.org'\n\n\n# Bundle edge Rails instead: gem 'rails', github: 'rails/rails'\ngem 'rails', '~&gt; 5.1.1'\n# Use Puma as the app server\ngem 'puma', '~&gt; 3.8.2'\n# Use SCSS for stylesheets\ngem 'sass-rails', '~&gt; 5.0'\n# Use Uglifier as compressor for JavaScript assets\ngem 'uglifier', '&gt;= 3.2.0'\n# Use CoffeeScript for .coffee assets and views\ngem 'coffee-rails', '~&gt; 4.2'\n# See https://github.com/rails/execjs#readme for more supported runtimes\n# gem 'therubyracer', platforms: :ruby\n\n# Use jquery as the JavaScript library\ngem 'jquery-rails', '~&gt; 4.1.1'\n# Turbolinks makes navigating your web application faster. Read more: https://github.com/turbolinks/turbolinks\ngem 'turbolinks', '~&gt; 5'\n# Build JSON APIs with ease. Read more: https://github.com/rails/jbuilder\ngem 'jbuilder', '~&gt; 2.6'\n# Use Redis adapter to run Action Cable in production\n# gem 'redis', '~&gt; 3.0'\n\ngem 'kaminari', '~&gt; 0.17.0'\ngem 'bootsy', '~&gt; 2.4'\ngem 'searchkick', '~&gt; 3.0.2'\ngem 'devise', '~&gt; 4.3.0'\ngem 'omniauth-facebook', '~&gt; 3.0.0'\ngem 'omniauth-google-oauth2', '~&gt; 0.4.1'\n\ngem 'cancancan', '~&gt; 1.15.0'\ngem 'paperclip', '~&gt; 5.0.0'\ngem 'sitemap_generator', '~&gt; 5.1.0'\ngem 'jwt'\ngem 'simple_command'\n\ngem 'rack-cors', require: 'rack/cors'\n\n# For admin panel ----------------\ngem 'activeadmin', '~&gt; 1.0.0'\n# Below are for rails 5\n# gem 'inherited_resources', github: 'activeadmin/inherited_resources'\n# gem 'ransack',             github: 'activerecord-hackery/ransack'\ngem 'draper',              '~&gt; 3.0.1'\n# ---------------------\n\ngroup :development, :test do\n  gem 'pry'\n\n  # Use mysql as the database for Active Record\n  gem 'mysql2', '~&gt; 0.4.6'\nend\n\ngroup :development do\n  gem 'wdm', '&gt;= 0.1.0' if Gem.win_platform?\n  # Access an IRB console on exception pages or by using &lt;%= console %&gt; anywhere in the code.\n  gem 'web-console'\n  gem 'listen', '~&gt; 3.0.8'\n  # Spring speeds up development by keeping your application running in the background. Read more: https://github.com/rails/spring\n  gem 'spring'\n  gem 'spring-watcher-listen', '~&gt; 2.0.1'\nend\n\ngroup :production do\n  gem 'pg', '~&gt; 0.18.4'\nend\n\n# Windows does not include zoneinfo files, so bundle the tzinfo-data gem\ngem 'tzinfo-data', platforms: [:mingw, :mswin, :x64_mingw, :jruby]\n</code></pre>\n"}, {"tags": ["ruby", "jruby", "string-interning"], "comments": [{"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 1, "creation_date": 1551865418, "post_id": 55015379, "comment_id": 96793378, "body": "According to the docs, JRuby implements Ruby 2.5. If you cannot find an explicit mention that some feature of Ruby 2.5 is not supported, then I would assume that it is implemented. It would be crazy to list every single feature of Ruby 2.5 that is implemented (even the ISO Ruby Spec is already over 300 pages, and that is just a subset of Ruby 1.9, so listing every single feature of Ruby 2.5 would probably be a thousand pages long), therefore only the deviations are listed."}], "owner": {"reputation": 3618, "user_id": 2621216, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/51uHg.jpg?s=128&g=1", "display_name": "Gavin", "link": "https://stackoverflow.com/users/2621216/gavin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 57, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1551845369, "creation_date": 1551845053, "last_edit_date": 1551845369, "question_id": 55015379, "link": "https://stackoverflow.com/questions/55015379/does-jruby-implement-frozen-string-literal-magic-comment", "title": "Does JRuby implement frozen_string_literal magic comment?", "body": "<p>The <code>frozen_string_literal: true</code> magic comment was <a href=\"https://bugs.ruby-lang.org/issues/8976\" rel=\"nofollow noreferrer\">added since Ruby 2.3</a>.</p>\n\n<p>However, I cannot find a definitive answer about whether JRuby implements the magic comment.</p>\n\n<p>Or were JRuby already optimized with <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html#intern()\" rel=\"nofollow noreferrer\">string interning</a> thus rendering the magic comment not necessary?</p>\n"}, {"tags": ["ruby", "rspec"], "answers": [{"tags": [], "owner": {"reputation": 119, "user_id": 1232045, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1484663c66032b3ff3e0934cdecbebf?s=128&d=identicon&r=PG&f=1", "display_name": "Hoa.Nguyen", "link": "https://stackoverflow.com/users/1232045/hoa-nguyen"}, "is_accepted": false, "score": 1, "last_activity_date": 1551856334, "creation_date": 1551856334, "answer_id": 55017519, "question_id": 55015349, "link": "https://stackoverflow.com/questions/55015349/rspec-is-it-possible-to-stub-a-hash/55017519#55017519", "title": "Rspec - Is it possible to stub a hash", "body": "<p>Yes it possible, but keep in mind that stub only works when you trigger/call the method that you stubbed/mocked</p>\n\n<pre><code>my_hash = {:uri=&gt;nil}\nallow(my_hash).to receive(:[]).with(:uri).and_return('Over written!')\np my_hash[:url] # it will be 'Over written!'\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 5764, "user_id": 3033691, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/0d3286fd40aade0e7bf90d4d0eda0f29?s=128&d=identicon&r=PG&f=1", "display_name": "userMod2", "link": "https://stackoverflow.com/users/3033691/usermod2"}, "edited": false, "score": 0, "creation_date": 1551856820, "post_id": 55017550, "comment_id": 96788770, "body": "So when you say <code>if you call MyBigApp::Env[&#39;country&#39;] and stub MyBigApp::Env to receive [] with &#39;country&#39;, it should work.</code> you mean this: <code>allow(MyBigApp::Env).to receive(&#39;country&#39;).and_return(&#39;gr&#39;)</code>. I tried that already with no luck?"}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "reply_to_user": {"reputation": 5764, "user_id": 3033691, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/0d3286fd40aade0e7bf90d4d0eda0f29?s=128&d=identicon&r=PG&f=1", "display_name": "userMod2", "link": "https://stackoverflow.com/users/3033691/usermod2"}, "edited": false, "score": 0, "creation_date": 1551860689, "post_id": 55017550, "comment_id": 96790664, "body": "There is a difference between <code>MyBigApp::Env[&#39;country&#39;]</code> and <code>MyBigApp::Env.country</code>."}], "tags": [], "owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "is_accepted": false, "score": 1, "last_activity_date": 1551856447, "creation_date": 1551856447, "answer_id": 55017550, "question_id": 55015349, "link": "https://stackoverflow.com/questions/55015349/rspec-is-it-possible-to-stub-a-hash/55017550#55017550", "title": "Rspec - Is it possible to stub a hash", "body": "<p>This works for me:</p>\n\n<pre><code>my_hash = {:uri=&gt;nil}\nallow(my_hash).to receive(:[]).with(:uri).and_return('Over written!')\nexpect(my_hash[:uri]).to eq \"Over written!\"\n</code></pre>\n\n<p>In your sample test case, you are just calling <code>p my_hash</code> which doesn't actually call the <code>[]</code> method. </p>\n\n<p>In terms of why this isn't working with <code>MyBigApp::Env</code>, well, that really depends on what class it is. Possible whatever method <code>.country</code> is doesn't actually call <code>[]</code>.</p>\n\n<p>Really, if you call <code>MyBigApp::Env['country']</code> and stub <code>MyBigApp::Env</code> to receive <code>[]</code> with <code>'country'</code>, it <em>should</em> work. </p>\n\n<p>In regards to your concern about changing your running application's behavior from the tests ... what kind of tests are these?! Running unit tests against a live production application would be very odd. How do you imagine it would change your production app's code? The <code>Env</code> hash just lives in memory right?</p>\n\n<p>Anyway, you should never have to worry about your tests changing the experience for an 'end user'. Always run tests on a completely quarantined envionment, meaning don't use the same database. Actually, the test database is usually wiped after each test. </p>\n"}, {"comments": [{"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1551856682, "post_id": 55017568, "comment_id": 96788707, "body": "this is &#39;dependency injection&#39;, lots of debate over whether it&#39;s good or not but I think it&#39;s alright :)"}, {"owner": {"reputation": 11603, "user_id": 234593, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/8e2ee1b00d372ad8f6ed5e87385ffef5?s=128&d=identicon&r=PG", "display_name": "Kache", "link": "https://stackoverflow.com/users/234593/kache"}, "reply_to_user": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1551856809, "post_id": 55017568, "comment_id": 96788764, "body": "Yes, it is. Don&#39;t think there&#39;s much debate though. I&#39;m pretty sure it&#39;s generally agreed the SOLID principles are &quot;Good Things&quot;, and this is the &quot;D&quot;."}, {"owner": {"reputation": 70793, "user_id": 28128, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/4e974a514f0764fdfe99a8915f192002?s=128&d=identicon&r=PG", "display_name": "David Grayson", "link": "https://stackoverflow.com/users/28128/david-grayson"}, "edited": false, "score": 0, "creation_date": 1551858965, "post_id": 55017568, "comment_id": 96789780, "body": "This does not answer the question and encourages <a href=\"https://dhh.dk/2014/test-induced-design-damage.html\" rel=\"nofollow noreferrer\">test-induced design damage</a>."}, {"owner": {"reputation": 11603, "user_id": 234593, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/8e2ee1b00d372ad8f6ed5e87385ffef5?s=128&d=identicon&r=PG", "display_name": "Kache", "link": "https://stackoverflow.com/users/234593/kache"}, "edited": false, "score": 0, "creation_date": 1551859305, "post_id": 55017568, "comment_id": 96789960, "body": "Mocking has its place, e.g external/expensive service, this is only just a simple value hash and an alternative solution. It&#39;s hyperbole to say that paying heed to SOLID &quot;induces damage&quot;."}], "tags": [], "owner": {"reputation": 11603, "user_id": 234593, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/8e2ee1b00d372ad8f6ed5e87385ffef5?s=128&d=identicon&r=PG", "display_name": "Kache", "link": "https://stackoverflow.com/users/234593/kache"}, "is_accepted": false, "score": 0, "last_activity_date": 1551856687, "last_edit_date": 1551856687, "creation_date": 1551856528, "answer_id": 55017568, "question_id": 55015349, "link": "https://stackoverflow.com/questions/55015349/rspec-is-it-possible-to-stub-a-hash/55017568#55017568", "title": "Rspec - Is it possible to stub a hash", "body": "<p>Just wanted to suggest a non-stubbing alternative. For example:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>def code_under_test\n  key = 'country'\n\n  # ... maybe lots of code\n\n  value = MyBigApp::Env[key] # deep inside some classes\n\n  # ... lots more code\n\n  \"This is the #{value}\"\nend\n</code></pre>\n\n<p><code>MyBigApp::Env</code> is hard-coded deep in the code, and the need for stubbing reveals that dependency, and the benefits of OOP encapsulation are lost.</p>\n\n<p>It'd be much easier if this were the case:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>def code_under_test(config_vars = MyBigApp::Env)\n  \"This is the #{config_vars['country']}\"\nend\n\nit 'should return my country value' do\n  value = previous_code_under_test('country' =&gt; 'TEST VALUE')\n  expect(value).to eq(\"This is the TEST VALUE\")\nend\n</code></pre>\n\n<p>No stubbing required, just plain old method calls.</p>\n"}], "owner": {"reputation": 5764, "user_id": 3033691, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/0d3286fd40aade0e7bf90d4d0eda0f29?s=128&d=identicon&r=PG&f=1", "display_name": "userMod2", "link": "https://stackoverflow.com/users/3033691/usermod2"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 737, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1551856687, "creation_date": 1551844803, "last_edit_date": 1551851862, "question_id": 55015349, "link": "https://stackoverflow.com/questions/55015349/rspec-is-it-possible-to-stub-a-hash", "title": "Rspec - Is it possible to stub a hash", "body": "<p>I'm working on some unit tests. One of them use a specific configuration variable as set in my application <code>MyBigApp::Env</code> which looks like:</p>\n\n<p><code>{:country=&gt;'uk', :another_hosts=&gt;[\"192.168.99.105\"]}</code></p>\n\n<p>So I access it with <code>MyBigApp::Env.country</code></p>\n\n<p>However in my unit test I want that <code>country</code> for the test become something.</p>\n\n<p>Using rspec I've seen stub but can't get it to work - any ideas where I'm going wrong:</p>\n\n<p><code>MyBigApp::Env.stub(:[]).with('country').and_return('gr')</code></p>\n\n<p>Also tried this (as above shows deprecated):</p>\n\n<p><code>allow(MyBigApp::Env).to receive('country').and_return('gr')</code></p>\n\n<p>Infact as a test, I also tried:</p>\n\n<pre><code>my_hash = {:uri=&gt;nil}\nallow(my_hash).to receive(:[]).with(:uri).and_return('Over written!')\np my_hash\n</code></pre>\n\n<p>and that didnt update either - it just returned <code>{:uri=&gt;nil}</code></p>\n\n<p>As a workaround, at the moment I'm having to save the env var in a temp var in the <code>before(each)</code> block then return it back to the original in the <code>after(each)</code>. This feels really risky to me. I'm thinking imagine the service running and someone runs unit tests it could effect the end user in that small instance the test is running. </p>\n\n<p>Any help would be appreciated.</p>\n\n<p>Thanks</p>\n"}, {"tags": ["regex", "ruby"], "comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 6, "creation_date": 1551842306, "post_id": 55014934, "comment_id": 96784287, "body": "Just change <code>&quot;hey&quot;</code> to <code>&#47;\\bhey\\b&#47;</code> in <code>a.gsub! &quot;hey&quot;, &quot;wrong&quot;</code>. <code>&#47;\\bhey\\b&#47;</code> is a regular expression <code>\\b</code> is called a &quot;word break&quot;. It requires <code>&quot;hey&quot;</code> to not be immediately preceded or followed by a &quot;word&quot; character (a letter, digit or underscore). Don&#39;t be surprised if your question is closed because it&#39;s a duplicate, as a form of it has been asked many times."}, {"owner": {"reputation": 81, "user_id": 9895611, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a148cc73a38f9a3261f6889cb1c76e61?s=128&d=identicon&r=PG&f=1", "display_name": "Alexander Bishop", "link": "https://stackoverflow.com/users/9895611/alexander-bishop"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1551842771, "post_id": 55014934, "comment_id": 96784376, "body": "Bless ya mate you have done more then you could know."}], "answers": [{"tags": [], "owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "is_accepted": true, "score": 1, "last_activity_date": 1551846159, "creation_date": 1551846159, "answer_id": 55015532, "question_id": 55014934, "link": "https://stackoverflow.com/questions/55014934/can-you-match-words-without-matching-parts-of-words-with-the-same-spelling/55015532#55015532", "title": "Can you match words without matching parts of words with the same spelling?", "body": "<p>As others have posted in comments, one way you can do this is with a regular expression in your gsub</p>\n\n<pre><code>  a = \"hey how is the heyday\"\n  a.gsub(/hey\\b/,'wrong')\n</code></pre>\n\n<p>The regex here is looking for the word <code>hey</code> with a word boundary.\nBut also note than when you use <code>gsub!</code> you modify the variable you were calling it on.  If you want to assign a new variable the result, use <code>gsub</code> alone without a bang.</p>\n"}], "owner": {"reputation": 81, "user_id": 9895611, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a148cc73a38f9a3261f6889cb1c76e61?s=128&d=identicon&r=PG&f=1", "display_name": "Alexander Bishop", "link": "https://stackoverflow.com/users/9895611/alexander-bishop"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "accepted_answer_id": 55015532, "answer_count": 1, "score": 2, "last_activity_date": 1551850763, "creation_date": 1551841877, "last_edit_date": 1551850763, "question_id": 55014934, "link": "https://stackoverflow.com/questions/55014934/can-you-match-words-without-matching-parts-of-words-with-the-same-spelling", "title": "Can you match words without matching parts of words with the same spelling?", "body": "<p>I was wondering if there was a way to replace independent words in a string without changing parts of words with the same spelling.  An example is to convert:</p>\n\n<pre><code>a = \"hey how is the heyday\"\n</code></pre>\n\n<p>into:</p>\n\n<pre><code>\"wrong how is the heyday\"\n</code></pre>\n\n<p>Is there a way to do this?</p>\n\n<p>This will not work:</p>\n\n<pre><code>a.gsub! \"hey\", \"wrong\"\n# =&gt; \"wrong how is the wrongday\" \n</code></pre>\n"}, {"tags": ["arrays", "ruby"], "comments": [{"owner": {"reputation": 893, "user_id": 3394889, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a3c58b23ce03f0e71522820d13404d5a?s=128&d=identicon&r=PG&f=1", "display_name": "The Wizard", "link": "https://stackoverflow.com/users/3394889/the-wizard"}, "edited": false, "score": 1, "creation_date": 1551843744, "post_id": 55014908, "comment_id": 96784582, "body": "What makes -0.5 a negative peak?"}, {"owner": {"reputation": 690, "user_id": 2390233, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f8cd867dfd775e56b1944f6f9af465bc?s=128&d=identicon&r=PG", "display_name": "ecki", "link": "https://stackoverflow.com/users/2390233/ecki"}, "reply_to_user": {"reputation": 893, "user_id": 3394889, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a3c58b23ce03f0e71522820d13404d5a?s=128&d=identicon&r=PG&f=1", "display_name": "The Wizard", "link": "https://stackoverflow.com/users/3394889/the-wizard"}, "edited": false, "score": 0, "creation_date": 1551844318, "post_id": 55014908, "comment_id": 96784704, "body": "@ElChapo because the data before it is closer to 0 than -0.5 is"}, {"owner": {"reputation": 893, "user_id": 3394889, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a3c58b23ce03f0e71522820d13404d5a?s=128&d=identicon&r=PG&f=1", "display_name": "The Wizard", "link": "https://stackoverflow.com/users/3394889/the-wizard"}, "edited": false, "score": 0, "creation_date": 1551844837, "post_id": 55014908, "comment_id": 96784806, "body": "So in that case would every final element be a peak/trough?. Peak if the element before it is closer to 0, Trough if the element before it is further from 0."}, {"owner": {"reputation": 690, "user_id": 2390233, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f8cd867dfd775e56b1944f6f9af465bc?s=128&d=identicon&r=PG", "display_name": "ecki", "link": "https://stackoverflow.com/users/2390233/ecki"}, "reply_to_user": {"reputation": 893, "user_id": 3394889, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a3c58b23ce03f0e71522820d13404d5a?s=128&d=identicon&r=PG&f=1", "display_name": "The Wizard", "link": "https://stackoverflow.com/users/3394889/the-wizard"}, "edited": false, "score": 2, "creation_date": 1551844903, "post_id": 55014908, "comment_id": 96784815, "body": "That&#39;s a reasonable point to make. I would say exclude the final element then as I suppose it cannot be determined if it is a true peak or not"}, {"owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "edited": false, "score": 0, "creation_date": 1551850291, "post_id": 55014908, "comment_id": 96786254, "body": "This can be done using <code>inject</code> also"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1551860707, "post_id": 55014908, "comment_id": 96790677, "body": "What if a peak / trough spans multiple elements, e.g. <code>[0.1, 0.6, 0.6, 0.2]</code>?"}], "answers": [{"tags": [], "owner": {"reputation": 893, "user_id": 3394889, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a3c58b23ce03f0e71522820d13404d5a?s=128&d=identicon&r=PG&f=1", "display_name": "The Wizard", "link": "https://stackoverflow.com/users/3394889/the-wizard"}, "is_accepted": false, "score": 1, "last_activity_date": 1551845693, "creation_date": 1551845693, "answer_id": 55015469, "question_id": 55014908, "link": "https://stackoverflow.com/questions/55014908/how-to-identify-peaks-and-troughs-in-an-array-of-floats/55015469#55015469", "title": "How to identify peaks and troughs in an array of floats?", "body": "<p>First let's define what it means for something to be a peak or a trough.</p>\n\n<ul>\n<li>A peak is a value which is LARGER than the value on it's left &amp; right.</li>\n<li>A trough is a value which is SMALLER than the value on it's left &amp; right.</li>\n</ul>\n\n<p>This will allow us to define two helpful functions:</p>\n\n<pre><code>def is_peak?(left_value, value, right_value)\n  return value &gt; left_value &amp;&amp; value &gt; right_value\nend\n\ndef is_trough?(left_value, value, right_value)\n  return value &lt; left_value &amp;&amp; value &lt; right_value\nend\n</code></pre>\n\n<p>Now we can go through each element in the array and use these functions to ask whether the element is a peak or a trough.</p>\n\n<pre><code>array = [0.43, 0.64, 0.2, -0.05, -0.15, 0.2, -0.1, -0.5]\npositive_peak_indexes = []\nnegative_peak_indexes = []\n# Loop through the array\narray.each_with_index do |elem, i|\n  # Make sure we don't get an out of bounds exception\n  next if (i-1 &lt; 0) || (i + 1 &gt;= array.length)\n\n  # Now we add to our appropriate arrays if it's a peak/trough\n  positive_peak_indexes &lt;&lt; i if is_peak?(array[i-1], elem, array[i+1])\n  negative_peak_indexes &lt;&lt; i if is_trough?(array[i-1], elem, array[i+1])\nend\nputs \"positive_peak_indexes = #{positive_peak_indexes.to_s}\"\nputs \"negative_peak_indexes = #{negative_peak_indexes.to_s}\"\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1551861330, "post_id": 55016921, "comment_id": 96791023, "body": "<code>a.max == a[1]</code> / <code>a.min == a[1]</code> give false positives if there are multiple identical entries, e.g. <code>[0.1, 0.2, 0.2, 0.3]</code>. You should instead check if the middle element is actually greater than (not greater than or equal to) its neighbors, e.g. via <code>|(a, b, c), i| a &lt; b &amp;&amp; b &gt; c }</code>"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1551863455, "post_id": 55016921, "comment_id": 96792184, "body": "Wish Ruby had chained comparisons like Python does. <code>a &lt; b &gt; c</code> would look so cool."}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1551865993, "post_id": 55016921, "comment_id": 96793713, "body": "@Stefan I think that would make the syntax complicated. That expression would have to be understood as a single construction, not as successive application of two methods. I.e., <code>a &lt; b&gt; c</code> would not be meant to mean <code>(a &lt; b) &gt; c</code>. Some mathematical expressions are not suitable for programming. Another example is <code>$a, b \\in A$</code>, which would perhaps be confused with multiple assignment if it were imported to Ruby."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1551869663, "post_id": 55016921, "comment_id": 96796103, "body": "<code>(a &lt; b) &gt; c</code> doesn&#39;t make much sense anyway, because <code>a &lt; b</code> returns either <code>true</code> of <code>false</code>, neither of which responds to <code>&gt;</code>. Unfortunately, <code>1 &lt; 2 == true</code> would be evaluated differently, so this might break existing code. That aside, I think it&#39;s <i>very</i> suitable for programming."}], "tags": [], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "is_accepted": true, "score": 2, "last_activity_date": 1551862932, "last_edit_date": 1551862932, "creation_date": 1551853819, "answer_id": 55016921, "question_id": 55014908, "link": "https://stackoverflow.com/questions/55014908/how-to-identify-peaks-and-troughs-in-an-array-of-floats/55016921#55016921", "title": "How to identify peaks and troughs in an array of floats?", "body": "<p><code>each_cons(3)</code> extracts adjacent three terms needed to examine the middle term while excluding the triplets with the first or the last element of <code>array</code> in the middle.</p>\n\n<p><code>with_index(1)</code> considers the fact that the triplet with the first element of <code>array</code> in the middle was skipped, thus numbering the indices starting from 1.</p>\n\n<p>You have not defined what you mean by peaks and troughs. If you mean to take the local max and min, then the following will work.</p>\n\n<pre><code>array.each_cons(3).with_index(1).select{|a, i| a.max == a[1]}.map(&amp;:last)\n# =&gt; [1, 5]\n\narray.each_cons(3).with_index(1).select{|a, i| a.min == a[1]}.map(&amp;:last)\n# =&gt; [4, 7]\n</code></pre>\n\n<p>Or, if you mean what Stefan explains in the comment to my answer, then the following will work:</p>\n\n<pre><code>array\n.each_cons(3)\n.with_index(1)\n.select{|(a1, a2, a3), i| a1 &lt; a2 &amp;&amp; a2 &gt; a3}\n.map(&amp;:last)\n# =&gt; [1, 5]\n\narray\n.each_cons(3)\n.with_index(1)\n.select{|(a1, a2, a3), i| a1 &gt; a2 &amp;&amp; a2 &lt; a3}\n.map(&amp;:last)\n# =&gt; [4, 7]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "is_accepted": false, "score": 0, "last_activity_date": 1551855619, "creation_date": 1551855619, "answer_id": 55017342, "question_id": 55014908, "link": "https://stackoverflow.com/questions/55014908/how-to-identify-peaks-and-troughs-in-an-array-of-floats/55017342#55017342", "title": "How to identify peaks and troughs in an array of floats?", "body": "<p>I did not had the time to test on more cases, so maybe there is some bug.</p>\n\n<p>Anyway, the basic idea is to zip each element with it's index (<a href=\"https://ruby-doc.org/core-2.6.1/Enumerable.html#method-i-each_with_index\" rel=\"nofollow noreferrer\">Enumerable#each_with_index</a>), then use the method <a href=\"https://ruby-doc.org/core-2.6.1/Enumerable.html#method-i-chunk_while\" rel=\"nofollow noreferrer\">Enumerable#chunk_while</a> to slice the array when there is a change. Finally extract from the chunks the extremes.</p>\n\n<p>Better with a piece of code, <code>ary</code> is the array of data.</p>\n\n<p>First the chunks:</p>\n\n<pre><code>chunks = ary.map.with_index{ |x, i| [x,i] }.chunk_while { |x,y| y.first &lt; x.first }\n</code></pre>\n\n<p>Then collect the extremes:</p>\n\n<pre><code>peaks = chunks.collect { |e| e.first if e.size &gt; 1 }.compact #=&gt; [[0.64, 1], [0.2, 5]]\ntrough = chunks.collect { |e| e.last if e.size &gt; 1 }.compact #=&gt; [[-0.15, 4], [-0.5, 7]]\n</code></pre>\n"}], "owner": {"reputation": 690, "user_id": 2390233, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f8cd867dfd775e56b1944f6f9af465bc?s=128&d=identicon&r=PG", "display_name": "ecki", "link": "https://stackoverflow.com/users/2390233/ecki"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 582, "favorite_count": 0, "accepted_answer_id": 55016921, "answer_count": 3, "score": 0, "last_activity_date": 1551862932, "creation_date": 1551841665, "last_edit_date": 1551853178, "question_id": 55014908, "link": "https://stackoverflow.com/questions/55014908/how-to-identify-peaks-and-troughs-in-an-array-of-floats", "title": "How to identify peaks and troughs in an array of floats?", "body": "<p>I have an array,</p>\n\n<pre><code>array = [\n  0.43, \n  0.64, # =&gt; peak\n  0.2, \n -0.05, \n -0.15, # =&gt; trough\n  0.2, # =&gt; peak\n -0.1, \n -0.5, # =&gt; trough\n -0.3\n]\n</code></pre>\n\n<p>which has two peaks and two troughs in the data. These peaks and troughs are not necessarily the <em>min</em> and <em>max</em> of the array. How do I identify those by program?</p>\n\n<p>The ideal output would be:</p>\n\n<pre><code>peak_indexes = [1, 5]\ntrough_indexes = [4, 7]\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5.2"], "answers": [{"comments": [{"owner": {"reputation": 4416, "user_id": 2012677, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/8d7cb2fe712fb17f44f8c354bf37e7b5?s=128&d=identicon&r=PG&f=1", "display_name": "user2012677", "link": "https://stackoverflow.com/users/2012677/user2012677"}, "edited": false, "score": 0, "creation_date": 1551928313, "post_id": 55014966, "comment_id": 96823157, "body": "I am now getting an error, NoMethodError (undefined method `with_indifferent_access&#39; for #&lt;ActionController::Parameters:0x00007ffc379ebac0&gt;):"}], "tags": [], "owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "is_accepted": true, "score": 1, "last_activity_date": 1551842606, "last_edit_date": 1551842606, "creation_date": 1551842137, "answer_id": 55014966, "question_id": 55014886, "link": "https://stackoverflow.com/questions/55014886/initializing-new-object-with-parameters-fail-without-symbols/55014966#55014966", "title": "Initializing new object with parameters fail without symbols", "body": "<p>Because in</p>\n\n<pre><code>attributes.keys.map{|i| i.to_sym }\n</code></pre>\n\n<p>You're mapping each key to a symbol, and then accessing them in <code>attributes</code> as a symbol, when they're string keys.</p>\n\n<p>So you end up doing something like:</p>\n\n<pre><code>{ \"has_car\" =&gt; \"true\", \"has_truck\" =&gt; \"true\", \"has_boat\" =&gt; \"true\", ... }[:has_car]\n# nil\n</code></pre>\n\n<hr>\n\n<p>A possible solution would be to create a new variable, invoking <a href=\"https://api.rubyonrails.org/classes/Hash.html#method-i-with_indifferent_access\" rel=\"nofollow noreferrer\"><code>with_indifferent_access</code></a> on <code>attributes</code>:</p>\n\n<pre><code>indifferent_access_attributes = attributes.with_indifferent_access\n(self.class.car_fields &amp; indifferent_access_attributes.keys.map(&amp;:to_sym)).each do |field|\n  seller[field] = indifferent_access_attributes[field]\nend\n</code></pre>\n\n<p>Another one would be to define just a format of keys and work with that during the whole process. So, don't map to symbol the <code>attributes</code> keys.</p>\n"}], "owner": {"reputation": 4416, "user_id": 2012677, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/8d7cb2fe712fb17f44f8c354bf37e7b5?s=128&d=identicon&r=PG&f=1", "display_name": "user2012677", "link": "https://stackoverflow.com/users/2012677/user2012677"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 79, "favorite_count": 0, "accepted_answer_id": 55014966, "answer_count": 1, "score": 1, "last_activity_date": 1551842606, "creation_date": 1551841488, "last_edit_date": 1551842149, "question_id": 55014886, "link": "https://stackoverflow.com/questions/55014886/initializing-new-object-with-parameters-fail-without-symbols", "title": "Initializing new object with parameters fail without symbols", "body": "<pre><code>def initialize(user=nil, attributes={})\n      @user = user\n      (self.class.car_fields &amp; attributes.keys.map{|i| i.to_sym }).each do |f|\n        car[f] =  attributes[f] if attributes.key?(f)\n      end\n      validate!\n    end \n</code></pre>\n\n<h3>Method Call</h3>\n\n<pre><code> attributes = { \"has_car\" =&gt; \"true\", \"has_truck\" =&gt; \"true\", \"has_boat\" =&gt; \"true\", \"color\" =&gt; \"blue value\", \"size\" =&gt; \"large value\" }\nCar.new(user, attributes)\n</code></pre>\n\n<p>the attributes do not update for validation in my model.</p>\n\n<p>However, if I pass a hash with all symbols it works.</p>\n\n<pre><code> attributes_symbols = { :has_car =&gt; \"true\", :has_truck =&gt; \"true\", :has_boat =&gt; \"true\", :color =&gt; \"blue value\", :size=&gt; \"large value\" }\n\nCar.new(user, attributes_symbols)\n</code></pre>\n\n<h3>Why is it that when I pass symbols my model see the fields, but in the former case it acts as though the fields were never passed?</h3>\n"}, {"tags": ["ruby", "rspec"], "answers": [{"comments": [{"owner": {"reputation": 5764, "user_id": 3033691, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/0d3286fd40aade0e7bf90d4d0eda0f29?s=128&d=identicon&r=PG&f=1", "display_name": "userMod2", "link": "https://stackoverflow.com/users/3033691/usermod2"}, "edited": false, "score": 0, "creation_date": 1551837039, "post_id": 55014202, "comment_id": 96783045, "body": "Thanks - <code>load the rails env in your rails_helper&#47;spec_helper</code> how do I go about doing that? Is there is a specific config key?"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 5764, "user_id": 3033691, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/0d3286fd40aade0e7bf90d4d0eda0f29?s=128&d=identicon&r=PG&f=1", "display_name": "userMod2", "link": "https://stackoverflow.com/users/3033691/usermod2"}, "edited": false, "score": 1, "creation_date": 1551837246, "post_id": 55014202, "comment_id": 96783093, "body": "@userMod2: rspec should have generated proper files when you executed <code>rspec --init</code>. Create a dummy rails app, add rspec there and compare resulting files with yours. The line you need looks something like this: <code>require File.expand_path(&#39;..&#47;..&#47;config&#47;environment&#39;, __FILE__)</code>"}, {"owner": {"reputation": 5764, "user_id": 3033691, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/0d3286fd40aade0e7bf90d4d0eda0f29?s=128&d=identicon&r=PG&f=1", "display_name": "userMod2", "link": "https://stackoverflow.com/users/3033691/usermod2"}, "edited": false, "score": 0, "creation_date": 1551837869, "post_id": 55014202, "comment_id": 96783232, "body": "The only file I noticed it made was <code>spec_helper.rb</code> - should it go there?"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 5764, "user_id": 3033691, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/0d3286fd40aade0e7bf90d4d0eda0f29?s=128&d=identicon&r=PG&f=1", "display_name": "userMod2", "link": "https://stackoverflow.com/users/3033691/usermod2"}, "edited": false, "score": 0, "creation_date": 1551837993, "post_id": 55014202, "comment_id": 96783261, "body": "@userMod2: no rails_helper, you say? Interesting. Does this spec_helper contain something similar to what I posted? What were the steps you did?"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 5764, "user_id": 3033691, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/0d3286fd40aade0e7bf90d4d0eda0f29?s=128&d=identicon&r=PG&f=1", "display_name": "userMod2", "link": "https://stackoverflow.com/users/3033691/usermod2"}, "edited": false, "score": 0, "creation_date": 1551838406, "post_id": 55014202, "comment_id": 96783376, "body": "@userMod2: ah, the command you need is <code>rails generate rspec:install</code>"}, {"owner": {"reputation": 5764, "user_id": 3033691, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/0d3286fd40aade0e7bf90d4d0eda0f29?s=128&d=identicon&r=PG&f=1", "display_name": "userMod2", "link": "https://stackoverflow.com/users/3033691/usermod2"}, "edited": false, "score": 0, "creation_date": 1551838420, "post_id": 55014202, "comment_id": 96783381, "body": "So that spec has no mention of anything. I simply did <code>rspec --init</code>"}, {"owner": {"reputation": 5764, "user_id": 3033691, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/0d3286fd40aade0e7bf90d4d0eda0f29?s=128&d=identicon&r=PG&f=1", "display_name": "userMod2", "link": "https://stackoverflow.com/users/3033691/usermod2"}, "edited": false, "score": 0, "creation_date": 1551839121, "post_id": 55014202, "comment_id": 96783548, "body": "So I just placed that line above <code>require File.expand_path(&#39;..&#47;..&#47;config&#47;application.rb&#39;, __FILE__)</code> at teh top of the spec_helper file. Does the trick. Thanks"}], "tags": [], "owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "is_accepted": true, "score": 1, "last_activity_date": 1551836337, "creation_date": 1551836337, "answer_id": 55014202, "question_id": 55014154, "link": "https://stackoverflow.com/questions/55014154/rspec-why-did-i-have-to-require-active-support-in-my-spec-file/55014202#55014202", "title": "Rspec - why did I have to require active_support in my spec file", "body": "<blockquote>\n  <p>Isn't the spec just running to get the result from that function?</p>\n</blockquote>\n\n<p>More or less. But that function/method needs <code>blank?</code>. Instead of putting that require in your spec file, you could put it in the tested method's file and it'd work.</p>\n\n<p>You mention Active Support. Is this a rails app? If so, the proper course of action is to load the rails env in your rails_helper/spec_helper. (unless you're not doing that on purpose, in an attempt to speed up specs or something like that).</p>\n"}], "owner": {"reputation": 5764, "user_id": 3033691, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/0d3286fd40aade0e7bf90d4d0eda0f29?s=128&d=identicon&r=PG&f=1", "display_name": "userMod2", "link": "https://stackoverflow.com/users/3033691/usermod2"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 230, "favorite_count": 0, "accepted_answer_id": 55014202, "answer_count": 1, "score": 0, "last_activity_date": 1551836337, "creation_date": 1551835875, "question_id": 55014154, "link": "https://stackoverflow.com/questions/55014154/rspec-why-did-i-have-to-require-active-support-in-my-spec-file", "title": "Rspec - why did I have to require active_support in my spec file", "body": "<p>I just started using rspec to write some unit tests.</p>\n\n<p>In my spec file I had to add the line <code>require 'active_support/core_ext'</code> because one of the methods I am running the tests on uses the <code>blank?</code> method. Without it I got an error along the lines of unknown method <code>blank</code>.</p>\n\n<p>The spec looks like:</p>\n\n<pre><code>it 'returns error if receives a string as payload' do\n    expect {ensure_properties([:title], 'ABC')}.to raise_error(MyError)\nend\n</code></pre>\n\n<p>And <code>ensure_properties</code> use blank like this: </p>\n\n<pre><code>if value.is_a? String and value.blank?\n   raise_my_error('Something')\nend\n</code></pre>\n\n<p>I was just wondering why does the spec file itself need to have that require. Isn't the spec just running to get the result from that function?</p>\n"}, {"tags": ["ruby", "sum", "binary-tree"], "comments": [{"owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "edited": false, "score": 1, "creation_date": 1551832599, "post_id": 55013718, "comment_id": 96782100, "body": "What do you mean, you found the answer for other languages but not for Ruby? The logic is exactly the same. What specifically is the obstacle you are facing in implementing it?"}, {"owner": {"reputation": 21, "user_id": 11156922, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ffe8ff177aab9a87acbb1dc72982636?s=128&d=identicon&r=PG&f=1", "display_name": "Just", "link": "https://stackoverflow.com/users/11156922/just"}, "reply_to_user": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "edited": false, "score": 0, "creation_date": 1551834102, "post_id": 55013718, "comment_id": 96782431, "body": "@Amadan I&#39;m a beginner and trying to understand recursion. While I do understand the principle, I&#39;m unable to transpose other languages&#39; solution into Ruby..."}, {"owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "edited": false, "score": 0, "creation_date": 1551834209, "post_id": 55013718, "comment_id": 96782451, "body": "The sum of a node is the the node&#39;s value plus the sum of all non-nil children, right? At least attempt to translate it into code, then we can talk about what is wrong with it, if anything."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1551835393, "post_id": 55013718, "comment_id": 96782693, "body": "A good start would be to add an example of a tree (and show the value of the desired sum). As there are no answers yet you might consider deleting the question, edit to clarify and add an example, then undelete. That way you won&#39;t feel time pressure to complete the edit and won&#39;t attract more downvotes or votes to close while you are editing. SO has a rule that, for homework problems (not suggesting this is one), the asker is expected to explain efforts he/she has made to solve the problem. That does not necessarily require code. It&#39;s potentially a good question."}, {"owner": {"reputation": 21, "user_id": 11156922, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ffe8ff177aab9a87acbb1dc72982636?s=128&d=identicon&r=PG&f=1", "display_name": "Just", "link": "https://stackoverflow.com/users/11156922/just"}, "edited": false, "score": 0, "creation_date": 1551868071, "post_id": 55013718, "comment_id": 96795082, "body": "Re: &quot;The sum of a node is the the node&#39;s value plus the sum of all non-nil children, right? At least attempt to translate it into code&quot;. Here is what I tried inside the BST class:     <code>def sum(node=@root)     return if node.nil?     total += node.value     sum(node.left)     sum(node.right)   end</code>  however it throws &quot;NoMethodError: undefined method `+&#39; for nil:NilClass&quot;. This is where I get stuck."}, {"owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "edited": false, "score": 0, "creation_date": 1551894016, "post_id": 55013718, "comment_id": 96810966, "body": "In general, try to write code in questions/answers, as code in comments that is longer than one line is superhard to read. If you must, then use <code>;</code> (or whatever is appropriate in your language) to separate the statements. I&#39;ll try to answer based on what I think you meant..."}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 11156922, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ffe8ff177aab9a87acbb1dc72982636?s=128&d=identicon&r=PG&f=1", "display_name": "Just", "link": "https://stackoverflow.com/users/11156922/just"}, "edited": false, "score": 0, "creation_date": 1551906831, "post_id": 55029341, "comment_id": 96817045, "body": "Thank you very much for your detailed answer! It explains exactly all the issues that I was struggling with all along and had me scratch my head for days until I finally resorted to SO. Also thanks for guiding me through the usage of SO, thanks also to @ Cary !  P.S. My attempted upvote is not being recorded due to my too low reputation score... Thanks again - you were super helpful!"}], "tags": [], "owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "is_accepted": false, "score": 0, "last_activity_date": 1551894647, "creation_date": 1551894647, "answer_id": 55029341, "question_id": 55013718, "link": "https://stackoverflow.com/questions/55013718/ruby-calculate-sum-of-all-node-values-of-a-binary-tree/55029341#55029341", "title": "Ruby: Calculate sum of all node values of a binary tree", "body": "<p>I think your code in the comments was:</p>\n\n<pre><code>def sum(node=@root)\n  return if node.nil?\n  total += node.value\n  sum(node.left)\n  sum(node.right)\nend\n</code></pre>\n\n<p>The idea is almost okay. There is no summing in <code>nil</code> nodes; and you total up the current node's value, the left node and the right node. Here's the mistakes:</p>\n\n<ul>\n<li><p><code>total += node.value</code> is the first time we see <code>total</code>. This initialises it to <code>nil</code>. When you try to add <code>node.value</code> to it, you get the error you described. To avoid it, either <code>total</code> must already exist, or you can just <em>assign</em> <code>node.value</code> to it.</p></li>\n<li><p>If a function ends without executing a <code>return</code> statement, it returns the last evaluated expression; in this case, <code>sum(node.right)</code>. Wouldn't it be better if <code>sum</code> returned <code>total</code>?</p></li>\n<li><p>Conversely, <code>sum(node.left)</code> will presumably do some summing... but its return value is discarded. It might make sense to add it to the <code>total</code>. Speaking of totals, maybe we should do the same for <code>sum(node.right)</code>.</p></li>\n<li><p>Finally, <code>return if node.nil?</code> says you refuse to sum the nodes that are not actually nodes. That's great... except that <code>return</code> returns <code>nil</code>, and if you try to total a <code>nil</code> with something, it doesn't go well. There are two solutions here: refuse to total a node <em>before</em> you enter it, or say that a nil node has value 0, which does not affect a sum.</p></li>\n</ul>\n\n<p>Taking it all together, here's my two versions:</p>\n\n<pre><code># refuse to enter a nil node:\ndef sum(node=@root)\n  total = node.value\n  total += sum(node.left) unless node.left.nil?\n  total += sum(node.right) unless node.right.nil?\n  total\nend\n\n# treat nil nodes as if they were zeroes:\ndef sum(node=@root)\n  return 0 if node.nil?\n  node.value + sum(node.left) + sum(node.right)\nend\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 11156922, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ffe8ff177aab9a87acbb1dc72982636?s=128&d=identicon&r=PG&f=1", "display_name": "Just", "link": "https://stackoverflow.com/users/11156922/just"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 312, "favorite_count": 0, "answer_count": 1, "score": -6, "last_activity_date": 1551894647, "creation_date": 1551832332, "question_id": 55013718, "link": "https://stackoverflow.com/questions/55013718/ruby-calculate-sum-of-all-node-values-of-a-binary-tree", "title": "Ruby: Calculate sum of all node values of a binary tree", "body": "<p>I have a binary tree implementation as below. I'd like to add a method that recursively sums up all node values of the binary tree:</p>\n\n<pre><code>class BST\n\n  class Node\n    attr_reader :value, :left, :right\n\n    def initialize(value)\n      @value = value\n      @left = nil\n      @right = nil\n    end\n\n    def insert(value)\n      if value &lt;= @value\n        @left.nil? ? @left = Node.new(value) : @left.insert(value)\n      elsif value &gt; @value\n        @right.nil? ? @right = Node.new(value) : @right.insert(value)\n      end\n    end\n\n  end\n\n  def initialize\n    @root = nil\n  end\n\n  def insert(value)\n    @root.nil? ? @root = Node.new(value) : @root.insert(value)\n  end\n\nend\n</code></pre>\n\n<p>I found the answer for other languages, however unfortunately not for Ruby. </p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1551851106, "post_id": 55013316, "comment_id": 96786497, "body": "Please use English punctuation when writing in English."}, {"owner": {"reputation": 395, "user_id": 2730032, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2d7ee7bd411d1c041ddc345a020fbba?s=128&d=identicon&r=PG&f=1", "display_name": "Ixio", "link": "https://stackoverflow.com/users/2730032/ixio"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1551858937, "post_id": 55013316, "comment_id": 96789772, "body": "@sawa you are more than welcome to edit any errors you see, I don&#39;t see any but that&#39;s probably just the limits of my grasp on the English language."}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1551859839, "post_id": 55013316, "comment_id": 96790220, "body": "@lxio Here you go."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1551868147, "post_id": 55013316, "comment_id": 96795146, "body": "Thanks for the dup target, I&#39;ve linked the two posts together."}], "answers": [{"comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1551830178, "post_id": 55013443, "comment_id": 96781502, "body": "(one would think it&#39;d be easy to find a good dup target for this...)"}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1551851035, "post_id": 55013443, "comment_id": 96786480, "body": "It is a feature. Not sure why you claim it is not."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1551856776, "post_id": 55013443, "comment_id": 96788740, "body": "@sawa: I can&#39;t imagine someone <i>specifically designed</i> this behaviour, because it was desirable. :)"}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1551865629, "post_id": 55013443, "comment_id": 96793497, "body": "@SergioTulentsev: It is desirable to be able to call methods with an implicit receiver and without argument list. It is desirable to not require sigils for local variables. Therefore, it must be possible to distinguish between variables and method calls. It is desirable to be able to decide this statically (not because of the implementation effort but because of the cognitive overhead for the reader of the code). The only other solution I can think of that satisfies those constraints, would be to require all local variables to be explicitly declared."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1551866901, "post_id": 55013443, "comment_id": 96794295, "body": "@J&#246;rgWMittag: what I was talking about is the quirk of &quot;local variables spring into scope when parses sees the assignment&quot;. That&#39;s what you meant by &quot;decide this statically&quot;, yes? Alas, this failed to reduce the cognitive overhead. As we see from numerous questions on the topic, the intuitively expected behavior is create local var when actual assignment is performed. Not that you&#39;d hit this often in &quot;good&quot; code, but still, one has to keep this quirk in mind."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1551867627, "post_id": 55013443, "comment_id": 96794782, "body": "If you create the local variable when the actual assignment is performed, then it is impossible from looking at the code to decide whether you are looking at a local variable or a method call. E.g. <code>if rand &lt; 0.5 then foo = 42 end; foo</code>, you cannot know whether <code>foo</code> is a call or local variable without running the code. Whereas with the current rule, it is crystal clear: it is a local variab.e"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1551867996, "post_id": 55013443, "comment_id": 96795030, "body": "@J&#246;rgWMittag: not &quot;crystal&quot; clear, or at least not intuitive, but I see the benefits, yes. I&#39;d hate explicit declarations more :)"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1551868047, "post_id": 55013443, "comment_id": 96795063, "body": "Still, it&#39;s hard to call this a &quot;feature&quot;."}, {"owner": {"reputation": 395, "user_id": 2730032, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2d7ee7bd411d1c041ddc345a020fbba?s=128&d=identicon&r=PG&f=1", "display_name": "Ixio", "link": "https://stackoverflow.com/users/2730032/ixio"}, "reply_to_user": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1551868067, "post_id": 55013443, "comment_id": 96795080, "body": "@J&#246;rgWMittag why do you need to know whether <code>foo</code> is a call or local variable without running the code ? Like Sergio says not being able to know probably isn&#39;t &quot;good&quot; code but other than that ?"}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "reply_to_user": {"reputation": 395, "user_id": 2730032, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2d7ee7bd411d1c041ddc345a020fbba?s=128&d=identicon&r=PG&f=1", "display_name": "Ixio", "link": "https://stackoverflow.com/users/2730032/ixio"}, "edited": false, "score": 0, "creation_date": 1551868888, "post_id": 55013443, "comment_id": 96795591, "body": "@Ixio: It is in general a desirable property to be able to tell what code does by reading it, without having to execute it. Of course, there will always be dynamic behavior in your code, otherwise it would be boring code, but at least for fundamental language features such as variables or methods, it should be possible to tell them apart."}], "tags": [], "owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "is_accepted": false, "score": 3, "last_activity_date": 1551865435, "last_edit_date": 1551865435, "creation_date": 1551830033, "answer_id": 55013443, "question_id": 55013316, "link": "https://stackoverflow.com/questions/55013316/non-executed-line-blocked-by-if-false-still-affects-results/55013443#55013443", "title": "Non executed line (blocked by &quot;if false&quot;) still affects results", "body": "<blockquote>\n  <p>[is this] a bug or a feature?</p>\n</blockquote>\n\n<p>Neither. It's a... peculiarity. What happens is, when parser sees assignment to local variable in the code, it goes ahead and adds the name to the scope (starting from that line, possibly shadowing other names, like your method here). With default value of <code>nil</code>. If the actual assignment is then never executed, the new local variable is still in scope and still evaluates to <code>nil</code>.</p>\n\n<p>This is documented in <a href=\"https://docs.ruby-lang.org/en/2.5.0/syntax/assignment_rdoc.html#label-Local+Variables+and+Methods\" rel=\"nofollow noreferrer\">https://docs.ruby-lang.org/en/2.5.0/syntax/assignment_rdoc.html#label-Local+Variables+and+Methods</a>.</p>\n"}], "owner": {"reputation": 395, "user_id": 2730032, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2d7ee7bd411d1c041ddc345a020fbba?s=128&d=identicon&r=PG&f=1", "display_name": "Ixio", "link": "https://stackoverflow.com/users/2730032/ixio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "closed_date": 1551868128, "answer_count": 1, "score": 0, "last_activity_date": 1551865435, "creation_date": 1551829136, "last_edit_date": 1551859811, "question_id": 55013316, "link": "https://stackoverflow.com/questions/55013316/non-executed-line-blocked-by-if-false-still-affects-results", "closed_reason": "Duplicate", "title": "Non executed line (blocked by &quot;if false&quot;) still affects results", "body": "<p>I wanted to use the classical ||= re-assignment (cf <a href=\"https://stackoverflow.com/questions/6671442/set-ruby-variable-if-it-is-not-already-defined\">Set Ruby variable if it is not already defined</a>) with ActiveInteraction pretty much like in <a href=\"https://github.com/AaronLasseigne/active_interaction/issues/395\" rel=\"nofollow noreferrer\">https://github.com/AaronLasseigne/active_interaction/issues/395</a></p>\n\n<p>However by testing different syntaxes in ActiveInteraction I stumbled upon a much more peculiar issue that happens even in vanilly Ruby.</p>\n\n<p>A non-executed line (blocked by a <code>if false</code>) can still have a major impact on the rest of the code:</p>\n\n\n\n<pre class=\"lang-rb prettyprint-override\"><code>class A\n  attr_accessor :a\n\n  def run\n    (puts defined? a; a) if true\n  end\n\n  def run2\n    (puts 'change a'; a = 0) if false\n    puts defined? a\n    a\n  end\n\nend\n\nx = A.new\nx.run  # \"method\"; nil\nx.run2 # \"local-variable\"; nil\nx.a = 5\nx.run # \"method\"; 5\nx.run2 # \"local-variable\"; nil\n</code></pre>\n\n<p>Can anyone explain if this is a bug or a feature? And if a feature: how come? It seems very odd.</p>\n\n<p><strong>EDIT:</strong> Thanks to the answer of @Sergio Tulentsev I managed to find that my question is pretty much a duplicate of <a href=\"https://stackoverflow.com/questions/17760732\">Ruby instance method &amp; conditional local variable assignment with same name</a> with a different focus for the title name.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "websocket", "puma", "actioncable"], "comments": [{"owner": {"reputation": 529, "user_id": 6030056, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c775b7467b51ad2401710b9b265a4aa1?s=128&d=identicon&r=PG&f=1", "display_name": "Laith Azer", "link": "https://stackoverflow.com/users/6030056/laith-azer"}, "edited": false, "score": 0, "creation_date": 1551995128, "post_id": 55012378, "comment_id": 96856284, "body": "What do the logs say for each process? Both puma and actioncable?"}, {"owner": {"reputation": 1998, "user_id": 1920622, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e79e2b4b00afb2d10594b1894cb7df87?s=128&d=identicon&r=PG", "display_name": "Laurent", "link": "https://stackoverflow.com/users/1920622/laurent"}, "reply_to_user": {"reputation": 529, "user_id": 6030056, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c775b7467b51ad2401710b9b265a4aa1?s=128&d=identicon&r=PG&f=1", "display_name": "Laith Azer", "link": "https://stackoverflow.com/users/6030056/laith-azer"}, "edited": false, "score": 0, "creation_date": 1552044275, "post_id": 55012378, "comment_id": 96872391, "body": "there&#39;s none, it startups and then doesn&#39;t receive anything from <code>4001</code>, because there&#39;s no process running on this port. I tried to open a <code>rails&#47;rails</code> issue and they closed it because it seems too context specific."}, {"owner": {"reputation": 529, "user_id": 6030056, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c775b7467b51ad2401710b9b265a4aa1?s=128&d=identicon&r=PG&f=1", "display_name": "Laith Azer", "link": "https://stackoverflow.com/users/6030056/laith-azer"}, "edited": false, "score": 0, "creation_date": 1552067094, "post_id": 55012378, "comment_id": 96884249, "body": "What&#39;s in <code>..&#47;config&#47;cable_environment</code>? It may also help if you can push the repo to github or something as it does seem pretty specific."}, {"owner": {"reputation": 1998, "user_id": 1920622, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e79e2b4b00afb2d10594b1894cb7df87?s=128&d=identicon&r=PG", "display_name": "Laurent", "link": "https://stackoverflow.com/users/1920622/laurent"}, "reply_to_user": {"reputation": 529, "user_id": 6030056, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c775b7467b51ad2401710b9b265a4aa1?s=128&d=identicon&r=PG&f=1", "display_name": "Laith Azer", "link": "https://stackoverflow.com/users/6030056/laith-azer"}, "edited": false, "score": 0, "creation_date": 1552069912, "post_id": 55012378, "comment_id": 96885508, "body": "It&#39;s work related so I can&#39;t push the repo publicly ... <code>require_relative &#39;environment&#39;</code> is all there&#39;s in the cable_environment along with some logger settings, it&#39;s really pretty basic, I really don&#39;t get why the process isn&#39;t spawned at all (no error, nothing)"}, {"owner": {"reputation": 529, "user_id": 6030056, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c775b7467b51ad2401710b9b265a4aa1?s=128&d=identicon&r=PG&f=1", "display_name": "Laith Azer", "link": "https://stackoverflow.com/users/6030056/laith-azer"}, "edited": false, "score": 0, "creation_date": 1552166377, "post_id": 55012378, "comment_id": 96909809, "body": "Ok a few things:  1. I noticed you are using the command <code>bundle exec puma cable&#47;config.ru -p 1337</code>. To me that looks like you are passing port <code>1337</code> not <code>4001</code>.  2. I haven&#39;t really seen using puma to run an actioncable server before. Not saying it won&#39;t work, but have you at least tried just mounting the actioncable server to your main app and see if that works at least?"}, {"owner": {"reputation": 1998, "user_id": 1920622, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e79e2b4b00afb2d10594b1894cb7df87?s=128&d=identicon&r=PG", "display_name": "Laurent", "link": "https://stackoverflow.com/users/1920622/laurent"}, "reply_to_user": {"reputation": 529, "user_id": 6030056, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c775b7467b51ad2401710b9b265a4aa1?s=128&d=identicon&r=PG&f=1", "display_name": "Laith Azer", "link": "https://stackoverflow.com/users/6030056/laith-azer"}, "edited": false, "score": 0, "creation_date": 1552246076, "post_id": 55012378, "comment_id": 96927666, "body": "Thanks for trying to solve the issue, I finally found the solution and will post it here when i get the time, but yes ActionCable mounted directly through the same port on <code>&#47;cable</code> will work, the issue was linked to a local Nginx which was used as Proxy to forward 4001 (needed for WSS) which I totally forgot about on my local computer ... That was a painful problem"}, {"owner": {"reputation": 2215, "user_id": 1996540, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/609b69cbb09257883a4e32d7d5aff098?s=128&d=identicon&r=PG", "display_name": "ZedTuX", "link": "https://stackoverflow.com/users/1996540/zedtux"}, "edited": false, "score": 0, "creation_date": 1559710003, "post_id": 55012378, "comment_id": 99501290, "body": "@Laurent when you will you post the answer? :)"}, {"owner": {"reputation": 1998, "user_id": 1920622, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e79e2b4b00afb2d10594b1894cb7df87?s=128&d=identicon&r=PG", "display_name": "Laurent", "link": "https://stackoverflow.com/users/1920622/laurent"}, "reply_to_user": {"reputation": 2215, "user_id": 1996540, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/609b69cbb09257883a4e32d7d5aff098?s=128&d=identicon&r=PG", "display_name": "ZedTuX", "link": "https://stackoverflow.com/users/1996540/zedtux"}, "edited": false, "score": 1, "creation_date": 1559753060, "post_id": 55012378, "comment_id": 99521098, "body": "@ZedTuX I added it for you, I totally forgot about it sorry"}], "answers": [{"comments": [{"owner": {"reputation": 2215, "user_id": 1996540, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/609b69cbb09257883a4e32d7d5aff098?s=128&d=identicon&r=PG", "display_name": "ZedTuX", "link": "https://stackoverflow.com/users/1996540/zedtux"}, "edited": false, "score": 1, "creation_date": 1559755625, "post_id": 56464771, "comment_id": 99522148, "body": "Thank you! Since that, I&#39;ve solved my issue (nothing to do with an Nginx config) but thank you anyway ! \ud83d\udc4d"}], "tags": [], "owner": {"reputation": 1998, "user_id": 1920622, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e79e2b4b00afb2d10594b1894cb7df87?s=128&d=identicon&r=PG", "display_name": "Laurent", "link": "https://stackoverflow.com/users/1920622/laurent"}, "is_accepted": true, "score": 0, "last_activity_date": 1559753038, "creation_date": 1559753038, "answer_id": 56464771, "question_id": 55012378, "link": "https://stackoverflow.com/questions/55012378/actioncable-websocket-not-working-with-puma/56464771#56464771", "title": "ActionCable / Websocket not working with Puma", "body": "<h1>The solution</h1>\n\n<p>I figured I had an Nginx setup to make my sockets work with TLS which I had forgotten about. If you end up here, you may be in the same case.</p>\n\n<p>You can check that out by doing <code>nginx -t</code> in your console and open the file - if any present - in your IDE.</p>\n\n<pre><code># /usr/local/etc/nginx/nginx.conf\n...\nserver {\n  listen   5212 ssl;\n  server_name  localhost;\n  ssl_certificate /Users/loschcode/Desktop/some-path/ssl/server.crt;\n  ssl_certificate_key /Users/loschcode/Desktop/some-path/ssl/server.key;\n\n  location / {\n    rewrite ^(.*) https://localhost:5214$1 permanent;\n  }\n}\n...\n</code></pre>\n\n<p>I recently changed the directory I used to work on the project, which made a wrong path to the certificate, therefore my issue. <strong>Fixing the path made it work</strong>.</p>\n"}], "owner": {"reputation": 1998, "user_id": 1920622, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e79e2b4b00afb2d10594b1894cb7df87?s=128&d=identicon&r=PG", "display_name": "Laurent", "link": "https://stackoverflow.com/users/1920622/laurent"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1022, "favorite_count": 1, "accepted_answer_id": 56464771, "answer_count": 1, "score": 2, "last_activity_date": 1559753038, "creation_date": 1551823739, "last_edit_date": 1551866933, "question_id": 55012378, "link": "https://stackoverflow.com/questions/55012378/actioncable-websocket-not-working-with-puma", "title": "ActionCable / Websocket not working with Puma", "body": "<h2>The problem</h2>\n\n<p>In development I'm having split processes between my Rails server and ActionCable.</p>\n\n<pre><code>\u279c  backend git:(dev) bundle exec puma cable/config.ru -p 1337\nPuma starting in single mode...\n* Version 3.12.0 (ruby 2.5.1-p57), codename: Llamas in Pajamas\n* Min threads: 0, max threads: 16\n* Environment: development\n</code></pre>\n\n<p>My configuration is pretty classical</p>\n\n<pre><code># cable/config.ru\nrequire_relative '../config/cable_environment'\nRails.application.eager_load!\n\nrun ActionCable.server\n</code></pre>\n\n<p>And in my <code>development.rb</code> I've got those</p>\n\n<pre><code># Set Action Cable server url for consumer connection\nconfig.action_cable.url = 'wss://localhost:4001'\nconfig.action_cable.allowed_request_origins = [\n  'https://localhost:4000',\n]\n</code></pre>\n\n<p>It looks like it's working. In parallel of that I use some split front-end in VueJS to listen to the websockets. <strong>You should know this whole configuration was working before a few days back.</strong></p>\n\n<p>When I try to listen to sockets from the front-end it does this</p>\n\n<p><code>action_cable.js?f5ee:241 WebSocket connection to 'wss://localhost:4001/' failed: Error in connection establishment: net::ERR_CONNECTION_REFUSED</code></p>\n\n<h2>What I know</h2>\n\n<p>The SSL is correctly configured (as I said it was actually working before) and the configuration seems really fine. I'm also not the only one working on this Rails project but the only one to face this issue.</p>\n\n<p>When I try to check it the port is in use I do the following</p>\n\n<pre><code>lsof -ti:4001\n</code></pre>\n\n<p>I noticed no process is running <strong>at all</strong> and I've no idea how to troubleshoot this. As the websocket server seems to be intern to ActionCable, I don't really know how to search what crashes, there's no error displayed, puma is up and running, but the websockets aren't.</p>\n\n<h2>What I tried</h2>\n\n<p>I can't recollect exactly what I did in the last few days which could have broken the Websockets, so I tried many things</p>\n\n<ul>\n<li>I've tried to change the configuration in many, many ways, but I pasted the original one here. Basically ran the whole documentation multiple times and tried all combinations i could think of</li>\n<li>I've tried to change the port, or endpoint</li>\n<li>I changed the SSL certificates which are self-hosted (and working) and produced new ones, it doesn't seem to be linked to the problem</li>\n<li>I've tried to downgrade Puma but it didn't change anything.</li>\n<li>I've tried to reinstall the project entirely in a fresh directory but it still doesn't work.</li>\n<li>I've also reinstalled multiple times Ruby via RVM and tried a few versions, without success.</li>\n<li>I even ended up upgrading my computer to MacOS Mojave in a desperate move, didn't move the problem one bit.</li>\n</ul>\n\n<h2>What I don't know</h2>\n\n<p>I don't know anything about the mechanism to spawn Websockets via ActionCable. Why isn't there any error ? How does it work ? Did I miss something in my configuration? Does it interact with anything else like NPM / Node / Apollo Which could have changed on my computer? I work on multiple projects with multiple technologies, it's pretty hard to find an exact origin ...</p>\n\n<p>If you need more informations, just let me know. Thanks for your time.</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 4690, "user_id": 1937435, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YyN37.jpg?s=128&g=1", "display_name": "Josh Brody", "link": "https://stackoverflow.com/users/1937435/josh-brody"}, "edited": false, "score": 0, "creation_date": 1551819859, "post_id": 55011528, "comment_id": 96777811, "body": "what was your monkey patch?"}, {"owner": {"reputation": 5083, "user_id": 18424, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/110c3930cadc4091ee35d37dad78539c?s=128&d=identicon&r=PG", "display_name": "outcassed", "link": "https://stackoverflow.com/users/18424/outcassed"}, "reply_to_user": {"reputation": 4690, "user_id": 1937435, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YyN37.jpg?s=128&g=1", "display_name": "Josh Brody", "link": "https://stackoverflow.com/users/1937435/josh-brody"}, "edited": false, "score": 0, "creation_date": 1551820125, "post_id": 55011528, "comment_id": 96777918, "body": "@JoshBrody I used alias_method_chain. <code>def freeze_with_debug...</code> <code>alias_method_chain :freeze, :debug</code>  It works for <code>&quot;my-bad-string&quot;.freeze</code> but is never called on a problem string in the app."}, {"owner": {"reputation": 653, "user_id": 7148414, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KMhlJ.jpg?s=128&g=1", "display_name": "baseballlover723", "link": "https://stackoverflow.com/users/7148414/baseballlover723"}, "edited": false, "score": 0, "creation_date": 1551820435, "post_id": 55011528, "comment_id": 96778087, "body": "Why do you think the string shouldn&#39;t be frozen? I don&#39;t think that freezing strings should increase the memory it takes up (if anything, I would expect it to go down). see <a href=\"https://www.wyeworks.com/blog/2015/12/01/immutable-strings-in-ruby-2-dot-3/\" rel=\"nofollow noreferrer\">wyeworks.com/blog/2015/12/01/immutable-strings-in-ruby-2-dot&zwnj;&#8203;-3</a> for more information on frozen strings"}, {"owner": {"reputation": 5083, "user_id": 18424, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/110c3930cadc4091ee35d37dad78539c?s=128&d=identicon&r=PG", "display_name": "outcassed", "link": "https://stackoverflow.com/users/18424/outcassed"}, "reply_to_user": {"reputation": 653, "user_id": 7148414, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KMhlJ.jpg?s=128&g=1", "display_name": "baseballlover723", "link": "https://stackoverflow.com/users/7148414/baseballlover723"}, "edited": false, "score": 0, "creation_date": 1551820610, "post_id": 55011528, "comment_id": 96778169, "body": "@baseballlover723 These are big chunks of HTML from inside a template (a Rails partial) that live in the heap forever. There chunk is different every time the template is rendered and so the heap grows boundlessly.   This is only happening intermittently to a piece of 1 specific page and it seems like it would be easy to track down but I can&#39;t find it. I thought it would be faster and less fuss to target it some other way since I know what the problem string will look like."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1551823561, "post_id": 55011528, "comment_id": 96779381, "body": "if you know where the strings are created then maybe try <code>created_string.singleton_class.instance_eval { undef_method(:freeze) }</code> and see where the crash happens?"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1551823763, "post_id": 55011528, "comment_id": 96779453, "body": "Suppose <code>s = &#39;cat&#39;; s.method(:freeze).super_method.call #=&gt; &quot;cat&quot;;  s[1]=&quot;o&quot; #=&gt; FrozenError (can&#39;t modify frozen String)</code>. <code>&#39;cat&#39;.method(:freeze).super_method #=&gt; #&lt;Method: Kernel#freeze&gt;</code>. Is there any way <code>Kernel#freeze</code> could have been used to freeze those strings? If the possibility is even remove try monkey-patching <code>Kernal#freeze</code> as well."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1551824818, "post_id": 55011528, "comment_id": 96779864, "body": "Roger Rabbit did it. One possible clue is mentioned <a href=\"http://rubylearning.com/satishtalim/mutable_and_immutable_objects.html\" rel=\"nofollow noreferrer\">here</a>: &quot;Ruby sometimes copies objects and freezes the copies. When you use a string as a hash key, Ruby actually copies the string, freezes the copy, and uses the copy as the hash key: that way, if the original string changes later on, the hash key isn&#39;t affected.&quot;"}], "owner": {"reputation": 5083, "user_id": 18424, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/110c3930cadc4091ee35d37dad78539c?s=128&d=identicon&r=PG", "display_name": "outcassed", "link": "https://stackoverflow.com/users/18424/outcassed"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 113, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1551886514, "creation_date": 1551819769, "last_edit_date": 1551886514, "question_id": 55011528, "link": "https://stackoverflow.com/questions/55011528/how-can-i-find-out-who-froze-a-non-literal-ruby-string", "title": "How can I find out who froze a (non-literal) Ruby string?", "body": "<p>I am debugging a memory leak in a large Rails app and after looking at a heap dump I found that the cause is many frozen strings that are data and shouldn't have been frozen.</p>\n\n<p>The contents of the strings make it easy to find where they were created but I don't know what code is responsible for freezing them. I could dig through and find it eventually but now I'm really curious about a way of determining who was responsible for freezing specific strings in the heap.</p>\n\n<p>Monkey patching <code>String#freeze</code> did not reveal anything.</p>\n\n<p>Any suggestions for figuring out where/why a freeze occurred? I don't mind patching Ruby itself and augmenting <code>rb_str_freeze</code> or <code>rb_obj_freeze</code> if I have to. I can target the problem strings by looking at the first 40 characters.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 3, "creation_date": 1551819049, "post_id": 55011281, "comment_id": 96777448, "body": "&quot;a db was created&quot; - but are there any kiosks in the db?"}, {"owner": {"reputation": 3902, "user_id": 10608621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d59df09a85d05117c63706f66811b70c?s=128&d=identicon&r=PG", "display_name": "mechnicov", "link": "https://stackoverflow.com/users/10608621/mechnicov"}, "edited": false, "score": 0, "creation_date": 1551819695, "post_id": 55011281, "comment_id": 96777738, "body": "Your model doesn&#39;t look good. <code>class Kiosk</code> and inside - <code>Kiosk.all</code>. How do you imagine it?"}, {"owner": {"reputation": 712, "user_id": 929251, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69ef9fdd5a6cd663670253f5a73527a4?s=128&d=identicon&r=PG", "display_name": "Igor Kasyanchuk", "link": "https://stackoverflow.com/users/929251/igor-kasyanchuk"}, "edited": false, "score": 1, "creation_date": 1551822188, "post_id": 55011281, "comment_id": 96778844, "body": "1) wrong code in model. 2) not clear what is in routes.rb"}, {"owner": {"reputation": 19, "user_id": 11138491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/230fecacd1fbe1fdb0aeb2edf052ece9?s=128&d=identicon&r=PG&f=1", "display_name": "Martin Somo", "link": "https://stackoverflow.com/users/11138491/martin-somo"}, "edited": false, "score": 0, "creation_date": 1551823575, "post_id": 55011281, "comment_id": 96779389, "body": "You right, I had bad routes, I change it to resources and now working! Thanks"}], "answers": [{"comments": [{"owner": {"reputation": 19, "user_id": 11138491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/230fecacd1fbe1fdb0aeb2edf052ece9?s=128&d=identicon&r=PG&f=1", "display_name": "Martin Somo", "link": "https://stackoverflow.com/users/11138491/martin-somo"}, "edited": false, "score": 0, "creation_date": 1551820857, "post_id": 55011680, "comment_id": 96778288, "body": "irb(main):001:0&gt; @kiosks = Kiosk.all   Kiosk Load (2.3ms)  SELECT <code>kiosks</code>.* FROM <code>kiosks</code> =&gt; #&lt;ActiveRecord::Relation [#&lt;Kiosk id: 1, name: &quot;test&quot;, whid: &quot;test&quot;, link: &quot;test&quot;, created_at: nil, updated_at: nil&gt;]&gt;"}, {"owner": {"reputation": 1995, "user_id": 124518, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/xyfOn.jpg?s=128&g=1", "display_name": "Gordon Isnor", "link": "https://stackoverflow.com/users/124518/gordon-isnor"}, "reply_to_user": {"reputation": 19, "user_id": 11138491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/230fecacd1fbe1fdb0aeb2edf052ece9?s=128&d=identicon&r=PG&f=1", "display_name": "Martin Somo", "link": "https://stackoverflow.com/users/11138491/martin-somo"}, "edited": false, "score": 0, "creation_date": 1551821091, "post_id": 55011680, "comment_id": 96778393, "body": "Ok so ActiveRecord is working. It sounds like maybe there&#39;s confusion around the controller and view? Is the kiosk method in your controller mapping to a route in your routes.rb file? Is there a view that&#39;s rendering the @kiosk variable, eg kiosk/kios.html.erb? If so what does that view look like? In your terminal output or log files \u2013 what is Rails saying is happening, eg did it render a certain template?"}], "tags": [], "owner": {"reputation": 1995, "user_id": 124518, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/xyfOn.jpg?s=128&g=1", "display_name": "Gordon Isnor", "link": "https://stackoverflow.com/users/124518/gordon-isnor"}, "is_accepted": false, "score": 1, "last_activity_date": 1551820412, "creation_date": 1551820412, "answer_id": 55011680, "question_id": 55011281, "link": "https://stackoverflow.com/questions/55011281/active-record-doing-nothing/55011680#55011680", "title": "Active Record doing nothing", "body": "<p>You may want to look at your logs (eg Rails.root => logs/development.log) or the output in your terminal \u2013 are there any error messages? If you log in to your console with eg <code>rails console</code> and run <code>@kiosks = Kiosk.all</code> \u2013 what are you seeing? or how about <code>Kiosk.count</code> \u2013\u2013 is it showing that there are any kiosks? As mentioned the model looks funny... not sure why you have the <code>@kiosk = Kiosk.all</code> line in there at all....</p>\n"}], "owner": {"reputation": 19, "user_id": 11138491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/230fecacd1fbe1fdb0aeb2edf052ece9?s=128&d=identicon&r=PG&f=1", "display_name": "Martin Somo", "link": "https://stackoverflow.com/users/11138491/martin-somo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "closed_date": 1552641575, "answer_count": 1, "score": -3, "last_activity_date": 1551820412, "creation_date": 1551818712, "question_id": 55011281, "link": "https://stackoverflow.com/questions/55011281/active-record-doing-nothing", "closed_reason": "Needs details or clarity", "title": "Active Record doing nothing", "body": "<p>please I need a little help... I don't know what I'm doing wrong but I need just a simple select query with Active Record. This looks my code:</p>\n\n<p>Model: </p>\n\n<pre><code>class Kiosk &lt; ApplicationRecord\n    @kiosk = Kiosk.all\nend\n</code></pre>\n\n<p>Controller: </p>\n\n<pre><code>class KioskController &lt; ApplicationController\n    def kiosk\n        @kiosk = Kiosk.all\n    end\nend\n</code></pre>\n\n<p>HAML: </p>\n\n<pre><code>#@kiosk\n</code></pre>\n\n<p>And it just doing nothing. Even if I change a password of database there isn't any error with connection. rake db:migrade was done a db was created.</p>\n\n<p>Thanks</p>\n"}, {"tags": ["ruby", "ssh", "interactive"], "answers": [{"comments": [{"owner": {"reputation": 71199, "user_id": 1301972, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/T5G7N.jpg?s=128&g=1", "display_name": "Todd A. Jacobs", "link": "https://stackoverflow.com/users/1301972/todd-a-jacobs"}, "edited": false, "score": 0, "creation_date": 1551817132, "post_id": 55010725, "comment_id": 96776580, "body": "AFAICT, this would run <code>ls</code> on the remote host, but it wouldn&#39;t give me standard input or standard output on my local terminal. If true, then that doesn&#39;t really address the problem I&#39;m trying to resolve."}], "tags": [], "owner": {"reputation": 1201, "user_id": 11155207, "user_type": "registered", "profile_image": "https://graph.facebook.com/1580155635371866/picture?type=large", "display_name": "Max Voisard", "link": "https://stackoverflow.com/users/11155207/max-voisard"}, "is_accepted": false, "score": 0, "last_activity_date": 1551816423, "creation_date": 1551816423, "answer_id": 55010725, "question_id": 55010248, "link": "https://stackoverflow.com/questions/55010248/how-can-i-perform-the-equivalent-of-expects-interact-in-ruby/55010725#55010725", "title": "How can I perform the equivalent of Expect&#39;s &quot;interact&quot; in Ruby?", "body": "<p>If you haven't already, install the <code>net-ssh</code> gem in your command prompt.</p>\n\n<pre><code>gem install net-ssh\n</code></pre>\n\n<p>Here is a code snippet that processes the SSH authenication and then connects to the IP address of whatever remote host you choose.</p>\n\n<pre><code>#!/usr/bin/env ruby\nrequire 'rubygems'\nrequire 'net/ssh'\nHOST = '192.168.1.113'\nUSER = 'username'\nPASS = 'password'\n\nNet::SSH.start( HOST, USER, :password =&gt; PASS ) do|ssh|\nresult = ssh.exec!('ls')\nputs result\nend\n</code></pre>\n\n<p>After connecting to the remote host, the session should be \"interactive\", but this is not an equivalent of Expect's Interact as far as I'm concerned. Here's a couple links that cover Ruby's built-in TTY and PTY modules: <a href=\"https://piotrmurach.github.io/tty/\" rel=\"nofollow noreferrer\">https://piotrmurach.github.io/tty/</a>\n <a href=\"http://ruby-doc.org/stdlib-2.6.1/libdoc/pty/rdoc/PTY.html\" rel=\"nofollow noreferrer\">http://ruby-doc.org/stdlib-2.6.1/libdoc/pty/rdoc/PTY.html</a>. You will have to do another <code>gem install</code> command on the Ruby terminal for TTY.</p>\n"}, {"tags": [], "owner": {"reputation": 129, "user_id": 7347387, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bdedc88a18b2727c53e8ec1bdcc4eba3?s=128&d=identicon&r=PG&f=1", "display_name": "Ibraheem", "link": "https://stackoverflow.com/users/7347387/ibraheem"}, "is_accepted": false, "score": 0, "last_activity_date": 1551886456, "creation_date": 1551886456, "answer_id": 55026781, "question_id": 55010248, "link": "https://stackoverflow.com/questions/55010248/how-can-i-perform-the-equivalent-of-expects-interact-in-ruby/55026781#55026781", "title": "How can I perform the equivalent of Expect&#39;s &quot;interact&quot; in Ruby?", "body": "<p>I am not able to comment, so posting as an answer, as I do the same thing using sshpass utility (if you don't have you can easily install)</p>\n\n<pre><code>#!/bin/ksh\nIP=yourIP\nping -c 1 $IP \nif [ $? -gt 0 ]\n then\n echo \"$IP not reachable.\" \n exit\nelse\n echo \"$IP is reachable\"\nfi\nsshpass -p \"yourpassword\" ssh -o StrictHostKeyChecking=no username@$IP\n</code></pre>\n\n<p>if you want to log the output of the session, you can pipe the output to a logfile using tee command like \n<code>sshpass -p \"yourpassword\" ssh -o StrictHostKeyChecking=no username@$IP | tee -a logfile.log</code></p>\n"}], "owner": {"reputation": 71199, "user_id": 1301972, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/T5G7N.jpg?s=128&g=1", "display_name": "Todd A. Jacobs", "link": "https://stackoverflow.com/users/1301972/todd-a-jacobs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 154, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1551886456, "creation_date": 1551814460, "question_id": 55010248, "link": "https://stackoverflow.com/questions/55010248/how-can-i-perform-the-equivalent-of-expects-interact-in-ruby", "title": "How can I perform the equivalent of Expect&#39;s &quot;interact&quot; in Ruby?", "body": "<p>I want to spawn an SSH session, respond to a password prompt to login, and then interact with the remote system. This is easy to do with Expect, but I'm finding it challenging to do this in Ruby.</p>\n\n<p>In Expect, I'd simply do something like:</p>\n\n<pre class=\"lang-expect prettyprint-override\"><code>log_user 0\nspawn ssh user@host\nexpect \"assword\" { send \"my_password\\r\" }\ninteract\n</code></pre>\n\n<p>However, the Ruby <a href=\"https://ruby-doc.org/stdlib-2.6.1/libdoc/expect/rdoc/IO.html#method-i-expect\" rel=\"nofollow noreferrer\">IO#expect</a> method won't provide the interactivity that I'm after. I'm also reading through the <a href=\"https://net-ssh.github.io/net-ssh/Net/SSH.html\" rel=\"nofollow noreferrer\">Net::SSH documentation</a>, but haven't found an obvious way to make the session interactive after successfully logging in.</p>\n\n<p>Once the connection is successfully opened, what is needed to make the TTY/PTY on the remote host interactive?  </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 653, "user_id": 7148414, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KMhlJ.jpg?s=128&g=1", "display_name": "baseballlover723", "link": "https://stackoverflow.com/users/7148414/baseballlover723"}, "edited": false, "score": 1, "creation_date": 1551814731, "post_id": 55009802, "comment_id": 96775517, "body": "can you post the full stacktrace?"}, {"owner": {"reputation": 1560, "user_id": 5614748, "user_type": "registered", "accept_rate": 68, "profile_image": "https://graph.facebook.com/10153324566173505/picture?type=large", "display_name": "Afolabi Olaoluwa Akinwumi", "link": "https://stackoverflow.com/users/5614748/afolabi-olaoluwa-akinwumi"}, "reply_to_user": {"reputation": 653, "user_id": 7148414, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KMhlJ.jpg?s=128&g=1", "display_name": "baseballlover723", "link": "https://stackoverflow.com/users/7148414/baseballlover723"}, "edited": false, "score": 0, "creation_date": 1551815424, "post_id": 55009802, "comment_id": 96775814, "body": "@baseballlover723 its updated"}], "owner": {"reputation": 1560, "user_id": 5614748, "user_type": "registered", "accept_rate": 68, "profile_image": "https://graph.facebook.com/10153324566173505/picture?type=large", "display_name": "Afolabi Olaoluwa Akinwumi", "link": "https://stackoverflow.com/users/5614748/afolabi-olaoluwa-akinwumi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 47, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1551815408, "creation_date": 1551812568, "last_edit_date": 1551815408, "question_id": 55009802, "link": "https://stackoverflow.com/questions/55009802/am-having-rails-error-called-unknown-key-deposit", "title": "Am having Rails error called: Unknown key: deposit", "body": "<p>I am worried about this error am having called <em>Unknown key: deposit</em>. Though I tried to remove the constants which is not used in this snippet even though I cant do that, but it still complained about <code>sum</code> method in the view. </p>\n\n<p>All am trying to do is to have array map I could use in the view to show my results.</p>\n\n<p><strong>attribution_helper.rb</strong></p>\n\n<pre><code>module AttributionHelper\n  def statistics(events=nil)\n    case events\n    when Attribution::PARTNER_DASHBOARD_EVENTS\n      Attribution::PARTNER_DASHBOARD_EVENTS.map { |event| [ event, (Attribution.attribution_count[event.to_s] || 0), Attribution.onbaording_attribution_stats[\"#{event}\"] || 0] }\n    when Attribution::PARTNER_BILLABLE_EVENTS\n      array_result = Attribution::PARTNER_BILLABLE_EVENTS.map { |event| [ event, (Attribution.attribution_count[event.to_s] || 0), Attribution.billable_attribution_stats[\"#{event}\"] || 0] }\n      [\"total\", array_result.sum(&amp;:second), array_result.sum(&amp;:third)]\n    else\n      Attribution::EVENTS.map { |event| [ event, (Attribution.attribution_count[event.to_s] || 0), Attribution.all_attribution_stats[\"#{event}\"] || 0] }\n    end\n  end\nend\n</code></pre>\n\n<p><strong>attribution.rb</strong> model</p>\n\n<pre><code>include AttributionHelper\n\nVISIT = \"visit\"\nSIGN_UP = \"sign_up\"\nDEPOSIT = \"deposit\"\nWITHDRAW = \"withdraw\"\nORDER_DONE = \"order_done\"\nORDER_SUBMIT = \"order_submit\"\nKYC_VERIFIED = \"kyc_verified\"\n\nEVENTS = [VISIT, SIGN_UP, KYC_VERIFIED, DEPOSIT, WITHDRAW, ORDER_SUBMIT, ORDER_DONE]\nPARTNER_DASHBOARD_EVENTS = [VISIT, SIGN_UP]\nPARTNER_BILLABLE_EVENTS = [ORDER_DONE, WITHDRAW]\n\nscope :grouped_attribution, -&gt; { self.group(:event) }\nscope :attribution_count, -&gt; { grouped_attribution.count }\nscope :all_attribution_stats, -&gt; { grouped_attribution.sum(:bonus_amount) }\nscope :onbaording_attribution_stats, -&gt; { grouped_attribution.where(\"event = ? OR event = ?\", Attribution::VISIT, Attribution::SIGN_UP).sum(:bonus_amount) }\nscope :billable_attribution_stats, -&gt; { grouped_attribution.where(\"event = ? OR event = ?\", Attribution::ORDER_DONE, Attribution::WITHDRAW).sum(:bonus_amount) }\n</code></pre>\n\n<p><em>views</em></p>\n\n<pre><code>h2.text-center\n    code class='text-info' = @price_widget.attribution_channel.statistics(Attribution::PARTNER_DASHBOARD_EVENTS + Attribution::PARTNER_BILLABLE_EVENTS).sum(&amp;:third).to_s(:delimited)\n</code></pre>\n\n<p>These are the result of the scopes:</p>\n\n<pre><code>grouped_attribution.count\n   (0.5ms)  SELECT COUNT(*) AS count_all, event AS event FROM `attributions` GROUP BY event\n=&gt; {\u201cdeposit\u201d=&gt;2, \u201corder_done\u201d=&gt;14, \u201csign_up\u201d=&gt;10, \u201cvisit\u201d=&gt;46, \u201cwithdraw\u201d=&gt;2}\n\ngrouped_attribution.sum(:bonus_amount)\n   (0.6ms)  SELECT SUM(`attributions`.`bonus_amount`) AS sum_bonus_amount, event AS event FROM `attributions` GROUP BY event\n=&gt; {\u201cdeposit\u201d=&gt;10, \u201corder_done\u201d=&gt;600, \u201csign_up\u201d=&gt;10000, \u201cvisit\u201d=&gt;15000, \u201cwithdraw\u201d=&gt;10}\n\ngrouped_attribution.where(\"event = ? OR event = ?\", Attribution::VISIT, Attribution::SIGN_UP).sum(:bonus_amount)\n   (1.0ms)  SELECT SUM(`attributions`.`bonus_amount`) AS sum_bonus_amount, event AS event FROM `attributions` WHERE (event = \u2018visit\u2019 OR event = \u2018sign_up\u2019) GROUP BY event\n=&gt; {\u201csign_up\u201d=&gt;10000, \u201cvisit\u201d=&gt;15000}\n\ngrouped_attribution.where(\"event = ? OR event = ?\", Attribution::ORDER_DONE, Attribution::WITHDRAW).sum(:bonus_amount)\n   (1.4ms)  SELECT SUM(`attributions`.`bonus_amount`) AS sum_bonus_amount, event AS event FROM `attributions` WHERE (event = \u2018order_done\u2019 OR event = \u2018withdraw\u2019) GROUP BY event\n=&gt; {\u201corder_done\u201d=&gt;600, \u201cwithdraw\u201d=&gt;10}\n</code></pre>\n\n<p><strong>stacktrace</strong></p>\n\n<pre><code>ArgumentError - Unknown key: deposit:\n  activesupport (4.0.12) lib/active_support/core_ext/hash/keys.rb:70:in `block in assert_valid_keys'\n  activesupport (4.0.12) lib/active_support/core_ext/hash/keys.rb:69:in `assert_valid_keys'\n  activerecord-deprecated_finders (1.0.3) lib/active_record/deprecated_finders/relation.rb:18:in `apply_finder_options'\n  activerecord-deprecated_finders (1.0.3) lib/active_record/deprecated_finders/base.rb:46:in `call'\n  activerecord (4.0.12) lib/active_record/scoping/named.rb:163:in `block (2 levels) in scope'\n  activerecord (4.0.12) lib/active_record/relation.rb:270:in `scoping'\n  activerecord (4.0.12) lib/active_record/scoping/named.rb:163:in `block in scope'\n  app/helpers/attribution_helper.rb:10:in `block in statistics'\n  app/helpers/attribution_helper.rb:10:in `statistics'\n  app/views/price_widgets/dashboard.html.slim:38:in `block in _app_views_price_widgets_dashboard_html_slim___3846780147619711966_70216357117460'\n  actionpack (4.0.12) lib/action_view/helpers/capture_helper.rb:38:in `block in capture'\n  actionpack (4.0.12) lib/action_view/helpers/capture_helper.rb:200:in `with_output_buffer'\n  actionpack (4.0.12) lib/action_view/helpers/capture_helper.rb:38:in `capture'\n  actionpack (4.0.12) lib/action_view/helpers/capture_helper.rb:152:in `content_for'\n  app/views/price_widgets/dashboard.html.slim:4:in `_app_views_price_widgets_dashboard_html_slim___3846780147619711966_70216357117460'\n  actionpack (4.0.12) lib/action_view/template.rb:143:in `block in render'\n  activesupport (4.0.12) lib/active_support/notifications.rb:161:in `instrument'\n  actionpack (4.0.12) lib/action_view/template.rb:141:in `render'\n  actionpack (4.0.12) lib/action_view/renderer/template_renderer.rb:49:in `block (2 levels) in render_template'\n  actionpack (4.0.12) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'\n  activesupport (4.0.12) lib/active_support/notifications.rb:159:in `block in instrument'\n  activesupport (4.0.12) lib/active_support/notifications/instrumenter.rb:20:in `instrument'\n  activesupport (4.0.12) lib/active_support/notifications.rb:159:in `instrument'\n  actionpack (4.0.12) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'\n  actionpack (4.0.12) lib/action_view/renderer/template_renderer.rb:48:in `block in render_template'\n  actionpack (4.0.12) lib/action_view/renderer/template_renderer.rb:56:in `render_with_layout'\n  actionpack (4.0.12) lib/action_view/renderer/template_renderer.rb:47:in `render_template'\n  actionpack (4.0.12) lib/action_view/renderer/template_renderer.rb:17:in `render'\n  actionpack (4.0.12) lib/action_view/renderer/renderer.rb:42:in `render_template'\n  actionpack (4.0.12) lib/action_view/renderer/renderer.rb:23:in `render'\n  actionpack (4.0.12) lib/abstract_controller/rendering.rb:127:in `_render_template'\n  actionpack (4.0.12) lib/action_controller/metal/streaming.rb:219:in `_render_template'\n  actionpack (4.0.12) lib/abstract_controller/rendering.rb:120:in `render_to_body'\n  actionpack (4.0.12) lib/action_controller/metal/rendering.rb:33:in `render_to_body'\n  actionpack (4.0.12) lib/action_controller/metal/renderers.rb:26:in `render_to_body'\n  actionpack (4.0.12) lib/abstract_controller/rendering.rb:97:in `render'\n  actionpack (4.0.12) lib/action_controller/metal/rendering.rb:16:in `render'\n  actionpack (4.0.12) lib/action_controller/metal/instrumentation.rb:41:in `block (2 levels) in render'\n  activesupport (4.0.12) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'\n  /Users/tiwa/.rbenv/versions/2.2.2/lib/ruby/2.2.0/benchmark.rb:303:in `realtime'\n  activesupport (4.0.12) lib/active_support/core_ext/benchmark.rb:12:in `ms'\n  actionpack (4.0.12) lib/action_controller/metal/instrumentation.rb:41:in `block in render'\n  actionpack (4.0.12) lib/action_controller/metal/instrumentation.rb:84:in `cleanup_view_runtime'\n  activerecord (4.0.12) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'\n  actionpack (4.0.12) lib/action_controller/metal/instrumentation.rb:40:in `render'\n  actionpack (4.0.12) lib/action_controller/metal/implicit_render.rb:10:in `default_render'\n  actionpack (4.0.12) lib/action_controller/metal/implicit_render.rb:5:in `send_action'\n  actionpack (4.0.12) lib/abstract_controller/base.rb:189:in `process_action'\n  actionpack (4.0.12) lib/action_controller/metal/rendering.rb:10:in `process_action'\n  actionpack (4.0.12) lib/abstract_controller/callbacks.rb:18:in `block in process_action'\n  activesupport (4.0.12) lib/active_support/callbacks.rb:483:in `_run__2112368623363193916__process_action__callbacks'\n  activesupport (4.0.12) lib/active_support/callbacks.rb:80:in `run_callbacks'\n  actionpack (4.0.12) lib/abstract_controller/callbacks.rb:17:in `process_action'\n  actionpack (4.0.12) lib/action_controller/metal/rescue.rb:29:in `process_action'\n  actionpack (4.0.12) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'\n  activesupport (4.0.12) lib/active_support/notifications.rb:159:in `block in instrument'\n  activesupport (4.0.12) lib/active_support/notifications/instrumenter.rb:20:in `instrument'\n  activesupport (4.0.12) lib/active_support/notifications.rb:159:in `instrument'\n  actionpack (4.0.12) lib/action_controller/metal/instrumentation.rb:30:in `process_action'\n  actionpack (4.0.12) lib/action_controller/metal/params_wrapper.rb:250:in `process_action'\n  activerecord (4.0.12) lib/active_record/railties/controller_runtime.rb:18:in `process_action'\n  actionpack (4.0.12) lib/abstract_controller/base.rb:136:in `process'\n  actionpack (4.0.12) lib/abstract_controller/rendering.rb:44:in `process'\n  actionpack (4.0.12) lib/action_controller/metal.rb:195:in `dispatch'\n  actionpack (4.0.12) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'\n  actionpack (4.0.12) lib/action_controller/metal.rb:231:in `block in action'\n  actionpack (4.0.12) lib/action_dispatch/routing/route_set.rb:82:in `dispatch'\n  actionpack (4.0.12) lib/action_dispatch/routing/route_set.rb:50:in `call'\n  actionpack (4.0.12) lib/action_dispatch/journey/router.rb:71:in `block in call'\n  actionpack (4.0.12) lib/action_dispatch/journey/router.rb:59:in `call'\n  actionpack (4.0.12) lib/action_dispatch/routing/route_set.rb:676:in `call'\n  omniauth (1.2.2) lib/omniauth/strategy.rb:404:in `call_app!'\n  omniauth-identity (1.1.1) lib/omniauth/strategies/identity.rb:43:in `other_phase'\n  omniauth (1.2.2) lib/omniauth/strategy.rb:185:in `call!'\n  omniauth (1.2.2) lib/omniauth/strategy.rb:164:in `call'\n  omniauth (1.2.2) lib/omniauth/builder.rb:59:in `call'\n  meta_request (0.2.8) lib/meta_request/middlewares/app_request_handler.rb:13:in `call'\n  rack-contrib (1.1.0) lib/rack/contrib/response_headers.rb:17:in `call'\n  meta_request (0.2.8) lib/meta_request/middlewares/headers.rb:16:in `call'\n  meta_request (0.2.8) lib/meta_request/middlewares/meta_request_handler.rb:13:in `call'\n  http_accept_language (2.0.1) lib/http_accept_language/middleware.rb:13:in `call'\n  simple_captcha2 (0.2.2) lib/simple_captcha/middleware.rb:20:in `call'\n  rack (1.5.5) lib/rack/etag.rb:23:in `call'\n  rack (1.5.5) lib/rack/conditionalget.rb:35:in `call'\n  rack (1.5.5) lib/rack/head.rb:11:in `call'\n  actionpack (4.0.12) lib/action_dispatch/middleware/params_parser.rb:27:in `call'\n  actionpack (4.0.12) lib/action_dispatch/middleware/flash.rb:241:in `call'\n  rack (1.5.5) lib/rack/session/abstract/id.rb:225:in `context'\n  rack (1.5.5) lib/rack/session/abstract/id.rb:220:in `call'\n  actionpack (4.0.12) lib/action_dispatch/middleware/cookies.rb:486:in `call'\n  activerecord (4.0.12) lib/active_record/query_cache.rb:36:in `call'\n  activerecord (4.0.12) lib/active_record/connection_adapters/abstract/connection_pool.rb:626:in `call'\n  activerecord (4.0.12) lib/active_record/migration.rb:373:in `call'\n  actionpack (4.0.12) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'\n  activesupport (4.0.12) lib/active_support/callbacks.rb:373:in `_run__2834334812182002754__call__callbacks'\n  activesupport (4.0.12) lib/active_support/callbacks.rb:80:in `run_callbacks'\n  actionpack (4.0.12) lib/action_dispatch/middleware/callbacks.rb:27:in `call'\n  actionpack (4.0.12) lib/action_dispatch/middleware/reloader.rb:64:in `call'\n  actionpack (4.0.12) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'\n  better_errors (1.1.0) lib/better_errors/middleware.rb:84:in `protected_app_call'\n  better_errors (1.1.0) lib/better_errors/middleware.rb:79:in `better_errors_call'\n  better_errors (1.1.0) lib/better_errors/middleware.rb:56:in `call'\n  bugsnag (6.11.0) lib/bugsnag/integrations/rack.rb:46:in `call'\n  actionpack (4.0.12) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'\n  actionpack (4.0.12) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'\n  railties (4.0.12) lib/rails/rack/logger.rb:38:in `call_app'\n  railties (4.0.12) lib/rails/rack/logger.rb:20:in `block in call'\n  activesupport (4.0.12) lib/active_support/tagged_logging.rb:68:in `block in tagged'\n  activesupport (4.0.12) lib/active_support/tagged_logging.rb:26:in `tagged'\n  activesupport (4.0.12) lib/active_support/tagged_logging.rb:68:in `tagged'\n  railties (4.0.12) lib/rails/rack/logger.rb:20:in `call'\n  quiet_assets (1.0.2) lib/quiet_assets.rb:18:in `call_with_quiet_assets'\n  request_store (1.1.0) lib/request_store/middleware.rb:8:in `call'\n  actionpack (4.0.12) lib/action_dispatch/middleware/request_id.rb:21:in `call'\n  rack (1.5.5) lib/rack/methodoverride.rb:21:in `call'\n  rack (1.5.5) lib/rack/runtime.rb:17:in `call'\n  lib/middleware/security.rb:11:in `call'\n  rack (1.5.5) lib/rack/lock.rb:17:in `call'\n  actionpack (4.0.12) lib/action_dispatch/middleware/static.rb:84:in `call'\n  lib/middleware/i18n_js.rb:9:in `call'\n  rack (1.5.5) lib/rack/sendfile.rb:112:in `call'\n  rack-cors (1.0.2) lib/rack/cors.rb:97:in `call'\n  railties (4.0.12) lib/rails/engine.rb:511:in `call'\n  railties (4.0.12) lib/rails/application.rb:97:in `call'\n  railties (4.0.12) lib/rails/railtie/configurable.rb:30:in `method_missing'\n  rack-reverse-proxy (0.12.0) lib/rack_reverse_proxy/roundtrip.rb:19:in `call'\n  rack-reverse-proxy (0.12.0) lib/rack_reverse_proxy/middleware.rb:25:in `call'\n  rack (1.5.5) lib/rack/lock.rb:17:in `call'\n  rack (1.5.5) lib/rack/content_length.rb:14:in `call'\n  rack (1.5.5) lib/rack/handler/webrick.rb:60:in `service'\n</code></pre>\n"}, {"tags": ["ruby", "rspec"], "comments": [{"owner": {"reputation": 653, "user_id": 7148414, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KMhlJ.jpg?s=128&g=1", "display_name": "baseballlover723", "link": "https://stackoverflow.com/users/7148414/baseballlover723"}, "edited": false, "score": 0, "creation_date": 1551814365, "post_id": 55009711, "comment_id": 96775354, "body": "also note that having a def inside of a def is probably not what you want"}, {"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 1, "creation_date": 1551814385, "post_id": 55009711, "comment_id": 96775362, "body": "Something like <code>Array.new(7, Array.new(7, &#39;-&#39;))</code> or <code>[[&#39;-&#39;] * 7] * 7</code> would be shorter."}, {"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "reply_to_user": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1551815463, "post_id": 55009711, "comment_id": 96775842, "body": "@SebastianPalma I would suggest <code>Array.new(6) { Array.new(6) { &#39;_&#39; } }</code> otherwise you would add references to the same string multiple time what will lead to unexpected results when the array is updated."}, {"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "reply_to_user": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1551816444, "post_id": 55009711, "comment_id": 96776265, "body": "That&#39;s better @spickermann, thanks for that correction!"}], "answers": [{"tags": [], "owner": {"reputation": 14139, "user_id": 1108, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/48OpQ.jpg?s=128&g=1", "display_name": "jerhinesmith", "link": "https://stackoverflow.com/users/1108/jerhinesmith"}, "is_accepted": true, "score": 3, "last_activity_date": 1551813803, "creation_date": 1551813803, "answer_id": 55010080, "question_id": 55009711, "link": "https://stackoverflow.com/questions/55009711/passing-the-rspec-test/55010080#55010080", "title": "Passing the rspec test", "body": "<p>Methods in ruby (without an explicit <code>return</code> statement) will return the result of the last line of code that was executed. In your case, your last line of <code>matrix</code> is <code>matrix[6] = [\"_\", \"_\", \"_\", \"_\", \"_\", \"_\",\"_\"]</code> so that method will always be returning <code>[\"_\", \"_\", \"_\", \"_\", \"_\", \"_\",\"_\"]</code>. If you want to return the full matrix, you could do this instead:</p>\n\n<pre><code>def matrix\n  # Initialize the matrix variable\n  matrix = []\n\n  # Explicitly set each row of the matrix\n  matrix[0] = [\"_\", \"_\", \"_\", \"_\", \"_\", \"_\",\"_\"]\n  matrix[1] = [\"_\", \"_\", \"_\", \"_\", \"_\", \"_\",\"_\"]\n  matrix[2] = [\"_\", \"_\", \"_\", \"_\", \"_\", \"_\",\"_\"]\n  matrix[3] = [\"_\", \"_\", \"_\", \"_\", \"_\", \"_\",\"_\"]\n  matrix[4] = [\"_\", \"_\", \"_\", \"_\", \"_\", \"_\",\"_\"]\n  matrix[5] = [\"_\", \"_\", \"_\", \"_\", \"_\", \"_\",\"_\"]\n  matrix[6] = [\"_\", \"_\", \"_\", \"_\", \"_\", \"_\",\"_\"]\n\n  # Return the matrix\n  matrix\nend\n</code></pre>\n"}], "owner": {"reputation": 15, "user_id": 6395287, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a795ce8df6b8dfc3735e04f5cfdbc7d?s=128&d=identicon&r=PG&f=1", "display_name": "jikra01", "link": "https://stackoverflow.com/users/6395287/jikra01"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 32, "favorite_count": 0, "accepted_answer_id": 55010080, "answer_count": 1, "score": 0, "last_activity_date": 1551813803, "creation_date": 1551812200, "question_id": 55009711, "link": "https://stackoverflow.com/questions/55009711/passing-the-rspec-test", "title": "Passing the rspec test", "body": "<p>Hey im building minesweeper game as my project and I have problem passing this test.</p>\n\n<pre><code>  it \"should initialise each position in each column in matrix as _\" do\n            matrix = []\n            matrix[0] = [\"_\", \"_\", \"_\", \"_\", \"_\", \"_\",\"_\"]\n            matrix[1] = [\"_\", \"_\", \"_\", \"_\", \"_\", \"_\",\"_\"]\n            matrix[2] = [\"_\", \"_\", \"_\", \"_\", \"_\", \"_\",\"_\"]\n            matrix[3] = [\"_\", \"_\", \"_\", \"_\", \"_\", \"_\",\"_\"]\n            matrix[4] = [\"_\", \"_\", \"_\", \"_\", \"_\", \"_\",\"_\"]\n            matrix[5] = [\"_\", \"_\", \"_\", \"_\", \"_\", \"_\",\"_\"]\n            matrix[6] = [\"_\", \"_\", \"_\", \"_\", \"_\", \"_\",\"_\"]\n            @game.clearcolumns\n            @game.matrix.should eql matrix\n        end\n</code></pre>\n\n<p>This is my simple method:</p>\n\n<pre><code>def clearcolumns\n        def matrix\n            matrix = []\n            matrix[0] = [\"_\", \"_\", \"_\", \"_\", \"_\", \"_\",\"_\"]\n            matrix[1] = [\"_\", \"_\", \"_\", \"_\", \"_\", \"_\",\"_\"]\n            matrix[2] = [\"_\", \"_\", \"_\", \"_\", \"_\", \"_\",\"_\"]\n            matrix[3] = [\"_\", \"_\", \"_\", \"_\", \"_\", \"_\",\"_\"]\n            matrix[4] = [\"_\", \"_\", \"_\", \"_\", \"_\", \"_\",\"_\"]\n            matrix[5] = [\"_\", \"_\", \"_\", \"_\", \"_\", \"_\",\"_\"]\n            matrix[6] = [\"_\", \"_\", \"_\", \"_\", \"_\", \"_\",\"_\"]\n        end\n    end\n</code></pre>\n\n<p>For some reason I\u00b4m getting this fail:</p>\n\n<pre><code>Failure/Error: @game.matrix.should eql matrix\n\n       expected: [[\"_\", \"_\", \"_\", \"_\", \"_\", \"_\", \"_\"], [\"_\", \"_\", \"_\", \"_\", \"_\", \"_\", \"_\"], [\"_\", \"_\", \"_\", \"_\", \"_\", ... \"_\", \"_\", \"_\", \"_\", \"_\"], [\"_\", \"_\", \"_\", \"_\", \"_\", \"_\", \"_\"], [\"_\", \"_\", \"_\", \"_\", \"_\", \"_\", \"_\"]]\n            got: [\"_\", \"_\", \"_\", \"_\", \"_\", \"_\", \"_\"]\n</code></pre>\n"}, {"tags": ["ruby", "rspec"], "comments": [{"owner": {"reputation": 1208, "user_id": 3406915, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/478116e7ad1fe58e2710db4192819b32?s=128&d=identicon&r=PG&f=1", "display_name": "zeitnot", "link": "https://stackoverflow.com/users/3406915/zeitnot"}, "edited": false, "score": 0, "creation_date": 1551806907, "post_id": 55008378, "comment_id": 96771816, "body": "Would you share <code>player1</code> function?"}], "answers": [{"tags": [], "owner": {"reputation": 653, "user_id": 7148414, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KMhlJ.jpg?s=128&g=1", "display_name": "baseballlover723", "link": "https://stackoverflow.com/users/7148414/baseballlover723"}, "is_accepted": true, "score": 1, "last_activity_date": 1551807155, "creation_date": 1551807155, "answer_id": 55008493, "question_id": 55008378, "link": "https://stackoverflow.com/questions/55008378/can%c2%b4t-pass-a-test-in-rspec/55008493#55008493", "title": "Can&#180;t pass a test in rspec", "body": "<p>your <code>setplayer1</code> doesn't actually set <code>player1</code> to be any value, so when you access it, its still nil.</p>\n\n<p>A side note, it is more preferred to use <code>&lt;attribute_name&gt;=</code> as your setter method instead of <code>set_&lt;attribute_name&gt;</code>. Note that you can use <code>attr_accessor</code> for to generate simple getters and setters, see <a href=\"https://stackoverflow.com/questions/4370960/what-is-attr-accessor-in-ruby\">What is attr_accessor in Ruby?</a> for more details.</p>\n"}], "owner": {"reputation": 15, "user_id": 6395287, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a795ce8df6b8dfc3735e04f5cfdbc7d?s=128&d=identicon&r=PG&f=1", "display_name": "jikra01", "link": "https://stackoverflow.com/users/6395287/jikra01"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 31, "favorite_count": 1, "accepted_answer_id": 55008493, "answer_count": 1, "score": 1, "last_activity_date": 1551807155, "creation_date": 1551806732, "question_id": 55008378, "link": "https://stackoverflow.com/questions/55008378/can%c2%b4t-pass-a-test-in-rspec", "title": "Can&#180;t pass a test in rspec", "body": "<pre><code>it \"should set token of player 1 to X\" do\n            @game.setplayer1\n            @game.player1.should eql \"X\"\n        end\n</code></pre>\n\n<p>My method</p>\n\n<pre><code>def setplayer1\n        @output.player1.eql? \"X\"        \n    end\u00a8\n</code></pre>\n\n<p>I\u00b4am still getting expected:</p>\n\n<pre><code>  Failure/Error: @game.player1.should eql \"X\"\n\n   expected: \"X\"\n        got: nil\n</code></pre>\n\n<p>I don\u00b4t know where is the problem and why it\u00b4s not passing the test.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "oracle", "ssl"], "comments": [{"owner": {"reputation": 6638, "user_id": 3061852, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3lr5m.jpg?s=128&g=1", "display_name": "kfinity", "link": "https://stackoverflow.com/users/3061852/kfinity"}, "edited": false, "score": 0, "creation_date": 1551813268, "post_id": 55008333, "comment_id": 96774868, "body": "Did you create <code>jdbc_connection.rb</code> yourself? What&#39;s in it? You normally set Oracle SSL settings in Java as JSSE properties on the JDBC connection object (e.g. <code>javax.net.ssl.keyStore</code>)."}, {"owner": {"reputation": 153, "user_id": 3956692, "user_type": "registered", "accept_rate": 86, "profile_image": "https://graph.facebook.com/720397335/picture?type=large", "display_name": "Joshua Hedges", "link": "https://stackoverflow.com/users/3956692/joshua-hedges"}, "reply_to_user": {"reputation": 6638, "user_id": 3061852, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3lr5m.jpg?s=128&g=1", "display_name": "kfinity", "link": "https://stackoverflow.com/users/3061852/kfinity"}, "edited": false, "score": 0, "creation_date": 1551820008, "post_id": 55008333, "comment_id": 96777867, "body": "It&#39;s basically an interface to the driver. It&#39;s provided by Oracle here:<a href=\"https://www.oracle.com/technetwork/articles/dsl/jruby-oracle11g-330825.html\" rel=\"nofollow noreferrer\">oracle.com/technetwork/articles/dsl/jruby-oracle11g-330&zwnj;&#8203;825.html</a>"}], "answers": [{"comments": [{"owner": {"reputation": 153, "user_id": 3956692, "user_type": "registered", "accept_rate": 86, "profile_image": "https://graph.facebook.com/720397335/picture?type=large", "display_name": "Joshua Hedges", "link": "https://stackoverflow.com/users/3956692/joshua-hedges"}, "edited": false, "score": 0, "creation_date": 1553888522, "post_id": 55012156, "comment_id": 97568136, "body": "This put me on the right path to create a solution."}], "tags": [], "owner": {"reputation": 6638, "user_id": 3061852, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3lr5m.jpg?s=128&g=1", "display_name": "kfinity", "link": "https://stackoverflow.com/users/3061852/kfinity"}, "is_accepted": true, "score": 0, "last_activity_date": 1551822637, "creation_date": 1551822637, "answer_id": 55012156, "question_id": 55008333, "link": "https://stackoverflow.com/questions/55008333/how-do-i-setup-ssl-for-jruby-oracle-connection/55012156#55012156", "title": "How do I setup SSL for Jruby Oracle connection?", "body": "<p>Sorry, this is only half an answer - I don't know much about JRuby, but from the Oracle side - <a href=\"https://www.oracle.com/technetwork/database/enterprise-edition/wp-oracle-jdbc-thin-ssl-130128.pdf\" rel=\"nofollow noreferrer\">this Oracle PDF describes how to set up SSL with the Oracle JDBC Thin driver</a>. You'll probably want to read the whole thing, but here's their Java example for using JKS keystores (slightly different for Oracle Wallets):</p>\n\n<pre><code>String url = \"jdbc:oracle:thin:@(DESCRIPTION=(ADDRESS=(PROTOCOL=tcps(HOST=servername)(PORT=2484))(CONNECT_DATA=(SERVICE_NAME=servicename))))\";\nProperties props = new Properties();\nprops.setProperty(\"user\", \"scott\");\nprops.setProperty(\"password\", \"tiger\"); \nprops.setProperty(\"javax.net.ssl.keyStore\",\n \"D:\\\\client_jks\\\\keystore.jks\");\nprops.setProperty(\"javax.net.ssl.keyStoreType\",\"JKS\");\nprops.setProperty(\"javax.net.ssl.keyStorePassword\",\"welcome123\"); \nConnection conn = DriverManager.getConnection(url, props); \n</code></pre>\n\n<p>You see how it's setting up the Java properties before it calls DriverManager.getConnection? I think that'll need to go in your <code>jdbc_connection</code> interface before the same getConnection call there. But I'm not familiar enough with Ruby to know how to do that.</p>\n"}, {"tags": [], "owner": {"reputation": 1024, "user_id": 4393594, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96cf45a6c597dd519f7a3ff6345f2178?s=128&d=identicon&r=PG", "display_name": "Nirmala", "link": "https://stackoverflow.com/users/4393594/nirmala"}, "is_accepted": false, "score": 0, "last_activity_date": 1551905366, "creation_date": 1551905366, "answer_id": 55031903, "question_id": 55008333, "link": "https://stackoverflow.com/questions/55008333/how-do-i-setup-ssl-for-jruby-oracle-connection/55031903#55031903", "title": "How do I setup SSL for Jruby Oracle connection?", "body": "<p>There are many ways to set the JKS connection properties. \n(a) Programmatically using the connection properties. See the sample <a href=\"https://github.com/oracle/oracle-db-examples/blob/master/java/jdbc/ConnectionSamples/DataSourceForJKS.java\" rel=\"nofollow noreferrer\">DataSourceForJKS.java</a></p>\n\n<p>(b) You can set these properties as system properties. </p>\n\n<pre><code>-Doracle.net.ssl_server_dn_match=true  \n-Djavax.net.ssl.trustStore=${TNS_ADMIN}/truststore.jks  \n-Djavax.net.ssl.trustStorePassword=welcome1  \n-Djavax.net.ssl.keyStore=${TNS_ADMIN}/keystore.jks  \n-Djavax.net.ssl.keyStorePassword=welcome1\n</code></pre>\n\n<p>(c) If you are using 18.3 then, you can leverage ojdbc.properties to add these connection properties. Check out the <a href=\"https://blogs.oracle.com/dev2dev/whats-new-in-183-jdbc-and-ucp\" rel=\"nofollow noreferrer\">blog</a></p>\n"}], "owner": {"reputation": 153, "user_id": 3956692, "user_type": "registered", "accept_rate": 86, "profile_image": "https://graph.facebook.com/720397335/picture?type=large", "display_name": "Joshua Hedges", "link": "https://stackoverflow.com/users/3956692/joshua-hedges"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 191, "favorite_count": 1, "accepted_answer_id": 55012156, "answer_count": 2, "score": 1, "last_activity_date": 1551905366, "creation_date": 1551806569, "question_id": 55008333, "link": "https://stackoverflow.com/questions/55008333/how-do-i-setup-ssl-for-jruby-oracle-connection", "title": "How do I setup SSL for Jruby Oracle connection?", "body": "<p>In Rails, Jruby etc. I've created a functioning call that queries an Oracle database in a webpage. I need to secure that functioning call in SSL.</p>\n\n<pre><code>&lt;%\nrequire 'jdbc_connection'\n\n# Database settings\nuser   = \"***REMOVED***\"\npasswd = \"***REMOVED***\"\nurl    = \"jdbc:oracle:thin:@***REMOVED***:1521/test\"\noutput = \"\"\nerror = \"\"\n\nselect_stmt, rest, select_sql = nil\nerror = \"No Errors.\"\nbegin\n  conn = OracleConnection.create(user, passwd, url)\n  select_sql = \"select columnA from test.tableA WHERE name='\"+@subject[\"name\"].first+\"'\"\n  select_stmt = conn.create_statement\n  rset = select_stmt.execute_query select_sql\n  while (rset.next)\n    output = output + rset.getString(1)\n  end\n\nrescue\n  error = \"Failed executing Oracle demo from JRuby \", $!, \"\\n\"\n\n  ensure\n   # We have to ensure everything is closed here.\n   if (!select_stmt.nil?)\n    select_stmt.close\n   end\n   if (!rset.nil?)\n    rset.close\n   end\n   conn.close_connection\nend\n%&gt;\n</code></pre>\n\n<p>I think I need a reference to the keystore, username, password, and connection string.</p>\n\n<p>I found an example connection String on this site:<a href=\"https://blogs.oracle.com/dev2dev/ssl-connection-to-oracle-db-using-jdbc,-tlsv12,-jks-or-oracle-wallets\" rel=\"nofollow noreferrer\">https://blogs.oracle.com/dev2dev/ssl-connection-to-oracle-db-using-jdbc,-tlsv12,-jks-or-oracle-wallets</a></p>\n\n<pre><code>DB_USER = \"hr\", DB_PASSWORD =\"hr\", and \nDB_URL = \"jdbc:oracle:thin:@(DESCRIPTION= (ADDRESS=\n                   (PROTOCOL=TCPS)(PORT=1522)(HOST=myhost))\n                   (CONNECT_DATA=(SERVICE_NAME=myorcldbservicename))\n                   (SECURITY=(ssl_server_cert_dn=\"CN=testcert.oracle.com, O=Oracle Corporation,L=Redwood City,ST=California,C=US\")))\"\n</code></pre>\n\n<p>Where do I reference the keystore? I feel like the class OracleConnection should probably be something like OracleConnectionSSL? </p>\n"}, {"tags": ["ruby", "rspec", "mongoid"], "comments": [{"owner": {"reputation": 1208, "user_id": 3406915, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/478116e7ad1fe58e2710db4192819b32?s=128&d=identicon&r=PG&f=1", "display_name": "zeitnot", "link": "https://stackoverflow.com/users/3406915/zeitnot"}, "edited": false, "score": 0, "creation_date": 1551806633, "post_id": 55007761, "comment_id": 96771691, "body": "What is the exact error."}, {"owner": {"reputation": 2301, "user_id": 19317, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47035e07012da3162b6e83650ee3abe0?s=128&d=identicon&r=PG", "display_name": "aridlehoover", "link": "https://stackoverflow.com/users/19317/aridlehoover"}, "edited": false, "score": 1, "creation_date": 1551816675, "post_id": 55007761, "comment_id": 96776381, "body": "You&#39;re trying to test Rails and/or Mongoid code. My advice is to not do this. Just rely on the fact that the Rails and Mongoid teams wrote sufficient tests and trust those tests."}, {"owner": {"reputation": 13, "user_id": 7807562, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/490c53b6e184a4e0dc29225f3104375d?s=128&d=identicon&r=PG&f=1", "display_name": "dvirgre", "link": "https://stackoverflow.com/users/7807562/dvirgre"}, "edited": false, "score": 0, "creation_date": 1551855326, "post_id": 55007761, "comment_id": 96788126, "body": "Zeitnot - the exact error in the post."}, {"owner": {"reputation": 13, "user_id": 7807562, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/490c53b6e184a4e0dc29225f3104375d?s=128&d=identicon&r=PG&f=1", "display_name": "dvirgre", "link": "https://stackoverflow.com/users/7807562/dvirgre"}, "edited": false, "score": 0, "creation_date": 1551855412, "post_id": 55007761, "comment_id": 96788159, "body": "aridlehoover - i want to make sure the callback after_save exists in the model (making sure no one will delete it by mistake and so on..)"}, {"owner": {"reputation": 2301, "user_id": 19317, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47035e07012da3162b6e83650ee3abe0?s=128&d=identicon&r=PG", "display_name": "aridlehoover", "link": "https://stackoverflow.com/users/19317/aridlehoover"}, "edited": false, "score": 0, "creation_date": 1551856455, "post_id": 55007761, "comment_id": 96788603, "body": "Then test the outcome of the <code>after_save</code>."}, {"owner": {"reputation": 13, "user_id": 7807562, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/490c53b6e184a4e0dc29225f3104375d?s=128&d=identicon&r=PG&f=1", "display_name": "dvirgre", "link": "https://stackoverflow.com/users/7807562/dvirgre"}, "edited": false, "score": 0, "creation_date": 1551865897, "post_id": 55007761, "comment_id": 96793656, "body": "I got your point, but for my tests, I need to check that I call to after_save method (no matter what the results are)"}, {"owner": {"reputation": 1721, "user_id": 3992622, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WwUbJ.png?s=128&g=1", "display_name": "It-Z", "link": "https://stackoverflow.com/users/3992622/it-z"}, "edited": false, "score": 0, "creation_date": 1554708839, "post_id": 55007761, "comment_id": 97835609, "body": "If any of the answers helped you please consider accepting it."}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 7807562, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/490c53b6e184a4e0dc29225f3104375d?s=128&d=identicon&r=PG&f=1", "display_name": "dvirgre", "link": "https://stackoverflow.com/users/7807562/dvirgre"}, "edited": false, "score": 0, "creation_date": 1552509905, "post_id": 55129383, "comment_id": 97042117, "body": "I checked - it happened, the callback called, but i want to put it in some test - but for some reason, I&#39;m not find any idea how to do it."}, {"owner": {"reputation": 9592, "user_id": 9540925, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YhOpI.png?s=128&g=1", "display_name": "D. SM", "link": "https://stackoverflow.com/users/9540925/d-sm"}, "reply_to_user": {"reputation": 13, "user_id": 7807562, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/490c53b6e184a4e0dc29225f3104375d?s=128&d=identicon&r=PG&f=1", "display_name": "dvirgre", "link": "https://stackoverflow.com/users/7807562/dvirgre"}, "edited": false, "score": 0, "creation_date": 1554141718, "post_id": 55129383, "comment_id": 97634725, "body": "Did you perform the same exact operations, i.e., created a post with author (which saves both), then invoked <code>save</code> on the already saved post (which wouldn&#39;t make any meaningful database changes)?"}], "tags": [], "owner": {"reputation": 9592, "user_id": 9540925, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YhOpI.png?s=128&g=1", "display_name": "D. SM", "link": "https://stackoverflow.com/users/9540925/d-sm"}, "is_accepted": false, "score": 0, "last_activity_date": 1552419142, "creation_date": 1552419142, "answer_id": 55129383, "question_id": 55007761, "link": "https://stackoverflow.com/questions/55007761/rspec-mongoid-testing-embedded-document-callback-after-save/55129383#55129383", "title": "Rspec mongoid - Testing embedded document callback (after_save)", "body": "<p>Your code looks correct but there is a number of outstanding issues in Mongoid related to callbacks in persistence. Ensure the callback is called in normal operation (i.e. when you save a post from a Rails console).</p>\n"}, {"tags": [], "owner": {"reputation": 1721, "user_id": 3992622, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WwUbJ.png?s=128&g=1", "display_name": "It-Z", "link": "https://stackoverflow.com/users/3992622/it-z"}, "is_accepted": true, "score": 0, "last_activity_date": 1553525499, "creation_date": 1553525499, "answer_id": 55340548, "question_id": 55007761, "link": "https://stackoverflow.com/questions/55007761/rspec-mongoid-testing-embedded-document-callback-after-save/55340548#55340548", "title": "Rspec mongoid - Testing embedded document callback (after_save)", "body": "<p>First of all, you should trust <code>mongoid</code> to call <code>after_save</code> and test <code>my_callback_method</code> in isolation.</p>\n\n<p>Now, as said in the comments, that you want to check if someone deleted the <code>after_save</code>, you can add a test for:</p>\n\n<pre><code>RSpec.describe Author, :type =&gt; :model do\n  context \"Author\" do\n    it \"should define my_callback_method for after_save\" do\n      result = Author._save_callbacks.select { |cb| cb.kind.eql?(:after) }.collect(&amp;:filter).include?(:my_callback_method)\n      expect(result).to eq true\n    end\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 7807562, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/490c53b6e184a4e0dc29225f3104375d?s=128&d=identicon&r=PG&f=1", "display_name": "dvirgre", "link": "https://stackoverflow.com/users/7807562/dvirgre"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 162, "favorite_count": 0, "accepted_answer_id": 55340548, "answer_count": 2, "score": 1, "last_activity_date": 1553525499, "creation_date": 1551804514, "question_id": 55007761, "link": "https://stackoverflow.com/questions/55007761/rspec-mongoid-testing-embedded-document-callback-after-save", "title": "Rspec mongoid - Testing embedded document callback (after_save)", "body": "<p>I'm trying to create a test to check if my post's embedded document(author) call to it callback method.</p>\n\n<p>Code:</p>\n\n<pre><code>class Post\n  include Mongoid::Document\n  include Mongoid::Timestamps::Created\n  include Mongoid::Timestamps::Updated\n  {....}\n  # relations\n  embeds_one :author, cascade_callbacks: true\n  accepts_nested_attributes_for :author\n  {...}\nend\n\nClass Author\n  include Mongoid::Document\n  include Mongoid::Timestamps::Created\n  include Mongoid::Timestamps::Updated\n\n  {...}\n   embedded_in :post\n   after_save    :my_callback_method\n\n   def save_estimation_logs\n     {...}\n   end\n  {...}\nend\n</code></pre>\n\n<p>test:</p>\n\n<pre><code>RSpec.describe Author, :type =&gt; :model do\n  context \"Create author on Post\" do\n    let!(:post) { create(:post, :with_external_author) }\n    it \"should call after_save method my_callback_method when saving\" do\n      expect(post.author).to receive(:my_callback_method)\n      expect(post.save).to eq true\n    end\n  end\nend\n</code></pre>\n\n<p>when i'm trying to run this rspec - i got</p>\n\n<pre><code>Failure/Error: expect(post.author).to receive(:my_callback_method)\n\n   (#&lt;Author _id: 5c7ea762f325709edac2ae84, created_at: 2019-03-05 16:44:18 UTC, updated_at: 2019-03-05 16:44:18 UTC&gt;). my_callback_method(*(any args))\n       expected: 1 time with any arguments\n       received: 0 times with any arguments\n</code></pre>\n\n<p>Can you guys help me understand how should I test this embedded document callbacks?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "amazon-web-services", "amazon-s3"], "comments": [{"owner": {"reputation": 11603, "user_id": 234593, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/8e2ee1b00d372ad8f6ed5e87385ffef5?s=128&d=identicon&r=PG", "display_name": "Kache", "link": "https://stackoverflow.com/users/234593/kache"}, "edited": false, "score": 0, "creation_date": 1551806374, "post_id": 55006259, "comment_id": 96771556, "body": "Is the clock at least deterministically/predictably incorrect?"}, {"owner": {"reputation": 11, "user_id": 11154773, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-zkJYna57Zjg/AAAAAAAAAAI/AAAAAAAAFrs/OYNNrvZtfIU/photo.jpg?sz=128", "display_name": "Joshua McGee", "link": "https://stackoverflow.com/users/11154773/joshua-mcgee"}, "reply_to_user": {"reputation": 11603, "user_id": 234593, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/8e2ee1b00d372ad8f6ed5e87385ffef5?s=128&d=identicon&r=PG", "display_name": "Kache", "link": "https://stackoverflow.com/users/234593/kache"}, "edited": false, "score": 0, "creation_date": 1551807121, "post_id": 55006259, "comment_id": 96771933, "body": "The offset will vary.  I have updated my question to reflect this."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 11154773, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-zkJYna57Zjg/AAAAAAAAAAI/AAAAAAAAFrs/OYNNrvZtfIU/photo.jpg?sz=128", "display_name": "Joshua McGee", "link": "https://stackoverflow.com/users/11154773/joshua-mcgee"}, "edited": false, "score": 0, "creation_date": 1551807287, "post_id": 55008234, "comment_id": 96772015, "body": "Yes, I saw that guide too, and it works fine when using the <code>presigned_url</code> method from the <code>aws-sdk</code> gem.  I cannot use that method, however, as it does not expose the X-Amz-Date parameter.  If there is a different URL I should be hitting with the raw PUT request, I&#39;m interested to learn it. The offset will vary, but past/future does not seem to be a factor in getting it to work."}], "tags": [], "owner": {"reputation": 478, "user_id": 9668346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/126d93ec5bb3442bf2f73700bcf88a77?s=128&d=identicon&r=PG&f=1", "display_name": "Vaibhav", "link": "https://stackoverflow.com/users/9668346/vaibhav"}, "is_accepted": false, "score": 0, "last_activity_date": 1551806170, "creation_date": 1551806170, "answer_id": 55008234, "question_id": 55006259, "link": "https://stackoverflow.com/questions/55006259/uploading-to-aws-s3-using-a-presigned-url-in-ruby-on-rails/55008234#55008234", "title": "Uploading to AWS S3 using a presigned URL in Ruby on Rails", "body": "<blockquote>\n  <p>I need to upload files to S3 from a machine that must have its clock set incorrectly.</p>\n</blockquote>\n\n<p>Is the time in past or future? Though the possibility is miniscule, this might be causing issues (nothing in the docs indicates the same though).</p>\n\n<p>However, I see that you are using the <code>Net::HTTP</code> package and making a <strong>raw PUT request</strong> and the method you are using for generating the presigned URL does not look very convincing to me because of the <code>obj.public_url</code> thing. </p>\n\n<p>Anyways, I did have a requirement like this (presigned URL upload but without the 'incorrect time on the machine' part). This is the guide I used and it worked: </p>\n\n<p><a href=\"https://docs.aws.amazon.com/AmazonS3/latest/dev/UploadObjectPreSignedURLRubySDK.html\" rel=\"nofollow noreferrer\">https://docs.aws.amazon.com/AmazonS3/latest/dev/UploadObjectPreSignedURLRubySDK.html</a></p>\n\n<p>There is a working code on that page (not pasting it here because it might change in future) which worked for me. </p>\n"}], "owner": {"reputation": 11, "user_id": 11154773, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-zkJYna57Zjg/AAAAAAAAAAI/AAAAAAAAFrs/OYNNrvZtfIU/photo.jpg?sz=128", "display_name": "Joshua McGee", "link": "https://stackoverflow.com/users/11154773/joshua-mcgee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 863, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1551819418, "creation_date": 1551799759, "last_edit_date": 1551819418, "question_id": 55006259, "link": "https://stackoverflow.com/questions/55006259/uploading-to-aws-s3-using-a-presigned-url-in-ruby-on-rails", "title": "Uploading to AWS S3 using a presigned URL in Ruby on Rails", "body": "<p>I need to upload files to S3 from a machine that <em>must</em> have its clock set incorrectly, and the offset from the correct time will vary.  You can apparently do this by specifying the <code>X-Amz-Date</code> header (setting it to the current actual time) and uploading using query string authorization.  The <code>aws-sdk</code> Ruby gem does not expose this parameter in its <code>presigned_url</code> method, so I'm trying to do it using the <code>aws-sigv4</code> gem.  My <code>PUT</code>s, however, are being rejected with <code>403 Unauthorized</code> errors.</p>\n\n<p>Here is the code I've tried:</p>\n\n<pre><code>def upload_file_with_time(file, file_path, expires_in_seconds, time)\n  region = \"us-east-1\"\n  access_key_id = ENV['AWS_ACCESS_KEY_ID']\n  secret_access_key = ENV['AWS_SECRET_ACCESS_KEY']\n\n  obj = s3_bucket.object(file_path)\n\n  signer = Aws::Sigv4::Signer.new(\n    service: 's3',\n    region: region,\n    access_key_id: access_key_id,\n    secret_access_key: secret_access_key\n  )\n\n  pre_signed_url = signer.presign_url(\n    http_method: 'PUT',\n    url: obj.public_url,\n    expires_in: expires_in_seconds,\n    time: time\n  )\n\n  Net::HTTP.start(pre_signed_url.host) do |http|\n    http.send_request(\"PUT\", pre_signed_url.request_uri, file, \"content-type\": \"\")\n  end\nend\n</code></pre>\n\n<p>The code generates a presigned URL like this:</p>\n\n<p><code>https://XXXXX.s3.amazonaws.com/testing/89254661-24de-4bc7-b6e1-7d0018213735.txt?X-Amz-Algorithm=AWS4-HMAC-SHA256&amp;X-Amz-Credential=XXXXX%2Fus-east-1%2Fs3%2Faws4_request&amp;X-Amz-Date=20190301T213824Z&amp;X-Amz-Expires=900&amp;X-Amz-SignedHeaders=host&amp;X-Amz-Signature=XXXXX</code> (sensitive information has been redacted with <code>XXXXX</code>).</p>\n\n<p>I get a <code>403 Unauthorized</code> from <code>http.send_request</code> when I try to upload to this endpoint.  If I hit the URL with a post from <code>curl</code>, I see this as the beginning of the XML response:</p>\n\n<pre><code>&lt;?xml version=\u201c1.0\u201d?&gt;\n&lt;Error&gt;\n &lt;Code&gt;SignatureDoesNotMatch&lt;/Code&gt;\n &lt;Message&gt;The request signature we calculated does not match the signature you provided. Check your key and signing method.&lt;/Message&gt;\n</code></pre>\n\n<p>What am I doing wrong?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "bundler"], "comments": [{"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1551796091, "post_id": 55004806, "comment_id": 96765231, "body": "Are you sure that you actually use the <code>2.0.1</code> version of bundler and not another version? How did you verify that?"}, {"owner": {"reputation": 1725, "user_id": 4738391, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/nCUGI.jpg?s=128&g=1", "display_name": "Zia Ul Rehman Mughal", "link": "https://stackoverflow.com/users/4738391/zia-ul-rehman-mughal"}, "reply_to_user": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1551811003, "post_id": 55004806, "comment_id": 96773822, "body": "Well, i run bundle -v and i get 2.0.1, also bundler 1 doesn&#39;t pick gems.rb, it needs Gemfile, so i am sure, yeah."}], "answers": [{"comments": [{"owner": {"reputation": 1725, "user_id": 4738391, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/nCUGI.jpg?s=128&g=1", "display_name": "Zia Ul Rehman Mughal", "link": "https://stackoverflow.com/users/4738391/zia-ul-rehman-mughal"}, "edited": false, "score": 0, "creation_date": 1551811355, "post_id": 55008388, "comment_id": 96773986, "body": "Thanks for the link, don&#39;t know why i missed this one in my google search. It fixed the issue, thanks"}, {"owner": {"reputation": 1725, "user_id": 4738391, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/nCUGI.jpg?s=128&g=1", "display_name": "Zia Ul Rehman Mughal", "link": "https://stackoverflow.com/users/4738391/zia-ul-rehman-mughal"}, "edited": false, "score": 0, "creation_date": 1551811430, "post_id": 55008388, "comment_id": 96774025, "body": "BTW, i don&#39;t know why, but appending rails with bundle exec was also making it work somehow."}, {"owner": {"reputation": 653, "user_id": 7148414, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KMhlJ.jpg?s=128&g=1", "display_name": "baseballlover723", "link": "https://stackoverflow.com/users/7148414/baseballlover723"}, "reply_to_user": {"reputation": 1725, "user_id": 4738391, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/nCUGI.jpg?s=128&g=1", "display_name": "Zia Ul Rehman Mughal", "link": "https://stackoverflow.com/users/4738391/zia-ul-rehman-mughal"}, "edited": false, "score": 0, "creation_date": 1551813631, "post_id": 55008388, "comment_id": 96775045, "body": "hmm, if running it with bundle exec makes it work, then it seems like its just defaulting to the wrong bundler version or something. <code>bundle exec</code> ensures that it runs the command in the right bundler context, you can see <a href=\"https://stackoverflow.com/questions/6588674/what-does-bundle-exec-rake-mean\" title=\"what does bundle exec rake mean\">stackoverflow.com/questions/6588674/&hellip;</a> for some more details if you want"}], "tags": [], "owner": {"reputation": 653, "user_id": 7148414, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KMhlJ.jpg?s=128&g=1", "display_name": "baseballlover723", "link": "https://stackoverflow.com/users/7148414/baseballlover723"}, "is_accepted": true, "score": 1, "last_activity_date": 1551806761, "creation_date": 1551806761, "answer_id": 55008388, "question_id": 55004806, "link": "https://stackoverflow.com/questions/55004806/bundler-2-gemfile-not-found-error-when-running-any-rails-or-rake-command/55008388#55008388", "title": "Bundler 2, Gemfile not found error when running any rails or rake command", "body": "<p>It looks like rails doesn't support using <code>gems.rb</code> and <code>gems.locked</code>. <a href=\"https://github.com/rails/rails/issues/31295\" rel=\"nofollow noreferrer\">https://github.com/rails/rails/issues/31295</a></p>\n\n<p>You could try what that guy did and edit some files, or you could rename your <code>gems.rb</code> back to <code>Gemfile</code> and <code>gems.locked</code> back to <code>Gemfile.lock</code></p>\n"}], "owner": {"reputation": 1725, "user_id": 4738391, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/nCUGI.jpg?s=128&g=1", "display_name": "Zia Ul Rehman Mughal", "link": "https://stackoverflow.com/users/4738391/zia-ul-rehman-mughal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 144, "favorite_count": 0, "accepted_answer_id": 55008388, "answer_count": 1, "score": 0, "last_activity_date": 1551806761, "creation_date": 1551795154, "question_id": 55004806, "link": "https://stackoverflow.com/questions/55004806/bundler-2-gemfile-not-found-error-when-running-any-rails-or-rake-command", "title": "Bundler 2, Gemfile not found error when running any rails or rake command", "body": "<p>I am setting a new app, stack is:</p>\n\n<pre><code>ruby: 2.6.1 (using rvm)\nrails: 5.2.2\nbundler: 2.0.1\n</code></pre>\n\n<p>Now thing is, bundler 2 doesn't use <code>Gemfile</code> at all, i have proper <code>gems.rb</code> and <code>gems.locked</code> and everything was working properly until i pulled some code from a co-worker which got merged.</p>\n\n<p>Issue is whenever i run any <code>rake</code> or <code>rails</code> command i get this error:</p>\n\n<pre><code>/path/to/proj/Gemfile not found\n</code></pre>\n\n<p>I then even tried going back to old master when that code was not merged and issue is still there. So it is probably not something in the code i pulled.\nAnd issue seems persistent in different machines.</p>\n\n<p>I know there are other issues which have similar errors of <code>Gemfile not found</code> but those are mostly those which had wrong directory opened or some gem issued fixed by <code>bundle update</code> or <code>gem update</code> type commands, this is not that issue because. This is something else, because bundler 2 doesn't even need <code>Gemfile</code>.</p>\n"}, {"tags": ["arrays", "ruby"], "comments": [{"owner": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "edited": false, "score": 2, "creation_date": 1551794715, "post_id": 55004542, "comment_id": 96764394, "body": "BTW it&#39;s not an array of all the pairs (i.e. 2-element combinations), it&#39;s an array with all consecutive pairs."}, {"owner": {"reputation": 10912, "user_id": 1681, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/dcc2d3a8038cd47219af0eebe0a8a78e?s=128&d=identicon&r=PG", "display_name": "Sixty4Bit", "link": "https://stackoverflow.com/users/1681/sixty4bit"}, "reply_to_user": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "edited": false, "score": 0, "creation_date": 1551795280, "post_id": 55004542, "comment_id": 96764732, "body": "@MarekLipka Thank you for the clarification!"}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1551797408, "post_id": 55004542, "comment_id": 96766111, "body": "By the way, it would help tremendously, what the problem is with the documentation of <code>Enumerable#each_cons</code> or <code>Enumerable</code> in general that prevented you from finding this method. That way, the Ruby developers can improve the documentation so that future developers don&#39;t have this problem."}, {"owner": {"reputation": 10912, "user_id": 1681, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/dcc2d3a8038cd47219af0eebe0a8a78e?s=128&d=identicon&r=PG", "display_name": "Sixty4Bit", "link": "https://stackoverflow.com/users/1681/sixty4bit"}, "reply_to_user": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1551809078, "post_id": 55004542, "comment_id": 96772901, "body": "@J&#246;rgWMittag the primary problem is that I didn&#39;t know the concept of &quot;consecutive&quot;. Not a fault on anyone but my lack of experience."}], "answers": [{"tags": [], "owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "is_accepted": false, "score": 2, "last_activity_date": 1551794477, "creation_date": 1551794477, "answer_id": 55004573, "question_id": 55004542, "link": "https://stackoverflow.com/questions/55004542/ruby-get-consecutive-pairs-of-elements-from-an-array/55004573#55004573", "title": "Ruby: Get consecutive pairs of elements from an array", "body": "<p>You can use <a href=\"https://ruby-doc.org/core-2.6.1/Enumerable.html#method-i-each_cons\" rel=\"nofollow noreferrer\">Enumerable#each_cons</a>, passing 2 as argument:</p>\n\n<pre><code>[1, 2, 3, 4].each_cons(2).to_a\n# [[1, 2], [2, 3], [3, 4]]\n</code></pre>\n\n<p>You need to use <code>to_a</code> there, because each_cons by itself returns an Enumerator object.</p>\n"}], "owner": {"reputation": 10912, "user_id": 1681, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/dcc2d3a8038cd47219af0eebe0a8a78e?s=128&d=identicon&r=PG", "display_name": "Sixty4Bit", "link": "https://stackoverflow.com/users/1681/sixty4bit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 418, "favorite_count": 0, "closed_date": 1551798326, "answer_count": 1, "score": 1, "last_activity_date": 1551795166, "creation_date": 1551794381, "last_edit_date": 1551795166, "question_id": 55004542, "link": "https://stackoverflow.com/questions/55004542/ruby-get-consecutive-pairs-of-elements-from-an-array", "closed_reason": "Duplicate", "title": "Ruby: Get consecutive pairs of elements from an array", "body": "<p>Given the array: <code>[1,2,3,4]</code> I would like to receive an array back of <code>[[1,2],[2,3],[3,4]]</code>.</p>\n\n<p>Is there a one-liner or a method that does this? </p>\n"}, {"tags": ["ruby", "rubygems", "nokogiri", "bundler", "amazon-linux"], "comments": [{"owner": {"reputation": 2352, "user_id": 157931, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/986d255e94481d2249bae7911e7845e8?s=128&d=identicon&r=PG", "display_name": "Danilo Cabello", "link": "https://stackoverflow.com/users/157931/danilo-cabello"}, "edited": false, "score": 0, "creation_date": 1551788273, "post_id": 55002527, "comment_id": 96760574, "body": "This is a common problem in Ruby environments, nokogiri uses compiles native C code when installing you will need the tools needed to make C applications, what operational system are you using? Is there any more information on the error, it usually gives a bit more (unable to locate headers for example)"}, {"owner": {"reputation": 176, "user_id": 6198573, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93e4f964565b8e1a6151750e864d70f7?s=128&d=identicon&r=PG", "display_name": "gururuby", "link": "https://stackoverflow.com/users/6198573/gururuby"}, "edited": false, "score": 0, "creation_date": 1551789019, "post_id": 55002527, "comment_id": 96760982, "body": "I think, this will help you <a href=\"https://stackoverflow.com/questions/16028028/nokogiri-will-not-install-error-failed-to-build-gem-native-extension?answertab=votes#tab-top\" title=\"nokogiri will not install error failed to build gem native extension\">stackoverflow.com/questions/16028028/&hellip;</a>"}, {"owner": {"reputation": 3946, "user_id": 6231376, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cea33b55396be93411ade85021f41b01?s=128&d=identicon&r=PG&f=1", "display_name": "TeWu", "link": "https://stackoverflow.com/users/6231376/tewu"}, "edited": false, "score": 0, "creation_date": 1551789570, "post_id": 55002527, "comment_id": 96761292, "body": "If you are on Ubuntu, as a quick and dirty fix, that might, or might not work, you can try installing common missing libraries, with command: <code>sudo apt-get install build-essential patch libgmp-dev libxml2-dev libxslt1-dev zlib1g-dev liblzma-dev</code>"}, {"owner": {"reputation": 41, "user_id": 11151861, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c574b6cce33c8485651623b218f37bb?s=128&d=identicon&r=PG&f=1", "display_name": "yfqin", "link": "https://stackoverflow.com/users/11151861/yfqin"}, "edited": false, "score": 1, "creation_date": 1551790103, "post_id": 55002527, "comment_id": 96761604, "body": "<code>gem install nokogiri -- --use-system-libraries</code> works. Thanks for your kindly help!"}, {"owner": {"reputation": 5004, "user_id": 18642, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/ac35f0b2f290c9e5bfdcdd79f7126d9b?s=128&d=identicon&r=PG", "display_name": "VP.", "link": "https://stackoverflow.com/users/18642/vp"}, "edited": false, "score": 0, "creation_date": 1551795097, "post_id": 55002527, "comment_id": 96764609, "body": "hi @yfqin try to always that is possible to use the system-libraries. They get all security updates and you update it with the linux distribution package manager."}], "owner": {"reputation": 41, "user_id": 11151861, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c574b6cce33c8485651623b218f37bb?s=128&d=identicon&r=PG&f=1", "display_name": "yfqin", "link": "https://stackoverflow.com/users/11151861/yfqin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 277, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1551991856, "creation_date": 1551787755, "last_edit_date": 1551991856, "question_id": 55002527, "link": "https://stackoverflow.com/questions/55002527/could-not-install-nokogiri", "title": "Could not install nokogiri", "body": "<p>I try to <code>bundle install --gemfile=Gemfile</code>, but error occurs as: </p>\n\n<blockquote>\n  <p>An error occurred while installing nokogiri (1.7.2), and Bundler\n  cannot continue. Make sure that <code>gem install nokogiri -v '1.7.2'\n  --source 'http://rubygems.org/'</code> succeeds before bundling.</p>\n</blockquote>\n\n<p>So I try install nokogiri, then refused:</p>\n\n<blockquote>\n  <p>ERROR:  Error installing nokogiri:<br>\n            ERROR: Failed to build gem native extension.</p>\n</blockquote>\n\n<p>It seems nokogiri was locked. I wonder how to install specific version(1.7.2) of nokogiri.</p>\n\n<p>My OS is Amazon Linux AMI release 2017.09, and I have installed </p>\n\n<blockquote>\n  <p>mysql-devel sqlite-devel libcurl-devel ruby24 ruby24-devel zlib-devel\n  gcc libxslt-devel libxml2-devel gcc-c++ make curl</p>\n</blockquote>\n\n<p>Ruby version is 2.4 and bundler at version 1.17.3. Detailed error info is: </p>\n\n<pre><code>current directory: /usr/local/share/ruby/gems/2.4/gems/nokogiri-1.7.2/ext/nokogiri\n/usr/bin/ruby2.4 -r ./siteconf20190305-30890-gjsryi.rb extconf.rb\nchecking if the C compiler accepts ... yes\nBuilding nokogiri using packaged libraries.\nUsing mini_portile version 2.1.0\nchecking for gzdopen() in -lz... yes\nchecking for iconv... yes\n************************************************************************\nIMPORTANT NOTICE:\n\nBuilding Nokogiri with a packaged version of libxml2-2.9.4\nwith the following patches applied:\n    - 0001-Fix-comparison-with-root-node-in-xmlXPathCmpNodes.patch\n    - 0002-Fix-XPointer-paths-beginning-with-range-to.patch\n    - 0003-Disallow-namespace-nodes-in-XPointer-ranges.patch\n\nTeam Nokogiri will keep on doing their best to provide security\nupdates in a timely manner, but if this is a concern for you and want\nto use the system library instead; abort this installation process and\nreinstall nokogiri as follows: \ngem install nokogiri -- --use-system-libraries\n        [--with-xml2-config=/path/to/xml2-config]\n        [--with-xslt-config=/path/to/xslt-config]\n\nIf you are using Bundler, tell it to use the option:\n\n    bundle config build.nokogiri --use-system-libraries\n    bundle install\n\nNote, however, that nokogiri is not fully compatible with arbitrary\nversions of libxml2 provided by OS/package vendors.\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "postgresql"], "answers": [{"comments": [{"owner": {"reputation": 47, "user_id": 10539763, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-GoSNVRh_ons/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbDiY34zIC8CohdHVX3Xsmdct9FmmA/mo/photo.jpg?sz=128", "display_name": "Jaydev Shiroya", "link": "https://stackoverflow.com/users/10539763/jaydev-shiroya"}, "edited": false, "score": 0, "creation_date": 1551795715, "post_id": 55002034, "comment_id": 96765000, "body": "Thank you so much sir, never thought that solution would be this much simpler."}], "tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": true, "score": 5, "last_activity_date": 1551786106, "creation_date": 1551786106, "answer_id": 55002034, "question_id": 55001910, "link": "https://stackoverflow.com/questions/55001910/rails-filter-record-on-column-value-without-association/55002034#55002034", "title": "Rails filter record on column value without association", "body": "<p>I would go with:</p>\n\n<pre><code>Lead.where.not(phone: User.select(:phone))\n</code></pre>\n"}], "owner": {"reputation": 47, "user_id": 10539763, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-GoSNVRh_ons/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbDiY34zIC8CohdHVX3Xsmdct9FmmA/mo/photo.jpg?sz=128", "display_name": "Jaydev Shiroya", "link": "https://stackoverflow.com/users/10539763/jaydev-shiroya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "accepted_answer_id": 55002034, "answer_count": 1, "score": 0, "last_activity_date": 1551786106, "creation_date": 1551785716, "last_edit_date": 1551786023, "question_id": 55001910, "link": "https://stackoverflow.com/questions/55001910/rails-filter-record-on-column-value-without-association", "title": "Rails filter record on column value without association", "body": "<p>I have two models with both have :phone column,</p>\n\n<p>I'm trying to query Leads who don't have :phone present in User's Records</p>\n\n<p>So if lead has 3 records with unique phones</p>\n\n<pre><code>Lead.last(3)\n#&lt;Lead&gt;\n    {\n    :id =&gt; 1\n    :phone =&gt; \"9898989898\" \n    },\n#&lt;Lead&gt;\n    {\n    :id =&gt; 2\n    :phone =&gt; \"1212121212\" \n    },\n#&lt;Lead&gt;\n    {\n    :id =&gt; 3\n    :phone =&gt; \"3434343434\" \n    }\n</code></pre>\n\n<p>and user has same :phone present</p>\n\n<pre><code>#&lt;User&gt;\n{\n:id =&gt; 95\n:phone =&gt; \"3434343434\"\n}\n</code></pre>\n\n<p>the record phone present in user's table should not come in query of Lead records\nPlease note that i don't want to add any relations or associations on this two Models.</p>\n\n<p>Any help/suggestions appreciate. </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rails-activerecord"], "answers": [{"comments": [{"owner": {"reputation": 1266, "user_id": 6022100, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/dc0adea29934c8ee1c31f96bf85a7fbc?s=128&d=identicon&r=PG", "display_name": "rwold", "link": "https://stackoverflow.com/users/6022100/rwold"}, "edited": false, "score": 0, "creation_date": 1551795218, "post_id": 55004299, "comment_id": 96764691, "body": "Thanks for your reply. I should emphasise though that I will always be searching against a database field, but that field might be related to the table for the model that includes ExtendedEvent with a join."}], "tags": [], "owner": {"reputation": 51, "user_id": 6305123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e997885e339940aeb8461e5720c2b5e6?s=128&d=identicon&r=PG&f=1", "display_name": "Oleh Feilo", "link": "https://stackoverflow.com/users/6305123/oleh-feilo"}, "is_accepted": false, "score": 0, "last_activity_date": 1551793500, "creation_date": 1551793500, "answer_id": 55004299, "question_id": 55001776, "link": "https://stackoverflow.com/questions/55001776/use-an-attribute-or-association-attribute-in-a-query/55004299#55004299", "title": "Use an attribute or association attribute in a query", "body": "<p>It is only possible to use <code>where</code> if you are searching in the fields from the database, and so, in this case, you have to use plain ruby (which is going to be slow):</p>\n\n<pre><code>def self.overlaps_with(time_range)\n  select do |instance|\n    time_range.include?(instance.ee_start_date_time)\n    || time_range.include?(instance.ee_end_date_time)\n  end\nend\n</code></pre>\n\n<p>Also, if you need an ActiveRecord_Relation instead of array (so you can use methods like <code>where</code> on it later) you can do it like this:</p>\n\n<pre><code>def self.overlaps_with(time_range)\n  ids = select do |instance|\n    time_range.include?(instance.ee_start_date_time)\n    || time_range.include?(instance.ee_end_date_time)\n  end.map(&amp;:id)\n\n  where(id: ids)\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1266, "user_id": 6022100, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/dc0adea29934c8ee1c31f96bf85a7fbc?s=128&d=identicon&r=PG", "display_name": "rwold", "link": "https://stackoverflow.com/users/6022100/rwold"}, "edited": false, "score": 0, "creation_date": 1551798601, "post_id": 55005176, "comment_id": 96766884, "body": "Sorry, you&#39;re completely right that my examples were broken. I&#39;ve fixed them to hopefully clarify things a bit."}, {"owner": {"reputation": 11603, "user_id": 234593, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/8e2ee1b00d372ad8f6ed5e87385ffef5?s=128&d=identicon&r=PG", "display_name": "Kache", "link": "https://stackoverflow.com/users/234593/kache"}, "reply_to_user": {"reputation": 1266, "user_id": 6022100, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/dc0adea29934c8ee1c31f96bf85a7fbc?s=128&d=identicon&r=PG", "display_name": "rwold", "link": "https://stackoverflow.com/users/6022100/rwold"}, "edited": false, "score": 0, "creation_date": 1551803525, "post_id": 55005176, "comment_id": 96769964, "body": "<code>entry</code> and <code>exit</code> are polymorphic?"}, {"owner": {"reputation": 1266, "user_id": 6022100, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/dc0adea29934c8ee1c31f96bf85a7fbc?s=128&d=identicon&r=PG", "display_name": "rwold", "link": "https://stackoverflow.com/users/6022100/rwold"}, "edited": false, "score": 0, "creation_date": 1551803628, "post_id": 55005176, "comment_id": 96770022, "body": "I&#39;d prefer not to assume they&#39;re of the same class, but in practice they are yes."}, {"owner": {"reputation": 11603, "user_id": 234593, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/8e2ee1b00d372ad8f6ed5e87385ffef5?s=128&d=identicon&r=PG", "display_name": "Kache", "link": "https://stackoverflow.com/users/234593/kache"}, "reply_to_user": {"reputation": 1266, "user_id": 6022100, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/dc0adea29934c8ee1c31f96bf85a7fbc?s=128&d=identicon&r=PG", "display_name": "rwold", "link": "https://stackoverflow.com/users/6022100/rwold"}, "edited": false, "score": 0, "creation_date": 1551803724, "post_id": 55005176, "comment_id": 96770082, "body": "No, that&#39;d mean the opposite of &quot;polymorphic&quot;. 1) <code>entry</code> can can be a <code>Foo</code> and <code>exit</code> can be a <code>Bar</code>? or 2) f <code>entry</code> is a <code>Foo</code>, <code>exit</code> will be a <code>Foo</code> also, and vice versa? 3) In the code, how many <code>entry</code> types are there? Only a particular &quot;<code>Foo</code>&quot; or multiple types?"}, {"owner": {"reputation": 1266, "user_id": 6022100, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/dc0adea29934c8ee1c31f96bf85a7fbc?s=128&d=identicon&r=PG", "display_name": "rwold", "link": "https://stackoverflow.com/users/6022100/rwold"}, "edited": false, "score": 0, "creation_date": 1551803880, "post_id": 55005176, "comment_id": 96770164, "body": "Like I said, I would prefer to assume that they are not of the same class if possible. But in practice, my only examples so far would have them of the same class."}, {"owner": {"reputation": 11603, "user_id": 234593, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/8e2ee1b00d372ad8f6ed5e87385ffef5?s=128&d=identicon&r=PG", "display_name": "Kache", "link": "https://stackoverflow.com/users/234593/kache"}, "reply_to_user": {"reputation": 1266, "user_id": 6022100, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/dc0adea29934c8ee1c31f96bf85a7fbc?s=128&d=identicon&r=PG", "display_name": "rwold", "link": "https://stackoverflow.com/users/6022100/rwold"}, "edited": false, "score": 0, "creation_date": 1551803958, "post_id": 55005176, "comment_id": 96770221, "body": "If they&#39;re not going to be static and predetermined, same class or not, I&#39;m not sure Rails can &quot;magically do it for you&quot;, and you&#39;ll have to pretty much write SQL in some form. I&#39;ll answer in the case that they are going to be static and predetermined."}, {"owner": {"reputation": 1266, "user_id": 6022100, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/dc0adea29934c8ee1c31f96bf85a7fbc?s=128&d=identicon&r=PG", "display_name": "rwold", "link": "https://stackoverflow.com/users/6022100/rwold"}, "edited": false, "score": 0, "creation_date": 1551804035, "post_id": 55005176, "comment_id": 96770273, "body": "Yeah, tbh I&#39;m leaning towards denormalising my tables and coming up with something based on <code>alias_attribute</code>."}, {"owner": {"reputation": 11603, "user_id": 234593, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/8e2ee1b00d372ad8f6ed5e87385ffef5?s=128&d=identicon&r=PG", "display_name": "Kache", "link": "https://stackoverflow.com/users/234593/kache"}, "reply_to_user": {"reputation": 1266, "user_id": 6022100, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/dc0adea29934c8ee1c31f96bf85a7fbc?s=128&d=identicon&r=PG", "display_name": "rwold", "link": "https://stackoverflow.com/users/6022100/rwold"}, "edited": false, "score": 0, "creation_date": 1551806003, "post_id": 55005176, "comment_id": 96771348, "body": "Not sure how <code>alias_attribute</code> can help, but I highly recommend against denormalizing. The data model looks okay so far, and a RDBMS can handle and query this like a breeze if left normalized -- it&#39;s just two indexed <code>&lt;</code> checks. The &quot;limitation&quot; is that ActiveRecord struggles with anything other than trivial tree-shaped associations."}], "tags": [], "owner": {"reputation": 11603, "user_id": 234593, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/8e2ee1b00d372ad8f6ed5e87385ffef5?s=128&d=identicon&r=PG", "display_name": "Kache", "link": "https://stackoverflow.com/users/234593/kache"}, "is_accepted": false, "score": 0, "last_activity_date": 1551805737, "last_edit_date": 1551805737, "creation_date": 1551796357, "answer_id": 55005176, "question_id": 55001776, "link": "https://stackoverflow.com/questions/55001776/use-an-attribute-or-association-attribute-in-a-query/55005176#55005176", "title": "Use an attribute or association attribute in a query", "body": "<p>It doesn't look like the models you've pasted are relevant for querying the db, so I'll use examples of my own:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>time_range = [1.hour.ago, 1.hour.since]\n\noverlap_records = Model.where('? &gt; models.end_time OR models.start_time &lt; ?', *time_range)\n\nassociated_overlap_recs = Assoc.joins(:model).where('? &gt; models.end_time OR models.start_time &lt; ?', *time_range)\n</code></pre>\n\n<p>Make sure the two time columns are compound indexed.</p>\n\n<hr>\n\n<p>So assuming there are:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>class InAndOutEvent &lt; ActiveRecord::Base\n  belongs_to :entry, class_name: \"ThingWithDateTime\"\n  belongs_to :exit, class_name: \"ThingWithDateTime\"\nend\n\nclass ThingWithDateTime &lt; ActiveRecord::Base\nend\n</code></pre>\n\n<p>You should be able to do something like this:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code># data \"from the association\"\nentry_time = thing_with_date_time_foo.date_time\nexit_time = thing_with_date_time_bar.date_time\n\n# to adhere to your api that accepts a `time_range` parameter\ntime_range = [entry_time, exit_time]\nInAndOutEvent.joins(:entry, :exit).where(\n  '? &gt; thing_with_date_times.date_time OR thing_with_date_times_in_and_out_events.start_time &lt; ?',\n  *time_range\n)\n</code></pre>\n\n<p>The specific query depends on the <a href=\"https://www.postgresql.org/docs/11/queries-table-expressions.html#QUERIES-TABLE-ALIASES\" rel=\"nofollow noreferrer\">table aliases</a> ActiveRecord \"chooses\" for the join.</p>\n\n<p>It gets quite more complicated if one or both of the associations are polymorphic.</p>\n"}], "owner": {"reputation": 1266, "user_id": 6022100, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/dc0adea29934c8ee1c31f96bf85a7fbc?s=128&d=identicon&r=PG", "display_name": "rwold", "link": "https://stackoverflow.com/users/6022100/rwold"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 137, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1551805737, "creation_date": 1551785293, "last_edit_date": 1551799472, "question_id": 55001776, "link": "https://stackoverflow.com/questions/55001776/use-an-attribute-or-association-attribute-in-a-query", "title": "Use an attribute or association attribute in a query", "body": "<p>I have a Rails Concern <code>ExtendedEvent</code> that I'm using to encapsulate logic relating to events that have a start time and an end time, of which I have several in my application. It currently looks like this:</p>\n\n<p>Usage in a class usually looks like:</p>\n\n<pre><code>class InAndOutEvent &lt; ApplicationRecord\n\n  include ExtendedEvent\n\n  def configure_extended_event\n    @ee_start_date_time = enter_date_time\n    @ee_end_date_time = exit_date_time\n  end\nend\n</code></pre>\n\n<p>Where <code>enter_date_time</code> and <code>exit_date_time</code> are model attributes. However, an alternative usage would be something like this:</p>\n\n<pre><code>class InAndOutEvent &lt; ApplicationRecord\n  belongs_to: entry\n  belongs_to: exit\n\n  include ExtendedEvent\n\n  def configure_extended_event\n    @ee_start_date_time = entry.date_time\n    @ee_end_date_time = exit.date_time\n  end\nend\n</code></pre>\n\n<p>Oh, and it's possible that my <code>entry</code> and <code>exit</code> associations are actually of the same class, which will mean using aliases in queries:</p>\n\n<pre><code>  belongs_to :entry, class_name: \"ThingWithDateTime\"\n  belongs_to :exit, class_name: \"ThingWithDateTime\"\n</code></pre>\n\n<p>I want to define a class-level scope or finder method that will allow me to find models that include <code>ExtendedEvent</code> based on whether or not they overlap with a given time range <code>start_time..end_time</code>. In obviously broken pseudocode:</p>\n\n<pre><code>require 'active_support/concern'\nmodule ExtendedEvent\n  extend ActiveSupport::Concern\n\n  class_methods do\n    def overlaps_with(time_range)\n      where(ee_start_date_time: time_range)\n        .or(self.where(ee_end_date_time: time_range))\n    end\n  end\n\n  # ... instance methods as above omitted\n\nend\n</code></pre>\n\n<p>I know it's not possible to use a generic method like this, but my start/end times are set by model attributes, so it feels like this should be possible. If my attribute were always on the model I could replace defining the instance variables with <code>alias_attribute</code> and use that perhaps, like:</p>\n\n<pre><code>alias_attribute :ee_start_time, :enter_date_time\n</code></pre>\n\n<p>but I don't think that would work with an attribute on the association.</p>\n\n<p>Is there any way of achieving this? I'm using Rails 5.1 on Ruby 2.4.</p>\n"}, {"tags": ["arrays", "ruby", "hash", "merge"], "comments": [{"owner": {"reputation": 1049, "user_id": 5832250, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2SnJA.jpg?s=128&g=1", "display_name": "Gagan Gupta", "link": "https://stackoverflow.com/users/5832250/gagan-gupta"}, "edited": false, "score": 1, "creation_date": 1551780829, "post_id": 55000266, "comment_id": 96756126, "body": "<code>[{&quot;Date&quot; =&gt; &quot;2019-01-01&quot;, &quot;Plot ID&quot; =&gt; 234}, &quot;size&quot;=&gt; 20, visit =&gt; 10, &quot;price&quot; =&gt; 103}]</code> you sure you want the result in this way?"}, {"owner": {"reputation": 3959, "user_id": 1381266, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/7ac54c032c1dd24a5e6c737d06b83a03?s=128&d=identicon&r=PG", "display_name": "Galet", "link": "https://stackoverflow.com/users/1381266/galet"}, "reply_to_user": {"reputation": 1049, "user_id": 5832250, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2SnJA.jpg?s=128&g=1", "display_name": "Gagan Gupta", "link": "https://stackoverflow.com/users/5832250/gagan-gupta"}, "edited": false, "score": 0, "creation_date": 1551780910, "post_id": 55000266, "comment_id": 96756191, "body": "@GaganGupta Yes. I need result in this way."}, {"owner": {"reputation": 3207, "user_id": 1127732, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cbf50a128608800d7c43129ba90e7ae9?s=128&d=identicon&r=PG", "display_name": "khaled_gomaa", "link": "https://stackoverflow.com/users/1127732/khaled-gomaa"}, "edited": false, "score": 1, "creation_date": 1551781120, "post_id": 55000266, "comment_id": 96756307, "body": "there is a syntax error in the expected output, you have an extra <code>}</code> in the middle"}, {"owner": {"reputation": 1049, "user_id": 5832250, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2SnJA.jpg?s=128&g=1", "display_name": "Gagan Gupta", "link": "https://stackoverflow.com/users/5832250/gagan-gupta"}, "edited": false, "score": 1, "creation_date": 1551781141, "post_id": 55000266, "comment_id": 96756334, "body": "there&#39;s syntax error in the way you want."}, {"owner": {"reputation": 3959, "user_id": 1381266, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/7ac54c032c1dd24a5e6c737d06b83a03?s=128&d=identicon&r=PG", "display_name": "Galet", "link": "https://stackoverflow.com/users/1381266/galet"}, "reply_to_user": {"reputation": 1049, "user_id": 5832250, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2SnJA.jpg?s=128&g=1", "display_name": "Gagan Gupta", "link": "https://stackoverflow.com/users/5832250/gagan-gupta"}, "edited": false, "score": 0, "creation_date": 1551781366, "post_id": 55000266, "comment_id": 96756463, "body": "@GaganGupta Updated the expected output"}, {"owner": {"reputation": 3207, "user_id": 1127732, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cbf50a128608800d7c43129ba90e7ae9?s=128&d=identicon&r=PG", "display_name": "khaled_gomaa", "link": "https://stackoverflow.com/users/1127732/khaled-gomaa"}, "edited": false, "score": 2, "creation_date": 1551781734, "post_id": 55000266, "comment_id": 96756673, "body": "Do both &#39;Plot ID&#39; and &#39;Date&#39; need to match to merge them together?"}, {"owner": {"reputation": 3959, "user_id": 1381266, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/7ac54c032c1dd24a5e6c737d06b83a03?s=128&d=identicon&r=PG", "display_name": "Galet", "link": "https://stackoverflow.com/users/1381266/galet"}, "edited": false, "score": 0, "creation_date": 1551781991, "post_id": 55000266, "comment_id": 96756833, "body": "Only Plot ID to match and merge"}, {"owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "edited": false, "score": 0, "creation_date": 1551782695, "post_id": 55000266, "comment_id": 96757241, "body": "And what array is the dominant one? In the case the dates don&#39;t match, do you want to keep the <code>&quot;Date&quot;</code> value of the hash in <code>array1</code> or <code>array2</code>?"}, {"owner": {"reputation": 3959, "user_id": 1381266, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/7ac54c032c1dd24a5e6c737d06b83a03?s=128&d=identicon&r=PG", "display_name": "Galet", "link": "https://stackoverflow.com/users/1381266/galet"}, "edited": false, "score": 0, "creation_date": 1551782882, "post_id": 55000266, "comment_id": 96757369, "body": "array1 is dominant one. Matching column differs as Plot ID in array1 and Plotting ID in array2."}, {"owner": {"reputation": 3959, "user_id": 1381266, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/7ac54c032c1dd24a5e6c737d06b83a03?s=128&d=identicon&r=PG", "display_name": "Galet", "link": "https://stackoverflow.com/users/1381266/galet"}, "edited": false, "score": 0, "creation_date": 1551783356, "post_id": 55000266, "comment_id": 96757675, "body": "Keep Date value of array1"}, {"owner": {"reputation": 3959, "user_id": 1381266, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/7ac54c032c1dd24a5e6c737d06b83a03?s=128&d=identicon&r=PG", "display_name": "Galet", "link": "https://stackoverflow.com/users/1381266/galet"}, "reply_to_user": {"reputation": 1049, "user_id": 5832250, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2SnJA.jpg?s=128&g=1", "display_name": "Gagan Gupta", "link": "https://stackoverflow.com/users/5832250/gagan-gupta"}, "edited": false, "score": 0, "creation_date": 1551784445, "post_id": 55000266, "comment_id": 96758330, "body": "@GaganGupta Let me know any inputs needed from me"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1551804940, "post_id": 55000266, "comment_id": 96770752, "body": "You&#39;ve answered a few questions in comments. Please edit your question to incorporate that information, for the benefit of readers, now and in future, who do not read all comments. That will also head off additional downvotes."}], "answers": [{"comments": [{"owner": {"reputation": 3959, "user_id": 1381266, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/7ac54c032c1dd24a5e6c737d06b83a03?s=128&d=identicon&r=PG", "display_name": "Galet", "link": "https://stackoverflow.com/users/1381266/galet"}, "edited": false, "score": 0, "creation_date": 1551789002, "post_id": 55001683, "comment_id": 96760974, "body": "Can we merge array2 at the end instead of front"}, {"owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "reply_to_user": {"reputation": 3959, "user_id": 1381266, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/7ac54c032c1dd24a5e6c737d06b83a03?s=128&d=identicon&r=PG", "display_name": "Galet", "link": "https://stackoverflow.com/users/1381266/galet"}, "edited": false, "score": 1, "creation_date": 1551789706, "post_id": 55001683, "comment_id": 96761370, "body": "You can swap the order of the resulting hash by using <code>record</code> as the receiver and passing <code>array2_lookup[record[&#39;Plot ID&#39;]]</code> as <code>merge</code> argument. However this does swap the dominance. To combat this we&#39;ll have to add a block that tells merge to use the old value on conflict, rather than the new value. <code>record.merge(array2_lookup[record[&#39;Plot ID&#39;]]) { |_key, old, _new| old }</code> See: <a href=\"http://ruby-doc.org/core-2.6.1/Hash.html#method-i-merge\" rel=\"nofollow noreferrer\">ruby-doc.org/core-2.6.1/Hash.html#method-i-merge</a>"}, {"owner": {"reputation": 3959, "user_id": 1381266, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/7ac54c032c1dd24a5e6c737d06b83a03?s=128&d=identicon&r=PG", "display_name": "Galet", "link": "https://stackoverflow.com/users/1381266/galet"}, "edited": false, "score": 0, "creation_date": 1551790051, "post_id": 55001683, "comment_id": 96761570, "body": "What should I to update if I need to match Date column too"}, {"owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "reply_to_user": {"reputation": 3959, "user_id": 1381266, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/7ac54c032c1dd24a5e6c737d06b83a03?s=128&d=identicon&r=PG", "display_name": "Galet", "link": "https://stackoverflow.com/users/1381266/galet"}, "edited": false, "score": 1, "creation_date": 1551790560, "post_id": 55001683, "comment_id": 96761872, "body": "You can do the same thing, but use an array with the <code>Plotting ID</code> and <code>Date</code> as hash key. Then look the value up using this combination. <a href=\"https://gist.github.com/3limin4t0r/47c26c8d2786b954c2b6fbd779eb15ee\" rel=\"nofollow noreferrer\">gist.github.com/3limin4t0r/47c26c8d2786b954c2b6fbd779eb15ee</a>"}, {"owner": {"reputation": 3959, "user_id": 1381266, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/7ac54c032c1dd24a5e6c737d06b83a03?s=128&d=identicon&r=PG", "display_name": "Galet", "link": "https://stackoverflow.com/users/1381266/galet"}, "edited": false, "score": 0, "creation_date": 1553854935, "post_id": 55001683, "comment_id": 97549403, "body": "Your answer works well for me. What should I do if I don&#39;t need default values for array2?"}, {"owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "reply_to_user": {"reputation": 3959, "user_id": 1381266, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/7ac54c032c1dd24a5e6c737d06b83a03?s=128&d=identicon&r=PG", "display_name": "Galet", "link": "https://stackoverflow.com/users/1381266/galet"}, "edited": false, "score": 0, "creation_date": 1553856764, "post_id": 55001683, "comment_id": 97550512, "body": "@Galet Do you mean that you want the default values to be <code>nil</code> or that the attribute (<i>size</i>, <i>visit</i> and <i>price</i>) should not be added?"}, {"owner": {"reputation": 3959, "user_id": 1381266, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/7ac54c032c1dd24a5e6c737d06b83a03?s=128&d=identicon&r=PG", "display_name": "Galet", "link": "https://stackoverflow.com/users/1381266/galet"}, "edited": false, "score": 0, "creation_date": 1553860318, "post_id": 55001683, "comment_id": 97552539, "body": "Here is the expected result =&gt; [{&quot;Date&quot; =&gt; &quot;2019-01-01&quot;, &quot;Plot ID&quot; =&gt; 234, &quot;size&quot;=&gt; 20, &quot;visit&quot; =&gt; 10, &quot;price&quot; =&gt; 103},{&quot;Date&quot; =&gt; &quot;2019-01-01&quot;, &quot;Plot ID&quot; =&gt; 236, &quot;size&quot;=&gt; 25, &quot;visit&quot; =&gt; 34, &quot;price&quot; =&gt; 423}]"}, {"owner": {"reputation": 3959, "user_id": 1381266, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/7ac54c032c1dd24a5e6c737d06b83a03?s=128&d=identicon&r=PG", "display_name": "Galet", "link": "https://stackoverflow.com/users/1381266/galet"}, "edited": false, "score": 0, "creation_date": 1554101094, "post_id": 55001683, "comment_id": 97613092, "body": "Is it possible to produce the above output?"}, {"owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "reply_to_user": {"reputation": 3959, "user_id": 1381266, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/7ac54c032c1dd24a5e6c737d06b83a03?s=128&d=identicon&r=PG", "display_name": "Galet", "link": "https://stackoverflow.com/users/1381266/galet"}, "edited": false, "score": 1, "creation_date": 1554128510, "post_id": 55001683, "comment_id": 97627657, "body": "@Galet In that case you should remove the <code>array2_lookup</code> <i>default</i> assignment and change the line below to <code>array1.map { |record| [record, array2_lookup[record[&#39;Plot ID&#39;]]].compact }.select { |records| records.size == 2 }.map { |record1, record2| record2.merge(record1) }</code>."}], "tags": [], "owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "is_accepted": true, "score": 1, "last_activity_date": 1551785483, "last_edit_date": 1551785483, "creation_date": 1551784972, "answer_id": 55001683, "question_id": 55000266, "link": "https://stackoverflow.com/questions/55000266/how-to-merge-arrays-of-hashes-with-matching-a-column-value/55001683#55001683", "title": "How to merge arrays of hashes with matching a column value", "body": "<p>This answer only works if <code>array2</code> doesn't contain any duplicate <code>Plotting ID</code> values. (If there are duplicate <code>Plotting ID</code> it still works, but it uses the last record of the once precent in the array.)</p>\n\n<pre><code>array1 = [{\"Date\" =&gt; \"2019-01-01\", \"Plot ID\" =&gt; 234}, {\"Date\" =&gt; \"2019-01-01\", \"Plot ID\" =&gt; 235}, {\"Date\" =&gt; \"2019-01-01\", \"Plot ID\" =&gt; 236}, {\"Date\" =&gt; \"2019-01-01\", \"Plot ID\" =&gt; 237}, {\"Date\" =&gt; \"2019-01-01\", \"Plot ID\" =&gt; 238}, {\"Date\" =&gt; \"2019-01-01\", \"Plot ID\" =&gt; 239}, {\"Date\" =&gt; \"2019-01-01\", \"Plot ID\" =&gt; 240}, {\"Date\" =&gt; \"2019-01-01\", \"Plot ID\" =&gt; 241}]\narray2 = [{\"Date\" =&gt; \"2019-01-01\", \"Plotting ID\" =&gt; 234, \"size\"=&gt; 20, \"visit\" =&gt; 10, \"price\" =&gt; 103}, {\"Date\" =&gt; \"2019-01-01\", \"Plotting ID\" =&gt; 500,  \"size\"=&gt; 40, \"visit\" =&gt; 22, \"price\" =&gt; 233}, {\"Date\" =&gt; \"2019-01-01\", \"Plotting ID\" =&gt; 236,  \"size\"=&gt; 25, \"visit\" =&gt; 34, \"price\" =&gt; 423}, {\"Date\" =&gt; \"2019-01-01\", \"Plotting ID\" =&gt; 600,  \"size\"=&gt; 79, \"visit\" =&gt; 55, \"price\" =&gt; 234}]\n\narray2_lookup = array2.map(&amp;:dup).map { |record| [record.delete('Plotting ID'), record] }.to_h\narray2_lookup.default = { 'size' =&gt; 0, 'visit' =&gt; 0, 'price' =&gt; 0 }\npp array1.map { |record| array2_lookup[record['Plot ID']].merge(record) }\n# [{\"Date\"=&gt;\"2019-01-01\", \"size\"=&gt;20, \"visit\"=&gt;10, \"price\"=&gt;103, \"Plot ID\"=&gt;234},\n#  {\"size\"=&gt;0, \"visit\"=&gt;0, \"price\"=&gt;0, \"Date\"=&gt;\"2019-01-01\", \"Plot ID\"=&gt;235},\n#  {\"Date\"=&gt;\"2019-01-01\", \"size\"=&gt;25, \"visit\"=&gt;34, \"price\"=&gt;423, \"Plot ID\"=&gt;236},\n#  {\"size\"=&gt;0, \"visit\"=&gt;0, \"price\"=&gt;0, \"Date\"=&gt;\"2019-01-01\", \"Plot ID\"=&gt;237},\n#  {\"size\"=&gt;0, \"visit\"=&gt;0, \"price\"=&gt;0, \"Date\"=&gt;\"2019-01-01\", \"Plot ID\"=&gt;238},\n#  {\"size\"=&gt;0, \"visit\"=&gt;0, \"price\"=&gt;0, \"Date\"=&gt;\"2019-01-01\", \"Plot ID\"=&gt;239},\n#  {\"size\"=&gt;0, \"visit\"=&gt;0, \"price\"=&gt;0, \"Date\"=&gt;\"2019-01-01\", \"Plot ID\"=&gt;240},\n#  {\"size\"=&gt;0, \"visit\"=&gt;0, \"price\"=&gt;0, \"Date\"=&gt;\"2019-01-01\", \"Plot ID\"=&gt;241}]\n</code></pre>\n\n<p>The above solution first loops over <code>array2</code> and converts it to a hash, by deleting the key/value pair <code>'Plotting ID'</code> from the hash and using the value as key. For this reason I've added the <code>.map(&amp;:dup)</code> call, preventing the original hashes in <code>array2</code> from mutating. If the hash mutation is not an issue for you you can simply remove this.</p>\n\n<p>After creating the lookup hash I've added a default that is used when merging the hashes. All that is left to do now is loop through <code>array1</code>, lookup the record (if any) or use the default and merge that with the current element.</p>\n\n<p>This answer leaves the keys somewhat scrambled, but since a hash is based on key lookup anyway (not key/value order) this shouldn't be a huge issue. If you'd like to have all keys in the same order you can do so by providing all the keys to the default, setting their values to <code>nil</code> (or any other value since they are overwritten):</p>\n\n<pre><code>array2_lookup.default = { 'Date' =&gt; nil, 'size' =&gt; 0, 'visit' =&gt; 0, 'price' =&gt; 0 }\n# ...                        ^ added placeholder for ordering purposes\n# [{\"Date\"=&gt;\"2019-01-01\", \"size\"=&gt;20, \"visit\"=&gt;10, \"price\"=&gt;103, \"Plot ID\"=&gt;234},\n#  {\"Date\"=&gt;\"2019-01-01\", \"size\"=&gt;0, \"visit\"=&gt;0, \"price\"=&gt;0, \"Plot ID\"=&gt;235},\n#  {\"Date\"=&gt;\"2019-01-01\", \"size\"=&gt;25, \"visit\"=&gt;34, \"price\"=&gt;423, \"Plot ID\"=&gt;236},\n#  {\"Date\"=&gt;\"2019-01-01\", \"size\"=&gt;0, \"visit\"=&gt;0, \"price\"=&gt;0, \"Plot ID\"=&gt;237},\n#  {\"Date\"=&gt;\"2019-01-01\", \"size\"=&gt;0, \"visit\"=&gt;0, \"price\"=&gt;0, \"Plot ID\"=&gt;238},\n#  {\"Date\"=&gt;\"2019-01-01\", \"size\"=&gt;0, \"visit\"=&gt;0, \"price\"=&gt;0, \"Plot ID\"=&gt;239},\n#  {\"Date\"=&gt;\"2019-01-01\", \"size\"=&gt;0, \"visit\"=&gt;0, \"price\"=&gt;0, \"Plot ID\"=&gt;240},\n#  {\"Date\"=&gt;\"2019-01-01\", \"size\"=&gt;0, \"visit\"=&gt;0, \"price\"=&gt;0, \"Plot ID\"=&gt;241}]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3959, "user_id": 1381266, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/7ac54c032c1dd24a5e6c737d06b83a03?s=128&d=identicon&r=PG", "display_name": "Galet", "link": "https://stackoverflow.com/users/1381266/galet"}, "edited": false, "score": 0, "creation_date": 1551785964, "post_id": 55001851, "comment_id": 96759198, "body": "Name of Plot ID differs in array1 and array2. Plot ID in array1 and Plotting ID in array2"}, {"owner": {"reputation": 11603, "user_id": 234593, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/8e2ee1b00d372ad8f6ed5e87385ffef5?s=128&d=identicon&r=PG", "display_name": "Kache", "link": "https://stackoverflow.com/users/234593/kache"}, "reply_to_user": {"reputation": 3959, "user_id": 1381266, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/7ac54c032c1dd24a5e6c737d06b83a03?s=128&d=identicon&r=PG", "display_name": "Galet", "link": "https://stackoverflow.com/users/1381266/galet"}, "edited": false, "score": 0, "creation_date": 1551786001, "post_id": 55001851, "comment_id": 96759221, "body": "Oh, that was intentional? Fixed."}, {"owner": {"reputation": 3959, "user_id": 1381266, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/7ac54c032c1dd24a5e6c737d06b83a03?s=128&d=identicon&r=PG", "display_name": "Galet", "link": "https://stackoverflow.com/users/1381266/galet"}, "edited": false, "score": 0, "creation_date": 1551787911, "post_id": 55001851, "comment_id": 96760382, "body": "I want to merge column names from array2 with values as zero even if there is no match. I don&#39;t see column names from array2 in result if none of them matched."}], "tags": [], "owner": {"reputation": 11603, "user_id": 234593, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/8e2ee1b00d372ad8f6ed5e87385ffef5?s=128&d=identicon&r=PG", "display_name": "Kache", "link": "https://stackoverflow.com/users/234593/kache"}, "is_accepted": false, "score": 1, "last_activity_date": 1551916003, "last_edit_date": 1551916003, "creation_date": 1551785557, "answer_id": 55001851, "question_id": 55000266, "link": "https://stackoverflow.com/questions/55000266/how-to-merge-arrays-of-hashes-with-matching-a-column-value/55001851#55001851", "title": "How to merge arrays of hashes with matching a column value", "body": "<pre class=\"lang-rb prettyprint-override\"><code>array1 = [{\"Date\" =&gt; \"2019-01-01\", \"Plot ID\" =&gt; 234}, {\"Date\" =&gt; \"2019-01-01\", \"Plot ID\" =&gt; 235}, {\"Date\" =&gt; \"2019-01-01\", \"Plot ID\" =&gt; 236}, {\"Date\" =&gt; \"2019-01-01\", \"Plot ID\" =&gt; 237}, {\"Date\" =&gt; \"2019-01-01\", \"Plot ID\" =&gt; 238}, {\"Date\" =&gt; \"2019-01-01\", \"Plot ID\" =&gt; 239}, {\"Date\" =&gt; \"2019-01-01\", \"Plot ID\" =&gt; 240}, {\"Date\" =&gt; \"2019-01-01\", \"Plot ID\" =&gt; 241}]\narray2 = [{\"Date\" =&gt; \"2019-01-01\", \"Plotting ID\" =&gt; 234, \"size\"=&gt; 20, \"visit\" =&gt; 10, \"price\" =&gt; 103}, {\"Date\" =&gt; \"2019-01-01\", \"Plotting ID\" =&gt; 500,  \"size\"=&gt; 40, \"visit\" =&gt; 22, \"price\" =&gt; 233}, {\"Date\" =&gt; \"2019-01-01\", \"Plotting ID\" =&gt; 236,  \"size\"=&gt; 25, \"visit\" =&gt; 34, \"price\" =&gt; 423}, {\"Date\" =&gt; \"2019-01-01\", \"Plotting ID\" =&gt; 600,  \"size\"=&gt; 79, \"visit\" =&gt; 55, \"price\" =&gt; 234}]\n\ngrouped = (array2 + array1).group_by { |h| h[\"Plot ID\"] || h[\"Plotting ID\"] }\nmerged = grouped.values.map { |a| a.inject(:merge) }\n\n# and in case you want exact formatting:\ntemplate = { \"Date\" =&gt; nil, \"Plot ID\" =&gt; nil, \"size\"=&gt; 0, \"visit\" =&gt; 0, \"price\" =&gt; 0 }\nnormalized = merged.each { |h| template.merge(h).slice(*template.keys) }\n</code></pre>\n\n<p>You can see how each line of code does one meaningful and independent transformation of the data. I find code like this much easier to step through in a debugger.</p>\n\n<p>Learn to compose those built-in <code>Enumerable</code> and <code>Hash</code> methods and greatly simplify your code!</p>\n"}, {"comments": [{"owner": {"reputation": 3959, "user_id": 1381266, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/7ac54c032c1dd24a5e6c737d06b83a03?s=128&d=identicon&r=PG", "display_name": "Galet", "link": "https://stackoverflow.com/users/1381266/galet"}, "edited": false, "score": 0, "creation_date": 1551789389, "post_id": 55001878, "comment_id": 96761193, "body": "Is there any other solution without rescue option"}, {"owner": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "reply_to_user": {"reputation": 3959, "user_id": 1381266, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/7ac54c032c1dd24a5e6c737d06b83a03?s=128&d=identicon&r=PG", "display_name": "Galet", "link": "https://stackoverflow.com/users/1381266/galet"}, "edited": false, "score": 1, "creation_date": 1551790754, "post_id": 55001878, "comment_id": 96761979, "body": "@karan, yes, added the option (also a one liner)"}], "tags": [], "owner": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "is_accepted": false, "score": 1, "last_activity_date": 1551790689, "last_edit_date": 1551790689, "creation_date": 1551785643, "answer_id": 55001878, "question_id": 55000266, "link": "https://stackoverflow.com/questions/55000266/how-to-merge-arrays-of-hashes-with-matching-a-column-value/55001878#55001878", "title": "How to merge arrays of hashes with matching a column value", "body": "<p>If i get correctly the answer, maybe this is a possible option.</p>\n\n<pre><code>template = {\"size\"=&gt; 0, \"visit\" =&gt; 0, \"price\" =&gt; 0}\narray1.map do |h|\n  begin\n    h.merge!(template, array2.find { |hh| hh[\"Plotting ID\"] == h[\"Plot ID\"] })\n     .then { |hh| hh.delete(\"Plotting ID\") }\n  rescue TypeError\n  end\nend\n</code></pre>\n\n<p>I used <code>rescue</code> because find could return <code>nil</code>.\n<hr>\nOption without <code>rescue</code>:</p>\n\n<pre><code>template = {\"size\"=&gt; 0, \"visit\" =&gt; 0, \"price\" =&gt; 0}\narray1.map do |h|\n  h2 = {} || array2.find { |hh| hh[\"Plotting ID\"] == h[\"Plot ID\"] if hh.has_key(\"Plotting ID\") } \n  h.merge!(template, h2).then { |hh| hh.delete(\"Plotting ID\") }\nend\n</code></pre>\n\n<p>Even one liner:</p>\n\n<pre><code>array1.map { |h| h.merge!({\"size\"=&gt; 0, \"visit\" =&gt; 0, \"price\" =&gt; 0}, {} || array2.find { |hh| hh[\"Plotting ID\"] == h[\"Plot ID\"] if hh.has_key(\"Plotting ID\") }).then { |hh| hh.delete(\"Plotting ID\") } }\n</code></pre>\n\n<p><hr>\nIt modifies array1, so:</p>\n\n<pre><code>array1\n\n# [{\"Date\"=&gt;\"2019-01-01\", \"Plot ID\"=&gt;234, \"size\"=&gt;20, \"visit\"=&gt;10, \"price\"=&gt;103}, {\"Date\"=&gt;\"2019-01-01\", \"Plot ID\"=&gt;235, \"size\"=&gt;0, \"visit\"=&gt;0, \"price\"=&gt;0}, {\"Date\"=&gt;\"2019-01-01\", \"Plot ID\"=&gt;236, \"size\"=&gt;25, \"visit\"=&gt;34, \"price\"=&gt;423}, {\"Date\"=&gt;\"2019-01-01\", \"Plot ID\"=&gt;237, \"size\"=&gt;0, \"visit\"=&gt;0, \"price\"=&gt;0}, {\"Date\"=&gt;\"2019-01-01\", \"Plot ID\"=&gt;238, \"size\"=&gt;0, \"visit\"=&gt;0, \"price\"=&gt;0}, {\"Date\"=&gt;\"2019-01-01\", \"Plot ID\"=&gt;239, \"size\"=&gt;0, \"visit\"=&gt;0, \"price\"=&gt;0}, {\"Date\"=&gt;\"2019-01-01\", \"Plot ID\"=&gt;240, \"size\"=&gt;0, \"visit\"=&gt;0, \"price\"=&gt;0}, {\"Date\"=&gt;\"2019-01-01\", \"Plot ID\"=&gt;241, \"size\"=&gt;0, \"visit\"=&gt;0, \"price\"=&gt;0}]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 1, "last_activity_date": 1551816505, "last_edit_date": 1551816505, "creation_date": 1551808396, "answer_id": 55008821, "question_id": 55000266, "link": "https://stackoverflow.com/questions/55000266/how-to-merge-arrays-of-hashes-with-matching-a-column-value/55008821#55008821", "title": "How to merge arrays of hashes with matching a column value", "body": "<pre><code>template = (array2.first.keys - array1.first.keys - [\"Plotting ID\"]).product([0]).to_h\n  #=&gt; {\"size\"=&gt;0, \"visit\"=&gt;0, \"price\"=&gt;0}\n\nh = array1.each_with_object({}) { |g,h| h[g[\"Plot ID\"]] = g.merge(template) } \n  #=&gt; {234=&gt;{\"Date\"=&gt;\"2019-01-01\", \"Plot ID\"=&gt;234, \"size\"=&gt;0, \"visit\"=&gt;0, \"price\"=&gt;0},\n  #    235=&gt;{\"Date\"=&gt;\"2019-01-01\", \"Plot ID\"=&gt;235, \"size\"=&gt;0, \"visit\"=&gt;0, \"price\"=&gt;0}, \n  #    ...\n  #    241=&gt;{\"Date\"=&gt;\"2019-01-01\", \"Plot ID\"=&gt;241, \"size\"=&gt;0, \"visit\"=&gt;0, \"price\"=&gt;0}}\n\narray2.each_with_object(h) { |g,f| f.update(g[\"Plotting ID\"]=&gt;\n    g.transform_keys { |k| k == \"Plotting ID\" ? \"Plot ID\" : k }) }.values\n  #=&gt; [{\"Date\"=&gt;\"2019-01-01\", \"Plot ID\"=&gt;234, \"size\"=&gt;20, \"visit\"=&gt;10, \"price\"=&gt;103}, \n  #    {\"Date\"=&gt;\"2019-01-01\", \"Plot ID\"=&gt;235, \"size\"=&gt; 0, \"visit\"=&gt; 0, \"price\"=&gt;  0},\n  #    {\"Date\"=&gt;\"2019-01-01\", \"Plot ID\"=&gt;236, \"size\"=&gt;25, \"visit\"=&gt;34, \"price\"=&gt;423},\n  #    {\"Date\"=&gt;\"2019-01-01\", \"Plot ID\"=&gt;237, \"size\"=&gt; 0, \"visit\"=&gt; 0, \"price\"=&gt;  0},\n  #    {\"Date\"=&gt;\"2019-01-01\", \"Plot ID\"=&gt;238, \"size\"=&gt; 0, \"visit\"=&gt; 0, \"price\"=&gt;  0},\n  #    {\"Date\"=&gt;\"2019-01-01\", \"Plot ID\"=&gt;239, \"size\"=&gt; 0, \"visit\"=&gt; 0, \"price\"=&gt;  0},\n  #    {\"Date\"=&gt;\"2019-01-01\", \"Plot ID\"=&gt;240, \"size\"=&gt; 0, \"visit\"=&gt; 0, \"price\"=&gt;  0},\n  #    {\"Date\"=&gt;\"2019-01-01\", \"Plot ID\"=&gt;241, \"size\"=&gt; 0, \"visit\"=&gt; 0, \"price\"=&gt;  0},\n  #    {\"Date\"=&gt;\"2019-01-01\", \"Plot ID\"=&gt;500, \"size\"=&gt;40, \"visit\"=&gt;22, \"price\"=&gt;233},\n  #    {\"Date\"=&gt;\"2019-01-01\", \"Plot ID\"=&gt;600, \"size\"=&gt;79, \"visit\"=&gt;55, \"price\"=&gt;234}] \n</code></pre>\n\n<p>If desired, <code>h</code> could be substituted out in the last expression.</p>\n\n<p>It would be simpler to define <code>template</code> as follows:</p>\n\n<pre><code>template = (%w| size visit price |).product([0]).to_h\n</code></pre>\n\n<p>This has the disadvantage, however, of being fragile to changes to the names and/or numbers of keys in the elements of <code>array2</code>.</p>\n\n<p>Though less efficient, the following may be clearer and easier to maintain.</p>\n\n<pre><code>a2 = array2.map { |h| h.transform_keys { |k| k == \"Plotting ID\" ? \"Plot ID\" : k } }\n  # =&gt; [{\"Date\"=&gt;\"2019-01-01\", \"Plot ID\"=&gt;234, \"size\"=&gt;20, \"visit\"=&gt;10, \"price\"=&gt;103},\n  #     {\"Date\"=&gt;\"2019-01-01\", \"Plot ID\"=&gt;500, \"size\"=&gt;40, \"visit\"=&gt;22, \"price\"=&gt;233},\n  #     {\"Date\"=&gt;\"2019-01-01\", \"Plot ID\"=&gt;236, \"size\"=&gt;25, \"visit\"=&gt;34, \"price\"=&gt;423},\n  #     {\"Date\"=&gt;\"2019-01-01\", \"Plot ID\"=&gt;600, \"size\"=&gt;79, \"visit\"=&gt;55, \"price\"=&gt;234}] \ntemplate = (a2.first.keys - array1.first.keys).product([0]).to_h\n  #=&gt; &lt;same as earlier value&gt;\nh = array1.each_with_object({}) { |g,h| h[g[\"Plot ID\"]] = g.merge(template) }\n  #=&gt; &lt;same as earlier value&gt;\na2.each_with_object(h) { |g,f| f.update(g[\"Plot ID\"]=&gt;g) }.values\n  #=&gt; &lt;same as earlier value&gt;\n</code></pre>\n"}], "owner": {"reputation": 3959, "user_id": 1381266, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/7ac54c032c1dd24a5e6c737d06b83a03?s=128&d=identicon&r=PG", "display_name": "Galet", "link": "https://stackoverflow.com/users/1381266/galet"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 97, "favorite_count": 0, "accepted_answer_id": 55001683, "answer_count": 4, "score": -2, "last_activity_date": 1551916003, "creation_date": 1551780467, "last_edit_date": 1551844451, "question_id": 55000266, "link": "https://stackoverflow.com/questions/55000266/how-to-merge-arrays-of-hashes-with-matching-a-column-value", "title": "How to merge arrays of hashes with matching a column value", "body": "<p>I want to merge two arrays <code>array1</code> and <code>array2</code> with matching a column values. Plot ID may or may not match between two arrays. Matching column is Plot ID in array1 and Plotting ID in array2.</p>\n\n<p>Dominant is array1. Column values in array1 should come at first in the expected output.</p>\n\n<p>Merge array2 column names with zero values if array2 doesn't match with array1</p>\n\n<pre><code>array1 = [\n{\"Date\" =&gt; \"2019-01-01\", \"Plot ID\" =&gt; 234},\n{\"Date\" =&gt; \"2019-01-01\", \"Plot ID\" =&gt; 235},\n{\"Date\" =&gt; \"2019-01-01\", \"Plot ID\" =&gt; 236},\n{\"Date\" =&gt; \"2019-01-01\", \"Plot ID\" =&gt; 237},\n{\"Date\" =&gt; \"2019-01-01\", \"Plot ID\" =&gt; 238},\n{\"Date\" =&gt; \"2019-01-01\", \"Plot ID\" =&gt; 239},\n{\"Date\" =&gt; \"2019-01-01\", \"Plot ID\" =&gt; 240},\n{\"Date\" =&gt; \"2019-01-01\", \"Plot ID\" =&gt; 241}\n]\n\narray2 = [\n{\"Date\" =&gt; \"2019-01-01\", \"Plotting ID\" =&gt; 234, \"size\"=&gt; 20, \"visit\" =&gt; 10, \"price\" =&gt; 103},\n{\"Date\" =&gt; \"2019-01-01\", \"Plotting ID\" =&gt; 500,  \"size\"=&gt; 40, \"visit\" =&gt; 22, \"price\" =&gt; 233},\n{\"Date\" =&gt; \"2019-01-01\", \"Plotting ID\" =&gt; 236,  \"size\"=&gt; 25, \"visit\" =&gt; 34, \"price\" =&gt; 423},\n{\"Date\" =&gt; \"2019-01-01\", \"Plotting ID\" =&gt; 600,  \"size\"=&gt; 79, \"visit\" =&gt; 55, \"price\" =&gt; 234}\n]\n</code></pre>\n\n<p>Expected output:</p>\n\n<pre><code>[\n{\"Date\" =&gt; \"2019-01-01\", \"Plot ID\" =&gt; 234, \"size\"=&gt; 20, \"visit\" =&gt; 10, \"price\" =&gt; 103},\n{\"Date\" =&gt; \"2019-01-01\", \"Plot ID\" =&gt; 235, \"size\"=&gt; 0, \"visit\" =&gt; 0, \"price\" =&gt; 0},\n{\"Date\" =&gt; \"2019-01-01\", \"Plot ID\" =&gt; 236, \"size\"=&gt; 25, \"visit\" =&gt; 34, \"price\" =&gt; 423},\n{\"Date\" =&gt; \"2019-01-01\", \"Plot ID\" =&gt; 237, \"size\"=&gt; 0, \"visit\" =&gt; 0, \"price\" =&gt; 0},\n{\"Date\" =&gt; \"2019-01-01\", \"Plot ID\" =&gt; 238, \"size\"=&gt; 0, \"visit\" =&gt; 0, \"price\" =&gt; 0},\n{\"Date\" =&gt; \"2019-01-01\", \"Plot ID\" =&gt; 239, \"size\"=&gt; 0, \"visit\" =&gt; 0, \"price\" =&gt; 0},\n{\"Date\" =&gt; \"2019-01-01\", \"Plot ID\" =&gt; 240, \"size\"=&gt; 0, \"visit\" =&gt; 0, \"price\" =&gt; 0},\n{\"Date\" =&gt; \"2019-01-01\", \"Plot ID\" =&gt; 241, \"size\"=&gt; 0, \"visit\" =&gt; 0, \"price\" =&gt; 0}\n]\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "unicorn"], "answers": [{"comments": [{"owner": {"reputation": 540, "user_id": 5046468, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh4.googleusercontent.com/-_MJIiKu6U44/AAAAAAAAAAI/AAAAAAAAAB0/X1g73J1CrQ4/photo.jpg?sz=128", "display_name": "Mi Ro", "link": "https://stackoverflow.com/users/5046468/mi-ro"}, "edited": false, "score": 0, "creation_date": 1551792797, "post_id": 55000395, "comment_id": 96763262, "body": "I am running rails 4.2.10 with unicorn 5.1.0 so actually maybe upgrade of unicorn might help"}, {"owner": {"reputation": 712, "user_id": 929251, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69ef9fdd5a6cd663670253f5a73527a4?s=128&d=identicon&r=PG", "display_name": "Igor Kasyanchuk", "link": "https://stackoverflow.com/users/929251/igor-kasyanchuk"}, "reply_to_user": {"reputation": 540, "user_id": 5046468, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh4.googleusercontent.com/-_MJIiKu6U44/AAAAAAAAAAI/AAAAAAAAAB0/X1g73J1CrQ4/photo.jpg?sz=128", "display_name": "Mi Ro", "link": "https://stackoverflow.com/users/5046468/mi-ro"}, "edited": false, "score": 0, "creation_date": 1551818323, "post_id": 55000395, "comment_id": 96777112, "body": "it doesn&#39;t matter what version. try to compare versions by release date."}], "tags": [], "owner": {"reputation": 712, "user_id": 929251, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69ef9fdd5a6cd663670253f5a73527a4?s=128&d=identicon&r=PG", "display_name": "Igor Kasyanchuk", "link": "https://stackoverflow.com/users/929251/igor-kasyanchuk"}, "is_accepted": false, "score": 1, "last_activity_date": 1551780879, "creation_date": 1551780879, "answer_id": 55000395, "question_id": 55000069, "link": "https://stackoverflow.com/questions/55000069/how-to-match-unicorn-with-rails-4-2-11/55000395#55000395", "title": "How to match unicorn with rails 4.2.11", "body": "<p>Try to downgrade version of unicorn, step by step: <a href=\"https://rubygems.org/gems/unicorn/versions\" rel=\"nofollow noreferrer\">https://rubygems.org/gems/unicorn/versions</a> (check all versions here)</p>\n\n<p>Check by RoR 4.2.11 release date what was the version of unicorn at that time.</p>\n"}], "owner": {"reputation": 41, "user_id": 11151861, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c574b6cce33c8485651623b218f37bb?s=128&d=identicon&r=PG&f=1", "display_name": "yfqin", "link": "https://stackoverflow.com/users/11151861/yfqin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 210, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1551780879, "creation_date": 1551779928, "question_id": 55000069, "link": "https://stackoverflow.com/questions/55000069/how-to-match-unicorn-with-rails-4-2-11", "title": "How to match unicorn with rails 4.2.11", "body": "<p>The ruby program worked well before at version 2.1.11, but new bundler requires ruby version >= 2.3. So I upgrade ruby version to 2.4.5, bundler 1.17.3, rails version to 4.2.11, nokogiri to 1.7.2, therubyracer to 0.12.3, unicorn version to 5.0.1, Gemfile as follows:</p>\n\n<blockquote>\n  <p>gem 'rails', '4.2.11' gem 'sqlite3', '1.3.13' gem 'sass-rails',\n  '4.0.1' gem 'uglifier', '2.3.1' gem 'coffee-rails', '4.0.1' gem\n  'therubyracer', '0.12.3', platforms: :ruby gem 'jquery-rails', '3.0.4'\n  gem 'turbolinks', '1.3.1' gem 'jbuilder', '1.5.2'</p>\n  \n  <p>group :doc do   gem 'sdoc', require: false end gem 'unicorn', '5.0.1'\n  gem 'aws-sdk', '~> 3' gem 'haml-rails' gem 'rbhive', '0.5.1' gem\n  'devise', '3.2.2' gem 'net-ldap', '0.5.1' gem\n  'devise_ldap_authenticatable' gem 'will_paginate', '3.0.5' gem\n  'delayed_job_active_record', '4.1.0' gem 'delayed_job', '4.1.0' gem\n  'jquery-turbolinks', '2.0.2' gem 'jquery-ace-rails', '1.0.1' gem\n  'filterrific', '3.0.0' gem 'bootstrap-datepicker-rails', '1.3.0.1'</p>\n  \n  <p>gem 'rake', '10.4.2' gem 'mysql2', '0.3.16' gem 'whenever', '0.9.2'\n  gem 'activerecord-import', '0.10.0' gem 'delayed_job_web', '1.4' gem\n  'hbase-stargate', '1.6.1' gem 'daemons', '1.1.9'</p>\n</blockquote>\n\n<p>But there error occurs:</p>\n\n<pre><code>/usr/local/share/ruby/gems/2.4/gems/unicorn-5.0.1/bin/unicorn:126:in `&lt;top (required)&gt;'\n/usr/local/bin/unicorn:23:in `load'\n/usr/local/bin/unicorn:23:in `&lt;main&gt;'\nBundler Error Backtrace:\n        from /usr/local/share/ruby/gems/2.4/gems/bundler-1.17.3/lib/bundler/runtime.rb:80:in `block (2 levels) in require'\n        from /usr/local/share/ruby/gems/2.4/gems/bundler-1.17.3/lib/bundler/runtime.rb:76:in `each'\n        from /usr/local/share/ruby/gems/2.4/gems/bundler-1.17.3/lib/bundler/runtime.rb:76:in `block in require'\n        from /usr/local/share/ruby/gems/2.4/gems/bundler-1.17.3/lib/bundler/runtime.rb:65:in `each'\n        from /usr/local/share/ruby/gems/2.4/gems/bundler-1.17.3/lib/bundler/runtime.rb:65:in `require'\n        from /usr/local/share/ruby/gems/2.4/gems/bundler-1.17.3/lib/bundler.rb:114:in `require'\n        from /root/keeper/deploy/presto_ui/config/application.rb:7:in `&lt;top (required)&gt;'\n        from /root/keeper/deploy/presto_ui/config/environment.rb:2:in `require'\n        from /root/keeper/deploy/presto_ui/config/environment.rb:2:in `&lt;top (required)&gt;'\n        from config.ru:3:in `require'\n        from config.ru:3:in `block in &lt;main&gt;'\n        from /usr/local/share/ruby/gems/2.4/gems/rack-1.6.11/lib/rack/builder.rb:55:in `instance_eval'\n        from /usr/local/share/ruby/gems/2.4/gems/rack-1.6.11/lib/rack/builder.rb:55:in `initialize'\n        from config.ru:1:in `new'\n        from config.ru:1:in `&lt;main&gt;'\n        from /usr/local/share/ruby/gems/2.4/gems/unicorn-5.0.1/lib/unicorn.rb:46:in `eval'\n        from /usr/local/share/ruby/gems/2.4/gems/unicorn-5.0.1/lib/unicorn.rb:46:in `block in builder'\n        from /usr/local/share/ruby/gems/2.4/gems/unicorn-5.0.1/lib/unicorn/http_server.rb:752:in `build_app!'\n        from /usr/local/share/ruby/gems/2.4/gems/unicorn-5.0.1/lib/unicorn/http_server.rb:129:in `start'\n        from /usr/local/share/ruby/gems/2.4/gems/unicorn-5.0.1/bin/unicorn:126:in `&lt;top (required)&gt;'\n        from /usr/local/bin/unicorn:23:in `load'\n        from /usr/local/bin/unicorn:23:in `&lt;main&gt;'\n</code></pre>\n\n<p>I wonder if unicorn doesn't match to rails or other reason?  What should I do to fix it??</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 2, "creation_date": 1551776647, "post_id": 54998981, "comment_id": 96753692, "body": "If it is <i>your</i> view, you probably have put it there."}, {"owner": {"reputation": 1463, "user_id": 1776255, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/caf8d27b5a86675785da57a67fe450b6?s=128&d=identicon&r=PG&f=1", "display_name": "Sam", "link": "https://stackoverflow.com/users/1776255/sam"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1551776740, "post_id": 54998981, "comment_id": 96753748, "body": "this meta tag is generated dynamically, I have to grab the value and pass it some other variable."}, {"owner": {"reputation": 4216, "user_id": 9269043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a2763bcfa8917a365c88f8639494de7?s=128&d=identicon&r=PG", "display_name": "Vasilisa", "link": "https://stackoverflow.com/users/9269043/vasilisa"}, "edited": false, "score": 2, "creation_date": 1551776931, "post_id": 54998981, "comment_id": 96753853, "body": "How is it generated? Could you please add code of your view? Not generated html but your <code>.html.erb</code> (or maybe slim) view"}, {"owner": {"reputation": 1463, "user_id": 1776255, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/caf8d27b5a86675785da57a67fe450b6?s=128&d=identicon&r=PG&f=1", "display_name": "Sam", "link": "https://stackoverflow.com/users/1776255/sam"}, "edited": false, "score": 0, "creation_date": 1551777087, "post_id": 54998981, "comment_id": 96753944, "body": "It is not there in any of the erb files, we have content management tool from there we are fetching the entire HTML and rendering it. I wanted to grab the value in the  &quot;content&quot; and store in some variable and pass on."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1551777245, "post_id": 54998981, "comment_id": 96754041, "body": "@Sam <i>&quot;we are fetching the entire HTML and rendering it&quot;</i> \u2013 so you have the HTML containing the <code>&lt;meta&gt;</code> tag as a string?"}, {"owner": {"reputation": 1463, "user_id": 1776255, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/caf8d27b5a86675785da57a67fe450b6?s=128&d=identicon&r=PG&f=1", "display_name": "Sam", "link": "https://stackoverflow.com/users/1776255/sam"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1551777348, "post_id": 54998981, "comment_id": 96754090, "body": "@Stefan yes the final generated HTML at my end contains that meta tag not as a string but as an HTML element."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1551777436, "post_id": 54998981, "comment_id": 96754134, "body": "@Sam <i>&quot;not as a string but as an HTML element&quot;</i> \u2013 what do you mean by that? What kind of Ruby class is it?"}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1551777543, "post_id": 54998981, "comment_id": 96754191, "body": "@Sam There should be code somewhere that generates that string. It is probably located in a place not under your control. You need to search through your entire system to find it."}, {"owner": {"reputation": 1463, "user_id": 1776255, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/caf8d27b5a86675785da57a67fe450b6?s=128&d=identicon&r=PG&f=1", "display_name": "Sam", "link": "https://stackoverflow.com/users/1776255/sam"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1551778037, "post_id": 54998981, "comment_id": 96754486, "body": "@sawa I found that variable &quot;@meta&quot; in my code returns;   &quot;\\n    &lt;meta content=\\content1\\&quot;&gt;\\n    &lt;meta content=\\content2\\&quot;&gt;\\n    &lt;meta content=&#39;content2\\&quot;&gt;\\n    .......  &lt;meta content=\\&quot;2019/01/10 09:59:59 +0900\\&quot; name=\\&quot;r_end\\&quot;&gt;\\n  \\n&quot;  Now, how can I get the value inside the content from the list of the meta tags (the last meta tag)"}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1551778269, "post_id": 54998981, "comment_id": 96754611, "body": "@Sam Try to extract the code fragment(s) that you think is relevant, and add that to your question with explanation. Hopefully, you will get some help."}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 2, "creation_date": 1551778440, "post_id": 54998981, "comment_id": 96754709, "body": "@Sam It should be much easier to find how <code>@meta</code> is generated rather than trying to parse <code>@meta</code> to extract what you want."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1551778490, "post_id": 54998981, "comment_id": 96754743, "body": "@Sam that <code>@meta</code> value looks very much like a string. You might want to edit your question and include that information."}, {"owner": {"reputation": 1463, "user_id": 1776255, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/caf8d27b5a86675785da57a67fe450b6?s=128&d=identicon&r=PG&f=1", "display_name": "Sam", "link": "https://stackoverflow.com/users/1776255/sam"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1551778883, "post_id": 54998981, "comment_id": 96754959, "body": "@Stefan Done, edited it !"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1551779426, "post_id": 54998981, "comment_id": 96755266, "body": "@Sam is the CMS you&#39;re fetching the data from part of your Rails setup (like a gem or engine)? If so, you should dig into its code to find the source of that meta tag. You might be able to retrieve it directly or maybe provide the value yourself explicitly."}], "answers": [{"tags": [], "owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "is_accepted": true, "score": 3, "last_activity_date": 1551778870, "creation_date": 1551778870, "answer_id": 54999693, "question_id": 54998981, "link": "https://stackoverflow.com/questions/54998981/how-to-get-content-value-out-of-meta-tag-in-ruby-on-rails/54999693#54999693", "title": "How to get content value out of meta tag in ruby on rails?", "body": "<p>Given a <code>@meta</code> variable containing some HTML snippet as a string:</p>\n\n<pre><code>@meta = &lt;&lt;-HTML\n  &lt;meta name=\"foo\" content=\"content1\"&gt;\n  &lt;meta name=\"bar\" content=\"content2\"&gt;\n  &lt;meta content=\"2019/01/10 09:59:59 +0900\" name=\"r_end\"&gt;\nHTML\n</code></pre>\n\n<p>You can use <a href=\"https://nokogiri.org/\" rel=\"nofollow noreferrer\">Nokogiri</a> to parse it:</p>\n\n<pre><code>require 'nokogiri'\ndoc = Nokogiri::HTML::DocumentFragment.parse(@meta)\ndoc.at_css('meta[name=\"r_end\"]')['content']\n#=&gt; \"2019/01/10 09:59:59 +0900\"\n</code></pre>\n\n<p><a href=\"https://nokogiri.org/rdoc/Nokogiri/XML/Searchable.html#at_css-instance_method\" rel=\"nofollow noreferrer\"><code>at_css</code></a> returns the first element matching the given CSS selector and <a href=\"https://nokogiri.org/rdoc/Nokogiri/XML/Node.html#%5B%5D-instance_method\" rel=\"nofollow noreferrer\"><code>[]</code></a> returns the value for the given attribute.</p>\n"}, {"comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1551781351, "post_id": 55000361, "comment_id": 96756451, "body": "Obligatory links: <a href=\"https://stackoverflow.com/a/1732454/477037\">You can&#39;t parse HTML with regex</a>, <a href=\"https://blog.codinghorror.com/parsing-html-the-cthulhu-way/\" rel=\"nofollow noreferrer\">Parsing Html The Cthulhu Way</a>"}, {"owner": {"reputation": 19261, "user_id": 4758119, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/F4dJY.jpg?s=128&g=1", "display_name": "Deepak Mahakale", "link": "https://stackoverflow.com/users/4758119/deepak-mahakale"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1551782703, "post_id": 55000361, "comment_id": 96757248, "body": "Thanks @Stefan. I wasn&#39;t aware of this."}, {"owner": {"reputation": 19261, "user_id": 4758119, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/F4dJY.jpg?s=128&g=1", "display_name": "Deepak Mahakale", "link": "https://stackoverflow.com/users/4758119/deepak-mahakale"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1551782762, "post_id": 55000361, "comment_id": 96757288, "body": "But as OP said he has the value in @meta as a string so it should work for the string as opposed to parsing whole HTML"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1551785183, "post_id": 55000361, "comment_id": 96758763, "body": "What if due to a small change the attributes are rearranged, and <code>name</code> comes before <code>content</code>?"}, {"owner": {"reputation": 19261, "user_id": 4758119, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/F4dJY.jpg?s=128&g=1", "display_name": "Deepak Mahakale", "link": "https://stackoverflow.com/users/4758119/deepak-mahakale"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1551787492, "post_id": 55000361, "comment_id": 96760129, "body": "Yes, that is a possibility where it would fail"}], "tags": [], "owner": {"reputation": 19261, "user_id": 4758119, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/F4dJY.jpg?s=128&g=1", "display_name": "Deepak Mahakale", "link": "https://stackoverflow.com/users/4758119/deepak-mahakale"}, "is_accepted": false, "score": 0, "last_activity_date": 1551780768, "creation_date": 1551780768, "answer_id": 55000361, "question_id": 54998981, "link": "https://stackoverflow.com/questions/54998981/how-to-get-content-value-out-of-meta-tag-in-ruby-on-rails/55000361#55000361", "title": "How to get content value out of meta tag in ruby on rails?", "body": "<p>How about a using simple regular expression to capture the value using <a href=\"https://apidock.com/ruby/String/scan\" rel=\"nofollow noreferrer\"><strong><code>String#scan</code></strong></a>. </p>\n\n<p>This will work only if the name of metatag doesn't change</p>\n\n<pre><code>@meta = \"\\n  &lt;meta content=\\content1\\\"&gt;\\n  &lt;meta content=\\content2\\\"&gt;\\n  &lt;meta content='content2\\\"&gt;\\n  ....... &lt;meta content=\\\"2019/01/10 09:59:59 +0900\\\" name=\\\"r_end\\\"&gt;\\n \\n\"\n\n@meta.scan(/content=\\\"(.*)\\\" name=\\\"r_end\\\"/) \n#=&gt; [[\"2019/01/10 09:59:59 +0900\"]]\n</code></pre>\n\n<p>Explanation:</p>\n\n<p>The above code will capture the value of <code>content</code> with metatag <code>name=\"r_end\"</code></p>\n\n<p>If you think there might be some other HTML elements with <code>name=\"r_end\"</code> you might need to add some other identifier in the regex</p>\n"}], "owner": {"reputation": 1463, "user_id": 1776255, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/caf8d27b5a86675785da57a67fe450b6?s=128&d=identicon&r=PG&f=1", "display_name": "Sam", "link": "https://stackoverflow.com/users/1776255/sam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 275, "favorite_count": 0, "accepted_answer_id": 54999693, "answer_count": 2, "score": 0, "last_activity_date": 1551780768, "creation_date": 1551776553, "last_edit_date": 1551778779, "question_id": 54998981, "link": "https://stackoverflow.com/questions/54998981/how-to-get-content-value-out-of-meta-tag-in-ruby-on-rails", "title": "How to get content value out of meta tag in ruby on rails?", "body": "<p>I have this list of meta tags in my view HTML (after the page loads). The tag is generated dynamically,</p>\n\n<pre><code>@meta = \"\\n  &lt;meta content=\\content1\\\"&gt;\\n  &lt;meta content=\\content2\\\"&gt;\\n  &lt;meta content='content2\\\"&gt;\\n  ....... &lt;meta content=\\\"2019/01/10 09:59:59 +0900\\\" name=\\\"r_end\\\"&gt;\\n \\n\"\n</code></pre>\n\n<p>I wanted to fetch the value <code>2019/01/10 09:59:59 +0900</code> inside <code>content</code> i.e.<code>&lt;meta content=\\\"2019/01/10 09:59:59 +0900\\\" name=\\\"r_end\\\"&gt;</code>. Is there a way to get the value of the content from the meta tag. </p>\n"}, {"tags": ["ruby", "unicorn", "ruby-2.4"], "answers": [{"comments": [{"owner": {"reputation": 41, "user_id": 11151861, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c574b6cce33c8485651623b218f37bb?s=128&d=identicon&r=PG&f=1", "display_name": "yfqin", "link": "https://stackoverflow.com/users/11151861/yfqin"}, "edited": false, "score": 0, "creation_date": 1551770813, "post_id": 54997061, "comment_id": 96750963, "body": "my ruby version currently is 2.4.5, and rails 4.0.1. should I upgrade my rails to 4.2.11??"}, {"owner": {"reputation": 1208, "user_id": 3406915, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/478116e7ad1fe58e2710db4192819b32?s=128&d=identicon&r=PG&f=1", "display_name": "zeitnot", "link": "https://stackoverflow.com/users/3406915/zeitnot"}, "reply_to_user": {"reputation": 41, "user_id": 11151861, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c574b6cce33c8485651623b218f37bb?s=128&d=identicon&r=PG&f=1", "display_name": "yfqin", "link": "https://stackoverflow.com/users/11151861/yfqin"}, "edited": false, "score": 0, "creation_date": 1551771213, "post_id": 54997061, "comment_id": 96751131, "body": "@yfqin yes you should. But there would some complications regarding to used <code>gems</code> and your code. If you do not have a test coverage, doing such a major upgrade would lead problems. I mean do the upgrading gradually such as <code>4.0.1</code>, <code>4.0.2</code>, <code>4.0.3</code> so on up until the issue is resolved."}, {"owner": {"reputation": 41, "user_id": 11151861, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c574b6cce33c8485651623b218f37bb?s=128&d=identicon&r=PG&f=1", "display_name": "yfqin", "link": "https://stackoverflow.com/users/11151861/yfqin"}, "edited": false, "score": 0, "creation_date": 1551777453, "post_id": 54997061, "comment_id": 96754149, "body": "It seems not work when rails version=4.0.x or 4.1.x. I upgrade rails to 4.2.11 and other dependencies, but another error occurs:  Bundler Error Backtrace: from /usr/local/share/ruby/gems/2.4/gems/bundler-1.17.3/lib/bundl&zwnj;&#8203;er/runtime.rb:80:in `block (2 levels) in require&#39;"}], "tags": [], "owner": {"reputation": 1208, "user_id": 3406915, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/478116e7ad1fe58e2710db4192819b32?s=128&d=identicon&r=PG&f=1", "display_name": "zeitnot", "link": "https://stackoverflow.com/users/3406915/zeitnot"}, "is_accepted": false, "score": 1, "last_activity_date": 1551769134, "creation_date": 1551769134, "answer_id": 54997061, "question_id": 54996739, "link": "https://stackoverflow.com/questions/54996739/what-to-do-when-unicorn-type-error-happened-in-ruby-2-4/54997061#54997061", "title": "What to do When Unicorn Type Error Happened in Ruby 2.4", "body": "<p>This is coming from <code>activesupport</code> gem which is used by <code>rails</code>. So there is a version compatibility issue between your <code>rails</code> and <code>ruby</code> versions. If you want to upgrade your <code>ruby</code>, sometimes you should upgrade your <code>rails</code> version accordingly. So there are 2 ways to crack down this issue. Downgrading the ruby version or upgrading the rails version gradually. </p>\n"}], "owner": {"reputation": 41, "user_id": 11151861, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c574b6cce33c8485651623b218f37bb?s=128&d=identicon&r=PG&f=1", "display_name": "yfqin", "link": "https://stackoverflow.com/users/11151861/yfqin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 216, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1551769134, "creation_date": 1551767657, "question_id": 54996739, "link": "https://stackoverflow.com/questions/54996739/what-to-do-when-unicorn-type-error-happened-in-ruby-2-4", "title": "What to do When Unicorn Type Error Happened in Ruby 2.4", "body": "<p>I upgrade ruby from 2.1 to 2.4(ruby24, ruby24-devel), bundler(version: 1.17.3), nokogiri(version: 1.6.8), rails(version: 4.0.1), unicorn(version: 5.0.1), therubyracer(version: 0.12.3).\nThere are failures as follows:</p>\n\n<pre><code>&gt; INFO -- : Refreshing Gem list\n&gt; /usr/local/share/ruby/gems/2.4/gems/activesupport-4.0.1/lib/active_support/values/time_zone.rb:282:\n&gt; warning: circular argument reference - now\n&gt; /usr/local/share/ruby/gems/2.4/gems/rbhive-0.5.1/lib/rbhive/t_c_l_i_schema_definition.rb:10:\n&gt; warning: key :bigint is duplicated and overwritten on line 14\n&gt; /usr/local/share/ruby/gems/2.4/gems/activesupport-4.0.1/lib/active_support/core_ext/numeric/time.rb:50:in\n&gt; `*': ActiveSupport::Duration can't be coerced into Integer (TypeError)\n&gt;         from /usr/local/share/ruby/gems/2.4/gems/activesupport-4.0.1/lib/active_support/core_ext/numeric/time.rb:50:in\n&gt; `days'\n&gt;         from /usr/local/share/ruby/gems/2.4/gems/activesupport-4.0.1/lib/active_support/core_ext/numeric/time.rb:55:in\n&gt; `weeks'\n&gt;         from /usr/local/share/ruby/gems/2.4/gems/devise-3.2.2/lib/devise.rb:131:in\n&gt; `&lt;module:Devise&gt;'\n&gt;         from /usr/local/share/ruby/gems/2.4/gems/devise-3.2.2/lib/devise.rb:8:in\n&gt; `&lt;top (required)&gt;'\n&gt;         from /usr/local/share/ruby/gems/2.4/gems/bundler-1.17.3/lib/bundler/runtime.rb:81:in\n&gt; `require'\n&gt;         from /usr/local/share/ruby/gems/2.4/gems/bundler-1.17.3/lib/bundler/runtime.rb:81:in\n&gt; `block (2 levels) in require'\n&gt;         from /usr/local/share/ruby/gems/2.4/gems/bundler-1.17.3/lib/bundler/runtime.rb:76:in\n&gt; `each'\n</code></pre>\n\n<p>I wonder if anyone knows what to do</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "shopify", "shopify-app"], "answers": [{"comments": [{"owner": {"reputation": 1263, "user_id": 10221813, "user_type": "registered", "profile_image": "https://graph.facebook.com/10160530708235447/picture?type=large", "display_name": "uno", "link": "https://stackoverflow.com/users/10221813/uno"}, "edited": false, "score": 0, "creation_date": 1551812710, "post_id": 55008921, "comment_id": 96774620, "body": "I am already able to successfully receive order, collection, and customer information successfully.   The issue is with updating or created fulfillments on the orders."}], "tags": [], "owner": {"reputation": 38092, "user_id": 18706, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/cabf735ce7b8b4471ef46ea54f71832d?s=128&d=identicon&r=PG", "display_name": "mahemoff", "link": "https://stackoverflow.com/users/18706/mahemoff"}, "is_accepted": false, "score": 1, "last_activity_date": 1551830504, "last_edit_date": 1551830504, "creation_date": 1551808834, "answer_id": 55008921, "question_id": 54996044, "link": "https://stackoverflow.com/questions/54996044/how-to-create-fulfillments-in-shopify-app-what-is-wrong-with-my-code/55008921#55008921", "title": "How to create fulfillments in shopify app (what is wrong with my code?)", "body": "<p>The 401 \"UnauthorizedAccess\" response indicates you haven't authenticated correctly. You'll need some kind of setup first before you start making privileged requests like retrieving order info.</p>\n\n<p>See <a href=\"https://help.shopify.com/en/api/getting-started/authentication\" rel=\"nofollow noreferrer\">Shopify Authentication</a> and <a href=\"https://github.com/Shopify/shopify_api\" rel=\"nofollow noreferrer\">the README for the Shopify Ruby Gem</a> you seem to be using here.</p>\n\n<blockquote>\n  <p>For a private App you'll need the API_KEY and the PASSWORD otherwise you'll need the API_KEY and SHARED_SECRET.</p>\n</blockquote>\n"}], "owner": {"reputation": 1263, "user_id": 10221813, "user_type": "registered", "profile_image": "https://graph.facebook.com/10160530708235447/picture?type=large", "display_name": "uno", "link": "https://stackoverflow.com/users/10221813/uno"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1551830504, "creation_date": 1551764090, "question_id": 54996044, "link": "https://stackoverflow.com/questions/54996044/how-to-create-fulfillments-in-shopify-app-what-is-wrong-with-my-code", "title": "How to create fulfillments in shopify app (what is wrong with my code?)", "body": "<p>Goal: to fulfill orders from shopify app.</p>\n\n<p><strong>I have the following code:</strong></p>\n\n<p><strong>fulfillment controller:</strong></p>\n\n<pre><code>def fulfill_order_2\n    order = ShopifyAPI::Order.find(:order_id) #line 17\n    f = ::ShopifyAPI::Fulfillment.new(\n      # :order_id =&gt; reference_number,\n      :order_id =&gt; order.id,\n\n      :location_id =&gt; location_id,\n      :tracking_company =&gt; tracking_company,\n      :tracking_numbers =&gt; \"1235\",\n      :line_items =&gt; line_items_hash,\n    )\n    f.prefix_options = { :order_id =&gt; reference_number }\n    f.save\n  end\n</code></pre>\n\n<p><strong>routes:</strong></p>\n\n<pre><code>get 'fulfillment/fulfill_order_2'\n</code></pre>\n\n<p><strong>front view:</strong></p>\n\n<pre><code>&lt;% @orders.each do |order| %&gt;\n      &lt;tr&gt;\n        &lt;td&gt;&lt;%= order.id %&gt;&lt;/td&gt;\n        &lt;td&gt;&lt;%= order.name %&gt;&lt;/td&gt;\n        &lt;td&gt;&lt;%= order.total_price %&gt;&lt;/td&gt;\n        &lt;td&gt;\n          &lt;% if order.fulfillments.empty? %&gt;\n          &lt;%= link_to \"Fulfill Order\", fulfillment_fulfill_order_2_path(:order_id =&gt; order.id, :shop_url =&gt; @shop_session.url), :remote =&gt; true %&gt;\n          &lt;% else %&gt;\n            Fulfilled\n          &lt;% end %&gt;&lt;/td&gt;\n        &lt;td&gt;\n      &lt;/tr&gt;\n      &lt;%end%&gt;\n</code></pre>\n\n<p><strong>config scopes:</strong></p>\n\n<pre><code>  config.scope = \"read_orders, read_products, write_fulfillments, write_orders\"\n</code></pre>\n\n<p><strong>In my logs, i get:</strong> </p>\n\n<p><code>ActiveResource: UnautorizedAccess, Response Code = 401.  Response Message = unauthorized.</code></p>\n\n<p><code>FATAL line 17</code> in the method</p>\n\n<p>Question: Is my code completely wrong? Any suggestions?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1551775258, "post_id": 54995977, "comment_id": 96752957, "body": "<code>&quot;2&quot;.to_i #=&gt; 2</code>, <code>2.to_s(2) #=&gt; &quot;10&quot;</code>, <code>&quot;10&quot;.to_i(2) #=&gt; 2</code>; <code>2.to_s #=&gt; &quot;2&quot;</code>."}, {"owner": {"reputation": 18079, "user_id": 503402, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/873ad707fb34aac8fbdfbfec676e02e9?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/503402/max"}, "edited": false, "score": 1, "creation_date": 1551814747, "post_id": 54995977, "comment_id": 96775521, "body": "this is a case where you should be using <code>Integer(x, 2)</code> instead of <code>x.to_i(2)</code>. The latter will never throw an error, but it&#39;s also probably not doing what you want."}], "answers": [{"comments": [{"owner": {"reputation": 3946, "user_id": 6231376, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cea33b55396be93411ade85021f41b01?s=128&d=identicon&r=PG&f=1", "display_name": "TeWu", "link": "https://stackoverflow.com/users/6231376/tewu"}, "edited": false, "score": 1, "creation_date": 1551776171, "post_id": 54995997, "comment_id": 96753413, "body": "This behaviour is described in <a href=\"https://ruby-doc.org/core/String.html#method-i-to_i\" rel=\"nofollow noreferrer\"><code>String#to_i</code></a> API docs. @2017kamb It&#39;s always a good idea to read API docs if You are confused about a method behaviour."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 3, "creation_date": 1551776205, "post_id": 54995997, "comment_id": 96753436, "body": "Conversely, <code>&#39;54thousand&#39;.to_i(36)</code> returns 521,395,291,927,273 because it actually interprets all characters as base 36 digits."}], "tags": [], "owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "is_accepted": true, "score": 6, "last_activity_date": 1551763814, "creation_date": 1551763814, "answer_id": 54995997, "question_id": 54995977, "link": "https://stackoverflow.com/questions/54995977/to-i-method-with-base-value-as-parameter-in-ruby/54995997#54995997", "title": "`to_i` method with base value as parameter in ruby", "body": "<p>It is the same reason that <code>'54thousand'.to_i</code> is <code>54</code>: <code>to_i</code> reads until it finds end of string or an invalid digit.</p>\n\n<p>In binary (base 2), the only valid digits are <code>0</code> and <code>1</code>. Thus, because <code>2</code> is invalid, <code>'122'.to_i(2)</code> is identical to <code>'1'.to_i(2)</code>. Also, <code>'2'.to_i(2)</code> is identical to <code>''.to_i(2)</code>, which is rather intuitively <code>0</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 4739, "user_id": 5403468, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZJ8BE.jpg?s=128&g=1", "display_name": "Tiw", "link": "https://stackoverflow.com/users/5403468/tiw"}, "is_accepted": false, "score": 3, "last_activity_date": 1551764046, "creation_date": 1551764046, "answer_id": 54996038, "question_id": 54995977, "link": "https://stackoverflow.com/questions/54995977/to-i-method-with-base-value-as-parameter-in-ruby/54996038#54996038", "title": "`to_i` method with base value as parameter in ruby", "body": "<p><code>base</code>, in other word <a href=\"https://en.wikipedia.org/wiki/Radix\" rel=\"nofollow noreferrer\">Radix</a> means the number of unique digits in a numeral system.</p>\n\n<p>In Decimal, we have <code>0</code> to <code>9</code>, 10 digits to represent numbers.<br>\nYou are using <code>2</code> as parameter, that means <a href=\"https://en.wikipedia.org/wiki/Binary_number\" rel=\"nofollow noreferrer\">Binary</a>, so there're only <code>0</code> and <code>1</code> working.  </p>\n\n<p>From the <a href=\"https://ruby-doc.org/core/String.html#method-i-to_i\" rel=\"nofollow noreferrer\">Doc of to_i</a>:  </p>\n\n<blockquote>\n  <p>Returns the result of interpreting leading characters in <code>str</code> as an\n  integer base base (between 2 and 36). Extraneous characters past the\n  end of a valid number are ignored. If there is not a valid number at\n  the start of <code>str</code>, <code>0</code> is returned. This method never raises an\n  exception when base is valid.</p>\n</blockquote>\n\n<p>You can use these number representations directly in Ruby:</p>\n\n<pre><code>num_hex = 0x100\n#=&gt; 256\nnum_bin = 0b100\n#=&gt; 4\nnum_oct = 0o100\n#=&gt; 64\nnum_dec = 0d100\n#=&gt; 100\n</code></pre>\n"}], "owner": {"reputation": 520, "user_id": 6507755, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/IUwxM.png?s=128&g=1", "display_name": "2017kamb", "link": "https://stackoverflow.com/users/6507755/2017kamb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 143, "favorite_count": 0, "accepted_answer_id": 54995997, "answer_count": 2, "score": 0, "last_activity_date": 1551767227, "creation_date": 1551763670, "last_edit_date": 1551767227, "question_id": 54995977, "link": "https://stackoverflow.com/questions/54995977/to-i-method-with-base-value-as-parameter-in-ruby", "title": "`to_i` method with base value as parameter in ruby", "body": "<p>Can anyone explain how base parameter works when calling <code>to_i</code> with the following examples?</p>\n\n<pre><code>'2'.to_i(2) #=&gt; 0\n'3'.to_i(2) #=&gt; 0\n'12'.to_i(2) #=&gt; 1\n'122'.to_i(2) #=&gt; 1\n'20'.to_i(2) #=&gt; 0\n'21'.to_i(2) #=&gt; 0\n</code></pre>\n\n<p>I do not understand how it's actually working. Can anyone explain please?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 1, "creation_date": 1551763047, "post_id": 54995738, "comment_id": 96748052, "body": "That&#39;s the ruby extend hook. Just Google &quot;ruby extend hook&quot; to learn more."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1551788420, "post_id": 54995738, "comment_id": 96760662, "body": "Can you explain, what, <i>precisely</i> is unclear to you about the documentation of <code>Module#extended</code>? That way, the Ruby developers can improve the documentation, so that future programmers don&#39;t have the same problems you had."}], "answers": [{"tags": [], "owner": {"reputation": 159, "user_id": 7220567, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ff4445efb0762a5c94756cf39b1bb99?s=128&d=identicon&r=PG&f=1", "display_name": "Rush0312", "link": "https://stackoverflow.com/users/7220567/rush0312"}, "is_accepted": true, "score": 2, "last_activity_date": 1551764601, "creation_date": 1551764601, "answer_id": 54996129, "question_id": 54995738, "link": "https://stackoverflow.com/questions/54995738/i-came-across-this-code-which-is-about-dropbox/54996129#54996129", "title": "I came across this code which is about dropbox", "body": "<p>The <code>self.extended</code> method is called when the module is extended. It allows methods to be executed in the context of the base (where the module is extended). </p>\n\n<p>You can try it yourself and understand this with a simple example code. Just paste in a file ruby file and run it.</p>\n\n<p>Example for <code>self.extended</code></p>\n\n<pre><code>module A\n  def self.extended(base)\n    puts \"#{self} extended in #{base}\"\n  end \nend\n\nclass Apple\n  extend A\nend\n\n# This should print: \"A extended in Apple\"\n\n</code></pre>\n\n<p>Example for <code>self.included</code></p>\n\n<pre><code>module A\n  def self.included(base)\n    puts \"#{self} included in #{base}\"\n  end \nend\n\nclass Apple\n  include A\nend\n\n# This should print: \"A included in Apple\"\n\n</code></pre>\n\n<p>You can read more here: <a href=\"http://juixe.com/techknow/index.php/2006/06/15/mixins-in-ruby/\" rel=\"nofollow noreferrer\">http://juixe.com/techknow/index.php/2006/06/15/mixins-in-ruby/</a> </p>\n"}], "owner": {"reputation": 33, "user_id": 11151882, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-h_Sv6-oERu8/AAAAAAAAAAI/AAAAAAAAAA0/w_nGWjDHrxk/photo.jpg?sz=128", "display_name": "ALOK GOUR", "link": "https://stackoverflow.com/users/11151882/alok-gour"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 35, "favorite_count": 0, "accepted_answer_id": 54996129, "answer_count": 1, "score": 3, "last_activity_date": 1551764719, "creation_date": 1551762343, "last_edit_date": 1551764719, "question_id": 54995738, "link": "https://stackoverflow.com/questions/54995738/i-came-across-this-code-which-is-about-dropbox", "title": "I came across this code which is about dropbox", "body": "<p>Can anybody explain <strong>def self.extended(base)</strong>, what does it mean here or any idea?</p>\n\n<pre><code>module Paperclip\n  module Storage\n    module Dropbox\n      def self.extended(base)\n        base.instance_eval do\n          @options[:dropbox_options] ||= {}\n          @options[:path] = nil if @options[:path] == \n          self.class.default_options[:path]\n          @options[:dropbox_visibility] ||= \"public\"\n          @path_generator = PathGenerator.new(self, @options)\n          #dropbox_client # Force creation of dropbox_client\n        end\n      end\n    end\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby", "hash"], "comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1551761196, "post_id": 54995516, "comment_id": 96747553, "body": "Please show the result (Ruby object) you want for your example."}, {"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 0, "creation_date": 1551761204, "post_id": 54995516, "comment_id": 96747556, "body": "So, what do you suppose the value of <code>@results[&#39;movie&#39;]</code> is when you first try to push to it? Also, what error are you getting? No method?"}, {"owner": {"reputation": 453, "user_id": 3663404, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fd8a3ecc59cdce4f59736092ebd5b3c4?s=128&d=identicon&r=PG&f=1", "display_name": "Storm Parker", "link": "https://stackoverflow.com/users/3663404/storm-parker"}, "reply_to_user": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 0, "creation_date": 1551761278, "post_id": 54995516, "comment_id": 96747572, "body": "@jvillian, I do get results, but it&#39;s only giving me the last item in the loop, I want all of the items"}, {"owner": {"reputation": 453, "user_id": 3663404, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fd8a3ecc59cdce4f59736092ebd5b3c4?s=128&d=identicon&r=PG&f=1", "display_name": "Storm Parker", "link": "https://stackoverflow.com/users/3663404/storm-parker"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1551761312, "post_id": 54995516, "comment_id": 96747582, "body": "@CarySwoveland the results I wanted is the JSON object structure I put above."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1551761619, "post_id": 54995516, "comment_id": 96747665, "body": "I misunderstood. Presumably, <code>results</code> (not <code>@results</code>) is a hash. What is it?"}, {"owner": {"reputation": 453, "user_id": 3663404, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fd8a3ecc59cdce4f59736092ebd5b3c4?s=128&d=identicon&r=PG&f=1", "display_name": "Storm Parker", "link": "https://stackoverflow.com/users/3663404/storm-parker"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1551761760, "post_id": 54995516, "comment_id": 96747705, "body": "@CarySwoveland, sorry for the naming confusion, <code>results</code> is the set of results coming from an API I made a request to. <code>@results</code> is the hash I want to re-arrange the data into"}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1551788508, "post_id": 54995516, "comment_id": 96760707, "body": "&quot;the farthest I&#39;ve gone is this&quot; is not a precise enough error description for us to help you. <i>What</i> doesn&#39;t work? <i>How</i> doesn&#39;t it work? What trouble do you have with your code? Do you get an error message? What is the error message? Is the result you are getting not the result you are expecting? What result do you expect and why, what is the result you are getting and how do the two differ? Is the behavior you are observing not the desired behavior? What is the desired behavior and why, what is the observed behavior, and in what way do they differ?"}], "answers": [{"comments": [{"owner": {"reputation": 453, "user_id": 3663404, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fd8a3ecc59cdce4f59736092ebd5b3c4?s=128&d=identicon&r=PG&f=1", "display_name": "Storm Parker", "link": "https://stackoverflow.com/users/3663404/storm-parker"}, "edited": false, "score": 0, "creation_date": 1551761663, "post_id": 54995623, "comment_id": 96747679, "body": "Ah, thank you so much, this is exactly what I am looking for."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 3, "creation_date": 1551761711, "post_id": 54995623, "comment_id": 96747692, "body": "You are better off writing <code>@results = Hash.new { |h,k| h[k] = []}</code> to make it more general. If, for example, <code>@results</code> does not have a key <code>&#39;movie&#39;</code>, <code>@results[&#39;movie&#39;]</code> in <code>@results[&#39;movie&#39;] &lt;&lt; {  &#39;title&#39; =&gt; r[&#39;Title&#39;], &#39;year&#39; =&gt; r[&#39;Year&#39;]</code> will be set to an empty array before <code>&lt;&lt; {  &#39;title&#39; =&gt; r[&#39;Title&#39;], &#39;year&#39; =&gt; r[&#39;Year&#39;] }</code> is executed."}, {"owner": {"reputation": 3232, "user_id": 2430657, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/8bfe1d100d07683f88d44c5fb17bc416?s=128&d=identicon&r=PG", "display_name": "Alexander", "link": "https://stackoverflow.com/users/2430657/alexander"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1551761823, "post_id": 54995623, "comment_id": 96747720, "body": "@CarySwoveland That&#39;s a good point. Making it general is only useful if this code aims to serve a use case more general than what the OP needs, however."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1551776043, "post_id": 54995623, "comment_id": 96753349, "body": "I agree, provided the crystal ball has concluded that the hash&#39;s keys will not change in future."}], "tags": [], "owner": {"reputation": 3232, "user_id": 2430657, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/8bfe1d100d07683f88d44c5fb17bc416?s=128&d=identicon&r=PG", "display_name": "Alexander", "link": "https://stackoverflow.com/users/2430657/alexander"}, "is_accepted": true, "score": 0, "last_activity_date": 1551761540, "creation_date": 1551761540, "answer_id": 54995623, "question_id": 54995516, "link": "https://stackoverflow.com/questions/54995516/pushing-objects-into-a-hash-inside-a-loop/54995623#54995623", "title": "Pushing objects into a hash inside a loop", "body": "<p>I believe the problem has to do with the initialization of your hash. The <code>movie</code> and <code>tv</code> keys aren't currently an array. You can initialize your hash like this:</p>\n\n<pre><code>@results = { 'movie' =&gt; [], 'tv' =&gt; [] }\n</code></pre>\n\n<p>Here's how it looks with the rest of your code:</p>\n\n<pre><code>@results = { 'movie' =&gt; [], 'tv' =&gt; [] }\nresults['Search'].each do |r|\n  if r['Type'] == 'movie'\n    @results['movie'] &lt;&lt; {\n        'title' =&gt; r['Title'],\n        'year' =&gt; r['Year']\n    }\n  elsif r['Type'] == 'series'\n    @results['tv'] &lt;&lt; {\n        'title' =&gt; r['Title'],\n        'year' =&gt; r['Year']\n    }\n  end\nend \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3970, "user_id": 467546, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/252fa014924f3b093d14e386f0155d80?s=128&d=identicon&r=PG", "display_name": "Baylor Rae&#39;", "link": "https://stackoverflow.com/users/467546/baylor-rae"}, "is_accepted": false, "score": 1, "last_activity_date": 1551761661, "creation_date": 1551761661, "answer_id": 54995641, "question_id": 54995516, "link": "https://stackoverflow.com/questions/54995516/pushing-objects-into-a-hash-inside-a-loop/54995641#54995641", "title": "Pushing objects into a hash inside a loop", "body": "<p>I think you can get what you want by using <code>Enumerable#each_with_object</code> and assigning a default value to the hash.</p>\n\n<pre><code>def group_search_results(items)\n  results = Hash.new { |hash, key| hash[key] = [] }\n  items.each_with_object(results) do |item|\n    results[item['Type']] &lt;&lt; {'title' =&gt; item['Title'], 'year' =&gt; item['Year']}\n  end\nend\n\ndescribe \"search_results\" do\n  it \"groups into an object\" do\n    items = [\n      {'Type' =&gt; 'movie', 'Title' =&gt; 'Thor', 'Year' =&gt; 2011},\n      {'Type' =&gt; 'movie', 'Title' =&gt; 'Iron Man', 'Year' =&gt; 2008},\n      {'Type' =&gt; 'series', 'Title' =&gt; 'Parks and Recreation', 'Year' =&gt; 2009},\n      {'Type' =&gt; 'series', 'Title' =&gt; 'Friends', 'Year' =&gt; 1994},\n    ]\n\n    results = group_search_results(items)\n    expect(results).to eq({\n      'movie' =&gt; [\n        {'title' =&gt; 'Thor', 'year' =&gt; 2011},\n        {'title' =&gt; 'Iron Man', 'year' =&gt; 2008},\n      ],\n      'series' =&gt; [\n        {'title' =&gt; 'Parks and Recreation', 'year' =&gt; 2009},\n        {'title' =&gt; 'Friends', 'year' =&gt; 1994},\n      ],\n    })\n  end\nend\n\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 277, "user_id": 459336, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6e6ff0efab49be4c6f97b836148fee17?s=128&d=identicon&r=PG", "display_name": "Davinj", "link": "https://stackoverflow.com/users/459336/davinj"}, "is_accepted": false, "score": 0, "last_activity_date": 1551775201, "creation_date": 1551775201, "answer_id": 54998551, "question_id": 54995516, "link": "https://stackoverflow.com/questions/54995516/pushing-objects-into-a-hash-inside-a-loop/54998551#54998551", "title": "Pushing objects into a hash inside a loop", "body": "<pre><code>results =  { \n  search: { \n    movie: [\n      { title: 'Thor', year: 2011 },\n      { title: 'Iron Man', year: 2008 },\n    ],\n    tv: [\n      { title: 'Parks and Recreation', year: 2009 },\n      { title: 'Friends', year: 1994 },\n    ]\n  }\n}\n\n@results = Hash.new{|k, v| k[v] = []}\nresults[:search].each do |type, array| \n  @results[type].push(*array) \nend\n\nresults[:search].each_with_object(Hash.new{|k, v| k[v] = []}) do |(type, array), hash| \n  hash[type].push(*array) \nend\n</code></pre>\n"}], "owner": {"reputation": 453, "user_id": 3663404, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fd8a3ecc59cdce4f59736092ebd5b3c4?s=128&d=identicon&r=PG&f=1", "display_name": "Storm Parker", "link": "https://stackoverflow.com/users/3663404/storm-parker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 114, "favorite_count": 0, "accepted_answer_id": 54995623, "answer_count": 3, "score": -1, "last_activity_date": 1551775201, "creation_date": 1551760800, "last_edit_date": 1551767947, "question_id": 54995516, "link": "https://stackoverflow.com/questions/54995516/pushing-objects-into-a-hash-inside-a-loop", "title": "Pushing objects into a hash inside a loop", "body": "<p>I'm trying to achieve the following JSON results:</p>\n\n<pre><code> {\n    \"movie\" =&gt;\n             [{\n               \"title\": \"Thor\",\n               \"year\" : 2011,\n             },\n             {\n               \"title\": \"Iron Man\",\n               \"year\" : 2008,\n             }],\n     \"tv\" =&gt;  \n             [{\n               \"title\": \"Parks and Recreation\"\n               \"year\": 2009\n             },\n             {\n               \"title\": \"Friends\"\n               \"year\": 1994\n             }]\n  }\n</code></pre>\n\n<p>With JavaScript, I would loop through my results and do something like:</p>\n\n<pre><code>results['movie'].push(item);\nresults['tv'].push(item);\n</code></pre>\n\n<p>With Ruby code, the farthest I've gone is this:</p>\n\n<pre><code>@results = Hash.new\nresults['Search'].each do |r|\n  if r['Type'] == 'movie'\n    @results['movie'] &lt;&lt; {\n        'title' =&gt; r['Title'],\n        'year' =&gt; r['Year']\n    }\n  elsif r['Type'] == 'series'\n    @results['tv'] &lt;&lt; {\n        'title' =&gt; r['Title'],\n        'year' =&gt; r['Year']\n    }\n  end\nend         \n</code></pre>\n\n<p>What am I missing here?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "postgresql"], "comments": [{"owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 0, "creation_date": 1551756231, "post_id": 54994592, "comment_id": 96746538, "body": "What could possibly be the usefulness of this test in the first place?  Seems like you don&#39;t trust timestamps."}, {"owner": {"reputation": 20644, "user_id": 184184, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f6a508697f9eca2680b12ddb85ba1319?s=128&d=identicon&r=PG", "display_name": "Lenin Raj Rajasekaran", "link": "https://stackoverflow.com/users/184184/lenin-raj-rajasekaran"}, "edited": false, "score": 0, "creation_date": 1551763437, "post_id": 54994592, "comment_id": 96748172, "body": "Can you output the values of <code>u.updated_at.to_f</code> and <code>tmp_time.to_f</code> in your CI pipeline?"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 2, "creation_date": 1551780596, "post_id": 54994592, "comment_id": 96755993, "body": "<i>&quot;passes on my local machine but fails within our CI pipeline&quot;</i> \u2013 If this is due to Postgres you should have the same problem on your local machine. Or do you run different Postgres versions / database schemas locally and on your CI?"}], "answers": [{"comments": [{"owner": {"reputation": 20644, "user_id": 184184, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f6a508697f9eca2680b12ddb85ba1319?s=128&d=identicon&r=PG", "display_name": "Lenin Raj Rajasekaran", "link": "https://stackoverflow.com/users/184184/lenin-raj-rajasekaran"}, "edited": false, "score": 0, "creation_date": 1551763322, "post_id": 54994862, "comment_id": 96748134, "body": "How does freezing the time help here? The current time is retrieved <b>only once</b> and referred from a local variable from there, which doesn&#39;t change."}], "tags": [], "owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "is_accepted": false, "score": 2, "last_activity_date": 1551786703, "last_edit_date": 1551786703, "creation_date": 1551755441, "answer_id": 54994862, "question_id": 54994592, "link": "https://stackoverflow.com/questions/54994592/ruby-time-zone-now-and-accounting-for-database-precision/54994862#54994862", "title": "Ruby Time.zone.now and accounting for database precision", "body": "<p>I would suggest using [Timecop][1] for these kinds of test.  I would also add that it is bad practice to manually touch the timestamp, so I'm not even really sure what you're testing for.  Sounds like you don't trust timestamps.   But if you must, here:</p>\n\n<pre><code>Timecop.freeze\ntmp_time = Time.zone.now\nu = User.find(1)\nu.updated_at = tmp_time\nu.save!\nu.reload\n\n#your tests should pass now\n</code></pre>\n\n<p>If they don't however, [see this open issue on core rails][2]. \nIf that's related to your problem, Timecop should prevent it from happening. But if it doesn't, then congratulations, you've found a core rails edge case.</p>\n"}, {"comments": [{"owner": {"reputation": 20644, "user_id": 184184, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f6a508697f9eca2680b12ddb85ba1319?s=128&d=identicon&r=PG", "display_name": "Lenin Raj Rajasekaran", "link": "https://stackoverflow.com/users/184184/lenin-raj-rajasekaran"}, "edited": false, "score": 0, "creation_date": 1551763379, "post_id": 54994878, "comment_id": 96748154, "body": "<code>Time.zone.now</code> is used only once in OP&#39;s test, not twice as in your example. OP is storing it in a variable and referencing it as a constant which doesn&#39;t change through the course of the assertions."}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "reply_to_user": {"reputation": 20644, "user_id": 184184, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f6a508697f9eca2680b12ddb85ba1319?s=128&d=identicon&r=PG", "display_name": "Lenin Raj Rajasekaran", "link": "https://stackoverflow.com/users/184184/lenin-raj-rajasekaran"}, "edited": false, "score": 0, "creation_date": 1551765907, "post_id": 54994878, "comment_id": 96749039, "body": "Its called internally when you save, to determine updated_at"}, {"owner": {"reputation": 20644, "user_id": 184184, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f6a508697f9eca2680b12ddb85ba1319?s=128&d=identicon&r=PG", "display_name": "Lenin Raj Rajasekaran", "link": "https://stackoverflow.com/users/184184/lenin-raj-rajasekaran"}, "edited": false, "score": 0, "creation_date": 1551769025, "post_id": 54994878, "comment_id": 96750160, "body": "Ah right. Gotcha. So the issue is we cannot set <code>updated_at</code> ourselves. Rails always overrides them."}, {"owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "reply_to_user": {"reputation": 20644, "user_id": 184184, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f6a508697f9eca2680b12ddb85ba1319?s=128&d=identicon&r=PG", "display_name": "Lenin Raj Rajasekaran", "link": "https://stackoverflow.com/users/184184/lenin-raj-rajasekaran"}, "edited": false, "score": 0, "creation_date": 1551785127, "post_id": 54994878, "comment_id": 96758724, "body": "@LeninRajRajasekaran that may not be true. <code>u.save!</code> doesn&#39;t override the manually set timestamp, which is bad practice anyway.  In fact this whole test seems pointless unless it&#39;s uncovering some core rails bug none of us are aware of."}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "reply_to_user": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 0, "creation_date": 1551812209, "post_id": 54994878, "comment_id": 96774408, "body": "@lacostenycoder you&#39;re right that this test seems pointless, but there are valid use cases for locking tests at a point in time."}], "tags": [], "owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "is_accepted": false, "score": 1, "last_activity_date": 1551755595, "creation_date": 1551755595, "answer_id": 54994878, "question_id": 54994592, "link": "https://stackoverflow.com/questions/54994592/ruby-time-zone-now-and-accounting-for-database-precision/54994878#54994878", "title": "Ruby Time.zone.now and accounting for database precision", "body": "<p>The issue is probably not with precision in the database, but rather that a small time passes between when you define <code>tmp_time</code> and when you save.</p>\n\n<p>You can see that the <code>.to_f</code> representation of Time changes instantly:</p>\n\n<pre><code>irb(main):011:0&gt; 2.times.map { Time.now.to_f }\n=&gt; [1551755487.5737898, 1551755487.573792]\n</code></pre>\n\n<p>This difference is usually not visible when you use <code>.to_i</code> because it rounds to the nearest second.</p>\n\n<p>You can use <a href=\"https://github.com/travisjeffery/timecop\" rel=\"nofollow noreferrer\">Timecop</a>, as another answer mentions, to get around this:</p>\n\n<pre><code>irb(main):013:0&gt; Timecop.freeze { 2.times.map { Time.now.to_f } }\n=&gt; [1551755580.12368, 1551755580.12368]\n</code></pre>\n"}], "owner": {"reputation": 51, "user_id": 8365581, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/252a406459afce7bf3f9c00c4b694265?s=128&d=identicon&r=PG&f=1", "display_name": "Ryan", "link": "https://stackoverflow.com/users/8365581/ryan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 226, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1551786703, "creation_date": 1551753247, "question_id": 54994592, "link": "https://stackoverflow.com/questions/54994592/ruby-time-zone-now-and-accounting-for-database-precision", "title": "Ruby Time.zone.now and accounting for database precision", "body": "<p>I have a test in a Rails 3 test suite that makes a number assertions that compare timestamps that passes on my local machine but fails within our CI pipeline.  This test stores a timestamp in a Postgres database timestamp field with the precision of 6 and compares the stored value to the original timestamp, very similar to the following example:</p>\n\n<pre><code>tmp_time = Time.zone.now\nu = User.find(1)\nu.updated_at = tmp_time\nu.save!\nu.reload\n\nassert_equal u.updated_at.to_i, tmp_time.to_i # passes...\nassert_equal u.updated_at, tmp_time # fails...\nassert_equal u.updated_at.to_f, tmp_time.to_f # fails...\n</code></pre>\n\n<p>I believe the problem relates to Ruby's time representation being of a higher precision than the stored value.</p>\n\n<p>What is the best way of compensating for the slight difference in values due to precision, outside of being less precise in comparisons?  We have considered overriding Time.zone.now, but believe that will lead to downstream problems.</p>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["ruby", "string"], "comments": [{"owner": {"reputation": 443227, "user_id": 341994, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/fbb4d027695dfdf76bf448b15d7e306a?s=128&d=identicon&r=PG", "display_name": "matt", "link": "https://stackoverflow.com/users/341994/matt"}, "edited": false, "score": 1, "creation_date": 1551746204, "post_id": 54993645, "comment_id": 96744386, "body": "<code>gsub</code> with a regex makes this easy."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1551751844, "post_id": 54993645, "comment_id": 96745627, "body": "Why is <code>&quot;-- And  X = Y \\n And J = I;&quot;</code> removed? Yes, it begins with <code>&quot;--&quot;</code>, but there is no newline character."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1551778298, "post_id": 54993645, "comment_id": 96754631, "body": "What if you string is, let&#39;s say <code>&quot;select * from ABC where A = &#39;--&#39; and D = C&quot;</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1551752558, "post_id": 54993819, "comment_id": 96745794, "body": "<code>a.gsub!(&#47;--.*\\n&#47;, &quot;&quot;)</code> returns the same result as <code>a</code> after <code>a</code> is altered. You might explain why you&#39;ve included <code>a</code> as the last statement. Another option: <code>a.tap { |s| s.gsub!(&#47;--.*\\n&#47;, &quot;&quot;) }</code>."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 2, "creation_date": 1551756417, "post_id": 54993819, "comment_id": 96746572, "body": "I was thinking you did it for another reason: that <code>gsub!</code> returns <code>nil</code> if the receiver is not changed (hence my reference to <code>tap</code>)."}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 1, "creation_date": 1551768373, "post_id": 54993819, "comment_id": 96749868, "body": "Notice that this answer works particularly because the matching pattern ends with a newline character, which <code>.</code> in the regex does not match in the regex mode used. If it were a different pattern, the regex needs extra care to avoid greedy match."}, {"owner": {"reputation": 3902, "user_id": 10608621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d59df09a85d05117c63706f66811b70c?s=128&d=identicon&r=PG", "display_name": "mechnicov", "link": "https://stackoverflow.com/users/10608621/mechnicov"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1551794495, "post_id": 54993819, "comment_id": 96764271, "body": "@sawa you are right, I added information to my answer"}, {"owner": {"reputation": 19, "user_id": 4735413, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AEYPn.jpg?s=128&g=1", "display_name": "AnujGorasia", "link": "https://stackoverflow.com/users/4735413/anujgorasia"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1551816316, "post_id": 54993819, "comment_id": 96776226, "body": "I just noticed one thing. gsub! returns nil if string doesn&#39;t contain &quot;--&quot; or &quot;\\n&quot; but as @CarySwoveland suggested, tap works."}], "tags": [], "owner": {"reputation": 3902, "user_id": 10608621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d59df09a85d05117c63706f66811b70c?s=128&d=identicon&r=PG", "display_name": "mechnicov", "link": "https://stackoverflow.com/users/10608621/mechnicov"}, "is_accepted": true, "score": 5, "last_activity_date": 1551817121, "last_edit_date": 1551817121, "creation_date": 1551746876, "answer_id": 54993819, "question_id": 54993645, "link": "https://stackoverflow.com/questions/54993645/how-can-i-remove-substrings-that-start-with-a-till-next-b/54993819#54993819", "title": "How can I remove substrings that start with &#39;a&#39; till next &#39;b&#39;?", "body": "<p>Using <a href=\"https://ruby-doc.org/core-2.6.1/String.html#method-i-gsub-21\" rel=\"nofollow noreferrer\"><code>String#gsub!</code></a></p>\n\n<pre><code>a = \"select * from ABC -- where A = B \\n And D = C \\n -- And X = Y \\n And J = I;\"\na.gsub(/--.*\\n/, \"\") #=&gt; \"select * from ABC  And D = C \\n  And J = I;\"\n</code></pre>\n\n<p>It's possible because of newline character.</p>\n\n<p><strong>More general way</strong></p>\n\n<p>For example you need to remove substring starting with <code>\"foo\"</code> and ending with <code>\"bar\"</code>.</p>\n\n<pre><code>a = \"aaafoobb\\nbbarcccfoodd\\tdbareee\"\na.gsub(/foo(.*?)bar/m, \"\") #=&gt; \"aaaccceee\"\n</code></pre>\n"}], "owner": {"reputation": 19, "user_id": 4735413, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AEYPn.jpg?s=128&g=1", "display_name": "AnujGorasia", "link": "https://stackoverflow.com/users/4735413/anujgorasia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 98, "favorite_count": 0, "accepted_answer_id": 54993819, "answer_count": 1, "score": 0, "last_activity_date": 1551817121, "creation_date": 1551745504, "last_edit_date": 1551768110, "question_id": 54993645, "link": "https://stackoverflow.com/questions/54993645/how-can-i-remove-substrings-that-start-with-a-till-next-b", "title": "How can I remove substrings that start with &#39;a&#39; till next &#39;b&#39;?", "body": "<p>I have a string:</p>\n\n<pre><code>a = \"select * from ABC -- where  A = B \\n And D = C \\n -- And  X = Y \\n And J = I;\"\n</code></pre>\n\n<p>I want to remove all substrings that start with <code>\"--\"</code> till the next <code>\"\\n\"</code>. So after editing above string, <code>a</code> will be:</p>\n\n<pre><code>a = \"select * from ABC  And D = C \\n  And J = I;\"\n</code></pre>\n"}, {"tags": ["ruby", "mongodb", "sinatra", "unicorn"], "comments": [{"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1551750607, "post_id": 54993326, "comment_id": 96745347, "body": "is something not working?"}, {"owner": {"reputation": 1, "user_id": 11151037, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-joxSyG1-n_Y/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rds2k7w7K14HO_tJKwLOrLxMlRQgA/mo/photo.jpg?sz=128", "display_name": "stacknoobski", "link": "https://stackoverflow.com/users/11151037/stacknoobski"}, "reply_to_user": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1551838862, "post_id": 54993326, "comment_id": 96783484, "body": "Nothing works. I have not been able to figure out how to run the app or even run the server locally. I don\u2019t have access to my computer at the moment but can share the errors tomorrow. Bundle exec rackup config.ru always leads to an error saying boot.rb could be not be loaded. Do you have any ideas? How would you go about setting this up?"}, {"owner": {"reputation": 1, "user_id": 11151037, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-joxSyG1-n_Y/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rds2k7w7K14HO_tJKwLOrLxMlRQgA/mo/photo.jpg?sz=128", "display_name": "stacknoobski", "link": "https://stackoverflow.com/users/11151037/stacknoobski"}, "reply_to_user": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1551879653, "post_id": 54993326, "comment_id": 96801936, "body": "@maxpleaner I haven&#39;t been able to find an example online of a configuration of the boot.rb file and I don&#39;t understand it&#39;s purpose. I also can&#39;t figure out what command/s I need to get things started. <code>bundle exec rackup config.ru</code> leads to <code>bundler: failed to load command: rackup</code>"}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1551899094, "post_id": 54993326, "comment_id": 96813324, "body": "You need <code>rack</code> in your gemfile."}, {"owner": {"reputation": 1, "user_id": 11151037, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-joxSyG1-n_Y/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rds2k7w7K14HO_tJKwLOrLxMlRQgA/mo/photo.jpg?sz=128", "display_name": "stacknoobski", "link": "https://stackoverflow.com/users/11151037/stacknoobski"}, "reply_to_user": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1551910844, "post_id": 54993326, "comment_id": 96818669, "body": "@maxpleaner adding rack to the gem file leads to the same error. When i run just <code>rackup config.ru</code> i get the following error:  <code>cannot load such file -- ...&#47;config&#47;boot (LoadError)</code> ."}], "owner": {"reputation": 1, "user_id": 11151037, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-joxSyG1-n_Y/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rds2k7w7K14HO_tJKwLOrLxMlRQgA/mo/photo.jpg?sz=128", "display_name": "stacknoobski", "link": "https://stackoverflow.com/users/11151037/stacknoobski"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 165, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1551911261, "creation_date": 1551743154, "last_edit_date": 1592644375, "question_id": 54993326, "link": "https://stackoverflow.com/questions/54993326/ruby-app-with-sinatra-unicorn-and-mongodb", "title": "Ruby app with Sinatra, Unicorn, and Mongodb", "body": "<p>I've been tasked with building a simple app. I don't have any experience with Sinatra, Unicorn, or Mongo. I'm struggling with figuring out where to start. I have experience with Rails and I keep on trying to think about things in Rails-terms and it's not helping. Everything I've read seems to suggest that Unicorn should be used in conjunction with NGINX. What is the purpose of boot.rb? This is what config/boot.rb looks like right now:</p>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>require 'sinatra'\nrequire 'mongo'\nrequire 'mongoid'\n\nrequire './app'</code></pre>\r\n</div>\r\n</div>\r\n</p>\n<p>here is config/unicorn.rb:</p>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>worker_processes Integer(ENV[\"WEB_CONCURRENCY\"] ||3)\ntimeout 15\npreload_app true\n\nbefore_fork do |server, worker|\n  Signal.trap 'TERM' do\n    puts 'Unicorn master intercepting TERM and sending myself QUIT instead'\n    Process.kill 'QUIT', Process.pid\n  end\nend\nafter_fork do |server, worker|\n  Singal.trap 'TERM' do\n    puts 'Unicorn worker intercepting TERM and doing nothing.  Wait for master to send QUIT'\n  end\nend</code></pre>\r\n</div>\r\n</div>\r\n</p>\n<h1>config/mongoid.yml</h1>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>development:\n  clients:\n    default:\n      database: db-name\n      hosts:\n        - localhost:27017</code></pre>\r\n</div>\r\n</div>\r\n</p>\n<p>this is what I created for a procfile:</p>\n<p>web: bundle exec unicorn -p $PORT -c ./config/unicorn.rb</p>\n\n<p>Any thoughts?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rubygems", "runtime-error", "puma"], "comments": [{"owner": {"reputation": 670, "user_id": 7753036, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-xzanDakZBsU/AAAAAAAAAAI/AAAAAAAAAE0/t7hgUGyGIc0/photo.jpg?sz=128", "display_name": "mkrl", "link": "https://stackoverflow.com/users/7753036/mkrl"}, "edited": false, "score": 1, "creation_date": 1551750154, "post_id": 54993307, "comment_id": 96745224, "body": "Did your <code>bundle install</code> go through without any errors? Also, might be related to <a href=\"https://stackoverflow.com/questions/39190880/uninitialized-constant-racksessionabstractpersisted-to-start-rails-5-serve\">this</a>."}], "answers": [{"tags": [], "owner": {"reputation": 1692, "user_id": 9288619, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6IK38.jpg?s=128&g=1", "display_name": "code_aks", "link": "https://stackoverflow.com/users/9288619/code-aks"}, "is_accepted": false, "score": 2, "last_activity_date": 1551764276, "creation_date": 1551764276, "answer_id": 54996071, "question_id": 54993307, "link": "https://stackoverflow.com/questions/54993307/cant-start-default-server-on-rails/54996071#54996071", "title": "can&#39;t start default server on rails", "body": "<p>A better choice is to install rvm or rbenv to handle your ruby/gems versions for your app.\nJust follow this link <a href=\"http://railsapps.github.io/installrubyonrails-ubuntu.html\" rel=\"nofollow noreferrer\">http://railsapps.github.io/installrubyonrails-ubuntu.html</a>\nI think it will help you. :)</p>\n"}], "owner": {"reputation": 1, "user_id": 11150973, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-6HSAGVt1Gic/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcL_IGJ-Hx9K4UWid5f2iuTrn0mvg/mo/photo.jpg?sz=128", "display_name": "Carlos Fuentes", "link": "https://stackoverflow.com/users/11150973/carlos-fuentes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 126, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1553222595, "creation_date": 1551742985, "last_edit_date": 1551756855, "question_id": 54993307, "link": "https://stackoverflow.com/questions/54993307/cant-start-default-server-on-rails", "title": "can&#39;t start default server on rails", "body": "<p>I'm new in rails. I follow the tutorial on the web of rails. After install <code>sqlite3</code>, I try start the server, but I can't. the terminal show me this code</p>\n\n<pre><code>invitado@Home:~/blog$ bin/rails server\n=&gt; Booting Puma\n=&gt; Rails 5.2.2 application starting in development \n=&gt; Run `rails server -h` for more startup options\n/usr/lib/ruby/vendor_ruby/rack/mime.rb:54: warning: already initialized constant Rack::Mime::MIME_TYPES\n/var/lib/gems/2.3.0/gems/rack-2.0.6/lib/rack/mime.rb:49: warning: previous definition of MIME_TYPES was here\n/usr/lib/ruby/vendor_ruby/rack/file.rb:15: warning: already initialized constant Rack::File::ALLOWED_VERBS\n/var/lib/gems/2.3.0/gems/rack-2.0.6/lib/rack/file.rb:17: warning: previous definition of ALLOWED_VERBS was here\n/usr/lib/ruby/vendor_ruby/rack/file.rb:16: warning: already initialized constant Rack::File::ALLOW_HEADER\n/var/lib/gems/2.3.0/gems/rack-2.0.6/lib/rack/file.rb:18: warning: previous definition of ALLOW_HEADER was here\n/usr/lib/ruby/vendor_ruby/rack/response.rb:23: warning: already initialized constant Rack::Response::CHUNKED\n/var/lib/gems/2.3.0/gems/rack-2.0.6/lib/rack/response.rb:26: warning: previous definition of CHUNKED was here\nExiting\n/var/lib/gems/2.3.0/gems/bootsnap-1.4.1/lib/bootsnap/load_path_cache/core_ext/active_support.rb:76:in `block in load_missing_constant': uninitialized constant Rack::Session::Abstract::Persisted (NameError)\nfrom /var/lib/gems/2.3.0/gems/bootsnap-1.4.1/lib/bootsnap/load_path_cache/core_ext/active_support.rb:8:in without_bootsnap_cache\n</code></pre>\n\n<blockquote>\n  <p>and so on with a lot of lines. If anyone can help me I appreciate it. Thank you!</p>\n</blockquote>\n"}, {"tags": ["regex", "ruby", "hash"], "comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1551814806, "post_id": 54992929, "comment_id": 96775543, "body": "Actually, when I say, &quot;...please tell me if I&#39;m wrong.&quot; I mean &quot;...please tell me if I&#39;m right or wrong.&quot;"}], "answers": [{"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 0, "last_activity_date": 1551814742, "last_edit_date": 1551814742, "creation_date": 1551744483, "answer_id": 54993519, "question_id": 54992929, "link": "https://stackoverflow.com/questions/54992929/replace-keys-of-a-hash-with-its-value-inside-a-specific-group-of-a-matched-regex/54993519#54993519", "title": "Replace keys of a hash with its value inside a specific group of a matched regex", "body": "<p>I think you may be after the following, but please tell me if I'm wrong.</p>\n\n<pre><code>def replace_em(str, h)\n  str.gsub(/\\S+/, Hash.new { |_,k| k }.merge(h))\nend\n\nh = { 'k1'=&gt;'v1', 'k2'=&gt;'v2' }\nstr = \"Now is the k1 for all good persons to k2 to their friend k11\"\n\nreplace_em(str, h)\n  #=&gt; \"Now is the v1 for all good persons to v2 to their friend k11\"\n</code></pre>\n\n<p><code>/\\S+/</code> matches strings of characters that contain no whitespace.</p>\n\n<pre><code>g = Hash.new { |_,k| k } \n</code></pre>\n\n<p>creates an empty hash with a <em>default proc</em> that causes <code>g[k]</code> to return <code>k</code> if <code>g</code> does not have a key <code>k</code>.</p>\n\n<pre><code>g.merge(h)\n</code></pre>\n\n<p>returns a hash having the default proc just created with keys and values from <code>h</code>.</p>\n\n<p>See the doc for the form of <a href=\"http://ruby-doc.org/core-2.5.1/Hash.html#method-c-new\" rel=\"nofollow noreferrer\">Hash::new</a> that takes a second argument that is a hash.</p>\n"}], "owner": {"reputation": 27, "user_id": 10909804, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38600b582c607064db7c5940b6431f21?s=128&d=identicon&r=PG&f=1", "display_name": "Wilsonmarcos", "link": "https://stackoverflow.com/users/10909804/wilsonmarcos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 44, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1551814742, "creation_date": 1551740416, "last_edit_date": 1551771563, "question_id": 54992929, "link": "https://stackoverflow.com/questions/54992929/replace-keys-of-a-hash-with-its-value-inside-a-specific-group-of-a-matched-regex", "title": "Replace keys of a hash with its value inside a specific group of a matched regex", "body": "<p>I have an input:</p>\n\n<pre><code>input = gets\n</code></pre>\n\n<p>in which a substring of the form:</p>\n\n<pre><code>\"\u672c\u8cc7\u6599\u7531(Name of a contractor)\u63d0\u4f9b\"\n</code></pre>\n\n<p>appears at different positions. I also have thousands of contractor names and their English transliterations stored in a hash:</p>\n\n<pre><code>hash = {'key1': 'value1', 'key2': 'value2'}\n</code></pre>\n\n<p>I have the following code:</p>\n\n<pre><code>input.gsub!(/\u672c\u8cc7\u6599\u7531(.+)\u63d0\u4f9b/) {\"\\nThe following information has been provided by: #{$1}\\n\"} \n# =&gt; The following information has been provided by: (name of contractor)\n</code></pre>\n\n<p>To change a native name into English name, I can do:</p>\n\n<pre><code>person_making_announcement = /(The following information has been provided by: )(.+)/.match(input)\nif Company_making_the_Announcement[2].match \"key1\"\n  input.gsub! Company_making_the_Announcement[2], \"value1\"\nelsif Company_making_the_Announcement[2].match \"key2\"\n  input.gsub! Company_making_the_Announcement[2], \"value2\"\nend\n</code></pre>\n\n<p>But this is very clumsy, and I need them in a hash anyways for other parts of the code. If I do:</p>\n\n<pre><code>hash.each do |k, v|\n input.gsub!(\"#{k}\", \"#{v}\")\nend\n</code></pre>\n\n<p>then all matches in <code>input</code> are changed. If I change the method to use <code>sub!</code>, only the first instance will be changed. I thought the following would work:</p>\n\n<pre><code>myregex = /(There is text here: )(.+)/.match(input)\nhash.each do |k, v|\n  myregex[2].gsub!(\"#{k}\", \"#{v}\")\nend\n</code></pre>\n\n<p>But it does not. I need to keep the regex since it is part of a substitution, and modification previously made on the input.</p>\n\n<p>What would be the syntax to make the change only inside a specific subgroup in a regex matched to the input?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "forms"], "comments": [{"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1551750685, "post_id": 54992926, "comment_id": 96745370, "body": "Rails supports patch forms (<a href=\"https://guides.rubyonrails.org/form_helpers.html#how-do-forms-with-patch-put-or-delete-methods-work-questionmark\" rel=\"nofollow noreferrer\">guides.rubyonrails.org/&hellip;</a>), maybe you can show your attempt?"}, {"owner": {"reputation": 4216, "user_id": 9269043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a2763bcfa8917a365c88f8639494de7?s=128&d=identicon&r=PG", "display_name": "Vasilisa", "link": "https://stackoverflow.com/users/9269043/vasilisa"}, "edited": false, "score": 0, "creation_date": 1551770266, "post_id": 54992926, "comment_id": 96750715, "body": "It is possible, just define all needed @variables for a new form."}], "owner": {"reputation": 89, "user_id": 6335221, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/4089541d8d2b2a947918338259c46a65?s=128&d=identicon&r=PG&f=1", "display_name": "Juan C", "link": "https://stackoverflow.com/users/6335221/juan-c"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 32, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1551740403, "creation_date": 1551740403, "question_id": 54992926, "link": "https://stackoverflow.com/questions/54992926/how-can-i-add-a-post-form-on-a-site-with-a-patch-form", "title": "How can I add a POST form on a site with a PATCH form?", "body": "<p>At the company I'm working, they asked to translate a form for (POST) creation or (PATCH) update of data, to another site that already has a form that only edits (PATCH) information. Each form is independent, that is to say, each form has its own related controller.</p>\n\n<p>My problem is that I haven't found an example with this complexity with Rails although it doesn't seem as complex, given that each form works independently, but I don't know if Rails architecture allows me to include a POST form of a C1 controller in a view that already has a PATCH form of a C2 controller. </p>\n\n<p>Is it possible to do that?</p>\n\n<p>Ruby 2.5.0\nRails 5.2.1</p>\n"}, {"tags": ["ruby"], "answers": [{"tags": [], "owner": {"reputation": 653, "user_id": 7148414, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KMhlJ.jpg?s=128&g=1", "display_name": "baseballlover723", "link": "https://stackoverflow.com/users/7148414/baseballlover723"}, "is_accepted": true, "score": 3, "last_activity_date": 1551740370, "creation_date": 1551740370, "answer_id": 54992919, "question_id": 54992849, "link": "https://stackoverflow.com/questions/54992849/ruby-dir-glob-output-without-file-extensions/54992919#54992919", "title": "Ruby Dir.glob output without file extensions", "body": "<p>You can map over the results of <code>Dir.glob</code> and use <code>File.basename</code> to remove the extension. Like this: <code>Dir.glob(\"*.txt\").map {|f| File.basename(f, \".*\")}</code></p>\n"}], "owner": {"reputation": 27, "user_id": 11109972, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-bkyxi4jGh_M/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdR6rXc9s1x-CFiP6A-MLfTgyqbMA/mo/photo.jpg?sz=128", "display_name": "saltea", "link": "https://stackoverflow.com/users/11109972/saltea"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "accepted_answer_id": 54992919, "answer_count": 1, "score": -1, "last_activity_date": 1551768591, "creation_date": 1551739965, "last_edit_date": 1551768591, "question_id": 54992849, "link": "https://stackoverflow.com/questions/54992849/ruby-dir-glob-output-without-file-extensions", "title": "Ruby Dir.glob output without file extensions", "body": "<p><code>Dir.glob(\"*.txt\")</code> gives all filles that have the txt file extension. I want the <code>.txt</code> extension not to get printet. What could I do?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "haml", "simple-form"], "comments": [{"owner": {"reputation": 1479, "user_id": 2506819, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b60435154915157dfd7ebfc04164930?s=128&d=identicon&r=PG", "display_name": "fanta", "link": "https://stackoverflow.com/users/2506819/fanta"}, "edited": false, "score": 3, "creation_date": 1551739662, "post_id": 54992572, "comment_id": 96742808, "body": "have you tried wrappers ? <a href=\"https://github.com/plataformatec/simple_form/wiki/Custom-Wrappers\" rel=\"nofollow noreferrer\">github.com/plataformatec/simple_form/wiki/Custom-Wrappers</a>"}, {"owner": {"reputation": 28, "user_id": 2862557, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41e462fbc5af52e788ecf2c307e05e74?s=128&d=identicon&r=PG&f=1", "display_name": "Branko Tomic", "link": "https://stackoverflow.com/users/2862557/branko-tomic"}, "reply_to_user": {"reputation": 1479, "user_id": 2506819, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b60435154915157dfd7ebfc04164930?s=128&d=identicon&r=PG", "display_name": "fanta", "link": "https://stackoverflow.com/users/2506819/fanta"}, "edited": false, "score": 0, "creation_date": 1551971037, "post_id": 54992572, "comment_id": 96844046, "body": "No luck with that. I ended up modifying CSS to match the rendered markup. Thanks!"}], "owner": {"reputation": 28, "user_id": 2862557, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41e462fbc5af52e788ecf2c307e05e74?s=128&d=identicon&r=PG&f=1", "display_name": "Branko Tomic", "link": "https://stackoverflow.com/users/2862557/branko-tomic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 90, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1581309069, "creation_date": 1551738530, "last_edit_date": 1581309069, "question_id": 54992572, "link": "https://stackoverflow.com/questions/54992572/customize-simple-form-radio-buttons-to-match-the-theme-markup", "title": "Customize simple form radio buttons to match the theme markup", "body": "<p>I\u2019m using simple forms. The following line is what I have</p>\n\n<pre><code>=f.input :live_mode, as: :radio_buttons, label: false\n</code></pre>\n\n<p>which produces the following markup</p>\n\n<pre><code>&lt;div class=\"form-group radio_buttons optional facility_live_mode\"&gt; . \n  &lt;input type=\"hidden\" name=\"facility[live_mode]\" value=\"\"&gt;\n  &lt;label class=\"radio\"&gt;\n    &lt;label for=\"facility_live_mode_true\"&gt;\n      &lt;input class=\"radio_buttons optional\" type=\"radio\" value=\"true\" name=\"facility[live_mode]\" id=\"facility_live_mode_true\"&gt;\n      Yes\n    &lt;/label&gt;\n  &lt;/label&gt;\n  &lt;label class=\"radio\"&gt;\n    &lt;label for=\"facility_live_mode_false\"&gt;\n      &lt;input class=\"radio_buttons optional\" readonly=\"readonly\" type=\"radio\" value=\"false\" checked=\"checked\" name=\"facility[live_mode]\" id=\"facility_live_mode_false\"&gt;\n      No\n    &lt;/label&gt;\n  &lt;/label&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>The wrapper <code>label</code> is the result of setting <code>config.item_wrapper_tag</code> in <code>simple_form.rb</code> to <code>:label</code> which matches the markup of the custom theme I\u2019m using.</p>\n\n<p>What I want to achieve is this</p>\n\n<pre><code>&lt;input type=\"hidden\" name=\"facility[live_mode]\" value=\"\"&gt;\n&lt;label class=\"custom-control custom-radio custom-control-inline\"&gt;\n  &lt;input class=\"custom-control-input\" type=\"radio\" value=\"true\" name=\"facility[live_mode]\" id=\"facility_live_mode_true\"&gt;\n  &lt;span class=\"custom-control-label\"&gt;Yes&lt;/span&gt;\n&lt;/label&gt;\n&lt;label class=\"custom-control custom-radio custom-control-inline\"&gt;\n  &lt;input class=\"custom-control-input\" readonly=\"readonly\" type=\"radio\" value=\"false\" checked=\"checked\" name=\"facility[live_mode]\" id=\"facility_live_mode_false\"&gt;\n  &lt;span class=\"custom-control-label\"&gt;No&lt;/span&gt;\n&lt;/label&gt;\n</code></pre>\n\n<p>but I have no idea how to go about doing this. Simple form config file provides a few options for customization but nothing that can produce the output that I need.</p>\n\n<p>Is there something I can do to make this happen?</p>\n"}, {"tags": ["ruby", "for-loop"], "comments": [{"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 3, "creation_date": 1551740631, "post_id": 54992531, "comment_id": 96743121, "body": "Why do you want to use a for loop? For loops are exceedingly rare in Ruby."}, {"owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "edited": false, "score": 2, "creation_date": 1551751377, "post_id": 54992531, "comment_id": 96745512, "body": "&quot;exceedingly rare&quot; - I&#39;d even go as far to say I&#39;ve never seen one except in Ruby beginner questions on Stack Overflow."}], "answers": [{"tags": [], "owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "is_accepted": true, "score": 0, "last_activity_date": 1551739283, "creation_date": 1551739283, "answer_id": 54992722, "question_id": 54992531, "link": "https://stackoverflow.com/questions/54992531/how-to-use-for-and-change-values-in-a-ruby-hash/54992722#54992722", "title": "How to use &quot;for&quot; and change values in a ruby hash?", "body": "<p>I think this is the closest to what you want</p>\n\n<pre><code>for k, v in hash do\n  hash[k] = v * v\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1551773404, "post_id": 54998058, "comment_id": 96752083, "body": "Nope, <code>Hash#transform_values</code> is the best here. Straight to the point, no extra crust."}, {"owner": {"reputation": 187, "user_id": 5872997, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-A7X5TdH9uoc/AAAAAAAAAAI/AAAAAAAAAEM/JA2VfopILws/photo.jpg?sz=128", "display_name": "Slava Zharkov", "link": "https://stackoverflow.com/users/5872997/slava-zharkov"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1551774236, "post_id": 54998058, "comment_id": 96752445, "body": "I don&#39;t agree with you. Data mutation is a bad habit. This approach may cause side effects."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1551774250, "post_id": 54998058, "comment_id": 96752453, "body": "What data mutation? Looks like someone doesn&#39;t practice what he preaches :)"}, {"owner": {"reputation": 187, "user_id": 5872997, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-A7X5TdH9uoc/AAAAAAAAAAI/AAAAAAAAAEM/JA2VfopILws/photo.jpg?sz=128", "display_name": "Slava Zharkov", "link": "https://stackoverflow.com/users/5872997/slava-zharkov"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1551774498, "post_id": 54998058, "comment_id": 96752583, "body": "Ah, sorry i think you talk about first answer. <code>transform_values</code> is ok, but the <code>Hash#transform_values</code> is a method from the Rails-specific <code>ActiveSupport</code> lib."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1551774539, "post_id": 54998058, "comment_id": 96752598, "body": "Nope, it&#39;s in core since 2.4."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1551775098, "post_id": 54998058, "comment_id": 96752870, "body": "Thanks. But the problem now is that the OP <i>knew</i> about transform_values from the start and they deemed it unsatistactory. Could you add a few words as to why it should be preferable to a <code>for</code> loop?"}], "tags": [], "owner": {"reputation": 187, "user_id": 5872997, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-A7X5TdH9uoc/AAAAAAAAAAI/AAAAAAAAAEM/JA2VfopILws/photo.jpg?sz=128", "display_name": "Slava Zharkov", "link": "https://stackoverflow.com/users/5872997/slava-zharkov"}, "is_accepted": false, "score": 3, "last_activity_date": 1551775738, "last_edit_date": 1551775738, "creation_date": 1551773274, "answer_id": 54998058, "question_id": 54992531, "link": "https://stackoverflow.com/questions/54992531/how-to-use-for-and-change-values-in-a-ruby-hash/54998058#54998058", "title": "How to use &quot;for&quot; and change values in a ruby hash?", "body": "<p>We have a rich standard lib to work with collections in Ruby. It is very useful and covers most needed cases. We have a great methods <a href=\"https://ruby-doc.org/core-2.6.1/Enumerable.html#method-i-map\" rel=\"nofollow noreferrer\">Enumerable#map</a>, <a href=\"https://ruby-doc.org/core-2.6.1/Enumerable.html#method-i-filter\" rel=\"nofollow noreferrer\">Enumerable#filter</a>, <a href=\"https://ruby-doc.org/core-2.6.1/Enumerable.html#method-i-reduce\" rel=\"nofollow noreferrer\">Enumerable#reduce</a> in ruby and many others. Please, read the documentation.</p>\n\n<p>The general purpose way is to generate a new hash:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>new_hash = hash.each_with_object({}) { |(k, v), acc| acc[k] = v * v }\n</code></pre>\n\n<p>For Ruby since 2.4.0 you can use the <code>Hash#transform_values</code> method:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>hash.transform_values{ |value| value * value }\n</code></pre>\n\n<p>We prefer to use <code>map, filter, transform_values</code> instead of <code>for</code> because of several reasons. Such as:</p>\n\n<ul>\n<li>minimize data mutation and side effects;</li>\n<li>ability to chain methods like <code>collection.filter(&amp;:empty?).map(&amp;:size)</code></li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 277, "user_id": 459336, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6e6ff0efab49be4c6f97b836148fee17?s=128&d=identicon&r=PG", "display_name": "Davinj", "link": "https://stackoverflow.com/users/459336/davinj"}, "is_accepted": false, "score": 0, "last_activity_date": 1551773657, "creation_date": 1551773657, "answer_id": 54998163, "question_id": 54992531, "link": "https://stackoverflow.com/questions/54992531/how-to-use-for-and-change-values-in-a-ruby-hash/54998163#54998163", "title": "How to use &quot;for&quot; and change values in a ruby hash?", "body": "<pre><code>hash.each{ |k, v| hash[k] = v * v }\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 10173821, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c273c0149cdc0d132e5e067394aa6202?s=128&d=identicon&r=PG&f=1", "display_name": "Rigby K.", "link": "https://stackoverflow.com/users/10173821/rigby-k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "accepted_answer_id": 54992722, "answer_count": 3, "score": 0, "last_activity_date": 1551775738, "creation_date": 1551738321, "last_edit_date": 1551774218, "question_id": 54992531, "link": "https://stackoverflow.com/questions/54992531/how-to-use-for-and-change-values-in-a-ruby-hash", "title": "How to use &quot;for&quot; and change values in a ruby hash?", "body": "<p>if have the hash:</p>\n\n<pre><code>hash = {a:1, b: 2, c: 3}\n</code></pre>\n\n<p>tried this:</p>\n\n<pre><code>for value in hash.values do\n    value = value * value\nend\n</code></pre>\n\n<p>but return the same value no the value desired, I find a solution:</p>\n\n<pre><code>hash.transform_values{ |value| value * value}\n=&gt; {:a=&gt;1, :b=&gt;4, :c=&gt;9}\n</code></pre>\n\n<p>but want to do with a for loop, how to do?</p>\n"}, {"tags": ["ruby", "file"], "comments": [{"owner": {"reputation": 1208, "user_id": 3406915, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/478116e7ad1fe58e2710db4192819b32?s=128&d=identicon&r=PG&f=1", "display_name": "zeitnot", "link": "https://stackoverflow.com/users/3406915/zeitnot"}, "edited": false, "score": 0, "creation_date": 1551734099, "post_id": 54991560, "comment_id": 96740715, "body": "You need to replace <code>\\n</code> with <code>file_name = gets.chomp</code>."}, {"owner": {"reputation": 27, "user_id": 11109972, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-bkyxi4jGh_M/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdR6rXc9s1x-CFiP6A-MLfTgyqbMA/mo/photo.jpg?sz=128", "display_name": "saltea", "link": "https://stackoverflow.com/users/11109972/saltea"}, "reply_to_user": {"reputation": 1208, "user_id": 3406915, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/478116e7ad1fe58e2710db4192819b32?s=128&d=identicon&r=PG&f=1", "display_name": "zeitnot", "link": "https://stackoverflow.com/users/3406915/zeitnot"}, "edited": false, "score": 0, "creation_date": 1551734408, "post_id": 54991560, "comment_id": 96740826, "body": "@zeitnot thanks, now its working!"}, {"owner": {"reputation": 3902, "user_id": 10608621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d59df09a85d05117c63706f66811b70c?s=128&d=identicon&r=PG", "display_name": "mechnicov", "link": "https://stackoverflow.com/users/10608621/mechnicov"}, "edited": false, "score": 1, "creation_date": 1551736613, "post_id": 54991560, "comment_id": 96741718, "body": "Interpolation is more useful than concatenation. For example you can use <code>&quot;[!] #{file_name} wurde erfolgreich erstellt!&quot;</code>"}, {"owner": {"reputation": 27, "user_id": 11109972, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-bkyxi4jGh_M/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdR6rXc9s1x-CFiP6A-MLfTgyqbMA/mo/photo.jpg?sz=128", "display_name": "saltea", "link": "https://stackoverflow.com/users/11109972/saltea"}, "reply_to_user": {"reputation": 3902, "user_id": 10608621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d59df09a85d05117c63706f66811b70c?s=128&d=identicon&r=PG", "display_name": "mechnicov", "link": "https://stackoverflow.com/users/10608621/mechnicov"}, "edited": false, "score": 0, "creation_date": 1551737899, "post_id": 54991560, "comment_id": 96742205, "body": "@mechnicov do you know why  <code>write_handler = File.delete(file_name) write_handler.close</code> causes a crash?"}, {"owner": {"reputation": 3902, "user_id": 10608621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d59df09a85d05117c63706f66811b70c?s=128&d=identicon&r=PG", "display_name": "mechnicov", "link": "https://stackoverflow.com/users/10608621/mechnicov"}, "edited": false, "score": 0, "creation_date": 1551738351, "post_id": 54991560, "comment_id": 96742370, "body": "<a href=\"https://ruby-doc.org/core-2.6.1/File.html#method-c-delete\" rel=\"nofollow noreferrer\"><code>File.delete</code></a> returns <code>Integer</code>. If you have question it&#39;s better to open new one. Comments are moderated and can be deleted."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1551768269, "post_id": 54991560, "comment_id": 96749828, "body": "&quot;kinda it is not working to create this file&quot; is not a precise enough error description for us to help you. What does &quot;kinda&quot; mean? <i>What</i> doesn&#39;t work? <i>How</i> doesn&#39;t it work? What trouble do you have with your code? Do you get an error message? What is the error message? Is the result you are getting not the result you are expecting? What result do you expect and why, what is the result you are getting and how do the two differ? Is the behavior you are observing not the desired behavior? What is the desired behavior and why, what is the observed behavior, and in what way do they differ?"}], "answers": [{"tags": [], "owner": {"reputation": 3902, "user_id": 10608621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d59df09a85d05117c63706f66811b70c?s=128&d=identicon&r=PG", "display_name": "mechnicov", "link": "https://stackoverflow.com/users/10608621/mechnicov"}, "is_accepted": true, "score": 1, "last_activity_date": 1551735667, "creation_date": 1551735667, "answer_id": 54991963, "question_id": 54991560, "link": "https://stackoverflow.com/questions/54991560/creating-a-file-with-ruby-extension-is-not-working/54991963#54991963", "title": "Creating a File with Ruby + extension is not working", "body": "<p>All data from command line, which you take with <code>gets</code> is <code>String</code>. So you don't need to use <code>to_s</code>.</p>\n\n<p>When you type any words you press <kbd>Enter</kbd>. It produces <code>\"\\n\"</code> in the end of <code>String</code>.</p>\n\n<p>To remove it use <a href=\"https://ruby-doc.org/core-2.6.1/String.html#method-i-chomp-21\" rel=\"nofollow noreferrer\"><code>String#chomp</code></a>.</p>\n\n<p>In your case</p>\n\n<pre><code>file_name = gets.chomp\n</code></pre>\n"}], "owner": {"reputation": 27, "user_id": 11109972, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-bkyxi4jGh_M/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdR6rXc9s1x-CFiP6A-MLfTgyqbMA/mo/photo.jpg?sz=128", "display_name": "saltea", "link": "https://stackoverflow.com/users/11109972/saltea"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "accepted_answer_id": 54991963, "answer_count": 1, "score": 0, "last_activity_date": 1551735667, "creation_date": 1551733647, "question_id": 54991560, "link": "https://stackoverflow.com/questions/54991560/creating-a-file-with-ruby-extension-is-not-working", "title": "Creating a File with Ruby + extension is not working", "body": "<p>I want to create a file, where the user can create a custom name and then the file extension .txt should get added. But kinda it is not working to create this file..\nAfter that i would like to outprint the message that the file got created in one line, but it gets returned with breakes after the outprint the file_name..\nAny ideas how to fix this?</p>\n\n<pre><code>def t_anlegen\n      print \"Telefonbuchname: \"\n      file_name = gets.to_s\n      file_name = file_name + \".txt\"\n      write_handler = File.new(file_name,\"w\")\n      write_handler.close\n      \"[!]\" + file_name + \"wurde erfolgreich erstellt!\"\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 0, "creation_date": 1551733805, "post_id": 54991357, "comment_id": 96740615, "body": "Presumably, this is the offending line: <code>InviteMailer.new_user_invite(@invite, new_user_registration_path(:invite_token =&gt; @invite.token)).deliver</code>. If you had shown your <code>InviteMailer</code> class, we might be able to see that there is no <code>new_user_invite</code> method."}, {"owner": {"reputation": 49, "user_id": 2677322, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/a3011fa1df039c0b57ae8ae049d7e0c8?s=128&d=identicon&r=PG", "display_name": "Kourosh", "link": "https://stackoverflow.com/users/2677322/kourosh"}, "reply_to_user": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 0, "creation_date": 1551745397, "post_id": 54991357, "comment_id": 96744186, "body": "I used rails generate to create InviteMailer. Not sure how to def the new_user_invite in here.  Here it is:   class InviteMailer &lt; ApplicationMailer    # Subject can be set in your I18n file at config/locales/en.yml   # with the following lookup:   #   #   en.invite_mailer.invite.subject   #   def invite     @greeting = &quot;Hi&quot;      mail to: &quot;to@example.org&quot;   end end"}, {"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 0, "creation_date": 1551745537, "post_id": 54991357, "comment_id": 96744222, "body": "I can&#39;t tell for sure (it&#39;s best to put code in your question by using the <code>edit</code> link just under the tags), but it looks like the class in fact does not have the <code>new_user_invite</code> method. Perhaps add the code to your question so it&#39;s easier to see?"}, {"owner": {"reputation": 49, "user_id": 2677322, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/a3011fa1df039c0b57ae8ae049d7e0c8?s=128&d=identicon&r=PG", "display_name": "Kourosh", "link": "https://stackoverflow.com/users/2677322/kourosh"}, "reply_to_user": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 0, "creation_date": 1551745591, "post_id": 54991357, "comment_id": 96744233, "body": "Sure, I will do that."}, {"owner": {"reputation": 1009, "user_id": 3373464, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/OYNGU.jpg?s=128&g=1", "display_name": "DollarChills", "link": "https://stackoverflow.com/users/3373464/dollarchills"}, "edited": false, "score": 0, "creation_date": 1551746065, "post_id": 54991357, "comment_id": 96744336, "body": "Have your tried adding new_user_invite to your required params?"}, {"owner": {"reputation": 49, "user_id": 2677322, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/a3011fa1df039c0b57ae8ae049d7e0c8?s=128&d=identicon&r=PG", "display_name": "Kourosh", "link": "https://stackoverflow.com/users/2677322/kourosh"}, "edited": false, "score": 0, "creation_date": 1551759751, "post_id": 54991357, "comment_id": 96747212, "body": "jvillian: I have updated the invite_mailer.rb and now I am getting undefined method `subject&#39; for InviteMailer:Class. Please help. Thx"}, {"owner": {"reputation": 277, "user_id": 459336, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6e6ff0efab49be4c6f97b836148fee17?s=128&d=identicon&r=PG", "display_name": "Davinj", "link": "https://stackoverflow.com/users/459336/davinj"}, "edited": false, "score": 0, "creation_date": 1551773894, "post_id": 54991357, "comment_id": 96752291, "body": "pretty nice example <a href=\"https://guides.rubyonrails.org/action_mailer_basics.html\" rel=\"nofollow noreferrer\">guides.rubyonrails.org/action_mailer_basics.html</a>"}], "answers": [{"comments": [{"owner": {"reputation": 49, "user_id": 2677322, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/a3011fa1df039c0b57ae8ae049d7e0c8?s=128&d=identicon&r=PG", "display_name": "Kourosh", "link": "https://stackoverflow.com/users/2677322/kourosh"}, "edited": false, "score": 0, "creation_date": 1551746984, "post_id": 54993743, "comment_id": 96744557, "body": "My problem is the &quot;....do stuff&quot; part. would it be the following as an example:   subject    &#39;Invitation&#39;     recipients invitation.recipient_email     from       &#39;foo@example.com&#39;     body       :invitation =&gt; invitation, :signup_url =&gt; signup_url     invitation.update_attribute(:sent_at, Time.now)   end"}, {"owner": {"reputation": 49, "user_id": 2677322, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/a3011fa1df039c0b57ae8ae049d7e0c8?s=128&d=identicon&r=PG", "display_name": "Kourosh", "link": "https://stackoverflow.com/users/2677322/kourosh"}, "edited": false, "score": 0, "creation_date": 1551747242, "post_id": 54993743, "comment_id": 96744621, "body": "One more thing, do I need model for mailer as the following? class Mailer &lt; ActionMailer::Base   def invitation(invitation, signup_url)     subject    &#39;Invitation&#39;     recipients invitation.recipient_email     from       &#39;foo@example.com&#39;     body       :invitation =&gt; invitation, :signup_url =&gt; signup_url     invitation.update_attribute(:sent_at, Time.now)   end end"}, {"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "reply_to_user": {"reputation": 49, "user_id": 2677322, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/a3011fa1df039c0b57ae8ae049d7e0c8?s=128&d=identicon&r=PG", "display_name": "Kourosh", "link": "https://stackoverflow.com/users/2677322/kourosh"}, "edited": false, "score": 0, "creation_date": 1551803234, "post_id": 54993743, "comment_id": 96769786, "body": "&quot;How do you set up an ActionMailer?&quot; is an entirely different question than &quot;How do I solve the <code>undefined method &#39;new_user_invite&#39; for InviteMailer:Class</code> error?&quot; The tutorial you&#39;re following asserts &quot;The invitation mailer is very basic&quot;, so perhaps take a look at the Guide and see where that takes you."}], "tags": [], "owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "is_accepted": false, "score": 0, "last_activity_date": 1551746314, "creation_date": 1551746314, "answer_id": 54993743, "question_id": 54991357, "link": "https://stackoverflow.com/questions/54991357/ror-undefined-method-new-user-invite-for-invitemailerclass/54993743#54993743", "title": "RoR: undefined method `new_user_invite&#39; for InviteMailer:Class", "body": "<p>To create the <code>new_user_invite</code> as a class method on <code>InviteMailer</code>, you do: </p>\n\n<pre><code>class InviteMailer &lt; ApplicationMailer\n\n  class &lt;&lt; self \n\n    def new_user_invite(invite, path)\n      ... do stuff\n    end\n\n  end\n\n  def invite\n    @greeting = \"Hi\"\n    mail to: \"to@example.org\"\n  end\n\nend\n</code></pre>\n\n<p>Or, </p>\n\n<pre><code>class InviteMailer &lt; ApplicationMailer\n\n  def self.new_user_invite(invite, path)\n    ... do stuff\n  end\n\n  def invite\n    @greeting = \"Hi\"\n    mail to: \"to@example.org\"\n  end\n\nend\n</code></pre>\n\n<p>Which you use is a matter of personal preference. </p>\n\n<p>I want to note that <a href=\"https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag\">J\u00f6rg W Mittag</a> wishes to say: </p>\n\n<blockquote>\n  <p>I am one of those Ruby Purists who likes to point out that there is no such thing as a class method in Ruby. I am perfectly fine, though, with using the term <em>class method</em> colloquially, <strong>as long as it is fully understood by all parties that it is a colloquial usage</strong>. In other words, if you <em>know</em> that there is no such thing as a class method and that the term \"class method\" is just short for \"instance method of the singleton class of an object that is an instance of <code>Class</code>\", then there is no problem. But otherwise, I have only seen it obstruct understanding.</p>\n</blockquote>\n\n<p>Let it be fully understood by all parties that the term <em>class method</em> is used above in its colloquial sense.</p>\n"}, {"comments": [{"owner": {"reputation": 49, "user_id": 2677322, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/a3011fa1df039c0b57ae8ae049d7e0c8?s=128&d=identicon&r=PG", "display_name": "Kourosh", "link": "https://stackoverflow.com/users/2677322/kourosh"}, "edited": false, "score": 0, "creation_date": 1551783149, "post_id": 54997840, "comment_id": 96757542, "body": "Vasilisa: Thank you so much, it worked. I spent a few hours on this and now I am able to move to the next step. Thanks again."}, {"owner": {"reputation": 4216, "user_id": 9269043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a2763bcfa8917a365c88f8639494de7?s=128&d=identicon&r=PG", "display_name": "Vasilisa", "link": "https://stackoverflow.com/users/9269043/vasilisa"}, "reply_to_user": {"reputation": 49, "user_id": 2677322, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/a3011fa1df039c0b57ae8ae049d7e0c8?s=128&d=identicon&r=PG", "display_name": "Kourosh", "link": "https://stackoverflow.com/users/2677322/kourosh"}, "edited": false, "score": 0, "creation_date": 1551783236, "post_id": 54997840, "comment_id": 96757604, "body": "@Kourosh, happy to help you. Please <a href=\"https://stackoverflow.com/help/someone-answers\">accept</a> an answer if it helped"}, {"owner": {"reputation": 49, "user_id": 2677322, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/a3011fa1df039c0b57ae8ae049d7e0c8?s=128&d=identicon&r=PG", "display_name": "Kourosh", "link": "https://stackoverflow.com/users/2677322/kourosh"}, "edited": false, "score": 0, "creation_date": 1551783684, "post_id": 54997840, "comment_id": 96757875, "body": "It definitely did and I did accept as a working answer. let me know if the acceptance is not showing. Thanks again."}, {"owner": {"reputation": 4216, "user_id": 9269043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a2763bcfa8917a365c88f8639494de7?s=128&d=identicon&r=PG", "display_name": "Vasilisa", "link": "https://stackoverflow.com/users/9269043/vasilisa"}, "reply_to_user": {"reputation": 49, "user_id": 2677322, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/a3011fa1df039c0b57ae8ae049d7e0c8?s=128&d=identicon&r=PG", "display_name": "Kourosh", "link": "https://stackoverflow.com/users/2677322/kourosh"}, "edited": false, "score": 0, "creation_date": 1551785532, "post_id": 54997840, "comment_id": 96758948, "body": "@Kourosh looks like you only voted up the answer. It should have green checkmark after accepting"}], "tags": [], "owner": {"reputation": 4216, "user_id": 9269043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a2763bcfa8917a365c88f8639494de7?s=128&d=identicon&r=PG", "display_name": "Vasilisa", "link": "https://stackoverflow.com/users/9269043/vasilisa"}, "is_accepted": true, "score": 1, "last_activity_date": 1551772368, "creation_date": 1551772368, "answer_id": 54997840, "question_id": 54991357, "link": "https://stackoverflow.com/questions/54991357/ror-undefined-method-new-user-invite-for-invitemailerclass/54997840#54997840", "title": "RoR: undefined method `new_user_invite&#39; for InviteMailer:Class", "body": "<p>Not sure if I can explain it, but for mailers we just define methods without class syntax. It is very convenient to think about mailer like about controller, they are very similar. Should be:</p>\n\n<pre><code>class InviteMailer &lt; ApplicationMailer\n  def new_user_invite(invite, signup_url)\n    @signup_url = signup_url\n    invite.update_attribute(:sent_at, Time.now)\n    mail(to: invite.email, subject: 'Invite')\n  end\nend\n</code></pre>\n\n<p>Now you need a view for email. Create a file called <code>new_user_invite.html.erb</code> in app/views/invite_mailer/. For simplicity it will be:</p>\n\n<pre><code>&lt;p&gt;Someone invited you to the project, please click link: @signup_url&lt;/p&gt;\n</code></pre>\n\n<p>Also you need to change <code>new_user_registration_path</code> to <code>new_user_registration_url</code> in mailer call, to pass full link</p>\n\n<p>You can read more about mailers in <a href=\"https://guides.rubyonrails.org/action_mailer_basics.html\" rel=\"nofollow noreferrer\">guides</a></p>\n"}], "owner": {"reputation": 49, "user_id": 2677322, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/a3011fa1df039c0b57ae8ae049d7e0c8?s=128&d=identicon&r=PG", "display_name": "Kourosh", "link": "https://stackoverflow.com/users/2677322/kourosh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 112, "favorite_count": 0, "accepted_answer_id": 54997840, "answer_count": 2, "score": 0, "last_activity_date": 1551772368, "creation_date": 1551732738, "last_edit_date": 1551759634, "question_id": 54991357, "link": "https://stackoverflow.com/questions/54991357/ror-undefined-method-new-user-invite-for-invitemailerclass", "title": "RoR: undefined method `new_user_invite&#39; for InviteMailer:Class", "body": "<p>I used the following tutorial on creating scoped invite (<a href=\"https://coderwall.com/p/rqjjca/creating-a-scoped-invitation-system-for-rails\" rel=\"nofollow noreferrer\">https://coderwall.com/p/rqjjca/creating-a-scoped-invitation-system-for-rails</a>) to create invite, user, group but ran into the above error and not sure how to solve it. Please bear in mind I am still learning RoR. Thanks.</p>\n\n<p>I have the following code in invites_controller.rb</p>\n\n<pre><code>class InvitesController &lt; ApplicationController\n\n  def new\n    @invite = Invite.new\n  end\n\n  def create\n    @invite = Invite.new(invite_params) # Make a new Invite\n    @invite.sender_id = current_user.id # set the sender to the current user\n    if @invite.save\n       InviteMailer.new_user_invite(@invite, new_user_registration_path(:invite_token =&gt; @invite.token)).deliver #send the invite data to our mailer to deliver the email\n       flash[:notice] = \"Thanks, invitation has successfully been sent\"\n       redirect_to user_groups_url\n    else\n       flash[:notice] =  \"oh no, creating an new invitation failed\"\n       redirect_to invites_path\n    end\n  end\n\n  private\n\n    def invite_params\n      params.require(:invite).permit(:email, :recipient_id, :user_group_id, :sender_id)\n    end\n\nend\n</code></pre>\n\n<p>Model for invite to send token</p>\n\n<pre><code>class Invite &lt; ApplicationRecord\n\n  before_create :generate_token\n\n  def generate_token\n   self.token = Digest::SHA1.hexdigest([self.user_group_id, Time.now, rand].join)\n  end\n\n\nend\n</code></pre>\n\n<p>Not sure if the Route is complete?</p>\n\n<pre><code>Rails.application.routes.draw do\n  resources :memberships\n  resources :user_groups\n  # mount RailsAdmin::Engine =&gt; '/admin', as: 'rails_admin'\n  # devise_for :users\n  # delete '/logout', to: 'sessions#destroy'\n  default_url_options :host =&gt; \"smtp.gmail.com\"\n\n  devise_for :users, controllers: {\n      sessions: 'users/sessions',\n      passwords: 'users/passwords',\n      registrations: 'users/registrations'\n  }\n  get 'static_pages/index'\n\n  resources :invites\n\n  namespace :admin, path: '/admin' do\n    resources :users, except: [:show] do\n      member do\n        post :resend_invite\n        post :enable\n      end\n    end\n    resources :roles, only: [:index, :edit, :update, :new, :create]\n    get \"audits/index\"\n  end\nend\n</code></pre>\n\n<p>view form to invite new user and existing users.</p>\n\n<pre><code>= simple_form_for @invite , :url =&gt; invites_path do |f|\n  = f.error_notification\n  = f.error_notification message: f.object.errors[:base].to_sentence if f.object.errors[:base].present?\n\n  space-left3.space-below3\n    = f.hidden_field :user_group_id, :value =&gt; @invite.user_group_id\n    = f.input :email, placeholder: 'user@domain.com'\n  .form-actions\n    button.btn.btn-primary type=\"submit\" Send\n</code></pre>\n\n<p>mailer/invite_mailer.rb</p>\n\n<pre><code>class InviteMailer &lt; ApplicationMailer\n  def self.new_user_invite(invite, signup_url)\n    subject    'Invite'\n    recipients invite.recipient_email\n    from       'example@gmail.com'\n    body       :invite =&gt; invite, :signup_url =&gt; signup_url\n    invite.update_attribute(:sent_at, Time.now)\n  end\n\n  def invite\n    @greeting = \"Hi\"\n\n    mail to: \"to@example.org\"\n  end\nend\n</code></pre>\n\n<p>mailer/application_mailer</p>\n\n<pre><code> class ApplicationMailer &lt; ActionMailer::Base\n      default from: 'from@example.com'\n      layout 'mailer'\n    end\n</code></pre>\n"}, {"tags": ["sql", "ruby-on-rails", "ruby", "postgresql", "activerecord"], "comments": [{"owner": {"reputation": 35510, "user_id": 3706016, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wqmW0.jpg?s=128&g=1", "display_name": "jarlh", "link": "https://stackoverflow.com/users/3706016/jarlh"}, "edited": false, "score": 0, "creation_date": 1551732890, "post_id": 54991300, "comment_id": 96740235, "body": "Do you want a Rails answer, or a SQL answer?"}, {"owner": {"reputation": 141, "user_id": 8731239, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6406cb32c55193f324eab9d7b17bfaa4?s=128&d=identicon&r=PG&f=1", "display_name": "Yassine", "link": "https://stackoverflow.com/users/8731239/yassine"}, "reply_to_user": {"reputation": 35510, "user_id": 3706016, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wqmW0.jpg?s=128&g=1", "display_name": "jarlh", "link": "https://stackoverflow.com/users/3706016/jarlh"}, "edited": false, "score": 0, "creation_date": 1551732923, "post_id": 54991300, "comment_id": 96740253, "body": "@jarlh Rails answer if possible"}, {"owner": {"reputation": 3946, "user_id": 6231376, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cea33b55396be93411ade85021f41b01?s=128&d=identicon&r=PG&f=1", "display_name": "TeWu", "link": "https://stackoverflow.com/users/6231376/tewu"}, "edited": false, "score": 0, "creation_date": 1551793898, "post_id": 54991300, "comment_id": 96763916, "body": "You might want to see <a href=\"https://stackoverflow.com/a/39410256/6231376\">Rails find record with zero has_many records associated</a>"}], "answers": [{"tags": [], "owner": {"reputation": 930, "user_id": 3577922, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eURpm.jpg?s=128&g=1", "display_name": "Masa Sakano", "link": "https://stackoverflow.com/users/3577922/masa-sakano"}, "is_accepted": false, "score": 1, "last_activity_date": 1551757306, "creation_date": 1551757306, "answer_id": 54995082, "question_id": 54991300, "link": "https://stackoverflow.com/questions/54991300/rails-sql-find-parents-that-have-no-child-or-have-all-children-with-a-condition/54995082#54995082", "title": "Rails/SQL: Find parents that have no child or have all children with a condition", "body": "<p>Here is a solution in Rails:</p>\n\n<pre><code>grp = Parent.left_outer_joins(:children).distinct\nmodels = grp.where('children.id IS NULL').or(grp.where('children.status = 1'))\n</code></pre>\n\n<p>Basically you need to use <code>LEFT OUTER JOIN</code> (see <code>left_outer_joins</code> in <a href=\"https://guides.rubyonrails.org/active_record_querying.html#left-outer-joins\" rel=\"nofollow noreferrer\">Rails5 Reference</a>).</p>\n\n<p>I do not think your example of the first part works.  It would return an error message like</p>\n\n<pre><code># ActiveRecord::StatementInvalid (PG::GroupingError: ERROR:  \n# aggregate functions are not allowed in WHERE\n</code></pre>\n\n<p>and also Rails <code>joins</code> is <code>INNER JOIN</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 11603, "user_id": 234593, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/8e2ee1b00d372ad8f6ed5e87385ffef5?s=128&d=identicon&r=PG", "display_name": "Kache", "link": "https://stackoverflow.com/users/234593/kache"}, "is_accepted": true, "score": 3, "last_activity_date": 1551793288, "last_edit_date": 1551793288, "creation_date": 1551788900, "answer_id": 55002832, "question_id": 54991300, "link": "https://stackoverflow.com/questions/54991300/rails-sql-find-parents-that-have-no-child-or-have-all-children-with-a-condition/55002832#55002832", "title": "Rails/SQL: Find parents that have no child or have all children with a condition", "body": "<p>Since you're using Postgres, you can use a <code>NOT EXISTS</code> query:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code># Parents with no children\nParent.where.not('exists (?)', Child.where('children.parent_id = parents.id').select(1))\n</code></pre>\n\n<p>This query performs better than anything requiring a join, as an <code>EXPLAIN</code> will show you that Postgres will accomplish this with a <code>Nested Loop Anti Join</code> operation.</p>\n"}], "owner": {"reputation": 141, "user_id": 8731239, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6406cb32c55193f324eab9d7b17bfaa4?s=128&d=identicon&r=PG&f=1", "display_name": "Yassine", "link": "https://stackoverflow.com/users/8731239/yassine"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 595, "favorite_count": 1, "accepted_answer_id": 55002832, "answer_count": 2, "score": 1, "last_activity_date": 1551793288, "creation_date": 1551732530, "last_edit_date": 1551732909, "question_id": 54991300, "link": "https://stackoverflow.com/questions/54991300/rails-sql-find-parents-that-have-no-child-or-have-all-children-with-a-condition", "title": "Rails/SQL: Find parents that have no child or have all children with a condition", "body": "<p>I need to find parents that either have no child OR have all children exclusively with condition (status = 1).</p>\n\n<pre><code>class Parent\n  has_many :children\nend\n\nclass Child\n  enum status: [ :confirmed, :not_confirmed ]\n  belongs_to :parent\nend\n</code></pre>\n\n<p>I know the first part, which is finding parents with no children.</p>\n\n<pre><code>Parent.joins(:children).where('count(children) = 0')\n</code></pre>\n\n<p>Rails answer.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 5358, "user_id": 2399861, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/5fbe887e0a643cd477ba3f14fa528f84?s=128&d=identicon&r=PG", "display_name": "Ruby Racer", "link": "https://stackoverflow.com/users/2399861/ruby-racer"}, "edited": false, "score": 0, "creation_date": 1551722632, "post_id": 54988848, "comment_id": 96735649, "body": "This is expected because case 1 is a value and case 2 is a reference. You can only access object methods by referencing the object."}], "answers": [{"comments": [{"owner": {"reputation": 312, "user_id": 2617208, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/295465a92b18ba44201e6f2dc492d521?s=128&d=identicon&r=PG", "display_name": "Santosh Mohanty", "link": "https://stackoverflow.com/users/2617208/santosh-mohanty"}, "edited": false, "score": 0, "creation_date": 1551723146, "post_id": 54989058, "comment_id": 96735882, "body": "Yes, this works fine   but my use case is something like what if <code>B.new.kick</code> raises an error I will not get any data.  My use case is I want to store the data in array in runtime even if kick method raises an exception I have data in it."}, {"owner": {"reputation": 28433, "user_id": 1565525, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f2e3a5d0911464ffa3d7ac48475cf98d?s=128&d=identicon&r=PG", "display_name": "Fabio", "link": "https://stackoverflow.com/users/1565525/fabio"}, "reply_to_user": {"reputation": 312, "user_id": 2617208, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/295465a92b18ba44201e6f2dc492d521?s=128&d=identicon&r=PG", "display_name": "Santosh Mohanty", "link": "https://stackoverflow.com/users/2617208/santosh-mohanty"}, "edited": false, "score": 0, "creation_date": 1551723206, "post_id": 54989058, "comment_id": 96735902, "body": "@SantoshMohanty, you will not get any data anyway if error will be raised in a <code>kick</code> method."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 312, "user_id": 2617208, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/295465a92b18ba44201e6f2dc492d521?s=128&d=identicon&r=PG", "display_name": "Santosh Mohanty", "link": "https://stackoverflow.com/users/2617208/santosh-mohanty"}, "edited": false, "score": 0, "creation_date": 1551723230, "post_id": 54989058, "comment_id": 96735910, "body": "@SantoshMohanty: if your version of <code>B#kick</code> raises an error, the program will crash just as well."}], "tags": [], "owner": {"reputation": 28433, "user_id": 1565525, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f2e3a5d0911464ffa3d7ac48475cf98d?s=128&d=identicon&r=PG", "display_name": "Fabio", "link": "https://stackoverflow.com/users/1565525/fabio"}, "is_accepted": true, "score": 3, "last_activity_date": 1551724159, "last_edit_date": 1551724159, "creation_date": 1551722741, "answer_id": 54989058, "question_id": 54988848, "link": "https://stackoverflow.com/questions/54988848/how-to-pass-a-instance-accessor-variable-in-ruby-to-another-class-and-get-data-s/54989058#54989058", "title": "How to pass a instance/accessor variable in ruby to another class and get data stored in respective variable?", "body": "<p>Short version:<br>\n<code>x = [3, 4]</code> will create new instance of array and saves to <code>x</code> variable, where <code>row</code> will still reference to the original value(or no value <code>nil</code>).  </p>\n\n<p>Another approach could be the <code>kick</code> method to return \"kicked\" value.</p>\n\n<pre><code>class A\n  def fetch\n    @row = B.new.kick\n    puts row.inspect\n  end\nend\n\nclass B\n  def kick(x)\n    [3,4]\n  end\nend\n</code></pre>\n\n<p>If you want to follow object-oriented programming principle \"Tell, don't ask\" you can try visitor pattern approach.</p>\n\n<pre><code>class A\n  def fetch\n    B.new.kick(self)\n    puts row.inspect\n  end\n\n  def save(row)\n    @row = row\n  end\nend\n\nclass B\n  def kick(x)\n    x.save([3,4])\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 312, "user_id": 2617208, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/295465a92b18ba44201e6f2dc492d521?s=128&d=identicon&r=PG", "display_name": "Santosh Mohanty", "link": "https://stackoverflow.com/users/2617208/santosh-mohanty"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "accepted_answer_id": 54989058, "answer_count": 1, "score": 0, "last_activity_date": 1551724159, "creation_date": 1551721873, "last_edit_date": 1551722291, "question_id": 54988848, "link": "https://stackoverflow.com/questions/54988848/how-to-pass-a-instance-accessor-variable-in-ruby-to-another-class-and-get-data-s", "title": "How to pass a instance/accessor variable in ruby to another class and get data stored in respective variable?", "body": "<p>Referring to the below code is there a way that I can pass the variable <code>row</code> from <code>class A</code>  to <code>class B#kick</code> and get the data stored? </p>\n\n<pre><code>class A\n  attr_accessor :row\n\n  def fetch\n    B.new.kick(self.row)\n    puts row.inspect\n  end\nend\n\nclass B\n  def kick(x)\n    x = [3,4]\n  end\nend\n\n@test = A.new.fetch\nexpect(@test.row).to eql([3,4])\n</code></pre>\n\n<p>Current O/P <code>=&gt; nil</code></p>\n\n<p>However If I pass self and assign that works , but I dont want to use this approach:\nWorking Code</p>\n\n<pre><code>class A\n  attr_accessor :row\n\n  def fetch\n    B.new.kick(self)\n    puts row.inspect\n  end\nend\n\nclass B\n  def kick(x)\n    x.row = [3,4]\n  end\nend\n\n@test = A.new.fetch\n#=&gt; [3, 4]\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "reactjs"], "comments": [{"owner": {"reputation": 697, "user_id": 6450244, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YBInO.jpg?s=128&g=1", "display_name": "Nagesh Dhope", "link": "https://stackoverflow.com/users/6450244/nagesh-dhope"}, "edited": false, "score": 0, "creation_date": 1551719364, "post_id": 54988100, "comment_id": 96734107, "body": "Can you add screenshot of postman?"}, {"owner": {"reputation": 37, "user_id": 5351595, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0188d5b22dc20e1e0c682d519d9419fe?s=128&d=identicon&r=PG&f=1", "display_name": "dBz", "link": "https://stackoverflow.com/users/5351595/dbz"}, "reply_to_user": {"reputation": 697, "user_id": 6450244, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YBInO.jpg?s=128&g=1", "display_name": "Nagesh Dhope", "link": "https://stackoverflow.com/users/6450244/nagesh-dhope"}, "edited": false, "score": 0, "creation_date": 1551720276, "post_id": 54988100, "comment_id": 96734550, "body": "I have attached the screenshot"}, {"owner": {"reputation": 366, "user_id": 7411834, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30cbf1ba12a81b3b44e200a0532d0526?s=128&d=identicon&r=PG&f=1", "display_name": "remelkabir", "link": "https://stackoverflow.com/users/7411834/remelkabir"}, "edited": false, "score": 0, "creation_date": 1551721819, "post_id": 54988100, "comment_id": 96735258, "body": "All you need to do is stringify your payload. It should work.  JSON.stringify({&quot;email&quot;:&quot;abc@mail.com&quot;,&quot;password&quot;:&quot;password&quot;&zwnj;&#8203;})"}, {"owner": {"reputation": 37, "user_id": 5351595, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0188d5b22dc20e1e0c682d519d9419fe?s=128&d=identicon&r=PG&f=1", "display_name": "dBz", "link": "https://stackoverflow.com/users/5351595/dbz"}, "reply_to_user": {"reputation": 366, "user_id": 7411834, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30cbf1ba12a81b3b44e200a0532d0526?s=128&d=identicon&r=PG&f=1", "display_name": "remelkabir", "link": "https://stackoverflow.com/users/7411834/remelkabir"}, "edited": false, "score": 0, "creation_date": 1551761565, "post_id": 54988100, "comment_id": 96747653, "body": "@remelkabir I tried that but even after doing that I am getting 404 error"}], "owner": {"reputation": 37, "user_id": 5351595, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0188d5b22dc20e1e0c682d519d9419fe?s=128&d=identicon&r=PG&f=1", "display_name": "dBz", "link": "https://stackoverflow.com/users/5351595/dbz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 311, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1551720207, "creation_date": 1551719003, "last_edit_date": 1551720207, "question_id": 54988100, "link": "https://stackoverflow.com/questions/54988100/jwt-authentication-attempt-is-returning-404", "title": "JWT authentication attempt is returning 404", "body": "<p>Hi all i am trying to get authentication token from my rails backend application using react front end. i am getting 404 error, the same thing is working when i am using postman to get the token</p>\n\n<p>React code</p>\n\n<pre><code>fetch('http://localhost:3000/authenticate', {\n    method: 'POST',\n    headers: {\n        'Accept': 'application/json',\n        'Content-Type': 'application/json',\n    },\n    body: {\"email\":\"abc@mail.com\",\"password\":\"password\"}\n})\n</code></pre>\n\n<p>Rails code</p>\n\n<pre><code>#app/controllers/application_controller.rb\nclass ApplicationController &lt; ActionController::API\n\n\n\n\n  before_action :authenticate_request\n     attr_reader :current_user\n\n  before_action :set_headers\n     private def authenticate_request\n       @current_user = AuthorizeApiRequest.call(request.headers).result\n       render json: { error: 'Not Authorized' }, status: 401 unless @current_user\n     end\n\n     private def set_headers\n      headers['Access-Control-Allow-Origin'] = '*'\n      headers['Access-Control-Expose-Headers'] = 'ETag'\n      headers['Access-Control-Allow-Methods'] = 'GET, POST, PATCH, PUT, DELETE, OPTIONS, HEAD'\n      headers['Access-Control-Allow-Headers'] = '*,x-requested-with,Authorization,Content-Type,If-Modified-Since,If-None-Match'\n      headers['Access-Control-Max-Age'] = '86400'\n    end\n   end\n</code></pre>\n\n<p>Please help me to fix this, I am new to both.</p>\n\n<p>Postman screenshot\n<a href=\"https://i.stack.imgur.com/UOiHi.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/UOiHi.png\" alt=\"Postman screenshot\"></a></p>\n"}, {"tags": ["regex", "ruby"], "comments": [{"owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 1, "creation_date": 1551720351, "post_id": 54987984, "comment_id": 96734583, "body": "You may use a simpler <code>&#47;{{(?:(?!{{).)*?\\|.*?}}&#47;</code>"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1551720747, "post_id": 54987984, "comment_id": 96734767, "body": "Why the mad rush to select an answer? You don&#39;t want to see others?"}], "answers": [{"comments": [{"owner": {"reputation": 17840, "user_id": 2102956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b347220471064a3cb72d768ec2314e6?s=128&d=identicon&r=PG", "display_name": "Pushpesh Kumar Rajwanshi", "link": "https://stackoverflow.com/users/2102956/pushpesh-kumar-rajwanshi"}, "reply_to_user": {"reputation": 253, "user_id": 3949182, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9088b82cda8974475a869b8821a59077?s=128&d=identicon&r=PG&f=1", "display_name": "Enea G UnlimApps", "link": "https://stackoverflow.com/users/3949182/enea-g-unlimapps"}, "edited": false, "score": 0, "creation_date": 1551720495, "post_id": 54988041, "comment_id": 96734643, "body": "@EneaGUnlimApps: Glad I could help :)"}], "tags": [], "owner": {"reputation": 17840, "user_id": 2102956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b347220471064a3cb72d768ec2314e6?s=128&d=identicon&r=PG", "display_name": "Pushpesh Kumar Rajwanshi", "link": "https://stackoverflow.com/users/2102956/pushpesh-kumar-rajwanshi"}, "is_accepted": true, "score": 2, "last_activity_date": 1551719492, "last_edit_date": 1551719492, "creation_date": 1551718783, "answer_id": 54988041, "question_id": 54987984, "link": "https://stackoverflow.com/questions/54987984/how-to-match-pattern-that-contains-substring/54988041#54988041", "title": "How to match pattern that contains substring", "body": "<p>Use can use this regex,</p>\n\n<pre><code>{{(?:(?!{{).)*\\|(?:(?!{{).)*}}\n</code></pre>\n\n<p><strong>Explanation:</strong></p>\n\n<ul>\n<li><code>{{</code> - Matches literal <code>{{</code></li>\n<li><code>(?:(?!{{).)*</code> - Matches any text except literal <code>{{</code> also called <a href=\"https://www.rexegg.com/regex-quantifiers.html#tempered_greed\" rel=\"nofollow noreferrer\">Tempered Greedy Token</a></li>\n<li><code>\\|</code> - Matches pipe <code>|</code> character</li>\n<li><code>(?:(?!{{).)*</code> -Again matches any text except literal <code>{{</code></li>\n<li><code>}}</code> - Matches literal <code>}}</code></li>\n</ul>\n\n<p><strong><a href=\"https://regex101.com/r/LEYPuF/1\" rel=\"nofollow noreferrer\">Demo 1</a></strong></p>\n\n<p>Also, in case there are nested patterns like that, and you want to match the inner most patterns, you can use this regex,</p>\n\n<pre><code>{{(?:(?!{{|}}).)*\\|(?:(?!{{|}}).)*}}\n</code></pre>\n\n<p><strong><a href=\"https://regex101.com/r/LEYPuF/2\" rel=\"nofollow noreferrer\">Demo 2</a></strong></p>\n\n<p>Check out this Ruby code,</p>\n\n<pre><code>re = /{{(?:(?!{{|}}).)*\\|(?:(?!{{|}}).)*}}/\nstr = 'Testing some text{{ {{ first_name | mask }} }} and another {{ city }} and again {{ state | mask_trail }}'\n\nstr.scan(re) do |match|\n    puts match.to_s\nend\n</code></pre>\n\n<p>Outputs,</p>\n\n<pre><code>{{ first_name | mask }}\n{{ state | mask_trail }}\n</code></pre>\n\n<p><strong><a href=\"https://rextester.com/FIKU80500\" rel=\"nofollow noreferrer\">Online Ruby demo</a></strong></p>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 0, "last_activity_date": 1551756147, "last_edit_date": 1551756147, "creation_date": 1551742741, "answer_id": 54993278, "question_id": 54987984, "link": "https://stackoverflow.com/questions/54987984/how-to-match-pattern-that-contains-substring/54993278#54993278", "title": "How to match pattern that contains substring", "body": "<p>I assume (in part because of the example in the question) that matches are to exclude strings beginning with \"{{\" and ending with \"}}\", containing \"|\", that also contain \"{{\". For example, neither</p>\n\n<pre><code>\"{{ a | {{ b }}\"\n</code></pre>\n\n<p>nor</p>\n\n<pre><code>\"{{ a | {{ b }} c }}\"\n</code></pre>\n\n<p>are to be matched. If these are to be matched, the regular expression suggested by @WiktorStribi\u017cew in a comment on the question could be used.</p>\n\n<p>You could obtain the desired matches as follows.</p>\n\n<pre><code>str = \"Testing some text {{ first_name | mask }} and another {{ city }} \" +\n      \"and again {{ state | mask_trail }}\"\n\nR = /\n    {{         # match '{{'\n    ((?!{{).)  # match one character not preceded by '{{'. Save in capture group 1\n    *          # perform capture to group 1 zero or more times \n    \\|         # match '|'\n    \\g&lt;1&gt;      # execute subroutine defined by capture group 1\n    *          # perform preceding match zero or more times\n    }}         # match '}}'\n    /x         # free-spacing regex definition mode\n</code></pre>\n\n<p>or, in short form,</p>\n\n<pre><code>R = /{{((?!{{).)*\\|\\g&lt;1&gt;*}}/\n</code></pre>\n\n<h1><p></p></h1>\n\n<pre><code>str.gsub(R).to_a\n  #=&gt; [\"{{ first_name | mask }}\", \"{{ state | mask_trail }}\"]\n</code></pre>\n\n<p>I could not use <a href=\"http://ruby-doc.org/core-2.5.1/String.html#method-i-scan\" rel=\"nofollow noreferrer\">String#scan</a> because I did not want to return the contents of the capture group. I therefore used <a href=\"http://ruby-doc.org/core-2.5.1/String.html#method-i-gsub\" rel=\"nofollow noreferrer\">String#gsub</a> without a block to return an enumerator that generates matches, and then converted that to an array of matches. <a href=\"https://www.regexbuddy.com/manual.html#insertrecurse\" rel=\"nofollow noreferrer\">Here</a> is a discussion of regex subroutines or subexpressions.</p>\n\n<p>I borrowed <code>(?!{{).</code> from @Pushpesh's answer.</p>\n"}], "owner": {"reputation": 253, "user_id": 3949182, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9088b82cda8974475a869b8821a59077?s=128&d=identicon&r=PG&f=1", "display_name": "Enea G UnlimApps", "link": "https://stackoverflow.com/users/3949182/enea-g-unlimapps"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "accepted_answer_id": 54988041, "answer_count": 2, "score": 2, "last_activity_date": 1551756147, "creation_date": 1551718580, "question_id": 54987984, "link": "https://stackoverflow.com/questions/54987984/how-to-match-pattern-that-contains-substring", "title": "How to match pattern that contains substring", "body": "<p>I have this text:</p>\n\n<pre><code>Testing some text {{ first_name | mask }} and another {{ city }} and again {{ state | mask_trail }}\n</code></pre>\n\n<p>I would like to match only the <code>{{}}</code> that contain a pipe <code>|</code></p>\n\n<p>But when I do something like </p>\n\n<pre><code>text.scan(/({{.*?\\|+.*?}})/)\n</code></pre>\n\n<p><code>{{city}}</code> also gets matched</p>\n"}, {"tags": ["mysql", "ruby", "rubygems"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1551717719, "post_id": 54987586, "comment_id": 96733204, "body": "It doesn&#39;t look like you&#39;re inserting a lot of data here. What sort of limit are you concerned about? Normally you can insert as much as MySQL&#39;s <a href=\"https://dev.mysql.com/doc/refman/8.0/en/program-variables.html\" rel=\"nofollow noreferrer\"><code>max_allowed_packet</code></a> which can be adjusted as necessary but is usually enough."}, {"owner": {"reputation": 15207, "user_id": 4104224, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-1UvuxsNkn9w/AAAAAAAAAAI/AAAAAAAAA10/vjzWlg3BR-U/photo.jpg?sz=128", "display_name": "Uueerdo", "link": "https://stackoverflow.com/users/4104224/uueerdo"}, "edited": false, "score": 0, "creation_date": 1551729332, "post_id": 54987586, "comment_id": 96738792, "body": "What is the table definition for the table to which you inserting?"}], "owner": {"reputation": 1, "user_id": 11149278, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-dE_DkLelEqE/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdXxXO_KuB9uoNRD4dhFXk4AlKdyw/mo/photo.jpg?sz=128", "display_name": "Oranger", "link": "https://stackoverflow.com/users/11149278/oranger"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 156, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1551777411, "creation_date": 1551717190, "last_edit_date": 1551777411, "question_id": 54987586, "link": "https://stackoverflow.com/questions/54987586/is-there-a-limit-argument-size-for-the-mysql-prepared-statements", "title": "Is there a limit argument size for the mysql prepared statements?", "body": "<p>OK, I've been stuck on this for some times now. I want to use the mysql gem to populate a database with data from an xml file but when I'm trying to execute prepared statements I have an issue.</p>\n\n<pre><code>@dbi = Mysql.new(@host,@userid,@pwrd,@database)\n\nquery = \"INSERT IGNORE INTO sha1( sha1_date, sha1) VALUES (? , ?) \"\n@prep = @dbi.prepare(query)\nres = @prep.execute( ir.date, ir.sha1)\n#this first query works, i can find the inserted row in the DB\n\n@prep = @dbi.prepare(\"SELECT id FROM sha1 WHERE sha1 = ?\")\nres = @prep.execute(ir.sha1)\nputs res.fetch\n#but here the prepared statement return an empty string.\n</code></pre>\n\n<p>I want to be able to do a SELECT like this because the final query would look something like that</p>\n\n<pre><code>    query = \"INSERT INTO integration_job(sha1_id, branch_id, integration_stage_id, status_id, name) VALUES (\n  (SELECT id FROM sha1 WHERE sha1 = ?),\n    (SELECT id FROM branch WHERE name = ?),\n    (SELECT id FROM integration_stage WHERE name = ?),\n    (SELECT id FROM integration_status WHERE name = ?),\n    ?)\"\n@prep = @dbi.prepare(query)\nres = @prep.execute(ir.sha1, ir.branch, ir.stage, ir.status, ir.job\n</code></pre>\n\n<p>I've tried to do the same types of queries with other Tables and it worked. My guess is that the argument that I pass to the execute() method is too long.</p>\n\n<pre><code>puts ir.sha1 # =&gt; dba759e168e734fcc2eaf114269879177ef6a0b1\n</code></pre>\n\n<p>But i can't find informations about a limit size for the arguments so i don't realy know what to do.</p>\n\n<p>So i have several questions : </p>\n\n<ul>\n<li>Is there a limit size for the execute() method arguments ? (and if so, what is it ?)</li>\n<li>How can i workaround this and do prepared statements with the same outcome but without the sha1 as an argument ? <em>Using an other gem is an idea but i don't know which one</em>.</li>\n</ul>\n\n<p><strong>[Edit]</strong> \nOK I found the solution, it's was simply that I limited the size of the VARCHAR field storing the sha1 to 40 characters. (It made sens to me has a sha1 IS 40 character long) But the parsing of the sha1 added a end-line character to the string , making it 41 char long. I removed it with gsub(\"\\n\") and everything works fine now.</p>\n\n<p>Thanks for the comments, they made think about it differently.</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1551715631, "post_id": 54986974, "comment_id": 96731972, "body": "Yes, your code is all kinds of broken. I&#39;m not even sure it can be salvaged."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1551715794, "post_id": 54986974, "comment_id": 96732049, "body": "This deadline that you have, I hope it does allow you to do an introductory course on programming. Because even if we manage to write this one for you, you will not get too far without fundamentals."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1551715879, "post_id": 54986974, "comment_id": 96732096, "body": "&quot;learn to program&quot; by Chris Pine is a great book. Uses ruby for its code snippets. Check it out."}, {"owner": {"reputation": 1, "user_id": 11145787, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-WmN68YOtC3o/AAAAAAAAAAI/AAAAAAAAABM/iU-_3vq4GzY/photo.jpg?sz=128", "display_name": "Raen", "link": "https://stackoverflow.com/users/11145787/raen"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1551716099, "post_id": 54986974, "comment_id": 96732222, "body": "@SergioTulentsev Thank you, I will. I&#39;m currently using some online tutorials and other sites to learn what I can. I&#39;ve only just started."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1551725555, "post_id": 54986974, "comment_id": 96737042, "body": "I&#39;ve tried to indent this code better, but it&#39;s still really confused. Can you try and clean it up a bit more? Your use of trailing <code>if</code> conditions, multi-line blocks without <code>do</code> ... <code>end</code> is making it hard to read. <code>reduce</code> is an array method, and <code>n</code> appears to be...an integer value?"}, {"owner": {"reputation": 1, "user_id": 11145787, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-WmN68YOtC3o/AAAAAAAAAAI/AAAAAAAAABM/iU-_3vq4GzY/photo.jpg?sz=128", "display_name": "Raen", "link": "https://stackoverflow.com/users/11145787/raen"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1551751943, "post_id": 54986974, "comment_id": 96745643, "body": "@tadman thank you for your efforts! I&#39;m still learning. I&#39;m reading/working through the book that was suggested in an earlier comment and working on things. I think I need to just start over and try this again when I have learned a few more things. I already know so much more than I did when I started this just from reading the book."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1551802767, "post_id": 54986974, "comment_id": 96769500, "body": "Absolutely nothing wrong with learning. All I&#39;m suggesting is when posting code that has problems do your best to get it into a form that executes even if it produces unexpected results. There&#39;s a ton of Ruby learning resources out there, so I hope you&#39;ve found something that fits your style and needs."}], "owner": {"reputation": 1, "user_id": 11145787, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-WmN68YOtC3o/AAAAAAAAAAI/AAAAAAAAABM/iU-_3vq4GzY/photo.jpg?sz=128", "display_name": "Raen", "link": "https://stackoverflow.com/users/11145787/raen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 57, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1551725507, "creation_date": 1551715213, "last_edit_date": 1551725507, "question_id": 54986974, "link": "https://stackoverflow.com/questions/54986974/ruby-help-combining-syntax-for-finding-prime-and-reducing-to-the-smallest-divi", "title": "Ruby - help combining syntax for finding prime and reducing to the smallest divisor greater than 1 for non-prime numbers", "body": "<p>I am completely and utterly brand new to this and trying to teach myself Ruby. I have been given a question to see if I can piece together what to do and prove problem solving skills via research and sheer determination so, keep in mind, I know very little about Ruby, I have been learning it for all of a day.</p>\n\n<p>I need to first determine if an integer is a prime number (without using the required 'prime' directory, as far as I know) and then, if the result is true, my output needs to be 1. If it is false, my output needs to be the smallest divisor greater than one. </p>\n\n<p>Piecing together things I found here and various other sites around the internet, I put together something I hoped would work. It does not. </p>\n\n<pre><code>def isPrime(n)\n  ( 2..Math.sqrt(n)).each { |i|\n    if n % i == 0 &amp;&amp; i &lt; n\n    else\n      n.reduce { |smallest, current| break if n &lt;= 2 }\n      puts n\n    end\n  }\n1\n</code></pre>\n\n<p>I haven't the foggiest idea why it doesn't work. I know little about Ruby's syntax and I am reasonably certain that is where I am messing up. </p>\n\n<p>Finding the prime number DOES work; it's the rest (finding the smallest divisor) that does not. And I'm sure my replacing true with 1 is mangling this horribly. Any help or insight would be greatly appreciated. I have zero background in coding (unless you count my mom working in COBOL in the 80s) so, by all means, explain it like you would to a simpleton because I am THAT new.</p>\n"}, {"tags": ["ruby", "datetime", "hash"], "comments": [{"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1551768552, "post_id": 54986962, "comment_id": 96749942, "body": "Your question is unclear. You say you want to sort &quot;this hash&quot;, but there are three hashes in your example, which one do you want to sort?"}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1551768658, "post_id": 54986962, "comment_id": 96749998, "body": "Also, Yes/No questions are not a good fit for <a href=\"https://stackoverflow.com\">Stack Overflow</a>, since neither answer is useful. &quot;Is that possible&quot; in <i>particular</i> is a <i>very bad</i> question, since the answer is almost always &quot;Yes&quot;, but again, that answer is not particularly helpful. Plus, you should show your code, and explain where you are stuck, and what is the problem, otherwise, we cannot help you."}], "answers": [{"comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1551719232, "post_id": 54986997, "comment_id": 96734023, "body": "Reversing the order via <code>-</code> only works for numerical values."}, {"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1551719352, "post_id": 54986997, "comment_id": 96734099, "body": "Thanks for pointing out that @Stefan, that was kindly added by ray."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1551721672, "post_id": 54986997, "comment_id": 96735184, "body": "Yeah, but it doesn&#39;t work because you&#39;re working with strings, not numbers."}], "tags": [], "owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "is_accepted": true, "score": 3, "last_activity_date": 1551715597, "last_edit_date": 1551715597, "creation_date": 1551715315, "answer_id": 54986997, "question_id": 54986962, "link": "https://stackoverflow.com/questions/54986962/sorting-a-hash-in-ruby-by-the-third-attribute-value/54986997#54986997", "title": "Sorting a hash in ruby by the third attribute value", "body": "<p>You can use <code>sort_by</code> and pass a block, accessing in each element to the key <code>value3</code> (ascending by default):</p>\n\n<pre><code>map.sort_by { |element| element[:value3] }\n# [{:label=&gt;\"x\",\n  :value1=&gt;\"2019-03-03 19:12:50\",\n  :value2=&gt;\"2019-03-03 19:50:50\",\n  :value3=&gt;\"00:38:00\"},\n {:label=&gt;\"z\",\n  :value1=&gt;\"2019-03-03 19:12:50\",\n  :value2=&gt;\"2019-03-03 22:24:13\",\n  :value3=&gt;\"03:11:23\"},\n {:label=&gt;\"y\",\n  :value1=&gt;\"2019-03-03 19:12:50\",\n  :value2=&gt;\"2019-03-04 07:47:28\",\n  :value3=&gt;\"12:34:38\"}]\n</code></pre>\n\n<p>And to order same in descending ,</p>\n\n<pre><code>map.sort_by { |element| -element[:value3] }\n</code></pre>\n"}], "owner": {"reputation": 246, "user_id": 6040217, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh6.googleusercontent.com/-9GaOtkVb-yc/AAAAAAAAAAI/AAAAAAAABYM/Q0kcEGPl-k8/photo.jpg?sz=128", "display_name": "Shamveel Ahammed", "link": "https://stackoverflow.com/users/6040217/shamveel-ahammed"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "accepted_answer_id": 54986997, "answer_count": 1, "score": 0, "last_activity_date": 1551721685, "creation_date": 1551715177, "last_edit_date": 1551721685, "question_id": 54986962, "link": "https://stackoverflow.com/questions/54986962/sorting-a-hash-in-ruby-by-the-third-attribute-value", "title": "Sorting a hash in ruby by the third attribute value", "body": "<p>I am trying to sort this ruby hash using value3 </p>\n\n<pre><code>map = [\n  {:label=&gt;\"x\", :value1=&gt;\"2019-03-03 19:12:50\", :value2=&gt;\"2019-03-03 19:50:50\", :value3=&gt;\"00:38:00\"},\n  {:label=&gt;\"y\", :value1=&gt;\"2019-03-03 19:12:50\", :value2=&gt;\"2019-03-04 07:47:28\", :value3=&gt;\"12:34:38\"},\n  {:label=&gt;\"z\", :value1=&gt;\"2019-03-03 19:12:50\", :value2=&gt;\"2019-03-03 22:24:13\", :value3=&gt;\"03:11:23\"}\n]\n</code></pre>\n\n<p>Is that possible?</p>\n"}, {"tags": ["regex", "ruby"], "comments": [{"owner": {"reputation": 17840, "user_id": 2102956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b347220471064a3cb72d768ec2314e6?s=128&d=identicon&r=PG", "display_name": "Pushpesh Kumar Rajwanshi", "link": "https://stackoverflow.com/users/2102956/pushpesh-kumar-rajwanshi"}, "edited": false, "score": 0, "creation_date": 1551714993, "post_id": 54986829, "comment_id": 96731587, "body": "What&#39;s your expected result after splitting?"}, {"owner": {"reputation": 17608, "user_id": 661624, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/347231f8387561ef324e25b48b96ba16?s=128&d=identicon&r=PG&f=1", "display_name": "Henley Chiu", "link": "https://stackoverflow.com/users/661624/henley-chiu"}, "reply_to_user": {"reputation": 17840, "user_id": 2102956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b347220471064a3cb72d768ec2314e6?s=128&d=identicon&r=PG", "display_name": "Pushpesh Kumar Rajwanshi", "link": "https://stackoverflow.com/users/2102956/pushpesh-kumar-rajwanshi"}, "edited": false, "score": 0, "creation_date": 1551715195, "post_id": 54986829, "comment_id": 96731722, "body": "@PushpeshKumarRajwanshi updated quest"}], "answers": [{"comments": [{"owner": {"reputation": 17608, "user_id": 661624, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/347231f8387561ef324e25b48b96ba16?s=128&d=identicon&r=PG&f=1", "display_name": "Henley Chiu", "link": "https://stackoverflow.com/users/661624/henley-chiu"}, "edited": false, "score": 0, "creation_date": 1551715686, "post_id": 54987020, "comment_id": 96731997, "body": "This isn&#39;t precisely what I wanted, but I tried this: title.split(/[^\\x00-\\x7F]|[^a-zA-Z0-9 ]+/) which gives me [&quot;[MV] SUNMI(&quot;, &quot;&quot;, &quot;) _ &quot;, &quot;&quot;, &quot;&quot;, &quot;(Noir)&quot;] . I want it to split on non-alphanumeric characters only (english letters, foreign characters should not be split on)"}, {"owner": {"reputation": 17840, "user_id": 2102956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b347220471064a3cb72d768ec2314e6?s=128&d=identicon&r=PG", "display_name": "Pushpesh Kumar Rajwanshi", "link": "https://stackoverflow.com/users/2102956/pushpesh-kumar-rajwanshi"}, "reply_to_user": {"reputation": 17608, "user_id": 661624, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/347231f8387561ef324e25b48b96ba16?s=128&d=identicon&r=PG&f=1", "display_name": "Henley Chiu", "link": "https://stackoverflow.com/users/661624/henley-chiu"}, "edited": false, "score": 0, "creation_date": 1552587009, "post_id": 54987020, "comment_id": 97078065, "body": "@HenleyChiu: Did this work for you? Let me know if you have any trouble using it."}], "tags": [], "owner": {"reputation": 17840, "user_id": 2102956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b347220471064a3cb72d768ec2314e6?s=128&d=identicon&r=PG", "display_name": "Pushpesh Kumar Rajwanshi", "link": "https://stackoverflow.com/users/2102956/pushpesh-kumar-rajwanshi"}, "is_accepted": false, "score": 0, "last_activity_date": 1551720781, "last_edit_date": 1551720781, "creation_date": 1551715368, "answer_id": 54987020, "question_id": 54986829, "link": "https://stackoverflow.com/questions/54986829/ruby-split-on-nonalphanumeric-characters-excluding-international-characters/54987020#54987020", "title": "Ruby - split on nonalphanumeric characters excluding international characters?", "body": "<p>So basically you want to split on all ascii but non-alphabet characters. You can use this regex which selects all characters within ascii range.</p>\n\n<pre><code>[ -@[-`{-~]+\n</code></pre>\n\n<p>This regex having ranges space to <code>@</code> then ignoring all uppercase letters then picks all characters from <code>[</code> to backtick then ignores all lowercase letters then picks all characters from <code>{</code> to <code>~</code> as can be seen in ascii table.</p>\n\n<p>In case you want to exclude till extended ascii characters, you can change <code>~</code> in regex with <code>\u00ff</code> and use <code>[ -@[-</code>{-\u00ff]+` regex.</p>\n\n<p><strong><a href=\"https://regex101.com/r/cL3jJ3/1/\" rel=\"nofollow noreferrer\">Demo</a></strong></p>\n\n<p>Check out these Ruby codes,</p>\n\n<pre><code>s = '[MV] SUNMI(\uc120\ubbf8) _ \ub204\uc544\ub974(Noir)'\nputs s.split(/[ -@\\[-`{-~]+/)\n</code></pre>\n\n<p>Prints,</p>\n\n<pre><code>MV\nSUNMI\n\uc120\ubbf8\n\ub204\uc544\ub974\nNoir\n</code></pre>\n\n<p><strong><a href=\"https://rextester.com/QYQOQ4520\" rel=\"nofollow noreferrer\">Online Ruby Demo</a></strong></p>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user557597"}, "is_accepted": false, "score": 1, "last_activity_date": 1551719878, "creation_date": 1551719878, "answer_id": 54988345, "question_id": 54986829, "link": "https://stackoverflow.com/questions/54986829/ruby-split-on-nonalphanumeric-characters-excluding-international-characters/54988345#54988345", "title": "Ruby - split on nonalphanumeric characters excluding international characters?", "body": "<p><code>(?:[^a-zA-Z0-9](?&lt;![^\\x00-\\x7F]))+</code></p>\n\n<p><a href=\"https://regex101.com/r/EDyluc/1\" rel=\"nofollow noreferrer\">https://regex101.com/r/EDyluc/1</a></p>\n\n<p>What is not matched (remains from split) is what you want to keep.</p>\n\n<p>Explained:</p>\n\n<pre><code> (?:\n      [^a-zA-Z0-9]                  # Not Ascii AlphaNum\n      (?&lt;! [^\\x00-\\x7F] )           # Behind, not not Ascii range (Ascii boundary)\n )+\n</code></pre>\n\n<p>Let me know if you need a more detailed explanation.</p>\n"}], "owner": {"reputation": 17608, "user_id": 661624, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/347231f8387561ef324e25b48b96ba16?s=128&d=identicon&r=PG&f=1", "display_name": "Henley Chiu", "link": "https://stackoverflow.com/users/661624/henley-chiu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 242, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1551720781, "creation_date": 1551714773, "last_edit_date": 1551715709, "question_id": 54986829, "link": "https://stackoverflow.com/questions/54986829/ruby-split-on-nonalphanumeric-characters-excluding-international-characters", "title": "Ruby - split on nonalphanumeric characters excluding international characters?", "body": "<p>This is my regex so far which will split on non-alphanumeric characters, including international characters (ie Korean, Japanese, Chinese characters).</p>\n\n<pre><code>title = '[MV] SUNMI(\uc120\ubbf8) _ \ub204\uc544\ub974(Noir)'\ntitle.split(/[^a-zA-Z0-9 ']/)\n</code></pre>\n\n<p>this is the regex to match any international character: </p>\n\n<pre><code>[^\\x00-\\x7F]+\n</code></pre>\n\n<p>Which I got from: <a href=\"https://stackoverflow.com/questions/150033/regular-expression-to-match-non-english-characters\">Regular expression to match non-English characters?</a>  Let'a ssume this is 100% correct (no debating!)</p>\n\n<p>How do I combine these 2 so I can split on non-alphanumeric characters, excluding international characters? The easy part is done. I just need to combine these regex's somehow.</p>\n\n<p>My expected output would be something like this </p>\n\n<pre><code>[\"MV\", \"SUNMI\", \"\uc120\ubbf8\", \"\ub204\uc544\ub974\", \"Noir\"]\n</code></pre>\n\n<p>TLDR: I want to split on non-alphanumeric characters only (english letters, foreign characters should <strong><em>not</em></strong> be split on)</p>\n"}, {"tags": ["ruby", "terminal", "rubygems", "exec", "zsh"], "comments": [{"owner": {"reputation": 1323, "user_id": 8206432, "user_type": "registered", "accept_rate": 91, "profile_image": "https://lh3.googleusercontent.com/-23DNVlLluZk/AAAAAAAAAAI/AAAAAAAAAEo/Ebjepzhl6i8/photo.jpg?sz=128", "display_name": "Jack Moody", "link": "https://stackoverflow.com/users/8206432/jack-moody"}, "edited": false, "score": 0, "creation_date": 1551713825, "post_id": 54986242, "comment_id": 96730818, "body": "You could make a function that takes in the gem name as an argument."}], "answers": [{"comments": [{"owner": {"reputation": 157, "user_id": 11024422, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/72c032deda749bd93bb9140ee96b1d56?s=128&d=identicon&r=PG&f=1", "display_name": "Archit Kithania", "link": "https://stackoverflow.com/users/11024422/archit-kithania"}, "edited": false, "score": 0, "creation_date": 1551716570, "post_id": 54986496, "comment_id": 96732495, "body": "Thanks for your input. But what i was trying to accomplish was have a specific keyword that would be responsible for triggering the gems as u can with <code>npx</code> in node. Thanks again :D"}], "tags": [], "owner": {"reputation": 328, "user_id": 10801839, "user_type": "registered", "profile_image": "https://graph.facebook.com/10215412850533458/picture?type=large", "display_name": "Shahar Glazner", "link": "https://stackoverflow.com/users/10801839/shahar-glazner"}, "is_accepted": false, "score": 0, "last_activity_date": 1551713693, "creation_date": 1551713693, "answer_id": 54986496, "question_id": 54986242, "link": "https://stackoverflow.com/questions/54986242/is-there-a-way-to-define-an-alias-that-executes-a-bin-from-a-specific-folder-in/54986496#54986496", "title": "Is there a way to define an alias that executes a bin from a specific folder in MacOS?", "body": "<p>You can use the fact that Ruby 'install' the binary to central bin directory located at <code>/usr/local/lib/ruby/gems/RUBY_VERSION/bin</code>.</p>\n\n<p>Use <code>gem environment</code> to determine your path:</p>\n\n<pre><code>gem environment\nRubyGems Environment:\n  - RUBYGEMS VERSION: 2.7.7\n  - RUBY VERSION: 2.5.3 (2018-10-18 patchlevel 105) [x86_64-darwin18]\n  - INSTALLATION DIRECTORY: /usr/local/lib/ruby/gems/2.5.0\n  - USER INSTALLATION DIRECTORY: /Users/alice/.gem/ruby/2.5.0\n  - RUBY EXECUTABLE: /usr/local/opt/ruby/bin/ruby\n  - EXECUTABLE DIRECTORY: /usr/local/lib/ruby/gems/2.5.0/bin\n  - SPEC CACHE DIRECTORY: /Users/alice/.gem/specs\n  - SYSTEM CONFIGURATION DIRECTORY: /usr/local/Cellar/ruby/2.5.3_1/etc\n  - RUBYGEMS PLATFORMS:\n    - ruby\n    - x86_64-darwin-18\n  - GEM PATHS:\n     - /usr/local/lib/ruby/gems/2.5.0\n     - /Users/alice/.gem/ruby/2.5.0\n     - /usr/local/Cellar/ruby/2.5.3_1/lib/ruby/gems/2.5.0\n  - GEM CONFIGURATION:\n     - :update_sources =&gt; true\n     - :verbose =&gt; true\n     - :backtrace =&gt; false\n     - :bulk_threshold =&gt; 1000\n  - REMOTE SOURCES:\n     - https://rubygems.org/\n  - SHELL PATH:\n     - /usr/local/opt/ruby/bin\n     - /usr/local/bin\n     - /usr/bin\n     - /bin\n     - /usr/sbin\n     - /sbin\n</code></pre>\n\n<p>Then, you can add ruby <code>bin</code> path into your global <code>bin</code> path and to get what you want - </p>\n\n<pre><code>PATH=\"/usr/local/lib/ruby/gems/2.5.0/bin:$PATH\"\nsolargraph -v\n0.31.3\n</code></pre>\n\n<p>Finally, to make <code>zsh</code> to use this PATH every time you open a shell, add this line into your .zsh_rc file -</p>\n\n<pre><code>echo PATH=\"/usr/local/lib/ruby/gems/2.5.0/bin:$PATH\" &gt;&gt; ~/.zshrc\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 157, "user_id": 11024422, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/72c032deda749bd93bb9140ee96b1d56?s=128&d=identicon&r=PG&f=1", "display_name": "Archit Kithania", "link": "https://stackoverflow.com/users/11024422/archit-kithania"}, "edited": false, "score": 0, "creation_date": 1551716912, "post_id": 54986622, "comment_id": 96732702, "body": "Thanks this seems like what I was looking for but there is still a problem. Defining this function and running <code>gemexec solargraph -v</code> ignores the <code>-v</code> flag and treats the input as <code>gemexec solargraph</code>. Is there a way to pass flags as well using this function approach?"}, {"owner": {"reputation": 1323, "user_id": 8206432, "user_type": "registered", "accept_rate": 91, "profile_image": "https://lh3.googleusercontent.com/-23DNVlLluZk/AAAAAAAAAAI/AAAAAAAAAEo/Ebjepzhl6i8/photo.jpg?sz=128", "display_name": "Jack Moody", "link": "https://stackoverflow.com/users/8206432/jack-moody"}, "reply_to_user": {"reputation": 157, "user_id": 11024422, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/72c032deda749bd93bb9140ee96b1d56?s=128&d=identicon&r=PG&f=1", "display_name": "Archit Kithania", "link": "https://stackoverflow.com/users/11024422/archit-kithania"}, "edited": false, "score": 0, "creation_date": 1551717168, "post_id": 54986622, "comment_id": 96732862, "body": "You can add a space and \u201c$2\u201d to the function"}, {"owner": {"reputation": 157, "user_id": 11024422, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/72c032deda749bd93bb9140ee96b1d56?s=128&d=identicon&r=PG&f=1", "display_name": "Archit Kithania", "link": "https://stackoverflow.com/users/11024422/archit-kithania"}, "edited": false, "score": 0, "creation_date": 1551746630, "post_id": 54986622, "comment_id": 96744475, "body": "Oh nice thanks. I attempted to generalize this to any number of flags and attempted to write some bash script myself but since I am new to this, the script doesn&#39;t seem to work: This is what i wrote:"}, {"owner": {"reputation": 157, "user_id": 11024422, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/72c032deda749bd93bb9140ee96b1d56?s=128&d=identicon&r=PG&f=1", "display_name": "Archit Kithania", "link": "https://stackoverflow.com/users/11024422/archit-kithania"}, "edited": false, "score": 0, "creation_date": 1551746741, "post_id": 54986622, "comment_id": 96744491, "body": "This throws a bad substituion error. I am so sorry for the bad formatting. I dont know how to paste code in comments"}, {"owner": {"reputation": 157, "user_id": 11024422, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/72c032deda749bd93bb9140ee96b1d56?s=128&d=identicon&r=PG&f=1", "display_name": "Archit Kithania", "link": "https://stackoverflow.com/users/11024422/archit-kithania"}, "edited": false, "score": 0, "creation_date": 1551747484, "post_id": 54986622, "comment_id": 96744671, "body": "&lt;code&gt;   function gemexec() {        local execcommand        if [ $# -eq 0 ];then            echo &quot;A Gem Name Required&quot;        elif [ $# -ge 1 ];then            $execcommand=/usr/local/lib/ruby/gems/2.6.0/bin/&quot;$1&quot;            if [ $# -gt 1 ];then                for i in {2..$#};do                    local temp=$execcommand                   $execcommand=&quot;$temp ${$i}&quot;               done           fi       fi       echo $execcommand  }  &lt;\\code&gt;"}, {"owner": {"reputation": 11741, "user_id": 1934428, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/072774c5d4204a1c2385560e6114a887?s=128&d=identicon&r=PG", "display_name": "user1934428", "link": "https://stackoverflow.com/users/1934428/user1934428"}, "edited": false, "score": 0, "creation_date": 1551773921, "post_id": 54986622, "comment_id": 96752302, "body": "Amend your posting to provide the code; as a comment, it is not really readable.  Also point out on which line you get the error."}], "tags": [], "owner": {"reputation": 1323, "user_id": 8206432, "user_type": "registered", "accept_rate": 91, "profile_image": "https://lh3.googleusercontent.com/-23DNVlLluZk/AAAAAAAAAAI/AAAAAAAAAEo/Ebjepzhl6i8/photo.jpg?sz=128", "display_name": "Jack Moody", "link": "https://stackoverflow.com/users/8206432/jack-moody"}, "is_accepted": true, "score": 0, "last_activity_date": 1551714141, "creation_date": 1551714141, "answer_id": 54986622, "question_id": 54986242, "link": "https://stackoverflow.com/questions/54986242/is-there-a-way-to-define-an-alias-that-executes-a-bin-from-a-specific-folder-in/54986622#54986622", "title": "Is there a way to define an alias that executes a bin from a specific folder in MacOS?", "body": "<p>You can make a function that will do this for you and place it in your .zshrc file.</p>\n\n<pre class=\"lang-sh prettyprint-override\"><code>function gemexec() {\n    /usr/local/lib/ruby/gems/2.6.0/bin/\"$1\"\n} \n</code></pre>\n"}], "owner": {"reputation": 157, "user_id": 11024422, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/72c032deda749bd93bb9140ee96b1d56?s=128&d=identicon&r=PG&f=1", "display_name": "Archit Kithania", "link": "https://stackoverflow.com/users/11024422/archit-kithania"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "accepted_answer_id": 54986622, "answer_count": 2, "score": -1, "last_activity_date": 1551714141, "creation_date": 1551712881, "question_id": 54986242, "link": "https://stackoverflow.com/questions/54986242/is-there-a-way-to-define-an-alias-that-executes-a-bin-from-a-specific-folder-in", "title": "Is there a way to define an alias that executes a bin from a specific folder in MacOS?", "body": "<p>I am currently using a Macbook Pro running MacOS Mojave 10.14.3. I have recently gotten into ruby programming but find their whole gem package management a little confusing. When i <code>gem install</code> a package, it installs it in my <code>/usr/local/lib/ruby/gems/2.6.0/bin</code> folder and if I want to execute a gem or get a gem version, for example the <code>solargraph</code> gem, I must type a command: <code>/usr/local/lib/ruby/gems/2.6.0/bin/solargraph -v</code>. I was wondering if there is way for me to define an alias for the path <code>/usr/local/lib/ruby/gems/2.6.0/bin</code> so that I could type something like <code>gemexec solargraph -v</code> which would achieve the same result as <code>/usr/local/lib/ruby/gems/2.6.0/bin/solargraph -v</code>. Thanks for your help. BTW I am using the ZSH shell. </p>\n"}, {"tags": ["ruby", "variables", "task", "capistrano", "environment"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1551711321, "post_id": 54984385, "comment_id": 96729333, "body": "I don&#39;t think <code>fetch</code> will access the environment (although I could be wrong). To access an environment variable, <code>ENV[&#39;environment&#39;]</code> should work. In order to get <code>fetch(:environment)</code> working, you need <code>set :environment, ...</code>"}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 7657570, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/10ce994c900b95093667c43cacca88f1?s=128&d=identicon&r=PG&f=1", "display_name": "Bruno Cambianica", "link": "https://stackoverflow.com/users/7657570/bruno-cambianica"}, "edited": false, "score": 0, "creation_date": 1551710064, "post_id": 54984948, "comment_id": 96728541, "body": "I&#39;m not sure of the syntax, but when i read the documentation, I see that I can only set some defined variables : <a href=\"https://capistranorb.com/documentation/getting-started/configuration/\" rel=\"nofollow noreferrer\">documentation</a>. But I am not sure how to access to default_env variables, do you think that I should try something like <code>#{fetch(:default_env.environment)}</code> ?  I havn&#39;t found the correct syntax in the documentation"}, {"owner": {"reputation": 10688, "user_id": 790884, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/27659e10cd4f89b49d677aacc2ebc064?s=128&d=identicon&r=PG", "display_name": "Thomas Edwards", "link": "https://stackoverflow.com/users/790884/thomas-edwards"}, "reply_to_user": {"reputation": 21, "user_id": 7657570, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/10ce994c900b95093667c43cacca88f1?s=128&d=identicon&r=PG&f=1", "display_name": "Bruno Cambianica", "link": "https://stackoverflow.com/users/7657570/bruno-cambianica"}, "edited": false, "score": 0, "creation_date": 1551710478, "post_id": 54984948, "comment_id": 96728764, "body": "I\u2019m pretty sure you\u2019re doing it right looking at the docs. Very odd."}, {"owner": {"reputation": 21, "user_id": 7657570, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/10ce994c900b95093667c43cacca88f1?s=128&d=identicon&r=PG&f=1", "display_name": "Bruno Cambianica", "link": "https://stackoverflow.com/users/7657570/bruno-cambianica"}, "edited": false, "score": 0, "creation_date": 1551710991, "post_id": 54984948, "comment_id": 96729103, "body": "I am gonna keep looking for a solution, thank you for your help @Thomas"}], "tags": [], "owner": {"reputation": 10688, "user_id": 790884, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/27659e10cd4f89b49d677aacc2ebc064?s=128&d=identicon&r=PG", "display_name": "Thomas Edwards", "link": "https://stackoverflow.com/users/790884/thomas-edwards"}, "is_accepted": false, "score": 0, "last_activity_date": 1551708507, "creation_date": 1551708507, "answer_id": 54984948, "question_id": 54984385, "link": "https://stackoverflow.com/questions/54984385/capistrano-set-and-get-environment-variables-from-config-to-rake/54984948#54984948", "title": "capistrano set and get environment variables from config to rake", "body": "<p>Is it because you\u2019ve set the variable as <code>:default_env</code>, but you\u2019re asking for it as <code>:environment</code>?</p>\n"}, {"tags": [], "owner": {"reputation": 21, "user_id": 7657570, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/10ce994c900b95093667c43cacca88f1?s=128&d=identicon&r=PG&f=1", "display_name": "Bruno Cambianica", "link": "https://stackoverflow.com/users/7657570/bruno-cambianica"}, "is_accepted": true, "score": 0, "last_activity_date": 1551886099, "last_edit_date": 1551886099, "creation_date": 1551773856, "answer_id": 54998212, "question_id": 54984385, "link": "https://stackoverflow.com/questions/54984385/capistrano-set-and-get-environment-variables-from-config-to-rake/54998212#54998212", "title": "capistrano set and get environment variables from config to rake", "body": "<p>Thank you for your answer, I finally got it fixed by using set <code>:environment, \"preprodv1\"</code> Instead of set <code>:default_env</code>, <code>{ 'environment' =&gt; 'preprodv1' }</code> And by keeping <code>#{fetch(:environment)}</code> Thanks a lot for your help :)</p>\n"}, {"comments": [{"owner": {"reputation": 21, "user_id": 7657570, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/10ce994c900b95093667c43cacca88f1?s=128&d=identicon&r=PG&f=1", "display_name": "Bruno Cambianica", "link": "https://stackoverflow.com/users/7657570/bruno-cambianica"}, "edited": false, "score": 0, "creation_date": 1551783635, "post_id": 54998351, "comment_id": 96757854, "body": "I think that I was mixing two syntaxes : <code>set :default_env, {    &#39;environment&#39; =&gt; &#39;preprodv1&#39; }</code> is accessible with : <code>fetch(:default_env)[&#39;environment&#39;]</code> and  <code>set :environment</code> is accessible with :  <code>fetch(:environment)</code>"}], "tags": [], "owner": {"reputation": 277, "user_id": 459336, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6e6ff0efab49be4c6f97b836148fee17?s=128&d=identicon&r=PG", "display_name": "Davinj", "link": "https://stackoverflow.com/users/459336/davinj"}, "is_accepted": false, "score": 0, "last_activity_date": 1551774367, "creation_date": 1551774367, "answer_id": 54998351, "question_id": 54984385, "link": "https://stackoverflow.com/questions/54984385/capistrano-set-and-get-environment-variables-from-config-to-rake/54998351#54998351", "title": "capistrano set and get environment variables from config to rake", "body": "<pre><code>fetch(:default_env)['environment']\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 7657570, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/10ce994c900b95093667c43cacca88f1?s=128&d=identicon&r=PG&f=1", "display_name": "Bruno Cambianica", "link": "https://stackoverflow.com/users/7657570/bruno-cambianica"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 368, "favorite_count": 0, "accepted_answer_id": 54998212, "answer_count": 3, "score": 1, "last_activity_date": 1551886099, "creation_date": 1551706403, "last_edit_date": 1551708468, "question_id": 54984385, "link": "https://stackoverflow.com/questions/54984385/capistrano-set-and-get-environment-variables-from-config-to-rake", "title": "capistrano set and get environment variables from config to rake", "body": "<p>I am trying to define an environment variable in /config/deploy/staging.rb like : </p>\n\n<pre><code>set :default_env, { \n  'environment' =&gt; 'preprodv1'\n}\n</code></pre>\n\n<p>Then I am trying to acces this variable in my file /lib/capistrano/tasks/build.rake like :</p>\n\n<pre><code>desc \"Builds the admin front-end\"\n    task :build_admin_front do\n        on roles (:all) do |host|\n            within \"#{release_path}\" do\n                execute \"cd #{release_path}/front_admin &amp;&amp; npm install &amp;&amp; npm run-script build --env=#{fetch(:environment)}\"\n            end\n        end\n    end\nend\n</code></pre>\n\n<p>But I got this error : undefined local variable or method `environment'</p>\n\n<p>Do you please have any idea of the reason why? \nCan't I access to my environment variable set in rb file from my rake file ?</p>\n\n<p>Thanks a lot for your help!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "postgresql", "ruby-on-rails-3"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1551705661, "post_id": 54983780, "comment_id": 96725990, "body": "Only the development environment reloads code automatically (although not everything). If you make changes to a production system, you shout generally issue a restart. While some parts might fetch the fresh value, others could have cached it."}], "answers": [{"tags": [], "owner": {"reputation": 8517, "user_id": 2336650, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/lpq4b.jpg?s=128&g=1", "display_name": "Mostafa Hussein", "link": "https://stackoverflow.com/users/2336650/mostafa-hussein"}, "is_accepted": false, "score": 2, "last_activity_date": 1551704321, "creation_date": 1551704321, "answer_id": 54983801, "question_id": 54983780, "link": "https://stackoverflow.com/questions/54983780/do-i-need-to-restart-server-ruby-on-rails/54983801#54983801", "title": "Do I need to restart Server : Ruby on Rails", "body": "<p>You need to restart the service which responsible for running your rails application in order to take effects e.g. unicorn, puma or whatever used to run the applicaition. not restarting the whole server itself</p>\n"}, {"tags": [], "owner": {"reputation": 741, "user_id": 7752594, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gU6so.png?s=128&g=1", "display_name": "Vishal", "link": "https://stackoverflow.com/users/7752594/vishal"}, "is_accepted": true, "score": 0, "last_activity_date": 1551707935, "creation_date": 1551707935, "answer_id": 54984795, "question_id": 54983780, "link": "https://stackoverflow.com/questions/54983780/do-i-need-to-restart-server-ruby-on-rails/54984795#54984795", "title": "Do I need to restart Server : Ruby on Rails", "body": "<p>You need to restart you server when you need Rails to be loaded again from the start.</p>\n\n<p>If you're adding or removing gems, then yes, you will need to restart the server.</p>\n\n<p>If you change your version of ruby, change your Gemfile or change something from internal classes of Rails, you will need to restart it, otherwise it should be ok. But if unexpected problems arise, restart the server is the first thing you should try.</p>\n\n<p>Also, on a side-note, you will only see the changes just refreshing the page if config.cache_classes is set to false (which I think is the default for development, but not for production).</p>\n\n<p><strong>Making changes to anything outside of app/ or config/routes.rb or db/ will require a restart.</strong></p>\n"}], "owner": {"reputation": 27, "user_id": 4593290, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/648c4853839b0c8df647b768b077b641?s=128&d=identicon&r=PG&f=1", "display_name": "Tub", "link": "https://stackoverflow.com/users/4593290/tub"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 180, "favorite_count": 0, "accepted_answer_id": 54984795, "answer_count": 2, "score": -5, "last_activity_date": 1551707935, "creation_date": 1551704236, "question_id": 54983780, "link": "https://stackoverflow.com/questions/54983780/do-i-need-to-restart-server-ruby-on-rails", "title": "Do I need to restart Server : Ruby on Rails", "body": "<p>Do I need to restart Server when i change the database host in the database.yml in Ruby on Rails. Database is Postgres.</p>\n\n<p>I haven't worked on Ruby On Rails, and the reason i am asking this is because its a  production server.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "google-sheets-api"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1551704270, "post_id": 54983540, "comment_id": 96725293, "body": "Have you tried a less ambiguous format like yyyy-mm-dd?"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1551704980, "post_id": 54983540, "comment_id": 96725622, "body": "BTW, I&#39;m not sure if you want to retrieve or store data, and if this is a programming issue or a Google Sheets configuration. Could you provide an example spreadsheet and / or show some code to illustrate your problem?"}], "answers": [{"comments": [{"owner": {"reputation": 5312, "user_id": 6535997, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/10156345016155058/picture?type=large", "display_name": "Mark", "link": "https://stackoverflow.com/users/6535997/mark"}, "edited": false, "score": 1, "creation_date": 1551707533, "post_id": 54984564, "comment_id": 96727046, "body": "Personally I find <a href=\"https://foragoodstrftime.com/\" rel=\"nofollow noreferrer\">foragoodstrftime.com</a> the best reference - gives you lots of templates to work from"}], "tags": [], "owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "is_accepted": false, "score": 1, "last_activity_date": 1551707603, "last_edit_date": 1551707603, "creation_date": 1551707024, "answer_id": 54984564, "question_id": 54983540, "link": "https://stackoverflow.com/questions/54983540/how-to-format-multiple-date-type-columns-in-dd-mm-yyyy-using-google-sheets-api-i/54984564#54984564", "title": "How to format multiple Date type columns in dd/mm/yyyy using Google Sheets Api in Ruby?", "body": "<p>You can always deliver the date in the way Google Sheets expects, in your case <code>mm/dd/yyyy</code>.</p>\n\n<p>You can transform a <em>Time</em>, <em>Date</em> or <em>DateTime</em> instances into any format you want by using <a href=\"http://ruby-doc.org/core-2.6.1/Time.html#method-i-strftime\" rel=\"nofollow noreferrer\"><code>#strftime</code></a>. This outputs a string in the provided format. Have a look at <a href=\"http://www.strftime.net/\" rel=\"nofollow noreferrer\">http://www.strftime.net/</a> for the different options and a live demo.</p>\n\n<p>Alternatively you can use the <a href=\"https://guides.rubyonrails.org/i18n.html#the-public-i18n-api\" rel=\"nofollow noreferrer\">localize functionality</a> of Ruby on Rails. This can be done by calling:</p>\n\n<pre><code>I18n.l your_time_variable, format: :default\n</code></pre>\n"}], "owner": {"reputation": 67, "user_id": 6796765, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/T2xdz.jpg?s=128&g=1", "display_name": "hasanadeem", "link": "https://stackoverflow.com/users/6796765/hasanadeem"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 176, "favorite_count": 0, "answer_count": 1, "score": 4, "last_activity_date": 1551707603, "creation_date": 1551703415, "question_id": 54983540, "link": "https://stackoverflow.com/questions/54983540/how-to-format-multiple-date-type-columns-in-dd-mm-yyyy-using-google-sheets-api-i", "title": "How to format multiple Date type columns in dd/mm/yyyy using Google Sheets Api in Ruby?", "body": "<p>I have multiple date type columns like \"User Joining Date\", \"Birthdate\", \"Arrival Date\" etc. These dates are already in dd/mm/yyyy format. \nBut the issue is gsheet interprets date like 02/01/2019 as 1st February 2019 but interprets 13/01/2019 as 13th January 2019 which causes formatting issue. </p>\n\n<p>02/01/2019 is left aligned whereas 13/01/2019 is right aligned. Moreover, this also causes sorting issues.</p>\n\n<p>I've tried changing the locale and language of the spreadsheet but nothing helped.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5", "actionmailer"], "comments": [{"owner": {"reputation": 2487, "user_id": 8098012, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0cbdb5ca9b079de1c9700271166feead?s=128&d=identicon&r=PG", "display_name": "Pavel Mikhailyuk", "link": "https://stackoverflow.com/users/8098012/pavel-mikhailyuk"}, "edited": false, "score": 0, "creation_date": 1551719453, "post_id": 54983468, "comment_id": 96734161, "body": "What is an output of <code>host smtpauth.net4india.com</code> ?"}, {"owner": {"reputation": 362, "user_id": 5749185, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/4c53cab5b48d12fecb4e45e105c5209e?s=128&d=identicon&r=PG&f=1", "display_name": "Rails Developer", "link": "https://stackoverflow.com/users/5749185/rails-developer"}, "edited": false, "score": 0, "creation_date": 1568921639, "post_id": 54983468, "comment_id": 102439255, "body": "I am also getting same error. Did you get the solution to this problem?"}], "owner": {"reputation": 950, "user_id": 4993517, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/cc7c669cf8ed5e60e7443150e3a5b513?s=128&d=identicon&r=PG&f=1", "display_name": "SreRoR", "link": "https://stackoverflow.com/users/4993517/sreror"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 96, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1551718379, "creation_date": 1551703135, "last_edit_date": 1551718379, "question_id": 54983468, "link": "https://stackoverflow.com/questions/54983468/errnoeconnrefused-connection-refused-connect2-for-port-587", "title": "Errno::ECONNREFUSED (Connection refused - connect(2) for port 587", "body": "<p>When I call <code>ContactMailer.contact_us(@user).deliver_later</code> I get:</p>\n\n<blockquote>\n  <p>Errno::ECONNREFUSED (Connection refused - connect(2) for\n  \"282.71.137.66\" port 587):app/controllers/contacts_controller.rb:17:in\n  <code>block in create' app/controllers/contacts_controller.rb:15:in</code>create</p>\n</blockquote>\n\n<p>or sometimes</p>\n\n<blockquote>\n  <p>Net::OpenTimeout execution expired error</p>\n</blockquote>\n\n<p>My appliction.rb file:</p>\n\n<pre><code>config.active_record.raise_in_transactional_callbacks = true\nconfig.time_zone = 'Asia/Kolkata'\nconfig.action_mailer.smtp_settings = {\n  :address =&gt; 'smtpauth.net4india.com',\n  :port =&gt; 587,\n  :domain =&gt; 'pop.net4india.com',\n  :user_name =&gt; \"username@oakridgebs.com\",\n  :password =&gt; \"password\",\n  :authentication =&gt; :plain,\n  :enable_starttls_auto =&gt; true\n}\n</code></pre>\n\n<p>I tried to rescue this error but in this case I am not getting email delivered. Do you know any other solution?</p>\n"}, {"tags": ["ruby", "rake"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 2, "creation_date": 1551699128, "post_id": 54981100, "comment_id": 96722585, "body": "Or you could split <code>init</code> task in two."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1551700337, "post_id": 54981100, "comment_id": 96723209, "body": "Maybe <code>init</code> should rather be a method that is called from within your tasks."}, {"owner": {"reputation": 73, "user_id": 9999934, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7551307acd6cac08b016ebe28fcf5866?s=128&d=identicon&r=PG&f=1", "display_name": "FrostX", "link": "https://stackoverflow.com/users/9999934/frostx"}, "edited": false, "score": 0, "creation_date": 1552628826, "post_id": 54981100, "comment_id": 97090961, "body": "At the end, i did both. Using Methods and splitted it. Thanks"}], "owner": {"reputation": 73, "user_id": 9999934, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7551307acd6cac08b016ebe28fcf5866?s=128&d=identicon&r=PG&f=1", "display_name": "FrostX", "link": "https://stackoverflow.com/users/9999934/frostx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 73, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1551694698, "creation_date": 1551694698, "question_id": 54981100, "link": "https://stackoverflow.com/questions/54981100/get-name-of-original-rake-task-or-pass-argument", "title": "Get name of original rake task or pass argument", "body": "<p>I have a script which I want to call via a rake task like this:</p>\n\n<pre><code>task init_general: %i[call_step validate_step init]\ntask init_sub: %i[call_step validate_step init]\n</code></pre>\n\n<p>If you can see, it is somehow the same. But in the init script, there is a small code piece which should only be executed if init_general is called. Is it possible to pass arguments here like?</p>\n\n<pre><code>task init_general: %i[call_step validate_step init(\"true\")]\ntask init_sub: %i[call_step validate_step init(\"false\")]\n</code></pre>\n\n<p>or define some kind of global parameter which is then valid for all scripts?</p>\n\n<pre><code>task init_general: %i[call_step validate_step init] do\n  my_setting1 = \"true\"\nend\ntask init_sub: %i[call_step validate_step init] do\n  my_setting1 = \"false\"\nend\n</code></pre>\n\n<p>Or to get the orignial task name in the script? Nothing was working so far, so I wanted to ask if i am on the correct way. Thank you.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1551690102, "post_id": 54979568, "comment_id": 96717627, "body": "I&#39;m curious: where does that calendar layout come from? What&#39;s the advantage of aligning the months by day of the week?"}, {"owner": {"reputation": 162, "user_id": 5625947, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a6624a0395d868b2f9a308f8346f0139?s=128&d=identicon&r=PG&f=1", "display_name": "Yewness", "link": "https://stackoverflow.com/users/5625947/yewness"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1551691501, "post_id": 54979568, "comment_id": 96718361, "body": "@Stefan I&#39;ve updated the screenshot. The second one is my current application&#39;s calendar layout. I&#39;m working on a shift scheduling, so my understanding is that it would be more logical to for a manager to schedule shifts by every Wednesday vs every 1st of March."}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1551692126, "post_id": 54979568, "comment_id": 96718728, "body": "Describe the logic behind your calendar."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1551698437, "post_id": 54979568, "comment_id": 96722219, "body": "@Yewness every Wednesday makes sense, but why would you want to select such column of Wednesdays? What do the selected dates (e.g. Mar 3, Jun 2, Sep 1, Nov 3, Dec 1) have in common?"}, {"owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1551722911, "post_id": 54979568, "comment_id": 96735760, "body": "@Stefan: They&#39;re all Tuesdays of the first week of the month (if that week has a Tuesday), where the first week of the month is the week containing the first day of the month (i.e. not using the &quot;commercial week&quot;)."}], "answers": [{"comments": [{"owner": {"reputation": 162, "user_id": 5625947, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a6624a0395d868b2f9a308f8346f0139?s=128&d=identicon&r=PG&f=1", "display_name": "Yewness", "link": "https://stackoverflow.com/users/5625947/yewness"}, "edited": false, "score": 0, "creation_date": 1551692817, "post_id": 54980154, "comment_id": 96719073, "body": "Thanks, the answer works according to what I need. How did you manage to come up this? date.day + (date.wday - date.day + 1) % 7"}, {"owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "reply_to_user": {"reputation": 162, "user_id": 5625947, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a6624a0395d868b2f9a308f8346f0139?s=128&d=identicon&r=PG&f=1", "display_name": "Yewness", "link": "https://stackoverflow.com/users/5625947/yewness"}, "edited": false, "score": 1, "creation_date": 1551693375, "post_id": 54980154, "comment_id": 96719367, "body": "Hmm... Not sure if I&#39;ll be able to explain properly, as it&#39;s mostly intuition. First, every row is offset by the weekday of the first of the month (so column is <code>date.day + something</code>). If 1st is Sunday (0), offset is 0; if 1st is Monday (1), offset is 1; etc. But we don&#39;t have the 1st of the month. Can we know the day of the week of the first of the month if we know the day of the week of an arbitrary day in the month? We know weeks repeat every 7 days, and the remainder is the distance to the 1st."}, {"owner": {"reputation": 162, "user_id": 5625947, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a6624a0395d868b2f9a308f8346f0139?s=128&d=identicon&r=PG&f=1", "display_name": "Yewness", "link": "https://stackoverflow.com/users/5625947/yewness"}, "edited": false, "score": 0, "creation_date": 1551693928, "post_id": 54980154, "comment_id": 96719678, "body": "The structure was beautiful. Thanks for the explanation. :)"}, {"owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "reply_to_user": {"reputation": 162, "user_id": 5625947, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a6624a0395d868b2f9a308f8346f0139?s=128&d=identicon&r=PG&f=1", "display_name": "Yewness", "link": "https://stackoverflow.com/users/5625947/yewness"}, "edited": false, "score": 0, "creation_date": 1551694040, "post_id": 54980154, "comment_id": 96719752, "body": "I almost convinced myself there was an error while comparing my results for 2020 with your 2019 table lol... Never mind, seems it&#39;s all okay."}, {"owner": {"reputation": 162, "user_id": 5625947, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a6624a0395d868b2f9a308f8346f0139?s=128&d=identicon&r=PG&f=1", "display_name": "Yewness", "link": "https://stackoverflow.com/users/5625947/yewness"}, "edited": false, "score": 0, "creation_date": 1551694395, "post_id": 54980154, "comment_id": 96719966, "body": "I&#39;ve updated the latest version for 2020. lol Hope I didn&#39;t confuse others that came looking for the answer as well."}], "tags": [], "owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "is_accepted": true, "score": 2, "last_activity_date": 1551692476, "last_edit_date": 1551692476, "creation_date": 1551691502, "answer_id": 54980154, "question_id": 54979568, "link": "https://stackoverflow.com/questions/54979568/return-same-weekday-vertically-in-the-calendar-ruby-on-rails/54980154#54980154", "title": "Return same weekday vertically in the calendar - Ruby on Rails", "body": "<p>I believe <code>date.day + (date.wday - date.day + 1) % 7</code> comes out as the column number in your calendar. Thus, just select those dates that have the same column:</p>\n\n<pre><code>require 'date'\n\nprivate def column_of(date)\n  date.day + (date.wday - date.day + 1) % 7\nend\ndef dates_from_same_column_as(date, range)\n  column_of_date = column_of(date)\n  range.select { |d| column_of(d) == column_of_date }\nend\n\nyear = Date.parse('2020-01-01')..Date.parse('2020-12-31')\ndate = Date.parse('2020-03-03')\ndates_from_same_column_as(date, year).map(&amp;:to_s)\n# =&gt; [\"2020-03-03\", \"2020-06-02\", \"2020-09-01\", \"2020-11-03\", \"2020-12-01\"]\n</code></pre>\n"}], "owner": {"reputation": 162, "user_id": 5625947, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a6624a0395d868b2f9a308f8346f0139?s=128&d=identicon&r=PG&f=1", "display_name": "Yewness", "link": "https://stackoverflow.com/users/5625947/yewness"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 148, "favorite_count": 0, "accepted_answer_id": 54980154, "answer_count": 1, "score": 1, "last_activity_date": 1551694351, "creation_date": 1551689197, "last_edit_date": 1551694351, "question_id": 54979568, "link": "https://stackoverflow.com/questions/54979568/return-same-weekday-vertically-in-the-calendar-ruby-on-rails", "title": "Return same weekday vertically in the calendar - Ruby on Rails", "body": "<p>I'm looking to return all the dates vertically as shown in the calendar below.</p>\n\n<p><a href=\"https://i.stack.imgur.com/NlL6G.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/NlL6G.png\" alt=\"enter image description here\"></a></p>\n\n<p>For example, if I were to click on Tuesday I should be able to return</p>\n\n<ul>\n<li>03/03/2020</li>\n<li>02/06/2020</li>\n<li>01/09/2020</li>\n<li>03/11/2020</li>\n<li>01/12/2020</li>\n</ul>\n\n<p>Currently I have all the weekday in one whole year, but I haven't figured how to filter the dates that I don't want to based on the calendar shown.</p>\n\n<pre><code>date = Date.parse(\"09-01-2020\").to_date\ndates_selected = (date..date.end_of_year).group_by(&amp;:wday)[date.wday]\n# return all the dates on Wednesday\n\n# filter the dates that are irrelevant\n</code></pre>\n\n<p>Any insight on how I can work this out? Thanks.</p>\n\n<p><strong>Update 1</strong></p>\n\n<p>I used this format because I want to schedule the working day or rest day in a vertical row. I managed to work it out using Javascript to extract the dates. I just wonder if I can return all the dates by using ruby only.</p>\n\n<p><strong>Update 2</strong></p>\n\n<p>To avoid confusion, I'm using year 2020 calendar. Thanks Amadan for pointing out.</p>\n\n<p><a href=\"https://i.stack.imgur.com/p027L.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/p027L.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["ruby", "homebrew"], "comments": [{"owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "edited": false, "score": 2, "creation_date": 1551677090, "post_id": 54977098, "comment_id": 96712836, "body": "Apparently you have both. <code>which ruby</code>, <code>ls -l $(which ruby)</code> and <code>echo $PATH</code> should provide some insight."}], "answers": [{"comments": [{"owner": {"reputation": 40432, "user_id": 1807667, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/976dc9df3ea3d05a18e90f0cd9c29b7a?s=128&d=identicon&r=PG", "display_name": "Ortomala Lokni", "link": "https://stackoverflow.com/users/1807667/ortomala-lokni"}, "edited": false, "score": 1, "creation_date": 1551731918, "post_id": 54977206, "comment_id": 96739812, "body": "Thanks for your detailed answer, can you add a paragraph on the difference between rbenv and rvm?"}, {"owner": {"reputation": 478, "user_id": 9668346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/126d93ec5bb3442bf2f73700bcf88a77?s=128&d=identicon&r=PG&f=1", "display_name": "Vaibhav", "link": "https://stackoverflow.com/users/9668346/vaibhav"}, "reply_to_user": {"reputation": 40432, "user_id": 1807667, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/976dc9df3ea3d05a18e90f0cd9c29b7a?s=128&d=identicon&r=PG", "display_name": "Ortomala Lokni", "link": "https://stackoverflow.com/users/1807667/ortomala-lokni"}, "edited": false, "score": 0, "creation_date": 1551804888, "post_id": 54977206, "comment_id": 96770726, "body": "@OrtomalaLokni there are a lot of articles explaining the details and there are lower level details which I can&#39;t just explain in a paragraph. It would make no sense. Maybe I will write a post and link it here. But I have not written the differences in detail yet. Will do that in time. :-)"}, {"owner": {"reputation": 40432, "user_id": 1807667, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/976dc9df3ea3d05a18e90f0cd9c29b7a?s=128&d=identicon&r=PG", "display_name": "Ortomala Lokni", "link": "https://stackoverflow.com/users/1807667/ortomala-lokni"}, "edited": false, "score": 0, "creation_date": 1551805162, "post_id": 54977206, "comment_id": 96770870, "body": "maybe you can then tell the difference between rbenv and rvm in one sentence?"}, {"owner": {"reputation": 478, "user_id": 9668346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/126d93ec5bb3442bf2f73700bcf88a77?s=128&d=identicon&r=PG&f=1", "display_name": "Vaibhav", "link": "https://stackoverflow.com/users/9668346/vaibhav"}, "reply_to_user": {"reputation": 40432, "user_id": 1807667, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/976dc9df3ea3d05a18e90f0cd9c29b7a?s=128&d=identicon&r=PG", "display_name": "Ortomala Lokni", "link": "https://stackoverflow.com/users/1807667/ortomala-lokni"}, "edited": false, "score": 0, "creation_date": 1551805666, "post_id": 54977206, "comment_id": 96771150, "body": "There are 3 main differences: 1) RVM can get you pre-built binaries while both chruby and rbenv compile Ruby on your system. 2) RVM overrides the shell and basically replaces the &#39;cd&#39; command which can cause issues in itself. Rbenv uses path shims (link is already there in the answer). 3) RVM version files (<code>.rvmrc</code>) are full blown scripts and <i>are executed</i> while rbenv version files (<code>.ruby-version</code>) are simple text files containing the version of ruby to be used in the directory."}, {"owner": {"reputation": 927, "user_id": 6923517, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/6064f371489ac0de97a8c865fa230325?s=128&d=identicon&r=PG&f=1", "display_name": "Yulia", "link": "https://stackoverflow.com/users/6923517/yulia"}, "edited": false, "score": 0, "creation_date": 1604053009, "post_id": 54977206, "comment_id": 114235631, "body": "Additional to point (3) from the previouse answer: Ruby version could be switched for the current shell, current directory and global system. Here is the great article: <a href=\"https://makandracards.com/makandra/21545-rbenv-how-to-switch-to-another-ruby-version-temporarily-per-project-or-globally\" rel=\"nofollow noreferrer\">makandracards.com/makandra/&hellip;</a>"}], "tags": [], "owner": {"reputation": 478, "user_id": 9668346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/126d93ec5bb3442bf2f73700bcf88a77?s=128&d=identicon&r=PG&f=1", "display_name": "Vaibhav", "link": "https://stackoverflow.com/users/9668346/vaibhav"}, "is_accepted": true, "score": 13, "last_activity_date": 1551679868, "last_edit_date": 1551679868, "creation_date": 1551677727, "answer_id": 54977206, "question_id": 54977098, "link": "https://stackoverflow.com/questions/54977098/how-to-change-which-version-of-ruby-i-am-using/54977206#54977206", "title": "How to change which version of Ruby I am using", "body": "<p>You should be using a Ruby version manager to manage multiple versions of Ruby. I prefer using rbenv. Following are the steps to install it on a mac (they are explained in detail about what is being done and why; if you want a shortcut, try running all the commands in sequence but I'd still insist you read through the steps). </p>\n\n<h2><code>rbenv</code></h2>\n\n<p>Before proceeding with the actual installation, remember these points: </p>\n\n<ol>\n<li><code>rbenv</code> in itself does not include the ability to install ruby versions. It only changes ruby version per directory. For installing rubies, you need to install the <strong>ruby-build</strong> tool (which is part of the rbenv project). It is the same for chruby as well which uses another tool to build ruby.</li>\n<li><code>ruby-build</code> has to be installed as a plugin to rbenv.</li>\n<li>In case you need to learn about the tools in detail, here are the links for <a href=\"https://github.com/rbenv/rbenv\" rel=\"noreferrer\">rbenv</a> and <a href=\"https://github.com/rbenv/ruby-build\" rel=\"noreferrer\">ruby-build</a>.</li>\n<li>The installation procedure for both tools (and a lot of other help) is available in the README files for the projects. Refer to those if things don't work for you.</li>\n</ol>\n\n<h3>Installing rbenv</h3>\n\n<p>Run the following command to clone rbenv repo into <code>.rbenv</code> directory in your home directory.</p>\n\n<pre class=\"lang-sh prettyprint-override\"><code>$ git clone https://github.com/rbenv/rbenv.git ~/.rbenv\n</code></pre>\n\n<p>Your system still does not know where rbenv is. Add it to your path by running: </p>\n\n<pre class=\"lang-sh prettyprint-override\"><code>$ echo 'export PATH=\"$HOME/.rbenv/bin:$PATH\"' &gt;&gt; ~/.bash_profile\n</code></pre>\n\n<p>To initialize rbenv so that it can help you with changing rubies when you change directories, run this: </p>\n\n<pre class=\"lang-sh prettyprint-override\"><code>~/.rbenv/bin/rbenv init\n</code></pre>\n\n<p>This should tell you something like this: </p>\n\n<pre class=\"lang-sh prettyprint-override\"><code># Load rbenv automatically by appending\n# the following to ~/.bash_profile:\n\neval \"$(rbenv init -)\"\n</code></pre>\n\n<p>So run this: </p>\n\n<pre class=\"lang-sh prettyprint-override\"><code>echo 'eval \"$(rbenv init -)\"' &gt;&gt; ~/.bash_profile\n</code></pre>\n\n<p>By this point rbenv should be installed. When you run <code>rbenv</code> on the command line, you should get something like this:</p>\n\n<pre class=\"lang-sh prettyprint-override\"><code>$ rbenv\nrbenv 1.1.1-39-g59785f6\nUsage: rbenv &lt;command&gt; [&lt;args&gt;]\n\nSome useful rbenv commands are:\n   commands    List all available rbenv commands\n   local       Set or show the local application-specific Ruby version\n   global      Set or show the global Ruby version\n   shell       Set or show the shell-specific Ruby version\n   rehash      Rehash rbenv shims (run this after installing executables)\n   version     Show the current Ruby version and its origin\n   versions    List all Ruby versions available to rbenv\n   which       Display the full path to an executable\n   whence      List all Ruby versions that contain the given executable\n\nSee `rbenv help &lt;command&gt;' for information on a specific command.\nFor full documentation, see: https://github.com/rbenv/rbenv#readme\n\n</code></pre>\n\n<p><strong>NOTE</strong>: If you get a warning saying that rbenv is not installed, just run <code>source ~/.bash_profile</code>. That will rerun the <code>~/.bash_profile</code> script and get rbenv in your path. You should be able to run <code>rbenv</code> after that without trouble.</p>\n\n<p>Do notice that rbenv does not give an option to install or uninstall rubies yet. For this we need to install <strong>ruby-build</strong>.</p>\n\n<h3>Installing ruby-build</h3>\n\n<p>We need to add the ruby-build package as a rbenv plugin so that we can type <code>rbenv install &lt;ruby version&gt;</code> to install rubies. All you need to do is to create the plugins directory and checkout the git repo for ruby-build in the plugins directory. Run the following: </p>\n\n<pre class=\"lang-sh prettyprint-override\"><code>$ mkdir -p \"$(rbenv root)\"/plugins\n$ git clone https://github.com/rbenv/ruby-build.git \"$(rbenv root)\"/plugins/ruby-build\n</code></pre>\n\n<h3>Testing if rbenv and ruby-build have been installed</h3>\n\n<p>Run rbenv without any arguments on the terminal should now show the install and uninstall commands being available. Something like this:</p>\n\n<pre class=\"lang-sh prettyprint-override\"><code>$ rbenv\nrbenv 1.1.1-39-g59785f6\nUsage: rbenv &lt;command&gt; [&lt;args&gt;]\n\nSome useful rbenv commands are:\n   commands    List all available rbenv commands\n   local       Set or show the local application-specific Ruby version\n   global      Set or show the global Ruby version\n   shell       Set or show the shell-specific Ruby version\n   install     Install a Ruby version using ruby-build\n   uninstall   Uninstall a specific Ruby version\n   rehash      Rehash rbenv shims (run this after installing executables)\n   version     Show the current Ruby version and its origin\n   versions    List all Ruby versions available to rbenv\n   which       Display the full path to an executable\n   whence      List all Ruby versions that contain the given executable\n\nSee `rbenv help &lt;command&gt;' for information on a specific command.\nFor full documentation, see: https://github.com/rbenv/rbenv#readme\n</code></pre>\n\n<p>If you see that output, your rbenv is installed properly. </p>\n\n<h2>Installing ruby</h2>\n\n<p>To install ruby 2.5.3, you could run (wait, don't run it yet):</p>\n\n<pre class=\"lang-sh prettyprint-override\"><code>rbenv install 2.5.3\n</code></pre>\n\n<p>It should output a few lines, take some time and then tell you that version 2.5.3 was installed. However, there is a problem - if the installation fails, especially during compilation, <em>sometimes</em>, the terminal gets stuck and there is no output on the terminal. It just appears to be installing for a long time (forever). To get more info about what is happening, run the following: </p>\n\n<pre class=\"lang-sh prettyprint-override\"><code>rbenv install -f -v 2.5.3\n</code></pre>\n\n<p>The <code>-f</code> argument tells rbenv to force-install the given version. So if it is already installed, rbenv will re-install (basically overwrite) the given version. So if an installation failed, <code>-f</code> will make sure of the installation.</p>\n\n<p>The <code>-v</code> argument tells rbenv to output verbose messages. So everything that ruby-build does (including the compilation process) will be shown to you. Don't be afraid by the word <em>compilation</em> here. It normally compiles fine without troubles and does not alter your system ruby (the one installed with <code>sudo apt install ruby</code> on Linux or the one you get by default on macOS) whether it succeeds or fails.</p>\n\n<h2>Test installation</h2>\n\n<p>Once the installation succeeds, you can run the command below to check which versions are installed (output included in the snippet below):</p>\n\n<pre class=\"lang-sh prettyprint-override\"><code>$ rbenv versions\n  system\n* 2.5.3 (set by /home/ubuntu/.rbenv/version)\n</code></pre>\n\n<p><strong>Note</strong>: On mac, the newly installed ruby will have a different path. </p>\n\n<p>The one with the <code>*</code> in front of it is the one which is active right now. If you run <code>which ruby</code>, you should get a path with a ruby shim. If you are curious, read the <a href=\"https://github.com/rbenv/rbenv#understanding-shims\" rel=\"noreferrer\">rbenv documentation to know what shims are</a>, though you wouldn't have to worry about them. </p>\n\n<pre class=\"lang-sh prettyprint-override\"><code>$ which ruby \n/home/ubuntu/.rbenv/shims/ruby\n</code></pre>\n\n<h2>Configure &amp; Forget</h2>\n\n<p>rbenv is a cool thing to have but to keep writing <code>rbenv shell 2.5.3</code> and <code>rbenv shell 2.4.5</code> every single time is a problem. What you should instead do is set a version of ruby for the directory and forget about rbenv. </p>\n\n<p>You can just create a file named <code>.ruby-version</code> containing one line - the version number of ruby you want to use for all ruby scripts within this directory (and subdirectories). Just cd to the required directory and run:</p>\n\n<pre class=\"lang-sh prettyprint-override\"><code>echo \"2.5.3\" &gt; .ruby-version\n</code></pre>\n\n<p>All ruby scripts within that directory and subdirectories will then use version 2.5.3.</p>\n"}, {"comments": [{"owner": {"reputation": 1223, "user_id": 3012473, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/gSYLc.png?s=128&g=1", "display_name": "buncis", "link": "https://stackoverflow.com/users/3012473/buncis"}, "edited": false, "score": 0, "creation_date": 1551678251, "post_id": 54977222, "comment_id": 96713114, "body": "you could add comment as a comment below the answer. anyway if the answer is helping/work for you you could give it upvotes or make it as correct answer, instead of saying thanks"}, {"owner": {"reputation": 23, "user_id": 10659324, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oQaNt.jpg?s=128&g=1", "display_name": "Andrew", "link": "https://stackoverflow.com/users/10659324/andrew"}, "reply_to_user": {"reputation": 1223, "user_id": 3012473, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/gSYLc.png?s=128&g=1", "display_name": "buncis", "link": "https://stackoverflow.com/users/3012473/buncis"}, "edited": false, "score": 0, "creation_date": 1551679651, "post_id": 54977222, "comment_id": 96713521, "body": "I did upvote it, unfortunately I don&#39;t have enough &#39;karma&#39; for it to register publicly."}, {"owner": {"reputation": 478, "user_id": 9668346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/126d93ec5bb3442bf2f73700bcf88a77?s=128&d=identicon&r=PG&f=1", "display_name": "Vaibhav", "link": "https://stackoverflow.com/users/9668346/vaibhav"}, "edited": false, "score": 0, "creation_date": 1551680013, "post_id": 54977222, "comment_id": 96713649, "body": "Thanks @Andrew :-) Just in case you are looking for Rails deployment someday, I have written a detailed <a href=\"https://vaibhavkaushal.com/rails-deployment/\" rel=\"nofollow noreferrer\">Rails Deployment Guide</a>. The answer I posted is actually a part of that guide. You might refer to that when needed. I hope it will be of help."}], "tags": [], "owner": {"reputation": 23, "user_id": 10659324, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oQaNt.jpg?s=128&g=1", "display_name": "Andrew", "link": "https://stackoverflow.com/users/10659324/andrew"}, "is_accepted": false, "score": 0, "last_activity_date": 1551677861, "creation_date": 1551677861, "answer_id": 54977222, "question_id": 54977098, "link": "https://stackoverflow.com/questions/54977098/how-to-change-which-version-of-ruby-i-am-using/54977222#54977222", "title": "How to change which version of Ruby I am using", "body": "<p>I would like to thank Vaibhav for his informative answer. I have not yet tried to install rbenv but I will absolutely try that. For now I was able to work around this issue by not specifying a ruby version in my gem file. This is a short term workaround but it worked!</p>\n"}], "owner": {"reputation": 23, "user_id": 10659324, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oQaNt.jpg?s=128&g=1", "display_name": "Andrew", "link": "https://stackoverflow.com/users/10659324/andrew"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6877, "favorite_count": 0, "accepted_answer_id": 54977206, "answer_count": 2, "score": 2, "last_activity_date": 1551679868, "creation_date": 1551676911, "last_edit_date": 1551678511, "question_id": 54977098, "link": "https://stackoverflow.com/questions/54977098/how-to-change-which-version-of-ruby-i-am-using", "title": "How to change which version of Ruby I am using", "body": "<p>I need to run 2.5.3. I use brew to manage my ruby installation (as I couldn't get rvm to work on my machine). When I run</p>\n\n<pre><code>$ruby -v\n</code></pre>\n\n<p>I get</p>\n\n<pre><code>ruby 2.3.7p456 (2018-03-28 revision 63024) [universal.x86_64-darwin18]\n</code></pre>\n\n<p>However when I attempt to update it using </p>\n\n<pre><code>brew upgrade ruby\n</code></pre>\n\n<p>I get </p>\n\n<pre><code>Error: ruby 2.6.1 already installed\n</code></pre>\n\n<p>Why is it so inconsistent on what ruby version I really have installed?</p>\n"}, {"tags": ["ruby", "nginx", "amazon-ec2", "ruby-on-rails-5", "rvm"], "comments": [{"owner": {"reputation": 478, "user_id": 9668346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/126d93ec5bb3442bf2f73700bcf88a77?s=128&d=identicon&r=PG&f=1", "display_name": "Vaibhav", "link": "https://stackoverflow.com/users/9668346/vaibhav"}, "edited": false, "score": 2, "creation_date": 1551676847, "post_id": 54976820, "comment_id": 96712775, "body": "Why are you using <code>passenger_ruby &#47;home&#47;ec2-user&#47;.rvm&#47;gems&#47;ruby-2.4.0@rails5.1.2&#47;bin&#47;rails;</code> in the second project!? Isn&#39;t that the rails executable?   I think you ran a <code>chmod -R 777 .</code> on your home directory during your debugging because you got an error somewhere? Those errors are permission issues. You need to close them down."}, {"owner": {"reputation": 2566, "user_id": 1578898, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13d8e2260005e30e823d507385019735?s=128&d=identicon&r=PG", "display_name": "vidur punj", "link": "https://stackoverflow.com/users/1578898/vidur-punj"}, "reply_to_user": {"reputation": 478, "user_id": 9668346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/126d93ec5bb3442bf2f73700bcf88a77?s=128&d=identicon&r=PG&f=1", "display_name": "Vaibhav", "link": "https://stackoverflow.com/users/9668346/vaibhav"}, "edited": false, "score": 0, "creation_date": 1551678519, "post_id": 54976820, "comment_id": 96713179, "body": "yes updated it to: passenger_ruby /home/ec2-user/.rvm/rubies/ruby-2.4.0/bin/ruby;"}, {"owner": {"reputation": 2566, "user_id": 1578898, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13d8e2260005e30e823d507385019735?s=128&d=identicon&r=PG", "display_name": "vidur punj", "link": "https://stackoverflow.com/users/1578898/vidur-punj"}, "reply_to_user": {"reputation": 478, "user_id": 9668346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/126d93ec5bb3442bf2f73700bcf88a77?s=128&d=identicon&r=PG&f=1", "display_name": "Vaibhav", "link": "https://stackoverflow.com/users/9668346/vaibhav"}, "edited": false, "score": 0, "creation_date": 1551678991, "post_id": 54976820, "comment_id": 96713326, "body": "The error is changed to error inside the application  thank you @VaibhavKaushal"}], "owner": {"reputation": 2566, "user_id": 1578898, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13d8e2260005e30e823d507385019735?s=128&d=identicon&r=PG", "display_name": "vidur punj", "link": "https://stackoverflow.com/users/1578898/vidur-punj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 60, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1551675190, "creation_date": 1551675190, "question_id": 54976820, "link": "https://stackoverflow.com/questions/54976820/how-can-i-run-2-projects-with-different-ruby-rails-versions-on-the-same-system-w", "title": "How can I run 2 projects with different ruby/rails versions on the same system with nginx server", "body": "<p>I have \nTwo Rails projects with a different version of ruby and rails in it, <br>\nI am using Nginx server to run these project in production.<br>\nI am using Rvm to maintain different versions of ruby/rails.<br>\nMy nginx.conf is as:<br></p>\n\n<pre><code>server {\n    listen 80;\n    listen [::]:80 ipv6only=on;\n\n    server_name ec2-34-222-63-71.us-west-2.compute.amazonaws.com;\n\n    # Tell Nginx and Passenger where your app's 'public' directory is\n    root /home/ec2-user/apps/tukatech_garmentstore_live/public;\n\n    # Turn on Passenger\n    rails_env    production;\n    passenger_enabled on;\n    passenger_ruby /home/ec2-user/.rvm/gems/ruby-2.3.8@5.0.2/wrappers/ruby;\n\n        # redirect server error pages to the static page /50x.html\n        error_page   500 502 503 504  /50x.html;\n\n        location = /50x.html {\n            root   html;\n        }\n    location ~ /.well-known {\n                allow all;\n        }\n\n}\n</code></pre>\n\n<p>For 2nd project:</p>\n\n<pre><code>server {\n    listen 3000;\nlisten [::]:3000 ipv6only=on;\n\nserver_name ec2-34-222-63-71.us-west-2.compute.amazonaws.com;\n\n# Tell Nginx and Passenger where your app's 'public' directory is\nroot /home/ec2-user/apps/tukaweb/public;\n\n# Turn on Passenger\nrails_env    production;\npassenger_enabled on;\npassenger_ruby /home/ec2-user/.rvm/gems/ruby-2.4.0@rails5.1.2/bin/rails;\n\n    # redirect server error pages to the static page /50x.html\n    error_page   500 502 503 504  /50x.html;\n\n    error_page   500 502 503 504  /50x.html;\n\n    location = /50x.html {\n        root   html;\n    }\nlocation ~ /.well-known {\n            allow all;\n    }\n</code></pre>\n\n<p>}</p>\n\n<p>and when I error.log file of Nginx.</p>\n\n<pre><code>     - /home/ec2-user/.rvm/gems/ruby-2.3.8/gems/passenger-6.0.0 is not secure: it can be modified by user ec2-user\n - /home/ec2-user/.rvm/gems/ruby-2.3.8/gems is not secure: it can be modified by user ec2-user\n - /home/ec2-user/.rvm/gems/ruby-2.3.8 is not secure: it can be modified by user ec2-user\n - /home/ec2-user/.rvm/gems is not secure: it can be modified by user ec2-user\n - /home/ec2-user/.rvm is not secure: it can be modified by user ec2-user\n - /home/ec2-user is not secure: it can be modified by user ec2-user\n</code></pre>\n\n<p>Please correct the thing which I am doing something incorrect the configuration. Thanks in advance</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 2946, "user_id": 1430057, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/Tbizp.jpg?s=128&g=1", "display_name": "Subash", "link": "https://stackoverflow.com/users/1430057/subash"}, "edited": false, "score": 1, "creation_date": 1551667435, "post_id": 54975862, "comment_id": 96710799, "body": "your <code>bundle install</code> works fine without any errors ?"}, {"owner": {"reputation": 5, "user_id": 9776901, "user_type": "registered", "profile_image": "https://graph.facebook.com/2102394886661378/picture?type=large", "display_name": "\uc774\uc131\uc6a9", "link": "https://stackoverflow.com/users/9776901/%ec%9d%b4%ec%84%b1%ec%9a%a9"}, "reply_to_user": {"reputation": 2946, "user_id": 1430057, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/Tbizp.jpg?s=128&g=1", "display_name": "Subash", "link": "https://stackoverflow.com/users/1430057/subash"}, "edited": false, "score": 0, "creation_date": 1551676536, "post_id": 54975862, "comment_id": 96712705, "body": "actually when i did bundle install it had version issues, so I changed the version with 1.3.0."}, {"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1551677272, "post_id": 54975862, "comment_id": 96712879, "body": "What gem&#39;s version did you change? What version did you use before? How did you change the version?"}, {"owner": {"reputation": 5, "user_id": 9776901, "user_type": "registered", "profile_image": "https://graph.facebook.com/2102394886661378/picture?type=large", "display_name": "\uc774\uc131\uc6a9", "link": "https://stackoverflow.com/users/9776901/%ec%9d%b4%ec%84%b1%ec%9a%a9"}, "edited": false, "score": 0, "creation_date": 1551679843, "post_id": 54975862, "comment_id": 96713589, "body": "To be exact, when i did &quot;bundle&quot;  ------&gt;   &quot;rails (~&gt; 4.2) was resolved to 4.2.11, which depends on bundler (&lt; 2.0, &gt;= 1.3.0)&quot;.   So, I uninstalled my current bundler and installed bundler -v 1.3.0 by &quot;gem install bundler -v 1.3.0&quot; command. My gem version is 2.7.6. Technically I did not change my gem version, but my bundler version."}], "owner": {"reputation": 5, "user_id": 9776901, "user_type": "registered", "profile_image": "https://graph.facebook.com/2102394886661378/picture?type=large", "display_name": "\uc774\uc131\uc6a9", "link": "https://stackoverflow.com/users/9776901/%ec%9d%b4%ec%84%b1%ec%9a%a9"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 636, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1551765011, "creation_date": 1551666521, "last_edit_date": 1551765011, "question_id": 54975862, "link": "https://stackoverflow.com/questions/54975862/unable-to-resolve-dependency-issue-on-ror", "title": "Unable to resolve dependency issue on ROR", "body": "<p>I'm fairly new to this <code>ROR</code> application, so please understand if my wordings for describing my problem is not as accurate.</p>\n\n<p>I'm now trying to replicate what the github below is doing. </p>\n\n<p><a href=\"https://github.com/harrystech/prelaunchr\" rel=\"nofollow noreferrer\">https://github.com/harrystech/prelaunchr</a></p>\n\n<p>I'm figuring out with the Developer Setup part, but when I execute</p>\n\n<pre><code>bundle exec rake db:migrate\n</code></pre>\n\n<p>the result in my command is: </p>\n\n<blockquote>\n  <p>Traceback (most recent call last):    20: from\n  /home/leesungyong/.rbenv/versions/2.5.3/bin/rake:23:in <code>&lt;main&gt;'   19:\n  from\n  /home/leesungyong/.rbenv/versions/2.5.3/lib/ruby/2.5.0/rubygems.rb:309:in\n  </code>activate_bin_path'   18: from\n  /home/leesungyong/.rbenv/versions/2.5.3/lib/ruby/2.5.0/rubygems.rb:309:in\n  <code>synchronize'     17: from\n  /home/leesungyong/.rbenv/versions/2.5.3/lib/ruby/2.5.0/rubygems.rb:311:in\n  </code>block in activate_bin_path'  16: from\n  /home/leesungyong/.rbenv/versions/2.5.3/lib/ruby/2.5.0/rubygems.rb:243:in\n  <code>finish_resolve'  15: from\n  /home/leesungyong/.rbenv/versions/2.5.3/lib/ruby/2.5.0/rubygems/request_set.rb:397:in\n  </code>resolve_current'     14: from\n  /home/leesungyong/.rbenv/versions/2.5.3/lib/ruby/2.5.0/rubygems/request_set.rb:385:in\n  <code>resolve'     13: from\n  /home/leesungyong/.rbenv/versions/2.5.3/lib/ruby/2.5.0/rubygems/resolver.rb:188:in\n  </code>resolve'     12: from\n  /home/leesungyong/.rbenv/versions/2.5.3/lib/ruby/2.5.0/rubygems/resolver/molinillo/lib/molinillo/resolver.rb:42:in\n  <code>resolve'     11: from\n  /home/leesungyong/.rbenv/versions/2.5.3/lib/ruby/2.5.0/rubygems/resolver/molinillo/lib/molinillo/resolution.rb:64:in\n  </code>resolve'     10: from\n  /home/leesungyong/.rbenv/versions/2.5.3/lib/ruby/2.5.0/rubygems/resolver/molinillo/lib/molinillo/resolution.rb:106:in\n  <code>start_resolution'     9: from\n  /home/leesungyong/.rbenv/versions/2.5.3/lib/ruby/2.5.0/rubygems/resolver/molinillo/lib/molinillo/resolution.rb:165:in\n  </code>initial_state'    8: from\n  /home/leesungyong/.rbenv/versions/2.5.3/lib/ruby/2.5.0/rubygems/resolver/molinillo/lib/molinillo/delegates/specification_provider.rb:51:in\n  <code>sort_dependencies'    7: from\n  /home/leesungyong/.rbenv/versions/2.5.3/lib/ruby/2.5.0/rubygems/resolver/molinillo/lib/molinillo/delegates/specification_provider.rb:69:in\n  </code>with_no_such_dependency_error_handling'   6: from\n  /home/leesungyong/.rbenv/versions/2.5.3/lib/ruby/2.5.0/rubygems/resolver/molinillo/lib/molinillo/delegates/specification_provider.rb:52:in\n  <code>block in sort_dependencies'   5: from\n  /home/leesungyong/.rbenv/versions/2.5.3/lib/ruby/2.5.0/rubygems/resolver.rb:277:in\n  </code>sort_dependencies'    4: from\n  /home/leesungyong/.rbenv/versions/2.5.3/lib/ruby/2.5.0/rubygems/resolver.rb:277:in\n  <code>with_index'   3: from\n  /home/leesungyong/.rbenv/versions/2.5.3/lib/ruby/2.5.0/rubygems/resolver.rb:277:in\n  </code>sort_by'      2: from\n  /home/leesungyong/.rbenv/versions/2.5.3/lib/ruby/2.5.0/rubygems/resolver.rb:277:in\n  <code>each'     1: from\n  /home/leesungyong/.rbenv/versions/2.5.3/lib/ruby/2.5.0/rubygems/resolver.rb:283:in\n  </code>block in sort_dependencies'\n  /home/leesungyong/.rbenv/versions/2.5.3/lib/ruby/2.5.0/rubygems/resolver.rb:231:in\n  `search_for': Unable to resolve dependency: user requested\n  'did_you_mean (= 1.2.0)' (Gem::UnsatisfiableDependencyError)</p>\n</blockquote>\n\n<p>By the way I'm using ubuntu.. </p>\n\n<p>Okay, I had some progress on the error. I found out that there might be a version error with my bundler, and that I have to use <strong>bundler -v 1.15.0.pre.3</strong> . So i did as following, but this time , when i do </p>\n\n<pre><code>bundle exec rake db:create\n</code></pre>\n\n<p>the output is</p>\n\n<pre><code>could not connect to server: Connection refused\n    Is the server running on host \"localhost\" (127.0.0.1) and accepting\n    TCP/IP connections on port 5432?\n/home/leesungyong/.rbenv/versions/2.5.3/lib/ruby/gems/2.5.0/gems/activerecord-4.2.11/lib/active_record/connection_adapters/postgresql_adapter.rb:651:in `initialize'\n/home/leesungyong/.rbenv/versions/2.5.3/lib/ruby/gems/2.5.0/gems/activerecord-4.2.11/lib/active_record/connection_adapters/postgresql_adapter.rb:651:in `new'\n/home/leesungyong/.rbenv/versions/2.5.3/lib/ruby/gems/2.5.0/gems/activerecord-4.2.11/lib/active_record/connection_adapters/postgresql_adapter.rb:651:in `connect'\n/home/leesungyong/.rbenv/versions/2.5.3/lib/ruby/gems/2.5.0/gems/activerecord-4.2.11/lib/active_record/connection_adapters/postgresql_adapter.rb:242:in `initialize'\n/home/leesungyong/.rbenv/versions/2.5.3/lib/ruby/gems/2.5.0/gems/activerecord-4.2.11/lib/active_record/connection_adapters/postgresql_adapter.rb:44:in `new'\n/home/leesungyong/.rbenv/versions/2.5.3/lib/ruby/gems/2.5.0/gems/activerecord-4.2.11/lib/active_record/connection_adapters/postgresql_adapter.rb:44:in `postgresql_connection'\n/home/leesungyong/.rbenv/versions/2.5.3/lib/ruby/gems/2.5.0/gems/activerecord-4.2.11/lib/active_record/connection_adapters/abstract/connection_pool.rb:438:in `new_connection'\n/home/leesungyong/.rbenv/versions/2.5.3/lib/ruby/gems/2.5.0/gems/activerecord-4.2.11/lib/active_record/connection_adapters/abstract/connection_pool.rb:448:in `checkout_new_connection'\n/home/leesungyong/.rbenv/versions/2.5.3/lib/ruby/gems/2.5.0/gems/activerecord-4.2.11/lib/active_record/connection_adapters/abstract/connection_pool.rb:422:in `acquire_connection'\n/home/leesungyong/.rbenv/versions/2.5.3/lib/ruby/gems/2.5.0/gems/activerecord-4.2.11/lib/active_record/connection_adapters/abstract/connection_pool.rb:349:in `block in checkout'\n/home/leesungyong/.rbenv/versions/2.5.3/lib/ruby/2.5.0/monitor.rb:226:in `mon_synchronize'\n/home/leesungyong/.rbenv/versions/2.5.3/lib/ruby/gems/2.5.0/gems/activerecord-4.2.11/lib/active_record/connection_adapters/abstract/connection_pool.rb:348:in `checkout'\n/home/leesungyong/.rbenv/versions/2.5.3/lib/ruby/gems/2.5.0/gems/activerecord-4.2.11/lib/active_record/connection_adapters/abstract/connection_pool.rb:263:in `block in connection'\n/home/leesungyong/.rbenv/versions/2.5.3/lib/ruby/2.5.0/monitor.rb:226:in `mon_synchronize'\n/home/leesungyong/.rbenv/versions/2.5.3/lib/ruby/gems/2.5.0/gems/activerecord-4.2.11/lib/active_record/connection_adapters/abstract/connection_pool.rb:262:in `connection'\n/home/leesungyong/.rbenv/versions/2.5.3/lib/ruby/gems/2.5.0/gems/activerecord-4.2.11/lib/active_record/connection_adapters/abstract/connection_pool.rb:571:in `retrieve_connection'\n/home/leesungyong/.rbenv/versions/2.5.3/lib/ruby/gems/2.5.0/gems/activerecord-4.2.11/lib/active_record/connection_handling.rb:113:in `retrieve_connection'\n/home/leesungyong/.rbenv/versions/2.5.3/lib/ruby/gems/2.5.0/gems/activerecord-4.2.11/lib/active_record/connection_handling.rb:87:in `connection'\n/home/leesungyong/.rbenv/versions/2.5.3/lib/ruby/gems/2.5.0/gems/activerecord-4.2.11/lib/active_record/tasks/postgresql_database_tasks.rb:6:in `connection'\n/home/leesungyong/.rbenv/versions/2.5.3/lib/ruby/gems/2.5.0/gems/activerecord-4.2.11/lib/active_record/tasks/postgresql_database_tasks.rb:15:in `create'\n/home/leesungyong/.rbenv/versions/2.5.3/lib/ruby/gems/2.5.0/gems/activerecord-4.2.11/lib/active_record/tasks/database_tasks.rb:93:in `create'\n/home/leesungyong/.rbenv/versions/2.5.3/lib/ruby/gems/2.5.0/gems/activerecord-4.2.11/lib/active_record/tasks/database_tasks.rb:107:in `block in create_current'\n/home/leesungyong/.rbenv/versions/2.5.3/lib/ruby/gems/2.5.0/gems/activerecord-4.2.11/lib/active_record/tasks/database_tasks.rb:278:in `block in each_current_configuration'\n/home/leesungyong/.rbenv/versions/2.5.3/lib/ruby/gems/2.5.0/gems/activerecord-4.2.11/lib/active_record/tasks/database_tasks.rb:277:in `each'\n/home/leesungyong/.rbenv/versions/2.5.3/lib/ruby/gems/2.5.0/gems/activerecord-4.2.11/lib/active_record/tasks/database_tasks.rb:277:in `each_current_configuration'\n/home/leesungyong/.rbenv/versions/2.5.3/lib/ruby/gems/2.5.0/gems/activerecord-4.2.11/lib/active_record/tasks/database_tasks.rb:106:in `create_current'\n/home/leesungyong/.rbenv/versions/2.5.3/lib/ruby/gems/2.5.0/gems/activerecord-4.2.11/lib/active_record/railties/databases.rake:17:in `block (2 levels) in &lt;top (required)&gt;'\n/home/leesungyong/.rbenv/versions/2.5.3/lib/ruby/gems/2.5.0/gems/rake-12.3.2/lib/rake/task.rb:273:in `block in execute'\n/home/leesungyong/.rbenv/versions/2.5.3/lib/ruby/gems/2.5.0/gems/rake-12.3.2/lib/rake/task.rb:273:in `each'\n/home/leesungyong/.rbenv/versions/2.5.3/lib/ruby/gems/2.5.0/gems/rake-12.3.2/lib/rake/task.rb:273:in `execute'\n/home/leesungyong/.rbenv/versions/2.5.3/lib/ruby/gems/2.5.0/gems/rake-12.3.2/lib/rake/task.rb:214:in `block in invoke_with_call_chain'\n/home/leesungyong/.rbenv/versions/2.5.3/lib/ruby/2.5.0/monitor.rb:226:in `mon_synchronize'\n/home/leesungyong/.rbenv/versions/2.5.3/lib/ruby/gems/2.5.0/gems/rake-12.3.2/lib/rake/task.rb:194:in `invoke_with_call_chain'\n/home/leesungyong/.rbenv/versions/2.5.3/lib/ruby/gems/2.5.0/gems/rake-12.3.2/lib/rake/task.rb:183:in `invoke'\n/home/leesungyong/.rbenv/versions/2.5.3/lib/ruby/gems/2.5.0/gems/rake-12.3.2/lib/rake/application.rb:160:in `invoke_task'\n/home/leesungyong/.rbenv/versions/2.5.3/lib/ruby/gems/2.5.0/gems/rake-12.3.2/lib/rake/application.rb:116:in `block (2 levels) in top_level'\n/home/leesungyong/.rbenv/versions/2.5.3/lib/ruby/gems/2.5.0/gems/rake-12.3.2/lib/rake/application.rb:116:in `each'\n/home/leesungyong/.rbenv/versions/2.5.3/lib/ruby/gems/2.5.0/gems/rake-12.3.2/lib/rake/application.rb:116:in `block in top_level'\n/home/leesungyong/.rbenv/versions/2.5.3/lib/ruby/gems/2.5.0/gems/rake-12.3.2/lib/rake/application.rb:125:in `run_with_threads'\n/home/leesungyong/.rbenv/versions/2.5.3/lib/ruby/gems/2.5.0/gems/rake-12.3.2/lib/rake/application.rb:110:in `top_level'\n/home/leesungyong/.rbenv/versions/2.5.3/lib/ruby/gems/2.5.0/gems/rake-12.3.2/lib/rake/application.rb:83:in `block in run'\n/home/leesungyong/.rbenv/versions/2.5.3/lib/ruby/gems/2.5.0/gems/rake-12.3.2/lib/rake/application.rb:186:in `standard_exception_handling'\n/home/leesungyong/.rbenv/versions/2.5.3/lib/ruby/gems/2.5.0/gems/rake-12.3.2/lib/rake/application.rb:80:in `run'\n/home/leesungyong/.rbenv/versions/2.5.3/lib/ruby/gems/2.5.0/gems/rake-12.3.2/exe/rake:27:in `&lt;top (required)&gt;'\n/home/leesungyong/.rbenv/versions/2.5.3/bin/rake:23:in `load'\n/home/leesungyong/.rbenv/versions/2.5.3/bin/rake:23:in `&lt;top (required)&gt;'\n/home/leesungyong/.rbenv/versions/2.5.3/lib/ruby/gems/2.5.0/gems/bundler-1.15.0.pre.3/lib/bundler/cli/exec.rb:74:in `load'\n/home/leesungyong/.rbenv/versions/2.5.3/lib/ruby/gems/2.5.0/gems/bundler-1.15.0.pre.3/lib/bundler/cli/exec.rb:74:in `kernel_load'\n/home/leesungyong/.rbenv/versions/2.5.3/lib/ruby/gems/2.5.0/gems/bundler-1.15.0.pre.3/lib/bundler/cli/exec.rb:27:in `run'\n/home/leesungyong/.rbenv/versions/2.5.3/lib/ruby/gems/2.5.0/gems/bundler-1.15.0.pre.3/lib/bundler/cli.rb:360:in `exec'\n/home/leesungyong/.rbenv/versions/2.5.3/lib/ruby/gems/2.5.0/gems/bundler-1.15.0.pre.3/lib/bundler/vendor/thor/lib/thor/command.rb:27:in `run'\n/home/leesungyong/.rbenv/versions/2.5.3/lib/ruby/gems/2.5.0/gems/bundler-1.15.0.pre.3/lib/bundler/vendor/thor/lib/thor/invocation.rb:126:in `invoke_command'\n/home/leesungyong/.rbenv/versions/2.5.3/lib/ruby/gems/2.5.0/gems/bundler-1.15.0.pre.3/lib/bundler/vendor/thor/lib/thor.rb:369:in `dispatch'\n/home/leesungyong/.rbenv/versions/2.5.3/lib/ruby/gems/2.5.0/gems/bundler-1.15.0.pre.3/lib/bundler/cli.rb:20:in `dispatch'\n/home/leesungyong/.rbenv/versions/2.5.3/lib/ruby/gems/2.5.0/gems/bundler-1.15.0.pre.3/lib/bundler/vendor/thor/lib/thor/base.rb:444:in `start'\n/home/leesungyong/.rbenv/versions/2.5.3/lib/ruby/gems/2.5.0/gems/bundler-1.15.0.pre.3/lib/bundler/cli.rb:10:in `start'\n/home/leesungyong/.rbenv/versions/2.5.3/lib/ruby/gems/2.5.0/gems/bundler-1.15.0.pre.3/exe/bundle:35:in `block in &lt;top (required)&gt;'\n/home/leesungyong/.rbenv/versions/2.5.3/lib/ruby/gems/2.5.0/gems/bundler-1.15.0.pre.3/lib/bundler/friendly_errors.rb:121:in `with_friendly_errors'\n/home/leesungyong/.rbenv/versions/2.5.3/lib/ruby/gems/2.5.0/gems/bundler-1.15.0.pre.3/exe/bundle:27:in `&lt;top (required)&gt;'\n/home/leesungyong/.rbenv/versions/2.5.3/bin/bundle:23:in `load'\n/home/leesungyong/.rbenv/versions/2.5.3/bin/bundle:23:in `&lt;main&gt;'\nCouldn't create database for {\"adapter\"=&gt;\"postgresql\", \"database\"=&gt;\"prelaunchr_development\", \"host\"=&gt;\"localhost\"}\ncould not connect to server: Connection refused\n    Is the server running on host \"localhost\" (127.0.0.1) and accepting\n    TCP/IP connections on port 5432?\n/home/leesungyong/.rbenv/versions/2.5.3/lib/ruby/gems/2.5.0/gems/activerecord-4.2.11/lib/active_record/connection_adapters/postgresql_adapter.rb:651:in `initialize'\n/home/leesungyong/.rbenv/versions/2.5.3/lib/ruby/gems/2.5.0/gems/activerecord-4.2.11/lib/active_record/connection_adapters/postgresql_adapter.rb:651:in `new'\n/home/leesungyong/.rbenv/versions/2.5.3/lib/ruby/gems/2.5.0/gems/activerecord-4.2.11/lib/active_record/connection_adapters/postgresql_adapter.rb:651:in `connect'\n/home/leesungyong/.rbenv/versions/2.5.3/lib/ruby/gems/2.5.0/gems/activerecord-4.2.11/lib/active_record/connection_adapters/postgresql_adapter.rb:242:in `initialize'\n/home/leesungyong/.rbenv/versions/2.5.3/lib/ruby/gems/2.5.0/gems/activerecord-4.2.11/lib/active_record/connection_adapters/postgresql_adapter.rb:44:in `new'\n/home/leesungyong/.rbenv/versions/2.5.3/lib/ruby/gems/2.5.0/gems/activerecord-4.2.11/lib/active_record/connection_adapters/postgresql_adapter.rb:44:in `postgresql_connection'\n/home/leesungyong/.rbenv/versions/2.5.3/lib/ruby/gems/2.5.0/gems/activerecord-4.2.11/lib/active_record/connection_adapters/abstract/connection_pool.rb:438:in `new_connection'\n/home/leesungyong/.rbenv/versions/2.5.3/lib/ruby/gems/2.5.0/gems/activerecord-4.2.11/lib/active_record/connection_adapters/abstract/connection_pool.rb:448:in `checkout_new_connection'\n/home/leesungyong/.rbenv/versions/2.5.3/lib/ruby/gems/2.5.0/gems/activerecord-4.2.11/lib/active_record/connection_adapters/abstract/connection_pool.rb:422:in `acquire_connection'\n/home/leesungyong/.rbenv/versions/2.5.3/lib/ruby/gems/2.5.0/gems/activerecord-4.2.11/lib/active_record/connection_adapters/abstract/connection_pool.rb:349:in `block in checkout'\n/home/leesungyong/.rbenv/versions/2.5.3/lib/ruby/2.5.0/monitor.rb:226:in `mon_synchronize'\n/home/leesungyong/.rbenv/versions/2.5.3/lib/ruby/gems/2.5.0/gems/activerecord-4.2.11/lib/active_record/connection_adapters/abstract/connection_pool.rb:348:in `checkout'\n/home/leesungyong/.rbenv/versions/2.5.3/lib/ruby/gems/2.5.0/gems/activerecord-4.2.11/lib/active_record/connection_adapters/abstract/connection_pool.rb:263:in `block in connection'\n/home/leesungyong/.rbenv/versions/2.5.3/lib/ruby/2.5.0/monitor.rb:226:in `mon_synchronize'\n/home/leesungyong/.rbenv/versions/2.5.3/lib/ruby/gems/2.5.0/gems/activerecord-4.2.11/lib/active_record/connection_adapters/abstract/connection_pool.rb:262:in `connection'\n/home/leesungyong/.rbenv/versions/2.5.3/lib/ruby/gems/2.5.0/gems/activerecord-4.2.11/lib/active_record/connection_adapters/abstract/connection_pool.rb:571:in `retrieve_connection'\n/home/leesungyong/.rbenv/versions/2.5.3/lib/ruby/gems/2.5.0/gems/activerecord-4.2.11/lib/active_record/connection_handling.rb:113:in `retrieve_connection'\n/home/leesungyong/.rbenv/versions/2.5.3/lib/ruby/gems/2.5.0/gems/activerecord-4.2.11/lib/active_record/connection_handling.rb:87:in `connection'\n/home/leesungyong/.rbenv/versions/2.5.3/lib/ruby/gems/2.5.0/gems/activerecord-4.2.11/lib/active_record/tasks/postgresql_database_tasks.rb:6:in `connection'\n/home/leesungyong/.rbenv/versions/2.5.3/lib/ruby/gems/2.5.0/gems/activerecord-4.2.11/lib/active_record/tasks/postgresql_database_tasks.rb:15:in `create'\n/home/leesungyong/.rbenv/versions/2.5.3/lib/ruby/gems/2.5.0/gems/activerecord-4.2.11/lib/active_record/tasks/database_tasks.rb:93:in `create'\n/home/leesungyong/.rbenv/versions/2.5.3/lib/ruby/gems/2.5.0/gems/activerecord-4.2.11/lib/active_record/tasks/database_tasks.rb:107:in `block in create_current'\n/home/leesungyong/.rbenv/versions/2.5.3/lib/ruby/gems/2.5.0/gems/activerecord-4.2.11/lib/active_record/tasks/database_tasks.rb:278:in `block in each_current_configuration'\n/home/leesungyong/.rbenv/versions/2.5.3/lib/ruby/gems/2.5.0/gems/activerecord-4.2.11/lib/active_record/tasks/database_tasks.rb:277:in `each'\n/home/leesungyong/.rbenv/versions/2.5.3/lib/ruby/gems/2.5.0/gems/activerecord-4.2.11/lib/active_record/tasks/database_tasks.rb:277:in `each_current_configuration'\n/home/leesungyong/.rbenv/versions/2.5.3/lib/ruby/gems/2.5.0/gems/activerecord-4.2.11/lib/active_record/tasks/database_tasks.rb:106:in `create_current'\n/home/leesungyong/.rbenv/versions/2.5.3/lib/ruby/gems/2.5.0/gems/activerecord-4.2.11/lib/active_record/railties/databases.rake:17:in `block (2 levels) in &lt;top (required)&gt;'\n/home/leesungyong/.rbenv/versions/2.5.3/lib/ruby/gems/2.5.0/gems/rake-12.3.2/lib/rake/task.rb:273:in `block in execute'\n/home/leesungyong/.rbenv/versions/2.5.3/lib/ruby/gems/2.5.0/gems/rake-12.3.2/lib/rake/task.rb:273:in `each'\n/home/leesungyong/.rbenv/versions/2.5.3/lib/ruby/gems/2.5.0/gems/rake-12.3.2/lib/rake/task.rb:273:in `execute'\n/home/leesungyong/.rbenv/versions/2.5.3/lib/ruby/gems/2.5.0/gems/rake-12.3.2/lib/rake/task.rb:214:in `block in invoke_with_call_chain'\n/home/leesungyong/.rbenv/versions/2.5.3/lib/ruby/2.5.0/monitor.rb:226:in `mon_synchronize'\n/home/leesungyong/.rbenv/versions/2.5.3/lib/ruby/gems/2.5.0/gems/rake-12.3.2/lib/rake/task.rb:194:in `invoke_with_call_chain'\n/home/leesungyong/.rbenv/versions/2.5.3/lib/ruby/gems/2.5.0/gems/rake-12.3.2/lib/rake/task.rb:183:in `invoke'\n/home/leesungyong/.rbenv/versions/2.5.3/lib/ruby/gems/2.5.0/gems/rake-12.3.2/lib/rake/application.rb:160:in `invoke_task'\n/home/leesungyong/.rbenv/versions/2.5.3/lib/ruby/gems/2.5.0/gems/rake-12.3.2/lib/rake/application.rb:116:in `block (2 levels) in top_level'\n/home/leesungyong/.rbenv/versions/2.5.3/lib/ruby/gems/2.5.0/gems/rake-12.3.2/lib/rake/application.rb:116:in `each'\n/home/leesungyong/.rbenv/versions/2.5.3/lib/ruby/gems/2.5.0/gems/rake-12.3.2/lib/rake/application.rb:116:in `block in top_level'\n/home/leesungyong/.rbenv/versions/2.5.3/lib/ruby/gems/2.5.0/gems/rake-12.3.2/lib/rake/application.rb:125:in `run_with_threads'\n/home/leesungyong/.rbenv/versions/2.5.3/lib/ruby/gems/2.5.0/gems/rake-12.3.2/lib/rake/application.rb:110:in `top_level'\n/home/leesungyong/.rbenv/versions/2.5.3/lib/ruby/gems/2.5.0/gems/rake-12.3.2/lib/rake/application.rb:83:in `block in run'\n/home/leesungyong/.rbenv/versions/2.5.3/lib/ruby/gems/2.5.0/gems/rake-12.3.2/lib/rake/application.rb:186:in `standard_exception_handling'\n/home/leesungyong/.rbenv/versions/2.5.3/lib/ruby/gems/2.5.0/gems/rake-12.3.2/lib/rake/application.rb:80:in `run'\n/home/leesungyong/.rbenv/versions/2.5.3/lib/ruby/gems/2.5.0/gems/rake-12.3.2/exe/rake:27:in `&lt;top (required)&gt;'\n/home/leesungyong/.rbenv/versions/2.5.3/bin/rake:23:in `load'\n/home/leesungyong/.rbenv/versions/2.5.3/bin/rake:23:in `&lt;top (required)&gt;'\n/home/leesungyong/.rbenv/versions/2.5.3/lib/ruby/gems/2.5.0/gems/bundler-1.15.0.pre.3/lib/bundler/cli/exec.rb:74:in `load'\n/home/leesungyong/.rbenv/versions/2.5.3/lib/ruby/gems/2.5.0/gems/bundler-1.15.0.pre.3/lib/bundler/cli/exec.rb:74:in `kernel_load'\n/home/leesungyong/.rbenv/versions/2.5.3/lib/ruby/gems/2.5.0/gems/bundler-1.15.0.pre.3/lib/bundler/cli/exec.rb:27:in `run'\n/home/leesungyong/.rbenv/versions/2.5.3/lib/ruby/gems/2.5.0/gems/bundler-1.15.0.pre.3/lib/bundler/cli.rb:360:in `exec'\n/home/leesungyong/.rbenv/versions/2.5.3/lib/ruby/gems/2.5.0/gems/bundler-1.15.0.pre.3/lib/bundler/vendor/thor/lib/thor/command.rb:27:in `run'\n/home/leesungyong/.rbenv/versions/2.5.3/lib/ruby/gems/2.5.0/gems/bundler-1.15.0.pre.3/lib/bundler/vendor/thor/lib/thor/invocation.rb:126:in `invoke_command'\n/home/leesungyong/.rbenv/versions/2.5.3/lib/ruby/gems/2.5.0/gems/bundler-1.15.0.pre.3/lib/bundler/vendor/thor/lib/thor.rb:369:in `dispatch'\n/home/leesungyong/.rbenv/versions/2.5.3/lib/ruby/gems/2.5.0/gems/bundler-1.15.0.pre.3/lib/bundler/cli.rb:20:in `dispatch'\n/home/leesungyong/.rbenv/versions/2.5.3/lib/ruby/gems/2.5.0/gems/bundler-1.15.0.pre.3/lib/bundler/vendor/thor/lib/thor/base.rb:444:in `start'\n/home/leesungyong/.rbenv/versions/2.5.3/lib/ruby/gems/2.5.0/gems/bundler-1.15.0.pre.3/lib/bundler/cli.rb:10:in `start'\n/home/leesungyong/.rbenv/versions/2.5.3/lib/ruby/gems/2.5.0/gems/bundler-1.15.0.pre.3/exe/bundle:35:in `block in &lt;top (required)&gt;'\n/home/leesungyong/.rbenv/versions/2.5.3/lib/ruby/gems/2.5.0/gems/bundler-1.15.0.pre.3/lib/bundler/friendly_errors.rb:121:in `with_friendly_errors'\n/home/leesungyong/.rbenv/versions/2.5.3/lib/ruby/gems/2.5.0/gems/bundler-1.15.0.pre.3/exe/bundle:27:in `&lt;top (required)&gt;'\n/home/leesungyong/.rbenv/versions/2.5.3/bin/bundle:23:in `load'\n/home/leesungyong/.rbenv/versions/2.5.3/bin/bundle:23:in `&lt;main&gt;'\nCouldn't create database for {\"adapter\"=&gt;\"postgresql\", \"database\"=&gt;\"prelaunchr_test\", \"host\"=&gt;\"localhost\"}\n</code></pre>\n\n<p>I'm getting really tired of this ROR building..  can someone please help me with the build?? </p>\n"}, {"tags": ["ruby", "yield", "ruby-block"], "comments": [{"owner": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "edited": false, "score": 0, "creation_date": 1551669735, "post_id": 54975857, "comment_id": 96711279, "body": "You can use either form, interchangeably."}, {"owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "edited": false, "score": 1, "creation_date": 1551672024, "post_id": 54975857, "comment_id": 96711723, "body": "<code>&amp;block</code> parameter is <i>always</i> an optional parameter, with or without <code>block_given?</code>. However, running <code>block.call</code> (or <code>yield</code>, for that matter) when <code>block</code> is <code>nil</code> (which is the default value when it is not provided) will break things; so when <code>&amp;block</code> is used, usually you&#39;ll <i>want</i> to check <code>block_given?</code>. Thus, you have a case of <i>reverse causality</i>: It&#39;s not that <code>block_given?</code> causes <code>&amp;block</code> to be optional; it&#39;s that <code>&amp;block</code> being optional makes programmers use <code>block_given?</code>."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "reply_to_user": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "edited": false, "score": 0, "creation_date": 1551686858, "post_id": 54975857, "comment_id": 96716173, "body": "@Amadan you can simply check via <code>if block</code> in that case."}, {"owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1551687179, "post_id": 54975857, "comment_id": 96716303, "body": "@Stefan: Yes, AFAIK the two are synonymous if there is an explicit block parameter. Maybe I was misreading OP&#39;s question? If OP meant &quot;Is <code>&amp;block</code> rendered <i>unnecessary</i> by <code>block_given?</code>&quot;, then here, in a way, the answer is yes."}], "answers": [{"comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1551689320, "post_id": 54976209, "comment_id": 96717232, "body": "Wonder why they didn&#39;t use <code>inject(identity) { |sum, e| sum + yield(e) }</code> instead and a default <code>identity</code> value of <code>0</code> instead of <code>nil</code>."}], "tags": [], "owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "is_accepted": false, "score": 3, "last_activity_date": 1551669815, "creation_date": 1551669815, "answer_id": 54976209, "question_id": 54975857, "link": "https://stackoverflow.com/questions/54975857/does-block-given-render-block-parameter-optional/54976209#54976209", "title": "Does `block_given?` render `&amp;block` parameter optional?", "body": "<p>Generally, you only use the <code>&amp;block</code> argument if you need to pass the block to another method such as in this made example:</p>\n\n<pre><code>def m(&amp;block)\n  some_array.map(&amp;block)\nend\n</code></pre>\n\n<p>or this real version of <a href=\"https://github.com/rails/rails/blob/94b5cd3a20edadd6f6b8cf0bdf1a4d4919df86cb/activesupport/lib/active_support/core_ext/enumerable.rb#L48\" rel=\"nofollow noreferrer\"><code>Enumerable#sum</code> from Rails</a>:</p>\n\n<pre><code>def sum(identity = nil, &amp;block)\n  if block_given?\n    map(&amp;block).sum(identity)\n  else\n    sum = identity ? inject(identity, :+) : inject(:+)\n    sum || identity || 0\n  end\nend\n</code></pre>\n\n<p>In either case, the block that the method is called with is used with another method call so you need a way to refer to the block (i.e. a name).</p>\n\n<p>So <code>block_given?</code>/<code>yield</code> and <code>&amp;block</code> serve different purposes. Being able to call <code>block_given?</code> doesn't make <code>&amp;block</code> redundant and, as in the <code>#sum</code> implementation above, they can even be used together.</p>\n"}, {"tags": [], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "is_accepted": false, "score": 1, "last_activity_date": 1551687102, "last_edit_date": 1551687102, "creation_date": 1551679133, "answer_id": 54977395, "question_id": 54975857, "link": "https://stackoverflow.com/questions/54975857/does-block-given-render-block-parameter-optional/54977395#54977395", "title": "Does `block_given?` render `&amp;block` parameter optional?", "body": "<p>The <code>&amp;block</code> in the method signature accepts a block, converts it into a proc, and assigns it to a variable named <code>block</code>. In case a block is not provided, <code>block</code> is assigned <code>nil</code>.</p>\n\n<p>Whether to use the argument <code>block</code> within the method definition does not matter just like it does not matter whether an ordinary method argument <code>bar</code> is used or not in the following definition:</p>\n\n<pre><code>def foo(bar); end\n</code></pre>\n\n<p>However, accepting a block as a parameter and not using it is redundant and waste of resource. It may perhaps still make sense to explicitly indicate to a fellow programmer that the method accepts a block.</p>\n\n<p>Using <code>block_given?</code> is independent of all this. It is independent of whether a block has been accepted as an argument via <code>&amp;</code>. It refers to the block directly, irrespective of <code>block</code>.</p>\n"}], "owner": {"reputation": 155, "user_id": 10611267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a3caf805e19826b6593450921fe23ccf?s=128&d=identicon&r=PG&f=1", "display_name": "foo", "link": "https://stackoverflow.com/users/10611267/foo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 265, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1551687102, "creation_date": 1551666486, "last_edit_date": 1551678802, "question_id": 54975857, "link": "https://stackoverflow.com/questions/54975857/does-block-given-render-block-parameter-optional", "title": "Does `block_given?` render `&amp;block` parameter optional?", "body": "<p>I am comfortable with the following:</p>\n\n<pre><code>def some_def(foo, &amp;block)\n    puts \"block utilized below\"\n    block.call(foo)\nend\n\ndef some_other_def(bar)\n    puts \"using yield below\"\n    yield bar\n    puts \"and back into the method\"\nend\n</code></pre>\n\n<p>So I have learned to keep blocks (and procs) separate from the <code>yield</code> keyword.</p>\n\n<p>However, I ran into the following code:</p>\n\n<pre><code># ./open_file.rb\n\nclass File\n    def self.open(name, mode, &amp;block)\n        file = new(name, mode)\n        return file unless block_given?\n        yield(file)\n    ensure\n        file.close\n    end\nend\n</code></pre>\n\n<p>It seems the parameter <code>&amp;block</code> does not matter when I implement execute this code in irb:</p>\n\n<pre><code>irb -r ./file.open.rb\n</code></pre>\n\n<p>and do something like:</p>\n\n<pre><code>File.open('foo.txt','r') {|f| puts f}\n</code></pre>\n\n<p>Is <code>&amp;block</code> rendered optional by <code>block_given?</code> in:</p>\n\n<pre><code>return file unless block_given?\n</code></pre>\n"}, {"tags": ["ruby", "comparison-operators"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 2, "creation_date": 1551659383, "post_id": 54975158, "comment_id": 96709467, "body": "<code>[(&quot;X&quot; || &quot;O&quot;)]</code> will always evaluate to a single-element array <code>[&quot;X&quot;]</code>. Which, I&#39;m guessing is not what you&#39;re after."}, {"owner": {"reputation": 79, "user_id": 10959670, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Ld3AwPBqqr4/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQNIwuD8xwJI1-HmoSnercbi-IcroQ/mo/photo.jpg?sz=128", "display_name": "Ben Muller", "link": "https://stackoverflow.com/users/10959670/ben-muller"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1551659633, "post_id": 54975158, "comment_id": 96709513, "body": "I want it to evaluate to check if either of these &quot;markers&quot; are equal to the left side of the expression. Is that possible?  Maybe if you explained why, that would help me out a little..."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1551659726, "post_id": 54975158, "comment_id": 96709532, "body": "&quot;truthy&quot; and &quot;falsey&quot; values, ruby calls this. Anything that is not <code>nil</code> or <code>false</code> is considered truthy. That&#39;s why here <code>&quot;X&quot;</code> is selected always."}], "answers": [{"comments": [{"owner": {"reputation": 79, "user_id": 10959670, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Ld3AwPBqqr4/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQNIwuD8xwJI1-HmoSnercbi-IcroQ/mo/photo.jpg?sz=128", "display_name": "Ben Muller", "link": "https://stackoverflow.com/users/10959670/ben-muller"}, "edited": false, "score": 0, "creation_date": 1551660539, "post_id": 54975231, "comment_id": 96709650, "body": "Thank you, that was silly of me. I am passing in the &quot;Marker&quot; to the function now, as on each players turn all you have to do is check if that player has won. Cheers for the pointers."}, {"owner": {"reputation": 2151, "user_id": 10068463, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3df811097b7fb8fef67238aad1151ca?s=128&d=identicon&r=PG&f=1", "display_name": "Nate", "link": "https://stackoverflow.com/users/10068463/nate"}, "reply_to_user": {"reputation": 79, "user_id": 10959670, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Ld3AwPBqqr4/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQNIwuD8xwJI1-HmoSnercbi-IcroQ/mo/photo.jpg?sz=128", "display_name": "Ben Muller", "link": "https://stackoverflow.com/users/10959670/ben-muller"}, "edited": false, "score": 0, "creation_date": 1551661367, "post_id": 54975231, "comment_id": 96709773, "body": "No problem! I just edited my post and added what I would do code-wise with some tests."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1551690806, "post_id": 54975231, "comment_id": 96718010, "body": "You can also use <code>all?(&#39;X&#39;)</code> / <code>all?(&#39;O&#39;)</code>"}, {"owner": {"reputation": 2151, "user_id": 10068463, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3df811097b7fb8fef67238aad1151ca?s=128&d=identicon&r=PG&f=1", "display_name": "Nate", "link": "https://stackoverflow.com/users/10068463/nate"}, "edited": false, "score": 0, "creation_date": 1551707956, "post_id": 54975231, "comment_id": 96727255, "body": "I see that all? does allow you to specify a single argument which it will then use to see if all elements === it. I\u2019m not super familiar with the === operator. I\u2019ll check that out later today. <a href=\"https://ruby-doc.org/core-2.6.1/Enumerable.html#method-i-all-3F\" rel=\"nofollow noreferrer\">ruby-doc.org/core-2.6.1/Enumerable.html#method-i-all-3F</a>"}, {"owner": {"reputation": 2151, "user_id": 10068463, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3df811097b7fb8fef67238aad1151ca?s=128&d=identicon&r=PG&f=1", "display_name": "Nate", "link": "https://stackoverflow.com/users/10068463/nate"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1551715838, "post_id": 54975231, "comment_id": 96732075, "body": "Good call @Stefan"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1551726681, "post_id": 54975231, "comment_id": 96737603, "body": "Consider making the values in <code>ROWS</code> offsets into <code>board</code> (I.e. base <code>0</code>). Among other things, you could then write <code>row_values = board.values_at(*row)</code>."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1551727849, "post_id": 54975231, "comment_id": 96738163, "body": "Although it has no bearing on your question, note that <a href=\"http://ruby-doc.org/core-2.6.1/Array.html#method-i-all-3F\" rel=\"nofollow noreferrer\">Array#all?</a> has been added in v2.6."}, {"owner": {"reputation": 2151, "user_id": 10068463, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3df811097b7fb8fef67238aad1151ca?s=128&d=identicon&r=PG&f=1", "display_name": "Nate", "link": "https://stackoverflow.com/users/10068463/nate"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1551728812, "post_id": 54975231, "comment_id": 96738574, "body": "@CarySwoveland Enumerable has had <code>all?</code> since 2.0.0 (at least). <a href=\"https://ruby-doc.org/core-2.0.0/Enumerable.html#method-i-all-3F\" rel=\"nofollow noreferrer\">ruby-doc.org/core-2.0.0/Enumerable.html#method-i-all-3F</a> I&#39;m not sure why Array hasn&#39;t documented that you can use it until recently. But, I did just try it on <code>2.5.1</code> (I have that installed) and <code>all?</code> worked fine. I can&#39;t speak for sure on when it was added."}, {"owner": {"reputation": 2151, "user_id": 10068463, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3df811097b7fb8fef67238aad1151ca?s=128&d=identicon&r=PG&f=1", "display_name": "Nate", "link": "https://stackoverflow.com/users/10068463/nate"}, "edited": false, "score": 0, "creation_date": 1551728907, "post_id": 54975231, "comment_id": 96738625, "body": "Oh, you know what! I&#39;ll bet you Ruby 2.6.0 brought forth a performance optimization by giving Array its own custom implementation of <code>all?</code> instead of using the generic Enumerable one."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1551740589, "post_id": 54975231, "comment_id": 96743107, "body": "Yes, I expect that&#39;s the reason as the behaviour seems the same as <code>Enumerable#all?</code>."}], "tags": [], "owner": {"reputation": 2151, "user_id": 10068463, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3df811097b7fb8fef67238aad1151ca?s=128&d=identicon&r=PG&f=1", "display_name": "Nate", "link": "https://stackoverflow.com/users/10068463/nate"}, "is_accepted": true, "score": 4, "last_activity_date": 1551715827, "last_edit_date": 1551715827, "creation_date": 1551659858, "answer_id": 54975231, "question_id": 54975158, "link": "https://stackoverflow.com/questions/54975158/string-comparison-operator-in-ruby/54975231#54975231", "title": "String || comparison operator in Ruby", "body": "<p><code>'X' || 'O'</code> just says X or O. And since any string is truthy it always returns X. So any spot where you\u2019ve said <code>[('X' || 'O')]</code>, you\u2019ve really just said <code>['X']</code>. </p>\n\n<p>Because of this, you\u2019re only ever checking if a whole line of 3 is all X. </p>\n\n<p>I don\u2019t really understand how you\u2019re trying to test this, but I feel like you\u2019d be better off running the function twice first handing in X and then handing in O if it didn\u2019t find X as a winner, as opposed to trying to check both as once.</p>\n\n<p>Alternatively you could instead have the function return 'X', 'O', or nil and then you could have it only run the function once. The string returned would be who won and if it\u2019s nil then no one won. I would also recommend making a loop for this. I find it easier to read.</p>\n\n<p>Here's how I would solve the problem.</p>\n\n<pre><code>ROWS = [\n  [1,2,3],\n  [4,5,6],\n  [7,8,9],\n\n  [1,4,7],\n  [2,5,8],\n  [3,6,9],\n\n  [1,5,9],\n  [7,5,3],\n]\n\ndef find_winner(board)\n  ROWS.each do |row|\n    # subtract 1 because the ROWS is 1-indexed (like a phone dial) but arrays are 0-indexed\n    row_values = row.map { |v| board[v - 1] }\n    return('X') if row_values.all?('X')\n    return('O') if row_values.all?('O')\n  end\n\n  return(nil)\nend\n\n\ntest1 = [\n  'X', 'X', 'X',\n  'O', 'X', 'O',\n  'O', 'O', '',\n]\nputs \"Winner of test1: #{find_winner(test1).inspect}\"\n\"X\"\n\ntest2 = [\n  'X', '',  'X',\n  'X', 'O', 'O',\n  'X', 'O', 'X',\n]\nputs \"Winner of test2: #{find_winner(test2).inspect}\"\n\"X\"\n\ntest3 = [\n  'O', 'X', 'X',\n  'O', 'X', 'O',\n  'O', 'O', '',\n]\nputs \"Winner of test3: #{find_winner(test3).inspect}\"\n\"O\"\n\ntest4 = [\n  'O', 'X', 'O',\n  'X', 'O', 'X',\n  'O', 'O', 'X',\n]\nputs \"Winner of test4: #{find_winner(test4).inspect}\"\n\"O\"\n\ntest5 = [\n  'O', 'X', 'O',\n  'O', 'X', 'O',\n  'X', 'O', 'X',\n]\nputs \"Winner of test5: #{find_winner(test5).inspect}\"\nnil\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2151, "user_id": 10068463, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3df811097b7fb8fef67238aad1151ca?s=128&d=identicon&r=PG&f=1", "display_name": "Nate", "link": "https://stackoverflow.com/users/10068463/nate"}, "edited": false, "score": 0, "creation_date": 1551674865, "post_id": 54976042, "comment_id": 96712306, "body": "Nice answer as always Cary. Your answers always teach me new tricks. This time it was the <code>transpose</code> method."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 2151, "user_id": 10068463, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3df811097b7fb8fef67238aad1151ca?s=128&d=identicon&r=PG&f=1", "display_name": "Nate", "link": "https://stackoverflow.com/users/10068463/nate"}, "edited": false, "score": 0, "creation_date": 1551675731, "post_id": 54976042, "comment_id": 96712501, "body": "@Nate, I&#39;m happy to have helped."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1551690974, "post_id": 54976042, "comment_id": 96718099, "body": "Checking via <code>row.uniq.size == 1</code> might return the empty field <code>:_</code> as a false positive."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1551725749, "post_id": 54976042, "comment_id": 96737136, "body": "@Stefan, it&#39;s curious that nobody noticed that boo-boo before. Thanks."}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 2, "last_activity_date": 1551725629, "last_edit_date": 1551725629, "creation_date": 1551668281, "answer_id": 54976042, "question_id": 54975158, "link": "https://stackoverflow.com/questions/54975158/string-comparison-operator-in-ruby/54976042#54976042", "title": "String || comparison operator in Ruby", "body": "<p>@Nate has answered your question. Here is one way you could write your method.</p>\n\n<p><strong>Code</strong></p>\n\n<pre><code>def check_for_win(board)\n  check_rows(board)                              ||\n  check_rows(board.transpose)                    ||\n  check_rows([[0,1,2].map { |i| board[i][i] }])  ||    \n  check_rows([[0,1,2].map { |i| board[i][2-i] }])\nend\n\ndef check_rows(rows)\n  rows.find { |row| row.uniq.size == 1 &amp;&amp; row.first != :_ }&amp;.first\nend\n</code></pre>\n\n<p><code>&amp;</code> in <code>check_rows</code> is the <a href=\"http://mitrev.net/ruby/2015/11/13/the-operator-in-ruby/\" rel=\"nofollow noreferrer\">safe navigation operator</a>. It causes <code>.first</code> to be disregarded and <code>nil</code> returned if <code>find</code>'s block returns <code>nil</code>.</p>\n\n<p><strong>Examples</strong></p>\n\n<pre><code>check_for_win [[:O, :_, :O],\n               [:O, :X, :_],\n               [:X, :X, :X]]\n  #=&gt; :X\n\ncheck_for_win [[:O, :_, :O],\n               [:O, :X, :X],\n               [:O, :X, :X]]\n  #=&gt; :O\n\ncheck_for_win [[:X, :O, :X],\n               [:O, :X, :O],\n               [:O, :X, :X]]\n  #=&gt; :X\n\ncheck_for_win [[:X, :O, :O],\n               [:X, :O, :_],\n               [:O, :X, :X]]\n  #=&gt; :O\n\ncheck_for_win [[:X, :O, :X],\n               [:X, :O, :O],\n               [:O, :X, :X]]\n  #=&gt; nil\n\ncheck_for_win [[:_, :_, :_],\n               [:X, :O, :O],\n               [:O, :X, :X]]\n  #=&gt; nil\n</code></pre>\n"}], "owner": {"reputation": 79, "user_id": 10959670, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Ld3AwPBqqr4/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQNIwuD8xwJI1-HmoSnercbi-IcroQ/mo/photo.jpg?sz=128", "display_name": "Ben Muller", "link": "https://stackoverflow.com/users/10959670/ben-muller"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 144, "favorite_count": 0, "accepted_answer_id": 54975231, "answer_count": 2, "score": -1, "last_activity_date": 1551725629, "creation_date": 1551658817, "question_id": 54975158, "link": "https://stackoverflow.com/questions/54975158/string-comparison-operator-in-ruby", "title": "String || comparison operator in Ruby", "body": "<p>I am new to Ruby and am trying to practice by coding up a simple TicTacToe game.</p>\n\n<p>I have just run into a small issue with the evaluation of if a player has won the game.</p>\n\n<p>Essentially the game works with a board that is equal to:</p>\n\n<pre><code>board = [\"#\",' ',' ',' ',' ',' ',' ',' ',' ',' ']\n</code></pre>\n\n<p>Every time a player moves their \"marker\" (X or O) is added to the board and there are functions to check if the spot is taken, if it is a draw or if a player has won.</p>\n\n<p>So an interim board might look something like this:</p>\n\n<pre><code>board = [\"#\",' ',' ','O',' ','X',' ','O',' ',' ']\n</code></pre>\n\n<p>My issue is coming when evaluating if someone won. I have written a function for this: (the first 3 expressions check for a horizontal win, the next 3 a vertical win and the following 2 look for diagonal wins.</p>\n\n<pre><code>def check_for_win(board)\n  if [board[1],board[2],board[3]].uniq == [(\"X\" || \"O\")] || [board[4],board[5],board[6]].uniq == [(\"X\" || \"O\")] ||\n    [board[7],board[8],board[9]].uniq == [(\"X\" || \"O\")] || [board[1],board[4],board[7]].uniq == [(\"X\" || \"O\")] ||\n    [board[5],board[2],board[8]].uniq == [(\"X\" || \"O\")] || [board[6],board[9],board[3]].uniq == [(\"X\" || \"O\")] ||\n    [board[1],board[5],board[9]].uniq == [(\"X\" || \"O\")] || [board[7],board[5],board[3]].uniq == [(\"X\" || \"O\")] \n    true\n  else\n    false\n  end \nend \n</code></pre>\n\n<p>This function seems to evaluate if there is a winner with the \"X\" marker, but for the \"O\" marker if cannot evaluate to true. It should be noted that the left side of the expression still evaluates to what I want it to, for example:</p>\n\n<pre><code>board = [\"#\",' ',' ','O',' ','O',' ','O',' ',' ']\np [board[7],board[5],board[3]].uniq \n&gt;&gt; [\"O\"]\n</code></pre>\n\n<p>I can not seem to understand why and any direction on this would be greatly appreciated. </p>\n"}, {"tags": ["ruby", "reactjs", "request", "rails-api", "ruby-on-rails-5.2"], "comments": [{"owner": {"reputation": 3902, "user_id": 10608621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d59df09a85d05117c63706f66811b70c?s=128&d=identicon&r=PG", "display_name": "mechnicov", "link": "https://stackoverflow.com/users/10608621/mechnicov"}, "edited": false, "score": 0, "creation_date": 1551658954, "post_id": 54974815, "comment_id": 96709385, "body": "Add some code to your question"}, {"owner": {"reputation": 98, "user_id": 3435735, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001102526849/picture?type=large", "display_name": "heniotierra", "link": "https://stackoverflow.com/users/3435735/heniotierra"}, "reply_to_user": {"reputation": 3902, "user_id": 10608621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d59df09a85d05117c63706f66811b70c?s=128&d=identicon&r=PG", "display_name": "mechnicov", "link": "https://stackoverflow.com/users/10608621/mechnicov"}, "edited": false, "score": 0, "creation_date": 1551659346, "post_id": 54974815, "comment_id": 96709457, "body": "@mechnicov I&#39;ve just edited the post"}], "owner": {"reputation": 98, "user_id": 3435735, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001102526849/picture?type=large", "display_name": "heniotierra", "link": "https://stackoverflow.com/users/3435735/heniotierra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 197, "favorite_count": 0, "closed_date": 1551669567, "answer_count": 0, "score": 0, "last_activity_date": 1551669554, "creation_date": 1551655398, "last_edit_date": 1551669554, "question_id": 54974815, "link": "https://stackoverflow.com/questions/54974815/rails-5-api-controller-not-receiving-params-sent-by-frontend-app", "closed_reason": "Duplicate", "title": "Rails 5 api controller not receiving params sent by frontend app", "body": "<p>I'm creating a new distributed application using React for the frontend and Rails 5 for the backend. I'm new to Rails, so I couldn't figure out a solution for the issue I'm running into. </p>\n\n<p>The issue is that the params var in Rails controller does not include the variables sent in the POST request by the React frontend.</p>\n\n<p>It gives me the following error:</p>\n\n<blockquote>\n  <p>ActionController::ParameterMissing (param is missing or the value is\n  empty: user):</p>\n</blockquote>\n\n<p>Which is generated by this line in the Rails controller:</p>\n\n<pre><code>params.require(:user).permit(:name, :cnpj, :email)\n</code></pre>\n\n<p>This is the body (params) of the POST request made by fetch:</p>\n\n<pre><code>user: {\n  cnpj: '1231412',\n  email: 'henio@hen.io',\n  name: 'henio'\n}\n</code></pre>\n\n<p>The frontend related code:</p>\n\n<pre><code>export const post = async (resource, data) =&gt; {\n  try{\n    const url = `${apiBase}/${resource}`;\n    const response = await fetch(url, {\n      method: 'POST',\n      mode: 'cors',\n      cache: 'no-cache',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(data),\n    });\n    if (!response.ok) return false;\n    return await response.json();\n  }catch(e){\n    console.log(e);\n    return false;\n  }\n}\n\nconst res = await post(apiResourse,{ user, });\n</code></pre>\n\n<p>And this is the params object printed in the user_params method inside the controller:</p>\n\n<pre><code>{\"controller\"=&gt;\"api/v1/users\", \"action\"=&gt;\"create\"}\n</code></pre>\n\n<p>What the does that mean?</p>\n"}]