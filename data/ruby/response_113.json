[{"tags": ["ruby", "session", "websocket", "coffeescript"], "comments": [{"owner": {"reputation": 574441, "user_id": 816620, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/Xu7hp.jpg?s=128&g=1", "display_name": "jfriend00", "link": "https://stackoverflow.com/users/816620/jfriend00"}, "edited": false, "score": 1, "creation_date": 1489017219, "post_id": 42683852, "comment_id": 72492378, "body": "Sessions are going to be based on cookies, so the issue is probably the persistence of the session cookie.  When you use a host/port different than that of the web page, then your session cookie becomes what is known as a 3rd party cookie and there are different security rules and settings for 3rd party cookies.  I would guess that your settings or add-ons are blocking the persistence of 3rd party cookies.  plain webSockets by themselves work fine on cross origin connections, but if you&#39;re trying to attach a session cookie when established, then that would require persistence of the cookie."}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "reply_to_user": {"reputation": 574441, "user_id": 816620, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/Xu7hp.jpg?s=128&g=1", "display_name": "jfriend00", "link": "https://stackoverflow.com/users/816620/jfriend00"}, "edited": false, "score": 0, "creation_date": 1489017993, "post_id": 42683852, "comment_id": 72492609, "body": "So do I add code to the client or server?"}, {"owner": {"reputation": 574441, "user_id": 816620, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/Xu7hp.jpg?s=128&g=1", "display_name": "jfriend00", "link": "https://stackoverflow.com/users/816620/jfriend00"}, "edited": false, "score": 0, "creation_date": 1489018456, "post_id": 42683852, "comment_id": 72492751, "body": "You have to first look into whether 3rd party cookies are being retained by your client.  If not, then you have to either fix the settings in the client so they are retained or stop using a separate origin so you don&#39;t run afoul of 3rd party cookie settings."}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "reply_to_user": {"reputation": 574441, "user_id": 816620, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/Xu7hp.jpg?s=128&g=1", "display_name": "jfriend00", "link": "https://stackoverflow.com/users/816620/jfriend00"}, "edited": false, "score": 0, "creation_date": 1489018902, "post_id": 42683852, "comment_id": 72492889, "body": "I see so it is determined on a per-browser basis and theres no way I can force it to be whitelisted. Probably will end up combining the apps then"}, {"owner": {"reputation": 574441, "user_id": 816620, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/Xu7hp.jpg?s=128&g=1", "display_name": "jfriend00", "link": "https://stackoverflow.com/users/816620/jfriend00"}, "edited": false, "score": 0, "creation_date": 1489019148, "post_id": 42683852, "comment_id": 72492966, "body": "cookies are kept in clients.  So, it is purely client-side functionality and settings that decides whether to keep 3rd party cookies or not.  Nothing you can do to influence it on the server other than stop relying on 3rd party cookies.  I do have an idea for how you could work around relying on 3rd party cookies if you want me to post that as an answer (it requires more than can fit into a comment)."}, {"owner": {"reputation": 574441, "user_id": 816620, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/Xu7hp.jpg?s=128&g=1", "display_name": "jfriend00", "link": "https://stackoverflow.com/users/816620/jfriend00"}, "edited": false, "score": 0, "creation_date": 1489019240, "post_id": 42683852, "comment_id": 72492990, "body": "You&#39;d have to communicate a sessionID back to the client and have the client store it as a first party cookie.  Then, a connecting page would get the sessionID from the first party cookie and send it as part of the websocket connecting URL and the server could then hook it up to that particular session.  This would require client and server code changes, but could be done."}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "reply_to_user": {"reputation": 574441, "user_id": 816620, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/Xu7hp.jpg?s=128&g=1", "display_name": "jfriend00", "link": "https://stackoverflow.com/users/816620/jfriend00"}, "edited": false, "score": 0, "creation_date": 1489022386, "post_id": 42683852, "comment_id": 72493826, "body": "Thanks, that is helpful and makes sense."}], "answers": [{"comments": [{"owner": {"reputation": 16402, "user_id": 4025095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/blJ4L.jpg?s=128&g=1", "display_name": "Myst", "link": "https://stackoverflow.com/users/4025095/myst"}, "edited": false, "score": 0, "creation_date": 1489206414, "post_id": 42684999, "comment_id": 72581756, "body": "<b>Note</b>: This approach introduces a security risk unless the session ID is rotated <i>every</i> connection. Otherwise, the session ID is logged with the request by most intermediaries and can be easily hijacked. It&#39;s true that sessions aren&#39;t that secure to begin with, but I would avoid attaching any information to the request URL."}, {"owner": {"reputation": 574441, "user_id": 816620, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/Xu7hp.jpg?s=128&g=1", "display_name": "jfriend00", "link": "https://stackoverflow.com/users/816620/jfriend00"}, "reply_to_user": {"reputation": 16402, "user_id": 4025095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/blJ4L.jpg?s=128&g=1", "display_name": "Myst", "link": "https://stackoverflow.com/users/4025095/myst"}, "edited": false, "score": 0, "creation_date": 1489207093, "post_id": 42684999, "comment_id": 72581877, "body": "@Myst - Good point.  sessionIDs should always expire and not last particularly long.  Or, once the sessionID is used for the relogin, a new one can be coined and sent back to the client just as in step 2 and the old one invalidated.  Or, you could accept the webSocket connection without a sessionID with a reconnect query parameter boolean and then require the credential be sent within a few seconds before any other messages are allowed to be processed (thus avoiding the logging).  There are lots of ways to make it more secure depending upon what you need/want to protect against."}, {"owner": {"reputation": 574441, "user_id": 816620, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/Xu7hp.jpg?s=128&g=1", "display_name": "jfriend00", "link": "https://stackoverflow.com/users/816620/jfriend00"}, "reply_to_user": {"reputation": 16402, "user_id": 4025095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/blJ4L.jpg?s=128&g=1", "display_name": "Myst", "link": "https://stackoverflow.com/users/4025095/myst"}, "edited": false, "score": 0, "creation_date": 1489207179, "post_id": 42684999, "comment_id": 72581887, "body": "@Myst - Also, given that the OP is not talking about any authentication here at all, I think this sessionID is only so the server can associate a reconnecting webSocket with the previous session info.  So, this doesn&#39;t appear to be an authenticated connection at all so security must not be the main issue here.  If there is auth info, then the reconnect can just submit the auth info and solve the problem that way."}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "reply_to_user": {"reputation": 16402, "user_id": 4025095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/blJ4L.jpg?s=128&g=1", "display_name": "Myst", "link": "https://stackoverflow.com/users/4025095/myst"}, "edited": false, "score": 0, "creation_date": 1489713811, "post_id": 42684999, "comment_id": 72803367, "body": "@Myst Thankfully I was keen enough to realize the token would need to be refreshed every page reload. To prevent URL snooping I&#39;m using wss and https for the deployed version."}], "tags": [], "owner": {"reputation": 574441, "user_id": 816620, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/Xu7hp.jpg?s=128&g=1", "display_name": "jfriend00", "link": "https://stackoverflow.com/users/816620/jfriend00"}, "is_accepted": true, "score": 1, "last_activity_date": 1489022670, "creation_date": 1489022670, "answer_id": 42684999, "question_id": 42683852, "link": "https://stackoverflow.com/questions/42683852/no-persistent-session-when-connecting-to-api-on-different-host/42684999#42684999", "title": "No persistent session when connecting to API on different host", "body": "<p>As we've discussed in comments, you probably have a problem with 3rd party session cookies in the browser.</p>\n\n<p>Here's a scheme that you could use to work around it.</p>\n\n<ol>\n<li>Client makes webSocket connection for the first time.</li>\n<li>Server sends a webSocket message back with sessionID in it.</li>\n<li>Client stores sessionID in a first party cookie (e.g. a cookie in the host web page).</li>\n<li>User hits refresh.</li>\n<li>Web page checks to see if it has a webSocket session cookie in the cookies for the host page.  If so, it constructs a URL for the webSocket connection that includes that session ID `new Websocket(\"ws://localhost:3000?session=xyslkfas\")</li>\n<li>When server accepts webSocket connection, it checks the query parameters to see if there is already a session being specified.  If so and that session is still valid, it hooks up that connection to that session.  If not, it creates a new session and goes back to step 2.</li>\n</ol>\n"}], "owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "accepted_answer_id": 42684999, "answer_count": 1, "score": 0, "last_activity_date": 1489022670, "creation_date": 1489015452, "last_edit_date": 1489018856, "question_id": 42683852, "link": "https://stackoverflow.com/questions/42683852/no-persistent-session-when-connecting-to-api-on-different-host", "title": "No persistent session when connecting to API on different host", "body": "<p>I am sending a websocket connection to the API server on a different host:</p>\n\n<pre><code>new WebSocket(\"ws://localhost:3000\")\n</code></pre>\n\n<p>Whereas my front end is hosted on <code>localhost:8080</code>.</p>\n\n<p>Inside my API's websocket connection handler I'm able to set a key on the <code>session</code> (with Sinatra's <code>enable :sessions</code>) but every time I refresh the html page, the data is lost. </p>\n\n<p>Is there some requirement for sessions that the front end share the same host as the server? Or is there some way I can get around this? By the way, the front end is running on a Webpack server (Node). </p>\n\n<p>I also tried adding a cross_origin allowance for the API's root route <code>http://localhost:3000</code> and then doing this in the client (this example in coffeescript):</p>\n\n<pre><code>$.get \"http://localhost:3000\", -&gt;\n  new Websocket(\"ws://localhost:3000\")\n</code></pre>\n\n<p>My thinking was that maybe the session needed to be \"initialized\" over <code>http://</code> instead of <code>ws://</code> but it didn't work either. The session didn't work for the <code>$.get \"http://localhost:3000\"</code> request either. Refreshing the page shows that the session clears each time. </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "web-scraping", "nokogiri"], "answers": [{"comments": [{"owner": {"reputation": 1428, "user_id": 2730725, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/1a694df4d71660fc4d84ccbb92469e38?s=128&d=identicon&r=PG&f=1", "display_name": "user273072545345", "link": "https://stackoverflow.com/users/2730725/user273072545345"}, "edited": false, "score": 0, "creation_date": 1489016919, "post_id": 42684071, "comment_id": 72492256, "body": "your answer makes sense, and I copied your loop ... but it&#39;s still showing only one result .. the same one as in the screenshot above .. and everything else is still intact as in the post ... is there something else I&#39;m missing?"}], "tags": [], "owner": {"reputation": 1375, "user_id": 3059274, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/65852c2e3d5786cf2e759071062a536e?s=128&d=identicon&r=PG&f=1", "display_name": "jamesvphan", "link": "https://stackoverflow.com/users/3059274/jamesvphan"}, "is_accepted": false, "score": 0, "last_activity_date": 1489016526, "creation_date": 1489016526, "answer_id": 42684071, "question_id": 42683818, "link": "https://stackoverflow.com/questions/42683818/nokogiri-results-not-looping/42684071#42684071", "title": "Nokogiri results not looping", "body": "<p>Within your iteration of @craigslist_info, you are not referencing the placeholder, craig, and instead referencing only @link_info and @date. This will only produce one result. Within your iteration, you want to access the link_info and date of \"craig\".</p>\n\n<pre><code>&lt;% @craigslist_info.each do |craig| %&gt;\n    &lt;% link_info = craig.at_css(\"li.result-row p.result-info a.result-title.hdrlnk\") %&gt; \n    &lt;% date = craig.at_css(\"li.result-row p.result-info time.result-date\")%&gt;\n    &lt;p&gt;&lt;%= \"Title of the job: #{link_info.text}\" %&gt;&lt;/p&gt;\n    &lt;p&gt;&lt;%= \"Date: #{date.text}\" %&gt;&lt;/p&gt;\n&lt;% end %&gt;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1428, "user_id": 2730725, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/1a694df4d71660fc4d84ccbb92469e38?s=128&d=identicon&r=PG&f=1", "display_name": "user273072545345", "link": "https://stackoverflow.com/users/2730725/user273072545345"}, "edited": false, "score": 0, "creation_date": 1489016996, "post_id": 42684122, "comment_id": 72492290, "body": "thanks for looking at my question! Actually, I&#39;m not looking to scrape ALL the results but just the first page. I&#39;m only literally getting the first one on the first page. Hence why I&#39;m puzzled that my looping is not working."}], "tags": [], "owner": {"reputation": 83, "user_id": 5862018, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/222f7909ae0fbc9d66219f396c63b206?s=128&d=identicon&r=PG&f=1", "display_name": "C.Kelly", "link": "https://stackoverflow.com/users/5862018/c-kelly"}, "is_accepted": false, "score": 1, "last_activity_date": 1489016824, "creation_date": 1489016824, "answer_id": 42684122, "question_id": 42683818, "link": "https://stackoverflow.com/questions/42683818/nokogiri-results-not-looping/42684122#42684122", "title": "Nokogiri results not looping", "body": "<p>It's probably because you are only scraping the first page of results. If you go to the url you are scraping \"<a href=\"https://losangeles.craigslist.org/search/web\" rel=\"nofollow noreferrer\">https://losangeles.craigslist.org/search/web</a>\" you can see that it's only showing you the first 100 results. If you scroll down and click \"next\" the link changes to \"<a href=\"https://losangeles.craigslist.org/search/web?s=100\" rel=\"nofollow noreferrer\">https://losangeles.craigslist.org/search/web?s=100</a>\". If you want to scrape ALL results, you need to create a method to scrape each page of the results.</p>\n"}, {"comments": [{"owner": {"reputation": 1428, "user_id": 2730725, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/1a694df4d71660fc4d84ccbb92469e38?s=128&d=identicon&r=PG&f=1", "display_name": "user273072545345", "link": "https://stackoverflow.com/users/2730725/user273072545345"}, "edited": false, "score": 0, "creation_date": 1489021383, "post_id": 42684204, "comment_id": 72493592, "body": "your answer hit the head of the nail and fixed my problem. thank you. =) may I ask a couple of questions, if you don&#39;t mind? why are you doing it with_index, ie, <code>@links.each_with_index</code>? and then applying it to <code>@dates[index]</code> ... confused about this."}, {"owner": {"reputation": 5382, "user_id": 7671538, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3506350bc4dd02281ad7f99e8e84715c?s=128&d=identicon&r=PG&f=1", "display_name": "gwcodes", "link": "https://stackoverflow.com/users/7671538/gwcodes"}, "reply_to_user": {"reputation": 1428, "user_id": 2730725, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/1a694df4d71660fc4d84ccbb92469e38?s=128&d=identicon&r=PG&f=1", "display_name": "user273072545345", "link": "https://stackoverflow.com/users/2730725/user273072545345"}, "edited": false, "score": 0, "creation_date": 1489048416, "post_id": 42684204, "comment_id": 72503345, "body": "@user27307254534534534543675765: no problem :-)  When you use <code>.css</code> with nokogiri, it will return a <code>NodeSet</code> (<a href=\"http://nokogiri.rubyforge.org/nokogiri/Nokogiri/XML/NodeSet.html\" rel=\"nofollow noreferrer\">nokogiri.rubyforge.org/nokogiri/Nokogiri/XML/NodeSet.html</a>) which for our purposes, we treat a bit like an array. We can&#39;t iterate over two arrays at the same time - but we do know that they contain the same number of items, and are in the same order. Therefore we iterate over <code>@links</code>, and then grab the corresponding entry from <code>@dates</code>"}, {"owner": {"reputation": 5382, "user_id": 7671538, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3506350bc4dd02281ad7f99e8e84715c?s=128&d=identicon&r=PG&f=1", "display_name": "gwcodes", "link": "https://stackoverflow.com/users/7671538/gwcodes"}, "reply_to_user": {"reputation": 1428, "user_id": 2730725, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/1a694df4d71660fc4d84ccbb92469e38?s=128&d=identicon&r=PG&f=1", "display_name": "user273072545345", "link": "https://stackoverflow.com/users/2730725/user273072545345"}, "edited": false, "score": 0, "creation_date": 1489048610, "post_id": 42684204, "comment_id": 72503463, "body": "And if you&#39;re planning to grab lots of values from each result row eventually, it&#39;s definitely worth looking at the second option. OpenStruct is really useful here (read more here: <a href=\"https://ruby-doc.org/stdlib-2.4.0/libdoc/ostruct/rdoc/OpenStruct.html\" rel=\"nofollow noreferrer\">ruby-doc.org/stdlib-2.4.0/libdoc/ostruct/rdoc/OpenStruct.htm&zwnj;&#8203;l</a>) for grouping together the properties of each result row, and will make your code far more readable. For example, you can iterate like <code>@result_objects.each { |row| puts row.link; puts row.date }</code>"}], "tags": [], "owner": {"reputation": 5382, "user_id": 7671538, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3506350bc4dd02281ad7f99e8e84715c?s=128&d=identicon&r=PG&f=1", "display_name": "gwcodes", "link": "https://stackoverflow.com/users/7671538/gwcodes"}, "is_accepted": true, "score": 0, "last_activity_date": 1489017267, "creation_date": 1489017267, "answer_id": 42684204, "question_id": 42683818, "link": "https://stackoverflow.com/questions/42683818/nokogiri-results-not-looping/42684204#42684204", "title": "Nokogiri results not looping", "body": "<p>You're iterating over <code>@craigslist_info</code>, but <code>.css(\"ul.rows\")</code> will only pick up a single element. You're also overwriting previous elements each time you call <code>.at_css</code></p>\n\n<p>Try something like:</p>\n\n<pre><code>page = Nokogiri::HTML(open(url))\n@links = page.css(\"li.result-row p.result-info a.result-title.hdrlnk\")\n@dates = page.css(\"li.result-row p.result-info time.result-date\")\n</code></pre>\n\n<p>And then in your view:</p>\n\n<pre><code>&lt;% @links.each_with_index do |link, index| %&gt;\n  &lt;p&gt;&lt;%= \"Title of the job: #{link.text}\" %&gt;&lt;/p&gt;\n  &lt;p&gt;&lt;%= \"Date: #{@dates[index].text}\" %&gt;&lt;/p&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>If you want to tidy things up, you can also model the scraped data in an easier to understand form. For example:</p>\n\n<pre><code>results = page.css(\"li.result-row p.result-info\")\n@result_objects = results.map { |o|\n                    OpenStruct.new(\n                      link: o.at_css(\"a.result-title.hdrlnk\"),\n                      date: o.at_css(\"time.result-date\")\n                    )\n                  }\n</code></pre>\n\n<p>And then iterate over <code>@result_objects</code>, knowing that you can access <code>.link</code> and <code>.date</code> for each one.</p>\n"}], "owner": {"reputation": 1428, "user_id": 2730725, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/1a694df4d71660fc4d84ccbb92469e38?s=128&d=identicon&r=PG&f=1", "display_name": "user273072545345", "link": "https://stackoverflow.com/users/2730725/user273072545345"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 114, "favorite_count": 0, "accepted_answer_id": 42684204, "answer_count": 3, "score": 0, "last_activity_date": 1489081624, "creation_date": 1489015276, "last_edit_date": 1489081624, "question_id": 42683818, "link": "https://stackoverflow.com/questions/42683818/nokogiri-results-not-looping", "title": "Nokogiri results not looping", "body": "<p>I am trying to understand how to scrape pages.</p>\n\n<p>The results are not looping on the view page. It only shows the first one. Why?</p>\n\n<p>LinksController:</p>\n\n<pre><code>class LinksController &lt; ApplicationController\n\n    def craigslist_scrape\n        require 'open-uri'\n\n        url = \"https://losangeles.craigslist.org/search/web\"\n\n        page = Nokogiri::HTML(open(url))\n\n        @craigslist_info = page.css(\"ul.rows\")\n\n        @link_info = @craigslist_info.at_css(\"li.result-row p.result-info a.result-title.hdrlnk\")\n        @date = @craigslist_info.at_css(\"li.result-row p.result-info time.result-date\")\n    end\n\nend\n</code></pre>\n\n<p>View page: craigslist_scrape.html.erb:</p>\n\n<pre><code>&lt;% @craigslist_info.each do |craig| %&gt;\n    &lt;p&gt;&lt;%= \"Title of the job: #{@link_info.text}\" %&gt;&lt;/p&gt;\n    &lt;p&gt;&lt;%= \"Date: #{@date.text}\" %&gt;&lt;/p&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>Screenshot of only first results:</p>\n\n<p><a href=\"https://i.stack.imgur.com/UhS2M.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/UhS2M.png\" alt=\"enter image description here\"></a></p>\n\n<p>Routes:</p>\n\n<pre><code>Rails.application.routes.draw do\n    root 'links#craigslist_scrape'\nend\n</code></pre>\n\n<p>Schema:</p>\n\n<pre><code>ActiveRecord::Schema.define(version: 20170308223314) do\n  enable_extension \"plpgsql\"\n\n  create_table \"links\", force: :cascade do |t|\n    t.string   \"link_info\"\n    t.string   \"date\"\n    t.datetime \"created_at\", null: false\n    t.datetime \"updated_at\", null: false\n  end\n\nend\n</code></pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "edited": false, "score": 0, "creation_date": 1489015201, "post_id": 42683666, "comment_id": 72491646, "body": "Have you installed it? <code>gem install sqlite3</code>? You have Ruby, you have SQLite3, but you don&#39;t seem to have the Ruby bindings for SQLite3, which is what <code>require &#39;sqlite3&#39;</code> would load."}, {"owner": {"reputation": 557, "user_id": 5527374, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/OQmV2.png?s=128&g=1", "display_name": "tscheingeld", "link": "https://stackoverflow.com/users/5527374/tscheingeld"}, "reply_to_user": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "edited": false, "score": 0, "creation_date": 1489016111, "post_id": 42683666, "comment_id": 72491962, "body": "See the updated above. Basically, I tried that and got more errors that I don&#39;t understand."}, {"owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "edited": false, "score": 0, "creation_date": 1489016382, "post_id": 42683666, "comment_id": 72492063, "body": "As the error suggests, you&#39;re missing Ruby header files. We&#39;d need to know which version of Ruby you&#39;re working with (I assume 2.3, from your error), how was it installed (preinstalled by OS?) and on which Linux distribution."}, {"owner": {"reputation": 557, "user_id": 5527374, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/OQmV2.png?s=128&g=1", "display_name": "tscheingeld", "link": "https://stackoverflow.com/users/5527374/tscheingeld"}, "reply_to_user": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "edited": false, "score": 0, "creation_date": 1489016515, "post_id": 42683666, "comment_id": 72492115, "body": "Here&#39;s that info: Ubuntu Linux 16.04.1; ruby 2.3.1p112 (2016-04-26) [x86_64-linux-gnu]"}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1489016599, "post_id": 42683666, "comment_id": 72492143, "body": "run <code>sudo apt-get install ruby2.3-dev</code> to get the missing <code>ruby.h</code> file. Editing the gemspec of gems you install is practically never something you have to do"}, {"owner": {"reputation": 557, "user_id": 5527374, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/OQmV2.png?s=128&g=1", "display_name": "tscheingeld", "link": "https://stackoverflow.com/users/5527374/tscheingeld"}, "edited": false, "score": 0, "creation_date": 1489017197, "post_id": 42683666, "comment_id": 72492373, "body": "@maxpie: I did that and it didn&#39;t seem to help. See &quot;another update&quot; in my top post for the details."}, {"owner": {"reputation": 557, "user_id": 5527374, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/OQmV2.png?s=128&g=1", "display_name": "tscheingeld", "link": "https://stackoverflow.com/users/5527374/tscheingeld"}, "reply_to_user": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "edited": false, "score": 0, "creation_date": 1489017285, "post_id": 42683666, "comment_id": 72492407, "body": "@Amadan: I installed Ruby through Webmin, which basically just uses apt-get"}, {"owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "edited": false, "score": 0, "creation_date": 1489018101, "post_id": 42683666, "comment_id": 72492638, "body": "Same deal, this time with sqlite3. The logs even tell you what to do: &quot;sqlite3.h is missing. Try [...] &#39;apt-get install libsqlite3-dev&#39;&quot;. :)"}, {"owner": {"reputation": 557, "user_id": 5527374, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/OQmV2.png?s=128&g=1", "display_name": "tscheingeld", "link": "https://stackoverflow.com/users/5527374/tscheingeld"}, "reply_to_user": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "edited": false, "score": 0, "creation_date": 1489018902, "post_id": 42683666, "comment_id": 72492890, "body": "@Amadan: That worked! Thanks so much!"}], "owner": {"reputation": 557, "user_id": 5527374, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/OQmV2.png?s=128&g=1", "display_name": "tscheingeld", "link": "https://stackoverflow.com/users/5527374/tscheingeld"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1871, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1489017153, "creation_date": 1489014467, "last_edit_date": 1495542319, "question_id": 42683666, "link": "https://stackoverflow.com/questions/42683666/cannot-load-such-file-sqlite3-loaderror", "title": "cannot load such file -- sqlite3 (LoadError)", "body": "<p>I'm a complete Ruby newbie. I'm trying to load the sqlite3 module. Here's the\nentirety of my script:</p>\n\n<pre><code>#!/usr/bin/ruby -w\nrequire 'sqlite3'\n</code></pre>\n\n<p>Running that command results in this output:</p>\n\n<pre><code>/usr/lib/ruby/2.3.0/rubygems/core_ext/kernel_require.rb:55:in `require': cannot load such file -- sqlite3 (LoadError)\n    from /usr/lib/ruby/2.3.0/rubygems/core_ext/kernel_require.rb:55:in `require'\n    from ./sqlite.rb:2:in `&lt;main&gt;'\n</code></pre>\n\n<p>The go-to page for this problem <a href=\"https://stackoverflow.com/questions/17643897/cannot-load-such-file-sqlite3-sqlite3-native-loaderror-on-ruby-on-rails\">seems to be this page</a>. However, none of the solutions there help.</p>\n\n<p>The most popular solution is to edit sqlite3's gemspec file. I can only find\none file on my system that looks like a gemspec file for sqlite3. It has the following rather odd path:</p>\n\n<pre><code>/home/terry/.gem/specs/api.rubygems.org%443/quick/Marshal.4.8/sqlite3-1.3.13.gemspec\n</code></pre>\n\n<p>The contents of that file look like this (word wrapped for reading):</p>\n\n<pre><code>;;F;U;  [[[I\"~&gt;;TU;[I\"  3.15;T0I\"jamis@37signals.com;TI\"luislavena@gmail.com;TI\"\naaron@tenderlovemaking.com;TI\"Jamis Buck;TI\"Luis Lavena;TI\"Aaron Patterson;TI\"\u2592\nThis module allows Ruby programs to interface with the SQLite3 database engine\n(http://www.sqlite.org).  You must have the SQLite engine installed in order\nto build this module.\nNote that this module is only compatible with SQLite 3.6.16 or newer.;TI\"\n2https://github.com/sparklemotion/sqlite3-ruby;TT@[I\" BSD-3;T\n</code></pre>\n\n<p>That doesn't match with anything like the stackoverflow page's description.</p>\n\n<p>So I'm lost.</p>\n\n<p>Here are some of my system specifications:</p>\n\n<p>Ubuntu Linux 16.04.1</p>\n\n<pre><code># sqlite3 -version\n3.11.0 2016-02-15 17:29:24 3d862f207e3adc00f78066799ac5a8c282430a5f\n\n# ruby --version\n ruby 2.3.1p112 (2016-04-26) [x86_64-linux-gnu]\n</code></pre>\n\n<p>Let me know if there is other information I should post. Any help is appreciated. Thanks!</p>\n\n<hr>\n\n<p>-- update --</p>\n\n<p>In response to Amadan's suggestion, I tried the suggested command and got this result:</p>\n\n<pre><code># gem install sqlite3\nERROR:  While executing gem ... (Gem::FilePermissionError)\n    You don't have write permissions for the /var/lib/gems/2.3.0 directory.\n</code></pre>\n\n<p>So I tried it with sudo and got this:</p>\n\n<pre><code># sudo gem install sqlite3\n[sudo] password for terry:\nBuilding native extensions.  This could take a while...\nERROR:  Error installing sqlite3:\n        ERROR: Failed to build gem native extension.\n\n    current directory: /var/lib/gems/2.3.0/gems/sqlite3-1.3.13/ext/sqlite3\n/usr/bin/ruby2.3 -r ./siteconf20170308-16463-q46juc.rb extconf.rb\nmkmf.rb can't find header files for ruby at /usr/lib/ruby/include/ruby.h\n\nextconf failed, exit code 1\n\nGem files will remain installed in /var/lib/gems/2.3.0/gems/sqlite3-1.3.13 for inspection.\nResults logged to /var/lib/gems/2.3.0/extensions/x86_64-linux/2.3.0/sqlite3-1.3.13/gem_make.out\n</code></pre>\n\n<p>I checked that log file and it just has the same error.</p>\n\n<hr>\n\n<p>-- another update --</p>\n\n<p>On @maxple's suggestion, I installed ruby2.3-dev. That seemed to go well:</p>\n\n<pre><code># sudo apt-get install ruby2.3-dev\n[sudo] password for terry:\nReading package lists... Done\nBuilding dependency tree\nReading state information... Done\nThe following additional packages will be installed:\n  libgmp-dev libgmpxx4ldbl\nSuggested packages:\n  gmp-doc libgmp10-doc libmpfr-dev\nThe following NEW packages will be installed:\n  libgmp-dev libgmpxx4ldbl ruby2.3-dev\n0 upgraded, 3 newly installed, 0 to remove and 0 not upgraded.\nNeed to get 1,357 kB of archives.\nAfter this operation, 6,493 kB of additional disk space will be used.\nDo you want to continue? [Y/n]\nGet:1 http://nyc2.mirrors.digitalocean.com/ubuntu xenial/main amd64 libgmpxx4ldbl amd64 2:6.1.0+dfsg-2 [8,948 B]\nGet:2 http://nyc2.mirrors.digitalocean.com/ubuntu xenial/main amd64 libgmp-dev amd64 2:6.1.0+dfsg-2 [314 kB]\nGet:3 http://nyc2.mirrors.digitalocean.com/ubuntu xenial-updates/main amd64 ruby2.3-dev amd64 2.3.1-2~16.04 [1,034 kB]\nFetched 1,357 kB in 0s (3,228 kB/s)\nSelecting previously unselected package libgmpxx4ldbl:amd64.\n(Reading database ... 125914 files and directories currently installed.)\nPreparing to unpack .../libgmpxx4ldbl_2%3a6.1.0+dfsg-2_amd64.deb ...\nUnpacking libgmpxx4ldbl:amd64 (2:6.1.0+dfsg-2) ...\nSelecting previously unselected package libgmp-dev:amd64.\nPreparing to unpack .../libgmp-dev_2%3a6.1.0+dfsg-2_amd64.deb ...\nUnpacking libgmp-dev:amd64 (2:6.1.0+dfsg-2) ...\nSelecting previously unselected package ruby2.3-dev:amd64.\nPreparing to unpack .../ruby2.3-dev_2.3.1-2~16.04_amd64.deb ...\nUnpacking ruby2.3-dev:amd64 (2.3.1-2~16.04) ...\nProcessing triggers for libc-bin (2.23-0ubuntu5) ...\nSetting up libgmpxx4ldbl:amd64 (2:6.1.0+dfsg-2) ...\nSetting up libgmp-dev:amd64 (2:6.1.0+dfsg-2) ...\nSetting up ruby2.3-dev:amd64 (2.3.1-2~16.04) ...\nProcessing triggers for libc-bin (2.23-0ubuntu5) ...\n</code></pre>\n\n<p>Then I attempted again to gem install sqlite3, and that didn't seem to go well:</p>\n\n<pre><code># sudo gem install sqlite3\nBuilding native extensions.  This could take a while...\nERROR:  Error installing sqlite3:\n        ERROR: Failed to build gem native extension.\n\n    current directory: /var/lib/gems/2.3.0/gems/sqlite3-1.3.13/ext/sqlite3\n/usr/bin/ruby2.3 -r ./siteconf20170308-16984-tcxs0x.rb extconf.rb\nchecking for sqlite3.h... no\nsqlite3.h is missing. Try 'brew install sqlite3',\n'yum install sqlite-devel' or 'apt-get install libsqlite3-dev'\nand check your shared library search path (the\nlocation where your sqlite3 shared library is located).\n*** extconf.rb failed ***\nCould not create Makefile due to some reason, probably lack of necessary\nlibraries and/or headers.  Check the mkmf.log file for more details.  You may\nneed configuration options.\n\nProvided configuration options:\n        --with-opt-dir\n        --without-opt-dir\n        --with-opt-include\n        --without-opt-include=${opt-dir}/include\n        --with-opt-lib\n        --without-opt-lib=${opt-dir}/lib\n        --with-make-prog\n        --without-make-prog\n        --srcdir=.\n        --curdir\n        --ruby=/usr/bin/$(RUBY_BASE_NAME)2.3\n        --with-sqlite3-config\n        --without-sqlite3-config\n        --with-pkg-config\n        --without-pkg-config\n        --with-sqlite3-dir\n        --without-sqlite3-dir\n        --with-sqlite3-include\n        --without-sqlite3-include=${sqlite3-dir}/include\n        --with-sqlite3-lib\n        --without-sqlite3-lib=${sqlite3-dir}/lib\n\nTo see why this extension failed to compile, please check the mkmf.log which can be found here:\n\n  /var/lib/gems/2.3.0/extensions/x86_64-linux/2.3.0/sqlite3-1.3.13/mkmf.log\n\nextconf failed, exit code 1\n\nGem files will remain installed in /var/lib/gems/2.3.0/gems/sqlite3-1.3.13 for inspection.\nResults logged to /var/lib/gems/2.3.0/extensions/x86_64-linux/2.3.0/sqlite3-1.3.13/gem_make.out\n</code></pre>\n\n<p>The log file mkmf.log has this:</p>\n\n<pre><code>package configuration for sqlite3 is not found\nfind_header: checking for sqlite3.h... -------------------- no\n\n\"gcc -o conftest -I/usr/include/x86_64-linux-gnu/ruby-2.3.0 -I/usr/include/ruby-2.3.0/ruby/backward -I/usr/include/ruby-2.3.0 -I. -Wdate-time -D_FORTIFY_SOURCE=2   -g -O2 -fstack-protector-strong -Wformat -Werror=format-security -fPIC conftest.c  -L. -L/usr/lib/x86_64-linux-gnu -L. -Wl,-Bsymbolic-functions -Wl,-z,relro -Wl,-z,now -fstack-protector -rdynamic -Wl,-export-dynamic     -lruby-2.3  -lpthread -lgmp -ldl -lcrypt -lm   -lc\"\nchecked program was:\n/* begin */\n1: #include \"ruby.h\"\n2:\n3: int main(int argc, char **argv)\n4: {\n5:   return 0;\n6: }\n/* end */\n\n\"gcc -E -I/usr/include/x86_64-linux-gnu/ruby-2.3.0 -I/usr/include/ruby-2.3.0/ruby/backward -I/usr/include/ruby-2.3.0 -I. -Wdate-time -D_FORTIFY_SOURCE=2   -g -O2 -fstack-protector-strong -Wformat -Werror=format-security -fPIC  conftest.c -o conftest.i\"\nconftest.c:3:21: fatal error: sqlite3.h: No such file or directory\ncompilation terminated.\nchecked program was:\n/* begin */\n1: #include \"ruby.h\"\n2:\n3: #include &lt;sqlite3.h&gt;\n/* end */\n\n--------------------\n</code></pre>\n"}, {"tags": ["ruby", "regex", "string", "split", "whitespace"], "comments": [{"owner": {"reputation": 1990, "user_id": 7529266, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/IGW24.jpg?s=128&g=1", "display_name": "MohaMad", "link": "https://stackoverflow.com/users/7529266/mohamad"}, "edited": false, "score": 0, "creation_date": 1489016713, "post_id": 42683488, "comment_id": 72492183, "body": "using <code>\\s+</code> pattern for split function, will return what you want. usage: <code>.split(&#47;\\s+&#47;)</code>"}], "answers": [{"tags": [], "owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "is_accepted": true, "score": 2, "last_activity_date": 1506277907, "last_edit_date": 1506277907, "creation_date": 1489013780, "answer_id": 42683530, "question_id": 42683488, "link": "https://stackoverflow.com/questions/42683488/how-do-i-split-on-multiple-white-space-or-tabs/42683530#42683530", "title": "How do I split on multiple white space or tabs?", "body": "<p>It happens because the group you used is a <em>capturing</em> one. See <a href=\"https://ruby-doc.org/core-2.4.0/String.html#method-i-split\" rel=\"nofollow noreferrer\"><code>split</code> reference</a>:</p>\n\n<blockquote>\n  <p>If <em>pattern</em> contains groups, the respective matches will be returned in the array as well.</p>\n</blockquote>\n\n<p>Use a <a href=\"https://stackoverflow.com/questions/3512471/what-is-a-non-capturing-group-what-does-a-question-mark-followed-by-a-colon\"><strong>non-capturing group</strong></a> (used only for grouping patterns) to avoid adding matched strings into the resulting array:</p>\n\n<pre><code>a.strip.split(/(?:[[:space:]][[:space:]]+|\\t)/)\n                ^^\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 67463, "user_id": 203130, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/1RE8c.jpg?s=128&g=1", "display_name": "coreyward", "link": "https://stackoverflow.com/users/203130/coreyward"}, "is_accepted": false, "score": 0, "last_activity_date": 1489014144, "last_edit_date": 1489014144, "creation_date": 1489013828, "answer_id": 42683539, "question_id": 42683488, "link": "https://stackoverflow.com/questions/42683488/how-do-i-split-on-multiple-white-space-or-tabs/42683539#42683539", "title": "How do I split on multiple white space or tabs?", "body": "<p>In this instance you can use a character class that includes both spaces and tabs in your regular expression:</p>\n\n<pre><code>\"b\\tc\\td\".split /[ \\t]+/\n</code></pre>\n\n<p>If you want to split on any whitespace, you can also use the <code>[\\s]+</code> notation, which matches all whitespace characters.</p>\n"}, {"tags": [], "owner": {"reputation": 183, "user_id": 10950352, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/72fc5073dd1ee2bf1b050309aa7ca6a2?s=128&d=identicon&r=PG&f=1", "display_name": "chitresh", "link": "https://stackoverflow.com/users/10950352/chitresh"}, "is_accepted": false, "score": 0, "last_activity_date": 1562759680, "creation_date": 1562759680, "answer_id": 56970198, "question_id": 42683488, "link": "https://stackoverflow.com/questions/42683488/how-do-i-split-on-multiple-white-space-or-tabs/56970198#56970198", "title": "How do I split on multiple white space or tabs?", "body": "<p>There are some easy approaches than accepted solution:</p>\n\n<pre><code>a.strip.split(\"\\s\")\n</code></pre>\n\n<p>or</p>\n\n<pre><code>a.split(\"\\s\")\n</code></pre>\n\n<p>'\\s' will take care for multiple whitespaces characters.</p>\n\n<p>for above case you can simply use:</p>\n\n<pre><code>a = \"b\\tc\\td\" \na.split(\"\\t\")    #=&gt; [\"b\", \"c\", \"d\"]\n</code></pre>\n\n<p>or for combination of multiple spaces and tabs</p>\n\n<pre><code>a.gsub(\"\\t\", \" \").split(\"\\s\")     #=&gt; [\"b\", \"c\", \"d\"]\n</code></pre>\n"}], "owner": {"reputation": 16802, "user_id": 1235929, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/9f460ae7deb6fa19034c810a53b9fbac?s=128&d=identicon&r=PG", "display_name": "Dave", "link": "https://stackoverflow.com/users/1235929/dave"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 980, "favorite_count": 0, "accepted_answer_id": 42683530, "answer_count": 3, "score": 1, "last_activity_date": 1562759680, "creation_date": 1489013584, "question_id": 42683488, "link": "https://stackoverflow.com/questions/42683488/how-do-i-split-on-multiple-white-space-or-tabs", "title": "How do I split on multiple white space or tabs?", "body": "<p>Hey in Ruby how do you split on multiple white space or a tab character?  I tried this</p>\n\n<pre><code>2.4.0 :003 &gt; a = \"b\\tc\\td\"\n =&gt; \"b\\tc\\td\" \n2.4.0 :005 &gt; a.strip.split(/([[:space:]][[:space:]]+|\\t)/)\n =&gt; [\"b\", \"\\t\", \"c\", \"\\t\", \"d\"]\n</code></pre>\n\n<p>but the tabs themselves are getting turned into tokens and that's not what I want.  The above should return </p>\n\n<pre><code>[\"b\", \"c\", \"d\"]\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 812, "user_id": 2394842, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9089757e5553d83415a6c3add8a3c2e9?s=128&d=identicon&r=PG", "display_name": "MaicolBen", "link": "https://stackoverflow.com/users/2394842/maicolben"}, "edited": false, "score": 0, "creation_date": 1489023367, "post_id": 42683402, "comment_id": 72494063, "body": "There is no issue, maybe you forgot to put <code>&#39;sass-rails&#39;</code> in your gemfile, and the <code>bundle update</code> fixed the problem. Also, the <code>tzinfo-data</code> message is a warning, you don&#39;t need that gem in linux, only in windows"}, {"owner": {"reputation": 25, "user_id": 6312895, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70c560dd195ecd6f939f333c458962ef?s=128&d=identicon&r=PG&f=1", "display_name": "CristiAllan", "link": "https://stackoverflow.com/users/6312895/cristiallan"}, "reply_to_user": {"reputation": 812, "user_id": 2394842, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9089757e5553d83415a6c3add8a3c2e9?s=128&d=identicon&r=PG", "display_name": "MaicolBen", "link": "https://stackoverflow.com/users/2394842/maicolben"}, "edited": false, "score": 0, "creation_date": 1489024686, "post_id": 42683402, "comment_id": 72494397, "body": "If the gem is in gemfile the message of tzinfo-data appear and the rails server doesn&#39;t works with the message   `rescue in block (2 levels) in require&#39;: There was an error while trying to load the gem &#39;sass-rails&#39;. (Bundler::GemRequireError) Gem Load Error is: uninitialized constant Sass::Script  When I comment the line gem &#39;sass-rails&#39;, rails s works well"}, {"owner": {"reputation": 812, "user_id": 2394842, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9089757e5553d83415a6c3add8a3c2e9?s=128&d=identicon&r=PG", "display_name": "MaicolBen", "link": "https://stackoverflow.com/users/2394842/maicolben"}, "edited": false, "score": 0, "creation_date": 1489069536, "post_id": 42683402, "comment_id": 72517544, "body": "I didn&#39;t saw in the post that you had to comment the line, maybe you&#39;ve to update the gem, there is a similar post recently about it: <a href=\"http://stackoverflow.com/questions/36963056/there-was-an-error-while-trying-to-load-the-gem-sass-rails-bundlergemrequi\" title=\"there was an error while trying to load the gem sass rails bundlergemrequi\">stackoverflow.com/questions/36963056/&hellip;</a>"}], "owner": {"reputation": 25, "user_id": 6312895, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70c560dd195ecd6f939f333c458962ef?s=128&d=identicon&r=PG&f=1", "display_name": "CristiAllan", "link": "https://stackoverflow.com/users/6312895/cristiallan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 833, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1489013218, "creation_date": 1489013218, "question_id": 42683402, "link": "https://stackoverflow.com/questions/42683402/rescue-in-block-2-levels-in-require-there-was-an-error-while-trying-to-load", "title": "`rescue in block (2 levels) in require&#39;: There was an error while trying to load the gem &#39;sass-rails&#39;. (Bundler::GemRequireError)", "body": "<p>I finish to install rails 5 at my ubuntu system(16.04.2 LTS) and I'm with this error when I try to run rails server command.</p>\n\n<pre><code>`rescue in block (2 levels) in require': There was an error while trying to load the gem 'sass-rails'. (Bundler::GemRequireError)\n</code></pre>\n\n<p>Gem Load Error is: uninitialized constant Sass::Script\nDid you mean?  ScriptError</p>\n\n<p>When I write bundle update, the prompt show me this message:</p>\n\n<pre><code>The dependency tzinfo-data (&gt;= 0) will be unused by any of the platforms Bundler is installing for. Bundler is installing for ruby but the dependency is only for x86-mingw32, x86-mswin32, x64-mingw32, java. To add those platforms to the bundle, run `bundle lock --add-platform x86-mingw32 x86-mswin32 x64-mingw32 java`.\n</code></pre>\n\n<p>and then it update well ... and show ~\u2273 Using sass-rails 5.0.6</p>\n\n<p>Please help-me guys, regards!</p>\n"}, {"tags": ["ruby", "hash", "iterator"], "answers": [{"comments": [{"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 2, "creation_date": 1489015222, "post_id": 42683276, "comment_id": 72491653, "body": "<code>Hash#sort_by</code> calls the block with a two element array (which you&#39;re deconstructing) so you could say <code>my_hash.sort_by(&amp;:last)</code> if you wanted."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 1, "creation_date": 1489033813, "post_id": 42683276, "comment_id": 72496888, "body": "@muistooshort, don&#39;t you mean <a href=\"http://ruby-doc.org/core-2.4.0/Enumerable.html#method-i-sort_by\" rel=\"nofollow noreferrer\">Enumerable#sort_by</a>? The class <code>Hash</code> has no  instance method by that name. Justin, &quot;You can sort the hash first,..&quot; may be interpreted to mean that the sort produces another hash with the key-value pairs reordered. It might be clearer to say that  you are sorting the hash&#39;s key-value pairs, producing an array of two-element arrays."}, {"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1489039589, "post_id": 42683276, "comment_id": 72498869, "body": "@CarySwoveland Sure, that would be more accurate. I was trying to short-hand my way to saying that all the Enumerable methods send two element arrays to the blocks when used on a Hash. Probably not my best use of English ever :)"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1489040005, "post_id": 42683276, "comment_id": 72499044, "body": "@muistooshort, when I saw <code>Hash#sort_by</code> I thought of <code>Hash#select</code>, which, unlike <code>Enumerable#select</code>, returns a hash (rather than an array)."}, {"owner": {"reputation": 525, "user_id": 7531267, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7VVvK.png?s=128&g=1", "display_name": "Justin Hellreich", "link": "https://stackoverflow.com/users/7531267/justin-hellreich"}, "edited": false, "score": 0, "creation_date": 1489090783, "post_id": 42683276, "comment_id": 72531437, "body": "Using <code>last</code> is much nicer, thanks! I&#39;ve also edited the answer to make it more clear how <code>sort_by</code> works."}], "tags": [], "owner": {"reputation": 525, "user_id": 7531267, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7VVvK.png?s=128&g=1", "display_name": "Justin Hellreich", "link": "https://stackoverflow.com/users/7531267/justin-hellreich"}, "is_accepted": true, "score": 2, "last_activity_date": 1489090619, "last_edit_date": 1489090619, "creation_date": 1489012704, "answer_id": 42683276, "question_id": 42683184, "link": "https://stackoverflow.com/questions/42683184/how-do-i-iterate-over-a-hash-by-ascending-value/42683276#42683276", "title": "How do I iterate over a hash by ascending value?", "body": "<p>You can sort the hash's key value pairs first, then iterate over it.</p>\n\n<pre><code>my_hash.sort_by { |_, value| value }.each { |key, value| puts key }\n</code></pre>\n\n<p>If <code>my_hash = {\"a\" =&gt; 2, \"b\" =&gt; 4, \"c\" =&gt; 1}</code>, the output is:</p>\n\n<blockquote>\n  <p>c<br>\n  a<br>\n  b</p>\n</blockquote>\n\n<hr>\n\n<p>As per the suggestion, you can the use <a href=\"http://ruby-doc.org/core-2.4.0/Array.html#method-i-last\" rel=\"nofollow noreferrer\">Array#last</a> instance method to simplify.</p>\n\n<pre><code>my_hash.sort_by(&amp;:last).each { |key, value| puts key }\n</code></pre>\n\n<hr>\n\n<h2>Enumerable#sort_by</h2>\n\n<p>See <a href=\"http://ruby-doc.org/core-2.4.0/Enumerable.html#method-i-sort_by\" rel=\"nofollow noreferrer\">Enumerable#sort_by</a> for the documentation.</p>\n\n<p>The block passed to <code>sort_by</code> is called with each key value pair.\nThe result of <code>sort_by</code> is a nested array.</p>\n\n<p>Using the above example:</p>\n\n<pre><code>p my_hash.sort_by(&amp;:last)\n</code></pre>\n\n<blockquote>\n  <p>[[\"c\", 1], [\"a\", 2], [\"b\", 4]]</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 34809, "user_id": 49695, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/007fcb22bed672220b54afb4c46ef8c3?s=128&d=identicon&r=PG", "display_name": "soundly_typed", "link": "https://stackoverflow.com/users/49695/soundly-typed"}, "is_accepted": false, "score": 0, "last_activity_date": 1597421184, "creation_date": 1597421184, "answer_id": 63416312, "question_id": 42683184, "link": "https://stackoverflow.com/questions/42683184/how-do-i-iterate-over-a-hash-by-ascending-value/63416312#63416312", "title": "How do I iterate over a hash by ascending value?", "body": "<p>In Ruby 2.7 you can <a href=\"https://rubyreferences.github.io/rubychanges/2.7.html#numbered-block-parameters\" rel=\"nofollow noreferrer\">numbered block parameters</a> to reference your hash key or hash value in a shorter way. Useful if you need to e.g. convert to a string:</p>\n<pre class=\"lang-rb prettyprint-override\"><code>my_hash.sort_by { _1.to_s }.each {|key, value| puts key }\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user7055375"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 411, "favorite_count": 0, "accepted_answer_id": 42683276, "answer_count": 2, "score": 0, "last_activity_date": 1597421184, "creation_date": 1489012369, "question_id": 42683184, "link": "https://stackoverflow.com/questions/42683184/how-do-i-iterate-over-a-hash-by-ascending-value", "title": "How do I iterate over a hash by ascending value?", "body": "<p>I'm using Ruby 2.4.  I hvae a hash, whose key is a string, and whose value is a number (a positive integer).  I iterate over pairs like so</p>\n\n<pre><code>  my_hash.each do |key, value|\n</code></pre>\n\n<p>My quesiton is, how do I iterate over my hash where each pair is sorted by ascending value?  That is, if my hash is</p>\n\n<pre><code>{\"a\" =&gt; 2, \"b\" =&gt; 4, \"c\" =&gt; 1}\n</code></pre>\n\n<p>The \"c\" => 1 pair will be iterated over first, followed by the \"a\" => 2, and then the \"b\" => 4.</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 25463, "user_id": 5003756, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8BUMb.jpg?s=128&g=1", "display_name": "James", "link": "https://stackoverflow.com/users/5003756/james"}, "edited": false, "score": 0, "creation_date": 1489015383, "post_id": 42683083, "comment_id": 72491707, "body": "Rather than just asking what is wrong, please post what outcome you are expecting and what you are seeing."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1489018660, "post_id": 42683083, "comment_id": 72492816, "body": "You can also do this a lot more easily with <code>string.each_char</code> and <code>character.ord - &#39;a&#39;.ord</code> to get the index of a character. For ciphers it&#39;s actually just one line: use <a href=\"https://ruby-doc.org/core-2.4.0/String.html#method-i-tr\" rel=\"nofollow noreferrer\"><code>tr</code></a>."}], "answers": [{"tags": [], "owner": {"reputation": 4446, "user_id": 6079412, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e5e6c2756113d7289e80bed137251db?s=128&d=identicon&r=PG&f=1", "display_name": "larz", "link": "https://stackoverflow.com/users/6079412/larz"}, "is_accepted": true, "score": 4, "last_activity_date": 1489012349, "creation_date": 1489012349, "answer_id": 42683179, "question_id": 42683083, "link": "https://stackoverflow.com/questions/42683083/whats-wrong-with-my-code/42683179#42683179", "title": "What&#39;s wrong with my code?", "body": "<p>All I had to do was change your alphabet array to go from a to z, not a to b, and it works fine.</p>\n\n<pre><code>def encrypt(string)\n  alphabet = (\"a\"..\"z\").to_a\n  result = \"\"\n  idx = 0\n  while idx &lt; string.length\n    character = string[idx]\n\n    if character == \" \"\n      result += \" \"\n    else\n      n = alphabet.index(character)\n      n_plus = (n + 1) % alphabet.length\n      result += alphabet[n_plus]\n    end\n    idx += 1\n  end\n  return result\nend\nputs encrypt(\"abc\")\nputs encrypt(\"xyz\")\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 7579755, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-9H5bhCdH-Dg/AAAAAAAAAAI/AAAAAAAAATU/Fe1KmnDBafY/photo.jpg?sz=128", "display_name": "Mike Tsou", "link": "https://stackoverflow.com/users/7579755/mike-tsou"}, "edited": false, "score": 0, "creation_date": 1489013189, "post_id": 42683333, "comment_id": 72490851, "body": "Wonderful! Thank you for this, I will keep this in mind."}, {"owner": {"reputation": 1548, "user_id": 1246279, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2533d5a4299cad329268e552c47fa8d?s=128&d=identicon&r=PG", "display_name": "philomory", "link": "https://stackoverflow.com/users/1246279/philomory"}, "edited": false, "score": 1, "creation_date": 1489013328, "post_id": 42683333, "comment_id": 72490906, "body": "wouldn&#39;t <code>tr</code> be a lot simpler than <code>gsub</code> in this case?"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 1548, "user_id": 1246279, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2533d5a4299cad329268e552c47fa8d?s=128&d=identicon&r=PG", "display_name": "philomory", "link": "https://stackoverflow.com/users/1246279/philomory"}, "edited": false, "score": 0, "creation_date": 1489013863, "post_id": 42683333, "comment_id": 72491129, "body": "@philomory, I used <code>gsub</code> so that I could use a hash with it. Using <code>tr</code> is a good idea, but I don&#39;t see how it&#39;s simpler than <code>gsub</code>.  The only problem with <code>tr</code> is that it&#39;s a bit messy here. Either you convert the string to an array of characters, apply <code>tr</code>, then join, or you make a copy of the string and replace characters in place. In any event, please put up an answer showing how it could be used."}, {"owner": {"reputation": 1548, "user_id": 1246279, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2533d5a4299cad329268e552c47fa8d?s=128&d=identicon&r=PG", "display_name": "philomory", "link": "https://stackoverflow.com/users/1246279/philomory"}, "edited": false, "score": 0, "creation_date": 1489014292, "post_id": 42683333, "comment_id": 72491295, "body": "@CarySwoveland I added my own answer showing <code>tr</code> usage, you don&#39;t need to convert the string to an array in order to use <code>tr</code>, <code>tr</code> is a String method."}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 0, "last_activity_date": 1489014055, "last_edit_date": 1489014055, "creation_date": 1489012973, "answer_id": 42683333, "question_id": 42683083, "link": "https://stackoverflow.com/questions/42683083/whats-wrong-with-my-code/42683333#42683333", "title": "What&#39;s wrong with my code?", "body": "<p>Your question has been answered, so here are a couple of more Ruby-like ways of doing that.</p>\n\n<p><strong>Use <a href=\"http://ruby-doc.org/core-2.3.0/String.html#method-i-gsub\" rel=\"nofollow noreferrer\">String#gsub</a> with a hash</strong></p>\n\n<pre><code>CODE_MAP = ('a'..'z').each_with_object({}) { |c,h| h[c] = c &lt; 'z' ? c.next : 'a' }\n  #=&gt; {\"a\"=&gt;\"b\", \"b\"=&gt;\"c\",..., \"y\"=&gt;\"z\", \"z\"=&gt;\"a\"}\nDECODE_MAP = CODE_MAP.invert\n  #=&gt; {\"b\"=&gt;\"a\", \"c\"=&gt;\"b\",..., \"z\"=&gt;\"y\", \"a\"=&gt;\"z\"}\n\ndef encrypt(word)\n  word.gsub(/./, CODE_MAP)\nend\n\ndef decrypt(word)\n  word.gsub(/./, DECODE_MAP)\nend\n\nencrypt('pizza')\n  #=&gt; \"qjaab\"\n\ndecrypt('qjaab')\n  #=&gt; \"pizza\"\n</code></pre>\n\n<p><strong>Use <code>String#gsub</code> with <a href=\"http://ruby-doc.org/core-2.3.0/Array.html#method-i-rotate\" rel=\"nofollow noreferrer\">Array#rotate</a></strong></p>\n\n<pre><code>LETTERS = ('a'..'z').to_a\n  #=&gt; [\"a\", \"b\", ..., \"z\"]\n\ndef encrypt(word)\n  word.gsub(/./) { |c| LETTERS.rotate[LETTERS.index(c)] }\n end\n\ndef decrypt(word)\n  word.gsub(/./) { |c| LETTERS.rotate(-1)[LETTERS.index(c)] }\nend\n\nencrypt('pizza')\n  #=&gt; \"qjaab\"\n\ndecrypt('qjaab')\n  #=&gt; \"pizza\"\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1489034584, "post_id": 42683466, "comment_id": 72497121, "body": "<code>encrypt &#39;z&#39; #=&gt; &quot;{&quot;</code> should return <code>&#39;a&#39;</code>. The OP&#39;s question doesn&#39;t mention spaces (or periods, commas, question marks and so on) and his/her code only references lower-case letters. I think we can safely assume that <code>string</code> is comprised entirely of lower-case letters (a word). Your code is very procedural, not making use of Ruby&#39;s powerful methods."}, {"owner": {"reputation": 1266, "user_id": 2977636, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/9f51b0e43d761ea1c8d8d0f498783462?s=128&d=identicon&r=PG&f=1", "display_name": "user2977636", "link": "https://stackoverflow.com/users/2977636/user2977636"}, "edited": false, "score": 0, "creation_date": 1489035641, "post_id": 42683466, "comment_id": 72497459, "body": "Agreed, it is more on the procedural side I am merely presenting an alternative way of solving the problem that uses less memory. I don&#39;t know what &quot;powerful&quot; methods refer to in this case and I don&#39;t know even know what &quot;powerful&quot; means in this context so I don&#39;t know how to address that comment. While the OP did not mention spaces in the question, his code deals with the case so I decided to as well."}], "tags": [], "owner": {"reputation": 1266, "user_id": 2977636, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/9f51b0e43d761ea1c8d8d0f498783462?s=128&d=identicon&r=PG&f=1", "display_name": "user2977636", "link": "https://stackoverflow.com/users/2977636/user2977636"}, "is_accepted": false, "score": 0, "last_activity_date": 1489013507, "creation_date": 1489013507, "answer_id": 42683466, "question_id": 42683083, "link": "https://stackoverflow.com/questions/42683083/whats-wrong-with-my-code/42683466#42683466", "title": "What&#39;s wrong with my code?", "body": "<p>Alternatively if you don't want to take up that memory storing the alphabet you could use character codings and then just use arithmetic operations on them to shift the letters:</p>\n\n<pre><code>def encrypt(string)      \n  result = \"\"\n  idx = 0\n  while idx &lt; string.length\n    result += (string[idx].ord == 32 ? (string[idx].chr) : (string[idx].ord+1).chr)\n    idx += 1\n  end\n\n  result\nend\n</code></pre>\n\n<p>Other strange thing about ruby is that you do not need to explicitly return something at the end of the method body. It just returns the last thing by default. This is considered good style amongst ruby folks.</p>\n"}, {"comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1489033049, "post_id": 42683619, "comment_id": 72496683, "body": "<code>tr</code> is the way to go for simple ciphers. It&#39;s a little peculiar in how it works, but it does one thing very, very well. The performance is usually vastly beyond any <code>gsub</code> equivalent. Your translation variable <code>BMQIB</code> is also amusing."}], "tags": [], "owner": {"reputation": 1548, "user_id": 1246279, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2533d5a4299cad329268e552c47fa8d?s=128&d=identicon&r=PG", "display_name": "philomory", "link": "https://stackoverflow.com/users/1246279/philomory"}, "is_accepted": false, "score": 2, "last_activity_date": 1489014641, "last_edit_date": 1489014641, "creation_date": 1489014212, "answer_id": 42683619, "question_id": 42683083, "link": "https://stackoverflow.com/questions/42683083/whats-wrong-with-my-code/42683619#42683619", "title": "What&#39;s wrong with my code?", "body": "<p>Another way to solve the issue, that I think is simpler, personally, is to use <a href=\"https://ruby-doc.org/core-2.4.0/String.html#method-i-tr\" rel=\"nofollow noreferrer\"><code>String#tr</code></a>:</p>\n\n<pre><code>ALPHA = ('a'..'z').to_a.join             #=&gt; \"abcdefghijklmnopqrstuvwxyz\"\nBMQIB = ('a'..'z').to_a.rotate(1).join   #=&gt; \"bcdefghijklmnopqrstuvwxyza\"\n\ndef encrypt(str)\n  str.tr(ALPHA,BMQIB)\nend\n\ndef decrypt(str)\n  str.tr(BMQIB,ALPHA)\nend\n\nencrypt('pizza') #=&gt; \"qjaab\"\ndecrypt('qjaab') #=&gt; \"pizza\"\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 7579755, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-9H5bhCdH-Dg/AAAAAAAAAAI/AAAAAAAAATU/Fe1KmnDBafY/photo.jpg?sz=128", "display_name": "Mike Tsou", "link": "https://stackoverflow.com/users/7579755/mike-tsou"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "accepted_answer_id": 42683179, "answer_count": 4, "score": -2, "last_activity_date": 1489014641, "creation_date": 1489011959, "question_id": 42683083, "link": "https://stackoverflow.com/questions/42683083/whats-wrong-with-my-code", "title": "What&#39;s wrong with my code?", "body": "<pre><code>    def encrypt(string)\n      alphabet = (\"a\"..\"b\").to_a\n      result = \"\"\n      idx = 0\n      while idx &lt; string.length\n        character = string[idx]\n\n        if character == \" \"\n          result += \" \"\n        else\n          n = alphabet.index(character)\n          n_plus = (n + 1) % alphabet.length\n          result += alphabet[n_plus]\n        end\n        idx += 1\n      end\n      return result\n    end\n    puts encrypt(\"abc\")\n    puts encrypt(\"xyz\")\n</code></pre>\n\n<p>I'm trying to get \"abc\" to print out \"bcd\" and \"xyz\" to print \"yza\". I want to advance the letter forward by 1. Can someone point me to the right direction?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec", "rspec-rails"], "comments": [{"owner": {"reputation": 26120, "user_id": 219883, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c35b5b0f9e7cce48864f4f1545ead995?s=128&d=identicon&r=PG", "display_name": "Taryn East", "link": "https://stackoverflow.com/users/219883/taryn-east"}, "edited": false, "score": 1, "creation_date": 1489014673, "post_id": 42682762, "comment_id": 72491438, "body": "So at this point, I&#39;d double-check all the small underlying assumptions... even if you know they should hold. In your console... can you try <code>tenant.respond_to?(:free_courses_enabled?)</code> also try <code>tenant.respond_to?(&quot;free_courses_enabled?&quot;)</code> (you know you can use a string, you don&#39;t need to to_sym it right?) in your <code>has_feature?</code> method I&#39;d try <i>not</i> to_symming it... I&#39;d also try not overloading the variable-name <code>feature</code> (in case it&#39;s some weird scoping error) eg: <code>feature_method = &quot;#{feature}_enabled?&quot;</code> and <code>respond_to?(feature_method) &amp;&amp; send(feature_method)</code>"}, {"owner": {"reputation": 26120, "user_id": 219883, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c35b5b0f9e7cce48864f4f1545ead995?s=128&d=identicon&r=PG", "display_name": "Taryn East", "link": "https://stackoverflow.com/users/219883/taryn-east"}, "edited": false, "score": 0, "creation_date": 1489014723, "post_id": 42682762, "comment_id": 72491457, "body": "also try <code>puts &quot; do I respond to method: #{feature_method.inspect} ? #{respond_to?(feature_method)}&quot;</code> to check you&#39;re trying what you think you&#39;re trying and getting the response you think you are..."}, {"owner": {"reputation": 26120, "user_id": 219883, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c35b5b0f9e7cce48864f4f1545ead995?s=128&d=identicon&r=PG", "display_name": "Taryn East", "link": "https://stackoverflow.com/users/219883/taryn-east"}, "edited": false, "score": 3, "creation_date": 1489014789, "post_id": 42682762, "comment_id": 72491483, "body": "But finally... yes... ruby defines the <code>respond_to?</code> set ever-so-slightly-differently to the set of methods that will actually not explode if you try to <code>send</code> to them... so there is a chance that you really are getting different results (mostly this&#39;ll happen if you&#39;re using <code>method_missing</code> to define the method)"}, {"owner": {"reputation": 51109, "user_id": 53653, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/7f25eecbc1d0eed895a2809ce83ddf59?s=128&d=identicon&r=PG", "display_name": "typeoneerror", "link": "https://stackoverflow.com/users/53653/typeoneerror"}, "reply_to_user": {"reputation": 26120, "user_id": 219883, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c35b5b0f9e7cce48864f4f1545ead995?s=128&d=identicon&r=PG", "display_name": "Taryn East", "link": "https://stackoverflow.com/users/219883/taryn-east"}, "edited": false, "score": 0, "creation_date": 1489015446, "post_id": 42682762, "comment_id": 72491734, "body": "@TarynEast thanks for the advice! I tried everything you suggested and they all return false (do I respond to method: &quot;free_courses_enabled?&quot; ? false), yet it still seems to actually &quot;send&quot; the method according to rspec. so it&#39;s either weirdness of rspec mocking or respond_to? might do something fancy. I&#39;m not super worried about it. Code does what I want."}, {"owner": {"reputation": 26120, "user_id": 219883, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c35b5b0f9e7cce48864f4f1545ead995?s=128&d=identicon&r=PG", "display_name": "Taryn East", "link": "https://stackoverflow.com/users/219883/taryn-east"}, "edited": false, "score": 0, "creation_date": 1489015536, "post_id": 42682762, "comment_id": 72491773, "body": "heh, yeah that is weird... I wonder if, beneath the covers <code>respond_to?</code> is doing something super-odd... like trying to send and then catching the <code>NoMethodError</code> exception (as you mentioned) :P I would have thought it would have just checked the internal array of method-names..."}, {"owner": {"reputation": 26120, "user_id": 219883, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c35b5b0f9e7cce48864f4f1545ead995?s=128&d=identicon&r=PG", "display_name": "Taryn East", "link": "https://stackoverflow.com/users/219883/taryn-east"}, "edited": false, "score": 0, "creation_date": 1489015682, "post_id": 42682762, "comment_id": 72491829, "body": "Checking the source code: <a href=\"http://apidock.com/ruby/Object/respond_to%3F\" rel=\"nofollow noreferrer\">apidock.com/ruby/Object/respond_to%3F</a> no, it&#39;s not doing it the try-catch way (which is good)"}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1489016911, "post_id": 42682762, "comment_id": 72492254, "body": "In your has_feature? method, why are you using <code>|</code> and not <code>||</code>? Are you trying to use bitwise &quot;or&quot; instead of regular &quot;or&quot;?"}, {"owner": {"reputation": 51109, "user_id": 53653, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/7f25eecbc1d0eed895a2809ce83ddf59?s=128&d=identicon&r=PG", "display_name": "typeoneerror", "link": "https://stackoverflow.com/users/53653/typeoneerror"}, "reply_to_user": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1489016966, "post_id": 42682762, "comment_id": 72492278, "body": "@maxple I am using ||, that was an experiement"}, {"owner": {"reputation": 51109, "user_id": 53653, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/7f25eecbc1d0eed895a2809ce83ddf59?s=128&d=identicon&r=PG", "display_name": "typeoneerror", "link": "https://stackoverflow.com/users/53653/typeoneerror"}, "reply_to_user": {"reputation": 26120, "user_id": 219883, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c35b5b0f9e7cce48864f4f1545ead995?s=128&d=identicon&r=PG", "display_name": "Taryn East", "link": "https://stackoverflow.com/users/219883/taryn-east"}, "edited": false, "score": 0, "creation_date": 1489019266, "post_id": 42682762, "comment_id": 72493000, "body": "@TarynEast I&#39;m \ud83d\udc40 <a href=\"http://apidock.com/rails/ActiveModel/AttributeMethods/respond_to%3F\" rel=\"nofollow noreferrer\">apidock.com/rails/ActiveModel/AttributeMethods/respond_to%3F</a>&zwnj;&#8203;. The override here is where it&#39;s going off the rails."}, {"owner": {"reputation": 26120, "user_id": 219883, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c35b5b0f9e7cce48864f4f1545ead995?s=128&d=identicon&r=PG", "display_name": "Taryn East", "link": "https://stackoverflow.com/users/219883/taryn-east"}, "edited": false, "score": 0, "creation_date": 1489019762, "post_id": 42682762, "comment_id": 72493142, "body": "So I guess the next relevant question might be... where/how do you define your <code>&quot;#{feature}_enabled?&quot;</code> methods?"}, {"owner": {"reputation": 51109, "user_id": 53653, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/7f25eecbc1d0eed895a2809ce83ddf59?s=128&d=identicon&r=PG", "display_name": "typeoneerror", "link": "https://stackoverflow.com/users/53653/typeoneerror"}, "reply_to_user": {"reputation": 26120, "user_id": 219883, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c35b5b0f9e7cce48864f4f1545ead995?s=128&d=identicon&r=PG", "display_name": "Taryn East", "link": "https://stackoverflow.com/users/219883/taryn-east"}, "edited": false, "score": 1, "creation_date": 1489020690, "post_id": 42682762, "comment_id": 72493412, "body": "@TarynEast boolean database fields. Rails creates name_enabled, name_enabled?, and name_enabled=, so I was assuming I could check if name_enabled? was defined. I get a different result with &quot;name_enabled&quot; and &quot;name_enabled?&quot; so I think there&#39;s something there."}, {"owner": {"reputation": 1302, "user_id": 1368977, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c79672007d59af69a05f2b5f6929b53f?s=128&d=identicon&r=PG", "display_name": "Marc Rohloff", "link": "https://stackoverflow.com/users/1368977/marc-rohloff"}, "edited": false, "score": 0, "creation_date": 1489080309, "post_id": 42682762, "comment_id": 72525446, "body": "I wouldn&#39;t consider this a bg. When you write this <code>expect(tenant).not_to receive(:free_courses_enabled?)</code> rspec has to create a method on your object to test whether it has been called or not, so when your code runs then it finds the method to be defined. You might have to stub <code>respond_to?</code> to get the result you are expecting."}, {"owner": {"reputation": 51109, "user_id": 53653, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/7f25eecbc1d0eed895a2809ce83ddf59?s=128&d=identicon&r=PG", "display_name": "typeoneerror", "link": "https://stackoverflow.com/users/53653/typeoneerror"}, "reply_to_user": {"reputation": 1302, "user_id": 1368977, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c79672007d59af69a05f2b5f6929b53f?s=128&d=identicon&r=PG", "display_name": "Marc Rohloff", "link": "https://stackoverflow.com/users/1368977/marc-rohloff"}, "edited": false, "score": 0, "creation_date": 1489091371, "post_id": 42682762, "comment_id": 72531582, "body": "@MarcRohloff Yes, you are correct. Took me a while to figure that out. Answered the question with my findings below. Thanks for your comment."}], "answers": [{"tags": [], "owner": {"reputation": 51109, "user_id": 53653, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/7f25eecbc1d0eed895a2809ce83ddf59?s=128&d=identicon&r=PG", "display_name": "typeoneerror", "link": "https://stackoverflow.com/users/53653/typeoneerror"}, "is_accepted": true, "score": 0, "last_activity_date": 1489023344, "last_edit_date": 1489023344, "creation_date": 1489022470, "answer_id": 42684963, "question_id": 42682762, "link": "https://stackoverflow.com/questions/42682762/how-can-a-ruby-method-not-repond-to-a-method-but-also-call-the-method/42684963#42684963", "title": "How can a ruby method not repond_to a method but also call the method?", "body": "<p>I think I figured this out after running my head into various libraries. <code>Tenant</code> does not define a method called <code>payment_options_features?</code>, so when I go into the console and do:</p>\n\n<pre><code>tenant.respond_to?(:payment_options_features?) # false\n</code></pre>\n\n<p>However, I believe my expectation that tenant should not receive the method in my RSpec test...</p>\n\n<pre><code>expect(tenant).not_to receive(:payment_options_features?)\n</code></pre>\n\n<p>actually <em>creates</em> a mock of that function on the tenant object, so when the test runs:</p>\n\n<pre><code>tenant.respond_to?(:payment_options_features?) # true\n</code></pre>\n\n<p>Because it's \"mocked\". The alternative is to do this instead since we know <code>send</code> is a method that should always exist.</p>\n\n<pre><code>expect(tenant).not_to receive(:send).with('payment_options_features?')\n</code></pre>\n"}], "owner": {"reputation": 51109, "user_id": 53653, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/7f25eecbc1d0eed895a2809ce83ddf59?s=128&d=identicon&r=PG", "display_name": "typeoneerror", "link": "https://stackoverflow.com/users/53653/typeoneerror"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 158, "favorite_count": 0, "accepted_answer_id": 42684963, "answer_count": 1, "score": 0, "last_activity_date": 1489023361, "creation_date": 1489010627, "last_edit_date": 1489023361, "question_id": 42682762, "link": "https://stackoverflow.com/questions/42682762/how-can-a-ruby-method-not-repond-to-a-method-but-also-call-the-method", "title": "How can a ruby method not repond_to a method but also call the method?", "body": "<p>I'm working with a little method that checks to see if a Tenant has a feature enabled. Each Tenant has a TenantPlan which stores the flags. I also have some flags on the Tenant model that can be used to override the plan-specific flags. A little feature detect method looks like this on the Tenant model:</p>\n\n<pre><code>def has_feature?(feature, feature_default = false)\n  if tenant_plan\n    feature = \"#{feature}_enabled?\".to_sym\n    return tenant_plan.send(feature) || (respond_to?(feature) and send(feature))\n  end\n  feature_default\nend\n</code></pre>\n\n<p>The part I'm most interested in for this question is this:</p>\n\n<pre><code>(respond_to?(feature) and send(feature))\n</code></pre>\n\n<p>I'm checking if a field of the same name exists on the Tenant model and getting the result of that if it does.</p>\n\n<p>If I use console to check this out:</p>\n\n<pre><code>[1] pry(main)&gt; false and tenant.send(:free_courses_enabled?)\n=&gt; false\n\n[2] pry(main)&gt; true and tenant.send(:free_courses_enabled?)\nNoMethodError: undefined method `free_courses_enabled?' for #&lt;Tenant:0x007f8f7171d6c8&gt;\nfrom /Users/typeoneerror/.rvm/gems/ruby-2.2.4@doki/gems/activemodel-4.2.7.1/lib/active_model/attribute_methods.rb:433:in `method_missing'\n</code></pre>\n\n<p>I would expect the <code>send</code> to not even get called if Tenant does not <code>respond_to?</code> the feature method, which is what looks like is happening in the console tests, but I'm finding in my tests that even when <code>respond_to?</code> returns false, send is called but no <code>NoMethodError</code> is raised.</p>\n\n<pre><code>expect(tenant).not_to receive(:free_courses_enabled?)\n</code></pre>\n\n<p>result:</p>\n\n<pre><code>expected no Exception, got #&lt;RSpec::Mocks::MockExpectationError: (#&lt;Tenant:0x007fdfd908a2a8&gt;).free_courses_enabled?(no args)\n           expected: 0 times with any arguments\n           received: 1 time&gt; with backtrace:\n</code></pre>\n\n<p>Somewhat hilariously, when I expect the opposite:</p>\n\n<pre><code>expect(tenant).to receive(:free_courses_enabled?).and_call_original\n</code></pre>\n\n<p>We get</p>\n\n<pre><code> NoMethodError:\n   undefined method `free_courses_enabled?' for #&lt;Tenant:0x007f8254bfedd8&gt;\n</code></pre>\n\n<p>I'm at a loss.</p>\n\n<p>Does ruby swallow the <code>NoMethodError</code> exception in this case while calling the method since the first part of the expression returns false? Would appreciate an explanation and happy to hear any advice on rewrites.</p>\n\n<p>It's looking to me like a RSpec bug with ActiveModel. When I don't add the expectation and when I run code in development it acts as expected.</p>\n"}, {"tags": ["ruby", "ruby-on-rails-4", "docker", "docker-compose"], "answers": [{"comments": [{"owner": {"reputation": 44774, "user_id": 4296747, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-muYS9LV5AoA/AAAAAAAAAAI/AAAAAAAACG4/KcTmlFyGWRI/photo.jpg?sz=128", "display_name": "Frederic Henri", "link": "https://stackoverflow.com/users/4296747/frederic-henri"}, "edited": false, "score": 0, "creation_date": 1489047056, "post_id": 42683100, "comment_id": 72502572, "body": "Thanks, it helps moving forward - I have indeed in the <code>Gemfile</code> api declared as <code>gem &#39;api&#39;, path: &#39;api&#47;&#39;</code> and I&#39;ve added gemspec for the engine into Docker, still I get another issue - see edit from the post"}, {"owner": {"reputation": 5382, "user_id": 7671538, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3506350bc4dd02281ad7f99e8e84715c?s=128&d=identicon&r=PG&f=1", "display_name": "gwcodes", "link": "https://stackoverflow.com/users/7671538/gwcodes"}, "reply_to_user": {"reputation": 44774, "user_id": 4296747, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-muYS9LV5AoA/AAAAAAAAAAI/AAAAAAAACG4/KcTmlFyGWRI/photo.jpg?sz=128", "display_name": "Frederic Henri", "link": "https://stackoverflow.com/users/4296747/frederic-henri"}, "edited": false, "score": 0, "creation_date": 1489060002, "post_id": 42683100, "comment_id": 72511139, "body": "@Fr&#233;d&#233;ricHenri: it sounds like you&#39;ll need your Dockerfile to copy over any files that is listed as a <code>require</code> too. Probably <code>api&#47;lib&#47;version.rb</code>?"}, {"owner": {"reputation": 44774, "user_id": 4296747, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-muYS9LV5AoA/AAAAAAAAAAI/AAAAAAAACG4/KcTmlFyGWRI/photo.jpg?sz=128", "display_name": "Frederic Henri", "link": "https://stackoverflow.com/users/4296747/frederic-henri"}, "edited": false, "score": 0, "creation_date": 1489142222, "post_id": 42683100, "comment_id": 72552665, "body": "yep it would work - I&#39;ve hard-coded the version now so we dont require another ruby file - thought it would be more straightforward"}], "tags": [], "owner": {"reputation": 5382, "user_id": 7671538, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3506350bc4dd02281ad7f99e8e84715c?s=128&d=identicon&r=PG&f=1", "display_name": "gwcodes", "link": "https://stackoverflow.com/users/7671538/gwcodes"}, "is_accepted": true, "score": 2, "last_activity_date": 1489012027, "creation_date": 1489012027, "answer_id": 42683100, "question_id": 42682607, "link": "https://stackoverflow.com/questions/42682607/rails-engine-apps-deployed-with-docker/42683100#42683100", "title": "Rails engine apps deployed with docker", "body": "<p>How are the engines loaded? Do you have a line that looks like this in the <code>Gemfile</code> of the main application:</p>\n\n<pre><code>gem 'api', path: '/api'\n</code></pre>\n\n<p>If so, you may also need to copy across the <code>.gemspec</code> files.</p>\n"}], "owner": {"reputation": 44774, "user_id": 4296747, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-muYS9LV5AoA/AAAAAAAAAAI/AAAAAAAACG4/KcTmlFyGWRI/photo.jpg?sz=128", "display_name": "Frederic Henri", "link": "https://stackoverflow.com/users/4296747/frederic-henri"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 973, "favorite_count": 0, "accepted_answer_id": 42683100, "answer_count": 1, "score": 1, "last_activity_date": 1489046985, "creation_date": 1489010005, "last_edit_date": 1489046985, "question_id": 42682607, "link": "https://stackoverflow.com/questions/42682607/rails-engine-apps-deployed-with-docker", "title": "Rails engine apps deployed with docker", "body": "<p>We have a rails app developed with a few rails engine so it looks like</p>\n\n<pre><code>app/              &lt;-- main app\napp.json\nGemfile -&gt; config/Gemfile\nGemfile.lock\napi/              &lt;-- this is an engine app\nintegrations/     &lt;-- this is an engine app\nother_engine_app/\n</code></pre>\n\n<p>everything works fine but now I am looking to deployed on docker using docker-compose</p>\n\n<p>I created a simple <code>Dockerfile</code></p>\n\n<pre><code>FROM ruby:2.3.1\n\nRUN apt-get update -qq &amp;&amp; apt-get install -y apt-utils build-essential nodejs \n\nENV APP_HOME /myapp\nRUN mkdir -p $APP_HOME\nWORKDIR $APP_HOME\n\nADD Gemfile Gemfile.lock $APP_HOME/\n\nRUN gem install bundler\nRUN bundle install\n\nADD . $APP_HOME\n</code></pre>\n\n<p>The <code>docker-compose.yml</code> file is looking like</p>\n\n<pre><code>app:\n  build: .\n  volumes:\n    - .:/myapp\n  ports:\n    - \"3000:3000\"\n  links:\n    - db\n    - redis\n\ndb:\n  image: mysql:5.6\n\nredis:\n  image: redis\n</code></pre>\n\n<p>At this stage when I run <code>docker-compose up</code> I get</p>\n\n<pre><code>$ docker-compose up\nBuilding app\nStep 1/10 : FROM ruby:2.3.1\n.....\nStep 9/10 : RUN bundle install\n ---&gt; Running in 3748ba73eb9b\nThe path `/myapp/api` does not exist.\nERROR: Service 'app' failed to build: The command '/bin/sh -c bundle install' returned a non-zero code: 13\n</code></pre>\n\n<p>I can bypass this error by adding the Gemfile into each engine app from my <code>Dockerfile</code> as</p>\n\n<pre><code>FROM ruby:2.3.1\n\nRUN apt-get update -qq &amp;&amp; apt-get install -y apt-utils build-essential nodejs\n\nENV APP_HOME /myapp\nRUN mkdir -p $APP_HOME\nWORKDIR $APP_HOME\n\nADD Gemfile Gemfile.lock $APP_HOME/\nADD Gemfile Gemfile.lock $APP_HOME/api/\nADD Gemfile Gemfile.lock $APP_HOME/integrations/\nADD Gemfile Gemfile.lock $APP_HOME/other_engine_app/\n\nRUN gem install bundler\nRUN bundle install\n\nADD . $APP_HOME\n</code></pre>\n\n<p>but now I get the following error</p>\n\n<pre><code>$ docker-compose up\nBuilding app\nStep 1/10 : FROM ruby:2.3.1\n.......\nStep 12/13 : RUN bundle install\n ---&gt; Running in 3928848ed6e5\nFetching https://github.com/rails-api/active_model_serializers\nFetching https://github.com/activeadmin/activeadmin\nFetching gem metadata from https://rails-assets.org/..\nFetching version metadata from https://rails-assets.org/.\nFetching gem metadata from https://rails-assets.org/..\nFetching gem metadata from http://rubygems.org/..........\nFetching version metadata from https://rails-assets.org/..\nFetching version metadata from http://rubygems.org/...\nFetching dependency metadata from https://rails-assets.org/..\nFetching dependency metadata from http://rubygems.org/..\nCould not find gem 'api' in source at `api`.\nSource does not contain any versions of 'api'\nERROR: Service 'app' failed to build: The command '/bin/sh -c bundle install' returned a non-zero code: 7\n</code></pre>\n\n<h1>EDIT :</h1>\n\n<p>Thanks to gwcodes, I can move forward but still hit an issue</p>\n\n<p>The main Gemfile has dependency defined on the rails engine as</p>\n\n<pre><code>source 'http://rubygems.org'\n\nruby '2.3.1'\n\ngem 'dotenv-rails', require: 'dotenv/rails-now'\n\n# Engines.\ngem 'api', path: 'api/'\ngem 'integrations', path: 'integrations'\ngem 'other_engine_app', path: 'other_engine_app'\n\n....\n</code></pre>\n\n<p>in <code>api/</code> folder we have gemspec defined as `api.gemspec``</p>\n\n<pre><code>$:.push File.expand_path('../lib', __FILE__)\n\nrequire 'api/version'\n\nGem::Specification.new do |s|\n  s.name        = 'api'\n  s.version     = Api::VERSION\n  s.authors     = ...\n  s.email       = ...\n  s.homepage    = ...\n  s.summary     = ...\n\n  s.files = Dir['{app,config,lib}/**/*'] + ['Rakefile']\n\n  s.add_dependency 'rails'\n  s.add_dependency 'workflow'\n  s.add_dependency 'will_paginate'\n  s.add_dependency 'analytics-ruby'\nend\n</code></pre>\n\n<p>I have added the <code>gemspec</code> file from the <code>Dockerfile</code> as</p>\n\n<pre><code>FROM ruby:2.3.1\n\nRUN apt-get update -qq &amp;&amp; apt-get install -y apt-utils build-essential nodejs\n\nENV APP_HOME /myapp\nRUN mkdir -p $APP_HOME\nWORKDIR $APP_HOME\n\nADD Gemfile Gemfile.lock $APP_HOME/\nADD Gemfile Gemfile.lock $APP_HOME/api/\nADD api/api.gemspec $APP_HOME/api/\nADD Gemfile Gemfile.lock $APP_HOME/integrations/\nADD Gemfile Gemfile.lock $APP_HOME/other_engine_app/\n\nRUN gem install bundler\nRUN bundle install\n\nADD . $APP_HOME\n</code></pre>\n\n<p>and so I get the following error</p>\n\n<pre><code>Step 13/14 : RUN bundle install\n ---&gt; Running in c7fce6cd25d8\n\n[!] There was an error while loading `api.gemspec`: cannot load such file -- api/version\nDoes it try to require a relative path? That's been removed in Ruby 1.9. Bundler cannot continue.\n\n #  from /myapp/api/api.gemspec:3\n #  -------------------------------------------\n #\n &gt;  require 'api/version'\n #\n #  -------------------------------------------\nERROR: Service 'app' failed to build: The command '/bin/sh -c bundle install' returned a non-zero code: 14\n</code></pre>\n"}, {"tags": ["ruby", "windows", "rubygems", "libxml2"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1489010837, "post_id": 42682453, "comment_id": 72489766, "body": "When I have to develop on a Windows machine I use a VM containing Ubuntu and develop in that environment. It&#39;s <i>much</i> easier to write in non-Microsoft languages using a *nix environment."}, {"owner": {"reputation": 28131, "user_id": 1956010, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bfdcb4596e9da98cccbf9a0069fdff6c?s=128&d=identicon&r=PG", "display_name": "nwellnhof", "link": "https://stackoverflow.com/users/1956010/nwellnhof"}, "edited": false, "score": 0, "creation_date": 1489010845, "post_id": 42682453, "comment_id": 72489770, "body": "Maybe you should follow the advice given by <code>extconf.rb</code> and check the <code>mkmf.log</code> file for more details?"}, {"owner": {"reputation": 51, "user_id": 7680874, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/37bc395c641a28a760f17f1266fb9335?s=128&d=identicon&r=PG&f=1", "display_name": "Tyler", "link": "https://stackoverflow.com/users/7680874/tyler"}, "edited": false, "score": 0, "creation_date": 1489011886, "post_id": 42682453, "comment_id": 72490259, "body": "Has to be Windows, I have looked at the mkmf.log file, and it is the same information. Can&#39;t figure out a fix for this issue."}], "answers": [{"tags": [], "owner": {"reputation": 51, "user_id": 7680874, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/37bc395c641a28a760f17f1266fb9335?s=128&d=identicon&r=PG&f=1", "display_name": "Tyler", "link": "https://stackoverflow.com/users/7680874/tyler"}, "is_accepted": true, "score": 0, "last_activity_date": 1489098032, "last_edit_date": 1495542712, "creation_date": 1489098032, "answer_id": 42706601, "question_id": 42682453, "link": "https://stackoverflow.com/questions/42682453/issue-installing-libxml-ruby-for-windows-ruby-version-2-3-3-missing-xmlparsedoc/42706601#42706601", "title": "Issue installing libxml-ruby for Windows Ruby version 2.3.3. Missing xmlParseDoc() in -lxml2", "body": "<p>I finally found a solution. What worked for me is I first followed the instructions in this <a href=\"https://stackoverflow.com/questions/22417544/having-trouble-installing-libxml-ruby-on-windows/33685307\">solution</a>. After I had to go find some of the missing pieces from libiconv; I got those from <a href=\"http://ftp.gnu.org/gnu/libiconv/\" rel=\"nofollow noreferrer\">here</a>. I extracted its lib and include contents, into like the above solution (lib into Ruby lib, include into Ruby include). After I had to change <code>#include &lt;iconv.h&gt;</code> in encoding.h. This needed to be changed to <code>#include &lt;path-to-/iconv.h&gt;</code>, which was extracted into Ruby's include directory earlier. I was able to run <code>gem install libxml-ruby -- with-xml2-include=C:/Ruby23/include/libxml2 --with-iconv-include=C:/Ruby23/include</code>.</p>\n"}], "owner": {"reputation": 51, "user_id": 7680874, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/37bc395c641a28a760f17f1266fb9335?s=128&d=identicon&r=PG&f=1", "display_name": "Tyler", "link": "https://stackoverflow.com/users/7680874/tyler"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 258, "favorite_count": 0, "accepted_answer_id": 42706601, "answer_count": 1, "score": 0, "last_activity_date": 1489098032, "creation_date": 1489009380, "last_edit_date": 1489010934, "question_id": 42682453, "link": "https://stackoverflow.com/questions/42682453/issue-installing-libxml-ruby-for-windows-ruby-version-2-3-3-missing-xmlparsedoc", "title": "Issue installing libxml-ruby for Windows Ruby version 2.3.3. Missing xmlParseDoc() in -lxml2", "body": "<p>I have looked through most answers involving install issues with the libxml-ruby gem, and I got stuck on this issue with no solution. I am currently running Ruby 2.3.3. </p>\n\n<p>This is the current command I am using:</p>\n\n<pre><code>gem install libxml-ruby -- --with-xml2-lib=C:\\Ruby-2.3.3\\lib --with-xml2-include=C:\\Ruby-2.3.3\\include\n</code></pre>\n\n<p>The resulting issue is:</p>\n\n<pre><code>checking for libxml/xmlversion.h in /opt/include/libxml2,/opt/local/include/libxml2,\n/usr/local/include/libxml2,\n/usr/include/libxml2... yes\nchecking for xmlParseDoc() in -lxml2... no\n*** extconf.rb failed ***\nCould not create Makefile due to some reason, probably lack of necessary\nlibraries and/or headers.  Check the mkmf.log file for more details.  You may\nneed configuration options.\n</code></pre>\n\n<p>xmlParseDoc() is in Parser.h, but is missing somewhere I cannot find. Has anyone else run into this same issue, and found a solution?</p>\n\n<hr>\n\n<p>I got it working when I downgraded to libxml-ruby 2.7 with the same command. I would still like to figure out why the new version is unable to be installed. I eventually need 2.8.0 or above, which were causing this issue.</p>\n"}, {"tags": ["arrays", "ruby"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1489008649, "post_id": 42682234, "comment_id": 72488670, "body": "Perhaps, you could join and split by some other character? What is the point of that roundtrip, by the way?"}, {"owner": {"reputation": 123, "user_id": 7351450, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/55599da0718129c5a87e69d9937a203d?s=128&d=identicon&r=PG&f=1", "display_name": "brandoncodes", "link": "https://stackoverflow.com/users/7351450/brandoncodes"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1489008757, "post_id": 42682234, "comment_id": 72488730, "body": "There are no other characters that apply to values to use split on"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1489008861, "post_id": 42682234, "comment_id": 72488777, "body": "That is in no way demonstrated by your code. In fact, I&#39;m not even sure what that means."}, {"owner": {"reputation": 7878, "user_id": 630780, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/fskbD.png?s=128&g=1", "display_name": "Carl Markham", "link": "https://stackoverflow.com/users/630780/carl-markham"}, "edited": false, "score": 0, "creation_date": 1489008887, "post_id": 42682234, "comment_id": 72488795, "body": "how about setting data as an array? <code>myarray = [&quot;hello&quot;, &quot;apple&quot;]</code> <code>data = &quot;Bahamas, The&quot;</code> <code>myarray + [data]</code>"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 7878, "user_id": 630780, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/fskbD.png?s=128&g=1", "display_name": "Carl Markham", "link": "https://stackoverflow.com/users/630780/carl-markham"}, "edited": false, "score": 2, "creation_date": 1489008927, "post_id": 42682234, "comment_id": 72488821, "body": "@CarlMarkham: that&#39;s what he has originally, according to first three lines."}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1489009454, "post_id": 42682234, "comment_id": 72489072, "body": "Yeah, this code already does what you want it to if you remove the last line."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1489009546, "post_id": 42682234, "comment_id": 72489122, "body": "@maxple: not really. It appears that he wants the weird spacing around words. Which could be accomplished by using some other char, rarer than comma. Or, you know, adding spaces directly to strings, without join/split roundtrip. Or, his actual code looks <b>nothing</b> like this and we are being unintentionally misled."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 1, "creation_date": 1489010482, "post_id": 42682234, "comment_id": 72489600, "body": "This sounds like an <a href=\"https://meta.stackexchange.com/questions/66377/what-is-the-xy-problem\">XY Problem</a> where you&#39;re running into problems similar to those solved by the CSV class, so perhaps you should back up and look at how you&#39;re storing the data. You shouldn&#39;t <code>join</code> the elements then re-<code>split</code> them; Figure out a better way to hold them and only <code>join</code> them when you&#39;re ready for final output."}], "answers": [{"tags": [], "owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "is_accepted": false, "score": 1, "last_activity_date": 1489011095, "last_edit_date": 1489011095, "creation_date": 1489010776, "answer_id": 42682794, "question_id": 42682234, "link": "https://stackoverflow.com/questions/42682234/how-to-escape-commas-when-pushed-into-an-array/42682794#42682794", "title": "How to escape commas when pushed into an array", "body": "<p>It doesn't make much sense but it seems to deliver what you want :</p>\n\n<pre><code>myarray = %w(hello apple)\ndata = 'Bahamas, The'\nmyarray &lt;&lt; data\nplaceholder = '##&lt;&lt;$$COMMA$$&gt;&gt;##'\np myarray.map { |s| s.gsub(',', placeholder) }\n         .join(', ')\n         .split(',')\n         .map { |s| s.gsub(placeholder, ',') }\n\n#=&gt; [\"hello\", \" apple\", \" Bahamas, The\"]\n</code></pre>\n\n<p>Actually, this join/split just adds a space to all the elements except the first one. So you could just write :</p>\n\n<pre><code>myarray = %w(hello apple)\ndata = 'Bahamas, The'\nmyarray &lt;&lt; data\n\np myarray.map.with_index { |s, i| i == 0 ? s : ' ' + s }\n#=&gt; [\"hello\", \" apple\", \" Bahamas, The\"]\n</code></pre>\n"}], "owner": {"reputation": 123, "user_id": 7351450, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/55599da0718129c5a87e69d9937a203d?s=128&d=identicon&r=PG&f=1", "display_name": "brandoncodes", "link": "https://stackoverflow.com/users/7351450/brandoncodes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 0, "closed_date": 1489021166, "answer_count": 1, "score": -2, "last_activity_date": 1489011095, "creation_date": 1489008521, "last_edit_date": 1489008725, "question_id": 42682234, "link": "https://stackoverflow.com/questions/42682234/how-to-escape-commas-when-pushed-into-an-array", "closed_reason": "Needs details or clarity", "title": "How to escape commas when pushed into an array", "body": "<p>I have a variable that has a comma and I want to be able to contain that comma when I split my array. </p>\n\n<pre><code>myarray = [\"hello\", \"apple\"]\ndata = \"Bahamas, The\"\nmyarray &lt;&lt; data\nmyarray.join(\", \").split(\",\")\n</code></pre>\n\n<p>The last line will produce </p>\n\n<pre><code>[\"hello\", \" apple\", \" Bahamas\", \" The\"] \n</code></pre>\n\n<p>but I want </p>\n\n<pre><code>[\"hello\", \" apple\", \" Bahamas, The\"]\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "carrierwave"], "answers": [{"tags": [], "owner": {"reputation": 313, "user_id": 5474201, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a1ac3d0de5e843f37adb85d742695a6d?s=128&d=identicon&r=PG&f=1", "display_name": "Spectator6", "link": "https://stackoverflow.com/users/5474201/spectator6"}, "is_accepted": true, "score": 0, "last_activity_date": 1490201427, "creation_date": 1490201427, "answer_id": 42957976, "question_id": 42682167, "link": "https://stackoverflow.com/questions/42682167/upload-existing-image-version-so-it-becomes-its-own-base-image/42957976#42957976", "title": "Upload existing image version so it becomes its own &quot;base&quot; image", "body": "<p>Here's one solution you can tweak and modify to fit your needs! It results in the original parent image with its own crop version, as well as an entirely separate base image of what was cropped. The parent image crop version that is typically used and referenced in Carrierwave serves as a placeholder of sorts, as a means to generate a new base image. So in practice, it will constantly be changing with each and every crop.</p>\n\n<p>If an uploader is mounted onto the model class (as was the case here), the work needs to be done through the associated controller, not in the uploader or model class. This is VERY IMPORTANT.</p>\n\n<p>In this instance, since the goal was to selectively pull out and upload an existing image version and since the cropping itself takes place as part of the controller's update action, the code additions were made there. One of the crucial things to understand was how the file crop file itself is located: <code>@image.image.versions[:crop]</code>. With that knowledge, it's then only a matter of passing it through as a parameter.</p>\n\n<pre><code>images_controller.rb\n...\ndef update\n  respond_to do |format|\n    if @image.update(image_params)\n      format.html { redirect_to @image, notice: 'Image was successfully updated.'}\n      format.json { render :show, status: :ok, location: @image }\n\n      #### HERE IS THE SOLUTION ###\n      @crop_image = current_user.images.build(image: @image.image.versions[:crop])\n      if @crop_image.save\n        format.html { redirect_to @crop_image, notice: 'Crop image successfully created.'}\n        format.json { render :show, status: :created, location: @crop_image }\n      else\n        format.html { render :new, notice: 'Crop image could not be saved for some reason...'}\n    end\n  else\n    format.html { render :edit }\n    format.json { render json: @image.errors, status: :unprocessable_entity }\n  end\nend\n</code></pre>\n\n<p>end</p>\n"}], "owner": {"reputation": 313, "user_id": 5474201, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a1ac3d0de5e843f37adb85d742695a6d?s=128&d=identicon&r=PG&f=1", "display_name": "Spectator6", "link": "https://stackoverflow.com/users/5474201/spectator6"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "accepted_answer_id": 42957976, "answer_count": 1, "score": 0, "last_activity_date": 1490201427, "creation_date": 1489008266, "question_id": 42682167, "link": "https://stackoverflow.com/questions/42682167/upload-existing-image-version-so-it-becomes-its-own-base-image", "title": "Upload existing image version so it becomes its own &quot;base&quot; image", "body": "<p>How can an existing image version, say thumb_xyz.jpg, be reuploaded through Carrierwave so the thumbnail becomes its own \"base\" image?</p>\n\n<p>I've tried messing with store! uploader, but I can't get it to work...</p>\n\n<pre><code>uploader.ImageUploader.new\nuploader.store!(image_url(:thumb))\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "minitest"], "comments": [{"owner": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "edited": false, "score": 1, "creation_date": 1489007286, "post_id": 42681338, "comment_id": 72487949, "body": "you can do <code>rails new my_app -T</code> which will skip tests and then add <code>rspec</code> to the gemfile and run <code>rspec init</code>.  That&#39;s usually what I recommend"}, {"owner": {"reputation": 73, "user_id": 6840529, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-1JV8gOzpfhs/AAAAAAAAAAI/AAAAAAAANhY/GUgjrr9z_mE/photo.jpg?sz=128", "display_name": "Chris McAnally", "link": "https://stackoverflow.com/users/6840529/chris-mcanally"}, "reply_to_user": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "edited": false, "score": 0, "creation_date": 1489171201, "post_id": 42681338, "comment_id": 72570674, "body": "@anthony Yeah however I do want to use Minitest instead of rspec for testing."}, {"owner": {"reputation": 7909, "user_id": 6439240, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1ff73af17f0d84241181f067b95538d4?s=128&d=identicon&r=PG", "display_name": "wscourge", "link": "https://stackoverflow.com/users/6439240/wscourge"}, "edited": false, "score": 0, "creation_date": 1577708519, "post_id": 42681338, "comment_id": 105231021, "body": "using the Ruby on Rails Application Template is the way to go here, take a look on <a href=\"https://hixonrails.com/ruby-on-rails-tutorials/ruby-on-rails-project-rspec-configuration\" rel=\"nofollow noreferrer\">how to set up Ruby on Rails with RSpec</a>"}], "answers": [{"comments": [{"owner": {"reputation": 73, "user_id": 6840529, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-1JV8gOzpfhs/AAAAAAAAAAI/AAAAAAAANhY/GUgjrr9z_mE/photo.jpg?sz=128", "display_name": "Chris McAnally", "link": "https://stackoverflow.com/users/6840529/chris-mcanally"}, "edited": false, "score": 0, "creation_date": 1489171277, "post_id": 42683711, "comment_id": 72570714, "body": "Thanks, however I&#39;m not looking to use rspec, but Minitest instead.  However the template may be the way to go."}], "tags": [], "owner": {"reputation": 580, "user_id": 3519459, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e343bf25bc4f463d526b890aacab1c69?s=128&d=identicon&r=PG&f=1", "display_name": "sonna", "link": "https://stackoverflow.com/users/3519459/sonna"}, "is_accepted": false, "score": 2, "last_activity_date": 1489014702, "creation_date": 1489014702, "answer_id": 42683711, "question_id": 42681338, "link": "https://stackoverflow.com/questions/42681338/minitest-rails-spec-style-tests-by-default/42683711#42683711", "title": "Minitest-Rails Spec-Style Tests by Default", "body": "<p>You could create a <code>template.rb</code> file with following configuration:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>gem_group :development, :test do\n  gem \"rspec-rails\"\nend\n\nafter_bundle do\n  `rails g rspec:install`\nend\n</code></pre>\n\n<p>And then build a new Rails project using the following command</p>\n\n<pre><code>rails new my_app -T -m /path/to/template.rb\n</code></pre>\n\n<p>It will build a new Rails application, add Rails RSpec gem to its Gemfile and execute the install step for RSpec.</p>\n\n<p><em>Otherwise you could provide a pre-built Rails Git repository and build on top of that.</em></p>\n\n<p><strong>References:</strong></p>\n\n<ul>\n<li><p><a href=\"http://guides.rubyonrails.org/rails_application_templates.html\" rel=\"nofollow noreferrer\">Rails Application Templates \u2014 Ruby on Rails Guides</a></p></li>\n<li><p><a href=\"https://github.com/rspec/rspec-rails\" rel=\"nofollow noreferrer\">rspec/rspec-rails: RSpec for Rails-3+</a></p></li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 73, "user_id": 6840529, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-1JV8gOzpfhs/AAAAAAAAAAI/AAAAAAAANhY/GUgjrr9z_mE/photo.jpg?sz=128", "display_name": "Chris McAnally", "link": "https://stackoverflow.com/users/6840529/chris-mcanally"}, "is_accepted": false, "score": 0, "last_activity_date": 1489172146, "creation_date": 1489172146, "answer_id": 42725787, "question_id": 42681338, "link": "https://stackoverflow.com/questions/42681338/minitest-rails-spec-style-tests-by-default/42725787#42725787", "title": "Minitest-Rails Spec-Style Tests by Default", "body": "<p>It looks like in <code>config/application.rb</code> you just have to add:</p>\n\n<p><code>\nconfig.generators do |g|\n  g.test_framework :minitest, spec: true\nend\n</code></p>\n\n<p>However there's not an automatic way to make Minitest-Rails default to spec style testing.  </p>\n\n<p>I could go to rspec, but would rather stay with Minitest for the moment as we teach our students Minitest from the beginning.</p>\n"}, {"tags": [], "owner": {"reputation": 73, "user_id": 6840529, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-1JV8gOzpfhs/AAAAAAAAAAI/AAAAAAAANhY/GUgjrr9z_mE/photo.jpg?sz=128", "display_name": "Chris McAnally", "link": "https://stackoverflow.com/users/6840529/chris-mcanally"}, "is_accepted": true, "score": 0, "last_activity_date": 1491422649, "creation_date": 1491422649, "answer_id": 43240633, "question_id": 42681338, "link": "https://stackoverflow.com/questions/42681338/minitest-rails-spec-style-tests-by-default/43240633#43240633", "title": "Minitest-Rails Spec-Style Tests by Default", "body": "<p>Ok so @sonna had 90% of what I was looking for.  </p>\n\n<p>I ended up with help creating a <code>.railsrc</code> file with </p>\n\n<pre><code>-d postgresql\n-m ~/.template.rb\n</code></pre>\n\n<p>And a template with:</p>\n\n<pre><code># .template.rb\n# Gems we've talked about in class, but which have absolutely nothing to do\n# with setting up spec-style testing.\n# Included here for convenience.\ngem_group :development do\n  # Improve the error message you get in the browser\n  gem 'better_errors'\n\n  # Use pry for rails console\n  gem 'pry-rails'\nend\n\n# Add some extra minitest support\ngem_group :test do\n  gem 'minitest-rails'\n  gem 'minitest-reporters'\nend\n\n# Add some code to some files to support spec-style testing\n# For these injections, indentation matters!\ninject_into_file 'config/application.rb', after: \"class Application &lt; Rails::Application\\n\" do\n  &lt;&lt;-'RUBY'\n    # Force new test files to be generated in the minitest-spec style\n    config.generators do |g|\n      g.test_framework :minitest, spec: true\n    end\n  RUBY\nend\n\n# Things to do after all the gems have been installed\nafter_bundle do\n  # Run rails generate minitest:install\n  generate \"minitest:install\", \"--force\"\n\n  # Add minitest reporters support. This must be run after\n  # rails generate minitest:install, because that command\n  # changes test/test_helper.rb\n  inject_into_file 'test/test_helper.rb', after: 'require \"minitest/rails\"' do\n    &lt;&lt;-'RUBY'\n\nrequire \"minitest/reporters\"  # for Colorized output\n\n#  For colorful output!\nMinitest::Reporters.use!(\n  Minitest::Reporters::SpecReporter.new,\n  ENV,\n  Minitest.backtrace_filter\n)\n    RUBY\n  end\nend\n</code></pre>\n\n<p>This sets up my project with postgres for DB, and Minitest-rails using spec-style tests and includes minitest-reporters.</p>\n"}, {"tags": [], "owner": {"reputation": 136, "user_id": 851022, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8824b39071f775c0be35a2320408e92d?s=128&d=identicon&r=PG", "display_name": "Schadenfred", "link": "https://stackoverflow.com/users/851022/schadenfred"}, "is_accepted": false, "score": 1, "last_activity_date": 1521255257, "last_edit_date": 1592644375, "creation_date": 1521255257, "answer_id": 49332071, "question_id": 42681338, "link": "https://stackoverflow.com/questions/42681338/minitest-rails-spec-style-tests-by-default/49332071#49332071", "title": "Minitest-Rails Spec-Style Tests by Default", "body": "<p>Looks like you've already done the hard work of answering your question. Though if you're teaching a class with an opinionated group of test gems, and a modified test_helper.rb and a modified application.rb, you may wish to consider writing your own gem that your students can add to their Gemfile. The gem could have the test gems you want as dependencies, and then they can install everything else they need with something like:</p>\n<p><code>bin/rails generate &lt;gem_name&gt;:install</code></p>\n<p>Here's a gem I wrote that you can fork or modify or just use as inspiration.</p>\n<p><a href=\"https://github.com/schadenfred/testable\" rel=\"nofollow noreferrer\">https://github.com/schadenfred/testable</a></p>\n<p>I actually stole your config code for the above gem, which you can see expressed in inside a generator that lives here:</p>\n<h1>lib/generators/installer/install_generator.rb</h1>\n"}], "owner": {"reputation": 73, "user_id": 6840529, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-1JV8gOzpfhs/AAAAAAAAAAI/AAAAAAAANhY/GUgjrr9z_mE/photo.jpg?sz=128", "display_name": "Chris McAnally", "link": "https://stackoverflow.com/users/6840529/chris-mcanally"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 302, "favorite_count": 0, "accepted_answer_id": 43240633, "answer_count": 4, "score": 2, "last_activity_date": 1521255257, "creation_date": 1489004975, "question_id": 42681338, "link": "https://stackoverflow.com/questions/42681338/minitest-rails-spec-style-tests-by-default", "title": "Minitest-Rails Spec-Style Tests by Default", "body": "<p>Question:  Using Rails 5 &amp; Minitest-Rails is there a way to default new Rails apps to default to Spec-style testing?  </p>\n\n<p>I teach TDD and it's annoying to have to have the students convert each time we make a new app.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 1176, "user_id": 2750877, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/65fe7528984db6c53fa2e13e9b574708?s=128&d=identicon&r=PG&f=1", "display_name": "bork", "link": "https://stackoverflow.com/users/2750877/bork"}, "edited": false, "score": 1, "creation_date": 1489004166, "post_id": 42680947, "comment_id": 72486297, "body": "What is your actual problem? The loop or the width of the div?"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 1, "creation_date": 1489005175, "post_id": 42680947, "comment_id": 72486859, "body": "Instead of <code>if value != nil</code> use <code>if !value.nil?</code>."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 1, "creation_date": 1489005291, "post_id": 42680947, "comment_id": 72486912, "body": "Shouldn&#39;t you be looping over <code>locations</code>, not <code>location</code>?"}, {"owner": {"reputation": 5535, "user_id": 7295772, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ZhWhR.jpg?s=128&g=1", "display_name": "Fabrizio Bertoglio", "link": "https://stackoverflow.com/users/7295772/fabrizio-bertoglio"}, "edited": false, "score": 0, "creation_date": 1489005951, "post_id": 42680947, "comment_id": 72487232, "body": "i thought of using location fields to filter locations. The problem is that i do not know how to filter locations based on location fields, considering that the filter should not be applied if location = nil."}, {"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 1, "creation_date": 1489005996, "post_id": 42680947, "comment_id": 72487260, "body": "Where does <code>city</code> come from, it is not in the <code>location_params</code>? How does the raw params look like, how does <code>Location</code> look like and what is the expected output?"}, {"owner": {"reputation": 67463, "user_id": 203130, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/1RE8c.jpg?s=128&g=1", "display_name": "coreyward", "link": "https://stackoverflow.com/users/203130/coreyward"}, "reply_to_user": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 1, "creation_date": 1489005997, "post_id": 42680947, "comment_id": 72487261, "body": "@theTinMan or <code>unless value.nil?</code>, or even better, <code>if value.present?</code>."}, {"owner": {"reputation": 5535, "user_id": 7295772, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ZhWhR.jpg?s=128&g=1", "display_name": "Fabrizio Bertoglio", "link": "https://stackoverflow.com/users/7295772/fabrizio-bertoglio"}, "edited": false, "score": 0, "creation_date": 1489006568, "post_id": 42680947, "comment_id": 72487588, "body": "Sorry, I said <code>city</code>, but I never took the time to change <code>location.location</code> into <code>location.city</code> in my database. Yes, I will indeed use <code>value.present?</code> instead of <code>value != nil</code> thanks a lot! I posted the fields of my Location model"}], "answers": [{"comments": [{"owner": {"reputation": 5535, "user_id": 7295772, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ZhWhR.jpg?s=128&g=1", "display_name": "Fabrizio Bertoglio", "link": "https://stackoverflow.com/users/7295772/fabrizio-bertoglio"}, "edited": false, "score": 0, "creation_date": 1489049435, "post_id": 42681670, "comment_id": 72503988, "body": "The problem is that if some of the <code>location_params</code> are equal to <code>nil</code>, then the query will only select those entries with those fields empty. While I do not want to add that filter if the value is <code>nil</code>  Basically I want to return all results for the parameters given, this is why I was thinking of doing a loop and using the <code>if value.present?</code> condition  But indeed this answer is very good thanks!"}], "tags": [], "owner": {"reputation": 4150, "user_id": 7470620, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/49f3026fe13841e41d1805178eed9a3c?s=128&d=identicon&r=PG", "display_name": "eiko", "link": "https://stackoverflow.com/users/7470620/eiko"}, "is_accepted": false, "score": 0, "last_activity_date": 1489070714, "last_edit_date": 1489070714, "creation_date": 1489006189, "answer_id": 42681670, "question_id": 42680947, "link": "https://stackoverflow.com/questions/42680947/rails-looping-a-variable/42681670#42681670", "title": "Rails looping a variable", "body": "<p>If you can  <code>location_params</code> to instantiate a new location, then it's likely they're already  the proper format to pass into <code>where</code>:</p>\n\n<pre><code>def index_update\n  locations = Location.where(location_params)\nend\n</code></pre>\n\n<p>If you need to remove nil values from the params:</p>\n\n<pre><code>def index_update\n  locations = Location.where(location_params.delete_if { |k,v| v.nil? })\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": true, "score": 1, "last_activity_date": 1489007370, "creation_date": 1489007370, "answer_id": 42681966, "question_id": 42680947, "link": "https://stackoverflow.com/questions/42680947/rails-looping-a-variable/42681966#42681966", "title": "Rails looping a variable", "body": "<p>I would do something like this to only use parameters with present values in the query:</p>\n\n<pre><code>def index_update\n  query_attributes = location_params.select { |_, v| v.present? }\n  locations = Location.where(query_attributes)\nend\n</code></pre>\n\n<p>Or:</p>\n\n<pre><code>def index_update\n  query_attributes = location_params.reject { |_, v| v.blank? }\n  locations = Location.where(query_attributes)\nend\n</code></pre>\n"}], "owner": {"reputation": 5535, "user_id": 7295772, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ZhWhR.jpg?s=128&g=1", "display_name": "Fabrizio Bertoglio", "link": "https://stackoverflow.com/users/7295772/fabrizio-bertoglio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "accepted_answer_id": 42681966, "answer_count": 2, "score": -2, "last_activity_date": 1489070714, "creation_date": 1489003638, "last_edit_date": 1489007089, "question_id": 42680947, "link": "https://stackoverflow.com/questions/42680947/rails-looping-a-variable", "title": "Rails looping a variable", "body": "<p>I have the following <code>developers_controller</code> and I want to perform a query based on the <code>location_params</code>.</p>\n\n<p>In the <code>index_update</code> action I create a variable <code>location</code> with the <code>location_params</code> that the user gave as input for the research. I want to perform an <code>each</code> loop on this variable to filter the data from <code>@locations = Location.all</code> based on the user request.</p>\n\n<p>This is my private method <code>location_params</code>:</p>\n\n<pre><code>def location_params\n  params.require(:location).permit(:country, :location, :surfspot, :barbecue, :villa, :swimmingpool, :skiresort, :singleroom )\nend\n</code></pre>\n\n<p>This is my <code>index_update</code> action:</p>\n\n<pre><code>def index_update\n  location = Location.new(location_params)\n  locations = Location.all\n  location.each do |param, value|\n    if value != nil\n      locations = locations.where(param =&gt; value)\n    end\n  end\nend\n</code></pre>\n\n<p>I can not find out how to loop the <code>location</code> variable.</p>\n\n<hr>\n\n<p>This is my location model in my Rails console:</p>\n\n<pre><code>=&gt; #&lt;Location:0x000000036b6838\n id: nil,\n host_id: nil,\n description: nil,\n location: nil,\n singleroom: nil,\n sharedroom: nil,\n surfspot: nil,\n barbecue: nil,\n villa: nil,\n swimmingpool: nil,\n skiresort: nil,\n created_at: nil,\n updated_at: nil,\n country: nil,\n state: nil,\n houseimages: nil\n</code></pre>\n"}, {"tags": ["c#", "python", "ruby", "testing", "rspec"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1489005464, "post_id": 42680908, "comment_id": 72486997, "body": "Please read &quot;<a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>&quot;. &quot;is there an established pattern or tool...?&quot; is asking us to recommend an off-site tool, which is off-topic. Instead you need to search and try things then when you have a problem with your code ask a specific question about that problem. I&#39;d recommend removing that aspect of the question. Asking about a pattern would be more on-topic."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1489005720, "post_id": 42680908, "comment_id": 72487116, "body": "Talking to a different host or server would introduce more than code complexity, it&#39;d make the tests break if the required end-point was down. It&#39;d also slow the tests. So while it&#39;s possible I wouldn&#39;t do it, at least for unit tests."}, {"owner": {"reputation": 39282, "user_id": 336920, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/6e2dbeb23d3fc6552a6e26800ed63289?s=128&d=identicon&r=PG", "display_name": "B Seven", "link": "https://stackoverflow.com/users/336920/b-seven"}, "reply_to_user": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1489008678, "post_id": 42680908, "comment_id": 72488688, "body": "How is a tool off topic? It could include a library, gem or software. If I were asking how to do testing, wouldn&#39;t you suggest RSpec or Jasmine? Those are tools."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1489009538, "post_id": 42680908, "comment_id": 72489118, "body": "You&#39;re arguing against the SO community which decided that such questions are off-topic. You are welcome to take it to <a href=\"https://meta.stackoverflow.com\">Meta Stack Overflow</a>, however your argument has been heard and decided against multiple times."}], "answers": [{"comments": [{"owner": {"reputation": 39282, "user_id": 336920, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/6e2dbeb23d3fc6552a6e26800ed63289?s=128&d=identicon&r=PG", "display_name": "B Seven", "link": "https://stackoverflow.com/users/336920/b-seven"}, "edited": false, "score": 0, "creation_date": 1489016955, "post_id": 42682384, "comment_id": 72492275, "body": "That&#39;s an interesting approach."}], "tags": [], "owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "is_accepted": false, "score": 1, "last_activity_date": 1489010280, "last_edit_date": 1489010280, "creation_date": 1489009085, "answer_id": 42682384, "question_id": 42680908, "link": "https://stackoverflow.com/questions/42680908/what-is-a-good-way-to-integrate-rspec-with-another-language-such-as-python-or-c/42682384#42682384", "title": "What is a good way to integrate RSpec with another language such as Python or C#?", "body": "<p>One quick and dirty way is just to execute python code like this :</p>\n\n<pre><code>%x(python -c \"print 'hello I\\\\'m a logger'\").include?('hello')\n#=&gt; true\n</code></pre>\n\n<p>For more advanced examples, you could use <code>IO.popen</code> or <a href=\"https://ruby-doc.org/stdlib-2.3.0/libdoc/open3/rdoc/Open3.html\" rel=\"nofollow noreferrer\"><code>Open3</code></a> :</p>\n\n<pre><code>require 'open3'\n\ndef run_python(code)\n  Open3.popen3(\"python -c \\\"#{code}\\\"\") do |stdin, stdout, stderr, wait_thr|\n    {stdout: stdout.read, stderr: stderr.read}\n  end\nend\n\nten_warnings = %q|import logging\nfor i in range(10):\n  logging.warning('Warning %d' % i)\n|\n\ndescribe 'Logger' do\n  specify 'success' do\n    expect(run_python(ten_warnings)[:stderr]).to include \"Warning 5\"\n  end\nend\n</code></pre>\n\n<p>It outputs :</p>\n\n<pre><code>.\n\nFinished in 0.0266 seconds (files took 0.1499 seconds to load)\n1 example, 0 failures\n</code></pre>\n"}], "owner": {"reputation": 39282, "user_id": 336920, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/6e2dbeb23d3fc6552a6e26800ed63289?s=128&d=identicon&r=PG", "display_name": "B Seven", "link": "https://stackoverflow.com/users/336920/b-seven"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "closed_date": 1489011169, "answer_count": 1, "score": 0, "last_activity_date": 1489010280, "creation_date": 1489003491, "question_id": 42680908, "link": "https://stackoverflow.com/questions/42680908/what-is-a-good-way-to-integrate-rspec-with-another-language-such-as-python-or-c", "closed_reason": "Not suitable for this site", "title": "What is a good way to integrate RSpec with another language such as Python or C#?", "body": "<p>I wrote a Ruby Gem and other teams in the business will need to implement the same functionality in Python and C#.</p>\n\n<p>I would like to run the exiting specs against the code in the other languages. Although it sounds like a difficult problem, the functionality of the gem is limited to formatting logs. The specs look like:</p>\n\n<pre><code>specify 'success' do\n  expect{ logger.info('title', message) }.to output(expected).to_stdout\nend\n</code></pre>\n\n<p>So, the entire test suite can be reduced to a set of expectations where the input is a string and a hash, and the output is a string.</p>\n\n<p>It seems that there should be a easy to write a connector that would allow RSpec to talk to an instance of the code in another language.</p>\n\n<p>Some possibilities include using HTTP or TCP, but I think that would introduce a significant code and complexity in both the specs and the app.</p>\n\n<p>So, is there an established pattern or tool that will do this?</p>\n"}, {"tags": ["javascript", "ruby", "elasticsearch", "phantomjs", "nokogiri"], "comments": [{"owner": {"reputation": 53905, "user_id": 2864740, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/e7a05a144f218bde07b659bc98e1ca7d?s=128&d=identicon&r=PG&f=1", "display_name": "user2864740", "link": "https://stackoverflow.com/users/2864740/user2864740"}, "edited": false, "score": 0, "creation_date": 1489004005, "post_id": 42680653, "comment_id": 72486213, "body": "On sites that can be scraped <i>without</i> JavaScript, implement an alternative path. Increase concurrency - throttle based on actual CPU load. (Also, where is the other 1.5GB going? :-/)"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1489006001, "post_id": 42680653, "comment_id": 72487263, "body": "You are asking us to give opinions based on general best-practices which you could find by searching around the internet. If you want specific information you&#39;ll have to give us details about your system and code. See &quot;<a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>&quot; and &quot;<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>&quot;."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1489006486, "post_id": 42680653, "comment_id": 72487538, "body": "Don&#39;t run a daily script, run the scraping continuously in auxiliary code, with appropriate throttling. Keep track of the last time a page was checked and don&#39;t do it again in less than n hours, keeping in mind that being a good net citizen means not beating up other people&#39;s hosts or their bandwidth; Use HTTP HEAD requests to see if their page changed since you last looked."}, {"owner": {"reputation": 47898, "user_id": 966023, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/917fcb4327159076f752c0c3c3fddfbb?s=128&d=identicon&r=PG", "display_name": "pguardiario", "link": "https://stackoverflow.com/users/966023/pguardiario"}, "edited": false, "score": 0, "creation_date": 1489026441, "post_id": 42680653, "comment_id": 72494869, "body": "I can guarantee that you can get the price data without PhantomJS. I&#39;ve never seen a store that I needed Javascript to scrape and I&#39;ve done thousands of them."}, {"owner": {"reputation": 11, "user_id": 7560229, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-S2PC_CGjbZ8/AAAAAAAAAAI/AAAAAAAAABM/IcB-3Eq6FvQ/photo.jpg?sz=128", "display_name": "Leroy Brown", "link": "https://stackoverflow.com/users/7560229/leroy-brown"}, "reply_to_user": {"reputation": 47898, "user_id": 966023, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/917fcb4327159076f752c0c3c3fddfbb?s=128&d=identicon&r=PG", "display_name": "pguardiario", "link": "https://stackoverflow.com/users/966023/pguardiario"}, "edited": false, "score": 0, "creation_date": 1489027801, "post_id": 42680653, "comment_id": 72495238, "body": "@pguardiario - yeah, I think you&#39;re right... I&#39;ve been looking at each site more carefully to see how I can remove my dependence on phantom"}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 7560229, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-S2PC_CGjbZ8/AAAAAAAAAAI/AAAAAAAAABM/IcB-3Eq6FvQ/photo.jpg?sz=128", "display_name": "Leroy Brown", "link": "https://stackoverflow.com/users/7560229/leroy-brown"}, "edited": false, "score": 1, "creation_date": 1489027692, "post_id": 42680768, "comment_id": 72495220, "body": "I am going to try running on multiple threads as per your suggestion. I am not sure why this answer was downvoted as I think this will likely decrease the overall run time."}], "tags": [], "owner": {"reputation": 2122, "user_id": 4183352, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4Kfzk.png?s=128&g=1", "display_name": "cymruu", "link": "https://stackoverflow.com/users/4183352/cymruu"}, "is_accepted": false, "score": -2, "last_activity_date": 1489002945, "creation_date": 1489002945, "answer_id": 42680768, "question_id": 42680653, "link": "https://stackoverflow.com/questions/42680653/is-there-a-more-efficient-way-to-scrape-a-large-number-of-urls-30k/42680768#42680768", "title": "Is there a more efficient way to scrape a large number of URLs (&gt; 30k)?", "body": "<p>I assume you're running your scrapper on single thread (because of time needed to finish). You should consider running your script on multiple threads. \n<a href=\"https://www.tutorialspoint.com/ruby/ruby_multithreading.htm\" rel=\"nofollow noreferrer\">https://www.tutorialspoint.com/ruby/ruby_multithreading.htm</a></p>\n"}, {"comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1489006994, "post_id": 42680954, "comment_id": 72487797, "body": "<a href=\"https://github.com/typhoeus/typhoeus\" rel=\"nofollow noreferrer\">Typhoeus and Hydra</a> make a particularly good parallel processing combination for HTTP."}, {"owner": {"reputation": 11, "user_id": 7560229, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-S2PC_CGjbZ8/AAAAAAAAAAI/AAAAAAAAABM/IcB-3Eq6FvQ/photo.jpg?sz=128", "display_name": "Leroy Brown", "link": "https://stackoverflow.com/users/7560229/leroy-brown"}, "edited": false, "score": 0, "creation_date": 1489018958, "post_id": 42680954, "comment_id": 72492908, "body": "I actually just started working on using flat files instead of keeping so much information in memory. Thank you for the link to the pdf - that is a useful resource."}], "tags": [], "owner": {"reputation": 2011, "user_id": 5288896, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/20fk6.jpg?s=128&g=1", "display_name": "Satish Prakash Garg", "link": "https://stackoverflow.com/users/5288896/satish-prakash-garg"}, "is_accepted": false, "score": 1, "last_activity_date": 1489006748, "last_edit_date": 1489006748, "creation_date": 1489003658, "answer_id": 42680954, "question_id": 42680653, "link": "https://stackoverflow.com/questions/42680653/is-there-a-more-efficient-way-to-scrape-a-large-number-of-urls-30k/42680954#42680954", "title": "Is there a more efficient way to scrape a large number of URLs (&gt; 30k)?", "body": "<p>There are few things that you can do increase the rate of scraping and keeping the memory consumption low without compromising the throughput.</p>\n\n<p>To reduce the memory consumption, you can persist the URLs in a flat file or a database rather than putting it in memory though a data structure.</p>\n\n<p>Also empty your data structure of any data after few iterations.</p>\n\n<p>I am assuming that you are making requests sequentially as the average time taken per scraping a URL is greater than 1.2 seconds (10*60*60/30000 = 1.2). You can do an asynchronous call to bunch of requests at a time as your code will be waiting for one request to be completed until it makes the next one.</p>\n\n<p>You can refer to \"<a href=\"http://blog.marc-seeger.de/assets/papers/thesis_seeger-building_blocks_of_a_scalable_webcrawler.pdf\" rel=\"nofollow noreferrer\">Building blocks of a scalable web crawler</a>\" which covers most of the aspects for scalable scraping.</p>\n\n<p>These are few of the suggestions that I can give as I don't have any information about your code.</p>\n"}, {"comments": [{"owner": {"reputation": 11, "user_id": 7560229, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-S2PC_CGjbZ8/AAAAAAAAAAI/AAAAAAAAABM/IcB-3Eq6FvQ/photo.jpg?sz=128", "display_name": "Leroy Brown", "link": "https://stackoverflow.com/users/7560229/leroy-brown"}, "edited": false, "score": 1, "creation_date": 1489019159, "post_id": 42681119, "comment_id": 72492970, "body": "Thank you for the suggestions, I think in most cases I won&#39;t be able to tap into an API directly for the data, but I was able to discover some shortcuts that I can take by inspecting the JavaScript on the website I&#39;m scraping."}], "tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": false, "score": 2, "last_activity_date": 1489004223, "creation_date": 1489004223, "answer_id": 42681119, "question_id": 42680653, "link": "https://stackoverflow.com/questions/42680653/is-there-a-more-efficient-way-to-scrape-a-large-number-of-urls-30k/42681119#42681119", "title": "Is there a more efficient way to scrape a large number of URLs (&gt; 30k)?", "body": "<p>The most obvious things to work on are identifying which sites need the full browser treatment and which can be ripped directly without needing any of that.</p>\n\n<p>The second thing is to inspect the JavaScript application that's being run to see if there's any way to get the data you need directly from the APIs it's utilizing. It's normally the case in a client-side application (e.g. Angular, React, Ember) that there's some kind of JSON API that it communicates to the server with. If you can interface directly with that API it actually massively simplifies your data collection process: You might not even have to parse any HTML at all!</p>\n\n<p>Ruby is generally pretty good when it comes to processing things, but it isn't always the most efficient. Something to consider is if using JRuby and threads might increase performance, normally it's a drop-in replacement that runs ~40% faster, though at the expense of a higher initial memory footprint.</p>\n\n<p>You may also want to explore the viability of using Node.js to do a lot of the dirty work of fetching/executing JavaScript, as it's pretty light-weight compared to a lot of the JavaScript runtimes for Ruby. It may even serve as a pretty good pre-fetcher that can then hand over the content to your Ruby back-end for more processing.</p>\n\n<p>Building a hybrid system like that is pretty easy with a database, Redis or RabbitMQ middle layer that acts as a queue or persistence mechanism.</p>\n"}, {"comments": [{"owner": {"reputation": 11, "user_id": 7560229, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-S2PC_CGjbZ8/AAAAAAAAAAI/AAAAAAAAABM/IcB-3Eq6FvQ/photo.jpg?sz=128", "display_name": "Leroy Brown", "link": "https://stackoverflow.com/users/7560229/leroy-brown"}, "edited": false, "score": 0, "creation_date": 1489019010, "post_id": 42681166, "comment_id": 72492930, "body": "Thank you for those links, I am looking into the possibility of using one of those services for this purpose."}], "tags": [], "owner": {"reputation": 67463, "user_id": 203130, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/1RE8c.jpg?s=128&g=1", "display_name": "coreyward", "link": "https://stackoverflow.com/users/203130/coreyward"}, "is_accepted": false, "score": 0, "last_activity_date": 1489006850, "last_edit_date": 1489006850, "creation_date": 1489004363, "answer_id": 42681166, "question_id": 42680653, "link": "https://stackoverflow.com/questions/42680653/is-there-a-more-efficient-way-to-scrape-a-large-number-of-urls-30k/42681166#42681166", "title": "Is there a more efficient way to scrape a large number of URLs (&gt; 30k)?", "body": "<p>I'd argue you should save your time and go with a SaaS offering.</p>\n\n<ul>\n<li><a href=\"https://datafiniti.co/products/product-data/\" rel=\"nofollow noreferrer\">Datafiniti</a> offers access to pricing and other data on products using their existing, ongoing database of over 80 million products. If they don't already have the data you're after, they may well be interested in adding it.</li>\n<li><a href=\"http://80legs.com/\" rel=\"nofollow noreferrer\">80legs</a> offers on-demand custom web crawling based on your parameters. You can crawl as often as many URLs as you like, as often as you like, then get data back via API or dashboard.</li>\n<li><a href=\"https://www.import.io/\" rel=\"nofollow noreferrer\">Import.io</a> offers custom crawling and extraction with a slick UI on top of it. Like 80legs, plus fairly robust extraction built-in. Again, set it up, crawl for data as often as you like, and retrieve results via an API or dashboard.</li>\n</ul>\n\n<p>I believe there's a time and a place to roll-your-own feature. If you wanted to build this out as your own IP for valuation reasons, for example, or if you considered this crawling a core competency of your organization (i.e. it's a competitive advantage). But, given that you need it to work well and aren't in the business of crawling, this is a great time to stand on the shoulders of someone else. </p>\n"}], "owner": {"reputation": 11, "user_id": 7560229, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-S2PC_CGjbZ8/AAAAAAAAAAI/AAAAAAAAABM/IcB-3Eq6FvQ/photo.jpg?sz=128", "display_name": "Leroy Brown", "link": "https://stackoverflow.com/users/7560229/leroy-brown"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 299, "favorite_count": 0, "answer_count": 4, "score": 0, "last_activity_date": 1489006850, "creation_date": 1489002539, "question_id": 42680653, "link": "https://stackoverflow.com/questions/42680653/is-there-a-more-efficient-way-to-scrape-a-large-number-of-urls-30k", "title": "Is there a more efficient way to scrape a large number of URLs (&gt; 30k)?", "body": "<p>I operate an online store that deals in collectible goods, the market prices of which are perpetually in flux based on consumer demand. </p>\n\n<p>I have recently begun to keep a record of my competitors' prices by daily running a ruby script (a rake task) which works through a list of ~30k URLs, grabs a few relevant pieces of data, and stuffs them into an Elasticsearch index. I rely on Nokogiri and PhantomJS in order to accomplish this since not all of the sites will properly render the data I need without running the JavaScript.</p>\n\n<p>My program currently eats ~4GB of memory while running, and PhantomJS accounts for the vast majority of that consumption (~2.5GB). The script also takes many hours to run - I'm not exactly sure how long but I think it's more than 10 hours. </p>\n\n<p>I am very open to suggestions about how to reduce my memory consumption and improve the rate at which I can scrape. I wish that my competitors would provide me with a nice JSON API, but unfortunately we don't have that kind of relationship. </p>\n"}, {"tags": ["sql", "ruby-on-rails", "ruby", "activerecord"], "answers": [{"comments": [{"owner": {"reputation": 4027, "user_id": 4139179, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/IXenf.jpg?s=128&g=1", "display_name": "Daniel Bonnell", "link": "https://stackoverflow.com/users/4139179/daniel-bonnell"}, "edited": false, "score": 0, "creation_date": 1489001399, "post_id": 42680029, "comment_id": 72484724, "body": "When I tried that I got: <code>[861, 862, 802, 868, 794, 1686, 1081, 1857, 1267, 1600, 1583, 1357, 1560, 1041, 1535, 1201, 1707, 1770, 2075, 1937]</code>. It could very well be that <code>pluck</code> doesn&#39;t respect the order, but than <code>map</code> must also not respect the order since the results from <code>map</code> and <code>pluck</code> were identical."}, {"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "reply_to_user": {"reputation": 4027, "user_id": 4139179, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/IXenf.jpg?s=128&g=1", "display_name": "Daniel Bonnell", "link": "https://stackoverflow.com/users/4139179/daniel-bonnell"}, "edited": false, "score": 0, "creation_date": 1489001539, "post_id": 42680029, "comment_id": 72484808, "body": "@ACIDSTEALTH <code>pluck</code> and <code>map</code> work on different levels: pluck goes to DB, whereas <code>map</code> operates in memory on the collection returned by <code>contacts.limit(20)</code>. But my guess is wrong, as I see the result is the same."}, {"owner": {"reputation": 4027, "user_id": 4139179, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/IXenf.jpg?s=128&g=1", "display_name": "Daniel Bonnell", "link": "https://stackoverflow.com/users/4139179/daniel-bonnell"}, "edited": false, "score": 0, "creation_date": 1489001609, "post_id": 42680029, "comment_id": 72484853, "body": "What&#39;s interesting is that for all examples, the first few ids are indeed in the correct order. It&#39;s only once the values for <code>engagement</code> become <code>0.0</code> that the ordering starts to vary."}, {"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "reply_to_user": {"reputation": 4027, "user_id": 4139179, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/IXenf.jpg?s=128&g=1", "display_name": "Daniel Bonnell", "link": "https://stackoverflow.com/users/4139179/daniel-bonnell"}, "edited": false, "score": 0, "creation_date": 1489001661, "post_id": 42680029, "comment_id": 72484885, "body": "@ACIDSTEALTH oooh, you are on the correct path! Edit the question with this information, it 100% has to do with that!"}, {"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "reply_to_user": {"reputation": 4027, "user_id": 4139179, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/IXenf.jpg?s=128&g=1", "display_name": "Daniel Bonnell", "link": "https://stackoverflow.com/users/4139179/daniel-bonnell"}, "edited": false, "score": 1, "creation_date": 1489001972, "post_id": 42680029, "comment_id": 72485072, "body": "@ACIDSTEALTH you might add additional argument to order, so that it takes over, when <code>engagement</code> starts to be identical (<code>0.0</code>). For example, <code>.order(engagement: :desc, id: :asc)</code>"}, {"owner": {"reputation": 4027, "user_id": 4139179, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/IXenf.jpg?s=128&g=1", "display_name": "Daniel Bonnell", "link": "https://stackoverflow.com/users/4139179/daniel-bonnell"}, "edited": false, "score": 0, "creation_date": 1489002383, "post_id": 42680029, "comment_id": 72485311, "body": "That solved the problem! Could it be that <code>pluck</code> and <code>map</code> both ignore the ordering when the attributes ordered by are equal?"}, {"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "reply_to_user": {"reputation": 4027, "user_id": 4139179, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/IXenf.jpg?s=128&g=1", "display_name": "Daniel Bonnell", "link": "https://stackoverflow.com/users/4139179/daniel-bonnell"}, "edited": false, "score": 0, "creation_date": 1489002489, "post_id": 42680029, "comment_id": 72485367, "body": "@ACIDSTEALTH yea, it has something to do with the fact that DB takes care of ordering objects with identical values, but I can&#39;t tell you what exactly it is. So neither <code>pluck</code> nor <code>map</code> is the problem here, it is <code>order</code> :)"}, {"owner": {"reputation": 4027, "user_id": 4139179, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/IXenf.jpg?s=128&g=1", "display_name": "Daniel Bonnell", "link": "https://stackoverflow.com/users/4139179/daniel-bonnell"}, "edited": false, "score": 0, "creation_date": 1489002600, "post_id": 42680029, "comment_id": 72485447, "body": "Now I&#39;m not sure if I can trust any of my ordered queries to truly be in the correct order unless I always apply a secondary fallback order such as <code>id: :asc</code>. That just seems to verbose and against the spirit of what Rails is all about..."}, {"owner": {"reputation": 4027, "user_id": 4139179, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/IXenf.jpg?s=128&g=1", "display_name": "Daniel Bonnell", "link": "https://stackoverflow.com/users/4139179/daniel-bonnell"}, "edited": false, "score": 0, "creation_date": 1489002691, "post_id": 42680029, "comment_id": 72485499, "body": "Can you edit your answer to summarize this so I can tag it is the right answer?"}, {"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "reply_to_user": {"reputation": 4027, "user_id": 4139179, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/IXenf.jpg?s=128&g=1", "display_name": "Daniel Bonnell", "link": "https://stackoverflow.com/users/4139179/daniel-bonnell"}, "edited": false, "score": 0, "creation_date": 1489002694, "post_id": 42680029, "comment_id": 72485502, "body": "On the other hand, when you have &quot;enough&quot; fallback order args, you can sleep peacefully :)"}, {"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "reply_to_user": {"reputation": 4027, "user_id": 4139179, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/IXenf.jpg?s=128&g=1", "display_name": "Daniel Bonnell", "link": "https://stackoverflow.com/users/4139179/daniel-bonnell"}, "edited": false, "score": 0, "creation_date": 1489002708, "post_id": 42680029, "comment_id": 72485509, "body": "@ACIDSTEALTH actually just did :)"}], "tags": [], "owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "is_accepted": true, "score": 1, "last_activity_date": 1489002776, "last_edit_date": 1489002776, "creation_date": 1489000602, "answer_id": 42680029, "question_id": 42679853, "link": "https://stackoverflow.com/questions/42679853/activerecord-limit-method-does-not-seem-to-respect-order-of-relation/42680029#42680029", "title": "ActiveRecord limit method does not seem to respect order of relation", "body": "<p>As we found out in comments, the problem is that when <a href=\"http://api.rubyonrails.org/classes/ActiveRecord/QueryMethods.html#method-i-order\" rel=\"nofollow noreferrer\"><code>order</code></a> meets two objects with identical <code>engagement</code> values it \"sorts\" it in some specific way.</p>\n\n<p>What could help is passing an additional parameter to the <code>ORDER</code> clause (for example <code>id</code>):</p>\n\n<pre><code>Company.last.contacts.order(engagement: :desc, id: :asc)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 5382, "user_id": 7671538, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3506350bc4dd02281ad7f99e8e84715c?s=128&d=identicon&r=PG&f=1", "display_name": "gwcodes", "link": "https://stackoverflow.com/users/7671538/gwcodes"}, "is_accepted": false, "score": 0, "last_activity_date": 1489003571, "last_edit_date": 1495541372, "creation_date": 1489002531, "answer_id": 42680649, "question_id": 42679853, "link": "https://stackoverflow.com/questions/42679853/activerecord-limit-method-does-not-seem-to-respect-order-of-relation/42680649#42680649", "title": "ActiveRecord limit method does not seem to respect order of relation", "body": "<p>This is probably just the order in which the database chooses to return the results. In SQL, there is no guarantee on the ordering, unless you specify an <code>order by</code>. Even when specified, I believe that within a block of identically ordered results (i.e. <code>0.0</code> in this case), there is again no guarantee on the ordering of the results - it can be in whatever ordering the database deems most appropriate and/or efficient for that particular query.</p>\n\n<p>If you need the results back in a specific order, then it's best to add it as an additional <code>order by</code> argument (<code>id</code> in this case)</p>\n\n<hr>\n\n<p>Edit: Here's a bit more discussion on the topic: <a href=\"https://stackoverflow.com/questions/14058045/how-does-order-by-clause-works-if-two-values-are-equal\">How does order by clause works if two values are equal?</a></p>\n\n<p>It's quite possible here that <code>SELECT  \"contacts\".\"id\"</code> and <code>SELECT  \"contacts\".*</code> use different indexes, which results in the difference in ordering.</p>\n"}], "owner": {"reputation": 4027, "user_id": 4139179, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/IXenf.jpg?s=128&g=1", "display_name": "Daniel Bonnell", "link": "https://stackoverflow.com/users/4139179/daniel-bonnell"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 226, "favorite_count": 0, "accepted_answer_id": 42680029, "answer_count": 2, "score": 1, "last_activity_date": 1489003571, "creation_date": 1489000043, "last_edit_date": 1489001792, "question_id": 42679853, "link": "https://stackoverflow.com/questions/42679853/activerecord-limit-method-does-not-seem-to-respect-order-of-relation", "title": "ActiveRecord limit method does not seem to respect order of relation", "body": "<p>I think I may have uncovered a bug with <code>ActiveRecord_AssociationRelation#limit</code> but I'm not sure and wanted to see if there is a simpler explanation. I'm running Rails 5.0.2.</p>\n\n<p>Assume the following models:</p>\n\n<pre><code>class Company &lt; ApplicationRecord\n    has_many :contacts\nend\n\nclass Contact &lt; ApplicationRecord\n    belongs_to :company\n    attr_accessor :engagement\nend\n</code></pre>\n\n<p>I will first select all my contacts using this query:</p>\n\n<pre><code>contacts = Company.last.contacts.order(engagement: :desc)\n</code></pre>\n\n<p>This outputs the following SQL:</p>\n\n<pre><code>Company Load (1.4ms)  SELECT  \"companies\".* FROM \"companies\" ORDER BY \"companies\".\"id\" DESC LIMIT 1\nContact Load (36.9ms)  SELECT \"contacts\".* FROM \"contacts\" WHERE \"contacts\".\"company_id\" = 94 ORDER BY \"contacts\".\"engagement\" DESC\n</code></pre>\n\n<p>So far so good. Now lets assume I want to grab an array of ids from the first 20 contacts in the relation. I would expect the order of the ids in the returned array to match the order in which they appear in the relation.</p>\n\n<p>First I will use <code>pluck(:id)[0..19]</code>. This returns the following:</p>\n\n<pre><code>contacts.pluck(:id)[0..19]\n#=&gt; [861, 862, 802, 868, 794, 1583, 1267, 1857, 1081, 1686, 1041, 1535, 1560, 1707, 1770, 1600, 1205, 2027, 1179, 1184]\n</code></pre>\n\n<p>Next I try <code>map(&amp;:id)[0..19]</code>, which unsurprisingly returns the same result:</p>\n\n<pre><code>contacts.map(&amp;:id)[0..19]\n#=&gt; [861, 862, 802, 868, 794, 1583, 1267, 1857, 1081, 1686, 1041, 1535, 1560, 1707, 1770, 1600, 1205, 2027, 1179, 1184]\n</code></pre>\n\n<p>Finally I try <code>limit(20).pluck(:id)</code>, which returns an unexpected result:</p>\n\n<pre><code>contacts.limit(20).pluck(:id)\n(4.5ms)  SELECT  \"contacts\".\"id\" FROM \"contacts\" WHERE \"contacts\".\"company_id\" = 94 ORDER BY \"contacts\".\"engagement\" DESC LIMIT 20\n#=&gt; [861, 862, 802, 868, 794, 1686, 1081, 1857, 1267, 1600, 1583, 1357, 1560, 1041, 1535, 1201, 1707, 1770, 2075, 1937]\n</code></pre>\n\n<p>Notice that in the first two arrays, the ids are in the same order, but when I use <code>limit</code>, they appear out of order, even though the SQL generated clearly includes an <code>ORDER BY</code> clause.</p>\n\n<p>What's interesting to note is that the order of the ids is always correct for the first few contacts where <code>engagement &gt; 0.0</code>. Once the values for <code>engagement</code> become <code>0.0</code>, the ordering starts to vary. For example, here is what the engagement numbers are for those same 20 contacts:</p>\n\n<pre><code>[56.0, 44.0, 3.0, 2.0, 1.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0]\n</code></pre>\n\n<p>Can someone explain what is happening here?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3", "actioncable"], "comments": [{"owner": {"reputation": 2188, "user_id": 1489914, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/7PReX.jpg?s=128&g=1", "display_name": "Tall Paul", "link": "https://stackoverflow.com/users/1489914/tall-paul"}, "edited": false, "score": 0, "creation_date": 1489019709, "post_id": 42679739, "comment_id": 72493122, "body": "Trying to websocket for each conversation based on the id?"}, {"owner": {"reputation": 911, "user_id": 5079196, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/UWfbG.jpg?s=128&g=1", "display_name": "gwalshington", "link": "https://stackoverflow.com/users/5079196/gwalshington"}, "reply_to_user": {"reputation": 2188, "user_id": 1489914, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/7PReX.jpg?s=128&g=1", "display_name": "Tall Paul", "link": "https://stackoverflow.com/users/1489914/tall-paul"}, "edited": false, "score": 0, "creation_date": 1489027105, "post_id": 42679739, "comment_id": 72495038, "body": "@TallPaul That is correct"}], "answers": [{"comments": [{"owner": {"reputation": 911, "user_id": 5079196, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/UWfbG.jpg?s=128&g=1", "display_name": "gwalshington", "link": "https://stackoverflow.com/users/5079196/gwalshington"}, "edited": false, "score": 0, "creation_date": 1489077861, "post_id": 42696486, "comment_id": 72523745, "body": "Hi thanks for your help. I have already set up the connection for convo_ids and everything works great. The question is, in the middle of a user&#39;s session, a user opens a NEW convo with a different user, and sends a message. This new convo is not subscribed yet, so the user does not see the correct actions (ex - the msg appending to the chatbox). How can I call the subscribe method in the channel, from the convos controller, in the create method? Thanks!"}], "tags": [], "owner": {"reputation": 2188, "user_id": 1489914, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/7PReX.jpg?s=128&g=1", "display_name": "Tall Paul", "link": "https://stackoverflow.com/users/1489914/tall-paul"}, "is_accepted": false, "score": 1, "last_activity_date": 1489065586, "creation_date": 1489065586, "answer_id": 42696486, "question_id": 42679739, "link": "https://stackoverflow.com/questions/42679739/how-can-i-call-a-channel-method-in-a-rails-controller/42696486#42696486", "title": "How can I call a channel method in a rails controller?", "body": "<p>So you should not be subscribing the user to the channel in the controller on create. It should be based on when they visit the page. You should change where users are connected by adding in a js/coffe file to do this for you based on who is connected. A good example/tutorial for this when I was learn was this video <a href=\"https://www.youtube.com/watch?v=n0WUjGkDFS0&amp;t=1154s\" rel=\"nofollow noreferrer\">here</a>.</p>\n\n<p>What the video leaves out is how to connect to an individual conversation. So I struggled with it and found a way to grab the conversation id from the url, probably not the best way but it works. Hope this helps</p>\n\n<pre><code>conversation_id = parseInt(document.URL.match(new RegExp(\"conversations/\"+ \"(.*)\"))[1]) # gets the conversation id from the url of the page\n\nApp.conversation = App.cable.subscriptions.create { channel: \"ConversationChannel\", conversation_id: conversation_id },\n  connected: -&gt;\n    # Called when the subscription is ready for use on the server\n\n  disconnected: -&gt;\n    # Called when the subscription has been terminated by the server\n\n  received: (data) -&gt;\n    $('#messages').append data['message']\n\n  speak: (message) -&gt;\n    @perform 'speak', message: message\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 672, "user_id": 2296640, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/6n9Lv.jpg?s=128&g=1", "display_name": "Amloelxer", "link": "https://stackoverflow.com/users/2296640/amloelxer"}, "edited": false, "score": 0, "creation_date": 1494382749, "post_id": 43382908, "comment_id": 74799893, "body": "This was super helpful! Thank you Chiune! I tested your first suggestion locally and it worked flawlessly, but didn&#39;t work when I tested it on my dummy Heroku app in production. Any thoughts why?"}, {"owner": {"reputation": 994, "user_id": 998012, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/grI2D.jpg?s=128&g=1", "display_name": "Chiune Sugihara", "link": "https://stackoverflow.com/users/998012/chiune-sugihara"}, "reply_to_user": {"reputation": 672, "user_id": 2296640, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/6n9Lv.jpg?s=128&g=1", "display_name": "Amloelxer", "link": "https://stackoverflow.com/users/2296640/amloelxer"}, "edited": false, "score": 0, "creation_date": 1494471090, "post_id": 43382908, "comment_id": 74844961, "body": "@Amloelxer - By not working do you mean <code>subs</code> does not contain the <code>Channel</code> instance that you are looking for?"}], "tags": [], "owner": {"reputation": 994, "user_id": 998012, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/grI2D.jpg?s=128&g=1", "display_name": "Chiune Sugihara", "link": "https://stackoverflow.com/users/998012/chiune-sugihara"}, "is_accepted": false, "score": 3, "last_activity_date": 1492123153, "last_edit_date": 1492123153, "creation_date": 1492053067, "answer_id": 43382908, "question_id": 42679739, "link": "https://stackoverflow.com/questions/42679739/how-can-i-call-a-channel-method-in-a-rails-controller/43382908#43382908", "title": "How can I call a channel method in a rails controller?", "body": "<p><strong>Retrieve a Specific Channel Instance from a Controller</strong></p>\n\n<p><code>Channel</code> instances are associated with the user's <code>Connection</code>. The following will work to get a hash of the <code>Channel</code>s for a <code>Connection</code>:</p>\n\n<pre><code>conn = ActionCable.server.connections.first { |c| c.current_user == user_id }\n\n# subs is a hash where the keys are json identifiers and the values are Channels\nsubs = conn.subscriptions.instance_variable_get(\"@subscriptions\")\n</code></pre>\n\n<p>(If <code>Connection#current_user</code> does not exist then follow the instructions at the top of section 3.1.1 from <a href=\"http://guides.rubyonrails.org/action_cable_overview.html#connect-consumer\" rel=\"nofollow noreferrer\">the rails ActionCable overview</a> to add it.)</p>\n\n<p>You can then get a <code>Channel</code> based on whatever criteria you want. For instance you could search by type which in your case would be <code>MsgsChannel</code>. The json key in <code>subs</code> could also be used but might be more complicated.</p>\n\n<p>Once you have this instance you can then call whatever method on it you want to (in your case <code>MsgsChannel#subscribe</code>).</p>\n\n<p><strong>Concerns About This Approach</strong></p>\n\n<p>A <code>Channel</code> just encapsulates server side work that will be kicked off in response to messages from the client side of the app. Having the server call a <code>Channel</code> method effectively amounts to having the server pretend that a consumer sent a message that it didn't send.</p>\n\n<p>I would recommend instead of doing this putting whatever logic that you want to use both from a <code>Controller</code> and a <code>Channel</code> into a method in a shared location. The <code>Controller</code> and <code>Channel</code> can then directly call this method as needed.</p>\n\n<p>That being said there is one painful caveat to this which is that you need the <code>Channel</code> to call <code>stream_from</code>. Unfortunately managing streams is specific to <code>Channel</code>s even though fundamentally it is just updating pubsub information for the <code>Server</code>.</p>\n\n<p>I think that stream management should really just require the appropriate connection and the <code>Server</code> with its pubsub. If that were the case you wouldn't need to worry about calling <code>Channel</code> methods from the server side of an application.</p>\n\n<p>You should be able to effectively run <code>stream_for</code> more directly if you get a <code>Channel</code>, any <code>Channel</code> (you could use <code>subs</code> from the top of this answer as well) and call <code>stream_for</code> on it</p>\n\n<pre><code>conn = ActionCable.server.connections.first { |c| c.current_user == user_id }\nMsgsChannel.new(conn, \"made up id\").stream_from \"your_stream_name\"\n</code></pre>\n\n<p>I haven't tried this myself but it looks like it should work.</p>\n"}], "owner": {"reputation": 911, "user_id": 5079196, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/UWfbG.jpg?s=128&g=1", "display_name": "gwalshington", "link": "https://stackoverflow.com/users/5079196/gwalshington"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2395, "favorite_count": 1, "answer_count": 2, "score": 10, "last_activity_date": 1492123153, "creation_date": 1488999678, "last_edit_date": 1491508892, "question_id": 42679739, "link": "https://stackoverflow.com/questions/42679739/how-can-i-call-a-channel-method-in-a-rails-controller", "title": "How can I call a channel method in a rails controller?", "body": "<p>I have an ActionCable method that subscribes the user. If a new convo is started, I want to subscribe the user to the new channel as well. I can't figure out the proper syntax for calling a channel method in a controller. </p>\n\n<p>UPDATE: The issue is that the messages are appended to the chatbox when sent, but when the first message, is sent, the websocket connection is not established yet, and therefore it looks to the user as if the message was not sent (because it's not being appended).</p>\n\n<p>channel/msgs_channel.rb</p>\n\n<pre><code>class MsgsChannel &lt; ApplicationCable::Channel  \n  #This function subscribes the user to all existing convos\n  def subscribed\n    @convos = Convo.where(\"sender_id = ? OR recipient_id = ?\", current_user, current_user)\n    @convos.each do |convo|\n        stream_from \"msg_channel_#{convo.id}\"\n    end\n  end\n\n  #This is a new function I wrote to subscribe the user to a new convo that is started during their session.\n  def subscribe(convo_id)\n      stream_from \"msg_channel_#{convo_id}\"\n  end\nend\n</code></pre>\n\n<p>In my convos controller, create method, I have tried several things:</p>\n\n<p>convos_controller.rb</p>\n\n<pre><code>def create\n  @convo = Convo.create!({sender_id: @sender_id, recipient_id: @recipient_id})\n  ActionCable.server.subscribe(@convo.id)\nend\n</code></pre>\n\n<hr>\n\n<p><code>ActionCable.subscribe(@convo.id)</code></p>\n\n<p>error:\n<code>NoMethodError (undefined method</code>subscribe' for ActionCable:Module)`</p>\n\n<hr>\n\n<p><code>ActionCable.msgs.subscribe(@convo.id)</code></p>\n\n<p>error:\n<code>NoMethodError (undefined method</code>msgs' for ActionCable:Module):`</p>\n\n<hr>\n\n<pre><code>  App.msgs.subscribe(@convo.id)\n</code></pre>\n\n<p>error:<code>NameError (uninitialized constant ConvosController::App):</code></p>\n\n<hr>\n\n<p><code>MsgsChannel.subscribe(@convo.id)</code></p>\n\n<p>error:<code>NoMethodError (undefined method</code>subscribe' for MsgsChannel:Class`</p>\n\n<hr>\n\n<p><code>ActionCable.server.subscribe(@convo.id)</code></p>\n\n<p>error:<code>NoMethodError (undefined method</code>subscribe' for #):`</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "authentication", "devise", "rubygems"], "comments": [{"owner": {"reputation": 911, "user_id": 5079196, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/UWfbG.jpg?s=128&g=1", "display_name": "gwalshington", "link": "https://stackoverflow.com/users/5079196/gwalshington"}, "edited": false, "score": 1, "creation_date": 1489000647, "post_id": 42679705, "comment_id": 72484260, "body": "Have you seen this post? <a href=\"http://stackoverflow.com/questions/4662659/devise-authentication-without-password-using-just-username\" title=\"devise authentication without password using just username\">stackoverflow.com/questions/4662659/&hellip;</a>"}, {"owner": {"reputation": 506, "user_id": 2926181, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/5af8f4a18aa46609d95cbbfa0a828f43?s=128&d=identicon&r=PG&f=1", "display_name": "HFR1994", "link": "https://stackoverflow.com/users/2926181/hfr1994"}, "reply_to_user": {"reputation": 911, "user_id": 5079196, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/UWfbG.jpg?s=128&g=1", "display_name": "gwalshington", "link": "https://stackoverflow.com/users/5079196/gwalshington"}, "edited": false, "score": 0, "creation_date": 1489000973, "post_id": 42679705, "comment_id": 72484473, "body": "Nop I didn&#39;t, but I did thinked about that. I was hopping to get a more &quot;elegant&quot; solution."}], "answers": [{"comments": [{"owner": {"reputation": 506, "user_id": 2926181, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/5af8f4a18aa46609d95cbbfa0a828f43?s=128&d=identicon&r=PG&f=1", "display_name": "HFR1994", "link": "https://stackoverflow.com/users/2926181/hfr1994"}, "edited": false, "score": 0, "creation_date": 1489004385, "post_id": 42681060, "comment_id": 72486410, "body": "Yep I already tried it, It just defined it like def password_required? false end and def password_match? true end"}, {"owner": {"reputation": 5382, "user_id": 7671538, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3506350bc4dd02281ad7f99e8e84715c?s=128&d=identicon&r=PG&f=1", "display_name": "gwcodes", "link": "https://stackoverflow.com/users/7671538/gwcodes"}, "reply_to_user": {"reputation": 506, "user_id": 2926181, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/5af8f4a18aa46609d95cbbfa0a828f43?s=128&d=identicon&r=PG&f=1", "display_name": "HFR1994", "link": "https://stackoverflow.com/users/2926181/hfr1994"}, "edited": false, "score": 0, "creation_date": 1489004705, "post_id": 42681060, "comment_id": 72486591, "body": "Do you set your users to be auto-confirmed at any point in the signup flow? Do they manually confirm? Do you need the <code>confirmable</code> module?"}, {"owner": {"reputation": 506, "user_id": 2926181, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/5af8f4a18aa46609d95cbbfa0a828f43?s=128&d=identicon&r=PG&f=1", "display_name": "HFR1994", "link": "https://stackoverflow.com/users/2926181/hfr1994"}, "edited": false, "score": 0, "creation_date": 1489005661, "post_id": 42681060, "comment_id": 72487086, "body": "Yes I haven&#39;t implemented it but I was thinking of doing so"}, {"owner": {"reputation": 5382, "user_id": 7671538, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3506350bc4dd02281ad7f99e8e84715c?s=128&d=identicon&r=PG&f=1", "display_name": "gwcodes", "link": "https://stackoverflow.com/users/7671538/gwcodes"}, "reply_to_user": {"reputation": 506, "user_id": 2926181, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/5af8f4a18aa46609d95cbbfa0a828f43?s=128&d=identicon&r=PG&f=1", "display_name": "HFR1994", "link": "https://stackoverflow.com/users/2926181/hfr1994"}, "edited": false, "score": 0, "creation_date": 1489006389, "post_id": 42681060, "comment_id": 72487471, "body": "I suppose you could override <code>valid_password?</code> to always return <code>true</code>  (see source here: <a href=\"https://github.com/plataformatec/devise/blob/88724e10adaf9ffd1d8dbfbaadda2b9d40de756a/lib/devise/models/database_authenticatable.rb#L44\" rel=\"nofollow noreferrer\">github.com/plataformatec/devise/blob/&hellip;</a>)... It might also be worth reconsidering whether you need Devise at all :-)"}, {"owner": {"reputation": 506, "user_id": 2926181, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/5af8f4a18aa46609d95cbbfa0a828f43?s=128&d=identicon&r=PG&f=1", "display_name": "HFR1994", "link": "https://stackoverflow.com/users/2926181/hfr1994"}, "edited": false, "score": 0, "creation_date": 1489077402, "post_id": 42681060, "comment_id": 72523409, "body": "I guess your right I will make a simple login form. Thanks to everyone"}], "tags": [], "owner": {"reputation": 5382, "user_id": 7671538, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3506350bc4dd02281ad7f99e8e84715c?s=128&d=identicon&r=PG&f=1", "display_name": "gwcodes", "link": "https://stackoverflow.com/users/7671538/gwcodes"}, "is_accepted": false, "score": 0, "last_activity_date": 1489004003, "creation_date": 1489004003, "answer_id": 42681060, "question_id": 42679705, "link": "https://stackoverflow.com/questions/42679705/devise-gem-login-only-with-email/42681060#42681060", "title": "Devise Gem: Login only with email", "body": "<p>Have you seen this wiki article? <a href=\"https://github.com/plataformatec/devise/wiki/How-To:-Email-only-sign-up\" rel=\"nofollow noreferrer\">https://github.com/plataformatec/devise/wiki/How-To:-Email-only-sign-up</a></p>\n\n<p>If the intention here is never to have a password, then take note of the third section - you can override Devise's <code>password_required?</code> and <code>password_match?</code></p>\n"}], "owner": {"reputation": 506, "user_id": 2926181, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/5af8f4a18aa46609d95cbbfa0a828f43?s=128&d=identicon&r=PG&f=1", "display_name": "HFR1994", "link": "https://stackoverflow.com/users/2926181/hfr1994"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 392, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1489004003, "creation_date": 1488999593, "question_id": 42679705, "link": "https://stackoverflow.com/questions/42679705/devise-gem-login-only-with-email", "title": "Devise Gem: Login only with email", "body": "<p>My question is really simple, \u00bfHow can I authenticate only with the client's email (I mean no password at all)? I know it's a bad practice but it's one of the client's requirements. </p>\n\n<p>Currently I have acomplished to sign up with no password and when it finishes its registration it redirects to the appropiate page (the views with authenitcation required). The problem is that If I delete cookies and try to sign-in it shows \"Incorrect login or password\"</p>\n\n<p>Currently what I have so far:</p>\n\n<p><strong>User Model:</strong></p>\n\n<pre><code>class User &lt; ApplicationRecord\n   # Include default devise modules. Others available are:\n   # :confirmable, :lockable, :timeoutable and :omniauthable\n\n   devise :database_authenticatable, :registerable,\n   :recoverable, :rememberable, :trackable,\n   :validatable, :confirmable,:authentication_keys =&gt; [:login]\n\n   attr_accessor :login\n\n  def password_required?\n     false\n  end\nend\n</code></pre>\n\n<p><strong>Application_Controller:</strong></p>\n\n<pre><code>class ApplicationController &lt; ActionController::Base\n   protect_from_forgery with: :exception\n   before_action :configure_permitted_parameters, if: :devise_controller?\n\n   protected\n\n   def configure_permitted_parameters\n     added_attrs = [:email, :remember_me]\n     devise_parameter_sanitizer.permit :sign_up, keys: added_attrs\n     devise_parameter_sanitizer.permit :account_update, keys: added_attrs\n     devise_parameter_sanitizer.permit :sign_in, keys: added_attrs\n   end\nend\n</code></pre>\n\n<p><strong>User's Migration:</strong></p>\n\n<pre><code>class DeviseCreateUsers &lt; ActiveRecord::Migration[5.0]\n  def change\n    create_table :users do |t|\n      ## Database authenticatable\n      t.string :email,              null: false, default: \"\"\n\n      ## Rememberable\n      t.datetime :remember_created_at\n\n      ## Trackable\n      t.integer  :sign_in_count, default: 0, null: false\n      t.datetime :current_sign_in_at\n      t.datetime :last_sign_in_at\n      t.string   :current_sign_in_ip\n      t.string   :last_sign_in_ip\n\n      ## Confirmable\n      t.string   :confirmation_token\n      t.datetime :confirmed_at\n      t.datetime :confirmation_sent_at\n      t.string   :unconfirmed_email # Only if using reconfirmable\n\n      ## Lockable\n      # t.integer  :failed_attempts, default: 0, null: false # Only if lock strategy is :failed_attempts\n      # t.string   :unlock_token # Only if unlock strategy is :email or :both\n      # t.datetime :locked_at\n\n\n      t.timestamps null: false\n    end\n\n    add_index :users, :email,                unique: true\n    add_foreign_key :users, :doctores, column: :email, primary_key: :email\n    # add_index :users, :confirmation_token,   unique: true\n    # add_index :users, :unlock_token,         unique: true\n  end\nend\n</code></pre>\n\n<p>Obviously I alread changed sessions' new view and registration's new view</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 1176, "user_id": 2750877, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/65fe7528984db6c53fa2e13e9b574708?s=128&d=identicon&r=PG&f=1", "display_name": "bork", "link": "https://stackoverflow.com/users/2750877/bork"}, "edited": false, "score": 0, "creation_date": 1488998010, "post_id": 42679016, "comment_id": 72482670, "body": "This is not related to your actual question, but you should read up on how to use the <code>unless</code> in RoR. <a href=\"http://www.railstips.org/blog/archives/2008/12/01/unless-the-abused-ruby-conditional/\" rel=\"nofollow noreferrer\">railstips.org/blog/archives/2008/12/01/&hellip;</a> And clean up that <code>if</code> statement, I have no chance of understanding what&#39;s going on."}, {"owner": {"reputation": 1504, "user_id": 48796, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/8289b7981dda88d2d351c31d0affc820?s=128&d=identicon&r=PG", "display_name": "sluther", "link": "https://stackoverflow.com/users/48796/sluther"}, "reply_to_user": {"reputation": 1176, "user_id": 2750877, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/65fe7528984db6c53fa2e13e9b574708?s=128&d=identicon&r=PG&f=1", "display_name": "bork", "link": "https://stackoverflow.com/users/2750877/bork"}, "edited": false, "score": 0, "creation_date": 1488999187, "post_id": 42679016, "comment_id": 72483417, "body": "I actually have read that page re: unless, and as far as I can tell, I&#39;m using it how they recommended. I&#39;m not checking for anything being nil nor do I have multiple conditions in either of my unless statements. Also, I&#39;m not checking for else conditions in either case, either. So, unless seems cleaner to me.  As for the <code>if</code> statement being cleaned up, care to elaborate on that?"}, {"owner": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "edited": false, "score": 1, "creation_date": 1488999595, "post_id": 42679016, "comment_id": 72483629, "body": "Where is the problem in this code? You just posted a wall of code, but nowhere does it explain the expected outcome nor the location of the problem. <a href=\"http://stackoverflow.com/help/mcve\">stackoverflow.com/help/mcve</a>"}, {"owner": {"reputation": 1504, "user_id": 48796, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/8289b7981dda88d2d351c31d0affc820?s=128&d=identicon&r=PG", "display_name": "sluther", "link": "https://stackoverflow.com/users/48796/sluther"}, "edited": false, "score": 0, "creation_date": 1488999886, "post_id": 42679016, "comment_id": 72483803, "body": "I don&#39;t know where the problem is, but the problem itself is clearly explained in my post. Setting the value of one key in one hash is also setting the value for that same key in the other hash, but this <i>only happens when I use symbols as keys</i>."}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1489001968, "post_id": 42679016, "comment_id": 72485070, "body": "No, it&#39;s not clear which hashes you&#39;re talking about, and which value is overwritten. Note that the first example is done on <code>@local</code>, the second one is done on <code>local</code>, which is basically a dup of <code>@local</code> via json."}, {"owner": {"reputation": 1504, "user_id": 48796, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/8289b7981dda88d2d351c31d0affc820?s=128&d=identicon&r=PG", "display_name": "sluther", "link": "https://stackoverflow.com/users/48796/sluther"}, "edited": false, "score": 0, "creation_date": 1489002123, "post_id": 42679016, "comment_id": 72485171, "body": "Setting a key in <code>@local</code> is overwriting values in <code>@repository</code>, but only when using symbols as keys. This doesn&#39;t happen when using <code>irb</code>, but it does happen when I execute my code, and I have no idea what could possibly be going on."}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 1, "creation_date": 1489002350, "post_id": 42679016, "comment_id": 72485289, "body": "Yet you don&#39;t show any concrete example of what has been modified, when and where. Please come back with a clearer example."}, {"owner": {"reputation": 1504, "user_id": 48796, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/8289b7981dda88d2d351c31d0affc820?s=128&d=identicon&r=PG", "display_name": "sluther", "link": "https://stackoverflow.com/users/48796/sluther"}, "edited": false, "score": 0, "creation_date": 1489003065, "post_id": 42679016, "comment_id": 72485711, "body": "I&#39;m re-wording the question because I finally discovered the actual offending line in the code."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 1, "creation_date": 1489005322, "post_id": 42679016, "comment_id": 72486932, "body": "There is still way too much code, and worse, way too convoluted code here for a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. Please, try to trim the code down to the minimum amount of code that still exhibits your problem. It is almost impossible to follow the convoluted nest of conditionals to figure out what may or may not be wrong. One thing I noted though: in the title you talk about copying, but I don&#39;t see any place where you actually copy anything."}, {"owner": {"reputation": 2481, "user_id": 1212000, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZPwGy.png?s=128&g=1", "display_name": "Raffael", "link": "https://stackoverflow.com/users/1212000/raffael"}, "edited": false, "score": 2, "creation_date": 1489005920, "post_id": 42679016, "comment_id": 72487219, "body": "The question is perfectly sane. The guy just didn&#39;t fully understand what he was doing. But hey, this is exactly where stackoverflow can jump in and help &lt;3"}], "answers": [{"tags": [], "owner": {"reputation": 2481, "user_id": 1212000, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZPwGy.png?s=128&g=1", "display_name": "Raffael", "link": "https://stackoverflow.com/users/1212000/raffael"}, "is_accepted": true, "score": 2, "last_activity_date": 1489005617, "creation_date": 1489005617, "answer_id": 42681521, "question_id": 42679016, "link": "https://stackoverflow.com/questions/42679016/weird-behavior-when-copying-one-hash-to-another/42681521#42681521", "title": "Weird behavior when copying one hash to another", "body": "<p>The culprit lies in this line (which you use twice): </p>\n\n<pre><code>@local[:repository][brand] = @repository[brand]\n</code></pre>\n\n<p>This does not make a copy of the hash that resides in <code>@repository[brand]</code>. <br>Let's split that up a bit so we can talk about it more clearly:</p>\n\n<pre><code>brand_detail = @repository[brand]\nlocal_repo = @local[:repository]\nlocal_repo[brand] = brand_detail\n</code></pre>\n\n<p>After the third statement, <code>local_repo[brand]</code> will not contain a <em>copy</em> of the <code>brand_details</code> hash but instead a <em>reference</em> to that hash. So now all of these lines would have the same effect; they would all modify the same hash instance:</p>\n\n<ul>\n<li><code>brand_detail[:branches] = 3</code></li>\n<li><code>local_repo[brand][:branches] = 3</code></li>\n<li><code>@repository[brand][:branches] = 3</code></li>\n</ul>\n\n<p>You should be able to circumvent this by explicitly adding a copy instead of a reference using <code>dup</code>:</p>\n\n<pre><code>@local[:repository][brand] = @repository[brand].dup\n</code></pre>\n"}], "owner": {"reputation": 1504, "user_id": 48796, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/8289b7981dda88d2d351c31d0affc820?s=128&d=identicon&r=PG", "display_name": "sluther", "link": "https://stackoverflow.com/users/48796/sluther"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "accepted_answer_id": 42681521, "answer_count": 1, "score": 0, "last_activity_date": 1489006269, "creation_date": 1488997409, "last_edit_date": 1489006269, "question_id": 42679016, "link": "https://stackoverflow.com/questions/42679016/weird-behavior-when-copying-one-hash-to-another", "title": "Weird behavior when copying one hash to another", "body": "<p>I have a class which manages configuration (saved locally as JSON) and I've written a method to copy configuration from one file to another. Both JSON files are loaded as hashes into instance variables (<code>@local</code> and <code>@repository</code>, respectively). I've run into some strange behavior where setting a key on one hash is overwriting the value for the same key in the other hash. I've narrowed my issue down to line 14 of the code snippet below. My <code>puts</code> statement on line 12 shows <code>@repository[brand][:branches][branch]</code> as being a non-empty hash with data, while my <code>puts</code> statement on line 21 shows <code>@repository[brand][:branches][branch]</code> as being an empty hash.</p>\n\n<pre><code>def copy(brand, branch = nil)\n    brand = brand.to_sym\n    branch =  branch.to_sym\n\n    if branch.nil?\n        if @local[:repository].has_key?(brand)\n            @local[:repository][brand].deep_merge(@repository[brand])\n        else\n            @local[:repository][brand] = @repository[brand]\n        end\n    else\n        puts @repository[brand][:branches][branch]\n        unless @local[:repository].has_key?(brand)\n            @local[:repository][brand] = @repository[brand]\n            @local[:repository][brand][:branches] = Hash.new\n        end\n\n        unless @local[:repository][brand][:branches].has_key?(branch)\n            @local[:repository][brand][:branches][branch] = Hash.new\n        end\n        puts @repository[brand][:branches][branch]\n        @local[:repository][brand][:branches][branch].deep_merge(@repository[brand][:branches][branch])\n    end\n\n    self.write(CONFIG_FILE, @local)\nend\n</code></pre>\n\n<p>If I change line 14 to <code>@local[:repository][brand] = Hash.new</code>, the value for that hash on line 21 is no longer empty and is in fact the expected value. One key thing is that the <code>brand</code> key in <code>@local[:repository]</code> doesn't exist yet.</p>\n\n<p>Can anyone shed some light on what's going on here?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5", "cocoon-gem"], "comments": [{"owner": {"reputation": 537, "user_id": 4289112, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/spCU9.jpg?s=128&g=1", "display_name": "Mirv - Matt", "link": "https://stackoverflow.com/users/4289112/mirv-matt"}, "edited": false, "score": 0, "creation_date": 1489086811, "post_id": 42678881, "comment_id": 72529295, "body": "Short version, yes you can save both at the same time ...Long version:  Generically, you can definitely bring up the new action, then dynamically add fields before ever committing the record - then save both the parent &amp; the nested fields / model at the same time, for the first time."}], "answers": [{"comments": [{"owner": {"reputation": 323, "user_id": 3338886, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/75b47755e1a595760e9bce7e4eefa2f4?s=128&d=identicon&r=PG&f=1", "display_name": "Wesly", "link": "https://stackoverflow.com/users/3338886/wesly"}, "edited": false, "score": 2, "creation_date": 1489112603, "post_id": 42703752, "comment_id": 72539813, "body": "That was a mistake on my part. I found a simple solution to this <a href=\"https://www.google.com\" rel=\"nofollow noreferrer\">here</a>. In the Facility model, I would add <code>belongs_to :toilet, optional: true</code> . It&#39;s Rails 5 related."}, {"owner": {"reputation": 537, "user_id": 4289112, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/spCU9.jpg?s=128&g=1", "display_name": "Mirv - Matt", "link": "https://stackoverflow.com/users/4289112/mirv-matt"}, "reply_to_user": {"reputation": 323, "user_id": 3338886, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/75b47755e1a595760e9bce7e4eefa2f4?s=128&d=identicon&r=PG&f=1", "display_name": "Wesly", "link": "https://stackoverflow.com/users/3338886/wesly"}, "edited": false, "score": 0, "creation_date": 1489148046, "post_id": 42703752, "comment_id": 72556151, "body": "Your link just goes to google, not a particular search or page, but nice sleuthing - had a slew of fun with rails 5 myself, but haven&#39;t used the optional boolean yet :)"}], "tags": [], "owner": {"reputation": 537, "user_id": 4289112, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/spCU9.jpg?s=128&g=1", "display_name": "Mirv - Matt", "link": "https://stackoverflow.com/users/4289112/mirv-matt"}, "is_accepted": true, "score": 0, "last_activity_date": 1489087287, "creation_date": 1489087287, "answer_id": 42703752, "question_id": 42678881, "link": "https://stackoverflow.com/questions/42678881/using-cocoon-gem-to-add-nested-forms-facilities-will-not-save-unless-a-toilet-i/42703752#42703752", "title": "Using cocoon gem to add nested forms. Facilities will not save unless a Toilet is created first", "body": "<p>Wesley, yes - you should be able to save both parent &amp; nested at the same time.  Long version: Yes, you can create a new record, before saving it, dynamically add some nested content &amp; for the first time for either, save them both at the same time.</p>\n\n<p>I believe your issue is probably in the <code>_facility_fields.html.erb</code> ... you have a <code>&lt;% f.inputs do %&gt;</code> that looks out of place or is just setup wrong.  As you already have a do loop wrapping your <code>render</code> command, you shouldn't need this other <code>do</code> loop.  That also means you want to remove the <code>end</code> thing from the template just above the <code>/div</code>.</p>\n\n<pre><code>_facility_fields.html.erb\n\n&lt;div class='nested-fields'&gt;\n &lt;%= f.inputs do %&gt;             // Issue is this line\n  &lt;%= f.input :name %&gt;\n  &lt;%= link_to_remove_association \"remove facility\", f %&gt;\n &lt;% end %&gt;                      // Remove this too afterwards\n&lt;/div&gt;\n</code></pre>\n"}], "owner": {"reputation": 323, "user_id": 3338886, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/75b47755e1a595760e9bce7e4eefa2f4?s=128&d=identicon&r=PG&f=1", "display_name": "Wesly", "link": "https://stackoverflow.com/users/3338886/wesly"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 84, "favorite_count": 0, "accepted_answer_id": 42703752, "answer_count": 1, "score": 1, "last_activity_date": 1489087287, "creation_date": 1488996945, "last_edit_date": 1488998109, "question_id": 42678881, "link": "https://stackoverflow.com/questions/42678881/using-cocoon-gem-to-add-nested-forms-facilities-will-not-save-unless-a-toilet-i", "title": "Using cocoon gem to add nested forms. Facilities will not save unless a Toilet is created first", "body": "<p>I'm going off by the tutorial that's in the cocoon gem. When trying to create a Toilet the facilities that I'm adding won't save unless the Toilet is created first. I was thinking that it should have been created together as is. Is there a way to save the facilities when creating the toilet? </p>\n\n<p>To not get things confused</p>\n\n<pre><code>class Toilet &lt; ApplicationRecord\n has_many :facilities\n  accepts_nested_attributes_for :facilities, reject_if: :all_blank, allow_destroy: true\n end\n\n class Facility &lt; ApplicationRecord\n  belongs_to :toilet\n end\n</code></pre>\n\n<p>Toilet controller</p>\n\n<pre><code>def new\n @toilet = Toilet.new\nend\n\ndef create\n @toilet = Toilet.new(toilet_params)\n if @toilet.save\n  redirect_to @toilet\n else\n  render :new\n end\nend\n\nprivate\n def toilet_params\n  params.require(:toilet).permit(:name, :location, facilities_attributes: [:id, :name, :_destroy])\n end\n</code></pre>\n\n<p>_form.html.erb</p>\n\n<pre><code>&lt;%= f.simple_fields_for :facilities do |facility| %&gt;\n &lt;%= render 'facility_fields', :f =&gt; facility %&gt;\n&lt;% end %&gt;\n&lt;div class='links'&gt;\n &lt;%= link_to_add_association 'add facility', f, :facilities %&gt;\n&lt;/div&gt;\n &lt;%= f.submit 'Save' %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>_facility_fields.html.erb</p>\n\n<pre><code>&lt;div class='nested-fields'&gt;\n &lt;%= f.inputs do %&gt;\n  &lt;%= f.input :name %&gt;\n  &lt;%= link_to_remove_association \"remove facility\", f %&gt;\n &lt;% end %&gt;\n&lt;/div&gt;\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "twitter-bootstrap", "rubygems", "gemfile"], "comments": [{"owner": {"reputation": 655, "user_id": 4916648, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/cpT8L.png?s=128&g=1", "display_name": "SomeSchmo", "link": "https://stackoverflow.com/users/4916648/someschmo"}, "edited": false, "score": 2, "creation_date": 1488996780, "post_id": 42678554, "comment_id": 72481967, "body": "have you tried it without the the :git =&gt; &#39;git://github.com/seyhunak/twitter-bootstrap-rails.git line?"}, {"owner": {"reputation": 233, "user_id": 4875656, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/Vlt1x.jpg?s=128&g=1", "display_name": "samureira", "link": "https://stackoverflow.com/users/4875656/samureira"}, "reply_to_user": {"reputation": 655, "user_id": 4916648, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/cpT8L.png?s=128&g=1", "display_name": "SomeSchmo", "link": "https://stackoverflow.com/users/4916648/someschmo"}, "edited": false, "score": 0, "creation_date": 1488997679, "post_id": 42678554, "comment_id": 72482476, "body": "Thanks man, I think it works. But strange, I just religiously followed the provided documentation. Still, don&#39;t know what&#39;s the difference between having that line or not."}, {"owner": {"reputation": 655, "user_id": 4916648, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/cpT8L.png?s=128&g=1", "display_name": "SomeSchmo", "link": "https://stackoverflow.com/users/4916648/someschmo"}, "edited": false, "score": 2, "creation_date": 1488998628, "post_id": 42678554, "comment_id": 72483079, "body": "Stuff thats on the the companies github isn&#39;t always in/ready for the the production version of the gem yet so I could have been that or it could have been some version issue. Generally you don&#39;t need to point to a git repo for a gem unless there&#39;s some feature you need that they haven&#39;t released yet"}], "owner": {"reputation": 233, "user_id": 4875656, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/Vlt1x.jpg?s=128&g=1", "display_name": "samureira", "link": "https://stackoverflow.com/users/4875656/samureira"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 266, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1488999746, "creation_date": 1488995892, "last_edit_date": 1488999746, "question_id": 42678554, "link": "https://stackoverflow.com/questions/42678554/twitter-bootstrap-rails-gem-issue", "title": "Twitter Bootstrap Rails - Gem Issue", "body": "<p>When trying to install a rails gem that ships the twitter-bootstrap-rails into my application, I got the following issue:</p>\n\n<blockquote>\n  <p>C:\\workinrails\\mytrelloapp>bundle install\n  Bundler could not find compatible versions for gem \"railties\":\n    In snapshot (Gemfile.lock):\n      railties (= 4.2.5.1)</p>\n  \n  <p>In Gemfile:\n      coffee-rails (~> 4.1.0) x86-mingw32 was resolved to 4.1.1, which depends on\n        railties (&lt; 5.1.x, >= 4.0.0) x86-mingw32</p>\n  \n  <p>jquery-rails x86-mingw32 was resolved to 4.2.2, which depends on\n        railties (>= 4.2.0) x86-mingw32</p>\n  \n  <p>rails (= 4.2.5.1) x86-mingw32 was resolved to 4.2.5.1, which depends on\n        railties (= 4.2.5.1) x86-mingw32</p>\n  \n  <p>sass-rails (~> 5.0) x86-mingw32 was resolved to 5.0.6, which depends on\n        railties (&lt; 6, >= 4.0.0) x86-mingw32</p>\n  \n  <p>twitter-bootstrap-rails x86-mingw32 was resolved to 4.0.0, which depends on\n        railties (>= 5.0.1, ~> 5.0) x86-mingw32</p>\n  \n  <p>web-console (~> 2.0) x86-mingw32 was resolved to 2.3.0, which depends on\n        railties (>= 4.0) x86-mingw32</p>\n</blockquote>\n\n<p>After getting this \"Running bundle update will rebuild your snapshot from scratch, using only the gems in your Gemfile, which may resolve the conflict.\" message, I got a new issue telling me that Bundler could not find compatible versions for gem \"actionpack\"</p>\n\n<p>To summarize, I just did these steps:</p>\n\n<p>Step 1 - Pasted gem 'twitter-bootstrap-rails', :git => 'git://github.com/seyhunak/twitter-bootstrap-rails.git' to my gemfile.</p>\n\n<p>Step 2 - Bundle install</p>\n\n<p>And I was hoping to arrive to Step 3 - rails generate bootstrap:install static</p>\n\n<p>What's the issue?</p>\n"}, {"tags": ["ruby", "rubygems", "cygwin", "puma", "virtualalloc"], "answers": [{"tags": [], "owner": {"reputation": 2744, "user_id": 2355163, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/0gSxu.jpg?s=128&g=1", "display_name": "Suthan Bala", "link": "https://stackoverflow.com/users/2355163/suthan-bala"}, "is_accepted": true, "score": 0, "last_activity_date": 1488997645, "last_edit_date": 1495535449, "creation_date": 1488997645, "answer_id": 42679106, "question_id": 42678523, "link": "https://stackoverflow.com/questions/42678523/installing-puma-on-windows-virtualalloc-pointer-is-null/42679106#42679106", "title": "Installing Puma on windows VirtualAlloc pointer is null", "body": "<p>As stated on this answer, <a href=\"https://stackoverflow.com/a/18503369/2355163\">https://stackoverflow.com/a/18503369/2355163</a>, a <code>reboot</code> of the PC solved the issue.</p>\n"}], "owner": {"reputation": 2744, "user_id": 2355163, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/0gSxu.jpg?s=128&g=1", "display_name": "Suthan Bala", "link": "https://stackoverflow.com/users/2355163/suthan-bala"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 137, "favorite_count": 0, "accepted_answer_id": 42679106, "answer_count": 1, "score": 0, "last_activity_date": 1488997645, "creation_date": 1488995808, "question_id": 42678523, "link": "https://stackoverflow.com/questions/42678523/installing-puma-on-windows-virtualalloc-pointer-is-null", "title": "Installing Puma on windows VirtualAlloc pointer is null", "body": "<p>I did check the other issues and majority had problems with <code>OpenSSL</code>. I did try the solutions other mentioned with installing the <code>OpenSSL</code> but it didn't help. </p>\n\n<p>I am getting the following error message when trying to install the <code>Puma</code> by <code>gem install puma</code>:</p>\n\n<pre><code>Temporarily enhancing PATH to include DevKit...\nBuilding native extensions.  This could take a while...\nC:\\DevKit\\bin\\make.exe: *** Couldn't reserve space for cygwin's heap, Win32 error 0\nC:\\DevKit\\bin\\make.exe: *** Couldn't reserve space for cygwin's heap, Win32 error 0\nERROR:  Error installing puma:\n        ERROR: Failed to build gem native extension.\n\n    current directory: C:/Bitnami/rubystack-2.2.6-0/ruby/lib/ruby/gems/2.3.0/gems/puma-3.7.1/ext/puma_http11\nC:/Bitnami/rubystack-2.2.6-0/ruby/bin/ruby.exe -r ./siteconf20170308-12444-1rq3kcf.rb extconf.rb\nchecking for BIO_read() in -lcrypto... no\nchecking for BIO_read() in -llibeay32... no\ncreating Makefile\n\nTo see why this extension failed to compile, please check the mkmf.log which can be found here:\n\n  C:/Bitnami/rubystack-2.2.6-0/ruby/lib/ruby/gems/2.3.0/extensions/x64-mingw32/2.3.0/puma-3.7.1/mkmf.log\n\ncurrent directory: C:/Bitnami/rubystack-2.2.6-0/ruby/lib/ruby/gems/2.3.0/gems/puma-3.7.1/ext/puma_http11\nmake \"DESTDIR=\" clean\n      0 [main] us 0 init_cheap: VirtualAlloc pointer is null, Win32 error 487\nAllocationBase 0x0, BaseAddress 0x60E90000, RegionSize 0x3E0000, State 0x10000\nC:\\DevKit\\bin\\make.exe: *** Couldn't reserve space for cygwin's heap, Win32 error 0\n\ncurrent directory: C:/Bitnami/rubystack-2.2.6-0/ruby/lib/ruby/gems/2.3.0/gems/puma-3.7.1/ext/puma_http11\nmake \"DESTDIR=\"\n      0 [main] us 0 init_cheap: VirtualAlloc pointer is null, Win32 error 487\nAllocationBase 0x0, BaseAddress 0x60E90000, RegionSize 0x3E0000, State 0x10000\nC:\\DevKit\\bin\\make.exe: *** Couldn't reserve space for cygwin's heap, Win32 error 0\n\nmake failed, exit code 1\n\nGem files will remain installed in C:/Bitnami/rubystack-2.2.6-0/ruby/lib/ruby/gems/2.3.0/gems/puma-3.7.1 for inspection.\nResults logged to C:/Bitnami/rubystack-2.2.6-0/ruby/lib/ruby/gems/2.3.0/extensions/x64-mingw32/2.3.0/puma-3.7.1/gem_make.out\n</code></pre>\n\n<p><strong>System Specs:</strong></p>\n\n<ul>\n<li>OpenSSL Version: <code>OpenSSL 1.0.2j  26 Sep 2016</code></li>\n<li>Ruby Version: <code>ruby 2.3.3p222 (2016-11-21 revision 56859) [x64-mingw32]</code></li>\n<li>OS: <code>Windows 10</code></li>\n<li>Devkit: <code>installed</code></li>\n</ul>\n"}, {"tags": ["ruby", "chef-infra", "erb"], "comments": [{"owner": {"reputation": 43208, "user_id": 78722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf611565f0b79abd0b3dc200ad867661?s=128&d=identicon&r=PG", "display_name": "coderanger", "link": "https://stackoverflow.com/users/78722/coderanger"}, "edited": false, "score": 0, "creation_date": 1488994984, "post_id": 42678163, "comment_id": 72480925, "body": "Are you trying to generate Yaml for a conf file?"}, {"owner": {"reputation": 13, "user_id": 406612, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/833ec0e4984b9913a6d8e47b4afefd5d?s=128&d=identicon&r=PG", "display_name": "Jacqueline Casey", "link": "https://stackoverflow.com/users/406612/jacqueline-casey"}, "reply_to_user": {"reputation": 43208, "user_id": 78722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf611565f0b79abd0b3dc200ad867661?s=128&d=identicon&r=PG", "display_name": "coderanger", "link": "https://stackoverflow.com/users/78722/coderanger"}, "edited": false, "score": 0, "creation_date": 1488995197, "post_id": 42678163, "comment_id": 72481052, "body": "@coderanger yes. thanks"}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 406612, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/833ec0e4984b9913a6d8e47b4afefd5d?s=128&d=identicon&r=PG", "display_name": "Jacqueline Casey", "link": "https://stackoverflow.com/users/406612/jacqueline-casey"}, "edited": false, "score": 0, "creation_date": 1489011455, "post_id": 42679590, "comment_id": 72490043, "body": "Thanks for your help. Unfortunately it has to be done by referencing the node attribute directly in the template. Is there a way to do it directly in the template? I take it my syntax isn&#39;t quite correct. Again thanks for your help."}, {"owner": {"reputation": 43208, "user_id": 78722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf611565f0b79abd0b3dc200ad867661?s=128&d=identicon&r=PG", "display_name": "coderanger", "link": "https://stackoverflow.com/users/78722/coderanger"}, "reply_to_user": {"reputation": 13, "user_id": 406612, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/833ec0e4984b9913a6d8e47b4afefd5d?s=128&d=identicon&r=PG", "display_name": "Jacqueline Casey", "link": "https://stackoverflow.com/users/406612/jacqueline-casey"}, "edited": false, "score": 0, "creation_date": 1489011617, "post_id": 42679590, "comment_id": 72490132, "body": "Sure, you could do <code>&lt;%= node[&#39;a&#39;].to_hash.to_yaml %&gt;</code> in the same way but we really don&#39;t recommend it as it leads to very difficult-to-maintain cookbooks."}, {"owner": {"reputation": 13, "user_id": 406612, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/833ec0e4984b9913a6d8e47b4afefd5d?s=128&d=identicon&r=PG", "display_name": "Jacqueline Casey", "link": "https://stackoverflow.com/users/406612/jacqueline-casey"}, "edited": false, "score": 0, "creation_date": 1489046834, "post_id": 42679590, "comment_id": 72502454, "body": "Thanks, I don&#39;t fully understand. This is an example of things that are in my .yml.erb file: d: &lt;%= node [&#39;d&#39;] %&gt; (where node[&#39;d&#39;] = &#39;5&#39;), I need to do something similar in the .yml.erb file that will let me pull out the values of node[&#39;a&#39;] = {:b &quot;1&quot; :c &quot;2&quot;}. I&#39;m struggling with how to access :b and :c. Thanks"}, {"owner": {"reputation": 43208, "user_id": 78722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf611565f0b79abd0b3dc200ad867661?s=128&d=identicon&r=PG", "display_name": "coderanger", "link": "https://stackoverflow.com/users/78722/coderanger"}, "reply_to_user": {"reputation": 13, "user_id": 406612, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/833ec0e4984b9913a6d8e47b4afefd5d?s=128&d=identicon&r=PG", "display_name": "Jacqueline Casey", "link": "https://stackoverflow.com/users/406612/jacqueline-casey"}, "edited": false, "score": 0, "creation_date": 1489049712, "post_id": 42679590, "comment_id": 72504148, "body": "You don&#39;t, let <code>to_yaml</code> handle all of that."}, {"owner": {"reputation": 43208, "user_id": 78722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf611565f0b79abd0b3dc200ad867661?s=128&d=identicon&r=PG", "display_name": "coderanger", "link": "https://stackoverflow.com/users/78722/coderanger"}, "reply_to_user": {"reputation": 13, "user_id": 406612, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/833ec0e4984b9913a6d8e47b4afefd5d?s=128&d=identicon&r=PG", "display_name": "Jacqueline Casey", "link": "https://stackoverflow.com/users/406612/jacqueline-casey"}, "edited": false, "score": 0, "creation_date": 1489049987, "post_id": 42679590, "comment_id": 72504301, "body": "Basically generating file formats like YAML and JSON is best left to libraries, just get the data structure you want in Ruby and then feed it to <code>to_yaml</code>. In this case the data you want is probably <code>node[&#39;whatever&#39;].to_hash</code>."}], "tags": [], "owner": {"reputation": 43208, "user_id": 78722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf611565f0b79abd0b3dc200ad867661?s=128&d=identicon&r=PG", "display_name": "coderanger", "link": "https://stackoverflow.com/users/78722/coderanger"}, "is_accepted": true, "score": 1, "last_activity_date": 1488999189, "creation_date": 1488999189, "answer_id": 42679590, "question_id": 42678163, "link": "https://stackoverflow.com/questions/42678163/erb-file-with-chef-syntax/42679590#42679590", "title": "erb file with chef syntax", "body": "<p>Okay, so let's rewind a bit. The first thing is that you generally don't want to reference node attributes directly in templates. In some cases like attributes coming from Ohai it can be okay as a shorthand, but for important data I would also pass it in via the <code>variables</code> property like this:</p>\n\n<pre><code>template '/etc/whatever.conf' do\n  source 'whatever.conf.erb'\n  variables a: node['a']\nend\n</code></pre>\n\n<p>With that in place we've now expose the data as a template variable. The second piece of improving this is to let Ruby do the heavy lifting of generating YAML. We can do this using the <code>.to_yaml</code> method in the template:</p>\n\n<pre><code>&lt;%= @a.to_yaml %&gt;\n</code></pre>\n\n<p>That should be all you need!</p>\n"}], "owner": {"reputation": 13, "user_id": 406612, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/833ec0e4984b9913a6d8e47b4afefd5d?s=128&d=identicon&r=PG", "display_name": "Jacqueline Casey", "link": "https://stackoverflow.com/users/406612/jacqueline-casey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 756, "favorite_count": 0, "accepted_answer_id": 42679590, "answer_count": 1, "score": 0, "last_activity_date": 1488999189, "creation_date": 1488994618, "question_id": 42678163, "link": "https://stackoverflow.com/questions/42678163/erb-file-with-chef-syntax", "title": "erb file with chef syntax", "body": "<p>Trying to output the contents of</p>\n\n<pre><code>node['a'] = {:b \"1\" :c \"2\"}\n</code></pre>\n\n<p>by doing this:</p>\n\n<pre><code>a: \n&lt;% a = node['a'] %&gt;\n b: &lt;% a[:b] %&gt;\n c: &lt;% a[:c] %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>to generate this:</p>\n\n<pre><code>a: \n b: 1\n c: 2\n</code></pre>\n\n<p>However not entirely sure the correct syntax to do this being new to ruby, chef and erb.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "imap"], "answers": [{"comments": [{"owner": {"reputation": 655, "user_id": 4916648, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/cpT8L.png?s=128&g=1", "display_name": "SomeSchmo", "link": "https://stackoverflow.com/users/4916648/someschmo"}, "edited": false, "score": 0, "creation_date": 1488999032, "post_id": 42679437, "comment_id": 72483318, "body": "Thanks but it happens for Yahoo as well with the same error. Added above."}, {"owner": {"reputation": 9142, "user_id": 1442918, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7490251da02084a2e2720e20029d2bff?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/1442918/max"}, "reply_to_user": {"reputation": 655, "user_id": 4916648, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/cpT8L.png?s=128&g=1", "display_name": "SomeSchmo", "link": "https://stackoverflow.com/users/4916648/someschmo"}, "edited": false, "score": 0, "creation_date": 1488999336, "post_id": 42679437, "comment_id": 72483498, "body": "It is not the same error.  The text is different.  However, Yahoo also has login protection, and Yahoo is even more difficult to work around.  Implementing OAUTH2 is a surefire way to get Gmail to work, but I know no workaround for Yahoo."}, {"owner": {"reputation": 9142, "user_id": 1442918, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7490251da02084a2e2720e20029d2bff?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/1442918/max"}, "reply_to_user": {"reputation": 655, "user_id": 4916648, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/cpT8L.png?s=128&g=1", "display_name": "SomeSchmo", "link": "https://stackoverflow.com/users/4916648/someschmo"}, "edited": false, "score": 0, "creation_date": 1488999374, "post_id": 42679437, "comment_id": 72483523, "body": "For Yahoo, you may get it to work by going to the URL in the error message, again, from the same IP you&#39;re trying to log in from."}, {"owner": {"reputation": 655, "user_id": 4916648, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/cpT8L.png?s=128&g=1", "display_name": "SomeSchmo", "link": "https://stackoverflow.com/users/4916648/someschmo"}, "edited": false, "score": 0, "creation_date": 1489001069, "post_id": 42679437, "comment_id": 72484540, "body": "hmm ok I&#39;ll look into doing OAUTH2 for gmail. Last question, do you know of any workarounds for iCloud accounts?"}, {"owner": {"reputation": 9142, "user_id": 1442918, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7490251da02084a2e2720e20029d2bff?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/1442918/max"}, "reply_to_user": {"reputation": 655, "user_id": 4916648, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/cpT8L.png?s=128&g=1", "display_name": "SomeSchmo", "link": "https://stackoverflow.com/users/4916648/someschmo"}, "edited": false, "score": 0, "creation_date": 1489012498, "post_id": 42679437, "comment_id": 72490529, "body": "For icloud, App Specific Passwords seem to work well.   You can generate them at appleid.apple.com, but that may only be available if you have 2FA turned on."}], "tags": [], "owner": {"reputation": 9142, "user_id": 1442918, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7490251da02084a2e2720e20029d2bff?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/1442918/max"}, "is_accepted": true, "score": 0, "last_activity_date": 1488998651, "creation_date": 1488998651, "answer_id": 42679437, "question_id": 42678136, "link": "https://stackoverflow.com/questions/42678136/ruby-net-imap-login-not-working/42679437#42679437", "title": "Ruby net/imap login not working", "body": "<p>Gmail has fickle and unpredictable login protection. It may block you for any reason Google sees fit.</p>\n\n<p>There are a couple things you can do:</p>\n\n<p>You can either try to go to the web user interface, or the <a href=\"https://accounts.google.com/b/0/DisplayUnlockCaptcha\" rel=\"nofollow noreferrer\">Unlock Captcha</a> page <em>from the same IP it sees you connecting from</em> to unlock it.</p>\n\n<p>You can try turning on <a href=\"https://support.google.com/accounts/answer/6010255\" rel=\"nofollow noreferrer\">Less Secure Apps</a>.</p>\n\n<p>You can implement full <a href=\"https://developers.google.com/identity/protocols/OAuth2\" rel=\"nofollow noreferrer\">OAUTH2</a>.</p>\n\n<p>Depending on your login settings (eg, if you have two factor turned on), you may be able to generate an <a href=\"https://security.google.com/settings/security/apppasswords\" rel=\"nofollow noreferrer\">App Specific Password</a> which should also work.</p>\n"}], "owner": {"reputation": 655, "user_id": 4916648, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/cpT8L.png?s=128&g=1", "display_name": "SomeSchmo", "link": "https://stackoverflow.com/users/4916648/someschmo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 651, "favorite_count": 0, "accepted_answer_id": 42679437, "answer_count": 1, "score": 0, "last_activity_date": 1488998988, "creation_date": 1488994531, "last_edit_date": 1488998988, "question_id": 42678136, "link": "https://stackoverflow.com/questions/42678136/ruby-net-imap-login-not-working", "title": "Ruby net/imap login not working", "body": "<p>Can't figure out why since the structure seem very straightforward</p>\n\n<pre><code>imap = Net::IMAP.new(\"imap.gmail.com\", 993, ssl: true)\nimap.login(\"someuser@gmail.com\", \"someValidPassword\")\n</code></pre>\n\n<p>returns this error</p>\n\n<pre><code>Net::IMAP::NoResponseError:  Please log in via your web browser: https://support.google.com/mail/accounts/answer/78754 (Failure)\nfrom /Users/Rocco/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/net/imap.rb:1171:in `get_tagged_response'\n</code></pre>\n\n<p>I have imap enabled in my gmail, I'm working locally but through a web tunnel (i.e. I could send you the url and you'd be able to access it) so it shouldn't be that different than working in production. Any help is appreciated!</p>\n\n<p>Edit: happens for yahoo as well</p>\n\n<pre><code>imap = Net::IMAP.new(\"imap.mail.yahoo.com\", 993, true, nil, false)\nimap.login(\"myAccount@yahoo.com\", \"myPassword\")\n</code></pre>\n\n<p>Same error</p>\n\n<pre><code>Net::IMAP::NoResponseError:  (#MBR1240) Please verify your account by going to https://login.yahoo.com\nfrom /Users/Rocco/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/net/imap.rb:1171:in `get_tagged_response'\nfrom /Users/Rocco/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/net/imap.rb:1225:in `block in send_command'\nfrom /Users/Rocco/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/monitor.rb:211:in `mon_synchronize'\nfrom /Users/Rocco/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/net/imap.rb:1207:in `send_command'\nfrom /Users/Rocco/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/net/imap.rb:435:in `login'\nfrom (irb):8\nfrom /Users/Rocco/.rvm/rubies/ruby-2.2.4/bin/irb:11:in `&lt;main&gt;'\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1488993069, "post_id": 42677529, "comment_id": 72479696, "body": "That line doesn&#39;t look like it&#39;s referenced in any of the code here."}, {"owner": {"reputation": 53, "user_id": 5216162, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85b48764a8ffd47754c91bc62ec683ee?s=128&d=identicon&r=PG&f=1", "display_name": "CapitalP", "link": "https://stackoverflow.com/users/5216162/capitalp"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1488996411, "post_id": 42677529, "comment_id": 72481769, "body": "tadman, as mmichael says below, I have orphaned my favorite records. I followed the article but I can&#39;t wrap my head fully around the polymorphic associations cocnept. I am not sure how to remove favorite_projetcs from my records now that they are orphaned"}], "answers": [{"comments": [{"owner": {"reputation": 53, "user_id": 5216162, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85b48764a8ffd47754c91bc62ec683ee?s=128&d=identicon&r=PG&f=1", "display_name": "CapitalP", "link": "https://stackoverflow.com/users/5216162/capitalp"}, "edited": false, "score": 0, "creation_date": 1488995015, "post_id": 42677828, "comment_id": 72480939, "body": "Do you think <code>Favorite.delete_all</code> would be appropriate here then?"}, {"owner": {"reputation": 11638, "user_id": 461294, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EQqHn.jpg?s=128&g=1", "display_name": "vich", "link": "https://stackoverflow.com/users/461294/vich"}, "reply_to_user": {"reputation": 53, "user_id": 5216162, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85b48764a8ffd47754c91bc62ec683ee?s=128&d=identicon&r=PG&f=1", "display_name": "CapitalP", "link": "https://stackoverflow.com/users/5216162/capitalp"}, "edited": false, "score": 0, "creation_date": 1488996809, "post_id": 42677828, "comment_id": 72481983, "body": "You can definitely do that so long as you don&#39;t mind destroying all your <code>Favorite</code> records."}, {"owner": {"reputation": 11638, "user_id": 461294, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EQqHn.jpg?s=128&g=1", "display_name": "vich", "link": "https://stackoverflow.com/users/461294/vich"}, "reply_to_user": {"reputation": 53, "user_id": 5216162, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85b48764a8ffd47754c91bc62ec683ee?s=128&d=identicon&r=PG&f=1", "display_name": "CapitalP", "link": "https://stackoverflow.com/users/5216162/capitalp"}, "edited": false, "score": 0, "creation_date": 1488997377, "post_id": 42677828, "comment_id": 72482316, "body": "By the way, if you&#39;d like to only destroy your orphaned records, you could run: <code>Favorite.where(favorited_type: &#39;Project&#39;).delete_all</code>. Take a look at <a href=\"http://guides.rubyonrails.org/association_basics.html#polymorphic-associations\" rel=\"nofollow noreferrer\">the Rails docs on polymorphic associations</a>, and note the two database columns <code>_id</code> and <code>_type</code> (in your case: <code>favorited_id</code> and <code>favorited_type</code>)."}], "tags": [], "owner": {"reputation": 11638, "user_id": 461294, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EQqHn.jpg?s=128&g=1", "display_name": "vich", "link": "https://stackoverflow.com/users/461294/vich"}, "is_accepted": true, "score": 1, "last_activity_date": 1488993680, "creation_date": 1488993680, "answer_id": 42677828, "question_id": 42677529, "link": "https://stackoverflow.com/questions/42677529/deleting-polymorphic-associations/42677828#42677828", "title": "Deleting polymorphic associations", "body": "<p>Per the <a href=\"http://apidock.com/rails/ActiveRecord/Relation/delete_all\" rel=\"nofollow noreferrer\">Rails API docs on <code>delete_all</code></a>:</p>\n\n<blockquote>\n  <p>Deletes the records matching conditions without instantiating the records first, and hence not calling the destroy method nor invoking callbacks. This is a single SQL DELETE statement that goes straight to the database, much more efficient than destroy_all. <strong>Be careful with relations though, in particular :dependent rules defined on associations are not honored. Returns the number of rows affected.</strong></p>\n</blockquote>\n\n<p>I bolded the relevant text; and further in the docs:</p>\n\n<blockquote>\n  <p>If you need to destroy dependent associations or call your before_* or after_destroy callbacks, use the destroy_all method instead.</p>\n</blockquote>\n\n<p>In summary, you now have orphaned <code>Favorite</code> records. I would fire up <code>rails c</code> and destroy the orphaned records and be mindful next time you run any <code>delete</code> functions.</p>\n"}, {"comments": [{"owner": {"reputation": 11638, "user_id": 461294, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EQqHn.jpg?s=128&g=1", "display_name": "vich", "link": "https://stackoverflow.com/users/461294/vich"}, "edited": false, "score": 0, "creation_date": 1489073625, "post_id": 42679937, "comment_id": 72520539, "body": "Just keep in mind that <code>delete</code> and <code>delete_all</code> will ignore <code>dependent: :destroy</code> :)"}], "tags": [], "owner": {"reputation": 15583, "user_id": 177489, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/sv6zK.jpg?s=128&g=1", "display_name": "Mark Swardstrom", "link": "https://stackoverflow.com/users/177489/mark-swardstrom"}, "is_accepted": false, "score": 3, "last_activity_date": 1489000312, "creation_date": 1489000312, "answer_id": 42679937, "question_id": 42677529, "link": "https://stackoverflow.com/questions/42677529/deleting-polymorphic-associations/42679937#42679937", "title": "Deleting polymorphic associations", "body": "<p>You'll want to set the dependent option.</p>\n\n<pre><code>has_many :favorites, as: :favorited, dependent: :destroy\n</code></pre>\n\n<p>Set this on any associations where it doesn't make sense to leave the objects in the db.  </p>\n\n<p>You won't need to set it on the <code>through</code> has_many associations.</p>\n"}], "owner": {"reputation": 53, "user_id": 5216162, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85b48764a8ffd47754c91bc62ec683ee?s=128&d=identicon&r=PG&f=1", "display_name": "CapitalP", "link": "https://stackoverflow.com/users/5216162/capitalp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1478, "favorite_count": 0, "accepted_answer_id": 42677828, "answer_count": 2, "score": 2, "last_activity_date": 1489000312, "creation_date": 1488992835, "question_id": 42677529, "link": "https://stackoverflow.com/questions/42677529/deleting-polymorphic-associations", "title": "Deleting polymorphic associations", "body": "<p>I have implemented a favoriting system for my rails app by following <a href=\"http://schmidt-happens.com/articles/2014/06/04/favoriting-system-in-rails.html\" rel=\"nofollow noreferrer\">this great article</a>.</p>\n\n<p>Here is my set up:</p>\n\n<hr>\n\n<p>favorite.rb</p>\n\n<pre><code>class Favorite &lt; ActiveRecord::Base\n  belongs_to :user\n  belongs_to :favorited, polymorphic: true\nend\n</code></pre>\n\n<hr>\n\n<p>project.rb</p>\n\n<pre><code>class Project &lt; ActiveRecord::Base\n    belongs_to :user\n\n    has_many :favorites, as: :favorited\n    has_many :fans, through: :favorites, source: :user \n</code></pre>\n\n<hr>\n\n<p>user.rb</p>\n\n<pre><code>class User &lt; ActiveRecord::Base\n  has_many :listings\n  has_many :projects\n  has_many :favorites\n  has_many :favorite_listings, through: :favorites, source: :favorited, source_type: 'Listing'\n  has_many :favorite_projects, through: :favorites, source: :favorited, source_type: 'Project'\n</code></pre>\n\n<hr>\n\n<p>favorite_projects_controller.rb</p>\n\n<pre><code>class FavoriteProjectsController &lt; ApplicationController\n  before_action :set_project\n  # before_action :correct_user\n  # before_action :authenticate_user!\n\n  def create\n    if Favorite.create(favorited: @project, user: current_user)\n      redirect_to @project, notice: 'Project has been favorited'\n    else\n      redirect_to @project, alert: 'Something went wrong...*sad panda*'\n    end\n  end\n\n  def destroy\n    Favorite.where(favorited_id: @project.id, user_id: current_user.id).first.destroy\n    redirect_to @project, notice: 'Project is no longer in favorites'\n  end\n\n  private\n\n  def set_project\n    @project = Project.find(params[:project_id] || params[:id])\n  end\nend\n</code></pre>\n\n<hr>\n\n<p>Here is the problem.</p>\n\n<p>I had some favorited projects.</p>\n\n<p>I used <code>Project.delete_all</code> to delete my projects while certain projects were still \"favorited\" but now I get an error:</p>\n\n<pre><code> ActionView::Template::Error (undefined method `favorite_projects' for nil:NilClass):\n</code></pre>\n\n<p>I'm sure If I had \"unfavorited\" all those projects before deleting them, this error would not come up.</p>\n\n<p>Does anyone have an idea on how to fix this?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "associations", "morris.js"], "answers": [{"comments": [{"owner": {"reputation": 667, "user_id": 6589814, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/FzUlF.png?s=128&g=1", "display_name": "Rubioli", "link": "https://stackoverflow.com/users/6589814/rubioli"}, "edited": false, "score": 0, "creation_date": 1488994200, "post_id": 42677681, "comment_id": 72480392, "body": "OMG!! Thanks @gwcodes, This is what happens when your eyes are tired and you are out of focus haha."}], "tags": [], "owner": {"reputation": 5382, "user_id": 7671538, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3506350bc4dd02281ad7f99e8e84715c?s=128&d=identicon&r=PG&f=1", "display_name": "gwcodes", "link": "https://stackoverflow.com/users/7671538/gwcodes"}, "is_accepted": true, "score": 2, "last_activity_date": 1488993301, "creation_date": 1488993301, "answer_id": 42677681, "question_id": 42677445, "link": "https://stackoverflow.com/questions/42677445/ruby-on-rails-adding-morris-js-correctly-for-a-associations/42677681#42677681", "title": "Ruby on Rails - Adding morris.js Correctly for a associations", "body": "<p>This line looks suspect:</p>\n\n<pre><code>impressions: Impression.where(\"date(created_at) =?\", date).where(id: maps).size\n</code></pre>\n\n<p>The <code>where(id: maps)</code> is selecting on the <code>id</code> column for impressions, whereas you presumably want to be selecting on <code>impressionable_type</code> and <code>impressionable_id</code>?</p>\n"}], "owner": {"reputation": 667, "user_id": 6589814, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/FzUlF.png?s=128&g=1", "display_name": "Rubioli", "link": "https://stackoverflow.com/users/6589814/rubioli"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "accepted_answer_id": 42677681, "answer_count": 1, "score": 0, "last_activity_date": 1488993301, "creation_date": 1488992566, "question_id": 42677445, "link": "https://stackoverflow.com/questions/42677445/ruby-on-rails-adding-morris-js-correctly-for-a-associations", "title": "Ruby on Rails - Adding morris.js Correctly for a associations", "body": "<p>In my application I have models <code>Campaign</code> &amp; <code>Map</code>:</p>\n\n<pre><code>class Campaign &lt; ActiveRecord::Base\n  has_many :maps, :dependent =&gt; :destroy\n\nclass Map &lt; ActiveRecord::Base\n  is_impressionable :counter_cache =&gt; true, :unique =&gt; :request_hash\n  belongs_to :campaign, :counter_cache =&gt; true, touch: true\n</code></pre>\n\n<p>In my <code>Map</code> model, I'm using <strong><code>is_impressionable</code></strong> that comes with installing <strong><code>impressionist gem</code></strong> &amp; I have added <code>counter_cache</code> as well that will update my <code>impressions_count</code> for every visit <em>(in my <code>maps</code> table)</em>.</p>\n\n<p>In my <code>campaigns#show</code> view, Im trying to add a chart for <code>maps impressions</code> by using <strong>morris.js</strong> <em>(I have added all needed files in my application and can see the chart)</em>.</p>\n\n<p>In my chart, I want to show <code>impressions</code> on <code>campaign.maps</code>, but I am getting wrong data into my chart.</p>\n\n<p>So basically, go to my <code>impressions</code> table, and <code>sum</code> all visits that my <code>campaign.maps</code> has on the giving day.</p>\n\n<p><em>This is what I have until now:</em></p>\n\n<pre><code>module CampaignsHelper\n  def impressions_chart_data_campaign(maps)\n    (7.days.ago.to_date..Date.today).map do |date|\n      {\n          created_at: date,\n          impressions: Impression.where(\"date(created_at) =?\", date).where(id: maps).size\n      }\n    end\n  end\nend\n</code></pre>\n\n<p><em>My <code>campaigns#show</code> view:</em></p>\n\n<pre><code>= content_tag :div, \"\", id: \"impressions_charts_double\", data: {impressions: impressions_chart_data_campaign(@campaign.maps)}\n\n:javascript\n  Morris.Area({\n    element: 'impressions_charts_double',\n    data: $('#impressions_charts_double').data('impressions'),\n    xkey: 'created_at',\n    ykeys: ['impressions'],\n    labels: ['Impressions']\n  });\n</code></pre>\n\n<p>As mentioned I am getting completely wrong numbers. This is queries in my console:</p>\n\n<p><a href=\"https://i.stack.imgur.com/oSSJJ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/oSSJJ.png\" alt=\"DB Queries\"></a>\nI'm not sure What Im doing wrong.</p>\n"}, {"tags": ["ruby", "ruby-on-rails-5"], "answers": [{"comments": [{"owner": {"reputation": 179, "user_id": 3133284, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ada8c6df5578405772b3e7520924878a?s=128&d=identicon&r=PG", "display_name": "Tal Bull", "link": "https://stackoverflow.com/users/3133284/tal-bull"}, "edited": false, "score": 0, "creation_date": 1488996948, "post_id": 42677298, "comment_id": 72482073, "body": "This Fixed it, thank you so much!  I was pullong my hair out for hours and litterally yell &quot;what do you want from me?!&quot; at my computer so it&#39;s pretty embarrasing is was something THAT simple."}], "tags": [], "owner": {"reputation": 5382, "user_id": 7671538, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3506350bc4dd02281ad7f99e8e84715c?s=128&d=identicon&r=PG&f=1", "display_name": "gwcodes", "link": "https://stackoverflow.com/users/7671538/gwcodes"}, "is_accepted": true, "score": 1, "last_activity_date": 1488992164, "creation_date": 1488992164, "answer_id": 42677298, "question_id": 42677181, "link": "https://stackoverflow.com/questions/42677181/conserns-in-rails-5-are-not-loading/42677298#42677298", "title": "Conserns in Rails 5 are not loading", "body": "<p>It's quite likely that Rails can't autoload because the filenames don't match the module names, and so it doesn't know where to load them from.</p>\n\n<p>So <code>metatask_datatables_consern.rb</code> should be called <code>metatasks_datatable_module.rb</code> and <code>datatables_module.rb</code> should be <code>datatable_module.rb</code></p>\n"}], "owner": {"reputation": 179, "user_id": 3133284, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ada8c6df5578405772b3e7520924878a?s=128&d=identicon&r=PG", "display_name": "Tal Bull", "link": "https://stackoverflow.com/users/3133284/tal-bull"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 521, "favorite_count": 0, "accepted_answer_id": 42677298, "answer_count": 1, "score": 0, "last_activity_date": 1488992164, "creation_date": 1488991819, "question_id": 42677181, "link": "https://stackoverflow.com/questions/42677181/conserns-in-rails-5-are-not-loading", "title": "Conserns in Rails 5 are not loading", "body": "<p>I can't for the live of me get a consern to load in an app I'm building.  I'm using this for server-side processing with datatables.</p>\n\n<p>Just in case it's messing with something I'm including the structure of the module, where I have one general module with a bunch of stuff that is defined by specialized modules that have classes  which include the general module.  The intent being to use definitions inside the specialized classes for the different types of data found in different tables without having to repeat a bunch of code.</p>\n\n<ul>\n<li>I've checked the capitalization of the files as mentioned in another\npost.</li>\n<li>I've tried it both with and without the \"extend\nActiveSupport::Concern\" inside the module.</li>\n<li>I've tried changing the module name in case\nit was clashing with something else.</li>\n<li>I've tried adding \"::\" in front\nof the include from another post.</li>\n</ul>\n\n<p>I haven't even gotten to the </p>\n\n<p>The error:</p>\n\n<pre><code>ActionController::RoutingError (uninitialized constant MetatasksController::MetatasksDatatableModule):\n\napp/controllers/metatasks_controller.rb:2:in `&lt;class:MetatasksController&gt;'\napp/controllers/metatasks_controller.rb:1:in `&lt;top (required)&gt;'\n</code></pre>\n\n<p>My controller (/app/controllers/metatasks_controller.rb) has this:</p>\n\n<pre><code>class MetatasksController &lt; ApplicationController\n  include MetatasksDatatableModule\n  [...]\nend\n</code></pre>\n\n<p>The consern (/app/controllers/concerns/metatask_datatables_consern.rb) has this:</p>\n\n<pre><code>module MetatasksDatatableModule\n  extend ActiveSupport::Concern\n  class MetatasksDatatable\n    include DatatableModule\n    [...]\n  end\nend\n</code></pre>\n\n<p>The generalized datatable module (/app/controllers/concerns/datatables_module.rb) has this: </p>\n\n<pre><code>module DatatableModule\n  included do\n    [...]\n  end\nend\n</code></pre>\n\n<p>My autoload paths include the folder (edited for relevancy/privacy):</p>\n\n<pre><code>&gt; rails r 'puts ActiveSupport::Dependencies.autoload_paths'\n[...]\n/home/&lt;user&gt;/sites/&lt;appname&gt;/app/controllers/concerns\n[...]\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "apache", "passenger", "phusion"], "comments": [{"owner": {"reputation": 1528, "user_id": 7573791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e5e5cf864fb33229ca56750a51d6674?s=128&d=identicon&r=PG&f=1", "display_name": "Sajin", "link": "https://stackoverflow.com/users/7573791/sajin"}, "edited": false, "score": 2, "creation_date": 1488991900, "post_id": 42677174, "comment_id": 72478978, "body": "Try passing header as CONSUMER-SECRET instead of CONSUMER_SECRET."}, {"owner": {"reputation": 7168, "user_id": 640053, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/96fc923031cbec3fe58b7535229a179b?s=128&d=identicon&r=PG", "display_name": "Christian Benseler", "link": "https://stackoverflow.com/users/640053/christian-benseler"}, "reply_to_user": {"reputation": 1528, "user_id": 7573791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e5e5cf864fb33229ca56750a51d6674?s=128&d=identicon&r=PG&f=1", "display_name": "Sajin", "link": "https://stackoverflow.com/users/7573791/sajin"}, "edited": false, "score": 0, "creation_date": 1488993307, "post_id": 42677174, "comment_id": 72479829, "body": "@Sajin changes this, problems persists. No headers sent by my view (an ajax request) are present in the request headers from my rails app when running under Apache. In development mode, this is ok."}, {"owner": {"reputation": 7168, "user_id": 640053, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/96fc923031cbec3fe58b7535229a179b?s=128&d=identicon&r=PG", "display_name": "Christian Benseler", "link": "https://stackoverflow.com/users/640053/christian-benseler"}, "reply_to_user": {"reputation": 1528, "user_id": 7573791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e5e5cf864fb33229ca56750a51d6674?s=128&d=identicon&r=PG&f=1", "display_name": "Sajin", "link": "https://stackoverflow.com/users/7573791/sajin"}, "edited": false, "score": 1, "creation_date": 1488994400, "post_id": 42677174, "comment_id": 72480535, "body": "@Sajin it worken now, but I had to downcase it too (to Consumer-Secret)."}, {"owner": {"reputation": 1528, "user_id": 7573791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e5e5cf864fb33229ca56750a51d6674?s=128&d=identicon&r=PG&f=1", "display_name": "Sajin", "link": "https://stackoverflow.com/users/7573791/sajin"}, "edited": false, "score": 0, "creation_date": 1488994660, "post_id": 42677174, "comment_id": 72480704, "body": "I had a similar issue before with session_key. It worked in development environment. But in production, I had to make it session-key. That&#39;s why I suggested this. I have not worked with uppercase headers. Should I add this as an answer?"}], "owner": {"reputation": 7168, "user_id": 640053, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/96fc923031cbec3fe58b7535229a179b?s=128&d=identicon&r=PG", "display_name": "Christian Benseler", "link": "https://stackoverflow.com/users/640053/christian-benseler"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 148, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1488991803, "creation_date": 1488991803, "question_id": 42677174, "link": "https://stackoverflow.com/questions/42677174/rails-under-apache-and-passenger-no-headers", "title": "Rails under Apache and Passenger: no headers", "body": "<p>In an Rails app, I have a filter that checks some headers. Something like:</p>\n\n<pre><code>before_action :validate_consumer\n...\ndef validate_consumer\n    consumer = self.request.headers['HTTP_CONSUMER_SECRET'] == 'random_key'\n    consumer || render_unauthorized(\"Consumer -\")\nend\n\ndef render_unauthorized(token=\"\")\n    self.headers['WWW-Authenticate'] = 'Token realm=\"Application\"'\n    render json: {error: \"#{token} Bad credentials\", error_description: \"Denied\"}, status: 401\nend\n</code></pre>\n\n<p>this works perfect running locally (development), the header the view sends (CONSUMER_SECRET) is present in the request. But when I run in production mode, this header does not exists. I guess that this might have something related with my environment: that app runs under Apache (with Phusion+Passenger). Could it be this the problem? Anyone knows how to solve?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rubygems", "jekyll", "bundler"], "comments": [{"owner": {"reputation": 19724, "user_id": 1165509, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/2ebdffd5ddb4a98b0cc77117503d2711?s=128&d=identicon&r=PG", "display_name": "marcanuy", "link": "https://stackoverflow.com/users/1165509/marcanuy"}, "edited": false, "score": 0, "creation_date": 1488993296, "post_id": 42676782, "comment_id": 72479819, "body": "what is the output of <code>gem install bundler --debug</code>?"}, {"owner": {"reputation": 11, "user_id": 7679409, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f8c1228a842e0f99336667788b609e6?s=128&d=identicon&r=PG&f=1", "display_name": "socrates", "link": "https://stackoverflow.com/users/7679409/socrates"}, "reply_to_user": {"reputation": 19724, "user_id": 1165509, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/2ebdffd5ddb4a98b0cc77117503d2711?s=128&d=identicon&r=PG", "display_name": "marcanuy", "link": "https://stackoverflow.com/users/1165509/marcanuy"}, "edited": false, "score": 0, "creation_date": 1489045074, "post_id": 42676782, "comment_id": 72501537, "body": "<a href=\"https://www.scribd.com/document/341365762/Terminal\" rel=\"nofollow noreferrer\">scribd.com/document/341365762/Terminal</a>"}], "answers": [{"tags": [], "owner": {"reputation": 19724, "user_id": 1165509, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/2ebdffd5ddb4a98b0cc77117503d2711?s=128&d=identicon&r=PG", "display_name": "marcanuy", "link": "https://stackoverflow.com/users/1165509/marcanuy"}, "is_accepted": false, "score": 1, "last_activity_date": 1489046095, "creation_date": 1489046095, "answer_id": 42689672, "question_id": 42676782, "link": "https://stackoverflow.com/questions/42676782/ubuntu-16-04-error-return-on-gem-install-bundler/42689672#42689672", "title": "Ubuntu 16.04: Error return on gem install bundler", "body": "<p>The package zlib is missing and causes the installer to fail.</p>\n\n<p>You need to install it like:</p>\n\n<pre><code>sudo\u00a0apt-get install zlib1g-dev\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3566, "user_id": 4325010, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/048bff2cd5cae6d0a93ecd485f6690ad?s=128&d=identicon&r=PG&f=1", "display_name": "users at 4325010", "link": "https://stackoverflow.com/users/4325010/users-at-4325010"}, "is_accepted": false, "score": 0, "last_activity_date": 1490882923, "creation_date": 1490882923, "answer_id": 43120325, "question_id": 42676782, "link": "https://stackoverflow.com/questions/42676782/ubuntu-16-04-error-return-on-gem-install-bundler/43120325#43120325", "title": "Ubuntu 16.04: Error return on gem install bundler", "body": "<p>What worked for me was following the respective <a href=\"https://github.com/jekyll/jekyll-help/issues/55\" rel=\"nofollow noreferrer\">issue</a> on the official Jekyll repository in GitHub. </p>\n\n<h3>Performing the following steps, I got it to work:</h3>\n\n<p>Remove any previously installed versions:</p>\n\n<pre><code>sudo apt-get purge jekyll\nsudo apt-get purge ruby\n</code></pre>\n\n<p>Install ruby anew:</p>\n\n<pre><code>sudo apt-get install git-core curl zlib1g-dev build-essential libssl-dev libreadline-dev libyaml-dev libsqlite3-dev sqlite3 libxml2-dev libxslt1-dev libcurl4-openssl-dev python-software-properties\nsudo apt-get install libgdbm-dev libncurses5-dev automake libtool bison libffi-dev\ncurl -L https://get.rvm.io | bash -s stable\nsource ~/.rvm/scripts/rvm\necho \"source ~/.rvm/scripts/rvm\" &gt;&gt; ~/.bashrc\nrvm install \nrvm install 2.4.1\nrvm use 2.4.1 --default\n</code></pre>\n\n<p>Make sure you have, NodeJS and Python installed, if not - do so by:</p>\n\n<pre><code>sudo apt-get install node\nsudo add-apt-repository ppa:jonathonf/python-3.6\nsudo apt-get update\nsudo apt-get install python3.6\n</code></pre>\n\n<p>And at last,</p>\n\n<pre><code>gem install jekyll\n</code></pre>\n\n<h3>Result:</h3>\n\n<pre><code>jekyll -v\njekyll 3.4.3\n</code></pre>\n\n<p>Of course, now you could execute <code>gem install bundler</code> smoothly, too.</p>\n\n<p><br>Hope this helps!</p>\n"}], "owner": {"reputation": 11, "user_id": 7679409, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f8c1228a842e0f99336667788b609e6?s=128&d=identicon&r=PG&f=1", "display_name": "socrates", "link": "https://stackoverflow.com/users/7679409/socrates"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 447, "favorite_count": 1, "answer_count": 2, "score": 1, "last_activity_date": 1490882923, "creation_date": 1488990698, "question_id": 42676782, "link": "https://stackoverflow.com/questions/42676782/ubuntu-16-04-error-return-on-gem-install-bundler", "title": "Ubuntu 16.04: Error return on gem install bundler", "body": "<p>I've been getting a return, </p>\n\n<pre><code>~$ gem install bundler\nERROR:  Loading command: install (LoadError)\ncannot load such file -- zlib\nERROR:  While executing gem ... (NoMethodError)\nundefined method `invoke_with_build_args' for nil:NilClass\n</code></pre>\n\n<p>When trying to install Jekyll via gem bundler</p>\n\n<p>I've found lots of resources of others getting this error such as,</p>\n\n<p>I've recompiled ruby after <code>sudo apt-get libssl-dev</code> as well as a few other dep/libs I could think of, </p>\n\n<p>but no results. Any other ideas someone has?</p>\n\n<p>Setup:\nDell 2120\nUbuntu 16.04 LTS</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "amazon-web-services", "amazon-elastic-beanstalk", "assets"], "answers": [{"tags": [], "owner": {"reputation": 5382, "user_id": 7671538, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3506350bc4dd02281ad7f99e8e84715c?s=128&d=identicon&r=PG&f=1", "display_name": "gwcodes", "link": "https://stackoverflow.com/users/7671538/gwcodes"}, "is_accepted": false, "score": 0, "last_activity_date": 1488991743, "creation_date": 1488991743, "answer_id": 42677148, "question_id": 42676265, "link": "https://stackoverflow.com/questions/42676265/rails-4-assets-routing-error/42677148#42677148", "title": "Rails 4 - Assets routing error", "body": "<p>Could it be that your configuration file is telling EB to skip asset compilation? See docs here: <a href=\"http://docs.aws.amazon.com/elasticbeanstalk/latest/dg/create_deploy_Ruby.container.html#create_deploy_Ruby.env.console.ruby.envprops\" rel=\"nofollow noreferrer\">http://docs.aws.amazon.com/elasticbeanstalk/latest/dg/create_deploy_Ruby.container.html#create_deploy_Ruby.env.console.ruby.envprops</a></p>\n"}], "owner": {"reputation": 127, "user_id": 6003113, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/c7775e9f78b27b76ccee0f0efaf9fd95?s=128&d=identicon&r=PG&f=1", "display_name": "Alexander Smith", "link": "https://stackoverflow.com/users/6003113/alexander-smith"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 126, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1488991743, "creation_date": 1488989275, "question_id": 42676265, "link": "https://stackoverflow.com/questions/42676265/rails-4-assets-routing-error", "title": "Rails 4 - Assets routing error", "body": "<p>I am transitioning from Heroku to AWS Elastic Beanstalk and in my logs I keep seeing this error with .css and .js assets.</p>\n\n<p>Rails 4.2\nRuby 2.2.5</p>\n\n<pre><code>ActionController::RoutingError (No route matches [GET] \"/assets/application-be8de4c1a8d12cb784028972b73fe7e23d4acc55757e3d297ef5e3db4161c369.css\"):\nvendor/bundle/gems/actionpack-4.2.2/lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'\nvendor/bundle/gems/actionpack-4.2.2/lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'\nvendor/bundle/gems/railties-4.2.2/lib/rails/rack/logger.rb:38:in `call_app'\nvendor/bundle/gems/railties-4.2.2/lib/rails/rack/logger.rb:20:in `block in call'\nvendor/bundle/gems/activesupport-4.2.2/lib/active_support/tagged_logging.rb:68:in `block in tagged'\nvendor/bundle/gems/activesupport-4.2.2/lib/active_support/tagged_logging.rb:26:in `tagged'\nvendor/bundle/gems/activesupport-4.2.2/lib/active_support/tagged_logging.rb:68:in `tagged'\nvendor/bundle/gems/railties-4.2.2/lib/rails/rack/logger.rb:20:in `call'\nvendor/bundle/gems/actionpack-4.2.2/lib/action_dispatch/middleware/request_id.rb:21:in `call'\nvendor/bundle/gems/rack-1.6.4/lib/rack/methodoverride.rb:22:in `call'\nvendor/bundle/gems/rack-1.6.4/lib/rack/runtime.rb:18:in `call'\nvendor/bundle/gems/activesupport-4.2.2/lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'\nvendor/bundle/gems/actionpack-4.2.2/lib/action_dispatch/middleware/static.rb:113:in `call'\nvendor/bundle/gems/rack-1.6.4/lib/rack/sendfile.rb:113:in `call'\nvendor/bundle/gems/actionpack-4.2.2/lib/action_dispatch/middleware/ssl.rb:24:in `call'\nvendor/bundle/gems/railties-4.2.2/lib/rails/engine.rb:518:in `call'\nvendor/bundle/gems/railties-4.2.2/lib/rails/application.rb:164:in `call'\nvendor/bundle/gems/puma-3.6.2/lib/puma/configuration.rb:225:in `call'\nvendor/bundle/gems/puma-3.6.2/lib/puma/server.rb:578:in `handle_request'\nvendor/bundle/gems/puma-3.6.2/lib/puma/server.rb:415:in `process_client'\nvendor/bundle/gems/puma-3.6.2/lib/puma/server.rb:275:in `block in run'\nvendor/bundle/gems/puma-3.6.2/lib/puma/thread_pool.rb:116:in `call'\nvendor/bundle/gems/puma-3.6.2/lib/puma/thread_pool.rb:116:in `block in spawn_thread'\n</code></pre>\n\n<p>Help.</p>\n"}, {"tags": ["ruby", "rubygems", "bundler"], "answers": [{"tags": [], "owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "is_accepted": true, "score": 5, "last_activity_date": 1488986407, "last_edit_date": 1488986407, "creation_date": 1488986090, "answer_id": 42675051, "question_id": 42674991, "link": "https://stackoverflow.com/questions/42674991/what-are-the-difference-between-the-gems-bundle-and-bundler/42675051#42675051", "title": "What are the difference between the gems bundle and bundler", "body": "<p>If you look at <a href=\"https://rubygems.org/gems/bundle\" rel=\"nofollow noreferrer\">the page for bundle</a>, it's sort of poor man's alias. Someone realized that it will be a <a href=\"https://github.com/will/bundle#has-this-ever-happened-to-you\" rel=\"nofollow noreferrer\">frequent mistake</a>. Installing <code>bundle</code> simply installs <code>bundler</code>.</p>\n\n<p>Good thing, imagine if someone actually created a completely separate gem, called <em>bundle</em>.</p>\n"}, {"comments": [{"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 0, "creation_date": 1488987002, "post_id": 42675361, "comment_id": 72475265, "body": "The difference is not completely non-existent. For example if you install bundle, you will have bundler installed as well, while the opposite is not the case."}], "tags": [], "owner": {"reputation": 373, "user_id": 2270253, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/FSWO1.jpg?s=128&g=1", "display_name": "Mashhood", "link": "https://stackoverflow.com/users/2270253/mashhood"}, "is_accepted": false, "score": 1, "last_activity_date": 1488987189, "last_edit_date": 1488987189, "creation_date": 1488986908, "answer_id": 42675361, "question_id": 42674991, "link": "https://stackoverflow.com/questions/42674991/what-are-the-difference-between-the-gems-bundle-and-bundler/42675361#42675361", "title": "What are the difference between the gems bundle and bundler", "body": "<p>No difference as such. They are almost same. In fact, <strong>bundle</strong> is an alias for <strong>bundler</strong>.</p>\n"}], "owner": {"reputation": 6268, "user_id": 503831, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/992c174c48fa4dadacb03854dbf7ade8?s=128&d=identicon&r=PG", "display_name": "Arnold Roa", "link": "https://stackoverflow.com/users/503831/arnold-roa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 497, "favorite_count": 2, "accepted_answer_id": 42675051, "answer_count": 2, "score": 3, "last_activity_date": 1488987424, "creation_date": 1488985929, "last_edit_date": 1488987424, "question_id": 42674991, "link": "https://stackoverflow.com/questions/42674991/what-are-the-difference-between-the-gems-bundle-and-bundler", "title": "What are the difference between the gems bundle and bundler", "body": "<p>I've noticed that both of these work:</p>\n\n<pre><code>gem install bundle\n</code></pre>\n\n<p>and </p>\n\n<pre><code>gem install bundler\n</code></pre>\n\n<p>What is the difference? </p>\n\n<p><code>bundle</code> is just an empty gem with <code>bundler</code> as dependency?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 1225, "user_id": 957185, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/4435b492655cf1dbd1897167f28ff6a0?s=128&d=identicon&r=PG", "display_name": "Maxence", "link": "https://stackoverflow.com/users/957185/maxence"}, "edited": false, "score": 0, "creation_date": 1488986034, "post_id": 42674976, "comment_id": 72474543, "body": "Why do you want to save your image in the asset folder? is there a specific reason for this ?"}, {"owner": {"reputation": 5471, "user_id": 6019903, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/e7h7I.png?s=128&g=1", "display_name": "Brad", "link": "https://stackoverflow.com/users/6019903/brad"}, "edited": false, "score": 0, "creation_date": 1488986118, "post_id": 42674976, "comment_id": 72474596, "body": "I always use the paperclip gem (though there&#39;s another called carrierwave which i heard is pretty good.): <a href=\"https://github.com/thoughtbot/paperclip\" rel=\"nofollow noreferrer\">github.com/thoughtbot/paperclip</a>"}, {"owner": {"reputation": 107, "user_id": 5283289, "user_type": "registered", "accept_rate": 12, "profile_image": "https://lh6.googleusercontent.com/-xTyc96cp3Ag/AAAAAAAAAAI/AAAAAAAACLY/XztZahBLud8/photo.jpg?sz=128", "display_name": "Joshua Alcott-Griffin", "link": "https://stackoverflow.com/users/5283289/joshua-alcott-griffin"}, "edited": false, "score": 0, "creation_date": 1488986177, "post_id": 42674976, "comment_id": 72474640, "body": "Yes, since I am saving the image name in the database, I will refer to it at the location app/assets/images/userid, for when I want to display it to the page."}, {"owner": {"reputation": 1225, "user_id": 957185, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/4435b492655cf1dbd1897167f28ff6a0?s=128&d=identicon&r=PG", "display_name": "Maxence", "link": "https://stackoverflow.com/users/957185/maxence"}, "edited": false, "score": 0, "creation_date": 1488986280, "post_id": 42674976, "comment_id": 72474705, "body": "I do use Paperclip too. It saves images inside system folder. You put in assets/images only the permanent stuff: your logo, ... Not sure you can save images in that very folder. Is there any reason why you want to locate images in that folder ?"}, {"owner": {"reputation": 1225, "user_id": 957185, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/4435b492655cf1dbd1897167f28ff6a0?s=128&d=identicon&r=PG", "display_name": "Maxence", "link": "https://stackoverflow.com/users/957185/maxence"}, "edited": false, "score": 0, "creation_date": 1488986388, "post_id": 42674976, "comment_id": 72474795, "body": "you don&#39;t need to know the location of the image. just use the path or url method such as : &lt;%= image_tag f.image.url(:big) %&gt; for the &#39;big&#39; style in this example (provided your image is already saved)"}, {"owner": {"reputation": 7994, "user_id": 1625339, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b8ba46f911517c8b2ccc39e0be9050c0?s=128&d=identicon&r=PG", "display_name": "Aetherus", "link": "https://stackoverflow.com/users/1625339/aetherus"}, "edited": false, "score": 0, "creation_date": 1488987440, "post_id": 42674976, "comment_id": 72475590, "body": "The files in the <code>assets</code> folder or its subfolders are not served by rails even the configuration <code>serve_static_assets</code> (or <code>serve_static_files</code> in Rails 5) is turned on. Nor should they be served by the reverse proxy (e.g. Nginx). Those files do not survive capistrano redeployments. For these reasons, you should NEVER put user uploaded files in the <code>assets</code> folder."}, {"owner": {"reputation": 107, "user_id": 5283289, "user_type": "registered", "accept_rate": 12, "profile_image": "https://lh6.googleusercontent.com/-xTyc96cp3Ag/AAAAAAAAAAI/AAAAAAAACLY/XztZahBLud8/photo.jpg?sz=128", "display_name": "Joshua Alcott-Griffin", "link": "https://stackoverflow.com/users/5283289/joshua-alcott-griffin"}, "reply_to_user": {"reputation": 7994, "user_id": 1625339, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b8ba46f911517c8b2ccc39e0be9050c0?s=128&d=identicon&r=PG", "display_name": "Aetherus", "link": "https://stackoverflow.com/users/1625339/aetherus"}, "edited": false, "score": 0, "creation_date": 1488987625, "post_id": 42674976, "comment_id": 72475730, "body": "@Aetherus okay thank-you I didn&#39;t know that"}, {"owner": {"reputation": 1225, "user_id": 957185, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/4435b492655cf1dbd1897167f28ff6a0?s=128&d=identicon&r=PG", "display_name": "Maxence", "link": "https://stackoverflow.com/users/957185/maxence"}, "edited": false, "score": 0, "creation_date": 1488988854, "post_id": 42674976, "comment_id": 72476725, "body": "Joshua, I saw your edit. But i am not sure I understand it. Can you tell us a few things. What is your model name with a paperclip attachment in it ? Have you managed to save images in that model ? Have you properly set your model with <code>has_attached_file</code> and <code>validates_attachment</code> methods ? ..."}, {"owner": {"reputation": 107, "user_id": 5283289, "user_type": "registered", "accept_rate": 12, "profile_image": "https://lh6.googleusercontent.com/-xTyc96cp3Ag/AAAAAAAAAAI/AAAAAAAACLY/XztZahBLud8/photo.jpg?sz=128", "display_name": "Joshua Alcott-Griffin", "link": "https://stackoverflow.com/users/5283289/joshua-alcott-griffin"}, "edited": false, "score": 0, "creation_date": 1488989177, "post_id": 42674976, "comment_id": 72476967, "body": "Sorry, I am pretty new with ruby so I may be missing some things. I am not using paperclip, I am using carrierwave.I have not managed to save images, I am doing this processing in my controller for the profile page when creating a new profile. I do not have the has_attached_file and validates_attachment"}, {"owner": {"reputation": 1225, "user_id": 957185, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/4435b492655cf1dbd1897167f28ff6a0?s=128&d=identicon&r=PG", "display_name": "Maxence", "link": "https://stackoverflow.com/users/957185/maxence"}, "edited": false, "score": 0, "creation_date": 1488989311, "post_id": 42674976, "comment_id": 72477059, "body": "As I am using Paperclip I cannot really help you. Just check Carrierwave tutorials and follow them closely. You will set this up easy."}, {"owner": {"reputation": 1225, "user_id": 957185, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/4435b492655cf1dbd1897167f28ff6a0?s=128&d=identicon&r=PG", "display_name": "Maxence", "link": "https://stackoverflow.com/users/957185/maxence"}, "edited": false, "score": 0, "creation_date": 1488990080, "post_id": 42674976, "comment_id": 72477658, "body": "has_attached_file and validates_attachment is only for Paperclip"}], "owner": {"reputation": 107, "user_id": 5283289, "user_type": "registered", "accept_rate": 12, "profile_image": "https://lh6.googleusercontent.com/-xTyc96cp3Ag/AAAAAAAAAAI/AAAAAAAACLY/XztZahBLud8/photo.jpg?sz=128", "display_name": "Joshua Alcott-Griffin", "link": "https://stackoverflow.com/users/5283289/joshua-alcott-griffin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 221, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1488988044, "creation_date": 1488985875, "last_edit_date": 1488988044, "question_id": 42674976, "link": "https://stackoverflow.com/questions/42674976/saving-an-uploaded-image-to-directory-using-ruby", "title": "Saving an uploaded image to directory using Ruby", "body": "<p>I am looking for an effective method for saving an uploaded image to the assets folder. The code in place is as follows.</p>\n\n<pre><code>@profile.profileimage = \"app/assets/images/\" + @profile.userid\n\n      if not File.exists?(@profile.profileimage) \n        FileUtils::mkdir_p(@profile.profileimage)\n       else\n\n       end\n</code></pre>\n\n<p>It will check if the directory is present and if it isn't it will make the directory. I am just unsure what is best way of saving the image to the folder. I see the method where you grab the image from its url, but I do not think that would work for this scenario.</p>\n\n<p>I have tried using this method, however I know I am doing it wrong and I am unsure how to properly use the open method. currenty it is throwing a </p>\n\n<blockquote>\n  <p>Errno::EISDIR in ProfilesController#create Is a directory @ rb_sysopen</p>\n</blockquote>\n\n<p>here is the open I am trying to use...</p>\n\n<pre><code>File.open(@profile.profileimage) do |f|\n          @image = f\n        end\n</code></pre>\n\n<p>@profile.profileimage is the directory path I want to save it to.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 545, "user_id": 4609437, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4e113f53435cb12da410617571142714?s=128&d=identicon&r=PG&f=1", "display_name": "AlCode", "link": "https://stackoverflow.com/users/4609437/alcode"}, "edited": false, "score": 0, "creation_date": 1489016505, "post_id": 42678063, "comment_id": 72492112, "body": "Yeah, Figured it out. No way I can make it work in some hacky way?"}, {"owner": {"reputation": 45322, "user_id": 421705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/581b1760881c962648f99d6040d41829?s=128&d=identicon&r=PG", "display_name": "Holger Just", "link": "https://stackoverflow.com/users/421705/holger-just"}, "reply_to_user": {"reputation": 545, "user_id": 4609437, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4e113f53435cb12da410617571142714?s=128&d=identicon&r=PG&f=1", "display_name": "AlCode", "link": "https://stackoverflow.com/users/4609437/alcode"}, "edited": false, "score": 0, "creation_date": 1489057753, "post_id": 42678063, "comment_id": 72509696, "body": "No, this is a fundamental feature of how environment variables work across processes (which is what the current directory is). The only way to change the current directory in your shell is by <i>sourcing</i> a shell script into the very same process to perform the directory change. It is not enough to run the script in a new process, it must be sourced and executed in the very same shell proces."}], "tags": [], "owner": {"reputation": 45322, "user_id": 421705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/581b1760881c962648f99d6040d41829?s=128&d=identicon&r=PG", "display_name": "Holger Just", "link": "https://stackoverflow.com/users/421705/holger-just"}, "is_accepted": true, "score": 1, "last_activity_date": 1488994306, "creation_date": 1488994306, "answer_id": 42678063, "question_id": 42674975, "link": "https://stackoverflow.com/questions/42674975/ruby-change-directory-in-code/42678063#42678063", "title": "Ruby change directory in code", "body": "<p>The current working directory is always kept for the current program only. Changing the working directory in a program won't affect any other running programs, including its parent.</p>\n\n<p>Thus, when you delete the directory in your Ruby script and change the working directory of the Ruby process one level down, this won't affect the shell process which has started your Ruby script.</p>\n"}], "owner": {"reputation": 545, "user_id": 4609437, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4e113f53435cb12da410617571142714?s=128&d=identicon&r=PG&f=1", "display_name": "AlCode", "link": "https://stackoverflow.com/users/4609437/alcode"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 463, "favorite_count": 0, "accepted_answer_id": 42678063, "answer_count": 1, "score": 0, "last_activity_date": 1488994306, "creation_date": 1488985874, "question_id": 42674975, "link": "https://stackoverflow.com/questions/42674975/ruby-change-directory-in-code", "title": "Ruby change directory in code", "body": "<p>So, I've came across an issue where I delete the current folder where my ruby script is executing ex:</p>\n\n<pre><code>/home/user/scriptfolder \n</code></pre>\n\n<p>Now i have my ruby gem running and I do this: </p>\n\n<pre><code>mycommand --deletefull \n</code></pre>\n\n<p>now mycommand is an GLI command, which should delete the content of the folder and the folder itself. I do that by using my custom class:</p>\n\n<pre><code>ClientModuleDir.rm_f(path)\n</code></pre>\n\n<p>now after deleting it I want to just do <code>cd ..</code></p>\n\n<p>however I've tried several methods: </p>\n\n<pre><code>system('cd ..')\n Dir.chdir(dir)  #dir is abs path without the scripfolder name, i've tried every combination with this command, nothing works so far.\n</code></pre>\n\n<p>However these methods are not working. </p>\n\n<p>I still am in the </p>\n\n<pre><code>/home/user/scriptfolder \n</code></pre>\n\n<p>after executing these commands, but the folder DOES NOT EXIST. When I manually do cd .. and i do ls the folder is not there. </p>\n\n<p>How do I change \"physically\" the folder in ruby code ? </p>\n"}, {"tags": ["ruby", "haml"], "answers": [{"comments": [{"owner": {"reputation": 2832, "user_id": 38358, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/800db2c62d011cecbc8eb7201ba74aa6?s=128&d=identicon&r=PG", "display_name": "Frank Koehl", "link": "https://stackoverflow.com/users/38358/frank-koehl"}, "edited": false, "score": 0, "creation_date": 1488987072, "post_id": 42675130, "comment_id": 72475318, "body": "Bah, total brain fart on my part, thanks, eiko. I was able to come up with a short one-liner, using utilities from the <code>finishing_moves</code> gem: <code>(first = false).false? and next if first.true?</code>"}], "tags": [], "owner": {"reputation": 4150, "user_id": 7470620, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/49f3026fe13841e41d1805178eed9a3c?s=128&d=identicon&r=PG", "display_name": "eiko", "link": "https://stackoverflow.com/users/7470620/eiko"}, "is_accepted": true, "score": 3, "last_activity_date": 1488986318, "creation_date": 1488986318, "answer_id": 42675130, "question_id": 42674906, "link": "https://stackoverflow.com/questions/42674906/ruby-haml-doesnt-respect-booleans/42675130#42675130", "title": "Ruby HAML doesn&#39;t respect booleans?", "body": "<p>Ruby, like many languages, has something called short-circuiting in boolean logic. Expressions like 'and' are only true if both expressions are true, so if the first expression is false, the second is never called.</p>\n\n<p>In your case, <code>(first = false)</code> resolves to false, so the <code>and</code> expression returns false without ever running <code>next</code>.</p>\n\n<p>This is an important feature for expressions like:</p>\n\n<pre><code>do.something if !myobject.nil? and myobject.some_method\n</code></pre>\n\n<p>Without short-circuiting, myobject.some_method would throw an error every time myobject was nil.</p>\n\n<p>You can avoid the problem by writing your haml this way:</p>\n\n<pre><code>- first = true\n- @years.each do |year|\n  %th #{year}\n  - if first == true\n    - first = false\n    - next\n  %th #{year} &amp;Delta;\n  %th #{year} &amp;Delta; %\n</code></pre>\n"}], "owner": {"reputation": 2832, "user_id": 38358, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/800db2c62d011cecbc8eb7201ba74aa6?s=128&d=identicon&r=PG", "display_name": "Frank Koehl", "link": "https://stackoverflow.com/users/38358/frank-koehl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 214, "favorite_count": 0, "accepted_answer_id": 42675130, "answer_count": 1, "score": 0, "last_activity_date": 1488986318, "creation_date": 1488985666, "question_id": 42674906, "link": "https://stackoverflow.com/questions/42674906/ruby-haml-doesnt-respect-booleans", "title": "Ruby HAML doesn&#39;t respect booleans?", "body": "<p>I have a loop in HAML as follows:</p>\n\n<pre><code>- first = true\n- @years.each do |year|\n  %th #{year}\n  - first = false and next if first == true\n  %th #{year} &amp;Delta;\n  %th #{year} &amp;Delta; %\n</code></pre>\n\n<p>The goal is to add <code>delta</code> columns for years following the first year. </p>\n\n<p>Debugging the row I can see that <code>first</code> is correctly being set to <code>false</code>, however the columns following the <code>next</code> are still being outputted.</p>\n\n<p>If I perform the comparison without booleans, things work as expected:</p>\n\n<pre><code>- first = :true\n- @years.each do |year|\n  %th #{year}\n  - first = :false and next if first == :true\n  %th #{year} &amp;Delta;\n  %th #{year} &amp;Delta; %\n</code></pre>\n\n<p>Does anyone understand what's going on under the hood? </p>\n\n<p>Using <code>Ruby 2.2.3</code> and <code>HAML 4.0.7</code></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3"], "comments": [{"owner": {"reputation": 3467, "user_id": 906511, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/61286bced0ae2da15261439d1bb62297?s=128&d=identicon&r=PG", "display_name": "lcguida", "link": "https://stackoverflow.com/users/906511/lcguida"}, "edited": false, "score": 0, "creation_date": 1488988933, "post_id": 42674860, "comment_id": 72476793, "body": "How is your tailor model ?"}, {"owner": {"reputation": 15, "user_id": 7634155, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/27346fbc52a2f629c87d3c4830c3a210?s=128&d=identicon&r=PG&f=1", "display_name": "Karl Adrian", "link": "https://stackoverflow.com/users/7634155/karl-adrian"}, "reply_to_user": {"reputation": 3467, "user_id": 906511, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/61286bced0ae2da15261439d1bb62297?s=128&d=identicon&r=PG", "display_name": "lcguida", "link": "https://stackoverflow.com/users/906511/lcguida"}, "edited": false, "score": 0, "creation_date": 1489038494, "post_id": 42674860, "comment_id": 72498472, "body": "@Icguida if you&#39;re asking about the contents of the <b>tailor.rb</b> it os like this:  <code>class Tailor &lt; ActiveRecord::Base</code> \t<code>has_many :products</code> <code>end</code>  I didn&#39;t do any migrations for the tailor model since it&#39;s the parent class"}], "answers": [{"tags": [], "owner": {"reputation": 3467, "user_id": 906511, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/61286bced0ae2da15261439d1bb62297?s=128&d=identicon&r=PG", "display_name": "lcguida", "link": "https://stackoverflow.com/users/906511/lcguida"}, "is_accepted": false, "score": 0, "last_activity_date": 1488989419, "creation_date": 1488989419, "answer_id": 42676323, "question_id": 42674860, "link": "https://stackoverflow.com/questions/42674860/ruby-on-rails-creating-a-new-children-instance-using-the-parents-id-working-wi/42676323#42676323", "title": "Ruby on Rails: Creating a new children instance using the parent&#39;s id/Working with associated classes", "body": "<p>The problem is here: <code>@tailor.Product</code>. <code>Product</code> is the class name and not the association name.</p>\n\n<p>I <strong>strongly</strong> recommend you to read the <a href=\"http://guides.rubyonrails.org/association_basics.html#the-has-many-association\" rel=\"nofollow noreferrer\"><code>has_many</code>association guide</a>.</p>\n\n<p>But, assuming you have a <code>has_many</code> association between <code>Tailor</code> and <code>Product</code>, you should be doing something like this: </p>\n\n<pre><code>def new\n  @tailor = Tailor.find(params[:tailor_id])\n  @product = @tailor.products.build\nend\n\ndef create\n  @tailor = Tailor.find(params[:tailor_id])\n  @product = @tailor.products.create(params[:product]) # Take a look at strong parameters\n  @product.save\nend\n</code></pre>\n\n<p>You can read about the associations methods <a href=\"http://guides.rubyonrails.org/association_basics.html#has-many-association-reference\" rel=\"nofollow noreferrer\">here</a></p>\n"}], "owner": {"reputation": 15, "user_id": 7634155, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/27346fbc52a2f629c87d3c4830c3a210?s=128&d=identicon&r=PG&f=1", "display_name": "Karl Adrian", "link": "https://stackoverflow.com/users/7634155/karl-adrian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 43, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1488989419, "creation_date": 1488985524, "question_id": 42674860, "link": "https://stackoverflow.com/questions/42674860/ruby-on-rails-creating-a-new-children-instance-using-the-parents-id-working-wi", "title": "Ruby on Rails: Creating a new children instance using the parent&#39;s id/Working with associated classes", "body": "<p>One of my goal on this web app project is to make each tailor add or create products. So I made a <strong>MCV</strong> structure from scratch for the <strong>Tailor</strong> for the sign up page. And then I scaffold the <strong>Product</strong> since basic <strong>CRUD</strong> functions will be used by the <strong>Tailor</strong> to create a product. And then I put them into <strong>has_many/belongs_to relationship</strong>. I generated a migration which adds a column <strong>tailor_id</strong> into the <strong>Product</strong> class. Then I put these nested routes:</p>\n\n<pre><code>resources :tailors do\n   resources :products\nend \nresources :products #this is for debugging for whether a customer can see all the Products created by all the Tailors\n</code></pre>\n\n<p>then I ran <strong>rake routes</strong> and checked which path I can use to create a product with a given <strong>tailor_id</strong> then I decided to use the <strong>/tailors/:tailor_id/products/new</strong>. So I added a code which is a link in my tailor show page:</p>\n\n<pre><code>&lt;%= link_to 'Add Product', new_tailor_product_path(@tailor.id) %&gt;\n</code></pre>\n\n<p>and the I edited the <strong>new</strong> and <strong>create</strong> functions in the <strong>products_controller</strong> since the path is directed there) like this:</p>\n\n<pre><code>  def new\n    @tailor = Tailor.find(params[:tailor_id])\n    @product = @tailor.Product.new(params[@tailor])\n  end\n\n  def create\n    @tailor = Tailor.find(params[:tailor_id])\n    @product = @tailor.Product.new()\n    @product.product_name = params[:product][:product_name]\n    @product.product_description = params[:product][:product_description]\n    @product.price = params[:product][:price]\n    @product.tailor_id = params[:product][@tailor]\n    @product.save\n    redirect_to \"/tailors/#{@tailor}\"\n  end\n</code></pre>\n\n<p>but the error says <strong>Undefined method 'Product'</strong> that occurs in the where the <code>@product = @tailor.Product.new(params[@tailor])</code>is</p>\n\n<p>I don't really understand why is this an error because I'm pretty sure I called the class right (It's been taught to us that classes must begin with capital letter and is singular) and it's clear that I'm not calling a method.</p>\n\n<p>Please explain the concept of calling the parent class and its data. Am I not allowed to call the <strong>Tailor</strong> class and its data inside the <strong>product_controller</strong> in this case? Is my approach wrong or am I in the right direction?</p>\n\n<blockquote>\n  <p>Also, other Remarks and Error corrections about the other parts of my codes are welcomed</p>\n</blockquote>\n"}, {"tags": ["arrays", "ruby", "multidimensional-array"], "comments": [{"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 0, "creation_date": 1488985245, "post_id": 42674645, "comment_id": 72473972, "body": "Replace <code>array1</code> with <code>array1.flatten</code>, ditto for <code>array2</code>."}, {"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1488985299, "post_id": 42674645, "comment_id": 72474020, "body": "Maybe delete this question as well. Seems more of an extension of your previous question."}, {"owner": {"reputation": 175, "user_id": 3528784, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/J1nEe.png?s=128&g=1", "display_name": "Mordred", "link": "https://stackoverflow.com/users/3528784/mordred"}, "edited": false, "score": 0, "creation_date": 1488987890, "post_id": 42674645, "comment_id": 72475920, "body": "Im sorry, can i get any other method apart from flattening the array. Flattening the array will bring other variables to the options. can i get an array of [valueineed,valueineed,valueineed] from the multidimensional array."}, {"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 0, "creation_date": 1488988847, "post_id": 42674645, "comment_id": 72476712, "body": "With the example data you provided, you can do <code>map(&amp;:first)</code> to get only the first values in each subarray."}, {"owner": {"reputation": 175, "user_id": 3528784, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/J1nEe.png?s=128&g=1", "display_name": "Mordred", "link": "https://stackoverflow.com/users/3528784/mordred"}, "edited": false, "score": 0, "creation_date": 1488989494, "post_id": 42674645, "comment_id": 72477197, "body": "Thank you very much"}], "owner": {"reputation": 175, "user_id": 3528784, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/J1nEe.png?s=128&g=1", "display_name": "Mordred", "link": "https://stackoverflow.com/users/3528784/mordred"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 35, "favorite_count": 0, "closed_date": 1488990483, "answer_count": 0, "score": 0, "last_activity_date": 1488984997, "creation_date": 1488984997, "question_id": 42674645, "link": "https://stackoverflow.com/questions/42674645/how-to-use-array-combinationn-on-a-multidimensional-array", "closed_reason": "Duplicate", "title": "how to use array combinationn on a multidimensional array", "body": "<p>If the values I was looking for were in two 1 dimensional arrays say, <code>a1 = [valueineed,valueidontneed,valueidontneed]</code> and <code>a2 = [valueineed,valueidontneed,valueidontneed]</code>, i could do</p>\n\n<pre><code>array1.combination(2).select { |x, y| array2.include? x + y }.each do |x,y|\n do_something x, y\nend\n</code></pre>\n\n<p>but I have this array instead. <code>a1 = [[valuineed,valueidontneed],[valueineed,valueidontneed]], a2 = [[valueineed,valueidontneed],[valueineed, valueidontneed]]</code>\nHow do I acheive the same results the above program got on the previous array on the new array</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "heroku", "memory-leaks", "delayed-job"], "answers": [{"comments": [{"owner": {"reputation": 339, "user_id": 5678403, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/JB4YW.jpg?s=128&g=1", "display_name": "Ohad Dahan", "link": "https://stackoverflow.com/users/5678403/ohad-dahan"}, "edited": false, "score": 0, "creation_date": 1489042403, "post_id": 42680135, "comment_id": 72500129, "body": "Thanks for the reply Michal. I&#39;m using lots of hashes with symbols as keys. Although these hashes are no longer referenced , switching to string keys might be useful? Since symbols are more resilient to garbage collecting?"}], "tags": [], "owner": {"reputation": 5178, "user_id": 2577840, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/1520578334/picture?type=large", "display_name": "Micha\u0142 M\u0142o\u017aniak", "link": "https://stackoverflow.com/users/2577840/micha%c5%82-m%c5%82o%c5%baniak"}, "is_accepted": false, "score": 4, "last_activity_date": 1489000943, "creation_date": 1489000943, "answer_id": 42680135, "question_id": 42674592, "link": "https://stackoverflow.com/questions/42674592/delayedjob-doesnt-release-memory/42680135#42680135", "title": "DelayedJob doesn&#39;t release memory", "body": "<p>You can have one of the following problems. Or actually all of them:</p>\n\n<p><strong>Number 1</strong>. This is not an actual problem, but a misconception about how Ruby releases memory to operating system. Short answer: it doesn't. Long answer: Ruby manages an internal list of free objects. Whenever your program needs to allocate new objects, it will get those objects from this free list. If there are no more objects there, Ruby will allocate new memory from operating system. When objects are garbage collected they go back to the free list. So Ruby still have the allocated memory. To illustrate it better, imagine that your program is normally using 100 MB. When at some point program will allocate 1 GB, it will hold this memory until you restart it.</p>\n\n<p>There are some good resource to learn more about it <a href=\"https://www.sitepoint.com/ruby-uses-memory/\" rel=\"nofollow noreferrer\">here</a> and <a href=\"http://www.schneems.com/2015/05/11/how-ruby-uses-memory.html\" rel=\"nofollow noreferrer\">here</a>.</p>\n\n<p>What you should do is to increase your dyno size and monitor your memory usage over time. It should stabilize at some level. This will show you your normal memory usage.</p>\n\n<p><strong>Number 2</strong>. You can have an actual memory leak. It can be in your code or in some gem. Check out <a href=\"https://github.com/ASoftCo/leaky-gems\" rel=\"nofollow noreferrer\">this repository</a>, it contains information about well known memory leaks and other memory issues in popular gems. <code>delayed_job</code> is actually listed there.</p>\n\n<p><strong>Number 3</strong>. You may have unoptimized code that is using more memory than needed and you should try to investigate memory usage and try to decrease it. If you are processing large files, maybe you should do it in smaller batches etc.</p>\n"}], "owner": {"reputation": 339, "user_id": 5678403, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/JB4YW.jpg?s=128&g=1", "display_name": "Ohad Dahan", "link": "https://stackoverflow.com/users/5678403/ohad-dahan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1268, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1489000943, "creation_date": 1488984882, "question_id": 42674592, "link": "https://stackoverflow.com/questions/42674592/delayedjob-doesnt-release-memory", "title": "DelayedJob doesn&#39;t release memory", "body": "<p>I'm using Puma server and DelayedJob.\nIt seems that the memory taken by each job isn't released and I slowly get a bloat causing me to restart my dyno (Heroku).</p>\n\n<p>Any reason why the dyno won't return to the same memory usage figure before the job was performed?</p>\n\n<p>Any way to force releasing it? I tried calling GC but it doesn't seem to help.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "capybara"], "answers": [{"tags": [], "owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "is_accepted": true, "score": 1, "last_activity_date": 1488990879, "creation_date": 1488990879, "answer_id": 42676844, "question_id": 42673705, "link": "https://stackoverflow.com/questions/42673705/wait-for-native-es6-promise-to-resolve-in-rails-integration-test/42676844#42676844", "title": "Wait for native ES6 promise to resolve in Rails integration test?", "body": "<p>You need to set an assertion/expectation for whatever visible change the promise produces when it's resolved (just like you should be doing for AJAX requests).  So if it adds text to the page</p>\n\n<pre><code>assert_text('New text that is added') # non-RSpec\nexpect(page).to have_text('New text that is added') # if using RSpec\n</code></pre>\n\n<p>or if it adds a new element to the page</p>\n\n<pre><code>assert_selector(:css, '#id_of_new_element') # non-RSpec\nexpect(page).to have_css('#id_of_new_element') # RSpec\n</code></pre>\n\n<p>etc.  The Capybara provided assertions/expectations will wait/retry up to Capybara.default_max_wait_time for their conditions to be met, so it will wait for the promise to resolve if you tell it to expect whatever change the promise is going to create in the page.</p>\n"}], "owner": {"reputation": 6433, "user_id": 1064917, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/219d10e3fc486c3173291954195d537c?s=128&d=identicon&r=PG", "display_name": "Rick", "link": "https://stackoverflow.com/users/1064917/rick"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 284, "favorite_count": 0, "accepted_answer_id": 42676844, "answer_count": 1, "score": 0, "last_activity_date": 1488990879, "creation_date": 1488982583, "question_id": 42673705, "link": "https://stackoverflow.com/questions/42673705/wait-for-native-es6-promise-to-resolve-in-rails-integration-test", "title": "Wait for native ES6 promise to resolve in Rails integration test?", "body": "<p>I am writing a Rails integration suite from scratch. The project uses a custom Websocket client (and native ES6 promise objects) for some async behavior.</p>\n\n<p>Is there a way to tell a Rails app that there are still unresolved promises and that it needs to wait before proceeding to the next step of a test <strong>without modifying the Javascript source code</strong>? Most of the stuff out there focuses on waiting on AJAX requests to finish. This is useful for some parts of the app, but the Websocket commands are independent of AJAX.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rails-activerecord"], "comments": [{"owner": {"reputation": 2433, "user_id": 191064, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/ycuRB.jpg?s=128&g=1", "display_name": "ultrajohn", "link": "https://stackoverflow.com/users/191064/ultrajohn"}, "edited": false, "score": 0, "creation_date": 1488982436, "post_id": 42673583, "comment_id": 72471801, "body": "What is about <code>Unknown column &#39;buildings.building_manager_id&#39; in &#39;where clause&#39;</code> that you don&#39;t understand?"}, {"owner": {"reputation": 873, "user_id": 2320239, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/daef5b7116143c14162b242bf0b1a35a?s=128&d=identicon&r=PG", "display_name": "user2320239", "link": "https://stackoverflow.com/users/2320239/user2320239"}, "reply_to_user": {"reputation": 2433, "user_id": 191064, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/ycuRB.jpg?s=128&g=1", "display_name": "ultrajohn", "link": "https://stackoverflow.com/users/191064/ultrajohn"}, "edited": false, "score": 0, "creation_date": 1488982748, "post_id": 42673583, "comment_id": 72472041, "body": "I understand the error, I don&#39;t understand why it&#39;s been given. Buildings does have a building_manager_id column."}, {"owner": {"reputation": 12440, "user_id": 308731, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/eQxFn.jpg?s=128&g=1", "display_name": "Eyeslandic", "link": "https://stackoverflow.com/users/308731/eyeslandic"}, "edited": false, "score": 0, "creation_date": 1488988855, "post_id": 42673583, "comment_id": 72476727, "body": "Can you post the output of <code>to_sql</code>, that is append <code>to_sql</code> to the end of the statement."}], "owner": {"reputation": 873, "user_id": 2320239, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/daef5b7116143c14162b242bf0b1a35a?s=128&d=identicon&r=PG", "display_name": "user2320239", "link": "https://stackoverflow.com/users/2320239/user2320239"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 293, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1488982280, "creation_date": 1488982280, "question_id": 42673583, "link": "https://stackoverflow.com/questions/42673583/unknown-column-in-where-clause-during-join", "title": "Unknown column in where clause during join", "body": "<p>Hi I'm working on a project that has a person model, a person has a building, a building has a building manager. I want all the people with buildings that have a certain building manager. So I have a query as follows:</p>\n\n<pre><code>persons.joins(:building).where(buildings: { building_manager_id: 1 } )\n</code></pre>\n\n<p>But with that I get an error:</p>\n\n<pre><code>ActiveRecord::StatementInvalid Exception: Mysql2::Error: Unknown column 'buildings.building_manager_id' in 'where clause'\n</code></pre>\n\n<p>I'm not sure why this is, any help would be great.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "date"], "answers": [{"comments": [{"owner": {"reputation": 9, "user_id": 7678239, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64c2399af7ffaedcaa572d6f57e1600c?s=128&d=identicon&r=PG&f=1", "display_name": "Jeff", "link": "https://stackoverflow.com/users/7678239/jeff"}, "edited": false, "score": 0, "creation_date": 1489237104, "post_id": 42672556, "comment_id": 72589050, "body": "Thank you for your answer. However I am still getting stuck in the problem. How can I set a default date and team in using ice_cube. E.g. (Set 1/3/2017 and team &#39;A&#39; as the default date and team respectively)     And how can I display which team is on duty on other date?"}, {"owner": {"reputation": 5382, "user_id": 7671538, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3506350bc4dd02281ad7f99e8e84715c?s=128&d=identicon&r=PG&f=1", "display_name": "gwcodes", "link": "https://stackoverflow.com/users/7671538/gwcodes"}, "reply_to_user": {"reputation": 9, "user_id": 7678239, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64c2399af7ffaedcaa572d6f57e1600c?s=128&d=identicon&r=PG&f=1", "display_name": "Jeff", "link": "https://stackoverflow.com/users/7678239/jeff"}, "edited": false, "score": 0, "creation_date": 1489238219, "post_id": 42672556, "comment_id": 72589388, "body": "@Jeff: I&#39;ve updated the answer with a more fully-formed example. Does that help? You&#39;ll want to check the documentation on queries like <code>occurs_on?</code> and <code>occurs_between?</code>"}], "tags": [], "owner": {"reputation": 5382, "user_id": 7671538, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3506350bc4dd02281ad7f99e8e84715c?s=128&d=identicon&r=PG&f=1", "display_name": "gwcodes", "link": "https://stackoverflow.com/users/7671538/gwcodes"}, "is_accepted": false, "score": 1, "last_activity_date": 1489238071, "last_edit_date": 1489238071, "creation_date": 1488979474, "answer_id": 42672556, "question_id": 42672306, "link": "https://stackoverflow.com/questions/42672306/ruby-displaying-value-related-to-date/42672556#42672556", "title": "Ruby - displaying value related to date", "body": "<p>Using a gem like ice_cube (<a href=\"https://github.com/seejohnrun/ice_cube\" rel=\"nofollow noreferrer\">https://github.com/seejohnrun/ice_cube</a>) might help here. Then you can easily set up recurrence rules and query occurrences.</p>\n\n<p>For example, for three teams <code>a, b, c</code>:</p>\n\n<pre><code>schedules = {}\nstart_date = Date.parse('1/3/2017')\n\n%w[ a b c ].each_with_index do |team, index|\n  schedules[team] = IceCube::Schedule.new(now = start_date + index) do |s|\n    s.add_recurrence_rule(IceCube::Rule.daily(3))  # every 3 days\n  end\nend\n</code></pre>\n\n<p>You can then query like so:</p>\n\n<pre><code>schedules['a'].first(3)\n# =&gt; [2017-03-01 00:00:00 +0000, 2017-03-04 00:00:00 +0000, 2017-03-07 00:00:00 +0000]\nschedules['b'].first(3)\n# =&gt; [2017-03-02 00:00:00 +0000, 2017-03-05 00:00:00 +0000, 2017-03-08 00:00:00 +0000]\n</code></pre>\n"}], "owner": {"reputation": 9, "user_id": 7678239, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64c2399af7ffaedcaa572d6f57e1600c?s=128&d=identicon&r=PG&f=1", "display_name": "Jeff", "link": "https://stackoverflow.com/users/7678239/jeff"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1489238071, "creation_date": 1488978711, "last_edit_date": 1488985489, "question_id": 42672306, "link": "https://stackoverflow.com/questions/42672306/ruby-displaying-value-related-to-date", "title": "Ruby - displaying value related to date", "body": "<p>I am developing a roster planning system by using ruby on rails. </p>\n\n<p>Given that there are three teams in the company. Each team is required to work in shift.</p>\n\n<p>For example, <br></p>\n\n<p>\"1/3/2017\" is team A on duty <br>\n\"2/3/2017\" is team B on duty <br>\n\"3/3/2017\" is team C on duty <br>\n\"4/3/2017\" is team A on duty <br>\netc., <br></p>\n\n<p>Here is part of my ruby code. <br></p>\n\n<p><strong>seed.rb</strong></p>\n\n<pre><code>roster = Roster.create!(date: \"1/03/2017\", team: \"A\")\nroster = Roster.create!(date: \"2/03/2017\", team: \"B\")\nroster = Roster.create!(date: \"3/03/2017\", team: \"C\")\nroster = Roster.create!(date: \"4/03/2017\", team: \"A\")\n</code></pre>\n\n<p>However, I'm wondering how to display which team is on duty on a specific day that isn't stored in seed.rb by calculation. <br></p>\n\n<p>For example,</p>\n\n<p>How can I make the system display which team is on duty on \"11/3/2017\" and \"15/3/2017\" automatically?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "date-range"], "answers": [{"comments": [{"owner": {"reputation": 199, "user_id": 6291356, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2ae1aa305d2c39347e58ae2f5bce4c54?s=128&d=identicon&r=PG&f=1", "display_name": "EffeBi", "link": "https://stackoverflow.com/users/6291356/effebi"}, "edited": false, "score": 1, "creation_date": 1488984065, "post_id": 42672487, "comment_id": 72473084, "body": "Great! Thanks ;-)"}], "tags": [], "owner": {"reputation": 12440, "user_id": 308731, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/eQxFn.jpg?s=128&g=1", "display_name": "Eyeslandic", "link": "https://stackoverflow.com/users/308731/eyeslandic"}, "is_accepted": true, "score": 2, "last_activity_date": 1488979271, "creation_date": 1488979271, "answer_id": 42672487, "question_id": 42672240, "link": "https://stackoverflow.com/questions/42672240/ruby-on-rails-datetime-range-issue/42672487#42672487", "title": "Ruby On Rails - Datetime Range issue", "body": "<p>You trying to use active record notation which doesn't work with the <code>select</code> method. Something like this should work.</p>\n\n<pre><code>@ele_ordini = ele_ordini.select do |ordine| \n  tmp = ordine['date_created'].to_datetime\n  tmp &gt;= lunedi.to_datetime &amp;&amp; tmp &lt;= martedi.to_datetime\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 5382, "user_id": 7671538, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3506350bc4dd02281ad7f99e8e84715c?s=128&d=identicon&r=PG&f=1", "display_name": "gwcodes", "link": "https://stackoverflow.com/users/7671538/gwcodes"}, "is_accepted": false, "score": 0, "last_activity_date": 1488980300, "creation_date": 1488980300, "answer_id": 42672872, "question_id": 42672240, "link": "https://stackoverflow.com/questions/42672240/ruby-on-rails-datetime-range-issue/42672872#42672872", "title": "Ruby On Rails - Datetime Range issue", "body": "<p>If you just care about comparing the dates (and you're using Rails - which it looks like you are), then you could simplify this somewhat. For example:</p>\n\n<pre><code>@lunedi = Date.today.at_beginning_of_week\nele_ordini = woocommerce.get(\"orders\").parsed_response\n@ele_ordini = ele_ordini.select { |ordine| ordine['date_created'].to_date - @lunedi &lt; 2 }\n</code></pre>\n\n<p>i.e. you're only looking at the difference in days between each date and Monday, and selecting anything that is 0 (Monday) or 1 (Tuesday)</p>\n"}, {"tags": [], "owner": {"reputation": 1578, "user_id": 522897, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f7bad61c729086a40e92e6d2bcd70a4e?s=128&d=identicon&r=PG", "display_name": "Onur Kucukkece", "link": "https://stackoverflow.com/users/522897/onur-kucukkece"}, "is_accepted": false, "score": 0, "last_activity_date": 1488981671, "creation_date": 1488981671, "answer_id": 42673360, "question_id": 42672240, "link": "https://stackoverflow.com/questions/42672240/ruby-on-rails-datetime-range-issue/42673360#42673360", "title": "Ruby On Rails - Datetime Range issue", "body": "<p>You need to state the unit of time when adding it to a variable. Try this</p>\n\n<pre><code>@lunedi = Date.today.at_beginning_of_week\n@martedi = Date.today.at_beginning_of_week + 1.day\nele_ordini = woocommerce.get(\"orders\").parsed_response\n@ele_ordini = ele_ordini.select { |ordine| (lunedi..martedi).include? ordine['date_created'] }\n</code></pre>\n"}], "owner": {"reputation": 199, "user_id": 6291356, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2ae1aa305d2c39347e58ae2f5bce4c54?s=128&d=identicon&r=PG&f=1", "display_name": "EffeBi", "link": "https://stackoverflow.com/users/6291356/effebi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 454, "favorite_count": 0, "accepted_answer_id": 42672487, "answer_count": 3, "score": 1, "last_activity_date": 1488981671, "creation_date": 1488978520, "question_id": 42672240, "link": "https://stackoverflow.com/questions/42672240/ruby-on-rails-datetime-range-issue", "title": "Ruby On Rails - Datetime Range issue", "body": "<p>Using an API, i can retrieve an orders list from a website.</p>\n\n<p>in this list, i have for each order, the date of presentation.</p>\n\n<p>i need to filter this list for order placed in a specific range, but using the date range i have \"bad value for range\"</p>\n\n<p>this is how the API present the date:</p>\n\n<pre><code>\"date_created\"=&gt;\"2017-03-08T11:22:00\"\n</code></pre>\n\n<p>This is my code</p>\n\n<pre><code>@lunedi = Date.today.at_beginning_of_week\n@martedi = Date.today.at_beginning_of_week + 1\nele_ordini = woocommerce.get(\"orders\").parsed_response\n@ele_ordini = ele_ordini.select { |ordine| ordine['date_created'] == lunedi.to_datetime..martedi.to_datetime }\n</code></pre>\n\n<p>My goal si to filter for order placed in current week, only on Monday and Tuesday</p>\n\n<p>yes, the code must be changed ot fill all Tuesday day until 23:59!! but i can do it after!</p>\n"}, {"tags": ["ruby-on-rails", "arrays", "ruby", "rake-task"], "comments": [{"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 0, "creation_date": 1488978435, "post_id": 42672141, "comment_id": 72469033, "body": "What happens? Seems legit."}, {"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "edited": false, "score": 0, "creation_date": 1488978525, "post_id": 42672141, "comment_id": 72469096, "body": "<code>a1.product(a2).any? { |combination| a3.include?(combination.inject(:+)) }</code> ?"}, {"owner": {"reputation": 175, "user_id": 3528784, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/J1nEe.png?s=128&g=1", "display_name": "Mordred", "link": "https://stackoverflow.com/users/3528784/mordred"}, "edited": false, "score": 0, "creation_date": 1488978573, "post_id": 42672141, "comment_id": 72469140, "body": "I just updated my question. I have two arrays instead of three, I believe that there is a problem with nesting an iteration of the same array inside one loop maybe.. this is a smaller part of my code and i cant figure out exactly what the issue is"}, {"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 0, "creation_date": 1488978761, "post_id": 42672141, "comment_id": 72469241, "body": "Now you have the issue that you might pick the same number twice. Aka if you have <code>[1]</code> and <code>[2]</code>, you will still find <code>2 == 1 + 1</code>. Other than that, it seems legit."}, {"owner": {"reputation": 175, "user_id": 3528784, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/J1nEe.png?s=128&g=1", "display_name": "Mordred", "link": "https://stackoverflow.com/users/3528784/mordred"}, "edited": false, "score": 0, "creation_date": 1488978859, "post_id": 42672141, "comment_id": 72469303, "body": "Ah.. yes. how do you think i could stop that from happening?"}, {"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 0, "creation_date": 1488979855, "post_id": 42672141, "comment_id": 72469982, "body": "I just re-read your question. You said you wanted the numbers to be distinct. Does that mean that no matches should be found for <code>array1 = [1, 1]; array2 = [2]</code> and <code>array1 = [0, 1]; array2 = [1]</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 175, "user_id": 3528784, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/J1nEe.png?s=128&g=1", "display_name": "Mordred", "link": "https://stackoverflow.com/users/3528784/mordred"}, "edited": false, "score": 0, "creation_date": 1488979155, "post_id": 42672409, "comment_id": 72469511, "body": "Thanks, this really is very ruby&#39;ish and i am no rubyist, i need a reference to that particular number in the second array too. say z"}, {"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "reply_to_user": {"reputation": 175, "user_id": 3528784, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/J1nEe.png?s=128&g=1", "display_name": "Mordred", "link": "https://stackoverflow.com/users/3528784/mordred"}, "edited": false, "score": 0, "creation_date": 1488979249, "post_id": 42672409, "comment_id": 72469571, "body": "@Mordred, well, <code>z = x + y</code> so I don&#39;t see the problem there. As for the answer being ruby&#39;ish, I can expand if you want me to."}, {"owner": {"reputation": 175, "user_id": 3528784, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/J1nEe.png?s=128&g=1", "display_name": "Mordred", "link": "https://stackoverflow.com/users/3528784/mordred"}, "edited": false, "score": 0, "creation_date": 1488979355, "post_id": 42672409, "comment_id": 72469648, "body": "oh yeah, of course. My brain was fixed on getting a reference. Thanks a lot."}], "tags": [], "owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "is_accepted": true, "score": 0, "last_activity_date": 1488979971, "last_edit_date": 1488979971, "creation_date": 1488979017, "answer_id": 42672409, "question_id": 42672141, "link": "https://stackoverflow.com/questions/42672141/sum-of-any-two-numbers-in-array-equal-number-from-another/42672409#42672409", "title": "Sum of any two numbers in array equal number from another", "body": "<p>You might pick the same number twice. Aka with</p>\n\n<pre><code>array1 = [1]\narray2 = [2]\n</code></pre>\n\n<p>You will get <code>2 == 1 + 1</code>. To avoid this, you could use <a href=\"https://ruby-doc.org/core-2.4.0/Array.html#method-i-combination\" rel=\"nofollow noreferrer\"><code>Array#combination</code></a>:</p>\n\n<pre><code>array1.combination(2).select { |x, y| array2.include? x + y }.each do |x, y|\n  # do something with x, y and x + y\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 0, "last_activity_date": 1489006048, "creation_date": 1489006048, "answer_id": 42681633, "question_id": 42672141, "link": "https://stackoverflow.com/questions/42672141/sum-of-any-two-numbers-in-array-equal-number-from-another/42681633#42681633", "title": "Sum of any two numbers in array equal number from another", "body": "<p>As we merely want to know if <code>m+n</code> is an element of the second array, where <code>m</code> and <code>n</code> are <em>distinct</em> elements of the first array (which I assume to mean <code>m != n</code>), we will want to use <a href=\"http://ruby-doc.org/core-2.4.0/Enumerable.html#method-i-any-3F\" rel=\"nofollow noreferrer\">Emumerable#any?</a>. </p>\n\n<pre><code>require 'set'\n\ndef any_pair?(arr1, arr2)\n  set = arr2.to_set\n  arr1.uniq.combination(2).any? { |n,m| set.include?(n+m) }\nend\n\nany_pair? [3,1,6,1,4], [1,2,6,7]\n  #=&gt; true\nany_pair? [3,1,6,1,4], [1,2,6]\n  #=&gt; false\n</code></pre>\n\n<p>We need to check if the sum of two values in <code>arr1</code> is a member of <code>arr2</code> up to <code>n*(n-1)</code> times, where <code>n</code> is <code>arr1.size</code>. We could use <a href=\"http://ruby-doc.org/core-2.3.0/Array.html#method-i-include-3F\" rel=\"nofollow noreferrer\">Array#include?</a>, but this operation can be made much more efficient by converting <code>arr2</code> to a set as an initial step. Set membership lookups (which are implemented as a hash lookup) are very fast.</p>\n\n<p>If we wish to instead return all distinct pairs of elements of <code>arr1</code> whose sum is a member of <code>arr2</code>, the method would be changed to the following.</p>\n\n<pre><code>def all_pairs(arr1, arr2)\n  set = arr2.to_set\n  arr1.uniq.combination(2).select { |n,m| set.include?(n+m) }\nend\n\nall_pairs [3,1,6,1,4], [1,2,6,7]\n  #=&gt; [[3, 4], [1, 6]] \nall_pairs [3,1,6,1,4], [1,2,6]\n  #=&gt; []\n</code></pre>\n"}], "owner": {"reputation": 175, "user_id": 3528784, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/J1nEe.png?s=128&g=1", "display_name": "Mordred", "link": "https://stackoverflow.com/users/3528784/mordred"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 628, "favorite_count": 1, "accepted_answer_id": 42672409, "answer_count": 2, "score": 1, "last_activity_date": 1489006048, "creation_date": 1488978237, "last_edit_date": 1488979787, "question_id": 42672141, "link": "https://stackoverflow.com/questions/42672141/sum-of-any-two-numbers-in-array-equal-number-from-another", "title": "Sum of any two numbers in array equal number from another", "body": "<p>I have two arrays, <code>array1</code> and <code>array2</code>. I want to check if there are any 2 distinct numbers in <code>array1</code> so that their sum is a another distinct number in <code>array2</code>. Here is what I have tried, but it does not seem to be working exactly as i want it to.</p>\n\n<pre><code>array1.each do |k|\n  array1.each do |l|\n    array2.each do |m|\n      if k + l == m\n        # do something with k, l, m\n      end\n    end\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec", "zeus"], "answers": [{"comments": [{"owner": {"reputation": 473, "user_id": 2665238, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/535a132c584e4ff977cb79e8e64581f6?s=128&d=identicon&r=PG&f=1", "display_name": "Seyon", "link": "https://stackoverflow.com/users/2665238/seyon"}, "edited": false, "score": 0, "creation_date": 1489020531, "post_id": 42679304, "comment_id": 72493361, "body": "Boom you provided the answer. I&#39;ve always run tests with parallel:spec and not parallel_rspec, could be why the line syntax didn&#39;t work. Know anything about when to use which? The reason I wanted to be able to run a single test with parallel_rspec is that there&#39;s an error I&#39;m getting that only occurs with parallel_tests (it&#39;s doesn&#39;t load twitter/bootstrap...). Being able to run only one tests means I don&#39;t need to wait 6 minutes between new fix attempts."}], "tags": [], "owner": {"reputation": 1761, "user_id": 3741320, "user_type": "registered", "profile_image": "https://graph.facebook.com/10222536/picture?type=large", "display_name": "James Milani", "link": "https://stackoverflow.com/users/3741320/james-milani"}, "is_accepted": true, "score": 1, "last_activity_date": 1488998949, "last_edit_date": 1488998949, "creation_date": 1488998239, "answer_id": 42679304, "question_id": 42672097, "link": "https://stackoverflow.com/questions/42672097/cant-run-a-single-test-when-using-zeus-parallel-spec-along-with-rspec-focustr/42679304#42679304", "title": "Can&#39;t Run a single test when using Zeus Parallel Spec along with Rspec. Focus:true doesn&#39;t work", "body": "<p>This is a good question, and I have the same issue with parallel_tests in my configuration. As parallel_tests breaks the files into separate threads, it will not be of any benefit to run a single file multi-thread anyway.</p>\n\n<p>You can see this when you run:</p>\n\n<pre><code>parallel_rspec spec/models/some_test.rb\n</code></pre>\n\n<p>It will say <code>1 processes for 1 specs, ~ 1 specs per process</code>.</p>\n\n<p>Thus, if you want to run a single spec in <code>some_test.rb</code>, use <code>:focus</code> for that <code>it</code> or <code>specify</code> block, and then run,</p>\n\n<pre><code>rspec spec/models/some_test.rb\nor\nparallel_rspec spec/models/some_test.rb\n</code></pre>\n\n<p>it doesn't matter. If you want to run a single spec file, it's the same command just no <code>:focus</code>.</p>\n\n<p>The issue that needs to be fixed is when <code>parallel_rspec</code> is run and there is a <code>:focus</code> somewhere in the tests, it should just run that one spec. Instead, it seems to run every spec in every thread except for the thread that includes the <code>:focus</code>, where it only runs that one test in that thread.</p>\n\n<p>And you can see here, I don't think that this issue is going to get fixed: <a href=\"https://github.com/grosser/parallel_tests/issues/114\" rel=\"nofollow noreferrer\">https://github.com/grosser/parallel_tests/issues/114</a></p>\n"}], "owner": {"reputation": 473, "user_id": 2665238, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/535a132c584e4ff977cb79e8e64581f6?s=128&d=identicon&r=PG&f=1", "display_name": "Seyon", "link": "https://stackoverflow.com/users/2665238/seyon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 412, "favorite_count": 0, "accepted_answer_id": 42679304, "answer_count": 1, "score": 1, "last_activity_date": 1488998949, "creation_date": 1488978117, "question_id": 42672097, "link": "https://stackoverflow.com/questions/42672097/cant-run-a-single-test-when-using-zeus-parallel-spec-along-with-rspec-focustr", "title": "Can&#39;t Run a single test when using Zeus Parallel Spec along with Rspec. Focus:true doesn&#39;t work", "body": "<p>Rspec provides the handy ability to \nplace <code>focus: true</code> by a test to make it run in isolation. And running \n<code>$bundle exec rspec spec</code> works to make this functionality true </p>\n\n<p>However, usage of parallel specs alone\n<code>$rake parallel:spec</code></p>\n\n<p>or with Zeus : <code>$zeus rake parallel:spec</code></p>\n\n<p>does not work at all and results in the following </p>\n\n<p><code>ignoring {:focus =&gt; true}</code></p>\n\n<p><strong>Why? I do not want it to be ignored!</strong></p>\n\n<p>Is there no way to run a single test or even a single file while using parallel specs? Trying to get it set up and debug errors that have to do with parallel processing, but I don't want to have to run the entire test suite to test a fix.</p>\n\n<p>Specifying the file location afterwards such as \n<code>$zeus rake parallel:spec spec/features/testing_questionnaire_submission_spec.rb</code></p>\n\n<p>also fails to work.</p>\n"}, {"tags": ["arrays", "ruby", "xml", "xpath", "jruby"], "answers": [{"comments": [{"owner": {"reputation": 9, "user_id": 4734706, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/sH4At.jpg?s=128&g=1", "display_name": "Zaf", "link": "https://stackoverflow.com/users/4734706/zaf"}, "edited": false, "score": 0, "creation_date": 1488990647, "post_id": 42674060, "comment_id": 72478062, "body": "great, it worked. could you please explain the code what actually it did?"}, {"owner": {"reputation": 481, "user_id": 2553761, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ecec2e9eecacbd2a946aec15bd4d049?s=128&d=identicon&r=PG", "display_name": "Stormy", "link": "https://stackoverflow.com/users/2553761/stormy"}, "reply_to_user": {"reputation": 9, "user_id": 4734706, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/sH4At.jpg?s=128&g=1", "display_name": "Zaf", "link": "https://stackoverflow.com/users/4734706/zaf"}, "edited": false, "score": 0, "creation_date": 1489078342, "post_id": 42674060, "comment_id": 72524079, "body": "1. You have requested DOM for array of elements matching XPath 2. You iterate through array using .each method and place each iterated element to &#39;element&#39; variable 3. You print inner value of an element with &#39;puts&#39; command.  I suggest you to read a book regarding ruby because this question was so simple..."}], "tags": [], "owner": {"reputation": 481, "user_id": 2553761, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ecec2e9eecacbd2a946aec15bd4d049?s=128&d=identicon&r=PG", "display_name": "Stormy", "link": "https://stackoverflow.com/users/2553761/stormy"}, "is_accepted": true, "score": 0, "last_activity_date": 1488983470, "creation_date": 1488983470, "answer_id": 42674060, "question_id": 42671881, "link": "https://stackoverflow.com/questions/42671881/xpath-parsing-in-jruby/42674060#42674060", "title": "XPath Parsing in JRuby", "body": "<p>You need to parse an array and print value of each element</p>\n\n<pre><code>xpath_array = XPath.match(@xmlDoc, \"//services/service[./serviceType = 'ADDRESSBOOK']/@data-uri\")\n    xpath_array.each do |element|\n    puts element.value\nend\n</code></pre>\n"}], "owner": {"reputation": 9, "user_id": 4734706, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/sH4At.jpg?s=128&g=1", "display_name": "Zaf", "link": "https://stackoverflow.com/users/4734706/zaf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "accepted_answer_id": 42674060, "answer_count": 1, "score": 0, "last_activity_date": 1488983470, "creation_date": 1488977435, "last_edit_date": 1488978968, "question_id": 42671881, "link": "https://stackoverflow.com/questions/42671881/xpath-parsing-in-jruby", "title": "XPath Parsing in JRuby", "body": "<p>This is my line of code in JRuby when</p>\n\n<pre><code>XPath.match(@xmlDoc, \"//services/service[./serviceType = 'ADDRESSBOOK']/@data-uri\").value\n</code></pre>\n\n<p>When I run this I get this error</p>\n\n<pre><code>NoMethodError: undefined method `value' for #&lt;Array:0x6b39d609&gt;\n</code></pre>\n\n<p>Any idea how can I do get as array?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord", "associations"], "answers": [{"comments": [{"owner": {"reputation": 146, "user_id": 1591162, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3b0c3a16f638f81b9343f90880bc974?s=128&d=identicon&r=PG", "display_name": "Sarmad Sabih", "link": "https://stackoverflow.com/users/1591162/sarmad-sabih"}, "edited": false, "score": 0, "creation_date": 1489122172, "post_id": 42678739, "comment_id": 72542404, "body": "No, I&#39;m not overriding the definition of map anywhere. And about the limit option being ignored is not mentioned in Rails 5 docs <a href=\"http://guides.rubyonrails.org/association_basics.html\" rel=\"nofollow noreferrer\">guides.rubyonrails.org/association_basics.html</a> Nonetheless it&#39;s a weird thing. Thanks for answering though."}], "tags": [], "owner": {"reputation": 5382, "user_id": 7671538, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3506350bc4dd02281ad7f99e8e84715c?s=128&d=identicon&r=PG&f=1", "display_name": "gwcodes", "link": "https://stackoverflow.com/users/7671538/gwcodes"}, "is_accepted": false, "score": 1, "last_activity_date": 1488996495, "last_edit_date": 1495540832, "creation_date": 1488996495, "answer_id": 42678739, "question_id": 42671844, "link": "https://stackoverflow.com/questions/42671844/has-many-associations-with-limit-fetching-all-records-instead-of-provided-limi/42678739#42678739", "title": "has_many associations with `limit` fetching all records instead of provided limit", "body": "<p>It sounds like you're trying to eager load an association with a specified limit, which is not supported by ActiveRecord. See <a href=\"http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html#module-ActiveRecord::Associations::ClassMethods-label-Eager+loading+of+associations\" rel=\"nofollow noreferrer\">http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html#module-ActiveRecord::Associations::ClassMethods-label-Eager+loading+of+associations</a></p>\n\n<p>In particular:</p>\n\n<blockquote>\n  <p>If you eager load an association with a specified :limit option, it will be ignored, returning all the associated objects</p>\n</blockquote>\n\n<p>This is also discussed in quite a few other places e.g. <a href=\"https://stackoverflow.com/questions/29804377/rails-4-eager-load-limit-subquery\">Rails 4 Eager load limit subquery</a>, <a href=\"https://stackoverflow.com/questions/9808674/rails-eager-load-and-limit\">Rails Eager Load and Limit</a></p>\n\n<hr>\n\n<p>I can't explain why <code>map</code> gives you all of the records though - that definitely seems odd. Are you by any chance overriding the definition of <code>map</code> on <code>ApplicationRecord</code>? Does upgrading to the latest minor version of Rails/ActiveRecord have any effect on it?</p>\n"}, {"comments": [{"owner": {"reputation": 146, "user_id": 1591162, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3b0c3a16f638f81b9343f90880bc974?s=128&d=identicon&r=PG", "display_name": "Sarmad Sabih", "link": "https://stackoverflow.com/users/1591162/sarmad-sabih"}, "edited": false, "score": 0, "creation_date": 1489121815, "post_id": 42693704, "comment_id": 72542296, "body": "Hey Dmitriy, thanks for answering. But this scope shouldn&#39;t be on Chat model, and even if I place it on Message model, it doesn&#39;t solve the problem."}, {"owner": {"reputation": 151, "user_id": 6827172, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PnSFO.png?s=128&g=1", "display_name": "Dmitriy Gusev", "link": "https://stackoverflow.com/users/6827172/dmitriy-gusev"}, "reply_to_user": {"reputation": 146, "user_id": 1591162, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3b0c3a16f638f81b9343f90880bc974?s=128&d=identicon&r=PG", "display_name": "Sarmad Sabih", "link": "https://stackoverflow.com/users/1591162/sarmad-sabih"}, "edited": false, "score": 0, "creation_date": 1489128390, "post_id": 42693704, "comment_id": 72544749, "body": "Ok, so you should write that in Chat model scope :latest_5_messages, -&gt; { messages.order(created_at: :desc).limit(5) }"}], "tags": [], "owner": {"reputation": 151, "user_id": 6827172, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PnSFO.png?s=128&g=1", "display_name": "Dmitriy Gusev", "link": "https://stackoverflow.com/users/6827172/dmitriy-gusev"}, "is_accepted": false, "score": 0, "last_activity_date": 1489057514, "creation_date": 1489057514, "answer_id": 42693704, "question_id": 42671844, "link": "https://stackoverflow.com/questions/42671844/has-many-associations-with-limit-fetching-all-records-instead-of-provided-limi/42693704#42693704", "title": "has_many associations with `limit` fetching all records instead of provided limit", "body": "<p>The best implementation of your idea is scopes</p>\n\n<pre><code>class Chat &lt; ApplicationRecord\n  has_many :chat_recipients\n  has_many :recipients, through: :chat_recipients, source: :person\n  has_many :messages, dependent: :destroy\n\n  scope :latest_5_messages, -&gt; { order(created_at: :desc).limit(5) }\nend\n</code></pre>\n"}], "owner": {"reputation": 146, "user_id": 1591162, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3b0c3a16f638f81b9343f90880bc974?s=128&d=identicon&r=PG", "display_name": "Sarmad Sabih", "link": "https://stackoverflow.com/users/1591162/sarmad-sabih"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1213, "favorite_count": 0, "answer_count": 2, "score": 4, "last_activity_date": 1489057514, "creation_date": 1488977355, "question_id": 42671844, "link": "https://stackoverflow.com/questions/42671844/has-many-associations-with-limit-fetching-all-records-instead-of-provided-limi", "title": "has_many associations with `limit` fetching all records instead of provided limit", "body": "<p>I have a <code>chat</code> model:</p>\n\n<pre><code>class Chat &lt; ApplicationRecord\n  # Associations\n  has_many :chat_recipients\n  has_many :recipients, through: :chat_recipients, source: :person\n  has_many :messages, dependent: :destroy\n  has_many :latest_5_messages, -&gt; { order(created_at: :desc).limit(5) }, class_name: Message.name\n  # Associations\nend\n</code></pre>\n\n<p>and a <code>message</code> model:</p>\n\n<pre><code>class Message &lt; ApplicationRecord\n  # Associations\n  belongs_to :person\n  belongs_to :chat\n  # Associations\nend\n</code></pre>\n\n<p>these two associations:</p>\n\n<pre><code>has_many :messages, dependent: :destroy\nhas_many :latest_5_messages, -&gt; { order(created_at: :desc).limit(5) }, class_name: Message.name\n</code></pre>\n\n<p>are pointing to the same model/class.\nWhat I expect is that only 5 messages should be fetched to reduce the server load. I've been developing Rails apps for more than 4 years now and I noticed something which I found somewhat strange. When I ran this command on the <code>rails console</code>:\n<code>2.3.1 :080 &gt; chat = current_person.chats.includes(:recipients, :latest_5_messages).find(1)</code>\nThis is the output:</p>\n\n<pre><code>Chat Load (0.8ms)  SELECT  \"chats\".* FROM \"chats\" INNER JOIN \"chat_recipients\" ON \"chats\".\"id\" = \"chat_recipients\".\"chat_id\" WHERE \"chat_recipients\".\"person_id\" = $1 AND \"chats\".\"id\" = $2 LIMIT $3  [[\"person_id\", 1], [\"id\", 1], [\"LIMIT\", 1]]\nChatRecipient Load (0.4ms)  SELECT \"chat_recipients\".* FROM \"chat_recipients\" WHERE \"chat_recipients\".\"chat_id\" = 1\nPerson Load (0.7ms)  SELECT \"people\".* FROM \"people\" WHERE \"people\".\"id\" IN (1, 2)\nMessage Load (1.0ms)  SELECT \"messages\".* FROM \"messages\" WHERE \"messages\".\"chat_id\" = 1 ORDER BY \"messages\".\"created_at\" DESC\n</code></pre>\n\n<p>It can be clearly seen that a query to fetch ALL messages was made. But I wanted to fetch only 5 records, right? What's the point of applying a limit on a has_many association if it's fetching all the records regardless. But this isn't it, now that I run:\n<code>chat.latest_5_messages.count</code>\nthis is the output:</p>\n\n<pre><code>2.3.1 :082 &gt; chat.latest_5_messages.count\n    (0.9ms)  SELECT COUNT(count_column) FROM (SELECT  1 AS count_column FROM \"messages\" WHERE \"messages\".\"chat_id\" = $1 LIMIT $2) subquery_for_count  [[\"chat_id\", 1], [\"LIMIT\", 5]]\n =&gt; 5 \n</code></pre>\n\n<p>I mean what's going on? I love Rails, I absolutely do, but I think I'm still catching up on under the hood workings of ActiveRecord after developing for more than 4 years. Why another query? When I did <code>chat.latest_5_messages</code> I saw exactly 5 records in an <code>Associations::CollectionProxy</code> but the thing was when I looped on this collection, there were 80+ iterations (it fetched all associated records contrary to the limit(5) provided). Take a look:</p>\n\n<pre><code>2.3.1 :087 &gt; chat.latest_5_messages.map(&amp;:id)\n =&gt; [190, 189, 188, 187, 186, 185, 184, 183, 182, 181, 180, 179, 178, 177, 176, 175, 174, 172, 170, 169, 167, 166, 165, 164, 163, 162, 161, 160, 159, 158, 157, 156, 155, 152, 151, 150, 149, 148, 147, 146, 145, 144, 143, 142, 141, 140, 139, 138, 137, 136, 135, 134, 133, 132, 131, 130, 129, 128, 127, 126, 125, 124, 123, 122, 121, 120, 119, 118, 117, 116, 115, 114, 113, 112, 111, 110, 109, 108, 107, 106, 105, 104, 103, 102]\n</code></pre>\n\n<p>and I had to do <code>chat.latest_5_messages.all</code> to get my desired 5 records, but at the cost of another DB query, which I wanted to avoid.</p>\n\n<p>I'm sorry If this question sounds dump to some people, I might be unaware of some parts of ActiveRecord, but it would be highly appreciated if someone explains.</p>\n\n<p><strong>P.S:</strong> Can this only be achieved using a raw SQL query or is there a way to do it the Rails way.</p>\n"}, {"tags": ["ruby", "mysql2"], "comments": [{"owner": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "edited": false, "score": 0, "creation_date": 1488977713, "post_id": 42671829, "comment_id": 72468508, "body": "Did you read the docs? <a href=\"http://www.rubydoc.info/gems/mysql2/0.2.6/file/README.rdoc\" rel=\"nofollow noreferrer\">rubydoc.info/gems/mysql2/0.2.6/file/README.rdoc</a>"}, {"owner": {"reputation": 15, "user_id": 5811185, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b7036d3c759b896fc85165b095059240?s=128&d=identicon&r=PG&f=1", "display_name": "Kyle", "link": "https://stackoverflow.com/users/5811185/kyle"}, "reply_to_user": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "edited": false, "score": 0, "creation_date": 1488978802, "post_id": 42671829, "comment_id": 72469277, "body": "yeah I have read through the relevant areas of what you have linked me. I feel really stupid asking such a basic question, but I think I just need to see a working example to wrap my head around it."}, {"owner": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "edited": false, "score": 0, "creation_date": 1488980166, "post_id": 42671829, "comment_id": 72470196, "body": "Ok..I see. Look at the answers here for some more concrete examples:  <a href=\"http://stackoverflow.com/questions/10836805/how-can-i-iterate-through-a-mysql-result-set\" title=\"how can i iterate through a mysql result set\">stackoverflow.com/questions/10836805/&hellip;</a> . Maybe those help a little bit to get started."}], "answers": [{"comments": [{"owner": {"reputation": 15, "user_id": 5811185, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b7036d3c759b896fc85165b095059240?s=128&d=identicon&r=PG&f=1", "display_name": "Kyle", "link": "https://stackoverflow.com/users/5811185/kyle"}, "edited": false, "score": 0, "creation_date": 1488978347, "post_id": 42671934, "comment_id": 72468963, "body": "doesn&#39;t seem to work still, it says something about hash converting to a string, I will show you how I am using it to see if you can spot the errors of my ways, thanks in advance you are a life saver!  <a href=\"https://gyazo.com/bd696eb4cad4262d4849c2be872c7908\" rel=\"nofollow noreferrer\">gyazo.com/bd696eb4cad4262d4849c2be872c7908</a>"}, {"owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "reply_to_user": {"reputation": 15, "user_id": 5811185, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b7036d3c759b896fc85165b095059240?s=128&d=identicon&r=PG&f=1", "display_name": "Kyle", "link": "https://stackoverflow.com/users/5811185/kyle"}, "edited": false, "score": 0, "creation_date": 1488978551, "post_id": 42671934, "comment_id": 72469121, "body": "I saw the code but what are you trying to accomplish?"}, {"owner": {"reputation": 15, "user_id": 5811185, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b7036d3c759b896fc85165b095059240?s=128&d=identicon&r=PG&f=1", "display_name": "Kyle", "link": "https://stackoverflow.com/users/5811185/kyle"}, "edited": false, "score": 0, "creation_date": 1488978742, "post_id": 42671934, "comment_id": 72469226, "body": "Basically I want the variable &quot;courses&quot;, to be an array that contains a bunch of strings from one of the columns in my database. Thanks again."}, {"owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "reply_to_user": {"reputation": 15, "user_id": 5811185, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b7036d3c759b896fc85165b095059240?s=128&d=identicon&r=PG&f=1", "display_name": "Kyle", "link": "https://stackoverflow.com/users/5811185/kyle"}, "edited": false, "score": 0, "creation_date": 1488979220, "post_id": 42671934, "comment_id": 72469552, "body": "I updated my answer. Try those three lines to see if you can print the course names"}, {"owner": {"reputation": 15, "user_id": 5811185, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b7036d3c759b896fc85165b095059240?s=128&d=identicon&r=PG&f=1", "display_name": "Kyle", "link": "https://stackoverflow.com/users/5811185/kyle"}, "edited": false, "score": 0, "creation_date": 1488979805, "post_id": 42671934, "comment_id": 72469946, "body": "yeah that worked perfectly (it prints off the course names), is &quot;course_names&quot; now a string array containing the variables?"}, {"owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "reply_to_user": {"reputation": 15, "user_id": 5811185, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b7036d3c759b896fc85165b095059240?s=128&d=identicon&r=PG&f=1", "display_name": "Kyle", "link": "https://stackoverflow.com/users/5811185/kyle"}, "edited": false, "score": 0, "creation_date": 1488979874, "post_id": 42671934, "comment_id": 72470003, "body": "It&#39;s an array of strings from your database, table courses, field name, with LCASE function applied."}, {"owner": {"reputation": 15, "user_id": 5811185, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b7036d3c759b896fc85165b095059240?s=128&d=identicon&r=PG&f=1", "display_name": "Kyle", "link": "https://stackoverflow.com/users/5811185/kyle"}, "edited": false, "score": 0, "creation_date": 1488980255, "post_id": 42671934, "comment_id": 72470249, "body": "So where you have &quot;puts course_name&quot;  could I do this to write the course names to an array:  course_names.each { course_names_array = |course_name| }"}, {"owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "reply_to_user": {"reputation": 15, "user_id": 5811185, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b7036d3c759b896fc85165b095059240?s=128&d=identicon&r=PG&f=1", "display_name": "Kyle", "link": "https://stackoverflow.com/users/5811185/kyle"}, "edited": false, "score": 0, "creation_date": 1488980383, "post_id": 42671934, "comment_id": 72470356, "body": "Its values are just strings"}], "tags": [], "owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "is_accepted": false, "score": 1, "last_activity_date": 1488979196, "last_edit_date": 1488979196, "creation_date": 1488977595, "answer_id": 42671934, "question_id": 42671829, "link": "https://stackoverflow.com/questions/42671829/write-mysql2-result-to-an-array-in-ruby/42671934#42671934", "title": "Write MySQL2 result to an array in Ruby", "body": "<p>If that <code>courses</code> object is a <code>Mysql2::Result</code> you already can because it includes the <code>Enumerable</code> module. So you can use <code>each</code>, <code>select</code>, <code>first</code> and all the others methods from the module. Anyway, if you actually want an array object</p>\n\n<pre><code>courses = client.query(\"SELECT LCASE(name) FROM courses\").to_a\n</code></pre>\n\n<p><code>to_a</code> is from <code>Enumerable</code> module as well</p>\n\n<pre><code>courses = client.query(\"SELECT LCASE(name) AS name FROM courses\")\ncourse_names = courses.map { |course| course['name'] }\ncourse_names.each { |course_name| puts course_name }\n</code></pre>\n"}], "owner": {"reputation": 15, "user_id": 5811185, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b7036d3c759b896fc85165b095059240?s=128&d=identicon&r=PG&f=1", "display_name": "Kyle", "link": "https://stackoverflow.com/users/5811185/kyle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1334, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1488979196, "creation_date": 1488977323, "question_id": 42671829, "link": "https://stackoverflow.com/questions/42671829/write-mysql2-result-to-an-array-in-ruby", "title": "Write MySQL2 result to an array in Ruby", "body": "<p>I want to convert this:</p>\n\n<pre><code>courses = client.query(\"SELECT LCASE(name) FROM courses\")\n</code></pre>\n\n<p>into an array, so I can easily loop through elements in some existing code, much appreciated.</p>\n"}, {"tags": ["ruby", "cassandra", "datastax"], "comments": [{"owner": {"reputation": 5724, "user_id": 2539103, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/3e612c7588cd86545b1ce71f6cb3f0e3?s=128&d=identicon&r=PG", "display_name": "undefined_variable", "link": "https://stackoverflow.com/users/2539103/undefined-variable"}, "edited": false, "score": 0, "creation_date": 1488977207, "post_id": 42669737, "comment_id": 72468135, "body": "looking at documentation it seems you have to use <code>arguments:</code> instead of <code>parameters:</code>"}, {"owner": {"reputation": 13, "user_id": 857725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17cf778b9719d09324bfd5218ea5b290?s=128&d=identicon&r=PG", "display_name": "zhares", "link": "https://stackoverflow.com/users/857725/zhares"}, "reply_to_user": {"reputation": 5724, "user_id": 2539103, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/3e612c7588cd86545b1ce71f6cb3f0e3?s=128&d=identicon&r=PG", "display_name": "undefined_variable", "link": "https://stackoverflow.com/users/2539103/undefined-variable"}, "edited": false, "score": 0, "creation_date": 1488984912, "post_id": 42669737, "comment_id": 72473742, "body": "yep, sorry, mistake when writing the post."}, {"owner": {"reputation": 18203, "user_id": 100731, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/056c32203f8017f075ac060069823b66?s=128&d=identicon&r=PG", "display_name": "phoet", "link": "https://stackoverflow.com/users/100731/phoet"}, "edited": false, "score": 0, "creation_date": 1488990269, "post_id": 42669737, "comment_id": 72477787, "body": "i think you must use a <code>Cassandra::Date</code> instead of a string"}, {"owner": {"reputation": 13, "user_id": 857725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17cf778b9719d09324bfd5218ea5b290?s=128&d=identicon&r=PG", "display_name": "zhares", "link": "https://stackoverflow.com/users/857725/zhares"}, "edited": false, "score": 0, "creation_date": 1488994261, "post_id": 42669737, "comment_id": 72480428, "body": "Well, seems that the problem is that <code>ruby-driver</code> is up-to-date with cassandra. the problem is that the type <code>Date</code> is not defined here: <a href=\"https://github.com/datastax/ruby-driver/blob/master/lib/cassandra/util.rb#L174\" rel=\"nofollow noreferrer\">github.com/datastax/ruby-driver/blob/master/lib/cassandra/&hellip;</a>  So I cannot pass a <code>Date</code> nor a <code>String</code>"}], "owner": {"reputation": 13, "user_id": 857725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17cf778b9719d09324bfd5218ea5b290?s=128&d=identicon&r=PG", "display_name": "zhares", "link": "https://stackoverflow.com/users/857725/zhares"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 161, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1488993832, "creation_date": 1488971513, "last_edit_date": 1488993832, "question_id": 42669737, "link": "https://stackoverflow.com/questions/42669737/cassandra-query-with-data-parameter-failing", "title": "cassandra query with data parameter failing", "body": "<p>I'm using ruby-driver to connect to cassandra, when I tried to execute the SQL with parameters it keeps failing, because it doesn't recognize \"date\" as valid.</p>\n\n<p>Is there a proper way to do this?</p>\n\n<p>I'm doing something like this:</p>\n\n<pre><code>sql = 'select event_id, event_name, event_date from events where event_date = ?'\nevent_params = ['2017-03-18']\nconnection.execute(sql, arguments: event_params)\n</code></pre>\n\n<p>This returns an error:</p>\n\n<pre><code>Cassandra::Errors::InvalidError: Expected 4 byte long for date (10)\n</code></pre>\n\n<p>is there a way to validate this parameter as a <code>Date</code> instead as a <code>string</code>?</p>\n\n<p>my schema is like this:</p>\n\n<pre><code>CREATE TABLE events (\n  event_id bigint,\n  event_date date,\n  title text,\n  PRIMARY KEY (event_id, event_date)\n); \n</code></pre>\n"}, {"tags": ["ruby", "hash", "enumeration"], "comments": [{"owner": {"reputation": 2559, "user_id": 5087125, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6R64Z.jpg?s=128&g=1", "display_name": "pvg", "link": "https://stackoverflow.com/users/5087125/pvg"}, "edited": false, "score": 2, "creation_date": 1488969633, "post_id": 42668922, "comment_id": 72462733, "body": "<a href=\"https://www.igvita.com/2009/02/04/ruby-19-internals-ordered-hash/\" rel=\"nofollow noreferrer\">igvita.com/2009/02/04/ruby-19-internals-ordered-hash</a>"}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1488973057, "post_id": 42668922, "comment_id": 72465151, "body": "That is an implementation detail, and I guess that depends on the Ruby implementation."}, {"owner": {"reputation": 2559, "user_id": 5087125, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6R64Z.jpg?s=128&g=1", "display_name": "pvg", "link": "https://stackoverflow.com/users/5087125/pvg"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1488973812, "post_id": 42668922, "comment_id": 72465707, "body": "@sawa no, it isn&#39;t, that&#39;s why the docs don&#39;t say it&#39;s an implementation detail. Any post 1.9 ruby would have these, it&#39;s a change in the contract of the class."}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 2, "creation_date": 1488974411, "post_id": 42668922, "comment_id": 72466183, "body": "I am not saying that the ordered hash in an implementation detail. I am saying that the way Ruby &quot;manages to the order&quot; (what you asked) is an implementation detail."}], "answers": [{"comments": [{"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1488975908, "post_id": 42670152, "comment_id": 72467233, "body": "The &quot;exact answer&quot; should be about &quot;how?&quot;, not &quot;why?&quot;."}], "tags": [], "owner": {"reputation": 1254, "user_id": 4576274, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/F5Wnd.jpg?s=128&g=1", "display_name": "Pramod", "link": "https://stackoverflow.com/users/4576274/pramod"}, "is_accepted": false, "score": 1, "last_activity_date": 1488972657, "creation_date": 1488972657, "answer_id": 42670152, "question_id": 42668922, "link": "https://stackoverflow.com/questions/42668922/hashes-enumerate-their-values-in-the-order-that-the-corresponding-keys-were-ins/42670152#42670152", "title": "&quot;Hashes enumerate their values in the order that the corresponding keys were inserted.&quot;", "body": "<p>This <a href=\"https://www.ruby-forum.com/topic/166075\" rel=\"nofollow noreferrer\">forum</a> has the exact answer you are looking for and it is answered by Matz himself.</p>\n\n<blockquote>\n  <p><em>Could anybody explain why this feature was added?</em></p>\n  \n  <p>Useful for some cases, especially for keyword arguments.</p>\n  \n  <p><em>Isn't it going to slow down the operations on the Hash?</em></p>\n  \n  <p>No. hash reference operation does not touch order information, only\n  for iteration.  Memory consumption increased a bit.</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "is_accepted": false, "score": 3, "last_activity_date": 1488972852, "creation_date": 1488972852, "answer_id": 42670243, "question_id": 42668922, "link": "https://stackoverflow.com/questions/42668922/hashes-enumerate-their-values-in-the-order-that-the-corresponding-keys-were-ins/42670243#42670243", "title": "&quot;Hashes enumerate their values in the order that the corresponding keys were inserted.&quot;", "body": "<p>Yes, it keeps a linked list. This can be done without compromising the typical O(1) amortized worst-case step complexity guarantees of a typical hash table, since all the operations that make linked lists expensive (e.g. deleting an element) are related to needing to traverse the list in order to <em>find</em> an element, but in this special case, the \"finding\" part can be short-circuited by using hash table lookup.</p>\n\n<p>If you are interested in the internals of Ruby implementations, I recommend reading the Rubinius source code; it is much cleaner and easier to read than YARV, plus, it is written in Ruby, a language you presumable already know by heart. Rubinius's <code>Hash</code> class is implemented in <a href=\"https://github.com/rubinius/rubinius/blob/master/core/hash.rb\" rel=\"nofollow noreferrer\"><code>core/hash.rb</code></a>. Note that current versions of Rubinius use a <a href=\"https://wikipedia.org/wiki/Hash_array_mapped_trie\" rel=\"nofollow noreferrer\"><em>Hash Array Mapped Trie (HAMT)</em></a>, which is significantly different from the simple traditional hash table that YARV uses, but that has no bearing on the use of the additional linked list. And if you really want to, you can look at an <a href=\"https://github.com/rubinius/rubinius/blob/a8f23c1acf1eada25ecc6a46dadac80f6aab5e63/core/hash.rb\" rel=\"nofollow noreferrer\">older version</a> that still has the traditional hash table.</p>\n"}], "owner": {"reputation": 6814, "user_id": 5227053, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/30254853024c1381c7e51ca09b9341e7?s=128&d=identicon&r=PG&f=1", "display_name": "AnoE", "link": "https://stackoverflow.com/users/5227053/anoe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 200, "favorite_count": 1, "answer_count": 2, "score": 3, "last_activity_date": 1488972852, "creation_date": 1488969273, "question_id": 42668922, "link": "https://stackoverflow.com/questions/42668922/hashes-enumerate-their-values-in-the-order-that-the-corresponding-keys-were-ins", "title": "&quot;Hashes enumerate their values in the order that the corresponding keys were inserted.&quot;", "body": "<p>From the ruby documentation at <a href=\"http://ruby-doc.org/core-2.4.0/Hash.html#method-i-each\" rel=\"nofollow noreferrer\">http://ruby-doc.org/core-2.4.0/Hash.html#method-i-each</a> :</p>\n\n<blockquote>\n  <p>Hashes enumerate their values in the order that the corresponding keys were inserted.</p>\n</blockquote>\n\n<p>Regularly, I would expect to enumerate hashes (in any arbitrary language) in random order.</p>\n\n<p>How does ruby manage to track the order of insertion? Does it keep a linked list between keys in addition to the hash buckets? I guess that would be pretty straightforward, but I'm really surprised (in a good way) that they did it in the first place.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "octopress"], "comments": [{"owner": {"reputation": 16672, "user_id": 22237, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/hkobD.png?s=128&g=1", "display_name": "Kris", "link": "https://stackoverflow.com/users/22237/kris"}, "edited": false, "score": 0, "creation_date": 1488968957, "post_id": 42668637, "comment_id": 72462297, "body": "&lt;strike&gt;Are you using Windows?&lt;/strike&gt; I see you are using Ubuntu."}, {"owner": {"reputation": 16672, "user_id": 22237, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/hkobD.png?s=128&g=1", "display_name": "Kris", "link": "https://stackoverflow.com/users/22237/kris"}, "edited": false, "score": 0, "creation_date": 1488969076, "post_id": 42668637, "comment_id": 72462377, "body": "long shot but I would try <code>bundle install</code> in the root directory to see if there is a newer version of octopress or its dependencies."}, {"owner": {"reputation": 1, "user_id": 7677049, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b7bd34d470dde1b4b91163c27a6fb4c?s=128&d=identicon&r=PG&f=1", "display_name": "BetaMake", "link": "https://stackoverflow.com/users/7677049/betamake"}, "reply_to_user": {"reputation": 16672, "user_id": 22237, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/hkobD.png?s=128&g=1", "display_name": "Kris", "link": "https://stackoverflow.com/users/22237/kris"}, "edited": false, "score": 0, "creation_date": 1488971945, "post_id": 42668637, "comment_id": 72464330, "body": "<a href=\"https://github.com/octopress/octopress/issues/183\" rel=\"nofollow noreferrer\">github.com/octopress/octopress/issues/183</a>    it is the whole errors  i use Ubuntu16.04  thanks to you"}, {"owner": {"reputation": 4018, "user_id": 135673, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/42ee5885ec2ae8f7834b716a3a2b57c2?s=128&d=identicon&r=PG", "display_name": "froderik", "link": "https://stackoverflow.com/users/135673/froderik"}, "edited": false, "score": 0, "creation_date": 1488976498, "post_id": 42668637, "comment_id": 72467641, "body": "looks to me that the <code>posix_spawn_ext</code> shared library is missing a symbol called <code>rb_fix2init</code> - this probably indicates that you are missing another native library or that you have a mismatch between versions of things. Going to the latest versions of everything may be painful but is often good in these cases."}, {"owner": {"reputation": 1, "user_id": 7677049, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b7bd34d470dde1b4b91163c27a6fb4c?s=128&d=identicon&r=PG&f=1", "display_name": "BetaMake", "link": "https://stackoverflow.com/users/7677049/betamake"}, "edited": false, "score": 0, "creation_date": 1488977240, "post_id": 42668637, "comment_id": 72468171, "body": "so,what should i do ?  now  i don&#39;t know how i do next.  thanks to you"}], "answers": [{"tags": [], "owner": {"reputation": 91157, "user_id": 1755598, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/S6a50.jpg?s=128&g=1", "display_name": "CodeWizard", "link": "https://stackoverflow.com/users/1755598/codewizard"}, "is_accepted": false, "score": 0, "last_activity_date": 1501800289, "creation_date": 1501800289, "answer_id": 45495695, "question_id": 42668637, "link": "https://stackoverflow.com/questions/42668637/rake-generate-not-working/45495695#45495695", "title": "Rake generate not working", "body": "<p>Try this out:</p>\n\n<p><code>compass clean</code> followed by <code>compass watch</code>.</p>\n\n<p>If this is still not resolving the problem clean out the sass cache folder and clear &amp; compile.</p>\n"}], "owner": {"reputation": 1, "user_id": 7677049, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b7bd34d470dde1b4b91163c27a6fb4c?s=128&d=identicon&r=PG&f=1", "display_name": "BetaMake", "link": "https://stackoverflow.com/users/7677049/betamake"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 207, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1501800289, "creation_date": 1488968498, "last_edit_date": 1489152481, "question_id": 42668637, "link": "https://stackoverflow.com/questions/42668637/rake-generate-not-working", "title": "Rake generate not working", "body": "<p>I get the following error when I do<code>rake generate</code></p>\n\n<pre><code>Starting to watch source with Jekyll and Compass. Starting Rack on port 4000\ndirectory source/stylesheets\nDEPRECATION WARNING on line 87 of /var/lib/gems/2.3.0/gems/compass-core-1.0.3/stylesheets/compass/css3/_deprecated-support.scss: #{} interpolation near operators will be simplified\nin a future version of Sass. To preserve the current behavior, use quotes:\n\n  unquote('\"$moz-\"#{$experimental-support-for-mozilla} \"$webkit-\"#{$experimental-support-for-webkit} \"$opera-\"#{$experimental-support-for-opera} \"$microsoft-\"#{$experimental-support-for-microsoft} \"$khtml-\"#{$experimental-support-for-khtml}')\n\nYou can use the sass-convert command to automatically fix most cases.\n\nDEPRECATION WARNING on line 92 of /var/lib/gems/2.3.0/gems/compass-core-1.0.3/stylesheets/compass/css3/_deprecated-support.scss: #{} interpolation near operators will be simplified\nin a future version of Sass. To preserve the current behavior, use quotes:\n\n  unquote('\"$ie6-\"#{$legacy-support-for-ie6} \"$ie7-\"#{$legacy-support-for-ie7} \"$ie8-\"#{$legacy-support-for-ie8}')\n\nYou can use the sass-convert command to automatically fix most cases.\n\n    write source/stylesheets/screen.css\n\n&gt;&gt;&gt; Compass is watching for changes. Press Ctrl-C to Stop.\ndirectory public/stylesheets\nConfiguration file: /home/ubuntu/octopress/_config.yml\n/var/lib/gems/2.3.0/gems/posix-spawn-0.3.13/lib/posix/spawn.rb:2:in `require': /var/lib/gems/2.3.0/gems/posix-spawn-0.3.13/lib/posix_spawn_ext.so: undefined symbol: rb_fix2int - /var/lib/gems/2.3.0/gems/posix-spawn-0.3.13/lib/posix_spawn_ext.so (LoadError)\n    from /var/lib/gems/2.3.0/gems/posix-spawn-0.3.13/lib/posix/spawn.rb:2:in `&lt;top (required)&gt;'\n    from /var/lib/gems/2.3.0/gems/pygments.rb-0.6.3/lib/pygments/popen.rb:2:in `require'\n    from /var/lib/gems/2.3.0/gems/pygments.rb-0.6.3/lib/pygments/popen.rb:2:in `&lt;top (required)&gt;'\n    from /var/lib/gems/2.3.0/gems/pygments.rb-0.6.3/lib/pygments.rb:1:in `require'\n    from /var/lib/gems/2.3.0/gems/pygments.rb-0.6.3/lib/pygments.rb:1:in `&lt;top (required)&gt;'\n\n    from /var/lib/gems/2.3.0/gems/jekyll-2.5.3/lib/jekyll/plugin_manager.rb:74:in `require'\n    from /var/lib/gems/2.3.0/gems/jekyll-\n    from /var/lib/gems/2.3.0/gems/jekyll-2.5.3/lib/jekyll/commands/build.rb:29:in `process'\n    from /var/lib/gems/2.3.0/gems/jekyll-2.5.3/lib/jekyll/commands/build.rb:18:in `block (2 levels) in init_with_program'\n    from /var/lib/gems/2.3.0/gems/mercenary-0.3.6/lib/mercenary/command.rb:220:in `block in execute'\n    from /var/lib/gems/2.3.0/gems/mercenary-0.3.6/lib/mercenary/command.rb:220:in `each'\n    from /var/lib/gems/2.3.0/gems/mercenary-0.3.6/lib/mercenary/command.rb:220:in `execute'\n    from /var/lib/gems/2.3.0/gems/mercenary-0.3.6/lib/mercenary/program.rb:42:in `go'\n    from /var/lib/gems/2.3.0/gems/mercenary-0.3.6/lib/mercenary.rb:19:in `program'\n    from /var/lib/gems/2.3.0/gems/jekyll-2.5.3/bin/jekyll:20:in `&lt;top (required)&gt;'\n    from /usr/local/bin/jekyll:23:in `load'\n    from /usr/local/bin/jekyll:23:in `&lt;main&gt;'\n    write public/stylesheets/screen.\n</code></pre>\n\n<p>Before running <code>compass watch</code> I reboot my computer and run <code>compass clean</code>.</p>\n"}, {"tags": ["ruby", "rubygems"], "answers": [{"comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1488969276, "post_id": 42668895, "comment_id": 72462512, "body": "yep, that&#39;s what I use"}], "tags": [], "owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "is_accepted": true, "score": 1, "last_activity_date": 1488969460, "last_edit_date": 1488969460, "creation_date": 1488969213, "answer_id": 42668895, "question_id": 42668627, "link": "https://stackoverflow.com/questions/42668627/ruby-tool-to-browse-through-installed-gems-code/42668895#42668895", "title": "Ruby tool to browse through installed gems code", "body": "<p>You could use <a href=\"https://github.com/pry/pry\" rel=\"nofollow noreferrer\">pry</a> with <a href=\"https://github.com/pry/pry/wiki/Source-browsing\" rel=\"nofollow noreferrer\">source-browsing.</a></p>\n\n<p>It's a console similar to IRB, and you can view the definition of any class/method that is written in plain Ruby.</p>\n\n<p>Here's an example with <code>rgeo</code> gem :</p>\n\n<pre><code>&gt; pry                                                                                                               \n[1] pry(main)&gt; require 'rgeo'\n=&gt; true\n[2] pry(main)&gt; show-source RGeo::Cartesian.factory\n\nFrom: ~/.rvm/gems/ruby-2.3.1/gems/rgeo-0.6.0/lib/rgeo/cartesian/interface.rb @ line 27:\nOwner: #&lt;Class:RGeo::Cartesian&gt;\nVisibility: public\nNumber of lines: 7\n\ndef preferred_factory(opts_ = {})\n  if ::RGeo::Geos.supported?\n    ::RGeo::Geos.factory(opts_)\n  else\n    simple_factory(opts_)\n  end\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1488969830, "post_id": 42668988, "comment_id": 72462866, "body": "I think the problem is not finding gem&#39;s source code. The problem is to determine <i>which gem it is</i> and go to its code directly. What <code>show-source</code> does."}], "tags": [], "owner": {"reputation": 16672, "user_id": 22237, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/hkobD.png?s=128&g=1", "display_name": "Kris", "link": "https://stackoverflow.com/users/22237/kris"}, "is_accepted": false, "score": 0, "last_activity_date": 1488969440, "last_edit_date": 1495535402, "creation_date": 1488969440, "answer_id": 42668988, "question_id": 42668627, "link": "https://stackoverflow.com/questions/42668627/ruby-tool-to-browse-through-installed-gems-code/42668988#42668988", "title": "Ruby tool to browse through installed gems code", "body": "<p>You could \"vendorize\" your gems, that is instead having them installed somewhere else on your system they are within your project. That way your editor has access the the source code more easily.</p>\n\n<p>If you are using bundler you can do something like <code>bundle package</code> which will put your gems in <code>./vendor/cache</code>. Reference: <a href=\"https://stackoverflow.com/questions/3646847/how-do-i-vendorize-gems-for-rails3-bundler\">How do I vendorize gems for Rails3/Bundler</a></p>\n\n<p>Another way, which I use, is <a href=\"https://github.com/postmodern/gem_home\" rel=\"nofollow noreferrer\">gem_home</a> this will manage your <code>$GEM_HOME</code>, which is where gems are installed. You would do something like:</p>\n\n<pre><code>cd ~/dev/my_project\ngem_home .\nbundle install\n</code></pre>\n\n<p>You will then find all your gems in <code>~/dev/my_project/.gems</code>.</p>\n\n<p>Which ever method you use don't forget to exclude the directory from version control, e.g. add to <code>.gitignore</code>.</p>\n"}], "owner": {"reputation": 3305, "user_id": 342978, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/ee06ba399c5eaf3f5a337a96207c2768?s=128&d=identicon&r=PG", "display_name": "Syl", "link": "https://stackoverflow.com/users/342978/syl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "accepted_answer_id": 42668895, "answer_count": 2, "score": 1, "last_activity_date": 1488969460, "creation_date": 1488968486, "question_id": 42668627, "link": "https://stackoverflow.com/questions/42668627/ruby-tool-to-browse-through-installed-gems-code", "title": "Ruby tool to browse through installed gems code", "body": "<p>I am using a gem and I have trouble figuring out how to use a specific method.</p>\n\n<p>Currently to understand how it works, I have to go to github, search the gem realise the code is from a dependency, search the code repo for the other gem, realise it's another gem, locate it, find the class, and from there go from one class to another with a lot of browsers tabs open.</p>\n\n<p>I am on Linux using sublime text. Is there some tool that would allow me to directly access the code from a gem ?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "activerecord", "ruby-on-rails-5"], "answers": [{"comments": [{"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "reply_to_user": {"reputation": 221, "user_id": 7208422, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/56353403defa7c406fe8af9e11b612ea?s=128&d=identicon&r=PG&f=1", "display_name": "Lory", "link": "https://stackoverflow.com/users/7208422/lory"}, "edited": false, "score": 0, "creation_date": 1488968333, "post_id": 42668450, "comment_id": 72461871, "body": "@Lory but it is strange, that your original code did not, because it looks correct according to documentation"}, {"owner": {"reputation": 221, "user_id": 7208422, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/56353403defa7c406fe8af9e11b612ea?s=128&d=identicon&r=PG&f=1", "display_name": "Lory", "link": "https://stackoverflow.com/users/7208422/lory"}, "edited": false, "score": 0, "creation_date": 1488968431, "post_id": 42668450, "comment_id": 72461936, "body": "It was strange also for me, because I wrote it exactly according to the documentation."}, {"owner": {"reputation": 221, "user_id": 7208422, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/56353403defa7c406fe8af9e11b612ea?s=128&d=identicon&r=PG&f=1", "display_name": "Lory", "link": "https://stackoverflow.com/users/7208422/lory"}, "edited": false, "score": 0, "creation_date": 1488968701, "post_id": 42668450, "comment_id": 72462119, "body": "@ Andrey Deineko Yes, this project is pretty old but was involved today on it. Maybe this is the issue."}, {"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "reply_to_user": {"reputation": 221, "user_id": 7208422, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/56353403defa7c406fe8af9e11b612ea?s=128&d=identicon&r=PG&f=1", "display_name": "Lory", "link": "https://stackoverflow.com/users/7208422/lory"}, "edited": false, "score": 0, "creation_date": 1488968749, "post_id": 42668450, "comment_id": 72462168, "body": "@Lory so this is most likely it :)"}, {"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "reply_to_user": {"reputation": 221, "user_id": 7208422, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/56353403defa7c406fe8af9e11b612ea?s=128&d=identicon&r=PG&f=1", "display_name": "Lory", "link": "https://stackoverflow.com/users/7208422/lory"}, "edited": false, "score": 1, "creation_date": 1488968777, "post_id": 42668450, "comment_id": 72462185, "body": "@Lory btw, next time always add the env information to the question, like Ruby/Rails versions - it is important ;)"}, {"owner": {"reputation": 221, "user_id": 7208422, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/56353403defa7c406fe8af9e11b612ea?s=128&d=identicon&r=PG&f=1", "display_name": "Lory", "link": "https://stackoverflow.com/users/7208422/lory"}, "edited": false, "score": 1, "creation_date": 1488969310, "post_id": 42668450, "comment_id": 72462531, "body": "@Andray Deineko I will take your advice. Thank you! \u0421\u043f\u0430\u0441\u0438\u0431\u0430 :)"}], "tags": [], "owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "is_accepted": true, "score": 30, "last_activity_date": 1488968315, "last_edit_date": 1488968315, "creation_date": 1488967972, "answer_id": 42668450, "question_id": 42668391, "link": "https://stackoverflow.com/questions/42668391/change-the-default-value-for-table-column-with-migration/42668450#42668450", "title": "Change the default value for table column with migration", "body": "<p>It is strange, because according to documentation (<a href=\"http://api.rubyonrails.org/classes/ActiveRecord/ConnectionAdapters/SchemaStatements.html#method-i-change_column_default\" rel=\"noreferrer\"><code>change_column_default</code></a>) your code should work..</p>\n\n<p>As an option you might define <code>up</code> and <code>down</code>:</p>\n\n<pre><code>class ChangeDefaultvalueForHideSeasonSelector &lt; ActiveRecord::Migration\n  def up\n    change_column_default :plussites, :hide_season_selector, true\n  end\n\n  def down\n    change_column_default :plussites, :hide_season_selector, false\n  end\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4207, "user_id": 364590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/995d983b3912d10c0f05feb8d2d70c54?s=128&d=identicon&r=PG", "display_name": "Fa11enAngel", "link": "https://stackoverflow.com/users/364590/fa11enangel"}, "is_accepted": false, "score": 27, "last_activity_date": 1560239067, "last_edit_date": 1560239067, "creation_date": 1559895133, "answer_id": 56490435, "question_id": 42668391, "link": "https://stackoverflow.com/questions/42668391/change-the-default-value-for-table-column-with-migration/56490435#56490435", "title": "Change the default value for table column with migration", "body": "<p>You have to check which version of ActiveRecord you are using. According to you command <code>rake db:migrate</code> you are still on rails 4.2 or earlier.</p>\n\n<p>If you are on ActiveRecord up to 4.2 (<a href=\"https://apidock.com/rails/v4.2.9/ActiveRecord/ConnectionAdapters/SchemaStatements/change_column_default\" rel=\"noreferrer\">change_column_default 4.2.9</a>), there is no from/to option and you can define only the new default option as param.</p>\n\n<pre><code>class ChangeDefaultvalueForHideSeasonSelector &lt; ActiveRecord::Migration \n  def change \n    change_column_default :plussites, :hide_season_selector, true \n  end\nend\n</code></pre>\n\n<p>The solution above won't allow a rollback as the method don't know, what the previous default value was. This is why you have to define an separate up and down method:</p>\n\n<pre><code>class ChangeDefaultvalueForHideSeasonSelector &lt; ActiveRecord::Migration\n  def up\n    change_column_default :plussites, :hide_season_selector, true\n  end\n\n  def down\n    change_column_default :plussites, :hide_season_selector, false\n  end\nend\n</code></pre>\n\n<p>If you are on rails 5 or newer, there are new possibilities to define the value which was before and which one should be after by from/to (<a href=\"https://apidock.com/rails/v5.0.0.1/ActiveRecord/ConnectionAdapters/SchemaStatements/change_column_default\" rel=\"noreferrer\">change_column_default 5.0.0.1</a>). On rails 5 you ca use your chosen solution:</p>\n\n<pre><code>class ChangeDefaultvalueForHideSeasonSelector &lt; ActiveRecord::Migration \n  def change \n    change_column_default :plussites, :hide_season_selector, from: false, to: true \n  end\nend\n</code></pre>\n\n<p>I hope this explanation will help the people with comments under the other answer.</p>\n"}], "owner": {"reputation": 221, "user_id": 7208422, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/56353403defa7c406fe8af9e11b612ea?s=128&d=identicon&r=PG&f=1", "display_name": "Lory", "link": "https://stackoverflow.com/users/7208422/lory"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 13842, "favorite_count": 2, "accepted_answer_id": 42668450, "answer_count": 2, "score": 22, "last_activity_date": 1598481290, "creation_date": 1488967813, "last_edit_date": 1598481290, "question_id": 42668391, "link": "https://stackoverflow.com/questions/42668391/change-the-default-value-for-table-column-with-migration", "title": "Change the default value for table column with migration", "body": "<p>I try to change the default column value from false to true. But when I run <code>rake db:migrate VERSION=904984092840298</code> I got the following ERROR.</p>\n\n<pre><code>StandardError: An error has occurred, this and all later migrations canceled:\n\nPG::InvalidTextRepresentation: ERROR:  invalid input syntax for type boolean: \"---\n:from: false\n:to: true\n\"\n: ALTER TABLE \"plussites\" ALTER COLUMN \"hide_season_selector\" SET DEFAULT '---\n:from: false\n:to: true\n'\n</code></pre>\n\n<p>Migration</p>\n\n<pre><code>class ChangeDefaultvalueForHideSeasonSelector &lt; ActiveRecord::Migration \n  def change \n    change_column_default :plussites, :hide_season_selector, from: false, to: true \n  end\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "heroku"], "comments": [{"owner": {"reputation": 2755, "user_id": 1543985, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/h2xDy.jpg?s=128&g=1", "display_name": "RichardAE", "link": "https://stackoverflow.com/users/1543985/richardae"}, "edited": false, "score": 0, "creation_date": 1488966809, "post_id": 42667967, "comment_id": 72460851, "body": "Can you post your &#39;rake routes&#39; output and also the specific link you are trying to hit (with the domain blacked out if sensitive)?"}, {"owner": {"reputation": 2826, "user_id": 3179469, "user_type": "registered", "accept_rate": 58, "profile_image": "https://graph.facebook.com/100002493023511/picture?type=large", "display_name": "Elheni Mokhles", "link": "https://stackoverflow.com/users/3179469/elheni-mokhles"}, "reply_to_user": {"reputation": 2755, "user_id": 1543985, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/h2xDy.jpg?s=128&g=1", "display_name": "RichardAE", "link": "https://stackoverflow.com/users/1543985/richardae"}, "edited": false, "score": 0, "creation_date": 1488968572, "post_id": 42667967, "comment_id": 72462031, "body": "Nothing special there, all the routes for the case doesn&#39;t work i can see /resources/new and when hiting appname.herokuapp.com/resources/new it doesn&#39;t work"}, {"owner": {"reputation": 1281, "user_id": 2308531, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/DV29D.jpg?s=128&g=1", "display_name": "Maxim Fedotov", "link": "https://stackoverflow.com/users/2308531/maxim-fedotov"}, "edited": false, "score": 0, "creation_date": 1488969714, "post_id": 42667967, "comment_id": 72462790, "body": "Do you use roles? Perhaps you are using a user on Heroku without necessary permissions."}, {"owner": {"reputation": 9297, "user_id": 764546, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/OfNpk.jpg?s=128&g=1", "display_name": "MikDiet", "link": "https://stackoverflow.com/users/764546/mikdiet"}, "edited": false, "score": 1, "creation_date": 1488972062, "post_id": 42667967, "comment_id": 72464408, "body": "Do you use appropriate HTTP method? Some routes exist only for GET"}, {"owner": {"reputation": 2826, "user_id": 3179469, "user_type": "registered", "accept_rate": 58, "profile_image": "https://graph.facebook.com/100002493023511/picture?type=large", "display_name": "Elheni Mokhles", "link": "https://stackoverflow.com/users/3179469/elheni-mokhles"}, "edited": false, "score": 0, "creation_date": 1488972725, "post_id": 42667967, "comment_id": 72464912, "body": "It&#39;s a resource created by &quot;generate scaffold&quot;, i can get other methods for the same resource (show and index)"}, {"owner": {"reputation": 3521, "user_id": 2521680, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/6D935.jpg?s=128&g=1", "display_name": "Rockwell Rice", "link": "https://stackoverflow.com/users/2521680/rockwell-rice"}, "edited": false, "score": 0, "creation_date": 1488974984, "post_id": 42667967, "comment_id": 72466582, "body": "if you run &quot;heroku logs --tail&quot; and then view the page are you getting an error or something that might be wrong with the page?"}, {"owner": {"reputation": 2826, "user_id": 3179469, "user_type": "registered", "accept_rate": 58, "profile_image": "https://graph.facebook.com/100002493023511/picture?type=large", "display_name": "Elheni Mokhles", "link": "https://stackoverflow.com/users/3179469/elheni-mokhles"}, "edited": false, "score": 0, "creation_date": 1488977265, "post_id": 42667967, "comment_id": 72468190, "body": "Nothing there, it&#39;s not an error it return a 404 header"}, {"owner": {"reputation": 1349, "user_id": 6163262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7f3655350c57cb94195d64808b7ba61?s=128&d=identicon&r=PG&f=1", "display_name": "whodini9", "link": "https://stackoverflow.com/users/6163262/whodini9"}, "edited": false, "score": 0, "creation_date": 1488984725, "post_id": 42667967, "comment_id": 72473581, "body": "Please post the code or error trail. It could be as simple as a typo but no one would ever know if we can&#39;t see what your code is. <a href=\"http://stackoverflow.com/help/how-to-ask\">stackoverflow.com/help/how-to-ask</a>"}, {"owner": {"reputation": 2826, "user_id": 3179469, "user_type": "registered", "accept_rate": 58, "profile_image": "https://graph.facebook.com/100002493023511/picture?type=large", "display_name": "Elheni Mokhles", "link": "https://stackoverflow.com/users/3179469/elheni-mokhles"}, "edited": false, "score": 0, "creation_date": 1488987529, "post_id": 42667967, "comment_id": 72475655, "body": "It&#39;s not, i tested in localhost and it works."}, {"owner": {"reputation": 5471, "user_id": 6019903, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/e7h7I.png?s=128&g=1", "display_name": "Brad", "link": "https://stackoverflow.com/users/6019903/brad"}, "edited": false, "score": 0, "creation_date": 1488990951, "post_id": 42667967, "comment_id": 72478295, "body": "Did you check your assets are precopmiled: <a href=\"http://stackoverflow.com/questions/13777310/heroku-the-page-you-were-looking-for-doesnt-exist?rq=1\" title=\"heroku the page you were looking for doesnt exist\">stackoverflow.com/questions/13777310/&hellip;</a>"}], "owner": {"reputation": 2826, "user_id": 3179469, "user_type": "registered", "accept_rate": 58, "profile_image": "https://graph.facebook.com/100002493023511/picture?type=large", "display_name": "Elheni Mokhles", "link": "https://stackoverflow.com/users/3179469/elheni-mokhles"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 305, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1491564502, "creation_date": 1488966599, "last_edit_date": 1491564502, "question_id": 42667967, "link": "https://stackoverflow.com/questions/42667967/the-page-you-were-looking-for-doesnt-exist-even-when-it-exists-in-rake-route", "title": "&quot;The page you were looking for doesn&#39;t exist&quot; even when it exists in &quot;rake routes&quot;", "body": "<p>When testing the app in localhost everything works.</p>\n\n<p>But in Heroku it shows the 404 page \"The page you were looking for doesn't exist.\" for some pages, others work fine.</p>\n\n<p>When running \"heroku rake routes --app appname\" I can see the route there.</p>\n\n<p>Any idea why this happen?</p>\n\n<p><strong>More details</strong></p>\n\n<p>Only when visiting /new and /edit in one resource this happens</p>\n\n<p><strong>Update</strong>\nIt was a Database probleme, I have some old record that doesn't have a value for some attributes </p>\n"}, {"tags": ["mysql", "ruby", "node.js", "linux"], "comments": [{"owner": {"reputation": 2005, "user_id": 3790725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ecba4e24af91dd454a6cebb8ee2941db?s=128&d=identicon&r=PG", "display_name": "Micha\u0142 Karpacki", "link": "https://stackoverflow.com/users/3790725/micha%c5%82-karpacki"}, "edited": false, "score": 0, "creation_date": 1491653106, "post_id": 42665186, "comment_id": 73654611, "body": "Do you want your server to get data from your devices and mux that into a single stream?"}, {"owner": {"reputation": 72, "user_id": 4141982, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a385a7ccdad3604f24177954ed5c4eb?s=128&d=identicon&r=PG&f=1", "display_name": "Lucas K", "link": "https://stackoverflow.com/users/4141982/lucas-k"}, "reply_to_user": {"reputation": 2005, "user_id": 3790725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ecba4e24af91dd454a6cebb8ee2941db?s=128&d=identicon&r=PG", "display_name": "Micha\u0142 Karpacki", "link": "https://stackoverflow.com/users/3790725/micha%c5%82-karpacki"}, "edited": false, "score": 0, "creation_date": 1491713737, "post_id": 42665186, "comment_id": 73671601, "body": "Is it possible? I&#39;m not familiar with data streaming. Please suggest a way to do it. Thanks"}, {"owner": {"reputation": 2005, "user_id": 3790725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ecba4e24af91dd454a6cebb8ee2941db?s=128&d=identicon&r=PG", "display_name": "Micha\u0142 Karpacki", "link": "https://stackoverflow.com/users/3790725/micha%c5%82-karpacki"}, "edited": false, "score": 0, "creation_date": 1491775146, "post_id": 42665186, "comment_id": 73689627, "body": "Well yes. One of the cases I did have in mind when I wrote Scramjet... I&#39;ll write an answer. :)"}], "answers": [{"comments": [{"owner": {"reputation": 72, "user_id": 4141982, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a385a7ccdad3604f24177954ed5c4eb?s=128&d=identicon&r=PG&f=1", "display_name": "Lucas K", "link": "https://stackoverflow.com/users/4141982/lucas-k"}, "edited": false, "score": 0, "creation_date": 1489053695, "post_id": 42667875, "comment_id": 72506815, "body": "Sorry. My previous question is a bit unclear. I have updated my question. Could you please check if you have any idea on that?"}], "tags": [], "owner": {"reputation": 7994, "user_id": 1625339, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b8ba46f911517c8b2ccc39e0be9050c0?s=128&d=identicon&r=PG", "display_name": "Aetherus", "link": "https://stackoverflow.com/users/1625339/aetherus"}, "is_accepted": false, "score": 0, "last_activity_date": 1488966691, "last_edit_date": 1488966691, "creation_date": 1488966328, "answer_id": 42667875, "question_id": 42665186, "link": "https://stackoverflow.com/questions/42665186/stream-data-for-users/42667875#42667875", "title": "Stream data for users", "body": "<p>I feel that the CPU may not be the bottleneck because most of the time your application is just handling IO (streaming network data to files). However, you should consider your bandwidth and you'll have to scale out when the bandwidth become the bottleneck. In such case, a traditional reverse proxy won't help. You have to do some DNS tricks such as round robin DNS, to dispatch your clients evenly to your servers, and let them connect to your servers DIRECTLY.</p>\n\n<p>I suggest not to use a database to store those logs. Plain text files will be good enough. You can create a crontab job to periodically parse those files and update database if necessary.</p>\n\n<p>I recommend not to use Ruby. Node.js is good in this situation due to its async IO, which allows you to handle thousands of such connections in just one thread.</p>\n"}, {"tags": [], "owner": {"reputation": 2005, "user_id": 3790725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ecba4e24af91dd454a6cebb8ee2941db?s=128&d=identicon&r=PG", "display_name": "Micha\u0142 Karpacki", "link": "https://stackoverflow.com/users/3790725/micha%c5%82-karpacki"}, "is_accepted": true, "score": 1, "last_activity_date": 1491776031, "creation_date": 1491776031, "answer_id": 43312493, "question_id": 42665186, "link": "https://stackoverflow.com/questions/42665186/stream-data-for-users/43312493#43312493", "title": "Stream data for users", "body": "<p>Looking at your case I'd root for node.js too - keeping an open connection works well in asynchronous frameworks and Ruby doesn't seem very fit (but then I'm not much into Ruby).</p>\n\n<p>Using <a href=\"https://www.npmjs.com/package/scramjet\" rel=\"nofollow noreferrer\">Scramjet</a> this would be pretty easy, but keep in mind that both parties have to keep an open connection anyway, so it's not the node app itself. I understand that your case is that your node app will actively open connections to a number of devices with the given credentials and these devices will then respond with a never ending stream over http, a bit like Twitter's streaming API's... then the implementation would look a little like this:</p>\n\n<pre><code>new scramjet.MultiStream(devicesList.map(\n     (device) =&gt; request.post(device, credentials)\n          .pipe(new StringStream())\n          .split(\"\\r?\\n\") // or however you'd read your messages\n          .parse(JSON.parse) // or however you'd parse your data\n          .assign({deviceId: device.id}) // you'll probably need this\n))\n.mux(/* optionally an ordering function */)\n// above there's a single stream with all the logs from all your devices.\n</code></pre>\n\n<p>If this is the other way round and the devices are calling the server, then take a look at <a href=\"https://github.com/MichalCz/scramjet-http-uristream\" rel=\"nofollow noreferrer\">scramjet-http-uristream</a> or <a href=\"https://github.com/MichalCz/scramjet-http-post\" rel=\"nofollow noreferrer\">scramjet-http-post</a> - it's a simple sever that just streams all uri's or posts that are posted to a server.</p>\n\n<p>I hope this helps. :)</p>\n"}], "owner": {"reputation": 72, "user_id": 4141982, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a385a7ccdad3604f24177954ed5c4eb?s=128&d=identicon&r=PG&f=1", "display_name": "Lucas K", "link": "https://stackoverflow.com/users/4141982/lucas-k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "accepted_answer_id": 43312493, "answer_count": 2, "score": 0, "last_activity_date": 1491776031, "creation_date": 1488957358, "last_edit_date": 1489052761, "question_id": 42665186, "link": "https://stackoverflow.com/questions/42665186/stream-data-for-users", "title": "Stream data for users", "body": "<p>I want to build a server that could stream data from multiple endpoints simultaneously for analytics purposes.</p>\n\n<p>Scenario:\nusers registered on our platform will provide credentials of their IoT device. E.g <a href=\"https://stream.example.com/user1\" rel=\"nofollow noreferrer\">https://stream.example.com/user1</a> &amp; <a href=\"https://stream.example.com/user2\" rel=\"nofollow noreferrer\">https://stream.example.com/user2</a></p>\n\n<p>Our responsibility is to monitor the device log and status in order to generate reports.</p>\n\n<p>Questions:\nSince each stream will keep a HTTP connection open, how can I make a node.js or ruby app to open serval HTTP stream?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord", "sql-order-by", "rails-activerecord"], "comments": [{"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 1, "creation_date": 1488956578, "post_id": 42664738, "comment_id": 72455088, "body": "So given just <code>r</code> where <code>r = M.order(:a)</code> you want to say <code>r.something(:b)</code> and get the effect of <code>M.order(:b).order(:a)</code> rather than the <code>M.order(:a).order(:b)</code> that <code>r.order(:b)</code> would give you, right?"}, {"owner": {"reputation": 12440, "user_id": 308731, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/eQxFn.jpg?s=128&g=1", "display_name": "Eyeslandic", "link": "https://stackoverflow.com/users/308731/eyeslandic"}, "edited": false, "score": 0, "creation_date": 1488965015, "post_id": 42664738, "comment_id": 72459646, "body": "Since there are only 10 records you could sort them in Ruby too with <code>@products.sort_by(&amp;:featured)</code>, or am I misunderstanding the output you want perhaps."}, {"owner": {"reputation": 1513, "user_id": 5746504, "user_type": "registered", "accept_rate": 91, "profile_image": "https://lh6.googleusercontent.com/-4c57-sWfrFM/AAAAAAAAAAI/AAAAAAAACog/XNKIq-S6CDg/photo.jpg?sz=128", "display_name": "Moamen Naanou", "link": "https://stackoverflow.com/users/5746504/moamen-naanou"}, "reply_to_user": {"reputation": 12440, "user_id": 308731, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/eQxFn.jpg?s=128&g=1", "display_name": "Eyeslandic", "link": "https://stackoverflow.com/users/308731/eyeslandic"}, "edited": false, "score": 0, "creation_date": 1488965903, "post_id": 42664738, "comment_id": 72460215, "body": "@Iceman <code>sort_by</code> result is Array and I&#39;m expecting <code>ActiveRecord_Relation</code> and also <code>sort_by</code> doesn&#39;t work with <code>boolean</code>"}, {"owner": {"reputation": 12440, "user_id": 308731, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/eQxFn.jpg?s=128&g=1", "display_name": "Eyeslandic", "link": "https://stackoverflow.com/users/308731/eyeslandic"}, "edited": false, "score": 0, "creation_date": 1488966049, "post_id": 42664738, "comment_id": 72460320, "body": "Ahh, ok, just an idea, didn&#39;t read your question well enough."}], "answers": [{"comments": [{"owner": {"reputation": 1513, "user_id": 5746504, "user_type": "registered", "accept_rate": 91, "profile_image": "https://lh6.googleusercontent.com/-4c57-sWfrFM/AAAAAAAAAAI/AAAAAAAACog/XNKIq-S6CDg/photo.jpg?sz=128", "display_name": "Moamen Naanou", "link": "https://stackoverflow.com/users/5746504/moamen-naanou"}, "edited": false, "score": 0, "creation_date": 1489034599, "post_id": 42675778, "comment_id": 72497131, "body": "This doesn&#39;t help in my scenario, my question is about modifying the <code>ORDER BY</code> chain, and need to be implemented on a subset (scoped already) and I need to do it in generic way(not for each category separately)."}, {"owner": {"reputation": 1513, "user_id": 5746504, "user_type": "registered", "accept_rate": 91, "profile_image": "https://lh6.googleusercontent.com/-4c57-sWfrFM/AAAAAAAAAAI/AAAAAAAACog/XNKIq-S6CDg/photo.jpg?sz=128", "display_name": "Moamen Naanou", "link": "https://stackoverflow.com/users/5746504/moamen-naanou"}, "edited": false, "score": 0, "creation_date": 1489034698, "post_id": 42675778, "comment_id": 72497168, "body": "You can check @mu_is_too_short comment, it summarizes my question in a pretty &amp; simple way."}], "tags": [], "owner": {"reputation": 176, "user_id": 1222465, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52adc6862b6d7f0cd83a6cd10d89cd2d?s=128&d=identicon&r=PG", "display_name": "armahillo", "link": "https://stackoverflow.com/users/1222465/armahillo"}, "is_accepted": false, "score": 1, "last_activity_date": 1488987960, "creation_date": 1488987960, "answer_id": 42675778, "question_id": 42664738, "link": "https://stackoverflow.com/questions/42664738/change-order-by-chain-on-activerecord-subset/42675778#42675778", "title": "Change &#39;ORDER BY&#39; Chain on ActiveRecord Subset", "body": "<p>Is there a reason you're not using <code>scope</code> chaining here? This seems like a perfect case to use it in. The use of <code>enum</code> is unclear, as well. </p>\n\n<p>Something like this:</p>\n\n<pre><code># /app/models/product.rb\nclass Product &lt; ActiveRecord::Base\n scope :recent, { order(created_at: :desc) }\n scope :cheapest, { order(price: :asc) }\n scope :most_expensive, { order(price: :desc) }\n scope :popular, { order(popularity: :desc) }\n scope :featured, { where(featured: true) }\nend\n</code></pre>\n\n<p>Then in your controller you could do:</p>\n\n<pre><code># /app/controllers/products_controller.rb\n...\nProduct.featured.cheapest.limit(10)\nProduct.featured.most_expensive.limit(10)\n...\n</code></pre>\n\n<p>and so on.</p>\n\n<p>AREL should build the query correctly, and IIRC you can swap the sequence of the scopes (<code>featured</code> after <code>cheapest</code>, for example) if you want them to be applied differently.</p>\n"}], "owner": {"reputation": 1513, "user_id": 5746504, "user_type": "registered", "accept_rate": 91, "profile_image": "https://lh6.googleusercontent.com/-4c57-sWfrFM/AAAAAAAAAAI/AAAAAAAACog/XNKIq-S6CDg/photo.jpg?sz=128", "display_name": "Moamen Naanou", "link": "https://stackoverflow.com/users/5746504/moamen-naanou"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 740, "favorite_count": 0, "answer_count": 1, "score": 5, "last_activity_date": 1576390166, "creation_date": 1488955704, "last_edit_date": 1576390166, "question_id": 42664738, "link": "https://stackoverflow.com/questions/42664738/change-order-by-chain-on-activerecord-subset", "title": "Change &#39;ORDER BY&#39; Chain on ActiveRecord Subset", "body": "<p><strong><em>Background:</em></strong></p>\n\n<p>I have <code>Product</code> model which includes 4 categories</p>\n\n<pre><code>class Product &lt; ActiveRecord::Base\n  enum category: [:recent, :cheapest, :most_expensive, :popular]\nend\n</code></pre>\n\n<p>I've implemented a custom <code>ORDER BY</code> for each category with pagination (<code>LIMIT 10</code>), so when I'm getting products list, I'm getting multiple <code>SQL</code> queries with different <code>ORDER BY</code> in each query like this:</p>\n\n<p><strong>recent:</strong>\n<code>SELECT  \"products\".* FROM \"products\" ORDER BY \"products\".\"created_at\" DESC LIMIT 10</code></p>\n\n<p><strong>cheapest:</strong><code>SELECT  \"products\".* FROM \"products\" ORDER BY \"products\".\"price\" ASC LIMIT 10</code></p>\n\n<p><strong>most_expensive:</strong> <code>SELECT  \"products\".* FROM \"products\" ORDER BY \"products\".\"price\" DESC LIMIT 10</code></p>\n\n<p><strong>popular:</strong> <code>SELECT  \"products\".* FROM \"products\" ORDER BY \"products\".\"popularity\" DESC, \"products\".\"created_at\" DESC LIMIT 10</code></p>\n\n<p>So as mentioned, each of the above queries, results a <code>Product::ActiveRecord_Relation</code> contains 10 products with different order for each query.</p>\n\n<p><strong><em>Question:</em></strong></p>\n\n<p>I've added new column to <code>Product</code> model which is <code>featured</code> with boolean value, and I need to apply <code>ORDER BY featured DESC</code> at the beginning of each query with keeping the other <code>ORDER BY</code> fields as it is(i.e. popular query should be like this <code>SELECT  \"products\".* FROM \"products\" ORDER BY \"products\".\"featured\" DESC, \"products\".\"popularity\" DESC, \"products\".\"created_at\" DESC LIMIT 10</code>).</p>\n\n<p><strong>Note:</strong> <code>ORDER BY featured DESC</code> is just appended at the beginning of the previous <code>ORDER BY</code> statement, and it is applied on the subset not on the whole model.</p>\n\n<p><strong><em>What I have tried?</em></strong></p>\n\n<p>I have tried the following scenarios:</p>\n\n<ul>\n<li>Add <code>@products = @products.order(featured: :desc)</code> in the controller but the result is not as expected because it adds the order to the end of existing order by chain.</li>\n<li>Use <code>default_scope</code> in Product model <code>default_scope { order(featured: :desc) }</code> but the result is not as expected because it implements the order on the whole model, but the expected result is applying the order only on the subset(10 records).</li>\n<li>using <code>reorder</code> in the controller <code>@products = @products.reorder('').order(featured: :desc)</code> but the result still not as expected because this remove the old order and actually I need to keep it but at the end of <code>ORDER BY</code> chain</li>\n</ul>\n\n<p>The only solution I'm able to do is by using string variable to save previous order by chain, then use <code>reorder('').order(featured: :desc)</code> and finally append the string at the end of new <code>ORDER BY</code>:</p>\n\n<pre><code>current_order = @products.to_sql[@products.to_sql.downcase.index('order by')+8..@products.to_sql.downcase.index('limit')-1]\n@products = @products.reorder(\"featured desc, #{current_order}\" )\n</code></pre>\n\n<p><strong>But I'm sure there is a better solution which I need your support to achieve it.</strong></p>\n\n<p><strong>Summary:</strong></p>\n\n<p>As summarised in the comments below, I need the following implementation:</p>\n\n<p>Given just <code>r</code> where <code>r = M.order(:a)</code>, I want to run <code>r.something(:b)</code> and get the effect of <code>M.order(:b).order(:a)</code> rather than the <code>M.order(:a).order(:b)</code> that <code>r.order(:b)</code> would give you</p>\n"}, {"tags": ["html", "ruby-on-rails", "ruby", "excel"], "answers": [{"comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1488956266, "post_id": 42664814, "comment_id": 72454916, "body": "Also <code>p @renglon_excel[8]</code> if you&#39;re ever curious what that value is."}], "tags": [], "owner": {"reputation": 19261, "user_id": 4758119, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/F4dJY.jpg?s=128&g=1", "display_name": "Deepak Mahakale", "link": "https://stackoverflow.com/users/4758119/deepak-mahakale"}, "is_accepted": true, "score": 1, "last_activity_date": 1488956046, "creation_date": 1488956046, "answer_id": 42664814, "question_id": 42664473, "link": "https://stackoverflow.com/questions/42664473/error-accessing-data-from-an-array-in-ruby-on-rails/42664814#42664814", "title": "Error accessing data from an array in ruby \u200bon rails", "body": "<p>You are getting the error because <code>@renglon_excel</code> is <code>nil</code> for that specific iteration</p>\n\n<pre><code>@renglon_excel[8]\n</code></pre>\n\n<p>And you are trying to access with index of [8] on <code>nil</code></p>\n\n<p>To avoid this you can add a check</p>\n\n<pre><code>@renglon_excel = @wk.rows[index_renglon]\nnext unless @renglon_excel\narea = @renglon_excel[8]\n</code></pre>\n"}], "owner": {"reputation": 39, "user_id": 7502107, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ehPY2.jpg?s=128&g=1", "display_name": "Mike", "link": "https://stackoverflow.com/users/7502107/mike"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "accepted_answer_id": 42664814, "answer_count": 1, "score": 1, "last_activity_date": 1488956246, "creation_date": 1488954673, "last_edit_date": 1488956246, "question_id": 42664473, "link": "https://stackoverflow.com/questions/42664473/error-accessing-data-from-an-array-in-ruby-on-rails", "title": "Error accessing data from an array in ruby \u200bon rails", "body": "<p>The error tells me that the method '[]' is not defined in the line 127\n<br>this is my code and Idon't see the error</p>\n\n<pre><code>def verificar_area archivo\nbandera= false\nSpreadsheet.client_encoding = 'UTF-8'\nbook = Spreadsheet.open archivo\n@wk = book.worksheet 0\n\nareas = [\"Secundaria\",\n\"Preparatoria\",\n\"Universitario\",\n\"Edad 11 a 15 a\u00f1os\",\n\"Edad de 16 a 19 a\u00f1os\",\n\"Solo estudian\",\n\"Adolescentes que trabajan y estudian\"]\n\n(1 .. @wk.row_count).each do |index_renglon|\n  @renglon_excel = @wk.rows[index_renglon]\n  area=@renglon_excel[8]                        #This is the line 127\n    if areas.include?(area)\n      bandera=true\n    else\n      bandera=false\n      break\n    end #fin if\n  end #fin for\n  return bandera\nend\n</code></pre>\n\n<p>the error in the browser is this\n<img src=\"https://i.stack.imgur.com/vWhjI.png\" alt=\"this is the line 127 =&gt; area=@renglon_excel[8] \" title=\"tooltip\"></p>\n"}, {"tags": ["ruby", "rhomobile", "rhodes"], "comments": [{"owner": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "edited": false, "score": 0, "creation_date": 1488960552, "post_id": 42664088, "comment_id": 72457163, "body": "<a href=\"http://stackoverflow.com/questions/10213152/how-to-access-database-and-create-table-in-rhomobile-framework\" title=\"how to access database and create table in rhomobile framework\">stackoverflow.com/questions/10213152/&hellip;</a>  <a href=\"http://docs.rhomobile.com/en/5.4/guide/rhom_ruby\" rel=\"nofollow noreferrer\">docs.rhomobile.com/en/5.4/guide/rhom_ruby</a>"}, {"owner": {"reputation": 23, "user_id": 5093387, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/52e8c59452e042e453f693ccadef55ea?s=128&d=identicon&r=PG&f=1", "display_name": "vivek sharma", "link": "https://stackoverflow.com/users/5093387/vivek-sharma"}, "reply_to_user": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "edited": false, "score": 0, "creation_date": 1489140585, "post_id": 42664088, "comment_id": 72551574, "body": "@Casper the sqlite where data is saved is not coming same every time. At   one time it was syncdblocal.sqlite. After creating table through fixed schema method it is being saved in syncdbuser.sqlite"}, {"owner": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "edited": false, "score": 0, "creation_date": 1489142390, "post_id": 42664088, "comment_id": 72552756, "body": "Sorry Vivek, I&#39;m not familiar with RhoMobile. I tried to find what I could through the docs, but it wasn&#39;t much :("}], "owner": {"reputation": 23, "user_id": 5093387, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/52e8c59452e042e453f693ccadef55ea?s=128&d=identicon&r=PG&f=1", "display_name": "vivek sharma", "link": "https://stackoverflow.com/users/5093387/vivek-sharma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 61, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1488953012, "creation_date": 1488953012, "question_id": 42664088, "link": "https://stackoverflow.com/questions/42664088/how-to-create-database-sqlite-file-in-rhomobile-suite", "title": "How to create database (SQLite file) in RhoMobile Suite", "body": "<p>I am new to Rhomobile.\nI am developing a mobile app (ruby code). I want to create a database, add some elements and finally show those elements on the view page. How to go with this?</p>\n\n<p>Also what is the location of .sqlite file where our database is stored and is its name.</p>\n"}, {"tags": ["ruby", "string", "sorting"], "comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1488948288, "post_id": 42663053, "comment_id": 72451837, "body": "Considering that <code>&quot;0123&quot;.to_i #=&gt; 123</code> and <code>&quot;123&quot;.to_i #=&gt; 123</code>, why does your &quot;expected output&quot; have <code>&quot;0123&quot;</code> preceding <code>&quot;123&quot;</code>?"}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 1, "creation_date": 1488948846, "post_id": 42663053, "comment_id": 72452040, "body": "What is the logic behind your sorting?"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1488949863, "post_id": 42663053, "comment_id": 72452397, "body": "You question is a bit unclear. I think you might mean the following: &quot;I want to sort the array of strings (in place) so that if the elements of the resulting array were converted to integers they would be in <a href=\"https://www.reference.com/math/meaning-numerical-order-7099285d76ee357b\" rel=\"nofollow noreferrer\">numerical order</a>, but I do not want to convert the strings to integers in the sort operation&quot;."}], "answers": [{"comments": [{"owner": {"reputation": 67, "user_id": 5138156, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb412309d3d954275308120b6c236d37?s=128&d=identicon&r=PG&f=1", "display_name": "Chirag Agrawal", "link": "https://stackoverflow.com/users/5138156/chirag-agrawal"}, "edited": false, "score": 3, "creation_date": 1488947871, "post_id": 42663099, "comment_id": 72451749, "body": "But, I dont want to convert it to integer."}, {"owner": {"reputation": 1254, "user_id": 4576274, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/F5Wnd.jpg?s=128&g=1", "display_name": "Pramod", "link": "https://stackoverflow.com/users/4576274/pramod"}, "edited": false, "score": 0, "creation_date": 1488947926, "post_id": 42663099, "comment_id": 72451764, "body": "You have to convert it into integer to compare the values and sort"}, {"owner": {"reputation": 67, "user_id": 5138156, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb412309d3d954275308120b6c236d37?s=128&d=identicon&r=PG&f=1", "display_name": "Chirag Agrawal", "link": "https://stackoverflow.com/users/5138156/chirag-agrawal"}, "reply_to_user": {"reputation": 1254, "user_id": 4576274, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/F5Wnd.jpg?s=128&g=1", "display_name": "Pramod", "link": "https://stackoverflow.com/users/4576274/pramod"}, "edited": false, "score": 0, "creation_date": 1488948108, "post_id": 42663099, "comment_id": 72451799, "body": "@Pramod That is what requirement is. I can&#39;t."}, {"owner": {"reputation": 1528, "user_id": 7573791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e5e5cf864fb33229ca56750a51d6674?s=128&d=identicon&r=PG&f=1", "display_name": "Sajin", "link": "https://stackoverflow.com/users/7573791/sajin"}, "edited": false, "score": 0, "creation_date": 1488948246, "post_id": 42663099, "comment_id": 72451825, "body": "If a = [&quot;1&quot;, &quot;5&quot;, &quot;10&quot;, &quot;50&quot;], a.sort = [&quot;1&quot;, &quot;10&quot;, &quot;5&quot;, &quot;50&quot;], a.sort_by!(&amp;:to_i) = [&quot;1&quot;, &quot;5&quot;, &quot;10&quot;, &quot;50&quot;]"}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "reply_to_user": {"reputation": 67, "user_id": 5138156, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb412309d3d954275308120b6c236d37?s=128&d=identicon&r=PG&f=1", "display_name": "Chirag Agrawal", "link": "https://stackoverflow.com/users/5138156/chirag-agrawal"}, "edited": false, "score": 0, "creation_date": 1488964639, "post_id": 42663099, "comment_id": 72459412, "body": "@ChiragAgrawal : Just to make it clear. This does not convert the array to integers. It just uses temporary integers to sort the array, and sorts the array in place. Array isn&#39;t converted to an integer array."}], "tags": [], "owner": {"reputation": 1528, "user_id": 7573791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e5e5cf864fb33229ca56750a51d6674?s=128&d=identicon&r=PG&f=1", "display_name": "Sajin", "link": "https://stackoverflow.com/users/7573791/sajin"}, "is_accepted": false, "score": 1, "last_activity_date": 1488947666, "creation_date": 1488947666, "answer_id": 42663099, "question_id": 42663053, "link": "https://stackoverflow.com/questions/42663053/sort-array-of-strings-without-converting-them-into-integer/42663099#42663099", "title": "Sort array of strings without converting them into integer", "body": "<p>I think this will do the trick</p>\n\n<pre><code>array.sort_by!(&amp;:to_i)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 67, "user_id": 5138156, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb412309d3d954275308120b6c236d37?s=128&d=identicon&r=PG&f=1", "display_name": "Chirag Agrawal", "link": "https://stackoverflow.com/users/5138156/chirag-agrawal"}, "edited": false, "score": 0, "creation_date": 1488953712, "post_id": 42663242, "comment_id": 72453763, "body": "Thanks for the answer, this is what I want."}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": true, "score": 4, "last_activity_date": 1488948595, "creation_date": 1488948595, "answer_id": 42663242, "question_id": 42663053, "link": "https://stackoverflow.com/questions/42663053/sort-array-of-strings-without-converting-them-into-integer/42663242#42663242", "title": "Sort array of strings without converting them into integer", "body": "<p>If you cannot convert a string to an integer within <a href=\"http://ruby-doc.org/core-2.3.0/Array.html#method-i-sort_by-21\" rel=\"nofollow noreferrer\">Array#sort_by!</a>'s block, you could pad the strings to the left with zeroes (using <a href=\"http://ruby-doc.org/core-2.3.0/String.html#method-i-rjust\" rel=\"nofollow noreferrer\">String#rjust</a>) so they are all the same length, then sort on those padded strings.</p>\n\n<pre><code>n = array.map(&amp;:size).max\n  #=&gt; 4\narray.sort_by! { |s| s.rjust(n, '0') }\n  #=&gt; [\"123\", \"0123\", \"0934\", \"934\"]\n</code></pre>\n\n<p>Note</p>\n\n<pre><code>array.map { |s| s.rjust(n, '0') }\n  #=&gt; [\"0934\", \"0123\", \"0934\", \"0123\"]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 67, "user_id": 5138156, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb412309d3d954275308120b6c236d37?s=128&d=identicon&r=PG&f=1", "display_name": "Chirag Agrawal", "link": "https://stackoverflow.com/users/5138156/chirag-agrawal"}, "edited": false, "score": 0, "creation_date": 1488949071, "post_id": 42663249, "comment_id": 72452108, "body": "Please check the question again, as the expected output is [&quot;0123&quot;, &quot;123&quot;, &quot;0934&quot;, &quot;934&quot;]"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1488949158, "post_id": 42663249, "comment_id": 72452129, "body": "I think the OP wants the sorted strings <code>s</code> to be in <code>s.to_i</code> order, but does not want to convert the strings to integers in the sort operation."}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1488949214, "post_id": 42663249, "comment_id": 72452159, "body": "@CarySwoveland That contradicts with the claim that the OP does not want to convert to integers."}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "reply_to_user": {"reputation": 67, "user_id": 5138156, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb412309d3d954275308120b6c236d37?s=128&d=identicon&r=PG&f=1", "display_name": "Chirag Agrawal", "link": "https://stackoverflow.com/users/5138156/chirag-agrawal"}, "edited": false, "score": 0, "creation_date": 1488949288, "post_id": 42663249, "comment_id": 72452187, "body": "@ChiragAgrawal No, I won&#39;t check it again. I have checked it so many times already. As I wrote, your expected output is wrong. Otherwise, write your logic behind sorting."}], "tags": [], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "is_accepted": false, "score": 1, "last_activity_date": 1488949510, "last_edit_date": 1488949510, "creation_date": 1488948624, "answer_id": 42663249, "question_id": 42663053, "link": "https://stackoverflow.com/questions/42663053/sort-array-of-strings-without-converting-them-into-integer/42663249#42663249", "title": "Sort array of strings without converting them into integer", "body": "<p>It is as easy as this:</p>\n\n<pre><code>array.sort\n# =&gt; [\"0123\", \"0934\", \"123\", \"934\"]\n</code></pre>\n\n<p>By the way, your expected answer is wrong.</p>\n\n<p><strong>Edit</strong></p>\n\n<p>Okay, I think I finally got your intention. That is, you wanted the array to be sorted by the values yielded by reading the elements as floats, and then by the descending order of their length.</p>\n\n<pre><code>array.sort_by{|e| [e.to_f, -e.length]}\n# =&gt; [\"0123\", \"123\", \"0934\", \"934\"]\n</code></pre>\n\n<p>Come on, you needed to write so in the question from the first place. Don't expect that many people can arrive at such non-trivial requirements by reading between the lines.</p>\n"}], "owner": {"reputation": 67, "user_id": 5138156, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb412309d3d954275308120b6c236d37?s=128&d=identicon&r=PG&f=1", "display_name": "Chirag Agrawal", "link": "https://stackoverflow.com/users/5138156/chirag-agrawal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 130, "favorite_count": 0, "accepted_answer_id": 42663242, "answer_count": 3, "score": -2, "last_activity_date": 1488949510, "creation_date": 1488947397, "last_edit_date": 1488948656, "question_id": 42663053, "link": "https://stackoverflow.com/questions/42663053/sort-array-of-strings-without-converting-them-into-integer", "title": "Sort array of strings without converting them into integer", "body": "<p>I have an array of strings expressing integer values:</p>\n\n<pre><code>array = [\"0934\", \"123\", \"934\", \"0123\"]\n</code></pre>\n\n<p>I want to sort the array without converting the strings into integers.\nThe expected output is:</p>\n\n<pre><code>array = [\"0123\", \"123\", \"0934\", \"934\"]\n</code></pre>\n\n<p>Please suggest how I can do that.</p>\n"}, {"tags": ["ruby", "imagemagick", "rmagick"], "comments": [{"owner": {"reputation": 1036, "user_id": 5078051, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/10203328378168774/picture?type=large", "display_name": "Hsiu Chuan Tsao", "link": "https://stackoverflow.com/users/5078051/hsiu-chuan-tsao"}, "edited": false, "score": 0, "creation_date": 1488952320, "post_id": 42662955, "comment_id": 72453206, "body": "<a href=\"https://github.com/JulienLeonard/XRVG\" rel=\"nofollow noreferrer\">github.com/JulienLeonard/XRVG</a>"}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 2, "creation_date": 1488965020, "post_id": 42662955, "comment_id": 72459650, "body": "It&#39;s not an ellipse, it&#39;s an <a href=\"https://en.wikipedia.org/wiki/Annulus_(mathematics)\" rel=\"nofollow noreferrer\">annulus</a>. With <a href=\"https://en.wikipedia.org/wiki/Polar_coordinate_system\" rel=\"nofollow noreferrer\">polar coordinates</a>, it really wouldn&#39;t be hard to calculate the corresponding coordinates. You&#39;ll have to use <code>r*cos(alpha)</code> and <code>r*sin(alpha)</code>, and that&#39;s about it."}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1488965151, "post_id": 42662955, "comment_id": 72459731, "body": "This might interest you <a href=\"http://stackoverflow.com/questions/11479185/svg-donut-slice-as-path-element-annular-sector\" title=\"svg donut slice as path element annular sector\">stackoverflow.com/questions/11479185/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 144829, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "is_accepted": false, "score": 0, "last_activity_date": 1488981518, "last_edit_date": 1488981518, "creation_date": 1488980195, "answer_id": 42672826, "question_id": 42662955, "link": "https://stackoverflow.com/questions/42662955/how-to-draw-an-annulus-with-many-segments/42672826#42672826", "title": "How to draw an Annulus with many segments", "body": "<p>Not sure if this fits the bill, but it may be worth a look:</p>\n\n<pre><code>convert  -size 600x50  xc:black xc:yellow                    \\\n      \\( -size 200x100 xc:lime xc:cyan xc:magenta +append \\) \\\n         -size 600x25 xc:red -size 600x10 xc:blue -append result.png\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/UZBY1.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/UZBY1.png\" alt=\"enter image description here\"></a></p>\n\n<p>Now go polar, by changing the last line!</p>\n\n<pre><code>convert -size 600x50 xc:black xc:yellow                    \\\n    \\( -size 200x100 xc:lime xc:cyan xc:magenta +append \\) \\\n      -size 600x25 xc:red -size 600x10 xc:blue -append     \\\n      -background none -virtual-pixel none -distort polar 0 result.png\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/qWyYa.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/qWyYa.png\" alt=\"enter image description here\"></a></p>\n\n<p>Or with spacers:</p>\n\n<pre><code>convert -size 600x50 xc:black xc:yellow xc:none[600x20\\!] \\( -size 180x100 xc:lime xc:none[20x100\\!] xc:cyan xc:none[20x100\\!] xc:magenta xc:none[20x100\\!] +append \\) xc:none[600x30\\!] -size 600x25 xc:red -size 600x10 xc:blue -append -background none -virtual-pixel none -distort polar 0 result.png\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/oRkKk.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/oRkKk.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 199, "user_id": 4439398, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9863c83d87eb9f9cbfaa03f5b68676d7?s=128&d=identicon&r=PG&f=1", "display_name": "Buddy Lamers", "link": "https://stackoverflow.com/users/4439398/buddy-lamers"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 100, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1547399521, "creation_date": 1488946745, "last_edit_date": 1547399521, "question_id": 42662955, "link": "https://stackoverflow.com/questions/42662955/how-to-draw-an-annulus-with-many-segments", "title": "How to draw an Annulus with many segments", "body": "<p>I want to draw an ellipse made out of many sections, such as this:\n<a href=\"https://i.stack.imgur.com/VonmS.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/VonmS.png\" alt=\"simple_ellipse\"></a></p>\n\n<p>The goal is to define with variables the outside and inside diameters, and number of segments, and have the program automatically determine the size and arrangement of the segments.</p>\n\n<p>I have been using rmagick to draw a square made of squares in the past, but I have realized that it becomes much more complicated when you need to factor in the inside and outside curves of the segments.</p>\n\n<p>I could see how I could make one image and \"copy/paste\" it around.</p>\n\n<p>I am hoping there might be another gem/library which I could use for this that would have some built-in circle methods.</p>\n\n<p>It seems like I could draw them using RVG (ruby vector graphics).\nI could use the polygon method, but that would require calculating the exact x/y coordinates of the points.\nI could also use a \"path\": <a href=\"http://www.w3.org/TR/SVG11/paths.html\" rel=\"nofollow noreferrer\">http://www.w3.org/TR/SVG11/paths.html</a>\nwhich would allow bezier curves and elliptical arcs</p>\n\n<p>Any of these methods seem like they would involve a lot of calculation.</p>\n\n<p>My idea is to:</p>\n\n<ol>\n<li>calculate an inside circle, and an outside circle</li>\n<li>use the points on those to get the 4 \"corners\", </li>\n</ol>\n\n<p>This would still need to account for the curved edges. If I picked values larger than the \"corners\", then I could draw in an inside and outside circle to trim them down.</p>\n\n<p>However, that seems like it is beating the problem with a stick.</p>\n\n<p>Ideally, I would like to move on to more advanced drawings as well, such as:\n<a href=\"https://i.stack.imgur.com/oTbik.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/oTbik.png\" alt=\"medium_difficulty_elipse\"></a></p>\n\n<p>or even\n<a href=\"https://i.stack.imgur.com/i5Gpg.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/i5Gpg.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>Is there any library/gem or even a process which I may be overlooking, that would make this simpler?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 1254, "user_id": 4576274, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/F5Wnd.jpg?s=128&g=1", "display_name": "Pramod", "link": "https://stackoverflow.com/users/4576274/pramod"}, "edited": false, "score": 0, "creation_date": 1488945656, "post_id": 42662639, "comment_id": 72451107, "body": "Can you give a space between <code>name</code> and <code>Faker::Name</code>. It should be <code>name: Faker::Name.name</code>"}, {"owner": {"reputation": 622, "user_id": 5279783, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/22c1cf8adcf189149e03f48a25a43e5f?s=128&d=identicon&r=PG&f=1", "display_name": "Raidspec", "link": "https://stackoverflow.com/users/5279783/raidspec"}, "reply_to_user": {"reputation": 1254, "user_id": 4576274, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/F5Wnd.jpg?s=128&g=1", "display_name": "Pramod", "link": "https://stackoverflow.com/users/4576274/pramod"}, "edited": false, "score": 0, "creation_date": 1488947768, "post_id": 42662639, "comment_id": 72451718, "body": "I don&#39;t think spacing matters, but I tried it with the space and still nothing."}], "answers": [{"tags": [], "owner": {"reputation": 364, "user_id": 7414029, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/5HNys.jpg?s=128&g=1", "display_name": "Mihir Kumar Thakur", "link": "https://stackoverflow.com/users/7414029/mihir-kumar-thakur"}, "is_accepted": true, "score": 1, "last_activity_date": 1488946772, "creation_date": 1488946772, "answer_id": 42662961, "question_id": 42662639, "link": "https://stackoverflow.com/questions/42662639/rails-faker-gem-inside-controller-to-generate-fake-names/42662961#42662961", "title": "Rails - Faker gem inside controller to generate fake names", "body": "<p>Make sure you have installed faker gem outside test group in gem file.</p>\n\n<p>Then generate name with </p>\n\n<pre><code>Faker::Name.name\n</code></pre>\n"}], "owner": {"reputation": 622, "user_id": 5279783, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/22c1cf8adcf189149e03f48a25a43e5f?s=128&d=identicon&r=PG&f=1", "display_name": "Raidspec", "link": "https://stackoverflow.com/users/5279783/raidspec"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 360, "favorite_count": 0, "accepted_answer_id": 42662961, "answer_count": 1, "score": 0, "last_activity_date": 1488946772, "creation_date": 1488944870, "question_id": 42662639, "link": "https://stackoverflow.com/questions/42662639/rails-faker-gem-inside-controller-to-generate-fake-names", "title": "Rails - Faker gem inside controller to generate fake names", "body": "<p>I want to be able to add something like below to my ConversationsController. Is this possible?</p>\n\n<pre><code>Conversation.create(author_id: current_user.id,receiver_id: @receiver.id, name:Faker::Name.name)\n</code></pre>\n\n<p>But i'm getting an</p>\n\n<blockquote>\n  <p>uninitialized constant PersonalMessagesController::Faker error</p>\n</blockquote>\n"}, {"tags": ["ruby-on-rails", "ruby", "fuzzy-search"], "answers": [{"comments": [{"owner": {"reputation": 191, "user_id": 2259835, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/11e9cdb4c187d305ec6068f5ecd0595b?s=128&d=identicon&r=PG", "display_name": "phan ngoc", "link": "https://stackoverflow.com/users/2259835/phan-ngoc"}, "edited": false, "score": 0, "creation_date": 1488947548, "post_id": 42662819, "comment_id": 72451646, "body": "its sound terrible, now i must initialize fuzzy object then find, after that excluse founded item from collection and continue initialize new fuzzy object with new collection. @_@ .Do it have any option for 5 results approximately result."}], "tags": [], "owner": {"reputation": 1254, "user_id": 4576274, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/F5Wnd.jpg?s=128&g=1", "display_name": "Pramod", "link": "https://stackoverflow.com/users/4576274/pramod"}, "is_accepted": false, "score": 0, "last_activity_date": 1488945957, "creation_date": 1488945957, "answer_id": 42662819, "question_id": 42662545, "link": "https://stackoverflow.com/questions/42662545/how-to-get-5-result-from-fuzzy-match-gem/42662819#42662819", "title": "How to get 5 result from fuzzy match gem?", "body": "<p>Using <code>fuzzy_match</code> gem, You will have multiple result from <code>find</code> only when there are multiple string matching to the given input. You should go through <a href=\"http://numbers.brighterplanet.com/2012/01/18/fuzzy-match-in-ruby/\" rel=\"nofollow noreferrer\">this</a> documentation for more information.</p>\n"}], "owner": {"reputation": 191, "user_id": 2259835, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/11e9cdb4c187d305ec6068f5ecd0595b?s=128&d=identicon&r=PG", "display_name": "phan ngoc", "link": "https://stackoverflow.com/users/2259835/phan-ngoc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 874, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1488952378, "creation_date": 1488944358, "last_edit_date": 1488952378, "question_id": 42662545, "link": "https://stackoverflow.com/questions/42662545/how-to-get-5-result-from-fuzzy-match-gem", "title": "How to get 5 result from fuzzy match gem?", "body": "<p>Now, i am using gem <a href=\"https://github.com/seamusabshere/fuzzy_match\" rel=\"nofollow noreferrer\">https://github.com/seamusabshere/fuzzy_match</a>, but it only take 1 result for 1 call time. How do i can get 5 result instead ?\nThis is my code:</p>\n\n<pre><code>def related_ques\n  collect_ques = Question.joins(:question_topics)\n                 .where(\"topic_id in (?) and questions.id != ?\",self.topic_ids, self.id)\n  results = Array.new\n  Settings.question_page.num_related_ques.times do\n    fz = FuzzyMatch.new(collect_ques, read: :title)\n    question = fz.find(self.title)\n    results &lt;&lt; question unless question.nil?\n    collect_ques = collect_ques.to_a - [question]\n  end\n results\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 505, "user_id": 2657934, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b6bc88171631cd6745cd84281626de1?s=128&d=identicon&r=PG", "display_name": "eclipse1203", "link": "https://stackoverflow.com/users/2657934/eclipse1203"}, "edited": false, "score": 0, "creation_date": 1488943717, "post_id": 42662389, "comment_id": 72450546, "body": "Perfect, thank you. I&#39;m just beginning to learn Rails, would you mind briefly explaining the difference between the two code snippets you added?"}, {"owner": {"reputation": 6200, "user_id": 637094, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/fd50f61387b63900335c8556f86237be?s=128&d=identicon&r=PG", "display_name": "Leonel Gal&#225;n", "link": "https://stackoverflow.com/users/637094/leonel-gal%c3%a1n"}, "reply_to_user": {"reputation": 505, "user_id": 2657934, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b6bc88171631cd6745cd84281626de1?s=128&d=identicon&r=PG", "display_name": "eclipse1203", "link": "https://stackoverflow.com/users/2657934/eclipse1203"}, "edited": false, "score": 1, "creation_date": 1488943900, "post_id": 42662389, "comment_id": 72450587, "body": "Routes is a topic on it&#39;s own, the second is RESTFul and the other isn&#39;t, ultimately both defined the same route. For more information see the routing guide: <a href=\"http://guides.rubyonrails.org/routing.html\" rel=\"nofollow noreferrer\">guides.rubyonrails.org/routing.html</a>"}], "tags": [], "owner": {"reputation": 6200, "user_id": 637094, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/fd50f61387b63900335c8556f86237be?s=128&d=identicon&r=PG", "display_name": "Leonel Gal&#225;n", "link": "https://stackoverflow.com/users/637094/leonel-gal%c3%a1n"}, "is_accepted": false, "score": 1, "last_activity_date": 1488943326, "creation_date": 1488943326, "answer_id": 42662389, "question_id": 42662353, "link": "https://stackoverflow.com/questions/42662353/how-to-display-an-action-when-specifying-controller-url/42662389#42662389", "title": "How to display an action when specifying controller url", "body": "<p>You need a <code>get 'demo' =&gt; 'demo#index'</code> instead for that URL to work.</p>\n\n<p>That said, you might want to use Rails conventions and maybe pluralize the controller and use RESTful routes instead:</p>\n\n<p><code>resources :demos, only: :index</code></p>\n"}], "owner": {"reputation": 505, "user_id": 2657934, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b6bc88171631cd6745cd84281626de1?s=128&d=identicon&r=PG", "display_name": "eclipse1203", "link": "https://stackoverflow.com/users/2657934/eclipse1203"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 34, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1488943326, "creation_date": 1488943128, "question_id": 42662353, "link": "https://stackoverflow.com/questions/42662353/how-to-display-an-action-when-specifying-controller-url", "title": "How to display an action when specifying controller url", "body": "<p>I was wondering how to display an action when specifying a controller url. For example; say I have DemoController.rb, and views/demo/index.html.erb file. Also I've specified the route in routes.rb\n    get 'demo/index'</p>\n\n<p>How can I setup the project so that when I type \"localhost:3000/demo\" it renders the same layout as \"localhost:3000/demo/index\"?</p>\n\n<p>Currently when I type in \"localhost:3000/demo\" I get a \"no route matches\" error.</p>\n"}, {"tags": ["html", "css", "ruby", "sinatra", "erb"], "comments": [{"owner": {"reputation": 3048, "user_id": 1935052, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/exfdv.jpg?s=128&g=1", "display_name": "Afsar", "link": "https://stackoverflow.com/users/1935052/afsar"}, "edited": false, "score": 0, "creation_date": 1488946779, "post_id": 42662345, "comment_id": 72451417, "body": "do you have correct linking to css file ?"}, {"owner": {"reputation": 504, "user_id": 7024293, "user_type": "registered", "accept_rate": 68, "profile_image": "https://lh3.googleusercontent.com/-_iHS8SMGqHA/AAAAAAAAAAI/AAAAAAAAAbE/HudebqQ1IF4/photo.jpg?sz=128", "display_name": "stevensonmt", "link": "https://stackoverflow.com/users/7024293/stevensonmt"}, "reply_to_user": {"reputation": 3048, "user_id": 1935052, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/exfdv.jpg?s=128&g=1", "display_name": "Afsar", "link": "https://stackoverflow.com/users/1935052/afsar"}, "edited": false, "score": 0, "creation_date": 1488947954, "post_id": 42662345, "comment_id": 72451766, "body": "Yeah, not sure what the issue was, but restarting the server several times eventually got it to start working."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 1, "creation_date": 1490374382, "post_id": 42662345, "comment_id": 73099546, "body": "Odds are good that restarting the server didn&#39;t fix it. The browser flushing its cache and reloading the page probably helped, or a cache between the server and the browser finally updated. Making sure you run Sinatra in development mode while developing will help."}], "answers": [{"tags": [], "owner": {"reputation": 504, "user_id": 7024293, "user_type": "registered", "accept_rate": 68, "profile_image": "https://lh3.googleusercontent.com/-_iHS8SMGqHA/AAAAAAAAAAI/AAAAAAAAAbE/HudebqQ1IF4/photo.jpg?sz=128", "display_name": "stevensonmt", "link": "https://stackoverflow.com/users/7024293/stevensonmt"}, "is_accepted": false, "score": -1, "last_activity_date": 1488947926, "creation_date": 1488947926, "answer_id": 42663140, "question_id": 42662345, "link": "https://stackoverflow.com/questions/42662345/apply-css-style-to-flash-message/42663140#42663140", "title": "Apply CSS style to flash message", "body": "<p>Restarted server for fifth time and it started working. <em>shrug</em></p>\n"}], "owner": {"reputation": 504, "user_id": 7024293, "user_type": "registered", "accept_rate": 68, "profile_image": "https://lh3.googleusercontent.com/-_iHS8SMGqHA/AAAAAAAAAAI/AAAAAAAAAbE/HudebqQ1IF4/photo.jpg?sz=128", "display_name": "stevensonmt", "link": "https://stackoverflow.com/users/7024293/stevensonmt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1293, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1490374240, "creation_date": 1488943107, "last_edit_date": 1490374240, "question_id": 42662345, "link": "https://stackoverflow.com/questions/42662345/apply-css-style-to-flash-message", "title": "Apply CSS style to flash message", "body": "<p>My app is based on Sinatra.  I am using the sinatra-flash gem to generate flash messages if the user does not select enough items to compare.  This aspect of things works, but I cannot seem to apply the style I want to the messages.  Here is my css:</p>\n\n<pre><code>.warning {\n      background-color: #f89406;\n      border-color: #e96506;\n      color: #ffffff;\n    }\n</code></pre>\n\n<p>and the code from the view:</p>\n\n<pre><code>&lt;% if flash[:warning] %&gt;\n  &lt;div class=\"warning\"&gt;&lt;%= flash[:warning] %&gt;&lt;/div&gt;\n&lt;% end %&gt;\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"tags": [], "owner": {"reputation": 6200, "user_id": 637094, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/fd50f61387b63900335c8556f86237be?s=128&d=identicon&r=PG", "display_name": "Leonel Gal&#225;n", "link": "https://stackoverflow.com/users/637094/leonel-gal%c3%a1n"}, "is_accepted": false, "score": 1, "last_activity_date": 1488942900, "creation_date": 1488942900, "answer_id": 42662310, "question_id": 42662263, "link": "https://stackoverflow.com/questions/42662263/how-to-traverse-a-nested-association-without-typing-every-model-in-the-associati/42662310#42662310", "title": "How to traverse a nested association without typing every model in the association in rails", "body": "<p>Have you tried delegation?</p>\n\n<pre><code>delegate :modelb, to: :modelc\ndelegate :modela, to: :modelb\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 323, "user_id": 4054684, "user_type": "registered", "accept_rate": 38, "profile_image": "https://lh6.googleusercontent.com/-wjxce8yMONk/AAAAAAAAAAI/AAAAAAAAAgE/xD7t1kCNF4g/photo.jpg?sz=128", "display_name": "sreang rathanak", "link": "https://stackoverflow.com/users/4054684/sreang-rathanak"}, "is_accepted": false, "score": 0, "last_activity_date": 1488942968, "creation_date": 1488942968, "answer_id": 42662327, "question_id": 42662263, "link": "https://stackoverflow.com/questions/42662263/how-to-traverse-a-nested-association-without-typing-every-model-in-the-associati/42662327#42662327", "title": "How to traverse a nested association without typing every model in the association in rails", "body": "<p>The easiest way to do that is define method <code>modela</code> in model <code>Modeld</code>.</p>\n\n<pre><code>Modeld &lt; ActiveRecord::Base\n  belongs_to :modelc\n\n  def modela\n     self.modelc.try(:modelb).try(:modela)\n  end\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 283, "user_id": 7197373, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh3.googleusercontent.com/-8cxs3f-Mnnc/AAAAAAAAAAI/AAAAAAAAAFM/dixBEFMr-90/photo.jpg?sz=128", "display_name": "RamJet", "link": "https://stackoverflow.com/users/7197373/ramjet"}, "edited": false, "score": 0, "creation_date": 1488943593, "post_id": 42662350, "comment_id": 72450507, "body": "That only works in one direction. You can say <code>modela.modeld</code>, but not <code>modeld.modela</code>"}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "reply_to_user": {"reputation": 283, "user_id": 7197373, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh3.googleusercontent.com/-8cxs3f-Mnnc/AAAAAAAAAAI/AAAAAAAAAFM/dixBEFMr-90/photo.jpg?sz=128", "display_name": "RamJet", "link": "https://stackoverflow.com/users/7197373/ramjet"}, "edited": false, "score": 0, "creation_date": 1488944855, "post_id": 42662350, "comment_id": 72450868, "body": "You have it backwards. This will enable modeld.modela. With your models each modela has many modelbs and so on. So you couldnt make modela.modeld it would have to be modela.modelds. Besides you didnt say in your question that you wanted the invert"}, {"owner": {"reputation": 283, "user_id": 7197373, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh3.googleusercontent.com/-8cxs3f-Mnnc/AAAAAAAAAAI/AAAAAAAAAFM/dixBEFMr-90/photo.jpg?sz=128", "display_name": "RamJet", "link": "https://stackoverflow.com/users/7197373/ramjet"}, "edited": false, "score": 0, "creation_date": 1488948629, "post_id": 42662350, "comment_id": 72451972, "body": "First of all, my apologies to @maxple. Everything he says is correct. I just implemented it incorrectly. I had the forward association, i.e., <code>has_many :modelc, through: :modelb</code> etc, but not the reverse as he suggested. What do you think about @sreang rathanak and @Leito answer. They all seem to do the same thing. Which is best and why?"}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "reply_to_user": {"reputation": 283, "user_id": 7197373, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh3.googleusercontent.com/-8cxs3f-Mnnc/AAAAAAAAAAI/AAAAAAAAAFM/dixBEFMr-90/photo.jpg?sz=128", "display_name": "RamJet", "link": "https://stackoverflow.com/users/7197373/ramjet"}, "edited": false, "score": 0, "creation_date": 1488949063, "post_id": 42662350, "comment_id": 72452104, "body": "@RamJet  Each of the other answers ends up calling <code>modeld.modelc.modelb.modela</code> under the hood. That requires 3 SQL queries. Using the <code>through:</code> option, though, combines those queries into one using <code>INNER JOIN</code>."}], "tags": [], "owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "is_accepted": true, "score": 2, "last_activity_date": 1488943122, "creation_date": 1488943122, "answer_id": 42662350, "question_id": 42662263, "link": "https://stackoverflow.com/questions/42662263/how-to-traverse-a-nested-association-without-typing-every-model-in-the-associati/42662350#42662350", "title": "How to traverse a nested association without typing every model in the association in rails", "body": "<p>You can set up a chain using <code>has_one :through</code> (you could do implement <code>modela.modelds</code> similarly using <code>has_many :through</code>)</p>\n\n<pre><code>Modeld &lt; ActiveRecord::Base\n  belongs_to :modelc\n  has_one :modelb, through: :modelc\n  has_one :modela, through: :modelb\nend\n</code></pre>\n"}], "owner": {"reputation": 283, "user_id": 7197373, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh3.googleusercontent.com/-8cxs3f-Mnnc/AAAAAAAAAAI/AAAAAAAAAFM/dixBEFMr-90/photo.jpg?sz=128", "display_name": "RamJet", "link": "https://stackoverflow.com/users/7197373/ramjet"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 34, "favorite_count": 0, "accepted_answer_id": 42662350, "answer_count": 3, "score": 0, "last_activity_date": 1488943122, "creation_date": 1488942593, "question_id": 42662263, "link": "https://stackoverflow.com/questions/42662263/how-to-traverse-a-nested-association-without-typing-every-model-in-the-associati", "title": "How to traverse a nested association without typing every model in the association in rails", "body": "<p>Let's say I have</p>\n\n<pre><code>ModelA &lt; ActiveRecord::Base\n  has_many :modelb\nend\nModelB &lt; ActiveRecord::Base\n  has_many :modelc\n  belongs_to :modela\nend\nModelc &lt; ActiveRecord::Base\n  has_many :modeld\n  belongs_to :modelb\nend\nModeld &lt; ActiveRecord::Base\n  belongs_to :modelc\nend\n</code></pre>\n\n<p>I want to be able to write</p>\n\n<pre><code>modeld.modela\n</code></pre>\n\n<p>What's the best way of doing it?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 198293, "user_id": 707111, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oXZkh.jpg?s=128&g=1", "display_name": "Ry-", "link": "https://stackoverflow.com/users/707111/ry"}, "edited": false, "score": 0, "creation_date": 1488941408, "post_id": 42662060, "comment_id": 72449912, "body": "<code>return return_method</code>? Or do you want to print something?"}, {"owner": {"reputation": 383, "user_id": 6788712, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/029b6ef8f5217b509e0a61e48d5915c0?s=128&d=identicon&r=PG&f=1", "display_name": "norkuy", "link": "https://stackoverflow.com/users/6788712/norkuy"}, "reply_to_user": {"reputation": 198293, "user_id": 707111, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oXZkh.jpg?s=128&g=1", "display_name": "Ry-", "link": "https://stackoverflow.com/users/707111/ry"}, "edited": false, "score": 0, "creation_date": 1488941538, "post_id": 42662060, "comment_id": 72449945, "body": "I want to return return_method"}], "answers": [{"comments": [{"owner": {"reputation": 383, "user_id": 6788712, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/029b6ef8f5217b509e0a61e48d5915c0?s=128&d=identicon&r=PG&f=1", "display_name": "norkuy", "link": "https://stackoverflow.com/users/6788712/norkuy"}, "edited": false, "score": 0, "creation_date": 1488942298, "post_id": 42662111, "comment_id": 72450151, "body": "Thanks for your help. I&#39;m trying to get a better handle on how returns work in Ruby and I can&#39;t find anything online on how they work. Would you happen to know of any resources I could take a look at? Thanks again."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 383, "user_id": 6788712, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/029b6ef8f5217b509e0a61e48d5915c0?s=128&d=identicon&r=PG&f=1", "display_name": "norkuy", "link": "https://stackoverflow.com/users/6788712/norkuy"}, "edited": false, "score": 0, "creation_date": 1488944285, "post_id": 42662111, "comment_id": 72450679, "body": "<code>return</code> simply returns from a method or block. It&#39;s only special inside a <code>do ... end</code> type structure such as in <code>x.each do ... end</code>. A method call has no special rules, but blocks come in two types, one that allows a <code>return</code> and one that disallows. This is the difference between <code>lambda</code> and <code>Proc.new</code>. A <code>return</code> inside something declared with <code>Proc.new</code> <i>will</i> force-exit, but not in a <code>lambda</code>."}], "tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": false, "score": 0, "last_activity_date": 1488941704, "creation_date": 1488941704, "answer_id": 42662111, "question_id": 42662060, "link": "https://stackoverflow.com/questions/42662060/return-from-a-loop-from-a-different-method/42662111#42662111", "title": "Return from a loop from a different method", "body": "<p>It's generally not the case that a method call forces the calling method to do something as abrupt as <code>return</code>. That's what exceptions are for, they will bubble up if not caught, but that's seriously heavy-handed for this sort of thing. Instead make your method return a truthy value if you want to break the loop:</p>\n\n<pre><code>def return_method\n   puts \"RETURNING\"\n\n   true\nend\n\nloop do\n  puts \"Enter:\"\n  answer = gets.chomp\n\n  case (answer)\n  when 'run'\n    break if return_method\n  when 'y'\n    break\n  end\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "is_accepted": false, "score": 1, "last_activity_date": 1488943875, "creation_date": 1488943875, "answer_id": 42662472, "question_id": 42662060, "link": "https://stackoverflow.com/questions/42662060/return-from-a-loop-from-a-different-method/42662472#42662472", "title": "Return from a loop from a different method", "body": "<p>A typical way to escape from nested loops of from nested method calls is to use <code>catch</code> ... <code>throw</code>.</p>\n\n<pre><code>RETURNING = \"RETURNING\"\n\ndef return_method\n  throw RETURNING\nend\n\ncatch(RETURNING) do\n  loop do\n    puts \"Enter:\"\n    answer = gets.chomp\n    if answer == 'run'\n      return_method\n    end\n    break if answer == 'y'\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 383, "user_id": 6788712, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/029b6ef8f5217b509e0a61e48d5915c0?s=128&d=identicon&r=PG&f=1", "display_name": "norkuy", "link": "https://stackoverflow.com/users/6788712/norkuy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 375, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1488944105, "creation_date": 1488941261, "last_edit_date": 1488944105, "question_id": 42662060, "link": "https://stackoverflow.com/questions/42662060/return-from-a-loop-from-a-different-method", "title": "Return from a loop from a different method", "body": "<p>My understanding is you can exit from a program with a return. How do you return from a loop? When I run <code>return_method</code> as in the following, I want to exit the loop with <code>\"RETURNING\"</code> returned.</p>\n\n<pre><code>def return_method\n   return \"RETURNING\"\nend\n\nloop do\n  puts \"Enter:\"\n  answer = gets.chomp\n  if answer == 'run'\n    return_method\n  end\n  break if answer == 'y'\nend\n</code></pre>\n\n<p><code>break</code> doesn't work within my method.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5", "advanced-search"], "comments": [{"owner": {"reputation": 1717, "user_id": 1034924, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ecedc78563223e4f7742bbfc66992905?s=128&d=identicon&r=PG", "display_name": "nzajt", "link": "https://stackoverflow.com/users/1034924/nzajt"}, "edited": false, "score": 0, "creation_date": 1488940092, "post_id": 42661830, "comment_id": 72449527, "body": "The problem is this line <code>@dogs = Dog.search(params[:location], params[:breed], params[:age], params[:gender]).all</code> can you run this in the console and get the results you want?"}, {"owner": {"reputation": 207, "user_id": 6263131, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/TJWHp.jpg?s=128&g=1", "display_name": "kyle", "link": "https://stackoverflow.com/users/6263131/kyle"}, "reply_to_user": {"reputation": 1717, "user_id": 1034924, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ecedc78563223e4f7742bbfc66992905?s=128&d=identicon&r=PG", "display_name": "nzajt", "link": "https://stackoverflow.com/users/1034924/nzajt"}, "edited": false, "score": 0, "creation_date": 1488940166, "post_id": 42661830, "comment_id": 72449549, "body": "Hi @nzajt, Thanks for the quick response. I&#39;ve updated my question."}, {"owner": {"reputation": 1717, "user_id": 1034924, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ecedc78563223e4f7742bbfc66992905?s=128&d=identicon&r=PG", "display_name": "nzajt", "link": "https://stackoverflow.com/users/1034924/nzajt"}, "edited": false, "score": 0, "creation_date": 1488940262, "post_id": 42661830, "comment_id": 72449575, "body": "What gem are you using for advanced search?"}, {"owner": {"reputation": 207, "user_id": 6263131, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/TJWHp.jpg?s=128&g=1", "display_name": "kyle", "link": "https://stackoverflow.com/users/6263131/kyle"}, "reply_to_user": {"reputation": 1717, "user_id": 1034924, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ecedc78563223e4f7742bbfc66992905?s=128&d=identicon&r=PG", "display_name": "nzajt", "link": "https://stackoverflow.com/users/1034924/nzajt"}, "edited": false, "score": 0, "creation_date": 1488940320, "post_id": 42661830, "comment_id": 72449594, "body": "I&#39;m not using any gems for the search."}], "answers": [{"comments": [{"owner": {"reputation": 207, "user_id": 6263131, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/TJWHp.jpg?s=128&g=1", "display_name": "kyle", "link": "https://stackoverflow.com/users/6263131/kyle"}, "edited": false, "score": 0, "creation_date": 1488941749, "post_id": 42662005, "comment_id": 72450012, "body": "I just tried both solutions, but when trying the solution with @@, i get this:  <code>ActionView::Template::Error - PG::UndefinedFunction: ERROR:  operator does not exist: integer @@ unknown LINE 1: ...(location @@ &#39;92603&#39; AND breed @@ &#39;corgi&#39; AND age @@ &#39;Baby&#39; ...                                                              ^ HINT:  No operator matches the given name and argument type(s). You might need to add explicit type casts. : SELECT &quot;dogs&quot;.* FROM &quot;dogs&quot; WHERE (location @@ &#39;92603&#39; AND breed @@ &#39;corgi&#39; AND age @@ &#39;Baby&#39; AND gender @@ &#39;female&#39;):</code> With the carrot being under @@ after age."}, {"owner": {"reputation": 1717, "user_id": 1034924, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ecedc78563223e4f7742bbfc66992905?s=128&d=identicon&r=PG", "display_name": "nzajt", "link": "https://stackoverflow.com/users/1034924/nzajt"}, "reply_to_user": {"reputation": 207, "user_id": 6263131, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/TJWHp.jpg?s=128&g=1", "display_name": "kyle", "link": "https://stackoverflow.com/users/6263131/kyle"}, "edited": false, "score": 0, "creation_date": 1489017414, "post_id": 42662005, "comment_id": 72492444, "body": "Is one of those columns in your database an integer? You can&#39;t use @@ or ilike with an integer. Also, make sure you can run this query in the console before you try it in the view, it will save you a lot of time."}, {"owner": {"reputation": 207, "user_id": 6263131, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/TJWHp.jpg?s=128&g=1", "display_name": "kyle", "link": "https://stackoverflow.com/users/6263131/kyle"}, "edited": false, "score": 0, "creation_date": 1489018732, "post_id": 42662005, "comment_id": 72492843, "body": "Yep, age is an integer. Aaah gotcha.  Alright, I&#39;ll run things in the console moving forward. I updated my code above to show what I tried."}], "tags": [], "owner": {"reputation": 1717, "user_id": 1034924, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ecedc78563223e4f7742bbfc66992905?s=128&d=identicon&r=PG", "display_name": "nzajt", "link": "https://stackoverflow.com/users/1034924/nzajt"}, "is_accepted": false, "score": 1, "last_activity_date": 1488940890, "creation_date": 1488940890, "answer_id": 42662005, "question_id": 42661830, "link": "https://stackoverflow.com/questions/42661830/rails-advanced-search-not-returning-desired-results/42662005#42662005", "title": "Rails Advanced Search not returning desired results", "body": "<p>You are using Postgresql, <code>LIKE</code> doesn't work the same way it does in MYSQL. You will need to use <code>ilike</code> or <code>@@</code>.</p>\n\n<p><code>where(['location LIKE ? AND breed LIKE ? AND age LIKE ? AND gender LIKE ?', \"%#{location}%\", \"%#{breed.downcase}%\", \"%#{age}%\", \"%#{gender.downcase}%\"])</code></p>\n\n<p>for psql would be</p>\n\n<p><code>where('location ILIKE ? AND breed ILIKE ? AND age ILIKE ? AND gender ILIKE ?', \"%#{location}%\", \"%#{breed.downcase}%\", \"%#{age}%\", \"%#{gender.downcase}%\")</code></p>\n\n<p>or </p>\n\n<p><code>where('location @@ ? AND breed @@ ? AND age @@ ? AND gender @@ ?', location, breed.downcase, age, gender.downcase)</code></p>\n\n<p>I would recommend watching this <a href=\"http://railscasts.com/episodes/343-full-text-search-in-postgresql?view=asciicast\" rel=\"nofollow noreferrer\">http://railscasts.com/episodes/343-full-text-search-in-postgresql?view=asciicast</a></p>\n\n<p>and using this gem. <a href=\"https://github.com/activerecord-hackery/ransack\" rel=\"nofollow noreferrer\">https://github.com/activerecord-hackery/ransack</a></p>\n\n<p>It will make it alot easier to get the results you are looking for.</p>\n"}, {"comments": [{"owner": {"reputation": 207, "user_id": 6263131, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/TJWHp.jpg?s=128&g=1", "display_name": "kyle", "link": "https://stackoverflow.com/users/6263131/kyle"}, "edited": false, "score": 0, "creation_date": 1489020625, "post_id": 42684547, "comment_id": 72493393, "body": "Thank you, @Stephane. I&#39;m trying to find how to implement this into my search and have to admit, I&#39;m a little confused on how to do that. Would it be something like this? <code>where(&#39;location @@ ? AND breed @@ ? AND age = ? AND gender @@ ?&#39;, location, breed.downcase, to_char(age, &#39;99&#39;), gender.downcase) </code> I tried it this way and it gives me an <code>Undefined Method &#39;to_char&#39;</code> error."}, {"owner": {"reputation": 2124, "user_id": 839787, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/f330a19645ff0895459fce9ca810b3ce?s=128&d=identicon&r=PG", "display_name": "Stephane Paquet", "link": "https://stackoverflow.com/users/839787/stephane-paquet"}, "reply_to_user": {"reputation": 207, "user_id": 6263131, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/TJWHp.jpg?s=128&g=1", "display_name": "kyle", "link": "https://stackoverflow.com/users/6263131/kyle"}, "edited": false, "score": 1, "creation_date": 1489098266, "post_id": 42684547, "comment_id": 72535090, "body": "@kyle, what I would recommend to do, is to break it into pieces. Start by something simple, let&#39;s say try your query with only the varchars. Remove the age for now. See if it&#39;s working and as recommended by others in this thread: try it within the Ruby console. After that, figure out the best way to transform your age (stored as an integer) into a varchar. I would recommend looking at the following stackexchange posts: <a href=\"http://stackoverflow.com/questions/13809547/how-do-i-convert-an-integer-to-string-as-part-of-a-postgresql-query\" title=\"how do i convert an integer to string as part of a postgresql query\">stackoverflow.com/questions/13809547/&hellip;</a>"}, {"owner": {"reputation": 2124, "user_id": 839787, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/f330a19645ff0895459fce9ca810b3ce?s=128&d=identicon&r=PG", "display_name": "Stephane Paquet", "link": "https://stackoverflow.com/users/839787/stephane-paquet"}, "reply_to_user": {"reputation": 207, "user_id": 6263131, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/TJWHp.jpg?s=128&g=1", "display_name": "kyle", "link": "https://stackoverflow.com/users/6263131/kyle"}, "edited": false, "score": 0, "creation_date": 1489098458, "post_id": 42684547, "comment_id": 72535160, "body": "<a href=\"http://stackoverflow.com/questions/22476601/how-to-convert-integer-to-string-and-get-length-of-string\" title=\"how to convert integer to string and get length of string\">stackoverflow.com/questions/22476601/&hellip;</a>"}, {"owner": {"reputation": 207, "user_id": 6263131, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/TJWHp.jpg?s=128&g=1", "display_name": "kyle", "link": "https://stackoverflow.com/users/6263131/kyle"}, "edited": false, "score": 0, "creation_date": 1489099682, "post_id": 42684547, "comment_id": 72535722, "body": "Hi Stephane, thank you so much for these suggestions I&#39;ll implement these steps and see what works! Thanks!"}, {"owner": {"reputation": 2124, "user_id": 839787, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/f330a19645ff0895459fce9ca810b3ce?s=128&d=identicon&r=PG", "display_name": "Stephane Paquet", "link": "https://stackoverflow.com/users/839787/stephane-paquet"}, "reply_to_user": {"reputation": 207, "user_id": 6263131, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/TJWHp.jpg?s=128&g=1", "display_name": "kyle", "link": "https://stackoverflow.com/users/6263131/kyle"}, "edited": false, "score": 1, "creation_date": 1489175128, "post_id": 42684547, "comment_id": 72572631, "body": "@kyle, it&#39;s always a good thing to breakdown your problems. so you can isolate the issues, what makes solving them easier."}], "tags": [], "owner": {"reputation": 2124, "user_id": 839787, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/f330a19645ff0895459fce9ca810b3ce?s=128&d=identicon&r=PG", "display_name": "Stephane Paquet", "link": "https://stackoverflow.com/users/839787/stephane-paquet"}, "is_accepted": false, "score": 1, "last_activity_date": 1489019483, "creation_date": 1489019483, "answer_id": 42684547, "question_id": 42661830, "link": "https://stackoverflow.com/questions/42661830/rails-advanced-search-not-returning-desired-results/42684547#42684547", "title": "Rails Advanced Search not returning desired results", "body": "<p>I think the problem is that you are running a <code>LIKE</code> against an integer. There is no description of your schema but the SQL error seems to be pointing to the fact that age is an Integer and you cannot run <code>LIKE</code> against integer.</p>\n\n<p>If you want to run a LIKE against an Integer you first need to cast it to a <code>VARCHAR</code> (this can be done in SQL). In PostgreSQL you can call the following command in your query: <code>to_char(numeric, text)</code>. It returns a String from the <em>numeric</em> according to a format you enter as <em>text</em> parameter.</p>\n"}], "owner": {"reputation": 207, "user_id": 6263131, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/TJWHp.jpg?s=128&g=1", "display_name": "kyle", "link": "https://stackoverflow.com/users/6263131/kyle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1502603904, "creation_date": 1488939679, "last_edit_date": 1489022397, "question_id": 42661830, "link": "https://stackoverflow.com/questions/42661830/rails-advanced-search-not-returning-desired-results", "title": "Rails Advanced Search not returning desired results", "body": "<p>This is my first time implementing an advanced search. I'm emulating pet finder, but for dogs and want the search functionality to be similar to that of pet finders search for pets. My desired outcome is to have the user input their desired preferences as to what kind of dog (breed, age, gender, location, etc.) they are looking for and when they click on search, it redirects and renders their desired dog. I'm not getting an error at all just not getting the desired results. </p>\n\n<p>Please let me know if you need additional information.</p>\n\n<p>I want to add that if I take out the if statement in searchs_controller.rb and just have: <code>@dogs = Dog.search(params[:location], params[:breed], params[:age], params[:gender]).all</code> then it gives me this error:</p>\n\n<pre><code>ActionView::Template::Error - PG::UndefinedFunction: ERROR:  operator does not exist: integer ~~ unknown\nLINE 1: ...n LIKE '%92603%' AND breed LIKE '%corgi%' AND age LIKE '%Bab...\n                                                             ^\nHINT:  No operator matches the given name and argument type(s). You might need to add explicit type casts.\n: SELECT \"dogs\".* FROM \"dogs\" WHERE (location LIKE '%92603%' AND breed LIKE '%corgi%' AND age LIKE '%Baby%' AND gender LIKE '%female%'):\n</code></pre>\n\n<p>app/controllers/searchs_controller.rb</p>\n\n<pre><code>class SearchsController &lt; ApplicationController\n\n    def index\n      if params[:search]                                                                                                                                    \n         @dogs = Dog.search(params[:location], params[:breed], params[:age], params[:gender]).all\n      else\n          @dogs = Dog.all.order(\"age ASC\")\n       end\n    end\nend\n</code></pre>\n\n<p>app/models/dog.rb</p>\n\n<p>Before:</p>\n\n<pre><code>class Dog &lt; ApplicationRecord\n\n  def self.search(location, breed, age, gender)                                                                                                           \n    return all unless location.present? || breed.present? || age.present? || gender.present?\n    where(['location LIKE ? AND breed LIKE ? AND age LIKE ? AND gender LIKE ?', \"%#{location}%\", \"%#{breed.downcase}%\", \"%#{age}%\", \"%#{gender.               downcase}%\"])\n  end\n\nend\n</code></pre>\n\n<p>After: </p>\n\n<pre><code>def self.search(location, breed, age, gender) \n    return all unless location.present? || breed.present? || age.present? || gender.present?\n    where('location @@ ? AND breed @@ ? AND age = ? AND gender @@ ?', location, breed.downcase, age, gender.downcase)\n  end\n</code></pre>\n\n<p>app/views/searchs/index.html.erb</p>\n\n<pre><code>&lt;div class=\"doge-info\"&gt;\n   &lt;% @dogs.each do |d| %&gt;                                                                                                                                 \n      &lt;h2&gt;Meet: &lt;%= d.name %&gt;&lt;/h2&gt;\n      &lt;h4&gt;&lt;%= d.name %&gt; is a &lt;%= d.breed %&gt;&lt;/h4&gt;\n\n      &lt;% if d.gender.titleize == \"Female\" %&gt;\n        &lt;h4&gt;She is &lt;%= d.age %&gt; years old.&lt;/h4&gt;\n      &lt;% else %&gt;\n        &lt;h4&gt;He is &lt;%= d.age %&gt; years old.&lt;/h4&gt;\n      &lt;% end %&gt;\n\n   &lt;% end %&gt;\n &lt;/div&gt;\n</code></pre>\n\n<p>app/views/dogs/_form.html.erb</p>\n\n<p>Updated 03/08:</p>\n\n<pre><code>&lt;div class=\"search-for-dogs-form\"&gt;\n  &lt;%= form_tag searchs_index_path, method: \"get\", class: \"search-dogs\" do %&gt;\n\n    &lt;div id=\"form-searching-for-dogs\"&gt;\n\n      &lt;div class=\"location\"&gt;\n        &lt;% label_tag :location, class: \"location-label\" %&gt;\n        &lt;%= number_field_tag :location, params[:location], max: 0..5, placeholder: \"Zip Code\", class: \"zip-code-area\" %&gt;\n      &lt;/div&gt;\n\n      &lt;div class=\"dog-breed\"&gt;\n        &lt;% label_tag :breed, class: \"breed-label\" %&gt;\n        &lt;%= text_field_tag :breed, params[:breed], placeholder: \"Breed\", class: \"breed-text-field\" %&gt;\n      &lt;/div&gt;\n\n      &lt;div class=\"dog-age\"&gt;\n        &lt;p class=\"age-name\"&gt;Choose an Age Range:&lt;/p&gt;\n        &lt;%= radio_button_tag :age, \"#{0..2}\" %&gt;\n        &lt;%= label_tag :age_baby, \"0-2 years\", class: \"age-baby\" %&gt;\n        &lt;%= radio_button_tag :age, \"#{3..5}\" %&gt;\n        &lt;%= label_tag :age_young, \"3-5 years\", class: \"age-young\" %&gt;\n        &lt;%= radio_button_tag :age, \"#{6..8}\" %&gt;\n        &lt;%= label_tag :age_adult, \"6-8 years\", class: \"age-adult\" %&gt;\n      &lt;/div&gt;\n\n      &lt;div class=\"dog-gender\"&gt;\n        &lt;% label_tag :gender, class: \"gender-label\" %&gt;\n        &lt;%= text_field_tag :gender, params[:gender], placeholder: \"Dog Gender\", class: \"gender-text-field\" %&gt;\n      &lt;/div&gt;\n\n      &lt;div class=\"submit-button-for-search\"&gt;\n        &lt;%= submit_tag \"Search for Dogs\", name: nil, class: \"dog-search-submit-button\" %&gt;\n      &lt;/div&gt;\n    &lt;/div&gt;\n  &lt;% end %&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>app/config/routes.rb</p>\n\n<pre><code>   devise_for :admins\n   root to: 'homepages#index'\n\n   resources :dogs, only: [:index, :show]\n   get \"searchs/index\"\n\n   namespace :admin do\n     resources :dogs\n   end\n</code></pre>\n\n<p>db/schema.rb</p>\n\n<pre><code>create_table \"dogs\", force: :cascade do |t|\n    t.string \"name\"\n    t.integer \"age\"\n    t.string \"breed\"\n    t.string \"gender\"\n    t.boolean \"adoptable\"\n    t.datetime \"post_date\"\n    t.string \"color\"\n    t.string \"size\"\n    t.string \"birth_date\"\n    t.string \"photo\"\n    t.string \"location\"\n  end\n</code></pre>\n"}, {"tags": ["ruby", "homebrew", "ctags", "gnu-global"], "comments": [{"owner": {"reputation": 780, "user_id": 4669978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qoS02.jpg?s=128&g=1", "display_name": "equal-l2", "link": "https://stackoverflow.com/users/4669978/equal-l2"}, "edited": false, "score": 0, "creation_date": 1489093043, "post_id": 42661647, "comment_id": 72532466, "body": "Relevant PR : <a href=\"https://github.com/Homebrew/homebrew-core/pull/8309\" rel=\"nofollow noreferrer\">github.com/Homebrew/homebrew-core/pull/8309</a>"}], "owner": {"reputation": 125, "user_id": 3397032, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6Vh9Q.jpg?s=128&g=1", "display_name": "greyowl", "link": "https://stackoverflow.com/users/3397032/greyowl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1567, "favorite_count": 0, "answer_count": 0, "score": 6, "last_activity_date": 1488944517, "creation_date": 1488938375, "last_edit_date": 1488944517, "question_id": 42661647, "link": "https://stackoverflow.com/questions/42661647/how-do-i-install-gnu-global-with-universal-ctags-support-using-homebrew", "title": "How do I install GNU Global with universal ctags support using Homebrew?", "body": "<p>According to the GNU Global <a href=\"https://www.gnu.org/software/global/globaldoc_toc.html#Plug_002din\" rel=\"noreferrer\">documentation</a></p>\n\n<pre><code># Installation of GLOBAL\n# It assumed that ctags command is installed in '/usr/local/bin'.\n\n$ ./configure --with-universal-ctags=/usr/local/bin/ctags\n$ make\n$ sudo make install\n</code></pre>\n\n<p>I need to install <code>GNU Global</code> with the flag <code>--with-universal-ctags=/usr/local/bin/ctags</code> for support for universal-ctags.</p>\n\n<p>Normal installation of <code>GNU Global</code> is done using (according to this <a href=\"http://brewformulas.org/Global\" rel=\"noreferrer\">source</a>)</p>\n\n<pre><code># normal installation\nbrew install global\n</code></pre>\n\n<p>and since brew formulas are ruby scripts of the form (according to <a href=\"https://brew.sh/\" rel=\"noreferrer\">brew</a>)</p>\n\n<pre><code>#Example with Wget\nclass Wget &lt; Formula\n  homepage \"https://www.gnu.org/software/wget/\"\n  url \"https://ftp.gnu.org/gnu/wget/wget-1.15.tar.gz\"\n  sha256 \"52126be8cf1bddd7536886e74c053ad7d0ed2aa89b4b630f76785bac21695fcd\"\n\n  def install\n    system \"./configure\", \"--prefix=#{prefix}\"\n    system \"make\", \"install\"\n  end\nend\n</code></pre>\n\n<p>should I just do</p>\n\n<pre><code># It assumed that ctags command is installed in '/usr/local/bin'.\nbrew install global --with-universal-ctags=/usr/local/bin/ctags\n</code></pre>\n\n<p>to install global with universal-ctags support? </p>\n\n<p>Note: The normal installation of global seems to have <code>exuberant-ctags</code> as a dependency</p>\n"}, {"tags": ["ruby", "visual-studio-code"], "comments": [{"owner": {"reputation": 11, "user_id": 12222988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc186df8891964daa85fe392f37c0310?s=128&d=identicon&r=PG&f=1", "display_name": "Cosmos02", "link": "https://stackoverflow.com/users/12222988/cosmos02"}, "edited": false, "score": 0, "creation_date": 1603997428, "post_id": 42661242, "comment_id": 114220253, "body": "Try launching VS Code from command line as suggested here: <a href=\"https://stackoverflow.com/a/53909829/12222988\">stackoverflow.com/a/53909829/12222988</a>"}], "answers": [{"comments": [{"owner": {"reputation": 73, "user_id": 5357185, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/bf74f7cd90da2a97afd8889d9d06bd26?s=128&d=identicon&r=PG&f=1", "display_name": "Brian", "link": "https://stackoverflow.com/users/5357185/brian"}, "edited": false, "score": 1, "creation_date": 1488979040, "post_id": 42663751, "comment_id": 72469430, "body": "How do you do that in VS Code?  When I update the ruby.interpreter.commandPath with &quot;ruby.interpreter.commandPath&quot;: &quot;/Users/XXXX/.rvm/gems/ruby-2.4.0&quot;, it still shows the older version after running ruby -v."}, {"owner": {"reputation": 1036, "user_id": 5078051, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/10203328378168774/picture?type=large", "display_name": "Hsiu Chuan Tsao", "link": "https://stackoverflow.com/users/5078051/hsiu-chuan-tsao"}, "reply_to_user": {"reputation": 73, "user_id": 5357185, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/bf74f7cd90da2a97afd8889d9d06bd26?s=128&d=identicon&r=PG&f=1", "display_name": "Brian", "link": "https://stackoverflow.com/users/5357185/brian"}, "edited": false, "score": 0, "creation_date": 1488979947, "post_id": 42663751, "comment_id": 72470052, "body": "I used Sublime Text, not VS Code, I just infer the problem what you happen."}], "tags": [], "owner": {"reputation": 1036, "user_id": 5078051, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/10203328378168774/picture?type=large", "display_name": "Hsiu Chuan Tsao", "link": "https://stackoverflow.com/users/5078051/hsiu-chuan-tsao"}, "is_accepted": false, "score": -1, "last_activity_date": 1488951466, "creation_date": 1488951466, "answer_id": 42663751, "question_id": 42661242, "link": "https://stackoverflow.com/questions/42661242/updating-ruby-version-in-visual-studio-code/42663751#42663751", "title": "Updating Ruby Version in Visual Studio Code", "body": "<p>Definitely, it about your IDE's config about ruby-path, find where can set ruby-path and set the correct rvm-ruby-path.</p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 12222988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc186df8891964daa85fe392f37c0310?s=128&d=identicon&r=PG&f=1", "display_name": "Cosmos02", "link": "https://stackoverflow.com/users/12222988/cosmos02"}, "is_accepted": false, "score": 1, "last_activity_date": 1604370380, "last_edit_date": 1604370380, "creation_date": 1603998107, "answer_id": 64597596, "question_id": 42661242, "link": "https://stackoverflow.com/questions/42661242/updating-ruby-version-in-visual-studio-code/64597596#64597596", "title": "Updating Ruby Version in Visual Studio Code", "body": "<p>If your project has a gemfile with the ruby version specified, then RVM will pick it up when you CD to the project folder from command line. VS code doesn't seem to do this till I added &quot;cwd&quot; to the launch config and then it works as expected. Here is my launch.json:</p>\n<pre class=\"lang-json prettyprint-override\"><code>    {\n      // Use IntelliSense to learn about possible attributes.\n      // Hover to view descriptions of existing attributes.\n      // For more information, visit: https://go.microsoft.com/fwlink/?linkid=830387\n      &quot;version&quot;: &quot;0.2.0&quot;,\n      &quot;configurations&quot;: [\n        {\n          &quot;name&quot;: &quot;Rails server&quot;,\n          &quot;type&quot;: &quot;Ruby&quot;,\n          &quot;request&quot;: &quot;launch&quot;,\n          &quot;program&quot;: &quot;${workspaceRoot}/bin/rails&quot;,\n          &quot;args&quot;: [\n            &quot;server&quot;\n          ],\n          &quot;useBundler&quot;: true,\n          &quot;showDebuggerOutput&quot;: true,\n          &quot;cwd&quot;: &quot;${workspaceRoot}&quot;\n        }\n      ]\n    }\n</code></pre>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user5498548"}, "is_accepted": false, "score": 0, "last_activity_date": 1603999087, "creation_date": 1603999087, "answer_id": 64597827, "question_id": 42661242, "link": "https://stackoverflow.com/questions/42661242/updating-ruby-version-in-visual-studio-code/64597827#64597827", "title": "Updating Ruby Version in Visual Studio Code", "body": "<p>I don't have a Mac, but since RVM is available on Linux, I've tried working with it in WSL, as well as Windows with Railsinstaller, so I have some experience.</p>\n<p>Actually, this isn't even about VS Code, but MAYBE, since Mac has an old Ruby version available not contained within the version manager, this happens.</p>\n<p>First of all, note all the available versions (inside RVM, well as the one which is shown by the terminal), and uninstall all versions outside of RVM.</p>\n<p>Keep this with you just for backup, if incase, anything goes wrong, you can reinstall them.</p>\n<p>Next try setting the preferred Ruby version using RVM.</p>\n<p>Try finding out the Ruby version</p>\n<pre class=\"lang-sh prettyprint-override\"><code>ruby -v\n</code></pre>\n<p>If that matches your description, you're good to go.</p>\n"}], "owner": {"reputation": 73, "user_id": 5357185, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/bf74f7cd90da2a97afd8889d9d06bd26?s=128&d=identicon&r=PG&f=1", "display_name": "Brian", "link": "https://stackoverflow.com/users/5357185/brian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2677, "favorite_count": 1, "answer_count": 3, "score": 2, "last_activity_date": 1604370380, "creation_date": 1488935551, "question_id": 42661242, "link": "https://stackoverflow.com/questions/42661242/updating-ruby-version-in-visual-studio-code", "title": "Updating Ruby Version in Visual Studio Code", "body": "<p>I am using Visual Studio Code on my macOS where I am trying to update the version of Ruby I am using within a project from ruby 2.0.0p648 to a newer version of Ruby (I have tried a number of different versions).  I have tried much of the information on this site to make the updates from this site and others, but no luck.</p>\n\n<p>I have tried:</p>\n\n<ol>\n<li>curl -L <a href=\"https://get.rvm.io\" rel=\"nofollow noreferrer\">https://get.rvm.io</a> | bash -s stable \u2013ruby</li>\n<li>rvm install ruby-2.4.0</li>\n<li>rvm use ruby-2.4.0 --default</li>\n</ol>\n\n<p>But when checking that I am using / installed 2.4.0 by using ruby -v, it still comes back with 2.0.0p648.</p>\n\n<p>When I run those commands via the Apple Terminal the response I receive from asking for the version comes back with 2.4.0.</p>\n\n<p>How can I fix this issue?</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["ruby", "recursion", "return", "infinite-loop", "roman-numerals"], "comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1488944225, "post_id": 42660620, "comment_id": 72450662, "body": "What is your question?"}], "answers": [{"comments": [{"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 3, "creation_date": 1488932783, "post_id": 42660673, "comment_id": 72447513, "body": "The OP should also be getting a &quot;<code>else</code> is useless without <code>rescue</code>&quot; warning, I think. In fact, that&#39;s a big part of the problem: the <code>else</code> is being interpreted as part of an implicit <code>rescue</code> block, i.e. it is being interpreted as code that should run when no exception is rescued \u2026 which in this particular method is &quot;always&quot;, because <i>there is no</i> <code>rescue</code> block."}], "tags": [], "owner": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "is_accepted": false, "score": 4, "last_activity_date": 1488932102, "last_edit_date": 1488932102, "creation_date": 1488931636, "answer_id": 42660673, "question_id": 42660620, "link": "https://stackoverflow.com/questions/42660620/my-return-statement-will-not-exit-a-recursive-method/42660673#42660673", "title": "My return statement will not exit a recursive method", "body": "<p>You need to <em>return</em> out of your <code>ROMAN_HASH.each</code> loop, or your recursive functions never end (at least, not for <em>huge</em> numbers of iterations). The problem is that you (seemingly) intended to return the <em>largest</em> value found in the <code>ROMAN_HASH</code> hash, but instead you iterate over all values, recursively calling <code>roman</code> for each one that is greater than <code>k</code>, do nothing with the result, and then return the <code>.each</code> iterator.</p>\n\n<p>You're also misusing if/else. You can't mix post-if with an else expression.</p>\n\n<p>Finally, you're stripping off the last digit by returning <code>if num &lt;= 1</code>. You need to return <code>output</code> when <code>num &lt; 1</code>, and if output is <em>equal</em> to <code>1</code> you should return <code>output + 'I'</code>, or just let the <code>else</code> branch handle this case:</p>\n\n<pre><code>def roman(num, output=\"\")\n  if num &lt; 1\n    return output\n  else\n    ROMAN_HASH.each do |k, v|\n      return roman(num - k, output+v) if num &gt;= k\n    end\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 7675283, "user_type": "registered", "profile_image": "https://graph.facebook.com/10101266286912890/picture?type=large", "display_name": "JR Cibula", "link": "https://stackoverflow.com/users/7675283/jr-cibula"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 632, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1488932102, "creation_date": 1488931351, "question_id": 42660620, "link": "https://stackoverflow.com/questions/42660620/my-return-statement-will-not-exit-a-recursive-method", "title": "My return statement will not exit a recursive method", "body": "<p>Simple Roman Numerals Algorithm solved using recursion.</p>\n\n<p>I know the code get's into my if statement holding my base case. When I check the values using 'pry' everything is fine. However it just skips over my return statement and get's stuck in an infinite loop</p>\n\n<pre><code> ROMAN_HASH = {\n   1000 =&gt; \"M\",\n   900 =&gt; \"CM\",\n   400 =&gt; \"CD\",\n   500 =&gt; \"D\",\n   100 =&gt; \"C\",\n   90 =&gt; \"XC\",\n   50 =&gt; \"L\",\n   40 =&gt; \"XL\",\n   10 =&gt; \"X\",\n   9 =&gt; \"IX\",\n   5 =&gt; \"V\",\n   4 =&gt; \"IV\",\n   1 =&gt; \"I\"\n }\n\n   def roman(num, output=\"\")\n      return output if num &lt;= 1\n    else\n      ROMAN_HASH.each do |k,v|\n        roman(num - k, output+v) if num &gt;= k\n      end\n    end\n   end\n</code></pre>\n"}, {"tags": ["ruby", "erb"], "answers": [{"tags": [], "owner": {"reputation": 4023, "user_id": 1033075, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c2a6e72447d9d41ac31b987a7b2e6341?s=128&d=identicon&r=PG", "display_name": "Patru", "link": "https://stackoverflow.com/users/1033075/patru"}, "is_accepted": true, "score": 2, "last_activity_date": 1488932975, "last_edit_date": 1495542319, "creation_date": 1488932975, "answer_id": 42660869, "question_id": 42660208, "link": "https://stackoverflow.com/questions/42660208/how-to-reuse-erb-templating-code-in-function/42660869#42660869", "title": "How to reuse ERB templating code in function?", "body": "<p>What you are trying to do is not technically impossible, but rather difficult and not recommended as can be seen by reading comments and answers to <a href=\"https://stackoverflow.com/questions/29839991/create-method-in-html-erb-filr\">this question</a>.</p>\n\n<p>As your error message points out your <code>def</code> won't quite happen in the context you \"probably\" expect and you certainly won't be able to \"freely use <code>erb</code> features\" while defining the method (since your context is completely different from what you expect).</p>\n\n<p>The \"railsy\" way to do this is adding a helper or using a <code>partial</code>, but both come with their drawbacks. <code>.erb</code> files (as most templating-languages) do not \"factor\" well. If you want to factor things somewhat more freely you should look at the <a href=\"https://github.com/ageweke/fortitude\" rel=\"nofollow noreferrer\"><code>fortitude</code> gem</a> which provides what is basically a <code>ruby</code>-DSL for html which factors pretty easily. However, that is a rather drastic change from what you are probably used to.</p>\n\n<p>If you <em>really</em> want to define a method inside an <code>.erb</code>-file then you would have to do it entirely within a single pair of <code>&lt;% ... %&gt;</code> brackets where you will have <em>only</em> access to your params, <em>not</em> your context. You would have to return what is basically a <code>String</code> in order to be able to use it in <code>&lt;%= ... %&gt;</code> and pay a hell of a lot of attention to escaping rules for everything to make it through. This is most probably more trouble than it is worth (but easy enough to do in <code>fortitude</code> :-).</p>\n"}], "owner": {"reputation": 1464, "user_id": 5712410, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2be8636271ba5bf194537f8119d752b1?s=128&d=identicon&r=PG&f=1", "display_name": "Marko Avlija\u0161", "link": "https://stackoverflow.com/users/5712410/marko-avlija%c5%a1"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 964, "favorite_count": 0, "accepted_answer_id": 42660869, "answer_count": 1, "score": 2, "last_activity_date": 1488932975, "creation_date": 1488928846, "question_id": 42660208, "link": "https://stackoverflow.com/questions/42660208/how-to-reuse-erb-templating-code-in-function", "title": "How to reuse ERB templating code in function?", "body": "<p>I have this piece of code inside ERB template to render all articles in list.</p>\n\n<pre><code>    &lt;% @list.each do |a| %&gt;\n    &lt;article class=\"my-panel\"&gt;\n      &lt;header&gt;\n        &lt;h2&gt;&lt;a href=\"&lt;%= rel_url_to a[:rel_url] %&gt;\"&gt;&lt;%= a[:name] %&gt;&lt;/a&gt;&lt;/h2&gt;\n         &lt;time datetime=\"&lt;%= to_datetime(a[:time]) %&gt;\"&gt;&lt;%= time_description(a[:time]) %&gt;&lt;/time&gt;\n      &lt;/header&gt;\n       ... more stuff cut out\n    &lt;/article&gt;\n    &lt;% end %&gt;\n</code></pre>\n\n<p>Now I am going to have to change it to something like this:</p>\n\n<pre><code>&lt;% @list[content_splitter.before_ad_range].each  do |a| %&gt;\n   &lt;%= render_article(a) %&gt;\n&lt;% end %&gt;\n\n&lt;%= AdCreator.between_content_ad %&gt;\n\n&lt;% @list[content_splitter.after_ad_range].each do |a| %&gt;\n   &lt;%= render_article(a) %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>I thought it would be nice to have <code>render_article</code> defined in template as opposed to having html clutter my ruby code. But when I move that code inside function I get an error. </p>\n\n<p>This is the function:</p>\n\n<pre><code>  &lt;% def render_article(a) %&gt;\n    &lt;article class=\"my-panel\"&gt;\n      &lt;header&gt;\n        &lt;h2&gt;&lt;a href=\"&lt;%= rel_url_to a[:rel_url] %&gt;\"&gt;&lt;%= a[:name] %&gt;&lt;/a&gt;&lt;/h2&gt;\n         &lt;time datetime=\"&lt;%= to_datetime(a[:time]) %&gt;\"&gt;&lt;%= time_description(a[:time]) %&gt;&lt;/time&gt;\n      &lt;/header&gt;\n\n      &lt;div class=\"image\"&gt;\n        &lt;a href=\"&lt;%= rel_url_to a[:rel_url] %&gt;\"&gt;&lt;img alt=\"\" src=\"&lt;%= rel_url_to a[:img_url_1x] %&gt;\" srcset=\"&lt;%= rel_url_to a[:img_url_2x] %&gt; 2x, &lt;%= rel_url_to a[:img_url_3x] %&gt; 3x\"&gt;&lt;/a&gt;\n      &lt;/div&gt;\n\n      &lt;div class=\"text\"&gt;\n        &lt;%= a[:article_text] %&gt;\n      &lt;/div&gt;\n    &lt;/article&gt;\n  &lt;% end %&gt;\n</code></pre>\n\n<p>This is the error:</p>\n\n<pre><code>undefined local variable or method `_erbout' for #&lt;Html::FrontPage:0x0055fb94005c68&gt;\n</code></pre>\n\n<p>Line of code producing this error is:</p>\n\n<pre><code>self.class.instance_variable_get(:@renderer).result(binding)\n</code></pre>\n\n<p>Why is this happening? How to find more informative error?</p>\n\n<p>How to fix this? Can I avoid moving this obviously html dominant code into ruby helper file?</p>\n\n<p>PS. I suspect problem is that functions <code>to_datetime</code> and <code>time_description</code> can't be accessed from inside ERB function.</p>\n\n<p>I know that function <code>render_article</code> does get called because if I change it's signature to remove parameter I get an error</p>\n\n<pre><code>wrong number of arguments (given 1, expected 0)\n# (erb):45:in `render_article'\n</code></pre>\n"}, {"tags": ["ruby", "regex", "string"], "comments": [{"owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 1, "creation_date": 1488928629, "post_id": 42660152, "comment_id": 72446236, "body": "<code>[a-z]*</code> and <code>[[:space:]]*</code> can match an empty string and <code>=</code> is not  a digit, it is matched with <code>[^\\d]</code>. Try <code>&#47;\\A(?!\\d).*[a-zA-Z].*\\z&#47;m</code> or even <code>&#47;\\A(?!\\d).*\\p{L}.*\\z&#47;m</code>"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1488944881, "post_id": 42660152, "comment_id": 72450875, "body": "Another way is <code>str[0] !~ &#47;\\d&#47; &amp;&amp; str =~ &#47;[[:alpha]]&#47; #=&gt; 4</code> (truthy)"}], "answers": [{"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1488942667, "post_id": 42660268, "comment_id": 72450253, "body": "Could you not write <code>&#47;\\A(?!\\d).*[a-z]&#47;im</code> or (possibly faster) <code>&#47;\\A(?!\\d).*?[a-z]&#47;im</code>?"}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1488944854, "post_id": 42660268, "comment_id": 72450867, "body": "@CarySwoveland You are correct. This answer includes some redundancies. But I don&#39;t think greedy match is faster."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1488945004, "post_id": 42660268, "comment_id": 72450916, "body": "@sawa, do you mean non-greedy?"}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1488945114, "post_id": 42660268, "comment_id": 72450941, "body": "@CarySwoveland Right. You got it."}, {"owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1488957717, "post_id": 42660268, "comment_id": 72455673, "body": "Thank you, I was a bit mislead by the matching input length issue stated in OP, and thus was focused on both anchors. I &quot;trimmed&quot; the solution."}], "tags": [], "owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "is_accepted": true, "score": 1, "last_activity_date": 1488957642, "last_edit_date": 1488957642, "creation_date": 1488929219, "answer_id": 42660268, "question_id": 42660152, "link": "https://stackoverflow.com/questions/42660152/matching-strings-that-contain-a-letter-with-the-first-character-not-being-a-numb/42660268#42660268", "title": "Matching strings that contain a letter with the first character not being a number", "body": "<p>The <code>[a-z]*</code> and <code>[[:space:]]*</code> patterns can match an empty string, so they do not really make any difference when <em>validating</em> is necessary. Also, <code>=</code> is not a digit, it is matched with <code>[^\\d]</code> negated character class that is a <em>consuming</em> type of pattern. It means it requires a character other than a digit in the string.</p>\n\n<p>You may rely on a lookahead that will restrict the start of string position:</p>\n\n<pre><code>/\\A(?!\\d).*[a-z]/im\n</code></pre>\n\n<p>Or even a bit faster and Unicode-friendly version:</p>\n\n<pre><code>/\\A(?!\\d)\\P{L}*\\p{L}/\n</code></pre>\n\n<p>See the <a href=\"http://rubular.com/r/KlDKQPuKTb\" rel=\"nofollow noreferrer\">regex demo</a></p>\n\n<p><strong>Details</strong>:</p>\n\n<ul>\n<li><code>\\A</code> - start of a string</li>\n<li><code>(?!\\d)</code> - the first char cannot be a digit</li>\n<li><code>\\P{L}*</code> - 0 or more (<code>*</code>) chars other than letters<br/>\nor<br/></li>\n<li><code>.*</code> - any 0+ chars, including line breaks if <code>/m</code> modifier is used)</li>\n<li><code>\\p{L}</code> - a letter</li>\n</ul>\n\n<p>The <code>m</code> modifier enables the <code>.</code> to match line break chars in a Ruby regex.</p>\n\n<p>Use <code>[a-z]</code> when you need to restrict the letters to those in ASCII table only. Also, <code>\\p{L}</code> may be replaced with <code>[[:alpha:]]</code> and <code>\\P{L}</code> with <code>[^[:alpha:]]</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 0, "last_activity_date": 1488954571, "creation_date": 1488954571, "answer_id": 42664449, "question_id": 42660152, "link": "https://stackoverflow.com/questions/42660152/matching-strings-that-contain-a-letter-with-the-first-character-not-being-a-numb/42664449#42664449", "title": "Matching strings that contain a letter with the first character not being a number", "body": "<p>If two regular expressions were permitted you could write:</p>\n\n<pre><code>def pass_de_test?(str)\n  str[0] !~ /\\d/ &amp;&amp; str =~ /[[:alpha]]/\nend\n\npass_de_test?(\"*!\\n?a&gt;\") #=&gt; 4 (truthy)\npass_de_test?(\"3!\\n?a&gt;\") #=&gt; false\n</code></pre>\n\n<p>If you want <code>true</code> or <code>false</code> returned, change the operative line to:</p>\n\n<pre><code>str[0] !~ /\\d/ &amp;&amp; str =~ /[[:alpha]]/) ? true : false\n</code></pre>\n\n<p>or</p>\n\n<pre><code>!!(str[0] !~ /\\d/ &amp;&amp; str =~ /[[:alpha]]/)\n</code></pre>\n"}], "owner": {"reputation": 16802, "user_id": 1235929, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/9f460ae7deb6fa19034c810a53b9fbac?s=128&d=identicon&r=PG", "display_name": "Dave", "link": "https://stackoverflow.com/users/1235929/dave"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 112, "favorite_count": 0, "accepted_answer_id": 42660268, "answer_count": 2, "score": 2, "last_activity_date": 1488957642, "creation_date": 1488928541, "last_edit_date": 1488944313, "question_id": 42660152, "link": "https://stackoverflow.com/questions/42660152/matching-strings-that-contain-a-letter-with-the-first-character-not-being-a-numb", "title": "Matching strings that contain a letter with the first character not being a number", "body": "<p>How do I write a regular expression that has at least one letter, but the first character must not be a number? I tried this</p>\n\n<pre><code>str = \"a\"\nstr =~ /^[^\\d][[:space:]]*[a-z]*/i\n# =&gt; 0 \n\nstr = \"=\"\nstr =~ /^[^\\d][[:space:]]*[a-z]*/i\n# =&gt; 0 \n</code></pre>\n\n<p>The <code>\"=\" is matched even though it contains no letters. I expect the</code>\"a\"<code>to match, and similarly a string like</code>\"3abcde\"` should not match.</p>\n"}, {"tags": ["ruby", "rubygems"], "comments": [{"owner": {"reputation": 1036, "user_id": 5078051, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/10203328378168774/picture?type=large", "display_name": "Hsiu Chuan Tsao", "link": "https://stackoverflow.com/users/5078051/hsiu-chuan-tsao"}, "edited": false, "score": 0, "creation_date": 1488952480, "post_id": 42660148, "comment_id": 72453263, "body": "What&#39;s your OS?"}, {"owner": {"reputation": 11, "user_id": 7675172, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/43aa9f0a332cabfe4ea17a7097a60943?s=128&d=identicon&r=PG&f=1", "display_name": "V. Bora", "link": "https://stackoverflow.com/users/7675172/v-bora"}, "reply_to_user": {"reputation": 1036, "user_id": 5078051, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/10203328378168774/picture?type=large", "display_name": "Hsiu Chuan Tsao", "link": "https://stackoverflow.com/users/5078051/hsiu-chuan-tsao"}, "edited": false, "score": 0, "creation_date": 1488995581, "post_id": 42660148, "comment_id": 72481313, "body": "@Tsao I&#39;m running Windows 7"}], "owner": {"reputation": 11, "user_id": 7675172, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/43aa9f0a332cabfe4ea17a7097a60943?s=128&d=identicon&r=PG&f=1", "display_name": "V. Bora", "link": "https://stackoverflow.com/users/7675172/v-bora"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 54, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1488933555, "creation_date": 1488928523, "last_edit_date": 1488933555, "question_id": 42660148, "link": "https://stackoverflow.com/questions/42660148/how-do-i-install-all-win32screenshot-ruby-gem-dependencies", "title": "How do I install all win32screenshot Ruby gem dependencies?", "body": "<p>I have been trying to install the <code>win32screenshot</code> gem but am getting the following DependencyError:</p>\n\n<pre><code>C:\\Ruby200\\lib\\ruby\\gems\\2.0.0\\gems&gt;gem install mini_magick-4.6.1.gem win32screenshot-2.1.0.gem\n\nSuccessfully installed mini_magick-4.6.1\nParsing documentation for mini_magick-4.6.1\nERROR:  While executing gem ... (Gem::DependencyError)\nUnable to resolve dependencies: win32screenshot requires mini_magick (~&gt; 4.3.0)\"\n</code></pre>\n\n<p>Any clues would be greatly appreciated.</p>\n\n<p>Thanks,\nVasile</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec"], "answers": [{"comments": [{"owner": {"reputation": 732, "user_id": 5613451, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/25e0c61e748f8241bc2955589f5d6661?s=128&d=identicon&r=PG&f=1", "display_name": "Mickey Sheu", "link": "https://stackoverflow.com/users/5613451/mickey-sheu"}, "edited": false, "score": 0, "creation_date": 1488929761, "post_id": 42660307, "comment_id": 72446629, "body": "Oh interesting!  I don&#39;t know why I didn&#39;t check that.  That sheds some light.  Question edited to specify Time instance, though I don&#39;t understand the relevance of making time iterable"}], "tags": [], "owner": {"reputation": 1761, "user_id": 3741320, "user_type": "registered", "profile_image": "https://graph.facebook.com/10222536/picture?type=large", "display_name": "James Milani", "link": "https://stackoverflow.com/users/3741320/james-milani"}, "is_accepted": false, "score": 0, "last_activity_date": 1488940654, "last_edit_date": 1495539976, "creation_date": 1488929398, "answer_id": 42660307, "question_id": 42660040, "link": "https://stackoverflow.com/questions/42660040/rspec-expect-receive-withtime-range/42660307#42660307", "title": "Rspec expect receive(...).with(time_range)", "body": "<p><strong>EDIT:</strong></p>\n\n<p>I've had a bit more time to look at this, and I think the error lies somewhere within the <code>activities.by_created_at(range)</code>. This must be trying to call a loop on the range.</p>\n\n<p>Below are passing specs. I've create a dummy <code>Thing</code> class and run tests against it, and everything passes:</p>\n\n<pre><code>class Thing\n  def initialize( name )\n    @name = name\n  end\n\n  def in_date_range(range)\n    activities.by_created_at(range)\n  end\nend\n\ndescribe Thing do\n  specify 'Thing test' do\n    name = 'Tim'\n    expect(Thing).to receive(:new).with( name )\n\n    Thing.new(name)\n  end\n\n  specify 'Time test' do\n    range = Time.new(0)..(Time.new(0) + 1.hour)\n    t = Thing.new('Jimmy')\n\n    expect(t).to receive(:in_date_range).with( range )\n\n    t.in_date_range( range )\n  end\nend\n\n~/test (master)\n18:22:21$ rspec spec/models/thing_spec.rb \nLoading Enhanced Logger.\nRun options: include {:focus=&gt;true}\n..\n\nFinished in 0.14094 seconds (files took 2.89 seconds to load)\n2 examples, 0 failures\n</code></pre>\n\n<p><strong>END EDIT</strong></p>\n\n<p>The problem is not with rspec checking the range.</p>\n\n<p>I ran this and it worked:</p>\n\n<pre><code>describe Thing do\n  specify 'Thing test', :focus do\n    range = 1..4\n    expect(Thing).to receive(:new).with( range )\n\n    Thing.new(1..4)\n  end\nend\n\n\nRun options: include {:focus=&gt;true}\n.\n\nFinished in 0.09132 seconds (files took 2.59 seconds to load)\n1 example, 0 failures\n</code></pre>\n\n<p>The problem is with making Time iterable.</p>\n\n<p>See this question: <a href=\"https://stackoverflow.com/questions/501253/iterate-over-ruby-time-object-with-delta\">Iterate over Ruby Time object with delta</a></p>\n\n<p>The second part of the accepted answer should help you.</p>\n"}, {"comments": [{"owner": {"reputation": 732, "user_id": 5613451, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/25e0c61e748f8241bc2955589f5d6661?s=128&d=identicon&r=PG&f=1", "display_name": "Mickey Sheu", "link": "https://stackoverflow.com/users/5613451/mickey-sheu"}, "edited": false, "score": 0, "creation_date": 1488990566, "post_id": 42660589, "comment_id": 72477997, "body": "Ah, unfortunately I wasn&#39;t clear enough with my question.  I&#39;m not looking for a test that a time is in a certain time range, but rather that a range is equal to another range."}, {"owner": {"reputation": 799, "user_id": 2559093, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eOwPf.jpg?s=128&g=1", "display_name": "OneNeptune", "link": "https://stackoverflow.com/users/2559093/oneneptune"}, "reply_to_user": {"reputation": 732, "user_id": 5613451, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/25e0c61e748f8241bc2955589f5d6661?s=128&d=identicon&r=PG&f=1", "display_name": "Mickey Sheu", "link": "https://stackoverflow.com/users/5613451/mickey-sheu"}, "edited": false, "score": 0, "creation_date": 1488990644, "post_id": 42660589, "comment_id": 72478053, "body": "If you look, this does just that. It compares two sets of start and two sets of end."}, {"owner": {"reputation": 732, "user_id": 5613451, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/25e0c61e748f8241bc2955589f5d6661?s=128&d=identicon&r=PG&f=1", "display_name": "Mickey Sheu", "link": "https://stackoverflow.com/users/5613451/mickey-sheu"}, "edited": false, "score": 0, "creation_date": 1488991853, "post_id": 42660589, "comment_id": 72478945, "body": "When I say &#39;equal&#39; I meant &#39;start time is the same and end times is the same.&#39;   Your function checks for overlapping, unless I totally misunderstood it.    I appreciate the elegant mathematics by the way.  That&#39;s a clean solution to your problem, unfortunately it&#39;s not my problem."}], "tags": [], "owner": {"reputation": 799, "user_id": 2559093, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eOwPf.jpg?s=128&g=1", "display_name": "OneNeptune", "link": "https://stackoverflow.com/users/2559093/oneneptune"}, "is_accepted": false, "score": 0, "last_activity_date": 1488931146, "creation_date": 1488931146, "answer_id": 42660589, "question_id": 42660040, "link": "https://stackoverflow.com/questions/42660040/rspec-expect-receive-withtime-range/42660589#42660589", "title": "Rspec expect receive(...).with(time_range)", "body": "<p>From <a href=\"https://makandracards.com/makandra/984-test-if-two-date-ranges-overlap-in-ruby-or-rails\" rel=\"nofollow noreferrer\">makandracards</a>:</p>\n\n<p><strong>Test if two date ranges overlap in Ruby or Rails</strong></p>\n\n<p>A check if two date or time ranges A and B overlap needs to cover a lot of cases:</p>\n\n<p>A partially overlaps B\nA surrounds B\nB surrounds A\nA occurs entirely after B\nB occurs entirely after A\nOne trick to cover all these cases with a single expression is to see if the start date of each range is looking at the end date of the other range in the same direction.</p>\n\n<p>The code below shows how to implement this in Ruby on Rails. The example is a class Interval, which has two attributes #start_date and #end_date. These dates are considered inclusive, meaning that if one interval ends on the day another interval starts, we consider those two intervals overlapping.</p>\n\n<p>Note how we implemented both a version for loaded Ruby objects (Interval#overlaps?) and a scope that returns all overlapping intervals (Interval.overlapping). Depending on your problem you might need one or both or those.</p>\n\n<pre><code>class Interval &lt; ActiveRecord::Base\n\n  validates_presence_of :start_date, :end_date\n\n  # Check if a given interval overlaps this interval    \n  def overlaps?(other)\n    (start_date - other.end_date) * (other.start_date - end_date) &gt;= 0\n  end\n\n  # Return a scope for all interval overlapping the given interval, including the given interval itself\n  named_scope :overlapping, lambda { |interval| {\n    :conditions =&gt; [\"id &lt;&gt; ? AND (TIMEDIFF(start_date, ?) * TIMEDIFF(?, end_date)) &gt;= 0\", interval.id, interval.end_date, interval.start_date]\n  }}\n\nend\n</code></pre>\n\n<p><strong>Explanation of the algorithm</strong></p>\n\n<p>You can picture the algorithm like this: \"If the beginnings of both ranges look at the end of the other range, do they both look in the same direction?\"</p>\n\n<p>If you draw on a piece of paper you can see that this statement is true for all cases where both ranges overlap:</p>\n\n<p>A partially overlaps B\nA surrounds B\nB surrounds A\nYou can also see that the statement is false where the ranges do not overlap:</p>\n\n<p>A occurs entirely after B\nB occurs entirely after A</p>\n"}, {"tags": [], "owner": {"reputation": 2360, "user_id": 790981, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/d61e824b2c253ba713e7284b79b812d3?s=128&d=identicon&r=PG", "display_name": "radiospiel", "link": "https://stackoverflow.com/users/790981/radiospiel"}, "is_accepted": false, "score": 1, "last_activity_date": 1587834633, "creation_date": 1587834633, "answer_id": 61429502, "question_id": 42660040, "link": "https://stackoverflow.com/questions/42660040/rspec-expect-receive-withtime-range/61429502#61429502", "title": "Rspec expect receive(...).with(time_range)", "body": "<p>You can, of course, just <code>expect(..).to receive(:foo) { |arg| do_something }</code> and check your expectation in the do_something block. The following should work:</p>\n\n<pre><code>range = Time.new(0)..(Time.new(0) + 1.hour)\n\nexpect(activities).to receive(:by_created_at) { |arg| \n                        expect(arg.first).to eq(Time.new(0))\n                      }\n</code></pre>\n\n<p>This works because a failed expects raises a rspec specific exception, and the RSpec runner doesn't care where in the execution such an exception would be raised, as long as it is during execution of the <code>it</code> block. </p>\n"}], "owner": {"reputation": 732, "user_id": 5613451, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/25e0c61e748f8241bc2955589f5d6661?s=128&d=identicon&r=PG&f=1", "display_name": "Mickey Sheu", "link": "https://stackoverflow.com/users/5613451/mickey-sheu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2988, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1587834633, "creation_date": 1488927970, "last_edit_date": 1488990459, "question_id": 42660040, "link": "https://stackoverflow.com/questions/42660040/rspec-expect-receive-withtime-range", "title": "Rspec expect receive(...).with(time_range)", "body": "<p>According to the <a href=\"https://relishapp.com/rspec/rspec-mocks/v/3-5/docs/setting-constraints/matching-arguments\" rel=\"nofollow noreferrer\">rspec expect message docs</a>, when we use code like:</p>\n\n<pre><code>expect(double).to receive(:message).with(argument)\n</code></pre>\n\n<p>and <code>argument</code> responds to <code>#===</code>, Rspec will call <code>argument.===</code> on whatever is actually passed in.  But what should I do if I want to check that a range of times is actually passed in?  </p>\n\n<p>For example, I wanted to test that this method sends the right message with the correct arguments (it's simplified):  </p>\n\n<pre><code>def in_date_range(range)\n  activities.by_created_at(range)\nend\n</code></pre>\n\n<p>And a test like: </p>\n\n<pre><code>it 'passes correct arguments' do\n  range = Time.new(0)..(Time.new(0) + 1.hour)\n\n  expect(activities).to receive(:by_created_at).with(range)\n\n  in_date_range(range)\nend\n</code></pre>\n\n<p>This fails with <code>TypeError: can't iterate from Time</code></p>\n\n<p>I am suspecting it's because which rspec tries to call <code>#===</code> on my time range and runs into trouble.  </p>\n\n<p>Is there a way to check that my range of times is actually the range I pass in? </p>\n\n<p>I'm not actually looking for the times to overlap, but rather that the ranges are the same: That have the same start and end points.  </p>\n\n<p>I suppose one way we can do this is to write a custom matcher, but it seems an unusual route. </p>\n\n<p><strong>EDIT</strong></p>\n\n<p>Another possible solution is to split the method into two pieces:</p>\n\n<pre><code>def compute_range(time_in)\n  (computations)\n  time1..time2\nend\n\ndef in_date_range(time_in)\n  range = compute_range(time_in)\n  activities.by_created_at(range)\nend\n</code></pre>\n\n<p>Then I can test compute method that it returns the proper range, and the for the larger method I can test that passes in the correct input, and takes the output of the smaller method  it takes the result from the first and passes into the other method, sidestepping the confusion of checking ranges in message.</p>\n\n<p>This doesn't fully answer the question - how do you check 'receive a specific range' with the rspec receive(:message), but is enough for me right now.  </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord", "sqlite"], "answers": [{"comments": [{"owner": {"reputation": 79, "user_id": 2319683, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3818b54ff586a464b20790d070aa2050?s=128&d=identicon&r=PG", "display_name": "user2319683", "link": "https://stackoverflow.com/users/2319683/user2319683"}, "edited": false, "score": 0, "creation_date": 1488933769, "post_id": 42659225, "comment_id": 72447826, "body": "What does it take to make  Somemodel.connection.foreign_key_exists?(:tablea, :tableb)  return true?"}, {"owner": {"reputation": 79, "user_id": 2319683, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3818b54ff586a464b20790d070aa2050?s=128&d=identicon&r=PG", "display_name": "user2319683", "link": "https://stackoverflow.com/users/2319683/user2319683"}, "edited": false, "score": 0, "creation_date": 1488935075, "post_id": 42659225, "comment_id": 72448168, "body": "So does ActiveRecord <b>implicitly</b> have foreign keys after the create  table migrations are run but just doesn&#39;t store them on whatever dbms is used?  If so, can foreign_key_exists? ever return true?"}], "tags": [], "owner": {"reputation": 11, "user_id": 7674960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b89e7033c8ae9b1229534721908a2161?s=128&d=identicon&r=PG&f=1", "display_name": "Manuel Costanzo", "link": "https://stackoverflow.com/users/7674960/manuel-costanzo"}, "is_accepted": false, "score": 1, "last_activity_date": 1488926645, "last_edit_date": 1488926645, "creation_date": 1488924293, "answer_id": 42659225, "question_id": 42658985, "link": "https://stackoverflow.com/questions/42658985/how-to-use-activerecord-to-force-a-foreign-key-in-sqlite3/42659225#42659225", "title": "How to use ActiveRecord to force a foreign key in SQLite3?", "body": "<p>try this</p>\n\n<pre><code>class CreateProducts &lt; ActiveRecord::Migration[5.0]\n  def change\n    create_table :products do |t|\n      t.string :name\n      t.text :description\n      t.float :cost\n      t.references :category, foreign_key: true\n      add_foreign_key :products, :categories, foreign_key: true\n\n      t.timestamps\n    end\n  end\nend\n</code></pre>\n\n<p>result:</p>\n\n<pre><code>CREATE TABLE \"products\" (\"id\" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, \"name\" varchar, \"description\" text, \"cost\" float, \"category_id\" integer, \"created_at\" datetime NOT NULL, \"updated_at\" datetime NOT NULL);\nCREATE INDEX \"index_products_on_category_id\" ON \"products\" (\"category_id\");\n</code></pre>\n"}], "owner": {"reputation": 79, "user_id": 2319683, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3818b54ff586a464b20790d070aa2050?s=128&d=identicon&r=PG", "display_name": "user2319683", "link": "https://stackoverflow.com/users/2319683/user2319683"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 425, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1488930455, "creation_date": 1488923322, "last_edit_date": 1488930455, "question_id": 42658985, "link": "https://stackoverflow.com/questions/42658985/how-to-use-activerecord-to-force-a-foreign-key-in-sqlite3", "title": "How to use ActiveRecord to force a foreign key in SQLite3?", "body": "<p>SQLite3 does not allow making the columns of an existing table into a foreign keys but it does allow that when creating a new table, but this code does not seem to create a table with a foreign key when I open the .sqlite3 file?</p>\n\n<pre><code>class CreateProducts &lt; ActiveRecord::Migration[5.0]\n  def change\n    create_table :products do |t|\n      t.string :name\n      t.text :description\n      t.float :cost\n      t.references :category, foreign_key: true\n\n      t.timestamps\n    end\n  end\nend\n</code></pre>\n\n<p>When I click \"products\" in DB Browser for SQLite, I expected it to display the following next to \"products\" in the schema:</p>\n\n<pre><code>CREATE TABLE `products` (\n    `id`    INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,\n    `name`  varchar,\n    `description`   text,\n    `cost`  float,\n    `category_id`   integer,\n    `created_at`    datetime NOT NULL,\n    `updated_at`    datetime NOT NULL,\n    FOREIGN KEY(`category_id`) REFERENCES categories ( id )\n);\n</code></pre>\n\n<p>Instead, the schema had the following next to \"products\":</p>\n\n<pre><code>CREATE TABLE `products` (\n    `id`    INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,\n    `name`  varchar,\n    `description`   text,\n    `cost`  float,\n    `category_id`   integer,\n    `created_at`    datetime NOT NULL,\n    `updated_at`    datetime NOT NULL,\n);\n</code></pre>\n\n<p>So how can I make the migration force the .sqlite3 file to have have a foreign key?</p>\n\n<p>Even after I manually edited the .sqlite3 file to include a foreign key between products and categories, the following in code in products_controller.rb returns false, false and true.</p>\n\n<pre><code>@current_connection = Product.connection\nputs @current_connection.foreign_key_exists?(:categories, :products)\nputs @current_connection.foreign_key_exists?(:products, :categories)\nputs @current_connection.index_exists?(:products, :category_id)\n</code></pre>\n\n<p>If the .sqlite3 is being used, why is the output to falses and one true?</p>\n\n<p>Also, will the PostgreSQL table have a foreign key when the migration to create products is run or will it have the same problem?</p>\n"}, {"tags": ["ruby", "self"], "comments": [{"owner": {"reputation": 52334, "user_id": 702638, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/892f65bc0a8a0949ab88598de7d83cab?s=128&d=identicon&r=PG", "display_name": "Hunter McMillen", "link": "https://stackoverflow.com/users/702638/hunter-mcmillen"}, "edited": false, "score": 2, "creation_date": 1488922997, "post_id": 42658851, "comment_id": 72443720, "body": "<code>self</code> already refers to the array object, your current code looks correct except for the fact that you don&#39;t square the elements of the array"}, {"owner": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 0, "creation_date": 1488923007, "post_id": 42658851, "comment_id": 72443727, "body": "<code>self</code>. The array is the instance you&#39;re dealing with."}, {"owner": {"reputation": 11, "user_id": 6000533, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d4ba3a8ade39463477e60dece11c945c?s=128&d=identicon&r=PG&f=1", "display_name": "gin85", "link": "https://stackoverflow.com/users/6000533/gin85"}, "edited": false, "score": 0, "creation_date": 1488924038, "post_id": 42658851, "comment_id": 72444231, "body": "oh I understand. thank you so much! :-)"}], "answers": [{"tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": true, "score": 0, "last_activity_date": 1488925614, "creation_date": 1488925614, "answer_id": 42659546, "question_id": 42658851, "link": "https://stackoverflow.com/questions/42658851/ruby-get-array-parameter-from-self-in-array-class/42659546#42659546", "title": "Ruby get array parameter from self in Array Class", "body": "<p>You're returning <code>self</code> as-is, unchanged, so that's how you're getting <code>[1,2,3]</code>. You've got what you need. What's next is to do something with it:</p>\n\n<pre><code>class Array\n  def square\n    map { |v| v ** 2 }\n  end\nend\n</code></pre>\n\n<p>The <code>map</code> method transforms one array into another. Here it's an implicit <code>self.map</code>.</p>\n"}], "owner": {"reputation": 11, "user_id": 6000533, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d4ba3a8ade39463477e60dece11c945c?s=128&d=identicon&r=PG&f=1", "display_name": "gin85", "link": "https://stackoverflow.com/users/6000533/gin85"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 235, "favorite_count": 0, "accepted_answer_id": 42659546, "answer_count": 1, "score": 0, "last_activity_date": 1488925614, "creation_date": 1488922826, "question_id": 42658851, "link": "https://stackoverflow.com/questions/42658851/ruby-get-array-parameter-from-self-in-array-class", "title": "Ruby get array parameter from self in Array Class", "body": "<pre><code>describe Array do\n describe \"#square\" do\n   it \"does nothing to an empty array\" do\n      expect([].square).to eq([])\n   end\n\n   it \"returns a new array containing the squares of each element\" do\n      expect([1,2,3].square).to eq([1,4,9])\n   end\n end\nend\n</code></pre>\n\n<p>In this code, I want to get the parameter '[1,2,3]'. </p>\n\n<pre><code>class Array\n    def square\n        self\n    end\nend\n</code></pre>\n\n<p>in the class Array, how can I get [1,2,3] using 'self'?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1488965372, "post_id": 42658769, "comment_id": 72459881, "body": "It&#39;s basically because : <code>&#39;abc&#39; == &#39;&#39;+&#39;a&#39;+&#39;&#39;+&#39;b&#39;+&#39;&#39;+&#39;c&#39;+&#39;&#39; #=&gt; true</code>"}], "answers": [{"comments": [{"owner": {"reputation": 379, "user_id": 3686187, "user_type": "registered", "accept_rate": 89, "profile_image": "https://graph.facebook.com/1668307335/picture?type=large", "display_name": "Roman", "link": "https://stackoverflow.com/users/3686187/roman"}, "edited": false, "score": 0, "creation_date": 1488924917, "post_id": 42659223, "comment_id": 72444678, "body": "Thanks a lot Jordan, that&#39;s an awesome explanation! Off I go to the website you linked, looks like quite an enlightening reading."}], "tags": [], "owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "is_accepted": true, "score": 3, "last_activity_date": 1488988675, "last_edit_date": 1488988675, "creation_date": 1488924287, "answer_id": 42659223, "question_id": 42658769, "link": "https://stackoverflow.com/questions/42658769/what-does-an-empty-regexp-match-in-ruby/42659223#42659223", "title": "What does an empty regexp match in Ruby?", "body": "<p>The regular expression <code>//</code> doesn't match any string; it matches any <em>zero-length</em> string.</p>\n\n<p>But let's back up. Consider this:</p>\n\n<pre><code>\"ab\".scan(/[a-z]/) # =&gt; [\"a\", \"b\"]\n</code></pre>\n\n<p>That's easy to understand. <code>String#scan</code> starts at index 0 and immediately finds a match, <code>a</code>, and adds it to its results array, which is now <code>[\"a\"]</code>. Then it advances its internal \"cursor\" to the first index after the matched text, which happens to be 1, where it again finds a match. Now its results are <code>[\"a\", \"b\"]</code>. Finally, it advances to index 2, which is past the end of the string, so it stops.</p>\n\n<p>Now consider your example:</p>\n\n<pre><code>\"abc\".scan(//)\n</code></pre>\n\n<p>This works the same way\u2014almost. <code>String#scan</code> starts at index 0 and immediately finds a match: the zero-length string before <code>a</code>. It adds it to its results array, which is now <code>[\"\"]</code>. But now we're in trouble. Because the match's length is 0, when <code>String#scan</code> advances to the first index after the match, it will still be at index 0. It ought to go into an infinite loop, right?</p>\n\n<p>At this point, the regular expression engine makes an executive decision. Because the previous match's length was zero, rather than fall into an infinite loop it advances the cursor by one character. Now the index is 1, whereupon it finds another match: the zero-length string before <code>b</code>. Now its results are <code>[\"\", \"\"]</code>. It advances the cursor by one character again and finds the zero-length string before <code>c</code>, and again, where it finds the zero-length string before the end of the string (after the <code>c</code>). Its final result, then, is <code>[\"\", \"\", \"\", \"\"]</code>.</p>\n\n<p>Here's a handy idiom for debugging <code>String#scan</code>:</p>\n\n<pre><code>\"abc\".scan(//) do\n  p $~, $~.offset(0)\nend\n</code></pre>\n\n<p><code>$~</code> is an alias for <code>Regexp.last_match</code>, which returns the <a href=\"https://ruby-doc.org/core-2.4.0/MatchData.html\" rel=\"nofollow noreferrer\">MatchData</a> object of the last match. <code>$~.offset(0)</code> returns an array containing the indexes of the beginning and end of the match (<code>$~.offset(1)</code> would return the beginning and end of the first capture group, and so on). In this case, we get:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>#&lt;MatchData \"\"&gt;\n[0, 0]\n#&lt;MatchData \"\"&gt;\n[1, 1]\n#&lt;MatchData \"\"&gt;\n[2, 2]\n#&lt;MatchData \"\"&gt;\n[3, 3]\n</code></pre>\n\n<p>As you can see, each time it matches an empty string (<code>\"\"</code>), the first match is at index 0, and the last match is at index 3 (\"after\" the last character in the string). Try it on repl.it: <a href=\"https://repl.it/GL3N\" rel=\"nofollow noreferrer\">https://repl.it/GL3N</a></p>\n\n<p>You can read more about how different regular expression engines handle zero-length matches at (of course) <a href=\"http://www.regular-expressions.info/zerolength.html#advance\" rel=\"nofollow noreferrer\">Regular-Expressions.info</a>.</p>\n"}], "owner": {"reputation": 379, "user_id": 3686187, "user_type": "registered", "accept_rate": 89, "profile_image": "https://graph.facebook.com/1668307335/picture?type=large", "display_name": "Roman", "link": "https://stackoverflow.com/users/3686187/roman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 387, "favorite_count": 0, "accepted_answer_id": 42659223, "answer_count": 1, "score": 2, "last_activity_date": 1488988675, "creation_date": 1488922460, "last_edit_date": 1488922736, "question_id": 42658769, "link": "https://stackoverflow.com/questions/42658769/what-does-an-empty-regexp-match-in-ruby", "title": "What does an empty regexp match in Ruby?", "body": "<p>I'm currently studying regular expressions in Ruby and there's one thing that I don't understand:</p>\n\n<pre><code>2.3.3 :015 &gt; 'abc'.scan(//)\n =&gt; [\"\", \"\", \"\", \"\"] \n2.3.3 :016 &gt; 'abc'.match(//)\n =&gt; #&lt;MatchData \"\"&gt; \n</code></pre>\n\n<p>I know that an empty regex is supposed to match any string, but why does <code>scan</code> return four matches in this example? Does it count the start and end of the string and then each 'space' between characters? What's the mechanism behind this result?</p>\n"}, {"tags": ["ruby", "file", "exception", "filesystems", "mp3"], "answers": [{"tags": [], "owner": {"reputation": 53, "user_id": 3633735, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/d5e84d6666dd28e30c31bd8d65eec5f8?s=128&d=identicon&r=PG&f=1", "display_name": "Technocrat3", "link": "https://stackoverflow.com/users/3633735/technocrat3"}, "is_accepted": false, "score": 0, "last_activity_date": 1488943840, "creation_date": 1488943840, "answer_id": 42662467, "question_id": 42658744, "link": "https://stackoverflow.com/questions/42658744/ruby-mp3info-not-closing-properly-before-moving/42662467#42662467", "title": "Ruby Mp3Info not closing properly before moving", "body": "<p>Fixed it by making sure the asynchronous stream was not open at the time of the move.</p>\n\n<p>I just kept the data it was pulling, in the object itself </p>\n\n<pre><code>def moveFilesIntoFolders\n  $mediaFiles.each do |file|\n    destinationFolder = \"#{PATH}/CONVERTED/#{file.genre}/#{file.soloArtist}/#{file.album}\"\n    unless File.directory?(destinationFolder)\n      begin\n        FileUtils.mkdir_p(destinationFolder)\n      rescue =&gt; exception\n        puts exception.backtrace\n        puts \"Error creating directory #{destinationFolder}\"\n      end\n    end\n    File.open(file.fullyQualifiedPath, \"r\") do |itemToMove|\n      begin\n        FileUtils.cp(itemToMove, destinationFolder)\n      rescue =&gt; exception\n        puts exception.backtrace\n        $errorMoving &lt;&lt; file.fileName\n        $errorMoving.each do |error|\n          puts \"errors moving: #{error}\"\n        end\n      end\n    end\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 53, "user_id": 3633735, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/d5e84d6666dd28e30c31bd8d65eec5f8?s=128&d=identicon&r=PG&f=1", "display_name": "Technocrat3", "link": "https://stackoverflow.com/users/3633735/technocrat3"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 19, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1488943840, "creation_date": 1488922357, "last_edit_date": 1488923824, "question_id": 42658744, "link": "https://stackoverflow.com/questions/42658744/ruby-mp3info-not-closing-properly-before-moving", "title": "Ruby Mp3Info not closing properly before moving", "body": "<p>I'm new to Ruby, so forgive my ignorance with the language.</p>\n\n<p>I wrote a simple application to help me organize my music. This application simply reads a folder, gets all of the MP3 files:</p>\n\n<p>If the Title tag contains a (feat. someArtist) then move it to the Artist tag</p>\n\n<p>and then just split the '(feat....)' stuff and store it separately so that I can use that to organize my music in separate folders by Genre/Artist/Album/songFile</p>\n\n<p>This is just my way of parsing all of my music and keeping folders to a minimum by stripping the 'features' this way \"Eminem (feat. Rihanna)\" won't have a separate folder and instead will just be placed within the \"Eminem\" folder.</p>\n\n<p>Here's my source:</p>\n\n<pre><code>require \"pry\"\nrequire \"mp3info\"\nrequire \"fileutils\"\n\nPATH = \"C:/Users/MyUser/Desktop/MusicFolder\"\n\n$mediaFiles = []\n$errorRenaming = []\n$errorMoving = []\n\nclass MusicFile\n  attr_accessor :fileName, :fullyQualifiedPath, :soloArtist\n  def initialize(fileName, fullyQualifiedPath)\n    @fileName = fileName\n    @fullyQualifiedPath = fullyQualifiedPath\n  end\nend\n\ndef printFiles\n  parseFileIntoArray\n  $mediaFiles.each do |item|\n    puts item.fullyQualifiedPath #prints all fileName's within the array\n  end\nend\n\n\nprivate\ndef parseFileIntoArray\n  fullyQualifiedFileNames = Dir.glob(\"#{PATH}/**/*.mp3\").select { |fn| File.file?(fn) }\n\n  fullyQualifiedFileNames.each do |files|\n    $mediaFiles &lt;&lt; MusicFile.new(files.split('/')[-1], files) #Store fully qualified filename inside of Array\n  end\nend\n\n#take all files, read artist\n#remove (feat) from it and store artist\n\ndef moveFilesIntoFolders\n  $mediaFiles.each do |file|\n    mp3File = Mp3Info.open(file.fullyQualifiedPath) #WHOLE PROGRAM DIES RIGHT HERE\n    destinationFolder = \"#{PATH}/CONVERTED/#{mp3File.tag.genre_s}/#{file.soloArtist}/#{mp3File.tag.album}\"\n    unless File.directory?(destinationFolder)\n      begin\n        FileUtils.mkdir_p(destinationFolder)\n      rescue =&gt; exception\n        puts exception.backtrace\n        puts \"Error creating directory #{destinationFolder}\"\n      end\n    end\n    File.open(file.fullyQualifiedPath, \"r\") do |itemToMove|\n      begin\n        FileUtils.cp(itemToMove, destinationFolder)\n      rescue =&gt; exception\n        puts exception.backtrace\n        $errorMoving &lt;&lt; file.fileName\n        $errorMoving.each do |error|\n          puts \"errors moving: #{error}\"\n        end\n      end\n    end\n    mp3File.close\n  end\n  puts \"leaving moveFilesIntoFolders\"\nend\n\ndef getFeatAndParse\n  $mediaFiles.each do |item|\n    mp3File = Mp3Info.open(item.fullyQualifiedPath)\n    item.soloArtist = mp3File.tag.artist\n      if mp3File.tag.title.include?(\"(feat\")\n         theIndex = mp3File.tag.title.index(\"(feat\")\n         substring = mp3File.tag.title[theIndex..-1]\n      elsif mp3File.tag.artist.include?(\"(feat\")\n          theIndex = mp3File.tag.artist.index(\"(feat\")\n          substring = mp3File.tag.artist[theIndex..-1]\n      end\n      mp3File.tag.artist.slice! substring\n      mp3File.tag.artist = mp3File.tag.artist.split.join(\" \")\n      item.soloArtist = mp3File.tag.artist\n      mp3File.tag.artist = \"#{mp3File.tag.artist} #{substring}\"\n      mp3File.close\n      begin\n        File.rename(item.fullyQualifiedPath, \"#{PATH}/#{mp3File.tag.title} - #{item.soloArtist} - #{mp3File.tag.album}.mp3\")\n      rescue =&gt; exception\n        puts exception.backtrace\n        $errorRenaming &lt;&lt; item.fileName\n        $errorRenaming.each do |error|\n          puts \"errors renaming: #{error}\"\n        end\n      end\n  end\nend\n\n\nparseFileIntoArray\ngetFeatAndParse\nmoveFilesIntoFolders\n</code></pre>\n\n<p>Inside my \"moveFilesIntoFolders\" method, it throws an exception on the MP3File.open statement.\nThe exception is as follows:</p>\n\n<pre><code>D:/Program Files/Ruby23-x64/lib/ruby/gems/2.3.0/gems/ruby-mp3info-0.8.10/lib/mp3\ninfo.rb:244:in `initialize': No such file or directory @ rb_sysopen - C:/Users/MyUser/Desktop/MusicFolder/test.mp3 (Errno::ENOENT)\n        from D:/Program Files/Ruby23-x64/lib/ruby/gems/2.3.0/gems/ruby-mp3info-0\n.8.10/lib/mp3info.rb:244:in `new'\n        from D:/Program Files/Ruby23-x64/lib/ruby/gems/2.3.0/gems/ruby-mp3info-0\n.8.10/lib/mp3info.rb:244:in `reload'\n        from D:/Program Files/Ruby23-x64/lib/ruby/gems/2.3.0/gems/ruby-mp3info-0\n.8.10/lib/mp3info.rb:230:in `initialize'\n        from D:/Program Files/Ruby23-x64/lib/ruby/gems/2.3.0/gems/ruby-mp3info-0\n.8.10/lib/mp3info.rb:300:in `new'\n        from D:/Program Files/Ruby23-x64/lib/ruby/gems/2.3.0/gems/ruby-mp3info-0\n.8.10/lib/mp3info.rb:300:in `open'\n        from ./main.rb:59:in `block in moveFilesIntoFolders'\n        from ./main.rb:58:in `each'\n        from ./main.rb:58:in `moveFilesIntoFolders'\n        from ./main.rb:124:in `&lt;main&gt;'\n</code></pre>\n\n<p>At the end of this, all of the files are renamed correct. Only moving them into folders has failed. My thought is that the Operating System hasn't fully completed renaming all of the files yet or reflected that, and so then trying to move the files is causing an exception because it's being read by another source already?</p>\n\n<p>If I re-run the application after the exception <strong>only</strong> running \"moveIntoFolders\" method, then it works perfectly. It's just the fact that I'm doing the renaming and then immediately doing the moving in a separate method that's causing the exception.\nSo is there a way to make Ruby wait for the process to finish completely or anything? I even tried doing a 'sleep' command and that didn't work..</p>\n\n<p>I just don't know enough about the language or have experience debugging it even using Pry to help me figure out the issue.</p>\n\n<p>Any help is appreciated.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "csv"], "comments": [{"owner": {"reputation": 580, "user_id": 6545696, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/20ccef418b14f7c1760c129883fe04f0?s=128&d=identicon&r=PG&f=1", "display_name": "rebbailey", "link": "https://stackoverflow.com/users/6545696/rebbailey"}, "edited": false, "score": 1, "creation_date": 1488921241, "post_id": 42658311, "comment_id": 72442788, "body": "I think you need to add <code>format: :csv</code> to <code>link_to</code>"}, {"owner": {"reputation": 1146, "user_id": 4232053, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/0986f0e77e408117b8557a825ad84289?s=128&d=identicon&r=PG&f=1", "display_name": "Ctpelnar1988", "link": "https://stackoverflow.com/users/4232053/ctpelnar1988"}, "reply_to_user": {"reputation": 580, "user_id": 6545696, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/20ccef418b14f7c1760c129883fe04f0?s=128&d=identicon&r=PG&f=1", "display_name": "rebbailey", "link": "https://stackoverflow.com/users/6545696/rebbailey"}, "edited": false, "score": 0, "creation_date": 1488922103, "post_id": 42658311, "comment_id": 72443241, "body": "Yes you are right. This allowed the button to be clicked, and the csv to download immediately after running the back-end code. Thank you! <code>link_to &quot;Download Employee CSV&quot;, download_employee_csv_path(format: :csv)</code>"}], "answers": [{"comments": [{"owner": {"reputation": 1146, "user_id": 4232053, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/0986f0e77e408117b8557a825ad84289?s=128&d=identicon&r=PG&f=1", "display_name": "Ctpelnar1988", "link": "https://stackoverflow.com/users/4232053/ctpelnar1988"}, "edited": false, "score": 0, "creation_date": 1488922049, "post_id": 42658452, "comment_id": 72443202, "body": "<code>csv &lt;&lt; attributes.map{ |attr| obj[attr.to_sym] }</code> did the trick! Thank you sir, I am most gracious."}], "tags": [], "owner": {"reputation": 2895, "user_id": 214759, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/0a643cb8407049539331506124310d20?s=128&d=identicon&r=PG", "display_name": "Jimmy Baker", "link": "https://stackoverflow.com/users/214759/jimmy-baker"}, "is_accepted": true, "score": 2, "last_activity_date": 1488926018, "last_edit_date": 1488926018, "creation_date": 1488921241, "answer_id": 42658452, "question_id": 42658311, "link": "https://stackoverflow.com/questions/42658311/how-to-convert-an-array-of-objects-to-csv-in-rails/42658452#42658452", "title": "How to convert an array of objects to CSV in Rails", "body": "<p>It looks like it's an array of Hashes. To access properties of a hash in Ruby you need to use brackets. Try updating your code to this:</p>\n\n<pre><code>csv &lt;&lt; attributes.map{ |attr| obj.send([], attr) }\n</code></pre>\n\n<p>or more concisely:</p>\n\n<pre><code>csv &lt;&lt; attributes.map{ |attr| obj[attr] }\n</code></pre>\n\n<p>One more thing, in the example you provided, the keys in the hash are symbols which means you may need to convert your attributes to symbols when trying to access them, like this:</p>\n\n<pre><code>csv &lt;&lt; attributes.map{ |attr| obj[attr.to_sym] }\n</code></pre>\n"}], "owner": {"reputation": 1146, "user_id": 4232053, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/0986f0e77e408117b8557a825ad84289?s=128&d=identicon&r=PG&f=1", "display_name": "Ctpelnar1988", "link": "https://stackoverflow.com/users/4232053/ctpelnar1988"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1243, "favorite_count": 3, "accepted_answer_id": 42658452, "answer_count": 1, "score": 1, "last_activity_date": 1488926018, "creation_date": 1488920688, "last_edit_date": 1488925938, "question_id": 42658311, "link": "https://stackoverflow.com/questions/42658311/how-to-convert-an-array-of-objects-to-csv-in-rails", "title": "How to convert an array of objects to CSV in Rails", "body": "<p>I have an array of objects. I am trying to create CSV data and allow the user to download that file but I get the following error:</p>\n\n<pre><code>Undefined method 'first_name' for Hash:0x007f946fc76590\n\n      employee_csv_data.each do |obj|\n        csv &lt;&lt; attributes.map{ |attr| obj.send(attr) }\n      end\n    end\n  end\n</code></pre>\n\n<p>This is the button that allows a user to download the CSV:</p>\n\n<pre><code>&lt;%= link_to \"Download Employee CSV\", download_employee_csv_path %&gt;\n</code></pre>\n\n<p>Controller:</p>\n\n<pre><code>def download_employee_csv\n  employee_csv_data = []\n  employees.each do |employee|\n    employee_csv_data &lt;&lt; {\n        first_name: employee[:first_name],\n        last_name: employee[:last_name],\n        email: employee_email,\n        phone1: employee[:phone1],\n        gender: employee[:gender],\n        veteran: employee[:veteran].to_s,\n        dob: employee[:dob],\n        core_score: service_score,\n        performance_rank: rank,\n        industry_modules_passed: industry_modules_passed\n      }\n  end \n\n  respond_to do |format|\n    format.html\n    format.csv { send_data Employer.to_csv(employee_csv_data), filename: \"download_employee_csv.csv\" }\n  end\nend\n</code></pre>\n\n<p>employee_csv_data:</p>\n\n<pre><code>=&gt; [{:first_name=&gt;\"Christopher\",\n  :last_name=&gt;\"Pelnar\",\n  :email=&gt;\"pelnar@gmail.com\",\n  :phone1=&gt;\"4072422433\",\n  :gender=&gt;\"male\",\n  :veteran=&gt;\"true\",\n  :dob=&gt;\"1988-09-09\",\n  :core_score=&gt;\"No Score\",\n  :performance_rank=&gt;\"No Rank\",\n  :industry_modules_passed=&gt;\"No Industry Modules Passed\"},\n {:first_name=&gt;\"chris\",\n  :last_name=&gt;\"pelnar\",\n  :email=&gt;\"chris@gmail.com\",\n  :phone1=&gt;\"4072422433\",\n  :gender=&gt;\"male\",\n  :veteran=&gt;\"true\",\n  :dob=&gt;\"1998-09-09\",\n  :core_score=&gt;\"729\",\n  :performance_rank=&gt;\"Good\",\n  :industry_modules_passed=&gt;\"Entry-Service, Entry-Tech\"}]\n</code></pre>\n\n<p>Model:</p>\n\n<pre><code>def self.to_csv(employee_csv_data)\n    attributes = %w(first_name last_name email phone gender veteran dob core_score performance_rank industry_modules_passed)\n\n    CSV.generate(headers: true) do |csv|\n      csv &lt;&lt; attributes\n\n      employee_csv_data.each do |obj|\n        csv &lt;&lt; attributes.map{ |attr| obj.send(attr) }\n      end\n    end\n  end\n</code></pre>\n\n<p>When I click the button, it takes me to the blank HTML page without any problem. When I add <code>.csv</code> to the filename in the URL on that page I get the error.</p>\n"}, {"tags": ["ruby", "big-o"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1488918961, "post_id": 42657570, "comment_id": 72441507, "body": "Don&#39;t just spam in a hundred of these questions. They&#39;re way too broad. This is trivial to <a href=\"https://ruby-doc.org/stdlib-2.4.0/libdoc/benchmark/rdoc/Benchmark.html\" rel=\"nofollow noreferrer\">Benchmark</a> if you&#39;re concerned about performance."}, {"owner": {"reputation": 6373, "user_id": 2715384, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/hwUTZ.jpg?s=128&g=1", "display_name": "the_prole", "link": "https://stackoverflow.com/users/2715384/the-prole"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1488919243, "post_id": 42657570, "comment_id": 72441684, "body": "Cleary the answer is O(n). Awesome."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1488919315, "post_id": 42657570, "comment_id": 72441725, "body": "Benchmarking is the concern since all the theory in the world means nothing when it comes to how Ruby actually behaves in practice. See <a href=\"https://accidentallyquadratic.tumblr.com\" rel=\"nofollow noreferrer\">this list of examples</a> where a reasonable assumption like that is completely wrong. Recently <code>reject!</code> was discovered to be inadvertently quadratic."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1488919539, "post_id": 42657570, "comment_id": 72441877, "body": "@tadman: that&#39;s a nice collection, thanks :)"}, {"owner": {"reputation": 6373, "user_id": 2715384, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/hwUTZ.jpg?s=128&g=1", "display_name": "the_prole", "link": "https://stackoverflow.com/users/2715384/the-prole"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1488920073, "post_id": 42657570, "comment_id": 72442175, "body": "@tadman One does not design an algorithm without an idea of it&#39;s theoretical cost. If you want to make another point, fine."}, {"owner": {"reputation": 73209, "user_id": 290394, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d7908f05c89e965f6bc5308ad6f41256?s=128&d=identicon&r=PG", "display_name": "steenslag", "link": "https://stackoverflow.com/users/290394/steenslag"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1488922094, "post_id": 42657570, "comment_id": 72443234, "body": "@tadman see my comment on the accepted answwer for another counter-intuitive benchmark(like) result"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1488922818, "post_id": 42657570, "comment_id": 72443629, "body": "There&#39;s nothing wrong with asking theoretical questions in general, it&#39;s just that Stack Overflow is not about theoreticals, it&#39;s about specific, concrete programming problems, primarily those that can be solved with code. If you&#39;re asking about this on a theoretical/algorithmic level there&#39;s the <a href=\"http://cs.stackexchange.com\">Computer Science</a> site specifically for that. This question is not bad, it&#39;s just in the wrong place."}], "answers": [{"comments": [{"owner": {"reputation": 4150, "user_id": 7470620, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/49f3026fe13841e41d1805178eed9a3c?s=128&d=identicon&r=PG", "display_name": "eiko", "link": "https://stackoverflow.com/users/7470620/eiko"}, "edited": false, "score": 0, "creation_date": 1488919436, "post_id": 42657699, "comment_id": 72441795, "body": "in ruby, if the strings have different lengths, it still runs in O(n) time because ruby&#39;s implementation manually counts each character to find the string length. this is not the case for languages like java, which calculate string length once and store it in a variable."}, {"owner": {"reputation": 73209, "user_id": 290394, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d7908f05c89e965f6bc5308ad6f41256?s=128&d=identicon&r=PG", "display_name": "steenslag", "link": "https://stackoverflow.com/users/290394/steenslag"}, "reply_to_user": {"reputation": 4150, "user_id": 7470620, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/49f3026fe13841e41d1805178eed9a3c?s=128&d=identicon&r=PG", "display_name": "eiko", "link": "https://stackoverflow.com/users/7470620/eiko"}, "edited": false, "score": 0, "creation_date": 1488921858, "post_id": 42657699, "comment_id": 72443108, "body": "@eiko as tadman says, benchmarking is important; and often counter-intuitive: <a href=\"http://codepad.org/pBu8Vdr3\" rel=\"nofollow noreferrer\">codepad.org/pBu8Vdr3</a> . Ruby does <i>not</i> seem to count each char every time."}, {"owner": {"reputation": 4150, "user_id": 7470620, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/49f3026fe13841e41d1805178eed9a3c?s=128&d=identicon&r=PG", "display_name": "eiko", "link": "https://stackoverflow.com/users/7470620/eiko"}, "reply_to_user": {"reputation": 73209, "user_id": 290394, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d7908f05c89e965f6bc5308ad6f41256?s=128&d=identicon&r=PG", "display_name": "steenslag", "link": "https://stackoverflow.com/users/290394/steenslag"}, "edited": false, "score": 0, "creation_date": 1488925353, "post_id": 42657699, "comment_id": 72444870, "body": "@steenslag the implementation of str.== doesn&#39;t use str.size, it uses RSTRING_LEN to count the length of the string in c."}, {"owner": {"reputation": 4150, "user_id": 7470620, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/49f3026fe13841e41d1805178eed9a3c?s=128&d=identicon&r=PG", "display_name": "eiko", "link": "https://stackoverflow.com/users/7470620/eiko"}, "edited": false, "score": 0, "creation_date": 1488925802, "post_id": 42657699, "comment_id": 72445044, "body": "though i&#39;m running a benchmark now and maybe RSTRING_LEN is constant time anyway? my mistake."}], "tags": [], "owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "is_accepted": true, "score": 2, "last_activity_date": 1488933945, "last_edit_date": 1488933945, "creation_date": 1488918506, "answer_id": 42657699, "question_id": 42657570, "link": "https://stackoverflow.com/questions/42657570/is-string-comparison-a-constant-cost/42657699#42657699", "title": "Is string comparison a constant cost?", "body": "<p>It's O(N) in the worst case for me. You have a loop that checks each character in both strings. It's O(1) in some cases:</p>\n\n<ul>\n<li>they are the same reference</li>\n<li>they have different lengths</li>\n<li>the parameter object is not a string (note that that code is syntactic sugar for <code>str1.==(str2)</code></li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "is_accepted": false, "score": 0, "last_activity_date": 1488918514, "creation_date": 1488918514, "answer_id": 42657702, "question_id": 42657570, "link": "https://stackoverflow.com/questions/42657570/is-string-comparison-a-constant-cost/42657702#42657702", "title": "Is string comparison a constant cost?", "body": "<p>Of course, test for equality is not O(1). If <code>str1</code> and <code>str2</code> point to the same object, then this can short-circuit as an <em>identity</em> test, which is O(1). (also some other cases, as pointed out by @ursus)</p>\n\n<blockquote>\n  <p>How about in other programming languages?</p>\n</blockquote>\n\n<p>Pretty much the same. Fundamentals don't change from language to language.</p>\n"}], "owner": {"reputation": 6373, "user_id": 2715384, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/hwUTZ.jpg?s=128&g=1", "display_name": "the_prole", "link": "https://stackoverflow.com/users/2715384/the-prole"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 654, "favorite_count": 1, "accepted_answer_id": 42657699, "answer_count": 2, "score": -1, "last_activity_date": 1488933945, "creation_date": 1488918047, "last_edit_date": 1488918351, "question_id": 42657570, "link": "https://stackoverflow.com/questions/42657570/is-string-comparison-a-constant-cost", "title": "Is string comparison a constant cost?", "body": "<p>Say I want to compare two strings, str1 and str2, for equality.</p>\n\n<pre><code>p str1 == str2\n</code></pre>\n\n<p>What is the complexity of the comparison operation in big O notation? Is it O(1)?</p>\n\n<p>How about in other programming languages?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec"], "comments": [{"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "edited": false, "score": 0, "creation_date": 1488917131, "post_id": 42657275, "comment_id": 72440502, "body": "your <code>Result of method is this..</code> is invalid Ruby object, double check it ;)"}, {"owner": {"reputation": 953, "user_id": 942135, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6940a140b70676e63569f347b6642f68?s=128&d=identicon&r=PG", "display_name": "trueunlessfalse", "link": "https://stackoverflow.com/users/942135/trueunlessfalse"}, "edited": false, "score": 0, "creation_date": 1488917258, "post_id": 42657275, "comment_id": 72440569, "body": "Maybe this helps? <a href=\"http://apidock.com/rspec/Spec/Mocks/ArgumentMatchers/hash_including\" rel=\"nofollow noreferrer\">apidock.com/rspec/Spec/Mocks/ArgumentMatchers/hash_including</a>"}, {"owner": {"reputation": 5, "user_id": 7190961, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YJnQx.jpg?s=128&g=1", "display_name": "JoaWa", "link": "https://stackoverflow.com/users/7190961/joawa"}, "reply_to_user": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "edited": false, "score": 0, "creation_date": 1488917687, "post_id": 42657275, "comment_id": 72440789, "body": "True @AndreyDeineko reformatted the assertion to be more ruby. Thanks!"}, {"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "edited": false, "score": 0, "creation_date": 1488917747, "post_id": 42657275, "comment_id": 72440823, "body": "@JoaWa i meant, that <code>&#39;model_attributes&#39;: [     {attr1: T, attrA: 1},      {attr2: F, attrB: 2},      {attr3: T, attrC: 3} ]</code> is not a valid object in Ruby. It looks almost like a hash, but it lacks braces and still would be invalid because of <code>T</code>, <code>F</code> - these will throw an <code>Uninitialized constant T</code>"}, {"owner": {"reputation": 5, "user_id": 7190961, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YJnQx.jpg?s=128&g=1", "display_name": "JoaWa", "link": "https://stackoverflow.com/users/7190961/joawa"}, "reply_to_user": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "edited": false, "score": 0, "creation_date": 1488918562, "post_id": 42657275, "comment_id": 72441260, "body": "Sorry for the lack of clarity @AndreyDeineko. Provided the big picture return sample.  Was aiming for brevity, but lacked in accuracy. Thanks for input."}, {"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "edited": false, "score": 0, "creation_date": 1488918838, "post_id": 42657275, "comment_id": 72441435, "body": "@JoaWa no probs. answered. Always provide input that is a valid Ruby object. Users do not like to type things, copypasting is the way to go ;)"}], "answers": [{"comments": [{"owner": {"reputation": 5, "user_id": 7190961, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YJnQx.jpg?s=128&g=1", "display_name": "JoaWa", "link": "https://stackoverflow.com/users/7190961/joawa"}, "edited": false, "score": 0, "creation_date": 1489088500, "post_id": 42657789, "comment_id": 72530229, "body": "Thanks Andrey - ended up borrowing this strategy."}], "tags": [], "owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "is_accepted": true, "score": 2, "last_activity_date": 1488918764, "creation_date": 1488918764, "answer_id": 42657789, "question_id": 42657275, "link": "https://stackoverflow.com/questions/42657275/rspec-expect-hash-to-include-an-array-of-key-value-pairs/42657789#42657789", "title": "RSpec Expect Hash to include an Array of key value pairs", "body": "<pre><code>describe 'Stuff' do\n  let(:model_attributes) do\n    [\n      {attr1: 'T', attrA: 1}, \n      {attr2: 'F', attrB: 2}, \n      {attr3: 'T', attrC: 3}\n    ]\n  end\n  let(:result) do\n    { supermodel: \n      {\n        'id': 1,\n        'name': 'J',\n        'model_attributes': model_attributes\n      }\n    }\n  end\n\n  it 'has the correct model_attributes value' do\n    expect(result.dig(:supermodel, :model_attributes)).to eq(model_attributes)\n  end\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 631, "user_id": 134327, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NW2l2.png?s=128&g=1", "display_name": "Mario Carrion", "link": "https://stackoverflow.com/users/134327/mario-carrion"}, "is_accepted": false, "score": 0, "last_activity_date": 1488922775, "creation_date": 1488922775, "answer_id": 42658833, "question_id": 42657275, "link": "https://stackoverflow.com/questions/42657275/rspec-expect-hash-to-include-an-array-of-key-value-pairs/42658833#42658833", "title": "RSpec Expect Hash to include an Array of key value pairs", "body": "<p>Try</p>\n\n<pre><code>describe 'ModelAttributes' do\n  let(:model_attributes) { [{ attr1: 'T', attrA: 1 },\n                            { attr2: 'F', attrB: 2 },\n                            { attr3: 'T', attrC: 3 }] }\n\n  it 'includes the required attributes' do\n    expect(model_attributes).to include({ attr2:'F', attrB: 2 }, { attr3: 'T', attrC: 3 })\n  end\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 5, "user_id": 7190961, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YJnQx.jpg?s=128&g=1", "display_name": "JoaWa", "link": "https://stackoverflow.com/users/7190961/joawa"}, "is_accepted": false, "score": 0, "last_activity_date": 1489088850, "creation_date": 1489088850, "answer_id": 42704167, "question_id": 42657275, "link": "https://stackoverflow.com/questions/42657275/rspec-expect-hash-to-include-an-array-of-key-value-pairs/42704167#42704167", "title": "RSpec Expect Hash to include an Array of key value pairs", "body": "<p>In retrospect this is alot easier now. Simply traversing the hash and expecting the values was the easiest way. Refactoring ended me up in doing this:</p>\n\n<pre><code>supermodel[:model_attributes].each do |attr|\n    expect(attr[:attrB])to be 2\nend\n</code></pre>\n\n<p>Thanks for all the suggestions, led me down the right path.</p>\n"}], "owner": {"reputation": 5, "user_id": 7190961, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YJnQx.jpg?s=128&g=1", "display_name": "JoaWa", "link": "https://stackoverflow.com/users/7190961/joawa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2014, "favorite_count": 0, "accepted_answer_id": 42657789, "answer_count": 3, "score": 0, "last_activity_date": 1525848814, "creation_date": 1488916956, "last_edit_date": 1488918388, "question_id": 42657275, "link": "https://stackoverflow.com/questions/42657275/rspec-expect-hash-to-include-an-array-of-key-value-pairs", "title": "RSpec Expect Hash to include an Array of key value pairs", "body": "<p>Still learning Rspec as a whole, so thanks for patience. </p>\n\n<p>Return value is this:</p>\n\n<pre><code>{ supermodel: {\n    'id': 1,\n    'name': 'J',\n    'model_attributes': [\n        {attr1: 'T', attrA: 1}, \n        {attr2: 'F', attrB: 2}, \n        {attr3: 'T', attrC: 3}\n        ],\n    }\n}\n</code></pre>\n\n<p>Trying to get an expectation that says that a hash key named 'model_attributes' contains a value of an array that includes the following key value pairs - <code>{attr2:F, attrB: 2}</code> and <code>{attr3: T, attrC: 3}</code>.</p>\n\n<p>Any insight would be welcome.</p>\n"}, {"tags": ["ruby", "rspec", "parameters"], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 6000533, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d4ba3a8ade39463477e60dece11c945c?s=128&d=identicon&r=PG&f=1", "display_name": "gin85", "link": "https://stackoverflow.com/users/6000533/gin85"}, "edited": false, "score": 0, "creation_date": 1488920488, "post_id": 42657042, "comment_id": 72442415, "body": "I have one more question, if you don&#39;t mind. so you said it has already initialize in it, and what if I want to get only [1,2,4] the array itself? how can I access it? (in your answer above, how does &#39;x&#39; get the array [1,2,4]?"}, {"owner": {"reputation": 953, "user_id": 942135, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6940a140b70676e63569f347b6642f68?s=128&d=identicon&r=PG", "display_name": "trueunlessfalse", "link": "https://stackoverflow.com/users/942135/trueunlessfalse"}, "reply_to_user": {"reputation": 11, "user_id": 6000533, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d4ba3a8ade39463477e60dece11c945c?s=128&d=identicon&r=PG&f=1", "display_name": "gin85", "link": "https://stackoverflow.com/users/6000533/gin85"}, "edited": false, "score": 0, "creation_date": 1488927591, "post_id": 42657042, "comment_id": 72445852, "body": "In the example above &#39;self&#39; is referencing the array. &#39;def sum&#39; is an instance method, so self inside this method refers to the instance of the array - In this case [1, 2, 4]  What inject does is basically defining sum = 0; then iterating through the array (x always being one element in the array)."}], "tags": [], "owner": {"reputation": 953, "user_id": 942135, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6940a140b70676e63569f347b6642f68?s=128&d=identicon&r=PG", "display_name": "trueunlessfalse", "link": "https://stackoverflow.com/users/942135/trueunlessfalse"}, "is_accepted": true, "score": 1, "last_activity_date": 1488916137, "creation_date": 1488916137, "answer_id": 42657042, "question_id": 42656956, "link": "https://stackoverflow.com/questions/42656956/ruby-method-doesnt-get-array-parameter/42657042#42657042", "title": "Ruby method doesn&#39;t get array parameter", "body": "<p>As the existing array class already has an initializer, and self inside the instance of an array already is an array, you don't need to add your own initializer</p>\n\n<pre><code>class Array\n\n  def sum\n    self.inject(0){|sum,x| sum + x }\n  end\n\nend\n</code></pre>\n\n<p>should do what you want. Lookup inject if it isn't clear, but it does essentially the same that you tried to do with your code, just that you were using a local variable to store the sum.</p>\n\n<p>If this is not only an experiment however I recommend not do monkey patches on core classes if avoidable (and it usually is avoidable). Here's an article with some hints how to do it a bit cleaner, if not avoidable: <a href=\"http://www.justinweiss.com/articles/3-ways-to-monkey-patch-without-making-a-mess/\" rel=\"nofollow noreferrer\">http://www.justinweiss.com/articles/3-ways-to-monkey-patch-without-making-a-mess/</a></p>\n"}], "owner": {"reputation": 11, "user_id": 6000533, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d4ba3a8ade39463477e60dece11c945c?s=128&d=identicon&r=PG&f=1", "display_name": "gin85", "link": "https://stackoverflow.com/users/6000533/gin85"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 88, "favorite_count": 0, "accepted_answer_id": 42657042, "answer_count": 1, "score": 0, "last_activity_date": 1488916137, "creation_date": 1488915791, "question_id": 42656956, "link": "https://stackoverflow.com/questions/42656956/ruby-method-doesnt-get-array-parameter", "title": "Ruby method doesn&#39;t get array parameter", "body": "<pre><code>describe Array do\n  describe \"#sum\" do\n    it \"has a #sum method\" do\n      expect([]).to respond_to(:sum)\n    end\n\n    it \"should be 0 for an empty array\" do\n      expect([].sum).to eq(0)\n    end\n\n    it \"should add all of the elements\" do\n      expect([1,2,4].sum).to eq(7)\n    end\n  end\nend\n</code></pre>\n\n<p>the code above is the test code given to me. and I made the code below to be tested by the test code.</p>\n\n<pre><code>class Array\n\n    def initialize(arr)\n        @arr = arr    \n    end\n\n    def sum\n        if @arr == nil\n            return 0\n        else\n            numArr = @arr\n            total = 0 \n            numArr.each {|num|\n                total += num\n            }\n            return total\n        end\n    end\nend\n</code></pre>\n\n<p>I thought it would return total 7. (1+2+4 = 7) but it returns 0... I guess it doesn't take [1,2,4] array as a parameter. what am I doing wrong?</p>\n"}, {"tags": ["ruby-on-rails", "arrays", "ruby", "controller"], "comments": [{"owner": {"reputation": 2116, "user_id": 6780663, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9207ba3b9163582570078b687f9b2792?s=128&d=identicon&r=PG&f=1", "display_name": "Alejandro Montilla", "link": "https://stackoverflow.com/users/6780663/alejandro-montilla"}, "edited": false, "score": 0, "creation_date": 1488916037, "post_id": 42656895, "comment_id": 72439843, "body": "What you need is: 1) the first 6 post, 2) the 7th post, and 3) the remainder?"}, {"owner": {"reputation": 25, "user_id": 7441516, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/1010983168e5a9411118f16f510b0492?s=128&d=identicon&r=PG&f=1", "display_name": "Ian", "link": "https://stackoverflow.com/users/7441516/ian"}, "reply_to_user": {"reputation": 2116, "user_id": 6780663, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9207ba3b9163582570078b687f9b2792?s=128&d=identicon&r=PG&f=1", "display_name": "Alejandro Montilla", "link": "https://stackoverflow.com/users/6780663/alejandro-montilla"}, "edited": false, "score": 0, "creation_date": 1488916946, "post_id": 42656895, "comment_id": 72440397, "body": "Yes, exactly and to show on the home page"}, {"owner": {"reputation": 2503, "user_id": 942986, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/tR28w.jpg?s=128&g=1", "display_name": "fabriciofreitag", "link": "https://stackoverflow.com/users/942986/fabriciofreitag"}, "edited": false, "score": 0, "creation_date": 1488924386, "post_id": 42656895, "comment_id": 72444423, "body": "@Ian, please test my answer."}], "answers": [{"comments": [{"owner": {"reputation": 2503, "user_id": 942986, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/tR28w.jpg?s=128&g=1", "display_name": "fabriciofreitag", "link": "https://stackoverflow.com/users/942986/fabriciofreitag"}, "edited": false, "score": 0, "creation_date": 1488919189, "post_id": 42657795, "comment_id": 72441649, "body": "Good solution, but it can be inaccurate, since the post number can easily change from the first query to the last."}, {"owner": {"reputation": 2116, "user_id": 6780663, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9207ba3b9163582570078b687f9b2792?s=128&d=identicon&r=PG&f=1", "display_name": "Alejandro Montilla", "link": "https://stackoverflow.com/users/6780663/alejandro-montilla"}, "reply_to_user": {"reputation": 2503, "user_id": 942986, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/tR28w.jpg?s=128&g=1", "display_name": "fabriciofreitag", "link": "https://stackoverflow.com/users/942986/fabriciofreitag"}, "edited": false, "score": 0, "creation_date": 1488919272, "post_id": 42657795, "comment_id": 72441696, "body": "Yeah, I&#39;ve seen yours and its better"}, {"owner": {"reputation": 25, "user_id": 7441516, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/1010983168e5a9411118f16f510b0492?s=128&d=identicon&r=PG&f=1", "display_name": "Ian", "link": "https://stackoverflow.com/users/7441516/ian"}, "edited": false, "score": 0, "creation_date": 1488921169, "post_id": 42657795, "comment_id": 72442756, "body": "It is still throwing a error for &quot;undefined method `each&#39; for #&lt;Post:0x007fb0f71ca7a0&gt;&#39;&quot; It seems that the each method is having a problem only grabbing one item"}, {"owner": {"reputation": 2503, "user_id": 942986, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/tR28w.jpg?s=128&g=1", "display_name": "fabriciofreitag", "link": "https://stackoverflow.com/users/942986/fabriciofreitag"}, "reply_to_user": {"reputation": 25, "user_id": 7441516, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/1010983168e5a9411118f16f510b0492?s=128&d=identicon&r=PG&f=1", "display_name": "Ian", "link": "https://stackoverflow.com/users/7441516/ian"}, "edited": false, "score": 0, "creation_date": 1488922275, "post_id": 42657795, "comment_id": 72443320, "body": "@Ian can you please check my answer above?"}, {"owner": {"reputation": 25, "user_id": 7441516, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/1010983168e5a9411118f16f510b0492?s=128&d=identicon&r=PG&f=1", "display_name": "Ian", "link": "https://stackoverflow.com/users/7441516/ian"}, "reply_to_user": {"reputation": 2503, "user_id": 942986, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/tR28w.jpg?s=128&g=1", "display_name": "fabriciofreitag", "link": "https://stackoverflow.com/users/942986/fabriciofreitag"}, "edited": false, "score": 0, "creation_date": 1488930762, "post_id": 42657795, "comment_id": 72446939, "body": "Hey @fabriciofreitag yours was correct but everytime you add a post it won&#39;t rotate through and if I need to grab the 8th one I can&#39;t keep grabbing the last one of the array. I figured it out by the following <code>class HomeController &lt; ApplicationController   def index&lt;&#47;br&gt;     @posts = Post.all.order(&#39;created_at DESC&#39;)     @onetofive = @posts[0..5]     @six = @posts[6..6]     @seven = @posts[7..7]     @eight = @posts[8..8]     @ninetoeleven = @posts[9..11]   end end</code>"}], "tags": [], "owner": {"reputation": 2116, "user_id": 6780663, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9207ba3b9163582570078b687f9b2792?s=128&d=identicon&r=PG&f=1", "display_name": "Alejandro Montilla", "link": "https://stackoverflow.com/users/6780663/alejandro-montilla"}, "is_accepted": false, "score": 0, "last_activity_date": 1488918778, "creation_date": 1488918778, "answer_id": 42657795, "question_id": 42656895, "link": "https://stackoverflow.com/questions/42656895/rails-selecting-the-first-6-posts-for-a-blog-and-then-selecting-the-7th-and-so/42657795#42657795", "title": "Rails: Selecting the first 6 posts for a blog and then selecting the 7th and so on", "body": "<p>I think what you need is something like this:</p>\n\n<pre><code>@post1to6 = Post.all.order('created_at DESC').first(6) #top 6\n\n@post7 = Post.all.order('created_at DESC').first(7).last #7th\n\nnum_post=Post.all.order('created_at DESC').count\n@postRemainder = Post.all.order('created_at DESC').last(num_post-7) #Remainder\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2503, "user_id": 942986, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/tR28w.jpg?s=128&g=1", "display_name": "fabriciofreitag", "link": "https://stackoverflow.com/users/942986/fabriciofreitag"}, "is_accepted": false, "score": 0, "last_activity_date": 1488919005, "creation_date": 1488919005, "answer_id": 42657843, "question_id": 42656895, "link": "https://stackoverflow.com/questions/42656895/rails-selecting-the-first-6-posts-for-a-blog-and-then-selecting-the-7th-and-so/42657843#42657843", "title": "Rails: Selecting the first 6 posts for a blog and then selecting the 7th and so on", "body": "<pre><code>all_posts = Post.all.order('created_at DESC')\nfirst_seven_posts = all_posts.take(7)\n@first_six_posts = first_seven_posts.take(6)\n@seventh_post = first_seven_posts.last\n@other_posts = all_posts.where('id NOT IN (?)', first_seven_posts.map(&amp;:id))\n</code></pre>\n"}], "owner": {"reputation": 25, "user_id": 7441516, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/1010983168e5a9411118f16f510b0492?s=128&d=identicon&r=PG&f=1", "display_name": "Ian", "link": "https://stackoverflow.com/users/7441516/ian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 60, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1488919005, "creation_date": 1488915568, "question_id": 42656895, "link": "https://stackoverflow.com/questions/42656895/rails-selecting-the-first-6-posts-for-a-blog-and-then-selecting-the-7th-and-so", "title": "Rails: Selecting the first 6 posts for a blog and then selecting the 7th and so on", "body": "<p>I am new to rails and I am creating a blog to look simliar to an Esquire website where they have the latest six posts at the top of the page lined up next to each other and then a little down the page they will have a large post by itself which continues the posts array so it would really be the 7th post and then a bit farther down the page you would have the next three posts 8-11 and so on. </p>\n\n<p>I am having a difficult time trying to make the controller an array where I can call the first six items and then the 7th item separately later down the home page.</p>\n\n<p>Posts Controller:</p>\n\n<pre><code>class PostsController &lt; ApplicationController\n  before_action :set_post, only: [:show, :edit, :update, :destroy]\n  before_action :authenticate_user!, except: [:index, :show]\n\n  # GET /posts\n  # GET /posts.json\n  def index\n    @posts = Post.all\n  end\n\n  # GET /posts/1\n  # GET /posts/1.json\n  def show\n    @posts = Post.all.order('created_at DESC')\n    @topsix = @posts.take(6)\n  end\n\n  # GET /posts/new\n  def new\n    @post = current_user.posts.build\n    @categories = Category.all.map{|c| [ c.name, c.id ] }\n  end\n\n  # GET /posts/1/edit\n  def edit\n    @categories = Category.all.map{|c| [ c.name, c.id ] }\n  end\n\n  # POST /posts\n  # POST /posts.json\n  def create\n   @post = current_user.posts.build(post_params)\n   @post.category_id = params[:category_id]\n     respond_to do |format|\n       if @post.save\n          format.html { redirect_to @post, notice: \"post was successfully created.\" }\n           format.json { render :show, status: :created, location: @post }\n       else\n           format.html { render :new }\n           format.json { render json: @post.errors, status: :unprocessable_entity }\n       end\n    end\n  end\n\n  # PATCH/PUT /posts/1\n  # PATCH/PUT /posts/1.json\n  def update\n    respond_to do |format|\n      if @post.update(post_params)\n        format.html { redirect_to @post, notice: 'Post was successfully updated.' }\n        format.json { render :show, status: :ok, location: @post }\n      else\n        format.html { render :edit }\n        format.json { render json: @post.errors, status: :unprocessable_entity }\n      end\n    end\n    @post.category_id = params[:category_id]\n  end\n\n  # DELETE /posts/1\n  # DELETE /posts/1.json\n  def destroy\n    @post.destroy\n    respond_to do |format|\n      format.html { redirect_to posts_url, notice: 'Post was successfully destroyed.' }\n      format.json { head :no_content }\n    end\n  end\n\n  private\n    # Use callbacks to share common setup or constraints between actions.\n    def set_post\n      @post = Post.find(params[:id])\n    end\n\n    # Never trust parameters from the scary internet, only allow the white list through.\n    def post_params\n      params.require(:post).permit(:title, :excerpt, :create_date, :author, :body, :category_id, :image)\n    end\nend\n</code></pre>\n\n<p>Home Controller:</p>\n\n<pre><code>class HomeController &lt; ApplicationController\n  def index\n    @posts = Post.all.order('created_at DESC')\n    @topsix = @posts.take(6)\n    @first3 = @posts.order('created_at DESC').take(3)\n    @sidebar = @posts.take(3)\n    @first4 = @posts.take(4)\n    @first = @posts.take(1)\n  end\nend\n</code></pre>\n\n<p>Where I am calling it on the Home page:</p>\n\n<pre><code>&lt;div class=\"row no-gutters\"&gt;\n  &lt;% @topsix.select { |post| post &gt; 6 } %&gt;\n    &lt;div class=\"col-md-2\"&gt;&lt;%= image_tag post.image.url(:large), class: \"img-responsive\"%&gt;\n      &lt;h6 class=\"small-title\"&gt;&lt;%= link_to post.title, post %&gt;&lt;/h6&gt;\n    &lt;/div&gt;\n  &lt;% end %&gt;\n&lt;/div&gt;\n</code></pre>\n"}, {"tags": ["ruby", "sorting", "hash", "substring", "pos-tagger"], "comments": [{"owner": {"reputation": 953, "user_id": 942135, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6940a140b70676e63569f347b6642f68?s=128&d=identicon&r=PG", "display_name": "trueunlessfalse", "link": "https://stackoverflow.com/users/942135/trueunlessfalse"}, "edited": false, "score": 0, "creation_date": 1488915057, "post_id": 42656592, "comment_id": 72439235, "body": "maybe this: filtered_noun_phrases = sorted_noun_phrases.reject{|a| sorted_noun_phrases.keys.any?{|b| b != a and b.index(a) } }.to_h"}, {"owner": {"reputation": 35, "user_id": 6718128, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba88774ebb1beb7c8f09955f4856365c?s=128&d=identicon&r=PG&f=1", "display_name": "James Balazs", "link": "https://stackoverflow.com/users/6718128/james-balazs"}, "reply_to_user": {"reputation": 953, "user_id": 942135, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6940a140b70676e63569f347b6642f68?s=128&d=identicon&r=PG", "display_name": "trueunlessfalse", "link": "https://stackoverflow.com/users/942135/trueunlessfalse"}, "edited": false, "score": 0, "creation_date": 1488915323, "post_id": 42656592, "comment_id": 72439389, "body": "That works thanks! Kind of seems like a dumb question in hindsight but I did that earlier and it was removing the longer phrases and leaving the substrings..."}, {"owner": {"reputation": 953, "user_id": 942135, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6940a140b70676e63569f347b6642f68?s=128&d=identicon&r=PG", "display_name": "trueunlessfalse", "link": "https://stackoverflow.com/users/942135/trueunlessfalse"}, "edited": false, "score": 0, "creation_date": 1488916454, "post_id": 42656592, "comment_id": 72440095, "body": "Maybe its worth to mention that I did not only change reject to select, but also a.index(b) to b.index(a("}], "answers": [{"comments": [{"owner": {"reputation": 953, "user_id": 942135, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6940a140b70676e63569f347b6642f68?s=128&d=identicon&r=PG", "display_name": "trueunlessfalse", "link": "https://stackoverflow.com/users/942135/trueunlessfalse"}, "edited": false, "score": 0, "creation_date": 1488915627, "post_id": 42656846, "comment_id": 72439573, "body": "Ah, thank you! I just added an answer with a bit of an explanation above. Cheers."}], "tags": [], "owner": {"reputation": 35, "user_id": 6718128, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba88774ebb1beb7c8f09955f4856365c?s=128&d=identicon&r=PG&f=1", "display_name": "James Balazs", "link": "https://stackoverflow.com/users/6718128/james-balazs"}, "is_accepted": false, "score": 0, "last_activity_date": 1488915409, "creation_date": 1488915409, "answer_id": 42656846, "question_id": 42656592, "link": "https://stackoverflow.com/questions/42656592/filtering-duplicate-substrings-from-a-hash-in-ruby/42656846#42656846", "title": "Filtering duplicate substrings from a hash in Ruby", "body": "<pre><code>filtered_noun_phrases = sorted_noun_phrases.reject{|a| sorted_noun_phrases.keys.any?{|b| b != a and b.index(a) } }.to_h\n</code></pre>\n\n<p>- trueunlessfalse</p>\n"}, {"comments": [{"owner": {"reputation": 35, "user_id": 6718128, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba88774ebb1beb7c8f09955f4856365c?s=128&d=identicon&r=PG&f=1", "display_name": "James Balazs", "link": "https://stackoverflow.com/users/6718128/james-balazs"}, "edited": false, "score": 0, "creation_date": 1488916258, "post_id": 42656905, "comment_id": 72439973, "body": "Thank you, selected as answer!"}], "tags": [], "owner": {"reputation": 953, "user_id": 942135, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6940a140b70676e63569f347b6642f68?s=128&d=identicon&r=PG", "display_name": "trueunlessfalse", "link": "https://stackoverflow.com/users/942135/trueunlessfalse"}, "is_accepted": true, "score": 0, "last_activity_date": 1488915591, "creation_date": 1488915591, "answer_id": 42656905, "question_id": 42656592, "link": "https://stackoverflow.com/questions/42656592/filtering-duplicate-substrings-from-a-hash-in-ruby/42656905#42656905", "title": "Filtering duplicate substrings from a hash in Ruby", "body": "<p>What you are currently doing is selecting all phrases for which any phrase exist that is a substring of the phrase.</p>\n\n<p>For \"troops retake main government office\" this is true, as we find \"retake main government office\".</p>\n\n<p>However for \"retake main government office\" we still find \"main government office\", thus not filtering it out.</p>\n\n<p>Doing for instance: </p>\n\n<pre><code> filtered_noun_phrases = sorted_noun_phrases.reject{|a| sorted_noun_phrases.keys.any?{|b| b != a and b.index(a) } }.to_h\n</code></pre>\n\n<p>you can reject all phrases for which any string exists that includes the phrase.</p>\n"}], "owner": {"reputation": 35, "user_id": 6718128, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba88774ebb1beb7c8f09955f4856365c?s=128&d=identicon&r=PG&f=1", "display_name": "James Balazs", "link": "https://stackoverflow.com/users/6718128/james-balazs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 34, "favorite_count": 0, "accepted_answer_id": 42656905, "answer_count": 2, "score": 0, "last_activity_date": 1488915921, "creation_date": 1488914542, "last_edit_date": 1488915921, "question_id": 42656592, "link": "https://stackoverflow.com/questions/42656592/filtering-duplicate-substrings-from-a-hash-in-ruby", "title": "Filtering duplicate substrings from a hash in Ruby", "body": "<p>I'm writing a Rails app to get RSS feeds from news pages, apply part-of-speech tagging to the title, get the noun-phrases from the titles and the amount of times each occurs. I need to filter out the noun-phrases that are part of other noun phrases, and am using this code to do so:</p>\n\n<pre><code>filtered_noun_phrases = sorted_noun_phrases.select{|a|\n  sorted_noun_phrases.keys.any?{|b| b != a and a.index(b) } }.to_h\n</code></pre>\n\n<p>so this:</p>\n\n<pre><code>{\"troops retake main government office\"=&gt;2,\n \"retake main government office\"=&gt;2, \"main government office\"=&gt;2}\n</code></pre>\n\n<p>should become just:</p>\n\n<pre><code>{\"troops retake main government office\"=&gt;2}\n</code></pre>\n\n<p>However, a sorted hash of noun-phrases such as this:</p>\n\n<pre><code>{\"troops retake main government office\"=&gt;2, \"chinese students fighting racism\"=&gt;2,\n \"retake main government office\"=&gt;2, \"mosul retake government base\"=&gt;2,\n \"toddler killer shot dead\"=&gt;2, \"students fighting racism\"=&gt;2,\n \"retake government base\"=&gt;2, \"main government office\"=&gt;2,\n \"white house tourists\"=&gt;2, \"horn at french zoo\"=&gt;2, \"government office\"=&gt;2,\n \"cia hacking tools\"=&gt;2, \"killer shot dead\"=&gt;2, \"government base\"=&gt;2,\n \"boko haram teen\"=&gt;2, \"horn chainsawed\"=&gt;2, \"fighting racism\"=&gt;2,\n \"silver surfers\"=&gt;2, \"house tourists\"=&gt;2, \"natural causes\"=&gt;2,\n \"george michael\"=&gt;2, \"instagram fame\"=&gt;2, \"hacking tools\"=&gt;2,\n \"iraqi forces\"=&gt;2, \"mosul battle\"=&gt;2, \"own wedding\"=&gt;2, \"french zoo\"=&gt;2,\n \"haram teen\"=&gt;2, \"hacked tvs\"=&gt;2, \"shot dead\"=&gt;2}\n</code></pre>\n\n<p>Instead only partially filters:</p>\n\n<pre><code>{\"troops retake main government office\"=&gt;2, \"chinese students fighting racism\"=&gt;2,\n \"retake main government office\"=&gt;2, \"mosul retake government base\"=&gt;2,\n \"toddler killer shot dead\"=&gt;2, \"students fighting racism\"=&gt;2,\n \"retake government base\"=&gt;2, \"main government office\"=&gt;2,\n \"white house tourists\"=&gt;2, \"horn at french zoo\"=&gt;2,\n \"cia hacking tools\"=&gt;2, \"killer shot dead\"=&gt;2,\n \"boko haram teen\"=&gt;2}\n</code></pre>\n\n<p>So how can I filter duplicate substrings out of a hash that actually works?</p>\n"}, {"tags": ["arrays", "ruby"], "comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1488914813, "post_id": 42656113, "comment_id": 72439075, "body": "It would have been clearer to have made the key <code>:dvd_length</code> <code>:dvd_playing_time</code>, as some readers, especially those for whom English is a second language, may think you are referring to <code>:times_played</code>. Also, it would have been better to have made the values of <code>:times_played</code> different for the two hashes."}, {"owner": {"reputation": 45, "user_id": 7673281, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/011e14affee2fca224130c8e588411f7?s=128&d=identicon&r=PG&f=1", "display_name": "aprogrammer", "link": "https://stackoverflow.com/users/7673281/aprogrammer"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1488936292, "post_id": 42656113, "comment_id": 72448522, "body": "Cary Swoveland, thank you for your suggestion. I will modify my symbol to be clearer then it is now."}, {"owner": {"reputation": 45, "user_id": 7673281, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/011e14affee2fca224130c8e588411f7?s=128&d=identicon&r=PG&f=1", "display_name": "aprogrammer", "link": "https://stackoverflow.com/users/7673281/aprogrammer"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1488937504, "post_id": 42656113, "comment_id": 72448832, "body": "I edited :dvd_length to :dvd_playing_time and also changed :times_played values different."}], "answers": [{"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": true, "score": 3, "last_activity_date": 1488915302, "last_edit_date": 1488915302, "creation_date": 1488913807, "answer_id": 42656367, "question_id": 42656113, "link": "https://stackoverflow.com/questions/42656113/find-all-max-values-in-an-array-of-hashes-and-then-store-in-a-separate-array-rub/42656367#42656367", "title": "Find all max values in an array of hashes and then store in a separate array Ruby", "body": "<p>There are three steps to get an answer.</p>\n\n<ul>\n<li>Determine the longest playing time, by <a href=\"http://ruby-doc.org/core-2.3.0/Enumerable.html#method-i-map\" rel=\"nofollow noreferrer\">Enumerable#map</a>ing each hash <code>h</code> to <code>h[:dvd_length]</code> and then taking the <a href=\"http://ruby-doc.org/core-2.3.0/Enumerable.html#method-i-max\" rel=\"nofollow noreferrer\">Enumerable#max</a> of those values. </li>\n<li>Use <a href=\"http://ruby-doc.org/core-2.3.0/Hash.html#method-i-select\" rel=\"nofollow noreferrer\">Hash#select</a> to select the hashes <code>h</code> for which <code>h[:dvd_length]</code> equals that maximum playing time.  </li>\n<li><code>Enumerable#map</code> those hashes <code>h</code> with the maximum playing time to <code>h[:dvd_name]</code>.</li>\n</ul>\n\n<p></p> \n\n<pre><code>length_of_longest = dvds.map { |h| h[:dvd_length] }.max\n  #=&gt; 549\nputs dvds.select { |h| h[:dvd_length] == length_of_longest }.map { |h| h[:dvd_name] }\n  # x-men\n  # Pi\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1488919855, "post_id": 42657056, "comment_id": 72442056, "body": "Very nice answer. 1) It&#39;s perhaps worth noting (when discussing #2) that #1 requires between 2 and 3 passes through the array. 2) While <code>max</code> in #1 is fine, <code>max_by(&amp;:first)</code> might be clearer. 3) In #2, you might write <code>dvds.each_with_object([]) do |dvd, longest| ...</code> so that you don&#39;t have to add <code>longest</code> at the end if, for example, you wrap it in a method."}, {"owner": {"reputation": 4150, "user_id": 7470620, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/49f3026fe13841e41d1805178eed9a3c?s=128&d=identicon&r=PG", "display_name": "eiko", "link": "https://stackoverflow.com/users/7470620/eiko"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1488921211, "post_id": 42657056, "comment_id": 72442769, "body": "@CarySwoveland do you know if each_with_object will be okay with me passing a new reference to <code>longest</code> when a new max is found and the old array has to be discarded? i was worried it would force me to use the same array, which would be slower."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1488927568, "post_id": 42657056, "comment_id": 72445838, "body": "It&#39;s not an issue of speed. It just won&#39;t work with <code>longest = [dvd[:dvd_name]]</code> when <code>longest</code> is a block variable.  (The assignment changes <code>longest</code>&#39;s <code>object_id</code>.) In that case you need  <code>longest.replace([dvd[:dvd_name]])</code>. (<code>longest &lt;&lt; dvd[:dvd_name]</code> is OK.) Also, you have a typo: the right bracket in <code>dvd[:dvd_length == max]</code>  is misplaced."}, {"owner": {"reputation": 45, "user_id": 7673281, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/011e14affee2fca224130c8e588411f7?s=128&d=identicon&r=PG&f=1", "display_name": "aprogrammer", "link": "https://stackoverflow.com/users/7673281/aprogrammer"}, "edited": false, "score": 0, "creation_date": 1488938439, "post_id": 42657056, "comment_id": 72449078, "body": "@eiko - I tried your algorithm and it only returned &quot;x-men&quot; and not both &quot;x-men&quot; and &quot;Pi.&quot; Your dialogue with caryswoveland is over my head at the moment so maybe you both talked about returning one dvd name. Regardless, you gave me new material to understand so thank you very much!"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 45, "user_id": 7673281, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/011e14affee2fca224130c8e588411f7?s=128&d=identicon&r=PG&f=1", "display_name": "aprogrammer", "link": "https://stackoverflow.com/users/7673281/aprogrammer"}, "edited": false, "score": 0, "creation_date": 1488939977, "post_id": 42657056, "comment_id": 72449503, "body": "@aprogrammer, did you remember the solution is held by the array <code>longest</code>, and <code>longest</code> is not returned by the <code>dvds.each do</code> block. Add <code>longest</code> as a separate final line."}, {"owner": {"reputation": 45, "user_id": 7673281, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/011e14affee2fca224130c8e588411f7?s=128&d=identicon&r=PG&f=1", "display_name": "aprogrammer", "link": "https://stackoverflow.com/users/7673281/aprogrammer"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1488945103, "post_id": 42657056, "comment_id": 72450938, "body": "@caryswoveland - I remembered and so added <code>puts longest</code> on a separate line to verify both &quot;x-men&quot; and &quot;Pi&quot; were stored. Not sure why only one dvd name was returned."}, {"owner": {"reputation": 4150, "user_id": 7470620, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/49f3026fe13841e41d1805178eed9a3c?s=128&d=identicon&r=PG", "display_name": "eiko", "link": "https://stackoverflow.com/users/7470620/eiko"}, "reply_to_user": {"reputation": 45, "user_id": 7673281, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/011e14affee2fca224130c8e588411f7?s=128&d=identicon&r=PG&f=1", "display_name": "aprogrammer", "link": "https://stackoverflow.com/users/7673281/aprogrammer"}, "edited": false, "score": 0, "creation_date": 1488982148, "post_id": 42657056, "comment_id": 72471607, "body": "@aprogrammer i had made a typo which broke the algorithm, but i&#39;ve fixed it. sorry about that!"}], "tags": [], "owner": {"reputation": 4150, "user_id": 7470620, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/49f3026fe13841e41d1805178eed9a3c?s=128&d=identicon&r=PG", "display_name": "eiko", "link": "https://stackoverflow.com/users/7470620/eiko"}, "is_accepted": false, "score": 1, "last_activity_date": 1488981981, "last_edit_date": 1488981981, "creation_date": 1488916178, "answer_id": 42657056, "question_id": 42656113, "link": "https://stackoverflow.com/questions/42656113/find-all-max-values-in-an-array-of-hashes-and-then-store-in-a-separate-array-rub/42657056#42657056", "title": "Find all max values in an array of hashes and then store in a separate array Ruby", "body": "<p>If you want to do it in one line:</p>\n\n<pre><code>dvds.group_by{ |dvd| dvd[:dvd_playing_time] }.max.last.map{ |dvd| dvd[:dvd_name] }\n</code></pre>\n\n<p>This code groups the dvds by length, takes the group with the max length, and maps it to only contain the dvd names. It's not the fastest option since it'll run through the array a few times (n + g + m times, technically).</p>\n\n<p>If you're concerned about speed:</p>\n\n<pre><code>max = 0\nlongest = []\ndvds.each do |dvd|\n  if dvd[:dvd_playing_time] &gt; max\n    max = dvd[:dvd_playing_time]\n    longest = [dvd[:dvd_name]]\n  elsif dvd[:dvd_playing_time] == max\n    longest &lt;&lt; dvd[:dvd_name]\n  end\nend\n</code></pre>\n\n<p>This algorithm, while inelegant, will give you the answer with a single iteration through the array, which is the best you can do.</p>\n"}], "owner": {"reputation": 45, "user_id": 7673281, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/011e14affee2fca224130c8e588411f7?s=128&d=identicon&r=PG&f=1", "display_name": "aprogrammer", "link": "https://stackoverflow.com/users/7673281/aprogrammer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 123, "favorite_count": 0, "accepted_answer_id": 42656367, "answer_count": 2, "score": 0, "last_activity_date": 1488991907, "creation_date": 1488913046, "last_edit_date": 1488991907, "question_id": 42656113, "link": "https://stackoverflow.com/questions/42656113/find-all-max-values-in-an-array-of-hashes-and-then-store-in-a-separate-array-rub", "title": "Find all max values in an array of hashes and then store in a separate array Ruby", "body": "<p>I am new to programming and am using Ruby to get familiar with syntax and control flow.</p>\n\n<p>The program I am working on wants me to puts the dvd name that has the longest playing time. Here is my code:</p>\n\n<pre><code>dvds = [\n  {\n    :dvd_name=&gt;\"x-men\",\n    :dvd_playing_time=&gt;549,\n    :times_played=&gt;9.0\n  },\n  {\n    :dvd_name=&gt;\"Pi\",\n    :dvd_playing_time=&gt;549,\n    :times_played=&gt;6.0\n  }\n]\n</code></pre>\n\n<p>Both hashes have <code>dvd_playing_time</code> of <code>549</code>, so I want both <code>\"x-men\"</code> and <code>\"Pi\"</code> stored in an array. I tried <code>max_by</code>, but it only returns one <code>dvd_name</code>.</p>\n\n<pre><code>dvds.max_by { |length| length[:dvd_playing_time]}[:dvd_name]\n</code></pre>\n\n<p>Any help you can provide is fantastic!</p>\n"}, {"tags": ["ruby", "rubygems"], "comments": [{"owner": {"reputation": 74087, "user_id": 214790, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f878c8230342730990acd21f889301d4?s=128&d=identicon&r=PG", "display_name": "matt", "link": "https://stackoverflow.com/users/214790/matt"}, "edited": false, "score": 0, "creation_date": 1488920403, "post_id": 42655962, "comment_id": 72442367, "body": "You don\u2019t need to add anything to your <code>gemspec</code>, this should work already. How have you installed Ruby? If this isn\u201dt working then you likely haven\u2019t got the gem bin directory on your <code>$PATH</code>. The results of <code>$ gem env</code> would be useful too."}, {"owner": {"reputation": 74087, "user_id": 214790, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f878c8230342730990acd21f889301d4?s=128&d=identicon&r=PG", "display_name": "matt", "link": "https://stackoverflow.com/users/214790/matt"}, "edited": false, "score": 0, "creation_date": 1488925937, "post_id": 42655962, "comment_id": 72445099, "body": "I don\u2019t know rbenv, but I <i>think</i> you might need to run <code>$rbenv rehash</code> after installing the gem."}], "answers": [{"tags": [], "owner": {"reputation": 3536, "user_id": 5314903, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/63b7f28e96e254a2618902d079e06dba?s=128&d=identicon&r=PG&f=1", "display_name": "Alex Cohen", "link": "https://stackoverflow.com/users/5314903/alex-cohen"}, "is_accepted": true, "score": 0, "last_activity_date": 1489008633, "last_edit_date": 1489008633, "creation_date": 1488997796, "answer_id": 42679153, "question_id": 42655962, "link": "https://stackoverflow.com/questions/42655962/how-to-set-a-gem-binary-in-path/42679153#42679153", "title": "How to set a gem binary in path?", "body": "<p>The gem has been installed properly.  The issue is actually with the executable.  </p>\n\n<p>The executable I created ended with this common if statement:</p>\n\n<pre><code>if $PROGRAM_NAME == __FILE__\n  main\nend\n</code></pre>\n\n<p>To fix it I just had to change it to this:</p>\n\n<pre><code>main\n</code></pre>\n"}], "owner": {"reputation": 3536, "user_id": 5314903, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/63b7f28e96e254a2618902d079e06dba?s=128&d=identicon&r=PG&f=1", "display_name": "Alex Cohen", "link": "https://stackoverflow.com/users/5314903/alex-cohen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2005, "favorite_count": 0, "accepted_answer_id": 42679153, "answer_count": 1, "score": 0, "last_activity_date": 1489008633, "creation_date": 1488912442, "last_edit_date": 1488926256, "question_id": 42655962, "link": "https://stackoverflow.com/questions/42655962/how-to-set-a-gem-binary-in-path", "title": "How to set a gem binary in path?", "body": "<p>I have a gem I have built with an executable.  The executable is under the <code>bin</code> directory of my repo and it is defined in the gemspec file:</p>\n\n<pre><code>  spec.executables   &lt;&lt; 'my_gem'\n</code></pre>\n\n<p>After installing the gem the executable is also installed correctly:</p>\n\n<pre><code>$ ls /Users/myuser/.gems/gems/my_gem-1.0.0/\nbin/ lib/\n$ ls /Users/myuser/.gems/gems/my_gem-1.0.0/bin/\nmy_gem* \n</code></pre>\n\n<p>However I want to add this executable in the path so I can run something along the lines of <code>my_gem</code> or <code>bundle exec my_gem</code> to run the executable from the cli.</p>\n\n<p>What do I need to add to my gemspec file to do this?</p>\n\n<p>Here is my ruby version and ruby gems versions:</p>\n\n<pre><code>$ ruby -v\nruby 2.1.1p76\n$ gem -v\n2.2.2\n</code></pre>\n\n<p>Here is my gem env:</p>\n\n<pre><code>$ gem env\nRubyGems Environment:\n  - RUBYGEMS VERSION: 2.2.2\n  - RUBY VERSION: 2.1.1 (2014-02-24 patchlevel 76) [x86_64-darwin15.0]\n  - INSTALLATION DIRECTORY: /Users/myuser/.gems\n  - RUBY EXECUTABLE: /Users/myuser/.rbenv/versions/2.1.1/bin/ruby\n  - EXECUTABLE DIRECTORY: /Users/myuser/.gems/bin\n  - SPEC CACHE DIRECTORY: /Users/myuser/.gem/specs\n  - RUBYGEMS PLATFORMS:\n    - ruby\n    - x86_64-darwin-15\n  - GEM PATHS:\n     - /Users/myuser/.gems\n     - /Users/myuser/.gem/ruby/2.1.0\n     - /Users/myuser/.rbenv/versions/2.1.1/lib/ruby/gems/2.1.0\n  - GEM CONFIGURATION:\n     - :update_sources =&gt; true\n     - :verbose =&gt; true\n     - :backtrace =&gt; false\n     - :bulk_threshold =&gt; 1000\n     - :sources =&gt; [\"https://rubygems.org/\", \"https://my.org.url/artifactory/api/gems/gem-public/\"]\n  - REMOTE SOURCES:\n     - https://rubygems.org/\n     - https://my.org.url/artifactory/api/gems/gem-public/\n  - SHELL PATH:\n     - /Users/myuser/.rbenv/versions/2.1.1/bin\n     - /usr/local/Cellar/rbenv/1.0.0/libexec\n     - /Users/myuser/.rbenv/shims\n     - /Users/myuser/.rbenv/bin\n     - /usr/local/bin\n     - /usr/bin\n     - /bin\n     - /usr/sbin\n     - /sbin\n</code></pre>\n\n<p>The weird thing is that I already attempted this with a different gem I created using the <a href=\"http://guides.rubygems.org/make-your-own-gem/#adding-an-executable\" rel=\"nofollow noreferrer\">gem tutorial</a> and that works just fine.</p>\n\n<p><strong>Update:</strong> When debugging this for some reason it's running the <code>lib/my_gem.rb</code> file instead of the <code>bin/my_gem</code> file.</p>\n"}, {"tags": ["javascript", "ruby"], "comments": [{"owner": {"reputation": 35578, "user_id": 3000206, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/BK1fo.jpg?s=128&g=1", "display_name": "Carcigenicate", "link": "https://stackoverflow.com/users/3000206/carcigenicate"}, "edited": false, "score": 0, "creation_date": 1488912195, "post_id": 42655821, "comment_id": 72437463, "body": "Don&#39;t know Ruby, but wouldn&#39;t just it&#39;s logical OR work? Does it return a boolean value or the first truthy value?"}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 2, "creation_date": 1488912233, "post_id": 42655821, "comment_id": 72437486, "body": "<code>myHash[id] ||= {}</code> is the equivalent"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1488927393, "post_id": 42655821, "comment_id": 72445756, "body": "Please do not use salutations like &quot;hi&quot;, valedictions (&quot;thanks!&quot;) or signatures. Stack Overflow is not a discussion list, it&#39;s an online reference. Also, grammar, spelling and punctuation are all significant."}], "answers": [{"tags": [], "owner": {"reputation": 4150, "user_id": 7470620, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/49f3026fe13841e41d1805178eed9a3c?s=128&d=identicon&r=PG", "display_name": "eiko", "link": "https://stackoverflow.com/users/7470620/eiko"}, "is_accepted": true, "score": 2, "last_activity_date": 1488926699, "last_edit_date": 1488926699, "creation_date": 1488912253, "answer_id": 42655905, "question_id": 42655821, "link": "https://stackoverflow.com/questions/42655821/ruby-equivalent-to-js/42655905#42655905", "title": "Ruby equivalent to JS", "body": "<p>In Ruby, this code actually works the same as in JavaScript:</p>\n\n<pre><code>myHash[id] = myHash[id] || {}\n</code></pre>\n\n<p>That being said, the more eloquent way of doing it is:</p>\n\n<pre><code>myHash[id] ||= {}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "is_accepted": false, "score": 0, "last_activity_date": 1488927480, "last_edit_date": 1488927480, "creation_date": 1488926988, "answer_id": 42659841, "question_id": 42655821, "link": "https://stackoverflow.com/questions/42655821/ruby-equivalent-to-js/42659841#42659841", "title": "Ruby equivalent to JS", "body": "<p>While these are equivalent:</p>\n\n<pre><code>my_hash[:id] = my_hash[:id] || {} \nmy_hash[:id] ||= {} \n</code></pre>\n\n<p>You'll find this useful:</p>\n\n<pre><code>require 'fruity'\n\nmy_hash = {}\n\ncompare do\n  test1 { my_hash[:id] = my_hash[:id] || {} }\n  test2 { my_hash[:id] ||= {} }\nend\n\n# &gt;&gt; Running each test 32768 times. Test will take about 1 second.\n# &gt;&gt; test2 is faster than test1 by 2x \u00b1 0.1\n</code></pre>\n\n<p>Between the two, the second, <code>test2</code>, is idiomatic Ruby, so, while the difference in speed is slight, it adds up. It's also the Ruby way.</p>\n"}], "owner": {"reputation": 418, "user_id": 4580647, "user_type": "registered", "accept_rate": 70, "profile_image": "https://graph.facebook.com/10200262995855063/picture?type=large", "display_name": "Giancarlo Ben&#237;tez", "link": "https://stackoverflow.com/users/4580647/giancarlo-ben%c3%adtez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 117, "favorite_count": 0, "accepted_answer_id": 42655905, "answer_count": 2, "score": 0, "last_activity_date": 1488927480, "creation_date": 1488911956, "last_edit_date": 1488927275, "question_id": 42655821, "link": "https://stackoverflow.com/questions/42655821/ruby-equivalent-to-js", "title": "Ruby equivalent to JS", "body": "<p>Is there an expression in Ruby equivalent to JavaScript's for:</p>\n\n<pre><code>myHash[id] = myHash[id] || {};\n</code></pre>\n\n<p>This is usually used when trying to append an array or hash to an existing one but we don't know if it was already created or is the first iteration.</p>\n"}, {"tags": ["ruby", "postgresql", "sqlite", "heroku", "sinatra"], "comments": [{"owner": {"reputation": 4150, "user_id": 7470620, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/49f3026fe13841e41d1805178eed9a3c?s=128&d=identicon&r=PG", "display_name": "eiko", "link": "https://stackoverflow.com/users/7470620/eiko"}, "edited": false, "score": 0, "creation_date": 1488912964, "post_id": 42655511, "comment_id": 72437923, "body": "could you post your Gemfile.lock?"}, {"owner": {"reputation": 23, "user_id": 7418585, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WqTaK.jpg?s=128&g=1", "display_name": "Herschel", "link": "https://stackoverflow.com/users/7418585/herschel"}, "reply_to_user": {"reputation": 4150, "user_id": 7470620, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/49f3026fe13841e41d1805178eed9a3c?s=128&d=identicon&r=PG", "display_name": "eiko", "link": "https://stackoverflow.com/users/7470620/eiko"}, "edited": false, "score": 0, "creation_date": 1488914458, "post_id": 42655511, "comment_id": 72438850, "body": "Sure, adding Gemfile.lock to the question"}], "owner": {"reputation": 23, "user_id": 7418585, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WqTaK.jpg?s=128&g=1", "display_name": "Herschel", "link": "https://stackoverflow.com/users/7418585/herschel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 312, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1488914433, "creation_date": 1488910859, "last_edit_date": 1488914433, "question_id": 42655511, "link": "https://stackoverflow.com/questions/42655511/setting-up-the-database-on-heroku-bundler-failed-to-load-command-thin-loade", "title": "Setting up the Database on Heroku. bundler: failed to load command: thin , LoadError: cannot load such file -- dm-postgres-adapter", "body": "<p>so I'm trying to do some Sinatra tutorial (JUMP START SINATRA by Darren Jones - <a href=\"https://www.sitepoint.com/premium/books/jump-start-sinatra\" rel=\"nofollow noreferrer\">https://www.sitepoint.com/premium/books/jump-start-sinatra</a>)</p>\n\n<p>And it work just fine until deploying the site to heroku when using sqlite database on development mode. </p>\n\n<pre><code>configure :development do\n  DataMapper.setup(:default, \"sqlite3://#{Dir.pwd}/development.db\")\nend\n</code></pre>\n\n<p>The problem started to arise when it's time to 'Setting up the Database on Heroku'. Which caused Application error to the site. The error started when adding:</p>\n\n<pre><code>configure :production do\n  DataMapper.setup(:default, ENV['DATABASE_URL'])\nend\n</code></pre>\n\n<p>Here's some of the error log from heroku</p>\n\n<pre><code>2017-03-07T17:59:07.933651+00:00 heroku[web.1]: Process exited with status 1\n2017-03-07T17:59:07.954951+00:00 heroku[web.1]: State changed from starting to crashed\n2017-03-07T17:59:07.806844+00:00 app[web.1]: bundler: failed to load command: thin (/app/vendor/bundle/ruby/2.2.0/bin/thin)\n2017-03-07T17:59:07.806948+00:00 app[web.1]: LoadError: cannot load such file -- dm-postgres-adapter\n2017-03-07T17:59:07.806950+00:00 app[web.1]:   /app/vendor/bundle/ruby/2.2.0/gems/dm-core-1.2.1/lib/dm-core/adapters.rb:163:in `require'\n2017-03-07T17:59:07.806951+00:00 app[web.1]:   /app/vendor/bundle/ruby/2.2.0/gems/dm-core-1.2.1/lib/dm-core/adapters.rb:163:in `load_adapter'\n2017-03-07T17:59:07.806952+00:00 app[web.1]:   /app/vendor/bundle/ruby/2.2.0/gems/dm-core-1.2.1/lib/dm-core/adapters.rb:133:in `adapter_class'\n2017-03-07T17:59:07.806952+00:00 app[web.1]:   /app/vendor/bundle/ruby/2.2.0/gems/dm-core-1.2.1/lib/dm-core/adapters.rb:13:in `new'\n2017-03-07T17:59:07.806953+00:00 app[web.1]:   /app/vendor/bundle/ruby/2.2.0/gems/dm-core-1.2.1/lib/dm-core.rb:230:in `setup'\n2017-03-07T17:59:07.806954+00:00 app[web.1]:   /app/main.rb:18:in `block in &lt;top (required)&gt;'\n2017-03-07T17:59:07.806954+00:00 app[web.1]:   /app/vendor/bundle/ruby/2.2.0/gems/sinatra-1.4.8/lib/sinatra/base.rb:1411:in `configure'\n2017-03-07T17:59:07.806955+00:00 app[web.1]:   /app/vendor/bundle/ruby/2.2.0/gems/sinatra-1.4.8/lib/sinatra/base.rb:1981:in `block (2 levels) in delegate'\n</code></pre>\n\n<p>Here's the gemfile (copied from the tutorial)</p>\n\n<pre><code>source :rubygems\ngem 'sinatra'\ngem 'slim'\ngem 'sass'\ngem 'dm-core'\ngem 'dm-migrations'\ngem 'thin'\ngem 'pg', :group =&gt; :production\ngem 'dm-postgres-adapter', :group =&gt; :production\ngem 'dm-sqlite-adapter', :group =&gt; :development\n</code></pre>\n\n<p>Gemfile.lock</p>\n\n<pre><code>GEM\n  remote: http://rubygems.org/\n  specs:\n    addressable (2.5.0)\n      public_suffix (~&gt; 2.0, &gt;= 2.0.2)\n    daemons (1.2.4)\n    data_objects (0.10.17)\n      addressable (~&gt; 2.1)\n    dm-core (1.2.1)\n      addressable (~&gt; 2.3)\n    dm-do-adapter (1.2.0)\n      data_objects (~&gt; 0.10.6)\n      dm-core (~&gt; 1.2.0)\n    dm-migrations (1.2.0)\n      dm-core (~&gt; 1.2.0)\n    dm-postgres-adapter (1.2.0)\n      dm-do-adapter (~&gt; 1.2.0)\n      do_postgres (~&gt; 0.10.6)\n    dm-sqlite-adapter (1.2.0)\n      dm-do-adapter (~&gt; 1.2.0)\n      do_sqlite3 (~&gt; 0.10.6)\n    do_postgres (0.10.17)\n      data_objects (= 0.10.17)\n    do_sqlite3 (0.10.17)\n      data_objects (= 0.10.17)\n    eventmachine (1.2.3)\n    pg (0.19.0)\n    public_suffix (2.0.5)\n    rack (1.6.5)\n    rack-protection (1.5.3)\n      rack\n    sass (3.4.23)\n    sinatra (1.4.8)\n      rack (~&gt; 1.5)\n      rack-protection (~&gt; 1.4)\n      tilt (&gt;= 1.3, &lt; 3)\n    slim (3.0.7)\n      temple (~&gt; 0.7.6)\n      tilt (&gt;= 1.3.3, &lt; 2.1)\n    temple (0.7.7)\n    thin (1.7.0)\n      daemons (~&gt; 1.0, &gt;= 1.0.9)\n      eventmachine (~&gt; 1.0, &gt;= 1.0.4)\n      rack (&gt;= 1, &lt; 3)\n    tilt (2.0.6)\n\nPLATFORMS\n  ruby\n\nDEPENDENCIES\n  dm-core\n  dm-migrations\n  dm-postgres-adapter\n  dm-sqlite-adapter\n  pg\n  sass\n  sinatra\n  slim\n  thin\n\nBUNDLED WITH\n   1.14.3\n</code></pre>\n\n<p>Anyone know how to fix this..? Have tried searching for answers at stackoverflow. But couldn't find anything that works.</p>\n\n<p>I'm a total newbie at programming, and English is not even my first language. So please forgive me if there's any weird or wrong words in my question.</p>\n\n<p>Thanks for the help :D</p>\n"}, {"tags": ["ruby", "cancan", "cancancan"], "comments": [{"owner": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "edited": false, "score": 0, "creation_date": 1488911057, "post_id": 42655504, "comment_id": 72436749, "body": "I don&#39;t think we can answer you without knowing what the <code>can?</code> method looks like..."}, {"owner": {"reputation": 24638, "user_id": 302533, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/6rsH5.jpg?s=128&g=1", "display_name": "Cameron", "link": "https://stackoverflow.com/users/302533/cameron"}, "reply_to_user": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "edited": false, "score": 0, "creation_date": 1488911145, "post_id": 42655504, "comment_id": 72436809, "body": "@Anthony <a href=\"https://github.com/CanCanCommunity/cancancan/blob/develop/lib/cancan/ability.rb#L62\" rel=\"nofollow noreferrer\">github.com/CanCanCommunity/cancancan/blob/develop/lib/cancan&zwnj;&#8203;/&hellip;</a>"}, {"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 2, "creation_date": 1488911556, "post_id": 42655504, "comment_id": 72437047, "body": "<code>%w(policy journey crash user).map(&amp;:to_sym)</code> would be better as <code>%i(policy journey crash user)</code> in newer Rubies."}, {"owner": {"reputation": 24638, "user_id": 302533, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/6rsH5.jpg?s=128&g=1", "display_name": "Cameron", "link": "https://stackoverflow.com/users/302533/cameron"}, "reply_to_user": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1488967440, "post_id": 42655504, "comment_id": 72461270, "body": "@muistooshort I am using <code>%w</code>..."}, {"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 2, "creation_date": 1488994712, "post_id": 42655504, "comment_id": 72480744, "body": "<code>%w(...)</code> produces an array of strings which you then convert to symbols, <code>%i(...)</code> produces an array of symbols directly."}], "answers": [{"comments": [{"owner": {"reputation": 12629, "user_id": 4739257, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/MdhEs.jpg?s=128&g=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/4739257/ilya"}, "edited": false, "score": 0, "creation_date": 1488913056, "post_id": 42656017, "comment_id": 72437979, "body": "It seems like OP wants to see <code>any?</code> instead of <code>all?</code>, but does not want to write <code>can? :read, :policy || can? :read, :journey || etc...</code>, because it is not DRY."}], "tags": [], "owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "is_accepted": true, "score": 3, "last_activity_date": 1543860164, "last_edit_date": 1543860164, "creation_date": 1488912683, "answer_id": 42656017, "question_id": 42655504, "link": "https://stackoverflow.com/questions/42655504/check-if-any-of-multiple-conditions-are-true-in-ruby/42656017#42656017", "title": "Check if any of multiple conditions are true in Ruby", "body": "<p>Sure you can.</p>\n\n<p><a href=\"http://ruby-doc.org/core-2.4.0/Enumerable.html#method-i-any-3F\" rel=\"nofollow noreferrer\">Enumerable#<code>any?</code></a> is exactly what you're looking for:</p>\n\n<pre><code>&lt;% if %i(policy journey crash user).any? { |action| can? :read, action } %&gt;\n</code></pre>\n\n<p>The above will return <code>true</code> only if <code>can read any action</code>.</p>\n\n<p>Note, I used <code>%i</code> instead of <code>%w</code>. It gives you array of symbols.</p>\n"}], "owner": {"reputation": 24638, "user_id": 302533, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/6rsH5.jpg?s=128&g=1", "display_name": "Cameron", "link": "https://stackoverflow.com/users/302533/cameron"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 814, "favorite_count": 0, "accepted_answer_id": 42656017, "answer_count": 1, "score": 0, "last_activity_date": 1543860164, "creation_date": 1488910837, "last_edit_date": 1488911080, "question_id": 42655504, "link": "https://stackoverflow.com/questions/42655504/check-if-any-of-multiple-conditions-are-true-in-ruby", "title": "Check if any of multiple conditions are true in Ruby", "body": "<p>I have the following Ruby conditional:</p>\n\n<pre><code>&lt;% if can? :read, %w(policy journey crash user).map(&amp;:to_sym) %&gt;\n</code></pre>\n\n<p>Which I want to translate to: if the user has read permissions for any of the resources in the array.</p>\n\n<p>However it always returns false. How can I fix it?</p>\n\n<p>I don't want to do:</p>\n\n<pre><code>if can? :read, :policy || can? :read, :journey || etc...\n</code></pre>\n"}, {"tags": ["ruby", "algorithm", "recursion"], "comments": [{"owner": {"reputation": 44047, "user_id": 1400793, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7VxVK.png?s=128&g=1", "display_name": "Paul Hankin", "link": "https://stackoverflow.com/users/1400793/paul-hankin"}, "edited": false, "score": 1, "creation_date": 1488915393, "post_id": 42655450, "comment_id": 72439436, "body": "Do you have test cases? For example, can you compute by hand the correct return value for count_ways(n) for small n (say n=1..10), and then see if your code returns what you expect?"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1488918648, "post_id": 42655450, "comment_id": 72441313, "body": "Why the rush to select the first answer, particularly one which only provides pseudo-code, when you asked for a solution written in Ruby? Moreover, as I noted in a comment on the answer, it is incorrect."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1488927682, "post_id": 42655450, "comment_id": 72445891, "body": "This really sounds like a homework question. <a href=\"http://meta.softwareengineering.stackexchange.com/questions/6166/open-letter-to-students-with-homework-problems\" title=\"open letter to students with homework problems\">meta.softwareengineering.stackexchange.com/questions/6166/&hellip;</a> is really good to read. Also read &quot;<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>&quot;. Your question doesn&#39;t meet the criteria for a question about a problem with your code as we have to write a test harness for it to do anything."}], "answers": [{"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1488918567, "post_id": 42655526, "comment_id": 72441263, "body": "You have offered valid Ruby code, but <code>count_ways(10,2) #=&gt; 9</code>, but should return <code>3</code> (1 dime, 1 nickel and 5 pennies, and 10 pennies). Even without running the Ruby code one can trace through to see that it returns <code>9</code>. Did you test this in any language?"}, {"owner": {"reputation": 12311, "user_id": 2095090, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/3vmqn.jpg?s=128&g=1", "display_name": "Vincent van der Weele", "link": "https://stackoverflow.com/users/2095090/vincent-van-der-weele"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1488951831, "post_id": 42655526, "comment_id": 72453049, "body": "@CarySwoveland no, unfortunately I have no pseudo-code interpreter at hand. But you&#39;re right, I made a typo and wrote <code>&lt;=</code> instead of <code>&gt;=</code>, that&#39;s fixed now. I&#39;m not sure why you think <code>count_ways(10, 2)</code> should return <code>3</code>, as it clearly should return <code>1</code> (and it does): the penny is the only coin with value <code>&lt;= 2</code>, so 10 pennies is the only solution."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1488953342, "post_id": 42655526, "comment_id": 72453581, "body": "It looks good now, with one small change needed: you must add the line <code>result</code> before the last line (<code>end</code>).  That&#39;s because in Ruby, <code>def doit; result = 1; result = result + 1 if false; end; doit #=&gt; nil</code>. Disregard my earlier reference to <code>count_ways(10, 2)</code>. I was mixed up on the second argument. Note <code>count_ways(100,25).size #=&gt; 242</code>, coinciding with my result."}], "tags": [], "owner": {"reputation": 12311, "user_id": 2095090, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/3vmqn.jpg?s=128&g=1", "display_name": "Vincent van der Weele", "link": "https://stackoverflow.com/users/2095090/vincent-van-der-weele"}, "is_accepted": false, "score": 5, "last_activity_date": 1489122664, "last_edit_date": 1489122664, "creation_date": 1488910921, "answer_id": 42655526, "question_id": 42655450, "link": "https://stackoverflow.com/questions/42655450/how-to-calculate-the-number-of-ways-to-represent-n-cents/42655526#42655526", "title": "How to calculate the number of ways to represent n cents", "body": "<p>No, you will be double-counting solutions, because you could first pick a quarter and then a dime or the other way around, but those solutions are essentially the same.</p>\n\n<p>The easiest way to prevent double-counting is to make sure you never pick a coin that is bigger than the ones you already picked.</p>\n\n<p>In code:</p>\n\n<pre><code>def count_ways(n, max_coin)\n  return 0 if n &lt; 0 \n  return 1 if n == 0 \n\n  result = count_ways(n-1, 1)\n  result = result + count_ways(n- 5,  5) if max_coin &gt;=  5\n  result = result + count_ways(n-10, 10) if max_coin &gt;= 10\n  result = result + count_ways(n-25, 25) if max_coin &gt;= 25\n  result\nend\n</code></pre>\n\n<p>And call it with 25 as initial max coin</p>\n"}, {"comments": [{"owner": {"reputation": 12311, "user_id": 2095090, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/3vmqn.jpg?s=128&g=1", "display_name": "Vincent van der Weele", "link": "https://stackoverflow.com/users/2095090/vincent-van-der-weele"}, "edited": false, "score": 0, "creation_date": 1488953077, "post_id": 42657408, "comment_id": 72453481, "body": "Although this code is correct, it seems quite far above the skill level of the OP. You could maybe add some explanation why this works. Besides, <code>return [cents] if coins.size == 1</code> implicitly assumes that the smallest coin has value 1, which reduces the usefulness of passing the coins array (I would expect <code>count_ways(2, [5])</code> to return 0, not 1)."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 12311, "user_id": 2095090, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/3vmqn.jpg?s=128&g=1", "display_name": "Vincent van der Weele", "link": "https://stackoverflow.com/users/2095090/vincent-van-der-weele"}, "edited": false, "score": 0, "creation_date": 1488953951, "post_id": 42657408, "comment_id": 72453875, "body": "Good points. I&#39;ll add an explanation tomorrow. <code>count_ways(x, [5])</code> would never be called, only <code>count_ways(x, [25,10,5,1])</code>, <code>count_ways(x, [10,5,1])</code>, <code>count_ways(x, [5,1])</code> and <code>count_ways(x, [1])</code>."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 12311, "user_id": 2095090, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/3vmqn.jpg?s=128&g=1", "display_name": "Vincent van der Weele", "link": "https://stackoverflow.com/users/2095090/vincent-van-der-weele"}, "edited": false, "score": 1, "creation_date": 1489039146, "post_id": 42657408, "comment_id": 72498697, "body": "@VincentvanderWeele &amp; Sunny, I provided an explanation of the recursion."}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": true, "score": 2, "last_activity_date": 1539031356, "last_edit_date": 1539031356, "creation_date": 1488917465, "answer_id": 42657408, "question_id": 42655450, "link": "https://stackoverflow.com/questions/42655450/how-to-calculate-the-number-of-ways-to-represent-n-cents/42657408#42657408", "title": "How to calculate the number of ways to represent n cents", "body": "<p>We can see if your code is correct quite easily.  let's try making change for a dime. There are four ways: 1 dime, 2 nickels, 1 nickel and 5 pennies, and 10 pennies, yet <code>count_ways(10) #=&gt; 9</code>.</p>\n\n<p>You can do it as follows, using recursion.</p>\n\n<p><strong>Code</strong></p>\n\n<pre><code>def count_ways(cents, coins)\n  if coins.size == 1\n    return (cents % coins.first) == 0 ? [cents/coins.first] : nil\n  end \n  coin, *remaining_coins = coins\n  (0..cents/coin).each_with_object([]) { |n, arr|\n    count_ways(cents-n*coin, remaining_coins).each { |a| arr &lt;&lt; [n, *a] } }\nend \n</code></pre>\n\n<p><strong>Examples</strong></p>\n\n<pre><code>coins = [25, 10, 5, 1]\n\ncount_ways(32, coins)\n  #=&gt; [[0, 0, 0, 32], [0, 0, 1, 27], [0, 0, 2, 22], [0, 0, 3, 17], [0, 0, 4, 12],\n  #    [0, 0, 5,  7], [0, 0, 6,  2], [0, 1, 0, 22], [0, 1, 1, 17], [0, 1, 2, 12],\n  #    [0, 1, 3,  7], [0, 1, 4,  2], [0, 2, 0, 12], [0, 2, 1,  7], [0, 2, 2,  2],\n  #    [0, 3, 0,  2], [1, 0, 0,  7], [1, 0, 1,  2]] \n\ncount_ways(100, coins)\n  #=&gt; [[0, 0, 0, 100], [0, 0, 1, 95], [0, 0, 2, 90], [0, 0, 3, 85], [0, 0, 4, 80],\n  #    [0, 0, 5,  75], [0, 0, 6, 70], [0, 0, 7, 65], [0, 0, 8, 60], [0, 0, 9, 55],\n  #    ...\n  #    [3, 1, 2,   5], [3, 1, 3,  0], [3, 2, 0,  5], [3, 2, 1,  0], [4, 0, 0,  0]] \ncount_ways(100, coins).size\n  #=&gt; 242 \n</code></pre>\n\n<p><strong>Explanation</strong></p>\n\n<p>The best way to show how the recursion works is to salt the code with puts statements and then run it against a simple example.</p>\n\n<pre><code>INDENT = 8\n@indentation = 0\n\ndef indent\n @indentation += INDENT\nend\n\ndef undent\n @indentation = [@indentation-INDENT, 0].max\nend\n\ndef ind\n  ' '*@indentation\nend\n</code></pre>\n\n<p></p>    \n\n<pre><code>def count_ways(cents, coins)\n  puts \"#{ind}** entering count_ways with cents=#{cents}, coins=#{coins}\"\n  if coins.size == 1\n    puts \"#{ind}&lt;&lt; returning [cents]=#{[cents]} as coins.size == 1\" \n    undent\n  end  \n  return [cents] if coins.size == 1\n  coin, *remaining_coins = coins\n  puts \"#{ind}coin=#{coin}. remaining_coins=#{remaining_coins}\"\n  puts \"#{ind}0..cents/coin=#{0..cents/coin}\"\n  arr = (0..cents/coin).each_with_object([]) do |n, arr|\n    puts \"#{ind}  n=#{n}, arr=#{arr}\"\n    puts \"#{ind}  &gt;&gt; calling count_ways(#{cents}-#{n}*#{coin}, remaining_coins)\"\n    indent\n    aa = count_ways(cents-n*coin, remaining_coins)\n    puts \"#{ind}  aa=#{aa}\"\n    aa.each do |a|\n      arr &lt;&lt; [n, *a]\n      puts \"#{ind}    arr &lt;&lt; [#{n}, *#{a}], arr=#{arr}\"\n    end\n    puts \"#{ind}  after all coins, arr=#{arr}\"\n  end\n  puts \"#{ind}&lt;&lt; returning arr=#{arr}\"\n  undent\n  arr\nend\n</code></pre>\n\n<p>Now let's run <code>count_ways(12, coins)</code> which should return the four ways of making change for <code>12</code> cents: <code>[[0, 0, 0, 12], [0, 0, 1, 7], [0, 0, 2, 2], [0, 1, 0, 2]]</code>.</p>\n\n<pre><code>count_ways(12, coins)\n** entering count_ways with cents=12, coins=[25, 10, 5, 1]\ncoin=25. remaining_coins=[10, 5, 1]\n0..cents/coin=0..0\n  n=0, arr=[]\n  &gt;&gt; calling count_ways(12-0*25, remaining_coins)\n        ** entering count_ways with cents=12, coins=[10, 5, 1]\n        coin=10. remaining_coins=[5, 1]\n        0..cents/coin=0..1\n          n=0, arr=[]\n          &gt;&gt; calling count_ways(12-0*10, remaining_coins)\n                ** entering count_ways with cents=12, coins=[5, 1]\n                coin=5. remaining_coins=[1]\n                0..cents/coin=0..2\n                  n=0, arr=[]\n                  &gt;&gt; calling count_ways(12-0*5, remaining_coins)\n                        ** entering count_ways with cents=12, coins=[1]\n                        &lt;&lt; returning [cents]=[12] as coins.size == 1\n</code></pre>\n\n<p></p>    \n\n<pre><code>                  aa=[12]\n                    arr &lt;&lt; [0, *12], arr=[[0, 12]]\n                  after all coins, arr=[[0, 12]]\n                  n=1, arr=[[0, 12]]\n                  &gt;&gt; calling count_ways(12-1*5, remaining_coins)\n                        ** entering count_ways with cents=7, coins=[1]\n                        &lt;&lt; returning [cents]=[7] as coins.size == 1\n                  aa=[7]\n                    arr &lt;&lt; [1, *7], arr=[[0, 12], [1, 7]]\n                  after all coins, arr=[[0, 12], [1, 7]]\n                  n=2, arr=[[0, 12], [1, 7]]\n                  &gt;&gt; calling count_ways(12-2*5, remaining_coins)\n                        ** entering count_ways with cents=2, coins=[1]\n                        &lt;&lt; returning [cents]=[2] as coins.size == 1\n</code></pre>\n\n<p></p>    \n\n<pre><code>                  aa=[2]\n                    arr &lt;&lt; [2, *2], arr=[[0, 12], [1, 7], [2, 2]]\n                  after all coins, arr=[[0, 12], [1, 7], [2, 2]]\n                &lt;&lt; returning arr=[[0, 12], [1, 7], [2, 2]]\n          aa=[[0, 12], [1, 7], [2, 2]]\n            arr &lt;&lt; [0, *[0, 12]], arr=[[0, 0, 12]]\n            arr &lt;&lt; [0, *[1, 7]], arr=[[0, 0, 12], [0, 1, 7]]\n            arr &lt;&lt; [0, *[2, 2]], arr=[[0, 0, 12], [0, 1, 7], [0, 2, 2]]\n          after all coins, arr=[[0, 0, 12], [0, 1, 7], [0, 2, 2]]\n          n=1, arr=[[0, 0, 12], [0, 1, 7], [0, 2, 2]]\n          &gt;&gt; calling count_ways(12-1*10, remaining_coins)\n                ** entering count_ways with cents=2, coins=[5, 1]\n                coin=5. remaining_coins=[1]\n                0..cents/coin=0..0\n                  n=0, arr=[]\n                  &gt;&gt; calling count_ways(2-0*5, remaining_coins)\n                        ** entering count_ways with cents=2, coins=[1]\n                        &lt;&lt; returning [cents]=[2] as coins.size == 1\n</code></pre>\n\n<p></p>    \n\n<pre><code>                  aa=[2]\n                    arr &lt;&lt; [0, *2], arr=[[0, 2]]\n                  after all coins, arr=[[0, 2]]\n                &lt;&lt; returning arr=[[0, 2]]\n          aa=[[0, 2]]\n            arr &lt;&lt; [1, *[0, 2]], arr=[[0, 0, 12], [0, 1, 7], [0, 2, 2], [1, 0, 2]]\n          after all coins, arr=[[0, 0, 12], [0, 1, 7], [0, 2, 2], [1, 0, 2]]\n        &lt;&lt; returning arr=[[0, 0, 12], [0, 1, 7], [0, 2, 2], [1, 0, 2]]\n  aa=[[0, 0, 12], [0, 1, 7], [0, 2, 2], [1, 0, 2]]\n    arr &lt;&lt; [0, *[0, 0, 12]], arr=[[0, 0, 0, 12]]\n    arr &lt;&lt; [0, *[0, 1, 7]], arr=[[0, 0, 0, 12], [0, 0, 1, 7]]\n    arr &lt;&lt; [0, *[0, 2, 2]], arr=[[0, 0, 0, 12], [0, 0, 1, 7], [0, 0, 2, 2]]\n    arr &lt;&lt; [0, *[1, 0, 2]], arr=[[0, 0, 0, 12], [0, 0, 1, 7], [0, 0, 2, 2], [0, 1, 0, 2]]\n  after all coins, arr=[[0, 0, 0, 12], [0, 0, 1, 7], [0, 0, 2, 2], [0, 1, 0, 2]]\n&lt;&lt; returning arr=[[0, 0, 0, 12], [0, 0, 1, 7], [0, 0, 2, 2], [0, 1, 0, 2]]\n =&gt; [[0, 0, 0, 12], [0, 0, 1, 7], [0, 0, 2, 2], [0, 1, 0, 2]] \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 106013, "user_id": 633183, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/RHeN9.png?s=128&g=1", "display_name": "Thank you", "link": "https://stackoverflow.com/users/633183/thank-you"}, "is_accepted": false, "score": 1, "last_activity_date": 1489178564, "last_edit_date": 1592644375, "creation_date": 1489178564, "answer_id": 42727383, "question_id": 42655450, "link": "https://stackoverflow.com/questions/42655450/how-to-calculate-the-number-of-ways-to-represent-n-cents/42727383#42727383", "title": "How to calculate the number of ways to represent n cents", "body": "<p>The order of the coins doesn't matter, so <code>coins.min</code> isn't going to help you in this case \u2013 it's over-complicating things.</p>\n<p>First we must develop an intuition about the relationship between the kinds of coins and the amount of change to count</p>\n<blockquote>\n<p>The number of ways to change amount <code>a</code> using <code>n</code> kinds of coins equals</p>\n<ul>\n<li>the number of ways to change amount <code>a</code> using all but the first kind of coin, plus</li>\n<li>the number of ways to change amount <code>a \u2212 d</code> using all <code>n</code> kinds of coins, where <code>d</code> is the denomination of the first kind of coin.</li>\n</ul>\n<p><sub>source: <a href=\"http://sarabander.github.io/sicp/html/1_002e2.xhtml#Example_003a-Counting-change\" rel=\"nofollow noreferrer\">SICP Chapter 1.2</sub></a></p>\n</blockquote>\n\n<pre><code>### change_coins :: (Int, [Int]) -&gt; Int\ndef change_coins amount, (x,*xs)\n  if amount == 0\n    1\n  elsif amount &lt; 0 or x.nil?\n    0\n  else\n    change_coins(amount, xs) + change_coins(amount - x, [x,*xs])\n  end\nend\n\nchange_coins 11, [1, 2, 5]           # =&gt; 11\nchange_coins 2, [3]                  # =&gt; 0\nchange_coins 100, [1, 5, 10, 25, 50] # =&gt; 292\n</code></pre>\n<p><strong>Sensible return values</strong></p>\n<blockquote>\n<p>For example, in this problem we have to return -1 if the amount of money cannot be made up by any combination of the coins.</p>\n</blockquote>\n<p>The <code>-1</code> case is dumb. There are <em>zero</em> ways to change 2 cents using only a 3-cent coin; therefore we return <code>0</code>.</p>\n<p>If you really must return <code>-1</code>, just use a stupid wrapper</p>\n<pre><code>def cc amount, xs\n  count = change_coins amount, xs\n  if count == 0 then -1 else count end\nend\n</code></pre>\n<p><strong>Order doesn't matter</strong></p>\n<pre><code>change_coins 11, [5, 1, 2]           # =&gt; 11\nchange_coins 2, [3]                  # =&gt; 0\nchange_coins 100, [50, 1, 25, 10, 5] # =&gt; 292\n</code></pre>\n"}], "owner": {"reputation": 1360, "user_id": 4430977, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/1268ab423eed6c864e3c43514a55efa5?s=128&d=identicon&r=PG&f=1", "display_name": "segue_segway", "link": "https://stackoverflow.com/users/4430977/segue-segway"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1585, "favorite_count": 1, "accepted_answer_id": 42657408, "answer_count": 3, "score": -3, "last_activity_date": 1539031575, "creation_date": 1488910663, "last_edit_date": 1488927529, "question_id": 42655450, "link": "https://stackoverflow.com/questions/42655450/how-to-calculate-the-number-of-ways-to-represent-n-cents", "title": "How to calculate the number of ways to represent n cents", "body": "<p>I'm working on the following algorithm and wanted to know if my implementation is correct:</p>\n\n<blockquote>\n  <p>Given an infinite number of quarters, dimes, nickels and pennies,\n  write code to calculate the number of ways of representing n cents</p>\n</blockquote>\n\n<p>This is without memoizing:</p>\n\n<pre><code>def count_ways(n)\n  return 0 if n &lt; 0 \n  return 1 if n == 0 \n\n  count_ways(n-25) + count_ways(n-5) + count_ways(n-10) + count_ways(n-1)\nend\n</code></pre>\n"}, {"tags": ["ruby", "routes", "ruby-on-rails-5", "model-associations"], "comments": [{"owner": {"reputation": 1302, "user_id": 1368977, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c79672007d59af69a05f2b5f6929b53f?s=128&d=identicon&r=PG", "display_name": "Marc Rohloff", "link": "https://stackoverflow.com/users/1368977/marc-rohloff"}, "edited": false, "score": 0, "creation_date": 1489010602, "post_id": 42655417, "comment_id": 72489655, "body": "I&#39;m not sure that I would call it a &#39;Rails convention&#39; although I agree 3 levels of nesting might be a bit much depending on your usage. You can flatten it out by adding <code>shallow:true</code> to your resource (see this guide <a href=\"http://guides.rubyonrails.org/routing.html#nested-resources\" rel=\"nofollow noreferrer\">guides.rubyonrails.org/routing.html#nested-resources</a> which also has several other options you can use to simplify your routes). You could also create a url that looks like <code>&#47;:city_id&#47;:neighbourhood_id&#47;worksite_id</code> though that would mean more work and doing some things for yourself since you are going off the rails standard."}, {"owner": {"reputation": 1302, "user_id": 1368977, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c79672007d59af69a05f2b5f6929b53f?s=128&d=identicon&r=PG", "display_name": "Marc Rohloff", "link": "https://stackoverflow.com/users/1368977/marc-rohloff"}, "edited": false, "score": 0, "creation_date": 1489010847, "post_id": 42655417, "comment_id": 72489772, "body": "I should also add that something I consider with routes is making sure that URLs don&#39;t change. For example if a worksite could move to a different neighborhood then your url would no longer be valid and I would definitely be using a shallow url that wouldn&#39;t change. It might also look better to use a &#39;slug&#39; built from the worksite name or a random hash rather than an id for each part of the url."}, {"owner": {"reputation": 11, "user_id": 7631114, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/753335ca8b56d7cbb4f6ef2610af3c97?s=128&d=identicon&r=PG&f=1", "display_name": "Slavi", "link": "https://stackoverflow.com/users/7631114/slavi"}, "reply_to_user": {"reputation": 1302, "user_id": 1368977, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c79672007d59af69a05f2b5f6929b53f?s=128&d=identicon&r=PG", "display_name": "Marc Rohloff", "link": "https://stackoverflow.com/users/1368977/marc-rohloff"}, "edited": false, "score": 0, "creation_date": 1489069146, "post_id": 42655417, "comment_id": 72517270, "body": "The url will definitely be slugged, and the shallow approach looks like the best solution for the routes. I am just not sure if the app design is good. Apart from the routes, all the associations i need to do seem very confusing. I need more suggestions on the matter, meanwhile i&#39;ll just have to experiment."}, {"owner": {"reputation": 1302, "user_id": 1368977, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c79672007d59af69a05f2b5f6929b53f?s=128&d=identicon&r=PG", "display_name": "Marc Rohloff", "link": "https://stackoverflow.com/users/1368977/marc-rohloff"}, "edited": false, "score": 0, "creation_date": 1489081891, "post_id": 42655417, "comment_id": 72526409, "body": "In my experience, those associations are pretty much defined by the structure of your data and what you need to be able to do with it. You just need to decide how much you want to expose to your users. There are pros and cons either way."}], "owner": {"reputation": 11, "user_id": 7631114, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/753335ca8b56d7cbb4f6ef2610af3c97?s=128&d=identicon&r=PG&f=1", "display_name": "Slavi", "link": "https://stackoverflow.com/users/7631114/slavi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 40, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1488910496, "creation_date": 1488910496, "question_id": 42655417, "link": "https://stackoverflow.com/questions/42655417/rails-models-associations", "title": "Rails models associations", "body": "<p>i'm new to ruby, ruby on rails and coding in general. In order to practice i started creating an app, but i encountered a few problems.</p>\n\n<p>So first i made a User model (Devise), with an Admin role (boolean). Then i have a <strong>City</strong>, <strong>Neighbourhood</strong> and <strong>Workplace</strong> models. So now i have a hard time associatiating them.<br>\n<strong>City (has_many) Neighbourhood (has_many) Workplace</strong><br>\nI am not sure if that's the best approach for the current situation.\nEach User has to be able to, be assigned to a different city or neighbourhood.</p>\n\n<p>Then comes the routing problem. I made nested routes:</p>\n\n<pre><code>resources :cities do\n  resources :neighbourhoods do\n    resources :worksites\n  end\nend\n</code></pre>\n\n<p>But the rails convention is not to have nested routes deeper than 1 level.\nThey do work, but the address becomes quite long. And that's not something i'd like.</p>\n\n<pre><code>cities/city.id/neighbourhoods/neighbourhood.id/worksites/worksite.id\n</code></pre>\n\n<p>How would you suggest me to proceed ?</p>\n"}, {"tags": ["jquery", "ruby-on-rails", "ruby", "devise"], "comments": [{"owner": {"reputation": 25, "user_id": 2593486, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/cc1533b578eb26f8c1d9e867851d4ea1?s=128&d=identicon&r=PG", "display_name": "user2593486", "link": "https://stackoverflow.com/users/2593486/user2593486"}, "edited": false, "score": 0, "creation_date": 1488909470, "post_id": 42655078, "comment_id": 72435856, "body": "There is a typo in my post above:  &quot;customer user&quot; should read &quot;custom user&quot;."}, {"owner": {"reputation": 6200, "user_id": 637094, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/fd50f61387b63900335c8556f86237be?s=128&d=identicon&r=PG", "display_name": "Leonel Gal&#225;n", "link": "https://stackoverflow.com/users/637094/leonel-gal%c3%a1n"}, "edited": false, "score": 0, "creation_date": 1488910341, "post_id": 42655078, "comment_id": 72436331, "body": "Dates are passed as strings in the params, that&#39;s normal. If you go back to the date field it works (try it, it should be a quick change) ? Have you allowed this params through <code>devise_parameter_sanitizer</code>?"}, {"owner": {"reputation": 103, "user_id": 819727, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3e312ef6c09f4106f0f76b83d9dc7602?s=128&d=identicon&r=PG", "display_name": "BigJ", "link": "https://stackoverflow.com/users/819727/bigj"}, "edited": false, "score": 0, "creation_date": 1488910469, "post_id": 42655078, "comment_id": 72436400, "body": "What do the sent parameters look like?"}, {"owner": {"reputation": 25, "user_id": 2593486, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/cc1533b578eb26f8c1d9e867851d4ea1?s=128&d=identicon&r=PG", "display_name": "user2593486", "link": "https://stackoverflow.com/users/2593486/user2593486"}, "edited": false, "score": 0, "creation_date": 1488910486, "post_id": 42655078, "comment_id": 72436411, "body": "Yes, its in devise_parameter_sanitizer.  Changing it to a date_field causes the jquery calendar to not open."}, {"owner": {"reputation": 25, "user_id": 2593486, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/cc1533b578eb26f8c1d9e867851d4ea1?s=128&d=identicon&r=PG", "display_name": "user2593486", "link": "https://stackoverflow.com/users/2593486/user2593486"}, "edited": false, "score": 0, "creation_date": 1488910769, "post_id": 42655078, "comment_id": 72436575, "body": "They look perfect: &quot;train_dt&quot;=&gt;&quot;03/22/2017&quot;"}, {"owner": {"reputation": 103, "user_id": 819727, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3e312ef6c09f4106f0f76b83d9dc7602?s=128&d=identicon&r=PG", "display_name": "BigJ", "link": "https://stackoverflow.com/users/819727/bigj"}, "edited": false, "score": 0, "creation_date": 1488911068, "post_id": 42655078, "comment_id": 72436756, "body": "Could it be the dateFormat you are using in datepicker? Scratch that - your date looks fine.. Long shot, but you did permit the parameter? And, I see you did that as well.."}, {"owner": {"reputation": 25, "user_id": 2593486, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/cc1533b578eb26f8c1d9e867851d4ea1?s=128&d=identicon&r=PG", "display_name": "user2593486", "link": "https://stackoverflow.com/users/2593486/user2593486"}, "edited": false, "score": 0, "creation_date": 1488911723, "post_id": 42655078, "comment_id": 72437162, "body": "Yep, done and done.  I had everything working in chrome without jquery just fine, but that version isn&#39;t compatible with FF or IE so I&#39;m forced to use the jquery datepicker.  My original thought is that I have to do a type conversion somewhere, but devise is confusing things."}, {"owner": {"reputation": 103, "user_id": 819727, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3e312ef6c09f4106f0f76b83d9dc7602?s=128&d=identicon&r=PG", "display_name": "BigJ", "link": "https://stackoverflow.com/users/819727/bigj"}, "edited": false, "score": 0, "creation_date": 1488911966, "post_id": 42655078, "comment_id": 72437300, "body": "I don&#39;t think you should have to - I have exactly this datepicker working fine in an app (Rails 5 and as a textfield in the form), passed and saved with no conversion. I&#39;m thinking it might be the devise element which is messing things up maybe?"}, {"owner": {"reputation": 25, "user_id": 2593486, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/cc1533b578eb26f8c1d9e867851d4ea1?s=128&d=identicon&r=PG", "display_name": "user2593486", "link": "https://stackoverflow.com/users/2593486/user2593486"}, "edited": false, "score": 0, "creation_date": 1488912400, "post_id": 42655078, "comment_id": 72437587, "body": "Yea, that&#39;s my thought, but I&#39;m not even sure where to look.  LOL"}], "owner": {"reputation": 25, "user_id": 2593486, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/cc1533b578eb26f8c1d9e867851d4ea1?s=128&d=identicon&r=PG", "display_name": "user2593486", "link": "https://stackoverflow.com/users/2593486/user2593486"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 151, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1488909441, "creation_date": 1488909441, "question_id": 42655078, "link": "https://stackoverflow.com/questions/42655078/jquery-datepicker-devise-and-rails-5", "title": "Jquery datepicker, devise and rails 5", "body": "<p>I've created additional fields on the Devise customer user registration page.  I was originally using the rails 5 date_field.  However, I've discovered this is not compatible with FF or IE.  I am now in the process of switching to jquery datepicker via the 'jquery-ui-rails' gem.  </p>\n\n<p>The gem is working, the calendar pops up and the field is filled with the correct date.  The jquery library requires the rails text_field to be used instead of the date_field.  </p>\n\n<p>The problem comes in when you try to save the field.  The form is obviously sending the field as a string, and rails doesn't know what to do with it so it just ignores it and doesn't save it in the database.  The database field is a DateTime.</p>\n\n<p>What is the best/simplest way to convert this string to a date via the \"Devise\" user model?  Or is there a better approach?  Thanks. </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "datetime", "tzinfo"], "answers": [{"comments": [{"owner": {"reputation": 277, "user_id": 4774554, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/d72ff795ced575525d4f5cf033d65520?s=128&d=identicon&r=PG&f=1", "display_name": "VegaStudios", "link": "https://stackoverflow.com/users/4774554/vegastudios"}, "edited": false, "score": 0, "creation_date": 1488911182, "post_id": 42655537, "comment_id": 72436829, "body": "Thanks @tsao, that works by adding a timezone (Canada/Eastern) into the selected: param. Next I wonder how you could append two options at the top of the list, followed by the remaining options. i.e Two Canadian Timezones at the top followed by the remaining timezones"}, {"owner": {"reputation": 1036, "user_id": 5078051, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/10203328378168774/picture?type=large", "display_name": "Hsiu Chuan Tsao", "link": "https://stackoverflow.com/users/5078051/hsiu-chuan-tsao"}, "reply_to_user": {"reputation": 277, "user_id": 4774554, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/d72ff795ced575525d4f5cf033d65520?s=128&d=identicon&r=PG&f=1", "display_name": "VegaStudios", "link": "https://stackoverflow.com/users/4774554/vegastudios"}, "edited": false, "score": 0, "creation_date": 1488911662, "post_id": 42655537, "comment_id": 72437115, "body": "@VegaStudios, the API document says &quot;selected may also be an array of values to be selected when using a multiple select&quot;, so maybe you can set selected value be an Array."}], "tags": [], "owner": {"reputation": 1036, "user_id": 5078051, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/10203328378168774/picture?type=large", "display_name": "Hsiu Chuan Tsao", "link": "https://stackoverflow.com/users/5078051/hsiu-chuan-tsao"}, "is_accepted": true, "score": 1, "last_activity_date": 1488910946, "creation_date": 1488910946, "answer_id": 42655537, "question_id": 42655052, "link": "https://stackoverflow.com/questions/42655052/set-a-default-timezone-in-a-rails-form/42655537#42655537", "title": "Set a default timezone in a Rails form", "body": "<p>Maybe this API document is what you need.</p>\n\n<p><a href=\"http://apidock.com/rails/v4.2.7/ActionView/Helpers/FormOptionsHelper/options_for_select\" rel=\"nofollow noreferrer\">http://apidock.com/rails/v4.2.7/ActionView/Helpers/FormOptionsHelper/options_for_select</a>   </p>\n\n<pre><code>form.select :time_zone, options_for_select(TZInfo::Timezone.all.map { |tz| [\"(UTC #{tz.current_period.offset.utc_offset/3600}) #{tz.to_s}\", tz.name] }, selected: \"your default option\")\n</code></pre>\n"}], "owner": {"reputation": 277, "user_id": 4774554, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/d72ff795ced575525d4f5cf033d65520?s=128&d=identicon&r=PG&f=1", "display_name": "VegaStudios", "link": "https://stackoverflow.com/users/4774554/vegastudios"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 465, "favorite_count": 0, "accepted_answer_id": 42655537, "answer_count": 1, "score": 0, "last_activity_date": 1488910946, "creation_date": 1488909366, "question_id": 42655052, "link": "https://stackoverflow.com/questions/42655052/set-a-default-timezone-in-a-rails-form", "title": "Set a default timezone in a Rails form", "body": "<p>I am trying to set a default, or ideally first show a predefined list of options, timezone in a form when creating a company. </p>\n\n<p>Currently, the code below renders an entire list of available timezones, and finding a specific timezone is rather tedious. All of the current companies are either in one of two timezones, and it would be a better experience to default to a specific timezone, or even better, append two timezones values to the top of the list. Here is the form field:</p>\n\n<pre><code>= form.select :time_zone, (TZInfo::Timezone.all.map { |tz| [\"(UTC #{tz.current_period.offset.utc_offset/3600}) #{tz.to_s}\", tz.name] })\n</code></pre>\n\n<p>I've tried to set a few different options but there doesn't seem to be a conventional way to do so.</p>\n"}, {"tags": ["arrays", "ruby", "rspec", "parameters"], "comments": [{"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "edited": false, "score": 0, "creation_date": 1488907970, "post_id": 42654579, "comment_id": 72435075, "body": "you do not need to create a class because <code>Array</code> class is already there."}, {"owner": {"reputation": 11, "user_id": 6000533, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d4ba3a8ade39463477e60dece11c945c?s=128&d=identicon&r=PG&f=1", "display_name": "gin85", "link": "https://stackoverflow.com/users/6000533/gin85"}, "reply_to_user": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "edited": false, "score": 0, "creation_date": 1488908831, "post_id": 42654579, "comment_id": 72435509, "body": "I see. then what else can I try? should I make &#39;sum&#39; method? I don&#39;t understand what method or class I should make..TT"}, {"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "edited": false, "score": 0, "creation_date": 1488912212, "post_id": 42654579, "comment_id": 72437474, "body": "Your code in Rspec will just pass if you run it. Either you misunderstood the task or the task is senseless."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 6000533, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d4ba3a8ade39463477e60dece11c945c?s=128&d=identicon&r=PG&f=1", "display_name": "gin85", "link": "https://stackoverflow.com/users/6000533/gin85"}, "edited": false, "score": 0, "creation_date": 1488912040, "post_id": 42655002, "comment_id": 72437344, "body": "sadly.. I can&#39;t change the RSpec test code. it&#39;s given as the test, and I have to fit to that. thank you though! I vote for you."}], "tags": [], "owner": {"reputation": 5134, "user_id": 1672197, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i8HkV.png?s=128&g=1", "display_name": "orde", "link": "https://stackoverflow.com/users/1672197/orde"}, "is_accepted": false, "score": 0, "last_activity_date": 1488909205, "creation_date": 1488909205, "answer_id": 42655002, "question_id": 42654579, "link": "https://stackoverflow.com/questions/42654579/rspec-ruby-parameter/42655002#42655002", "title": "RSpec ruby parameter", "body": "<p>In this case, you can use rspec's implicitly-defined subject.  As the <a href=\"http://www.relishapp.com/rspec/rspec-core/v/3-5/docs/subject/implicitly-defined-subject\" rel=\"nofollow noreferrer\">documentation</a> indicates:</p>\n\n<blockquote>\n  <p>If the first argument to the outermost example group is a class, an\n  instance of that class is exposed to each example via the subject\n  method.</p>\n</blockquote>\n\n<p>Using their first example as a template:</p>\n\n<pre><code>RSpec.describe Array do\n  it \"should be empty when first created\" do\n    expect(subject).to be_empty\n  end\nend\n</code></pre>\n\n<p>You can update your examples to use an implicit subject.  For example:</p>\n\n<pre><code>RSpec.describe Array do\n  describe \"#sum\" do\n    it \"has a #sum method\" do\n      expect(subject).to respond_to(:sum)\n    end\n  end\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 631, "user_id": 134327, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NW2l2.png?s=128&g=1", "display_name": "Mario Carrion", "link": "https://stackoverflow.com/users/134327/mario-carrion"}, "is_accepted": true, "score": 0, "last_activity_date": 1488924015, "last_edit_date": 1488924015, "creation_date": 1488923415, "answer_id": 42659012, "question_id": 42654579, "link": "https://stackoverflow.com/questions/42654579/rspec-ruby-parameter/42659012#42659012", "title": "RSpec ruby parameter", "body": "<p>This has nothing to do with RSpec, but more with the <strong>subject</strong> itself, in this case the <code>Array</code> class.</p>\n\n<p>To make your tests pass you're expected to \"monkey patch\" that said <code>Array</code> to add the instance method <code>sum</code>, something like this:</p>\n\n<pre><code>class Array\n  def sum\n    return 0 if empty?\n\n    sum = 0\n    self.each { |val| sum += val.to_i }\n    sum\n  end\nend\n</code></pre>\n\n<p><strong>EDIT</strong></p>\n\n<p>Please notice that Ruby 2.4 already includes a <code>sum</code> method, so the code above is for previous 2.x versions <a href=\"https://ruby-doc.org/core-2.4.0/Array.html#method-i-sum\" rel=\"nofollow noreferrer\">https://ruby-doc.org/core-2.4.0/Array.html#method-i-sum</a></p>\n"}], "owner": {"reputation": 11, "user_id": 6000533, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d4ba3a8ade39463477e60dece11c945c?s=128&d=identicon&r=PG&f=1", "display_name": "gin85", "link": "https://stackoverflow.com/users/6000533/gin85"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 272, "favorite_count": 0, "accepted_answer_id": 42659012, "answer_count": 2, "score": 0, "last_activity_date": 1488924015, "creation_date": 1488907883, "last_edit_date": 1488908109, "question_id": 42654579, "link": "https://stackoverflow.com/questions/42654579/rspec-ruby-parameter", "title": "RSpec ruby parameter", "body": "<pre><code>describe Array do\n  describe \"#sum\" do\n    it \"has a #sum method\" do\n      expect([]).to respond_to(:sum)\n    end\n\n    it \"should be 0 for an empty array\" do\n      expect([].sum).to eq(0)\n    end\n\n    it \"should add all of the elements\" do\n      expect([1,2,4].sum).to eq(7)\n    end\n  end\nend\n</code></pre>\n\n<p>The code above is Rspec code. I need ruby code to be tested by the RSpec above, and I thought I need to make 'class Array' and the class gets parameter either array or text (like [].sum) . </p>\n\n<pre><code>class Array\n\n        def initialize(arr)\n            @arr = arr    \n        end\n\n        def sum\n            if @arr == nil\n                return 0\n            else\n\n                if @arr.include?(.)\n\n                else\n\n                end    \n            end\n        end\n    end\n</code></pre>\n\n<p>but then I realized that I got wrong idea about the parameter.  I've searched over hours about RSpec to figure out what that means.. ([].sum as parameter) but I failed.</p>\n"}, {"tags": ["ruby", "rubygems", "bundler"], "answers": [{"comments": [{"owner": {"reputation": 4370, "user_id": 2012130, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/683779172d64fbab92601fd6fbbb77e1?s=128&d=identicon&r=PG", "display_name": "Oliver Shaw", "link": "https://stackoverflow.com/users/2012130/oliver-shaw"}, "edited": false, "score": 0, "creation_date": 1488905487, "post_id": 42653787, "comment_id": 72433636, "body": "That seems to be the way that the default mini test based gem is set up. That doesn&#39;t work either. With this skeleton gem, the foobar gem is required. Bundler attempts to provide this from the local source. So in test helper starts with <code>require &#39;foobar&#39;</code>. <a href=\"https://github.com/ollyjshaw/broken_gem/blob/master/spec/spec_helper.rb\" rel=\"nofollow noreferrer\">github.com/ollyjshaw/broken_gem/blob/master/spec/spec_helper&zwnj;&#8203;.rb</a> It brings in the other files ok, just not the new one"}, {"owner": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "reply_to_user": {"reputation": 4370, "user_id": 2012130, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/683779172d64fbab92601fd6fbbb77e1?s=128&d=identicon&r=PG", "display_name": "Oliver Shaw", "link": "https://stackoverflow.com/users/2012130/oliver-shaw"}, "edited": false, "score": 1, "creation_date": 1488905956, "post_id": 42653787, "comment_id": 72433928, "body": "You&#39;re not requiring your error file when your gem is loaded: <a href=\"https://github.com/ollyjshaw/broken_gem/blob/master/lib/foobar.rb#L1\" rel=\"nofollow noreferrer\">github.com/ollyjshaw/broken_gem/blob/master/lib/foobar.rb#L1</a>"}, {"owner": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "reply_to_user": {"reputation": 4370, "user_id": 2012130, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/683779172d64fbab92601fd6fbbb77e1?s=128&d=identicon&r=PG", "display_name": "Oliver Shaw", "link": "https://stackoverflow.com/users/2012130/oliver-shaw"}, "edited": false, "score": 1, "creation_date": 1488905998, "post_id": 42653787, "comment_id": 72433958, "body": "You&#39;d load your main module and that module would load other modules/classes it needs and down the tree it goes."}, {"owner": {"reputation": 4370, "user_id": 2012130, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/683779172d64fbab92601fd6fbbb77e1?s=128&d=identicon&r=PG", "display_name": "Oliver Shaw", "link": "https://stackoverflow.com/users/2012130/oliver-shaw"}, "edited": false, "score": 1, "creation_date": 1488906101, "post_id": 42653787, "comment_id": 72434021, "body": "Oh man, I knew it would be a face palm. Thank Anthony! My only saving grace is I don&#39;t develop in ruby for the day job :-)"}], "tags": [], "owner": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "is_accepted": true, "score": 1, "last_activity_date": 1488905269, "creation_date": 1488905269, "answer_id": 42653787, "question_id": 42653680, "link": "https://stackoverflow.com/questions/42653680/gem-development-cant-add-new-file/42653787#42653787", "title": "Gem development can&#39;t add new file", "body": "<p>Typically you'd add all the class/module files to the load path in the <code>spec_helper.rb</code> file:</p>\n\n<pre><code>$LOAD_PATH.unshift File.expand_path(\"../../lib\", __FILE__)\nrequire \"your_gem\"\n</code></pre>\n"}], "owner": {"reputation": 4370, "user_id": 2012130, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/683779172d64fbab92601fd6fbbb77e1?s=128&d=identicon&r=PG", "display_name": "Oliver Shaw", "link": "https://stackoverflow.com/users/2012130/oliver-shaw"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "accepted_answer_id": 42653787, "answer_count": 1, "score": 0, "last_activity_date": 1488906208, "creation_date": 1488904988, "last_edit_date": 1495542722, "question_id": 42653680, "link": "https://stackoverflow.com/questions/42653680/gem-development-cant-add-new-file", "title": "Gem development can&#39;t add new file", "body": "<p>I'm having what seems to be some very basic problems getting started with Gem development in ruby.</p>\n\n<p>I've created a new project with this command.</p>\n\n<pre><code>bundle gem foobar\n</code></pre>\n\n<p>I can now run </p>\n\n<pre><code>bundle &amp;&amp; bundle exec rake spec\n</code></pre>\n\n<p>and everything is fine. </p>\n\n<p>However I try to add a new part to my spec</p>\n\n<pre><code>expect(Foobar::BAR).not_to be nil\n</code></pre>\n\n<p>and then define this in ./lib/foobar/error.rb</p>\n\n<pre><code>module Foobar\n  BAR=\"bar\"\nend\n</code></pre>\n\n<p>It just does not find this file. Error is <code>NameError: uninitialized constant</code>. I can <code>require_relative</code> in <code>spec_helper.rb</code> but that's clearly not right or sustainable.</p>\n\n<p>I've seen the issue here <a href=\"https://stackoverflow.com/questions/16922322/missing-file-in-gem-after-build\">Missing File in Gem after Build</a> I've added the new file to git. That does not help, adding the files directly in the gemspec file does not help either.</p>\n\n<p>The whole project is here <a href=\"https://github.com/ollyjshaw/broken_gem\" rel=\"nofollow noreferrer\">https://github.com/ollyjshaw/broken_gem</a></p>\n\n<p>What am I doing wrong? It's gotta be something trivial, but I can't see it.</p>\n\n<p><strong>Answer:</strong> \nAnswer is in Antony's comment\n\"You're not requiring your error file when your gem is loaded: github.com/ollyjshaw/broken_gem/blob/master/lib/foobar.rb#L1\" \n\"You'd load your main module and that module would load other modules/classes it needs and down the tree it goes\"</p>\n"}, {"tags": ["ruby", "authentication", "oauth-2.0", "restforce"], "answers": [{"tags": [], "owner": {"reputation": 298, "user_id": 6196389, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/b16e6130113046b62d3eef5495d044a2?s=128&d=identicon&r=PG&f=1", "display_name": "Mike", "link": "https://stackoverflow.com/users/6196389/mike"}, "is_accepted": true, "score": 1, "last_activity_date": 1488905429, "last_edit_date": 1488905429, "creation_date": 1488903855, "answer_id": 42653279, "question_id": 42652677, "link": "https://stackoverflow.com/questions/42652677/how-to-get-valid-invalid-login-from-oauth-2-for-ruby/42653279#42653279", "title": "How to get valid/invalid login from OAuth 2 for Ruby", "body": "<p>Well I figured it out by going through the documentation.  It was:</p>\n\n<pre><code>info = rf_client.get(response.id).body\nputs info\n</code></pre>\n\n<p>On success it returns information where I can access every bit with <code>info.username</code>, <code>info.object</code>. </p>\n\n<p>On failure of <code>client_id</code> and <code>client_secret</code>, they each give their own respective messages.  On failure of the username, security token, or API key, it gives the same failure message. </p>\n\n<p>I can work with that.</p>\n"}], "owner": {"reputation": 298, "user_id": 6196389, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/b16e6130113046b62d3eef5495d044a2?s=128&d=identicon&r=PG&f=1", "display_name": "Mike", "link": "https://stackoverflow.com/users/6196389/mike"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "accepted_answer_id": 42653279, "answer_count": 1, "score": 2, "last_activity_date": 1488905429, "creation_date": 1488902034, "last_edit_date": 1488905302, "question_id": 42652677, "link": "https://stackoverflow.com/questions/42652677/how-to-get-valid-invalid-login-from-oauth-2-for-ruby", "title": "How to get valid/invalid login from OAuth 2 for Ruby", "body": "<p>I'm running the Restforce API, which I believe uses OAuth 2 from what I have read.  The login I have works, but at this point I am just trying to make something that returns whether the login was successful or not.  I have the username, password, security token, client id, and client secret.</p>\n\n<p>When I print the result it returns:</p>\n\n<pre><code>#Restforce::Data::Client:0x0055b1b3433798\n</code></pre>\n\n<p>Is there a way I can have it return \"success!\" or \"failure!\" or anything like that?</p>\n\n<pre><code>URI_SF = URI.parse(URI.encode(\"https://na35.salesforce.com\"))\n\ndef use_restforce_api()\n    rf_client = Restforce.new(username: EMAIL,\n                       password: PASSWORD,\n                       security_token: SECURITY_TOKEN,\n                       instance_url: URI_SF,\n                       client_id: CLIENT_ID,\n                       client_secret: CLIENT_SECRET,\n                       api_version: '38.0')\n\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "rubygems", "bundler", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 3467, "user_id": 906511, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/61286bced0ae2da15261439d1bb62297?s=128&d=identicon&r=PG", "display_name": "lcguida", "link": "https://stackoverflow.com/users/906511/lcguida"}, "edited": false, "score": 1, "creation_date": 1488900704, "post_id": 42652189, "comment_id": 72430356, "body": "Can you put the whole log output ?"}, {"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1488900814, "post_id": 42652189, "comment_id": 72430422, "body": "Add the whole log to your question, and try installing the nio4r gem in a separate wa, otherwise download it from rubygems.org and do the installation."}, {"owner": {"reputation": 95, "user_id": 7644802, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-nbvNvv12bbM/AAAAAAAAAAI/AAAAAAAAALQ/7YPFmsFQw0s/photo.jpg?sz=128", "display_name": "Dung Pham", "link": "https://stackoverflow.com/users/7644802/dung-pham"}, "edited": false, "score": 0, "creation_date": 1488900868, "post_id": 42652189, "comment_id": 72430462, "body": "You should try installing the gem <code>nio4r</code> by running: <code>gem install nio4r -v 1.2.1</code> and see what the problem is."}, {"owner": {"reputation": 221, "user_id": 7385236, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/355f6109123c477f9fb3bea15c20a84b?s=128&d=identicon&r=PG&f=1", "display_name": "CodeTooNarrow", "link": "https://stackoverflow.com/users/7385236/codetoonarrow"}, "reply_to_user": {"reputation": 95, "user_id": 7644802, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-nbvNvv12bbM/AAAAAAAAAAI/AAAAAAAAALQ/7YPFmsFQw0s/photo.jpg?sz=128", "display_name": "Dung Pham", "link": "https://stackoverflow.com/users/7644802/dung-pham"}, "edited": false, "score": 0, "creation_date": 1488903258, "post_id": 42652189, "comment_id": 72432172, "body": "@DungPham I tried installing the gem both through the command line and putting it in my Gemfile but it has not worked."}, {"owner": {"reputation": 221, "user_id": 7385236, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/355f6109123c477f9fb3bea15c20a84b?s=128&d=identicon&r=PG&f=1", "display_name": "CodeTooNarrow", "link": "https://stackoverflow.com/users/7385236/codetoonarrow"}, "reply_to_user": {"reputation": 3467, "user_id": 906511, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/61286bced0ae2da15261439d1bb62297?s=128&d=identicon&r=PG", "display_name": "lcguida", "link": "https://stackoverflow.com/users/906511/lcguida"}, "edited": false, "score": 0, "creation_date": 1488904104, "post_id": 42652189, "comment_id": 72432709, "body": "@lcguida Here you go."}, {"owner": {"reputation": 3467, "user_id": 906511, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/61286bced0ae2da15261439d1bb62297?s=128&d=identicon&r=PG", "display_name": "lcguida", "link": "https://stackoverflow.com/users/906511/lcguida"}, "edited": false, "score": 1, "creation_date": 1488904223, "post_id": 42652189, "comment_id": 72432788, "body": "As you can see.. you have a <code>Permission Denied</code> error in you log. Can you check the permission on the folder indicated in the error message?"}, {"owner": {"reputation": 95, "user_id": 7644802, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-nbvNvv12bbM/AAAAAAAAAAI/AAAAAAAAALQ/7YPFmsFQw0s/photo.jpg?sz=128", "display_name": "Dung Pham", "link": "https://stackoverflow.com/users/7644802/dung-pham"}, "edited": false, "score": 0, "creation_date": 1488904435, "post_id": 42652189, "comment_id": 72432928, "body": "@LukePlourde Try these commands with <code>sudo</code> or <code>chmod</code> the folder listed in the logs."}, {"owner": {"reputation": 1548, "user_id": 1977012, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4d66c5a2d6be57e7cb9bdef200417b4d?s=128&d=identicon&r=PG", "display_name": "Egel", "link": "https://stackoverflow.com/users/1977012/egel"}, "edited": false, "score": 0, "creation_date": 1516985055, "post_id": 42652189, "comment_id": 83924894, "body": "I don&#39;t know which version of ruby you used but for me updating the docker image solved the problem - to new patch version (<b>there is no need</b> to change version of ruby, i.e.: 2.2.-&gt; 2.4 ). Previously I&#39;ve used <code>phusion&#47;passenger-ruby22:0.9.24</code> and I&#39;ve updated it to <code>phusion&#47;passenger-ruby22:0.9.29</code>."}], "answers": [{"comments": [{"owner": {"reputation": 221, "user_id": 7385236, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/355f6109123c477f9fb3bea15c20a84b?s=128&d=identicon&r=PG&f=1", "display_name": "CodeTooNarrow", "link": "https://stackoverflow.com/users/7385236/codetoonarrow"}, "edited": false, "score": 0, "creation_date": 1488986680, "post_id": 42654011, "comment_id": 72475003, "body": "With no sudo command, the error regarding the nio4r is still the same."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "reply_to_user": {"reputation": 221, "user_id": 7385236, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/355f6109123c477f9fb3bea15c20a84b?s=128&d=identicon&r=PG&f=1", "display_name": "CodeTooNarrow", "link": "https://stackoverflow.com/users/7385236/codetoonarrow"}, "edited": false, "score": 0, "creation_date": 1489002489, "post_id": 42654011, "comment_id": 72485368, "body": "Did you reset the ownership of the files?"}, {"owner": {"reputation": 221, "user_id": 7385236, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/355f6109123c477f9fb3bea15c20a84b?s=128&d=identicon&r=PG&f=1", "display_name": "CodeTooNarrow", "link": "https://stackoverflow.com/users/7385236/codetoonarrow"}, "edited": false, "score": 0, "creation_date": 1489068030, "post_id": 42654011, "comment_id": 72516433, "body": "The ownership did not change no."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "reply_to_user": {"reputation": 221, "user_id": 7385236, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/355f6109123c477f9fb3bea15c20a84b?s=128&d=identicon&r=PG&f=1", "display_name": "CodeTooNarrow", "link": "https://stackoverflow.com/users/7385236/codetoonarrow"}, "edited": false, "score": 0, "creation_date": 1489077523, "post_id": 42654011, "comment_id": 72523502, "body": "Usually using <code>chown</code> will fix a permissions problem because the permission flags should default to something usable. I&#39;ll add more information to the answer about how to reset the permission read/write/execute flags."}], "tags": [], "owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "is_accepted": false, "score": 1, "last_activity_date": 1489078201, "last_edit_date": 1592644375, "creation_date": 1488906042, "answer_id": 42654011, "question_id": 42652189, "link": "https://stackoverflow.com/questions/42652189/how-to-fix-a-bundle-install-nio4r-error-on-rails-5-0-0/42654011#42654011", "title": "How to fix a bundle install &quot;nio4r error&quot; on Rails 5.0.0", "body": "<p>This path:</p>\n<pre><code>/Users/lukeplourde/.rbenv/...\n</code></pre>\n<p>shows you're using rbenv to manage your Ruby.</p>\n<p>You should never get permission errors in that case. The fact you <em>are</em> getting a permission error strongly suggests that at some point you installed something, probably nio4r, into that rbenv-managed Ruby using <code>sudo</code>.</p>\n<p>When you use <code>sudo</code>, you temporarily elevate your privileges to the system's root user's privileges, and all files saved will have that user's read/write settings and ownership. That's definitely not what you want.</p>\n<p><a href=\"https://github.com/rbenv/rbenv#installing-ruby-gems\" rel=\"nofollow noreferrer\">rbenv's documentation</a> specifically says to not use <code>sudo</code>:</p>\n<blockquote>\n<p><strong>You don't need sudo</strong> to install gems. Typically, the Ruby versions will be installed and writeable by your user. No extra privileges are required to install gems.</p>\n</blockquote>\n<p>To fix the problem simply run:</p>\n<pre><code>sudo chown -R lukeplourde ~/.rbenv\n</code></pre>\n<p>and <code>chown</code> will walk through all directories in the <code>~/.rbenv</code> directory and change the ownership back to you for all child files and directories.</p>\n<p>Knowing when to use <code>sudo</code> takes experience and knowledge of the Ruby environment, your current settings for it, and what it is you intend to happen. In general though, if your rbenv is set to use a Ruby you installed you do not want to use any <code>sudo</code> command when using <code>gem</code>. If you are on Mac OS and you are using <code>sudo</code> and rbenv and a Ruby you installed then think multiple times before pressing <kbd>Return</kbd> because it's likely not what you want to do.</p>\n<p>And, the above warnings about using <code>sudo</code> apply if you're using a RVM or Homebrew managed Ruby also. <code>sudo</code> is usually not your desired first approach. The documentation on their official sites is your best source of information on what to do.</p>\n<hr />\n<blockquote>\n<blockquote>\n<p>Did you reset the ownership of the files?</p>\n</blockquote>\n<p>The ownership did not change no.</p>\n</blockquote>\n<p>Most of the time, two things are at the root of permissions problems:</p>\n<ul>\n<li>ownership</li>\n<li>access flags</li>\n</ul>\n<p><code>chown</code> changes ownership of a file or directory and optionally allows us to change the owner's group. If you are not the owner according to the system, and/or not in the group, then your chances of being able to access it went down.</p>\n<p><code>chmod</code> changes the access privileges of a file or directory for the owner, their group, and/or for everyone else on the machine.</p>\n<p>The <code>.gitignore</code> file in question should be owned by you, and have permissions of <code>-rw-r--r--</code>. If those aren't, you need to set them so they are. Study the <code>chmod</code> and <code>chown</code> commands using <code>man chmod</code> and <code>man chown</code> at the command-line and adjust the file/directory permissions appropriately and you should be able to fix the problem.</p>\n"}, {"comments": [{"owner": {"reputation": 221, "user_id": 7385236, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/355f6109123c477f9fb3bea15c20a84b?s=128&d=identicon&r=PG&f=1", "display_name": "CodeTooNarrow", "link": "https://stackoverflow.com/users/7385236/codetoonarrow"}, "edited": false, "score": 1, "creation_date": 1488987137, "post_id": 42657847, "comment_id": 72475366, "body": "I should mention this on a MacOS Sierra 10.12.3"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 2, "creation_date": 1489077403, "post_id": 42657847, "comment_id": 72523412, "body": "The <code>&#47;Users&#47;</code> is the key to telling whether it&#39;s a Mac OS system or regular *nix. Mac OS doesn&#39;t use <code>apt-get</code>."}], "tags": [], "owner": {"reputation": 76, "user_id": 1729004, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b6fa4f0f5327d74cc2ecaf9552238a8?s=128&d=identicon&r=PG", "display_name": "gabrielpedepera", "link": "https://stackoverflow.com/users/1729004/gabrielpedepera"}, "is_accepted": false, "score": 3, "last_activity_date": 1488919017, "creation_date": 1488919017, "answer_id": 42657847, "question_id": 42652189, "link": "https://stackoverflow.com/questions/42652189/how-to-fix-a-bundle-install-nio4r-error-on-rails-5-0-0/42657847#42657847", "title": "How to fix a bundle install &quot;nio4r error&quot; on Rails 5.0.0", "body": "<p>I was with the same error just now.. In my case, I had installed the ruby through the package: <a href=\"https://www.brightbox.com/blog/2017/01/13/ruby-2-4-ubuntu-packages/\" rel=\"nofollow noreferrer\">https://www.brightbox.com/blog/2017/01/13/ruby-2-4-ubuntu-packages/</a></p>\n\n<p>But, I had not installed the <code>ruby-dev</code> package.</p>\n\n<p>In my case:  <code>sudo apt-get install ruby2.4-dev</code> worked for me.</p>\n\n<p>After installation I was able to compile the gem: <code>nio4r</code></p>\n\n<p>I think you have to install some package <code>ruby-dev</code> =>\n<code>sudo apt-get install ruby-dev\n</code></p>\n"}, {"comments": [{"owner": {"reputation": 3943, "user_id": 1129162, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/a7e7e4c5cf996dca05b07cfd33695d1a?s=128&d=identicon&r=PG", "display_name": "Daniel Honig", "link": "https://stackoverflow.com/users/1129162/daniel-honig"}, "edited": false, "score": 0, "creation_date": 1529873087, "post_id": 42721575, "comment_id": 89020255, "body": "Worked for me on Archlinux as well"}], "tags": [], "owner": {"reputation": 221, "user_id": 7385236, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/355f6109123c477f9fb3bea15c20a84b?s=128&d=identicon&r=PG&f=1", "display_name": "CodeTooNarrow", "link": "https://stackoverflow.com/users/7385236/codetoonarrow"}, "is_accepted": true, "score": 11, "last_activity_date": 1489158415, "creation_date": 1489158415, "answer_id": 42721575, "question_id": 42652189, "link": "https://stackoverflow.com/questions/42652189/how-to-fix-a-bundle-install-nio4r-error-on-rails-5-0-0/42721575#42721575", "title": "How to fix a bundle install &quot;nio4r error&quot; on Rails 5.0.0", "body": "<p>I was able to fix the problem with:</p>\n\n<pre><code>brew update \n</code></pre>\n\n<p>and</p>\n\n<pre><code>bundle update\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2210, "user_id": 1036696, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/wW4n9.png?s=128&g=1", "display_name": "Tim Kretschmer", "link": "https://stackoverflow.com/users/1036696/tim-kretschmer"}, "edited": false, "score": 2, "creation_date": 1506190682, "post_id": 44112455, "comment_id": 79723877, "body": "my champ, my hero. the mean where all tech dreams come true! i love you."}, {"owner": {"reputation": 2837, "user_id": 6245337, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8VoQ5.jpg?s=128&g=1", "display_name": "Ana Mar&#237;a Mart&#237;nez G&#243;mez", "link": "https://stackoverflow.com/users/6245337/ana-mar%c3%ada-mart%c3%adnez-g%c3%b3mez"}, "edited": false, "score": 2, "creation_date": 1530352081, "post_id": 44112455, "comment_id": 89213837, "body": "it works! but why? an explanation would be really appreciated :)"}], "tags": [], "owner": {"reputation": 4509, "user_id": 2936491, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/BIeeI.jpg?s=128&g=1", "display_name": "techdreams", "link": "https://stackoverflow.com/users/2936491/techdreams"}, "is_accepted": false, "score": 12, "last_activity_date": 1495454766, "creation_date": 1495454766, "answer_id": 44112455, "question_id": 42652189, "link": "https://stackoverflow.com/questions/42652189/how-to-fix-a-bundle-install-nio4r-error-on-rails-5-0-0/44112455#44112455", "title": "How to fix a bundle install &quot;nio4r error&quot; on Rails 5.0.0", "body": "<p>I resolved the issue by running the following command.</p>\n\n<pre><code>bundle config build.nio4r --with-cflags=\"-std=c99\"\nbundle\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1651, "user_id": 217187, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/fc6b4906307bcb41df69ea427c3b0041?s=128&d=identicon&r=PG", "display_name": "smcdrc", "link": "https://stackoverflow.com/users/217187/smcdrc"}, "is_accepted": false, "score": 1, "last_activity_date": 1569638939, "creation_date": 1569638939, "answer_id": 58142978, "question_id": 42652189, "link": "https://stackoverflow.com/questions/42652189/how-to-fix-a-bundle-install-nio4r-error-on-rails-5-0-0/58142978#58142978", "title": "How to fix a bundle install &quot;nio4r error&quot; on Rails 5.0.0", "body": "<p>If anyone is looking for this, I had updated my computer and the command line tools were updated. I needed to agree to the XCode license. </p>\n\n<pre><code>Error: You have not agreed to the Xcode license. Please resolve this\n by running:   sudo xcodebuild -license accept\n</code></pre>\n\n<p>This fixed it for me.</p>\n"}], "owner": {"reputation": 221, "user_id": 7385236, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/355f6109123c477f9fb3bea15c20a84b?s=128&d=identicon&r=PG&f=1", "display_name": "CodeTooNarrow", "link": "https://stackoverflow.com/users/7385236/codetoonarrow"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 13186, "favorite_count": 3, "accepted_answer_id": 42721575, "answer_count": 5, "score": 11, "last_activity_date": 1569638939, "creation_date": 1488900649, "last_edit_date": 1495481489, "question_id": 42652189, "link": "https://stackoverflow.com/questions/42652189/how-to-fix-a-bundle-install-nio4r-error-on-rails-5-0-0", "title": "How to fix a bundle install &quot;nio4r error&quot; on Rails 5.0.0", "body": "<p>The exact error is:</p>\n\n<pre><code>An error occurred while installing nio4r (1.2.1), and bundler cannot continue. Make sure that 'gem install nio4r -v '1.2.1'' succeeds before bundling.\n</code></pre>\n\n<p>Here is a trace:</p>\n\n<pre><code>Fetching gem metadata from https://rubygems.org/\nFetching version metadata from https://rubygems.org/\nFetching dependency metadata from https://rubygems.org/\nUsing rake 12.0.0\nUsing concurrent-ruby 1.0.5\nUsing i18n 0.8.1\nUsing minitest 5.10.1\nUsing thread_safe 0.3.6\nUsing builder 3.2.3\nUsing erubis 2.7.0\nUsing mini_portile2 2.1.0\nUsing rack 2.0.1\nInstalling nio4r 1.2.1 with native extensions\n\nErrno::EACCES: Permission denied @ rb_sysopen - /Users/lukeplourde/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/nio4r-1.2.1/.gitignore\nUsing websocket-extensions 0.1.2\nUsing mime-types-data 3.2016.0521\nUsing arel 7.1.4\nUsing byebug 9.0.6\nUsing coffee-script-source 1.12.2\nUsing execjs 2.7.0\nUsing method_source 0.8.2\nUsing thor 0.19.4\nUsing debug_inspector 0.0.2\nUsing ffi 1.9.17\nUsing multi_json 1.12.1\nUsing rb-fsevent 0.9.8\nUsing puma 3.7.0\nUsing bundler 1.12.5\nUsing sass 3.4.23\nUsing tilt 2.0.6\nUsing sqlite3 1.3.13\nUsing turbolinks-source 5.0.0\nUsing tzinfo 1.2.2\nUsing nokogiri 1.7.0.1\nUsing rack-test 0.6.3\nUsing sprockets 3.7.1\nAn error occurred while installing nio4r (1.2.1), and Bundler cannot continue.\nMake sure that `gem install nio4r -v '1.2.1'` succeeds before bundling.\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "rotation", "paperclip"], "comments": [{"owner": {"reputation": 973, "user_id": 1659370, "user_type": "registered", "accept_rate": 32, "profile_image": "https://www.gravatar.com/avatar/6d120a0452ccef4756d5e1af5ae01383?s=128&d=identicon&r=PG", "display_name": "kashif", "link": "https://stackoverflow.com/users/1659370/kashif"}, "edited": false, "score": 0, "creation_date": 1525346768, "post_id": 42651588, "comment_id": 87325229, "body": "any update on this issue ?"}], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 11363815, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/5e92e9f73bc908412d7089514e84c7a5?s=128&d=identicon&r=PG", "display_name": "deprecated", "link": "https://stackoverflow.com/users/11363815/deprecated"}, "is_accepted": false, "score": 0, "last_activity_date": 1555338471, "creation_date": 1555338471, "answer_id": 55691414, "question_id": 42651588, "link": "https://stackoverflow.com/questions/42651588/rotate-image-with-paperclip-5/55691414#55691414", "title": "Rotate image with Paperclip 5", "body": "<p>You have no make method: <a href=\"https://github.com/rezeko/paperclip/blob/master/lib/paperclip/processor.rb#L9\" rel=\"nofollow noreferrer\">https://github.com/rezeko/paperclip/blob/master/lib/paperclip/processor.rb#L9</a></p>\n\n<p>A fix is to use <code>class Rotator &lt; Thumbnail</code>, and just inherit the processing setup by the default processor.</p>\n"}], "owner": {"reputation": 667, "user_id": 1745190, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c432b829ab6f01f221e56a3586b8d296?s=128&d=identicon&r=PG", "display_name": "updater", "link": "https://stackoverflow.com/users/1745190/updater"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 365, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1555338471, "creation_date": 1488898981, "question_id": 42651588, "link": "https://stackoverflow.com/questions/42651588/rotate-image-with-paperclip-5", "title": "Rotate image with Paperclip 5", "body": "<p>I've got photo on my model</p>\n\n<pre><code>has_attached_file :photo, BucketConfig.default.merge(\n      processors: [:rotator],\n      styles: {\n          original: Proc.new { |a| { rotation: a.rotation } }\n      },\n      default_url:  ActionController::Base.helpers.asset_path('assets/request_default.png')\n  )\n</code></pre>\n\n<p>To catch a rotation param I do something like this</p>\n\n<pre><code>attr_accessor :rotation\n\n    before_save :adjust_rotation\n    before_update :reprocess_image\n\n    protected\n\n    def adjust_rotation\n      self.rotation = self.rotation.to_i\n      self.rotation = self.rotation % 360 if self.rotation &gt;= 360 || self.rotation &lt;= -360\n    end\n\n    def reprocess_image\n      self.photo.reprocess! unless self.rotation.zero?\n    end\n</code></pre>\n\n<p>my Rotator process in lib/paperclip</p>\n\n<pre><code>module Paperclip\n  class Rotator &lt; Processor\n    def transformation_command\n      if rotator_command\n        rotator_command + super.join(' ')\n      else\n        super\n      end\n    end\n\n    def rotator_command\n      target = @attachment\n      if target.rotation.present?\n        \" -rotate #{target.rotation} \"\n      end\n    end\n  end\nend\n</code></pre>\n\n<p>When I call</p>\n\n<pre><code>m = Model.first\nm.rotation=90\nm.save\n</code></pre>\n\n<p>I've got error:</p>\n\n<pre><code>NoMethodError - undefined method `closed?' for nil:NilClass\nDid you mean?  clone:\n  paperclip (4.3.7) lib/paperclip/attachment.rb:582:in `block in unlink_files'\n  paperclip (4.3.7) lib/paperclip/attachment.rb:581:in `unlink_files'\n  paperclip (4.3.7) lib/paperclip/attachment.rb:536:in `post_process_style'\n  paperclip (4.3.7) lib/paperclip/attachment.rb:511:in `post_process_styles'\n  paperclip (4.3.7) lib/paperclip/attachment.rb:504:in `block (2 levels) in post_process'\n</code></pre>\n\n<p>Why my reprocess! method doesn't work ? Do I something wrong with my rotator process? Where's the problem?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "rails-activerecord"], "comments": [{"owner": {"reputation": 3467, "user_id": 906511, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/61286bced0ae2da15261439d1bb62297?s=128&d=identicon&r=PG", "display_name": "lcguida", "link": "https://stackoverflow.com/users/906511/lcguida"}, "edited": false, "score": 0, "creation_date": 1488901426, "post_id": 42650704, "comment_id": 72430867, "body": "I encourage you to take a look at this article (<a href=\"http://blog.bigbinary.com/2013/07/01/preload-vs-eager-load-vs-joins-vs-includes.html\" rel=\"nofollow noreferrer\">blog.bigbinary.com/2013/07/01/&hellip;</a>) to understand what <code>includes</code> (and <code>joins</code>, <code>eager_load</code> and <code>preload</code>) does."}], "answers": [{"tags": [], "owner": {"reputation": 3467, "user_id": 906511, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/61286bced0ae2da15261439d1bb62297?s=128&d=identicon&r=PG", "display_name": "lcguida", "link": "https://stackoverflow.com/users/906511/lcguida"}, "is_accepted": true, "score": 1, "last_activity_date": 1488901887, "creation_date": 1488901887, "answer_id": 42652621, "question_id": 42650704, "link": "https://stackoverflow.com/questions/42650704/how-to-get-the-results-of-other-tables-using-includes-or-joins-in-ruby-on-rails/42652621#42652621", "title": "How to get the results of other tables using includes or joins in Ruby on Rails", "body": "<p>If you want to have <code>PrivateClass</code>, you're starting from the wrong point (<code>User</code>). You need to start from <code>PrivateClass</code> joining all the intermediary tables and using the user id as condition:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>PrivateClass.joins(private_school: :user).where(user: {id: 9})\n\n# or a little more performant (avoids one join)\n\nPrivateClass.joins(:private_school).where(private_school: {user_id: 9})\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1529, "user_id": 1526010, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64c115d3a69fa581e1e81beca6bbab69?s=128&d=identicon&r=PG", "display_name": "244an", "link": "https://stackoverflow.com/users/1526010/244an"}, "is_accepted": false, "score": 1, "last_activity_date": 1488904985, "last_edit_date": 1488904985, "creation_date": 1488902891, "answer_id": 42652972, "question_id": 42650704, "link": "https://stackoverflow.com/questions/42650704/how-to-get-the-results-of-other-tables-using-includes-or-joins-in-ruby-on-rails/42652972#42652972", "title": "How to get the results of other tables using includes or joins in Ruby on Rails", "body": "<p>You can use <code>:through</code> on associations (at least in Rails 4.2)<br>\nI updated this, I first missed that you wanted private_classes</p>\n\n<pre><code>class JoinedPrivateSchool &lt; ActiveRecord::Base\n  belongs_to :student\n  belongs_to :private_school\n  has_many :private_classes, through: :private_schools\nend\n\nclass Student &lt; ActiveRecord::Base\n  has_many :joined_private_schools\n  has_many :private_classes, through: :joined_private_schools\nend\n\ns = Student.find(9)\ns.private_classes\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user5084534"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "accepted_answer_id": 42652621, "answer_count": 2, "score": 3, "last_activity_date": 1488908306, "creation_date": 1488896505, "last_edit_date": 1488908306, "question_id": 42650704, "link": "https://stackoverflow.com/questions/42650704/how-to-get-the-results-of-other-tables-using-includes-or-joins-in-ruby-on-rails", "title": "How to get the results of other tables using includes or joins in Ruby on Rails", "body": "<p>I want to query the results of private_classes. The scenario is:</p>\n\n<pre><code>class PrivateClass &lt; ActiveRecord::Base\n  belongs_to :private_school\n  has_many :lesson_plans\nend\n\nclass JoinedPrivateSchool &lt; ActiveRecord::Base\n  belongs_to :student\n  belongs_to :private_school\nend\n\nclass PrivateSchool &lt; ActiveRecord::Base\n  belongs_to :teacher\n  has_many :private_classes\n  has_many :joined_private_schools\nend\n\nclass Student &lt; ActiveRecord::Base\n  has_many :joined_private_schools\nend\n</code></pre>\n\n<p>JoinPrivateSchool has the attribute <code>private_school_id</code>.</p>\n\n<p>I am doing:</p>\n\n<pre><code>s = Student.find(9)\n\ns.joined_private_schools\n</code></pre>\n\n<p>which results in:</p>\n\n<pre><code>=&gt; #&lt;ActiveRecord::Associations::CollectionProxy [#&lt;JoinedPrivateSchool id: 8,\n user_id: 73, student_id: 9, private_school_id: 28, created_at: \"2017-02-16 \n12:38:37\", updated_at: \"2017-02-16 12:38:37\"&gt;, #&lt;JoinedPrivateSchool id: 9,\n user_id: 73, student_id: 9, private_school_id: 33, created_at: \"2017-02-16 \n12:42:01\", updated_at: \"2017-02-16 12:42:01\"&gt;, #&lt;JoinedPrivateSchool id: 12, \nuser_id: 73, student_id: 9, private_school_id: 32, created_at: \"2017-02-16 \n13:19:02\", updated_at: \"2017-02-16 13:19:02\"&gt;]&gt;\n</code></pre>\n\n<p>If I do:</p>\n\n<pre><code>c = s.joined_private_schools.includes(private_school: :private_classes)\n</code></pre>\n\n<p>it results in:</p>\n\n<pre><code>JoinedPrivateSchool Load (0.6ms)  SELECT \"joined_private_schools\".* FROM \n\"joined_private_schools\" WHERE \"joined_private_schools\".\"student_id\" = $1 \n [[\"student_id\", 9]]\n\n\nPrivateSchool Load (0.9ms)  SELECT \"private_schools\".* FROM \"private_schools\" \nWHERE \"private_schools\".\"id\" IN (28, 33, 32)  ORDER BY \n\"private_schools\".\"created_at\" DESC\n\n\nPrivateClass Load (0.7ms)  SELECT \"private_classes\".* FROM \"private_classes\" \nWHERE \"private_classes\".\"private_school_id\" IN (33, 32, 28)  ORDER BY \n\"private_classes\".\"created_at\" DESC\n\n\n=&gt; #&lt;ActiveRecord::AssociationRelation [#&lt;JoinedPrivateSchool id: 8, user_id: \n73, student_id: 9, private_school_id: 28, created_at: \"2017-02-16 12:38:37\",\n updated_at: \"2017-02-16 12:38:37\"&gt;, #&lt;JoinedPrivateSchool id: 9, user_id: 73,\n student_id: 9, private_school_id: 33, created_at: \"2017-02-16 12:42:01\", \nupdated_at: \"2017-02-16 12:42:01\"&gt;, #&lt;JoinedPrivateSchool id: 12, user_id: 73,\n student_id: 9, private_school_id: 32, created_at: \"2017-02-16 13:19:02\", \nupdated_at: \"2017-02-16 13:19:02\"&gt;]&gt; \n</code></pre>\n\n<p>But that is still the wrong results.</p>\n\n<p>I need to get the results of private_classes using one query so I can avoid multiple each loops.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5"], "answers": [{"tags": [], "owner": {"reputation": 38092, "user_id": 18706, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/cabf735ce7b8b4471ef46ea54f71832d?s=128&d=identicon&r=PG", "display_name": "mahemoff", "link": "https://stackoverflow.com/users/18706/mahemoff"}, "is_accepted": false, "score": 0, "last_activity_date": 1488898421, "creation_date": 1488898421, "answer_id": 42651394, "question_id": 42650601, "link": "https://stackoverflow.com/questions/42650601/untainting-entries-for-eval-in-rails-5-for-badge-system/42651394#42651394", "title": "Untainting entries for eval in Rails 5 for badge system", "body": "<p>I think it's a super-dangerous practice to store code in the database and allow even an admin to maintain it. It could run literally anything on your servers and bypasses the best practices of deploying executable code, i.e. staging and testing it.</p>\n\n<p>I would try to break down what the badges need to do into something you can better encapsulate as data, e.g. a rules engine or domain-specific language type framework, where you could more confidently validate the input and constrain its behaviour.</p>\n"}, {"tags": [], "owner": {"reputation": 633, "user_id": 451357, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/27cd8e5e772e3b852a6a3d9284db3e3b?s=128&d=identicon&r=PG", "display_name": "Kamen", "link": "https://stackoverflow.com/users/451357/kamen"}, "is_accepted": false, "score": 0, "last_activity_date": 1488898563, "creation_date": 1488898563, "answer_id": 42651447, "question_id": 42650601, "link": "https://stackoverflow.com/questions/42650601/untainting-entries-for-eval-in-rails-5-for-badge-system/42651447#42651447", "title": "Untainting entries for eval in Rails 5 for badge system", "body": "<p>Obviously you see the security issue behind this approach, but just to be clear, someone (admin or whoever has access to edit badge's criterion) can write something like <code>User.delete_all</code>. Do you trust admins that much?  </p>\n\n<p>I see other issues with this approach (keeping code in the DB):</p>\n\n<ul>\n<li>how would you test criterion code?</li>\n<li>there is no version control of that criterion code</li>\n<li>just invites errors that happen in production environment and you can't reproduce locally. How do you know the admins will write something that successfully executes?</li>\n</ul>\n\n<p>From the example given it is difficult to guess what those criterion look like, but I would put the code where it belongs in the source of the project even if it means coding it for every single badge. I wouldn't expect the admins to know how to properly do it unless they are developers and if they are there is no reason why not to explicitly implement the criterion ins the source of the project.</p>\n\n<p>In case you really need to be flexible, you better design some \"relatively simple language\" lets say something like: <code>comments &gt; 4 &amp;&amp; last_login &gt; 3 days</code>. And allow a predefined set of \"variables\" <code>commesnts, last_login</code>, predefined set of predicates <code>&lt;, &gt;=, =</code> and so on. But something like this is not simple at all, the business value needs to justify the cost of implementation.</p>\n"}], "owner": {"reputation": 975, "user_id": 3753960, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/1715117417/picture?type=large", "display_name": "Okomikeruko", "link": "https://stackoverflow.com/users/3753960/okomikeruko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 79, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1488898563, "creation_date": 1488896174, "question_id": 42650601, "link": "https://stackoverflow.com/questions/42650601/untainting-entries-for-eval-in-rails-5-for-badge-system", "title": "Untainting entries for eval in Rails 5 for badge system", "body": "<p>I'm currently developing a badge system for a client in a Ruby on Rails 5 application. I don't want to have to hard-code every single badge into the system, and I found <code>eval()</code> as a method with dangerous consequences. </p>\n\n<p>Here's my current strategy:</p>\n\n<p><em>app/models/user.rb</em></p>\n\n<pre><code>class User\n  has_many :awards, dependent: :destroy\nend\n</code></pre>\n\n<p><em>app/models/badge.rb</em></p>\n\n<pre><code>class Badge\n  has_many :awards, dependent: :destroy\n\n  # name        - string - Name of the badge\n  # icon        - string - URL of badge icon\n  # description - text   - Long text description of the badge\n  # criterion   - text   - boolean operation to eval() to earn badge\nend \n</code></pre>\n\n<p><em>app/models/award.rb</em></p>\n\n<pre><code>class Award\n  belongs_to :user\n  belongs_to :badge\n\n  def self.automatic_award\n    User.find_each do |user|\n      Badge.find_each do |badge|\n        # If the badge has not been awarded to the user\n        if Award.where(user: user, badge: badge).blank?\n          # If the badge criteria is met\n          if eval(badge.criterion.untaint)\n            Award.create(user: user, badge: badge)\n            # Add method to notify user of award.\n          end\n        end\n      end\n    end\n  end \n\nend\n</code></pre>\n\n<p>And I'd write a worker to run Award.automatic_award method periodically (every 10 min?) The badges would be written by Admin behind login security (not standard users) But I'm concerned about security and tainted entries. </p>\n\n<p>What am I missing? Is there a better way?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 1036, "user_id": 5078051, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/10203328378168774/picture?type=large", "display_name": "Hsiu Chuan Tsao", "link": "https://stackoverflow.com/users/5078051/hsiu-chuan-tsao"}, "edited": false, "score": 0, "creation_date": 1488918740, "post_id": 42650524, "comment_id": 72441374, "body": "don&#39;t override initialize function"}], "answers": [{"comments": [{"owner": {"reputation": 445, "user_id": 6364117, "user_type": "registered", "accept_rate": 21, "profile_image": "https://www.gravatar.com/avatar/cfda5cdb466b307fb347e1d7a6f72a98?s=128&d=identicon&r=PG", "display_name": "godhar", "link": "https://stackoverflow.com/users/6364117/godhar"}, "edited": false, "score": 0, "creation_date": 1488970593, "post_id": 42658628, "comment_id": 72463399, "body": "Thank you @244an. I managed to seed the db, by making those changes, keeping the attr_accessor, keeping the <code>after_create</code> <code>:set_material_costs</code>, <code>:set_material_charges</code> statement, and did away with initialize.  What is weird is <code>sell_a4</code> should give me: 4.6750 on <code>material_charges</code>, but instead gives me: 4.4577.....of course it should have been <code>@cost_per_sqm + @ink_per_sqm</code> but after making this changes the decimal points are way off...disturbing"}, {"owner": {"reputation": 1529, "user_id": 1526010, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64c115d3a69fa581e1e81beca6bbab69?s=128&d=identicon&r=PG", "display_name": "244an", "link": "https://stackoverflow.com/users/1526010/244an"}, "reply_to_user": {"reputation": 445, "user_id": 6364117, "user_type": "registered", "accept_rate": 21, "profile_image": "https://www.gravatar.com/avatar/cfda5cdb466b307fb347e1d7a6f72a98?s=128&d=identicon&r=PG", "display_name": "godhar", "link": "https://stackoverflow.com/users/6364117/godhar"}, "edited": false, "score": 0, "creation_date": 1488977071, "post_id": 42658628, "comment_id": 72468032, "body": "@godhar, when I do a control on a calculator it gives me <code>4.45577</code> with the values from your question, so it seems to be correct."}, {"owner": {"reputation": 445, "user_id": 6364117, "user_type": "registered", "accept_rate": 21, "profile_image": "https://www.gravatar.com/avatar/cfda5cdb466b307fb347e1d7a6f72a98?s=128&d=identicon&r=PG", "display_name": "godhar", "link": "https://stackoverflow.com/users/6364117/godhar"}, "edited": false, "score": 0, "creation_date": 1488984713, "post_id": 42658628, "comment_id": 72473572, "body": "you are right, that calculation is correct. However with the current syntax configuration, these values are missing from <code>Material</code> table. Those three that are required are not showing up in the database fields of <code>Material</code>? When I remove the attr_accessor, they appear, but there is no input into the subsequent tables that are relying on it. Any ideas?"}, {"owner": {"reputation": 1529, "user_id": 1526010, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64c115d3a69fa581e1e81beca6bbab69?s=128&d=identicon&r=PG", "display_name": "244an", "link": "https://stackoverflow.com/users/1526010/244an"}, "reply_to_user": {"reputation": 445, "user_id": 6364117, "user_type": "registered", "accept_rate": 21, "profile_image": "https://www.gravatar.com/avatar/cfda5cdb466b307fb347e1d7a6f72a98?s=128&d=identicon&r=PG", "display_name": "godhar", "link": "https://stackoverflow.com/users/6364117/godhar"}, "edited": false, "score": 0, "creation_date": 1488986042, "post_id": 42658628, "comment_id": 72474549, "body": "@godhar, Ok, so what fields in <code>init_after_create</code> are in the db? For fields in db you must use either e.g. <code>self.total_cost = ...</code> or <code>self[&#39;total_cost&#39;] = </code> (if <code>total_cost</code> is in db) and remove that from <code>attr_accessor</code>. And when using them e.g. <code>some_thing = total_cost</code> or <code>some_thing = self[&#39;total_cost&#39;]</code>. It&#39;s preferable to <b>not</b> use <code>self[...]</code> - except when the attribute is in a variable."}, {"owner": {"reputation": 445, "user_id": 6364117, "user_type": "registered", "accept_rate": 21, "profile_image": "https://www.gravatar.com/avatar/cfda5cdb466b307fb347e1d7a6f72a98?s=128&d=identicon&r=PG", "display_name": "godhar", "link": "https://stackoverflow.com/users/6364117/godhar"}, "edited": false, "score": 0, "creation_date": 1488991426, "post_id": 42658628, "comment_id": 72478667, "body": "I solved this by not setting instance variables at <code>attr_accessor</code> , taking away <code>after_init</code> and using the field variables in what seems to me an &#39;Un-dry&#39; fashion. <code>@total_cost</code> becomes redundant and I make the calculation on the fly in each <code>self.create</code> method, as I know that I can access those variables from there. No instance variable declaration and a lot of repetition, maybe this is how it needs to be, what a long learning curve! But it works. Thanks for your help @244an"}], "tags": [], "owner": {"reputation": 1529, "user_id": 1526010, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64c115d3a69fa581e1e81beca6bbab69?s=128&d=identicon&r=PG", "display_name": "244an", "link": "https://stackoverflow.com/users/1526010/244an"}, "is_accepted": true, "score": 1, "last_activity_date": 1488923946, "last_edit_date": 1488923946, "creation_date": 1488921896, "answer_id": 42658628, "question_id": 42650524, "link": "https://stackoverflow.com/questions/42650524/how-to-correctly-format-instance-variables-on-a-rails-model-class/42658628#42658628", "title": "How to correctly format instance variables on a Rails model class", "body": "<p>As Tsao mention, don't override <code>initialize</code>, but if have do, you must do a call to <code>super</code>.</p>\n\n<pre><code># use '*args' so super can use any arguments to 'new'\ndef initialize(*args)\n  # as first line so Rails will do it's \"magic\" before yours\n  super\n\n  # these have got values by Rails (in super) IF you have them\n  # in the call to 'new'\n  @cost_per_sqm = @cost_per_sqm.to_f\n  @ink_per_sqm  = @ink_per_sqm.to_f\n  # (you have forgot this as attr_accessor?)\n  @factor       = @factor.to_f\n  @total_cost   = @cost_per_sqm * @ink_per_sqm\nend\n</code></pre>\n\n<p>But instead of mess with <code>initialize</code> I would prefer to use another method</p>\n\n<pre><code># instead of overriding 'initialize'\ndef init_after_create\n  return if @total_cost\n  # these have got values by Rails (in new) IF you have them\n  # in the call to 'new'\n  @cost_per_sqm = @cost_per_sqm.to_f\n  @ink_per_sqm  = @ink_per_sqm.to_f\n  # (you have forgot this as attr_accessor?)\n  @factor       = @factor.to_f\n  @total_cost   = @cost_per_sqm * @ink_per_sqm\nend\n\ndef set_material_cost\n  init_after_create\n  @material_cost = self.create_material_cost(\n  cost_a4: @total_cost * A4_FACTOR,\n  cost_a3: @total_cost * A3_FACTOR,\n  ....\nend\n\ndef set_material_charge\n  init_after_create\n  @material_charge = self.create_material_charge(\n  sell_a4: @total_cost * A4_FACTOR * @factor,\n  sell_a3: @total_cost * A3_FACTOR * @factor,\n  ...\nend\n</code></pre>\n\n<p>Tip, if you have a <code>Hash</code> as last argument in a method call, or in an <code>Array</code> you don't have to use <code>{ ... }</code></p>\n\n<pre><code># example method\ndef some_method(options)\n  ...\nend\nsome_method(xxx: 1, yyy: 2)\n\n# example array\narr = [ 1, 2, xxx: 1, yyy: 2 ]\n#=&gt; [1, 2, {:xxx=&gt;1, :yyy=&gt;2}]\n</code></pre>\n"}], "owner": {"reputation": 445, "user_id": 6364117, "user_type": "registered", "accept_rate": 21, "profile_image": "https://www.gravatar.com/avatar/cfda5cdb466b307fb347e1d7a6f72a98?s=128&d=identicon&r=PG", "display_name": "godhar", "link": "https://stackoverflow.com/users/6364117/godhar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 86, "favorite_count": 0, "accepted_answer_id": 42658628, "answer_count": 1, "score": 0, "last_activity_date": 1488923946, "creation_date": 1488895968, "last_edit_date": 1488911132, "question_id": 42650524, "link": "https://stackoverflow.com/questions/42650524/how-to-correctly-format-instance-variables-on-a-rails-model-class", "title": "How to correctly format instance variables on a Rails model class", "body": "<p>I have one table Materials, which <code>has_one</code> relation to MaterialCosts and <code>has_one</code> relation to MaterialCharges. They both belong to Material and should <code>dependent: :destroy</code> upon deletion or record in Material. </p>\n\n<p>I am not sure about how to structure the Material class. Two attributes from each instance of Material must be used to calculate fields in MaterialCosts and MaterialCharges. These are <code>cost_per_sqm</code> and <code>ink_per_sqm</code>. <code>factor</code> is a field from Material which is also used for MaterialCharges. Do I need to initialize them in Material, in order to use the instance variables for the create methods? Or is the <code>attr_accessor</code> all that is required?  </p>\n\n<p>I know the code needs refactoring, but I am getting this error also when I try to seed data:</p>\n\n<pre><code>NoMethodError: undefined method `[]' for nil:NilClass on line 26 seeds.rb\n</code></pre>\n\n<p>lines 26 seeds.rb : </p>\n\n<p><code>Material.create({ \nproduct_name: \"Novajet Art 255gsm\", guk_name: \"none\", roll_width_in: 44, roll_length_m: 30, factor: 7, rounded_sale_price: 71, list_price: 240.00, cost_per_sqm: 7.16, ink_per_sqm: 3, supplier_discount: 0, sell_per_sqm: 71.11 \n})</code></p>\n\n<p>This is my code:</p>\n\n<pre><code>  class Material &lt; ApplicationRecord\n\n  has_and_belongs_to_many :job_entries\n  has_one :material_cost,  dependent: :destroy\n  has_one :material_charge, dependent:  :destroy\n\n  attr_accessor :cost_per_sqm, :ink_per_sqm, :factor\n\n  def initialize(options)\n    @cost_per_sqm = options['cost_per_sqm'].to_f\n    @ink_per_sqm = options['ink_per_sqm'].to_f\n    @factor = options['@factor'].to_f\n    @total_cost = @cost_per_sqm * @ink_per_sqm\n  end\n\n\n  after_create :set_material_cost, :set_material_charge\n\n\n  A4_FACTOR = 0.0626514876\n  A3_FACTOR = 0.124548139\n  A2_FACTOR = 0.249096276\n  A1_FACTOR = 0.499702226\n  B0_FACTOR = 1.41585523\n  B1_FACTOR = 0.706656651\n  B2_FACTOR = 0.353328326\n  B3_FACTOR = 0.176664163\n  B4_FACTOR = 0.0878836952\n\n  private\n\n\n\n  def set_material_cost\n    @material_cost = self.create_material_cost(\n    cost_a4: @total_cost * A4_FACTOR,\n    cost_a3: @total_cost * A3_FACTOR,\n    cost_a2: @total_cost * A2_FACTOR,\n    cost_a1: @total_cost * A1_FACTOR,\n    cost_b0: @total_cost * B0_FACTOR,\n    cost_b1: @total_cost * B1_FACTOR,\n    cost_b2: @total_cost * B2_FACTOR,\n    cost_b3: @total_cost * B3_FACTOR,\n    cost_b4: @total_cost * B4_FACTOR\n    )\n  end\n\n\n\ndef set_material_charge\n    @material_charge = self.create_material_charge(\n    sell_a4: @total_cost * A4_FACTOR * @factor,\n    sell_a3: @total_cost * A3_FACTOR * @factor,\n    sell_a2: @total_cost * A2_FACTOR * @factor,\n    sell_a1: @total_cost * A1_FACTOR * @factor,\n    sell_b0: @total_cost * B0_FACTOR * @factor,\n    sell_b1: @total_cost * B1_FACTOR * @factor,\n    sell_b2: @total_cost * B2_FACTOR * @factor,\n    sell_b3: @total_cost * B3_FACTOR * @factor,\n    sell_b4: @total_cost * B4_FACTOR * @factor\n    )\n\n  end\n\n\n    end\n\n    class MaterialCost &lt; ApplicationRecord\n      belongs_to :material\n    end\n\n    class MaterialCharge &lt; ApplicationRecord\n      belongs_to :material\n    end\n</code></pre>\n\n<p>Is this what the code should look like?</p>\n"}]