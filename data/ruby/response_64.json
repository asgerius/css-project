[{"tags": ["javascript", "jquery", "ruby-on-rails", "ruby", "iframe"], "answers": [{"comments": [{"owner": {"reputation": 1801, "user_id": 5109067, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/0ff351ab9233ab404d4e6c3a99b47b31?s=128&d=identicon&r=PG&f=1", "display_name": "Krishna", "link": "https://stackoverflow.com/users/5109067/krishna"}, "reply_to_user": {"reputation": 2168, "user_id": 4386626, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/f2c9512ee4dac8ccbbf45fc2cf1a8046?s=128&d=identicon&r=PG&f=1", "display_name": "ToddT", "link": "https://stackoverflow.com/users/4386626/toddt"}, "edited": false, "score": 0, "creation_date": 1459382120, "post_id": 36321728, "comment_id": 60266817, "body": "Where&#39;s this .check element, I see the div has class as &quot;check&quot;. Maybe that&#39;s causing the problem"}, {"owner": {"reputation": 2168, "user_id": 4386626, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/f2c9512ee4dac8ccbbf45fc2cf1a8046?s=128&d=identicon&r=PG&f=1", "display_name": "ToddT", "link": "https://stackoverflow.com/users/4386626/toddt"}, "edited": false, "score": 0, "creation_date": 1459382299, "post_id": 36321728, "comment_id": 60266859, "body": "Geez, good idea.. but no I added the check class directly to the element.. and no dice.. I&#39;ll update the question"}], "tags": [], "owner": {"reputation": 1801, "user_id": 5109067, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/0ff351ab9233ab404d4e6c3a99b47b31?s=128&d=identicon&r=PG&f=1", "display_name": "Krishna", "link": "https://stackoverflow.com/users/5109067/krishna"}, "is_accepted": false, "score": 0, "last_activity_date": 1459381465, "creation_date": 1459381465, "answer_id": 36321728, "question_id": 36321706, "link": "https://stackoverflow.com/questions/36321706/jquery-prop-not-working-in-iframe/36321728#36321728", "title": "jQuery prop not working in iframe", "body": "<p>Try this </p>\n\n<pre><code>  $('.check').prop('checked', 'checked');\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2168, "user_id": 4386626, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/f2c9512ee4dac8ccbbf45fc2cf1a8046?s=128&d=identicon&r=PG&f=1", "display_name": "ToddT", "link": "https://stackoverflow.com/users/4386626/toddt"}, "edited": false, "score": 0, "creation_date": 1459383565, "post_id": 36321948, "comment_id": 60267255, "body": "Nope.. I wonder if its something with this gem, or somehow my setting in Ruby.. I can&#39;t find anything about a conflict with jquery and this gem though.."}, {"owner": {"reputation": 155, "user_id": 5664531, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd0cad1260f2105eec90440fe3de2a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Jhonny Mesquita", "link": "https://stackoverflow.com/users/5664531/jhonny-mesquita"}, "reply_to_user": {"reputation": 2168, "user_id": 4386626, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/f2c9512ee4dac8ccbbf45fc2cf1a8046?s=128&d=identicon&r=PG&f=1", "display_name": "ToddT", "link": "https://stackoverflow.com/users/4386626/toddt"}, "edited": false, "score": 0, "creation_date": 1459384388, "post_id": 36321948, "comment_id": 60267495, "body": "But you are loading the jquery library in the iframe page too, right? Couse the iframe document dont recognize elements/libraries from the parent document. (sorry for bad english)"}, {"owner": {"reputation": 2168, "user_id": 4386626, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/f2c9512ee4dac8ccbbf45fc2cf1a8046?s=128&d=identicon&r=PG&f=1", "display_name": "ToddT", "link": "https://stackoverflow.com/users/4386626/toddt"}, "edited": false, "score": 0, "creation_date": 1459386274, "post_id": 36321948, "comment_id": 60267951, "body": "That was it!! I wish I could give 2 correct answers.. I choose the one that was first.. But that was totally it!! Thank you!!"}, {"owner": {"reputation": 155, "user_id": 5664531, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd0cad1260f2105eec90440fe3de2a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Jhonny Mesquita", "link": "https://stackoverflow.com/users/5664531/jhonny-mesquita"}, "reply_to_user": {"reputation": 2168, "user_id": 4386626, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/f2c9512ee4dac8ccbbf45fc2cf1a8046?s=128&d=identicon&r=PG&f=1", "display_name": "ToddT", "link": "https://stackoverflow.com/users/4386626/toddt"}, "edited": false, "score": 0, "creation_date": 1459387332, "post_id": 36321948, "comment_id": 60268205, "body": "Nice! I think you can add the comment with useful, it can help some others with this problem... im new here, dont understand the rules so mutch..."}], "tags": [], "owner": {"reputation": 155, "user_id": 5664531, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd0cad1260f2105eec90440fe3de2a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Jhonny Mesquita", "link": "https://stackoverflow.com/users/5664531/jhonny-mesquita"}, "is_accepted": false, "score": 2, "last_activity_date": 1459383364, "last_edit_date": 1459383364, "creation_date": 1459382735, "answer_id": 36321948, "question_id": 36321706, "link": "https://stackoverflow.com/questions/36321706/jquery-prop-not-working-in-iframe/36321948#36321948", "title": "jQuery prop not working in iframe", "body": "<p>Try loading the document first:</p>\n\n<pre><code>$( document ).ready(function() {\n $('.check').prop('checked', true);\n});\n</code></pre>\n\n<p>or:</p>\n\n<pre><code> $( document ).ready(function() {\n     $('.check').prop('checked', 'checked');\n    });\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2168, "user_id": 4386626, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/f2c9512ee4dac8ccbbf45fc2cf1a8046?s=128&d=identicon&r=PG&f=1", "display_name": "ToddT", "link": "https://stackoverflow.com/users/4386626/toddt"}, "edited": false, "score": 0, "creation_date": 1459385309, "post_id": 36322235, "comment_id": 60267727, "body": "Hmm, no I haven&#39;t.. How would I do that?"}, {"owner": {"reputation": 7994, "user_id": 1625339, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b8ba46f911517c8b2ccc39e0be9050c0?s=128&d=identicon&r=PG", "display_name": "Aetherus", "link": "https://stackoverflow.com/users/1625339/aetherus"}, "reply_to_user": {"reputation": 2168, "user_id": 4386626, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/f2c9512ee4dac8ccbbf45fc2cf1a8046?s=128&d=identicon&r=PG&f=1", "display_name": "ToddT", "link": "https://stackoverflow.com/users/4386626/toddt"}, "edited": false, "score": 0, "creation_date": 1459385834, "post_id": 36322235, "comment_id": 60267845, "body": "See your <code>app&#47;views&#47;layouts&#47;application.erb</code> for example."}], "tags": [], "owner": {"reputation": 7994, "user_id": 1625339, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b8ba46f911517c8b2ccc39e0be9050c0?s=128&d=identicon&r=PG", "display_name": "Aetherus", "link": "https://stackoverflow.com/users/1625339/aetherus"}, "is_accepted": true, "score": 1, "last_activity_date": 1459384732, "creation_date": 1459384732, "answer_id": 36322235, "question_id": 36321706, "link": "https://stackoverflow.com/questions/36321706/jquery-prop-not-working-in-iframe/36322235#36322235", "title": "jQuery prop not working in iframe", "body": "<p>Have you included <code>application.js</code> into the page in the iframe? Since a page in an iframe is a standalone page, it does not recognize the css files or javascript files included in the parent page.</p>\n"}], "owner": {"reputation": 2168, "user_id": 4386626, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/f2c9512ee4dac8ccbbf45fc2cf1a8046?s=128&d=identicon&r=PG&f=1", "display_name": "ToddT", "link": "https://stackoverflow.com/users/4386626/toddt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 187, "favorite_count": 0, "accepted_answer_id": 36322235, "answer_count": 3, "score": 0, "last_activity_date": 1459384732, "creation_date": 1459381307, "last_edit_date": 1495539906, "question_id": 36321706, "link": "https://stackoverflow.com/questions/36321706/jquery-prop-not-working-in-iframe", "title": "jQuery prop not working in iframe", "body": "<p>I have some very simple jQuery, in my Rails .erb file, and I cannot get it to work. My .erb file is:</p>\n\n<pre><code>&lt;script type=\"text/javascript\"&gt;\n  $('.check').prop('checked', true);\n&lt;/script&gt;\n\n&lt;%= bootstrap_form_for(@shipping_shop, layout: :inline) do |f| %&gt;\n\n&lt;div class=\"input-lg check\"&gt;\n  &lt;%= f.check_box :enabled, label: \"Standard shipping enabled?\" %&gt;\n&lt;/div&gt;\n\n.... stuff removed for brevity\n\n&lt;%= f.submit 'Save Standard Settings', class: 'btn btn-primary btn-lg \nbtn-block' %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>My application.js file looks like this:</p>\n\n<pre><code>//= require jquery\n//= require jquery_ujs\n//= require bootstrap-sprockets\n//= require turbolinks\n//= require_tree .\n</code></pre>\n\n<p>I'm using the \"Rails Bootstrap Forms\" gem. I can check the box by passing in arguments, but I am trying to figure out why I can't get any jQuery to work.</p>\n\n<p>I am doing \"<a href=\"https://stackoverflow.com/questions/426258/setting-checked-for-a-checkbox-with-jquery?rq=1\">Setting &quot;checked&quot; for a checkbox with jQuery?</a>\" exactly, but don't understand what's wrong.</p>\n\n<p>I tried to change the <code>check</code> class directly to the element and that didn't work either:</p>\n\n<pre><code>&lt;div class=\"input-lg check\"&gt;\n  &lt;%= f.check_box :enabled, label: \"Standard shipping enabled?\",  \n  class:\"check\" %&gt;\n&lt;/div&gt;\n</code></pre>\n"}, {"tags": ["ruby", "svg", "squib"], "answers": [{"comments": [{"owner": {"reputation": 2010, "user_id": 568074, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/703433b0a4b362e4c1041f8f2f46832c?s=128&d=identicon&r=PG", "display_name": "Timoth&#233;e Bourguignon", "link": "https://stackoverflow.com/users/568074/timoth%c3%a9e-bourguignon"}, "edited": false, "score": 0, "creation_date": 1459417413, "post_id": 36322699, "comment_id": 60281664, "body": "Thanks for your answer Andy, I was thinking I overcomplicated that one myself. So no need for conditional logic, that&#39;s good :D but I&#39;m still unsure how to make it work though. Do I apply this <code>block</code> layout to a naked <code>svg</code> call =&gt; <code>svg layout: &#39;block&#39;</code>? This is not going to react to the data coming in, is it? If not, do I apply it to the <code>text</code> call like this =&gt; <code>text str: data[&#39;Main&#39;], layout: &#39;block&#39;</code>? This unfortunately doesn&#39;t work on my end yet, the svg is not displayed in this case..."}, {"owner": {"reputation": 2010, "user_id": 568074, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/703433b0a4b362e4c1041f8f2f46832c?s=128&d=identicon&r=PG", "display_name": "Timoth&#233;e Bourguignon", "link": "https://stackoverflow.com/users/568074/timoth%c3%a9e-bourguignon"}, "edited": false, "score": 0, "creation_date": 1459446512, "post_id": 36322699, "comment_id": 60302512, "body": "I think finally understood what you meant: you meant to set the layout as part of the input data, e.g. a layout column. Thus using a call like <code>svg layout: data[&#39;layout&#39;]</code>I get an array and only the non <code>nil</code> values will then be taken into account. If this assumption is correct, I &quot;just&quot; need to find out how to create this layout column without having to repeat myself too much in the CSV file (if a value is present in column A, then put layout &#39;block&#39; in column B, leave empty otherwise...)"}, {"owner": {"reputation": 270, "user_id": 1325339, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c76f91c37fd0a6386de232f58f585ab0?s=128&d=identicon&r=PG", "display_name": "Andy", "link": "https://stackoverflow.com/users/1325339/andy"}, "reply_to_user": {"reputation": 2010, "user_id": 568074, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/703433b0a4b362e4c1041f8f2f46832c?s=128&d=identicon&r=PG", "display_name": "Timoth&#233;e Bourguignon", "link": "https://stackoverflow.com/users/568074/timoth%c3%a9e-bourguignon"}, "edited": false, "score": 0, "creation_date": 1459452982, "post_id": 36322699, "comment_id": 60306287, "body": "Yeah, that&#39;s what I meant. And of course you don&#39;t have to call it <code>layout</code> - call it something descriptive from your game, like <code>svg layout: data[&#39;faction&#39;]</code>. And yep, your assumption is correct - think of it like categorizing your cards and styling them according to the category."}], "tags": [], "owner": {"reputation": 270, "user_id": 1325339, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c76f91c37fd0a6386de232f58f585ab0?s=128&d=identicon&r=PG", "display_name": "Andy", "link": "https://stackoverflow.com/users/1325339/andy"}, "is_accepted": false, "score": 2, "last_activity_date": 1459389268, "last_edit_date": 1459389268, "creation_date": 1459388346, "answer_id": 36322699, "question_id": 36321138, "link": "https://stackoverflow.com/questions/36321138/display-an-icon-only-for-certain-input-values-in-squib/36322699#36322699", "title": "Display an icon only for certain input values in Squib", "body": "<p>Squib's svg works the way you want it to - if it gets nil for file it won't do anything. So in your layout file just put:</p>\n\n<pre><code>block:\n  file: 'svg\\up_block.svg'\n</code></pre>\n\n<p>And then the svg call does NOT have that \"file\" option (that sets it for all cards no matter what)</p>\n\n<p>When layout is nil, it'll default to the svg method's \"file\", which is nil, which happens to do nothing - that's what you want. So then your data field could be something like ['block', nil, nil, nil] and would only show up on the first card.</p>\n\n<p>Check out some new articles I've written on the topic: \n<a href=\"http://squib.readthedocs.org/en/latest/arrays.html\" rel=\"nofollow\">http://squib.readthedocs.org/en/latest/arrays.html</a>\n<a href=\"http://squib.readthedocs.org/en/latest/guides/getting-started/part_2_iconography.html\" rel=\"nofollow\">http://squib.readthedocs.org/en/latest/guides/getting-started/part_2_iconography.html</a></p>\n\n<p>(work in progress, of course)</p>\n\n<p>Also, these can also be helpful: <a href=\"https://github.com/andymeneely/squib/blob/master/samples/ranges.rb\" rel=\"nofollow\">https://github.com/andymeneely/squib/blob/master/samples/ranges.rb</a></p>\n\n<p>That if-statement reminds me how nanDeck would do it - not the same way that Squib works. You COULD do it with an \"each\", or a \"select\", but that's more complicated than it needs to be.</p>\n\n<p>(full disclosure: I am the developer of Squib)</p>\n"}], "owner": {"reputation": 2010, "user_id": 568074, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/703433b0a4b362e4c1041f8f2f46832c?s=128&d=identicon&r=PG", "display_name": "Timoth&#233;e Bourguignon", "link": "https://stackoverflow.com/users/568074/timoth%c3%a9e-bourguignon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 174, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1459389268, "creation_date": 1459378319, "question_id": 36321138, "link": "https://stackoverflow.com/questions/36321138/display-an-icon-only-for-certain-input-values-in-squib", "title": "Display an icon only for certain input values in Squib", "body": "<p>My card game (built with <a href=\"https://github.com/andymeneely/squib\" rel=\"nofollow\">Squib</a>) is based on a CSV file. In this file I have (among others) one column called <code>main</code>. </p>\n\n<p>Here's the content of the column... as you see, a lot of <code>nil</code>:</p>\n\n<pre><code>print data['main']\n&gt; [3, nil, nil, nil, nil, nil, nil, nil, nil, nil, nil, nil, 0, 0, nil, nil, 0, nil, nil, nil, 0, nil, nil, 0, nil, nil, nil, nil, nil, nil, nil, nil, nil, nil, 1, nil, nil, nil, nil, nil, -1, nil, nil, nil, nil, 0, 0, 0, nil, nil, nil, nil, nil, nil, nil, nil, nil, nil, nil, nil]\n</code></pre>\n\n<p><strong>Desired behavior</strong></p>\n\n<p>For each card (row):</p>\n\n<ul>\n<li>If there is a value in this column, I would like to display the value, with a SVG as a background </li>\n<li>If there is no value (<code>nil</code>), I would like to skip the text and the svg alltogether</li>\n</ul>\n\n<p><strong>What I tried</strong></p>\n\n<p>1 - I tried the following, but <code>data['sprint']</code> is an <code>array</code> not a <code>value</code>, so the <code>==</code> does not work:</p>\n\n<pre><code>data = Squib.csv file: 'data.csv'\n[...]\nif data['Sprint'] != nil\n    text str: data['Sprint3'], layout: 'sprint3'\n    svg layout: 'block', file: 'svg\\left_block.svg'     \nend\n</code></pre>\n\n<p>2 - So I attempted to iterate through the array with an <code>each</code> method, but this of course leads to displaying every element of the array on each card:</p>\n\n<pre><code>data['Main'].each do |n|\n    if n != nil\n        text str: n, layout: 'main'\n        svg layout: 'block', file: 'svg\\up_block.svg'   \n    end\nend\n</code></pre>\n\n<p>My Ruby knowledge is here at its end. I have no idea how to display one element only when the value in the <code>main</code> column is not <code>nil</code>. Any idea? Thanks!</p>\n"}, {"tags": ["ruby-on-rails", "angularjs", "ruby", "rest", "wicked-pdf"], "comments": [{"owner": {"reputation": 2276, "user_id": 4164651, "user_type": "registered", "accept_rate": 65, "profile_image": "https://graph.facebook.com/100004012909097/picture?type=large", "display_name": "Edmund Lee", "link": "https://stackoverflow.com/users/4164651/edmund-lee"}, "edited": false, "score": 0, "creation_date": 1459383124, "post_id": 36320927, "comment_id": 60267106, "body": "try to generate the pdf file and put it in public directory. In production app, amazon S3 is what you would want"}, {"owner": {"reputation": 480, "user_id": 3298688, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1b1348e9018824e2e418fac9b361615?s=128&d=identicon&r=PG&f=1", "display_name": "FaithoftheFallen", "link": "https://stackoverflow.com/users/3298688/faithofthefallen"}, "edited": false, "score": 1, "creation_date": 1459385232, "post_id": 36320927, "comment_id": 60267707, "body": "Do you have to use a callback? You can instead just have a link that redirects the user to the pdf generation path (eg example.com/products/1.pdf). Trying to handle entire document responses in javascript adds a lot of complexity that can be avoided if you don&#39;t need any extra logic other than returning a file."}], "owner": {"reputation": 53, "user_id": 2263389, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a24afcb456cd69d723543b06f510a37?s=128&d=identicon&r=PG", "display_name": "sebastian.scandolo", "link": "https://stackoverflow.com/users/2263389/sebastian-scandolo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 663, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1459377177, "creation_date": 1459377177, "question_id": 36320927, "link": "https://stackoverflow.com/questions/36320927/cannot-get-to-download-a-pdf-that-was-generated-by-wicked-pdf-and-then-called-it", "title": "Cannot get to download a PDF that was generated by Wicked PDF and then called it through angular $http", "body": "<p>I call an API that returns a PDF generated by wicked_pdf gem. The pdf is returned in the response and I try to make a download after the file is generated but no download appears on the browser.\nMy controller looks like this:</p>\n\n<pre><code>      $http.get( Routes.get_products({format: \"pdf\"}),\n    { \n      params:{\n       params_object\n      }\n  }).then(\n    function successCallback(response) {\n       var anchor = angular.element('&lt;a/&gt;');\n       var href_config = \"\"\n       if(format == 'csv'){\n          href_config = 'data:attachment/csv;charset=utf-8,' + encodeURI(response.data);\n       } else if (format == 'pdf'){\n          href_config = 'data:application/pdf;base64,' + response.data;\n       }\n       anchor.attr({\n           href: href_config,\n           target: '_blank',\n           download: 'report.' + format\n       })[0].click();\n    }, function errorCallback(error) {\n      console.log(error);\n    }\n</code></pre>\n\n<p>the controller is like this:</p>\n\n<pre><code> respond_to do |format|\n  format.html\n  format.json { render json: @product}\n  format.csv { send_data @product.to_csv }\n  format.pdf do \n    @report = @product.map_columns_to_export\n    render  :pdf =&gt; \"report\", :template =&gt; 'product/product.pdf.erb', :layout =&gt; 'pdf'\n  end\nend\n</code></pre>\n\n<p>and the template product.pdf.erb is:</p>\n\n<pre><code>&lt;html&gt;\n  &lt;body&gt;\n&lt;h1&gt; Product &lt;/h1&gt;\n&lt;table&gt;\n&lt;thead&gt;\n    &lt;th&gt;ID&lt;/th&gt;\n    &lt;th&gt;Vendor&lt;/th&gt;\n    &lt;th&gt;Name&lt;/th&gt;\n    &lt;th&gt;Start Date&lt;/th&gt;\n    &lt;th&gt;End Date&lt;/th&gt;\n    &lt;th&gt;Price&lt;/th&gt;\n    &lt;th&gt;DOA&lt;/th&gt;\n  &lt;/thead&gt;\n  &lt;tbody&gt;\n    &lt;% @report.each do |line|%&gt;  \n      &lt;tr&gt;\n          &lt;td&gt;&lt;%= line[\"ID\"] %&gt;&lt;/td&gt;\n          &lt;td&gt;&lt;%= line[\"Vendor\"] %&gt;&lt;/td&gt;\n          &lt;td&gt;&lt;%= line[\"Name\"] %&gt; &lt;/td&gt;\n          &lt;td&gt;&lt;%= line[\"Start Date\"]%&gt;&lt;/td&gt;\n          &lt;td&gt;&lt;%= line[\"End Date\"] %&gt;&lt;/td&gt;\n          &lt;td&gt;&lt;%= line[\"Price\"] %&gt;&lt;/td&gt;\n          &lt;td&gt;&lt;%= line[\"DOA\"] %&gt;&lt;/td&gt;\n       &lt;/tr&gt;\n    &lt;% end %&gt;\n  &lt;/tbody&gt;\n  &lt;/table&gt;\n &lt;/body&gt;\n</code></pre>\n\n<p></p>\n\n<p>The pdf returned in the response looks like this:</p>\n\n<pre><code>  PDF-1.4\n  1 0 obj\n  &lt;&lt;\n  /Title (\u00fe\u00ff)\n  /Creator (\u00fe\u00ffwkhtmltopdf 0.12.2.1)\n  /Producer (\u00fe\u00ffQt 4.8.6)\n  /CreationDate (D:20160330163255-03'00')\n  &gt;&gt;\n  ...\n</code></pre>\n\n<p>I know base64 is not the encoding but utf-8 does not work either.</p>\n\n<p>Nevertheless if I put the url in a new window the pdf is displayed. What am I doing wrong?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "active-model-serializers"], "answers": [{"tags": [], "owner": {"reputation": 62182, "user_id": 1445366, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/1073cfb4a1d76b3ac49e08eff6379a63?s=128&d=identicon&r=PG", "display_name": "Aaron Brager", "link": "https://stackoverflow.com/users/1445366/aaron-brager"}, "is_accepted": true, "score": 1, "last_activity_date": 1459377009, "last_edit_date": 1459377009, "creation_date": 1459376673, "answer_id": 36320818, "question_id": 36320802, "link": "https://stackoverflow.com/questions/36320802/conditionally-overriding-an-active-model-serializer-association-method/36320818#36320818", "title": "Conditionally overriding an active model serializer association method", "body": "<p>Calling the serializer directly worked:</p>\n\n<pre><code>def source\n  if source_type == 'Foo'\n    FooSerializer::LimitedFooSerializer.new(object.source)\n  else\n    object.source\n  end\nend\n</code></pre>\n\n<p>I had to use <code>object.source</code> instead of <code>source</code> to avoid the recursion.</p>\n"}], "owner": {"reputation": 62182, "user_id": 1445366, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/1073cfb4a1d76b3ac49e08eff6379a63?s=128&d=identicon&r=PG", "display_name": "Aaron Brager", "link": "https://stackoverflow.com/users/1445366/aaron-brager"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 331, "favorite_count": 0, "accepted_answer_id": 36320818, "answer_count": 1, "score": 1, "last_activity_date": 1459377012, "creation_date": 1459376618, "last_edit_date": 1459377012, "question_id": 36320802, "link": "https://stackoverflow.com/questions/36320802/conditionally-overriding-an-active-model-serializer-association-method", "title": "Conditionally overriding an active model serializer association method", "body": "<p>I\u2019m writing a serializer that includes <code>has_one :source</code>. <code>source</code> can be a number of different types. I\u2019m trying to make the JSON smaller when <code>source</code> is a <code>Foo</code> by <a href=\"http://www.rubydoc.info/github/rails-api/active_model_serializers#Overriding_association_methods\" rel=\"nofollow\">overriding the association methods</a>. I tried this:</p>\n\n<pre><code>def source\n  return super unless source_type == 'Foo'\n  render json: source, serializer: LimitedFooSerializer\nend\n</code></pre>\n\n<p>But then I get \u200b<em>no superclass method `source\u2019</em>.</p>\n\n<p>Then I tried:</p>\n\n<pre><code>def source\n  render json: source unless source_type == 'Foo'\n  render json: source, serializer: LimitedFooSerializer\nend\n</code></pre>\n\n<p>But that errors \u200b<em>stack level too deep</em>\u200b; presumably it\u2019s an infinite recursion.</p>\n\n<p>How can I <em>conditionally</em> override the association method?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord"], "answers": [{"comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1459378062, "post_id": 36320954, "comment_id": 60265438, "body": "Calling <code>.all</code> on a table with a huge number of records can be the kiss of death. Loading everything into memory might destroy your server, so it&#39;s best avoided."}], "tags": [], "owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "is_accepted": true, "score": 1, "last_activity_date": 1459377302, "last_edit_date": 1495541733, "creation_date": 1459377302, "answer_id": 36320954, "question_id": 36320719, "link": "https://stackoverflow.com/questions/36320719/rails-active-record-related-topic/36320954#36320954", "title": "Rails Active Record related topic", "body": "<p>Finding the count is simple, you call <code>.count</code>.</p>\n\n<p>For your case (showing the number of people in a group) :</p>\n\n<pre><code>@group = Group.first\ncount = @group.people.count\n</code></pre>\n\n<p>Note that the <code>.count</code> method will alter your SQL query so that it only \nreturns the count (i.e. it doesn't actually load up all your records into memory, which can be slow).</p>\n\n<p>If you're not sure what I mean by this, perhaps you ought to have a look at <a href=\"https://stackoverflow.com/questions/10747106/how-does-rails-activerecord-chain-where-clauses-without-multiple-queries\">this stackoverflow question</a> or <a href=\"http://guides.rubyonrails.org/active_record_querying.html\" rel=\"nofollow noreferrer\">this section of the rails guide</a></p>\n"}], "owner": {"reputation": 6503, "user_id": 5650878, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/xh7BI.png?s=128&g=1", "display_name": "Bitwise", "link": "https://stackoverflow.com/users/5650878/bitwise"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 26, "favorite_count": 0, "accepted_answer_id": 36320954, "answer_count": 1, "score": 0, "last_activity_date": 1459377302, "creation_date": 1459376203, "question_id": 36320719, "link": "https://stackoverflow.com/questions/36320719/rails-active-record-related-topic", "title": "Rails Active Record related topic", "body": "<p>I'm building an app that has a People model that has_and_belongs_to_many Groups and the Group HABTM People. I'm trying to create a stats page that shows how many people are in a certain group. Does anybody know a quick way I can show in a table how many records belong to a certain model? I'll show some code for clarity.</p>\n\n<p>Here is a method for displaying some date that I already have in place.</p>\n\n<pre><code>def subscribed_num\n @person = Person.all.subscribed.count\n @engaged = Person.all.count\nend\n</code></pre>\n\n<p>Here is my view</p>\n\n<pre><code>&lt;div class=\"container\"&gt;\n&lt;h2&gt;Statistics&lt;/h2&gt;\n\n&lt;p class=\"total-number\"&gt;All Engaged People: &lt;%= @engaged %&gt;&lt;/p&gt;\n&lt;p class='total-number'&gt;Subscribed People: &lt;%= @person %&gt;&lt;/p&gt;\n&lt;p&gt;&lt;%= link_to \"Send Message\", root_path %&gt;&lt;/p&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>Now I want to use both models <code>People</code> and <code>Groups</code> to list how many people in a certain group.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1459374455, "post_id": 36320263, "comment_id": 60264004, "body": "How does your <code>routes.rb</code> look?"}, {"owner": {"reputation": 171, "user_id": 5895250, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/6d2741e6e584ca6fff8e856b324e9b4c?s=128&d=identicon&r=PG&f=1", "display_name": "Yoklan", "link": "https://stackoverflow.com/users/5895250/yoklan"}, "reply_to_user": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1459374508, "post_id": 36320263, "comment_id": 60264030, "body": "I&#39;ll update question, I think my issue is the way the params are passed for the path."}], "answers": [{"comments": [{"owner": {"reputation": 171, "user_id": 5895250, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/6d2741e6e584ca6fff8e856b324e9b4c?s=128&d=identicon&r=PG&f=1", "display_name": "Yoklan", "link": "https://stackoverflow.com/users/5895250/yoklan"}, "edited": false, "score": 0, "creation_date": 1459374784, "post_id": 36320401, "comment_id": 60264128, "body": "I&#39;ve tried that before but that gives me an error page, saying: No route matches {:action=&gt;&quot;show&quot;, :controller=&gt;&quot;task_items&quot;, :event_id=&gt;&quot;3&quot;, :id=&gt;#&lt;TaskItem id: nil, task_list_id: 3, content: nil, completed: false, created_at: nil, updated_at: nil&gt;, :task_item=&gt;{:completed=&gt;true}, :task_list_id=&gt;#&lt;TaskList id: 3, listable_id: 3, listable_type: &quot;Event&quot;, description: &quot;Example Task&quot;, created_at: &quot;2016-03-19 23:56:36&quot;, updated_at: &quot;2016-03-19 23:56:36&quot;&gt;} missing required keys: [:id]"}, {"owner": {"reputation": 171, "user_id": 5895250, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/6d2741e6e584ca6fff8e856b324e9b4c?s=128&d=identicon&r=PG&f=1", "display_name": "Yoklan", "link": "https://stackoverflow.com/users/5895250/yoklan"}, "edited": false, "score": 0, "creation_date": 1459376042, "post_id": 36320401, "comment_id": 60264683, "body": "It seems to also be hitting the show action instead of update, passing the update as action: still results in it hitting show"}], "tags": [], "owner": {"reputation": 32451, "user_id": 2516474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a2179a340c0e84edc285d432211145d?s=128&d=identicon&r=PG", "display_name": "SteveTurczyn", "link": "https://stackoverflow.com/users/2516474/steveturczyn"}, "is_accepted": false, "score": 1, "last_activity_date": 1459374709, "creation_date": 1459374709, "answer_id": 36320401, "question_id": 36320263, "link": "https://stackoverflow.com/questions/36320263/update-an-attribute-via-a-link-to-from-within-a-loop-cant-pass-id/36320401#36320401", "title": "Update an attribute via a link_to from within a loop, can&#39;t pass ID", "body": "<p>You're not passing the <code>task_item</code> to the <code>link_to</code>... how is it supposed to know which task item to update?</p>\n\n<p>Better might be...</p>\n\n<pre><code> &lt;%= link_to \"Complete\", task_list_task_item_path(@task_list, task_item, :completed =&gt; true), :method =&gt; :patch %&gt;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 171, "user_id": 5895250, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/6d2741e6e584ca6fff8e856b324e9b4c?s=128&d=identicon&r=PG&f=1", "display_name": "Yoklan", "link": "https://stackoverflow.com/users/5895250/yoklan"}, "edited": false, "score": 0, "creation_date": 1459392917, "post_id": 36322937, "comment_id": 60269585, "body": "Doesn&#39;t work, gives this error &quot; No route matches {:action=&gt;&quot;show&quot;, :completed=&gt;true, :controller=&gt;&quot;task_items&quot;, ............ (omitted) missing required keys: [:id] &quot;"}], "tags": [], "owner": {"reputation": 9, "user_id": 5479407, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9a6cbcca2ae4e9d0916780d8773bc4e?s=128&d=identicon&r=PG", "display_name": "Chung Ph\u01b0\u1edbc", "link": "https://stackoverflow.com/users/5479407/chung-ph%c6%b0%e1%bb%9bc"}, "is_accepted": false, "score": 0, "last_activity_date": 1459390207, "creation_date": 1459390207, "answer_id": 36322937, "question_id": 36320263, "link": "https://stackoverflow.com/questions/36320263/update-an-attribute-via-a-link-to-from-within-a-loop-cant-pass-id/36322937#36322937", "title": "Update an attribute via a link_to from within a loop, can&#39;t pass ID", "body": "<p>The link should be:</p>\n\n<pre><code>&lt;%= link_to \"Complete\", task_list_task_item_path(@task_list, task_item, completed: true), method: :patch %&gt;\n</code></pre>\n\n<p>And make sure that you have require jquery and jquery_ujs in application.js file. Because I did meet problem when use link_to with method delete, patch when I remove require jquery_ujs from the application.js</p>\n"}, {"tags": [], "owner": {"reputation": 171, "user_id": 5895250, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/6d2741e6e584ca6fff8e856b324e9b4c?s=128&d=identicon&r=PG&f=1", "display_name": "Yoklan", "link": "https://stackoverflow.com/users/5895250/yoklan"}, "is_accepted": true, "score": 0, "last_activity_date": 1459444352, "creation_date": 1459444352, "answer_id": 36339651, "question_id": 36320263, "link": "https://stackoverflow.com/questions/36320263/update-an-attribute-via-a-link-to-from-within-a-loop-cant-pass-id/36339651#36339651", "title": "Update an attribute via a link_to from within a loop, can&#39;t pass ID", "body": "<p>I've solved my issue.</p>\n\n<p>I created a new method instead of using the update and added a custom route to it. Also deleted some controller methods that were of no use to me. Here is the code that worked for me for anyone who might have a similar issue.</p>\n\n<pre><code>class TaskItemsController &lt; ApplicationController\n\n    Omitted Index, Create, etc.\n\n    def complete\n      @task_item = @task_list.task_items.find(params[:task_item_id])\n      @task_item.completed = true\n      if @task_item.save\n        redirect_to :back\n      end\n    end\n\nend\n\n  resources :task_lists  do\n    resources :task_items, only: [:new, :index, :create] do\n      member do\n        patch 'complete'\n      end\n    end\n  end\n\n&lt;% @task_list.task_items.each do |task_item| %&gt;\n  &lt;%= task_item.content %&gt;\n  &lt;% if task_item.completed == false %&gt;\n    &lt;%= link_to \"Complete\", complete_task_list_task_item_path(:task_list_id =&gt; @task_list.id, :task_item_id =&gt; task_item.id), method: :patch %&gt; &lt;br /&gt;\n  &lt;% end %&gt;\n&lt;% end %&gt;\n</code></pre>\n"}], "owner": {"reputation": 171, "user_id": 5895250, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/6d2741e6e584ca6fff8e856b324e9b4c?s=128&d=identicon&r=PG&f=1", "display_name": "Yoklan", "link": "https://stackoverflow.com/users/5895250/yoklan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "accepted_answer_id": 36339651, "answer_count": 3, "score": 0, "last_activity_date": 1459444352, "creation_date": 1459374135, "last_edit_date": 1459379686, "question_id": 36320263, "link": "https://stackoverflow.com/questions/36320263/update-an-attribute-via-a-link-to-from-within-a-loop-cant-pass-id", "title": "Update an attribute via a link_to from within a loop, can&#39;t pass ID", "body": "<p>I'm trying to change the value of <strong>completed</strong>, which is a boolean from the default false to true using the update method in the controller. I'm trying to make it so that I can display all of the task_items and a link next to them to change the value. This is what I got:</p>\n\n<p>TaskItem is nested in TaskList</p>\n\n<pre><code>&lt;% @task_list.task_items.each do |task_item| %&gt;\n  &lt;%= task_item.content %&gt;\n  &lt;%= link_to \"Complete\", task_list_task_item_path(task_list_id: @task_list.id, :task_item =&gt; {:completed =&gt; true} ), :method =&gt; :patch %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p><strong>I'm getting no route matches missing required keys [:id] error.</strong></p>\n\n<p>Routes</p>\n\n<pre><code>  concern :has_task_lists do\n    resources :task_lists, only: [:new, :index, :create, :show]\n  end\n\n  resources :events, :meetings, concerns: [:has_task_lists]\n\n  resources :task_lists, except: [:new, :index, :create] do\n    resources :task_items  \n  end\n</code></pre>\n\n<p>Controller</p>\n\n<pre><code>class TaskItemsController &lt; ApplicationController\n    before_action :set_task_list\n\n    def index\n        @task_items = @task_list.task_items\n    end\n\n    def new\n    @task_item = @task_list.task_items.new\n  end\n\n    def create\n      @task_item = @task_list.task_items.new(task_item_params)\n      if @task_item.save\n        redirect_to :back\n      else\n        render :new\n      end\n  end\n\n    def show\n        @task_item = @task_list.task_items.find(params[:id])\n  end\n\n    def update\n    @task_item = @task_list.task_items.find(params[:id])\n    if @task_item.update_attributes(task_item_params)\n      redirect_to :back, notice: \"Task Item Updated\"\n    else\n      render :edit\n    end\n  end\n\n  def edit\n    @task_item = @task_list.task_items.find(params[:id])\n  end\n\n    private\n\n    def task_item_params\n        params.require(:task_item).permit(:content, :completed)\n    end\n\n    def set_task_list\n    @task_list = TaskList.find(params[:task_list_id])\n  end\n\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "carrierwave", "minimagick"], "answers": [{"tags": [], "owner": {"reputation": 784, "user_id": 4800709, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IG6C4.jpg?s=128&g=1", "display_name": "Navin", "link": "https://stackoverflow.com/users/4800709/navin"}, "is_accepted": false, "score": 0, "last_activity_date": 1459497167, "creation_date": 1459497167, "answer_id": 36350899, "question_id": 36320250, "link": "https://stackoverflow.com/questions/36320250/carrierwave-including-minimagick-uploads-no-longer-work/36350899#36350899", "title": "Carrierwave including MiniMagick -&gt; uploads no longer work", "body": "<p>Add <strong>gem \"mini_magick\"</strong> in your gem file and do bundle install.</p>\n\n<p>In your AvatarUploader class add <strong>include CarrierWave::MiniMagick</strong></p>\n\n<p>In your User model add\n<strong>mount_uploader :avtar, AvatarUploader</strong></p>\n"}, {"tags": [], "owner": {"reputation": 10377, "user_id": 2832282, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ZJ4WG.jpg?s=128&g=1", "display_name": "Cyril Duchon-Doris", "link": "https://stackoverflow.com/users/2832282/cyril-duchon-doris"}, "is_accepted": true, "score": 0, "last_activity_date": 1459673617, "creation_date": 1459673617, "answer_id": 36383417, "question_id": 36320250, "link": "https://stackoverflow.com/questions/36320250/carrierwave-including-minimagick-uploads-no-longer-work/36383417#36383417", "title": "Carrierwave including MiniMagick -&gt; uploads no longer work", "body": "<p>I managed to make it work. I'm not really sure what was the key step, but amongst other</p>\n\n<ul>\n<li>I opened ImageMagick for Windows once (I know some programs generate additional config files after first start), and I tried opening/saving a photo with the GUI</li>\n<li>I deleted previously uploaded Carrierwave files</li>\n<li>I ran <code>rails s</code> once in administrator mode (now it runs fine even without)</li>\n</ul>\n"}], "owner": {"reputation": 10377, "user_id": 2832282, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ZJ4WG.jpg?s=128&g=1", "display_name": "Cyril Duchon-Doris", "link": "https://stackoverflow.com/users/2832282/cyril-duchon-doris"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 457, "favorite_count": 1, "accepted_answer_id": 36383417, "answer_count": 2, "score": 0, "last_activity_date": 1459673617, "creation_date": 1459374080, "last_edit_date": 1459375299, "question_id": 36320250, "link": "https://stackoverflow.com/questions/36320250/carrierwave-including-minimagick-uploads-no-longer-work", "title": "Carrierwave including MiniMagick -&gt; uploads no longer work", "body": "<p>I have a Rails app with Carrierwave and I am using MiniMagick for image processing.</p>\n\n<p>Whenever I add <code>include CarrierWave::MiniMagick</code> in my Uploader files, the upload just stops working, without any hint of error, and the application flow resumes without updating the uploaded images</p>\n\n<pre><code>class AvatarUploader &lt; CarrierWave::Uploader::Base\n  include CarrierWave::MiniMagick\n\n  storage :file\n\n  def store_dir\n    \"uploads/#{model.class.to_s.underscore}/#{mounted_as}/#{model.id}\"\n  end\n\n  version :thumb do\n    process resize_to_fill: [50, 50]\n  end\n\n  def filename\n    \"avatar.#{file.extension}\" if original_filename if original_filename\n  end\n\nend\n</code></pre>\n\n<p>My User class has the following lines</p>\n\n<pre><code>attr_accessor :avatar, :avatar_cache\nmount_uploader :avatar, ::AvatarUploader\n</code></pre>\n\n<p>My view</p>\n\n<pre><code>&lt;%= f.label(:avatar, t(:avatar)) %&gt;\n&lt;%= image_tag(user.avatar_url) if user.avatar? %&gt;\n&lt;%= f.file_field :avatar %&gt;\n&lt;%= f.hidden_field :avatar_cache %&gt;\n</code></pre>\n\n<p>When I comment out the include line and the resize_to_fill line in the uploader, everything works well.</p>\n\n<p>This is hard to debug, I have tried uploading the avatar through <code>.store!</code> the console but the output is a weird <code>[:store_versions!]</code></p>\n\n<pre><code>u = User.first\nu.avatar # Contains 'old.jpg' ( Which I uploaded with the buggy lines commented, and changed the  filename to 'old')\nu.avatar.store!(File.new(\"C:\\\\somejpeg.jpg\"))\n=&gt; [:store_versions!]\nu.avatar # Still shows old 'me.jpg'\n</code></pre>\n\n<p>Config</p>\n\n<ul>\n<li>Windows</li>\n<li>ImageMagick installed </li>\n<li>ruby 2.2.4p230 (2015-12-16 revision 53155) [x64-mingw32]</li>\n<li>CarrierWave 0.10.0 and Carrierwave-Mongoid 0.8.0</li>\n</ul>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec", "rspec-rails"], "comments": [{"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1459374583, "post_id": 36319878, "comment_id": 60264056, "body": "I&#39;m guessing that its the Rails autoloader doing something screwy - it works by monkeypatching <code>Object.const_missing</code> which would have normally just raised <code>NameError: uninitialized constant Backend::HomeController</code>. It has very little to with RSpec."}, {"owner": {"reputation": 1081, "user_id": 3854752, "user_type": "registered", "profile_image": "https://graph.facebook.com/613497182/picture?type=large", "display_name": "Jacob Rastad", "link": "https://stackoverflow.com/users/3854752/jacob-rastad"}, "reply_to_user": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1459374742, "post_id": 36319878, "comment_id": 60264112, "body": "Thank you for clearing that up for me. Do you have any suggestions on how to investigate the Rails Autoloader further?"}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1459374879, "post_id": 36319878, "comment_id": 60264175, "body": "<a href=\"http://guides.rubyonrails.org/autoloading_and_reloading_constants.html\" rel=\"nofollow noreferrer\">guides.rubyonrails.org/autoloading_and_reloading_constants.h&zwnj;&#8203;tml</a>"}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 1, "creation_date": 1459375036, "post_id": 36319878, "comment_id": 60264255, "body": "You might want to try and see what happens if you define it as absolute rather than relative: <code>RSpec.describe ::Backend::HomeController</code>"}, {"owner": {"reputation": 1081, "user_id": 3854752, "user_type": "registered", "profile_image": "https://graph.facebook.com/613497182/picture?type=large", "display_name": "Jacob Rastad", "link": "https://stackoverflow.com/users/3854752/jacob-rastad"}, "reply_to_user": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1459375194, "post_id": 36319878, "comment_id": 60264321, "body": "Thank you for the tip, unfortunately using the absolute name didn&#39;t help, still the same problem and error message if I change the name of the global HomeController"}, {"owner": {"reputation": 31711, "user_id": 634576, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/48891dab622b535f3c2b4ec1c8765bed?s=128&d=identicon&r=PG", "display_name": "Dave Schweisguth", "link": "https://stackoverflow.com/users/634576/dave-schweisguth"}, "edited": false, "score": 0, "creation_date": 1459426256, "post_id": 36319878, "comment_id": 60288070, "body": "Have you changed <code>config.autoload_paths</code>?"}, {"owner": {"reputation": 1081, "user_id": 3854752, "user_type": "registered", "profile_image": "https://graph.facebook.com/613497182/picture?type=large", "display_name": "Jacob Rastad", "link": "https://stackoverflow.com/users/3854752/jacob-rastad"}, "edited": false, "score": 0, "creation_date": 1459427652, "post_id": 36319878, "comment_id": 60289152, "body": "No, it&#39;s a clean rails installation."}], "answers": [{"comments": [{"owner": {"reputation": 1081, "user_id": 3854752, "user_type": "registered", "profile_image": "https://graph.facebook.com/613497182/picture?type=large", "display_name": "Jacob Rastad", "link": "https://stackoverflow.com/users/3854752/jacob-rastad"}, "edited": false, "score": 0, "creation_date": 1459437909, "post_id": 36333057, "comment_id": 60297021, "body": "Thank you! I ended up adding <code>require_dependency &quot;#{::Rails.root}&#47;app&#47;controllers&#47;backend&#47;home_controller</code> in the top of my spec and it solved the problem"}], "tags": [], "owner": {"reputation": 9993, "user_id": 2128691, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/YV6xv.jpg?s=128&g=1", "display_name": "dax", "link": "https://stackoverflow.com/users/2128691/dax"}, "is_accepted": true, "score": 3, "last_activity_date": 1459426171, "last_edit_date": 1592644375, "creation_date": 1459426171, "answer_id": 36333057, "question_id": 36319878, "link": "https://stackoverflow.com/questions/36319878/rspec-controller-spec-on-namespaced-controller-finds-the-global-controller-with/36333057#36333057", "title": "Rspec controller spec on namespaced controller finds the global controller with same name", "body": "<p>I had this same problem before - you can read about the whole issue here:</p>\n<p><a href=\"https://stackoverflow.com/questions/29849501/object-const-get-and-rails-cutting-off-parent-module-names\">Object.const_get and Rails - cutting off parent module names</a></p>\n<p>but the meat of the answer comes from <a href=\"https://stackoverflow.com/a/29920332/2128691\">this</a> answer from user Apneadiving:</p>\n<blockquote>\n<p>Be aware that there are vicious cases in Rails development mode. In order to gain speed, the strict minimum is loaded. Then Rails looks for classes definitions when needed.</p>\n<p>But this sometimes fails big time example, when you have say <code>::User</code> already loaded, and then look for <code>::Admin::User</code>. Rails would not look for it, it will think <code>::User</code> does the trick.</p>\n<p>This can be solved using <code>require_dependency</code> statements in your code.</p>\n</blockquote>\n"}], "owner": {"reputation": 1081, "user_id": 3854752, "user_type": "registered", "profile_image": "https://graph.facebook.com/613497182/picture?type=large", "display_name": "Jacob Rastad", "link": "https://stackoverflow.com/users/3854752/jacob-rastad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 996, "favorite_count": 0, "accepted_answer_id": 36333057, "answer_count": 1, "score": 5, "last_activity_date": 1459426171, "creation_date": 1459372465, "last_edit_date": 1459377614, "question_id": 36319878, "link": "https://stackoverflow.com/questions/36319878/rspec-controller-spec-on-namespaced-controller-finds-the-global-controller-with", "title": "Rspec controller spec on namespaced controller finds the global controller with same name", "body": "<p>I have a weird issue when creating a controller spec for a namespaced controller when there also is a global controller with the same name. </p>\n\n<p>The controller names are <code>HomeController</code> and <code>Backend::HomeController</code>.</p>\n\n<p>Note that <strong>I have not yet created</strong> the file <code>app/controllers/backend/home_controller.rb</code>, only the global controller exists <code>app/controllers/home_controller.rb</code></p>\n\n<p>Therefore I expect the test to explode with errors, but it does not. It passes, all green and happy.</p>\n\n<p>My spec looks like this</p>\n\n<pre><code>#spec/controllers/backend/home_controller_spec.rb\nrequire 'rails_helper'\n\nRSpec.describe Backend::HomeController, type: :controller do\n  before do\n    user = FactoryGirl.create(:user)\n    allow(controller).to receive(:authenticate_user!).and_return(true)\n    allow(controller).to receive(:current_user).and_return(user)\n  end\n  describe \"GET #index\" do\n    it \"returns http success\" do\n      get :index\n      expect(response).to have_http_status(:success)\n    end\n  end\n\nend\n</code></pre>\n\n<p>However if I change the name in my global <code>HomeController</code> to something else, e.g <code>NotMyHomeController</code> the test fails with errors saying</p>\n\n<pre><code>Unable to autoload constant HomeController, expected app/controllers/home_controller.rb to define it\n</code></pre>\n\n<p>Which makes me suspect that Rspec doesn't bother with the \"Backend\" part in the <code>Rspec.describe</code> function.</p>\n\n<p>Am I doing something wrong or am I missing some other vital part? IMHO, this spec shouldn't pass (to paraphrase Gandalf).</p>\n\n<p>I'm using Rails 4.2.6, Rspec-Rails 3.4.2</p>\n\n<p><strong>Update</strong></p>\n\n<p>As Max pointed out, this is probably not at Rspec issue but instead something with Rails autoloading.</p>\n\n<p>However i tried just typing</p>\n\n<pre><code>Backend::HomeController\n</code></pre>\n\n<p>In the Rails console, but there I get the expected error</p>\n\n<pre><code>NameError: uninitialized constant Backend::HomeController\n</code></pre>\n\n<p>And <a href=\"http://guides.rubyonrails.org/autoloading_and_reloading_constants.html#autoloading-availability\" rel=\"nofollow\">according to the Rails guide</a>, both the console and the test suite autoloads. However I think I'm on the right track here.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "facebook", "timezone", "omniauth-facebook"], "comments": [{"owner": {"reputation": 4662, "user_id": 2456549, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/9Uz71.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/2456549/justin"}, "edited": false, "score": 0, "creation_date": 1459372190, "post_id": 36319711, "comment_id": 60262875, "body": "<code>ActiveSupport::TimeZone.new(user.timezone).name</code>?"}, {"owner": {"reputation": 4662, "user_id": 2456549, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/9Uz71.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/2456549/justin"}, "edited": false, "score": 0, "creation_date": 1459372627, "post_id": 36319711, "comment_id": 60263118, "body": "well you have to have a user sorry. so for your example above: <code>ActiveSupport::TimeZone.new(-5.0).name</code>"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1459378292, "post_id": 36319711, "comment_id": 60265519, "body": "Time zones are pretty fussy at the best of times. -5.0 <i>could</i> be that, or it could be <a href=\"https://en.wikipedia.org/wiki/List_of_UTC_time_offsets#UTC.E2.88.9205:00.2C_R\" rel=\"nofollow noreferrer\">any of these</a>, but with Daylight Saving Time in effect, the one you indicated is actually -4.0."}, {"owner": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1459381696, "post_id": 36319711, "comment_id": 60266678, "body": "Ah okay haha thanks for clarifying @tadman. Facebook actually generated <code>timezone: -4.0</code>, which I was confused by because I&#39;m in Florida. I figured I&#39;d tackle that problem for another day and just move forward with <code>-5.0</code> as my example. Now I won&#39;t have that hanging over my head :]"}, {"owner": {"reputation": 195413, "user_id": 634824, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/889cf720c96957e615463b5c903a5e18?s=128&d=identicon&r=PG", "display_name": "Matt Johnson-Pint", "link": "https://stackoverflow.com/users/634824/matt-johnson-pint"}, "edited": false, "score": 0, "creation_date": 1459408121, "post_id": 36319711, "comment_id": 60275373, "body": "Time zone != Offset.  Therefore, the task is impossible.  Facebook lies.  It&#39;s just the user&#39;s offset as of their last login."}], "answers": [{"tags": [], "owner": {"reputation": 4662, "user_id": 2456549, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/9Uz71.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/2456549/justin"}, "is_accepted": true, "score": 1, "last_activity_date": 1459373711, "last_edit_date": 1495540239, "creation_date": 1459372913, "answer_id": 36319995, "question_id": 36319711, "link": "https://stackoverflow.com/questions/36319711/how-can-i-convert-float-number-to-timezone/36319995#36319995", "title": "How can I convert float number to timezone?", "body": "<p>You can use the <code>ActiveSupport::TimeZone</code> class pass in the float as your argument. <a href=\"http://api.rubyonrails.org/classes/ActiveSupport/TimeZone.html\" rel=\"nofollow noreferrer\">http://api.rubyonrails.org/classes/ActiveSupport/TimeZone.html</a>.</p>\n\n<p><em>Disclaimer</em>: Part of the answer comes from the first part of this question, <a href=\"https://stackoverflow.com/questions/36319108/how-to-get-timezone-from-facebook-with-omniauth/36319508?noredirect=1#comment60262719_36319508\">How to get timezone from facebook with omniauth?</a>.</p>\n\n<pre><code>user.timezone = auth.extra.raw_info.timezone\nuser.time_zone = ActiveSupport::TimeZone.new(user.timezone).name\n</code></pre>\n\n<p>You will have to account for times when <code>user.timezone</code> is nil, or else it will throw errors.</p>\n"}], "owner": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 393, "favorite_count": 0, "accepted_answer_id": 36319995, "answer_count": 1, "score": 0, "last_activity_date": 1459373711, "creation_date": 1459371875, "question_id": 36319711, "link": "https://stackoverflow.com/questions/36319711/how-can-i-convert-float-number-to-timezone", "title": "How can I convert float number to timezone?", "body": "<p>How can I convert <code>float</code> number to timezone?</p>\n\n<p>Facebook breaks the timezone down using float.</p>\n\n<pre><code>timezone    float (min: -24) (max: 24)\n            The person's current timezone offset from UTC\n</code></pre>\n\n<p><code>user.timezone = auth.extra.raw_info.timezone</code> captures a user's timezone location upon signing up via Facebook, for example <code>timezone: -5.0</code>.</p>\n\n<p>I want to convert this though to <code>timezone: \"Eastern Time (US &amp; Canada)\"</code>. A user could then adjust his timezone via <code>&lt;%= f.time_zone_select :timezone, ActiveSupport::TimeZone.us_zones %&gt;</code>.</p>\n\n<p>Potential Solution</p>\n\n<pre><code>t.float    \"timezone\"\nt.string   \"time_zone\" # somehow turning it into a string after Facebook sets it?\n</code></pre>\n"}, {"tags": ["ruby", "logging", "selenium-webdriver", "rspec", "capybara"], "answers": [{"tags": [], "owner": {"reputation": 32008, "user_id": 322020, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/dce43cb8158a14c3fed02bea797becd7?s=128&d=identicon&r=PG", "display_name": "Nakilon", "link": "https://stackoverflow.com/users/322020/nakilon"}, "is_accepted": false, "score": 0, "last_activity_date": 1459371664, "creation_date": 1459371664, "answer_id": 36319653, "question_id": 36319595, "link": "https://stackoverflow.com/questions/36319595/how-do-i-log-my-selenium-actions-into-example-metadataextra-failure-lines/36319653#36319653", "title": "How do I log my Selenium actions into example.metadata[:extra_failure_lines]?", "body": "<p>I've exposed the <code>example</code> as RSpec static module variable:</p>\n\n<pre><code>RSpec.module_eval do\n  class &lt;&lt; self\n    attr_accessor :exposed_example\n  end\nend\n\nRSpec.configure do |c|\n  c.before do |example|\n    RSpec.exposed_example = example\n    example.metadata[:extra_failure_lines] = []\n  end\nend\n\n# you may use another approaches of monkeypatching\nCapybara::DSL.module_eval do\n  old = instance_method :visit\n  define_method :visit do |path|\n    RSpec.exposed_example.metadata[:extra_failure_lines] &lt;&lt; \"visit #{path.inspect}\"\n    old.bind(self).(path)\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 32008, "user_id": 322020, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/dce43cb8158a14c3fed02bea797becd7?s=128&d=identicon&r=PG", "display_name": "Nakilon", "link": "https://stackoverflow.com/users/322020/nakilon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 45, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1459372061, "creation_date": 1459371469, "last_edit_date": 1459372061, "question_id": 36319595, "link": "https://stackoverflow.com/questions/36319595/how-do-i-log-my-selenium-actions-into-example-metadataextra-failure-lines", "title": "How do I log my Selenium actions into example.metadata[:extra_failure_lines]?", "body": "<p>RSpec 3.4.0 has <code>example.metadata[:extra_failure_lines]</code> thing that is to be printed on failure. How do I log Selenium/Capybara actions into it?</p>\n\n<pre><code>RSpec.configure do |c|\n  c.before do |example|\n    example.metadata[:extra_failure_lines] = []\n  end\nend\n\nCapybara::DSL.module_eval do\n  alias :old_visit :visit\n  def visit path\n    example.metadata[:extra_failure_lines] &lt;&lt; \"visit #{path}\"\n    old_visit path\n  end\nend\n</code></pre>\n\n<p>This will fail because <code>Capybara::DSL</code> doesn't know about <code>example</code>.</p>\n"}, {"tags": ["ruby-on-rails", "arrays", "ruby", "erb"], "answers": [{"comments": [{"owner": {"reputation": 43, "user_id": 6054431, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/990a4cf926be83dfabca1299a94cea9f?s=128&d=identicon&r=PG&f=1", "display_name": "kjs123", "link": "https://stackoverflow.com/users/6054431/kjs123"}, "edited": false, "score": 0, "creation_date": 1459372610, "post_id": 36319792, "comment_id": 60263107, "body": "well I have my form as <code>&lt;%= form_for ([@league, @team, @fixture, @result]) do |f| %&gt;</code> so it should be using it as f.number_field ?"}, {"owner": {"reputation": 592, "user_id": 3361021, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/64a1a5af0f3c5d28b9f740cdc413d4b6?s=128&d=identicon&r=PG&f=1", "display_name": "Ben Muschol", "link": "https://stackoverflow.com/users/3361021/ben-muschol"}, "reply_to_user": {"reputation": 43, "user_id": 6054431, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/990a4cf926be83dfabca1299a94cea9f?s=128&d=identicon&r=PG&f=1", "display_name": "kjs123", "link": "https://stackoverflow.com/users/6054431/kjs123"}, "edited": false, "score": 1, "creation_date": 1459373122, "post_id": 36319792, "comment_id": 60263357, "body": "Nope, within a <code>fields_for</code> block, you should be using the field object created in the block. Otherwise, rails has no way of knowing that the field inside that block is supposed to be in the <code>fields_for</code> the attribute you&#39;re modifying"}, {"owner": {"reputation": 43, "user_id": 6054431, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/990a4cf926be83dfabca1299a94cea9f?s=128&d=identicon&r=PG&f=1", "display_name": "kjs123", "link": "https://stackoverflow.com/users/6054431/kjs123"}, "edited": false, "score": 0, "creation_date": 1459373705, "post_id": 36319792, "comment_id": 60263659, "body": "ok yeah that makes sense. When I change it to use p.number_field I&#39;m getting an error <code>undefined method &#39;home_goal_min&#39; for []:Array</code>. Am I using the home_goal_min the right way ?"}, {"owner": {"reputation": 592, "user_id": 3361021, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/64a1a5af0f3c5d28b9f740cdc413d4b6?s=128&d=identicon&r=PG&f=1", "display_name": "Ben Muschol", "link": "https://stackoverflow.com/users/3361021/ben-muschol"}, "reply_to_user": {"reputation": 43, "user_id": 6054431, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/990a4cf926be83dfabca1299a94cea9f?s=128&d=identicon&r=PG&f=1", "display_name": "kjs123", "link": "https://stackoverflow.com/users/6054431/kjs123"}, "edited": false, "score": 0, "creation_date": 1459374748, "post_id": 36319792, "comment_id": 60264117, "body": "That&#39;s because the names you give fields are the names of attributes rails tries to set on the object, so rails is trying to call `.home_goal_min=&#39; on an array, which isn&#39;t possible. If I were you, I&#39;d ditch the nested fields and enter the data in a single field then parse is in the model. Currently updating my answer to explain"}], "tags": [], "owner": {"reputation": 592, "user_id": 3361021, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/64a1a5af0f3c5d28b9f740cdc413d4b6?s=128&d=identicon&r=PG&f=1", "display_name": "Ben Muschol", "link": "https://stackoverflow.com/users/3361021/ben-muschol"}, "is_accepted": false, "score": 1, "last_activity_date": 1459375065, "last_edit_date": 1459375065, "creation_date": 1459372167, "answer_id": 36319792, "question_id": 36319271, "link": "https://stackoverflow.com/questions/36319271/storing-an-array-of-integers-with-ruby-on-rails/36319792#36319792", "title": "Storing an array of integers with ruby on rails", "body": "<p>You have <code>&lt;%= f.number_field :home_goal_min %&gt;</code></p>\n\n<p>Shouldn't it be <code>&lt;%= p.number_field :home_goal_min %&gt;</code>?</p>\n\n<p>Edit:</p>\n\n<p>I don't think you can submit Arrays through forms without using javascript. Here's the simplest solution:</p>\n\n<p>In the form:</p>\n\n<pre><code>&lt;%= f.text_field :home_goal_mins_list, placeholder: \"A comma-separated list of times of the goals\" %&gt;\n</code></pre>\n\n<p>In the model:</p>\n\n<pre><code>def home_goal_mins_list=(value)\n  self.home_goal_mins = value.split(\",\").map(&amp;:strip)\nend\n\ndef home_goal_mins_list\n  self.home_goal_mins.map(&amp;:to_s).join(\", \")\nend\n</code></pre>\n\n<p>HOWEVER</p>\n\n<p>If I were you, I would just make this data into its own table. Generally, it's a bad practice to use array fields unless your database is already storing a lot of unstructured data</p>\n"}, {"tags": [], "owner": {"reputation": 3020, "user_id": 4493564, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh3.googleusercontent.com/-ZrR5HKgzmQA/AAAAAAAAAAI/AAAAAAAAA2Y/YxH3F9m512U/photo.jpg?sz=128", "display_name": "Petr Gazarov", "link": "https://stackoverflow.com/users/4493564/petr-gazarov"}, "is_accepted": false, "score": 1, "last_activity_date": 1459395269, "creation_date": 1459395269, "answer_id": 36323663, "question_id": 36319271, "link": "https://stackoverflow.com/questions/36319271/storing-an-array-of-integers-with-ruby-on-rails/36323663#36323663", "title": "Storing an array of integers with ruby on rails", "body": "<p>Firstly, you <strong><em>can</em></strong> pass in array through a form.\nIt is done by appending <code>[]</code> to the end of the name of the inputs.\nFor example, your form contains:</p>\n\n<pre><code>&lt;input name='home_goal_min[]' value='100'&gt;\n&lt;input name='home_goal_min[]' value='200'&gt;\n&lt;input name='home_goal_min[]' value='300'&gt;\n</code></pre>\n\n<p>Upon form submission, your params will look like:</p>\n\n<pre><code>params[:home_goal_min] =&gt; ['100', '200', '300']\n</code></pre>\n\n<p>Docs here:\n<a href=\"http://guides.rubyonrails.org/v3.2.9/form_helpers.html\" rel=\"nofollow\">http://guides.rubyonrails.org/v3.2.9/form_helpers.html</a>\nSection <code>7.1 Basic Structures</code></p>\n\n<p>However, reading through your situation, I don't think you need to pass in an array. As Ben noted in his answer, you can parse a single field before saving it. I would suggest doing it in the form object, as model has nothing to do with parsing form data.     </p>\n"}], "owner": {"reputation": 43, "user_id": 6054431, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/990a4cf926be83dfabca1299a94cea9f?s=128&d=identicon&r=PG&f=1", "display_name": "kjs123", "link": "https://stackoverflow.com/users/6054431/kjs123"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1149, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1459395269, "creation_date": 1459370422, "question_id": 36319271, "link": "https://stackoverflow.com/questions/36319271/storing-an-array-of-integers-with-ruby-on-rails", "title": "Storing an array of integers with ruby on rails", "body": "<p>I'm trying to take in an array of numbers through the use of a form. In my database I have the variable as:</p>\n\n<pre><code>t.integer  \"home_goal_min\", default: [],  array: true\n</code></pre>\n\n<p>In my form I have:</p>\n\n<pre><code>&lt;%= f.label :minutes_of_home_team_goals %&gt;\n&lt;%= f.fields_for 'home_goal_min[]', [] do |p| %&gt;\n    &lt;%= f.number_field :home_goal_min %&gt;\n    &lt;%= f.number_field :home_goal_min %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>In my controller I also added in the parameter as an array but this still hasn't solved my problem:</p>\n\n<pre><code>def result_params\n        params.require(:result).permit(:home_result, :away_result, {:home_goal_min =&gt; []}, {:away_goal_min =&gt; []})\n    end\n</code></pre>\n\n<p>However, when I use the form and enter data, I then proceed to check the database through the console but it still appears empty and I just get:\nhome_goal_min: []</p>\n\n<p>I'm wondering what I need to do to get the numbers entered in the form to be saved in the database?</p>\n\n<p>Also is there a quick way to have the form part for home_goal_min as a text field and allow the user to enter the numbers split by comma, for example as: \"23,45,52\" would populate home_goal_min with the array [23,45,52]</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "paypal", "utf-8"], "answers": [{"tags": [], "owner": {"reputation": 22836, "user_id": 152786, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/581hP.jpg?s=128&g=1", "display_name": "smathy", "link": "https://stackoverflow.com/users/152786/smathy"}, "is_accepted": false, "score": 0, "last_activity_date": 1459372146, "creation_date": 1459372146, "answer_id": 36319790, "question_id": 36319174, "link": "https://stackoverflow.com/questions/36319174/paypal-ipn-invalid-byte-sequence-in-utf-8/36319790#36319790", "title": "Paypal IPN: Invalid byte sequence in UTF-8", "body": "<p>You have strings in there with extended ascii, and they're being interpreted as UTF-8.  You need to force change their encoding to something supporting those high bytes, \"ISO-8859-1\" would be my recommendation, and then convert to UTF-8 after that:</p>\n\n<pre><code>str.force_encoding(\"ISO-8859-1\").encode(\"UTF-8\")\n</code></pre>\n"}], "owner": {"reputation": 11144, "user_id": 328294, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/fbbd46a6f03489e1724c2dbf50c6a98c?s=128&d=identicon&r=PG", "display_name": "pixelearth", "link": "https://stackoverflow.com/users/328294/pixelearth"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 169, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1459389209, "creation_date": 1459370071, "last_edit_date": 1459389209, "question_id": 36319174, "link": "https://stackoverflow.com/questions/36319174/paypal-ipn-invalid-byte-sequence-in-utf-8", "title": "Paypal IPN: Invalid byte sequence in UTF-8", "body": "<p>I have a ruby app that processes paypal payments. Recently we changed to ruby 2.3.0 and have recently incurred this error: ArgumentError: invalid byte sequence in UTF-8</p>\n\n<p>I've posted the params (cleaned) below and pretty sure it is coming from the Swedish characters and the charset (windows). </p>\n\n<p>I'm not sure exactly how to fix this, or watch out for it in the future. </p>\n\n<p>I'm also not clear on what part of the code the error is occurring. </p>\n\n<p>Help?</p>\n\n<pre><code>\u00bb 30 Mar 2016 10:58:47.729 2016-03-30 17:58:47.428957+00:00 app web.1 - - Started POST \"/en/paypal_ipns/cart_purchase_ipn\" for 173.0.81.1 at 2016-03-30 17:58:47 +0000\n\u00bb 30 Mar 2016 10:58:47.731 2016-03-30 17:58:47.435860+00:00 app web.1 - - Processing by PaypalIpnsController#cart_purchase_ipn as HTML\n\u00bb 30 Mar 2016 10:58:47.731 2016-03-30 17:58:47.435988+00:00 app web.1 - - Parameters: {\"mc_gross\"=&gt;\"10.15\", \"protection_eligibility\"=&gt;\"Eligible\", \"address_status\"=&gt;\"confirmed\", \"payer_id\"=&gt;\"removed\", \"address_street\"=&gt;\"Kung\\xE4lvsgatan 6 A\", \"payment_date\"=&gt;\"08:07:48 Mar 30, 2016 PDT\", \"payment_status\"=&gt;\"Completed\", \"charset\"=&gt;\"windows-1252\", \"address_zip\"=&gt;\"41669\", \"first_name\"=&gt;\"Martin\", \"mc_fee\"=&gt;\"0.70\", \"address_country_code\"=&gt;\"SE\", \"address_name\"=&gt;\"Martin removed\", \"notify_version\"=&gt;\"3.8\", \"custom\"=&gt;\"7173\", \"payer_status\"=&gt;\"verified\", \"business\"=&gt;\"removed@gmail.com\", \"address_country\"=&gt;\"Sweden\", \"address_city\"=&gt;\"G\\xF6teborg\", \"quantity\"=&gt;\"1\", \"verify_sign\"=&gt;\"removed\", \"payer_email\"=&gt;\"removed@hotmail.com\", \"txn_id\"=&gt;\"removed\", \"payment_type\"=&gt;\"instant\", \"last_name\"=&gt;\"removed\", \"address_state\"=&gt;\"\", \"receiver_email\"=&gt;\"removed@gmail.com\", \"payment_fee\"=&gt;\"0.70\", \"receiver_id\"=&gt;\"removed\", \"txn_type\"=&gt;\"web_accept\", \"item_name\"=&gt;\"removed\", \"mc_currency\"=&gt;\"USD\", \"item_number\"=&gt;\"13536\", \"residence_country\"=&gt;\"SE\", \"transaction_subject\"=&gt;\"\", \"payment_gross\"=&gt;\"10.15\", \"ipn_track_id\"=&gt;\"removed\", \"locale\"=&gt;\"en\"}\n\u00bb 30 Mar 2016 10:58:47.738 2016-03-30 17:58:47.446401+00:00 app web.1 - - Cart Load (2.2ms) SELECT \"carts\".* FROM \"carts\" WHERE \"carts\".\"id\" = $1 LIMIT 1 [[\"id\", 13536]]\n\u00bb 30 Mar 2016 10:58:47.738 2016-03-30 17:58:47.478086+00:00 app web.1 - -\n\u00bb 30 Mar 2016 10:58:47.738 2016-03-30 17:58:47.478097+00:00 app web.1 - -\n\u00bb 30 Mar 2016 10:58:47.738 2016-03-30 17:58:47.478098+00:00 app web.1 - - Exception caught, but rendered in pretty page\n\u00bb 30 Mar 2016 10:58:47.738 2016-03-30 17:58:47.478103+00:00 app web.1 - - #&lt;ArgumentError: invalid byte sequence in UTF-8&gt;\n\u00bb 30 Mar 2016 10:58:47.738 2016-03-30 17:58:47.478272+00:00 app web.1 - - /app/vendor/ruby-2.3.0/lib/ruby/2.3.0/psych/visitors/yaml_tree.rb:447:in `count'\n\u00bb 30 Mar 2016 10:58:47.738 2016-03-30 17:58:47.478274+00:00 app web.1 - - /app/vendor/ruby-2.3.0/lib/ruby/2.3.0/psych/visitors/yaml_tree.rb:447:in `binary?'\n\u00bb 30 Mar 2016 10:58:47.738 2016-03-30 17:58:47.478275+00:00 app web.1 - - /app/vendor/ruby-2.3.0/lib/ruby/2.3.0/psych/visitors/yaml_tree.rb:316:in `visit_String'\n\u00bb 30 Mar 2016 10:58:47.738 2016-03-30 17:58:47.478275+00:00 app web.1 - - /app/vendor/ruby-2.3.0/lib/ruby/2.3.0/psych/visitors/yaml_tree.rb:163:in `accept'\n\u00bb 30 Mar 2016 10:58:47.743 2016-03-30 17:58:47.478276+00:00 app web.1 - - /app/vendor/ruby-2.3.0/lib/ruby/2.3.0/psych/visitors/yaml_tree.rb:493:in `block in visit_hash_subclass'\n\u00bb 30 Mar 2016 10:58:47.743 2016-03-30 17:58:47.478278+00:00 app web.1 - - /app/vendor/bundle/ruby/2.3.0/gems/actionpack-4.2.5.1/lib/action_controller/metal/strong_parameters.rb:185:in `each_pair'\n\u00bb 30 Mar 2016 10:58:47.743 2016-03-30 17:58:47.478278+00:00 app web.1 - - /app/vendor/bundle/ruby/2.3.0/gems/actionpack-4.2.5.1/lib/action_controller/metal/strong_parameters.rb:185:in `each_pair'\n\u00bb 30 Mar 2016 10:58:47.743 2016-03-30 17:58:47.478279+00:00 app web.1 - - /app/vendor/ruby-2.3.0/lib/ruby/2.3.0/psych/visitors/yaml_tree.rb:491:in `visit_hash_subclass'\n\u00bb 30 Mar 2016 10:58:47.743 2016-03-30 17:58:47.478280+00:00 app web.1 - - /app/vendor/ruby-2.3.0/lib/ruby/2.3.0/psych/visitors/yaml_tree.rb:389:in `visit_Hash'\n\u00bb 30 Mar 2016 10:58:47.743 2016-03-30 17:58:47.478280+00:00 app web.1 - - /app/vendor/ruby-2.3.0/lib/ruby/2.3.0/psych/visitors/yaml_tree.rb:163:in `accept'\n\u00bb 30 Mar 2016 10:58:47.743 2016-03-30 17:58:47.478281+00:00 app web.1 - - /app/vendor/ruby-2.3.0/lib/ruby/2.3.0/psych/visitors/yaml_tree.rb:127:in `push'\n\u00bb 30 Mar 2016 10:58:47.748 2016-03-30 17:58:47.478282+00:00 app web.1 - - /app/vendor/ruby-2.3.0/lib/ruby/2.3.0/psych.rb:416:in `dump'\n\u00bb 30 Mar 2016 10:58:47.748 2016-03-30 17:58:47.478283+00:00 app web.1 - - /app/vendor/bundle/ruby/2.3.0/gems/activerecord-4.2.5.1/lib/active_record/coders/yaml_column.rb:20:in `dump'\n\u00bb 30 Mar 2016 10:58:47.748 2016-03-30 17:58:47.478283+00:00 app web.1 - - /app/vendor/bundle/ruby/2.3.0/gems/activerecord-4.2.5.1/lib/active_record/type/serialized.rb:26:in `type_cast_for_database'\n\u00bb 30 Mar 2016 10:58:47.748 2016-03-30 17:58:47.478284+00:00 app web.1 - - /app/vendor/bundle/ruby/2.3.0/gems/activerecord-4.2.5.1/lib/active_record/type/mutable.rb:5:in `type_cast_from_user'\n\u00bb 30 Mar 2016 10:58:47.748 2016-03-30 17:58:47.478285+00:00 app web.1 - - /app/vendor/bundle/ruby/2.3.0/gems/activerecord-4.2.5.1/lib/active_record/attribute.rb:110:in `type_cast'\n\u00bb 30 Mar 2016 10:58:47.748 2016-03-30 17:58:47.478286+00:00 app web.1 - - /app/vendor/bundle/ruby/2.3.0/gems/activerecord-4.2.5.1/lib/active_record/attribute.rb:42:in `original_value'\n\u00bb 30 Mar 2016 10:58:47.748 2016-03-30 17:58:47.478286+00:00 app web.1 - - /app/vendor/bundle/ruby/2.3.0/gems/activerecord-4.2.5.1/lib/active_record/attribute.rb:37:in `value'\n\u00bb 30 Mar 2016 10:58:47.752 2016-03-30 17:58:47.478287+00:00 app web.1 - - /app/vendor/bundle/ruby/2.3.0/gems/activerecord-4.2.5.1/lib/active_record/attribute.rb:50:in `changed_from?'\n\u00bb 30 Mar 2016 10:58:47.752 2016-03-30 17:58:47.478288+00:00 app web.1 - - /app/vendor/bundle/ruby/2.3.0/gems/activerecord-4.2.5.1/lib/active_record/attribute_methods/dirty.rb:142:in `_field_changed?'\n\u00bb 30 Mar 2016 10:58:47.752 2016-03-30 17:58:47.478289+00:00 app web.1 - - /app/vendor/bundle/ruby/2.3.0/gems/activerecord-4.2.5.1/lib/active_record/attribute_methods/dirty.rb:115:in `save_changed_attribute'\n\u00bb 30 Mar 2016 10:58:47.752 2016-03-30 17:58:47.478289+00:00 app web.1 - - /app/vendor/bundle/ruby/2.3.0/gems/activerecord-4.2.5.1/lib/active_record/attribute_methods/dirty.rb:98:in `write_attribute'\n\u00bb 30 Mar 2016 10:58:47.752 2016-03-30 17:58:47.478290+00:00 app web.1 - - /app/vendor/bundle/ruby/2.3.0/gems/activerecord-4.2.5.1/lib/active_record/attribute_methods.rb:50:in `__temp__07162716d637'\n\u00bb 30 Mar 2016 10:58:47.752 2016-03-30 17:58:47.478291+00:00 app web.1 - - /app/app/models/paypal_ipn.rb:20:in `params_info='\n\u00bb 30 Mar 2016 10:58:47.752 2016-03-30 17:58:47.478291+00:00 app web.1 - - /app/vendor/bundle/ruby/2.3.0/gems/activerecord-4.2.5.1/lib/active_record/attribute_assignment.rb:54:in `public_send'\n\u00bb 30 Mar 2016 10:58:47.762 2016-03-30 17:58:47.478292+00:00 app web.1 - - /app/vendor/bundle/ruby/2.3.0/gems/activerecord-4.2.5.1/lib/active_record/attribute_assignment.rb:54:in `_assign_attribute'\n\u00bb 30 Mar 2016 10:58:47.762 2016-03-30 17:58:47.478293+00:00 app web.1 - - /app/vendor/bundle/ruby/2.3.0/gems/activerecord-4.2.5.1/lib/active_record/attribute_assignment.rb:65:in `block in assign_nested_parameter_attributes'\n\u00bb 30 Mar 2016 10:58:47.762 2016-03-30 17:58:47.478293+00:00 app web.1 - - /app/vendor/bundle/ruby/2.3.0/gems/activerecord-4.2.5.1/lib/active_record/attribute_assignment.rb:65:in `each'\n\u00bb 30 Mar 2016 10:58:47.762 2016-03-30 17:58:47.478294+00:00 app web.1 - - /app/vendor/bundle/ruby/2.3.0/gems/activerecord-4.2.5.1/lib/active_record/attribute_assignment.rb:65:in `assign_nested_parameter_attributes'\n\u00bb 30 Mar 2016 10:58:47.762 2016-03-30 17:58:47.478295+00:00 app web.1 - - /app/vendor/bundle/ruby/2.3.0/gems/activerecord-4.2.5.1/lib/active_record/attribute_assignment.rb:45:in `assign_attributes'\n\u00bb 30 Mar 2016 10:58:47.762 2016-03-30 17:58:47.485285+00:00 app web.1 - - Rendered main/message.html.haml within layouts/application (1.4ms)\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "facebook", "facebook-graph-api", "omniauth"], "comments": [{"owner": {"reputation": 4662, "user_id": 2456549, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/9Uz71.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/2456549/justin"}, "edited": false, "score": 0, "creation_date": 1459370022, "post_id": 36319108, "comment_id": 60261625, "body": "Are timezones getting saved correctly? From the <a href=\"https://github.com/mkdynamic/omniauth-facebook#auth-hash\" rel=\"nofollow noreferrer\">auth hash</a> that Facebook provides, it looks like the hash structure is different. -&gt; <code>auth.extra.raw_info.timezone</code>"}, {"owner": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "reply_to_user": {"reputation": 4662, "user_id": 2456549, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/9Uz71.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/2456549/justin"}, "edited": false, "score": 0, "creation_date": 1459370096, "post_id": 36319108, "comment_id": 60261670, "body": "Timezone isn&#39;t getting saved at all. Getting error I mentioned. I&#39;ll give that a try and let you know how it goes :] @JustinLicata"}, {"owner": {"reputation": 4662, "user_id": 2456549, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/9Uz71.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/2456549/justin"}, "edited": false, "score": 0, "creation_date": 1459370218, "post_id": 36319108, "comment_id": 60261738, "body": "However, that error also looks like you don&#39;t have a timezone column on the users table."}, {"owner": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "reply_to_user": {"reputation": 4662, "user_id": 2456549, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/9Uz71.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/2456549/justin"}, "edited": false, "score": 0, "creation_date": 1459371109, "post_id": 36319108, "comment_id": 60262255, "body": "No you were right @JustinLicata. It worked :] You mind providing an answer and maybe how I can turn float timezone, like <code>timezone: -4.0</code> into <code>time_zone_select</code>? I know that&#39;s beyond scope of question so no problem if not. Just trying to figure that part out now :]"}, {"owner": {"reputation": 4662, "user_id": 2456549, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/9Uz71.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/2456549/justin"}, "edited": false, "score": 1, "creation_date": 1459371238, "post_id": 36319108, "comment_id": 60262331, "body": "If you wouldn&#39;t mind, ask another question and I&#39;ll take a look at it. It&#39;ll 1) need more information to solve and 2) you could get better answers."}], "answers": [{"comments": [{"owner": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "edited": false, "score": 0, "creation_date": 1459371905, "post_id": 36319508, "comment_id": 60262719, "body": "I continued the conversation over here if you want to join :] <a href=\"http://stackoverflow.com/questions/36319711/how-can-i-convert-float-number-to-timezone\" title=\"how can i convert float number to timezone\">stackoverflow.com/questions/36319711/&hellip;</a>"}], "tags": [], "owner": {"reputation": 4662, "user_id": 2456549, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/9Uz71.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/2456549/justin"}, "is_accepted": true, "score": 1, "last_activity_date": 1459371252, "creation_date": 1459371252, "answer_id": 36319508, "question_id": 36319108, "link": "https://stackoverflow.com/questions/36319108/how-to-get-timezone-from-facebook-with-omniauth/36319508#36319508", "title": "How to get timezone from facebook with omniauth?", "body": "<p>It looks like the auth hash provided by omniauth has a bit of a different structure than what you are using. Try this.</p>\n\n<pre><code>user.timezone = auth.extra.raw_info.timezone\n</code></pre>\n\n<p><a href=\"https://github.com/mkdynamic/omniauth-facebook#auth-hash\" rel=\"nofollow\">Here is the hash structure</a> that is available for Facebook omniauth.</p>\n"}], "owner": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 187, "favorite_count": 0, "accepted_answer_id": 36319508, "answer_count": 1, "score": 0, "last_activity_date": 1459371252, "creation_date": 1459369799, "question_id": 36319108, "link": "https://stackoverflow.com/questions/36319108/how-to-get-timezone-from-facebook-with-omniauth", "title": "How to get timezone from facebook with omniauth?", "body": "<p>Everything in user.rb is passing correctly upon sign up except timezone. I can't figure out why I'm getting this <strong>error</strong> upon a user attempting to sign in:</p>\n\n<pre><code>2016-03-30T20:13:38.083469+00:00 app[web.1]:   NoMethodError (undefined method `timezone=' for #&lt;User:0x007fdd2976e338&gt;):\n2016-03-30T20:13:38.083470+00:00 app[web.1]:   app/models/user.rb:72:in `block in from_omniauth'\n2016-03-30T20:13:38.083471+00:00 app[web.1]:   app/models/user.rb:66:in `tap'\n2016-03-30T20:13:38.083471+00:00 app[web.1]:   app/models/user.rb:66:in `from_omniauth'\n2016-03-30T20:13:38.083472+00:00 app[web.1]:   app/controllers/sessions_controller.rb:7:in `facebook'\n</code></pre>\n\n<p><strong>user.rb</strong></p>\n\n<pre><code>  def self.from_omniauth(auth)\n     # Sets 60 day auth token\n     oauth = Koala::Facebook::OAuth.new(\"1540371223342976229929\", \"ee917abf2e8f1c98274cd323fa1234ebb1346f4\") # Fake Numbers\n     new_access_info = oauth.exchange_access_token_info auth.credentials.token\n\n     new_access_token = new_access_info[\"access_token\"]\n     new_access_expires_at = DateTime.now + new_access_info[\"expires\"].to_i.seconds\n\n    where(provider: auth.provider, uid: auth.uid).first_or_initialize.tap do |user|\n      user.provider = auth.provider\n      user.image = auth.info.image\n      user.uid = auth.uid\n      user.name = auth.info.first_name\n      user.last_name = auth.info.last_name\n      user.timezone = auth.info.timezone\n      user.email = auth.info.email unless user.email.present?\n      user.oauth_token = new_access_token # auth.credentials.token &lt;- your old token. Not needed anymore.\n      user.oauth_expires_at = Time.at(auth.credentials.expires_at)\n      user.password = (0...8).map { (65 + rand(26)).chr }.join\n      user.activated = true\n      user.save!\n    end\n  end\n</code></pre>\n\n<p><strong>config/omniauth.rb</strong></p>\n\n<pre><code>Rails.application.config.middleware.use OmniAuth::Builder do\n  provider :facebook, \"1540324372976229929\", \"ee917abf2e8423f1c98274cdfa234234ebb1346f4\", {info_fields: 'email, first_name, last_name, timezone'}\nend\n</code></pre>\n\n<p><code>t.float    \"timezone\"</code> <a href=\"https://developers.facebook.com/docs/graph-api/reference/user\" rel=\"nofollow\">Facebook docs</a> says timezone should be <code>float</code>.</p>\n"}, {"tags": ["ruby", "rubygems", "bundler"], "comments": [{"owner": {"reputation": 79161, "user_id": 1064226, "user_type": "registered", "profile_image": "https://graph.facebook.com/36912842/picture?type=large", "display_name": "Frederick Cheung", "link": "https://stackoverflow.com/users/1064226/frederick-cheung"}, "edited": false, "score": 0, "creation_date": 1459369341, "post_id": 36318351, "comment_id": 60261245, "body": "I don&#39;t think bundler has a concept of options common to multiple gems"}], "answers": [{"comments": [{"owner": {"reputation": 18703, "user_id": 3951782, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/5zDXr.png?s=128&g=1", "display_name": "sudo bangbang", "link": "https://stackoverflow.com/users/3951782/sudo-bangbang"}, "edited": false, "score": 1, "creation_date": 1459395215, "post_id": 36318882, "comment_id": 60270178, "body": "Here also I&#39;ll have to specify flags for each gems. Also can I put something in Gemfile to tell bundler these preferences?"}], "tags": [], "owner": {"reputation": 16587, "user_id": 177053, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f6c516626d381a1ea383cedd1799486?s=128&d=identicon&r=PG", "display_name": "Vasfed", "link": "https://stackoverflow.com/users/177053/vasfed"}, "is_accepted": false, "score": 0, "last_activity_date": 1459368990, "creation_date": 1459368990, "answer_id": 36318882, "question_id": 36318351, "link": "https://stackoverflow.com/questions/36318351/how-to-set-bundler-config-to-use-system-libraries-whenever-necessary/36318882#36318882", "title": "how to set bundler config to use system libraries whenever necessary", "body": "<p><code>bundle config</code> by default acts as global config for machine you run it - stores data in <code>~/.bundle/config</code></p>\n\n<p>You may try to use <code>--local</code>, which stores in <code>your_app_dir/.bundle/config</code> and then commit the file or create it on deploy. I'd go with the latter</p>\n"}], "owner": {"reputation": 18703, "user_id": 3951782, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/5zDXr.png?s=128&g=1", "display_name": "sudo bangbang", "link": "https://stackoverflow.com/users/3951782/sudo-bangbang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 826, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1590441394, "creation_date": 1459367292, "last_edit_date": 1590441394, "question_id": 36318351, "link": "https://stackoverflow.com/questions/36318351/how-to-set-bundler-config-to-use-system-libraries-whenever-necessary", "title": "how to set bundler config to use system libraries whenever necessary", "body": "<p>I'm writing some scripts to set up development environment for a ruby app.<br>\nIn my <code>Gemfile</code>, I have gems dependent on <a href=\"https://rubygems.org/gems/nokogiri/versions/1.6.7.2\" rel=\"nofollow noreferrer\">nokogiri</a>, <a href=\"https://rubygems.org/gems/libv8/versions/4.5.95.5\" rel=\"nofollow noreferrer\">libv8</a> etc.</p>\n\n<p>On running <code>bundle install</code> on different machines, it fails with messages like following</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>Gem::Installer::ExtensionBuildError: ERROR: Failed to build gem native extension.\n</code></pre>\n\n<p>I now have this in my script to build to build native extension using system libraries.</p>\n\n<pre class=\"lang-sh prettyprint-override\"><code>bundle config build.nokogiri --use-system-libraries\nbundle install\n</code></pre>\n\n<p>I can set configurations in bundler for each gem (<code>bcrypt-ruby</code>, <code>libv8</code> etc)  a similar way.</p>\n\n<p>Is there a better way to do this? Like set a flag in bundler so that bundle understand details like using system libraries and bundle install works on all platforms </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "security", "devise", "ip"], "answers": [{"comments": [{"owner": {"reputation": 667, "user_id": 1745190, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c432b829ab6f01f221e56a3586b8d296?s=128&d=identicon&r=PG", "display_name": "updater", "link": "https://stackoverflow.com/users/1745190/updater"}, "edited": false, "score": 0, "creation_date": 1459368750, "post_id": 36317975, "comment_id": 60260901, "body": "This tutorial is locking account,not secured for brute force attack. Example: I have 2 accounts in db and I know emails. I can attack first email to block account and I can attack second account x times to block. So query is created to db to find account. But problem above should be solved by block any request to SessionsController for IP"}], "tags": [], "owner": {"reputation": 136, "user_id": 2417168, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bda0cc2cff1b273ab45b4298f42fb2bb?s=128&d=identicon&r=PG", "display_name": "lalit.sethi143", "link": "https://stackoverflow.com/users/2417168/lalit-sethi143"}, "is_accepted": false, "score": 0, "last_activity_date": 1459366165, "creation_date": 1459366165, "answer_id": 36317975, "question_id": 36317824, "link": "https://stackoverflow.com/questions/36317824/how-to-get-user-ip-when-user-login-with-devise/36317975#36317975", "title": "How to get user ip, when user login with devise", "body": "<p>This  <a href=\"https://hakiri.io/blog/rails-login-security\" rel=\"nofollow\">Login Security</a> link will may help you.</p>\n\n<p>Here you need to Devise :lockable module</p>\n"}], "owner": {"reputation": 667, "user_id": 1745190, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c432b829ab6f01f221e56a3586b8d296?s=128&d=identicon&r=PG", "display_name": "updater", "link": "https://stackoverflow.com/users/1745190/updater"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 131, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1459366165, "creation_date": 1459365600, "question_id": 36317824, "link": "https://stackoverflow.com/questions/36317824/how-to-get-user-ip-when-user-login-with-devise", "title": "How to get user ip, when user login with devise", "body": "<p>I am working with security in my app. How Can I show recaptcha in devise login form if user login x times with failure ? I think the best solution is checking IP and set recaptcha after x times. There's some tutorial or something for Rails ?</p>\n"}, {"tags": ["ruby", "rbenv"], "comments": [{"owner": {"reputation": 18703, "user_id": 3951782, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/5zDXr.png?s=128&g=1", "display_name": "sudo bangbang", "link": "https://stackoverflow.com/users/3951782/sudo-bangbang"}, "edited": false, "score": 0, "creation_date": 1459367725, "post_id": 36317379, "comment_id": 60260334, "body": "What is your ruby version? What does <code>backup version</code> print?"}, {"owner": {"reputation": 16587, "user_id": 177053, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f6c516626d381a1ea383cedd1799486?s=128&d=identicon&r=PG", "display_name": "Vasfed", "link": "https://stackoverflow.com/users/177053/vasfed"}, "edited": false, "score": 0, "creation_date": 1459372045, "post_id": 36317379, "comment_id": 60262795, "body": "How ruby is installed (rvm/rbenv/some packages/etc)? What is your <code>echo $PATH</code>?"}, {"owner": {"reputation": 1336, "user_id": 3908551, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/oYCdi.png?s=128&g=1", "display_name": "stoebelj", "link": "https://stackoverflow.com/users/3908551/stoebelj"}, "edited": false, "score": 0, "creation_date": 1459419773, "post_id": 36317379, "comment_id": 60283359, "body": "answers given in update."}], "owner": {"reputation": 1336, "user_id": 3908551, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/oYCdi.png?s=128&g=1", "display_name": "stoebelj", "link": "https://stackoverflow.com/users/3908551/stoebelj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 50, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1459419751, "creation_date": 1459364131, "last_edit_date": 1459419751, "question_id": 36317379, "link": "https://stackoverflow.com/questions/36317379/backup-gem-confused-with-openafs-client", "title": "Backup gem confused with openafs-client", "body": "<p>I am following a <a href=\"http://backup.github.io/backup/v4/installation/\" rel=\"nofollow\">walk-through</a> to get started with the Ruby Backup gem.</p>\n\n<p>I ran <code>gem install backup</code> which worked fine, but then when I tried to run:</p>\n\n<pre><code>backup generate:model --trigger my_backup \\\n--archives --storages='local' --compressor='gzip' --notifiers='mail'\n</code></pre>\n\n<p>and I get the error message:</p>\n\n<pre><code>The program 'backup' is currently not installed. You can install it by typing:\nsudo apt-get install openafs-client\n</code></pre>\n\n<p>I'm using Ubuntu 14.04.</p>\n\n<p>Any idea what my problem is or how to fix it?</p>\n\n<p>UPDATE:\n - Ruby Version: <code>ruby 2.1.6p336 (2015-04-13 revision 50298) [x86_64-linux]</code>\n - Using rbenv</p>\n\n<pre><code>echo $PATH\n/usr/local/heroku/bin:/home/stoebelj/.rbenv/plugins/ruby-build/bin:/home/stoebelj/.rbenv/shims:/home/stoebelj/.rbenv/bin:/home/stoebelj/.rbenv/plugins/ruby-build/bin:/home/stoebelj/.rbenv/shims:/home/stoebelj/.rbenv/bin:/home/stoebelj/.rbenv/plugins/ruby-build/bin:/home/stoebelj/.rbenv/shims:/home/stoebelj/.rbenv/bin:/home/stoebelj/.rbenv/plugins/ruby-build/bin:/home/stoebelj/.rbenv/shims:/home/stoebelj/.rbenv/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/usr/lib/jvm/java-8-oracle/bin:/usr/lib/jvm/java-8-oracle/db/bin:/usr/lib/jvm/java-8-oracle/jre/bin:/home/stoebelj/.rvm/bin:/home/stoebelj/.rvm/bin\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "edited": false, "score": 0, "creation_date": 1459367372, "post_id": 36317319, "comment_id": 60260135, "body": "Show us the full log please from the server, what you provided doesn&#39;t add up."}, {"owner": {"reputation": 5237, "user_id": 2325924, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/XSXrT.jpg?s=128&g=1", "display_name": "7urkm3n", "link": "https://stackoverflow.com/users/2325924/7urkm3n"}, "reply_to_user": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "edited": false, "score": 0, "creation_date": 1459369355, "post_id": 36317319, "comment_id": 60261253, "body": "@Anthony I have fixed, i had problem in the relation table."}], "owner": {"reputation": 5237, "user_id": 2325924, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/XSXrT.jpg?s=128&g=1", "display_name": "7urkm3n", "link": "https://stackoverflow.com/users/2325924/7urkm3n"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 370, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1459369409, "creation_date": 1459363909, "last_edit_date": 1459369409, "question_id": 36317319, "link": "https://stackoverflow.com/questions/36317319/rails-routes-constraint-subdomain-and-namespace-api", "title": "rails routes, constraint subdomain and namespace api", "body": "<p>I am having an issue with Rails 4 routes.</p>\n\n<p>When i go to <code>http://localhost:3000/api/courses</code>, it tries to render <code>admin/videos_admin</code>, and getting this error. But my admin panel works fine.</p>\n\n<pre><code>No route matches {:action=&gt;\"show\", :controller=&gt;\"admin/videos_admin\"}\nmissing required keys: [:id]\n</code></pre>\n\n<p>Routes:</p>\n\n<pre><code>constraints subdomain: 'admin' do\n    resources :videos, controller: 'admin/videos_admin'\nend\n\nnamespace :api, defaults: { format: :json } do    \n    resources :courses, controller: 'courses'\nend\n</code></pre>\n\n<p>also, if I do by this way totally works fine everything.</p>\n\n<pre><code>constraints subdomain: 'admin' do\n    #resources :videos, controller: 'admin/videos_admin'\n\n    get 'videos' =&gt; 'admin/videos_admin#index'\n    get 'videos/:id' =&gt; 'admin/videos_admin#show'\nend\n</code></pre>\n\n<p>I have tried many options, none of them didnt work. \nThank You !</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec", "factory-bot"], "comments": [{"owner": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "edited": false, "score": 1, "creation_date": 1459367459, "post_id": 36317152, "comment_id": 60260175, "body": "it&#39;s not factory girl here, it&#39;s rspec&#39;s <code>let</code> - if you call <code>let!</code> it forces that object be created/persisted."}, {"owner": {"reputation": 1501, "user_id": 235027, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/01494c5733d673062b89fd6642da1955?s=128&d=identicon&r=PG", "display_name": "John M Naglick", "link": "https://stackoverflow.com/users/235027/john-m-naglick"}, "reply_to_user": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "edited": false, "score": 0, "creation_date": 1459370310, "post_id": 36317152, "comment_id": 60261780, "body": "@Anthony wow, thank you! that does indeed fix my problem. could you post your reply as a real answer so that I can accept it?  I wasn&#39;t thinking about how things in let() aren&#39;t invoked until they are referenced. So, I was operating under the false impression that create() would always immediately create the object, despite being in a let(). So the reason my code doesn&#39;t work with let() is because the user object is not created until after the route.call(), at which point the controller action has already ran, meaning find_by_uuid! always finds nothing."}], "answers": [{"tags": [], "owner": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "is_accepted": true, "score": 2, "last_activity_date": 1459370808, "creation_date": 1459370808, "answer_id": 36319374, "question_id": 36317152, "link": "https://stackoverflow.com/questions/36317152/factorygirl-attribute-set-in-aftercreate-doesnt-persist-until-referenced/36319374#36319374", "title": "FactoryGirl attribute set in after(:create) doesnt persist until referenced?", "body": "<p>Your issue has less to do with FactoryGirl and more to do with <code>let</code> being lazily evaluated. </p>\n\n<p><a href=\"https://relishapp.com/rspec/rspec-core/docs/helper-methods/let-and-let\" rel=\"nofollow\">From the docs</a>:</p>\n\n<blockquote>\n  <p>Use let to define a memoized helper method. The value will be cached across\n  multiple calls in the same example but not across examples.</p>\n  \n  <p>Note that let is lazy-evaluated: it is not evaluated until the first time\n  the method it defines is invoked. You can use let! to force the method's\n  invocation before each example.</p>\n</blockquote>\n\n<p>Since your test doesn't invoke the <code>user</code> object until the expectation there is nothing created.  To force rspec to load object, you can use <code>let!</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 1501, "user_id": 235027, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/01494c5733d673062b89fd6642da1955?s=128&d=identicon&r=PG", "display_name": "John M Naglick", "link": "https://stackoverflow.com/users/235027/john-m-naglick"}, "edited": false, "score": 0, "creation_date": 1459399165, "post_id": 36319507, "comment_id": 60271339, "body": "Thanks for the comments. I&#39;ve been meaning to get around to accounting for the slim possibility of a repeat uuid being generated and I really like how you coded that with the begin-end-while (didn&#39;t even know that syntax worked, tbqh)."}], "tags": [], "owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "is_accepted": false, "score": 0, "last_activity_date": 1459371251, "creation_date": 1459371251, "answer_id": 36319507, "question_id": 36317152, "link": "https://stackoverflow.com/questions/36317152/factorygirl-attribute-set-in-aftercreate-doesnt-persist-until-referenced/36319507#36319507", "title": "FactoryGirl attribute set in after(:create) doesnt persist until referenced?", "body": "<p>Instead of using the <code>before_validation</code> callback you should be using <code>after_initialize</code>. That way the callback is fired even before <code>.valid?</code> is called <a href=\"http://api.rubyonrails.org/classes/ActiveRecord/Callbacks.html\" rel=\"nofollow\">in the model lifecycle</a>.</p>\n\n<pre><code>class User &lt; ActiveRecord::Base\n    before_initialization :set_uuid!, on: :create, if: :set_uuid?\n    validates             :uuid, presence: true, uniqueness: true\n\n    private\n\n    def set_uuid!\n        # we should also check that the UUID \n        # does not actually previously exist in the DB \n        begin\n           self.uuid = SecureRandom.uuid\n        end while User.where(uuid: self.uuid).any?\n    end\n\n    def set_uuid?\n        self.uuid.nil?\n    end\nend\n</code></pre>\n\n<p>Although the chance of generating the same hash twice with <code>SecureRandom.uuid</code> is extremely slim it is possible due to the pigeonhole principle. If you maxed out in the bad luck lottery this would simply generate a new UUID. </p>\n\n<p>Since the callback fires before validation occurs the actual logic here should be completely self contained in the model. Therefore there is no need to setup a callback in FactoryGirl.</p>\n\n<p>Instead you would setup your spec like so:</p>\n\n<pre><code>let!(:user) { create(:user) }\n\nit 'adds user with uuid to @foo' do\n   post :add_user, user_id: user.uuid, { baz: 3 }\nend\n</code></pre>\n"}], "owner": {"reputation": 1501, "user_id": 235027, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/01494c5733d673062b89fd6642da1955?s=128&d=identicon&r=PG", "display_name": "John M Naglick", "link": "https://stackoverflow.com/users/235027/john-m-naglick"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 200, "favorite_count": 0, "accepted_answer_id": 36319374, "answer_count": 2, "score": 1, "last_activity_date": 1518696372, "creation_date": 1459363338, "last_edit_date": 1518696372, "question_id": 36317152, "link": "https://stackoverflow.com/questions/36317152/factorygirl-attribute-set-in-aftercreate-doesnt-persist-until-referenced", "title": "FactoryGirl attribute set in after(:create) doesnt persist until referenced?", "body": "<p>Sorry for the vague title, there are a lot of moving parts to this problem so I think it will only be clear after seeing my code. I'm <em>fairly</em> sure I know what's going on here and am looking for feedback on how to do it differently:</p>\n\n<p>I have a User model that sets a uuid attr via an ActiveRecord callback (this is actually in a \"SetsUuid\" concern, but the effect is this):</p>\n\n<pre><code>class User &lt; ActiveRecord::Base\n    before_validation     :set_uuid, on: :create\n    validates             :uuid, presence: true, uniqueness: true\n\n    private\n\n    def set_uuid\n      self.uuid = SecureRandom.uuid\n    end\nend\n</code></pre>\n\n<p>I am writing a functional rspec controller test for a \"foo/add_user\" endpoint. The controller code looks like this (there's some other stuff like error-handling and @foo and @params being set by filters, but you get the point. I know this is all working.)</p>\n\n<pre><code>class FoosController &lt; ApplicationController\n    def add_user\n        @foo.users &lt;&lt; User.find_by_uuid!(@params[:user_id])\n        render json: {\n            status: 'awesome controller great job'\n        }\n    end\nend\n</code></pre>\n\n<p>I am writing a functional rspec controller test for the case \"foo/add_user adds user to foo\". My test looks roughly this (again, leaving stuff out here, but the point should be obvious, and I know it's all working as intended. Also, just to preempt the comments: no, I'm not actually 'hardcoding' the \"user-uuid\" string value in the test, this is just for the example)</p>\n\n<pre><code>RSpec.describe FoosController, type: :controller do\n    describe '#add_user' do\n        it_behaves_like 'has @foo' do\n            it_behaves_like 'has @params', {user_id: 'user-uuid'} do\n                context 'user with uuid exists' do\n                    let(:user) { create(:user_with_uuid, uuid: params[:user_id]) } # params is set by the 'has @params' shared_context\n\n                    it 'adds user with uuid to @foo' do\n                        route.call() # route is defined by a previous let that I truncated from this example code\n                        expect(foo.users).to include(user) # foo is set by the 'has @foo' shared_context\n                    end\n                end\n            end\n        end\n    end\nend\n</code></pre>\n\n<p>And here is my user factory (I've tried setting the uuid in several different ways, but my problem (that I go into below) is always the same. I think this way (with traits) is the most elegant, so that's what I'm putting here):</p>\n\n<pre><code>FactoryGirl.define do\n  factory :user do\n    email         { |n| \"user-#{n}@example.com\" }\n    first_name    'john'\n    last_name     'naglick'\n    phone         '718-555-1234'\n\n    trait :with_uuid do\n      after(:create) do |user, eval|\n        user.update!(uuid: eval.uuid)\n      end\n    end\n\n    factory :user_with_uuid, traits: [:with_uuid]\n  end\nend\n</code></pre>\n\n<p>Finally, <strong>The problem</strong>: </p>\n\n<p>This only works if I reference user.uuid before route.call() in the spec. </p>\n\n<p>As in, if I simply add the line \"user.uuid\" before route.call(), everything works as intended. </p>\n\n<p>If I don't have that line, the spec fails because the user's uuid <em>doesn't actually get updated by the after(:create) callback in the trait in the factory</em>, and thus the User.find_by_uuid! line in the controller does not find the user.</p>\n\n<p>And just to preempt another comment: <strong>I'm NOT asking how to re-write this spec so that it works like I want.</strong> I already know a myriad of ways to do this (the easiest and most obvious being to manually update user.uuid in the spec itself and forget about setting the uuid in the factory altogether). The thing I'm asking here is <strong>why is factorygirl behaving like this?</strong> </p>\n\n<p>I know it has something to do with lazy-attributes (obvious by the fact it magically works if I have a line evaluating user.uuid), but why? And, even better: is there some way I can do what I want here (setting the uuid in the factory) and have everything work like I intend? I think it's a rather elegant looking use of rspec/factorygirl, so I'd really like it to work like this.</p>\n\n<p>Thanks for reading my long question! Very much appreciate any insight</p>\n"}, {"tags": ["html", "ruby-on-rails", "ruby", "nokogiri"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1459382684, "post_id": 36316863, "comment_id": 60266973, "body": "Please don&#39;t use &quot;Update&quot; or &quot;Edit&quot; tags in your text. Instead, incorporate the new information into the body where it should have been in the first place. Also, note that Stack Overflow isn&#39;t a discussion forum. Every question stands alone, so asking one thing, then modifying it and asking another breaks the way SO works. If there are two very related questions then it&#39;s OK to ask them in the initial question, but be very careful, and sensitive to, modifying questions. SO isn&#39;t just about answering your question, it&#39;s about answering the question for future searchers too."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1459382987, "post_id": 36316863, "comment_id": 60267070, "body": "Please read &quot;<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>&quot;. When asking, in addition to the code in question, we need to see the minimal input that demonstrates the problem, and the expected output. Currently we have to imagine what you&#39;re trying to get."}, {"owner": {"reputation": 3425, "user_id": 1493116, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/9371f372f90b7c283579b097c67b9cd2?s=128&d=identicon&r=PG", "display_name": "LewlSauce", "link": "https://stackoverflow.com/users/1493116/lewlsauce"}, "reply_to_user": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1459383051, "post_id": 36316863, "comment_id": 60267089, "body": "Sounds great. I&#39;ll just open up another question. Thanks"}], "answers": [{"comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 1, "creation_date": 1459372967, "post_id": 36317066, "comment_id": 60263276, "body": "Nokogiri can&#39;t treat the <code>&lt;ul&gt;</code> tags as if they&#39;re inside <code>&lt;p&gt;</code>, because they&#39;re not. You could make them be inside with Nokogiri, then continue processing the document; That&#39;d technically be an invalid document but HTML is &quot;liberal&quot; about that stuff. Using an array of selectors works, though it&#39;ll return all the <code>&lt;p&gt;</code> tags, then all the <code>&lt;ul&gt;</code> tags, without respecting their original order."}, {"owner": {"reputation": 3425, "user_id": 1493116, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/9371f372f90b7c283579b097c67b9cd2?s=128&d=identicon&r=PG", "display_name": "LewlSauce", "link": "https://stackoverflow.com/users/1493116/lewlsauce"}, "reply_to_user": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1459373100, "post_id": 36317066, "comment_id": 60263345, "body": "Thanks for the clarification. I believe my original question may have been a little misleading, treating it as <code>p</code>. I should have stated that I wanted it to split up the text like <code>p</code> was as well. However, <code>html.xpath(&quot;&#47;&#47;p&quot;, &quot;&#47;&#47;u&quot;)</code> does exactly that and solved the issue.  Thanks again!"}], "tags": [], "owner": {"reputation": 3425, "user_id": 1493116, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/9371f372f90b7c283579b097c67b9cd2?s=128&d=identicon&r=PG", "display_name": "LewlSauce", "link": "https://stackoverflow.com/users/1493116/lewlsauce"}, "is_accepted": false, "score": 2, "last_activity_date": 1459363095, "creation_date": 1459363095, "answer_id": 36317066, "question_id": 36316863, "link": "https://stackoverflow.com/questions/36316863/can-nokogiri-treat-unordered-lists-as-paragraphs/36317066#36317066", "title": "Can Nokogiri treat unordered lists as paragraphs?", "body": "<p>Figured this out just toying around with some random syntax. I was able to solve this by using \n<code>html.xpath(\"//p\", \"//ul\")</code> in the example above.</p>\n"}, {"comments": [{"owner": {"reputation": 3425, "user_id": 1493116, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/9371f372f90b7c283579b097c67b9cd2?s=128&d=identicon&r=PG", "display_name": "LewlSauce", "link": "https://stackoverflow.com/users/1493116/lewlsauce"}, "edited": false, "score": 0, "creation_date": 1459378275, "post_id": 36320235, "comment_id": 60265512, "body": "Thanks. My answer that I provided actually didn&#39;t do it in order, but using your example does. Thanks a lot!!"}, {"owner": {"reputation": 3425, "user_id": 1493116, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/9371f372f90b7c283579b097c67b9cd2?s=128&d=identicon&r=PG", "display_name": "LewlSauce", "link": "https://stackoverflow.com/users/1493116/lewlsauce"}, "edited": false, "score": 0, "creation_date": 1459379935, "post_id": 36320235, "comment_id": 60266075, "body": "Hey, quick question. For some reason this is getting really bad when it comes to nested unordered lists. So for example <code>&lt;ul&gt;&lt;li&gt;testing&lt;ul&gt;&lt;li&gt;another test&lt;&#47;li&gt;&lt;&#47;ul&gt;&lt;&#47;li&gt;&lt;&#47;ul&gt;</code> gets a little screwed up. While it breaks down the main <code>ul</code> it starts appending the nested <code>ul</code> at the end of the first <code>ul</code> as if it&#39;s a completely separate list."}], "tags": [], "owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "is_accepted": false, "score": 1, "last_activity_date": 1459374029, "creation_date": 1459374029, "answer_id": 36320235, "question_id": 36316863, "link": "https://stackoverflow.com/questions/36316863/can-nokogiri-treat-unordered-lists-as-paragraphs/36320235#36320235", "title": "Can Nokogiri treat unordered lists as paragraphs?", "body": "<p>You can do two different things:</p>\n\n<pre><code>require 'nokogiri'\n\ndoc = Nokogiri::HTML(&lt;&lt;EOT)\n&lt;!DOCTYPE html PUBLIC \"-//W3C//DTD HTML 4.0 Transitional//EN\" \"http://www.w3.org/TR/REC-html40/loose.dtd\"&gt;\n&lt;html&gt;&lt;body&gt;\n&lt;p&gt;p1&lt;/p&gt;\n&lt;p&gt;p2&lt;/p&gt;\n&lt;ul&gt;\n&lt;li&gt;l1&lt;/li&gt;\n&lt;/ul&gt;\n&lt;p&gt;p3&lt;/p&gt;\n&lt;/body&gt;&lt;/html&gt;\nEOT\n\ndoc.search('p', 'ul').map(&amp;:to_html)\n# =&gt; [\"&lt;p&gt;p1&lt;/p&gt;\", \"&lt;p&gt;p2&lt;/p&gt;\", \"&lt;p&gt;p3&lt;/p&gt;\", \"&lt;ul&gt;\\n&lt;li&gt;l1&lt;/li&gt;\\n&lt;/ul&gt;\"]\n</code></pre>\n\n<p>This uses CSS, which finds either type of node, first looking for <code>&lt;p&gt;</code> tags, <em>then</em> looking for <code>&lt;ul&gt;</code> tags.</p>\n\n<p>Using XPath:</p>\n\n<pre><code>doc.search('//p | //ul').map(&amp;:to_html)\n# =&gt; [\"&lt;p&gt;p1&lt;/p&gt;\", \"&lt;p&gt;p2&lt;/p&gt;\", \"&lt;ul&gt;\\n&lt;li&gt;l1&lt;/li&gt;\\n&lt;/ul&gt;\", \"&lt;p&gt;p3&lt;/p&gt;\"]\n</code></pre>\n\n<p>This looks for either <code>&lt;p&gt;</code> or <code>&lt;ul&gt;</code> tags, not one <em>then</em> the other.</p>\n"}], "owner": {"reputation": 3425, "user_id": 1493116, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/9371f372f90b7c283579b097c67b9cd2?s=128&d=identicon&r=PG", "display_name": "LewlSauce", "link": "https://stackoverflow.com/users/1493116/lewlsauce"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 96, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1459382712, "creation_date": 1459362563, "last_edit_date": 1459382712, "question_id": 36316863, "link": "https://stackoverflow.com/questions/36316863/can-nokogiri-treat-unordered-lists-as-paragraphs", "title": "Can Nokogiri treat unordered lists as paragraphs?", "body": "<p>I'm using Nokogiri as part of my Ruby on Rails docx generator and I'm running into a little of a problem. I'm using Nokogiri to parse through each paragraph in my application and do some things to all of the text that has HTML tags around it.</p>\n\n<p>However, be fore I'm iterating through each paragraph, I'm missing the unordered lists. Here's what the text editor produces in my example:</p>\n\n<pre><code>&lt;!DOCTYPE html PUBLIC \"-//W3C//DTD HTML 4.0 Transitional//EN\" \"http://www.w3.org/TR/REC-html40/loose.dtd\"&gt;\n&lt;html&gt;&lt;body&gt;\n&lt;p&gt;&lt;strong&gt;Just\u00a0testing\u00a0&lt;em&gt;something&lt;/em&gt; out\u00a0&lt;/strong&gt;over here.&lt;/p&gt;\n&lt;p&gt;Here's a paragraph that contains bullets though:&lt;/p&gt;\n&lt;ul&gt;\n&lt;li&gt;One thing here.&lt;/li&gt;\n&lt;li&gt;Another thing here&lt;/li&gt;\n&lt;/ul&gt;\n&lt;p&gt;Some more text.&lt;/p&gt;\n&lt;/body&gt;&lt;/html&gt;\n</code></pre>\n\n<p>I'm using this ruby code to basically iterate through the paragraphs:</p>\n\n<pre><code># test = the HTML above that I just pasted\nhtml = Nokogiri::HTML(test)\nhtml.xpath(\"//p\").each do |paragraph|\n  # some code here that converts HTML -&gt; WordML\nend\n</code></pre>\n\n<p>As a result, that code only catches this:</p>\n\n<pre><code># output of html.xpath(\"//p\")\n&lt;p&gt;&lt;strong&gt;Just\u00a0testing\u00a0&lt;em&gt;something&lt;/em&gt; out\u00a0&lt;/strong&gt;over here.&lt;/p&gt;\n&lt;p&gt;Here's a paragraph that contains bullets though:&lt;/p&gt;\n&lt;p&gt;Some more text.&lt;/p&gt;\n</code></pre>\n\n<p>I need to somehow capture the <code>p</code> tag and treat the <code>ul</code> tag as if it was inside of a <code>p</code> tag as well. Otherwise, I'll only be converting the HTML that's inside of the paragraph tags to WordML and the unordered lists.</p>\n\n<p>So I was able to get half way there -- I can use <code>html.xpath(\"//p | //ul\")</code> to get me there, but the problem comes when i have nested <code>ul</code> tags. So for example:</p>\n\n<pre><code>&lt;!DOCTYPE html PUBLIC \"-//W3C//DTD HTML 4.0 Transitional//EN\" \"http://www.w3.org/TR/REC-html40/loose.dtd\"&gt;\n&lt;html&gt;&lt;body&gt;\n&lt;p&gt;&lt;strong&gt;Just testing &lt;em&gt;something&lt;/em&gt; out\u00a0&lt;/strong&gt;over here.&lt;/p&gt;\n&lt;p&gt;Here's a paragraph that contains bullets though:&lt;/p&gt;\n&lt;ul&gt;\n&lt;li&gt;One thing here.&lt;ul&gt;&lt;li&gt;One more thing&lt;/li&gt;&lt;/ul&gt;\n&lt;/li&gt;\n&lt;li&gt;Another thing here&lt;/li&gt;\n&lt;/ul&gt;\n&lt;p&gt;&lt;br&gt;&lt;/p&gt;\n&lt;ul&gt;&lt;li&gt;nothing&lt;/li&gt;&lt;/ul&gt;\n&lt;p&gt;Some more text.&lt;/p&gt;\n&lt;/body&gt;&lt;/html&gt;\n</code></pre>\n\n<p>becomes </p>\n\n<pre><code>&lt;p&gt;&lt;strong&gt;Just testing &lt;em&gt;something&lt;/em&gt; out\u00a0&lt;/strong&gt;over here.&lt;/p&gt;\n&lt;p&gt;Here's a paragraph that contains bullets though:&lt;/p&gt;\n&lt;ul&gt;\n&lt;li&gt;One thing here.&lt;ul&gt;&lt;li&gt;One more thing&lt;/li&gt;&lt;/ul&gt;\n&lt;/li&gt;\n&lt;li&gt;Another thing here&lt;/li&gt;\n&lt;/ul&gt;\n&lt;ul&gt;&lt;li&gt;One more thing&lt;/li&gt;&lt;/ul&gt;\n&lt;p&gt;&lt;br&gt;&lt;/p&gt;\n&lt;ul&gt;&lt;li&gt;nothing&lt;/li&gt;&lt;/ul&gt;\n&lt;p&gt;Some more text.&lt;/p&gt;\n</code></pre>\n\n<p>which, as you can see, contains the nested <code>ul</code> data twice (because it's a nested <code>ul</code> tag I assume)</p>\n"}, {"tags": ["ruby", "bundler"], "answers": [{"comments": [{"owner": {"reputation": 5269, "user_id": 3707, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/36671dd3667e876dbf6cdb6719457e18?s=128&d=identicon&r=PG", "display_name": "jackrabbit", "link": "https://stackoverflow.com/users/3707/jackrabbit"}, "edited": false, "score": 6, "creation_date": 1459370905, "post_id": 36318975, "comment_id": 60262141, "body": "The whole point of Gemfile.lock is to lock down the exact dependency versions based on the requirements specified in Gemfile. Committing Gemfile.lock is pretty much required if you want a reproducible environment."}, {"owner": {"reputation": 8714, "user_id": 306084, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/546ee016aba112078e62861bdc38ae69?s=128&d=identicon&r=PG", "display_name": "pjmorse", "link": "https://stackoverflow.com/users/306084/pjmorse"}, "edited": false, "score": 2, "creation_date": 1459429040, "post_id": 36318975, "comment_id": 60290220, "body": "Leaving the <code>Gemfile.lock</code> out of the git repository is not an option. We <i>do</i>, in fact, want all the developers on our team using the same versions of all the gems in the project."}], "tags": [], "owner": {"reputation": 785, "user_id": 6030505, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/a83aee02f081fc5d2e16636775d9f642?s=128&d=identicon&r=PG&f=1", "display_name": "jdave", "link": "https://stackoverflow.com/users/6030505/jdave"}, "is_accepted": false, "score": -4, "last_activity_date": 1459369352, "creation_date": 1459369352, "answer_id": 36318975, "question_id": 36316399, "link": "https://stackoverflow.com/questions/36316399/can-i-stop-bundler-from-adding-ruby-version-to-gemfile-lock/36318975#36318975", "title": "Can I stop Bundler from adding RUBY VERSION to Gemfile.lock", "body": "<p>If you are using some sort of version control like Git you can add the Gemfile.lock to your .gitignore file. </p>\n\n<p>This way anytime you push up a new change you will not push up your Gemfile.lock. Especially since other developers do not need it - once they run bundle, bundle will create a new Gemfile.lock on completion.</p>\n"}, {"comments": [{"owner": {"reputation": 8714, "user_id": 306084, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/546ee016aba112078e62861bdc38ae69?s=128&d=identicon&r=PG", "display_name": "pjmorse", "link": "https://stackoverflow.com/users/306084/pjmorse"}, "edited": false, "score": 3, "creation_date": 1459523898, "post_id": 36337078, "comment_id": 60339456, "body": "And yet it turns out we get commit wars anyway, not over the Ruby version but over different versions of Bundler adding and removing this block. <i>sigh</i>"}, {"owner": {"reputation": 6367, "user_id": 4451732, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/UQN4l.jpg?s=128&g=1", "display_name": "Franklin Yu", "link": "https://stackoverflow.com/users/4451732/franklin-yu"}, "reply_to_user": {"reputation": 8714, "user_id": 306084, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/546ee016aba112078e62861bdc38ae69?s=128&d=identicon&r=PG", "display_name": "pjmorse", "link": "https://stackoverflow.com/users/306084/pjmorse"}, "edited": false, "score": 0, "creation_date": 1471923984, "post_id": 36337078, "comment_id": 65531491, "body": "@pjmorse I think it is good for all the team members to have the same Bundler version. If you need to lock the gems, why not Bundler?"}, {"owner": {"reputation": 8714, "user_id": 306084, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/546ee016aba112078e62861bdc38ae69?s=128&d=identicon&r=PG", "display_name": "pjmorse", "link": "https://stackoverflow.com/users/306084/pjmorse"}, "reply_to_user": {"reputation": 6367, "user_id": 4451732, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/UQN4l.jpg?s=128&g=1", "display_name": "Franklin Yu", "link": "https://stackoverflow.com/users/4451732/franklin-yu"}, "edited": false, "score": 0, "creation_date": 1472052814, "post_id": 36337078, "comment_id": 65600538, "body": "@FranklinYu good question. I think because Bundler is developer tooling and not a direct dependency of the application, locking its version is less important than locking gem versions. (Also, if your team is working on multiple applications, you&#39;ll need to coordinate the locked version of Bundler across the applications, which can be a drag. You&#39;re essentially committing your team to lockstep Bundler updates.)"}, {"owner": {"reputation": 6367, "user_id": 4451732, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/UQN4l.jpg?s=128&g=1", "display_name": "Franklin Yu", "link": "https://stackoverflow.com/users/4451732/franklin-yu"}, "reply_to_user": {"reputation": 8714, "user_id": 306084, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/546ee016aba112078e62861bdc38ae69?s=128&d=identicon&r=PG", "display_name": "pjmorse", "link": "https://stackoverflow.com/users/306084/pjmorse"}, "edited": false, "score": 0, "creation_date": 1472074464, "post_id": 36337078, "comment_id": 65612125, "body": "@pjmorse I didn&#39;t actually encounter any problem for multiple application, since old Bundler can totally parse a <code>Gemfile.lock</code> generated by a new Bundler. It is actually not <i>locking</i>, but instead to notify other team members about a new release of Bundler. It does not force anyone to upgrade, just tells them &quot;you are not using the latest version in your team&quot;. If no member or machine joins the team, it will stay at that version."}, {"owner": {"reputation": 6367, "user_id": 4451732, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/UQN4l.jpg?s=128&g=1", "display_name": "Franklin Yu", "link": "https://stackoverflow.com/users/4451732/franklin-yu"}, "reply_to_user": {"reputation": 8714, "user_id": 306084, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/546ee016aba112078e62861bdc38ae69?s=128&d=identicon&r=PG", "display_name": "pjmorse", "link": "https://stackoverflow.com/users/306084/pjmorse"}, "edited": false, "score": 0, "creation_date": 1472074630, "post_id": 36337078, "comment_id": 65612187, "body": "@pjmorse In fact, I did see <a href=\"https://github.com/bundler/bundler-features/issues/88\" rel=\"nofollow noreferrer\">someone else encounters problems</a>, but the Bundler team doesn&#39;t seem to regret this decision. Normally my team would prefer not to go against the gem developers, to make our lives easier."}], "tags": [], "owner": {"reputation": 9515, "user_id": 763096, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/594c3414ee8cd0edcac36518228fe31b?s=128&d=identicon&r=PG", "display_name": "MrTheWalrus", "link": "https://stackoverflow.com/users/763096/mrthewalrus"}, "is_accepted": true, "score": 9, "last_activity_date": 1459436463, "last_edit_date": 1495540399, "creation_date": 1459436463, "answer_id": 36337078, "question_id": 36316399, "link": "https://stackoverflow.com/questions/36316399/can-i-stop-bundler-from-adding-ruby-version-to-gemfile-lock/36337078#36337078", "title": "Can I stop Bundler from adding RUBY VERSION to Gemfile.lock", "body": "<p><strong>I don't think so, but maybe it's okay:</strong></p>\n\n<p>As of 2.1.0, <em>Ruby no longer has multiple patch level releases</em> for a given version. See accepted answer on <a href=\"https://stackoverflow.com/questions/17711898/how-do-version-numbers-work-for-mri-ruby\">How do version numbers work for MRI Ruby?</a></p>\n\n<p>2.2.2p95 is the only patch level of 2.2.2 that will ever be released. 'p95' just means that there have been 95 commits since 2.2.0. </p>\n\n<p>Since your whole team will be on 2.2.2 anyway, it shouldn't cause problems to leave this in your Gemfile.lock. (As long as everyone updates Bundler to the version that does this, anyway. Otherwise there'll still be conflicts as the ruby version is added and removed.)</p>\n"}, {"tags": [], "owner": {"reputation": 8714, "user_id": 306084, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/546ee016aba112078e62861bdc38ae69?s=128&d=identicon&r=PG", "display_name": "pjmorse", "link": "https://stackoverflow.com/users/306084/pjmorse"}, "is_accepted": false, "score": 1, "last_activity_date": 1465303028, "creation_date": 1465303028, "answer_id": 37679598, "question_id": 36316399, "link": "https://stackoverflow.com/questions/36316399/can-i-stop-bundler-from-adding-ruby-version-to-gemfile-lock/37679598#37679598", "title": "Can I stop Bundler from adding RUBY VERSION to Gemfile.lock", "body": "<p>No, it can't be removed, at least in the version(s) of Bundler current as I write this.</p>\n\n<p>This block is added <a href=\"https://github.com/bundler/bundler/blob/master/lib/bundler/definition.rb#L341-L344\" rel=\"nofollow\">in the <code>#to_lock</code> method</a> of Bundler::Definition. The only conditional it's wrapped in is <code>if locked_ruby_version</code>, and <code>locked_ruby_version</code> is a method which returns either the version defined in an existing lockfile (<code>Gemfile.lock</code>) or the system Ruby - Bundler tries very hard to avoid letting <code>locked_ruby_version</code> return a falsy value.</p>\n"}], "owner": {"reputation": 8714, "user_id": 306084, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/546ee016aba112078e62861bdc38ae69?s=128&d=identicon&r=PG", "display_name": "pjmorse", "link": "https://stackoverflow.com/users/306084/pjmorse"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3461, "favorite_count": 0, "accepted_answer_id": 36337078, "answer_count": 3, "score": 15, "last_activity_date": 1465303028, "creation_date": 1459361118, "last_edit_date": 1495541811, "question_id": 36316399, "link": "https://stackoverflow.com/questions/36316399/can-i-stop-bundler-from-adding-ruby-version-to-gemfile-lock", "title": "Can I stop Bundler from adding RUBY VERSION to Gemfile.lock", "body": "<p>Every time I run any gem command on the command line, Bundler insists on touching my <code>Gemfile.lock</code> file to add this line:</p>\n\n<pre><code>RUBY VERSION\n   ruby 2.2.2p95\n</code></pre>\n\n<p>I don't want to commit this to our repository, because it means every dev using a different patch level of Ruby 2.2.2 is going to be in a commit war with me. (I've already resigned myself to a similar issue with the <code>BUNDLED_WITH</code> line.) But I can't deploy unless I <em>do</em> commit that line, because our deploy runs via a rake task and running the deploy leads Bundler to  add this block, whereupon the deploy process says, <strong>\"WAIT! Your working tree is dirty! You might be deploying incomplete changes!!!!1!\"</strong> (Well, not literally, but you get the idea.)</p>\n\n<p>Can I tell Bundler to leave the <code>RUBY VERSION</code> (and, ideally, <code>BUNDLED_WITH</code>) out of the <code>Gemfile.lock</code> so we don't have to do this ridiculous dance?</p>\n\n<p>(<a href=\"https://stackoverflow.com/q/10356103/306084\">how to prevent bundler from adding platform info to Gemfile.lock</a> seems to be the same question, but there's no answer, natch.)</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "drop-down-menu"], "answers": [{"comments": [{"owner": {"reputation": 543, "user_id": 5758268, "user_type": "registered", "profile_image": "https://graph.facebook.com/620704168067839/picture?type=large", "display_name": "Patrick Barattin", "link": "https://stackoverflow.com/users/5758268/patrick-barattin"}, "edited": false, "score": 0, "creation_date": 1459407267, "post_id": 36320721, "comment_id": 60274855, "body": "thanks you, I think will do it with AJAX.  Ok, now I change to snake_case."}, {"owner": {"reputation": 7224, "user_id": 448934, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TXtux.jpg?s=128&g=1", "display_name": "Pascal", "link": "https://stackoverflow.com/users/448934/pascal"}, "reply_to_user": {"reputation": 543, "user_id": 5758268, "user_type": "registered", "profile_image": "https://graph.facebook.com/620704168067839/picture?type=large", "display_name": "Patrick Barattin", "link": "https://stackoverflow.com/users/5758268/patrick-barattin"}, "edited": false, "score": 0, "creation_date": 1459407497, "post_id": 36320721, "comment_id": 60275006, "body": "i&#39;d go for the non-AJAX solution first. Standard form submit is simpler than AJAX.  But perhaps i don&#39;t know enough about the problem."}, {"owner": {"reputation": 543, "user_id": 5758268, "user_type": "registered", "profile_image": "https://graph.facebook.com/620704168067839/picture?type=large", "display_name": "Patrick Barattin", "link": "https://stackoverflow.com/users/5758268/patrick-barattin"}, "edited": false, "score": 0, "creation_date": 1459413922, "post_id": 36320721, "comment_id": 60279018, "body": "The form is too long, in this form there are some field that must be autocompleted after the selection... how can I save value not in the form but got with the AJAX?"}, {"owner": {"reputation": 7224, "user_id": 448934, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TXtux.jpg?s=128&g=1", "display_name": "Pascal", "link": "https://stackoverflow.com/users/448934/pascal"}, "reply_to_user": {"reputation": 543, "user_id": 5758268, "user_type": "registered", "profile_image": "https://graph.facebook.com/620704168067839/picture?type=large", "display_name": "Patrick Barattin", "link": "https://stackoverflow.com/users/5758268/patrick-barattin"}, "edited": false, "score": 0, "creation_date": 1459423120, "post_id": 36320721, "comment_id": 60285734, "body": "We don&#39;t know enough about your app/form.  You can use autocomplete (with or without AJAX, see select2 doc) and then submit the form in normal way.   I&#39;d start with a plain HTML form. Even when there is some hundred entries in the select. Better try and get something working first. Then add select2 with autocomplete. Then use AJAX (if required) to execute the search on server side."}], "tags": [], "owner": {"reputation": 7224, "user_id": 448934, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TXtux.jpg?s=128&g=1", "display_name": "Pascal", "link": "https://stackoverflow.com/users/448934/pascal"}, "is_accepted": true, "score": 0, "last_activity_date": 1459376206, "creation_date": 1459376206, "answer_id": 36320721, "question_id": 36316102, "link": "https://stackoverflow.com/questions/36316102/how-to-execute-code-after-selection-of-item-in-a-form-on-ruby-on-rails/36320721#36320721", "title": "How to execute code after selection of item in a form on ruby on rails?", "body": "<p>Two solutions, one without JS</p>\n\n<p>The form needs to be submitted to the server. For this you need a route, a controller and an action.</p>\n\n<p>and one with JS:</p>\n\n<p>You will need to register a change event and trigger an AJAX call to an action in a controller (see above).</p>\n\n<p>Please investigate this a bit further and then give more details if you need more help.</p>\n\n<p>Also please note that in Ruby snake_case os preferred over camelCase. So i suggest you change <code>contractId</code> to <code>contract_id</code> and so on.</p>\n"}], "owner": {"reputation": 543, "user_id": 5758268, "user_type": "registered", "profile_image": "https://graph.facebook.com/620704168067839/picture?type=large", "display_name": "Patrick Barattin", "link": "https://stackoverflow.com/users/5758268/patrick-barattin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "closed_date": 1459806222, "accepted_answer_id": 36320721, "answer_count": 1, "score": -1, "last_activity_date": 1459376206, "creation_date": 1459360177, "last_edit_date": 1459360528, "question_id": 36316102, "link": "https://stackoverflow.com/questions/36316102/how-to-execute-code-after-selection-of-item-in-a-form-on-ruby-on-rails", "closed_reason": "Needs details or clarity", "title": "How to execute code after selection of item in a form on ruby on rails?", "body": "<p>I'm on the form of training_project I have a select2 element:</p>\n\n<pre><code>&lt;%= f.input_field :contractId, collection: Contract.all, prompt: 'Convenzione', class: 'form-control select2' %&gt;\n</code></pre>\n\n<p>after the user select  the contract i need to do:</p>\n\n<pre><code>&lt;% @contract = Contract.find(@training_project.contractId)\n@training_project.farmId = @contract.farmId\n@farm = Farm.find(@training_project.farmId) if @training_project.farmId &amp;&amp; Farm.exists?(@training_project.farmId) %&gt;\n</code></pre>\n\n<p>All of this for get the farm info in relation with the contract selected.</p>\n\n<p>Thanks for your help!</p>\n"}, {"tags": ["html", "css", "ruby", "erb", "redmine"], "comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1459361070, "post_id": 36316004, "comment_id": 60256043, "body": "Why are you setting the width of the viewport (BTW 20 is not a valid size anyway since it has no unit of measure)? The tag usually looks like <code>&lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1&quot;&gt;</code> This means that the view port will be handled based on the device itself. However you need to make sure none of your elements have a fixed width greater than the view port or you will get horizontal scrolling. This requires most if not all elements to have a fluid width based on relative sizes like <code>%</code>, <code>em</code>, <code>ex</code>, etc."}, {"owner": {"reputation": 1, "user_id": 6136113, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2021da963fcb77deae2c8e38fd534489?s=128&d=identicon&r=PG&f=1", "display_name": "Hooman", "link": "https://stackoverflow.com/users/6136113/hooman"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1459368024, "post_id": 36316004, "comment_id": 60260490, "body": "Thank you for your help so far. I don&#39;t know how that width got there, it is now set to device-width. I also set the widths of all my elements to a percentage and I still got horizontal scrolling."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1459371706, "post_id": 36316004, "comment_id": 60262619, "body": "You would be better off using the classes that bootstrap provides for sizing <code>col-xx-##</code> and using <a href=\"http://getbootstrap.com/css/#overview-container\" rel=\"nofollow noreferrer\"><code>fluid containers</code></a> as container to bootstrap means fixed width."}], "answers": [{"tags": [], "owner": {"reputation": 785, "user_id": 6030505, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/a83aee02f081fc5d2e16636775d9f642?s=128&d=identicon&r=PG&f=1", "display_name": "jdave", "link": "https://stackoverflow.com/users/6030505/jdave"}, "is_accepted": false, "score": 0, "last_activity_date": 1459370003, "creation_date": 1459370003, "answer_id": 36319159, "question_id": 36316004, "link": "https://stackoverflow.com/questions/36316004/webpage-not-responsive-allthough-having-bootstrap-with-meta-tag-redmine/36319159#36319159", "title": "Webpage not responsive allthough having bootstrap with meta tag (Redmine)", "body": "<p>I would first recommend that you use bootstrap and jQuery CDN rather then the files. The reason for this is to help with your asset pipeline and also to future proof your code - for example... if your jQuery lib goes out of date - you would have to manually go back and update it. Rather then just attaching a CDN and its forgetting it. </p>\n\n<p>Second its best practice to always move all your JavaScript src tags to the end of your page before the ending <code>&lt;/body&gt;</code> tag. </p>\n\n<p>Also if you could update the problem with an error that you are running into - that may be a bit more helpful. Its best if you keep your developer tools open when making a website (helps to see what errors you run into on the DOM).</p>\n"}], "owner": {"reputation": 1, "user_id": 6136113, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2021da963fcb77deae2c8e38fd534489?s=128&d=identicon&r=PG&f=1", "display_name": "Hooman", "link": "https://stackoverflow.com/users/6136113/hooman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 130, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1459370003, "creation_date": 1459359871, "last_edit_date": 1459361767, "question_id": 36316004, "link": "https://stackoverflow.com/questions/36316004/webpage-not-responsive-allthough-having-bootstrap-with-meta-tag-redmine", "title": "Webpage not responsive allthough having bootstrap with meta tag (Redmine)", "body": "<p>I'm currently working on an redmine app.\nI want the page to be responsive, but it doesn't really work, although I have the meta tag included.</p>\n\n<p>The Redmine header/banner is not shown on the page, but I noticed that the code is still there. Maybe this is the problem? If so, how can I fully remove the code for this page?</p>\n\n<p>This is the code of the page:</p>\n\n<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html lang=\"de\"&gt;\n&lt;head&gt;\n&lt;meta charset=\"utf-8\" /&gt;\n&lt;title&gt;Redmine&lt;/title&gt;\n&lt;meta name=\"description\" content=\"Redmine\" /&gt;\n&lt;meta name=\"keywords\" content=\"issue,bug,tracker\" /&gt;\n&lt;meta content=\"authenticity_token\" name=\"csrf-param\" /&gt;\n&lt;meta content=\"zAhdWOwD3KiOanSXnXiNPIT0NzBRFQwbsH1y4wkiqww=\" name=\"csrf-token\" /&gt;\n&lt;link rel='shortcut icon' href='/favicon.ico?1459352855' /&gt;\n&lt;link href=\"/stylesheets/jquery/jquery-ui-1.11.0.css?1459352855\" media=\"all\" rel=\"stylesheet\" type=\"text/css\" /&gt;\n&lt;link href=\"/stylesheets/application.css?1459352855\" media=\"all\" rel=\"stylesheet\" type=\"text/css\" /&gt;\n\n&lt;script src=\"/javascripts/jquery-1.11.1-ui-1.11.0-ujs-3.1.3.js?1459352855\" type=\"text/javascript\"&gt;&lt;/script&gt;\n&lt;script src=\"/javascripts/application.js?1459352855\" type=\"text/javascript\"&gt;&lt;/script&gt;\n&lt;script type=\"text/javascript\"&gt;\n//&lt;![CDATA[\n$(window).load(function(){ warnLeavingUnsaved('Die aktuellen \u00c4nderungen gehen verloren, wenn Sie diese Seite verlassen.'); });\n//]]&gt;\n&lt;/script&gt;\n\n\n&lt;!-- page specific tags --&gt;\n\n    &lt;!-- Latest compiled and minified CSS --&gt;\n    &lt;link rel=\"stylesheet\" href=\"https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css\" integrity=\"sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7\" crossorigin=\"anonymous\"&gt;\n\n    &lt;!-- Optional theme --&gt;\n    &lt;link rel=\"stylesheet\" href=\"https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap-theme.min.css\" integrity=\"sha384-fLW2N01lMqjakBkx3l/M9EahuwpSfeNvV63J5ezn3uZzapT0u7EYsXMjQV+0En5r\" crossorigin=\"anonymous\"&gt;\n\n    &lt;!-- Latest compiled and minified JavaScript --&gt;\n    &lt;script src=\"https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js\" integrity=\"sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS\" crossorigin=\"anonymous\"&gt;&lt;/script&gt;\n    &lt;link href=\"/plugin_assets/redmine_mtr/stylesheets/styles.css?1459353025\" media=\"screen\" rel=\"stylesheet\" type=\"text/css\" /&gt;\n    &lt;meta name=\"viewport\" content=\"width=20, initial-scale=1\"&gt;\n\n    &lt;script src=\"https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js\" type=\"text/javascript\"&gt;&lt;/script&gt;\n\n\n&lt;/head&gt;\n&lt;body class=\"controller-mtr_account action-mtr_login\"&gt;\n&lt;div id=\"wrapper\"&gt;\n&lt;div id=\"wrapper2\"&gt;\n&lt;div id=\"wrapper3\"&gt;\n&lt;div id=\"top-menu\"&gt;\n    &lt;div id=\"account\"&gt;\n        &lt;ul&gt;&lt;li&gt;&lt;a href=\"/login\" class=\"login\"&gt;Anmelden&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\"/account/register\" class=\"register\"&gt;Registrieren&lt;/a&gt;&lt;/li&gt;&lt;/ul&gt;    &lt;/div&gt;\n\n    &lt;ul&gt;&lt;li&gt;&lt;a href=\"/\" class=\"home\"&gt;Hauptseite&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\"/projects\" class=\"projects\"&gt;Projekte&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\"http://www.redmine.org/guide\" class=\"help\"&gt;Hilfe&lt;/a&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/div&gt;\n\n&lt;div id=\"header\"&gt;\n    &lt;div id=\"quick-search\"&gt;\n        &lt;form accept-charset=\"UTF-8\" action=\"/search\" method=\"get\"&gt;&lt;div style=\"margin:0;padding:0;display:inline\"&gt;&lt;input name=\"utf8\" type=\"hidden\" value=\"&amp;#x2713;\" /&gt;&lt;/div&gt;\n\n        &lt;label for='q'&gt;\n          &lt;a href=\"/search\" accesskey=\"4\"&gt;Suche&lt;/a&gt;:\n        &lt;/label&gt;\n        &lt;input accesskey=\"f\" class=\"small\" id=\"q\" name=\"q\" size=\"20\" type=\"text\" /&gt;\n&lt;/form&gt;        \n    &lt;/div&gt;\n\n    &lt;h1&gt;Redmine&lt;/h1&gt;\n\n&lt;/div&gt;\n\n&lt;div id=\"main\" class=\"nosidebar\"&gt;\n    &lt;div id=\"sidebar\"&gt;\n\n\n    &lt;/div&gt;\n\n    &lt;div id=\"content\"&gt;\n\n        &lt;div id=\"login-form\" class=\"col-sm-12 modal show\" tabindex=\"-1\" role=\"dialog\" aria-hidden=\"true\"&gt;\n    &lt;form accept-charset=\"UTF-8\" action=\"/mtr/login\" method=\"post\"&gt;&lt;div style=\"margin:0;padding:0;display:inline\"&gt;&lt;input name=\"utf8\" type=\"hidden\" value=\"&amp;#x2713;\" /&gt;&lt;input name=\"authenticity_token\" type=\"hidden\" value=\"zAhdWOwD3KiOanSXnXiNPIT0NzBRFQwbsH1y4wkiqww=\" /&gt;&lt;/div&gt;\n\n        &lt;div class=\"modal-dialog\"&gt;\n            &lt;div class=\"modal-content\"&gt;\n                &lt;div class=\"modal-header\"&gt;\n                    &lt;h1 class=\"container col-md-12\"&gt;Login&lt;/h1&gt;\n                    &lt;h5 class=\"container col-md-12\"&gt;Mobile Time Recording&lt;/h5&gt;\n                &lt;/div&gt;\n                &lt;div class=\"modal-body form-group\"&gt;\n                    &lt;div style=\"padding-top: 5px;\"&gt;\n                        &lt;input class=\"login-input\" id=\"username\" name=\"username\" style=\"width: 100%\" tabindex=\"1\" type=\"text\" /&gt;\n                    &lt;/div&gt;\n                    &lt;div style=\"padding-top: 5px;\"&gt;\n                        &lt;input class=\"login-input\" id=\"password\" name=\"password\" style=\"width: 100%\" tabindex=\"2\" type=\"password\" /&gt;\n                    &lt;/div&gt;\n                    &lt;div style=\"padding-top: 5px;\"&gt;\n                        &lt;input type=\"submit\" style=\"height: 38px\" class=\"form-control input-lg btn btn-danger\"\n                               name=\"loginMtr\" value=\"Anmelden &amp;#187;\" tabindex=\"5\"/&gt;\n                    &lt;/div&gt;\n              &lt;/div&gt;\n          &lt;/div&gt;\n        &lt;/div&gt;\n&lt;/form&gt;&lt;/div&gt;\n\n    &lt;script type=\"text/javascript\"&gt;\n//&lt;![CDATA[\n$('#username').focus();\n//]]&gt;\n&lt;/script&gt;\n\n\n        &lt;div style=\"clear:both;\"&gt;&lt;/div&gt;\n    &lt;/div&gt;\n&lt;/div&gt;\n&lt;/div&gt;\n\n&lt;div id=\"ajax-indicator\" style=\"display:none;\"&gt;&lt;span&gt;Lade...&lt;/span&gt;&lt;/div&gt;\n&lt;div id=\"ajax-modal\" style=\"display:none;\"&gt;&lt;/div&gt;\n\n&lt;div id=\"footer\"&gt;\n  &lt;div class=\"bgl\"&gt;&lt;div class=\"bgr\"&gt;\n    Powered by &lt;a href=\"http://www.redmine.org/\"&gt;Redmine&lt;/a&gt; &amp;copy; 2006-2015 Jean-Philippe Lang\n  &lt;/div&gt;&lt;/div&gt;\n&lt;/div&gt;\n&lt;/div&gt;\n&lt;/div&gt;\n\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n"}, {"tags": ["ruby", "file", "read-write"], "comments": [{"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1459359717, "post_id": 36315755, "comment_id": 60255179, "body": "You linked to the documentation for the Facets gem. If you want to use <code>File.writelines</code> you&#39;ll have to install that gem."}, {"owner": {"reputation": 4747, "user_id": 977466, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/h7yNy.jpg?s=128&g=1", "display_name": "u.gen", "link": "https://stackoverflow.com/users/977466/u-gen"}, "reply_to_user": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1459359857, "post_id": 36315755, "comment_id": 60255261, "body": "@Jordan Is there a built in way to do this in ruby without a third party gem?"}, {"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1459359877, "post_id": 36315755, "comment_id": 60255280, "body": "P.S. The title of your question says &quot;first two lines&quot; but it sure looks like you want to replace the first three (a blank line is still a line). FWIW, an easier way to replace the first three items in an array is <code>lineArr[0..2] = [ &quot;New Title\\n&quot;, &quot;\\n&quot;, &quot;fff\\n&quot; ]</code>"}, {"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1459360058, "post_id": 36315755, "comment_id": 60255394, "body": "Click on the &quot;View source&quot; link at the bottom of the Facets docs. It&#39;s only a four-line method. That&#39;s how you do it in Ruby."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 1, "creation_date": 1459361158, "post_id": 36315755, "comment_id": 60256093, "body": "How big will your file be? Will it ever grow? Using <code>readlines</code> or any other IO method that slurps the file will be unscalable."}, {"owner": {"reputation": 4747, "user_id": 977466, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/h7yNy.jpg?s=128&g=1", "display_name": "u.gen", "link": "https://stackoverflow.com/users/977466/u-gen"}, "reply_to_user": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1459361328, "post_id": 36315755, "comment_id": 60256204, "body": "@theTinMan it will grow continually, I cant say how big it is going to be exactly but assuming after a year it might be anywhere from 5k to 20k lines"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1459361568, "post_id": 36315755, "comment_id": 60256381, "body": "Be cautious using slurping: It can take a script to its knees if the file exceeds the available memory for the process. It&#39;s easier to write the code using slurping though, so it&#39;s important to be aware of the problem. Also, slurping slows the IO once the file gets larger than 1MB."}], "answers": [{"comments": [{"owner": {"reputation": 4747, "user_id": 977466, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/h7yNy.jpg?s=128&g=1", "display_name": "u.gen", "link": "https://stackoverflow.com/users/977466/u-gen"}, "edited": false, "score": 0, "creation_date": 1459359917, "post_id": 36315987, "comment_id": 60255307, "body": "will this write into the file line by line? If so wouldn&#39;t be this bad practice for big files?"}, {"owner": {"reputation": 1721, "user_id": 3992622, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WwUbJ.png?s=128&g=1", "display_name": "It-Z", "link": "https://stackoverflow.com/users/3992622/it-z"}, "reply_to_user": {"reputation": 4747, "user_id": 977466, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/h7yNy.jpg?s=128&g=1", "display_name": "u.gen", "link": "https://stackoverflow.com/users/977466/u-gen"}, "edited": false, "score": 0, "creation_date": 1459360034, "post_id": 36315987, "comment_id": 60255378, "body": "This should be fast enough as there is no way to write array to file with out going all over the array..."}, {"owner": {"reputation": 10812, "user_id": 1241782, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/576b21d9efadc9217270e971fd6d5027?s=128&d=identicon&r=PG", "display_name": "Mike S", "link": "https://stackoverflow.com/users/1241782/mike-s"}, "edited": false, "score": 0, "creation_date": 1459360309, "post_id": 36315987, "comment_id": 60255532, "body": "I believe the OP wants a way to delete the first 2 lines of the file and then insert 3 new lines at the beginning <b>without</b> reading in the entire file and then writing out the entire file, which I think is impossible with Ruby&#39;s <code>File</code> methods."}, {"owner": {"reputation": 1721, "user_id": 3992622, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WwUbJ.png?s=128&g=1", "display_name": "It-Z", "link": "https://stackoverflow.com/users/3992622/it-z"}, "reply_to_user": {"reputation": 4747, "user_id": 977466, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/h7yNy.jpg?s=128&g=1", "display_name": "u.gen", "link": "https://stackoverflow.com/users/977466/u-gen"}, "edited": false, "score": 0, "creation_date": 1459360391, "post_id": 36315987, "comment_id": 60255584, "body": "So why to use lineArray = File.readlines(destinationFile).drop(2)... @u.gen? Please elaborate..."}, {"owner": {"reputation": 10812, "user_id": 1241782, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/576b21d9efadc9217270e971fd6d5027?s=128&d=identicon&r=PG", "display_name": "Mike S", "link": "https://stackoverflow.com/users/1241782/mike-s"}, "edited": false, "score": 0, "creation_date": 1459360560, "post_id": 36315987, "comment_id": 60255697, "body": "Pretty sure the OP is confused about what <code>File.readlines(destinationFile).drop(2)</code> does. I think he believes that is removing the first 2 lines of the file and return them, which is wrong. It is only returning them, does not remove them."}, {"owner": {"reputation": 4747, "user_id": 977466, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/h7yNy.jpg?s=128&g=1", "display_name": "u.gen", "link": "https://stackoverflow.com/users/977466/u-gen"}, "edited": false, "score": 0, "creation_date": 1459360697, "post_id": 36315987, "comment_id": 60255797, "body": "there is no specific reason, first time trying out ruby and I thought my solution would work.  My approach might not be a good approach, If the file is big reading&amp;writing each line would be a problem in long term. So I&#39;d like to see the best approach to this problem."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1459360822, "post_id": 36315987, "comment_id": 60255878, "body": "Why use <code>w+</code> instead of the usual <code>w</code>? Explain the reasoning in the answer."}, {"owner": {"reputation": 4747, "user_id": 977466, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/h7yNy.jpg?s=128&g=1", "display_name": "u.gen", "link": "https://stackoverflow.com/users/977466/u-gen"}, "reply_to_user": {"reputation": 10812, "user_id": 1241782, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/576b21d9efadc9217270e971fd6d5027?s=128&d=identicon&r=PG", "display_name": "Mike S", "link": "https://stackoverflow.com/users/1241782/mike-s"}, "edited": false, "score": 0, "creation_date": 1459360879, "post_id": 36315987, "comment_id": 60255923, "body": "@Mike so I thought <code>drop</code> is omitting first two lines and returning rest of the lines into the array? Am I wrong ?"}, {"owner": {"reputation": 1721, "user_id": 3992622, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WwUbJ.png?s=128&g=1", "display_name": "It-Z", "link": "https://stackoverflow.com/users/3992622/it-z"}, "edited": false, "score": 0, "creation_date": 1459361016, "post_id": 36315987, "comment_id": 60256005, "body": "&quot;w+&quot; Overwrites the existing file if the file exists."}, {"owner": {"reputation": 1721, "user_id": 3992622, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WwUbJ.png?s=128&g=1", "display_name": "It-Z", "link": "https://stackoverflow.com/users/3992622/it-z"}, "edited": false, "score": 0, "creation_date": 1459361090, "post_id": 36315987, "comment_id": 60256050, "body": "There is no way to write text data in the middle of a file. Not just in ruby - this is just how the file system works."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1459361398, "post_id": 36315987, "comment_id": 60256253, "body": "<code>w</code> overwrites the file if it exists. <code>w+</code> is <code>&quot;*Read-*write, truncates existing file to zero length or creates a new file for reading and writing.&quot;</code> They&#39;re not the same. Don&#39;t use <code>w+</code> when you mean <code>w</code> as it can cause problems when multiple files are trying to access the file at the same time."}, {"owner": {"reputation": 10812, "user_id": 1241782, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/576b21d9efadc9217270e971fd6d5027?s=128&d=identicon&r=PG", "display_name": "Mike S", "link": "https://stackoverflow.com/users/1241782/mike-s"}, "reply_to_user": {"reputation": 4747, "user_id": 977466, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/h7yNy.jpg?s=128&g=1", "display_name": "u.gen", "link": "https://stackoverflow.com/users/977466/u-gen"}, "edited": false, "score": 0, "creation_date": 1459361583, "post_id": 36315987, "comment_id": 60256393, "body": "@u.gen you have the order backwards, it&#39;s <b>not</b> &quot;omitting the first two&quot; and <b>then</b> &quot;returning the rest of the lines into the array&quot;. It is <b>first</b> returning all the lines into an array, <b>then</b> omitting the first two from the array. The order matters because it&#39;s not actually editing the file."}, {"owner": {"reputation": 1721, "user_id": 3992622, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WwUbJ.png?s=128&g=1", "display_name": "It-Z", "link": "https://stackoverflow.com/users/3992622/it-z"}, "edited": false, "score": 0, "creation_date": 1459361616, "post_id": 36315987, "comment_id": 60256423, "body": "I think &quot;w+&quot; is what the OP need in this case as i understand it. And the OP now has all the information to select what is relevant for his case..."}], "tags": [], "owner": {"reputation": 1721, "user_id": 3992622, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WwUbJ.png?s=128&g=1", "display_name": "It-Z", "link": "https://stackoverflow.com/users/3992622/it-z"}, "is_accepted": false, "score": 1, "last_activity_date": 1459359801, "creation_date": 1459359801, "answer_id": 36315987, "question_id": 36315755, "link": "https://stackoverflow.com/questions/36315755/delete-first-two-lines-and-add-two-lines-to-file/36315987#36315987", "title": "Delete first two lines and add two lines to file", "body": "<p>Use put with the whole array:</p>\n\n<pre><code>File.open(\"destinationFile\", \"w+\") do |f|\n   f.puts(lineArray)\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1459364568, "post_id": 36316987, "comment_id": 60258371, "body": "Good point about <code>diff</code>. You might want to show how that could be done from within Ruby."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1459365013, "post_id": 36316987, "comment_id": 60258663, "body": "I thought of that, but it&#39;s a very different question."}], "tags": [], "owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "is_accepted": true, "score": 1, "last_activity_date": 1459363541, "last_edit_date": 1459363541, "creation_date": 1459362904, "answer_id": 36316987, "question_id": 36315755, "link": "https://stackoverflow.com/questions/36315755/delete-first-two-lines-and-add-two-lines-to-file/36316987#36316987", "title": "Delete first two lines and add two lines to file", "body": "<p>I'd start with something like this:</p>\n\n<pre><code>NEWLINES = {\n  0 =&gt; \"New Title\",\n  1 =&gt; \"\\nfff\"\n}\n\nFile.open('test.txt.new', 'w') do |fo|\n  File.foreach('test.txt').with_index do |li, ln|\n    fo.puts (NEWLINES[ln] || li)\n  end\nend\n</code></pre>\n\n<p>Here's the contents of <code>test.txt.new</code> after running:</p>\n\n<pre><code>New Title\n\nfff\naaa\nbbb\nccc\n</code></pre>\n\n<p>The idea is to provide a list of replacement lines in the <code>NEWLINES</code> hash. As each line is read from the original file the line number is checked in the hash, and if the line exists then the corresponding value is used, otherwise the original line is used.</p>\n\n<p>If you want to read the entire file then substitute, it reduces the code a little, but the code will have scalability issues:</p>\n\n<pre><code>NEWLINES = [\n  \"New Title\",\n  \"\",\n  \"fff\"\n]\n\nfile = File.readlines('test.txt')\nFile.open('test.txt.new', 'w') do |fo|\n  fo.puts NEWLINES\n  fo.puts file[(NEWLINES.size - 1) .. -1]\nend\n</code></pre>\n\n<p>It's not very smart but it'll work for simple replacements. </p>\n\n<p>If you really want to do it right, learn how <a href=\"https://en.wikipedia.org/wiki/Diff_utility\" rel=\"nofollow\"><code>diff</code></a> works, create a diff file, then let it do the heavy lifting, as it's designed for this sort of task, runs extremely fast, and is used millions of times every day on *nix systems around the world.</p>\n"}, {"tags": [], "owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "is_accepted": false, "score": 1, "last_activity_date": 1459365109, "last_edit_date": 1459365109, "creation_date": 1459363178, "answer_id": 36317095, "question_id": 36315755, "link": "https://stackoverflow.com/questions/36315755/delete-first-two-lines-and-add-two-lines-to-file/36317095#36317095", "title": "Delete first two lines and add two lines to file", "body": "<p>If your files are big, the performance and memory implications of reading them into memory in their entirety are worth thinking about. If that's a concern, then your best bet is to treat the files as streams. Here's how I would do it.</p>\n\n<p>First, define your replacement text:</p>\n\n<pre><code>require \"stringio\"\n\nreplacement = StringOI.new &lt;&lt;END\nNew Title\n\nfff\nEND\n</code></pre>\n\n<p>I've made this a <a href=\"http://ruby-doc.org/stdlib-2.3.0/libdoc/stringio/rdoc/StringIO.html\" rel=\"nofollow\">StringIO</a> object, but it could also be a File object if your replacement text is in a file.</p>\n\n<p>Now, open your destination file (a new file) and write each line from the replacement text into it.</p>\n\n<pre><code>dest = File.open(dest_fn, 'wb') do |dest|\nreplacement.each_line {|ln| dest &lt;&lt; ln }\n</code></pre>\n\n<p>We could have done this more efficiently, but there's a good reason to do it this way: Now we can call <code>replacement.lineno</code> to get the number of lines read, instead of iterating over it a second time to count the lines.</p>\n\n<p>Next, open the original file and seek ahead by calling <code>gets</code> <code>replacement.lineno</code> times:</p>\n\n<pre><code>orig = File.open(orig_fn, 'r')\nreplacement.lineno.times { orig.gets }\n</code></pre>\n\n<p>Finally, write the remaining lines from the original file to the new file. We'll do it more efficiently this time with <a href=\"http://ruby-doc.org/core-2.3.0/IO.html#method-c-copy_stream\" rel=\"nofollow\"><code>File.copy_stream</code></a>:</p>\n\n<pre><code>File.copy_stream(orig, dest)\norig.close\ndest.close\n</code></pre>\n\n<p>That's it. Of course, it's a drag closing those files manually (and when we do we should do it in an <code>ensure</code> block), so it's better to use the block form of <code>File.open</code> to automatically close them. Also, we can move the <code>orig.gets</code> calls into the <code>replacement.each_line</code> loop:</p>\n\n<pre><code>File.open(dest_fn, 'wb') do |dest|\n  File.open(orig_fn, 'r') do |orig|\n    replacement.each_line {|ln| dest &lt;&lt; ln; orig.gets }\n    File.copy_stream(orig, dest)\n  end\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 0, "last_activity_date": 1459375266, "last_edit_date": 1459375266, "creation_date": 1459364228, "answer_id": 36317405, "question_id": 36315755, "link": "https://stackoverflow.com/questions/36315755/delete-first-two-lines-and-add-two-lines-to-file/36317405#36317405", "title": "Delete first two lines and add two lines to file", "body": "<p>First create an input test file.</p>\n\n<pre><code>FNameIn = \"test_in\"\n\ntext = &lt;&lt;_\nTitle\n\nHow now,\nbrown cow?\n_\n  #=&gt; \"Title\\n\\nHow now,\\nbrown cow?\\n\" \n\nFile.write(FNameIn, text)\n  #=&gt; 27\n</code></pre>\n\n<p>Now read and write line-by-line.</p>\n\n<pre><code>FNameOut = \"test_out\"\n\nFile.open(FNameIn) do |fin|\n  fin.gets; fin.gets  \n  File.open(FNameOut, 'w') do |fout|\n    fout.puts \"New Title\"\n    fout.puts\n    fout.puts \"fff\"\n    until fin.eof?    \n      fout.puts fin.gets\n    end\n  end\nend\n</code></pre>\n\n<p>Check the result:</p>\n\n<pre><code>puts File.read(FNameOut)\n  # New Title\n  #\n  # fff\n  # How now,\n  # brown cow?\n</code></pre>\n\n<p>Ruby will close each of the two files when its block terminates.</p>\n\n<p>If the files are not large, you could instead write:</p>\n\n<pre><code>File.write(FNameOut,\n  [\"New Title\\n\", \"\\n\", \"fff\\n\"].concat(File.readlines(FNameIn).drop(2)).join)\n</code></pre>\n"}], "owner": {"reputation": 4747, "user_id": 977466, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/h7yNy.jpg?s=128&g=1", "display_name": "u.gen", "link": "https://stackoverflow.com/users/977466/u-gen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 87, "favorite_count": 0, "accepted_answer_id": 36316987, "answer_count": 4, "score": 1, "last_activity_date": 1459375266, "creation_date": 1459358992, "last_edit_date": 1459359500, "question_id": 36315755, "link": "https://stackoverflow.com/questions/36315755/delete-first-two-lines-and-add-two-lines-to-file", "title": "Delete first two lines and add two lines to file", "body": "<p>I have a text file that starts with:</p>\n\n<pre><code>Title\n\naaa\nbbb\nccc\n</code></pre>\n\n<p>I don't know what the line would include, but I know that the structure of the file will be <code>Title</code>, then an empty line, then the actual lines. I want to modify it to:</p>\n\n<pre><code>New Title\n\nfff\naaa\nbbb\nccc\n</code></pre>\n\n<p>I had <a href=\"http://www.rubydoc.info/github/rubyworks/facets/File.writelines\" rel=\"nofollow\">this</a> in mind:</p>\n\n<pre><code>lineArray = File.readlines(destinationFile).drop(2)\nlineArray.insert(0, 'fff\\n')\nlineArray.insert(0, '\\n')\nlineArray.insert(0, 'new Title\\n')\nFile.writelines(destinationFile, lineArray)\n</code></pre>\n\n<p>but <code>writelines</code> doesn't exist.</p>\n\n<pre><code>`writelines' for File:Class (NoMethodError)\n</code></pre>\n\n<p>Is there a way to delete the first two lines of the file an add three new lines?</p>\n"}, {"tags": ["ruby", "linux", "debian"], "comments": [{"owner": {"reputation": 1508, "user_id": 4346603, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae1be3f8e84ecb90d3a477f12c55b635?s=128&d=identicon&r=PG", "display_name": "leobelizquierdo", "link": "https://stackoverflow.com/users/4346603/leobelizquierdo"}, "edited": false, "score": 0, "creation_date": 1459362463, "post_id": 36315743, "comment_id": 60257001, "body": "can you post some code?"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1459364484, "post_id": 36315743, "comment_id": 60258315, "body": "It&#39;s not a Ruby problem since there are many Ruby-based HTTP clients and HTTPd that run fine in the background. The problem is with your script or your configuration. But we can&#39;t help you unless you tell us more."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1459364585, "post_id": 36315743, "comment_id": 60258380, "body": "Welcome to Stack Overflow. &quot;Questions seeking debugging help (&quot;why isn&#39;t this code working?&quot;) must include the desired behavior, a specific problem or error and the shortest code necessary to reproduce it in the question itself. Questions without a clear problem statement are not useful to other readers. See: <a href=\"http://stackoverflow.com/help/mcve\">How to create a Minimal, Complete, and Verifiable example</a>.&quot;"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1459364964, "post_id": 36315743, "comment_id": 60258634, "body": "If you want to understand why it&#39;s happening then <a href=\"https://superuser.com\">Super User</a> might be a better site to ask."}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 4852603, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001634465587/picture?type=large", "display_name": "Armadillomon", "link": "https://stackoverflow.com/users/4852603/armadillomon"}, "edited": false, "score": 0, "creation_date": 1459377102, "post_id": 36320603, "comment_id": 60265090, "body": "I don&#39;t really understand this behavior. Shouldn&#39;t only the thread stop and wait for keyboard input, instead of the whole script?"}], "tags": [], "owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "is_accepted": false, "score": 0, "last_activity_date": 1459375636, "creation_date": 1459375636, "answer_id": 36320603, "question_id": 36315743, "link": "https://stackoverflow.com/questions/36315743/ruby-cant-read-tcp-socket-when-run-in-background/36320603#36320603", "title": "Ruby can&#39;t read TCP socket when run in background", "body": "<p>The problem looks like it's <code>gets</code>. </p>\n\n<p>By default <code>gets</code> reads from STDIN. <a href=\"http://ruby-doc.org/core-2.3.0/Kernel.html#method-i-gets\" rel=\"nofollow\">The documentation</a> says:</p>\n\n<blockquote>\n  <p>Returns (and assigns to $_) the next line from the list of files in ARGV (or $*), or from standard input if no files are present on the command line.</p>\n</blockquote>\n\n<p>The code/thread will stop and wait for a prompt from the keyboard, or read from the piped input if STDIN is redirected or from a file given as a parameter to the script on the command-line.</p>\n"}], "owner": {"reputation": 21, "user_id": 4852603, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001634465587/picture?type=large", "display_name": "Armadillomon", "link": "https://stackoverflow.com/users/4852603/armadillomon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 65, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1459375636, "creation_date": 1459358961, "last_edit_date": 1459370112, "question_id": 36315743, "link": "https://stackoverflow.com/questions/36315743/ruby-cant-read-tcp-socket-when-run-in-background", "title": "Ruby can&#39;t read TCP socket when run in background", "body": "<p>I was writing a Slack bot in Ruby under Windows and everything worked just fine until I decided to run it on a Linux server. When I access my shell and run the script it works correctly in the foreground, but once I move it to the background it stops working. I'm getting a timeout error on a HTTP request with Net::HTTP, or an EOFError on the socket read.</p>\n\n<p>I'm using Ruby 2.3 on Debian 7.</p>\n\n<p>I think that the Ruby process stops on its own, because I only get the errors once I return the process to the foreground, and, if I run <code>ps aux</code> when the process is in the background it has the \"T\" (stopped) flag listed.</p>\n\n<p>Since I want to become more familiar with Linux, I'd like to know what is causing the issue, rather than how to solve it.</p>\n\n<p>EDIT: I found that my user input handler is causing the problem. Here is the problematic bit:</p>\n\n<pre><code>def input_handler\n  return Thread.new {\n    loop do\n      user_input = gets.chomp\n    end\n  }\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "session"], "comments": [{"owner": {"reputation": 1930, "user_id": 1337204, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SkzuG.jpg?s=128&g=1", "display_name": "tpbowden", "link": "https://stackoverflow.com/users/1337204/tpbowden"}, "edited": false, "score": 1, "creation_date": 1459359002, "post_id": 36315701, "comment_id": 60254800, "body": "Are you storing sessions in the database? By default  I think they&#39;re stored using cookies"}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "reply_to_user": {"reputation": 1930, "user_id": 1337204, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SkzuG.jpg?s=128&g=1", "display_name": "tpbowden", "link": "https://stackoverflow.com/users/1337204/tpbowden"}, "edited": false, "score": 0, "creation_date": 1459360418, "post_id": 36315701, "comment_id": 60255610, "body": "Correct @tpbowden. CookieStore has been the default since Rails 2. <a href=\"http://guides.rubyonrails.org/security.html#session-storage\" rel=\"nofollow noreferrer\">guides.rubyonrails.org/security.html#session-storage</a>"}, {"owner": {"reputation": 1241, "user_id": 4402478, "user_type": "registered", "accept_rate": 32, "profile_image": "https://www.gravatar.com/avatar/6db20762ebe145c59b6e10eb68955678?s=128&d=identicon&r=PG&f=1", "display_name": "user", "link": "https://stackoverflow.com/users/4402478/user"}, "reply_to_user": {"reputation": 1930, "user_id": 1337204, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SkzuG.jpg?s=128&g=1", "display_name": "tpbowden", "link": "https://stackoverflow.com/users/1337204/tpbowden"}, "edited": false, "score": 0, "creation_date": 1459360712, "post_id": 36315701, "comment_id": 60255806, "body": "@tpbowden no i do not save session in db,than how i can delete session with rake db:reset?"}, {"owner": {"reputation": 1930, "user_id": 1337204, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SkzuG.jpg?s=128&g=1", "display_name": "tpbowden", "link": "https://stackoverflow.com/users/1337204/tpbowden"}, "edited": false, "score": 0, "creation_date": 1459360758, "post_id": 36315701, "comment_id": 60255838, "body": "Try changing your secret key base, I think that will invalidate them all"}, {"owner": {"reputation": 1930, "user_id": 1337204, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SkzuG.jpg?s=128&g=1", "display_name": "tpbowden", "link": "https://stackoverflow.com/users/1337204/tpbowden"}, "edited": false, "score": 0, "creation_date": 1459360781, "post_id": 36315701, "comment_id": 60255853, "body": "Or check out the active record session store gem"}, {"owner": {"reputation": 1241, "user_id": 4402478, "user_type": "registered", "accept_rate": 32, "profile_image": "https://www.gravatar.com/avatar/6db20762ebe145c59b6e10eb68955678?s=128&d=identicon&r=PG&f=1", "display_name": "user", "link": "https://stackoverflow.com/users/4402478/user"}, "edited": false, "score": 0, "creation_date": 1459361127, "post_id": 36315701, "comment_id": 60256077, "body": "Try changing your secret key base-- can i  do it inside seed.rb? and than restrart app?"}, {"owner": {"reputation": 1930, "user_id": 1337204, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SkzuG.jpg?s=128&g=1", "display_name": "tpbowden", "link": "https://stackoverflow.com/users/1337204/tpbowden"}, "edited": false, "score": 0, "creation_date": 1459361608, "post_id": 36315701, "comment_id": 60256418, "body": "No it is changed using config/secrets.yml"}], "answers": [{"comments": [{"owner": {"reputation": 1241, "user_id": 4402478, "user_type": "registered", "accept_rate": 32, "profile_image": "https://www.gravatar.com/avatar/6db20762ebe145c59b6e10eb68955678?s=128&d=identicon&r=PG&f=1", "display_name": "user", "link": "https://stackoverflow.com/users/4402478/user"}, "edited": false, "score": 0, "creation_date": 1459361815, "post_id": 36316292, "comment_id": 60256549, "body": "How can i do it on server side? except changes in <code>config&#47;secrets.yml</code>"}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "reply_to_user": {"reputation": 1241, "user_id": 4402478, "user_type": "registered", "accept_rate": 32, "profile_image": "https://www.gravatar.com/avatar/6db20762ebe145c59b6e10eb68955678?s=128&d=identicon&r=PG&f=1", "display_name": "user", "link": "https://stackoverflow.com/users/4402478/user"}, "edited": false, "score": 0, "creation_date": 1459368361, "post_id": 36316292, "comment_id": 60260685, "body": "There is no other way AFAIK except by changing the session storage mechanism to something else than <code>ActionDispatch::Session::CookieStore</code>.  For production you would change <code>ENV[&quot;SECRET_KEY_BASE&quot;]</code> instead of the YAML file."}], "tags": [], "owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "is_accepted": false, "score": 1, "last_activity_date": 1459360820, "creation_date": 1459360820, "answer_id": 36316292, "question_id": 36315701, "link": "https://stackoverflow.com/questions/36315701/rails-session-still-alive-after-dbdrop/36316292#36316292", "title": "Rails session still alive after db:drop", "body": "<p>Rails by default uses <code>ActionDispatch::Session::CookieStore</code> to store the session. Thus cleaning out the database does not remove any session data as it is held by the client.</p>\n\n<p>Instead you would remove the cookies in the browser (in development) or change the secret key base to invalidate existing cookies.</p>\n\n<p>See:</p>\n\n<ul>\n<li><a href=\"http://guides.rubyonrails.org/security.html#session-storage\" rel=\"nofollow\">Ruby on Rails Security Guide</a></li>\n</ul>\n"}], "owner": {"reputation": 1241, "user_id": 4402478, "user_type": "registered", "accept_rate": 32, "profile_image": "https://www.gravatar.com/avatar/6db20762ebe145c59b6e10eb68955678?s=128&d=identicon&r=PG&f=1", "display_name": "user", "link": "https://stackoverflow.com/users/4402478/user"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1459360820, "creation_date": 1459358801, "question_id": 36315701, "link": "https://stackoverflow.com/questions/36315701/rails-session-still-alive-after-dbdrop", "title": "Rails session still alive after db:drop", "body": "<p>I'm curious  why <code>session</code> left alive after <code>rake db:drop</code>?</p>\n\n<p>I have </p>\n\n<pre><code>  def current_order\n    if !session[:order_id].nil?\n     @current_order =  Order.find(session[:order_id])\n    else\n      Order.new\n    end\n  end\n  helper_method :current_order\n</code></pre>\n\n<p>and after rake db:drop it gives me exception </p>\n\n<pre><code>Couldn't find Order with 'id' = my session number\n&gt;&gt; session[:order_id]\n=&gt; 11\n</code></pre>\n\n<p>that means session still there. But Why?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "amazon-web-services", "amazon-ec2", "redis"], "comments": [{"owner": {"reputation": 42040, "user_id": 4237701, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/OeLef.jpg?s=128&g=1", "display_name": "helloV", "link": "https://stackoverflow.com/users/4237701/hellov"}, "edited": false, "score": 1, "creation_date": 1459358693, "post_id": 36315624, "comment_id": 60254654, "body": "Is your <code>redis</code> server listening on 127.0.0.1:6379 or 0.0.0.0:6379 (Check netstat output)"}, {"owner": {"reputation": 40732, "user_id": 984621, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/817afccebcbe3a4983a5e8c584f30373?s=128&d=identicon&r=PG", "display_name": "user984621", "link": "https://stackoverflow.com/users/984621/user984621"}, "reply_to_user": {"reputation": 42040, "user_id": 4237701, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/OeLef.jpg?s=128&g=1", "display_name": "helloV", "link": "https://stackoverflow.com/users/4237701/hellov"}, "edited": false, "score": 0, "creation_date": 1459359514, "post_id": 36315624, "comment_id": 60255071, "body": "Hey @helloV, when I log in to the redis instance, <code>netstat -nlp</code> doesn&#39;t show redis in the output. When I run redis (<code>redis-server</code>), I see <code>17:36:04.274 * The server is now ready to accept connections on port 6379</code>."}, {"owner": {"reputation": 42040, "user_id": 4237701, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/OeLef.jpg?s=128&g=1", "display_name": "helloV", "link": "https://stackoverflow.com/users/4237701/hellov"}, "edited": false, "score": 0, "creation_date": 1459359645, "post_id": 36315624, "comment_id": 60255143, "body": "What is the output of: <code>sudo netstat -plan | grep -i redis</code>"}, {"owner": {"reputation": 40732, "user_id": 984621, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/817afccebcbe3a4983a5e8c584f30373?s=128&d=identicon&r=PG", "display_name": "user984621", "link": "https://stackoverflow.com/users/984621/user984621"}, "reply_to_user": {"reputation": 42040, "user_id": 4237701, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/OeLef.jpg?s=128&g=1", "display_name": "helloV", "link": "https://stackoverflow.com/users/4237701/hellov"}, "edited": false, "score": 0, "creation_date": 1459359882, "post_id": 36315624, "comment_id": 60255285, "body": "This is the output: <code>tcp        0      0 0.0.0.0:6379            0.0.0.0:*               LISTEN      1237&#47;redis-server * tcp6       0      0 :::6379                 :::*                    LISTEN      1237&#47;redis-server *</code>"}, {"owner": {"reputation": 42040, "user_id": 4237701, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/OeLef.jpg?s=128&g=1", "display_name": "helloV", "link": "https://stackoverflow.com/users/4237701/hellov"}, "edited": false, "score": 0, "creation_date": 1459360678, "post_id": 36315624, "comment_id": 60255779, "body": "It is listening for all connections which is correct. Is there a firewall rule? If you could post the error message, we may get a clue."}, {"owner": {"reputation": 40732, "user_id": 984621, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/817afccebcbe3a4983a5e8c584f30373?s=128&d=identicon&r=PG", "display_name": "user984621", "link": "https://stackoverflow.com/users/984621/user984621"}, "reply_to_user": {"reputation": 42040, "user_id": 4237701, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/OeLef.jpg?s=128&g=1", "display_name": "helloV", "link": "https://stackoverflow.com/users/4237701/hellov"}, "edited": false, "score": 0, "creation_date": 1459361061, "post_id": 36315624, "comment_id": 60256038, "body": "Ok, I just noticed that the Redis instance was terminated. So I started it, which automatically change the IP of the server. So I update this IP address in the Rails app and then when I loaded the app, I got a different error: <code>ActionView::Template::Error (getaddrinfo: Name or service not known):</code> - on the rows in the views where is used caching. Tried to restart the server (unicorn), but it didn&#39;t help."}, {"owner": {"reputation": 40732, "user_id": 984621, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/817afccebcbe3a4983a5e8c584f30373?s=128&d=identicon&r=PG", "display_name": "user984621", "link": "https://stackoverflow.com/users/984621/user984621"}, "reply_to_user": {"reputation": 42040, "user_id": 4237701, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/OeLef.jpg?s=128&g=1", "display_name": "helloV", "link": "https://stackoverflow.com/users/4237701/hellov"}, "edited": false, "score": 0, "creation_date": 1459361252, "post_id": 36315624, "comment_id": 60256157, "body": "Also, I tried to log in to the EC2 Redis instance and run <code>redis-server</code>, but the same result/error."}, {"owner": {"reputation": 40732, "user_id": 984621, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/817afccebcbe3a4983a5e8c584f30373?s=128&d=identicon&r=PG", "display_name": "user984621", "link": "https://stackoverflow.com/users/984621/user984621"}, "reply_to_user": {"reputation": 42040, "user_id": 4237701, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/OeLef.jpg?s=128&g=1", "display_name": "helloV", "link": "https://stackoverflow.com/users/4237701/hellov"}, "edited": false, "score": 0, "creation_date": 1459362774, "post_id": 36315624, "comment_id": 60257251, "body": "As-of-now solution: in <code>config&#47;environments&#47;production.rb</code>, I changed <code>config.action_controller.perform_caching = true</code> to <code>config.action_controller.perform_caching = false</code> and now it seems to be working."}], "owner": {"reputation": 40732, "user_id": 984621, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/817afccebcbe3a4983a5e8c584f30373?s=128&d=identicon&r=PG", "display_name": "user984621", "link": "https://stackoverflow.com/users/984621/user984621"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 505, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1459358514, "creation_date": 1459358514, "question_id": 36315624, "link": "https://stackoverflow.com/questions/36315624/how-to-connect-from-one-ec2-instance-to-another-ec2-redis-instance", "title": "How to connect from one EC2 instance to another EC2 (Redis) instance?", "body": "<p>I have 2 EC2 instances - on one is installed a Rails app (and connected to RDS MySQL database). This works well.\nThen I created another EC2 instance where is installed Redis. I have defined here a user, port, password and namespace.</p>\n\n<p>However, I am having issues to successfully connect there.</p>\n\n<p>Here are 2 places in my Rails app where I am trying to connect to this Redis instance:</p>\n\n<p><code>deploy/production.rb</code>:</p>\n\n<pre><code>  config.cache_store = :redis_store, { host:      \"deployer_redis:IP\",\n                                       port:      6379,\n                                       db:        env_num,\n                                       password:  \"...my password...\",\n                                       namespace: \"cache\" }\n</code></pre>\n\n<p>and\n<code>config/initializers/sidekiq.rb</code>:</p>\n\n<pre><code>  Sidekiq.configure_server do |config|\n    config.redis = { url:       \"redis://deployer_redis:password_here@IP:6379/#{env_num}\", \n                     namespace: \"sidekiq_shiptis_com_#{Rails.env}\" }\n  end\n\n  Sidekiq.configure_client do |config|\n    config.redis = { url:       \"redis://deployer_redis:password_here@IP:6379/#{env_num}\", \n                     namespace: \"sidekiq_shiptis_com_#{Rails.env}\" }\n  end\n</code></pre>\n\n<p>But when I try to deploy the code, capistrano fails because the app cannot connect to the remote Redis host.</p>\n\n<p>When I looked on the security group of this Redis EC2 instance (t2.micro), it's name is <strong>launch-wizard-5</strong> and there are these inbound rules:</p>\n\n<pre><code>SSH                TCP      22    0.0.0.0/0\nCustom TCP Rule    TCP    6379    0.0.0.0/0\n</code></pre>\n\n<p>What piece of config am I missing?\nHow to make the EC2 Rails instance communicate with EC2 Redis instance?</p>\n\n<p>Thank you.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "server", "rvm"], "comments": [{"owner": {"reputation": 10323, "user_id": 1220355, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cb2525ec6155e479bdefe9ed6c437d07?s=128&d=identicon&r=PG", "display_name": "Anthony E", "link": "https://stackoverflow.com/users/1220355/anthony-e"}, "edited": false, "score": 0, "creation_date": 1459358287, "post_id": 36315518, "comment_id": 60254424, "body": "It looks like you&#39;re using Ruby 2.0.0 in your environment. What do you  get if you run <code>ruby -v</code>?"}, {"owner": {"reputation": 417, "user_id": 3606009, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/0a6f5de049352dfc04c0d4124bd35793?s=128&d=identicon&r=PG&f=1", "display_name": "user146303", "link": "https://stackoverflow.com/users/3606009/user146303"}, "reply_to_user": {"reputation": 10323, "user_id": 1220355, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cb2525ec6155e479bdefe9ed6c437d07?s=128&d=identicon&r=PG", "display_name": "Anthony E", "link": "https://stackoverflow.com/users/1220355/anthony-e"}, "edited": false, "score": 0, "creation_date": 1459358414, "post_id": 36315518, "comment_id": 60254503, "body": "It says: ruby 2.3.0p0 (2015-12-25 revision 53290) [x86_64-darwin14] when I run ruby -v, but is it possible that I have both and rvm isn&#39;t working correctly?"}, {"owner": {"reputation": 10323, "user_id": 1220355, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cb2525ec6155e479bdefe9ed6c437d07?s=128&d=identicon&r=PG", "display_name": "Anthony E", "link": "https://stackoverflow.com/users/1220355/anthony-e"}, "edited": false, "score": 0, "creation_date": 1459358462, "post_id": 36315518, "comment_id": 60254518, "body": "Just FYI, <code>apt-get</code> is a command specific to Debian Linux. Homebrew would be the equivalent on Mac."}, {"owner": {"reputation": 417, "user_id": 3606009, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/0a6f5de049352dfc04c0d4124bd35793?s=128&d=identicon&r=PG&f=1", "display_name": "user146303", "link": "https://stackoverflow.com/users/3606009/user146303"}, "reply_to_user": {"reputation": 10323, "user_id": 1220355, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cb2525ec6155e479bdefe9ed6c437d07?s=128&d=identicon&r=PG", "display_name": "Anthony E", "link": "https://stackoverflow.com/users/1220355/anthony-e"}, "edited": false, "score": 0, "creation_date": 1459358543, "post_id": 36315518, "comment_id": 60254563, "body": "@AnthonyE ohh of course thank you! Perhaps I should try: sudo brew install ruby2.3.0-dev --- ok this didn&#39;t work. I just got: No available formula with the name &quot;ruby2.3.0-dev&quot;"}, {"owner": {"reputation": 10323, "user_id": 1220355, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cb2525ec6155e479bdefe9ed6c437d07?s=128&d=identicon&r=PG", "display_name": "Anthony E", "link": "https://stackoverflow.com/users/1220355/anthony-e"}, "edited": false, "score": 0, "creation_date": 1459358674, "post_id": 36315518, "comment_id": 60254639, "body": "No, I wouldn&#39;t recommend that. If you&#39;re using RVM you should stick to that to prevent conflicts."}, {"owner": {"reputation": 10323, "user_id": 1220355, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cb2525ec6155e479bdefe9ed6c437d07?s=128&d=identicon&r=PG", "display_name": "Anthony E", "link": "https://stackoverflow.com/users/1220355/anthony-e"}, "edited": false, "score": 0, "creation_date": 1459358709, "post_id": 36315518, "comment_id": 60254665, "body": "Are you able update your Ruby gems? <code>gem update --system</code>"}, {"owner": {"reputation": 10323, "user_id": 1220355, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cb2525ec6155e479bdefe9ed6c437d07?s=128&d=identicon&r=PG", "display_name": "Anthony E", "link": "https://stackoverflow.com/users/1220355/anthony-e"}, "edited": false, "score": 0, "creation_date": 1459358793, "post_id": 36315518, "comment_id": 60254698, "body": "You&#39;ve already installed your developer tools with XCode, right? (<code>xcode-select --install</code>)"}, {"owner": {"reputation": 417, "user_id": 3606009, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/0a6f5de049352dfc04c0d4124bd35793?s=128&d=identicon&r=PG&f=1", "display_name": "user146303", "link": "https://stackoverflow.com/users/3606009/user146303"}, "reply_to_user": {"reputation": 10323, "user_id": 1220355, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cb2525ec6155e479bdefe9ed6c437d07?s=128&d=identicon&r=PG", "display_name": "Anthony E", "link": "https://stackoverflow.com/users/1220355/anthony-e"}, "edited": false, "score": 0, "creation_date": 1459359127, "post_id": 36315518, "comment_id": 60254859, "body": "@AnthonyE yes I believe I did that a while ago -- when I run xcode-select -p I get : /Applications/Xcode.app/Contents/Developer --- but after running gem update --system, rails will start to launch and then exit (see edit above)"}], "answers": [{"tags": [], "owner": {"reputation": 417, "user_id": 3606009, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/0a6f5de049352dfc04c0d4124bd35793?s=128&d=identicon&r=PG&f=1", "display_name": "user146303", "link": "https://stackoverflow.com/users/3606009/user146303"}, "is_accepted": true, "score": 1, "last_activity_date": 1459359725, "creation_date": 1459359725, "answer_id": 36315965, "question_id": 36315518, "link": "https://stackoverflow.com/questions/36315518/cant-launch-rails-server-after-reinstalling-rvm-rails/36315965#36315965", "title": "Can&#39;t launch rails server after reinstalling rvm/rails", "body": "<p>This appeared to solve the problem:</p>\n\n<p>For the first issue--</p>\n\n<p>run</p>\n\n<pre><code>gem update --system\n</code></pre>\n\n<p>For second issue --</p>\n\n<p>in your enviroment.rb file, cut any line starting with config and paste into your production.rb/development.rb/test.rb instead.</p>\n"}], "owner": {"reputation": 417, "user_id": 3606009, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/0a6f5de049352dfc04c0d4124bd35793?s=128&d=identicon&r=PG&f=1", "display_name": "user146303", "link": "https://stackoverflow.com/users/3606009/user146303"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 980, "favorite_count": 0, "accepted_answer_id": 36315965, "answer_count": 1, "score": 2, "last_activity_date": 1459359725, "creation_date": 1459358175, "last_edit_date": 1495541775, "question_id": 36315518, "link": "https://stackoverflow.com/questions/36315518/cant-launch-rails-server-after-reinstalling-rvm-rails", "title": "Can&#39;t launch rails server after reinstalling rvm/rails", "body": "<p>I recently had to uninstall rvm and then reinstall rvm and reinstall rails --</p>\n\n<p>It appears that rails didn't install correctly because I can't launch rails s. I'm working with ruby 2.3.0, and ran sudo gem install rails to get the latest version of rails. </p>\n\n<p>After installing and running bundle install and bundle update, I got this error</p>\n\n<pre><code>/System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/tmpdir.rb:85:in `mkdir': ERROR: Failed to build gem native extension. (Gem::Ext::BuildError)\n\n    Permission denied - ./.gem.20160330-64997-1erpjjg\n\nGem files will remain installed in /Users/chloe/.rvm/gems/ruby-2.3.0@global/gems/nokogiri-1.6.7.2 for inspection.\nResults logged to /Users/chloe/.rvm/gems/ruby-2.3.0@global/extensions/universal-darwin-14/2.0.0/nokogiri-1.6.7.2/gem_make.out\n    from /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/tmpdir.rb:85:in `block in mktmpdir'\n    from /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/tmpdir.rb:142:in `create'\n    from /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/tmpdir.rb:85:in `mktmpdir'\n    from /Library/Ruby/Site/2.0.0/rubygems/ext/ext_conf_builder.rb:14:in `build'\n    from /Library/Ruby/Site/2.0.0/rubygems/ext/builder.rb:161:in `block (2 levels) in build_extension'\n    from /Library/Ruby/Site/2.0.0/rubygems/ext/builder.rb:160:in `chdir'\n    from /Library/Ruby/Site/2.0.0/rubygems/ext/builder.rb:160:in `block in build_extension'\n    from /Library/Ruby/Site/2.0.0/rubygems/ext/builder.rb:159:in `synchronize'\n    from /Library/Ruby/Site/2.0.0/rubygems/ext/builder.rb:159:in `build_extension'\n    from /Library/Ruby/Site/2.0.0/rubygems/ext/builder.rb:198:in `block in build_extensions'\n    from /Library/Ruby/Site/2.0.0/rubygems/ext/builder.rb:195:in `each'\n    from /Library/Ruby/Site/2.0.0/rubygems/ext/builder.rb:195:in `build_extensions'\n    from /Library/Ruby/Site/2.0.0/rubygems/specification.rb:1436:in `block in build_extensions'\n    from /Library/Ruby/Site/2.0.0/rubygems/user_interaction.rb:45:in `use_ui'\n    from /Library/Ruby/Site/2.0.0/rubygems/specification.rb:1434:in `build_extensions'\n    from /Library/Ruby/Site/2.0.0/rubygems/stub_specification.rb:60:in `build_extensions'\n    from /Library/Ruby/Site/2.0.0/rubygems/basic_specification.rb:56:in `contains_requirable_file?'\n    from /Library/Ruby/Site/2.0.0/rubygems/core_ext/kernel_require.rb:68:in `block in require'\n    from /Library/Ruby/Site/2.0.0/rubygems/core_ext/kernel_require.rb:67:in `each'\n    from /Library/Ruby/Site/2.0.0/rubygems/core_ext/kernel_require.rb:67:in `find'\n    from /Library/Ruby/Site/2.0.0/rubygems/core_ext/kernel_require.rb:67:in `require'\n    from /Users/chloe/.rvm/gems/ruby-2.3.0@global/gems/railties-4.2.6/bin/rails:9:in `&lt;top (required)&gt;'\n    from /usr/bin/rails:22:in `load'\n    from /usr/bin/rails:22:in `&lt;main&gt;'\n</code></pre>\n\n<p>I tried using the solution from <a href=\"https://stackoverflow.com/questions/9074893/undefined-local-variable-or-method-config-for-mainobject-rails\">this</a> question, but got 'apt-get command not found' --- but I apologize if this requires a similar solution!</p>\n\n<p>I'm using Mac OSX</p>\n\n<p>EDIT ****</p>\n\n<p>after updating gems with gem update ---system, I have a new error message:</p>\n\n<pre><code>=&gt; Booting WEBrick\n=&gt; Rails 4.1.4 application starting in development on http://0.0.0.0:3000\n=&gt; Run `rails server -h` for more startup options\n=&gt; Notice: server is listening on all interfaces (0.0.0.0). Consider using 127.0.0.1 (--binding option)\n=&gt; Ctrl-C to shutdown server\nExiting\n/Users/chloe/sites/bookshelf/config/environment.rb:7:in `&lt;top (required)&gt;': undefined local variable or method `config' for main:Object (NameError)\n    from /Users/chloe/sites/bookshelf/config.ru:3:in `require'\n    from /Users/chloe/sites/bookshelf/config.ru:3:in `block in &lt;main&gt;'\n    from /Users/chloe/.rvm/gems/ruby-2.3.0/gems/rack-1.5.5/lib/rack/builder.rb:55:in `instance_eval'\n    from /Users/chloe/.rvm/gems/ruby-2.3.0/gems/rack-1.5.5/lib/rack/builder.rb:55:in `initialize'\n    from /Users/chloe/sites/bookshelf/config.ru:in `new'\n    from /Users/chloe/sites/bookshelf/config.ru:in `&lt;main&gt;'\n    from /Users/chloe/.rvm/gems/ruby-2.3.0/gems/rack-1.5.5/lib/rack/builder.rb:49:in `eval'\n    from /Users/chloe/.rvm/gems/ruby-2.3.0/gems/rack-1.5.5/lib/rack/builder.rb:49:in `new_from_string'\n    from /Users/chloe/.rvm/gems/ruby-2.3.0/gems/rack-1.5.5/lib/rack/builder.rb:40:in `parse_file'\n    from /Users/chloe/.rvm/gems/ruby-2.3.0/gems/rack-1.5.5/lib/rack/server.rb:277:in `build_app_and_options_from_config'\n    from /Users/chloe/.rvm/gems/ruby-2.3.0/gems/rack-1.5.5/lib/rack/server.rb:199:in `app'\n    from /Users/chloe/.rvm/gems/ruby-2.3.0/gems/railties-4.1.4/lib/rails/commands/server.rb:50:in `app'\n    from /Users/chloe/.rvm/gems/ruby-2.3.0/gems/rack-1.5.5/lib/rack/server.rb:314:in `wrapped_app'\n    from /Users/chloe/.rvm/gems/ruby-2.3.0/gems/railties-4.1.4/lib/rails/commands/server.rb:130:in `log_to_stdout'\n    from /Users/chloe/.rvm/gems/ruby-2.3.0/gems/railties-4.1.4/lib/rails/commands/server.rb:67:in `start'\n    from /Users/chloe/.rvm/gems/ruby-2.3.0/gems/railties-4.1.4/lib/rails/commands/commands_tasks.rb:81:in `block in server'\n    from /Users/chloe/.rvm/gems/ruby-2.3.0/gems/railties-4.1.4/lib/rails/commands/commands_tasks.rb:76:in `tap'\n    from /Users/chloe/.rvm/gems/ruby-2.3.0/gems/railties-4.1.4/lib/rails/commands/commands_tasks.rb:76:in `server'\n    from /Users/chloe/.rvm/gems/ruby-2.3.0/gems/railties-4.1.4/lib/rails/commands/commands_tasks.rb:40:in `run_command!'\n    from /Users/chloe/.rvm/gems/ruby-2.3.0/gems/railties-4.1.4/lib/rails/commands.rb:17:in `&lt;top (required)&gt;'\n    from /Users/chloe/sites/bookshelf/bin/rails:9:in `require'\n    from /Users/chloe/sites/bookshelf/bin/rails:9:in `&lt;top (required)&gt;'\n    from /Users/chloe/.rvm/gems/ruby-2.3.0/gems/spring-1.6.4/lib/spring/client/rails.rb:28:in `load'\n    from /Users/chloe/.rvm/gems/ruby-2.3.0/gems/spring-1.6.4/lib/spring/client/rails.rb:28:in `call'\n    from /Users/chloe/.rvm/gems/ruby-2.3.0/gems/spring-1.6.4/lib/spring/client/command.rb:7:in `call'\n    from /Users/chloe/.rvm/gems/ruby-2.3.0/gems/spring-1.6.4/lib/spring/client.rb:28:in `run'\n    from /Users/chloe/.rvm/gems/ruby-2.3.0/gems/spring-1.6.4/bin/spring:49:in `&lt;top (required)&gt;'\n    from /Users/chloe/.rvm/gems/ruby-2.3.0/gems/spring-1.6.4/lib/spring/binstub.rb:11:in `load'\n    from /Users/chloe/.rvm/gems/ruby-2.3.0/gems/spring-1.6.4/lib/spring/binstub.rb:11:in `&lt;top (required)&gt;'\n    from /Users/chloe/sites/bookshelf/bin/spring:13:in `require'\n    from /Users/chloe/sites/bookshelf/bin/spring:13:in `&lt;top (required)&gt;'\n    from bin/rails:3:in `load'\n    from bin/rails:3:in `&lt;main&gt;'\n  [1]: https://stackoverflow.com/questions/7645918/require-no-such-file-to-load-mkmf-loaderror\n</code></pre>\n\n<p>****SOLUTION****</p>\n\n<p>the solution from <a href=\"https://stackoverflow.com/questions/9074893/undefined-local-variable-or-method-config-for-mainobject-rails\">this</a> question appeared to fix it:</p>\n\n<p>in your enviroment.rb file, cut any line starting with config and paste into your production.rb/development.rb/test.rb instead.</p>\n"}, {"tags": ["ruby", "heroku", "slack"], "comments": [{"owner": {"reputation": 737, "user_id": 1254263, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48dd0578cffb6439d6b0fab3926a7095?s=128&d=identicon&r=PG", "display_name": "maxbeizer", "link": "https://stackoverflow.com/users/1254263/maxbeizer"}, "edited": false, "score": 0, "creation_date": 1459360373, "post_id": 36315378, "comment_id": 60255578, "body": "Are you running into this issue on the lita bot instance? lita-destiny is a plugin that you add to your lita bot."}, {"owner": {"user_type": "does_not_exist", "display_name": "user5784310"}, "reply_to_user": {"reputation": 737, "user_id": 1254263, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48dd0578cffb6439d6b0fab3926a7095?s=128&d=identicon&r=PG", "display_name": "maxbeizer", "link": "https://stackoverflow.com/users/1254263/maxbeizer"}, "edited": false, "score": 0, "creation_date": 1459360577, "post_id": 36315378, "comment_id": 60255710, "body": "@M00B this occurs when I do the push master to deploy to heroku"}, {"owner": {"reputation": 737, "user_id": 1254263, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48dd0578cffb6439d6b0fab3926a7095?s=128&d=identicon&r=PG", "display_name": "maxbeizer", "link": "https://stackoverflow.com/users/1254263/maxbeizer"}, "edited": false, "score": 0, "creation_date": 1459361039, "post_id": 36315378, "comment_id": 60256025, "body": "Push master of what repo? Your lita bot?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user5784310"}, "reply_to_user": {"reputation": 737, "user_id": 1254263, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48dd0578cffb6439d6b0fab3926a7095?s=128&d=identicon&r=PG", "display_name": "maxbeizer", "link": "https://stackoverflow.com/users/1254263/maxbeizer"}, "edited": false, "score": 0, "creation_date": 1459361126, "post_id": 36315378, "comment_id": 60256076, "body": "@M00B when I&#39;m in the directory of that lita-destiny bot, which pushes to the heroku server"}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user5784310"}, "edited": false, "score": 0, "creation_date": 1459362460, "post_id": 36316735, "comment_id": 60256998, "body": "After doing git pish master it says no gemfile.lock file is foind"}, {"owner": {"reputation": 737, "user_id": 1254263, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48dd0578cffb6439d6b0fab3926a7095?s=128&d=identicon&r=PG", "display_name": "maxbeizer", "link": "https://stackoverflow.com/users/1254263/maxbeizer"}, "edited": false, "score": 0, "creation_date": 1459362821, "post_id": 36316735, "comment_id": 60257278, "body": "Forget a step. my bad. Updating answer."}, {"owner": {"user_type": "does_not_exist", "display_name": "user5784310"}, "edited": false, "score": 0, "creation_date": 1459369826, "post_id": 36316735, "comment_id": 60261527, "body": "how do I add the destiny-lita plugin to my gemfile. And how do I add this to my slack bot (lita)"}, {"owner": {"user_type": "does_not_exist", "display_name": "user5784310"}, "edited": false, "score": 0, "creation_date": 1459370338, "post_id": 36316735, "comment_id": 60261802, "body": "I&#39;m using heroku, which has all the api key and slack token information"}, {"owner": {"reputation": 737, "user_id": 1254263, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48dd0578cffb6439d6b0fab3926a7095?s=128&d=identicon&r=PG", "display_name": "maxbeizer", "link": "https://stackoverflow.com/users/1254263/maxbeizer"}, "edited": false, "score": 0, "creation_date": 1459371726, "post_id": 36316735, "comment_id": 60262632, "body": "Yes, but you call it from your <code>lita_config.rb</code>, e.g. ENV[&quot;SLACK_API_TOKEN&quot;]"}, {"owner": {"reputation": 737, "user_id": 1254263, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48dd0578cffb6439d6b0fab3926a7095?s=128&d=identicon&r=PG", "display_name": "maxbeizer", "link": "https://stackoverflow.com/users/1254263/maxbeizer"}, "edited": false, "score": 0, "creation_date": 1459371987, "post_id": 36316735, "comment_id": 60262760, "body": "oh and to add it to your lita bot: gem &#39;lita-destiny&#39; to your bot&#39;s Gemfile and bundle install. Update the lita_config as necessary."}, {"owner": {"reputation": 737, "user_id": 1254263, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48dd0578cffb6439d6b0fab3926a7095?s=128&d=identicon&r=PG", "display_name": "maxbeizer", "link": "https://stackoverflow.com/users/1254263/maxbeizer"}, "edited": false, "score": 0, "creation_date": 1459372780, "post_id": 36316735, "comment_id": 60263191, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/107785/discussion-between-m00b-and-adam-hindle\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 737, "user_id": 1254263, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48dd0578cffb6439d6b0fab3926a7095?s=128&d=identicon&r=PG", "display_name": "maxbeizer", "link": "https://stackoverflow.com/users/1254263/maxbeizer"}, "is_accepted": false, "score": 0, "last_activity_date": 1459362860, "last_edit_date": 1459362860, "creation_date": 1459362158, "answer_id": 36316735, "question_id": 36315378, "link": "https://stackoverflow.com/questions/36315378/push-rejected-failed-to-detect-set-buildpack-heroku-ruby/36316735#36316735", "title": "Push rejected failed to detect set buildpack heroku/ruby", "body": "<p>If I am understanding your question correctly, there is a fundamental misunderstanding about how lita works. The <a href=\"https://github.com/litaio/lita\" rel=\"nofollow\">lita gem</a> has an executable (<code>lita new</code>) that creates a new lita bot for you. You then add plugins like lita-destiny to the Gemfile of your lita bot.</p>\n\n<p>So you are getting this error because you are not pushing code that Heroku recognizes as a Ruby app-- you are pushing a gem.</p>\n\n<p>What you should do is</p>\n\n<pre><code>cd ../some/place/else\ngem install lita\nlita new\ncd lita\necho 'web: bundle exec lita' &gt;&gt; Procfile\nbundle install\ngit init\ngit add .\ngit commit -m 'Initial commit'\nheroku apps:create\ngit push heroku master\n</code></pre>\n\n<p>Then you can add the lita-destiny plugin to the Gemfile of your lita bot (the project you just created above) and add <code>config.handlers.destiny_handler.api_key = 'XXXX'</code> to the <code>lita_config.rb</code> file in that same project. You also add your Slack API Key to the <code>lita_config.rb</code> file.</p>\n\n<p>Source: <a href=\"https://docs.lita.io/getting-started/installation/\" rel=\"nofollow\">lita docs</a> and <a href=\"https://devcenter.heroku.com/articles/creating-apps\" rel=\"nofollow\">heroku docs</a></p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user5784310"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 168, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1459383695, "creation_date": 1459357741, "last_edit_date": 1459383695, "question_id": 36315378, "link": "https://stackoverflow.com/questions/36315378/push-rejected-failed-to-detect-set-buildpack-heroku-ruby", "title": "Push rejected failed to detect set buildpack heroku/ruby", "body": "<p>I'm attempting to add the following project to my slack chat \"<a href=\"https://github.com/PDaily/lita-destiny\" rel=\"nofollow\">https://github.com/PDaily/lita-destiny</a>\" I have added the lita integration on my slack chat. I've made a new app on the heroku site, I've added to the global config vars, my LITA_TOKEN, GITHUB_URL and by BUNGIE_API_KEY. I've used cmd and the heroku toolkit and logged in to heroku. I've then changed directory to where the lita-destiny folder is located. I've then done </p>\n\n<pre><code>Bundle install\nGit add. \nGit add -u\nGit commit -m \"heroku\" \nGit push heroku master.\n</code></pre>\n\n<p>I've installed all the native gems, also in the root of that folder is a gemfile. \nHowever I get the error in the title there. I've also performed </p>\n\n<blockquote>\n  <p>heroku buildpacks:set heroku/ruby</p>\n</blockquote>\n\n<pre><code>2016-03-31T00:14:25+00:00 app[heroku-redis]: source=REDIS sample#active-connections=1 sample#load-avg-1m=0.33 sample#load-avg-5m=0.24 sample#load-avg-15m=0.215 sample#read-iops=0 sample#write-iops=0 sample#memory-total=15405632.0kB sample#memory-free=13328628.0kB sample#memory-cached=482376kB sample#memory-redis=294048bytes sample#hit-rate=1 sample#evicted-keys=0\n2016-03-31T00:15:24+00:00 app[heroku-redis]: source=REDIS sample#active-connections=1 sample#load-avg-1m=0.255 sample#load-avg-5m=0.235 sample#load-avg-15m=0.215 sample#read-iops=0 sample#write-iops=0 sample#memory-total=15405632.0kB sample#memory-free=13328504.0kB sample#memory-cached=482372kB sample#memory-redis=294048bytes sample#hit-rate=1 sample#evicted-keys=0\n2016-03-31T00:16:48.562723+00:00 heroku[api]: Release v12 created by munkeyboy14@gmail.com\n2016-03-31T00:16:48.562723+00:00 heroku[api]: Deploy 97376bc by munkeyboy14@gmail.com\n2016-03-31T00:16:48.723963+00:00 heroku[slug-compiler]: Slug compilation started\n2016-03-31T00:16:48.723974+00:00 heroku[slug-compiler]: Slug compilation finished\n2016-03-31T00:16:48.698905+00:00 heroku[web.1]: State changed from crashed to starting\n2016-03-31T00:16:48+00:00 app[heroku-redis]: source=REDIS sample#active-connections=1 sample#load-avg-1m=0.22 sample#load-avg-5m=0.24 sample#load-avg-15m=0.22 sample#read-iops=0 sample#write-iops=0 sample#memory-total=15405632.0kB sample#memory-free=13328232.0kB sample#memory-cached=482380kB sample#memory-redis=294048bytes sample#hit-rate=1 sample#evicted-keys=0\n2016-03-31T00:16:50.125875+00:00 heroku[web.1]: Starting process with command `bundle exec lita`\n2016-03-31T00:16:52.409755+00:00 app[web.1]: /app/vendor/bundle/ruby/2.2.0/gems/lita-slack-1.7.2/lib/lita/adapters/slack/api.rb:63:in `call_api': Slack API call to rtm.start returned an error: invalid_auth. (RuntimeError)\n2016-03-31T00:16:52.409772+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.2.0/gems/lita-slack-1.7.2/lib/lita/adapters/slack/api.rb:38:in `rtm_start'\n2016-03-31T00:16:52.409773+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.2.0/gems/lita-slack-1.7.2/lib/lita/adapters/slack/rtm_connection.rb:20:in `build'\n2016-03-31T00:16:52.409774+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.2.0/gems/lita-slack-1.7.2/lib/lita/adapters/slack.rb:22:in `run'\n2016-03-31T00:16:52.409774+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.2.0/gems/lita-4.7.0/lib/lita/robot.rb:80:in `run'\n2016-03-31T00:16:52.409775+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.2.0/gems/lita-4.7.0/lib/lita.rb:80:in `run'\n2016-03-31T00:16:52.409776+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.2.0/gems/lita-4.7.0/lib/lita/cli.rb:77:in `start'\n2016-03-31T00:16:52.409778+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.2.0/gems/thor-0.19.1/lib/thor/command.rb:27:in `run'\n2016-03-31T00:16:52.409778+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.2.0/gems/thor-0.19.1/lib/thor/invocation.rb:126:in `invoke_command'\n2016-03-31T00:16:52.409779+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.2.0/gems/thor-0.19.1/lib/thor.rb:359:in `dispatch'\n2016-03-31T00:16:52.409780+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.2.0/gems/thor-0.19.1/lib/thor/base.rb:440:in `start'\n2016-03-31T00:16:52.409800+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.2.0/bin/lita:23:in `load'\n2016-03-31T00:16:52.409782+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.2.0/gems/lita-4.7.0/bin/lita:6:in `&lt;top (required)&gt;'\n2016-03-31T00:16:52.409800+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.2.0/bin/lita:23:in `&lt;main&gt;'\n2016-03-31T00:16:53.126028+00:00 heroku[web.1]: Process exited with status 1\n2016-03-31T00:16:53.137278+00:00 heroku[web.1]: State changed from starting to crashed\n</code></pre>\n\n<p>above is the latest error message from heroku logs</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "blogs"], "comments": [{"owner": {"reputation": 860, "user_id": 1757348, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8424e42d9c411687d8b72facee6c4753?s=128&d=identicon&r=PG", "display_name": "isaacsloan", "link": "https://stackoverflow.com/users/1757348/isaacsloan"}, "edited": false, "score": 0, "creation_date": 1459360930, "post_id": 36315277, "comment_id": 60255956, "body": "Hopefully this will help.  <code>&lt;%= form_for([@post, @post.comments.build]) do |f| %&gt; </code> Tells it to post to the post_comments_path(post_id). This requires you to have that route and controller setup.   <code>render @post.comments </code>Tells it to render a collection as @post.comments returns an array of ActiveRecord objects. Essentially it iterates of the array and renders the partial for each instance of comment.  <a href=\"http://api.rubyonrails.org/classes/ActionView/PartialRenderer.html\" rel=\"nofollow noreferrer\">api.rubyonrails.org/classes/ActionView/PartialRenderer.html</a>"}], "answers": [{"tags": [], "owner": {"reputation": 3022, "user_id": 336392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c144b7e260029f00b1efb08fb29bb023?s=128&d=identicon&r=PG", "display_name": "Thomas R. Koll", "link": "https://stackoverflow.com/users/336392/thomas-r-koll"}, "is_accepted": true, "score": 0, "last_activity_date": 1459357628, "creation_date": 1459357628, "answer_id": 36315333, "question_id": 36315277, "link": "https://stackoverflow.com/questions/36315277/how-does-blog-comments-works/36315333#36315333", "title": "How does blog comments works?", "body": "<p>When you pass an array to <code>render</code> as he does with <code>render @post.comments</code> then some magick happens and rails renders each comment using the <code>_comment</code> partial. It's all described in the <a href=\"http://api.rubyonrails.org/classes/ActionView/PartialRenderer.html\" rel=\"nofollow\">API</a>.</p>\n"}], "owner": {"reputation": 56, "user_id": 5719674, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/1079814265385415/picture?type=large", "display_name": "Ignacio Palma Balboa", "link": "https://stackoverflow.com/users/5719674/ignacio-palma-balboa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 33, "favorite_count": 0, "closed_date": 1459360514, "accepted_answer_id": 36315333, "answer_count": 1, "score": 0, "last_activity_date": 1459357628, "creation_date": 1459357428, "question_id": 36315277, "link": "https://stackoverflow.com/questions/36315277/how-does-blog-comments-works", "closed_reason": "Needs more focus", "title": "How does blog comments works?", "body": "<p>I was watching rails tutorial by mckenzie <a href=\"https://www.youtube.com/watch?v=BI_VnnOLSKY\" rel=\"nofollow\">https://www.youtube.com/watch?v=BI_VnnOLSKY</a> and cannot understand how he makes the comments work for each post. _form partial looks like this:</p>\n\n<pre><code>&lt;%= form_for([@post, @post.comments.build]) do |f| %&gt;\n&lt;p&gt;\n    &lt;%= f.label :name %&gt;\n    &lt;%= f.text_field :name %&gt;\n&lt;/p&gt;\n\n&lt;p&gt;\n    &lt;%= f.label :description %&gt;\n    &lt;%= f.text_area :description %&gt;\n&lt;/p&gt;\n\n&lt;p&gt;\n    &lt;%= f.submit %&gt;\n&lt;/p&gt;\n\n&lt;% end %&gt;\n</code></pre>\n\n<p>So why does he has to call for this [@post, @post.comments.build] ??</p>\n\n<p>Then he makes another partial for _comments that looks like this:</p>\n\n<pre><code>&lt;div&gt;\n    &lt;h3&gt;&lt;%= comment.name %&gt;&lt;/h3&gt;\n    &lt;p&gt;&lt;%= comment.description %&gt;&lt;/p&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>So, how is he able to just call for \"comment.name\" without using the @ sign if there is no loop going on like @comment.each do |comment|</p>\n\n<p>Then he renders everything in the post/show.html.erb like this:</p>\n\n<pre><code>&lt;h2&gt;&lt;%= @post.comments.count %&gt; Comments&lt;/h2&gt;\n&lt;%= render @post.comments %&gt;\n</code></pre>\n\n<p>In the second line how is the able to call for comments as a method just taking this for the _comment partial??</p>\n\n<p>Finally heres how the comments controller:</p>\n\n<pre><code>def create\n    @post = Post.find(params[:post_id])\n    @comment = @post.comments.create(comment_params)\n\n    redirect_to post_path(@post)\n\nend\n</code></pre>\n\n<p>Thanks a lot!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "model", "include", "has-many"], "answers": [{"comments": [{"owner": {"reputation": 431, "user_id": 1676959, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/L1rcL.png?s=128&g=1", "display_name": "kernification", "link": "https://stackoverflow.com/users/1676959/kernification"}, "edited": false, "score": 0, "creation_date": 1459358098, "post_id": 36315357, "comment_id": 60254318, "body": "Thanks, but what I&#39;m looking for is to associate an Item to either one or all users without having a many_to_many associaton but a &quot;all_users&quot; checkbox."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 431, "user_id": 1676959, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/L1rcL.png?s=128&g=1", "display_name": "kernification", "link": "https://stackoverflow.com/users/1676959/kernification"}, "edited": false, "score": 0, "creation_date": 1459359161, "post_id": 36315357, "comment_id": 60254875, "body": "I am not able to read your mind. Btw, this is impossible in relational db without manytomany."}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 0, "last_activity_date": 1459357676, "creation_date": 1459357676, "answer_id": 36315357, "question_id": 36315135, "link": "https://stackoverflow.com/questions/36315135/has-many-by-boolean-value-in-rails/36315357#36315357", "title": "has_many by boolean value in rails", "body": "<p><code>User.includes(:items)</code> just instructs rails SQL builder to load all <em>nested</em> items withing loaded users.</p>\n\n<p>That said, </p>\n\n<pre><code>User.includes(:items).all # will load all users with all nested items\nUser.includes(:items).where(name: 'Joe') # will load user(s) Joe and their items\n</code></pre>\n\n<p>this is done to minimize an amount of queries against the database.</p>\n\n<p>Whether one wants to load all <em>items</em>, the query on <code>Item</code> should be used, e.g.:</p>\n\n<pre><code>Item.where(user_id: User.find_by_name('Joe').pluck(:id))\n</code></pre>\n"}], "owner": {"reputation": 431, "user_id": 1676959, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/L1rcL.png?s=128&g=1", "display_name": "kernification", "link": "https://stackoverflow.com/users/1676959/kernification"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 121, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1459357676, "creation_date": 1459356988, "question_id": 36315135, "link": "https://stackoverflow.com/questions/36315135/has-many-by-boolean-value-in-rails", "title": "has_many by boolean value in rails", "body": "<p>In my ruby on rails app i have two models: User and Item</p>\n\n<p>In my user model I would like a relation where a user can have many items like this:</p>\n\n<pre><code>has_many :items\n</code></pre>\n\n<p>For the relationship I would not only use the user_id column in the items table.</p>\n\n<p>When I do </p>\n\n<pre><code>User.includes(:items) \n</code></pre>\n\n<p>I would rather have all items where\n- the items user_id belongs to the user (the classical way)\n- or e.g. a boolean column (like all_users) is true</p>\n\n<p>Can this be done with </p>\n\n<pre><code>has_many :items + any special options? \n</code></pre>\n\n<p>And how would it look like?</p>\n\n<p>Thanks &amp; Regards, Andreas</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1459356996, "post_id": 36315102, "comment_id": 60253567, "body": "Try <code>@h = {}.freeze</code>"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 5, "creation_date": 1459357075, "post_id": 36315102, "comment_id": 60253626, "body": "Also, there&#39;s a fundamental misunderstanding here of what is &quot;read-only&quot; with <code>attr_reader</code>. It is the <b>reference</b> to <code>h</code>, not the <b>contents</b> of <code>h</code>."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1459357229, "post_id": 36315102, "comment_id": 60253738, "body": "@SergioTulentsev in fact, <code>attr_reader</code> has absolutely nothing to do with access rights at all. <code>attr_reader</code> just a DSL to define <code>def attr ; @attr; end</code> instance function."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 1, "creation_date": 1459357289, "post_id": 36315102, "comment_id": 60253769, "body": "@mudasobwa: yeah, noticed the quotes? :)"}, {"owner": {"reputation": 325, "user_id": 6135922, "user_type": "registered", "accept_rate": 33, "profile_image": "https://lh4.googleusercontent.com/-QYnpiAr6_hg/AAAAAAAAAAI/AAAAAAAAAA0/6jPjc2OAbH4/photo.jpg?sz=128", "display_name": "Eduard Bondarenko", "link": "https://stackoverflow.com/users/6135922/eduard-bondarenko"}, "edited": false, "score": 0, "creation_date": 1459357393, "post_id": 36315102, "comment_id": 60253833, "body": "Yes, I understand it, understand what attr_reader does..but..anyway..looks weird in the context of attr_reader. With freeze works properly."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1459357512, "post_id": 36315102, "comment_id": 60253914, "body": "@EduardBondarenko: you have too high expectations for this method. It does much less than you think :)"}, {"owner": {"reputation": 41278, "user_id": 84631, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/181035f8aac1cb68d50dc58b67dc0349?s=128&d=identicon&r=PG", "display_name": "Mischa", "link": "https://stackoverflow.com/users/84631/mischa"}, "edited": false, "score": 2, "creation_date": 1459357642, "post_id": 36315102, "comment_id": 60254006, "body": "With <code>attr_reader :h</code> you only get the getter method (<code>h</code>), but not the setter (<code>h=</code>). So this won&#39;t work: <code>t.h = { &#39;name&#39; =&gt; &#39;somename&#39; }</code>. But in your code you&#39;re not using <code>h=</code>, you&#39;re using <a href=\"http://docs.ruby-lang.org/en/2.0.0/Hash.html#method-i-5B-5D-3D\" rel=\"nofollow noreferrer\">Hash&#39;s <code>[]=</code></a>."}], "answers": [{"comments": [{"owner": {"reputation": 41278, "user_id": 84631, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/181035f8aac1cb68d50dc58b67dc0349?s=128&d=identicon&r=PG", "display_name": "Mischa", "link": "https://stackoverflow.com/users/84631/mischa"}, "edited": false, "score": 1, "creation_date": 1459357362, "post_id": 36315201, "comment_id": 60253815, "body": "Exactly. That&#39;s why this doesn&#39;t work: <code>t.h = { &#39;name&#39; =&gt; &#39;somename&#39; }</code>"}], "tags": [], "owner": {"reputation": 16587, "user_id": 177053, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f6c516626d381a1ea383cedd1799486?s=128&d=identicon&r=PG", "display_name": "Vasfed", "link": "https://stackoverflow.com/users/177053/vasfed"}, "is_accepted": false, "score": 3, "last_activity_date": 1459357213, "creation_date": 1459357213, "answer_id": 36315201, "question_id": 36315102, "link": "https://stackoverflow.com/questions/36315102/why-is-changing-an-attribute-allowed/36315201#36315201", "title": "Why is changing an attribute allowed?", "body": "<p>Your <code>h</code> field is the reference to the hash, but you're changing the hash itself, not the reference.</p>\n"}, {"comments": [{"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 1, "creation_date": 1459357354, "post_id": 36315218, "comment_id": 60253807, "body": "\u2026 except the object itself, if it wants to. E.g. <code>Symbol</code>s, <code>Integer</code>s, <code>true</code>, <code>false</code>, <code>nil</code>, and starting with Ruby 3 <code>String</code>s."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "reply_to_user": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1459363144, "post_id": 36315218, "comment_id": 60257506, "body": "@J&#246;rgWMittag Ruby 3 (documentation links please) :)"}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1459363972, "post_id": 36315218, "comment_id": 60257987, "body": "@engineersmnky: <a href=\"https://bugs.ruby-lang.org/issues/11473\" rel=\"nofollow noreferrer\">bugs.ruby-lang.org/issues/11473</a> The first phases have already been started in Ruby 2.2 (&quot;magic&quot; <code>&#39;string&#39;.freeze</code>) and Ruby 2.3 (frozen string literals)."}], "tags": [], "owner": {"reputation": 13359, "user_id": 1779477, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/f62e1d28063f41fd9728d811fea3a84c?s=128&d=identicon&r=PG&f=1", "display_name": "idmean", "link": "https://stackoverflow.com/users/1779477/idmean"}, "is_accepted": false, "score": 0, "last_activity_date": 1459357244, "creation_date": 1459357244, "answer_id": 36315218, "question_id": 36315102, "link": "https://stackoverflow.com/questions/36315102/why-is-changing-an-attribute-allowed/36315218#36315218", "title": "Why is changing an attribute allowed?", "body": "<p><code>h</code> is read-only. You can't change the value stored in <code>h</code>. But Ruby is object-oriented and everything is an object, and <code>h</code> is just a reference (an object-pointer). And nothing prevents you from modifying the object to which <code>h</code> points.</p>\n"}, {"tags": [], "owner": {"reputation": 1373, "user_id": 2339716, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/k8zz3.jpg?s=128&g=1", "display_name": "mralexlau", "link": "https://stackoverflow.com/users/2339716/mralexlau"}, "is_accepted": false, "score": 0, "last_activity_date": 1459357312, "creation_date": 1459357312, "answer_id": 36315246, "question_id": 36315102, "link": "https://stackoverflow.com/questions/36315102/why-is-changing-an-attribute-allowed/36315246#36315246", "title": "Why is changing an attribute allowed?", "body": "<p>To elaborate on @Sergio's comment, the reason you can change <code>@h</code> is because <code>attr_reader :h</code> is shorthand for:</p>\n\n<pre><code>def h\n  @h\nend\n</code></pre>\n\n<p>So defining this method has no bearing on what you can do to set the instance variable <code>@h</code>.</p>\n"}], "owner": {"reputation": 325, "user_id": 6135922, "user_type": "registered", "accept_rate": 33, "profile_image": "https://lh4.googleusercontent.com/-QYnpiAr6_hg/AAAAAAAAAAI/AAAAAAAAAA0/6jPjc2OAbH4/photo.jpg?sz=128", "display_name": "Eduard Bondarenko", "link": "https://stackoverflow.com/users/6135922/eduard-bondarenko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1459358090, "creation_date": 1459356851, "last_edit_date": 1459358090, "question_id": 36315102, "link": "https://stackoverflow.com/questions/36315102/why-is-changing-an-attribute-allowed", "title": "Why is changing an attribute allowed?", "body": "<p>I am wondering why Ruby allows us to change a read-only attribute.</p>\n\n<pre><code>class Test\n  attr_reader :h\n\n  def initialize\n    @h = {}\n  end\nend\n\nt = Test.new\nt.h # =&gt; {}\nt.h['name'] = 'somename'\nt.h # =&gt; {\"name\"=&gt;\"somename\"}\n</code></pre>\n\n<p>Can we forbid a user to do it?</p>\n"}, {"tags": ["ruby", "string", "xpath"], "comments": [{"owner": {"reputation": 322, "user_id": 6062644, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/c3MLX.jpg?s=128&g=1", "display_name": "JLB", "link": "https://stackoverflow.com/users/6062644/jlb"}, "edited": false, "score": 0, "creation_date": 1459368881, "post_id": 36314950, "comment_id": 60260972, "body": "Had trouble doing this in Pry.  Try this in a plain text editor and run it from the console."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1459375858, "post_id": 36314950, "comment_id": 60264603, "body": "Please don&#39;t use images to show us important information in a question. We can&#39;t copy/paste the information, nor can search engines index it to help others find your question. Plus links rot and break. Instead copy/paste the information into your question."}], "answers": [{"comments": [{"owner": {"reputation": 171, "user_id": 5050361, "user_type": "registered", "accept_rate": 88, "profile_image": "https://lh6.googleusercontent.com/-HMkeOy1ZMDo/AAAAAAAAAAI/AAAAAAAAAIw/BOcdBrY9X8k/photo.jpg?sz=128", "display_name": "andgursky", "link": "https://stackoverflow.com/users/5050361/andgursky"}, "edited": false, "score": 0, "creation_date": 1459359873, "post_id": 36315130, "comment_id": 60255277, "body": "Back slashes doesn&#39;t work as I expected! As an example I attached a picture for you."}, {"owner": {"reputation": 1463, "user_id": 3703503, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/1ca51bdb8bc5906975c4133f0bf4873c?s=128&d=identicon&r=PG&f=1", "display_name": "SlySherZ", "link": "https://stackoverflow.com/users/3703503/slysherz"}, "reply_to_user": {"reputation": 171, "user_id": 5050361, "user_type": "registered", "accept_rate": 88, "profile_image": "https://lh6.googleusercontent.com/-HMkeOy1ZMDo/AAAAAAAAAAI/AAAAAAAAAIw/BOcdBrY9X8k/photo.jpg?sz=128", "display_name": "andgursky", "link": "https://stackoverflow.com/users/5050361/andgursky"}, "edited": false, "score": 0, "creation_date": 1459366466, "post_id": 36315130, "comment_id": 60259607, "body": "@andgursky Did you try to run the code with the backslashes? The image you showed looks like a bug in the highlighting program you use, but the program should run just fine."}], "tags": [], "owner": {"reputation": 1463, "user_id": 3703503, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/1ca51bdb8bc5906975c4133f0bf4873c?s=128&d=identicon&r=PG&f=1", "display_name": "SlySherZ", "link": "https://stackoverflow.com/users/3703503/slysherz"}, "is_accepted": false, "score": 3, "last_activity_date": 1459357632, "last_edit_date": 1459357632, "creation_date": 1459356966, "answer_id": 36315130, "question_id": 36314950, "link": "https://stackoverflow.com/questions/36314950/how-to-break-the-string-into-two-lines-in-ruby-syntax/36315130#36315130", "title": "How to break the string into two lines in ruby syntax", "body": "<p>You can use a backward slash to indicate the string continues on the next line, like so:</p>\n\n<pre><code>str = \"this is a long \\\nstring\"\n\nprint str # =&gt; this is a long string\n</code></pre>\n\n<p>If your string gets way too big, it might be a good idea to use here docs instead. They allow you to write pieces of text in the middle of the code:</p>\n\n<pre><code>str = &lt;&lt;HEREDOC\nThis is my string :)\nLet's imbue code in the imbued doc: #{[4, 2, 3, 1].sort}\nHEREDOC\n\nprint str\n# =&gt; This is my string :)\n# =&gt; Let's imbue code in the imbued doc: [1, 2, 3, 4]\n</code></pre>\n\n<p><code>HEREDOC</code> can be any name you want to give it. You can learn more about <a href=\"http://ruby-doc.org/docs/ruby-doc-bundle/Manual/man-1.4/syntax.html#here_doc\" rel=\"nofollow\">here docs here</a>. </p>\n"}, {"tags": [], "owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "is_accepted": true, "score": 6, "last_activity_date": 1459376775, "last_edit_date": 1459376775, "creation_date": 1459376388, "answer_id": 36320758, "question_id": 36314950, "link": "https://stackoverflow.com/questions/36314950/how-to-break-the-string-into-two-lines-in-ruby-syntax/36320758#36320758", "title": "How to break the string into two lines in ruby syntax", "body": "<p>Ruby will automatically concatenate two strings that are adjacent:</p>\n\n<pre><code>foo = 'a' 'b'\nfoo  # =&gt; \"ab\"\n</code></pre>\n\n<p>Normally a line-end signifies the end of the assignment:</p>\n\n<pre><code>foo = 'a'\n      'b'\nfoo  # =&gt; \"a\"\n</code></pre>\n\n<p>so you can't simply break the lines and expect Ruby to figure out what to do.</p>\n\n<p><code>\\</code> marks the line as continuing, so you could use:</p>\n\n<pre><code>foo = \"a\" \\\n      \"b\"\nfoo # =&gt; \"ab\"\n</code></pre>\n\n<p>Or, rely on the <code>+</code> String concatenation:</p>\n\n<pre><code>foo = 'a' +\n      'b'\nfoo # =&gt; \"ab\"\n</code></pre>\n\n<p>I'd probably use the <code>+</code> since it's most often used to join strings already, so its meaning is very obvious. Using <code>\\</code> leads to people joining really long expressions instead of breaking them down.</p>\n\n<p>If your strings are <em>really</em> long, you can use some other tricks:</p>\n\n<pre><code>foo = [\n  'foo',\n  'bar'\n].join\nfoo  # =&gt; \"foobar\"\n</code></pre>\n\n<p>If you want to join the strings with a space, such as recombining sentences:</p>\n\n<pre><code>foo = [\n  'foo',\n  'bar'\n].join(' ')\nfoo  # =&gt; \"foo bar\"\n</code></pre>\n\n<p>or:</p>\n\n<pre><code>foo = [\n  'foo',\n  'bar'\n] * ' '\nfoo  # =&gt; \"foo bar\"\n</code></pre>\n\n<p>Building on all that, I'd use some combination of the above or simply something like:</p>\n\n<pre><code>long_str = 'This is a veeeeeeeryyyyyy' +\n           ' looooonggggg string'\npath = \"//div/p[contains(., '#{ long_str }')]\"\n</code></pre>\n\n<p>or:</p>\n\n<pre><code>long_str = [\n  'This is a veeeeeeeryyyyyy',\n  'looooonggggg string'\n].join(' ')\npath = \"//div/p[contains(., '%s')]\" % long_str\n</code></pre>\n"}], "owner": {"reputation": 171, "user_id": 5050361, "user_type": "registered", "accept_rate": 88, "profile_image": "https://lh6.googleusercontent.com/-HMkeOy1ZMDo/AAAAAAAAAAI/AAAAAAAAAIw/BOcdBrY9X8k/photo.jpg?sz=128", "display_name": "andgursky", "link": "https://stackoverflow.com/users/5050361/andgursky"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2064, "favorite_count": 0, "accepted_answer_id": 36320758, "answer_count": 2, "score": 1, "last_activity_date": 1459376775, "creation_date": 1459356395, "last_edit_date": 1459360589, "question_id": 36314950, "link": "https://stackoverflow.com/questions/36314950/how-to-break-the-string-into-two-lines-in-ruby-syntax", "title": "How to break the string into two lines in ruby syntax", "body": "<p>How to break the string into two lines in ruby code?\nIs there specific symbol?</p>\n\n<pre><code>def my_def\n  path = \"//div/p[contains(., 'This is a veeeeeeeryyyyyy looooonggggg string')]\"\nend\n</code></pre>\n\n<p>I wish to make something like that:</p>\n\n<pre><code>def my_def\n  path = \"//div/p[contains(., 'This is a veeeeeeeryyyyyy\n          looooonggggg string')]\"\nend\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/q9J19.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/q9J19.png\" alt=\"enter image description here\"></a>\nBack slashes doesn't work right!</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 31885, "user_id": 1008938, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/EOZbS.png?s=128&g=1", "display_name": "Linuxios", "link": "https://stackoverflow.com/users/1008938/linuxios"}, "edited": false, "score": 0, "creation_date": 1459354533, "post_id": 36314274, "comment_id": 60251945, "body": "Can you add some detail to what you mean by &quot;failing&quot;?"}, {"owner": {"reputation": 19714, "user_id": 1006863, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/sYOuq.jpg?s=128&g=1", "display_name": "Paulo Fidalgo", "link": "https://stackoverflow.com/users/1006863/paulo-fidalgo"}, "reply_to_user": {"reputation": 31885, "user_id": 1008938, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/EOZbS.png?s=128&g=1", "display_name": "Linuxios", "link": "https://stackoverflow.com/users/1008938/linuxios"}, "edited": false, "score": 0, "creation_date": 1459356269, "post_id": 36314274, "comment_id": 60253090, "body": "@Linuxios I have updated the result and explained the mean of failing."}], "answers": [{"comments": [{"owner": {"reputation": 19714, "user_id": 1006863, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/sYOuq.jpg?s=128&g=1", "display_name": "Paulo Fidalgo", "link": "https://stackoverflow.com/users/1006863/paulo-fidalgo"}, "edited": false, "score": 0, "creation_date": 1459376157, "post_id": 36314420, "comment_id": 60264726, "body": "Please check my update, to see the result in both cases."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 19714, "user_id": 1006863, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/sYOuq.jpg?s=128&g=1", "display_name": "Paulo Fidalgo", "link": "https://stackoverflow.com/users/1006863/paulo-fidalgo"}, "edited": false, "score": 0, "creation_date": 1459405636, "post_id": 36314420, "comment_id": 60273977, "body": "The thing you are missing here is probably that <code>return</code> <b>returns from all the codeblocks to the topmost level</b>. The control flow in case of 302 is: <code>fetch</code>\u21d2<code>fetch</code>\u21d2[inside 2 blocks]\u21d2<code>200</code>\u21d2[inside 1]\u21d2<code>302</code> due to recursion. Normal control flow forces the first yielded result (302) to be returned as a function result. OTOH, <code>return</code> returns it\u2019s result to the top level."}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 2, "last_activity_date": 1459354823, "creation_date": 1459354823, "answer_id": 36314420, "question_id": 36314274, "link": "https://stackoverflow.com/questions/36314274/ruby-recursive-method-needs-return-clause/36314420#36314420", "title": "Ruby recursive method needs return clause", "body": "<p>The difference is the value, returned from <code>fetch_headers</code> function.</p>\n\n<p><code>return</code> returns it\u2019s argument as a result of a function call.</p>\n\n<p>Without explicit <code>return</code>, the return value is what <code>http.request_head(request_uri, &amp;block)</code> returns, which is apparently causes the infinite recursion.</p>\n\n<p>You might want to try</p>\n\n<pre><code>http.request_head(request_uri) do |response|\n  case response\n  when Net::HTTPSuccess then\n    response\n  when Net::HTTPRedirection then\n    location = response['location']\n    parsed_location = URI.parse location\n    @uri = parsed_location.absolute? ? parsed_location : @uri.merge(parsed_location)\n    fetch_headers(limit - 1)\n  else\n    response.value\n  end\nend.tap { |result| puts result } # \u21d0 here\n</code></pre>\n\n<p>to examine what is actual result without explicit <code>return</code>.</p>\n"}], "owner": {"reputation": 19714, "user_id": 1006863, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/sYOuq.jpg?s=128&g=1", "display_name": "Paulo Fidalgo", "link": "https://stackoverflow.com/users/1006863/paulo-fidalgo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1459356549, "creation_date": 1459354400, "last_edit_date": 1459356549, "question_id": 36314274, "link": "https://stackoverflow.com/questions/36314274/ruby-recursive-method-needs-return-clause", "title": "Ruby recursive method needs return clause", "body": "<p>I could be missing the obvious here, but this code is failing unless I use the <code>return</code> clause when call it recursively on <code>Net::HTTPRedirection</code> case.</p>\n\n<pre><code>  def fetch_headers(limit = REDIRECT_LIMIT)\n    # You should choose a better exception.\n    raise ArgumentError, 'too many HTTP redirects' if limit == 0\n    http = Net::HTTP.new(@uri.host, @uri.port)\n    http.use_ssl = true if @uri.scheme == 'https'\n    request_uri = @uri.request_uri.nil? ? '/' : @uri.request_uri\n    http.request_head(request_uri) do |response|\n      case response\n      when Net::HTTPSuccess then\n        return response\n      when Net::HTTPRedirection then\n        location = response['location']\n        parsed_location = URI.parse location\n        @uri = parsed_location.absolute? ? parsed_location : @uri.merge(parsed_location)\n        fetch_headers(limit - 1)\n      else\n        return response.value\n      end\n    end\n  end\n</code></pre>\n\n<p>The caller method:</p>\n\n<pre><code>  def perform(link_id)\n    link = Link.find(link_id)\n    url = link.url =~ /^http/ ? link.url : \"http://#{link.url}\"\n    @uri = URI.parse url\n    headers = fetch_headers\n    case headers.content_type\n    when /application/\n      filename = File.basename(@uri.path)\n      link.update title: filename\n    when /html/\n      response = fetch_page\n      page = Nokogiri::HTML(response)\n      link.update title: page_title(page), description: page_description(page)\n    else\n      logger.warn \"URL #{url} with unknow mime-type: #{headers.content_type}\"\n    end\n  end\n</code></pre>\n\n<p>Here is the spec I am running:</p>\n\n<pre><code>it 'follows the redirects using relative URL' do\n  link = create(:link, url: url)\n  path = '/welcome.html'\n  stub_request(:head, url).to_return(status: 302, body: '',\n                                     headers: { 'Location' =&gt; path })\n  redirect_url = \"#{url}#{path}\"\n  stub_request(:head, redirect_url).to_return(status: 200, body: '',\n                                              headers: html_header)\n  stub_request(:get, redirect_url).to_return(status: 200, body: title_html_raw,\n                                             headers: html_header)\n\n  UrlScrapperJob.perform_now link.id\n  link.reload\n  expect(link.title).to match(/page title/)\nend\n</code></pre>\n\n<p>Here are the result of <code>fetch_headers</code> method:</p>\n\n<p><strong>With the return clause</strong>: <code>#&lt;Net::HTTPOK 200  readbody=true&gt;</code></p>\n\n<p><strong>Without the return clause</strong>: <code>#&lt;Net::HTTPFound 302  readbody=true&gt;</code></p>\n\n<p>The result I would expect would be the <code>HTTPOK 200</code> because it should follow the redirects until a 200 OK.</p>\n"}, {"tags": ["ruby", "terminal", "console", "atom-editor"], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 6135736, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c996c9c34422c62f58af443b19cca75d?s=128&d=identicon&r=PG&f=1", "display_name": "chriswt", "link": "https://stackoverflow.com/users/6135736/chriswt"}, "edited": false, "score": 0, "creation_date": 1459356615, "post_id": 36314346, "comment_id": 60253318, "body": "Using ruby test.rb seems to compile the code but does not leave my Terminal in a state that I can interact with the code or call upon the function that I&#39;ve defined. For example, when I type ruby test.rb, my environment does not change into the interactive ruby environment."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 1, "user_id": 6135736, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c996c9c34422c62f58af443b19cca75d?s=128&d=identicon&r=PG&f=1", "display_name": "chriswt", "link": "https://stackoverflow.com/users/6135736/chriswt"}, "edited": false, "score": 0, "creation_date": 1459357106, "post_id": 36314346, "comment_id": 60253645, "body": "To run a shell with preloaded ruby code, use <code>irb -r test.rb</code>."}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 0, "last_activity_date": 1459354629, "creation_date": 1459354629, "answer_id": 36314346, "question_id": 36314262, "link": "https://stackoverflow.com/questions/36314262/running-ruby-scripts-in-atom-or-command-shell/36314346#36314346", "title": "Running Ruby scripts in Atom or command shell", "body": "<p><code>-r</code> command line switch is used to <a href=\"http://www.tutorialspoint.com/ruby/ruby_command_line_options.htm\" rel=\"nofollow\">use <em>require</em> to load <em>lib</em> as a library before executing</a>.</p>\n\n<p>Try</p>\n\n<pre><code>ruby test.rb\n</code></pre>\n\n<p>from inside the directory this file is located, it should work.</p>\n"}], "owner": {"reputation": 1, "user_id": 6135736, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c996c9c34422c62f58af443b19cca75d?s=128&d=identicon&r=PG&f=1", "display_name": "chriswt", "link": "https://stackoverflow.com/users/6135736/chriswt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1162, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1465508306, "creation_date": 1459354354, "last_edit_date": 1465508306, "question_id": 36314262, "link": "https://stackoverflow.com/questions/36314262/running-ruby-scripts-in-atom-or-command-shell", "title": "Running Ruby scripts in Atom or command shell", "body": "<p>complete Ruby amateur here. After playing around with Ruby on various interactive online coding environments, I thought I'd try to set up Ruby on my Windows in the same way I've set up Python (using Atom and Terminal-Plus). After being frustrated and Googling for answers the past 3 hours, I thought I'd bring my question here.</p>\n\n<p>Using Python, I can save a file (test.py) in Atom, and execute it using Terminal-Plus by typing:</p>\n\n<pre><code>py -i test.py\n</code></pre>\n\n<p>And this would create an interactive shell where I can call any functions I've stored inside my test Python script. I've learnt that I can do a similar thing with Ruby (for a test file test.rb) using:</p>\n\n<pre><code>ruby -r test.rb\n</code></pre>\n\n<p>but this yields the following error:</p>\n\n<pre><code>C:/Ruby21-  x64/lib/ruby/site_ruby/2.1.0/rubygems/core_ext/kernel_require.rb:55:in `require': cannot load such\n file -- test.rb (LoadError)\n    from C:/Ruby21-x64/lib/ruby/site_ruby/2.1.0/rubygems/core_ext/kernel_require.rb:55:in `require'\n</code></pre>\n\n<p>The same thing happens if I use cmd prompt to try and execute the script. I've seen other problems like this where the person was missing a key RubyGem that they were trying to call, but my test.rb file is literally:</p>\n\n<pre><code>def xyz\n  for i in 1..100\n      puts i\n  end\nend\n</code></pre>\n\n<p>I'm just trying to call a Ruby script and be able to call the functions I've stored in the script in the console, in this case xyz. </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 9878, "user_id": 3315785, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/YsMo6.jpg?s=128&g=1", "display_name": "j-dexx", "link": "https://stackoverflow.com/users/3315785/j-dexx"}, "edited": false, "score": 0, "creation_date": 1459354008, "post_id": 36313956, "comment_id": 60251615, "body": "So it&#39;s in the <code>message.content</code> attribute?  It&#39;ll be using a relative url.  You&#39;ll need to configure it not to.  Looks like you can set it from the <a href=\"http://docs.ckeditor.com/#!/api/CKEDITOR.config-cfg-baseHref\" rel=\"nofollow noreferrer\">docs</a>"}, {"owner": {"reputation": 57, "user_id": 6067400, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e2d643b76deb212cb17223068a931b2?s=128&d=identicon&r=PG&f=1", "display_name": "Boris", "link": "https://stackoverflow.com/users/6067400/boris"}, "reply_to_user": {"reputation": 9878, "user_id": 3315785, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/YsMo6.jpg?s=128&g=1", "display_name": "j-dexx", "link": "https://stackoverflow.com/users/3315785/j-dexx"}, "edited": false, "score": 0, "creation_date": 1459358368, "post_id": 36313956, "comment_id": 60254474, "body": "ok i will give it a try"}, {"owner": {"reputation": 57, "user_id": 6067400, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e2d643b76deb212cb17223068a931b2?s=128&d=identicon&r=PG&f=1", "display_name": "Boris", "link": "https://stackoverflow.com/users/6067400/boris"}, "reply_to_user": {"reputation": 9878, "user_id": 3315785, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/YsMo6.jpg?s=128&g=1", "display_name": "j-dexx", "link": "https://stackoverflow.com/users/3315785/j-dexx"}, "edited": false, "score": 0, "creation_date": 1459806267, "post_id": 36313956, "comment_id": 60442453, "body": "i see, I specified absolute url in my config.js i have config.baseHref = &#39;messagefollower.com/public/ckeditor_assets/pictures/:id/\u2026;; line, but in ckeditor as a source it shows src=&quot;/ckeditor_assets/pictures/10/content_kolom-300-400x400.&zwnj;&#8203;jpg&quot; Where do i fix it?"}], "answers": [{"comments": [{"owner": {"reputation": 57, "user_id": 6067400, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e2d643b76deb212cb17223068a931b2?s=128&d=identicon&r=PG&f=1", "display_name": "Boris", "link": "https://stackoverflow.com/users/6067400/boris"}, "edited": false, "score": 0, "creation_date": 1459359131, "post_id": 36314211, "comment_id": 60254861, "body": "i will give it a try"}, {"owner": {"reputation": 57, "user_id": 6067400, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e2d643b76deb212cb17223068a931b2?s=128&d=identicon&r=PG&f=1", "display_name": "Boris", "link": "https://stackoverflow.com/users/6067400/boris"}, "edited": false, "score": 0, "creation_date": 1459447363, "post_id": 36314211, "comment_id": 60302987, "body": "HI, i added config.baseHref = &#39;<a href=\"http://messagefollower.com\" rel=\"nofollow noreferrer\">messagefollower.com</a>&#39;; but still image didn&#39;t display in email. Any other suggestions?"}, {"owner": {"reputation": 16587, "user_id": 177053, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f6c516626d381a1ea383cedd1799486?s=128&d=identicon&r=PG", "display_name": "Vasfed", "link": "https://stackoverflow.com/users/177053/vasfed"}, "reply_to_user": {"reputation": 57, "user_id": 6067400, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e2d643b76deb212cb17223068a931b2?s=128&d=identicon&r=PG&f=1", "display_name": "Boris", "link": "https://stackoverflow.com/users/6067400/boris"}, "edited": false, "score": 0, "creation_date": 1459447888, "post_id": 36314211, "comment_id": 60303293, "body": "@Boris to test it you do not need to send email - you want absolute links in html, so look at <code>img</code> tags inside <code>@message.content</code>. If you cannot make ckeditor make these right, then modify it before sending"}, {"owner": {"reputation": 57, "user_id": 6067400, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e2d643b76deb212cb17223068a931b2?s=128&d=identicon&r=PG&f=1", "display_name": "Boris", "link": "https://stackoverflow.com/users/6067400/boris"}, "edited": false, "score": 0, "creation_date": 1459451081, "post_id": 36314211, "comment_id": 60305161, "body": "What i have in img tags is &lt;img alt=&quot;&quot; src=&quot;/ckeditor_assets/pictures/1/content_1_1_3-9_final.jpg&quot; style=&quot;float:left; height:460px; width:300px&quot; /&gt;  I will try to figure it out."}, {"owner": {"reputation": 57, "user_id": 6067400, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e2d643b76deb212cb17223068a931b2?s=128&d=identicon&r=PG&f=1", "display_name": "Boris", "link": "https://stackoverflow.com/users/6067400/boris"}, "edited": false, "score": 0, "creation_date": 1459451614, "post_id": 36314211, "comment_id": 60305468, "body": "so my file path should be one of these paths? has_attached_file :data,                     :url =&gt; &quot;/ckeditor_assets/attachments/:id/:filename&quot;,                     :path =&gt; &quot;:rails_root/public/ckeditor_assets/attachments/:id/:filenam&zwnj;&#8203;e&quot;"}, {"owner": {"reputation": 16587, "user_id": 177053, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f6c516626d381a1ea383cedd1799486?s=128&d=identicon&r=PG", "display_name": "Vasfed", "link": "https://stackoverflow.com/users/177053/vasfed"}, "reply_to_user": {"reputation": 57, "user_id": 6067400, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e2d643b76deb212cb17223068a931b2?s=128&d=identicon&r=PG&f=1", "display_name": "Boris", "link": "https://stackoverflow.com/users/6067400/boris"}, "edited": false, "score": 0, "creation_date": 1459451728, "post_id": 36314211, "comment_id": 60305540, "body": "@Boris no, you need it to be a full url with protocol, domain name and so on"}, {"owner": {"reputation": 57, "user_id": 6067400, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e2d643b76deb212cb17223068a931b2?s=128&d=identicon&r=PG&f=1", "display_name": "Boris", "link": "https://stackoverflow.com/users/6067400/boris"}, "edited": false, "score": 0, "creation_date": 1459452912, "post_id": 36314211, "comment_id": 60306234, "body": "in my attachment_file.rb it points to :path =&gt; &quot;:rails_root/public/ckeditor_assets/attachments/:id/:filenam&zwnj;&#8203;e&quot;  , however on my server when i go to /app/messagefollowerlive/current/public/ckeditor_assets i only see picture folder, and i don&#39;t see attachments folder, is that what causing a problem? it basically doesn&#39;t upload to the server?"}, {"owner": {"reputation": 57, "user_id": 6067400, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e2d643b76deb212cb17223068a931b2?s=128&d=identicon&r=PG&f=1", "display_name": "Boris", "link": "https://stackoverflow.com/users/6067400/boris"}, "edited": false, "score": 0, "creation_date": 1459452984, "post_id": 36314211, "comment_id": 60306289, "body": "do i simply need to create attachments folder on the server? and keep this path config.baseHref = &#39;<a href=\"http://messagefollower.com/public/ckeditor_assets/attachments/:id/:filename\" rel=\"nofollow noreferrer\">messagefollower.com/public/ckeditor_assets/attachments/:id/&zwnj;&#8203;&hellip;</a>&#39;;"}, {"owner": {"reputation": 57, "user_id": 6067400, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e2d643b76deb212cb17223068a931b2?s=128&d=identicon&r=PG&f=1", "display_name": "Boris", "link": "https://stackoverflow.com/users/6067400/boris"}, "edited": false, "score": 0, "creation_date": 1459787307, "post_id": 36314211, "comment_id": 60431952, "body": "i did as you suggested to change path to point to the file path on the server where images are stored. My images are displaying alright  on the website and server, but in email its blank.  Any other ideas?"}, {"owner": {"reputation": 16587, "user_id": 177053, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f6c516626d381a1ea383cedd1799486?s=128&d=identicon&r=PG", "display_name": "Vasfed", "link": "https://stackoverflow.com/users/177053/vasfed"}, "reply_to_user": {"reputation": 57, "user_id": 6067400, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e2d643b76deb212cb17223068a931b2?s=128&d=identicon&r=PG&f=1", "display_name": "Boris", "link": "https://stackoverflow.com/users/6067400/boris"}, "edited": false, "score": 0, "creation_date": 1459787736, "post_id": 36314211, "comment_id": 60432199, "body": "idea is the same - you need absolute urls. Browser already know the address of your site, thus it can understand paths, but email client does not."}, {"owner": {"reputation": 57, "user_id": 6067400, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e2d643b76deb212cb17223068a931b2?s=128&d=identicon&r=PG&f=1", "display_name": "Boris", "link": "https://stackoverflow.com/users/6067400/boris"}, "edited": false, "score": 0, "creation_date": 1459788615, "post_id": 36314211, "comment_id": 60432748, "body": "i see, I specified absolute url in my config.js  i have config.baseHref = &#39;<a href=\"http://messagefollower.com/public/ckeditor_assets/pictures/:id/:filename\" rel=\"nofollow noreferrer\">messagefollower.com/public/ckeditor_assets/pictures/:id/&hellip;</a>&#39;; line, but in ckeditor as a source it shows src=&quot;/ckeditor_assets/pictures/10/content_kolom-300-400x400.&zwnj;&#8203;jpg&quot; Where do i fix it?"}], "tags": [], "owner": {"reputation": 16587, "user_id": 177053, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f6c516626d381a1ea383cedd1799486?s=128&d=identicon&r=PG", "display_name": "Vasfed", "link": "https://stackoverflow.com/users/177053/vasfed"}, "is_accepted": true, "score": 0, "last_activity_date": 1459354549, "last_edit_date": 1459354549, "creation_date": 1459354183, "answer_id": 36314211, "question_id": 36313956, "link": "https://stackoverflow.com/questions/36313956/image-doesnt-show-in-rails-mail/36314211#36314211", "title": "Image doesn&#39;t show in Rails mail", "body": "<p>Most probably it is because of URLs in your <code>@message.content</code> are not absolute,  they don't include the hostname.</p>\n\n<p>Set CKEditor's <code>config.baseHref</code> to your site address, it defaults to empty.</p>\n\n<p>Other way is to preprocess the content and change <code>href=\"/some/path\"</code> to <code>href=\"http://your.address.com/some/path\"</code>.</p>\n"}], "owner": {"reputation": 57, "user_id": 6067400, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e2d643b76deb212cb17223068a931b2?s=128&d=identicon&r=PG&f=1", "display_name": "Boris", "link": "https://stackoverflow.com/users/6067400/boris"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 278, "favorite_count": 0, "accepted_answer_id": 36314211, "answer_count": 1, "score": 3, "last_activity_date": 1459451438, "creation_date": 1459353355, "last_edit_date": 1459451438, "question_id": 36313956, "link": "https://stackoverflow.com/questions/36313956/image-doesnt-show-in-rails-mail", "title": "Image doesn&#39;t show in Rails mail", "body": "<p>I am using Creditor, Paperclip, and Mailer (send grid) to create content and mail it to subscribers. I am uploading an image to my server and it shows on the website correctly in <code>:content</code>, however users receive a blank image in their email. </p>\n\n<p>This is my mailer body:</p>\n\n<pre><code>&lt;body&gt;\n    &lt;h3&gt;Hi &lt;%= @listener.name %&gt;, &lt;/h3&gt;\n    &lt;p&gt;&lt;h3&gt;You have received a message from &lt;%= @message.speaker.organization %&gt;&lt;/p&gt;&lt;/h3&gt;&lt;br/&gt;\n    &lt;!-- &lt;p&gt;&lt;%= @message.speaker.fullname %&gt; has sent a message to you.&lt;/p&gt;&lt;br/&gt; --&gt;\n    &lt;h3 style=\"color: #000;\"&gt;Description: &lt;strong style=\"font-size: 12px; color: #444;\"&gt;&lt;%= @message.description %&gt;&lt;/strong&gt;&lt;/h3&gt;&lt;hr/&gt;\n    &lt;p style=\"font-size: 12px;\"&gt;&lt;%= raw @message.content %&gt;&lt;/p&gt;&lt;br/&gt;\n&lt;/body&gt;\n</code></pre>\n\n<p>And my mailer:</p>\n\n<pre><code>class MessageMailer &lt; ActionMailer::Base\n  default from: \"meditate@messagefollower.com\"\n\n  def mail_message_to_listener(message, listener)\n    @message = message\n    @listener = listener\n    if @message.image?\n      message_image_path = @message.get_image_path\n      attachments[@message.image_file_name] = File.read(message_image_path)\n    end\n    mail(to: @listener.email, subject: \"#{@message.title}, Part 1\")\n  end\n\n  def mail_message_part_to_listener(messagepart, listener)\n    @messagepart = messagepart\n    @listener = listener\n    message_title = @messagepart.message.title\n    part_number = @messagepart.part_no\n    if @messagepart.image?\n      message_part_image_path = @messagepart.get_image_path\n      attachments[@messagepart.image_file_name] = File.read(message_part_image_path)\n    end\n    mail(to: @listener.email, subject: \"#{part_number.ordinalize} part of #{message_title}, Part #{part_number+1}\")\n  end\nend\n</code></pre>\n\n<p>my config.js for creditor</p>\n\n<pre><code>CKEDITOR.editorConfig = function(config) {\n  //config.language = 'es'; //this could be any language\n  config.width = '650';\n  config.height = '500';\n  config.baseHref = 'http://messagefollower.com';\n\n\n\n  // Filebrowser routes\n  // The location of an external file browser, that should be launched when \"Browse Server\" button is pressed.\n  config.filebrowserBrowseUrl = \"/ckeditor/attachment_files\";\n  // The location of an external file browser, that should be launched when \"Browse Server\" button is pressed in the Flash dialog.\n  config.filebrowserFlashBrowseUrl = \"/ckeditor/attachment_files\";\n  // The location of a script that handles file uploads in the Flash dialog.\n  config.filebrowserFlashUploadUrl = \"/ckeditor/attachment_files\";\n  // The location of an external file browser, that should be launched when \"Browse Server\" button is pressed in the Link tab of Image dialog.\n  config.filebrowserImageBrowseLinkUrl = \"/ckeditor/pictures\";\n  // The location of an external file browser, that should be launched when \"Browse Server\" button is pressed in the Image dialog.\n  config.filebrowserImageBrowseUrl = \"/ckeditor/pictures\";\n  // The location of a script that handles file uploads in the Image dialog.\n  config.filebrowserImageUploadUrl = \"/ckeditor/pictures\";\n  // The location of a script that handles file uploads.\n  config.filebrowserUploadUrl = \"/ckeditor/attachment_files\";\n\n// You could delete or reorder any of this elements as you wish\n  config.toolbar_Menu = [\n    { name: 'document', items: ['Source', '-', 'Save'] },\n    { name: 'clipboard', items: ['Cut', 'Copy', 'Paste', 'PasteText', 'PasteFromWord', '-', 'Undo', 'Redo'] },\n    { name: 'editing', items: ['SelectAll', '-', 'SpellChecker', 'Scayt'] },\n    { name: 'tools', items: ['Maximize', 'ShowBlocks', '-'] }, '/',\n    { name: 'basicstyles', items: ['Bold', 'Italic', 'Underline', 'Strike', 'Subscript', 'Superscript', '-', 'RemoveFormat'] },\n    { name: 'paragraph', items: ['NumberedList', 'BulletedList', '-', 'Outdent', 'Indent', '-', 'Blockquote', 'JustifyLeft', 'JustifyCenter', 'JustifyRight', 'JustifyBlock'] },\n    { name: 'links', items: ['Link', 'Unlink', 'Anchor'] }, '/',\n    { name: 'styles', items: ['Styles', 'Format', 'Font', 'FontSize'] },\n    { name: 'colors', items: ['TextColor', 'BGColor'] },\n    { name: 'insert', items: ['Image', 'Table', 'HorizontalRule', 'Smiley', 'SpecialChar', 'PageBreak'] }\n  ];\n  config.toolbar = 'Menu';\n  return true;\n};\n</code></pre>\n\n<p>my attachment.rb</p>\n\n<pre><code>class Ckeditor::AttachmentFile &lt; Ckeditor::Asset\n  has_attached_file :data,\n                    :url =&gt; \"/ckeditor_assets/attachments/:id/:filename\",\n                    :path =&gt; \":rails_root/public/ckeditor_assets/attachments/:id/:filename\"\n\n  validates_attachment_presence :data\n  validates_attachment_size :data, :less_than =&gt; 100.megabytes\n  do_not_validate_attachment_file_type :data\n\n  def url_thumb\n    @url_thumb ||= Ckeditor::Utils.filethumb(filename)\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "answers": [{"comments": [{"owner": {"reputation": 3612, "user_id": 2865270, "user_type": "registered", "accept_rate": 29, "profile_image": "https://graph.facebook.com/1198391393/picture?type=large", "display_name": "Fred Willmore", "link": "https://stackoverflow.com/users/2865270/fred-willmore"}, "edited": false, "score": 1, "creation_date": 1459361281, "post_id": 36315672, "comment_id": 60256171, "body": "I think this should work, just missing a comma in the args list after <code>photo</code>"}, {"owner": {"reputation": 3022, "user_id": 336392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c144b7e260029f00b1efb08fb29bb023?s=128&d=identicon&r=PG", "display_name": "Thomas R. Koll", "link": "https://stackoverflow.com/users/336392/thomas-r-koll"}, "reply_to_user": {"reputation": 3612, "user_id": 2865270, "user_type": "registered", "accept_rate": 29, "profile_image": "https://graph.facebook.com/1198391393/picture?type=large", "display_name": "Fred Willmore", "link": "https://stackoverflow.com/users/2865270/fred-willmore"}, "edited": false, "score": 0, "creation_date": 1459361422, "post_id": 36315672, "comment_id": 60256271, "body": "well spotted @FredWillmore. I added it."}], "tags": [], "owner": {"reputation": 3022, "user_id": 336392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c144b7e260029f00b1efb08fb29bb023?s=128&d=identicon&r=PG", "display_name": "Thomas R. Koll", "link": "https://stackoverflow.com/users/336392/thomas-r-koll"}, "is_accepted": false, "score": 2, "last_activity_date": 1459361385, "last_edit_date": 1459361385, "creation_date": 1459358683, "answer_id": 36315672, "question_id": 36313795, "link": "https://stackoverflow.com/questions/36313795/fields-for-missing-when-trying-to-add-accepts-nested-attributes-for/36315672#36315672", "title": "fields_for missing when trying to add accepts_nested_attributes_for", "body": "<p>See the <em>One-to-many</em> example in the API docs of <a href=\"http://apidock.com/rails/ActionView/Helpers/FormHelper/fields_for\" rel=\"nofollow\">fields_for</a></p>\n\n<p>Untested, but this should be your solution.</p>\n\n<pre><code>&lt;% post.photos.each do |photo| %&gt;\n &lt;%= post.fields_for :photos, photo, html: { multipart: true } do |photo_fields| %&gt;\n   &lt;%= photo_fields.label :image %&gt;\n   &lt;%= photo_fields.file_field :image %&gt;\n  &lt;% end %&gt;\n&lt;% end %&gt;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 65, "user_id": 3772273, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/VVDLn.jpg?s=128&g=1", "display_name": "StormTrooper", "link": "https://stackoverflow.com/users/3772273/stormtrooper"}, "edited": false, "score": 0, "creation_date": 1459430041, "post_id": 36315716, "comment_id": 60290962, "body": "Thanks! I used  <code>@post.posting.build</code> instead, and it worked like a charm!"}], "tags": [], "owner": {"reputation": 1121, "user_id": 3563504, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iXEHR.png?s=128&g=1", "display_name": "Klaus", "link": "https://stackoverflow.com/users/3563504/klaus"}, "is_accepted": true, "score": 2, "last_activity_date": 1459358862, "creation_date": 1459358862, "answer_id": 36315716, "question_id": 36313795, "link": "https://stackoverflow.com/questions/36313795/fields-for-missing-when-trying-to-add-accepts-nested-attributes-for/36315716#36315716", "title": "fields_for missing when trying to add accepts_nested_attributes_for", "body": "<p>I assume you assigned a @post instance variable in your PostsController's new action. You have to add the build_photo method to the new action:</p>\n\n<pre><code>def new\n  @post = Post.new\n  @post.build_photo\nend\n</code></pre>\n\n<p>This should show your nested form, too. </p>\n"}], "owner": {"reputation": 65, "user_id": 3772273, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/VVDLn.jpg?s=128&g=1", "display_name": "StormTrooper", "link": "https://stackoverflow.com/users/3772273/stormtrooper"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 244, "favorite_count": 0, "accepted_answer_id": 36315716, "answer_count": 2, "score": 4, "last_activity_date": 1459361385, "creation_date": 1459352902, "question_id": 36313795, "link": "https://stackoverflow.com/questions/36313795/fields-for-missing-when-trying-to-add-accepts-nested-attributes-for", "title": "fields_for missing when trying to add accepts_nested_attributes_for", "body": "<p>Im working on a simple form feature which adds an image via nested form.</p>\n\n<p>Photo model which should store all of my uploaded images.</p>\n\n<pre><code>class Photo &lt; ActiveRecord::Base\n\n  belongs_to :posting\n\n  has_attached_file :image, styles: { large: \"500x500&gt;\", medium: \"300x300&gt;\", thumb: \"100x100#\" }, default_url: \"/images/:style/missing.png\"\n  validates_attachment_content_type :image, content_type: /\\Aimage\\/.*\\Z/\n\nend\n</code></pre>\n\n<p>snippet of my nested form (within a form)</p>\n\n<pre><code>&lt;%= post.fields_for :photos, html: { multipart: true } do |photo| %&gt;\n            &lt;%= photo.label :image %&gt;\n            &lt;%= photo.file_field :image %&gt;\n        &lt;% end %&gt;\n</code></pre>\n\n<p>Everything shows fine, but when I uncomment the accepts_nested_attributes_for line. My nested form disappears!</p>\n\n<pre><code>class Posting &lt; ActiveRecord::Base\n\n    belongs_to :subcategory\n    belongs_to :category\n\n    has_many :photos\n\n    #accepts_nested_attributes_for :photos\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "postgresql", "ruby-on-rails-4"], "answers": [{"tags": [], "owner": {"reputation": 9447, "user_id": 1380867, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/5dc27a551f77074a1dcc431e4158704b?s=128&d=identicon&r=PG", "display_name": "MZaragoza", "link": "https://stackoverflow.com/users/1380867/mzaragoza"}, "is_accepted": true, "score": 4, "last_activity_date": 1459351572, "creation_date": 1459351572, "answer_id": 36313239, "question_id": 36312874, "link": "https://stackoverflow.com/questions/36312874/database-query-array-which-does-not-include/36313239#36313239", "title": "database query - array which does not include", "body": "<p>I like to use the <code>where.not</code> clause  </p>\n\n<p><code>Item.where.not(\"something &amp;&amp; ARRAY[?]::varchar[]\", [1,2])</code></p>\n"}], "owner": {"reputation": 163, "user_id": 5599997, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/fc837a80e2a24b0ff7fcda89c748e9d6?s=128&d=identicon&r=PG&f=1", "display_name": "Jmohey", "link": "https://stackoverflow.com/users/5599997/jmohey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 97, "favorite_count": 1, "accepted_answer_id": 36313239, "answer_count": 1, "score": 0, "last_activity_date": 1459365881, "creation_date": 1459350622, "last_edit_date": 1459365881, "question_id": 36312874, "link": "https://stackoverflow.com/questions/36312874/database-query-array-which-does-not-include", "title": "database query - array which does not include", "body": "<p>I have an array stored in element in DB.\nCurrently using:</p>\n\n<pre><code>Item.where(\"something &amp;&amp; ARRAY[?]::varchar[]\", [1,2])\n</code></pre>\n\n<p>Which gives me the Items where the 'something' includes either a 1 or 2.</p>\n\n<p>However, I need to find the items where the 'something' doesn't include either a 1 or a 2...</p>\n"}, {"tags": ["ruby", "graph", "graph-algorithm", "shortest-path", "weighted"], "comments": [{"owner": {"reputation": 1508, "user_id": 4346603, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae1be3f8e84ecb90d3a477f12c55b635?s=128&d=identicon&r=PG", "display_name": "leobelizquierdo", "link": "https://stackoverflow.com/users/4346603/leobelizquierdo"}, "edited": false, "score": 0, "creation_date": 1459794387, "post_id": 36312623, "comment_id": 60436137, "body": "I don&#39;t understand, first you say: &#39;I am trying to come up with a ruby algorithm to find a best shortest path within a defined limit (sum of edges) with the highest value (sum of vertices)&#39;, but then you say: &#39;finding a path with a maximum of 20 with the highest total value&#39;. In the second statement seems like you don&#39;t care about the path is the shortest. So, do you want the path with the highest value (max sum of vertices) that compliant the limit (sum of edges)? Is the meaning of &#39;best shortest path&#39; what I say above?"}], "answers": [{"tags": [], "owner": {"reputation": 1297, "user_id": 5042431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8VZqF.jpg?s=128&g=1", "display_name": "Charles", "link": "https://stackoverflow.com/users/5042431/charles"}, "is_accepted": false, "score": 0, "last_activity_date": 1459514768, "creation_date": 1459514768, "answer_id": 36356738, "question_id": 36312623, "link": "https://stackoverflow.com/questions/36312623/get-path-in-graph-with-weighted-vertices-and-edges/36356738#36356738", "title": "Get path in graph with weighted vertices and edges", "body": "<p>You can find <a href=\"https://github.com/mburst/dijkstras-algorithm/blob/master/dijkstras.rb\" rel=\"nofollow\">an example of Djikstra's algorithm here</a>. What I would do is add a variable to count the number of vertices in the shortest path, and evaluate if the shortest path has too many vertices or is too long once determining what the shortest path even <em>is</em>.</p>\n"}, {"tags": [], "owner": {"reputation": 1508, "user_id": 4346603, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae1be3f8e84ecb90d3a477f12c55b635?s=128&d=identicon&r=PG", "display_name": "leobelizquierdo", "link": "https://stackoverflow.com/users/4346603/leobelizquierdo"}, "is_accepted": false, "score": 0, "last_activity_date": 1459955005, "creation_date": 1459955005, "answer_id": 36455028, "question_id": 36312623, "link": "https://stackoverflow.com/questions/36312623/get-path-in-graph-with-weighted-vertices-and-edges/36455028#36455028", "title": "Get path in graph with weighted vertices and edges", "body": "<p>The problem is actually NP hard, you can prove this doing a reduction of <a href=\"https://en.wikipedia.org/wiki/Hamiltonian_path_problem\" rel=\"nofollow\">Hamiltonian path problem</a> to this problem. Basically given an input for the Hamiltonian path problem (we can stay with the undirected graph) you can create an input for the problem you describe if follow this steps:</p>\n\n<ul>\n<li><p>build a new graph</p>\n\n<p>create a new graph that is the same that receive the Hamiltonian path problem but give to each vertex and edge weight 1.</p></li>\n<li><p>create an input for your problem</p>\n\n<p>Pass to your problem the graph just created in the previous step and limit equals to infinity.</p></li>\n</ul>\n\n<p>Notice now that the result given by your problem is a path as longest as posible with respect at the number of vertex, since the limit restriction is an upper bound in the sum of weight of the edges. This mean that you can add as vertex as posible and still complaint the limit restriction.</p>\n\n<p>How many vertex are in the path determine the total value of this (count of vertex in the path) since the weight is 1 for all of them. So the resulting path is the longest posible in the graph. With this insight we can verify if this path is a hamiltonian path, just check the length of the path. If the path is of length N where N is the number of nodes in the graph there is a hamiltonian path otherwise there isn't. </p>\n\n<p>To solve the problem you can use an approach similar to <a href=\"https://en.wikipedia.org/wiki/Bellman%E2%80%93Ford_algorithm\" rel=\"nofollow\">Bellman-Ford</a> with some modifications. First create a matrix A[i, j] where you storage all the highest total value paths that ends with j and has length (number of edges) i. This is the key, you can't just storage one of this path, because in the next step you need to check all of them to make a relax, here is where the implementation become non-polynomial. The relax technique in the step i iterate through all the storage path in A[i-1, u] and try to improve the value in A[i, v] saving the new paths that actually do it (you must check for >= when try to improve A[i, v] in order to get all the paths), of course this relax take into account the limit restriction. If you uses a global max and a global path and update it  in each relax process, you end with the highest value path for the entire graph.</p>\n"}], "owner": {"reputation": 1391, "user_id": 502963, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/be20a06f0c64b3f06d878cb9f545a869?s=128&d=identicon&r=PG", "display_name": "Dayzza", "link": "https://stackoverflow.com/users/502963/dayzza"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 958, "favorite_count": 1, "answer_count": 2, "score": 3, "last_activity_date": 1459955005, "creation_date": 1459349931, "question_id": 36312623, "link": "https://stackoverflow.com/questions/36312623/get-path-in-graph-with-weighted-vertices-and-edges", "title": "Get path in graph with weighted vertices and edges", "body": "<p>If i have the following undirected graph with weighted vertices and edges:\n<a href=\"https://i.stack.imgur.com/00ef1.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/00ef1.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>I am trying to come up with a ruby algorithm to find a best shortest path within a defined limit (sum of edges) with the highest value (sum of vertices). </p>\n\n<p>The start point will also be the ending point.</p>\n\n<p>for e.g. finding a path with a maximum of 20 with the highest total value.</p>\n\n<p>This problem seems like a np hard problem and it is hard to find the best solution. </p>\n\n<p>Is there a modified algorithm of dijkstra? I tried using a greedy algorithm but it did not give me a optimal solution. and by using bruteforce on all poosible path will work, but it will take very long if the number of nodes increases. </p>\n\n<p>Was wondering if there is any combination of algorithms that i can use to improve my solution?</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rubygems", "strong-parameters"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2993456"}, "edited": false, "score": 0, "creation_date": 1459362257, "post_id": 36312590, "comment_id": 60256846, "body": "Did you add the gem to your gemfile? Rails will auto-require gems that it finds in the gemfile."}, {"owner": {"reputation": 11, "user_id": 3820520, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/826ce282427af49e5ab01294f1424911?s=128&d=identicon&r=PG&f=1", "display_name": "user3820520", "link": "https://stackoverflow.com/users/3820520/user3820520"}, "edited": false, "score": 0, "creation_date": 1459521562, "post_id": 36312590, "comment_id": 60337836, "body": "Yes, I did.   gem &#39;strong_parameters&#39;"}], "answers": [{"tags": [], "owner": {"reputation": 33, "user_id": 913073, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HK3Zv.jpg?s=128&g=1", "display_name": "obi1kinobi", "link": "https://stackoverflow.com/users/913073/obi1kinobi"}, "is_accepted": false, "score": 1, "last_activity_date": 1460798668, "creation_date": 1460798668, "answer_id": 36662396, "question_id": 36312590, "link": "https://stackoverflow.com/questions/36312590/there-was-an-error-while-trying-to-load-the-gem-strong-parameters/36662396#36662396", "title": "There was an error while trying to load the gem &#39;strong_parameters&#39;", "body": "<p>If you are using rails 4,you don't need to add it the gem file. It's already included. Just delete it from your gemfile and you will be good to go. :)</p>\n"}], "owner": {"reputation": 11, "user_id": 3820520, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/826ce282427af49e5ab01294f1424911?s=128&d=identicon&r=PG&f=1", "display_name": "user3820520", "link": "https://stackoverflow.com/users/3820520/user3820520"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 549, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1460798668, "creation_date": 1459349855, "last_edit_date": 1459525259, "question_id": 36312590, "link": "https://stackoverflow.com/questions/36312590/there-was-an-error-while-trying-to-load-the-gem-strong-parameters", "title": "There was an error while trying to load the gem &#39;strong_parameters&#39;", "body": "<p>I've installed strong_parameters gem without any problems and it was working. Although, my rails console stop working from nothing and now I can't run the console or server again. I have this message when I try to run both:</p>\n\n<pre><code>c:/RailsInstaller/Ruby2.2.0/lib/ruby/gems/2.2.0/gems/bundler-1.11.2/lib/bundler/runtime.rb:80:in `rescue in block (2 levels) in  require': There was an error while trying to load the gem 'strong_parameters'. (Bundler::GemRequireError)\n        from c:/RailsInstaller/Ruby2.2.0/lib/ruby/gems/2.2.0/gems/bundler-1.11.2/lib/bundler/runtime.rb:76:in `block (2 levels) in require'\n        from c:/RailsInstaller/Ruby2.2.0/lib/ruby/gems/2.2.0/gems/bundler-1.11.2/lib/bundler/runtime.rb:72:in `each'\n        from c:/RailsInstaller/Ruby2.2.0/lib/ruby/gems/2.2.0/gems/bundler-1.11.2/lib/bundler/runtime.rb:72:in `block in require'\n        from c:/RailsInstaller/Ruby2.2.0/lib/ruby/gems/2.2.0/gems/bundler-1.11.2/lib/bundler/runtime.rb:61:in `each'\n        from c:/RailsInstaller/Ruby2.2.0/lib/ruby/gems/2.2.0/gems/bundler-1.11.2/lib/bundler/runtime.rb:61:in `require'\n        from c:/RailsInstaller/Ruby2.2.0/lib/ruby/gems/2.2.0/gems/bundler-1.11.2/lib/bundler.rb:99:in `require'\n        from c:/Sites/myrubyblog/config/application.rb:7:in `&lt;top (required)&gt;'\n        from c:/RailsInstaller/Ruby2.2.0/lib/ruby/gems/2.2.0/gems/railties-4.2.6/lib/rails/commands/commands_tasks.rb:78:in `require'\n        from c:/RailsInstaller/Ruby2.2.0/lib/ruby/gems/2.2.0/gems/railties-4.2.6/lib/rails/commands/commands_tasks.rb:78:in `block in server'\n        from c:/RailsInstaller/Ruby2.2.0/lib/ruby/gems/2.2.0/gems/railties-4.2.6/lib/rails/commands/commands_tasks.rb:75:in `tap'\n        from c:/RailsInstaller/Ruby2.2.0/lib/ruby/gems/2.2.0/gems/railties-4.2.6/lib/rails/commands/commands_tasks.rb:75:in `server'\n        from c:/RailsInstaller/Ruby2.2.0/lib/ruby/gems/2.2.0/gems/railties-4.2.6/lib/rails/commands/commands_tasks.rb:39:in `run_command!'\n        from c:/RailsInstaller/Ruby2.2.0/lib/ruby/gems/2.2.0/gems/railties-4.2.6/lib/rails/commands.rb:17:in `&lt;top (required)&gt;'\n        from bin/rails:4:in `require'\n        from bin/rails:4:in `&lt;main&gt;'\n</code></pre>\n\n<p>I've uninstalled and installed it again. The error still happens though. Could anyone help me? I'm new on RoR. Thanks.</p>\n"}, {"tags": ["ruby", "encryption", "bitwise-operators"], "comments": [{"owner": {"reputation": 58084, "user_id": 1816580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f30e6b41f1e2bd48b058e8e72c1f0f57?s=128&d=identicon&r=PG", "display_name": "Artjom B.", "link": "https://stackoverflow.com/users/1816580/artjom-b"}, "edited": false, "score": 0, "creation_date": 1459350775, "post_id": 36312381, "comment_id": 60249077, "body": "And I assume you want the &quot;encrypted ID&quot; to be decryptable to the original ID?"}, {"owner": {"reputation": 3051, "user_id": 1872168, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/19cb4aef41aff57068dc4510f1c0bfb6?s=128&d=identicon&r=PG", "display_name": "Crystark", "link": "https://stackoverflow.com/users/1872168/crystark"}, "reply_to_user": {"reputation": 58084, "user_id": 1816580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f30e6b41f1e2bd48b058e8e72c1f0f57?s=128&d=identicon&r=PG", "display_name": "Artjom B.", "link": "https://stackoverflow.com/users/1816580/artjom-b"}, "edited": false, "score": 0, "creation_date": 1459351623, "post_id": 36312381, "comment_id": 60249760, "body": "I could do without it actually. What I need is to generate an id that would be unique based on an input integer and a specified key."}], "owner": {"reputation": 3051, "user_id": 1872168, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/19cb4aef41aff57068dc4510f1c0bfb6?s=128&d=identicon&r=PG", "display_name": "Crystark", "link": "https://stackoverflow.com/users/1872168/crystark"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 34, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1459349352, "creation_date": 1459349352, "question_id": 36312381, "link": "https://stackoverflow.com/questions/36312381/adapting-skip32-to-a-31-bit-block-cipher", "title": "Adapting Skip32 to a 31-bit block Cipher", "body": "<p>So here's a ruby implementation of Skip32 by patdeegan:</p>\n\n<p><a href=\"https://github.com/patdeegan/integer-obfuscator/blob/master/lib%2Fcipher%2Fskip32.rb\" rel=\"nofollow\">https://github.com/patdeegan/integer-obfuscator/blob/master/lib%2Fcipher%2Fskip32.rb</a></p>\n\n<p>I'm currently using this patdeegan/integer-obfuscator to create a non sequential id corresponding to each of my db ids. The thing is, I need this ID to be between 0 and ((2^31)-1) and the above generates ids that go up to ((2^32)-1)</p>\n\n<p>I have little understanding of bitwise operations but <a href=\"http://undeadly.org/cgi?action=article&amp;sid=20080804095748\" rel=\"nofollow\">this article</a> seems to state they tweaked Skip32 to generate an integer on only 31-bit.</p>\n\n<p>Does someone know how this would need to be adapted and explain it to me ?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "answers": [{"tags": [], "owner": {"reputation": 125, "user_id": 3098637, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b8ad3ec2fb010fe20f558a0e27cd8cf?s=128&d=identicon&r=PG&f=1", "display_name": "Andy", "link": "https://stackoverflow.com/users/3098637/andy"}, "is_accepted": true, "score": 1, "last_activity_date": 1459351091, "creation_date": 1459351091, "answer_id": 36313053, "question_id": 36312162, "link": "https://stackoverflow.com/questions/36312162/formular-in-bootstrap-modal-not-processing/36313053#36313053", "title": "formular in bootstrap modal not processing", "body": "<p>in your code if <code>@user.save</code> returns false you don't do anything. The idiom I use looks like this.</p>\n\n<pre><code>if @user.save\n   flash[:success] = \"Welcome\"\n   redirect_to ...\nelse\n   flash[:error] = \"Failed\"\n   render 'new'\nend\n</code></pre>\n\n<p>and render any errors raised by your model within your form.</p>\n"}], "owner": {"reputation": 4750, "user_id": 4367019, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/CnP5z.jpg?s=128&g=1", "display_name": "Felix", "link": "https://stackoverflow.com/users/4367019/felix"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 33, "favorite_count": 0, "accepted_answer_id": 36313053, "answer_count": 1, "score": 0, "last_activity_date": 1459365779, "creation_date": 1459348749, "last_edit_date": 1459365779, "question_id": 36312162, "link": "https://stackoverflow.com/questions/36312162/formular-in-bootstrap-modal-not-processing", "title": "formular in bootstrap modal not processing", "body": "<p>i've got a page movies/add </p>\n\n<p>in this page I tried to use a bootstrap modal with a included form that should call the users/signup function</p>\n\n<p>The form looks like this:</p>\n\n<pre><code>   &lt;%= form_for User.new, :html =&gt; {:multipart =&gt; true, :class =&gt; \"form-horizontal\", :role =&gt; \"form\", :id =&gt; \"signupform\"}, :as =&gt; :user, :method =&gt; :post, :url =&gt; {}, :controller =&gt; :users, :action =&gt; :signup do |f| %&gt;\n</code></pre>\n\n<p>I don't get an error, it looks like it works fine, but in database there is nothing. </p>\n\n<p>the controller function in useres_controller looks like this:</p>\n\n<pre><code>def signup\nif request.post?\n  puts \"SSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSs\"\n  @user = User.new(user_params)\n  if @user.save\n    flash[:notice] = t(\"flash.signup\")\n    #Weiterleitung nach erfolgreichem Anlegen\n    redirect_to :controller =&gt; :startsites, :action =&gt; \"index\"\n  end\nelse\n  @user = User.new\nend\nend\n</code></pre>\n"}, {"tags": ["html", "ruby"], "comments": [{"owner": {"reputation": 949, "user_id": 4210110, "user_type": "registered", "accept_rate": 92, "profile_image": "https://lh5.googleusercontent.com/-V_sAK37z25M/AAAAAAAAAAI/AAAAAAAABsg/kzDEZOpn-UM/photo.jpg?sz=128", "display_name": "Juanjo Salvador", "link": "https://stackoverflow.com/users/4210110/juanjo-salvador"}, "edited": false, "score": 0, "creation_date": 1459347576, "post_id": 36311512, "comment_id": 60246507, "body": "Ruby or Ruby on Rails?"}, {"owner": {"reputation": 1, "user_id": 5931921, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac4f78f09cd4cadfb4f97987010b227c?s=128&d=identicon&r=PG&f=1", "display_name": "DemoNK", "link": "https://stackoverflow.com/users/5931921/demonk"}, "reply_to_user": {"reputation": 949, "user_id": 4210110, "user_type": "registered", "accept_rate": 92, "profile_image": "https://lh5.googleusercontent.com/-V_sAK37z25M/AAAAAAAAAAI/AAAAAAAABsg/kzDEZOpn-UM/photo.jpg?sz=128", "display_name": "Juanjo Salvador", "link": "https://stackoverflow.com/users/4210110/juanjo-salvador"}, "edited": false, "score": 0, "creation_date": 1459347796, "post_id": 36311512, "comment_id": 60246706, "body": "Sorry, I should have specified. Ruby"}, {"owner": {"reputation": 343, "user_id": 550047, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/krEXd.png?s=128&g=1", "display_name": "babgyy", "link": "https://stackoverflow.com/users/550047/babgyy"}, "edited": false, "score": 0, "creation_date": 1459349490, "post_id": 36311512, "comment_id": 60248090, "body": "How much from the xml do you want to display ? all of it ? Do you just want to dump all the XML content on each side, or do you want a visual, line-by-line comparison ?"}, {"owner": {"reputation": 1, "user_id": 5931921, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac4f78f09cd4cadfb4f97987010b227c?s=128&d=identicon&r=PG&f=1", "display_name": "DemoNK", "link": "https://stackoverflow.com/users/5931921/demonk"}, "edited": false, "score": 0, "creation_date": 1459349848, "post_id": 36311512, "comment_id": 60248367, "body": "I&#39;ve already taken two xml files, compared &amp; diffed into two separate hashes; removed &amp; added, which I converted back into an XML format. I want to dump the two new XML&#39;s, one on each side."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 5931921, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac4f78f09cd4cadfb4f97987010b227c?s=128&d=identicon&r=PG&f=1", "display_name": "DemoNK", "link": "https://stackoverflow.com/users/5931921/demonk"}, "edited": false, "score": 0, "creation_date": 1459362715, "post_id": 36313173, "comment_id": 60257207, "body": "I&#39;m actually having an issue where the XML I read in is not keeping its format. Any ideas?"}, {"owner": {"reputation": 343, "user_id": 550047, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/krEXd.png?s=128&g=1", "display_name": "babgyy", "link": "https://stackoverflow.com/users/550047/babgyy"}, "reply_to_user": {"reputation": 1, "user_id": 5931921, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac4f78f09cd4cadfb4f97987010b227c?s=128&d=identicon&r=PG&f=1", "display_name": "DemoNK", "link": "https://stackoverflow.com/users/5931921/demonk"}, "edited": false, "score": 0, "creation_date": 1459409385, "post_id": 36313173, "comment_id": 60276161, "body": "What part of the format is lost ? Is it some characters changing ? Or is the indentation not pretty ?"}, {"owner": {"reputation": 1, "user_id": 5931921, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac4f78f09cd4cadfb4f97987010b227c?s=128&d=identicon&r=PG&f=1", "display_name": "DemoNK", "link": "https://stackoverflow.com/users/5931921/demonk"}, "edited": false, "score": 0, "creation_date": 1459427078, "post_id": 36313173, "comment_id": 60288716, "body": "Indentation is not pretty, it just reads out in one long string with a bunch of breaks in rows"}], "tags": [], "owner": {"reputation": 343, "user_id": 550047, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/krEXd.png?s=128&g=1", "display_name": "babgyy", "link": "https://stackoverflow.com/users/550047/babgyy"}, "is_accepted": true, "score": 0, "last_activity_date": 1459764236, "last_edit_date": 1459764236, "creation_date": 1459351398, "answer_id": 36313173, "question_id": 36311512, "link": "https://stackoverflow.com/questions/36311512/how-do-you-create-an-html-table-in-ruby/36313173#36313173", "title": "How do you create an HTML table in Ruby?", "body": "<p>From what I understand, a very simple script like that could do the job, but I might have missed something from your question:</p>\n\n<pre><code># Assuming your xml files are xml1.xml and xml2.xml, this will create an HTML file called result.html containing the HTML table\nhtml = \"\"\nhtml += \"&lt;html&gt;\"\nhtml += \"&lt;table&gt;\"\nhtml += \"&lt;tr&gt;&lt;td&gt;First XML File&lt;/td&gt;&lt;td&gt;Second XML file&lt;/td&gt;&lt;/tr&gt;\"\nhtml += \"&lt;tr&gt;\"\nhtml += \"&lt;td&gt;\"\nhtml += File.read(\"xml1.xml\", :encoding =&gt; \"UTF-8\").encode(:xml =&gt; :text)\nhtml += \"&lt;/td&gt;\"\nhtml += \"&lt;td&gt;\"\nhtml += File.read(\"xml2.xml\", :encoding =&gt; \"UTF-8\").encode(:xml =&gt; :text)\nhtml += \"&lt;/td&gt;\"\nhtml += \"&lt;/tr&gt;\"\nhtml += \"&lt;/table&gt;\"\nhtml += \"&lt;/html&gt;\"\n\n%x(echo '#{html}' &gt;&gt; \"result.html\")\n</code></pre>\n\n<p>If you want to have pretty-indentation on top of that, you can use ruby core REXML::Document which has it built-in. You also have to nest your pretty-indented XML in a pre tag for it to display well:</p>\n\n<pre><code>require \"rexml/document\"\n\ndoc1 = REXML::Document.new File.read(\"xml1.xml\", :encoding =&gt; \"UTF-8\")\nout1 = \"\"\ndoc1.write(out1, 2)\n\ndoc2 = REXML::Document.new File.read(\"xml2.xml\", :encoding =&gt; \"UTF-8\")\nout2 = \"\"\ndoc2.write(out2, 2)\n\nhtml=\"\"\nhtml += \"&lt;html&gt;\"\nhtml += \"&lt;table&gt;\"\nhtml += \"&lt;tr&gt;&lt;td&gt;First XML File&lt;/td&gt;&lt;td&gt;Second XML file&lt;/td&gt;&lt;/tr&gt;\"\nhtml += \"&lt;tr&gt;\"\nhtml += \"&lt;td&gt;&lt;pre&gt;\"\nhtml += out1.encode(:xml =&gt; :text)\nhtml += \"&lt;/pre&gt;&lt;/td&gt;\"\nhtml += \"&lt;td&gt;&lt;pre&gt;\"\nhtml += out2.encode(:xml =&gt; :text)\nhtml += \"&lt;/pre&gt;&lt;/td&gt;\"\nhtml += \"&lt;/tr&gt;\"\nhtml += \"&lt;/table&gt;\"\nhtml += \"&lt;/html&gt;\"\n\n%x(echo '#{html}' &gt;&gt; \"result.html\")\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 5931921, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac4f78f09cd4cadfb4f97987010b227c?s=128&d=identicon&r=PG&f=1", "display_name": "DemoNK", "link": "https://stackoverflow.com/users/5931921/demonk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 170, "favorite_count": 0, "accepted_answer_id": 36313173, "answer_count": 1, "score": -3, "last_activity_date": 1459764236, "creation_date": 1459347263, "question_id": 36311512, "link": "https://stackoverflow.com/questions/36311512/how-do-you-create-an-html-table-in-ruby", "title": "How do you create an HTML table in Ruby?", "body": "<p>I want to create a 2x2 table in Ruby in order to output a side-by-side comparison of some XML files. The first row would just be headers, the next row would be the files.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rails-api"], "answers": [{"tags": [], "owner": {"reputation": 111, "user_id": 3964347, "user_type": "registered", "profile_image": "https://graph.facebook.com/1334370467/picture?type=large", "display_name": "Adam May", "link": "https://stackoverflow.com/users/3964347/adam-may"}, "is_accepted": true, "score": 2, "last_activity_date": 1459347743, "creation_date": 1459347743, "answer_id": 36311717, "question_id": 36311275, "link": "https://stackoverflow.com/questions/36311275/rails-bundlergemrequireerror-when-starting-server/36311717#36311717", "title": "Rails Bundler::GemRequireError when starting server", "body": "<p>Not sure if this is exactly the issue, but rails-5 already contains rails-api. Putting them both together might cause an issue.</p>\n"}], "owner": {"reputation": 573, "user_id": 3380246, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/UuE48.png?s=128&g=1", "display_name": "whatAboutJohn", "link": "https://stackoverflow.com/users/3380246/whataboutjohn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 362, "favorite_count": 0, "accepted_answer_id": 36311717, "answer_count": 1, "score": 0, "last_activity_date": 1459347743, "creation_date": 1459346773, "question_id": 36311275, "link": "https://stackoverflow.com/questions/36311275/rails-bundlergemrequireerror-when-starting-server", "title": "Rails Bundler::GemRequireError when starting server", "body": "<p>I'm getting this error whenever I try to run the server, not sure if it has to do with the js runtime, I'm using node and execjs installed for that.</p>\n\n<pre><code>/Users/me/.rvm/gems/ruby-2.2.2@global/gems/bundler-1.11.2/lib/bundler/runtime.rb:80:in `rescue in block (2 levels) in require': There was an error while trying to load the gem 'rails-api'. (Bundler::GemRequireError)\nfrom /Users/me/.rvm/gems/ruby-2.2.2@global/gems/bundler-1.11.2/lib/bundler/runtime.rb:76:in `block (2 levels) in require'\nfrom /Users/me/.rvm/gems/ruby-2.2.2@global/gems/bundler-1.11.2/lib/bundler/runtime.rb:72:in `each'\nfrom /Users/me/.rvm/gems/ruby-2.2.2@global/gems/bundler-1.11.2/lib/bundler/runtime.rb:72:in `block in require'\nfrom /Users/me/.rvm/gems/ruby-2.2.2@global/gems/bundler-1.11.2/lib/bundler/runtime.rb:61:in `each'\nfrom /Users/me/.rvm/gems/ruby-2.2.2@global/gems/bundler-1.11.2/lib/bundler/runtime.rb:61:in `require'\nfrom /Users/me/.rvm/gems/ruby-2.2.2@global/gems/bundler-1.11.2/lib/bundler.rb:99:in `require'\nfrom /Users/me/Documents/Rails/Paid/paid-api/config/application.rb:17:in `&lt;top (required)&gt;'\nfrom /Users/me/.rvm/gems/ruby-2.2.2/gems/railties-5.0.0.beta3/lib/rails/commands/commands_tasks.rb:88:in `require'\nfrom /Users/me/.rvm/gems/ruby-2.2.2/gems/railties-5.0.0.beta3/lib/rails/commands/commands_tasks.rb:88:in `block in server'\nfrom /Users/me/.rvm/gems/ruby-2.2.2/gems/railties-5.0.0.beta3/lib/rails/commands/commands_tasks.rb:85:in `tap'\nfrom /Users/me/.rvm/gems/ruby-2.2.2/gems/railties-5.0.0.beta3/lib/rails/commands/commands_tasks.rb:85:in `server'\nfrom /Users/me/.rvm/gems/ruby-2.2.2/gems/railties-5.0.0.beta3/lib/rails/commands/commands_tasks.rb:49:in `run_command!'\nfrom /Users/me/.rvm/gems/ruby-2.2.2/gems/railties-5.0.0.beta3/lib/rails/command.rb:20:in `run'\nfrom /Users/me/.rvm/gems/ruby-2.2.2/gems/railties-5.0.0.beta3/lib/rails/commands.rb:18:in `&lt;top (required)&gt;'\nfrom /Users/me/Documents/Rails/Paid/paid-api/bin/rails:9:in `require'\nfrom /Users/me/Documents/Rails/Paid/paid-api/bin/rails:9:in `&lt;top (required)&gt;'\nfrom /Users/me/.rvm/gems/ruby-2.2.2/gems/spring-1.6.4/lib/spring/client/rails.rb:28:in `load'\nfrom /Users/me/.rvm/gems/ruby-2.2.2/gems/spring-1.6.4/lib/spring/client/rails.rb:28:in `call'\nfrom /Users/me/.rvm/gems/ruby-2.2.2/gems/spring-1.6.4/lib/spring/client/command.rb:7:in `call'\nfrom /Users/me/.rvm/gems/ruby-2.2.2/gems/spring-1.6.4/lib/spring/client.rb:28:in `run'\nfrom /Users/me/.rvm/gems/ruby-2.2.2/gems/spring-1.6.4/bin/spring:49:in `&lt;top (required)&gt;'\nfrom /Users/me/.rvm/gems/ruby-2.2.2/gems/spring-1.6.4/lib/spring/binstub.rb:11:in `load'\nfrom /Users/me/.rvm/gems/ruby-2.2.2/gems/spring-1.6.4/lib/spring/binstub.rb:11:in `&lt;top (required)&gt;'\nfrom /Users/me/Documents/Rails/Paid/paid-api/bin/spring:13:in `require'\nfrom /Users/me/Documents/Rails/Paid/paid-api/bin/spring:13:in `&lt;top (required)&gt;'\nfrom bin/rails:3:in `load'\nfrom bin/rails:3:in `&lt;main&gt;'\n</code></pre>\n\n<p>My current Gemfile, pretty straight forward:</p>\n\n<pre><code>source 'https://rubygems.org'\ngem 'rails', '&gt;= 5.0.0.beta2', '&lt; 5.1'\ngem 'rails-api'\n# Concurrent app server\ngem 'puma'\ngem 'activerecord-import', '~&gt; 0.11.0'\n# Message Queuing\ngem 'aws-sdk', '~&gt; 2'\n# Load Balancing\ngem 'shoryuken'\n# Salesforce REST api\ngem 'restforce'\n# PAID ruby-gem\ngem 'paid'\ngroup :development, :test do\n  gem 'rubocop', '~&gt; 0.39.0', require: false\nend\ngroup :development do\n  gem 'spring'\nend\ngroup :test do\n  gem 'rspec-core'\nend\ngroup :doc do\n  gem 'sdoc'\nend\n</code></pre>\n\n<p>My application.rb file, not much different:</p>\n\n<pre><code>require File.expand_path('../boot', __FILE__)\nrequire \"rails\"\n# Pick the frameworks you want:\nrequire \"active_model/railtie\"\nrequire \"active_job/railtie\"\n# require \"active_record/railtie\"\nrequire \"action_controller/railtie\"\nrequire \"action_mailer/railtie\"\nrequire \"action_view/railtie\"\nrequire \"action_cable/engine\"\n# require \"sprockets/railtie\"\nrequire \"rails/test_unit/railtie\"\n# Require the gems listed in Gemfile, including any gems\n# you've limited to :test, :development, or :production.\nBundler.require(*Rails.groups)\nmodule PaidApi\n  class Application &lt; Rails::Application\n    config.active_job.queue_adapter = :shoryuken\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "devise"], "answers": [{"tags": [], "owner": {"reputation": 819, "user_id": 2499227, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NpTc3.jpg?s=128&g=1", "display_name": "MTarantini", "link": "https://stackoverflow.com/users/2499227/mtarantini"}, "is_accepted": false, "score": 0, "last_activity_date": 1459352612, "last_edit_date": 1459352612, "creation_date": 1459347067, "answer_id": 36311419, "question_id": 36311023, "link": "https://stackoverflow.com/questions/36311023/ruby-on-rails-unable-to-create-a-new-profile-for-each-user/36311419#36311419", "title": "Ruby on Rails - Unable to create a new profile for each user", "body": "<p>If the issue is that <code>Users</code> are not able to edit their own profile, then I believe it is caused by the use of <code>find_by</code> within set_user:</p>\n\n<pre><code>@user = User.find_by(params[:id])\n</code></pre>\n\n<p>Should be:</p>\n\n<pre><code>@user = User.find(params[:id])\n</code></pre>\n\n<p>If you truly wanted to use find_by you could do:</p>\n\n<pre><code>@user = User.find_by_id(params[:id])\n</code></pre>\n\n<p>Or</p>\n\n<pre><code>@user = User.find_by(id: params[:id])\n</code></pre>\n\n<p><code>Find_by</code> used as the 2 examples above will not throw an error if a <code>User</code> is not found, while <code>find</code> will.</p>\n\n<p>Sidenote: You can remove the @user assignment within the show action.</p>\n"}, {"comments": [{"owner": {"reputation": 738, "user_id": 3521315, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/w55jb.jpg?s=128&g=1", "display_name": "Mike.Whitehead", "link": "https://stackoverflow.com/users/3521315/mike-whitehead"}, "edited": false, "score": 0, "creation_date": 1459349517, "post_id": 36311501, "comment_id": 60248113, "body": "Thanks a lot for answering but I&#39;m not sure this solves the initial issue, though, as for each user I would want them to edit their own profile. At present it keeps kicking back to the flash message."}, {"owner": {"reputation": 4045, "user_id": 1378252, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/d4025b3e5be289ffee5dffbd0a1a7fb5?s=128&d=identicon&r=PG", "display_name": "toddmetheny", "link": "https://stackoverflow.com/users/1378252/toddmetheny"}, "reply_to_user": {"reputation": 738, "user_id": 3521315, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/w55jb.jpg?s=128&g=1", "display_name": "Mike.Whitehead", "link": "https://stackoverflow.com/users/3521315/mike-whitehead"}, "edited": false, "score": 0, "creation_date": 1459349576, "post_id": 36311501, "comment_id": 60248173, "body": "It solves it. They could still edit the profile and so could you."}, {"owner": {"reputation": 738, "user_id": 3521315, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/w55jb.jpg?s=128&g=1", "display_name": "Mike.Whitehead", "link": "https://stackoverflow.com/users/3521315/mike-whitehead"}, "edited": false, "score": 0, "creation_date": 1459350304, "post_id": 36311501, "comment_id": 60248715, "body": "What if I don&#39;t want to set myself as an admin for the site?"}, {"owner": {"reputation": 4045, "user_id": 1378252, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/d4025b3e5be289ffee5dffbd0a1a7fb5?s=128&d=identicon&r=PG", "display_name": "toddmetheny", "link": "https://stackoverflow.com/users/1378252/toddmetheny"}, "reply_to_user": {"reputation": 738, "user_id": 3521315, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/w55jb.jpg?s=128&g=1", "display_name": "Mike.Whitehead", "link": "https://stackoverflow.com/users/3521315/mike-whitehead"}, "edited": false, "score": 0, "creation_date": 1459350391, "post_id": 36311501, "comment_id": 60248801, "body": "you can always remove the admin from yourself after you create those users. there can be multiple admin users. But you would just go and change admin to false on your user in the console."}, {"owner": {"reputation": 4045, "user_id": 1378252, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/d4025b3e5be289ffee5dffbd0a1a7fb5?s=128&d=identicon&r=PG", "display_name": "toddmetheny", "link": "https://stackoverflow.com/users/1378252/toddmetheny"}, "reply_to_user": {"reputation": 738, "user_id": 3521315, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/w55jb.jpg?s=128&g=1", "display_name": "Mike.Whitehead", "link": "https://stackoverflow.com/users/3521315/mike-whitehead"}, "edited": false, "score": 0, "creation_date": 1459350459, "post_id": 36311501, "comment_id": 60248850, "body": "Another option is to skip callbacks: <a href=\"http://stackoverflow.com/questions/7572652/rails-3-skip-validations-and-callbacks\" title=\"rails 3 skip validations and callbacks\">stackoverflow.com/questions/7572652/&hellip;</a>"}, {"owner": {"reputation": 738, "user_id": 3521315, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/w55jb.jpg?s=128&g=1", "display_name": "Mike.Whitehead", "link": "https://stackoverflow.com/users/3521315/mike-whitehead"}, "edited": false, "score": 0, "creation_date": 1459351680, "post_id": 36311501, "comment_id": 60249816, "body": "There seems to be an issue when I&#39;m creating a new user - the code isn&#39;t creating a new blank profile template for me to edit/update. No matter which user I&#39;m signed in as when I try and edit the profile they all want to jump back to the original profile I created. It&#39;s weird.....and frustrating...as there&#39;s no error messages."}, {"owner": {"reputation": 4045, "user_id": 1378252, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/d4025b3e5be289ffee5dffbd0a1a7fb5?s=128&d=identicon&r=PG", "display_name": "toddmetheny", "link": "https://stackoverflow.com/users/1378252/toddmetheny"}, "reply_to_user": {"reputation": 738, "user_id": 3521315, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/w55jb.jpg?s=128&g=1", "display_name": "Mike.Whitehead", "link": "https://stackoverflow.com/users/3521315/mike-whitehead"}, "edited": false, "score": 0, "creation_date": 1459351751, "post_id": 36311501, "comment_id": 60249885, "body": "Are you still signed in as yourself?"}, {"owner": {"reputation": 738, "user_id": 3521315, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/w55jb.jpg?s=128&g=1", "display_name": "Mike.Whitehead", "link": "https://stackoverflow.com/users/3521315/mike-whitehead"}, "edited": false, "score": 0, "creation_date": 1459352257, "post_id": 36311501, "comment_id": 60250313, "body": "No, I&#39;m signing out each time and signing back in. I&#39;ve set up 5 different users now and its the same with all of them."}, {"owner": {"reputation": 4045, "user_id": 1378252, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/d4025b3e5be289ffee5dffbd0a1a7fb5?s=128&d=identicon&r=PG", "display_name": "toddmetheny", "link": "https://stackoverflow.com/users/1378252/toddmetheny"}, "reply_to_user": {"reputation": 738, "user_id": 3521315, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/w55jb.jpg?s=128&g=1", "display_name": "Mike.Whitehead", "link": "https://stackoverflow.com/users/3521315/mike-whitehead"}, "edited": false, "score": 0, "creation_date": 1459352914, "post_id": 36311501, "comment_id": 60250830, "body": "well--the admin thing will fix it. That validation won&#39;t even run if you&#39;re admin. You just stay signed in as the same user. It&#39;s cool if you don&#39;t want to try that but I gave you a solution that will work. It just seems like you don&#39;t want to do it. Which is totally cool. You can solve it a different way if you prefer."}, {"owner": {"reputation": 819, "user_id": 2499227, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NpTc3.jpg?s=128&g=1", "display_name": "MTarantini", "link": "https://stackoverflow.com/users/2499227/mtarantini"}, "edited": false, "score": 0, "creation_date": 1459353571, "post_id": 36311501, "comment_id": 60251305, "body": "You can take a look at my answer.. it&#39;s possible that this is caused by the use of <code>find_by</code>. Worth a shot."}], "tags": [], "owner": {"reputation": 4045, "user_id": 1378252, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/d4025b3e5be289ffee5dffbd0a1a7fb5?s=128&d=identicon&r=PG", "display_name": "toddmetheny", "link": "https://stackoverflow.com/users/1378252/toddmetheny"}, "is_accepted": false, "score": 0, "last_activity_date": 1459347241, "creation_date": 1459347241, "answer_id": 36311501, "question_id": 36311023, "link": "https://stackoverflow.com/questions/36311023/ruby-on-rails-unable-to-create-a-new-profile-for-each-user/36311501#36311501", "title": "Ruby on Rails - Unable to create a new profile for each user", "body": "<p>I would create an admin. An easy way to do this is to add a column to your users table called admin and make it a boolean. Migrate the db.</p>\n\n<p>Then check to whether a user is an admin before running the owned_profile method. In that method, change: <code>unless current_user == @user</code> to</p>\n\n<pre><code>unless current_user == @user || current_user.admin\n</code></pre>\n\n<p>Then set yourself as an admin in the console, save and then freely add profiles without that callback running.</p>\n"}, {"tags": [], "owner": {"reputation": 5237, "user_id": 2325924, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/XSXrT.jpg?s=128&g=1", "display_name": "7urkm3n", "link": "https://stackoverflow.com/users/2325924/7urkm3n"}, "is_accepted": false, "score": 0, "last_activity_date": 1459358208, "creation_date": 1459358208, "answer_id": 36315530, "question_id": 36311023, "link": "https://stackoverflow.com/questions/36311023/ruby-on-rails-unable-to-create-a-new-profile-for-each-user/36315530#36315530", "title": "Ruby on Rails - Unable to create a new profile for each user", "body": "<p>You can do it by this way.</p>\n\n<p>When user signing up, automatically creates profile. Good point of this <code>ID</code> of user and profile tables will be the same.</p>\n\n<pre><code>rails g model profile first_name last_name email\n\nrails g migration add_user_id_to_profiles user_id:integer\n</code></pre>\n\n<p>Profile.rb</p>\n\n<pre><code>belongs_to :user\n</code></pre>\n\n<p>User.rb</p>\n\n<pre><code>has_one :profile, dependent: :destroy\n\nbefore_create :set_profile\ndef set_profile\n    build_profile(id: self.id, user_id: self.id, email: self.email)\nend \n</code></pre>\n\n<p>GoodLuck.</p>\n"}], "owner": {"reputation": 738, "user_id": 3521315, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/w55jb.jpg?s=128&g=1", "display_name": "Mike.Whitehead", "link": "https://stackoverflow.com/users/3521315/mike-whitehead"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 158, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1459358208, "creation_date": 1459346227, "last_edit_date": 1459355860, "question_id": 36311023, "link": "https://stackoverflow.com/questions/36311023/ruby-on-rails-unable-to-create-a-new-profile-for-each-user", "title": "Ruby on Rails - Unable to create a new profile for each user", "body": "<p>I'm building an events app with users who will each have a personal profile. I've set up a few users for the site but when I try and create and/or edit a profile for each user it refers me back to a flash message \"That profile doesn't belong to you!\" which is in reference to my first user profile which was set up and works fine.</p>\n\n<p>I'm using Devise gem for initial set up but have built out from their with my own user controller. Here's the code from that controller -</p>\n\n<pre><code>class UsersController &lt; ApplicationController\n  before_action :authenticate_user!\n  before_action :set_user\n  before_action :owned_profile, only: [:edit, :update]\n\n  def new\n    @user = User.new\n  end\n\n  def show\n    @user = User.find(params[:id])\n  end\n\n  def create\n  end\n\n  def edit  \n    @user = current_user #User.find_by(params[:id])\n  end  \n\n  def update\n    @user = User.find_by(params[:id])\n    if @user.update(user_params)\n        redirect_to user_path, notice: \"Profile successfully updated!\"\n    else\n        render 'edit'\n    end\n  end\n\n  private\n\n  def user_params\n    params.require(:user).\n      permit(:name, :username, :biography, :email, :url)\n  end   \n\n  def owned_profile\n    unless current_user == @user\n      flash[:alert] = \"That profile doesn't belong to you!\"\n      redirect_to root_path\n    end\n  end\n\n  def set_user\n    @user = User.find_by(params[:id])\n  end\nend\n</code></pre>\n\n<p>Any assistance would be appreciated.</p>\n"}, {"tags": ["ruby", "string", "immutability", "method-chaining"], "comments": [{"owner": {"reputation": 106150, "user_id": 213464, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/a7ba62044bc19143ea4a38cf490b67f2?s=128&d=identicon&r=PG", "display_name": "YOU", "link": "https://stackoverflow.com/users/213464/you"}, "edited": false, "score": 0, "creation_date": 1459346390, "post_id": 36310925, "comment_id": 60245450, "body": "just use <code>downcase</code> instead of <code>downcase!</code>?"}], "answers": [{"tags": [], "owner": {"reputation": 3566, "user_id": 5026139, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/fbf86a3072e85746a0dde45665322890?s=128&d=identicon&r=PG&f=1", "display_name": "Damon", "link": "https://stackoverflow.com/users/5026139/damon"}, "is_accepted": false, "score": 0, "last_activity_date": 1459346886, "creation_date": 1459346886, "answer_id": 36311321, "question_id": 36310925, "link": "https://stackoverflow.com/questions/36310925/does-it-matter-which-way-a-string-method-is-used/36311321#36311321", "title": "Does it matter which way a string method is used?", "body": "<p>The problem you are encountering is with the bang method <code>downcase!</code>.</p>\n\n<p>This is basically saying \"mutate the original string so that it is downcase\".\nThe important part is that this returns <code>nil</code>. As such you are actually calling <code>include?</code> on <code>nil</code>.</p>\n\n<p>If you use the non bang method <code>downcase</code> instead, it is saying \"downcase the previously chained thing but do not mutate the original\". The key difference is that it returns the result rather than <code>nil</code>.</p>\n\n<p>Here is an example:</p>\n\n<pre><code>str = \"ABCD\"\nstr.downcase!\n=&gt; nil\n\nstr\n=&gt; \"abcd\"\n\nstr = \"ABCD\"\nstr.downcase\n=&gt; \"abcd\"\n\nstr\n=&gt; \"ABCD\"  # Note str is still unchanged unless you set str = str.downcase \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1002, "user_id": 5479988, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Z_oUVK4Wkuo/AAAAAAAAAAI/AAAAAAAAABA/vn2BD49K67M/photo.jpg?sz=128", "display_name": "Jim Van Fleet", "link": "https://stackoverflow.com/users/5479988/jim-van-fleet"}, "is_accepted": false, "score": 0, "last_activity_date": 1459346913, "creation_date": 1459346913, "answer_id": 36311339, "question_id": 36310925, "link": "https://stackoverflow.com/questions/36310925/does-it-matter-which-way-a-string-method-is-used/36311339#36311339", "title": "Does it matter which way a string method is used?", "body": "<p>Welcome to Ruby!  While your apprenticeship at Codeacademy may be limited, you'll continue to refer to language API documentation throughout your career.  API documentation is a description of what the language (or a library) does for you.  In this case, you're using <a href=\"http://ruby-doc.org/core-2.1.0/String.html#method-i-downcase!\" rel=\"nofollow\">downcase!</a> which, as one commenter points out, does not always return a String.  When it takes no action, it returns nil.  Nil is an Object in Ruby (like everything else), but the 'include?' method isn't defined for nil, which explains your error.  (It's one of the most common errors in Ruby, learn its meaning.)</p>\n\n<p>So, in fact, what's breaking here isn't your method chain.  It's that one of the intermediate methods isn't returning a value of the type you expect (nil instead of some kind of String).</p>\n"}, {"tags": [], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "is_accepted": false, "score": 0, "last_activity_date": 1459350833, "creation_date": 1459350833, "answer_id": 36312956, "question_id": 36310925, "link": "https://stackoverflow.com/questions/36310925/does-it-matter-which-way-a-string-method-is-used/36312956#36312956", "title": "Does it matter which way a string method is used?", "body": "<p>Chaining non destructive methods like:</p>\n\n<pre><code>string.chomp.downcase...\n</code></pre>\n\n<p>has the advantage that the code is concise, but is not efficient if you are not interested in the original state of the object, and just want the final result because it creates intermediate objects during the chain.</p>\n\n<p>On the other hand, applying destructive methods sequentially to the same object:</p>\n\n<pre><code>string.chomp!\nstring.downcase!\n...\n</code></pre>\n\n<p>is more efficient if you do not need to keep the original state of the object, but is not concise.</p>\n\n<p>Combining methods that may return an object of a different class (particularly <code>nil</code>) as:</p>\n\n<pre><code>string = gets.chomp!.downcase!...\n</code></pre>\n\n<p>is wrong because the result can become <code>nil</code> at some point in the chain.</p>\n\n<p>Applying a potentially <code>nil</code>-returning method at only the last position as you did:</p>\n\n<pre><code>string = gets.chomp.downcase!\n</code></pre>\n\n<p>is still not useful if you expect <code>string</code> to always be a string, and can easily lead to an error as you did.</p>\n\n<p>If you want to chain these methods in you example, perhaps you can do this:</p>\n\n<pre><code>user_input = gets.tap(&amp;:chomp!).tap(&amp;:downcase!)\nif user_input.include?(\"s\")\n...\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 6018, "user_id": 3073313, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/d9a53be16eb996b521f1637d19005511?s=128&d=identicon&r=PG", "display_name": "Jay-Ar Polidario", "link": "https://stackoverflow.com/users/3073313/jay-ar-polidario"}, "is_accepted": false, "score": 1, "last_activity_date": 1459352696, "last_edit_date": 1459352696, "creation_date": 1459352120, "answer_id": 36313475, "question_id": 36310925, "link": "https://stackoverflow.com/questions/36310925/does-it-matter-which-way-a-string-method-is-used/36313475#36313475", "title": "Does it matter which way a string method is used?", "body": "<p>Firstly, in case you do not yet fully understand, assignment of values to variables are done through <code>=</code>, and that you could inspect what variable type it is by appending <code>.class</code> to anything.</p>\n\n<p>Consider the following:</p>\n\n<pre><code>name = 'John'\nputs name\n# =&gt; John\nputs name.class\n# =&gt; String\n</code></pre>\n\n<p>Now, secondly, it should be noted that the return values of ALL methods are ALL different. But all of them can be identified into two types:</p>\n\n<p>Methods that:</p>\n\n<ol>\n<li>return self</li>\n<li>return anything other than self</li>\n</ol>\n\n<p><strong>Example for 1.</strong></p>\n\n<p>-- methods that return self, which you could say methods that return the same type of object which in our specific case, a <code>String</code></p>\n\n<pre><code>name = 'John'\nputs name\n# =&gt; 'John'\nputs name.class\n# =&gt; String\n\ndowncased_name = name.downcase\nputs downcased_name\n# =&gt; john\nputs downcased_name.class\n# =&gt; String\n\ndeleted_downcased_name = downcased_name.delete('h')\nputs deleted_downcased_name\n# =&gt; jon\nputs deleted_downcased_name.class\n# =&gt; String\n\n# All of the above can be just simplified into:\n\ndeleted_downcased_name2 = 'John'.downcase.delete('h')\nputs deleted_downcased_name2\n# =&gt; jon\nputs deleted_downcased_name2.class\n# =&gt; String\n</code></pre>\n\n<p>Notice that <code>deleted_downcased_name</code> and <code>deleted_downcased_name2</code> are the same, because you could treat the chained methods as if you are chaining the return values which is 'John' -> 'john' -> 'jon'.</p>\n\n<p><strong>Example for 2</strong> </p>\n\n<p>-- methods that return anything but self, which you could say methods that return a different type. </p>\n\n<p>In our specific case, String's <code>downcase!</code> returns either a <code>String</code> or <code>NilClass</code> <a href=\"http://ruby-doc.org/core-1.9.3/String.html#downcase-21-method\" rel=\"nofollow\">(reference here)</a></p>\n\n<ul>\n<li>returning <code>String</code> if the string changes, or</li>\n<li>returning <code>nil</code> if string is already downcased to begin with (no change).</li>\n</ul>\n\n<p>or another String's method: <code>start_with?</code> <a href=\"http://ruby-doc.org/core-1.9.3/String.html#start_with-3F-method\" rel=\"nofollow\">(reference here)</a></p>\n\n<ul>\n<li>returning <code>true</code> or <code>false</code></li>\n</ul>\n\n<p>This is where chaining of methods will not work (raises an error), when you try to use a String method as a chain to nil value.</p>\n\n<p>Consider the following</p>\n\n<pre><code>name = 'mary' \nputs name\n# =&gt; 'mary'\nputs name.class\n# =&gt; String\n\ndowncased_name = name.downcase!\nputs downcased_name\n# =&gt; nil\nputs downcased_name.class\n# =&gt; NilClass\n\ndowncased_name.delete('h')\n# =&gt; This will raise the following error\n# NoMethodError: undefined method `delete' for nil:NilClass\n</code></pre>\n\n<p>The error above is because downcased_name is a type of <code>NilClass</code> where you are expecting it to be a type of <code>String</code>. Therefore you cannot chain any string method on it anymore. You can only chain <code>String</code> methods on a <code>String</code> type of value. Similarly, you can only chain <code>Number</code> methods on a <code>Number</code> type of value.</p>\n\n<p>Whenever in doubt, you could always check the documentation to check what a method does, and what its return value and type.</p>\n"}], "owner": {"reputation": 281, "user_id": 1958570, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d8d452abcbf7b0b2753634f1c545e65a?s=128&d=identicon&r=PG", "display_name": "AGx-07_162", "link": "https://stackoverflow.com/users/1958570/agx-07-162"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 84, "favorite_count": 0, "answer_count": 4, "score": 1, "last_activity_date": 1459352696, "creation_date": 1459345987, "last_edit_date": 1459352280, "question_id": 36310925, "link": "https://stackoverflow.com/questions/36310925/does-it-matter-which-way-a-string-method-is-used", "title": "Does it matter which way a string method is used?", "body": "<p>Codeacademy teaches that you can chain multiple methods together as such:</p>\n\n<pre><code>user_input.method1.method2.method3\n</code></pre>\n\n<p>However, in a later lesson they display some methods like this:</p>\n\n<pre><code>user_input = gets.chomp\nuser_input.downcase!\n</code></pre>\n\n<p>I combined them:</p>\n\n<pre><code>user_input = gets.chomp.downcase!\n</code></pre>\n\n<p>When I use it this way:</p>\n\n<pre><code>user_input = gets.chomp.downcase!\nif user_input.include? \"s\"\n...\n</code></pre>\n\n<p>I receive an error <code>\"undefined method `include?'\"</code>. If I change it to the following, it works fine:</p>\n\n<pre><code>user_input = gets.chomp\nuser_input.downcase!\nif user_input.include? \"s\"\n...\n</code></pre>\n\n<p>I'm at a loss. I'm concerned whether or not this is a quirk with their console or if this is just how I should be doing it in Ruby. If someone could tell me which way is right, I'd appreciate it. If both are right, that's OK too.</p>\n"}, {"tags": ["ruby", "rspec"], "answers": [{"tags": [], "owner": {"reputation": 4336, "user_id": 574181, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c78d396646e7612dead8bcd7c63a4fe?s=128&d=identicon&r=PG", "display_name": "Satya", "link": "https://stackoverflow.com/users/574181/satya"}, "is_accepted": false, "score": 0, "last_activity_date": 1459347617, "creation_date": 1459347617, "answer_id": 36311660, "question_id": 36310696, "link": "https://stackoverflow.com/questions/36310696/rspec-stubbing-and-checking-arguments-when-an-objects-constructor-instantiates/36311660#36311660", "title": "RSpec stubbing and checking arguments when an object&#39;s constructor instantiates another", "body": "<p>You're maybe better off checking for side effects (why do you want <code>super</code> to be called?) or verify that super was called:</p>\n\n<pre><code>  expect_any_instance_of(B).to have_received(:super).with(1)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 61, "user_id": 2005686, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0c48bc32a5b5f843c00fe59c0535509?s=128&d=identicon&r=PG", "display_name": "silvabox", "link": "https://stackoverflow.com/users/2005686/silvabox"}, "is_accepted": false, "score": 1, "last_activity_date": 1459348500, "creation_date": 1459348500, "answer_id": 36312043, "question_id": 36310696, "link": "https://stackoverflow.com/questions/36310696/rspec-stubbing-and-checking-arguments-when-an-objects-constructor-instantiates/36312043#36312043", "title": "RSpec stubbing and checking arguments when an object&#39;s constructor instantiates another", "body": "<p>When you call <code>super</code> in your <code>initialize</code> method for <code>B</code>, it calls <code>initialize</code> in  <code>A</code>, not <code>new</code>.  You could test that an instance of <code>A</code> receives <code>initialize</code> with one argument:</p>\n\n<pre><code>expect_any_instance_of(A).to receive(:initialize).with(1)\nB.new\n</code></pre>\n\n<p>But RSpec will complain at you for stubbing <code>initialize</code>.</p>\n"}], "owner": {"reputation": 31, "user_id": 683631, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/506b58240d7cf821f20ea2ca6baf4542?s=128&d=identicon&r=PG", "display_name": "willaerk", "link": "https://stackoverflow.com/users/683631/willaerk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1114, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1459348500, "creation_date": 1459345419, "question_id": 36310696, "link": "https://stackoverflow.com/questions/36310696/rspec-stubbing-and-checking-arguments-when-an-objects-constructor-instantiates", "title": "RSpec stubbing and checking arguments when an object&#39;s constructor instantiates another", "body": "<p>Given the code below, how would I go about verifying in an RSpec test\nthat the constructor of class B calls the constructor of class A with\nthe right argument? </p>\n\n<pre><code>class A\n  def initialize(*args)\n  end  \nend\n\nclass B &lt; A\n  def initialize\n    super(1)\n  end  \nend\n</code></pre>\n\n<p>The test I have works as long as I don't check the arguments (leave out the \".with\")</p>\n\n<pre><code>describe B do \n  describe '#new' do\n    it { \n      allow(A).to receive(:new).with(any_args)                                                                                                                                     \n      B.new\n      expect(A).to have_received(:new).with(1)\n    }    \n  end  \nend\n</code></pre>\n\n<p>Adding the check for the arguments gives me the following error:</p>\n\n<pre><code>B\n  #new\n    should have received new(1) 1 time (FAILED - 1)\n\nFailures:\n\n  1) B#new should have received new(1) 1 time\n     Failure/Error: expect(A).to have_received(:new).with(1)\n\n       #&lt;A (class)&gt; received :new with unexpected arguments\n         expected: (1)\n              got: (no args)\n</code></pre>\n\n<p>This seems to indicate the constructor for class A gets called without\narguments?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "actioncontroller"], "comments": [{"owner": {"reputation": 2381, "user_id": 1679751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c93fc96fc73dd52632faf98644d4e04b?s=128&d=identicon&r=PG", "display_name": "Alireza", "link": "https://stackoverflow.com/users/1679751/alireza"}, "edited": false, "score": 0, "creation_date": 1459347271, "post_id": 36310456, "comment_id": 60246244, "body": "did you notice that the render method under ActionController was used in rails version  &lt;= 2.3 ?. the new render methods are under ActionView"}, {"owner": {"reputation": 3381, "user_id": 701589, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/3135ed8ab2f59a3d651d785a574fe279?s=128&d=identicon&r=PG", "display_name": "Pahlevi Fikri Auliya", "link": "https://stackoverflow.com/users/701589/pahlevi-fikri-auliya"}, "reply_to_user": {"reputation": 2381, "user_id": 1679751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c93fc96fc73dd52632faf98644d4e04b?s=128&d=identicon&r=PG", "display_name": "Alireza", "link": "https://stackoverflow.com/users/1679751/alireza"}, "edited": false, "score": 0, "creation_date": 1459348007, "post_id": 36310456, "comment_id": 60246905, "body": "@Alireza ouch, just noticed that. But why the docs is much more complete on the deprecated ActionController/Base/render&#39;s one? I can&#39;t infer any useful informations from the docs of the new method."}, {"owner": {"reputation": 2381, "user_id": 1679751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c93fc96fc73dd52632faf98644d4e04b?s=128&d=identicon&r=PG", "display_name": "Alireza", "link": "https://stackoverflow.com/users/1679751/alireza"}, "edited": false, "score": 0, "creation_date": 1459348399, "post_id": 36310456, "comment_id": 60247267, "body": "The render method has been split up. so now you have PartialRendere to render partials. link:  <a href=\"http://apidock.com/rails/ActionView/PartialRenderer\" rel=\"nofollow noreferrer\">apidock.com/rails/ActionView/PartialRenderer</a>"}, {"owner": {"reputation": 3381, "user_id": 701589, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/3135ed8ab2f59a3d651d785a574fe279?s=128&d=identicon&r=PG", "display_name": "Pahlevi Fikri Auliya", "link": "https://stackoverflow.com/users/701589/pahlevi-fikri-auliya"}, "reply_to_user": {"reputation": 2381, "user_id": 1679751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c93fc96fc73dd52632faf98644d4e04b?s=128&d=identicon&r=PG", "display_name": "Alireza", "link": "https://stackoverflow.com/users/1679751/alireza"}, "edited": false, "score": 0, "creation_date": 1459407516, "post_id": 36310456, "comment_id": 60275021, "body": "Btw, Rails docs still refers to ActionController::Base.render <a href=\"http://guides.rubyonrails.org/layouts_and_rendering.html#using-render\" rel=\"nofollow noreferrer\">guides.rubyonrails.org/layouts_and_rendering.html#using-rend&zwnj;&#8203;er</a>"}], "answers": [{"tags": [], "owner": {"reputation": 5259, "user_id": 715286, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/BqXXo.jpg?s=128&g=1", "display_name": "Qortex", "link": "https://stackoverflow.com/users/715286/qortex"}, "is_accepted": false, "score": 0, "last_activity_date": 1561314947, "creation_date": 1561314947, "answer_id": 56726797, "question_id": 36310456, "link": "https://stackoverflow.com/questions/36310456/what-is-extra-options-param-in-rails-render-method/56726797#56726797", "title": "What is extra_options param in Rails render method?", "body": "<p>The options are passed down the call chain, hitting the Formatter at the end.</p>\n\n<p>For example, if you use the JSON formatter, you will end up giving the parameters to <code>as_json</code>, and params docs can be found <a href=\"https://api.rubyonrails.org/classes/ActiveModel/Serializers/JSON.html\" rel=\"nofollow noreferrer\">here</a>.</p>\n\n<p>Thus, look for the formatter doc to find the params doc.</p>\n"}], "owner": {"reputation": 3381, "user_id": 701589, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/3135ed8ab2f59a3d651d785a574fe279?s=128&d=identicon&r=PG", "display_name": "Pahlevi Fikri Auliya", "link": "https://stackoverflow.com/users/701589/pahlevi-fikri-auliya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 248, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1561314947, "creation_date": 1459344865, "last_edit_date": 1459345508, "question_id": 36310456, "link": "https://stackoverflow.com/questions/36310456/what-is-extra-options-param-in-rails-render-method", "title": "What is extra_options param in Rails render method?", "body": "<p><code>render(options = nil, extra_options = {}, &amp;block) protected</code> (<a href=\"http://apidock.com/rails/ActionController/Base/render\" rel=\"nofollow\">http://apidock.com/rails/ActionController/Base/render</a>)</p>\n\n<p>What is <code>extra_options</code> params for? How does it differ to <code>options</code> parameter?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 5207, "user_id": 3277393, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/a2967a01798ad7d675a6b39f41232a5b?s=128&d=identicon&r=PG&f=1", "display_name": "user12341234", "link": "https://stackoverflow.com/users/3277393/user12341234"}, "edited": false, "score": 0, "creation_date": 1459344341, "post_id": 36309931, "comment_id": 60243720, "body": "In the definition of <code>Zoo.my_animals</code> you&#39;re referencing <code>@animal</code> (i.e. not pluralized), also in that same method, you&#39;re building up a string (<code>cage</code>), but you never return it (the return value of a call to <code>.each</code> is nil)."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 1, "creation_date": 1459344518, "post_id": 36309931, "comment_id": 60243868, "body": "The return value of <code>each</code> is <code>self</code>, as specified in the documentation of <code>each</code>."}], "answers": [{"comments": [{"owner": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 2, "creation_date": 1459344666, "post_id": 36310334, "comment_id": 60243990, "body": "Rather than a code dump, indicate what needs to be changed, and <i>why</i>."}, {"owner": {"reputation": 2607, "user_id": 4470392, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CvLjT.jpg?s=128&g=1", "display_name": "Maxim Pontyushenko", "link": "https://stackoverflow.com/users/4470392/maxim-pontyushenko"}, "reply_to_user": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 0, "creation_date": 1459345446, "post_id": 36310334, "comment_id": 60244635, "body": "@DaveNewton That is absolutely right. In particular case the main need is to do some research by yourself rather than post such code on SO."}, {"owner": {"reputation": 11, "user_id": 6068493, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d555abc2f6b55de816936278494d792?s=128&d=identicon&r=PG&f=1", "display_name": "AllanBast", "link": "https://stackoverflow.com/users/6068493/allanbast"}, "edited": false, "score": 0, "creation_date": 1459364229, "post_id": 36310334, "comment_id": 60258148, "body": "@MaximPontyushenko hey Maxim thanx plus everyone for the reply, I copied and pasted your code but unfortunately it also didn&#39;t print on screen."}, {"owner": {"reputation": 2607, "user_id": 4470392, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CvLjT.jpg?s=128&g=1", "display_name": "Maxim Pontyushenko", "link": "https://stackoverflow.com/users/4470392/maxim-pontyushenko"}, "reply_to_user": {"reputation": 11, "user_id": 6068493, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d555abc2f6b55de816936278494d792?s=128&d=identicon&r=PG&f=1", "display_name": "AllanBast", "link": "https://stackoverflow.com/users/6068493/allanbast"}, "edited": false, "score": 0, "creation_date": 1459410495, "post_id": 36310334, "comment_id": 60276889, "body": "@AllanBast It means you did not copy-paste correctly or did not run program correctly."}], "tags": [], "owner": {"reputation": 2607, "user_id": 4470392, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CvLjT.jpg?s=128&g=1", "display_name": "Maxim Pontyushenko", "link": "https://stackoverflow.com/users/4470392/maxim-pontyushenko"}, "is_accepted": false, "score": 1, "last_activity_date": 1459344569, "creation_date": 1459344569, "answer_id": 36310334, "question_id": 36309931, "link": "https://stackoverflow.com/questions/36309931/ruby-program-is-not-printing-on-screen/36310334#36310334", "title": "Ruby Program is not printing on screen", "body": "<pre><code>class Animal    \n  attr_accessor :name, :colour   \n  def initialize(name,colour)   \n    @name = name    \n    @colour = colour   \n  end  \n\n  def to_s   \n    \"Name#{@name} Colour #{@colour}\"   \n  end   \nend\n\nclass Cheetah &lt; Animal    \n  attr_reader :speed   \n\n  def initialize(name,colour,speed)   \n    @speed = speed   \n    super(name,colour)   \n  end   \n\n  def to_s   \n     return super + \"Speed#{@speed}kph\"   \n  end   \nend\n\nclass Zoo &lt; Animal   \n  def initialize   \n    @animals = []    \n  end    \n\n  def add_animal(animal)    \n    @animals &lt;&lt; animal    \n  end\n\n  def my_animals    \n    cage = \"\"   \n    @animals.each do |call|   \n      cage += call.to_s   \n    end\n    cage\n  end    \nend \n\nzoo = Zoo.new \n5.times do|count|    \n  zoo.add_animal(Animal.new(\"Cheetah#{count}\",\"yello and black spots\"))   \nend\nputs \"#{zoo.my_animals}\"    \n\nmy_cheetah = Cheetah.new(\"Cheetah\",\"yello and black spots\",180)    \nputs \"#{my_cheetah.to_s}\"\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 6068493, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d555abc2f6b55de816936278494d792?s=128&d=identicon&r=PG&f=1", "display_name": "AllanBast", "link": "https://stackoverflow.com/users/6068493/allanbast"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1459344569, "creation_date": 1459343570, "question_id": 36309931, "link": "https://stackoverflow.com/questions/36309931/ruby-program-is-not-printing-on-screen", "title": "Ruby Program is not printing on screen", "body": "<p>Good day everyone. I am writing a simple ruby code but it doesn't print on the screen I am using ruby 2.2.2 and my IDE is Rubymine 7.Thanks in advance.Here is the code;</p>\n\n  \n\n<pre><code>class Animal    \n  attr_accessor :name, :colour   \n  def initialize(name,colour)   \n    @name = name    \n    @colour = colour   \n  end   \n  def to_s   \n    \"Name#{@name} Colour #{@colour}\"   \n  end   \nend   \nclass Cheetah &lt; Animal    \n  attr_reader :speed   \n  def initialize(name,colour,speed)   \n    @speed = speed   \n    super (name,colour)   \n  end   \n  def to_s   \n     return super + \"Speed#{@speed}kph\"   \n  end   \nend   \nclass Zoo &lt; Animal    \n  def initialize   \n    @animals = []    \n  end    \n  def add_animals(animal)    \n    @animals &lt;&lt; animal    \n  end    \n  def my_animals    \n      cage = \"\"   \n    @animal.each do|call|   \n      cage += call.to_s   \n    end   \n  end    \nend    \n5.times do|count|    \n  Zoo.add_animals(MyAnimal.new(\"Cheetah#{count}\",\"yello and black spots\"))   \nend    \nputs \"#{Zoo.my_animals}\"    \nMy_cheetah = Cheetah.new(\"Cheetah\",\"yello and black spots\",180)    \nputs \"#{My_cheetah.to_s}\"    \n</code></pre>\n"}, {"tags": ["ruby", "parsing", "localization", "vb6", "internationalization"], "answers": [{"comments": [{"owner": {"reputation": 8459, "user_id": 341878, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/7a666449acc7e18a7002bc88798a44d3?s=128&d=identicon&r=PG", "display_name": "pingu", "link": "https://stackoverflow.com/users/341878/pingu"}, "edited": false, "score": 0, "creation_date": 1459444290, "post_id": 36334833, "comment_id": 60301240, "body": "Thanks for the reply @Mark, did you build in any intelligence as to what what strings were selected?"}, {"owner": {"reputation": 29192, "user_id": 15639, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/1f3ce1ae1497058e8efd34a05dbdee22?s=128&d=identicon&r=PG", "display_name": "MarkJ", "link": "https://stackoverflow.com/users/15639/markj"}, "reply_to_user": {"reputation": 8459, "user_id": 341878, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/7a666449acc7e18a7002bc88798a44d3?s=128&d=identicon&r=PG", "display_name": "pingu", "link": "https://stackoverflow.com/users/341878/pingu"}, "edited": false, "score": 0, "creation_date": 1459510951, "post_id": 36334833, "comment_id": 60330452, "body": "Not sure what you mean. We made sure to extract every relevant property from the design-time definitions in the top of the FRM files. There were also strings in the runtime code (e.g. bottom of FRM files and throughout .BAS files). We extracted those manually (tedious) though we did write an add-in for the VB6 IDE to ease this process - we can right-click on a string and have it automatically (1) added to the external translation file and (2) replaced in the code with the code to load the translation."}], "tags": [], "owner": {"reputation": 29192, "user_id": 15639, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/1f3ce1ae1497058e8efd34a05dbdee22?s=128&d=identicon&r=PG", "display_name": "MarkJ", "link": "https://stackoverflow.com/users/15639/markj"}, "is_accepted": true, "score": 1, "last_activity_date": 1459430777, "creation_date": 1459430777, "answer_id": 36334833, "question_id": 36309643, "link": "https://stackoverflow.com/questions/36309643/extracting-strings-for-translation-from-vb6-code/36334833#36334833", "title": "Extracting strings for translation from VB6 code", "body": "<p>I'm not aware of any existing off-the-shelf tool that you could use. We created a tool like this at my work and it worked well. The FRM file format is quite simple (although only <a href=\"https://msdn.microsoft.com/en-us/library/aa241723(v=vs.60).aspx\" rel=\"nofollow\">briefly documented</a>). We wrote a tool that (1) extracted all strings from control definitions and (2) generated the code to reload them at runtime during <code>Form_Load</code>.</p>\n"}], "owner": {"reputation": 8459, "user_id": 341878, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/7a666449acc7e18a7002bc88798a44d3?s=128&d=identicon&r=PG", "display_name": "pingu", "link": "https://stackoverflow.com/users/341878/pingu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "accepted_answer_id": 36334833, "answer_count": 1, "score": 1, "last_activity_date": 1459430777, "creation_date": 1459342815, "last_edit_date": 1459424539, "question_id": 36309643, "link": "https://stackoverflow.com/questions/36309643/extracting-strings-for-translation-from-vb6-code", "title": "Extracting strings for translation from VB6 code", "body": "<p>I have a legacy VB application that still has some life in it, and I am wanting to translate it to another language.</p>\n\n<p>I plan to write a Ruby script, possibly utilising a parser, to extract all strings from the three million lines of source, replace them with constants, and move them to a string resource file that can be used to provide translations.</p>\n\n<p>Is anyone aware of a script/library that could be used to intelligently extract the strings?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "foreign-keys", "relationship"], "comments": [{"owner": {"reputation": 2093, "user_id": 1747295, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a70b9d5ee5e89974383b7cf856e1dea8?s=128&d=identicon&r=PG&f=1", "display_name": "Muhammad Yawar Ali", "link": "https://stackoverflow.com/users/1747295/muhammad-yawar-ali"}, "edited": false, "score": 0, "creation_date": 1459342460, "post_id": 36309436, "comment_id": 60242149, "body": "You can do <code>current_user.ideas.create(idea_params)</code> in <code>IdeasController#create</code> method. If you can post the code for idea form and controller i can propose a detailed answer."}, {"owner": {"reputation": 1391, "user_id": 3845362, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/fb0426c92408f8ec9f0a653a4e654077?s=128&d=identicon&r=PG&f=1", "display_name": "Edward", "link": "https://stackoverflow.com/users/3845362/edward"}, "reply_to_user": {"reputation": 2093, "user_id": 1747295, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a70b9d5ee5e89974383b7cf856e1dea8?s=128&d=identicon&r=PG&f=1", "display_name": "Muhammad Yawar Ali", "link": "https://stackoverflow.com/users/1747295/muhammad-yawar-ali"}, "edited": false, "score": 0, "creation_date": 1459342714, "post_id": 36309436, "comment_id": 60242345, "body": "@Muhammad, you&#39;re always welcome to check it out <a href=\"http://pastebin.com/qJJ6JN31\" rel=\"nofollow noreferrer\">pastebin.com/qJJ6JN31</a>"}], "answers": [{"comments": [{"owner": {"reputation": 1391, "user_id": 3845362, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/fb0426c92408f8ec9f0a653a4e654077?s=128&d=identicon&r=PG&f=1", "display_name": "Edward", "link": "https://stackoverflow.com/users/3845362/edward"}, "edited": false, "score": 0, "creation_date": 1459342588, "post_id": 36309499, "comment_id": 60242251, "body": "I tried adding this <code>&lt;%= f.hidden_field :user_id %&gt;</code> to my form but that didn&#39;t work"}, {"owner": {"reputation": 4045, "user_id": 1378252, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/d4025b3e5be289ffee5dffbd0a1a7fb5?s=128&d=identicon&r=PG", "display_name": "toddmetheny", "link": "https://stackoverflow.com/users/1378252/toddmetheny"}, "reply_to_user": {"reputation": 1391, "user_id": 3845362, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/fb0426c92408f8ec9f0a653a4e654077?s=128&d=identicon&r=PG&f=1", "display_name": "Edward", "link": "https://stackoverflow.com/users/3845362/edward"}, "edited": false, "score": 0, "creation_date": 1459342630, "post_id": 36309499, "comment_id": 60242280, "body": "Most straightforward to just set in controller...but do you have user_id in your permitted params at bottom of ideas controller?"}, {"owner": {"reputation": 1391, "user_id": 3845362, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/fb0426c92408f8ec9f0a653a4e654077?s=128&d=identicon&r=PG&f=1", "display_name": "Edward", "link": "https://stackoverflow.com/users/3845362/edward"}, "edited": false, "score": 0, "creation_date": 1459345501, "post_id": 36309499, "comment_id": 60244677, "body": "My apologies, I thought it worked but I get this error <a href=\"https://i.imgur.com/Uha5dCz.png\" rel=\"nofollow noreferrer\">i.imgur.com/Uha5dCz.png</a>"}, {"owner": {"reputation": 4045, "user_id": 1378252, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/d4025b3e5be289ffee5dffbd0a1a7fb5?s=128&d=identicon&r=PG", "display_name": "toddmetheny", "link": "https://stackoverflow.com/users/1378252/toddmetheny"}, "edited": false, "score": 0, "creation_date": 1459345570, "post_id": 36309499, "comment_id": 60244735, "body": "Do you have a user_id column on your table?"}, {"owner": {"reputation": 1391, "user_id": 3845362, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/fb0426c92408f8ec9f0a653a4e654077?s=128&d=identicon&r=PG&f=1", "display_name": "Edward", "link": "https://stackoverflow.com/users/3845362/edward"}, "edited": false, "score": 0, "creation_date": 1459345870, "post_id": 36309499, "comment_id": 60244992, "body": "Ok I&#39;m so stupid, looks like I never actually ran the migrations command, so I ran it and it works.."}], "tags": [], "owner": {"reputation": 4045, "user_id": 1378252, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/d4025b3e5be289ffee5dffbd0a1a7fb5?s=128&d=identicon&r=PG", "display_name": "toddmetheny", "link": "https://stackoverflow.com/users/1378252/toddmetheny"}, "is_accepted": true, "score": 2, "last_activity_date": 1459342957, "last_edit_date": 1459342957, "creation_date": 1459342461, "answer_id": 36309499, "question_id": 36309436, "link": "https://stackoverflow.com/questions/36309436/how-to-link-add-models-to-each-other/36309499#36309499", "title": "How to link/add models to each other", "body": "<p>Several ways to do this, but I think the most straight forward way would be to save the user_id in the ideas controller create action.</p>\n\n<pre><code># def create inside ideas_controller\n@idea.user_id = current_user.id\n\nif @idea.save\n  # etc\n</code></pre>\n\n<p>Couple other options are a hidden field or before_save callback. Here's an example of passing through a hidden field. In your @idea form:</p>\n\n<pre><code>&lt;%= f.hidden_field :user_id, value: current_user.id %&gt;\n</code></pre>\n\n<p>This will add user_id to the params being saved. Make sure that :user_id is whitelisted in the permitted params at the bottom of your ideas controller.</p>\n\n<p>To permit <code>user_id</code> in <code>idea_params</code>:</p>\n\n<pre><code>def idea_params\n  params.require(:idea).permit(:user_id, :also_add_other_params)\nend\n</code></pre>\n"}], "owner": {"reputation": 1391, "user_id": 3845362, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/fb0426c92408f8ec9f0a653a4e654077?s=128&d=identicon&r=PG&f=1", "display_name": "Edward", "link": "https://stackoverflow.com/users/3845362/edward"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 33, "favorite_count": 0, "accepted_answer_id": 36309499, "answer_count": 1, "score": 0, "last_activity_date": 1459342957, "creation_date": 1459342296, "question_id": 36309436, "link": "https://stackoverflow.com/questions/36309436/how-to-link-add-models-to-each-other", "title": "How to link/add models to each other", "body": "<p>I'm trying to add <code>idea(s)</code> to a <code>user</code>. So far I added <code>has_many</code> to my user and <code>belongs_to</code> to my idea. And I added a foreign key to User using: </p>\n\n<p><code>rails g migration Add_User_id_To_Ideas user_id:integer</code></p>\n\n<p>Now, how do I assign the idea to the specific user, when a user creates a new idea?\nI tried to work parallel to <a href=\"http://guides.railsgirls.com/commenting\" rel=\"nofollow\">this example</a>, but I'm a bit stuck.</p>\n\n<p><strong>user.rb</strong></p>\n\n<pre><code>class User &lt; ActiveRecord::Base\n  # Include default devise modules. Others available are:\n  # :confirmable, :lockable, :timeoutable and :omniauthable\n  devise :database_authenticatable, :registerable,\n         :recoverable, :rememberable, :trackable, :validatable\n  has_many :ideas\nend\n</code></pre>\n\n<p><strong>idea.rb</strong></p>\n\n<pre><code>class Idea &lt; ActiveRecord::Base\n  belongs_to :user\n  has_many :comments\n\n  mount_uploader :picture, PictureUploader\n  # {attr_accessor :Status}\n  enum status: [ :Draft, :Published]\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "sqlite", "activerecord", "railstutorial.org"], "comments": [{"owner": {"reputation": 2634, "user_id": 1210949, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/vAL35.jpg?s=128&g=1", "display_name": "Albin", "link": "https://stackoverflow.com/users/1210949/albin"}, "edited": false, "score": 0, "creation_date": 1459341595, "post_id": 36309082, "comment_id": 60241505, "body": "Are you sure your destroy works?"}, {"owner": {"reputation": 4045, "user_id": 1378252, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/d4025b3e5be289ffee5dffbd0a1a7fb5?s=128&d=identicon&r=PG", "display_name": "toddmetheny", "link": "https://stackoverflow.com/users/1378252/toddmetheny"}, "edited": false, "score": 0, "creation_date": 1459341733, "post_id": 36309082, "comment_id": 60241618, "body": "ids are unique...so once assigned there won&#39;t be a new user at that id unless you drop the database and start over completely."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1459342095, "post_id": 36309082, "comment_id": 60241887, "body": "<b>\u201cWhen I then create yet another account, it should get user id 101...\u201d</b> \u2014this is just wrong. Why would you think it <i>should</i>? It should not. For the sake of efficiency in some db engines ids might be even non-integers, besides that they might be non-ordered and non-sequenced. You should not care about how <code>id</code> field is constructed: it\u2019s a db engine duty to take care about it."}, {"owner": {"reputation": 15, "user_id": 1680377, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/4a7a0a80b56790e50c20d786cf2db934?s=128&d=identicon&r=PG", "display_name": "L03TJ3", "link": "https://stackoverflow.com/users/1680377/l03tj3"}, "edited": false, "score": 0, "creation_date": 1459364298, "post_id": 36309082, "comment_id": 60258199, "body": "Ok than my thinking was wrong. So it&#39;s just how it works? The user id&#39;s once assigned cannot or should not be used a second time?"}, {"owner": {"reputation": 15, "user_id": 1680377, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/4a7a0a80b56790e50c20d786cf2db934?s=128&d=identicon&r=PG", "display_name": "L03TJ3", "link": "https://stackoverflow.com/users/1680377/l03tj3"}, "edited": false, "score": 0, "creation_date": 1459364387, "post_id": 36309082, "comment_id": 60258259, "body": "By the way. Fluffykittens? Why the edit for rails? It shows which book I uses?"}], "answers": [{"comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1459342218, "post_id": 36309369, "comment_id": 60241987, "body": "\u201cAuto increment fields are not used again even if the record is deleted\u201d \u2014this is wrong. One might set the <i>current</i> autoincrement value in all known [to me] db engines, including, but not limited to <code>mysql</code> and <code>postgresql</code>."}], "tags": [], "owner": {"reputation": 760, "user_id": 1893784, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b6b06692d59846baa2471771d3211f5?s=128&d=identicon&r=PG", "display_name": "Shishir", "link": "https://stackoverflow.com/users/1893784/shishir"}, "is_accepted": false, "score": 0, "last_activity_date": 1459342144, "creation_date": 1459342144, "answer_id": 36309369, "question_id": 36309082, "link": "https://stackoverflow.com/questions/36309082/tutorial-ids-rememberd-when-removing-users-from-database/36309369#36309369", "title": "Tutorial || ID&#39;s rememberd when removing user&#39;s from database", "body": "<p>The table id column is auto increment. For mysql see <a href=\"http://dev.mysql.com/doc/refman/5.7/en/example-auto-increment.html\" rel=\"nofollow\">doc</a>. Auto increment fields are not used again even if the record is deleted, unless you drop the database or call Alter table on it. </p>\n\n<p>There is good reason why it is done, so that no orphan relations get assigned by mistake which might cause data inconsistencies.</p>\n"}], "owner": {"reputation": 15, "user_id": 1680377, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/4a7a0a80b56790e50c20d786cf2db934?s=128&d=identicon&r=PG", "display_name": "L03TJ3", "link": "https://stackoverflow.com/users/1680377/l03tj3"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 66, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1459351086, "creation_date": 1459341401, "last_edit_date": 1459351086, "question_id": 36309082, "link": "https://stackoverflow.com/questions/36309082/tutorial-ids-rememberd-when-removing-users-from-database", "title": "Tutorial || ID&#39;s rememberd when removing user&#39;s from database", "body": "<p>I am following the Rails Tutorial by Michael Hartl</p>\n\n<blockquote>\n  <p>Explanation: Currently a hundred user's in the database. I create 50 accounts more, they get user id's 101 - 150. Then the admin destroys them. When I then create yet another account, it should get user id 101 because users 101 -150 are no longer there. But it gets 151, so my user id's jump from 100 to 151 with nothing inbetween.</p>\n</blockquote>\n\n<p> What causes this? There is something wrong then with destroying the accounts? below the files and console output:</p>\n\n<p>The view:</p>\n\n<pre><code>(app/views/_user.html.erb)\n&lt;li&gt;\n &lt;%= gravatar_for user, size: 50 %&gt;\n &lt;%= link_to user.name, user %&gt;\n &lt;% if current_user.admin? &amp;&amp; !current_user?(user) %&gt;\n   |  &lt;%= link_to \"delete\", user, method: :delete,\n                            data: { confirm: \"You sure?\" } %&gt;\n&lt;% end %&gt;\n&lt;/li&gt; \n</code></pre>\n\n<p>The controller:</p>\n\n<pre><code>def destroy\n  User.find(params[:id]).destroy\n  flash[:success] = \"User deleted\"\n  redirect_to users_url\nend\n</code></pre>\n\n<p>The console output when deleting user:</p>\n\n<pre><code>Started DELETE \"/users/102\" for $IP at 2016-03-30 12:11:52 +0000\nProcessing by UsersController#destroy as HTML\nParameters: {\"authenticity_token\"=&gt;\"Kj+2TnvVk8jVrZi1leVeQRAjJbZsKqXAhA1cjK/WNDa4TieY54NdD6OCATNANFR0lh1trhi+ZzvMLhnirZnw+g==\", \"id\"=&gt;\"102\"}\nUser Load (0.3ms)  SELECT  \"users\".* FROM \"users\" WHERE \"users\".\"id\" = ? LIMIT 1  [[\"id\", 1]]\nUser Load (0.2ms)  SELECT  \"users\".* FROM \"users\" WHERE \"users\".\"id\" = ? LIMIT 1  [[\"id\", 102]]\n(0.1ms)  begin transaction\nSQL (0.3ms)  DELETE FROM \"users\" WHERE \"users\".\"id\" = ?  [[\"id\", 102]]\n(10.7ms)  commit transaction\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "activeadmin"], "comments": [{"owner": {"reputation": 2093, "user_id": 1747295, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a70b9d5ee5e89974383b7cf856e1dea8?s=128&d=identicon&r=PG&f=1", "display_name": "Muhammad Yawar Ali", "link": "https://stackoverflow.com/users/1747295/muhammad-yawar-ali"}, "edited": false, "score": 0, "creation_date": 1459340594, "post_id": 36308297, "comment_id": 60240706, "body": "i think adding <code>get &quot;&#47;admin&#47;products&#47;change_categories&quot; =&gt; &quot;products#change_categories&quot;</code> will do your job"}], "answers": [{"comments": [{"owner": {"reputation": 35, "user_id": 5876819, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/efb9e91868c844ae29ed5de096462af4?s=128&d=identicon&r=PG&f=1", "display_name": "maris ancans", "link": "https://stackoverflow.com/users/5876819/maris-ancans"}, "edited": false, "score": 0, "creation_date": 1459341096, "post_id": 36308736, "comment_id": 60241115, "body": "This is what it spit out now:   Started GET &quot;/admin/products/change_categories&quot; for ::1 at 2016-03-30 15:28:56 +0300 Processing by Admin::ProductsController#show as <i>/</i>   Parameters: {&quot;id&quot;=&gt;&quot;change_categories&quot;}   Product Load (0.7ms)  SELECT  &quot;products&quot;.* FROM &quot;products&quot; WHERE &quot;products&quot;.&quot;id&quot; = ? LIMIT 1  [[&quot;id&quot;, 0]] Completed 404 Not Found in 12ms (ActiveRecord: 1.1ms)  ActiveRecord::RecordNotFound (Couldn&#39;t find Product with &#39;id&#39;=change_categories):"}, {"owner": {"reputation": 760, "user_id": 1893784, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b6b06692d59846baa2471771d3211f5?s=128&d=identicon&r=PG", "display_name": "Shishir", "link": "https://stackoverflow.com/users/1893784/shishir"}, "reply_to_user": {"reputation": 35, "user_id": 5876819, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/efb9e91868c844ae29ed5de096462af4?s=128&d=identicon&r=PG&f=1", "display_name": "maris ancans", "link": "https://stackoverflow.com/users/5876819/maris-ancans"}, "edited": false, "score": 0, "creation_date": 1459341446, "post_id": 36308736, "comment_id": 60241390, "body": "remove post &#39;change_categories&#39; from routes.rb. member_action will add active_admin routes. add ActiveAdmin.routes(self) near the bottom of routes.rb if its not there."}, {"owner": {"reputation": 2093, "user_id": 1747295, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a70b9d5ee5e89974383b7cf856e1dea8?s=128&d=identicon&r=PG&f=1", "display_name": "Muhammad Yawar Ali", "link": "https://stackoverflow.com/users/1747295/muhammad-yawar-ali"}, "edited": false, "score": 0, "creation_date": 1459341579, "post_id": 36308736, "comment_id": 60241493, "body": "paste your <code>routes.rb</code> file to justpaste and share the link."}, {"owner": {"reputation": 760, "user_id": 1893784, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b6b06692d59846baa2471771d3211f5?s=128&d=identicon&r=PG", "display_name": "Shishir", "link": "https://stackoverflow.com/users/1893784/shishir"}, "edited": false, "score": 0, "creation_date": 1459345886, "post_id": 36308736, "comment_id": 60245003, "body": "remove line no 18."}, {"owner": {"reputation": 35, "user_id": 5876819, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/efb9e91868c844ae29ed5de096462af4?s=128&d=identicon&r=PG&f=1", "display_name": "maris ancans", "link": "https://stackoverflow.com/users/5876819/maris-ancans"}, "edited": false, "score": 0, "creation_date": 1459346290, "post_id": 36308736, "comment_id": 60245366, "body": "Well, removing post &#39;change_categories&#39; from routes.rb did what it had to do as you said, but the error, the one in comments is still there"}, {"owner": {"reputation": 760, "user_id": 1893784, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b6b06692d59846baa2471771d3211f5?s=128&d=identicon&r=PG", "display_name": "Shishir", "link": "https://stackoverflow.com/users/1893784/shishir"}, "edited": false, "score": 0, "creation_date": 1459346801, "post_id": 36308736, "comment_id": 60245820, "body": "Is it exactly the same?"}, {"owner": {"reputation": 35, "user_id": 5876819, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/efb9e91868c844ae29ed5de096462af4?s=128&d=identicon&r=PG&f=1", "display_name": "maris ancans", "link": "https://stackoverflow.com/users/5876819/maris-ancans"}, "edited": false, "score": 0, "creation_date": 1459347887, "post_id": 36308736, "comment_id": 60246803, "body": "Yea, the problem seems to be that on change it sends Parameters: {&quot;id&quot;=&gt;&quot;change_categories&quot;}, but it should send corresponding department id instead and it searched in Product database instead of Categories. Heres the code <a href=\"http://pastebin.com/qwyHQBA2\" rel=\"nofollow noreferrer\">pastebin.com/qwyHQBA2</a>"}, {"owner": {"reputation": 35, "user_id": 5876819, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/efb9e91868c844ae29ed5de096462af4?s=128&d=identicon&r=PG&f=1", "display_name": "maris ancans", "link": "https://stackoverflow.com/users/5876819/maris-ancans"}, "edited": false, "score": 0, "creation_date": 1459348221, "post_id": 36308736, "comment_id": 60247122, "body": "Ok, so I checked source code on chrome and it turns out select box id was named differently :get, :change_categories, {:department_id=&gt;&quot;$(&#39;#product_department_id&#39;).val()&quot;} instead of #department_id, so thats good, but its still the same error except that one right param"}, {"owner": {"reputation": 760, "user_id": 1893784, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b6b06692d59846baa2471771d3211f5?s=128&d=identicon&r=PG", "display_name": "Shishir", "link": "https://stackoverflow.com/users/1893784/shishir"}, "edited": false, "score": 0, "creation_date": 1459384648, "post_id": 36308736, "comment_id": 60267554, "body": "Ok now the problem seems to be with the routes. There is a route admin/products/:id is matching the request. Can you link the output of bundle exec rake routes | grep products? Also i see member_action as well as change_categories in controller? Any reason for that?"}, {"owner": {"reputation": 35, "user_id": 5876819, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/efb9e91868c844ae29ed5de096462af4?s=128&d=identicon&r=PG&f=1", "display_name": "maris ancans", "link": "https://stackoverflow.com/users/5876819/maris-ancans"}, "edited": false, "score": 0, "creation_date": 1459414100, "post_id": 36308736, "comment_id": 60279146, "body": "<a href=\"http://pastebin.com/iGwtsB3r\" rel=\"nofollow noreferrer\">pastebin.com/iGwtsB3r</a> Yes, there seems to be a problem with route /admin/products/:id/change_categories(.:format) because console output is: /admin/products/change_categories?department_id=1 but it should be with a slash &quot;/&quot; after change_categories, right?"}, {"owner": {"reputation": 35, "user_id": 5876819, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/efb9e91868c844ae29ed5de096462af4?s=128&d=identicon&r=PG&f=1", "display_name": "maris ancans", "link": "https://stackoverflow.com/users/5876819/maris-ancans"}, "edited": false, "score": 0, "creation_date": 1459414463, "post_id": 36308736, "comment_id": 60279436, "body": "Ok, it seems that member_action creates wrong route  /admin/products/:id/update_categories as red in their documentation, so I tried collection_action instead and it now generates admin/products/update_categories where it now should pass params(department_id) console also gets better output <a href=\"http://pastebin.com/tKfDctLG\" rel=\"nofollow noreferrer\">pastebin.com/tKfDctLG</a>"}], "tags": [], "owner": {"reputation": 760, "user_id": 1893784, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b6b06692d59846baa2471771d3211f5?s=128&d=identicon&r=PG", "display_name": "Shishir", "link": "https://stackoverflow.com/users/1893784/shishir"}, "is_accepted": false, "score": 0, "last_activity_date": 1459340498, "creation_date": 1459340498, "answer_id": 36308736, "question_id": 36308297, "link": "https://stackoverflow.com/questions/36308297/active-admin-nested-select/36308736#36308736", "title": "Active Admin nested select", "body": "<p>Problem is your member_action method is \"get\" and you are posting to the controller. Change from \"POST\" to do a Get request should solve the problem.</p>\n"}, {"comments": [{"owner": {"reputation": 35, "user_id": 5876819, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/efb9e91868c844ae29ed5de096462af4?s=128&d=identicon&r=PG&f=1", "display_name": "maris ancans", "link": "https://stackoverflow.com/users/5876819/maris-ancans"}, "edited": false, "score": 0, "creation_date": 1459417213, "post_id": 36329616, "comment_id": 60281515, "body": "PS: Active admin needs server restart after adding or editing(i think) helper methods."}], "tags": [], "owner": {"reputation": 35, "user_id": 5876819, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/efb9e91868c844ae29ed5de096462af4?s=128&d=identicon&r=PG&f=1", "display_name": "maris ancans", "link": "https://stackoverflow.com/users/5876819/maris-ancans"}, "is_accepted": true, "score": 0, "last_activity_date": 1459417064, "creation_date": 1459417064, "answer_id": 36329616, "question_id": 36308297, "link": "https://stackoverflow.com/questions/36308297/active-admin-nested-select/36329616#36329616", "title": "Active Admin nested select", "body": "<p>So after countless hours I have managed to get this to work. I think problem was in old versions or difference between models from where I took the code. So in Active Admin instead of member_action I used collection_action that makes more sense in routing, because \nmember_action creates route /admin/products/:id/change_categories(.:format)\nthat interferes with show action and uses it instead of change_categories action. </p>\n\n<p>So heres collection_action:</p>\n\n<pre><code>collection_action :change_categories, :method =&gt; :get do\n@categories = Category.where(\"department_id = ?\", Department.find(params[:product_department_id]))\nrender :text =&gt; view_context.options_from_collection_for_select(@categories, :id, :name)\nend\n</code></pre>\n\n<p>This generates correct route admin/products/change_categories where I can now pass params[:product_departmemnt_id] which is selected id from select box.</p>\n\n<p>This is where it gets Id from:</p>\n\n<pre><code>f.input :description\n    f.input :department, prompt: \"Select department\", :input_html =&gt; {\n    onchange: remote_get(\"change_categories\", 'product_department_id', :product_category_id)\n}\n    f.input :category\n</code></pre>\n\n<p>Tip for some ajax beginners, make sure to check source code of webpage to see if you are using the right id or class or whatever, this has caused headaches for me.</p>\n\n<p>Next thing you want to add is helper method, there are two ways to do this, either in application_helper.rb or in app/helpers. If you add it to appication_helper.rb you have to include it to config/initializers/active_admin.rb initializer:</p>\n\n<pre><code>ActiveAdmin.setup do |config|\n  ....\n  some config\n  ....\nend\n\nmodule ActiveAdmin::ViewHelpers\n  include ApplicationHelper\nend\n</code></pre>\n\n<p>But this then has access to all of its helper methods which I don't think is needed or might/might not slow down it, so I created new folder in app/helpers called \"active_admin\" and created a file \"form_helper.rb\" where is this code from <a href=\"https://gist.github.com/Dglgmut/6328501\" rel=\"nofollow\">Dglgmut/6328501 git</a></p>\n\n<pre><code>def remote_get(path, member,target_tag_id)\n \"$.get('#{path}/?#{member}=' + $('##{member}').val(),\n  function(data) {$('##{target_tag_id}').html(data);}\n );\"\nend\n</code></pre>\n\n<p>Don't know much about js, but I assume this makes get request to admin/products/change_categories/?product_department_id=1 and the rest happens in helper method. If anyone stumbles upon this, I hope this helps you and has information you need. I also suggest you so called \"rubber duck\" debugging, no jokes, this helps sometimes. </p>\n"}], "owner": {"reputation": 35, "user_id": 5876819, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/efb9e91868c844ae29ed5de096462af4?s=128&d=identicon&r=PG&f=1", "display_name": "maris ancans", "link": "https://stackoverflow.com/users/5876819/maris-ancans"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1104, "favorite_count": 0, "accepted_answer_id": 36329616, "answer_count": 2, "score": 0, "last_activity_date": 1459417064, "creation_date": 1459339356, "last_edit_date": 1495540788, "question_id": 36308297, "link": "https://stackoverflow.com/questions/36308297/active-admin-nested-select", "title": "Active Admin nested select", "body": "<p>I have Active Admin gem for my ruby on rails project. What I would like to do is create a product and have 2 select boxes (1-Category, 2-Department) in that form where the second one changes it's content based on the first one. After countless hours of searching I still can't get this to work.</p>\n\n<pre><code>class Product &lt; ActiveRecord::Base\nbelongs_to :category, dependent: :destroy, counter_cache: true\nhas_one :department, through: :category\nend\n\nclass Category &lt; ActiveRecord::Base\nbelongs_to :department, counter_cache: true\nhas_many :products\nend\n\nclass Department &lt; ActiveRecord::Base\nend\n</code></pre>\n\n<p>The reason I would like to do this is because some departments might have the same category name that would be confusing and would add the product to the wrong department.</p>\n\n<p>I have tried <a href=\"https://stackoverflow.com/questions/9579402/active-admin-refresh-second-drop-down-based-on-first-drop-down-ruby-on-rails\">question 9579402</a> but how I understand his question is that he had only 2 models and he was creating sub-category from selected category</p>\n\n<p>Heres a familiar thing, but he uses a get ajax request <a href=\"https://gist.github.com/Dglgmut/6328501\" rel=\"nofollow noreferrer\">Git/Dglgmut/6328501</a></p>\n\n<p>Trying <a href=\"https://stackoverflow.com/questions/9579402/active-admin-refresh-second-drop-down-based-on-first-drop-down-ruby-on-rails\">question 9579402</a> get me error:</p>\n\n<pre><code>Started POST \"/admin/products/change_categories\" for ::1 at 2016-03-30 14:51:09 +0300\nActionController::RoutingError (No route matches [POST]    \"/admin/products/change_categories\"):\n</code></pre>\n\n<p>This is what I have in routes.rb</p>\n\n<pre><code>routes.rb = post 'change_categories'        =&gt;'products#change_categories'  \nhttp://localhost:3000/rails/info/routes = change_categories_path    POST    /change_categories(.:format)    products#change_categories \n</code></pre>\n\n<p>I guess this is because I can use Member Actions for Active admin, so I tried it</p>\n\n<pre><code>member_action :change_categories, :method =&gt; :get do\n  @categories = Department.find_by_id(params[:department_id]).try(:categories)\n  render :text=&gt;view_context.options_from_collection_for_select(@categories, :id, :category_number)\nend\n</code></pre>\n\n<p>But got the same error as before. Any help would be appreciated, thanks.</p>\n\n<p>UPDATE:\nIm a beginner at this, but if im correct, change_categories should be in categories controller, because it's searching for that method in product controller, </p>\n\n<pre><code>POST \"/admin/products/change_categories\"\n</code></pre>\n\n<p>So I added categories resource to Active Admin and added that method to categories controller, but is there now a way to use that controller? Something like:</p>\n\n<pre><code>f.input :department, :input_html =&gt; { :onchange =&gt; remote_request(controller =&gt; \"categories\", :post, :change_categories, {:department_id=&gt;\"$('#department_id').val()\"}, :category_id) }\n</code></pre>\n"}, {"tags": ["ruby", "ibm-cloud-infrastructure"], "answers": [{"comments": [{"owner": {"reputation": 485, "user_id": 2004189, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/L0TSq.jpg?s=128&g=1", "display_name": "Ankit Gupta", "link": "https://stackoverflow.com/users/2004189/ankit-gupta"}, "edited": false, "score": 0, "creation_date": 1459443397, "post_id": 36312440, "comment_id": 60300697, "body": "I will surely try this out going forward. Currently due to shortage of time and my single requirement I am going forward with the default api. It surely will help us in our requirement"}, {"owner": {"reputation": 83, "user_id": 5302769, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2df88e06bc946068934732ea24e3113e?s=128&d=identicon&r=PG", "display_name": "Celso Fernandes", "link": "https://stackoverflow.com/users/5302769/celso-fernandes"}, "reply_to_user": {"reputation": 485, "user_id": 2004189, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/L0TSq.jpg?s=128&g=1", "display_name": "Ankit Gupta", "link": "https://stackoverflow.com/users/2004189/ankit-gupta"}, "edited": false, "score": 0, "creation_date": 1459456927, "post_id": 36312440, "comment_id": 60308491, "body": "don&#39;t worry, btw, it&#39;s not an all in solution, you can use this gem if you need to make specific call :) If you&#39;d like some help about this gem, just open an issue on github.. :+1:"}], "tags": [], "owner": {"reputation": 83, "user_id": 5302769, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2df88e06bc946068934732ea24e3113e?s=128&d=identicon&r=PG", "display_name": "Celso Fernandes", "link": "https://stackoverflow.com/users/5302769/celso-fernandes"}, "is_accepted": false, "score": 0, "last_activity_date": 1459349497, "creation_date": 1459349497, "answer_id": 36312440, "question_id": 36308040, "link": "https://stackoverflow.com/questions/36308040/bandwidth-summary-per-server/36312440#36312440", "title": "Bandwidth summary per server", "body": "<p>Disclamer: I created my own Ruby SoftLayer client, you can check it at <a href=\"http://github.com/zertico/softlayer\" rel=\"nofollow\">http://github.com/zertico/softlayer</a> specially for situations like this one where you want to access some specific data (and I'm not SoftLayer staff ;) )</p>\n\n<p>If you'd like to give it a try the code that solves your problem is</p>\n\n<p>ps: I'm considering you are manipulating a SoftLayer_Hardware_Server, right?</p>\n\n<pre><code>hardware = Softlayer::Hardware::Server.find(123)\nhardware.get_current_bandwidth_summary\n\nmask = 'mask[currentBandwidthSummary]'\nhardware = Softlayer::Hardware::Server.mask(mask).find(123)\nhardware.current_bandwidth_summary\n</code></pre>\n\n<p>You will access a ruby object like this one:</p>\n\n<pre><code>=&gt; #&lt;Softlayer::Metric::Tracking::Object::Bandwidth::Summary:0x007ff74b683540\n @allocation_amount=\"1234\",\n @allocation_id=111111,\n @amount_out=\"12.34567\",\n @average_daily_usage=\"1.23\",\n @currently_over_allocation_flag=0,\n @id=1111111,\n @outbound_bandwidth_amount=\"123.45678\",\n @projected_bandwidth_usage=\"123.45\",\n @projected_over_allocation_flag=0&gt;\n</code></pre>\n\n<p>Hope it can helps you, comment if you have any doubt about the client usage</p>\n"}, {"comments": [{"owner": {"reputation": 485, "user_id": 2004189, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/L0TSq.jpg?s=128&g=1", "display_name": "Ankit Gupta", "link": "https://stackoverflow.com/users/2004189/ankit-gupta"}, "edited": false, "score": 0, "creation_date": 1459442777, "post_id": 36313286, "comment_id": 60300321, "body": "We mainly use BareMetalServer. Thanks for the Help. Looking at the code i was able to makeout the changed to be done for BareMetalServer.  ` \tserver = SoftLayer::BareMetalServer.server_with_id(server_id, :client =&gt; softlayer_client) \tget_bandwidth_data_by_date = server.service.getBandwidthForDateRange(start_date,end_date,&zwnj;&#8203;&#39;public&#39;) `"}, {"owner": {"reputation": 485, "user_id": 2004189, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/L0TSq.jpg?s=128&g=1", "display_name": "Ankit Gupta", "link": "https://stackoverflow.com/users/2004189/ankit-gupta"}, "edited": false, "score": 0, "creation_date": 1459490815, "post_id": 36313286, "comment_id": 60319141, "body": "How can I get the data transfer speed from SL API. I see that I can get speed from the datatype SoftLayer_Network_Component,   <a href=\"http://sldn.softlayer.com/reference/datatypes/SoftLayer_Network_Component\" rel=\"nofollow noreferrer\">sldn.softlayer.com/reference/datatypes/&hellip;</a>    but I am unable to make a connection between datatype SoftLayer_Network_Component and service SoftLayer_Hardware_Server    <a href=\"https://sldn.softlayer.com/reference/services/SoftLayer_Hardware_Server\" rel=\"nofollow noreferrer\">sldn.softlayer.com/reference/services/SoftLayer_Hardware_Ser&zwnj;&#8203;ver</a>"}, {"owner": {"reputation": 1536, "user_id": 5094381, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67e8c1f673b4f8767f765f9253b566da?s=128&d=identicon&r=PG&f=1", "display_name": "mcruz", "link": "https://stackoverflow.com/users/5094381/mcruz"}, "reply_to_user": {"reputation": 485, "user_id": 2004189, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/L0TSq.jpg?s=128&g=1", "display_name": "Ankit Gupta", "link": "https://stackoverflow.com/users/2004189/ankit-gupta"}, "edited": false, "score": 0, "creation_date": 1459520038, "post_id": 36313286, "comment_id": 60336777, "body": "Please see: <a href=\"http://sldn.softlayer.com/reference/services/SoftLayer_Hardware/getNetworkComponents\" rel=\"nofollow noreferrer\">SoftLayer_Hardware::getNetworkComponents</a> or <a href=\"https://sldn.softlayer.com/reference/services/SoftLayer_Hardware_Server/getNetworkComponents\" rel=\"nofollow noreferrer\">SoftLayer_Hardware_Server::getNetworkComponents</a>, they may help you. Or <a href=\"http://sldn.softlayer.com/reference/services/SoftLayer_Hardware/getObject\" rel=\"nofollow noreferrer\">SoftLayer_Hardware::getObject</a> would help you using some masks(Rest example): <code>https:&#47;&#47;[username]:[apikey]@api.softlayer.com&#47;rest&#47;v3&#47;SoftLa&zwnj;&#8203;yer_Hardware&#47;[hardwa&zwnj;&#8203;re_ID]&#47;getObject?obj&zwnj;&#8203;ectMask=mask[network&zwnj;&#8203;Components]</code>"}, {"owner": {"reputation": 485, "user_id": 2004189, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/L0TSq.jpg?s=128&g=1", "display_name": "Ankit Gupta", "link": "https://stackoverflow.com/users/2004189/ankit-gupta"}, "edited": false, "score": 0, "creation_date": 1459758208, "post_id": 36313286, "comment_id": 60411993, "body": "Thanks for the help. The requirement that I am looking for is not available in the Softlayer API&#39;s. I have raised a ticket to Softlayer and it was escalated to the development team."}], "tags": [], "owner": {"reputation": 1536, "user_id": 5094381, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67e8c1f673b4f8767f765f9253b566da?s=128&d=identicon&r=PG&f=1", "display_name": "mcruz", "link": "https://stackoverflow.com/users/5094381/mcruz"}, "is_accepted": true, "score": 2, "last_activity_date": 1459351680, "creation_date": 1459351680, "answer_id": 36313286, "question_id": 36308040, "link": "https://stackoverflow.com/questions/36308040/bandwidth-summary-per-server/36313286#36313286", "title": "Bandwidth summary per server", "body": "<p>Please, try the following <code>Ruby</code> examples:</p>\n\n<pre><code>require 'rubygems'\nrequire 'softlayer_api'\n\n\nserver_id = 11498369\n# Your SoftLayer API username.\nSL_API_USERNAME = 'set me'\n\n# Your SoftLayer API key.\nSL_API_KEY = 'set me'\n\nsoftlayer_client = SoftLayer::Client.new(:username =&gt; SL_API_USERNAME,\n                                         :api_key =&gt; SL_API_KEY)\n\nvsi_service = softlayer_client.service_named('SoftLayer_Virtual_Guest')\nmetric_tracking_object_id = vsi_service.object_with_id(server_id).getMetricTrackingObjectId\n\nmetric_service = softlayer_client.service_named('SoftLayer_Metric_Tracking_Object')\nservice_ref = metric_service.object_with_id(metric_tracking_object_id)\n\nbegin\n  object_template = [{\n      'keyName' =&gt; 'PUBLICOUT',\n      'summaryType' =&gt; 'sum'\n  }]\n\n  result = service_ref.getSummaryData('2016-03-29T00:00:00','2016-03-30T00:00:00',object_template,600)\n  puts result.inspect\n\nrescue =&gt; e\n  puts 'Error when executing the script...'\n\n  $stdout.print(e.inspect)\nend\n</code></pre>\n\n<p><strong>References:</strong></p>\n\n<p><a href=\"http://sldn.softlayer.com/reference/services/SoftLayer_Metric_Tracking_Object/getSummaryData\" rel=\"nofollow\">SoftLayer_Metric_Tracking_Object::getSummaryData</a></p>\n\n<p><a href=\"http://sldn.softlayer.com/reference/services/SoftLayer_Virtual_Guest/getMetricTrackingObjectId\" rel=\"nofollow\">SoftLayer_Virtual_Guest::getMetricTrackingObjectId</a></p>\n\n<p>Second example using <code>SoftLayer_Virtual_Gues::getBandwidthDataByDate</code>: </p>\n\n<pre><code>require 'rubygems'\nrequire 'softlayer_api'\nrequire 'pp'\nrequire 'date'\n\n# Set the server id that you wish to get Bandwidth information.\nserver_id = 11498369\n\nsoftlayer_client = SoftLayer::Client.new(:username =&gt; 'set me',\n                                         :api_key =&gt; 'set me')\n\nserver = SoftLayer::VirtualServer.server_with_id(server_id, :client =&gt; softlayer_client)\n\n\nget_bandwidth_data_by_date = server.service.getBandwidthDataByDate('2016-03-29T00:00:00','2016-03-30T00:00:00','public')\npp('getBandwidthDataByDate: ', get_bandwidth_data_by_date)\n</code></pre>\n\n<p><strong>References:</strong></p>\n\n<p><a href=\"http://sldn.softlayer.com/reference/services/SoftLayer_Virtual_Guest/getBandwidthDataByDate\" rel=\"nofollow\">SoftLayer_Virtual_Guest::getBandwidthDataByDate</a></p>\n"}], "owner": {"reputation": 485, "user_id": 2004189, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/L0TSq.jpg?s=128&g=1", "display_name": "Ankit Gupta", "link": "https://stackoverflow.com/users/2004189/ankit-gupta"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 213, "favorite_count": 0, "accepted_answer_id": 36313286, "answer_count": 2, "score": 1, "last_activity_date": 1459460305, "creation_date": 1459338765, "last_edit_date": 1495541760, "question_id": 36308040, "link": "https://stackoverflow.com/questions/36308040/bandwidth-summary-per-server", "title": "Bandwidth summary per server", "body": "<p>I am trying to get the bandwidth data for all the softlayer servers under my account.</p>\n\n<p>Thanks to <code>account_servers.rb</code> I am able to get the server id for all the servers. Now I would like to get the Bandwidth used by the servers for a particular time frame. The data that I am interested is  </p>\n\n<blockquote>\n  <p><a href=\"http://sldn.softlayer.com/reference/datatypes/SoftLayer_Metric_Tracking_Object_Bandwidth_Summary\" rel=\"nofollow noreferrer\">http://sldn.softlayer.com/reference/datatypes/SoftLayer_Metric_Tracking_Object_Bandwidth_Summary</a>\n  .</p>\n</blockquote>\n\n<p>I tried to get information using <code>softlayer_client.service_named(\"Metric_Tracking_Object_Bandwidth_Summary\")</code>. Unfortunately I am not able to get the details.</p>\n\n<p>I did find a java code, but I am interested in ruby code. Can someone please guide me to get the server bandwith summary?</p>\n\n<p><a href=\"https://stackoverflow.com/questions/36061200/getting-bandwidth-data-in-sl\">Getting bandWidth data in SL</a></p>\n"}, {"tags": ["ruby", "windows", "selenium-webdriver", "cucumber"], "comments": [{"owner": {"reputation": 31711, "user_id": 634576, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/48891dab622b535f3c2b4ec1c8765bed?s=128&d=identicon&r=PG", "display_name": "Dave Schweisguth", "link": "https://stackoverflow.com/users/634576/dave-schweisguth"}, "edited": false, "score": 0, "creation_date": 1459342790, "post_id": 36307805, "comment_id": 60242415, "body": "You seem to be using the selenium-cucumber gem. Examples for that gem seem to guarantee this problem. Do you really need that gem? Its main value seems to be mobile browser support. If you&#39;re testing desktop web I&#39;d use capybara instead; it includes selenium support."}], "answers": [{"comments": [{"owner": {"reputation": 15, "user_id": 6076731, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d82ef942e04295637f65f66df0e6e71?s=128&d=identicon&r=PG&f=1", "display_name": "Pravin", "link": "https://stackoverflow.com/users/6076731/pravin"}, "edited": false, "score": 0, "creation_date": 1459772781, "post_id": 36322426, "comment_id": 60421461, "body": "I am familiar with rubyinstaller. I used: rubyinstaller-2.0.0-p648, and DevKit-mingw64-32-4.7.2-20130224-1151-sfx   I do same set up on windows 8.1 using 32 bit version. Then also creating same issue. As per [link] (<a href=\"http://seleniumcucumber.info/desktop/\" rel=\"nofollow noreferrer\">seleniumcucumber.info/desktop</a>), I have setup correctly. Before typing cucumber command, everything is okay."}, {"owner": {"reputation": 2514, "user_id": 6004650, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/668db278c31bc9040a9dea1b77b4ddd4?s=128&d=identicon&r=PG&f=1", "display_name": "MikeJRamsey56", "link": "https://stackoverflow.com/users/6004650/mikejramsey56"}, "reply_to_user": {"reputation": 15, "user_id": 6076731, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d82ef942e04295637f65f66df0e6e71?s=128&d=identicon&r=PG&f=1", "display_name": "Pravin", "link": "https://stackoverflow.com/users/6076731/pravin"}, "edited": false, "score": 0, "creation_date": 1459796928, "post_id": 36322426, "comment_id": 60437528, "body": "I got it working on Windows 8.1. Try my steps on Windows 10 and let me know how it went."}], "tags": [], "owner": {"reputation": 2514, "user_id": 6004650, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/668db278c31bc9040a9dea1b77b4ddd4?s=128&d=identicon&r=PG&f=1", "display_name": "MikeJRamsey56", "link": "https://stackoverflow.com/users/6004650/mikejramsey56"}, "is_accepted": true, "score": 1, "last_activity_date": 1460386322, "last_edit_date": 1460386322, "creation_date": 1459386064, "answer_id": 36322426, "question_id": 36307805, "link": "https://stackoverflow.com/questions/36307805/how-do-i-set-up-dependencies-for-ruby-cucumber-on-windows-10/36322426#36322426", "title": "How do I set up dependencies for Ruby Cucumber on Windows 10?", "body": "<p>Are you familiar with <a href=\"http://rubyinstaller.org/about\" rel=\"nofollow\">rubyinstaller</a> for windows site? You are up against a couple of problems. The first is that Windows 10 is <strong>not</strong> explicitly supported. The second is the x64 version is new.  \"The 64-bit versions of Ruby are relatively new on the Windows area and not all the packages have been updated to be compatible with it. To use this version you will require some knowledge about compilers and solving dependency issues, which might be too complicated if you just want to play with the language.\"</p>\n\n<p>So I see two choices for you. First is to try installing the 32-bit version of ruby on Windows 10.  Then see if you have better luck with the cucumber gem.</p>\n\n<p>The second is to create a virtual machine (Virtualbox is free) on your Windows 10 host.  You could install a Linux operating system, e.g. Centos 7, in the guest and run everything from there.</p>\n\n<p>I have worked with Ruby on windows in mingw32 but have always found it less flexible than native on linux.  Whatever you choose, good luck.</p>\n\n<p><strong>Update</strong></p>\n\n<p>I got it to work on Windows 8.1. Try following these steps on Windows 10 and let me know how it went.</p>\n\n<p>Downloaded 32-bit <a href=\"http://dl.bintray.com/oneclick/rubyinstaller/rubyinstaller-2.2.4.exe\" rel=\"nofollow\">Ruby 2.2.4</a> and I extracted it to <strong>c:\\Ruby22</strong>.</p>\n\n<p>Downloaded 32-bit <a href=\"http://dl.bintray.com/oneclick/rubyinstaller/DevKit-mingw64-32-4.7.2-20130224-1151-sfx.exe\" rel=\"nofollow\">Ruby Dev Kit for use with Ruby 2.0 and above</a> and I extracted this to <strong>c:\\Ruby22DevKit</strong>.</p>\n\n<p>I created two system  environment variables (System -> Advanced system settings -> Environment Variables) <strong>RUBY22_HOME=C:\\Ruby22</strong> and <strong>Ruby22_DEVKIT_HOME=C:\\Ruby22DevKit</strong>.</p>\n\n<p>I updated my Path system environment variable adding to the end <strong>;c:\\Ruby22\\bin;c:\\Ruby22DevKit\\bin</strong>\nI opened a command window and typed <strong>bash.exe</strong> (can be found in C:\\Ruby22DevKit\\bin)</p>\n\n<pre><code>gem install cucumber\ngem install rspec-expectations\ngem install capybara\ngem install selenium-webdriver\n</code></pre>\n\n<p>I cd to my user home and </p>\n\n<pre><code>mkdir RubyCucumberProject\ncd RubyCucumberProject\nmkdir features\ncd features\nmkdir step_definitions\nmkdir support\ntouch helloworld.feature  \n</code></pre>\n\n<p>I edited <strong>helloworld.features</strong> adding:</p>\n\n<pre><code>Feature: Hello World\n\n@helloworld\nScenario: Hello google\n  Given I am on the google search page\n  When I search for \"hello world\"\n  Then there should be a result for \"www.helloworld.com/\"\n</code></pre>\n\n<p>I cd to <strong>step_definitions</strong> and <strong>touch hello_word.rb</strong>. I edited this file adding:</p>\n\n<pre><code>Given(/^I am on the google search page$/) do\n  visit 'http://www.google.com/advanced_search?hl=en'\nend\n\nWhen(/^I search for \"(.*)\"$/) do |query|\n  fill_in 'as_q', :with =&gt; query\n  click_button 'Search'\nend\n\nThen /^there should be a result for \"(.*)\"$/ do |expected_result|\n  results = all('cite').map { |el| el.text }\n  results.should include expected_result\nend\n</code></pre>\n\n<p>I then <strong>cd../support</strong> so that I was in the support folder and typed <strong>touch env.rb</strong> edited same adding:</p>\n\n<pre><code>require 'rubygems'\nrequire 'capybara'\nrequire 'capybara/dsl'\nrequire 'rspec'\n\nCapybara.run_server = false\nCapybara.default_driver = :selenium\nCapybara.default_selector = :css\n\nWorld(Capybara::DSL)\n</code></pre>\n\n<p>I then <strong>cd ../../</strong> so that I was in the project root folder and entered <strong>cucumber</strong> and it worked.</p>\n"}], "owner": {"reputation": 15, "user_id": 6076731, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d82ef942e04295637f65f66df0e6e71?s=128&d=identicon&r=PG&f=1", "display_name": "Pravin", "link": "https://stackoverflow.com/users/6076731/pravin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 413, "favorite_count": 0, "accepted_answer_id": 36322426, "answer_count": 1, "score": 0, "last_activity_date": 1460386322, "creation_date": 1459338225, "last_edit_date": 1459342288, "question_id": 36307805, "link": "https://stackoverflow.com/questions/36307805/how-do-i-set-up-dependencies-for-ruby-cucumber-on-windows-10", "title": "How do I set up dependencies for Ruby Cucumber on Windows 10?", "body": "<p>This is a command prompt error.</p>\n\n<p>I am using the windows 10 operating system. I have to write automation script using Ruby and Cucumber. That requires devkit, ruby 2.0, sublime text. </p>\n\n<p>I have created a dir for project as a \"pravinpro\", I have installed the cucumber gem. after running it at the command prompt, it shows error:</p>\n\n<pre><code>Oops... Invalid Platform\nSupported platform are \"android\" and \"iOS\".\nTo run on Desktop no need to mention platform.\n</code></pre>\n\n<p><a href=\"http://i.stack.imgur.com/a1Fqf.png\" rel=\"nofollow\">Screenshot of the error</a></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "docker", "docker-machine", "calabash-android"], "answers": [{"comments": [{"owner": {"reputation": 725, "user_id": 5023800, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/UPKGE.jpg?s=128&g=1", "display_name": "Muneer Muhammed", "link": "https://stackoverflow.com/users/5023800/muneer-muhammed"}, "edited": false, "score": 0, "creation_date": 1459337856, "post_id": 36306240, "comment_id": 60238845, "body": "Thanks @VonC for your help. Can I manually install ruby when I am inside the container?"}, {"owner": {"reputation": 1034911, "user_id": 6309, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7aa22372b695ed2b26052c340f9097eb?s=128&d=identicon&r=PG", "display_name": "VonC", "link": "https://stackoverflow.com/users/6309/vonc"}, "reply_to_user": {"reputation": 725, "user_id": 5023800, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/UPKGE.jpg?s=128&g=1", "display_name": "Muneer Muhammed", "link": "https://stackoverflow.com/users/5023800/muneer-muhammed"}, "edited": false, "score": 1, "creation_date": 1459338013, "post_id": 36306240, "comment_id": 60238950, "body": "@muneermuhammed no: you would specify the installation of ruby in a Dockerfile in order to build an image with ruby installed, which then allows you to run a container in which ruby is available. You don&#39;t install anything directly in a container. Plus, if your Dockerfile starts with FROM ruby:2.3.0, you don&#39;t have to install ruby at all. It is already installed for you."}, {"owner": {"reputation": 725, "user_id": 5023800, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/UPKGE.jpg?s=128&g=1", "display_name": "Muneer Muhammed", "link": "https://stackoverflow.com/users/5023800/muneer-muhammed"}, "edited": false, "score": 0, "creation_date": 1459338809, "post_id": 36306240, "comment_id": 60239504, "body": "Can I simply run the command as RUN ruby:2.3.0 if my docker file starts with FROM ubuntu:14.04 ?"}, {"owner": {"reputation": 1034911, "user_id": 6309, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7aa22372b695ed2b26052c340f9097eb?s=128&d=identicon&r=PG", "display_name": "VonC", "link": "https://stackoverflow.com/users/6309/vonc"}, "reply_to_user": {"reputation": 725, "user_id": 5023800, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/UPKGE.jpg?s=128&g=1", "display_name": "Muneer Muhammed", "link": "https://stackoverflow.com/users/5023800/muneer-muhammed"}, "edited": false, "score": 1, "creation_date": 1459338952, "post_id": 36306240, "comment_id": 60239605, "body": "@muneermuhammed no, RUN is for shell commands, not docker image names. You would need, in your Dockerfile, to reproduce the content of <a href=\"https://github.com/docker-library/ruby/blob/c88f3a67da720bfa9fb1717960d90fd5db11c757/2.3/Dockerfile\" rel=\"nofollow noreferrer\">github.com/docker-library/ruby/blob/&hellip;</a> in order to install ruby: it is done on top of a Debian Jessie distribution but might work on top of an ubuntu one."}, {"owner": {"reputation": 1034911, "user_id": 6309, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7aa22372b695ed2b26052c340f9097eb?s=128&d=identicon&r=PG", "display_name": "VonC", "link": "https://stackoverflow.com/users/6309/vonc"}, "reply_to_user": {"reputation": 725, "user_id": 5023800, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/UPKGE.jpg?s=128&g=1", "display_name": "Muneer Muhammed", "link": "https://stackoverflow.com/users/5023800/muneer-muhammed"}, "edited": false, "score": 0, "creation_date": 1459338996, "post_id": 36306240, "comment_id": 60239646, "body": "@muneermuhammed a simlper alternative is to use the <code>FROM ruby:2.3.0</code> directive, and see if what you are doing on top of that is compatible with a Debien jessie distribution."}, {"owner": {"reputation": 725, "user_id": 5023800, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/UPKGE.jpg?s=128&g=1", "display_name": "Muneer Muhammed", "link": "https://stackoverflow.com/users/5023800/muneer-muhammed"}, "reply_to_user": {"reputation": 1034911, "user_id": 6309, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7aa22372b695ed2b26052c340f9097eb?s=128&d=identicon&r=PG", "display_name": "VonC", "link": "https://stackoverflow.com/users/6309/vonc"}, "edited": false, "score": 0, "creation_date": 1459339030, "post_id": 36306240, "comment_id": 60239669, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/107732/discussion-between-muneer-muhammed-and-vonc\">continue this discussion in chat</a>."}, {"owner": {"reputation": 136, "user_id": 3540495, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-ON2ijeeDNqw/AAAAAAAAAAI/AAAAAAAAAR8/9HRK2QEV9o4/photo.jpg?sz=128", "display_name": "ArMD", "link": "https://stackoverflow.com/users/3540495/armd"}, "edited": false, "score": 0, "creation_date": 1607508970, "post_id": 36306240, "comment_id": 115292354, "body": "I always start my ruby setup with the dockerfile mentioned here - <a href=\"https://thearjunmdas.github.io/entries/dev-with-ruby-docker/\" rel=\"nofollow noreferrer\">thearjunmdas.github.io/entries/dev-with-ruby-docker</a>"}, {"owner": {"reputation": 1034911, "user_id": 6309, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7aa22372b695ed2b26052c340f9097eb?s=128&d=identicon&r=PG", "display_name": "VonC", "link": "https://stackoverflow.com/users/6309/vonc"}, "reply_to_user": {"reputation": 136, "user_id": 3540495, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-ON2ijeeDNqw/AAAAAAAAAAI/AAAAAAAAAR8/9HRK2QEV9o4/photo.jpg?sz=128", "display_name": "ArMD", "link": "https://stackoverflow.com/users/3540495/armd"}, "edited": false, "score": 1, "creation_date": 1607509331, "post_id": 36306240, "comment_id": 115292513, "body": "@ArMD Thank you. I have included your comment in the answer for more visibility."}], "tags": [], "owner": {"reputation": 1034911, "user_id": 6309, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7aa22372b695ed2b26052c340f9097eb?s=128&d=identicon&r=PG", "display_name": "VonC", "link": "https://stackoverflow.com/users/6309/vonc"}, "is_accepted": true, "score": 12, "last_activity_date": 1607509304, "last_edit_date": 1607509304, "creation_date": 1459333955, "answer_id": 36306240, "question_id": 36305861, "link": "https://stackoverflow.com/questions/36305861/how-to-install-ruby-on-docker/36306240#36306240", "title": "How to install Ruby on docker?", "body": "<p>You could start view a dockerfile starting with:</p>\n<pre><code># 2016\nFROM ruby:2.3.0\n\n# 2020\n# Import your ruby version\nFROM ruby:2.7.1\n# Install bundler gem\nRUN gem install bundler\n# Assign a work directory\nWORKDIR /work\n</code></pre>\n<p>That would use the <a href=\"https://hub.docker.com/_/ruby/\" rel=\"nofollow noreferrer\">docker image ruby</a>, with ruby already installed.</p>\n<p>The 2020 version comes from &quot;<a href=\"https://thearjunmdas.github.io/entries/dev-with-ruby-docker/\" rel=\"nofollow noreferrer\">Ruby version management with docker</a>&quot; from <strong><a href=\"https://twitter.com/TheArjunMDas\" rel=\"nofollow noreferrer\">Arjun Das</a></strong>, mentioned by <a href=\"https://stackoverflow.com/users/3540495/armd\">ArMD</a> in <a href=\"https://stackoverflow.com/questions/36305861/how-to-install-ruby-on-docker/36306240?noredirect=1#comment115292354_36306240\">the comments</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 1707, "user_id": 3292174, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DNPrX.jpg?s=128&g=1", "display_name": "Michael Malov", "link": "https://stackoverflow.com/users/3292174/michael-malov"}, "edited": false, "score": 1, "creation_date": 1523645005, "post_id": 40850761, "comment_id": 86662327, "body": "Looks like link to gist with Dockerfile for ruby via rvm is wrong. Also it may be required to add curl to <code># basics</code> like <code>RUN apt-get install -y openssl curl</code>. <a href=\"https://gist.github.com/malovme/ad28917f1d86fac20b9c2634fbd0a048\" rel=\"nofollow noreferrer\">link to gist I&#39;ve tried</a>"}], "tags": [], "owner": {"reputation": 11573, "user_id": 473792, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/bwv8P.jpg?s=128&g=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/473792/kevin"}, "is_accepted": false, "score": 18, "last_activity_date": 1480356438, "creation_date": 1480356438, "answer_id": 40850761, "question_id": 36305861, "link": "https://stackoverflow.com/questions/36305861/how-to-install-ruby-on-docker/40850761#40850761", "title": "How to install Ruby on docker?", "body": "<p>If you're starting <code>FROM</code> a different base Docker instance, you can simply <code>RUN</code> commands that install Ruby from your base instance's package management system. For example, <a href=\"https://github.com/dockerfile/ruby/blob/master/Dockerfile\" rel=\"noreferrer\">this GitHub Gist</a> shows how to use <code>apt-get</code> to install Ruby on a Ubuntu instance:</p>\n\n<pre><code># Pull base image.\nFROM dockerfile/ubuntu\n\n# Install Ruby.\nRUN \\\n  apt-get update &amp;&amp; \\\n  apt-get install -y ruby\n</code></pre>\n\n<p>And <a href=\"https://github.com/dockerfile/ruby/blob/master/Dockerfile\" rel=\"noreferrer\">this Gist</a> shows a Dockerfile that's configured to install RVM and Ruby on a Ubuntu instance:</p>\n\n<pre><code>FROM ubuntu\n\nRUN apt-get update\n\n# basics\nRUN apt-get install -y openssl\n\n# install RVM, Ruby, and Bundler\nRUN \\curl -L https://get.rvm.io | bash -s stable\nRUN /bin/bash -l -c \"rvm requirements\"\nRUN /bin/bash -l -c \"rvm install 2.0\"\nRUN /bin/bash -l -c \"gem install bundler --no-ri --no-rdoc\"\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 695, "user_id": 2825816, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/57ff98711b9c254e57327a823e0ae30d?s=128&d=identicon&r=PG&f=1", "display_name": "hyena", "link": "https://stackoverflow.com/users/2825816/hyena"}, "edited": false, "score": 2, "creation_date": 1574921528, "post_id": 49578968, "comment_id": 104401764, "body": "took me two days of faffing around to get here, my environment is docker using image openjdk:8 to use in android build pipeline"}], "tags": [], "owner": {"reputation": 13460, "user_id": 110333, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/59436ecd4fe6ad7c34f67654d839f05f?s=128&d=identicon&r=PG", "display_name": "grosser", "link": "https://stackoverflow.com/users/110333/grosser"}, "is_accepted": false, "score": 12, "last_activity_date": 1522692163, "last_edit_date": 1522692163, "creation_date": 1522432000, "answer_id": 49578968, "question_id": 36305861, "link": "https://stackoverflow.com/questions/36305861/how-to-install-ruby-on-docker/49578968#49578968", "title": "How to install Ruby on docker?", "body": "<p>This makes ruby available for any future RUN command and not just bash:</p>\n\n<pre><code>FROM debian:stretch-slim\nRUN \\\n  apt-get update &amp;&amp; apt-get install -y --no-install-recommends --no-install-suggests curl bzip2 build-essential libssl-dev libreadline-dev zlib1g-dev &amp;&amp; \\\n  rm -rf /var/lib/apt/lists/* &amp;&amp; \\\n  curl -L https://github.com/sstephenson/ruby-build/archive/v20180329.tar.gz | tar -zxvf - -C /tmp/ &amp;&amp; \\\n  cd /tmp/ruby-build-* &amp;&amp; ./install.sh &amp;&amp; cd / &amp;&amp; \\\n  ruby-build -v 2.5.1 /usr/local &amp;&amp; rm -rfv /tmp/ruby-build-* &amp;&amp; \\\n  gem install bundler --no-rdoc --no-ri\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 51, "user_id": 10146687, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/19591509b554915795292867d1ef9c67?s=128&d=identicon&r=PG&f=1", "display_name": "Jacob", "link": "https://stackoverflow.com/users/10146687/jacob"}, "is_accepted": false, "score": 3, "last_activity_date": 1582063137, "creation_date": 1582063137, "answer_id": 60290031, "question_id": 36305861, "link": "https://stackoverflow.com/questions/36305861/how-to-install-ruby-on-docker/60290031#60290031", "title": "How to install Ruby on docker?", "body": "<p>Low reputation so I can't comment inline (all those years of lurking, sigh), but in case anyone else happens across this while searching for ways to install old ruby versions to docker, I found @grosser's answer very helpful - it worked where trying to install via RVM simply wouldn't, at least for me.</p>\n\n<p>I would, however, recommend using the recommended approach for installing ruby-build - the following worked for me:</p>\n\n<pre><code>&lt;prior steps&gt;\nRUN git clone https://github.com/rbenv/ruby-build.git &amp;&amp; \\\n  PREFIX=/usr/local ./ruby-build/install.sh &amp;&amp; \\\n  ruby-build -v 2.4.1 /usr/local &amp;&amp; \\\n  gem install bundler -v &lt;VERSION HERE&gt; --no-ri --no-rdoc &amp;&amp; bundle install\n&lt;following steps&gt;\n</code></pre>\n\n<p>Key point here is that this keeps you up to date with ruby-build instead of being hard-coded to the 2018-03-29 version as in @grosser's comment.</p>\n"}, {"tags": [], "owner": {"reputation": 4730, "user_id": 372149, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/9d4572111f1b24154a6fd8f16d7bcf1d?s=128&d=identicon&r=PG", "display_name": "Janis Peisenieks", "link": "https://stackoverflow.com/users/372149/janis-peisenieks"}, "is_accepted": false, "score": 0, "last_activity_date": 1585639824, "creation_date": 1585639824, "answer_id": 60945404, "question_id": 36305861, "link": "https://stackoverflow.com/questions/36305861/how-to-install-ruby-on-docker/60945404#60945404", "title": "How to install Ruby on docker?", "body": "<p>Thanks to @Jacob and @grosser, I've managed to set up mine in a similar, if a bit more unpacked way:</p>\n\n<pre><code># Install Local ruby\nRUN git clone https://github.com/rbenv/rbenv.git ~/.rbenv \\\n  &amp;&amp;  echo 'export PATH=\"$HOME/.rbenv/bin:$PATH\"' &gt;&gt; ~/.bashrc \\\n  &amp;&amp;  echo 'eval \"$(rbenv init -)\"' &gt;&gt; ~/.bashrc\n\nENV HOME /home/jenkins #\u00a0Change this dir as needed.\nENV PATH \"$HOME/.rbenv/bin:$HOME/.rbenv/shims:$PATH\"\nENV RUBY_VERSION 2.6.3\n\nRUN mkdir -p \"$(rbenv root)\"/plugins \\\n    &amp;&amp; git clone https://github.com/rbenv/ruby-build.git \"$(rbenv root)\"/plugins/ruby-build\n\nRUN rbenv install $RUBY_VERSION\n\nRUN rbenv global $RUBY_VERSION &amp;&amp; rbenv versions &amp;&amp; ruby -v\n\n# RUN curl -fsSL https://github.com/rbenv/rbenv-installer/raw/master/bin/rbenv-doctor | bash # Uncomment this to get rbenv to validate your setup.\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 81, "user_id": 11480578, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8daf5ad0b50eca8d1f2aeb119d4c911a?s=128&d=identicon&r=PG&f=1", "display_name": "brainless", "link": "https://stackoverflow.com/users/11480578/brainless"}, "is_accepted": false, "score": 1, "last_activity_date": 1590649493, "creation_date": 1590649493, "answer_id": 62058872, "question_id": 36305861, "link": "https://stackoverflow.com/questions/36305861/how-to-install-ruby-on-docker/62058872#62058872", "title": "How to install Ruby on docker?", "body": "<p>If you want to use things like <code>bundle install</code> and don't use a base image with pre-installed devtools like Ubuntu, you need to install these packages:</p>\n\n<pre><code>RUN apt-get update &amp;&amp; apt-get install -y ruby ruby-dev ruby-bundler build-essential\nRUN apt-get clean &amp;&amp; rm -rf /var/lib/apt/lists/* /tmp/* /var/tmp/*\n</code></pre>\n"}], "owner": {"reputation": 725, "user_id": 5023800, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/UPKGE.jpg?s=128&g=1", "display_name": "Muneer Muhammed", "link": "https://stackoverflow.com/users/5023800/muneer-muhammed"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 22996, "favorite_count": 1, "accepted_answer_id": 36306240, "answer_count": 6, "score": 12, "last_activity_date": 1607509304, "creation_date": 1459332956, "last_edit_date": 1495541843, "question_id": 36305861, "link": "https://stackoverflow.com/questions/36305861/how-to-install-ruby-on-docker", "title": "How to install Ruby on docker?", "body": "<p>I am trying to install ruby on docker. I could install the 1.9 versions but it is not possible to install the latest version such as 2.2.0 and above. I am actually trying to set up calabash on docker. Have tried <a href=\"https://stackoverflow.com/questions/16222738/how-do-i-install-ruby-2-0-0-correctly-on-ubuntu-12-04\">this</a>. Whenever I try to install calabash-android in it getting the error </p>\n\n<pre><code>ERROR:  Error installing calabash-android:\nluffa requires Ruby version &gt;= 2.0.\n</code></pre>\n"}, {"tags": ["ruby", "cucumber", "hashtable"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1459341579, "post_id": 36304708, "comment_id": 60241492, "body": "Please show how <code>table.hashes</code> looks like."}, {"owner": {"reputation": 3, "user_id": 5507497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0947806247a041b8b3b4520fbd91050?s=128&d=identicon&r=PG&f=1", "display_name": "Woots", "link": "https://stackoverflow.com/users/5507497/woots"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1459342774, "post_id": 36304708, "comment_id": 60242400, "body": "@mudasobwa I have just included it in the code block"}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 5507497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0947806247a041b8b3b4520fbd91050?s=128&d=identicon&r=PG&f=1", "display_name": "Woots", "link": "https://stackoverflow.com/users/5507497/woots"}, "edited": false, "score": 0, "creation_date": 1459344530, "post_id": 36309610, "comment_id": 60243885, "body": "In this way I do not select the values right? In case the table is expanded with more columns, I would have to rewrite tasks.map."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 3, "user_id": 5507497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0947806247a041b8b3b4520fbd91050?s=128&d=identicon&r=PG&f=1", "display_name": "Woots", "link": "https://stackoverflow.com/users/5507497/woots"}, "edited": false, "score": 0, "creation_date": 1459344794, "post_id": 36309610, "comment_id": 60244105, "body": "I am not sure I understood this question. Values are compared altogether with keys. When one has more columns, one should <i>append</i> these columns to <code>map</code>."}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 0, "last_activity_date": 1459342725, "creation_date": 1459342725, "answer_id": 36309610, "question_id": 36304708, "link": "https://stackoverflow.com/questions/36304708/comparing-a-cucumber-data-table-to-ruby-array-of-hashes/36309610#36309610", "title": "Comparing a Cucumber Data Table to Ruby Array of Hashes", "body": "<p>I expect the <code>table.hashes</code> to be:</p>\n\n<pre><code>[\n  { issuetype: 'Task', summary: 'Please review', status: 'To do' },\n  { issuetype: 'Task 2', summary: 'Please review', status: 'To do' },\n]\n</code></pre>\n\n<p>To get the array of hashes to compare out of your <code>tasks</code> (which is apparently an invalid object, hence I was forced to make an assumption on it\u2019s real structure:</p>\n\n<pre><code>mapped = tasks.map do |hash|\n  {\n    issuetype: hash[:issuetype][:name],\n    summary: hash[:fields][:summary],\n    status: hash[:status][:currentstatus]\n  }\nend\n</code></pre>\n\n<p>Now it\u2019s fine to compare <code>table.hashes</code> and <code>mapped</code>. <strong>NB</strong> the solution above assumes hash keys are <em>symbols</em>. Whether they are strings, the respective cast is to be done.</p>\n"}], "owner": {"reputation": 3, "user_id": 5507497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0947806247a041b8b3b4520fbd91050?s=128&d=identicon&r=PG&f=1", "display_name": "Woots", "link": "https://stackoverflow.com/users/5507497/woots"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1003, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1459343514, "creation_date": 1459330066, "last_edit_date": 1459343514, "question_id": 36304708, "link": "https://stackoverflow.com/questions/36304708/comparing-a-cucumber-data-table-to-ruby-array-of-hashes", "title": "Comparing a Cucumber Data Table to Ruby Array of Hashes", "body": "<p>I am trying to compare data from a cucumber table to an array of hashes. </p>\n\n<pre><code> Cucumber step: \n\n Then I expect tasks created with:\n      | issuetype | summary       | status | \n      | Task      | Please review | To do  | \n      | Task      | Please review | To do  |\n</code></pre>\n\n<p>I turned the table into a hash using: </p>\n\n<pre><code>Then (/^I expect tasks created with:/) do |table| \n  table = table.hashes\nend \n\n\n [{\"issuetype\"=&gt;\"Task\", \n   \"summary\"=&gt;\"Please review\", \n   \"status\"=&gt;\"To do\", \n   \"assignee\"=&gt;\"unassigned\", \n   \"assigned group\"=&gt;\"rm-group1\"}, \n  {\"issuetype\"=&gt;\"Task\", \n   \"summary\"=&gt;\"Please review\", \n   \"status\"=&gt;\"To do\", \n   \"assignee\"=&gt;\"unassigned\", \n   \"assigned group\"=&gt;\"rm-group2\"}]\n</code></pre>\n\n<p>How can I select the values (<code>issuetype</code>, <code>summary</code>, <code>status</code>) from the data underneath, which is is a JSON  parse and  format it like the <code>table.hashes</code> above and compare them? </p>\n\n<pre><code>tasks [ {\n      id: 1\n      fields:{ \n           summary: \"Summary\"\n      } \n           status:{\n                 description: \"description\"\n                 currentstatus: \"To do\"\n             }\n            issuetype{ \n                  id: \"5\"\n                  name: \"sub-task\"\n             }\n           }]\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "rake", "resque"], "answers": [{"comments": [{"owner": {"reputation": 733, "user_id": 76989, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/6f99d1a752c3b79c813042618880825e?s=128&d=identicon&r=PG", "display_name": "mmhan", "link": "https://stackoverflow.com/users/76989/mmhan"}, "edited": false, "score": 0, "creation_date": 1459335802, "post_id": 36306406, "comment_id": 60237365, "body": "I&#39;ve added another update, which found <code>resque:preload</code> as the culprit. Any way to stop it from greedily loading everything?"}], "tags": [], "owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "is_accepted": false, "score": 0, "last_activity_date": 1459334426, "creation_date": 1459334426, "answer_id": 36306406, "question_id": 36304434, "link": "https://stackoverflow.com/questions/36304434/rake-environment-superclass-mismatch-then-including-lib-folder/36306406#36306406", "title": "Rake Environment Superclass Mismatch then including lib folder?", "body": "<p>While these two might seem identical the actual lookup of <code>BaseController</code> is quite different:</p>\n\n<pre><code>class API::V2::Marketplace::ProductsController &lt; BaseController; end\n\nmodule API\n  module V2\n    module Marketplace\n      # will use this class as super\n      class BaseController; end\n\n      class ProductsController &lt; BaseController; end\n    end\n  end\nend\n</code></pre>\n\n<p>In the first example <code>BaseController</code> will be resolved from the \"global\" namespace (the <code>main</code> object). While in the second it will be resolved from the current nesting.</p>\n\n<p>So if you define a class like in the first example you should explicitly state the full path to the superclass.</p>\n\n<p>The error with the missplaced RSpec specs is likely that they relied on the behavior of older versions of RSpec where it placed its DSL in the main object or the fact that the RSpec gem might not even be loaded in the current environment.</p>\n\n<p>Rails by default does not require each file in <code>lib</code> - instead I suspect the culprit is a faulty attempt at autoloading the files.</p>\n"}], "owner": {"reputation": 733, "user_id": 76989, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/6f99d1a752c3b79c813042618880825e?s=128&d=identicon&r=PG", "display_name": "mmhan", "link": "https://stackoverflow.com/users/76989/mmhan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 115, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1459335736, "creation_date": 1459329325, "last_edit_date": 1495535309, "question_id": 36304434, "link": "https://stackoverflow.com/questions/36304434/rake-environment-superclass-mismatch-then-including-lib-folder", "title": "Rake Environment Superclass Mismatch then including lib folder?", "body": "<p>I have many controllers that are identically named in <a href=\"https://stackoverflow.com/questions/20162628/same-controller-name-in-two-different-directories\">different namespaces</a>: </p>\n\n<pre><code>Marketplace::ProductsController &lt; ApplicationController\n\nOffice::Marketplace::ProductsController &lt; Office::BaseController\n\nAPI::V2::Marketplace::ProductsController &lt; BaseController\n</code></pre>\n\n<p>which are working fine with <code>rails s</code> and <code>rails c</code>, both unit tests and cucumber tests.</p>\n\n<p>However, as I followed <a href=\"https://blog.engineyard.com/2014/getting-started-with-active-job\" rel=\"nofollow noreferrer\">getting started with ActiveJob tutorial</a>, and tried to run the command <code>QUEUE=* rake environment resque:work</code> it produces the following error.</p>\n\n<pre><code>TypeError: superclass mismatch for class ProductsController\n</code></pre>\n\n<p>It seems as if resque isn't happy about these two identically named controllers \u2014 namespaced they may be \u2014 inheriting from different classes. Is there any reason why <code>rake environment</code> is complaining every other rake task and rails is fine with it.</p>\n\n<p><strong>Update 1:</strong> </p>\n\n<p>I have found that for <code>API::V2::Marketplace::ProductsController</code> is defined as below: </p>\n\n<pre><code>module API\n  module V2\n    class Marketplace::ProductsController &lt; BaseController\n    end\n  end\nend\n</code></pre>\n\n<p>Once I changed it to below, the error seems to have been solved.</p>\n\n<pre><code>class API::V2::Marketplace::ProductsController &lt; API::V2:BaseController\nend\n</code></pre>\n\n<p>Meanwhile <code>Marketplace::ShopsController</code> and <code>API::V2::Marketplace::ShopsController</code> has no problem, even though the latter was defined as below</p>\n\n<pre><code>module API\n  module V2\n    class Marketplace::ShopsController &lt; BaseController\n  end\nend\n</code></pre>\n\n<p>The error is now about some rspec files in my <code>lib</code> folder. I have added some lib folder that are slightly related to the code base, but not really used. Apparently, it's trying to load these files and giving me error such as this when the <code>QUEUE=* rake environment resque:work</code> command was issued.</p>\n\n<pre><code>NoMethodError: undefined method `describe' for main:Object\n</code></pre>\n\n<p>Once I removed those legacy files out of lib folders, I get no error. </p>\n\n<p>Does <code>rake environment</code> include everything from lib? I'm finding this incredulous since all other rake tasks that I have been running do nothing like that.</p>\n\n<p>Update 2: </p>\n\n<p>While closer inspection with <code>--trace</code>. I could see my <code>puts</code> message like this.</p>\n\n<pre><code>** Invoke environment (first_time)\n** Execute environment\n** Invoke resque:work (first_time)\n** Invoke resque:preload (first_time)\n** Invoke resque:setup (first_time)\n** Execute resque:setup\n** Execute resque:preload\n** My puts message.**\n** Invoke resque:setup\n** Execute resque:work\n</code></pre>\n\n<p><code>resque:preload</code> seems like the culprit. Is there anyway I could fix that from greedily including everything?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "devise"], "comments": [{"owner": {"reputation": 386, "user_id": 5119169, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LV52D.jpg?s=128&g=1", "display_name": "pradeepchauhan_pc", "link": "https://stackoverflow.com/users/5119169/pradeepchauhan-pc"}, "edited": false, "score": 0, "creation_date": 1459328901, "post_id": 36304087, "comment_id": 60232356, "body": "it&#39;s created by scaffolding or manually?"}, {"owner": {"reputation": 783, "user_id": 3350631, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/cdfab487bd587de79d4eea825d4ed216?s=128&d=identicon&r=PG&f=1", "display_name": "Kupi", "link": "https://stackoverflow.com/users/3350631/kupi"}, "edited": false, "score": 0, "creation_date": 1459336548, "post_id": 36304087, "comment_id": 60237905, "body": "the devise was from scaffolding"}], "answers": [{"comments": [{"owner": {"reputation": 783, "user_id": 3350631, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/cdfab487bd587de79d4eea825d4ed216?s=128&d=identicon&r=PG&f=1", "display_name": "Kupi", "link": "https://stackoverflow.com/users/3350631/kupi"}, "edited": false, "score": 0, "creation_date": 1459336436, "post_id": 36304242, "comment_id": 60237820, "body": "I get this error <code>No sanitizer provided for user</code>."}, {"owner": {"reputation": 1698, "user_id": 4587148, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/VjBAv.jpg?s=128&g=1", "display_name": "Sajan", "link": "https://stackoverflow.com/users/4587148/sajan"}, "edited": false, "score": 0, "creation_date": 1459337606, "post_id": 36304242, "comment_id": 60238655, "body": "In this answer try changing arguments for <code>for</code> from <code>:user</code> to <code>:sign_up</code> and <code>:account_update</code>."}, {"owner": {"reputation": 6105, "user_id": 4002659, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c11c2eb99f1668b4d442780e34fc983d?s=128&d=identicon&r=PG&f=1", "display_name": "dp7", "link": "https://stackoverflow.com/users/4002659/dp7"}, "reply_to_user": {"reputation": 1698, "user_id": 4587148, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/VjBAv.jpg?s=128&g=1", "display_name": "Sajan", "link": "https://stackoverflow.com/users/4587148/sajan"}, "edited": false, "score": 0, "creation_date": 1459339388, "post_id": 36304242, "comment_id": 60239890, "body": "@sajan thanks for pointing that out. I have edited the answer."}], "tags": [], "owner": {"reputation": 6105, "user_id": 4002659, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c11c2eb99f1668b4d442780e34fc983d?s=128&d=identicon&r=PG&f=1", "display_name": "dp7", "link": "https://stackoverflow.com/users/4002659/dp7"}, "is_accepted": false, "score": 0, "last_activity_date": 1459338016, "last_edit_date": 1459338016, "creation_date": 1459328745, "answer_id": 36304242, "question_id": 36304087, "link": "https://stackoverflow.com/questions/36304087/add-extra-params-to-user-from-devise-in-ruby-on-rails/36304242#36304242", "title": "Add extra params to user from devise in ruby on rails", "body": "<p>Please check <a href=\"https://github.com/plataformatec/devise#strong-parameters\" rel=\"nofollow\">Devise Parameter Sanitization</a></p>\n\n<p>You can try this:</p>\n\n<pre><code>class Users::RegistrationsController &lt; Devise::RegistrationsController\n\n def sign_up_params\n  devise_parameter_sanitizer.for(:sign_up).push(:name)\n end\n\n def account_update_params\n   devise_parameter_sanitizer.for(:account_update).push(:name, :email, :password, :password_confirmation, :current_password)\n end\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 783, "user_id": 3350631, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/cdfab487bd587de79d4eea825d4ed216?s=128&d=identicon&r=PG&f=1", "display_name": "Kupi", "link": "https://stackoverflow.com/users/3350631/kupi"}, "edited": false, "score": 0, "creation_date": 1459339505, "post_id": 36307876, "comment_id": 60239977, "body": "Seemed to work only after i removed the property i had added in my user model.. But it did work so thx!"}], "tags": [], "owner": {"reputation": 2093, "user_id": 1747295, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a70b9d5ee5e89974383b7cf856e1dea8?s=128&d=identicon&r=PG&f=1", "display_name": "Muhammad Yawar Ali", "link": "https://stackoverflow.com/users/1747295/muhammad-yawar-ali"}, "is_accepted": true, "score": 2, "last_activity_date": 1459338400, "creation_date": 1459338400, "answer_id": 36307876, "question_id": 36304087, "link": "https://stackoverflow.com/questions/36304087/add-extra-params-to-user-from-devise-in-ruby-on-rails/36307876#36307876", "title": "Add extra params to user from devise in ruby on rails", "body": "<p>Add this to your <code>ApplicationController</code> to configure <code>signup</code> <code>signin</code> &amp; <code>account_update</code> params.</p>\n\n<pre><code>def configure_permitted_parameters\n    devise_parameter_sanitizer.for(:sign_up) { |u| u.permit(:name,:email, :password, :password_confirmation) }\n    devise_parameter_sanitizer.for(:sign_in) { |u| u.permit(:login, :username, :email, :password, :remember_me) }\n    devise_parameter_sanitizer.for(:account_update) { |u| u.permit(:name, :username, :anonymous, :email, :password, :password_confirmation,:reset_password_token) }\nend\n</code></pre>\n\n<p>And also add <code>before_filter</code> to <code>ApplicationController</code> like :</p>\n\n<pre><code>before_filter :configure_permitted_parameters, if: :devise_controller?\n</code></pre>\n"}], "owner": {"reputation": 783, "user_id": 3350631, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/cdfab487bd587de79d4eea825d4ed216?s=128&d=identicon&r=PG&f=1", "display_name": "Kupi", "link": "https://stackoverflow.com/users/3350631/kupi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1071, "favorite_count": 0, "closed_date": 1459345672, "accepted_answer_id": 36307876, "answer_count": 2, "score": 0, "last_activity_date": 1459338400, "creation_date": 1459328236, "question_id": 36304087, "link": "https://stackoverflow.com/questions/36304087/add-extra-params-to-user-from-devise-in-ruby-on-rails", "closed_reason": "Duplicate", "title": "Add extra params to user from devise in ruby on rails", "body": "<p>I want to add a property name in the user model. I ran the migration command to add the column to the database and that worked. Adding the property to user itself worked as well but it isn't saved in the db. </p>\n\n<p>How can I add the property \"name\" to the required params of the <code>sign_up</code> and <code>account_update</code> of RegistrationController?</p>\n\n<p>This is my user model</p>\n\n<pre><code>class User &lt; ActiveRecord::Base\n  devise :database_authenticatable, :registerable,\n         :recoverable, :rememberable, :trackable, :validatable\n  attr_accessor :name\nend\n</code></pre>\n\n<p>I tried adding the required params to the methodes like this in the <code>RegistrationController</code></p>\n\n<pre><code>class Users::RegistrationsController &lt; Devise::RegistrationsController\n\n  def sign_up_params\n    params.require(:user).permit(:name,:email, :password, :password_confirmation)\n  end\n\n  def account_update_params\n    params.require(:user).permit(:name, :email, :password, :password_confirmation, :current_password)\n  end\nend\n</code></pre>\n\n<p>In the routings i added the line </p>\n\n<p><code>devise_for :users, controllers: { registrations: 'users/registrations' }</code> </p>\n\n<p>But the name of the user still isn't saved in the database.</p>\n"}, {"tags": ["ruby", "openshift", "eventmachine", "goliath"], "comments": [{"owner": {"reputation": 1375, "user_id": 5400813, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d09096e537344ba6f75a88d4e4b14909?s=128&d=identicon&r=PG&f=1", "display_name": "Jiri Fiala", "link": "https://stackoverflow.com/users/5400813/jiri-fiala"}, "edited": false, "score": 1, "creation_date": 1459337447, "post_id": 36302537, "comment_id": 60238547, "body": "You can bind to <code>$OPENSHIFT_&lt;appname&gt;_PORT</code> only to have your server externally addressable. More on binding to ports on OpenShift Online can be found <a href=\"https://developers.openshift.com/managing-your-applications/port-binding-routing.html\" rel=\"nofollow noreferrer\">here</a> and <a href=\"https://access.redhat.com/documentation/en-US/OpenShift_Online/2.0/html/User_Guide/sect-Binding_Applications_to_Ports.html\" rel=\"nofollow noreferrer\">here</a>."}], "answers": [{"tags": [], "owner": {"reputation": 177, "user_id": 1283963, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ppnPV.jpg?s=128&g=1", "display_name": "Elena", "link": "https://stackoverflow.com/users/1283963/elena"}, "is_accepted": false, "score": 2, "last_activity_date": 1459324227, "creation_date": 1459324227, "answer_id": 36302736, "question_id": 36302537, "link": "https://stackoverflow.com/questions/36302537/goliath-on-openshift/36302736#36302736", "title": "Goliath on Openshift", "body": "<p>Are you 100% positive that you aren't actually running another application on that port?</p>\n\n<p>Please try </p>\n\n<p><code>$ lsof -i :9000</code></p>\n"}], "owner": {"reputation": 53, "user_id": 5751777, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JADDe.png?s=128&g=1", "display_name": "Vangelis Typaldos", "link": "https://stackoverflow.com/users/5751777/vangelis-typaldos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 139, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1459324227, "creation_date": 1459323601, "question_id": 36302537, "link": "https://stackoverflow.com/questions/36302537/goliath-on-openshift", "title": "Goliath on Openshift", "body": "<p>Trying to deploy a Goliath application on Openshift with the below config.ru</p>\n\n<pre><code>require 'goliath'\nrequire './goliathapp'\n\nrunner = Goliath::Runner.new(ARGV, nil)\nrunner.api = GoliathApp.new\nrunner.app = Goliath::Rack::Builder.build(GoliathApp, runner.api)\nrunner.run\n</code></pre>\n\n<p>Locally in my testbed environment the application runs smoothly but on Openshift returns the below privileges errors.</p>\n\n<pre><code>[Client 20] Cannot checkout session. An error occured while starting the web application.\nError page:\nno acceptor (port is in use or requires root privileges) (RuntimeError)\n/var/lib/openshift/.../.gem/gems/eventmachine-1.2.0.1/lib/eventmachine.rb:530:in `start_tcp_server'\n/var/lib/openshift/.../.gem/gems/eventmachine-1.2.0.1/lib/eventmachine.rb:530:in `start_server'\n/var/lib/openshift/.../.gem/gems/goliath-1.0.4/lib/goliath/server.rb:86:in `block in start'\n/var/lib/openshift/.../.gem/gems/em-synchrony-1.0.4/lib/em-synchrony.rb:38:in `block (2 levels) in synchrony'\n</code></pre>\n\n<p>Had anyone luck on running goliath on Openshift?</p>\n\n<p>Thank you,</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 1, "creation_date": 1459324078, "post_id": 36302058, "comment_id": 60229386, "body": "What are the values of <code>a</code> and <code>b</code>?"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 47294, "user_id": 3885376, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/XgeJ5.png?s=128&g=1", "display_name": "ROMANIA_engineer", "link": "https://stackoverflow.com/users/3885376/romania-engineer"}, "edited": false, "score": 3, "creation_date": 1459328253, "post_id": 36302058, "comment_id": 60231907, "body": "@engineer, since Ruby v.1.9, which came out several years ago, the insertion order of hash keys is maintained. The idea of hash keys being ordered remains controversial, however. Personally, I&#39;ve made use of that property quite a lot."}], "answers": [{"tags": [], "owner": {"reputation": 14407, "user_id": 3035830, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/14809f2ad7f14e2867798697ab8f8006?s=128&d=identicon&r=PG", "display_name": "shivam", "link": "https://stackoverflow.com/users/3035830/shivam"}, "is_accepted": false, "score": 1, "last_activity_date": 1459322864, "creation_date": 1459322864, "answer_id": 36302280, "question_id": 36302058, "link": "https://stackoverflow.com/questions/36302058/sort-hash-keys-based-on-order-of-same-keys-in-array/36302280#36302280", "title": "Sort Hash Keys based on order of same keys in array", "body": "<p>I do not see any sorting, I think essentially you are doing this:</p>\n\n<pre><code>hash = { a:23, b:12 }\narray = [:b, :a]\nres = {}\narray.each { |key| res[key] = hash[key] } &amp;&amp; res # `&amp;&amp; res` is just syntax sugar to return result in single line\n#=&gt; {:b=&gt;12, :a=&gt;23}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1459327182, "post_id": 36302375, "comment_id": 60231195, "body": "Good answer, but I will never understand why people say (sic), &quot;here&#39;s a one-liner&quot;, followed by a single line of code."}, {"owner": {"reputation": 28208, "user_id": 630654, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/b7cb81a13e53fb639079a2c0a93a737c?s=128&d=identicon&r=PG", "display_name": "Candide", "link": "https://stackoverflow.com/users/630654/candide"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1459328465, "post_id": 36302375, "comment_id": 60232051, "body": "@CarySwoveland Personally, I do it to emphasize that Ruby is succinct and you can write a lot of things into a one liners (in comparison to C#/Java)."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1459339488, "post_id": 36302375, "comment_id": 60239965, "body": "Newlines have no meaning in C\u266f/Java, you can always write any C\u266f/Java program in one line, no matter how complex, that&#39;s not a feature unique to Ruby."}, {"owner": {"reputation": 28208, "user_id": 630654, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/b7cb81a13e53fb639079a2c0a93a737c?s=128&d=identicon&r=PG", "display_name": "Candide", "link": "https://stackoverflow.com/users/630654/candide"}, "reply_to_user": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 1, "creation_date": 1459343623, "post_id": 36302375, "comment_id": 60243150, "body": "@J&#246;rgWMittag Yes, yes, I&#39;m sure you know about www.ioccc.org. To me  a one liner is a piece of code that is readable within a reasonable 80-120 chars length."}], "tags": [], "owner": {"reputation": 28208, "user_id": 630654, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/b7cb81a13e53fb639079a2c0a93a737c?s=128&d=identicon&r=PG", "display_name": "Candide", "link": "https://stackoverflow.com/users/630654/candide"}, "is_accepted": false, "score": 3, "last_activity_date": 1459323132, "creation_date": 1459323132, "answer_id": 36302375, "question_id": 36302058, "link": "https://stackoverflow.com/questions/36302058/sort-hash-keys-based-on-order-of-same-keys-in-array/36302375#36302375", "title": "Sort Hash Keys based on order of same keys in array", "body": "<p>If</p>\n\n<pre><code>hash = { a:23, b:12 }\narray = [:b, :a]\n</code></pre>\n\n<p>As a one liner:</p>\n\n<pre><code>Hash[array.map{|e| [e, hash[e]]}]\n</code></pre>\n\n<p>As for ordering, it was some time ago, when ruby changed the implementation where the hash keys are ordered according to insert order. (Before that there was no guarantee that keys would be sorted one way or another).</p>\n"}, {"tags": [], "owner": {"reputation": 12629, "user_id": 4739257, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/MdhEs.jpg?s=128&g=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/4739257/ilya"}, "is_accepted": false, "score": 5, "last_activity_date": 1459323553, "creation_date": 1459323553, "answer_id": 36302523, "question_id": 36302058, "link": "https://stackoverflow.com/questions/36302058/sort-hash-keys-based-on-order-of-same-keys-in-array/36302523#36302523", "title": "Sort Hash Keys based on order of same keys in array", "body": "<p>You can try something like this:</p>\n\n<pre><code>array = [:b, :a] \n{ a: 23, b: 12 }.sort_by { |k, _| array.index(k) }.to_h\n#=&gt; {:b=&gt;12, :a=&gt;23}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 5880, "user_id": 166233, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/b88b1c85a798a2aee3a35f5cd805d0e2?s=128&d=identicon&r=PG", "display_name": "Steve Wilhelm", "link": "https://stackoverflow.com/users/166233/steve-wilhelm"}, "edited": false, "score": 0, "creation_date": 1464071730, "post_id": 36303479, "comment_id": 62319598, "body": "I personally like @Ilya&#39;s answer below"}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": true, "score": 8, "last_activity_date": 1459326883, "last_edit_date": 1459326883, "creation_date": 1459326532, "answer_id": 36303479, "question_id": 36302058, "link": "https://stackoverflow.com/questions/36302058/sort-hash-keys-based-on-order-of-same-keys-in-array/36303479#36303479", "title": "Sort Hash Keys based on order of same keys in array", "body": "<pre><code>hash = { a: 23, b: 12 }\narray = [:b, :a]\n\narray.zip(hash.values_at(*array)).to_h\n  #=&gt; {:b=&gt;12, :a=&gt;23}\n</code></pre>\n\n<p>The steps:</p>\n\n<pre><code>v = hash.values_at(*array)\n  #=&gt; [12, 23]\na = array.zip(v) \n  #=&gt; [[:b, 12], [[:a, 23]]\na.to_h\n  #=&gt; {:b=&gt;12, :a=&gt;23}\n</code></pre>\n"}], "owner": {"reputation": 239, "user_id": 5949717, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d94a70b5a29a92a373a1cf22777d2570?s=128&d=identicon&r=PG&f=1", "display_name": "Abhishek", "link": "https://stackoverflow.com/users/5949717/abhishek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1021, "favorite_count": 0, "accepted_answer_id": 36303479, "answer_count": 4, "score": 4, "last_activity_date": 1464072935, "creation_date": 1459322106, "last_edit_date": 1464072935, "question_id": 36302058, "link": "https://stackoverflow.com/questions/36302058/sort-hash-keys-based-on-order-of-same-keys-in-array", "title": "Sort Hash Keys based on order of same keys in array", "body": "<p>I need to sort an Hash according to order of keys present in other array:  </p>\n\n<pre><code>hash = { a: 23, b: 12 }\narray = [:b, :a]\nrequired_hash #=&gt; { b: 12, a: 23 } \n</code></pre>\n\n<p>Is there any way to do it in single line?</p>\n"}, {"tags": ["mysql", "ruby-on-rails", "ruby", "database", "activerecord"], "comments": [{"owner": {"reputation": 963, "user_id": 1736955, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/ed07470f42e125b1f6b181b16fde2805?s=128&d=identicon&r=PG", "display_name": "Guru", "link": "https://stackoverflow.com/users/1736955/guru"}, "edited": false, "score": 0, "creation_date": 1459320431, "post_id": 36301498, "comment_id": 60227295, "body": "this question may help you <a href=\"http://stackoverflow.com/questions/15523627/rails-eager-loading-and-where-clause\" title=\"rails eager loading and where clause\">stackoverflow.com/questions/15523627/&hellip;</a>"}, {"owner": {"reputation": 77, "user_id": 1431462, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a658a8e21aaa077eff061939e5a31a2?s=128&d=identicon&r=PG", "display_name": "Porkcrop", "link": "https://stackoverflow.com/users/1431462/porkcrop"}, "reply_to_user": {"reputation": 963, "user_id": 1736955, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/ed07470f42e125b1f6b181b16fde2805?s=128&d=identicon&r=PG", "display_name": "Guru", "link": "https://stackoverflow.com/users/1736955/guru"}, "edited": false, "score": 0, "creation_date": 1459321444, "post_id": 36301498, "comment_id": 60227805, "body": "I believe that question provides information about querying through a has_many association on a singular active record object with a single condition.   I&#39;m trying to search on a collection through a has_many association with multiple conditions on the same columns. If I missed something, let me know - thanks for the link though, appreciate it."}], "answers": [{"comments": [{"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1459321892, "post_id": 36301946, "comment_id": 60228043, "body": "I was thinking along the same lines but won&#39;t this return ambiguous matches? It would match <code>{ key: &#39;name&#39;, value: &#39;Seattle&#39; }</code> for example. It also does not enforce that the event should have both event_attributes."}, {"owner": {"reputation": 77, "user_id": 1431462, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a658a8e21aaa077eff061939e5a31a2?s=128&d=identicon&r=PG", "display_name": "Porkcrop", "link": "https://stackoverflow.com/users/1431462/porkcrop"}, "edited": false, "score": 0, "creation_date": 1459322194, "post_id": 36301946, "comment_id": 60228221, "body": "@Muhammad Yawar Ali Being that you&#39;re using &#39;IN&#39;, wouldn&#39;t that give me events where it has:  An event_attribute that has a key column equal to &#39;name&#39; and a value column equal to &#39;Bill&#39;  OR   An event_attribute that has a key column equal to &#39;city&#39; and a value column equal to &#39;Seattle&#39;  I only want events that have both those event_attributes. I could be mistaken.  --- EDIT: max said what I was trying to say ----"}, {"owner": {"reputation": 2093, "user_id": 1747295, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a70b9d5ee5e89974383b7cf856e1dea8?s=128&d=identicon&r=PG&f=1", "display_name": "Muhammad Yawar Ali", "link": "https://stackoverflow.com/users/1747295/muhammad-yawar-ali"}, "edited": false, "score": 0, "creation_date": 1459322748, "post_id": 36301946, "comment_id": 60228534, "body": "I have editted the answer try it now, it should return results as you require."}], "tags": [], "owner": {"reputation": 2093, "user_id": 1747295, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a70b9d5ee5e89974383b7cf856e1dea8?s=128&d=identicon&r=PG&f=1", "display_name": "Muhammad Yawar Ali", "link": "https://stackoverflow.com/users/1747295/muhammad-yawar-ali"}, "is_accepted": false, "score": 0, "last_activity_date": 1459322696, "last_edit_date": 1459322696, "creation_date": 1459321737, "answer_id": 36301946, "question_id": 36301498, "link": "https://stackoverflow.com/questions/36301498/rails-4-how-do-i-query-on-a-collection-through-a-has-many-association-with-mul/36301946#36301946", "title": "Rails 4 - how do I query on a collection through a has_many association with multiple conditions on the same columns?", "body": "<p>Actually, you are applying where on where thats why its not returning expected results. In first where clause you are getting 1 record and applying second where clause on first one is resulting in 0 records.</p>\n\n<pre><code>Event.includes(:event_attributes).where(\"(event_attributes.key = ? AND event_attributes.value = ?) OR (event_attributes.key = ? AND event_attributes.value = ?)\", \"name\", \"Bill\", \"city\", \"Seattle\")\n</code></pre>\n\n<p>will return the results you need.</p>\n"}, {"comments": [{"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1459322916, "post_id": 36302246, "comment_id": 60228654, "body": "I haven&#39;t played around enough with the Rails 5 <code>.or</code> method to know if you can hook it up with an <code>AND</code> and construct the above query."}, {"owner": {"reputation": 77, "user_id": 1431462, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a658a8e21aaa077eff061939e5a31a2?s=128&d=identicon&r=PG", "display_name": "Porkcrop", "link": "https://stackoverflow.com/users/1431462/porkcrop"}, "edited": false, "score": 0, "creation_date": 1459323105, "post_id": 36302246, "comment_id": 60228791, "body": "Should&#39;ve specified I&#39;m using Rails 4. I&#39;ll check this out @max and let you know the results.  And unfortunately, the key/val table has to stay for now. I simplified the search case for ease of communication."}, {"owner": {"reputation": 77, "user_id": 1431462, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a658a8e21aaa077eff061939e5a31a2?s=128&d=identicon&r=PG", "display_name": "Porkcrop", "link": "https://stackoverflow.com/users/1431462/porkcrop"}, "edited": false, "score": 0, "creation_date": 1459326456, "post_id": 36302246, "comment_id": 60230763, "body": "Appears we are almost there @max. Currently the having clause at the end causes it to return 0 results. Since that&#39;s what is enforcing that the event has both event_attributes then without it you get ambiguous results.I&#39;ve verified thoroughly that the event meets both conditions (both at the database level and by doing single event_attribute condition queries)."}, {"owner": {"reputation": 77, "user_id": 1431462, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a658a8e21aaa077eff061939e5a31a2?s=128&d=identicon&r=PG", "display_name": "Porkcrop", "link": "https://stackoverflow.com/users/1431462/porkcrop"}, "edited": false, "score": 0, "creation_date": 1459327282, "post_id": 36302246, "comment_id": 60231264, "body": "Thinking we need to group on events.id instead of event_attributes.id"}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1459329525, "post_id": 36302246, "comment_id": 60232756, "body": "I adapted this from the <a href=\"http://stackoverflow.com/questions/36131803/sql-where-joined-set-must-contain-all-values-but-may-contain-more\">answer to one of my own questions</a>. I&#39;m a bit unsure about why it returns an empty set and can&#39;t setup an app to test it right now. I would try asking the same thing it as a pure SQL question - they tend to get better answers on SO as there are a lot more truly skilled people following the <code>postgres</code> or <code>mysql</code> tags than rails."}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1459330256, "post_id": 36302246, "comment_id": 60233308, "body": "You might also need some kind of multicolumn uniqueness index on <code>event_id, key, value</code>. Something like this: <code>add_index :events_attributes, [:event_id, :key, :value], unique: true</code>."}, {"owner": {"reputation": 77, "user_id": 1431462, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a658a8e21aaa077eff061939e5a31a2?s=128&d=identicon&r=PG", "display_name": "Porkcrop", "link": "https://stackoverflow.com/users/1431462/porkcrop"}, "edited": false, "score": 1, "creation_date": 1459330976, "post_id": 36302246, "comment_id": 60233868, "body": "I think your initial answer was correct minus the grouping. I have it grouping on event.id on the event_attributes instead of event_attribute.id. So now the &#39;having&#39; clause returns true if it found the number of event_attributes to be equal to the number of conditions (so 2 in the example)."}], "tags": [], "owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "is_accepted": true, "score": 2, "last_activity_date": 1459322736, "creation_date": 1459322736, "answer_id": 36302246, "question_id": 36301498, "link": "https://stackoverflow.com/questions/36301498/rails-4-how-do-i-query-on-a-collection-through-a-has-many-association-with-mul/36302246#36302246", "title": "Rails 4 - how do I query on a collection through a has_many association with multiple conditions on the same columns?", "body": "<p>You need to use an <code>a AND b OR c AND d</code> in the the where clause.\nRails 4 does not have built in support for OR so you would need to use a SQL string.</p>\n\n<pre><code>sql = &lt;&lt;-EOS\n  event_attributes.key = 'name' AND event_attributes.value = 'Bill'\n  OR\n  event_attributes.key = 'city' AND event_attributes.value = 'Seattle'\nEOS\n\nevents = Event.joins(:session, :event_attributes)\n      .where(session: { id: 1 })\n      .where(sql)\n      .group('event_attributes.id')\n      .having(\"count(*) = ?\", 2)\n</code></pre>\n\n<p>If you need to construct the query dynamically you may want to look into the Arel API (which is what ActiveRecord uses to construct SQL). </p>\n\n<p>Although I would personally take the simple road and just add columns to the event table instead since key/val tables are a real PITA.</p>\n"}], "owner": {"reputation": 77, "user_id": 1431462, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a658a8e21aaa077eff061939e5a31a2?s=128&d=identicon&r=PG", "display_name": "Porkcrop", "link": "https://stackoverflow.com/users/1431462/porkcrop"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 800, "favorite_count": 0, "accepted_answer_id": 36302246, "answer_count": 2, "score": 0, "last_activity_date": 1459323139, "creation_date": 1459320164, "last_edit_date": 1459323139, "question_id": 36301498, "link": "https://stackoverflow.com/questions/36301498/rails-4-how-do-i-query-on-a-collection-through-a-has-many-association-with-mul", "title": "Rails 4 - how do I query on a collection through a has_many association with multiple conditions on the same columns?", "body": "<p>Here's some context - let's say I have the following relationships:</p>\n\n<pre><code>class Session &lt; ActiveRecord::Base\n    has_many     :events\nend\n\nclass Event &lt; ActiveRecord::Base\n    belongs_to   :session\n    has_many     :event_attributes\nend\n\nclass EventAttribute&lt; ActiveRecord::Base\n    belongs_to   :event\nend\n</code></pre>\n\n<p>And here is the migration for the event attributes table:</p>\n\n<pre><code>create_table  :event_attributes do |t|\n    t.string  :key\n    t.string  :value\n    t.integer :event_id\nend\n</code></pre>\n\n<p>Now the problem - If I have all the events that belong to a session, like so:</p>\n\n<pre><code>session = Session.find(1)\nevents = session.events\n</code></pre>\n\n<p>How do I find events that have:</p>\n\n<p>An event_attribute where the key column is 'name' and the value column is 'Bill'</p>\n\n<p>AND</p>\n\n<p>An event_attribute where the key column is 'city' and the value column is 'Seattle'</p>\n\n<p>I tried something like this:</p>\n\n<pre><code>events.includes(:event_attributes)\n.where(event_attributes: { key: 'name', value: 'Bill'    })\n.where(event_attributes: { key: 'city', value: 'Seattle' })\n</code></pre>\n\n<p>This provides 0 results. If I query a single where condition I get the expected result, I'm just not sure how to search on a collection with multiple conditions on the has_many association.</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 5286, "user_id": 455770, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mMHwz.jpg?s=128&g=1", "display_name": "Rots", "link": "https://stackoverflow.com/users/455770/rots"}, "edited": false, "score": 2, "creation_date": 1459318744, "post_id": 36300985, "comment_id": 60226402, "body": "Assuming this is the code you found <a href=\"https://github.com/Typeform/redvelvet\" rel=\"nofollow noreferrer\">github.com/Typeform/redvelvet</a> it doesn&#39;t seem to do a lot; doesn&#39;t have any .rb files in it. Assume it&#39;s a part of a bigger framework."}], "answers": [{"tags": [], "owner": {"reputation": 177, "user_id": 1283963, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ppnPV.jpg?s=128&g=1", "display_name": "Elena", "link": "https://stackoverflow.com/users/1283963/elena"}, "is_accepted": true, "score": 0, "last_activity_date": 1459324739, "creation_date": 1459324739, "answer_id": 36302896, "question_id": 36300985, "link": "https://stackoverflow.com/questions/36300985/how-to-run-redvelvet-ruby-application-on-browser/36302896#36302896", "title": "how to run redvelvet (ruby application) on browser?", "body": "<p>Please pay attention to the Gemfile:</p>\n\n<p><code>gem 'headless'\ngem 'selenium-webdriver', '2.47.1'\ngem 'watir-webdriver'\ngem 'page-object'\ngem 'cucumber'\ngem 'rspec'\ngem 'rspec-expectations'\ngem 'rest-client'\ngem 'json'\ngem 'dotenv'</code></p>\n\n<p>This code doesn't have any web server bundled with it, so you can't run it in your web browser. </p>\n"}], "owner": {"reputation": 33, "user_id": 5836301, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh6.googleusercontent.com/-32aWQU4os9E/AAAAAAAAAAI/AAAAAAAAACg/PhVuhdvqPh4/photo.jpg?sz=128", "display_name": "Anand Kumar", "link": "https://stackoverflow.com/users/5836301/anand-kumar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "accepted_answer_id": 36302896, "answer_count": 1, "score": -1, "last_activity_date": 1459324739, "creation_date": 1459318185, "question_id": 36300985, "link": "https://stackoverflow.com/questions/36300985/how-to-run-redvelvet-ruby-application-on-browser", "title": "how to run redvelvet (ruby application) on browser?", "body": "<p>I am trying to find an offline form building application similar to typeform. On exploring I found 'Redvelvet' in typeform github repositiries written in ruby. I have downloaded the ZIP but I dont know how to run it on browser.\nKindly help.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 2032, "user_id": 1471938, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/0HGZz.jpg?s=128&g=1", "display_name": "d3bug3r", "link": "https://stackoverflow.com/users/1471938/d3bug3r"}, "edited": false, "score": 0, "creation_date": 1459317284, "post_id": 36300729, "comment_id": 60225718, "body": "@Albin in view? something like this <code>&lt;%= product.price_with_currency, :precision =&gt; 2 %&gt;</code> ?"}], "answers": [{"tags": [], "owner": {"reputation": 2634, "user_id": 1210949, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/vAL35.jpg?s=128&g=1", "display_name": "Albin", "link": "https://stackoverflow.com/users/1210949/albin"}, "is_accepted": true, "score": 1, "last_activity_date": 1459317300, "last_edit_date": 1495539907, "creation_date": 1459317300, "answer_id": 36300772, "question_id": 36300729, "link": "https://stackoverflow.com/questions/36300729/rails-currency-with-2-decimal/36300772#36300772", "title": "Rails currency with 2 decimal", "body": "<p>You could use a helper called: <code>number_with_precision</code></p>\n\n<p>it would look like this:</p>\n\n<pre><code>&lt;p class=\"price\"&gt;&lt;%= number_with_precision(product.price_with_currency, :precision =&gt; 2) %&gt;&lt;/p&gt;\n</code></pre>\n\n<p>read more here: <a href=\"https://stackoverflow.com/questions/7772859/rails-3-how-to-display-two-decimal-places-in-edit-form\">Rails 3. How to display two decimal places in edit form?</a></p>\n"}, {"tags": [], "owner": {"reputation": 161, "user_id": 4152214, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-h_4jkVLieiQ/AAAAAAAAAAI/AAAAAAAAABM/K4cPTLFffFQ/photo.jpg?sz=128", "display_name": "Jomar Gregorio", "link": "https://stackoverflow.com/users/4152214/jomar-gregorio"}, "is_accepted": false, "score": 0, "last_activity_date": 1459318565, "creation_date": 1459318565, "answer_id": 36301065, "question_id": 36300729, "link": "https://stackoverflow.com/questions/36300729/rails-currency-with-2-decimal/36301065#36301065", "title": "Rails currency with 2 decimal", "body": "<p>Try to use either the two:</p>\n\n<pre><code>&lt;p class=\"price\"&gt;&lt;%= number_with_precision(product.price_with_currency, precision: 2) %&gt;&lt;/p&gt;\n</code></pre>\n\n<p>OR</p>\n\n<pre><code>&lt;p class=\"price\"&gt;&lt;%= number_to_currency(product.price_with_currency, unit: \"USD\", precision: 2) %&gt;&lt;/p&gt;\n</code></pre>\n\n<p>if you want currency with it :D like this <code>USD 3,000.00</code> #if 3000</p>\n"}, {"tags": [], "owner": {"reputation": 3232, "user_id": 2689002, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/zIvab.jpg?s=128&g=1", "display_name": "Amit Sharma", "link": "https://stackoverflow.com/users/2689002/amit-sharma"}, "is_accepted": false, "score": 0, "last_activity_date": 1459318855, "creation_date": 1459318855, "answer_id": 36301158, "question_id": 36300729, "link": "https://stackoverflow.com/questions/36300729/rails-currency-with-2-decimal/36301158#36301158", "title": "Rails currency with 2 decimal", "body": "<p>You can also use <a href=\"http://apidock.com/rails/v4.2.1/ActionView/Helpers/NumberHelper/number_to_currency\" rel=\"nofollow\">number_to_currency</a> helper</p>\n\n<p>For eg.</p>\n\n<pre><code>&lt;%= number_to_currency(300, :unit =&gt; \"$ \", :separator =&gt; \".\", :delimiter =&gt; \",\") %&gt;\n\n## Output\n$ 300.00\n</code></pre>\n"}], "owner": {"reputation": 2032, "user_id": 1471938, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/0HGZz.jpg?s=128&g=1", "display_name": "d3bug3r", "link": "https://stackoverflow.com/users/1471938/d3bug3r"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 611, "favorite_count": 0, "accepted_answer_id": 36300772, "answer_count": 3, "score": -1, "last_activity_date": 1459318855, "creation_date": 1459317110, "last_edit_date": 1459318177, "question_id": 36300729, "link": "https://stackoverflow.com/questions/36300729/rails-currency-with-2-decimal", "title": "Rails currency with 2 decimal", "body": "<p>Following were my HomeController:</p>\n\n<pre><code>def index\n  @products = Product.public_active\n                     .order('random()')\n                     .limit(6)\n                     .includes(:product_attachments)\n                     .includes(:product_reviews)\n\n  @products.each do |product|\n    if product.currency != session[:currency]\n      if session[\"currency-convert-#{product.currency}\"].to_f == 0.0\n        rate = 1.0  \n      else\n        rate = session[\"currency-convert-#{session[:currency]}\"].to_f / \n               session[\"currency-convert-#{product.currency}\"].to_f\n      end\n    else\n      rate = 1.0\n    end\n\n    product.price_with_currency = 300.00\n    product.current_currency = session[:currency]\n  end\nend\n</code></pre>\n\n<p>And here is my View:</p>\n\n<pre><code>&lt;div id=\"product-list\"&gt;\n                &lt;div class=\"row\"&gt;\n&lt;p class=\"price\"&gt;&lt;%= product.price_with_currency %&gt;&lt;/p&gt;\n&lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>The issues is, <code>price_with_currency</code> output the result of <code>300.0</code> not <code>300.00</code>. Why it is so? Thanks!!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "heroku"], "answers": [{"tags": [], "owner": {"reputation": 1141, "user_id": 2362036, "user_type": "registered", "accept_rate": 32, "profile_image": "https://i.stack.imgur.com/SckMi.png?s=128&g=1", "display_name": "tekiegirl", "link": "https://stackoverflow.com/users/2362036/tekiegirl"}, "is_accepted": false, "score": 0, "last_activity_date": 1461061738, "creation_date": 1461061738, "answer_id": 36715721, "question_id": 36300628, "link": "https://stackoverflow.com/questions/36300628/heroic-login-heroku-cli-installing-core-plugins/36715721#36715721", "title": "heroic login - heroku-cli: Installing core plugins", "body": "<p>I had a similar error, when using Cloud9 for development. It seemed to have the Heroku CLI already installed, but still didn't work.</p>\n\n<p>I went to <a href=\"https://toolbelt.heroku.com/\" rel=\"nofollow\">https://toolbelt.heroku.com/</a> and followed the instructions for Linux to run</p>\n\n<blockquote>\n  <p>wget -O- <a href=\"https://toolbelt.heroku.com/install-ubuntu.sh\" rel=\"nofollow\">https://toolbelt.heroku.com/install-ubuntu.sh</a> | sh</p>\n</blockquote>\n\n<p>in the console. Once this had run I then tried <code>heroku login</code> again and it worked.</p>\n\n<p>Hope this helps.</p>\n"}], "owner": {"reputation": 3, "user_id": 4228102, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/12f2d034ae6a019708d821be1fa013db?s=128&d=identicon&r=PG&f=1", "display_name": "Dean Gergori\u0107", "link": "https://stackoverflow.com/users/4228102/dean-gergori%c4%87"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 222, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1461061738, "creation_date": 1459316749, "last_edit_date": 1592644375, "question_id": 36300628, "link": "https://stackoverflow.com/questions/36300628/heroic-login-heroku-cli-installing-core-plugins", "title": "heroic login - heroku-cli: Installing core plugins", "body": "<h1>heroic login - heroku-cli: Installing core plugins</h1>\n<p>I have a simple app trying to deploy on heroic account.\nThis is killing me! I can't make it to work.\nEvery time I rung heroku login Im getting this error.\nWhat I can do?</p>\n<pre><code>heroku-cli: Installing core plugins...\n \u25b8    npm ERR! error in /Users/deangergoric/.heroku/node_modules/heroku-local: ENOENT: no such file or directory, open '/Users/deangergoric/.heroku/node_modules/heroku-local/package.json'\n \u25b8    npm ERR! extraneous: heroku-cli-util /Users/deangergoric/.heroku/node_modules/heroku-local/node_modules/heroku-cli-util\n \u25b8    npm ERR! error in /Users/deangergoric/.heroku/node_modules/heroku-local/node_modules/heroku-cli-util: ENOENT: no such file or directory, open '/Users/deangergoric/.heroku/node_modules/heroku-local/node_modules/heroku-cli-util/package.json'\nheroku-cli: Installing core plugins (retrying)...\n \u25b8    Error installing package. \n \u25b8    npm WARN install:heroku-cli-util EACCES: permission denied, unlink '/Users/deangergoric/.heroku/node_modules/heroku-local/node_modules/heroku-cli-util/node_modules/cardinal/node_modules/.redeyed.MODULES/.bin/esparse'\n \u25b8    npm WARN ENOENT ENOENT: no such file or directory, open '/Users/deangergoric/.heroku/package.json'\n \u25b8    npm WARN EPACKAGEJSON .heroku No description\n \u25b8    npm WARN EPACKAGEJSON .heroku No repository field.\n \u25b8    npm WARN EPACKAGEJSON .heroku No README data\n \u25b8    npm WARN EPACKAGEJSON .heroku No license field.\n \u25b8    npm ERR! Darwin 15.3.0\n \u25b8    npm ERR! argv &quot;/Users/deangergoric/.heroku/node-v5.7.1-darwin-x64/bin/node&quot; &quot;/Users/deangergoric/.heroku/node-v5.7.1-darwin-x64/lib/node_modules/npm/cli.js&quot; &quot;install&quot; &quot;heroku-apps&quot; &quot;heroku-cli-addons&quot; &quot;heroku-fork&quot; &quot;heroku-git&quot; &quot;heroku-local&quot; &quot;heroku-orgs&quot; &quot;heroku-pipelines&quot; &quot;heroku-run&quot; &quot;heroku-spaces&quot; &quot;heroku-status&quot;\n \u25b8    npm ERR! node v5.7.1\n \u25b8    npm ERR! npm  v3.3.10\n \u25b8    npm ERR! path /Users/deangergoric/.heroku/node_modules/heroku-local/node_modules/heroku-cli-util/node_modules/cardinal/node_modules/.redeyed.MODULES/.bin/esparse\n \u25b8    npm ERR! code EACCES\n \u25b8    npm ERR! errno -13\n \u25b8    npm ERR! syscall unlink\n \u25b8    \n \u25b8    npm ERR! Error: EACCES: permission denied, unlink '/Users/deangergoric/.heroku/node_modules/heroku-local/node_modules/heroku-cli-util/node_modules/cardinal/node_modules/.redeyed.MODULES/.bin/esparse'\n \u25b8    npm ERR!     at Error (native)\n \u25b8    npm ERR!  { [Error: EACCES: permission denied, unlink '/Users/deangergoric/.heroku/node_modules/heroku-local/node_modules/heroku-cli-util/node_modules/cardinal/node_modules/.redeyed.MODULES/.bin/esparse']\n \u25b8    npm ERR!   errno: -13,\n \u25b8    npm ERR!   code: 'EACCES',\n \u25b8    npm ERR!   syscall: 'unlink',\n \u25b8    npm ERR!   path: '/Users/deangergoric/.heroku/node_modules/heroku-local/node_modules/heroku-cli-util/node_modules/cardinal/node_modules/.redeyed.MODULES/.bin/esparse' }\n \u25b8    npm ERR! \n \u25b8    npm ERR! Please try running this command again as root/Administrator.\n \u25b8    \n \u25b8    npm ERR! Please include the following file with any support request:\n \u25b8    npm ERR!     /Users/deangergoric/.heroku/npm-debug.log\n \u25b8    \n \u25b8    Try running again with GODE_DEBUG=info to see more output.\nheroku-cli: Installing core plugins...\n \u25b8    npm ERR! error in /Users/deangergoric/.heroku/node_modules/heroku-local: ENOENT: no such file or directory, open '/Users/deangergoric/.heroku/node_modules/heroku-local/package.json'\n \u25b8    npm ERR! extraneous: heroku-cli-util /Users/deangergoric/.heroku/node_modules/heroku-local/node_modules/heroku-cli-util\n \u25b8    npm ERR! error in /Users/deangergoric/.heroku/node_modules/heroku-local/node_modules/heroku-cli-util: ENOENT: no such file or directory, open '/Users/deangergoric/.heroku/node_modules/heroku-local/node_modules/heroku-cli-util/package.json'\nheroku-cli: Installing core plugins (retrying)...\n \u25b8    Error installing package. \n \u25b8    npm WARN install:heroku-cli-util EACCES: permission denied, unlink '/Users/deangergoric/.heroku/node_modules/heroku-local/node_modules/heroku-cli-util/node_modules/cardinal/node_modules/.redeyed.MODULES/.bin/esparse'\n \u25b8    npm WARN ENOENT ENOENT: no such file or directory, open '/Users/deangergoric/.heroku/package.json'\n \u25b8    npm WARN EPACKAGEJSON .heroku No description\n \u25b8    npm WARN EPACKAGEJSON .heroku No repository field.\n \u25b8    npm WARN EPACKAGEJSON .heroku No README data\n \u25b8    npm WARN EPACKAGEJSON .heroku No license field.\n \u25b8    npm ERR! Darwin 15.3.0\n \u25b8    npm ERR! argv &quot;/Users/deangergoric/.heroku/node-v5.7.1-darwin-x64/bin/node&quot; &quot;/Users/deangergoric/.heroku/node-v5.7.1-darwin-x64/lib/node_modules/npm/cli.js&quot; &quot;install&quot; &quot;heroku-apps&quot; &quot;heroku-cli-addons&quot; &quot;heroku-fork&quot; &quot;heroku-git&quot; &quot;heroku-local&quot; &quot;heroku-orgs&quot; &quot;heroku-pipelines&quot; &quot;heroku-run&quot; &quot;heroku-spaces&quot; &quot;heroku-status&quot;\n \u25b8    npm ERR! node v5.7.1\n \u25b8    npm ERR! npm  v3.3.10\n \u25b8    npm ERR! path /Users/deangergoric/.heroku/node_modules/heroku-local/node_modules/heroku-cli-util/node_modules/cardinal/node_modules/.redeyed.MODULES/.bin/esvalidate\n \u25b8    npm ERR! code EACCES\n \u25b8    npm ERR! errno -13\n \u25b8    npm ERR! syscall unlink\n \u25b8    \n \u25b8    npm ERR! Error: EACCES: permission denied, unlink '/Users/deangergoric/.heroku/node_modules/heroku-local/node_modules/heroku-cli-util/node_modules/cardinal/node_modules/.redeyed.MODULES/.bin/esvalidate'\n \u25b8    npm ERR!     at Error (native)\n \u25b8    npm ERR!  { [Error: EACCES: permission denied, unlink '/Users/deangergoric/.heroku/node_modules/heroku-local/node_modules/heroku-cli-util/node_modules/cardinal/node_modules/.redeyed.MODULES/.bin/esvalidate']\n \u25b8    npm ERR!   errno: -13,\n \u25b8    npm ERR!   code: 'EACCES',\n \u25b8    npm ERR!   syscall: 'unlink',\n \u25b8    npm ERR!   path: '/Users/deangergoric/.heroku/node_modules/heroku-local/node_modules/heroku-cli-util/node_modules/cardinal/node_modules/.redeyed.MODULES/.bin/esvalidate' }\n \u25b8    npm ERR! \n \u25b8    npm ERR! Please try running this command again as root/Administrator.\n \u25b8    \n \u25b8    npm ERR! Please include the following file with any support request:\n \u25b8    npm ERR!     /Users/deangergoric/.heroku/npm-debug.log\n \u25b8    \n \u25b8    Try running again with GODE_DEBUG=info to see more output.\n !    error getting commands pid 28024 exit 1\n</code></pre>\n"}, {"tags": ["ruby", "selenium-webdriver", "capybara"], "comments": [{"owner": {"reputation": 8244, "user_id": 234499, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/979d03a79a2a09793060a63e9b5099a7?s=128&d=identicon&r=PG", "display_name": "Alex Ntousias", "link": "https://stackoverflow.com/users/234499/alex-ntousias"}, "edited": false, "score": 0, "creation_date": 1488233572, "post_id": 36300259, "comment_id": 72132722, "body": "Any luck on this? Did you manage to figure out how to do it?"}], "answers": [{"tags": [], "owner": {"reputation": 3022, "user_id": 336392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c144b7e260029f00b1efb08fb29bb023?s=128&d=identicon&r=PG", "display_name": "Thomas R. Koll", "link": "https://stackoverflow.com/users/336392/thomas-r-koll"}, "is_accepted": false, "score": 0, "last_activity_date": 1459336389, "creation_date": 1459336389, "answer_id": 36307121, "question_id": 36300259, "link": "https://stackoverflow.com/questions/36300259/cancel-page-load-in-capybara/36307121#36307121", "title": "Cancel page load in Capybara", "body": "<p>Altnerative here, you could use <a href=\"https://github.com/oesmith/puffing-billy\" rel=\"nofollow\">puffing-billy</a> gem to stub that iframe request.</p>\n"}, {"tags": [], "owner": {"reputation": 766, "user_id": 1358187, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YDAbO.jpg?s=128&g=1", "display_name": "samjewell", "link": "https://stackoverflow.com/users/1358187/samjewell"}, "is_accepted": false, "score": 1, "last_activity_date": 1525847142, "creation_date": 1525847142, "answer_id": 50246778, "question_id": 36300259, "link": "https://stackoverflow.com/questions/36300259/cancel-page-load-in-capybara/50246778#50246778", "title": "Cancel page load in Capybara", "body": "<p>We were having problems with outstanding network requests (both Ajax and assets) at the end of our integration tests, when all the assertions had been met and the test was over and getting torn down.</p>\n\n<p>So we added <code>execute_script(\"window.stop();\")</code> to our integration_test_helper.rb file, in the teardown block, and it worked very well.</p>\n\n<p>So I'd suggest adding an assertion that can be met before your iframe is fully loaded, and running <code>window.stop()</code> in the teardown of the test.</p>\n"}], "owner": {"reputation": 383, "user_id": 1682026, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/nixfU.jpg?s=128&g=1", "display_name": "singularity", "link": "https://stackoverflow.com/users/1682026/singularity"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 454, "favorite_count": 1, "answer_count": 2, "score": 4, "last_activity_date": 1525847142, "creation_date": 1459314999, "last_edit_date": 1592644375, "question_id": 36300259, "link": "https://stackoverflow.com/questions/36300259/cancel-page-load-in-capybara", "title": "Cancel page load in Capybara", "body": "<p>I am testing a page which contains a pesky iframe which takes a long time to load; however, I'm not testing the iframe itself. If possible, I'd like to be able to run my tests without having to wait for this iframe each time.</p>\n<p>One of the following potential solutions should do the trick, but I'm having difficulty either finding documentation or getting any of them to work:</p>\n<blockquote>\n<p>a) Cancel the page load shortly after the request is placed.</p>\n<p>b) Simulate an <kbd>Escape</kbd> press <em>while</em> the page is loading using <code>send_keys</code> method.</p>\n<p>c) Use javascript - <code>page.execute_script(&quot;return window.stop();&quot;)</code> <em>while</em> the page is loading.</p>\n<p>d) Cancel loading of a specific element</p>\n</blockquote>\n<p>How would one send a cancellation request to a loading page or element using Capybara?</p>\n"}, {"tags": ["ruby", "enumerator"], "comments": [{"owner": {"reputation": 1, "user_id": 6132701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6280abd1327bc9f0398e8ad6b721885c?s=128&d=identicon&r=PG&f=1", "display_name": "Hawkins Entrekin", "link": "https://stackoverflow.com/users/6132701/hawkins-entrekin"}, "edited": false, "score": 0, "creation_date": 1461358866, "post_id": 36300020, "comment_id": 61180442, "body": "Thanks for the clear explanation Cary - I had tried looking at the documentation prior but was look at the Enumerator documentation, and I didn&#39;t realize it passed the #each method through to the class of the underlying object, String in this case"}], "answers": [{"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 0, "last_activity_date": 1459314371, "creation_date": 1459314371, "answer_id": 36300131, "question_id": 36300020, "link": "https://stackoverflow.com/questions/36300020/enumerator-changing-to-different-class/36300131#36300131", "title": "Enumerator changing to different class", "body": "<p><code>z.each</code> causes the method <a href=\"http://ruby-doc.org/core-2.1.5/Enumerator.html#method-i-each\" rel=\"nofollow\">Enumerator#each</a> to be sent to <code>z</code>. <code>Enumerator#each</code> obtains the class of <code>enum_for</code>'s receiver (<code>bottom_line</code>), which is <code>String</code>. It then looks to invoke the method <code>String#each</code>. It doesn't find such an instance method in the <code>String</code> class, so it raises the exception you obtained.</p>\n"}, {"comments": [{"owner": {"reputation": 633, "user_id": 5107759, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/33e659c0770221780a6fd21960909b6d?s=128&d=identicon&r=PG", "display_name": "joanbm", "link": "https://stackoverflow.com/users/5107759/joanbm"}, "edited": false, "score": 0, "creation_date": 1459319952, "post_id": 36300268, "comment_id": 60227044, "body": "upvoted for <i>looking at the documentation before asking</i> note"}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 2, "last_activity_date": 1459315034, "creation_date": 1459315034, "answer_id": 36300268, "question_id": 36300020, "link": "https://stackoverflow.com/questions/36300020/enumerator-changing-to-different-class/36300268#36300268", "title": "Enumerator changing to different class", "body": "<p>You might want to take a look at the documentation on <a href=\"http://ruby-doc.org/core-2.1.1/Object.html#method-i-enum_for\" rel=\"nofollow\"><code>Object#enum_for</code></a> before asking.</p>\n\n<p><code>Object#enum_for</code> accepts 1+ parameters: the method to be called when enumeration is actually invoked (defaults to <code>:each</code>) and the splatted arguments to be passed to that method.</p>\n\n<p>That said, </p>\n\n<pre><code>z = bottom_line.enum_for\n</code></pre>\n\n<p>is an absolute equivalent to:</p>\n\n<pre><code>z = bottom_line.enum_for(:each)\n</code></pre>\n\n<p>while the inlined version is </p>\n\n<pre><code>z = bottom_line.enum_for(:scan)\n</code></pre>\n\n<p>why would you expect them to behave the same way? To achieve the same functionality one might explicitly specify the method in the call to <code>enum_for</code>:</p>\n\n<pre><code>z = bottom_line.enum_for :scan\nz.each(/some_regexp/) { |item| puts item }\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 6132701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6280abd1327bc9f0398e8ad6b721885c?s=128&d=identicon&r=PG&f=1", "display_name": "Hawkins Entrekin", "link": "https://stackoverflow.com/users/6132701/hawkins-entrekin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1459315034, "creation_date": 1459313777, "last_edit_date": 1459314377, "question_id": 36300020, "link": "https://stackoverflow.com/questions/36300020/enumerator-changing-to-different-class", "title": "Enumerator changing to different class", "body": "<p>I have a string:</p>\n\n<pre><code>bottom_line = \"some text\"\n</code></pre>\n\n<p>When I create an enumerator from it with <code>enum_for</code>, and try to call <code>each</code> on it, I get an error:</p>\n\n<pre><code>z = bottom_line.enum_for\nz.each {|item| item.scan(/some_regex/)}\n# =&gt; undefined method `each' for #&lt;String:0x00000001f65350&gt;\n</code></pre>\n\n<p>What is going on here?</p>\n\n<p>When I chain <code>enum_for</code> with the method all in one line, it works:</p>\n\n<pre><code>z = bottom_line.enum_for(:scan, /some_regex/)\n</code></pre>\n"}, {"tags": ["ruby", "time"], "answers": [{"comments": [{"owner": {"reputation": 1485, "user_id": 5388516, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/96fff619864c3ebb7654eb98bd945b43?s=128&d=identicon&r=PG&f=1", "display_name": "13aal", "link": "https://stackoverflow.com/users/5388516/13aal"}, "edited": false, "score": 0, "creation_date": 1459313260, "post_id": 36299796, "comment_id": 60224046, "body": "That works but now when the time is less then 10 it only shows one number instead of a 01, 02, 03, etc.. Example: <code>[22:24:59] test</code> ;<code>[22:24:0] test</code> ;<code>[22:24:1] test</code>; <code>[22:24:2] test</code> ;<code>[22:24:3] test</code>"}, {"owner": {"reputation": 1485, "user_id": 5388516, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/96fff619864c3ebb7654eb98bd945b43?s=128&d=identicon&r=PG&f=1", "display_name": "13aal", "link": "https://stackoverflow.com/users/5388516/13aal"}, "edited": false, "score": 0, "creation_date": 1459314134, "post_id": 36299796, "comment_id": 60224382, "body": "So is there a way around that?"}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "reply_to_user": {"reputation": 1485, "user_id": 5388516, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/96fff619864c3ebb7654eb98bd945b43?s=128&d=identicon&r=PG&f=1", "display_name": "13aal", "link": "https://stackoverflow.com/users/5388516/13aal"}, "edited": false, "score": 0, "creation_date": 1459314614, "post_id": 36299796, "comment_id": 60224555, "body": "@13aal If you want to ask a different question, ask a new question."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1459314897, "post_id": 36299796, "comment_id": 60224666, "body": "Using sawa&#39;s redefinition of <code>warn</code>, write <code>5.times { warn(&quot;test&quot;); sleep 1 }</code>."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1459315217, "post_id": 36299796, "comment_id": 60224813, "body": "sawa, you haven&#39;t answered the question, which is stated in the last sentence."}], "tags": [], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "is_accepted": true, "score": 3, "last_activity_date": 1459318224, "last_edit_date": 1459318224, "creation_date": 1459312552, "answer_id": 36299796, "question_id": 36299705, "link": "https://stackoverflow.com/questions/36299705/keeping-time-now-accuarate/36299796#36299796", "title": "Keeping Time.now accuarate", "body": "<p>By generating the time each time.</p>\n\n<pre><code>def warn(input)\n  t = Time.now\n  puts \"[#{t.hour}:#{t.min}:#{t.sec}] #{input}\"\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 2, "last_activity_date": 1459315983, "creation_date": 1459315983, "answer_id": 36300459, "question_id": 36299705, "link": "https://stackoverflow.com/questions/36299705/keeping-time-now-accuarate/36300459#36300459", "title": "Keeping Time.now accuarate", "body": "<pre><code>def warn(input)\n  puts Time.now.strftime(\"[%H:%M:%S] #{input}\")\nend\n</code></pre>\n\n<p><a href=\"http://ruby-doc.org/core-2.3.0/Time.html#method-i-strftime\" rel=\"nofollow\"><code>Time#strftime</code></a>.</p>\n"}], "owner": {"reputation": 1485, "user_id": 5388516, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/96fff619864c3ebb7654eb98bd945b43?s=128&d=identicon&r=PG&f=1", "display_name": "13aal", "link": "https://stackoverflow.com/users/5388516/13aal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 34, "favorite_count": 0, "accepted_answer_id": 36299796, "answer_count": 2, "score": 0, "last_activity_date": 1459318224, "creation_date": 1459312051, "last_edit_date": 1459316153, "question_id": 36299705, "link": "https://stackoverflow.com/questions/36299705/keeping-time-now-accuarate", "title": "Keeping Time.now accuarate", "body": "<p>I have this script:</p>\n\n<pre><code>T = Time.now\n\ndef warn(input)\n  puts \"[#{T.hour}:#{T.min}:#{T.sec}] #{input}\"\nend\n</code></pre>\n\n<p>If I run this through a loop:</p>\n\n<pre><code>5.times do\n  warn(\"test\")\nend\n</code></pre>\n\n<p>it will output the following:</p>\n\n<pre><code>[22:24:49] test\n[22:24:49] test\n[22:24:49] test\n[22:24:49] test\n[22:24:49] test\n</code></pre>\n\n<p>I would like the time to be constantly updated, for example:</p>\n\n<pre><code>[22:24:49] test\n[22:24:50] test\n[22:24:51] test\n[22:24:52] test\n[22:24:53] test\n</code></pre>\n\n<p>How would I go about doing something like this?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1459314510, "post_id": 36299687, "comment_id": 60224518, "body": "I am not sure how this particular scaffold works, but the simplest solution would be to specify the default value for this not-null column: <code>t.string :question_text, null: false, default: &#39;&#39;</code>."}], "answers": [{"tags": [], "owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "is_accepted": true, "score": 1, "last_activity_date": 1459325008, "creation_date": 1459325008, "answer_id": 36302989, "question_id": 36299687, "link": "https://stackoverflow.com/questions/36299687/not-null-constraint-failed-after-generating-scaffold/36302989#36302989", "title": "&#39;NOT NULL constraint failed&#39; after generating Scaffold", "body": "<p>If you are using not-null as a form of validation than you would want to add a model validation which enforces this rule as well:</p>\n\n<pre><code>class Question &lt; ActiveRecord::Base\n  # ...\n  validates_presence_of :question_text\nend\n</code></pre>\n\n<p>This will prevent database driver level exceptions and provide user feedback.</p>\n\n<p>Since you ran the scaffold generator without any attributes I'm guessing that the params whitelist might be empty as well which would cause the above validation to fail since the input is never actually passed to the initializer.</p>\n\n<pre><code>class QuestionsController &lt; ApplicationController\n\n  def create\n    @question = Question.create(question_params)\n    # ...\n  end\n\n  private \n\n    def question_params\n      params.require(:question)\n            .permit(\n              :category_id, \n              :question_text\n              answers_attributes: [:foo, :bar, :baz]\n            )\n    end\nend\n</code></pre>\n"}], "owner": {"reputation": 542, "user_id": 1927604, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f35d9ed3f19ded110e123899c2a0f0ab?s=128&d=identicon&r=PG", "display_name": "darkginger", "link": "https://stackoverflow.com/users/1927604/darkginger"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 246, "favorite_count": 0, "accepted_answer_id": 36302989, "answer_count": 1, "score": 0, "last_activity_date": 1459353617, "creation_date": 1459311945, "last_edit_date": 1495542691, "question_id": 36299687, "link": "https://stackoverflow.com/questions/36299687/not-null-constraint-failed-after-generating-scaffold", "title": "&#39;NOT NULL constraint failed&#39; after generating Scaffold", "body": "<p>I am running into an error after generating a new scaffold for a table with an existing model: <code>NOT NULL constraint failed: questions.question_text</code>.</p>\n\n<p>This has <a href=\"https://stackoverflow.com/questions/14710551/sqlite3constraintexception-constraint-failed\">been covered before</a>, but I have not seen an answer for when there is a set null value, as I have done below. </p>\n\n<p>First, I had already generated a model/migration for this table entitled <code>Questions</code>, which looks like: </p>\n\n<p><strong>..._create_questions.rb</strong></p>\n\n<pre><code> class CreateQuestions &lt; ActiveRecord::Migration\n   def change\n     create_table :questions do |t|\n     t.belongs_to :category, index: true\n     t.string :question_text, :null =&gt; false\n\n     t.timestamps\n     end\n   end\n end\n</code></pre>\n\n<p>Notice here that I am specifying the <code>null =&gt; false</code>. To save some time, I ran a Scaffold command to allow me to enter data into <code>Questions</code> easily: </p>\n\n<pre><code> rails generate scaffold Questions --skip\n</code></pre>\n\n<p>After restarting the server, I am running into the error above. Since I am directly addressing the null value, I am unclear of why it triggers an error when I reach the <code>block in QuestionsController#create</code> (in other words, when I try to create a Question). </p>\n\n<p>In case it helps, here is my <strong>Question.rb</strong> model as well: </p>\n\n<pre><code>class Question &lt; ActiveRecord::Base\n\n   has_many :quiz_questions\n   has_many :quizzes, through: :quiz_questions\n   has_many :answers\n   belongs_to :category\n   accepts_nested_attributes_for :answers\n\n  end\n</code></pre>\n\n<p>What am I doing wrong? </p>\n"}, {"tags": ["javascript", "ruby-on-rails", "angularjs", "ruby", "slim-lang"], "comments": [{"owner": {"reputation": 6456, "user_id": 1904479, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/a9FcR.png?s=128&g=1", "display_name": "Kailas", "link": "https://stackoverflow.com/users/1904479/kailas"}, "edited": false, "score": 2, "creation_date": 1459312086, "post_id": 36299635, "comment_id": 60223652, "body": "Don&#39;t know if you could use ng-bind-html?"}, {"owner": {"reputation": 2140, "user_id": 1450389, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VYNKp.jpg?s=128&g=1", "display_name": "Serge Pedroza", "link": "https://stackoverflow.com/users/1450389/serge-pedroza"}, "reply_to_user": {"reputation": 6456, "user_id": 1904479, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/a9FcR.png?s=128&g=1", "display_name": "Kailas", "link": "https://stackoverflow.com/users/1904479/kailas"}, "edited": false, "score": 0, "creation_date": 1459312206, "post_id": 36299635, "comment_id": 60223688, "body": "ng-bind-html? @Kailas I am not familiar with what you are suggesting. fairly new to this..."}, {"owner": {"reputation": 6456, "user_id": 1904479, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/a9FcR.png?s=128&g=1", "display_name": "Kailas", "link": "https://stackoverflow.com/users/1904479/kailas"}, "edited": false, "score": 2, "creation_date": 1459312588, "post_id": 36299635, "comment_id": 60223811, "body": "Are you using angular 2? And is it html view?"}, {"owner": {"reputation": 2140, "user_id": 1450389, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VYNKp.jpg?s=128&g=1", "display_name": "Serge Pedroza", "link": "https://stackoverflow.com/users/1450389/serge-pedroza"}, "reply_to_user": {"reputation": 6456, "user_id": 1904479, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/a9FcR.png?s=128&g=1", "display_name": "Kailas", "link": "https://stackoverflow.com/users/1904479/kailas"}, "edited": false, "score": 0, "creation_date": 1459370454, "post_id": 36299635, "comment_id": 60261879, "body": "@Kailas i got it working with a string, just having a hard time doing it from an array. any ideas?"}], "answers": [{"comments": [{"owner": {"reputation": 2140, "user_id": 1450389, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VYNKp.jpg?s=128&g=1", "display_name": "Serge Pedroza", "link": "https://stackoverflow.com/users/1450389/serge-pedroza"}, "edited": false, "score": 0, "creation_date": 1459368826, "post_id": 36302673, "comment_id": 60260944, "body": "i&#39;ve updated my code and got it working when its a simple string, would you know how I can fix it to work with an array?"}, {"owner": {"reputation": 106, "user_id": 4412919, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/188ea7e8a9f2540971c8e71f4d851800?s=128&d=identicon&r=PG&f=1", "display_name": "zilvinas", "link": "https://stackoverflow.com/users/4412919/zilvinas"}, "reply_to_user": {"reputation": 2140, "user_id": 1450389, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VYNKp.jpg?s=128&g=1", "display_name": "Serge Pedroza", "link": "https://stackoverflow.com/users/1450389/serge-pedroza"}, "edited": false, "score": 1, "creation_date": 1459371922, "post_id": 36302673, "comment_id": 60262730, "body": "You could map each string in that array the way you did with the simple string. Something like this:  <code>$scope.stepQuestions = $scope.stepQuestions.map (item) -&gt; $sce.trustAsHtml(item)</code>"}, {"owner": {"reputation": 2140, "user_id": 1450389, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VYNKp.jpg?s=128&g=1", "display_name": "Serge Pedroza", "link": "https://stackoverflow.com/users/1450389/serge-pedroza"}, "edited": false, "score": 0, "creation_date": 1459373992, "post_id": 36302673, "comment_id": 60263794, "body": "how would that work with my view? Does that stay the same, because its not working and the tags still show up..."}, {"owner": {"reputation": 106, "user_id": 4412919, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/188ea7e8a9f2540971c8e71f4d851800?s=128&d=identicon&r=PG&f=1", "display_name": "zilvinas", "link": "https://stackoverflow.com/users/4412919/zilvinas"}, "reply_to_user": {"reputation": 2140, "user_id": 1450389, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VYNKp.jpg?s=128&g=1", "display_name": "Serge Pedroza", "link": "https://stackoverflow.com/users/1450389/serge-pedroza"}, "edited": false, "score": 1, "creation_date": 1459374798, "post_id": 36302673, "comment_id": 60264138, "body": "Have you tried putting it inside the brackets? You can even put it like this: <code>...Persona owns this Game?&#39;].map (item) -&gt; $sce.trustAsHtml(item) </code>"}, {"owner": {"reputation": 2140, "user_id": 1450389, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VYNKp.jpg?s=128&g=1", "display_name": "Serge Pedroza", "link": "https://stackoverflow.com/users/1450389/serge-pedroza"}, "edited": false, "score": 0, "creation_date": 1459376299, "post_id": 36302673, "comment_id": 60264788, "body": "yea i&#39;ve tried adding that to the end as you suggested. not sure what it could be, but its not working either. everything prints on the view, but the tags are still present on the array value"}, {"owner": {"reputation": 106, "user_id": 4412919, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/188ea7e8a9f2540971c8e71f4d851800?s=128&d=identicon&r=PG&f=1", "display_name": "zilvinas", "link": "https://stackoverflow.com/users/4412919/zilvinas"}, "reply_to_user": {"reputation": 2140, "user_id": 1450389, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VYNKp.jpg?s=128&g=1", "display_name": "Serge Pedroza", "link": "https://stackoverflow.com/users/1450389/serge-pedroza"}, "edited": false, "score": 1, "creation_date": 1459376855, "post_id": 36302673, "comment_id": 60264997, "body": "I am not sure... In the documentation it is written: <code>&lt;p ng-bind-html=&quot;myHTML&quot;&gt;&lt;&#47;p&gt;</code> where myHTML is a scope variable. So in your view you should try to achieve the same result. Your tag must contain a variable&#39;s you want to bind name. Maybe even this could work: <code>&lt;p ng-bind-html=&quot;stepQuestions[0]&quot;&gt;&lt;&#47;p&gt;</code>. I cannot test it right now so I am just brainstorming. I hope you will find something helpful here."}, {"owner": {"reputation": 2140, "user_id": 1450389, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VYNKp.jpg?s=128&g=1", "display_name": "Serge Pedroza", "link": "https://stackoverflow.com/users/1450389/serge-pedroza"}, "edited": false, "score": 0, "creation_date": 1459377277, "post_id": 36302673, "comment_id": 60265162, "body": "OMG! thank you. adding stepQuestions[VALUE] did it for me. Thanks so much for your help."}, {"owner": {"reputation": 106, "user_id": 4412919, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/188ea7e8a9f2540971c8e71f4d851800?s=128&d=identicon&r=PG&f=1", "display_name": "zilvinas", "link": "https://stackoverflow.com/users/4412919/zilvinas"}, "reply_to_user": {"reputation": 2140, "user_id": 1450389, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VYNKp.jpg?s=128&g=1", "display_name": "Serge Pedroza", "link": "https://stackoverflow.com/users/1450389/serge-pedroza"}, "edited": false, "score": 1, "creation_date": 1459377417, "post_id": 36302673, "comment_id": 60265222, "body": "Gal to help! Now you might even be able to clean up your code and get rid of any unnecessary iterations (like map and so on). The clue was in the view which I did not notice at first. Good luck."}], "tags": [], "owner": {"reputation": 106, "user_id": 4412919, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/188ea7e8a9f2540971c8e71f4d851800?s=128&d=identicon&r=PG&f=1", "display_name": "zilvinas", "link": "https://stackoverflow.com/users/4412919/zilvinas"}, "is_accepted": true, "score": 1, "last_activity_date": 1459324032, "last_edit_date": 1495540786, "creation_date": 1459324032, "answer_id": 36302673, "question_id": 36299635, "link": "https://stackoverflow.com/questions/36299635/apply-strong-tags-to-a-string-in-my-js-coffee-file/36302673#36302673", "title": "Apply &lt;strong&gt; tags to a string in my js.coffee file", "body": "<p>Please try:\n<a href=\"https://stackoverflow.com/questions/17289448/angularjs-to-output-plain-text-instead-of-html\">angularjs to output plain text instead of html</a> (similar issue)\nor <a href=\"https://docs.angularjs.org/api/ng/directive/ngBindHtml\" rel=\"nofollow noreferrer\">https://docs.angularjs.org/api/ng/directive/ngBindHtml</a></p>\n"}], "owner": {"reputation": 2140, "user_id": 1450389, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VYNKp.jpg?s=128&g=1", "display_name": "Serge Pedroza", "link": "https://stackoverflow.com/users/1450389/serge-pedroza"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 426, "favorite_count": 2, "accepted_answer_id": 36302673, "answer_count": 1, "score": 1, "last_activity_date": 1459373928, "creation_date": 1459311625, "last_edit_date": 1459373928, "question_id": 36299635, "link": "https://stackoverflow.com/questions/36299635/apply-strong-tags-to-a-string-in-my-js-coffee-file", "title": "Apply &lt;strong&gt; tags to a string in my js.coffee file", "body": "<p>I am currently using Angular and Slim in my Ruby On Rails Project. I have an array of questions in my js.coffee that are currently being rendered in my view. </p>\n\n<p>One of the strings in the array has strong tags, but it is not being displayed properly in my html. </p>\n\n<p>Instead of getting <strong>Standard</strong>, I get this...</p>\n\n<pre><code>On which Playfield is the &lt;strong&gt;Standard&lt;/strong&gt; game played ?\n</code></pre>\n\n<p>I am fairly new to angular, what am I missing?</p>\n\n<p><strong>JAVASCRIPT</strong></p>\n\n<pre><code>game_create_ctrl.js.coffee\n\nangular.module('OombangularApp').controller 'GameCreateCtrl', [\n  '$scope', '$sce', '$uibModal', 'Game', 'GameFormat', 'PlayfieldType', 'Persona',\n  ($scope, $sce, $uibModal, Game, GameFormat, PlayfieldType, Persona) -&gt;\n\n    $scope.step = 1\n\n    ###This works...when it is not an Array\n    $scope.html = \"On which Playfield is the \" + \"&lt;strong&gt;Standard&lt;/strong&gt;\" + \" game played ?\"\n    $scope.stepQuestion = $sce.trustAsHtml($scope.html)        \n\n    ###How do I show the &lt;strong&gt; tags in my view when its an array?\n\n    $scope.stepQuestions = ['What should this Game be called?', 'What should this Game be called?',\n                        'What category does this Game belong to?',\n                        'On which Playfield is the &lt;strong&gt;Standard&lt;/strong&gt; game played ?',\n                        'What is the Player Configuration?', 'How is a &lt;strong&gt;Standard&lt;/strong&gt; game won?', 'Which Persona owns this Game?']\n\n]\n\n    $scope.stepQuestions = $scope.stepQuestions.map (item) -&gt; $sce.trustAsHtml(item)\n</code></pre>\n\n<p><strong>VIEWS</strong></p>\n\n<pre><code>new.html.slim\n\nform[name='gameCreateForm' ng-controller='GameCreateCtrl']\n\n    ###This Works\n    .question ng-bind-html=\"stepQuestion\"{{ stepQuestion }}\n\n    ###This doesnt\n    .question ng-bind-html=\"stepQuestions\"{{ stepQuestions[step - 1] }}\n</code></pre>\n"}, {"tags": ["ruby", "pattern-matching", "range"], "comments": [{"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1459311534, "post_id": 36299588, "comment_id": 60223470, "body": "What problem are you trying to solve? Where are you using this pattern?"}, {"owner": {"reputation": 1, "user_id": 5713602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15da5014b1f0065c0773645f2f436eeb?s=128&d=identicon&r=PG&f=1", "display_name": "Alexey918331", "link": "https://stackoverflow.com/users/5713602/alexey918331"}, "reply_to_user": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1459311727, "post_id": 36299588, "comment_id": 60223533, "body": "I need to use these patterns in some 3rd party software. It&#39;s a closed enterprise software, which accepts only this kind of data."}, {"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1459311996, "post_id": 36299588, "comment_id": 60223621, "body": "You&#39;re trying to solve the <a href=\"https://en.m.wikipedia.org/wiki/Longest_common_substring_problem\" rel=\"nofollow noreferrer\">longest common substring problem</a>, although your problem is constrained to substrings that are at the start of each string. Here&#39;s a good place to start: <a href=\"http://stackoverflow.com/questions/2158313/finding-common-string-in-array-of-strings-ruby\" title=\"finding common string in array of strings ruby\">stackoverflow.com/questions/2158313/&hellip;</a>"}, {"owner": {"reputation": 1, "user_id": 5713602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15da5014b1f0065c0773645f2f436eeb?s=128&d=identicon&r=PG&f=1", "display_name": "Alexey918331", "link": "https://stackoverflow.com/users/5713602/alexey918331"}, "reply_to_user": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1459313154, "post_id": 36299588, "comment_id": 60224002, "body": "Okay, thanks for help."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1459313555, "post_id": 36299588, "comment_id": 60224156, "body": "I&#39;m glad you found it useful, but next time consider waiting longer before accepting a solution. There may be others still working on answers and, in general, an early acceptance may discourage other, possibly better,  possibly just interesting, solutions. (Also, it is not unusual for an accepted answer to be shown to be incorrect.) Many here wait at least a couple of hours before accepting an answer. The point is, there&#39;s no rush. I know many who are new to SO haven&#39;t thought about this."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 5713602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15da5014b1f0065c0773645f2f436eeb?s=128&d=identicon&r=PG&f=1", "display_name": "Alexey918331", "link": "https://stackoverflow.com/users/5713602/alexey918331"}, "edited": false, "score": 0, "creation_date": 1459315094, "post_id": 36299753, "comment_id": 60224749, "body": "It seems, I found a problem:  <code>9044668619..9044668671 [&quot;904466861*&quot;, &quot;904466862*&quot;, &quot;904466863*&quot;, &quot;904466864*&quot;, &quot;904466865*&quot;, &quot;904466866*&quot;, &quot;904466867*&quot;]</code>  Trying to figure out, how to overcome this."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 1, "user_id": 5713602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15da5014b1f0065c0773645f2f436eeb?s=128&d=identicon&r=PG&f=1", "display_name": "Alexey918331", "link": "https://stackoverflow.com/users/5713602/alexey918331"}, "edited": false, "score": 0, "creation_date": 1459315406, "post_id": 36299753, "comment_id": 60224877, "body": "@Alexey918331, why is that not correct? What should be the return value?"}, {"owner": {"reputation": 1, "user_id": 5713602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15da5014b1f0065c0773645f2f436eeb?s=128&d=identicon&r=PG&f=1", "display_name": "Alexey918331", "link": "https://stackoverflow.com/users/5713602/alexey918331"}, "edited": false, "score": 0, "creation_date": 1459315558, "post_id": 36299753, "comment_id": 60224931, "body": "Also, I think it needs <code>return &quot;#{b}*&quot; if b == e</code>"}, {"owner": {"reputation": 1, "user_id": 5713602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15da5014b1f0065c0773645f2f436eeb?s=128&d=identicon&r=PG&f=1", "display_name": "Alexey918331", "link": "https://stackoverflow.com/users/5713602/alexey918331"}, "edited": false, "score": 0, "creation_date": 1459315741, "post_id": 36299753, "comment_id": 60225014, "body": "In that case return must be: <code>[&quot;9044668619*&quot;, &quot;904466862*&quot;, &quot;904466863*&quot;, &quot;904466864*&quot;, &quot;904466865*&quot;, &quot;904466866*&quot;, &quot;9044668670*&quot;, &quot;9044668671*&quot;]</code>"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 1, "user_id": 5713602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15da5014b1f0065c0773645f2f436eeb?s=128&d=identicon&r=PG&f=1", "display_name": "Alexey918331", "link": "https://stackoverflow.com/users/5713602/alexey918331"}, "edited": false, "score": 0, "creation_date": 1459316489, "post_id": 36299753, "comment_id": 60225323, "body": "Unfortunately, the rule that produces that result (which I&#39;ve deciphered) cannot be deduced from the three examples you gave. I&#39;ll have a look at that in the morning. In the meantime, try to modify my code to obtain the result you want (but please don&#39;t edit my answer :-)). It would be a good exercise. Note I dealt with the <code>b==e</code> case. Thanks for mentioning that."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 1, "user_id": 5713602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15da5014b1f0065c0773645f2f436eeb?s=128&d=identicon&r=PG&f=1", "display_name": "Alexey918331", "link": "https://stackoverflow.com/users/5713602/alexey918331"}, "edited": false, "score": 0, "creation_date": 1459399744, "post_id": 36299753, "comment_id": 60271505, "body": "When you edit your question and the edit conflicts with one or more answers already given (here by adding more examples), you should indicate it&#39;s an edit. If you do not do so readers may conclude that an answer is incorrect--possibly even downvote it--not realizing that it was was correct for the initial question."}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 1, "last_activity_date": 1459315946, "last_edit_date": 1459315946, "creation_date": 1459312320, "answer_id": 36299753, "question_id": 36299588, "link": "https://stackoverflow.com/questions/36299588/convert-range-to-pattern/36299753#36299753", "title": "Convert range to pattern", "body": "<pre><code>def doit(range)    \n  b, e = range.begin.to_s, range.end.to_s\n  idx = b.chars.zip(e.chars).index { |a,b| a!=b }\n  return \"#{b}*\" if idx.nil?\n  (b[idx]..e[idx]).map { |c| b[0,idx] + c + '*' }\nend\n\ndoit(5710000..5716999)\n  #=&gt; [\"5710*\", \"5711*\", \"5712*\", \"5713*\", \"5714*\", \"5715*\", \"5716*\"] \n\ndoit(5003070..5003089)\n  #=&gt; [\"500307*\", \"500308*\"] \n\ndoit(7238908..7238909)\n  #=&gt; [\"7238908*\", \"7238909*\"]\n\ndoit(123..123)\n  #=&gt; \"123*\"\n</code></pre>\n\n<p>The steps are as follows.</p>\n\n<pre><code>range = 5003070..5003089\n\nb, e = range.begin.to_s, range.end.to_s\n  #=&gt; [\"5003070\", \"5003089\"] \nb #=&gt; \"5003070\" \ne #=&gt; \"5003089\" \nab = b.chars\n  #=&gt; [\"5\", \"0\", \"0\", \"3\", \"0\", \"7\", \"0\"] \nae = e.chars\n  #=&gt; [\"5\", \"0\", \"0\", \"3\", \"0\", \"8\", \"9\"] \nc = ab.zip(ae)\n  #=&gt; [[\"5\", \"5\"], [\"0\", \"0\"], [\"0\", \"0\"], [\"3\", \"3\"],\n  #    [\"0\", \"0\"], [\"7\", \"8\"], [\"0\", \"9\"]] \nidx = c.index { |a,b| a!=b }\n  #=&gt; 5\nreturn \"#{b}*\" if idx.nil?\n  #=&gt; return \"5003070*\" if 5.nil?\nr = b[idx]..e[idx]\n  #=&gt; \"7\"..\"8\" \nr.map { |c| b[0,idx] + c + '*' }\n  #=&gt; [\"500307*\", \"500308*\"] \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 5713602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15da5014b1f0065c0773645f2f436eeb?s=128&d=identicon&r=PG&f=1", "display_name": "Alexey918331", "link": "https://stackoverflow.com/users/5713602/alexey918331"}, "is_accepted": true, "score": 0, "last_activity_date": 1459748723, "creation_date": 1459748723, "answer_id": 36395291, "question_id": 36299588, "link": "https://stackoverflow.com/questions/36299588/convert-range-to-pattern/36395291#36395291", "title": "Convert range to pattern", "body": "<p>It seems, I figured out how to make such converting using <code>group_by</code> method on the full range. I suppose, this algorithm kinda slow and inefficient, but it's very straightforward and works fine, so I'll stick to it.</p>\n\n<pre><code>def range_to_pattern(range)\n  values = range.to_a\n  while values.group_by{ |x| x.to_s[0...-1] }.any? { |_, v| v.size == 10 }\n    patterns = []\n    values.group_by{ |x| x.to_s[0...-1] }.each_pair{ |k, v| v.size == 10 ? patterns &lt;&lt; k.to_i : patterns += v }\n    values = patterns\n  end\n  values\nend\n</code></pre>\n\n<p>Results:</p>\n\n<pre><code>irb(main):072:0&gt; range_to_pattern(5710000..5716999)\n=&gt; [5710, 5711, 5712, 5713, 5714, 5715, 5716]\n\nirb(main):073:0&gt; range_to_pattern(5003070..5003089)\n=&gt; [500307, 500308]\n\nirb(main):074:0&gt; range_to_pattern(7238908..7238909)\n=&gt; [7238908, 7238909]\n\nirb(main):075:0&gt; range_to_pattern(1668659..1668671)\n=&gt; [1668659, 166866, 1668670, 1668671]\n\nirb(main):076:0&gt; range_to_pattern(9505334305..9505334472)\n=&gt; [9505334305, 9505334306, 9505334307, 9505334308, 9505334309, 950533431, 950533432, 950533433, 950533434, 950533435, 950533436, 950533437, 950533438, 950533439, 950533440, 950533441, 950533442, 950533443, 950533444, 950533445, 950533446, 9505334470, 9505334471, 9505334472]\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 5713602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15da5014b1f0065c0773645f2f436eeb?s=128&d=identicon&r=PG&f=1", "display_name": "Alexey918331", "link": "https://stackoverflow.com/users/5713602/alexey918331"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "accepted_answer_id": 36395291, "answer_count": 2, "score": -1, "last_activity_date": 1459748723, "creation_date": 1459311332, "last_edit_date": 1459748676, "question_id": 36299588, "link": "https://stackoverflow.com/questions/36299588/convert-range-to-pattern", "title": "Convert range to pattern", "body": "<p>I have several ranges of numbers and I wonder if there are any algorithms to convert these ranges to patterns, like this:</p>\n\n<pre><code>Range:    5710000-5716999\nPatterns: 5710*, 5711*, 5712*, 5713*, 5714*, 5715*, 5716*\n\nRange:    5003070-5003089\nPatterns: 500307*, 500308*\n\nRange:    7238908-7238909\nPatterns: 7238908*, 7238909*\n</code></pre>\n\n<p>I'm using Ruby, if it matters.</p>\n\n<p><strong>UPDATE 1:</strong></p>\n\n<p>More examples:</p>\n\n<pre><code>Range:    1668659-1668671\nPatterns: 1668659*, 166866*, 1668670*, 1668671*\n\nRange:    9505334305-9505334472\nPatterns: 9505334305*, 9505334306*, 9505334307*, 9505334308*, 9505334309*, 950533431*, 950533432*, ..., 950533446*, 9505334470*, 9505334471*, 9505334472*\n</code></pre>\n"}, {"tags": ["ruby", "super"], "answers": [{"tags": [], "owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "is_accepted": true, "score": 2, "last_activity_date": 1459349754, "last_edit_date": 1459349754, "creation_date": 1459313673, "answer_id": 36299995, "question_id": 36299445, "link": "https://stackoverflow.com/questions/36299445/how-does-serializable-hash-super-gets-the-options-defined-in-my-overridden-metho/36299995#36299995", "title": "How does serializable_hash super gets the options defined in my overridden method?", "body": "<p>From the (rather old) <a href=\"http://docs.ruby-doc.com/docs/ProgrammingRuby/html/tut_classes.html#S1\" rel=\"nofollow\">pickaxe book (AKA Programming Ruby)</a>:</p>\n\n<blockquote>\n  <p>When you invoke <code>super</code> with no arguments, Ruby sends a message to the current object's parent, asking it to invoke a method of the same name as the current method, and passing it the parameters that were passed to the current method.</p>\n</blockquote>\n\n<p>So given this:</p>\n\n<pre><code>class C\n  def m(x)\n    puts x\n  end\nend\nclass D &lt; C\n  def m(x)\n    super\n  end\nend\nD.new.m(6)\n</code></pre>\n\n<p>you'll see <code>6</code> because the <code>x</code> argument to <code>D#m</code> is implicit in the <code>super</code> when you don't supply any explicit arguments for the parent version of <code>m</code>.</p>\n\n<p>Add an argument to the <code>MyTest#my_module_method</code> definition and you'll see something.</p>\n"}], "owner": {"reputation": 18326, "user_id": 286204, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/07c0dcf1387747d4d6eec63510774bf6?s=128&d=identicon&r=PG", "display_name": "Ranhiru Jude Cooray", "link": "https://stackoverflow.com/users/286204/ranhiru-jude-cooray"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 218, "favorite_count": 0, "accepted_answer_id": 36299995, "answer_count": 1, "score": 0, "last_activity_date": 1459349754, "creation_date": 1459310476, "last_edit_date": 1459313688, "question_id": 36299445, "link": "https://stackoverflow.com/questions/36299445/how-does-serializable-hash-super-gets-the-options-defined-in-my-overridden-metho", "title": "How does serializable_hash super gets the options defined in my overridden method?", "body": "<p>In an active record model, we are overriding the <code>serializable_hash</code> method and calling <code>super options</code> after setting the options accordingly to our needs.</p>\n\n<p>Generally we do:</p>\n\n<pre><code>def serializable_hash options=nil\n    options ||= {\n      only: [\n        :id,\n        :special_instructions\n      ],\n      include: { images: nil },\n      methods: [:catalog_item_name, ]\n    }\n    super options\n  end\n</code></pre>\n\n<p>But in one of the models, accidentally, we were <strong>not</strong> passing <code>options</code> explicitly to the super method. Nevertheless, it appears to be working just as if we were passing the options.</p>\n\n<p>After reading the <a href=\"https://github.com/rails/rails/blob/3-2-stable/activemodel/lib/active_model/serialization.rb#L71\" rel=\"nofollow\">serializable_hash source code</a> we can't seem to find any reason for options to be initialized properly in the super method.</p>\n\n<p>Any hints on how this is happening?</p>\n\n<p>Naturally, trying to reproduce the structure in a ruby script does not seem to make it happen the same way.\nHere is what we've written to try it out:</p>\n\n<pre><code>module MyModule\n  def my_module_method options=nil\n    options ||= { test: 'Test' }\n  end\nend\n\nclass MyTest\n  include MyModule\n\n  def my_module_method\n    options = { bingo: 'Bingo!' }\n    super\n  end\nend\n\nputs MyTest.new.my_module_method\n</code></pre>\n\n<p>This will print <code>{ test: 'Test' }</code> and if we pass the options (<code>super options</code>), will print <code>{ bingo: 'Bingo!' }</code> (as we would expect)</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "regex", "validation", "ruby-on-rails-4"], "answers": [{"comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 1, "creation_date": 1459316256, "post_id": 36300369, "comment_id": 60225231, "body": "The latter is more explicit, IMHO."}, {"owner": {"reputation": 14087, "user_id": 1544012, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbaed9ca8e4320fd64d1989c0e0f488b?s=128&d=identicon&r=PG", "display_name": "BoraMa", "link": "https://stackoverflow.com/users/1544012/borama"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1459316730, "post_id": 36300369, "comment_id": 60225444, "body": "I agree, OTOH I find the former option more easily readable (easier to spot on first glance)."}, {"owner": {"reputation": 1675, "user_id": 3234020, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/82171ee5bc1b2139a9834c92ce52b4c7?s=128&d=identicon&r=PG&f=1", "display_name": "Rob", "link": "https://stackoverflow.com/users/3234020/rob"}, "edited": false, "score": 0, "creation_date": 1459318562, "post_id": 36300369, "comment_id": 60226300, "body": "Can I add both allow nil and allow blank?"}, {"owner": {"reputation": 14087, "user_id": 1544012, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbaed9ca8e4320fd64d1989c0e0f488b?s=128&d=identicon&r=PG", "display_name": "BoraMa", "link": "https://stackoverflow.com/users/1544012/borama"}, "edited": false, "score": 0, "creation_date": 1459319054, "post_id": 36300369, "comment_id": 60226567, "body": "Technically yes, but it makes no sense - <code>blank?</code> includes <code>nil?</code> because <code>nil.blank?</code> is <code>true</code>. So <code>allow_blank</code> should suffice in your case, if all you want is to allow blank strings. Sorry, I updated the answer so that it does not lead to this confusion."}], "tags": [], "owner": {"reputation": 14087, "user_id": 1544012, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbaed9ca8e4320fd64d1989c0e0f488b?s=128&d=identicon&r=PG", "display_name": "BoraMa", "link": "https://stackoverflow.com/users/1544012/borama"}, "is_accepted": true, "score": 2, "last_activity_date": 1459319101, "last_edit_date": 1459319101, "creation_date": 1459315546, "answer_id": 36300369, "question_id": 36299230, "link": "https://stackoverflow.com/questions/36299230/format-validation-regex-on-model-is-triggered-if-the-value-is-blank-when-it-shou/36300369#36300369", "title": "Format validation regex on model is triggered if the value is blank when it shouldnt", "body": "<p>You simply need to add the <code>allow_blank</code> option, otherwise your regexp indeed will not match and the format validation will fail. See the <a href=\"http://guides.rubyonrails.org/active_record_validations.html#common-validation-options\" rel=\"nofollow\">rails guides</a> for validation options common to all validations.</p>\n\n<p>So, the following should work:</p>\n\n<pre><code>validates :key, length: { maximum: 255 },\n                exclusion: { in: %w( create edit new update ), message: \"%{value} cant be taken.\" },\n                format: { with: /\\A[a-zA-Z0-9_-]+\\z/, \n                          allow_blank: true,\n                          message: \"only allows letters, numbers and '-'\" }\n</code></pre>\n\n<p>Another possibility is to change the regexp to optional characters (with <code>*</code> instead of <code>+</code>), like this:</p>\n\n<pre><code> ...\n with: /\\A[a-zA-Z0-9_-]*\\z/ ,\n ...\n</code></pre>\n"}], "owner": {"reputation": 1675, "user_id": 3234020, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/82171ee5bc1b2139a9834c92ce52b4c7?s=128&d=identicon&r=PG&f=1", "display_name": "Rob", "link": "https://stackoverflow.com/users/3234020/rob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 33, "favorite_count": 0, "accepted_answer_id": 36300369, "answer_count": 1, "score": 0, "last_activity_date": 1459319101, "creation_date": 1459309183, "question_id": 36299230, "link": "https://stackoverflow.com/questions/36299230/format-validation-regex-on-model-is-triggered-if-the-value-is-blank-when-it-shou", "title": "Format validation regex on model is triggered if the value is blank when it shouldnt", "body": "<p>I have a fairly simple form.</p>\n\n<pre><code>&lt;%= form_for([@category_item_value], url: create_category_item_value_path(key_id: item_key.id), method: :post) do |f| %&gt;\n        &lt;%= render 'shared/error_messages', object: f.object %&gt;\n      &lt;%= f.label :stat %&gt; \n      &lt;%= f.text_field :value, :value =&gt; item_key.value %&gt;\n      &lt;%= f.hidden_field :key_type, :value =&gt; 'item-edit-request' %&gt;\n      &lt;%= f.submit \"Submit\" %&gt;\n</code></pre>\n\n<p>With this model </p>\n\n<pre><code> validates :key, length: { maximum: 255 },\n  exclusion: { in: %w( create edit new update ), message: \"%{value} cant be taken.\" },\n format: { with: /\\A[a-zA-Z0-9_-]+\\z/, message: \"only allows letters, numbers and '-'\" }\n\n\n validates :value, length: { maximum: 65000 }\n</code></pre>\n\n<p>When I submit the form the <code>key</code> value is left blank or nil in the DB because it is added in later. Problem is that I cant submit the form because the format validation on key stops me with the error message \"only allows letters, numbers and '-'\". </p>\n\n<p>Why does it do this, I dont have a <code>presence: :true</code> validation on <code>key</code> but I cant let it be blank because of the format validation. This wasnt ever a problem and the form used to work fine, it was only until recently that I went over it again and notices the form wasn't submitting. </p>\n\n<p>Why would this start happening and how can I fix it?</p>\n"}, {"tags": ["javascript", "ruby-on-rails", "ruby", "ruby-on-rails-3", "dropzone.js"], "comments": [{"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 0, "creation_date": 1459316452, "post_id": 36298964, "comment_id": 60225311, "body": "Is the dropzone not appearing?"}, {"owner": {"reputation": 33, "user_id": 5928064, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/25cf09aa9714ab0db467e1eed2abae10?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/5928064/daniel"}, "reply_to_user": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 0, "creation_date": 1459316672, "post_id": 36298964, "comment_id": 60225413, "body": "thank&#39;s for your interest @Pavan, and right, is not appearing"}, {"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 0, "creation_date": 1459317161, "post_id": 36298964, "comment_id": 60225645, "body": "Have a look at this <a href=\"http://stackoverflow.com/questions/29487666/carrierwave-with-dropzone-js-is-it-possible-to-use-these-with-nested-attributes\" title=\"carrierwave with dropzone js is it possible to use these with nested attributes\">stackoverflow.com/questions/29487666/&hellip;</a>"}, {"owner": {"reputation": 33, "user_id": 5928064, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/25cf09aa9714ab0db467e1eed2abae10?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/5928064/daniel"}, "reply_to_user": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 0, "creation_date": 1459322681, "post_id": 36298964, "comment_id": 60228489, "body": "thank&#39;s but did not worked"}], "owner": {"reputation": 33, "user_id": 5928064, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/25cf09aa9714ab0db467e1eed2abae10?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/5928064/daniel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 727, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1459307645, "creation_date": 1459307645, "question_id": 36298964, "link": "https://stackoverflow.com/questions/36298964/rails-nested-form-and-dropzone", "title": "Rails Nested form and Dropzone", "body": "<p>i'm striving to make a simple dropzone work on a product form with nested images form but after search a lot and change the code i would like to know if dropzone support nested form, because i can't find it in the doc.</p>\n\n<p>anyway my code is:</p>\n\n<pre><code>$('#images').dropzone({// PDF dropzone element\n  maxFilesize: 2, // Set the maximum file size to 256 MB\n   maxFiles: 10,\n    dictDefaultMessage: \"drop your images here\",\n    paramName: \"product[images_attributes][][foto]\",\n  addRemoveLinks: true, // Don't show remove links on dropzone itself.\n dictRemoveFile: 'Remover'\n\n    // rest of code\n //\n });\n</code></pre>\n\n<p>&lt;</p>\n\n<pre><code>%= form_for @product, :html =&gt; {:multipart =&gt; true}  do |p| %&gt;\n  &lt;div class=\"block margin_top\"&gt;\n\n &lt;%= p.fields_for(:images,  html: { multipart: true, id: \"images\",class: \"dropzone\"}) do |i| %&gt;\n     &lt;div class=\"fallback\"&gt;\n\n            &lt;%= i.file_field :photo %&gt;&lt;br&gt;\n            &lt;%= i.submit \"Save\" %&gt;\n          &lt;/div&gt;\n    &lt;% end %&gt;\n&lt;/div&gt;\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 505, "user_id": 3369350, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BAkyN.jpg?s=128&g=1", "display_name": "jvrn3", "link": "https://stackoverflow.com/users/3369350/jvrn3"}, "edited": false, "score": 0, "creation_date": 1459308021, "post_id": 36298892, "comment_id": 60222454, "body": "<a href=\"http://stackoverflow.com/questions/3535654/how-to-change-url-in-rails\" title=\"how to change url in rails\">stackoverflow.com/questions/3535654/how-to-change-url-in-rai&zwnj;&#8203;ls</a> I think it&#39;s the same problem you&#39;re having now."}, {"owner": {"reputation": 3020, "user_id": 4493564, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh3.googleusercontent.com/-ZrR5HKgzmQA/AAAAAAAAAAI/AAAAAAAAA2Y/YxH3F9m512U/photo.jpg?sz=128", "display_name": "Petr Gazarov", "link": "https://stackoverflow.com/users/4493564/petr-gazarov"}, "edited": false, "score": 0, "creation_date": 1459308171, "post_id": 36298892, "comment_id": 60222498, "body": "What you are describing is not a Rails convention but you can match any url in <code>routes.rb</code>. Check this post <a href=\"http://stackoverflow.com/questions/12316048/custom-url-in-ruby-on-rails\" title=\"custom url in ruby on rails\">stackoverflow.com/questions/12316048/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 3926034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jwoCK.jpg?s=128&g=1", "display_name": "FarazPatankar", "link": "https://stackoverflow.com/users/3926034/farazpatankar"}, "is_accepted": false, "score": 0, "last_activity_date": 1459307918, "creation_date": 1459307918, "answer_id": 36299014, "question_id": 36298892, "link": "https://stackoverflow.com/questions/36298892/how-to-change-namespace-uri-in-ruby-on-rails/36299014#36299014", "title": "How to change namespace URI in Ruby on Rails?", "body": "<p>You can add your own routes in rails. You'd do something like :</p>\n\n<pre><code>get \"/new_about\" =&gt; \"controller#action\"\n</code></pre>\n\n<p>I would suggest sticking to the Rails way of doing things though unless it's only a few number of pages and you specifically need them to be named differently.</p>\n"}, {"tags": [], "owner": {"reputation": 3521, "user_id": 1801379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8623bb58fab9617aa3afe078e6b3e8d9?s=128&d=identicon&r=PG", "display_name": "Babar Al-Amin", "link": "https://stackoverflow.com/users/1801379/babar-al-amin"}, "is_accepted": true, "score": 1, "last_activity_date": 1459308268, "creation_date": 1459308268, "answer_id": 36299078, "question_id": 36298892, "link": "https://stackoverflow.com/questions/36298892/how-to-change-namespace-uri-in-ruby-on-rails/36299078#36299078", "title": "How to change namespace URI in Ruby on Rails?", "body": "<p>You can simply map the desired URL to your existing action:</p>\n\n<pre><code>get 'new_about', to: 'abouts#show', id: 2\n</code></pre>\n"}], "owner": {"reputation": 608, "user_id": 4602599, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh3.googleusercontent.com/-jwmFWRuiNb8/AAAAAAAAAAI/AAAAAAAAAB4/CweRfPawup0/photo.jpg?sz=128", "display_name": "Javier Mu&#241;oz", "link": "https://stackoverflow.com/users/4602599/javier-mu%c3%b1oz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 107, "favorite_count": 0, "accepted_answer_id": 36299078, "answer_count": 2, "score": -1, "last_activity_date": 1459308268, "creation_date": 1459307137, "question_id": 36298892, "link": "https://stackoverflow.com/questions/36298892/how-to-change-namespace-uri-in-ruby-on-rails", "title": "How to change namespace URI in Ruby on Rails?", "body": "<p>I'm newbie in RoR and I'd like a bit of help here.</p>\n\n<p>I have the following URI:</p>\n\n<pre><code>http://localhost:3000/abouts/2\n</code></pre>\n\n<p>And the next in Route:</p>\n\n<pre><code>resources :abouts, only: [:show]\n</code></pre>\n\n<p>I'd like to show the information of \"about/2\" in another page, for example:</p>\n\n<pre><code>http://localhost:3000/new_about\n</code></pre>\n\n<p>Regards!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rubygems", "updates", "maintenance"], "answers": [{"tags": [], "owner": {"reputation": 10323, "user_id": 1220355, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cb2525ec6155e479bdefe9ed6c437d07?s=128&d=identicon&r=PG", "display_name": "Anthony E", "link": "https://stackoverflow.com/users/1220355/anthony-e"}, "is_accepted": false, "score": 2, "last_activity_date": 1459310691, "creation_date": 1459310691, "answer_id": 36299474, "question_id": 36298381, "link": "https://stackoverflow.com/questions/36298381/how-to-safely-update-all-gems-in-a-rails-application/36299474#36299474", "title": "How to safely update all gems in a Rails application", "body": "<p>My strategy is to only update a few gems at time whenever it's possible to do so. Obviously dependency trees can make this difficult but I've been burned a few times with blindly running <code>bundle update</code>, particularly in large projects with 100+ gems and this avoid it if possible. Updating smaller groups of gems also provides an additional benefit in that any side-effects are easier to isolate and address.</p>\n\n<p>Also, I try to make a habit of using dedicated git commits for any changes to Gemfile/Gemfile.lock. So any and all dependency updates have a single commit containing  changes for those two files only. This makes debugging much easier with <code>git bisect</code> and changes are easy to revert if the need arises. It also helps the inevitable trial-and-error process of dependency resolution. I've found this strategy works well for migrations as well (though migrations are trickier than dependencies IMO). </p>\n\n<p>Of course, every once in a while an update for a major dependency like Rails, Sidekiq, ActiveAdmin, RSpec, et. al. comes along, but that's relatively infrequent and having maintained the \"thinner\" dependencies makes this pill a bit easier to swallow.</p>\n"}], "owner": {"reputation": 3641, "user_id": 439332, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/JNgeL.jpg?s=128&g=1", "display_name": "Reed G. Law", "link": "https://stackoverflow.com/users/439332/reed-g-law"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1436, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1459310691, "creation_date": 1459303620, "question_id": 36298381, "link": "https://stackoverflow.com/questions/36298381/how-to-safely-update-all-gems-in-a-rails-application", "title": "How to safely update all gems in a Rails application", "body": "<p>Rails applications can have hundreds of dependencies which, left unchecked, typically all need to be updated periodically. After running <code>bundle outdated</code> and getting a list of 100+ gems that are out of date, I'm a bit daunted at the prospect of looking up every single one, finding its CHANGELOG, and confirming that the update doesn't break anything. There doesn't even seem to be a confirmed way to <a href=\"https://github.com/bundler/bundler/pull/3025\" rel=\"nofollow\">update a single gem</a> without pulling in all of its dependencies.</p>\n\n<p>I found <a href=\"https://github.com/lpender/bummr\" rel=\"nofollow\">this project</a> which is supposed to update each gem in a separate commit after passing automated tests. That would help streamline the process but it doesn't tell you which gem version upgrades include DSL changes (such as <a href=\"https://github.com/aasm/aasm/blob/master/CHANGELOG.md#400\" rel=\"nofollow\">this one</a>). Sometimes I blindly update minor or patch versions without checking, hoping the author follows a <a href=\"http://semver.org/\" rel=\"nofollow\">SEMVER</a>-like versioning convention. Other times there is no documentation (no History or CHANGELOG files).</p>\n\n<p>When I write my own code I'm sure to review every line before committing it. Should the same vigilance apply to updating libraries? Usually there wasn't much diligence performed when including the library in the first place. But in a greenfield project there is little to lose and much to be gained by leveraging other people's code. In a mature project there is little tolerance for new failures.</p>\n\n<p>Are there any tools or processes for pulling in updates one a time, viewing the changes in a diff-like way, viewing the CHANGELOG if any, and running the test suite?</p>\n"}, {"tags": ["ruby", "optimization", "primes"], "comments": [{"owner": {"reputation": 8771, "user_id": 2050, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/2d1e9a607c47a89730352dd7b9dacaab?s=128&d=identicon&r=PG", "display_name": "Eric Platon", "link": "https://stackoverflow.com/users/2050/eric-platon"}, "edited": false, "score": 1, "creation_date": 1459299032, "post_id": 36297650, "comment_id": 60220018, "body": "Have you considered giving a shot at the <a href=\"http://ruby-doc.org/stdlib-2.3.0/libdoc/benchmark/rdoc/Benchmark.html\" rel=\"nofollow noreferrer\">benchmarking standard library</a>?"}, {"owner": {"reputation": 7994, "user_id": 1625339, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b8ba46f911517c8b2ccc39e0be9050c0?s=128&d=identicon&r=PG", "display_name": "Aetherus", "link": "https://stackoverflow.com/users/1625339/aetherus"}, "edited": false, "score": 1, "creation_date": 1459299163, "post_id": 36297650, "comment_id": 60220058, "body": "Two minor suggestions: <code>is_prime</code> is useless. <code>i</code> can be incremented by 2 for each iteration."}, {"owner": {"reputation": 194, "user_id": 5286003, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/023d89912b43fd59bc06cf59bc51179c?s=128&d=identicon&r=PG", "display_name": "danmakenoise", "link": "https://stackoverflow.com/users/5286003/danmakenoise"}, "edited": false, "score": 1, "creation_date": 1459299768, "post_id": 36297650, "comment_id": 60220206, "body": "Is this the exact code you are submitting? <code>is_prime</code> is not defined ahead of time here and gives an error when executing this code as written."}, {"owner": {"reputation": 2393, "user_id": 5252715, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/173d75348dae4a3a945234ac0a528e37?s=128&d=identicon&r=PG", "display_name": "malexanders", "link": "https://stackoverflow.com/users/5252715/malexanders"}, "edited": false, "score": 0, "creation_date": 1459311346, "post_id": 36297650, "comment_id": 60223407, "body": "Great catch - you are totally right. is_prime has to be defined ahead of time. I realized after I submitted that code snippet. Sorry about that everyone"}, {"owner": {"reputation": 2393, "user_id": 5252715, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/173d75348dae4a3a945234ac0a528e37?s=128&d=identicon&r=PG", "display_name": "malexanders", "link": "https://stackoverflow.com/users/5252715/malexanders"}, "reply_to_user": {"reputation": 7994, "user_id": 1625339, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b8ba46f911517c8b2ccc39e0be9050c0?s=128&d=identicon&r=PG", "display_name": "Aetherus", "link": "https://stackoverflow.com/users/1625339/aetherus"}, "edited": false, "score": 0, "creation_date": 1459311406, "post_id": 36297650, "comment_id": 60223425, "body": "@aetherus, I tried incrementing by 2 and I ran into problems. My terminal stalled for some reason"}, {"owner": {"reputation": 7994, "user_id": 1625339, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b8ba46f911517c8b2ccc39e0be9050c0?s=128&d=identicon&r=PG", "display_name": "Aetherus", "link": "https://stackoverflow.com/users/1625339/aetherus"}, "edited": false, "score": 0, "creation_date": 1459317045, "post_id": 36297650, "comment_id": 60225596, "body": "See my solution. Note that the only even prime is 2, so you can pre-populate your <code>prime_array</code> with 2, then start the loop and increment <code>i</code> by 2."}], "answers": [{"comments": [{"owner": {"reputation": 2393, "user_id": 5252715, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/173d75348dae4a3a945234ac0a528e37?s=128&d=identicon&r=PG", "display_name": "malexanders", "link": "https://stackoverflow.com/users/5252715/malexanders"}, "edited": false, "score": 0, "creation_date": 1459311533, "post_id": 36297871, "comment_id": 60223469, "body": "sped up significantly by using multiplication instead. Thanks!"}], "tags": [], "owner": {"reputation": 11698, "user_id": 309641, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/YuQvL.jpg?s=128&g=1", "display_name": "David Zorychta", "link": "https://stackoverflow.com/users/309641/david-zorychta"}, "is_accepted": false, "score": 0, "last_activity_date": 1459300048, "creation_date": 1459300048, "answer_id": 36297871, "question_id": 36297650, "link": "https://stackoverflow.com/questions/36297650/how-to-optimize-an-algorithm-that-prints-n-prime-numbers/36297871#36297871", "title": "How to optimize an algorithm that prints n prime numbers", "body": "<p>you forget to define <code>is_prime</code> initially so your code doesn't run.</p>\n\n<p>Anyway, one thing you could do is drop <code>Math.sqrt</code> and instead calculate <code>num*num</code>. Generally speaking <code>Math.sqrt</code> is much slower than multiplication:</p>\n\n<pre><code>class Primes\n\n  def self.first(n)\n\n    prime_array = []\n\n    i = 2\n\n    until prime_array.length == n\n\n      is_prime = true\n\n      num = 2\n      until num*num &gt; i\n        if i % num == 0\n          is_prime = false\n          break\n        end\n        num += 1\n      end\n\n      if is_prime != false\n        prime_array &lt;&lt; i\n      end\n\n      i += 1\n\n    end\n\n    prime_array\n\n  end\n\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2393, "user_id": 5252715, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/173d75348dae4a3a945234ac0a528e37?s=128&d=identicon&r=PG", "display_name": "malexanders", "link": "https://stackoverflow.com/users/5252715/malexanders"}, "edited": false, "score": 0, "creation_date": 1459484702, "post_id": 36298007, "comment_id": 60317152, "body": "Cool, I see. Thanks!"}], "tags": [], "owner": {"reputation": 7994, "user_id": 1625339, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b8ba46f911517c8b2ccc39e0be9050c0?s=128&d=identicon&r=PG", "display_name": "Aetherus", "link": "https://stackoverflow.com/users/1625339/aetherus"}, "is_accepted": false, "score": 0, "last_activity_date": 1459301354, "last_edit_date": 1459301354, "creation_date": 1459300978, "answer_id": 36298007, "question_id": 36297650, "link": "https://stackoverflow.com/questions/36297650/how-to-optimize-an-algorithm-that-prints-n-prime-numbers/36298007#36298007", "title": "How to optimize an algorithm that prints n prime numbers", "body": "<p>Assume you want to get the first n primes, not the first m primes less than or equal to n.</p>\n\n<pre><code>class Primes\n\n  def self.first(n)\n    return [] if n &lt;= 0\n\n    primes = [2]\n\n    i = 3\n    while primes.size &lt; n\n      primes.push(i) unless primes.any?{|p| i % p == 0}\n      i += 2\n    end\n\n    primes\n\n  end\n\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "is_accepted": false, "score": 2, "last_activity_date": 1459304622, "creation_date": 1459304622, "answer_id": 36298530, "question_id": 36297650, "link": "https://stackoverflow.com/questions/36297650/how-to-optimize-an-algorithm-that-prints-n-prime-numbers/36298530#36298530", "title": "How to optimize an algorithm that prints n prime numbers", "body": "<p>I think this implementation is one of the fastest you can possibly get:</p>\n\n<pre><code>require 'prime'\n\nPrimes = Prime # so that we have the same interface as in your question\n</code></pre>\n\n<p>And \u2026 we're done. That's all there is to do.</p>\n\n<p><code>Prime</code> is <code>Enumerable</code>, so we can now just do </p>\n\n<pre><code>Primes.first(10_000)\n</code></pre>\n\n<p>to get the first 10&thinsp;000 primes.</p>\n"}], "owner": {"reputation": 2393, "user_id": 5252715, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/173d75348dae4a3a945234ac0a528e37?s=128&d=identicon&r=PG", "display_name": "malexanders", "link": "https://stackoverflow.com/users/5252715/malexanders"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 131, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1459312064, "creation_date": 1459298491, "last_edit_date": 1459312064, "question_id": 36297650, "link": "https://stackoverflow.com/questions/36297650/how-to-optimize-an-algorithm-that-prints-n-prime-numbers", "title": "How to optimize an algorithm that prints n prime numbers", "body": "<p>I'm hoping someone can help me optimize this algorithm. This solution does what I want in irb, but times out on the codewars site. </p>\n\n<pre><code>class Primes\n  def self.first(n)\n    arr = []\n\n    i ||= 2\n\n    until arr.length == n\n\n      is_prime = true\n\n      (2..(i**0.5)).step do |num|\n        if i % num == 0\n          is_prime = false\n          break\n        end\n      end\n\n      arr &lt;&lt; i if is_prime == true\n\n      i += 1\n\n    end\n\n    arr\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "json", "rest"], "comments": [{"owner": {"reputation": 3020, "user_id": 4493564, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh3.googleusercontent.com/-ZrR5HKgzmQA/AAAAAAAAAAI/AAAAAAAAA2Y/YxH3F9m512U/photo.jpg?sz=128", "display_name": "Petr Gazarov", "link": "https://stackoverflow.com/users/4493564/petr-gazarov"}, "edited": false, "score": 0, "creation_date": 1459300299, "post_id": 36297625, "comment_id": 60220336, "body": "I would put a pry in the controller and see if the code goes through the action as expected <a href=\"https://github.com/pry/pry\" rel=\"nofollow noreferrer\">github.com/pry/pry</a>"}, {"owner": {"reputation": 538, "user_id": 4942501, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/01df718ae071cabc2f077114e4ab4908?s=128&d=identicon&r=PG&f=1", "display_name": "Jared", "link": "https://stackoverflow.com/users/4942501/jared"}, "reply_to_user": {"reputation": 3020, "user_id": 4493564, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh3.googleusercontent.com/-ZrR5HKgzmQA/AAAAAAAAAAI/AAAAAAAAA2Y/YxH3F9m512U/photo.jpg?sz=128", "display_name": "Petr Gazarov", "link": "https://stackoverflow.com/users/4493564/petr-gazarov"}, "edited": false, "score": 0, "creation_date": 1459300415, "post_id": 36297625, "comment_id": 60220365, "body": "@PetrGazarov: is there no way i can do a simple &quot;print&quot; statement or anything like that?"}, {"owner": {"reputation": 3020, "user_id": 4493564, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh3.googleusercontent.com/-ZrR5HKgzmQA/AAAAAAAAAAI/AAAAAAAAA2Y/YxH3F9m512U/photo.jpg?sz=128", "display_name": "Petr Gazarov", "link": "https://stackoverflow.com/users/4493564/petr-gazarov"}, "edited": false, "score": 0, "creation_date": 1459302142, "post_id": 36297625, "comment_id": 60220810, "body": "I don&#39;t think there is an easy way to print something back to the terminal because then you would have to actually be sending a response, which is what you are having trouble with in the first place. That said, if you are testing for JSON response, try this handy tool: <a href=\"https://www.getpostman.com/\" rel=\"nofollow noreferrer\">getpostman.com</a>"}, {"owner": {"reputation": 22783, "user_id": 1113772, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/uLSIj.png?s=128&g=1", "display_name": "Paul Sweatte", "link": "https://stackoverflow.com/users/1113772/paul-sweatte"}, "edited": false, "score": 0, "creation_date": 1477030524, "post_id": 36297625, "comment_id": 67607128, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/26711173/how-to-debug-using-rails-console-and-puts-in-application\">How to debug using rails console and puts in application</a>"}], "owner": {"reputation": 538, "user_id": 4942501, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/01df718ae071cabc2f077114e4ab4908?s=128&d=identicon&r=PG&f=1", "display_name": "Jared", "link": "https://stackoverflow.com/users/4942501/jared"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 105, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1459298359, "creation_date": 1459298359, "question_id": 36297625, "link": "https://stackoverflow.com/questions/36297625/ruby-on-rails-rendering-json-of-timesheets-in-datetime-range", "title": "Ruby on Rails: Rendering JSON of timesheets in datetime range?", "body": "<p>I am new to ruby on rails and am trying to write a rest api for an employee timesheet service for class. I am having trouble selecting timesheets based on their date and sending back the json.</p>\n\n<p>Here is my code: </p>\n\n<pre><code>before_filter only: :index do\nparse_request\nunless @json.has_key?('timesheet') &amp;&amp; @json['timesheet']['year'] &amp;&amp; @json['timesheet']['month']\n  render nothing: true, status: :bad_request\nend\nend\n\ndef index\nyear = @json['timesheet']['year']\nmonth = @json['timesheet']['month']\nif(@json.has_key?(:day))\n  week = @json['timesheet']['day']\n  begin_date = DateTime.new(year, month, day, 00, 00, 00)\n  end_date = begin_date + 1.week + 1.day\nelse\n  begin_date = DateTime.new(year, month, 01, 00, 00, 00)\n  end_date = begin_date + 1.month + 1.day\nend\nif(params.has_key?(:employer_id))\n  render json: Timesheet.where(employer_id: params[:employer_id], time: begin_date..end_date)\nelsif(params.has_key?(:employee_id))\n  render json: Timesheet.where(employee_id: params[:employee_id], time: begin_date..end_date)\nelse\n  render nothing: true, status: :bad_request\nend\n</code></pre>\n\n<p>Here are my relevant routes:</p>\n\n<pre><code>scope '/:employer_id' do\n          get '/' =&gt; 'api_employers#show'\n          put '/' =&gt; 'api_employers#update'\n            scope '/timesheets' do\n              put '/' =&gt; 'api_timesheets#index'\n            end\n</code></pre>\n\n<p>and </p>\n\n<pre><code>scope '/:employee_id' do\n        get '/' =&gt; 'api_employees#show'\n        put '/' =&gt; 'api_employees#update'\n          scope '/timesheets' do\n            put '/' =&gt; 'api_timesheets#index'\n            post '/' =&gt; 'api_timesheets#create'\n</code></pre>\n\n<p>I try to get the timesheets with the following command in terminal:</p>\n\n<pre><code>curl -H \"Content-Type: application/json\" -X PUT -d '{\"timesheet\":{\"employer_id\":\"1\", \"employee_id\":\"1\", \"year\":\"2016\", \"month\":\"3\"}' http://tester-1234.herokuapp.com/api/v1/employees/1/timesheets\n</code></pre>\n\n<p>but it renders nothing. The reason I check for the day param in index is because if the user specifies a day, it should return timesheets for a week from that day, and if they do not, it should just return timesheets for the whole month. Any help is much appreciated. </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "devise", "rubygems"], "answers": [{"comments": [{"owner": {"reputation": 433, "user_id": 5040701, "user_type": "registered", "accept_rate": 90, "profile_image": "https://lh5.googleusercontent.com/-Eb_PJwGnBPU/AAAAAAAAAAI/AAAAAAAAAEs/ydZnEIMR5bg/photo.jpg?sz=128", "display_name": "ravenUSMC", "link": "https://stackoverflow.com/users/5040701/ravenusmc"}, "edited": false, "score": 0, "creation_date": 1459296662, "post_id": 36297356, "comment_id": 60219398, "body": "Ha, that is funny, I see that as well-any work arounds? Use a different version?"}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "reply_to_user": {"reputation": 433, "user_id": 5040701, "user_type": "registered", "accept_rate": 90, "profile_image": "https://lh5.googleusercontent.com/-Eb_PJwGnBPU/AAAAAAAAAAI/AAAAAAAAAEs/ydZnEIMR5bg/photo.jpg?sz=128", "display_name": "ravenUSMC", "link": "https://stackoverflow.com/users/5040701/ravenusmc"}, "edited": false, "score": 0, "creation_date": 1459298687, "post_id": 36297356, "comment_id": 60219932, "body": "see <a href=\"http://meta.stackoverflow.com/questions/318682/answering-own-questions-through-the-outcome-of-another-answer\" title=\"answering own questions through the outcome of another answer\">meta.stackoverflow.com/questions/318682/&hellip;</a>"}], "tags": [], "owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "is_accepted": true, "score": 0, "last_activity_date": 1459296548, "creation_date": 1459296548, "answer_id": 36297356, "question_id": 36297316, "link": "https://stackoverflow.com/questions/36297316/could-not-find-devise-3-5-0-in-any-of-the-sources-rails-4-devise-gem/36297356#36297356", "title": "Could not find devise-3.5.0 in any of the sources-rails 4, devise gem", "body": "<p>I checked <a href=\"https://rubygems.org/gems/devise/versions\" rel=\"nofollow\">the RubyGems page</a> and the version was yanked for some reason, I don't know why. </p>\n"}, {"tags": [], "owner": {"reputation": 433, "user_id": 5040701, "user_type": "registered", "accept_rate": 90, "profile_image": "https://lh5.googleusercontent.com/-Eb_PJwGnBPU/AAAAAAAAAAI/AAAAAAAAAEs/ydZnEIMR5bg/photo.jpg?sz=128", "display_name": "ravenUSMC", "link": "https://stackoverflow.com/users/5040701/ravenusmc"}, "is_accepted": false, "score": 1, "last_activity_date": 1459296766, "creation_date": 1459296766, "answer_id": 36297395, "question_id": 36297316, "link": "https://stackoverflow.com/questions/36297316/could-not-find-devise-3-5-0-in-any-of-the-sources-rails-4-devise-gem/36297395#36297395", "title": "Could not find devise-3.5.0 in any of the sources-rails 4, devise gem", "body": "<p>I got it-used gem 'devise', '~> 3.5.6' instead. </p>\n"}], "owner": {"reputation": 433, "user_id": 5040701, "user_type": "registered", "accept_rate": 90, "profile_image": "https://lh5.googleusercontent.com/-Eb_PJwGnBPU/AAAAAAAAAAI/AAAAAAAAAEs/ydZnEIMR5bg/photo.jpg?sz=128", "display_name": "ravenUSMC", "link": "https://stackoverflow.com/users/5040701/ravenusmc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 147, "favorite_count": 0, "accepted_answer_id": 36297356, "answer_count": 2, "score": 1, "last_activity_date": 1459296766, "creation_date": 1459296364, "question_id": 36297316, "link": "https://stackoverflow.com/questions/36297316/could-not-find-devise-3-5-0-in-any-of-the-sources-rails-4-devise-gem", "title": "Could not find devise-3.5.0 in any of the sources-rails 4, devise gem", "body": "<p>I am working on an older app of mine, old means about 6 months. When I went to start it with rails s I got the following message: </p>\n\n<p>Could not find devise-3.5.0 in any of the sources\nRun <code>bundle install</code> to install missing gems.</p>\n\n<p>so I ran bundle install but then got this message:</p>\n\n<p>Could not find devise-3.5.0 in any of the sources</p>\n\n<p>I tried googling this and did not find anything. Any suggestions on how to fix this? In my gem file the devise gem looks like the following: </p>\n\n<p>gem 'devise'</p>\n\n<p>This app was working fine the last time I pulled it out. Thank you for the help.</p>\n"}, {"tags": ["ruby"], "answers": [{"tags": [], "owner": {"reputation": 1103, "user_id": 2624489, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dad9f7a424213d6f44f4dc7c40362d5f?s=128&d=identicon&r=PG", "display_name": "james00794", "link": "https://stackoverflow.com/users/2624489/james00794"}, "is_accepted": true, "score": 4, "last_activity_date": 1459295192, "creation_date": 1459295192, "answer_id": 36297120, "question_id": 36297049, "link": "https://stackoverflow.com/questions/36297049/iterate-through-array-of-hashes-and-output-key-value/36297120#36297120", "title": "iterate through array of hashes and output key, value", "body": "<p>Since each hash can have any number of key/value pairs:</p>\n\n<pre><code>&lt;% tags=[{\"2\":\"birds\"},{\"3\":\"cars\"}] %&gt;\n\n&lt;% tags.each do |t| %&gt;\n   &lt;% t.each do |key,value| %&gt;\n      &lt;%=key %&gt; &lt;%=value %&gt;\n   &lt;% end %&gt;\n&lt;% end %&gt;\n</code></pre>\n"}], "owner": {"reputation": 16919, "user_id": 152825, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e990c2bcb4dfb7fd0c398098da9bca59?s=128&d=identicon&r=PG", "display_name": "timpone", "link": "https://stackoverflow.com/users/152825/timpone"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 158, "favorite_count": 0, "accepted_answer_id": 36297120, "answer_count": 1, "score": 1, "last_activity_date": 1459295192, "creation_date": 1459294773, "question_id": 36297049, "link": "https://stackoverflow.com/questions/36297049/iterate-through-array-of-hashes-and-output-key-value", "title": "iterate through array of hashes and output key, value", "body": "<p>I'd like to do the following:</p>\n\n<pre><code>&lt;% tags=[{\"2\":\"birds\"},{\"3\":\"cars\"}] %&gt;\n\n&lt;% tags.each do |key, value| %&gt;\n   &lt;%=key %&gt; &lt;%=value %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>but this doesn't work. How would I do this (if possible)?</p>\n"}, {"tags": ["ruby", "selenium", "global-variables"], "comments": [{"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 3, "creation_date": 1459294153, "post_id": 36296896, "comment_id": 60218656, "body": "it&#39;s one thing to avoid redefining globals, but it seems kind of sadistic to mandate passing it to every method. I think using a global is fine in this case. I&#39;ve been doing the same thing with mechanize"}, {"owner": {"reputation": 36788, "user_id": 2887618, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e643417e67e5a3bb9f659e4491ed26b0?s=128&d=identicon&r=PG&f=1", "display_name": "Florent B.", "link": "https://stackoverflow.com/users/2887618/florent-b"}, "edited": false, "score": 0, "creation_date": 1459294924, "post_id": 36296896, "comment_id": 60218911, "body": "There is nothing wrong in using a static instance for the driver as long as you understand the scope of a static variable."}, {"owner": {"reputation": 4879, "user_id": 954442, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/168149d073db878da990e57c891911cd?s=128&d=identicon&r=PG", "display_name": "Andrew Regan", "link": "https://stackoverflow.com/users/954442/andrew-regan"}, "edited": false, "score": 1, "creation_date": 1459295348, "post_id": 36296896, "comment_id": 60219034, "body": "It&#39;s fine as long as you only access the driver from one thread, only run one test at a time, and only support one browser at a time, i.e. the driver truly is global, and not just made static for short-term simplicity. Those objections might be irrelevant for you - though I&#39;d argue that OO <i>done right</i> makes for simpler and more flexible code."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1459297503, "post_id": 36296896, "comment_id": 60219648, "body": "Can you initialize your <code>home_page</code> with the driver, like <code>home_page = HomePage.new(selenium)</code> and then later <code>home_page.login(...)</code>? Global context is usually a bad design decision, but sometimes you can keep the impact of them very localized, such as just within your testing environment, which can lead to cleaner code and fewer errors."}, {"owner": {"reputation": 21, "user_id": 5305626, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/29b729a89ceff1fdbc4c278c8d63b61b?s=128&d=identicon&r=PG&f=1", "display_name": "dkhokhar", "link": "https://stackoverflow.com/users/5305626/dkhokhar"}, "edited": false, "score": 0, "creation_date": 1459331745, "post_id": 36296896, "comment_id": 60234443, "body": "Great response peoples did not expect a response so quickly."}, {"owner": {"reputation": 21, "user_id": 5305626, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/29b729a89ceff1fdbc4c278c8d63b61b?s=128&d=identicon&r=PG&f=1", "display_name": "dkhokhar", "link": "https://stackoverflow.com/users/5305626/dkhokhar"}, "edited": false, "score": 1, "creation_date": 1459369384, "post_id": 36296896, "comment_id": 60261271, "body": "Great response peoples did not expect a response so quickly. (max pleaner): this is what I suspected although Andrews comments about concurrency is absolutely valid and not something I had considered. Readability or flexibility makes for interesting opposing bedfellows. (tadman):Presently I have a test-driving script which does just that, but as I stated it still requires me to pass the selenium driver to the homepage Pageobject and as stated previously by others I guess the question is how important is flexibility to me."}, {"owner": {"reputation": 21, "user_id": 5305626, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/29b729a89ceff1fdbc4c278c8d63b61b?s=128&d=identicon&r=PG&f=1", "display_name": "dkhokhar", "link": "https://stackoverflow.com/users/5305626/dkhokhar"}, "edited": false, "score": 0, "creation_date": 1459369453, "post_id": 36296896, "comment_id": 60261310, "body": "Thank you everyone for your comments. Your opinions and council are much appreciated."}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 5305626, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/29b729a89ceff1fdbc4c278c8d63b61b?s=128&d=identicon&r=PG&f=1", "display_name": "dkhokhar", "link": "https://stackoverflow.com/users/5305626/dkhokhar"}, "edited": false, "score": 0, "creation_date": 1459370015, "post_id": 36317094, "comment_id": 60261622, "body": "I like this idea. So you can instantiate a web-driver per test ensuring concurrency but still have a level of control over the scope of the webdriver. This maybe what tadman was alluding to. Nice, although you still have to pass the web-driver via parameter to DoSomething which was what I was trying to avoid."}, {"owner": {"reputation": 66, "user_id": 3665380, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8db5fd448b79bc4c0c20a356e37e0af?s=128&d=identicon&r=PG&f=1", "display_name": "Drew", "link": "https://stackoverflow.com/users/3665380/drew"}, "reply_to_user": {"reputation": 21, "user_id": 5305626, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/29b729a89ceff1fdbc4c278c8d63b61b?s=128&d=identicon&r=PG&f=1", "display_name": "dkhokhar", "link": "https://stackoverflow.com/users/5305626/dkhokhar"}, "edited": false, "score": 0, "creation_date": 1459370333, "post_id": 36317094, "comment_id": 60261796, "body": "I also use a WebDriverFactory class that returns whatever type of driver i need(chrome,IE,whatever) that class stores the last driver it returned statically as well."}], "tags": [], "owner": {"reputation": 66, "user_id": 3665380, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8db5fd448b79bc4c0c20a356e37e0af?s=128&d=identicon&r=PG&f=1", "display_name": "Drew", "link": "https://stackoverflow.com/users/3665380/drew"}, "is_accepted": false, "score": 1, "last_activity_date": 1459363177, "creation_date": 1459363177, "answer_id": 36317094, "question_id": 36296896, "link": "https://stackoverflow.com/questions/36296896/why-shouldnt-you-use-a-global-variables-for-the-selenium-webdriver/36317094#36317094", "title": "Why shouldn&#39;t you use a global variables for the Selenium webdriver?", "body": "<p>I access all my Page objects in my tests through a PageRepo class that initializes all of my Page objects.</p>\n\n<p>I initialize the PageRepo class in a base class that my test classes inherit from This is also where I initialize my WebDriver.</p>\n\n<p>so my tests look like this.</p>\n\n<p>PageRepo.HomePage().DoSomething()</p>\n"}], "owner": {"reputation": 21, "user_id": 5305626, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/29b729a89ceff1fdbc4c278c8d63b61b?s=128&d=identicon&r=PG&f=1", "display_name": "dkhokhar", "link": "https://stackoverflow.com/users/5305626/dkhokhar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1077, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1459363177, "creation_date": 1459293850, "last_edit_date": 1459301532, "question_id": 36296896, "link": "https://stackoverflow.com/questions/36296896/why-shouldnt-you-use-a-global-variables-for-the-selenium-webdriver", "title": "Why shouldn&#39;t you use a global variables for the Selenium webdriver?", "body": "<p>As I am new to OO programming this may seem a trite question.</p>\n\n<p>I am trying to write a basic End-User testing framework which has a class Pageobject with the majority of method code.</p>\n\n<p>I have a testing script which instantiates the selenium driver at the top-level and then I have a number of Page object method calls to \"do stuff\".</p>\n\n<p>If I instantiate the driver at the top-level then I need to pass the driver object to any method that needs it which is fine but I would like to minimise the number of parameters passed to a method call for the saake of readability.</p>\n\n<p>eg. home_page.login(this_user) reads a little better than home_page.login(this_user, selenium_driver).</p>\n\n<p>I know global variables are frowned upon so is there any other way that all method can have access to an object in a different scope.</p>\n"}, {"tags": ["sql", "ruby-on-rails", "ruby", "postgresql", "activerecord"], "comments": [{"owner": {"reputation": 79161, "user_id": 1064226, "user_type": "registered", "profile_image": "https://graph.facebook.com/36912842/picture?type=large", "display_name": "Frederick Cheung", "link": "https://stackoverflow.com/users/1064226/frederick-cheung"}, "edited": false, "score": 0, "creation_date": 1459322371, "post_id": 36296721, "comment_id": 60228323, "body": "What is the error message?"}], "answers": [{"tags": [], "owner": {"reputation": 10323, "user_id": 1220355, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cb2525ec6155e479bdefe9ed6c437d07?s=128&d=identicon&r=PG", "display_name": "Anthony E", "link": "https://stackoverflow.com/users/1220355/anthony-e"}, "is_accepted": false, "score": 1, "last_activity_date": 1459348351, "last_edit_date": 1459348351, "creation_date": 1459297463, "answer_id": 36297494, "question_id": 36296721, "link": "https://stackoverflow.com/questions/36296721/issues-when-rescuing-activerecordrecordnotunique/36297494#36297494", "title": "Issues When Rescuing ActiveRecord::RecordNotUnique", "body": "<p>Rather than rely on exception handling for logic, you can use <code>ActiveRecord</code> transactions to ensure all-or-nothing updates.</p>\n\n<p>Like this:</p>\n\n<pre><code>ActiveRecord::Base.transaction do\n  DelayedSync.create!(updatable: updatable, status: :queued, action: action)\nend\n</code></pre>\n\n<p>You can still safely utilize <code>rescue</code> to handle logging cleanup.</p>\n\n<p>Docs that have much more detail about this can be found <a href=\"http://api.rubyonrails.org/classes/ActiveRecord/Transactions/ClassMethods.html\" rel=\"nofollow\">here</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 265, "user_id": 3442705, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/ln1gA.jpg?s=128&g=1", "display_name": "silatham99", "link": "https://stackoverflow.com/users/3442705/silatham99"}, "is_accepted": true, "score": 0, "last_activity_date": 1459449124, "creation_date": 1459449124, "answer_id": 36341056, "question_id": 36296721, "link": "https://stackoverflow.com/questions/36296721/issues-when-rescuing-activerecordrecordnotunique/36341056#36341056", "title": "Issues When Rescuing ActiveRecord::RecordNotUnique", "body": "<p>After further digging, I uncovered the problem was due to how I was invoking this method from an <code>after_save</code> callback. Rails invokes <code>after_save</code> and <code>after_destroy</code> callbacks <strong>before</strong> the transaction has been closed. Rescuing the <code>ActiveRecord::RecordNotUnique</code> error invoked from this callback and attempting to execute more queries is impossible with Postgres, since it invalidates the entire transaction. My solution was to transition to the <code>after_commit</code> callback which provides the same control as <code>after_save</code> and <code>after_destroy</code> with the <code>on: [:create, :destroy]</code> parameter, with the benefit of being executed <strong>after</strong> the transaction (invalid or not) has closed.</p>\n\n<p>This blog post is a bit dated, but the information near the bottom was immensely helpful and still holds true: <a href=\"http://markdaggett.com/blog/2011/12/01/transactions-in-rails/\" rel=\"nofollow\">http://markdaggett.com/blog/2011/12/01/transactions-in-rails/</a></p>\n"}], "owner": {"reputation": 265, "user_id": 3442705, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/ln1gA.jpg?s=128&g=1", "display_name": "silatham99", "link": "https://stackoverflow.com/users/3442705/silatham99"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 412, "favorite_count": 1, "accepted_answer_id": 36341056, "answer_count": 2, "score": 4, "last_activity_date": 1459449124, "creation_date": 1459292851, "last_edit_date": 1459358849, "question_id": 36296721, "link": "https://stackoverflow.com/questions/36296721/issues-when-rescuing-activerecordrecordnotunique", "title": "Issues When Rescuing ActiveRecord::RecordNotUnique", "body": "<p>I'm attempting to build a table which will act as a queue of batched syncs to a third party service.</p>\n\n<p>The following method should speak for itself; but to be clear, its intention is to add a new updatable object (a polymorphic relationship) with <code>status: :queued</code> to the <code>delayed_syncs</code> table.</p>\n\n<p>There is a uniqueness constraint on the polymorphic relationship + <code>status</code> (<code>updatable_id</code>, <code>updatable_type</code>, <code>status</code>) which should cause updatable objects already in the queue with the <code>:queued status</code> to fail here and fall into the rescue block.</p>\n\n<p>The issue I am seeing is that whenever the <code>SELECT</code> generated by <code>find_by</code> is fired, this entire method fails with a:</p>\n\n<blockquote>\n  <p>ActiveRecord::StatementInvalid</p>\n</blockquote>\n\n<p>error.</p>\n\n<p>Information I've found around this suggests a <code>ROLLBACK</code> or <code>RELEASE SAVEPOINT</code> after the failed <code>INSERT</code>, but I'm not sure how I would accomplish that here.</p>\n\n<p>The aforementioned method:</p>\n\n<pre><code>def self.enqueue(updatable:, action:)\n  DelayedSync.create(updatable: updatable, status: :queued, action: action)\nrescue ActiveRecord::RecordNotUnique\n  queued_update = DelayedSync.find_by(updatable: updatable, status: :queued, action: :sync_update)\n  if action == :sync_delete &amp;&amp; queued_update.present?\n    queued_update.sync_delete!\n  else\n    Rails.logger.debug \"#{updatable.class.name} #{updatable.id} already queued for sync, skipping.\"\n  end\nend\n</code></pre>\n"}, {"tags": ["arrays", "ruby", "json", "hash"], "answers": [{"tags": [], "owner": {"reputation": 5207, "user_id": 3277393, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/a2967a01798ad7d675a6b39f41232a5b?s=128&d=identicon&r=PG&f=1", "display_name": "user12341234", "link": "https://stackoverflow.com/users/3277393/user12341234"}, "is_accepted": true, "score": 1, "last_activity_date": 1459293337, "creation_date": 1459293337, "answer_id": 36296805, "question_id": 36296616, "link": "https://stackoverflow.com/questions/36296616/ruby-integrate-a-ruby-key-value-hash-in-an-existing-json-string/36296805#36296805", "title": "Ruby: integrate a ruby key/value-hash in an existing JSON string", "body": "<p>Try <code>jsonString.merge(my_hash)</code> ?</p>\n\n<p>My understanding is that the variable called <code>jsonString</code> is actually a hash, not a json string. If you wanted to convert that hash to a real JSON string, you could import the json module (using <code>require 'json'</code>) than call <code>jsonStrong.to_json</code>, but once you've converted the hash to a string it's more difficult to had other hashes to it. It's best to add all the hashes together, then convert the result to json.</p>\n"}], "owner": {"reputation": 39, "user_id": 6130489, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87162721d5ba9245d54006f711aaebab?s=128&d=identicon&r=PG&f=1", "display_name": "\u017deljko Sosic ", "link": "https://stackoverflow.com/users/6130489/%c5%bdeljko-sosic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "accepted_answer_id": 36296805, "answer_count": 1, "score": 1, "last_activity_date": 1459298103, "creation_date": 1459292311, "last_edit_date": 1459298103, "question_id": 36296616, "link": "https://stackoverflow.com/questions/36296616/ruby-integrate-a-ruby-key-value-hash-in-an-existing-json-string", "title": "Ruby: integrate a ruby key/value-hash in an existing JSON string", "body": "<p>The JSON-String:</p>\n\n<pre><code>jsonString = {\"string1\" =&gt; {\"test1\" =&gt; \"test2\"}}\n</code></pre>\n\n<p>results (with JSON.pretty_generate) in a pretty printed:</p>\n\n<pre><code>{\n    \"string1\":\n    {\n        \"test1\": \"test2\"\n    }\n}\n</code></pre>\n\n<p>But when I try to add all elements of two arrays into this JSON-String</p>\n\n<pre><code>keys = [:key0, :key1]\nvalues = [:value0, :value1]\n\nmy_hash = Hash[keys.zip values]\n\njsonString = {\"string1\" =&gt; {\"test1\" =&gt; \"test2\", my_hash}}\n</code></pre>\n\n<p>I'm always getting a:</p>\n\n<p><strong>syntax error, unexpected '}', expecting =>\n        jsonString = {\"string1\" => {\"test1\" => \"test2\", my_hash}}</strong></p>\n\n<p>I would have expected a behavior like this:</p>\n\n<pre><code>jsonString = {\"string1\" =&gt; {\"test1\" =&gt; \"test2\", keys[0] =&gt; values[0], keys[1] =&gt; values[1]}}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>{\n    \"string1\":\n    {\n        \"test1\": \"test2\",\n        \"key0\": \"value0\",\n        \"key1\": \"value1\"\n    }\n}\n</code></pre>\n\n<p>Is there a way to this using the hash-mechanism?</p>\n\n<p>Thanks a lot. </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "devise", "nested-forms", "jointable"], "answers": [{"comments": [{"owner": {"reputation": 911, "user_id": 5079196, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/UWfbG.jpg?s=128&g=1", "display_name": "gwalshington", "link": "https://stackoverflow.com/users/5079196/gwalshington"}, "edited": false, "score": 0, "creation_date": 1459445192, "post_id": 36297654, "comment_id": 60301746, "body": "I have been trying to apply this, but am running into errors. Am I supposed to be removing/editing anything in my current controller, in addition to adding an after_create to my model?"}, {"owner": {"reputation": 911, "user_id": 5079196, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/UWfbG.jpg?s=128&g=1", "display_name": "gwalshington", "link": "https://stackoverflow.com/users/5079196/gwalshington"}, "edited": false, "score": 0, "creation_date": 1459639939, "post_id": 36297654, "comment_id": 60377201, "body": "What would my controller look like?"}, {"owner": {"reputation": 4045, "user_id": 1378252, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/d4025b3e5be289ffee5dffbd0a1a7fb5?s=128&d=identicon&r=PG", "display_name": "toddmetheny", "link": "https://stackoverflow.com/users/1378252/toddmetheny"}, "reply_to_user": {"reputation": 911, "user_id": 5079196, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/UWfbG.jpg?s=128&g=1", "display_name": "gwalshington", "link": "https://stackoverflow.com/users/5079196/gwalshington"}, "edited": false, "score": 0, "creation_date": 1459688061, "post_id": 36297654, "comment_id": 60388165, "body": "The after_create callback goes in your model."}, {"owner": {"reputation": 911, "user_id": 5079196, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/UWfbG.jpg?s=128&g=1", "display_name": "gwalshington", "link": "https://stackoverflow.com/users/5079196/gwalshington"}, "edited": false, "score": 0, "creation_date": 1459696087, "post_id": 36297654, "comment_id": 60390924, "body": "Yes - I get that. I&#39;m wondering about my controller. I&#39;ve been looking at other questions on that, and my issue is in my controlle - do you see how I have &#39;resource.languages_users.build(user_id: current_user)            respond_with self.resource&#39; when I take this out to use the after_create, it breaks it. I think the after_create is a great start, but I&#39;m looking for more detailed help on what my controller would also look like. Thanks so much - and I&#39;m upvoting for all your help!"}, {"owner": {"reputation": 911, "user_id": 5079196, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/UWfbG.jpg?s=128&g=1", "display_name": "gwalshington", "link": "https://stackoverflow.com/users/5079196/gwalshington"}, "edited": false, "score": 0, "creation_date": 1459698063, "post_id": 36297654, "comment_id": 60391666, "body": "Currently my issue seems to be that I&#39;m passing a hash to user. I&#39;m getting the error TypeError in Users::RegistrationsController#create no implicit conversion of Symbol into Integer Pointing to a line with &#39;        attribute_ids = attributes_collection.map {|a| a[&#39;id&#39;] || a[:id] }.compact&#39;"}], "tags": [], "owner": {"reputation": 4045, "user_id": 1378252, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/d4025b3e5be289ffee5dffbd0a1a7fb5?s=128&d=identicon&r=PG", "display_name": "toddmetheny", "link": "https://stackoverflow.com/users/1378252/toddmetheny"}, "is_accepted": false, "score": 2, "last_activity_date": 1459298499, "creation_date": 1459298499, "answer_id": 36297654, "question_id": 36296481, "link": "https://stackoverflow.com/questions/36296481/pass-user-id-in-nested-form-upon-registration-and-save-both-models/36297654#36297654", "title": "pass user_id in nested form upon registration and save both models", "body": "<p>you can access the <code>user_id</code> in an <code>after_create</code> callback:</p>\n\n<pre><code>after_create :example_method\n\ndef example_method\n   NameOfModel.create(user_id: self.id, etc)\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 911, "user_id": 5079196, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/UWfbG.jpg?s=128&g=1", "display_name": "gwalshington", "link": "https://stackoverflow.com/users/5079196/gwalshington"}, "edited": false, "score": 0, "creation_date": 1459779791, "post_id": 36400854, "comment_id": 60426726, "body": "Thank you so much for your response! Is this in place of my new controller? What would that controller need? Thank you!!"}, {"owner": {"reputation": 911, "user_id": 5079196, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/UWfbG.jpg?s=128&g=1", "display_name": "gwalshington", "link": "https://stackoverflow.com/users/5079196/gwalshington"}, "edited": false, "score": 0, "creation_date": 1459780674, "post_id": 36400854, "comment_id": 60427368, "body": "I have just <code>@user=User.new</code> in my new controller. When I run the registration now, it says <code>undefined method </code>permit&#39; for nil:NilClass` for  <code>language_user_params = params[:languages_users_attributes].permit(:language_id,:lev&zwnj;&#8203;el)</code>"}, {"owner": {"reputation": 7454, "user_id": 1377943, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/4i1Qa.jpg?s=128&g=1", "display_name": "Paritosh Piplewar", "link": "https://stackoverflow.com/users/1377943/paritosh-piplewar"}, "reply_to_user": {"reputation": 911, "user_id": 5079196, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/UWfbG.jpg?s=128&g=1", "display_name": "gwalshington", "link": "https://stackoverflow.com/users/5079196/gwalshington"}, "edited": false, "score": 0, "creation_date": 1459783070, "post_id": 36400854, "comment_id": 60429103, "body": "how about when you put <code>params[:user][:languages_users_attributes]</code>"}, {"owner": {"reputation": 911, "user_id": 5079196, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/UWfbG.jpg?s=128&g=1", "display_name": "gwalshington", "link": "https://stackoverflow.com/users/5079196/gwalshington"}, "edited": false, "score": 0, "creation_date": 1459783187, "post_id": 36400854, "comment_id": 60429207, "body": "just made that update, and it is still throwing the same error on this same line: `     language_user_params = params[:user][:languages_users_attributes].permit(:language_&zwnj;&#8203;id,:level) `"}, {"owner": {"reputation": 7454, "user_id": 1377943, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/4i1Qa.jpg?s=128&g=1", "display_name": "Paritosh Piplewar", "link": "https://stackoverflow.com/users/1377943/paritosh-piplewar"}, "reply_to_user": {"reputation": 911, "user_id": 5079196, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/UWfbG.jpg?s=128&g=1", "display_name": "gwalshington", "link": "https://stackoverflow.com/users/5079196/gwalshington"}, "edited": false, "score": 0, "creation_date": 1459783753, "post_id": 36400854, "comment_id": 60429597, "body": "can you just tell me the output of <code>params</code> ; just put <code>puts params</code> and see console."}, {"owner": {"reputation": 911, "user_id": 5079196, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/UWfbG.jpg?s=128&g=1", "display_name": "gwalshington", "link": "https://stackoverflow.com/users/5079196/gwalshington"}, "edited": false, "score": 0, "creation_date": 1459784642, "post_id": 36400854, "comment_id": 60430258, "body": "actually, its too long for a comment - i have them listed in the question above. thanks!"}, {"owner": {"reputation": 7454, "user_id": 1377943, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/4i1Qa.jpg?s=128&g=1", "display_name": "Paritosh Piplewar", "link": "https://stackoverflow.com/users/1377943/paritosh-piplewar"}, "reply_to_user": {"reputation": 911, "user_id": 5079196, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/UWfbG.jpg?s=128&g=1", "display_name": "gwalshington", "link": "https://stackoverflow.com/users/5079196/gwalshington"}, "edited": false, "score": 0, "creation_date": 1459784929, "post_id": 36400854, "comment_id": 60430445, "body": "if above params is correct, try  <code>params[&quot;user&quot;][&quot;languages_users_attributes&quot;]</code>"}, {"owner": {"reputation": 7454, "user_id": 1377943, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/4i1Qa.jpg?s=128&g=1", "display_name": "Paritosh Piplewar", "link": "https://stackoverflow.com/users/1377943/paritosh-piplewar"}, "reply_to_user": {"reputation": 911, "user_id": 5079196, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/UWfbG.jpg?s=128&g=1", "display_name": "gwalshington", "link": "https://stackoverflow.com/users/5079196/gwalshington"}, "edited": false, "score": 0, "creation_date": 1459785330, "post_id": 36400854, "comment_id": 60430703, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/108201/discussion-between-paritosh-piplewar-and-gwalshington\">continue this discussion in chat</a>."}, {"owner": {"reputation": 911, "user_id": 5079196, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/UWfbG.jpg?s=128&g=1", "display_name": "gwalshington", "link": "https://stackoverflow.com/users/5079196/gwalshington"}, "edited": false, "score": 0, "creation_date": 1459811023, "post_id": 36400854, "comment_id": 60444231, "body": "Okay, I have this working, and now the error is &quot;you cannot call create unless the parent is saved.&quot; - i think this ties back to the first comment suggesting to call after_create. Any ideas here? Thanks!"}, {"owner": {"reputation": 7454, "user_id": 1377943, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/4i1Qa.jpg?s=128&g=1", "display_name": "Paritosh Piplewar", "link": "https://stackoverflow.com/users/1377943/paritosh-piplewar"}, "reply_to_user": {"reputation": 911, "user_id": 5079196, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/UWfbG.jpg?s=128&g=1", "display_name": "gwalshington", "link": "https://stackoverflow.com/users/5079196/gwalshington"}, "edited": false, "score": 0, "creation_date": 1459822834, "post_id": 36400854, "comment_id": 60447390, "body": "it seems like <code>user</code> record failed to save,are you sure you don&#39;t have any validation error ?"}, {"owner": {"reputation": 911, "user_id": 5079196, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/UWfbG.jpg?s=128&g=1", "display_name": "gwalshington", "link": "https://stackoverflow.com/users/5079196/gwalshington"}, "edited": false, "score": 0, "creation_date": 1459867033, "post_id": 36400854, "comment_id": 60473286, "body": "Okay, so after investigating more, my user is now saving but the nested form for languages_user is not. In my console I&#39;m getting <code>Unpermitted parameter: languages_user</code>"}, {"owner": {"reputation": 911, "user_id": 5079196, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/UWfbG.jpg?s=128&g=1", "display_name": "gwalshington", "link": "https://stackoverflow.com/users/5079196/gwalshington"}, "edited": false, "score": 0, "creation_date": 1459867541, "post_id": 36400854, "comment_id": 60473689, "body": "I&#39;ll also add that I&#39;m back to the after_create method in the model because of the issue with not being able to save languages_user until the parent (user) is saved. I will post my updated model in the question."}, {"owner": {"reputation": 7454, "user_id": 1377943, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/4i1Qa.jpg?s=128&g=1", "display_name": "Paritosh Piplewar", "link": "https://stackoverflow.com/users/1377943/paritosh-piplewar"}, "reply_to_user": {"reputation": 911, "user_id": 5079196, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/UWfbG.jpg?s=128&g=1", "display_name": "gwalshington", "link": "https://stackoverflow.com/users/5079196/gwalshington"}, "edited": false, "score": 0, "creation_date": 1459868292, "post_id": 36400854, "comment_id": 60474314, "body": "your errors are beyond the scope of this question. i have updated the answer anyway"}, {"owner": {"reputation": 911, "user_id": 5079196, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/UWfbG.jpg?s=128&g=1", "display_name": "gwalshington", "link": "https://stackoverflow.com/users/5079196/gwalshington"}, "edited": false, "score": 0, "creation_date": 1459869480, "post_id": 36400854, "comment_id": 60475196, "body": "The question is how to pass user_is and save the jointable - which isn&#39;t happening right now. The solution you updated it to gives an error <code>You cannot call create unless the parent is saved</code>  Do you not think I would need to save the join table in the model, using an after_create call?"}], "tags": [], "owner": {"reputation": 7454, "user_id": 1377943, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/4i1Qa.jpg?s=128&g=1", "display_name": "Paritosh Piplewar", "link": "https://stackoverflow.com/users/1377943/paritosh-piplewar"}, "is_accepted": false, "score": 3, "last_activity_date": 1459868249, "last_edit_date": 1459868249, "creation_date": 1459767787, "answer_id": 36400854, "question_id": 36296481, "link": "https://stackoverflow.com/questions/36296481/pass-user-id-in-nested-form-upon-registration-and-save-both-models/36400854#36400854", "title": "pass user_id in nested form upon registration and save both models", "body": "<p>It is simple. Just pass block to <code>#create</code> method in <code>Users::RegistrationsController</code> controller</p>\n\n<pre><code>def create\n super do |user|\n   language_user_params = params[:user][:langauges_user].permit(:language_id,:level)\n   user.languages_users.create(language_id: language_user_params[:language_id], level: language_user_params[:level])\n end \nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 911, "user_id": 5079196, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/UWfbG.jpg?s=128&g=1", "display_name": "gwalshington", "link": "https://stackoverflow.com/users/5079196/gwalshington"}, "edited": false, "score": 0, "creation_date": 1459971467, "post_id": 36443178, "comment_id": 60533469, "body": "What would my new controller look like? When I write the above, and my new controller has: <code>@user = User.new</code> <code>build_resource({})</code> <code>respond_with self.resource</code> the nested form section is no longer on the registration form."}, {"owner": {"reputation": 515, "user_id": 3021717, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000281462435/picture?type=large", "display_name": "Sukanta", "link": "https://stackoverflow.com/users/3021717/sukanta"}, "reply_to_user": {"reputation": 911, "user_id": 5079196, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/UWfbG.jpg?s=128&g=1", "display_name": "gwalshington", "link": "https://stackoverflow.com/users/5079196/gwalshington"}, "edited": false, "score": 0, "creation_date": 1460011824, "post_id": 36443178, "comment_id": 60548289, "body": "this method you should use in <b>user.rb</b> file."}, {"owner": {"reputation": 911, "user_id": 5079196, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/UWfbG.jpg?s=128&g=1", "display_name": "gwalshington", "link": "https://stackoverflow.com/users/5079196/gwalshington"}, "edited": false, "score": 0, "creation_date": 1460040357, "post_id": 36443178, "comment_id": 60569393, "body": "Yes, I get that. What would my controller look like? Just <code>super</code> or <code>@user = User.new</code> or neither of those and another solution?"}], "tags": [], "owner": {"reputation": 515, "user_id": 3021717, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000281462435/picture?type=large", "display_name": "Sukanta", "link": "https://stackoverflow.com/users/3021717/sukanta"}, "is_accepted": false, "score": 0, "last_activity_date": 1460011842, "last_edit_date": 1460011842, "creation_date": 1459924094, "answer_id": 36443178, "question_id": 36296481, "link": "https://stackoverflow.com/questions/36296481/pass-user-id-in-nested-form-upon-registration-and-save-both-models/36443178#36443178", "title": "pass user_id in nested form upon registration and save both models", "body": "<p>You can do like this</p>\n\n<pre><code>after_create :create_languages_user\n\ndef create_languages_user\n @languages_user = self.languages_users.create\nend\n</code></pre>\n"}], "owner": {"reputation": 911, "user_id": 5079196, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/UWfbG.jpg?s=128&g=1", "display_name": "gwalshington", "link": "https://stackoverflow.com/users/5079196/gwalshington"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 229, "favorite_count": 1, "answer_count": 3, "score": 3, "last_activity_date": 1460011842, "creation_date": 1459291687, "last_edit_date": 1459997393, "question_id": 36296481, "link": "https://stackoverflow.com/questions/36296481/pass-user-id-in-nested-form-upon-registration-and-save-both-models", "title": "pass user_id in nested form upon registration and save both models", "body": "<p>I have a nested form on my Devise registration form, which populates a join table. The join table information is not saving because user_id is nil. This is due to the fact that they are not signed in yet, so I can't pass current_user. How can I pass the user_id to save the join table (Languages Users) in one form?</p>\n\n<p>relevant section of new.html.erb</p>\n\n<pre><code> &lt;%= form_for(resource, as: resource, url: registration_path(resource)) do |f| %&gt;\n  &lt;%= devise_error_messages! %&gt;\n  &lt;div class=\"field\"&gt;\n    &lt;%= f.label :first_name %&gt;&lt;br /&gt;\n    &lt;%= f.text_field :first_name, autofocus: true %&gt;\n  &lt;/div&gt;\n  &lt;%= f.fields_for :languages_users do |lu| %&gt;\n   &lt;div class=\"fields\"&gt;\n     &lt;%= lu.collection_select(:language_id, Language.order('language ASC').all, :id, :language) %&gt;&lt;br&gt;\n     &lt;%= lu.hidden_field :level, value: 1 %&gt;\n     &lt;%#= lu.hidden_field :user_id, value: current_user.id %&gt;\n  &lt;% end %&gt;\n   &lt;/div&gt;\n   &lt;div class=\"actions\"&gt;\n     &lt;%= f.submit \"Sign up\" %&gt;\n   &lt;/div&gt;\n  &lt;% end %&gt;\n</code></pre>\n\n<p>registrations_controller.rb</p>\n\n<pre><code>    class Users::RegistrationsController &lt; Devise::RegistrationsController\n    before_filter :configure_permitted_parameters\n    def new\n         build_resource({})\n          resource.languages_users.build(user_id: current_user)  \n         respond_with self.resource\n    end\n  def create\n    super \n  end\n private\n def configure_permitted_parameters\n        devise_parameter_sanitizer.for(:sign_up) { |u|\n          u.permit(:email, :password, :password_confirmation, :bio, :location, :last_name, :first_name, :nationality, :avatar, languages_users_attributes: [ :language_id, :user_id, :level]) }\n  end\nend\n</code></pre>\n\n<p>here are my params:</p>\n\n<pre><code>  {\"utf8\"=&gt;\"\u2713\",\n \"authenticity_token\"=&gt;\"v/uM0+B7/XCUKmhyFGoEKqunCllXAK50uZN5f+TDpUsxlnIsgQVPbXhEb1q1P5pmG586iaULRROyarWzAzz12w==\",\n \"user\"=&gt;{\"first_name\"=&gt;\"Walsh\",\n \"last_name\"=&gt;\"Costigan\",\n \"location\"=&gt;\"w\",\n \"nationality\"=&gt;\"United States\",\n \"bio\"=&gt;\"w\",\n \"email\"=&gt;\"walsh@seamlessdocs.com\",\n \"user\"=&gt;{\"avatar\"=&gt;#&lt;ActionDispatch::Http::UploadedFile:0x007fdd25023f78 @tempfile=#&lt;Tempfile:/var/folders/cn/l75pvjk9707bj93z_yykb0t40000gn/T/RackMultipart20160403-6431-1hpthwr.JPG&gt;,\n @original_filename=\"IMG_4574.JPG\",\n @content_type=\"image/jpeg\",\n @headers=\"Content-Disposition: form-data; name=\\\"user[user[avatar]]\\\"; filename=\\\"IMG_4574.JPG\\\"\\r\\nContent-Type: image/jpeg\\r\\n\"&gt;},\n \"languages_users_attributes\"=&gt;{\"language_id\"=&gt;\"18\",\n \"level\"=&gt;\"1\"},\n \"password\"=&gt;\"[FILTERED]\",\n \"password_confirmation\"=&gt;\"[FILTERED]\"},\n \"commit\"=&gt;\"Sign up\"}\n</code></pre>\n\n<p>UPDATE**  This is currently where my code is. It saves the user, but not the languages_user model</p>\n\n<p>user.rb\n    after_create :create_languages_user</p>\n\n<pre><code>def create_languages_user\n @users = self.id\n @languages_user = LanguagesUser.new(@user)\nend\n</code></pre>\n\n<p>registrations controller:</p>\n\n<pre><code>def new\n @user = User.new\n build_resource({})\n respond_with self.resource\nend\n\ndef create \n super\nend\n\nprivate\n\ndef configure_permitted_parameters\n    devise_parameter_sanitizer.for(:sign_up) { |u|\n      u.permit(:email, :password, :password_confirmation, :bio, :location, :last_name, :first_name, :nationality, :avatar, languages_users_attributes: [ :language_id, :level]) }\nend\n</code></pre>\n"}, {"tags": ["ruby", "csv"], "comments": [{"owner": {"reputation": 14193, "user_id": 183203, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cf9ec57f64280ffe34ddd221d5c5151f?s=128&d=identicon&r=PG", "display_name": "antlersoft", "link": "https://stackoverflow.com/users/183203/antlersoft"}, "edited": false, "score": 2, "creation_date": 1459291496, "post_id": 36296337, "comment_id": 60217771, "body": "Get your co-worker to fix his app so it generates valid .csv (I know this may be easier said than done, but any other fixes might cause your code to break if it ever has to process correct .csv)"}, {"owner": {"reputation": 14193, "user_id": 183203, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cf9ec57f64280ffe34ddd221d5c5151f?s=128&d=identicon&r=PG", "display_name": "antlersoft", "link": "https://stackoverflow.com/users/183203/antlersoft"}, "edited": false, "score": 1, "creation_date": 1459291522, "post_id": 36296337, "comment_id": 60217780, "body": "Also, post an example of the problematic .csv file"}, {"owner": {"reputation": 145, "user_id": 5889992, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/JR264.jpg?s=128&g=1", "display_name": "ADL", "link": "https://stackoverflow.com/users/5889992/adl"}, "reply_to_user": {"reputation": 14193, "user_id": 183203, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cf9ec57f64280ffe34ddd221d5c5151f?s=128&d=identicon&r=PG", "display_name": "antlersoft", "link": "https://stackoverflow.com/users/183203/antlersoft"}, "edited": false, "score": 0, "creation_date": 1459291698, "post_id": 36296337, "comment_id": 60217860, "body": "the app was made 8 years ago by another programmer in PHP, that programmer was fired long ago :(, we have since begun working on a new rewrite, completely abandoning the old and it will be done in feb 2017, unfortunately its still very much in use and using the data in excel got old. im writing up a tool in sinatra to display reports for the next year when our new app is finished"}, {"owner": {"reputation": 14193, "user_id": 183203, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cf9ec57f64280ffe34ddd221d5c5151f?s=128&d=identicon&r=PG", "display_name": "antlersoft", "link": "https://stackoverflow.com/users/183203/antlersoft"}, "edited": false, "score": 0, "creation_date": 1459292146, "post_id": 36296337, "comment_id": 60218008, "body": "You won&#39;t be able to parse it with CSV then; you&#39;ll have to read it in as text and try to do the parsing yourself (although from the examples you gave, that seems like it will be quite a task)-- Does Excel in fact read it correctly?"}, {"owner": {"reputation": 145, "user_id": 5889992, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/JR264.jpg?s=128&g=1", "display_name": "ADL", "link": "https://stackoverflow.com/users/5889992/adl"}, "reply_to_user": {"reputation": 14193, "user_id": 183203, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cf9ec57f64280ffe34ddd221d5c5151f?s=128&d=identicon&r=PG", "display_name": "antlersoft", "link": "https://stackoverflow.com/users/183203/antlersoft"}, "edited": false, "score": 0, "creation_date": 1459292287, "post_id": 36296337, "comment_id": 60218074, "body": "yeah, excel is able to read it just fine"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1459292944, "post_id": 36296337, "comment_id": 60218307, "body": "You can either use Excel to correct the problem, which Ruby could script, or use Ruby solely to open, split the lines on commas which is very error-prone, then rebuild them using CSV. When processing data problems it takes a lot of domain knowledge to fix the problem. CSV is especially prone to incorrect generation because people assume they understand the spec and then the corner-cases pop up that the code butchers."}, {"owner": {"reputation": 145, "user_id": 5889992, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/JR264.jpg?s=128&g=1", "display_name": "ADL", "link": "https://stackoverflow.com/users/5889992/adl"}, "edited": false, "score": 1, "creation_date": 1459293496, "post_id": 36296337, "comment_id": 60218459, "body": "for my excel option i would essentially programatically just open and save the CSV  and read the new csv?"}], "owner": {"reputation": 145, "user_id": 5889992, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/JR264.jpg?s=128&g=1", "display_name": "ADL", "link": "https://stackoverflow.com/users/5889992/adl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 523, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1459293716, "creation_date": 1459290996, "last_edit_date": 1495541272, "question_id": 36296337, "link": "https://stackoverflow.com/questions/36296337/how-do-i-delete-stray-double-quotes-in-a-csv-file-before-my-code-runs", "title": "How do I delete stray double-quotes in a CSV file before my code runs?", "body": "<p>I have a CSV file I import from one site and export to another web app.</p>\n\n<p>However, when running my Ruby file I get the following error:</p>\n\n<pre><code>C:\\Users\\ALilland\\Documents\\sinatra\\csv_to_screen&gt;ruby app.rb\nC:/Ruby22/lib/ruby/2.2.0/csv.rb:1843:in `block (2 levels) in shift': Missing or\nstray quote in line 762 (CSV::MalformedCSVError)\n    from C:/Ruby22/lib/ruby/2.2.0/csv.rb:1836:in `each'\n    from C:/Ruby22/lib/ruby/2.2.0/csv.rb:1836:in `block in shift'\n    from C:/Ruby22/lib/ruby/2.2.0/csv.rb:1796:in `loop'\n    from C:/Ruby22/lib/ruby/2.2.0/csv.rb:1796:in `shift'\n    from C:/Ruby22/lib/ruby/2.2.0/csv.rb:1738:in `each'\n    from C:/Ruby22/lib/ruby/2.2.0/csv.rb:1122:in `block in foreach'\n    from C:/Ruby22/lib/ruby/2.2.0/csv.rb:1273:in `open'\n    from C:/Ruby22/lib/ruby/2.2.0/csv.rb:1121:in `foreach'\n    from app.rb:129:in `lost'\n    from app.rb:157:in `scorecard'\n    from app.rb:203:in `&lt;main&gt;' \n</code></pre>\n\n<p>This is an example of where a quote does not need to be in my data <code>\"GENERAL CONTRACTOR, ...\"</code>:</p>\n\n<pre><code>MM,MM,\"VENABLE, LLP\",\"LOS ANGELES\",\"GENERAL CONTRACTOR, ...\",,Dead,02/11/2016,0\n</code></pre>\n\n<p>This is an example of completely missing quotes on <code>irvine</code>:</p>\n\n<pre><code>GS,GS,\"REPLACE 1.5 DIELECTRIC UNION,IRVINE,\"THE IRVINE CO. -  EXECU...\",,Job162048,02/01/2016,0\n</code></pre>\n\n<p>These \"missing or stray quotes\" are scattered throughout the CSV, usually in <code>project_name = row[2]</code>.</p>\n\n<p>What can I do to overwrite the stray quotes before my <code>foreach</code> block runs? </p>\n\n<p>Here is a post I found that relates to my problem, but I was struggling to figure out how to implement it. This error seems rather well documented on the internet, I even heard a podcast on it the other day but now I officially ran into the problem firsthand and have come up empty. \"<a href=\"https://stackoverflow.com/questions/7887359/how-to-remove-the-extra-double-quote\">How to remove the extra double quote?</a>\"</p>\n\n<p>My complete <code>foreach</code> block is:</p>\n\n<pre><code>def lost(initials, salesperson)\n  my_status = 'Lost'\n  lost = 0\n  count = 0\n  CSV.foreach(path1, :encoding =&gt; 'windows-1251:utf-8') do |row|\n    salesman = row[0]\n    project_manager = row[1]\n    project_name = row[2]\n    project_city = row[3]\n    customer = row[4]\n    status = row[6]\n    if status[0,4] == 'Dead'\n      status = 'Dead'\n    end\n    bid_date = Date.strptime(row[7], '%m/%d/%Y')\n    amount = row[8].gsub(/(?&lt;!^|,)\"(?!,|$)/, '').tr(',', '').to_i\n\n    next if salesman != initials || status != my_status || bid_date &lt; fiscal_start\n    dollar_amount = '$' + amount.to_s.reverse.gsub(/...(?=.)/,'\\&amp;,').reverse\n    lost = lost + amount\n    count = count + 1\n  end\n   @lost_count = count.to_s\n   @lost_amount = \"$\" + lost.to_s.reverse.gsub(/...(?=.)/,'\\&amp;,').reverse\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3"], "comments": [{"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1459289772, "post_id": 36295895, "comment_id": 60217144, "body": "can you check in your rails app is RAILS_ENV is set to development as well?"}, {"owner": {"reputation": 26, "user_id": 6131157, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d3d919b7a8b7c52ccf14edc85dd0fd8?s=128&d=identicon&r=PG&f=1", "display_name": "KhaKhuu", "link": "https://stackoverflow.com/users/6131157/khakhuu"}, "reply_to_user": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1459289871, "post_id": 36295895, "comment_id": 60217192, "body": "Yes, I have already checked it:     Puma 1.6.3 starting...     * Min threads: 0, max threads: 16     * Environment: development     * Listening on tcp://0.0.0.0:9292 Beside that I add Rails.env to my logger. It printed &quot;development&quot;"}, {"owner": {"reputation": 10323, "user_id": 1220355, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cb2525ec6155e479bdefe9ed6c437d07?s=128&d=identicon&r=PG", "display_name": "Anthony E", "link": "https://stackoverflow.com/users/1220355/anthony-e"}, "edited": false, "score": 0, "creation_date": 1459297874, "post_id": 36295895, "comment_id": 60219752, "body": "Is the 500 error page you&#39;re getting dynamically generated by Rails or is it the 500.html in the public/ folder?"}, {"owner": {"reputation": 26, "user_id": 6131157, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d3d919b7a8b7c52ccf14edc85dd0fd8?s=128&d=identicon&r=PG&f=1", "display_name": "KhaKhuu", "link": "https://stackoverflow.com/users/6131157/khakhuu"}, "edited": false, "score": 0, "creation_date": 1459362010, "post_id": 36295895, "comment_id": 60256690, "body": "It&#39;s the public/500.html"}], "owner": {"reputation": 26, "user_id": 6131157, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d3d919b7a8b7c52ccf14edc85dd0fd8?s=128&d=identicon&r=PG&f=1", "display_name": "KhaKhuu", "link": "https://stackoverflow.com/users/6131157/khakhuu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 283, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1459289792, "creation_date": 1459288821, "last_edit_date": 1459289792, "question_id": 36295895, "link": "https://stackoverflow.com/questions/36295895/rails-i-dont-get-any-error-messages-in-my-log-file-only-500-page", "title": "Rails: I don&#39;t get any error messages in my log file only 500 page", "body": "<p>I am running a rails 3 app under ruby 1.9.3 with puma.\nWhen open localhost:3000 there is always the 500 page shown.\nI've tried to set binding.pry and log messages across the files (e.g. ApplicationController), but it seems they are never reached.\nI changed the root path to a controller that does not exist, still no log messages.\nSo it seems like the route is never reached as well.\nI ve looked into the rails log, puma log, rack log but nothing is shown.\nAny idea how to get appropriate error messages?\nPlease help, I am so frustrated, looking for the erros for days.</p>\n\n<p>I should add that I can see requests in my log:\nStarted GET \"/\" for 127.0.0.1 at 2016-03-30 00:09:24 +0200\nBut that's it. Rails.logger isnt even logging most of the time.</p>\n\n<p>config.consider_all_requests_local       = true\n config.action_controller.perform_caching = false\nis also set.</p>\n\n<p>I've tried RACK_ENV=development puma config.ru</p>\n"}, {"tags": ["ruby", "windows", "macos", "zip", "net-http"], "answers": [{"tags": [], "owner": {"reputation": 1814, "user_id": 4488944, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08c8e69dd8df9243e02a376b882b2502?s=128&d=identicon&r=PG&f=1", "display_name": "Alexa Y", "link": "https://stackoverflow.com/users/4488944/alexa-y"}, "is_accepted": true, "score": 0, "last_activity_date": 1459291221, "creation_date": 1459291221, "answer_id": 36296386, "question_id": 36295822, "link": "https://stackoverflow.com/questions/36295822/ruby-writing-zip-file-works-on-mac-but-not-on-windows-how-to-recieve-zip-file/36296386#36296386", "title": "Ruby writing zip file works on Mac but not on windows / How to recieve zip file in Net::HTTP", "body": "<p>The problem is due to the way Windows handles line endings (<code>\\r\\n</code> for Windows, whereas OS X and other Unix based operating systems use just <code>\\n</code>).  When using <code>File.open</code>, using the mode of just <code>w</code> makes the file subject to line ending changes, so any occurrences of byte 0x0A (or <code>\\n</code>) are converted into bytes 0x0D 0x0A (or <code>\\r\\n</code>), which effectively breaks the zip.</p>\n\n<p>When opening the file for write, use the mode <code>wb</code> instead, as this will suppress any line ending changes.</p>\n\n<p><a href=\"http://ruby-doc.org/core-2.2.0/IO.html#method-c-new-label-IO+Open+Mode\" rel=\"nofollow\">http://ruby-doc.org/core-2.2.0/IO.html#method-c-new-label-IO+Open+Mode</a></p>\n"}, {"tags": [], "owner": {"reputation": 13, "user_id": 3751188, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e85d7e2df82147d05c60f8ec36003d99?s=128&d=identicon&r=PG", "display_name": "Dominik M&#252;ller", "link": "https://stackoverflow.com/users/3751188/dominik-m%c3%bcller"}, "is_accepted": false, "score": 0, "last_activity_date": 1459291470, "last_edit_date": 1495541272, "creation_date": 1459291470, "answer_id": 36296436, "question_id": 36295822, "link": "https://stackoverflow.com/questions/36295822/ruby-writing-zip-file-works-on-mac-but-not-on-windows-how-to-recieve-zip-file/36296436#36296436", "title": "Ruby writing zip file works on Mac but not on windows / How to recieve zip file in Net::HTTP", "body": "<p>Many thanks! Just as you posted the solution i found it out myself..</p>\n\n<p>So much trouble because of one missing 'b' :/</p>\n\n<p>Thank you very much!</p>\n\n<p><strong>The solution (see <a href=\"https://stackoverflow.com/a/36296386/3751188\">Ben Y's answer</a>):</strong></p>\n\n<pre><code>result = comodo.get_cert(\"&lt;somenumber&gt;\")\nputs result['Content-Type']\nputs result.inspect\nputs result.body\n\nFile.open(\"test.zip\", \"wb\") do |file|\n    file.write result.body\nend\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 3751188, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e85d7e2df82147d05c60f8ec36003d99?s=128&d=identicon&r=PG", "display_name": "Dominik M&#252;ller", "link": "https://stackoverflow.com/users/3751188/dominik-m%c3%bcller"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 148, "favorite_count": 0, "accepted_answer_id": 36296386, "answer_count": 2, "score": -1, "last_activity_date": 1459291470, "creation_date": 1459288539, "question_id": 36295822, "link": "https://stackoverflow.com/questions/36295822/ruby-writing-zip-file-works-on-mac-but-not-on-windows-how-to-recieve-zip-file", "title": "Ruby writing zip file works on Mac but not on windows / How to recieve zip file in Net::HTTP", "body": "<p>actually i'm writing a ruby script which accesses an API based on HTTP-POST calls.\nThe API returns a zip file containing textdocuments when i call it with specific POST-Parameters. At the moment i'm doing that with the Net::HTTP Package.</p>\n\n<p>Now my problem:\nIt seems to return the zip-file as a string as far as i know. I can see \"PK\" (which i suppose is part of the PK-Header of zip-files) and the text from the documents.</p>\n\n<p>And the Content-Type Header is telling me \"application/x-zip-compressed; name=\"somename.zip\"\".</p>\n\n<p>When i save the zip file like so:</p>\n\n<pre><code>result = comodo.get_cert(\"&lt;somenumber&gt;\")\nputs result['Content-Type']\nputs result.inspect\nputs result.body\n\nFile.open(\"test.zip\", \"w\") do |file|\n    file.write result.body\nend\n</code></pre>\n\n<p>I can unzip it on my macbook without further problems. But when i run the same code on my Win10 PC it tells me that the file is corrupt or not a ZIP-file.</p>\n\n<p>Has it something to do with the encoding? Can i change it, so it's working on both?\nOr is it a complete wrong approach on how to recieve a zip-file from a POST-request?</p>\n\n<p>PS:\nMy ruby-version on Mac:</p>\n\n<pre><code>ruby 2.2.3p173\n</code></pre>\n\n<p>My ruby-version on Windows:</p>\n\n<pre><code>ruby 2.2.4p230\n</code></pre>\n\n<p>Many thanks in advance!</p>\n"}, {"tags": ["arrays", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 39282, "user_id": 336920, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/6e2dbeb23d3fc6552a6e26800ed63289?s=128&d=identicon&r=PG", "display_name": "B Seven", "link": "https://stackoverflow.com/users/336920/b-seven"}, "edited": false, "score": 0, "creation_date": 1459289306, "post_id": 36295942, "comment_id": 60216966, "body": "The idea is to modify the array. <code>take</code> will is the same as taker."}, {"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "reply_to_user": {"reputation": 39282, "user_id": 336920, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/6e2dbeb23d3fc6552a6e26800ed63289?s=128&d=identicon&r=PG", "display_name": "B Seven", "link": "https://stackoverflow.com/users/336920/b-seven"}, "edited": false, "score": 0, "creation_date": 1459290469, "post_id": 36295942, "comment_id": 60217390, "body": "@BSeven. Okay changed my answer, not sure if it&#39;s any better."}, {"owner": {"reputation": 39282, "user_id": 336920, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/6e2dbeb23d3fc6552a6e26800ed63289?s=128&d=identicon&r=PG", "display_name": "B Seven", "link": "https://stackoverflow.com/users/336920/b-seven"}, "edited": false, "score": 0, "creation_date": 1459294357, "post_id": 36295942, "comment_id": 60218726, "body": "Yes, that works. I upvoted your answer. <code>z = (1..5).to_a; taker z, 2; z</code>"}], "tags": [], "owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "is_accepted": false, "score": 1, "last_activity_date": 1459290336, "last_edit_date": 1459290336, "creation_date": 1459289029, "answer_id": 36295942, "question_id": 36295813, "link": "https://stackoverflow.com/questions/36295813/how-to-do-take-in-ruby/36295942#36295942", "title": "How to do take! in Ruby?", "body": "<p>Try:</p>\n\n<pre><code>def taker(arr, n)\n  arr.pop(arr.length - n)\n  arr\nend\n\np taker([1, 2, 3, 4, 5], 2) #=&gt; [1, 2]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 633, "user_id": 5107759, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/33e659c0770221780a6fd21960909b6d?s=128&d=identicon&r=PG", "display_name": "joanbm", "link": "https://stackoverflow.com/users/5107759/joanbm"}, "is_accepted": false, "score": 1, "last_activity_date": 1459290529, "creation_date": 1459290529, "answer_id": 36296244, "question_id": 36295813, "link": "https://stackoverflow.com/questions/36295813/how-to-do-take-in-ruby/36296244#36296244", "title": "How to do take! in Ruby?", "body": "<p>Using <code>Array#replace</code> suggests itself:</p>\n\n<pre><code>z = (1..10).to_a\nz.object_id    # 23576880\n\ndef z.take! n\n  replace(take n)\nend\n\nz.take! 5      # [1, 2, 3, 4, 5]\nz.object_id    # 23576880\n</code></pre>\n\n<p>Example defines singleton method, but you may define <code>#take!</code> on your array-derived class, using refinement on a module etc.</p>\n"}, {"comments": [{"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1459293494, "post_id": 36296283, "comment_id": 60218458, "body": "I can&#39;t reproduce this. Am getting <code>x #=&gt; [3, 4]</code>. Not sure why?"}, {"owner": {"reputation": 39282, "user_id": 336920, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/6e2dbeb23d3fc6552a6e26800ed63289?s=128&d=identicon&r=PG", "display_name": "B Seven", "link": "https://stackoverflow.com/users/336920/b-seven"}, "reply_to_user": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1459294514, "post_id": 36296283, "comment_id": 60218773, "body": "Haha. That&#39;s correct. @sagarpandya82. I came up with this same solution and it didn&#39;t work. It appears to work because it returns <code>[1,2]</code>."}, {"owner": {"reputation": 39282, "user_id": 336920, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/6e2dbeb23d3fc6552a6e26800ed63289?s=128&d=identicon&r=PG", "display_name": "B Seven", "link": "https://stackoverflow.com/users/336920/b-seven"}, "edited": false, "score": 1, "creation_date": 1459294821, "post_id": 36296283, "comment_id": 60218878, "body": "@ChrisHeald - Besides you and me, J&#246;rg W Mittag thought the same. Is there a special reason that it would seem to work that way?"}], "tags": [], "owner": {"reputation": 56502, "user_id": 271475, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b00f41e5f2a69734051f2a78f4f3785?s=128&d=identicon&r=PG", "display_name": "Chris Heald", "link": "https://stackoverflow.com/users/271475/chris-heald"}, "is_accepted": false, "score": 2, "last_activity_date": 1459294749, "last_edit_date": 1459294749, "creation_date": 1459290738, "answer_id": 36296283, "question_id": 36295813, "link": "https://stackoverflow.com/questions/36295813/how-to-do-take-in-ruby/36296283#36296283", "title": "How to do take! in Ruby?", "body": "<p>I'd just use <code>Array#slice!</code></p>\n\n<pre><code>x = [1, 2, 3, 4]\nx.slice!(2..-1) # Will take! the first 2 elements of the array\nx # =&gt; [1, 2]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "is_accepted": false, "score": 2, "last_activity_date": 1459290828, "creation_date": 1459290828, "answer_id": 36296297, "question_id": 36295813, "link": "https://stackoverflow.com/questions/36295813/how-to-do-take-in-ruby/36296297#36296297", "title": "How to do take! in Ruby?", "body": "<p>There are several possibilities.</p>\n\n<p>The Swiss Army Knife that <em>always</em> works is <a href=\"http://ruby-doc.org/core/Array.html#method-i-replace\" rel=\"nofollow\"><code>Array#replace</code></a> which simply replaces the contents of the receiver with the contents of the argument, and thus can be used to transform any array into any other array, so you can just say something like:</p>\n\n<pre><code>class Array\n  def take!(n)\n    replace(take(n))\n  end\nend\n</code></pre>\n\n<p>Using <a href=\"http://ruby-doc.org/core/Array.html#method-i-slice-21\" rel=\"nofollow\"><code>Array#slice!</code></a> is another possibility:</p>\n\n<pre><code>class Array\n  def take!(n)\n    slice!(0, n)\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 39282, "user_id": 336920, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/6e2dbeb23d3fc6552a6e26800ed63289?s=128&d=identicon&r=PG", "display_name": "B Seven", "link": "https://stackoverflow.com/users/336920/b-seven"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 0, "answer_count": 4, "score": 1, "last_activity_date": 1459294749, "creation_date": 1459288506, "question_id": 36295813, "link": "https://stackoverflow.com/questions/36295813/how-to-do-take-in-ruby", "title": "How to do take! in Ruby?", "body": "<p>What is a good way to take (keep) the first n elements in an array and delete the rest?</p>\n\n<p>If there is no built-in method, then</p>\n\n<pre><code>def take! ary, n\n  ...\nend\n\nz = (1..10).to_a\ntake! z, 5\n# z is [1,2,3,4,5]\n</code></pre>\n"}, {"tags": ["mysql", "ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 3997, "user_id": 3998420, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/55ea542584d3fd2a430c3d409bdafc95?s=128&d=identicon&r=PG&f=1", "display_name": "bkunzi01", "link": "https://stackoverflow.com/users/3998420/bkunzi01"}, "edited": false, "score": 0, "creation_date": 1459289770, "post_id": 36295753, "comment_id": 60217143, "body": "Hey I didn&#39;t fully understand your question so if you could clarify what you mean by &quot;My problem is: In this join table I added a reference to the User model. &quot;  The join table for a has_and_belongs_to_many only allows for two columns (the foreign keys to your setor and client table) so if you&#39;re saying you wanted to add a reference to that table you&#39;ll have to use a &quot;has_many through&quot; setup.  Also, you didn&#39;t put that your client belongs to a user in your Client model."}, {"owner": {"reputation": 255, "user_id": 5678111, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vkQMe.png?s=128&g=1", "display_name": "Sam Rodrigues", "link": "https://stackoverflow.com/users/5678111/sam-rodrigues"}, "reply_to_user": {"reputation": 3997, "user_id": 3998420, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/55ea542584d3fd2a430c3d409bdafc95?s=128&d=identicon&r=PG&f=1", "display_name": "bkunzi01", "link": "https://stackoverflow.com/users/3998420/bkunzi01"}, "edited": false, "score": 0, "creation_date": 1459290306, "post_id": 36295753, "comment_id": 60217330, "body": "For a Client to have many Users, it would have to be through the same number of Setores (1 setor : 1 client; 3 setores: 3 clients), does the has_many/through relation work like this? As for the Client belonging to the User, it always belongs to as many Users as Setores; is this relevant?"}, {"owner": {"reputation": 3997, "user_id": 3998420, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/55ea542584d3fd2a430c3d409bdafc95?s=128&d=identicon&r=PG&f=1", "display_name": "bkunzi01", "link": "https://stackoverflow.com/users/3998420/bkunzi01"}, "edited": false, "score": 0, "creation_date": 1459290429, "post_id": 36295753, "comment_id": 60217377, "body": "Ok so you&#39;re saying if a client is to have one user, he must also have one setore?  Sorry I&#39;m still not sure what you&#39;re trying to do but if you need a way to make sure that clients and setores also know about Users at the same time, you will need to use a &quot;has_many through&quot; association so that you can add additional columns to that join table to store the extra info on users."}, {"owner": {"reputation": 255, "user_id": 5678111, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vkQMe.png?s=128&g=1", "display_name": "Sam Rodrigues", "link": "https://stackoverflow.com/users/5678111/sam-rodrigues"}, "reply_to_user": {"reputation": 3997, "user_id": 3998420, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/55ea542584d3fd2a430c3d409bdafc95?s=128&d=identicon&r=PG&f=1", "display_name": "bkunzi01", "link": "https://stackoverflow.com/users/3998420/bkunzi01"}, "edited": false, "score": 0, "creation_date": 1459290638, "post_id": 36295753, "comment_id": 60217446, "body": "Exactly. In the logical order of this system, a Client must first be assigned a Setor, only then it can have an User (from said Setor) assigned. (Setor means &quot;department&quot;. If my client needs the service of, say, dept. of accounts payable, it gets a helper from this department)"}], "answers": [{"comments": [{"owner": {"reputation": 255, "user_id": 5678111, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vkQMe.png?s=128&g=1", "display_name": "Sam Rodrigues", "link": "https://stackoverflow.com/users/5678111/sam-rodrigues"}, "edited": false, "score": 0, "creation_date": 1459360500, "post_id": 36297220, "comment_id": 60255652, "body": "In this case, where would I store the relation between a Client and his (up to three) UserSetor pairings?"}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "reply_to_user": {"reputation": 255, "user_id": 5678111, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vkQMe.png?s=128&g=1", "display_name": "Sam Rodrigues", "link": "https://stackoverflow.com/users/5678111/sam-rodrigues"}, "edited": false, "score": 0, "creation_date": 1459362099, "post_id": 36297220, "comment_id": 60256741, "body": "@SamOliver probably another join table. <code>ClientUserSetor</code> perhaps. It&#39;s not pretty, but it&#39;ll do the trick. By the way, look at the <a href=\"http://guides.rubyonrails.org/association_basics.html\" rel=\"nofollow noreferrer\">detailed association reference</a>."}, {"owner": {"reputation": 255, "user_id": 5678111, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vkQMe.png?s=128&g=1", "display_name": "Sam Rodrigues", "link": "https://stackoverflow.com/users/5678111/sam-rodrigues"}, "edited": false, "score": 0, "creation_date": 1459362813, "post_id": 36297220, "comment_id": 60257273, "body": "I read your first answer a few times and it gave me the idea of creating a new model, say &quot;WeirdRelation&quot;, with a table that would store only the user_id, setor_id and user_id. This is not how I chose to solve this particular problem (see my answer below), but that&#39;s what I&#39;d go with if I had more &quot;Setores&quot; per Client."}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "reply_to_user": {"reputation": 255, "user_id": 5678111, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vkQMe.png?s=128&g=1", "display_name": "Sam Rodrigues", "link": "https://stackoverflow.com/users/5678111/sam-rodrigues"}, "edited": false, "score": 0, "creation_date": 1459364639, "post_id": 36297220, "comment_id": 60258424, "body": "ok, that approach will work if you have a really simple case like this but im guessing the only reason you&#39;re doing that is because you don&#39;t really understand how to put together many-to-many relationships. Take a look at other stackoverflow questions on the topic."}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "reply_to_user": {"reputation": 255, "user_id": 5678111, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vkQMe.png?s=128&g=1", "display_name": "Sam Rodrigues", "link": "https://stackoverflow.com/users/5678111/sam-rodrigues"}, "edited": false, "score": 0, "creation_date": 1459369023, "post_id": 36297220, "comment_id": 60261060, "body": "@SamOliver I&#39;ve re-done my answer to give you a more concrete example. Hope it&#39;s clear."}], "tags": [], "owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "is_accepted": true, "score": 1, "last_activity_date": 1459368986, "last_edit_date": 1459368986, "creation_date": 1459295775, "answer_id": 36297220, "question_id": 36295753, "link": "https://stackoverflow.com/questions/36295753/additional-foreign-key-on-a-join-table/36297220#36297220", "title": "Additional Foreign Key on a Join Table", "body": "<p>Example of many-to-many associations between three models, done with a single join table:</p>\n\n<p>I start out by generating some models: </p>\n\n<pre><code>rails g model User; rails g model Setor; rails g model Client;\nrails g model Joiner user_id:integer setor_id:integer client_id:integer\n</code></pre>\n\n<p>By the way, <code>references</code> is a way to add a foreign key that refers to an existing model. I.e. <code>user:references</code> will create a user_id column. It also adds an \"index\" to the foreign key, which improves the performance.</p>\n\n<p>Then I add some associations to the classes</p>\n\n<pre><code>class Joiner\n  # columns: user_id, setor_id, client_id\n  belongs_to :user\n  belongs_to :setor\n  belongs_to :client\nend\n\nclass User\n  has_many :joiners\n  has_many :setors, through: :joiners, source: :setor\n  has_many :clients, through: :joiners, source: :client\nend\n\nclass Setor\n  has_many :joiners\n  has_many :users, through: :joiners, source: :user\n  has_many :clients, through: :joiners, source: :client\nend\n\nclass Client\n  has_many :joiners\n  has_many :users, through: :joiners, source: :user\n  has_many :setors, through: :joiners, source: :setor\nend\n</code></pre>\n\n<p>With this code written, you have many-to-many associations for the three models.</p>\n\n<p>You can then write:</p>\n\n<pre><code>User.create; Setor.create;\nJoiner.create(user_id: User.first.id, setor_id: Setor.first.id);\nUser.first.setors.length # =&gt; 1\n</code></pre>\n\n<p>This won't work for self-joins (i.e. a nested comment system), by the way, but that's not part of the question. </p>\n"}, {"tags": [], "owner": {"reputation": 255, "user_id": 5678111, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vkQMe.png?s=128&g=1", "display_name": "Sam Rodrigues", "link": "https://stackoverflow.com/users/5678111/sam-rodrigues"}, "is_accepted": false, "score": 0, "last_activity_date": 1459362961, "last_edit_date": 1459362961, "creation_date": 1459360766, "answer_id": 36316274, "question_id": 36295753, "link": "https://stackoverflow.com/questions/36295753/additional-foreign-key-on-a-join-table/36316274#36316274", "title": "Additional Foreign Key on a Join Table", "body": "<p>What I ended up doing to achieve the desired effect was to add three columns to the Client model:</p>\n\n<p>userset1</p>\n\n<p>userset2</p>\n\n<p>userset3</p>\n\n<p>This way a Client has up to three (since the field can be blank) relations with users, according to the Setores (departments) he has at his service.</p>\n\n<p>This is the easiest solution <strong>in this case</strong> since I only have 3 Setores. It would not be for larger numbers.</p>\n\n<p>If I had more than 3 Setores, making it impractical to keep adding columns in the Client table, I would cerate a new model just to store the relations, in this case, a table that would have, besides its unique ID, client_id, setor_id and user_id.</p>\n"}], "owner": {"reputation": 255, "user_id": 5678111, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vkQMe.png?s=128&g=1", "display_name": "Sam Rodrigues", "link": "https://stackoverflow.com/users/5678111/sam-rodrigues"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "accepted_answer_id": 36297220, "answer_count": 2, "score": 0, "last_activity_date": 1459368986, "creation_date": 1459288242, "last_edit_date": 1495541750, "question_id": 36295753, "link": "https://stackoverflow.com/questions/36295753/additional-foreign-key-on-a-join-table", "title": "Additional Foreign Key on a Join Table", "body": "<p>I have a join table joining a Client and a Setor (plural: setores) models. The relation is that a Client has_and_belongs_to_many Setores (there are three Setores, a Client can have from one to all three of them. Setores have lots of Clients).</p>\n\n<p><strong>My problem is:</strong>\nIn this join table I added a reference to the User model. Setores have many Users, but a relation between one client and one setor have only one user. But I <strong>don't know how to read and write this association on the clients_setores table</strong>.</p>\n\n<p>My models are as follows:</p>\n\n<pre><code>class Client &lt; ActiveRecord::Base\nhas_and_belongs_to_many :documents\nhas_and_belongs_to_many :setores\nhas_many :screenings\nhas_many :contacts\nhas_many :interactions, through: :contacts\nvalidates :cnpj, uniqueness: true\n\n\nclass Setor &lt; ActiveRecord::Base\n  self.table_name = 'setores'\n  has_many :documents\n  has_many :screenings\n  has_many :users\n  has_and_belongs_to_many :clients\n  attr_acessor :user_id\n\n\nclass User &lt; ActiveRecord::Base\nhas_one :setores\nhas_many :clients\n</code></pre>\n\n<p>And the current join tables parameters that have been working appear like this on the end of Clients controller:</p>\n\n<pre><code>  private\n# Use callbacks to share common setup or constraints between actions.\ndef set_client\n  @client = Client.find(params[:id])\nend\n\n# Never trust parameters from the scary internet, only allow the white list through.\ndef client_params\n  params.require(:client).permit(:cnpj, :pacote, :razsoc, :vencimento, user_ids:[], document_ids:[], setor_ids:[])\nend\n</code></pre>\n\n<p>Note that \"user_ids:[]\" was my attempt to get it to work, which has failed so far.</p>\n\n<p>In the views I use the current join tables like this (taken from /client/_form.html.erb):</p>\n\n<pre><code>&lt;%= f.collection_check_boxes :setor_ids, Setor.where(pacote: true), :id, :setor do |b| %&gt;\n</code></pre>\n\n<p>So with these checkboxes I can create an entry in the clients_setores table.</p>\n\n<p><strong>What I want to do</strong> is to be able to pick a User that belongs to a given setor_id from a drop down menu and store this relation in the join table. I did manage to make such menu appear with the following code, in the same _form.html.erb:</p>\n\n<pre><code>&lt;%= f.collection_select :user_ids, User.where(:setor_id =&gt; 1), :id, :email %&gt;\n</code></pre>\n\n<p>But when I submit the form, the values are not saved. I don't know if my problem is just that I didn't get the right way to record this association on my view or if my problem is further down in the controller (probably) and model (maybe).</p>\n\n<p>Closest problem I found in SO was <a href=\"https://stackoverflow.com/questions/9405624/rails-is-it-possible-to-add-extra-attribute-to-a-has-and-belongs-to-many-associ\">Rails 4 Accessing Join Table Attributes</a>, but the association type is different (has_many/through) and there isn't a third relation involved, so I couldn't figure out how to make it work for me.</p>\n"}, {"tags": ["ruby", "freebase", "question-answering"], "owner": {"reputation": 1105, "user_id": 1161270, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30d22ba2a60cccbae9cb7e109442e5b2?s=128&d=identicon&r=PG", "display_name": "randy newfield", "link": "https://stackoverflow.com/users/1161270/randy-newfield"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 74, "favorite_count": 1, "answer_count": 0, "score": 2, "last_activity_date": 1461357136, "creation_date": 1459287894, "question_id": 36295666, "link": "https://stackoverflow.com/questions/36295666/how-to-get-answers-to-natural-language-questions-from-freebase", "title": "How to get answers to natural language questions from freebase?", "body": "<p>I have massive amounts of natural language questions in the format of \"Subject-entity [tab] relationship [tab] Object-entity [tab] question\" as follows: </p>\n\n<pre><code>www.freebase.com/m/01jp8ww  www.freebase.com/music/album/genre  www.freebase.com/m/01qzt1   Which genre of album is harder.....faster?\nwww.freebase.com/m/0np6z99  www.freebase.com/music/album/release_type   www.freebase.com/m/02lx2r   what format is fearless\nwww.freebase.com/m/0wzc58l  www.freebase.com/people/person/place_of_birth   www.freebase.com/m/0n2z what city was alex golfis born in\nwww.freebase.com/m/0jtw9c   www.freebase.com/film/writer/film   www.freebase.com/m/05szq8z  what film is by the writer phil hay?\nwww.freebase.com/m/0gys2sn  www.freebase.com/people/deceased_person/place_of_death  www.freebase.com/m/0tzls    Where did roger marquis die\nwww.freebase.com/m/01fwty   www.freebase.com/people/deceased_person/cause_of_death  www.freebase.com/m/0gk4g    what was the cause of death of yves klein\nwww.freebase.com/m/02cft    www.freebase.com/location/location/people_born_here www.freebase.com/m/0k8n4c1  Which equestrian was born in dublin?\nwww.freebase.com/m/01htzx   www.freebase.com/tv/tv_genre/programs   www.freebase.com/m/04g1jv6  What is a tv action show?\n</code></pre>\n\n<p>How does one parse these natural language question files to obtain the answer to the question? I am planning on using ruby to parse these millions upon millions of questions, although I am a bit stuck on how to actually obtain the answers to the questions in the files from freebase.</p>\n\n<p>From what I have viewed from the direct links, there doesn't to seem to actually be an answer to the question located in them, so is there some other method to obtaining the answers?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "devise"], "comments": [{"owner": {"reputation": 9447, "user_id": 1380867, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/5dc27a551f77074a1dcc431e4158704b?s=128&d=identicon&r=PG", "display_name": "MZaragoza", "link": "https://stackoverflow.com/users/1380867/mzaragoza"}, "edited": false, "score": 0, "creation_date": 1459287494, "post_id": 36295493, "comment_id": 60216162, "body": "can you post the error that you are getting"}, {"owner": {"reputation": 3, "user_id": 6131550, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206009716458244/picture?type=large", "display_name": "Chase Massey", "link": "https://stackoverflow.com/users/6131550/chase-massey"}, "reply_to_user": {"reputation": 9447, "user_id": 1380867, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/5dc27a551f77074a1dcc431e4158704b?s=128&d=identicon&r=PG", "display_name": "MZaragoza", "link": "https://stackoverflow.com/users/1380867/mzaragoza"}, "edited": false, "score": 0, "creation_date": 1459287763, "post_id": 36295493, "comment_id": 60216279, "body": "The argument error is a link to the picture. <a href=\"http://i.stack.imgur.com/jN7Gj.png\" rel=\"nofollow noreferrer\">i.stack.imgur.com/jN7Gj.png</a>"}, {"owner": {"reputation": 968, "user_id": 2616474, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/6f3ec2c6580807b5fa2e09035f53262e?s=128&d=identicon&r=PG", "display_name": "brcebn", "link": "https://stackoverflow.com/users/2616474/brcebn"}, "edited": false, "score": 0, "creation_date": 1459288017, "post_id": 36295493, "comment_id": 60216395, "body": "Did you try without policy? (only <code>link_to &quot;New Bookmark&quot;..</code>)"}, {"owner": {"reputation": 3, "user_id": 6131550, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206009716458244/picture?type=large", "display_name": "Chase Massey", "link": "https://stackoverflow.com/users/6131550/chase-massey"}, "edited": false, "score": 0, "creation_date": 1459288438, "post_id": 36295493, "comment_id": 60216606, "body": "I have not. I&#39;ll try it now."}, {"owner": {"reputation": 3, "user_id": 6131550, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206009716458244/picture?type=large", "display_name": "Chase Massey", "link": "https://stackoverflow.com/users/6131550/chase-massey"}, "edited": false, "score": 0, "creation_date": 1459288862, "post_id": 36295493, "comment_id": 60216778, "body": "I deleted policy. I have updated the original post to reflect the new error."}, {"owner": {"reputation": 3, "user_id": 6131550, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206009716458244/picture?type=large", "display_name": "Chase Massey", "link": "https://stackoverflow.com/users/6131550/chase-massey"}, "reply_to_user": {"reputation": 968, "user_id": 2616474, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/6f3ec2c6580807b5fa2e09035f53262e?s=128&d=identicon&r=PG", "display_name": "brcebn", "link": "https://stackoverflow.com/users/2616474/brcebn"}, "edited": false, "score": 0, "creation_date": 1459291277, "post_id": 36295493, "comment_id": 60217687, "body": "@bobbystouket Any ideas? I&#39;ve updated the post."}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 6131550, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206009716458244/picture?type=large", "display_name": "Chase Massey", "link": "https://stackoverflow.com/users/6131550/chase-massey"}, "edited": false, "score": 0, "creation_date": 1459289091, "post_id": 36295837, "comment_id": 60216877, "body": "Adding include &lt;code&gt;Pundit&lt;/code&gt; Does not help the error. I will update the original code with the BookMark policy."}, {"owner": {"reputation": 3, "user_id": 6131550, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206009716458244/picture?type=large", "display_name": "Chase Massey", "link": "https://stackoverflow.com/users/6131550/chase-massey"}, "edited": false, "score": 0, "creation_date": 1459289252, "post_id": 36295837, "comment_id": 60216946, "body": "I have updated the original post with the application policy. There is no policy specific to Bookmarks. The application controller has include Pundit"}], "tags": [], "owner": {"reputation": 15367, "user_id": 66945, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/9cfa271fb69f3c757657d10aa29fc65b?s=128&d=identicon&r=PG", "display_name": "Rishav Rastogi", "link": "https://stackoverflow.com/users/66945/rishav-rastogi"}, "is_accepted": false, "score": 1, "last_activity_date": 1459288578, "creation_date": 1459288578, "answer_id": 36295837, "question_id": 36295493, "link": "https://stackoverflow.com/questions/36295493/argumenterror-in-topicsshow-possible-devise-error/36295837#36295837", "title": "ArgumentError in Topics#show Possible Devise error?", "body": "<p>Problem is with Policy made with the Pundit gem. Can you check something called the BookmarkPolicy or something similar, or at least post that here. Did you forget to  <code>include Pundit</code> in your controller ? </p>\n"}, {"tags": [], "owner": {"reputation": 45, "user_id": 4687977, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/0qhzA.jpg?s=128&g=1", "display_name": "LizGee", "link": "https://stackoverflow.com/users/4687977/lizgee"}, "is_accepted": false, "score": 1, "last_activity_date": 1459299824, "creation_date": 1459299824, "answer_id": 36297844, "question_id": 36295493, "link": "https://stackoverflow.com/questions/36295493/argumenterror-in-topicsshow-possible-devise-error/36297844#36297844", "title": "ArgumentError in Topics#show Possible Devise error?", "body": "<p>You're using the Pundit gem but I don't see the authorize method in your controller. From <a href=\"https://github.com/elabs/pundit\" rel=\"nofollow\">Pundit's documentation</a>:</p>\n\n<blockquote>\n  <p>Supposing that you have an instance of class Post, Pundit now lets you\n  do this in your controller:</p>\n</blockquote>\n\n<pre><code>def update\n  @post = Post.find(params[:id])\n  authorize @post\n  if @post.update(post_params)\n    redirect_to @post\n  else\n    render :edit\n  end\nend\n</code></pre>\n\n<blockquote>\n  <p>The authorize method automatically infers that Post will have a\n  matching PostPolicy class, and instantiates this class, handing in the\n  current user and the given record. </p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 919, "user_id": 1742070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51ea518131f69363dd9f9de02aa12904?s=128&d=identicon&r=PG", "display_name": "brainbag", "link": "https://stackoverflow.com/users/1742070/brainbag"}, "is_accepted": false, "score": 0, "last_activity_date": 1459299939, "creation_date": 1459299939, "answer_id": 36297855, "question_id": 36295493, "link": "https://stackoverflow.com/questions/36295493/argumenterror-in-topicsshow-possible-devise-error/36297855#36297855", "title": "ArgumentError in Topics#show Possible Devise error?", "body": "<p>The source code in the screenshot and the code you posted is not the same. Your code:</p>\n\n<pre><code>&lt;% if policy(Bookmark.new).create? %&gt;\n</code></pre>\n\n<p>Screenshot: </p>\n\n<pre><code>&lt;% if (Bookmark.new).create? %&gt;\n</code></pre>\n\n<p>Rails is correctly reporting that <code>Bookmark.new</code> does not have a <code>create?</code> method, because it's missing the <code>policy()</code> method call.</p>\n\n<p>Is your file saved? Are you sure you're changing the correct file? </p>\n"}], "owner": {"reputation": 3, "user_id": 6131550, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206009716458244/picture?type=large", "display_name": "Chase Massey", "link": "https://stackoverflow.com/users/6131550/chase-massey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 102, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1459299939, "creation_date": 1459287197, "last_edit_date": 1459289218, "question_id": 36295493, "link": "https://stackoverflow.com/questions/36295493/argumenterror-in-topicsshow-possible-devise-error", "title": "ArgumentError in Topics#show Possible Devise error?", "body": "<p>I'm a bit of a rails newb here and need some help figuring this out. I have an argument error that is thrown every time I try and create or edit a new \"topic.\" </p>\n\n<p><a href=\"http://i.stack.imgur.com/jN7Gj.png\" rel=\"nofollow\">ArgumentError</a></p>\n\n<p>Here is the code for the \"show:\"</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;h1&gt;&lt;%= @topic.title %&gt;&lt;/h1&gt;\r\n&lt;%= link_to \"Edit\", edit_topic_path(@topic), class: 'btn btn-success' %&gt;\r\n&lt;%= link_to \"Delete Topic\", @topic, method: :delete, class: 'btn btn-danger', data: {confirm: 'Are you sure you want to delete this topic?'} %&gt;\r\n&lt;% if policy(Bookmark.new).create? %&gt;\r\n  &lt;%= link_to \"New Bookmark\", new_topic_bookmark_path(@topic), class: 'btn btn-success' %&gt;\r\n&lt;% end %&gt;\r\n&lt;% @topic.bookmarks.each do |bookmark| %&gt;\r\n  &lt;div class=\"media-body\"&gt;\r\n    &lt;div class=\"row\"&gt;\r\n      &lt;div class=\"col-md-2\"&gt;\r\n        &lt;div class=\"container\"&gt;\r\n          &lt;img src=\"http://icons.better-idea.org/icon?url=&lt;%= bookmark.url %&gt;&amp;size=120\"&gt;\r\n          &lt;div class=\"media-heading\"&gt;\r\n            &lt;%= link_to bookmark.name, topic_bookmark_path(@topic, bookmark) %&gt;\r\n          &lt;/div&gt;\r\n        &lt;/div&gt;\r\n      &lt;/div&gt;\r\n    &lt;/div&gt;\r\n    &lt;div class=\"col-md-1\"&gt;\r\n      &lt;%= render partial: 'likes/like', locals: {bookmark: bookmark} %&gt;\r\n    &lt;/div&gt;\r\n  &lt;/div&gt;\r\n&lt;% end %&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>Here is the \"topics\" controller:</p>\n\n<pre><code>class TopicsController &lt; ApplicationController\n  def index\n    @topics = Topic.all\n  end\n\n  def show\n    @topic = Topic.find(params[:id])\n  end\n\n  def new\n    @topic = Topic.new\n  end\n\n  def create\n    @topic = Topic.new(topic_params)\n\n    if @topic.save\n      flash[:notice]= \"Topic was saved.\"\n      redirect_to @topic\n    else\n      flash.now[:alert]= \"The topic could not be saved. Please try again\"\n      render :new\n    end\n  end\n\n  def edit\n    @topic = Topic.find(params[:id])\n  end\n\n  def update\n    @topic = Topic.find(params[:id])\n    @topic.assign_attributes(topic_params)\n\n    if @topic.save\n      flash[:notice]= \"The topic was saved sucessfully.\"\n      redirect_to @topic\n    else\n      flash.now[:alert]= \"There was an error saving the topic. Please try again.\"\n      render :edit\n    end\n  end\n\n  def destroy\n    @topic = Topic.find(params[:id])\n\n    if @topic.destroy\n      flash[:notice]= \"\\\"#{@topic.title}\\\" was deleted successfully.\"\n      redirect_to topics_path\n    else\n      flash.now[:alert] = \"There was an error in deleting this topic.\"\n      render :show\n    end\n  end\n\n  def topic_params\n    params.require(:topic).permit(:title)\n  end\nend\n</code></pre>\n\n<p>Update(1): New error after deleting \"policy\" <a href=\"http://i.stack.imgur.com/4BrPb.png\" rel=\"nofollow\">New Error</a></p>\n\n<p>Here is the \"application policy that uses Pundit:</p>\n\n<pre><code>class ApplicationPolicy\n  attr_reader :user, :record\n\n  def initialize(user, record)\n    raise Pundit::NotAuthorizedError, \"must be logged in\" unless user\n    @user = user\n    @record = record\n  end\n\n  def index?\n    false\n  end\n\n  def show?\n    scope.where(:id =&gt; record.id).exists?\n  end\n\n  def create?\n    user.present?\n  end\n\n  def new?\n    create?\n  end\n\n  def update?\n    user.present? &amp;&amp; ( record.user == user )\n  end\n\n  def edit?\n    update?\n  end\n\n  def destroy?\n    user.present? &amp;&amp; (record.user == user)\n  end\n\n  def scope\n    Pundit.policy_scope!(user, record.class)\n  end\n\n  class Scope\n    attr_reader :user, :scope\n\n    def initialize(user, scope)\n      @user = user\n      @scope = scope\n    end\n\n    def resolve\n      scope\n    end\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby"], "answers": [{"tags": [], "owner": {"reputation": 10323, "user_id": 1220355, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cb2525ec6155e479bdefe9ed6c437d07?s=128&d=identicon&r=PG", "display_name": "Anthony E", "link": "https://stackoverflow.com/users/1220355/anthony-e"}, "is_accepted": true, "score": 1, "last_activity_date": 1459288014, "last_edit_date": 1459288014, "creation_date": 1459287700, "answer_id": 36295625, "question_id": 36295466, "link": "https://stackoverflow.com/questions/36295466/is-there-a-cleaner-shorter-built-in-way-to-wrap-elements-in-an-iterable-in-rub/36295625#36295625", "title": "Is there a cleaner, shorter, built-in way to wrap elements in an iterable in ruby?", "body": "<p>Yes, it seems like you're describing the <code>Array.wrap()</code> extension provided by ActiveSupport in in Rails (<code>active_support/core_ext</code>):</p>\n\n<pre><code>&gt;&gt; list = ['a', :b, /c/]\n=&gt; [\"a\", :b, /c/]\n\n&gt;&gt; Array.wrap(list)\n=&gt; [\"a\", :b, /c/]\n\n&gt;&gt; map = {\"a\" =&gt; :foo, b: :bar, /c/ =&gt; 'baz'}\n=&gt; {\"a\"=&gt;:foo, :b=&gt;:bar, /c/=&gt;\"baz\"}\n\n&gt;&gt; Array.wrap(map)\n=&gt; [{\"a\"=&gt;:foo, :b=&gt;:bar, /c/=&gt;\"baz\"}]\n\n&gt;&gt; Array.wrap(:symbol_literal)\n=&gt; [:symbol_literal]\n</code></pre>\n\n<p>You can find the documentation here: <a href=\"http://apidock.com/rails/Array/wrap/class\" rel=\"nofollow\">http://apidock.com/rails/Array/wrap/class</a>. \nThe <code>Array(...)</code> method in the core Ruby library has similar behavior, but will convert a hash to a nested array:</p>\n\n<pre><code>&gt;&gt; Array(list)\n=&gt; [\"a\", :b, /c/]\n\n&gt;&gt; Array(map)\n=&gt; [[\"a\", :foo], [:b, :bar], [/c/, \"baz\"]]  # Probably not what you want\n\n&gt;&gt; Array(:symbol_literal)\n=&gt; [:symbol_literal]\n</code></pre>\n\n<p>The documentation in the link provided above contains a more comprehensive explanation of <code>Array.wrap()</code> vs <code>Array()</code></p>\n"}], "owner": {"reputation": 10796, "user_id": 1105249, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/083d54b8327a76a1dcf57df507ab7b34?s=128&d=identicon&r=PG", "display_name": "Luis Masuelli", "link": "https://stackoverflow.com/users/1105249/luis-masuelli"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 19, "favorite_count": 0, "accepted_answer_id": 36295625, "answer_count": 1, "score": 0, "last_activity_date": 1459288014, "creation_date": 1459287094, "question_id": 36295466, "link": "https://stackoverflow.com/questions/36295466/is-there-a-cleaner-shorter-built-in-way-to-wrap-elements-in-an-iterable-in-rub", "title": "Is there a cleaner, shorter, built-in way to wrap elements in an iterable in ruby?", "body": "<p>This code works:</p>\n\n<pre><code>permission.class.ancestors.include?(Enumerable) ? permission : [permission]\n</code></pre>\n\n<p>The content in <code>permission</code> can either by a symbol or any sequence (say, an array). If a single element is passed, it is wrapped in an array.</p>\n\n<p>Is there a method already doing this? (May be either ruby-built-in in 2.2.2 or added by rails 4.2.0).</p>\n"}, {"tags": ["arrays", "ruby", "json"], "answers": [{"comments": [{"owner": {"reputation": 39, "user_id": 6130489, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87162721d5ba9245d54006f711aaebab?s=128&d=identicon&r=PG&f=1", "display_name": "\u017deljko Sosic ", "link": "https://stackoverflow.com/users/6130489/%c5%bdeljko-sosic"}, "edited": false, "score": 0, "creation_date": 1459288047, "post_id": 36295324, "comment_id": 60216412, "body": "Great, Thanks a lot."}], "tags": [], "owner": {"reputation": 16587, "user_id": 177053, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f6c516626d381a1ea383cedd1799486?s=128&d=identicon&r=PG", "display_name": "Vasfed", "link": "https://stackoverflow.com/users/177053/vasfed"}, "is_accepted": true, "score": 0, "last_activity_date": 1459286555, "creation_date": 1459286555, "answer_id": 36295324, "question_id": 36295188, "link": "https://stackoverflow.com/questions/36295188/generate-from-two-ruby-arrays-an-appropriate-json-output/36295324#36295324", "title": "Generate from two ruby arrays an appropriate JSON output", "body": "<p>Use <code>Array#zip</code> to make pairs of values and then make hash of them:</p>\n\n<pre><code>keys = [:key0, :key1, :key2]\nvalues = [:value0, :value1, :value2]\nHash[keys.zip values]\n# =&gt; {:key0=&gt;:value0, :key1=&gt;:value1, :key2=&gt;:value2}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 4808, "user_id": 2773837, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sC7tX.png?s=128&g=1", "display_name": "Hatchet", "link": "https://stackoverflow.com/users/2773837/hatchet"}, "edited": false, "score": 0, "creation_date": 1459291036, "post_id": 36295491, "comment_id": 60217593, "body": "While this answer is probably correct and useful, it is preferred if you <a href=\"http://meta.stackexchange.com/q/114762/159034\">include some explanation along with it</a> to explain how it helps to solve the problem. This becomes especially useful in the future, if there is a change (possibly unrelated) that causes it to stop working and users need to understand how it once worked. Thanks!"}], "tags": [], "owner": {"reputation": 3020, "user_id": 4453584, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/25188d50654874d1125dd754d783851b?s=128&d=identicon&r=PG&f=1", "display_name": "guitarman", "link": "https://stackoverflow.com/users/4453584/guitarman"}, "is_accepted": false, "score": 1, "last_activity_date": 1459322773, "last_edit_date": 1459322773, "creation_date": 1459287192, "answer_id": 36295491, "question_id": 36295188, "link": "https://stackoverflow.com/questions/36295188/generate-from-two-ruby-arrays-an-appropriate-json-output/36295491#36295491", "title": "Generate from two ruby arrays an appropriate JSON output", "body": "<pre><code>array = keys.zip(values)\n#=&gt; [[:key0, :value0], [:key1, :value1], [:key2, :value2]]\n</code></pre>\n\n<p><a href=\"http://ruby-doc.org/core-2.3.0/Array.html#method-i-zip\" rel=\"nofollow\">Array#zip</a> merges elements of self to the corresponding elements of the argument array and you get an array of arrays. This you can convert into a hash ...</p>\n\n<pre><code>hash = array.to_h\n# =&gt; {:key0=&gt;:value0, :key1=&gt;:value1, :key2=&gt;:value2}\n</code></pre>\n\n<p>... and the hash you can turn into a json string. </p>\n\n<pre><code>jsonString = JSON.pretty_generate(hash)\nputs jsonString\n#{\n#  \"key0\": \"value0\",\n#  \"key1\": \"value1\",\n#  \"key2\": \"value2\"\n#}\n</code></pre>\n"}], "owner": {"reputation": 39, "user_id": 6130489, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87162721d5ba9245d54006f711aaebab?s=128&d=identicon&r=PG&f=1", "display_name": "\u017deljko Sosic ", "link": "https://stackoverflow.com/users/6130489/%c5%bdeljko-sosic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "accepted_answer_id": 36295324, "answer_count": 2, "score": 0, "last_activity_date": 1459388625, "creation_date": 1459286019, "last_edit_date": 1459388625, "question_id": 36295188, "link": "https://stackoverflow.com/questions/36295188/generate-from-two-ruby-arrays-an-appropriate-json-output", "title": "Generate from two ruby arrays an appropriate JSON output", "body": "<p>I have two simple ruby arrays and a JSON string mapping the elements of the first array to the elements of the second array:</p>\n\n<pre><code>keys = [:key0, :key1, :key2]\nvalues = [:value0, :value1, :value2]\n\njsonString = {keys[0] =&gt; values[0], keys[1] =&gt; values[1], keys[2] =&gt; values[2]} \n</code></pre>\n\n<p>Writing this to a file:</p>\n\n<pre><code>file.write(JSON.pretty_generate(jsonString))\n</code></pre>\n\n<p>results into a nicely printed json object:</p>\n\n<pre><code>{\n    \"key0\": \"value0\",\n    \"key1\": \"value1\",\n    \"key2\": \"value2\"\n}\n</code></pre>\n\n<p>But how can I generate the same output of two much bigger arrays without listing all these elements explicitly?</p>\n\n<p>I just need something like </p>\n\n<pre><code>jsonString = {keys =&gt; values}\n</code></pre>\n\n<p>but this produces a different output:</p>\n\n<pre><code>{\n    \"[:key0, :key1, :key2]\":\n    [\n        \"value0\",\n        \"value1\",\n        \"value2\"\n    ]\n}\n</code></pre>\n\n<p>How can I map the two without looping over both?</p>\n"}, {"tags": ["ruby", "sorting", "recursion"], "comments": [{"owner": {"reputation": 1463, "user_id": 3703503, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/1ca51bdb8bc5906975c4133f0bf4873c?s=128&d=identicon&r=PG&f=1", "display_name": "SlySherZ", "link": "https://stackoverflow.com/users/3703503/slysherz"}, "edited": false, "score": 2, "creation_date": 1459286386, "post_id": 36295112, "comment_id": 60215655, "body": "Both <code>result</code> and <code>new_array</code> appear in your code out of nowhere."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1459286581, "post_id": 36295112, "comment_id": 60215753, "body": "Somehow I think you&#39;ve invented a sorting method even worse than a bubble sort. If you want to learn about programming, why not implement a simple <a href=\"https://en.wikipedia.org/wiki/Tree_sort\" rel=\"nofollow noreferrer\">tree sort</a>? There&#39;s a lot of <a href=\"https://en.wikipedia.org/wiki/Sorting_algorithm\" rel=\"nofollow noreferrer\">different methods you can use</a>."}, {"owner": {"reputation": 16237, "user_id": 2166798, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/417356917295f5176d2a3e7c21d8f9e8?s=128&d=identicon&r=PG", "display_name": "pjs", "link": "https://stackoverflow.com/users/2166798/pjs"}, "edited": false, "score": 0, "creation_date": 1459287814, "post_id": 36295112, "comment_id": 60216304, "body": "Also worth noting that <code>delete</code> <a href=\"http://ruby-doc.org/core-2.3.0/Array.html#method-i-delete\" rel=\"nofollow noreferrer\">removes <b>all</b> matches</a> to the value, so bye-bye duplicates..."}, {"owner": {"reputation": 179, "user_id": 6123943, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c509abe9ddae3830a6207769a9cad55e?s=128&d=identicon&r=PG&f=1", "display_name": "Jack_Hardy", "link": "https://stackoverflow.com/users/6123943/jack-hardy"}, "edited": false, "score": 0, "creation_date": 1459937821, "post_id": 36295112, "comment_id": 60509119, "body": "Thanks! working now!"}], "answers": [{"comments": [{"owner": {"reputation": 449, "user_id": 5983505, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/10101041139416992/picture?type=large", "display_name": "Alexander Swann", "link": "https://stackoverflow.com/users/5983505/alexander-swann"}, "reply_to_user": {"reputation": 179, "user_id": 6123943, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c509abe9ddae3830a6207769a9cad55e?s=128&d=identicon&r=PG&f=1", "display_name": "Jack_Hardy", "link": "https://stackoverflow.com/users/6123943/jack-hardy"}, "edited": false, "score": 0, "creation_date": 1459461486, "post_id": 36295815, "comment_id": 60310867, "body": "No problem! Good luck :-)"}], "tags": [], "owner": {"reputation": 449, "user_id": 5983505, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/10101041139416992/picture?type=large", "display_name": "Alexander Swann", "link": "https://stackoverflow.com/users/5983505/alexander-swann"}, "is_accepted": true, "score": 0, "last_activity_date": 1459442121, "last_edit_date": 1459442121, "creation_date": 1459288508, "answer_id": 36295815, "question_id": 36295112, "link": "https://stackoverflow.com/questions/36295112/creating-a-sort-method-using-recursive-method-in-ruby-without-using-sort/36295815#36295815", "title": "Creating a sort method using recursive method in Ruby (without using .sort)", "body": "<p>The problem with what you have is that you have a couple of unassigned variables <code>result</code> and <code>new_array</code>.</p>\n\n<p>Here's an example of a custom sort method that uses <code>partition</code> with a recursive method. It takes the first element of your array and splits your array into two parts using <code>partition</code> into  a group containing elements lesser and greater than this first element using recursion.</p>\n\n<pre><code>def sort(arr)\n  return [] if arr.length == 0\n\n  f_element = arr.shift\n  less, greater = arr.partition {|x| x &lt; f_element }\n  sort(less) + [f_element] + sort(greater)\nend\n\narr = \"happiness\".chars\nprint sort(arr)\n#=&gt; [\"a\", \"e\", \"h\", \"i\", \"n\", \"p\", \"p\", \"s\", \"s\"]\n</code></pre>\n"}], "owner": {"reputation": 179, "user_id": 6123943, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c509abe9ddae3830a6207769a9cad55e?s=128&d=identicon&r=PG&f=1", "display_name": "Jack_Hardy", "link": "https://stackoverflow.com/users/6123943/jack-hardy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 156, "favorite_count": 0, "accepted_answer_id": 36295815, "answer_count": 1, "score": -1, "last_activity_date": 1459442121, "creation_date": 1459285665, "last_edit_date": 1459286778, "question_id": 36295112, "link": "https://stackoverflow.com/questions/36295112/creating-a-sort-method-using-recursive-method-in-ruby-without-using-sort", "title": "Creating a sort method using recursive method in Ruby (without using .sort)", "body": "<p>I have tried to recreate the \".sort\" function in Ruby, using the recursive method. However, all I get as the output is 'Nil' and I'm not sure why. Can anyone see what I'm doing wrong?</p>\n\n<pre><code>def sort arr\n  if arr.length &gt; 0\n    result &lt;&lt; arr.min\n    arr.delete(arr.min)\n    sort arr\n  else\n    new_array.length == 0\n    result\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord"], "answers": [{"tags": [], "owner": {"reputation": 194, "user_id": 4731878, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb6eee7293bd0c756dd8a87cf1ae1cae?s=128&d=identicon&r=PG&f=1", "display_name": "tbreier", "link": "https://stackoverflow.com/users/4731878/tbreier"}, "is_accepted": true, "score": 0, "last_activity_date": 1459285005, "creation_date": 1459285005, "answer_id": 36294943, "question_id": 36294869, "link": "https://stackoverflow.com/questions/36294869/rails-accessing-a-has-many-relation-from-activerecord-associationrelation/36294943#36294943", "title": "Rails: accessing a has_many relation from ActiveRecord_AssociationRelation", "body": "<p>You can do this using a subquery:</p>\n\n<pre><code>Book.where(article: Article.where(...))\n</code></pre>\n\n<p>Note that Activerecord still turns this into a single SQL query:</p>\n\n<pre><code> SELECT `books`.* FROM `books` WHERE `books`.`article_id` IN (SELECT `articles`.`id` FROM `articles` WHERE (...))\n</code></pre>\n"}], "owner": {"reputation": 441, "user_id": 6077397, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/d456f19ea4fc9981404a2e3dc7245b89?s=128&d=identicon&r=PG&f=1", "display_name": "Alex. b", "link": "https://stackoverflow.com/users/6077397/alex-b"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 100, "favorite_count": 0, "accepted_answer_id": 36294943, "answer_count": 1, "score": 0, "last_activity_date": 1459285005, "creation_date": 1459284757, "question_id": 36294869, "link": "https://stackoverflow.com/questions/36294869/rails-accessing-a-has-many-relation-from-activerecord-associationrelation", "title": "Rails: accessing a has_many relation from ActiveRecord_AssociationRelation", "body": "<pre><code>class Article &lt; ActiveRecord::Base\n  has_many :books\nend\n\nclass Book &lt; ActiveRecord::Base\n  belongs_to :article\nend\n</code></pre>\n\n<p>Is there a way to access all books of a set of authors ?\nFor example: Article.where(...).books that will return the associated books of selected articles?</p>\n"}, {"tags": ["ruby", "regex", "pdf", "pdf-reader"], "answers": [{"tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": true, "score": 0, "last_activity_date": 1459320687, "creation_date": 1459320687, "answer_id": 36301646, "question_id": 36294411, "link": "https://stackoverflow.com/questions/36294411/ruby-pdfreader-matching-bullet-point-with-regex/36301646#36301646", "title": "Ruby PDF::Reader matching bullet point with Regex", "body": "<p>This is a unicode symbol with <a href=\"http://unicode-table.com/en/search/?q=F0B7\" rel=\"nofollow noreferrer\">codepoint <code>F0B7</code></a>.</p>\n\n<p>Unfortunately your Ubuntu installation has a default font that misses that glyph, and when glyph is missing in the font definition, the <em>common approach</em> is to draw it\u2019s codepoint in a square.</p>\n\n<p>The regexp to match it would be:</p>\n\n<pre><code>/\\uF0B7/\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/kHBzB.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/kHBzB.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 504, "user_id": 4357700, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/0e0c2f562f1ed55fab85f543069b8a40?s=128&d=identicon&r=PG&f=1", "display_name": "Bastien", "link": "https://stackoverflow.com/users/4357700/bastien"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 168, "favorite_count": 0, "accepted_answer_id": 36301646, "answer_count": 1, "score": 0, "last_activity_date": 1459320687, "creation_date": 1459283006, "question_id": 36294411, "link": "https://stackoverflow.com/questions/36294411/ruby-pdfreader-matching-bullet-point-with-regex", "title": "Ruby PDF::Reader matching bullet point with Regex", "body": "<p>I have parsed a pdf document in Ruby with PDF::Reader. The bullet point of the pdf file appears in my parsed text as a strange cube with F0B7 inside like this (I also attached a print screen):</p>\n\n<pre><code>  __\n |F0|\n |B7|\n</code></pre>\n\n<p>I would like to know if I can match this \"bullet point\" with regex and if so, what would be the appropriate way to do it? I have absolutely no idea to tackle this issue as I am not even sure that this is part of the string in the first place. Thanks.<a href=\"https://i.stack.imgur.com/teIdj.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/teIdj.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "chartkick"], "comments": [{"owner": {"reputation": 1224, "user_id": 1170266, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b2db3460298af8f4a585f95cf556874?s=128&d=identicon&r=PG", "display_name": "archana", "link": "https://stackoverflow.com/users/1170266/archana"}, "edited": false, "score": 0, "creation_date": 1459282831, "post_id": 36294283, "comment_id": 60213846, "body": "Are you trying to render json? If yes then you should use <code>json</code> and not <code>jsons</code>."}, {"owner": {"reputation": 1, "user_id": 6090121, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/70f91010ceb7e5368eff143573f35d60?s=128&d=identicon&r=PG&f=1", "display_name": "RailzWithLove2035", "link": "https://stackoverflow.com/users/6090121/railzwithlove2035"}, "reply_to_user": {"reputation": 1224, "user_id": 1170266, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b2db3460298af8f4a585f95cf556874?s=128&d=identicon&r=PG", "display_name": "archana", "link": "https://stackoverflow.com/users/1170266/archana"}, "edited": false, "score": 0, "creation_date": 1459283043, "post_id": 36294283, "comment_id": 60213965, "body": "I didn&#39;t realize there was a typo. Thank you for noticing. My problem now is the number 1 (for number of items created_by_month) being shown in the view, instead of the line graph itself."}, {"owner": {"reputation": 1224, "user_id": 1170266, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b2db3460298af8f4a585f95cf556874?s=128&d=identicon&r=PG", "display_name": "archana", "link": "https://stackoverflow.com/users/1170266/archana"}, "edited": false, "score": 0, "creation_date": 1459283265, "post_id": 36294283, "comment_id": 60214081, "body": "where is your code to print line graph?"}, {"owner": {"reputation": 1, "user_id": 6090121, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/70f91010ceb7e5368eff143573f35d60?s=128&d=identicon&r=PG&f=1", "display_name": "RailzWithLove2035", "link": "https://stackoverflow.com/users/6090121/railzwithlove2035"}, "reply_to_user": {"reputation": 1224, "user_id": 1170266, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b2db3460298af8f4a585f95cf556874?s=128&d=identicon&r=PG", "display_name": "archana", "link": "https://stackoverflow.com/users/1170266/archana"}, "edited": false, "score": 0, "creation_date": 1459283463, "post_id": 36294283, "comment_id": 60214188, "body": "Everything that I wrote so far is inside of the question block."}, {"owner": {"reputation": 1, "user_id": 6090121, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/70f91010ceb7e5368eff143573f35d60?s=128&d=identicon&r=PG&f=1", "display_name": "RailzWithLove2035", "link": "https://stackoverflow.com/users/6090121/railzwithlove2035"}, "reply_to_user": {"reputation": 1224, "user_id": 1170266, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b2db3460298af8f4a585f95cf556874?s=128&d=identicon&r=PG", "display_name": "archana", "link": "https://stackoverflow.com/users/1170266/archana"}, "edited": false, "score": 0, "creation_date": 1459287900, "post_id": 36294283, "comment_id": 60216343, "body": "In the analytics index view. It&#39;s only showing the number, btw. The navigation bar is not being rendered at all."}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 6090121, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/70f91010ceb7e5368eff143573f35d60?s=128&d=identicon&r=PG&f=1", "display_name": "RailzWithLove2035", "link": "https://stackoverflow.com/users/6090121/railzwithlove2035"}, "is_accepted": false, "score": 0, "last_activity_date": 1459354792, "creation_date": 1459354792, "answer_id": 36314405, "question_id": 36294283, "link": "https://stackoverflow.com/questions/36294283/graphing-current-user-data-with-chartkick-rails-4/36314405#36314405", "title": "Graphing current_user data with Chartkick Rails 4", "body": "<p>I took the traditional approach of using instance variables instead of JSON. The JSON approach overrides the html views.</p>\n\n<p>analytics_controller.rb</p>\n\n<pre><code>def index\n    @user_monthly_articles = current_user\n    @user_monthly_articles.articles.group_by_year(:created_at).count\n  end\n</code></pre>\n\n<p>index.html.erb</p>\n\n<pre><code> &lt;div class=\"row\"&gt;\n    &lt;div class=\"col-md-4\"&gt;\n      &lt;%= line_chart @user_monthly_articles %&gt;\n    &lt;/div&gt;\n  &lt;/div&gt;\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 6090121, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/70f91010ceb7e5368eff143573f35d60?s=128&d=identicon&r=PG&f=1", "display_name": "RailzWithLove2035", "link": "https://stackoverflow.com/users/6090121/railzwithlove2035"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 173, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1459354792, "creation_date": 1459282542, "last_edit_date": 1459288218, "question_id": 36294283, "link": "https://stackoverflow.com/questions/36294283/graphing-current-user-data-with-chartkick-rails-4", "title": "Graphing current_user data with Chartkick Rails 4", "body": "<p>I've been having trouble with capturing the data related to the current_user, and then graphing it. I will post the code that I've written and error that I've been experiencing below.</p>\n\n<p>I'm receiving the error below, even though the view itself loads</p>\n\n<pre><code>Error Loading Chart: Internal Server Error\n</code></pre>\n\n<p>Index.html.erb</p>\n\n<pre><code>   &lt;div class=\"row\"&gt;\n    &lt;div class=\"col-md-4\"&gt;\n      &lt;%= line_chart analytic_posts_created_path(current_user) %&gt;\n    &lt;/div&gt;\n  &lt;/div&gt;\n</code></pre>\n\n<p>Analytics_Controller.rb</p>\n\n<pre><code>class AnalyticsController &lt; ApplicationController\n  before_filter :authenticate_user!\n\n  def index\n    posts_created\n  end\n\n  def posts_created\n    render json: current_user.posts.group_by_month(:created_at).count\n  end\n\n  private\n  def set_user\n    @user = User.friendly.find(params[:id])\n  end\nend\n</code></pre>\n\n<p>routes.rb</p>\n\n<pre><code>resources :analytics, only: [:index] do\n    get '/posts_created' =&gt; 'analytics#posts_created'\n  end\n</code></pre>\n\n<p>Application.html.erb</p>\n\n<pre><code>&lt;%= javascript_include_tag 'https://www.google.com/jsapi', 'chartkick' %&gt;\n</code></pre>\n\n<p>Server Log</p>\n\n<pre><code>Started GET \"/analytics.john190\" for 127.0.0.1 at 2016-03-29 17:46:50 -0400\nProcessing by AnalyticsController#index as \n  User Load (0.0ms)  SELECT  \"users\".* FROM \"users\" WHERE \"users\".\"id\" = ?  ORDER BY \"users\".\"id\" ASC LIMIT 1  [[\"id\", 5]]\n  Post Load (0.0ms)  SELECT count(*) as count, strftime( \"%Y-%m-01 00:00:00 UTC\", created_at ) as date_slice FROM \"Posts\" WHERE \"Posts\".\"user_id\" = ? AND (\"Posts\".\"created_at\" IS NOT NULL) GROUP BY date_slice  ORDER BY \"Posts\".\"created_at\" DESC, date_slice  [[\"user_id\", 5]]\nCompleted 200 OK in 10ms (Views: 6.0ms | ActiveRecord: 0.0ms)\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "chef-infra", "chef-recipe"], "answers": [{"comments": [{"owner": {"reputation": 43208, "user_id": 78722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf611565f0b79abd0b3dc200ad867661?s=128&d=identicon&r=PG", "display_name": "coderanger", "link": "https://stackoverflow.com/users/78722/coderanger"}, "reply_to_user": {"reputation": 2779, "user_id": 2487334, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/3cfd9702eea6d8c79864a2d2b3934372?s=128&d=identicon&r=PG", "display_name": "Scooby", "link": "https://stackoverflow.com/users/2487334/scooby"}, "edited": false, "score": 0, "creation_date": 1459367066, "post_id": 36297206, "comment_id": 60259960, "body": "Then you&#39;ll need something else to create a separate execution context. There is probably something in PowerShell for this, but the common pattern is to use a Scheduled Task set to execute in 0 seconds."}], "tags": [], "owner": {"reputation": 43208, "user_id": 78722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf611565f0b79abd0b3dc200ad867661?s=128&d=identicon&r=PG", "display_name": "coderanger", "link": "https://stackoverflow.com/users/78722/coderanger"}, "is_accepted": false, "score": 1, "last_activity_date": 1459295699, "creation_date": 1459295699, "answer_id": 36297206, "question_id": 36294011, "link": "https://stackoverflow.com/questions/36294011/windows-command-blocks-chef-run/36297206#36297206", "title": "windows command blocks chef run", "body": "<p>You should probably be installing an actual service instead of trying to fork off background jobs from inside Chef. Check out the <a href=\"https://docs.chef.io/resource_windows_service.html\" rel=\"nofollow\"><code>windows_service</code> resource</a>.</p>\n"}], "owner": {"reputation": 2779, "user_id": 2487334, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/3cfd9702eea6d8c79864a2d2b3934372?s=128&d=identicon&r=PG", "display_name": "Scooby", "link": "https://stackoverflow.com/users/2487334/scooby"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 167, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1459362884, "creation_date": 1459281550, "last_edit_date": 1459362884, "question_id": 36294011, "link": "https://stackoverflow.com/questions/36294011/windows-command-blocks-chef-run", "title": "windows command blocks chef run", "body": "<p>I have a chef recipe with the following code (commented out the alternate code that I tried as well)</p>\n\n<pre><code>#execute\n# execute 'service-api install' do\n#   #command \"web-#{node['default']['env']}.cmd\" #start /HIGH /b -RedirectStandardOutput chef-serviceoutput.txt\n#   command ('powershell -c \"start-process web-%s.cmd -RedirectStandardOutput C:\\\\buildinfo\\\\service-api\\\\api\\\\approot\\\\chef-serviceoutput.txt\"' % node['default']['env'])\n#   cwd \"C:\\\\buildinfo\\\\service-api\\\\api\\\\approot\"\n#   #not_if :timeout =&gt; 10, :cwd =&gt; 'C:\\\\buildinfo\\\\service-api\\\\api\\\\approot'\n#   end\n\npowershell_script 'service-api install' do\n  code &lt;&lt;-EOH\n  start-process web-#{node['default']['env']}.cmd -RedirectStandardOutput chef-serviceoutput.txt\n  EOH\n  cwd \"C:\\\\buildinfo\\\\service-api\\\\api\\\\approot\"\nend\n</code></pre>\n\n<p>The code essentially changes working directory and runs a .cmd file which starts up a server. Now with start-process , it should open up a new cmd and then run the server there but in the original cmd it exits to  a new line. </p>\n\n<p>When I run this through chef, it (i think) is tracking all child cmd from the process as well and just gets stuck after running this section waiting for server to be killed. </p>\n\n<p>Is there any way to work around it in chef/windows ??</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec"], "comments": [{"owner": {"reputation": 1097, "user_id": 1179430, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RBTl0.jpg?s=128&g=1", "display_name": "GAntoine", "link": "https://stackoverflow.com/users/1179430/gantoine"}, "edited": false, "score": 0, "creation_date": 1459280086, "post_id": 36293446, "comment_id": 60212227, "body": "If you&#39;re using the newer version of RSpec, the command is <code>rspec</code>, not <code>spec</code>. And drop the <code>rake</code>."}, {"owner": {"reputation": 51, "user_id": 3962361, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e10ab99aa53c05ada9390e0b7d4a7f65?s=128&d=identicon&r=PG&f=1", "display_name": "Santos Solorzano", "link": "https://stackoverflow.com/users/3962361/santos-solorzano"}, "reply_to_user": {"reputation": 1097, "user_id": 1179430, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RBTl0.jpg?s=128&g=1", "display_name": "GAntoine", "link": "https://stackoverflow.com/users/1179430/gantoine"}, "edited": false, "score": 0, "creation_date": 1459292716, "post_id": 36293446, "comment_id": 60218225, "body": "Thanks @ArcaneCraeda - you were right about the newer version and the command worked."}, {"owner": {"reputation": 10323, "user_id": 1220355, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cb2525ec6155e479bdefe9ed6c437d07?s=128&d=identicon&r=PG", "display_name": "Anthony E", "link": "https://stackoverflow.com/users/1220355/anthony-e"}, "edited": false, "score": 0, "creation_date": 1459298032, "post_id": 36293446, "comment_id": 60219796, "body": "Does it quit immediately or pause as though it&#39;s loading Rails? What&#39;s in your test/log file?"}], "answers": [{"tags": [], "owner": {"reputation": 2506, "user_id": 3079130, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/e1f9a7c19b1487fb867184e4366748d6?s=128&d=identicon&r=PG&f=1", "display_name": "Rafa", "link": "https://stackoverflow.com/users/3079130/rafa"}, "is_accepted": false, "score": 0, "last_activity_date": 1491936488, "creation_date": 1491936488, "answer_id": 43353969, "question_id": 36293446, "link": "https://stackoverflow.com/questions/36293446/no-output-for-rake-spec/43353969#43353969", "title": "No output for rake spec", "body": "<p>you have to use just <code>rspec</code> not <code>rake spec</code>  </p>\n"}], "owner": {"reputation": 51, "user_id": 3962361, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e10ab99aa53c05ada9390e0b7d4a7f65?s=128&d=identicon&r=PG&f=1", "display_name": "Santos Solorzano", "link": "https://stackoverflow.com/users/3962361/santos-solorzano"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 404, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1491936488, "creation_date": 1459279743, "question_id": 36293446, "link": "https://stackoverflow.com/questions/36293446/no-output-for-rake-spec", "title": "No output for rake spec", "body": "<p>I'm trying to run some <code>rspec</code> tests for my Rails app, and when I type the <code>rake spec</code> command nothing happens. There is no output. Below is my Gemfile. What am I doing wrong?</p>\n\n<pre><code>group :development, :test do\n    gem 'test-unit'\n    gem 'minitest'\n    gem 'byebug'\n    gem 'rspec-rails'\n    gem 'cucumber-rails', :require =&gt; false\n    gem 'cucumber-rails-training-wheels'\n    gem 'simplecov', :require =&gt; false\nend\n</code></pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 0, "creation_date": 1459280843, "post_id": 36293315, "comment_id": 60212705, "body": "Obviously that should be <code>array[0..-2]</code> since <code>[_..-1]</code> is from beginning to end, or <code>array[_...-1]</code> (non-inclusive)."}], "answers": [{"comments": [{"owner": {"reputation": 1508, "user_id": 4346603, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae1be3f8e84ecb90d3a477f12c55b635?s=128&d=identicon&r=PG", "display_name": "leobelizquierdo", "link": "https://stackoverflow.com/users/4346603/leobelizquierdo"}, "reply_to_user": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 1, "creation_date": 1459280784, "post_id": 36293703, "comment_id": 60212675, "body": "Because he don&#39;t want to get to the last index in the array right?"}, {"owner": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 0, "creation_date": 1459280819, "post_id": 36293703, "comment_id": 60212692, "body": "Oh, doh; my bad. Wasn&#39;t paying attention to my own comment. I left off a period, and misread yours. Yay."}], "tags": [], "owner": {"reputation": 1508, "user_id": 4346603, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae1be3f8e84ecb90d3a477f12c55b635?s=128&d=identicon&r=PG", "display_name": "leobelizquierdo", "link": "https://stackoverflow.com/users/4346603/leobelizquierdo"}, "is_accepted": false, "score": 3, "last_activity_date": 1459280597, "creation_date": 1459280597, "answer_id": 36293703, "question_id": 36293315, "link": "https://stackoverflow.com/questions/36293315/index1-to-with-index-without-going-off-index/36293703#36293703", "title": "index+1 to with_index without going off index", "body": "<p>Try this:</p>\n\n<pre><code>array[0..-2].each.with_index do |x, index|\n      if x + array[index+1] == n\n        ...\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1463, "user_id": 3703503, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/1ca51bdb8bc5906975c4133f0bf4873c?s=128&d=identicon&r=PG&f=1", "display_name": "SlySherZ", "link": "https://stackoverflow.com/users/3703503/slysherz"}, "is_accepted": false, "score": 3, "last_activity_date": 1459281006, "last_edit_date": 1459281006, "creation_date": 1459280673, "answer_id": 36293731, "question_id": 36293315, "link": "https://stackoverflow.com/questions/36293315/index1-to-with-index-without-going-off-index/36293731#36293731", "title": "index+1 to with_index without going off index", "body": "<p>You can use a <em>range</em> to do what you want. Something like:</p>\n\n<pre><code>array = [0, 1, 2, 3, 4]\narray[0...-1].each do |x|\n    print x\nend\n# =&gt; 0123\n</code></pre>\n\n<p><code>-1</code> refers to the last element, and using 3 dots <code>...</code> means you're taking all the elements from the first to the last <em>*exclusively*</em>. 2 dots would also include the last one.</p>\n\n<p>Bonus tip: in ruby, you'll be able to get away most of the times by using <code>each</code> instead of <code>each_with_index</code>, by culling/modifying the array beforehand.</p>\n"}], "owner": {"reputation": 39, "user_id": 1201010, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5af0b94962bbb49352c14f2f7714f109?s=128&d=identicon&r=PG", "display_name": "user1201010", "link": "https://stackoverflow.com/users/1201010/user1201010"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1459281180, "creation_date": 1459279340, "question_id": 36293315, "link": "https://stackoverflow.com/questions/36293315/index1-to-with-index-without-going-off-index", "title": "index+1 to with_index without going off index", "body": "<p>This is my very round-about way to prevent +1 to the last index in the array. What's the best practice to achieve this in ruby? Thanks in advance.</p>\n\n<pre><code>  array.each.with_index do |x, index|\n    unless index+1 == array.length\n      if x + array[index+1] == n\n        ...\n</code></pre>\n"}, {"tags": ["ruby", "selenium-webdriver"], "comments": [{"owner": {"reputation": 887, "user_id": 4664086, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ca859ce2ca107d4a1110965ef40d7f6?s=128&d=identicon&r=PG&f=1", "display_name": "Damiano Stoffie", "link": "https://stackoverflow.com/users/4664086/damiano-stoffie"}, "edited": false, "score": 0, "creation_date": 1459277913, "post_id": 36292733, "comment_id": 60210872, "body": "Hello and welcome to SO. This is probably a <code>Windows 7</code> bug, try bundling you code and now get out"}, {"owner": {"reputation": 21, "user_id": 6131010, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/334e1fa5800fdb9c394283d0f18fb29d?s=128&d=identicon&r=PG&f=1", "display_name": "Neha", "link": "https://stackoverflow.com/users/6131010/neha"}, "reply_to_user": {"reputation": 887, "user_id": 4664086, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ca859ce2ca107d4a1110965ef40d7f6?s=128&d=identicon&r=PG&f=1", "display_name": "Damiano Stoffie", "link": "https://stackoverflow.com/users/4664086/damiano-stoffie"}, "edited": false, "score": 0, "creation_date": 1459279297, "post_id": 36292733, "comment_id": 60211694, "body": "How is code bundled ?. And I have used selenium scripts past one year  in windows 7 and did not get this error before"}, {"owner": {"reputation": 887, "user_id": 4664086, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ca859ce2ca107d4a1110965ef40d7f6?s=128&d=identicon&r=PG&f=1", "display_name": "Damiano Stoffie", "link": "https://stackoverflow.com/users/4664086/damiano-stoffie"}, "edited": false, "score": 0, "creation_date": 1459283612, "post_id": 36292733, "comment_id": 60214260, "body": "see <a href=\"https://github.com/bundler/bundler\" rel=\"nofollow noreferrer\">github.com/bundler/bundler</a>"}, {"owner": {"reputation": 21, "user_id": 6131010, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/334e1fa5800fdb9c394283d0f18fb29d?s=128&d=identicon&r=PG&f=1", "display_name": "Neha", "link": "https://stackoverflow.com/users/6131010/neha"}, "reply_to_user": {"reputation": 887, "user_id": 4664086, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ca859ce2ca107d4a1110965ef40d7f6?s=128&d=identicon&r=PG&f=1", "display_name": "Damiano Stoffie", "link": "https://stackoverflow.com/users/4664086/damiano-stoffie"}, "edited": false, "score": 0, "creation_date": 1459439912, "post_id": 36292733, "comment_id": 60298455, "body": "@Damiano are you suggesting downloading bundler ?"}], "owner": {"reputation": 21, "user_id": 6131010, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/334e1fa5800fdb9c394283d0f18fb29d?s=128&d=identicon&r=PG&f=1", "display_name": "Neha", "link": "https://stackoverflow.com/users/6131010/neha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 111, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1459307059, "creation_date": 1459277484, "last_edit_date": 1459307059, "question_id": 36292733, "link": "https://stackoverflow.com/questions/36292733/syntax-error-in-ruby-script-when-using-selenium-webdriver-windows-7", "title": "syntax error in ruby script when using selenium webdriver (Windows 7)", "body": "<p>I am using Ruby 2.2.4 and Selenium webdriver version 2.53.0.</p>\n\n<p>My scripts were running fine, but suddenly I am seeing this error:  </p>\n\n<blockquote>\n  <p>\"C:/Ruby22/lib/ruby/2.2.0/rubygems.rb:1242:in <code>require': C:/Ruby22/lib/ruby/2.2.0/rubygems/core_ext/kernel_require.rb:54: syntax error, unexpected keyword_return, expecting keyword_do or '{' or '(' (SyntaxError)\n  rubysl-wein return gem_original_require(path)\n  from C:/Ruby22/lib/ruby/2.2.0/rubygems.rb:1242:in</code>'\n      from :1:in <code>require'\n      from &lt;internal:gem_prelude&gt;:1:in</code>'</p>\n</blockquote>\n\n<h1>MY CODE</h1>\n\n<pre><code>require 'selenium-webdriver'\ndriver = Selenium::WebDriver.for :firefox\ndriver.get \"http://google.com\"\n</code></pre>\n\n<p>I am seeing this error while opening any site.</p>\n"}]