[{"tags": ["ruby-on-rails", "ruby", "csv"], "answers": [{"comments": [{"owner": {"reputation": 48, "user_id": 8963855, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db0e3b7e44648a19f8002b8f0c68a021?s=128&d=identicon&r=PG&f=1", "display_name": "Beatrice", "link": "https://stackoverflow.com/users/8963855/beatrice"}, "edited": false, "score": 0, "creation_date": 1549309521, "post_id": 54450479, "comment_id": 95849050, "body": "This works great but now whenever I enter the page the csv downloads. How do I change it so the csv only downloads when the button is clicked? Thanks again for all your help!"}, {"owner": {"reputation": 2412, "user_id": 1253504, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/1ba0b6bef219b34fa4f2d014046ff987?s=128&d=identicon&r=PG", "display_name": "kasperite", "link": "https://stackoverflow.com/users/1253504/kasperite"}, "reply_to_user": {"reputation": 48, "user_id": 8963855, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db0e3b7e44648a19f8002b8f0c68a021?s=128&d=identicon&r=PG&f=1", "display_name": "Beatrice", "link": "https://stackoverflow.com/users/8963855/beatrice"}, "edited": false, "score": 1, "creation_date": 1549323987, "post_id": 54450479, "comment_id": 95854198, "body": "use different action other than <code>show</code> then you are good to go, make sure you update <code>link_to</code> href as well"}], "tags": [], "owner": {"reputation": 2412, "user_id": 1253504, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/1ba0b6bef219b34fa4f2d014046ff987?s=128&d=identicon&r=PG", "display_name": "kasperite", "link": "https://stackoverflow.com/users/1253504/kasperite"}, "is_accepted": true, "score": 2, "last_activity_date": 1548887123, "creation_date": 1548887123, "answer_id": 54450479, "question_id": 54450380, "link": "https://stackoverflow.com/questions/54450380/download-csv-button-in-ruby/54450479#54450479", "title": "Download csv button in ruby", "body": "<p>Add <code>send_data</code> after <strong>@csv_string</strong> declaration\n<a href=\"https://api.rubyonrails.org/v5.2.2/classes/ActionController/DataStreaming.html#method-i-send_data\" rel=\"nofollow noreferrer\">https://api.rubyonrails.org/v5.2.2/classes/ActionController/DataStreaming.html#method-i-send_data</a></p>\n\n<pre><code>def show\n  ...\n  send_data @csv_string, filename: \"something.csv\"\nend\n</code></pre>\n\n<p>also update <code>link_to</code> to use this action ie:</p>\n\n<p><code>&lt;%= link_to \"View CSV\", show_path %&gt;</code></p>\n"}], "owner": {"reputation": 48, "user_id": 8963855, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db0e3b7e44648a19f8002b8f0c68a021?s=128&d=identicon&r=PG&f=1", "display_name": "Beatrice", "link": "https://stackoverflow.com/users/8963855/beatrice"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 346, "favorite_count": 0, "accepted_answer_id": 54450479, "answer_count": 1, "score": 1, "last_activity_date": 1548887123, "creation_date": 1548886462, "last_edit_date": 1548886640, "question_id": 54450380, "link": "https://stackoverflow.com/questions/54450380/download-csv-button-in-ruby", "title": "Download csv button in ruby", "body": "<p>I'm new to ruby and am having trouble creating a download csv button. I have the following code in my controller:</p>\n\n<pre><code>@csv_string = CSV.generate do |csv|\n      csv &lt;&lt; [\"row\", \"of\", \"CSV\", \"data\"]\nend\n</code></pre>\n\n<p>And I've made the button in my view:</p>\n\n<pre><code>&lt;%= link_to \"View CSV\" %&gt;\n</code></pre>\n\n<p>How do I get the @csv_string to download when the \"View CSV\" button is clicked? \nThanks for your help! </p>\n"}, {"tags": ["html", "ruby-on-rails", "ruby", "cucumber"], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 3294969, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f33a2bbe0a9255f6ad449aabfb4748f?s=128&d=identicon&r=PG", "display_name": "user3294969", "link": "https://stackoverflow.com/users/3294969/user3294969"}, "is_accepted": false, "score": 0, "last_activity_date": 1548886064, "creation_date": 1548886064, "answer_id": 54450307, "question_id": 54450019, "link": "https://stackoverflow.com/questions/54450019/cant-tell-what-is-causing-cucumber-tests-to-fail/54450307#54450307", "title": "Can&#39;t tell what is causing cucumber tests to fail?", "body": "<p>Never mind, I figured it out. </p>\n\n<p>Previously this line: </p>\n\n<pre><code>&lt;%= form_tag process_create_exercise_path, :method =&gt; :post do %&gt;\n</code></pre>\n\n<p>... was applying to the entire form, but the new version only contained it within the div. Moved it outside of the div and it worked.</p>\n"}], "owner": {"reputation": 1, "user_id": 3294969, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f33a2bbe0a9255f6ad449aabfb4748f?s=128&d=identicon&r=PG", "display_name": "user3294969", "link": "https://stackoverflow.com/users/3294969/user3294969"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 34, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1548886064, "creation_date": 1548884698, "question_id": 54450019, "link": "https://stackoverflow.com/questions/54450019/cant-tell-what-is-causing-cucumber-tests-to-fail", "title": "Can&#39;t tell what is causing cucumber tests to fail?", "body": "<p>I converted some Ruby code into HTML so I could use Bootstrap, but now it is telling me it's not arriving at the right page - but it is.</p>\n\n<p>The failure shows that it is arriving at the /create_exercise path, but when I run the RoR app, it is indeed going to the /create_workout path when I submit the form on the page (with the submit_tag \"Enter\" button). Tried switching that line to the Ruby code but it still failed, so it's not the submit button.</p>\n\n<p>Here is the cucumber failure:</p>\n\n<pre><code>Scenario: I enter a new exercise                   # features/create_exercise.feature:15\n    Given I login and am on the create exercise page # features/step_definitions/generic_steps.rb:76\n    When I enter \"Sit ups\" into \"name\"               # features/step_definitions/generic_steps.rb:131\n    And I choose \"Cardio\"                            # features/step_definitions/generic_steps.rb:119\n    And I press \"Enter\"                              # features/step_definitions/generic_steps.rb:113\n    Then I should be on the create workout page      # features/step_definitions/generic_steps.rb:82\n      current_path: /create_exercise\n      should_path: /create_workout\n      expected: \"/create_workout\"\n           got: \"/create_exercise\" (using ==) (RSpec::Expectations::ExpectationNotMetError)\n      ./features/step_definitions/generic_steps.rb:87:in `/^(?:|I )should be on (.+)$/'\n      features/create_exercise.feature:21:in `Then I should be on the create workout page'\n   (0.2ms)  rollback transaction\n</code></pre>\n\n<p>Here is the original code that passed the cucumber test:</p>\n\n<pre><code>    &lt;p&gt;\n  Create Exercise:&lt;br /&gt;\n  &lt;%= form_tag process_create_exercise_path, :method =&gt; :post do %&gt;\n    &lt;%= label_tag 'Name:' %&gt;\n    &lt;%= text_field_tag 'name', '', :maxlength =&gt; 140, :autocomplete =&gt; 'off' %&gt;&lt;br /&gt;\n    &lt;b&gt;Category:&lt;/b&gt;&lt;br /&gt;\n    &lt;%= radio_button_tag(:category, \"Cardio\") %&gt;\n    &lt;%= label_tag(:cardio, \"Cardio\") %&gt;\n    &lt;%= radio_button_tag(:category, \"Strength\") %&gt;\n    &lt;%= label_tag(:strength, \"Strength\") %&gt;&lt;br /&gt;\n    &lt;b&gt;Everything below this is optional:&lt;/b&gt;&lt;br /&gt;\n    &lt;%= label_tag 'Description:' %&gt;\n    &lt;%= text_field_tag 'description', '', :maxlength =&gt; 140, :autocomplete =&gt; 'off' %&gt;&lt;br /&gt;\n    &lt;%= label_tag 'Muscle Group:' %&gt;\n    &lt;%= text_field_tag 'musclegroup', '', :maxlength =&gt; 140, :autocomplete =&gt; 'off' %&gt;&lt;br /&gt;\n    &lt;%= submit_tag 'Enter' %&gt;\n  &lt;% end %&gt;\n&lt;/p&gt;\n\n&lt;%= render :template =&gt; 'homepage/template' %&gt;\n</code></pre>\n\n<p>Here is my new (more beautiful) code, but is causing the failure above:</p>\n\n<pre><code>&lt;html&gt;\n&lt;body&gt;\n\n  &lt;legend&gt;Create Exercise:&lt;/legend&gt;\n\n  &lt;fieldset&gt;\n  &lt;div class=\"form-group\"&gt;\n    &lt;%= form_tag process_create_exercise_path, :method =&gt; :post do %&gt;\n      &lt;label for=\"name\"&gt;Name:&lt;/label&gt;\n      &lt;input type=\"text\" name=\"name\" class=\"form-control\" id=\"name\" value=\"\" maxlength=\"140\" autocomplete=\"off\" placeholder=\"Enter name of exercise\"&gt;\n  &lt;/div&gt;\n\n  &lt;div class=\"form-group\"&gt;\n    &lt;label for=\"category_select\"&gt;Category:&lt;/label&gt;\n    &lt;div class=\"form-check\" id=\"category_select\"&gt;\n      &lt;label class=\"form-check-label\"&gt;\n        &lt;input type=\"radio\" name=\"category\" id=\"category_Cardio\" value=\"Cardio\" class=\"form-check-input\"&gt;\n        Cardio\n      &lt;/label&gt;\n    &lt;/div&gt;\n    &lt;div class=\"form-check\"&gt;\n      &lt;label class=\"form-check-label\"&gt;\n        &lt;input type=\"radio\" name=\"category\" id=\"category_Strength\" value=\"Strength\" class=\"form-check-input\"&gt;\n        Strength\n      &lt;/label&gt;\n    &lt;/div&gt;\n  &lt;/div&gt;\n\n  &lt;div class=\"form-group\"&gt;\n    &lt;label for=\"description\"&gt;Description:&lt;/label&gt;\n      &lt;input type=\"text\" name=\"description\" id=\"description\" value=\"\" maxlength=\"140\" autocomplete=\"off\" placeholder=\"optional\"&gt;\n    &lt;label for=\"muscle_group\"&gt;Muscle Group:&lt;/label&gt;\n      &lt;input type=\"text\" name=\"muscle group\" id=\"muscle_group\" value=\"\" maxlength=\"140\" autocomplete=\"off\" placeholder=\"optional\"&gt;\n    &lt;!--&lt;input class=\"btn btn-primary\" type=\"submit\" name=\"commit\" value=\"Enter\"&gt;--&gt;\n    &lt;%= submit_tag \"Enter\" %&gt;\n  &lt;/div&gt;\n\n  &lt;% end %&gt;\n\n  &lt;/fieldset&gt;\n&lt;/body&gt;\n\n&lt;%= render :template =&gt; 'homepage/template' %&gt;\n\n&lt;/html&gt;\n</code></pre>\n"}, {"tags": ["ruby", "amazon-web-services", "aws-lambda", "rubygems"], "answers": [{"tags": [], "owner": {"reputation": 26225, "user_id": 2800876, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/94e79f29e946660a425b518ea6be8914?s=128&d=identicon&r=PG&f=1", "display_name": "Zags", "link": "https://stackoverflow.com/users/2800876/zags"}, "is_accepted": true, "score": 6, "last_activity_date": 1548945810, "creation_date": 1548945810, "answer_id": 54463028, "question_id": 54450010, "link": "https://stackoverflow.com/questions/54450010/ruby-gem-with-native-extensions-not-working-on-aws-lambda/54463028#54463028", "title": "Ruby gem with native extensions not working on AWS Lambda", "body": "<p>Running <code>ldd</code> on gems/oj-2.18.5/lib/oj/oj.so clarifies the first error.  the problem is not that <code>oj.so</code> does not exist, but that <code>libruby.so.2.5</code> does not exist.  The second problem is that the current Ruby lambda has glibc version 2.17, where AWS-linux comes with glibc version 2.25.</p>\n\n<p>The fundamental problem here is that you need to install your gems on a system identical to the one they will run on if you have native dependencies.  The best way I've found to do this is using docker.  <a href=\"https://github.com/lambci/docker-lambda\" rel=\"noreferrer\">https://github.com/lambci/docker-lambda</a> has docker images of lambda installs.</p>\n\n<p>For ruby, do the following:</p>\n\n<ol>\n<li>Build the docker ruby image</li>\n<li>Copy your gemfile into a pristine directory</li>\n<li>From that directory, run: <code>docker run -v \"$PWD\":/var/task --entrypoint bundle lambci/lambda-base:ruby2.5 install --path=/var/task</code></li>\n</ol>\n\n<p>This will give you a folder called <code>ruby</code> with a version dependencies compatible with lambda.</p>\n\n<p>If you are planning to use this output with lambda layers, keep in mind that the file structure produced by bunlde is <code>ruby/2.5.0/...</code> and it needs need to be <code>ruby/gems/2.5.0/...</code> before you upload it.</p>\n"}, {"tags": [], "owner": {"reputation": 1184, "user_id": 9744136, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CzAxn.jpg?s=128&g=1", "display_name": "cesartalves", "link": "https://stackoverflow.com/users/9744136/cesartalves"}, "is_accepted": false, "score": 1, "last_activity_date": 1609181963, "last_edit_date": 1609181963, "creation_date": 1586464888, "answer_id": 61129873, "question_id": 54450010, "link": "https://stackoverflow.com/questions/54450010/ruby-gem-with-native-extensions-not-working-on-aws-lambda/61129873#61129873", "title": "Ruby gem with native extensions not working on AWS Lambda", "body": "<p>The problem is precisely as you stated, to summarize it: <strong>native extension gems need to be built in the same environment as they will be run</strong>. Therefore, before uploading the vendor to aws, we must install the gems in an environment which is similar to that of lambda.</p>\n<hr>\n<p>To build your vendor/bundle in a way compliant with lambda, use the following docker container:</p>\n<pre><code>docker run --rm -v &quot;$PWD&quot;:/var/task lambci/lambda:build-ruby2.7 bundle install --deployment\n</code></pre>\n<p>This will give you a working vendor/bundle dependency.</p>\n<p>You can run another container to check if the function works:</p>\n<pre><code>docker run --rm -v $PWD:/var/task:ro,delegated lambci/lambda:ruby2.7 lambda_handler.lambda_handler\n</code></pre>\n<blockquote>\n<p>The full list of images is here:\n<a href=\"https://github.com/lambci/docker-lambda\" rel=\"nofollow noreferrer\">https://github.com/lambci/docker-lambda</a></p>\n</blockquote>\n<p>The question's already 1 year old but I had to search for about 2 hours to solve the exact same problem with the gem nokogiri, so I thought this might be useful to somebody.</p>\n<p>Hope this spares you from some googling hours!</p>\n"}], "owner": {"reputation": 26225, "user_id": 2800876, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/94e79f29e946660a425b518ea6be8914?s=128&d=identicon&r=PG&f=1", "display_name": "Zags", "link": "https://stackoverflow.com/users/2800876/zags"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 944, "favorite_count": 0, "accepted_answer_id": 54463028, "answer_count": 2, "score": 4, "last_activity_date": 1609181963, "creation_date": 1548884648, "last_edit_date": 1592644375, "question_id": 54450010, "link": "https://stackoverflow.com/questions/54450010/ruby-gem-with-native-extensions-not-working-on-aws-lambda", "title": "Ruby gem with native extensions not working on AWS Lambda", "body": "<p>I have a ruby script that I am trying to run on AWS Lambda.  How do I get this to use a Ruby gem with native extensions?</p>\n<p>I have installed my Ruby gems through <code>bundle install --deployment</code> and included them in my deployment.  When I run the function on lambda, I get the error:</p>\n<blockquote>\n<p>Ignoring oj-2.18.5 because its extensions are not built. Try: gem pristine oj --version 2.18.5</p>\n<p>Init error when loading handler</p>\n<p>{</p>\n<p>&quot;errorMessage&quot;: &quot;libruby.so.2.5: cannot open shared object file: No such file or directory - /opt/ruby/gems/2.5.0/gems/oj-2.18.5/lib/oj/oj.so&quot;,</p>\n<p>...</p>\n</blockquote>\n<p>I have tried including dependencies both in the lambda code itself and as a lambda layer.  The only thing that changes is the path in the error message.</p>\n<p>Lambda is able to find my ruby gems.  I get a different error when they are in the wrong location.</p>\n<p><code>/opt/ruby/gems/2.5.0/gems/oj-2.18.5/lib/oj/oj.so</code> does exist.</p>\n<p>I have tried this with files generated by <code>bundle install</code> on both Ubuntu and AWS-linux.  On both systems, bundle informs me that it is &quot;Installing oj 2.18.5 with native extensions&quot;.</p>\n<p>If I upload a copy of <code>libruby.so</code> to my lambda, and set the environment variable <code>LD_LIBRARY_PATH</code> to its location and using the set of dependencies installed on the AWS-linux fixes the error listed above, but only to give me an error even more opaque:</p>\n<blockquote>\n<p>/lib64/libc.so.6: version `GLIBC_2.25' not found (required by /opt/ruby/lib/libruby.so.2.5)</p>\n</blockquote>\n"}, {"tags": ["ruby-on-rails", "ruby", "nokogiri", "bundler"], "comments": [{"owner": {"reputation": 2372, "user_id": 8031815, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-IlIxbbzooGw/AAAAAAAAAAI/AAAAAAAAAE0/9JNBRJDFRnE/photo.jpg?sz=128", "display_name": "Garrett Motzner", "link": "https://stackoverflow.com/users/8031815/garrett-motzner"}, "edited": false, "score": 0, "creation_date": 1548882509, "post_id": 54449444, "comment_id": 95707849, "body": "Are you using the expected version of ruby installed through RVM? That might be it and why <code>gem pristine</code> didn&#39;t work..."}, {"owner": {"reputation": 351, "user_id": 8816219, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6e1d4b609105b1db1a567d6b676ca3f2?s=128&d=identicon&r=PG&f=1", "display_name": "Ashok Bhaskar", "link": "https://stackoverflow.com/users/8816219/ashok-bhaskar"}, "reply_to_user": {"reputation": 2372, "user_id": 8031815, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-IlIxbbzooGw/AAAAAAAAAAI/AAAAAAAAAE0/9JNBRJDFRnE/photo.jpg?sz=128", "display_name": "Garrett Motzner", "link": "https://stackoverflow.com/users/8031815/garrett-motzner"}, "edited": false, "score": 0, "creation_date": 1548882756, "post_id": 54449444, "comment_id": 95707967, "body": "How can I check that? Would I need to run <code>bundle exec gem pristine</code>?"}, {"owner": {"reputation": 2372, "user_id": 8031815, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-IlIxbbzooGw/AAAAAAAAAAI/AAAAAAAAAE0/9JNBRJDFRnE/photo.jpg?sz=128", "display_name": "Garrett Motzner", "link": "https://stackoverflow.com/users/8031815/garrett-motzner"}, "edited": false, "score": 0, "creation_date": 1548882981, "post_id": 54449444, "comment_id": 95708075, "body": "That might be worth a shot. (You do seem to have a rather strange case here.)"}, {"owner": {"reputation": 2372, "user_id": 8031815, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-IlIxbbzooGw/AAAAAAAAAAI/AAAAAAAAAE0/9JNBRJDFRnE/photo.jpg?sz=128", "display_name": "Garrett Motzner", "link": "https://stackoverflow.com/users/8031815/garrett-motzner"}, "edited": false, "score": 0, "creation_date": 1548883025, "post_id": 54449444, "comment_id": 95708098, "body": "Also try <code>gem uninstall</code> if that doesn&#39;t work"}, {"owner": {"reputation": 351, "user_id": 8816219, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6e1d4b609105b1db1a567d6b676ca3f2?s=128&d=identicon&r=PG&f=1", "display_name": "Ashok Bhaskar", "link": "https://stackoverflow.com/users/8816219/ashok-bhaskar"}, "reply_to_user": {"reputation": 2372, "user_id": 8031815, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-IlIxbbzooGw/AAAAAAAAAAI/AAAAAAAAAE0/9JNBRJDFRnE/photo.jpg?sz=128", "display_name": "Garrett Motzner", "link": "https://stackoverflow.com/users/8031815/garrett-motzner"}, "edited": false, "score": 0, "creation_date": 1548883951, "post_id": 54449444, "comment_id": 95708485, "body": "I think running <code>bundle exec gem pristine</code> uninstalled the package somehow - <code>gem uninstall nokogiri</code> output that nokogiri wasn&#39;t installed after running the <code>pristine</code> command."}, {"owner": {"reputation": 2372, "user_id": 8031815, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-IlIxbbzooGw/AAAAAAAAAAI/AAAAAAAAAE0/9JNBRJDFRnE/photo.jpg?sz=128", "display_name": "Garrett Motzner", "link": "https://stackoverflow.com/users/8031815/garrett-motzner"}, "edited": false, "score": 0, "creation_date": 1548885231, "post_id": 54449444, "comment_id": 95708940, "body": "try <code>gem install</code> (with the version flag if needed) then :)"}, {"owner": {"reputation": 351, "user_id": 8816219, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6e1d4b609105b1db1a567d6b676ca3f2?s=128&d=identicon&r=PG&f=1", "display_name": "Ashok Bhaskar", "link": "https://stackoverflow.com/users/8816219/ashok-bhaskar"}, "reply_to_user": {"reputation": 2372, "user_id": 8031815, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-IlIxbbzooGw/AAAAAAAAAAI/AAAAAAAAAE0/9JNBRJDFRnE/photo.jpg?sz=128", "display_name": "Garrett Motzner", "link": "https://stackoverflow.com/users/8031815/garrett-motzner"}, "edited": false, "score": 1, "creation_date": 1548885896, "post_id": 54449444, "comment_id": 95709186, "body": "Unfortunately, I ended up right back where I started with the same error."}], "answers": [{"tags": [], "owner": {"reputation": 1574, "user_id": 1388302, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/27ca9066ad05bd8aa9ec366115f3cd38?s=128&d=identicon&r=PG", "display_name": "kwerle", "link": "https://stackoverflow.com/users/1388302/kwerle"}, "is_accepted": false, "score": -2, "last_activity_date": 1548896435, "creation_date": 1548896435, "answer_id": 54451892, "question_id": 54449444, "link": "https://stackoverflow.com/questions/54449444/rails-console-errors-on-missing-nokogiri-gemspec-but-nokogiri-has-no-gemspec/54451892#54451892", "title": "Rails console errors on missing nokogiri gemspec, but nokogiri has no gemspec", "body": "<p>Here is my strong advice: bail on rvm and move to docker.  You get a clean build every time.  No worrying about mixing system libs between different projects.  etc.</p>\n\n<p>There is a little overhead in getting to know docker, but once you do you're free to run any version of postgres/mysql/rails/ruby/whatever and mix and match however you like.</p>\n"}], "owner": {"reputation": 351, "user_id": 8816219, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6e1d4b609105b1db1a567d6b676ca3f2?s=128&d=identicon&r=PG&f=1", "display_name": "Ashok Bhaskar", "link": "https://stackoverflow.com/users/8816219/ashok-bhaskar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 223, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1548896435, "creation_date": 1548881986, "last_edit_date": 1548883409, "question_id": 54449444, "link": "https://stackoverflow.com/questions/54449444/rails-console-errors-on-missing-nokogiri-gemspec-but-nokogiri-has-no-gemspec", "title": "Rails console errors on missing nokogiri gemspec, but nokogiri has no gemspec", "body": "<p>I tried to reinstall Ruby 2.3.6 through RVM to fix some errors, where I had to explicitly specify the OpenSSL path to get it to reinstall. After installing bundler and running <code>bundle install</code> in my project directory, I tried to run <code>rails c</code> and <code>bundle exec rails c</code>, only to get this error:</p>\n\n<pre><code>/Users/abhaskar/.rvm/gems/ruby-2.3.6@px-core/gems/bundler-1.16.1/lib/bundler/stub_specification.rb:97:in `_remote_specification': The gemspec for nokogiri-1.10.1 at /Users/abhaskar/.rvm/gems/ruby-2.3.6@px-core/specifications/nokogiri-1.10.1.gemspec was missing or broken. Try running `gem pristine nokogiri -v 1.10.1` to fix the cached spec. (Bundler::GemspecError)\n</code></pre>\n\n<p>However, Nokogiri has no gemspec, and running the suggested <code>gem pristine</code> command didn't change anything. I checked that Nokogiri is listed in my Gemfile. None of my team members are facing the same issues. How can I diagnose &amp; fix this problem?</p>\n\n<p>Update: <code>bundle exec gem pristine nokogiri -v 1.10.1</code> errored with:</p>\n\n<pre><code>ERROR:  While executing gem ... (Gem::Ext::BuildError)\nERROR: Failed to build gem native extension.\n\ncurrent directory: /Users/abhaskar/.rvm/gems/ruby-2.3.6/gems/nokogiri-1.10.1/ext/nokogiri\n/Users/abhaskar/.rvm/rubies/ruby-2.3.6/bin/ruby -r ./siteconf20190130-46592-q2jdnm.rb extconf.rb\n/Users/abhaskar/.rvm/rubies/ruby-2.3.6/lib/ruby/site_ruby/2.3.0/bundler/spec_set.rb:91:in `block in materialize': Could not find nokogiri-1.10.1 in any of the sources (Bundler::GemNotFound)\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 2372, "user_id": 8031815, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-IlIxbbzooGw/AAAAAAAAAAI/AAAAAAAAAE0/9JNBRJDFRnE/photo.jpg?sz=128", "display_name": "Garrett Motzner", "link": "https://stackoverflow.com/users/8031815/garrett-motzner"}, "edited": false, "score": 0, "creation_date": 1548885362, "post_id": 54449302, "comment_id": 95708988, "body": "what are the ruby versions on each?"}, {"owner": {"reputation": 38, "user_id": 8075916, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58808c57682fe224932dbcb115585a59?s=128&d=identicon&r=PG&f=1", "display_name": "Greg W", "link": "https://stackoverflow.com/users/8075916/greg-w"}, "reply_to_user": {"reputation": 2372, "user_id": 8031815, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-IlIxbbzooGw/AAAAAAAAAAI/AAAAAAAAAE0/9JNBRJDFRnE/photo.jpg?sz=128", "display_name": "Garrett Motzner", "link": "https://stackoverflow.com/users/8031815/garrett-motzner"}, "edited": false, "score": 0, "creation_date": 1548904418, "post_id": 54449302, "comment_id": 95713836, "body": "ruby 2.4.5,  Rails 4.2.10"}], "answers": [{"comments": [{"owner": {"reputation": 38, "user_id": 8075916, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58808c57682fe224932dbcb115585a59?s=128&d=identicon&r=PG&f=1", "display_name": "Greg W", "link": "https://stackoverflow.com/users/8075916/greg-w"}, "edited": false, "score": 0, "creation_date": 1548967526, "post_id": 54464319, "comment_id": 95745747, "body": "Seems like that was the issue. I had the timecop gem in <code>group :development, :test</code> section"}], "tags": [], "owner": {"reputation": 69, "user_id": 5886157, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AhxM7.jpg?s=128&g=1", "display_name": "Austin Leatham", "link": "https://stackoverflow.com/users/5886157/austin-leatham"}, "is_accepted": true, "score": 2, "last_activity_date": 1548949801, "creation_date": 1548949801, "answer_id": 54464319, "question_id": 54449302, "link": "https://stackoverflow.com/questions/54449302/why-does-date-strptime-not-throw-argumenterror-in-rails-console/54464319#54464319", "title": "Why does Date.strptime not throw ArgumentError in rails console", "body": "<p>Double check that your Gemfile dev dependencies don't include something that could mess with Date's strptime function.</p>\n\n<p>For example, the Timecop gem sets an alias for Date.strptime to this method:\n<a href=\"https://www.rubydoc.info/gems/timecop/Date.strptime_with_mock_date\" rel=\"nofollow noreferrer\">https://www.rubydoc.info/gems/timecop/Date.strptime_with_mock_date</a></p>\n\n<p>Which just ends up calling <code>Time.strptime(str, fmt).to_date</code>.</p>\n\n<p>This behavior looks very similar to what you reported:</p>\n\n<pre><code>irb(main):001:0&gt; Date.strptime(\"09/31/2011\", '%m/%d/%Y')\nArgumentError: invalid date\n    from (irb):1:in 'strptime'\nirb(main):002:0&gt; Time.strptime(\"09/31/2011\", '%m/%d/%Y').to_date\n=&gt; Sat, 01 Oct 2011\n</code></pre>\n"}], "owner": {"reputation": 38, "user_id": 8075916, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58808c57682fe224932dbcb115585a59?s=128&d=identicon&r=PG&f=1", "display_name": "Greg W", "link": "https://stackoverflow.com/users/8075916/greg-w"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "accepted_answer_id": 54464319, "answer_count": 1, "score": 1, "last_activity_date": 1548949801, "creation_date": 1548881368, "question_id": 54449302, "link": "https://stackoverflow.com/questions/54449302/why-does-date-strptime-not-throw-argumenterror-in-rails-console", "title": "Why does Date.strptime not throw ArgumentError in rails console", "body": "<p>In my local rails console passing 9/31/2011 returns 10/1/2011</p>\n\n<pre><code>[1] pry(main)&gt; Date.strptime(\"09/31/2011\", '%m/%d/%Y')\n=&gt; Sat, 01 Oct 2011\n</code></pre>\n\n<p>In heroku console it throws an ArgumentError:</p>\n\n<pre><code>irb(main):002:0&gt; Date.strptime(\"09/31/2011\", '%m/%d/%Y')\nArgumentError: invalid date\n    from (irb):2:in `strptime'\n</code></pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1548880704, "post_id": 54449090, "comment_id": 95707019, "body": "you mean that the file path will be provided by users? or that there can be commands in the file you don&#39;t want to be executed?"}, {"owner": {"reputation": 312, "user_id": 865168, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/U2zgb.jpg?s=128&g=1", "display_name": "CJW", "link": "https://stackoverflow.com/users/865168/cjw"}, "reply_to_user": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1549378336, "post_id": 54449090, "comment_id": 95875500, "body": "I was only thinking about about commands in the filename from the file path provided by users"}], "answers": [{"tags": [], "owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "is_accepted": false, "score": 1, "last_activity_date": 1548883243, "creation_date": 1548883243, "answer_id": 54449719, "question_id": 54449090, "link": "https://stackoverflow.com/questions/54449090/getting-word-count-of-a-file-in-ruby-and-not-open-to-command-injection/54449719#54449719", "title": "Getting word count of a file in Ruby and not open to Command Injection", "body": "<p>Probably the easiest is to use <a href=\"https://ruby-doc.org/stdlib/libdoc/open3/rdoc/Open3.html#method-c-capture2\" rel=\"nofollow noreferrer\"><code>Open3::capture2</code></a>:</p>\n\n<pre><code>output, status = Open3::capture2('wc', '-l', file_path)\n</code></pre>\n\n<p>Then you can check <code>status</code> and deal with errors as needed and since <code>output</code> should be something like <code>\"    2342 file_path\\n\"</code>, you can get the count with a simple <code>#to_i</code> call:</p>\n\n<pre><code>line_count = output.to_i\n</code></pre>\n\n<p>If you don't care about error handling (which would never happen in real life):</p>\n\n<pre><code>line_count = Open3::capture2('wc', '-l', file_path).first.to_i\n</code></pre>\n\n<p>No shell will be involved, no command injection issues.</p>\n\n<p>However, this assumes that the first <code>wc</code> in your <code>PATH</code> is the <code>wc</code> you want to use so you might want to be more specific:</p>\n\n<pre><code># Or ensure that your PATH environment variable is sensible.\noutput, status = Open3::capture2('/usr/bin/wc', '-l', file_path)\n</code></pre>\n\n<p>This also assumes that you want the users to be able to read any file that your process can; if that's not the case then you'd need to blacklist/whitelist <code>file_path</code> to make sure it is something that they're supposed to be able to read. </p>\n\n<p>Of course, if you're going to all this trouble you might as well open the file and count the lines yourself with a couple lines of Ruby:</p>\n\n<pre><code># Or some variation on this and a `rescue` to catch exceptions.\nline_count = File.open('Gemfile') { |fp| fp.each_line.count }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 665, "user_id": 10306509, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dEjY3.jpg?s=128&g=1", "display_name": "Ivan Olshansky", "link": "https://stackoverflow.com/users/10306509/ivan-olshansky"}, "is_accepted": false, "score": 1, "last_activity_date": 1548891911, "creation_date": 1548891911, "answer_id": 54451290, "question_id": 54449090, "link": "https://stackoverflow.com/questions/54449090/getting-word-count-of-a-file-in-ruby-and-not-open-to-command-injection/54451290#54451290", "title": "Getting word count of a file in Ruby and not open to Command Injection", "body": "<p>If you prefer to use native shell command and the only thing you want is to <em>escape</em> <strong>file_path</strong>, there is a <a href=\"http://ruby-doc.org/stdlib-2.5.3/libdoc/shellwords/rdoc/Shellwords.html\" rel=\"nofollow noreferrer\">Shellwords</a> class in the standard library.</p>\n\n<p>It's very easy to use it in your task:</p>\n\n<pre><code>require 'shellwords'\n\n`wc -l &lt; #{Shellwords.escape(file_path)}`.to_i\n</code></pre>\n"}], "owner": {"reputation": 312, "user_id": 865168, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/U2zgb.jpg?s=128&g=1", "display_name": "CJW", "link": "https://stackoverflow.com/users/865168/cjw"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 1, "answer_count": 2, "score": 0, "last_activity_date": 1548891911, "creation_date": 1548880459, "question_id": 54449090, "link": "https://stackoverflow.com/questions/54449090/getting-word-count-of-a-file-in-ruby-and-not-open-to-command-injection", "title": "Getting word count of a file in Ruby and not open to Command Injection", "body": "<p>How do I get the line count of a file into a variable in Ruby using the Unix command wc for speed for very large files whilst making sure that it's safe from command injection using either open3, system or something similar to achieve the same output as <code>`wc -l &lt; \"#{file_path}\".to_i`</code> </p>\n"}, {"tags": ["ruby-on-rails", "json", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 2718, "user_id": 1490262, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/afc8915df9cbb5c119ea0057d17fabd2?s=128&d=identicon&r=PG", "display_name": "Peter P.", "link": "https://stackoverflow.com/users/1490262/peter-p"}, "edited": false, "score": 0, "creation_date": 1548887893, "post_id": 54449795, "comment_id": 95709870, "body": "Sometimes you just gotta use the shell. I had high hopes for Shellwords.shellescape but that didn&#39;t work for json as it caused too much escaping of things like the { } curly braces. However, this led me to search for &quot;shell escape json&quot; which led me to the winning answer which I&#39;ll post shortly."}], "tags": [], "owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "is_accepted": false, "score": 2, "last_activity_date": 1548902896, "last_edit_date": 1548902896, "creation_date": 1548883611, "answer_id": 54449795, "question_id": 54448759, "link": "https://stackoverflow.com/questions/54448759/properly-escape-json-to-command-line-call-in-ruby-or-rails/54449795#54449795", "title": "Properly escape json to command line call in Ruby or Rails", "body": "<p>In this case it is simpler and more effective to make a system call <em>without</em> a shell. If you use the multi-argument form of <a href=\"http://ruby-doc.org/core/Kernel.html#method-i-system\" rel=\"nofollow noreferrer\"><code>Kernel#system</code></a> to invoke the external command directly:</p>\n\n<pre><code>system('aws', 'events', 'puts-targets', '--cli-input-json', json)\n</code></pre>\n\n<p>No shell, no quoting or escaping problems with <code>json</code>.</p>\n\n<p>If you need to do more complicated things (such as capture output or errors), look into the various methods in <a href=\"http://ruby-doc.org/stdlib/libdoc/open3/rdoc/Open3.html\" rel=\"nofollow noreferrer\"><code>Open3</code></a>.</p>\n\n<p>If you absolutely must go through a shell there's always <a href=\"http://ruby-doc.org/stdlib/libdoc/shellwords/rdoc/Shellwords.html#method-c-shellescape\" rel=\"nofollow noreferrer\"><code>Shellwords.shellescape</code></a>. But really, when you use the shell, you're:</p>\n\n<ol>\n<li>Building a command line with a bunch of Ruby string operations.</li>\n<li>Invoking a shell.</li>\n<li>Letting the shell parse the command line (i.e. undo everything you did in <strong>(1)</strong>).</li>\n<li>Letting the shell invoke the command with your arguments.</li>\n</ol>\n\n<p>Why not go straight to <strong>(4)</strong> yourself?</p>\n"}, {"comments": [{"owner": {"reputation": 2718, "user_id": 1490262, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/afc8915df9cbb5c119ea0057d17fabd2?s=128&d=identicon&r=PG", "display_name": "Peter P.", "link": "https://stackoverflow.com/users/1490262/peter-p"}, "reply_to_user": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1548893919, "post_id": 54450655, "comment_id": 95711472, "body": "Luckily this is just a maintenance script. It doesn&#39;t take random user input. The json is highly structured valid input that actually comes straight from AWS with some small modification. There is no way in hell I would use a shell command for input that comes from the web. Using a shell allows me to get the response of the command and collate it in the script (ie associate errors with a particular invocation). I looked at Open3 but it seemed more trouble than its worth for this quick script. If I was writing code that were to be more robust/prod worthy, I would use a ruby AWS library."}, {"owner": {"reputation": 2718, "user_id": 1490262, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/afc8915df9cbb5c119ea0057d17fabd2?s=128&d=identicon&r=PG", "display_name": "Peter P.", "link": "https://stackoverflow.com/users/1490262/peter-p"}, "reply_to_user": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1548894118, "post_id": 54450655, "comment_id": 95711530, "body": "Regardless of the production worthiness, I can see other potential valid use cases for getting strings into Bash compatible format using the dump approach above."}], "tags": [], "owner": {"reputation": 2718, "user_id": 1490262, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/afc8915df9cbb5c119ea0057d17fabd2?s=128&d=identicon&r=PG", "display_name": "Peter P.", "link": "https://stackoverflow.com/users/1490262/peter-p"}, "is_accepted": false, "score": 1, "last_activity_date": 1548894037, "last_edit_date": 1548894037, "creation_date": 1548888080, "answer_id": 54450655, "question_id": 54448759, "link": "https://stackoverflow.com/questions/54448759/properly-escape-json-to-command-line-call-in-ruby-or-rails/54450655#54450655", "title": "Properly escape json to command line call in Ruby or Rails", "body": "<p>Thanks to @mu-is-too-short, I came across Shellwords which is a neat utility. This didn't solve the problem however, but led me to search for \"shell escape json\" which in turn led me to: <a href=\"https://stackoverflow.com/questions/8639642/best-way-to-escape-and-unescape-strings-in-ruby\">Best way to escape and unescape strings in Ruby?</a></p>\n\n<p>So: </p>\n\n<pre><code>json = {\"key\" =&gt; \"value that \\\"has\\\" quotes\"}.to_json.dump\n</code></pre>\n\n<p>Properly gets the escaped string that bash will understand. Tada.</p>\n\n<p>UPDATE: Don't use this in production code. You're better off following @mu-is-too-short's advice in the comments or using a higher level library.</p>\n"}], "owner": {"reputation": 2718, "user_id": 1490262, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/afc8915df9cbb5c119ea0057d17fabd2?s=128&d=identicon&r=PG", "display_name": "Peter P.", "link": "https://stackoverflow.com/users/1490262/peter-p"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 398, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1548902896, "creation_date": 1548878891, "question_id": 54448759, "link": "https://stackoverflow.com/questions/54448759/properly-escape-json-to-command-line-call-in-ruby-or-rails", "title": "Properly escape json to command line call in Ruby or Rails", "body": "<p>I'd like to call a command line utility from a ruby script like so:</p>\n\n<pre><code>#!/env/ruby\njson = {\"key\" =&gt; \"value that \\\"has\\\" quotes\"}.to_json\n`aws events put-targets --cli-input-json #{json}`\n</code></pre>\n\n<p>Such that the resultant call should look like:</p>\n\n<pre><code>aws events put-targets --cli-input-json \"{\\\"key\\\": \\\"value that \\\"has\\\" quotes\\\"}\"\n</code></pre>\n\n<p>However, the result in this string interpolation results in a clean looking json structure without the quotes escaped and so results in error at the command line. Eg. </p>\n\n<pre><code>aws events put-targets --cli-input-json {\"key\": \"value that \\\"has\\\" quotes\"}\n</code></pre>\n\n<p>I need all the quotes properly escaped so that a string to the command line can be parsed as proper json. </p>\n\n<p>I've tried doing string manipulation to manually escape quotes with things like: </p>\n\n<pre><code>json.gsub(/\\\"/,'\\\"')\n</code></pre>\n\n<p>But that doesn't work either. </p>\n\n<p>This seems like it's harder than it should be. How can I render a properly escaped json string to the command line call?</p>\n\n<p>I do have a rails environment that I can run this through if there are utilities that ActiveSupport provides that would facilitate this. </p>\n"}, {"tags": ["ruby", "combinations", "combinatorics"], "comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1548919822, "post_id": 54447564, "comment_id": 95718873, "body": "You need to make the question way shorter in order for people to read it."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1548993235, "post_id": 54447564, "comment_id": 95753007, "body": "I suggest you delete Question #2. For one, that question is not well-defined, and it would require some work to make it so."}], "answers": [{"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1548990361, "post_id": 54457995, "comment_id": 95752334, "body": "I don&#39;t believe this addresses the question being asked, which I understand to be: given <code>n</code> students, produce all groups of <code>m</code> pairs such that each pair appears in exactly one group (or possibly in at most one group) and each person in each group appears only once in the group. Your answer has no concept of groups."}, {"owner": {"reputation": 65718, "user_id": 844416, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e39c2364935265593d76247ddc6d07c?s=128&d=identicon&r=PG", "display_name": "MBo", "link": "https://stackoverflow.com/users/844416/mbo"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1548990871, "post_id": 54457995, "comment_id": 95752458, "body": "@Cary Swoveland This approach corresponds to author&#39;s example. And perhaps to your interpretation - each pair appears in exactly one group, each person in a group appears only once in the group. May be, I did not emphasized that the first group is <code>([a,d],[b,e],[c,f])</code>, second one is <code>([a,e],[d,f],[b,c])</code> and so on"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1548992955, "post_id": 54457995, "comment_id": 95752945, "body": "After re-reading the question I think your interpretation is correct. If there are <code>n</code> players (even) you initially have <code>n&#47;2</code> matches. Then you shift to create <code>n&#47;2</code> more matches, and so on. After <code>n-1</code> configurations (<code>n-2</code> shifts) all players have played every other player once. Correct? That gives you an array <code>arr</code> of <code>(n-1)*n&#47;2</code> matches. Now if the group size is <code>m</code> matches (assume <code>(n-1)*n&#47;2</code> is divisible by <code>m</code>), you could slice slice <code>arr</code> into arrays of <code>m</code> matches. Is it obvious that none of those arrays of <code>m</code> matches contains a person that plays more than once match in that group?"}, {"owner": {"reputation": 65718, "user_id": 844416, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e39c2364935265593d76247ddc6d07c?s=128&d=identicon&r=PG", "display_name": "MBo", "link": "https://stackoverflow.com/users/844416/mbo"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1548993326, "post_id": 54457995, "comment_id": 95753031, "body": "@Cary Swoveland Yes, all stuff concerning to <code>(n-1)*n&#47;2 matches</code> is true. But I don&#39;t see a requirement to make groups of <code>m</code> matches - yes, it&#39;s possible, but it is secondary problem."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1548993411, "post_id": 54457995, "comment_id": 95753049, "body": "The OP does say, &quot;What I need, however, is to produce all groups consisting of 4 pairs each, each group without repetition of students.&quot;"}, {"owner": {"reputation": 65718, "user_id": 844416, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e39c2364935265593d76247ddc6d07c?s=128&d=identicon&r=PG", "display_name": "MBo", "link": "https://stackoverflow.com/users/844416/mbo"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1548993645, "post_id": 54457995, "comment_id": 95753091, "body": "@Cary Swoveland  I understood this as specific case for 8 students example. Note the next sentence ` If the class consists of 20 students, I will need all groups of 10 pairs.`"}, {"owner": {"reputation": 2365, "user_id": 1236013, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/b5a14bb8a7d1a4b8de4ac85304724786?s=128&d=identicon&r=PG", "display_name": "aaandre", "link": "https://stackoverflow.com/users/1236013/aaandre"}, "edited": false, "score": 0, "creation_date": 1549053721, "post_id": 54457995, "comment_id": 95780416, "body": "MBo, thank you for referencing the round robin algorithm. Here&#39;s a simple implementation: <a href=\"https://gist.github.com/andreimoment/60acd522eadaed4c38ee0f275ca7f3ed\" rel=\"nofollow noreferrer\">gist.github.com/andreimoment/60acd522eadaed4c38ee0f275ca7f3e&zwnj;&#8203;d</a> I however was hoping to efficiently find all groups -- this was an intermediate step in scoring group combinations. Here&#39;s an answer in MathOverflow which helped me out, with the code resulting from it. <a href=\"https://math.stackexchange.com/questions/3093225/an-efficient-approach-to-combinations-of-pairs-in-groups-without-repetitions\" title=\"an efficient approach to combinations of pairs in groups without repetitions\">math.stackexchange.com/questions/3093225/&hellip;</a>"}, {"owner": {"reputation": 2365, "user_id": 1236013, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/b5a14bb8a7d1a4b8de4ac85304724786?s=128&d=identicon&r=PG", "display_name": "aaandre", "link": "https://stackoverflow.com/users/1236013/aaandre"}, "edited": false, "score": 0, "creation_date": 1549053813, "post_id": 54457995, "comment_id": 95780442, "body": "I believe that using rotation, I could generate the desired groups in an efficient manner, so I will accept your answer, too. I am still not sure how to handle odd numbers of participants -- it is possible that a round-robin approach might be more productive with this as it may provide more control."}], "tags": [], "owner": {"reputation": 65718, "user_id": 844416, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e39c2364935265593d76247ddc6d07c?s=128&d=identicon&r=PG", "display_name": "MBo", "link": "https://stackoverflow.com/users/844416/mbo"}, "is_accepted": true, "score": 1, "last_activity_date": 1548928993, "creation_date": 1548928993, "answer_id": 54457995, "question_id": 54447564, "link": "https://stackoverflow.com/questions/54447564/an-efficient-approach-to-combinations-of-pairs-in-groups-without-repetitions/54457995#54457995", "title": "An efficient approach to combinations of pairs in groups without repetitions?", "body": "<p>There is effective approach to generate such pairs - <a href=\"https://en.wikipedia.org/wiki/Round-robin_tournament\" rel=\"nofollow noreferrer\">round-robin tournament</a></p>\n\n<p>Place all students in two rows. </p>\n\n<pre><code>a  b  c\nd  e  f    \n</code></pre>\n\n<p>So pairs are <code>a-d, b-e, c-f</code></p>\n\n<p>Fix the first one and rotate others in cyclic manner</p>\n\n<pre><code>a  d  b\ne  f  c    \n\na  e  d\nf  c  b    \n\na  f  e\nc  b  d\n\na  c  f  \nb  d  e\n</code></pre>\n\n<p>So generating N-1 tours each with N/2 non-repeating pairs.</p>\n\n<p>For odd number allow sole student to rest :)   </p>\n\n<p>or add him (right one in the top row) to the left pair to obtain the most long time between he meets both partners</p>\n\n<pre><code> a  b  c  d\n e  f  g\n\n a-e-d, b-f, c-g \n</code></pre>\n"}], "owner": {"reputation": 2365, "user_id": 1236013, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/b5a14bb8a7d1a4b8de4ac85304724786?s=128&d=identicon&r=PG", "display_name": "aaandre", "link": "https://stackoverflow.com/users/1236013/aaandre"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 219, "favorite_count": 0, "accepted_answer_id": 54457995, "answer_count": 1, "score": 0, "last_activity_date": 1548928993, "creation_date": 1548874248, "last_edit_date": 1548874768, "question_id": 54447564, "link": "https://stackoverflow.com/questions/54447564/an-efficient-approach-to-combinations-of-pairs-in-groups-without-repetitions", "title": "An efficient approach to combinations of pairs in groups without repetitions?", "body": "<p>Before I start, I need to admit that I am not a mathematician and if possible would need this explained in laymen terms. I appreciate your patience with this.</p>\n\n<h3>The problem: A class consisting of n students whom I'd like to pair up throughout the school year.</h3>\n\n<p>The number of pairs is n/2. I'd like to maximize students working with new people as much as possible, and so exhaust all possible combinations. Permutations don't matter -- student 1 + student 2 is same as student 2 + student 1. </p>\n\n<h3>What is an efficient way to build all non-repeating combinations of pairs?</h3>\n\n<p>One way, (suggested by Aleksei Malushkin), is to find all unique pairs, then all combinations of n/2 pair groups by brute-forcing out all non-valid groups.</p>\n\n<p>Finding all unique pairs is trivial in Ruby: <code>[1,2,3,4,5,6,7,8].combination(2).to_a</code> provides an array of all 2-item pairs.</p>\n\n<p>What I need, however, is to produce all groups consisting of 4 pairs each, each group without repetition of students. If the class consists of 20 students, I will need all groups of 10 pairs.</p>\n\n<p>The bruteforce approach creates all combinations of pairs and throws away the ones containing repeating pairs, but this falls apart very quickly with higher numbers of students.</p>\n\n<p>Here's the ruby code which solves for 8 students:</p>\n\n<pre><code># Ruby 2.5.3\n\nstudents = [1,2,3,4,5,6,7,8]\npossible_pairs = students.combination(2).to_a  # https://ruby-doc.org/core-2.4.1/Array.html#method-i-combination\n\nputs \"Possible pairs: (#{possible_pairs.size}) #{possible_pairs}\"\nputs \"Possible pair combinations: #{possible_pairs.combination(a.size/2).size}\"\n\ngroups_without_repetition = possible_pairs.\ncombination(students.size/2).                     # create all possible groups with students.size/2 (4) members each\neach_with_object([]) do |group, accumulator|      # with each of these groups, and an \"accumulator\" variable starting as an empty array\n\n  next unless group.flatten.uniq.length == (students.size)  # skip any group with repeating elements\n  next if accumulator.find {|existing_group| existing_group &amp; group != []}      # skip any group that may be found in the accumulator\n\n  accumulator &lt;&lt; group  # add any non-skipped group to the accumulator\nend # returnn the value of the accumulator and assign it to groups_without_repetition\n\nputs \"actual pair combinations without repetition (#{groups_without_repetition.size}):\"\n\ngroups_without_repetition.each_with_index do |arr, i|\n  puts \"#{i+1}: #{arr}\"\nend\n\n</code></pre>\n\n<p>When run, this returns:</p>\n\n<pre><code>Possible pairs: (28) [[1, 2], [1, 3], [1, 4], [1, 5], [1, 6], [1, 7], [1, 8], [2, 3], [2, 4], [2, 5], [2, 6], [2, 7], [2, 8], [3, 4], [3, 5], [3, 6], [3, 7], [3, 8], [4, 5], [4, 6], [4, 7], [4, 8], [5, 6], [5, 7], [5, 8], [6, 7], [6, 8], [7, 8]]\nPossible pair combinations: 376740\nactual pair combinations without repetition (7):\n1: [[1, 2], [3, 4], [5, 6], [7, 8]]\n2: [[1, 3], [2, 4], [5, 7], [6, 8]]\n3: [[1, 4], [2, 3], [5, 8], [6, 7]]\n4: [[1, 5], [2, 6], [3, 7], [4, 8]]\n5: [[1, 6], [2, 5], [3, 8], [4, 7]]\n6: [[1, 7], [2, 8], [3, 5], [4, 6]]\n7: [[1, 8], [2, 7], [3, 6], [4, 5]]\n</code></pre>\n\n<p>It is however not efficient. With only 12 students, the possible pairs are 66, and the possible pair combinations 90858768. I am looking to apply this to a class with 80+ participants so this approach is clearly not going to work.</p>\n\n<h3>Question 1: What would be an efficient approach to construct these combinations?</h3>\n\n<p>Looking at the results, it seems to me that the number of valid groups is n/2 - 1, as a student can only belong to one of n/2 possible pairs.</p>\n\n<p>My sense is that it would be more efficient to <em>construct only the valid groups_without_repetition</em> instead of creating all possible groups and throwing out the non-valid ones. I am not sure how to approach this process, and would appreciate your help.</p>\n\n<h3>Question 2: How to approach this with an odd number of students?</h3>\n\n<p>This may need to be a separate discussion so I would not worry about it unless it has a known solution.</p>\n\n<p>a. In a case where one of the students will have to participate twice to accommodate the odd number</p>\n\n<p>b. In a case where one of the pairs would become a trio</p>\n\n<p>In each of these cases, the students who were a part of the above non-conventional pairings, should be excluded from further exceptions for as many rotations as possible.</p>\n"}, {"tags": ["ruby", "refinerycms", "refinery"], "comments": [{"owner": {"reputation": 1, "user_id": 10992108, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d2cb0f400d54c910f126635e1243764?s=128&d=identicon&r=PG&f=1", "display_name": "Jayne Doe", "link": "https://stackoverflow.com/users/10992108/jayne-doe"}, "edited": false, "score": 0, "creation_date": 1550690276, "post_id": 54447235, "comment_id": 96365476, "body": "it&#39;s been 21 days - no one has a clue on this?"}], "answers": [{"tags": [], "owner": {"reputation": 416, "user_id": 7821606, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4Z8Ad.png?s=128&g=1", "display_name": "morissetcl", "link": "https://stackoverflow.com/users/7821606/morissetcl"}, "is_accepted": false, "score": 0, "last_activity_date": 1566318218, "last_edit_date": 1566318218, "creation_date": 1565947940, "answer_id": 57522209, "question_id": 54447235, "link": "https://stackoverflow.com/questions/54447235/how-do-i-override-the-layout-for-a-custom-extension-in-refinerycms/57522209#57522209", "title": "How do I override the layout for a custom extension in RefineryCMS?", "body": "<p>Maybe it's a bit late.</p>\n\n<p>If I well undestood your issue, I will advise you to add your custom <code>layout</code> inside <code>app/views/layout/my_custom_layout.html.erb</code>.</p>\n\n<p>Then I render it as follow in your extension view:</p>\n\n<p><code>&lt;%= render '/layout/my_custom_layout' %&gt;</code></p>\n\n<p>Hope It will help someone.</p>\n"}], "owner": {"reputation": 1, "user_id": 10992108, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d2cb0f400d54c910f126635e1243764?s=128&d=identicon&r=PG&f=1", "display_name": "Jayne Doe", "link": "https://stackoverflow.com/users/10992108/jayne-doe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 36, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1566318218, "creation_date": 1548873007, "question_id": 54447235, "link": "https://stackoverflow.com/questions/54447235/how-do-i-override-the-layout-for-a-custom-extension-in-refinerycms", "title": "How do I override the layout for a custom extension in RefineryCMS?", "body": "<p>I generated an extension for RefineryCMS, following the instructions in the Refinery Guide for 'Generate an Extension to Use Your MVCs'. I now need to alter the layout, but where is it? I cannot find any documentation that will tell me where I might overwrite it from.</p>\n"}, {"tags": ["sql", "ruby-on-rails", "ruby", "ruby-on-rails-4", "polymorphic-associations"], "owner": {"reputation": 216, "user_id": 3796244, "user_type": "registered", "accept_rate": 44, "profile_image": "https://graph.facebook.com/100005485325796/picture?type=large", "display_name": "Johji", "link": "https://stackoverflow.com/users/3796244/johji"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 58, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1548871328, "creation_date": 1548870187, "last_edit_date": 1548870904, "question_id": 54446488, "link": "https://stackoverflow.com/questions/54446488/rails-complicated-scope-with-has-many-association-query", "title": "Rails complicated scope with has_many association query", "body": "<p>I'm trying to implement an approval screen which has two model\nBuilding( the building to be approved ) and Approver.</p>\n\n<p>The building class looks like this</p>\n\n<pre><code>class Building &lt; ApplicationRecord\n  has_many :approval, as: :approvable\nend\n</code></pre>\n\n<p>Approver class looks like this</p>\n\n<pre><code>class Approver &lt; ApplicationRecord\n  belongs_to :approvable, polymorphic: true\n  scope :rejected, -&gt; { where(approval_status:2) }\n  scope :returned, -&gt; { where(approval_status:3) }\n  scope :finally_approved, -&gt; { where(approval_status:1).where(user_id: 1) }\nend\n\n#pending = 0 , approved = 1, rejected = 2 , returned = 3\n#admin user_id = 1 for final approving\n</code></pre>\n\n<p>Basical the approving is done bottom to top, meaning the staff needs to approve it  first then finally the admin approves it.</p>\n\n<p>The rule is simple if a staff reject/return it, it will be automatically marked as returned/rejected and it will not need the admin approval</p>\n\n<p>What I need is to get the Buildings that are pending, finally approved(done) , rejected(i have already done this) and returned(done)</p>\n\n<p>I can get the approved buildings by running this line</p>\n\n<pre><code> BuildingApproval.joins(:approval).merge(Approval.finally_approved)\n</code></pre>\n\n<p>this works because the admin can only approve it once his colleagues approve it and buildings that are rejected/returned by colleagues are not shown to the admin.</p>\n\n<p>Getting the rejected and returned is pretty easy because I just need to find if one of the approvals are rejected/returned regardless whether the admin/staff does it .</p>\n\n<pre><code>BuildingApproval.joins(:approval).merge(Approval.rejected)\n</code></pre>\n\n<p>The only problem is when getting the pending I need to check if the admins approval is pending and the staffs didn't reject/return it. Any help will be appreciated!</p>\n"}, {"tags": ["ruby", "yaml", "settings", "defined"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1548869519, "post_id": 54446159, "comment_id": 95701696, "body": "That should be <code>require &#39;yaml&#39;</code>. On case-insensitive filesystems that will work, but on case sensitive ones it will fail."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 2, "creation_date": 1548869534, "post_id": 54446159, "comment_id": 95701711, "body": "Note: Ruby is a case-sensitive language and capital letters have specific meaning in terms of syntax. Variables and method names should be lower-case letters. Capitals indicate constants of the form  <code>ClassName</code> or <code>CONSTANT_NAME</code>."}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 9350639, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d5ed19dbcbd28dccf9f43df2dd2c762?s=128&d=identicon&r=PG&f=1", "display_name": "t3knoid", "link": "https://stackoverflow.com/users/9350639/t3knoid"}, "edited": false, "score": 0, "creation_date": 1548870651, "post_id": 54446454, "comment_id": 95702252, "body": "Thanks for that thorough explanation. I would never have even realize this knowing what I know with other languages."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 23, "user_id": 9350639, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d5ed19dbcbd28dccf9f43df2dd2c762?s=128&d=identicon&r=PG&f=1", "display_name": "t3knoid", "link": "https://stackoverflow.com/users/9350639/t3knoid"}, "edited": false, "score": 1, "creation_date": 1548872212, "post_id": 54446454, "comment_id": 95703025, "body": "Yeah, variable scope in Ruby can be really odd. Largely this comes from the fact that they don&#39;t need to be declared in advance (e.g. <code>let x = y</code> or <code>int x = y</code>) and they look identical in terms of syntax to method calls (<code>x</code> vs. <code>x</code> instead of <code>$x</code> vs <code>x()</code>)"}], "tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": true, "score": 7, "last_activity_date": 1548870052, "creation_date": 1548870052, "answer_id": 54446454, "question_id": 54446159, "link": "https://stackoverflow.com/questions/54446159/odd-behavior-with-ruby-defined/54446454#54446454", "title": "Odd behavior with Ruby defined?", "body": "<p>This is a quirk in the way Ruby handles trailing <code>if</code>/<code>unless</code> conditions and how variables come into existence and get \"defined\".</p>\n\n<p>In the first case the constant is not \"defined\" until it's assigned a value. The only way to create a constant is to say:</p>\n\n<pre><code>CONSTANT = :value\n</code></pre>\n\n<p>Variables behave differently and some would argue a lot more <em>strangely</em>. They come into existence if they're used anywhere in a scope, even in blocks of code that get skipped by logical conditions.</p>\n\n<p>In the case of your line of the form:</p>\n\n<pre><code>variable = :value unless defined?(variable)\n</code></pre>\n\n<p>The <code>variable</code> gets \"defined\" since it exists on the very line that's being executed, it's going to be conditionally assigned to. For that to happen it must be a local variable.</p>\n\n<p>If you rework it like this:</p>\n\n<pre><code>unless defined?(variable)\n  variable = :value\nend\n</code></pre>\n\n<p>Then the behaviour goes away, the assignment proceeds because the variable was not defined prior to that line.</p>\n\n<p>What's strange is this:</p>\n\n<pre><code>if defined?(variable)\n  variable = :value\nend\n</code></pre>\n\n<p>Now obviously it's not defined, it doesn't get assigned, but then this happens:</p>\n\n<pre><code>defined?(variable)\n# =&gt; \"local-variable\"\n</code></pre>\n\n<p>Now it's defined anyway because Ruby's certain it's a variable. It doesn't have a value yet, it's <code>nil</code>, but it's \"defined\" as far as Ruby's concerned.</p>\n\n<p>It gets even stranger:</p>\n\n<pre><code>defined?(variable)\n# =&gt; false\nif (false)\n  variable = :value\nend\ndefined?(variable)\n# =&gt; \"local-variable\"\n</code></pre>\n\n<p>Where that block of code didn't even run, it <em>can't</em> even run, and yet, behold, <code>variable</code> is now defined. From that assignment line on forward that variable <em>exists</em> as far as Ruby is concerned.</p>\n\n<p>Since you're doing an attempted assignment and <code>defined?</code> on the same line the variable exists and your assignment won't happen. It's like a tiny paradox.</p>\n"}], "owner": {"reputation": 23, "user_id": 9350639, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d5ed19dbcbd28dccf9f43df2dd2c762?s=128&d=identicon&r=PG&f=1", "display_name": "t3knoid", "link": "https://stackoverflow.com/users/9350639/t3knoid"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 38, "favorite_count": 2, "accepted_answer_id": 54446454, "answer_count": 1, "score": 2, "last_activity_date": 1548870087, "creation_date": 1548869004, "last_edit_date": 1548870087, "question_id": 54446159, "link": "https://stackoverflow.com/questions/54446159/odd-behavior-with-ruby-defined", "title": "Odd behavior with Ruby defined?", "body": "<p>I am a newbie at Ruby and have a question with the defined? keyword.</p>\n\n<p>Here's a snippet of code that I've written to load a yaml file to initialize settings in my Ruby script:</p>\n\n<pre><code># Read settings file\nrequire 'YAML'\nsettingsFile = File.join(File.dirname(__FILE__), \"settings.yml\").tr('\\\\', '/')\nSettings = YAML.load_file(settingsFile) unless defined? Settings\nputs Settings\n</code></pre>\n\n<p>The yaml file looks like this:</p>\n\n<pre><code>Hello: World\n</code></pre>\n\n<p>This outputs correctly with:</p>\n\n<blockquote>\n  <p>{\"Hello\"=>\"world\"}</p>\n</blockquote>\n\n<p>Now if I use a variable instead of a constant to store the settings, such as the following:</p>\n\n<pre><code># Read settings file\nrequire 'YAML'\nsettingsFile = File.join(File.dirname(__FILE__), \"settings.yml\").tr('\\\\', '/')\nsettings = YAML.load_file(settingsFile) unless defined? settings\nputs settings\n</code></pre>\n\n<p>settings returns empty.</p>\n\n<p>What gives? Why would using a constant make this work? </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rjb"], "answers": [{"tags": [], "owner": {"reputation": 2930, "user_id": 1930295, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/128cc4033ec598b63fa96deb33e26131?s=128&d=identicon&r=PG", "display_name": "danielricecodes", "link": "https://stackoverflow.com/users/1930295/danielricecodes"}, "is_accepted": true, "score": 0, "last_activity_date": 1549994488, "creation_date": 1549994488, "answer_id": 54656085, "question_id": 54446063, "link": "https://stackoverflow.com/questions/54446063/ruby-2-5-1-ruby-java-bridge-rjb-and-ubuntu-18-04-getting-constants-dl-and/54656085#54656085", "title": "Ruby 2.5.1, Ruby Java Bridge (RJB), and Ubuntu 18.04: Getting `Constants DL and Fiddle is not defined.`", "body": "<p>After rebooting and running some updates, it seems to work now.  So all of the above appears to be correct.  No JVM issues when opening up <code>rails console</code> anymore.</p>\n"}], "owner": {"reputation": 2930, "user_id": 1930295, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/128cc4033ec598b63fa96deb33e26131?s=128&d=identicon&r=PG", "display_name": "danielricecodes", "link": "https://stackoverflow.com/users/1930295/danielricecodes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 313, "favorite_count": 0, "accepted_answer_id": 54656085, "answer_count": 1, "score": 1, "last_activity_date": 1549994488, "creation_date": 1548868643, "question_id": 54446063, "link": "https://stackoverflow.com/questions/54446063/ruby-2-5-1-ruby-java-bridge-rjb-and-ubuntu-18-04-getting-constants-dl-and", "title": "Ruby 2.5.1, Ruby Java Bridge (RJB), and Ubuntu 18.04: Getting `Constants DL and Fiddle is not defined.`", "body": "<p>I need help.  I can't figure out why I can't boot my Rails 5.2 app now that <code>rjb</code> is a dependency.  I keep getting a generic error about <code>Constants DL and Fiddle is not defined.</code></p>\n\n<p>First, yes I have read the <a href=\"https://www.artonx.org/collabo/backyard/?RubyJavaBridge\" rel=\"nofollow noreferrer\">Documentation</a>. </p>\n\n<p>Second, yes I have set <code>JAVA_HOME</code>.</p>\n\n<pre><code>$ echo $JAVA_HOME\n/usr/lib/jvm/java-8-openjdk-amd64\n</code></pre>\n\n<p>Third, I have set <code>LD_LIBRARY_PATH</code> (COULD THIS BE THE PROBLEM?)</p>\n\n<pre><code>$ echo $LD_LIBRARY_PATH\n/usr/lib/jvm/java-8-openjdk-amd64/jre/lib/amd64\n</code></pre>\n\n<p>However, whenever I try to open <code>rails console</code> or <code>rails server</code> I just get the error: </p>\n\n<pre><code>$ rails c\n/home/daniel/.rvm/rubies/ruby-2.5.1/lib/ruby/site_ruby/2.5.0/bundler/runtime.rb:84:in `rescue in block (2 levels) in require': There was an error while trying to load the gem 'fillable-pdf'.\nGem Load Error is: Constants DL and Fiddle is not defined.\nBacktrace for gem load error is:\n/home/daniel/.rvm/gems/ruby-2.5.1@fuel/gems/fillable-pdf-0.6/lib/fillable-pdf/itext.rb:4:in `load'\n....    \n&lt;redacted&gt;\n</code></pre>\n\n<p>The app runs fine on OSX, on CircleCI, and on Heroku.  Does someone with more experience with <code>rjb</code> than me spot what I'm missing here?  </p>\n\n<p>Thank you in advance!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "web-scraping", "nokogiri"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1548870446, "post_id": 54446047, "comment_id": 95702138, "body": "How do you know whether value was updated or not?"}, {"owner": {"reputation": 11, "user_id": 9285098, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vFwVb.jpg?s=128&g=1", "display_name": "Nicolas Cousin", "link": "https://stackoverflow.com/users/9285098/nicolas-cousin"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1548870703, "post_id": 54446047, "comment_id": 95702283, "body": "When you scrap a second time, the scraper gets all the same values and compares, if it has changed then i want to keep the more recent one"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1548870974, "post_id": 54446047, "comment_id": 95702417, "body": "So, it&#39;s a simple <code>if</code> then? If you detect change, then save it, else continue to the next record."}, {"owner": {"reputation": 11, "user_id": 9285098, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vFwVb.jpg?s=128&g=1", "display_name": "Nicolas Cousin", "link": "https://stackoverflow.com/users/9285098/nicolas-cousin"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1548871214, "post_id": 54446047, "comment_id": 95702518, "body": "Yes but I am not sure where to put it, in the scraper I guess ! I thought it was more complicated than that, thank you !"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1548871322, "post_id": 54446047, "comment_id": 95702583, "body": "My pleasure. :)"}, {"owner": {"reputation": 11, "user_id": 9285098, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vFwVb.jpg?s=128&g=1", "display_name": "Nicolas Cousin", "link": "https://stackoverflow.com/users/9285098/nicolas-cousin"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1548925998, "post_id": 54446047, "comment_id": 95722098, "body": "Hey Sergio, I am actually struggling, can you give a hint (don&#39;t give me the answer plz haha). There are shitloads of if you reload the index page... Feel free to check it out <a href=\"https://euro-foreign-exchange-rates.herokuapp.com/\" rel=\"nofollow noreferrer\">euro-foreign-exchange-rates.herokuapp.com</a>"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1548926410, "post_id": 54446047, "comment_id": 95722342, "body": "Why is every currency repeated 3 times? :)"}, {"owner": {"reputation": 11, "user_id": 9285098, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vFwVb.jpg?s=128&g=1", "display_name": "Nicolas Cousin", "link": "https://stackoverflow.com/users/9285098/nicolas-cousin"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1548927437, "post_id": 54446047, "comment_id": 95722957, "body": "Because everytime I do another research it scraps again ...."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1548927606, "post_id": 54446047, "comment_id": 95723042, "body": "If a currency exists, don&#39;t create a new one, update the one that exists."}], "answers": [{"tags": [], "owner": {"reputation": 547, "user_id": 3396971, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52c75295766cfc6c5950bb398fa6c7e2?s=128&d=identicon&r=PG", "display_name": "NemyaNation", "link": "https://stackoverflow.com/users/3396971/nemyanation"}, "is_accepted": false, "score": 0, "last_activity_date": 1575645667, "creation_date": 1575645667, "answer_id": 59215869, "question_id": 54446047, "link": "https://stackoverflow.com/questions/54446047/how-can-update-my-scraped-data-without-updating-all-the-values-but-only-the-valu/59215869#59215869", "title": "How can update my scraped data without updating all the values but only the values that were updated (i.e crypto currency)", "body": "<p>Maybe I'm not understanding the question entirely but isn't this a simple case of checking if what you have recently scraped is not equal to what you have on the database; then you update with the new values.</p>\n\n<pre><code>currency = Currency.where(country: hash['Country'])\n\nif currency.rate != hash['Rate']\n  currency.rate = hash['Rate']\n  currency.save\nend\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 9285098, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vFwVb.jpg?s=128&g=1", "display_name": "Nicolas Cousin", "link": "https://stackoverflow.com/users/9285098/nicolas-cousin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 52, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1575645667, "creation_date": 1548868591, "question_id": 54446047, "link": "https://stackoverflow.com/questions/54446047/how-can-update-my-scraped-data-without-updating-all-the-values-but-only-the-valu", "title": "How can update my scraped data without updating all the values but only the values that were updated (i.e crypto currency)", "body": "<p>I have been building a Rails App to scrap and show the last Foreign Exchange Reference Rates.</p>\n\n<p>I have two views:</p>\n\n<ul>\n<li><p>index.html.erb : Shows with a \"collection_select\" all the countries scraped and a button to search the rate's country.</p></li>\n<li><p>show.html.erb : Shows the rate of the selected country.</p></li>\n</ul>\n\n<p>My table has 3 columns : </p>\n\n<ol>\n<li>Short (i.e USD)</li>\n<li>Country (i.e United States) </li>\n<li>Rate (i.e 1.234)</li>\n</ol>\n\n<p>On the show view there is a button to go back to the index for a new research (with refreshed rates --> with the same scraping) </p>\n\n<p>I would like to update only the scraped updated values, (NOT if there are not updated)</p>\n\n<p>This is my first post, I hope this is clear enough .. ! Thanks in advance</p>\n\n<blockquote>\n  <p>My controller:</p>\n</blockquote>\n\n<pre><code>class CurrenciesController &lt; ApplicationController\n\n  def index\n    Scraper.new.save\n    @currency = Currency.new\n  end\n\n  def show\n    @currency = Currency.find(params[:currency][:id])\n    Currency.destroy_all\n  end\n\n  def update\n  end\n\nend\n</code></pre>\n\n<blockquote>\n  <p>My scraper:</p>\n</blockquote>\n\n<pre><code>class Scraper\n\nrequire 'nokogiri'\nrequire 'open-uri'\n\n  def initialize\n    @array = []\n    url = Nokogiri::HTML(open(\"https://www.ecb.europa.eu/stats/policy_and_exchange_rates/euro_reference_exchange_rates/html/index.en.html\"))\n      url.css('tbody&gt;tr').each do |row|\n        hash = {}\n        hash['Short'] = row.css('.currency').text\n        hash['Country'] = row.css('.alignLeft').text.split(/ |\\_|\\-/).map(&amp;:capitalize).join(\" \")\n        hash['Rate'] = row.css('.rate').text\n        @array &lt;&lt; hash\n      end\n    @array\n  end\n\n\n  def save\n    @array.each do |currency|\n      Currency.create(short: currency[\"Short\"], country: currency[\"Country\"], rate: currency[\"Rate\"])\n    end\n  end\n\nend\n</code></pre>\n\n<blockquote>\n  <p>My schema : </p>\n</blockquote>\n\n<pre><code>ActiveRecord::Schema.define(version: 2019_01_29_113433) do\n\n  # These are extensions that must be enabled in order to support this database\n  enable_extension \"plpgsql\"\n\n  create_table \"currencies\", force: :cascade do |t|\n    t.string \"short\"\n    t.string \"country\"\n    t.float \"rate\"\n    t.datetime \"created_at\", null: false\n    t.datetime \"updated_at\", null: false\n  end\n\nend\n</code></pre>\n\n<blockquote>\n  <p>My index:</p>\n</blockquote>\n\n<pre><code>&lt;h1&gt;Euro Foreign Exchange Reference Rates&lt;/h1&gt;\n&lt;br&gt;\n&lt;div class=\"text-center\"&gt;\n  &lt;%= form_for @currency, url: show_path do |c| %&gt;\n  &lt;p&gt;Choose your Foreign Exchange Reference&lt;/p&gt;&lt;br&gt;\n  &lt;%= c.collection_select :id, Currency.order(:country),:id,:country, {include_blank: false} %&gt;\n  &lt;br&gt;&lt;br&gt;&lt;br&gt;\n  &lt;%= c.submit \"Search\", ({:class =&gt; 'btn btn-light btn-sm'}) %&gt;\n  &lt;% end %&gt;\n&lt;/div&gt;\n</code></pre>\n\n<blockquote>\n  <p>My show</p>\n</blockquote>\n\n<pre><code>&lt;div class=\"text-center\"&gt;\n\n  &lt;h2&gt;\n    &lt;%= @currency.country %&gt;\n  &lt;/h2&gt;\n  &lt;br&gt;\n  &lt;p&gt;1\u20ac =\n    &lt;%= @currency.rate %&gt;\n    &lt;%= @currency.short %&gt;\n  &lt;/p&gt;\n  &lt;p class=\"time\"&gt; &lt;%= @currency.created_at.strftime(\"Updated on %d/%m/%Y at %k:%M UTC\")%&gt;&lt;/p&gt;\n\n  &lt;h3&gt;\n    &lt;a href=\"https://www.ecb.europa.eu/stats/policy_and_exchange_rates/euro_reference_exchange_rates/html/eurofxref-graph-&lt;%= @currency.short.downcase %&gt;.en.html\" target=\"_blank\"&gt;--&gt;\n      &lt;%= @currency.country %&gt;\n      Exchange Reference Rate\n      &lt;-- &lt;b &lt;/a&gt; &lt;/h3&gt; &lt;br&gt;\n        &lt;p&gt;&lt;%= link_to \"New Research with updated rates\", root_path, :class =&gt; 'btn btn-light' %&gt;&lt;/p&gt;\n\n&lt;/div&gt;\n</code></pre>\n"}, {"tags": ["ruby", "xcode", "rvm"], "comments": [{"owner": {"reputation": 1221, "user_id": 9375533, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a08c00e9e6694fe8222c6918801dcc0?s=128&d=identicon&r=PG&f=1", "display_name": "dcangulo", "link": "https://stackoverflow.com/users/9375533/dcangulo"}, "edited": false, "score": 0, "creation_date": 1551149437, "post_id": 54445804, "comment_id": 96525219, "body": "Have you found a solution?"}], "answers": [{"comments": [{"owner": {"reputation": 1221, "user_id": 9375533, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a08c00e9e6694fe8222c6918801dcc0?s=128&d=identicon&r=PG&f=1", "display_name": "dcangulo", "link": "https://stackoverflow.com/users/9375533/dcangulo"}, "edited": false, "score": 0, "creation_date": 1551149452, "post_id": 54449921, "comment_id": 96525224, "body": "Can you give me a source for this?"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 1221, "user_id": 9375533, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a08c00e9e6694fe8222c6918801dcc0?s=128&d=identicon&r=PG&f=1", "display_name": "dcangulo", "link": "https://stackoverflow.com/users/9375533/dcangulo"}, "edited": false, "score": 0, "creation_date": 1551197467, "post_id": 54449921, "comment_id": 96548489, "body": "@DavidAngulo Grab a 10.9 disk image from the App Store and use VirtualBox or VMWare Fusion."}], "tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": false, "score": 0, "last_activity_date": 1548884172, "creation_date": 1548884172, "answer_id": 54449921, "question_id": 54445804, "link": "https://stackoverflow.com/questions/54445804/cannot-install-ruby-1-9-3-in-osx-10-13-6/54449921#54449921", "title": "cannot install Ruby 1.9.3 in OSX 10.13.6", "body": "<p>Ruby 1.9.3 is no longer supported. You can't install it on 10.13.</p>\n\n<p>To run older versions of Ruby you need either a pre-built version or an older OS. You can run 10.9+ in a virtual machine if you need to for this purpose.</p>\n"}], "owner": {"reputation": 1269, "user_id": 1935928, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/c8b8da1b572da16e20757f41af39aa37?s=128&d=identicon&r=PG", "display_name": "fuiiii", "link": "https://stackoverflow.com/users/1935928/fuiiii"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 143, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1548884172, "creation_date": 1548867764, "question_id": 54445804, "link": "https://stackoverflow.com/questions/54445804/cannot-install-ruby-1-9-3-in-osx-10-13-6", "title": "cannot install Ruby 1.9.3 in OSX 10.13.6", "body": "<p>I tried <code>rvm install 1.9.3</code> but got the following errors:</p>\n\n<pre><code>+requirements_osx_brew_update_system:8&gt; typeset 'ret=1'\n+requirements_osx_brew_update_system:9&gt; rvm_error $'\\nXcode version older than 4.6.2 installed, download and install newer version from:\\n\\n    http://connect.apple.com\\n\\nAfter installation open Xcode, go to Downloads and install Command Line Tools.\\n'\n+rvm_error:2&gt; rvm_pretty_print stderr\n+rvm_pretty_print:2&gt; case auto (0|no)\n+rvm_pretty_print:2&gt; case auto (1|auto)\n+rvm_pretty_print:7&gt; case xterm-256color (dumb|unknown)\n+rvm_pretty_print:10&gt; case stderr (stdout)\n+rvm_pretty_print:10&gt; case stderr (stderr)\n+rvm_pretty_print:12&gt; [[ -t 2 ]]\n+rvm_pretty_print:12&gt; return 1\n+rvm_error:4&gt; printf %b $'\\nXcode version older than 4.6.2 installed, download and install newer version from:\\n\\n    http://connect.apple.com\\n\\nAfter installation open Xcode, go to Downloads and install Command Line Tools.\\n\\n'\n\nXcode version older than 4.6.2 installed, download and install newer version from:\n\n    http://connect.apple.com\n\nAfter installation open Xcode, go to Downloads and install Command Line Tools.\n\n+requirements_osx_brew_update_system:16&gt; return 1\n</code></pre>\n\n<p>My xcode version is Version 10.1 so I don't think that's the reason.\nMy guess is that my current xcode is too new for ruby 1.9.3.</p>\n\n<p>Is there a walkaround?</p>\n"}, {"tags": ["ruby", "rbenv", "pry"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1548867073, "post_id": 54445565, "comment_id": 95700371, "body": "If your system supports it, <code>which pry</code> for one will tell you where <code>pry</code> is coming from. You may want to <code>gem install pry</code>."}, {"owner": {"reputation": 1232, "user_id": 948073, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/05cb19ad33c2a2919e936f60f4009d97?s=128&d=identicon&r=PG", "display_name": "Lori", "link": "https://stackoverflow.com/users/948073/lori"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1548867445, "post_id": 54445565, "comment_id": 95700603, "body": "<code>which pry</code> points to a bash script at <code>~&#47;.rbenv&#47;shims&#47;pry</code>. Pry should be taking its cues from rbenv."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1548869442, "post_id": 54445565, "comment_id": 95701654, "body": "That should be it, so <code>rbenv</code> seems to be letting you down."}], "answers": [{"comments": [{"owner": {"reputation": 1232, "user_id": 948073, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/05cb19ad33c2a2919e936f60f4009d97?s=128&d=identicon&r=PG", "display_name": "Lori", "link": "https://stackoverflow.com/users/948073/lori"}, "edited": false, "score": 1, "creation_date": 1548868087, "post_id": 54445643, "comment_id": 95700944, "body": "Interesting. <code>gem install pry</code> worked this time. Can&#39;t think of anything I did differently from last time, except for not uninstalling before reinstalling."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1548869467, "post_id": 54445643, "comment_id": 95701674, "body": "This is a much longer explanation than mine, so it&#39;s all good."}], "tags": [], "owner": {"reputation": 14511, "user_id": 384417, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/966d07471c4adb05fed0e12d31e36584?s=128&d=identicon&r=PG", "display_name": "rewritten", "link": "https://stackoverflow.com/users/384417/rewritten"}, "is_accepted": true, "score": 3, "last_activity_date": 1548867250, "creation_date": 1548867250, "answer_id": 54445643, "question_id": 54445565, "link": "https://stackoverflow.com/questions/54445565/pry-running-with-obsolete-ruby-version/54445643#54445643", "title": "Pry running with obsolete Ruby version", "body": "<p>You can have <code>pry</code> installed as a global executable, from the system ruby. This won't be overridden by any ruby installed by <code>rbenv</code>, unless the <code>pry</code> gem is installed <em>in that specific ruby version</em>.</p>\n\n<p>It's just a matter of the system searching $PATH for an executable file called <code>pry</code>.</p>\n\n<p>Most probably, if you <code>gem install pry</code> under rbenv, then the new pry will use the correct ruby binary.</p>\n\n<p><strong>EDIT</strong>:</p>\n\n<p>Whops, @tadman's comment has exactly the same content. If it is converted to an answer I will delete mine.</p>\n"}], "owner": {"reputation": 1232, "user_id": 948073, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/05cb19ad33c2a2919e936f60f4009d97?s=128&d=identicon&r=PG", "display_name": "Lori", "link": "https://stackoverflow.com/users/948073/lori"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 115, "favorite_count": 0, "accepted_answer_id": 54445643, "answer_count": 1, "score": 0, "last_activity_date": 1548867250, "creation_date": 1548866983, "question_id": 54445565, "link": "https://stackoverflow.com/questions/54445565/pry-running-with-obsolete-ruby-version", "title": "Pry running with obsolete Ruby version", "body": "<p>When I type <code>pry -v</code> I get</p>\n\n<blockquote>\n  <p>Pry version 0.12.2 on Ruby 2.3.0</p>\n</blockquote>\n\n<p>whereas <code>ruby -v</code> gives</p>\n\n<blockquote>\n  <p>ruby 2.6.0rc2 (2018-12-15 trunk 66408) [x86_64-linux]</p>\n</blockquote>\n\n<p>and <code>rbenv global</code> and <code>rbenv local</code> both give</p>\n\n<blockquote>\n  <p>2.6.0-rc2.</p>\n</blockquote>\n\n<p>I tried uninstalling and reinstalling pry as suggested in an answer to <a href=\"https://stackoverflow.com/q/8026059/948073\">how to change ruby version in Pry</a>.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rubygems"], "comments": [{"owner": {"reputation": 215, "user_id": 4058757, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e40626f8e068aef7905dd3160f376fc5?s=128&d=identicon&r=PG&f=1", "display_name": "Carlos J&#250;lio", "link": "https://stackoverflow.com/users/4058757/carlos-j%c3%balio"}, "edited": false, "score": 0, "creation_date": 1550857103, "post_id": 54444953, "comment_id": 96439615, "body": "Did you manage to solve your problem? I&#39;m having the exact same problem. Do you have Xcode Command Line Tools installed?"}, {"owner": {"reputation": 207, "user_id": 9802412, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8023326f3c3d42a7484a7a4bc8ff52b5?s=128&d=identicon&r=PG&f=1", "display_name": "Rahul", "link": "https://stackoverflow.com/users/9802412/rahul"}, "reply_to_user": {"reputation": 215, "user_id": 4058757, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e40626f8e068aef7905dd3160f376fc5?s=128&d=identicon&r=PG&f=1", "display_name": "Carlos J&#250;lio", "link": "https://stackoverflow.com/users/4058757/carlos-j%c3%balio"}, "edited": false, "score": 0, "creation_date": 1551109673, "post_id": 54444953, "comment_id": 96510241, "body": "I ended up just having to reinstall curb"}, {"owner": {"reputation": 1508, "user_id": 472139, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/6a5b5ed39eb9b91797e9e7b6f6362519?s=128&d=identicon&r=PG", "display_name": "buddhabrot", "link": "https://stackoverflow.com/users/472139/buddhabrot"}, "edited": false, "score": 0, "creation_date": 1561323470, "post_id": 54444953, "comment_id": 100015124, "body": "@Rahul How did you reinstall it? Didn&#39;t work for me and I have same issue in Mojave"}, {"owner": {"reputation": 1508, "user_id": 472139, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/6a5b5ed39eb9b91797e9e7b6f6362519?s=128&d=identicon&r=PG", "display_name": "buddhabrot", "link": "https://stackoverflow.com/users/472139/buddhabrot"}, "edited": false, "score": 0, "creation_date": 1561323525, "post_id": 54444953, "comment_id": 100015137, "body": "nm, I manually changed LD/CPPFLAGS when installing the gem to include kerberos with &#39;--with-ldflags=-L-L/usr/local/opt/krb5/lib --with-cppflags=-I-I/usr/local/opt/krb5/include&#39; and it worked"}], "answers": [{"tags": [], "owner": {"reputation": 747, "user_id": 4457330, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh6.googleusercontent.com/-HcN2LH1nsWE/AAAAAAAAAAI/AAAAAAAAF_c/Bc1kKywE4ww/photo.jpg?sz=128", "display_name": "Afsan Abdulali Gujarati", "link": "https://stackoverflow.com/users/4457330/afsan-abdulali-gujarati"}, "is_accepted": false, "score": 1, "last_activity_date": 1584721143, "creation_date": 1584721143, "answer_id": 60777886, "question_id": 54444953, "link": "https://stackoverflow.com/questions/54444953/rake-dbsetup-is-giving-library-not-loaded-rpath-libgssapi-krb5-2-2-dylib-erro/60777886#60777886", "title": "rake db:setup is giving Library not loaded: @rpath/libgssapi_krb5.2.2.dylib error", "body": "<p>Following error when: </p>\n\n<pre><code>rake db:drop \n</code></pre>\n\n<p>OR </p>\n\n<pre><code>bundle exec rake db:drop\n</code></pre>\n\n<p>Error:</p>\n\n<pre><code>rake aborted!\nLoadError: dlopen(/Users/afsan.abdulali.gujarati/.rvm/gems/ruby-2.4.6@introhive/gems/curb-0.9.10/lib/curb_core.bundle, 9): Library not loaded: @rpath/libgssapi_krb5.2.2.dylib\n  Referenced from: /Users/afsan.abdulali.gujarati/.rvm/gems/ruby-2.4.6@introhive/gems/curb-0.9.10/lib/curb_core.bundle\n  Reason: image not found - /Users/afsan.abdulali.gujarati/.rvm/gems/ruby-2.4.6@introhive/gems/curb-0.9.10/lib/curb_core.bundle\nThe thing that possibly fixed it:\n</code></pre>\n\n<p>Solution:</p>\n\n<pre><code>brew install krb5\n\nbrew link --force krb5 \n</code></pre>\n\n<p>might give the following output:</p>\n\n<pre><code>Warning: Refusing to link macOS-provided software: krb5\nIf you need to have krb5 first in your PATH run:\n  echo 'export PATH=\"/usr/local/opt/krb5/bin:$PATH\"' &gt;&gt; ~/.bash_profile\n  echo 'export PATH=\"/usr/local/opt/krb5/sbin:$PATH\"' &gt;&gt; ~/.bash_profile\n\nFor compilers to find krb5 you may need to set:\n  export LDFLAGS=\"-L/usr/local/opt/krb5/lib\"\n  export CPPFLAGS=\"-I/usr/local/opt/krb5/include\"\n\nFor pkg-config to find krb5 you may need to set:\n  export PKG_CONFIG_PATH=\"/usr/local/opt/krb5/lib/pkgconfig\"\n</code></pre>\n\n<p>Export paths vars LDFLAGS and CPPFLAGS</p>\n\n<pre><code>export LDFLAGS=\"-L/usr/local/opt/krb5/lib\"\nexport CPPFLAGS=\"-I/usr/local/opt/krb5/include\"\n</code></pre>\n\n<p>Re-install curb gem</p>\n\n<pre><code>gem uninstall curb\ngem install curb\n</code></pre>\n\n<p>Side notes on my current system setup: </p>\n\n<p>Mac OS Catalina 10.15.3</p>\n\n<p>I have anaconda3 installed on my system although I have disabled it using the following command:</p>\n\n<p><code>conda config --set auto_activate_base false</code></p>\n"}], "owner": {"reputation": 207, "user_id": 9802412, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8023326f3c3d42a7484a7a4bc8ff52b5?s=128&d=identicon&r=PG&f=1", "display_name": "Rahul", "link": "https://stackoverflow.com/users/9802412/rahul"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 641, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1584721143, "creation_date": 1548865048, "last_edit_date": 1548865434, "question_id": 54444953, "link": "https://stackoverflow.com/questions/54444953/rake-dbsetup-is-giving-library-not-loaded-rpath-libgssapi-krb5-2-2-dylib-erro", "title": "rake db:setup is giving Library not loaded: @rpath/libgssapi_krb5.2.2.dylib error", "body": "<p>I am on macOS 10.14.2 mojave and am getting an error when I run rake db:setup on my mysql database. It is working fine in other projects and when I did <code>gem list</code> in other projects, they both had mysql 0.5.2 and curb 0.9.7. I used to have the same following error except it said libssh2.1 instead of libgssapi_krb5, so I did <code>brew install libssh2</code> and then the error changed to this. I then tried doing <code>brew install krb5</code> but that did not make a difference. Here is the error:</p>\n\n<blockquote>\n  <p>mbp-user:project user$ rake db:setup\n  rake aborted!\n  LoadError: dlopen(/Users/user/.rvm/gems/ruby-2.5.3/gems/curb-0.9.7/lib/curb_core.bundle, 9): Library not loaded: @rpath/libgssapi_krb5.2.2.dylib\n    Referenced from: /Users/user/.rvm/gems/ruby-2.5.3/gems/curb-0.9.7/lib/curb_core.bundle\n    Reason: image not found - /Users/user/.rvm/gems/ruby-2.5.3/gems/curb-0.9.7/lib/curb_core.bundle\n  /Users/user/.rvm/gems/ruby-2.5.3/gems/activesupport-5.1.6/lib/active_support/dependencies.rb:292:in <code>require'\n  /Users/user/.rvm/gems/ruby-2.5.3/gems/activesupport-5.1.6/lib/active_support/dependencies.rb:292:in</code>block in require'\n  /Users/user/.rvm/gems/ruby-2.5.3/gems/activesupport-5.1.6/lib/active_support/dependencies.rb:258:in <code>load_dependency'\n  /Users/user/.rvm/gems/ruby-2.5.3/gems/activesupport-5.1.6/lib/active_support/dependencies.rb:292:in</code>require'\n  /Users/user/.rvm/gems/ruby-2.5.3/gems/curb-0.9.7/lib/curl.rb:1:in <code>&lt;top (required)&gt;'\n  /Users/user/.rvm/gems/ruby-2.5.3/gems/activesupport-5.1.6/lib/active_support/dependencies.rb:292:in</code>require'\n  /Users/user/.rvm/gems/ruby-2.5.3/gems/activesupport-5.1.6/lib/active_support/dependencies.rb:292:in <code>block in require'\n  /Users/user/.rvm/gems/ruby-2.5.3/gems/activesupport-5.1.6/lib/active_support/dependencies.rb:258:in</code>load_dependency'\n  /Users/user/.rvm/gems/ruby-2.5.3/gems/activesupport-5.1.6/lib/active_support/dependencies.rb:292:in <code>require'\n  /Users/user/.rvm/gems/ruby-2.5.3/gems/curb-0.9.7/lib/curb.rb:1:in</code>'\n  /Users/user/.rvm/gems/ruby-2.5.3/gems/activesupport-5.1.6/lib/active_support/dependencies.rb:292:in <code>require'\n  /Users/user/.rvm/gems/ruby-2.5.3/gems/activesupport-5.1.6/lib/active_support/dependencies.rb:292:in</code>block in require'\n  /Users/user/.rvm/gems/ruby-2.5.3/gems/activesupport-5.1.6/lib/active_support/dependencies.rb:258:in <code>load_dependency'\n  /Users/user/.rvm/gems/ruby-2.5.3/gems/activesupport-5.1.6/lib/active_support/dependencies.rb:292:in</code>require'\n  /Users/user/.rvm/gems/ruby-2.5.3/gems/user_client-3.7.0/lib/user_client/helpers/http_client.rb:1:in <code>&lt;top (required)&gt;'\n  /Users/user/.rvm/gems/ruby-2.5.3/gems/user_client-3.7.0/lib/user_client/helpers/authorized_request.rb:1:in</code>require_relative'\n  /Users/user/.rvm/gems/ruby-2.5.3/gems/user_client-3.7.0/lib/user_client/helpers/authorized_request.rb:1:in <code>&lt;top (required)&gt;'\n  /Users/user/.rvm/gems/ruby-2.5.3/gems/user_client-3.7.0/lib/user_client/adapter.rb:2:in</code>require_relative'\n  /Users/user/.rvm/gems/ruby-2.5.3/gems/user_client-3.7.0/lib/user_client/adapter.rb:2:in <code>&lt;top (required)&gt;'\n  /Users/user/.rvm/gems/ruby-2.5.3/gems/activesupport-5.1.6/lib/active_support/dependencies.rb:292:in</code>require'\n  /Users/user/.rvm/gems/ruby-2.5.3/gems/activesupport-5.1.6/lib/active_support/dependencies.rb:292:in <code>block in require'\n  /Users/user/.rvm/gems/ruby-2.5.3/gems/activesupport-5.1.6/lib/active_support/dependencies.rb:258:in</code>load_dependency'\n  /Users/user/.rvm/gems/ruby-2.5.3/gems/activesupport-5.1.6/lib/active_support/dependencies.rb:292:in <code>require'\n  /Users/user/.rvm/gems/ruby-2.5.3/gems/user_client-3.7.0/lib/user_client.rb:2:in</code>'\n  /Users/user/work/angel/config/application.rb:7:in <code>&lt;top (required)&gt;'\n  /Users/user/work/angel/Rakefile:6:in</code>require_relative'\n  /Users/user/work/angel/Rakefile:6:in <code>&lt;top (required)&gt;'\n  /Users/user/.rvm/gems/ruby-2.5.3/gems/rake-12.3.1/exe/rake:27:in</code>'\n  /Users/user/.rvm/gems/ruby-2.5.3/bin/ruby_executable_hooks:24:in <code>eval'\n  /Users/user/.rvm/gems/ruby-2.5.3/bin/ruby_executable_hooks:24:in</code>'</p>\n</blockquote>\n"}, {"tags": ["ruby", "yard", "yardoc"], "answers": [{"comments": [{"owner": {"reputation": 176, "user_id": 3824335, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ae0922692fa4a70eb89c910e8442a00c?s=128&d=identicon&r=PG&f=1", "display_name": "user2319066", "link": "https://stackoverflow.com/users/3824335/user2319066"}, "edited": false, "score": 0, "creation_date": 1553596159, "post_id": 55329010, "comment_id": 97433479, "body": "Thanks for response. I will try it soon."}], "tags": [], "owner": {"reputation": 1955, "user_id": 2193416, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/4173555c6bc153846714c964c0cd8a19?s=128&d=identicon&r=PG", "display_name": "dug", "link": "https://stackoverflow.com/users/2193416/dug"}, "is_accepted": true, "score": 1, "last_activity_date": 1553612724, "last_edit_date": 1553612724, "creation_date": 1553464924, "answer_id": 55329010, "question_id": 54443448, "link": "https://stackoverflow.com/questions/54443448/yard-generates-wrong-references-to-files/55329010#55329010", "title": "YARD generates wrong references to files", "body": "<p>Check out the <code>--asset</code> option, via <code>yard help doc</code> or <a href=\"https://github.com/lsegal/yard/blob/master/docs/WhatsNew.md#added---asset-option-to-yardoc-060\" rel=\"nofollow noreferrer\">here</a>. Given your example above, this should do the trick:</p>\n\n<pre><code>yard doc --asset static --asset LICENSE.txt\n</code></pre>\n"}], "owner": {"reputation": 176, "user_id": 3824335, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ae0922692fa4a70eb89c910e8442a00c?s=128&d=identicon&r=PG&f=1", "display_name": "user2319066", "link": "https://stackoverflow.com/users/3824335/user2319066"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "accepted_answer_id": 55329010, "answer_count": 1, "score": 2, "last_activity_date": 1553612724, "creation_date": 1548860226, "question_id": 54443448, "link": "https://stackoverflow.com/questions/54443448/yard-generates-wrong-references-to-files", "title": "YARD generates wrong references to files", "body": "<p>I use YARD to generate a doc for ruby project. This project includes a <code>README.md</code> file and looks like below:</p>\n\n<pre><code># MyTool\n\n&lt;p align=\"center\"&gt;\n    &lt;img src=\"static/logo/mytool.png\"&gt;\n&lt;/p&gt;\n\nWelcome to your new gem!\n\n...\n\n## Copyright\n\nCopyright (C) 2019 Company. See [License](LICENSE.txt) for further details.\n</code></pre>\n\n<p>The doc generated by YARD includes this readme file, but it has a litte problem. The paths to the files <code>static/logo/mytool.png</code> and <code>LICENSE.txt</code> are wrong. The generated <code>index.html</code> points to <code>doc/static/logo/mytool.png</code> and <code>doc/LICENSE.txt</code>, so the link is broken when I click on it.</p>\n\n<p>I tried to move these files to <code>doc</code> folder, but YARD generates references like this <code>doc/doc/static/logo/mytool.png</code>. Note double <code>doc</code> in reference.</p>\n\n<p>I'm newbe wih YARD and ruby. What is the best practice to handle this problem? Can YARD copy this files to doc folder?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "forms"], "answers": [{"tags": [], "owner": {"reputation": 1217, "user_id": 10430642, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p5jzL.jpg?s=128&g=1", "display_name": "Dimitrius Lachi", "link": "https://stackoverflow.com/users/10430642/dimitrius-lachi"}, "is_accepted": true, "score": 1, "last_activity_date": 1548865712, "last_edit_date": 1548865712, "creation_date": 1548860029, "answer_id": 54443383, "question_id": 54443261, "link": "https://stackoverflow.com/questions/54443261/validations-in-form-tag/54443383#54443383", "title": "Validations in form_tag", "body": "<p>To force user to select one size: </p>\n\n<pre><code>&lt;%= select_tag :size_id, options_from_collection_for_select(@product.sizes.where('quantity &gt;=1'), :id, :size_name), {include_blank: 'Your Size'}, required: true, class: 'form-control custom-select'%&gt;\n</code></pre>\n\n<p>This will make the <code>select</code> required, and the browser custom message will appears if size not selected. </p>\n\n<p>If you want to customize the message, and shows <strong>before</strong> the request are made, consider use JS, i recommends <a href=\"https://jqueryvalidation.org/\" rel=\"nofollow noreferrer\">https://jqueryvalidation.org/</a></p>\n\n<p><em>OBS</em>: Its a good pratice, don't perform databases queries on your view, consider to make <code>@product.sizes.where('quantity &gt;=1')</code> in your controller like:</p>\n\n<pre><code># Inside your controller\ndef show\n    ...\n    @product_size_options = @product.sizes.where('quantity &gt;=1')\n    ...\nend\n</code></pre>\n\n<p>and your  <code>select_tag</code>:</p>\n\n<pre><code>&lt;%= select_tag :size_id, options_from_collection_for_select(@product_size_options, :id, :size_name), {include_blank: 'Your Size'}, required: true, class: 'form-control custom-select'%&gt;\n</code></pre>\n"}], "owner": {"reputation": 646, "user_id": 8919469, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/f51a8277c113b7415c6b2bbd82be9615?s=128&d=identicon&r=PG&f=1", "display_name": "johan", "link": "https://stackoverflow.com/users/8919469/johan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 35, "favorite_count": 0, "accepted_answer_id": 54443383, "answer_count": 1, "score": 2, "last_activity_date": 1548876025, "creation_date": 1548859678, "last_edit_date": 1548876025, "question_id": 54443261, "link": "https://stackoverflow.com/questions/54443261/validations-in-form-tag", "title": "Validations in form_tag", "body": "<p>In my online shop I want to have validation before adding a product to the cart </p>\n\n<p>my order_item form is in the product show</p>\n\n<p>I want to force the user to select  a size, and display an <strong>error message</strong> if no size chosen ?</p>\n\n<p>Size is a nested attributes of products</p>\n\n<p>How I am supposed to write it? </p>\n\n<pre><code>&lt;%= form_tag clients_order_items_path, input_html: {id: \"orderform\"} do %&gt;\n    &lt;%= hidden_field_tag :product_id, @product.id %&gt;\n    &lt;%= hidden_field_tag :user_id, @token %&gt;\n    &lt;%= hidden_field_tag :quantity, 1 %&gt;            \n    &lt;%= select_tag :size_id, options_from_collection_for_select(@product.sizes.where('quantity &gt;=1'), :id, :size_name), prompt: \"Your Size\", class: 'form-control custom-select'%&gt;  \n&lt;%= submit_tag \"Add to cart\", class: \"btn-main\", id: \"add_to_cart\" %&gt;\n</code></pre>\n\n  \n\n<p>here is the OrderItemsController with the create method: </p>\n\n<pre><code> def create\n    @item = current_cart\n    @size = Size.find(params[:size_id])\n\n    if @size.quantity &gt;= params[:quantity].to_i\n\n      current_cart.add_item(\n        product_id: params[:product_id],\n        quantity: params[:quantity],\n        size_id: params[:size_id],\n      )\n\n      redirect_to clients_cart_path\n    else\n      redirect_to clients_product_path(Product.find(params[:product_id]))\n\n    end\n  end\n</code></pre>\n"}, {"tags": ["ruby", "httparty", "net-http"], "comments": [{"owner": {"reputation": 176, "user_id": 8540055, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5d4c940ad6c96e49b919ffc37bd85c14?s=128&d=identicon&r=PG&f=1", "display_name": "adarsh", "link": "https://stackoverflow.com/users/8540055/adarsh"}, "edited": false, "score": 0, "creation_date": 1548858767, "post_id": 54442262, "comment_id": 95694940, "body": "Need more explaintion.."}, {"owner": {"reputation": 87, "user_id": 5221796, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/637fbbacbe8132d6c232ec189d0879c4?s=128&d=identicon&r=PG&f=1", "display_name": "suhasa", "link": "https://stackoverflow.com/users/5221796/suhasa"}, "reply_to_user": {"reputation": 176, "user_id": 8540055, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5d4c940ad6c96e49b919ffc37bd85c14?s=128&d=identicon&r=PG&f=1", "display_name": "adarsh", "link": "https://stackoverflow.com/users/8540055/adarsh"}, "edited": false, "score": 0, "creation_date": 1548859204, "post_id": 54442262, "comment_id": 95695240, "body": "@adarsh There is an api : www.example.com/api?service=post&amp;action=update. I need to make a post request for this api which will do some background logic and saves data. but The request body i.e., the <b>payload is an array of single json object</b>. When I make above request I am getting <code>undefined method bytesize&#39; for #&lt;Array</code>"}, {"owner": {"reputation": 5312, "user_id": 6535997, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/10156345016155058/picture?type=large", "display_name": "Mark", "link": "https://stackoverflow.com/users/6535997/mark"}, "edited": false, "score": 0, "creation_date": 1548859520, "post_id": 54442262, "comment_id": 95695442, "body": "Can you convert the array to a string before submitting?"}, {"owner": {"reputation": 87, "user_id": 5221796, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/637fbbacbe8132d6c232ec189d0879c4?s=128&d=identicon&r=PG&f=1", "display_name": "suhasa", "link": "https://stackoverflow.com/users/5221796/suhasa"}, "reply_to_user": {"reputation": 5312, "user_id": 6535997, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/10156345016155058/picture?type=large", "display_name": "Mark", "link": "https://stackoverflow.com/users/6535997/mark"}, "edited": false, "score": 0, "creation_date": 1548861700, "post_id": 54442262, "comment_id": 95696994, "body": "@Mark The api returns {&quot;result&quot;: &quot;failed&quot;}. if body is of string type."}], "answers": [{"comments": [{"owner": {"reputation": 87, "user_id": 5221796, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/637fbbacbe8132d6c232ec189d0879c4?s=128&d=identicon&r=PG&f=1", "display_name": "suhasa", "link": "https://stackoverflow.com/users/5221796/suhasa"}, "edited": false, "score": 0, "creation_date": 1548861644, "post_id": 54443806, "comment_id": 95696957, "body": "The api returns {&quot;result&quot;: &quot;failed&quot;} if body is of any other type like string."}, {"owner": {"reputation": 515, "user_id": 8811309, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/4476b7cc4e5b6bce944fc80edc861729?s=128&d=identicon&r=PG&f=1", "display_name": "awsm sid", "link": "https://stackoverflow.com/users/8811309/awsm-sid"}, "reply_to_user": {"reputation": 87, "user_id": 5221796, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/637fbbacbe8132d6c232ec189d0879c4?s=128&d=identicon&r=PG&f=1", "display_name": "suhasa", "link": "https://stackoverflow.com/users/5221796/suhasa"}, "edited": false, "score": 1, "creation_date": 1548861952, "post_id": 54443806, "comment_id": 95697165, "body": "bytesize works for the string. you need to check your api."}, {"owner": {"reputation": 87, "user_id": 5221796, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/637fbbacbe8132d6c232ec189d0879c4?s=128&d=identicon&r=PG&f=1", "display_name": "suhasa", "link": "https://stackoverflow.com/users/5221796/suhasa"}, "edited": false, "score": 0, "creation_date": 1548862206, "post_id": 54443806, "comment_id": 95697352, "body": "The api is expecting the body to be an array of json."}, {"owner": {"reputation": 515, "user_id": 8811309, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/4476b7cc4e5b6bce944fc80edc861729?s=128&d=identicon&r=PG&f=1", "display_name": "awsm sid", "link": "https://stackoverflow.com/users/8811309/awsm-sid"}, "reply_to_user": {"reputation": 87, "user_id": 5221796, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/637fbbacbe8132d6c232ec189d0879c4?s=128&d=identicon&r=PG&f=1", "display_name": "suhasa", "link": "https://stackoverflow.com/users/5221796/suhasa"}, "edited": false, "score": 0, "creation_date": 1548862272, "post_id": 54443806, "comment_id": 95697398, "body": "you can also try the RestClient::Request"}], "tags": [], "owner": {"reputation": 515, "user_id": 8811309, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/4476b7cc4e5b6bce944fc80edc861729?s=128&d=identicon&r=PG&f=1", "display_name": "awsm sid", "link": "https://stackoverflow.com/users/8811309/awsm-sid"}, "is_accepted": false, "score": 1, "last_activity_date": 1548862202, "last_edit_date": 1548862202, "creation_date": 1548861389, "answer_id": 54443806, "question_id": 54442262, "link": "https://stackoverflow.com/questions/54442262/sending-array-as-a-body-in-httparty-post-request-giving-undefined-method-byte/54443806#54443806", "title": "Sending Array as a body in HTTParty post request giving : undefined method `bytesize&#39; for #&lt;Array", "body": "<p>Try to pass the string rather than array.</p>\n\n<pre><code>response = HTTParty.post(App.base_uri + \"/api?service=post&amp;action=update&amp;version=2\",\n    body: \"[{'some_big_json': 'with many key value pair'}]\",\n    headers: {\n      'Content-Type' =&gt; 'application/json',\n      'Accept' =&gt; 'application/json',\n      'Cookie' =&gt; @@cookie\n    })\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 87, "user_id": 5221796, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/637fbbacbe8132d6c232ec189d0879c4?s=128&d=identicon&r=PG&f=1", "display_name": "suhasa", "link": "https://stackoverflow.com/users/5221796/suhasa"}, "edited": false, "score": 0, "creation_date": 1548916558, "post_id": 54444162, "comment_id": 95717427, "body": "response = RestClient::Request.execute(         method: :post,         url: App.base_uri + &quot;/api?service=draft&amp;action=update&amp;version=2&quot;,         payload: [@@req1],         timeout: 3000,         headers: {          &#39;Content-Type&#39; =&gt; &#39;text/plain&#39;,          &#39;Accept&#39; =&gt; &#39;text/plain&#39;,          &#39;Cookie&#39; =&gt; @@cookie        }) This is not working, in the api logs I am seeing request as null. Even if i make content type as &#39;application/json&#39; Its not working."}, {"owner": {"reputation": 515, "user_id": 8811309, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/4476b7cc4e5b6bce944fc80edc861729?s=128&d=identicon&r=PG&f=1", "display_name": "awsm sid", "link": "https://stackoverflow.com/users/8811309/awsm-sid"}, "reply_to_user": {"reputation": 87, "user_id": 5221796, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/637fbbacbe8132d6c232ec189d0879c4?s=128&d=identicon&r=PG&f=1", "display_name": "suhasa", "link": "https://stackoverflow.com/users/5221796/suhasa"}, "edited": false, "score": 0, "creation_date": 1548951569, "post_id": 54444162, "comment_id": 95737802, "body": "follow <a href=\"https://github.com/rest-client/rest-client\" rel=\"nofollow noreferrer\">github.com/rest-client/rest-client</a> this you will find the solution"}], "tags": [], "owner": {"reputation": 515, "user_id": 8811309, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/4476b7cc4e5b6bce944fc80edc861729?s=128&d=identicon&r=PG&f=1", "display_name": "awsm sid", "link": "https://stackoverflow.com/users/8811309/awsm-sid"}, "is_accepted": false, "score": 1, "last_activity_date": 1548862487, "creation_date": 1548862487, "answer_id": 54444162, "question_id": 54442262, "link": "https://stackoverflow.com/questions/54442262/sending-array-as-a-body-in-httparty-post-request-giving-undefined-method-byte/54444162#54444162", "title": "Sending Array as a body in HTTParty post request giving : undefined method `bytesize&#39; for #&lt;Array", "body": "<p>You can also try the RestClient</p>\n\n<pre><code>RestClient::Request.execute(method: :post,\n                            url: App.base_uri + '/api',\n                            payload: params,\n                            timeout: 1000,\n                            headers: headers)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 5279276, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153165433587123/picture?type=large", "display_name": "Dan Wetherald", "link": "https://stackoverflow.com/users/5279276/dan-wetherald"}, "is_accepted": false, "score": 0, "last_activity_date": 1583535956, "creation_date": 1583535956, "answer_id": 60572734, "question_id": 54442262, "link": "https://stackoverflow.com/questions/54442262/sending-array-as-a-body-in-httparty-post-request-giving-undefined-method-byte/60572734#60572734", "title": "Sending Array as a body in HTTParty post request giving : undefined method `bytesize&#39; for #&lt;Array", "body": "<p>Just convert the array to JSON before submitting.</p>\n\n<pre><code>options = @options.merge(\n  body: [\n    {\n      name: 'John Doe',\n    }\n  ].to_json\n)\n</code></pre>\n"}], "owner": {"reputation": 87, "user_id": 5221796, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/637fbbacbe8132d6c232ec189d0879c4?s=128&d=identicon&r=PG&f=1", "display_name": "suhasa", "link": "https://stackoverflow.com/users/5221796/suhasa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 962, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1583535956, "creation_date": 1548856655, "last_edit_date": 1548862038, "question_id": 54442262, "link": "https://stackoverflow.com/questions/54442262/sending-array-as-a-body-in-httparty-post-request-giving-undefined-method-byte", "title": "Sending Array as a body in HTTParty post request giving : undefined method `bytesize&#39; for #&lt;Array", "body": "<p>I am trying to make a post request using httparty gem.</p>\n\n<pre><code>    response = HTTParty.post(App.base_uri + \"/api?service=post&amp;action=update&amp;version=2\",\n    body: [{\"some_big_json\": \"with many key value pair\"}],\n    headers: {\n      'Content-Type' =&gt; 'application/json',\n      'Accept' =&gt; 'application/json',\n      'Cookie' =&gt; @@cookie\n    })\n</code></pre>\n\n<p>The Body is an array. When i make a post request, I am getting this error:</p>\n\n<p><code>/home/user/.rbenv/versions/2.5.0/lib/ruby/2.5.0/net/http/generic_request.rb:183:in send_request_with_body': undefined method bytesize' for #&lt;Array:0x00005561f96833e0&gt; (NoMethodError)</code></p>\n\n<p>How to post a large array in body using httparty?</p>\n\n<p><strong>Update</strong>: In the postman i am able to send body as an array and i am getting successful(expected) response.</p>\n"}, {"tags": ["ruby", "multithreading", "libgosu"], "comments": [{"owner": {"reputation": 19267, "user_id": 801894, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67f2ccd17aa6fd622152ad88fc2ae784?s=128&d=identicon&r=PG", "display_name": "Solomon Slow", "link": "https://stackoverflow.com/users/801894/solomon-slow"}, "edited": false, "score": 0, "creation_date": 1548856795, "post_id": 54441255, "comment_id": 95693653, "body": "I don&#39;t know what&#39;s wrong with your code, but this is not the first time you&#39;ve ever used a thread: It merely is the first time you&#39;ve ever used <i>more than one</i> thread. All of the code you&#39;ve ever written up &#39;till now has been running on some program&#39;s <i>main thread</i>, and there is absolutely no difference between how code works on the main thread vs. how it works on any other thread. Threading only gets interesting when you have two or more threads that share the same data or otherwise communicate with each other. (Which, of course, is most of the time :-)"}], "answers": [{"comments": [{"owner": {"reputation": 689, "user_id": 10280525, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ar3KN.jpg?s=128&g=1", "display_name": "Nifriz", "link": "https://stackoverflow.com/users/10280525/nifriz"}, "edited": false, "score": 0, "creation_date": 1548862782, "post_id": 54442238, "comment_id": 95697731, "body": "Yes, I miss the return, a stupid oversight error, now it&#39;s works! Thank&#39;s for your help."}], "tags": [], "owner": {"reputation": 5449, "user_id": 681520, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/701baebf68d1d7faa9f9def6a24fe356?s=128&d=identicon&r=PG", "display_name": "Kimmo Lehto", "link": "https://stackoverflow.com/users/681520/kimmo-lehto"}, "is_accepted": true, "score": 3, "last_activity_date": 1548856924, "last_edit_date": 1548856924, "creation_date": 1548856564, "answer_id": 54442238, "question_id": 54441255, "link": "https://stackoverflow.com/questions/54441255/same-procedure-doesnt-work-called-in-a-thread/54442238#54442238", "title": "Same procedure doesn&#39;t work called in a Thread", "body": "<p>Your guard clause is missing a <code>return</code>.</p>\n\n<pre><code>def define_action(field)\n  false if field.nil? || field.empty? # this line does nothing\n  ...\nend\n</code></pre>\n\n<p>Should probably be:</p>\n\n<pre><code>def define_action(field)\n  return false if field.nil? || field.empty?\n  ...\nend\n</code></pre>\n\n<p>I don't see how threads would make any difference.</p>\n"}], "owner": {"reputation": 689, "user_id": 10280525, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ar3KN.jpg?s=128&g=1", "display_name": "Nifriz", "link": "https://stackoverflow.com/users/10280525/nifriz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 34, "favorite_count": 0, "accepted_answer_id": 54442238, "answer_count": 1, "score": 0, "last_activity_date": 1548856924, "creation_date": 1548853350, "question_id": 54441255, "link": "https://stackoverflow.com/questions/54441255/same-procedure-doesnt-work-called-in-a-thread", "title": "Same procedure doesn&#39;t work called in a Thread", "body": "<p>I have a problem with Thread in Ruby.\nIt's the first time I use Threads, so maybe I omit something important.</p>\n\n<p>I have this procedure:</p>\n\n<pre><code>  def define_action(field)\n    false if field.nil? || field.empty?\n    puts field.empty?          &lt;---- ONLY FOR DEBUG\n    case field['special']\n    when 'signpost'\n      typewriter_animation(field['message'])\n    else\n      typewriter_animation(\"TO DO ... add action for #{field['special']}\") \n    end\n  end\n</code></pre>\n\n<p><code>typewriter_animation</code> clean a field, puts a text and wait 5 seconds before clear field again.</p>\n\n<p>I use <code>define_action</code> in a Thread</p>\n\n<pre><code>   @timer = Thread.new do\n    @engine.define_action(@map.next_field_coordinates)\n  end\n</code></pre>\n\n<p>When <code>field</code> is <code>empty</code> (i see <code>true</code> in prompt) I except nothing as result, but the procedure continue and print on screen \"TO DO ... add action for\"</p>\n\n<p>The same code without Thread work perfectly, but obviously stop screen for 5 seconds.</p>\n\n<p>What's wrong in my code?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "haml"], "answers": [{"comments": [{"owner": {"reputation": 139, "user_id": 10389241, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-W3kYSr2LAmk/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DXqJ874xoauW7FCFUYd07FmJVyy1g/mo/photo.jpg?sz=128", "display_name": "Moriarty", "link": "https://stackoverflow.com/users/10389241/moriarty"}, "edited": false, "score": 0, "creation_date": 1548851518, "post_id": 54440526, "comment_id": 95690489, "body": "I did this but it gave error as <code>nil is not a symbol nor a string.</code>  for <code>category_type</code>  when I passed the params[:category] in the <code>category_type</code> variable"}, {"owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "reply_to_user": {"reputation": 139, "user_id": 10389241, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-W3kYSr2LAmk/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DXqJ874xoauW7FCFUYd07FmJVyy1g/mo/photo.jpg?sz=128", "display_name": "Moriarty", "link": "https://stackoverflow.com/users/10389241/moriarty"}, "edited": false, "score": 0, "creation_date": 1548851736, "post_id": 54440526, "comment_id": 95690602, "body": "Use <code>params[:category] || &#39;question&#39;</code> instead of <code>params[:category]</code> for initial purpose. Because initial tab to be selected is <code>question</code> and action is called with no category key in params."}], "tags": [], "owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "is_accepted": true, "score": 0, "last_activity_date": 1548850782, "creation_date": 1548850782, "answer_id": 54440526, "question_id": 54440365, "link": "https://stackoverflow.com/questions/54440365/how-to-pass-a-selected-tab-to-a-controller-action/54440526#54440526", "title": "How to pass a selected_tab to a controller action?", "body": "<p>You can pass category type from view through <code>question_category_path</code> as below,</p>\n\n<pre><code>question_category_path(category: 'question')\n</code></pre>\n\n<p>Similar goes for <code>answer_category_path</code></p>\n\n<p>And access which type is selected, in action as <code>params[:category]</code></p>\n"}], "owner": {"reputation": 139, "user_id": 10389241, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-W3kYSr2LAmk/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DXqJ874xoauW7FCFUYd07FmJVyy1g/mo/photo.jpg?sz=128", "display_name": "Moriarty", "link": "https://stackoverflow.com/users/10389241/moriarty"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 86, "favorite_count": 0, "accepted_answer_id": 54440526, "answer_count": 1, "score": 0, "last_activity_date": 1581309110, "creation_date": 1548850278, "last_edit_date": 1581309110, "question_id": 54440365, "link": "https://stackoverflow.com/questions/54440365/how-to-pass-a-selected-tab-to-a-controller-action", "title": "How to pass a selected_tab to a controller action?", "body": "<p>I have a main tab 'Category'. This tab has two more tabs as 'question' and 'answer'. I have created <code>CategoryController</code>, in which I have defined two actions with the name 'question' and 'answer'. I have a method <code>category_type</code> in private which should take category_type based on which tab is selected ('question' or 'answer'). This method will be called in the controller's actions. I have created these tabs in views and have also added the routes. How to pass which tab is selected from view to this method?</p>\n\n<p>I have created a partial for these tabs and rendered it on the main page. </p>\n\n<p><code>_tabs.html.haml</code></p>\n\n<pre>\n\n#secondary-slider.pills-container\n  %span\n    = link_to 'Questions', question_category_path, class: @selected_tab[:question]\n  %span\n    = link_to 'Answers',  answer_category_path, class: @selected_tab[:answer]\n\n</pre>\n\n<p>Controller's action:</p>\n\n<pre>\n\n  def question\n    @selected_tab = { category_type => :selected }\n  end\n\n  alias :question :answer\n\n  private\n\n  def category_type\n    @category_type = :question\n  end\n\n</pre>\n\n<p>Instead of passing category_type as <code>:question</code> or <code>:answer</code> as given above, I want to pass params from view i.e. it if <code>question</code> tab is selected, the <code>@category_type</code> should be passed with <code>question</code> else if <code>answer</code> tab is selected, it should be passed in <code>category_type</code>. </p>\n\n<p>How can this be achieved? I thought of passing 'params()' but couldn't figure out what should be passed in the parenthesis. </p>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 2, "creation_date": 1548849412, "post_id": 54440030, "comment_id": 95689290, "body": "From the <a href=\"http://ruby-doc.org/core-2.6/doc/syntax/methods_rdoc.html#label-Return+Values\" rel=\"nofollow noreferrer\">docs</a>: <i>&quot;Note that for assignment methods the return value will be ignored when using the assignment syntax. Instead, the argument will be returned&quot;</i>"}], "answers": [{"tags": [], "owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "is_accepted": true, "score": 3, "last_activity_date": 1548849355, "creation_date": 1548849355, "answer_id": 54440076, "question_id": 54440030, "link": "https://stackoverflow.com/questions/54440030/ruby-equal-method-always-returns-parameter-value-instead-of-returned-value/54440076#54440076", "title": "ruby equal method always returns parameter value instead of returned value", "body": "<blockquote>\n  <p>Is that possible?</p>\n</blockquote>\n\n<p>Nope, that's how assignment operator is treated in ruby. You can switch from <code>bar=</code> to, say, <code>set_bar</code>. This now is just an ordinary method and will not get its return value ignored in an assignment operation (because it can't be used there).</p>\n\n<p>Or you can do something like <code>foo.send(\"bar=\", 42)</code>, but please don't.</p>\n"}], "owner": {"reputation": 6460, "user_id": 6320039, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/U4QjP.jpg?s=128&g=1", "display_name": "Ulysse BN", "link": "https://stackoverflow.com/users/6320039/ulysse-bn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 0, "closed_date": 1548849821, "accepted_answer_id": 54440076, "answer_count": 1, "score": -1, "last_activity_date": 1548849355, "creation_date": 1548849184, "question_id": 54440030, "link": "https://stackoverflow.com/questions/54440030/ruby-equal-method-always-returns-parameter-value-instead-of-returned-value", "closed_reason": "Duplicate", "title": "ruby equal method always returns parameter value instead of returned value", "body": "<p>My issue is that on assignment my value can be modified, but the returned value by <code>#bar=</code> will not be the one of my implicit return and it will instead be the <code>value</code> parameter.</p>\n\n<pre><code>class Foo\n  def bar=(value)\n    @bar = \"these not the droids you are looking for\"\n  end\n\n  def bar\n    @bar\n  end\nend\n\nfoo = Foo.new\nputs foo.bar = 42 # 42\nputs foo.bar # \"these not the droids you are looking for\"\n</code></pre>\n\n<p>I'd like my last line to print <code>\"these not the droids you are looking for\"</code> instead of <code>42</code>. Is that possible?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "spree"], "comments": [{"owner": {"reputation": 13378, "user_id": 1430810, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/v669u.jpg?s=128&g=1", "display_name": "arieljuod", "link": "https://stackoverflow.com/users/1430810/arieljuod"}, "edited": false, "score": 1, "creation_date": 1548853428, "post_id": 54439921, "comment_id": 95691528, "body": "Check the rails&#39; log. You&#39;ll see every partial and layout it renders, you&#39;ll see a line showing your <code>_login</code> partial and there must be more renders, one of them will point you on the file. Anyway, you didn&#39;t specify this, but are you using spree_bootstrap_frontend gem? if so, check this file <a href=\"https://github.com/Purepoint/spree_bootstrap_frontend/blob/490c13e5669edab6f1631ef74b59f975a1b523f5/spree_auth_devise_bootstrap/lib/views/frontend/spree/user_sessions/new.html.erb\" rel=\"nofollow noreferrer\">github.com/Purepoint/spree_bootstrap_frontend/blob/&hellip;</a>"}, {"owner": {"reputation": 75, "user_id": 9326999, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11bfc4b0f12f6a76a7cd56c7fc4cb7a7?s=128&d=identicon&r=PG&f=1", "display_name": "synopsa", "link": "https://stackoverflow.com/users/9326999/synopsa"}, "reply_to_user": {"reputation": 13378, "user_id": 1430810, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/v669u.jpg?s=128&g=1", "display_name": "arieljuod", "link": "https://stackoverflow.com/users/1430810/arieljuod"}, "edited": false, "score": 0, "creation_date": 1548854564, "post_id": 54439921, "comment_id": 95692256, "body": "Thanks a lot! Anyway, how I&#39;m using spree_bootstrap_frontend gem? I have never installed it. Does any of these includes it? gem &#39;spree&#39;, &#39;~&gt; 3.2.7&#39; gem &#39;spree_auth_devise&#39;, &#39;~&gt; 3.4&#39; gem &#39;spree_gateway&#39;, &#39;~&gt; 3.4&#39; because these are only gems I&#39;ve installed"}, {"owner": {"reputation": 13378, "user_id": 1430810, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/v669u.jpg?s=128&g=1", "display_name": "arieljuod", "link": "https://stackoverflow.com/users/1430810/arieljuod"}, "edited": false, "score": 1, "creation_date": 1548855380, "post_id": 54439921, "comment_id": 95692763, "body": "Check your Gemfile.lock, if you have that gem it will show you what gem depends on it."}, {"owner": {"reputation": 176, "user_id": 8540055, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5d4c940ad6c96e49b919ffc37bd85c14?s=128&d=identicon&r=PG&f=1", "display_name": "adarsh", "link": "https://stackoverflow.com/users/8540055/adarsh"}, "edited": false, "score": 0, "creation_date": 1548856781, "post_id": 54439921, "comment_id": 95693643, "body": "@synopsa check <a href=\"http://railscasts.com/episodes/298-getting-started-with-spree\" rel=\"nofollow noreferrer\">railscasts.com/episodes/298-getting-started-with-spree</a>"}], "answers": [{"tags": [], "owner": {"reputation": 8640, "user_id": 4055042, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cd04c63d95d27033b53d4d83fea40c02?s=128&d=identicon&r=PG&f=1", "display_name": "SRack", "link": "https://stackoverflow.com/users/4055042/srack"}, "is_accepted": true, "score": 1, "last_activity_date": 1548871709, "creation_date": 1548871709, "answer_id": 54446924, "question_id": 54439921, "link": "https://stackoverflow.com/questions/54439921/from-where-comes-extra-html-for-spree-login-page/54446924#54446924", "title": "From where comes extra html for Spree login page?", "body": "<p>That comes from a different template, located here: <a href=\"https://github.com/spree/spree_auth_devise/blob/master/app/views/spree/user_sessions/new.html.erb\" rel=\"nofollow noreferrer\">https://github.com/spree/spree_auth_devise/blob/master/app/views/spree/user_sessions/new.html.erb</a>.</p>\n\n<p>If you search Spree's code for the sentence 'Login as Existing Customer', you'll see it's present in their <a href=\"https://github.com/spree/spree/blob/4cc2c2967352d3fe7652bd873e492c074ffcc3da/core/config/locales/en.yml\" rel=\"nofollow noreferrer\">locales</a> with the key <code>login_as_existing</code>.</p>\n\n<p>A little more digging, and I found the key on line five of the template linked above (as well as <a href=\"https://github.com/spree/spree_auth_devise/search?q=login_as_existing&amp;unscoped_q=login_as_existing\" rel=\"nofollow noreferrer\">a couple of other locations</a>). You can replace this in the same way you have the login form, or adjust the locale if you'd prefer different terminology. And a final third option, you can use Spree's <a href=\"https://guides.spreecommerce.org/developer/deface_overrides_tutorial.html\" rel=\"nofollow noreferrer\">deface overrides</a>.</p>\n\n<p>Tricky to track down these views sometimes, though search the main repo and any of the included extensions and you should be able to track anything down :)</p>\n"}], "owner": {"reputation": 75, "user_id": 9326999, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11bfc4b0f12f6a76a7cd56c7fc4cb7a7?s=128&d=identicon&r=PG&f=1", "display_name": "synopsa", "link": "https://stackoverflow.com/users/9326999/synopsa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 168, "favorite_count": 0, "accepted_answer_id": 54446924, "answer_count": 1, "score": 0, "last_activity_date": 1548871709, "creation_date": 1548848805, "last_edit_date": 1548853153, "question_id": 54439921, "link": "https://stackoverflow.com/questions/54439921/from-where-comes-extra-html-for-spree-login-page", "title": "From where comes extra html for Spree login page?", "body": "<p>This is _login.html.erb partial from Spree github page: </p>\n\n<pre><code>&lt;%= form_for Spree::User.new, as: :spree_user, url: spree.create_new_session_path do |f| %&gt;\n  &lt;fieldset id=\"password-credentials\"&gt;\n    &lt;div class=\"form-group\"&gt;\n      &lt;%= f.email_field :email, class: 'form-control', tabindex: 1, placeholder: Spree.t(:email) %&gt;\n    &lt;/div&gt;\n    &lt;div class=\"form-group\"&gt;\n      &lt;%= f.password_field :password, class: 'form-control', tabindex: 2, placeholder: Spree.t(:password) %&gt;\n    &lt;/div&gt;\n    &lt;div class=\"checkbox\"&gt;\n      &lt;label&gt;\n        &lt;%= f.check_box :remember_me %&gt;\n        &lt;%= f.label :remember_me, Spree.t(:remember_me) %&gt;\n      &lt;/label&gt;\n    &lt;/div&gt;\n    &lt;div class=\"form-group\"&gt;\n      &lt;%= f.submit Spree.t(:login), class: 'btn btn-lg btn-success btn-block', tabindex: 3 %&gt;\n    &lt;/div&gt;\n  &lt;/fieldset&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>but in reality when go to that page that form is built-in in panel with heading \"Login as Existing customer\". </p>\n\n<p><a href=\"https://i.stack.imgur.com/DMSbJ.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/DMSbJ.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>from where it comes?</p>\n\n<p><a href=\"https://i.stack.imgur.com/k2vI2.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/k2vI2.jpg\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "postgresql"], "comments": [{"owner": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "edited": false, "score": 1, "creation_date": 1548848327, "post_id": 54439744, "comment_id": 95688627, "body": "Indeed, <code>Program.where(&#39;id&#39;)</code> makes on sense, what do you mean by that?"}, {"owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "edited": false, "score": 0, "creation_date": 1548848535, "post_id": 54439744, "comment_id": 95688756, "body": "What do you want to pass through <code>Program.where(&#39;id&#39;)</code> ?"}, {"owner": {"reputation": 107, "user_id": 6807622, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11676840a0756b0771decb53406ff33c?s=128&d=identicon&r=PG&f=1", "display_name": "Penny", "link": "https://stackoverflow.com/users/6807622/penny"}, "reply_to_user": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "edited": false, "score": 0, "creation_date": 1548848762, "post_id": 54439744, "comment_id": 95688883, "body": "@ray I am trying to get all the program name in a dropdown through program_id,"}, {"owner": {"reputation": 645, "user_id": 6285605, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/d21129320196972e88809eefe996bdc2?s=128&d=identicon&r=PG&f=1", "display_name": "Suganya Selvarajan", "link": "https://stackoverflow.com/users/6285605/suganya-selvarajan"}, "edited": false, "score": 0, "creation_date": 1548849024, "post_id": 54439744, "comment_id": 95689053, "body": "@Penny, the syntax for doing that seems to be wrong. use this &lt;% f.select :program_id, Program.all.collect { |p| [p.name, p.id] } %&gt; . This will populate your dropdown with program names and the params will contain program id that you can save in your table."}, {"owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "edited": false, "score": 0, "creation_date": 1548849041, "post_id": 54439744, "comment_id": 95689065, "body": "<code>program_id</code> foreign key is present in @course object?"}, {"owner": {"reputation": 107, "user_id": 6807622, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11676840a0756b0771decb53406ff33c?s=128&d=identicon&r=PG&f=1", "display_name": "Penny", "link": "https://stackoverflow.com/users/6807622/penny"}, "reply_to_user": {"reputation": 645, "user_id": 6285605, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/d21129320196972e88809eefe996bdc2?s=128&d=identicon&r=PG&f=1", "display_name": "Suganya Selvarajan", "link": "https://stackoverflow.com/users/6285605/suganya-selvarajan"}, "edited": false, "score": 0, "creation_date": 1548849142, "post_id": 54439744, "comment_id": 95689128, "body": "@SuganyaSelvarajan that doesnt work , it tells undefined local variable or method `id&#39;"}, {"owner": {"reputation": 947, "user_id": 7333505, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ade96347d4304c3c3e72b914f61d1792?s=128&d=identicon&r=PG&f=1", "display_name": "Ritesh Ranjan", "link": "https://stackoverflow.com/users/7333505/ritesh-ranjan"}, "edited": false, "score": 0, "creation_date": 1548849167, "post_id": 54439744, "comment_id": 95689146, "body": "just replace &quot;Program.where(&#39;id&#39;)&quot; by &quot;Program.all &quot; it will work,"}, {"owner": {"reputation": 107, "user_id": 6807622, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11676840a0756b0771decb53406ff33c?s=128&d=identicon&r=PG&f=1", "display_name": "Penny", "link": "https://stackoverflow.com/users/6807622/penny"}, "reply_to_user": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "edited": false, "score": 0, "creation_date": 1548849178, "post_id": 54439744, "comment_id": 95689155, "body": "@ray yes program_id is there in the course table"}, {"owner": {"reputation": 107, "user_id": 6807622, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11676840a0756b0771decb53406ff33c?s=128&d=identicon&r=PG&f=1", "display_name": "Penny", "link": "https://stackoverflow.com/users/6807622/penny"}, "reply_to_user": {"reputation": 947, "user_id": 7333505, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ade96347d4304c3c3e72b914f61d1792?s=128&d=identicon&r=PG&f=1", "display_name": "Ritesh Ranjan", "link": "https://stackoverflow.com/users/7333505/ritesh-ranjan"}, "edited": false, "score": 0, "creation_date": 1548849608, "post_id": 54439744, "comment_id": 95689380, "body": "@RiteshRanjan thanks it works"}], "answers": [{"tags": [], "owner": {"reputation": 947, "user_id": 7333505, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ade96347d4304c3c3e72b914f61d1792?s=128&d=identicon&r=PG&f=1", "display_name": "Ritesh Ranjan", "link": "https://stackoverflow.com/users/7333505/ritesh-ranjan"}, "is_accepted": true, "score": 2, "last_activity_date": 1548849417, "creation_date": 1548849417, "answer_id": 54440093, "question_id": 54439744, "link": "https://stackoverflow.com/questions/54439744/pgdatatypemismatch-error-argument-of-where-must-be-type-boolean-not-type-in/54440093#54440093", "title": "PG::DatatypeMismatch: ERROR: argument of WHERE must be type boolean, not type integer", "body": "<p>Where clause isn't calling anything to compare with, so PG doesn't know what to include in the results. A where clause must evaluate to true/false.</p>\n\n<p>just replace </p>\n\n<pre><code>&lt;%= f.collection_select :program_id, Program.where('id'), :id, :name, {}, {class: \"input-md form-control mb-20\" } %&gt;\n</code></pre>\n\n<p>by</p>\n\n<pre><code>&lt;%= f.collection_select :program_id, Program.all, :id, :name, {}, {class: \"input-md form-control mb-20\" } %&gt;\n</code></pre>\n\n<p>If you have some problem with some of the Program in your data base, add a column as status in programs table and make changes here as</p>\n\n<pre><code>&lt;%= f.collection_select :program_id, Program.where(\"status =?\", true), :id, :name, {}, {class: \"input-md form-control mb-20\" } %&gt;\n</code></pre>\n"}], "owner": {"reputation": 107, "user_id": 6807622, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11676840a0756b0771decb53406ff33c?s=128&d=identicon&r=PG&f=1", "display_name": "Penny", "link": "https://stackoverflow.com/users/6807622/penny"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2432, "favorite_count": 0, "accepted_answer_id": 54440093, "answer_count": 1, "score": 0, "last_activity_date": 1558516074, "creation_date": 1548848264, "last_edit_date": 1558516074, "question_id": 54439744, "link": "https://stackoverflow.com/questions/54439744/pgdatatypemismatch-error-argument-of-where-must-be-type-boolean-not-type-in", "title": "PG::DatatypeMismatch: ERROR: argument of WHERE must be type boolean, not type integer", "body": "<p>I am getting this error in the Production site and this is the code in my views</p>\n\n<pre><code>&lt;%= form_for [:admin, @course], :remote =&gt; true do |f| %&gt;\n  &lt;%= f.label :name %&gt;\n  &lt;%= f.text_field :name %&gt;\n  &lt;%= f.label :duration %&gt; \n  &lt;%= f.number_field :duration, class: \"input-md form-control mb-20\"%&gt; \n  &lt;%= f.label :program_id %&gt; \n  &lt;%= f.collection_select :program_id, Program.where('id'), :id, :name, {}, {class: \"input-md form-control mb-20\" } %&gt;\n&lt;%end%&gt;\n</code></pre>\n\n<p>This works in my local server where i have sql db setup.</p>\n\n<pre><code>Program model\n     has_many :courses \n</code></pre>\n\n<p>can anyone guide me?</p>\n"}, {"tags": ["ruby", "rest", "sinatra", "httparty"], "answers": [{"comments": [{"owner": {"reputation": 69, "user_id": 10834384, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-XkIDlG6hWA4/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcYIySLIWltV5oqrVin54d8QVjCxiw/mo/photo.jpg?sz=128", "display_name": "Bob K", "link": "https://stackoverflow.com/users/10834384/bob-k"}, "edited": false, "score": 0, "creation_date": 1549119718, "post_id": 54440832, "comment_id": 95793848, "body": "I actually changed up the description for this question to make it clearer. Could you please take a look and let me know what I&#39;m doing wrong?"}, {"owner": {"reputation": 69, "user_id": 10834384, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-XkIDlG6hWA4/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcYIySLIWltV5oqrVin54d8QVjCxiw/mo/photo.jpg?sz=128", "display_name": "Bob K", "link": "https://stackoverflow.com/users/10834384/bob-k"}, "edited": false, "score": 0, "creation_date": 1549123158, "post_id": 54440832, "comment_id": 95794872, "body": "I&#39;ll add more information in the question regarding the header."}, {"owner": {"reputation": 69, "user_id": 10834384, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-XkIDlG6hWA4/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcYIySLIWltV5oqrVin54d8QVjCxiw/mo/photo.jpg?sz=128", "display_name": "Bob K", "link": "https://stackoverflow.com/users/10834384/bob-k"}, "edited": false, "score": 0, "creation_date": 1549123348, "post_id": 54440832, "comment_id": 95794935, "body": "Alright I edited the question. Given the changes, do you think my this line of code is incorrect: <code>@putResponse = HTTParty.put(base_url,                            :body =&gt; @data.to_json,                          :headers =&gt; header)</code>"}, {"owner": {"reputation": 5610, "user_id": 413924, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/a5fae9bf6a8e05a023c96ba434a1dfd5?s=128&d=identicon&r=PG", "display_name": "DannyB", "link": "https://stackoverflow.com/users/413924/dannyb"}, "reply_to_user": {"reputation": 69, "user_id": 10834384, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-XkIDlG6hWA4/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcYIySLIWltV5oqrVin54d8QVjCxiw/mo/photo.jpg?sz=128", "display_name": "Bob K", "link": "https://stackoverflow.com/users/10834384/bob-k"}, "edited": false, "score": 0, "creation_date": 1549127002, "post_id": 54440832, "comment_id": 95796069, "body": "No. It is likely that you are not properly defining the <code>&#47;api&#47;v1&#47;users&#47;self&#47;custom_data&#47;program_of_study</code> path in your Sinatra or that your request to it (<code>base_url</code>) goes to the real server and not your test server."}, {"owner": {"reputation": 69, "user_id": 10834384, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-XkIDlG6hWA4/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcYIySLIWltV5oqrVin54d8QVjCxiw/mo/photo.jpg?sz=128", "display_name": "Bob K", "link": "https://stackoverflow.com/users/10834384/bob-k"}, "edited": false, "score": 0, "creation_date": 1549127766, "post_id": 54440832, "comment_id": 95796326, "body": "But is there any difference between writing it like this: <code>response = HTTParty.put &#39;http:&#47;&#47;localhost:4567&#47;&#39;, body: data</code> and writing it like this: <code>response = HTTParty.put(&#39;http:&#47;&#47;localhost:4567&#39;, :body =&gt; data)</code>?"}], "tags": [], "owner": {"reputation": 5610, "user_id": 413924, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/a5fae9bf6a8e05a023c96ba434a1dfd5?s=128&d=identicon&r=PG", "display_name": "DannyB", "link": "https://stackoverflow.com/users/413924/dannyb"}, "is_accepted": false, "score": 0, "last_activity_date": 1549122216, "last_edit_date": 1549122216, "creation_date": 1548851841, "answer_id": 54440832, "question_id": 54439313, "link": "https://stackoverflow.com/questions/54439313/http-put-request-with-ruby-sinatra/54440832#54440832", "title": "HTTP PUT request with Ruby Sinatra", "body": "<p>Dealing with <code>PUT</code> in Sinatra, is similar to dealing with <code>POST</code> - this is why the documentation may be scarce in this aspect.</p>\n\n<p>This is a simple example of a Sinatra endpoint that receives <code>PUT</code> arguments from a <code>curl</code> request:</p>\n\n<pre><code># server.rb\nrequire 'sinatra'\n\nput '/' do\n  params.inspect\nend\n</code></pre>\n\n<p>And test it with this curl command:</p>\n\n<pre><code>$ curl -X PUT -d n=hello http://localhost:4567/\n</code></pre>\n\n<p>The <code>params</code> hash will be available to you inside any Sinatra endpoint, including parameters received by any HTTP method.</p>\n\n<p>In response to your comment, it is hard to debug without seeing your entire code. \nI suggest you run the tests provided in this answer, and gradually modify it to fit your actual code, to understand what breaks.</p>\n\n<p>With the above <code>server.rb</code> running, the below test works without errors:</p>\n\n<pre><code># test.rb\nrequire 'httparty'\n\ndata = { \n  param1: \"nameserver\",\n  param2: { code: \"XYZ\", name: \"NAME\", start: \"2017\" }\n}\n\nresponse = HTTParty.put 'http://localhost:4567/', body: data\nputs response.body\n# =&gt; {\"param1\"=&gt;\"nameserver\", \"param2\"=&gt;{\"code\"=&gt;\"XYZ\", \"name\"=&gt;\"NAME\", \"start\"=&gt;\"2017\"}}\n</code></pre>\n"}], "owner": {"reputation": 69, "user_id": 10834384, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-XkIDlG6hWA4/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcYIySLIWltV5oqrVin54d8QVjCxiw/mo/photo.jpg?sz=128", "display_name": "Bob K", "link": "https://stackoverflow.com/users/10834384/bob-k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 916, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1549123275, "creation_date": 1548846910, "last_edit_date": 1549123275, "question_id": 54439313, "link": "https://stackoverflow.com/questions/54439313/http-put-request-with-ruby-sinatra", "title": "HTTP PUT request with Ruby Sinatra", "body": "<p>I created a body for a PUT request with Ruby. When I print out the body, I don't see any problems. But when I try to print out the body from the actual PUT request, I start getting an error.</p>\n\n<p>To elaborate, here is my code:</p>\n\n<pre><code>@data={param1: \"nameserver\",\n       param2: {code: \"XYZ\", name: \"NAME\", start: \"2017\"}}\n\n  puts \"data = #{@data} \" #This works fine\n\n    @putResponse = HTTParty.put(base_url,  \n                         :body =&gt; @data.to_json,\n                         :headers =&gt; header)\n\n    puts \"putResponse.body is #{@putResponse.body}\" #This is where I get the error\n</code></pre>\n\n<p>So as you can see, the line <code>puts \"data = #{@data} \"</code> works fine. It prints out </p>\n\n<pre><code>data = {:param1=&gt;\"nameserver\", :param2=&gt;{:code=&gt;\"XYZ\", :name=&gt;\"NAME\", :start=&gt;\"2017\"}}\n</code></pre>\n\n<p>But the line puts <code>puts \"putResponse.body is #{@putResponse.body}\"</code> doesn't work. This is what it prints out:</p>\n\n<pre><code>putResponse.body is {\"errors\":[{\"message\":\"The specified resource does not exist.\"}],\"error_report_id\":443}\n</code></pre>\n\n<p>So what's the problem here? (I'm using HTTParty to make my PUT request)</p>\n\n<p>EDIT:</p>\n\n<p>Here's how I got the host and header:</p>\n\n<pre><code>config = JSON.parse(File.read('config.json'))\nputs \"config: #{config}\"\n\naccess_token = config['canvas']['access_token']\nputs \"access_token: #{access_token}\"\n\nhost = config['canvas']['host']\nputs \"host: #{host}\"\n\nbase_url = 'http://#{host}/api/v1/users/self/custom_data/program_of_study'\nputs \"base_url: #{base_url}\"\n\nheader = {'Authorization': 'Bearer ' \"#{$access_token}\", \"Content-Type\" =&gt; 'application/json', 'Accept' =&gt; 'application/json'}\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "pg-search"], "comments": [{"owner": {"reputation": 1540, "user_id": 1245440, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/8a2a573a8585a0e04eecd822955e9fbe?s=128&d=identicon&r=PG", "display_name": "Pramod Shinde", "link": "https://stackoverflow.com/users/1245440/pramod-shinde"}, "edited": false, "score": 0, "creation_date": 1548849605, "post_id": 54438891, "comment_id": 95689379, "body": "Curious why are you adding <code>associated_against</code> and <code>against</code> for same columns?"}, {"owner": {"reputation": 1099, "user_id": 1967868, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/38a7404c188b85337c9613bc2cc7cd93?s=128&d=identicon&r=PG", "display_name": "zauzaj", "link": "https://stackoverflow.com/users/1967868/zauzaj"}, "edited": false, "score": 0, "creation_date": 1548852556, "post_id": 54438891, "comment_id": 95691032, "body": "Could you show search logs ?"}, {"owner": {"reputation": 671, "user_id": 3445936, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cd8z6.jpg?s=128&g=1", "display_name": "Rohit Lingayat", "link": "https://stackoverflow.com/users/3445936/rohit-lingayat"}, "edited": false, "score": 0, "creation_date": 1548852618, "post_id": 54438891, "comment_id": 95691067, "body": "can you try with <code>multisearch_options</code> ?"}], "owner": {"user_type": "does_not_exist", "display_name": "user10829318"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 75, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1548856033, "creation_date": 1548845690, "last_edit_date": 1548856033, "question_id": 54438891, "link": "https://stackoverflow.com/questions/54438891/pg-search-scope-by-two-different-column-in-one-table", "title": "pg_search_scope by two different column in one table", "body": "<p>Why search by the second column from the current table doesn't work? Does anyone know how to fix that?</p>\n\n<p><strong>model.rb</strong></p>\n\n<pre><code>  pg_search_scope :search,\n              :against =&gt; [:name, :phone_number],\n              using: { tsearch: { prefix: true, any_word: true } },\n              associated_against: {\n                :client =&gt; [:name, :phone_number]\n              }\n</code></pre>\n\n<p><strong>console_log</strong></p>\n\n<pre><code>2.5.3 :060 &gt; Client.search(\"Davis, Lorentzz\")\n\n=&gt; #&lt;ActiveRecord::Relation [#&lt;Client id: 100, company_id: 8, name: \"Davis, Lorentzz\", email: \"gdrgrd@fgrd.com\", variety: \"person\", active: nil, created_at: \"2019-01-29 11:50:17\", updated_at: \"2019-01-29 11:50:20\", phone_number: \"1456455453\", organisation: \"\", office_note: \"\", special_note: \"Special Davis\"&gt;]&gt; \n\n2.5.3 :061 &gt; Client.search(\"1456455453\")\n\n=&gt; #&lt;ActiveRecord::Relation []&gt; \n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 85, "user_id": 2444866, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cebee60c2f5da3be00f96482e65a1072?s=128&d=identicon&r=PG", "display_name": "tommysvr", "link": "https://stackoverflow.com/users/2444866/tommysvr"}, "edited": false, "score": 0, "creation_date": 1548848130, "post_id": 54439157, "comment_id": 95688514, "body": "Thanks! That&#39;s a great start. I&#39;m now showing just admins in the dropdown  <code>&lt;%= f.collection_select :user_id, User.where(admin: &#39;true&#39;), :id, :username %&gt;</code>  And yep, posts belongs_to users. How do I get that to update the user?"}, {"owner": {"reputation": 13091, "user_id": 385532, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/082cc70175616a7f63b134a741c5d6e3?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/385532/matt"}, "reply_to_user": {"reputation": 85, "user_id": 2444866, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cebee60c2f5da3be00f96482e65a1072?s=128&d=identicon&r=PG", "display_name": "tommysvr", "link": "https://stackoverflow.com/users/2444866/tommysvr"}, "edited": false, "score": 0, "creation_date": 1548848831, "post_id": 54439157, "comment_id": 95688930, "body": "So long as user_id is included in <code>post_params</code>, <code>@post.update(post_params)</code> will update the user."}, {"owner": {"reputation": 85, "user_id": 2444866, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cebee60c2f5da3be00f96482e65a1072?s=128&d=identicon&r=PG", "display_name": "tommysvr", "link": "https://stackoverflow.com/users/2444866/tommysvr"}, "edited": false, "score": 0, "creation_date": 1548850808, "post_id": 54439157, "comment_id": 95690093, "body": "That did it! Amazing! Thanks so much."}], "tags": [], "owner": {"reputation": 13091, "user_id": 385532, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/082cc70175616a7f63b134a741c5d6e3?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/385532/matt"}, "is_accepted": true, "score": 0, "last_activity_date": 1548846447, "creation_date": 1548846447, "answer_id": 54439157, "question_id": 54438508, "link": "https://stackoverflow.com/questions/54438508/edit-author-of-an-article/54439157#54439157", "title": "Edit author of an article", "body": "<p>How are the relationships defined in the models. If your post belongs to users, then use a dropdown control in your form: </p>\n\n<pre><code>f.collection_select :user_id, User.whateverscope, :id, :text_method\n</code></pre>\n\n<p>and when the form is submitted rails will do the rest. </p>\n\n<p>If you have something different set up, then post your models, your strong_params methods, etc.</p>\n"}], "owner": {"reputation": 85, "user_id": 2444866, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cebee60c2f5da3be00f96482e65a1072?s=128&d=identicon&r=PG", "display_name": "tommysvr", "link": "https://stackoverflow.com/users/2444866/tommysvr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 0, "accepted_answer_id": 54439157, "answer_count": 1, "score": 0, "last_activity_date": 1548846447, "creation_date": 1548844480, "question_id": 54438508, "link": "https://stackoverflow.com/questions/54438508/edit-author-of-an-article", "title": "Edit author of an article", "body": "<p>I have post which belongs_to users, and would like an option when editing to be able to change the user that post is associated with.</p>\n\n<p>I've made a start, but I am very new to Rails and a bit stuck.</p>\n\n<p>I started in my post_controller.rb.</p>\n\n<pre><code>def update\n    @post.user = associated_user\n    if @post.update(post_params)\n        flash[:notice] = \"Post was successfully updated\"\n        redirect_to edit_post_path(@post)\n    else\n        render 'edit'\n    end\nend\n</code></pre>\n\n<p>I've defined the method associated_user in my application_controller.rb (I want to do this for a more than just articles.)</p>\n\n<pre><code>def associated_user\n    @associated_user ||= User.find(session[:user_id]) if session[:user_id]\nend\n</code></pre>\n\n<p>I understand that this code is wrong - I don't want it to get the logged in user, I want to get it from the field I've set in my form view.</p>\n\n<pre><code>&lt;%= f.text_field :associated_user, class: \"form-control\", placeholder: \"Edit Author\" %&gt;\n</code></pre>\n\n<p>Ideally this form field would be a drop down listing all users with a certain status (a boolean I have already set in the users table.)</p>\n\n<p>I'm not sure how far away I am, but if any one is able to offer some guidance, that would be greatly appreciated!</p>\n"}, {"tags": ["ruby", "logstash", "logstash-grok", "logstash-configuration"], "comments": [{"owner": {"reputation": 3887, "user_id": 6113627, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zNUc0.jpg?s=128&g=1", "display_name": "baudsp", "link": "https://stackoverflow.com/users/6113627/baudsp"}, "edited": false, "score": 1, "creation_date": 1548844826, "post_id": 54437424, "comment_id": 95686488, "body": "You can use <code>event.set</code> to add a new field to the logstash event. See <a href=\"https://www.elastic.co/guide/en/logstash/6.6/event-api.html\" rel=\"nofollow noreferrer\">elastic.co/guide/en/logstash/6.6/event-api.html</a>"}], "answers": [{"tags": [], "owner": {"reputation": 133, "user_id": 9681870, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OCSwy0XN5uM/AAAAAAAAAAI/AAAAAAAAHA0/njXA1IxSPhc/photo.jpg?sz=128", "display_name": "Bence Szabari", "link": "https://stackoverflow.com/users/9681870/bence-szabari"}, "is_accepted": true, "score": 0, "last_activity_date": 1549022211, "creation_date": 1549022211, "answer_id": 54479031, "question_id": 54437424, "link": "https://stackoverflow.com/questions/54437424/create-a-new-field-with-ruby-filter/54479031#54479031", "title": "Create a new field with ruby filter", "body": "<p>Solution is:</p>\n\n<pre><code>event.set('field_name', field_value)\n</code></pre>\n"}], "owner": {"reputation": 133, "user_id": 9681870, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OCSwy0XN5uM/AAAAAAAAAAI/AAAAAAAAHA0/njXA1IxSPhc/photo.jpg?sz=128", "display_name": "Bence Szabari", "link": "https://stackoverflow.com/users/9681870/bence-szabari"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 876, "favorite_count": 0, "accepted_answer_id": 54479031, "answer_count": 1, "score": 0, "last_activity_date": 1549022211, "creation_date": 1548841139, "question_id": 54437424, "link": "https://stackoverflow.com/questions/54437424/create-a-new-field-with-ruby-filter", "title": "Create a new field with ruby filter", "body": "<p>So here the params is a hash, and I would like to concatenate all of the keys and store it to a new field, how can I achieve that? I found that is it possible to use inline ruby code in the configuration file but, I have no idea how to assign the return value of the concat. </p>\n\n<pre><code>grok { match =&gt; { \"request\" =&gt; [ \"url\", \"%{URIPATH:url_path}%{URIPARAM:url_params}?\" ]} }\n  urldecode{ field =&gt; \"url_path\" }\n  mutate { gsub =&gt;  [\"url_params\",\"\\?\",\"\" ] }\n  kv {\n    field_split =&gt; \"&amp;\"\n    source =&gt; \"url_params\"\n    target =&gt; \"params\"\n  }\n  urldecode{ field =&gt; \"params\" }\n\n  ruby {\n    code =&gt; 'pattern= params.keys.join(\",\")'\n    #Pattern should be the new field that contains the key, separated by comma\n  }\n</code></pre>\n\n<p>Expected result should be:</p>\n\n<p>pattern = \"param1,param2,param3 ... and so on\"</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "active-model-serializers"], "comments": [{"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1548842001, "post_id": 54437415, "comment_id": 95684749, "body": "How exactly do you dump your models into YAML. Please show your code!"}, {"owner": {"reputation": 5974, "user_id": 431715, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/d1b099b5fa9eddc1b9a2d01a99b4b804?s=128&d=identicon&r=PG", "display_name": "Marcus Riemer", "link": "https://stackoverflow.com/users/431715/marcus-riemer"}, "reply_to_user": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1548846460, "post_id": 54437415, "comment_id": 95687525, "body": "I am literally using <code>YAML::dump(myModel, file)</code>"}], "owner": {"reputation": 5974, "user_id": 431715, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/d1b099b5fa9eddc1b9a2d01a99b4b804?s=128&d=identicon&r=PG", "display_name": "Marcus Riemer", "link": "https://stackoverflow.com/users/431715/marcus-riemer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 68, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1550237235, "creation_date": 1548841119, "last_edit_date": 1550237235, "question_id": 54437415, "link": "https://stackoverflow.com/questions/54437415/where-to-change-formatting-of-active-model-yaml-representation", "title": "Where to change formatting of Active Model YAML representation?", "body": "<p>I am using <code>YAML::dump</code> to have a (more or less) simple way to track changes to a database in a git repository. Effectively this means I \"dump\" parts of the databases to a set of YAML files, commit them and can then track them quite easily. In general this works fine and I am happy with the whole process.</p>\n\n<p>The only problem are embedded <code>JSON</code> documents. These store aspects of the data that simply don't work out nicely in a relational model and are sometimes quite complex. <code>YAML::dump</code> serializes them as a single-line string (which seems optimal from a storage point of view) but is horrible for diffing. The following example shows the output I currently have:</p>\n\n<pre><code>--- !ruby/object:Grammar\nconcise_attributes:\n- !ruby/object:ActiveModel::Attribute::FromDatabase\n  name: name\n  value_before_type_cast: Dynamisches XML\n- !ruby/object:ActiveModel::Attribute::FromDatabase\n  name: slug\n  value_before_type_cast: dxml\n- !ruby/object:ActiveModel::Attribute::FromDatabase\n  name: id\n  value_before_type_cast: 7e333dff-6d1c-4042-aaa5-0cdf2cfeed7e\n- !ruby/object:ActiveModel::Attribute::FromDatabase\n  name: model\n  value_before_type_cast: '{\"root\": \"element\", \"types\": {\"if\": {\"type\": \"concrete\",\n    \"attributes\": [{\"name\": \"condition\", \"type\": \"allowed\", \"nodeTypes\": [\"expr\"]},\n    {\"name\": \"body\", \"type\": \"allowed\", \"nodeTypes\": [{\"occurs\": \"*\", \"nodeType\":\n    \"element\"}, {\"occurs\": \"*\", \"nodeType\": \"text\"}, {\"occurs\": \"*\", \"nodeType\": \"interpolate\"},\n    {\"occurs\": \"*\", \"nodeType\": \"if\"}]}]}, \"expr\": {\"type\": \"oneOf\", \"oneOf\": [\"exprVar\",\n    \"exprConst\", \"exprBinary\"]}, \"text\": {\"type\": \"concrete\", \"attributes\": [{\"base\":\n    \"string\", \"name\": \"value\", \"type\": \"property\"}]}, \"element\": {\"type\": \"concrete\",\n    \"attributes\": [{\"name\": \"tag-open-begin\", \"type\": \"terminal\", \"symbol\": \"&lt;\"},\n    {\"base\": \"string\", \"name\": \"name\", \"type\": \"property\"}, {\"name\": \"attributes\",\n    \"type\": \"allowed\", \"nodeTypes\": [{\"occurs\": \"*\", \"nodeType\": \"attribute\"}]}, {\"name\":\n    \"tag-open-end\", \"type\": \"terminal\", \"symbol\": \"&gt;\"}, {\"name\": \"elements\", \"type\":\n    \"allowed\", \"nodeTypes\": [{\"occurs\": \"*\", \"nodeType\": \"element\"}, {\"occurs\": \"*\",\n    \"nodeType\": \"text\"}, {\"occurs\": \"*\", \"nodeType\": \"interpolate\"}, {\"occurs\": \"*\",\n    \"nodeType\": \"if\"}]}, {\"name\": \"tag-close\", \"type\": \"terminal\", \"symbol\": \"&lt;ende/&gt;\"}]},\n    \"exprVar\": {\"type\": \"concrete\", \"attributes\": [{\"base\": \"string\", \"name\": \"name\",\n    \"type\": \"property\"}]}, \"attribute\": {\"type\": \"concrete\", \"attributes\": [{\"base\":\n    \"string\", \"name\": \"name\", \"type\": \"property\"}, {\"name\": \"equals\", \"type\": \"terminal\",\n    \"symbol\": \"=\"}, {\"name\": \"quot-begin\", \"type\": \"terminal\", \"symbol\": \"\\\"\"}, {\"name\":\n    \"value\", \"type\": \"allowed\", \"nodeTypes\": [{\"occurs\": \"*\", \"nodeType\": \"text\"},\n    {\"occurs\": \"*\", \"nodeType\": \"interpolate\"}]}, {\"name\": \"quot-end\", \"type\": \"terminal\",\n    \"symbol\": \"\\\"\"}]}, \"exprConst\": {\"type\": \"concrete\", \"attributes\": [{\"base\": \"string\",\n    \"name\": \"name\", \"type\": \"property\"}]}, \"exprBinary\": {\"type\": \"concrete\", \"attributes\":\n    [{\"name\": \"lhs\", \"type\": \"allowed\", \"nodeTypes\": [\"expr\"]}, {\"name\": \"operator\",\n    \"type\": \"allowed\", \"nodeTypes\": [\"binaryOperator\"]}, {\"name\": \"rhs\", \"type\": \"allowed\",\n    \"nodeTypes\": [\"expr\"]}]}, \"interpolate\": {\"type\": \"concrete\", \"attributes\": [{\"name\":\n    \"expr\", \"type\": \"allowed\", \"nodeTypes\": [\"expr\"]}]}, \"binaryOperator\": {\"type\":\n    \"concrete\", \"attributes\": [{\"base\": \"string\", \"name\": \"operator\", \"type\": \"property\"}]}}}'\n- !ruby/object:ActiveModel::Attribute::FromDatabase\n  name: created_at\n  value_before_type_cast: '2018-05-15 18:48:12.004676'\n- !ruby/object:ActiveModel::Attribute::FromDatabase\n  name: updated_at\n  value_before_type_cast: '2018-12-20 15:39:19.237639'\n- !ruby/object:ActiveModel::Attribute::FromDatabase\n  name: programming_language_id\n  value_before_type_cast: dxml-eruby\n- !ruby/object:ActiveModel::Attribute::FromDatabase\n  name: technical_name\n  value_before_type_cast: dxml\nnew_record: false\nactive_record_yaml_version: 2\n</code></pre>\n\n<p>A \"typical\" diff (even though there were only minor changes), then looks something like this:</p>\n\n<p><a href=\"https://i.stack.imgur.com/C5JeG.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/C5JeG.png\" alt=\"Unreadable Diff\"></a></p>\n\n<p>So I would prefer to store a nicely formatted string representation of the <code>model</code>-attribute instead.</p>\n\n<p>I am suspecting that there is some \"Rails magic\" going on somewhere behind the scenes. And I do hope there is a API to influence the formatting. But the following things did not work out for me so far:</p>\n\n<ul>\n<li>Define a matching <code>*_before_type_cast</code> method on my model class. This method is not called by <code>YAML::dump</code>.</li>\n<li>Define <code>to_yaml</code> on my model class. This method is not called either.</li>\n<li>I found out about <a href=\"https://www.rubydoc.info/github/rails/rails/master/ActiveModel/AttributeSet/YAMLEncoder\" rel=\"nofollow noreferrer\"><code>ActiveModel::AttributeSet::YAMLEncoder</code></a> but couldn't figure out how / where this should be used. Or for that matter: How <code>YAML::dump</code> ends up using it somehow. It does seem to be responsible for the general format I see.</li>\n</ul>\n"}, {"tags": ["ruby-on-rails", "ruby", "regex"], "answers": [{"comments": [{"owner": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "edited": false, "score": 1, "creation_date": 1548838564, "post_id": 54436635, "comment_id": 95682576, "body": "Negated character set is generally faster than lazy quantifier, I wrote about it: <a href=\"https://medium.com/textmaster-engineering/performance-of-regular-expressions-81371f569698\" rel=\"nofollow noreferrer\">medium.com/textmaster-engineering/&hellip;</a>"}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "reply_to_user": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "edited": false, "score": 0, "creation_date": 1548838659, "post_id": 54436635, "comment_id": 95682626, "body": "@mrzasa Yes, but you can use negated character set only when the pattern you are avoiding is single-character long."}, {"owner": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "edited": false, "score": 0, "creation_date": 1548838694, "post_id": 54436635, "comment_id": 95682654, "body": "Yup, that&#39;s why I match whole tags in my answer."}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "reply_to_user": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "edited": false, "score": 0, "creation_date": 1548839081, "post_id": 54436635, "comment_id": 95682903, "body": "@mrzasa Nope, please see my comment to your answer."}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": true, "score": 2, "last_activity_date": 1548838466, "creation_date": 1548838466, "answer_id": 54436635, "question_id": 54436578, "link": "https://stackoverflow.com/questions/54436578/remove-substring-from-string-base-on-two-strings-or-parameters-in-ruby/54436635#54436635", "title": "Remove SubString from String base on two strings or parameters in Ruby", "body": "<p><a href=\"https://ruby-doc.org/core/String.html#method-i-gsub\" rel=\"nofollow noreferrer\"><code>String#gsub</code></a> would do:</p>\n\n<pre><code>\"&lt;p&gt;Apple.&lt;/p&gt;&lt;remove&gt;Lettuce.&lt;/remove&gt;&lt;span&gt;Orange.&lt;/span&gt;\".\n  gsub /&lt;remove.*?\\/remove&gt;/, ''\n#\u21d2 \"&lt;p&gt;Apple.&lt;/p&gt;&lt;span&gt;Orange.&lt;/span&gt;\"\n</code></pre>\n"}], "owner": {"reputation": 788, "user_id": 2561325, "user_type": "registered", "profile_image": "https://graph.facebook.com/100004097377441/picture?type=large", "display_name": "Ricardo Green", "link": "https://stackoverflow.com/users/2561325/ricardo-green"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "accepted_answer_id": 54436635, "answer_count": 1, "score": -2, "last_activity_date": 1548838647, "creation_date": 1548838275, "last_edit_date": 1548838647, "question_id": 54436578, "link": "https://stackoverflow.com/questions/54436578/remove-substring-from-string-base-on-two-strings-or-parameters-in-ruby", "title": "Remove SubString from String base on two strings or parameters in Ruby", "body": "<p>Say I have the following string:</p>\n\n<p><code>&lt;p&gt;Apple.&lt;/p&gt;&lt;remove&gt;Lettuce.&lt;/remove&gt;&lt;span&gt;Orange.&lt;/span&gt;</code></p>\n\n<p>I would like the output to be:</p>\n\n<p><code>&lt;p&gt;Apple.&lt;/p&gt;&lt;span&gt;Orange.&lt;/span&gt;</code></p>\n\n<p>So I am trying to build a method like this:</p>\n\n<pre><code>def remove_this_block('&lt;remove','/remove&gt;')\n  # some code here\nend\n</code></pre>\n\n<p>I've tried <code>gsub</code>, <code>strip_tags</code>, etc... Nothing seems to work.</p>\n\n<p>Please help.</p>\n"}, {"tags": ["ruby", "csv", "bigdata"], "comments": [{"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 1, "creation_date": 1548833505, "post_id": 54435079, "comment_id": 95680070, "body": "Can you please add a short CSV example that illustrates your problem and the expected output?"}, {"owner": {"reputation": 25, "user_id": 1793514, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/5ea1efa54d829f283916defb81f7bc33?s=128&d=identicon&r=PG", "display_name": "user1793514", "link": "https://stackoverflow.com/users/1793514/user1793514"}, "reply_to_user": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1548834869, "post_id": 54435079, "comment_id": 95680713, "body": "1,243242,hello &quot;world&quot;"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 1, "creation_date": 1548835222, "post_id": 54435079, "comment_id": 95680865, "body": "The provided example does not contain fields with <i>both</i> single and double quotes. Please carefully provide the correct example."}, {"owner": {"reputation": 25, "user_id": 1793514, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/5ea1efa54d829f283916defb81f7bc33?s=128&d=identicon&r=PG", "display_name": "user1793514", "link": "https://stackoverflow.com/users/1793514/user1793514"}, "edited": false, "score": 0, "creation_date": 1548836039, "post_id": 54435079, "comment_id": 95681241, "body": "The above code can handle single quotes but not double, but ok, here is another example: 1,243242,hello &quot;world&quot; 1,243242,hey \u2018there\u2019 2,34343,bye bye"}], "answers": [{"tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": true, "score": 1, "last_activity_date": 1548835597, "creation_date": 1548835597, "answer_id": 54435852, "question_id": 54435079, "link": "https://stackoverflow.com/questions/54435079/read-csv-files-with-both-double-and-single-quote-variables/54435852#54435852", "title": "Read CSV files with both Double and Single quote variables", "body": "<p>Here is a trick: just provide a <code>quote_char</code> parameter with <em>definitely inexisting in the input symbol</em>:</p>\n\n<pre><code>CSV.new(%|\"foo'bar\",'foo\"bar','foo bar',\"foo bar\"|, quote_char: ?*).read\n#\u21d2 [[\"\\\"foo'bar\\\"\", \"'foo\\\"bar'\", \"'foo bar'\", \"\\\"foo bar\\\"\"]]\n</code></pre>\n"}], "owner": {"reputation": 25, "user_id": 1793514, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/5ea1efa54d829f283916defb81f7bc33?s=128&d=identicon&r=PG", "display_name": "user1793514", "link": "https://stackoverflow.com/users/1793514/user1793514"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 118, "favorite_count": 0, "accepted_answer_id": 54435852, "answer_count": 1, "score": 0, "last_activity_date": 1548835597, "creation_date": 1548832334, "question_id": 54435079, "link": "https://stackoverflow.com/questions/54435079/read-csv-files-with-both-double-and-single-quote-variables", "title": "Read CSV files with both Double and Single quote variables", "body": "<p>I am working with very large files (e.g. 1GB+) and want to read in a string variable from a csv that potentially has a single or a double quote within the variable. </p>\n\n<p>Is there a way to do this quickly an efficiently upon opening the CSV? Or is the most efficient way to use the quote_char variable for one type of quote and escape the other type of quote in the string?</p>\n\n<pre><code>CSV.foreach('file.csv', :quote_char=&gt;\"'\", :force_quotes =&gt; false) do |row|\n     string_value = row[0]\nend\n</code></pre>\n"}, {"tags": ["ruby"], "answers": [{"comments": [{"owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "edited": false, "score": 0, "creation_date": 1548830443, "post_id": 54434550, "comment_id": 95678590, "body": "He want to update existing array, and not to retrieve expected, this is good one!"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1548841730, "post_id": 54434550, "comment_id": 95684581, "body": "...or <code>arr.delete_if { (n -= 1) &gt; -2 }</code>.  If the original value of <code>n</code> is needed after, <code>n += arr.size</code>."}], "tags": [], "owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "is_accepted": false, "score": 4, "last_activity_date": 1548830546, "last_edit_date": 1548830546, "creation_date": 1548830051, "answer_id": 54434550, "question_id": 54434523, "link": "https://stackoverflow.com/questions/54434523/how-to-remove-all-the-elements-after-a-particular-index/54434550#54434550", "title": "How to remove all the elements after a particular index", "body": "<p><code>Array#[]=</code> operator comes in handy:</p>\n\n<pre><code>arr[n+1 .. -1] = []\n</code></pre>\n\n<p>In Ruby 2.6, you can also use endless ranges:</p>\n\n<pre><code>arr[n+1 ..] = []\n</code></pre>\n\n<p>Note that your code is slow, as it searches the array for every element and is thus <code>O(n^2)</code>, but also wrong if the array contains repeating elements. For example, with <code>arr = %w(10 20 30 10 20)</code>, your code does not change the array. This would be your code, only faster and correct (<code>O(n)</code>; though the <code>#[]=</code> solution above is even faster and more straightforward):</p>\n\n<pre><code>arr.delete_if.with_index { |num, idx| idx &gt; n }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "edited": false, "score": 2, "creation_date": 1548830314, "post_id": 54434610, "comment_id": 95678548, "body": "Note that this does not delete elements; it creates a new array without them (with <code>arr</code> being unchanged)."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 2, "creation_date": 1548831087, "post_id": 54434610, "comment_id": 95678896, "body": "To change <code>arr</code> in place (without changing its <code>object_id</code>) I believe you want <code>arr.replace(arr[0,2])</code>. If, for example, <code>arr</code> were an argument of a method, you would need <code>replace</code> to change <code>arr</code> in the calling method."}, {"owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "edited": false, "score": 2, "creation_date": 1548832616, "post_id": 54434610, "comment_id": 95679623, "body": "&quot;Array can be updated without initialising new one as follow,&quot; - nitpick, but you&#39;re still initialising a new array (then updating the original array&#39;s contents with the contents of the new one, then forgetting the new one). :) But it does do what OP wanted. +1"}, {"owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "edited": false, "score": 0, "creation_date": 1548832784, "post_id": 54434610, "comment_id": 95679685, "body": "Yes noted :P You remind same I missed with string in Java"}], "tags": [], "owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "is_accepted": false, "score": 2, "last_activity_date": 1548831452, "last_edit_date": 1548831452, "creation_date": 1548830289, "answer_id": 54434610, "question_id": 54434523, "link": "https://stackoverflow.com/questions/54434523/how-to-remove-all-the-elements-after-a-particular-index/54434610#54434610", "title": "How to remove all the elements after a particular index", "body": "<p>You are deleting elements having index greater than <code>n=2</code> &amp; get rest of array where you can simply get it as,</p>\n\n<pre><code>arr = arr[0..2]\n</code></pre>\n\n<p>Above will regenerate new array and <code>arr</code> reference will point to it.</p>\n\n<p><strong>Update:</strong> going little deep with point claimed by <em>Cary Swoveland</em> in comment,</p>\n\n<p>Array can be updated without initialising new one as follow,</p>\n\n<pre><code># This one will have same object id or we can say, do not point to new array\narr.replace(arr[0,3])  \n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 630, "user_id": 5763672, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a3ca5c235400320ab800200c6677574?s=128&d=identicon&r=PG", "display_name": "Sebastian Scholl", "link": "https://stackoverflow.com/users/5763672/sebastian-scholl"}, "edited": false, "score": 0, "creation_date": 1548899184, "post_id": 54435688, "comment_id": 95712787, "body": "This is the best answer, as it slices the needed objects and modifies the array in memory."}], "tags": [], "owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "is_accepted": false, "score": 3, "last_activity_date": 1548835219, "last_edit_date": 1548835219, "creation_date": 1548834914, "answer_id": 54435688, "question_id": 54434523, "link": "https://stackoverflow.com/questions/54434523/how-to-remove-all-the-elements-after-a-particular-index/54435688#54435688", "title": "How to remove all the elements after a particular index", "body": "<p>You can use <a href=\"http://ruby-doc.org/core-2.6/Array.html#method-i-slice-21\" rel=\"nofollow noreferrer\"><code>Array#slice!</code></a> to remove elements within a certain index range, e.g.:</p>\n\n<pre><code>arr = %w(10 20 30 40 50)\n\narr.slice!(3..-1)   #=&gt; [\"40\", \"50\"]\narr                 #=&gt; [\"10\", \"20\", \"30\"]\n</code></pre>\n\n<p>Note that <code>slice!</code> also returns the removed portion.</p>\n"}], "owner": {"reputation": 765, "user_id": 9015957, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xwHPf.jpg?s=128&g=1", "display_name": "vikas95prasad", "link": "https://stackoverflow.com/users/9015957/vikas95prasad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 360, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1548835219, "creation_date": 1548829890, "last_edit_date": 1548831572, "question_id": 54434523, "link": "https://stackoverflow.com/questions/54434523/how-to-remove-all-the-elements-after-a-particular-index", "title": "How to remove all the elements after a particular index", "body": "<p>Given:</p>\n\n<pre><code>n = 2\narr = %w(10 20 30 40 50)\n</code></pre>\n\n<p>This is a way to remove all the array elements after index <code>n</code>:</p>\n\n<pre><code>arr.delete_if {|num| arr.index(num) &gt; n }\n# =&gt; [\"10\", \"20\", \"30\"]\n</code></pre>\n\n<p>Is there any other way to remove all the elements from an array without iterating over and comparing the condition?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "minitest"], "comments": [{"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1548835767, "post_id": 54434037, "comment_id": 95681117, "body": "Just a hunch, but I wonder if minitest/spec is incompatible with the setup/teardown hooks ... if you replace those with before/after blocks in the <code>ActiveSupport::TestCase</code> definition does it work?"}, {"owner": {"reputation": 53, "user_id": 3680322, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8b3595a86371b43678350ac2bdc9f40?s=128&d=identicon&r=PG&f=1", "display_name": "Alice Verner", "link": "https://stackoverflow.com/users/3680322/alice-verner"}, "reply_to_user": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1548836596, "post_id": 54434037, "comment_id": 95681499, "body": "@maxpleaner it is not working, i get this error <code>&#39;&lt;class:TestCase&gt;&#39;: undefined method &#39;before&#39; for ActiveSupport::TestCase:Class (NoMethodError) </code>"}], "answers": [{"tags": [], "owner": {"reputation": 99, "user_id": 1610127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/935fe41601ffe94abb5b19c20367e508?s=128&d=identicon&r=PG", "display_name": "user1610127", "link": "https://stackoverflow.com/users/1610127/user1610127"}, "is_accepted": true, "score": 2, "last_activity_date": 1548847522, "last_edit_date": 1548847522, "creation_date": 1548846491, "answer_id": 54439178, "question_id": 54434037, "link": "https://stackoverflow.com/questions/54434037/minitest-and-setup-teardown-hooks/54439178#54439178", "title": "Minitest and setup/teardown hooks", "body": "<p>Try adding the following to your <code>test_helper.rb</code>:</p>\n\n<pre><code>class Minitest::Spec\n  before :each do\n    DatabaseCleaner.start\n  end\n\n  after :each do\n    DatabaseCleaner.clean\n  end\nend\n</code></pre>\n\n<p>Or, if you're using <code>minitest-around</code> gem:</p>\n\n<pre><code>class Minitest::Spec\n  around do |tests|\n    DatabaseCleaner.cleaning(&amp;tests)\n  end\nend\n</code></pre>\n\n<p>Important here is the use <code>Minitest::Spec</code> class instead of <code>ActiveSupport::TestCase</code>.</p>\n\n<p>See <a href=\"https://github.com/DatabaseCleaner/database_cleaner#minitest-example\" rel=\"nofollow noreferrer\">database cleaner docs</a> for more info.</p>\n"}], "owner": {"reputation": 53, "user_id": 3680322, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8b3595a86371b43678350ac2bdc9f40?s=128&d=identicon&r=PG&f=1", "display_name": "Alice Verner", "link": "https://stackoverflow.com/users/3680322/alice-verner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 951, "favorite_count": 0, "accepted_answer_id": 54439178, "answer_count": 1, "score": 5, "last_activity_date": 1548847522, "creation_date": 1548827325, "last_edit_date": 1548828361, "question_id": 54434037, "link": "https://stackoverflow.com/questions/54434037/minitest-and-setup-teardown-hooks", "title": "Minitest and setup/teardown hooks", "body": "<p>I have the following code in <strong><em>test_helper</em></strong></p>\n\n<pre><code>require \"minitest/spec\"\nrequire \"minitest/autorun\"\nrequire \"database_cleaner\"\n\nclass ActiveSupport::TestCase\n  DatabaseCleaner.strategy = :deletion\n\n  include Minitest::Spec::DSL\n\n  setup { DatabaseCleaner.start }\n  teardown { DatabaseCleaner.clean }\nend\n</code></pre>\n\n<p>And if I write such a test</p>\n\n<pre><code>class MyTest &lt; ActiveSupport::TestCase\n  test 'test' do\n    #some code\n  end\nend\n</code></pre>\n\n<p>setup and teardown are executed</p>\n\n<p>But if I write test like this</p>\n\n<pre><code>class MyTest &lt; ActiveSupport::TestCase\n  describe 'some test'\n    before do\n       @user = FactoryBot.create(:user)\n    end\n\n    it 'first test' do\n      # some code\n    end\n\n    it 'second test' do\n      # some code\n    end\n  end\nend\n</code></pre>\n\n<p>setup and teardown are not executed. Why? Can I fix it?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec", "sinatra"], "comments": [{"owner": {"reputation": 928, "user_id": 2724228, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uGNiO.jpg?s=128&g=1", "display_name": "Manoj Menon", "link": "https://stackoverflow.com/users/2724228/manoj-menon"}, "edited": false, "score": 0, "creation_date": 1548827643, "post_id": 54434027, "comment_id": 95677583, "body": "can you inspect output of last_response in rspec code"}, {"owner": {"reputation": 49, "user_id": 10062681, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e93fa197d322f71956b14516217fe561?s=128&d=identicon&r=PG&f=1", "display_name": "Kenkuts", "link": "https://stackoverflow.com/users/10062681/kenkuts"}, "reply_to_user": {"reputation": 928, "user_id": 2724228, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uGNiO.jpg?s=128&g=1", "display_name": "Manoj Menon", "link": "https://stackoverflow.com/users/2724228/manoj-menon"}, "edited": false, "score": 0, "creation_date": 1548828076, "post_id": 54434027, "comment_id": 95677730, "body": "I don&#39;t know what you&#39;re looking for but <a href=\"https://pastebin.com/ALBCSb5P\" rel=\"nofollow noreferrer\">pastebin.com/ALBCSb5P</a>"}, {"owner": {"reputation": 49, "user_id": 10062681, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e93fa197d322f71956b14516217fe561?s=128&d=identicon&r=PG&f=1", "display_name": "Kenkuts", "link": "https://stackoverflow.com/users/10062681/kenkuts"}, "reply_to_user": {"reputation": 928, "user_id": 2724228, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uGNiO.jpg?s=128&g=1", "display_name": "Manoj Menon", "link": "https://stackoverflow.com/users/2724228/manoj-menon"}, "edited": false, "score": 0, "creation_date": 1548828235, "post_id": 54434027, "comment_id": 95677786, "body": "Nevermind I figured it out."}], "answers": [{"tags": [], "owner": {"reputation": 49, "user_id": 10062681, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e93fa197d322f71956b14516217fe561?s=128&d=identicon&r=PG&f=1", "display_name": "Kenkuts", "link": "https://stackoverflow.com/users/10062681/kenkuts"}, "is_accepted": false, "score": 1, "last_activity_date": 1548828432, "creation_date": 1548828432, "answer_id": 54434251, "question_id": 54434027, "link": "https://stackoverflow.com/questions/54434027/rspec-not-testing-passing-tests-in-regards-to-redirect/54434251#54434251", "title": "Rspec not testing passing tests in regards to redirect", "body": "<p>Because the test was asking for post <code>/signup</code> and instead of using <code>/signup</code> as the route method name after the user posted the information to create the account I used <code>/users</code>. This caused the error.</p>\n"}], "owner": {"reputation": 49, "user_id": 10062681, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e93fa197d322f71956b14516217fe561?s=128&d=identicon&r=PG&f=1", "display_name": "Kenkuts", "link": "https://stackoverflow.com/users/10062681/kenkuts"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 33, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1548828432, "creation_date": 1548827257, "question_id": 54434027, "link": "https://stackoverflow.com/questions/54434027/rspec-not-testing-passing-tests-in-regards-to-redirect", "title": "Rspec not testing passing tests in regards to redirect", "body": "<p>I am in a bootcamp and I cannot seem to pass this test. The project is creating your bootleg version of twitter and the test is:</p>\n\n<pre><code>it 'signup directs user to twitter index' do\n  params = {\n    :username =&gt; \"skittles123\",\n    :email =&gt; \"skittles@aol.com\",\n    :password =&gt; \"rainbows\"\n  }\n  post '/signup', params\n  expect(last_response.location).to include(\"/tweets\")\nend\n</code></pre>\n\n<p>My controller that handles this test is below:</p>\n\n<pre><code> post '/users' do\n    @user = User.create(params[:user])\n    @error = @user.errors.full_messages\n\n    unless @error == []\n      redirect to '/signup'\n    else\n      session[:user_id] = @user.id\n      redirect to '/tweets'\n    end\n  end\n</code></pre>\n\n<p>Basically what happens is that when I register a user and the data persists into the database my test should pass cause the expected <code>last_response.location</code> is to include <code>'/tweets'</code> and that is where\nit redirects to. I don't understand why it's not passing. </p>\n"}, {"tags": ["ruby", "cucumber", "watir", "browserstack"], "answers": [{"tags": [], "owner": {"reputation": 3523, "user_id": 9043475, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FNxvn.jpg?s=128&g=1", "display_name": "Rajagopalan", "link": "https://stackoverflow.com/users/9043475/rajagopalan"}, "is_accepted": true, "score": 1, "last_activity_date": 1548827391, "creation_date": 1548827391, "answer_id": 54434044, "question_id": 54433885, "link": "https://stackoverflow.com/questions/54433885/issue-with-uninitialized-constant-webdriver-nameerror/54434044#54434044", "title": "Issue with - uninitialized constant WebDriver (NameError)", "body": "<p>watir-webdriver is deprecated, please install the latest version of WATIR, and then <code>require 'watir'</code>. WATIR is using <code>selenium-webdriver</code> inside now. </p>\n"}, {"tags": [], "owner": {"reputation": 1276, "user_id": 5399937, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ctCqj.png?s=128&g=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/5399937/tom"}, "is_accepted": false, "score": 0, "last_activity_date": 1548827571, "creation_date": 1548827571, "answer_id": 54434078, "question_id": 54433885, "link": "https://stackoverflow.com/questions/54433885/issue-with-uninitialized-constant-webdriver-nameerror/54434078#54434078", "title": "Issue with - uninitialized constant WebDriver (NameError)", "body": "<p><code>require 'watir-webdriver'</code> <a href=\"https://github.com/watir/watir/blob/master/lib/watir-webdriver.rb\" rel=\"nofollow noreferrer\">is deprecated</a>, and you should use <code>require 'watir'</code> going forward.</p>\n\n<p>The <code>Capabilities</code> class has moved to <a href=\"https://github.com/watir/watir/blob/e8dd0c2104c2ac2d5c22c31053792ee50b704215/lib/watir/capabilities.rb\" rel=\"nofollow noreferrer\"><code>Watir::Capabilities</code></a>.  The initialization and option keys look to be updated from what you are using.</p>\n\n<p><a href=\"https://github.com/watir/watir/blob/e8dd0c2104c2ac2d5c22c31053792ee50b704215/lib/watir/capabilities.rb#L57\" rel=\"nofollow noreferrer\"><code>Selenium::WebDriver::Remote</code></a> is something to investigate.</p>\n"}], "owner": {"reputation": 51, "user_id": 3233238, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/1559122387/picture?type=large", "display_name": "KWC", "link": "https://stackoverflow.com/users/3233238/kwc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 164, "favorite_count": 0, "accepted_answer_id": 54434044, "answer_count": 2, "score": 1, "last_activity_date": 1548830181, "creation_date": 1548826469, "last_edit_date": 1548830181, "question_id": 54433885, "link": "https://stackoverflow.com/questions/54433885/issue-with-uninitialized-constant-webdriver-nameerror", "title": "Issue with - uninitialized constant WebDriver (NameError)", "body": "<p>Hello and thanks in advance ...</p>\n\n<p>I am trying to start browserstack and I am getting the following error:</p>\n\n<pre><code> uninitialized constant WebDriver (NameError)\n</code></pre>\n\n<p>I am not sure how to resolve this...\nMy Code is below:</p>\n\n<pre><code>require 'rubygems'\nrequire 'watir-webdriver'\n\ninclude Selenium\n\ncaps = WebDriver::Remote::Capabilities.new\ncaps[:os] = \"Windows\"\ncaps[:name] = \"Watir WebDriver\"\ncaps[:browser] = \"firefox\"\ncaps[:browser_version] = \"50\"\ncaps[\"browserstack.debug\"] = \"true\"\n\nbrowser = Watir::Browser.new(:remote,\n                             :url =&gt; \"xxx\",\n                             :desired_capabilities =&gt; caps)\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5"], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 9231256, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70880fccbed9288293cb21e138974f21?s=128&d=identicon&r=PG&f=1", "display_name": "Reason", "link": "https://stackoverflow.com/users/9231256/reason"}, "edited": false, "score": 0, "creation_date": 1548827174, "post_id": 54433932, "comment_id": 95677401, "body": "same as @vishal&#39;s suggestion. Moving to have an if statement inside the method also does not work. After updating and setting u = User.first in the rails console, and then checking u.valid? I get false. The error message: {:mobile_number=&gt;[&quot;Sorry, an account with that phone number already exists.&quot;]}"}, {"owner": {"reputation": 510, "user_id": 10987825, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WnYnE.jpg?s=128&g=1", "display_name": "Noah", "link": "https://stackoverflow.com/users/10987825/noah"}, "reply_to_user": {"reputation": 13, "user_id": 9231256, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70880fccbed9288293cb21e138974f21?s=128&d=identicon&r=PG&f=1", "display_name": "Reason", "link": "https://stackoverflow.com/users/9231256/reason"}, "edited": false, "score": 0, "creation_date": 1548827445, "post_id": 54433932, "comment_id": 95677496, "body": "@Reason That is because you&#39;re checking if a mobile number already exists <b>including</b> the one that you&#39;re currently editing. Can you just use <code>validates :mobile_number, uniqueness: true</code>? If not, let me know and I&#39;ll modify my answer again."}, {"owner": {"reputation": 13, "user_id": 9231256, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70880fccbed9288293cb21e138974f21?s=128&d=identicon&r=PG&f=1", "display_name": "Reason", "link": "https://stackoverflow.com/users/9231256/reason"}, "edited": false, "score": 0, "creation_date": 1548828582, "post_id": 54433932, "comment_id": 95677916, "body": "Yep I believe that is correct and an interesting difference between validates and validate"}, {"owner": {"reputation": 510, "user_id": 10987825, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WnYnE.jpg?s=128&g=1", "display_name": "Noah", "link": "https://stackoverflow.com/users/10987825/noah"}, "reply_to_user": {"reputation": 13, "user_id": 9231256, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70880fccbed9288293cb21e138974f21?s=128&d=identicon&r=PG&f=1", "display_name": "Reason", "link": "https://stackoverflow.com/users/9231256/reason"}, "edited": false, "score": 0, "creation_date": 1548829265, "post_id": 54433932, "comment_id": 95678178, "body": "Nice, I&#39;m glad I was able to help."}], "tags": [], "owner": {"reputation": 510, "user_id": 10987825, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WnYnE.jpg?s=128&g=1", "display_name": "Noah", "link": "https://stackoverflow.com/users/10987825/noah"}, "is_accepted": true, "score": 2, "last_activity_date": 1548827732, "last_edit_date": 1548827732, "creation_date": 1548826725, "answer_id": 54433932, "question_id": 54433851, "link": "https://stackoverflow.com/questions/54433851/rails-how-to-only-call-custom-validate-method-if-attribute-is-present-on-update/54433932#54433932", "title": "Rails how to only call custom validate method if attribute is present on update", "body": "<p>You're checking if a mobile number already exists <strong>including</strong> the one that belongs to the user that you are currently editing. You should be able to just use:</p>\n\n<p><code>validates :mobile_number, uniqueness: true</code></p>\n\n<p>If you would prefer the custom validation method, you can use the following to exclude the selected user:</p>\n\n<pre><code>validate :mobile_number_is_unique\n\n# Determines if the mobile number is unique.\ndef mobile_number_is_unique\n  if new_record? || !mobile_number.blank?\n    return errors.add(\n      :mobile_number, 'Sorry, an account with that phone number already exists.'\n    ) unless User.where(mobile_number: PhonyRails.normalize_number(mobile_number)).where.not(id: id).count == 0\n  end\nend\n</code></pre>\n\n<blockquote>\n  <p>OLD Version</p>\n</blockquote>\n\n<p>Yes, you can just move the if statement into the <code>mobile_number_is_unique</code> method.</p>\n\n<p>So it would become this:</p>\n\n<pre><code>validate :mobile_number_is_unique\n\n# Determines if the mobile number is unique.\ndef mobile_number_is_unique\n  if new_record? || !mobile_number.blank?\n    return errors.add(\n      :mobile_number, 'Sorry, an account with that phone number already exists.'\n    ) unless User.find_by(\n      mobile_number: PhonyRails.normalize_number(mobile_number)\n    ).nil?\n  end\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 13, "user_id": 9231256, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70880fccbed9288293cb21e138974f21?s=128&d=identicon&r=PG&f=1", "display_name": "Reason", "link": "https://stackoverflow.com/users/9231256/reason"}, "edited": false, "score": 0, "creation_date": 1548827110, "post_id": 54433934, "comment_id": 95677386, "body": "Moving to have a guard clause inside the method also does not work. After updating and setting u = User.first in the rails console, and then checking u.valid? I get false. The error message: {:mobile_number=&gt;[&quot;Sorry, an account with that phone number already exists.&quot;]}"}, {"owner": {"reputation": 6207, "user_id": 5117953, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/Ca0RW.jpg?s=128&g=1", "display_name": "Vishal", "link": "https://stackoverflow.com/users/5117953/vishal"}, "reply_to_user": {"reputation": 13, "user_id": 9231256, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70880fccbed9288293cb21e138974f21?s=128&d=identicon&r=PG&f=1", "display_name": "Reason", "link": "https://stackoverflow.com/users/9231256/reason"}, "edited": false, "score": 0, "creation_date": 1548827184, "post_id": 54433934, "comment_id": 95677406, "body": "Logically if it&#39;s not present why we are doing validation on it? Yes as per my opinion OP was checking  wrong condition in proc"}, {"owner": {"reputation": 6207, "user_id": 5117953, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/Ca0RW.jpg?s=128&g=1", "display_name": "Vishal", "link": "https://stackoverflow.com/users/5117953/vishal"}, "reply_to_user": {"reputation": 13, "user_id": 9231256, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70880fccbed9288293cb21e138974f21?s=128&d=identicon&r=PG&f=1", "display_name": "Reason", "link": "https://stackoverflow.com/users/9231256/reason"}, "edited": false, "score": 0, "creation_date": 1548827233, "post_id": 54433934, "comment_id": 95677421, "body": "@Reason are you reloading console after changing code in model ?"}, {"owner": {"reputation": 13, "user_id": 9231256, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70880fccbed9288293cb21e138974f21?s=128&d=identicon&r=PG&f=1", "display_name": "Reason", "link": "https://stackoverflow.com/users/9231256/reason"}, "edited": false, "score": 0, "creation_date": 1548827237, "post_id": 54433934, "comment_id": 95677423, "body": "The logic should be that if it IS present on update the validation is run against it."}, {"owner": {"reputation": 13, "user_id": 9231256, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70880fccbed9288293cb21e138974f21?s=128&d=identicon&r=PG&f=1", "display_name": "Reason", "link": "https://stackoverflow.com/users/9231256/reason"}, "edited": false, "score": 0, "creation_date": 1548827254, "post_id": 54433934, "comment_id": 95677428, "body": "I&#39;m restarting the console after changing the code to the model, so yes."}, {"owner": {"reputation": 6207, "user_id": 5117953, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/Ca0RW.jpg?s=128&g=1", "display_name": "Vishal", "link": "https://stackoverflow.com/users/5117953/vishal"}, "reply_to_user": {"reputation": 13, "user_id": 9231256, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70880fccbed9288293cb21e138974f21?s=128&d=identicon&r=PG&f=1", "display_name": "Reason", "link": "https://stackoverflow.com/users/9231256/reason"}, "edited": false, "score": 0, "creation_date": 1548827286, "post_id": 54433934, "comment_id": 95677441, "body": "Can you please add in question what you are doing with all field values ?"}, {"owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "reply_to_user": {"reputation": 13, "user_id": 9231256, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70880fccbed9288293cb21e138974f21?s=128&d=identicon&r=PG&f=1", "display_name": "Reason", "link": "https://stackoverflow.com/users/9231256/reason"}, "edited": false, "score": 0, "creation_date": 1548827455, "post_id": 54433934, "comment_id": 95677500, "body": "@Reason There is something you misunderstood, because there is no rocket science behind it, it should definitely work for condition in proc/method."}, {"owner": {"reputation": 13, "user_id": 9231256, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70880fccbed9288293cb21e138974f21?s=128&d=identicon&r=PG&f=1", "display_name": "Reason", "link": "https://stackoverflow.com/users/9231256/reason"}, "edited": false, "score": 0, "creation_date": 1548827475, "post_id": 54433934, "comment_id": 95677508, "body": "It&#39;s a private project, so no, but I can assure you that the method listed above is the only one that would produce such an error message and all other validations are of the type using the &quot;validates&quot; and work correctly against rspec testing."}, {"owner": {"reputation": 13, "user_id": 9231256, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70880fccbed9288293cb21e138974f21?s=128&d=identicon&r=PG&f=1", "display_name": "Reason", "link": "https://stackoverflow.com/users/9231256/reason"}, "edited": false, "score": 0, "creation_date": 1548827502, "post_id": 54433934, "comment_id": 95677519, "body": "I agree, I&#39;m very confused on as to why it isn&#39;t working"}, {"owner": {"reputation": 6207, "user_id": 5117953, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/Ca0RW.jpg?s=128&g=1", "display_name": "Vishal", "link": "https://stackoverflow.com/users/5117953/vishal"}, "reply_to_user": {"reputation": 13, "user_id": 9231256, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70880fccbed9288293cb21e138974f21?s=128&d=identicon&r=PG&f=1", "display_name": "Reason", "link": "https://stackoverflow.com/users/9231256/reason"}, "edited": false, "score": 0, "creation_date": 1548827549, "post_id": 54433934, "comment_id": 95677540, "body": "@Reason yes exactly its not that complicated it is simple validation. i am pretty confident my code will work as expected."}, {"owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "reply_to_user": {"reputation": 13, "user_id": 9231256, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70880fccbed9288293cb21e138974f21?s=128&d=identicon&r=PG&f=1", "display_name": "Reason", "link": "https://stackoverflow.com/users/9231256/reason"}, "edited": false, "score": 1, "creation_date": 1548827669, "post_id": 54433934, "comment_id": 95677595, "body": "@Reason there is nothing to do with private as it will throw error or get called! so condition works proper then it is finite!"}, {"owner": {"reputation": 13, "user_id": 9231256, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70880fccbed9288293cb21e138974f21?s=128&d=identicon&r=PG&f=1", "display_name": "Reason", "link": "https://stackoverflow.com/users/9231256/reason"}, "edited": false, "score": 0, "creation_date": 1548827761, "post_id": 54433934, "comment_id": 95677636, "body": "In the console after setting u = User.first and doing u.mobile_number.present? it returns true, so I imagine that would lead to the issue. I&#39;m not sure how the validations with &quot;validates&quot; are only seeing &quot;updated&quot; attributes, but that seems far stranger to me."}], "tags": [], "owner": {"reputation": 6207, "user_id": 5117953, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/Ca0RW.jpg?s=128&g=1", "display_name": "Vishal", "link": "https://stackoverflow.com/users/5117953/vishal"}, "is_accepted": false, "score": 4, "last_activity_date": 1548827307, "last_edit_date": 1548827307, "creation_date": 1548826727, "answer_id": 54433934, "question_id": 54433851, "link": "https://stackoverflow.com/questions/54433851/rails-how-to-only-call-custom-validate-method-if-attribute-is-present-on-update/54433934#54433934", "title": "Rails how to only call custom validate method if attribute is present on update", "body": "<p>You only need to check validation if mobile number is present in record. so you can use below code .</p>\n\n<pre><code>validate :mobile_number_is_unique\n\n\n# Determines if the mobile number is unique.\ndef mobile_number_is_unique\n  return unless mobile_number.present?\n  errors.add(\n    :mobile_number, 'Sorry, an account with that phone number already exists.'\n  ) unless User.find_by(\n    mobile_number: PhonyRails.normalize_number(mobile_number)\n  ).nil?\nend\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 9231256, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70880fccbed9288293cb21e138974f21?s=128&d=identicon&r=PG&f=1", "display_name": "Reason", "link": "https://stackoverflow.com/users/9231256/reason"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 337, "favorite_count": 0, "accepted_answer_id": 54433932, "answer_count": 2, "score": 1, "last_activity_date": 1548828390, "creation_date": 1548826265, "last_edit_date": 1548828390, "question_id": 54433851, "link": "https://stackoverflow.com/questions/54433851/rails-how-to-only-call-custom-validate-method-if-attribute-is-present-on-update", "title": "Rails how to only call custom validate method if attribute is present on update", "body": "<p>I'm trying to only call a custom validate method when it is a new record or the attribute is present on update.</p>\n\n<pre><code>validates :mobile_number, presence: {\n  message: 'Please provide your phone number.'\n}, if: -&gt; (user) { user.new_record? || !user.mobile_number.blank? }\n</code></pre>\n\n<p>The above code works and will only validate the presence of a mobile number on a new_record or if the mobile number is blank when model.update(etc.) is called.</p>\n\n<pre><code>validate :mobile_number_is_unique, if: -&gt; (user) { user.new_record? || !user.mobile_number.blank? }\n</code></pre>\n\n<p>The above code does not work and will validate the uniqueness of a mobile number on a new_record and whenever model.update(etc.) is called.\nIs there a way to apply the same logic to the validate method so that it does not get called when the mobile number is blank when model.update(etc.) is called?</p>\n\n<p><code>mobile_number_is_unique</code> method for further context,</p>\n\n<pre><code># Determines if the mobile number is unique.\ndef mobile_number_is_unique\n  return errors.add(\n    :mobile_number, 'Sorry, an account with that phone number already exists.'\n  ) unless User.find_by(\n    mobile_number: PhonyRails.normalize_number(mobile_number)\n  ).nil?\nend\n</code></pre>\n\n<p>UPDATE</p>\n\n<p>Cleanest way to accomplish:</p>\n\n<pre><code>validates :mobile_number, presence: {\n  message: 'Please provide your phone number.'\n}, phony_plausible: {\n  message: 'Sorry, phone number format not recognized.'\n}, uniqueness: {\n  message: 'Sorry, an account with that phone number already exists.'\n}, if: -&gt; (user) { user.new_record? || !user.mobile_number.blank? }\n</code></pre>\n\n<p>Using the validate :mobile_number_is_unique method included the mobile number on the current model and needed to exclude it in order to pass.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "heroku", "jwt"], "answers": [{"tags": [], "owner": {"reputation": 5669, "user_id": 7429104, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/TZAPt.jpg?s=128&g=1", "display_name": "Aman", "link": "https://stackoverflow.com/users/7429104/aman"}, "is_accepted": false, "score": 1, "last_activity_date": 1548825922, "creation_date": 1548825922, "answer_id": 54433792, "question_id": 54433148, "link": "https://stackoverflow.com/questions/54433148/rails-5-2-2-heroku-always-return-appweb-1-fatal-nameerror-uninitialized-c/54433792#54433792", "title": "Rails 5.2.2 Heroku always return app[web.1]: FATAL -- NameError (uninitialized constant AuthenticateUser::JsonWebToken)", "body": "<p>Probably you are missing this: -</p>\n\n<p>By default any file in app directory is auto loaded and you can use it without including it, However outside this you would have to load it when application is loaded.</p>\n\n<blockquote>\n  <p>To make sure everything will work, the contents of the lib directory\n  have to be included when the Rails application loads.</p>\n</blockquote>\n\n<p>config/application.rb</p>\n\n<pre><code>module ApiApp\n  class Application &lt; Rails::Application\n    #.....\n    config.autoload_paths &lt;&lt; Rails.root.join('lib')\n    #.....\n  end\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 29, "user_id": 10977045, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-iEHbfBay_ZI/AAAAAAAAAAI/AAAAAAAAAl4/OR3vmjTUZbo/photo.jpg?sz=128", "display_name": "Abdul Mu&#39;min", "link": "https://stackoverflow.com/users/10977045/abdul-mumin"}, "is_accepted": false, "score": 0, "last_activity_date": 1549002610, "creation_date": 1549002610, "answer_id": 54474058, "question_id": 54433148, "link": "https://stackoverflow.com/questions/54433148/rails-5-2-2-heroku-always-return-appweb-1-fatal-nameerror-uninitialized-c/54474058#54474058", "title": "Rails 5.2.2 Heroku always return app[web.1]: FATAL -- NameError (uninitialized constant AuthenticateUser::JsonWebToken)", "body": "<p><strong>SOLUTION :</strong></p>\n\n<p>Change my config/application.rb from </p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>module RubyChallenge\r\n  class Application &lt; Rails::Application\r\n    ...\r\n    config.autoload_paths &lt;&lt; Rails.root.join('lib')\r\n    ...\r\n  end\r\nend</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>to </p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>module RubyChallenge\r\n  class Application &lt; Rails::Application\r\n    ...\r\n    config.eager_load_paths &lt;&lt; Rails.root.join('lib')\r\n    ...\r\n  end\r\nend</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>make it runing well, it because Rails 5 disables autoloading after booting the app in production, thx to Shailesh Kalamkar <a href=\"https://blog.bigbinary.com/2016/08/29/rails-5-disables-autoloading-after-booting-the-app-in-production.html\" rel=\"nofollow noreferrer\">Article</a></p>\n"}, {"tags": [], "owner": {"reputation": 508, "user_id": 5023291, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/anlQX.jpg?s=128&g=1", "display_name": "Anoob K Bava", "link": "https://stackoverflow.com/users/5023291/anoob-k-bava"}, "is_accepted": false, "score": 0, "last_activity_date": 1568625173, "creation_date": 1568625173, "answer_id": 57953676, "question_id": 54433148, "link": "https://stackoverflow.com/questions/54433148/rails-5-2-2-heroku-always-return-appweb-1-fatal-nameerror-uninitialized-c/57953676#57953676", "title": "Rails 5.2.2 Heroku always return app[web.1]: FATAL -- NameError (uninitialized constant AuthenticateUser::JsonWebToken)", "body": "<p>I have followed the same blog, but when I place my code after the class header, it just works !!!</p>\n\n<pre><code>module TodoApiApp\n  class Application &lt; Rails::Application\n    config.eager_load_paths &lt;&lt; Rails.root.join('lib')\n    config.load_defaults 5.2\n    config.middleware.insert_before 0, Rack::Cors do\n      allow do\n        origins '*'\n        resource '*', headers: :any, methods: %i[get post delete put patch options]\n      end\n    end\n    config.api_only = true\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 29, "user_id": 10977045, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-iEHbfBay_ZI/AAAAAAAAAAI/AAAAAAAAAl4/OR3vmjTUZbo/photo.jpg?sz=128", "display_name": "Abdul Mu&#39;min", "link": "https://stackoverflow.com/users/10977045/abdul-mumin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 801, "favorite_count": 0, "answer_count": 3, "score": 2, "last_activity_date": 1568625173, "creation_date": 1548820574, "last_edit_date": 1556514275, "question_id": 54433148, "link": "https://stackoverflow.com/questions/54433148/rails-5-2-2-heroku-always-return-appweb-1-fatal-nameerror-uninitialized-c", "title": "Rails 5.2.2 Heroku always return app[web.1]: FATAL -- NameError (uninitialized constant AuthenticateUser::JsonWebToken)", "body": "<p>I follow tutorial from <a href=\"https://www.pluralsight.com/guides/token-based-authentication-with-ruby-on-rails-5-api\" rel=\"nofollow noreferrer\">https://www.pluralsight.com/guides/token-based-authentication-with-ruby-on-rails-5-api</a> with some fixed error its running well..</p>\n\n<p>but after i deploy to heroku, When i want to access authenticate route (sign in user), i got status code 500 in insomia :</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>{\r\n  \"status\": 500,\r\n  \"error\": \"Internal Server Error\"\r\n}</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>and in terminal i got this code :</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>2019-01-30T03:07:19.567264+00:00 app[web.1]: I, [2019-01-30T03:07:19.567151 #9]  INFO -- : [49a401d5-1f31-4a88-8299-3c14d07ef160] Started POST \"/authenticate\" for 125.161.110.130 at 2019-01-30 03:07:19 +0000\r\n2019-01-30T03:07:19.568759+00:00 app[web.1]: I, [2019-01-30T03:07:19.568673 #9]  INFO -- : [49a401d5-1f31-4a88-8299-3c14d07ef160] Processing by AuthenticationController#authenticate as JSON\r\n2019-01-30T03:07:19.569025+00:00 app[web.1]: I, [2019-01-30T03:07:19.568946 #9]  INFO -- : [49a401d5-1f31-4a88-8299-3c14d07ef160]   Parameters: {\"email\"=&gt;\"mymail@rocketmail.com\", \"password\"=&gt;\"[FILTERED]\", \"authentication\"=&gt;{\"email\"=&gt;\"mymail@rocketmail.com\", \"password\"=&gt;\"[FILTERED]\"}}\r\n2019-01-30T03:07:19.609086+00:00 app[web.1]: D, [2019-01-30T03:07:19.608939 #9] DEBUG -- : [49a401d5-1f31-4a88-8299-3c14d07ef160]    (3.5ms)  SET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483\r\n2019-01-30T03:07:19.618191+00:00 app[web.1]: D, [2019-01-30T03:07:19.618074 #9] DEBUG -- : [49a401d5-1f31-4a88-8299-3c14d07ef160]   User Load (3.4ms)  SELECT  `users`.* FROM `users` WHERE `users`.`email` = 'mymail@rocketmail.com' LIMIT 1\r\n2019-01-30T03:07:19.742727+00:00 app[web.1]: I, [2019-01-30T03:07:19.742595 #9]  INFO -- : [49a401d5-1f31-4a88-8299-3c14d07ef160] Completed 500 Internal Server Error in 173ms (ActiveRecord: 10.4ms)\r\n2019-01-30T03:07:19.743582+00:00 app[web.1]: F, [2019-01-30T03:07:19.743490 #9] FATAL -- : [49a401d5-1f31-4a88-8299-3c14d07ef160]\r\n2019-01-30T03:07:19.743681+00:00 app[web.1]: F, [2019-01-30T03:07:19.743602 #9] FATAL -- : [49a401d5-1f31-4a88-8299-3c14d07ef160] NameError (uninitialized constant AuthenticateUser::JsonWebToken):\r\n2019-01-30T03:07:19.743757+00:00 app[web.1]: F, [2019-01-30T03:07:19.743677 #9] FATAL -- : [49a401d5-1f31-4a88-8299-3c14d07ef160]\r\n2019-01-30T03:07:19.743841+00:00 app[web.1]: F, [2019-01-30T03:07:19.743763 #9] FATAL -- : [49a401d5-1f31-4a88-8299-3c14d07ef160] app/commands/authenticate_user.rb:10:in `call'\r\n2019-01-30T03:07:19.743859+00:00 app[web.1]: [49a401d5-1f31-4a88-8299-3c14d07ef160] app/controllers/authentication_controller.rb:5:in `authenticate'</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>here my authentication_controller :</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>class AuthenticationController &lt; ApplicationController\r\n  skip_before_action :authenticate_request\r\n  \r\n  def authenticate\r\n    command = AuthenticateUser.call(params[:email], params[:password])\r\n  \r\n    if command.success?\r\n      render json: { auth_token: command.result }\r\n    else\r\n      render json: { error: command.errors }, status: :unauthorized\r\n    end\r\n  end\r\nend</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>here my authenticate_user :</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>class AuthenticateUser\r\n  prepend SimpleCommand\r\n\r\n  def initialize(email, password)\r\n    @email = email\r\n    @password = password\r\n  end\r\n\r\n  def call\r\n    JsonWebToken.encode(user_id: user.id) if user\r\n  end\r\n\r\n  private\r\n\r\n  attr_accessor :email, :password\r\n\r\n  def user\r\n    user = User.find_by_email(email)\r\n    return user if user &amp;&amp; user.authenticate(password)\r\n\r\n    errors.add :user_authentication, 'invalid credentials'\r\n    nil\r\n  end\r\nend</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>here json_web_token :</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>class JsonWebToken\r\n  class &lt;&lt; self\r\n    def encode(payload, exp = 24.hours.from_now)\r\n      payload[:exp] = exp.to_i\r\n      JWT.encode(payload, RubyChallenge::Application.credentials.secret_key_base)\r\n    end\r\n  \r\n    def decode(token)\r\n      body = JWT.decode(token, RubyChallenge::Application.credentials.secret_key_base)[0]\r\n      HashWithIndifferentAccess.new body\r\n    rescue\r\n      nil\r\n    end\r\n  end\r\nend</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>I have set the environment variable RAILS_MASTER_KEY, to my heroku  with the same value as the contents of config / master.key :\n<a href=\"https://i.stack.imgur.com/yXhV7.jpg\" rel=\"nofollow noreferrer\">my heroku config var</a></p>\n\n<p>my Gemfile :</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>source 'https://rubygems.org'\r\ngit_source(:github) { |repo| \"https://github.com/#{repo}.git\" }\r\n\r\nruby '2.5.1'\r\n\r\ngem 'rails', '~&gt; 5.2.2'\r\ngem 'mysql2', '&gt;= 0.4.4', '&lt; 0.6.0'\r\ngem 'puma', '~&gt; 3.11'\r\ngem 'bcrypt', '~&gt; 3.1.7'\r\ngem 'jwt'\r\ngem 'simple_command'\r\ngem 'figaro'\r\ngem 'bootsnap', '&gt;= 1.1.0', require: false\r\n\r\ngroup :development, :test do\r\n  gem 'byebug', platforms: [:mri, :mingw, :x64_mingw]\r\nend\r\n\r\ngroup :development do\r\n  gem 'listen', '&gt;= 3.0.5', '&lt; 3.2'\r\n  gem 'spring'\r\n  gem 'spring-watcher-listen', '~&gt; 2.0.0'\r\nend\r\n\r\ngem 'tzinfo-data', platforms: [:mingw, :mswin, :x64_mingw, :jruby]</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>Thanks in advance </p>\n\n<p>EDIT:</p>\n\n<p>here my config / application.rb :</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>require_relative 'boot'\r\n\r\nrequire \"rails\"\r\n# Pick the frameworks you want:\r\nrequire \"active_model/railtie\"\r\nrequire \"active_job/railtie\"\r\nrequire \"active_record/railtie\"\r\nrequire \"active_storage/engine\"\r\nrequire \"action_controller/railtie\"\r\nrequire \"action_mailer/railtie\"\r\nrequire \"action_view/railtie\"\r\nrequire \"action_cable/engine\"\r\n# require \"sprockets/railtie\"\r\nrequire \"rails/test_unit/railtie\"\r\n\r\n\r\nBundler.require(*Rails.groups)\r\n\r\nmodule RubyChallenge\r\n  class Application &lt; Rails::Application\r\n    config.autoload_paths &lt;&lt; Rails.root.join('lib')\r\n    config.api_only = true\r\n  end\r\nend</code></pre>\r\n</div>\r\n</div>\r\n\nbtw thx Mr.Gabbar for your suggestion</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "database"], "comments": [{"owner": {"reputation": 1276, "user_id": 5399937, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ctCqj.png?s=128&g=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/5399937/tom"}, "edited": false, "score": 3, "creation_date": 1548829161, "post_id": 54431914, "comment_id": 95678134, "body": "Good question, good answer, this is what SO is about!"}], "answers": [{"comments": [{"owner": {"reputation": 43, "user_id": 10987620, "user_type": "registered", "profile_image": "https://graph.facebook.com/10106461246023178/picture?type=large", "display_name": "Dan Waldkirch", "link": "https://stackoverflow.com/users/10987620/dan-waldkirch"}, "edited": false, "score": 3, "creation_date": 1548811252, "post_id": 54431936, "comment_id": 95673766, "body": "Ahhh of course! I should have known that. Yes, this solved the problem. I&#39;m still not sure I understand why the ids aren&#39;t going up, but this was what I needed either way, thanks!"}, {"owner": {"reputation": 1217, "user_id": 10430642, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p5jzL.jpg?s=128&g=1", "display_name": "Dimitrius Lachi", "link": "https://stackoverflow.com/users/10430642/dimitrius-lachi"}, "reply_to_user": {"reputation": 43, "user_id": 10987620, "user_type": "registered", "profile_image": "https://graph.facebook.com/10106461246023178/picture?type=large", "display_name": "Dan Waldkirch", "link": "https://stackoverflow.com/users/10987620/dan-waldkirch"}, "edited": false, "score": 0, "creation_date": 1548811318, "post_id": 54431936, "comment_id": 95673780, "body": "Nice! Glad i can help."}], "tags": [], "owner": {"reputation": 1217, "user_id": 10430642, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p5jzL.jpg?s=128&g=1", "display_name": "Dimitrius Lachi", "link": "https://stackoverflow.com/users/10430642/dimitrius-lachi"}, "is_accepted": true, "score": 6, "last_activity_date": 1552534869, "last_edit_date": 1552534869, "creation_date": 1548810319, "answer_id": 54431936, "question_id": 54431914, "link": "https://stackoverflow.com/questions/54431914/rails-reusing-ids-when-building-associated-objects/54431936#54431936", "title": "Rails reusing ids when building associated objects?", "body": "<p>This is a really interesting question! But this is not a Ruby on Rails issue!</p>\n\n<p><code>ActiveRecord</code> do not control the saved <code>id</code>, he only pass the attributes to database and recover the created resource, this is one issue of your <strong>database</strong>.</p>\n\n<p>If i can recommends something to you, use a open-source relational-database like Mysql or Postgresql, but do it with the <strong>original database config</strong>.</p>\n\n<p>But, if you don't want (or cannot) use another database, you can resolve the <code>delete</code> problem with the following: </p>\n\n<pre><code>class Game &lt; ApplicationRecord\n  has_many :innings, dependent: destroy\n  ...\n  ...\nend\n</code></pre>\n\n<p>Explaning the code above:</p>\n\n<p><code>:dependent</code> is one of the options to the <code>belongs_to</code> association. When set to <code>:destroy</code>, if the record was deleted, all the associated records (having  <code>dependent: :destroy</code>) will be destroyed too!</p>\n"}], "owner": {"reputation": 43, "user_id": 10987620, "user_type": "registered", "profile_image": "https://graph.facebook.com/10106461246023178/picture?type=large", "display_name": "Dan Waldkirch", "link": "https://stackoverflow.com/users/10987620/dan-waldkirch"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 123, "favorite_count": 1, "accepted_answer_id": 54431936, "answer_count": 1, "score": 4, "last_activity_date": 1552534869, "creation_date": 1548810151, "last_edit_date": 1548819937, "question_id": 54431914, "link": "https://stackoverflow.com/questions/54431914/rails-reusing-ids-when-building-associated-objects", "title": "Rails reusing ids when building associated objects?", "body": "<p>Pretty new to Rails and development in general so sorry if I'm phrasing this question wrong.</p>\n\n<p>I'm creating an app that generates lineups automatically for a kickball/little league team. Users can create a team, and then the Team can create a Game. Each game has_many :innings. When the game is created, it should add a specified amount of innings to that game.</p>\n\n<p>This is where I encounter the problem. Code is below. Say I make a 5-inning game for a Team. It is given the id of 1 and works fine and adds the proper innings. However, if I then delete that game for whatever reason, and make a new one, it creates a new Game that also has the id of 1 - however this time it has 10 innings. Do it once more and you get a 15-inning game and so on. The server seems to be saving and deleting the games just fine, but shouldn't the game ids just keep going up regardless of what I delete? I haven't changed anything regarding auto-incrementing.</p>\n\n<p>Here is my controller: </p>\n\n<pre><code>class GamesController &lt; ApplicationController\n  before_action :set_team\n\n  # GET /games\n  # GET /games.json\n  def index\n    @games = Game.all\n  end\n\n  # GET /games/1\n  # GET /games/1.json\n  def show\n    @game = Game.find(params[:id])\n    @team = @game.team\n  end\n\n  # GET /games/new\n  def new\n\n    @game = @team.games.build\n    @game.no_of_innings = nil\n  end\n\n  # GET /games/1/edit\n  def edit\n  end\n\n  # POST /games\n  # POST /games.json\n  def create\n\n    @game = @team.games.build(game_params)\n    @game.user = current_user\n\n\n    respond_to do |format|\n      if @game.save\n\n        (@game.no_of_innings).times do\n          @game.innings.build\n          @game.save\n        end\n\n        format.html { redirect_to @game, notice: 'Game was successfully created.' }\n        format.json { render :show, status: :created, location: @game }\n      else\n        format.html { render :new }\n        format.json { render json: @game.errors, status: :unprocessable_entity }\n      end\n    end\n  end\n\n  # PATCH/PUT /games/1\n  # PATCH/PUT /games/1.json\n  def update\n    respond_to do |format|\n      if @game.update(game_params)\n        format.html { redirect_to @game, notice: 'Game was successfully updated.' }\n        format.json { render :show, status: :ok, location: @game }\n      else\n        format.html { render :edit }\n        format.json { render json: @game.errors, status: :unprocessable_entity }\n      end\n    end\n  end\n\n  # DELETE /games/1\n  # DELETE /games/1.json\n  def destroy\n    @game.destroy\n    respond_to do |format|\n      format.html { redirect_to games_url, notice: 'Game was successfully destroyed.' }\n      format.json { head :no_content }\n    end\n  end\n\n  def generate_lineup\n    @game = Game.find(params[:id])\n    @team = @game.team\n    @game.generate_lineup(@team)\n\n    render :show\n  end\n\n  private\n    # Use callbacks to share common setup or constraints between actions.\n    def set_team\n      @team = Team.find(params[:id])\n    end\n\n    # Never trust parameters from the scary internet, only allow the white list through.\n    def game_params\n      params.require(:game).permit(:no_of_innings, :opponent, :date)\n    end\n\n    def inning_params\n      params.require(:inning).permit(:p, :c, :first, :third, :lr, :rr, :l, :lc, :rc, :r, :bench)\n    end\n\nend\n</code></pre>\n\n<p>And my Game model:</p>\n\n<pre><code>class Game &lt; ApplicationRecord\n    has_many :innings\n    belongs_to :user\n    belongs_to :team\n\n    def generate_lineup(t)\n       clear_all\n       roster = get_working_roster(t)\n       roster = create_bench_order(roster)\n       set_defense(self, roster)\n    end\n\n    #get working roster of people\n    def get_working_roster(t)\n        Player.all.select { |p| (p.team_id == team.id) &amp;&amp; (p.active == true) }\n    end\n\n    def clear_all\n      self.innings.each do |inning|\n        inning.p = nil\n        inning.c = nil\n        inning.first = nil\n        inning.third = nil\n        inning.lr = nil\n        inning.rr = nil\n        inning.l = nil\n        inning.lc = nil\n        inning.rc = nil\n        inning.r = nil\n        inning.bench = nil\n      end\n    end\n\n    def create_bench_order(players)\n      kicking_order = []\n      guys = []\n      girls = []\n      players = players.shuffle\n      players.each do |player|\n        if player.gender == 'female'\n          girls &lt;&lt; player\n        else\n          guys &lt;&lt; player\n        end\n      end\n\n      if guys.length &gt; girls.length\n        bigger = guys\n        smaller = girls\n      elsif girls.length &gt; guys.length\n        bigger = girls\n        smaller = guys\n      elsif guys.length == girls.length\n        kicking_order = guys.zip(girls).compact.flatten\n        return kicking_order\n      end\n\n      (smaller.length).times do |x|\n        kicking_order &lt;&lt; bigger[0]\n        bigger.shift\n        kicking_order &lt;&lt; smaller[0]\n        smaller.shift\n      end\n\n      index = 0\n      while bigger.any?\n        kicking_order.insert(index, bigger[0])\n        bigger.shift\n        index += 3\n      end\n      return kicking_order\n    end\n\n    def set_defense(game, players)\n\n      game.innings.each do |inning|\n         bench = []\n         bench_no = players.length - 10\n\n         bench_no.times do\n             player = players[0]\n             bench &lt;&lt; player.name\n             players.shift\n             players &lt;&lt; player\n         end\n\n         bench_display = \"\"\n         bench.each do |x|\n           bench_display += x + \", \"\n         end\n         inning.bench = bench_display\n\n         playing = players[0...-(bench_no)]\n         playing = playing.shuffle\n\n         playing.each do |plr|\n           player_prefs = [plr.p1, plr.p2, plr.p3, plr.p4, plr.p5, plr.p6, plr.p7, plr.p8, plr.p9, plr.p10]\n\n           index = 0\n\n           until index &gt; 9 do \n             if free?(inning.p) &amp;&amp; player_prefs[index] == 'p'\n              inning.p = plr.name\n              break\n             elsif free?(inning.c) &amp;&amp; player_prefs[index] == 'c'\n              inning.c = plr.name\n              break\n             elsif free?(inning.first) &amp;&amp; player_prefs[index] == 'first'\n              inning.first = plr.name\n              break\n             elsif free?(inning.third) &amp;&amp; player_prefs[index] == 'third'\n              inning.third = plr.name\n              break\n             elsif free?(inning.lr) &amp;&amp; player_prefs[index] == 'lr'\n              inning.lr = plr.name\n              break\n             elsif free?(inning.rr) &amp;&amp; player_prefs[index] == 'rr'\n              inning.rr = plr.name\n              break\n             elsif free?(inning.l) &amp;&amp; player_prefs[index] == 'l'\n              inning.l = plr.name\n              break\n             elsif free?(inning.lc) &amp;&amp; player_prefs[index] == 'lc'\n              inning.lc = plr.name\n              break\n             elsif free?(inning.rc) &amp;&amp; player_prefs[index] == 'rc'\n              inning.rc = plr.name\n              break\n             elsif free?(inning.r) &amp;&amp; player_prefs[index] == 'r'\n              inning.r = plr.name\n              break\n             else\n              index += 1\n             end\n           end\n         end\n      end\n    end\n\n\n    def free?(position)\n      position == nil\n    end\n\nend\n</code></pre>\n\n<p>Sorry for any breaches of etiquette here, longtime reader first time poster!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "devise"], "comments": [{"owner": {"reputation": 1217, "user_id": 10430642, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p5jzL.jpg?s=128&g=1", "display_name": "Dimitrius Lachi", "link": "https://stackoverflow.com/users/10430642/dimitrius-lachi"}, "edited": false, "score": 0, "creation_date": 1548809458, "post_id": 54431795, "comment_id": 95673315, "body": "Please, consider to leave the old code (working code)"}, {"owner": {"reputation": 820, "user_id": 2640181, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7599b700aee8e1a534030709ae43616?s=128&d=identicon&r=PG", "display_name": "barmic", "link": "https://stackoverflow.com/users/2640181/barmic"}, "edited": false, "score": 0, "creation_date": 1548834689, "post_id": 54431795, "comment_id": 95680636, "body": "Could you add some logs which are generated after login action?"}], "owner": {"reputation": 1, "user_id": 10982187, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-raoqKuyiZ-I/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQNX1NtGU3uROjzAcsFpwaEUtYAYNQ/mo/photo.jpg?sz=128", "display_name": "Jake Baird", "link": "https://stackoverflow.com/users/10982187/jake-baird"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 49, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1548827344, "creation_date": 1548809213, "last_edit_date": 1548827344, "question_id": 54431795, "link": "https://stackoverflow.com/questions/54431795/devise-invalid-email-or-password", "title": "devise Invalid Email or password", "body": "<p>After adding styling to the devise pages, the logins are not working. </p>\n\n<p>Signup redirects to login and login says Invalid Email or password.  </p>\n\n<p>Here is the <code>sessions/new</code> </p>\n\n<pre><code>&lt;%= form_for(resource, as: resource_name, url: session_path(resource_name)) do |f| %&gt;\n&lt;%= devise_error_messages! %&gt;\n    &lt;div class=\"access_social\"&gt;\n        &lt;%- if devise_mapping.omniauthable? %&gt;\n            &lt;%- resource_class.omniauth_providers.each do |provider| %&gt;\n                &lt;%= link_to \"Sign in with #{OmniAuth::Utils.camelize(provider)}\", omniauth_authorize_path(resource_name, provider), class: \"button button--facebook button--full-width\" %&gt;\n                    &lt;% end -%&gt;\n                        &lt;% end -%&gt;\n    &lt;/div&gt;\n    &lt;div class=\"oauth__divider\"&gt;&lt;span&gt;OR&lt;/span&gt;&lt;/div&gt;\n    &lt;div class=\"form-group\"&gt;\n        &lt;%= f.label :email %&gt;\n            &lt;br /&gt;\n            &lt;%= f.email_field :email, autofocus: true, autocomplete: \"email\", class: \"form-control\" %&gt;\n    &lt;/div&gt;\n    &lt;div class=\"form-group\"&gt;\n        &lt;%= f.label :password %&gt;\n            &lt;br /&gt;\n            &lt;%= f.password_field :password, autocomplete: \"off\", class: \"form-control\" %&gt;\n    &lt;/div&gt;\n    &lt;div class=\"clearfix mb-2\"&gt;\n        &lt;div class=\"form-check\"&gt;\n\n            &lt;%= f.check_box :remember_me,class: \"form-check-input\", as: :boolean if devise_mapping.rememberable? %&gt;\n                &lt;label class=\"form-check-label\"&gt;Remember me&lt;/label&gt;\n        &lt;/div&gt;\n\n    &lt;/div&gt;\n\n    &lt;div class=\"actions\"&gt;\n        &lt;%= f.submit \"Sign in\", class: \"button button--primary button--full-width\" %&gt;\n    &lt;/div&gt;\n    &lt;div class=\"text-center mt-2\"&gt;\n        &lt;%- if devise_mapping.recoverable? &amp;&amp; controller_name != 'passwords' &amp;&amp; controller_name != 'registrations' %&gt;\n            &lt;%= link_to \"Forgot your password?\", new_password_path(resource_name) %&gt;\n                &lt;br /&gt;\n                &lt;% end -%&gt;\n    &lt;/div&gt;\n\n    &lt;% end %&gt;\n</code></pre>\n\n<p>Controllers routes and config have not been touched since changing the UI either</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1548826560, "post_id": 54431002, "comment_id": 95677238, "body": "It is not clear in what format you expect the input, and what arguments they should correspond to."}], "answers": [{"tags": [], "owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "is_accepted": false, "score": 1, "last_activity_date": 1548803619, "creation_date": 1548803619, "answer_id": 54431038, "question_id": 54431002, "link": "https://stackoverflow.com/questions/54431002/wrong-number-of-arguments-given-1-expected-2-argumenterror/54431038#54431038", "title": "wrong number of arguments (given 1, expected 2) (ArgumentError)", "body": "<p><code>gets.chomp</code> returns one value (which is whatever you typed in before pressing enter). That method expects two. If you're entering something like \"1024 768\", then you could split the input by the space. Something like this:</p>\n\n<pre><code>w, h = gets.chomp.split(' ')\nmy_screen = Screen.new(w, h)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 275, "user_id": 10976794, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h4oit.png?s=128&g=1", "display_name": "Bohdan Sviripa", "link": "https://stackoverflow.com/users/10976794/bohdan-sviripa"}, "is_accepted": false, "score": 2, "last_activity_date": 1548826364, "last_edit_date": 1548826364, "creation_date": 1548813499, "answer_id": 54432330, "question_id": 54431002, "link": "https://stackoverflow.com/questions/54431002/wrong-number-of-arguments-given-1-expected-2-argumenterror/54432330#54432330", "title": "wrong number of arguments (given 1, expected 2) (ArgumentError)", "body": "<p>You are passing wrong arguments to <code>Screen.new</code>. Your <code>initialize</code> method expects two arguments and you are passing only one.</p>\n\n<p>Try this: </p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>screen = Screen.new(gets.chomp, \"What is you're resolution?\")\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 10976659, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d10f4f201ab8e645fdbc7e0173ab9d61?s=128&d=identicon&r=PG&f=1", "display_name": "nouss", "link": "https://stackoverflow.com/users/10976659/nouss"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 736, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1548826364, "creation_date": 1548803352, "last_edit_date": 1548826349, "question_id": 54431002, "link": "https://stackoverflow.com/questions/54431002/wrong-number-of-arguments-given-1-expected-2-argumenterror", "title": "wrong number of arguments (given 1, expected 2) (ArgumentError)", "body": "<p>My goal is for a user to enter their screen resolution and store it in <code>screen_size</code>. I did this, but I have an error.</p>\n\n<pre><code>class Screen\n  attr_accessor :screen_size, :info\n\n  def initialize(screen_size, info)\n    @screen_size = screen_size\n    @info = info\n  end\nend\n\nmy_info = Screen.new(\"What is you're resolution?\")\nmy_screen = Screen.new(gets.chomp)\n# &gt;&gt; in `initialize': wrong number of arguments (given 1, expected 2) (ArgumentError)\n</code></pre>\n\n<p>How can I solve this?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3", "sorting", "ruby-on-rails-3.2"], "comments": [{"owner": {"reputation": 4948, "user_id": 1025520, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/f9f78456abe7adce324b230d947696e4?s=128&d=identicon&r=PG", "display_name": "NeverBe", "link": "https://stackoverflow.com/users/1025520/neverbe"}, "edited": false, "score": 1, "creation_date": 1548848679, "post_id": 54430151, "comment_id": 95688835, "body": "honestly too hard to read your code, could you provide params of action and data structure? and the result of it."}, {"owner": {"reputation": 63, "user_id": 9633658, "user_type": "registered", "profile_image": "https://graph.facebook.com/2109173902433349/picture?type=large", "display_name": "Jay", "link": "https://stackoverflow.com/users/9633658/jay"}, "reply_to_user": {"reputation": 4948, "user_id": 1025520, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/f9f78456abe7adce324b230d947696e4?s=128&d=identicon&r=PG", "display_name": "NeverBe", "link": "https://stackoverflow.com/users/1025520/neverbe"}, "edited": false, "score": 0, "creation_date": 1548864190, "post_id": 54430151, "comment_id": 95698519, "body": "I added changes, changed to code to try and make it more readable, and added example data. @NeverBe"}, {"owner": {"reputation": 4948, "user_id": 1025520, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/f9f78456abe7adce324b230d947696e4?s=128&d=identicon&r=PG", "display_name": "NeverBe", "link": "https://stackoverflow.com/users/1025520/neverbe"}, "edited": false, "score": 1, "creation_date": 1548864844, "post_id": 54430151, "comment_id": 95698926, "body": "much better, but i&#39;m not sure i understand everything. Are you going to implement something like this? <a href=\"https://github.com/swanandp/acts_as_list\" rel=\"nofollow noreferrer\">github.com/swanandp/acts_as_list</a>"}, {"owner": {"reputation": 63, "user_id": 9633658, "user_type": "registered", "profile_image": "https://graph.facebook.com/2109173902433349/picture?type=large", "display_name": "Jay", "link": "https://stackoverflow.com/users/9633658/jay"}, "reply_to_user": {"reputation": 4948, "user_id": 1025520, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/f9f78456abe7adce324b230d947696e4?s=128&d=identicon&r=PG", "display_name": "NeverBe", "link": "https://stackoverflow.com/users/1025520/neverbe"}, "edited": false, "score": 0, "creation_date": 1548865784, "post_id": 54430151, "comment_id": 95699546, "body": "Yes same general Idea, I just don&#39;t need all the functionality it provides."}, {"owner": {"reputation": 63, "user_id": 9633658, "user_type": "registered", "profile_image": "https://graph.facebook.com/2109173902433349/picture?type=large", "display_name": "Jay", "link": "https://stackoverflow.com/users/9633658/jay"}, "reply_to_user": {"reputation": 4948, "user_id": 1025520, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/f9f78456abe7adce324b230d947696e4?s=128&d=identicon&r=PG", "display_name": "NeverBe", "link": "https://stackoverflow.com/users/1025520/neverbe"}, "edited": false, "score": 0, "creation_date": 1548865822, "post_id": 54430151, "comment_id": 95699571, "body": "I also would like to actually understand where it is my logic failed instead of just using a gem or copy pasting someone else&#39;s code"}, {"owner": {"reputation": 4948, "user_id": 1025520, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/f9f78456abe7adce324b230d947696e4?s=128&d=identicon&r=PG", "display_name": "NeverBe", "link": "https://stackoverflow.com/users/1025520/neverbe"}, "edited": false, "score": 0, "creation_date": 1548868372, "post_id": 54430151, "comment_id": 95701110, "body": "ok,  plz paste the result of the logic. It is hard to get where is ID and index when you explain."}, {"owner": {"reputation": 63, "user_id": 9633658, "user_type": "registered", "profile_image": "https://graph.facebook.com/2109173902433349/picture?type=large", "display_name": "Jay", "link": "https://stackoverflow.com/users/9633658/jay"}, "reply_to_user": {"reputation": 4948, "user_id": 1025520, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/f9f78456abe7adce324b230d947696e4?s=128&d=identicon&r=PG", "display_name": "NeverBe", "link": "https://stackoverflow.com/users/1025520/neverbe"}, "edited": false, "score": 0, "creation_date": 1548869276, "post_id": 54430151, "comment_id": 95701574, "body": "turns out there is no problem with my logic.. the issue was how I was assigning indexes to my list items on my front end... after logging some of my data I realized where my problem was. Thank you for your time and sorry for wasting it!"}], "answers": [{"tags": [], "owner": {"reputation": 63, "user_id": 9633658, "user_type": "registered", "profile_image": "https://graph.facebook.com/2109173902433349/picture?type=large", "display_name": "Jay", "link": "https://stackoverflow.com/users/9633658/jay"}, "is_accepted": true, "score": 0, "last_activity_date": 1548869381, "creation_date": 1548869381, "answer_id": 54446261, "question_id": 54430151, "link": "https://stackoverflow.com/questions/54430151/how-to-move-all-values-above-or-below-an-insertion-up-one-or-down-one-in-a-hash/54446261#54446261", "title": "How to move all values above or below an insertion up one or down one in a hash", "body": "<p>There turned out to be no problem with my logic... just a problem in how I was assigning data in my front end which was mixing up the indexes occasionally which is why I believed the fornt end to be returning the correct data, after some digging I was assigning the tasks the wrong indexes on the front end therefore breaking the backend.</p>\n"}], "owner": {"reputation": 63, "user_id": 9633658, "user_type": "registered", "profile_image": "https://graph.facebook.com/2109173902433349/picture?type=large", "display_name": "Jay", "link": "https://stackoverflow.com/users/9633658/jay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "accepted_answer_id": 54446261, "answer_count": 1, "score": 0, "last_activity_date": 1548869381, "creation_date": 1548798650, "last_edit_date": 1548864145, "question_id": 54430151, "link": "https://stackoverflow.com/questions/54430151/how-to-move-all-values-above-or-below-an-insertion-up-one-or-down-one-in-a-hash", "title": "How to move all values above or below an insertion up one or down one in a hash", "body": "<p>This is for a drag and drop, I have the front end working correctly and it sends data correctly to my rails backend.</p>\n\n<p>I am attempting to sort a hash based on the index position that is incoming as well as only sort the Tasks that are part of the selected column <code>@tasks = Task.where(column_id: params[:column_id])</code>, If an index moves up the list, only update the values that are greater, and if the index moves down the list, only the values that are smaller need to be updated.</p>\n\n<p>I have tried many different variations of this loop, with this leading to the closest result but not quite right.</p>\n\n<pre><code>  @tasks = Task.where(column_id: params[:column_id])\n\n  @task = Task.find(params[:id])\n\n  if(@task.index &lt; params[:index]) \n   @tasks.each do |task|\n     next if task.id == params[:id] \n      if task.index &lt;= params[:index] &amp;&amp; task.index &gt; @task.index \n        task.update_attribute(:index, t[:index].to_i - 1)\n      end\n    end\n  else\n  @tasks.each do |task|\n    next if task.id == params[:id] \n      if task.index &gt;= params[:index] &amp;&amp; task.index &lt; @task.index\n        task.update_attribute(:index, task.index + 1)\n      end\n    end\n  end\n\n  @task.update_attribute(:index, params[:index].to_i)\n</code></pre>\n\n<p>My data looks like this</p>\n\n<pre><code>{ \"id\" =&gt; 1, \"column_id\" =&gt; 1, \"content\" =&gt; \"this is a task\" , \"index\" =&gt; 0}\n{ \"id\" =&gt; 2, \"column_id\" =&gt; 1, \"content\" =&gt; \"this is second task\" , \"index\" =&gt; 1}\n{ \"id\" =&gt; 3, \"column_id\" =&gt; 1, \"content\" =&gt; \"this is third task\" , \"index\" =&gt; 2}\n{ \"id\" =&gt; 4, \"column_id\" =&gt; 1, \"content\" =&gt; \"this is fourth task\" , \"index\" =&gt; 3}\n</code></pre>\n\n<p>In this data if I move the hash with id 4 to 1, 4s index should now be 0, 1s should be 1, 2 should be 2, and 3s should be 3, if 1 is moved to 4 its index should now be 3, 4 should be 2, 3 should be 1 and 2s should be 0.</p>\n\n<p>if 4 is moved to 2, the loop should not even run for task 1, or anything smaller than it since it should not be affected, the same would apply if 1 was moved to 3, in that case 4 or higher would not be touched.</p>\n"}, {"tags": ["ruby", "mongodb", "sinatra", "mongoid", "unicorn"], "comments": [{"owner": {"reputation": 4348, "user_id": 3435610, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/IBOFX.jpg?s=128&g=1", "display_name": "Sara Tibbetts", "link": "https://stackoverflow.com/users/3435610/sara-tibbetts"}, "edited": false, "score": 1, "creation_date": 1548794879, "post_id": 54428762, "comment_id": 95668761, "body": "If you remove <code>include Mongo</code> does the error change at all?"}, {"owner": {"reputation": 53, "user_id": 6719665, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-d7loesShAMA/AAAAAAAAAAI/AAAAAAAAABU/t50Nyo0pc7k/photo.jpg?sz=128", "display_name": "Amanda", "link": "https://stackoverflow.com/users/6719665/amanda"}, "reply_to_user": {"reputation": 4348, "user_id": 3435610, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/IBOFX.jpg?s=128&g=1", "display_name": "Sara Tibbetts", "link": "https://stackoverflow.com/users/3435610/sara-tibbetts"}, "edited": false, "score": 0, "creation_date": 1548825587, "post_id": 54428762, "comment_id": 95676951, "body": "@SaraTibbetts - No.  that was something that I added when I was trying to figure out what the heck was going on, and just forgot to remove.  Error is the same either way."}], "answers": [{"tags": [], "owner": {"reputation": 53, "user_id": 6719665, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-d7loesShAMA/AAAAAAAAAAI/AAAAAAAAABU/t50Nyo0pc7k/photo.jpg?sz=128", "display_name": "Amanda", "link": "https://stackoverflow.com/users/6719665/amanda"}, "is_accepted": true, "score": 0, "last_activity_date": 1549049655, "creation_date": 1549049655, "answer_id": 54486098, "question_id": 54428762, "link": "https://stackoverflow.com/questions/54428762/how-do-i-fix-nameerror-uninitialized-constant-mongoconnectionfailure/54486098#54486098", "title": "How do I fix &#39;NameError: uninitialized constant Mongo::ConnectionFailure", "body": "<p>It turns out the Gemfile.lock got corrupted somehow, and rake was using a newer version of mongo than heroku local was.  :-/</p>\n"}], "owner": {"reputation": 53, "user_id": 6719665, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-d7loesShAMA/AAAAAAAAAAI/AAAAAAAAABU/t50Nyo0pc7k/photo.jpg?sz=128", "display_name": "Amanda", "link": "https://stackoverflow.com/users/6719665/amanda"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 452, "favorite_count": 0, "accepted_answer_id": 54486098, "answer_count": 1, "score": 1, "last_activity_date": 1549049655, "creation_date": 1548792035, "last_edit_date": 1548870774, "question_id": 54428762, "link": "https://stackoverflow.com/questions/54428762/how-do-i-fix-nameerror-uninitialized-constant-mongoconnectionfailure", "title": "How do I fix &#39;NameError: uninitialized constant Mongo::ConnectionFailure", "body": "<p><strong>Update 2:</strong>\nI was able to further narrow it down to the fact that it apparently isn't loading <em>all</em> of Mongo's classes when I run the rake.  I added <code>puts Mongo.constants</code> in the config/boot.rb after <code>require 'mongo'</code>.  When I run the app, it outputs a long list including the Connection and ConnectionFailure classes.  When I attempt to run the rake, it outputs a much shorter list, and those two classes are missing.  What is going on here?</p>\n\n<p><strong>Update:</strong>\nBy rescuing a generic exception, I've eliminated the NameError for Mongo::ConnectionFailure and it is now throwing a NameError for Mongo::Connection.  So I guess it is a mongo load issue.</p>\n\n<p>When I do <code>puts defined? Mongo</code>, it prints <code>constant</code> when I run the app and when I run the rake.  However, <code>puts defined? Mongo::Connection</code> it prints <code>constant</code> when I run the app, but puts a blank line when I run the rake. </p>\n\n<p>The error is the same whether I require mongo from config/boot.rb or from app.rb. </p>\n\n<hr>\n\n<p>I'm new to ruby, and trying to set up an app with Sinatra, Unicorn, and Mongo/mongoid.  I'm trying to run a rake task and when I run <code>rake import:areas</code> I get the following error:</p>\n\n<pre><code>rake aborted!\nNameError: uninitialized constant Mongo::ConnectionFailure\n/home/amanda/Documents/development/app-name/app.rb:7:in `rescue in block in &lt;class:App&gt;'\n</code></pre>\n\n<p>The mongo server is running, and the code passes through an earlier Mongo::Connection call (where I would expect it to throw a NameError if mongo wasn't loaded) without error.  Watching the mongod console, it doesn't appear to be even hitting mongo, because there is no indication in the console logs of any connection attempt.</p>\n\n<p>When I run the app itself (using <code>heroku local</code> or <code>bundle exec unicorn -p $PORT -c \"/path/to/unicorn.rb\"</code>) it starts and listens on the appropriate port, and I can hit the root endpoint without issue.  Watching the mongod console as it starts up, I can see it successfully connect to the database.  I'm running the mongo gem version 1.10.2 and mongoid 3.1.6 (requirements for the codebase I'm working in).</p>\n\n<p>relevant lines of the rakefile:</p>\n\n<pre><code>require \"./config/boot\"\n\nnamespace \"import\" do\n    task \"areas\" do\n        # code here\n    end\nend\n</code></pre>\n\n<p>config/boot.rb:</p>\n\n<pre><code>require 'sinatra'\nrequire 'mongo'\nrequire 'mongoid'\nrequire './app'\n</code></pre>\n\n<p>mongoid.yml:</p>\n\n<pre><code>development:\n  clients:\n    default:\n      database: db-name\n      hosts:\n        - localhost:27017\n      options:\n  options:\n</code></pre>\n\n<p>app.rb:</p>\n\n<pre><code>class App &lt; Sinatra::Base\n  configure do\n    # mongo\n    begin\n      mongo_db = Mongo::Connection.new.db \"db-name\"\n      set :mongo_db, mongo_db\n    rescue Mongo::ConnectionFailure\n      set :mongo_db, {}\n    end\n  end\n  # more code here\nend\n</code></pre>\n\n<p>What am I missing here?  Nothing I've googled has seemed like this issue.  I would expect this error to be thrown at <code>Mongo::Connection</code> and not at the <code>Mongo::ConnectionFailure</code> line.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 1217, "user_id": 10430642, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p5jzL.jpg?s=128&g=1", "display_name": "Dimitrius Lachi", "link": "https://stackoverflow.com/users/10430642/dimitrius-lachi"}, "edited": false, "score": 1, "creation_date": 1548790094, "post_id": 54428297, "comment_id": 95666761, "body": "Can you post how your DateTime/UTC is setting on yout rails application?"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1548790546, "post_id": 54428297, "comment_id": 95666960, "body": "It&#39;s conventional in Ruby to omit empty arguments, so <code>def date_of_next</code> is all you need, no <code>()</code> on the end. Likewise, Ruby implicitly returns the last value, so the <code>return</code> on the last line is redundant."}], "answers": [{"comments": [{"owner": {"reputation": 57, "user_id": 10387989, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-L-OQAZfcKTE/AAAAAAAAAAI/AAAAAAAAAA8/EvRiikg-sms/photo.jpg?sz=128", "display_name": "Trs MTV", "link": "https://stackoverflow.com/users/10387989/trs-mtv"}, "edited": false, "score": 0, "creation_date": 1548790491, "post_id": 54428416, "comment_id": 95666933, "body": "I checked whether there was a problem, but it did not change anything"}, {"owner": {"reputation": 1217, "user_id": 10430642, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p5jzL.jpg?s=128&g=1", "display_name": "Dimitrius Lachi", "link": "https://stackoverflow.com/users/10430642/dimitrius-lachi"}, "edited": false, "score": 1, "creation_date": 1548790609, "post_id": 54428416, "comment_id": 95666997, "body": "You really want to use the <code>&#39;%Y-%w-%d&#39;</code>, <code>%w</code> returns the number of week day"}, {"owner": {"reputation": 4948, "user_id": 1025520, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/f9f78456abe7adce324b230d947696e4?s=128&d=identicon&r=PG", "display_name": "NeverBe", "link": "https://stackoverflow.com/users/1025520/neverbe"}, "edited": false, "score": 0, "creation_date": 1548790674, "post_id": 54428416, "comment_id": 95667029, "body": "if you use format &#39;%Y-%w-%d&#39; you couldn&#39;t get 28-01-2019 04-02-2019"}, {"owner": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "edited": false, "score": 0, "creation_date": 1548791860, "post_id": 54428416, "comment_id": 95667505, "body": "Also <code>date.next_week.strftime(&#39;%Y-%m-%d&#39;)</code>. <code>%w - Day of the week (Sunday is 0, 0..6)</code>, so Monday is 1."}], "tags": [], "owner": {"reputation": 4948, "user_id": 1025520, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/f9f78456abe7adce324b230d947696e4?s=128&d=identicon&r=PG", "display_name": "NeverBe", "link": "https://stackoverflow.com/users/1025520/neverbe"}, "is_accepted": false, "score": 1, "last_activity_date": 1548790327, "creation_date": 1548790327, "answer_id": 54428416, "question_id": 54428297, "link": "https://stackoverflow.com/questions/54428297/how-to-add-a-number-to-the-date-ruby/54428416#54428416", "title": "How to add a number to the date ruby", "body": "<p>Maybe you mixed date format?</p>\n\n<pre><code>def date_of_next()\n date = Date.parse('Monday')\n delta = date &gt; Date.today ? 0 : 7\n date + delta\n return date.strftime('%Y-%m-%d'), (date + 7).strftime('%Y-%m-%d')\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 630, "user_id": 5763672, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a3ca5c235400320ab800200c6677574?s=128&d=identicon&r=PG", "display_name": "Sebastian Scholl", "link": "https://stackoverflow.com/users/5763672/sebastian-scholl"}, "is_accepted": true, "score": 1, "last_activity_date": 1548794490, "creation_date": 1548794490, "answer_id": 54429259, "question_id": 54428297, "link": "https://stackoverflow.com/questions/54428297/how-to-add-a-number-to-the-date-ruby/54429259#54429259", "title": "How to add a number to the date ruby", "body": "<p>I think you're going a little heavy on your code for a method that returns Monday this Week and Monday next week.</p>\n\n<pre><code> def beginning_of_weeks\n   monday = Date.new.beginning_of_week\n   return monday, monday + 7.days\n end\n</code></pre>\n\n<p>You can, of course, add the formatting function <code>strftime('%Y-%m-%d')</code> inside the method, though it would be better organized somewhere else.</p>\n"}], "owner": {"reputation": 57, "user_id": 10387989, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-L-OQAZfcKTE/AAAAAAAAAAI/AAAAAAAAAA8/EvRiikg-sms/photo.jpg?sz=128", "display_name": "Trs MTV", "link": "https://stackoverflow.com/users/10387989/trs-mtv"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "accepted_answer_id": 54429259, "answer_count": 2, "score": -2, "last_activity_date": 1548794490, "creation_date": 1548789823, "last_edit_date": 1548790871, "question_id": 54428297, "link": "https://stackoverflow.com/questions/54428297/how-to-add-a-number-to-the-date-ruby", "title": "How to add a number to the date ruby", "body": "<p>I have method:</p>\n\n<pre><code>def date_of_next()\n date = Date.parse('Monday')\n delta = date &gt; Date.today ? 0 : 7\n date + delta\n return date.strftime('%Y-%w-%d'), (date + 7).strftime('%Y-%w-%d')\nend\n</code></pre>\n\n<p>This method specifies the date of Monday this week.\nIn return, I also return the date of Monday next week, but it does not display the date that needs to be</p>\n\n<p>if I run this method in the .rb file then it prints everything well</p>\n\n<pre><code> 2019-01-28\n 2019-02-4\n</code></pre>\n\n<p>but if run this method in rails controller, there is a problem with the date</p>\n\n<pre><code>2019-01-28\n2019-01-04\n</code></pre>\n\n<p>As you see, there is a problem with the date of the month.\nI do not understand what the problem is, help</p>\n"}, {"tags": ["ruby", "amazon-s3", "aws-sdk", "aws-sdk-ruby"], "owner": {"reputation": 41, "user_id": 10986495, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d7a73fe38576f80c550158f2e82de8c?s=128&d=identicon&r=PG&f=1", "display_name": "Daaniell", "link": "https://stackoverflow.com/users/10986495/daaniell"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 335, "favorite_count": 0, "answer_count": 0, "score": 4, "last_activity_date": 1548788072, "creation_date": 1548788072, "question_id": 54427886, "link": "https://stackoverflow.com/questions/54427886/s3-copy-object-between-regions-in-ruby", "title": "S3 copy_object between regions in ruby", "body": "<p>How to coppy files between buckets in diffrent regions in AWS S3 using ruby aws-sdk-s3 gem?\nBuckets are in regions: '<strong>eu-central-1</strong>' (target_bucket) and '<strong>eu-west-1</strong>' (source_bucket).\nI want to make copy of <strong>s3://source_bucket/name_base.checksum</strong> to <strong>s3://target_bucket/source_bucket/name_base.checksum</strong></p>\n\n<p>Error:</p>\n\n<pre><code>[ERROR] The bucket you are attempting to access must be addressed using the specified endpoint. Please send all future requests to this endpoint.\n</code></pre>\n\n<p>Testing ruby code:</p>\n\n<pre><code>require 'aws-sdk-s3'\n\nsource_bucket = 'source_bucket'\ntarget_bucket = 'target_bucket'\nname_base = 'funny_name'\n\nbegin\n  s3 = Aws::S3::Client.new(\n    access_key_id: '***',\n    secret_access_key: '***',\n    region: 'eu-west-1' # I tested also 'eu-central-1'\n  )\n\n  s3.copy_object({\n    bucket: \"#{target_bucket}\",\n    copy_source: \"#{source_bucket}/#{name_base}.checksum\",\n    key: \"#{source_bucket}/#{name_base}.checksum\"\n  })\nrescue Aws::S3::Errors::ServiceError =&gt; e\n  puts \"[ERROR] #{e.message}\"\nend\n</code></pre>\n\n<p>I can't find any usefull information about this use case in documentation:\n  <a href=\"https://docs.aws.amazon.com/AmazonS3/latest/dev/CopyingObjectUsingRuby.html\" rel=\"nofollow noreferrer\">https://docs.aws.amazon.com/AmazonS3/latest/dev/CopyingObjectUsingRuby.html</a>\n  <a href=\"https://docs.aws.amazon.com/sdkforruby/api/Aws/S3/Client.html#copy_object-instance_method\" rel=\"nofollow noreferrer\">https://docs.aws.amazon.com/sdkforruby/api/Aws/S3/Client.html#copy_object-instance_method</a></p>\n\n<p>I found old thread from 2011 I hope something changed in this case: \n  <a href=\"https://stackoverflow.com/questions/4602992/amazon-s3-region-transfer\">Amazon S3 region transfer?</a></p>\n\n<p>Any news?</p>\n"}, {"tags": ["ruby", "homebrew"], "answers": [{"comments": [{"owner": {"reputation": 45322, "user_id": 421705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/581b1760881c962648f99d6040d41829?s=128&d=identicon&r=PG", "display_name": "Holger Just", "link": "https://stackoverflow.com/users/421705/holger-just"}, "edited": false, "score": 0, "creation_date": 1548797790, "post_id": 54427553, "comment_id": 95669990, "body": "Could you please edit your answer to include the information from the link? That way, the information will be provided here even when the linked to article vanishes in the future."}, {"owner": {"reputation": 2989, "user_id": 1009655, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/K3jdk.png?s=128&g=1", "display_name": "Frederik Spang", "link": "https://stackoverflow.com/users/1009655/frederik-spang"}, "edited": false, "score": 0, "creation_date": 1548798287, "post_id": 54427553, "comment_id": 95670194, "body": "<a href=\"https://github.com/Homebrew/brew/blob/master/docs/Installation.md\" rel=\"nofollow noreferrer\">github.com/Homebrew/brew/blob/master/docs/Installation.md</a> - &quot;A Bourne-compatible shell for installation (e.g. bash or zsh) -  The one-liner installation method found on brew.sh requires a Bourne-compatible shell (e.g. bash or zsh). Notably, fish, tcsh and csh will not work.&quot;"}], "tags": [], "owner": {"reputation": 103, "user_id": 10946251, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hUJXb.jpg?s=128&g=1", "display_name": "coda", "link": "https://stackoverflow.com/users/10946251/coda"}, "is_accepted": true, "score": 2, "last_activity_date": 1548797967, "last_edit_date": 1548797967, "creation_date": 1548786891, "answer_id": 54427553, "question_id": 54427179, "link": "https://stackoverflow.com/questions/54427179/installing-homebrew-doesnt-work-on-mojave/54427553#54427553", "title": "Installing HomeBrew doesn&#39;t work on Mojave", "body": "<p>Maybe this is the same issue? <a href=\"https://discourse.brew.sh/t/illegal-variable-name-error-mac-high-sierra/3361/2\" rel=\"nofollow noreferrer\">https://discourse.brew.sh/t/illegal-variable-name-error-mac-high-sierra/3361/2</a>. </p>\n\n<pre><code>could you run bash before pasting /usr/bin/ruby -e \"$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)\" there?\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 446, "user_id": 8188304, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ft003dDZMXI/AAAAAAAAAAI/AAAAAAAAAAA/EyCq0D980AU/photo.jpg?sz=128", "display_name": "Sidharth Taneja", "link": "https://stackoverflow.com/users/8188304/sidharth-taneja"}, "is_accepted": false, "score": 1, "last_activity_date": 1562903394, "creation_date": 1562903394, "answer_id": 56999967, "question_id": 54427179, "link": "https://stackoverflow.com/questions/54427179/installing-homebrew-doesnt-work-on-mojave/56999967#56999967", "title": "Installing HomeBrew doesn&#39;t work on Mojave", "body": "<p>Simply open the terminal. Write the command as </p>\n\n<pre><code>bash\n</code></pre>\n\n<p>and press Enter button. Paste the same command as - </p>\n\n<pre><code>ruby -e \"$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)\"\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user420479"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 405, "favorite_count": 0, "accepted_answer_id": 54427553, "answer_count": 2, "score": 1, "last_activity_date": 1562903394, "creation_date": 1548785400, "question_id": 54427179, "link": "https://stackoverflow.com/questions/54427179/installing-homebrew-doesnt-work-on-mojave", "title": "Installing HomeBrew doesn&#39;t work on Mojave", "body": "<p>I type in Terminal:</p>\n\n<pre><code>/usr/bin/ruby -e \"$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)\"\n</code></pre>\n\n<p>and I get back</p>\n\n<pre><code>illegal variable name\n</code></pre>\n\n<p>Any recommendations?</p>\n"}, {"tags": ["ruby", "ruby-on-rails-3", "rubymine"], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 8012935, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-lKHlzVgK-t8/AAAAAAAAAAI/AAAAAAAAAIw/hqZyj3XRgTQ/photo.jpg?sz=128", "display_name": "Ravi Challa", "link": "https://stackoverflow.com/users/8012935/ravi-challa"}, "edited": false, "score": 0, "creation_date": 1548783272, "post_id": 54426382, "comment_id": 95663367, "body": "I ran two above commands: gem install bundler and bundle install. The error showing is :&quot; Bundler 2 requires Ruby 2.3 or later. Either install bundler 1 or update to a supported Ruby version.&quot; But ruby -v gives ruby 2.6. And bundle -v gives Bundler version 1.17.2"}, {"owner": {"reputation": 5471, "user_id": 6019903, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/e7h7I.png?s=128&g=1", "display_name": "Brad", "link": "https://stackoverflow.com/users/6019903/brad"}, "reply_to_user": {"reputation": 13, "user_id": 8012935, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-lKHlzVgK-t8/AAAAAAAAAAI/AAAAAAAAAIw/hqZyj3XRgTQ/photo.jpg?sz=128", "display_name": "Ravi Challa", "link": "https://stackoverflow.com/users/8012935/ravi-challa"}, "edited": false, "score": 0, "creation_date": 1548783496, "post_id": 54426382, "comment_id": 95663466, "body": "It is possible you have more than one version of ruby on your machine. It may be worth doing a clean install of ruby and getting the latest version. you could alternativley use a version manager like Rbenv. Also if you are running a rails project someone else wrote, you may need to use the ruby version specified at the top of their gemfile or you may run into other issues later on"}, {"owner": {"reputation": 3201, "user_id": 2892779, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uvM8S.jpg?s=128&g=1", "display_name": "Jay Dorsey", "link": "https://stackoverflow.com/users/2892779/jay-dorsey"}, "reply_to_user": {"reputation": 13, "user_id": 8012935, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-lKHlzVgK-t8/AAAAAAAAAAI/AAAAAAAAAIw/hqZyj3XRgTQ/photo.jpg?sz=128", "display_name": "Ravi Challa", "link": "https://stackoverflow.com/users/8012935/ravi-challa"}, "edited": false, "score": 0, "creation_date": 1548810787, "post_id": 54426382, "comment_id": 95673647, "body": "@RaviChalla take a look here: <a href=\"https://stackoverflow.com/a/54068004/2892779\">stackoverflow.com/a/54068004/2892779</a>"}, {"owner": {"reputation": 13, "user_id": 8012935, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-lKHlzVgK-t8/AAAAAAAAAAI/AAAAAAAAAIw/hqZyj3XRgTQ/photo.jpg?sz=128", "display_name": "Ravi Challa", "link": "https://stackoverflow.com/users/8012935/ravi-challa"}, "reply_to_user": {"reputation": 3201, "user_id": 2892779, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uvM8S.jpg?s=128&g=1", "display_name": "Jay Dorsey", "link": "https://stackoverflow.com/users/2892779/jay-dorsey"}, "edited": false, "score": 0, "creation_date": 1548941670, "post_id": 54426382, "comment_id": 95731617, "body": "@JayDorsey Bundle version changed to 1.17.3 ."}, {"owner": {"reputation": 13, "user_id": 8012935, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-lKHlzVgK-t8/AAAAAAAAAAI/AAAAAAAAAIw/hqZyj3XRgTQ/photo.jpg?sz=128", "display_name": "Ravi Challa", "link": "https://stackoverflow.com/users/8012935/ravi-challa"}, "edited": false, "score": 0, "creation_date": 1548942159, "post_id": 54426382, "comment_id": 95731915, "body": "And when I tried to run project in RubyMine, &quot;No Rails found in SDK&quot; error popped. so ran &quot;sudo gem install rails&quot;,that solved that issue but ,opened issue  &quot; Could not find capybara-webkit-1.10.1 in any of the sources&quot;"}, {"owner": {"reputation": 5471, "user_id": 6019903, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/e7h7I.png?s=128&g=1", "display_name": "Brad", "link": "https://stackoverflow.com/users/6019903/brad"}, "edited": false, "score": 0, "creation_date": 1548946653, "post_id": 54426382, "comment_id": 95734596, "body": "If you have run bundler but rubymine is saying you are still missing all these gems I would think that this is again related to having more than one ruby version and Rubymine is configured to use the wrong SDK. Go into preferences and under Languages &amp; Frameworks, then Ruby SDK and Gems and make sure the correct version of ruby is selected"}, {"owner": {"reputation": 3201, "user_id": 2892779, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uvM8S.jpg?s=128&g=1", "display_name": "Jay Dorsey", "link": "https://stackoverflow.com/users/2892779/jay-dorsey"}, "reply_to_user": {"reputation": 13, "user_id": 8012935, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-lKHlzVgK-t8/AAAAAAAAAAI/AAAAAAAAAIw/hqZyj3XRgTQ/photo.jpg?sz=128", "display_name": "Ravi Challa", "link": "https://stackoverflow.com/users/8012935/ravi-challa"}, "edited": false, "score": 1, "creation_date": 1548948186, "post_id": 54426382, "comment_id": 95735673, "body": "@RaviChalla the fact that you had to (or chose to) use <code>sudo</code> to call gem install means you&#39;re probably usualy system ruby, rather than a version from a ruby version manager (rvm, rbenv, asdf-ruby). You definitely want to take the time to choose one, set it up, and configure it correctly. Using system ruby to install gems and manage your ruby version is going to cause more headaches than setting up a version manager. My preferred is asdf/asdf-ruby, but lots of people like rvm &amp; rbenv also."}], "tags": [], "owner": {"reputation": 5471, "user_id": 6019903, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/e7h7I.png?s=128&g=1", "display_name": "Brad", "link": "https://stackoverflow.com/users/6019903/brad"}, "is_accepted": false, "score": 0, "last_activity_date": 1548782321, "creation_date": 1548782321, "answer_id": 54426382, "question_id": 54426327, "link": "https://stackoverflow.com/questions/54426327/ruby-project-run-time-error-require-cannot-load-such-file-bundler-loaderr/54426382#54426382", "title": "Ruby Project Run time Error- require&#39;: cannot load such file -- bundler (LoadError)", "body": "<p>Its seems you are missing the bundler gem which is the gem responsible for installing all other gems.</p>\n\n<p>1) Install bundler first <code>gem install bundler</code></p>\n\n<p>2) Use bundler to install the other gems, so from the root directory of the project, run <code>bundle install</code></p>\n\n<p>Hopefully that should sort it out</p>\n"}], "owner": {"reputation": 13, "user_id": 8012935, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-lKHlzVgK-t8/AAAAAAAAAAI/AAAAAAAAAIw/hqZyj3XRgTQ/photo.jpg?sz=128", "display_name": "Ravi Challa", "link": "https://stackoverflow.com/users/8012935/ravi-challa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 709, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1548782321, "creation_date": 1548782108, "question_id": 54426327, "link": "https://stackoverflow.com/questions/54426327/ruby-project-run-time-error-require-cannot-load-such-file-bundler-loaderr", "title": "Ruby Project Run time Error- require&#39;: cannot load such file -- bundler (LoadError)", "body": "<p>I tried running a gitproject , <a href=\"https://github.com/jmopr/job-hunter\" rel=\"nofollow noreferrer\">https://github.com/jmopr/job-hunter</a> \nin RubyMine IDE. And while running the project from menu  in RubyMine IDE, the error produced is this.</p>\n\n<p>--------------------------(START)-Output for run of project------------</p>\n\n<p>/usr/bin/ruby /Applications/software/projects/gitprojects/job-hunter_rb/bin/rails server -b 0.0.0.0 -p 3000 -e development\n/System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/rubygems/core_ext/kernel_require.rb:55:in <code>require': cannot load such file -- bundler (LoadError)\n    from /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/rubygems/core_ext/kernel_require.rb:55:in</code>require'\n    from /Applications/software/projects/gitprojects/job-hunter_rb/bin/spring:8:in <code>&lt;top (required)&gt;'\n    from /Applications/software/projects/gitprojects/job-hunter_rb/bin/rails:3:in</code>load'\n    from /Applications/software/projects/gitprojects/job-hunter_rb/bin/rails:3:in `'</p>\n\n<p>Process finished with exit code 1</p>\n\n<p>--------------------------(END)-Output for run of project------------</p>\n\n<ul>\n<li>Specs:</li>\n</ul>\n\n<p><strong>Ruby Version</strong> (ruby 2.6.0p0 (2018-12-25 revision 66547) [x86_64-darwin16] ) </p>\n\n<p><strong>rails -v</strong>\nCould not find proper version of railties (4.2.5.1) in any of the sources\nRun <code>bundle install</code> to install missing gems.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "paperclip"], "comments": [{"owner": {"reputation": 1534, "user_id": 4453714, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fv4Fb.jpg?s=128&g=1", "display_name": "Yurii Verbytskyi", "link": "https://stackoverflow.com/users/4453714/yurii-verbytskyi"}, "edited": false, "score": 0, "creation_date": 1548782621, "post_id": 54425766, "comment_id": 95663050, "body": "Looks like its reported issue, but as paperclip is deprecated, this wont be fixed(  <a href=\"https://github.com/thoughtbot/paperclip/issues/2345\" rel=\"nofollow noreferrer\">github.com/thoughtbot/paperclip/issues/2345</a>"}], "answers": [{"comments": [{"owner": {"reputation": 117, "user_id": 6211950, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/95f2a22cba432e6773ac8452d6b5f86c?s=128&d=identicon&r=PG&f=1", "display_name": "Lucas Juarez", "link": "https://stackoverflow.com/users/6211950/lucas-juarez"}, "edited": false, "score": 0, "creation_date": 1548780767, "post_id": 54425891, "comment_id": 95662089, "body": "yes! i&#39;ve tried that before, but nil is the value i want to fetch, and not an empty string"}, {"owner": {"reputation": 117, "user_id": 6211950, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/95f2a22cba432e6773ac8452d6b5f86c?s=128&d=identicon&r=PG&f=1", "display_name": "Lucas Juarez", "link": "https://stackoverflow.com/users/6211950/lucas-juarez"}, "edited": false, "score": 0, "creation_date": 1548780788, "post_id": 54425891, "comment_id": 95662104, "body": "cause if the image is not present, the most consistent value to get is nil"}, {"owner": {"reputation": 6165, "user_id": 2697183, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65255fe741b95ba0c641d96ea6750ea9?s=128&d=identicon&r=PG&f=1", "display_name": "AbM", "link": "https://stackoverflow.com/users/2697183/abm"}, "reply_to_user": {"reputation": 117, "user_id": 6211950, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/95f2a22cba432e6773ac8452d6b5f86c?s=128&d=identicon&r=PG&f=1", "display_name": "Lucas Juarez", "link": "https://stackoverflow.com/users/6211950/lucas-juarez"}, "edited": false, "score": 0, "creation_date": 1548781248, "post_id": 54425891, "comment_id": 95662384, "body": "@LucasJuarez passing <code>nil</code> to <code>default_url</code> raises an exception. I added another solution"}], "tags": [], "owner": {"reputation": 6165, "user_id": 2697183, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65255fe741b95ba0c641d96ea6750ea9?s=128&d=identicon&r=PG&f=1", "display_name": "AbM", "link": "https://stackoverflow.com/users/2697183/abm"}, "is_accepted": false, "score": 1, "last_activity_date": 1548781224, "last_edit_date": 1548781224, "creation_date": 1548780562, "answer_id": 54425891, "question_id": 54425766, "link": "https://stackoverflow.com/questions/54425766/how-to-return-nil-when-no-image-is-present-in-paperclip/54425891#54425891", "title": "How to return nil when no image is present in paperclip?", "body": "<p>You can set the <code>default_url</code> as outlined <a href=\"https://github.com/thoughtbot/paperclip#models\" rel=\"nofollow noreferrer\">here</a>:</p>\n\n<pre><code> has_attached_file :onboarding_image, default_url: ''\n</code></pre>\n\n<p>Another approach is to override the <code>onboarding_image_url</code> method:</p>\n\n<pre><code>  def onboarding_image_url(default_value=nil)\n    onboarding_image.present? ? onboarding_image.url : default_value\n  end\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 117, "user_id": 6211950, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/95f2a22cba432e6773ac8452d6b5f86c?s=128&d=identicon&r=PG&f=1", "display_name": "Lucas Juarez", "link": "https://stackoverflow.com/users/6211950/lucas-juarez"}, "edited": false, "score": 0, "creation_date": 1548868133, "post_id": 54426261, "comment_id": 95700966, "body": "good, i know these kind of approaches, the idea is to make it with some configuration, imagine that i have ten of has_attached_file in one model, and i have like 20 models with attached files. So, the idea is not to create new methods to check these things but make it with some config"}, {"owner": {"reputation": 1099, "user_id": 1967868, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/38a7404c188b85337c9613bc2cc7cd93?s=128&d=identicon&r=PG", "display_name": "zauzaj", "link": "https://stackoverflow.com/users/1967868/zauzaj"}, "reply_to_user": {"reputation": 117, "user_id": 6211950, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/95f2a22cba432e6773ac8452d6b5f86c?s=128&d=identicon&r=PG&f=1", "display_name": "Lucas Juarez", "link": "https://stackoverflow.com/users/6211950/lucas-juarez"}, "edited": false, "score": 0, "creation_date": 1548932765, "post_id": 54426261, "comment_id": 95726191, "body": "@LucasJuarez I get it.. that&#39;s another question as well, but you can do smthg with meta programming where you would define dynamic methods that would be created in run time whenever you need some check. You can put it in this concern and include wherever you need"}], "tags": [], "owner": {"reputation": 1099, "user_id": 1967868, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/38a7404c188b85337c9613bc2cc7cd93?s=128&d=identicon&r=PG", "display_name": "zauzaj", "link": "https://stackoverflow.com/users/1967868/zauzaj"}, "is_accepted": false, "score": 0, "last_activity_date": 1548781845, "creation_date": 1548781845, "answer_id": 54426261, "question_id": 54425766, "link": "https://stackoverflow.com/questions/54425766/how-to-return-nil-when-no-image-is-present-in-paperclip/54426261#54426261", "title": "How to return nil when no image is present in paperclip?", "body": "<p>if you have this attached files on multiple models, you can create concern for all classes that have <code>has_attached_file</code> :</p>\n\n<pre><code>module BoardUrl\n  def board_url\n    onboarding_image.present? ? onboarding_image.url : nil\n  end\nend\n</code></pre>\n\n<pre><code>class Retailer\n  include BoardUrl\nend\n</code></pre>\n\n<p>This way you can use your <code>board_url</code> method on any model you need.</p>\n"}], "owner": {"reputation": 117, "user_id": 6211950, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/95f2a22cba432e6773ac8452d6b5f86c?s=128&d=identicon&r=PG&f=1", "display_name": "Lucas Juarez", "link": "https://stackoverflow.com/users/6211950/lucas-juarez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 137, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1548781845, "creation_date": 1548780111, "question_id": 54425766, "link": "https://stackoverflow.com/questions/54425766/how-to-return-nil-when-no-image-is-present-in-paperclip", "title": "How to return nil when no image is present in paperclip?", "body": "<p>I have one model that is </p>\n\n<pre><code>class Retailer &lt; ActiveRecord::Base\n  ...\n    has_attached_file :onboarding_image\n  ...\nend\n</code></pre>\n\n<p>If the onboarding_image is not present, when doing <code>retailer.onboarding_image_url</code> i'm getting: \"/onboarding_images/original/missing.png\"</p>\n\n<p>Is there a config to get <code>nil</code> when no image is present? i know that i can do something like</p>\n\n<p><code>retailer.onboarding_image.present? ? retailer.onboarding_image : nil</code> but that is not the approach i want to follow, cause i have thousand of attached_files in all of my code.</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "edited": false, "score": 1, "creation_date": 1548779707, "post_id": 54425617, "comment_id": 95661475, "body": "<a href=\"https://stackoverflow.com/questions/3393096/how-can-i-get-source-code-of-a-method-dynamically-and-also-which-file-is-this-me/46966145#46966145\" title=\"how can i get source code of a method dynamically and also which file is this me\">stackoverflow.com/questions/3393096/&hellip;</a>"}, {"owner": {"reputation": 14111, "user_id": 5783745, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/Z5VSF.jpg?s=128&g=1", "display_name": "stevec", "link": "https://stackoverflow.com/users/5783745/stevec"}, "reply_to_user": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "edited": false, "score": 0, "creation_date": 1548873610, "post_id": 54425617, "comment_id": 95703705, "body": "@mrzasa I dropped the code blocks into irb and the first one errors with <code>TypeError (no implicit conversion of nil into String)</code>. The second one doesn&#39;t error. But when I call <code>.source</code> on an existing method, it errors. E.g. <code>class.method</code> and <code>&quot;class&quot;.method</code> both error."}, {"owner": {"reputation": 14111, "user_id": 5783745, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/Z5VSF.jpg?s=128&g=1", "display_name": "stevec", "link": "https://stackoverflow.com/users/5783745/stevec"}, "reply_to_user": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "edited": false, "score": 0, "creation_date": 1548874126, "post_id": 54425617, "comment_id": 95703991, "body": "@mrzasa I guess what I&#39;m saying is I can read the answer but I don&#39;t know what to actually do with it. Do I copy the code into irb? Can you give an example of how to call the method?"}], "answers": [{"tags": [], "owner": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "is_accepted": false, "score": 0, "last_activity_date": 1548922122, "creation_date": 1548922122, "answer_id": 54455935, "question_id": 54425617, "link": "https://stackoverflow.com/questions/54425617/how-to-return-to-the-interactive-ruby-shell-the-code-that-runs-when-a-method-i/54455935#54455935", "title": "How to return (to the Interactive Ruby Shell) the code that runs when a method is called", "body": "<p>Quoting <a href=\"https://stackoverflow.com/a/46966145/580346\">https://stackoverflow.com/a/46966145/580346</a>:</p>\n\n<pre><code>method = SomeConstant.method(:some_method_name)\nfile_path, line = method.source_location\n# puts 10 lines start from the method define \nIO.readlines(file_path)[line-1, 10]\n</code></pre>\n\n<p>If you want use this more conveniently, your can open the Method class:</p>\n\n<pre><code># ~/.irbrc\nclass Method\n  def source(limit=10)\n    file, line = source_location\n    if file &amp;&amp; line\n      IO.readlines(file)[line-1,limit]\n    else\n      nil\n    end\n  end\nend\n</code></pre>\n\n<p>Paste above code to your irb and then call <code>YourConstant.method(:your_method).source</code></p>\n"}], "owner": {"reputation": 14111, "user_id": 5783745, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/Z5VSF.jpg?s=128&g=1", "display_name": "stevec", "link": "https://stackoverflow.com/users/5783745/stevec"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 48, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1548922122, "creation_date": 1548779612, "question_id": 54425617, "link": "https://stackoverflow.com/questions/54425617/how-to-return-to-the-interactive-ruby-shell-the-code-that-runs-when-a-method-i", "title": "How to return (to the Interactive Ruby Shell) the code that runs when a method is called", "body": "<p>In other languages I have seen ways of showing the code that makes up a function or method. Is there a way to do this in the IRB? </p>\n\n<p>Example, in R, you can simply type a function without the <code>()</code> and it will tell you what code will run when the function is called. Simple example <a href=\"https://rextester.com/BOUJ26149\" rel=\"nofollow noreferrer\">here</a></p>\n\n<p>Is this possible in IRB? (preferably without <a href=\"https://stackoverflow.com/questions/7190146/in-irb-can-i-view-the-source-of-a-method-i-defined-earlier\">pry</a> or any other gems)</p>\n"}, {"tags": ["ruby", "bash", "rubygems", "windows-subsystem-for-linux"], "comments": [{"owner": {"reputation": 3119, "user_id": 4842949, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-0agpj31wtZ8/AAAAAAAAAAI/AAAAAAAAAAA/mSolbNN-zIY/photo.jpg?sz=128", "display_name": "Joseph Cho", "link": "https://stackoverflow.com/users/4842949/joseph-cho"}, "edited": false, "score": 0, "creation_date": 1548772432, "post_id": 54423227, "comment_id": 95656643, "body": "Generally there&#39;s more output after the last line: <code>ERROR: Failed to build gem native extension.</code>. Is there any more hints afterwards?"}, {"owner": {"reputation": 11, "user_id": 10975978, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-vn-FpP5PKTc/AAAAAAAAAAI/AAAAAAAAAIo/vkJlmFLa0p0/photo.jpg?sz=128", "display_name": "Purple Scientist", "link": "https://stackoverflow.com/users/10975978/purple-scientist"}, "reply_to_user": {"reputation": 3119, "user_id": 4842949, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-0agpj31wtZ8/AAAAAAAAAAI/AAAAAAAAAAA/mSolbNN-zIY/photo.jpg?sz=128", "display_name": "Joseph Cho", "link": "https://stackoverflow.com/users/4842949/joseph-cho"}, "edited": false, "score": 0, "creation_date": 1548772673, "post_id": 54423227, "comment_id": 95656821, "body": "<code>current directory: &#47;home&#47;[user]&#47;.ruby&#47;gems&#47;http_parser.rb-0.6.0&#47;ext&#47;ruby_http_p&zwnj;&#8203;arser  &#47;usr&#47;bin&#47;ruby2.5 -r .&#47;siteconf20190129-18-14vc5x8.rb extconf.rb creating Makefile  current directory: &#47;home&#47;[user]&#47;.ruby&#47;gems&#47;http_parser.rb-0.6.0&#47;ext&#47;ruby_http_p&zwnj;&#8203;arser make &quot;DESTDIR=&quot; clean sh: 1: make: not found  current directory: &#47;home&#47;[user]&#47;.ruby&#47;gems&#47;http_parser.rb-0.6.0&#47;ext&#47;ruby_http_p&zwnj;&#8203;arser make &quot;DESTDIR=&quot; sh: 1: make: not found  make failed, exit code 127</code>"}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 10975978, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-vn-FpP5PKTc/AAAAAAAAAAI/AAAAAAAAAIo/vkJlmFLa0p0/photo.jpg?sz=128", "display_name": "Purple Scientist", "link": "https://stackoverflow.com/users/10975978/purple-scientist"}, "edited": false, "score": 0, "creation_date": 1548785181, "post_id": 54425613, "comment_id": 95664320, "body": "I&#39;ve tried that, but when I install the package, it shows an error: <code>E: Failed to fetch http:&#47;&#47;security.ubuntu.com&#47;ubuntu&#47;pool&#47;main&#47;l&#47;linux&#47;linux-li&zwnj;&#8203;bc-dev_4.15.0-29.31_&zwnj;&#8203;amd64.deb  404  Not Found [IP: 91.189.88.152 80] E: Unable to fetch some archives, maybe run apt-get update or try with --fix-missing?</code> And when I try to install Ruby gem again, it shows the Failed to build the gem native extension error again."}, {"owner": {"reputation": 4348, "user_id": 3435610, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/IBOFX.jpg?s=128&g=1", "display_name": "Sara Tibbetts", "link": "https://stackoverflow.com/users/3435610/sara-tibbetts"}, "reply_to_user": {"reputation": 11, "user_id": 10975978, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-vn-FpP5PKTc/AAAAAAAAAAI/AAAAAAAAAIo/vkJlmFLa0p0/photo.jpg?sz=128", "display_name": "Purple Scientist", "link": "https://stackoverflow.com/users/10975978/purple-scientist"}, "edited": false, "score": 0, "creation_date": 1548787130, "post_id": 54425613, "comment_id": 95665263, "body": "If you run <code>apt-get update</code> followed by the command above does the error change at all?"}, {"owner": {"reputation": 3080, "user_id": 472869, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/6429fe1b80c4f52c933d5abf39266dd4?s=128&d=identicon&r=PG", "display_name": "Jasdeep Singh", "link": "https://stackoverflow.com/users/472869/jasdeep-singh"}, "edited": false, "score": 1, "creation_date": 1556857792, "post_id": 54425613, "comment_id": 98577566, "body": "thanks @SaraTibbetts this worked like a charm for me!"}], "tags": [], "owner": {"reputation": 4348, "user_id": 3435610, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/IBOFX.jpg?s=128&g=1", "display_name": "Sara Tibbetts", "link": "https://stackoverflow.com/users/3435610/sara-tibbetts"}, "is_accepted": false, "score": 1, "last_activity_date": 1548787217, "last_edit_date": 1548787217, "creation_date": 1548779603, "answer_id": 54425613, "question_id": 54423227, "link": "https://stackoverflow.com/questions/54423227/how-do-i-fix-an-error-with-ruby-gems-installer-on-wsl/54425613#54425613", "title": "How do I fix an error with Ruby Gems Installer on WSL?", "body": "<p>You need to install the build tools needed: </p>\n\n<pre><code>sudo apt-get update\nsudo apt-get install build-essential\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 10975978, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-vn-FpP5PKTc/AAAAAAAAAAI/AAAAAAAAAIo/vkJlmFLa0p0/photo.jpg?sz=128", "display_name": "Purple Scientist", "link": "https://stackoverflow.com/users/10975978/purple-scientist"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1011, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1570282793, "creation_date": 1548772067, "last_edit_date": 1570282793, "question_id": 54423227, "link": "https://stackoverflow.com/questions/54423227/how-do-i-fix-an-error-with-ruby-gems-installer-on-wsl", "title": "How do I fix an error with Ruby Gems Installer on WSL?", "body": "<p>I tried to install a package using RubyGems (please note that I use Windows Subsystem for Linux). I was going to install Jekyll package.</p>\n\n<p>I typed <code>$ gem install jekyll</code>. After that it came up with an error:</p>\n\n<pre><code>Building native extensions. This could take a while...\n/usr/lib/ruby/2.5.0/rubygems/ext/builder.rb:76: warning: Insecure world writable dir /mnt/c in PATH, mode 040777\nERROR:  Error installing jekyll:\n        ERROR: Failed to build gem native extension.\n</code></pre>\n\n<p>Can you please explain the error and any possible ways to fix it?</p>\n"}, {"tags": ["ruby", "cucumber", "watir"], "answers": [{"tags": [], "owner": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "is_accepted": true, "score": 0, "last_activity_date": 1548772818, "creation_date": 1548772818, "answer_id": 54423462, "question_id": 54422949, "link": "https://stackoverflow.com/questions/54422949/how-to-click-at-any-position-in-a-slider-using-ruby-watir-cucumber-and-page-obje/54423462#54423462", "title": "How to click at any position in a slider using ruby-watir-cucumber and page object?", "body": "<p>You will need to use Selenium's ActionBuilder - particularily the <a href=\"https://seleniumhq.github.io/selenium/docs/api/rb/Selenium/WebDriver/ActionBuilder.html#move_to-instance_method\" rel=\"nofollow noreferrer\"><code>#move_to</code></a> method. Unfortunately Watir, and therefore Page-Object, have not yet built a wrapper around actions (<a href=\"https://github.com/watir/watir/issues/829\" rel=\"nofollow noreferrer\">feature request #829</a>).</p>\n\n<p>The needed code is:</p>\n\n<pre><code>xoffset = 50      # how far right from the top-left corner\nyoffset = 100     # how far down from the top-left corner\npage.browser.driver.action.move_to(page.slider_amount_element.element.wd, xoffset, yoffset).click.perform\n</code></pre>\n\n<p>Where <code>page</code> is your PageObject.</p>\n"}], "owner": {"reputation": 13, "user_id": 9553108, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-TcmvE_iZHYw/AAAAAAAAAAI/AAAAAAAAChM/1R8FlD37vS8/photo.jpg?sz=128", "display_name": "Alejandro Garcia Alfonso", "link": "https://stackoverflow.com/users/9553108/alejandro-garcia-alfonso"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 117, "favorite_count": 0, "accepted_answer_id": 54423462, "answer_count": 1, "score": 0, "last_activity_date": 1548772818, "creation_date": 1548771105, "question_id": 54422949, "link": "https://stackoverflow.com/questions/54422949/how-to-click-at-any-position-in-a-slider-using-ruby-watir-cucumber-and-page-obje", "title": "How to click at any position in a slider using ruby-watir-cucumber and page object?", "body": "<p>I am using Ruby+Watir+Cucumber+Watir+CeezyPO+.... and in one test I have the next div element:</p>\n\n<pre><code>&lt;div class=\"slider-importe ui-slider ui-corner-all ui-slider-horizontal ui-widget ui-widget-content\"&gt;&lt;div class=\"ui-slider-range ui-corner-all ui-widget-header ui-slider-range-min\" style=\"width: 50.3384%;\"&gt;&lt;/div&gt;&lt;span tabindex=\"0\" class=\"ui-slider-handle ui-corner-all ui-state-default\" style=\"left: 50.3384%;\"&gt;&lt;/span&gt;&lt;/div&gt;\n</code></pre>\n\n<p>Wich is just an amount slider.</p>\n\n<p>In my test I would like to click at any position of the slider and check the amount result that appears in the field text. </p>\n\n<p>I have defined the Page Object for the div:</p>\n\n<pre><code>div(:slider_amount, :xpath =&gt; '//*[@id=\"simulatorParent\"]/div[1]/div[1]/div[1]')\n</code></pre>\n\n<p>And later I can use it in the corresponding step:</p>\n\n<pre><code>page.slider_amount_element.click\n</code></pre>\n\n<p>Reference about cheezy Page Object: <a href=\"https://www.rubydoc.info/github/cheezy/page-object/PageObject/Accessors#div-instance_method\" rel=\"nofollow noreferrer\">https://www.rubydoc.info/github/cheezy/page-object/PageObject/Accessors#div-instance_method</a></p>\n\n<p>Using it in that way I can click in the middle of the slider, and this is ok. But, how is possible to click at any position of the slider?</p>\n"}, {"tags": ["ruby", "literals"], "comments": [{"owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "edited": false, "score": 1, "creation_date": 1548769353, "post_id": 54422360, "comment_id": 95654586, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/19174487/remove-double-quotes-from-string-and-convert-into-symbol\">remove double quotes from string and convert into symbol</a>"}, {"owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "edited": false, "score": 0, "creation_date": 1548769501, "post_id": 54422360, "comment_id": 95654680, "body": "Did you try to define symbol in console like, <code>:Cat-food</code> ?"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 2, "creation_date": 1548769808, "post_id": 54422360, "comment_id": 95654900, "body": "Huh? Just use <code>{&quot;Content-Type&quot; =&gt; &quot;application&#47;json&quot;}</code>. Why bother with symbols at all here?"}, {"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 1, "creation_date": 1548769830, "post_id": 54422360, "comment_id": 95654914, "body": "It feels to me like you already figured out that <code>{ :&quot;Content-Type&quot; =&gt; &quot;application&#47;json&quot; }</code> would work. What is your question? What do you try to achieve and why?"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1548769905, "post_id": 54422360, "comment_id": 95654979, "body": "@spickermann: I am 99.99%  sure that the underlying api that this header hash is being prepared for, it will handle string keys just as well."}, {"owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "edited": false, "score": 0, "creation_date": 1548769915, "post_id": 54422360, "comment_id": 95654989, "body": "I am sure OP thought <code>:Content-Type</code> is valid symbol :|"}, {"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1548770133, "post_id": 54422360, "comment_id": 95655120, "body": "@SergioTulentsev: I think so too. I just wonder if the OP wants to use symbols and when the OP already figured out how to create symbols what the issue and the question is?"}, {"owner": {"reputation": 4127, "user_id": 4231385, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d89a541a4609cafea3957e4cdfcca50f?s=128&d=identicon&r=PG&f=1", "display_name": "cremno", "link": "https://stackoverflow.com/users/4231385/cremno"}, "edited": false, "score": 3, "creation_date": 1548770405, "post_id": 54422360, "comment_id": 95655294, "body": "OP mistakenly believes the symbol contains <code>&quot;</code> because its representation does."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 4127, "user_id": 4231385, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d89a541a4609cafea3957e4cdfcca50f?s=128&d=identicon&r=PG&f=1", "display_name": "cremno", "link": "https://stackoverflow.com/users/4231385/cremno"}, "edited": false, "score": 1, "creation_date": 1548771110, "post_id": 54422360, "comment_id": 95655773, "body": "@cremno: ah, good guess!"}, {"owner": {"reputation": 5449, "user_id": 681520, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/701baebf68d1d7faa9f9def6a24fe356?s=128&d=identicon&r=PG", "display_name": "Kimmo Lehto", "link": "https://stackoverflow.com/users/681520/kimmo-lehto"}, "edited": false, "score": 0, "creation_date": 1548772749, "post_id": 54422360, "comment_id": 95656881, "body": "<code>{&#39;Content-Type&#39;: &#39;application&#47;json&#39;}</code> (using <code>:</code> instead of <code>=&gt;</code>) will also work if you really want to create a symbol. Most likely you don&#39;t and should just do <code>{ &#39;Content-Type&#39; =&gt; &#39;application&#47;json&#39; }</code>."}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1548826855, "post_id": 54422360, "comment_id": 95677313, "body": "You can&#39;t create <code>{:Content-Type =&gt; &quot;application&#47;json&quot;}</code> because there is no such thing. That expression is invalid."}], "answers": [{"tags": [], "owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "is_accepted": false, "score": 2, "last_activity_date": 1548773762, "last_edit_date": 1548773762, "creation_date": 1548772445, "answer_id": 54423335, "question_id": 54422360, "link": "https://stackoverflow.com/questions/54422360/how-to-create-a-key-hash-without-quotes/54423335#54423335", "title": "How to create a key hash without quotes", "body": "<p>This is an classic example of value vs value representation.</p>\n\n<p>Let me provide you with some examples:</p>\n\n<pre><code>'\"'\n#=&gt; \"\\\"\"\n</code></pre>\n\n<p></p>\n\n<pre><code>'\n'\n#=&gt; \"\\n\"\n</code></pre>\n\n<p></p>\n\n<pre><code>'a-b'.to_sym\n#=&gt; :\"a-b\"\n</code></pre>\n\n<p>All the above blocks have the same in common. The output is not a literal but should be interpreted into the context. </p>\n\n<ul>\n<li><code>\"\\\"\"</code> is not a string containing a backslash and a double-quote, but a string containing a single double-quote (<code>\\\"</code> represents a double-quote in double quoted string context).</li>\n<li><code>\"\\n\"</code> is not a string containing a backslash and an \"n\", but a string containing a single newline character (<code>\\n</code> represents a newline in double quoted string context). </li>\n<li><code>:\"a-b\"</code> is not a symbol containing <code>\"a-b\"</code>, but a symbol containing <code>a-b</code> (<code>:\"...\"</code> represents a symbol that can't be parsed without quotes).</li>\n</ul>\n\n<p>This can be seen when we print out the values.</p>\n\n<pre><code>puts \"\\\"\"\n# \"\n#=&gt; nil\n</code></pre>\n\n<p></p>\n\n<pre><code>puts \"\\n\"\n#\n# =&gt; nil\n</code></pre>\n\n<p></p>\n\n<pre><code>puts :\"a-b\"\n# a-b\n#=&gt; nil\n</code></pre>\n\n<p>As you can see in the above code block, the quotes are not actually part of the symbol. They are just for the symbol representation.</p>\n\n<hr>\n\n<p>If the symbol actually contained the quotes the representation would look like:</p>\n\n<pre><code>a = '\"a-b\"'.to_sym\n#=&gt; :\"\\\"a-b\\\"\"\n\nputs a\n# \"a-b\"\n#=&gt; nil\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 10984639, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-WtjhOLgYjF4/AAAAAAAAAAI/AAAAAAAABwE/LdHcxjiOhyQ/photo.jpg?sz=128", "display_name": "Henrique Franco", "link": "https://stackoverflow.com/users/10984639/henrique-franco"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 356, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1548826789, "creation_date": 1548769064, "last_edit_date": 1548826789, "question_id": 54422360, "link": "https://stackoverflow.com/questions/54422360/how-to-create-a-key-hash-without-quotes", "title": "How to create a key hash without quotes", "body": "<p>I'm trying to create a header to my api like this:</p>\n\n<pre><code>header = {:Content-Type =&gt; \"application/json\"}\n</code></pre>\n\n<p>I have a problem with the key that contains a dash. If I use <code>:\"Content-Type\"</code> or <code>\"Content-Type\".to_sym</code>, the result is a key like this:</p>\n\n<pre><code>\"Content-Type\".to_sym # =&gt; :\"Content-Type\"\n</code></pre>\n\n<p>I found some people saying that I can use <code>to_sym.inspect</code> to create a symbol without quotes, but it didn't work.</p>\n\n<pre><code>\"Content-Type\".to_sym.inspect # =&gt; \":\\\"Content-Type\\\"\"\n</code></pre>\n"}, {"tags": ["ruby", "hash", "typeerror", "symbols"], "comments": [{"owner": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "edited": false, "score": 0, "creation_date": 1548767015, "post_id": 54421676, "comment_id": 95653120, "body": "Which line is 24th?"}, {"owner": {"reputation": 151, "user_id": 10300774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87ef14d6017f71e09f2886cd6a4de559?s=128&d=identicon&r=PG&f=1", "display_name": "Jules", "link": "https://stackoverflow.com/users/10300774/jules"}, "reply_to_user": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "edited": false, "score": 0, "creation_date": 1548767105, "post_id": 54421676, "comment_id": 95653189, "body": "puts &quot;#{students[:name]}, #{students[:cohort]} cohort&quot;  In print(students) method."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1548770602, "post_id": 54421676, "comment_id": 95655419, "body": "<code>while !name.empty?</code> \u2192 <code>until name.empty?</code>. Or use a <code>loop</code> and <code>break if name.empty?</code>"}], "answers": [{"comments": [{"owner": {"reputation": 151, "user_id": 10300774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87ef14d6017f71e09f2886cd6a4de559?s=128&d=identicon&r=PG&f=1", "display_name": "Jules", "link": "https://stackoverflow.com/users/10300774/jules"}, "edited": false, "score": 0, "creation_date": 1548767229, "post_id": 54421757, "comment_id": 95653273, "body": "Is this different with #Each? The most confusing part is that it works with an #Each loop."}, {"owner": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "edited": false, "score": 1, "creation_date": 1548767294, "post_id": 54421757, "comment_id": 95653325, "body": "Just like it&#39;s written in another answer - you were shadowing <code>students</code> variable inside of block passed to <code>each</code>."}], "tags": [], "owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "is_accepted": false, "score": 1, "last_activity_date": 1548767335, "last_edit_date": 1548767335, "creation_date": 1548767118, "answer_id": 54421757, "question_id": 54421676, "link": "https://stackoverflow.com/questions/54421676/trying-to-convert-each-to-while-loop-creates-typeerror-why-is-it-having-a-prob/54421757#54421757", "title": "Trying to convert each to while loop, creates TypeError. Why is it having a problem with symbols?", "body": "<pre><code>  while i &lt; students.length\n    puts \"#{students[:name]}, #{students[:cohort]} cohort\"\n  end\n</code></pre>\n\n<p><code>students</code> is an array. You can't address its elements with symbols. What you need to do is use <code>i</code> to fetch an <em>element</em> of students. You can call <code>[:name]</code> on that.</p>\n\n<p>The mistake comes, I think, from poor naming in this snippet. And/or not understanding how <code>each</code> works.</p>\n\n<pre><code>students.each.with_index(1) do |students, index|  \n#                                ^^^^^^\n#  This here is called `students`, but its value is a single student, \n#  not a collection of students.\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 9971, "user_id": 8255744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de22299534b5a8ed244ee8ff4aa6c481?s=128&d=identicon&r=PG&f=1", "display_name": "Simple Lime", "link": "https://stackoverflow.com/users/8255744/simple-lime"}, "is_accepted": true, "score": 4, "last_activity_date": 1548767176, "creation_date": 1548767176, "answer_id": 54421776, "question_id": 54421676, "link": "https://stackoverflow.com/questions/54421676/trying-to-convert-each-to-while-loop-creates-typeerror-why-is-it-having-a-prob/54421776#54421776", "title": "Trying to convert each to while loop, creates TypeError. Why is it having a problem with symbols?", "body": "<p>Because your <code>#each</code> loop was shadowing the <code>students</code> variable:</p>\n\n<pre><code># v                              v\nstudents.each.with_index(1) do |students, index|\n  puts \"#{index} #{students[:name]}, #{students[:cohort]} cohort\"\nend\n</code></pre>\n\n<p>you iterate an array called <code>students</code> and then assign each element in the array to a variable named <code>students</code>. When you get rid of the <code>each</code> loop, you didn't change the block to stop looking at <code>students</code>, so it's now looking at the array. To get a single element try:</p>\n\n<pre><code>def print(students)\n  i = 0\n  while i &lt; students.length\n    puts \"#{students[i][:name]}, #{students[i][:cohort]} cohort\"\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 151, "user_id": 10300774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87ef14d6017f71e09f2886cd6a4de559?s=128&d=identicon&r=PG&f=1", "display_name": "Jules", "link": "https://stackoverflow.com/users/10300774/jules"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "accepted_answer_id": 54421776, "answer_count": 2, "score": 0, "last_activity_date": 1548767335, "creation_date": 1548766800, "question_id": 54421676, "link": "https://stackoverflow.com/questions/54421676/trying-to-convert-each-to-while-loop-creates-typeerror-why-is-it-having-a-prob", "title": "Trying to convert each to while loop, creates TypeError. Why is it having a problem with symbols?", "body": "<p>I have a finished program, but now I need to convert an #Each loop to a #While loop. The loop should output almost the same information, but it throws me a 'directory.rb:24:in `print': no implicit conversion of Symbol into Integer (TypeError)' instead.</p>\n\n<pre><code>def input_students\n  puts \"Please enter the names of the students\"\n  puts \"To finish, just hit return twice\"\n  students = []\n  name = gets.chomp\n  while !name.empty? do\n    students &lt;&lt; {name: name, cohort: :november}\n    puts \"Now we have #{students.count} students\"\n    name = gets.chomp\n  end\n  students\nend\n\nstudents = input_students\n\ndef print_header\n  puts \"The students of Villains Academy\"\n  puts \"----------\"\nend\n\ndef print(students)\n  students.each.with_index(1) do |students, index|\n    puts \"#{index} #{students[:name]}, #{students[:cohort]} cohort\"\n  end\nend\n\ndef print_footer(names)\n  puts \"Overall we have #{names.count} great students\"\nend\n\n\nprint_header\nprint(students)\nprint_footer(students)\n</code></pre>\n\n<p>Works as expected. I'm trying:</p>\n\n<pre><code>def print(students)\n  i = 0\n  while i &lt; students.length\n    puts \"#{students[:name]}, #{students[:cohort]} cohort\"\n  end\nend\n</code></pre>\n\n<p>Why doesn't the #While loop work with similar input, and why is it trying to convert to an integer?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rails-activerecord"], "comments": [{"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1548768789, "post_id": 54421145, "comment_id": 95654235, "body": "What is wrong with executing raw SQL?"}, {"owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "edited": false, "score": 0, "creation_date": 1548768942, "post_id": 54421145, "comment_id": 95654338, "body": "I used to run same with <code>ActiveRecord::Migration.execute(query_string)</code>"}, {"owner": {"reputation": 576, "user_id": 5090145, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ctnxy.jpg?s=128&g=1", "display_name": "Timur Nugmanov", "link": "https://stackoverflow.com/users/5090145/timur-nugmanov"}, "edited": false, "score": 0, "creation_date": 1548769379, "post_id": 54421145, "comment_id": 95654610, "body": "Raw SQLs are not reflected in schema.rb"}, {"owner": {"reputation": 576, "user_id": 5090145, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ctnxy.jpg?s=128&g=1", "display_name": "Timur Nugmanov", "link": "https://stackoverflow.com/users/5090145/timur-nugmanov"}, "edited": false, "score": 0, "creation_date": 1548772054, "post_id": 54421145, "comment_id": 95656385, "body": "OK, this <a href=\"https://stackoverflow.com/a/9949777/9262523\">answer</a> provides a good alternative: add the query to seeds.rb, as it is part of <code>rails db:setup</code>. This needs to be tested though."}], "answers": [{"comments": [{"owner": {"reputation": 576, "user_id": 5090145, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ctnxy.jpg?s=128&g=1", "display_name": "Timur Nugmanov", "link": "https://stackoverflow.com/users/5090145/timur-nugmanov"}, "edited": false, "score": 0, "creation_date": 1548771360, "post_id": 54422591, "comment_id": 95655959, "body": "This answers neither of the questions, unfortunately. Most importantly, it doesn&#39;t solve the problem of adding said changes to schema.rb. I upvoted your answer, because I acknowledge that a rake task could do for a workaround, though it&#39;s not convenient and can therefore be messed up (for example, after a long period of time passes or if project gets another team)."}, {"owner": {"reputation": 9910, "user_id": 5898312, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Gcwsi.jpg?s=128&g=1", "display_name": "Tony Vincent", "link": "https://stackoverflow.com/users/5898312/tony-vincent"}, "reply_to_user": {"reputation": 576, "user_id": 5090145, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ctnxy.jpg?s=128&g=1", "display_name": "Timur Nugmanov", "link": "https://stackoverflow.com/users/5090145/timur-nugmanov"}, "edited": false, "score": 2, "creation_date": 1548772166, "post_id": 54422591, "comment_id": 95656460, "body": "@TimurNugmanov I agree but I think thats the best option you have at the moment. You could also try <code>config.active_record.schema_format = :sql</code> which should make the migration reflect on the schema file but I would rather have my default schema format"}, {"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 1, "creation_date": 1548788351, "post_id": 54422591, "comment_id": 95665902, "body": "As soon as you start needing database-specific features you&#39;ll want to <a href=\"https://stackoverflow.com/a/47879896/479863\">switch</a> from <a href=\"https://stackoverflow.com/a/31955422/479863\"><code>schema.rb</code></a> to <a href=\"https://stackoverflow.com/a/48509650/479863\"><code>db&#47;structure.sql</code></a>. There&#39;s a little more to it than just switching <code>schema_format</code> to <code>:sql</code> but not much. BTW, if you <code>change</code> is jut a <code>reversible</code> call, separate <code>up</code> and <code>down</code> methods might be clearer and will use less indentation."}], "tags": [], "owner": {"reputation": 9910, "user_id": 5898312, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Gcwsi.jpg?s=128&g=1", "display_name": "Tony Vincent", "link": "https://stackoverflow.com/users/5898312/tony-vincent"}, "is_accepted": true, "score": 2, "last_activity_date": 1548770638, "last_edit_date": 1548770638, "creation_date": 1548769825, "answer_id": 54422591, "question_id": 54421145, "link": "https://stackoverflow.com/questions/54421145/how-to-add-a-database-domain-in-activerecord-without-executing-a-raw-sql-query/54422591#54422591", "title": "How to add a database domain in Activerecord without executing a raw SQL query?", "body": "<p>I think the best way to do this is infact writing a migration with raw SQL for this</p>\n\n<pre><code>class ExampleMigration &lt; ActiveRecord::Migration\n  def change\n    reversible do |dir|\n      dir.up do\n        # create color ype\n        execute &lt;&lt;-SQL\n          CREATE DOMAIN colour AS VARCHAR CHECK (VALUE IN ('red', 'green', 'blue'));\n        SQL\n      end\n\n      dir.down do\n        # drop color type\n        execute &lt;&lt;-SQL\n          DROP DOMAIN colour;\n        SQL\n      end\n    end\n  end\nend\n</code></pre>\n\n<p>and then you can setup a rake task that runs these migrations as described here in this <a href=\"https://stackoverflow.com/questions/9144556/create-sequence-in-migration-not-reflected-in-schema/9949777#9949777\">answer</a></p>\n"}], "owner": {"reputation": 576, "user_id": 5090145, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ctnxy.jpg?s=128&g=1", "display_name": "Timur Nugmanov", "link": "https://stackoverflow.com/users/5090145/timur-nugmanov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 123, "favorite_count": 0, "accepted_answer_id": 54422591, "answer_count": 1, "score": 0, "last_activity_date": 1548770638, "creation_date": 1548765147, "question_id": 54421145, "link": "https://stackoverflow.com/questions/54421145/how-to-add-a-database-domain-in-activerecord-without-executing-a-raw-sql-query", "title": "How to add a database domain in Activerecord without executing a raw SQL query?", "body": "<p>I want to create a database domain, for example, like this one:</p>\n\n<pre><code>CREATE DOMAIN colour AS VARCHAR CHECK (VALUE IN ('red', 'green', 'blue'));\n</code></pre>\n\n<p>How do I do this in Rails Activerecord without executing the raw SQL query in a migration?<br>\nAnother concern is, how do I reflect the domain creation in schema.rb?<br>\nIs there any gem for it?<br></p>\n\n<p>My setup is PostgreSQL 9.6 and Rails 5.0.</p>\n\n<p>I expect there to be a method like <code>enable_extension</code> (<a href=\"https://apidock.com/rails/ActiveRecord/ConnectionAdapters/PostgreSQLAdapter/enable_extension\" rel=\"nofollow noreferrer\">docs</a>) or <code>create_trigger</code> as in hair_trigger gem (<a href=\"https://github.com/jenseng/hair_trigger\" rel=\"nofollow noreferrer\">link</a>).</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 5449, "user_id": 681520, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/701baebf68d1d7faa9f9def6a24fe356?s=128&d=identicon&r=PG", "display_name": "Kimmo Lehto", "link": "https://stackoverflow.com/users/681520/kimmo-lehto"}, "edited": false, "score": 3, "creation_date": 1548767103, "post_id": 54420759, "comment_id": 95653186, "body": "I don&#39;t think GC.start will ever &quot;release&quot; memory. At least this was the case in previous versions. Once you allocate 500mb, the process will reserve 500mb until it dies. The GC will just mark unnecessary objects so that the space occupied by them can be reused for new objects without allocating even more memory."}, {"owner": {"reputation": 85, "user_id": 8088049, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45659d5bad51628e1ffcfacff971baf7?s=128&d=identicon&r=PG&f=1", "display_name": "Andrek", "link": "https://stackoverflow.com/users/8088049/andrek"}, "reply_to_user": {"reputation": 5449, "user_id": 681520, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/701baebf68d1d7faa9f9def6a24fe356?s=128&d=identicon&r=PG", "display_name": "Kimmo Lehto", "link": "https://stackoverflow.com/users/681520/kimmo-lehto"}, "edited": false, "score": 0, "creation_date": 1548783190, "post_id": 54420759, "comment_id": 95663335, "body": "I didn&#39;t know that, thanks! and what about <code>#force_encoding</code>?"}], "owner": {"reputation": 85, "user_id": 8088049, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45659d5bad51628e1ffcfacff971baf7?s=128&d=identicon&r=PG&f=1", "display_name": "Andrek", "link": "https://stackoverflow.com/users/8088049/andrek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 41, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1548763793, "creation_date": 1548763793, "question_id": 54420759, "link": "https://stackoverflow.com/questions/54420759/why-force-encoding-consumes-a-lot-of-memory-and-doesnt-free-it", "title": "Why #force_encoding consumes a lot of memory and doesn&#39;t free it?", "body": "<p>This simple code consumes up to +300MB of memory, and <code>GC.start</code> do nothing.</p>\n\n<p>I'm on Windows 32bit, Ruby 2.4.4p296 (2018-03-28 revision 63013) [i386-mingw32]</p>\n\n<pre><code>require 'win32/api'\n\nEnumWindows = Win32::API.new('EnumWindows', 'KP', 'L', 'user32')\nGetWindowTextW = Win32::API.new('GetWindowTextW', 'LPI', 'I', 'user32')\n\ncallback = Win32::API::Callback.new('LP', 'I') do |handle|\n    if GetWindowTextW.call(handle, buffer = \"\\0\" * 1024, buffer.length) != 0\n        buffer.force_encoding('utf-16LE')\n    end\n    1\nend\n\n3.times do\n    1000.times { EnumWindows.call(callback, nil) }\n    sleep(1)\n    GC.start # Do nothing\nend\n</code></pre>\n\n<p>Open your task manager and check the memory.</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "model-view-controller"], "comments": [{"owner": {"reputation": 9910, "user_id": 5898312, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Gcwsi.jpg?s=128&g=1", "display_name": "Tony Vincent", "link": "https://stackoverflow.com/users/5898312/tony-vincent"}, "edited": false, "score": 0, "creation_date": 1548759033, "post_id": 54419245, "comment_id": 95648290, "body": "You might have run db:seed twice. You can destroy all existing Categories using <code>Category.destroy_all</code> from rails console and running <code>rails db:seed</code> should fix your problem"}], "answers": [{"comments": [{"owner": {"reputation": 303, "user_id": 10522953, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ba5c89b9214d9a78b87ce6d31926dbc?s=128&d=identicon&r=PG&f=1", "display_name": "ffblord", "link": "https://stackoverflow.com/users/10522953/ffblord"}, "edited": false, "score": 0, "creation_date": 1548759880, "post_id": 54419343, "comment_id": 95648835, "body": "thanks for the answer! how can I remove them? when I delete something from the seed even if I do rake db:seed it is still displayed"}, {"owner": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "reply_to_user": {"reputation": 303, "user_id": 10522953, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ba5c89b9214d9a78b87ce6d31926dbc?s=128&d=identicon&r=PG&f=1", "display_name": "ffblord", "link": "https://stackoverflow.com/users/10522953/ffblord"}, "edited": false, "score": 0, "creation_date": 1548760063, "post_id": 54419343, "comment_id": 95648939, "body": "You should remove them from the DB not from the seed script. The easiest way is the delete them using &quot;delete&quot; button on the web UI. You can also use the rails console"}], "tags": [], "owner": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "is_accepted": true, "score": 1, "last_activity_date": 1548758948, "creation_date": 1548758948, "answer_id": 54419343, "question_id": 54419245, "link": "https://stackoverflow.com/questions/54419245/rails-web-page-shows-more-model-elements-that-the-inputed/54419343#54419343", "title": "Rails web page shows more model elements that the inputed", "body": "<p>It looks like you run <code>rake db:seed</code> twice and that why you have repeated entries with different prices. You can remove them safely and it should work OK.</p>\n"}, {"comments": [{"owner": {"reputation": 303, "user_id": 10522953, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ba5c89b9214d9a78b87ce6d31926dbc?s=128&d=identicon&r=PG&f=1", "display_name": "ffblord", "link": "https://stackoverflow.com/users/10522953/ffblord"}, "edited": false, "score": 0, "creation_date": 1548759759, "post_id": 54419456, "comment_id": 95648754, "body": "now I see the 10 data created with this command and the 8 more I had before. Do you know where I could find the data and delete them?"}], "tags": [], "owner": {"reputation": 176, "user_id": 8540055, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5d4c940ad6c96e49b919ffc37bd85c14?s=128&d=identicon&r=PG&f=1", "display_name": "adarsh", "link": "https://stackoverflow.com/users/8540055/adarsh"}, "is_accepted": false, "score": 0, "last_activity_date": 1548759301, "creation_date": 1548759301, "answer_id": 54419456, "question_id": 54419245, "link": "https://stackoverflow.com/questions/54419245/rails-web-page-shows-more-model-elements-that-the-inputed/54419456#54419456", "title": "Rails web page shows more model elements that the inputed", "body": "<p>best way to do this</p>\n\n<p>in seed.rb </p>\n\n<pre><code>10.times do\n    Category.create([{  \n        title:Faker::Food.dish,\n        price: Faker::Number.decimal(2),\n\n    }])\nend\n</code></pre>\n\n<p>and then in terminal </p>\n\n<pre><code>rake db:seed\n</code></pre>\n\n<p>it will create 10 category data </p>\n"}], "owner": {"reputation": 303, "user_id": 10522953, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ba5c89b9214d9a78b87ce6d31926dbc?s=128&d=identicon&r=PG&f=1", "display_name": "ffblord", "link": "https://stackoverflow.com/users/10522953/ffblord"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 35, "favorite_count": 0, "accepted_answer_id": 54419343, "answer_count": 2, "score": 1, "last_activity_date": 1548760190, "creation_date": 1548758620, "last_edit_date": 1548760190, "question_id": 54419245, "link": "https://stackoverflow.com/questions/54419245/rails-web-page-shows-more-model-elements-that-the-inputed", "title": "Rails web page shows more model elements that the inputed", "body": "<p>I have created a model called <em>Category</em>, which I have populated with data in the <em>seed.db</em> file as shown below:</p>\n\n<pre><code>Category.create([{\n   title: 'Glutein-free hoagie with tofu',\n   price: Faker::Number.decimal(2)\n  }])\n\nCategory.create([{\n  title: 'Hoagie with Pesto and Mozzarela',\n  price: Faker::Number.decimal(2)\n  }])\n\nCategory.create([{\n  title: 'Hoagie with fried veggies and soy meat',\n  price: Faker::Number.decimal(2)\n  }])\n\nCategory.create([{\n  title: 'Protein bread with sweet potato, carrots and vegan mayo',\n  price: Faker::Number.decimal(2)\n  }])\n</code></pre>\n\n<p>Now, I wish to display these results on my webpage so I connected it with the the categories.index.html file via <em>rout.db</em> as shown here:</p>\n\n<pre><code>Rails.application.routes.draw do\n  resources :order_items\n  resources :orders\n  resources :categories\n  resources :users\n  resources :customers\n  root to: 'categories#index'\n  get 'home/index'\nend\n</code></pre>\n\n<p>Despite that, when I go on localhost I see 8 elements instead of 4 with the other 4 being duplicates of the ones I have created. On top of that the duplicates have different values, which means that they are probably stored internally twice? This is what is shown on the page:</p>\n\n<pre><code>Categories\nTitle   \nGlutein-free hoagie with tofu   29.84   Show    Edit    Destroy\nHoagie with Pesto and Mozzarela 54.11   Show    Edit    Destroy\nHoagie with fried veggies and soy meat  39.61   Show    Edit    Destroy\nProtein bread with sweet potato, carrots and vegan mayo 83.89   Show    Edit    Destroy\nGlutein-free hoagie with tofu   81.57   Show    Edit    Destroy\nHoagie with Pesto and Mozzarela 34.42   Show    Edit    Destroy\nHoagie with fried veggies and soy meat  16.71   Show    Edit    Destroy\nProtein bread with sweet potato, carrots and vegan mayo 30.13   Show    Edit    Destroy\nNew Category\n</code></pre>\n\n<p>And this is the index.html file:</p>\n\n<pre><code>&lt;p id=\"notice\"&gt;&lt;%= notice %&gt;&lt;/p&gt;\n&lt;h1&gt;Categories&lt;/h1&gt;\n&lt;table&gt;\n  &lt;thead&gt;\n    &lt;tr&gt;\n      &lt;th&gt;Title&lt;/th&gt;\n      &lt;th colspan=\"3\"&gt;&lt;/th&gt;\n    &lt;/tr&gt;\n  &lt;/thead&gt;\n  &lt;tbody&gt;\n    &lt;% @categories.each do |category| %&gt;\n      &lt;tr&gt;\n        &lt;td&gt;&lt;%= category.title %&gt;&lt;/td&gt;\n        &lt;td&gt;&lt;%= category.price %&gt;&lt;/td&gt;\n        &lt;td&gt;&lt;%= link_to 'Show', category %&gt;&lt;/td&gt;\n        &lt;td&gt;&lt;%= link_to 'Edit', edit_category_path(category) %&gt;&lt;/td&gt;\n        &lt;td&gt;&lt;%= link_to 'Destroy', category, method: :delete, data: { confirm: 'Are you sure?' } %&gt;&lt;/td&gt;\n      &lt;/tr&gt;\n    &lt;% end %&gt;\n  &lt;/tbody&gt;\n&lt;/table&gt;\n&lt;br&gt;\n&lt;%= link_to 'New Category', new_category_path %&gt;\n</code></pre>\n\n<p>I apologize in advance if the post is too long, but I am not sure how else to publish the code, since there are many classes, which interconnect with each other.</p>\n\n<p>EDIT: I solved this by deleting all data in the table by calling in the rails console <em>Category.delete_all</em></p>\n"}, {"tags": ["ruby", "heroku"], "comments": [{"owner": {"reputation": 1826, "user_id": 5150708, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/252ff188dc7377773468944f8794dc3f?s=128&d=identicon&r=PG&f=1", "display_name": "Santosh Sharma", "link": "https://stackoverflow.com/users/5150708/santosh-sharma"}, "edited": false, "score": 0, "creation_date": 1548758486, "post_id": 54419161, "comment_id": 95647968, "body": "might help you <a href=\"https://stackoverflow.com/questions/44305305/heroku-is-not-using-the-ruby-version-mentioned-in-gemfile\" title=\"heroku is not using the ruby version mentioned in gemfile\">stackoverflow.com/questions/44305305/&hellip;</a>"}, {"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1548769178, "post_id": 54419161, "comment_id": 95654478, "body": "I think the error message is quite clear. Update your application to a newer, up-to-date Ruby version and retry."}, {"owner": {"reputation": 210, "user_id": 8707723, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wrotm.png?s=128&g=1", "display_name": "ivsuleman", "link": "https://stackoverflow.com/users/8707723/ivsuleman"}, "edited": false, "score": 0, "creation_date": 1548784690, "post_id": 54419161, "comment_id": 95664071, "body": "I have done this using RVM but I still get the same error."}, {"owner": {"reputation": 7032, "user_id": 1743174, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/9f871161f754442df697dce1cede77a5?s=128&d=identicon&r=PG&f=1", "display_name": "Dipak Gupta", "link": "https://stackoverflow.com/users/1743174/dipak-gupta"}, "edited": false, "score": 0, "creation_date": 1552036562, "post_id": 54419161, "comment_id": 96868320, "body": "You can downgrade heroku stack to solve this issue. Solution can be found here <a href=\"https://stackoverflow.com/questions/53354444/how-can-i-solve-this-trouble-to-deploy-a-rails-app-to-heroku?answertab=active#tab-top\" title=\"how can i solve this trouble to deploy a rails app to heroku\">stackoverflow.com/questions/53354444/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 210, "user_id": 8707723, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wrotm.png?s=128&g=1", "display_name": "ivsuleman", "link": "https://stackoverflow.com/users/8707723/ivsuleman"}, "edited": false, "score": 0, "creation_date": 1548784877, "post_id": 54419931, "comment_id": 95664161, "body": "I have updated to version 2.6.0, updated my gemfile, regenerated the gemlock file and I still get the same error."}, {"owner": {"reputation": 3902, "user_id": 10608621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d59df09a85d05117c63706f66811b70c?s=128&d=identicon&r=PG", "display_name": "mechnicov", "link": "https://stackoverflow.com/users/10608621/mechnicov"}, "reply_to_user": {"reputation": 210, "user_id": 8707723, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wrotm.png?s=128&g=1", "display_name": "ivsuleman", "link": "https://stackoverflow.com/users/8707723/ivsuleman"}, "edited": false, "score": 0, "creation_date": 1548786756, "post_id": 54419931, "comment_id": 95665081, "body": "Did you make commit after this operations?"}, {"owner": {"reputation": 210, "user_id": 8707723, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wrotm.png?s=128&g=1", "display_name": "ivsuleman", "link": "https://stackoverflow.com/users/8707723/ivsuleman"}, "edited": false, "score": 0, "creation_date": 1548941508, "post_id": 54419931, "comment_id": 95731492, "body": "No ... I will try pushing to heroku after doing a commit."}, {"owner": {"reputation": 3902, "user_id": 10608621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d59df09a85d05117c63706f66811b70c?s=128&d=identicon&r=PG", "display_name": "mechnicov", "link": "https://stackoverflow.com/users/10608621/mechnicov"}, "reply_to_user": {"reputation": 210, "user_id": 8707723, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wrotm.png?s=128&g=1", "display_name": "ivsuleman", "link": "https://stackoverflow.com/users/8707723/ivsuleman"}, "edited": false, "score": 0, "creation_date": 1549436202, "post_id": 54419931, "comment_id": 95896496, "body": "Did the commit help?"}, {"owner": {"reputation": 210, "user_id": 8707723, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wrotm.png?s=128&g=1", "display_name": "ivsuleman", "link": "https://stackoverflow.com/users/8707723/ivsuleman"}, "edited": false, "score": 0, "creation_date": 1549461700, "post_id": 54419931, "comment_id": 95910429, "body": "unfortunately not"}], "tags": [], "owner": {"reputation": 3902, "user_id": 10608621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d59df09a85d05117c63706f66811b70c?s=128&d=identicon&r=PG", "display_name": "mechnicov", "link": "https://stackoverflow.com/users/10608621/mechnicov"}, "is_accepted": false, "score": 0, "last_activity_date": 1548761317, "last_edit_date": 1592644375, "creation_date": 1548760887, "answer_id": 54419931, "question_id": 54419161, "link": "https://stackoverflow.com/questions/54419161/ruby-heroku-deployment-failing-this-version-of-ruby-is-not-available-on-heroku/54419931#54419931", "title": "Ruby Heroku deployment failing: This version of Ruby is not available on Heroku-18. How can I upgrade my ruby version and make the deployment succeed?", "body": "<p>Heroku doesn't support Ruby 2.3.3</p>\n<blockquote>\n<p>Heroku supports the following Ruby versions and the associated Rubygems. A supported version means that you can expect our tools and platform to work with a given version. It also means you can receive technical support. Here are our supported Ruby versions:</p>\n<h3>MRI:</h3>\n<ul>\n<li>2.4.5 : patchlevel 335, Rubygems: 2.6.14.3</li>\n<li>2.5.3: patchlevel 105, Rubygems: 2.7.6</li>\n<li>2.6.0: patchlevel 0, Rubygems: 3.0.1</li>\n</ul>\n</blockquote>\n<p><a href=\"https://devcenter.heroku.com/articles/ruby-support#supported-runtimes\" rel=\"nofollow noreferrer\">Read at Heroku</a></p>\n<p>Also read information <a href=\"https://devcenter.heroku.com/articles/ruby-versions\" rel=\"nofollow noreferrer\">how to specify Ruby version</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 1682, "user_id": 6392696, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/09WDQ.jpg?s=128&g=1", "display_name": "nourza", "link": "https://stackoverflow.com/users/6392696/nourza"}, "is_accepted": false, "score": 0, "last_activity_date": 1569011607, "last_edit_date": 1569011607, "creation_date": 1561450913, "answer_id": 56749724, "question_id": 54419161, "link": "https://stackoverflow.com/questions/54419161/ruby-heroku-deployment-failing-this-version-of-ruby-is-not-available-on-heroku/56749724#56749724", "title": "Ruby Heroku deployment failing: This version of Ruby is not available on Heroku-18. How can I upgrade my ruby version and make the deployment succeed?", "body": "<p>Check the latest version of ruby in this link <a href=\"https://devcenter.heroku.com/articles/ruby-support#supported-runtimes\" rel=\"nofollow noreferrer\">https://devcenter.heroku.com/articles/ruby-support#supported-runtimes</a></p>\n\n<p>then run the latest one <code>rvm install ruby-2.4.6</code></p>\n\n<p>type <code>ruby -v</code> in the terminal, you should see ruby 2.4.6.</p>\n\n<p>If it still shows you ruby 2.0., run <code>rvm use ruby-2.4.6 --default</code>.</p>\n\n<p>Change the ruby version in your gem file then bundle</p>\n\n<p>This solve my problem</p>\n"}], "owner": {"reputation": 210, "user_id": 8707723, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wrotm.png?s=128&g=1", "display_name": "ivsuleman", "link": "https://stackoverflow.com/users/8707723/ivsuleman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2356, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1569011607, "creation_date": 1548758344, "question_id": 54419161, "link": "https://stackoverflow.com/questions/54419161/ruby-heroku-deployment-failing-this-version-of-ruby-is-not-available-on-heroku", "title": "Ruby Heroku deployment failing: This version of Ruby is not available on Heroku-18. How can I upgrade my ruby version and make the deployment succeed?", "body": "<p><strong>What is the most efficient way of upgrading Ruby on Mac OS High Sierra?</strong></p>\n\n<p>I am trying to deploy my simple Ruby app onto Heroku.</p>\n\n<p>I am running the command:</p>\n\n<pre><code>git push heroku master\n</code></pre>\n\n<p>However, I am getting the following error:</p>\n\n<pre><code>18:11 $ git push heroku master\nCounting objects: 97, done.\nDelta compression using up to 4 threads.\nCompressing objects: 100% (82/82), done.\nWriting objects: 100% (97/97), 22.59 KiB | 1.88 MiB/s, done.\nTotal 97 (delta 8), reused 0 (delta 0)\nremote: Compressing source files... done.\nremote: Building source:\nremote:\nremote:  !     Warning: Multiple default buildpacks reported the ability to \nhandle this app. The first buildpack in the list below will be used.\nremote:                         Detected buildpacks: Ruby,Node.js\nremote:                         See \nhttps://devcenter.heroku.com/articles/buildpacks#buildpack-detect-order\nremote: -----&gt; Ruby app detected\nremote: -----&gt; Compiling Ruby/Rails\nremote:        Command: 'set -o pipefail; curl -L --fail --retry 5 --retry- \ndelay 1 --connect-timeout 3 --max-time 30 https://s3-external- \n1.amazonaws.com/heroku-buildpack-ruby/heroku-18/ruby-2.3.3.tgz -s -o - | tar \nzxf - ' failed on attempt 1 of 3.\nremote:        Command: 'set -o pipefail; curl -L --fail --retry 5 --retry- \ndelay 1 --connect-timeout 3 --max-time 30 https://s3-external- \n1.amazonaws.com/heroku-buildpack-ruby/heroku-18/ruby-2.3.3.tgz -s -o - | tar \nzxf - ' failed on attempt 2 of 3.\nremote:\nremote:  !\n</code></pre>\n\n<blockquote>\n<pre><code>remote:  !     An error occurred while installing ruby-2.3.3\nremote:  !\nremote:  !     This version of Ruby is not available on Heroku-18. The \nminimum supported version\nremote:  !     of Ruby on the Heroku-18 stack can found at:\nremote:  !\n</code></pre>\n</blockquote>\n\n<pre><code>remote:  !     https://devcenter.heroku.com/articles/ruby-support#supported- \nruntimes\nremote:  !\nremote:  !     Push rejected, failed to compile Ruby app.\nremote:\nremote:  !     Push failed\nremote: Verifying deploy...\nremote:\nremote: !       Push rejected to morning-plains-67699.\nremote: \nTo https://git.heroku.com/morning-plains-67699.git\n! [remote rejected] master -&gt; master (pre-receivehook declined)\nerror: failed to push some refs to 'https://git.heroku.com/morning-plains- \n67699.git'\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 48004, "user_id": 216513, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30a45c64b2ef288f7ec098c5fb353a22?s=128&d=identicon&r=PG", "display_name": "nathanvda", "link": "https://stackoverflow.com/users/216513/nathanvda"}, "edited": false, "score": 0, "creation_date": 1548755504, "post_id": 54417205, "comment_id": 95646043, "body": "Please show us your datamodel, in more detail. I can assume you have a <code>User</code> model, a <code>Thread</code> model, but how are they linked? How are your relations set up? Then your question is: how to find a common thread (group-chat?) of a given array of users, right?"}, {"owner": {"reputation": 133, "user_id": 1811619, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/6d40bc17cecca9bf51e34ab574f502d7?s=128&d=identicon&r=PG", "display_name": "AdamM", "link": "https://stackoverflow.com/users/1811619/adamm"}, "reply_to_user": {"reputation": 48004, "user_id": 216513, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30a45c64b2ef288f7ec098c5fb353a22?s=128&d=identicon&r=PG", "display_name": "nathanvda", "link": "https://stackoverflow.com/users/216513/nathanvda"}, "edited": false, "score": 0, "creation_date": 1548756144, "post_id": 54417205, "comment_id": 95646456, "body": "Yes, its User model and Thread model - they are linked by UserThreads model."}, {"owner": {"reputation": 133, "user_id": 1811619, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/6d40bc17cecca9bf51e34ab574f502d7?s=128&d=identicon&r=PG", "display_name": "AdamM", "link": "https://stackoverflow.com/users/1811619/adamm"}, "reply_to_user": {"reputation": 48004, "user_id": 216513, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30a45c64b2ef288f7ec098c5fb353a22?s=128&d=identicon&r=PG", "display_name": "nathanvda", "link": "https://stackoverflow.com/users/216513/nathanvda"}, "edited": false, "score": 0, "creation_date": 1548757158, "post_id": 54417205, "comment_id": 95647096, "body": "Exactly - find a common thread of a given array of users. - Only thread where all users get discussion"}, {"owner": {"reputation": 133, "user_id": 1811619, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/6d40bc17cecca9bf51e34ab574f502d7?s=128&d=identicon&r=PG", "display_name": "AdamM", "link": "https://stackoverflow.com/users/1811619/adamm"}, "reply_to_user": {"reputation": 48004, "user_id": 216513, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30a45c64b2ef288f7ec098c5fb353a22?s=128&d=identicon&r=PG", "display_name": "nathanvda", "link": "https://stackoverflow.com/users/216513/nathanvda"}, "edited": false, "score": 0, "creation_date": 1550059317, "post_id": 54417205, "comment_id": 96129349, "body": "Anyone can help ?"}], "owner": {"reputation": 133, "user_id": 1811619, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/6d40bc17cecca9bf51e34ab574f502d7?s=128&d=identicon&r=PG", "display_name": "AdamM", "link": "https://stackoverflow.com/users/1811619/adamm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 42, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1548752424, "creation_date": 1548752424, "question_id": 54417205, "link": "https://stackoverflow.com/questions/54417205/find-threads-for-chat", "title": "Find threads for chat", "body": "<p>I have problem with find old thread for my chat. \nIt's have table like </p>\n\n<pre><code>#  id              :bigint(8)       \n#  user_id         :bigint(8)\n#  thread_id :bigint(8)\n</code></pre>\n\n<p>Each thread have 2 user_id and thread_id  (that same) And problem is with searching - I have array with users [12,22,555], and now i need to find thread id where all users exist. How ? </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "heroku", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 9910, "user_id": 5898312, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Gcwsi.jpg?s=128&g=1", "display_name": "Tony Vincent", "link": "https://stackoverflow.com/users/5898312/tony-vincent"}, "edited": false, "score": 1, "creation_date": 1548751807, "post_id": 54416252, "comment_id": 95643869, "body": "How did you set your <code>RAILS_MASTER_KEY </code> variable on heroku?"}, {"owner": {"reputation": 1910, "user_id": 5940124, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/8501b1b8ebfa2217a32576f638cac885?s=128&d=identicon&r=PG", "display_name": "Rudi Thiel", "link": "https://stackoverflow.com/users/5940124/rudi-thiel"}, "reply_to_user": {"reputation": 9910, "user_id": 5898312, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Gcwsi.jpg?s=128&g=1", "display_name": "Tony Vincent", "link": "https://stackoverflow.com/users/5898312/tony-vincent"}, "edited": false, "score": 0, "creation_date": 1548751922, "post_id": 54416252, "comment_id": 95643932, "body": "under settings &gt; config vars"}, {"owner": {"reputation": 9910, "user_id": 5898312, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Gcwsi.jpg?s=128&g=1", "display_name": "Tony Vincent", "link": "https://stackoverflow.com/users/5898312/tony-vincent"}, "edited": false, "score": 1, "creation_date": 1548752126, "post_id": 54416252, "comment_id": 95644048, "body": "can you remove that and try setting <code>RAILS_MASTER_KEY</code> using heroku cli?  <code>heroku config:set RAILS_MASTER_KEY=&quot;$(&lt; config&#47;master.key)&quot;</code> run this command from the root directory of your application"}, {"owner": {"reputation": 1612, "user_id": 1146473, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/798f66c6c7e53703e2a30ff911b0e884?s=128&d=identicon&r=PG", "display_name": "ekampp", "link": "https://stackoverflow.com/users/1146473/ekampp"}, "reply_to_user": {"reputation": 9910, "user_id": 5898312, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Gcwsi.jpg?s=128&g=1", "display_name": "Tony Vincent", "link": "https://stackoverflow.com/users/5898312/tony-vincent"}, "edited": false, "score": 0, "creation_date": 1548753239, "post_id": 54416252, "comment_id": 95644700, "body": "@TonyVincent, the master.key is ignored in the gitignore file by default. I don&#39;t think the latter command will work on Heroku as a result of this."}, {"owner": {"reputation": 9910, "user_id": 5898312, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Gcwsi.jpg?s=128&g=1", "display_name": "Tony Vincent", "link": "https://stackoverflow.com/users/5898312/tony-vincent"}, "edited": false, "score": 1, "creation_date": 1548753864, "post_id": 54416252, "comment_id": 95645041, "body": "@RT5754 its gitignored, thats why you neeed to run this locally using heroku cli"}, {"owner": {"reputation": 1910, "user_id": 5940124, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/8501b1b8ebfa2217a32576f638cac885?s=128&d=identicon&r=PG", "display_name": "Rudi Thiel", "link": "https://stackoverflow.com/users/5940124/rudi-thiel"}, "edited": false, "score": 0, "creation_date": 1548759955, "post_id": 54416252, "comment_id": 95648879, "body": "thank you so much this fixed it!!"}], "owner": {"reputation": 1910, "user_id": 5940124, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/8501b1b8ebfa2217a32576f638cac885?s=128&d=identicon&r=PG", "display_name": "Rudi Thiel", "link": "https://stackoverflow.com/users/5940124/rudi-thiel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1632, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1582102609, "creation_date": 1548748532, "question_id": 54416252, "link": "https://stackoverflow.com/questions/54416252/cannot-load-rails-config-active-storage-service-missing-required-option-name", "title": "Cannot load `Rails.config.active_storage.service`, missing required option :name - when running app on Heroku", "body": "<p>After upgrading to Rails 5.2.2 and deploying to Heroku my app keeps crashing with this error. I have set my ENV variables in Heroku, including my RAILS_MASTER_KEY but nothing seems to be fixing it. Any suggestions would be greatly appreciated, thanks!</p>\n\n<pre><code>2019-01-28T21:23:20.220100+00:00 app[web.1]: /app/vendor/bundle/ruby/2.5.0/gems/aws-sdk-s3-1.30.1/lib/aws-sdk-s3/bucket.rb:684:in `extract_name': Cannot load `Rails.config.active_storage.service`: (ArgumentError)\n2019-01-28T21:23:20.220137+00:00 app[web.1]: missing required option :name\n</code></pre>\n"}, {"tags": ["ruby", "ldap", "gitlab", "windows-server-2012"], "comments": [{"owner": {"reputation": 336, "user_id": 2219856, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/aacc3fad6f5cdd68876c2cf289210226?s=128&d=identicon&r=PG", "display_name": "Charm_quark", "link": "https://stackoverflow.com/users/2219856/charm-quark"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1548744494, "post_id": 54415061, "comment_id": 95640568, "body": "Oops, Need to know how to change gitlab so that it sends &#39;domain\\username&#39; in bind request!"}], "answers": [{"comments": [{"owner": {"reputation": 336, "user_id": 2219856, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/aacc3fad6f5cdd68876c2cf289210226?s=128&d=identicon&r=PG", "display_name": "Charm_quark", "link": "https://stackoverflow.com/users/2219856/charm-quark"}, "edited": false, "score": 0, "creation_date": 1548932005, "post_id": 54452292, "comment_id": 95725764, "body": "Thank you for your response, both the passwords are the same, I have added the password response to the question!"}, {"owner": {"reputation": 336, "user_id": 2219856, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/aacc3fad6f5cdd68876c2cf289210226?s=128&d=identicon&r=PG", "display_name": "Charm_quark", "link": "https://stackoverflow.com/users/2219856/charm-quark"}, "edited": false, "score": 0, "creation_date": 1548932852, "post_id": 54452292, "comment_id": 95726239, "body": "Is the correct user being found for the ID supplied ?: yes the user does exist in the Head Office\\Users OU."}], "tags": [], "owner": {"reputation": 1413, "user_id": 10076590, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kvrG0.png?s=128&g=1", "display_name": "LisaJ", "link": "https://stackoverflow.com/users/10076590/lisaj"}, "is_accepted": true, "score": 0, "last_activity_date": 1548900166, "creation_date": 1548900166, "answer_id": 54452292, "question_id": 54415061, "link": "https://stackoverflow.com/questions/54415061/gitlab-change-ldap-bind-username-structure/54452292#54452292", "title": "GitLab Change LDAP bind username structure", "body": "<p>Active Directory doesn't <em>need</em> the logon to be in the format domain\\uid -- that's one of the three valid ID formats you can use when binding to AD via LDAP, but uid@domain and LDAP fully qualified DN are equally valid. What GitLab does is binds to AD using the bind_dn and password in the config (wireshark #4), searches at the base configured as 'base' for <code>(&amp;(sAMAccountName=*user supplied uid*))</code> (wireshark #11), returns the fully qualified DN of the identified account (wireshark #16), and then validates the user's credentials by binding with the fully qualified DN and user-supplied password (wireshark #18). </p>\n\n<p>52e (in the bind error data) is returned when the user ID matches a valid user but the password is incorrect. Is the correct user being found for the ID supplied (i.e. the user <em>is</em> in the dc=aaa,dc=org,dc=local domain, and can be found under Head Office\\Users OU)? If you select packet 18, you'll see the password within the packet data -- verify something didn't get mangled in transit or mistyped. </p>\n"}], "owner": {"reputation": 336, "user_id": 2219856, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/aacc3fad6f5cdd68876c2cf289210226?s=128&d=identicon&r=PG", "display_name": "Charm_quark", "link": "https://stackoverflow.com/users/2219856/charm-quark"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 290, "favorite_count": 0, "accepted_answer_id": 54452292, "answer_count": 1, "score": -2, "last_activity_date": 1548959417, "creation_date": 1548743307, "last_edit_date": 1548959417, "question_id": 54415061, "link": "https://stackoverflow.com/questions/54415061/gitlab-change-ldap-bind-username-structure", "title": "GitLab Change LDAP bind username structure", "body": "<p>I would like to change how Gitlab verifies authentication with the AD, Since it sends the request as \"CN=user ou=xx dc=xx\". But the AD needs it to be sent as Domain\\user. How can I change Gitlab config to send \"domain\\username' in bind request ? </p>\n\n<p>Or why would the Windows AD reject the authentication? </p>\n\n<p>Below is my LDAP configuration</p>\n\n<pre><code>gitlab_rails['ldap_servers'] = {\n'main' =&gt; {\n  'label' =&gt; 'AD',\n  'host' =&gt;  '10.0.0.1',\n  'port' =&gt; 389,\n  'uid' =&gt; 'sAMAccountName',\n  'base' =&gt; 'DC=AAA,DC=ORG,DC=LOCAL',\n 'bind_dn' =&gt; 'AAA\\abcdefgh',\n 'password' =&gt; 'Password4',\n  'block_auto_created_users'=&gt; 'true',\n  'active_directory' =&gt; true,\n  'lowercase_usernames' =&gt; true,\n\n        }\n}\n</code></pre>\n\n<p>The wireshark image is below.</p>\n\n<p><a href=\"https://i.stack.imgur.com/AezC1.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/AezC1.png\" alt=\"Wireshark Ldap authentication request\"></a></p>\n\n<p>Bind Password sent packet 4.\n<a href=\"https://i.stack.imgur.com/FrD3E.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/FrD3E.png\" alt=\"Bind Password sent packet 4\"></a></p>\n\n<p>Bind Password sent packet 18\n<a href=\"https://i.stack.imgur.com/35ZwF.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/35ZwF.png\" alt=\"Bind Password sent packet 18\"></a></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "postgresql", "rails-activestorage"], "comments": [{"owner": {"reputation": 966, "user_id": 6384607, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/dc77165b05cef4d2d4f6ed65d6bf9b21?s=128&d=identicon&r=PG&f=1", "display_name": "t s", "link": "https://stackoverflow.com/users/6384607/t-s"}, "edited": false, "score": 0, "creation_date": 1548743045, "post_id": 54414928, "comment_id": 95640033, "body": "Did you run <code>rails active_storage:install</code> and <code>rake db:migrate</code> ?"}], "answers": [{"comments": [{"owner": {"reputation": 307, "user_id": 9762090, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yLAXk.jpg?s=128&g=1", "display_name": "Sergey", "link": "https://stackoverflow.com/users/9762090/sergey"}, "edited": false, "score": 0, "creation_date": 1548745237, "post_id": 54415091, "comment_id": 95640835, "body": "I have tried to run <code>rails active_storage:install</code> and <code>rails db:migrate</code> it returns error:  NoMethodError in EventsController#create   undefined method `[]&#39; for nil:NilClass  Also I created this project with Rails 5.1 and then updated to 5.2"}, {"owner": {"reputation": 966, "user_id": 6384607, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/dc77165b05cef4d2d4f6ed65d6bf9b21?s=128&d=identicon&r=PG&f=1", "display_name": "t s", "link": "https://stackoverflow.com/users/6384607/t-s"}, "reply_to_user": {"reputation": 307, "user_id": 9762090, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yLAXk.jpg?s=128&g=1", "display_name": "Sergey", "link": "https://stackoverflow.com/users/9762090/sergey"}, "edited": false, "score": 0, "creation_date": 1548745891, "post_id": 54415091, "comment_id": 95641102, "body": "Please comment <code>has_one_attached :image</code> and all other active_storage configuration and then try with above command. As <code>rails active_storage:install</code> is the first command to run"}, {"owner": {"reputation": 307, "user_id": 9762090, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yLAXk.jpg?s=128&g=1", "display_name": "Sergey", "link": "https://stackoverflow.com/users/9762090/sergey"}, "edited": false, "score": 0, "creation_date": 1548797421, "post_id": 54415091, "comment_id": 95669829, "body": "I have tried it and still getting the same error <code>undefined method [] for nil:NilClass</code>"}, {"owner": {"reputation": 307, "user_id": 9762090, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yLAXk.jpg?s=128&g=1", "display_name": "Sergey", "link": "https://stackoverflow.com/users/9762090/sergey"}, "edited": false, "score": 1, "creation_date": 1548802971, "post_id": 54415091, "comment_id": 95671669, "body": "I solved the problem by replacing in config/storage.yml  <code>access_key_id: &lt;%= Rails.application.secrets.aws[:access_key_id] %&gt;  secret_access_key: &lt;%= Rails.application.secrets.aws[:secret_access_key] %&gt;&#39;</code> to <code>access_key_id: &lt;%= Rails.application.credentials.dig(:aws, :access_key_id) %&gt; secret_access_key: &lt;%= Rails.application.credentials.dig(:aws, :secret_access_key) %&gt;</code>"}], "tags": [], "owner": {"reputation": 966, "user_id": 6384607, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/dc77165b05cef4d2d4f6ed65d6bf9b21?s=128&d=identicon&r=PG&f=1", "display_name": "t s", "link": "https://stackoverflow.com/users/6384607/t-s"}, "is_accepted": false, "score": 0, "last_activity_date": 1548746592, "last_edit_date": 1548746592, "creation_date": 1548743432, "answer_id": 54415091, "question_id": 54414928, "link": "https://stackoverflow.com/questions/54414928/trying-to-attach-file-with-active-storage-error/54415091#54415091", "title": "Trying to attach file with Active Storage error", "body": "<p>Check <a href=\"https://edgeguides.rubyonrails.org/active_storage_overview.html\" rel=\"nofollow noreferrer\">ActiveStorage installation</a></p>\n\n<p>Please run below command to generate migration for ActiveStorage.</p>\n\n<pre><code>rails active_storage:install\n</code></pre>\n\n<p>Then</p>\n\n<pre><code>rails db:migrate\n</code></pre>\n\n<p><b>Edit:</b> As mentioned in <a href=\"https://edgeguides.rubyonrails.org/active_storage_overview.html#setup\" rel=\"nofollow noreferrer\">setup doc</a> </p>\n"}], "owner": {"reputation": 307, "user_id": 9762090, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yLAXk.jpg?s=128&g=1", "display_name": "Sergey", "link": "https://stackoverflow.com/users/9762090/sergey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2238, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1548746592, "creation_date": 1548742614, "question_id": 54414928, "link": "https://stackoverflow.com/questions/54414928/trying-to-attach-file-with-active-storage-error", "title": "Trying to attach file with Active Storage error", "body": "<p>I am trying to attach files using Active Storage and keep getting error:</p>\n\n<p>Unable to autoload constant ActiveStorage::Blob::Analyzable, expected \n/Users/sergeylukyanenko/.rvm/gems/ruby-2.6.0/gems/activestorage-5.2.2/app/models/active_storage/blob/analyzable.rb to define it</p>\n\n<pre><code>Request\nParameters:\n\n{\"utf8\"=&gt;\"\u2713\",\n \"authenticity_token\"=&gt;\"L0czdSokZuL6CyRqMNEUAj/6AGRItCOZ/oIca6OGHtgsxD+ExTnZ1BtMdvFyHQTOEZ5/5LEd6dma23r1r8zIlA==\",\n \"event\"=&gt;\n  {\"name\"=&gt;\"Coffee meetup\",\n   \"date\"=&gt;\"2019-01-28\",\n   \"image\"=&gt;\n    #&lt;ActionDispatch::Http::UploadedFile:0x00007ff464e03278\n     @content_type=\"image/jpeg\",\n     @headers=\"Content-Disposition: form-data; name=\\\"event[image]\\\"; filename=\\\"agile-software-development.jpg\\\"\\r\\n\" + \"Content-Type: image/jpeg\\r\\n\",\n     @original_filename=\"agile-software-development.jpg\",\n     @tempfile=#&lt;File:/var/folders/6j/xkzm5glx2k9_ycr6c235lx2m0000gn/T/RackMultipart20190128-91451-1jdmov.jpg&gt;&gt;},\n \"commit\"=&gt;\"Create Event\"}\n</code></pre>\n\n<p>Here is my EventsController</p>\n\n<pre><code>def create\n    if current_user\n      @event = current_user.events.build(event_params)\n    else\n      @event = Event.new(event_params)\n    end\n\n    respond_to do |format|\n      if @event.save\n        format.html { redirect_to @event, :flash =&gt; { :success =&gt; 'Event was successfully created.' }}\n        format.json { render :show, status: :created, location: @event }\n      else\n        format.html { render :new }\n        format.json { render json: @event.errors, status: :unprocessable_entity }\n      end\n    end\n  end\n\n  def event_params\n    params.require(:event).permit(:name, :date, :private, :image)\n  end\n</code></pre>\n\n<p>And Event Model</p>\n\n<pre><code>class Event &lt; ApplicationRecord\n  validates :name, presence: true\n  validates :date, presence: true\n\n  has_one_attached :image\n  belongs_to :user, optional: true\n  has_many :tasks, dependent: :destroy\n\n  scope :only_public,    -&gt; { where(private: false) }\n  scope :only_private,   -&gt; { where(private: true)  }\n  scope :by_recent,      -&gt; { order(date: :asc) }\n\n  def start_time\n    self.date\n  end\nend\n</code></pre>\n\n<p>Event form</p>\n\n<pre><code>&lt;div class=\"field mt-4\"&gt;\n  &lt;%= form.file_field :image %&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>config/storage.yml</p>\n\n<pre><code>test:\n  service: Disk\n  root: &lt;%= Rails.root.join(\"tmp/storage\") %&gt;\n\nlocal:\n  service: Disk\n  root: &lt;%= Rails.root.join(\"storage\") %&gt;\n\n# Use rails secrets:edit to set the AWS secrets (as shared:aws:access_key_id|secret_access_key)\namazon:\n  service: S3\n  access_key_id: &lt;%= Rails.application.secrets.aws[:access_key_id] %&gt;\n  secret_access_key: &lt;%= Rails.application.secrets.aws[:secret_access_key] %&gt;\n  region: us-east-1\n  bucket: your_own_bucket\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec"], "comments": [{"owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "edited": false, "score": 0, "creation_date": 1548742262, "post_id": 54414805, "comment_id": 95639757, "body": "Can you post little code so other will not imagine code"}, {"owner": {"reputation": 362, "user_id": 6154120, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd085e8de23b7b25fd819f1d72cb8f1d?s=128&d=identicon&r=PG", "display_name": "Jackson Kelley", "link": "https://stackoverflow.com/users/6154120/jackson-kelley"}, "reply_to_user": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "edited": false, "score": 0, "creation_date": 1548742432, "post_id": 54414805, "comment_id": 95639809, "body": "done, note that I&#39;ve had to rename certain things."}], "answers": [{"comments": [{"owner": {"reputation": 362, "user_id": 6154120, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd085e8de23b7b25fd819f1d72cb8f1d?s=128&d=identicon&r=PG", "display_name": "Jackson Kelley", "link": "https://stackoverflow.com/users/6154120/jackson-kelley"}, "edited": false, "score": 0, "creation_date": 1548796261, "post_id": 54427669, "comment_id": 95669343, "body": "It was because the class under test was a singleton.  I followed the guidance found here (<a href=\"https://stackoverflow.com/questions/12127336/resetting-a-singleton-instance-in-ruby\" title=\"resetting a singleton instance in ruby\">stackoverflow.com/questions/12127336/&hellip;</a>) to unit test a singleton."}], "tags": [], "owner": {"reputation": 1574, "user_id": 1388302, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/27ca9066ad05bd8aa9ec366115f3cd38?s=128&d=identicon&r=PG", "display_name": "kwerle", "link": "https://stackoverflow.com/users/1388302/kwerle"}, "is_accepted": false, "score": 0, "last_activity_date": 1548787337, "creation_date": 1548787337, "answer_id": 54427669, "question_id": 54414805, "link": "https://stackoverflow.com/questions/54414805/why-is-the-stub-only-being-used-in-the-first-test/54427669#54427669", "title": "Why is the stub only being used in the first test?", "body": "<pre><code>@s3_double = Aws::S3::Client.new(stub_responses: true)\nAws::S3::Client.stub(:new).with(anything).and_return(@s3_double)\n</code></pre>\n\n<p>Aren't those lines reversed?  In any case, it seems likely that @s3_double is not always what you expect.  I would debug the hell out of that for the success and fail case and see what it looks like.</p>\n"}, {"tags": [], "owner": {"reputation": 362, "user_id": 6154120, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd085e8de23b7b25fd819f1d72cb8f1d?s=128&d=identicon&r=PG", "display_name": "Jackson Kelley", "link": "https://stackoverflow.com/users/6154120/jackson-kelley"}, "is_accepted": true, "score": 0, "last_activity_date": 1548796278, "creation_date": 1548796278, "answer_id": 54429634, "question_id": 54414805, "link": "https://stackoverflow.com/questions/54414805/why-is-the-stub-only-being-used-in-the-first-test/54429634#54429634", "title": "Why is the stub only being used in the first test?", "body": "<p>It was because the class under test was a singleton.  I followed the guidance found here (<a href=\"https://stackoverflow.com/questions/12127336/resetting-a-singleton-instance-in-ruby\">Resetting a singleton instance in Ruby</a>) to unit test a singleton.</p>\n"}], "owner": {"reputation": 362, "user_id": 6154120, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd085e8de23b7b25fd819f1d72cb8f1d?s=128&d=identicon&r=PG", "display_name": "Jackson Kelley", "link": "https://stackoverflow.com/users/6154120/jackson-kelley"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 84, "favorite_count": 0, "accepted_answer_id": 54429634, "answer_count": 2, "score": 0, "last_activity_date": 1548796278, "creation_date": 1548742045, "last_edit_date": 1548742411, "question_id": 54414805, "link": "https://stackoverflow.com/questions/54414805/why-is-the-stub-only-being-used-in-the-first-test", "title": "Why is the stub only being used in the first test?", "body": "<p>I've got an rspec test that stubs an S3 client.  I can successfully stub a method on this client (say method A), in the second test, I want to stub a different method (say method B).  However, the second test never uses the stub.  If I switch the order of the tests, the second one never uses the stubbed method regardless of it's functionality (say I test B before A, B will pass and A will fail).  What gives?</p>\n\n<pre><code>require 'spec_helper'\n\n\ndescribe ANY_S3_ACCESSOR_CLASS do\n\n  before(:each) do\n    @bucket = 'any_bucket'\n    @key = 'any_key'\n    @s3_double = Aws::S3::Client.new(stub_responses: true)\n    Aws::S3::Client.stub(:new).with(anything).and_return(@s3_double)\n  end\n\n  context \"getting an S3 document\" do\n    it \"should get an S3 document successfully\" do\n      expected_get_output = 'any_output'\n      @s3_double.stub(:get_object).with(anything).and_return(expected_get_output)\n      returned_document = NY_S3_ACCESSOR.instance.get_document(@bucket, @key)\n\n      expect(returned_document).to eq(expected_get_output)\n    end\n  end\n\n  context \"putting an S3 document\" do\n    it \"should put a file saved locally to disk to S3 successfully\" do\n      expected_put_output = 'any_put_output'\n      csv_file = CSV.open(\"#{Rails.root}/test/fixtures/any_well_formed_csv.csv\")\n      @s3_double.stub(:put_object).with(anything).and_return(expected_put_output)\n      actual_put_output = NY_S3_ACCESSOR.instance.write_local_file(@bucket, @key, csv_file.path)\n\n      expect(actual_put_output).to eq(expected_put_output)\n    end\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby", "rack", "puma"], "comments": [{"owner": {"reputation": 31, "user_id": 10982705, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-rkidqmUuTKg/AAAAAAAAAAI/AAAAAAAAAAc/v8Ywu6XOhps/photo.jpg?sz=128", "display_name": "Vic Xu", "link": "https://stackoverflow.com/users/10982705/vic-xu"}, "edited": false, "score": 0, "creation_date": 1548742101, "post_id": 54414732, "comment_id": 95639692, "body": "I found an article about deploying a rails app with Puma and Nginx. It said, &quot;as Puma is not designed to be accessed by users directly, we will use Nginx as a reverse proxy that will buffer requests and responses between users and your Rails application.&quot; Why is puma can be accessed by the user directly?"}], "answers": [{"comments": [{"owner": {"reputation": 45322, "user_id": 421705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/581b1760881c962648f99d6040d41829?s=128&d=identicon&r=PG", "display_name": "Holger Just", "link": "https://stackoverflow.com/users/421705/holger-just"}, "edited": false, "score": 1, "creation_date": 1548758279, "post_id": 54419034, "comment_id": 95647826, "body": "Rack doesn&#39;t parse HTTP. That&#39;s what the app server does. Rack gets a request (including parsed HTTP headers in a Ruby Hash), handles it through various middlewares and finally hands it over to the application (e.g. a Rails app). which again returns a Ruby object. The application server in turn converts that to an HTTP response and returns it back to the client. So although the semantics in Rack are modelled after HTTP, it never actually sees &quot;raw&quot; HTTP."}, {"owner": {"reputation": 45322, "user_id": 421705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/581b1760881c962648f99d6040d41829?s=128&d=identicon&r=PG", "display_name": "Holger Just", "link": "https://stackoverflow.com/users/421705/holger-just"}, "edited": false, "score": 1, "creation_date": 1548758481, "post_id": 54419034, "comment_id": 95647963, "body": "Also, to &quot;execute a Rack app directly&quot;, you also use an application server like Webrick. In that regard, the lines between a &quot;webserver&quot; and an &quot;application server&quot; are kind of blurry. since both types might parse HTTP and hand the requests over to a content handler using a different protocol (like Rack, CGI, WSGI, ...)"}, {"owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "reply_to_user": {"reputation": 45322, "user_id": 421705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/581b1760881c962648f99d6040d41829?s=128&d=identicon&r=PG", "display_name": "Holger Just", "link": "https://stackoverflow.com/users/421705/holger-just"}, "edited": false, "score": 0, "creation_date": 1548758834, "post_id": 54419034, "comment_id": 95648176, "body": "@HolgerJust You\u2019re right, of course; I oversimplified. Will fix when I\u2019m back at a keyboard."}, {"owner": {"reputation": 31, "user_id": 10982705, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-rkidqmUuTKg/AAAAAAAAAAI/AAAAAAAAAAc/v8Ywu6XOhps/photo.jpg?sz=128", "display_name": "Vic Xu", "link": "https://stackoverflow.com/users/10982705/vic-xu"}, "edited": false, "score": 0, "creation_date": 1548759017, "post_id": 54419034, "comment_id": 95648279, "body": "Actually, puma is an application server to manage process and memory, right? Thank you for your comprehensive explanation."}, {"owner": {"reputation": 31, "user_id": 10982705, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-rkidqmUuTKg/AAAAAAAAAAI/AAAAAAAAAAc/v8Ywu6XOhps/photo.jpg?sz=128", "display_name": "Vic Xu", "link": "https://stackoverflow.com/users/10982705/vic-xu"}, "edited": false, "score": 0, "creation_date": 1548759587, "post_id": 54419034, "comment_id": 95648656, "body": "WSCH is kind of interface between web server and application server in python, right? So what is module used for application server in python? I google it, the result show the Django or CherryPy. But they are web framework. What is underlying package used for application server in these web framework?"}, {"owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "edited": false, "score": 1, "creation_date": 1548759796, "post_id": 54419034, "comment_id": 95648772, "body": "WSCH is a radio station. WSGI is something similar to Rack, for Python. Django and CherryPy are Python web frameworks similar to Ruby\u2019s Rails and Sinatra, respectively."}, {"owner": {"reputation": 31, "user_id": 10982705, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-rkidqmUuTKg/AAAAAAAAAAI/AAAAAAAAAAc/v8Ywu6XOhps/photo.jpg?sz=128", "display_name": "Vic Xu", "link": "https://stackoverflow.com/users/10982705/vic-xu"}, "edited": false, "score": 0, "creation_date": 1548759918, "post_id": 54419034, "comment_id": 95648858, "body": "Are there Python&#39;s package similar to Ruby&#39;s Puma, Unicorn?"}], "tags": [], "owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "is_accepted": false, "score": 5, "last_activity_date": 1548774382, "last_edit_date": 1548774382, "creation_date": 1548757990, "answer_id": 54419034, "question_id": 54414732, "link": "https://stackoverflow.com/questions/54414732/what-is-rack-in-ruby-what-is-puma-in-ruby/54419034#54419034", "title": "What is rack in ruby? What is puma in ruby?", "body": "<p>Puma is an application server, more specifically a <a href=\"http://rack.github.io/\" rel=\"noreferrer\">Rack</a> app server. (There are more than just Puma: Unicorn, Passenger etc. There are also application servers for different interfaces; for example, Tomcat and JBoss are Java application servers.) An application server accepts a HTTP request, parses it into a structure in the application's language, hands it off to the application, and awaits a response object which it then returns to the client.</p>\n\n<p>Nginx/Apache are general purpose web servers. Apache does not know how to serve Rack applications, and Puma doesn't know how to do a bunch of other things Nginx/Apache do (e.g. CGI scripts, URL rewriting, proxies, balancing, blacklisting...)</p>\n\n<p>Rack is a library for Ruby that accepts parsed HTTP requests from an app server, funnels them through a configurable stack of middleware (such as e.g. session handling) passing the request object to a handler, and returning the response object the app server, making web development in Ruby easy. You can execute a Rack app directly (or rather, with a very simple server that is installed with Rack), but it is not recommended outside development, which is where \"proper\" application servers come in: they know how to keep your app alive, restart it if it dies, guarantee that there is the predetermined number of threads running, things like that.</p>\n\n<p>Thus, typically, you have your Web server accept connections, then using <a href=\"https://httpd.apache.org/docs/2.4/howto/reverse_proxy.html#simple\" rel=\"noreferrer\">simple reverse proxy</a> pass the appropriate requests to your Rack application, which is executing inside the Rack app server. This gives you the benefits from all the involved pieces.</p>\n"}], "owner": {"reputation": 31, "user_id": 10982705, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-rkidqmUuTKg/AAAAAAAAAAI/AAAAAAAAAAc/v8Ywu6XOhps/photo.jpg?sz=128", "display_name": "Vic Xu", "link": "https://stackoverflow.com/users/10982705/vic-xu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 787, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1565803724, "creation_date": 1548741744, "question_id": 54414732, "link": "https://stackoverflow.com/questions/54414732/what-is-rack-in-ruby-what-is-puma-in-ruby", "title": "What is rack in ruby? What is puma in ruby?", "body": "<p>According to the definition, the puma is kind of web server and the rack is an interface between web server and application server.</p>\n\n<p>But, lots of videos mention that rack is a interface between web framework and web server. So can I interpret that we use web framework to build our application, so the rack is an interface between web framework and web server?</p>\n\n<p>Another question is that if puma is kind of web server, can I use Apache or Nginx to replace it?</p>\n"}, {"tags": ["javascript", "python", "ruby", "docker"], "comments": [{"owner": {"reputation": 13756, "user_id": 567762, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/908c9abc72ab86111a153b11cb584f26?s=128&d=identicon&r=PG", "display_name": "Jared Beck", "link": "https://stackoverflow.com/users/567762/jared-beck"}, "edited": false, "score": 0, "creation_date": 1548740119, "post_id": 54414179, "comment_id": 95639076, "body": "I recommend <a href=\"https://github.com/rbenv/rbenv\" rel=\"nofollow noreferrer\">rbenv</a>"}], "answers": [{"tags": [], "owner": {"reputation": 124, "user_id": 2151899, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2ce22302d9c8f76500ee41a1d5889e3?s=128&d=identicon&r=PG", "display_name": "Mike Bastoon", "link": "https://stackoverflow.com/users/2151899/mike-bastoon"}, "is_accepted": false, "score": 1, "last_activity_date": 1548741076, "creation_date": 1548741076, "answer_id": 54414629, "question_id": 54414179, "link": "https://stackoverflow.com/questions/54414179/docker-instead-of-rvm-nvm-and-all-others/54414629#54414629", "title": "Docker instead of rvm, nvm and all others", "body": "<p>I think one way to solve your problem is use base image from dockerhub for whatever project you are working on then put your code in github and make sure you check in your code everyday. This way whenever you want to work on your projects then all you have to do is pull the docker image and then clone the repo from github.\nOf course if you want to get creative you can create your own image and push it to dockerhub once you are done with your image.</p>\n"}], "owner": {"reputation": 346, "user_id": 5606186, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/pHPRX.jpg?s=128&g=1", "display_name": "alexzaizar09", "link": "https://stackoverflow.com/users/5606186/alexzaizar09"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 105, "favorite_count": 0, "closed_date": 1548741479, "answer_count": 1, "score": -2, "last_activity_date": 1548741076, "creation_date": 1548738514, "last_edit_date": 1548740469, "question_id": 54414179, "link": "https://stackoverflow.com/questions/54414179/docker-instead-of-rvm-nvm-and-all-others", "closed_reason": "Needs more focus", "title": "Docker instead of rvm, nvm and all others", "body": "<p>I installed a clean ubuntu. I don't want to clutter it with rvm or nvm. Tutorials on docker start from an app already finished on a local machine, and copy all the setup into a docker container and that is it.</p>\n\n<p>I need to keep my local machine clean, for example use the ruby:2 image while I learn ruby, or the node:10 image while learning js. This will also allow me to build the entire application inside docker. That way, I won't have my machine with so many tools installed.</p>\n\n<p>Are there any guide, blog post, or books on this subject? Or just point me into the right docker command to do this and I can learn from your code.</p>\n"}, {"tags": ["ruby", "rubygems", "ubuntu-14.04"], "answers": [{"comments": [{"owner": {"reputation": 91, "user_id": 5966431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vR0Il.jpg?s=128&g=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/5966431/michael"}, "edited": false, "score": 0, "creation_date": 1548740844, "post_id": 54413729, "comment_id": 95639279, "body": "This keeps giving me file permission errors: ERROR:  While executing gem ... (Gem::FilePermissionError): You don&#39;t have write permissions into the /var/lib/gems/1.9.1 directory.  I am following the directions in <a href=\"https://stackoverflow.com/questions/27475311/you-dont-have-write-permissions-into-the-var-lib-gems-1-9-1-directory\">this answer</a>, but it&#39;s like playing whack-a-mole. I&#39;ve gotten to this error: &quot;Operation not permitted - /var/lib/gems/1.9.1/gems/unf_ext-0.0.7.4/ext/unf_ext/unf/tri&zwnj;&#8203;e/char_stream.hh,&quot; but even after chown and chmod, there&#39;s been no progress."}, {"owner": {"reputation": 91, "user_id": 5966431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vR0Il.jpg?s=128&g=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/5966431/michael"}, "edited": false, "score": 0, "creation_date": 1549060045, "post_id": 54413729, "comment_id": 95782457, "body": "I followed the instructions here: <a href=\"https://gorails.com/setup/ubuntu/14.04\" rel=\"nofollow noreferrer\">gorails.com/setup/ubuntu/14.04</a> ---   Should I use sudo rbenv install 2.5.3 and sudo rbenv global 2.5.3?"}, {"owner": {"reputation": 275, "user_id": 10976794, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h4oit.png?s=128&g=1", "display_name": "Bohdan Sviripa", "link": "https://stackoverflow.com/users/10976794/bohdan-sviripa"}, "reply_to_user": {"reputation": 91, "user_id": 5966431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vR0Il.jpg?s=128&g=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/5966431/michael"}, "edited": false, "score": 0, "creation_date": 1549077767, "post_id": 54413729, "comment_id": 95785706, "body": "@Michael, no. You should run <code>rbenv install 2.5.3</code> and <code>rbenv global 2.5.3</code> without <code>sudo</code> if you want to use <code>bundle</code> command without <code>sudo</code> during development."}, {"owner": {"reputation": 91, "user_id": 5966431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vR0Il.jpg?s=128&g=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/5966431/michael"}, "edited": false, "score": 0, "creation_date": 1549168537, "post_id": 54413729, "comment_id": 95804772, "body": "I&#39;m confident that I followed that guide verbatim. I will better document my process and update the original question (comments don&#39;t allow for appropriate formatting). Thank you for everything thus far!"}], "tags": [], "owner": {"reputation": 275, "user_id": 10976794, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h4oit.png?s=128&g=1", "display_name": "Bohdan Sviripa", "link": "https://stackoverflow.com/users/10976794/bohdan-sviripa"}, "is_accepted": false, "score": 1, "last_activity_date": 1548735089, "creation_date": 1548735089, "answer_id": 54413729, "question_id": 54413605, "link": "https://stackoverflow.com/questions/54413605/error-occured-while-installing-unf-ext-0-0-7-4-and-bundler-cannot-continue/54413729#54413729", "title": "Error occured while installing unf_ext (0.0.7.4), and Bundler cannot continue", "body": "<p>There is a difference between running commands with <code>sudo</code> and without. You can get more info about this command here <code>https://kb.iu.edu/d/amyi</code>.</p>\n\n<p><code>Errno::EACCES</code> usually happens when bunder has no access to a needed folder or it doesn't exist. </p>\n\n<p>Try to <code>gem install unf_ext -v '0.0.7.4' --source 'https://rubygems.org/'</code> without <code>sudo</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 432, "user_id": 10447251, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-8U4-3SgQQ_M/AAAAAAAAAAI/AAAAAAAAACQ/6cio6dYsxuU/photo.jpg?sz=128", "display_name": "Carlos", "link": "https://stackoverflow.com/users/10447251/carlos"}, "is_accepted": false, "score": 5, "last_activity_date": 1602779322, "creation_date": 1602779322, "answer_id": 64375930, "question_id": 54413605, "link": "https://stackoverflow.com/questions/54413605/error-occured-while-installing-unf-ext-0-0-7-4-and-bundler-cannot-continue/64375930#64375930", "title": "Error occured while installing unf_ext (0.0.7.4), and Bundler cannot continue", "body": "<p>I had this same problem and the reason was that I did not installed all the dependencies that bundler needs to run</p>\n<p>just try to:</p>\n<pre><code>sudo apt-get install build-essential\n</code></pre>\n<p>then run again</p>\n<pre><code>gem install bundler\n</code></pre>\n<p>and lastly</p>\n<pre><code>bundler\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 4915164, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b47a9310210e3b68b2024481504795b6?s=128&d=identicon&r=PG&f=1", "display_name": "brpy", "link": "https://stackoverflow.com/users/4915164/brpy"}, "is_accepted": false, "score": 0, "last_activity_date": 1610561561, "last_edit_date": 1610561561, "creation_date": 1610559787, "answer_id": 65707110, "question_id": 54413605, "link": "https://stackoverflow.com/questions/54413605/error-occured-while-installing-unf-ext-0-0-7-4-and-bundler-cannot-continue/65707110#65707110", "title": "Error occured while installing unf_ext (0.0.7.4), and Bundler cannot continue", "body": "<p>I had same issue on Fedora.</p>\n<p>I simply had to install the <code>gcc-c++</code> package.</p>\n"}], "owner": {"reputation": 91, "user_id": 5966431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vR0Il.jpg?s=128&g=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/5966431/michael"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7646, "favorite_count": 1, "answer_count": 3, "score": 9, "last_activity_date": 1615807483, "creation_date": 1548734148, "last_edit_date": 1548734540, "question_id": 54413605, "link": "https://stackoverflow.com/questions/54413605/error-occured-while-installing-unf-ext-0-0-7-4-and-bundler-cannot-continue", "title": "Error occured while installing unf_ext (0.0.7.4), and Bundler cannot continue", "body": "<p>My ultimate goal is to get this to work in an Ubuntu 14.04 Docker container: <a href=\"https://github.com/byalextran/autoluv\" rel=\"noreferrer\">https://github.com/byalextran/autoluv</a></p>\n\n<p>When I run</p>\n\n<pre><code>m1@9bdc67007b49:~/autoluv$ bundle install --deployment\n</code></pre>\n\n<p>It says:</p>\n\n<pre><code>Fetching unf_ext 0.0.7.4\nInstalling unf_ext 0.0.7.4 with native extensions\nErrno::EACCES: Permission denied @ rb_sysopen - /home/m1/autoluv/vendor/bundle/ruby/2.4.0/gems/unf_ext-0.0.7.4/.document\nAn error occurred while installing unf_ext (0.0.7.4), and Bundler cannot continue.\nMake sure that `gem install unf_ext -v '0.0.7.4' --source 'https://rubygems.org/'` succeeds before bundling.\n</code></pre>\n\n<p>But when I run</p>\n\n<pre><code>sudo gem install unf_ext -v '0.0.7.4' --source 'https://rubygems.org/'\n</code></pre>\n\n<p>unf_ext-0.0.7.4 installs fine?</p>\n\n<pre><code>Building native extensions.  This could take a while...                                                                             \nSuccessfully installed unf_ext-0.0.7.4                                                                                              \n1 gem installed                                                                                                                     \nInstalling ri documentation for unf_ext-0.0.7.4...                                                                                  \nInstalling RDoc documentation for unf_ext-0.0.7.4...\n</code></pre>\n\n<p>I cannot figure out the next step. I've tried installing ruby-dev and gcc, but neither has helped move this along :(</p>\n\n<p>Any and all help is much appreciated!</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 5519, "user_id": 938947, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/f611b152b4fa9fe2a05f4ee9b84fdcb7?s=128&d=identicon&r=PG", "display_name": "widjajayd", "link": "https://stackoverflow.com/users/938947/widjajayd"}, "edited": false, "score": 0, "creation_date": 1548724661, "post_id": 54412179, "comment_id": 95635816, "body": "may be you check <a href=\"https://stackoverflow.com/a/31812867/938947\">stackoverflow.com/a/31812867/938947</a>"}, {"owner": {"reputation": 289, "user_id": 6614967, "user_type": "registered", "accept_rate": 45, "profile_image": "https://graph.facebook.com/306000706408468/picture?type=large", "display_name": "Mohammad Shahbaz", "link": "https://stackoverflow.com/users/6614967/mohammad-shahbaz"}, "reply_to_user": {"reputation": 5519, "user_id": 938947, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/f611b152b4fa9fe2a05f4ee9b84fdcb7?s=128&d=identicon&r=PG", "display_name": "widjajayd", "link": "https://stackoverflow.com/users/938947/widjajayd"}, "edited": false, "score": 0, "creation_date": 1548728546, "post_id": 54412179, "comment_id": 95636593, "body": "already done, problme still exists"}, {"owner": {"reputation": 5470, "user_id": 2052097, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/KOzAT.jpg?s=128&g=1", "display_name": "z atef", "link": "https://stackoverflow.com/users/2052097/z-atef"}, "edited": false, "score": 0, "creation_date": 1548728974, "post_id": 54412179, "comment_id": 95636675, "body": "Try bundle update, to update all gems"}, {"owner": {"reputation": 289, "user_id": 6614967, "user_type": "registered", "accept_rate": 45, "profile_image": "https://graph.facebook.com/306000706408468/picture?type=large", "display_name": "Mohammad Shahbaz", "link": "https://stackoverflow.com/users/6614967/mohammad-shahbaz"}, "edited": false, "score": 0, "creation_date": 1548729480, "post_id": 54412179, "comment_id": 95636773, "body": "done but same error"}, {"owner": {"reputation": 498, "user_id": 10384879, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-5HTxyDEG1Qo/AAAAAAAAAAI/AAAAAAAAAeQ/9iMyCvOw2A4/photo.jpg?sz=128", "display_name": "giri dharan", "link": "https://stackoverflow.com/users/10384879/giri-dharan"}, "edited": false, "score": 0, "creation_date": 1548730104, "post_id": 54412179, "comment_id": 95636880, "body": "I have solution"}, {"owner": {"reputation": 289, "user_id": 6614967, "user_type": "registered", "accept_rate": 45, "profile_image": "https://graph.facebook.com/306000706408468/picture?type=large", "display_name": "Mohammad Shahbaz", "link": "https://stackoverflow.com/users/6614967/mohammad-shahbaz"}, "edited": false, "score": 0, "creation_date": 1548730145, "post_id": 54412179, "comment_id": 95636887, "body": "can you please share the solution"}, {"owner": {"reputation": 498, "user_id": 10384879, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-5HTxyDEG1Qo/AAAAAAAAAAI/AAAAAAAAAeQ/9iMyCvOw2A4/photo.jpg?sz=128", "display_name": "giri dharan", "link": "https://stackoverflow.com/users/10384879/giri-dharan"}, "edited": false, "score": 0, "creation_date": 1548730266, "post_id": 54412179, "comment_id": 95636904, "body": "I will post just wait 2mins"}, {"owner": {"reputation": 498, "user_id": 10384879, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-5HTxyDEG1Qo/AAAAAAAAAAI/AAAAAAAAAeQ/9iMyCvOw2A4/photo.jpg?sz=128", "display_name": "giri dharan", "link": "https://stackoverflow.com/users/10384879/giri-dharan"}, "edited": false, "score": 0, "creation_date": 1548731072, "post_id": 54412179, "comment_id": 95637066, "body": "@MohammadShahbaz i posted answer ask me if you are struggle in between..Thanks Advance!"}], "owner": {"reputation": 289, "user_id": 6614967, "user_type": "registered", "accept_rate": 45, "profile_image": "https://graph.facebook.com/306000706408468/picture?type=large", "display_name": "Mohammad Shahbaz", "link": "https://stackoverflow.com/users/6614967/mohammad-shahbaz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 335, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1548732570, "creation_date": 1548721307, "question_id": 54412179, "link": "https://stackoverflow.com/questions/54412179/you-have-already-activated-rack-2-0-3-but-your-gemfile-requires-rack-2-0-6", "title": "You have already activated rack 2.0.3, but your Gemfile requires rack 2.0.6", "body": "<p>I have tried all available solutions but didn't get the result. I even uninstalled the rack and then run the bundle install but getting same issue.</p>\n\n<p>tried command:</p>\n\n<pre><code> -gem uninstall rack\n -gem pristine --all\n</code></pre>\n\n<p>but everytime it shows that You have already activated rack 2.0.3, but your Gemfile requires rack 2.0.6 in log errors.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "acts-as-votable"], "answers": [{"tags": [], "owner": {"reputation": 5519, "user_id": 938947, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/f611b152b4fa9fe2a05f4ee9b84fdcb7?s=128&d=identicon&r=PG", "display_name": "widjajayd", "link": "https://stackoverflow.com/users/938947/widjajayd"}, "is_accepted": false, "score": 0, "last_activity_date": 1548738788, "last_edit_date": 1548738788, "creation_date": 1548729555, "answer_id": 54413082, "question_id": 54412141, "link": "https://stackoverflow.com/questions/54412141/how-can-i-develop-a-voting-system-where-users-can-vote-other-users-i-e-a-reputa/54413082#54413082", "title": "How can I develop a voting system where users can vote other users (i.e a reputation-like system)?", "body": "<p>since user_reputation is just one record for each user, my opinion is to set has_one instead of has_many relation between User and UserReputation, here is the setting for model, note: you don't need to generate migration since user_reputations table already has user_id field</p>\n\n<p>in you model </p>\n\n<pre><code>class User &lt; ActiveRecord::Base\n  acts_as_voter\n  has_one :user_reputation  # new changes\nend\n\nclass UserReputation &lt; ActiveRecord::Base\n  acts_as_votable\n  belongs_to :user\nend\n</code></pre>\n\n<p>in your controller</p>\n\n<pre><code>class UserReputationsController &lt; ApplicationController\n  def index\n    @users = User.all\n    redirect_to user_reputations_path\n  end\n\n  def like_user\n    @user_reputation = UserReputation.find(params[user_reputation_id])\n    @user_reputation.liked_by current_user\n    # current_user is available from application controller if you using bcrypt or devise\n  end\n\n  def dislike_user\n    @user_reputation = UserReputation.find(params[user_reputation_id])\n    @user_reputation.downvote_from current_user\n  end \nend\n</code></pre>\n\n<p>in you view</p>\n\n<pre><code>&lt;table class=\"table\" style=\"font-size: 18px;\"&gt;\n    &lt;thead&gt;\n        &lt;tr&gt;\n            &lt;th&gt; Username &lt;/th&gt;\n            &lt;th&gt; Reputation &lt;/th&gt;\n            &lt;th&gt; Upvote &lt;/th&gt;\n            &lt;th&gt; Downvote &lt;/th&gt;\n        &lt;/tr&gt;\n    &lt;/thead&gt;\n    &lt;tbody&gt;\n        &lt;% @users.each do |user| %&gt;\n            &lt;tr&gt;\n                &lt;td&gt; &lt;%= user.email %&gt; &lt;/td&gt;\n                &lt;td&gt; &lt;%= @user.user_reputation.votes_for.size %&gt; &lt;/td&gt;\n                # here the relation set between user and user_reputation\n                # since it set one user only one user_reputation\n                # and you can get scope votes_for since it has acts_as_votable\n                &lt;td&gt; \n                  &lt;%= link_to \"Like\", like_user_reputation_path(user_reputation_id: @user.user_reputation.id) %&gt; \n                &lt;/td&gt;\n                &lt;td&gt; \n                  &lt;%= link_to \"dislike\", dislike_user_reputation_path(user_reputation_id: @user.user_reputation.id) %&gt; \n                &lt;/td&gt;\n            &lt;/tr&gt;\n        &lt;% end %&gt;\n    &lt;/tbody&gt;\n&lt;/table&gt;\n</code></pre>\n\n<p>in your routes file </p>\n\n<pre><code>resources :user_reputations do\n  collection { \n    get :like_user   \n    get :dislike_user\n  }\nend\n</code></pre>\n"}], "owner": {"reputation": 299, "user_id": 9454269, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/0edb637e57ce3cad9745d80e6739b567?s=128&d=identicon&r=PG&f=1", "display_name": "KuroGane", "link": "https://stackoverflow.com/users/9454269/kurogane"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 77, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1548762435, "creation_date": 1548720953, "question_id": 54412141, "link": "https://stackoverflow.com/questions/54412141/how-can-i-develop-a-voting-system-where-users-can-vote-other-users-i-e-a-reputa", "title": "How can I develop a voting system where users can vote other users (i.e a reputation-like system)?", "body": "<p><strong>Question: How can I use the acts_as_votable gem to get a \"user reputation\" system working for my user model? I'm unsure of the best approach given the code below.</strong></p>\n\n<p>Essentially, I have a user model. What I want to do is, for certain users (namely admin accounts), they can access a page where all users are viewable and \"vote\" for the user in terms of their reputation.</p>\n\n<p>My issue is that, from my understanding, the gem requires both a acts_as_votable, and a acts_as_voter within the model. </p>\n\n<p>However, since the voter is the user, and the votable is the user, too, I'm unsure how to proceed with this.</p>\n\n<p>What I've done so far is:</p>\n\n<p>Gem file:</p>\n\n<pre><code>gem 'acts_as_votable'\n</code></pre>\n\n<p>Console\n    rails generate acts_as_votable:migration\n    rake db:migrate</p>\n\n<p>The model I have is:</p>\n\n<pre><code>class User &lt; ActiveRecord::Base\nend\n</code></pre>\n\n<p>Based on this, what would be the recommended solution? </p>\n\n<p>I've tried creating another model, called \"UserReputation\", and generated relevant controllers and views. </p>\n\n<p>My issue with this approach is  that when I'm in the index page, for user reputations, it does not show all the users against a like and dislike button. </p>\n\n<p>I understand why this is the case, as UserReputation is created by a user, and then users would vote for a UserReputation (Analogous to a forum post). This isn't what I want to do, but I was following a tutorial for this.</p>\n\n<p>Essentially, if this is the only way to go, is it possible to put a \"link\" between User and UserReputation, so they are tied together?</p>\n\n<p>This is my attempted code:</p>\n\n<pre><code>class User &lt; ActiveRecord::Base\n  acts_as_voter\n  has_many :user_reputations\nend\n\nclass UserReputation &lt; ActiveRecord::Base\n  acts_as_votable\n  belongs_to :user\nend\n\nclass UserReputationsController &lt; ApplicationController\n  def index\n    @user_reputations = UserReputation.all\n    @users = User.all\n  end\nend\n</code></pre>\n\n<p>Index for User Reputations:</p>\n\n<pre><code>&lt;table class=\"table\" style=\"font-size: 18px;\"&gt;\n    &lt;thead&gt;\n        &lt;tr&gt;\n            &lt;th&gt; Username &lt;/th&gt;\n            &lt;th&gt; Reputation &lt;/th&gt;\n            &lt;th&gt; Upvote &lt;/th&gt;\n            &lt;th&gt; Downvote &lt;/th&gt;\n        &lt;/tr&gt;\n    &lt;/thead&gt;\n    &lt;tbody&gt;\n        &lt;% @user_reputations.each do |user_reputation| %&gt;\n            &lt;tr&gt;\n                &lt;td&gt; &lt;%= user.email %&gt; &lt;/td&gt;\n                &lt;th&gt; &lt;%= \"Reputation\" %&gt; &lt;/th&gt;\n                &lt;td&gt; &lt;%= link_to like_user_reputation_path(user), method: :put do %&gt;\nlike\n&lt;%= user_reputation.get_upvotes.size %&gt;\n&lt;% end %&gt; &lt;/td&gt;\n&lt;td&gt; &lt;%= link_to dislike_user_reputation_path(user), method: :put do %&gt;\ndislike\n    &lt;%= user_reputation.get_downvotes.size %&gt;\n    &lt;% end %&gt; &lt;/td&gt;\n            &lt;/tr&gt;\n        &lt;% end %&gt;\n    &lt;/tbody&gt;\n&lt;/table&gt;\n&lt;br&gt;\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "controller"], "comments": [{"owner": {"reputation": 633, "user_id": 2611472, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/67a5db98d0cd9027b372cf17a3b6b19f?s=128&d=identicon&r=PG", "display_name": "westman2222", "link": "https://stackoverflow.com/users/2611472/westman2222"}, "reply_to_user": {"reputation": 3521, "user_id": 2521680, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/6D935.jpg?s=128&g=1", "display_name": "Rockwell Rice", "link": "https://stackoverflow.com/users/2521680/rockwell-rice"}, "edited": false, "score": 0, "creation_date": 1548718349, "post_id": 54411786, "comment_id": 95634447, "body": "yup- that worked, wow. thanks !"}], "answers": [{"tags": [], "owner": {"reputation": 3521, "user_id": 2521680, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/6D935.jpg?s=128&g=1", "display_name": "Rockwell Rice", "link": "https://stackoverflow.com/users/2521680/rockwell-rice"}, "is_accepted": true, "score": 1, "last_activity_date": 1548718383, "creation_date": 1548718383, "answer_id": 54411819, "question_id": 54411786, "link": "https://stackoverflow.com/questions/54411786/added-column-to-db-migration-entries-not-showing-in-show-view/54411819#54411819", "title": "added column to DB migration: entries not showing in SHOW view", "body": "<p>In your <code>runs_controller.rb</code> you likely did not add the new field to the whitelisted params.</p>\n\n<pre><code># Never trust parameters from the scary internet, only allow the white list through.\ndef run_params\n  params.require(:run).permit(... other fields... , :date)\nend\n</code></pre>\n"}], "owner": {"reputation": 633, "user_id": 2611472, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/67a5db98d0cd9027b372cf17a3b6b19f?s=128&d=identicon&r=PG", "display_name": "westman2222", "link": "https://stackoverflow.com/users/2611472/westman2222"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 22, "favorite_count": 0, "accepted_answer_id": 54411819, "answer_count": 1, "score": 0, "last_activity_date": 1548718383, "creation_date": 1548718205, "question_id": 54411786, "link": "https://stackoverflow.com/questions/54411786/added-column-to-db-migration-entries-not-showing-in-show-view", "title": "added column to DB migration: entries not showing in SHOW view", "body": "<p>I added <code>date</code> to my DB table for \"Run\" scaffold, which seemed to work, see DB schema file: </p>\n\n<pre><code>create_table \"runs\", force: :cascade do |t|\n    t.integer \"user_id\"\n    t.string \"Run_Type\"\n    t.string \"Location\"\n    t.time \"Start_Time\"\n    t.decimal \"Pace\"\n    t.decimal \"Miles\"\n    t.datetime \"created_at\", null: false\n    t.datetime \"updated_at\", null: false\n    t.date \"Run_Date\"\n    t.index [\"user_id\"], name: \"index_runs_on_user_id\"\n  end\n</code></pre>\n\n<p>Then, I added \"date\" to my form in the NEW.html.erb file: </p>\n\n<pre><code>&lt;%= form_with(model: run, local: true) do |form| %&gt;\n  &lt;% if run.errors.any? %&gt;\n    &lt;div id=\"error_explanation\"&gt;\n      &lt;h2&gt;&lt;%= pluralize(run.errors.count, \"error\") %&gt; prohibited this run from being saved:&lt;/h2&gt;\n\n      &lt;ul&gt;\n      &lt;% run.errors.full_messages.each do |message| %&gt;\n        &lt;li&gt;&lt;%= message %&gt;&lt;/li&gt;\n      &lt;% end %&gt;\n      &lt;/ul&gt;\n    &lt;/div&gt;\n  &lt;% end %&gt;\n\n\n\n    &lt;div class=\"form-group\"&gt;\n    &lt;%= form.label :Run_Type %&gt;\n    &lt;%= form.text_field :Run_Type, class: \"form-control\" %&gt;\n  &lt;/div&gt;\n\n   &lt;div class=\"form-group\"&gt;\n    &lt;%= form.label :Location %&gt;\n    &lt;%= form.text_field :Location, class: \"form-control\" %&gt;\n  &lt;/div&gt;\n\n  &lt;div class=\"form-group\"&gt;\n    &lt;%= form.label :Run_Date %&gt;\n    &lt;%= form.date_select :Run_Date, class: \"form-control\" %&gt;\n  &lt;/div&gt;\n\n   &lt;div class=\"form-group\"&gt;\n    &lt;%= form.label :Start_Time %&gt;\n    &lt;%= form.time_select :Start_Time, class: \"form-control\" %&gt;\n  &lt;/div&gt;\n\n &lt;div class=\"form-group\"&gt;\n    &lt;%= form.label :Pace %&gt;\n    &lt;%= form.text_field :Pace, class: \"form-control\" %&gt;\n  &lt;/div&gt;\n\n  &lt;div class=\"form-group\"&gt;\n    &lt;%= form.label :Miles %&gt;\n    &lt;%= form.text_field :Miles, class: \"form-control\" %&gt;\n  &lt;/div&gt;\n\n &lt;%= form.submit class: \"btn btn-primary\" %&gt;\n  &lt;/div&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>Everything seems to work, via the form, a date field now appears. However, when I make, or edit, an entry in my DB to include a date, it does not show in my index.html.erb page, see below:</p>\n\n<pre><code>&lt;div class=\"container\"&gt;\n&lt;h1&gt;Runs&lt;/h1&gt;\n\n  &lt;table class=\"table\"&gt;\n  &lt;thead&gt;\n    &lt;tr&gt;\n      &lt;th&gt;User&lt;/th&gt;\n      &lt;th&gt;Run Type&lt;/th&gt;\n      &lt;th&gt;Location&lt;/th&gt;\n      &lt;th&gt;Start Time&lt;/th&gt;\n      &lt;th&gt;Pace&lt;/th&gt;\n      &lt;th&gt;Miles&lt;/th&gt;\n      &lt;th&gt;Date&lt;/th&gt;\n      &lt;th colspan=\"3\"&gt;&lt;/th&gt;\n    &lt;/tr&gt;\n  &lt;/thead&gt;\n\n  &lt;tbody&gt;\n    &lt;% @runs.each do |run| %&gt;\n      &lt;tr&gt;\n        &lt;td&gt;&lt;%= run.user.try(:email) %&gt;&lt;/td&gt;\n        &lt;td&gt;&lt;%= run.Run_Type %&gt;&lt;/td&gt;\n        &lt;td&gt;&lt;%= run.Location %&gt;&lt;/td&gt;\n        &lt;td&gt;&lt;%= run.Start_Time %&gt;&lt;/td&gt;\n        &lt;td&gt;&lt;%= run.Pace %&gt;&lt;/td&gt;\n        &lt;td&gt;&lt;%= run.Miles %&gt;&lt;/td&gt;\n        &lt;td&gt;&lt;%= run.Run_Date %&gt;&lt;/td&gt;\n        &lt;td&gt;&lt;%= link_to 'Show', run %&gt;&lt;/td&gt;\n        &lt;% if run.user == current_user %&gt;\n        &lt;td&gt;&lt;%= link_to 'Edit', edit_run_path(run) %&gt;&lt;/td&gt;\n        &lt;td&gt;&lt;%= link_to 'Destroy', run, method: :delete, data: { confirm: 'Are you sure?' } %&gt;&lt;/td&gt;\n         &lt;% end %&gt;\n      &lt;/tr&gt;\n    &lt;% end %&gt;\n  &lt;/tbody&gt;\n&lt;/table&gt;\n\n&lt;br&gt;\n  &lt;% if user_signed_in? %&gt;\n      &lt;%= link_to 'New Run', new_run_path %&gt;\n  &lt;% end %&gt;\n\n&lt;/div&gt;\n</code></pre>\n\n<p>As a visual, see screen grab below. Although all of these entries have been update to include dates, they are now displaying in the table:</p>\n\n<p><a href=\"https://i.stack.imgur.com/smOaS.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/smOaS.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["ruby", "nokogiri", "open-uri"], "comments": [{"owner": {"reputation": 147, "user_id": 627702, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be3c7259b2e6ae5d6a6fb82e745f01a9?s=128&d=identicon&r=PG", "display_name": "SWoo", "link": "https://stackoverflow.com/users/627702/swoo"}, "edited": false, "score": 0, "creation_date": 1551247940, "post_id": 54411704, "comment_id": 96566112, "body": "I&#39;ve found that open-uri fails if the website is setting a cookie and then redirecting after the cookie is set because open-uri is not saving the cookie (as far as I understand it). You can test this by blocking cookies temporarily in your browser and attempting to load the url again."}], "owner": {"reputation": 11, "user_id": 2308493, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb56d84a3d1b5cd2aa010e2d56eaec77?s=128&d=identicon&r=PG", "display_name": "user2308493", "link": "https://stackoverflow.com/users/2308493/user2308493"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 210, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1548717631, "creation_date": 1548717631, "question_id": 54411704, "link": "https://stackoverflow.com/questions/54411704/http-redirection-loop-runtimeerror-in-open-uri-redirections-gem", "title": "HTTP redirection loop RuntimeError in open_uri_redirections gem", "body": "<p>Thanks for your time.</p>\n\n<p>I'm working up a Ruby script to parse a CSV of urls and evaluate them on a variety of dimensions to see if certain tags and attributes are present or confirm to certain pattern.</p>\n\n<p>I'm using Nokogiri, open-uri and the patch for open-url to allow the script to follow redirections, open_uri_redirections.</p>\n\n<p>On a handful of problematic domains, I encounter an error and the script encounters a runtime error:</p>\n\n<pre><code>Loading https://www.exampleproblemdomain.com C:/Ruby24-x64/lib/ruby/2.4.0/open-uri.rb:233:in `open_loop': HTTP redirection loop: https://www.exampleproblemdomain.com (RuntimeError)\n        from C:/Ruby24-x64/lib/ruby/2.4.0/open-uri.rb:151:in `open_uri'\n        from C:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/open_uri_redirections-0.2.1/lib/open-uri/redirections_patch.rb:55:in `open_uri'\n        from C:/Ruby24-x64/lib/ruby/2.4.0/open-uri.rb:721:in `open'\n        from C:/Ruby24-x64/lib/ruby/2.4.0/open-uri.rb:35:in `open'\n        from arraycsv.rb:16:in `block in &lt;main&gt;'\n        from C:/Ruby24-x64/lib/ruby/2.4.0/csv.rb:866:in `each'\n        from C:/Ruby24-x64/lib/ruby/2.4.0/csv.rb:866:in `each'\n        from arraycsv.rb:14:in `&lt;main&gt;'\n</code></pre>\n\n<p>The <a href=\"https://stackoverflow.com/questions/30764104/open-uri-nokogiri-redirection-problems\">open_uri_redirections</a> gem works well for most domains but a select few encounter this issue and I can't figure out why, even when I use a redirection extension like <a href=\"https://chrome.google.com/webstore/detail/redirect-path/aomidfkchockcldhbkggjokdkkebmdll?hl=en\" rel=\"nofollow noreferrer\">Ayima</a> to follow the chain of redirections.</p>\n\n<p>Could it be a 302 vs. a 301 creating the issue? </p>\n"}, {"tags": ["ruby", "rspec", "factory-bot", "activesupport", "rspec-mocks"], "answers": [{"tags": [], "owner": {"reputation": 5980, "user_id": 60131, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/axDcf.jpg?s=128&g=1", "display_name": "John Gallagher", "link": "https://stackoverflow.com/users/60131/john-gallagher"}, "is_accepted": true, "score": 1, "last_activity_date": 1548763235, "creation_date": 1548763235, "answer_id": 54420595, "question_id": 54411184, "link": "https://stackoverflow.com/questions/54411184/how-to-spy-just-one-call-of-activesupportnotifications-instrument-not-all-of/54420595#54420595", "title": "How to spy just one call of ActiveSupport::Notifications #instrument, not all of them", "body": "<p>I tend to avoid mocking in general.</p>\n\n<p>I had a similar problem and here's how I achieved it:</p>\n\n<pre><code>  describe \"#my_method\" do\n    let(:some_object) { build :some_object }\n\n    before { record_events }\n\n    it \"calls notifier\" do\n      described_class.new(some_object).my_method\n\n      # Make sure your event was triggered\n      expect(events.map(&amp;:name)).to include('asd')\n\n      # Check number of events\n      expect(events).to be_one\n\n      # Check contents of event payload                  \n      expect(events.first.payload).to eq({ 'extra' =&gt; 'context' })\n\n      # Even check the duration of an event\n      expect(events.first.duration).to be &lt; 3\n    end\n\n    private\n\n    attr_reader :events\n\n    def record_events\n      @events = []\n      ActiveSupport::Notifications.subscribe(:asd) do |*args| #\n        @events &lt;&lt; ActiveSupport::Notifications::Event.new(*args)\n      end\n    end\n  end\n</code></pre>\n\n<h2>Advantages over mocking</h2>\n\n<ul>\n<li>No more weird side effects</li>\n<li>Using <code>ActiveSupport::Notifications</code> as intended</li>\n<li><a href=\"https://github.com/rails/rails/blob/94b5cd3a20edadd6f6b8cf0bdf1a4d4919df86cb/activesupport/lib/active_support/notifications/instrumenter.rb#L54\" rel=\"nofollow noreferrer\"><code>ActiveSupport::Notifications::Event</code></a> wrapper gives you nice extras like <a href=\"https://github.com/rails/rails/blob/94b5cd3a20edadd6f6b8cf0bdf1a4d4919df86cb/activesupport/lib/active_support/notifications/instrumenter.rb#L80\" rel=\"nofollow noreferrer\"><code>#duration</code></a></li>\n<li>Easily check for other events being triggered</li>\n<li>The ability to only look at events that match a name - use <code>ActiveSupport::Notifications.subscribe(/asd/)</code> to do partial matches on event names</li>\n<li>Better readability - checking events array is more readable</li>\n</ul>\n\n<h2>Disadvantages over mocking</h2>\n\n<ul>\n<li>Way more code</li>\n<li>Mutates the <code>@events</code> array</li>\n<li>Possible dependencies between tests if you don't clear <code>@events</code> on <code>teardown</code></li>\n</ul>\n"}], "owner": {"reputation": 160, "user_id": 7138055, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf450fde678e2b88162fd70a260ec56f?s=128&d=identicon&r=PG", "display_name": "Caio Salgado", "link": "https://stackoverflow.com/users/7138055/caio-salgado"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 337, "favorite_count": 0, "accepted_answer_id": 54420595, "answer_count": 1, "score": 1, "last_activity_date": 1548763235, "creation_date": 1548714349, "question_id": 54411184, "link": "https://stackoverflow.com/questions/54411184/how-to-spy-just-one-call-of-activesupportnotifications-instrument-not-all-of", "title": "How to spy just one call of ActiveSupport::Notifications #instrument, not all of them", "body": "<p>I'm making a Rspec test that checks if <code>ActiveSupport::Notification.instrument</code> was called with some parameters.</p>\n\n<p>The thing is that in order to make this test a need <code>FactoryBot</code> to build some objects, but when I try to spy on <code>ActiveSupport::Notification.instrument</code> I always get an error:</p>\n\n<pre><code>ActiveSupport::Notifications received :instrument with unexpected arguments\n         expected: (:asd)\n              got: (\"factory_bot.run_factory\", {:factory=&gt;#&lt;FactoryBot::Factory:0x005569b6d30, @al... nil, dispatch: nil, distribution_state: 2, main_category_id: nil&gt;}, :strategy=&gt;:build, :traits=&gt;[]})\n</code></pre>\n\n<p>It seems that FactoryBot calls activesupport so when I mock it for my test purpose I end up mocking it too far...</p>\n\n<p>code example:</p>\n\n<p>class:</p>\n\n<pre><code>class SomeObject\n    def initialize(something)\n        #some code\n    end\n\n    def my_method\n        ActiveSupport::Notifications.instrument :asd\n    end\nend\n</code></pre>\n\n<p>spec:</p>\n\n<pre><code>describe \"#my_method\" do\n    let(:some_object) { build :some_object }\n    before do\n      allow(ActiveSupport::Notifications).to receive(:instrument).with :asd\n    end\n\n    it \"calls notifier\" do\n      described_class.new(some_object).my_method\n\n      expect(ActiveSupport::Notifications).to have_received(:instrument).with :asd\n    end\n  end\n</code></pre>\n\n<p>How can I just mock my call and not FactoryBot's .</p>\n\n<p>I only manage that with one more <code>allow</code> before the one that mocks <code>:asd</code>:</p>\n\n<pre><code> allow(ActiveSupport::Notifications).to receive(:instrument).and_call_original\n</code></pre>\n\n<p>Is there another(better) way?</p>\n"}, {"tags": ["ruby", "sinatra", "erb"], "owner": {"reputation": 1267, "user_id": 1718633, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/fabe1e6b28afc64cdbd3c071621a7565?s=128&d=identicon&r=PG", "display_name": "Rich_F", "link": "https://stackoverflow.com/users/1718633/rich-f"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 39, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1548799875, "creation_date": 1548711936, "last_edit_date": 1548799875, "question_id": 54410735, "link": "https://stackoverflow.com/questions/54410735/sinatra-flexible-file-inclusion-update-without-restart", "title": "Sinatra Flexible File Inclusion/Update Without Restart", "body": "<p>I'm needing a way to insert a warning line (<code>Bootstrap</code> <code>alert</code>) to say the site will go under maintenance in 10 minutes.  I'm using <code>Sinatra 2.0.5</code> and I want to minimize the work involved for on-the-fly warnings like this that I can modify manually.  I can't leave the application set with a <code>tmp/always_restart.txt</code> meaning 'always restart'.  The production files I would like to edit to have this insertion visible.  </p>\n\n<p>Is there a way of using <code>sinatra/reloader</code> to restart or include a single file (I have a <code>sitemessage.erb</code> file that's included in the master <code>erb</code> layout file)?  Optimally it would appear on modification of that single file.  </p>\n\n<p><a href=\"http://sinatrarb.com/contrib/reloader\" rel=\"nofollow noreferrer\">http://sinatrarb.com/contrib/reloader</a></p>\n\n<p><strong>Edit: Further info:</strong></p>\n\n<p>I've tested in <code>:development</code> with <code>tmp/Xalways_restart.txt</code> disabled, so that it must use <code>sinatra/reloader</code>.  It's not finding an <code>erb</code> template:</p>\n\n<pre><code>Errno::ENOENT - No such file or directory @ rb_sysopen - /Users/rich/.rbenv/versions/2.5.1/lib/ruby/gems/2.5.0/gems/sinatra-contrib-2.0.5/lib/sinatra/views/shorts/about.erb\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "heroku", "ruby-on-rails-5"], "answers": [{"comments": [{"owner": {"reputation": 10972, "user_id": 1299362, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/f9ec564b963a34f47cc1719738d75b23?s=128&d=identicon&r=PG", "display_name": "Obromios", "link": "https://stackoverflow.com/users/1299362/obromios"}, "edited": false, "score": 2, "creation_date": 1558935159, "post_id": 54410268, "comment_id": 99248696, "body": "You will also need to set <code>config.require_master_key = true</code> in <code>config&#47;environments&#47;production.rb</code>"}], "tags": [], "owner": {"reputation": 820, "user_id": 2640181, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7599b700aee8e1a534030709ae43616?s=128&d=identicon&r=PG", "display_name": "barmic", "link": "https://stackoverflow.com/users/2640181/barmic"}, "is_accepted": false, "score": 4, "last_activity_date": 1573148509, "last_edit_date": 1573148509, "creation_date": 1548709416, "answer_id": 54410268, "question_id": 54410016, "link": "https://stackoverflow.com/questions/54410016/how-to-get-rails-master-key-after-upgrading-to-rails-5-2/54410268#54410268", "title": "How to get rails master.key after upgrading to rails 5.2", "body": "<p>You have to generate <strong>master.key</strong> and <strong>credentials.yml.enc</strong>. To do this, just run the command:</p>\n\n<pre><code>run EDITOR=vim rails credentials:edit\n</code></pre>\n\n<p>(As editor you can use something else, for example atom or nano).</p>\n\n<p>In opening editor, you can type credentials, and save it. Rails use <strong>master.key</strong> to encrypt credentials. More you can find here: <a href=\"https://medium.com/cedarcode/rails-5-2-credentials-9b3324851336\" rel=\"nofollow noreferrer\">https://medium.com/cedarcode/rails-5-2-credentials-9b3324851336</a></p>\n\n<p>To make encrypted credentials work on Heroku, you can copy key from master.key and use it to set up <code>RAILS_MASTER_KEY</code> environemnt variable. You can achieve this by Heroku Dashboard or Heroku CLI, as below:</p>\n\n<pre><code>$ heroku config:set RAILS_MASTER_KEY=`cat config/master.key`\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1910, "user_id": 5940124, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/8501b1b8ebfa2217a32576f638cac885?s=128&d=identicon&r=PG", "display_name": "Rudi Thiel", "link": "https://stackoverflow.com/users/5940124/rudi-thiel"}, "edited": false, "score": 0, "creation_date": 1548710321, "post_id": 54410353, "comment_id": 95631814, "body": "Hi thanks for the help I added what seems to be causing the crash in the logs. Is this helpful?"}, {"owner": {"reputation": 2930, "user_id": 1930295, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/128cc4033ec598b63fa96deb33e26131?s=128&d=identicon&r=PG", "display_name": "danielricecodes", "link": "https://stackoverflow.com/users/1930295/danielricecodes"}, "reply_to_user": {"reputation": 1910, "user_id": 5940124, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/8501b1b8ebfa2217a32576f638cac885?s=128&d=identicon&r=PG", "display_name": "Rudi Thiel", "link": "https://stackoverflow.com/users/5940124/rudi-thiel"}, "edited": false, "score": 0, "creation_date": 1548710753, "post_id": 54410353, "comment_id": 95632003, "body": "Thanks.  I&#39;d run <code>rake app:update</code> for sure.  That looks like a generic error that has to do with ActiveStorage.  Perhaps your initializers aren&#39;t updated or you&#39;re missing some of the newer initializers?"}, {"owner": {"reputation": 1910, "user_id": 5940124, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/8501b1b8ebfa2217a32576f638cac885?s=128&d=identicon&r=PG", "display_name": "Rudi Thiel", "link": "https://stackoverflow.com/users/5940124/rudi-thiel"}, "edited": false, "score": 0, "creation_date": 1548711608, "post_id": 54410353, "comment_id": 95632347, "body": "I ran the command but the same error is still appearing. If it is my initializers what can I do to fix it? Thank you!"}], "tags": [], "owner": {"reputation": 2930, "user_id": 1930295, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/128cc4033ec598b63fa96deb33e26131?s=128&d=identicon&r=PG", "display_name": "danielricecodes", "link": "https://stackoverflow.com/users/1930295/danielricecodes"}, "is_accepted": false, "score": 1, "last_activity_date": 1548709899, "creation_date": 1548709899, "answer_id": 54410353, "question_id": 54410016, "link": "https://stackoverflow.com/questions/54410016/how-to-get-rails-master-key-after-upgrading-to-rails-5-2/54410353#54410353", "title": "How to get rails master.key after upgrading to rails 5.2", "body": "<p>A couple of things.  Speaking from my own personal experience, I've upgraded several Rails apps to 5.2 and I have been able to deploy to Heroku just fine without this feature.  So I don't think its that necessarily.  </p>\n\n<p>If you could run <code>heroku logs --tail --app &lt;your app name&gt;</code> and show us a stack trace of why your app is failing, that would definitely help.  </p>\n"}, {"tags": [], "owner": {"reputation": 636, "user_id": 4423221, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6cakp.jpg?s=128&g=1", "display_name": "Hardik Kanjariya \u30c4", "link": "https://stackoverflow.com/users/4423221/hardik-kanjariya-%e3%83%84"}, "is_accepted": false, "score": 0, "last_activity_date": 1548750290, "creation_date": 1548750290, "answer_id": 54416659, "question_id": 54410016, "link": "https://stackoverflow.com/questions/54410016/how-to-get-rails-master-key-after-upgrading-to-rails-5-2/54416659#54416659", "title": "How to get rails master.key after upgrading to rails 5.2", "body": "<p>You'll be able to generate master.key file by using following command:</p>\n\n<pre><code>$ EDITOR=vim rails credentials:edit\n</code></pre>\n\n<p>It's sample output will be as follows:</p>\n\n<pre><code>Adding config/master.key to store the master encryption key: &lt;YOUR_MASTER_KEY&gt;\n\nSave this in a password manager your team can access.\n\nIf you lose the key, no one, including you, can access anything encrypted with it.\n\n      create  config/master.key\n\nIgnoring config/master.key so it won't end up in Git history:\n\n      append  .gitignore\n</code></pre>\n\n<p>Please check official documentation:  <a href=\"https://github.com/rails/rails/blob/master/railties/lib/rails/commands/credentials/USAGE\" rel=\"nofollow noreferrer\">https://github.com/rails/rails/blob/master/railties/lib/rails/commands/credentials/USAGE</a></p>\n"}], "owner": {"reputation": 1910, "user_id": 5940124, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/8501b1b8ebfa2217a32576f638cac885?s=128&d=identicon&r=PG", "display_name": "Rudi Thiel", "link": "https://stackoverflow.com/users/5940124/rudi-thiel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4074, "favorite_count": 1, "answer_count": 3, "score": 3, "last_activity_date": 1573148509, "creation_date": 1548708237, "last_edit_date": 1548751527, "question_id": 54410016, "link": "https://stackoverflow.com/questions/54410016/how-to-get-rails-master-key-after-upgrading-to-rails-5-2", "title": "How to get rails master.key after upgrading to rails 5.2", "body": "<p>So I've upgraded an app I'm working on to rails 5.2 and it's crashing on Heroku. I think it's because I don't have a master.key file in my /config folder. I still have the secrets.yml file from the previous rails version. What do I have to do to resolve this issue?\nThanks!</p>\n\n<p>error in heroku logs:</p>\n\n<pre><code>2019-01-28T21:07:46.922561+00:00 app[web.1]: /app/vendor/bundle/ruby/2.5.0/gems/aws-sdk-s3-1.30.1/lib/aws-sdk-s3/bucket.rb:684:in `extract_name': Cannot load `Rails.config.active_storage.service`: (ArgumentError)\n2019-01-28T21:07:46.922573+00:00 app[web.1]: missing required option :name\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec", "tdd", "bdd"], "comments": [{"owner": {"reputation": 375, "user_id": 10409976, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/91acc14383d05b02f61e8deb0fde4c56?s=128&d=identicon&r=PG&f=1", "display_name": "b.herring", "link": "https://stackoverflow.com/users/10409976/b-herring"}, "reply_to_user": {"reputation": 2345, "user_id": 4988918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/x1BRI.png?s=128&g=1", "display_name": "Mark Merritt", "link": "https://stackoverflow.com/users/4988918/mark-merritt"}, "edited": false, "score": 0, "creation_date": 1548707402, "post_id": 54409764, "comment_id": 95630511, "body": "@MarkMerritt For each car model to be displayed"}, {"owner": {"reputation": 375, "user_id": 10409976, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/91acc14383d05b02f61e8deb0fde4c56?s=128&d=identicon&r=PG&f=1", "display_name": "b.herring", "link": "https://stackoverflow.com/users/10409976/b-herring"}, "reply_to_user": {"reputation": 2345, "user_id": 4988918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/x1BRI.png?s=128&g=1", "display_name": "Mark Merritt", "link": "https://stackoverflow.com/users/4988918/mark-merritt"}, "edited": false, "score": 0, "creation_date": 1548707712, "post_id": 54409764, "comment_id": 95630660, "body": "@MarkMerritt i understand whats happening but i didnt know where to take it from there, hence the question but thanks for your answer."}, {"owner": {"reputation": 1276, "user_id": 5399937, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ctCqj.png?s=128&g=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/5399937/tom"}, "edited": false, "score": 1, "creation_date": 1548709443, "post_id": 54409764, "comment_id": 95631443, "body": "I recommend <a href=\"https://relishapp.com/rspec/rspec-rails/v/3-8/docs/controller-specs\" rel=\"nofollow noreferrer\">RSpec Controller Spec Documentation</a> as a good place to start learning about testing."}, {"owner": {"reputation": 375, "user_id": 10409976, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/91acc14383d05b02f61e8deb0fde4c56?s=128&d=identicon&r=PG&f=1", "display_name": "b.herring", "link": "https://stackoverflow.com/users/10409976/b-herring"}, "reply_to_user": {"reputation": 1276, "user_id": 5399937, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ctCqj.png?s=128&g=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/5399937/tom"}, "edited": false, "score": 0, "creation_date": 1548713731, "post_id": 54409764, "comment_id": 95633068, "body": "@Tom Thanks for you suggestion. I used this and it seems to work. however my terminal said i needed to add <code>gem &#39;rails-controller-testing&#39;</code> for it to work. However I didnt see this anywhere on the website unless i missed it. How come <code>gem &#39;rspec-rails&#39;</code> does not suffice?"}, {"owner": {"reputation": 1276, "user_id": 5399937, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ctCqj.png?s=128&g=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/5399937/tom"}, "edited": false, "score": 1, "creation_date": 1548715188, "post_id": 54409764, "comment_id": 95633525, "body": "@b.herring If you want to use <code>assigns</code> you need to also use the <a href=\"https://github.com/rails/rails-controller-testing\" rel=\"nofollow noreferrer\">rails-controller-testing gem</a>. This was a structural decision made by the RSpec team.  Put it in your Gemfile and you will be good to go"}], "answers": [{"comments": [{"owner": {"reputation": 2930, "user_id": 1930295, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/128cc4033ec598b63fa96deb33e26131?s=128&d=identicon&r=PG", "display_name": "danielricecodes", "link": "https://stackoverflow.com/users/1930295/danielricecodes"}, "edited": false, "score": 0, "creation_date": 1548777674, "post_id": 54410488, "comment_id": 95660224, "body": "Downvoted?  I was trying to help.  Why the downvote?  There&#39;s nothing wrong with using the scaffold generator."}], "tags": [], "owner": {"reputation": 2930, "user_id": 1930295, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/128cc4033ec598b63fa96deb33e26131?s=128&d=identicon&r=PG", "display_name": "danielricecodes", "link": "https://stackoverflow.com/users/1930295/danielricecodes"}, "is_accepted": false, "score": -1, "last_activity_date": 1548710662, "creation_date": 1548710662, "answer_id": 54410488, "question_id": 54409764, "link": "https://stackoverflow.com/questions/54409764/rspec-bdd-tests-trying-to-test-index-controller-method/54410488#54410488", "title": "rspec BDD tests - trying to test index controller method", "body": "<p>You're looking to <a href=\"https://github.com/rails/rails-controller-testing\" rel=\"nofollow noreferrer\">use <code>assigns</code></a> in your controller specs.  Since you don't seem to have any code yet, the fastest way to show you an example is to just run <code>rails g scaffold car</code>.  Assuming you have <code>rspec-rails</code> in your Gemfile, you should get something like this in <code>spec/controllers/cars_controller_spec.rb</code>:</p>\n\n<pre><code>require 'rails_helper'\n\n# This spec was generated by rspec-rails when you ran the scaffold generator.\n# It demonstrates how one might use RSpec to specify the controller code that\n# was generated by Rails when you ran the scaffold generator.\n#\n# It assumes that the implementation code is generated by the rails scaffold\n# generator.  If you are using any extension libraries to generate different\n# controller code, this generated spec may or may not pass.\n#\n# It only uses APIs available in rails and/or rspec-rails.  There are a number\n# of tools you can use to make these specs even more expressive, but we're\n# sticking to rails and rspec-rails APIs to keep things simple and stable.\n#\n# Compared to earlier versions of this generator, there is very limited use of\n# stubs and message expectations in this spec.  Stubs are only used when there\n# is no simpler way to get a handle on the object needed for the example.\n# Message expectations are only used when there is no simpler way to specify\n# that an instance is receiving a specific message.\n\nRSpec.describe CarsController, type: :controller do\n\n  # This should return the minimal set of attributes required to create a valid\n  # Car. As you add validations to Car, be sure to\n  # adjust the attributes here as well.\n  let(:valid_attributes) {\n    skip(\"Add a hash of attributes valid for your model\")\n  }\n\n  let(:invalid_attributes) {\n    skip(\"Add a hash of attributes invalid for your model\")\n  }\n\n  # This should return the minimal set of values that should be in the session\n  # in order to pass any filters (e.g. authentication) defined in\n  # CarsController. Be sure to keep this updated too.\n  let(:valid_session) { {} }\n\n  describe \"GET #index\" do\n    it \"assigns all cars as @cars\" do\n      car = Car.create! valid_attributes\n      get :index, params: {}, session: valid_session\n      expect(assigns(:cars)).to eq([car])\n    end\n  end\n\n  describe \"GET #show\" do\n    it \"assigns the requested car as @car\" do\n      car = Car.create! valid_attributes\n      get :show, params: {id: car.to_param}, session: valid_session\n      expect(assigns(:car)).to eq(car)\n    end\n  end\n\n  describe \"GET #new\" do\n    it \"assigns a new car as @car\" do\n      get :new, params: {}, session: valid_session\n      expect(assigns(:car)).to be_a_new(Car)\n    end\n  end\n\n  describe \"GET #edit\" do\n    it \"assigns the requested car as @car\" do\n      car = Car.create! valid_attributes\n      get :edit, params: {id: car.to_param}, session: valid_session\n      expect(assigns(:car)).to eq(car)\n    end\n  end\n\n  describe \"POST #create\" do\n    context \"with valid params\" do\n      it \"creates a new Car\" do\n        expect {\n          post :create, params: {car: valid_attributes}, session: valid_session\n        }.to change(Car, :count).by(1)\n      end\n\n      it \"assigns a newly created car as @car\" do\n        post :create, params: {car: valid_attributes}, session: valid_session\n        expect(assigns(:car)).to be_a(Car)\n        expect(assigns(:car)).to be_persisted\n      end\n\n      it \"redirects to the created car\" do\n        post :create, params: {car: valid_attributes}, session: valid_session\n        expect(response).to redirect_to(Car.last)\n      end\n    end\n\n    context \"with invalid params\" do\n      it \"assigns a newly created but unsaved car as @car\" do\n        post :create, params: {car: invalid_attributes}, session: valid_session\n        expect(assigns(:car)).to be_a_new(Car)\n      end\n\n      it \"re-renders the 'new' template\" do\n        post :create, params: {car: invalid_attributes}, session: valid_session\n        expect(response).to render_template(\"new\")\n      end\n    end\n  end\n\n  describe \"PUT #update\" do\n    context \"with valid params\" do\n      let(:new_attributes) {\n        skip(\"Add a hash of attributes valid for your model\")\n      }\n\n      it \"updates the requested car\" do\n        car = Car.create! valid_attributes\n        put :update, params: {id: car.to_param, car: new_attributes}, session: valid_session\n        car.reload\n        skip(\"Add assertions for updated state\")\n      end\n\n      it \"assigns the requested car as @car\" do\n        car = Car.create! valid_attributes\n        put :update, params: {id: car.to_param, car: valid_attributes}, session: valid_session\n        expect(assigns(:car)).to eq(car)\n      end\n\n      it \"redirects to the car\" do\n        car = Car.create! valid_attributes\n        put :update, params: {id: car.to_param, car: valid_attributes}, session: valid_session\n        expect(response).to redirect_to(car)\n      end\n    end\n\n    context \"with invalid params\" do\n      it \"assigns the car as @car\" do\n        car = Car.create! valid_attributes\n        put :update, params: {id: car.to_param, car: invalid_attributes}, session: valid_session\n        expect(assigns(:car)).to eq(car)\n      end\n\n      it \"re-renders the 'edit' template\" do\n        car = Car.create! valid_attributes\n        put :update, params: {id: car.to_param, car: invalid_attributes}, session: valid_session\n        expect(response).to render_template(\"edit\")\n      end\n    end\n  end\n\n  describe \"DELETE #destroy\" do\n    it \"destroys the requested car\" do\n      car = Car.create! valid_attributes\n      expect {\n        delete :destroy, params: {id: car.to_param}, session: valid_session\n      }.to change(Car, :count).by(-1)\n    end\n\n    it \"redirects to the cars list\" do\n      car = Car.create! valid_attributes\n      delete :destroy, params: {id: car.to_param}, session: valid_session\n      expect(response).to redirect_to(cars_url)\n    end\n  end\n\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 26, "user_id": 10985051, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-QE4iQsy-saw/AAAAAAAAAAI/AAAAAAAAEgg/AFWfuu8_syA/photo.jpg?sz=128", "display_name": "D Boy", "link": "https://stackoverflow.com/users/10985051/d-boy"}, "is_accepted": false, "score": 1, "last_activity_date": 1565784294, "last_edit_date": 1565784294, "creation_date": 1548774953, "answer_id": 54424153, "question_id": 54409764, "link": "https://stackoverflow.com/questions/54409764/rspec-bdd-tests-trying-to-test-index-controller-method/54424153#54424153", "title": "rspec BDD tests - trying to test index controller method", "body": "<p>with the current test file you have posted, your test should pass because you are doing a request to the index action and as long as there is an index action the test will pass.</p>\n\n<pre><code>require 'rails_helper'\n\nRSpec.describe CarsController, type: :controller do\n\n  context \"test\" do\n    it \"displays all cars\" do\n      get :index\n    end\n  end\nend\n</code></pre>\n\n<p>However I see some people have recommended to use <code>assigns</code>, when using <code>assigns</code> to test you will need to assigns all the cars to an instance variable e.g. <code>@cars = Cars.all</code> or whatever records you need and also you should have your test data setup properly.</p>\n\n<p>In your test you should also have some sort of list of cars to test against, e.g assuming you are using FactoryGirl/Bot:\n<code>let(:cars) { create_list :car, 3 }</code></p>\n\n<p>You test file should than look something like this:</p>\n\n<pre><code>require 'rails_helper'\n\nRSpec.describe CarsController, type: :controller do\n  let(:cars) { create_list :car, 3 }\n\n  context \"test\" do\n    it \"displays all cars\" do\n      get :index\n      expect(assigns(:cars)).to eq cars\n    end\n  end\nend\n</code></pre>\n\n<p>Hope my answer helps.</p>\n"}], "owner": {"reputation": 375, "user_id": 10409976, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/91acc14383d05b02f61e8deb0fde4c56?s=128&d=identicon&r=PG&f=1", "display_name": "b.herring", "link": "https://stackoverflow.com/users/10409976/b-herring"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 309, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1565784294, "creation_date": 1548707139, "last_edit_date": 1548721833, "question_id": 54409764, "link": "https://stackoverflow.com/questions/54409764/rspec-bdd-tests-trying-to-test-index-controller-method", "title": "rspec BDD tests - trying to test index controller method", "body": "<p>I have a rails app with a cars model that takes the attribute of 'model'. I'm just trying to run a test to see if the index method in the cars controller will display all the cars.\nI'm not sure how to go about this. The test currently passes, but it shouldn't as I currently have an empty index method. How could I test this and what do I need to add. I've tried to read documentation with no luck. thanks</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>require 'rails_helper'\r\n\r\nRSpec.describe CarsController, type: :controller do\r\n\r\n  context \"test\" do\r\n    it \"displays all cars\" do\r\n      get :index\r\n    end\r\n  end\r\n\r\nend</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "smtp"], "comments": [{"owner": {"reputation": 1686, "user_id": 7264341, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Oz5dfb6ASr8/AAAAAAAAAAI/AAAAAAAAAC8/33rQJBMPZZI/photo.jpg?sz=128", "display_name": "Javier Men&#233;ndez Rizo", "link": "https://stackoverflow.com/users/7264341/javier-men%c3%a9ndez-rizo"}, "edited": false, "score": 0, "creation_date": 1548707194, "post_id": 54409702, "comment_id": 95630409, "body": "Are you using rails credentials to store your user_name and password?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user9011445"}, "reply_to_user": {"reputation": 1686, "user_id": 7264341, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Oz5dfb6ASr8/AAAAAAAAAAI/AAAAAAAAAC8/33rQJBMPZZI/photo.jpg?sz=128", "display_name": "Javier Men&#233;ndez Rizo", "link": "https://stackoverflow.com/users/7264341/javier-men%c3%a9ndez-rizo"}, "edited": false, "score": 0, "creation_date": 1548707309, "post_id": 54409702, "comment_id": 95630460, "body": "No, they are stored inside the <code>production.rb</code> file."}, {"owner": {"reputation": 2184, "user_id": 8352929, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a74f883702be71738a2e3d6f59e466ed?s=128&d=identicon&r=PG&f=1", "display_name": "adesurirey", "link": "https://stackoverflow.com/users/8352929/adesurirey"}, "edited": false, "score": 2, "creation_date": 1548710258, "post_id": 54409702, "comment_id": 95631786, "body": "Did you install Sidekiq or another background job processor to perform job asynchronously (<code>deliver_later</code>) ? Also did you try to deliver your email using <code>deliver_now</code> ? Might be a good first test before making the delivery async"}, {"owner": {"reputation": 498, "user_id": 10384879, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-5HTxyDEG1Qo/AAAAAAAAAAI/AAAAAAAAAeQ/9iMyCvOw2A4/photo.jpg?sz=128", "display_name": "giri dharan", "link": "https://stackoverflow.com/users/10384879/giri-dharan"}, "edited": false, "score": 0, "creation_date": 1548816189, "post_id": 54409702, "comment_id": 95674885, "body": "What u mean redacted"}, {"owner": {"user_type": "does_not_exist", "display_name": "user9011445"}, "edited": false, "score": 0, "creation_date": 1548970004, "post_id": 54409702, "comment_id": 95746784, "body": "Private information that I would prefer not to reveal."}], "answers": [{"comments": [{"owner": {"reputation": 1603, "user_id": 1707015, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/1bca029eff38af0b1a5c55d89e04e638?s=128&d=identicon&r=PG", "display_name": "qr&#228;bn&#246;", "link": "https://stackoverflow.com/users/1707015/qr%c3%a4bn%c3%b6"}, "edited": false, "score": 0, "creation_date": 1616085154, "post_id": 54469511, "comment_id": 117898805, "body": "Maybe also important: <a href=\"https://gitlab.com/gitlab-org/omnibus-gitlab/-/issues/2427\" rel=\"nofollow noreferrer\">gitlab.com/gitlab-org/omnibus-gitlab/-/issues/2427</a>"}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user9011445"}, "is_accepted": true, "score": 0, "last_activity_date": 1548970166, "creation_date": 1548970166, "answer_id": 54469511, "question_id": 54409702, "link": "https://stackoverflow.com/questions/54409702/rails-error-performing-actionmailerdeliveryjob/54469511#54469511", "title": "Rails - Error performing ActionMailer::DeliveryJob", "body": "<p>As it turned out the problem was on the mail server as I was using. The confusion was that Rails did not seem to report this clearly. Thanks for any help.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user9011445"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 670, "favorite_count": 0, "accepted_answer_id": 54469511, "answer_count": 1, "score": 0, "last_activity_date": 1548970166, "creation_date": 1548706880, "question_id": 54409702, "link": "https://stackoverflow.com/questions/54409702/rails-error-performing-actionmailerdeliveryjob", "title": "Rails - Error performing ActionMailer::DeliveryJob", "body": "<p>I am using SMTP in Production with Rails.</p>\n\n<p>I am sending the email with <code>deliver_later</code>, if that is relevant.</p>\n\n<p>I am receiving the following error:</p>\n\n<pre><code>E, [2019-01-28T20:13:35.610611 #63161] ERROR -- : [ActiveJob] [ActionMailer::DeliveryJob] [97578598-066d-46a0-b7fb-9daeb2eaf689] Error performing ActionMailer::DeliveryJob (Job ID: 97578598-066d-46a0-b7fb-9daeb2eaf689) from Async(mailers) in 1455.28ms: EOFError (end of file reached):\n</code></pre>\n\n<p>Here is my config:</p>\n\n<pre><code>config.action_mailer.delivery_method = :smtp\nconfig.action_mailer.smtp_settings = {\n    :address =&gt; 'postal.&lt;redacted&gt;',\n    :port =&gt; '25',\n    :authentication =&gt; 'plain',\n    :user_name =&gt; '&lt;redacted&gt;'/main',\n    :password =&gt; '&lt;redacted&gt;''\n  }\n  config.action_mailer.perform_deliveries = true\n  config.action_mailer.default_url_options = { :host =&gt; '&lt;redacted&gt;'', :protocol =&gt; 'https' }\n</code></pre>\n\n<p>I am fairly new to rails so any help would be appreciated.</p>\n\n<p>I am using <code>Ruby  2.3.7</code> and <code>Rails 5.2.2</code>.</p>\n\n<p><strong>Other similar posts on stack overflow haven't seemed to fix this.</strong></p>\n"}, {"tags": ["ruby", "hash", "ranking-functions"], "comments": [{"owner": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 4, "creation_date": 1548705492, "post_id": 54409354, "comment_id": 95629576, "body": "Yes, it&#39;s possible. Easy, even; what has been the sticking point so far?"}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1548709645, "post_id": 54409354, "comment_id": 95631523, "body": "This answer might help you : <a href=\"https://stackoverflow.com/a/4266496/6419007\">stackoverflow.com/a/4266496/6419007</a>. Once you have an array of arrays, it shouldn&#39;t be too hard to display the table. If you expect an answer on StackOverflow, it helps a lot to show what you tried, even if it doesn&#39;t work yet."}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1548735907, "post_id": 54409354, "comment_id": 95638085, "body": "What is the input? Where is the hash?"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1548760589, "post_id": 54409354, "comment_id": 95649245, "body": "Don&#39;t know why you want to use a hash. I&#39;d put the data in an array, sort it by score and output each item with its corresponding 1-based index (hint: <code>each.with_index(1) { ... }</code>). However, without further information, it&#39;s unclear what your actual problem is. What do you have so far? Show some code, please."}], "answers": [{"tags": [], "owner": {"reputation": 176, "user_id": 8540055, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5d4c940ad6c96e49b919ffc37bd85c14?s=128&d=identicon&r=PG&f=1", "display_name": "adarsh", "link": "https://stackoverflow.com/users/8540055/adarsh"}, "is_accepted": false, "score": 0, "last_activity_date": 1548769032, "creation_date": 1548769032, "answer_id": 54422347, "question_id": 54409354, "link": "https://stackoverflow.com/questions/54409354/how-could-i-use-a-hash-and-create-a-list-of-names-and-scores-and-the-rank-them/54422347#54422347", "title": "How could I use a hash and create a list of names and scores and the rank them?", "body": "<p>you can do Iterating over a Ruby Hash using each_with_index </p>\n\n<pre><code>{ steve: 100, jeo: 90,mike: 80 }.each_with_index do |(key, value), index|\n  puts \"#{index}: #{key} =&gt; #{value}\"\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 10981055, "user_type": "registered", "profile_image": "https://graph.facebook.com/952555968288534/picture?type=large", "display_name": "Joseph Spielman", "link": "https://stackoverflow.com/users/10981055/joseph-spielman"}, "edited": false, "score": 0, "creation_date": 1548876320, "post_id": 54433612, "comment_id": 95705075, "body": "Cool, Thanks. I thoughts arrays could not use numerical values? I am new to ruby, please excuse my limited knowledge."}, {"owner": {"reputation": 7567, "user_id": 908842, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4fdcc9243d55a92dd2b3a9e2568bae0?s=128&d=identicon&r=PG", "display_name": "Kalman", "link": "https://stackoverflow.com/users/908842/kalman"}, "reply_to_user": {"reputation": 1, "user_id": 10981055, "user_type": "registered", "profile_image": "https://graph.facebook.com/952555968288534/picture?type=large", "display_name": "Joseph Spielman", "link": "https://stackoverflow.com/users/10981055/joseph-spielman"}, "edited": false, "score": 0, "creation_date": 1548906572, "post_id": 54433612, "comment_id": 95714294, "body": "Numerical values inside arrays are fine. Did my post answer your question?"}], "tags": [], "owner": {"reputation": 7567, "user_id": 908842, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4fdcc9243d55a92dd2b3a9e2568bae0?s=128&d=identicon&r=PG", "display_name": "Kalman", "link": "https://stackoverflow.com/users/908842/kalman"}, "is_accepted": false, "score": 0, "last_activity_date": 1548824459, "creation_date": 1548824459, "answer_id": 54433612, "question_id": 54409354, "link": "https://stackoverflow.com/questions/54409354/how-could-i-use-a-hash-and-create-a-list-of-names-and-scores-and-the-rank-them/54433612#54433612", "title": "How could I use a hash and create a list of names and scores and the rank them?", "body": "<p>As pointed out in the comments, the most intuitive way to solve this problem is to probably have an array of users where each user is represented inside his own hash (which might be what you were referring to in your question).</p>\n\n<pre><code>users = [\n  { name: \"Joe\", score: 90 }, \n  { name: \"Mike\", score: 80 }, \n  { name: \"Steve\", score: 100 }\n]\n\nsorted_users = users.sort_by { |user| user[:score] }.reverse\n\nputs \"Rank   Name      Score\"\n\nsorted_users.each_with_index do |user, index|\n  rank_str = (index + 1).to_s.ljust(7)\n  name_str = user[:name].ljust(10)\n  score_str = user[:score].to_s.rjust(5)\n  puts \"#{rank_str}#{name_str}#{score_str}\"    \nend\n</code></pre>\n\n<p>which will print out the following</p>\n\n<pre><code># Rank   Name      Score\n# 1      Steve       100\n# 2      Joe          90\n# 3      Mike         80\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 10981055, "user_type": "registered", "profile_image": "https://graph.facebook.com/952555968288534/picture?type=large", "display_name": "Joseph Spielman", "link": "https://stackoverflow.com/users/10981055/joseph-spielman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 63, "favorite_count": 0, "answer_count": 2, "score": -4, "last_activity_date": 1548824459, "creation_date": 1548705379, "last_edit_date": 1548705429, "question_id": 54409354, "link": "https://stackoverflow.com/questions/54409354/how-could-i-use-a-hash-and-create-a-list-of-names-and-scores-and-the-rank-them", "title": "How could I use a hash and create a list of names and scores and the rank them?", "body": "<p>EX. Joe 90, Mike 80, Steve 100. </p>\n\n<p>How would i print out something like below? Is it even possible in Ruby? </p>\n\n<pre><code>Rank    Name    Score\n1           Steve     100\n2           Joe         90\n3           Mike      80\n</code></pre>\n\n<p>Any help greatly appreciated!!</p>\n"}, {"tags": ["ruby", "rest-client"], "comments": [{"owner": {"reputation": 9542, "user_id": 8068625, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4spqa.png?s=128&g=1", "display_name": "Henry Woody", "link": "https://stackoverflow.com/users/8068625/henry-woody"}, "edited": false, "score": 0, "creation_date": 1548701114, "post_id": 54408303, "comment_id": 95627552, "body": "What does <code>login_response</code> look like?"}, {"owner": {"reputation": 1, "user_id": 9659767, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a09b22e8a3a0fb4ede853c8924455d53?s=128&d=identicon&r=PG&f=1", "display_name": "cfb", "link": "https://stackoverflow.com/users/9659767/cfb"}, "reply_to_user": {"reputation": 9542, "user_id": 8068625, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4spqa.png?s=128&g=1", "display_name": "Henry Woody", "link": "https://stackoverflow.com/users/8068625/henry-woody"}, "edited": false, "score": 0, "creation_date": 1548702366, "post_id": 54408303, "comment_id": 95628090, "body": "Something similar to the following: <code>{&quot;success&quot;:{&quot;url&quot;: HOST ,\u201duser&quot;:{&quot;username\u201d:\u201duser\u201d,\u201disAuthenticated&quot;:true,&quot;isSecure&quot;&zwnj;&#8203;:true,&quot;isRecognized&quot;&zwnj;&#8203;:true,&quot;authExpiry&quot;: \u2026</code>"}, {"owner": {"reputation": 9542, "user_id": 8068625, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4spqa.png?s=128&g=1", "display_name": "Henry Woody", "link": "https://stackoverflow.com/users/8068625/henry-woody"}, "edited": false, "score": 0, "creation_date": 1548702520, "post_id": 54408303, "comment_id": 95628157, "body": "does it include a token of some sort?"}, {"owner": {"reputation": 1, "user_id": 9659767, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a09b22e8a3a0fb4ede853c8924455d53?s=128&d=identicon&r=PG&f=1", "display_name": "cfb", "link": "https://stackoverflow.com/users/9659767/cfb"}, "reply_to_user": {"reputation": 9542, "user_id": 8068625, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4spqa.png?s=128&g=1", "display_name": "Henry Woody", "link": "https://stackoverflow.com/users/8068625/henry-woody"}, "edited": false, "score": 0, "creation_date": 1548702621, "post_id": 54408303, "comment_id": 95628208, "body": "it returns session data, which appears to include a token"}], "answers": [{"tags": [], "owner": {"reputation": 9542, "user_id": 8068625, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4spqa.png?s=128&g=1", "display_name": "Henry Woody", "link": "https://stackoverflow.com/users/8068625/henry-woody"}, "is_accepted": false, "score": 0, "last_activity_date": 1548703364, "creation_date": 1548703364, "answer_id": 54408891, "question_id": 54408303, "link": "https://stackoverflow.com/questions/54408303/ruby-rest-client-401-unauthorized-after-post-of-data/54408891#54408891", "title": "Ruby rest-client 401 Unauthorized after post of data", "body": "<p>HTTP (1.1) is stateless so a request does not contain any information about previous requests unless that information is encoded and added to the request  in some way (e.g. cookies or headers). So when you make your import request the server does not know if/that you are authenticated even though you just made a login request.</p>\n\n<p>You'll have to include the token you receive from your login request in subsequent requests. This should go in the 'Authorization' header.</p>\n\n<p>For example:</p>\n\n<pre><code>auth_token = login_response[\"success\"][\"token\"] # or whatever the key is for the token\n\nimport_response = rest_client.post(\n    host + 'IMPORT DATA ENDPOINT',\n    headers: { 'Authorization': \"Bearer #{auth_token}\", 'X-System-Name': 'AndroidMobile', 'Content-Type': 'multipart/form-data },\n    csv: csv_string\n)\n</code></pre>\n\n<p>The way authentication works depends on the server and can be different in different cases. So the site you are accessing might expect the Authorization header to be like <code>\"Token #{auth_token}\"</code> or anything else, but they should mention it in their documentation.</p>\n"}], "owner": {"reputation": 1, "user_id": 9659767, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a09b22e8a3a0fb4ede853c8924455d53?s=128&d=identicon&r=PG&f=1", "display_name": "cfb", "link": "https://stackoverflow.com/users/9659767/cfb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 344, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1548703364, "creation_date": 1548700755, "question_id": 54408303, "link": "https://stackoverflow.com/questions/54408303/ruby-rest-client-401-unauthorized-after-post-of-data", "title": "Ruby rest-client 401 Unauthorized after post of data", "body": "<p>I'm new to using the rest-client. I know I'm missing something, but I am trying to do the following:</p>\n\n<ol>\n<li>Post to a login endpoint to authenticate </li>\n<li>After authentication, post csv text to another endpoint that requires a logged in user</li>\n</ol>\n\n<p>The authentication portion is successful, however, I am getting a <code>401 Unauthorized</code> when step 2 occurs.   </p>\n\n<pre><code>rest_client = RestClient\n\nlogin_response = @global_rest_client.post(\n    host + 'LOGIN ENDPOINT', \n    { userName: 'user', password: 'password'},\n    headers: {'Content-Type': 'application/x-www-form-urlencoded'}\n)\n\nimport_response = rest_client.post(\n        host + 'IMPORT DATA ENDPOINT',\n        headers: { 'X-System-Name': 'AndroidMobile', 'Content-Type': 'multipart/form-data },\n        csv: csv_string\n    )   \n</code></pre>\n\n<p>My understanding of how authentication works could be wrong. My assumption is that as long as the same instance of the client has a successful login, then the post of csv data would also be successful. </p>\n\n<p>I appreciate any input. </p>\n"}, {"tags": ["ruby"], "answers": [{"comments": [{"owner": {"reputation": 41, "user_id": 10917688, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XVQsYFDBdDs/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcYKX1eim-sHpmsAahasEDgMLegwuQ/mo/photo.jpg?sz=128", "display_name": "Julie Rain", "link": "https://stackoverflow.com/users/10917688/julie-rain"}, "edited": false, "score": 0, "creation_date": 1548708616, "post_id": 54408132, "comment_id": 95631091, "body": "So I reworked it a bit from Max into what is below:   #!/usr/bin/env ruby  require &#39;rubygems&#39;  paths = Dir.glob(&quot;/home/rmikio/Workspace/rubytest/*.txt&quot;) paths.each do |path|   puts &quot;File #{path}&quot;   if path =~ /2A_/     puts &quot;Find 2A&quot;     new_path = path.sub(/2A_/, &quot;2A_Vendor_&quot;)     puts &quot;New file: #{new_path}&quot;     File.rename path, new_path   end end"}], "tags": [], "owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "is_accepted": false, "score": 1, "last_activity_date": 1548708646, "last_edit_date": 1548708646, "creation_date": 1548699931, "answer_id": 54408132, "question_id": 54407870, "link": "https://stackoverflow.com/questions/54407870/append-text-behind-a-certain-keyword-in-filename/54408132#54408132", "title": "Append text behind a certain keyword in filename", "body": "<p>You can get a list of the file paths in the directory with <a href=\"https://ruby-doc.org/core-2.5.0/Dir.html#method-c-glob\" rel=\"nofollow noreferrer\">Dir.glob</a>:</p>\n\n<pre><code>paths = Dir.glob(\"C:\\Users\\Scripts/*.txt\")\n</code></pre>\n\n<p>Then rename using <a href=\"https://ruby-doc.org/core-2.5.0/String.html#method-i-sub\" rel=\"nofollow noreferrer\">String#sub</a> and <a href=\"https://ruby-doc.org/stdlib-2.5.0/libdoc/fileutils/rdoc/FileUtils.html#method-c-mv\" rel=\"nofollow noreferrer\">FileUtils.mv</a> or <a href=\"https://ruby-doc.org/stdlib-2.5.0/libdoc/fileutils/rdoc/File.html#method-c-rename\" rel=\"nofollow noreferrer\">File.rename</a>:</p>\n\n<pre><code>paths.each do |path|\n  if path =~ /^2A_/\n    new_path = path.sub /^2A_/, \"2A_Vendor_\"\n    File.rename path, new_path\n  end\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1534, "user_id": 4453714, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fv4Fb.jpg?s=128&g=1", "display_name": "Yurii Verbytskyi", "link": "https://stackoverflow.com/users/4453714/yurii-verbytskyi"}, "is_accepted": false, "score": 1, "last_activity_date": 1548708449, "last_edit_date": 1548708449, "creation_date": 1548706087, "answer_id": 54409528, "question_id": 54407870, "link": "https://stackoverflow.com/questions/54407870/append-text-behind-a-certain-keyword-in-filename/54409528#54409528", "title": "Append text behind a certain keyword in filename", "body": "<p>You can try <a href=\"https://ruby-doc.org/core-2.2.0/File.html#method-c-rename\" rel=\"nofollow noreferrer\">File#rename</a></p>\n\n<pre><code>Dir[\"2A_*.txt\"].each do |f|\n  File.rename(f, f.sub('2A_', '2A_Vendor_'))\nend\n</code></pre>\n\n<p>Or with path</p>\n\n<pre><code>path = 'your_path_here'\nDir.glob(\"#{path}/2A_*.txt\").each do |f|\n  File.rename(f, f.sub('2A_', '2A_Vendor_'))\nend\n</code></pre>\n\n<p>For Windows you probably need to do with backslashes this <a href=\"https://stackoverflow.com/a/20668433/4453714\">this</a></p>\n"}, {"comments": [{"owner": {"reputation": 1534, "user_id": 4453714, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fv4Fb.jpg?s=128&g=1", "display_name": "Yurii Verbytskyi", "link": "https://stackoverflow.com/users/4453714/yurii-verbytskyi"}, "edited": false, "score": 1, "creation_date": 1548708996, "post_id": 54410135, "comment_id": 95631256, "body": "There is no need to do <code>if path =~ &#47;2A_&#47;</code> for each iteration as <code>Dir.glob(&quot;#{path}&#47;2A_*.txt&quot;)</code> do it for you, so you ll have no need to iterate all the files"}, {"owner": {"reputation": 1534, "user_id": 4453714, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fv4Fb.jpg?s=128&g=1", "display_name": "Yurii Verbytskyi", "link": "https://stackoverflow.com/users/4453714/yurii-verbytskyi"}, "edited": false, "score": 0, "creation_date": 1548709057, "post_id": 54410135, "comment_id": 95631282, "body": "but probably its enough for you case)"}], "tags": [], "owner": {"reputation": 41, "user_id": 10917688, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XVQsYFDBdDs/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcYKX1eim-sHpmsAahasEDgMLegwuQ/mo/photo.jpg?sz=128", "display_name": "Julie Rain", "link": "https://stackoverflow.com/users/10917688/julie-rain"}, "is_accepted": false, "score": 1, "last_activity_date": 1548708776, "creation_date": 1548708776, "answer_id": 54410135, "question_id": 54407870, "link": "https://stackoverflow.com/questions/54407870/append-text-behind-a-certain-keyword-in-filename/54410135#54410135", "title": "Append text behind a certain keyword in filename", "body": "<p>Reworked version using Max's response:</p>\n\n<pre><code>#!/usr/bin/env ruby\n\nrequire 'rubygems'\n\npaths = Dir.glob(\"C:\\Users\\Scripts/*.txt\")\npaths.each do |path|\n  puts \"File #{path}\"\n  if path =~ /2A_/\n    puts \"Find 2A\"\n    new_path = path.sub(/2A_/, \"2A_Vendor_\")\n    puts \"New file: #{new_path}\"\n    File.rename path, new_path\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 41, "user_id": 10917688, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XVQsYFDBdDs/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcYKX1eim-sHpmsAahasEDgMLegwuQ/mo/photo.jpg?sz=128", "display_name": "Julie Rain", "link": "https://stackoverflow.com/users/10917688/julie-rain"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 1, "answer_count": 3, "score": 2, "last_activity_date": 1548736010, "creation_date": 1548698832, "last_edit_date": 1548736010, "question_id": 54407870, "link": "https://stackoverflow.com/questions/54407870/append-text-behind-a-certain-keyword-in-filename", "title": "Append text behind a certain keyword in filename", "body": "<p>In directory <code>C:\\Users\\Scripts</code>, I have files named:</p>\n\n<pre><code>2A_Apple_VC_20180101.txt\n2A_Apple_VC_20180201.txt\n2A_Apple_VC_20180301.txt\netc.\n</code></pre>\n\n<p>How can I insert the phrase <code>Vendor</code> right after <code>2A_</code> for all the filenames in that directory that starts with <code>2A_</code>, permanently changing the filenames to:</p>\n\n<pre><code>2A_Vendor_Apple_VC_20180101.txt\n2A_Vendor_Apple_VC_20180201.txt\n2A_Vendor_Apple_VC_20180301.txt\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "rails-activerecord"], "answers": [{"comments": [{"owner": {"reputation": 986, "user_id": 8304905, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YpAOE.jpg?s=128&g=1", "display_name": "EmmanuelB", "link": "https://stackoverflow.com/users/8304905/emmanuelb"}, "edited": false, "score": 0, "creation_date": 1548699004, "post_id": 54407858, "comment_id": 95626628, "body": "The second answer is just perfect. How did you arrived to it? I&#39;m asking as it feels like I was searching for the wrong keywords on search engines. I&#39;m always amazed as how intuitive Rails is, checking my original post, the answer seems very similar."}, {"owner": {"reputation": 8640, "user_id": 4055042, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cd04c63d95d27033b53d4d83fea40c02?s=128&d=identicon&r=PG&f=1", "display_name": "SRack", "link": "https://stackoverflow.com/users/4055042/srack"}, "reply_to_user": {"reputation": 986, "user_id": 8304905, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YpAOE.jpg?s=128&g=1", "display_name": "EmmanuelB", "link": "https://stackoverflow.com/users/8304905/emmanuelb"}, "edited": false, "score": 1, "creation_date": 1548699140, "post_id": 54407858, "comment_id": 95626693, "body": "Did a little digging in <code>pry</code> with <code>ls -G</code> :) Great way to see what&#39;s in there. Also had a use case to hand to test it on, which helped. Glad it&#39;s useful - shout if you have any other questions."}], "tags": [], "owner": {"reputation": 8640, "user_id": 4055042, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cd04c63d95d27033b53d4d83fea40c02?s=128&d=identicon&r=PG&f=1", "display_name": "SRack", "link": "https://stackoverflow.com/users/4055042/srack"}, "is_accepted": true, "score": 1, "last_activity_date": 1548699187, "last_edit_date": 1548699187, "creation_date": 1548698789, "answer_id": 54407858, "question_id": 54407797, "link": "https://stackoverflow.com/questions/54407797/how-to-get-validation-constraints-of-applicationrecord-model-in-rails/54407858#54407858", "title": "How to get validation constraints of ApplicationRecord model in Rails?", "body": "<p>If you do want to do this the fun Rails way:</p>\n\n<pre><code>Account.validators_on(:field).detect { |validator| validator.is_a? ActiveModel::Validations::InclusionValidator }.options[:in]\n</code></pre>\n\n<p>That'll return you an array of your fields.</p>\n\n<p>Otherwise, while this isn't the black magic you're looking for, I'd adjust to the following to make this nice and flexible:</p>\n\n<pre><code>class Account &lt; ApplicationRecord\n  FIELD_OPTIONS = %w[foo bar baz bla].freeze\n\n  validates :field, presence: true,\n                    inclusion:{\n                      in: FIELD_OPTIONS\n                    }\n</code></pre>\n\n<p>Then you've got nice simple access via <code>Account::FIELD_OPTIONS</code>.</p>\n\n<p>Either any use? Let me know how they suit / if you have any questions.</p>\n"}], "owner": {"reputation": 986, "user_id": 8304905, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YpAOE.jpg?s=128&g=1", "display_name": "EmmanuelB", "link": "https://stackoverflow.com/users/8304905/emmanuelb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 29, "favorite_count": 0, "accepted_answer_id": 54407858, "answer_count": 1, "score": 0, "last_activity_date": 1548752745, "creation_date": 1548698524, "last_edit_date": 1548752745, "question_id": 54407797, "link": "https://stackoverflow.com/questions/54407797/how-to-get-validation-constraints-of-applicationrecord-model-in-rails", "title": "How to get validation constraints of ApplicationRecord model in Rails?", "body": "<p>I have a class that looks like:</p>\n\n<pre><code>class Account &lt; ApplicationRecord\n  validates :field, presence: true,\n                    inclusion:{\n                      in: %w[foo bar baz bla]\n                    }\nend\n</code></pre>\n\n<p>I need a method that returns the <code>inclusion</code> part of the <code>validation</code> for the <code>field</code> column. e.g.:</p>\n\n<pre><code>data = Account.validations_for(:field) # Or some similar magick method\ndata[:inclusion][:in] # =&gt; ['foo', 'bar', 'baz', 'bla']\n</code></pre>\n\n<p>Does something similar exist? If it was in an <code>enum</code> it could be simple, but I can't find the way to do it in this case.</p>\n"}, {"tags": ["ruby", "regex", "literals"], "comments": [{"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 3, "creation_date": 1548699250, "post_id": 54407472, "comment_id": 95626751, "body": "As an aside, you almost always want <code>\\A</code> and <code>\\z</code> (beginning/ending of <i>string</i>) instead of <code>^</code> and <code>$</code> (beginning/ending of <i>line</i>) in Ruby."}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1548736694, "post_id": 54407472, "comment_id": 95638254, "body": "If you really mean what you are asking for, then you can do <code>eval(str)</code>. But I am not posting this as an answer because I know that there are stupid people around who would downvote such an answer as soon as I post one."}], "answers": [{"comments": [{"owner": {"reputation": 2616, "user_id": 31319, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/49d6cfe3732f2849692684d3660548ec?s=128&d=identicon&r=PG", "display_name": "m0j0", "link": "https://stackoverflow.com/users/31319/m0j0"}, "edited": false, "score": 0, "creation_date": 1548698818, "post_id": 54407536, "comment_id": 95626529, "body": "Also, I can use str.tr( &#39;/&#39;, &#39;&#39;) to remove any slashes from the string before passing it to Regexp.new."}], "tags": [], "owner": {"reputation": 22377, "user_id": 2288659, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/bBg8v.png?s=128&g=1", "display_name": "Silvio Mayolo", "link": "https://stackoverflow.com/users/2288659/silvio-mayolo"}, "is_accepted": false, "score": 4, "last_activity_date": 1548697547, "creation_date": 1548697547, "answer_id": 54407536, "question_id": 54407472, "link": "https://stackoverflow.com/questions/54407472/creating-a-regexp-from-string-without-quoting/54407536#54407536", "title": "Creating a regexp from string without quoting", "body": "<p>When you use <code>Regexp.new</code>, don't start and end your string with <code>/</code>. Just let <code>str = '^foo.*bar$'</code>. The only things being escaped are the beginning and ending slashes; the metacharacters are fine.</p>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 0, "last_activity_date": 1548699508, "creation_date": 1548699508, "answer_id": 54408053, "question_id": 54407472, "link": "https://stackoverflow.com/questions/54407472/creating-a-regexp-from-string-without-quoting/54408053#54408053", "title": "Creating a regexp from string without quoting", "body": "<pre><code>str = '^foo.*bar$'\n\nr = /#{str}/\n  #=&gt; /^foo.*bar$/ \n\n\"foolishly, the concrete guy didn't use rebar\".match?(r)\n  #=&gt; true\n</code></pre>\n"}], "owner": {"reputation": 2616, "user_id": 31319, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/49d6cfe3732f2849692684d3660548ec?s=128&d=identicon&r=PG", "display_name": "m0j0", "link": "https://stackoverflow.com/users/31319/m0j0"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1548736551, "creation_date": 1548697237, "last_edit_date": 1548736551, "question_id": 54407472, "link": "https://stackoverflow.com/questions/54407472/creating-a-regexp-from-string-without-quoting", "title": "Creating a regexp from string without quoting", "body": "<p>My code will receive a parameter containing a string representation of a regular expression. It is probable that the strings would be like <code>\"/whatever/\"</code> with slashes at the beginning and end. Given a string,</p>\n\n<pre><code>str = \"/^foo.*bar$/\"\n</code></pre>\n\n<p>I would like to create a regular expression from that string.</p>\n\n<p>When I do:</p>\n\n<pre><code>pat = Regexp.new(str)\n# =&gt; /\\/^foo.*bar$\\//\npat.match \"foolishrebar\"\n# =&gt; nil\n</code></pre>\n\n<p>all of the special characters are quoted. I have not figured out how not to quote the string. </p>\n\n<p>When I create a pattern directly with <code>/pattern/</code>, it works fine.</p>\n\n<pre><code>pat = /^foo.*bar$/\npat.match \"foolishrebar\"\n# =&gt; #&lt;MatchData \"foolishrebar\"&gt;\n</code></pre>\n"}, {"tags": ["ruby", "docker", "alpine"], "comments": [{"owner": {"reputation": 1499, "user_id": 526514, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/511274e57d0d546ed59b3d023bf5513a?s=128&d=identicon&r=PG", "display_name": "Ivan Yurov", "link": "https://stackoverflow.com/users/526514/ivan-yurov"}, "edited": false, "score": 1, "creation_date": 1548703459, "post_id": 54407089, "comment_id": 95628565, "body": "Maybe try another SSL lib? I had similar issue (like interface in headers had changed) while building wkhtmltopdf and it was because it expected an older version of openssl or something. So I ended up using libssl1.0@3.8 and libcrypto1.0@3.8. (3.8 here is a reference to 3.8 repo of alpine)"}], "answers": [{"tags": [], "owner": {"reputation": 83, "user_id": 1822868, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QxDug.gif?s=128&g=1", "display_name": "Kakash1hatake", "link": "https://stackoverflow.com/users/1822868/kakash1hatake"}, "is_accepted": false, "score": 0, "last_activity_date": 1586609376, "creation_date": 1586609376, "answer_id": 61157086, "question_id": 54407089, "link": "https://stackoverflow.com/questions/54407089/build-ruby-1-8-7-on-alpine/61157086#61157086", "title": "build ruby 1.8.7 on alpine", "body": "<p>I have managed to build ruby 1.8.7 on alpine with older version openssl (e.g. 1.0.1e). So the problen was as @ivan-yurov said.</p>\n"}], "owner": {"reputation": 2942, "user_id": 477340, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/a858a54895a4242c16f7f43f92fd343d?s=128&d=identicon&r=PG", "display_name": "khinester", "link": "https://stackoverflow.com/users/477340/khinester"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 377, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1586609376, "creation_date": 1548695622, "question_id": 54407089, "link": "https://stackoverflow.com/questions/54407089/build-ruby-1-8-7-on-alpine", "title": "build ruby 1.8.7 on alpine", "body": "<p>i get this error when i try to compile ruby 1.8.7</p>\n\n<pre><code>BUILD FAILED (Alpine Linux 3.8.2 using ruby-build 20181225)\n\nInspect or clean up the working tree at /tmp/ruby-build.20190128170412.7047\nResults logged to /tmp/ruby-build.20190128170412.7047.log\n\nLast 10 log lines:\n     return ossl_x509crl_sk2ary(pkcs7_get_certs_or_crls(self, 0));\n                                ^~~~~~~~~~~~~~~~~~~~~~~\nIn file included from ossl_pkcs7.c:11:0:\nossl.h:118:7: note: expected 'struct stack_st_X509_CRL *' but argument is of type 'int *'\n VALUE ossl_x509crl_sk2ary(STACK_OF(X509_CRL) *crl);\n       ^~~~~~~~~~~~~~~~~~~\nmake[1]: *** [Makefile:188: ossl_pkcs7.o] Error 1\nmake[1]: *** Waiting for unfinished jobs....\nmake[1]: Leaving directory '/tmp/ruby-build.20190128170412.7047/ruby-1.8.7/ext/openssl'\nmake: *** [Makefile:285: all] Error 1\n</code></pre>\n\n<p>this is my Docker file I am using</p>\n\n<pre><code>FROM alpine\n\nENV RUBY_VERSION \"1.8.7\"\n\nENV RUBYBUILD_PACKAGES \\\n  build-base \\\n  autoconf \\\n  git \\\n  subversion \\\n  bison \\\n  zlib-dev \\\n  openssl-dev \\\n  yaml-dev \\\n  readline-dev \\\n  ncurses-dev \\\n  libffi-dev \\\n  gdbm-dev\n\nENV RUBYLIB_PACKAGES \\\n  zlib \\\n  openssl \\\n  yaml \\\n  readline \\\n  ncurses \\\n  libffi \\\n  gdbm\n\nENV EXTRA_PACKAGES \\\n  ca-certificates \\\n  bash \\\n  curl\n\nRUN apk update &amp;&amp; \\\n    apk upgrade &amp;&amp; \\\n    apk add $RUBYBUILD_PACKAGES $RUBYLIB_PACKAGES $EXTRA_PACKAGES &amp;&amp; \\\n    git clone https://github.com/sstephenson/ruby-build.git /tmp/ruby-build\nRUN cd /tmp/ruby-build &amp;&amp; ./install.sh &amp;&amp; cd - &amp;&amp; rm -rf /tmp/ruby-build\n</code></pre>\n\n<p>here is the full log</p>\n\n<p><a href=\"https://gist.github.com/nkhine/0b7f5c162313946ddd2f8d7feb57144a\" rel=\"nofollow noreferrer\">https://gist.github.com/nkhine/0b7f5c162313946ddd2f8d7feb57144a</a></p>\n\n<p>any advice is much appreciated</p>\n"}, {"tags": ["ruby-on-rails", "json", "ruby", "rubygems", "httparty"], "comments": [{"owner": {"reputation": 5610, "user_id": 413924, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/a5fae9bf6a8e05a023c96ba434a1dfd5?s=128&d=identicon&r=PG", "display_name": "DannyB", "link": "https://stackoverflow.com/users/413924/dannyb"}, "edited": false, "score": 0, "creation_date": 1548694822, "post_id": 54406692, "comment_id": 95624489, "body": "I would a) make sure all the gems you need (directly) are in your Gemfile, and b) run <code>bundle update</code>. If this will not solve it, it would normally show you more details about dependency conflicts. If it does not, please paste your Gemfile, could be helpful for our debugging."}], "answers": [{"tags": [], "owner": {"reputation": 5519, "user_id": 938947, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/f611b152b4fa9fe2a05f4ee9b84fdcb7?s=128&d=identicon&r=PG", "display_name": "widjajayd", "link": "https://stackoverflow.com/users/938947/widjajayd"}, "is_accepted": false, "score": 1, "last_activity_date": 1548694869, "creation_date": 1548694869, "answer_id": 54406883, "question_id": 54406692, "link": "https://stackoverflow.com/questions/54406692/unable-to-activate-httparty-0-13-7-because-json-2-0-4-conflicts-with-json-1/54406883#54406883", "title": "Unable to activate httparty-0.13.7, because json-2.0.4 conflicts with json (~&gt; 1.8)", "body": "<p>your can run </p>\n\n<pre><code>bundle update json\n</code></pre>\n\n<p>make sure you type json, don't just bundle update, also if there is apps that depend with json 1.8 you can update as well for example kgio then you can type</p>\n\n<pre><code>bundle update json kgio\n</code></pre>\n"}], "owner": {"reputation": 1796, "user_id": 2809686, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/df4c97dd08b33a8a0684cd226bfe89ce?s=128&d=identicon&r=PG&f=1", "display_name": "Kingsley Simon", "link": "https://stackoverflow.com/users/2809686/kingsley-simon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 274, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1548694869, "creation_date": 1548694200, "question_id": 54406692, "link": "https://stackoverflow.com/questions/54406692/unable-to-activate-httparty-0-13-7-because-json-2-0-4-conflicts-with-json-1", "title": "Unable to activate httparty-0.13.7, because json-2.0.4 conflicts with json (~&gt; 1.8)", "body": "<p>I am trying to run a script and in my two files i have the following</p>\n\n<p>bot.rb</p>\n\n<pre><code>require 'rubygems'\nrequire 'active_support'\nrequire 'active_support/core_ext'\nrequire './app/jobs/scraping_job.rb'\n\nputs 'Hello World'\n</code></pre>\n\n<p>scraping_job.rb</p>\n\n<pre><code>require 'httparty'\n\nclass ScrapingJob\n\nend\n</code></pre>\n\n<p>in my gemfile, i have also added <code>gem 'httparty'</code>. </p>\n\n<p>But when i run my script i hit this error</p>\n\n<pre><code>Unable to activate httparty-0.13.7, because json-2.0.4 conflicts with json (~&gt; 1.8) (Gem::ConflictError).\n</code></pre>\n\n<p>How can i solve this error? </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "spree"], "comments": [{"owner": {"reputation": 3521, "user_id": 2521680, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/6D935.jpg?s=128&g=1", "display_name": "Rockwell Rice", "link": "https://stackoverflow.com/users/2521680/rockwell-rice"}, "edited": false, "score": 1, "creation_date": 1548693486, "post_id": 54406241, "comment_id": 95623711, "body": "They will be added in by the spree gem, you do not need to copy them over manually unless you are doing some kind of funky, manual install or something.  Just an FYI, the way gems work is they mirror your directory structure and then add in the code needed for whatever that gem is accomplishing, so you do not need to manually copy stuff over from thier github."}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 1, "creation_date": 1548696811, "post_id": 54406241, "comment_id": 95625584, "body": "On a side note: Learn RoR before you try implementing Spree. Its not really a good beginner project - payment portals are a tough nut to crack."}], "answers": [{"tags": [], "owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "is_accepted": true, "score": 3, "last_activity_date": 1548696362, "last_edit_date": 1548696362, "creation_date": 1548694838, "answer_id": 54406871, "question_id": 54406241, "link": "https://stackoverflow.com/questions/54406241/should-i-copy-paste-all-controllers-and-routes-from-spree-to-my-own-app/54406871#54406871", "title": "Should I copy/paste all controllers and routes from Spree to my own app?", "body": "<p>The whole idea of gems is that they are package distribution mechanism that you can use instead of copy-pasting code.</p>\n\n<p>Most modern languages have some sort of package distribution. Ruby's package manager of choice is <a href=\"https://bundler.io/\" rel=\"nofollow noreferrer\">Bundler</a>.</p>\n\n<p>It should always be used instead of copy-pasting because:</p>\n\n<ol>\n<li>Copy-pasting is error prone and tedious.</li>\n<li>You're not bloating your code repository with vendor code which makes it easier to maintain.</li>\n<li>Package managers can do dependency tree resolution to ensure that your dependencies are compatible with each other.</li>\n<li>Its not 1995 and copy-pasting a library will cast doubts on your competency.</li>\n</ol>\n\n<p>If you need to modify a gem for whatever reason you can fork the repository and tell bundler to use your fork. But in most cases this is a last resort as Ruby is an extremely flexible language.</p>\n\n<blockquote>\n  <p>My question is should I copy all controllers and routes from Spree\n  github page and then to overwrite them or they are already \"booted\"\n  through engine?</p>\n</blockquote>\n\n<p>No. Just mount the gem. In all likelihood its very configurable and provides options to customize it to your hearts intent without changing any of the gems code.</p>\n\n<p>Or in many cases you can just use <a href=\"https://en.wikipedia.org/wiki/Object-oriented_programming\" rel=\"nofollow noreferrer\">object oriented programming</a> to configure your own subtypes of the controllers provided by the gem.</p>\n\n<p>Deface is used to modify views after they are rendered. Its basically a more refined version of using a regular expression and thus quite hacky if the problem can be solved in the first place by using partials or helpers to make the code more modular. It has nothing to do with routes or controllers.</p>\n"}], "owner": {"reputation": 63, "user_id": 10658300, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c6f164d3ffc4a040412c552ed693bc0?s=128&d=identicon&r=PG&f=1", "display_name": "pfc", "link": "https://stackoverflow.com/users/10658300/pfc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "accepted_answer_id": 54406871, "answer_count": 1, "score": 0, "last_activity_date": 1548696362, "creation_date": 1548692537, "question_id": 54406241, "link": "https://stackoverflow.com/questions/54406241/should-i-copy-paste-all-controllers-and-routes-from-spree-to-my-own-app", "title": "Should I copy/paste all controllers and routes from Spree to my own app?", "body": "<p>I'm in process of learning RoR, and obviously Spree and few things aren't clear to me. I'm not totally familiar with Rails engines neither.</p>\n\n<p>My question is should I copy all controllers and routes from Spree github page and then to overwrite them or they are already \"booted\" through engine?</p>\n\n<p>Also, I noticed that some people use Deface to overwrite things on their own applications. Isn't it easier to copy/paste from github code and then modify it or there is some trick with it?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "amazon-web-services"], "comments": [{"owner": {"reputation": 4948, "user_id": 1025520, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/f9f78456abe7adce324b230d947696e4?s=128&d=identicon&r=PG", "display_name": "NeverBe", "link": "https://stackoverflow.com/users/1025520/neverbe"}, "edited": false, "score": 1, "creation_date": 1548691865, "post_id": 54405820, "comment_id": 95622608, "body": "if you mean elasticbeanstalk it does it for you"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1548692130, "post_id": 54405820, "comment_id": 95622794, "body": "Alternative to running migrations? This question needs more context."}], "owner": {"reputation": 67, "user_id": 9651869, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Fun Media", "link": "https://stackoverflow.com/users/9651869/fun-media"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 69, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1548697183, "creation_date": 1548691200, "question_id": 54405820, "link": "https://stackoverflow.com/questions/54405820/procfile-alternative-of-aws", "title": "Procfile alternative of aws", "body": "<p>India heroku we use procfile <code>release: rake db:migrate</code>. Is there any alternative in aws? I am new to Amazon web services. </p>\n"}, {"tags": ["javascript", "ruby-on-rails", "ruby"], "owner": {"reputation": 11, "user_id": 10979919, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8hw64.jpg?s=128&g=1", "display_name": "davi schilling", "link": "https://stackoverflow.com/users/10979919/davi-schilling"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 29, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1548690547, "creation_date": 1548690547, "question_id": 54405618, "link": "https://stackoverflow.com/questions/54405618/problem-to-send-cropped-image-into-my-server-with-javascript", "title": "Problem to send cropped image into my server with javascript", "body": "<p>I'm new with cropping images, and i had some problems to save the cropped image. My code already upload a new image, and shows the preview cropped image, but i'm stuck on this step.</p>\n\n<p>I have a code that i already tried, that sends an image to server when the image is from input div, and the element is a object htmlinputelement. When i try to send my preview picture, it is an object object and doesn't work. I saw that i have to turn my object into a file, but i don't know if this is the right way to do it, and my javascript skills aren't so good. </p>\n\n<p>//this code is to send to server and it's working\nfunction uploadpicture(input) {</p>\n\n<pre><code>if (input.files &amp;&amp; input.files[0]) {\n    var reader = new FileReader();\n\n    reader.onload = function (e) {\n        $('#img_final')\n        .attr('src', e.target.result);\n    };\n\n    reader.readAsDataURL(input.files[0]);\n\n    //enviar img via ajax\n    var file_data = input.files[0];\n\n    var form_data = new FormData();\n\n    var cpf_can = '&lt;%= @candidato.cpf %&gt;';\n    console.log('cpf: ', cpf_can);\n\n    form_data.append(\"file\", file_data);\n    form_data.append(\"cpf\", cpf_can);\n\n\n    var request = new XMLHttpRequest();\n    request.open('POST', '/changecurimg/envia3por4ajax', /* async = */ false);\n    request.send(form_data);\n\n    if (request.response == 500){\n        alert(\"Erro ao inserir foto! tente novamente\");\n        location.reload();\n        $(\"#myModal\").modal('hide');\n    }\n    else if (request.response == 200){\n        location.reload();\n        $(\"#myModal\").modal('hide');\n        $('#img_final').removeClass('hidden');\n        $('#img_prev').addClass( \"hidden\" );\n    }\n}\n</code></pre>\n\n<p>}</p>\n\n<p>// this code shows the cropping and preview image\nfunction resize_modal(){</p>\n\n<pre><code>var $image = $(\".img-container &gt; img\"),\n    $dataX = $(\"#dataX\"),\n    $dataY = $(\"#dataY\"),\n    $dataHeight = $(\"#dataHeight\"),\n    $dataWidth = $(\"#dataWidth\");\n\n$image.cropper({\n  aspectRatio: 3 / 4,\n  data: {\n    x: 480,\n    y: 60,\n    width: 640,\n    height: 360\n  },\n  modal: true,\n  preview: \".img-preview\",\n  done: function(data) {\n    $dataX.val(Math.round(data.x));\n    $dataY.val(Math.round(data.y));\n    $dataHeight.val(Math.round(data.height));\n    $dataWidth.val(Math.round(data.width));\n  }\n});\n\nvar $inputImage = $(\"#inputImage\");\nif (window.FileReader) {\n    $inputImage.change(function () {\n        var fileReader = new FileReader(),\n                files = this.files,\n                file;\n\n        if (!files.length) {\n            return;\n        }\n\n        file = files[0];\n\n        if (/^image\\/\\w+$/.test(file.type)) {\n            fileReader.readAsDataURL(file);\n            fileReader.onload = function () {\n                $inputImage.val(\"\");\n                $image.cropper(\"reset\", true).cropper(\"replace\", this.result);\n            };\n        } else {\n            showMessage(\"Please choose an image file.\");\n        }\n    });\n} else {\n    $inputImage.addClass(\"hide\");\n};\n\n// $('document').ready(function(){\n//     $('#myModal0').modal('show');\n// };\n</code></pre>\n\n<p>};</p>\n"}, {"tags": ["ruby-on-rails", "regex", "ruby", "string"], "comments": [{"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 2, "creation_date": 1548698273, "post_id": 54405463, "comment_id": 95626288, "body": "Obligatory.... <b><a href=\"https://stackoverflow.com/a/1732454/1954610\">DO NOT PARSE HTML WITH REGEX</a></b>. TH\u0318E\u0344\u0309\u0356 \u0360P\u032f\u034d\u032dO\u031a\u200bN\u0310Y\u0321 H\u0368\u034a\u033d\u0305\u033e\u030e\u0321\u0338\u032a\u032fE\u033e\u035b\u036a\u0344\u0300\u0301\u0327\u0358\u032c\u0329 \u0367\u033e\u036c\u0327\u0336\u0328\u0331\u0339\u032d\u032fC\u036d\u030f\u0365\u036e\u035f\u0337\u0319\u0332\u031d\u0356O\u036e\u034f\u032e\u032a\u031d\u034dM\u034a\u0312\u031a\u036a\u0369\u036c\u031a\u035c\u0332\u0316E\u0311\u0369\u034c\u035d\u0334\u031f\u031f\u0359\u031eS\u036f\u033f\u0314\u0328\u0340\u0325\u0345\u032b\u034e\u032d  Your code probably won&#39;t work properly for all edge cases, and it&#39;s typically a <i>very bad idea</i> to let users input arbitrary HTML like this -- you leave yourself wide open to XSS attacks."}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1548698395, "post_id": 54405463, "comment_id": 95626352, "body": "A much better idea would be to explicitly whitelist specific HTML tags (perhaps with different lists for different users), using an HTML parser. Not regex. <a href=\"https://edgeapi.rubyonrails.org/classes/ActionView/Helpers/SanitizeHelper.html#method-i-sanitize\" rel=\"nofollow noreferrer\">edgeapi.rubyonrails.org/classes/ActionView/Helpers/&hellip;</a> -- This method is probably all you need."}, {"owner": {"reputation": 85, "user_id": 6780066, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d5c6ef08006356661fc28205728fe372?s=128&d=identicon&r=PG&f=1", "display_name": "Georgeheap", "link": "https://stackoverflow.com/users/6780066/georgeheap"}, "reply_to_user": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1548757986, "post_id": 54405463, "comment_id": 95647655, "body": "@TomLord - Good point which is why I was asking thinking there must be a better way. It is only super users that can enter it and it is coming from tinymce so they aren&#39;t adding the html themselves."}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1548760042, "post_id": 54405463, "comment_id": 95648923, "body": "Using a WYSIWYG editor does not protect you against malicious users. You can still submit arbitrary data in the form. But if you fully trust the users, then (as with most things) security is less of a concern."}], "answers": [{"comments": [{"owner": {"reputation": 85, "user_id": 6780066, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d5c6ef08006356661fc28205728fe372?s=128&d=identicon&r=PG&f=1", "display_name": "Georgeheap", "link": "https://stackoverflow.com/users/6780066/georgeheap"}, "edited": false, "score": 0, "creation_date": 1548691151, "post_id": 54405562, "comment_id": 95622143, "body": "I went with strip_links since I want to keep the other tags in there. Thanks!"}], "tags": [], "owner": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "is_accepted": true, "score": 5, "last_activity_date": 1548690345, "creation_date": 1548690345, "answer_id": 54405562, "question_id": 54405463, "link": "https://stackoverflow.com/questions/54405463/remove-all-a-tags-from-string/54405562#54405562", "title": "Remove all a tags from string", "body": "<p>You can use <a href=\"https://edgeapi.rubyonrails.org/classes/ActionView/Helpers/SanitizeHelper.html#method-i-strip_tags\" rel=\"noreferrer\"><code>strip_tags</code></a> (to strip all tags) or <a href=\"https://edgeapi.rubyonrails.org/classes/ActionView/Helpers/SanitizeHelper.html#method-i-strip_links\" rel=\"noreferrer\"><code>strip_links</code></a> (to strip just links).</p>\n\n<p>In Rails console:</p>\n\n<pre><code>&gt; text = '&lt;div&gt;blah blah blah.&lt;br /&gt;&lt;br /&gt;&lt;/div&gt;\\r\\n&lt;div&gt;&lt;a href=\\\"http://www.google.com\\\"&gt;Google&lt;/a&gt;&lt;br /&gt;Another link: &lt;br /&gt; &lt;a href=\\\"http://www.test.com\\\"&gt;Test Link&lt;/a&gt;&lt;br /&gt;&lt;br /&gt;&lt;/div&gt;'\n=&gt; \"&lt;div&gt;blah blah blah.&lt;br /&gt;&lt;br /&gt;&lt;/div&gt;\\\\r\\\\n&lt;div&gt;&lt;a href=\\\\\\\"http://www.google.com\\\\\\\"&gt;Google&lt;/a&gt;&lt;br /&gt;Another link: &lt;br /&gt; &lt;a href=\\\\\\\"http://www.test.com\\\\\\\"&gt;Test Link&lt;/a&gt;&lt;br /&gt;&lt;br /&gt;&lt;/div&gt;\"\n&gt; helper.strip_tags(text)\n=&gt; \"blah blah blah.\\\\r\\\\nGoogleAnother link:  Test Link\"\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "edited": false, "score": 2, "creation_date": 1548691308, "post_id": 54405676, "comment_id": 95622249, "body": "it&#39;s better to use limited character set than lazy operators: <code>&#47;&lt;a[^&gt;]*&gt;([^&lt;]+)&lt;\\&#47;a&gt;&#47;</code>. I&#39;ve described it in a <a href=\"https://medium.com/textmaster-engineering/performance-of-regular-expressions-81371f569698\" rel=\"nofollow noreferrer\">blogpost</a>"}, {"owner": {"reputation": 8640, "user_id": 4055042, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cd04c63d95d27033b53d4d83fea40c02?s=128&d=identicon&r=PG&f=1", "display_name": "SRack", "link": "https://stackoverflow.com/users/4055042/srack"}, "reply_to_user": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "edited": false, "score": 0, "creation_date": 1548691407, "post_id": 54405676, "comment_id": 95622304, "body": "Ah, great, thanks @mrzasa, appreciate the feedback. Will read through your link, and implement myself in future."}, {"owner": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "edited": false, "score": 0, "creation_date": 1548691838, "post_id": 54405676, "comment_id": 95622592, "body": "Good, leave comments on medium if you have any questions, I&#39;ll be happy to answer!"}], "tags": [], "owner": {"reputation": 8640, "user_id": 4055042, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cd04c63d95d27033b53d4d83fea40c02?s=128&d=identicon&r=PG&f=1", "display_name": "SRack", "link": "https://stackoverflow.com/users/4055042/srack"}, "is_accepted": false, "score": 2, "last_activity_date": 1548690728, "creation_date": 1548690728, "answer_id": 54405676, "question_id": 54405463, "link": "https://stackoverflow.com/questions/54405463/remove-all-a-tags-from-string/54405676#54405676", "title": "Remove all a tags from string", "body": "<p>@mrzasa seems to have cracked it, though if you're wondering why the regex didn't work, it's due to it being too greedy.</p>\n\n<p>Using the <code>?</code> lazy operator means a scan returns as few characters of the criteria as possible.</p>\n\n<p>The following adds lazy operators to the search, and I believe works as you intended:</p>\n\n<pre><code>text = \"&lt;div&gt;blah blah blah.&lt;br /&gt;&lt;br /&gt;&lt;/div&gt;\\r\\n&lt;div&gt;&lt;a href=\\\"http://www.google.com\\\"&gt;Google&lt;/a&gt;&lt;br /&gt;Another link: &lt;br /&gt; &lt;a href=\\\"http://www.test.com\\\"&gt;Test Link&lt;/a&gt;&lt;br /&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;blah blah blah.&lt;br /&gt;&lt;br /&gt;&lt;/div&gt;\\r\\n&lt;div&gt;&lt;a href=\\\"http://www.google.com\\\"&gt;Google&lt;/a&gt;&lt;br /&gt;Another link: &lt;br /&gt; &lt;a href=\\\"http://www.test.com\\\"&gt;Test Link&lt;/a&gt;&lt;br /&gt;&lt;br /&gt;&lt;/div&gt;\"\ntext.gsub(/&lt;a.*?&gt;(.+?)&lt;\\/a&gt;/, '\\1')\n\n# =&gt; \"&lt;div&gt;blah blah blah.&lt;br /&gt;&lt;br /&gt;&lt;/div&gt;\\r\\n&lt;div&gt;Google&lt;br /&gt;Another link: &lt;br /&gt; Test Link&lt;br /&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;blah blah blah.&lt;br /&gt;&lt;br /&gt;&lt;/div&gt;\\r\\n&lt;div&gt;Google&lt;br /&gt;Another link: &lt;br /&gt; Test Link&lt;br /&gt;&lt;br /&gt;&lt;/div&gt;\"\n</code></pre>\n\n<p><code>'\\1'</code> as the second argument of <code>gsub</code> simply replaces with the first match.</p>\n\n<p>Hope that's in some way useful, and gives a flexible option if you'd rather use regex.</p>\n"}, {"comments": [{"owner": {"reputation": 346, "user_id": 5331859, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/8ddfcdd5d8fc6e4d7cebc17d48a19600?s=128&d=identicon&r=PG&f=1", "display_name": "zasman", "link": "https://stackoverflow.com/users/5331859/zasman"}, "edited": false, "score": 0, "creation_date": 1611179528, "post_id": 54405741, "comment_id": 116371626, "body": "Will this also remove ERB tags and anything in between them?"}], "tags": [], "owner": {"reputation": 4948, "user_id": 1025520, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/f9f78456abe7adce324b230d947696e4?s=128&d=identicon&r=PG", "display_name": "NeverBe", "link": "https://stackoverflow.com/users/1025520/neverbe"}, "is_accepted": false, "score": 3, "last_activity_date": 1548690932, "creation_date": 1548690932, "answer_id": 54405741, "question_id": 54405463, "link": "https://stackoverflow.com/questions/54405463/remove-all-a-tags-from-string/54405741#54405741", "title": "Remove all a tags from string", "body": "<p>Use rails helper</p>\n\n<pre><code>ActionView::Base.full_sanitizer.sanitize('text = &lt;div&gt;blah blah blah.&lt;br /&gt;&lt;br /&gt;&lt;/div&gt;\\r\\n&lt;div&gt;&lt;a href=\\\"http://www.google.com\\\"&gt;Google&lt;/a&gt;&lt;br /&gt;Another link: &lt;br /&gt; &lt;a href=\\\"http://www.test.com\\\"&gt;Test Link&lt;/a&gt;&lt;br /&gt;&lt;br /&gt;&lt;/div&gt;\"\n')\n\n\"text = blah blah blah.\\\\r\\\\nGoogleAnother link:  Test Link\\\"\\n\" \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 15122092, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AOh14GhDI9GY1AvPSUxEnMvEUCO6FtNRJQdiTzw3fO1F=k-s128", "display_name": "tacia_2019", "link": "https://stackoverflow.com/users/15122092/tacia-2019"}, "is_accepted": false, "score": 0, "last_activity_date": 1612181612, "last_edit_date": 1612181612, "creation_date": 1612175851, "answer_id": 65991154, "question_id": 54405463, "link": "https://stackoverflow.com/questions/54405463/remove-all-a-tags-from-string/65991154#65991154", "title": "Remove all a tags from string", "body": "<p>According to <a href=\"https://api.rubyonrails.org/classes/ActionView/Helpers/SanitizeHelper.html#method-i-strip_tags\" rel=\"nofollow noreferrer\">documentation</a>, <code>strip_tags</code> is a method of <code>ActionView::Helpers::SanitizeHelper</code> module. For me worked just to include this module in my class and then you can use it's method like this:</p>\n<pre><code>strip_tags(your_text_with_html)\n</code></pre>\n"}], "owner": {"reputation": 85, "user_id": 6780066, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d5c6ef08006356661fc28205728fe372?s=128&d=identicon&r=PG&f=1", "display_name": "Georgeheap", "link": "https://stackoverflow.com/users/6780066/georgeheap"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 636, "favorite_count": 0, "accepted_answer_id": 54405562, "answer_count": 4, "score": 4, "last_activity_date": 1612181612, "creation_date": 1548690071, "last_edit_date": 1568837912, "question_id": 54405463, "link": "https://stackoverflow.com/questions/54405463/remove-all-a-tags-from-string", "title": "Remove all a tags from string", "body": "<p>I have a string that is being input by the user. They can add as many links as they link but we only want some users to be able to click a link. What I am trying to do is replace any a tag with just the text inside it. I have managed to do it if there is one link but can't figure out how to do it when there are multiple.</p>\n\n<p>This is what I currently have and have tried many variations to get to this:</p>\n\n<pre><code>url_text = text.split(\"&lt;a\").last.split(\"&lt;/a&gt;\").first.split('&gt;').last\ntext.gsub! /&lt;a.+a&gt;/m, url_text\n</code></pre>\n\n<p>But it only works for the first instance of a tag.</p>\n\n<p>The string I am receiving looks like this:</p>\n\n<pre><code>text = &lt;div&gt;blah blah blah.&lt;br /&gt;&lt;br /&gt;&lt;/div&gt;\\r\\n&lt;div&gt;&lt;a href=\\\"http://www.google.com\\\"&gt;Google&lt;/a&gt;&lt;br /&gt;Another link: &lt;br /&gt; &lt;a href=\\\"http://www.test.com\\\"&gt;Test Link&lt;/a&gt;&lt;br /&gt;&lt;br /&gt;&lt;/div&gt;\"\n</code></pre>\n\n<p>I want it to say: \nblah blah blah.\nGoogle\nAnother Link:\nTest Link</p>\n\n<p>Any help will be appreciated. Let me know if you need more code or info.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "safari", "paperclip"], "answers": [{"tags": [], "owner": {"reputation": 9910, "user_id": 5898312, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Gcwsi.jpg?s=128&g=1", "display_name": "Tony Vincent", "link": "https://stackoverflow.com/users/5898312/tony-vincent"}, "is_accepted": true, "score": 1, "last_activity_date": 1548689039, "creation_date": 1548689039, "answer_id": 54405116, "question_id": 54404537, "link": "https://stackoverflow.com/questions/54404537/paperclip-attachment-content-type-validation-fails-only-in-safari/54405116#54405116", "title": "Paperclip attachment content_type validation fails only in Safari", "body": "<p>Try adding <code>audio/mpeg</code>, <code>audio/x-mpeg</code> content types to the validation.</p>\n"}], "owner": {"reputation": 482, "user_id": 6114742, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/10208215410758500/picture?type=large", "display_name": "Jorge Junior Arteaga Carvalho", "link": "https://stackoverflow.com/users/6114742/jorge-junior-arteaga-carvalho"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "accepted_answer_id": 54405116, "answer_count": 1, "score": 0, "last_activity_date": 1548689039, "creation_date": 1548687219, "question_id": 54404537, "link": "https://stackoverflow.com/questions/54404537/paperclip-attachment-content-type-validation-fails-only-in-safari", "title": "Paperclip attachment content_type validation fails only in Safari", "body": "<p>I have a model with a Paperclip attachment which should only accept some audio formats. The model is as follows:</p>\n\n<pre><code>class SoundOutput &lt; ActiveRecord::Base\n  has_attached_file :audio\n  validates_attachment :audio,\n    content_type: { content_type: ['audio/x-wav', 'audio/wav', 'audio/mp3', 'audio/x-mp3'] }\nend\n</code></pre>\n\n<p>I can upload my .mp3 files in Google Chrome. But the exact same files don't pass the validation when I submit them from Safari.\nI get 2 error messages:</p>\n\n<pre><code>['Audio content type is invalid', 'Audio is invalid']\n</code></pre>\n\n<p>Relevant info from my Gemfile:</p>\n\n<pre><code>ruby '2.2.3'\n\ngem 'rails', '4.2.5.1'\ngem 'paperclip', '~&gt; 4.3'\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "delayed-job"], "answers": [{"tags": [], "owner": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "is_accepted": false, "score": 1, "last_activity_date": 1548683058, "creation_date": 1548683058, "answer_id": 54403342, "question_id": 54403304, "link": "https://stackoverflow.com/questions/54403304/explanation-about-delayed-jobs/54403342#54403342", "title": "Explanation about Delayed_Jobs", "body": "<p>There is a <code>delayed_job</code> script for that It needs to be run as a separate process.</p>\n\n<blockquote>\n  <p><code>script/delayed_job</code> can be used to manage a background process which will start working off jobs.</p>\n  \n  <p>To do so, add <code>gem \"daemons\"</code> to your <code>Gemfile</code> and make sure you've run rails generate delayed_job.</p>\n</blockquote>\n\n<p><a href=\"https://github.com/collectiveidea/delayed_job#running-jobs\" rel=\"nofollow noreferrer\">https://github.com/collectiveidea/delayed_job#running-jobs</a></p>\n\n<p>For heroku, <a href=\"https://devcenter.heroku.com/articles/delayed-job\" rel=\"nofollow noreferrer\">see docs</a></p>\n\n<p>You need to update the <code>Procfile</code> with:</p>\n\n<pre><code>worker: rake jobs:work\n</code></pre>\n"}], "owner": {"reputation": 520, "user_id": 5839652, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/zfBMT.jpg?s=128&g=1", "display_name": "Rich", "link": "https://stackoverflow.com/users/5839652/rich"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1548683076, "creation_date": 1548682924, "last_edit_date": 1548683076, "question_id": 54403304, "link": "https://stackoverflow.com/questions/54403304/explanation-about-delayed-jobs", "title": "Explanation about Delayed_Jobs", "body": "<p>Looking for an explanation into the <code>delayed_job</code> gem. </p>\n\n<p>I understand it schedules and keeps a list of tasks that need to be done, and that those tasks can be created via the active_job interface.</p>\n\n<p>What I don't understand is what starts the <code>taskrunner</code> or whatever it is that starts going through the list of jobs in the delayed_job table. Am I able to use the <code>whenever</code> gem to do this and call it as a chron job? Or should I be using the <code>daemons</code> gem? If so, what is the difference between <code>daemons</code> gem and <code>whenever</code>?</p>\n\n<p>I am just a bit confused in all of this.</p>\n\n<p>Lastly, I use heroku for staging, and a vpn managed via capistrano. How would that play into this?</p>\n\n<p>Thank you.</p>\n"}, {"tags": ["arrays", "ruby", "string"], "comments": [{"owner": {"reputation": 4739, "user_id": 5403468, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZJ8BE.jpg?s=128&g=1", "display_name": "Tiw", "link": "https://stackoverflow.com/users/5403468/tiw"}, "edited": false, "score": 1, "creation_date": 1548680388, "post_id": 54402556, "comment_id": 95615487, "body": "What exactly do you want the result to be?"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 4739, "user_id": 5403468, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZJ8BE.jpg?s=128&g=1", "display_name": "Tiw", "link": "https://stackoverflow.com/users/5403468/tiw"}, "edited": false, "score": 0, "creation_date": 1548697355, "post_id": 54402556, "comment_id": 95625825, "body": "Even though you have selected an answer you should edit your question to address @Tiw&#39;s question. The answer is not just for your benefit, so the question needs to be clear to all current and future readers."}], "answers": [{"comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1548680449, "post_id": 54402587, "comment_id": 95615515, "body": "multiline, though? And they want to split by paragraphs, not by lines even."}, {"owner": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1548680566, "post_id": 54402587, "comment_id": 95615580, "body": "ah, with corrected formatting, it&#39;s a different question"}, {"owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "edited": false, "score": 0, "creation_date": 1548681165, "post_id": 54402587, "comment_id": 95615919, "body": "If you replace &#39;bbbb&#39; with &#39;bbbb\\n&#39; (edge condition) in above your example, how code will deal with it?"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1548683966, "post_id": 54402587, "comment_id": 95617601, "body": "You could also split by <code>&#47;^\\n+&#47;</code> which preserves the trailing newlines on the non-empty lines."}], "tags": [], "owner": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "is_accepted": true, "score": 8, "last_activity_date": 1548682257, "last_edit_date": 1548682257, "creation_date": 1548680406, "answer_id": 54402587, "question_id": 54402556, "link": "https://stackoverflow.com/questions/54402556/how-do-i-split-string-into-an-array-using-blank-lines-as-delimiter-in-ruby/54402587#54402587", "title": "How do I split string into an array using blank lines as delimiter in ruby?", "body": "<p>Well, with <a href=\"https://ruby-doc.org/core-2.5.1/String.html#method-i-split\" rel=\"noreferrer\"><code>String#split</code></a></p>\n\n<pre><code>'aaaaa bbbb'.split\n=&gt; [\"aaaaa\", \"bbbb\"]\n</code></pre>\n\n<blockquote>\n  <p><code>split(pattern=nil, [limit]) \u2192 an_array</code></p>\n  \n  <p>Divides str into substrings based on a delimiter, returning an array of these substrings.</p>\n  \n  <p>[...]</p>\n  \n  <p>If <code>pattern</code> is <code>nil</code>, the value of <code>$</code>; is used. If <code>$</code>; is <code>nil</code> (which is the default), <code>str</code> is split on whitespace as if <code>' '</code> were specified.</p>\n</blockquote>\n\n<p>UPDATE:</p>\n\n<p>To split on empty line, you can use <code>/\\n{2,}/</code> pattern. It also handles paragraphs separated with more than one empty line:</p>\n\n<pre><code>a = &lt;&lt;END\naaaaa\nbbbb\n\n\naaaaa\nccccccc\n\naaa\nrrrrt\nEND\n\na.split(/\\n{2,}/)\n=&gt; [\"aaaaa\\nbbbb\", \"aaaaa\\nccccccc\", \"aaa\\nrrrrt\\n\"]\n</code></pre>\n"}], "owner": {"reputation": 193, "user_id": 6500563, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/79d8d08238533616559c33c5650255b1?s=128&d=identicon&r=PG&f=1", "display_name": "mila002", "link": "https://stackoverflow.com/users/6500563/mila002"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 410, "favorite_count": 0, "accepted_answer_id": 54402587, "answer_count": 1, "score": 4, "last_activity_date": 1548682257, "creation_date": 1548680318, "last_edit_date": 1548680373, "question_id": 54402556, "link": "https://stackoverflow.com/questions/54402556/how-do-i-split-string-into-an-array-using-blank-lines-as-delimiter-in-ruby", "title": "How do I split string into an array using blank lines as delimiter in ruby?", "body": "<p>How do I split string such as:</p>\n\n<pre><code>aaaaa\nbbbb\n\naaaaa\nccccccc\n\naaa\nrrrrt\n</code></pre>\n\n<p>into an array using blank lines as delimiter?</p>\n"}, {"tags": ["ruby", "sqlite", "cmd"], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 6615474, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-GQKv0sObSfM/AAAAAAAAAAI/AAAAAAAARBk/xXNIEQIE4X8/photo.jpg?sz=128", "display_name": "Diego Camargo", "link": "https://stackoverflow.com/users/6615474/diego-camargo"}, "is_accepted": false, "score": 0, "last_activity_date": 1548686983, "creation_date": 1548686983, "answer_id": 54404476, "question_id": 54402445, "link": "https://stackoverflow.com/questions/54402445/sqlite3-commands-in-ruby/54404476#54404476", "title": "SQLite3 commands in ruby", "body": "<p>You could receive the STDIN by using pipes, someone asked that here (<a href=\"https://stackoverflow.com/questions/273262/best-practices-with-stdin-in-ruby\">Best practices with STDIN in Ruby?</a>)</p>\n\n<p>Or you could also use the sqlite gem(<a href=\"https://rubygems.org/gems/sqlite3/versions/1.3.11\" rel=\"nofollow noreferrer\">https://rubygems.org/gems/sqlite3/versions/1.3.11</a>) to connect to the database and then run the query from ruby.</p>\n\n<p>You can also use sequel(<a href=\"https://github.com/jeremyevans/sequel\" rel=\"nofollow noreferrer\">https://github.com/jeremyevans/sequel</a>) the interface is nicer, to communicate with the sqlite database</p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 7005679, "user_type": "registered", "profile_image": "https://graph.facebook.com/1296668503701460/picture?type=large", "display_name": "Stasiek Zieli\u0144ski", "link": "https://stackoverflow.com/users/7005679/stasiek-zieli%c5%84ski"}, "is_accepted": false, "score": 0, "last_activity_date": 1548690408, "creation_date": 1548690408, "answer_id": 54405576, "question_id": 54402445, "link": "https://stackoverflow.com/questions/54402445/sqlite3-commands-in-ruby/54405576#54405576", "title": "SQLite3 commands in ruby", "body": "<p>Simply system(\"sqlite3 -header -csv sqlite3 -header -csv H:\\test.sqlite&lt; query.sql > test.csv\"</p>\n\n<p>I just needed to add 2 slashes in path...</p>\n"}, {"tags": [], "owner": {"reputation": 3902, "user_id": 10608621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d59df09a85d05117c63706f66811b70c?s=128&d=identicon&r=PG", "display_name": "mechnicov", "link": "https://stackoverflow.com/users/10608621/mechnicov"}, "is_accepted": false, "score": 0, "last_activity_date": 1548690629, "creation_date": 1548690629, "answer_id": 54405643, "question_id": 54402445, "link": "https://stackoverflow.com/questions/54402445/sqlite3-commands-in-ruby/54405643#54405643", "title": "SQLite3 commands in ruby", "body": "<p>The question is not exactly defined.</p>\n\n<p>Firstly read the documentation for the <a href=\"https://www.rubydoc.info/github/luislavena/sqlite3-ruby/SQLite3/Database\" rel=\"nofollow noreferrer\">sqlite3 gem</a> and <a href=\"https://ruby-doc.org/stdlib-2.5.1/libdoc/csv/rdoc/CSV.html\" rel=\"nofollow noreferrer\">csv library</a>.</p>\n\n<p>Using this information, you can parse and write csv-files, make queries and get results to/from SQLite3 DB and much more.</p>\n"}], "owner": {"reputation": 11, "user_id": 7005679, "user_type": "registered", "profile_image": "https://graph.facebook.com/1296668503701460/picture?type=large", "display_name": "Stasiek Zieli\u0144ski", "link": "https://stackoverflow.com/users/7005679/stasiek-zieli%c5%84ski"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 256, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1548690629, "creation_date": 1548679908, "last_edit_date": 1548681282, "question_id": 54402445, "link": "https://stackoverflow.com/questions/54402445/sqlite3-commands-in-ruby", "title": "SQLite3 commands in ruby", "body": "<p>Is there a way to pass commands from <code>SQLite</code> into ruby script?\nFor example I have a <code>test.sqlite</code> database created. Now I want to export a query result from that database into <code>.csv</code> file. I can simply do that using command line:</p>\n\n<pre><code>Sqlite3 \"H:\\\\test.sqlite\"\n.mode csv\n.headers on\n.once test.csv\nselect * from cars;\n\nSqlite3 \"H:\\\\test.sqlite\"\n.mode csv\n.headers on\n.once test.csv\nselect * from cars;\n</code></pre>\n\n<p>or also using SQLite3:</p>\n\n<pre><code>sqlite3 -header -csv sqlite3 -header -csv H:\\test.sqlite&lt; query.sql &gt; test.csv\n</code></pre>\n\n<p>and it works perfectly fine in CMD but I want to have that coded in my ruby script. I was also trying to pass that into command line using <code>%x</code> but it is not working.\nAny help?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "categories"], "comments": [{"owner": {"reputation": 3247, "user_id": 2304517, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Wv4Xe.png?s=128&g=1", "display_name": "Xero", "link": "https://stackoverflow.com/users/2304517/xero"}, "edited": false, "score": 0, "creation_date": 1548679024, "post_id": 54402084, "comment_id": 95614700, "body": "can you please provide more information about the error ? like add the full stack error, so I would be sure that my answer is right"}, {"owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "edited": false, "score": 0, "creation_date": 1548679057, "post_id": 54402084, "comment_id": 95614727, "body": "Need stack error along with processing parameters also!"}, {"owner": {"reputation": 3247, "user_id": 2304517, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Wv4Xe.png?s=128&g=1", "display_name": "Xero", "link": "https://stackoverflow.com/users/2304517/xero"}, "edited": false, "score": 0, "creation_date": 1548679242, "post_id": 54402084, "comment_id": 95614836, "body": "And can you please show all the content of <code>categories_controller.rb</code>"}, {"owner": {"reputation": 1035, "user_id": 5891503, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/830569e0fa440b692ab80005ef9b00cb?s=128&d=identicon&r=PG", "display_name": "reiallenramos", "link": "https://stackoverflow.com/users/5891503/reiallenramos"}, "edited": false, "score": 0, "creation_date": 1548680289, "post_id": 54402084, "comment_id": 95615431, "body": "either you don&#39;t have <code>category_id</code> in your parameters OR it&#39;s there but it&#39;s named <code>id</code>. If it&#39;s the latter, just use <code>params[:id]</code> in your set_category hook"}, {"owner": {"reputation": 7944, "user_id": 10907864, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tGpcY.jpg?s=128&g=1", "display_name": "Promise Preston", "link": "https://stackoverflow.com/users/10907864/promise-preston"}, "edited": false, "score": 0, "creation_date": 1548684916, "post_id": 54402084, "comment_id": 95618128, "body": "ActiveRecord::RecordNotFound (Couldn&#39;t find Category with &#39;id&#39;=10):  app/controllers/categories_controller.rb:69:in `set_category&#39;. I have also changed the set_category method to @category = Category.find(params[:id]) but still no luck. I cannot edit/update categories when I create them too because of this error. Don&#39;t know what to do"}, {"owner": {"reputation": 7944, "user_id": 10907864, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tGpcY.jpg?s=128&g=1", "display_name": "Promise Preston", "link": "https://stackoverflow.com/users/10907864/promise-preston"}, "reply_to_user": {"reputation": 3247, "user_id": 2304517, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Wv4Xe.png?s=128&g=1", "display_name": "Xero", "link": "https://stackoverflow.com/users/2304517/xero"}, "edited": false, "score": 0, "creation_date": 1548685628, "post_id": 54402084, "comment_id": 95618568, "body": "@Xero, @ray and @reiallenramos, the content of the <code>categories_controller.rb</code> file is fully shown upwards in the question section. I am also willing to provide more insight about the question if you need any more insight. <b>ActiveRecord::RecordNotFound in CategoriesController</b>,  <b>Couldn&#39;t find Category with &#39;id&#39;=10</b>, <b>app/controllers/categories_controller.rb:69:in `set_category</b>"}, {"owner": {"reputation": 3247, "user_id": 2304517, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Wv4Xe.png?s=128&g=1", "display_name": "Xero", "link": "https://stackoverflow.com/users/2304517/xero"}, "edited": false, "score": 0, "creation_date": 1548688905, "post_id": 54402084, "comment_id": 95620641, "body": "@PromisePreston are you sure that the category with id 10 exists in database ?"}, {"owner": {"reputation": 7944, "user_id": 10907864, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tGpcY.jpg?s=128&g=1", "display_name": "Promise Preston", "link": "https://stackoverflow.com/users/10907864/promise-preston"}, "reply_to_user": {"reputation": 3247, "user_id": 2304517, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Wv4Xe.png?s=128&g=1", "display_name": "Xero", "link": "https://stackoverflow.com/users/2304517/xero"}, "edited": false, "score": 0, "creation_date": 1548689186, "post_id": 54402084, "comment_id": 95620808, "body": "@Xero, Yes, it does, I run into issues each time I try to update the category, but I can view the category."}], "answers": [{"comments": [{"owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "edited": false, "score": 1, "creation_date": 1548679168, "post_id": 54402171, "comment_id": 95614796, "body": "This is common but you cannot be sure without log!"}, {"owner": {"reputation": 3247, "user_id": 2304517, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Wv4Xe.png?s=128&g=1", "display_name": "Xero", "link": "https://stackoverflow.com/users/2304517/xero"}, "reply_to_user": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "edited": false, "score": 0, "creation_date": 1548679219, "post_id": 54402171, "comment_id": 95614823, "body": "I agree, I&#39;m waiting some logs to complete my answer"}, {"owner": {"reputation": 7944, "user_id": 10907864, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tGpcY.jpg?s=128&g=1", "display_name": "Promise Preston", "link": "https://stackoverflow.com/users/10907864/promise-preston"}, "edited": false, "score": 0, "creation_date": 1548685833, "post_id": 54402171, "comment_id": 95618720, "body": "<b>ActiveRecord::RecordNotFound (Couldn&#39;t find Category with &#39;id&#39;=10): app/controllers/categories_controller.rb:69:in set_category.</b>  I have also changed the <code>set_category</code> method to <b>@category = Category.find(params[:id])</b> but still no luck. I cannot edit/update categories when I create them too because of this error. Don&#39;t know what to do"}, {"owner": {"reputation": 3247, "user_id": 2304517, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Wv4Xe.png?s=128&g=1", "display_name": "Xero", "link": "https://stackoverflow.com/users/2304517/xero"}, "reply_to_user": {"reputation": 7944, "user_id": 10907864, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tGpcY.jpg?s=128&g=1", "display_name": "Promise Preston", "link": "https://stackoverflow.com/users/10907864/promise-preston"}, "edited": false, "score": 0, "creation_date": 1548686045, "post_id": 54402171, "comment_id": 95618844, "body": "@PromiseChukwuenyem check what is in your &quot;params&quot; (by doing <code>pp params</code> before <code>@category = ...</code>) To be sure that your params is send"}, {"owner": {"reputation": 7944, "user_id": 10907864, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tGpcY.jpg?s=128&g=1", "display_name": "Promise Preston", "link": "https://stackoverflow.com/users/10907864/promise-preston"}, "edited": false, "score": 0, "creation_date": 1548686374, "post_id": 54402171, "comment_id": 95619086, "body": "@Xero, can you please explain better on how I can fix this issue, because I am a new to Ruby on Rails. All my codes are posted in the question. I would be very grateful if I can get this fixed. Thank you in advance."}, {"owner": {"reputation": 3247, "user_id": 2304517, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Wv4Xe.png?s=128&g=1", "display_name": "Xero", "link": "https://stackoverflow.com/users/2304517/xero"}, "edited": false, "score": 0, "creation_date": 1548686632, "post_id": 54402171, "comment_id": 95619252, "body": "@PromiseChukwuenyem please edit your post and add the complete <code>categories_controller.rb</code> I&#39;m sure it&#39;s not complete. And the complete stack error (with the information on the route called (POST http://..) When you would have done that, I will edit my post and explain you."}, {"owner": {"reputation": 7944, "user_id": 10907864, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tGpcY.jpg?s=128&g=1", "display_name": "Promise Preston", "link": "https://stackoverflow.com/users/10907864/promise-preston"}, "edited": false, "score": 0, "creation_date": 1548689019, "post_id": 54402171, "comment_id": 95620703, "body": "I have updated the <code>categories_controller.rb</code> code above with the complete code. As for the route, I only used <b>resources :categories</b> as shown in the code in the question. I have also uploaded a screenshot of the error above using <b>Complete Stack Trace Screenshot</b> as the title. Thank you in advance."}], "tags": [], "owner": {"reputation": 3247, "user_id": 2304517, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Wv4Xe.png?s=128&g=1", "display_name": "Xero", "link": "https://stackoverflow.com/users/2304517/xero"}, "is_accepted": false, "score": 0, "last_activity_date": 1548678948, "creation_date": 1548678948, "answer_id": 54402171, "question_id": 54402084, "link": "https://stackoverflow.com/questions/54402084/couldnt-find-category-without-an-id-for-a-rails-e-library-application/54402171#54402171", "title": "Couldn&#39;t find Category without an ID for a Rails E-Library Application", "body": "<p>Your error is related to the line : (in <code>set_category</code> method)</p>\n\n<pre><code>  @category = Category.find(params[:category_id])\n</code></pre>\n\n<p>This is the line that cause your error :</p>\n\n<pre><code>Couldn't find Category without an ID\n</code></pre>\n\n<p>Because, I assume, that <code>params[:category_id]</code> is empty.</p>\n"}, {"tags": [], "owner": {"reputation": 7944, "user_id": 10907864, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tGpcY.jpg?s=128&g=1", "display_name": "Promise Preston", "link": "https://stackoverflow.com/users/10907864/promise-preston"}, "is_accepted": false, "score": 0, "last_activity_date": 1565532124, "last_edit_date": 1565532124, "creation_date": 1552067196, "answer_id": 55068413, "question_id": 54402084, "link": "https://stackoverflow.com/questions/54402084/couldnt-find-category-without-an-id-for-a-rails-e-library-application/55068413#55068413", "title": "Couldn&#39;t find Category without an ID for a Rails E-Library Application", "body": "<p>I started off the whole process again and then realized that I was calling the destroy action in the edit book page, which it didn't permit.</p>\n\n<p>I simply removed the link to the destroy action from the edit book page and everything became fine.</p>\n\n<p><strong>This is the edit.html.erb file for the book view</strong></p>\n\n<pre><code>&lt;div class=\"container\"&gt;\n    &lt;div class=\"row\"&gt;\n        &lt;div class=\"col-md-3 col-md-12\"&gt;&lt;/div&gt;\n\n        &lt;div class=\"col-md-6 col-md-12\"&gt;\n        &lt;h1&gt;Editing Book&lt;/h1&gt;\n        &lt;hr&gt;\n\n            &lt;%= render 'form', book: @book %&gt;\n\n            &lt;hr&gt;\n            &lt;%= link_to 'Show Book', @book %&gt; |\n            &lt;%= link_to 'Delete', book, method: :delete, data: { confirm: 'Are you sure?' } %&gt; |\n            &lt;%= link_to 'Back', books_path %&gt;\n\n        &lt;/div&gt;\n\n        &lt;div class=\"col-md-3 col-md-12\"&gt;&lt;/div&gt;\n    &lt;/div&gt;\n&lt;/div&gt;  \n</code></pre>\n\n<p>That's all.</p>\n\n<p><strong>I hope this helps</strong></p>\n"}], "owner": {"reputation": 7944, "user_id": 10907864, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tGpcY.jpg?s=128&g=1", "display_name": "Promise Preston", "link": "https://stackoverflow.com/users/10907864/promise-preston"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 135, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1565532124, "creation_date": 1548678633, "last_edit_date": 1552067348, "question_id": 54402084, "link": "https://stackoverflow.com/questions/54402084/couldnt-find-category-without-an-id-for-a-rails-e-library-application", "title": "Couldn&#39;t find Category without an ID for a Rails E-Library Application", "body": "<p><a href=\"https://i.stack.imgur.com/UVMks.png\" rel=\"nofollow noreferrer\">Complete Stack Trace Screenshot </a></p>\n\n<p>I'm experiencing some problems while trying to create categories for my books ruby on rails project.</p>\n\n<p>I have been able to create categories for the books, but each time I try to view the categories for the books, I tend to get the error :</p>\n\n<pre><code>**ActiveRecord::RecordNotFound in CategoriesController, \nCouldn't find Category with 'id'=10, \napp/controllers/categories_controller.rb:69:in `set_category**\n</code></pre>\n\n<p>I have tried nesting the books resources into the categories resources in the routes.rb file, but its still not working. I have also tried a lot of solutions, but non seem to work. I don't know what to do next.</p>\n\n<p><strong>This is the routes.rb file code</strong></p>\n\n<pre><code>get 'dashboard/index'\ndevise_for :admins\nresources :categories do\n  resources :books\nend\n</code></pre>\n\n<p><strong>This is the categories_controller.rb file code</strong></p>\n\n<pre><code>class CategoriesController &lt; ApplicationController\n  before_action :set_category, only: [:show, :edit, :update, :destroy]\n  before_action :authenticate_admin!, except: %i[show index]\n  skip_before_action :verify_authenticity_token\n\ndef index\n @categories = Category.all\nend\n\ndef show\nend\n\ndef new\n  @category = Category.new\nend\n\ndef edit\nend\n\ndef create\n  @category = Category.new(category_params)\n\nrespond_to do |format|\n  if @category.save\n    format.html { redirect_to @category, notice: 'Category was successfully created.' }\n    format.json { render :show, status: :created, location: @category }\n  else\n    format.html { render :new }\n    format.json { render json: @category.errors, status: :unprocessable_entity }\n  end\n end\nend\n\ndef update\n respond_to do |format|\n  if @category.update(category_params)\n    format.html { redirect_to @category, notice: 'Category was successfully updated.' }\n    format.json { render :show, status: :ok, location: @category }\n  else\n    format.html { render :edit }\n    format.json { render json: @category.errors, status: :unprocessable_entity }\n  end\n end\nend\n\ndef destroy\n @category.destroy\n respond_to do |format|\n  format.html { redirect_to categories_url, notice: 'Category was successfully destroyed.' }\n  format.json { head :no_content }\n end\nend\n\nprivate\n# Use callbacks to share common setup or constraints between actions.\ndef set_category\n  @category = Category.find(params[:id])\nend\n\n  # Never trust parameters from the scary internet, only allow the white list through.\ndef category_params\n  params.require(:category).permit(:name, :description)\n end\nend\n</code></pre>\n\n<p><strong>This is the books_controller.rb file code</strong></p>\n\n<pre><code>def index\n  @books = Book.all\nend\n\ndef show\nend\n\ndef new\n  @book = Book.new \nend\n\ndef edit\n  @categories = Category.all.map{|c| [ c.name, c.id ] }\nend\n\ndef create\n  @book = Book.new(book_params)\n  @book.category_id = params[:category_id]\n\nrespond_to do |format|\n  if @book.save\n    format.html { redirect_to @book, notice: 'Book was successfully created.' }\n    format.json { render :show, status: :created, location: @book }\n  else\n    format.html { render :new }\n    format.json { render json: @book.errors, status: :unprocessable_entity }\n  end\nend\nend\n\ndef update\n    respond_to do |format|\n      if @book.update(book_params)\n        format.html { redirect_to @book, notice: 'Book was successfully updated.' }\n        format.json { render :show, status: :ok, location: @book }\n      else\n        format.html { render :edit }\n        format.json { render json: @book.errors, status: :unprocessable_entity }\n      end\n    end\n  end\n\n  def destroy\n    @book.destroy\n    respond_to do |format|\n      format.html { redirect_to books_url, notice: 'Book was successfully destroyed.' }\n      format.json { head :no_content }\n    end\n  end\n\nprivate\n# Use callbacks to share common setup or constraints between actions.\ndef set_book\n  @book = Book.find(params[:id])\nend\n\n# Never trust parameters from the scary internet, only allow the white list through.\ndef book_params\n  params.require(:book).permit(:name, :author, :description, :link, :image, :category_id, :new_category_name)\n end\nend\n</code></pre>\n\n<p><strong>This is the _form.hmtl.erb file for the book view</strong></p>\n\n<pre><code>&lt;div class=\"field\"&gt;\n&lt;%= form.collection_select :category_id, Category.all, :id, :name, :prompt =&gt; \"Select Category\" %&gt;\nor create one:\n&lt;%= form.text_field :new_category_name %&gt;\n</code></pre>\n\n<p></p>\n\n<p><strong>This is the edit.html.erb file for the book view</strong></p>\n\n<pre><code>&lt;div class=\"container\"&gt;\n    &lt;div class=\"row\"&gt;\n        &lt;div class=\"col-md-3 col-md-12\"&gt;&lt;/div&gt;\n\n        &lt;div class=\"col-md-6 col-md-12\"&gt;\n        &lt;h1&gt;Editing Book&lt;/h1&gt;\n        &lt;hr&gt;\n\n            &lt;%= render 'form', book: @book %&gt;\n\n            &lt;hr&gt;\n            &lt;%= link_to 'Show Book', @book %&gt; |\n            &lt;%= link_to 'Delete', book, method: :delete, data: { confirm: 'Are you sure?' } %&gt; |\n            &lt;%= link_to 'Back', books_path %&gt;\n\n        &lt;/div&gt;\n\n        &lt;div class=\"col-md-3 col-md-12\"&gt;&lt;/div&gt;\n    &lt;/div&gt;\n&lt;/div&gt;  \n</code></pre>\n\n<p><strong>This is the index.html.erb file for the category view</strong></p>\n\n<pre><code>&lt;div class=\"row listrow\"&gt;\n  &lt;% @categories.each do |category| %&gt;\n    &lt;div class=\"pb_pricing_v1 p-5 border text-center bg-white card\"&gt;\n      &lt;hr&gt;\n      &lt;h3&gt;&lt;%= category.name %&gt;&lt;/h3&gt; &lt;br /&gt;\n          &lt;p class=\"pb_font-15\"&gt;&lt;%=h truncate(category.description, :length =&gt; 100, :omission =&gt; \"\" , :escape =&gt; false) %&gt;...&lt;/p&gt;\n          &lt;%= link_to 'View Category', category, class: \"btn btn-primary btn-block btn-shadow-blue\"  %&gt;&lt;/p&gt;\n    &lt;/div&gt;\n  &lt;% end %&gt;\n</code></pre>\n\n<p>I would appreciate help someone. So that I can view my categories and books created under the categories.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 13378, "user_id": 1430810, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/v669u.jpg?s=128&g=1", "display_name": "arieljuod", "link": "https://stackoverflow.com/users/1430810/arieljuod"}, "edited": false, "score": 1, "creation_date": 1548680469, "post_id": 54401664, "comment_id": 95615523, "body": "You could use a gem like <code>bulk_insert</code> <a href=\"https://github.com/jamis/bulk_insert\" rel=\"nofollow noreferrer\">github.com/jamis/bulk_insert</a> to do multiple inserts in one single SQL query."}, {"owner": {"reputation": 910, "user_id": 917222, "user_type": "registered", "accept_rate": 52, "profile_image": "https://graph.facebook.com/1246054775/picture?type=large", "display_name": "Morad Edwar", "link": "https://stackoverflow.com/users/917222/morad-edwar"}, "reply_to_user": {"reputation": 13378, "user_id": 1430810, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/v669u.jpg?s=128&g=1", "display_name": "arieljuod", "link": "https://stackoverflow.com/users/1430810/arieljuod"}, "edited": false, "score": 0, "creation_date": 1548681121, "post_id": 54401664, "comment_id": 95615899, "body": "@arieljuod can I use to duplicate a list of objects? or it has to be manual creating then use it to commit all of these records in one insert query."}, {"owner": {"reputation": 13378, "user_id": 1430810, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/v669u.jpg?s=128&g=1", "display_name": "arieljuod", "link": "https://stackoverflow.com/users/1430810/arieljuod"}, "edited": false, "score": 0, "creation_date": 1548681363, "post_id": 54401664, "comment_id": 95616038, "body": "You can use your <code>data.each</code> loop to create an array of hashes with the values to insert instead of using dup/save. Then after the loop you&#39;ll have a big array with all the data you want to reinsert. And then you call <code>bulk_insert</code> with all the information."}], "answers": [{"tags": [], "owner": {"reputation": 1330, "user_id": 887947, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ace01b4b1b5759067b48b6b074902e65?s=128&d=identicon&r=PG", "display_name": "Ben Trewern", "link": "https://stackoverflow.com/users/887947/ben-trewern"}, "is_accepted": false, "score": 0, "last_activity_date": 1549502332, "last_edit_date": 1549502332, "creation_date": 1548684113, "answer_id": 54403623, "question_id": 54401664, "link": "https://stackoverflow.com/questions/54401664/how-do-duplicate-clone-activerecordrelation-in-optimized-way/54403623#54403623", "title": "How do duplicate/clone ActiveRecord::Relation in optimized way", "body": "<p>If you want to do this as quickly as possible then SQL is the way to go.</p>\n\n<p>Something like this would do it:</p>\n\n<pre><code>ActiveRecord::Base.connection.execute &lt;&lt;-SQL\n   INSERT INTO my_models (column_1, column_2, column_3, ..)\n      SELECT column_1, 'y', column_3, ..\n      FROM my_models WHERE column_1 = 'x';\nSQL\n</code></pre>\n\n<p>This should work in PostgreSQL and MySql.</p>\n\n<p>If you have any rails magic columns (created_at, updated_at etc) they will have to be added manually in the SQL.</p>\n"}, {"comments": [{"owner": {"reputation": 910, "user_id": 917222, "user_type": "registered", "accept_rate": 52, "profile_image": "https://graph.facebook.com/1246054775/picture?type=large", "display_name": "Morad Edwar", "link": "https://stackoverflow.com/users/917222/morad-edwar"}, "edited": false, "score": 0, "creation_date": 1548834688, "post_id": 54406906, "comment_id": 95680635, "body": "But this approach is executing an insert statement for every record which will make it slow."}, {"owner": {"reputation": 1534, "user_id": 4453714, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fv4Fb.jpg?s=128&g=1", "display_name": "Yurii Verbytskyi", "link": "https://stackoverflow.com/users/4453714/yurii-verbytskyi"}, "reply_to_user": {"reputation": 910, "user_id": 917222, "user_type": "registered", "accept_rate": 52, "profile_image": "https://graph.facebook.com/1246054775/picture?type=large", "display_name": "Morad Edwar", "link": "https://stackoverflow.com/users/917222/morad-edwar"}, "edited": false, "score": 0, "creation_date": 1548837954, "post_id": 54406906, "comment_id": 95682190, "body": "Yes, same as yours( looks like <code>bulk_insert </code> is the best solution"}], "tags": [], "owner": {"reputation": 1534, "user_id": 4453714, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fv4Fb.jpg?s=128&g=1", "display_name": "Yurii Verbytskyi", "link": "https://stackoverflow.com/users/4453714/yurii-verbytskyi"}, "is_accepted": false, "score": 0, "last_activity_date": 1548698646, "last_edit_date": 1548698646, "creation_date": 1548694935, "answer_id": 54406906, "question_id": 54401664, "link": "https://stackoverflow.com/questions/54401664/how-do-duplicate-clone-activerecordrelation-in-optimized-way/54406906#54406906", "title": "How do duplicate/clone ActiveRecord::Relation in optimized way", "body": "<p>If I understood right, you want to duplicate objects that meet condition</p>\n\n<pre><code>(column_1: 'x')\n</code></pre>\n\n<p>You can try this approach, looks like it will do the same</p>\n\n<pre><code>MyModel.where(column_1: 'x').find_each { |u| u.dup.update(column2: 'y') }\n</code></pre>\n\n<p>But a little slower(benchmarked n = 1000)</p>\n\n<pre><code>&lt;Benchmark::Tms:0x00007f96e6a1b970 @label=\"**dup.update**\", @real=6.75463099999979, @cstime=0.0, @cutime=0.0, @stime=0.331546, @utime=2.2468139999999996, @total=2.5783599999999995&gt;,\n\n&lt;Benchmark::Tms:0x00007f96e8cb23f8 @label=\"**dup.save!**\", @real=6.470054999999775, @cstime=0.0, @cutime=0.0, @stime=0.32828900000000005, @utime=1.972385, @total=2.300674&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 910, "user_id": 917222, "user_type": "registered", "accept_rate": 52, "profile_image": "https://graph.facebook.com/1246054775/picture?type=large", "display_name": "Morad Edwar", "link": "https://stackoverflow.com/users/917222/morad-edwar"}, "is_accepted": true, "score": 0, "last_activity_date": 1548843590, "creation_date": 1548843590, "answer_id": 54438217, "question_id": 54401664, "link": "https://stackoverflow.com/questions/54401664/how-do-duplicate-clone-activerecordrelation-in-optimized-way/54438217#54438217", "title": "How do duplicate/clone ActiveRecord::Relation in optimized way", "body": "<p>Short answer is to use <code>single insert statement</code> instead of <code>multiple inserts</code> even though if it's in one DB <code>transaction</code>.</p>\n\n<p>And <a href=\"https://github.com/jamis/bulk_insert\" rel=\"nofollow noreferrer\">bulk_insert</a> gem will help you to do it. ( Thanks to <a href=\"https://stackoverflow.com/users/1430810/arieljuod\">arieljuod</a> ) </p>\n"}], "owner": {"reputation": 910, "user_id": 917222, "user_type": "registered", "accept_rate": 52, "profile_image": "https://graph.facebook.com/1246054775/picture?type=large", "display_name": "Morad Edwar", "link": "https://stackoverflow.com/users/917222/morad-edwar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 187, "favorite_count": 0, "accepted_answer_id": 54438217, "answer_count": 3, "score": 0, "last_activity_date": 1549502332, "creation_date": 1548677188, "last_edit_date": 1548677628, "question_id": 54401664, "link": "https://stackoverflow.com/questions/54401664/how-do-duplicate-clone-activerecordrelation-in-optimized-way", "title": "How do duplicate/clone ActiveRecord::Relation in optimized way", "body": "<p>I want to clone a list of <code>ActiveRecord</code> objects in an optimized way. Maybe the way that I am using is optimized already but I need to speed up this process. So this is my code</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>ActiveRecord::Base.transaction do\n  data = MyModel.where(column_1: 'x')\n  data.each do |item|\n    new_item = item.dup\n    new_item.column_2 = 'y'\n    new_item.save!\n  end\nend\n</code></pre>\n\n<p>Maybe there is a better way of duplicating a list of records at once then update all of them with one query. I tried to Google it but no luck till now.</p>\n"}, {"tags": ["ruby", "null"], "answers": [{"tags": [], "owner": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "is_accepted": false, "score": 1, "last_activity_date": 1548676784, "creation_date": 1548676784, "answer_id": 54401550, "question_id": 54401369, "link": "https://stackoverflow.com/questions/54401369/ruby-how-come-second-piece-of-code-which-is-similar-to-first-one-gives-unde/54401550#54401550", "title": "Ruby: How come second piece of code, which is similar to first one - gives &#39;undefined method&#39; error?", "body": "<p>You are calling a mehtod <code>full_description</code> on a <code>nil</code>. The problem lays in those methods:</p>\n\n<pre><code>   def show_current_description\n       puts \"  Current tarif is: \" +   find_tarif_in_tarifs(@user.choosed_tarif).full_description\n   end\n\n   def find_tarif_in_tarifs(reference)\n       @tarifs[reference]\n   end\n</code></pre>\n\n<p>Youl call <code>full_description</code> on a result of <code>find_tarif_in_tarifs(@user.choosed_tarif)</code>. i.e. on <code>@tarifs[@user.choosed_tarif]</code>. Apparently there is not tariff registered for this user in <code>@tarifs</code> hash.</p>\n\n<p>You have to handle this case - either by checking if returned value is not nil,\n     def show_current_description\n      if  find_tarif_in_tarifs(@user.choosed_tarif)\n          puts \"  Current tarif is: \" +   find_tarif_in_tarifs(@user.choosed_tarif).full_description\n      else\n        puts \"No tariff found\"\n      end</p>\n\n<p>or by returning a default value from <code>find_tarif_in_tarifs</code></p>\n\n<pre><code>   def show_current_description\n     @tarifs.fetch(references, default_tariff) #(you need to define default_tariff method)\n   end\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 10961284, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tYozh.jpg?s=128&g=1", "display_name": "KiRill", "link": "https://stackoverflow.com/users/10961284/kirill"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1548679540, "creation_date": 1548676128, "last_edit_date": 1592644375, "question_id": 54401369, "link": "https://stackoverflow.com/questions/54401369/ruby-how-come-second-piece-of-code-which-is-similar-to-first-one-gives-unde", "title": "Ruby: How come second piece of code, which is similar to first one - gives &#39;undefined method&#39; error?", "body": "<blockquote>\n<p>I don't get it, how &quot;dungeon.rb&quot; runs ok, while &quot;tarifs.rb&quot; crushes with:</p>\n<p>undefined method 'full_description' for nil:NilClass(NoMethodError).</p>\n</blockquote>\n<p>Both piece of code are similar. what is different: Names of classes, some methods names and their arguments.</p>\n<pre><code>### OK piece -&gt; dungeon.rb code\n\nclass Dungeon             \n    attr_accessor :player \n    def initialize(player)\n        @player = player  \n        @rooms  = {}      \n    end\n    def add_room(reference, name, description, connections)\n        @rooms[reference] = Room.new(reference, name, description, connections)\n    end\n    def start(location)            \n        @player.location = location\n        show_current_description    \n    end\n    def show_current_description\n        puts &quot;Location: &quot; + find_room_in_dungeon(@player.location).full_description\n    end\n    def find_room_in_dungeon(reference)\n        @rooms[reference]\n    end\n    def find_room_in_direction(direction)\n        find_room_in_dungeon(@player.location).connections[direction]\n    end  \n    def go(direction)\n        puts &quot;\\nYou go: &quot; + direction.to_s\n        @player.location = find_room_in_direction(direction)\n        show_current_description\n        puts &quot;Where you want to go now? &quot;\n    end\nend\n\nclass Player\n    attr_accessor :name, :location\n    def initialize(name)\n        @name = name\n    end\nend\n\nclass Room\n    attr_accessor :reference, :name, :description, :connections\n    def initialize(reference, name, description, connections)\n        @reference   = reference\n        @name        = name\n        @description = description\n        @connections = connections\n    end\n    def full_description\n        @name + &quot;\\n\\n ** You are in &quot; + @description\n    end\nend\n#######---------------- Creating Player and Dungeon objects ------------------\nputs         &quot;Enter your name&quot;\nusername   = gets.chomp\nplayer     = Player.new(username)\nmy_dungeon = Dungeon.new(player)\n#######---------------- Add rooms to the dungeon ----------------------\nmy_dungeon.add_room(:largecave,\n        &quot;Large Cave&quot;,\n        &quot;a large cavernous cave **&quot;,\n        {:west  =&gt; :smallcave,\n         :south =&gt; :grotto,\n         :east  =&gt; :largecave })\nmy_dungeon.add_room(:smallcave,\n    &quot;Small Cave&quot;,\n        &quot;a small, claustrophobic cave **&quot;,\n        {:west  =&gt; :smallcave, \n         :south =&gt; :grotto,\n         :east  =&gt; :largecave })\nmy_dungeon.add_room(:grotto,\n        &quot;Wet Grotto&quot;,\n        &quot;a medium range grotto with water pool in center **&quot;,\n        {:west  =&gt; :smallcave, \n         :south =&gt; :grotto,\n         :east  =&gt; :largecave })\n\nputs &quot;Your name is: #{player.name}&quot;\n#######------------ Start the dungeon by placing the player in the large cave ------------------------\nmy_dungeon.start(:largecave)\n#######------------- Player navigation ---------------------\nok_input = [:west, :east, :south, :exit]\n\nloop do\n    puts &quot;Choose direction please: &quot;\n    input = gets.chomp.to_sym\n    if ok_input.include?(input)\n        my_dungeon.go(input)\n    elsif ok_input.include?(input) == false\n        puts &quot;Wrong input!!! Allowed input: 'west', 'east', 'south' or 'exit' &quot;\n    end\n    break if input == :exit\nend\n\n\n#### NOT OK piece -&gt; tarifs.rb code\n\nclass Invest\n   attr_accessor :user\n       def initialize(user)\n       @user   = user\n       @tarifs = {}\n   end\n\n   def add_tarif(reference, tname, description, connections, procent, days)\n       @tarifs[reference] = Tarif.new(reference, tname, description, connections, procent, days)\nend\n\n   def start(choosed_tarif)\n       @user.choosed_tarif = choosed_tarif\n       show_current_description\nend\n\n   def show_current_description\n       puts &quot;  Current tarif is: &quot; +   find_tarif_in_tarifs(@user.choosed_tarif).full_description\n   end\n\n   def find_tarif_in_tarifs(reference)\n       @tarifs[reference]\n   end\n\n   def find_tarif_in_direction(direction)\n       find_tarif_in_tarifs(@user.choosed_tarif).connections[direction]\n   end\n\n   def go(direction)\n       puts &quot;\\nYou choosed: &quot; + direction.to_s\n       @user.choosed_tarif = find_tarif_in_direction(direction)\n       show_current_description\n   end\nend\n\nclass User\n   attr_accessor :uname, :choosed_tarif        \n   def initialize(uname)\n       @uname = uname\n   end\nend\n\nclass Tarif\n   attr_accessor :reference, :tname, :description, :connections, :procent, :days\n   def initialize(reference, tname, description, connections, procent, days)\n       @reference   = reference\n       @tname       = tname\n       @description = description\n       @connections = connections\n       @procent     = procent\n       @days        = days\n   end\n\n   def full_description\n      @tname + &quot;\\n  &quot; + @description\n   end\nend\n\n#######-------- Creating User and Invest objects ----------\nputs        &quot;Enter your name&quot;\nuname    =  gets.chomp\nuser     =  User.new(uname)\nmy_tarif =  Invest.new(user)\n\n#######-------- Adding tariffs to the Invest --------------\nmy_tarif.add_tarif(:start,\n                   &quot;Start&quot;,\n                   &quot;Start tarif 2% daily for 3 days in total&quot;,\n                   {:first  =&gt; :start,\n                   :second =&gt; :business,\n                   :third  =&gt; :profi },\n                   2,\n                   3)\nmy_tarif.add_tarif(:business,\n                   &quot;Business&quot;,\n                   &quot;Business tarif 3% daily for 5 days in total&quot;,\n                   {:first  =&gt; :start,\n                    :second =&gt; :business,\n                    :third  =&gt; :profi },\n                    3,\n                    5)\nmy_tarif.add_tarif(:profi,\n                   &quot;Profi&quot;,\n                   &quot;Profi tarif 4% daily for 10 days in total&quot;,\n                   {:first  =&gt; :start,\n                    :second =&gt; :business,\n                    :third  =&gt; :profi },\n                    4,\n                    10)\n\n#######-------- Autostarts with first tarif --------------\nmy_tarif.start(:business)\n\n#######-------- Tarif navigation --------------\nok_input = [:start, :business, :profi, :exit] \nputs &quot;Choose your tarif: &quot;\ninput    = gets.chomp.to_sym\n\nif       input == :start\n         my_tarif.go(input)\n   elsif input == :business\n         my_tarif.go(input)\n   elsif input == :profi\n         my_tarif.go(input)\n   else  puts &quot;Please input 'start', 'business' or 'profi' !!!&quot;\nend\n</code></pre>\n<p>tarifs.rb code must allow to navigate in tarifs.rb - just like dungeon.rb code allows to navigate in rooms. Meanwhile, tarifs.rb output shows folowing:</p>\n<blockquote>\n<p>tarifs.rb:22:in show_current_description': undefined methodfull_description' for nil:NilClass (NoMethodError) from tarifs.rb:36:in go' from tarifs.rb:111:in'</p>\n</blockquote>\n"}, {"tags": ["ruby-on-rails", "ruby", "cart", "spree"], "answers": [{"tags": [], "owner": {"reputation": 13378, "user_id": 1430810, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/v669u.jpg?s=128&g=1", "display_name": "arieljuod", "link": "https://stackoverflow.com/users/1430810/arieljuod"}, "is_accepted": false, "score": 1, "last_activity_date": 1548682035, "last_edit_date": 1548682035, "creation_date": 1548681025, "answer_id": 54402755, "question_id": 54400789, "link": "https://stackoverflow.com/questions/54400789/where-can-i-found-add-to-cart-button-code-on-spree-github-page/54402755#54402755", "title": "Where can I found add to cart button code on Spree github page?", "body": "<p>Cart routes (like adding an item or viewing your current cart) points to the Orders controller.</p>\n\n<p><a href=\"https://github.com/spree/spree/blob/e1b48ddd90706f68bd75b2393b66a23c7c124498/frontend/config/routes.rb#L19\" rel=\"nofollow noreferrer\">routes.rb</a></p>\n\n<pre><code>get '/cart', to: 'orders#edit', as: :cart\npatch '/cart', to: 'orders#update', as: :update_cart\nput '/cart/empty', to: 'orders#empty', as: :empty_cart\n</code></pre>\n\n<p>Here are <a href=\"https://github.com/spree/spree/blob/e1b48ddd90706f68bd75b2393b66a23c7c124498/frontend/app/controllers/spree/orders_controller.rb\" rel=\"nofollow noreferrer\">controller</a> and <a href=\"https://github.com/spree/spree/tree/e1b48ddd90706f68bd75b2393b66a23c7c124498/frontend/app/views/spree/orders\" rel=\"nofollow noreferrer\">views</a></p>\n"}], "owner": {"reputation": 63, "user_id": 10658300, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c6f164d3ffc4a040412c552ed693bc0?s=128&d=identicon&r=PG&f=1", "display_name": "pfc", "link": "https://stackoverflow.com/users/10658300/pfc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 160, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1548682035, "creation_date": 1548674083, "question_id": 54400789, "link": "https://stackoverflow.com/questions/54400789/where-can-i-found-add-to-cart-button-code-on-spree-github-page", "title": "Where can I found add to cart button code on Spree github page?", "body": "<p>Can someone direct me which code in Spree refers to specifically Add To Cart button(in views and controller)?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5", "bundler"], "comments": [{"owner": {"reputation": 1035, "user_id": 5891503, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/830569e0fa440b692ab80005ef9b00cb?s=128&d=identicon&r=PG", "display_name": "reiallenramos", "link": "https://stackoverflow.com/users/5891503/reiallenramos"}, "edited": false, "score": 0, "creation_date": 1548681135, "post_id": 54400745, "comment_id": 95615904, "body": "doesn&#39;t work for me too (Rails 5, ruby 2.4.1). I&#39;ll return when I find something"}, {"owner": {"reputation": 1035, "user_id": 5891503, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/830569e0fa440b692ab80005ef9b00cb?s=128&d=identicon&r=PG", "display_name": "reiallenramos", "link": "https://stackoverflow.com/users/5891503/reiallenramos"}, "edited": false, "score": 0, "creation_date": 1548682059, "post_id": 54400745, "comment_id": 95616475, "body": "&gt; require &#39;aubio&#39; <code>LoadError: Could not open library &#39;&#47;usr&#47;local&#47;Cellar&#47;aubio&#47;0.4.4&#47;lib&#47;libaubio.dylib&#39;: &#47;usr&#47;local&#47;Cellar&#47;aubio&#47;0.4.4&#47;lib&#47;libaubio.dylib: cannot open shared object file: No such file or directory</code> even though <code>gem install</code> was successful"}, {"owner": {"reputation": 4422, "user_id": 1202525, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ccc5db30edf02524aa2a0fb17d154bf8?s=128&d=identicon&r=PG", "display_name": "TomDunning", "link": "https://stackoverflow.com/users/1202525/tomdunning"}, "reply_to_user": {"reputation": 1035, "user_id": 5891503, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/830569e0fa440b692ab80005ef9b00cb?s=128&d=identicon&r=PG", "display_name": "reiallenramos", "link": "https://stackoverflow.com/users/5891503/reiallenramos"}, "edited": false, "score": 0, "creation_date": 1548682326, "post_id": 54400745, "comment_id": 95616619, "body": "You need to <code>brew install aubio</code> first. I think I\u2019ve found my issue. I discovered that if I changed the name of the project directory it worked. Turns out stopping spring (which I didn\u2019t realise was running) fixed the issue. Very weird. I don\u2019t see why spring should interfere with new console session or gems in general"}], "owner": {"reputation": 4422, "user_id": 1202525, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ccc5db30edf02524aa2a0fb17d154bf8?s=128&d=identicon&r=PG", "display_name": "TomDunning", "link": "https://stackoverflow.com/users/1202525/tomdunning"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 59, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1548698574, "creation_date": 1548673949, "last_edit_date": 1548698574, "question_id": 54400745, "link": "https://stackoverflow.com/questions/54400745/bundled-gem-appears-in-gemfile-lock-but-not-available-in-app", "title": "Bundled gem appears in Gemfile.lock but not available in app", "body": "<p>I'm looking to use a couple of new gems in my project, 'ruby-fftw3' and 'aubio'. The project has been happily working away and being extended but now every time I try and add a new gem it's unavailable when I try and call it.</p>\n\n<p>The gems are listed in the Gemfile:</p>\n\n<pre><code>gem 'aubio'\ngem 'ruby-fftw3'\n</code></pre>\n\n<p>When I run <code>bundle install</code> they are listed:</p>\n\n<pre><code>Using aubio 0.3.1\n...\nUsing ruby-fftw3 1.0.2\n\n</code></pre>\n\n<p>Gemfile.lock also contains both items.</p>\n\n<p>However, when I open <code>rails c</code> and try to use the gem they're unavailable:</p>\n\n<pre><code>irb(main):001:0&gt; require 'ruby-fftw3'\nTraceback (most recent call last):\n        1: from (irb):1\nLoadError (cannot load such file -- ruby-fftw3)\nirb(main):002:0&gt; Aubio\nTraceback (most recent call last):\n        1: from (irb):2\nNameError (uninitialized constant Aubio)\n</code></pre>\n\n<p>It also appears that <code>Bundler.require(:default).collect(&amp;:name)</code> does not contain either gem!</p>\n\n<p>I've gone through the Gemfile and can't see any formatting errors and if there were any I don't think bundle install would create a lock file which included them.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "edited": false, "score": 0, "creation_date": 1548672090, "post_id": 54400094, "comment_id": 95611047, "body": "What do you mean by sait?"}, {"owner": {"reputation": 60, "user_id": 9794871, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Dmitrij Verenikin", "link": "https://stackoverflow.com/users/9794871/dmitrij-verenikin"}, "reply_to_user": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "edited": false, "score": 0, "creation_date": 1548672561, "post_id": 54400094, "comment_id": 95611260, "body": "I&#39;m sorry, site of course"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1548672697, "post_id": 54400094, "comment_id": 95611332, "body": "How do you run your app? Puma? Take a look at its config (workers/threads specifically)"}, {"owner": {"reputation": 60, "user_id": 9794871, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Dmitrij Verenikin", "link": "https://stackoverflow.com/users/9794871/dmitrij-verenikin"}, "edited": false, "score": 0, "creation_date": 1548673836, "post_id": 54400094, "comment_id": 95611924, "body": "No, I use WEBrick."}, {"owner": {"reputation": 1377, "user_id": 3011280, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/mkyAT.jpg?s=128&g=1", "display_name": "Oshan Wisumperuma", "link": "https://stackoverflow.com/users/3011280/oshan-wisumperuma"}, "edited": false, "score": 0, "creation_date": 1548677700, "post_id": 54400094, "comment_id": 95614013, "body": "WEBrick is multi-threaded but Rails developers hard-coded a mutex, so it can handle just one request at a time"}, {"owner": {"reputation": 1377, "user_id": 3011280, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/mkyAT.jpg?s=128&g=1", "display_name": "Oshan Wisumperuma", "link": "https://stackoverflow.com/users/3011280/oshan-wisumperuma"}, "edited": false, "score": 0, "creation_date": 1548677773, "post_id": 54400094, "comment_id": 95614052, "body": "<a href=\"https://github.com/ruby/ruby/blob/cff3941b817b976a57f42b374c3dfceff1ad459d/lib/webrick/server.rb#L185\" rel=\"nofollow noreferrer\">github.com/ruby/ruby/blob/&hellip;</a> each request is a new thread"}, {"owner": {"reputation": 60, "user_id": 9794871, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Dmitrij Verenikin", "link": "https://stackoverflow.com/users/9794871/dmitrij-verenikin"}, "edited": false, "score": 0, "creation_date": 1548678077, "post_id": 54400094, "comment_id": 95614192, "body": "WEBrick create a new thread for every user, who log in the site? I right understand?"}, {"owner": {"reputation": 1377, "user_id": 3011280, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/mkyAT.jpg?s=128&g=1", "display_name": "Oshan Wisumperuma", "link": "https://stackoverflow.com/users/3011280/oshan-wisumperuma"}, "edited": false, "score": 0, "creation_date": 1548680620, "post_id": 54400094, "comment_id": 95615603, "body": "a user can create many HTTP/ajax requests based on the application architecture. since each request creates a new thread, there can be multiple threads for a single user."}, {"owner": {"reputation": 1247, "user_id": 2109121, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/zwxKQ.jpg?s=128&g=1", "display_name": "vovan", "link": "https://stackoverflow.com/users/2109121/vovan"}, "edited": false, "score": 0, "creation_date": 1548684760, "post_id": 54400094, "comment_id": 95618038, "body": "What output of <code>pstree</code>?"}, {"owner": {"reputation": 1330, "user_id": 887947, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ace01b4b1b5759067b48b6b074902e65?s=128&d=identicon&r=PG", "display_name": "Ben Trewern", "link": "https://stackoverflow.com/users/887947/ben-trewern"}, "edited": false, "score": 0, "creation_date": 1548687741, "post_id": 54400094, "comment_id": 95619933, "body": "What you are listing are processes not threads.  You can have many threads per process."}], "owner": {"reputation": 60, "user_id": 9794871, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Dmitrij Verenikin", "link": "https://stackoverflow.com/users/9794871/dmitrij-verenikin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 50, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1548742362, "creation_date": 1548671825, "last_edit_date": 1548742362, "question_id": 54400094, "link": "https://stackoverflow.com/questions/54400094/what-can-create-threads-in-rails", "title": "What can create threads in Rails?", "body": "<p>I have the question about threads in ruby.\nI'm supporting the site on RoR. When I looking threads in the command line, I see 3 threads ruby:</p>\n\n<pre><code>  PID USER      PR  NI  VIRT  RES  SHR S  %CPU %MEM    TIME+  COMMAND\n  755 deploy    20   0  395m 190m 3692 S   0.7  9.5   1:25.88 ruby                                                                                                                                                                                                                                                                                       \n16703 deploy    20   0  339m 126m    0 S   0.0  6.3   0:01.91 ruby                                                                                                                                            \n13415 deploy    20   0  272m 117m 1900 S   0.0  5.9   0:22.11 ruby  \n</code></pre>\n\n<p>I don't use Sidekiq or something else, only site.\nI don't create threads in my code.\nIs it correct behaviour in my case?</p>\n\n<p>Update. \nResult pstree:</p>\n\n<pre><code>init\u2500\u252c\u25002*[postgres\u2500\u2500\u25008*[postgres]]\n     \u251c\u2500sshd\u2500\u2500\u25002*[bash\u2500\u2500\u2500tail]\n     \u251c\u2500console-kit-dae\u2500\u2500\u250064*[{console-kit-dae}]\n     \u251c\u25006*[getty]\n     \u251c\u2500java\u2500\u2500\u250040*[{java}]\n     \u251c\u25002*[master\u2500\u252c\u2500pickup]\n     \u2502           \u251c\u2500qmgr]\n     \u2502           \u251c\u2500showq]\n     \u2502           \u2514\u2500tlsmgr]\n     \u251c\u25002*[apache2\u2500\u252c\u2500PassengerAgent\u2500\u252c\u2500PassengerAgent\u2500\u2500\u250019* \n      [{PassengerAgent}]]\n     \u2502            \u2502                \u251c\u2500PassengerAgent\u2500\u2500\u25005* \n      [{PassengerAgent}]]\n     \u2502            \u2502                \u2514\u25005*[{PassengerAgent}]]\n     \u2502            \u2514\u250010*[apache2]]\n     \u251c\u2500bash\u2500\u2500\u2500tail\n     \u251c\u2500acpid\n     \u251c\u2500atd\n     \u251c\u2500cron\n     \u251c\u2500dbus-daemon\n     \u251c\u2500fail2ban-server\u2500\u2500\u25002*[{fail2ban-server}]\n     \u251c\u2500gam_server\n     \u251c\u2500mcelog\n     \u251c\u2500munin-node\n     \u251c\u2500mysqld_safe\u2500\u252c\u2500logger\n     \u2502             \u2514\u2500mysqld\u2500\u2500\u250018*[{mysqld}]\n     \u251c\u2500nrpe\n     \u251c\u2500ntpd\n     \u251c\u2500polkitd\u2500\u2500\u2500{polkitd}\n     \u251c\u2500rpc.idmapd\n     \u251c\u2500rpc.statd\n     \u251c\u2500rpcbind\n     \u251c\u2500rsyslogd\u2500\u2500\u25003*[{rsyslogd}]\n     \u251c\u2500ruby\u2500\u2500\u25004*[{ruby}]\n     \u251c\u25002*[ruby\u2500\u2500\u25003*[{ruby}]]\n     \u251c\u2500snmpd\n     \u251c\u2500sshd\u2500\u252c\u2500sshd\u2500\u2500\u2500sshd\u2500\u2500\u2500bash\u2500\u2500\u2500pstree\n     \u2502      \u2514\u2500sshd\u2500\u2500\u2500bash\u2500\u2500\u2500tail\n     \u251c\u2500udevd\u2500\u2500\u25002*[udevd]\n     \u2514\u2500vnstatd\n</code></pre>\n\n<p>Result pstree -up | less, part with ruby:</p>\n\n<pre><code>  ` |-ruby(755,deploy)-+-{ruby}(758)\n    |                  |-{ruby}(759)\n    |                  |-{ruby}(763)\n    |                  `-{ruby}(764)\n    |-ruby(13415,deploy)-+-{ruby}(13417)\n    |                    |-{ruby}(13420)\n    |                    `-{ruby}(13421)\n    |-ruby(16703,deploy)-+-{ruby}(16706)\n    |                    |-{ruby}(16708)\n    |                    `-{ruby}(16709)`\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 280, "user_id": 743006, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/PioeP.jpg?s=128&g=1", "display_name": "Abolfazl Mahmoodi", "link": "https://stackoverflow.com/users/743006/abolfazl-mahmoodi"}, "edited": false, "score": 0, "creation_date": 1548674010, "post_id": 54400008, "comment_id": 95612018, "body": "in this code  <code>if @client.save         format.js       else         @store = Store.new         3.times {@client.stores.build}         format.js {render &quot;clients&#47;new&quot;}         format.json {render json: @client.errors, status: :unprocessable_entity}       end</code> in if block Client is created only."}, {"owner": {"reputation": 55, "user_id": 8306123, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-h_fpr-XOcyE/AAAAAAAAAAI/AAAAAAAAAE8/5RmhwJRBVeM/photo.jpg?sz=128", "display_name": "Alia Tabassum", "link": "https://stackoverflow.com/users/8306123/alia-tabassum"}, "reply_to_user": {"reputation": 280, "user_id": 743006, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/PioeP.jpg?s=128&g=1", "display_name": "Abolfazl Mahmoodi", "link": "https://stackoverflow.com/users/743006/abolfazl-mahmoodi"}, "edited": false, "score": 0, "creation_date": 1548676633, "post_id": 54400008, "comment_id": 95613415, "body": "yeah client is created. but store table is not getting updated. Insert is not happening is stores table"}], "owner": {"reputation": 55, "user_id": 8306123, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-h_fpr-XOcyE/AAAAAAAAAAI/AAAAAAAAAE8/5RmhwJRBVeM/photo.jpg?sz=128", "display_name": "Alia Tabassum", "link": "https://stackoverflow.com/users/8306123/alia-tabassum"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 30, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1548676563, "creation_date": 1548671536, "last_edit_date": 1548676563, "question_id": 54400008, "link": "https://stackoverflow.com/questions/54400008/rails-nested-form-is-not-inserting-into-database-oracle", "title": "Rails nested form is not inserting into database (oracle)", "body": "<p>I have <code>clients_controller</code> where I have <code>stores</code> associated with it. While inserting data, it is getting inserted only in <code>clients</code> table and not in <code>stores</code> table. How to insert data in stores table. <code>client_code</code> is the foreign key association between the tables.</p>\n\n<p><strong>client.rb</strong></p>\n\n<pre><code>class Client &lt; ActiveRecord::Base\n  extend FriendlyId\n  has_paper_trail\n\n  self.table_name = \"DIM_CLIENT\"\n  self.primary_key = \"client_code\"\n  self.sequence_name = :autogenerated\n\n\n  has_many :stores, class_name: 'Store', foreign_key: 'client_code', dependent: :destroy\n  accepts_nested_attributes_for :stores, allow_destroy: true, reject_if: :stores_blank\n  validates_associated :stores\n\n  validates :client_name, presence: true, uniqueness: {case_sensitive: false}\n  validates :client_code, presence: true, uniqueness: {case_sensitive: false}\n  after_save :set_default_store\n\n  friendly_id :client_code\n\n\nend\n</code></pre>\n\n<p><strong>store.rb</strong></p>\n\n<pre><code>class Store &lt; ActiveRecord::Base\n  extend FriendlyId\n  has_paper_trail\n\n  self.table_name = \"DIM_STORE\"\n  self.primary_key = \"store_id\"\n  self.sequence_name = :autogenerated\n\n  belongs_to :client, class_name: 'Client', foreign_key: 'client_code'\n\n\n  validates :store_name, presence: true, uniqueness: { case_sensitive: false }\n  validates :store_id, presence: true, uniqueness: { case_sensitive: false }\n  validates :client, presence: false\n\n  friendly_id :store_id\n\n\nend\n</code></pre>\n\n<p><strong>clients_controller.rb</strong></p>\n\n<pre><code>    class ClientsController &lt; ApplicationController\n  protect_from_forgery with: :null_session, if: Proc.new {|c| c.request.format == 'application/json'}\n  before_filter :authenticate_user!, :is_admin\n  before_action :set_client, only: [:show, :edit, :update, :destroy, :set_default_store, :update_default_store]\n\n  # GET /clients/new\n  def new\n    @client = Client.new\n    @store = Store.new\n    3.times {@client.stores.build}\n  end\n\n  # POST /clients\n  # POST /clients.json\n  def create\n    @client = Client.new(client_params)\n    respond_to do |format|\n      @client.valid?\n      if @client.save\n        format.js\n      else\n        @store = Store.new\n        3.times {@client.stores.build}\n        format.js {render \"clients/new\"}\n        format.json {render json: @client.errors, status: :unprocessable_entity}\n      end\n    end\n  end\n\n  def create_success\n    redirect_to request.referrer, notice: 'Client was successfully created.'\n  end\n\n  # PATCH/PUT /clients/1\n  # PATCH/PUT /clients/1.json\n\n  def set_default_store\n    @stores = @client.stores.all.map {|store| store.code}.sort\n  end\n\n  def update_default_store\n    if @client.update(update_default_store_params)\n      redirect_to request.referrer, notice: 'Default Store successfully updated.'\n    else\n      redirect_to request.referrer, alert: 'Default Store could not be updated, Please contact support team.'\n    end\n\n  end\n\n  private\n\n  def set_client\n    @client = Client.friendly.find(params[:id])\n  end\n\n  def client_params\n    params.require(:client).permit(:client_name, :client_code, :enterprise_code, stores_attributes: [:id, :store_name, :store_id, :_destroy])\n  end\n\n  def update_default_store_params\n    params.require(:client).permit(:default_store)\n  end\n\nend\n</code></pre>\n\n<p><strong>form.html.erb</strong></p>\n\n<pre><code>    &lt;%= bootstrap_form_for(@client, layout: :group, label_col: \"col-sm-2\", control_col: \"col-sm-4\", remote:true) do |f| %&gt;\n    &lt;!-- Refer https://github.com/bootstrap-ruby/rails-bootstrap-forms for more on forms--&gt;\n    &lt;div style=\"max-height: 500px; overflow: auto; padding:15px 50px\"&gt;\n      &lt;%= f.text_field :client_name, label: \"Client Name\", required:true%&gt;\n      &lt;%= f.text_field :client_code, label: \"Client Code\", required:true%&gt;\n      &lt;%= f.text_field :enterprise_code, label: \"Enterprise Code\" %&gt;\n      &lt;div class=\"form-group store\" style=\"padding: 0; margin: 0;\"&gt;\n        &lt;label class=\"control-label\"&gt;Stores\n          &lt;strong id=\"storeErrorText\" style=\"color: red\"&gt;\n          &lt;% if @client.errors.full_messages.any? %&gt;\n            &lt;% @client.errors.full_messages.each do |error_message| %&gt;\n              &lt;%= error_message if @client.errors.full_messages.first == error_message %&gt; &lt;br /&gt;\n            &lt;% end %&gt;\n          &lt;% end %&gt;\n          &lt;/strong&gt;\n        &lt;/label&gt;\n        &lt;%= f.fields_for :stores, @store do |store| %&gt;\n            &lt;%= render 'store_fields', :f =&gt; store %&gt;\n        &lt;% end %&gt;\n      &lt;/div&gt;\n      &lt;div class=\"form-group\"&gt;\n        &lt;div class=\"col-sm-5 col-sm-offset-2\" id=\"btn_col\" style=\"margin-left: 0px; padding-left: 0px\"&gt;\n          &lt;%= link_to_add_association 'Add Store', f, :stores, class: 'btn btn-default btn-xs'%&gt;\n        &lt;/div&gt;\n      &lt;/div&gt;\n    &lt;/div&gt;\n    &lt;div class=\"modal-footer\"&gt;\n      &lt;input class=\"btn btn--charcoal-ghost\" type=\"button\" value=\"Close\"  data-dismiss=\"modal\"&gt;\n      &lt;%= f.submit :class=&gt; 'btn btn-default', id:'btnClientOps'%&gt;\n    &lt;/div&gt;\n&lt;% end %&gt;\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "bundler", "ruby-2.5"], "comments": [{"owner": {"reputation": 608, "user_id": 5978922, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HL51a.png?s=128&g=1", "display_name": "nerding_it", "link": "https://stackoverflow.com/users/5978922/nerding-it"}, "edited": false, "score": 0, "creation_date": 1548669538, "post_id": 54399362, "comment_id": 95609560, "body": "Do you mentioned any ruby version in your gemfile? Something like <code>ruby &#39;2.0.0&#39;, :patchlevel =&gt; &#39;353&#39;</code> in your Gemfile"}, {"owner": {"reputation": 49, "user_id": 3916727, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/4cafe0147d037f4027b9d1c07c178af7?s=128&d=identicon&r=PG&f=1", "display_name": "bilal", "link": "https://stackoverflow.com/users/3916727/bilal"}, "reply_to_user": {"reputation": 608, "user_id": 5978922, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HL51a.png?s=128&g=1", "display_name": "nerding_it", "link": "https://stackoverflow.com/users/5978922/nerding-it"}, "edited": false, "score": 0, "creation_date": 1548669723, "post_id": 54399362, "comment_id": 95609658, "body": "just updated my question and yes i do mention ruby version in gemfile"}, {"owner": {"reputation": 198, "user_id": 9254919, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kOgqw.png?s=128&g=1", "display_name": "mogbee", "link": "https://stackoverflow.com/users/9254919/mogbee"}, "edited": false, "score": 0, "creation_date": 1548670862, "post_id": 54399362, "comment_id": 95610339, "body": "Did you add &quot;export PATH=&quot;$HOME/.rbenv/bin:$PATH&quot; in your .bashrc or etc?"}], "answers": [{"comments": [{"owner": {"reputation": 49, "user_id": 3916727, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/4cafe0147d037f4027b9d1c07c178af7?s=128&d=identicon&r=PG&f=1", "display_name": "bilal", "link": "https://stackoverflow.com/users/3916727/bilal"}, "edited": false, "score": 2, "creation_date": 1548669756, "post_id": 54399463, "comment_id": 95609677, "body": "just deleted the Gemfile.lock and tried to run <code>bundle install</code> and got <code>Your Ruby version is 2.6.0, but your Gemfile specified 2.5.0</code>"}], "tags": [], "owner": {"reputation": 5669, "user_id": 7429104, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/TZAPt.jpg?s=128&g=1", "display_name": "Aman", "link": "https://stackoverflow.com/users/7429104/aman"}, "is_accepted": false, "score": 0, "last_activity_date": 1548669618, "creation_date": 1548669618, "answer_id": 54399463, "question_id": 54399362, "link": "https://stackoverflow.com/questions/54399362/your-ruby-version-is-2-6-0-but-your-gemfile-specified-2-5-0/54399463#54399463", "title": "Your Ruby version is 2.6.0, but your Gemfile specified 2.5.0", "body": "<p>Delete <code>Gemfile.lock</code> and try with proper version of ruby and run <code>bundle install</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 176, "user_id": 8540055, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5d4c940ad6c96e49b919ffc37bd85c14?s=128&d=identicon&r=PG&f=1", "display_name": "adarsh", "link": "https://stackoverflow.com/users/8540055/adarsh"}, "is_accepted": false, "score": 1, "last_activity_date": 1548740841, "creation_date": 1548740841, "answer_id": 54414589, "question_id": 54399362, "link": "https://stackoverflow.com/questions/54399362/your-ruby-version-is-2-6-0-but-your-gemfile-specified-2-5-0/54414589#54414589", "title": "Your Ruby version is 2.6.0, but your Gemfile specified 2.5.0", "body": "<p>Run</p>\n\n<pre><code>gem install bundler\n\nor\n\ngem update bundler \n</code></pre>\n\n<p>which may fix your problem.</p>\n"}, {"tags": [], "owner": {"reputation": 528, "user_id": 1259478, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8477d49605b3522c05c4dc157bf3ee6c?s=128&d=identicon&r=PG", "display_name": "Eduardo Sztokbant", "link": "https://stackoverflow.com/users/1259478/eduardo-sztokbant"}, "is_accepted": false, "score": 1, "last_activity_date": 1584210158, "creation_date": 1584210158, "answer_id": 60685955, "question_id": 54399362, "link": "https://stackoverflow.com/questions/54399362/your-ruby-version-is-2-6-0-but-your-gemfile-specified-2-5-0/60685955#60685955", "title": "Your Ruby version is 2.6.0, but your Gemfile specified 2.5.0", "body": "<p>I'm using macOS and managed to solve this problem by using <code>rvm</code> first to install the desired ruby version (2.5.7 in my case).</p>\n\n<p>Step-by-step:</p>\n\n<ul>\n<li>Install rvm from rvm.io - rvm version may be udpated with:</li>\n</ul>\n\n<pre><code>rvm get head\n</code></pre>\n\n<ul>\n<li>Add rvm to your shell configuration, e.g. <code>~/.bash_profile</code>:</li>\n</ul>\n\n<pre><code>PATH=$PATH:$HOME/.rvm/bin\nsource /Users/&lt;YOUR_USER_NAME&gt;/.rvm/scripts/rvm\n</code></pre>\n\n<ul>\n<li>Using rvm, install new Ruby version:</li>\n</ul>\n\n<pre><code>rvm install ruby-2.5.7\n</code></pre>\n\n<ul>\n<li>Set the current/default version:</li>\n</ul>\n\n<pre><code>rvm use ruby-2.5.7 --default\n</code></pre>\n\n<ul>\n<li>Modify your Gemfile to use the new Ruby version. E.g.:</li>\n</ul>\n\n<pre><code>ruby '2.5.7'\n</code></pre>\n\n<ul>\n<li>Refresh the current Ruby version based on ./Gemfile by running:</li>\n</ul>\n\n<pre><code>rvm reload\n</code></pre>\n\n<ul>\n<li>After installing a new version, from your project dir do:</li>\n</ul>\n\n<pre><code>gem install bundler\nbundle update\n</code></pre>\n"}], "owner": {"reputation": 49, "user_id": 3916727, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/4cafe0147d037f4027b9d1c07c178af7?s=128&d=identicon&r=PG&f=1", "display_name": "bilal", "link": "https://stackoverflow.com/users/3916727/bilal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6108, "favorite_count": 0, "answer_count": 3, "score": 2, "last_activity_date": 1584210158, "creation_date": 1548669269, "last_edit_date": 1548669627, "question_id": 54399362, "link": "https://stackoverflow.com/questions/54399362/your-ruby-version-is-2-6-0-but-your-gemfile-specified-2-5-0", "title": "Your Ruby version is 2.6.0, but your Gemfile specified 2.5.0", "body": "<p>Having trouble doing bundle.\nMy project is using 2.5.0 but every time i do <code>ruby -v</code> it gives me <code>ruby 2.6.0p0 (2018-12-25 revision 66547) [x86_64-darwin18]</code></p>\n\n<p>I am using rbenv and my <code>rbenv local</code> is <code>2.5.0</code> and <code>rbenv global</code> is <code>2.5.0</code></p>\n\n<p>Every time I do <code>Bundle</code> gives me an error <code>Your Ruby version is 2.6.0, but your Gemfile specified 2.5.0</code></p>\n\n<p>I have tried <code>gem install bundler</code> but it doesn't solves the problem.</p>\n\n<pre><code>source 'http://rubygems.org'\n\nruby '2.5.0'\ngem 'rails', '5.0'\n</code></pre>\n\n<p>and my .ruby-version is also <code>2.5.0</code></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "edited": false, "score": 0, "creation_date": 1548668673, "post_id": 54398701, "comment_id": 95609063, "body": "You will create objects through controller only so you should provide controller code so it will clear idea how to provide association."}], "answers": [{"tags": [], "owner": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "is_accepted": false, "score": 0, "last_activity_date": 1548667204, "creation_date": 1548667204, "answer_id": 54398767, "question_id": 54398701, "link": "https://stackoverflow.com/questions/54398701/rails-rollback-while-saving-model/54398767#54398767", "title": "Rails rollback while saving model", "body": "<p>Are you sure about this \"no errors\"? In Rails 5, <code>belongs_to</code> association is required by default, so I guess that's because it fails (you don't set <code>user</code> association prior to save attempt). So either you should set <code>license.user</code>, or set:</p>\n\n<pre><code>belongs_to :user, optional: true\n</code></pre>\n\n<p>in <code>License</code> model if your business logic doesn't require it. </p>\n"}, {"comments": [{"owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "edited": false, "score": 0, "creation_date": 1548668762, "post_id": 54398936, "comment_id": 95609116, "body": "Ask OP to provide controller code, it will clear lot, but above will work anyhow well!"}, {"owner": {"reputation": 5669, "user_id": 7429104, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/TZAPt.jpg?s=128&g=1", "display_name": "Aman", "link": "https://stackoverflow.com/users/7429104/aman"}, "reply_to_user": {"reputation": 5, "user_id": 10717372, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3876ca4c7abafe604ca735c5ea547bf2?s=128&d=identicon&r=PG&f=1", "display_name": "3kpvc", "link": "https://stackoverflow.com/users/10717372/3kpvc"}, "edited": false, "score": 0, "creation_date": 1548669434, "post_id": 54398936, "comment_id": 95609497, "body": "@3kpvc Glad to know that , you can try last line solution to overcome with <code>after_create</code>. hopefully that will be more convenient."}], "tags": [], "owner": {"reputation": 5669, "user_id": 7429104, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/TZAPt.jpg?s=128&g=1", "display_name": "Aman", "link": "https://stackoverflow.com/users/7429104/aman"}, "is_accepted": true, "score": 1, "last_activity_date": 1548669197, "last_edit_date": 1548669197, "creation_date": 1548667781, "answer_id": 54398936, "question_id": 54398701, "link": "https://stackoverflow.com/questions/54398701/rails-rollback-while-saving-model/54398936#54398936", "title": "Rails rollback while saving model", "body": "<p>License model contains two foreign key <code>user_id</code> and <code>license_type_id</code></p>\n\n<p>=> Which means before create <code>License</code> there must be a user who own this <code>License</code> as Rails 5 convention says <code>user_id</code> must exist</p>\n\n<p>=> Also there must exist <code>LicenseType</code> as Rails 5 convention says <code>license_type_id</code> must exist</p>\n\n<p>The rollback reasons can be investigated by following </p>\n\n<pre><code>license = License.new(license_types_id: LicenseType.first.id)\nlicense.save\n#Begin\n#ROLLBACK\nerrors_stack = license.errors\n</code></pre>\n\n<p><code>errors_stack</code> contains model level errors which causes rollback</p>\n\n<p>To fix these rollback issue</p>\n\n<pre><code>user = User.first #or current_user\nlicense = user.license.new(license_type_id: LicenseType.first.id)\nlicense.save\n</code></pre>\n\n<p>Or </p>\n\n<pre><code>user = User.first #or current_user\nlicense = License.new(license_type_id: LicenseType.first.id, user_id: user.id)\nlicense.save\n</code></pre>\n\n<p>Or  To create a <code>User</code> and assign the user a <code>License</code> # Alternative of after_create :create_assocs</p>\n\n<pre><code>new_user = User.new(...)\nnew_user.license.build(license_type_id: LicenseType.first.id)\nnew_user.save\n</code></pre>\n"}], "owner": {"reputation": 5, "user_id": 10717372, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3876ca4c7abafe604ca735c5ea547bf2?s=128&d=identicon&r=PG&f=1", "display_name": "3kpvc", "link": "https://stackoverflow.com/users/10717372/3kpvc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 239, "favorite_count": 0, "accepted_answer_id": 54398936, "answer_count": 2, "score": 0, "last_activity_date": 1548669197, "creation_date": 1548666952, "last_edit_date": 1548668419, "question_id": 54398701, "link": "https://stackoverflow.com/questions/54398701/rails-rollback-while-saving-model", "title": "Rails rollback while saving model", "body": "<p>I'm creating a license server, but I stuck with problem, that Rails can't save model.</p>\n\n<p>I set <code>after_create</code> method in <code>User</code> model, but got no luck, also I tried create <code>License</code> model with Rails console, but it rollback transaction and didn't show any error.</p>\n\n<p><strong>models/user.rb</strong></p>\n\n<pre><code>class User &lt; ApplicationRecord\n  # Include default devise modules. Others available are:\n  # :confirmable, :lockable, :timeoutable, :trackable and :omniauthable\n  devise :database_authenticatable, :registerable,\n     :recoverable, :rememberable, :validatable,\n     authentication_keys: [:login]\n\n  attr_writer :login\n  has_one :license, dependent: :destroy\n\n  validates :username, presence: true, uniqueness: { case_sensitive: false }\n  validates_format_of :username, with: /^[a-zA-Z0-9_\\.]*$/, multiline: true\n\n  after_create :create_assocs\n\n  def login\n    @login || self.username\n  end\n\n  def self.find_first_by_auth_conditions(warden_conditions)\n    conditions = warden_conditions.dup\n    if login = conditions.delete(:login)\n      where(conditions).where(['lower(username) = :value OR lower(email) = :value', { value: login.downcase }]).first\n    else\n      if conditions[:username].nil?\n        where(conditions).first\n      else\n        where(username: conditions[:username]).first\n      end\n    end\n  end\n\n  def email_required?\n    false\n  end\n\n  private\n\n  def create_assocs\n    create_license(license_types_id: LicenseType.first.id)\n    # license = License.new(user_id: self.id, license_types_id: 1)\n    # license.save\n    # self.license.create(license_types_id: LicenseType.first.id)\n  end\n    end\n</code></pre>\n\n<p><strong>models/license.rb</strong></p>\n\n<pre><code>class License &lt; ApplicationRecord\n  belongs_to :license_type\n  belongs_to :user\n\n  after_create :set_expired_at\n\n  private\n\n  def set_expired_at\n    # self.expired_at = DateTime.now + self.license_types.duration\n  end\nend\n</code></pre>\n\n<p>in rails console,</p>\n\n<pre><code>2.5.1 :001 &gt; license = License.new(license_types_id: LicenseType.first.id)\n  LicenseType Load (0.4ms)  SELECT  \"license_types\".* FROM \"license_types\" ORDER BY \"license_types\".\"id\" ASC LIMIT $1  [[\"LIMIT\", 1]]\n =&gt; #&lt;License id: nil, expired_at: nil, created_at: nil, updated_at: nil, license_types_id: 1, user_id: nil&gt; \n2.5.1 :002 &gt; license.save\n   (0.5ms)  BEGIN\n   (0.2ms)  ROLLBACK\n =&gt; false \n</code></pre>\n\n<p><strong>schema.rb</strong>,</p>\n\n<pre><code>  create_table \"licenses\", force: :cascade do |t|\n    t.datetime \"expired_at\"\n    t.datetime \"created_at\", null: false\n    t.datetime \"updated_at\", null: false\n    t.bigint \"license_types_id\"\n    t.bigint \"user_id\"\n    t.index [\"license_types_id\"], name: \"index_licenses_on_license_types_id\"\n    t.index [\"user_id\"], name: \"index_licenses_on_user_id\"\n  end\n\n  create_table \"users\", force: :cascade do |t|\n    t.string \"email\", default: \"\"\n    t.string \"encrypted_password\", default: \"\", null: false\n    t.string \"reset_password_token\"\n    t.datetime \"reset_password_sent_at\"\n    t.datetime \"remember_created_at\"\n    t.datetime \"created_at\", null: false\n    t.datetime \"updated_at\", null: false\n    t.string \"username\"\n    t.string \"key\"\n    t.index [\"reset_password_token\"], name: \"index_users_on_reset_password_token\", unique: true\n    t.index [\"username\"], name: \"index_users_on_username\", unique: true\n  end\n\n  add_foreign_key \"licenses\", \"users\"\n</code></pre>\n\n<p>What should I do to set the license for new user after creating?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "devise", "rails-api"], "answers": [{"comments": [{"owner": {"reputation": 191, "user_id": 1863758, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/37f109fd8f398238dd037bae02b54258?s=128&d=identicon&r=PG", "display_name": "divergent", "link": "https://stackoverflow.com/users/1863758/divergent"}, "edited": false, "score": 0, "creation_date": 1548706746, "post_id": 54397705, "comment_id": 95630186, "body": "Knew it was something small and obvious. Thank you."}, {"owner": {"reputation": 109029, "user_id": 2767755, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/BkC8q.jpg?s=128&g=1", "display_name": "Arup Rakshit", "link": "https://stackoverflow.com/users/2767755/arup-rakshit"}, "edited": false, "score": 1, "creation_date": 1563646754, "post_id": 54397705, "comment_id": 100771554, "body": "Why <code>&#39;user&#39;</code> is needed?"}], "tags": [], "owner": {"reputation": 820, "user_id": 2640181, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7599b700aee8e1a534030709ae43616?s=128&d=identicon&r=PG", "display_name": "barmic", "link": "https://stackoverflow.com/users/2640181/barmic"}, "is_accepted": true, "score": 3, "last_activity_date": 1548662563, "creation_date": 1548662563, "answer_id": 54397705, "question_id": 54397648, "link": "https://stackoverflow.com/questions/54397648/why-is-devise-sanitizer-returning-an-empty-hash/54397705#54397705", "title": "Why is devise sanitizer returning an empty hash", "body": "<p>Param <code>user</code> is missing in your params hash:</p>\n\n<pre><code>{\"user\": {\"first_name\"=&gt;\"john\", \"last_name\"=&gt;\"stones\", \"username\"=&gt;\"johnstones\", \"email\"=&gt;\"john@stones.com\"} }\n</code></pre>\n"}], "owner": {"reputation": 191, "user_id": 1863758, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/37f109fd8f398238dd037bae02b54258?s=128&d=identicon&r=PG", "display_name": "divergent", "link": "https://stackoverflow.com/users/1863758/divergent"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 280, "favorite_count": 0, "accepted_answer_id": 54397705, "answer_count": 1, "score": 1, "last_activity_date": 1548662563, "creation_date": 1548662252, "question_id": 54397648, "link": "https://stackoverflow.com/questions/54397648/why-is-devise-sanitizer-returning-an-empty-hash", "title": "Why is devise sanitizer returning an empty hash", "body": "<p>I am writing an API-only Rails 5 application and using the devise-jwt (and devise) gem for user authentication. I am trying to configure strong parameters in my custom registrations_controller. In <code>application_controller.rb</code>:</p>\n\n<pre><code>before_action :configure_permitted_parameters, if: :devise_controller?\n\ndef configure_permitted_parameters\n    devise_parameter_sanitizer.permit(:sign_up, keys: [:first_name, :last_name, :username, :email])\nend\n</code></pre>\n\n<p>And in <code>registrations_controller.rb</code>:</p>\n\n<pre><code>def create\n    build_resource(sign_up_params)\n    resource.save\n    #json response defined in application_controller.rb\n    render_resource(resource)\nend\n</code></pre>\n\n<p>This is the console's output when I make a POST request to the API via Postman:</p>\n\n<p><code>Parameters: {\"first_name\"=&gt;\"john\", \"last_name\"=&gt;\"stones\", \"username\"=&gt;\"johnstones\", \"email\"=&gt;\"john@stones.com\"}</code></p>\n\n<p>And this is the output from printing <code>params</code> to the console:</p>\n\n<p><code>&lt;ActionController::Parameters {\"first_name\"=&gt;\"john\", \"last_name\"=&gt;\"stones\", \"username\"=&gt;\"johnstones\", \"email\"=&gt;\"john@stones.com\", \"controller\"=&gt;\"registrations\", \"action\"=&gt;\"create\"} permitted: false&gt;</code></p>\n\n<p>Despite the above when I do <code>devise_parameter_sanitizer.sanitize(:sign_up)</code> I get an empty hash and my aforementioned POST throws the validation errors I set for having blank fields. Please help me figure out what I'm missing, thank you.</p>\n\n<p>(Rails 5.2/Devise 4.2)</p>\n"}, {"tags": ["android", "ruby", "appium", "appium-android"], "answers": [{"comments": [{"owner": {"reputation": 89, "user_id": 1952816, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Fj4xx.jpg?s=128&g=1", "display_name": "Deepanshu Rawat", "link": "https://stackoverflow.com/users/1952816/deepanshu-rawat"}, "edited": false, "score": 0, "creation_date": 1548665948, "post_id": 54397998, "comment_id": 95607643, "body": "Hi, thanks for replying, I think I might not be able to convey my point properly. My UIAutomator is working fine it&#39;s just that driver is not able to detect address fields after selecting the city from the drop-down (pop-up type) which were detected perfectly by the driver before selecting the city. I&#39;ve attached screenshots for the reference. Looking forward to your reply."}, {"owner": {"reputation": 357, "user_id": 6156035, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BZbLb.png?s=128&g=1", "display_name": "Angusiasty", "link": "https://stackoverflow.com/users/6156035/angusiasty"}, "reply_to_user": {"reputation": 89, "user_id": 1952816, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Fj4xx.jpg?s=128&g=1", "display_name": "Deepanshu Rawat", "link": "https://stackoverflow.com/users/1952816/deepanshu-rawat"}, "edited": false, "score": 0, "creation_date": 1548666807, "post_id": 54397998, "comment_id": 95608111, "body": "I would check what Appium actually sees by getting list of all visible elements with xpath &quot;//*&quot;."}, {"owner": {"reputation": 89, "user_id": 1952816, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Fj4xx.jpg?s=128&g=1", "display_name": "Deepanshu Rawat", "link": "https://stackoverflow.com/users/1952816/deepanshu-rawat"}, "edited": false, "score": 0, "creation_date": 1548740841, "post_id": 54397998, "comment_id": 95639278, "body": "I have tried this xpath thing //* but it&#39;s not working or taking too much time to execute. One more detail would like to add this page is built in hybrid (react), pop up like these are working fine in the native app, but on this hybrid page, it is creating difficulties."}, {"owner": {"reputation": 357, "user_id": 6156035, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BZbLb.png?s=128&g=1", "display_name": "Angusiasty", "link": "https://stackoverflow.com/users/6156035/angusiasty"}, "reply_to_user": {"reputation": 89, "user_id": 1952816, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Fj4xx.jpg?s=128&g=1", "display_name": "Deepanshu Rawat", "link": "https://stackoverflow.com/users/1952816/deepanshu-rawat"}, "edited": false, "score": 0, "creation_date": 1548753187, "post_id": 54397998, "comment_id": 95644667, "body": "That xpath should always work :/ so, you&#39;re saying the page from your screenshots is webview?"}], "tags": [], "owner": {"reputation": 357, "user_id": 6156035, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BZbLb.png?s=128&g=1", "display_name": "Angusiasty", "link": "https://stackoverflow.com/users/6156035/angusiasty"}, "is_accepted": true, "score": 1, "last_activity_date": 1548663997, "creation_date": 1548663997, "answer_id": 54397998, "question_id": 54397426, "link": "https://stackoverflow.com/questions/54397426/elements-are-not-visible-after-selecting-items-from-dropdown-in-android-app/54397998#54397998", "title": "Elements are not visible after selecting items from dropdown in android app", "body": "<p><a href=\"https://issuetracker.google.com/issues/37017411\" rel=\"nofollow noreferrer\">This issue</a> has been there for years and it's up to Google to fix it. </p>\n\n<p>As a workaround you can create a list of object that your dropdown should contain and select item you want with 'down arrow' key. You can then verify what has been picked in textview field.</p>\n"}, {"comments": [{"owner": {"reputation": 248, "user_id": 6275985, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Gs7TzA40-wo/AAAAAAAAAAI/AAAAAAAABas/xBIyaZU21Bk/photo.jpg?sz=128", "display_name": "Surendra Deshpande", "link": "https://stackoverflow.com/users/6275985/surendra-deshpande"}, "edited": false, "score": 0, "creation_date": 1548789375, "post_id": 54416026, "comment_id": 95666433, "body": "Seems weird but I too experienced the same issue and this worked like a charm. Thanks Shrirang :)"}], "tags": [], "owner": {"reputation": 198, "user_id": 7760415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed29f500ece755d9fa20c4cbc2e3b08a?s=128&d=identicon&r=PG&f=1", "display_name": "Shrirang ", "link": "https://stackoverflow.com/users/7760415/shrirang"}, "is_accepted": false, "score": 3, "last_activity_date": 1548753463, "last_edit_date": 1548753463, "creation_date": 1548747593, "answer_id": 54416026, "question_id": 54397426, "link": "https://stackoverflow.com/questions/54397426/elements-are-not-visible-after-selecting-items-from-dropdown-in-android-app/54416026#54416026", "title": "Elements are not visible after selecting items from dropdown in android app", "body": "<p>This is a bug in Appium. As a workaround,\nafter closing the popup/dialog, if we put the app in background and resume it  . i.e. clicking home button and opening the app again from recent apps, Appium will start detecting the elements again.</p>\n"}], "owner": {"reputation": 89, "user_id": 1952816, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Fj4xx.jpg?s=128&g=1", "display_name": "Deepanshu Rawat", "link": "https://stackoverflow.com/users/1952816/deepanshu-rawat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 244, "favorite_count": 0, "accepted_answer_id": 54397998, "answer_count": 2, "score": 1, "last_activity_date": 1548753463, "creation_date": 1548661116, "last_edit_date": 1548665610, "question_id": 54397426, "link": "https://stackoverflow.com/questions/54397426/elements-are-not-visible-after-selecting-items-from-dropdown-in-android-app", "title": "Elements are not visible after selecting items from dropdown in android app", "body": "<p>There is a city field (drop down) in the address section, after clicking on it a pop up will open in which I can select the city after selecting city I'm not able to select any of the address elements.</p>\n\n<pre><code>def selecting state\n      puts \"Selecting State \"\n      puts  @utilities.is_element_present(\"id\",get_selector(:address_1)) #returns true\n      find_element(id:  get_selector(:province)).click #open dropdown\n      sleep 1.5\n      find_elements(id: \"android:id/text1\")[0].click . #select first state \n      sleep 2\n      puts  @utilities.is_element_present(\"id\",get_selector(:address_1))\n#returns false   \n    end\n</code></pre>\n\n<p>Ideally, address1 field should be true even after selecting the state.</p>\n\n<p><a href=\"https://i.stack.imgur.com/e6tpt.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/e6tpt.png\" alt=\"enter image description here\"></a>\n<a href=\"https://i.stack.imgur.com/ncPw2.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ncPw2.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1548658830, "post_id": 54396745, "comment_id": 95604809, "body": "By data type you mean the element&#39;s class?"}, {"owner": {"reputation": 14111, "user_id": 5783745, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/Z5VSF.jpg?s=128&g=1", "display_name": "stevec", "link": "https://stackoverflow.com/users/5783745/stevec"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1548659682, "post_id": 54396745, "comment_id": 95605124, "body": "@Stefan I believe so (I used data type just in case class meant something more specific that I wasn&#39;t aware of). Looks like class is what I meant (have edited question / title to reflect)"}], "answers": [{"tags": [], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "is_accepted": true, "score": 7, "last_activity_date": 1548657860, "creation_date": 1548657860, "answer_id": 54396779, "question_id": 54396745, "link": "https://stackoverflow.com/questions/54396745/how-to-get-the-most-common-class-among-elements/54396779#54396779", "title": "How to get the most common class among elements", "body": "<pre><code>array.group_by(&amp;:class).max_by{|k, v| v.length}.first\n# =&gt; Integer\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 4, "last_activity_date": 1548658794, "creation_date": 1548658794, "answer_id": 54396950, "question_id": 54396745, "link": "https://stackoverflow.com/questions/54396745/how-to-get-the-most-common-class-among-elements/54396950#54396950", "title": "How to get the most common class among elements", "body": "<pre><code>array.each_with_object(Hash.new(0)) { |e,h| h[e.class] += 1 }.\n      max_by(&amp;:last).\n      first\n        #=&gt; Integer \n</code></pre>\n\n<p>the first step being</p>\n\n<pre><code>array.each_with_object(Hash.new(0)) { |e,h| h[e.class] += 1 }\n  #=&gt; {NilClass=&gt;1, String=&gt;2, Integer=&gt;3, Float=&gt;1} \n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1548659104, "post_id": 54396978, "comment_id": 95604908, "body": "This will call <code>count</code> for each element, thus traversing the array multiple times."}, {"owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1548660191, "post_id": 54396978, "comment_id": 95605290, "body": "@Stefan Thanks, correction done, query changed which take less time to execute!"}, {"owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1548660412, "post_id": 54396978, "comment_id": 95605378, "body": "@Stefan I checked above with benchmark, worked great but I am curious/unclear to know that how ` h[:z] += 1` works for <code>h = Hash.new(0)</code> but not for <code>h = {}</code>"}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 1, "creation_date": 1548664764, "post_id": 54396978, "comment_id": 95607084, "body": "If you are concerned with the speed, try with a much larger array (where the speed should actually matter in real life), for example <code>array * 100000</code>, and see what happens."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1548665303, "post_id": 54396978, "comment_id": 95607338, "body": "@ray <code>h[:z] += 1</code> is short for <code>h[:z] = h[:z] + 1</code>. For an empty hash without a default value, this becomes <code>h[:z] = nil + 1</code>."}, {"owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1548668031, "post_id": 54396978, "comment_id": 95608733, "body": "@Stefan but <code>h = Hash.new(0)</code> also create empty hash so why worked for it? It worked for <code>h[&lt;any_key&gt;] + 1</code>."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 2, "creation_date": 1548668154, "post_id": 54396978, "comment_id": 95608806, "body": "@ray but it has a default value of <code>0</code> so <code>h[:z] = h[:z] + 1</code> becomes <code>h[:z] = 0 + 1</code> on the first invocation."}, {"owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1548670158, "post_id": 54396978, "comment_id": 95609930, "body": "@sawa yes agreed, I got your point too. In some cases, performance varies when data expands, above is checked for small array, may vary for bigger one."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1548670526, "post_id": 54396978, "comment_id": 95610147, "body": "You have to run each benchmark multiple times to get a meaningful result. Wrap each test in <code>50_000.times { ... }</code> and see what happens. (<code>inject</code> and <code>each_with_object</code> should be almost identical and <code>group_by</code> should be slightly faster)"}, {"owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1548670804, "post_id": 54396978, "comment_id": 95610307, "body": "@Stefan Thanks for giving time! it will be appreciated, if you provide any link to guide how to use benchmark effectively!"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 2, "creation_date": 1548700531, "post_id": 54396978, "comment_id": 95627300, "body": "<code>&#39;each_by_object&#39;</code> should be <code>...max_by(&amp;:last)</code>, not <code>...max_by()</code>. I suggest you add <code>require &#39;benchmark&#39;</code>."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1548701121, "post_id": 54396978, "comment_id": 95627554, "body": "@sawa, for <code>array*100000</code>, the &quot;total&quot; (or &quot;real&quot;) results are as follows: &quot;group_by&quot;: 0.27; &quot;each_with_object&quot;: 0.49; &quot;inject&quot;: 0.49."}, {"owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1548738790, "post_id": 54396978, "comment_id": 95638737, "body": "@CarySwoveland thanks prof., I suspect it will vary behaviour for small and big data (like happen for sorting algo.), I will update to remove unnecessary benchmark in answer!"}], "tags": [], "owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "is_accepted": false, "score": 1, "last_activity_date": 1548738851, "last_edit_date": 1548738851, "creation_date": 1548658920, "answer_id": 54396978, "question_id": 54396745, "link": "https://stackoverflow.com/questions/54396745/how-to-get-the-most-common-class-among-elements/54396978#54396978", "title": "How to get the most common class among elements", "body": "<p>Following can also work,</p>\n\n<pre><code>array.inject(Hash.new(0)) { |h,v| h[v.class] += 1; h }.max_by(&amp;:last).first\n</code></pre>\n"}], "owner": {"reputation": 14111, "user_id": 5783745, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/Z5VSF.jpg?s=128&g=1", "display_name": "stevec", "link": "https://stackoverflow.com/users/5783745/stevec"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 1, "accepted_answer_id": 54396779, "answer_count": 3, "score": 1, "last_activity_date": 1548738851, "creation_date": 1548657674, "last_edit_date": 1548660567, "question_id": 54396745, "link": "https://stackoverflow.com/questions/54396745/how-to-get-the-most-common-class-among-elements", "title": "How to get the most common class among elements", "body": "<p>How can I get the most common data type (i.e. class) among the elements of an array? For example, for this array:</p>\n\n<pre><code>array = [nil, \"string\", 1, 3, 0.234, 25, \"hot potato\"]\n</code></pre>\n\n<p><code>Integer</code> should be returned since it's the most common class.</p>\n"}]