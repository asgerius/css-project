[{"tags": ["html", "css", "ruby-on-rails", "ruby", "material-design"], "comments": [{"owner": {"reputation": 48397, "user_id": 1123505, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2C22p.jpg?s=128&g=1", "display_name": "Michael Coker", "link": "https://stackoverflow.com/users/1123505/michael-coker"}, "edited": false, "score": 0, "creation_date": 1502319141, "post_id": 45601781, "comment_id": 78163067, "body": "Can you provide us with a demo that reproduces the problem? I put this together and am not seeing it <a href=\"https://codepen.io/mcoker/pen/KvmbWX?editors=1010\" rel=\"nofollow noreferrer\">codepen.io/mcoker/pen/KvmbWX?editors=1010</a>"}, {"owner": {"reputation": 168, "user_id": 4308078, "user_type": "registered", "profile_image": "https://graph.facebook.com/100002856360575/picture?type=large", "display_name": "Simon Landry", "link": "https://stackoverflow.com/users/4308078/simon-landry"}, "reply_to_user": {"reputation": 48397, "user_id": 1123505, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2C22p.jpg?s=128&g=1", "display_name": "Michael Coker", "link": "https://stackoverflow.com/users/1123505/michael-coker"}, "edited": false, "score": 0, "creation_date": 1502319814, "post_id": 45601781, "comment_id": 78163297, "body": "I think this bug has something to do with how MDL was integrated into my project which is through <a href=\"https://github.com/cllns/material_design_lite-rails\" rel=\"nofollow noreferrer\">this</a> gem. Simply including the link into my layout like you did seems to fix my problem."}], "answers": [{"tags": [], "owner": {"reputation": 168, "user_id": 4308078, "user_type": "registered", "profile_image": "https://graph.facebook.com/100002856360575/picture?type=large", "display_name": "Simon Landry", "link": "https://stackoverflow.com/users/4308078/simon-landry"}, "is_accepted": true, "score": 0, "last_activity_date": 1502492153, "creation_date": 1502492153, "answer_id": 45644818, "question_id": 45601781, "link": "https://stackoverflow.com/questions/45601781/material-design-lite-drawer-breaks-website-on-nav-link-click/45644818#45644818", "title": "Material Design Lite drawer breaks website on nav link click", "body": "<p>I fixed my website by disabling Turbolinks from my app. There is most likely a workaround but AFAIK MDL doesn't support Turbolinks by default.</p>\n"}], "owner": {"reputation": 168, "user_id": 4308078, "user_type": "registered", "profile_image": "https://graph.facebook.com/100002856360575/picture?type=large", "display_name": "Simon Landry", "link": "https://stackoverflow.com/users/4308078/simon-landry"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "accepted_answer_id": 45644818, "answer_count": 1, "score": 0, "last_activity_date": 1502492153, "creation_date": 1502318879, "question_id": 45601781, "link": "https://stackoverflow.com/questions/45601781/material-design-lite-drawer-breaks-website-on-nav-link-click", "title": "Material Design Lite drawer breaks website on nav link click", "body": "<p>I have encountered a weird bug while making the layout for my Ruby on Rails app.</p>\n\n<p>This is my current layout:</p>\n\n<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html lang=\"en\"&gt;\n  &lt;head&gt;\n    &lt;meta charset=\"utf-8\"&gt;\n    &lt;title&gt;test&lt;/title&gt;\n    &lt;%= csrf_meta_tags %&gt;\n    &lt;%= stylesheet_link_tag    'application', media: 'all', 'data-turbolinks-track': 'reload' %&gt;\n    &lt;%= javascript_include_tag 'application', 'data-turbolinks-track': 'reload' %&gt;\n  &lt;/head&gt;\n  &lt;body&gt;\n    &lt;div class=\"mdl-layout mdl-js-layout mdl-layout--fixed-drawer\"&gt;\n      &lt;header class=\"mdl-layout__header\"&gt;\n        &lt;div class=\"mdl-layout__header-row\"&gt;\n          &lt;span class=\"mdl-layout-title\"&gt;CTC151&lt;/span&gt;\n        &lt;/div&gt;\n      &lt;/header&gt;\n      &lt;div class=\"mdl-layout__drawer\"&gt;\n        &lt;span class=\"mdl-layout-title\"&gt;Test&lt;/span&gt;\n        &lt;nav class=\"mdl-navigation\"&gt;\n          &lt;%= link_to('Home', root_path, class: 'mdl-navigation__link') %&gt;\n          &lt;%= link_to('News', news_index_path, class: 'mdl-navigation__link') %&gt;\n          &lt;%= link_to('Departments', root_path, class: 'mdl-navigation__link') %&gt;\n        &lt;/nav&gt;\n      &lt;/div&gt;\n    &lt;/div&gt;\n  &lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>Clicking any link in the navigation drawer will break my layout like so: <a href=\"https://i.stack.imgur.com/xsZky.png\" rel=\"nofollow noreferrer\">before</a>, <a href=\"https://i.stack.imgur.com/nL8e8.png\" rel=\"nofollow noreferrer\">after</a>. The whole website becomes confined into that small space at the top. I have removed any personalized stylesheet to make sure it's not the source of the problem. The only stylesheet are the MDL ones and MDL icons</p>\n"}, {"tags": ["ruby", "regex", "gsub", "substitution"], "comments": [{"owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 1, "creation_date": 1502314686, "post_id": 45600973, "comment_id": 78161426, "body": "Try <a href=\"http://ideone.com/RA3o51\" rel=\"nofollow noreferrer\"><code>str.gsub!(&#47;\\b(\\d[[:space:]]*-[[:space:]]*)(\\d)\\b&#47;, &#39;0\\10\\2&#39;)</code></a>"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 1, "creation_date": 1502314763, "post_id": 45600973, "comment_id": 78161458, "body": "@WiktorStribi\u017cew Don&#39;t forget the dash. Otherwise looks good and should be posted as an answer."}], "answers": [{"tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": true, "score": 3, "last_activity_date": 1502314742, "creation_date": 1502314742, "answer_id": 45601032, "question_id": 45600973, "link": "https://stackoverflow.com/questions/45600973/how-do-i-use-gsub-to-make-multiple-substiuttions/45601032#45601032", "title": "How do I use &#39;gsub&#39; to make multiple substiuttions?", "body": "<p>You could probably get away with this:</p>\n\n<pre><code>def dashreplace(str)\n  str.sub(/\\b(\\d)\\-(\\d)\\b/) do |s|\n    '%02d-%02d' % [ $1.to_i, $2.to_i ]\n  end\nend\n\ndashreplace('1-2')\n# =&gt; \"01-02\"\ndashreplace('1-20')\n# =&gt; \"1-20\"\ndashreplace('99-1,2-3')\n# =&gt; \"99-1,02-03\"\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1502335202, "post_id": 45601163, "comment_id": 78166999, "body": "If you can do it with regex, that is better. It is not over-complication in this case. Switching to arrays and back is more complicated than doing it within the domain of strings."}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1502353008, "post_id": 45601163, "comment_id": 78174808, "body": "It depends on the wider context. If you need to perform the operation on a larger string, e.g <code>&quot;1-2 foo 23-1 bar 0-99&quot;</code> then I&#39;d use a gsub/regex. If it&#39;s always on a simple string like this - but you might want to add more &quot;complex&quot; logic, such as varying the &quot;digits length&quot; or &quot;split character&quot; - then I&#39;d go with my approach. To be honest, as the question currently stands, I&#39;d consider any of the answers here acceptable."}], "tags": [], "owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "is_accepted": false, "score": 2, "last_activity_date": 1502316914, "last_edit_date": 1502316914, "creation_date": 1502315414, "answer_id": 45601163, "question_id": 45600973, "link": "https://stackoverflow.com/questions/45600973/how-do-i-use-gsub-to-make-multiple-substiuttions/45601163#45601163", "title": "How do I use &#39;gsub&#39; to make multiple substiuttions?", "body": "<p>Is there really a need to use regex here, at all? Seems like an over-complication to me. Assuming you know the string will be in the format: <code>&lt;digits&gt;&lt;hyphen&gt;&lt;digits&gt;</code>, you could do:</p>\n\n<pre><code>def pad_digits(string)\n  left_digits, right_digits = string.split('-')\n  if left_digits.length &gt; 1 || right_digits.length &gt; 1\n    string\n  else\n    \"%02d-%02d\" % [left_digits, right_digits]\n  end\nend\n\npad_digits(\"1-3\") # =&gt; \"01-03\"\npad_digits(\"1-10\") # =&gt; \"1-10\"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 1, "last_activity_date": 1502322130, "last_edit_date": 1502322130, "creation_date": 1502317466, "answer_id": 45601541, "question_id": 45600973, "link": "https://stackoverflow.com/questions/45600973/how-do-i-use-gsub-to-make-multiple-substiuttions/45601541#45601541", "title": "How do I use &#39;gsub&#39; to make multiple substiuttions?", "body": "<p>This is a variant of @TomLord's answer.</p>\n\n<pre><code>def pad_single_digits(str)\n  str.size &gt; 3 ? str : \"0%d-0%d\" % str.split('-')\nend\n\npad_single_digits \"1-3\"  #=&gt; \"01-03\"\npad_single_digits \"1-10\" #=&gt; \"1-10\"\n</code></pre>\n\n<p><code>\"0%s-0%s\"</code> also works.</p>\n"}, {"tags": [], "owner": {"reputation": 79972, "user_id": 298607, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/DVW9g.jpg?s=128&g=1", "display_name": "dawg", "link": "https://stackoverflow.com/users/298607/dawg"}, "is_accepted": false, "score": 0, "last_activity_date": 1502341333, "creation_date": 1502341333, "answer_id": 45604846, "question_id": 45600973, "link": "https://stackoverflow.com/questions/45600973/how-do-i-use-gsub-to-make-multiple-substiuttions/45604846#45604846", "title": "How do I use &#39;gsub&#39; to make multiple substiuttions?", "body": "<p>You can do:</p>\n\n<pre><code>def nums(s)\n   rtr=s[/^(\\d)(\\D+)(\\d)$/] ? '0%s%s0%s' % [$1,$2,$3] : s\nend \n</code></pre>\n"}], "owner": {"reputation": 16802, "user_id": 1235929, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/9f460ae7deb6fa19034c810a53b9fbac?s=128&d=identicon&r=PG", "display_name": "Dave", "link": "https://stackoverflow.com/users/1235929/dave"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "accepted_answer_id": 45601032, "answer_count": 4, "score": 1, "last_activity_date": 1502341333, "creation_date": 1502314472, "last_edit_date": 1502334991, "question_id": 45600973, "link": "https://stackoverflow.com/questions/45600973/how-do-i-use-gsub-to-make-multiple-substiuttions", "title": "How do I use &#39;gsub&#39; to make multiple substiuttions?", "body": "<p>I have a string that only contains one number on either side of <code>\"-\"</code>, like:</p>\n\n<pre><code>\"1-3\"\n</code></pre>\n\n<p>I want to get a result like</p>\n\n<pre><code>\"01-03\"\n</code></pre>\n\n<p>If the string had two numbers on one side of the dash like:</p>\n\n<pre><code>\"1-10\"\n</code></pre>\n\n<p>then I don't want to make any substitutions. I could do a <code>gsub</code> expression like</p>\n\n<pre><code>str.gsub!(/(^|[^\\d]])\\d[[:space:]]*\\-[[:space:]]*\\d([^\\d]|$)/, '\\1')\n</code></pre>\n\n<p>but I'm not clear how to do it if there are multiple (e.g. two) things to substitute.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 51013, "user_id": 976775, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30bd66ad1795804aebe249d8bcb14409?s=128&d=identicon&r=PG", "display_name": "MrYoshiji", "link": "https://stackoverflow.com/users/976775/mryoshiji"}, "edited": false, "score": 1, "creation_date": 1502311370, "post_id": 45600192, "comment_id": 78159936, "body": "Your scope is not a real scope because it returns the first found CurrencyRate record. Remove that <code>.first</code> in your scope. You can see in your IRB that there are 2 generated SQL queries, one with the limit 1 (because of your <code>.first</code>) and another just doing &quot;select all from current_rates&quot;"}, {"owner": {"reputation": 51, "user_id": 8441839, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdb64f2094f504819be043075314ad47?s=128&d=identicon&r=PG&f=1", "display_name": "Damian", "link": "https://stackoverflow.com/users/8441839/damian"}, "reply_to_user": {"reputation": 51013, "user_id": 976775, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30bd66ad1795804aebe249d8bcb14409?s=128&d=identicon&r=PG", "display_name": "MrYoshiji", "link": "https://stackoverflow.com/users/976775/mryoshiji"}, "edited": false, "score": 0, "creation_date": 1502313098, "post_id": 45600192, "comment_id": 78160758, "body": "I understand it now. Thanks."}], "answers": [{"comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 2, "creation_date": 1502311653, "post_id": 45600234, "comment_id": 78160064, "body": "or just make it a class instance method e.g. <code>def self.eur_today</code> since the &quot;scope&quot; name seems to suggest the intention is to return the rate of the Euro as of today. Although I would probably make this <code>def self.currency_value(currency,as_of=Time.now.in_time_zone.to_&zwnj;&#8203;date)</code> so that it can be reused better"}, {"owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1502311673, "post_id": 45600234, "comment_id": 78160077, "body": "Yep, that&#39;s an alternative"}, {"owner": {"reputation": 51, "user_id": 8441839, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdb64f2094f504819be043075314ad47?s=128&d=identicon&r=PG&f=1", "display_name": "Damian", "link": "https://stackoverflow.com/users/8441839/damian"}, "edited": false, "score": 0, "creation_date": 1502313028, "post_id": 45600234, "comment_id": 78160722, "body": "I tried both ways. I understand now how scopes work. Thanks."}], "tags": [], "owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "is_accepted": false, "score": 2, "last_activity_date": 1502311066, "creation_date": 1502311066, "answer_id": 45600234, "question_id": 45600192, "link": "https://stackoverflow.com/questions/45600192/rails-scope-doesnt-return-correct-data/45600234#45600234", "title": "Rails scope doesn&#39;t return correct data", "body": "<p>Because scopes must return an <code>ActiveRecord::Relation</code>. Get rid of the <code>first</code> call in your scope and use that outside the scope. Why? Because scopes have to be chainable.</p>\n"}], "owner": {"reputation": 51, "user_id": 8441839, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdb64f2094f504819be043075314ad47?s=128&d=identicon&r=PG&f=1", "display_name": "Damian", "link": "https://stackoverflow.com/users/8441839/damian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 88, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1502311066, "creation_date": 1502310902, "question_id": 45600192, "link": "https://stackoverflow.com/questions/45600192/rails-scope-doesnt-return-correct-data", "title": "Rails scope doesn&#39;t return correct data", "body": "<p>When I use scope which I prepared in model, rails returns incorrect data.</p>\n\n<p>My Model:</p>\n\n<pre><code>class CurrencyRate &lt; ActiveRecord::Base\n    scope :eur_today, -&gt; {where(currency: \"eur\").where(date: Time.now.in_time_zone.to_date).first}\nend\n</code></pre>\n\n<p>Inforamation from rails console:</p>\n\n<pre><code>2.3.0 :011 &gt; CurrencyRate.eur_today\n\nCurrencyRate Load (0.2ms)  SELECT  \"currency_rates\".* FROM \n\"currency_rates\" WHERE \"currency_rates\".\"currency\" = ? AND \n\"currency_rates\".\"date\" = ?  ORDER BY \"currency_rates\".\"id\" ASC LIMIT 1  \n[[\"currency\", \"eur\"], [\"date\", \"2017-08-09\"]]\nCurrencyRate Load (0.2ms)  SELECT \"currency_rates\".* FROM \n\"currency_rates\"\n\n =&gt; #&lt;ActiveRecord::Relation [#&lt;CurrencyRate id: 2, currency: \"eur\", \n sale: 4.248546249999998, purchase: 4.265333125, date: \"2017-08-08\", \n created_at: \"2017-08-08 20:52:08\", updated_at: \"2017-08-08 20:54:10\", \n sale_percentage_diff: nil, purchase_percentage_diff: nil&gt;]&gt;\n</code></pre>\n\n<p>When I use the same query like in scope, returned data is correct:</p>\n\n<pre><code>2.3.0 :012 &gt; CurrencyRate.where(currency: \"eur\").where(date: Time.now.in_time_zone.to_date).first \n\nCurrencyRate Load (0.2ms)  SELECT  \"currency_rates\".* FROM \n\"currency_rates\" WHERE \"currency_rates\".\"currency\" = ? AND \n\"currency_rates\".\"date\" = ?  ORDER BY \"currency_rates\".\"id\" ASC LIMIT 1  \n[[\"currency\", \"eur\"], [\"date\", \"2017-08-09\"]]\n\n=&gt; nil \n</code></pre>\n\n<p>Why scope doesn't work correct?</p>\n"}, {"tags": ["ruby", "makefile"], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 7906706, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c2a4c53c10f54444f8a8ad8651c2d94?s=128&d=identicon&r=PG&f=1", "display_name": "choboy11", "link": "https://stackoverflow.com/users/7906706/choboy11"}, "edited": false, "score": 0, "creation_date": 1502313778, "post_id": 45600482, "comment_id": 78161010, "body": "yes sorry, I wasn&#39;t sure if the github was still active. If a moderator is around, feel free to delete this thread ."}], "tags": [], "owner": {"reputation": 270, "user_id": 1325339, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c76f91c37fd0a6386de232f58f585ab0?s=128&d=identicon&r=PG", "display_name": "Andy", "link": "https://stackoverflow.com/users/1325339/andy"}, "is_accepted": false, "score": 1, "last_activity_date": 1502312028, "creation_date": 1502312028, "answer_id": 45600482, "question_id": 45599915, "link": "https://stackoverflow.com/questions/45599915/could-not-create-makefile-due-to-some-reason-error-when-i-try-to-install-a/45600482#45600482", "title": "&quot;Could not create Makefile due to some reason,...&quot; error when I try to install a gem", "body": "<p>This is a duplicate of this issue: <a href=\"https://github.com/andymeneely/squib/issues/232\" rel=\"nofollow noreferrer\">https://github.com/andymeneely/squib/issues/232</a></p>\n"}], "owner": {"reputation": 11, "user_id": 7906706, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c2a4c53c10f54444f8a8ad8651c2d94?s=128&d=identicon&r=PG&f=1", "display_name": "choboy11", "link": "https://stackoverflow.com/users/7906706/choboy11"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3493, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1502312028, "creation_date": 1502309846, "question_id": 45599915, "link": "https://stackoverflow.com/questions/45599915/could-not-create-makefile-due-to-some-reason-error-when-i-try-to-install-a", "title": "&quot;Could not create Makefile due to some reason,...&quot; error when I try to install a gem", "body": "<p>when I try to download a ruby gem, i get this error</p>\n\n<pre><code>RaviAir:~ ravi$ gem install squib\nBuilding native extensions.  This could take a while...\nERROR:  Error installing squib:\n    ERROR: Failed to build gem native extension.\n\n    current directory: /Users/ravi/.rvm/gems/ruby-2.4.0/gems/cairo-1.15.9/ext/cairo\n/Users/ravi/.rvm/rubies/ruby-2.4.0/bin/ruby -r ./siteconf20170809-20153-okwab6.rb extconf.rb\nchecking for GCC... yes\nchecking for Win32 OS... no\nchecking for cairo version (&gt;= 1.2.0)... yes\n*** extconf.rb failed ***\nCould not create Makefile due to some reason, probably lack of necessary\nlibraries and/or headers.  Check the mkmf.log file for more details.  You may\nneed configuration options.\n\nProvided configuration options:\n    --with-opt-dir\n    --with-opt-include\n    --without-opt-include=${opt-dir}/include\n    --with-opt-lib\n    --without-opt-lib=${opt-dir}/lib\n    --with-make-prog\n    --without-make-prog\n    --srcdir=.\n    --curdir\n    --ruby=/Users/ravi/.rvm/rubies/ruby-2.4.0/bin/$(RUBY_BASE_NAME)\n    --with-pkg-config\n    --without-pkg-config\n    --with-override-variables\n    --without-override-variables\n/Users/ravi/.rvm/gems/ruby-2.4.0/gems/pkg-config-1.2.4/lib/pkg-config.rb:299:in `parse_pc': .pc for zlib doesn't exist. (RuntimeError)\n    from /Users/ravi/.rvm/gems/ruby-2.4.0/gems/pkg-config-1.2.4/lib/pkg-config.rb:196:in `declaration'\n    from /Users/ravi/.rvm/gems/ruby-2.4.0/gems/pkg-config-1.2.4/lib/pkg-config.rb:210:in `collect_cflags'\n    from /Users/ravi/.rvm/gems/ruby-2.4.0/gems/pkg-config-1.2.4/lib/pkg-config.rb:145:in `cflags'\n    from /Users/ravi/.rvm/gems/ruby-2.4.0/gems/pkg-config-1.2.4/lib/pkg-config.rb:212:in `block in collect_cflags'\n    from /Users/ravi/.rvm/gems/ruby-2.4.0/gems/pkg-config-1.2.4/lib/pkg-config.rb:211:in `collect'\n    from /Users/ravi/.rvm/gems/ruby-2.4.0/gems/pkg-config-1.2.4/lib/pkg-config.rb:211:in `collect_cflags'\n    from /Users/ravi/.rvm/gems/ruby-2.4.0/gems/pkg-config-1.2.4/lib/pkg-config.rb:145:in `cflags'\n    from /Users/ravi/.rvm/gems/ruby-2.4.0/gems/pkg-config-1.2.4/lib/pkg-config.rb:215:in `block in collect_cflags'\n    from /Users/ravi/.rvm/gems/ruby-2.4.0/gems/pkg-config-1.2.4/lib/pkg-config.rb:214:in `collect'\n    from /Users/ravi/.rvm/gems/ruby-2.4.0/gems/pkg-config-1.2.4/lib/pkg-config.rb:214:in `collect_cflags'\n    from /Users/ravi/.rvm/gems/ruby-2.4.0/gems/pkg-config-1.2.4/lib/pkg-config.rb:154:in `cflags_only_other'\n    from /Users/ravi/.rvm/gems/ruby-2.4.0/gems/pkg-config-1.2.4/lib/pkg-config.rb:452:in `cflags_only_other'\n    from /Users/ravi/.rvm/gems/ruby-2.4.0/gems/pkg-config-1.2.4/lib/pkg-config.rb:499:in `have_package'\n    from extconf.rb:52:in `required_pkg_config_package'\n    from extconf.rb:60:in `&lt;main&gt;'\n\nTo see why this extension failed to compile, please check the mkmf.log which can be found here:\n\n  /Users/ravi/.rvm/gems/ruby-2.4.0/extensions/x86_64-darwin-14/2.4.0/cairo-1.15.9/mkmf.log\n\nextconf failed, exit code 1\n\nGem files will remain installed in /Users/ravi/.rvm/gems/ruby-2.4.0/gems/cairo-1.15.9 for inspection.\nResults logged to /Users/ravi/.rvm/gems/ruby-2.4.0/extensions/x86_64-darwin-14/2.4.0/cairo-1.15.9/gem_make.out\n</code></pre>\n\n<p>and then i checked the log file and it says : </p>\n\n<pre><code>checking for GCC... -------------------- yes\n\n\"gcc -o conftest -I/Users/ravi/.rvm/rubies/ruby-2.4.0/include/ruby-2.4.0/x86_64-darwin14 -I/Users/ravi/.rvm/rubies/ruby-2.4.0/include/ruby-2.4.0/ruby/backward -I/Users/ravi/.rvm/rubies/ruby-2.4.0/include/ruby-2.4.0 -I.  -I/usr/local/opt/libyaml/include -I/usr/local/opt/readline/include -I/usr/local/opt/libksba/include -I/usr/local/opt/openssl@1.1/include -D_XOPEN_SOURCE -D_DARWIN_C_SOURCE -D_DARWIN_UNLIMITED_SELECT -D_REENTRANT   -O3 -fno-fast-math -ggdb3 -Wall -Wextra -Wno-unused-parameter -Wno-parentheses -Wno-long-long -Wno-missing-field-initializers -Wno-tautological-compare -Wno-parentheses-equality -Wno-constant-logical-operand -Wno-self-assign -Wunused-variable -Wimplicit-int -Wpointer-arith -Wwrite-strings -Wdeclaration-after-statement -Wshorten-64-to-32 -Wimplicit-function-declaration -Wdivision-by-zero -Wdeprecated-declarations -Wextra-tokens  -fno-common -pipe conftest.c  -L. -L/Users/ravi/.rvm/rubies/ruby-2.4.0/lib -L/usr/local/opt/libyaml/lib -L/usr/local/opt/readline/lib -L/usr/local/opt/libksba/lib -L/usr/local/opt/openssl@1.1/lib -L. -fstack-protector -L/usr/local/lib -L/usr/local/opt/libyaml/lib -L/usr/local/opt/readline/lib -L/usr/local/opt/libksba/lib -L/usr/local/opt/openssl@1.1/lib     -lruby.2.4.0  -lpthread -lgmp -ldl -lobjc \"\nchecked program was:\n/* begin */\n1: #include \"ruby.h\"\n2: \n3: int main(int argc, char **argv)\n4: {\n5:   return 0;\n6: }\n/* end */\n\n\"gcc -I/Users/ravi/.rvm/rubies/ruby-2.4.0/include/ruby-2.4.0/x86_64-darwin14 -I/Users/ravi/.rvm/rubies/ruby-2.4.0/include/ruby-2.4.0/ruby/backward -I/Users/ravi/.rvm/rubies/ruby-2.4.0/include/ruby-2.4.0 -I.  -I/usr/local/opt/libyaml/include -I/usr/local/opt/readline/include -I/usr/local/opt/libksba/include -I/usr/local/opt/openssl@1.1/include -D_XOPEN_SOURCE -D_DARWIN_C_SOURCE -D_DARWIN_UNLIMITED_SELECT -D_REENTRANT   -O3 -fno-fast-math -ggdb3 -Wall -Wextra -Wno-unused-parameter -Wno-parentheses -Wno-long-long -Wno-missing-field-initializers -Wno-tautological-compare -Wno-parentheses-equality -Wno-constant-logical-operand -Wno-self-assign -Wunused-variable -Wimplicit-int -Wpointer-arith -Wwrite-strings -Wdeclaration-after-statement -Wshorten-64-to-32 -Wimplicit-function-declaration -Wdivision-by-zero -Wdeprecated-declarations -Wextra-tokens  -fno-common -pipe   -c conftest.c\"\nchecked program was:\n/* begin */\n1: #include \"ruby.h\"\n2: \n3: /*top*/\n4: #ifndef __GNUC__\n5: # error\n6: |:/ === __GNUC__ undefined === /:|\n7: #endif\n/* end */\n\n--------------------\n\nchecking for Win32 OS... -------------------- no\n\n--------------------\n\nhave_package: checking for cairo version (&gt;= 1.2.0)... -------------------- yes\n\n--------------------\n</code></pre>\n\n<p>I've made sure that Xcode commands are installed but I don't think I have Xcode the application installed(not sure if that makes sense), i've downloaded and updated homebrew.</p>\n\n<p>I think the error is </p>\n\n<pre><code>/Users/ravi/.rvm/gems/ruby-2.4.0/gems/pkg-config-1.2.4/lib/pkg-config.rb:299:in `parse_pc': .pc for zlib doesn't exist.\n</code></pre>\n\n<p>I opened it using a text editor \"sublime\".\nbut i'm not sure how to fix this. Please help.</p>\n\n<p>Some more details: I'm using ruby 2.4, I have OS X Yosemite version 10.10.5.</p>\n"}, {"tags": ["ruby", "api", "token", "access-token"], "answers": [{"tags": [], "owner": {"reputation": 2216, "user_id": 7165275, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d8ad41f944f38348a30791dc7f7d02c?s=128&d=identicon&r=PG&f=1", "display_name": "m. simon borg", "link": "https://stackoverflow.com/users/7165275/m-simon-borg"}, "is_accepted": false, "score": 1, "last_activity_date": 1502324123, "creation_date": 1502324123, "answer_id": 45602520, "question_id": 45598947, "link": "https://stackoverflow.com/questions/45598947/how-do-you-get-a-dev-token-on-product-hunt/45602520#45602520", "title": "How do you get a dev token on Product Hunt?", "body": "<p>You need to sign in to Product Hunt. Then on the docs page you linked to, there is a section that reads: </p>\n\n<blockquote>\n  <p>But\u2026 i just wanted to run a simple script?</p>\n  \n  <p>The oauth2 flow is a bit of a overkill if you just want to run a few\n  scripts We provide a developer_token (does not expire, linked to your\n  account) in the <a href=\"https://www.producthunt.com/v1/oauth/applications\" rel=\"nofollow noreferrer\">app dashboard</a></p>\n</blockquote>\n\n<p>Click that link, create your app, and you should be able to create your token.</p>\n"}], "owner": {"reputation": 3, "user_id": 7728841, "user_type": "registered", "accept_rate": 25, "profile_image": "https://graph.facebook.com/10101548005112853/picture?type=large", "display_name": "Kurt", "link": "https://stackoverflow.com/users/7728841/kurt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 233, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1502324123, "creation_date": 1502306203, "question_id": 45598947, "link": "https://stackoverflow.com/questions/45598947/how-do-you-get-a-dev-token-on-product-hunt", "title": "How do you get a dev token on Product Hunt?", "body": "<p>I'm trying to pull some information with a little Ruby code on Product Hunt and I need a dev token. How can I get access to one? The api docs are super confusing....</p>\n\n<p><a href=\"https://api.producthunt.com/v1/docs\" rel=\"nofollow noreferrer\">https://api.producthunt.com/v1/docs</a></p>\n"}, {"tags": ["ruby-on-rails", "arrays", "ruby", "ruby-on-rails-5", "destroy"], "comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1502308143, "post_id": 45598941, "comment_id": 78158384, "body": "what defines <code>currencies_from_feed</code> assuming the <code>all_currencies</code> is literally <code>Currency.all</code> there is probably a clean scope that can be written to handle the collection of &quot;unused_currencies&quot; and then it is simple <code>Currency.unused_currencies.destroy_all</code> but without additional information it will be hard to help"}], "answers": [{"tags": [], "owner": {"reputation": 982, "user_id": 5593651, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/b3d52652da756a37015aa16befd6d620?s=128&d=identicon&r=PG&f=1", "display_name": "TheCog", "link": "https://stackoverflow.com/users/5593651/thecog"}, "is_accepted": false, "score": 0, "last_activity_date": 1502306404, "creation_date": 1502306404, "answer_id": 45598998, "question_id": 45598941, "link": "https://stackoverflow.com/questions/45598941/in-rails-how-do-i-delete-all-the-objects-in-an-array/45598998#45598998", "title": "In Rails, how do I delete all the objects in an array?", "body": "<p>Destroy_all is for active-record type things. </p>\n\n<p>What exactly are you trying to do? if you just want to get rid of the array, you can override it with </p>\n\n<p><code>unused_currencies = []</code></p>\n\n<p>If you're trying to destroy a bunch of active record objects in the array you're going to have to iterate over it and delete each object individually. </p>\n"}, {"comments": [{"owner": {"reputation": 16802, "user_id": 1235929, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/9f460ae7deb6fa19034c810a53b9fbac?s=128&d=identicon&r=PG", "display_name": "Dave", "link": "https://stackoverflow.com/users/1235929/dave"}, "edited": false, "score": 0, "creation_date": 1502306466, "post_id": 45599005, "comment_id": 78157536, "body": "Excuse me, I dont&#39; want to clear the array, I want to delete all the objects in the array from the database."}, {"owner": {"reputation": 1670, "user_id": 6388521, "user_type": "registered", "accept_rate": 69, "profile_image": "https://lh4.googleusercontent.com/-VdFWPJVSpRc/AAAAAAAAAAI/AAAAAAAAAFo/vCc8QOz6v9Y/photo.jpg?sz=128", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/6388521/ruslan"}, "reply_to_user": {"reputation": 16802, "user_id": 1235929, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/9f460ae7deb6fa19034c810a53b9fbac?s=128&d=identicon&r=PG", "display_name": "Dave", "link": "https://stackoverflow.com/users/1235929/dave"}, "edited": false, "score": 0, "creation_date": 1502306621, "post_id": 45599005, "comment_id": 78157609, "body": "@Dave Then use the second one"}, {"owner": {"reputation": 16802, "user_id": 1235929, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/9f460ae7deb6fa19034c810a53b9fbac?s=128&d=identicon&r=PG", "display_name": "Dave", "link": "https://stackoverflow.com/users/1235929/dave"}, "edited": false, "score": 0, "creation_date": 1502307130, "post_id": 45599005, "comment_id": 78157881, "body": "How many SQL statements will that create?  Is it possible to delete everything in just one SQL statement?"}, {"owner": {"reputation": 1670, "user_id": 6388521, "user_type": "registered", "accept_rate": 69, "profile_image": "https://lh4.googleusercontent.com/-VdFWPJVSpRc/AAAAAAAAAAI/AAAAAAAAAFo/vCc8QOz6v9Y/photo.jpg?sz=128", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/6388521/ruslan"}, "reply_to_user": {"reputation": 16802, "user_id": 1235929, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/9f460ae7deb6fa19034c810a53b9fbac?s=128&d=identicon&r=PG", "display_name": "Dave", "link": "https://stackoverflow.com/users/1235929/dave"}, "edited": false, "score": 0, "creation_date": 1502307231, "post_id": 45599005, "comment_id": 78157935, "body": "@Dave Yes, if you map all the ID&#39;s together but the items in array MUST be from the same model"}], "tags": [], "owner": {"reputation": 1670, "user_id": 6388521, "user_type": "registered", "accept_rate": 69, "profile_image": "https://lh4.googleusercontent.com/-VdFWPJVSpRc/AAAAAAAAAAI/AAAAAAAAAFo/vCc8QOz6v9Y/photo.jpg?sz=128", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/6388521/ruslan"}, "is_accepted": false, "score": 0, "last_activity_date": 1502307329, "last_edit_date": 1502307329, "creation_date": 1502306429, "answer_id": 45599005, "question_id": 45598941, "link": "https://stackoverflow.com/questions/45598941/in-rails-how-do-i-delete-all-the-objects-in-an-array/45599005#45599005", "title": "In Rails, how do I delete all the objects in an array?", "body": "<p><code>destroy_all</code> works for the <code>ActiveRecord::Relation</code></p>\n\n<p>If you want to clear the array, you can do: <code>unused_currencies = []</code></p>\n\n<p>If you want to delete each item in the in the array: \n<code>unused_currencies.each(&amp;:destroy)</code>. This will generate a delete query per item.</p>\n\n<p>To delete all the objects at once (assuming they all belong to the same model. This will blow up in your face if they don't!)</p>\n\n<pre><code>unused_currencies.first.class.destroy_all(unused_currencies.map(&amp;:id))\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 13441, "user_id": 2199600, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8sl6u.jpg?s=128&g=1", "display_name": "Igor Drozdov", "link": "https://stackoverflow.com/users/2199600/igor-drozdov"}, "is_accepted": true, "score": 6, "last_activity_date": 1502307339, "creation_date": 1502307339, "answer_id": 45599264, "question_id": 45598941, "link": "https://stackoverflow.com/questions/45598941/in-rails-how-do-i-delete-all-the-objects-in-an-array/45599264#45599264", "title": "In Rails, how do I delete all the objects in an array?", "body": "<p>This code will make a single SQL query:</p>\n\n<pre><code>unused_currencies = all_currencies - currencies_from_feed\nCurrencyModel.delete(unused_currencies)\n</code></pre>\n\n<p>where <code>CurrencyModel</code> is the model of your currencies.</p>\n\n<p>You might want to use <code>destroy</code> if you need to run callbacks on the models:</p>\n\n<pre><code>unused_currencies = all_currencies - currencies_from_feed\nCurrencyModel.destroy(unused_currencies.map(&amp;:id))\n</code></pre>\n\n<p>This code will make a number of queries proportional to the number of unused currencies</p>\n"}, {"tags": [], "owner": {"reputation": 343, "user_id": 3840725, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5un6e.jpg?s=128&g=1", "display_name": "jpheos", "link": "https://stackoverflow.com/users/3840725/jpheos"}, "is_accepted": false, "score": 0, "last_activity_date": 1502320434, "creation_date": 1502320434, "answer_id": 45602023, "question_id": 45598941, "link": "https://stackoverflow.com/questions/45598941/in-rails-how-do-i-delete-all-the-objects-in-an-array/45602023#45602023", "title": "In Rails, how do I delete all the objects in an array?", "body": "<p>If you use <code>map</code>, you load in memory all data. I think you can just do:</p>\n\n<pre><code>all_currencies.where.not(id: currencies_from_feed.select(:id)).destroy_all\n</code></pre>\n\n<p>if <code>all_currencies</code> and <code>currencies_from_feed</code> are <em>ActiveRecord::Relation</em>, this will generate <strong>only one request sql</strong>.</p>\n"}], "owner": {"reputation": 16802, "user_id": 1235929, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/9f460ae7deb6fa19034c810a53b9fbac?s=128&d=identicon&r=PG", "display_name": "Dave", "link": "https://stackoverflow.com/users/1235929/dave"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4358, "favorite_count": 0, "accepted_answer_id": 45599264, "answer_count": 4, "score": 0, "last_activity_date": 1502331586, "creation_date": 1502306181, "last_edit_date": 1502331586, "question_id": 45598941, "link": "https://stackoverflow.com/questions/45598941/in-rails-how-do-i-delete-all-the-objects-in-an-array", "title": "In Rails, how do I delete all the objects in an array?", "body": "<p>I am using Rails 5 and I want to delete an array of objects. In a previous thread, I read \"destroy_all\" was the truth and the light. I had two arrays of objects, which I subtract to get a third array</p>\n\n<pre><code>  unused_currencies = all_currencies - currencies_from_feed\n  unused_currencies.destroy_all\n</code></pre>\n\n<p>but when using <code>destroy_all</code> I got this error:</p>\n\n<pre><code>NoMethodError: undefined method `destroy_all' for #&lt;Array:0x007feea8878770&gt;\n</code></pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1502306085, "post_id": 45598700, "comment_id": 78157335, "body": "&quot;I have a method which is meant to return the substring after every &#39;r&#39;&quot; So what&#39;s the expected output for your example?"}], "answers": [{"comments": [{"owner": {"reputation": 757, "user_id": 6939256, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/e25b477a55a8048071d22e032ecf22f0?s=128&d=identicon&r=PG&f=1", "display_name": "Benjamints", "link": "https://stackoverflow.com/users/6939256/benjamints"}, "edited": false, "score": 0, "creation_date": 1502305967, "post_id": 45598849, "comment_id": 78157272, "body": "Sorry, I had to make a major edit. didn&#39;t include my problem I am trying to solve which is relevant to the original question."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 757, "user_id": 6939256, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/e25b477a55a8048071d22e032ecf22f0?s=128&d=identicon&r=PG&f=1", "display_name": "Benjamints", "link": "https://stackoverflow.com/users/6939256/benjamints"}, "edited": false, "score": 0, "creation_date": 1502306382, "post_id": 45598849, "comment_id": 78157494, "body": "Please clarify the question (with an edit). I don&#39;t see how it has changed with your last edit. In your example you used offsets <code>[1,2,3,4]</code>. Readers may wonder if those indices are necessarily sequential. If not, it would be better to use something like <code>1,3,4,6</code>."}, {"owner": {"reputation": 6460, "user_id": 6320039, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/U4QjP.jpg?s=128&g=1", "display_name": "Ulysse BN", "link": "https://stackoverflow.com/users/6320039/ulysse-bn"}, "edited": false, "score": 0, "creation_date": 1502306652, "post_id": 45598849, "comment_id": 78157628, "body": "@CarySwoveland in this case, would <code>&quot;awesome&quot;.chars[*array].join</code> also work ?"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 6460, "user_id": 6320039, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/U4QjP.jpg?s=128&g=1", "display_name": "Ulysse BN", "link": "https://stackoverflow.com/users/6320039/ulysse-bn"}, "edited": false, "score": 1, "creation_date": 1502307057, "post_id": 45598849, "comment_id": 78157844, "body": "@UlysseBN, see <a href=\"http://ruby-doc.org/core-2.4.0/Array.html#method-i-5B-5D\" rel=\"nofollow noreferrer\">Array#&#91;&#93;</a>. What happens for <code>[&#39;a&#39;,&#39;b&#39;,&#39;c&#39;,&#39;d&#39;][0,2,3]</code>? Try it."}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": true, "score": 5, "last_activity_date": 1502305987, "last_edit_date": 1502305987, "creation_date": 1502305794, "answer_id": 45598849, "question_id": 45598700, "link": "https://stackoverflow.com/questions/45598700/how-to-return-the-substrings-from-these-indexes/45598849#45598849", "title": "How to return the substring(s) from these indexes", "body": "<pre><code>array = [1,2,3,4,6]\n\n\"awesome\".chars.values_at(*array).join\n  #=&gt; \"wesoe\"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "is_accepted": false, "score": 1, "last_activity_date": 1502310091, "creation_date": 1502310091, "answer_id": 45599989, "question_id": 45598700, "link": "https://stackoverflow.com/questions/45598700/how-to-return-the-substrings-from-these-indexes/45599989#45599989", "title": "How to return the substring(s) from these indexes", "body": "<pre><code>[1, 2, 3, 4].each_with_object(\"\"){|i, s| s &lt;&lt; \"awesome\"[i]}\n# =&gt; \"weso\"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 79972, "user_id": 298607, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/DVW9g.jpg?s=128&g=1", "display_name": "dawg", "link": "https://stackoverflow.com/users/298607/dawg"}, "is_accepted": false, "score": 0, "last_activity_date": 1502312635, "creation_date": 1502312635, "answer_id": 45600600, "question_id": 45598700, "link": "https://stackoverflow.com/questions/45598700/how-to-return-the-substrings-from-these-indexes/45600600#45600600", "title": "How to return the substring(s) from these indexes", "body": "<p>For a contiguous substring don't forget you can slice a string:</p>\n\n<pre><code>&gt; \"awesome\"[1..4]\n=&gt; \"weso\"\n</code></pre>\n\n<p>And to return the character after a match, don't forget you can use a regex:</p>\n\n<pre><code>&gt; \"Katy Perry is on the radio!\".scan(/(?&lt;=r)./)\n=&gt; [\"r\", \"y\", \"a\"]\n</code></pre>\n"}], "owner": {"reputation": 757, "user_id": 6939256, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/e25b477a55a8048071d22e032ecf22f0?s=128&d=identicon&r=PG&f=1", "display_name": "Benjamints", "link": "https://stackoverflow.com/users/6939256/benjamints"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "accepted_answer_id": 45598849, "answer_count": 3, "score": 0, "last_activity_date": 1502312635, "creation_date": 1502305204, "last_edit_date": 1502306508, "question_id": 45598700, "link": "https://stackoverflow.com/questions/45598700/how-to-return-the-substrings-from-these-indexes", "title": "How to return the substring(s) from these indexes", "body": "<p>To return the substring using an index, we can do this like so</p>\n\n<pre><code>string = \"hello\"\nstring[0] returns \"h\"\nstring[1] returns \"e\"\n(and so on...)\n</code></pre>\n\n<p>Let's say I had an array [1,2,3,4] and a string \"awesome\". How would I return the relevant substring(s) from the array?</p>\n\n<pre><code>[1,2,3,4] should return \"weso\"\n</code></pre>\n\n<p>This is because I have a method which is meant to return the substring after every \"r\" and it is failing:</p>\n\n<p>You can see that I have found the indexes for every substring \"r\" and  it is returned as an array. The line below  is incrementing each value in the array by +1.</p>\n\n<p>I now need to return the substrings from the string by the relevant indexes from the array. </p>\n\n<pre><code>def pirates_say_arrrrrrrrr(string)\n\n  all_index = (0 ... string.length).find_all {|i| string[i] ==  \"r\"}\n  y = all_index.map do |i| i + 1\n  end\n  string[y.first..y.last]\nend\n\n# pirates_say_arrrrrrrrr(\"are you really learning Ruby?\") # =&gt; \"eenu\"\n# pirates_say_arrrrrrrrr(\"Katy Perry is on the radio!\")   # =&gt; \"rya\"\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3", "associations"], "comments": [{"owner": {"reputation": 2216, "user_id": 7165275, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d8ad41f944f38348a30791dc7f7d02c?s=128&d=identicon&r=PG&f=1", "display_name": "m. simon borg", "link": "https://stackoverflow.com/users/7165275/m-simon-borg"}, "edited": false, "score": 0, "creation_date": 1502306551, "post_id": 45598559, "comment_id": 78157574, "body": "does a <code>Driver</code> <code>has_one :supervisor</code>? Or does that association not matter?"}], "answers": [{"comments": [{"owner": {"reputation": 323, "user_id": 1934168, "user_type": "registered", "accept_rate": 16, "profile_image": "https://www.gravatar.com/avatar/a8e85918d3db651edd04097020cbf5f1?s=128&d=identicon&r=PG", "display_name": "Hilmi Yamc\u0131", "link": "https://stackoverflow.com/users/1934168/hilmi-yamc%c4%b1"}, "edited": false, "score": 0, "creation_date": 1502307445, "post_id": 45599175, "comment_id": 78158060, "body": "Thank you it works. I have found another solution. has_many :drivers, primary_key: :&#39;company_id&#39;, foreign_key: :&#39;company_id&#39; this creates the query as what I expect"}], "tags": [], "owner": {"reputation": 2216, "user_id": 7165275, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d8ad41f944f38348a30791dc7f7d02c?s=128&d=identicon&r=PG&f=1", "display_name": "m. simon borg", "link": "https://stackoverflow.com/users/7165275/m-simon-borg"}, "is_accepted": true, "score": 2, "last_activity_date": 1502307033, "creation_date": 1502307033, "answer_id": 45599175, "question_id": 45598559, "link": "https://stackoverflow.com/questions/45598559/ruby-on-rails-self-join-associations/45599175#45599175", "title": "Ruby On Rails self join associations", "body": "<p>You can do a <code>has_many :through</code> through a <code>belongs_to</code> association.</p>\n\n<p>For example this will allow you to access a <code>Supervisor</code>'s <code>drivers</code> and <code>chefs</code> from the same company. You will not be able to go backwards and find a <code>Driver</code>'s <code>supervisor</code>.</p>\n\n<pre><code>class Company &lt; ApplicationRecord\n  has_many :employees\nend\n\nclass Employee &lt; ApplicationRecord\n  belongs_to :company\nend\n\nclass Chef &lt; Employee\nend\n\nclass Driver &lt; Employee\nend\n\nclass Supervisor &lt; Employee\n  has_many :drivers, through: :company, source: :employees, class_name: 'Driver'\n  has_many :chefs, through: :company, source: :employees, class_name: 'Chef'\nend\n</code></pre>\n\n<p>The SQL query it fires is</p>\n\n<pre><code>SELECT  \"employees\".* FROM \"employees\" INNER JOIN \"companies\" ON \"employees\".\"company_id\" = \"companies\".\"id\" WHERE \"employees\".\"type\" IN ('Driver') AND \"companies\".\"id\" = 1\n</code></pre>\n\n<p>Not <em>exactly</em> the query you envision, but it works.</p>\n"}], "owner": {"reputation": 323, "user_id": 1934168, "user_type": "registered", "accept_rate": 16, "profile_image": "https://www.gravatar.com/avatar/a8e85918d3db651edd04097020cbf5f1?s=128&d=identicon&r=PG", "display_name": "Hilmi Yamc\u0131", "link": "https://stackoverflow.com/users/1934168/hilmi-yamc%c4%b1"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 610, "favorite_count": 0, "accepted_answer_id": 45599175, "answer_count": 1, "score": 0, "last_activity_date": 1502307033, "creation_date": 1502304746, "question_id": 45598559, "link": "https://stackoverflow.com/questions/45598559/ruby-on-rails-self-join-associations", "title": "Ruby On Rails self join associations", "body": "<p>I have two tables, and four models in my application. First model is company and it has companies table. Other models are employee,driver and supervisor. I've used single table inheritance in my application.</p>\n\n<p>Company model:</p>\n\n<pre><code>class Company &lt; ApplicationRecord\n\n  has_many :employees\n\nend\n</code></pre>\n\n<p>And table structure</p>\n\n<pre><code>ID   NAME\n1    XXX company\n</code></pre>\n\n<p>And Employee, Driver and Supervisor models:</p>\n\n<pre><code>class Employee &lt; ApplicationRecord\n\n   belongs_to :company\n\nend\n\nclass Chef &lt; Employee\n\n\nend\n\nclass Driver &lt; Employee\n\n\nend\n\nclass Supervisor &lt; Employee\n\n\nend\n</code></pre>\n\n<p>And Employees table structure:</p>\n\n<pre><code>ID NAME    COMPANY_ID TYPE\n1  Jo      1          Supervisor\n2  Jack    1          Driver\n3  William 1          Driver\n4  Avarell 1          Driver\n5  Sam     1          Chef\n</code></pre>\n\n<p>What I need to do is that I want supervisors to access all drivers that belong to same company via a has_many assocations.</p>\n\n<p>I have tried the following piece of code in supervisor class:</p>\n\n<pre><code>has_many :drivers, -&gt;(supervisor) {where(company: supervisor.company)}\n</code></pre>\n\n<p>However, rails create the following sql and it is not what I'm expecting</p>\n\n<pre><code>SELECT `employees`.* FROM `employees` WHERE `employees`.`type` IN ('Driver') AND `employees`.`supervisor_id` = 4 AND `employees`.`type` IN ('Driver', 'Supervisor') AND `employees`.`company_id` = 1\n</code></pre>\n\n<p>I want rails to create such query while it's building the assocation.</p>\n\n<pre><code>SELECT `employees`.* FROM `employees` WHERE `employees`.`type` IN ('Driver') AND `employees`.`company_id` = 1    \n</code></pre>\n\n<p>Any suggesstions,</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["javascript", "ruby-on-rails", "ruby", "watson-explorer"], "comments": [{"owner": {"reputation": 184244, "user_id": 14104, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/otetW.jpg?s=128&g=1", "display_name": "epascarello", "link": "https://stackoverflow.com/users/14104/epascarello"}, "edited": false, "score": 0, "creation_date": 1502304870, "post_id": 45598519, "comment_id": 78156654, "body": "set an expiration date on the cookie when you set it?"}, {"owner": {"reputation": 153, "user_id": 3956692, "user_type": "registered", "accept_rate": 86, "profile_image": "https://graph.facebook.com/720397335/picture?type=large", "display_name": "Joshua Hedges", "link": "https://stackoverflow.com/users/3956692/joshua-hedges"}, "reply_to_user": {"reputation": 184244, "user_id": 14104, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/otetW.jpg?s=128&g=1", "display_name": "epascarello", "link": "https://stackoverflow.com/users/14104/epascarello"}, "edited": false, "score": 0, "creation_date": 1502312306, "post_id": 45598519, "comment_id": 78160392, "body": "My cookies have a high expiration. I don&#39;t show that code. My issue is how do I get the data from the user&#39;s browser into the ruby backend and still have it tied to the user. I need to set a ruby variable with ajax and javascript."}], "answers": [{"tags": [], "owner": {"reputation": 982, "user_id": 5593651, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/b3d52652da756a37015aa16befd6d620?s=128&d=identicon&r=PG&f=1", "display_name": "TheCog", "link": "https://stackoverflow.com/users/5593651/thecog"}, "is_accepted": true, "score": 0, "last_activity_date": 1502305278, "creation_date": 1502305278, "answer_id": 45598722, "question_id": 45598519, "link": "https://stackoverflow.com/questions/45598519/how-do-i-load-a-ruby-variable-via-ajax-and-javascript/45598722#45598722", "title": "How do I load a ruby variable via Ajax and Javascript?", "body": "<p>In ruby, by default, cookies only last till the session is closed. You can override that by just giving them an <a href=\"https://stackoverflow.com/questions/1232174/rails-cookies-set-start-date-and-expire-date\">expiration date</a>. Which means they'll last even if the user closes the browser, until they reach that expiration date, Just set it arbitrarily high and you'll be good to go. </p>\n"}], "owner": {"reputation": 153, "user_id": 3956692, "user_type": "registered", "accept_rate": 86, "profile_image": "https://graph.facebook.com/720397335/picture?type=large", "display_name": "Joshua Hedges", "link": "https://stackoverflow.com/users/3956692/joshua-hedges"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "accepted_answer_id": 45598722, "answer_count": 1, "score": 1, "last_activity_date": 1502305278, "creation_date": 1502304601, "question_id": 45598519, "link": "https://stackoverflow.com/questions/45598519/how-do-i-load-a-ruby-variable-via-ajax-and-javascript", "title": "How do I load a ruby variable via Ajax and Javascript?", "body": "<p>I am working in an application that uses Rails. I need to be able to set a variable for each user called language. Currently I do this through a ruby session variable that I setup in the controller, but when a user closes their browser I lose their language variable and they have to set it again every time they login. I need to attach this data to the user somehow. I have to use Ruby and Javascript on the front end and I can only make requests for data via Ruby.</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;script type=\"text/javascript\"&gt;\r\nvar language=getCookie(\u201clanguage\u201d);\r\n  //***HELP use ajax to set user language preference in ruby***\r\n\r\nfunction getCookie(name) {\r\n  var value = \"; \" + document.cookie;\r\n  var parts = value.split(\"; \" + name + \"=\");\r\n  if (parts.length == 2) return parts.pop().split(\";\").shift();\r\n}\r\n&lt;/script&gt;\r\n \r\n&lt;% use language variable here to request data in ruby %&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "heroku", "hosting"], "comments": [{"owner": {"reputation": 2216, "user_id": 7165275, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d8ad41f944f38348a30791dc7f7d02c?s=128&d=identicon&r=PG&f=1", "display_name": "m. simon borg", "link": "https://stackoverflow.com/users/7165275/m-simon-borg"}, "edited": false, "score": 0, "creation_date": 1502303292, "post_id": 45598081, "comment_id": 78155772, "body": "try changing everything that was require_relative back to require_relative. Heroku shouldn&#39;t have any problems supporting it. require and require_relative are very different"}, {"owner": {"reputation": 47, "user_id": 8314271, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ed54f23d9c76fac9855c5f47931e88f?s=128&d=identicon&r=PG&f=1", "display_name": "empoweredev", "link": "https://stackoverflow.com/users/8314271/empoweredev"}, "reply_to_user": {"reputation": 2216, "user_id": 7165275, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d8ad41f944f38348a30791dc7f7d02c?s=128&d=identicon&r=PG&f=1", "display_name": "m. simon borg", "link": "https://stackoverflow.com/users/7165275/m-simon-borg"}, "edited": false, "score": 0, "creation_date": 1502303474, "post_id": 45598081, "comment_id": 78155880, "body": "Heroku had no problems at all. My issue was with trying to host the site on Hostgator. I connected to SSH in the terminal and attempted to &#39;rake generate_session_store&#39; and received the error &#39;undefined method &#39;require_relative&#39; for main:Object&#39;. I guess I should add that to my question"}, {"owner": {"reputation": 2216, "user_id": 7165275, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d8ad41f944f38348a30791dc7f7d02c?s=128&d=identicon&r=PG&f=1", "display_name": "m. simon borg", "link": "https://stackoverflow.com/users/7165275/m-simon-borg"}, "edited": false, "score": 0, "creation_date": 1502304155, "post_id": 45598081, "comment_id": 78156256, "body": "got it. require takes an absolute path, so if your root directory isn&#39;t added to the load path then you need the full path name. the second answer (32 upvotes) to this linked question might help you <a href=\"https://stackoverflow.com/questions/2681031/why-doesnt-relative-require-work-on-ruby-1-8-6\" title=\"why doesnt relative require work on ruby 1 8 6\">stackoverflow.com/questions/2681031/&hellip;</a>"}, {"owner": {"reputation": 2216, "user_id": 7165275, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d8ad41f944f38348a30791dc7f7d02c?s=128&d=identicon&r=PG&f=1", "display_name": "m. simon borg", "link": "https://stackoverflow.com/users/7165275/m-simon-borg"}, "edited": false, "score": 0, "creation_date": 1502304397, "post_id": 45598081, "comment_id": 78156380, "body": "do you have to use hostgator? if it doesn&#39;t support require_relative then it&#39;s using a very old version of ruby that also won&#39;t be supported by the versions of rails that are still receiving security patches. you&#39;ll be cementing your app in a more vulnerable (and slower) past"}, {"owner": {"reputation": 47, "user_id": 8314271, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ed54f23d9c76fac9855c5f47931e88f?s=128&d=identicon&r=PG&f=1", "display_name": "empoweredev", "link": "https://stackoverflow.com/users/8314271/empoweredev"}, "reply_to_user": {"reputation": 2216, "user_id": 7165275, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d8ad41f944f38348a30791dc7f7d02c?s=128&d=identicon&r=PG&f=1", "display_name": "m. simon borg", "link": "https://stackoverflow.com/users/7165275/m-simon-borg"}, "edited": false, "score": 0, "creation_date": 1502305291, "post_id": 45598081, "comment_id": 78156903, "body": "Alright, I used that and now at least I have a different error (making progress): <code>remote: sh: 2: Syntax error: Unterminated quoted string remote:  !     LoadError: cannot load such file -- &#47;tmp&#47;build_ab39d76053c0a0d22b0666e145ee9b00&#47;Rakefile&#47;applica&zwnj;&#8203;tion</code>"}, {"owner": {"reputation": 47, "user_id": 8314271, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ed54f23d9c76fac9855c5f47931e88f?s=128&d=identicon&r=PG&f=1", "display_name": "empoweredev", "link": "https://stackoverflow.com/users/8314271/empoweredev"}, "reply_to_user": {"reputation": 2216, "user_id": 7165275, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d8ad41f944f38348a30791dc7f7d02c?s=128&d=identicon&r=PG&f=1", "display_name": "m. simon borg", "link": "https://stackoverflow.com/users/7165275/m-simon-borg"}, "edited": false, "score": 0, "creation_date": 1502305479, "post_id": 45598081, "comment_id": 78157009, "body": "Using Hostgator was decided by the company, if it was my choice I probably would just host using Heroku but oh well. The site is just a simple, static site with a contact form that emails the entries directly to our support address. Is that risky to store on low security?"}, {"owner": {"reputation": 47, "user_id": 8314271, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ed54f23d9c76fac9855c5f47931e88f?s=128&d=identicon&r=PG&f=1", "display_name": "empoweredev", "link": "https://stackoverflow.com/users/8314271/empoweredev"}, "reply_to_user": {"reputation": 2216, "user_id": 7165275, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d8ad41f944f38348a30791dc7f7d02c?s=128&d=identicon&r=PG&f=1", "display_name": "m. simon borg", "link": "https://stackoverflow.com/users/7165275/m-simon-borg"}, "edited": false, "score": 0, "creation_date": 1502306227, "post_id": 45598081, "comment_id": 78157417, "body": "Solved it, I think! I hadn&#39;t added &#39;config/&#39;, just &#39;application.&#39; After adding that it&#39;s giving me another error from another section of the code. Now I know what to do. Thank you very much for your help! I really appreciate it"}, {"owner": {"reputation": 2216, "user_id": 7165275, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d8ad41f944f38348a30791dc7f7d02c?s=128&d=identicon&r=PG&f=1", "display_name": "m. simon borg", "link": "https://stackoverflow.com/users/7165275/m-simon-borg"}, "edited": false, "score": 0, "creation_date": 1502313731, "post_id": 45598081, "comment_id": 78160985, "body": "Just make sure you&#39;re not hardcoding any sensitive data and you will probably be fine, but you will be unsupported by any future unforeseen security patches. Glad you were able to solve your issue!"}], "owner": {"reputation": 47, "user_id": 8314271, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ed54f23d9c76fac9855c5f47931e88f?s=128&d=identicon&r=PG&f=1", "display_name": "empoweredev", "link": "https://stackoverflow.com/users/8314271/empoweredev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 926, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1502303591, "creation_date": 1502303053, "last_edit_date": 1502303591, "question_id": 45598081, "link": "https://stackoverflow.com/questions/45598081/cannot-load-such-file-config-application-rails-app-heroku-require-links", "title": "Cannot Load Such File -- config/application Rails App Heroku Require Links", "body": "<p>I spent the last few weeks learning how to code using a Udemy course and Codecademy while building a website for the company I am working at. I built it using Ruby on Rails, which I do not have a very good understanding of at the moment. I am currently attempting to get the app working on a Hostgator server. I was using a more recent version of Ruby and Rails than supported by Hostgator, as I recently found out, and I have been working through this guide, fixing errors as I go: <a href=\"http://support.hostgator.in/articles/specialized-help/technical/how-do-i-start-using-ruby-on-rails\" rel=\"nofollow noreferrer\">http://support.hostgator.in/articles/specialized-help/technical/how-do-i-start-using-ruby-on-rails</a></p>\n\n<p>My most recent issue is that require_relative is unsupported. I had connected to SSH in the terminal and ran the command <code>rake generate_session_store</code>, which returned this error:</p>\n\n<pre><code>rake aborted!\nundefined method `require_relative' for main:Object\n</code></pre>\n\n<p>After doing some research on what this was, I decided to change find all instances of 'require_relative' in my document and change them to 'require'. I then pushed the site to Heroku to find out if the site still worked. This is the error I got: </p>\n\n<pre><code>remote: -----&gt; Detecting rake tasks\nremote: sh: 2: Syntax error: Unterminated quoted string\nremote: sh: 2: Syntax error: Unterminated quoted string\nremote:  !\nremote:  !     Could not detect rake tasks\nremote:  !     ensure you can run `$ bundle exec rake -P` against your app\nremote:  !     and using the production group of your Gemfile.\nremote:  !     rake aborted!\nremote:  !     LoadError: cannot load such file -- config/application\n</code></pre>\n\n<p>Running 'bundle exec rake -P' shows the bottom line above on top and has a lot of other information following. Here's my Rakefile, which appears to be the source of the problem:</p>\n\n<pre><code>require 'config/application'\n\nRails.application.load_tasks\n</code></pre>\n\n<p>The require used to be require_relative so I know the problem is there. I've tried changing the link path to all kinds of different things. I believe the file being referenced is the application.rb file, so I've added the extension, added '/socascade/' (my app folder) to the beginning of the link, and attempted some other fixes using the few resources I was able to find. No luck so far. Here's my directory structure if that would help:</p>\n\n<pre><code>socascade\n-config\n--environments\n---development.rb\n---production.rb\n---test.rb\n--initializers\n---application_controller_renderer.rb\n---assets.rb\n---backtrace_silencers.rb\n---cookies_serializer.rb\n---filter_parameter_logging.rb\n---inflections.rb\n---mime_types.rb\n---simple_form.rb\n---wrap_parameters.rb\n--locales\n---en.yml\n---simple_form.en.yml\n--application.rb\n--boot.rb\n--cable.yml\n--database.yml\n--environment.rb\n--puma.rb\n--routes.rb\n--secrets.yml\n--spring.rb\n</code></pre>\n\n<p>If this is something extremely simple, please understand that I literally started coding about four or five weeks ago, so most of this is new to me. I couldn't find a solution after about half an hour of searching, so that's where I'm coming from now. Thanks in advance</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rubygems", "asciidoctor"], "answers": [{"tags": [], "owner": {"reputation": 1018, "user_id": 4744661, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/216e04525f8a9efe5ecf6f61b5cde8b4?s=128&d=identicon&r=PG&f=1", "display_name": "IAspireToBeGladOS", "link": "https://stackoverflow.com/users/4744661/iaspiretobeglados"}, "is_accepted": false, "score": 0, "last_activity_date": 1502305599, "creation_date": 1502305599, "answer_id": 45598806, "question_id": 45597902, "link": "https://stackoverflow.com/questions/45597902/ruby-version-issue-with-ttfunk/45598806#45598806", "title": "Ruby version issue with ttfunk", "body": "<p>Figured it out. For anyone who also has this issue in updating Ruby, I solved it by installing Ruby 2.3 manually following the instructions on <a href=\"https://www.softwarecollections.org/en/scls/rhscl/rh-ruby23/\" rel=\"nofollow noreferrer\">https://www.softwarecollections.org/en/scls/rhscl/rh-ruby23/</a>.</p>\n"}], "owner": {"reputation": 1018, "user_id": 4744661, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/216e04525f8a9efe5ecf6f61b5cde8b4?s=128&d=identicon&r=PG&f=1", "display_name": "IAspireToBeGladOS", "link": "https://stackoverflow.com/users/4744661/iaspiretobeglados"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 516, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1502305599, "creation_date": 1502302425, "question_id": 45597902, "link": "https://stackoverflow.com/questions/45597902/ruby-version-issue-with-ttfunk", "title": "Ruby version issue with ttfunk", "body": "<p>While attempting to install asciidoctor-pdf (<code>sudo gem install asciidoctor-pdf --pre</code>) I'm getting the error <code>ttfunk requires Ruby version ~&gt; 2.1.</code> </p>\n\n<p>I've attempted to uninstall, reinstall, and update Ruby &amp; Ruby gems multiple times and this message hasn't changed. Current ruby version states it's already at 2.1:</p>\n\n<p><code>$ ruby version\n   ruby 2.1.2p95 (2014-05-08 revision 45877) [x86_64-linux]</code></p>\n"}, {"tags": ["html", "ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 340, "user_id": 5481533, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6187f0b4e1ee3afd24b05530d136baf1?s=128&d=identicon&r=PG&f=1", "display_name": "urielSilva", "link": "https://stackoverflow.com/users/5481533/urielsilva"}, "edited": false, "score": 0, "creation_date": 1502301631, "post_id": 45597631, "comment_id": 78154805, "body": "The @article variable is nil. Are you assigning it to something?"}, {"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 0, "creation_date": 1502301766, "post_id": 45597631, "comment_id": 78154874, "body": "Show us the <code>welcome_controller</code> code"}, {"owner": {"reputation": 43, "user_id": 8419523, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/l4yLf.jpg?s=128&g=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/8419523/michael"}, "edited": false, "score": 0, "creation_date": 1502302090, "post_id": 45597631, "comment_id": 78155040, "body": "I actually don\u2019t have anything assigned to it. How would I go about storing my latest article in <code>@article</code>?  In my articles/index.html.erb it stores an article in <code>article</code> using a for loop. But I don\u2019t want to loop through every article, I just want the most recent."}], "answers": [{"comments": [{"owner": {"reputation": 2735, "user_id": 7006199, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kFqCJ.jpg?s=128&g=1", "display_name": "Nimish Gupta", "link": "https://stackoverflow.com/users/7006199/nimish-gupta"}, "reply_to_user": {"reputation": 2216, "user_id": 7165275, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d8ad41f944f38348a30791dc7f7d02c?s=128&d=identicon&r=PG&f=1", "display_name": "m. simon borg", "link": "https://stackoverflow.com/users/7165275/m-simon-borg"}, "edited": false, "score": 0, "creation_date": 1502303054, "post_id": 45597757, "comment_id": 78155630, "body": "@m.simonborg <code>first</code> will also limit the collection to only first record <code>Article.order(created_at: :desc).first</code> and <code>Article.order(created_at: :desc).limit(1)</code> will fire the same query to database"}, {"owner": {"reputation": 43, "user_id": 8419523, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/l4yLf.jpg?s=128&g=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/8419523/michael"}, "edited": false, "score": 0, "creation_date": 1502303757, "post_id": 45597757, "comment_id": 78156022, "body": "You were right right, I didn&#39;t set @article in my welcome_controller. Once I put in <code>@artice = Article.order(created_at: :desc).first</code>, it worked perfectly!"}, {"owner": {"reputation": 43, "user_id": 8419523, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/l4yLf.jpg?s=128&g=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/8419523/michael"}, "edited": false, "score": 0, "creation_date": 1502303877, "post_id": 45597757, "comment_id": 78156088, "body": "I do have a question, if I set @article in my application_controller, will that variable become accessible throughout the entire application?"}, {"owner": {"reputation": 2216, "user_id": 7165275, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d8ad41f944f38348a30791dc7f7d02c?s=128&d=identicon&r=PG&f=1", "display_name": "m. simon borg", "link": "https://stackoverflow.com/users/7165275/m-simon-borg"}, "edited": false, "score": 0, "creation_date": 1502304616, "post_id": 45597757, "comment_id": 78156511, "body": "@NimishGupta you&#39;re right, i already deleted the comment when i realized the mistake"}, {"owner": {"reputation": 2735, "user_id": 7006199, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kFqCJ.jpg?s=128&g=1", "display_name": "Nimish Gupta", "link": "https://stackoverflow.com/users/7006199/nimish-gupta"}, "edited": false, "score": 0, "creation_date": 1502385728, "post_id": 45597757, "comment_id": 78199262, "body": "@micheal yes it will be available through the entire application. But you have to make sure you don&#39;t set it any other controller, otherwise it will.get override"}], "tags": [], "owner": {"reputation": 2735, "user_id": 7006199, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kFqCJ.jpg?s=128&g=1", "display_name": "Nimish Gupta", "link": "https://stackoverflow.com/users/7006199/nimish-gupta"}, "is_accepted": true, "score": 1, "last_activity_date": 1502302699, "last_edit_date": 1502302699, "creation_date": 1502301959, "answer_id": 45597757, "question_id": 45597631, "link": "https://stackoverflow.com/questions/45597631/how-to-show-most-recent-article-in-rails-app-in-another-view/45597757#45597757", "title": "How to Show Most Recent Article in Rails app in another view", "body": "<p>Probably you are not setting <code>@article</code> in you <code>welcome_controller</code></p>\n\n<p>Try something this</p>\n\n<pre><code>class WeclomeController &lt; ApplicationController\n\n  def index\n    @artice = Article.order(created_at: :desc).first\n  end\n\nend\n</code></pre>\n"}], "owner": {"reputation": 43, "user_id": 8419523, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/l4yLf.jpg?s=128&g=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/8419523/michael"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 87, "favorite_count": 0, "accepted_answer_id": 45597757, "answer_count": 1, "score": 1, "last_activity_date": 1502302699, "creation_date": 1502301500, "question_id": 45597631, "link": "https://stackoverflow.com/questions/45597631/how-to-show-most-recent-article-in-rails-app-in-another-view", "title": "How to Show Most Recent Article in Rails app in another view", "body": "<p>In my Rails Blog app I have my welcome controller and view <code>index.html.erb</code>. And I have my articles controller and views <code>index.html.erb</code> and <code>show.html.erb</code>.</p>\n\n<p>My articles view has two views, one for listing articles <code>index.html.erb</code>, and the other for showing articles <code>show.html.erb</code>. When listing articles in my articles view everything works perfectly. But my goal is to list the most recent article in a popup modal in my welcome view <code>index.html.erb</code>.</p>\n\n<p>Below is the code for listing articles in the articles view</p>\n\n<pre><code>&lt;% @articles.reverse.each do |article| %&gt;\n                &lt;div class=\"w3-quarter\"&gt;\n                    &lt;div class=\"panel panel-default\" style=\"width: 300px; min-height: 300px;\"&gt;\n                      &lt;div class=\"panel-heading\"&gt;\n                          &lt;h3&gt;&lt;%= article.title %&gt;&lt;/h3&gt;\n                          &lt;p class=\"w3-opacity\"&gt;&lt;%= article.created_at.strftime(\"%b %d, %Y\") %&gt;  |  Comments &lt;span class=\"label label-primary\"&gt;&lt;%= article.comments.count %&gt;&lt;/span&gt; &lt;/p&gt;\n                      &lt;/div&gt;\n                      &lt;div class=\"panel-body\"&gt;\n                          &lt;p&gt;&lt;%= article.text.first(250) %&gt; ...&lt;/p&gt;\n                          &lt;%= link_to 'Read More', article_path(article), class: 'btn btn-primary btn-block' %&gt;\n                      &lt;/div&gt;\n                    &lt;/div&gt;\n                &lt;/div&gt;\n            &lt;% end %&gt;\n</code></pre>\n\n<p>And below is the code for listing the most recent article in my welcome view</p>\n\n<pre><code>&lt;!-- Modal --&gt;\n        &lt;div id=\"myModal\" class=\"modal fade\" role=\"dialog\"&gt;\n          &lt;div class=\"modal-dialog\"&gt;\n\n            &lt;!-- Modal content--&gt;\n            &lt;div class=\"modal-content\"&gt;\n              &lt;div class=\"modal-header\"&gt;\n                &lt;button type=\"button\" class=\"close\" data-dismiss=\"modal\"&gt;&amp;times;&lt;/button&gt;\n                &lt;h4 class=\"modal-title\"&gt;Modal Header&lt;/h4&gt;\n              &lt;/div&gt;\n              &lt;div class=\"modal-body\"&gt;\n                  &lt;h2&gt;&lt;%= @article.title %&gt;&lt;/h2&gt;\n                  &lt;p class=\"w3-opacity\"&gt;Posted on &lt;%= @article.created_at.strftime(\"%b %d, %Y\") %&gt;&lt;/p&gt;\n                  &lt;hr&gt;\n                  &lt;p&gt;&lt;%= @article.text.first(500) %&gt;&lt;/p&gt;\n              &lt;/div&gt;\n            &lt;/div&gt;\n\n          &lt;/div&gt;\n        &lt;/div&gt;\n</code></pre>\n\n<p>I get the following error from my welcome <code>index.html.erb</code>: </p>\n\n<p><code>undefined method `title' for nil:NilClass</code></p>\n\n<p>Any ideas?</p>\n"}, {"tags": ["ruby", "web-applications", "sinatra", "rack", "warden"], "answers": [{"tags": [], "owner": {"reputation": 184, "user_id": 351007, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b5409cd6ece6474f12ab1cfb0cc0770?s=128&d=identicon&r=PG", "display_name": "jeremy04", "link": "https://stackoverflow.com/users/351007/jeremy04"}, "is_accepted": true, "score": 0, "last_activity_date": 1502321182, "creation_date": 1502321182, "answer_id": 45602119, "question_id": 45597618, "link": "https://stackoverflow.com/questions/45597618/sinatrawarden-undefined-method-authenticated-for-nilnilclass/45602119#45602119", "title": "Sinatra::Warden undefined method `authenticated?&#39; for nil:NilClass", "body": "<p>The nil error is coming from the \"sinatra_warden\" gem, if you look into it's trying to call \"request.env['warden']\", which is nil because:</p>\n\n<p>You have to give Sinatra the Warden Manager Rack middleware via \"use\"</p>\n\n<pre><code>require 'warden'\n\nclass App &lt; Sinatra::Base\n  register Sinatra::Warden\n  enable :sessions\n\n  use Warden::Manager do |manager|\n\n  ....\n</code></pre>\n\n<p>After you do that, you have to come up with a Warden strategy/configure the manager.</p>\n\n<p>Here's an example: \n<a href=\"https://github.com/sklise/sinatra-warden-example#apprb-cont\" rel=\"nofollow noreferrer\">https://github.com/sklise/sinatra-warden-example#apprb-cont</a></p>\n\n<p>Seems like sinatra-warden saves some boilerplate (gives you HAML login routes), but leaves it up to you to configure Warden.</p>\n"}], "owner": {"reputation": 3, "user_id": 8441355, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aee9ca9c7d3be06de0481ed491cd6285?s=128&d=identicon&r=PG&f=1", "display_name": "Nick Handy", "link": "https://stackoverflow.com/users/8441355/nick-handy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 273, "favorite_count": 0, "accepted_answer_id": 45602119, "answer_count": 1, "score": 0, "last_activity_date": 1502321182, "creation_date": 1502301427, "last_edit_date": 1502313186, "question_id": 45597618, "link": "https://stackoverflow.com/questions/45597618/sinatrawarden-undefined-method-authenticated-for-nilnilclass", "title": "Sinatra::Warden undefined method `authenticated?&#39; for nil:NilClass", "body": "<p>I'm trying to use authentication for my Sinatra web application with Sinatra_warden module, but when I point to an authorized site, it says:</p>\n\n<p><strong>NoMethodError at /admin undefined method `authenticated?' for nil:NilClass</strong></p>\n\n<p>Here is my app.rb file:</p>\n\n<pre><code>require 'sinatra'\nrequire 'sinatra_warden'\n\nclass App &lt; Sinatra::Base\n  register Sinatra::Warden\nenable :sessions\n\n  get '/' do\n    erb :index\n  end\n\n  get '/admin' do\n    authorize!('/login')\n    erb :admin\n  end\n\n  get '/dashboard' do\n    authorize!\n    erb :dashboard\n  end\nend\n</code></pre>\n\n<p>and here is my model.rb file, just in case:</p>\n\n<pre><code>require 'rubygems'\nrequire 'data_mapper'\nrequire 'dm-sqlite-adapter'\nrequire 'bcrypt'\n\nDataMapper.setup(:default, \"sqlite:test.db\")\n\nclass User\n  include DataMapper::Resource\n\n  property :id, Serial, :key =&gt; true\n  property :username, String, :length =&gt; 3..50\n  property :password, BCryptHash\n\nend\n\nDataMapper.finalize\nDataMapper.auto_upgrade!\n</code></pre>\n\n<p>What can be the problem?</p>\n"}, {"tags": ["ruby", "xcode", "bash", "shell", "xcode8"], "comments": [{"owner": {"reputation": 2184, "user_id": 3536548, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/qEPjr.png?s=128&g=1", "display_name": "Thermatix", "link": "https://stackoverflow.com/users/3536548/thermatix"}, "edited": false, "score": 0, "creation_date": 1502353521, "post_id": 45597279, "comment_id": 78175139, "body": "why don&#39;t you just loop through the env variables you want to add? A Ruby instance should be aware of any env&#39;s present in the current shell execution environment when started. If the variables aren&#39;t found when you try to add them in ruby it&#39;s because they don&#39;t exist in that ruby execution context. You need to figure out why they don&#39;t exist in the shell environment where ruby is executed."}, {"owner": {"reputation": 6968, "user_id": 455016, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/3a3a44315d8b820a7c8c8cf774c7a782?s=128&d=identicon&r=PG", "display_name": "Dirty Henry", "link": "https://stackoverflow.com/users/455016/dirty-henry"}, "reply_to_user": {"reputation": 2184, "user_id": 3536548, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/qEPjr.png?s=128&g=1", "display_name": "Thermatix", "link": "https://stackoverflow.com/users/3536548/thermatix"}, "edited": false, "score": 0, "creation_date": 1502372793, "post_id": 45597279, "comment_id": 78189851, "body": "@Thermatix &quot;Why they don&#39;t exist in the shell environment where ruby is executed&quot; = that&#39;s exactly my question. That&#39;s Xcode shell environment. How can I make it &quot;inherit&quot; my shell environment variables?"}, {"owner": {"reputation": 2184, "user_id": 3536548, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/qEPjr.png?s=128&g=1", "display_name": "Thermatix", "link": "https://stackoverflow.com/users/3536548/thermatix"}, "edited": false, "score": 0, "creation_date": 1502373544, "post_id": 45597279, "comment_id": 78190528, "body": "Well, after some looking, for gui apps you have to set envs like this: <a href=\"http://codepulsive.blogspot.com.au/2013/11/setting-environment-variables-in-os-x.html\" rel=\"nofollow noreferrer\">codepulsive.blogspot.com.au/2013/11/&hellip;</a>"}, {"owner": {"reputation": 6968, "user_id": 455016, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/3a3a44315d8b820a7c8c8cf774c7a782?s=128&d=identicon&r=PG", "display_name": "Dirty Henry", "link": "https://stackoverflow.com/users/455016/dirty-henry"}, "reply_to_user": {"reputation": 2184, "user_id": 3536548, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/qEPjr.png?s=128&g=1", "display_name": "Thermatix", "link": "https://stackoverflow.com/users/3536548/thermatix"}, "edited": false, "score": 0, "creation_date": 1502632621, "post_id": 45597279, "comment_id": 78279909, "body": "@Thermatix: this blog post is just about env variables in OS X, not at all about Xcode. It&#39;s not relevent for my question."}, {"owner": {"reputation": 5097, "user_id": 919445, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/863151bc2012706930603bfdbd0b8bb0?s=128&d=identicon&r=PG", "display_name": "Nuno Gon&#231;alves", "link": "https://stackoverflow.com/users/919445/nuno-gon%c3%a7alves"}, "edited": false, "score": 0, "creation_date": 1523055033, "post_id": 45597279, "comment_id": 86417597, "body": "Did you ever find a way of doing this? I&#39;m trying this for the exact same purpose."}, {"owner": {"reputation": 6968, "user_id": 455016, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/3a3a44315d8b820a7c8c8cf774c7a782?s=128&d=identicon&r=PG", "display_name": "Dirty Henry", "link": "https://stackoverflow.com/users/455016/dirty-henry"}, "reply_to_user": {"reputation": 5097, "user_id": 919445, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/863151bc2012706930603bfdbd0b8bb0?s=128&d=identicon&r=PG", "display_name": "Nuno Gon&#231;alves", "link": "https://stackoverflow.com/users/919445/nuno-gon%c3%a7alves"}, "edited": false, "score": 0, "creation_date": 1523264811, "post_id": 45597279, "comment_id": 86472082, "body": "@NunoGon&#231;alves I didn&#39;t :("}, {"owner": {"reputation": 5097, "user_id": 919445, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/863151bc2012706930603bfdbd0b8bb0?s=128&d=identicon&r=PG", "display_name": "Nuno Gon&#231;alves", "link": "https://stackoverflow.com/users/919445/nuno-gon%c3%a7alves"}, "edited": false, "score": 1, "creation_date": 1523264840, "post_id": 45597279, "comment_id": 86472099, "body": "I did. I\u2019m writing a post on medium about it."}, {"owner": {"reputation": 5097, "user_id": 919445, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/863151bc2012706930603bfdbd0b8bb0?s=128&d=identicon&r=PG", "display_name": "Nuno Gon&#231;alves", "link": "https://stackoverflow.com/users/919445/nuno-gon%c3%a7alves"}, "edited": false, "score": 1, "creation_date": 1523264874, "post_id": 45597279, "comment_id": 86472120, "body": "Well not really. But a workaround."}, {"owner": {"reputation": 6968, "user_id": 455016, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/3a3a44315d8b820a7c8c8cf774c7a782?s=128&d=identicon&r=PG", "display_name": "Dirty Henry", "link": "https://stackoverflow.com/users/455016/dirty-henry"}, "edited": false, "score": 0, "creation_date": 1523266346, "post_id": 45597279, "comment_id": 86472992, "body": "Don&#39;t forget to post the link once you&#39;ve published it."}, {"owner": {"reputation": 730, "user_id": 9360334, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed394096c7cc04eb729b5f19c7669e70?s=128&d=identicon&r=PG&f=1", "display_name": "Th&#233;o dvn", "link": "https://stackoverflow.com/users/9360334/th%c3%a9o-dvn"}, "reply_to_user": {"reputation": 5097, "user_id": 919445, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/863151bc2012706930603bfdbd0b8bb0?s=128&d=identicon&r=PG", "display_name": "Nuno Gon&#231;alves", "link": "https://stackoverflow.com/users/919445/nuno-gon%c3%a7alves"}, "edited": false, "score": 0, "creation_date": 1536079062, "post_id": 45597279, "comment_id": 91291902, "body": "@NunoGon&#231;alves can you explain how did you manage to do that please ?"}, {"owner": {"reputation": 5097, "user_id": 919445, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/863151bc2012706930603bfdbd0b8bb0?s=128&d=identicon&r=PG", "display_name": "Nuno Gon&#231;alves", "link": "https://stackoverflow.com/users/919445/nuno-gon%c3%a7alves"}, "edited": false, "score": 2, "creation_date": 1536080367, "post_id": 45597279, "comment_id": 91292492, "body": "<a href=\"https://medium.com/@nunogonalves/handling-secrets-in-ios-open-source-projects-b5a212f4e28c\" rel=\"nofollow noreferrer\">medium.com/@nunogonalves/&hellip;</a>"}, {"owner": {"reputation": 5097, "user_id": 919445, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/863151bc2012706930603bfdbd0b8bb0?s=128&d=identicon&r=PG", "display_name": "Nuno Gon&#231;alves", "link": "https://stackoverflow.com/users/919445/nuno-gon%c3%a7alves"}, "edited": false, "score": 0, "creation_date": 1536080417, "post_id": 45597279, "comment_id": 91292518, "body": "@DirtyHenry let me know if it helps."}, {"owner": {"reputation": 6968, "user_id": 455016, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/3a3a44315d8b820a7c8c8cf774c7a782?s=128&d=identicon&r=PG", "display_name": "Dirty Henry", "link": "https://stackoverflow.com/users/455016/dirty-henry"}, "edited": false, "score": 0, "creation_date": 1536140236, "post_id": 45597279, "comment_id": 91313662, "body": "Good idea to source an env file from Xcode! \ud83d\udc4d Thanks!"}], "owner": {"reputation": 6968, "user_id": 455016, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/3a3a44315d8b820a7c8c8cf774c7a782?s=128&d=identicon&r=PG", "display_name": "Dirty Henry", "link": "https://stackoverflow.com/users/455016/dirty-henry"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 666, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1502300263, "creation_date": 1502300263, "question_id": 45597279, "link": "https://stackoverflow.com/questions/45597279/how-can-xcode-8-be-aware-of-my-shell-environment-variables", "title": "How can Xcode 8 be aware of my shell environment variables?", "body": "<p>In Xcode 8.x, at compilation time, I want to run a Ruby script using the environment variables of my shell environment. Unfortunately, when I add a <em>Run Script Phase</em> to my target's build phases, my Ruby script can't find the environment variables from my shell environment.</p>\n\n<p>For instance, I'd like this script:</p>\n\n<pre><code>#!/usr/bin/env ruby\n\nrequire('plist')\n\nopen('myProperties.plist', 'w') do |f|\n  f &lt;&lt; {\n    :'myProperty' =&gt; ENV['MY_PROPERTY'].to_s\n  }.to_plist\nend\n</code></pre>\n\n<p>to generate a <code>.plist</code> file with data from my environment.</p>\n\n<p>Ultimately, my purpose is to provide a convenient way to use secret API keys in an open-source iOS project needing such keys to work properly. Any idea how I can achieve this?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 2, "creation_date": 1502300169, "post_id": 45597217, "comment_id": 78153926, "body": "What do you expect? Also, explain your logic of why you expect that."}, {"owner": {"reputation": 89, "user_id": 2479981, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/47f9bfbd2c03455c363a4744bf626c5b?s=128&d=identicon&r=PG", "display_name": "BugsBunny", "link": "https://stackoverflow.com/users/2479981/bugsbunny"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1502300444, "post_id": 45597217, "comment_id": 78154093, "body": "I was expecting - 3 / 4 result in 0. because / has higher priority, 3/4 is 0. then calculate -0 =&gt; 0."}, {"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1502300603, "post_id": 45597217, "comment_id": 78154196, "body": "<a href=\"http://ruby-doc.org/core-2.4.1/doc/syntax/precedence_rdoc.html\" rel=\"nofollow noreferrer\">ruby-doc.org/core-2.4.1/doc/syntax/precedence_rdoc.html</a>"}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 1, "creation_date": 1502300687, "post_id": 45597217, "comment_id": 78154237, "body": "<code>-</code> is not prioritized as a mathematical operation but a unary one in the example. It is a identifier of the disposition to the left of zero. e.g. this is not interpreted as <code>-(3&#47;4)</code> but rather <code>(-3)&#47;4</code>"}, {"owner": {"reputation": 89, "user_id": 2479981, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/47f9bfbd2c03455c363a4744bf626c5b?s=128&d=identicon&r=PG", "display_name": "BugsBunny", "link": "https://stackoverflow.com/users/2479981/bugsbunny"}, "edited": false, "score": 0, "creation_date": 1502300963, "post_id": 45597217, "comment_id": 78154421, "body": "even though - is a unary operator, how come 0-3/4 is 0 while -3/4 is -1? Just curious and I am very confused...."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1502302403, "post_id": 45597217, "comment_id": 78155229, "body": "@BugsBunny in the second case <code>-</code> is a mathematical operation <code>0-(3&#47;4)</code> as determined by <code>Fixnum#-</code> or now <code>Integer#-</code> <i>&quot;Performs subtraction: the class of the resulting object depends on the class of numeric.&quot;</i> as read from left to right where as the first case is unary <code>Integer#@-</code> <i>&quot;Returns int, negated.&quot;</i> as mentioned below in the answer the result will be &quot;floored&quot; causing <code>0.75</code> to floor to <code>0</code> and <code>0.75</code> round to <code>-1</code>. simple test <code>0.75.floor #=&gt; 0</code> and <code>-0.75.floor #=&gt; -1</code>"}], "answers": [{"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1502318720, "post_id": 45597670, "comment_id": 78162924, "body": "That&#39;s good to know. The doc <a href=\"http://ruby-doc.org/core-2.4.1/Integer.html#method-i-2F\" rel=\"nofollow noreferrer\">Integer#/</a> states, &quot;Performs division: the class of the resulting object depends on the class of numeric.&quot;, which I don&#39;t find especially helpful."}], "tags": [], "owner": {"reputation": 1586, "user_id": 1798644, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Rr1jq.jpg?s=128&g=1", "display_name": "MatayoshiMariano", "link": "https://stackoverflow.com/users/1798644/matayoshimariano"}, "is_accepted": true, "score": 6, "last_activity_date": 1502301631, "creation_date": 1502301631, "answer_id": 45597670, "question_id": 45597217, "link": "https://stackoverflow.com/questions/45597217/ruby-fixnum-division-not-calculating-as-expected/45597670#45597670", "title": "Ruby Fixnum Division Not Calculating As Expected", "body": "<p>This happen because the <a href=\"https://ruby-doc.org/core-2.2.0/Fixnum.html#method-i-2F\" rel=\"noreferrer\">/ operator</a> performs the <code>floor</code> operation.</p>\n\n<p>So <code>-3/4</code> is equal to -1 and not zero. And <code>3/4</code> is equal to zero and not 1.</p>\n\n<p><a href=\"https://github.com/ruby/ruby/blob/trunk/numeric.c#L3720\" rel=\"noreferrer\">fix_div</a> is the method ruby uses to do the division. And <code>fix_div</code> uses <a href=\"https://github.com/ruby/ruby/blob/trunk/numeric.c#L3686\" rel=\"noreferrer\">fix_divide</a>, and <a href=\"https://github.com/ruby/ruby/blob/trunk/numeric.c#L3707\" rel=\"noreferrer\">here</a> you can see where the <code>floor</code> method is called.</p>\n\n<p>The <code>fix_div</code> and <code>fix_divide</code> are C methods.</p>\n"}], "owner": {"reputation": 89, "user_id": 2479981, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/47f9bfbd2c03455c363a4744bf626c5b?s=128&d=identicon&r=PG", "display_name": "BugsBunny", "link": "https://stackoverflow.com/users/2479981/bugsbunny"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "accepted_answer_id": 45597670, "answer_count": 1, "score": 0, "last_activity_date": 1502302813, "creation_date": 1502300068, "last_edit_date": 1502302813, "question_id": 45597217, "link": "https://stackoverflow.com/questions/45597217/ruby-fixnum-division-not-calculating-as-expected", "title": "Ruby Fixnum Division Not Calculating As Expected", "body": "<p>In irb, the result of -3/4 is -1, not 0. However, the result of 3/4 is 0, as expected. </p>\n\n<p>Does anyone know what happened?</p>\n\n<p>Thank you!</p>\n\n<p>I get the floor idea, thank you!</p>\n"}, {"tags": ["ruby", "datetime", "timezone", "timezone-offset", "tzinfo"], "comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1502299165, "post_id": 45596915, "comment_id": 78153346, "body": "Isn&#39;t the offset from the UTC a property of a time in a specific time zone, and not of a date or of a time zone?"}, {"owner": {"reputation": 17424, "user_id": 278842, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/df6877d3f05e542ca5975b4670600f2e?s=128&d=identicon&r=PG", "display_name": "Christopher Oezbek", "link": "https://stackoverflow.com/users/278842/christopher-oezbek"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1502299295, "post_id": 45596915, "comment_id": 78153428, "body": "The offset should be a property of <code>DateTime</code> and <code>Timezone</code>. On Wed 09.08.2017 at 19:21 the offset of America/New_York to UTC was -4:00."}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1502299476, "post_id": 45596915, "comment_id": 78153521, "body": "It is a property of <code>DateTime</code> <b>of</b> (or bound to) a <code>Timezone</code>, not a property of (something and) <code>Timezone</code>. Nor is it a property of &quot;a given date&quot;."}, {"owner": {"reputation": 17424, "user_id": 278842, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/df6877d3f05e542ca5975b4670600f2e?s=128&d=identicon&r=PG", "display_name": "Christopher Oezbek", "link": "https://stackoverflow.com/users/278842/christopher-oezbek"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1502299885, "post_id": 45596915, "comment_id": 78153747, "body": "Yes, I understand DateTime already has a Timezone stored in there."}], "answers": [{"comments": [{"owner": {"reputation": 195413, "user_id": 634824, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/889cf720c96957e615463b5c903a5e18?s=128&d=identicon&r=PG", "display_name": "Matt Johnson-Pint", "link": "https://stackoverflow.com/users/634824/matt-johnson-pint"}, "edited": false, "score": 1, "creation_date": 1502311645, "post_id": 45599433, "comment_id": 78160057, "body": "Great answer.  Also note that <code>period_for_utc</code> would be preferable if the UTC time is already known, as it wouldn&#39;t be subject to the gaps and overlaps you mentioned."}, {"owner": {"reputation": 17424, "user_id": 278842, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/df6877d3f05e542ca5975b4670600f2e?s=128&d=identicon&r=PG", "display_name": "Christopher Oezbek", "link": "https://stackoverflow.com/users/278842/christopher-oezbek"}, "edited": false, "score": 0, "creation_date": 1502312023, "post_id": 45599433, "comment_id": 78160261, "body": "Just a small follow-up question: Is there any way to utilize the strftime(&quot;%:z&quot;) formatting?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user7605325"}, "reply_to_user": {"reputation": 17424, "user_id": 278842, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/df6877d3f05e542ca5975b4670600f2e?s=128&d=identicon&r=PG", "display_name": "Christopher Oezbek", "link": "https://stackoverflow.com/users/278842/christopher-oezbek"}, "edited": false, "score": 0, "creation_date": 1502370691, "post_id": 45599433, "comment_id": 78187930, "body": "@ChristopherOezbek One way to do it is to set the date to the offset and format it: <code>d.new_offset(period.offset.utc_total_offset &#47; 3600 &#47; 24.0).strftime(&#39;%:z&#39;)</code> (for me, it prints <code>-03:00</code>). Unfortunately I couldn&#39;t find a way to format the offset value directly"}, {"owner": {"reputation": 2930, "user_id": 1930295, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/128cc4033ec598b63fa96deb33e26131?s=128&d=identicon&r=PG", "display_name": "danielricecodes", "link": "https://stackoverflow.com/users/1930295/danielricecodes"}, "edited": false, "score": 0, "creation_date": 1542836121, "post_id": 45599433, "comment_id": 93715941, "body": "Thank you for this detailed response.  You just helped me solve an issue in my test suite that was caused by the recent DST switch up here in the USA."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user7605325"}, "is_accepted": true, "score": 5, "last_activity_date": 1502384729, "last_edit_date": 1502384729, "creation_date": 1502308023, "answer_id": 45599433, "question_id": 45596915, "link": "https://stackoverflow.com/questions/45596915/get-utc-offset-for-timezone-at-given-date-via-ruby-tzinfo/45599433#45599433", "title": "Get UTC offset for Timezone at given date via Ruby/tzinfo?", "body": "<p>You can use the <a href=\"http://www.rubydoc.info/gems/tzinfo/TZInfo/Timezone#period_for_local-instance_method\" rel=\"nofollow noreferrer\"><code>period_for_local</code> method</a>. For these examples, I'm using the timezone I live in (<code>America/Sao_Paulo</code>), in where the offset is <code>-03:00</code> during winter (March to October) and <code>-02:00</code> during summer (Daylight Saving Time):</p>\n\n<pre><code># Sao Paulo timezone\nzone = TZInfo::Timezone.new('America/Sao_Paulo')\n\n# date in January (Brazilia Summer Time - DST)\nd = DateTime.new(2017, 1, 1, 10, 0)\n\nperiod = zone.period_for_local(d)\nputs period.offset.utc_total_offset / 3600.0\n\n# date in July (Brazilia Standard Time - not in DST)\nd = DateTime.new(2017, 7, 1, 10, 0)\n\nperiod = zone.period_for_local(d)\nputs period.offset.utc_total_offset / 3600.0\n</code></pre>\n\n<p>The output is:</p>\n\n<blockquote>\n  <p>-2.0<br>\n  -3.0</p>\n</blockquote>\n\n<p>The <code>utc_total_offset</code> method returns the offset in seconds, so I divided by 3600 to get the value in hours.</p>\n\n<p>Note that I also used <code>3600.0</code> to force the results to be a float. If I just use <code>3600</code>, the results will be rounded and timezones like <code>Asia/Kolkata</code> (which has an offset of <code>+05:30</code>) will give incorrect results (<code>5</code> instead of <code>5.5</code>).</p>\n\n<hr>\n\n<p>Note that you must be aware of DST changes, because you can have either a gap or a overlap.</p>\n\n<p>In S\u00e3o Paulo timezone, DST starts at October 15th 2017: at midnight, clocks shift forward to 1 AM (and offset changes from <code>-03:00</code> to <code>-02:00</code>), so all the local times between 00:00 and 01:00 are not valid. In this case, if you try to get the offset, it will get a <code>PeriodNotFound</code> error:</p>\n\n<pre><code># DST starts at October 15th, clocks shift from midnight to 1 AM\nd = DateTime.new(2017, 10, 15, 0, 30)\nperiod = zone.period_for_local(d) # error: TZInfo::PeriodNotFound\n</code></pre>\n\n<p>When DST ends, at February 18th 2018, at midnight clocks shift back to 11 PM of 17th (and offset changes from <code>-02:00</code> to <code>-03:00</code>), so the local times between 11 PM and midnight exist twice (in both offsets).</p>\n\n<p>In this case, you must specify which one you want (by setting the second parameter of <code>period_for_local</code>), indicating if you want the offset for DST or not:</p>\n\n<pre><code># DST ends at February 18th, clocks shift from midnight to 11 PM of 17th\nd = DateTime.new(2018, 2, 17, 23, 30)\nperiod = zone.period_for_local(d, true) # get DST offset\nputs period.offset.utc_total_offset / 3600.0 # -2.0\n\nperiod = zone.period_for_local(d, false) # get non-DST offset\nputs period.offset.utc_total_offset / 3600.0 # -3.0\n</code></pre>\n\n<p>If you don't specify the second parameter, you'll get a <code>TZInfo::AmbiguousTime</code> error:</p>\n\n<pre><code># error: TZInfo::AmbiguousTime (local time exists twice due do DST overlap)\nperiod = zone.period_for_local(d)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 17424, "user_id": 278842, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/df6877d3f05e542ca5975b4670600f2e?s=128&d=identicon&r=PG", "display_name": "Christopher Oezbek", "link": "https://stackoverflow.com/users/278842/christopher-oezbek"}, "is_accepted": false, "score": 1, "last_activity_date": 1502379610, "creation_date": 1502379610, "answer_id": 45618097, "question_id": 45596915, "link": "https://stackoverflow.com/questions/45596915/get-utc-offset-for-timezone-at-given-date-via-ruby-tzinfo/45618097#45618097", "title": "Get UTC offset for Timezone at given date via Ruby/tzinfo?", "body": "<p>It seems in Ruby 1.9.3 there is some hackery (DateTime to Time) involved, with possible loss of precision, but this is my result based on the answer from @Hugo:</p>\n\n<pre><code>module TZInfo\n\nclass Timezone\n\n    def utc_to_local_zone(dateTime)\n        return dateTime.to_time.getlocal(self.period_for_utc(dateTime).utc_total_offset)\n    end\n\n    def offset_to_s(dateTime, format = \"%z\")\n        return utc_to_local_zone(dateTime).strftime(format)\n    end \nend\n\nend\n</code></pre>\n"}], "owner": {"reputation": 17424, "user_id": 278842, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/df6877d3f05e542ca5975b4670600f2e?s=128&d=identicon&r=PG", "display_name": "Christopher Oezbek", "link": "https://stackoverflow.com/users/278842/christopher-oezbek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1103, "favorite_count": 0, "accepted_answer_id": 45599433, "answer_count": 2, "score": 1, "last_activity_date": 1502384729, "creation_date": 1502298960, "last_edit_date": 1502308053, "question_id": 45596915, "link": "https://stackoverflow.com/questions/45596915/get-utc-offset-for-timezone-at-given-date-via-ruby-tzinfo", "title": "Get UTC offset for Timezone at given date via Ruby/tzinfo?", "body": "<p>This is probably trivial for anybody who knows the <code>tzinfo</code> API:</p>\n\n<p>Given a <code>Timezone</code> object from <code>tzinfo</code>, how can I get the UTC offset at a given point in time (given either in local time of the Timezone or UTC)?</p>\n"}, {"tags": ["ruby", "math"], "comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1502299018, "post_id": 45596839, "comment_id": 78153268, "body": "In this context it&#39;s the same as <code>b = new_array.pop; a = new_array.pop</code>. It&#39;s generally called <i>parallel assignment</i>. It&#39;s mainly used like so: <code>a,b = b,a</code>, which is equivalent to <code>temp = a; a = b; b = temp</code>."}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1502300069, "post_id": 45596839, "comment_id": 78153859, "body": "@CarySwoveland +1 for carefully adding the word &quot;[I]n this context&quot;."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 1, "creation_date": 1502300126, "post_id": 45596839, "comment_id": 78153900, "body": "not sure why this would not just be <code>a,b = new_array.pop(2)</code>? seems odd to use the reverse variables and back to back calls to <code>pop</code>"}, {"owner": {"reputation": 19, "user_id": 8382458, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/2e99428f4f333a1fc1f1ee506c481dcc?s=128&d=identicon&r=PG&f=1", "display_name": "Justice Nelson", "link": "https://stackoverflow.com/users/8382458/justice-nelson"}, "edited": false, "score": 0, "creation_date": 1502300207, "post_id": 45596839, "comment_id": 78153952, "body": "thank you i dont know why this confused me so much"}], "owner": {"reputation": 19, "user_id": 8382458, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/2e99428f4f333a1fc1f1ee506c481dcc?s=128&d=identicon&r=PG&f=1", "display_name": "Justice Nelson", "link": "https://stackoverflow.com/users/8382458/justice-nelson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 39, "favorite_count": 0, "closed_date": 1502298945, "answer_count": 0, "score": 0, "last_activity_date": 1502298960, "creation_date": 1502298730, "last_edit_date": 1502298856, "question_id": 45596839, "link": "https://stackoverflow.com/questions/45596839/what-is-the-meaning-of-a-comma-outside-a-string", "closed_reason": "Duplicate", "title": "What is the meaning of a comma outside a string", "body": "<p>I was tasked with taking a string that is using reverse polish notation and evaluating it but I can't understand the code block after the if statement</p>\n\n<pre><code> def evaluate(string)\n   array = tokens(string)\n   symbols = [:+,:-,:*,:/]\n   new_array = []\n   array.each do |x|\n     if symbols.include?(x)            \n       b,a = new_array.pop, new_array.pop\n       new_array &lt;&lt; symbol_math(x, a, b)\n     else\n       new_array &lt;&lt; x\n     end\n   end\n   new_array[0]\n end\n\n def symbol_math symbol, a, b\n   return a+b if symbol == :+\n   return a-b if symbol == :-\n   return a*b if symbol == :*\n   return a.to_f/b if symbol == :/\n end\n</code></pre>\n\n<p>I get that your checking if the character is in the symbols array and if it is you remove it and give it as an argument to symbol_math.What I don't understand is how <code>b,a = new_array.pop, new_array.pop</code> works.</p>\n"}, {"tags": ["html", "json", "ruby", "sinatra"], "comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 1, "creation_date": 1502310633, "post_id": 45596824, "comment_id": 78159598, "body": "Have you tried anything at all? What is the desired result of this table? This <a href=\"https://repl.it/KDlc/1\" rel=\"nofollow noreferrer\">Example</a> will make a &quot;table&quot; and nest a &quot;table&quot; for the <code>:fields</code> key. I have no idea if that is what is &quot;desired&quot;"}, {"owner": {"reputation": 41, "user_id": 7652003, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5af6ffe4d651177087a9bee8ade03c8?s=128&d=identicon&r=PG&f=1", "display_name": "A Trivedi", "link": "https://stackoverflow.com/users/7652003/a-trivedi"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1502311472, "post_id": 45596824, "comment_id": 78159966, "body": "@engineersmnky thank you for that. The desired result is that I want to output this JSON data in a PDF file. The above example has sample data, but in my application it has requirements which I want to print to a PDF format. So, someone suggested that I first transfer my JSON data in html and then to PDF."}, {"owner": {"reputation": 4018, "user_id": 135673, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/42ee5885ec2ae8f7834b716a3a2b57c2?s=128&d=identicon&r=PG", "display_name": "froderik", "link": "https://stackoverflow.com/users/135673/froderik"}, "edited": false, "score": 0, "creation_date": 1502718648, "post_id": 45596824, "comment_id": 78309696, "body": "You may need a templating language to do that. Standard in ruby is <a href=\"https://ruby-doc.org/stdlib-2.4.1/libdoc/erb/rdoc/ERB.html\" rel=\"nofollow noreferrer\">erb</a> which probably is the easiest to use if you are new to this kind of thing. Most of the options for sinatra is available in the <a href=\"http://www.sinatrarb.com/intro.html\" rel=\"nofollow noreferrer\">README</a>.  Yous json looks like it may come from a database. And if that is happening in your sinatra/ruby code you should probably work with the database object directly rather than go <i>via</i> json."}], "owner": {"reputation": 41, "user_id": 7652003, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5af6ffe4d651177087a9bee8ade03c8?s=128&d=identicon&r=PG&f=1", "display_name": "A Trivedi", "link": "https://stackoverflow.com/users/7652003/a-trivedi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 310, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1502298676, "creation_date": 1502298676, "question_id": 45596824, "link": "https://stackoverflow.com/questions/45596824/json-to-html-in-ruby", "title": "JSON to HTML in ruby", "body": "<p>I have some data that is being displayed in JSON format as shown below. I want to convert this JSON data into HTML table/format. Can someone tell me what options I have, I am using Ruby and Sinatra as the framework?</p>\n\n<pre><code>{\"id\"=&gt;123456, \"documentKey\"=&gt;\"xyz\", \"globalId\"=&gt;\"xyz\", \"itemType\"=&gt;1234,\n\"project\"=&gt;123, \"createdDate\"=&gt;\"2015-02-20T00:11:56.000+0000\",\n\"modifiedDate\"=&gt;\"2015-02-20T00:11:56.000+0000\",\n\"lastActivityDate\"=&gt;\"2016-03-02T16:23:52.000+0000\",\n\"createdBy\"=&gt;1234, \"modifiedBy\"=&gt;12342,\n\"fields\"=&gt;{\"name\"=&gt;\"Introduction\",\n           \"globalId\"=&gt;\"Text\",\n           \"documentKey\"=&gt;\"Text-2\",\n           \"description\"=&gt;\"Some introduction\"\n          }\n}\n</code></pre>\n\n<p>Thank you</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 1, "creation_date": 1502298821, "post_id": 45596702, "comment_id": 78153166, "body": "Your wrote that you want a key/value pair, but your code only returns the value. Which do you really want?"}, {"owner": {"reputation": 3910, "user_id": 1522214, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/083FS.png?s=128&g=1", "display_name": "Eric Norcross", "link": "https://stackoverflow.com/users/1522214/eric-norcross"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1502299243, "post_id": 45596702, "comment_id": 78153390, "body": "Edited for clarity - I want the value of the first key that&#39;s found given the ordered list of keys. Hashes may have some or all keys and sometimes a hash may have a key, but not a value (or rather not a <code>truthy</code> value)"}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 1, "creation_date": 1502300826, "post_id": 45596702, "comment_id": 78154335, "body": "Along the lines of your code, you can also do <code>break my_hash[key]</code>."}], "answers": [{"tags": [], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "is_accepted": true, "score": 5, "last_activity_date": 1502298654, "creation_date": 1502298654, "answer_id": 45596817, "question_id": 45596702, "link": "https://stackoverflow.com/questions/45596702/is-there-a-more-efficient-way-of-returning-a-hash-value-given-array-of-keys-if-h/45596817#45596817", "title": "Is there a more efficient way of returning a hash value given array of keys if hash key/value is present?", "body": "<p>Your way is probably close to the best from the point of view of efficiency. But if you want it to be more elegant, retaining the efficiency, then:</p>\n\n<pre><code>my_hash[%i[title name identifier slug].find{|key| my_hash[key].present?}]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 0, "creation_date": 1502299563, "post_id": 45596997, "comment_id": 78153565, "body": "Nice! I was trying to figure out how to use <code>slice</code> but it was your <code>*whitelisted_keys</code> that I was missing. How about: <code>your_hash[your_hash.slice(*whitelisted_keys).keys.first]</code>?"}, {"owner": {"reputation": 51013, "user_id": 976775, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30bd66ad1795804aebe249d8bcb14409?s=128&d=identicon&r=PG", "display_name": "MrYoshiji", "link": "https://stackoverflow.com/users/976775/mryoshiji"}, "reply_to_user": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 0, "creation_date": 1502299614, "post_id": 45596997, "comment_id": 78153591, "body": "well that would just return the value for the first whitelisted key, which might not be <code>present?</code>"}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 2, "creation_date": 1502299680, "post_id": 45596997, "comment_id": 78153621, "body": "This may be elegant, but is less efficient than the OPs. You are creating an intermediate hash. Also, you are calling a Rails method <code>slice</code>, which makes the code less efficient."}, {"owner": {"reputation": 51013, "user_id": 976775, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30bd66ad1795804aebe249d8bcb14409?s=128&d=identicon&r=PG", "display_name": "MrYoshiji", "link": "https://stackoverflow.com/users/976775/mryoshiji"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1502299815, "post_id": 45596997, "comment_id": 78153705, "body": "@sawa very good point, I usualy prefer readability but as OP asked, he is looking for the most efficient way to achieve this."}], "tags": [], "owner": {"reputation": 51013, "user_id": 976775, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30bd66ad1795804aebe249d8bcb14409?s=128&d=identicon&r=PG", "display_name": "MrYoshiji", "link": "https://stackoverflow.com/users/976775/mryoshiji"}, "is_accepted": false, "score": 0, "last_activity_date": 1502299861, "last_edit_date": 1502299861, "creation_date": 1502299318, "answer_id": 45596997, "question_id": 45596702, "link": "https://stackoverflow.com/questions/45596702/is-there-a-more-efficient-way-of-returning-a-hash-value-given-array-of-keys-if-h/45596997#45596997", "title": "Is there a more efficient way of returning a hash value given array of keys if hash key/value is present?", "body": "<p>You can do the following:</p>\n\n<pre><code>whitelisted_keys = [:title, :name, :identifier, :slug]\nfiltered_hash = your_hash.slice(*whitelisted_keys) # will only get pair matching your whitelisted_keys\n\n# return all `.present?` key/values pairs:\nfiltered_hash.select{ |k,v| v.present? }\n\n# return an array of the first key/value pair present:\nfiltered_hash.find{ |k,v| v.present? } # append .last to get the value\n</code></pre>\n\n<p>As Sawa pointed out in the comment, this is not the most efficient way but might be more \"readable\"</p>\n"}], "owner": {"reputation": 3910, "user_id": 1522214, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/083FS.png?s=128&g=1", "display_name": "Eric Norcross", "link": "https://stackoverflow.com/users/1522214/eric-norcross"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "accepted_answer_id": 45596817, "answer_count": 2, "score": 1, "last_activity_date": 1502299861, "creation_date": 1502298234, "last_edit_date": 1502299423, "question_id": 45596702, "link": "https://stackoverflow.com/questions/45596702/is-there-a-more-efficient-way-of-returning-a-hash-value-given-array-of-keys-if-h", "title": "Is there a more efficient way of returning a hash value given array of keys if hash key/value is present?", "body": "<p>I have a method which accepts a hash, and I have an array of keys (ordered by preference) which I want to check the hash for and return the value of the first matching key that's found which is not <code>blank?</code>. So far I have the following, but since I utilize this method heavily, I'm wondering if there is a more efficient way of going about it?</p>\n\n<pre><code>result = [:title, :name, :identifier, :slug].each do |key|\n            if my_hash[key].present?\n              return my_hash[key]\n              break\n            end\n          end \n</code></pre>\n\n<p>So given the following hash: </p>\n\n<pre><code>{\n  id: 10,\n  title: \"\",\n  name: \"Foo\",\n  slug: \"foo\"\n}\n</code></pre>\n\n<p>I would expect <code>result</code> to be: \"Foo\"</p>\n"}, {"tags": ["ruby-on-rails", "arrays", "ruby", "chartkick"], "comments": [{"owner": {"reputation": 51013, "user_id": 976775, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30bd66ad1795804aebe249d8bcb14409?s=128&d=identicon&r=PG", "display_name": "MrYoshiji", "link": "https://stackoverflow.com/users/976775/mryoshiji"}, "edited": false, "score": 0, "creation_date": 1502374558, "post_id": 45596616, "comment_id": 78191388, "body": "Can you remove most of this answer&#39;s content and define: <i>what you want</i> (maybe a screenshot as example?), <i>the context you have</i> (records and their attributes relevant to the problem) and <i>what you did</i> (last 2 tries that were the closest to the answer)"}, {"owner": {"reputation": 491, "user_id": 8404695, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/W3DQM.jpg?s=128&g=1", "display_name": "codegirl", "link": "https://stackoverflow.com/users/8404695/codegirl"}, "reply_to_user": {"reputation": 51013, "user_id": 976775, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30bd66ad1795804aebe249d8bcb14409?s=128&d=identicon&r=PG", "display_name": "MrYoshiji", "link": "https://stackoverflow.com/users/976775/mryoshiji"}, "edited": false, "score": 0, "creation_date": 1502374608, "post_id": 45596616, "comment_id": 78191433, "body": "yes I will, give me few minutes :)"}, {"owner": {"reputation": 51013, "user_id": 976775, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30bd66ad1795804aebe249d8bcb14409?s=128&d=identicon&r=PG", "display_name": "MrYoshiji", "link": "https://stackoverflow.com/users/976775/mryoshiji"}, "edited": false, "score": 0, "creation_date": 1502374806, "post_id": 45596616, "comment_id": 78191603, "body": "As I closed your &quot;duplicated&quot; question today and you don&#39;t have a lot of reputation to put on a bounty, I will do my best to help you fix this issue."}, {"owner": {"reputation": 491, "user_id": 8404695, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/W3DQM.jpg?s=128&g=1", "display_name": "codegirl", "link": "https://stackoverflow.com/users/8404695/codegirl"}, "reply_to_user": {"reputation": 51013, "user_id": 976775, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30bd66ad1795804aebe249d8bcb14409?s=128&d=identicon&r=PG", "display_name": "MrYoshiji", "link": "https://stackoverflow.com/users/976775/mryoshiji"}, "edited": false, "score": 0, "creation_date": 1502374962, "post_id": 45596616, "comment_id": 78191719, "body": "Thank you @MrYoshiji thats very kind of you, I&#39;ve edited the question and added a sample image from the chartkick documentation"}, {"owner": {"reputation": 51013, "user_id": 976775, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30bd66ad1795804aebe249d8bcb14409?s=128&d=identicon&r=PG", "display_name": "MrYoshiji", "link": "https://stackoverflow.com/users/976775/mryoshiji"}, "edited": false, "score": 1, "creation_date": 1502380254, "post_id": 45596616, "comment_id": 78195878, "body": "following the <code>line_chart</code> example, you need to provide an array of hashes, each hash define the <code>name</code> key/value pair (value will be displayed in the legend), and the <code>data</code> key/value pair (value contains a hash of  key/value pairs, where the key is a date, value is a number)."}, {"owner": {"reputation": 491, "user_id": 8404695, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/W3DQM.jpg?s=128&g=1", "display_name": "codegirl", "link": "https://stackoverflow.com/users/8404695/codegirl"}, "reply_to_user": {"reputation": 51013, "user_id": 976775, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30bd66ad1795804aebe249d8bcb14409?s=128&d=identicon&r=PG", "display_name": "MrYoshiji", "link": "https://stackoverflow.com/users/976775/mryoshiji"}, "edited": false, "score": 0, "creation_date": 1502380382, "post_id": 45596616, "comment_id": 78195957, "body": "thank you @MrYoshiji could you perhaps give me an example, I&#39;m feeling kind of lost here :)"}], "answers": [{"comments": [{"owner": {"reputation": 491, "user_id": 8404695, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/W3DQM.jpg?s=128&g=1", "display_name": "codegirl", "link": "https://stackoverflow.com/users/8404695/codegirl"}, "edited": false, "score": 0, "creation_date": 1502307006, "post_id": 45597913, "comment_id": 78157819, "body": "Thank you @Stuart, Yes I&#39;ve tried this, it gives just an empty graph"}, {"owner": {"reputation": 491, "user_id": 8404695, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/W3DQM.jpg?s=128&g=1", "display_name": "codegirl", "link": "https://stackoverflow.com/users/8404695/codegirl"}, "edited": false, "score": 0, "creation_date": 1502320018, "post_id": 45597913, "comment_id": 78163365, "body": "I&#39;m not sure how I should put these options in the console, being rather new to this and all :)"}, {"owner": {"reputation": 31, "user_id": 8441390, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YXYJn.jpg?s=128&g=1", "display_name": "Stuart", "link": "https://stackoverflow.com/users/8441390/stuart"}, "reply_to_user": {"reputation": 491, "user_id": 8404695, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/W3DQM.jpg?s=128&g=1", "display_name": "codegirl", "link": "https://stackoverflow.com/users/8404695/codegirl"}, "edited": false, "score": 0, "creation_date": 1502393571, "post_id": 45597913, "comment_id": 78203746, "body": "At a terminal, type in <code>rails c</code>. Have you done this? If not, you can read about it here: <a href=\"http://guides.rubyonrails.org/command_line.html\" rel=\"nofollow noreferrer\">guides.rubyonrails.org/command_line.html</a>.  Once there, you can do <code>current_user.papers.group(:paper_type).group_by_week(:create&zwnj;&#8203;d_at).count</code> to see what the results are. I would spend my time doing this. When you get data that looks correct, try the chart."}], "tags": [], "owner": {"reputation": 31, "user_id": 8441390, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YXYJn.jpg?s=128&g=1", "display_name": "Stuart", "link": "https://stackoverflow.com/users/8441390/stuart"}, "is_accepted": false, "score": 0, "last_activity_date": 1502302470, "creation_date": 1502302470, "answer_id": 45597913, "question_id": 45596616, "link": "https://stackoverflow.com/questions/45596616/need-guidance-to-use-map-group-pluck-etc-to-make-multi-series-line-chart-in/45597913#45597913", "title": "Need guidance to use .map,.group,.pluck, etc. to make multi series line chart in ruby on rails app", "body": "<p>What happens when you put any of these options in the rails console? Do you get multiple series of data?</p>\n\n<p>Have you tried?</p>\n\n<p><code>&lt;%= line_chart [ name: paper.paper_type, data: current_user.papers.group(:paper_type).group_by_week(:created_at).count ] %&gt;</code></p>\n"}, {"comments": [{"owner": {"reputation": 491, "user_id": 8404695, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/W3DQM.jpg?s=128&g=1", "display_name": "codegirl", "link": "https://stackoverflow.com/users/8404695/codegirl"}, "edited": false, "score": 0, "creation_date": 1502381499, "post_id": 45618465, "comment_id": 78196707, "body": "thank you @MrYoshiji  this works, but I&#39;m concerned how I can show different paper_types and paper_weights by using this method.  One user have maybe 4 paper_types (Newspaper, magazines, officepaper and other paper) and then another user have perhaps only two paper_types to show( newspaper and officepaper). For that user I would only have the graph to show those two types but not all four."}, {"owner": {"reputation": 491, "user_id": 8404695, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/W3DQM.jpg?s=128&g=1", "display_name": "codegirl", "link": "https://stackoverflow.com/users/8404695/codegirl"}, "edited": false, "score": 0, "creation_date": 1502381532, "post_id": 45618465, "comment_id": 78196739, "body": "didn&#39;t see your edit before commenting, I&#39;ll check it out"}, {"owner": {"reputation": 491, "user_id": 8404695, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/W3DQM.jpg?s=128&g=1", "display_name": "codegirl", "link": "https://stackoverflow.com/users/8404695/codegirl"}, "edited": false, "score": 0, "creation_date": 1502381807, "post_id": 45618465, "comment_id": 78196931, "body": "I get <code>undefined local variable or method </code>data_for_chart&#39; for #&lt;#&lt;Class:0x007fc7694aea60&gt;:0x007fc768448c70&gt;`"}, {"owner": {"reputation": 491, "user_id": 8404695, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/W3DQM.jpg?s=128&g=1", "display_name": "codegirl", "link": "https://stackoverflow.com/users/8404695/codegirl"}, "edited": false, "score": 0, "creation_date": 1502382144, "post_id": 45618465, "comment_id": 78197152, "body": "Yeah, this is working 95%, I now have separate lines for each paper_type, but it is not showing the weight. I added a screenshot to the question of how it looks now"}, {"owner": {"reputation": 491, "user_id": 8404695, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/W3DQM.jpg?s=128&g=1", "display_name": "codegirl", "link": "https://stackoverflow.com/users/8404695/codegirl"}, "edited": false, "score": 0, "creation_date": 1502382658, "post_id": 45618465, "comment_id": 78197422, "body": "So, as seen in the screenshot I added, the legend is showing the number of entries for each paper_type. I can understand that is because the code is not showing any paper_weight, my concern now is how to add the paper_weight to the code so it will be shown in the legend?"}, {"owner": {"reputation": 51013, "user_id": 976775, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30bd66ad1795804aebe249d8bcb14409?s=128&d=identicon&r=PG", "display_name": "MrYoshiji", "link": "https://stackoverflow.com/users/976775/mryoshiji"}, "reply_to_user": {"reputation": 491, "user_id": 8404695, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/W3DQM.jpg?s=128&g=1", "display_name": "codegirl", "link": "https://stackoverflow.com/users/8404695/codegirl"}, "edited": false, "score": 1, "creation_date": 1502382958, "post_id": 45618465, "comment_id": 78197602, "body": "What is the output and/or the SQL generated for <code>Paper.grouped_by_month(:created_at)</code>? The <code>.count</code> instruction is counting records instead of summing all of those records&#39; <code>weight</code> value"}, {"owner": {"reputation": 491, "user_id": 8404695, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/W3DQM.jpg?s=128&g=1", "display_name": "codegirl", "link": "https://stackoverflow.com/users/8404695/codegirl"}, "edited": false, "score": 0, "creation_date": 1502383268, "post_id": 45618465, "comment_id": 78197783, "body": "this is what I get, I&#39;m not understanding it fully <code>irb(main):005:0&gt; Paper.group_by_month(:created_at)   Paper Load (5.1ms)  SELECT &quot;papers&quot;.* FROM &quot;papers&quot; WHERE (created_at IS NOT NULL) GROUP BY (DATE_TRUNC(&#39;month&#39;, (created_at::timestamptz - INTERVAL &#39;0 hour&#39;) AT TIME ZONE &#39;Etc&#47;UTC&#39;) + INTERVAL &#39;0 hour&#39;) AT TIME ZONE &#39;Etc&#47;UTC&#39; ActiveRecord::StatementInvalid: PG::GroupingError: ERROR:  column &quot;papers.id&quot; must appear in the GROUP BY clause or be used in an aggregate function LINE 1: SELECT &quot;papers&quot;.* FROM &quot;papers&quot; WHERE (created_at IS NOT NUL...</code>"}, {"owner": {"reputation": 51013, "user_id": 976775, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30bd66ad1795804aebe249d8bcb14409?s=128&d=identicon&r=PG", "display_name": "MrYoshiji", "link": "https://stackoverflow.com/users/976775/mryoshiji"}, "reply_to_user": {"reputation": 491, "user_id": 8404695, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/W3DQM.jpg?s=128&g=1", "display_name": "codegirl", "link": "https://stackoverflow.com/users/8404695/codegirl"}, "edited": false, "score": 1, "creation_date": 1502383329, "post_id": 45618465, "comment_id": 78197816, "body": "Can you try <code>Paper.grouped_by_month(:created_at).sum(:weight)</code>? And eventually <code>Paper.grouped_by_month(:created_at).select(&#39;SUM(weight) as total_weight&#39;)</code>"}, {"owner": {"reputation": 491, "user_id": 8404695, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/W3DQM.jpg?s=128&g=1", "display_name": "codegirl", "link": "https://stackoverflow.com/users/8404695/codegirl"}, "edited": false, "score": 0, "creation_date": 1502383484, "post_id": 45618465, "comment_id": 78197917, "body": "I get <code>irb(main):007:0&gt; Paper.group_by_month(:created_at).sum(:paper_weight)    (9.9ms)  SELECT SUM(&quot;papers&quot;.&quot;paper_weight&quot;) AS sum_paper_weight, (DATE_TRUNC(&#39;month&#39;, (created_at::timestamptz - INTERVAL &#39;0 hour&#39;) AT TIME ZONE &#39;Etc&#47;UTC&#39;) + INTERVAL &#39;0 hour&#39;) AT TIME ZONE &#39;Etc&#47;UTC&#39; AS month FROM &quot;papers&quot; WHERE (created_at IS NOT NULL) GROUP BY (DATE_TRUNC(&#39;month&#39;, (created_at::timestamptz - INTERVAL &#39;0 hour&#39;) AT TIME ZONE &#39;Etc&#47;UTC&#39;) + INTERVAL &#39;0 hour&#39;) AT TIME ZONE &#39;Etc&#47;UTC&#39; =&gt; {Sat, 01 Apr 2017 00:00:00 UTC +00:00=&gt;#&lt;BigDecimal:7f8887a17680,&#39;0.621E3&#39;,9(18)&gt;, Mon, 01 May 2017</code>  to long to sh"}, {"owner": {"reputation": 51013, "user_id": 976775, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30bd66ad1795804aebe249d8bcb14409?s=128&d=identicon&r=PG", "display_name": "MrYoshiji", "link": "https://stackoverflow.com/users/976775/mryoshiji"}, "reply_to_user": {"reputation": 491, "user_id": 8404695, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/W3DQM.jpg?s=128&g=1", "display_name": "codegirl", "link": "https://stackoverflow.com/users/8404695/codegirl"}, "edited": false, "score": 1, "creation_date": 1502383563, "post_id": 45618465, "comment_id": 78197957, "body": "That is perfect. Use this <code>.sum(:weight)</code> instead of the <code>.count</code> in your code (see updated answer)"}, {"owner": {"reputation": 491, "user_id": 8404695, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/W3DQM.jpg?s=128&g=1", "display_name": "codegirl", "link": "https://stackoverflow.com/users/8404695/codegirl"}, "edited": false, "score": 0, "creation_date": 1502383658, "post_id": 45618465, "comment_id": 78198009, "body": "Fantastic!!!! @MrYoshiji, You just made my day!!!! Thank you so much for all your help"}, {"owner": {"reputation": 51013, "user_id": 976775, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30bd66ad1795804aebe249d8bcb14409?s=128&d=identicon&r=PG", "display_name": "MrYoshiji", "link": "https://stackoverflow.com/users/976775/mryoshiji"}, "reply_to_user": {"reputation": 491, "user_id": 8404695, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/W3DQM.jpg?s=128&g=1", "display_name": "codegirl", "link": "https://stackoverflow.com/users/8404695/codegirl"}, "edited": false, "score": 0, "creation_date": 1502383729, "post_id": 45618465, "comment_id": 78198047, "body": "I am happy to help. I assume you will be able to filter Paper based on the desired user and/or a period of time."}, {"owner": {"reputation": 491, "user_id": 8404695, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/W3DQM.jpg?s=128&g=1", "display_name": "codegirl", "link": "https://stackoverflow.com/users/8404695/codegirl"}, "edited": false, "score": 0, "creation_date": 1502383815, "post_id": 45618465, "comment_id": 78198097, "body": "Yes exactly, this seems to be working as it should now"}], "tags": [], "owner": {"reputation": 51013, "user_id": 976775, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30bd66ad1795804aebe249d8bcb14409?s=128&d=identicon&r=PG", "display_name": "MrYoshiji", "link": "https://stackoverflow.com/users/976775/mryoshiji"}, "is_accepted": true, "score": 3, "last_activity_date": 1502383536, "last_edit_date": 1502383536, "creation_date": 1502380833, "answer_id": 45618465, "question_id": 45596616, "link": "https://stackoverflow.com/questions/45596616/need-guidance-to-use-map-group-pluck-etc-to-make-multi-series-line-chart-in/45618465#45618465", "title": "Need guidance to use .map,.group,.pluck, etc. to make multi series line chart in ruby on rails app", "body": "<p>I did not test this, only read the doc and concluded the following: </p>\n\n<p><code>line_chart</code> expects you to give argument structured like this: (from the Javascript documentation)</p>\n\n<pre><code>line_chart [\n  { name: 'Line1', data: { '2017-01-01' =&gt; 2, '2017-01-08' =&gt; 3 } },\n  { name: 'Line2', data: { '2017-01-01' =&gt; 1, '2017-01-08' =&gt; 7 } },\n]\n# try it in your view to make sure it works as described below\n</code></pre>\n\n<p>This will create a chart with 2 lines (Line1 and Line2), horizontal axis will contain 2 values 2017-01-01 and 2017-01-08 and the vertical axis will be a scale, probably from 1 to 7 (min from data to max from data).</p>\n\n<hr>\n\n<p>Following this data structure <strong>in your context</strong>:</p>\n\n<p>Specs (correct me if I am wrong):</p>\n\n<ul>\n<li>one line for each different <code>paper_type</code></li>\n<li><code>weight</code> value for a given <code>paper_type</code> and a given date</li>\n</ul>\n\n<p>Object mapping to match the desired data structure:</p>\n\n<pre><code># controller\nall_paper_type_values = Paper.all.pluck(:paper_type).uniq\n@data_for_chart = all_paper_type_values.map do |paper_type|\n  { name: paper_type, data: Paper.where(paper_type: paper_type).group_by_month(:created_at).sum(:weight) }\nend\n\n# view\n&lt;%= line_chart(@data_for_chart) %&gt;\n</code></pre>\n\n<p>This is no scoped to any user / dates (period). You will have to include this in the code above.</p>\n\n<p>Try this and let me know if it fails.</p>\n"}], "owner": {"reputation": 491, "user_id": 8404695, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/W3DQM.jpg?s=128&g=1", "display_name": "codegirl", "link": "https://stackoverflow.com/users/8404695/codegirl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 479, "favorite_count": 1, "accepted_answer_id": 45618465, "answer_count": 2, "score": 3, "last_activity_date": 1502383536, "creation_date": 1502297912, "last_edit_date": 1502382211, "question_id": 45596616, "link": "https://stackoverflow.com/questions/45596616/need-guidance-to-use-map-group-pluck-etc-to-make-multi-series-line-chart-in", "title": "Need guidance to use .map,.group,.pluck, etc. to make multi series line chart in ruby on rails app", "body": "<p>I'm trying to display a multi series line chart using <code>chartkick</code> in a Ruby on Rails app.  </p>\n\n<p>The chart should display <code>paper_types</code> and the <code>weight</code>for each type during some time period.</p>\n\n<p><strong>SCREENSHOT ADDED</strong></p>\n\n<p><a href=\"https://i.stack.imgur.com/mXU1W.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/mXU1W.png\" alt=\"enter image description here\"></a></p>\n\n<p>This is my <strong>latest try</strong>: </p>\n\n<pre><code>&lt;%= line_chart [                            \n  {name: @pappi.map{|p| [p.paper_type]}, data: @pappi.map{|t| [t.date, t.paper_weight] }, 'interpolateNulls':true}\n ] %&gt;\n</code></pre>\n\n<p>Where <code>@pappi = Paper.all</code></p>\n\n<p>The code above outputs as the picture below, where every <code>paper_type</code> rounds up on one single line, instead of showing separate lines for each <code>paper_type</code>.\n<a href=\"https://i.stack.imgur.com/WZbIp.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/WZbIp.png\" alt=\"enter image description here\"></a></p>\n\n<p><strong>What I'm looking for</strong> is a chart similar to the screenshot below, were each paper_type has it's own line.</p>\n\n<p><a href=\"https://i.stack.imgur.com/eXf5N.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/eXf5N.png\" alt=\"enter image description here\"></a></p>\n\n<p>Can someone please help me with this so I can get the outcome I want?</p>\n"}, {"tags": ["ruby", "ruby-on-rails-4", "devise"], "answers": [{"comments": [{"owner": {"reputation": 1958, "user_id": 1858727, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/3affc24909ae07768e44d1cc97d439bd?s=128&d=identicon&r=PG", "display_name": "opensource-developer", "link": "https://stackoverflow.com/users/1858727/opensource-developer"}, "edited": false, "score": 0, "creation_date": 1502301401, "post_id": 45596818, "comment_id": 78154691, "body": "Hi @nimish that again for your reply. But it still is giving me same error, not sure what mistake i am doing"}, {"owner": {"reputation": 2735, "user_id": 7006199, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kFqCJ.jpg?s=128&g=1", "display_name": "Nimish Gupta", "link": "https://stackoverflow.com/users/7006199/nimish-gupta"}, "reply_to_user": {"reputation": 1958, "user_id": 1858727, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/3affc24909ae07768e44d1cc97d439bd?s=128&d=identicon&r=PG", "display_name": "opensource-developer", "link": "https://stackoverflow.com/users/1858727/opensource-developer"}, "edited": false, "score": 0, "creation_date": 1502301471, "post_id": 45596818, "comment_id": 78154715, "body": "please share your route.rb and complete error trace"}, {"owner": {"reputation": 1958, "user_id": 1858727, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/3affc24909ae07768e44d1cc97d439bd?s=128&d=identicon&r=PG", "display_name": "opensource-developer", "link": "https://stackoverflow.com/users/1858727/opensource-developer"}, "edited": false, "score": 0, "creation_date": 1502343044, "post_id": 45596818, "comment_id": 78169243, "body": "Hi Nimish, i have made a update to the question. Can you please check if that helps in anyway."}, {"owner": {"reputation": 1958, "user_id": 1858727, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/3affc24909ae07768e44d1cc97d439bd?s=128&d=identicon&r=PG", "display_name": "opensource-developer", "link": "https://stackoverflow.com/users/1858727/opensource-developer"}, "edited": false, "score": 0, "creation_date": 1502366123, "post_id": 45596818, "comment_id": 78184237, "body": "Nimish i have created a simple rails application to debug this and soon as i use namespaces for routes the issue arise."}, {"owner": {"reputation": 1221, "user_id": 9375533, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a08c00e9e6694fe8222c6918801dcc0?s=128&d=identicon&r=PG&f=1", "display_name": "dcangulo", "link": "https://stackoverflow.com/users/9375533/dcangulo"}, "edited": false, "score": 0, "creation_date": 1548995466, "post_id": 45596818, "comment_id": 95753508, "body": "Have you found out the solution?"}], "tags": [], "owner": {"reputation": 2735, "user_id": 7006199, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kFqCJ.jpg?s=128&g=1", "display_name": "Nimish Gupta", "link": "https://stackoverflow.com/users/7006199/nimish-gupta"}, "is_accepted": false, "score": 0, "last_activity_date": 1502301498, "last_edit_date": 1502301498, "creation_date": 1502298657, "answer_id": 45596818, "question_id": 45596423, "link": "https://stackoverflow.com/questions/45596423/could-not-find-devise-mapping-for-path/45596818#45596818", "title": "Could not find devise mapping for path", "body": "<p>I tried adding same routes that you did</p>\n\n<pre><code>Rails.application.routes.draw do\n\n  devise_for :users, controllers: { registrations: \"network/registrations\",sessions: 'network/sessions', passwords: 'network/passwords' }\n\n\n  devise_scope :user do\n     get \"registrations/show\" =&gt; \"network/registrations\", as: :show_user_profile\n  end\nend\n</code></pre>\n\n<p>But instead of</p>\n\n<p><code>network_show_user_profile GET    /network/registrations/show(.:format)</code></p>\n\n<p>I got <code>show_user_profile GET    /registrations/show(.:format)     registrations#show\n</code></p>\n\n<p>So I replaced this routes file with below</p>\n\n<pre><code>Rails.application.routes.draw do\n\n  devise_for :users, controllers: { registrations: \"network/registrations\",sessions: 'network/sessions', passwords: 'network/passwords' }\n\n\n  devise_scope :user do\n     get \"/network/registrations/show\" =&gt; \"network/registrations#show\", as: :show_user_profile\n  end\nend\n</code></pre>\n\n<p>I also created an action <code>show</code> in <code>network/registrations_controller.rb</code> and</p>\n\n<p>everything works perfectly for me.</p>\n\n<p>Hope this helps.</p>\n"}], "owner": {"reputation": 1958, "user_id": 1858727, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/3affc24909ae07768e44d1cc97d439bd?s=128&d=identicon&r=PG", "display_name": "opensource-developer", "link": "https://stackoverflow.com/users/1858727/opensource-developer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 863, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1502342547, "creation_date": 1502297169, "last_edit_date": 1502342547, "question_id": 45596423, "link": "https://stackoverflow.com/questions/45596423/could-not-find-devise-mapping-for-path", "title": "Could not find devise mapping for path", "body": "<p>I have the following routes defined in my routes.rb</p>\n\n<pre><code>devise_for :users, controllers: { registrations: \"network/registrations\",sessions: 'network/sessions', passwords: 'network/passwords' }\n\n\ndevise_scope :user do\n   get \"registrations/show\" =&gt; \"network/registrations\", as: :show_user_profile\nend\n</code></pre>\n\n<p>and when i do rake routes i also see</p>\n\n<pre><code> network_show_user_profile GET    /network/registrations/show(.:format)                                                                network/registrations#show\n</code></pre>\n\n<p>But when i try to access the path /network/registrations/show</p>\n\n<p>i get the below exception</p>\n\n<p>Could not find devise mapping for path \"/network/registrations/show\".\nThis may happen for two reasons:</p>\n\n<pre><code>1) You forgot to wrap your route inside the scope block. For example:\n\n  devise_scope :user do\n    get \"/some/route\" =&gt; \"some_devise_controller\"\n  end\n\n2) You are testing a Devise controller bypassing the router.\n   If so, you can explicitly tell Devise which mapping to use:\n\n   @request.env[\"devise.mapping\"] = Devise.mappings[:user]\n</code></pre>\n\n<p>I tried to modify the routes.rb and added</p>\n\n<pre><code>devise_scope :user do\n  get 'user_profile' =&gt; 'registrations#search', :as =&gt; 'user_profile'\nend\n</code></pre>\n\n<p>and when i access user_profile path, i get the error </p>\n\n<pre><code>The action 'show' could not be found for Network::RegistrationsController\n</code></pre>\n\n<p><strong>but when i add the action show to the controller I again get the same exception message</strong></p>\n\n<p>Could not find devise mapping for path \"/network/registrations/show\".\nThis may happen for two reasons:</p>\n\n<pre><code>1) You forgot to wrap your route inside the scope block. For example:\n\n  devise_scope :user do\n    get \"/some/route\" =&gt; \"some_devise_controller\"\n  end\n\n2) You are testing a Devise controller bypassing the router.\n   If so, you can explicitly tell Devise which mapping to use:\n\n   @request.env[\"devise.mapping\"] = Devise.mappings[:user]\n</code></pre>\n\n<p>any help as to what i am doing wrong would be appreciated. Thanks.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "selenium-webdriver", "capybara", "selenium-chromedriver"], "answers": [{"comments": [{"owner": {"reputation": 4855, "user_id": 3618156, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/b3e1907a7f15ed006abc8ad406cf40fe?s=128&d=identicon&r=PG&f=1", "display_name": "american-ninja-warrior", "link": "https://stackoverflow.com/users/3618156/american-ninja-warrior"}, "edited": false, "score": 0, "creation_date": 1502298424, "post_id": 45596664, "comment_id": 78152923, "body": "your name sounded familiar, turns out  im a fan of your work"}], "tags": [], "owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "is_accepted": true, "score": 0, "last_activity_date": 1502298119, "creation_date": 1502298119, "answer_id": 45596664, "question_id": 45595687, "link": "https://stackoverflow.com/questions/45595687/capybara-current-driver-chrome-versus-selenium-chrome/45596664#45596664", "title": "Capybara.current_driver = :chrome versus :selenium_chrome", "body": "<p>They are just names that can be used to identify specific driver configurations so it all depends on what is registered as <code>:chrome</code> and <code>:selenium_chrome</code>.  The latest Capybara (2.15.1) release provides a default registration for <code>:selenium_chrome</code> which is defined as </p>\n\n<pre><code># Configure selenium-webdriver to use chrome as the browser\nCapybara.register_driver :selenium_chrome do |app|\n  Capybara::Selenium::Driver.new(app, :browser =&gt; :chrome)\nend\n</code></pre>\n\n<p>but that can be redefined in your code. There is no gem, that I know of, that provides a default registration of <code>:chrome</code> so if that's currently valid it would most likely be defined in your code (search for <code>register_driver</code>).   </p>\n"}], "owner": {"reputation": 4855, "user_id": 3618156, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/b3e1907a7f15ed006abc8ad406cf40fe?s=128&d=identicon&r=PG&f=1", "display_name": "american-ninja-warrior", "link": "https://stackoverflow.com/users/3618156/american-ninja-warrior"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 541, "favorite_count": 0, "accepted_answer_id": 45596664, "answer_count": 1, "score": 1, "last_activity_date": 1502298119, "creation_date": 1502294794, "question_id": 45595687, "link": "https://stackoverflow.com/questions/45595687/capybara-current-driver-chrome-versus-selenium-chrome", "title": "Capybara.current_driver = :chrome versus :selenium_chrome", "body": "<p>what are the advantages/pros/cons of using</p>\n\n<pre><code>Capybara.current_driver = :chrome\n</code></pre>\n\n<p>versus using</p>\n\n<pre><code>Capybara.current_driver = :selenium_chrome\n</code></pre>\n\n<p>To give a bit more context, I'm using capybara in a standalone ruby script.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "openssl", "ssl-certificate", "ubuntu-14.04"], "owner": {"reputation": 35, "user_id": 8190515, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh5.googleusercontent.com/-bW8hqwAwTmk/AAAAAAAAAAI/AAAAAAAAAK8/ISRJZV_CSuQ/photo.jpg?sz=128", "display_name": "adnan hajar", "link": "https://stackoverflow.com/users/8190515/adnan-hajar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 660, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1502291448, "creation_date": 1502291448, "last_edit_date": 1592644375, "question_id": 45594487, "link": "https://stackoverflow.com/questions/45594487/ssl-connect-returned-1-errno-0-state-unknown-state-unknown-protocol-rails-4", "title": "SSL_connect returned=1 errno=0 state=unknown state: unknown protocol rails 4", "body": "<p>I've been having issues setting up mailer on to my ruby on rails application, I know that this question was asked before but none of the other one solved my problem so I said I'll give it a try.</p>\n<p>My current development log is.</p>\n<pre><code>Rendered example_mailer/sample_email.html.erb within layouts/mailer (0.1ms)\n  Rendered example_mailer/sample_email.text.erb within layouts/mailer (0.0ms)\n\nExampleMailer#sample_email: processed outbound mail in 13.5ms\n\nSent mail to admin@exampler.ca (20.8ms)\nDate: Wed, 09 Aug 2017 13:46:42 +0000\nFrom: noreply@exampler.ca\nTo: admin@exampler.ca\nMessage-ID: &lt;598b1242ae925_95383fe3f1445b7852366@team-version-5166637.mail&gt;\nSubject: Hello from Postmark\nMime-Version: 1.0\nContent-Type: multipart/alternative;\n boundary=&quot;--==_mimepart_598b1242ad242_95383fe3f1445b78522a1&quot;;\n charset=UTF-8\nContent-Transfer-Encoding: 7bit\nhtml-body: &lt;strong&gt;Hello&lt;/strong&gt; dear Postmark user.\ntrack-opens: true\n\n\n----==_mimepart_598b1242ad242_95383fe3f1445b78522a1\nContent-Type: text/plain;\n charset=UTF-8\nContent-Transfer-Encoding: 7bit\n\nHi\nSample mail sent using smtp.\n\n----==_mimepart_598b1242ad242_95383fe3f1445b78522a1\nContent-Type: text/html;\n charset=UTF-8\nContent-Transfer-Encoding: 7bit\n\n&lt;html&gt;\n  &lt;body&gt;\n    &lt;!DOCTYPE html&gt;\n&lt;html&gt;\n  &lt;head&gt;\n    &lt;meta content='text/html; charset=UTF-8' http-equiv='Content-Type' /&gt;\n  &lt;/head&gt;\n  &lt;body&gt;\n    &lt;h1&gt;Hi &lt;/h1&gt;\n    &lt;p&gt;\n      Sample mail sent using smtp.\n    &lt;/p&gt;\n  &lt;/body&gt;\n&lt;/html&gt;\n  &lt;/body&gt;\n&lt;/html&gt;\n\n----==_mimepart_598b1242ad242_95383fe3f1445b78522a1--\n\nCompleted 500 Internal Server Error in 102ms (ActiveRecord: 60.6ms)\n\nOpenSSL::SSL::SSLError (SSL_connect returned=1 errno=0 state=unknown state: unknown protocol):\n  app/controllers/confessions_controller.rb:42:in `block in create'\n  app/controllers/confessions_controller.rb:39:in `create'\n\n\n  Rendered /usr/local/rvm/gems/ruby-2.3.0/gems/actionpack-4.2.5/lib/action_dispatch/middleware/templates/rescues/_source.erb (4.5ms)\n  Rendered /usr/local/rvm/gems/ruby-2.3.0/gems/actionpack-4.2.5/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (3.8ms)\n  Rendered /usr/local/rvm/gems/ruby-2.3.0/gems/actionpack-4.2.5/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (1.7ms)\n  Rendered /usr/local/rvm/gems/ruby-2.3.0/gems/actionpack-4.2.5/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (35.9ms)\n</code></pre>\n<p>and my application.rb is</p>\n<pre><code>config.action_mailer.delivery_method = :postmark\nconfig.action_mailer.postmark_settings = { :api_token =&gt; &quot;A_token&quot; }\n</code></pre>\n<p>and my</p>\n<p>It appears that if i try to connect using the command line with something like:</p>\n<blockquote>\n<p>openssl s_client -connect aristo4stu3.bgu.ac.il:443 -no_tls1 ####this works</p>\n<p>openssl s_client -connect aristo4stu3.bgu.ac.il:443   #### this doesn't work</p>\n</blockquote>\n<p>my ruby version</p>\n<pre><code>ruby 2.3.0p0 (2015-12-25 revision 53290) [x86_64-linux]\n</code></pre>\n<p>my openssl version</p>\n<pre><code>OpenSSL 1.0.1f 6 Jan 2014\n</code></pre>\n<p>linux version:</p>\n<pre><code>Linux team-version-5166637 4.9.17-c9 #1 SMP Thu Mar 23 01:38:54 UTC 2017 x86_64 x86_64 x86_64 GNU/Linux\n</code></pre>\n<p>Any help will be appreciated, Thank you!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "stateless"], "comments": [{"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 1, "creation_date": 1502291345, "post_id": 45594310, "comment_id": 78148427, "body": "You are picking up random records by using <code>sample</code>, what do you except."}], "answers": [{"comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1502292312, "post_id": 45594406, "comment_id": 78149184, "body": "Assuming what you mean by &quot;[t]hey&quot; in &quot;They are not changed&quot; to be <code>@post_a</code> and <code>@post_b</code>, they are indeed changing across requests (including redirects), contrary to what you wrote. And that is the whole point of this question. This answer is clearly wrong."}, {"owner": {"reputation": 163714, "user_id": 123527, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/99e0b39c091e10d9c7d4452a34ca52dc?s=128&d=identicon&r=PG", "display_name": "Simone Carletti", "link": "https://stackoverflow.com/users/123527/simone-carletti"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1502376559, "post_id": 45594406, "comment_id": 78193022, "body": "Yes, I was meaning the variables. I was actually unclear in the response, I mean the content of the records did not change, what changed was the value assigned to the variables as a random record was fetched."}], "tags": [], "owner": {"reputation": 163714, "user_id": 123527, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/99e0b39c091e10d9c7d4452a34ca52dc?s=128&d=identicon&r=PG", "display_name": "Simone Carletti", "link": "https://stackoverflow.com/users/123527/simone-carletti"}, "is_accepted": false, "score": 0, "last_activity_date": 1502376614, "last_edit_date": 1502376614, "creation_date": 1502291263, "answer_id": 45594406, "question_id": 45594310, "link": "https://stackoverflow.com/questions/45594310/how-to-avoid-models-data-being-changed-by-redirect/45594406#45594406", "title": "How to avoid model&#39;s data being changed by redirect", "body": "<p>The variables hold the value you assign to them. As you are taking a random record (using <code>sample</code>), the result of the query is a random record fetched from the database, therefore the value of those 2 variables is sort of <em>random</em>.</p>\n\n<p>If you want a predictable record to be assigned to <code>@post_a</code> and <code>@post_b</code>, then you need to update the query to fetch the record you want.</p>\n\n<p>For example, fetch by ID:</p>\n\n<pre><code>@post_a = Post.find(1)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "is_accepted": false, "score": 0, "last_activity_date": 1502292978, "last_edit_date": 1502292978, "creation_date": 1502291755, "answer_id": 45594598, "question_id": 45594310, "link": "https://stackoverflow.com/questions/45594310/how-to-avoid-models-data-being-changed-by-redirect/45594598#45594598", "title": "How to avoid model&#39;s data being changed by redirect", "body": "<p>It is a basic property of RESTful, hence state-less, systems like those created by Rails that a response to a request cannot directly access what is done in another response. Everything that is to be accessed beyond responses have to be saved somewhere, usually databases.</p>\n\n<p>In order to access from the second response the values of the variables you have set in the first response, the standard way is to save information in <code>session</code>. You can perhaps read <a href=\"http://guides.rubyonrails.org/security.html#session-storage\" rel=\"nofollow noreferrer\">this</a>.</p>\n\n<p>Given that you are using redirect, another way is to pass the values as parameters to the path helper method when you call the redirect. Instead of doing:</p>\n\n<pre><code>redirect_to foo_bar_path\n</code></pre>\n\n<p>you can do:</p>\n\n<pre><code>redirect_to foo_bar_path(post_a_id: @post_a.id, post_b_id: @post_b.id)\n</code></pre>\n\n<p>and then in the controller action at the destination of redirect, you can access the ids of <code>@post_a</code> and <code>post_b</code> as <code>params[:post_a_id]</code> and <code>params[:post_b_id]</code>.</p>\n"}], "owner": {"reputation": 11, "user_id": 8343561, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75645db8aad18aee20dce6af2fedfc7c?s=128&d=identicon&r=PG&f=1", "display_name": "CHOIHEEJAE", "link": "https://stackoverflow.com/users/8343561/choiheejae"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 38, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1502376614, "creation_date": 1502291009, "last_edit_date": 1502292107, "question_id": 45594310, "link": "https://stackoverflow.com/questions/45594310/how-to-avoid-models-data-being-changed-by-redirect", "title": "How to avoid model&#39;s data being changed by redirect", "body": "<p>My <code>home_controller.rb</code> looks likes like this:</p>\n\n<pre><code>class HomeController &lt; ApplicationController\n  def index\n    @post_a = Post.where(title: 'a').sample\n    @post_b = Post.where(title: 'b').sample\n  end\n</code></pre>\n\n<p>And <code>index.html.erb</code> is like this:</p>\n\n<pre><code>&lt;div&gt;\n   &lt;%= @post_a.title %&gt;\n   &lt;%= @post_b.title %&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>When the page is refreshed, <code>@post_a.title</code> and <code>@post_b.title</code> are changed.</p>\n\n<p>Is there any way to prevent data from being changed by refresh or redirect?</p>\n"}, {"tags": ["javascript", "jquery", "ruby-on-rails", "ruby", "jquery-chosen"], "comments": [{"owner": {"reputation": 145, "user_id": 5586262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a825ca0da3db2dae3379604d82d95b25?s=128&d=identicon&r=PG&f=1", "display_name": "scriptify", "link": "https://stackoverflow.com/users/5586262/scriptify"}, "edited": false, "score": 0, "creation_date": 1502290631, "post_id": 45594125, "comment_id": 78147837, "body": "Have you thought about simply splitting the string?"}, {"owner": {"reputation": 23, "user_id": 2515552, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/PblB3.jpg?s=128&g=1", "display_name": "Blueone", "link": "https://stackoverflow.com/users/2515552/blueone"}, "reply_to_user": {"reputation": 145, "user_id": 5586262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a825ca0da3db2dae3379604d82d95b25?s=128&d=identicon&r=PG&f=1", "display_name": "scriptify", "link": "https://stackoverflow.com/users/5586262/scriptify"}, "edited": false, "score": 0, "creation_date": 1502292648, "post_id": 45594125, "comment_id": 78149413, "body": "Good idea @scriptify i tried and apparently it&#39;s working. I will make some tests to be sure."}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 2515552, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/PblB3.jpg?s=128&g=1", "display_name": "Blueone", "link": "https://stackoverflow.com/users/2515552/blueone"}, "edited": false, "score": 0, "creation_date": 1502292930, "post_id": 45594521, "comment_id": 78149633, "body": "Thank you, I have this error with your code <code>Uncaught TypeError: language_request_brut.split is not a function</code>"}], "tags": [], "owner": {"reputation": 21, "user_id": 7384214, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c59abf1a19386bf048df5f5f8f56888?s=128&d=identicon&r=PG&f=1", "display_name": "Riddhish Bambhroliya", "link": "https://stackoverflow.com/users/7384214/riddhish-bambhroliya"}, "is_accepted": false, "score": 0, "last_activity_date": 1502291551, "creation_date": 1502291551, "answer_id": 45594521, "question_id": 45594125, "link": "https://stackoverflow.com/questions/45594125/update-a-chosen-multiple-select-field-with-a-localstorage-variable/45594521#45594521", "title": "Update a Chosen multiple select field with a localStorage variable", "body": "<p>Here, you need to change code from</p>\n\n<pre><code>$('.calcul_checkout').on(\"change keyup\", function(){\n  var language_request_brut = $('#language_request').val();\n  var SelectedLanguage = language_request_brut.split(\",\");\n  var language_request = [];\n  for(i=0;i&lt;SelectedLanguage.length;i++) \n  {\n          language_request.push(SelectedLanguage[i])\n  }\n  localStorage.language_request = language_request;\n}\n</code></pre>\n\n<p>This will help you because $('#language_request').val()  function returns value as \"FR,EN\" and you push it directly.So spiting string will help you.</p>\n"}, {"tags": [], "owner": {"reputation": 23, "user_id": 2515552, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/PblB3.jpg?s=128&g=1", "display_name": "Blueone", "link": "https://stackoverflow.com/users/2515552/blueone"}, "is_accepted": true, "score": 1, "last_activity_date": 1502402057, "creation_date": 1502402057, "answer_id": 45624014, "question_id": 45594125, "link": "https://stackoverflow.com/questions/45594125/update-a-chosen-multiple-select-field-with-a-localstorage-variable/45624014#45624014", "title": "Update a Chosen multiple select field with a localStorage variable", "body": "<p>I had to update my code like this with the split methode: </p>\n\n<pre><code>if (localStorage.language_request != null){\n      $(\"#language_request\").val(localStorage.language_request.split(\",\")).trigger(\"chosen:updated\");\n      }\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 2515552, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/PblB3.jpg?s=128&g=1", "display_name": "Blueone", "link": "https://stackoverflow.com/users/2515552/blueone"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 126, "favorite_count": 0, "accepted_answer_id": 45624014, "answer_count": 2, "score": 0, "last_activity_date": 1502402057, "creation_date": 1502290475, "question_id": 45594125, "link": "https://stackoverflow.com/questions/45594125/update-a-chosen-multiple-select-field-with-a-localstorage-variable", "title": "Update a Chosen multiple select field with a localStorage variable", "body": "<p>i have a Chosen multiple select field and i save the choices of the user in localstorage.language_request. When the user come back i need tu update the field with the previous choices.</p>\n\n<p>My JS to save the choices selected by the user:</p>\n\n<pre><code>$('.calcul_checkout').on(\"change keyup\", function(){\n  var language_request_brut = $('#language_request').val();\n  var language_request = [];\n  jQuery.each(language_request_brut, function(i, val){\n          language_request.push(val)\n });\n  localStorage.language_request = language_request;\n}\n</code></pre>\n\n<p>My JS when the user return on the page and i need to update the Chosen field with the choices selected previously</p>\n\n<pre><code>if (localStorage.language_request != null){ \n $(\"#language_request\").val(localStorage.language_request).trigger(\"chosen:updated\");\n}\n</code></pre>\n\n<p>The Chosen field (in Rails):</p>\n\n<pre><code>&lt;span&gt;\n &lt;%= select_tag(:language_request, options_for_select([['Fran\u00e7ais', 'FR'],\n  ['Anglais', 'EN'],\n  ['Italien', 'IT'],\n  class:\"answer language_request calcul_checkout chosen-select\", multiple: true) %&gt;\n&lt;/span&gt;\n</code></pre>\n\n<p><strong>The problem,</strong> localStorage.language_request is equal to [\"FR,EN\"]. It's save all the choices into one string. And to update the Chosen field i need  to format this array into [\"FR\",\"EN\"] (one string by choice). </p>\n"}, {"tags": ["ruby", "rake"], "comments": [{"owner": {"reputation": 1349, "user_id": 6163262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7f3655350c57cb94195d64808b7ba61?s=128&d=identicon&r=PG&f=1", "display_name": "whodini9", "link": "https://stackoverflow.com/users/6163262/whodini9"}, "edited": false, "score": 0, "creation_date": 1502290311, "post_id": 45593923, "comment_id": 78147549, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/825748/how-to-pass-command-line-arguments-to-a-rake-task\">How to pass command line arguments to a rake task</a>"}, {"owner": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 0, "creation_date": 1502290628, "post_id": 45593923, "comment_id": 78147836, "body": "Why are you using rake at all for this? You don&#39;t have a rake task here (AFAICT). Use <code>irb</code>, expose the method properly, and take it from there."}, {"owner": {"reputation": 13, "user_id": 8206437, "user_type": "registered", "profile_image": "https://graph.facebook.com/10213406463615168/picture?type=large", "display_name": "Etienne Mustow", "link": "https://stackoverflow.com/users/8206437/etienne-mustow"}, "edited": false, "score": 0, "creation_date": 1502291982, "post_id": 45593923, "comment_id": 78148903, "body": "cheers, i read my tutorial wrong and it was already programmed with a rake task i could call"}], "answers": [{"comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 2, "creation_date": 1502294479, "post_id": 45594258, "comment_id": 78150659, "body": "How does that parse in Ruby? <code>require</code> doesn&#39;t need an <code>end</code> and <code>[n]</code> seems to reference an unknown variable <code>n</code>. <code>[</code> is also a shell character that might be interpreted, so if there&#39;s a file called <code>arithmetic5</code> in the directory that&#39;s the argument passed in."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1502314151, "post_id": 45594258, "comment_id": 78161170, "body": "@engineersmnky That&#39;s what I thought. It&#39;s a mystery as to why this was accepted."}], "tags": [], "owner": {"reputation": 26, "user_id": 8226871, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f946c045e249336f05f9ff617d74d479?s=128&d=identicon&r=PG&f=1", "display_name": "Duwayne V.", "link": "https://stackoverflow.com/users/8226871/duwayne-v"}, "is_accepted": true, "score": 0, "last_activity_date": 1502382412, "last_edit_date": 1502382412, "creation_date": 1502290856, "answer_id": 45594258, "question_id": 45593923, "link": "https://stackoverflow.com/questions/45593923/unexpected-syntax-error/45594258#45594258", "title": "unexpected syntax error (", "body": "<p>I believe rake can only be used with a rake task. You could create a rake task that then calls your method.</p>\n\n<pre><code>require './1_arithmetic.rb'\ntask :arithmetic, [:n] =&gt; [:environment] do |t, args|\n  arithmetic1(args[:n])\nend\n</code></pre>\n\n<p>You would then call the task using</p>\n\n<pre><code>rake arithmetic[5]\n</code></pre>\n\n<p>reference: <a href=\"https://stackoverflow.com/questions/18209388/how-can-i-run-a-ruby-class-from-rake-file\">How can I run a ruby class from rake file?</a></p>\n\n<p>reference: <a href=\"https://stackoverflow.com/questions/825748/how-to-pass-command-line-arguments-to-a-rake-task\">How to pass command line arguments to a rake task</a></p>\n"}, {"tags": [], "owner": {"reputation": 9971, "user_id": 8255744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de22299534b5a8ed244ee8ff4aa6c481?s=128&d=identicon&r=PG&f=1", "display_name": "Simple Lime", "link": "https://stackoverflow.com/users/8255744/simple-lime"}, "is_accepted": false, "score": 0, "last_activity_date": 1502312645, "creation_date": 1502312645, "answer_id": 45600607, "question_id": 45593923, "link": "https://stackoverflow.com/questions/45593923/unexpected-syntax-error/45600607#45600607", "title": "unexpected syntax error (", "body": "<p>If all you are trying to do is to run that method, you don't need <code>rake</code> to do so, you can just use the <code>ruby</code> command:</p>\n\n<pre><code>ruby -r./1_arithmetic.rb -e \"puts arithmetic1(10)\"\n</code></pre>\n\n<p>the <code>-r</code> option tells the <code>ruby</code> command to <code>require</code> the file and the <code>-e</code> option tells <code>ruby</code> to run the code passed in as a string.</p>\n\n<p>Note: The command posted is assuming the file <code>1_arithmetic.rb</code> is in the directory you're running the command from, you'll need to mess with that file path (<code>./1_arithmetic.rb</code>) if it's somewhere else.</p>\n"}], "owner": {"reputation": 13, "user_id": 8206437, "user_type": "registered", "profile_image": "https://graph.facebook.com/10213406463615168/picture?type=large", "display_name": "Etienne Mustow", "link": "https://stackoverflow.com/users/8206437/etienne-mustow"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 190, "favorite_count": 0, "accepted_answer_id": 45594258, "answer_count": 2, "score": 0, "last_activity_date": 1502382412, "creation_date": 1502289904, "last_edit_date": 1502290550, "question_id": 45593923, "link": "https://stackoverflow.com/questions/45593923/unexpected-syntax-error", "title": "unexpected syntax error (", "body": "<p>I wrote the following code in a file <code>1_arithmetic.rb</code>:</p>\n\n<pre><code>def arithmetic1(n)\n  (n * 5) - 20\nend\n</code></pre>\n\n<p>Using the gem tool <code>rake</code>, I typed this into the console:</p>\n\n<pre><code>rake 1_arithmetic.rb:arithmetic1(5) \n</code></pre>\n\n<p>Then, I got an error message that reads:</p>\n\n<pre><code>syntax error near unexpected token `('\n</code></pre>\n\n<p>Does anyone know where I might have done wrong? Or is the problem the way I used <code>rake</code>?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord"], "answers": [{"comments": [{"owner": {"reputation": 2216, "user_id": 7165275, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d8ad41f944f38348a30791dc7f7d02c?s=128&d=identicon&r=PG&f=1", "display_name": "m. simon borg", "link": "https://stackoverflow.com/users/7165275/m-simon-borg"}, "edited": false, "score": 1, "creation_date": 1502296009, "post_id": 45593931, "comment_id": 78151564, "body": "What if there are 100 <code>tags.id</code>s?"}, {"owner": {"reputation": 1586, "user_id": 1798644, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Rr1jq.jpg?s=128&g=1", "display_name": "MatayoshiMariano", "link": "https://stackoverflow.com/users/1798644/matayoshimariano"}, "reply_to_user": {"reputation": 2216, "user_id": 7165275, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d8ad41f944f38348a30791dc7f7d02c?s=128&d=identicon&r=PG&f=1", "display_name": "m. simon borg", "link": "https://stackoverflow.com/users/7165275/m-simon-borg"}, "edited": false, "score": 0, "creation_date": 1502296838, "post_id": 45593931, "comment_id": 78152057, "body": "Which is the intermediate table?"}, {"owner": {"reputation": 1586, "user_id": 1798644, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Rr1jq.jpg?s=128&g=1", "display_name": "MatayoshiMariano", "link": "https://stackoverflow.com/users/1798644/matayoshimariano"}, "reply_to_user": {"reputation": 2216, "user_id": 7165275, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d8ad41f944f38348a30791dc7f7d02c?s=128&d=identicon&r=PG&f=1", "display_name": "m. simon borg", "link": "https://stackoverflow.com/users/7165275/m-simon-borg"}, "edited": false, "score": 0, "creation_date": 1502299827, "post_id": 45593931, "comment_id": 78153711, "body": "@m.simonborg I had update the question regarding the 100 <code>tags.id</code>s"}], "tags": [], "owner": {"reputation": 1586, "user_id": 1798644, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Rr1jq.jpg?s=128&g=1", "display_name": "MatayoshiMariano", "link": "https://stackoverflow.com/users/1798644/matayoshimariano"}, "is_accepted": false, "score": 2, "last_activity_date": 1502311365, "last_edit_date": 1502311365, "creation_date": 1502289935, "answer_id": 45593931, "question_id": 45593663, "link": "https://stackoverflow.com/questions/45593663/rails-query-association-and/45593931#45593931", "title": "Rails query association AND", "body": "<p>I can think of this option:</p>\n\n<pre><code>User.includes(:tags).where(tags: { id: 2 }).where(tags: { id: 3 })\n</code></pre>\n\n<p>If you have a severals <code>tag_ids</code>, and if the intermediate table between user and tags is <code>user_tags</code></p>\n\n<pre><code>tag_ids = [1, 2, 3, 4, 5]\nwhere = tag_ids.map do |id|\n    \"tags.id = #{id}\"\nend.join(\" AND \")\n\nputs where # \"tags.id = 1 AND tags.id = 2 AND tags.id = 3 AND tags.id = 4 AND tags.id = 5\"\n\nUser.joins(\"INNER JOIN user_tags ON user_tags.user_id = user.id INNER JOIN tags ON tags.id = user_tags.tag_id\").where(where)\n</code></pre>\n\n<p>If you wish to continue using the <code>includes</code>, there is no other choice that continue using the where in the rails-ish way.</p>\n"}, {"comments": [{"owner": {"reputation": 1586, "user_id": 1798644, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Rr1jq.jpg?s=128&g=1", "display_name": "MatayoshiMariano", "link": "https://stackoverflow.com/users/1798644/matayoshimariano"}, "edited": false, "score": 0, "creation_date": 1502291116, "post_id": 45594255, "comment_id": 78148241, "body": "Despite the fact that the tag objects are not instantiated, the disadvantage of this is that you are doing two queries instead of one."}], "tags": [], "owner": {"reputation": 6039, "user_id": 2137458, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8cfca832ee746f3e3d9971148f52dc64?s=128&d=identicon&r=PG", "display_name": "NM Pennypacker", "link": "https://stackoverflow.com/users/2137458/nm-pennypacker"}, "is_accepted": false, "score": 1, "last_activity_date": 1502295775, "last_edit_date": 1502295775, "creation_date": 1502290848, "answer_id": 45594255, "question_id": 45593663, "link": "https://stackoverflow.com/questions/45593663/rails-query-association-and/45594255#45594255", "title": "Rails query association AND", "body": "<p>How about:</p>\n\n<pre><code>user_ids = Tag.where(id: [2,3]).pluck(:user_id).uniq\nUser.where(id: user_id)\n</code></pre>\n\n<p><code>pluck</code> won't instantiate all the tag objects, so while this may not be ideal, it should at least be pretty quick.</p>\n"}], "owner": {"reputation": 1983, "user_id": 1243806, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/806578e8ada7a96d56995904478083d9?s=128&d=identicon&r=PG", "display_name": "Rafael Motta", "link": "https://stackoverflow.com/users/1243806/rafael-motta"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1502311365, "creation_date": 1502289218, "last_edit_date": 1502294215, "question_id": 45593663, "link": "https://stackoverflow.com/questions/45593663/rails-query-association-and", "title": "Rails query association AND", "body": "<p>I have an <code>User</code> model with a HABTM association with <code>Tag</code> model. I need all <code>users</code> who necessarily have all conditions, not just one.</p>\n\n<p>Ex:</p>\n\n<pre><code>User.includes(:tags).where(tags: { id: [2,3,...] })\n</code></pre>\n\n<p>Returns <code>users</code> who have <code>tags</code> with id 2 and / or 3, but I would like to only return <code>users</code> who have <code>tags</code> with ids 2 AND 3.</p>\n"}, {"tags": ["ruby", "class", "object", "instance", "attr"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 2, "creation_date": 1502289026, "post_id": 45593532, "comment_id": 78146505, "body": "I&#39;d use <code>attr_writer</code> if I was providing the getter myself."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1502290162, "post_id": 45593532, "comment_id": 78147432, "body": "Maybe a little contrived, but for <code>attr_writer</code> without a getter, I could imagine a Ruby version of <a href=\"https://en.wikipedia.org/wiki/Bulls_and_Cows\" rel=\"nofollow noreferrer\">Bulls and Cows</a>. The game object allows one player to (secretly) set the code via <code>game.code=</code>, but does not allow the opponent to easily obtain it via <code>game.code</code>."}], "answers": [{"comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 1, "creation_date": 1502296093, "post_id": 45595600, "comment_id": 78151619, "body": "This exactly is the case."}, {"owner": {"reputation": 2234, "user_id": 7927036, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/j8HJn.png?s=128&g=1", "display_name": "Matt Croak", "link": "https://stackoverflow.com/users/7927036/matt-croak"}, "edited": false, "score": 0, "creation_date": 1502314210, "post_id": 45595600, "comment_id": 78161210, "body": "thanks guys! I talked to one of my instructors about it and he brought up the point about passwords where the user would write them but the programmer wouldn&#39;t be able to see it but I will definitely bring up this example with him!"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "reply_to_user": {"reputation": 2234, "user_id": 7927036, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/j8HJn.png?s=128&g=1", "display_name": "Matt Croak", "link": "https://stackoverflow.com/users/7927036/matt-croak"}, "edited": false, "score": 0, "creation_date": 1502354883, "post_id": 45595600, "comment_id": 78176103, "body": "@M.C. omitting the getter would just makes it less convenient to retrieve the value of an instance variable, but it is still (easily) possible."}], "tags": [], "owner": {"reputation": 2216, "user_id": 7165275, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d8ad41f944f38348a30791dc7f7d02c?s=128&d=identicon&r=PG&f=1", "display_name": "m. simon borg", "link": "https://stackoverflow.com/users/7165275/m-simon-borg"}, "is_accepted": true, "score": 2, "last_activity_date": 1502296218, "last_edit_date": 1502296218, "creation_date": 1502294531, "answer_id": 45595600, "question_id": 45593532, "link": "https://stackoverflow.com/questions/45593532/when-would-you-use-attr-writer/45595600#45595600", "title": "When would you use attr_writer?", "body": "<p>What if you want a trivial writer and a custom reader? It's common to want to memoize a default value when calling a reader if the <code>ivar</code> isn't already set.</p>\n\n<pre><code>class Oof\n  attr_writer :rab\n\n  def rab\n    @rab ||= \"rab, of course!\"\n  end\nend\n\noof = Oof.new\noof.rab # =&gt; \"rab, of course!\"\noof.rab = \"zab\"\noof.rab # =&gt; \"zab\"\n</code></pre>\n"}], "owner": {"reputation": 2234, "user_id": 7927036, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/j8HJn.png?s=128&g=1", "display_name": "Matt Croak", "link": "https://stackoverflow.com/users/7927036/matt-croak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 666, "favorite_count": 0, "accepted_answer_id": 45595600, "answer_count": 1, "score": 2, "last_activity_date": 1502296218, "creation_date": 1502288920, "last_edit_date": 1502295661, "question_id": 45593532, "link": "https://stackoverflow.com/questions/45593532/when-would-you-use-attr-writer", "title": "When would you use attr_writer?", "body": "<p>I can imagine when you want some attribute to be only readable, or be writable and readable, but not when you want an attribute to be writable and not readable.</p>\n\n<p>In some cases, you might want to read some attributes but not be able to change them. For example, if you have an <code>Animal</code> class and want to initialize it with a name, age, and color, you could write </p>\n\n<pre><code>attr_accessor :age, :color\n</code></pre>\n\n<p>and then for name have</p>\n\n<pre><code>attr_reader :name\n</code></pre>\n\n<p>because a name doesn't change. A cat can get older or change color, but the name (for the sake of this question) once assigned should not be changed.</p>\n\n<p>On the other hand, I cannot rationalize a scenario (aside form passwords) where you would need <code>attr_writer</code> (as opposed to <code>attr_accessor</code> or <code>attr_reader</code>). Under what circumstances would you want to write something, but not want to read it? What type of scenario or situation calls for <code>attr_writer</code>?</p>\n\n<p>If you can think of a scenario in other programming languages, that is welcome but my immediate scope of Object Orientation knowledge is within Ruby.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "export-to-csv", "ruby-csv"], "answers": [{"tags": [], "owner": {"reputation": 2765, "user_id": 5864985, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/UlhbW.jpg?s=128&g=1", "display_name": "Ronan Lopes", "link": "https://stackoverflow.com/users/5864985/ronan-lopes"}, "is_accepted": true, "score": 8, "last_activity_date": 1524060019, "last_edit_date": 1524060019, "creation_date": 1502288536, "answer_id": 45593400, "question_id": 45593362, "link": "https://stackoverflow.com/questions/45593362/create-csv-file-with-data-from-my-model/45593400#45593400", "title": "Create CSV file with data from my model", "body": "<p>The following code will write the attributes of all users to a file:</p>\n\n<pre><code>CSV.open(\"path/to/file.csv\", \"wb\") do |csv|\n  csv &lt;&lt; User.attribute_names\n  User.all.each do |user|\n    csv &lt;&lt; user.attributes.values\n  end\nend\n</code></pre>\n\n<p>Source: <a href=\"https://stackoverflow.com/questions/19200734/how-to-convert-array-of-activerecord-models-to-csv\">How to convert array of ActiveRecord models to CSV?</a> (duplicate question)</p>\n"}], "owner": {"reputation": 181, "user_id": 4130843, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/47a932b3add808e761b05fefd80f4ce3?s=128&d=identicon&r=PG&f=1", "display_name": "Abdul Haseeb", "link": "https://stackoverflow.com/users/4130843/abdul-haseeb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2999, "favorite_count": 0, "closed_date": 1502289755, "accepted_answer_id": 45593400, "answer_count": 1, "score": -1, "last_activity_date": 1524060019, "creation_date": 1502288446, "question_id": 45593362, "link": "https://stackoverflow.com/questions/45593362/create-csv-file-with-data-from-my-model", "closed_reason": "Duplicate", "title": "Create CSV file with data from my model", "body": "<p>I have a user model with name and id.</p>\n\n<p>I want to store the of all the columns in users to a csv file.</p>\n\n<p>How do I use CSV.generate function to do that?</p>\n"}, {"tags": ["ruby", "ruby-2.4"], "comments": [{"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 1, "creation_date": 1502288599, "post_id": 45593314, "comment_id": 78146127, "body": "Could you point to the documentation that left you with such understanding? That is not how it works. If it was enclosed in <code>MyClass</code> in <code>testld.rb</code>, it will be called as if it was. If it was not, it will not, no matter where you load it."}, {"owner": {"reputation": 78, "user_id": 1716700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7058d64f844f450b718fea0f9cf26a18?s=128&d=identicon&r=PG", "display_name": "Pavel", "link": "https://stackoverflow.com/users/1716700/pavel"}, "reply_to_user": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 0, "creation_date": 1502289967, "post_id": 45593314, "comment_id": 78147278, "body": "<a href=\"https://ruby-doc.org/core-2.4.1/Kernel.html#method-i-load\" rel=\"nofollow noreferrer\">ruby-doc.org/core-2.4.1/Kernel.html#method-i-load</a>   I wrongly assumed the loaded code is executed in the context of the MyClass. MyClass.greet does the work as @MatayoshiMariano has pointed out."}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1502290012, "post_id": 45593314, "comment_id": 78147312, "body": "@Pavel &quot;I wrongly assumed the loaded code is executed in the context of the MyClass.&quot; That is not what MatayoshiMariano pointed out. That answer misses the point."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 2, "creation_date": 1502290758, "post_id": 45593314, "comment_id": 78147961, "body": "@Pavel you want something like <code>eval File.read(&#39;testld.rb&#39;)</code> but <code>load</code> doesn&#39;t work that way."}, {"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 0, "creation_date": 1502290766, "post_id": 45593314, "comment_id": 78147967, "body": "@Pavel, I couldn&#39;t see how you got this interpretation. I agree that Ruby&#39;s namespacing is one of it&#39;s weaker points, but it&#39;s not as terrible as for <code>load</code> to perform a copy-paste. xd"}, {"owner": {"reputation": 78, "user_id": 1716700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7058d64f844f450b718fea0f9cf26a18?s=128&d=identicon&r=PG", "display_name": "Pavel", "link": "https://stackoverflow.com/users/1716700/pavel"}, "reply_to_user": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 0, "creation_date": 1502293932, "post_id": 45593314, "comment_id": 78150328, "body": "@ndn I got  to this usecase by reading a book &#39;Learning Sinatra&#39;, where this is used exactly the way I posted the non-working code. They use it to call the static Sinatra::Base get method, by loading the calls from external file, routes.rb. They use ruby 2.0.0, so this may be the differentiator, I will test it with this version."}, {"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 0, "creation_date": 1502295304, "post_id": 45593314, "comment_id": 78151134, "body": "@Pavel, I&#39;m pretty sure that is not how it works for any version of Ruby. Maybe 1.8.7-, but doubt it. Still, Sinatra has &quot;DSL version&quot; and &quot;namespaced version&quot;. If you directly do <code>require &#39;sinatra&#39;</code>, you will be able to use stuff like <code>get</code> and <code>post</code> without explicit receiver. This includes in files that you loaded after <code>require &#39;sinatra&#39;</code>."}], "answers": [{"comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "reply_to_user": {"reputation": 78, "user_id": 1716700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7058d64f844f450b718fea0f9cf26a18?s=128&d=identicon&r=PG", "display_name": "Pavel", "link": "https://stackoverflow.com/users/1716700/pavel"}, "edited": false, "score": 0, "creation_date": 1502289845, "post_id": 45593505, "comment_id": 78147176, "body": "@Pavel The fact that it works is coincidence. This answer is irrelevant to your actual question."}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1502290137, "post_id": 45593505, "comment_id": 78147409, "body": "Is anything mentioned in this answer specific to Ruby 2.4, whose tag MatayoshiMariano added to the suggested edit?"}, {"owner": {"reputation": 1586, "user_id": 1798644, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Rr1jq.jpg?s=128&g=1", "display_name": "MatayoshiMariano", "link": "https://stackoverflow.com/users/1798644/matayoshimariano"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1502290603, "post_id": 45593505, "comment_id": 78147808, "body": "@sawa I do not think that is a coincidince, but my answer may be incomplete, it&#39;s missing what <code>load</code> does. I added the ruby-2.4 tag because @Pavel says that he is using <code>ruby 2.4.1p111</code>"}], "tags": [], "owner": {"reputation": 1586, "user_id": 1798644, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Rr1jq.jpg?s=128&g=1", "display_name": "MatayoshiMariano", "link": "https://stackoverflow.com/users/1798644/matayoshimariano"}, "is_accepted": true, "score": 2, "last_activity_date": 1502288823, "creation_date": 1502288823, "answer_id": 45593505, "question_id": 45593314, "link": "https://stackoverflow.com/questions/45593314/ruby-load-does-not-see-static-methods-in-the-class/45593505#45593505", "title": "Ruby load does not see static methods in the class", "body": "<p>You need to call <code>MyClass.greet</code> in <code>testld.rb</code>, that is because <code>greet</code> is a class method defined in the class <code>MyClass</code>.</p>\n\n<p><a href=\"https://rubymonk.com/learning/books/4-ruby-primer-ascent/chapters/45-more-classes/lessons/113-class-variables\" rel=\"nofollow noreferrer\">Here</a> is documentation for class methods.</p>\n"}, {"comments": [{"owner": {"reputation": 78, "user_id": 1716700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7058d64f844f450b718fea0f9cf26a18?s=128&d=identicon&r=PG", "display_name": "Pavel", "link": "https://stackoverflow.com/users/1716700/pavel"}, "edited": false, "score": 0, "creation_date": 1502290338, "post_id": 45593872, "comment_id": 78147571, "body": "What I really wanted to achieve is to have the static method called, the  MyClass.greet.   I thought that the load works kind of like a C preprocessor, placing the file content into the MyClass and then execute, which was wrong."}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "reply_to_user": {"reputation": 78, "user_id": 1716700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7058d64f844f450b718fea0f9cf26a18?s=128&d=identicon&r=PG", "display_name": "Pavel", "link": "https://stackoverflow.com/users/1716700/pavel"}, "edited": false, "score": 1, "creation_date": 1502290712, "post_id": 45593872, "comment_id": 78147911, "body": "You do have defined <code>MyClass.greet</code>. That part, you did correctly. What you did wrong is the way you called it. And here is the explanation to it."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 78, "user_id": 1716700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7058d64f844f450b718fea0f9cf26a18?s=128&d=identicon&r=PG", "display_name": "Pavel", "link": "https://stackoverflow.com/users/1716700/pavel"}, "edited": false, "score": 2, "creation_date": 1502294683, "post_id": 45593872, "comment_id": 78150784, "body": "@Pavel Don&#39;t think of Ruby as a fancy C. It&#39;s Smalltalk in origin which has a different approach to solving problems like this. If you created a <code>module</code> and <code>include</code> it in your class you&#39;ll be able to hook in through the <code>included</code> method and everything should work seamlessly."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "reply_to_user": {"reputation": 78, "user_id": 1716700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7058d64f844f450b718fea0f9cf26a18?s=128&d=identicon&r=PG", "display_name": "Pavel", "link": "https://stackoverflow.com/users/1716700/pavel"}, "edited": false, "score": 0, "creation_date": 1502312977, "post_id": 45593872, "comment_id": 78160703, "body": "@Pavel: <code>load</code>, <code>require</code>, and <code>require_relative</code> simply run the file. That&#39;s all they do."}], "tags": [], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "is_accepted": false, "score": 1, "last_activity_date": 1502289796, "creation_date": 1502289796, "answer_id": 45593872, "question_id": 45593314, "link": "https://stackoverflow.com/questions/45593314/ruby-load-does-not-see-static-methods-in-the-class/45593872#45593872", "title": "Ruby load does not see static methods in the class", "body": "<p>Wherever you load a file, the loaded file is always evaluated within the main environment. The value of <code>self</code> in the main environment of <code>testld.rb</code> is the main environment of the entire script. Hence, your</p>\n\n<pre><code>greet 'Called by load'\n</code></pre>\n\n<p>is not equivalent to</p>\n\n<pre><code>MyClass.greet 'Called by load'\n</code></pre>\n\n<p>as you expected.</p>\n"}], "owner": {"reputation": 78, "user_id": 1716700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7058d64f844f450b718fea0f9cf26a18?s=128&d=identicon&r=PG", "display_name": "Pavel", "link": "https://stackoverflow.com/users/1716700/pavel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 84, "favorite_count": 0, "accepted_answer_id": 45593505, "answer_count": 2, "score": 0, "last_activity_date": 1502347794, "creation_date": 1502288311, "last_edit_date": 1502347794, "question_id": 45593314, "link": "https://stackoverflow.com/questions/45593314/ruby-load-does-not-see-static-methods-in-the-class", "title": "Ruby load does not see static methods in the class", "body": "<p>I am experimenting with ruby (2.4.1p111) and with the load method and it does have some strange behavior:</p>\n\n<p>I have two files:</p>\n\n<p><em>mytest.rb</em>:</p>\n\n<pre><code>class MyClass\n\n  def self.greet(param)\n   puts \"Got called: #{param}\"\n  end\n\n  greet 'Called locally'\n\n  load \"./testld.rb\"\nend\n</code></pre>\n\n<p>and the loaded file:</p>\n\n<p><em>testld.rb</em>:</p>\n\n<pre><code>greet 'Called by load'\n</code></pre>\n\n<p>I understood from documentation that the loaded code from <em>testld.rb</em> and the method call right in the <em>MyClass</em> should behave the same. Instead, I am getting:</p>\n\n<pre><code>-bash-4.2$ ruby mytest.rb\nGot called: Called locally\n/Blacksmith/RB/testld.rb:1:in `&lt;top (required)&gt;': undefined method `greet' \nfor main:Object (NoMethodError)\n    from mytest.rb:9:in `load'\n    from mytest.rb:9:in `&lt;class:MyClass&gt;'\n    from mytest.rb:1:in `&lt;main&gt;'\n</code></pre>\n\n<p>Any idea what I do wrong?</p>\n"}, {"tags": ["ruby", "metasploit", "msf"], "comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1502287427, "post_id": 45592436, "comment_id": 78145130, "body": "first of all if you want to use <code>metasploit</code> I highly recommend learning ruby first. (script kiddies are generally frowned upon) :). Secondly <code>capture_boot_key</code> (line 39 same file) is returing <code>nil</code> where a <code>String</code> is expected <a href=\"https://ruby-doc.org/core-2.3.0/String.html#method-i-unpack\" rel=\"nofollow noreferrer\"><code>#unpack</code></a> is a <code>String</code> method and in this case it trying to take the captured &quot;boot key&quot; and unpack it as a hexidecimal (high nibble first). If none of this makes sense again I would recommend learning what you are doing first"}, {"owner": {"reputation": 11, "user_id": 8440142, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/885e982ff6b92816ba91c98253eca2ba?s=128&d=identicon&r=PG&f=1", "display_name": "Shedreth", "link": "https://stackoverflow.com/users/8440142/shedreth"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1502289491, "post_id": 45592436, "comment_id": 78146894, "body": "Thank you for your reply. I tried to look for the function to try and change its return type, but couln&#39;t find it on the script, i only found the capture_hboot_key() Isn&#39;t there a built-in method like ToString() for C#."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1502290452, "post_id": 45592436, "comment_id": 78147675, "body": "<a href=\"https://github.com/rapid7/metasploit-framework/blob/master/lib/msf/core/post/windows/priv.rb#L231\" rel=\"nofollow noreferrer\"><code>Msf::Post::Windows::Priv#capture_book_key</code></a>. Additionally yes <code>ruby</code> does have a <code>to_s</code> but <code>ruby</code> does not generally rely on return types but rather uses duck typing to allow for a more dynamic implementation."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1502290454, "post_id": 45592436, "comment_id": 78147677, "body": "Your issue here is not that it does not return a <code>String</code> per se but rather that <code>capture_boot_key</code> cannot find (and/or access <i>privileges</i>)  the appropriate registry key in one of the following locations &quot;System\\\\CurrentControlSet\\\\Control\\\\Lsa\\\\JD&quot;, &quot;System\\\\CurrentControlSet\\\\Control\\\\Lsa\\\\Skew1&quot;, &quot;System\\\\CurrentControlSet\\\\Control\\\\Lsa\\\\GBG&quot;,&quot;System\\\\Curr&zwnj;&#8203;entControlSet\\\\Contr&zwnj;&#8203;ol\\\\Lsa\\\\Data&quot;"}, {"owner": {"reputation": 11, "user_id": 8440142, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/885e982ff6b92816ba91c98253eca2ba?s=128&d=identicon&r=PG&f=1", "display_name": "Shedreth", "link": "https://stackoverflow.com/users/8440142/shedreth"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1502290848, "post_id": 45592436, "comment_id": 78148037, "body": "So based on your words, there&#39;s nothing i can do ?"}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1502291194, "post_id": 45592436, "comment_id": 78148304, "body": "Not my words. Chances are that @eiko is correct and that you do not have the appropriate privileges to access the registry as it seems highly unlikely that those keys would be missing since they are reasonably imperative. To access the registry you would need system level privileges first thus the answer posted. Now actually my words <i>&quot;Please understand what you are doing. Especially when using what could be considered <b>malicious</b> software in the opinion of many.&quot;</i> My comments are for code edification only and I cannot condone what you are doing since you don&#39;t even know what you are doing."}, {"owner": {"reputation": 11, "user_id": 8440142, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/885e982ff6b92816ba91c98253eca2ba?s=128&d=identicon&r=PG&f=1", "display_name": "Shedreth", "link": "https://stackoverflow.com/users/8440142/shedreth"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1502291801, "post_id": 45592436, "comment_id": 78148731, "body": "please don&#39;t get me wrong , when i said &quot;nothing i can do &quot; i was referring to code modification in order to get it to work. As for your words, i do know what i&#39;m doing since i&#39;m testing on my vm( i&#39;m an intern at an infosec company) for educational purpose, and i may not know all that there is to know, ,but not knowing comes before knowing .."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1502299569, "post_id": 45592436, "comment_id": 78153571, "body": "I meant nothing insulting by my comments. One who thinks they know everything knows nothing at all. While you are correct in saying <i>&quot;not knowing comes before knowing&quot;</i> not understanding (conceptually speaking) is different than not knowing and makes the tools become far more dangerous. You cannot learn without first understanding. I may not know how to use a handgun but I can understand the process. (If I cannot then the gun is exponentially more dangerous than I). Understand and learn <code>ruby</code>. Understand and learn exploitation be the dangerous one and not the one in danger. Good Luck"}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 8440142, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/885e982ff6b92816ba91c98253eca2ba?s=128&d=identicon&r=PG&f=1", "display_name": "Shedreth", "link": "https://stackoverflow.com/users/8440142/shedreth"}, "edited": false, "score": 0, "creation_date": 1502291248, "post_id": 45594122, "comment_id": 78148351, "body": "i have already tried all the privileges escalation methods, none work"}, {"owner": {"reputation": 4150, "user_id": 7470620, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/49f3026fe13841e41d1805178eed9a3c?s=128&d=identicon&r=PG", "display_name": "eiko", "link": "https://stackoverflow.com/users/7470620/eiko"}, "reply_to_user": {"reputation": 11, "user_id": 8440142, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/885e982ff6b92816ba91c98253eca2ba?s=128&d=identicon&r=PG&f=1", "display_name": "Shedreth", "link": "https://stackoverflow.com/users/8440142/shedreth"}, "edited": false, "score": 0, "creation_date": 1502292111, "post_id": 45594122, "comment_id": 78149013, "body": "@Shedreth ah, then that&#39;s a different problem entirely! stackoverflow isn&#39;t really the place for it though. you might want to head over to <a href=\"https://security.stackexchange.com/questions\">the security stackexchange</a> to ask about privilege escalation. but keep in mind that some attacks simply fail because some machines simply aren&#39;t vulnerable."}], "tags": [], "owner": {"reputation": 4150, "user_id": 7470620, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/49f3026fe13841e41d1805178eed9a3c?s=128&d=identicon&r=PG", "display_name": "eiko", "link": "https://stackoverflow.com/users/7470620/eiko"}, "is_accepted": false, "score": 1, "last_activity_date": 1502290469, "creation_date": 1502290469, "answer_id": 45594122, "question_id": 45592436, "link": "https://stackoverflow.com/questions/45592436/ruby-undefined-method-metasploit/45594122#45594122", "title": "Ruby Undefined Method, Metasploit", "body": "<p>It looks like <code>hashdump</code> is failing to retrieve the boot key from the system registry. My best guess is that you're trying to run <code>hashdump</code> without system privileges. </p>\n\n<p>With insufficient access, the script returns <code>nil</code> instead of the boot key, then tries to unpack <code>nil</code> which causes a fairly unhelpful NoMethodError.</p>\n\n<p>Try running <code>getsystem</code> before you run <code>hashdump</code>.</p>\n"}], "owner": {"reputation": 11, "user_id": 8440142, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/885e982ff6b92816ba91c98253eca2ba?s=128&d=identicon&r=PG&f=1", "display_name": "Shedreth", "link": "https://stackoverflow.com/users/8440142/shedreth"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1052, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1502290469, "creation_date": 1502286127, "last_edit_date": 1502287037, "question_id": 45592436, "link": "https://stackoverflow.com/questions/45592436/ruby-undefined-method-metasploit", "title": "Ruby Undefined Method, Metasploit", "body": "<p>I've been trying to get credentials hashes on a windows meterpreter session, but each time i run \"run post/windows/gather/hashdump\" i get the following error:</p>\n\n<blockquote>\n  <p>Post failed: NoMethodError undefined method <code>unpack' for nil:NilClass\n   Call stack:\n     /usr/share/metasploit-framework/modules/post/windows/gather/hashdump.rb:42:in</code>run'</p>\n</blockquote>\n\n<p>the unpack() method is used through all of the hashdump.rb script but as the meterpeter session tells it's not defined.</p>\n\n<p>I've never used ruby before, so i don't know whether it's a predefined method or should i define it, nor how to do it.</p>\n\n<p>Any help is appreciated.\nThanks.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "xml"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 2, "creation_date": 1502285833, "post_id": 45592158, "comment_id": 78143761, "body": "Rails has XML serialization built-in, try to call <code>to_xml</code> on your model (since your question is tagged with ruby-on-rails I assume that your actual object is a Rails model)"}, {"owner": {"reputation": 155, "user_id": 4821316, "user_type": "registered", "accept_rate": 61, "profile_image": "https://lh6.googleusercontent.com/-bKDtq9ba2tk/AAAAAAAAAAI/AAAAAAAAACM/YsMOjzxHSik/photo.jpg?sz=128", "display_name": "11223342124", "link": "https://stackoverflow.com/users/4821316/11223342124"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1502287894, "post_id": 45592158, "comment_id": 78145516, "body": "I wasn&#39;t clear in my question - what is the best way to create those objects that will be serialized to XML? Using Struct or actual Class? And after that, how to make hierarchy from that fields?"}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1502290789, "post_id": 45592158, "comment_id": 78147980, "body": "@11223342124 if that is your true question then the question is &quot;primarily opinion based&quot; or &quot;too broad&quot; as there are numerous ways to &quot;create those objects&quot;"}], "owner": {"reputation": 155, "user_id": 4821316, "user_type": "registered", "accept_rate": 61, "profile_image": "https://lh6.googleusercontent.com/-bKDtq9ba2tk/AAAAAAAAAAI/AAAAAAAAACM/YsMOjzxHSik/photo.jpg?sz=128", "display_name": "11223342124", "link": "https://stackoverflow.com/users/4821316/11223342124"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 77, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1502285454, "creation_date": 1502285454, "question_id": 45592158, "link": "https://stackoverflow.com/questions/45592158/how-to-make-a-xml-generator-so-it-can-be-usable-for-all-kind-of-objects", "title": "How to make a XML generator so it can be usable for all kind of objects?", "body": "<p>What is the best way to create xml generator in ruby, but in a way so it can receive any model and generate xml by its fields and values?</p>\n\n<p>For now i can make a Struct:</p>\n\n<pre><code>Person = Struct.new(:name, :age, :grades)\nPerson.new('Name', 21, [{:math =&gt; 5, :english =&gt; 5}]) \n</code></pre>\n\n<p>and than pass that object to algorithm that converts it to a hash and recursively generate xml using Nokogiri Builder.</p>\n\n<p>But in this way I have to make a hash structure by hand, which isn't good I guess. How to make this so that I can just instantiate objects and pass them to a function?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3"], "comments": [{"owner": {"reputation": 1261, "user_id": 1426035, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1211ecc94ba2e83b71461323c865aa00?s=128&d=identicon&r=PG", "display_name": "Jeff Huijsmans", "link": "https://stackoverflow.com/users/1426035/jeff-huijsmans"}, "edited": false, "score": 0, "creation_date": 1502282749, "post_id": 45590955, "comment_id": 78141116, "body": "What&#39;s the output of <code>response</code>?"}, {"owner": {"reputation": 85, "user_id": 8398078, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/a0ee3eaa70eb621c3d63641ce92331ec?s=128&d=identicon&r=PG&f=1", "display_name": "rohan", "link": "https://stackoverflow.com/users/8398078/rohan"}, "reply_to_user": {"reputation": 1261, "user_id": 1426035, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1211ecc94ba2e83b71461323c865aa00?s=128&d=identicon&r=PG", "display_name": "Jeff Huijsmans", "link": "https://stackoverflow.com/users/1426035/jeff-huijsmans"}, "edited": false, "score": 0, "creation_date": 1502283010, "post_id": 45590955, "comment_id": 78141340, "body": "response:   {     &quot;revision&quot;: 25,     &quot;bytes&quot;: 10703,     &quot;thumb_exists&quot;: true,     &quot;rev&quot;: &quot;195b0ccdff&quot;,     &quot;modified&quot;: &quot;Wed, 09 Aug 2017 12:49:22 +0000&quot;,     &quot;mime_type&quot;: &quot;image/png&quot;,     &quot;path&quot;: &quot;/favicon (5).png&quot;,     &quot;is_dir&quot;: false,     &quot;size&quot;: &quot;10.5 KB&quot;,     &quot;root&quot;: &quot;app_folder&quot;,     &quot;client_mtime&quot;: &quot;Wed, 09 Aug 2017 12:49:22 +0000&quot;,     &quot;icon&quot;: &quot;page_white_picture&quot; }"}], "answers": [{"tags": [], "owner": {"reputation": 46, "user_id": 4528639, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uQvAw.jpg?s=128&g=1", "display_name": "Michael Novi", "link": "https://stackoverflow.com/users/4528639/michael-novi"}, "is_accepted": false, "score": 0, "last_activity_date": 1502283970, "last_edit_date": 1502283970, "creation_date": 1502283449, "answer_id": 45591365, "question_id": 45590955, "link": "https://stackoverflow.com/questions/45590955/upload-doc-on-dropbox-how-to-get-url/45591365#45591365", "title": "upload doc on dropbox how to get url", "body": "<p>If you want the URL to retrieve it using authorized access, you should appending the path returned in the metadata response to <a href=\"https://content.dropboxapi.com/1/files/auto/\" rel=\"nofollow noreferrer\">https://content.dropboxapi.com/1/files/auto/</a> (per <a href=\"https://www.dropbox.com/developers-v1/core/docs#files-GET\" rel=\"nofollow noreferrer\">https://www.dropbox.com/developers-v1/core/docs#files-GET</a>).</p>\n\n<p>If you want to publicly share it and get a public URL you will have to \n make a call to share it (per <a href=\"https://www.dropbox.com/developers-v1/core/docs#shares\" rel=\"nofollow noreferrer\">https://www.dropbox.com/developers-v1/core/docs#shares</a>)</p>\n\n<pre><code>client.shares(response.path)\n</code></pre>\n"}], "owner": {"reputation": 85, "user_id": 8398078, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/a0ee3eaa70eb621c3d63641ce92331ec?s=128&d=identicon&r=PG&f=1", "display_name": "rohan", "link": "https://stackoverflow.com/users/8398078/rohan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 69, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1502283970, "creation_date": 1502282388, "last_edit_date": 1502283213, "question_id": 45590955, "link": "https://stackoverflow.com/questions/45590955/upload-doc-on-dropbox-how-to-get-url", "title": "upload doc on dropbox how to get url", "body": "<p>How to get URL uploaded doc on drop box and how to store this URL our data base.</p>\n\n<p>This is the code :  </p>\n\n<pre><code>def passport_upload \n        app_key = ENV['APP_DROPBOX_APP_KEY_DEVELOPMENT'] \n        app_secret = ENV['APP_DROPBOX_APP_SECRET_DEVELOPMENT']  \n        flow = DropboxOAuth2FlowNoRedirect.new(app_key, app_secret)\n        authorize_url = flow.start()\n        client=DropboxClient.new(ENV['APP_DROPBOX_ACCESS_TOKEN_DEVELOPMENT'])\n        file = open(params[:doc])\n        file_name = params[:doc].original_filename \n        response = client.put_file(file_name, file)\n  end\n</code></pre>\n"}, {"tags": ["ruby", "ubuntu"], "comments": [{"owner": {"reputation": 2184, "user_id": 3536548, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/qEPjr.png?s=128&g=1", "display_name": "Thermatix", "link": "https://stackoverflow.com/users/3536548/thermatix"}, "edited": false, "score": 4, "creation_date": 1502281174, "post_id": 45590420, "comment_id": 78139801, "body": "What do you mean ubuntu files?"}, {"owner": {"reputation": 45322, "user_id": 421705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/581b1760881c962648f99d6040d41829?s=128&d=identicon&r=PG", "display_name": "Holger Just", "link": "https://stackoverflow.com/users/421705/holger-just"}, "edited": false, "score": 0, "creation_date": 1502285610, "post_id": 45590420, "comment_id": 78143552, "body": "This question is better suited on <a href=\"https://askubuntu.com/\">askubuntu.com</a>. In any case, please add more details about what actually happened, preferably with the copied output of your commands."}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1502286638, "post_id": 45590420, "comment_id": 78144476, "body": "If your system is corrupted. It if often easier to restart from installing the OS. In that case, just save the home directory in some other media before erasing the whole volume."}], "answers": [{"tags": [], "owner": {"reputation": 1405, "user_id": 7023415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a7f3b4db177eeb60558058e587628f7?s=128&d=identicon&r=PG&f=1", "display_name": "Leo", "link": "https://stackoverflow.com/users/7023415/leo"}, "is_accepted": false, "score": 0, "last_activity_date": 1502288453, "creation_date": 1502288453, "answer_id": 45593364, "question_id": 45590420, "link": "https://stackoverflow.com/questions/45590420/ubuntu-files-get-deleted-when-i-use-sudo-apt-get-remove-ruby/45593364#45593364", "title": "Ubuntu files get deleted when I use sudo apt-get remove ruby", "body": "<pre><code>sudo apt-get remove ruby 2.0.0\n</code></pre>\n\n<p>It work as </p>\n\n<pre><code>sudo apt-get remove ruby &amp;&amp; sudo apt-get remove 2.0.0\n</code></pre>\n\n<p>If you want remove all ruby files read <a href=\"https://stackoverflow.com/questions/3957730/how-can-i-uninstall-ruby-on-ubuntu\">this</a></p>\n\n<p>Also use ruby version meneger for remove single ruby version/ For example:</p>\n\n<pre><code>rvm uninstall VERSION_NUMBER\n</code></pre>\n\n<p>For restoring ubuntu read <a href=\"https://ubuntuforums.org/showthread.php?t=1825888\" rel=\"nofollow noreferrer\">this</a></p>\n"}], "owner": {"reputation": 1, "user_id": 8439633, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c32a2b85beebec57acd98ae2f0761d81?s=128&d=identicon&r=PG&f=1", "display_name": "toco", "link": "https://stackoverflow.com/users/8439633/toco"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 62, "favorite_count": 1, "answer_count": 1, "score": -1, "last_activity_date": 1502288453, "creation_date": 1502280839, "last_edit_date": 1502284176, "question_id": 45590420, "link": "https://stackoverflow.com/questions/45590420/ubuntu-files-get-deleted-when-i-use-sudo-apt-get-remove-ruby", "title": "Ubuntu files get deleted when I use sudo apt-get remove ruby", "body": "<p>I gave the command <code>sudo apt-get remove ruby 2.0.0</code> in Ubuntu 16, but it started deleting all the files including Ubuntu files and now I am not able to switch it back on, it's just showing a black screen!</p>\n\n<p>How can I restore my system to a bootable state?</p>\n"}, {"tags": ["arrays", "ruby", "ruby-on-rails-4", "seeding"], "comments": [{"owner": {"reputation": 2202, "user_id": 3607039, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/8Bj3I.jpg?s=128&g=1", "display_name": "Bustikiller", "link": "https://stackoverflow.com/users/3607039/bustikiller"}, "edited": false, "score": 1, "creation_date": 1502280267, "post_id": 45590064, "comment_id": 78139028, "body": "Why don&#39;t you dump the SQL into your production DB instead of doing it through Rails?"}, {"owner": {"reputation": 127444, "user_id": 492405, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/SSPGk.png?s=128&g=1", "display_name": "vcsjones", "link": "https://stackoverflow.com/users/492405/vcsjones"}, "edited": false, "score": 2, "creation_date": 1502280411, "post_id": 45590064, "comment_id": 78139140, "body": "Honestly I don&#39;t think this amount of data should be inserted with ActiveRecord for seeding purposes. Use a tool to bulk insert the data in to the database. <code>LOAD DATA INFILE</code> in MySQL can do that in a few seconds with a modestly powered database."}, {"owner": {"user_type": "does_not_exist", "display_name": "user7383466"}, "reply_to_user": {"reputation": 2202, "user_id": 3607039, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/8Bj3I.jpg?s=128&g=1", "display_name": "Bustikiller", "link": "https://stackoverflow.com/users/3607039/bustikiller"}, "edited": false, "score": 1, "creation_date": 1502280818, "post_id": 45590064, "comment_id": 78139463, "body": "@Bustikiller Because in my production I use postgresql"}, {"owner": {"user_type": "does_not_exist", "display_name": "user7383466"}, "reply_to_user": {"reputation": 127444, "user_id": 492405, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/SSPGk.png?s=128&g=1", "display_name": "vcsjones", "link": "https://stackoverflow.com/users/492405/vcsjones"}, "edited": false, "score": 0, "creation_date": 1502280851, "post_id": 45590064, "comment_id": 78139501, "body": "@vcsjones any tool for postgresql"}, {"owner": {"reputation": 2202, "user_id": 3607039, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/8Bj3I.jpg?s=128&g=1", "display_name": "Bustikiller", "link": "https://stackoverflow.com/users/3607039/bustikiller"}, "edited": false, "score": 0, "creation_date": 1502281425, "post_id": 45590064, "comment_id": 78140017, "body": "The solution is agnostic of the database you are using, that is, all database management systems have tools to import data regardless of the application they have built on them."}, {"owner": {"user_type": "does_not_exist", "display_name": "user7383466"}, "reply_to_user": {"reputation": 2202, "user_id": 3607039, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/8Bj3I.jpg?s=128&g=1", "display_name": "Bustikiller", "link": "https://stackoverflow.com/users/3607039/bustikiller"}, "edited": false, "score": 0, "creation_date": 1502281538, "post_id": 45590064, "comment_id": 78140116, "body": "@Bustikiller Thanks. Im not familiar with agnostic of the database. Could you please give me a example?"}, {"owner": {"reputation": 2487, "user_id": 8098012, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0cbdb5ca9b079de1c9700271166feead?s=128&d=identicon&r=PG", "display_name": "Pavel Mikhailyuk", "link": "https://stackoverflow.com/users/8098012/pavel-mikhailyuk"}, "edited": false, "score": 1, "creation_date": 1502282099, "post_id": 45590064, "comment_id": 78140560, "body": "Try to use CSV and <code>PostgreSQL&#39;s COPY</code>. It <i>is</i> for fast data dump/load."}, {"owner": {"user_type": "does_not_exist", "display_name": "user7383466"}, "reply_to_user": {"reputation": 2487, "user_id": 8098012, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0cbdb5ca9b079de1c9700271166feead?s=128&d=identicon&r=PG", "display_name": "Pavel Mikhailyuk", "link": "https://stackoverflow.com/users/8098012/pavel-mikhailyuk"}, "edited": false, "score": 1, "creation_date": 1502287556, "post_id": 45590064, "comment_id": 78145241, "body": "@PavelMikhailyuk Could you please give a example in answer so I can understand and for future guys with same issue. Appreciate it"}, {"owner": {"reputation": 48635, "user_id": 6742, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/xPawo.png?s=128&g=1", "display_name": "David Aldridge", "link": "https://stackoverflow.com/users/6742/david-aldridge"}, "edited": false, "score": 0, "creation_date": 1502294122, "post_id": 45590064, "comment_id": 78150434, "body": "@FriendofAfriend You should do some research first -- I found this with the first Google search <a href=\"https://github.com/diogob/postgres-copy\" rel=\"nofollow noreferrer\">github.com/diogob/postgres-copy</a>"}, {"owner": {"reputation": 2487, "user_id": 8098012, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0cbdb5ca9b079de1c9700271166feead?s=128&d=identicon&r=PG", "display_name": "Pavel Mikhailyuk", "link": "https://stackoverflow.com/users/8098012/pavel-mikhailyuk"}, "edited": false, "score": 0, "creation_date": 1502304484, "post_id": 45590064, "comment_id": 78156438, "body": "@FriendofAfriend Yes, I agree with David - find <code>COPY</code> documentation is easy. I did an answer just because you accepted worst one - don&#39;t even try to insert 2.7M rows with AR and without transaction"}], "answers": [{"tags": [], "owner": {"reputation": 1405, "user_id": 7023415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a7f3b4db177eeb60558058e587628f7?s=128&d=identicon&r=PG&f=1", "display_name": "Leo", "link": "https://stackoverflow.com/users/7023415/leo"}, "is_accepted": false, "score": 0, "last_activity_date": 1502288773, "creation_date": 1502288773, "answer_id": 45593482, "question_id": 45590064, "link": "https://stackoverflow.com/questions/45590064/ruby-on-rails-seeding-big-data-over-2-7m-record-to-production-database/45593482#45593482", "title": "Ruby on Rails - Seeding big data (over 2.7M) record to production database", "body": "<p>For example do something like this:</p>\n\n<pre><code>unless Rails.env.production?\n  connection = ActiveRecord::Base.connection\n\n\n  sql = File.read('db/MySQL.sql')\n  statements = sql.split(/;$/)\n  statements.pop\n\n  ActiveRecord::Base.transaction do\n    statements.each do |statement|\n      connection.execute(statement)\n    end\n  end\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2487, "user_id": 8098012, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0cbdb5ca9b079de1c9700271166feead?s=128&d=identicon&r=PG", "display_name": "Pavel Mikhailyuk", "link": "https://stackoverflow.com/users/8098012/pavel-mikhailyuk"}, "is_accepted": false, "score": 1, "last_activity_date": 1502304268, "creation_date": 1502304268, "answer_id": 45598413, "question_id": 45590064, "link": "https://stackoverflow.com/questions/45590064/ruby-on-rails-seeding-big-data-over-2-7m-record-to-production-database/45598413#45598413", "title": "Ruby on Rails - Seeding big data (over 2.7M) record to production database", "body": "<p>Most of big DBMS extend SQL with command for bulk seeding. <a href=\"https://www.postgresql.org/docs/9.6/static/sql-copy.html\" rel=\"nofollow noreferrer\"><code>COPY</code></a> is <code>PostgreSQL</code> one. <code>COPY</code> is much faster than <code>INSERT</code>.</p>\n\n<p>So, you need to have <code>CSV</code> file with headers corresponding to column names (<em>id, name, stated_id</em>). You can obtain it from another PostgreSQL DB with <code>COPY</code> also.</p>\n\n<p>Call it <code>cities.csv</code> and place it in <code>db</code> folder. Then your <code>seeds.rb</code> might look like:</p>\n\n<pre><code>csv_path = Rails.root.join('db', 'cities.csv')\ncopy_clause = \"COPY cities FROM '#{csv_path}' WITH(FORMAT CSV, HEADER)\"\nActiveRecord::Base.connection.execute(copy_clause)\n</code></pre>\n\n<p>Then run <code>rake db:seed</code>.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user7383466"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 503, "favorite_count": 1, "answer_count": 2, "score": 3, "last_activity_date": 1502304268, "creation_date": 1502279938, "question_id": 45590064, "link": "https://stackoverflow.com/questions/45590064/ruby-on-rails-seeding-big-data-over-2-7m-record-to-production-database", "title": "Ruby on Rails - Seeding big data (over 2.7M) record to production database", "body": "<p>In my application I have a <code>City</code> model. I have a <code>sql</code> file that contains all the cities in the world <em>(its over 2.7M)</em> &amp; I need to seed all of them to my production server.</p>\n\n<p>I know usually I could do this in <code>seeds.rb</code>:</p>\n\n<pre><code>cities = City.create([\n\n{id: 1, name: 'Bombuflat',  state_id: 1},\n{id: 2, name: 'Garacharma',  state_id: 1},\n{id: 3, name: 'Port Blair',  state_id: 1},\n// Other cities\n])\n</code></pre>\n\n<p>But since this is a big data to seed, it will take really long time to add <code>id</code>, <code>name</code>, <code>state_id</code> on each line.</p>\n\n<p>Right now my <code>cities.sql</code> has a array of cities like:</p>\n\n<pre><code>//id, state_id, name\n(1, 1, 'Aix\u00e0s'),\n(2, 1, 'Aixirivali'),\n(3, 1, 'Aixirivall')\n</code></pre>\n\n<p>What is the best way to do this so I don't need to add <code>id</code>, <code>name</code>, <code>state_id</code> to each line and maybe use the array I already have.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "devise"], "answers": [{"comments": [{"owner": {"reputation": 685, "user_id": 7458849, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/89kDb.jpg?s=128&g=1", "display_name": "Theopap", "link": "https://stackoverflow.com/users/7458849/theopap"}, "edited": false, "score": 0, "creation_date": 1502284021, "post_id": 45590404, "comment_id": 78142179, "body": "hmmmm... I can&#39;t see the <code>a</code> typo, where is it?"}, {"owner": {"reputation": 655, "user_id": 2494631, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DCC31.jpg?s=128&g=1", "display_name": "vijoc", "link": "https://stackoverflow.com/users/2494631/vijoc"}, "reply_to_user": {"reputation": 685, "user_id": 7458849, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/89kDb.jpg?s=128&g=1", "display_name": "Theopap", "link": "https://stackoverflow.com/users/7458849/theopap"}, "edited": false, "score": 0, "creation_date": 1502358657, "post_id": 45590404, "comment_id": 78178921, "body": "There is the encoded <code>ema%E2%80%8C%E2%80%8Bil=example%40gmail.com</code>, which suggests that there is a character that requires encoding, i.e. not an <code>a</code>."}, {"owner": {"reputation": 685, "user_id": 7458849, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/89kDb.jpg?s=128&g=1", "display_name": "Theopap", "link": "https://stackoverflow.com/users/7458849/theopap"}, "edited": false, "score": 0, "creation_date": 1502359422, "post_id": 45590404, "comment_id": 78179481, "body": "Kind of new to rails so a pointer would be appreciated, how do I find and  encode the character?"}, {"owner": {"reputation": 685, "user_id": 7458849, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/89kDb.jpg?s=128&g=1", "display_name": "Theopap", "link": "https://stackoverflow.com/users/7458849/theopap"}, "edited": false, "score": 0, "creation_date": 1502368379, "post_id": 45590404, "comment_id": 78186018, "body": "I has some some hidden whitespace chars in the <code>new_transaction_path(session[:registration_params].merge(ema&zwnj;&#8203;il:resource.email))</code>.&zwnj;&#8203;.. I had to retype this line and it worked!!!"}], "tags": [], "owner": {"reputation": 655, "user_id": 2494631, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DCC31.jpg?s=128&g=1", "display_name": "vijoc", "link": "https://stackoverflow.com/users/2494631/vijoc"}, "is_accepted": false, "score": 1, "last_activity_date": 1502282572, "last_edit_date": 1502282572, "creation_date": 1502280818, "answer_id": 45590404, "question_id": 45590011, "link": "https://stackoverflow.com/questions/45590011/adding-parameters-in-a-query-string-rails/45590404#45590404", "title": "Adding parameters in a query string, Rails", "body": "<p>Looking at your update, it seems there is a character in your <code>email</code> parameter name that looks like <code>a</code> but is not. It can be seen from the</p>\n\n<pre><code>Started GET \"/transactions/new.1?ema%E2%80%8C%E2%80%8Bil=example%40gmail.com&amp;plan_id=bs96&amp;price=150.0\" for 127.0.0.1 at 2017-08-09 15:24:17 +0300\n</code></pre>\n\n<p>Double check &amp; retype <code>email</code> where you're setting it.</p>\n"}], "owner": {"reputation": 685, "user_id": 7458849, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/89kDb.jpg?s=128&g=1", "display_name": "Theopap", "link": "https://stackoverflow.com/users/7458849/theopap"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 344, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1502368606, "creation_date": 1502279818, "last_edit_date": 1502281602, "question_id": 45590011, "link": "https://stackoverflow.com/questions/45590011/adding-parameters-in-a-query-string-rails", "title": "Adding parameters in a query string, Rails", "body": "<p>I'm adding parameters in a query string to a path that is\u00a0new_store_registration and kept by the after_sign_up_path_for method.\nregistrations_controller.rb </p>\n\n<pre><code>def new \n  session[:registration_params] = request.query_parameters\nend\n\n\ndef after_sign_up_path_for(resource)\n  new_transaction_path(resource, session[:registration_params])\nend\n</code></pre>\n\n<p>I'm pulling the following params:</p>\n\n<pre><code>&lt;%= link_to \"Sign up\", new_store_registration_path(:plan_id =&gt; plan.id, :price =&gt; plan.price) %&gt;\n</code></pre>\n\n<p>After sign-up, the app redirects to the views/transcation/new.html.erb, which has the plan_id, price params. </p>\n\n<p>At this point I'm trying to pass the email param inside the new.html.erb and keep the rest params with:</p>\n\n<pre><code>&lt;%= hidden_field_tag(:email, params[:email]) %&gt;\n&lt;%= hidden_field_tag(:plan_id, params[\"plan_id\"]) %&gt;\n&lt;%= hidden_field_tag(:amount, params[\"price\"]) %&gt;\n</code></pre>\n\n<p>But the email param is coming up empty</p>\n\n<pre><code>Parameters: {\"utf8\"=&gt;\"\u2713\", \"authenticity_token\"=&gt;\"KeS2xK7NIJZwFQvW2kJKupcpURnQweq+yoRgk9AJ1aaOgFIIym4RKadI4jc6vYynMo4vKR4eLmdIynfBG+EusQ==\", \"email\"=&gt;\"\", \"plan_id\"=&gt;\"bs96\", \"amount\"=&gt;\"150.0\", \"payment_method_nonce\"=&gt;\"0c22f2fa-e212-0ad3-753b-0d183d02522b\"}\n</code></pre>\n\n<p>Any idea why this is not working???</p>\n\n<p><strong>Update1</strong></p>\n\n<p>After I submit signup I get this:</p>\n\n<pre><code>Started POST \"/stores\" for 127.0.0.1 at 2017-08-09 15:24:17 +0300\nProcessing by Stores::RegistrationsController#create as HTML\nParameters: {\"utf8\"=&gt;\"\u2713\",  \"authenticity_token\"=&gt;\"8szvzrbEVUb1xvYcKwidi+4AYnQD46R96Y0C6ONiI65mEtRkATtJ  IRXCb60UNyKs0knwpeDnMLwy9iXmK8TRgw==\", \"store\"=&gt; {\"email\"=&gt;\"example@gmail.com\", \"password\"=&gt;\"[FILTERED]\",  \"password_confirmation\"=&gt;\"[FILTERED]\", \"account_attributes\"=&gt; {\"first_name\"=&gt;\"ted\", \"last_name\"=&gt;\"tedpaps\", \"buisness_name\"=&gt;\"1\",  \"buisness_description\"=&gt;\"1\", \"web_site\"=&gt;\"1\", \"phone_number\"=&gt;\"1\",  \"street\"=&gt;\"1\", \"city\"=&gt;\"1\", \"state\"=&gt;\"1\", \"zip_code\"=&gt;\"1\",  \"country\"=&gt;\"1\"}}, \"commit\"=&gt;\"Sign up\"}\n  (0.1ms)  begin transaction\n  Store Exists (0.2ms)  SELECT  1 AS one FROM \"stores\" WHERE  \"stores\".\"email\" = ? LIMIT ?  [[\"email\", \"example@gmail.com\"], [\"LIMIT\",  1]]\n  SQL (0.5ms)  INSERT INTO \"stores\" (\"email\", \"encrypted_password\",  \"created_at\", \"updated_at\") VALUES (?, ?, ?, ?)  [[\"email\",  \"example@gmail.com\"], [\"encrypted_password\",  \"$2a$11$Xet14fY.N3rvvPZ2sjdn6ObbKShVMkw/4qmPWiPG/OjsRmiIxqlGq\"],  [\"created_at\", \"2017-08-09 12:24:17.640427\"], [\"updated_at\", \"2017-08-09  12:24:17.640427\"]]\n  SQL (0.2ms)  INSERT INTO \"accounts\" (\"buisness_name\", \"buisness_description\", \"web_site\", \"phone_number\", \"street\", \"zip_code\", \"country\", \"first_name\", \"last_name\", \"created_at\", \"updated_at\", \"store_id\", \"city\", \"state\") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)  [[\"buisness_name\", \"1\"], [\"buisness_description\", \"1\"], [\"web_site\", \"1\"], [\"phone_number\", \"1\"], [\"street\", \"1\"], [\"zip_code\", \"1\"], [\"country\", \"1\"], [\"first_name\", \"ted\"], [\"last_name\", \"tedpaps\"], [\"created_at\", \"2017-08-09 12:24:17.642495\"], [\"updated_at\", \"2017-08-09 12:24:17.642495\"], [\"store_id\", 1], [\"city\", \"1\"], [\"state\", \"1\"]]\n   (1.6ms)  commit transaction\nRedirected to http://localhost:3000/transactions/new.1?ema%E2%80%8C%E2%80%8Bil=example%40gmail.com&amp;plan_id=bs96&amp;price=150.0\nCompleted 302 Found in 160ms (ActiveRecord: 2.6ms)\n</code></pre>\n\n<p>And get redirected to:</p>\n\n<pre><code>Started GET \"/transactions/new.1?ema%E2%80%8C%E2%80%8Bil=example%40gmail.com&amp;plan_id=bs96&amp;price=150.0\" for 127.0.0.1 at 2017-08-09 15:24:17 +0300\nProcessing by TransactionsController#new as \nParameters: {\"ema\u200c\u200bil\"=&gt;\"example@gmail.com\", \"plan_id\"=&gt;\"bs96\", \"price\"=&gt;\"150.0\"}\nRendering transactions/new.html.erb within layouts/application\nRendered transactions/new.html.erb within layouts/application (1.0ms)\nCompleted 200 OK in 1209ms (Views: 37.7ms | ActiveRecord: 0.0ms)\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "validation", "clearance"], "answers": [{"comments": [{"owner": {"reputation": 12283, "user_id": 6716, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/fa24c11cba85a3445c3833f3a782c771?s=128&d=identicon&r=PG", "display_name": "Ian Dickinson", "link": "https://stackoverflow.com/users/6716/ian-dickinson"}, "edited": false, "score": 0, "creation_date": 1502282024, "post_id": 45590055, "comment_id": 78140511, "body": "Thanks for your reply. I should have mentioned in the original reply that I had already tried that, but I get a different error. I&#39;ve updated the post, above."}, {"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "reply_to_user": {"reputation": 12283, "user_id": 6716, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/fa24c11cba85a3445c3833f3a782c771?s=128&d=identicon&r=PG", "display_name": "Ian Dickinson", "link": "https://stackoverflow.com/users/6716/ian-dickinson"}, "edited": false, "score": 0, "creation_date": 1502284455, "post_id": 45590055, "comment_id": 78142527, "body": "@IanDickinson TIL that the <code>UniquenessValidator</code> is not part of <code>ActiveModel::Validations</code>. I updated my answer to address the problem in your updated question."}], "tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": true, "score": 1, "last_activity_date": 1502284376, "last_edit_date": 1502284376, "creation_date": 1502279913, "answer_id": 45590055, "question_id": 45589381, "link": "https://stackoverflow.com/questions/45589381/how-do-disable-email-validation-in-clearance/45590055#45590055", "title": "How do disable email validation in Clearance", "body": "<p><code>User.new</code> does not trigger validations. Therefore the error cannot be connected to the validations itself.</p>\n\n<p>At the moment your <code>User</code> model is kind of both: A subclass of <code>ActiveRecord::Base</code> and it behaves like a <code>Dynamoid::Document</code>. </p>\n\n<pre><code>class User &lt; ApplicationRecord \n  include Dynamoid::Document\n\n  # ...\nend\n</code></pre>\n\n<p><code>ActiveRecord::Base</code> reads the table definition from the database when an instance is initialized. This leads to your exception, because the table does not exist. Just remove the inheritance from <code>ApplicationRecord</code>.</p>\n\n<pre><code>class User\n  include Dynamoid::Document\n\n  # ...\nend\n</code></pre>\n\n<p>The second issue when you remove the inheritance is more complex. Usually, I would suggest to just <code>include ActiveModel::Validations</code> when you want to validate models that do not inherit from <code>ActiveRecord::Base</code>. But the <code>UniquenessValidator</code> isn't defined in <code>ActiveModel::Validations</code> but in <code>ActiveRecord::Validations</code> (what makes kind of sense). This makes <code>Clearance</code> incompatible with models that do not inherit from <code>ActiveRecord::Base</code>.</p>\n\n<p>I would probably define a dummy implementation of a <code>UniquenessValidator</code> as a work-around:</p>\n\n<pre><code>class User\n  include Dynamoid::Document\n\n  class UniquenessValidator\n    def initialize(_options); end\n    def def validate_each(_record, _attribute, _value); end\n  end\n\n  # ...\nend\n</code></pre>\n"}], "owner": {"reputation": 12283, "user_id": 6716, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/fa24c11cba85a3445c3833f3a782c771?s=128&d=identicon&r=PG", "display_name": "Ian Dickinson", "link": "https://stackoverflow.com/users/6716/ian-dickinson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 139, "favorite_count": 0, "accepted_answer_id": 45590055, "answer_count": 1, "score": 0, "last_activity_date": 1502284376, "creation_date": 1502278043, "last_edit_date": 1502282009, "question_id": 45589381, "link": "https://stackoverflow.com/questions/45589381/how-do-disable-email-validation-in-clearance", "title": "How do disable email validation in Clearance", "body": "<p>I'm trying to get <a href=\"https://github.com/thoughtbot/clearance\" rel=\"nofollow noreferrer\">Clearance</a> to work with AWS Dynamo as the back-end store. The problem I'm having is that I can't get Clearance to <strong>not</strong> do the email-uniqueness validation, which it can't do because it's not able to do standard ActiveRecord uniqueness validations via a SQL query.</p>\n\n<p>According to <a href=\"https://github.com/thoughtbot/clearance/blob/master/lib/clearance/user.rb\" rel=\"nofollow noreferrer\">the comments in the code</a>, I should be able to have my <code>User</code> object return <code>email_optional?</code> <code>true</code>, and that should disable the uniqueness validation on emails. So I have:</p>\n\n<pre class=\"lang-ruby prettyprint-override\"><code>class User &lt; ApplicationRecord\n  include Dynamoid::Document\n  include Clearance::User\n\n  field :name\n  field :email\n\n  def email_optional?\n    puts 'yes, email is optional'\n    true\n  end\nend\n</code></pre>\n\n<p>But, when I try to create a user I get an error, and, more to the point, the <code>puts</code> is not executed:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>$ rails c\nRunning via Spring preloader in process 18665\nLoading development environment (Rails 5.1.3)\nirb(main):001:0&gt; u = User.new(name: 'ijd', email: 'ian@fu.bar', password: 'test')\nActiveRecord::StatementInvalid: Could not find table 'editor_development_users'\n    from (irb):1\n</code></pre>\n\n<p>Update: the reply from @spickermann reminded me that I should have noted that I also tried without subclassing <code>ActiveRecord::Base</code> (via <code>ApplicationRecord</code>). It gives a different error:</p>\n\n<pre class=\"lang-ruby prettyprint-override\"><code>class User\n  include Dynamoid::Document\n  ....\n</code></pre>\n\n<pre class=\"lang-none prettyprint-override\"><code>irb(main):002:0&gt; reload!\nReloading...\n=&gt; true\nirb(main):003:0&gt; u = User.new(name: 'ijd', email: 'ian@fu.bar', password: 'test')\nArgumentError: Unknown validator: 'UniquenessValidator'\n  from app/models/user.rb:4:in `include'\n  from app/models/user.rb:4:in `&lt;class:User&gt;'\n  from app/models/user.rb:2:in `&lt;top (required)&gt;'\n  from (irb):3\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "phantomjs", "watir-webdriver"], "comments": [{"owner": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "edited": false, "score": 1, "creation_date": 1502280405, "post_id": 45588826, "comment_id": 78139135, "body": "You should switch to &quot;Watir&quot; instead of &quot;Watir-Webdriver&quot;. The Watir-Webdriver codebase is deprecated. It&#39;s updates now occur in Watir."}, {"owner": {"reputation": 449, "user_id": 4159807, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c7522429c1daf6692b63b19790312e50?s=128&d=identicon&r=PG&f=1", "display_name": "ChrisWilson", "link": "https://stackoverflow.com/users/4159807/chriswilson"}, "reply_to_user": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "edited": false, "score": 0, "creation_date": 1502422744, "post_id": 45588826, "comment_id": 78212552, "body": "Thanks for the advice!  Will do."}], "answers": [{"comments": [{"owner": {"reputation": 449, "user_id": 4159807, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c7522429c1daf6692b63b19790312e50?s=128&d=identicon&r=PG&f=1", "display_name": "ChrisWilson", "link": "https://stackoverflow.com/users/4159807/chriswilson"}, "edited": false, "score": 0, "creation_date": 1502336621, "post_id": 45590514, "comment_id": 78167323, "body": "Thank you so much!!"}, {"owner": {"reputation": 449, "user_id": 4159807, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c7522429c1daf6692b63b19790312e50?s=128&d=identicon&r=PG&f=1", "display_name": "ChrisWilson", "link": "https://stackoverflow.com/users/4159807/chriswilson"}, "edited": false, "score": 0, "creation_date": 1502423001, "post_id": 45590514, "comment_id": 78212607, "body": "I tried looking through the Watir documentation before to try and solve my problem before posting on stackoverflow, but couldn&#39;t seem to find my answer there.  Did I just need to look harder or is there a good tutorial for Watir that you know of?"}, {"owner": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "reply_to_user": {"reputation": 449, "user_id": 4159807, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c7522429c1daf6692b63b19790312e50?s=128&d=identicon&r=PG&f=1", "display_name": "ChrisWilson", "link": "https://stackoverflow.com/users/4159807/chriswilson"}, "edited": false, "score": 0, "creation_date": 1502715409, "post_id": 45590514, "comment_id": 78307512, "body": "You could try my book, <a href=\"https://leanpub.com/watirways/read#leanpub-auto-locating-an-element---basics\" rel=\"nofollow noreferrer\">Watirways</a>. It&#39;s only partially written and a bit dated, but it&#39;s a starting point."}], "tags": [], "owner": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "is_accepted": true, "score": 4, "last_activity_date": 1502281101, "creation_date": 1502281101, "answer_id": 45590514, "question_id": 45588826, "link": "https://stackoverflow.com/questions/45588826/watir-webdriver-not-grabbing-the-specified-divs-and-not-sure-why/45590514#45590514", "title": "Watir-webdriver not grabbing the specified divs, and not sure why?", "body": "<p>Assuming you are trying to locate:</p>\n\n<pre><code>&lt;a class=\"title may-blank outbound\" data-event-action=\"title\" href=\"https://i.redd.it/kxtpiskh9mez.jpg\" tabindex=\"1\" data-href-url=\"https://i.redd.it/kxtpiskh9mez.jpg\" data-outbound-url=\"https://out.reddit.com/t3_6si8wj?url=https%3A%2F%2Fi.redd.it%2Fkxtpiskh9mez.jpg&amp;amp;token=AQAAKQiLWXNK30ZkH9-TplVYPCVEIJwNWgqFZCdFuOc3O5l1c7M1&amp;amp;app_name=reddit.com\" data-outbound-expiration=\"1502283817000\" rel=\"\"&gt;Fries&lt;/a&gt;\n</code></pre>\n\n<p>The problem is the element is an <code>a</code> rather than a <code>div</code>. You need to do at least:</p>\n\n<pre><code>@browser.links(class: \"title may-blank \")\n</code></pre>\n\n<p>While this will return results, it might not be everything you expect. Supporting multiple classes in a <code>String</code> is also being deprecated in Watir.</p>\n\n<p>I think you actually want just:</p>\n\n<pre><code>@browser.links(class: \"title\")\n</code></pre>\n\n<p>If you do want both classes, use:</p>\n\n<pre><code>@browser.links(class: [\"title\", \"may-blank\"])\n</code></pre>\n"}], "owner": {"reputation": 449, "user_id": 4159807, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c7522429c1daf6692b63b19790312e50?s=128&d=identicon&r=PG&f=1", "display_name": "ChrisWilson", "link": "https://stackoverflow.com/users/4159807/chriswilson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 0, "accepted_answer_id": 45590514, "answer_count": 1, "score": 1, "last_activity_date": 1502388811, "creation_date": 1502276394, "last_edit_date": 1502388811, "question_id": 45588826, "link": "https://stackoverflow.com/questions/45588826/watir-webdriver-not-grabbing-the-specified-divs-and-not-sure-why", "title": "Watir-webdriver not grabbing the specified divs, and not sure why?", "body": "<p>So this is the code for the controller, that I'm trying to use.</p>\n\n<pre><code>class ScraperController &lt; ApplicationController\n\n  def getinformation\n      require 'watir-webdriver'\n      require 'phantomjs'\n\n      @browser = Watir::Browser.new:phantomjs\n      @browser.goto \"http://reddit.com\"\n      @divs = @browser.divs(class: \"title may-blank \")\n\n  end\n\nend\n</code></pre>\n\n<p>On the view page, I have &lt;%= @divs.length %> and it's outputting 0.  When I type &lt;%= browser.title %> on the view page it gives me \"reddit: the front page of the internet\", so I know I'm getting something from the webpage. </p>\n\n<p>I found the div class \"title may-blank \" by inspecting the titles of some of the posts on the home page, and I have tried using the div class \"title may-blank \" and \"title may-blank\".  One with the space at the end, how it's shown when it's inspected on the reddit page and one without the space at the end.  Both give me nothing though.  </p>\n"}, {"tags": ["ruby", "metaprogramming"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1502276910, "post_id": 45588687, "comment_id": 78136622, "body": "What function? From where to determine? Please provide an explanation, that is understandable."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1502276943, "post_id": 45588687, "comment_id": 78136641, "body": "Also, this question has nothing to do with neither rails nor metaprogramming."}, {"owner": {"reputation": 729, "user_id": 4475119, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/HxSBQ.jpg?s=128&g=1", "display_name": "Achyut Rastogi", "link": "https://stackoverflow.com/users/4475119/achyut-rastogi"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1502278267, "post_id": 45588687, "comment_id": 78137573, "body": "@mudasobwa Does this help?"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1502279920, "post_id": 45588687, "comment_id": 78138756, "body": "No it does not. What function \u201cwill return\u201d?"}, {"owner": {"reputation": 729, "user_id": 4475119, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/HxSBQ.jpg?s=128&g=1", "display_name": "Achyut Rastogi", "link": "https://stackoverflow.com/users/4475119/achyut-rastogi"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1502287464, "post_id": 45588687, "comment_id": 78145168, "body": "@mudasobwa I think it explains that set_trace_func &quot;suspends&quot; the function during its execution. So I wanted to know what value it will return, It can be determined by processing the source code or using TracePoint as answered by Stefan below. I would love some more constructive criticism."}], "answers": [{"tags": [], "owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "is_accepted": true, "score": 3, "last_activity_date": 1502281032, "last_edit_date": 1502281032, "creation_date": 1502279957, "answer_id": 45590072, "question_id": 45588687, "link": "https://stackoverflow.com/questions/45588687/given-the-binding-determine-what-a-rails-method-returns/45590072#45590072", "title": "Given the binding, determine what a rails method returns?", "body": "<p><code>set_trace_func</code> was superseded by <a href=\"http://ruby-doc.org/core-2.4.1/TracePoint.html\" rel=\"nofollow noreferrer\"><code>TracePoint</code></a> which is capable of inspecting a method's <a href=\"http://ruby-doc.org/core-2.4.1/TracePoint.html#method-i-return_value\" rel=\"nofollow noreferrer\"><code>return_value</code></a>:</p>\n\n<pre><code>def foo\n  2 * 3\nend\n\nTracePoint.trace(:return) do |tp|\n  puts \"`#{tp.method_id}' returned #{tp.return_value.inspect}\"\nend\n\nfoo\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>`foo' returned 6\n</code></pre>\n\n<p>There's also <code>:c_return</code> to trace methods implemented in C and <code>b_return</code> for blocks.</p>\n"}], "owner": {"reputation": 729, "user_id": 4475119, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/HxSBQ.jpg?s=128&g=1", "display_name": "Achyut Rastogi", "link": "https://stackoverflow.com/users/4475119/achyut-rastogi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "accepted_answer_id": 45590072, "answer_count": 1, "score": -3, "last_activity_date": 1502701184, "creation_date": 1502276037, "last_edit_date": 1502701184, "question_id": 45588687, "link": "https://stackoverflow.com/questions/45588687/given-the-binding-determine-what-a-rails-method-returns", "title": "Given the binding, determine what a rails method returns?", "body": "<p>I want to do some processing for every method that runs inside my rails code, for that I require some information about the method during run-time. I am using set_trace_func to do this. Inside set_trace_func we receive binding:</p>\n\n<pre><code>set_trace_func proc { |event, file, line, id, binding, classname|\n  printf \"%8s %s:%-2d %10s %8s\\n\", event, file, line, id, classname\n}\n</code></pre>\n\n<p>How can I determine from this binding what the function will return? I know how to access variables, parameters and the like but can't figure out how to get the return value, also is there a better tool for doing this?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "postgresql"], "comments": [{"owner": {"reputation": 1099, "user_id": 1967868, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/38a7404c188b85337c9613bc2cc7cd93?s=128&d=identicon&r=PG", "display_name": "zauzaj", "link": "https://stackoverflow.com/users/1967868/zauzaj"}, "edited": false, "score": 0, "creation_date": 1502279136, "post_id": 45588424, "comment_id": 78138195, "body": "Try to do <code>bundle install</code> then <code>rake db:drop db:create db:migrate</code> . What is the output ?"}, {"owner": {"reputation": 719, "user_id": 8415116, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/982821e593420b7bdd8aa76f9ad5c1ef?s=128&d=identicon&r=PG&f=1", "display_name": "janedoe", "link": "https://stackoverflow.com/users/8415116/janedoe"}, "reply_to_user": {"reputation": 1099, "user_id": 1967868, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/38a7404c188b85337c9613bc2cc7cd93?s=128&d=identicon&r=PG", "display_name": "zauzaj", "link": "https://stackoverflow.com/users/1967868/zauzaj"}, "edited": false, "score": 0, "creation_date": 1502279654, "post_id": 45588424, "comment_id": 78138559, "body": "Ok, I did a <code>bundle install</code> followed by a <code>rake db:migrate</code> and got the same error as above. for some reason it&#39;s ignoring my config file altogether?"}, {"owner": {"reputation": 1099, "user_id": 1967868, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/38a7404c188b85337c9613bc2cc7cd93?s=128&d=identicon&r=PG", "display_name": "zauzaj", "link": "https://stackoverflow.com/users/1967868/zauzaj"}, "edited": false, "score": 0, "creation_date": 1502280459, "post_id": 45588424, "comment_id": 78139188, "body": "but did you run whole command what i posted above ? Not just <code>db:migrate</code> ?"}, {"owner": {"reputation": 719, "user_id": 8415116, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/982821e593420b7bdd8aa76f9ad5c1ef?s=128&d=identicon&r=PG&f=1", "display_name": "janedoe", "link": "https://stackoverflow.com/users/8415116/janedoe"}, "reply_to_user": {"reputation": 1099, "user_id": 1967868, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/38a7404c188b85337c9613bc2cc7cd93?s=128&d=identicon&r=PG", "display_name": "zauzaj", "link": "https://stackoverflow.com/users/1967868/zauzaj"}, "edited": false, "score": 0, "creation_date": 1502280796, "post_id": 45588424, "comment_id": 78139441, "body": "I don&#39;t want to drop my entire database, there&#39;s way too much valuable data in there for me to just drop like that."}], "answers": [{"comments": [{"owner": {"reputation": 719, "user_id": 8415116, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/982821e593420b7bdd8aa76f9ad5c1ef?s=128&d=identicon&r=PG&f=1", "display_name": "janedoe", "link": "https://stackoverflow.com/users/8415116/janedoe"}, "edited": false, "score": 0, "creation_date": 1502281267, "post_id": 45590480, "comment_id": 78139888, "body": "thank you!! I think this is exactly what is wrong, I have a DATABASE_URL defined for another app in my environment variables."}], "tags": [], "owner": {"reputation": 88, "user_id": 2252514, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/d21nG.png?s=128&g=1", "display_name": "Amr Afifi", "link": "https://stackoverflow.com/users/2252514/amr-afifi"}, "is_accepted": true, "score": 2, "last_activity_date": 1502281026, "creation_date": 1502281026, "answer_id": 45590480, "question_id": 45588424, "link": "https://stackoverflow.com/questions/45588424/rails-app-trying-to-use-mongodb-when-ive-never-used-mongodb-ever/45590480#45590480", "title": "Rails App trying to use mongodb when I&#39;ve never used mongodb ever", "body": "<p>Please check <a href=\"https://stackoverflow.com/questions/31544547/rake-tasks-seem-to-ignore-database-yml-configuration\">this answer</a>. It seems like there is a link in the bash_profile which affects the Rails database configurations.</p>\n"}], "owner": {"reputation": 719, "user_id": 8415116, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/982821e593420b7bdd8aa76f9ad5c1ef?s=128&d=identicon&r=PG&f=1", "display_name": "janedoe", "link": "https://stackoverflow.com/users/8415116/janedoe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 0, "accepted_answer_id": 45590480, "answer_count": 1, "score": 0, "last_activity_date": 1502281026, "creation_date": 1502275365, "last_edit_date": 1502276350, "question_id": 45588424, "link": "https://stackoverflow.com/questions/45588424/rails-app-trying-to-use-mongodb-when-ive-never-used-mongodb-ever", "title": "Rails App trying to use mongodb when I&#39;ve never used mongodb ever", "body": "<p>So my app was working fine until I restarted my computer and tried to run \"rails server\" to get my server up and running again. Instead, I get the following errors:</p>\n\n<pre><code>/Users/janedoe/.rvm/gems/ruby-2.3.0/gems/activesupport-4.1.5/lib/active_support/dependencies.rb:247:in `require': \n\nCould not load 'active_record/connection_adapters/mongodb_adapter'. \nMake sure that the adapter in config/database.yml is valid. \nIf you use an adapter other than 'mysql', 'mysql2', 'postgresql' or \n'sqlite3' add the necessary adapter gem to the Gemfile. (LoadError)\n</code></pre>\n\n<p>Anyways, I've <em>never</em> used mongodb with my application in my entire life. (I use postgres) I don't know why it's asking me to use that adapter. The only thing I can think of is that I installed mongodb using homebrew for a separate project that has nothing to do with Rails. I don't know if maybe after installing it changed some of my things around for some weird, inexplicable reason.</p>\n\n<p>Here is my database.yml file</p>\n\n<pre><code>development: \n  adapter: postgresql\n  encoding: unicode\n  pool: 5\n  timeout: 5000\n</code></pre>\n\n<p>I'm not sure <em>at all</em> why it's trying to use mongodb_adapter. I dont have that specified anywhere, I haven't told it to ever use mongodb, I don't understand at all why this is happening....</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1502283306, "post_id": 45587667, "comment_id": 78141582, "body": "<i>&quot;this is returning an error&quot;</i> \u2013 show it, please."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1502284675, "post_id": 45587667, "comment_id": 78142713, "body": "&quot;this is returning an error&quot; is not a precise enough error description for us to help you. <i>What</i> doesn&#39;t work? <i>How</i> doesn&#39;t it work? What trouble do you have with your code? Do you get an error message? What is the error message? Is the result you are getting not the result you are expecting? What result do you expect and why, what is the result you are getting and how do the two differ? Is the behavior you are observing not the desired behavior? What is the desired behavior and why, what is the observed behavior, and in what way do they differ?"}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1502284730, "post_id": 45587667, "comment_id": 78142758, "body": "Can you provide a <i>precise</i> specification of what it is that you want to happen, including any and all rules, exceptions from those rules, corner cases, special cases, boundary cases, and edge cases? Can you provide sample inputs and outputs demonstrating what you expect to happen, both in normal cases, and in all the exceptions, corner cases, special cases, boundary cases, and edge cases? For example: what should be returned if the array is empty? What if there are fewer than 3 elements? What if <code>n</code> is not an array but an infinite stream?"}], "answers": [{"comments": [{"owner": {"reputation": 69, "user_id": 8041945, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e11758949228df43138240ec1e7b9bdf?s=128&d=identicon&r=PG&f=1", "display_name": "LewMoore", "link": "https://stackoverflow.com/users/8041945/lewmoore"}, "edited": false, "score": 0, "creation_date": 1502273703, "post_id": 45587762, "comment_id": 78134241, "body": "Thanks, that worked! I assume that the .any? just check if there is any, then if not returns nil?"}, {"owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "edited": false, "score": 0, "creation_date": 1502273736, "post_id": 45587762, "comment_id": 78134271, "body": "If one block is true the result is true, otherwise false"}], "tags": [], "owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "is_accepted": true, "score": 4, "last_activity_date": 1502273596, "creation_date": 1502273596, "answer_id": 45587762, "question_id": 45587667, "link": "https://stackoverflow.com/questions/45587667/how-to-check-if-array-contains-3-consecutive-duplicates/45587762#45587762", "title": "How to check if array contains 3 consecutive duplicates?", "body": "<p>Try this one</p>\n\n<pre><code>n.each_cons(3).any? { |a, b, c| a == b &amp;&amp; b == c }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 12629, "user_id": 4739257, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/MdhEs.jpg?s=128&g=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/4739257/ilya"}, "is_accepted": false, "score": 0, "last_activity_date": 1502275367, "last_edit_date": 1502275367, "creation_date": 1502274901, "answer_id": 45588252, "question_id": 45587667, "link": "https://stackoverflow.com/questions/45587667/how-to-check-if-array-contains-3-consecutive-duplicates/45588252#45588252", "title": "How to check if array contains 3 consecutive duplicates?", "body": "<p>No need to chain methods, just use <code>Enumerable#each_cons</code> with a block:</p>\n\n<pre><code>array.each_cons(3) { |f, s, t| break true if f == t &amp;&amp; s == t}\n</code></pre>\n\n<p>Returns <code>true</code> if the array contains 3 duplicates in a row, otherwise <code>nil</code> (simple use <code>!!</code> if you need exactly <code>true</code> or <code>false</code>).</p>\n\n<p>Benchmarks:</p>\n\n<pre><code>require 'benchmark'\n\narray = (0..1000).to_a.push(*[3, 3, 3])\n\nBenchmark.bmbm(20) do |x|\n  x.report(:chain) do\n    array.each_cons(3).any? { |a, b, c| a == b &amp;&amp; b == c }\n  end\n\n  x.report(:one_block) do\n    array.each_cons(3) { |f, s, t| break true if f == t &amp;&amp; s == t}\n  end\nend\n</code></pre>\n\n<p>Result:</p>\n\n<pre><code>                           user     system      total        real\nchain                  0.000000   0.000000   0.000000 (  0.000167)\none_block              0.000000   0.000000   0.000000 (  0.000101)\n</code></pre>\n\n<p>As you can see, this solution is more than 1.6x times faster. Happy coding :)</p>\n"}], "owner": {"reputation": 69, "user_id": 8041945, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e11758949228df43138240ec1e7b9bdf?s=128&d=identicon&r=PG&f=1", "display_name": "LewMoore", "link": "https://stackoverflow.com/users/8041945/lewmoore"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 104, "favorite_count": 0, "accepted_answer_id": 45587762, "answer_count": 2, "score": -2, "last_activity_date": 1502276541, "creation_date": 1502273372, "last_edit_date": 1502276541, "question_id": 45587667, "link": "https://stackoverflow.com/questions/45587667/how-to-check-if-array-contains-3-consecutive-duplicates", "title": "How to check if array contains 3 consecutive duplicates?", "body": "<p>I'm trying to return true if input (n) contains 3 duplicates in a row, else return false. </p>\n\n<p>My code:</p>\n\n<pre><code>def got_three?(n)\n  n.each_cons(3) { |a, b, c| a == b &amp;&amp; b == c ? true : false }\nend\n</code></pre>\n\n<p>this is returning an error and I'm unsure as to why. Any help?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 85, "user_id": 8398078, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/a0ee3eaa70eb621c3d63641ce92331ec?s=128&d=identicon&r=PG&f=1", "display_name": "rohan", "link": "https://stackoverflow.com/users/8398078/rohan"}, "edited": false, "score": 0, "creation_date": 1502268395, "post_id": 45585715, "comment_id": 78130388, "body": "Add APP_KEY,APP_SECRET error:  dynamic constant assignment"}], "answers": [{"comments": [{"owner": {"reputation": 85, "user_id": 8398078, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/a0ee3eaa70eb621c3d63641ce92331ec?s=128&d=identicon&r=PG&f=1", "display_name": "rohan", "link": "https://stackoverflow.com/users/8398078/rohan"}, "edited": false, "score": 0, "creation_date": 1502269447, "post_id": 45585869, "comment_id": 78131153, "body": "i am resolve this problem like this:                                                                      app_key = &#39;INSERT_APP_KEY&#39; app_secret =&#39;INSERT_APP_SECRET&#39;"}, {"owner": {"reputation": 85, "user_id": 8398078, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/a0ee3eaa70eb621c3d63641ce92331ec?s=128&d=identicon&r=PG&f=1", "display_name": "rohan", "link": "https://stackoverflow.com/users/8398078/rohan"}, "edited": false, "score": 0, "creation_date": 1502269532, "post_id": 45585869, "comment_id": 78131219, "body": "I am require the  dropbox sdk but error throw                                                             require &#39;dropbox-sdk&#39;       Error:(cannot load such file -- dropbox-sdk)"}, {"owner": {"reputation": 16672, "user_id": 22237, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/hkobD.png?s=128&g=1", "display_name": "Kris", "link": "https://stackoverflow.com/users/22237/kris"}, "edited": false, "score": 0, "creation_date": 1502269790, "post_id": 45585869, "comment_id": 78131381, "body": "This answer is correct in what is solves the question. But assigning to a constant or var in this manner and only using it once has no benefit, just hard code the string in the call to <code>new</code>. But having secrets in code is generally bad practice, you could use secrets.yml (which is git ignored) to store the secrets: <a href=\"http://guides.rubyonrails.org/4_1_release_notes.html#config-secrets-yml\" rel=\"nofollow noreferrer\">guides.rubyonrails.org/&hellip;</a>"}, {"owner": {"reputation": 85, "user_id": 8398078, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/a0ee3eaa70eb621c3d63641ce92331ec?s=128&d=identicon&r=PG&f=1", "display_name": "rohan", "link": "https://stackoverflow.com/users/8398078/rohan"}, "edited": false, "score": 0, "creation_date": 1502269908, "post_id": 45585869, "comment_id": 78131457, "body": "i know  this is for only demo purpose."}, {"owner": {"reputation": 85, "user_id": 8398078, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/a0ee3eaa70eb621c3d63641ce92331ec?s=128&d=identicon&r=PG&f=1", "display_name": "rohan", "link": "https://stackoverflow.com/users/8398078/rohan"}, "edited": false, "score": 0, "creation_date": 1502275487, "post_id": 45585869, "comment_id": 78135616, "body": "app_key = &#39;&lt;%= ENV[&#39;APP_DROPBOX_APP_KEY_DEVELOPMENT&#39;] %&gt;&#39; like this."}], "tags": [], "owner": {"reputation": 3736, "user_id": 1031061, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/8IZUV.jpg?s=128&g=1", "display_name": "Pardeep Dhingra", "link": "https://stackoverflow.com/users/1031061/pardeep-dhingra"}, "is_accepted": false, "score": 1, "last_activity_date": 1502268651, "creation_date": 1502268651, "answer_id": 45585869, "question_id": 45585715, "link": "https://stackoverflow.com/questions/45585715/upload-multipart-document-on-dropbox-through-api-ruby-on-rails/45585869#45585869", "title": "upload multipart document on dropbox through API (ruby on rails)", "body": "<p>You are reassigning values to constants, every time your method will run. This is not allowed in ruby.</p>\n\n<pre><code> APP_KEY = 'INSERT_APP_KEY'\n APP_SECRET ='INSERT_APP_SECRET'\n</code></pre>\n\n<p>You can add that in the class containing this method though:</p>\n\n<pre><code>class MyClass\n  APP_KEY = 'INSERT_APP_KEY'\n  APP_SECRET ='INSERT_APP_SECRET'   \n\n  def upload_passport\n    flow = DropboxOAuth2FlowNoRedirect.new(APP_KEY, APP_SECRET)\n    authorize_url = flow.start()\n    file = open(params[:file])\n    response = client.put_file('/magnum-opus.txt', file)\n    puts \"uploaded:\", response.inspect\n  end \nend\n</code></pre>\n"}], "owner": {"reputation": 85, "user_id": 8398078, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/a0ee3eaa70eb621c3d63641ce92331ec?s=128&d=identicon&r=PG&f=1", "display_name": "rohan", "link": "https://stackoverflow.com/users/8398078/rohan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 85, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1502268651, "creation_date": 1502268172, "last_edit_date": 1502268429, "question_id": 45585715, "link": "https://stackoverflow.com/questions/45585715/upload-multipart-document-on-dropbox-through-api-ruby-on-rails", "title": "upload multipart document on dropbox through API (ruby on rails)", "body": "<p>How to upload multi part document on drop box using the ruby on rail api through.</p>\n\n<pre><code>def upload_passport\n  APP_KEY = 'INSERT_APP_KEY'\n  APP_SECRET ='INSERT_APP_SECRET'   \n  flow = DropboxOAuth2FlowNoRedirect.new(APP_KEY, APP_SECRET)\n  authorize_url = flow.start()\n  file = open(params[:file])\n  response = client.put_file('/magnum-opus.txt', file)\n  puts \"uploaded:\", response.inspect\nend \n</code></pre>\n"}, {"tags": ["c", "ruby", "api", "segmentation-fault"], "answers": [{"comments": [{"owner": {"reputation": 5, "user_id": 3442059, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mOY1s.jpg?s=128&g=1", "display_name": "assemblaj", "link": "https://stackoverflow.com/users/3442059/assemblaj"}, "edited": false, "score": 0, "creation_date": 1502279080, "post_id": 45585559, "comment_id": 78138149, "body": "What other data would you need?  Also: rb_CUR_PACKET is received in a call shortly before the code snippet I included.  I made all of the variables used by that function call global and I still have the issue.  Looking into the GIL right now."}], "tags": [], "owner": {"reputation": 16402, "user_id": 4025095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/blJ4L.jpg?s=128&g=1", "display_name": "Myst", "link": "https://stackoverflow.com/users/4025095/myst"}, "is_accepted": true, "score": 0, "last_activity_date": 1502283511, "last_edit_date": 1502283511, "creation_date": 1502267697, "answer_id": 45585559, "question_id": 45584572, "link": "https://stackoverflow.com/questions/45584572/ruby-c-extension-rb-funcall-causing-segfault/45585559#45585559", "title": "Ruby C Extension: rb_funcall causing segfault", "body": "<p>There's a number of possible causes for the issue and not (it seems) enough data.</p>\n\n<p>One explanation could be that the Ruby objects (i.e <code>rb_CUR_PACKET</code>, <code>rb_READ</code> or <code>rb_PDU_DATA</code>) aren't valid by the time you called the function, since they might have been collected by the GC (Garbage Collector).</p>\n\n<p>If the Objects aren't referenced by a Ruby object, their memory might be freed sooner than you expect.</p>\n\n<p>An easy solution would be to register the Objects as a global objects (they will never be freed) or assign them as variables inside a user's object. </p>\n\n<p>Another possible cause is that you aren't executing your code within the GIL (global instruction lock).</p>\n\n<p>Ruby MRI code must always run within the GIL and within Ruby threads. If you left the GIL or spawned new threads that aren't Ruby threads, your code will crash if you're lucky.</p>\n\n<p>I suspect the GC, but it's a toss.</p>\n\n<p>Good Luck!</p>\n"}], "owner": {"reputation": 5, "user_id": 3442059, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mOY1s.jpg?s=128&g=1", "display_name": "assemblaj", "link": "https://stackoverflow.com/users/3442059/assemblaj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 139, "favorite_count": 0, "accepted_answer_id": 45585559, "answer_count": 1, "score": 0, "last_activity_date": 1502283511, "creation_date": 1502264808, "question_id": 45584572, "link": "https://stackoverflow.com/questions/45584572/ruby-c-extension-rb-funcall-causing-segfault", "title": "Ruby C Extension: rb_funcall causing segfault", "body": "<p>My extension uses a Ruby library  to send and receive command and telemetry packets over an interface and gives them to a C file transfer library for processing. </p>\n\n<p>After receiving a lot of packets, I'll get this segfault. Here's the backtrace from GDB. </p>\n\n<pre><code>            #0  search_method (defined_class_ptr=&lt;synthetic pointer&gt;, id=6177, klass=&lt;optimized out&gt;) at vm_method.c:567\n            #1  rb_method_entry_get_without_cache (klass=19934160, id=6177, defined_class_ptr=0x12c5500) at vm_method.c:592\n            #2  0x00007ffff7aced90 in rb_method_entry (klass=klass@entry=19934160, id=&lt;optimized out&gt;, \n                defined_class_ptr=defined_class_ptr@entry=0x12c5500) at vm_method.c:663\n            #3  0x00007ffff7acee71 in vm_search_method (ci=ci@entry=0x12c54c0, recv=&lt;optimized out&gt;) at vm_insnhelper.c:842\n            #4  0x00007ffff7ad4b3d in vm_exec_core (th=th@entry=0x6035d0, initial=initial@entry=0) at insns.def:1068\n            #5  0x00007ffff7ad951b in vm_exec (th=th@entry=0x6035d0) at vm.c:1440\n            #6  0x00007ffff7adac91 in vm_call0_body (th=th@entry=0x6035d0, ci=ci@entry=0x7fffffffbcb0, argv=0x7fffffffbd60)\n                at vm_eval.c:180\n            #7  0x00007ffff7adb6c6 in vm_call0 (defined_class=&lt;optimized out&gt;, me=&lt;optimized out&gt;, argv=&lt;optimized out&gt;, \n                argc=1, id=14481, recv=22956880, th=0x6035d0) at vm_eval.c:59\n            #8  rb_call0 (recv=recv@entry=22956880, mid=14481, argc=argc@entry=1, argv=argv@entry=0x7fffffffbd60, \n                scope=scope@entry=CALL_FCALL, self=&lt;optimized out&gt;) at vm_eval.c:349\n            #9  0x00007ffff7adbc64 in rb_call (scope=CALL_FCALL, argv=0x7fffffffbd60, argc=1, mid=&lt;optimized out&gt;, \n                recv=22956880) at vm_eval.c:616\n            #10 rb_funcall (recv=recv@entry=22956880, mid=&lt;optimized out&gt;, n=n@entry=1) at vm_eval.c:818\n            #11 0x00007ffff6092b10 in DL_RecvPdu () at CFGroundClient.c:414\n            #12 0x00007ffff6092dbe in method_run (self=&lt;optimized out&gt;) at CFGroundClient.c:302\n            #13 0x00007ffff7ace272 in vm_call_cfunc_with_frame (ci=0x0, reg_cfp=0x7ffff7fd1f70, th=0x6035d0)\n                at vm_insnhelper.c:1380\n            #14 vm_call_cfunc (th=th@entry=0x6035d0, reg_cfp=reg_cfp@entry=0x7ffff7fd1f70, ci=ci@entry=0xa29090)\n                at vm_insnhelper.c:1473\n            #15 0x00007ffff7ae0f6e in vm_call_method (th=0x6035d0, cfp=0x7ffff7fd1f70, ci=0xa29090) at vm_insnhelper.c:1689\n            #16 0x00007ffff7ad4b4b in vm_exec_core (th=th@entry=0x6035d0, initial=initial@entry=0) at insns.def:1069\n            #17 0x00007ffff7ad951b in vm_exec (th=th@entry=0x6035d0) at vm.c:1440\n            #18 0x00007ffff7adaa73 in rb_iseq_eval_main (iseqval=iseqval@entry=10626960) at vm.c:1685\n            #19 0x00007ffff798707d in ruby_exec_internal (n=0xa22790) at eval.c:254\n            #20 0x00007ffff798948d in ruby_exec_node (n=n@entry=0xa22790) at eval.c:319\n            #21 0x00007ffff798bc3e in ruby_run_node (n=0xa22790) at eval.c:311\n            #22 0x000000000040087b in main (argc=3, argv=0x7fffffffde58) at main.c:36\n</code></pre>\n\n<p>Here is the relevant code: </p>\n\n<pre><code>                void DL_RecvPdu() {\n                       .....\n                    /* Segfault coming from here \n                       CUR_PACKET.read(\"PDU_DATA\"); \n                       Reads telemetry item PDU_DATA from packet CUR_PACKET\n                       and returns results. PDU data is an array of bytes \n                       represented as a Ruby string that can contain nulls */\n                    VALUE pdu_data_block = rb_funcall(rb_CUR_PACKET, \n                        rb_READ, 1, \n                        rb_PDU_DATA\n                    );\n                        ....\n                }\n</code></pre>\n\n<p>Does anyone know where this error could come from and how I can fix it? </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rails-admin"], "comments": [{"owner": {"reputation": 3736, "user_id": 1031061, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/8IZUV.jpg?s=128&g=1", "display_name": "Pardeep Dhingra", "link": "https://stackoverflow.com/users/1031061/pardeep-dhingra"}, "edited": false, "score": 0, "creation_date": 1502266258, "post_id": 45584283, "comment_id": 78129000, "body": "I have also faced similar problem. In my case i have created a Model which is pointing to same table (users in your case). I have exposed only required fields through that model, you can create virtual attributes for that. You can then use it like other models for statistics. I am not sure if any better solution available here. I am sharing my views."}, {"owner": {"reputation": 440, "user_id": 5770488, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/1b55e0b62b3d2dc2ad5aa4fa440c1048?s=128&d=identicon&r=PG&f=1", "display_name": "nrmb", "link": "https://stackoverflow.com/users/5770488/nrmb"}, "reply_to_user": {"reputation": 3736, "user_id": 1031061, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/8IZUV.jpg?s=128&g=1", "display_name": "Pardeep Dhingra", "link": "https://stackoverflow.com/users/1031061/pardeep-dhingra"}, "edited": false, "score": 0, "creation_date": 1502266577, "post_id": 45584283, "comment_id": 78129212, "body": "@PardeepDhingra thank you for your suggestion, I also tried the same but I wanted to show the user table. Will the configuration not override that? What was your approach?"}, {"owner": {"reputation": 3736, "user_id": 1031061, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/8IZUV.jpg?s=128&g=1", "display_name": "Pardeep Dhingra", "link": "https://stackoverflow.com/users/1031061/pardeep-dhingra"}, "edited": false, "score": 0, "creation_date": 1502267036, "post_id": 45584283, "comment_id": 78129505, "body": "I hope my answer will help you."}], "answers": [{"tags": [], "owner": {"reputation": 3312, "user_id": 412528, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/7a781dab51284428bf9a44f3e0c85b6a?s=128&d=identicon&r=PG", "display_name": "Guillermo Siliceo Trueba", "link": "https://stackoverflow.com/users/412528/guillermo-siliceo-trueba"}, "is_accepted": false, "score": 0, "last_activity_date": 1502324327, "creation_date": 1502324327, "answer_id": 45602559, "question_id": 45584283, "link": "https://stackoverflow.com/questions/45584283/rails-admin-is-it-allowed-to-show-statistics-count-of-only-a-model-column/45602559#45602559", "title": "rails_admin is it allowed to show statistics count of only a model column?", "body": "<p>You need to create a new rails admin action replacing the one called dashboard.\nCheck out how the \"controller\" looks\n<a href=\"https://github.com/sferik/rails_admin/blob/master/lib/rails_admin/config/actions/dashboard.rb\" rel=\"nofollow noreferrer\">https://github.com/sferik/rails_admin/blob/master/lib/rails_admin/config/actions/dashboard.rb</a></p>\n\n<p>And the view\n<a href=\"https://github.com/sferik/rails_admin/blob/master/app/views/rails_admin/main/dashboard.html.haml\" rel=\"nofollow noreferrer\">https://github.com/sferik/rails_admin/blob/master/app/views/rails_admin/main/dashboard.html.haml</a></p>\n\n<p>A guide on how to create actions\n<a href=\"https://github.com/sferik/rails_admin/wiki/Custom-action\" rel=\"nofollow noreferrer\">https://github.com/sferik/rails_admin/wiki/Custom-action</a></p>\n\n<p>What i would do is basically copy paste the files and add the custom column to the main loop iterating on the models.</p>\n\n<p>You'll get the CSS and JS for free if you leave everything else as is.</p>\n"}], "owner": {"reputation": 440, "user_id": 5770488, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/1b55e0b62b3d2dc2ad5aa4fa440c1048?s=128&d=identicon&r=PG&f=1", "display_name": "nrmb", "link": "https://stackoverflow.com/users/5770488/nrmb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 462, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1502324327, "creation_date": 1502263960, "question_id": 45584283, "link": "https://stackoverflow.com/questions/45584283/rails-admin-is-it-allowed-to-show-statistics-count-of-only-a-model-column", "title": "rails_admin is it allowed to show statistics count of only a model column?", "body": "<p>In rails_admin, I have 1 model, for example <code>User</code> and I'm showing the whole user count on the Dashboard statistics.\nI would also like to separately show <code>1</code> particular column from <code>User</code> on the Dashboard statistics and also able to create, update and delete them.\nIs that possible? If yes, may I ask how?</p>\n"}, {"tags": ["ruby", "loops", "csv", "each"], "comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1502263908, "post_id": 45584129, "comment_id": 78127470, "body": "It is not clear which part of your code correspond to which part of your question. Can you cut your code apart into small pieces?"}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1502264047, "post_id": 45584129, "comment_id": 78127547, "body": "It would be helpful if you could point out which <i>precise</i> part of <a href=\"http://ruby-doc.org/stdlib/libdoc/csv/rdoc/CSV.html#method-c-parse\" rel=\"nofollow noreferrer\">the documentation</a> is unclear to you. That way, the Ruby developers can improve the documentation for future readers."}, {"owner": {"reputation": 11963, "user_id": 2707864, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/LYdpu.png?s=128&g=1", "display_name": "sancho.s ReinstateMonicaCellio", "link": "https://stackoverflow.com/users/2707864/sancho-s-reinstatemonicacellio"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 1, "creation_date": 1502266759, "post_id": 45584129, "comment_id": 78129351, "body": "@sawa - Updated question as per your comment."}, {"owner": {"reputation": 11963, "user_id": 2707864, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/LYdpu.png?s=128&g=1", "display_name": "sancho.s ReinstateMonicaCellio", "link": "https://stackoverflow.com/users/2707864/sancho-s-reinstatemonicacellio"}, "reply_to_user": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1502267275, "post_id": 45584129, "comment_id": 78129649, "body": "@J&#246;rgWMittag - I am a beginner with Ruby. Please see my comment to your answer."}], "answers": [{"comments": [{"owner": {"reputation": 11963, "user_id": 2707864, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/LYdpu.png?s=128&g=1", "display_name": "sancho.s ReinstateMonicaCellio", "link": "https://stackoverflow.com/users/2707864/sancho-s-reinstatemonicacellio"}, "edited": false, "score": 0, "creation_date": 1502267484, "post_id": 45584284, "comment_id": 78129770, "body": "On one hand, I was not completely sure I grasped the description in the documentation. With that sloppy understanding (and considering that my Part 1 is your 2nd case, and viceversa), it <i>seemed</i> to me that in your 1st case, <code>.each</code> would not work, as <code>CSV::parse</code> is already iterating."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "reply_to_user": {"reputation": 11963, "user_id": 2707864, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/LYdpu.png?s=128&g=1", "display_name": "sancho.s ReinstateMonicaCellio", "link": "https://stackoverflow.com/users/2707864/sancho-s-reinstatemonicacellio"}, "edited": false, "score": 0, "creation_date": 1502269207, "post_id": 45584284, "comment_id": 78130960, "body": "If you are familiar with languages like C++, Java, C\u266f, etc., you can think of this as two different &quot;overloads&quot; of the same method. This is not possible in Ruby, of course, Ruby doesn&#39;t support overloading, but a method can inspect its own arguments and execute different code paths depending on what it finds. Almost all iterator methods will return an iterable object if you don&#39;t pass a block."}, {"owner": {"reputation": 16672, "user_id": 22237, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/hkobD.png?s=128&g=1", "display_name": "Kris", "link": "https://stackoverflow.com/users/22237/kris"}, "edited": false, "score": 0, "creation_date": 1502270687, "post_id": 45584284, "comment_id": 78132025, "body": "You can see the actual code here: <a href=\"https://github.com/ruby/ruby/blob/trunk/lib/csv.rb#L1312\" rel=\"nofollow noreferrer\">github.com/ruby/ruby/blob/trunk/lib/csv.rb#L1312</a>"}], "tags": [], "owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "is_accepted": false, "score": 3, "last_activity_date": 1502263960, "creation_date": 1502263960, "answer_id": 45584284, "question_id": 45584129, "link": "https://stackoverflow.com/questions/45584129/using-each-is-sometimes-mandatory-sometimes-not-with-csv/45584284#45584284", "title": "Using &#39;each&#39; is sometimes mandatory, sometimes not with CSV", "body": "<p>This is clearly explained <a href=\"http://ruby-doc.org/stdlib/libdoc/csv/rdoc/CSV.html#method-c-parse\" rel=\"nofollow noreferrer\">in the documentation</a>:</p>\n\n<ul>\n<li><code>CSV::parse</code> when called with a block iterates over the rows.</li>\n<li><code>CSV::parse</code> when called without a block returns an array of rows (which you can then iterate over).</li>\n</ul>\n"}], "owner": {"reputation": 11963, "user_id": 2707864, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/LYdpu.png?s=128&g=1", "display_name": "sancho.s ReinstateMonicaCellio", "link": "https://stackoverflow.com/users/2707864/sancho-s-reinstatemonicacellio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 35, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1502269188, "creation_date": 1502263425, "last_edit_date": 1502269188, "question_id": 45584129, "link": "https://stackoverflow.com/questions/45584129/using-each-is-sometimes-mandatory-sometimes-not-with-csv", "title": "Using &#39;each&#39; is sometimes mandatory, sometimes not with CSV", "body": "<p>I am using the csv gem, following <a href=\"https://www.tutorialspoint.com/execute_ruby_online.php\" rel=\"nofollow noreferrer\">this web site</a>.</p>\n\n<p>Once I evaluate <code>CSV.parse</code>, it is mandatory to use <code>each</code> to loop over the resulting <code>Array</code>. This works:</p>\n\n<pre><code>csv = CSV.parse(\"1,2,3\")\n\ncsv.each {|row| print row, \", \", row.class, \", size \", row.size, \"\\n\"}\n</code></pre>\n\n<p>while this does not work:</p>\n\n<pre><code>csv {|row| print row, \", \", row.class, \", size \", row.size, \"\\n\"}\n</code></pre>\n\n<p>When directly using the form <code>CSV.parse</code>, either using <code>each</code>:</p>\n\n<pre><code>CSV.parse(\"1,2,3\").each {|row| print row, \", \", row.class, \", size \", row.size, \"\\n\"}\n</code></pre>\n\n<p>or not:</p>\n\n<pre><code>CSV.parse(\"1,2,3\") { |row| print row, \", \", row.class, \", size \", row.size, \"\\n\"}\n</code></pre>\n\n<p>gives the same result. Why?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "sentry", "raven"], "comments": [{"owner": {"reputation": 14213, "user_id": 398863, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4CNtJ.png?s=128&g=1", "display_name": "Amit Patel", "link": "https://stackoverflow.com/users/398863/amit-patel"}, "edited": false, "score": 0, "creation_date": 1502264178, "post_id": 45584081, "comment_id": 78127639, "body": "Sentry ignores few errors by default  <a href=\"https://github.com/getsentry/raven-ruby/blob/master/lib/raven/configuration.rb#L160\" rel=\"nofollow noreferrer\">github.com/getsentry/raven-ruby/blob/master/lib/raven/&hellip;</a>. Are you sure the errors being generated are not one of them?"}, {"owner": {"reputation": 123, "user_id": 4635433, "user_type": "registered", "accept_rate": 20, "profile_image": "https://lh4.googleusercontent.com/-yc_KYZvwPac/AAAAAAAAAAI/AAAAAAAABgs/QeCdSKDGjtg/photo.jpg?sz=128", "display_name": "Shilpi Agrawal", "link": "https://stackoverflow.com/users/4635433/shilpi-agrawal"}, "reply_to_user": {"reputation": 14213, "user_id": 398863, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4CNtJ.png?s=128&g=1", "display_name": "Amit Patel", "link": "https://stackoverflow.com/users/398863/amit-patel"}, "edited": false, "score": 0, "creation_date": 1502265685, "post_id": 45584081, "comment_id": 78128597, "body": "Is there any way that I can override the ignore defaults ?"}, {"owner": {"reputation": 123, "user_id": 4635433, "user_type": "registered", "accept_rate": 20, "profile_image": "https://lh4.googleusercontent.com/-yc_KYZvwPac/AAAAAAAAAAI/AAAAAAAABgs/QeCdSKDGjtg/photo.jpg?sz=128", "display_name": "Shilpi Agrawal", "link": "https://stackoverflow.com/users/4635433/shilpi-agrawal"}, "reply_to_user": {"reputation": 14213, "user_id": 398863, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4CNtJ.png?s=128&g=1", "display_name": "Amit Patel", "link": "https://stackoverflow.com/users/398863/amit-patel"}, "edited": false, "score": 0, "creation_date": 1502265745, "post_id": 45584081, "comment_id": 78128645, "body": "And I tried for 1/0 error which is not included in IGNORE_DEFAULTS so technically it should work."}], "answers": [{"tags": [], "owner": {"reputation": 455, "user_id": 1258326, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5ce6b253754511eb92cd3cda855fab05?s=128&d=identicon&r=PG", "display_name": "beNjiox", "link": "https://stackoverflow.com/users/1258326/benjiox"}, "is_accepted": false, "score": 3, "last_activity_date": 1511659511, "creation_date": 1511659511, "answer_id": 47492152, "question_id": 45584081, "link": "https://stackoverflow.com/questions/45584081/rails-error-tracking-with-sentry-raven-ruby-is-not-working/47492152#47492152", "title": "Rails error tracking with sentry raven-ruby is not working", "body": "<p>Do you have the gem better-errors in your Gemfile by any chance?</p>\n\n<p>This interferes somehow with Sentry sending exceptions.</p>\n"}], "owner": {"reputation": 123, "user_id": 4635433, "user_type": "registered", "accept_rate": 20, "profile_image": "https://lh4.googleusercontent.com/-yc_KYZvwPac/AAAAAAAAAAI/AAAAAAAABgs/QeCdSKDGjtg/photo.jpg?sz=128", "display_name": "Shilpi Agrawal", "link": "https://stackoverflow.com/users/4635433/shilpi-agrawal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1045, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1511659511, "creation_date": 1502263304, "question_id": 45584081, "link": "https://stackoverflow.com/questions/45584081/rails-error-tracking-with-sentry-raven-ruby-is-not-working", "title": "Rails error tracking with sentry raven-ruby is not working", "body": "<p>I am trying to use sentry to see log of rails error for my application</p>\n\n<p>Gemfile</p>\n\n<pre><code>gem \"sentry-raven\"\n</code></pre>\n\n<p>application.rb</p>\n\n<pre><code>Raven.configure do |config|\n   config.dsn = 'dsn url'\nend\n</code></pre>\n\n<p>This configuration doesn't seem to work. But when I give explicitly in the code it seems to work.</p>\n\n<pre><code>Raven.capture do\n  1/0\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "owner": {"reputation": 146, "user_id": 3597210, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c3d4a11bf589c04cbbbf28432939241e?s=128&d=identicon&r=PG&f=1", "display_name": "Aown Muhammad", "link": "https://stackoverflow.com/users/3597210/aown-muhammad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 112, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1502266414, "creation_date": 1502263232, "last_edit_date": 1502266414, "question_id": 45584058, "link": "https://stackoverflow.com/questions/45584058/raise-if-conflicts-unable-to-activate-rails-dom-testing", "title": "raise_if_conflicts&#39;: Unable to activate rails-dom-testing", "body": "<p>First time I have installed ruby on rails. When I tried to run the server, following error occurred. I have searched a lot but could not find a solution. I have uninstalled <code>nokogiri 1.6.6</code> which was not working on Windows. After that I installed <code>1.8.+</code> version. Now I am facing this error.</p>\n\n<pre><code>C:/RailsInstaller/Ruby2.2.0/lib/ruby/2.2.0/rubygems/specification.rb:2112:in raise_if_conflicts: Unable to activate rails-dom-testing-2.0.1, because nokogiri-1.8.0-x86-mingw32 conflicts with nokogiri (~&gt; 1.6.0) (Gem::ConflictError)\n        from C:/RailsInstaller/Ruby2.2.0/lib/ruby/2.2.0/rubygems/specification.rb:1280:in activate\n        from C:/RailsInstaller/Ruby2.2.0/lib/ruby/2.2.0/rubygems/specification.rb:1314:in block in activate_dependencies\n        from C:/RailsInstaller/Ruby2.2.0/lib/ruby/2.2.0/rubygems/specification.rb:1300:in each\n        from C:/RailsInstaller/Ruby2.2.0/lib/ruby/2.2.0/rubygems/specification.rb:1300:in activate_dependencies\n        from C:/RailsInstaller/Ruby2.2.0/lib/ruby/2.2.0/rubygems/specification.rb:1282:in activate\n        from C:/RailsInstaller/Ruby2.2.0/lib/ruby/2.2.0/rubygems/specification.rb:1314:in block in activate_dependencies\n        from C:/RailsInstaller/Ruby2.2.0/lib/ruby/2.2.0/rubygems/specification.rb:1300:in each\n        from C:/RailsInstaller/Ruby2.2.0/lib/ruby/2.2.0/rubygems/specification.rb:1300:in activate_dependencies\n        from C:/RailsInstaller/Ruby2.2.0/lib/ruby/2.2.0/rubygems/specification.rb:1282:in activate\n        from C:/RailsInstaller/Ruby2.2.0/lib/ruby/2.2.0/rubygems/core_ext/kernel_gem.rb:67:in block in gem\n        from C:/RailsInstaller/Ruby2.2.0/lib/ruby/2.2.0/rubygems/core_ext/kernel_gem.rb:66:in synchronize\n        from C:/RailsInstaller/Ruby2.2.0/lib/ruby/2.2.0/rubygems/core_ext/kernel_gem.rb:66:in gem\n        from C:/RailsInstaller/Ruby2.2.0/bin/rails:22:in &lt;main&gt;\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "devise"], "comments": [{"owner": {"reputation": 3624, "user_id": 5615038, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/wW8mP.jpg?s=128&g=1", "display_name": "fangxing", "link": "https://stackoverflow.com/users/5615038/fangxing"}, "edited": false, "score": 0, "creation_date": 1502268067, "post_id": 45584017, "comment_id": 78130150, "body": "How about <code>params[:email]</code> ?"}, {"owner": {"reputation": 685, "user_id": 7458849, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/89kDb.jpg?s=128&g=1", "display_name": "Theopap", "link": "https://stackoverflow.com/users/7458849/theopap"}, "reply_to_user": {"reputation": 3624, "user_id": 5615038, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/wW8mP.jpg?s=128&g=1", "display_name": "fangxing", "link": "https://stackoverflow.com/users/5615038/fangxing"}, "edited": false, "score": 0, "creation_date": 1502268238, "post_id": 45584017, "comment_id": 78130272, "body": "Nope, I already tried this... I updated the post with more info, if you&#39;d like please take a look!"}, {"owner": {"reputation": 3624, "user_id": 5615038, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/wW8mP.jpg?s=128&g=1", "display_name": "fangxing", "link": "https://stackoverflow.com/users/5615038/fangxing"}, "edited": false, "score": 0, "creation_date": 1502268600, "post_id": 45584017, "comment_id": 78130520, "body": "You don&#39;t need to pass <code>email</code> to  new_transaction_path, you can put it in <code>params</code>,<code>params[:email] = resource.email</code>, then you can access it in the view by <code>params[:email]</code>."}, {"owner": {"reputation": 685, "user_id": 7458849, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/89kDb.jpg?s=128&g=1", "display_name": "Theopap", "link": "https://stackoverflow.com/users/7458849/theopap"}, "reply_to_user": {"reputation": 3624, "user_id": 5615038, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/wW8mP.jpg?s=128&g=1", "display_name": "fangxing", "link": "https://stackoverflow.com/users/5615038/fangxing"}, "edited": false, "score": 0, "creation_date": 1502268954, "post_id": 45584017, "comment_id": 78130772, "body": "Thanks for the reply @fnagxing.... I&#39;m sorry did you mean do this: <code>new_transaction_path(session[:registration_params,params[:em&zwnj;&#8203;ail] = resource.email])</code> ???"}], "owner": {"reputation": 685, "user_id": 7458849, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/89kDb.jpg?s=128&g=1", "display_name": "Theopap", "link": "https://stackoverflow.com/users/7458849/theopap"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 215, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1502268992, "creation_date": 1502263106, "last_edit_date": 1502268081, "question_id": 45584017, "link": "https://stackoverflow.com/questions/45584017/merge-params-to-devise-registration-params", "title": "Merge params to devise registration_params", "body": "<p>I am merging the email param into the registration params:</p>\n\n<pre><code>def after_sign_up_path_for(resource)\n  new_transaction_path(session[:registration_params].merge(ema\u200c\u200bil: resource.email))\n end\n\ndef after_inactive_sign_up_path_for(resource)\n  new_transaction_path(session[:registration_params].merge(ema\u200c\u200bil: resource.email))\nend\n</code></pre>\n\n<p>And the params are showing correctly:</p>\n\n<pre><code>Parameters: {\"ema\u200c\u200bil\"=&gt;\"example@gmail.com\", \"plan_id\"=&gt;\"bs96\", \"price\"=&gt;\"150.0\"}\n</code></pre>\n\n<p>But when I try to pass the email param to another page with <code>&lt;%= hidden_field_tag(:email, params[\"email\"]) %&gt;</code> .... the email is nil.</p>\n\n<pre><code>Parameters: {\"utf8\"=&gt;\"\u2713\", \"email\"=&gt;\"\", \"plan_id\"=&gt;\"bs96\", \"amount\"=&gt;\"150.0\"}\n</code></pre>\n\n<p>I'm doing the same thing with the other params and I can access them all. Not sure why the email param is not working. </p>\n\n<p><strong>Update1</strong></p>\n\n<p>If I pass only the (email: resource.email) into the following the email address appears. </p>\n\n<pre><code>def after_sign_up_path_for(resource)\n  new_transaction_path(email: resource.email)\n end\n\ndef after_inactive_sign_up_path_for(resource)\n  new_transaction_path(email: resource.email)\nend\n</code></pre>\n\n<p>But the other params are necessary as well. </p>\n\n<p>Is there a way I can access all params and make this work?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1502262743, "post_id": 45583714, "comment_id": 78126699, "body": "String interpolation is a term to use when you want to insert code evaluations inside a string. Your objective here does not seem to be that, and your wording is inappropriate."}], "answers": [{"comments": [{"owner": {"reputation": 119, "user_id": 7039910, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/464edee302c4920a64df3b21810ed084?s=128&d=identicon&r=PG&f=1", "display_name": "crcerror", "link": "https://stackoverflow.com/users/7039910/crcerror"}, "edited": false, "score": 0, "creation_date": 1502263298, "post_id": 45583862, "comment_id": 78127068, "body": "all works except of f.object.send(ext)? - this code breaks all form. I tried use f.object.send(&quot;#{ext}&quot;)? - didn&#39;t help at all"}, {"owner": {"reputation": 119, "user_id": 7039910, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/464edee302c4920a64df3b21810ed084?s=128&d=identicon&r=PG&f=1", "display_name": "crcerror", "link": "https://stackoverflow.com/users/7039910/crcerror"}, "edited": false, "score": 0, "creation_date": 1502269171, "post_id": 45583862, "comment_id": 78130941, "body": "edit it to f.object.send(&quot;#{ext}?&quot;) - it worked :) and after that i will accept your answer. Thank you!"}], "tags": [], "owner": {"reputation": 10770, "user_id": 381874, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/k7VRE.jpg?s=128&g=1", "display_name": "Sachin R", "link": "https://stackoverflow.com/users/381874/sachin-r"}, "is_accepted": true, "score": 2, "last_activity_date": 1502272435, "last_edit_date": 1502272435, "creation_date": 1502262596, "answer_id": 45583862, "question_id": 45583714, "link": "https://stackoverflow.com/questions/45583714/string-interpolation-in-form-inputs/45583862#45583862", "title": "String interpolation in form inputs", "body": "<pre><code>= semantic_form_for element, url: form_url, method: form_method, remote: true do |f|\n  // there will be some form should return once\n  - %w(webm mp4 ogv).each do |ext|\n    .video-item-uploader\n      = f.input :\"#{ext}\", hint: [ f.object.send(\"#{ext}?\")? ? \"#{I18n.t('uploaded')}\" : '' ].join.html_safe\n      = f.input :\"#{ext + '_cache'}\", as: :hidden\n\n      = f.input :_destroy, as: :boolean, label: \"#{I18n.t('do_delete')}\"\n</code></pre>\n\n<p>try this</p>\n"}], "owner": {"reputation": 119, "user_id": 7039910, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/464edee302c4920a64df3b21810ed084?s=128&d=identicon&r=PG&f=1", "display_name": "crcerror", "link": "https://stackoverflow.com/users/7039910/crcerror"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 108, "favorite_count": 0, "accepted_answer_id": 45583862, "answer_count": 1, "score": 0, "last_activity_date": 1502272435, "creation_date": 1502262124, "last_edit_date": 1502262645, "question_id": 45583714, "link": "https://stackoverflow.com/questions/45583714/string-interpolation-in-form-inputs", "title": "String interpolation in form inputs", "body": "<p>In Rails, I'm trying to create video uploader forms for multiple video types.</p>\n\n<p>I ended with code like this:</p>\n\n<pre><code>= semantic_form_for element, url: form_url, method: form_method, remote: true do |f|\n  // there will be some form should return once\n  - ['webm', 'mp4', 'ogv'].each do |ext|\n    .video-item-uploader\n      = f.input :\"#{ext}\", hint: [ f.object.\"#{ext}\"? ? \"#{I18n.t('uploaded')}\" : '' ].join.html_safe\n      = f.input :\"#{ext + '_cache'}\", as: :hidden\n\n      = f.input :_destroy, as: :boolean, label: \"#{I18n.t('do_delete')}\"\n</code></pre>\n\n<p>With code like that, I got syntax errors. It works if I replace <code>\"#{ext}\"</code> with any text (without quotes) from array.</p>\n\n<p>Is there any possibility to insert a variable inside a form input like that?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3", "ruby-on-rails-4", "ruby-on-rails-3.2"], "answers": [{"comments": [{"owner": {"reputation": 8500, "user_id": 5349542, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/B4LnC.jpg?s=128&g=1", "display_name": "BlackBeard", "link": "https://stackoverflow.com/users/5349542/blackbeard"}, "edited": false, "score": 0, "creation_date": 1502259676, "post_id": 45582935, "comment_id": 78124994, "body": "Your solution works. But your explanation clears the doubt. :D"}], "tags": [], "owner": {"reputation": 13441, "user_id": 2199600, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8sl6u.jpg?s=128&g=1", "display_name": "Igor Drozdov", "link": "https://stackoverflow.com/users/2199600/igor-drozdov"}, "is_accepted": true, "score": 1, "last_activity_date": 1502259451, "creation_date": 1502259451, "answer_id": 45582935, "question_id": 45582874, "link": "https://stackoverflow.com/questions/45582874/can-i-pass-multiple-parameters-to-get-multiple-result/45582935#45582935", "title": "Can I pass multiple parameters to get multiple result", "body": "<p>That's because you're trying to query <code>Invoice</code> where <code>customerType</code> equals <code>RVN,INT</code></p>\n\n<p>You might need to perform <code>split</code> on the <code>customertype</code> param:</p>\n\n<pre><code>def index\n    @invoices=if params[:'group-by'].present?\n        if params[:'group-by'].to_s == \"customerNumber\" \n\n            if params[:customertype].present?\n                Invoice.where(customerType: params[:customertype].split(\",\"))\n            else\n                Invoice.order('customerNumber')\n            end\n        end\n    end \n    render json: {status: 'SUCCESS', messasge: 'LOADED QUATERLY INVOICES', data: @invoices}, status: :ok\nend\n</code></pre>\n\n<p>This will generate for you a query:</p>\n\n<pre><code>SELECT `invoices`.* FROM `invoices` WHERE `invoices`.`customerType` IN ('RVN', 'INT')\n</code></pre>\n\n<p>Instead of:</p>\n\n<pre><code>SELECT `invoices`.* FROM `invoices` WHERE `invoices`.`customerType` = 'RVN,INT'\n</code></pre>\n"}], "owner": {"reputation": 8500, "user_id": 5349542, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/B4LnC.jpg?s=128&g=1", "display_name": "BlackBeard", "link": "https://stackoverflow.com/users/5349542/blackbeard"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 139, "favorite_count": 0, "accepted_answer_id": 45582935, "answer_count": 1, "score": 0, "last_activity_date": 1502259451, "creation_date": 1502259238, "question_id": 45582874, "link": "https://stackoverflow.com/questions/45582874/can-i-pass-multiple-parameters-to-get-multiple-result", "title": "Can I pass multiple parameters to get multiple result", "body": "<p>I am creating an API where I have a table named <em>invoices</em> where <em>customerType</em> is a column. <em>customerType</em> can be of only four possible values <strong>IE.</strong> PCT, RVN, INT or OTH.    </p>\n\n<p>Now, I want to pass URLs like:        </p>\n\n<pre><code>http://localhost:3000/api/quatertodate?group-by=customerNumber&amp;customertype=RVN,INT\nhttp://localhost:3000/api/quatertodate?group-by=customerNumber&amp;customertype=RVN,INT,OTH\nhttp://localhost:3000/api/quatertodate?group-by=customerNumber\nhttp://localhost:3000/api/quatertodate?group-by=customerNumber&amp;customertype=PCT\nhttp://localhost:3000/api/quatertodate?group-by=customerNumber&amp;customertype=INT,PCT\n</code></pre>\n\n<p>But, the issue is whenever I pass a single <em>customertype</em> or no <em>customertype</em> at all, it works but whenever I pass multiple parameters in <em>customertype</em> it returns <strong>null</strong> when it should be returning combined result of those by performing internal <em>OR</em> query.     </p>\n\n<p>In <em>index</em> method of <em>controller</em> I have:    </p>\n\n<pre><code>def index\n    @invoices=if params[:'group-by'].present?\n        if params[:'group-by'].to_s == \"customerNumber\" \n\n            if params[:customertype].present?\n                Invoice.where(customerType: params[:customertype])\n            else\n                Invoice.order('customerNumber')\n            end\n        end\n    end \n    render json: {status: 'SUCCESS', messasge: 'LOADED QUATERLY INVOICES', data: @invoices}, status: :ok\nend\n</code></pre>\n\n<p><strong>NOTE:</strong> The closest answer I could find is <a href=\"https://stackoverflow.com/questions/37771904/is-there-a-way-to-put-multiple-parameters-in-routing-parameters\">StackOverflow Link</a>. Any help or explanation is much appreciated. </p>\n"}, {"tags": ["ruby", "redirect", "httparty"], "answers": [{"tags": [], "owner": {"reputation": 3136, "user_id": 1596460, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/fwyxG.jpg?s=128&g=1", "display_name": "0112", "link": "https://stackoverflow.com/users/1596460/0112"}, "is_accepted": true, "score": 1, "last_activity_date": 1579910109, "last_edit_date": 1579910109, "creation_date": 1502251385, "answer_id": 45581495, "question_id": 45581494, "link": "https://stackoverflow.com/questions/45581494/how-to-get-around-httparty-invalid-code-lengths-set-zlibdataerror/45581495#45581495", "title": "How to get around HTTParty invalid code lengths set (Zlib::DataError)?", "body": "<p>Set the <a href=\"https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Accept-Encoding\" rel=\"nofollow noreferrer\"><code>Accept-Encoding</code></a> param in the headers option to blank:</p>\n\n<pre><code>resp = HTTParty.get(article.old_url, :verify =&gt; false, :headers =&gt; {'Accept-Encoding' =&gt; ''})\n</code></pre>\n\n<p>HTTParty was having errors decompressing the response (specifically <a href=\"https://en.wikipedia.org/wiki/Gzip\" rel=\"nofollow noreferrer\">gzip</a> in my case), possibly because something strange was happening with the received <a href=\"https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Encoding\" rel=\"nofollow noreferrer\"><code>Content-Type</code></a> header as a result of the redirect(s). Setting the Accept-Encoding header to blank returned something that HTTParty knew how to parse.</p>\n"}], "owner": {"reputation": 3136, "user_id": 1596460, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/fwyxG.jpg?s=128&g=1", "display_name": "0112", "link": "https://stackoverflow.com/users/1596460/0112"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 372, "favorite_count": 0, "accepted_answer_id": 45581495, "answer_count": 1, "score": 0, "last_activity_date": 1579910109, "creation_date": 1502251385, "last_edit_date": 1502320825, "question_id": 45581494, "link": "https://stackoverflow.com/questions/45581494/how-to-get-around-httparty-invalid-code-lengths-set-zlibdataerror", "title": "How to get around HTTParty invalid code lengths set (Zlib::DataError)?", "body": "<p>When sending an <code>HTTParty.get()</code> request to a URL that redirects to another (one, or possibly more) URL(s), I get this error:</p>\n\n<pre><code>Zlib::DataError:\n\n       invalid code lengths set\n\n     # ./file/file_name.rb:63:in `block (3 levels) in &lt;top (required)&gt;'\n</code></pre>\n\n<p>How do I get around this, and why is it happening?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "html5-video"], "answers": [{"tags": [], "owner": {"reputation": 7224, "user_id": 448934, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TXtux.jpg?s=128&g=1", "display_name": "Pascal", "link": "https://stackoverflow.com/users/448934/pascal"}, "is_accepted": true, "score": 1, "last_activity_date": 1502253769, "last_edit_date": 1502253769, "creation_date": 1502253297, "answer_id": 45581755, "question_id": 45581134, "link": "https://stackoverflow.com/questions/45581134/add-video-not-supported-message-to-rails-video-tag/45581755#45581755", "title": "Add &#39;video not supported&#39; message to Rails video_tag", "body": "<p>No, this is not possible. You'll need to render this on your own in the template:</p>\n\n<pre><code>&lt;video&gt;\n  &lt;source src=\"#{movie.mp4}\" type=\"video/mp4\"&gt;\n  &lt;source src=\"#{movie.ogg}\" type=\"video/ogg\"&gt;\n  Your browser does not support the video tag.\n&lt;/video&gt;\n</code></pre>\n\n<p>Or build a helper which does that for you:</p>\n\n<pre><code>def video_tag_with_not_supported_text(*sources)\n  options = sources.extract_options!.symbolize_keys\n  sources.flatten!\n\n  content_tag(:video, options) do\n    safe_join (\n      sources.map { |source| tag('source', :src =&gt; path_to_video(source)) } +\n      ['Your browser does not support the video tag.']\n    )\n  end\nend\n</code></pre>\n\n<p>and then use it like:</p>\n\n<pre><code>=video_tag_with_not_supported_text('/x.mp4', '/y.ogv', width: '800px')\n</code></pre>\n"}], "owner": {"reputation": 119, "user_id": 7039910, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/464edee302c4920a64df3b21810ed084?s=128&d=identicon&r=PG&f=1", "display_name": "crcerror", "link": "https://stackoverflow.com/users/7039910/crcerror"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 214, "favorite_count": 0, "accepted_answer_id": 45581755, "answer_count": 1, "score": 0, "last_activity_date": 1502253769, "creation_date": 1502248698, "question_id": 45581134, "link": "https://stackoverflow.com/questions/45581134/add-video-not-supported-message-to-rails-video-tag", "title": "Add &#39;video not supported&#39; message to Rails video_tag", "body": "<p>Is there any way to made this code working?</p>\n\n<pre><code>= video_tag(\"#{video.mp4}\", \"#{video.ogv}\", 'Your browser does not support the video tag.'\n</code></pre>\n\n<p>Now it only adds new video source with text message instead of returning it like that:</p>\n\n<pre><code>&lt;video&gt;\n  &lt;source src=\"movie.mp4\" type=\"video/mp4\"&gt;\n  &lt;source src=\"movie.ogg\" type=\"video/ogg\"&gt;\n  Your browser does not support the video tag.\n&lt;/video&gt;\n</code></pre>\n"}, {"tags": ["ruby", "rubygems"], "comments": [{"owner": {"reputation": 3638, "user_id": 1977104, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1fe5f45f44332caa3a105c05382c8e7b?s=128&d=identicon&r=PG", "display_name": "Wasif Hossain", "link": "https://stackoverflow.com/users/1977104/wasif-hossain"}, "edited": false, "score": 0, "creation_date": 1502532886, "post_id": 45580570, "comment_id": 78256720, "body": "if you are on Windows 10, try to work with ruby on <code>Windows Subsystem on Linux (WSL)</code> and use <code>RVM</code> for easier managing of gem versions."}, {"owner": {"reputation": 1105, "user_id": 1168379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d8cb9f01f0296531ac9cad5bc6f2457?s=128&d=identicon&r=PG", "display_name": "Charles", "link": "https://stackoverflow.com/users/1168379/charles"}, "edited": false, "score": 0, "creation_date": 1502758620, "post_id": 45580570, "comment_id": 78328039, "body": "Do you have the devkit installed? <a href=\"https://rubyinstaller.org/add-ons/devkit.html\" rel=\"nofollow noreferrer\">rubyinstaller.org/add-ons/devkit.html</a>"}], "owner": {"reputation": 1, "user_id": 3491338, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b50a1e2908f8c90212ba675bb7474e6?s=128&d=identicon&r=PG&f=1", "display_name": "jrybz", "link": "https://stackoverflow.com/users/3491338/jrybz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 56, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1502776328, "creation_date": 1502244269, "last_edit_date": 1502776328, "question_id": 45580570, "link": "https://stackoverflow.com/questions/45580570/error-installing-twitter-gem-on-windows", "title": "Error installing Twitter gem on Windows", "body": "<p>I am a new Ruby user and recent coder. I was trying to install the Twitter Gem but no luck. I am on Windows 10 and my Ruby version is 2.2.6p396, and Gem version 2.4.5.2.  Thanks ahead of time.</p>\n\n<p><a href=\"https://i.stack.imgur.com/0lMtT.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/0lMtT.png\" alt=\"code errors screenshot 1st page\"></a></p>\n\n<p><a href=\"https://i.stack.imgur.com/8uDli.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/8uDli.png\" alt=\"code errors screenshot 2nd page\"></a></p>\n"}, {"tags": ["node.js", "ruby", "image", "image-processing"], "comments": [{"owner": {"reputation": 22804, "user_id": 705115, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/212db408fb84ef88b9d5c6b543076c1d?s=128&d=identicon&r=PG", "display_name": "Andrey Sidorov", "link": "https://stackoverflow.com/users/705115/andrey-sidorov"}, "edited": false, "score": 0, "creation_date": 1502235863, "post_id": 45579557, "comment_id": 78118691, "body": "count pixels matching background color?"}, {"owner": {"reputation": 2216, "user_id": 7165275, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d8ad41f944f38348a30791dc7f7d02c?s=128&d=identicon&r=PG&f=1", "display_name": "m. simon borg", "link": "https://stackoverflow.com/users/7165275/m-simon-borg"}, "edited": false, "score": 1, "creation_date": 1502236856, "post_id": 45579557, "comment_id": 78118912, "body": "FWIW, using Ruby&#39;s <code>File.size()</code> returns 1904 bytes for the 28th frame image and 946 bytes for the first frame image"}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1502253783, "post_id": 45579557, "comment_id": 78122802, "body": "Define &quot;most content&quot;, please."}], "answers": [{"tags": [], "owner": {"reputation": 245, "user_id": 8358281, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67a5fbdd382fd6ab1f1385c9d0c9233d?s=128&d=identicon&r=PG&f=1", "display_name": "Arthur-1", "link": "https://stackoverflow.com/users/8358281/arthur-1"}, "is_accepted": false, "score": 1, "last_activity_date": 1502236874, "creation_date": 1502236874, "answer_id": 45579688, "question_id": 45579557, "link": "https://stackoverflow.com/questions/45579557/how-to-compare-images-and-determine-which-has-more-content/45579688#45579688", "title": "How to compare images and determine which has more content?", "body": "<p>There are a couple ways I might go about this. My first thought (this may not be the most practical solution, but it seems theoretically interesting!) would be to try losslessly compressing each frame, and in theory, the frame with the least repeatable content (and thus the most unique content) would have the largest size, so you could then compare the size in bytes/bits of each compressed frame. The accuracy of this solution would probably be highly dependent on the photo passed in.</p>\n\n<p>A more realistic/ practical solution might be to grab the predominant color in the GIF (so in the example, the background color), and then iterate through each pixel and increment a counter each time the color of the current pixel doesn't match the color of the background.</p>\n\n<p>I'm thinking about some more optimized/ sample based solutions, and will edit my response to include them a little later, if performance is a concern for you.</p>\n"}, {"tags": [], "owner": {"reputation": 11451, "user_id": 2790047, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c5a7631a67903295da25dabb94e1f51b?s=128&d=identicon&r=PG", "display_name": "jodag", "link": "https://stackoverflow.com/users/2790047/jodag"}, "is_accepted": false, "score": 6, "last_activity_date": 1502260391, "last_edit_date": 1502260391, "creation_date": 1502240912, "answer_id": 45580139, "question_id": 45579557, "link": "https://stackoverflow.com/questions/45579557/how-to-compare-images-and-determine-which-has-more-content/45580139#45580139", "title": "How to compare images and determine which has more content?", "body": "<p>One straightforward way this could be accomplished would be to estimate the <a href=\"https://en.wikipedia.org/wiki/Entropy_(information_theory)\" rel=\"nofollow noreferrer\">entropy</a> of each image and choose the frame with maximal entropy.</p>\n\n<p>In information theory, entropy can be thought of as the \"randomness\" of the image. An image of a single color is very predictable, the flatter the distribution, the more random. This is highly related to the compression method described by Arthur-R as <strong>entropy is the lower bound on how much data can be losslessly compressed</strong>.</p>\n\n<h2>Estimating Entropy</h2>\n\n<p>One way to estimate the entropy is to approximate the probability mass function for pixel intensities using a histogram. To generate the plot below I first convert the image to grayscale, then compute the histogram using a bin spacing of 1 (for pixel values from 0 to 255). Then, normalize the histogram so that the bins sum to 1. This normalized histogram is an approximation of the pixel probability mass function.</p>\n\n<p>Using this probability mass function we can easily estimate the entropy of the grayscale image which is described by the following equation</p>\n\n<pre><code>H = E[-log(p(x))]\n</code></pre>\n\n<p>Where <code>H</code> is entropy, <code>E</code> is the expected value, and <code>p(x)</code> is the probability that any given pixel takes the value <code>x</code>.</p>\n\n<p>Programmatically <code>H</code> can be estimated by simply computing <code>-p(x)*log(p(x))</code> for each value <code>p(x)</code> in the histogram and then adding them together.</p>\n\n<p>Plot of entropy vs. frame number for your example.</p>\n\n<p><a href=\"https://i.stack.imgur.com/renwj.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/renwj.png\" alt=\"enter image description here\"></a></p>\n\n<p>with frame 21 (the 22nd frame) having the highest entropy.</p>\n\n<p><a href=\"https://i.stack.imgur.com/RSTUm.gif\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/RSTUm.gif\" alt=\"enter image description here\"></a></p>\n\n<p><strong>Observations</strong></p>\n\n<ul>\n<li><p>The entropy computed here is not equal to the true entropy of the\nimage because it makes the assumption that each pixel is independently sampled from the same distribution. To get the true entropy we would need to know\nthe joint distribution of the image which we won't be able to know without\nunderstanding the underlying random process that generated the images\n(which would include human interaction). However, I don't think the true entropy would be very useful and this measure should\ngive a reasonable estimate of how much content is in the image.</p></li>\n<li><p>This method will fail if some not-so-interesting frame\ncontains much more noise (randomly colored pixels) than the most\ninteresting frame because noise results in a high entropy. For example, the \nfollowing image is pure uniform noise and therefore has maximum entropy (H = 8 bits), i.e. no compression is possible.</p></li>\n</ul>\n\n<p><a href=\"https://i.stack.imgur.com/Xy1zx.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Xy1zx.png\" alt=\"enter image description here\"></a></p>\n\n<h2>Ruby Implementation</h2>\n\n<p>I don't know ruby but it looks like one of the answers to <a href=\"https://stackoverflow.com/questions/4935380/get-or-calculate-the-entropy-of-an-image-with-ruby-and-imagemagick\">this question</a> refers to a package for computing entropy of an image.</p>\n\n<p>From m. simon borg's comment</p>\n\n<blockquote>\n  <p>FWIW, using Ruby's <code>File.size()</code> returns 1904 bytes for the 28th frame\n  image and 946 bytes for the first frame image \u2013 m. simon borg</p>\n</blockquote>\n\n<p><code>File.size()</code> should be roughly proportional to entropy.</p>\n\n<hr>\n\n<p>As an aside, if you check the size of the 200x200 noise image on disk you will see that the file is 40,345 bytes even after compression, but the uncompressed data is only 40,000 bytes. Information theory tells us that no compression scheme can ever losslessly compress such images on average.</p>\n"}, {"tags": [], "owner": {"reputation": 76, "user_id": 2230814, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/78a8w.jpg?s=128&g=1", "display_name": "Leo1234562014", "link": "https://stackoverflow.com/users/2230814/leo1234562014"}, "is_accepted": false, "score": 0, "last_activity_date": 1507505567, "creation_date": 1507505567, "answer_id": 46637074, "question_id": 45579557, "link": "https://stackoverflow.com/questions/45579557/how-to-compare-images-and-determine-which-has-more-content/46637074#46637074", "title": "How to compare images and determine which has more content?", "body": "<p>I think that you can choose an API such as Restful Web Service for do that because without it that's so hard.\nFor example,these are some famous API's:</p>\n\n<p><a href=\"https://cloud.google.com/vision/\" rel=\"nofollow noreferrer\">https://cloud.google.com/vision/</a></p>\n\n<p><a href=\"https://www.clarifai.com/\" rel=\"nofollow noreferrer\">https://www.clarifai.com/</a></p>\n\n<p><a href=\"https://vize.ai\" rel=\"nofollow noreferrer\">https://vize.ai</a></p>\n\n<p><a href=\"https://azure.microsoft.com/en-us/services/cognitive-services/computer-vision/\" rel=\"nofollow noreferrer\">https://azure.microsoft.com/en-us/services/cognitive-services/computer-vision/</a></p>\n\n<p><a href=\"https://imagga.com\" rel=\"nofollow noreferrer\">https://imagga.com</a></p>\n"}], "owner": {"reputation": 4993, "user_id": 293585, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/fdf509cf650ca52f9a5affc754e34215?s=128&d=identicon&r=PG&f=1", "display_name": "floatleft", "link": "https://stackoverflow.com/users/293585/floatleft"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 555, "favorite_count": 0, "answer_count": 3, "score": 6, "last_activity_date": 1507505567, "creation_date": 1502235739, "question_id": 45579557, "link": "https://stackoverflow.com/questions/45579557/how-to-compare-images-and-determine-which-has-more-content", "title": "How to compare images and determine which has more content?", "body": "<p>Goal: I want to grab the best frame from an animated GIF and use it as a static preview image. I believe the best frame is one that shows the most content - not necessarily the first or last frame.</p>\n\n<p>Take this GIF for example:</p>\n\n<p><a href=\"https://i.stack.imgur.com/7KUpK.gif\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/7KUpK.gif\" alt=\"enter image description here\"></a></p>\n\n<p>--</p>\n\n<p>This is the first frame: </p>\n\n<p><a href=\"https://i.stack.imgur.com/x4yDD.gif\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/x4yDD.gif\" alt=\"enter image description here\"></a></p>\n\n<p>--</p>\n\n<p>Here is the 28th frame:</p>\n\n<p><a href=\"https://i.stack.imgur.com/hMtVa.gif\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/hMtVa.gif\" alt=\"enter image description here\"></a></p>\n\n<p>It's clear that frame 28th represents the entire GIF well.</p>\n\n<p>How could I programmatically determine if one frame has more pixel/content over another? Any thoughts, ideas, packages/modules, or articles that you can point me to would be greatly appreciated.</p>\n"}, {"tags": ["ruby", "string", "replace"], "comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 2, "creation_date": 1502233253, "post_id": 45578837, "comment_id": 78118086, "body": "What is the desired return value for the string &quot;uyou youuuu u&quot;."}, {"owner": {"reputation": 7, "user_id": 8057103, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/129299890968312/picture?type=large", "display_name": "Sean Robenalt", "link": "https://stackoverflow.com/users/8057103/sean-robenalt"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1502233607, "post_id": 45578837, "comment_id": 78118157, "body": "I&#39;m realizing my code would not work for all tests. Desired output for that would be &quot;uyou your sister your sister&quot;, the test is asking to replace &#39;you&#39; but not when its a part of another word"}, {"owner": {"reputation": 7, "user_id": 8057103, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/129299890968312/picture?type=large", "display_name": "Sean Robenalt", "link": "https://stackoverflow.com/users/8057103/sean-robenalt"}, "edited": false, "score": 0, "creation_date": 1502234060, "post_id": 45578837, "comment_id": 78118268, "body": "This is how I just passed the tests:"}, {"owner": {"reputation": 7, "user_id": 8057103, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/129299890968312/picture?type=large", "display_name": "Sean Robenalt", "link": "https://stackoverflow.com/users/8057103/sean-robenalt"}, "edited": false, "score": 0, "creation_date": 1502234064, "post_id": 45578837, "comment_id": 78118270, "body": "def autocorrect(input)   input.gsub(/\\b(you+|u)\\b/i, &#39;your sister&#39;) end"}, {"owner": {"reputation": 7, "user_id": 8057103, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/129299890968312/picture?type=large", "display_name": "Sean Robenalt", "link": "https://stackoverflow.com/users/8057103/sean-robenalt"}, "edited": false, "score": 1, "creation_date": 1502234130, "post_id": 45578837, "comment_id": 78118285, "body": "looking between word boundaries for &#39;you&#39; and any number of &#39;u&#39; attached to it....much shorter than what i had written, regex is powerful tool...."}], "answers": [{"tags": [], "owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "is_accepted": false, "score": 1, "last_activity_date": 1502232749, "last_edit_date": 1502232749, "creation_date": 1502231169, "answer_id": 45578944, "question_id": 45578837, "link": "https://stackoverflow.com/questions/45578837/replace-removes-punctuation/45578944#45578944", "title": "Replace removes punctuation?", "body": "<p>I think instead using replace, you could use gsub, replacing the <code>you</code>, with your sister, this way it keeps the exclamation mark.</p>\n\n<p>Because <code>replace</code> would replace the whole string that's being passed, e.g:</p>\n\n<pre><code>p 'you!'.replace('your sister')     # =&gt;\u00a0\"your sister\"\np 'you!'.gsub(/you/, 'your sister') # =&gt; \"your sister!\"\n</code></pre>\n\n<p>So you could try with:</p>\n\n<pre><code>def autocorrect(input)\n  words = input.split()\n  words.each do |word|\n    if word == 'u' || word == 'you'\n      word.replace 'your sister'\n    elsif word.include? 'you'\n      word.gsub!(/you/, 'your sister') \n    end\n  end\n  words = words.join(' ')\n  words\nend\n\np autocorrect(\"I miss you!\")\n#\u00a0=&gt; \"I miss your sister!\"\n</code></pre>\n\n<p>Note just using gsub on your input would give you the expected output.</p>\n"}, {"tags": [], "owner": {"reputation": 982, "user_id": 5593651, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/b3d52652da756a37015aa16befd6d620?s=128&d=identicon&r=PG&f=1", "display_name": "TheCog", "link": "https://stackoverflow.com/users/5593651/thecog"}, "is_accepted": false, "score": 2, "last_activity_date": 1502231626, "creation_date": 1502231626, "answer_id": 45579017, "question_id": 45578837, "link": "https://stackoverflow.com/questions/45578837/replace-removes-punctuation/45579017#45579017", "title": "Replace removes punctuation?", "body": "<p>When you split a string with whitespace in ruby, it takes the punctuation with it. </p>\n\n<p>Try splitting a sentence like \"I like candy!\" and inspecting the last element. You'll notice it's the word \"candy!\" exclamation point and all.  </p>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": true, "score": 1, "last_activity_date": 1502234501, "creation_date": 1502234501, "answer_id": 45579419, "question_id": 45578837, "link": "https://stackoverflow.com/questions/45578837/replace-removes-punctuation/45579419#45579419", "title": "Replace removes punctuation?", "body": "<p>Based in part on a comment on the question, I have assumed the substring to be replaced cannot be immediately preceded or followed by a letter.</p>\n\n<pre><code>r = /\n    (?&lt;!\\p{alpha}) # do not match a letter (negative lookbehind)\n    (?:            # begin non-capture group\n      you+         # match 'yo' followed by one of more 'u's\n      |            # or\n      u            # match 'u'\n    )              # close non-capture group\n    (?!\\p{alpha})  # do not match a letter (negative lookahead)\n    /x             # free-spacing regex definition mode\n\n\"uyou you youuuuuu &amp;you% u ug\".gsub(r, \"your sister\")\n  #=&gt; \"uyou your sister your sister &amp;your sister% your sister ug\"\n</code></pre>\n\n<p>This regular expression is conventionally written</p>\n\n<pre><code>/(?&lt;!\\p{alpha})(?:you+|u)(?!\\p{alpha})/\n</code></pre>\n"}], "owner": {"reputation": 7, "user_id": 8057103, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/129299890968312/picture?type=large", "display_name": "Sean Robenalt", "link": "https://stackoverflow.com/users/8057103/sean-robenalt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 115, "favorite_count": 0, "accepted_answer_id": 45579419, "answer_count": 3, "score": 0, "last_activity_date": 1502260311, "creation_date": 1502230591, "last_edit_date": 1502260311, "question_id": 45578837, "link": "https://stackoverflow.com/questions/45578837/replace-removes-punctuation", "title": "Replace removes punctuation?", "body": "<p>My task is to replace all instances of <code>'you'</code>, <code>'u'</code>, and <code>'youuuu'</code> (with numbers of <code>'u'</code>) in a string with <code>'your sister'</code>.</p>\n\n<p>Here's my code:</p>\n\n<pre><code>def autocorrect(input)\n  words = input.split()\n  words.each do |word|\n    if word == 'u' || word == 'you'\n      word.replace 'your sister'\n    elsif word.include? 'you'\n      word.replace 'your sister'\n    end\n  end\n  words = words.join(' ')\n  words\nend\n</code></pre>\n\n<p>My code replaces the word correctly, but it also removes punctuation. I get this:</p>\n\n<pre><code>autocorrect(\"I miss you!\")\n# =&gt; \"I miss your sister\"\n</code></pre>\n\n<p>There is no exclamation point in the output. Does anybody know why this happens?</p>\n"}, {"tags": ["ruby", "jekyll"], "comments": [{"owner": {"reputation": 1434, "user_id": 5010370, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/5ef5c21eb66b79ab4fa94df6b40be5b4?s=128&d=identicon&r=PG&f=1", "display_name": "Lasse Sviland", "link": "https://stackoverflow.com/users/5010370/lasse-sviland"}, "edited": false, "score": 0, "creation_date": 1502272490, "post_id": 45578585, "comment_id": 78133365, "body": "Is the last example really working? or do you get an error when it is rendering? (<code>{% qr http:&#47;&#47;www.johndoe.com %}</code>)"}, {"owner": {"reputation": 567, "user_id": 1568318, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/5ba0aa22f64932e00b85cc43ac3ec140?s=128&d=identicon&r=PG", "display_name": "ccamacho", "link": "https://stackoverflow.com/users/1568318/ccamacho"}, "reply_to_user": {"reputation": 1434, "user_id": 5010370, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/5ef5c21eb66b79ab4fa94df6b40be5b4?s=128&d=identicon&r=PG&f=1", "display_name": "Lasse Sviland", "link": "https://stackoverflow.com/users/5010370/lasse-sviland"}, "edited": false, "score": 0, "creation_date": 1502274621, "post_id": 45578585, "comment_id": 78134934, "body": "It renders perfectly, the thing is that im only getting the latest QR for all users."}, {"owner": {"reputation": 1434, "user_id": 5010370, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/5ef5c21eb66b79ab4fa94df6b40be5b4?s=128&d=identicon&r=PG&f=1", "display_name": "Lasse Sviland", "link": "https://stackoverflow.com/users/5010370/lasse-sviland"}, "edited": false, "score": 0, "creation_date": 1502277470, "post_id": 45578585, "comment_id": 78137026, "body": "It is not suppose to work like that, <code>page_url = &quot;#{lookup(context, &#39;site.url&#39;)}#{lookup(context, @url)}&quot;</code>, will try to find the string sent in the context, so it will be looking for &quot;person.qr&quot;, in the context, so sending a url, should give a error like this: <code>undefined method &#39;[]&#39; for nil:NilClass</code>. Is it generating a qr code that is correct for the <code>http:&#47;&#47;www.johndoe.com&#47;</code> url as well?"}], "answers": [{"tags": [], "owner": {"reputation": 46692, "user_id": 1548376, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qCZQw.gif?s=128&g=1", "display_name": "David Jacquel", "link": "https://stackoverflow.com/users/1548376/david-jacquel"}, "is_accepted": false, "score": 0, "last_activity_date": 1502275835, "creation_date": 1502275835, "answer_id": 45588603, "question_id": 45578585, "link": "https://stackoverflow.com/questions/45578585/render-different-tags-from-jekyll-plugin-in-same-template/45588603#45588603", "title": "Render different tags from Jekyll plugin in same template", "body": "<p><code>{% qr person.qr %}</code> is passing the <code>string \"person.qr\"</code>, not the corresponding value.</p>\n\n<p>You can do <code>{% qr {{p.qr}} %}</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 567, "user_id": 1568318, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/5ba0aa22f64932e00b85cc43ac3ec140?s=128&d=identicon&r=PG", "display_name": "ccamacho", "link": "https://stackoverflow.com/users/1568318/ccamacho"}, "is_accepted": true, "score": 0, "last_activity_date": 1502290644, "creation_date": 1502290644, "answer_id": 45594186, "question_id": 45578585, "link": "https://stackoverflow.com/questions/45578585/render-different-tags-from-jekyll-plugin-in-same-template/45594186#45594186", "title": "Render different tags from Jekyll plugin in same template", "body": "<p>This is the actual fix:</p>\n\n<pre><code>require 'rqrcode_png'\nclass QrCodeTag &lt; Liquid::Tag\n  include Jekyll::LiquidExtensions\n  def initialize(tag_name, url, tokens)\n    super\n    params = Shellwords.shellwords url\n    @url = url.strip\n  end\n\n  def render(context)\n    page_url = Liquid::Template.parse('{{'+@url+'}}').render context\n\n    qr = RQRCode::QRCode.new(page_url, size: 4) # Size increased because URLs can be long\n    png = qr.to_img\n    png = png.resize(120, 120)\n    &lt;&lt;-MARKUP.strip\n    &lt;div class=\"qrcode\"&gt;\n      &lt;a href=\"#{page_url}\" target=\"_blank\"&gt; &lt;img src=\"#{png.to_data_url}\" alt=\"#{page_url}\"&gt; &lt;/a&gt;\n    &lt;/div&gt;\n    MARKUP\n  end\nend\n\nLiquid::Template.register_tag('qr', QrCodeTag)\n</code></pre>\n\n<p>So, we parse the string and get the real value for the variable.</p>\n"}], "owner": {"reputation": 567, "user_id": 1568318, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/5ba0aa22f64932e00b85cc43ac3ec140?s=128&d=identicon&r=PG", "display_name": "ccamacho", "link": "https://stackoverflow.com/users/1568318/ccamacho"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 0, "accepted_answer_id": 45594186, "answer_count": 2, "score": 0, "last_activity_date": 1502290644, "creation_date": 1502229221, "last_edit_date": 1502266864, "question_id": 45578585, "link": "https://stackoverflow.com/questions/45578585/render-different-tags-from-jekyll-plugin-in-same-template", "title": "Render different tags from Jekyll plugin in same template", "body": "<p>Problem:\n  Rendering QR codes for users in a Jekyll template keep the last QR for all users:</p>\n\n<p>I have this code:</p>\n\n<p>index.html</p>\n\n<pre><code>    {% for person in staff %}\n        {% qr person.qr %}\n    {% endfor %}\n</code></pre>\n\n<p>qr.rb</p>\n\n<pre><code>require 'rqrcode_png'\nclass QrCodeTag &lt; Liquid::Tag\n  def initialize(tag_name, url, tokens)\n    super\n    @url = url.strip\n  end\n\n  def lookup(context, name)\n    lookup = context\n    name.split(\".\").each { |value| lookup = lookup[value] }\n    lookup\n  end\n\n  def render(context)\n    page_url = \"#{lookup(context, 'site.url')}#{lookup(context, @url)}\"\n    qr = RQRCode::QRCode.new(page_url, size: 10) # Size increased because URLs can be long\n    png = qr.to_img\n    &lt;&lt;-MARKUP.strip\n    &lt;div class=\"qrcode\"&gt;\n      &lt;img src=\"#{png.to_data_url}\" alt=\"#{page_url}\"&gt;\n    &lt;/div&gt;\n    MARKUP\n  end\nend\n\nLiquid::Template.register_tag('qr', QrCodeTag)\n</code></pre>\n\n<p>2017-09-01-john-doe.md</p>\n\n<pre><code>---\ncategory: staff\nname: John Doe\nqr: \"http://www.johndoe.com/\"\n---\n\nJohn is really cool...\n</code></pre>\n\n<p>2017-09-02-maria-doe.md</p>\n\n<pre><code>---\ncategory: staff\nname: John Doe\nqr: \"http://www.mariadoe.com/\"\n---\n\nMaria is really cool..\n</code></pre>\n\n<p>Now, when rendering the page it renders the\npage successfully but keeping the same object (With the QR code)\nfor all users rendered on the same page (They must be on the same page).</p>\n\n<p>I'm quite sure that the problem is that in some how I'm not deleting the old object when creating the new one or something related to a global variable not assigned correctly.</p>\n\n<p>In this case, each user should have a different QR code but they have all the same.</p>\n\n<p>Workaround:</p>\n\n<p>If you add the tag in the excerpt you will have the qr code tag rendered fine.</p>\n\n<p>Now is there anyone can explain why if you add the data in the excerpt like the below example it will render a different QR code for each user, but if this is added as a variable in the front matter will be the same for all (Will have the last one repeated for all)?</p>\n\n<pre><code>---\ncategory: staff\nname: John Doe\nqr: \"http://www.johndoe.com/\"\n---\n\n{% qr http://www.johndoe.com %}\nJohn is really cool...\n</code></pre>\n"}, {"tags": ["ruby", "chef-infra", "cookbook"], "answers": [{"tags": [], "owner": {"reputation": 43208, "user_id": 78722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf611565f0b79abd0b3dc200ad867661?s=128&d=identicon&r=PG", "display_name": "coderanger", "link": "https://stackoverflow.com/users/78722/coderanger"}, "is_accepted": true, "score": 5, "last_activity_date": 1502228980, "creation_date": 1502228980, "answer_id": 45578547, "question_id": 45578477, "link": "https://stackoverflow.com/questions/45578477/how-to-implement-constants-across-custom-resources-in-chef/45578547#45578547", "title": "How to implement constants across custom resources in Chef?", "body": "<p>Put em' in a module under <code>libraries/default.rb</code>:</p>\n\n<pre><code>module MyCookbook\n  BASE_PATH = '/foo'\nend\n\n# And then in the resource\nproperty(:path, default: MyCookbook::BASE_PATH)\n</code></pre>\n\n<p>or somesuch.</p>\n"}], "owner": {"reputation": 59, "user_id": 4104047, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/376f5f8f72562f3ec96733c891c09ba7?s=128&d=identicon&r=PG&f=1", "display_name": "PaulM", "link": "https://stackoverflow.com/users/4104047/paulm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 235, "favorite_count": 0, "accepted_answer_id": 45578547, "answer_count": 1, "score": 1, "last_activity_date": 1502274026, "creation_date": 1502228642, "last_edit_date": 1502274026, "question_id": 45578477, "link": "https://stackoverflow.com/questions/45578477/how-to-implement-constants-across-custom-resources-in-chef", "title": "How to implement constants across custom resources in Chef?", "body": "<p>I am writing a cookbook that defines four <a href=\"https://docs.chef.io/custom_resources.html\" rel=\"nofollow noreferrer\">custom resources</a>. There are multiple constants that should be shared across all of the resources (permissions for certain types of files, prefixes for names, relative paths etc...).</p>\n\n<p>How can I share these constants across multiple custom resources?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "image-processing", "svg"], "comments": [{"owner": {"reputation": 2216, "user_id": 7165275, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d8ad41f944f38348a30791dc7f7d02c?s=128&d=identicon&r=PG&f=1", "display_name": "m. simon borg", "link": "https://stackoverflow.com/users/7165275/m-simon-borg"}, "edited": false, "score": 0, "creation_date": 1502229124, "post_id": 45578473, "comment_id": 78116750, "body": "Have you looked at RMagick? <a href=\"https://github.com/rmagick/rmagick\" rel=\"nofollow noreferrer\">github.com/rmagick/rmagick</a>"}, {"owner": {"reputation": 21, "user_id": 8379287, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89678fef137082eda57658a19ff40280?s=128&d=identicon&r=PG&f=1", "display_name": "Anirudh Jagdish", "link": "https://stackoverflow.com/users/8379287/anirudh-jagdish"}, "reply_to_user": {"reputation": 2216, "user_id": 7165275, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d8ad41f944f38348a30791dc7f7d02c?s=128&d=identicon&r=PG&f=1", "display_name": "m. simon borg", "link": "https://stackoverflow.com/users/7165275/m-simon-borg"}, "edited": false, "score": 0, "creation_date": 1502229277, "post_id": 45578473, "comment_id": 78116807, "body": "I did, but all I saw was functions to draw svg iamges, not read them for the data they may contain"}, {"owner": {"reputation": 101196, "user_id": 1038015, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c5d912dac5c74b47bbaff7164f5f8bb8?s=128&d=identicon&r=PG", "display_name": "Robert Longson", "link": "https://stackoverflow.com/users/1038015/robert-longson"}, "edited": false, "score": 0, "creation_date": 1502229766, "post_id": 45578473, "comment_id": 78116991, "body": "<a href=\"http://www.nokogiri.org/tutorials/parsing_an_html_xml_document.html\" rel=\"nofollow noreferrer\">nokogiri.org/tutorials/parsing_an_html_xml_document.html</a>"}, {"owner": {"reputation": 21, "user_id": 8379287, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89678fef137082eda57658a19ff40280?s=128&d=identicon&r=PG&f=1", "display_name": "Anirudh Jagdish", "link": "https://stackoverflow.com/users/8379287/anirudh-jagdish"}, "edited": false, "score": 0, "creation_date": 1502231588, "post_id": 45578473, "comment_id": 78117572, "body": "So for all the &#39;path&#39; elements that show up as a result of Nokogiri&#39;s output, are the  path&#39;s the locations of each of those objects? I am still confused as to how that&#39;d give me location, I don&#39;t see any bounding box data in the output."}, {"owner": {"reputation": 21, "user_id": 8379287, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89678fef137082eda57658a19ff40280?s=128&d=identicon&r=PG&f=1", "display_name": "Anirudh Jagdish", "link": "https://stackoverflow.com/users/8379287/anirudh-jagdish"}, "edited": false, "score": 0, "creation_date": 1502236879, "post_id": 45578473, "comment_id": 78118920, "body": "Did some tinkering, and managed to get the boundsBox with rmagick and nokogiri, so thanks guys!"}, {"owner": {"reputation": 41485, "user_id": 2521214, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/nd58V.jpg?s=128&g=1", "display_name": "Spektre", "link": "https://stackoverflow.com/users/2521214/spektre"}, "edited": false, "score": 0, "creation_date": 1502266493, "post_id": 45578473, "comment_id": 78129149, "body": "@AnirudhJagdish SVG is vector fileformat encoded as XML so if you know how the stuff you&#39;re looking for is encoded then you can directly read it from the XML ... for example parsing path elements is easy ... Text tags are also easily detectable (unless polygons are used instead of text). So try to write own parser for only features you want. Do not forget to apply all transform matrices along the way. Without any example SVG is hard to advice any more then that."}, {"owner": {"reputation": 21, "user_id": 8379287, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89678fef137082eda57658a19ff40280?s=128&d=identicon&r=PG&f=1", "display_name": "Anirudh Jagdish", "link": "https://stackoverflow.com/users/8379287/anirudh-jagdish"}, "edited": false, "score": 0, "creation_date": 1502301024, "post_id": 45578473, "comment_id": 78154454, "body": "NokoGiri makes life quiet easy for parsing out the tags I need, so I didn&#39;t need to write my own parser. Here is a sample of what I am getting in my xml file:"}, {"owner": {"reputation": 21, "user_id": 8379287, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89678fef137082eda57658a19ff40280?s=128&d=identicon&r=PG&f=1", "display_name": "Anirudh Jagdish", "link": "https://stackoverflow.com/users/8379287/anirudh-jagdish"}, "edited": false, "score": 0, "creation_date": 1502301134, "post_id": 45578473, "comment_id": 78154517, "body": "&lt;g id=&quot;TEXT_72_&quot;&gt;                 &lt;text transform=&quot;matrix(1 0 0 1 41.1798 128.2293)&quot; style=&quot;fill:#FF00FF; font-family:&#39;MyriadPro-Regular&#39;; font-size:1.7695px;&quot;&gt;834.K3&lt;/text&gt;         &lt;/g&gt;"}], "owner": {"reputation": 21, "user_id": 8379287, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89678fef137082eda57658a19ff40280?s=128&d=identicon&r=PG&f=1", "display_name": "Anirudh Jagdish", "link": "https://stackoverflow.com/users/8379287/anirudh-jagdish"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 155, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1502228621, "creation_date": 1502228621, "question_id": 45578473, "link": "https://stackoverflow.com/questions/45578473/coordinates-extraction-of-svg-file-objects-in-ruby", "title": "Coordinates extraction of SVG file objects in Ruby", "body": "<p>I have a SVG of a floorplan from which I am trying to extract the coordinates of all the text (i.e. roomnumbers) and objects (i.e. tables) for a rails app I am making. I tried looking for gems and such that might help but everything seemed to be very old/broken, so how would I go about processing a SVG file so that I could, say, store all the x-y coordinates of its components in a ruby hash?  </p>\n"}, {"tags": ["ruby", "file", "escaping"], "comments": [{"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1502225716, "post_id": 45577827, "comment_id": 78115202, "body": "How are you showing the data? using <code>p</code>?"}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1502260968, "post_id": 45577827, "comment_id": 78125626, "body": "You cannot have an array (directly) in a file. What you got is a string, and that is what you had in the file from the beginning."}], "answers": [{"tags": [], "owner": {"reputation": 2216, "user_id": 7165275, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d8ad41f944f38348a30791dc7f7d02c?s=128&d=identicon&r=PG&f=1", "display_name": "m. simon borg", "link": "https://stackoverflow.com/users/7165275/m-simon-borg"}, "is_accepted": true, "score": 2, "last_activity_date": 1502226912, "creation_date": 1502226912, "answer_id": 45578130, "question_id": 45577827, "link": "https://stackoverflow.com/questions/45577827/how-do-i-read-a-file-and-escape-the-characters/45578130#45578130", "title": "How do I read a file and escape the characters?", "body": "<p>If you're trying to de-serialize the file and turn the contents into a usable Ruby object, then in this case you can use the JSON library</p>\n\n<pre><code>require 'json'\n\ncontents = File.open(\"./tmp/foo/foo_bar\", \"r\") { |file| file.read } # =&gt; \"[\\\"1234\\\",\\\"4567\\\",\\\"8899\\\"]\"\nresult = JSON.parse(contents) # =&gt; [\"1234\", \"4567\", \"8899\"]\nresult.is_a?(Array) # =&gt; true\n</code></pre>\n"}], "owner": {"reputation": 541, "user_id": 4190664, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/de07027535059906c84b49ea7ea593ea?s=128&d=identicon&r=PG&f=1", "display_name": "kmancusi", "link": "https://stackoverflow.com/users/4190664/kmancusi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "accepted_answer_id": 45578130, "answer_count": 1, "score": 0, "last_activity_date": 1502260863, "creation_date": 1502225494, "last_edit_date": 1502260863, "question_id": 45577827, "link": "https://stackoverflow.com/questions/45577827/how-do-i-read-a-file-and-escape-the-characters", "title": "How do I read a file and escape the characters?", "body": "<p>I have a file that contains an array of strings like this:</p>\n\n<pre><code>[\"1234\",\"4567\",\"8899\"]\n</code></pre>\n\n<p>I am opening the file like this:</p>\n\n<pre><code>File.open(\"./tmp/foo/foo_bar\", \"r\") { |file| file.read }\n</code></pre>\n\n<p>but it comes back with quotations and <code>\"\\\"</code> like this:</p>\n\n<pre><code>\"[\\\"1234\\\",\\\"4567\\\",\\\"8899\\\"]\"\n</code></pre>\n\n<p>How do I have the extra <code>\"\"</code> and <code>\"\\\"</code> removed?</p>\n"}, {"tags": ["ruby", "postgresql", "filtering", "jsonb", "dynamic-schema"], "comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 1, "creation_date": 1502225438, "post_id": 45577729, "comment_id": 78115079, "body": "You should not alter schema. You should rethink the problem (think vertical not horizontal). We have plenty of &quot;Free Form&quot; products with attributes. these are stored in an attribution table which can be as simple as product_id, attribute_name, attribute_value and attribute_type (for casting as needed)."}, {"owner": {"reputation": 183, "user_id": 4592096, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/af89de25ba36e49b6b950b5c0536831a?s=128&d=identicon&r=PG&f=1", "display_name": "dewastator", "link": "https://stackoverflow.com/users/4592096/dewastator"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1502226744, "post_id": 45577729, "comment_id": 78115633, "body": "Can you extend your comment? What do you mean that I should not alter schema?"}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 1, "creation_date": 1502235611, "post_id": 45577729, "comment_id": 78118640, "body": "What I meant is a dynamic schema is unpredictable. You could store the additional data as Json but this too has limits and sorting seems far more difficult than using a true table with a one to many relationship"}], "answers": [{"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user11912252"}, "is_accepted": false, "score": 0, "last_activity_date": 1576523909, "creation_date": 1576523909, "answer_id": 59362997, "question_id": 45577729, "link": "https://stackoverflow.com/questions/45577729/using-dynamic-schema-with-postgres/59362997#59362997", "title": "Using dynamic schema with postgres", "body": "<p>I would recommend using NoSQL database like mongoDB. Your problem statement requires schema-less document store supporting fast reads ie. MongoDB or Couchbase which has great support </p>\n"}], "owner": {"reputation": 183, "user_id": 4592096, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/af89de25ba36e49b6b950b5c0536831a?s=128&d=identicon&r=PG&f=1", "display_name": "dewastator", "link": "https://stackoverflow.com/users/4592096/dewastator"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1375, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1576523909, "creation_date": 1502225117, "question_id": 45577729, "link": "https://stackoverflow.com/questions/45577729/using-dynamic-schema-with-postgres", "title": "Using dynamic schema with postgres", "body": "<p>I have to decide how I want to implement dynamic schema. I will try to put some more description where my problem is. </p>\n\n<p>I use the postgres DB in latest version and app is written in Ruby and Hanami. I have requirement to implement view where I will display list of users in our application (table view). Here comes first requirement that it needs to contain dynamic data. For example user has name and birth_date and I store this data in Users table. In other table I store metrics related to user like number of views and comments. This is only part of data. I have couple more tables related to my User and I need to join them into one view. It doesn't sound very dynamic. I know. But I have another requirement. I want to allow users to add custom column to my table view. </p>\n\n<p>At this point we have table with following predefined columns:</p>\n\n<pre><code>name, birth_date, number_of_views, number_of_comments \n</code></pre>\n\n<p>and we can add some custom ones.</p>\n\n<p>Now It becomes dynamic. It is not the end. I need to add filtering on this columns. So for example if given user has columns I mentioned earlier I should allow to filter on all of them (predefined and custom). I am trying to investigate how I should implement this feature.</p>\n\n<p>Now the question part :) I am thinking about how I should store this data. I am thinking about storing it as a JSONB column in my postgres. Scale of this is about 5kk of users. So this mean 5kk rows in this table. Not so much. I am wondering about filtering this data using dynamic filters. I tried to make some benchmarks for 5kk table and it worked well if I used pagination (without indexes). For querying whole dataset it took like 10sec so wasn't perfect.</p>\n\n<p>Questions</p>\n\n<ol>\n<li>Is JSONB good idea? I am not sure If I can define proper indexes if I will filter dynamically on this data (every query can be different). How to define indexes for this scenario?</li>\n<li>Is a good idea to store predefined columns as normal columns in table and only custom ones in JSONB? Will it give me any profit?</li>\n<li>I should I use postgres to that? I don't believe that postgres isn't good enough for this scale and I prefer to not change tool.</li>\n</ol>\n\n<p>Thanks for all answers. I don't have huge experience with dynamic schemas so every tip can be usefull ;P</p>\n"}, {"tags": ["mysql", "ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 2216, "user_id": 7165275, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d8ad41f944f38348a30791dc7f7d02c?s=128&d=identicon&r=PG&f=1", "display_name": "m. simon borg", "link": "https://stackoverflow.com/users/7165275/m-simon-borg"}, "edited": false, "score": 1, "creation_date": 1502223476, "post_id": 45577296, "comment_id": 78114108, "body": "As a side note, unless <code>uuids</code> is a variable pointing to some object, <code>{ uuids =&gt; [&quot;uuid1&quot;, &quot;uuid2&quot;, &quot;uuid3&quot;] }</code> is not valid syntax. probably should be <code>{ :uuids =&gt; [&quot;uuid1&quot;, &quot;uuid2&quot;, &quot;uuid3&quot;] }</code>"}, {"owner": {"reputation": 68, "user_id": 5545108, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6315ac00caf5dec4d0098be07d43cab2?s=128&d=identicon&r=PG", "display_name": "Scap", "link": "https://stackoverflow.com/users/5545108/scap"}, "reply_to_user": {"reputation": 2216, "user_id": 7165275, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d8ad41f944f38348a30791dc7f7d02c?s=128&d=identicon&r=PG&f=1", "display_name": "m. simon borg", "link": "https://stackoverflow.com/users/7165275/m-simon-borg"}, "edited": false, "score": 0, "creation_date": 1502223644, "post_id": 45577296, "comment_id": 78114193, "body": "You are right, sorry for my formatting. But you knew what I meant"}], "answers": [{"comments": [{"owner": {"reputation": 68, "user_id": 5545108, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6315ac00caf5dec4d0098be07d43cab2?s=128&d=identicon&r=PG", "display_name": "Scap", "link": "https://stackoverflow.com/users/5545108/scap"}, "edited": false, "score": 0, "creation_date": 1502223456, "post_id": 45577329, "comment_id": 78114096, "body": "My sql query in my question is simplified, in reality I have several joins and selects which will not scale with active record"}, {"owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "reply_to_user": {"reputation": 68, "user_id": 5545108, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6315ac00caf5dec4d0098be07d43cab2?s=128&d=identicon&r=PG", "display_name": "Scap", "link": "https://stackoverflow.com/users/5545108/scap"}, "edited": false, "score": 2, "creation_date": 1502223598, "post_id": 45577329, "comment_id": 78114163, "body": "And so? You can separate each part. A string for joins and select and an hash for the where part. <code>Bar.joins(&quot;INNER JOIN t2 ON ...&quot;).select(&quot;id, name, etc&quot;).where(uuid: your_hash[&#39;uuids&#39;])</code>"}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "reply_to_user": {"reputation": 68, "user_id": 5545108, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6315ac00caf5dec4d0098be07d43cab2?s=128&d=identicon&r=PG", "display_name": "Scap", "link": "https://stackoverflow.com/users/5545108/scap"}, "edited": false, "score": 1, "creation_date": 1502224955, "post_id": 45577329, "comment_id": 78114866, "body": "@Scap what does <i>&quot;will not scale with active record&quot;</i> even mean? Joins do not even have to be <code>String</code>s you can merge <code>Arel</code> joins right into an AR query and the assembly will still be correct. <a href=\"https://stackoverflow.com/a/44890594/1978251\">Example for edification</a> Everything is possible if you just believe"}, {"owner": {"reputation": 68, "user_id": 5545108, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6315ac00caf5dec4d0098be07d43cab2?s=128&d=identicon&r=PG", "display_name": "Scap", "link": "https://stackoverflow.com/users/5545108/scap"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1502226371, "post_id": 45577329, "comment_id": 78115478, "body": "@engineersmnky I&#39;m a believer! thanks for linking that example"}], "tags": [], "owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "is_accepted": false, "score": 3, "last_activity_date": 1502223688, "last_edit_date": 1502223688, "creation_date": 1502223338, "answer_id": 45577329, "question_id": 45577296, "link": "https://stackoverflow.com/questions/45577296/turn-array-to-comma-separated-strings/45577329#45577329", "title": "Turn array to comma separated strings", "body": "<p>Try this one</p>\n\n<pre><code>Bar.where(uuid: your_hash['uuids']).select(:foo)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 68, "user_id": 5545108, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6315ac00caf5dec4d0098be07d43cab2?s=128&d=identicon&r=PG", "display_name": "Scap", "link": "https://stackoverflow.com/users/5545108/scap"}, "is_accepted": false, "score": -1, "last_activity_date": 1502310443, "creation_date": 1502310443, "answer_id": 45600077, "question_id": 45577296, "link": "https://stackoverflow.com/questions/45577296/turn-array-to-comma-separated-strings/45600077#45600077", "title": "Turn array to comma separated strings", "body": "<p>Here is the answer I was looking for:</p>\n\n<pre><code>SELECT bars.foo\nFROM bars\nWHERE bars.uuid IN (#{myuuids.map {|str| \"\\\"#{str}\\\"\"}.join(\", \")})\n</code></pre>\n"}], "owner": {"reputation": 68, "user_id": 5545108, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6315ac00caf5dec4d0098be07d43cab2?s=128&d=identicon&r=PG", "display_name": "Scap", "link": "https://stackoverflow.com/users/5545108/scap"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 123, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1502310443, "creation_date": 1502223179, "last_edit_date": 1502261099, "question_id": 45577296, "link": "https://stackoverflow.com/questions/45577296/turn-array-to-comma-separated-strings", "title": "Turn array to comma separated strings", "body": "<p>I have a hash of an array of uuids as such </p>\n\n<pre><code>{ \"my_uuids\"=&gt; [\"uuid1\", \"uuid2\", \"uuid3\"] } \n</code></pre>\n\n<p>I also have a raw SQL query to insert all uuids within the hash's array into:</p>\n\n<pre><code>SELECT bars.foo\nFROM bars\nWHERE bars.uuid IN (\"uuid1\", \"uuid2\", \"uuid3\")\n</code></pre>\n\n<p>I do not know how many uuid's there will be, so setting each uuid to a variable will not scale. </p>\n\n<p>A string of strings does not work with mysql either (i.e. <code>\"'uuid1', 'uuid2', 'uuid3'\"</code>).</p>\n"}, {"tags": ["mysql", "sql", "ruby"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1502221479, "post_id": 45576836, "comment_id": 78113055, "body": "Are you using activerecord?"}, {"owner": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 0, "creation_date": 1502221771, "post_id": 45576836, "comment_id": 78113207, "body": "What SQL query library are you using?"}, {"owner": {"reputation": 1018, "user_id": 2908778, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/shRDJ.png?s=128&g=1", "display_name": "Seal", "link": "https://stackoverflow.com/users/2908778/seal"}, "edited": false, "score": 0, "creation_date": 1502221824, "post_id": 45576836, "comment_id": 78113241, "body": "yes using activerecord base execute"}], "answers": [{"tags": [], "owner": {"reputation": 340, "user_id": 5481533, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6187f0b4e1ee3afd24b05530d136baf1?s=128&d=identicon&r=PG&f=1", "display_name": "urielSilva", "link": "https://stackoverflow.com/users/5481533/urielsilva"}, "is_accepted": false, "score": 1, "last_activity_date": 1502222676, "creation_date": 1502222676, "answer_id": 45577170, "question_id": 45576836, "link": "https://stackoverflow.com/questions/45576836/where-in-with-array-of-values-mysql/45577170#45577170", "title": "Where in with array of values MYSQL", "body": "<p>You could convert the array to a comma separated string using the <code>myarray.join(',')</code> method.</p>\n\n<p>The final code would look like this:</p>\n\n<pre><code>query = \"SELECT * FROM table WHERE id IN (#{myarray.join(',')})\"\n</code></pre>\n\n<p>You might run into some problems if the array values are strings, but it works just fine for integers.</p>\n"}, {"comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1502224189, "post_id": 45577204, "comment_id": 78114484, "body": "You get a +1 for suggesting an <code>arel</code> solution which is probably the must under leveraged library in all of <code>rails</code> (from a developer perspective not an internals perspective <i>it works hard internally</i>)"}, {"owner": {"reputation": 1018, "user_id": 2908778, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/shRDJ.png?s=128&g=1", "display_name": "Seal", "link": "https://stackoverflow.com/users/2908778/seal"}, "edited": false, "score": 0, "creation_date": 1502226200, "post_id": 45577204, "comment_id": 78115410, "body": "Very nice.  I would like to stray away from actually using the ActiveRecord syntax.  Straight sql would be preferred."}], "tags": [], "owner": {"reputation": 9971, "user_id": 8255744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de22299534b5a8ed244ee8ff4aa6c481?s=128&d=identicon&r=PG&f=1", "display_name": "Simple Lime", "link": "https://stackoverflow.com/users/8255744/simple-lime"}, "is_accepted": false, "score": 1, "last_activity_date": 1502243963, "last_edit_date": 1502243963, "creation_date": 1502222803, "answer_id": 45577204, "question_id": 45576836, "link": "https://stackoverflow.com/questions/45576836/where-in-with-array-of-values-mysql/45577204#45577204", "title": "Where in with array of values MYSQL", "body": "<pre><code>User.where(id: [1, 2, 3, 4, nil]).to_sql\n# SELECT \"users\".* FROM \"users\"\n# WHERE (\"users\".\"id\" IN (1, 2, 3, 4) OR \"users\".\"id\" IS NULL)\n</code></pre>\n\n<p>or, if you can't/don't want to use <code>where</code>, you can drop into <a href=\"https://github.com/rails/arel\" rel=\"nofollow noreferrer\">Arel</a> to get just the IN string:</p>\n\n<pre><code>User.arel_table[:id].in([1,2,3,4]).to_sql\n# =&gt; \"users\".\"id\" IN (1, 2, 3, 4)\n</code></pre>\n\n<p>though with this, you don't automatically get that nifty <code>nil</code> handling. If you don't have an ActiveRecord Model, but just using <code>ActiveRecord::Base</code> to execute queries in your database (as mentioned in the <a href=\"https://stackoverflow.com/questions/45576836/where-in-with-array-of-values-mysql/45577204?noredirect=1#comment-78113241\">comments</a>) you can do:</p>\n\n<pre><code>table = Arel::Table.new(:table) # :table is the name of the table in db\ntable[:id].in([1,2,3,4]).to_sql\n# =&gt; \"table\".\"id\" IN (1, 2, 3, 4)\ntable.where(table[:id].in([1,2,3,4])).project(Arel.sql('*')).to_sql\n# =&gt; SELECT * FROM \"table\" WHERE \"table\".\"id\" IN (1, 2, 3, 4)\n</code></pre>\n\n<p>And, avoiding Arel/ActiveRecord as much as possible, you can just do</p>\n\n<pre><code>ActiveRecord::Base.send(:sanitize_sql, ['id in (?)', [1,2,3,4]])\n# =&gt; \"id in (1,2,3,4)\"\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 68, "user_id": 5545108, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6315ac00caf5dec4d0098be07d43cab2?s=128&d=identicon&r=PG", "display_name": "Scap", "link": "https://stackoverflow.com/users/5545108/scap"}, "edited": false, "score": 0, "creation_date": 1502314646, "post_id": 45600136, "comment_id": 78161403, "body": "Similar to @urielSilva answer, but this will work for both integers and strings"}, {"owner": {"reputation": 1057, "user_id": 3674079, "user_type": "registered", "accept_rate": 28, "profile_image": "https://i.stack.imgur.com/1m1O1.jpg?s=128&g=1", "display_name": "quangkid", "link": "https://stackoverflow.com/users/3674079/quangkid"}, "edited": false, "score": 0, "creation_date": 1553755853, "post_id": 45600136, "comment_id": 97504110, "body": "what can I do if my string : <code>SELECT * FROM table WHERE id IN (?);</code>"}], "tags": [], "owner": {"reputation": 68, "user_id": 5545108, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6315ac00caf5dec4d0098be07d43cab2?s=128&d=identicon&r=PG", "display_name": "Scap", "link": "https://stackoverflow.com/users/5545108/scap"}, "is_accepted": true, "score": 1, "last_activity_date": 1502310667, "creation_date": 1502310667, "answer_id": 45600136, "question_id": 45576836, "link": "https://stackoverflow.com/questions/45576836/where-in-with-array-of-values-mysql/45600136#45600136", "title": "Where in with array of values MYSQL", "body": "<p>Try this:</p>\n\n<p><code>SELECT * FROM table WHERE id IN (myarray.map {|i| \"\\\"#{i}\\\"\"}.join(\", \"));</code></p>\n"}], "owner": {"reputation": 1018, "user_id": 2908778, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/shRDJ.png?s=128&g=1", "display_name": "Seal", "link": "https://stackoverflow.com/users/2908778/seal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 881, "favorite_count": 0, "accepted_answer_id": 45600136, "answer_count": 3, "score": 1, "last_activity_date": 1502310667, "creation_date": 1502221368, "last_edit_date": 1502221812, "question_id": 45576836, "link": "https://stackoverflow.com/questions/45576836/where-in-with-array-of-values-mysql", "title": "Where in with array of values MYSQL", "body": "<p>Lets say of I have this query <code>SELECT * FROM table WHERE id IN (1,2,3,4);</code></p>\n\n<p>In my current use case my ids are in an array like so <code>[1,2,3,4]</code></p>\n\n<p>How could I do the same query using the array data structure?</p>\n\n<p>i.e. <code>SELECT * FROM table WHERE id IN (myarray);</code></p>\n\n<p>Edit: this is in ruby :)</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5", "metaprogramming"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1502221042, "post_id": 45576645, "comment_id": 78112810, "body": "There&#39;s no code here at all which makes this question pretty hard to understand or even answer since context is important."}, {"owner": {"reputation": 729, "user_id": 4475119, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/HxSBQ.jpg?s=128&g=1", "display_name": "Achyut Rastogi", "link": "https://stackoverflow.com/users/4475119/achyut-rastogi"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1502221586, "post_id": 45576645, "comment_id": 78113116, "body": "Allow me 10 minutes to remedy that."}, {"owner": {"reputation": 729, "user_id": 4475119, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/HxSBQ.jpg?s=128&g=1", "display_name": "Achyut Rastogi", "link": "https://stackoverflow.com/users/4475119/achyut-rastogi"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1502222193, "post_id": 45576645, "comment_id": 78113436, "body": "@tadman I&#39;ve made the changes and elaborated on my question."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1502222372, "post_id": 45576645, "comment_id": 78113527, "body": "You probably know already how <code>$global_variables</code> are defined. So what exactly is the difficulty here?"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1502222459, "post_id": 45576645, "comment_id": 78113571, "body": "I&#39;m not sure this is going to save any time at all. If it did you&#39;d see it in more common use. Normally going through the code to every <code>def</code> and adding some detail is the most reliable way to do this."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1502222482, "post_id": 45576645, "comment_id": 78113585, "body": "I can see how determining &quot;when server is closed&quot; can be difficult. Without needing to integrate into the server&#39;s lifecycle, what you can do is dump the data periodically, while the server is still active."}, {"owner": {"reputation": 729, "user_id": 4475119, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/HxSBQ.jpg?s=128&g=1", "display_name": "Achyut Rastogi", "link": "https://stackoverflow.com/users/4475119/achyut-rastogi"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1502223955, "post_id": 45576645, "comment_id": 78114351, "body": "@SergioTulentsev Yes, right on both counts. It already figured that the only way is to write all the data in a file, but there&#39;s probably a better way. Also I thought that a gem for this would exist, but I couldn&#39;t find it anywhere."}, {"owner": {"reputation": 729, "user_id": 4475119, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/HxSBQ.jpg?s=128&g=1", "display_name": "Achyut Rastogi", "link": "https://stackoverflow.com/users/4475119/achyut-rastogi"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1502224229, "post_id": 45576645, "comment_id": 78114502, "body": "@tadman Think 2 million lines of undocumented code with a lot of bad practices mixed in, conventions broken etc. If I could just get the line &quot;@params arg_name [ArgClass] arg_example&quot; on the head of every function, It would be great. Later someone could just add some description when they touch that code&quot;"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 2, "creation_date": 1502224323, "post_id": 45576645, "comment_id": 78114559, "body": "@AchyutRastogi I hope you have 500 interns to help with that. There&#39;s really no way to do this automatically. If your code is that chaotic I&#39;d bet there&#39;s argument names like <code>x</code> and <code>array</code> which are as close to meaningless as possible."}], "owner": {"reputation": 729, "user_id": 4475119, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/HxSBQ.jpg?s=128&g=1", "display_name": "Achyut Rastogi", "link": "https://stackoverflow.com/users/4475119/achyut-rastogi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 66, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1502222134, "creation_date": 1502220648, "last_edit_date": 1502222134, "question_id": 45576645, "link": "https://stackoverflow.com/questions/45576645/rails-create-a-global-variable-accessible-in-set-trace-func-and-save-it-to-file", "title": "Rails create a global variable accessible in set_trace_func and save it to file when server is closed", "body": "<p>I want to automatically generate YARD style documentation for my functions (at-least the part that describes parameters and return values). So I am using set_trace_func.</p>\n\n<p>Inside application.rb:</p>\n\n<pre><code>  set_trace_func proc { |event, file, line, id, binding, classname|\n    // my code goes here\n  }\n\n  class Application &lt; Rails::Application\n</code></pre>\n\n<p>Inside set_trace_func I get a parameter binding, which gives me access to all the required data. I want to save this data to a set accessible globally(in all subsequent calls to set_trace_func) and then write this set into a file when the server is closed.</p>\n\n<p>I know this is possible but I haven't been able to figure it out in quite a bit of time and would appreciate it if someone could direct me.</p>\n"}, {"tags": ["ruby", "callback", "controller", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1502220746, "post_id": 45576643, "comment_id": 78112634, "body": "What&#39;s on your ImagesController?"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1502220875, "post_id": 45576643, "comment_id": 78112707, "body": "<code>after_commit</code> only applies to models. For controllers you do mean <code>after_action</code>. Controllers and models share a common design language, but not necessarily method names."}, {"owner": {"reputation": 898, "user_id": 6162996, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/oLM0m.jpg?s=128&g=1", "display_name": "Alexander Gorg", "link": "https://stackoverflow.com/users/6162996/alexander-gorg"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1502221191, "post_id": 45576643, "comment_id": 78112886, "body": "@tadman Do you suppose to move this callback and method which belongs to it to the model?"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1502221237, "post_id": 45576643, "comment_id": 78112918, "body": "It depends. Do you think it&#39;s the responsibility of the model to do that, or is it something the controller should initiate?"}, {"owner": {"reputation": 898, "user_id": 6162996, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/oLM0m.jpg?s=128&g=1", "display_name": "Alexander Gorg", "link": "https://stackoverflow.com/users/6162996/alexander-gorg"}, "edited": false, "score": 0, "creation_date": 1502221374, "post_id": 45576643, "comment_id": 78112995, "body": "I think it doesn&#39;t belong to model, actually. Because it is eventually updates an album. However, I might be wrong. Could you take a look? I&#39;ll update my question in a minute."}], "answers": [{"comments": [{"owner": {"reputation": 898, "user_id": 6162996, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/oLM0m.jpg?s=128&g=1", "display_name": "Alexander Gorg", "link": "https://stackoverflow.com/users/6162996/alexander-gorg"}, "edited": false, "score": 0, "creation_date": 1502221713, "post_id": 45576804, "comment_id": 78113177, "body": "Could you please explain what is the purpose of the &quot;show_serializer&quot; method?"}, {"owner": {"reputation": 1586, "user_id": 1798644, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Rr1jq.jpg?s=128&g=1", "display_name": "MatayoshiMariano", "link": "https://stackoverflow.com/users/1798644/matayoshimariano"}, "reply_to_user": {"reputation": 898, "user_id": 6162996, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/oLM0m.jpg?s=128&g=1", "display_name": "Alexander Gorg", "link": "https://stackoverflow.com/users/6162996/alexander-gorg"}, "edited": false, "score": 0, "creation_date": 1502221858, "post_id": 45576804, "comment_id": 78113265, "body": "I am sorry,  <code>show_serializer</code> is an instance of a Serializer class that only has the responsability of returning a hash to be returned. I will change it for something simplier"}, {"owner": {"reputation": 1586, "user_id": 1798644, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Rr1jq.jpg?s=128&g=1", "display_name": "MatayoshiMariano", "link": "https://stackoverflow.com/users/1798644/matayoshimariano"}, "reply_to_user": {"reputation": 898, "user_id": 6162996, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/oLM0m.jpg?s=128&g=1", "display_name": "Alexander Gorg", "link": "https://stackoverflow.com/users/6162996/alexander-gorg"}, "edited": false, "score": 0, "creation_date": 1502221976, "post_id": 45576804, "comment_id": 78113324, "body": "Your welcome. I hope my answer helps you. Do you have any doubt?"}], "tags": [], "owner": {"reputation": 1586, "user_id": 1798644, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Rr1jq.jpg?s=128&g=1", "display_name": "MatayoshiMariano", "link": "https://stackoverflow.com/users/1798644/matayoshimariano"}, "is_accepted": true, "score": 7, "last_activity_date": 1502221936, "last_edit_date": 1502221936, "creation_date": 1502221252, "answer_id": 45576804, "question_id": 45576643, "link": "https://stackoverflow.com/questions/45576643/what-to-use-instead-of-after-commit-in-controller-in-rails-5/45576804#45576804", "title": "What to use instead of after_commit in controller in Rails 5?", "body": "<p>The <a href=\"https://apidock.com/rails/ActiveRecord/Transactions/ClassMethods/after_commit\" rel=\"noreferrer\">after_commit</a> method is only for models. In the controllers family, you have <a href=\"https://apidock.com/rails/v4.0.2/AbstractController/Callbacks/ClassMethods/after_action\" rel=\"noreferrer\">after_action</a>, that will be executed after the action of the controller is finished.</p>\n\n<p>For example, the <code>after_action</code> in a controller works like this:</p>\n\n<pre><code>class UsersController &lt; ApplicationController\n  after_action :log_activity, only: :show\n\n  # GET v3/users/:id\n  def show\n    render status: :ok,\n           json: { id: current_user.id, name: current_user.name }\n  end\n\n  def log_activity\n    current_user.update(last_activity_at: Time.current)\n  end\n\nend\n</code></pre>\n\n<p>The <code>log_activity</code> method is executed after responding the request.</p>\n\n<p>In the <code>after_action :log_activity, only: :show</code>, with <code>only</code> you can specify after which actions <code>log_activity</code> will run. If you do not specify any, it will run after every action defined in the controller.</p>\n"}], "owner": {"reputation": 898, "user_id": 6162996, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/oLM0m.jpg?s=128&g=1", "display_name": "Alexander Gorg", "link": "https://stackoverflow.com/users/6162996/alexander-gorg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1088, "favorite_count": 0, "accepted_answer_id": 45576804, "answer_count": 1, "score": 1, "last_activity_date": 1502221972, "creation_date": 1502220642, "last_edit_date": 1502221972, "question_id": 45576643, "link": "https://stackoverflow.com/questions/45576643/what-to-use-instead-of-after-commit-in-controller-in-rails-5", "title": "What to use instead of after_commit in controller in Rails 5?", "body": "<p>Today I tried to use a wonderful callback :after_commit which triggers when the object is written to database, however, I've got the error message from Rails: </p>\n\n<pre><code>ActionController::RoutingError (undefined method `after_commit' for ImagesController:Class\nDid you mean?  after_action):\n</code></pre>\n\n<p>Well, that was embarassing! And it seems like this callback was deprecated!\nLooking through search, I tried to use :after_create_commit, which gave me the same error.</p>\n\n<p>The third step was to try :after_action. Here goes the question:\n<strong>How to make it work the same way as :after_commit?</strong></p>\n\n<p><em>I've already tried <a href=\"https://apidock.com/rails/v4.0.2/AbstractController/Callbacks/ClassMethods/after_action\" rel=\"nofollow noreferrer\">apidock.com</a> - it's really minimal! Also I've tried <a href=\"http://api.rubyonrails.org/classes/AbstractController/Callbacks/ClassMethods.html\" rel=\"nofollow noreferrer\">api.rubyonrails.org</a> - it is saying about blocks, but I'm not a ruby ninja to understand it. So I really apprecite if you could spill some light on it!</em></p>\n\n<p>ImagesController:</p>\n\n<pre><code>class ImagesController &lt; ApplicationController\n  after_create_commit :take_image_to_album\n\n  def take_image_to_album\n    if check_album\n      add_inner_to_album(@image)\n    end\n  end\n\n  def create\n    @image = Image.create(image_params.merge(:user_id =&gt; current_user.id)\n\n    respond_to do |format|\n      unless @image.save\n        format.html { render :show, notice: \"Error!\" }\n        format.json { render json: @image.errors, status: :unprocessable_entity }\n      else\n        format.html\n        format.json { render :show, status: :ok, location: @image }\n      end\n    end\n  end\n  ...\n\n  def add_inner_to_album(image)\n    contents = @album.content\n    contents &lt;&lt; [image.id, image[:imageup], false]\n    @album.update(:content =&gt; contents)\n  end\n  end\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "spree", "class-eval"], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 8434990, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-CTMue_OvmwA/AAAAAAAAAAI/AAAAAAAAAoU/xnmMmCufMWY/photo.jpg?sz=128", "display_name": "Serhii Budnik", "link": "https://stackoverflow.com/users/8434990/serhii-budnik"}, "edited": false, "score": 0, "creation_date": 1502268061, "post_id": 45581943, "comment_id": 78130147, "body": "when I&#39;am trying create new controller which extends from Resource Controller I&#39;m getting new error &#39;uninitialized constant&#39;.  I dont want override controller i want only add action to the PromotionsController."}, {"owner": {"reputation": 23, "user_id": 8434990, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-CTMue_OvmwA/AAAAAAAAAAI/AAAAAAAAAoU/xnmMmCufMWY/photo.jpg?sz=128", "display_name": "Serhii Budnik", "link": "https://stackoverflow.com/users/8434990/serhii-budnik"}, "edited": false, "score": 0, "creation_date": 1502268514, "post_id": 45581943, "comment_id": 78130463, "body": "Ohh its solved :) i was must extends from Spree::Admin::BaseController. Thanks! :)"}, {"owner": {"reputation": 2735, "user_id": 7006199, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kFqCJ.jpg?s=128&g=1", "display_name": "Nimish Gupta", "link": "https://stackoverflow.com/users/7006199/nimish-gupta"}, "reply_to_user": {"reputation": 23, "user_id": 8434990, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-CTMue_OvmwA/AAAAAAAAAAI/AAAAAAAAAoU/xnmMmCufMWY/photo.jpg?sz=128", "display_name": "Serhii Budnik", "link": "https://stackoverflow.com/users/8434990/serhii-budnik"}, "edited": false, "score": 0, "creation_date": 1502268600, "post_id": 45581943, "comment_id": 78130521, "body": "glad to help you"}], "tags": [], "owner": {"reputation": 2735, "user_id": 7006199, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kFqCJ.jpg?s=128&g=1", "display_name": "Nimish Gupta", "link": "https://stackoverflow.com/users/7006199/nimish-gupta"}, "is_accepted": true, "score": 3, "last_activity_date": 1502268569, "last_edit_date": 1502268569, "creation_date": 1502254554, "answer_id": 45581943, "question_id": 45576311, "link": "https://stackoverflow.com/questions/45576311/override-controller-in-spree-circular-dependency-detected-while-autoloading-co/45581943#45581943", "title": "Override Controller in Spree - Circular dependency detected while autoloading constant", "body": "<p>Issue is with the filename <code>app/controllers/spree/admin/promotions_controller.rb</code></p>\n\n<p>In spree whenever we are doing class_eval on a controller/model we create the file with name 'original_filenanme_decorator.rb'</p>\n\n<p>i.e <code>app/controllers/spree/admin/promotions_controller_decorator.rb</code></p>\n\n<pre><code>Spree::Admin::PromotionsController.class_eval do\n\n  def users\n    params[:q] ||= {}\n    @search = @promotion.orders.reverse_chronological.ransack(params[:q])\n\n    @users_hash = Hash.new(0)\n    @search.result.each { |order| @users_hash[order.user] += 1 }\n\n    @users_hash = Kaminari.paginate_array(@users_hash.to_a).page(params[:page])\n  end\nend\n</code></pre>\n\n<p>Try changing the filename. It will surely solve your problem.</p>\n\n<p>Let me know if you still face any issue.</p>\n"}], "owner": {"reputation": 23, "user_id": 8434990, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-CTMue_OvmwA/AAAAAAAAAAI/AAAAAAAAAoU/xnmMmCufMWY/photo.jpg?sz=128", "display_name": "Serhii Budnik", "link": "https://stackoverflow.com/users/8434990/serhii-budnik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 595, "favorite_count": 0, "accepted_answer_id": 45581943, "answer_count": 1, "score": 2, "last_activity_date": 1502268569, "creation_date": 1502219414, "question_id": 45576311, "link": "https://stackoverflow.com/questions/45576311/override-controller-in-spree-circular-dependency-detected-while-autoloading-co", "title": "Override Controller in Spree - Circular dependency detected while autoloading constant", "body": "<p>I'm trying to add action to Spree Admin PromotionsController like this</p>\n\n<p>app/controllers/spree/admin/promotions_controller.rb</p>\n\n<pre><code>Spree::Admin::PromotionsController.class_eval do\n\n  def users\n    params[:q] ||= {}\n    @search = @promotion.orders.reverse_chronological.ransack(params[:q])\n\n    @users_hash = Hash.new(0)\n    @search.result.each { |order| @users_hash[order.user] += 1 }\n\n    @users_hash = Kaminari.paginate_array(@users_hash.to_a).page(params[:page])\n  end\nend\n</code></pre>\n\n<p>But I'm getting this error: </p>\n\n<blockquote>\n  <p>Circular dependency detected while autoloading constant Spree::Admin::PromotionsController</p>\n</blockquote>\n\n<p>Also I'm tried to override controller totally:</p>\n\n<pre><code> module Spree\n   module Admin\n     class PromotionsController &lt; ResourceController\n       before_action :load_data\n\n       helper 'spree/admin/promotion_rules'\n       def users\n         params[:q] ||= {}\n         @search = \n         @promotion.orders.reverse_chronological.ransack(params[:q])\n\n         @users_hash = Hash.new(0)\n         @search.result.each { |order| @users_hash[order.user] += 1 }\n\n         @users_hash = \n         Kaminari.paginate_array(@users_hash.to_a).page(params[:page])\n       end\n\n       protected\n\n       def location_after_save\n         spree.edit_admin_promotion_url(@promotion)\n       end\n\n       def load_data\n         @calculators = Rails.application.config.spree.calculators.promotion_actions_create_adjustments\n         @promotion_categories = Spree::PromotionCategory.order(:name)\n       end\n\n       def collection\n         return @collection if defined?(@collection)\n         params[:q] ||= HashWithIndifferentAccess.new\n         params[:q][:s] ||= 'id desc'\n\n         @collection = super\n         @search = @collection.ransack(params[:q])\n         @collection = @search.result(distinct: true)\n                         .includes(promotion_includes)\n                         .page(params[:page])\n                         .per(params[:per_page] || \n        Spree::Config[:admin_promotions_per_page])\n      end\n\n      def promotion_includes\n        [:promotion_actions]\n      end\n   end\n end\n</code></pre>\n\n<p>That working perfectly, but it's looks like a crutches</p>\n\n<p>Any help would be much appreciated, thanks</p>\n\n<p>routes:</p>\n\n<pre><code>Spree::Core::Engine.routes.draw do\n  Spree::Core::Engine.add_routes do\n    namespace :admin do\n      resources :promotions, only: [] do\n        member do\n          get 'users'\n        end\n      end\n    end\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "c9.io"], "comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 1, "creation_date": 1502219353, "post_id": 45576183, "comment_id": 78111868, "body": "You are using <code>watir</code> in your actual application, not just for testing?"}, {"owner": {"reputation": 449, "user_id": 4159807, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c7522429c1daf6692b63b19790312e50?s=128&d=identicon&r=PG&f=1", "display_name": "ChrisWilson", "link": "https://stackoverflow.com/users/4159807/chriswilson"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1502219430, "post_id": 45576183, "comment_id": 78111892, "body": "Yeah, I want to use it to webscrape."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 1, "creation_date": 1502219569, "post_id": 45576183, "comment_id": 78111974, "body": "<code>nokogiri</code> will do a much better job as a page scraper and if you need <code>js</code> functionality <code>watir</code> and <code>phantomjs</code> rather than a full chrome driver is probably a better bet."}, {"owner": {"reputation": 449, "user_id": 4159807, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c7522429c1daf6692b63b19790312e50?s=128&d=identicon&r=PG&f=1", "display_name": "ChrisWilson", "link": "https://stackoverflow.com/users/4159807/chriswilson"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1502220311, "post_id": 45576183, "comment_id": 78112384, "body": "Could you perhaps explain what watir, and what phantomjs do and how they work together?"}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 1, "creation_date": 1502221554, "post_id": 45576183, "comment_id": 78113096, "body": "<a href=\"http://phantomjs.org/\" rel=\"nofollow noreferrer\"><code>phantomjs</code></a> is a headless webkit that is fully js scriptable. <code>ghostdriver</code> is an integrated web driver as of phantomjs 1.8 and provides the web driver functionality needed by watir. <code>nokogiri</code> will provide the page parsing as needed. <a href=\"http://phantomjs.org/release-1.8.html\" rel=\"nofollow noreferrer\">PhantomJs Ruby example using selenium</a> (maybe this <a href=\"https://www.youtube.com/watch?v=QK_uRnS5cT8\" rel=\"nofollow noreferrer\">video</a> will help as well). using <code>npm</code> (should be available on cloud 9) one can install phantomjs using <code>npm i -g phantomjs-prebuilt</code> the <code>-g</code> makes it global"}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1502223854, "post_id": 45576183, "comment_id": 78114302, "body": "you can run <code>echo $PATH</code> in bash to see all the folders, but a safe bet would be /usr/bin or /usr/local/sbin"}], "owner": {"reputation": 449, "user_id": 4159807, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c7522429c1daf6692b63b19790312e50?s=128&d=identicon&r=PG&f=1", "display_name": "ChrisWilson", "link": "https://stackoverflow.com/users/4159807/chriswilson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 154, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1502219406, "creation_date": 1502219000, "last_edit_date": 1502219406, "question_id": 45576183, "link": "https://stackoverflow.com/questions/45576183/how-to-place-chromedriver-on-the-path-when-developing-in-the-cloud-trying-to-us", "title": "How to place Chromedriver on the path when developing in the cloud? Trying to use Watir in RoR while developing on c9", "body": "<p>I'm using a Chrome browser, but the error I'm getting is </p>\n\n<p>\"Unable to find chromedriver. Please download the server from <a href=\"http://chromedriver.storage.googleapis.com/index.html\" rel=\"nofollow noreferrer\">http://chromedriver.storage.googleapis.com/index.html</a> and place it somewhere on your PATH. More info at <a href=\"https://github.com/SeleniumHQ/selenium/wiki/ChromeDriver\" rel=\"nofollow noreferrer\">https://github.com/SeleniumHQ/selenium/wiki/ChromeDriver</a>.\"</p>\n\n<p>I'm not sure where to place it on the path when developing in the <b>cloud</b>.  Any help is much appreciated.  </p>\n\n<p>Here is the code in my controller</p>\n\n<pre><code>def getinformation\n    require 'watir'\n\n    browser = Watir::Browser.new\n\n    browser.goto('http://stackoverflow.com/')\n\n    @broswer = browser.title\n\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "chat", "actioncable"], "answers": [{"comments": [{"owner": {"reputation": 355, "user_id": 8406937, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2dcec684312e20f86da6d68437ac8c8e?s=128&d=identicon&r=PG&f=1", "display_name": "COLEAN", "link": "https://stackoverflow.com/users/8406937/colean"}, "edited": false, "score": 0, "creation_date": 1502291795, "post_id": 45577336, "comment_id": 78148722, "body": "Thank you for your advice. i do not get notification errors with your help! But I can not live chat. I do not know why. Please help me."}, {"owner": {"reputation": 355, "user_id": 8406937, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2dcec684312e20f86da6d68437ac8c8e?s=128&d=identicon&r=PG&f=1", "display_name": "COLEAN", "link": "https://stackoverflow.com/users/8406937/colean"}, "edited": false, "score": 0, "creation_date": 1502326186, "post_id": 45577336, "comment_id": 78164853, "body": "Yes. I did not find any error pages.  But I can not chat in real time.  :( ..... why is it .. I do not know T_T .."}], "tags": [], "owner": {"reputation": 147, "user_id": 7484402, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-kQdg28mKmYI/AAAAAAAAAAI/AAAAAAAAAAw/e8ctpSjMgyk/photo.jpg?sz=128", "display_name": "ann", "link": "https://stackoverflow.com/users/7484402/ann"}, "is_accepted": true, "score": 0, "last_activity_date": 1502223383, "creation_date": 1502223383, "answer_id": 45577336, "question_id": 45576072, "link": "https://stackoverflow.com/questions/45576072/ruby-on-rails-action-cable-chat-tutorial-error/45577336#45577336", "title": "ruby on rails // action cable chat tutorial error", "body": "<p>Try fixing file name notifications_broadcast_job.rb -> notification_broadcast_job.rb</p>\n"}], "owner": {"reputation": 355, "user_id": 8406937, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2dcec684312e20f86da6d68437ac8c8e?s=128&d=identicon&r=PG&f=1", "display_name": "COLEAN", "link": "https://stackoverflow.com/users/8406937/colean"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 206, "favorite_count": 0, "accepted_answer_id": 45577336, "answer_count": 1, "score": 1, "last_activity_date": 1502223383, "creation_date": 1502218638, "last_edit_date": 1502219948, "question_id": 45576072, "link": "https://stackoverflow.com/questions/45576072/ruby-on-rails-action-cable-chat-tutorial-error", "title": "ruby on rails // action cable chat tutorial error", "body": "<p>I followed the <a href=\"https://www.sitepoint.com/rails-and-actioncable-adding-advanced-features\" rel=\"nofollow noreferrer\">https://www.sitepoint.com/rails-and-actioncable-adding-advanced-features</a> tutorial, but it says:</p>\n\n<blockquote>\n  <p>NameError in PersonalMessagesController#create uninitialized constant\n  PersonalMessage::NotificationBroadcastJob</p>\n</blockquote>\n\n<pre><code>after_create_commit do\n    conversation.touch\n    NotificationBroadcastJob.perform_later(self)\n  end\nend\n</code></pre>\n\n<p>The above error appears when I submit, but when I go back I get a message.</p>\n\n<p>So I deleted code:</p>\n\n<pre><code>after_create_commit do\n    conversation.touch\n    NotificationBroadcastJob.perform_later(self)\n  end\nend\n</code></pre>\n\n<p>and tried to run it. I did not see the same error, but this time I can not chat live.</p>\n\n<p>I followed the tutorial faithfully. I do not know why two problems arise. I need help.</p>\n\n<p>my github : <a href=\"https://github.com/sangyeol-kim/stackoverflow_ask_ac2\" rel=\"nofollow noreferrer\">https://github.com/sangyeol-kim/stackoverflow_ask_ac2</a></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 9447, "user_id": 1380867, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/5dc27a551f77074a1dcc431e4158704b?s=128&d=identicon&r=PG", "display_name": "MZaragoza", "link": "https://stackoverflow.com/users/1380867/mzaragoza"}, "edited": false, "score": 1, "creation_date": 1502218472, "post_id": 45575995, "comment_id": 78111414, "body": "is this the same question as <a href=\"https://stackoverflow.com/questions/45568785/pass-hidden-field-tag-params-with-rails-5\" title=\"pass hidden field tag params with rails 5\">stackoverflow.com/questions/45568785/&hellip;</a>"}, {"owner": {"reputation": 500, "user_id": 1595868, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/2106152c457f7df0ef892b6814423cfc?s=128&d=identicon&r=PG", "display_name": "Anton", "link": "https://stackoverflow.com/users/1595868/anton"}, "edited": false, "score": 0, "creation_date": 1502218825, "post_id": 45575995, "comment_id": 78111594, "body": "If you print the params[&quot;email&quot;] in the form is there any value?"}, {"owner": {"reputation": 685, "user_id": 7458849, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/89kDb.jpg?s=128&g=1", "display_name": "Theopap", "link": "https://stackoverflow.com/users/7458849/theopap"}, "reply_to_user": {"reputation": 500, "user_id": 1595868, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/2106152c457f7df0ef892b6814423cfc?s=128&d=identicon&r=PG", "display_name": "Anton", "link": "https://stackoverflow.com/users/1595868/anton"}, "edited": false, "score": 0, "creation_date": 1502219739, "post_id": 45575995, "comment_id": 78112055, "body": "Thanks for the reply @Anton... <code>&lt;%= params[&quot;email&quot;].inspect %&gt;</code> this returns nil... But this <code>&lt;%= params.inspect %&gt;</code> returns the email along with all the other params"}, {"owner": {"reputation": 500, "user_id": 1595868, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/2106152c457f7df0ef892b6814423cfc?s=128&d=identicon&r=PG", "display_name": "Anton", "link": "https://stackoverflow.com/users/1595868/anton"}, "edited": false, "score": 0, "creation_date": 1502220057, "post_id": 45575995, "comment_id": 78112234, "body": "Can you post the params as they are inside the form?"}, {"owner": {"reputation": 685, "user_id": 7458849, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/89kDb.jpg?s=128&g=1", "display_name": "Theopap", "link": "https://stackoverflow.com/users/7458849/theopap"}, "reply_to_user": {"reputation": 500, "user_id": 1595868, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/2106152c457f7df0ef892b6814423cfc?s=128&d=identicon&r=PG", "display_name": "Anton", "link": "https://stackoverflow.com/users/1595868/anton"}, "edited": false, "score": 0, "creation_date": 1502220263, "post_id": 45575995, "comment_id": 78112365, "body": "@Anton, please check update1"}], "answers": [{"comments": [{"owner": {"reputation": 685, "user_id": 7458849, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/89kDb.jpg?s=128&g=1", "display_name": "Theopap", "link": "https://stackoverflow.com/users/7458849/theopap"}, "edited": false, "score": 0, "creation_date": 1502220728, "post_id": 45576612, "comment_id": 78112630, "body": "hmmmm... It returns <code>undefined method [] for nil:NilClass</code>"}, {"owner": {"reputation": 500, "user_id": 1595868, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/2106152c457f7df0ef892b6814423cfc?s=128&d=identicon&r=PG", "display_name": "Anton", "link": "https://stackoverflow.com/users/1595868/anton"}, "reply_to_user": {"reputation": 685, "user_id": 7458849, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/89kDb.jpg?s=128&g=1", "display_name": "Theopap", "link": "https://stackoverflow.com/users/7458849/theopap"}, "edited": false, "score": 0, "creation_date": 1502220858, "post_id": 45576612, "comment_id": 78112694, "body": "ok :) Please print out the entire params within the form and post it."}, {"owner": {"reputation": 500, "user_id": 1595868, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/2106152c457f7df0ef892b6814423cfc?s=128&d=identicon&r=PG", "display_name": "Anton", "link": "https://stackoverflow.com/users/1595868/anton"}, "reply_to_user": {"reputation": 685, "user_id": 7458849, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/89kDb.jpg?s=128&g=1", "display_name": "Theopap", "link": "https://stackoverflow.com/users/7458849/theopap"}, "edited": false, "score": 0, "creation_date": 1502222335, "post_id": 45576612, "comment_id": 78113507, "body": "Can you path to the new_transaction_path only the email and check out the url if it is in the query string?"}, {"owner": {"reputation": 500, "user_id": 1595868, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/2106152c457f7df0ef892b6814423cfc?s=128&d=identicon&r=PG", "display_name": "Anton", "link": "https://stackoverflow.com/users/1595868/anton"}, "reply_to_user": {"reputation": 685, "user_id": 7458849, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/89kDb.jpg?s=128&g=1", "display_name": "Theopap", "link": "https://stackoverflow.com/users/7458849/theopap"}, "edited": false, "score": 0, "creation_date": 1502222676, "post_id": 45576612, "comment_id": 78113698, "body": "new_transaction_path(ema\u200c\u200bil: resource.email) - this one"}, {"owner": {"reputation": 685, "user_id": 7458849, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/89kDb.jpg?s=128&g=1", "display_name": "Theopap", "link": "https://stackoverflow.com/users/7458849/theopap"}, "edited": false, "score": 0, "creation_date": 1502222734, "post_id": 45576612, "comment_id": 78113735, "body": "I get this at the url <code>http:&#47;&#47;localhost:3000&#47;transactions&#47;new?ema%E2%80%8C%E2%80%8B&zwnj;&#8203;il=last2%40gmail.com&zwnj;&#8203;&amp;plan_id=bs96&amp;price=&zwnj;&#8203;150.0</code>"}, {"owner": {"reputation": 500, "user_id": 1595868, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/2106152c457f7df0ef892b6814423cfc?s=128&d=identicon&r=PG", "display_name": "Anton", "link": "https://stackoverflow.com/users/1595868/anton"}, "reply_to_user": {"reputation": 685, "user_id": 7458849, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/89kDb.jpg?s=128&g=1", "display_name": "Theopap", "link": "https://stackoverflow.com/users/7458849/theopap"}, "edited": false, "score": 0, "creation_date": 1502222803, "post_id": 45576612, "comment_id": 78113772, "body": "So the params[&quot;email&quot;] is not nil now?"}, {"owner": {"reputation": 685, "user_id": 7458849, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/89kDb.jpg?s=128&g=1", "display_name": "Theopap", "link": "https://stackoverflow.com/users/7458849/theopap"}, "edited": false, "score": 0, "creation_date": 1502222916, "post_id": 45576612, "comment_id": 78113824, "body": "The inspect still prints out nil, but the url shows the above.. weird"}, {"owner": {"reputation": 685, "user_id": 7458849, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/89kDb.jpg?s=128&g=1", "display_name": "Theopap", "link": "https://stackoverflow.com/users/7458849/theopap"}, "edited": false, "score": 0, "creation_date": 1502267743, "post_id": 45576612, "comment_id": 78129922, "body": "it works if I pass only the (email: resource.email), but I need the other registration_params as well."}, {"owner": {"reputation": 500, "user_id": 1595868, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/2106152c457f7df0ef892b6814423cfc?s=128&d=identicon&r=PG", "display_name": "Anton", "link": "https://stackoverflow.com/users/1595868/anton"}, "reply_to_user": {"reputation": 685, "user_id": 7458849, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/89kDb.jpg?s=128&g=1", "display_name": "Theopap", "link": "https://stackoverflow.com/users/7458849/theopap"}, "edited": false, "score": 0, "creation_date": 1502357072, "post_id": 45576612, "comment_id": 78177777, "body": "Hi, can you print the session[:registration_params]? And why are you fetching it from the session?"}, {"owner": {"reputation": 685, "user_id": 7458849, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/89kDb.jpg?s=128&g=1", "display_name": "Theopap", "link": "https://stackoverflow.com/users/7458849/theopap"}, "edited": false, "score": 0, "creation_date": 1502358594, "post_id": 45576612, "comment_id": 78178878, "body": "I updated the entire questioning order to make more sense as to what I&#39;m doing."}, {"owner": {"reputation": 685, "user_id": 7458849, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/89kDb.jpg?s=128&g=1", "display_name": "Theopap", "link": "https://stackoverflow.com/users/7458849/theopap"}, "edited": false, "score": 0, "creation_date": 1502358612, "post_id": 45576612, "comment_id": 78178891, "body": "In order to keep the url params before registration, I&#39;m adding parameters in a query string to a path the new_store_registration.Please check out the def new at registration_controller.rb"}, {"owner": {"reputation": 500, "user_id": 1595868, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/2106152c457f7df0ef892b6814423cfc?s=128&d=identicon&r=PG", "display_name": "Anton", "link": "https://stackoverflow.com/users/1595868/anton"}, "reply_to_user": {"reputation": 685, "user_id": 7458849, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/89kDb.jpg?s=128&g=1", "display_name": "Theopap", "link": "https://stackoverflow.com/users/7458849/theopap"}, "edited": false, "score": 0, "creation_date": 1502360414, "post_id": 45576612, "comment_id": 78180175, "body": "Ok so if you store the params in session why don&#39;t you just fetch them on transactions controller from the session as well?"}], "tags": [], "owner": {"reputation": 500, "user_id": 1595868, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/2106152c457f7df0ef892b6814423cfc?s=128&d=identicon&r=PG", "display_name": "Anton", "link": "https://stackoverflow.com/users/1595868/anton"}, "is_accepted": false, "score": 0, "last_activity_date": 1502367606, "last_edit_date": 1502367606, "creation_date": 1502220549, "answer_id": 45576612, "question_id": 45575995, "link": "https://stackoverflow.com/questions/45575995/hidden-field-tag-value/45576612#45576612", "title": "Hidden field tag value", "body": "<p>You are merging the params into session[:registration_params] and than trying to fetch them into the query string params. You could just fetch those parameters from the session inside the transactions controller and delete them after successful save.</p>\n"}], "owner": {"reputation": 685, "user_id": 7458849, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/89kDb.jpg?s=128&g=1", "display_name": "Theopap", "link": "https://stackoverflow.com/users/7458849/theopap"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 861, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1502367606, "creation_date": 1502218381, "last_edit_date": 1502358237, "question_id": 45575995, "link": "https://stackoverflow.com/questions/45575995/hidden-field-tag-value", "title": "Hidden field tag value", "body": "<p>From the<code>views/plans/new.html.erb</code> I get the plan_id and price params with the following:</p>\n\n<pre><code>&lt;%= link_to \"Sign up\", new_store_registration_path(:plan_id =&gt; plan.id, :price =&gt; plan.price) %&gt;\n</code></pre>\n\n<p>Then the app redirects to the sign-up page and with the methods <code>def after_inactive_sign_up_path_for(resource)</code> and <code>def after_sign_up_path_for(resource)</code> I keep the previous params and merge the email param: </p>\n\n<p>registrations_controller.rb</p>\n\n<pre><code>class Stores::RegistrationsController &lt;  Devise::RegistrationsController\n  before_action :configure_permitted_parameters, if: :devise_controller?\n\n   def new\n     build_resource({})\n     resource.build_account\n     respond_with self.resource\n     session[:registration_params] = request.query_parameters\n   end\n\n\n   def create\n     build_resource(sign_up_params)\n     resource.save\n     yield resource if block_given?\n     if resource.persisted?\n       if resource.active_for_authentication?\n         flash[:notice] = 'Successfully signed up'\n         respond_with resource, location:   after_sign_up_path_for(resource)\n       else\n         flash[:notice] = \"Signed up but #{resource.inactive_message}\"\n     expire_data_after_sign_in!\n     respond_with resource, location: after_inactive_sign_up_path_for(resource)\n       end\n     else\n       clean_up_passwords resource\n       set_minimum_password_length\n       respond_with resource\n     end\n   end\n\n\n   def edit\n     super\n   end\n\n\n   def update\n     super\n   end\n\n\n    def destroy\n     super\n    end\n\n    def cancel\n     super\n    end\n\n  protected\n\n   def configure_permitted_parameters\n     devise_parameter_sanitizer.permit(:sign_up) { |u|\n      u.permit(:email, :password, :password_confirmation, :remember_me,\n           :account_attributes =&gt; [:first_name, :last_name, :buisness_name,\n                                   :buisness_description, :web_site, :phone_number,\n                                   :street, :city, :state, :zip_code, :country])\n    }\n  end\n\n\n  def after_sign_up_path_for(resource)\n     new_transaction_path(resource,  session[:registration_params].merge(ema\u200c\u200bil: resource.email))\n  end\n\n   def after_inactive_sign_up_path_for(resource)\n     new_transaction_path(resource, session[:registration_params].merge(ema\u200c\u200bil: resource.email))\n   end\nend\n</code></pre>\n\n<p>After submit sign-up, the app redirects to the views/transcation/new.html.erb, which has the <code>plan_id</code>, <code>price</code>and <code>email</code> params. </p>\n\n<pre><code> Parameters: {\"ema\u200c\u200bil\"=&gt;\"example@gmail.com\", \"plan_id\"=&gt;\"bs96\", \"price\"=&gt;\"150.0\"}\n</code></pre>\n\n<p>And the url shows:</p>\n\n<pre><code>http://localhost:3000/transactions/new.1?ema%E2%80%8C%E2%80%8Bil=example%40gmail.com&amp;plan_id=bs96&amp;price=150.0\n</code></pre>\n\n<p>Inside the views/transcation/new.html.erb there is the braintree drop in ui and the script along with the three hidden fields:</p>\n\n<pre><code>&lt;div class=\"form-container radius-box glassy-bg small-10 small-centered medium-8 large-6 columns\"&gt;\n  &lt;%= form_tag transactions_path do%&gt;\n      &lt;div id=\"dropin\"&gt;&lt;/div&gt;\n      &lt;%= hidden_field_tag(:email, params[\"email\"]) %&gt;\n      &lt;%= hidden_field_tag(:plan_id, params[\"plan_id\"]) %&gt;\n      &lt;%= hidden_field_tag(:amount, params[\"price\"]) %&gt;\n      &lt;%=submit_tag \"Pay #{params[\"price\"]}$\", class: \"button mt1\" %&gt;\n  &lt;%end%&gt;\n&lt;/div&gt;\n\n&lt;script&gt;\n    braintree.setup(\"&lt;%=@client_token%&gt;\", 'dropin', {\n        container: 'dropin'\n    });\n&lt;/script&gt;\n</code></pre>\n\n<p>At this point I'm trying to keep the email param to the transaction with<br>\n<code>&lt;%= hidden_field_tag(:email, params[\"email\"]) %&gt;</code></p>\n\n<p>But if I click submit i'm not getting an email as you can see in the following: </p>\n\n<pre><code>Parameters: {\"utf8\"=&gt;\"\u2713\", \"authenticity_token\"=&gt;\"KeS2xK7NIJZwFQvW2kJKupcpURnQweq+yoRgk9AJ1aaOgFIIym4RKadI4jc6vYynMo4vKR4eLmdIynfBG+EusQ==\", \"email\"=&gt;\"\", \"plan_id\"=&gt;\"bs96\", \"amount\"=&gt;\"150.0\", \"payment_method_nonce\"=&gt;\"0c22f2fa-e212-0ad3-753b-0d183d02522b\"}\n</code></pre>\n\n<p>If I inspect the params inside the views/transcation/new.html.erb with this     <code>&lt;%= params.inspect %&gt;</code> it prints out this: <code>&lt;ActionController::Parameters {\"ema\u200c\u200bil\"=&gt;\"example@gmail.com\", \"plan_id\"=&gt;\"bs96\", \"price\"=&gt;\"150.0\", \"controller\"=&gt;\"transactions\", \"action\"=&gt;\"new\"} permitted: false&gt;</code></p>\n\n<p>And this <code>&lt;%= params[:email].inspect %&gt;</code> returns <code>nil</code></p>\n\n<p>Any ideas why I can't get the email param?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "forms", "associations", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 3997, "user_id": 3998420, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/55ea542584d3fd2a430c3d409bdafc95?s=128&d=identicon&r=PG&f=1", "display_name": "bkunzi01", "link": "https://stackoverflow.com/users/3998420/bkunzi01"}, "edited": false, "score": 0, "creation_date": 1502219206, "post_id": 45575977, "comment_id": 78111795, "body": "Yes you&#39;d use ajax and javascript to do exactly this.  You would give the form_field in question an ID and then use jquery to trigger an ajax call to the server when a user triggers an event on that element."}, {"owner": {"reputation": 315, "user_id": 7286108, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/9744811ae6434a0983dbaa76e2921a2a?s=128&d=identicon&r=PG", "display_name": "cdouble.bhuck", "link": "https://stackoverflow.com/users/7286108/cdouble-bhuck"}, "reply_to_user": {"reputation": 3997, "user_id": 3998420, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/55ea542584d3fd2a430c3d409bdafc95?s=128&d=identicon&r=PG&f=1", "display_name": "bkunzi01", "link": "https://stackoverflow.com/users/3998420/bkunzi01"}, "edited": false, "score": 0, "creation_date": 1502219437, "post_id": 45575977, "comment_id": 78111899, "body": "Any chance you could write up an answer with an example on how to do that? If I can get it working I will accept it, thanks in advance!"}, {"owner": {"reputation": 3997, "user_id": 3998420, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/55ea542584d3fd2a430c3d409bdafc95?s=128&d=identicon&r=PG&f=1", "display_name": "bkunzi01", "link": "https://stackoverflow.com/users/3998420/bkunzi01"}, "edited": false, "score": 0, "creation_date": 1502220707, "post_id": 45575977, "comment_id": 78112623, "body": "Maybe someone can do a full answer for you but I&#39;m super short on time so I&#39;ll post an answer that will get you on track."}], "answers": [{"comments": [{"owner": {"reputation": 315, "user_id": 7286108, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/9744811ae6434a0983dbaa76e2921a2a?s=128&d=identicon&r=PG", "display_name": "cdouble.bhuck", "link": "https://stackoverflow.com/users/7286108/cdouble-bhuck"}, "edited": false, "score": 0, "creation_date": 1502222461, "post_id": 45576744, "comment_id": 78113573, "body": "Awesome thanks for the response! I appreciate you taking the time to write all this out. I&#39;ll dive into it and see if I can get it working!"}, {"owner": {"reputation": 315, "user_id": 7286108, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/9744811ae6434a0983dbaa76e2921a2a?s=128&d=identicon&r=PG", "display_name": "cdouble.bhuck", "link": "https://stackoverflow.com/users/7286108/cdouble-bhuck"}, "edited": false, "score": 0, "creation_date": 1502331939, "post_id": 45576744, "comment_id": 78166235, "body": "This worked great! Thank you very much! The only thing I&#39;m having an issue with is handling rare cases where a <code>property</code> has not had an <code>owner</code> added yet, essentially where the association returns<code>nil</code>. Any ideas on how to do that? I&#39;ve only just begun tapping into the <code>JSON</code> abilities of rails so I&#39;m still researching things of this nature."}, {"owner": {"reputation": 315, "user_id": 7286108, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/9744811ae6434a0983dbaa76e2921a2a?s=128&d=identicon&r=PG", "display_name": "cdouble.bhuck", "link": "https://stackoverflow.com/users/7286108/cdouble-bhuck"}, "edited": false, "score": 0, "creation_date": 1502337965, "post_id": 45576744, "comment_id": 78167670, "body": "I&#39;ve added the code that I currently have working. If you don&#39;t mind just taking a look over it and seeing if there is a better way to handle <code>nil</code> responses that would be very helpful. Thanks again!"}, {"owner": {"reputation": 2090, "user_id": 5113690, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/cbKBX.png?s=128&g=1", "display_name": "m3characters", "link": "https://stackoverflow.com/users/5113690/m3characters"}, "reply_to_user": {"reputation": 315, "user_id": 7286108, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/9744811ae6434a0983dbaa76e2921a2a?s=128&d=identicon&r=PG", "display_name": "cdouble.bhuck", "link": "https://stackoverflow.com/users/7286108/cdouble-bhuck"}, "edited": false, "score": 1, "creation_date": 1502362244, "post_id": 45576744, "comment_id": 78181431, "body": "@cdouble.bhuck added a better solution and explanation, \\o"}, {"owner": {"reputation": 315, "user_id": 7286108, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/9744811ae6434a0983dbaa76e2921a2a?s=128&d=identicon&r=PG", "display_name": "cdouble.bhuck", "link": "https://stackoverflow.com/users/7286108/cdouble-bhuck"}, "edited": false, "score": 0, "creation_date": 1502374172, "post_id": 45576744, "comment_id": 78191065, "body": "ah that&#39;s exactly what I was looking for, thank you for taking the time to update the explanation and code, it is much appreciated!"}], "tags": [], "owner": {"reputation": 2090, "user_id": 5113690, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/cbKBX.png?s=128&g=1", "display_name": "m3characters", "link": "https://stackoverflow.com/users/5113690/m3characters"}, "is_accepted": true, "score": 1, "last_activity_date": 1502363787, "last_edit_date": 1502363787, "creation_date": 1502221047, "answer_id": 45576744, "question_id": 45575977, "link": "https://stackoverflow.com/questions/45575977/load-model-association-dynamically-in-rails-form-before-submit/45576744#45576744", "title": "Load model association dynamically in Rails form before submit", "body": "<p>You need to make sure it matches your underlying routes &amp; stuff, and probably handle the case where there aren't owners, so to hide the owners div. If you want to do more complex stuff you could instead of <code>.pluck</code> build a better array/hash with id's that you can then also use to build elements that you can interact with (e.g. remove them from the list)</p>\n\n<pre><code># your property controller\n\nbefore_action :allowed, only\u00a0[:owners]\n\ndef owners\n  owners = Property.find(params[:id]).owners.pluck(:name)\n  respond_to |format|\n    format.json { render json: { owners: owners, success: true } }\n  end\nend\n\ndef allowed\n  # logic to define if this user is allowed to request this data, if you have devise, it could be\n  user_signed_in? &amp;&amp; request.xhr?\nend\n\n# your routes.rb\n\nget \"properties/:id/owners\", to: \"properties#owners\", as: \"property_owners\"\n\n# or if you have resources\nresources :properties do\n  member do\n    get :owners\n  end\nend\n\n# js file\n\n$(\"#property_id\").off().on('change', function() {\n  var id = $(this).val();\n  $.ajax({\n    url: '/properties/'+id+'/owners',\n    dataType: \"json\",\n    success: function(data) {\n      owners_html = '';\n      $.each(data['owners'], function() {\n        owners_html += '&lt;p&gt;'+this+'&lt;/p&gt;';\n      });\n      $(\"selector_where_you_want_to_show_owners\").html($(owners_html));\n    },\n    error: function(XMLHttpRequest, textStatus, errorThrown) {\n      console.log(errorThrown);\n    }\n  });\n}\n</code></pre>\n\n<p><strong>UPDATE:</strong></p>\n\n<p>You can prevent the issue with no Owners by using find_by instead and making sure that you always return an <code>[]</code>, this way simplifying the logic on the front-side as well.</p>\n\n<pre><code># on your controller instead use:\n\ndef owners\n  # .find_by will return \"nil\" if no properties are found, which \n  # then we can leverage with .try. .try will \"try\" calling those\n  # chained methods without raising an error. It usually returns\n  # \"nil\" if the parent is \"nil\" but .try with .pluck though will\n  # always return an [] no matter what the ancestors returned. \n\n  owners = Property.find_by(id: params[:id]).try(:owners).try(:pluck, :name]\n\n  # actually looking at your relationships it seems you could instead\n  # .where, since that will return an empty array, like so:\n\n  # owners = Owner.where(property_id: params[:id]).pluck(:name)\n\n  # this only does one database query where the other one does 2\n\n  # here we're simply making sure we add something to the array so\n  # that then on the front-end you can always deal with an array\n  # without worrying with the \"no properties found\". .blank? will\n  # return \"true\" if the value is nil, empty string, empty hash or\n  # empty array which works fine for this. So if there's no value in\n  # the array we add the \"no owners\" string.\n\n  owners &lt;&lt; 'No owner added yet.' if owners.blank?\n\n  respond_to |format|\n    format.json { render json: { owners: owners, success: true } }\n  end\nend\n\n# And then since you'll always be returning an array you no longer\n# have to worry about an empty array and your ajax function will\n# look like this:\n\n$.ajax({\n  url: '/properties/' + id + '/owners',\n  dataType: \"json\",\n  success: function (data) {\n    owners_html = '';\n    $.each(data['owners'], function () {\n      owners_html += '&lt;p&gt;' + this + '&lt;/p&gt;';\n    });\n    $(\"#propOwnersShow\").html($(owners_html));\n  },\n  error: function (XMLHttpRequest, textStatus, errorThrown) {\n    console.log(errorThrown);\n  }\n});\n</code></pre>\n\n<p>Hope this helps</p>\n"}], "owner": {"reputation": 315, "user_id": 7286108, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/9744811ae6434a0983dbaa76e2921a2a?s=128&d=identicon&r=PG", "display_name": "cdouble.bhuck", "link": "https://stackoverflow.com/users/7286108/cdouble-bhuck"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 119, "favorite_count": 0, "accepted_answer_id": 45576744, "answer_count": 1, "score": 0, "last_activity_date": 1502363787, "creation_date": 1502218325, "last_edit_date": 1502337896, "question_id": 45575977, "link": "https://stackoverflow.com/questions/45575977/load-model-association-dynamically-in-rails-form-before-submit", "title": "Load model association dynamically in Rails form before submit", "body": "<p>So I'm not sure how to achieve this or if it's even possible and having a tough time searching for similar examples/answers. But is there a way to dynamically load a model association within a form <strong>before</strong> you submit it, like without knowing what the instance variable would be ahead of time?</p>\n\n<p>I have models as follows:</p>\n\n<pre><code>Property\n  has_many :owners, inverse_of: :property\n  has_many :orders\n\nOwners\n  belongs_to :property\n\nOrders\n  belongs_to :property\n  has_many :owners, through: :property\n</code></pre>\n\n<p>In my <strong><code>orders.new</code></strong> form I have select boxes to choose a property to create the association for the new order (using Select2 plugin): </p>\n\n<pre><code>&lt;%= bootstrap_form_for(@orders, ...) do |f| %&gt;\n    ...\n    &lt;%= f.select :property_id, options_from_collection_for_select(Property.all, \"id\", \"full_address\"),\n             { label: \"Property:\", include_blank: true }, { id: \"orderPropSelect\", data: { placeholder: \"Select a Property\"} } %&gt;\n    ...\n&lt;% end %&gt;\n</code></pre>\n\n<p>So when someone SELECTS a <code>property</code> for the new order, is there a way I can load what <code>owners</code> that property already has associated to it before the form is submitted? Even just being able to see what owners are already there is okay (being able to edit them would be even better but I realize thats probably more complex)</p>\n\n<p>The following code of course doesn't work but looking for something along the lines of:</p>\n\n<pre><code>&lt;%= f.static_control label: \"Property Owners\" do %&gt;\n  &lt;% :property_id.owners.each do |owner| %&gt;\n    &lt;%= owner.name %&gt;\n  &lt;% end %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>I've tried variations of <code>fields_for</code> but I don't know how to tell the nested fields to be based off what is chosen in the above <code>select</code> (of course loading different owners based on what <code>property</code> is chosen. The errors that I get are <code>undefined method owners for nil:NilClass</code> which are appropriate because I know I'm not telling rails where to look correctly. </p>\n\n<p>So is this possible and if so, how would I achieve this?</p>\n\n<p>(I use bootstrap forms gem incase anyone is wondering about form syntax. I also have cocoon loaded for other forms so if there's a way to use that then I'm not opposed.)</p>\n\n<p><strong>Update</strong> Working code, slightly modified for extraneous conditions.</p>\n\n<pre><code>$(\"#orderPropSelect\").off().on('change', function() {\n    var id = $(this).val();\n    console.log(id);\n    if (id !== '') {\n        $.ajax({\n            url: '/properties/' + id + '/owners',\n            dataType: \"json\",\n            success: function (data) {\n                owners_html = '';\n                $.each(data['owners'], function () {\n                    owners_html += '&lt;p&gt;' + this + '&lt;/p&gt;';\n                });\n                if (owners_html === '') {\n                    $(\"#propOwnersShow\").html('&lt;p&gt;No owner added yet.&lt;/p&gt;');\n                } else {\n                    $(\"#propOwnersShow\").html($(owners_html));\n                }\n            },\n            error: function (XMLHttpRequest, textStatus, errorThrown) {\n                console.log(errorThrown);\n            }\n        });\n    } else {\n        $('#propOwnersShow').html('Please select a Property below to view its associated owners.')\n    }\n\n});\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5"], "answers": [{"tags": [], "owner": {"reputation": 1586, "user_id": 1798644, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Rr1jq.jpg?s=128&g=1", "display_name": "MatayoshiMariano", "link": "https://stackoverflow.com/users/1798644/matayoshimariano"}, "is_accepted": false, "score": 0, "last_activity_date": 1502219022, "last_edit_date": 1502219022, "creation_date": 1502218118, "answer_id": 45575917, "question_id": 45575800, "link": "https://stackoverflow.com/questions/45575800/rails-5-convert-integers-from-db-into-written-out-months/45575917#45575917", "title": "Rails 5 - convert integers from db into written-out months", "body": "<p>You can use the constant <code>Date::MONTHNAMES</code>, it is defined by <a href=\"https://ruby-doc.org/stdlib-2.4.0/libdoc/date/rdoc/Date.html\" rel=\"nofollow noreferrer\">Rails</a> like this:</p>\n\n<pre><code>[nil, \"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"]\n</code></pre>\n\n<p>So in your view you has to do something like this:</p>\n\n<pre><code>&lt;% @publications.each do |publication| %&gt;\n    &lt;p&gt;&lt;%= Date::MONTHNAMES[publication.month_published] %&gt;&lt;/p&gt;\n&lt;% end %&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 710, "user_id": 7551699, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/01X66.jpg?s=128&g=1", "display_name": "Belder", "link": "https://stackoverflow.com/users/7551699/belder"}, "is_accepted": false, "score": 0, "last_activity_date": 1502219335, "last_edit_date": 1502219335, "creation_date": 1502218308, "answer_id": 45575973, "question_id": 45575800, "link": "https://stackoverflow.com/questions/45575800/rails-5-convert-integers-from-db-into-written-out-months/45575973#45575973", "title": "Rails 5 - convert integers from db into written-out months", "body": "<p>One way to achieve this is by using</p>\n\n<p><code>strftime('%B')</code></p>\n\n<p>In your case,</p>\n\n<p><code>&lt;%= publication.month_published.strftime('%B') %&gt;</code></p>\n\n<p>should work well.</p>\n\n<p>The <code>(%B)</code> argument converts to the full month name.  See <a href=\"https://apidock.com/ruby/DateTime/strftime\" rel=\"nofollow noreferrer\">THIS</a> link for other directives that you can use with <code>strftime</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 9971, "user_id": 8255744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de22299534b5a8ed244ee8ff4aa6c481?s=128&d=identicon&r=PG&f=1", "display_name": "Simple Lime", "link": "https://stackoverflow.com/users/8255744/simple-lime"}, "is_accepted": false, "score": 1, "last_activity_date": 1502219434, "last_edit_date": 1502219434, "creation_date": 1502219075, "answer_id": 45576209, "question_id": 45575800, "link": "https://stackoverflow.com/questions/45575800/rails-5-convert-integers-from-db-into-written-out-months/45576209#45576209", "title": "Rails 5 - convert integers from db into written-out months", "body": "<p>You can also use I18n to accomplish this:</p>\n\n<pre><code>I18n.t('date.month_names')[01]\n</code></pre>\n\n<p>This should work out of the box for <code>en</code> but if you want another language you'll need to add</p>\n\n<pre><code>fr:\n  date:\n    month_names:\n    -\n    - janvier\n    - f\u00e9vrier\n    - mars\n    - avril\n    - mai\n    - juin\n    - juillet\n    - ao\u00fbt\n    - septembre\n    - octobre\n    - novembre\n    - d\u00e9cembre\n</code></pre>\n\n<p>As an example to your locale file (translations quickly grabbed from the <a href=\"https://github.com/svenfuchs/rails-i18n/blob/master/rails/locale/fr.yml\" rel=\"nofollow noreferrer\">local/fr.yml</a> of the <a href=\"https://github.com/svenfuchs/rails-i18n\" rel=\"nofollow noreferrer\">rails-i18n</a> project)</p>\n"}], "owner": {"reputation": 245, "user_id": 7436247, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/ZCRYJ.jpg?s=128&g=1", "display_name": "league", "link": "https://stackoverflow.com/users/7436247/league"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 37, "favorite_count": 1, "answer_count": 3, "score": 0, "last_activity_date": 1502219434, "creation_date": 1502217728, "last_edit_date": 1502218389, "question_id": 45575800, "link": "https://stackoverflow.com/questions/45575800/rails-5-convert-integers-from-db-into-written-out-months", "title": "Rails 5 - convert integers from db into written-out months", "body": "<p>I have a block of ruby code that's printing my month_published column in my view.</p>\n\n<pre><code>&lt;% @publications.each do |publication| %&gt;\n    &lt;p&gt;&lt;%= publication.month_published %&gt;&lt;/p&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>All of these values are stored as integers: 01 for January, 02 for February, etc., so that's what it's printing. \nHow do I get my code to write out the months as words instead of integers?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3", "activerecord"], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 8430369, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b4894436c29a46ed5abbb733c55dc3b?s=128&d=identicon&r=PG&f=1", "display_name": "anotherminh", "link": "https://stackoverflow.com/users/8430369/anotherminh"}, "edited": false, "score": 0, "creation_date": 1502297321, "post_id": 45577031, "comment_id": 78152319, "body": "Thanks for the suggestion -- it&#39;s a good idea. My only concern is that it&#39;s a level higher than the model itself, and we might miss places where the user object is being modified directly -- for example, relations between models in Rails will continue to work without using this new UserService object."}, {"owner": {"reputation": 1410, "user_id": 1507845, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/9daba84d2a161462310fe5a0eb3ab53c?s=128&d=identicon&r=PG", "display_name": "XML Slayer", "link": "https://stackoverflow.com/users/1507845/xml-slayer"}, "reply_to_user": {"reputation": 11, "user_id": 8430369, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b4894436c29a46ed5abbb733c55dc3b?s=128&d=identicon&r=PG&f=1", "display_name": "anotherminh", "link": "https://stackoverflow.com/users/8430369/anotherminh"}, "edited": false, "score": 0, "creation_date": 1502319818, "post_id": 45577031, "comment_id": 78163298, "body": "Fair point. If your external service is your source of truth though, I don&#39;t see a scenario in which you should be relying on rails relationships (callbacks, nested attributes, etc) anyway. Seems as if every call to update should be hitting this external service first. You should never be calling a .update directly?"}, {"owner": {"reputation": 11, "user_id": 8430369, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b4894436c29a46ed5abbb733c55dc3b?s=128&d=identicon&r=PG&f=1", "display_name": "anotherminh", "link": "https://stackoverflow.com/users/8430369/anotherminh"}, "edited": false, "score": 0, "creation_date": 1502391651, "post_id": 45577031, "comment_id": 78202728, "body": "I agree, I just think it&#39;s a bit tricky to track down all the direct calls to .update because those calls can be quite implicit (relations being one such example). I suppose over-riding &quot;save&quot; and &quot;update&quot; and other methods to throw an error might be a good way to track them down, though."}], "tags": [], "owner": {"reputation": 1410, "user_id": 1507845, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/9daba84d2a161462310fe5a0eb3ab53c?s=128&d=identicon&r=PG", "display_name": "XML Slayer", "link": "https://stackoverflow.com/users/1507845/xml-slayer"}, "is_accepted": false, "score": 0, "last_activity_date": 1502222121, "creation_date": 1502222121, "answer_id": 45577031, "question_id": 45575590, "link": "https://stackoverflow.com/questions/45575590/activerecord-before-transaction-callback/45577031#45577031", "title": "ActiveRecord before-transaction callback", "body": "<p>Why not write a service object which handles all of this functionality?</p>\n\n<pre><code>class UserService\n  attr_accessor :user\n\n  def initialize(user, params)\n    @user = user\n    @params = params\n  end\n\n  def save\n    external_result = API.call_to_external\n\n    if external_result\n      @user.update(@params)\n    end\n  end\nend\n\nuser_service = UserService.new(user, params)\nuser_service.save\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 8430369, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b4894436c29a46ed5abbb733c55dc3b?s=128&d=identicon&r=PG&f=1", "display_name": "anotherminh", "link": "https://stackoverflow.com/users/8430369/anotherminh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 934, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1502222121, "creation_date": 1502217012, "question_id": 45575590, "link": "https://stackoverflow.com/questions/45575590/activerecord-before-transaction-callback", "title": "ActiveRecord before-transaction callback", "body": "<p><strong>Problem</strong>: I'm looking for an ActiveRecord (Rails 3.2) callback hook that will execute BEFORE a DB transaction has begun. </p>\n\n<p>If it doesn't exist (and I don't think it does), then I'm looking for any advice in monkey-patching ActiveRecord so that we can implement such a method ourselves.</p>\n\n<p><strong>What I've Tried</strong></p>\n\n<p>Having looked at ActiveRecord docs and playing around with the code, it seems that only 'after_commit' is guaranteed to be executed outside a transaction.  Everything else (\"before_validation\", \"before_save\", \"before_commit\") is ran within the transaction. I've tried overriding the 'transaction' method:</p>\n\n<pre><code>class User &lt; ActiveRecord::Base\n  included do |base|\n    base.instance_eval do\n    def before_transaction\n      ### DO STUFF\n    end\n\n    def transaction(options = {}, &amp;block)\n       before_transaction { super(options, &amp;block) }\n    end\n  end\nend\n</code></pre>\n\n<p>But this is complicated because transaction is a class method and the callback has to be registered per instance of the model.  On top of that, it isn't guaranteed to run outside of a DB transaction because it could be nested:</p>\n\n<pre><code>ActiveRecord::Base.transaction do\n  ActiveRecord::Base.transaction do\n    user.update_attribute(name: \"Hodor\")\n  end\nend\n</code></pre>\n\n<p>Not sure what I want is possible given the way ActiveRecord is implemented, because it may not be possible to know if another transaction has already begun and invoke the callback then. In any case, I thought it's worth asking here.</p>\n\n<p><strong>Background</strong></p>\n\n<p>I'm trying to 'sync' an existing Rails model (let's call it User) to a user service that lives elswhere. The user service should act as the source of truth.  </p>\n\n<p>Whenever updates happen to the Rails User model, I would like to validate + commit the change to the user service first, before saving to the DB (which only the Rails project use). The DB for the Rails project then functions as a write-through cache (why a Database for a cache? Legacy code reasons).  </p>\n\n<p>If we could call the service BEFORE writing to the DB, we don't have to worry about rolling back the transaction (and dealing with what happens when that rolling back fails!). However, I am hesitant to call the service in the middle of an open DB transaction, which is why I'm looking into whether or not it's possible to build a \"before_transaction\" callback.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "devise"], "answers": [{"comments": [{"owner": {"reputation": 123, "user_id": 4635433, "user_type": "registered", "accept_rate": 20, "profile_image": "https://lh4.googleusercontent.com/-yc_KYZvwPac/AAAAAAAAAAI/AAAAAAAABgs/QeCdSKDGjtg/photo.jpg?sz=128", "display_name": "Shilpi Agrawal", "link": "https://stackoverflow.com/users/4635433/shilpi-agrawal"}, "edited": false, "score": 0, "creation_date": 1502213953, "post_id": 45574707, "comment_id": 78108905, "body": "The problem is not redirection, that works perfectly but after redirection it throws error in the post url line."}, {"owner": {"reputation": 2216, "user_id": 7165275, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d8ad41f944f38348a30791dc7f7d02c?s=128&d=identicon&r=PG&f=1", "display_name": "m. simon borg", "link": "https://stackoverflow.com/users/7165275/m-simon-borg"}, "reply_to_user": {"reputation": 123, "user_id": 4635433, "user_type": "registered", "accept_rate": 20, "profile_image": "https://lh4.googleusercontent.com/-yc_KYZvwPac/AAAAAAAAAAI/AAAAAAAABgs/QeCdSKDGjtg/photo.jpg?sz=128", "display_name": "Shilpi Agrawal", "link": "https://stackoverflow.com/users/4635433/shilpi-agrawal"}, "edited": false, "score": 0, "creation_date": 1502215118, "post_id": 45574707, "comment_id": 78109603, "body": "My bad, you&#39;re right and the <code>&#47;</code> actually doesn&#39;t matter. I have a dummy devise app I use to test stuff out, and I can&#39;t reproduce your error given the code you&#39;ve posted. I copied your routes exactly and the top line of the <code>simple_form_for</code> is the same, using the <code>simple_form</code> gem"}, {"owner": {"reputation": 2216, "user_id": 7165275, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d8ad41f944f38348a30791dc7f7d02c?s=128&d=identicon&r=PG&f=1", "display_name": "m. simon borg", "link": "https://stackoverflow.com/users/7165275/m-simon-borg"}, "reply_to_user": {"reputation": 123, "user_id": 4635433, "user_type": "registered", "accept_rate": 20, "profile_image": "https://lh4.googleusercontent.com/-yc_KYZvwPac/AAAAAAAAAAI/AAAAAAAABgs/QeCdSKDGjtg/photo.jpg?sz=128", "display_name": "Shilpi Agrawal", "link": "https://stackoverflow.com/users/4635433/shilpi-agrawal"}, "edited": false, "score": 0, "creation_date": 1502215323, "post_id": 45574707, "comment_id": 78109734, "body": "@ShilpiKayal you should post your <code>rake routes</code>, the full sign_in form, and the <code>SessionsController</code> if you have modified it. Also, what version of <code>Devise</code> are you using?"}, {"owner": {"reputation": 15789, "user_id": 650475, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Feoda.png?s=128&g=1", "display_name": "Grant Birchmeier", "link": "https://stackoverflow.com/users/650475/grant-birchmeier"}, "edited": false, "score": 0, "creation_date": 1565900989, "post_id": 45574707, "comment_id": 101499651, "body": "@m.simonborg: since the <code>&#47;</code> doesn&#39;t matter, please delete that part from this answer"}], "tags": [], "owner": {"reputation": 2216, "user_id": 7165275, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d8ad41f944f38348a30791dc7f7d02c?s=128&d=identicon&r=PG&f=1", "display_name": "m. simon borg", "link": "https://stackoverflow.com/users/7165275/m-simon-borg"}, "is_accepted": false, "score": 0, "last_activity_date": 1502213782, "creation_date": 1502213782, "answer_id": 45574707, "question_id": 45574564, "link": "https://stackoverflow.com/questions/45574564/route-not-found-while-using-devise-scope/45574707#45574707", "title": "Route not found while using devise_scope", "body": "<p>You're missing the <code>/</code> in <code>get '/login'</code></p>\n\n<p>You can simplify it a bit with this</p>\n\n<pre><code>devise_scope :user do        \n   get '/login', to: 'devise/sessions#new'    \nend\n</code></pre>\n"}], "owner": {"reputation": 123, "user_id": 4635433, "user_type": "registered", "accept_rate": 20, "profile_image": "https://lh4.googleusercontent.com/-yc_KYZvwPac/AAAAAAAAAAI/AAAAAAAABgs/QeCdSKDGjtg/photo.jpg?sz=128", "display_name": "Shilpi Agrawal", "link": "https://stackoverflow.com/users/4635433/shilpi-agrawal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 70, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1502213782, "creation_date": 1502213238, "question_id": 45574564, "link": "https://stackoverflow.com/questions/45574564/route-not-found-while-using-devise-scope", "title": "Route not found while using devise_scope", "body": "<p>I am trying to use devise_scope to redirect my /login to devise controller and views. But at the same time I want to use /users/sign_in default devise path also, that's why I didn't include skip [:sessions] in devise for. But I am getting error </p>\n\n<pre><code>undefined method `user_session_path' for #&lt;Module:0x00564e34f44268\n</code></pre>\n\n<p>routes.rb</p>\n\n<pre><code>devise_for :users, :class_name =&gt; '::User', :controllers =&gt; {\n      :registrations =&gt; \"users/registrations\",\n      :invitations =&gt; 'users/invitations',\n      :confirmations =&gt; 'users/confirmations',\n      :passwords =&gt; 'users/passwords'        \n    }\ndevise_scope :user do        \n   get 'login', :action =&gt; :new, :controller =&gt; 'devise/sessions'      \nend\n</code></pre>\n\n<p>devise/sessions/new.html.erb</p>\n\n<pre><code>&lt;div class=\"app-section-body\"&gt;\n      &lt;%= simple_form_for(resource, :as =&gt; resource_name, :url =&gt; session_path(resource_name), :html =&gt; { :class =&gt; 'form-vertical', :spellcheck =&gt; 'false' }) do |f| %&gt;\n</code></pre>\n\n<p>This works with /users/sign_in but throws error in /login</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 22509, "user_id": 585456, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8fb4f62d355848572e309fdb0c2664a7?s=128&d=identicon&r=PG", "display_name": "Nobita", "link": "https://stackoverflow.com/users/585456/nobita"}, "edited": false, "score": 0, "creation_date": 1502211706, "post_id": 45574078, "comment_id": 78107705, "body": "You should add some code on how are you currently doing it. Otherwise is hard to know how to help you."}, {"owner": {"reputation": 65, "user_id": 4469886, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b7cf92610acf9da14a97d48ba3743cd?s=128&d=identicon&r=PG&f=1", "display_name": "sitnikovme", "link": "https://stackoverflow.com/users/4469886/sitnikovme"}, "reply_to_user": {"reputation": 22509, "user_id": 585456, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8fb4f62d355848572e309fdb0c2664a7?s=128&d=identicon&r=PG", "display_name": "Nobita", "link": "https://stackoverflow.com/users/585456/nobita"}, "edited": false, "score": 0, "creation_date": 1502212585, "post_id": 45574078, "comment_id": 78108207, "body": "@Nobita I&#39;ve added some code for better explanation."}], "answers": [{"tags": [], "owner": {"reputation": 65, "user_id": 4469886, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b7cf92610acf9da14a97d48ba3743cd?s=128&d=identicon&r=PG&f=1", "display_name": "sitnikovme", "link": "https://stackoverflow.com/users/4469886/sitnikovme"}, "is_accepted": true, "score": 0, "last_activity_date": 1502465648, "creation_date": 1502465648, "answer_id": 45638895, "question_id": 45574078, "link": "https://stackoverflow.com/questions/45574078/how-to-run-a-piece-of-code-at-the-moment-after-fixtures-are-loaded-but-before-th/45638895#45638895", "title": "How to run a piece of code at the moment after fixtures are loaded but before the first test started?", "body": "<p>The best found solution so far is to add the following method to ActiveSupport::TestCase class</p>\n\n<pre><code>def enlist_fixture_connections(*)\n  result = super\n  # you code here\n  result\nend\n</code></pre>\n\n<p>You code will be executed after fixture initialization and before each test but not in a test's transaction.</p>\n"}], "owner": {"reputation": 65, "user_id": 4469886, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b7cf92610acf9da14a97d48ba3743cd?s=128&d=identicon&r=PG&f=1", "display_name": "sitnikovme", "link": "https://stackoverflow.com/users/4469886/sitnikovme"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 147, "favorite_count": 0, "accepted_answer_id": 45638895, "answer_count": 1, "score": 0, "last_activity_date": 1502465648, "creation_date": 1502211602, "last_edit_date": 1502251456, "question_id": 45574078, "link": "https://stackoverflow.com/questions/45574078/how-to-run-a-piece-of-code-at-the-moment-after-fixtures-are-loaded-but-before-th", "title": "How to run a piece of code at the moment after fixtures are loaded but before the first test started?", "body": "<p>I use fixtures for my test data. I need to make extra initialization steps after my fixtures are loaded into db, but before any test run. The extra initialization data is supposed to be available to all the tests.</p>\n\n<p>test_helper.rb</p>\n\n<pre><code>class ActiveSupport::TestCase\n  fixtures :all\nend\n</code></pre>\n\n<p>user_test.rb</p>\n\n<pre><code>require 'test_helper'\nclass UserTest &lt; ActiveSupport::TestCase\n   test do\n     # here I use my extra initialization data\n     # it takes a lot of effort to create the data\n     # I'd like this data is available to every test in initial state\n   end\nend\n</code></pre>\n\n<p>Here is the log. I marked the place where I need my initialization to be done.</p>\n\n<pre><code>D, [2017-08-09T07:54:19.910545 #94547] DEBUG -- :    (8.8ms)  ALTER TABLE \"mytable\" DISABLE TRIGGER ALL;\nD, [2017-08-09T07:54:20.151100 #94547] DEBUG -- :    (0.2ms)  BEGIN\nD, [2017-08-09T07:54:20.153111 #94547] DEBUG -- :   Fixture Delete (0.3ms)  DELETE FROM \"mytable\"\nD, [2017-08-09T07:54:21.231062 #94547] DEBUG -- :   Fixture Insert (0.2ms)  INSERT INTO \"mytable\" ...\nD, [2017-08-09T07:54:21.234581 #94547] DEBUG -- :    (2.1ms)  COMMIT\nD, [2017-08-09T07:54:21.239761 #94547] DEBUG -- :    (4.1ms)  ALTER TABLE \"mytable\" ENABLE TRIGGER ALL;\n# &lt;-- I need my initialization here\nD, [2017-08-09T07:54:21.256388 #94547] DEBUG -- :    (0.2ms)  BEGIN\nI, [2017-08-09T07:54:21.256510 #94547]  INFO -- : -----------------------------\nI, [2017-08-09T07:54:21.256550 #94547]  INFO -- : DummyTest: test_my_dummy_test\nI, [2017-08-09T07:54:21.256583 #94547]  INFO -- : -----------------------------\n(dbg) my dummy test: setup\n(dbg) my dummy test\n(dbg) my dummy test: teardown\nD, [2017-08-09T07:54:21.257013 #94547] DEBUG -- :    (0.1ms)  ROLLBACK\n</code></pre>\n"}, {"tags": ["ruby", "oop", "ascii", "playing-cards"], "answers": [{"comments": [{"owner": {"reputation": 35, "user_id": 2943529, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fjEvl.jpg?s=128&g=1", "display_name": "borgy88", "link": "https://stackoverflow.com/users/2943529/borgy88"}, "edited": false, "score": 1, "creation_date": 1502214204, "post_id": 45574152, "comment_id": 78109068, "body": "Thanks, that was an awesome solution. I was able to play around with it and get it to work in the different areas of my game. Appreciate the help!"}], "tags": [], "owner": {"reputation": 4150, "user_id": 7470620, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/49f3026fe13841e41d1805178eed9a3c?s=128&d=identicon&r=PG", "display_name": "eiko", "link": "https://stackoverflow.com/users/7470620/eiko"}, "is_accepted": true, "score": 3, "last_activity_date": 1502211810, "creation_date": 1502211810, "answer_id": 45574152, "question_id": 45573572, "link": "https://stackoverflow.com/questions/45573572/how-to-draw-card-objects-side-by-side-vs-stacked-on-top-of-each-other-in-termina/45574152#45574152", "title": "How to draw card objects side by side vs stacked on top of each other in terminal", "body": "<p>Let me start by saying that there's no easy solution for what you're trying to do. Terminals are designed to print text row by row, not column by column. And once something is printed to the console, you generally can't go back and modify it. Given that, you have two options:</p>\n\n<p><strong>1) Use ncurses (or a similar library)</strong>: ncurses is a library for creating \"gui\" applications in the terminal. The library treats the terminal as a grid of cells, letting the developer specify each character in each cell at any given moment. This gives the developer tons of power, but it also forces you to manually add \"traditional\" terminal functionality (ie receiving user input and printing rows of output).</p>\n\n<p><strong>2) Buffer your string and print it all at once</strong>: even though the terminal can only print strings of text row by row, there's nothing stopping you from taking a bunch of cards and rearranging their strings manually so they can be printed properly. It seemed like an interesting programming task, so I went ahead and gave it a shot:</p>\n\n<pre><code>def display_hand cards\n  strings = cards.map { |c| c.to_s.each_line.to_a }\n  first, *rest = *strings\n  side_by_side = first.zip *rest\n  side_by_side.each do |row|\n    row.each { |s| print s.chomp }\n    print \"\\n\"\n  end\nend\n\ndisplay_hand [Card.new(\"A\", 1), Card.new(\"B\", 2), Card.new(\"C\", 3)]\n</code></pre>\n\n<p>This code takes an array of cards, gathers their string representations into arrays and then uses <code>zip</code> to group them by row. So essentially instead of printing card 1, card 2, card 3, etc., it prints row 1 of all cards, row 2 of all cards, etc.</p>\n\n<p>Hope this helps!</p>\n"}], "owner": {"reputation": 35, "user_id": 2943529, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fjEvl.jpg?s=128&g=1", "display_name": "borgy88", "link": "https://stackoverflow.com/users/2943529/borgy88"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 84, "favorite_count": 0, "accepted_answer_id": 45574152, "answer_count": 1, "score": 3, "last_activity_date": 1502211810, "creation_date": 1502209795, "question_id": 45573572, "link": "https://stackoverflow.com/questions/45573572/how-to-draw-card-objects-side-by-side-vs-stacked-on-top-of-each-other-in-termina", "title": "How to draw card objects side by side vs stacked on top of each other in terminal", "body": "<p>I am making an OO twenty one game. I have a Card class and a Deck class, the deck is made up of card objects. When a player shows their hand I call the to_s method on a card object which I represent in ascii characters. This all works fine except that the players hand prints out one card on top of the other. Wondering how I would go about printing the whole hand side by side. I have searched online and cannot find anything other than to use print instead of puts, but that does not resolve my issue. Thank you in advance for any advice you may have.</p>\n\n<pre><code>    class Card\n  attr_reader :value\n  def initialize(suit, value)\n    @suit = suit\n    @value = value\n  end\n\n  def to_s\n    \"\"\"\n    +-----+\n    |#{@value}    |\n    |     |\n    |  #{@suit}  |\n    |     |\n    |    #{@value}|\n    +-----+\n    \"\"\"\n  end\nend\n</code></pre>\n\n<p>Sample output:</p>\n\n<pre><code>Your Hand:\n\n    +-----+\n    |Q    |\n    |     |\n    |  C  |\n    |     |\n    |    Q|\n    +-----+\n\n    +-----+\n    |K    |\n    |     |\n    |  S  |\n    |     |\n    |    K|\n    +-----+\n    Your total is 20\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 0, "creation_date": 1502208065, "post_id": 45572958, "comment_id": 78105505, "body": "Can you post the log the log that appears when you click on submit?"}, {"owner": {"reputation": 5312, "user_id": 6535997, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/10156345016155058/picture?type=large", "display_name": "Mark", "link": "https://stackoverflow.com/users/6535997/mark"}, "reply_to_user": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 0, "creation_date": 1502208524, "post_id": 45572958, "comment_id": 78105799, "body": "Sure, I&#39;ve updated it with the params being submitted and the html"}], "answers": [{"tags": [], "owner": {"reputation": 46, "user_id": 2242916, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58a58ddaa30409e143ce0e34e681fb47?s=128&d=identicon&r=PG", "display_name": "user2242916", "link": "https://stackoverflow.com/users/2242916/user2242916"}, "is_accepted": true, "score": 1, "last_activity_date": 1615310612, "creation_date": 1615310612, "answer_id": 66551807, "question_id": 45572958, "link": "https://stackoverflow.com/questions/45572958/simple-form-for-multiple-submit-buttons-with-different-params/66551807#66551807", "title": "simple_form_for - multiple submit buttons with different params", "body": "<p>I recently ran into this issue. I have two submit buttons within a simple_form_for. When I post the form to the controller the :commit params are missing.</p>\n<p>My solution is to use jquery to capture the click event for the submits that writes the submit value to a hidden input. I can then use that input value to control logic in the controller.</p>\n"}], "owner": {"reputation": 5312, "user_id": 6535997, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/10156345016155058/picture?type=large", "display_name": "Mark", "link": "https://stackoverflow.com/users/6535997/mark"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 431, "favorite_count": 1, "accepted_answer_id": 66551807, "answer_count": 1, "score": 0, "last_activity_date": 1615310612, "creation_date": 1502207832, "last_edit_date": 1502208508, "question_id": 45572958, "link": "https://stackoverflow.com/questions/45572958/simple-form-for-multiple-submit-buttons-with-different-params", "title": "simple_form_for - multiple submit buttons with different params", "body": "<p>I have a list of checkboxes within a form, which has two buttons. I'm trying to pass in separate paramaters to the buttons as described here:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/17916316/is-there-a-way-to-pass-params-when-clicking-submit-button-in-simple-form-view-in#new-answer\">Is there a way to pass params when clicking submit button in simple_form view in rails 3.2.12?</a></p>\n\n<p>But it's not passing in the parameters. My code is as follows: </p>\n\n<pre><code>&lt;%= simple_form_for :pupils, url: edit_multiple_school_group_pupils_path(school, group) do |f| %&gt;\n  ...\n  ...\n  &lt;%= f.button :submit, 'Change Levels', name: 'editing', value: 'levels' %&gt;\n  &lt;%= f.button :submit, 'Move to A Class', name: 'editing', value: 'classes' %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>I've tried various other methods, and have seen a few posts about giving the buttons separate ids and calling params[:commit], however no commit params are sent.</p>\n\n<p>Any help is greatly appareciated.</p>\n\n<p>EDIT: </p>\n\n<p>The HTML output of the form buttons are:</p>\n\n<pre><code>&lt;input type=\"submit\" name=\"editing\" value=\"levels\" class=\"btn\" /&gt;\n&lt;input type=\"submit\" name=\"editing\" value=\"classes\" class=\"btn\" /&gt;\n</code></pre>\n\n<p>Rails console log:</p>\n\n<pre><code>Started POST \"/school/2/classes/3/pupils/edit_multiple\" for 127.0.0.1 at 2017-08-08 17:08:58 +0100\nProcessing by Schools::Admin::PupilsController#edit_multiple as HTML\nParameters: {\"utf8\"=&gt;\"\u2713\", \"authenticity_token\"=&gt;\"0ncVG1+MfuS13ystwdUe/vEzF30f1iHS/F0u0DDflOXKnkw8hcUhv/n2eJZuZHOA4gZxuITahMFbyTdG/B5cEQ==\", \"pupil_ids\"=&gt;[\"134\", \"129\"], \"school_id\"=&gt;\"2\", \"group_id\"=&gt;\"3\"}\n</code></pre>\n"}, {"tags": ["ruby", "data-structures", "hash", "key", "hashtable"], "comments": [{"owner": {"reputation": 2216, "user_id": 7165275, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d8ad41f944f38348a30791dc7f7d02c?s=128&d=identicon&r=PG&f=1", "display_name": "m. simon borg", "link": "https://stackoverflow.com/users/7165275/m-simon-borg"}, "edited": false, "score": 0, "creation_date": 1502208069, "post_id": 45572936, "comment_id": 78105510, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/12155383/how-to-get-hash-values-by-position-in-ruby\">how to get hash values by position in ruby?</a>"}, {"owner": {"reputation": 3774, "user_id": 7168582, "user_type": "registered", "accept_rate": 87, "profile_image": "https://lh5.googleusercontent.com/-8dcI0krNoFE/AAAAAAAAAAI/AAAAAAAAADY/mLQQmEB4qLs/photo.jpg?sz=128", "display_name": "Max Millington", "link": "https://stackoverflow.com/users/7168582/max-millington"}, "reply_to_user": {"reputation": 2216, "user_id": 7165275, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d8ad41f944f38348a30791dc7f7d02c?s=128&d=identicon&r=PG&f=1", "display_name": "m. simon borg", "link": "https://stackoverflow.com/users/7165275/m-simon-borg"}, "edited": false, "score": 1, "creation_date": 1502209278, "post_id": 45572936, "comment_id": 78106246, "body": "Don&#39;t think it&#39;s a duplicate of that ^ question, but likely a duplicate of this one <a href=\"https://stackoverflow.com/questions/31418673/is-order-of-a-ruby-hash-literal-guaranteed\" title=\"is order of a ruby hash literal guaranteed\">stackoverflow.com/questions/31418673/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 2216, "user_id": 7165275, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d8ad41f944f38348a30791dc7f7d02c?s=128&d=identicon&r=PG&f=1", "display_name": "m. simon borg", "link": "https://stackoverflow.com/users/7165275/m-simon-borg"}, "is_accepted": true, "score": 2, "last_activity_date": 1502210507, "last_edit_date": 1502210507, "creation_date": 1502208288, "answer_id": 45573105, "question_id": 45572936, "link": "https://stackoverflow.com/questions/45572936/position-of-key-value-pairs-in-a-hash-in-ruby-or-any-language/45573105#45573105", "title": "Position of key/value pairs in a hash in Ruby (or any language)", "body": "<p>Generally hashes (or dictionaries, associative arrays etc...) are considered unordered data structures.</p>\n\n<p>From <a href=\"https://en.wikipedia.org/wiki/Associative_array\" rel=\"nofollow noreferrer\">Wikipedia</a></p>\n\n<blockquote>\n  <p>In addition, associative arrays may also include other operations such\n  as determining the number of bindings or constructing an iterator to\n  loop over all the bindings. Usually, for such an operation, the order\n  in which the bindings are returned may be arbitrary.</p>\n</blockquote>\n\n<p>However since Ruby 1.9, hash keys maintain the order in which they were inserted in Ruby.</p>\n\n<p>The answer is right at the top of the <a href=\"https://ruby-doc.org/core-2.4.1/Hash.html\" rel=\"nofollow noreferrer\">Ruby documentation for <code>Hash</code></a></p>\n\n<blockquote>\n  <p>Hashes enumerate their values in the order that the corresponding keys\n  were inserted.</p>\n</blockquote>\n\n<p>In Ruby you can test it yourself pretty easily</p>\n\n<pre><code>key_indices = {\n  1000 =&gt; 0,\n  900  =&gt; 1,\n  500  =&gt; 2,\n  400  =&gt; 3,\n  100  =&gt; 4,\n  90   =&gt; 5,\n  50   =&gt; 6,\n  40   =&gt; 7,\n  10   =&gt; 8,\n  9    =&gt; 9,\n  5    =&gt; 10,\n  4    =&gt; 11,\n  1    =&gt; 12\n}\n\n1_000_000.times do\n  key_indices.each_with_index do |key_val, i|\n    raise if key_val.last != i\n  end\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 7224, "user_id": 448934, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TXtux.jpg?s=128&g=1", "display_name": "Pascal", "link": "https://stackoverflow.com/users/448934/pascal"}, "is_accepted": false, "score": 1, "last_activity_date": 1502208361, "creation_date": 1502208361, "answer_id": 45573135, "question_id": 45572936, "link": "https://stackoverflow.com/questions/45572936/position-of-key-value-pairs-in-a-hash-in-ruby-or-any-language/45573135#45573135", "title": "Position of key/value pairs in a hash in Ruby (or any language)", "body": "<p>A hash (also called associative array) is an unordered data structure.\nSince Ruby 1.9 Ruby keeps the order of the keys as inserted though.</p>\n\n<p>You can find a whole lot more about this here: <a href=\"https://stackoverflow.com/questions/31418673/is-order-of-a-ruby-hash-literal-guaranteed\">Is order of a Ruby hash literal guaranteed?</a></p>\n\n<p>And some here <a href=\"https://ruby-doc.org/core-2.4.1/Hash.html\" rel=\"nofollow noreferrer\">https://ruby-doc.org/core-2.4.1/Hash.html</a></p>\n"}], "owner": {"reputation": 3774, "user_id": 7168582, "user_type": "registered", "accept_rate": 87, "profile_image": "https://lh5.googleusercontent.com/-8dcI0krNoFE/AAAAAAAAAAI/AAAAAAAAADY/mLQQmEB4qLs/photo.jpg?sz=128", "display_name": "Max Millington", "link": "https://stackoverflow.com/users/7168582/max-millington"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 310, "favorite_count": 0, "accepted_answer_id": 45573105, "answer_count": 2, "score": 0, "last_activity_date": 1502261475, "creation_date": 1502207787, "last_edit_date": 1502261475, "question_id": 45572936, "link": "https://stackoverflow.com/questions/45572936/position-of-key-value-pairs-in-a-hash-in-ruby-or-any-language", "title": "Position of key/value pairs in a hash in Ruby (or any language)", "body": "<p>I heard that the positions of the key value pairs in a hash are not fixed, and could be rearranged.</p>\n\n<p>I would like to know if this is true, and if it is, could someone point me to some documentation? If it is wrong, it would be great to have some documentation to the contrary.</p>\n\n<p>To illustrate, if I have the following hash:</p>\n\n<pre><code>   NUMBERS = {\n             1000 =&gt; \"M\",\n             900 =&gt; \"CM\",\n             500 =&gt; \"D\",\n             400 =&gt; \"CD\",\n             100 =&gt; \"C\",\n             90 =&gt; \"XC\",\n             50 =&gt; \"L\",\n             40 =&gt; \"XL\",\n             10 =&gt; \"X\",\n             9 =&gt; \"IX\",\n             5 =&gt; \"V\",\n             4 =&gt; \"IV\",\n             1 =&gt; \"I\",\n           }\n</code></pre>\n\n<p>and iterate through it over and over again, would the first key/value pair possibly not be <code>1000 =&gt; 'M'</code>? Or, are the positions of the key/value pairs fixed by definition, and would have to be manually changed in order for the positions to change?</p>\n\n<p>This question is a more general and basic question about the qualities of hashes. I'm not asking how to get to a certain position in a hash.</p>\n"}, {"tags": ["ruby", "chess", "bitboard"], "comments": [{"owner": {"reputation": 1936, "user_id": 3783155, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/iCcYV.jpg?s=128&g=1", "display_name": "clabe45", "link": "https://stackoverflow.com/users/3783155/clabe45"}, "edited": false, "score": 0, "creation_date": 1502208108, "post_id": 45572917, "comment_id": 78105545, "body": "Can you give more explanation of how you are planning on formatting your chess game?"}, {"owner": {"reputation": 2571, "user_id": 6822876, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/i6dGp.jpg?s=128&g=1", "display_name": "Carrein", "link": "https://stackoverflow.com/users/6822876/carrein"}, "reply_to_user": {"reputation": 1936, "user_id": 3783155, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/iCcYV.jpg?s=128&g=1", "display_name": "clabe45", "link": "https://stackoverflow.com/users/3783155/clabe45"}, "edited": false, "score": 0, "creation_date": 1502208805, "post_id": 45572917, "comment_id": 78105957, "body": "I just updated the question with a link to a tutorial I&#39;m using which should be much clearer."}], "answers": [{"tags": [], "owner": {"reputation": 1936, "user_id": 3783155, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/iCcYV.jpg?s=128&g=1", "display_name": "clabe45", "link": "https://stackoverflow.com/users/3783155/clabe45"}, "is_accepted": false, "score": 2, "last_activity_date": 1502210137, "creation_date": 1502210137, "answer_id": 45573657, "question_id": 45572917, "link": "https://stackoverflow.com/questions/45572917/how-to-display-a-bitboard-derived-from-binary-literals/45573657#45573657", "title": "How to display a bitboard derived from binary literals?", "body": "<p>For each type of chess piece (i.e. <code>white_pawn</code>, <code>white_rook</code>, <code>black_pawn</code>, <code>black_rook</code>, ...), iterate over each bit in the binary number. If the bit is <code>1</code>, then draw the appropriate chess piece image, <em>at</em> (<code>x</code>, <code>y</code>); where</p>\n\n<pre><code>x =  bit_index % board_width         # relative position to nearest-down chess board row\ny = (bit_index / board_width).floor  # nearest-down chess board row\n</code></pre>\n"}], "owner": {"reputation": 2571, "user_id": 6822876, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/i6dGp.jpg?s=128&g=1", "display_name": "Carrein", "link": "https://stackoverflow.com/users/6822876/carrein"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 317, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1502210137, "creation_date": 1502207706, "last_edit_date": 1502208765, "question_id": 45572917, "link": "https://stackoverflow.com/questions/45572917/how-to-display-a-bitboard-derived-from-binary-literals", "title": "How to display a bitboard derived from binary literals?", "body": "<p>I'm trying to print out a chess game which I am implementing using bitboards. I'm having trouble visualizing how would I go about display the 8x8 grid with the pieces for play. </p>\n\n<p>Here's the link to the <a href=\"http://pages.cs.wisc.edu/~psilord/blog/data/chess-pages/rep.html\" rel=\"nofollow noreferrer\">tutorial</a> I am following (albeit incomplete).</p>\n\n<pre><code>    @white_pawn    = 0b0000000000000000000000000000000000000000000000001111111100000000\n    @white_rook    = 0b0000000000000000000000000000000000000000000000000000000010000001\n    @white_knight  = 0b0000000000000000000000000000000000000000000000000000000001000010\n    @white_bishop  = 0b0000000000000000000000000000000000000000000000000000000000100100\n    @white_king    = 0b0000000000000000000000000000000000000000000000000000000000010000\n    @white_queen   = 0b0000000000000000000000000000000000000000000000000000000000001000\n\n    @black_pawn    = 0b0000000011111111000000000000000000000000000000000000000000000000\n    @black_rook    = 0b1000000100000000000000000000000000000000000000000000000000000000\n    @black_knight  = 0b0100001000000000000000000000000000000000000000000000000000000000\n    @black_bishop  = 0b0010010000000000000000000000000000000000000000000000000000000000\n    @black_king    = 0b0001000000000000000000000000000000000000000000000000000000000000\n    @black_queen   = 0b0000100000000000000000000000000000000000000000000000000000000000\n\n    @all_pieces = @all_white | @all_black\n</code></pre>\n\n<p>I have the above binary set up as per a default chess set position whereby the MSB is the top left corner and the LSB is the bottom right corner.</p>\n\n<p>As the game progresses, the binary literals above will change over time (currently they are at the default chess placements). </p>\n\n<p><a href=\"https://i.stack.imgur.com/MrqUum.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/MrqUum.png\" alt=\"enter image description here\"></a></p>\n\n<p>The game manager will then consider all the updated binary literals above the print the board again, as show above.</p>\n\n<p>What would be a good way to iterate through the literals and print the necessary empty squares/playing pieces as per the information above?</p>\n"}, {"tags": ["ruby", "object", "share", "multifile"], "answers": [{"comments": [{"owner": {"reputation": 99, "user_id": 1305988, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/1f00d7d1c2cab236361c7a395c792d63?s=128&d=identicon&r=PG", "display_name": "user1305988", "link": "https://stackoverflow.com/users/1305988/user1305988"}, "edited": false, "score": 1, "creation_date": 1502207715, "post_id": 45572739, "comment_id": 78105275, "body": "I do apologize for the indentation. I was typing merely from memory, so didn&#39;t have exact code infront of me. Thank you for your help. I didn&#39;t know about passing the object in that manner but now I do so it will make other things so much easier as I learn new and interesting things in Ruby. Also didn&#39;t know the .rb was implied, so that is useful information as well. Thanks."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 99, "user_id": 1305988, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/1f00d7d1c2cab236361c7a395c792d63?s=128&d=identicon&r=PG", "display_name": "user1305988", "link": "https://stackoverflow.com/users/1305988/user1305988"}, "edited": false, "score": 0, "creation_date": 1502208640, "post_id": 45572739, "comment_id": 78105864, "body": "No trouble. Just mentioning these things so you can avoid pitfalls in the future. Ruby is generally pretty forgiving but there are some things it can&#39;t deal with, and it&#39;s also easy to get so complacent your code becomes unmaintainable. Hope that got it working."}, {"owner": {"reputation": 99, "user_id": 1305988, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/1f00d7d1c2cab236361c7a395c792d63?s=128&d=identicon&r=PG", "display_name": "user1305988", "link": "https://stackoverflow.com/users/1305988/user1305988"}, "edited": false, "score": 1, "creation_date": 1502217729, "post_id": 45572739, "comment_id": 78111043, "body": "Got it working smashingly well. Now on to the the next mountain. After 24 hours of dabbling with ruby I&#39;ve come to the the realization that I should have attempted it years ago."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 99, "user_id": 1305988, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/1f00d7d1c2cab236361c7a395c792d63?s=128&d=identicon&r=PG", "display_name": "user1305988", "link": "https://stackoverflow.com/users/1305988/user1305988"}, "edited": false, "score": 0, "creation_date": 1502217826, "post_id": 45572739, "comment_id": 78111088, "body": "Don&#39;t forget to check the answers that work for you. I can see a number in your history that look like they were solved but credit was never given. Helps others in the same jam find questions that were successfully answered."}], "tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": true, "score": 1, "last_activity_date": 1502207167, "creation_date": 1502207167, "answer_id": 45572739, "question_id": 45572665, "link": "https://stackoverflow.com/questions/45572665/how-do-i-share-object-from-main-file-to-supporting-file-in-ruby/45572739#45572739", "title": "How do I share object from main file to supporting file in ruby?", "body": "<p>Remember that variables are strictly local unless you expressly pass them in. This means <code>s</code> only exists in the <code>main</code> context. You can fix this by passing it in:</p>\n\n<pre><code>reply(s, line)\n</code></pre>\n\n<p>And on the receiving side:</p>\n\n<pre><code>def reply(s, input)\n  # ...\nend\n</code></pre>\n\n<p>I'd <strong>strongly</strong> encourage you to try and indent things consistently here, this code is really out of sorts, and avoid using global variables like <code>$connected</code>. Using a simple self-contained class you could clean up this code considerably.</p>\n\n<p>Also, don't add <code>.rb</code> extensions when calling <code>require</code>. It's implied.</p>\n"}], "owner": {"reputation": 99, "user_id": 1305988, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/1f00d7d1c2cab236361c7a395c792d63?s=128&d=identicon&r=PG", "display_name": "user1305988", "link": "https://stackoverflow.com/users/1305988/user1305988"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 16, "favorite_count": 0, "accepted_answer_id": 45572739, "answer_count": 1, "score": 1, "last_activity_date": 1502207167, "creation_date": 1502206955, "last_edit_date": 1502207039, "question_id": 45572665, "link": "https://stackoverflow.com/questions/45572665/how-do-i-share-object-from-main-file-to-supporting-file-in-ruby", "title": "How do I share object from main file to supporting file in ruby?", "body": "<p>I have something similar.</p>\n\n<pre><code># MAIN.RB\nrequire 'sockets'\nrequire_relative 'replies.rb'\nhostname = 'localhost'\nport = 6500\ns = TCPSocket.open(hostname, port)\n$connected = 0\nwhile line = s.gets   # Read lines from the socket\n#DO A BUNCH OF STUFF\nif line == \"Hi\"\nreply line\nend\nend\ns.close\n</code></pre>\n\n<p>Then I have the reply function in a secondary file.</p>\n\n<pre><code># REPLIES.RB\n\ndef reply(input)\nif input == \"Hi\"\n    s.write(\"Hello my friend.\\n\"\nend    \nend\n</code></pre>\n\n<p>However calling on the object s from the second file does not seem to work. How would I go about making this work. I'm new to Ruby. I've searched google for the answer, but the only results I have found is with sharing variables across files. I could always do a return \"Hello my friend.\\n\", but I rather be able to write to the socket object directly from the function in REPLIES.rb</p>\n"}, {"tags": ["ruby", "lambda", "iterator", "proc"], "comments": [{"owner": {"reputation": 16672, "user_id": 22237, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/hkobD.png?s=128&g=1", "display_name": "Kris", "link": "https://stackoverflow.com/users/22237/kris"}, "edited": false, "score": 0, "creation_date": 1502205390, "post_id": 45571644, "comment_id": 78103672, "body": "<code>add_one = -&gt;(num) { num + 1 }; [10, 20, 30, 100].map(&amp;add_one) #=&gt; [11, 21, 31, 101]</code>"}, {"owner": {"reputation": 25, "user_id": 2165560, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OWApV.jpg?s=128&g=1", "display_name": "Mike Stitt", "link": "https://stackoverflow.com/users/2165560/mike-stitt"}, "reply_to_user": {"reputation": 16672, "user_id": 22237, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/hkobD.png?s=128&g=1", "display_name": "Kris", "link": "https://stackoverflow.com/users/22237/kris"}, "edited": false, "score": 0, "creation_date": 1502210302, "post_id": 45571644, "comment_id": 78106870, "body": "I was looking for the iterator to yield like iterators should."}], "answers": [{"comments": [{"owner": {"reputation": 25, "user_id": 2165560, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OWApV.jpg?s=128&g=1", "display_name": "Mike Stitt", "link": "https://stackoverflow.com/users/2165560/mike-stitt"}, "edited": false, "score": 0, "creation_date": 1502210087, "post_id": 45571976, "comment_id": 78106738, "body": "Awesome! Thanks, that&#39;s exactly what I was looking for."}, {"owner": {"reputation": 25, "user_id": 2165560, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OWApV.jpg?s=128&g=1", "display_name": "Mike Stitt", "link": "https://stackoverflow.com/users/2165560/mike-stitt"}, "edited": false, "score": 0, "creation_date": 1502210420, "post_id": 45571976, "comment_id": 78106952, "body": "Maybe not so fast.  The lambda function does call the block, which is a step in the right direction, but it should yield multiple times like an iterator."}, {"owner": {"reputation": 25, "user_id": 2165560, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OWApV.jpg?s=128&g=1", "display_name": "Mike Stitt", "link": "https://stackoverflow.com/users/2165560/mike-stitt"}, "edited": false, "score": 0, "creation_date": 1502210692, "post_id": 45571976, "comment_id": 78107117, "body": "But perhaps it ends up being a different type of iterator one that repeatedly calls the block rather than repeatedly yielding to the block."}, {"owner": {"reputation": 25, "user_id": 2165560, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OWApV.jpg?s=128&g=1", "display_name": "Mike Stitt", "link": "https://stackoverflow.com/users/2165560/mike-stitt"}, "edited": false, "score": 1, "creation_date": 1502214446, "post_id": 45571976, "comment_id": 78109212, "body": "Nikita,  I placed my tweak to your answer here: [<a href=\"https://stackoverflow.com/questions/4982630/trouble-yielding-inside-a-block-lambda/45574588#45574588]\" title=\"trouble yielding inside a block lambda\">stackoverflow.com/questions/4982630/&hellip;</a>"}, {"owner": {"reputation": 1743, "user_id": 4308435, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Vgr6X.jpg?s=128&g=1", "display_name": "Nikita Misharin", "link": "https://stackoverflow.com/users/4308435/nikita-misharin"}, "reply_to_user": {"reputation": 25, "user_id": 2165560, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OWApV.jpg?s=128&g=1", "display_name": "Mike Stitt", "link": "https://stackoverflow.com/users/2165560/mike-stitt"}, "edited": false, "score": 0, "creation_date": 1502269850, "post_id": 45571976, "comment_id": 78131425, "body": "@MikeStitt Interesting tweak. Thanks. You could refactor it a little, to something like <a href=\"https://gist.github.com/TheSmartnik/f673af8452b924daf1e24e0c9115cb74\" rel=\"nofollow noreferrer\">this</a>"}], "tags": [], "owner": {"reputation": 1743, "user_id": 4308435, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Vgr6X.jpg?s=128&g=1", "display_name": "Nikita Misharin", "link": "https://stackoverflow.com/users/4308435/nikita-misharin"}, "is_accepted": true, "score": 1, "last_activity_date": 1502204882, "creation_date": 1502204882, "answer_id": 45571976, "question_id": 45571644, "link": "https://stackoverflow.com/questions/45571644/in-ruby-can-you-use-the-lambda-or-or-proc-call-method-to-invoke-an-iterator/45571976#45571976", "title": "In Ruby, can you use the lambda or or Proc call method to invoke an iterator?", "body": "<p>Here is the way to do it</p>\n\n<pre><code>iterator = -&gt; (name, &amp;block) { block.call name }\niterator.call(4) { |who| puts \"It works now #{who} :)\" }\n</code></pre>\n\n<p><em>P.S. Note i use a shortcut here for a <code>lambda</code>, <code>-&gt;</code> called stabby lambda</em></p>\n"}], "owner": {"reputation": 25, "user_id": 2165560, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OWApV.jpg?s=128&g=1", "display_name": "Mike Stitt", "link": "https://stackoverflow.com/users/2165560/mike-stitt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 467, "favorite_count": 0, "closed_date": 1502204923, "accepted_answer_id": 45571976, "answer_count": 1, "score": 1, "last_activity_date": 1502204882, "creation_date": 1502204053, "question_id": 45571644, "link": "https://stackoverflow.com/questions/45571644/in-ruby-can-you-use-the-lambda-or-or-proc-call-method-to-invoke-an-iterator", "closed_reason": "Duplicate", "title": "In Ruby, can you use the lambda or or Proc call method to invoke an iterator?", "body": "<p>I would like to create an iterator that I can pass to a method for the method to call.</p>\n\n<pre><code>#!/usr/bin/env ruby\n\nputs \"------------------------------------\"\nputs \"1 This works.\"\nputs \"------------------------------------\"       \n1.times {|who| puts \"Position #{who} works!\"}\n\nputs \"------------------------------------\"\nputs \"2 This works.\"\nputs \"------------------------------------\"       \naBlock = Proc.new { |who| puts \"Position #{who} also works!\" }       \n2.times &amp;aBlock\n\nputs \"------------------------------------\"\nputs \"3 This works.\"\nputs \"------------------------------------\"       \ndef eachIndex\n  3.times { |i| yield i }\nend\n\neachIndex &amp;aBlock\n\nputs \"------------------------------------\"\nputs \"4 This does not work.\"\nputs \"------------------------------------\"       \niterator = lambda { |name| yield name }       \niterator.call(4) {|who| puts \"Does not work #{who}:-(\"}\n\nputs \"------------------------------------\"\nputs \"5 This does not work.\"\nputs \"------------------------------------\"       \niterator = lambda { |name,&amp;block| yield name }       \niterator.call(5) {|who| puts \"Does not work #{who}:-(\"}\n\nputs \"------------------------------------\"\nputs \"6 This does not work.\"\nputs \"------------------------------------\"       \niterator = Proc.new { |name,&amp;block| yield name }       \niterator.call(6) {|who| puts \"Does not work #{who}:-(\" }\n</code></pre>\n\n<p>Can lambda's or proc's be iterators in Ruby?  I would like to pass them to a class as a parameter.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "vagrant", "berkshelf", "chefdk"], "comments": [{"owner": {"reputation": 51013, "user_id": 976775, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30bd66ad1795804aebe249d8bcb14409?s=128&d=identicon&r=PG", "display_name": "MrYoshiji", "link": "https://stackoverflow.com/users/976775/mryoshiji"}, "edited": false, "score": 0, "creation_date": 1502204984, "post_id": 45571478, "comment_id": 78103417, "body": "Did you reload your console by closing it and restarting it? Can you check that <code>berks</code> is in your PATH? (you should be able to see the bin path when you do <code>where berks</code> but I am not sure it will work since I am not a Windows CLI pro)"}, {"owner": {"reputation": 233, "user_id": 3530813, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/0MLHE.jpg?s=128&g=1", "display_name": "swapnil shahane", "link": "https://stackoverflow.com/users/3530813/swapnil-shahane"}, "reply_to_user": {"reputation": 51013, "user_id": 976775, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30bd66ad1795804aebe249d8bcb14409?s=128&d=identicon&r=PG", "display_name": "MrYoshiji", "link": "https://stackoverflow.com/users/976775/mryoshiji"}, "edited": false, "score": 0, "creation_date": 1502205387, "post_id": 45571478, "comment_id": 78103670, "body": "yes, I restarted console and berks is in path."}], "owner": {"reputation": 233, "user_id": 3530813, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/0MLHE.jpg?s=128&g=1", "display_name": "swapnil shahane", "link": "https://stackoverflow.com/users/3530813/swapnil-shahane"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 166, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1502204830, "creation_date": 1502203581, "last_edit_date": 1502204830, "question_id": 45571478, "link": "https://stackoverflow.com/questions/45571478/vagrant-berkshelf-could-not-find-the-berks-executable-in-your-path", "title": "Vagrant Berkshelf could not find the &#39;berks&#39; executable in your PATH", "body": "<p>I have installed vagrant 1.9.5 and chefdk 2.0.28 in windows\nAlso added D:\\opscode\\chefdk\\bin\\ in path.</p>\n\n<p>But when I tries to run 'vagrant up' command, I get following error.</p>\n\n<pre><code>Bringing machine 'project' up with 'virtualbox' provider...\n\nVagrant Berkshelf could not find the 'berks' executable in your PATH.\n\nPlease download and install the latest version of the ChefDK from:\n\nhttps://downloads.getchef.com/chef-dk\n\nand follow the installation instructions. Do not forget to add the ChefDK to your PATH.\n</code></pre>\n\n<p>I also tried to add different path like D:\\opscode\\chefdk\\, D:\\opscode\\chefdk\\bin\\berks, /opt/chefdk/bin, but error remains same.</p>\n"}, {"tags": ["ruby", "formula", "xlsx", "rubyxl"], "answers": [{"comments": [{"owner": {"reputation": 97, "user_id": 8406596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a5f6f5f69fe4e93141a0c46df4adffa6?s=128&d=identicon&r=PG&f=1", "display_name": "Pistorius", "link": "https://stackoverflow.com/users/8406596/pistorius"}, "edited": false, "score": 0, "creation_date": 1502215865, "post_id": 45574582, "comment_id": 78110038, "body": "I can see the changes when i open the file afther i write it, but not the formulas recalculated. Ill check win32ole thx"}, {"owner": {"reputation": 97, "user_id": 8406596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a5f6f5f69fe4e93141a0c46df4adffa6?s=128&d=identicon&r=PG&f=1", "display_name": "Pistorius", "link": "https://stackoverflow.com/users/8406596/pistorius"}, "edited": false, "score": 1, "creation_date": 1502292073, "post_id": 45574582, "comment_id": 78148979, "body": "Thanks for the hint Tom, win32ole helped me to solve the problem"}, {"owner": {"reputation": 906, "user_id": 7933325, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a4181aecdacd635102e337da145eafe9?s=128&d=identicon&r=PG", "display_name": "Tom Copeland", "link": "https://stackoverflow.com/users/7933325/tom-copeland"}, "reply_to_user": {"reputation": 97, "user_id": 8406596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a5f6f5f69fe4e93141a0c46df4adffa6?s=128&d=identicon&r=PG&f=1", "display_name": "Pistorius", "link": "https://stackoverflow.com/users/8406596/pistorius"}, "edited": false, "score": 0, "creation_date": 1502600301, "post_id": 45574582, "comment_id": 78272384, "body": "Cool, I&#39;m glad that helped!"}], "tags": [], "owner": {"reputation": 906, "user_id": 7933325, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a4181aecdacd635102e337da145eafe9?s=128&d=identicon&r=PG", "display_name": "Tom Copeland", "link": "https://stackoverflow.com/users/7933325/tom-copeland"}, "is_accepted": false, "score": 1, "last_activity_date": 1502213320, "creation_date": 1502213320, "answer_id": 45574582, "question_id": 45571349, "link": "https://stackoverflow.com/questions/45571349/update-cell-values-referenced-by-a-formula-with-rubyxl/45574582#45574582", "title": "Update cell values referenced by a formula with RubyXL", "body": "<p>From the <a href=\"https://github.com/weshatheleopard/rubyXL#rubyxl\" rel=\"nofollow noreferrer\">RubyXL README</a> it sounds like that utility is intended to read Excel files and then write them back out.  Then when you opened the file in Excel you would see your changes and the formulas would be recalculated.</p>\n\n<p>You might want to look at <a href=\"http://rubyonwindows.blogspot.com/2007/03/automating-excel-with-ruby.html\" rel=\"nofollow noreferrer\">win32ole</a> if you want to do COM automation of Excel.</p>\n"}, {"tags": [], "owner": {"reputation": 97, "user_id": 8406596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a5f6f5f69fe4e93141a0c46df4adffa6?s=128&d=identicon&r=PG&f=1", "display_name": "Pistorius", "link": "https://stackoverflow.com/users/8406596/pistorius"}, "is_accepted": true, "score": 1, "last_activity_date": 1502291960, "creation_date": 1502291960, "answer_id": 45594678, "question_id": 45571349, "link": "https://stackoverflow.com/questions/45571349/update-cell-values-referenced-by-a-formula-with-rubyxl/45594678#45594678", "title": "Update cell values referenced by a formula with RubyXL", "body": "<p>Finally i solved this. If you are interested I used win32ole because after tested a lot of rubygems this was the unic which works like i said in the question.</p>\n\n<pre><code>require 'win32ole'\n\nbegin\n    xl = WIN32OLE.new('Excel.Application')\n    workbook = xl.Workbooks.Open('my_route')\n    worksheet = workbook.Worksheets(1)\n    # Here we make operations like this one...\n    worksheet.Cells(2,2).value = 2\n    # After any operations we can see the results of referenced cells inmediatly\n    # Save the file if you want\n    # workbook.Save\n    workbook.Close\nrescue =&gt; e\n    xl.Quit\nend\n</code></pre>\n\n<p>So in conclusion RubyXL work fine but dont reflect the results of cells referenced in formulas when you edit the file. win32ole do that.</p>\n"}, {"tags": [], "owner": {"reputation": 40236, "user_id": 923315, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/j6lLI.jpg?s=128&g=1", "display_name": "peter", "link": "https://stackoverflow.com/users/923315/peter"}, "is_accepted": false, "score": 2, "last_activity_date": 1567596757, "last_edit_date": 1567596757, "creation_date": 1567596373, "answer_id": 57787405, "question_id": 45571349, "link": "https://stackoverflow.com/questions/45571349/update-cell-values-referenced-by-a-formula-with-rubyxl/57787405#57787405", "title": "Update cell values referenced by a formula with RubyXL", "body": "<p>The problem with the accepted answer is that on servers office often isn't installed, so the COM automation won't work there.\nWhen you use the following code the formulas are recalculated when Excel opens the spreadsheet.</p>\n\n<pre><code>workbook = RubyXL::Parser.parse(file)\nworkbook.calc_pr.full_calc_on_load = true\n</code></pre>\n"}], "owner": {"reputation": 97, "user_id": 8406596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a5f6f5f69fe4e93141a0c46df4adffa6?s=128&d=identicon&r=PG&f=1", "display_name": "Pistorius", "link": "https://stackoverflow.com/users/8406596/pistorius"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1569, "favorite_count": 2, "accepted_answer_id": 45594678, "answer_count": 3, "score": 1, "last_activity_date": 1567596757, "creation_date": 1502203247, "last_edit_date": 1502225365, "question_id": 45571349, "link": "https://stackoverflow.com/questions/45571349/update-cell-values-referenced-by-a-formula-with-rubyxl", "title": "Update cell values referenced by a formula with RubyXL", "body": "<p>I have a <code>xlsx</code> with values in cells, many of them are referenced with a formula in other cell (in the same sheet). Im working with <code>RubyXL</code> because i wasn't found another gem which help me to write, edit and save an existed xlsx file.\nNow to be clear, lets see an example of what im doing and i want.\nImagine a group of 3 cells; A1, B1 and C1 where C1 is the sum of A1 and B1 (=A1+B1), so if we have a 4 in A1, a 6 in B1 then C1 is equivalent to 10. I'm opening the xlsx with <code>workbook = RubyXL::Parser.parse('example.xlsx')</code>, afther that i modify the value of cell A1 from 4 to 5 and save it. Here is the problem, if we read the cell C1 after the change we still have the previous result 10.\nHow i can update that accord to the formula? Is posible with RubyXL? or is there another solution?</p>\n"}, {"tags": ["arrays", "ruby"], "comments": [{"owner": {"reputation": 53, "user_id": 8434728, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dEfXo.jpg?s=128&g=1", "display_name": "David Bunnell", "link": "https://stackoverflow.com/users/8434728/david-bunnell"}, "reply_to_user": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 1, "creation_date": 1502312767, "post_id": 45571004, "comment_id": 78160612, "body": "There&#39;s no wrong questions, but there ARE wrong answers. This is my first question. I&#39;ve been coding Ruby for 2 days (coding for 40 years), created classes to handle everything to do with playing decks for any game (self training). This is the first issue I could not figure out via documentation (Yup I missed something in documentation--I&#39;m sure that never happens to you). I did search for &quot;ruby += push&quot; and a couple other tries and found nothing here. Eiko&#39;s generous spirit is a good guide, @Jorg. I&#39;m sure you&#39;re a good &quot;recreational programmer&quot;, you don&#39;t have to prove it by trolling noobs."}], "answers": [{"comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 3, "creation_date": 1502206404, "post_id": 45571121, "comment_id": 78104384, "body": "This isn&#39;t right and ignores the source of the problem: The <code>[]</code> argument to <code>Array.new</code> which creates a <i>shared</i> array for all entries."}], "tags": [], "owner": {"reputation": 2184, "user_id": 3536548, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/qEPjr.png?s=128&g=1", "display_name": "Thermatix", "link": "https://stackoverflow.com/users/3536548/thermatix"}, "is_accepted": false, "score": 0, "last_activity_date": 1502202668, "creation_date": 1502202668, "answer_id": 45571121, "question_id": 45571004, "link": "https://stackoverflow.com/questions/45571004/ruby-array-vs-push/45571121#45571121", "title": "Ruby array += vs push", "body": "<p>It's because in the second code section, you're selecting the sub-array and pushing to it, if you want an array of array's you need to push the array to the main array.</p>\n\n<pre><code>a = Array.new(3,[])\na.push([\"apple\"])\na.push([\"orange\"])\na.push([\"frog\"])\n</code></pre>\n\n<p>to get the same result as the first one.</p>\n\n<p>EDIT: I forgot to mention, because you initialize the array with blank array's as elements, you will have three empty elements in front of the pushed elements,</p>\n"}, {"comments": [{"owner": {"reputation": 53, "user_id": 8434728, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dEfXo.jpg?s=128&g=1", "display_name": "David Bunnell", "link": "https://stackoverflow.com/users/8434728/david-bunnell"}, "edited": false, "score": 2, "creation_date": 1502217230, "post_id": 45571296, "comment_id": 78110778, "body": "Thank you very much. This is my first question here and I don&#39;t know how to set your answer as the &quot;right&quot; one. Thanks for the efficiency comment also. I&#39;ll watch out for that. BTW solved by: &#39;b=Array.new(3)&#39;   &#39;3.times  {|i| b[i] = []}&#39; (if there is a better way to &quot;break the object link&quot; please let me). --Just an old c/c++/c# programer teaching himself ruby :)"}, {"owner": {"reputation": 4150, "user_id": 7470620, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/49f3026fe13841e41d1805178eed9a3c?s=128&d=identicon&r=PG", "display_name": "eiko", "link": "https://stackoverflow.com/users/7470620/eiko"}, "reply_to_user": {"reputation": 53, "user_id": 8434728, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dEfXo.jpg?s=128&g=1", "display_name": "David Bunnell", "link": "https://stackoverflow.com/users/8434728/david-bunnell"}, "edited": false, "score": 0, "creation_date": 1502221535, "post_id": 45571296, "comment_id": 78113085, "body": "@DavidBunnell I&#39;m glad to help! If you look at the top-left corner of this answer, you should see a check-mark (next to the score and up/down arrows for voting). If you click that check-mark, it&#39;ll turn green, letting everyone know this answer worked for you. Welcome to stackoverflow and happy coding ^_^"}, {"owner": {"reputation": 4150, "user_id": 7470620, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/49f3026fe13841e41d1805178eed9a3c?s=128&d=identicon&r=PG", "display_name": "eiko", "link": "https://stackoverflow.com/users/7470620/eiko"}, "reply_to_user": {"reputation": 53, "user_id": 8434728, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dEfXo.jpg?s=128&g=1", "display_name": "David Bunnell", "link": "https://stackoverflow.com/users/8434728/david-bunnell"}, "edited": false, "score": 0, "creation_date": 1502221621, "post_id": 45571296, "comment_id": 78113131, "body": "@DavidBunnell also, I&#39;ve updated my answer with a more eloquent way to initialize the array. The code you mentioned in your comment is similar though!"}], "tags": [], "owner": {"reputation": 4150, "user_id": 7470620, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/49f3026fe13841e41d1805178eed9a3c?s=128&d=identicon&r=PG", "display_name": "eiko", "link": "https://stackoverflow.com/users/7470620/eiko"}, "is_accepted": true, "score": 10, "last_activity_date": 1502221457, "last_edit_date": 1592644375, "creation_date": 1502203126, "answer_id": 45571296, "question_id": 45571004, "link": "https://stackoverflow.com/questions/45571004/ruby-array-vs-push/45571296#45571296", "title": "Ruby array += vs push", "body": "<p>The issue here is <code>b = Array.new(3, [])</code> uses the same object as the base value for all the array cells:</p>\n<pre><code>b = Array.new(3, [])\nb[0].object_id #=&gt; 28424380\nb[1].object_id #=&gt; 28424380\nb[2].object_id #=&gt; 28424380\n</code></pre>\n<p>So when you use <code>b[0].push</code>, it adds the item to &quot;each&quot; sub-array because they are all, in fact, the same array.</p>\n<p>So why does b[0] += [&quot;value&quot;] work? Well, looking at the ruby docs:</p>\n<blockquote>\n<h1>ary + other_ary \u2192 new_ary</h1>\n<p>Concatenation \u2014 Returns a new array built by concatenating the two arrays together to produce a third array.</p>\n</blockquote>\n<pre><code>[ 1, 2, 3 ] + [ 4, 5 ]    #=&gt; [ 1, 2, 3, 4, 5 ]\na = [ &quot;a&quot;, &quot;b&quot;, &quot;c&quot; ]\nc = a + [ &quot;d&quot;, &quot;e&quot;, &quot;f&quot; ]\nc                         #=&gt; [ &quot;a&quot;, &quot;b&quot;, &quot;c&quot;, &quot;d&quot;, &quot;e&quot;, &quot;f&quot; ]\na                         #=&gt; [ &quot;a&quot;, &quot;b&quot;, &quot;c&quot; ]\n</code></pre>\n<blockquote>\n<p>Note that</p>\n</blockquote>\n<pre><code>x += y\n</code></pre>\n<blockquote>\n<p>is the same as</p>\n</blockquote>\n<pre><code>x = x + y\n</code></pre>\n<blockquote>\n<p>This means that it produces a new array. As a consequence, repeated use of += on arrays can be quite inefficient.</p>\n</blockquote>\n<p>So when you use <code>+=</code>, it replaces the array entirely, meaning the array in <code>b[0]</code> is no longer the same as <code>b[1]</code> or <code>b[2]</code>.</p>\n<p>As you can see:</p>\n<pre><code>b = Array.new(3, [])\nb[0].push(&quot;test&quot;) \nb #=&gt; [[&quot;test&quot;], [&quot;test&quot;], [&quot;test&quot;]]\nb[0].object_id #=&gt; 28424380\nb[1].object_id #=&gt; 28424380\nb[2].object_id #=&gt; 28424380\nb[0] += [&quot;foo&quot;]\nb #=&gt; [[&quot;test&quot;, &quot;foo&quot;], [&quot;test&quot;], [&quot;test&quot;]]\nb[0].object_id #=&gt; 38275912\nb[1].object_id #=&gt; 28424380\nb[2].object_id #=&gt; 28424380\n</code></pre>\n<hr />\n<p>If you're wondering how to ensure each array is unique when initializing an array of arrays, you can do so like this:</p>\n<pre><code>b = Array.new(3) { [] }\n</code></pre>\n<p>This different syntax lets you pass a block of code which gets run for each cell to calculate its original value. Since the block is run for each cell, a separate array is created each time.</p>\n"}], "owner": {"reputation": 53, "user_id": 8434728, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dEfXo.jpg?s=128&g=1", "display_name": "David Bunnell", "link": "https://stackoverflow.com/users/8434728/david-bunnell"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2641, "favorite_count": 1, "accepted_answer_id": 45571296, "answer_count": 2, "score": 5, "last_activity_date": 1502221457, "creation_date": 1502202315, "question_id": 45571004, "link": "https://stackoverflow.com/questions/45571004/ruby-array-vs-push", "title": "Ruby array += vs push", "body": "<p>I have an array of arrays and want to append elements to the sub-arrays. += does what I want, but I'd like to understand why push does not.</p>\n\n<p>Behavior I expect (and works with +=):</p>\n\n<pre><code>b = Array.new(3,[])\nb[0] += [\"apple\"]\nb[1] += [\"orange\"]\nb[2] += [\"frog\"]\n</code></pre>\n\n<p>b => [[\"apple\"], [\"orange\"], [\"frog\"]]</p>\n\n<p>With push I get the pushed element appended to EACH sub-array (why?):</p>\n\n<pre><code>a = Array.new(3,[])\na[0].push(\"apple\")\na[1].push(\"orange\")\na[2].push(\"frog\")\n</code></pre>\n\n<p>a => [[\"apple\", \"orange\", \"frog\"], [\"apple\", \"orange\", \"frog\"], [\"apple\", \"orange\", \"frog\"]]</p>\n\n<p>Any help on this much appreciated. </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "doorkeeper"], "comments": [{"owner": {"reputation": 8100, "user_id": 1222852, "user_type": "registered", "accept_rate": 31, "profile_image": "https://i.stack.imgur.com/7kGxl.jpg?s=128&g=1", "display_name": "Taimoor Changaiz", "link": "https://stackoverflow.com/users/1222852/taimoor-changaiz"}, "edited": false, "score": 0, "creation_date": 1528466396, "post_id": 45570669, "comment_id": 88532212, "body": "Followed this link and resolved issue. <a href=\"https://github.com/doorkeeper-gem/doorkeeper/wiki/Using-Resource-Owner-Password-Credentials-flow\" rel=\"nofollow noreferrer\">github.com/doorkeeper-gem/doorkeeper/wiki/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 8434668, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47dc0ae970770229e3f723e6c8621c72?s=128&d=identicon&r=PG&f=1", "display_name": "Patrick", "link": "https://stackoverflow.com/users/8434668/patrick"}, "edited": false, "score": 0, "creation_date": 1509123149, "post_id": 46761775, "comment_id": 80907314, "body": "This is how I&#39;m passing the request, does not work. I did discover the when I run the app everything works as expected but the existing specs are what&#39;s failing."}], "tags": [], "owner": {"reputation": 323, "user_id": 4054684, "user_type": "registered", "accept_rate": 38, "profile_image": "https://lh6.googleusercontent.com/-wjxce8yMONk/AAAAAAAAAAI/AAAAAAAAAgE/xD7t1kCNF4g/photo.jpg?sz=128", "display_name": "sreang rathanak", "link": "https://stackoverflow.com/users/4054684/sreang-rathanak"}, "is_accepted": false, "score": 0, "last_activity_date": 1508129915, "last_edit_date": 1508129915, "creation_date": 1508117297, "answer_id": 46761775, "question_id": 45570669, "link": "https://stackoverflow.com/questions/45570669/unsupported-grant-type-for-password-strategy/46761775#46761775", "title": "Unsupported grant type for password strategy", "body": "<p>Try to pass <code>grant_type</code> with your request.</p>\n\n<pre><code>{\n  grant_type: \"password\",\n  username: \"xxxxxxxxxx\",\n  password: \"1234567890\"\n}\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 8434668, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47dc0ae970770229e3f723e6c8621c72?s=128&d=identicon&r=PG&f=1", "display_name": "Patrick", "link": "https://stackoverflow.com/users/8434668/patrick"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 863, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1509123225, "creation_date": 1502201462, "last_edit_date": 1509123225, "question_id": 45570669, "link": "https://stackoverflow.com/questions/45570669/unsupported-grant-type-for-password-strategy", "title": "Unsupported grant type for password strategy", "body": "<p>Update: This is only happening in my existing specs. I can run the app and authenticate successfully. Did something change in the spec setup between my versions of Doorkeeper?</p>\n\n<p>I have an existing app that has been working and just upgraded to Rails (4.2.6 -> 5.1.3), Ruby (2.3.0 -> 2.4.1), Doorkeeper (1.4.1 -> 4.2.6).</p>\n\n<p>I use the password (ROPC) strategy and cannot get it to work after upgrading. The error returned is:</p>\n\n<pre><code>\"error\":\"unsupported_grant_type\"\n\"error_description\":\"The authorization grant type is not supported by the authorization server.\"\n</code></pre>\n\n<p>My doorkeeper.rb initializer has: <code>grant_flows %w(password)</code></p>\n\n<p>I tried adding <code>Doorkeeper.configuration.token_grant_types &lt;&lt; \"password\"</code> per the wiki.</p>\n\n<p>I can step through the code and can see the <code>password</code> flow being added from <code>grant_flows</code> but when the spec tries to auth it no longer has <code>password</code> and raises the exception.</p>\n\n<p>Any ideas on how I can get this working?</p>\n"}, {"tags": ["ruby", "vagrant", "chef-infra", "chef-recipe", "cookbook"], "answers": [{"tags": [], "owner": {"reputation": 154, "user_id": 7006326, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/d42e82e823e757ef3bb25b4ad78d72e6?s=128&d=identicon&r=PG&f=1", "display_name": "joy ", "link": "https://stackoverflow.com/users/7006326/joy"}, "is_accepted": false, "score": 0, "last_activity_date": 1502199367, "creation_date": 1502199367, "answer_id": 45569881, "question_id": 45569675, "link": "https://stackoverflow.com/questions/45569675/error-resolving-cookbooks-for-runlist-missing-cookbooks-no-such-cookbooks/45569881#45569881", "title": "Error Resolving Cookbooks for runlist: missing cookbooks: No such Cookbooks", "body": "<p>Try with </p>\n\n<pre><code>chef-client -z -o apache\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 25, "user_id": 8387911, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-6upTuqgk2Hs/AAAAAAAAAAI/AAAAAAAAHa0/bdiqAQBLykc/photo.jpg?sz=128", "display_name": "Soumyajit Ray", "link": "https://stackoverflow.com/users/8387911/soumyajit-ray"}, "edited": false, "score": 0, "creation_date": 1502215401, "post_id": 45570422, "comment_id": 78109777, "body": "I dont know if I understood you correctly but, I changed command to  sudo chef-client -z --runlist &#39;apache::server&#39;  and it is working as expected"}], "tags": [], "owner": {"reputation": 30536, "user_id": 400222, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/75febe3a9bd5b1ad9cb63fceccb6aa31?s=128&d=identicon&r=PG", "display_name": "StephenKing", "link": "https://stackoverflow.com/users/400222/stephenking"}, "is_accepted": true, "score": 1, "last_activity_date": 1502200771, "creation_date": 1502200771, "answer_id": 45570422, "question_id": 45569675, "link": "https://stackoverflow.com/questions/45569675/error-resolving-cookbooks-for-runlist-missing-cookbooks-no-such-cookbooks/45570422#45570422", "title": "Error Resolving Cookbooks for runlist: missing cookbooks: No such Cookbooks", "body": "<p>It seems that you have copied that line including typographic (?) quotes. Have a look at the output:</p>\n\n<blockquote>\n  <p>resolving cookbooks for run list: [\"\u201capache::server\u201d\"] </p>\n</blockquote>\n\n<p>So fix those quotes in your shell command:</p>\n\n<pre><code>$ sudo chef-client -z --runlist \"apache::server\"\n</code></pre>\n"}], "owner": {"reputation": 25, "user_id": 8387911, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-6upTuqgk2Hs/AAAAAAAAAAI/AAAAAAAAHa0/bdiqAQBLykc/photo.jpg?sz=128", "display_name": "Soumyajit Ray", "link": "https://stackoverflow.com/users/8387911/soumyajit-ray"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3944, "favorite_count": 0, "accepted_answer_id": 45570422, "answer_count": 2, "score": 1, "last_activity_date": 1530786882, "creation_date": 1502198825, "question_id": 45569675, "link": "https://stackoverflow.com/questions/45569675/error-resolving-cookbooks-for-runlist-missing-cookbooks-no-such-cookbooks", "title": "Error Resolving Cookbooks for runlist: missing cookbooks: No such Cookbooks", "body": "<p>I am learning Chef for the first time. At this point I was trying to run cookbooks instead of single recipe through chef-client. But I am receiving error message saying \"missing cookbooks\". I have tried to debug multiple times, as you can see using tree command, it is clear that there is cookbook named apache. </p>\n\n<p>I tried to run the other cookbook workstation as well, but that gave the same error</p>\n\n<p>Please help. And let me know where I am going wrong.</p>\n\n<pre><code>[vagrant@localhost ~]$ tree\n.\n\u251c\u2500\u2500 cookbooks\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 apache\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 Berksfile\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 chefignore\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 metadata.rb\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 README.md\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 recipes\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 default.rb\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2514\u2500\u2500 server.rb\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 spec\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 spec_helper.rb\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2514\u2500\u2500 unit\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2502\u00a0\u00a0     \u2514\u2500\u2500 recipes\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2502\u00a0\u00a0         \u2514\u2500\u2500 default_spec.rb\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2514\u2500\u2500 test\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0     \u2514\u2500\u2500 recipes\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0         \u2514\u2500\u2500 default_test.rb\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 workstation\n\u2502\u00a0\u00a0     \u251c\u2500\u2500 Berksfile\n\u2502\u00a0\u00a0     \u251c\u2500\u2500 chefignore\n\u2502\u00a0\u00a0     \u251c\u2500\u2500 metadata.rb\n\u2502\u00a0\u00a0     \u251c\u2500\u2500 README.md\n\u2502\u00a0\u00a0     \u251c\u2500\u2500 recipes\n\u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u251c\u2500\u2500 default.rb\n\u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u2514\u2500\u2500 setup.rb\n\u2502\u00a0\u00a0     \u251c\u2500\u2500 spec\n\u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u251c\u2500\u2500 spec_helper.rb\n\u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u2514\u2500\u2500 unit\n\u2502\u00a0\u00a0     \u2502\u00a0\u00a0     \u2514\u2500\u2500 recipes\n\u2502\u00a0\u00a0     \u2502\u00a0\u00a0         \u2514\u2500\u2500 default_spec.rb\n\u2502\u00a0\u00a0     \u2514\u2500\u2500 test\n\u2502\u00a0\u00a0         \u2514\u2500\u2500 recipes\n\u2502\u00a0\u00a0             \u2514\u2500\u2500 default_test.rb\n\u251c\u2500\u2500 generate\n\u251c\u2500\u2500 hello.rb\n\u251c\u2500\u2500 help\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 Berksfile\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 chefignore\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 metadata.rb\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 README.md\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 recipes\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2514\u2500\u2500 default.rb\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 spec\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 spec_helper.rb\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2514\u2500\u2500 unit\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0     \u2514\u2500\u2500 recipes\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0         \u2514\u2500\u2500 default_spec.rb\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 test\n\u2502\u00a0\u00a0     \u2514\u2500\u2500 recipes\n\u2502\u00a0\u00a0         \u2514\u2500\u2500 default_test.rb\n\u2514\u2500\u2500 nodes\n    \u2514\u2500\u2500 localhost.json\n\n24 directories, 28 files\n[vagrant@localhost ~]$ sudo chef-client -z --runlist \u201capache::server\u201d\n[2017-08-08T13:16:05+00:00] WARN: No config file found or specified on command line, using command line options.\nStarting Chef Client, version 12.14.89\nresolving cookbooks for run list: [\"\u201capache::server\u201d\"]\n\n================================================================================\nError Resolving Cookbooks for Run List:\n================================================================================\n\nMissing Cookbooks:\n------------------\nNo such cookbook: \u201capache\n\nExpanded Run List:\n------------------\n* \u201capache::server\u201d\n\nPlatform:\n---------\nx86_64-linux\n\n\nRunning handlers:\n[2017-08-08T13:16:07+00:00] ERROR: Running exception handlers\nRunning handlers complete\n[2017-08-08T13:16:07+00:00] ERROR: Exception handlers complete\nChef Client failed. 0 resources updated in 01 seconds\n[2017-08-08T13:16:07+00:00] FATAL: Stacktrace dumped to /root/.chef/local-mode-cache/cache/chef-stacktrace.out\n[2017-08-08T13:16:07+00:00] FATAL: Please provide the contents of the stacktrace.out file if you file a bug report\n[2017-08-08T13:16:07+00:00] ERROR: 412 \"Precondition Failed\"\n[2017-08-08T13:16:07+00:00] FATAL: Chef::Exceptions::ChildConvergeError: Chef run process exited unsuccessfully (exit code 1)\n[vagrant@localhost ~]$\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 9971, "user_id": 8255744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de22299534b5a8ed244ee8ff4aa6c481?s=128&d=identicon&r=PG&f=1", "display_name": "Simple Lime", "link": "https://stackoverflow.com/users/8255744/simple-lime"}, "edited": false, "score": 0, "creation_date": 1502197144, "post_id": 45568785, "comment_id": 78097237, "body": "Do you have another field in that form that has the name &quot;email&quot;? If <code>params[&#39;email&#39;]</code> is making it that far, and you can see the value in the hidden field when you inspect the page it should be submitted...however, if rails comes across the same name multiple times when parsing, it uses the last one it encounters (exceptions for array parameters)"}, {"owner": {"reputation": 3048, "user_id": 2374626, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/Z78U0.jpg?s=128&g=1", "display_name": "Satishakumar Awati", "link": "https://stackoverflow.com/users/2374626/satishakumar-awati"}, "edited": false, "score": 0, "creation_date": 1502197423, "post_id": 45568785, "comment_id": 78097445, "body": "can you share contents of views/transcation/new.html.erb?"}, {"owner": {"reputation": 685, "user_id": 7458849, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/89kDb.jpg?s=128&g=1", "display_name": "Theopap", "link": "https://stackoverflow.com/users/7458849/theopap"}, "edited": false, "score": 0, "creation_date": 1502198346, "post_id": 45568785, "comment_id": 78098140, "body": "@ Satishakumar Awati please check update 1 for more details!"}, {"owner": {"reputation": 51013, "user_id": 976775, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30bd66ad1795804aebe249d8bcb14409?s=128&d=identicon&r=PG", "display_name": "MrYoshiji", "link": "https://stackoverflow.com/users/976775/mryoshiji"}, "edited": false, "score": 2, "creation_date": 1502198421, "post_id": 45568785, "comment_id": 78098202, "body": "You should not rely on a value of an hidden field tag (which can be easily changed by the end-user) but instead use what you can fetch from your database. As you said, the end-user is asked to sign-up and then redirected to a place where you want to use these hidden_field_tag. Maybe you can use a record, like <code>Plan</code>, to determine what is the price and email values? Because with this code, any end-user can edit the HTML and change the price and/or email of the transaction"}, {"owner": {"reputation": 685, "user_id": 7458849, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/89kDb.jpg?s=128&g=1", "display_name": "Theopap", "link": "https://stackoverflow.com/users/7458849/theopap"}, "reply_to_user": {"reputation": 9971, "user_id": 8255744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de22299534b5a8ed244ee8ff4aa6c481?s=128&d=identicon&r=PG&f=1", "display_name": "Simple Lime", "link": "https://stackoverflow.com/users/8255744/simple-lime"}, "edited": false, "score": 0, "creation_date": 1502198443, "post_id": 45568785, "comment_id": 78098217, "body": "Thanks for the reply @Simple Lime, no I don&#39;t have another email field in that form!! I have upload the views/transcation/new.html.erb... please check update 1 for more details!"}], "answers": [{"comments": [{"owner": {"reputation": 685, "user_id": 7458849, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/89kDb.jpg?s=128&g=1", "display_name": "Theopap", "link": "https://stackoverflow.com/users/7458849/theopap"}, "edited": false, "score": 0, "creation_date": 1502199663, "post_id": 45569248, "comment_id": 78099192, "body": "Thanks for the reply @Yogesh Waghmare... thi first one returns the email test@test.com and if I use the second one<code>&lt;%= hidden_field :email, :value =&gt; @store.email %&gt;</code> it returns <code>undefined method email for nil:NilClass</code>.. both of them without the f."}], "tags": [], "owner": {"reputation": 164, "user_id": 3547800, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5681ac4c589f11207407950f5fcc8075?s=128&d=identicon&r=PG&f=1", "display_name": "Yogesh Waghmare", "link": "https://stackoverflow.com/users/3547800/yogesh-waghmare"}, "is_accepted": false, "score": 3, "last_activity_date": 1502197730, "creation_date": 1502197730, "answer_id": 45569248, "question_id": 45568785, "link": "https://stackoverflow.com/questions/45568785/pass-hidden-field-tag-params-with-rails-5/45569248#45569248", "title": "Pass hidden field tag params with rails 5", "body": "<p>Please set the value of hidden field like:</p>\n\n<pre><code>&lt;%= f.hidden_field :email, :value =&gt; \"test@test.com\" %&gt;\n</code></pre>\n\n<p>or</p>\n\n<pre><code>&lt;%= f.hidden_field :email, :value =&gt; @object.email %&gt;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 685, "user_id": 7458849, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/89kDb.jpg?s=128&g=1", "display_name": "Theopap", "link": "https://stackoverflow.com/users/7458849/theopap"}, "edited": false, "score": 1, "creation_date": 1502198485, "post_id": 45569302, "comment_id": 78098254, "body": "@ Satishakumar Awatii please check update 1 for more details!"}], "tags": [], "owner": {"reputation": 3048, "user_id": 2374626, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/Z78U0.jpg?s=128&g=1", "display_name": "Satishakumar Awati", "link": "https://stackoverflow.com/users/2374626/satishakumar-awati"}, "is_accepted": false, "score": 2, "last_activity_date": 1570887810, "last_edit_date": 1570887810, "creation_date": 1502197848, "answer_id": 45569302, "question_id": 45568785, "link": "https://stackoverflow.com/questions/45568785/pass-hidden-field-tag-params-with-rails-5/45569302#45569302", "title": "Pass hidden field tag params with rails 5", "body": "<p>I hope you have not confused.</p>\n\n<pre><code>&lt;%= hidden_field_tag \"email\", params[:email] %&gt;\n</code></pre>\n\n<p><code>hidden_field_tag</code> used with <a href=\"https://apidock.com/rails/ActionView/Helpers/FormTagHelper/form_tag\" rel=\"nofollow noreferrer\">form_tag</a></p>\n\n<pre><code>&lt;%= f.hidden_field \"email\", params[:email] %&gt;\n</code></pre>\n\n<p>and <code>f.hidden_field</code> is used with <a href=\"https://apidock.com/rails/ActionView/Helpers/FormHelper/form_for\" rel=\"nofollow noreferrer\">form_for</a></p>\n"}], "owner": {"reputation": 685, "user_id": 7458849, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/89kDb.jpg?s=128&g=1", "display_name": "Theopap", "link": "https://stackoverflow.com/users/7458849/theopap"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5893, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1570887810, "creation_date": 1502196387, "last_edit_date": 1502214104, "question_id": 45568785, "link": "https://stackoverflow.com/questions/45568785/pass-hidden-field-tag-params-with-rails-5", "title": "Pass hidden field tag params with rails 5", "body": "<p>From the<code>views/plans/new.html.erb</code> I get the plan_id and price params with the following:</p>\n\n<pre><code>&lt;%= link_to \"Sign up\", new_store_registration_path(:plan_id =&gt; plan.id, :price =&gt; plan.price) %&gt;\n</code></pre>\n\n<p>Then the app redirects to the sign-up page and with the following I keep the previous params and add the email as well: </p>\n\n<p>registrations_controller.rb</p>\n\n<pre><code>def after_sign_up_path_for(resource)\n  new_transaction_path(session[:registration_params].merge(ema\u200c\u200bil: resource.email))\nend\n\ndef after_inactive_sign_up_path_for(resource)\n  new_transaction_path(session[:registration_params].merge(ema\u200c\u200bil: resource.email))\nend\n</code></pre>\n\n<p>Finally after sign-up, the app redirects to the views/transcation/new.html.erb, which has the <code>plan_id</code>, <code>price</code>and <code>email</code> params. </p>\n\n<pre><code>Parameters: {\"ema\u200c\u200bil\"=&gt;\"example@gmail.com\", \"plan_id\"=&gt;\"bs96\", \"price\"=&gt;\"150.0\"}\n</code></pre>\n\n<p>At this point I'm trying to pass the email param to the transaction with <code>&lt;%= hidden_field_tag(:email, params[\"email\"]) %&gt;</code></p>\n\n<p>But not getting an email as you can see in the following: </p>\n\n<pre><code>Parameters: {\"utf8\"=&gt;\"\u2713\", \"authenticity_token\"=&gt;\"KeS2xK7NIJZwFQvW2kJKupcpURnQweq+yoRgk9AJ1aaOgFIIym4RKadI4jc6vYynMo4vKR4eLmdIynfBG+EusQ==\", \"email\"=&gt;\"\", \"plan_id\"=&gt;\"bs96\", \"amount\"=&gt;\"150.0\", \"payment_method_nonce\"=&gt;\"0c22f2fa-e212-0ad3-753b-0d183d02522b\"}\n</code></pre>\n\n<p>Any ideas on what I'm doing wrong???</p>\n\n<p><strong><em>Update1</em></strong></p>\n\n<p>Inside the views/transcation/new.html.erb there is the braintree drop in ui and the script along with the three hidden fields:</p>\n\n<pre><code>&lt;div class=\"form-container radius-box glassy-bg small-10 small-centered medium-8 large-6 columns\"&gt;\n  &lt;%= form_tag transactions_path do%&gt;\n      &lt;div id=\"dropin\"&gt;&lt;/div&gt;\n      &lt;%= hidden_field_tag(:email, params[\"email\"]) %&gt;\n      &lt;%= hidden_field_tag(:plan_id, params[\"plan_id\"]) %&gt;\n      &lt;%= hidden_field_tag(:amount, params[\"price\"]) %&gt;\n      &lt;%=submit_tag \"Pay #{params[\"price\"]}$\", class: \"button mt1\" %&gt;\n  &lt;%end%&gt;\n&lt;/div&gt;\n\n&lt;script&gt;\n    braintree.setup(\"&lt;%=@client_token%&gt;\", 'dropin', {\n        container: 'dropin'\n    });\n&lt;/script&gt;\n</code></pre>\n"}, {"tags": ["ruby", "localization", "timezone", "tzinfo"], "comments": [{"owner": {"reputation": 1253974, "user_id": 22656, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/6d8ebb117e8d83d74ea95fbdd0f87e13?s=128&d=identicon&r=PG", "display_name": "Jon Skeet", "link": "https://stackoverflow.com/users/22656/jon-skeet"}, "edited": false, "score": 1, "creation_date": 1502195781, "post_id": 45568483, "comment_id": 78096250, "body": "What are you trying to do with that information? I can imagine a situation where a time zone ID is shared between multiple countries. (I don&#39;t know if that&#39;s actually the case at the moment, but it might be for at least a while if a country splits in two, for example.)"}, {"owner": {"reputation": 17424, "user_id": 278842, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/df6877d3f05e542ca5975b4670600f2e?s=128&d=identicon&r=PG", "display_name": "Christopher Oezbek", "link": "https://stackoverflow.com/users/278842/christopher-oezbek"}, "reply_to_user": {"reputation": 1253974, "user_id": 22656, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/6d8ebb117e8d83d74ea95fbdd0f87e13?s=128&d=identicon&r=PG", "display_name": "Jon Skeet", "link": "https://stackoverflow.com/users/22656/jon-skeet"}, "edited": false, "score": 0, "creation_date": 1502197259, "post_id": 45568483, "comment_id": 78097326, "body": "Purely for information. Everyone knows where New_York is, but America/Bahia_Banderas?"}, {"owner": {"reputation": 195413, "user_id": 634824, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/889cf720c96957e615463b5c903a5e18?s=128&d=identicon&r=PG", "display_name": "Matt Johnson-Pint", "link": "https://stackoverflow.com/users/634824/matt-johnson-pint"}, "edited": false, "score": 1, "creation_date": 1502205497, "post_id": 45568483, "comment_id": 78103740, "body": "<a href=\"https://github.com/eggert/tz/blob/master/zone.tab\" rel=\"nofollow noreferrer\">github.com/eggert/tz/blob/master/zone.tab</a>"}], "answers": [{"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user7605325"}, "is_accepted": true, "score": 2, "last_activity_date": 1502199171, "last_edit_date": 1502199171, "creation_date": 1502198868, "answer_id": 45569692, "question_id": 45568483, "link": "https://stackoverflow.com/questions/45568483/get-country-from-tzinfo-timezone/45569692#45569692", "title": "Get Country from tzInfo TimeZone?", "body": "<p>I'm not sure if there's a direct way, but you can use the <a href=\"http://www.rubydoc.info/gems/tzinfo/TZInfo/Country\" rel=\"nofollow noreferrer\"><code>Country</code> class</a> to build a hash that maps zone names to country names.</p>\n\n<p>You can loop through the countries (using <code>all</code> method) and get the zone identifiers for each country (using <code>zone_identifiers</code> method) to build the hash.</p>\n\n<p>I don't code in Ruby very often, so probably it's not the best Ruby-style code, but it's something like this:</p>\n\n<pre><code># map zones to countries\nztc = {}\n\nTZInfo::Country.all().each do |c|\n  c.zone_identifiers.each do |z|\n    ztc[z] = [] unless ztc.has_key?(z)\n    ztc[z].push(c.name)\n  end\nend\n</code></pre>\n\n<p><code>ztc</code> will contain the zone names as keys, and an array of the respective country names as values. In my machine, I've got:</p>\n\n<pre><code>{\"Europe/Andorra\"=&gt;[\"Andorra\"],\n \"Asia/Dubai\"=&gt;[\"United Arab Emirates\", \"Oman\"],\n \"Asia/Kabul\"=&gt;[\"Afghanistan\"],\n \"America/Port_of_Spain\"=&gt;[\"Antigua &amp; Barbuda\", \"Anguilla\", \"St Barthelemy\", \"Dominica\",\n                           \"Grenada\", \"Guadeloupe\", \"St Kitts &amp; Nevis\", \"St Lucia\",\n                           \"St Martin (French)\", \"Montserrat\", \"Trinidad &amp; Tobago\",\n                           \"St Vincent\", \"Virgin Islands (UK)\", \"Virgin Islands (US)\"],\n  ....\n</code></pre>\n\n<p>Just reminding that it'll contain only timezones that are associated with countries (the ones with the format <code>Region/City</code>, like <code>Europe/London</code> or <code>America/New_York</code>). So names like <code>GMT</code> or <code>Etc/GMT+1</code> won't be in that list.</p>\n"}, {"tags": [], "owner": {"reputation": 17424, "user_id": 278842, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/df6877d3f05e542ca5975b4670600f2e?s=128&d=identicon&r=PG", "display_name": "Christopher Oezbek", "link": "https://stackoverflow.com/users/278842/christopher-oezbek"}, "is_accepted": false, "score": 1, "last_activity_date": 1502226080, "creation_date": 1502226080, "answer_id": 45577945, "question_id": 45568483, "link": "https://stackoverflow.com/questions/45568483/get-country-from-tzinfo-timezone/45577945#45577945", "title": "Get Country from tzInfo TimeZone?", "body": "<p>Based on @Hugo's answer, a short extension to <code>class Timezone</code>:</p>\n\n<pre><code>module TZInfo\n\nclass Timezone\n\n    def countries\n        return Timezone::country_map[self.name] || []\n    end\n\n    @@countryMap = nil\n\n    def self.country_map\n        if @@countryMap.nil?\n          @@countryMap = {}\n\n            TZInfo::Country.all().each do |c|\n                c.zone_identifiers.each do |z|\n                    @@countryMap[z] ||= [] \n                    @@countryMap[z] &lt;&lt; c.name\n                end\n            end\n        end\n        return @@countryMap\n    end\n\nend\n\nend\n</code></pre>\n"}], "owner": {"reputation": 17424, "user_id": 278842, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/df6877d3f05e542ca5975b4670600f2e?s=128&d=identicon&r=PG", "display_name": "Christopher Oezbek", "link": "https://stackoverflow.com/users/278842/christopher-oezbek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 736, "favorite_count": 0, "accepted_answer_id": 45569692, "answer_count": 2, "score": 2, "last_activity_date": 1502226080, "creation_date": 1502195549, "last_edit_date": 1502198878, "question_id": 45568483, "link": "https://stackoverflow.com/questions/45568483/get-country-from-tzinfo-timezone", "title": "Get Country from tzInfo TimeZone?", "body": "<p>Given a tzInfo <code>TimeZone</code> object such as <code>'America/New_York</code>' how can I get the associated country (countries?) that would use the time zone with this identifier?</p>\n\n<p>The instance methods don't link back to countries:</p>\n\n<p><a href=\"http://www.rubydoc.info/gems/tzinfo/TZInfo/Timezone\" rel=\"nofollow noreferrer\">http://www.rubydoc.info/gems/tzinfo/TZInfo/Timezone</a></p>\n\n<p>My problem description:</p>\n\n<ul>\n<li>I receive scientific datasets produced in a certain timezone given with the long zone identifier (fortunately!). These datasets were not stored with geolocalization turned on, so the timezone is a first identifier where data was produced.</li>\n<li>Turning the timezone into friendly identifiers is a first step to understand their origin, but many zone names are quite esoteric (America/Menominee?), so it would be great to do the reverse look-up from timezone to list of countries that support that zone.</li>\n</ul>\n"}, {"tags": ["ruby-on-rails", "json", "ruby"], "comments": [{"owner": {"reputation": 9659, "user_id": 6136634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7487290ff90aebf6848d9c638c067bb?s=128&d=identicon&r=PG", "display_name": "Gerry", "link": "https://stackoverflow.com/users/6136634/gerry"}, "edited": false, "score": 0, "creation_date": 1502198021, "post_id": 45567400, "comment_id": 78097872, "body": "Can you include the complete log/error message? With the provided examples <a href=\"https://stackoverflow.com/a/45567464/6136634\">Ursus answer</a> works fine (you can see it in action <a href=\"https://repl.it/KB2T/0\" rel=\"nofollow noreferrer\">here</a>), so maybe you are getting different outputs in the <code>@something</code> variables."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "reply_to_user": {"reputation": 9659, "user_id": 6136634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7487290ff90aebf6848d9c638c067bb?s=128&d=identicon&r=PG", "display_name": "Gerry", "link": "https://stackoverflow.com/users/6136634/gerry"}, "edited": false, "score": 0, "creation_date": 1502203463, "post_id": 45567400, "comment_id": 78102204, "body": "@Gerry while that example is nice (and functional) maybe we should be clear that the <b>output</b> in the question is inaccurate. JSON is a <code>String</code> and thus the correct output for the first example is actually <code>&quot;[{\\&quot;a\\&quot;:\\&quot;val1\\&quot;}]&quot;</code>. <code>String</code> does not have a <code>merge</code> method which would have been more obvious had the OP posted the full message. e.g. <code>undefined method merge! for &quot;[{\\&quot;a\\&quot;:\\&quot;val1\\&quot;}]&quot;:String</code>   <i>editted question for correct output</i>"}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "reply_to_user": {"reputation": 9659, "user_id": 6136634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7487290ff90aebf6848d9c638c067bb?s=128&d=identicon&r=PG", "display_name": "Gerry", "link": "https://stackoverflow.com/users/6136634/gerry"}, "edited": false, "score": 0, "creation_date": 1502204077, "post_id": 45567400, "comment_id": 78102712, "body": "@Khoga remove the <code>to_json</code> calls from the first 2 and add it to the end of the merge chain. See <a href=\"https://repl.it/KB2T/2\" rel=\"nofollow noreferrer\">Updated version of @Gerry&#39;s repl</a>"}, {"owner": {"reputation": 9659, "user_id": 6136634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7487290ff90aebf6848d9c638c067bb?s=128&d=identicon&r=PG", "display_name": "Gerry", "link": "https://stackoverflow.com/users/6136634/gerry"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1502204924, "post_id": 45567400, "comment_id": 78103371, "body": "@engineersmnky You are right, i completely missed (ignored?) the <code>to_json</code>, so now it makes sense. Thank you for claryfing it."}, {"owner": {"reputation": 9659, "user_id": 6136634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7487290ff90aebf6848d9c638c067bb?s=128&d=identicon&r=PG", "display_name": "Gerry", "link": "https://stackoverflow.com/users/6136634/gerry"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1502205352, "post_id": 45567400, "comment_id": 78103648, "body": "@engineersmnky Maybe you should add an answer, yours is the correct solution."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "reply_to_user": {"reputation": 9659, "user_id": 6136634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7487290ff90aebf6848d9c638c067bb?s=128&d=identicon&r=PG", "display_name": "Gerry", "link": "https://stackoverflow.com/users/6136634/gerry"}, "edited": false, "score": 0, "creation_date": 1502206379, "post_id": 45567400, "comment_id": 78104362, "body": "@Gerry very well seems there might be other rails issues anyway"}], "answers": [{"comments": [{"owner": {"reputation": 757, "user_id": 5214008, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/31fcb199e9fd810115293efb5aca9b53?s=128&d=identicon&r=PG&f=1", "display_name": "Khoga", "link": "https://stackoverflow.com/users/5214008/khoga"}, "edited": false, "score": 0, "creation_date": 1502194697, "post_id": 45567464, "comment_id": 78095321, "body": "I have updated my question. Please let me know if you need more info."}], "tags": [], "owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "is_accepted": false, "score": 2, "last_activity_date": 1502192693, "creation_date": 1502192693, "answer_id": 45567464, "question_id": 45567400, "link": "https://stackoverflow.com/questions/45567400/merging-json-array-with-object-rails-4-ruby/45567464#45567464", "title": "merging JSON Array with object - Rails 4- Ruby", "body": "<p>With no more information this seems enough</p>\n\n<pre><code>@something1[0].merge(@something2[0]).merge(@something3)\n{\n    :a =&gt; \"val1\",\n    :b =&gt; \"val2\",\n    :c =&gt; \"val3\",\n    :d =&gt; \" val4\"\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2090, "user_id": 5113690, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/cbKBX.png?s=128&g=1", "display_name": "m3characters", "link": "https://stackoverflow.com/users/5113690/m3characters"}, "is_accepted": false, "score": 1, "last_activity_date": 1502194500, "creation_date": 1502194500, "answer_id": 45568094, "question_id": 45567400, "link": "https://stackoverflow.com/questions/45567400/merging-json-array-with-object-rails-4-ruby/45568094#45568094", "title": "merging JSON Array with object - Rails 4- Ruby", "body": "<p>You can create a function like:</p>\n\n<pre><code>def mergejson(*args)\n  merged = {}\n  args.each do |a|\n    merged.merge!(a.is_a?(Hash) ? a : a.first)\n    # or use .deep_merge! if the hashes can contain nested hashes\n  end\n  return merged\nend\n\nirb(main):025:0&gt; test = mergejson(something1, something2, something3)\n=&gt; {:a=&gt;\"val1\", :b=&gt;\"val2\", :c=&gt;\"val3\", :d=&gt;\"val4\"}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 9659, "user_id": 6136634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7487290ff90aebf6848d9c638c067bb?s=128&d=identicon&r=PG", "display_name": "Gerry", "link": "https://stackoverflow.com/users/6136634/gerry"}, "edited": false, "score": 0, "creation_date": 1502195487, "post_id": 45568144, "comment_id": 78096011, "body": "This is pretty much the same answer as the <a href=\"https://stackoverflow.com/a/45567464/6136634\">one provided by Ursus</a>."}], "tags": [], "owner": {"reputation": 441, "user_id": 4311450, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zIfYt.gif?s=128&g=1", "display_name": "Evan", "link": "https://stackoverflow.com/users/4311450/evan"}, "is_accepted": false, "score": 0, "last_activity_date": 1502194633, "creation_date": 1502194633, "answer_id": 45568144, "question_id": 45567400, "link": "https://stackoverflow.com/questions/45567400/merging-json-array-with-object-rails-4-ruby/45568144#45568144", "title": "merging JSON Array with object - Rails 4- Ruby", "body": "<p>Also worked by:</p>\n\n<pre><code>@something1.first.merge(@something2.first).merge(@something3)\n\n#=&gt;{:a =&gt; \"val1\",:b =&gt; \"val2\",:c =&gt; \"val3\",:d =&gt; \" val4\"}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "is_accepted": true, "score": 1, "last_activity_date": 1502206361, "creation_date": 1502206361, "answer_id": 45572462, "question_id": 45567400, "link": "https://stackoverflow.com/questions/45567400/merging-json-array-with-object-rails-4-ruby/45572462#45572462", "title": "merging JSON Array with object - Rails 4- Ruby", "body": "<p>Your problem here is that JSON is a <code>String</code> thus </p>\n\n<pre><code>@something1 =   book.find().to_json\n#=&gt; \"[{\\\"a\\\": \\\"val1\\\"}]\"\n</code></pre>\n\n<p>This will make it far more difficult to deal with when trying to \"merge\" them together. </p>\n\n<p>The error you are receiving is because <code>String</code> does not have a <code>merge</code> method (Next time please post the full error or at least the object reference) e.g. <code>undefined method merge! for \"[{\\\"a\\\":\\\"val1\\\"}]\":String</code> </p>\n\n<p>Luckily the fix is extremely simple just remove <code>to_json</code> from the original 2 calls as such </p>\n\n<pre><code>require 'json'\n\n@something1 = [{\"a\": \"val1\"}] # no to_json\n@something2 = [{\"b\": \"val2\"}] # no to_json\n@something3 = { \"c\": \"val3\", \"d\": \" val4\" } # no to_json\n\n@something1[0].merge(@something2[0]).merge(@something3).to_json\n#=&gt; \"{\\\"a\\\":\\\"val1\\\",\\\"b\\\":\\\"val2\\\",\\\"c\\\":\\\"val3\\\",\\\"d\\\":\\\" val4\\\"}\"\n</code></pre>\n\n<p>See <a href=\"https://repl.it/KB2T/2\" rel=\"nofollow noreferrer\">Example</a> (based on @Gerry's original commented example)</p>\n\n<p>Since this appears rails like we can probably simplify this whole process if we understood the relation ship between <code>Book</code>, <code>Author</code> and <code>Publication</code> eg. </p>\n\n<pre><code>Book.find().to_json(include: [:author,:publications]) \n# Or \nBook.find().to_json(include: [{author: {only: :name}},:publications])\n</code></pre>\n\n<p>This will avoid the need to merge as I fear the original example might actually need to be </p>\n\n<pre><code>@something1 =   book.find()\n@something2 =   book.author\n@something3 =   book.publications\n\n@something1.attributes.merge({author: @something2.attributes,\n    publications: @something3.map(&amp;:attributes)}).to_json\n</code></pre>\n"}], "owner": {"reputation": 757, "user_id": 5214008, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/31fcb199e9fd810115293efb5aca9b53?s=128&d=identicon&r=PG&f=1", "display_name": "Khoga", "link": "https://stackoverflow.com/users/5214008/khoga"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 695, "favorite_count": 0, "accepted_answer_id": 45572462, "answer_count": 4, "score": 0, "last_activity_date": 1502206361, "creation_date": 1502192496, "last_edit_date": 1502203505, "question_id": 45567400, "link": "https://stackoverflow.com/questions/45567400/merging-json-array-with-object-rails-4-ruby", "title": "merging JSON Array with object - Rails 4- Ruby", "body": "<p>I am using Rails 4 and got following JSON output from different sources</p>\n\n<p><strong>source1</strong></p>\n\n<pre><code>@something1 =   book.find().to_json\n</code></pre>\n\n<p>output</p>\n\n<pre><code>\"[{\\\"a\\\": \\\"val1\\\"}]\"\n</code></pre>\n\n<p><strong>source2</strong></p>\n\n<pre><code>@something2 =   Author.where(title: :autitle).pluck(:val2).to_json\n</code></pre>\n\n<p>Output</p>\n\n<pre><code>\"[{\\\"b\\\": \\\"val2\\\"}]\"\n</code></pre>\n\n<p><strong>source 3</strong></p>\n\n<pre><code>@something3 = Publications.find_by_pub_id(id)\n</code></pre>\n\n<p>Output</p>\n\n<pre><code>{ \n  \"c\":\"val3\",\n  \"d\":\" val4\"\n}\n</code></pre>\n\n<p>I want the final output like</p>\n\n<pre><code>{\n  \"a\": \"val1\",\n  \"b\": \"val2\",\n  \"c\":\"val3\",\n  \"d\":\" val4\"\n}\n</code></pre>\n\n<p>I have used merge like </p>\n\n<pre><code>@newval= @something1[0].merge(@something2[0]).merge(@something3)\n</code></pre>\n\n<p>But, it gives error</p>\n\n<blockquote>\n  <p>undefined method merge!</p>\n</blockquote>\n\n<p>Those variables are inside index method like</p>\n\n<pre><code>class Test controller &lt; api::controller\n  def index\n   @something1 = ..\n   @something2 = ..\n   @something3 = ..\n  end\nend\n</code></pre>\n\n<p>Hope it is clear.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "phantomjs", "capybara"], "comments": [{"owner": {"reputation": 18203, "user_id": 100731, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/056c32203f8017f075ac060069823b66?s=128&d=identicon&r=PG", "display_name": "phoet", "link": "https://stackoverflow.com/users/100731/phoet"}, "edited": false, "score": 0, "creation_date": 1502198660, "post_id": 45567333, "comment_id": 78098399, "body": "are you using bundler? did you add it to your Gemfile?"}, {"owner": {"reputation": 201, "user_id": 6948716, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/57b79e3a77151943a2e0b41b603c38c7?s=128&d=identicon&r=PG&f=1", "display_name": "vladimirProp", "link": "https://stackoverflow.com/users/6948716/vladimirprop"}, "reply_to_user": {"reputation": 18203, "user_id": 100731, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/056c32203f8017f075ac060069823b66?s=128&d=identicon&r=PG", "display_name": "phoet", "link": "https://stackoverflow.com/users/100731/phoet"}, "edited": false, "score": 0, "creation_date": 1502199368, "post_id": 45567333, "comment_id": 78098949, "body": "tried bundle update phantomjs but Could not find gem &#39;phantomjs&#39;"}], "answers": [{"tags": [], "owner": {"reputation": 201, "user_id": 6948716, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/57b79e3a77151943a2e0b41b603c38c7?s=128&d=identicon&r=PG&f=1", "display_name": "vladimirProp", "link": "https://stackoverflow.com/users/6948716/vladimirprop"}, "is_accepted": false, "score": 0, "last_activity_date": 1502286939, "creation_date": 1502286939, "answer_id": 45592784, "question_id": 45567333, "link": "https://stackoverflow.com/questions/45567333/phantomjs-not-found/45592784#45592784", "title": "PhantomJS not found", "body": "<p>Solution was in adding phantom js in gem file</p>\n\n<pre><code>group(:test) do\n  gem 'phantomjs'\n  gem 'test-unit'\n  gem 'cucumber'\n  gem 'capybara'\n  gem 'rspec'\n  gem 'rest-client'\n  gem \"selenium-webdriver\"\n  gem 'poltergeist'\n  gem \"nokogiri\", \"~&gt; 1.6.1\"\n  gem \"json\", \"~&gt; 1.8.1\"\n  gem \"capybara-angular\"\nend\n</code></pre>\n"}], "owner": {"reputation": 201, "user_id": 6948716, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/57b79e3a77151943a2e0b41b603c38c7?s=128&d=identicon&r=PG&f=1", "display_name": "vladimirProp", "link": "https://stackoverflow.com/users/6948716/vladimirprop"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 501, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1502286939, "creation_date": 1502192312, "question_id": 45567333, "link": "https://stackoverflow.com/questions/45567333/phantomjs-not-found", "title": "PhantomJS not found", "body": "<p>Hello i am trying to update phantomJS, for my Capybara testing. This is on my vagrant env.\nmy current version is</p>\n\n<p>1.9.2</p>\n\n<p>tried to update with</p>\n\n<pre><code>sudo npm -g install phantomjs-prebuilt\n</code></pre>\n\n<p>but when i type</p>\n\n<pre><code>phantomjs -v\ngot same 1.9.2\n</code></pre>\n\n<p>then i tried to install gem for ruby</p>\n\n<pre><code>gem install phantomjs\n</code></pre>\n\n<p>and and into env.rb file</p>\n\n<pre><code>require 'phantomjs'\n</code></pre>\n\n<p>but when i start tests got error</p>\n\n<pre><code>cannot load such file -- phantomjs (LoadError)\n</code></pre>\n\n<p>Can anyone explain to me how this works, i am totally new to this. Any help is appreciated.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec", "algolia"], "comments": [{"owner": {"reputation": 1586, "user_id": 1798644, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Rr1jq.jpg?s=128&g=1", "display_name": "MatayoshiMariano", "link": "https://stackoverflow.com/users/1798644/matayoshimariano"}, "edited": false, "score": 0, "creation_date": 1502195562, "post_id": 45567247, "comment_id": 78096080, "body": "mmhan, it could be probably due to the configuration. Algolia indexing is working in development? And what are you trying to test?"}, {"owner": {"reputation": 18203, "user_id": 100731, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/056c32203f8017f075ac060069823b66?s=128&d=identicon&r=PG", "display_name": "phoet", "link": "https://stackoverflow.com/users/100731/phoet"}, "edited": false, "score": 0, "creation_date": 1502198720, "post_id": 45567247, "comment_id": 78098450, "body": "you are trying to talk to servers that are not reachable through you network <code>getaddrinfo: nodename nor servname provided, or not known (XXX.algolia.net:443), getaddrinfo: nodename nor servname provided</code>"}, {"owner": {"reputation": 733, "user_id": 76989, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/6f99d1a752c3b79c813042618880825e?s=128&d=identicon&r=PG", "display_name": "mmhan", "link": "https://stackoverflow.com/users/76989/mmhan"}, "reply_to_user": {"reputation": 1586, "user_id": 1798644, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Rr1jq.jpg?s=128&g=1", "display_name": "MatayoshiMariano", "link": "https://stackoverflow.com/users/1798644/matayoshimariano"}, "edited": false, "score": 0, "creation_date": 1502218083, "post_id": 45567247, "comment_id": 78111213, "body": "@MatayoshiMariano Algolia&#39;s indexing is disabled for test environment, and thus the test cases were working before the upgrade. The only change that broke the build was the upgrade."}, {"owner": {"reputation": 733, "user_id": 76989, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/6f99d1a752c3b79c813042618880825e?s=128&d=identicon&r=PG", "display_name": "mmhan", "link": "https://stackoverflow.com/users/76989/mmhan"}, "reply_to_user": {"reputation": 18203, "user_id": 100731, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/056c32203f8017f075ac060069823b66?s=128&d=identicon&r=PG", "display_name": "phoet", "link": "https://stackoverflow.com/users/100731/phoet"}, "edited": false, "score": 0, "creation_date": 1502218130, "post_id": 45567247, "comment_id": 78111235, "body": "@phoet Your comment is still not helpful. Algolia is trying to connect to its server even when indexing is explicitly disabled."}, {"owner": {"reputation": 1586, "user_id": 1798644, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Rr1jq.jpg?s=128&g=1", "display_name": "MatayoshiMariano", "link": "https://stackoverflow.com/users/1798644/matayoshimariano"}, "edited": false, "score": 1, "creation_date": 1502218305, "post_id": 45567247, "comment_id": 78111327, "body": "@mmhan did you do <a href=\"https://github.com/algolia/algoliasearch-rails#testing\" rel=\"nofollow noreferrer\">this</a>?"}], "answers": [{"comments": [{"owner": {"reputation": 733, "user_id": 76989, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/6f99d1a752c3b79c813042618880825e?s=128&d=identicon&r=PG", "display_name": "mmhan", "link": "https://stackoverflow.com/users/76989/mmhan"}, "edited": false, "score": 0, "creation_date": 1502444008, "post_id": 45607220, "comment_id": 78222488, "body": "I&#39;ll stop duplicating my comments here. Since we are already talking to each other on github @redox"}], "tags": [], "owner": {"reputation": 4269, "user_id": 2950067, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae00b72eace77983bdf57476141340dc?s=128&d=identicon&r=PG", "display_name": "redox", "link": "https://stackoverflow.com/users/2950067/redox"}, "is_accepted": false, "score": 0, "last_activity_date": 1502350291, "creation_date": 1502350291, "answer_id": 45607220, "question_id": 45567247, "link": "https://stackoverflow.com/questions/45567247/algoliaalgoliaprotocolerror-in-rspec-after-gem-upgrade/45607220#45607220", "title": "Algolia::AlgoliaProtocolError in rspec after gem upgrade", "body": "<p>From what I understand, you've set <code>XXX</code> as the your Algolia ApplicationID because you're running tests and you don't want them to call the actual API. Unfortunately, looks like the gem is trying to call the API and therefore tries to contact <code>XXX.algolia.net</code> -> which is unreachable...</p>\n\n<p>Are you mocking the calls (using WebMock) or disabling the indexing through the <code>algoliasearch</code> block? Could you tell us more about how you're \"disabling\" the Algolia indexing in your tests?</p>\n"}], "owner": {"reputation": 733, "user_id": 76989, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/6f99d1a752c3b79c813042618880825e?s=128&d=identicon&r=PG", "display_name": "mmhan", "link": "https://stackoverflow.com/users/76989/mmhan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 243, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1502350291, "creation_date": 1502192098, "question_id": 45567247, "link": "https://stackoverflow.com/questions/45567247/algoliaalgoliaprotocolerror-in-rspec-after-gem-upgrade", "title": "Algolia::AlgoliaProtocolError in rspec after gem upgrade", "body": "<p>I started receiving Algolia::AlgoliaProtocolError after upgrading from 1.17.0 to 1.19.1 </p>\n\n<p>Full stack trace is below. </p>\n\n<pre><code> Failure/Error: @listing = FactoryGirl.create :used_car_listing, user_id: another_user.id\n\n Algolia::AlgoliaProtocolError:\n   Cannot reach any host: getaddrinfo: nodename nor servname provided, or not known (XXX.algolia.net:443), getaddrinfo: nodename nor servname provided, or not known (XXX-3.algolianet.com:443), getaddrinfo: nodename nor servname provided, or not known (XXX-1.algolianet.com:443), getaddrinfo: nodename nor servname provided, or not known (XXX-2.algolianet.com:443)\n # /Users/****/.rvm/gems/ruby-2.1.10@****/gems/algoliasearch-1.12.7/lib/algolia/client.rb:365:in `request'\n # /Users/****/.rvm/gems/ruby-2.1.10@****/gems/algoliasearch-1.12.7/lib/algolia/client.rb:377:in `put'\n # /Users/****/.rvm/gems/ruby-2.1.10@****/gems/algoliasearch-1.12.7/lib/algolia/index.rb:431:in `set_settings'\n # /Users/****/.rvm/gems/ruby-2.1.10@****/gems/algoliasearch-rails-1.19.1/lib/algoliasearch-rails.rb:292:in `block (3 levels) in &lt;class:SafeIndex&gt;'\n # /Users/****/.rvm/gems/ruby-2.1.10@****/gems/algoliasearch-rails-1.19.1/lib/algoliasearch-rails.rb:327:in `log_or_throw'\n # /Users/****/.rvm/gems/ruby-2.1.10@****/gems/algoliasearch-rails-1.19.1/lib/algoliasearch-rails.rb:291:in `block (2 levels) in &lt;class:SafeIndex&gt;'\n # /Users/****/.rvm/gems/ruby-2.1.10@****/gems/algoliasearch-rails-1.19.1/lib/algoliasearch-rails.rb:750:in `algolia_ensure_init'\n # /Users/****/.rvm/gems/ruby-2.1.10@****/gems/algoliasearch-rails-1.19.1/lib/algoliasearch-rails.rb:552:in `block in algolia_index!'\n # /Users/****/.rvm/gems/ruby-2.1.10@****/gems/algoliasearch-rails-1.19.1/lib/algoliasearch-rails.rb:549:in `each'\n # /Users/****/.rvm/gems/ruby-2.1.10@****/gems/algoliasearch-rails-1.19.1/lib/algoliasearch-rails.rb:549:in `algolia_index!'\n # /Users/****/.rvm/gems/ruby-2.1.10@****/gems/algoliasearch-rails-1.19.1/lib/algoliasearch-rails.rb:893:in `algolia_index!'\n # /Users/****/.rvm/gems/ruby-2.1.10@****/gems/algoliasearch-rails-1.19.1/lib/algoliasearch-rails.rb:912:in `algolia_enqueue_index!'\n # /Users/****/.rvm/gems/ruby-2.1.10@****/gems/algoliasearch-rails-1.19.1/lib/algoliasearch-rails.rb:942:in `algolia_perform_index_tasks'\n # ### REMOVED FOR BREVITY\n # /Users/****/.rvm/gems/ruby-2.1.10@****/gems/factory_girl-4.5.0/lib/factory_girl/strategy_syntax_method_registrar.rb:20:in `block in define_singular_strategy_method'\n # ./spec/controllers/api/v1/images_controller_spec.rb:10:in `block (3 levels) in &lt;top (required)&gt;'\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-2", "reset-password"], "answers": [{"tags": [], "owner": {"reputation": 142, "user_id": 5383541, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/8d305c3c988b557a44fd17ec664420e9?s=128&d=identicon&r=PG&f=1", "display_name": "Pankaj", "link": "https://stackoverflow.com/users/5383541/pankaj"}, "is_accepted": true, "score": 1, "last_activity_date": 1502341852, "creation_date": 1502341852, "answer_id": 45604940, "question_id": 45566940, "link": "https://stackoverflow.com/questions/45566940/change-reset-password-url-in-rails-2/45604940#45604940", "title": "Change Reset password url in Rails 2", "body": "<p>Add the below code in  </p>\n\n<blockquote>\n  <p>Application_controller</p>\n</blockquote>\n\n<p>def url_email_reset_password</p>\n\n<pre><code> ActionMailer::Base.default_url_options[:host] pointing to localhost:3000\n</code></pre>\n\n<p>end</p>\n"}], "owner": {"reputation": 162, "user_id": 8397782, "user_type": "registered", "accept_rate": 25, "profile_image": "https://lh3.googleusercontent.com/-WLDKa6wvBgE/AAAAAAAAAAI/AAAAAAAAA9s/kGyIlC3iKyw/photo.jpg?sz=128", "display_name": "Ronak Bhatt", "link": "https://stackoverflow.com/users/8397782/ronak-bhatt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 148, "favorite_count": 0, "accepted_answer_id": 45604940, "answer_count": 1, "score": 0, "last_activity_date": 1502341852, "creation_date": 1502191172, "question_id": 45566940, "link": "https://stackoverflow.com/questions/45566940/change-reset-password-url-in-rails-2", "title": "Change Reset password url in Rails 2", "body": "<p>Rails:2.3.7\nRuby:1.8.7\nI want to change reset password URL. I set default URL in development.RB but it shows localhost.</p>\n\n<pre><code>  def create\n    @user = User.find_by_email(params[:email])\n    if @user\n      @user.deliver_perishable_email!(:password_reset_instructions)\n      flash[:notice] = \"Check your email for password reset instructions.\"\n      redirect_to root_url\n    else\n      flash[:notice] = \"No user was found with that email address.\"\n      render :action =&gt; :new\n    end\n  end\n</code></pre>\n\n<p>Development.rb</p>\n\n<pre><code>config.action_mailer.default_url_options = { :host =&gt; \"http://*****.com\" }\n</code></pre>\n\n<p>O/p</p>\n\n<pre><code>    Date: Tue, 8 Aug 2017 16:50:25 +0530\nTo: ronakbhatt@yopmail.com\nSubject: Your [Pyromaniac] password reset instructions\nMime-Version: 1.0\nContent-Type: text/plain; charset=utf-8\n\nA request to reset your password has been made. If you did not make this request, simply ignore this email. If you did make this request just click the link below:\n\n\nhttp://localhost:3000/password_resets/NgaNMcvuJ_2D1Ol4nF4A/edit\n\n\nIf the above URL does not work try copying and pasting it into your browser. If you continue to have the problem, please feel free to contact us.\n</code></pre>\n"}, {"tags": ["ruby", "chef-infra"], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 2591059, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24de205107d688e75d11e681571646c6?s=128&d=identicon&r=PG", "display_name": "Mohammed R", "link": "https://stackoverflow.com/users/2591059/mohammed-r"}, "edited": false, "score": 0, "creation_date": 1502263091, "post_id": 45571866, "comment_id": 78126944, "body": "My goal is to copy binaries from one directory to another, let&#39;s say release server to a node being managed by Chef Server, or between two directories on the same node. Note: I&#39;m hard coding paths just for the sake of testing."}, {"owner": {"reputation": 30536, "user_id": 400222, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/75febe3a9bd5b1ad9cb63fceccb6aa31?s=128&d=identicon&r=PG", "display_name": "StephenKing", "link": "https://stackoverflow.com/users/400222/stephenking"}, "reply_to_user": {"reputation": 1, "user_id": 2591059, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24de205107d688e75d11e681571646c6?s=128&d=identicon&r=PG", "display_name": "Mohammed R", "link": "https://stackoverflow.com/users/2591059/mohammed-r"}, "edited": false, "score": 0, "creation_date": 1502266714, "post_id": 45571866, "comment_id": 78129313, "body": "What, from a remote server or locally? That&#39;s a difference (in the chef implementation). As long as the release server serves them via HTTP, use the <code>remote_file</code> resource."}, {"owner": {"reputation": 1, "user_id": 2591059, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24de205107d688e75d11e681571646c6?s=128&d=identicon&r=PG", "display_name": "Mohammed R", "link": "https://stackoverflow.com/users/2591059/mohammed-r"}, "edited": false, "score": 0, "creation_date": 1502271080, "post_id": 45571866, "comment_id": 78132335, "body": "Currently all our servers are available in our LAN. There are instances that we would like to copy binaries within the same server, and sometimes between two different servers in the same LAN. Nothing is being copied to the cloud."}, {"owner": {"reputation": 30536, "user_id": 400222, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/75febe3a9bd5b1ad9cb63fceccb6aa31?s=128&d=identicon&r=PG", "display_name": "StephenKing", "link": "https://stackoverflow.com/users/400222/stephenking"}, "reply_to_user": {"reputation": 1, "user_id": 2591059, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24de205107d688e75d11e681571646c6?s=128&d=identicon&r=PG", "display_name": "Mohammed R", "link": "https://stackoverflow.com/users/2591059/mohammed-r"}, "edited": false, "score": 0, "creation_date": 1502373256, "post_id": 45571866, "comment_id": 78190273, "body": "You have to implement both and decide, which code to run based on an attribute or a separate recipe that you include in the run list. Start with the one way to receive the files, if you have a specific question then, ask it as a separate one including your code."}], "tags": [], "owner": {"reputation": 30536, "user_id": 400222, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/75febe3a9bd5b1ad9cb63fceccb6aa31?s=128&d=identicon&r=PG", "display_name": "StephenKing", "link": "https://stackoverflow.com/users/400222/stephenking"}, "is_accepted": false, "score": 1, "last_activity_date": 1502204545, "creation_date": 1502204545, "answer_id": 45571866, "question_id": 45566255, "link": "https://stackoverflow.com/questions/45566255/chef-remote-directory-cookbook-recipe-files-not-found/45571866#45571866", "title": "Chef remote_directory cookbook @recipe_files not found", "body": "<p>The <a href=\"https://docs.chef.io/resource_remote_directory.html\" rel=\"nofollow noreferrer\"><code>remote_directory</code></a> resource takes files from the cookbook's <code>files/</code> folder.</p>\n\n<p>What you do looks pretty weird to me - you're copying recipes, and you're hardcoding local paths to the cookbook. Better ask a new question including your actual goal. I'm pretty confident that <code>remote_directory</code> is not what you want.</p>\n"}], "owner": {"reputation": 1, "user_id": 2591059, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24de205107d688e75d11e681571646c6?s=128&d=identicon&r=PG", "display_name": "Mohammed R", "link": "https://stackoverflow.com/users/2591059/mohammed-r"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 401, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1502204545, "creation_date": 1502189232, "question_id": 45566255, "link": "https://stackoverflow.com/questions/45566255/chef-remote-directory-cookbook-recipe-files-not-found", "title": "Chef remote_directory cookbook @recipe_files not found", "body": "<p>I've created a simple recipe to copy files from one directory to another on windows.</p>\n\n<p>Recipe:</p>\n\n<pre><code>remote_directory 'C:\\chef-repo\\chef-repo\\cookbooks\\chef-repo\\recipes\\destination' do\n  source 'C:\\chef-repo\\chef-repo\\cookbooks\\chef-repo\\recipes\\source'\n  action :create\nend\n</code></pre>\n\n<p>However, I'm getting the following error when trying to execute the recipe in --local-mode for the sake of testing the recipe before deploying it on Chef server:</p>\n\n<pre><code>PS C:\\chef-repo\\chef-repo\\cookbooks\\chef-repo&gt; chef-client\n--local-mode .\\copyBinaries.rb [2017-08-08T13:34:03+03:00] INFO: Started chef-zero at chefzero://localhost:1 with repository at C:/chef-repo/chef-repo   One version per cookbook\n\nStarting Chef Client, version 13.2.20 [2017-08-08T13:34:03+03:00] INFO: *** Chef 13.2.20 *** [2017-08-08T13:34:03+03:00] INFO: Platform: i386-mingw32 [2017-08-08T13:34:03+03:00] INFO: Chef-client pid: 10708 [2017-08-08T13:34:03+03:00] INFO: The plugin path C:\\chef\\ohai\\plugins does not exist. Skipping... [2017-08-08T13:34:12+03:00] INFO: Run List is [] [2017-08-08T13:34:12+03:00] INFO: Run List expands to [] [2017-08-08T13:34:12+03:00] INFO: Starting Chef Run for mohammedr [2017-08-08T13:34:12+03:00] INFO: Running start handlers [2017-08-08T13:34:12+03:00] INFO: Start handlers complete. resolving cookbooks for run list: [] [2017-08-08T13:34:12+03:00] INFO: Loading cookbooks [] Synchronizing Cookbooks: Installing Cookbook Gems: Compiling Cookbooks... [2017-08-08T13:34:12+03:00] WARN: Node mohammedr has an empty run list. Converging 1 resources Recipe: @recipe_files::C:/chef-repo/chef-repo/cookbooks/chef-repo/copyBinaries.rb\n* remote_directory[C:\\chef-repo\\chef-repo\\cookbooks\\chef-repo\\recipes\\destination] action create[2017-08-08T13:34:12+03:00] INFO: Processing remote_directory[C:\\chef-repo\\chef-repo\\cookbooks\\chef-repo\\recipes\\destination] action create (@recipe_files::C:/chef-repo/chef-repo/cookbooks/chef-repo/copyBinaries.rb line 7)\n\n\n    ================================================================================\n    Error executing action `create` on resource 'remote_directory[C:\\chef-repo\\chef-repo\\cookbooks\\chef-repo\\recipes\\destination]'\n    ================================================================================\n\n    Chef::Exceptions::CookbookNotFound\n    ----------------------------------\n    Cookbook @recipe_files not found. If you're loading @recipe_files from another cookbook, make sure you configure the dependency in your metadata\n\n    Resource Declaration:\n    ---------------------\n    # In C:/chef-repo/chef-repo/cookbooks/chef-repo/copyBinaries.rb\n\n      7: remote_directory 'C:\\chef-repo\\chef-repo\\cookbooks\\chef-repo\\recipes\\destination' do\n      8:   source 'C:\\chef-repo\\chef-repo\\cookbooks\\chef-repo\\recipes\\source'\n      9:   action :create\n     10: end\n     11:\n\n    Compiled Resource:\n    ------------------\n    # Declared in C:/chef-repo/chef-repo/cookbooks/chef-repo/copyBinaries.rb:7:in `from_file'\n\n    remote_directory(\"C:\\chef-repo\\chef-repo\\cookbooks\\chef-repo\\recipes\\destination\") do\n      action [:create]\n      default_guard_interpreter :default\n      path \"C:\\\\chef-repo\\\\chef-repo\\\\cookbooks\\\\chef-repo\\\\recipes\\\\destination\"\n      recursive true\n      source \"C:\\\\chef-repo\\\\chef-repo\\\\cookbooks\\\\chef-repo\\\\recipes\\\\source\"\n      files_backup 5\n      files_owner nil\n      files_group nil\n      overwrite true\n      declared_type :remote_directory\n      cookbook_name \"@recipe_files\"\n      recipe_name \"C:/chef-repo/chef-repo/cookbooks/chef-repo/copyBinaries.rb\"\n      mode nil\n      owner nil\n      group nil\n      files_mode nil\n    end\n\n    System Info:\n    ------------\n    chef_version=13.2.20\n    platform=windows\n    platform_version=10.0.14393\n    ruby=ruby 2.4.1p111 (2017-03-22 revision 58053) [i386-mingw32]\n    program_name=C:/opscode/chefdk/modules/chef/../../bin/chef-client\n    executable=C:/opscode/chefdk/bin/chef-client\n\n[2017-08-08T13:34:12+03:00] INFO: Running queued delayed notifications before re-raising exception\n\nRunning handlers: [2017-08-08T13:34:12+03:00] ERROR: Running exception handlers Running handlers complete [2017-08-08T13:34:12+03:00] ERROR: Exception handlers complete Chef Client failed. 0 resources updated in 09 seconds [2017-08-08T13:34:12+03:00] FATAL: Stacktrace dumped to c:/chef-repo/chef-repo/.chef/local-mode-cache/cache/chef-stacktrace.out [2017-08-08T13:34:12+03:00] FATAL: Please provide the contents of the stacktrace.out file if you file a bug report [2017-08-08T13:34:12+03:00] FATAL: Chef::Exceptions::CookbookNotFound: remote_directory[C:\\chef-repo\\chef-repo\\cookbooks\\chef-repo\\recipes\\destination] (@recipe_files::C:/chef-repo/chef-repo/cookbooks/chef-repo/copyBinaries.rb line 7) had an error: Chef::Exceptions::CookbookNotFound: Cookbook @recipe_files not found. If you're loading @recipe_files from another cookbook, make sure you configure the dependency in your metadata\n</code></pre>\n\n<p>I've tried searching the internet for a solution regarding this issue, but I couldn't find anything useful.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "tomcat", "solr", "sunspot"], "answers": [{"comments": [{"owner": {"reputation": 346, "user_id": 4952010, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HlF1M.jpg?s=128&g=1", "display_name": "Vladan Markovic", "link": "https://stackoverflow.com/users/4952010/vladan-markovic"}, "edited": false, "score": 0, "creation_date": 1502191154, "post_id": 45565777, "comment_id": 78092627, "body": "Thank you for pointing that out, i will try that. Btw, do you think that disappearance of indexes might be caused by development Solr server, or i need to look to other thing to find the problem."}, {"owner": {"reputation": 37387, "user_id": 137650, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/418a42c29b040f2e0a51eea5330e2b7f?s=128&d=identicon&r=PG", "display_name": "MatsLindh", "link": "https://stackoverflow.com/users/137650/matslindh"}, "reply_to_user": {"reputation": 346, "user_id": 4952010, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HlF1M.jpg?s=128&g=1", "display_name": "Vladan Markovic", "link": "https://stackoverflow.com/users/4952010/vladan-markovic"}, "edited": false, "score": 0, "creation_date": 1502195732, "post_id": 45565777, "comment_id": 78096201, "body": "I have no idea how sunspot&#39;s solr:start works, so I couldn&#39;t really say."}], "tags": [], "owner": {"reputation": 37387, "user_id": 137650, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/418a42c29b040f2e0a51eea5330e2b7f?s=128&d=identicon&r=PG", "display_name": "MatsLindh", "link": "https://stackoverflow.com/users/137650/matslindh"}, "is_accepted": true, "score": 1, "last_activity_date": 1502187872, "creation_date": 1502187872, "answer_id": 45565777, "question_id": 45565430, "link": "https://stackoverflow.com/questions/45565430/sunspot-solr-on-production-server/45565777#45565777", "title": "Sunspot / Solr on production server", "body": "<p>There's a <a href=\"https://cwiki.apache.org/confluence/display/solr/Taking+Solr+to+Production\" rel=\"nofollow noreferrer\">whole page on the community wiki dedicated to taking Solr to production</a> with examples of init scripts etc. if your distribution doesn't provide them (or running under Windows).</p>\n\n<p>The easiest way is to use the <code>bin/install_solr_service.sh</code> script:</p>\n\n<blockquote>\n  <p>Solr includes a service installation script (bin/install_solr_service.sh) to help you install Solr as a service on Linux. Currently, the script only supports CentOS, Debian, Red Hat, SUSE and Ubuntu Linux distributions. Before running the script, you need to determine a few parameters about your setup. Specifically, you need to decide where to install Solr and which system user should be the owner of the Solr files and process.</p>\n</blockquote>\n\n<p>This uses the supported, bundled version of Jetty with Solr and sets it up properly as a service on your server.</p>\n\n<p>Under Windows the current recommended way is to use <a href=\"https://nssm.cc/\" rel=\"nofollow noreferrer\">NSSM</a>.</p>\n"}], "owner": {"reputation": 346, "user_id": 4952010, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HlF1M.jpg?s=128&g=1", "display_name": "Vladan Markovic", "link": "https://stackoverflow.com/users/4952010/vladan-markovic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 280, "favorite_count": 0, "accepted_answer_id": 45565777, "answer_count": 1, "score": 0, "last_activity_date": 1502187872, "creation_date": 1502186847, "question_id": 45565430, "link": "https://stackoverflow.com/questions/45565430/sunspot-solr-on-production-server", "title": "Sunspot / Solr on production server", "body": "<p>Just moved from Sphinx to Solr / Sunspot Gem for Rails,\nwas using gem 'sunspot_solr'  with RAILS_ENV=production rake sunspot:solr:start to run Solr on production server.</p>\n\n<p>After whole day of indexing, in the morning all indexes disappear was lost, without error or any log about what happened. Same happened next day.</p>\n\n<p>After some research i noticed this: </p>\n\n<blockquote>\n  <p>Sunspot comes with a prepackaged instance of Solr, which makes it easy to get started in development mode.\n  This will store the index data in your operating system\u2019s temporary directory</p>\n</blockquote>\n\n<p>I suspect that \"rake sunspot:solr:start\" is used for development only and that data is not persistent. But there a lots of tutorials that use this way to start Solr on production server without Tomcat.</p>\n\n<p>What is the correct way of setting up Solr on production, do i have to use Tomcat, or  \"rake sunspot:solr:start\" is a proper way of starting Solr.</p>\n\n<p>Im confused , any help is appreciated.</p>\n"}, {"tags": ["arrays", "ruby"], "comments": [{"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 2, "creation_date": 1502194890, "post_id": 45565014, "comment_id": 78095489, "body": "&quot;Shouldn&#39;t it remain the same irrespective of another array changing its value?&quot; \u2013 There is no &quot;another array&quot;. How many arrays did you create in that piece of code? One. Not two."}], "answers": [{"comments": [{"owner": {"reputation": 1436, "user_id": 2096740, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/67b4b0da1074e71906237509810c7eac?s=128&d=identicon&r=PG", "display_name": "arjun", "link": "https://stackoverflow.com/users/2096740/arjun"}, "edited": false, "score": 0, "creation_date": 1502186631, "post_id": 45565320, "comment_id": 78089409, "body": "To check that suspicion I had tried this before posting <code>irb(main):562:0&gt; a = [1] =&gt; [1] irb(main):563:0&gt; b = a =&gt; [1] irb(main):564:0&gt; a = [2] =&gt; [2] irb(main):565:0&gt; b =&gt; [1] irb(main):566:0&gt; b = [3] =&gt; [3] irb(main):567:0&gt; a =&gt; [2] </code>"}, {"owner": {"reputation": 1436, "user_id": 2096740, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/67b4b0da1074e71906237509810c7eac?s=128&d=identicon&r=PG", "display_name": "arjun", "link": "https://stackoverflow.com/users/2096740/arjun"}, "edited": false, "score": 0, "creation_date": 1502186880, "post_id": 45565320, "comment_id": 78089600, "body": "But if its an array of more elements, <code>a = [0,0,0]</code> it changes it&#39;s value, like in the question. But by using <code>dup</code> as you suggested, it works as expected. Why is that? And why with simple values it does not behave differently?"}, {"owner": {"reputation": 3995, "user_id": 2037537, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/f13d953be3af2552aaa1ddfa0a05fa46?s=128&d=identicon&r=PG", "display_name": "Roland Studer", "link": "https://stackoverflow.com/users/2037537/roland-studer"}, "reply_to_user": {"reputation": 1436, "user_id": 2096740, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/67b4b0da1074e71906237509810c7eac?s=128&d=identicon&r=PG", "display_name": "arjun", "link": "https://stackoverflow.com/users/2096740/arjun"}, "edited": false, "score": 0, "creation_date": 1502186898, "post_id": 45565320, "comment_id": 78089605, "body": "I think I can explain. Stay tuned"}, {"owner": {"reputation": 9971, "user_id": 8255744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de22299534b5a8ed244ee8ff4aa6c481?s=128&d=identicon&r=PG&f=1", "display_name": "Simple Lime", "link": "https://stackoverflow.com/users/8255744/simple-lime"}, "edited": false, "score": 0, "creation_date": 1502186939, "post_id": 45565320, "comment_id": 78089633, "body": "Your test in the terminal was flawed, try it doing: <code>a = [1]</code>; <code>b = a</code>; <code>a[0] = 2</code>; <code>puts a</code>; <code>puts b</code> to show the error occurring. With your test, you reassigned <code>a</code> to a new array, decoupling it from <code>b</code> and then you did the same thing in reverse with <code>b</code>"}, {"owner": {"reputation": 1436, "user_id": 2096740, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/67b4b0da1074e71906237509810c7eac?s=128&d=identicon&r=PG", "display_name": "arjun", "link": "https://stackoverflow.com/users/2096740/arjun"}, "edited": false, "score": 0, "creation_date": 1502187029, "post_id": 45565320, "comment_id": 78089694, "body": "Okay so targeting the index has the same effect! That needs some more explanation."}, {"owner": {"reputation": 1436, "user_id": 2096740, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/67b4b0da1074e71906237509810c7eac?s=128&d=identicon&r=PG", "display_name": "arjun", "link": "https://stackoverflow.com/users/2096740/arjun"}, "reply_to_user": {"reputation": 9971, "user_id": 8255744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de22299534b5a8ed244ee8ff4aa6c481?s=128&d=identicon&r=PG&f=1", "display_name": "Simple Lime", "link": "https://stackoverflow.com/users/8255744/simple-lime"}, "edited": false, "score": 0, "creation_date": 1502187255, "post_id": 45565320, "comment_id": 78089850, "body": "@SimpleLime Yeah but if its a complex array then, indexing it or not, have the same effect."}, {"owner": {"reputation": 3995, "user_id": 2037537, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/f13d953be3af2552aaa1ddfa0a05fa46?s=128&d=identicon&r=PG", "display_name": "Roland Studer", "link": "https://stackoverflow.com/users/2037537/roland-studer"}, "reply_to_user": {"reputation": 1436, "user_id": 2096740, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/67b4b0da1074e71906237509810c7eac?s=128&d=identicon&r=PG", "display_name": "arjun", "link": "https://stackoverflow.com/users/2096740/arjun"}, "edited": false, "score": 1, "creation_date": 1502187329, "post_id": 45565320, "comment_id": 78089896, "body": "@arjun, I updated my answer. The problem is that you are misunderstanding as the variable <code>a</code> being the array, but a just points to an array, that exists somewhere in the memory. Have a look at my updated answer."}, {"owner": {"reputation": 1436, "user_id": 2096740, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/67b4b0da1074e71906237509810c7eac?s=128&d=identicon&r=PG", "display_name": "arjun", "link": "https://stackoverflow.com/users/2096740/arjun"}, "edited": false, "score": 0, "creation_date": 1502188082, "post_id": 45565320, "comment_id": 78090468, "body": "@RolandStuder Yup, an entirely new object is created.  Now it is obvious. Thanks"}, {"owner": {"reputation": 1436, "user_id": 2096740, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/67b4b0da1074e71906237509810c7eac?s=128&d=identicon&r=PG", "display_name": "arjun", "link": "https://stackoverflow.com/users/2096740/arjun"}, "edited": false, "score": 0, "creation_date": 1502188392, "post_id": 45565320, "comment_id": 78090708, "body": "One thing - <code>empty_array.dup</code> is somewhat similar to <code>Array.new(empty_array)</code>?"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 2, "creation_date": 1502194558, "post_id": 45565320, "comment_id": 78095207, "body": "<i>&quot;Any change of one will be reflected in the other&quot;</i> \u2013 that sounds like there were two arrays which are being synchronized."}, {"owner": {"reputation": 3995, "user_id": 2037537, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/f13d953be3af2552aaa1ddfa0a05fa46?s=128&d=identicon&r=PG", "display_name": "Roland Studer", "link": "https://stackoverflow.com/users/2037537/roland-studer"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1502197349, "post_id": 45565320, "comment_id": 78097388, "body": "@Stefan Thanks, I edited that out. That part of the answer was written, before I fully understood what I was explaining :-)"}], "tags": [], "owner": {"reputation": 3995, "user_id": 2037537, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/f13d953be3af2552aaa1ddfa0a05fa46?s=128&d=identicon&r=PG", "display_name": "Roland Studer", "link": "https://stackoverflow.com/users/2037537/roland-studer"}, "is_accepted": true, "score": 4, "last_activity_date": 1502197278, "last_edit_date": 1502197278, "creation_date": 1502186516, "answer_id": 45565320, "question_id": 45565014, "link": "https://stackoverflow.com/questions/45565014/ruby-empty-array-changes-values-in-iterations-because-of-another-array/45565320#45565320", "title": "Ruby empty array changes values in iterations because of another array", "body": "<p>By using</p>\n\n<pre><code>output_row = empty_array\n</code></pre>\n\n<p>you are not copying the empty array. You are creating a reference to the same underlying array that is referenced in <code>empty_array</code>.</p>\n\n<p>You can create a clone or a duplicate of the array. So use:</p>\n\n<pre><code>output_row = empty_array.dup\n</code></pre>\n\n<p>This will create a new Array, which is a duplicate of empty_array, see <a href=\"http://ruby-doc.org/core-2.4.1/Object.html#method-i-dup\" rel=\"nofollow noreferrer\">http://ruby-doc.org/core-2.4.1/Object.html#method-i-dup</a></p>\n\n<p>A more complete explanation on what happens with an example:</p>\n\n<pre><code>a = [1] =&gt; [1] # is creating a new array 'x'\n               # a is referencing this array, a is not the array itself!\n\nb = a   =&gt; [1] # b now references the array 'x'\n\na = [2] =&gt; [2] # is creating a new array 'y', a is referencing this new array\n               # the reference of b is not changing\n\nb       =&gt; [1] # b still pointing to array 'x'\n</code></pre>\n\n<p>So with <code>b = a</code> you just tell them to reference the same array <code>x</code>, but <code>b</code> is not a reference to <code>a</code>.</p>\n"}], "owner": {"reputation": 1436, "user_id": 2096740, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/67b4b0da1074e71906237509810c7eac?s=128&d=identicon&r=PG", "display_name": "arjun", "link": "https://stackoverflow.com/users/2096740/arjun"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "accepted_answer_id": 45565320, "answer_count": 1, "score": 1, "last_activity_date": 1502197278, "creation_date": 1502185715, "last_edit_date": 1502187018, "question_id": 45565014, "link": "https://stackoverflow.com/questions/45565014/ruby-empty-array-changes-values-in-iterations-because-of-another-array", "title": "Ruby empty array changes values in iterations because of another array", "body": "<p>An empty array is defined outside a block and within the block, it is assigned to a new variable. If the new array changes, the empty array also modifies its values. Why?</p>\n\n<pre><code># THIS CODE CHECK WHICH LETTERS IN klas APPEAR IN docs\nklas = [\"a\", \"b\", \"c\"]\n\ndocs = [[1, \"a\"], [2, \"a\"], [3, \"b\"], [4, \"b\"], [5, \"c\"], [6, \"c\"]]\n\noutput = []\nempty_array = Array.new(klas.size) { 0 } # EMPTY ARRAY DEFINED HERE\n\ndocs.each do |doc|\n    puts empty_array.inspect\n    puts (output_row = empty_array).inspect # EMPTY ARRAY ASSIGNED TO ANOTHER\n\n    # FIND INDEX OF THE LETTER IN klas FROM docs. ASSIGN 1.\n    output_row[klas.index(doc[1])] = 1 # PROBLEM! THIS ALSO CHANGES THE EMPTY ARRAY VALUES\n    output &lt;&lt; output_row\nend\n</code></pre>\n\n<p>CONSOLE OUTPUT to show empty array changing its value based on another array</p>\n\n<pre><code>###\nempty_array is [0, 0, 0]\noutput_row is [0, 0, 0]\n---\n###\nempty_array is [1, 0, 0]\noutput_row is [1, 0, 0]\n---\n###\nempty_array is [1, 0, 0]\noutput_row is [1, 0, 0]\n---\n###\nempty_array is [1, 1, 0]\noutput_row is [1, 1, 0]\n---\n###\nempty_array is [1, 1, 0]\noutput_row is [1, 1, 0]\n---\n###\nempty_array is [1, 1, 1]\noutput_row is [1, 1, 1]\n---\n\n# INCORRECT output IS\n=&gt; [[1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1]]\n# SHOULD BE\n=&gt; [[1, 0, 0], [1, 0, 0], [0, 1, 0], [0, 1, 0], [0, 0, 1], [0, 0, 1]]\n</code></pre>\n\n<p>But if the empty array is defined within the block and assigned to a new variable it works as expected.</p>\n\n<pre><code>docs.each do |doc|\n    empty_array = Array.new(klas.size) { 0 } # THIS MAKES SURE empty_array stays with zero values\n    output_row = empty_array    \n    output_row[klas.index(doc[1])] = 1\n    output &lt;&lt; output_row\nend\n\nCORRECT output IS\n=&gt; [[1, 0, 0], [1, 0, 0], [0, 1, 0], [0, 1, 0], [0, 0, 1], [0, 0, 1]]\n</code></pre>\n\n<p>Why is the empty array modifying its value when it is outside a block? Shouldn't it remain the same irrespective of another array changing its value?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 414, "user_id": 6556383, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh4.googleusercontent.com/-rFjQCuJsaAk/AAAAAAAAAAI/AAAAAAAAEio/VDKKrZfNTtM/photo.jpg?sz=128", "display_name": "dendomenko", "link": "https://stackoverflow.com/users/6556383/dendomenko"}, "edited": false, "score": 0, "creation_date": 1502185222, "post_id": 45563753, "comment_id": 78088343, "body": "I think better use json views, I perfer jbuilder for it <a href=\"https://github.com/rails/jbuilder\" rel=\"nofollow noreferrer\">github.com/rails/jbuilder</a>"}, {"owner": {"reputation": 75, "user_id": 7294640, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/a391de80da94a6f8d4f5552d271d5084?s=128&d=identicon&r=PG&f=1", "display_name": "Ryu Nishida", "link": "https://stackoverflow.com/users/7294640/ryu-nishida"}, "reply_to_user": {"reputation": 414, "user_id": 6556383, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh4.googleusercontent.com/-rFjQCuJsaAk/AAAAAAAAAAI/AAAAAAAAEio/VDKKrZfNTtM/photo.jpg?sz=128", "display_name": "dendomenko", "link": "https://stackoverflow.com/users/6556383/dendomenko"}, "edited": false, "score": 0, "creation_date": 1502186166, "post_id": 45563753, "comment_id": 78089045, "body": "No I wanna make a view to introduce this API."}, {"owner": {"reputation": 414, "user_id": 6556383, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh4.googleusercontent.com/-rFjQCuJsaAk/AAAAAAAAAAI/AAAAAAAAEio/VDKKrZfNTtM/photo.jpg?sz=128", "display_name": "dendomenko", "link": "https://stackoverflow.com/users/6556383/dendomenko"}, "edited": false, "score": 0, "creation_date": 1502186226, "post_id": 45563753, "comment_id": 78089095, "body": "So you want some controllers to be API controllers and some to be regular controllers?"}, {"owner": {"reputation": 75, "user_id": 7294640, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/a391de80da94a6f8d4f5552d271d5084?s=128&d=identicon&r=PG&f=1", "display_name": "Ryu Nishida", "link": "https://stackoverflow.com/users/7294640/ryu-nishida"}, "reply_to_user": {"reputation": 414, "user_id": 6556383, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh4.googleusercontent.com/-rFjQCuJsaAk/AAAAAAAAAAI/AAAAAAAAEio/VDKKrZfNTtM/photo.jpg?sz=128", "display_name": "dendomenko", "link": "https://stackoverflow.com/users/6556383/dendomenko"}, "edited": false, "score": 0, "creation_date": 1502187650, "post_id": 45563753, "comment_id": 78090142, "body": "Yeah, yes I want do so"}, {"owner": {"reputation": 414, "user_id": 6556383, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh4.googleusercontent.com/-rFjQCuJsaAk/AAAAAAAAAAI/AAAAAAAAEio/VDKKrZfNTtM/photo.jpg?sz=128", "display_name": "dendomenko", "link": "https://stackoverflow.com/users/6556383/dendomenko"}, "edited": false, "score": 0, "creation_date": 1502193033, "post_id": 45563753, "comment_id": 78094055, "body": "So you don&#39;t need to create rails API app. I think <a href=\"https://stackoverflow.com/questions/38366501/rails-5-api-only-app-with-home-page\">here</a> you can find solution"}, {"owner": {"reputation": 75, "user_id": 7294640, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/a391de80da94a6f8d4f5552d271d5084?s=128&d=identicon&r=PG&f=1", "display_name": "Ryu Nishida", "link": "https://stackoverflow.com/users/7294640/ryu-nishida"}, "reply_to_user": {"reputation": 414, "user_id": 6556383, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh4.googleusercontent.com/-rFjQCuJsaAk/AAAAAAAAAAI/AAAAAAAAEio/VDKKrZfNTtM/photo.jpg?sz=128", "display_name": "dendomenko", "link": "https://stackoverflow.com/users/6556383/dendomenko"}, "edited": false, "score": 0, "creation_date": 1502198389, "post_id": 45563753, "comment_id": 78098177, "body": "Thanks that&#39;s my solution"}, {"owner": {"reputation": 1179, "user_id": 5565348, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ATj2l.jpg?s=128&g=1", "display_name": "Maksim Kalmykov", "link": "https://stackoverflow.com/users/5565348/maksim-kalmykov"}, "edited": false, "score": 0, "creation_date": 1502547588, "post_id": 45563753, "comment_id": 78260869, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/38366501/rails-5-api-only-app-with-home-page\">Rails 5 api only app with home page</a>"}], "owner": {"reputation": 75, "user_id": 7294640, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/a391de80da94a6f8d4f5552d271d5084?s=128&d=identicon&r=PG&f=1", "display_name": "Ryu Nishida", "link": "https://stackoverflow.com/users/7294640/ryu-nishida"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 450, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1502183848, "creation_date": 1502182412, "last_edit_date": 1502183848, "question_id": 45563753, "link": "https://stackoverflow.com/questions/45563753/i-want-to-use-view-on-rails5-api-mode", "title": "I want to use view on Rails5 api mode", "body": "<p>Tried</p>\n\n<p><code>routes.rb</code></p>\n\n<pre><code>Rails.application.routes.draw do\n  get 'welcome/index'\n\n root to: 'welcome#index'\n resource :lookouts do\n   collection do\n     get :cover\n   end\n end\nend\n</code></pre>\n\n<p><code>welcome_controller.rb</code></p>\n\n<pre><code>class WelcomeController &lt; ApplicationController\n  def index\n    render :html\n  end\nend\n</code></pre>\n\n<p><code>welcome/index.html.erb</code></p>\n\n<pre><code> &lt;!-- Compiled and minified CSS --&gt;\n &lt;link rel=\"stylesheet\" href=\"https://cdnjs.cloudflare.com/ajax/libs/materialize/0.100.1/css/materialize.min.css\"&gt;\n\n &lt;!-- Compiled and minified JavaScript --&gt;\n &lt;script src=\"https://cdnjs.cloudflare.com/ajax/libs/materialize/0.100.1/js/materialize.min.js\"&gt;&lt;/script&gt;\n\n &lt;h1&gt;hello&lt;/h1&gt;\n</code></pre>\n\n<p>How can I use erb template on rails 5 api mode\nI heard that we can't use erb on rails5 api mode but I want to use.</p>\n"}, {"tags": ["ruby", "glyphicons"], "comments": [{"owner": {"reputation": 23178, "user_id": 471213, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/9cea03925dc9a030cacd430132ba0c6e?s=128&d=identicon&r=PG", "display_name": "usr-local-\u0395\u03a8\u0397\u0395\u039b\u03a9\u039d", "link": "https://stackoverflow.com/users/471213/usr-local-%ce%95%ce%a8%ce%97%ce%95%ce%9b%ce%a9%ce%9d"}, "edited": false, "score": 1, "creation_date": 1502188595, "post_id": 45563159, "comment_id": 78090845, "body": "Could you please post some relevant code?"}], "answers": [{"tags": [], "owner": {"reputation": 209, "user_id": 1251617, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b69c7c7404033f2282bd7bf303fd8d5c?s=128&d=identicon&r=PG", "display_name": "Moiz Shafqat Husain", "link": "https://stackoverflow.com/users/1251617/moiz-shafqat-husain"}, "is_accepted": false, "score": 0, "last_activity_date": 1502181086, "creation_date": 1502181086, "answer_id": 45563224, "question_id": 45563159, "link": "https://stackoverflow.com/questions/45563159/glyphicon-wont-display-on-c9/45563224#45563224", "title": "glyphicon won&#39;t display on c9", "body": "<p>You also need to link to the glyphicon files in the css like so</p>\n\n<pre><code>@import url(\"//netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap-glyphicons.css\");\n</code></pre>\n\n<p><strong>or in the HTML</strong></p>\n\n<pre><code>&lt;link href=\"//netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap-glyphicons.css\" rel=\"stylesheet\"&gt;\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 8432949, "user_type": "registered", "profile_image": "https://graph.facebook.com/1515630005147284/picture?type=large", "display_name": "Songhyun Lee", "link": "https://stackoverflow.com/users/8432949/songhyun-lee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 17, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1502199348, "creation_date": 1502180874, "last_edit_date": 1502199348, "question_id": 45563159, "link": "https://stackoverflow.com/questions/45563159/glyphicon-wont-display-on-c9", "title": "glyphicon won&#39;t display on c9", "body": "<p>I'm currently using c9 to develop a web service w/ ruby on rails. I've installed bootstrap AND bootstrap-glyphicon gems.</p>\n\n<p>The problem is that with the same line of code, some of the glyphicons will display, but some won't.\nThe only difference between the two is the glyphicon class name.</p>\n\n<p>Is this to do with bootstrap gem(should I try with CDN?) or is it because of the directory?</p>\n\n<p>Thanks for helping out!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "amazon-s3", "aws-sdk", "amazon-cloudfront"], "comments": [{"owner": {"reputation": 138098, "user_id": 1695906, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/638d2ec6b52f3db1583890be23d74cc6?s=128&d=identicon&r=PG", "display_name": "Michael - sqlbot", "link": "https://stackoverflow.com/users/1695906/michael-sqlbot"}, "edited": false, "score": 0, "creation_date": 1502238320, "post_id": 45562905, "comment_id": 78119201, "body": "Check the response headers.  Do you see <code>Server: Amazon S3</code>?  If so, verify that you have the Origin Access Identity selected in the Origin settings, and a bucket policy allowing access to the bucket from that origin access identity."}, {"owner": {"reputation": 189, "user_id": 1374690, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f77598b399ed55cf7c6aab654dc33595?s=128&d=identicon&r=PG", "display_name": "Radhika", "link": "https://stackoverflow.com/users/1374690/radhika"}, "reply_to_user": {"reputation": 138098, "user_id": 1695906, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/638d2ec6b52f3db1583890be23d74cc6?s=128&d=identicon&r=PG", "display_name": "Michael - sqlbot", "link": "https://stackoverflow.com/users/1695906/michael-sqlbot"}, "edited": false, "score": 0, "creation_date": 1502274271, "post_id": 45562905, "comment_id": 78134698, "body": "This is my bucket policy which I have in S3 bucket. My OAI is E1E3N3VD1MH57U. Is that my policy is right? <code>{     &quot;Version&quot;: &quot;2008-10-17&quot;,     &quot;Id&quot;: &quot;PolicyForCloudFrontPrivateContent&quot;,     &quot;Statement&quot;: [         {             &quot;Sid&quot;: &quot;1&quot;,             &quot;Effect&quot;: &quot;Allow&quot;,             &quot;Principal&quot;: {                 &quot;AWS&quot;: &quot;arn:aws:iam::cloudfront:user&#47;CloudFront Origin Access Identity E1E3N3VD1MH57U&quot;             },             &quot;Action&quot;: &quot;s3:GetObject&quot;,             &quot;Resource&quot;: &quot;arn:aws:s3:::mcds_staging_fulltext&#47;*&quot;         }     ] }</code>"}, {"owner": {"reputation": 138098, "user_id": 1695906, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/638d2ec6b52f3db1583890be23d74cc6?s=128&d=identicon&r=PG", "display_name": "Michael - sqlbot", "link": "https://stackoverflow.com/users/1695906/michael-sqlbot"}, "edited": false, "score": 0, "creation_date": 1502274799, "post_id": 45562905, "comment_id": 78135066, "body": "Was this auto-created for you?  Does this match the OAI that&#39;s configured for this origin, on the Origins tab in CloudFront?"}, {"owner": {"reputation": 189, "user_id": 1374690, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f77598b399ed55cf7c6aab654dc33595?s=128&d=identicon&r=PG", "display_name": "Radhika", "link": "https://stackoverflow.com/users/1374690/radhika"}, "reply_to_user": {"reputation": 138098, "user_id": 1695906, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/638d2ec6b52f3db1583890be23d74cc6?s=128&d=identicon&r=PG", "display_name": "Michael - sqlbot", "link": "https://stackoverflow.com/users/1695906/michael-sqlbot"}, "edited": false, "score": 0, "creation_date": 1502280037, "post_id": 45562905, "comment_id": 78138843, "body": "Yes, this has been auto created in S3. I checked only this identity E1E3N3VD1MH57U which yes it matches the identity in Oigins tab."}], "owner": {"reputation": 189, "user_id": 1374690, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f77598b399ed55cf7c6aab654dc33595?s=128&d=identicon&r=PG", "display_name": "Radhika", "link": "https://stackoverflow.com/users/1374690/radhika"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 697, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1502180162, "creation_date": 1502180162, "question_id": 45562905, "link": "https://stackoverflow.com/questions/45562905/url-signing-with-aws-cloudfront-ruby", "title": "URL Signing with AWS Cloudfront - Ruby", "body": "<p>My main purpose is to sign the URL using AWS Cloudfront in Ruby</p>\n\n<p>I Have created a key pair at <a href=\"https://portal.aws.amazon.com/gp/aws/securityCredentials\" rel=\"nofollow noreferrer\">https://portal.aws.amazon.com/gp/aws/securityCredentials</a> (Key Pairs tab). Which provided with a key pair id and a pem file (save the pem file in your project dir).</p>\n\n<p>In your AWS Cloudfront portal, create a distribution. Selected \"yes\" for Restrict Bucket Access.</p>\n\n<p>Click No for Grant Read Permissions on Bucket.</p>\n\n<p>Create the distribution.</p>\n\n<p>In S3 bucket, i am using a file that is not public. i.e. no read permissions. In this case, we will test this against sample.png.</p>\n\n<pre><code>url = \"https://actual_cdn_id_here.cloudfront.net/sample.png\"\nkey_pair_id = 'your_aws_key_pair_id'\nexpires_in = 1.minute\n\nexpires = (Time.now.getutc + expires_in).to_i.to_s\n\nprivate_key = OpenSSL::PKey::RSA.new(File.read('private_key_file.pem'))\n\n policy = %Q[{\"Statement\":[{\"Resource\":\"#{url}\",\"Condition\": \n {\"DateLessThan\":{\"AWS:EpochTime\":#{expires}}}}]}]                                                                     \n signature =   Base64.strict_encode64(private_key.sign(OpenSSL::Digest::SHA1.new, policy))\n\n \"#{url}?Expires=#{expires}&amp;Signature=#{signature}&amp;Key-Pair-\n  Id=#{key_pair_id}\"\n</code></pre>\n\n<p>But still after generating, I am getting the following error </p>\n\n<pre><code>&lt;Error&gt;\n  &lt;Code&gt;InvalidKey&lt;/Code&gt;\n  &lt;Message&gt;Unknown Key&lt;/Message&gt;\n&lt;/Error&gt;\n</code></pre>\n\n<p>Where I am doing wrong? I have even added the Trusted Signers and made self for the same.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "amazon-web-services", "amazon-dynamodb"], "comments": [{"owner": {"reputation": 45894, "user_id": 271415, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/8648256cc53b261c5e1d266380a256fc?s=128&d=identicon&r=PG", "display_name": "jarmod", "link": "https://stackoverflow.com/users/271415/jarmod"}, "edited": false, "score": 1, "creation_date": 1502202361, "post_id": 45562322, "comment_id": 78101322, "body": "Your code is overriding the DynamoDB service endpoint to use a local endpoint. Are you actually using DynamoDB Local (<a href=\"http://docs.aws.amazon.com/amazondynamodb/latest/developerguide/DynamoDBLocal.html\" rel=\"nofollow noreferrer\">docs.aws.amazon.com/amazondynamodb/latest/developerguide/&hellip;</a>) and is it running?"}], "answers": [{"tags": [], "owner": {"reputation": 329, "user_id": 1020315, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fJhEL.jpg?s=128&g=1", "display_name": "Phil", "link": "https://stackoverflow.com/users/1020315/phil"}, "is_accepted": false, "score": 1, "last_activity_date": 1568150140, "last_edit_date": 1568150140, "creation_date": 1531177194, "answer_id": 51255094, "question_id": 45562322, "link": "https://stackoverflow.com/questions/45562322/dynamodb-awsdynamodberrorsnotfound/51255094#51255094", "title": "DynamoDB - Aws::DynamoDB::Errors::NotFound", "body": "\n\n<p>Your code is trying to connect to a DynamoDB instance running on <code>\"http://localhost:3000\"</code>:</p>\n\n<pre class=\"lang-ruby prettyprint-override\"><code>dynamodb = Aws::DynamoDB::Client.new(\n   access_key_id: \"xxxx\", \n   secret_access_key: \"xxxxx\", \n   region: ENV['AWS_REGION'], \n   endpoint: \"http://localhost:3000\"\n)\n</code></pre>\n\n<p>Given you are setting the <code>AWS_REGION</code> environment variable to <code>us-east-1</code>, it looks like your intention is to instead connect to the DynamoDB service managed by Amazon, remove the last argument to <code>Aws::DynamoDB::Client.new</code>:</p>\n\n<pre class=\"lang-ruby prettyprint-override\"><code>dynamodb = Aws::DynamoDB::Client.new(\n   access_key_id: \"xxxx\", \n   secret_access_key: \"xxxxx\", \n   region: ENV['AWS_REGION']\n)\n</code></pre>\n\n<p>In fact, your <code>region</code> argument is what the SDK uses by default, so you should be able to reduce your client initialization block to:</p>\n\n<pre class=\"lang-ruby prettyprint-override\"><code>dynamodb = Aws::DynamoDB::Client.new(\n   access_key_id: \"xxxx\", \n   secret_access_key: \"xxxxx\"\n)\n</code></pre>\n\n<p>Source: <a href=\"https://docs.aws.amazon.com/sdkforruby/api/Aws/DynamoDB/Client.html\" rel=\"nofollow noreferrer\">https://docs.aws.amazon.com/sdkforruby/api/Aws/DynamoDB/Client.html</a></p>\n"}, {"tags": [], "owner": {"reputation": 56, "user_id": 7434603, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-4ZfcfkKTQi0/AAAAAAAAAAI/AAAAAAAAAgw/pnPtGYXHfeQ/photo.jpg?sz=128", "display_name": "Akhilesh Pandey", "link": "https://stackoverflow.com/users/7434603/akhilesh-pandey"}, "is_accepted": false, "score": 0, "last_activity_date": 1545200077, "creation_date": 1545200077, "answer_id": 53845522, "question_id": 45562322, "link": "https://stackoverflow.com/questions/45562322/dynamodb-awsdynamodberrorsnotfound/53845522#53845522", "title": "DynamoDB - Aws::DynamoDB::Errors::NotFound", "body": "<p>you are trying from localhost. Then you need to setup AWS sam local there you can test your API local then you do't do't need secret key and access key. but you are using from AWS cli then you need to required secret key and access key in this way \nAnd in this module you need to define region</p>\n\n<p>dynamodb = Aws::DynamoDB::Client.new(\n   access_key_id: \"xxxx\", \n   secret_access_key: \"xxxxx\", \n   region: ENV['AWS_REGION'], \n   endpoint: \"<a href=\"http://localhost:3000\" rel=\"nofollow noreferrer\">http://localhost:3000</a>\"\n)</p>\n"}], "owner": {"reputation": 1433, "user_id": 703997, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/c4bda24c22a7e56894feb140e6b79c77?s=128&d=identicon&r=PG&f=1", "display_name": "Shruthi R", "link": "https://stackoverflow.com/users/703997/shruthi-r"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 184, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1568150140, "creation_date": 1502178474, "question_id": 45562322, "link": "https://stackoverflow.com/questions/45562322/dynamodb-awsdynamodberrorsnotfound", "title": "DynamoDB - Aws::DynamoDB::Errors::NotFound", "body": "<p>In rails 5, I am using dynamodb feature by referring <a href=\"https://assist-software.net/snippets/how-save-data-amazon-dynamodb-using-ruby-on-rails\" rel=\"nofollow noreferrer\">https://assist-software.net/snippets/how-save-data-amazon-dynamodb-using-ruby-on-rails</a> and <a href=\"https://readysteadycode.com/howto-access-amazon-dynamodb-with-ruby\" rel=\"nofollow noreferrer\">https://readysteadycode.com/howto-access-amazon-dynamodb-with-ruby</a></p>\n\n<p>When I try to load the root page it shows an error like,</p>\n\n<pre><code>Aws::DynamoDB::Errors::NotFound in Admins::SessionsController#new\n</code></pre>\n\n<p>In session_controller.rb</p>\n\n<pre><code>def new\n  login_aws\nend\ndef login_aws\n  ENV['AWS_REGION'] = \"us-east-1\"\n  dynamodb = Aws::DynamoDB::Client.new(access_key_id: \"xxxx\", secret_access_key: \"xxxxx\", region: ENV['AWS_REGION'], endpoint: \"http://localhost:3000\")\n  response = dynamodb.scan(table_name: 'admin')\n  @admin = response.items.take(1).inject(:merge)\nend\n</code></pre>\n\n<p>My gems are,</p>\n\n<pre><code> aws-sdk (2.10.19, 1.67.0)\n aws-sdk-core (2.10.19)\n aws-sdk-resources (2.10.19)\n aws-sdk-v1 (1.67.0)\n</code></pre>\n\n<p>Server log shows an error is like,</p>\n\n<pre><code> Aws::DynamoDB::Errors::NotFound ():\n\n app/controllers/admins/sessions_controller.rb:32:in `login_aws'\n app/controllers/admins/sessions_controller.rb:6:in `new'\n</code></pre>\n\n<p>Please help me to solve this issue.</p>\n"}, {"tags": ["jquery", "ruby-on-rails", "ruby", "forms", "rubygems"], "comments": [{"owner": {"reputation": 3309, "user_id": 3786332, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/R33iW.jpg?s=128&g=1", "display_name": "uzaif", "link": "https://stackoverflow.com/users/3786332/uzaif"}, "edited": false, "score": 0, "creation_date": 1502178561, "post_id": 45562152, "comment_id": 78083704, "body": "is it kind of <code>add more</code>  functionality"}, {"owner": {"reputation": 5210, "user_id": 1009442, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/2a01ae9942939ee2b3954a6727d2bb92?s=128&d=identicon&r=PG", "display_name": "Weihang Jian", "link": "https://stackoverflow.com/users/1009442/weihang-jian"}, "edited": false, "score": 1, "creation_date": 1502178566, "post_id": 45562152, "comment_id": 78083709, "body": "multiple forms mean there are multiple submissions. If you want to submit only once after filling out multiple forms, consider using a single form and generating fields instead forms."}, {"owner": {"reputation": 1225, "user_id": 5724342, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d0fc4bbc261a7a2a233a196a0b655fd2?s=128&d=identicon&r=PG&f=1", "display_name": "Gurmukh Singh", "link": "https://stackoverflow.com/users/5724342/gurmukh-singh"}, "edited": false, "score": 0, "creation_date": 1502179237, "post_id": 45562152, "comment_id": 78084141, "body": "Im not 100% sure what your trying to achieve, maybe look into the wicked gem <a href=\"https://github.com/schneems/wicked\" rel=\"nofollow noreferrer\">github.com/schneems/wicked</a>?"}], "answers": [{"tags": [], "owner": {"reputation": 500, "user_id": 1595868, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/2106152c457f7df0ef892b6814423cfc?s=128&d=identicon&r=PG", "display_name": "Anton", "link": "https://stackoverflow.com/users/1595868/anton"}, "is_accepted": true, "score": 0, "last_activity_date": 1502218193, "creation_date": 1502218193, "answer_id": 45575940, "question_id": 45562152, "link": "https://stackoverflow.com/questions/45562152/generate-form-by-clicking-a-button-in-ruby-on-rails/45575940#45575940", "title": "Generate form by clicking a button in Ruby on Rails", "body": "<p>What you are looking for is nested form. You can achieve this using the cocoon gem - <a href=\"https://github.com/nathanvda/cocoon\" rel=\"nofollow noreferrer\">https://github.com/nathanvda/cocoon</a>.<br>\nIt basically generates controls on the fly and submit all in one atomic action.<br>\nJust follow the docs :)</p>\n"}], "owner": {"reputation": 71, "user_id": 2963365, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/681879e4efe284ac9d844bc57c249d58?s=128&d=identicon&r=PG&f=1", "display_name": "user2963365", "link": "https://stackoverflow.com/users/2963365/user2963365"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 451, "favorite_count": 0, "accepted_answer_id": 45575940, "answer_count": 1, "score": 0, "last_activity_date": 1502218193, "creation_date": 1502177995, "question_id": 45562152, "link": "https://stackoverflow.com/questions/45562152/generate-form-by-clicking-a-button-in-ruby-on-rails", "title": "Generate form by clicking a button in Ruby on Rails", "body": "<p>I would like to create a form in ruby on rails such that per entry, the user can enter information about a variable number of items. For each item, they should be able to click a button which generates a form they can fill out, and they should submit only once after filling out multiple forms. </p>\n\n<p>I'm not sure how to do this in rails (or if it's possible)-- I don't know how to generate a form on the same page after clicking a button, especially since I should be able to generate multiple forms in that way. Is there a gem/some other way to achieve this? Sorry if the description is a little unclear or vague, basically I want to create a dynamic form that can be adjusted according to how many items I want.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "devise"], "comments": [{"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1502180923, "post_id": 45561493, "comment_id": 78085297, "body": "What is <code>resource</code>? Presumably the user that just signed up, right? Just pass that as a parameter, or only <code>resource.email</code> (/whatever) if you prefer."}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1502181022, "post_id": 45561493, "comment_id": 78085356, "body": "It may even make sense for the transactions to be resourced within the users - i.e. <code>new_user_transaction_path(resource, session[:registration_params])</code>"}, {"owner": {"reputation": 685, "user_id": 7458849, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/89kDb.jpg?s=128&g=1", "display_name": "Theopap", "link": "https://stackoverflow.com/users/7458849/theopap"}, "reply_to_user": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1502182291, "post_id": 45561493, "comment_id": 78086234, "body": "Thank for the reply @Tom Lord.... hmmmm pass the resources.email parameter how and where?"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1502185811, "post_id": 45561493, "comment_id": 78088745, "body": "If you&#39;re just going to use a plain hash of parameters, then just add to it: <code>new_transaction_path(session[:registration_params].merge(ema&zwnj;&#8203;il: resource.email))</code>"}, {"owner": {"reputation": 685, "user_id": 7458849, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/89kDb.jpg?s=128&g=1", "display_name": "Theopap", "link": "https://stackoverflow.com/users/7458849/theopap"}, "reply_to_user": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1502192850, "post_id": 45561493, "comment_id": 78093923, "body": "Thanks @Tom Lord!!! And if I want to access the email params : <code>&lt;%= hidden_field_tag(:email, params[&quot;email&quot;]) %&gt;</code> ???"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1502199577, "post_id": 45561493, "comment_id": 78099111, "body": "Yes, that would work. Although to be honest, I&#39;m a but confused why you are doing this... Can a user ever create a transaction for any user <i>other than themselves</i>? If not, then why do you even need to pass the email as a parameter? You can just reference <code>current_user.email</code> in the <code>TransactionsController</code> - thereby also mitigating security risks."}, {"owner": {"reputation": 685, "user_id": 7458849, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/89kDb.jpg?s=128&g=1", "display_name": "Theopap", "link": "https://stackoverflow.com/users/7458849/theopap"}, "reply_to_user": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1502199850, "post_id": 45561493, "comment_id": 78099343, "body": "The user is not logged in at the time I&#39;m trying to pass the transaction, so I can&#39;t really use the <code>current_user.email</code>...I need the user to complete the payment and then login. If you find a way around this then please let me know, thanks!"}, {"owner": {"reputation": 685, "user_id": 7458849, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/89kDb.jpg?s=128&g=1", "display_name": "Theopap", "link": "https://stackoverflow.com/users/7458849/theopap"}, "reply_to_user": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1502352878, "post_id": 45561493, "comment_id": 78174720, "body": "@Tom Lord, if I use the merge as you suggested the email param does appear in the console after registration... but when I get redirected to the transaction page and do this <code>&lt;%= params[&quot;email&quot;].inspect %&gt;</code> it comes out nil... any ideas why this is happening?"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1502353325, "post_id": 45561493, "comment_id": 78175017, "body": "Not without seeing more context of the code. Check exactly what path is being taken; perhaps you&#39;re signing <b>in</b> rather than signing <b>up</b> - and therefore going through a different code path? However, this brings me back to the original point: Why pass this as a parameter at all? Just use <code>current_user.email</code> (if signed in)."}, {"owner": {"reputation": 685, "user_id": 7458849, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/89kDb.jpg?s=128&g=1", "display_name": "Theopap", "link": "https://stackoverflow.com/users/7458849/theopap"}, "reply_to_user": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1502354487, "post_id": 45561493, "comment_id": 78175776, "body": "Thanks for the help @Tom Lord, I just updated the whole question, please take a look if you&#39;d like. And if you need any more code please let me know! I have been trying to fix this bug for a while now!!"}, {"owner": {"reputation": 685, "user_id": 7458849, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/89kDb.jpg?s=128&g=1", "display_name": "Theopap", "link": "https://stackoverflow.com/users/7458849/theopap"}, "reply_to_user": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1502355812, "post_id": 45561493, "comment_id": 78176803, "body": "I can&#39;t use current_user because the whole process is: buy a subscription plan, create a customer with the email at Braintree, and when user trip to login check if subscription is active and allow login!"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1502360497, "post_id": 45561493, "comment_id": 78180239, "body": "Let me get this straight: <code>params = ActionController::Parameters {&quot;ema\u200c\u200bil&quot;=&gt;&quot;example@gmail.com&quot;, ...}</code>, but <code>params[:email] == nil</code>??!! That&#39;s not possible."}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1502360564, "post_id": 45561493, "comment_id": 78180296, "body": "Also, why does your code line above say <code>&quot;email&quot;=&gt;&quot;&quot;</code>? That&#39;s inconsistent with what you write next."}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1502360903, "post_id": 45561493, "comment_id": 78180524, "body": "Also, why is the URL parameter: <code>ema%E2%80%8C%E2%80%8Bil=example</code>? Did you copy+paste some hidden characters into a text editor? <code>%E2%80%8C</code> means <code>\u204c</code>, and <code>%E2%80%8B</code> means <code>\u204b</code> (<a href=\"http://www.utf8-chartable.de/unicode-utf8-table.pl?start=8192&amp;number=128\" rel=\"nofollow noreferrer\">source</a>), which makes me think you&#39;ve got some hidden whitespace chars in the text editor."}, {"owner": {"reputation": 685, "user_id": 7458849, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/89kDb.jpg?s=128&g=1", "display_name": "Theopap", "link": "https://stackoverflow.com/users/7458849/theopap"}, "reply_to_user": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1502362755, "post_id": 45561493, "comment_id": 78181783, "body": "Please check the update 1... the exact code I have above returns the exact results I have in update1... its weird that the email is showing nil, maybe I&#39;m missing something that I can&#39;t see. But it should be working!!"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1502364524, "post_id": 45561493, "comment_id": 78183009, "body": "Again: The only weird thing I can see is that <code>ema%E2%80%8C%E2%80%8Bil</code> parameter. Check exactly what you have saved here: <code>new_transaction_path(resource,  session[:registration_params].merge(ema\u200c\u200bil: resource.email))</code>. Also, you only need to write: <code>new_transaction_path(session[:registration_params].merge(ema&zwnj;&#8203;\u200c\u200bil: resource.email))</code>"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1502364587, "post_id": 45561493, "comment_id": 78183060, "body": "I&#39;m pretty sure there&#39;s two hidden characters in your text editor, between the <code>a</code> and <code>i</code> in <code>email</code>."}, {"owner": {"reputation": 685, "user_id": 7458849, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/89kDb.jpg?s=128&g=1", "display_name": "Theopap", "link": "https://stackoverflow.com/users/7458849/theopap"}, "reply_to_user": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1502368429, "post_id": 45561493, "comment_id": 78186059, "body": "I has some some hidden whitespace characters in the <code>new_transaction_path(session[:registration_params].merge(ema&zwnj;&#8203;il:resource.email))</code>.&zwnj;&#8203;.. I had to retype this line and it worked!!! Thanks for the pointers @Tom Lord I appreciate it!!!"}], "answers": [{"tags": [], "owner": {"reputation": 685, "user_id": 7458849, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/89kDb.jpg?s=128&g=1", "display_name": "Theopap", "link": "https://stackoverflow.com/users/7458849/theopap"}, "is_accepted": true, "score": 0, "last_activity_date": 1502368832, "creation_date": 1502368832, "answer_id": 45614027, "question_id": 45561493, "link": "https://stackoverflow.com/questions/45561493/pass-more-params-from-devise-registration-controller/45614027#45614027", "title": "Pass more params from devise registration controller", "body": "<p>I has some some hidden whitespace characters in the <code>new_transaction_path(session[:registration_params].merge(email:resource.email))</code>... I had to retype this line and it worked!!!</p>\n"}], "owner": {"reputation": 685, "user_id": 7458849, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/89kDb.jpg?s=128&g=1", "display_name": "Theopap", "link": "https://stackoverflow.com/users/7458849/theopap"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 868, "favorite_count": 0, "accepted_answer_id": 45614027, "answer_count": 1, "score": 0, "last_activity_date": 1502368832, "creation_date": 1502176025, "last_edit_date": 1502362596, "question_id": 45561493, "link": "https://stackoverflow.com/questions/45561493/pass-more-params-from-devise-registration-controller", "title": "Pass more params from devise registration controller", "body": "<p>From the<code>views/plans/new.html.erb</code> I get the plan_id and price params with the following:</p>\n\n<pre><code>&lt;%= link_to \"Sign up\", new_store_registration_path(:plan_id =&gt; plan.id, :price =&gt; plan.price) %&gt;\n</code></pre>\n\n<p>Then the app redirects to the sign-up page and with the methods <code>def after_inactive_sign_up_path_for(resource)</code> and <code>def after_sign_up_path_for(resource)</code> I keep the previous params and merge the email param: </p>\n\n<p>registrations_controller.rb</p>\n\n<pre><code>class Stores::RegistrationsController &lt;  Devise::RegistrationsController\n  before_action :configure_permitted_parameters, if: :devise_controller?\n\n   def new\n     build_resource({})\n     resource.build_account\n     respond_with self.resource\n     session[:registration_params] = request.query_parameters\n   end\n\n\n   def create\n     build_resource(sign_up_params)\n     resource.save\n     yield resource if block_given?\n     if resource.persisted?\n       if resource.active_for_authentication?\n         flash[:notice] = 'Successfully signed up'\n         respond_with resource, location:   after_sign_up_path_for(resource)\n       else\n         flash[:notice] = \"Signed up but #{resource.inactive_message}\"\n     expire_data_after_sign_in!\n     respond_with resource, location: after_inactive_sign_up_path_for(resource)\n       end\n     else\n       clean_up_passwords resource\n       set_minimum_password_length\n       respond_with resource\n     end\n   end\n\n\n   def edit\n     super\n   end\n\n\n   def update\n     super\n   end\n\n\n    def destroy\n     super\n    end\n\n    def cancel\n     super\n    end\n\n  protected\n\n   def configure_permitted_parameters\n     devise_parameter_sanitizer.permit(:sign_up) { |u|\n      u.permit(:email, :password, :password_confirmation, :remember_me,\n           :account_attributes =&gt; [:first_name, :last_name, :buisness_name,\n                                   :buisness_description, :web_site, :phone_number,\n                                   :street, :city, :state, :zip_code, :country])\n    }\n  end\n\n\n  def after_sign_up_path_for(resource)\n     new_transaction_path(resource,  session[:registration_params].merge(ema\u200c\u200bil: resource.email))\n  end\n\n   def after_inactive_sign_up_path_for(resource)\n     new_transaction_path(resource, session[:registration_params].merge(ema\u200c\u200bil: resource.email))\n   end\nend\n</code></pre>\n\n<p>After submit sign-up, the app redirects to the views/transcation/new.html.erb, which has the <code>plan_id</code>, <code>price</code>and <code>email</code> params. </p>\n\n<pre><code> Parameters: {\"ema\u200c\u200bil\"=&gt;\"example@gmail.com\", \"plan_id\"=&gt;\"bs96\", \"price\"=&gt;\"150.0\"}\n</code></pre>\n\n<p>And the url shows:</p>\n\n<pre><code>http://localhost:3000/transactions/new.1?ema%E2%80%8C%E2%80%8Bil=example%40gmail.com&amp;plan_id=bs96&amp;price=150.0\n</code></pre>\n\n<p>Inside the views/transcation/new.html.erb there is the braintree drop in ui and the script along with the three hidden fields:</p>\n\n<pre><code>&lt;div class=\"form-container radius-box glassy-bg small-10 small-centered medium-8 large-6 columns\"&gt;\n  &lt;%= form_tag transactions_path do%&gt;\n      &lt;div id=\"dropin\"&gt;&lt;/div&gt;\n      &lt;%= hidden_field_tag(:email, params[\"email\"]) %&gt;\n      &lt;%= hidden_field_tag(:plan_id, params[\"plan_id\"]) %&gt;\n      &lt;%= hidden_field_tag(:amount, params[\"price\"]) %&gt;\n      &lt;%=submit_tag \"Pay #{params[\"price\"]}$\", class: \"button mt1\" %&gt;\n  &lt;%end%&gt;\n&lt;/div&gt;\n\n&lt;script&gt;\n    braintree.setup(\"&lt;%=@client_token%&gt;\", 'dropin', {\n        container: 'dropin'\n    });\n&lt;/script&gt;\n</code></pre>\n\n<p>At this point I'm trying to keep the email param to the transaction with<br>\n<code>&lt;%= hidden_field_tag(:email, params[\"email\"]) %&gt;</code></p>\n\n<p>But if I click submit i'm not getting an email as you can see in the following: </p>\n\n<pre><code>Parameters: {\"utf8\"=&gt;\"\u2713\", \"authenticity_token\"=&gt;\"KeS2xK7NIJZwFQvW2kJKupcpURnQweq+yoRgk9AJ1aaOgFIIym4RKadI4jc6vYynMo4vKR4eLmdIynfBG+EusQ==\", \"email\"=&gt;\"\", \"plan_id\"=&gt;\"bs96\", \"amount\"=&gt;\"150.0\", \"payment_method_nonce\"=&gt;\"0c22f2fa-e212-0ad3-753b-0d183d02522b\"}\n</code></pre>\n\n<p>If I inspect the params inside the views/transcation/new.html.erb with this     <code>&lt;%= params.inspect %&gt;</code> it prints out this: <code>&lt;ActionController::Parameters {\"ema\u200c\u200bil\"=&gt;\"example@gmail.com\", \"plan_id\"=&gt;\"bs96\", \"price\"=&gt;\"150.0\", \"controller\"=&gt;\"transactions\", \"action\"=&gt;\"new\"} permitted: false&gt;</code></p>\n\n<p>And this <code>&lt;%= params[:email].inspect %&gt;</code> returns <code>nil</code></p>\n\n<p>Any ideas why I can't get the email param?</p>\n\n<p><strong>Update 1</strong></p>\n\n<p>After I click on the link sign-up:</p>\n\n<pre><code>   Started GET \"/stores/sign_up?plan_id=bs96&amp;price=150.0\" for 127.0.0.1 at 2017-08-10 13:46:23 +0300\nProcessing by Stores::RegistrationsController#new as HTML\n  Parameters: {\"plan_id\"=&gt;\"bs96\", \"price\"=&gt;\"150.0\"}\n  Rendering stores/registrations/new.html.erb within layouts/application\n  Rendered stores/shared/_links.html.erb (1.2ms)\n  Rendered stores/registrations/new.html.erb within layouts/application (14.8ms)\nCompleted 200 OK in 110ms (Views: 46.9ms | ActiveRecord: 1.9ms)\n</code></pre>\n\n<p>After submit sign-up:</p>\n\n<pre><code>  Started POST \"/stores\" for 127.0.0.1 at 2017-08-10 13:47:07 +0300\nProcessing by Stores::RegistrationsController#create as HTML\n  Parameters: {\"utf8\"=&gt;\"\u2713\", \"authenticity_token\"=&gt;\"A65CebXfvIw14X7tnOYrrtjfbB3uZzMtcbmd2IFc91yKt8KSyKToJt2kIl3xyV6AK9HVfQrXFpLG9RPtrvUOrw==\", \"store\"=&gt;{\"email\"=&gt;\"example@gmail.com\", \"password\"=&gt;\"[FILTERED]\", \"password_confirmation\"=&gt;\"[FILTERED]\", \"account_attributes\"=&gt;{\"first_name\"=&gt;\"david\", \"last_name\"=&gt;\"davisp\", \"buisness_name\"=&gt;\"1\", \"buisness_description\"=&gt;\"1\", \"web_site\"=&gt;\"1\", \"phone_number\"=&gt;\"1\", \"street\"=&gt;\"1\", \"city\"=&gt;\"1\", \"state\"=&gt;\"1\", \"zip_code\"=&gt;\"1\", \"country\"=&gt;\"1\"}}, \"commit\"=&gt;\"Sign up\"}\n   (0.1ms)  begin transaction\n  Store Exists (0.1ms)  SELECT  1 AS one FROM \"stores\" WHERE \"stores\".\"email\" = ? LIMIT ?  [[\"email\", \"example@gmail.com\"], [\"LIMIT\", 1]]\n  SQL (0.4ms)  INSERT INTO \"stores\" (\"email\", \"encrypted_password\", \"created_at\", \"updated_at\") VALUES (?, ?, ?, ?)  [[\"email\", \"example@gmail.com\"], [\"encrypted_password\", \"$2a$11$DN/K2dBlo4DzoVf9uMlD9uo8iKYp14ROT8w3eR9Tt8fD7B1ksdvt.\"], [\"created_at\", \"2017-08-10 10:47:07.920623\"], [\"updated_at\", \"2017-08-10 10:47:07.920623\"]]\n  SQL (0.2ms)  INSERT INTO \"accounts\" (\"buisness_name\", \"buisness_description\", \"web_site\", \"phone_number\", \"street\", \"zip_code\", \"country\", \"first_name\", \"last_name\", \"created_at\", \"updated_at\", \"store_id\", \"city\", \"state\") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)  [[\"buisness_name\", \"1\"], [\"buisness_description\", \"1\"], [\"web_site\", \"1\"], [\"phone_number\", \"1\"], [\"street\", \"1\"], [\"zip_code\", \"1\"], [\"country\", \"1\"], [\"first_name\", \"david\"], [\"last_name\", \"davisp\"], [\"created_at\", \"2017-08-10 10:47:07.922113\"], [\"updated_at\", \"2017-08-10 10:47:07.922113\"], [\"store_id\", 1], [\"city\", \"1\"], [\"state\", \"1\"]]\n   (10.0ms)  commit transaction\nRedirected to http://localhost:3000/transactions/new.1?ema%E2%80%8C%E2%80%8Bil=example%40gmail.com&amp;plan_id=bs96&amp;price=150.0\n Completed 302 Found in 161ms (ActiveRecord: 10.7ms)\n</code></pre>\n\n<p>Redirected to views/plans/new.html.erb :</p>\n\n<pre><code>   Started GET \"/transactions/new.1?ema%E2%80%8C%E2%80%8Bil=example%40gmail.com&amp;plan_id=bs96&amp;price=150.0\" for 127.0.0.1 at 2017-08-10 13:47:07 +0300\nProcessing by TransactionsController#new as \n  Parameters: {\"ema\u200c\u200bil\"=&gt;\"example@gmail.com\", \"plan_id\"=&gt;\"bs96\", \"price\"=&gt;\"150.0\"}\n  Rendering transactions/new.html.erb within layouts/application\n  Rendered transactions/new.html.erb within layouts/application (1.8ms)\nCompleted 200 OK in 1106ms (Views: 42.0ms | ActiveRecord: 0.0ms)    \n</code></pre>\n\n<p>Finally if I click pay on views/plans/new.html.erb :</p>\n\n<pre><code>Started POST \"/transactions\" for 127.0.0.1 at 2017-08-10 13:47:24 +0300\nProcessing by TransactionsController#create as HTML\nParameters: {\"utf8\"=&gt;\"\u2713\", \"authenticity_token\"=&gt;\"x/FWkCSqla3ugmaOgP79RySg6HMpafZel5ddl7nzIRZO6NZ7Wd HBBwbHOj7t0Yhp165RE83Z0+Eg29OillrY5Q==\", \"email\"=&gt;\"\", \"plan_id\"=&gt;\"bs96\", \"amount\"=&gt;\"150.0\", \"payment_method_nonce\"=&gt;\"fb99a62a-025d-0283-5932-fb3a297cc0e9\"}\n898559083\n8yx4w8\nRedirected to http://localhost:3000/\nCompleted 302 Found in 2535ms (ActiveRecord: 0.0ms)\n</code></pre>\n"}, {"tags": ["ruby", "sockets", "nginx", "deployment", "tcp"], "comments": [{"owner": {"reputation": 7224, "user_id": 448934, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TXtux.jpg?s=128&g=1", "display_name": "Pascal", "link": "https://stackoverflow.com/users/448934/pascal"}, "edited": false, "score": 0, "creation_date": 1502174858, "post_id": 45560738, "comment_id": 78081496, "body": "You will need to <b>daemonize</b> your ruby script."}, {"owner": {"reputation": 517, "user_id": 796283, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6454292803d9f216fc8c65b9e5715850?s=128&d=identicon&r=PG", "display_name": "Shobhit", "link": "https://stackoverflow.com/users/796283/shobhit"}, "reply_to_user": {"reputation": 7224, "user_id": 448934, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TXtux.jpg?s=128&g=1", "display_name": "Pascal", "link": "https://stackoverflow.com/users/448934/pascal"}, "edited": false, "score": 0, "creation_date": 1502175196, "post_id": 45560738, "comment_id": 78081688, "body": "@pascalbetz Yeah I got that from reading, and thought putting <code>&amp;</code> at the end of the command ought to do it, but it doesn&#39;t. How do you suggest daemonizing it?"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1502175690, "post_id": 45560738, "comment_id": 78081981, "body": "You could either use a gem like <a href=\"https://github.com/thuehlinger/daemons\" rel=\"nofollow noreferrer\">daemons</a> to make the script daemonize itself or an external utility like <a href=\"http://cr.yp.to/daemontools.html\" rel=\"nofollow noreferrer\">daemontools</a> that can daemonize (and manage) arbitrary scripts."}, {"owner": {"reputation": 7224, "user_id": 448934, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TXtux.jpg?s=128&g=1", "display_name": "Pascal", "link": "https://stackoverflow.com/users/448934/pascal"}, "edited": false, "score": 0, "creation_date": 1502179138, "post_id": 45560738, "comment_id": 78084076, "body": "@Shobhit please try one of the solutions proposed by Stefan. Should you have any problems then you can ask a more specific question."}, {"owner": {"reputation": 517, "user_id": 796283, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6454292803d9f216fc8c65b9e5715850?s=128&d=identicon&r=PG", "display_name": "Shobhit", "link": "https://stackoverflow.com/users/796283/shobhit"}, "edited": false, "score": 0, "creation_date": 1502182880, "post_id": 45560738, "comment_id": 78086679, "body": "Have used <code>Process.daemon</code> for now which works, but doesn&#39;t start the server if the machine restarts, or the process is killed."}], "answers": [{"comments": [{"owner": {"reputation": 517, "user_id": 796283, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6454292803d9f216fc8c65b9e5715850?s=128&d=identicon&r=PG", "display_name": "Shobhit", "link": "https://stackoverflow.com/users/796283/shobhit"}, "edited": false, "score": 0, "creation_date": 1502182824, "post_id": 45562630, "comment_id": 78086631, "body": "Yes, I&#39;ve done these, the thing is I need to start them again if the server restarts, and the process doesn&#39;t restart itself if killed."}], "tags": [], "owner": {"reputation": 5210, "user_id": 1009442, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/2a01ae9942939ee2b3954a6727d2bb92?s=128&d=identicon&r=PG", "display_name": "Weihang Jian", "link": "https://stackoverflow.com/users/1009442/weihang-jian"}, "is_accepted": false, "score": 1, "last_activity_date": 1502184645, "last_edit_date": 1502184645, "creation_date": 1502179400, "answer_id": 45562630, "question_id": 45560738, "link": "https://stackoverflow.com/questions/45560738/deploy-a-tcp-server-written-in-ruby/45562630#45562630", "title": "Deploy a TCP Server written in Ruby", "body": "<p>Solution 1: <code>tmux</code> or <code>screen</code></p>\n\n<p>This is the simplest way to approach, you will have to create a tmux or screen session, then start your server in that session.</p>\n\n<p>Solution 2: <code>nohup</code></p>\n\n<pre><code>nohup ruby lib/tcp_server.rb &gt; stdout.log 2&gt; stderr.log &amp;\n</code></pre>\n\n<p>You've tried <code>nohup</code> and using <code>&amp;</code>, I suppose you've already known how to do.</p>\n\n<p>Solution 3: daemonize</p>\n\n<p>You can detach from the shell and daemonize the process by forking \nit twice, setting the session ID and changing the current working directory.</p>\n\n<pre><code>def daemonize\n  exit if fork\n  Process.setsid\n  exit if fork\n  Dir.chdir '/'\nend\n</code></pre>\n\n<p>With this approach, you will have to redirect stdout and stderr to keep logs.</p>\n\n<p>Another way to daemonize is to use gems like <a href=\"https://github.com/thuehlinger/daemons\" rel=\"nofollow noreferrer\">daemons</a>.</p>\n\n<p>update:</p>\n\n<p>To restart the process automatically after being killed, you need a process manager like <a href=\"https://github.com/mojombo/god\" rel=\"nofollow noreferrer\">god</a> or <a href=\"https://github.com/Unitech/pm2\" rel=\"nofollow noreferrer\">pm2</a>.</p>\n\n<p>To start the process automatically after booting, you need to compose an <a href=\"https://www.wikiwand.com/en/Init\" rel=\"nofollow noreferrer\">init scripts</a> but how it looks like depends on your service management system and operating system. One of the most well-known is System V. If you are using Ubuntu, you might want to take a look at <a href=\"https://www.wikiwand.com/en/Upstart\" rel=\"nofollow noreferrer\">Upstart</a> or <a href=\"https://www.wikiwand.com/en/Systemd\" rel=\"nofollow noreferrer\">systemd</a>.</p>\n"}], "owner": {"reputation": 517, "user_id": 796283, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6454292803d9f216fc8c65b9e5715850?s=128&d=identicon&r=PG", "display_name": "Shobhit", "link": "https://stackoverflow.com/users/796283/shobhit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 173, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1502184645, "creation_date": 1502173500, "question_id": 45560738, "link": "https://stackoverflow.com/questions/45560738/deploy-a-tcp-server-written-in-ruby", "title": "Deploy a TCP Server written in Ruby", "body": "<p>I've written a TCP Server in ruby running on port 2000 with event machine.</p>\n\n<p>Right now, what I do is ssh to my server and run the command <code>ruby lib/tcp_server.rb</code> to turn on the server, but it shuts down when I log out.</p>\n\n<p>I've tried nohup and using <code>&amp;</code> but nothing seems to stick for the server for a long time.</p>\n\n<p>So my question is, how do I deploy this server on port 2000 and keep it running, like how we deploy Rails to nginx.</p>\n\n<p>It's not a webserver, but an a tcp server for a connected device, if that helps.</p>\n\n<p>Thanks!</p>\n"}]