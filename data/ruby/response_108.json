[{"tags": ["ruby-on-rails", "ruby", "controller", "render"], "comments": [{"owner": {"reputation": 7972, "user_id": 1297435, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/a9a1330f0e323fabed39f561f1b0d94c?s=128&d=identicon&r=PG", "display_name": "rails_id", "link": "https://stackoverflow.com/users/1297435/rails-id"}, "edited": false, "score": 1, "creation_date": 1485993614, "post_id": 41992087, "comment_id": 71161150, "body": "action <code>show</code> no exist in your controller"}, {"owner": {"reputation": 43, "user_id": 5078710, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3f9b0163879863b7c4a38f4893141c00?s=128&d=identicon&r=PG&f=1", "display_name": "imjustaguy", "link": "https://stackoverflow.com/users/5078710/imjustaguy"}, "reply_to_user": {"reputation": 7972, "user_id": 1297435, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/a9a1330f0e323fabed39f561f1b0d94c?s=128&d=identicon&r=PG", "display_name": "rails_id", "link": "https://stackoverflow.com/users/1297435/rails-id"}, "edited": false, "score": 0, "creation_date": 1485993772, "post_id": 41992087, "comment_id": 71161212, "body": "yeah i know i will solve that issue later, the problem is entering there because there is no restaurant id"}, {"owner": {"reputation": 7972, "user_id": 1297435, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/a9a1330f0e323fabed39f561f1b0d94c?s=128&d=identicon&r=PG", "display_name": "rails_id", "link": "https://stackoverflow.com/users/1297435/rails-id"}, "edited": false, "score": 0, "creation_date": 1485997540, "post_id": 41992087, "comment_id": 71162298, "body": "You call <code>@restaurant</code> in <code>create</code> action but <code>@restaurant</code> not defined."}, {"owner": {"reputation": 43, "user_id": 5078710, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3f9b0163879863b7c4a38f4893141c00?s=128&d=identicon&r=PG&f=1", "display_name": "imjustaguy", "link": "https://stackoverflow.com/users/5078710/imjustaguy"}, "reply_to_user": {"reputation": 7972, "user_id": 1297435, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/a9a1330f0e323fabed39f561f1b0d94c?s=128&d=identicon&r=PG", "display_name": "rails_id", "link": "https://stackoverflow.com/users/1297435/rails-id"}, "edited": false, "score": 0, "creation_date": 1485997707, "post_id": 41992087, "comment_id": 71162350, "body": "you are not getting my problem :/, im conscious of that problem but is not my issue right now, its missing the id that im sending in the render"}, {"owner": {"reputation": 7972, "user_id": 1297435, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/a9a1330f0e323fabed39f561f1b0d94c?s=128&d=identicon&r=PG", "display_name": "rails_id", "link": "https://stackoverflow.com/users/1297435/rails-id"}, "edited": false, "score": 0, "creation_date": 1485997985, "post_id": 41992087, "comment_id": 71162429, "body": "can you show us, where you define a <code>@restaurant</code> variable so that you call <code>@restaurant</code> on <code>create</code> action?"}, {"owner": {"reputation": 43, "user_id": 5078710, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3f9b0163879863b7c4a38f4893141c00?s=128&d=identicon&r=PG&f=1", "display_name": "imjustaguy", "link": "https://stackoverflow.com/users/5078710/imjustaguy"}, "reply_to_user": {"reputation": 7972, "user_id": 1297435, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/a9a1330f0e323fabed39f561f1b0d94c?s=128&d=identicon&r=PG", "display_name": "rails_id", "link": "https://stackoverflow.com/users/1297435/rails-id"}, "edited": false, "score": 0, "creation_date": 1485998119, "post_id": 41992087, "comment_id": 71162459, "body": "i think i put the wrong image, the @restaurant is defined in my other controller named Restaurant which have the show def where i send <code>&lt;%= render template: &#39;dishes&#47;new&#39;, :id =&gt; @restaurant.id %&gt;</code>, then in my dishes controller, inside of my create def i have <code>@dish.restaurant_id = params[:id]</code>"}], "answers": [{"comments": [{"owner": {"reputation": 43, "user_id": 5078710, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3f9b0163879863b7c4a38f4893141c00?s=128&d=identicon&r=PG&f=1", "display_name": "imjustaguy", "link": "https://stackoverflow.com/users/5078710/imjustaguy"}, "edited": false, "score": 0, "creation_date": 1485993998, "post_id": 41992141, "comment_id": 71161288, "body": "yeah but its entering in the else because it dont detect the restaurant id that im sending in the render"}], "tags": [], "owner": {"reputation": 240, "user_id": 4107425, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ImZTd.jpg?s=128&g=1", "display_name": "xDJR1875", "link": "https://stackoverflow.com/users/4107425/xdjr1875"}, "is_accepted": false, "score": 0, "last_activity_date": 1485993927, "creation_date": 1485993927, "answer_id": 41992141, "question_id": 41992087, "link": "https://stackoverflow.com/questions/41992087/access-to-a-param-in-another-controller-sended-by-render-template/41992141#41992141", "title": "Access to a param in another controller sended by render :template", "body": "<p>The error is saying that your controller named Restaurants does not have an action named \"Show\".</p>\n\n<p>One solution would be to add the Action with the name \"Show\" to the restaurant controller.</p>\n\n<p>The other option may be that you actually created the action you wanted, but you named it something other than \"Show\".</p>\n"}, {"comments": [{"owner": {"reputation": 43, "user_id": 5078710, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3f9b0163879863b7c4a38f4893141c00?s=128&d=identicon&r=PG&f=1", "display_name": "imjustaguy", "link": "https://stackoverflow.com/users/5078710/imjustaguy"}, "edited": false, "score": 0, "creation_date": 1486164610, "post_id": 42016269, "comment_id": 71243624, "body": "thats what i do and works! but i use this line <code>&lt;%= f.hidden_field :restaurant_id, value: params[id] %&gt;</code> cause i already getting the param, i try to put <code>@id = params[:id]</code> in the create controller of Dishes and use <code>&lt;%= f.hidden_field :restaurant_id, value: @id %&gt;</code> but didnt work, it only works with the first"}], "tags": [], "owner": {"reputation": 635, "user_id": 2354830, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/cfd4a077611b116084438f512ef24f33?s=128&d=identicon&r=PG", "display_name": "oolong", "link": "https://stackoverflow.com/users/2354830/oolong"}, "is_accepted": true, "score": 0, "last_activity_date": 1486092485, "creation_date": 1486092485, "answer_id": 42016269, "question_id": 41992087, "link": "https://stackoverflow.com/questions/41992087/access-to-a-param-in-another-controller-sended-by-render-template/42016269#42016269", "title": "Access to a param in another controller sended by render :template", "body": "<p>I think your problem comes in when you are expecting your <code>render template: 'dishes/new'</code> to hit your <code>DishesController</code>. That is not what is happening when you are calling the render. </p>\n\n<p>What you're doing is telling rails to load into your current view the template for <code>'dishes/new'</code>, and you're passing <code>'dishes/new'</code> a variable that it can access when rendering. You aren't sending a param to a controller. </p>\n\n<p>If you want to keep the current set up you have right now, you can make it work with some tweaking.</p>\n\n<p>I'm going to assume that your <code>Dish</code> model belongs to <code>Restaurant</code>, and therefore has <code>restaurant_id</code> as a column. If that is true, then you can add a hidden field to your form for dishes, called <code>restaurant_id</code>, and update your permitted params in your controller to allow the restaurant id to be set on the dish.</p>\n\n<p>Your form would look like this:</p>\n\n<pre class=\"lang-html prettyprint-override\"><code>&lt;%= form_for @dish, :url =&gt; { :controller =&gt; \"dishes\", action_name =&gt; \"create\" } do |f| %&gt;\n  &lt;%= f.hidden_field :restaurant_id, value: id %&gt;\n  ...\n&lt;% end %&gt;\n</code></pre>\n\n<p>Your permitted params in your controller would look like this:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>def dish_params\n  params.require(:dish).permit(:avatar, :name, :description, :restaurant_id)\nend\n</code></pre>\n\n<p>You can get more information on how the rails rendering is working <a href=\"http://guides.rubyonrails.org/layouts_and_rendering.html\" rel=\"nofollow noreferrer\">here</a></p>\n"}], "owner": {"reputation": 43, "user_id": 5078710, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3f9b0163879863b7c4a38f4893141c00?s=128&d=identicon&r=PG&f=1", "display_name": "imjustaguy", "link": "https://stackoverflow.com/users/5078710/imjustaguy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 193, "favorite_count": 0, "accepted_answer_id": 42016269, "answer_count": 2, "score": 0, "last_activity_date": 1486092485, "creation_date": 1485993513, "last_edit_date": 1486065713, "question_id": 41992087, "link": "https://stackoverflow.com/questions/41992087/access-to-a-param-in-another-controller-sended-by-render-template", "title": "Access to a param in another controller sended by render :template", "body": "<p>So im sending a param from a view to a view of another controller</p>\n\n<pre><code>&lt;%= render template: 'dishes/new', :id =&gt; @restaurant.id %&gt;\n</code></pre>\n\n<p>and this is my other controller view:</p>\n\n<pre><code>  def new\n    @dish = Dish.new\n     @id = params[:id]\n  end\n\n  def create\n    @dish = Dish.new(dish_params)\n\n    respond_to do |format|\n      if @dish.save\n        format.html { redirect_to @restaurant, notice: 'dish was successfully created.' }\n        format.json { render action: 'show', status: :created, location: :restaurant }\n      else\n        format.html { render action: 'show', location: :restaurant  }\n        format.json { render json: @restaurant.errors, status: :unprocessable_entity }\n      end\n    end\n  end\n\nprivate\n  def dish_params\n    params.require(:dish).permit( :avatar, :name, :description, [:id])\n  end\n</code></pre>\n\n<p>and this is my view who calls the form:</p>\n\n<pre><code>#new.html.erb\n&lt;h1&gt;Add a new dish&lt;/h1&gt;\n\n&lt;%= render 'dishes/dish_form' %&gt;\n</code></pre>\n\n<p>then here is the form:</p>\n\n<pre><code>&lt;%= form_for @dish, :url =&gt; { :controller =&gt; \"dishes\", action_name =&gt; \"create\" } do |f| %&gt;\n  &lt;div class=\"field\"&gt;\n    &lt;%= f.label :dish_name %&gt;\n    &lt;%= f.text_field :name %&gt;\n  &lt;/div&gt;\n   &lt;div class=\"field\"&gt;\n    &lt;%= f.label :description %&gt;\n    &lt;%= f.text_field :description %&gt;\n  &lt;/div&gt;\n  &lt;div class=\"field\"&gt;\n    &lt;%= f.label :image %&gt;\n    &lt;%= f.file_field :avatar %&gt;\n  &lt;/div&gt;\n  &lt;div class=\"actions\"&gt;\n    &lt;%= f.submit 'Add new dish' %&gt;\n  &lt;/div&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>but when i try to save it i got this error:\n<a href=\"https://i.stack.imgur.com/PXD8j.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/PXD8j.png\" alt=\"error\"></a></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "file", "rubygems"], "answers": [{"comments": [{"owner": {"reputation": 177, "user_id": 6319096, "user_type": "registered", "accept_rate": 24, "profile_image": "https://www.gravatar.com/avatar/71e81a4a051a62a7d716d3d8aa5b28fa?s=128&d=identicon&r=PG&f=1", "display_name": "koz", "link": "https://stackoverflow.com/users/6319096/koz"}, "edited": false, "score": 0, "creation_date": 1485992948, "post_id": 41991968, "comment_id": 71160918, "body": "Thank you. how do I clone it?"}, {"owner": {"reputation": 2958, "user_id": 3597730, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/d76b8f632aeb1d920d79d7dd5ab63097?s=128&d=identicon&r=PG", "display_name": "ruby_newbie", "link": "https://stackoverflow.com/users/3597730/ruby-newbie"}, "reply_to_user": {"reputation": 177, "user_id": 6319096, "user_type": "registered", "accept_rate": 24, "profile_image": "https://www.gravatar.com/avatar/71e81a4a051a62a7d716d3d8aa5b28fa?s=128&d=identicon&r=PG&f=1", "display_name": "koz", "link": "https://stackoverflow.com/users/6319096/koz"}, "edited": false, "score": 0, "creation_date": 1485993044, "post_id": 41991968, "comment_id": 71160954, "body": "Assuming you are using github: <a href=\"https://help.github.com/articles/cloning-a-repository/\" rel=\"nofollow noreferrer\">help.github.com/articles/cloning-a-repository</a>"}, {"owner": {"reputation": 177, "user_id": 6319096, "user_type": "registered", "accept_rate": 24, "profile_image": "https://www.gravatar.com/avatar/71e81a4a051a62a7d716d3d8aa5b28fa?s=128&d=identicon&r=PG&f=1", "display_name": "koz", "link": "https://stackoverflow.com/users/6319096/koz"}, "edited": false, "score": 0, "creation_date": 1485993131, "post_id": 41991968, "comment_id": 71160980, "body": "I don&#39;t have GitHub is there another way to do it?"}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1486037286, "post_id": 41991968, "comment_id": 71179908, "body": "You only need git to clone a github repository. You don&#39;t need any GitHub account if the repository is public."}, {"owner": {"reputation": 2958, "user_id": 3597730, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/d76b8f632aeb1d920d79d7dd5ab63097?s=128&d=identicon&r=PG", "display_name": "ruby_newbie", "link": "https://stackoverflow.com/users/3597730/ruby-newbie"}, "edited": false, "score": 0, "creation_date": 1486051517, "post_id": 41991968, "comment_id": 71189675, "body": "You don&#39;t have to use github but I would strongly advise you use git(not just for this but in general).  Bitbucket is a good if you need a private repo."}], "tags": [], "owner": {"reputation": 2958, "user_id": 3597730, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/d76b8f632aeb1d920d79d7dd5ab63097?s=128&d=identicon&r=PG", "display_name": "ruby_newbie", "link": "https://stackoverflow.com/users/3597730/ruby-newbie"}, "is_accepted": false, "score": 0, "last_activity_date": 1485992814, "creation_date": 1485992814, "answer_id": 41991968, "question_id": 41991887, "link": "https://stackoverflow.com/questions/41991887/how-do-i-include-new-gems-that-are-automatically-there-whenever-i-create-a-new-r/41991968#41991968", "title": "How do I include new gems that are automatically there whenever I create a new rails app?", "body": "<p>I have a starter template for new rails apps that I use.  Basically has my testing gems ect. and certain folders that I like created in each.  Basically rather than rails newing I will just clone the starter repo.  </p>\n"}, {"tags": [], "owner": {"reputation": 483, "user_id": 7474561, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc0cb51bd61ff4715e3bec92f79f5f46?s=128&d=identicon&r=PG&f=1", "display_name": "KcUS_unico", "link": "https://stackoverflow.com/users/7474561/kcus-unico"}, "is_accepted": false, "score": 0, "last_activity_date": 1486037062, "creation_date": 1486037062, "answer_id": 42001798, "question_id": 41991887, "link": "https://stackoverflow.com/questions/41991887/how-do-i-include-new-gems-that-are-automatically-there-whenever-i-create-a-new-r/42001798#42001798", "title": "How do I include new gems that are automatically there whenever I create a new rails app?", "body": "<p>I think he might be referring to just having an initial app that you can clone yourself like <code>copy+paste</code></p>\n\n<p>It's a nice idea, but I don't know an automated solution to this. </p>\n"}], "owner": {"reputation": 177, "user_id": 6319096, "user_type": "registered", "accept_rate": 24, "profile_image": "https://www.gravatar.com/avatar/71e81a4a051a62a7d716d3d8aa5b28fa?s=128&d=identicon&r=PG&f=1", "display_name": "koz", "link": "https://stackoverflow.com/users/6319096/koz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 32, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1486037062, "creation_date": 1485992386, "question_id": 41991887, "link": "https://stackoverflow.com/questions/41991887/how-do-i-include-new-gems-that-are-automatically-there-whenever-i-create-a-new-r", "title": "How do I include new gems that are automatically there whenever I create a new rails app?", "body": "<p>Usually, I paste the gem code in the gem file and bundle install. But I realised I have multiple gems I use over and over. How do I include those gems automatically whenever I create a new rails app?</p>\n\n<p>Any help appreciated. I'm still new. Thank you</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 932, "user_id": 4813012, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/843ce86dce04f2792c0acc1da263a30c?s=128&d=identicon&r=PG&f=1", "display_name": "geoboy", "link": "https://stackoverflow.com/users/4813012/geoboy"}, "edited": false, "score": 0, "creation_date": 1505592157, "post_id": 41991849, "comment_id": 79479409, "body": "Did you ever find a solution to this?"}, {"owner": {"reputation": 71, "user_id": 3346329, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000964904901/picture?type=large", "display_name": "Martin", "link": "https://stackoverflow.com/users/3346329/martin"}, "reply_to_user": {"reputation": 932, "user_id": 4813012, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/843ce86dce04f2792c0acc1da263a30c?s=128&d=identicon&r=PG&f=1", "display_name": "geoboy", "link": "https://stackoverflow.com/users/4813012/geoboy"}, "edited": false, "score": 0, "creation_date": 1510075497, "post_id": 41991849, "comment_id": 81277489, "body": "Yes. You need to define <code>Scope</code> class in <code>ApplicationPolicy</code> first."}], "owner": {"reputation": 71, "user_id": 3346329, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000964904901/picture?type=large", "display_name": "Martin", "link": "https://stackoverflow.com/users/3346329/martin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 144, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1485993119, "creation_date": 1485992184, "last_edit_date": 1485992801, "question_id": 41991849, "link": "https://stackoverflow.com/questions/41991849/nested-class-is-not-loaded-in-rails-5", "title": "Nested class is not loaded in Rails 5", "body": "<p>I'm using Pundit gem with Rails 5. Policy class looks like this:</p>\n\n<pre><code>class ModelPolicy &lt; ApplicationPolicy\n  class Scope &lt; Scope\n    def resolve\n      scope\n    end\n  end\n\n  def index?\n    ...\n  end\nend\n</code></pre>\n\n<p>Policies are in 'app/policies' folder, so they are autoloaded. With Rails 4 it worked as a charm but now I'm getting <code>NameError: uninitialized constant ModelPolicy::Scope</code>. Any ideas why? </p>\n"}, {"tags": ["ruby", "regex", "string", "position"], "answers": [{"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": true, "score": 0, "last_activity_date": 1486025615, "last_edit_date": 1486025615, "creation_date": 1486006277, "answer_id": 41993725, "question_id": 41991841, "link": "https://stackoverflow.com/questions/41991841/how-do-i-figure-out-the-position-of-where-a-regex-ends/41993725#41993725", "title": "How do I figure out the position of where a regex ends?", "body": "<pre><code>line = \"1 a b     c d\"\nstring_tokens = [\"a\", \"b\", \"c\", \"d\"]\n</code></pre>\n\n<p>I believe the OP intended to form the regular expression as follows.</p>\n\n<pre><code>r = /#{string_tokens.join('\\s+')}/\n  #=&gt; /a\\s+b\\s+c\\s+d/\n</code></pre>\n\n<p>Then</p>\n\n<pre><code>line =~ r\n  #=&gt; 2\n</code></pre>\n\n<p>tells us there is a match beginning at offset <code>2</code> of <code>line</code>. To find where the match ends we can use either of the following methods.</p>\n\n<p><strong>First way</strong></p>\n\n<pre><code>(line =~ r) + line[r].size - 1\n  #=&gt; 12\n</code></pre>\n\n<p>as</p>\n\n<pre><code>line[r]\n  #=&gt; \"a b     c d\" \n</code></pre>\n\n<p><strong>Second way</strong></p>\n\n<p>This uses <a href=\"http://ruby-doc.org/core-2.3.0/Regexp.html#method-c-last_match\" rel=\"nofollow noreferrer\">Regexp::last_match</a> and <a href=\"https://ruby-doc.org/core-2.2.0/MatchData.html#method-i-end\" rel=\"nofollow noreferrer\">MachData#end</a>.</p>\n\n<pre><code>line =~ r\n  #=&gt; 2\n\nRegexp.last_match.end(0)-1\n  #=&gt; 12\n</code></pre>\n\n<p><code>LastMatchend(n)</code> returns \"the offset of the character immediately following the end of the nth element of the match array in the string\". Hence, the need for <code>-1</code>.</p>\n"}], "owner": {"reputation": 16802, "user_id": 1235929, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/9f460ae7deb6fa19034c810a53b9fbac?s=128&d=identicon&r=PG", "display_name": "Dave", "link": "https://stackoverflow.com/users/1235929/dave"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 34, "favorite_count": 0, "accepted_answer_id": 41993725, "answer_count": 1, "score": 0, "last_activity_date": 1486025615, "creation_date": 1485992133, "question_id": 41991841, "link": "https://stackoverflow.com/questions/41991841/how-do-i-figure-out-the-position-of-where-a-regex-ends", "title": "How do I figure out the position of where a regex ends?", "body": "<p>Using Ruby 2.4.  If I want to find out the position of a where a regex occurs in a string, I can do</p>\n\n<pre><code>2.4.0 :014 &gt; line = \"1 a b     c d\"\n =&gt; \"1 a b     c d\" \n2.4.0 :015 &gt; string_tokens = [\"a\", \"b\", \"c\", \"d\"]\n =&gt; [\"a\", \"b\", \"c\", \"d\"] \n\n2.4.0 :025 &gt; first_pos = line.index( /#{string_tokens.join(\" \").gsub(\" \", \"\\s+\")}/ )\n =&gt; 7\n</code></pre>\n\n<p>but how would I determine the position of where the regex ends in the string?</p>\n"}, {"tags": ["arrays", "ruby"], "answers": [{"tags": [], "owner": {"reputation": 32451, "user_id": 2516474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a2179a340c0e84edc285d432211145d?s=128&d=identicon&r=PG", "display_name": "SteveTurczyn", "link": "https://stackoverflow.com/users/2516474/steveturczyn"}, "is_accepted": false, "score": 0, "last_activity_date": 1485989641, "creation_date": 1485989641, "answer_id": 41991356, "question_id": 41991165, "link": "https://stackoverflow.com/questions/41991165/how-do-i-combine-two-arrays-based-on-the-index-of-their-elements/41991356#41991356", "title": "How do I combine two arrays based on the index of their elements?", "body": "<p>I would do...</p>\n\n<pre><code>a &lt;&lt; nil while a.length &lt; b.length\na.zip(b).map(&amp;:compact)\n</code></pre>\n\n<p>This will change your <code>a</code> array, though, so you may want to do the operation on a <code>dup</code> of a.</p>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user7055375"}, "edited": false, "score": 0, "creation_date": 1485990563, "post_id": 41991364, "comment_id": 71160177, "body": "If I wanted a &quot;nil&quot; element to appear in the case where one of the arrays is longer, how would I do taht?  So, for example, your case 2 woudl result in [[1, 4], [2, 5], [3, 6], [7, nil], [8, nil]] .  I realize this is a slightly different question so if you want me to do a different post I can do taht.  Thanks"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1485998460, "post_id": 41991364, "comment_id": 71162549, "body": "1. <code>a</code> is mutated in case 2. The OP did not say if that was permitted (in which case we should assume it&#39;s a no-no), but even if that&#39;s OK, <code>a</code> is not mutated in case 1. That inconsistency is a potential problem. 2. <code>map(&amp;:flatten)</code> has no effect if, as in the example, the elements of the arrays are not themselves arrays. If, however, they are arrays we might have <code>a = [[[1,2],3],4]; b = [5,6]; c = a.zip(b) #=&gt; [[[[1, 2], 3], 5], [4, 6]], which is what we would expect, but </code>c.map(&amp;:flatten) #=&gt; [[1, 2, 3, 5], [4, 6]]`, which is not part of the specification."}, {"owner": {"reputation": 6814, "user_id": 5227053, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/30254853024c1381c7e51ca09b9341e7?s=128&d=identicon&r=PG&f=1", "display_name": "AnoE", "link": "https://stackoverflow.com/users/5227053/anoe"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1486045606, "post_id": 41991364, "comment_id": 71185445, "body": "Thanks, @CarySwoveland, added a note to the answer."}], "tags": [], "owner": {"reputation": 6814, "user_id": 5227053, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/30254853024c1381c7e51ca09b9341e7?s=128&d=identicon&r=PG&f=1", "display_name": "AnoE", "link": "https://stackoverflow.com/users/5227053/anoe"}, "is_accepted": true, "score": 1, "last_activity_date": 1486045591, "last_edit_date": 1486045591, "creation_date": 1485989684, "answer_id": 41991364, "question_id": 41991165, "link": "https://stackoverflow.com/questions/41991165/how-do-i-combine-two-arrays-based-on-the-index-of-their-elements/41991364#41991364", "title": "How do I combine two arrays based on the index of their elements?", "body": "<p>From the docs: </p>\n\n<blockquote>\n  <p>If the size of any argument is less than the size of the initial array, nil values are supplied.</p>\n</blockquote>\n\n<p>So you do not need to worry about the case where the second array is shorter.</p>\n\n<p>If the first array is shorter, pad it out with <code>nil</code> to the length of the second array.</p>\n\n<p>You can use <code>compact</code> to remove the superfluous <code>nil</code>s afterwards.</p>\n\n<h1>Case 1: <code>a</code> is longer</h1>\n\n<pre><code>a = [1, 2, 3, 4, 5]\nb = [6, 7, 8]\n\na[b.count-1] ||= nil\na.zip(b).map(&amp;:flatten).map(&amp;:compact)\n</code></pre>\n\n<p>Result:</p>\n\n<pre><code>[[1, 6], [2, 7], [3, 8], [4], [5]]\n</code></pre>\n\n<h1>Case 2: <code>b</code> is longer</h1>\n\n<pre><code>a = [1, 2, 3]\nb = [4, 5, 6, 7, 8]\n\na[b.count-1] ||= nil\na.zip(b).map(&amp;:flatten).map(&amp;:compact)\n</code></pre>\n\n<p>Result:</p>\n\n<pre><code>[[1, 4], [2, 5], [3, 6], [7], [8]]   \n</code></pre>\n\n<h1>Variation with <code>nil</code> included</h1>\n\n<pre><code>a = [1, 2, 3, 4, 5]\nb = [6, 7, 8]\n\na[b.count-1] ||= nil\nb[a.count-1] ||= nil\na.zip(b).map(&amp;:flatten)     # [[1, 6], [2, 7], [3, 8], [4, nil], [5, nil]]    \n</code></pre>\n\n<p>... and ...</p>\n\n<pre><code>a = [1, 2, 3]\nb = [4, 5, 6, 7, 8]\n\na[b.count-1] ||= nil\nb[a.count-1] ||= nil\na.zip(b).map(&amp;:flatten)     # [[1, 4], [2, 5], [3, 6], [nil, 7], [nil, 8]]\n</code></pre>\n\n<h1>Notes</h1>\n\n<ul>\n<li>If <code>a</code> or <code>b</code> must not be modified, insert a <code>.clone</code> somewhere to clone them beforehand.</li>\n<li>The <code>.flatten</code> was taken from the OP's example; it flattens any arrays that take the role of the integers in the example. Keep or leave off as needed.</li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "is_accepted": false, "score": 1, "last_activity_date": 1486025555, "last_edit_date": 1486025555, "creation_date": 1485990849, "answer_id": 41991584, "question_id": 41991165, "link": "https://stackoverflow.com/questions/41991165/how-do-i-combine-two-arrays-based-on-the-index-of-their-elements/41991584#41991584", "title": "How do I combine two arrays based on the index of their elements?", "body": "<p>It looks like you want a \"safe\" transpose. It's called safe because the usual <a href=\"https://ruby-doc.org/core-2.2.0/Array.html#method-i-transpose\" rel=\"nofollow noreferrer\"><code>tranpose</code></a> raises an error when sub-arrays don't have the same length :</p>\n\n<pre><code>def safe_transpose(*arrays)\n  l = arrays.map(&amp;:length).max\n  arrays.map{|e| e.values_at(0...l)}.transpose.map(&amp;:compact)\nend\n\np safe_transpose([1, 2, 3, 4], [5, 6, 7])\n#=&gt; [[1, 5], [2, 6], [3, 7], [4]]\n\np safe_transpose([1, 2, 3], [4, 5, 6], [7, 8, 9])\n#=&gt; [[1, 4, 7], [2, 5, 8], [3, 6, 9]]\n</code></pre>\n\n<p>If you want to keep the padded nils, you can use :</p>\n\n<pre><code>def safe_transpose(*arrays)\n  l = arrays.map(&amp;:length).max\n  arrays.map{|e| e.values_at(0...l)}.transpose\nend\n\np safe_transpose([1, 2, 3, 4], [5, 6, 7])\n#=&gt; [[1, 5], [2, 6], [3, 7], [4, nil]]\n\np safe_transpose([1, 2, 3], [4, 5, 6], [7, 8, 9])\n#=&gt; [[1, 4, 7], [2, 5, 8], [3, 6, 9]]\n</code></pre>\n\n<p>The original arrays aren't modified.</p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 7447270, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-yHFYDwTTIVg/AAAAAAAAAAI/AAAAAAAABrw/3XI87ejTT7Y/photo.jpg?sz=128", "display_name": "Eric Piboyeux", "link": "https://stackoverflow.com/users/7447270/eric-piboyeux"}, "is_accepted": false, "score": 0, "last_activity_date": 1485990988, "creation_date": 1485990988, "answer_id": 41991613, "question_id": 41991165, "link": "https://stackoverflow.com/questions/41991165/how-do-i-combine-two-arrays-based-on-the-index-of-their-elements/41991613#41991613", "title": "How do I combine two arrays based on the index of their elements?", "body": "<pre><code>a = [1,2,3]\nb = [4, 5, 6, 7]\narr_of_arrays = []\n</code></pre>\n\n<p>i suppose you can easily check that b.size > a.size is true, so</p>\n\n<pre><code>b.each_with_index{|elem, index| a[index].nil? ? arr_of_arrays &lt;&lt; [elem] : arr_of_arrays &lt;&lt; [a[index],elem]}\n</code></pre>\n\n<p>returns the expected array of arrays :</p>\n\n<pre><code>=&gt; [[1, 4], [2, 5], [3, 6], [7]]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1420, "user_id": 5045091, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MAqXn.jpg?s=128&g=1", "display_name": "theterminalguy", "link": "https://stackoverflow.com/users/5045091/theterminalguy"}, "is_accepted": false, "score": 0, "last_activity_date": 1485991074, "creation_date": 1485991074, "answer_id": 41991637, "question_id": 41991165, "link": "https://stackoverflow.com/questions/41991165/how-do-i-combine-two-arrays-based-on-the-index-of-their-elements/41991637#41991637", "title": "How do I combine two arrays based on the index of their elements?", "body": "<pre><code>arr1 = [1, 2, 3]\narr2 = [4, 5, 6, 7]\n\ndef combine_two_arrays(arr1, arr2)\n  new_arr = (arr1.size &gt; arr2.size) ? arr1.zip(arr2) :  arr2.zip(arr1)\n  new_arr.map { |arr| arr.compact.sort }\nend \n\ncombine_two_arrays(arr1, arr2)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 0, "last_activity_date": 1485996702, "last_edit_date": 1485996702, "creation_date": 1485991675, "answer_id": 41991761, "question_id": 41991165, "link": "https://stackoverflow.com/questions/41991165/how-do-i-combine-two-arrays-based-on-the-index-of-their-elements/41991761#41991761", "title": "How do I combine two arrays based on the index of their elements?", "body": "<pre><code>a = [1,2,3]\nb = [4,5,6,7]\n\nArray.new([a.size, b.size].max) { |i| [a[i],b[i]].compact }\n  #=&gt; [[1, 4], [2, 5], [3, 6], [7]] \n</code></pre>\n\n<p>This assumes none of the elements of <code>a</code> or <code>b</code> equal <code>nil</code>.</p>\n\n<p>If you want <code>nil</code>s included, just remove <code>.compact</code>:</p>\n\n<pre><code>Array.new([a.size, b.size].max) { |i| [a[i],b[i]] }\n  #=&gt; [[1, 4], [2, 5], [3, 6], [nil, 7]]\n</code></pre>\n\n<p>In this case <code>a</code> and <code>b</code> are permitted to have <code>nil</code> values.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user7055375"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 125, "favorite_count": 0, "accepted_answer_id": 41991364, "answer_count": 6, "score": 1, "last_activity_date": 1486045591, "creation_date": 1485988758, "question_id": 41991165, "link": "https://stackoverflow.com/questions/41991165/how-do-i-combine-two-arrays-based-on-the-index-of-their-elements", "title": "How do I combine two arrays based on the index of their elements?", "body": "<p>I'm using Ruby 2.4.  I want to take an array and add its elements to an array of arrays, based on their index.  So if I'm starting with an array</p>\n\n<pre><code>[1, 2, 3]\n</code></pre>\n\n<p>and I want to combine that with the array</p>\n\n<pre><code>[4, 5, 6]\n</code></pre>\n\n<p>I can get the outcome</p>\n\n<pre><code>[[1, 4], [2, 5], [3, 6]]\n</code></pre>\n\n<p>using this function</p>\n\n<pre><code>arr_of_arrays = arr_of_arrays.empty? ? arr : arr_of_arrays.zip(arr).map(&amp;:flatten)\n</code></pre>\n\n<p>However, this breaks down if I try and add an element with more elements than the original.  So if I try and add</p>\n\n<pre><code>[4, 5, 6, 7]\n</code></pre>\n\n<p>to the original array, right now I'm getting</p>\n\n<pre><code>[[1, 4], [2, 5], [3, 6]]\n</code></pre>\n\n<p>but what I want is</p>\n\n<pre><code>[[1, 4], [2, 5], [3, 6], [7]]\n</code></pre>\n\n<p>How do I adjust my above function to achive this?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "graphics", "visualization", "data-visualization"], "comments": [{"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1485987772, "post_id": 41990889, "comment_id": 71159050, "body": "Though interesting, I don&#39;t think this qualifies as a Stack Overflow question. Please see help centre for more details. Downvote is not mine."}, {"owner": {"reputation": 111, "user_id": 2445583, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5E7dr.png?s=128&g=1", "display_name": "mr3mo", "link": "https://stackoverflow.com/users/2445583/mr3mo"}, "reply_to_user": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1485989324, "post_id": 41990889, "comment_id": 71159685, "body": "ahh I agree, this is not a specific programming question. Where is a more appropriate place to ask this?"}], "answers": [{"comments": [{"owner": {"reputation": 111, "user_id": 2445583, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5E7dr.png?s=128&g=1", "display_name": "mr3mo", "link": "https://stackoverflow.com/users/2445583/mr3mo"}, "edited": false, "score": 0, "creation_date": 1486012734, "post_id": 41991032, "comment_id": 71166199, "body": "Ah I didn&#39;t know about OpenLayers or Leaflet, seems like they could be helpful.  Leaflet has an example of an animation as I need. Thanks.  I will not mark this as an answer until I receive a few other suggestions :)"}], "tags": [], "owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "is_accepted": false, "score": 1, "last_activity_date": 1485988135, "creation_date": 1485988135, "answer_id": 41991032, "question_id": 41990889, "link": "https://stackoverflow.com/questions/41990889/visualize-travelling-salesman-solution-graphically-using-ruby/41991032#41991032", "title": "Visualize travelling salesman solution graphically using ruby", "body": "<p>You could write a small Rails app with the algorithm in a model and some javascript (with either <a href=\"https://openlayers.org/\" rel=\"nofollow noreferrer\">OpenLayers</a> or <a href=\"http://leafletjs.com/\" rel=\"nofollow noreferrer\">Leaflet</a>) for map visualization.</p>\n\n<p>The traveling salesman is a hard problem, so it might take a while to calculate a result. You could use <a href=\"http://guides.rubyonrails.org/working_with_javascript_in_rails.html\" rel=\"nofollow noreferrer\">AJAX</a> or <a href=\"https://www.rubyplus.com/articles/4081-Server-Side-Event-Streaming-in-Rails-5\" rel=\"nofollow noreferrer\">Server Side Events</a> to update the map when the server has found a better soluton.</p>\n"}], "owner": {"reputation": 111, "user_id": 2445583, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5E7dr.png?s=128&g=1", "display_name": "mr3mo", "link": "https://stackoverflow.com/users/2445583/mr3mo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 170, "favorite_count": 0, "closed_date": 1486038045, "answer_count": 1, "score": -1, "last_activity_date": 1485988135, "creation_date": 1485987542, "question_id": 41990889, "link": "https://stackoverflow.com/questions/41990889/visualize-travelling-salesman-solution-graphically-using-ruby", "closed_reason": "Needs more focus", "title": "Visualize travelling salesman solution graphically using ruby", "body": "<p>I wrote a ruby script that finds a solution to the Bays29 travelling salesman problem. The bays29 data set is found here:\n<a href=\"http://elib.zib.de/pub/mp-testdata/tsp/tsplib/tsp/bays29.tsp\" rel=\"nofollow noreferrer\">http://elib.zib.de/pub/mp-testdata/tsp/tsplib/tsp/bays29.tsp</a></p>\n\n<p>Now say my solution is in an array that says go to city 1, then 4, then 9 etc.. \nI want to show this visually being solved somehow. For e.g. I would like to have it in a browser showing all the cities connected together and then the solution gets highlighted after it is generated.</p>\n\n<p>How can I go about doing this? \nWhat kind of gems should I use? </p>\n\n<p>Thanks a lot!</p>\n"}, {"tags": ["html", "css", "ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 36566, "user_id": 2341603, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ZTHIr.jpg?s=128&g=1", "display_name": "Obsidian Age", "link": "https://stackoverflow.com/users/2341603/obsidian-age"}, "edited": false, "score": 1, "creation_date": 1485987743, "post_id": 41990885, "comment_id": 71159035, "body": "Unfortunately this is <a href=\"http://stackoverflow.com/a/1033166/2341603\">impossible without JavaScript</a>. Do you have access to JavaScript?"}, {"owner": {"reputation": 357, "user_id": 7053699, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kfwzm.png?s=128&g=1", "display_name": "brianyates", "link": "https://stackoverflow.com/users/7053699/brianyates"}, "reply_to_user": {"reputation": 36566, "user_id": 2341603, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ZTHIr.jpg?s=128&g=1", "display_name": "Obsidian Age", "link": "https://stackoverflow.com/users/2341603/obsidian-age"}, "edited": false, "score": 0, "creation_date": 1485998564, "post_id": 41990885, "comment_id": 71162575, "body": "Hello @ObsidianAge...thanks for the comment. I can use JavaScript, I&#39;m just a little less savvy with that language, especially when it comes to mixing .erb and .js. Got any links I should check out that might get me on the right track?"}, {"owner": {"reputation": 36566, "user_id": 2341603, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ZTHIr.jpg?s=128&g=1", "display_name": "Obsidian Age", "link": "https://stackoverflow.com/users/2341603/obsidian-age"}, "edited": false, "score": 0, "creation_date": 1485999689, "post_id": 41990885, "comment_id": 71162853, "body": "I&#39;m not familiar with Ruby myself unfortunately, but you basically just need to input the Ruby variable in place of the filename in the JavaScript. in this instance. You need something very similar to (if not exactly) <code>document.head.insertAdjacentHTML(&#39;beforeend&#39;, &#39;&lt;style&gt;.workout-image:hover{background-image:url(&lt;% @workout[:gif_url] %&gt;);}&lt;&#47;style&gt;&#39;);</code> -- that should append CSS styling of <code>.workout-image{background-image:url(&quot;blah.gif&quot;);}</code> to the head section, where presumably your URLs are already defined."}, {"owner": {"reputation": 357, "user_id": 7053699, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kfwzm.png?s=128&g=1", "display_name": "brianyates", "link": "https://stackoverflow.com/users/7053699/brianyates"}, "reply_to_user": {"reputation": 36566, "user_id": 2341603, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ZTHIr.jpg?s=128&g=1", "display_name": "Obsidian Age", "link": "https://stackoverflow.com/users/2341603/obsidian-age"}, "edited": false, "score": 0, "creation_date": 1486010109, "post_id": 41990885, "comment_id": 71165478, "body": "Thanks. This was my thought as well...though I&#39;m struggling with how to get the Ruby variable in the JavaScript file...since a plain .js file won&#39;t recognize Ruby variables. I think I need to make it a js.erb file, though I can&#39;t seem to get that to work..."}, {"owner": {"reputation": 36566, "user_id": 2341603, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ZTHIr.jpg?s=128&g=1", "display_name": "Obsidian Age", "link": "https://stackoverflow.com/users/2341603/obsidian-age"}, "edited": false, "score": 0, "creation_date": 1486011404, "post_id": 41990885, "comment_id": 71165816, "body": "You wouldn&#39;t use an external JavaScript file -- you&#39;d embed it in the HTML page using <code>&lt;script&gt;</code> tags. If that doesn&#39;t work, you may be out of luck. Sorry I can&#39;t be much more help in that regard :P"}, {"owner": {"reputation": 357, "user_id": 7053699, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kfwzm.png?s=128&g=1", "display_name": "brianyates", "link": "https://stackoverflow.com/users/7053699/brianyates"}, "reply_to_user": {"reputation": 36566, "user_id": 2341603, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ZTHIr.jpg?s=128&g=1", "display_name": "Obsidian Age", "link": "https://stackoverflow.com/users/2341603/obsidian-age"}, "edited": false, "score": 0, "creation_date": 1486130055, "post_id": 41990885, "comment_id": 71225602, "body": "I think you&#39;re getting me to see the light @ObsidianAge...though it&#39;s still not quite working. Would you mind taking a look at the edit I just added? Perhaps my syntax is off? I couldn&#39;t get it to work with any new CSS, let alone the new background-image."}, {"owner": {"reputation": 357, "user_id": 7053699, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kfwzm.png?s=128&g=1", "display_name": "brianyates", "link": "https://stackoverflow.com/users/7053699/brianyates"}, "reply_to_user": {"reputation": 36566, "user_id": 2341603, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ZTHIr.jpg?s=128&g=1", "display_name": "Obsidian Age", "link": "https://stackoverflow.com/users/2341603/obsidian-age"}, "edited": false, "score": 0, "creation_date": 1486130739, "post_id": 41990885, "comment_id": 71226076, "body": "@ObsidianAge. Never mind...it&#39;s working :) I just got rid of the <code>$(document)</code> tags and made it <code>document</code> like you originally said. Would you mind posting your answer in the answers section so I can mark it as correct?"}, {"owner": {"reputation": 36566, "user_id": 2341603, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ZTHIr.jpg?s=128&g=1", "display_name": "Obsidian Age", "link": "https://stackoverflow.com/users/2341603/obsidian-age"}, "edited": false, "score": 0, "creation_date": 1486148954, "post_id": 41990885, "comment_id": 71237163, "body": "Glad to hear that you got it working :) Yes, <code>$(document)</code> would be jQuery, and target the <b>node</b>, rather than the <code>document</code> element itself. You could get around that with <code>$(document)[0]</code> if you really want, but <code>document</code> is so much easier :P I&#39;ve added an answer to include the answer, and also provide an alternative or two that I discovered :)"}], "answers": [{"tags": [], "owner": {"reputation": 36566, "user_id": 2341603, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ZTHIr.jpg?s=128&g=1", "display_name": "Obsidian Age", "link": "https://stackoverflow.com/users/2341603/obsidian-age"}, "is_accepted": true, "score": 1, "last_activity_date": 1486148762, "last_edit_date": 1495541808, "creation_date": 1486148762, "answer_id": 42031345, "question_id": 41990885, "link": "https://stackoverflow.com/questions/41990885/replace-dynamic-backgrounds-on-hover-ruby-on-rails/42031345#42031345", "title": "Replace dynamic backgrounds on &quot;hover&quot;- Ruby on Rails", "body": "<p>Unfortunately this can't be solved using raw CSS, as you <a href=\"https://stackoverflow.com/questions/1033156/how-to-write-ahover-in-inline-css/1033166\">can't target pseduo-selectors with inline CSS</a>. However, it's possible to get around this using <strong>JavaScript</strong>. What you need to do is add the following to your page:</p>\n\n<pre><code>&lt;script&gt;\n  document.head.insertAdjacentHTML('beforeend', '&lt;style&gt;.workout-image:hover{background-image:url(&lt;% @workout[:gif_url] %&gt;);}&lt;/style&gt;');\n&lt;/script&gt;\n</code></pre>\n\n<p>That should append CSS styling of <code>.workout-image{background-image:url(\"blah.gif\");}</code> to the end of the head section.</p>\n\n<p>Another solution would be to simply use an external <code>css.erb</code> file instead of a <code>.css</code> file, in order to process Ruby variables directly:</p>\n\n<pre><code>.workout-image:hover {\n  background-image:url(&lt;% @workout[:gif_url] %&gt;);\n}\n</code></pre>\n\n<p>Be aware that using ERB in CSS will only work if the file is loaded ad-hoc, and will <strong>not</strong> work if you precompile your assets! You can get around this using <a href=\"http://guides.rubyonrails.org/asset_pipeline.html#preprocessing\" rel=\"nofollow noreferrer\">the SCSS Rails Preprocessor</a>, assuming you have access to, and want to use, SASS.</p>\n\n<p>Hope this helps :)</p>\n"}], "owner": {"reputation": 357, "user_id": 7053699, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kfwzm.png?s=128&g=1", "display_name": "brianyates", "link": "https://stackoverflow.com/users/7053699/brianyates"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 160, "favorite_count": 0, "accepted_answer_id": 42031345, "answer_count": 1, "score": 0, "last_activity_date": 1486148762, "creation_date": 1485987530, "last_edit_date": 1486130801, "question_id": 41990885, "link": "https://stackoverflow.com/questions/41990885/replace-dynamic-backgrounds-on-hover-ruby-on-rails", "title": "Replace dynamic backgrounds on &quot;hover&quot;- Ruby on Rails", "body": "<p>I have a <code>div</code> that has a dynamic background image. The background image url is logged in a database. I'd also like to replace this image with a dynamic GIF (which is logged in the same table) when the <code>div</code> is hovered over...but I'm struggling with figuring out a clean way to do this.</p>\n\n<p>Here is a brief snippit from the html.erb file I'm working with...it seems that I cannot use the <code>hover</code> selector in in-line HTML, so I'm not sure if I need to resort to JavaScript? I'd essentially like to replace <code>blah.jpg</code> with <code>blah.gif</code>on:hover.</p>\n\n<pre><code>&lt;% @workout[:image_url] = \"blah.jpg\" %&gt;\n&lt;% @workout[:gif_url] = \"blah.gif\" %&gt;\n\n&lt;div class=\"image-wrapper\"&gt;\n  &lt;div class=\"workout-image\" style=\"background-image:url(&lt;%= @workout[:image_url] %&gt;)\"&gt;\n  &lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>EDIT:\nIt works now using <code>&lt;script&gt;</code> tags.</p>\n\n<pre><code>&lt;head&gt;\n  &lt;script&gt;\n    document.head.insertAdjacentHTML('beforeend', '&lt;style&gt;.workout-image:hover { background-image:url(\"blah.gif\");}&lt;/style&gt;');\n  &lt;/script&gt;\n&lt;/head&gt;\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "authlogic", "grape-api"], "comments": [{"owner": {"reputation": 13756, "user_id": 567762, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/908c9abc72ab86111a153b11cb584f26?s=128&d=identicon&r=PG", "display_name": "Jared Beck", "link": "https://stackoverflow.com/users/567762/jared-beck"}, "edited": false, "score": 0, "creation_date": 1486076815, "post_id": 41990778, "comment_id": 71203415, "body": "Have you looked at <a href=\"https://github.com/ruby-grape/grape#authentication\" rel=\"nofollow noreferrer\">the authentication section of grape&#39;s docs</a>? There&#39;s a section there on &quot;Register custom middleware for authentication&quot;. Also, it might help to research <a href=\"https://stackoverflow.com/questions/26623980/user-authentication-with-grape-and-devise\">how people have integrated other authentication libraries, like devise</a>."}, {"owner": {"reputation": 1354, "user_id": 2473738, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e56fe821fbdd336ac004e8faa6fac75?s=128&d=identicon&r=PG", "display_name": "Dan Laffan", "link": "https://stackoverflow.com/users/2473738/dan-laffan"}, "edited": false, "score": 0, "creation_date": 1486339190, "post_id": 41990778, "comment_id": 71289989, "body": "Does your UserSession model inherit from Authligic, rather than ActiveRecord?"}, {"owner": {"reputation": 825, "user_id": 2448690, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7181031b639703a64b03af115e5859ad?s=128&d=identicon&r=PG", "display_name": "Florin Ionce", "link": "https://stackoverflow.com/users/2448690/florin-ionce"}, "reply_to_user": {"reputation": 1354, "user_id": 2473738, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e56fe821fbdd336ac004e8faa6fac75?s=128&d=identicon&r=PG", "display_name": "Dan Laffan", "link": "https://stackoverflow.com/users/2473738/dan-laffan"}, "edited": false, "score": 0, "creation_date": 1486366383, "post_id": 41990778, "comment_id": 71296696, "body": "Sorry for my late reply.   @DanLaffan My model inherits from AuthLogic.  @JaredBeck I&#39;ve looked at this, but I think the problem is in AuthLogic since the logic for rails apps is based on controllers which are subclasses of <code>ApplicationController</code> and with grape they are behaving differently."}, {"owner": {"reputation": 1354, "user_id": 2473738, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e56fe821fbdd336ac004e8faa6fac75?s=128&d=identicon&r=PG", "display_name": "Dan Laffan", "link": "https://stackoverflow.com/users/2473738/dan-laffan"}, "edited": false, "score": 0, "creation_date": 1486414410, "post_id": 41990778, "comment_id": 71325517, "body": "Taking your point in reply to Jared, I wonder if AuthLogic would ever work for you?  Perhaps you could check out the RSpec/TestUnit support that AuthLogic offers.  Not sure if this idea would be of any real value to you though."}], "owner": {"reputation": 825, "user_id": 2448690, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7181031b639703a64b03af115e5859ad?s=128&d=identicon&r=PG", "display_name": "Florin Ionce", "link": "https://stackoverflow.com/users/2448690/florin-ionce"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 254, "favorite_count": 3, "answer_count": 0, "score": 5, "last_activity_date": 1485994025, "creation_date": 1485987064, "last_edit_date": 1485994025, "question_id": 41990778, "link": "https://stackoverflow.com/questions/41990778/rails-grapeapi-authlogic-undefined-method-session", "title": "Rails GrapeAPI + Authlogic undefined method `session&#39;", "body": "<p>I'm trying to build an API for login using <code>GrapeAPI</code> and <code>Authlogic</code>.</p>\n\n<p>My code looks like this:</p>\n\n<pre><code>class Api\n  class V1\n    class UserSessionsController &lt; Grape::API\n\n\n    post :login do\n      @user_session = UserSession.new(params[:user_session])\n      if @user_session.save\n        fetch_api_key(@user_session.user)\n      else\n        error!('Unauthorized.', 401)\n      end\n    end\n\n    helpers do\n      def current_user_session\n        return @current_user_session if defined?(@current_user_session)\n        @current_user_session = UserSession.find\n      end\n\n      def current_user\n        return @current_user if defined?(@current_user)\n        @current_user = current_user_session &amp;&amp; current_user_session.user\n       end\n\n      end\n\n    end\n  end\nend\n</code></pre>\n\n<p>The problem is that when I run <code>@user_session = UserSession.new(params[:user_session])</code> I get <code>You must activate the Authlogic::Session::Base.controller with a controller object before creating objects</code>.</p>\n\n<p>I tried adding </p>\n\n<p><code>Authlogic::Session::Base.controller = Authlogic::ControllerAdapters::RailsAdapter.new(self)</code></p>\n\n<p>before trying to create the <code>UserSession</code> and now I get <code>undefined method 'session' for #&lt;#&lt;Class:0x007fa7a63ade28&gt;:0x007fa7a7b144b8&gt;</code> when I run <code>@user_session.save</code>.</p>\n\n<p>PS: I also tried adding <code>authenticate_with User</code> to the <code>user_session.rb</code> file, and </p>\n\n<p><code>acts_as_authentic do |c|\n  c.session_class = UserSession\nend</code></p>\n\n<p>Inside the <code>user</code> model, but it doesn't work.</p>\n\n<p>PS2: I'm using rails 4,2,7 , grape 0.18.0 and authlogic 3.4.6</p>\n"}, {"tags": ["ruby", "homebrew", "berkshelf", "homebrew-cask"], "answers": [{"tags": [], "owner": {"reputation": 1365, "user_id": 4894399, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-tY1Cz7EDNxc/AAAAAAAAAAI/AAAAAAAABb4/3Qa15VP4_ZY/photo.jpg?sz=128", "display_name": "Szymon Szypulski", "link": "https://stackoverflow.com/users/4894399/szymon-szypulski"}, "is_accepted": false, "score": 0, "last_activity_date": 1486018195, "creation_date": 1486018195, "answer_id": 41995861, "question_id": 41990718, "link": "https://stackoverflow.com/questions/41990718/upgrading-ruby-using-homebrew-on-a-mac-and-installing-berkshelp/41995861#41995861", "title": "Upgrading Ruby using homebrew on a mac and installing berkshelp", "body": "<ol>\n<li>You are installing ruby for user <code>meee</code>, but berkshelf for root. It won't work. You should use user ruby all the time.</li>\n<li>Maybe use <a href=\"https://downloads.chef.io/chefdk\" rel=\"nofollow noreferrer\">ChefDK</a>, it has berkshelf included and probably all other tools you might need for chef.</li>\n</ol>\n"}], "owner": {"reputation": 87, "user_id": 5890687, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/mIHWO.png?s=128&g=1", "display_name": "Singleton", "link": "https://stackoverflow.com/users/5890687/singleton"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 295, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1486018195, "creation_date": 1485986838, "question_id": 41990718, "link": "https://stackoverflow.com/questions/41990718/upgrading-ruby-using-homebrew-on-a-mac-and-installing-berkshelp", "title": "Upgrading Ruby using homebrew on a mac and installing berkshelp", "body": "<p>I just finished upgrading my ruby to fit the requirements for berkshelf... at least so i thought... and now when i try to implement berkshelf i throw this error:</p>\n\n<pre><code>ruby-build: use openssl from homebrew\nDownloading ruby-2.3.1.tar.bz2...\n-&gt; https://cache.ruby-lang.org/pub/ruby/2.3/ruby-2.3.1.tar.bz2\nInstalling ruby-2.3.1...\nInstalled ruby-2.3.1 to /Users/meee/.rbenv/versions/2.3.1\n\nmeee$ sudo gem install berkshelf\nPassword:\nERROR:  Error installing berkshelf:\n    buff-extensions requires Ruby version &gt;= 2.2.0.\n</code></pre>\n\n<p>Has anyone encountered this problem before?</p>\n\n<p>I'm running the newest sierra os build.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1485986069, "post_id": 41990408, "comment_id": 71158190, "body": "instead of passing the whole <code>params</code> to the API, filter it to just the attributes you need. i.e. <code>params.select { |k,v| k.in? [ &#39;key1&#39;, &#39;key2&#39;] }</code>"}, {"owner": {"reputation": 5609, "user_id": 573283, "user_type": "registered", "accept_rate": 97, "profile_image": "https://graph.facebook.com/25829631/picture?type=large", "display_name": "Slick23", "link": "https://stackoverflow.com/users/573283/slick23"}, "reply_to_user": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1485986585, "post_id": 41990408, "comment_id": 71158459, "body": "@maxple I&#39;m not clear how this would solve the issue. I&#39;m trying to parse the response from the API, not pass anything to the API, but can&#39;t seem to access anything in the response"}, {"owner": {"reputation": 599, "user_id": 5213979, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d1dfcb9ed38c471bb15c8685ee8a61ef?s=128&d=identicon&r=PG&f=1", "display_name": "Abhishek Kumar", "link": "https://stackoverflow.com/users/5213979/abhishek-kumar"}, "edited": false, "score": 0, "creation_date": 1485987004, "post_id": 41990408, "comment_id": 71158661, "body": "did you check using <code>binding.pry</code> that your task object (Scale::Resources::Task) is alright?"}, {"owner": {"reputation": 5609, "user_id": 573283, "user_type": "registered", "accept_rate": 97, "profile_image": "https://graph.facebook.com/25829631/picture?type=large", "display_name": "Slick23", "link": "https://stackoverflow.com/users/573283/slick23"}, "reply_to_user": {"reputation": 599, "user_id": 5213979, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d1dfcb9ed38c471bb15c8685ee8a61ef?s=128&d=identicon&r=PG&f=1", "display_name": "Abhishek Kumar", "link": "https://stackoverflow.com/users/5213979/abhishek-kumar"}, "edited": false, "score": 0, "creation_date": 1485987820, "post_id": 41990408, "comment_id": 71159076, "body": "@AbhishekKumar I just did, but I&#39;ve never used it to debug before, so not entirely sure what I&#39;m looking at. Some of those things should not be nil, I don&#39;t think."}, {"owner": {"reputation": 5609, "user_id": 573283, "user_type": "registered", "accept_rate": 97, "profile_image": "https://graph.facebook.com/25829631/picture?type=large", "display_name": "Slick23", "link": "https://stackoverflow.com/users/573283/slick23"}, "edited": false, "score": 0, "creation_date": 1485987968, "post_id": 41990408, "comment_id": 71159142, "body": "My guess is it&#39;s still a strong parameters issue. I have to run out for an hour or so, but will play with that a bit more."}, {"owner": {"reputation": 599, "user_id": 5213979, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d1dfcb9ed38c471bb15c8685ee8a61ef?s=128&d=identicon&r=PG&f=1", "display_name": "Abhishek Kumar", "link": "https://stackoverflow.com/users/5213979/abhishek-kumar"}, "edited": false, "score": 0, "creation_date": 1486017428, "post_id": 41990408, "comment_id": 71168039, "body": "It is not a strong parameters issue because that occurs when you are trying to pass a bunch of args to create or update using params hash. Look at your Scale::Resources::Task, it is clearly not what you are expecting out of it. Try doing <code>ScaleWebhook.create!(task_id: params[:task][:task_id], response: params[:task][:reponse])</code>, it should work."}], "answers": [{"comments": [{"owner": {"reputation": 5609, "user_id": 573283, "user_type": "registered", "accept_rate": 97, "profile_image": "https://graph.facebook.com/25829631/picture?type=large", "display_name": "Slick23", "link": "https://stackoverflow.com/users/573283/slick23"}, "edited": false, "score": 0, "creation_date": 1485999732, "post_id": 41991730, "comment_id": 71162865, "body": "This is a gem that wraps the Scale API, they don&#39;t have a Ruby SDK. I&#39;m still getting <code>can&#39;t create instance of Singleton</code> errors now. I have access ot the params hash as it comes through, I think I&#39;ll just rebuild the object from there and not rely on the gem&#39;s builders to do it."}, {"owner": {"reputation": 1843, "user_id": 4067720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a52c645614505bcaeb65a6c5199158c1?s=128&d=identicon&r=PG", "display_name": "Glyoko", "link": "https://stackoverflow.com/users/4067720/glyoko"}, "reply_to_user": {"reputation": 5609, "user_id": 573283, "user_type": "registered", "accept_rate": 97, "profile_image": "https://graph.facebook.com/25829631/picture?type=large", "display_name": "Slick23", "link": "https://stackoverflow.com/users/573283/slick23"}, "edited": false, "score": 0, "creation_date": 1486063910, "post_id": 41991730, "comment_id": 71196967, "body": "That&#39;s probably best. It&#39;s best practice to have a layer of separation between 3rd party apis and your app."}], "tags": [], "owner": {"reputation": 1843, "user_id": 4067720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a52c645614505bcaeb65a6c5199158c1?s=128&d=identicon&r=PG", "display_name": "Glyoko", "link": "https://stackoverflow.com/users/4067720/glyoko"}, "is_accepted": false, "score": 1, "last_activity_date": 1485991474, "creation_date": 1485991474, "answer_id": 41991730, "question_id": 41990408, "link": "https://stackoverflow.com/questions/41990408/how-to-parse-api-response-in-rails-controller/41991730#41991730", "title": "How to parse API response in Rails controller", "body": "<p>The problem is that ActionController::Parameters are meant to work as the only data being passed to ActiveRecord builder methods. (create!, create, new, etc) When you say</p>\n\n<pre><code>ScaleWebhook.create!(task_id: task.task_id, response: task.response)`\n</code></pre>\n\n<p>you are not passing an ActionController::Parameters object to <code>.create!</code>. You are passing a regular hash, one of who's values happens to be an instance of ActionController::Parameters. Since that column is set to accept serialized data, AR sees that instance as just another object to serialize, and shoves it's raw form into the column.</p>\n\n<p>You need to make it so the only data passed to <code>.create!</code> for mass assignment is the ActionController::Parameters object in task.response. You can still set other values in a block.</p>\n\n<p>Additionally, task.task_id seems to be returning a ActionController::Parameters as well. You probably want to pull the task id (the <em>real</em> task_id, the \"58925f...00620894\" data) out by saying <code>task.task_id.require(:task).require(:task_id)</code></p>\n\n<p>So in sum, you probably want something like:</p>\n\n<pre><code>ScaleWebhook.create!(task.response) do |scale_web_hook|\n  scale_web_hook.task_id = task.task_id.require(:task).require(:task_id)\nend\n</code></pre>\n\n<p>At this point, you may get assignment/mass assignment errors depending on your model. Make sure to permit all the data you want to allow through for mass assignment onto your model.</p>\n\n<p>I'm not familiar with the Scale API, but I would recommend reading through the documentation a bit. There may be a more elegant way of getting to the task_id.</p>\n"}, {"tags": [], "owner": {"reputation": 1584, "user_id": 3255098, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8hsvD.png?s=128&g=1", "display_name": "Wikiti", "link": "https://stackoverflow.com/users/3255098/wikiti"}, "is_accepted": true, "score": 1, "last_activity_date": 1486498678, "last_edit_date": 1486498678, "creation_date": 1486498276, "answer_id": 42099052, "question_id": 41990408, "link": "https://stackoverflow.com/questions/41990408/how-to-parse-api-response-in-rails-controller/42099052#42099052", "title": "How to parse API response in Rails controller", "body": "<p>The problem was caused due to a bug in the gem. More information can be found on <a href=\"https://github.com/wikiti/scaleapi-ruby/issues/2\" rel=\"nofollow noreferrer\">this issue</a>.</p>\n\n<blockquote>\n  <p>The problem was related to a conflict between how Rails handles parameters (<code>ActionController::Parameters</code>) and how this library manages them (<code>ActiveSupport::HashWithIndifferentAccess</code>).</p>\n  \n  <p>The previous version of this gem used wrongly the <code>ActiveSupport::HashWithIndifferentAccess</code> constructor in <a href=\"https://github.com/wikiti/scaleapi-ruby/blob/v0.2.0/lib/scale.rb#L37\" rel=\"nofollow noreferrer\">Scale::to_hash</a>. Now, the bug is fixed with some checks on the same <a href=\"https://github.com/wikiti/scaleapi-ruby/blob/v0.2.1/lib/scale.rb#L37\" rel=\"nofollow noreferrer\">method</a>.</p>\n  \n  <p>If you can't update the gem (or don't want to), you may want to pass a hash instead to <code>scale.build_callback</code> by using <code>ActionController::Parameters#to_unsafe_hash</code>:</p>\n\n<pre><code>callback = $scale.build_callback params.to_unsafe_hash, 'task',\n                                 callback_key: request.headers['scale-callback-auth']\n</code></pre>\n</blockquote>\n"}], "owner": {"reputation": 5609, "user_id": 573283, "user_type": "registered", "accept_rate": 97, "profile_image": "https://graph.facebook.com/25829631/picture?type=large", "display_name": "Slick23", "link": "https://stackoverflow.com/users/573283/slick23"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1092, "favorite_count": 0, "accepted_answer_id": 42099052, "answer_count": 2, "score": 1, "last_activity_date": 1486674364, "creation_date": 1485985640, "last_edit_date": 1486674364, "question_id": 41990408, "link": "https://stackoverflow.com/questions/41990408/how-to-parse-api-response-in-rails-controller", "title": "How to parse API response in Rails controller", "body": "<p>I'm working on integrating Scale's API and having trouble parsing the response in my Rails Controller.</p>\n\n<p>The params posted to the controller from Scale look something like:</p>\n\n<pre><code>Parameters: {\"task\"=&gt;{\"task_id\"=&gt;\"589253a3b36b2d...1fe68\", \"created_at\"=&gt;\"2017-02-01T21:31:15.607Z\", \"completed_at\"=&gt;\"2017-02-01T21:31:15.612Z\", \"callback_url\"=&gt;\"http://...\", \"type\"=&gt;\"categorization\", \"status\"=&gt;\"completed\", \"instruction\"=&gt;\"Is this company public or private?\", \"params\"=&gt;{\"allow_multiple\"=&gt;true, \"categories\"=&gt;[\"NCI....\n</code></pre>\n\n<p>My controller method:</p>\n\n<pre><code> def create\n   # check authorization\n   callback = $scale.build_callback params, 'task', callback_key: request.headers['scale-callback-auth']\n\n   response = callback.response # Response content hash (code and result)\n   task = callback.task     # Scale::Resources::Task object\n\n\n   return nil if ScaleWebhook.exists?(task_id: task.task_id)\n   ScaleWebhook.create!(task_id: task.task_id, response: task.response)    \nend\n</code></pre>\n\n<p>In the console, when I get a <code>Scale::Resources::Task</code> I can just do something like <code>task.task_id</code>. An example object:</p>\n\n<pre><code>#&lt;Scale::Resources::Task:0x007fad81573e70 @task_id=\"589252b2b36b2d060061fd19\", @type=\"categorization\", @instruction=\"Is this company public or private?\", @params={\"allow_multiple\"=&gt;false, \"categories\"=&gt;[\"public\", \"private\"], \"attachment\"=&gt;\"http://www.google.com/\", \"attachment_type\"=&gt;\"website\"}, @urgency=\"day\", @response=nil, @callback_url=\"http://www.example.com/callback\", @status=\"pending\", @created_at=2017-02-01 21:27:14 UTC, @completed_at=nil&gt; \n</code></pre>\n\n<p>But my Rails controller is doing this:</p>\n\n<pre><code>ScaleWebhook Exists (0.8ms)  SELECT  1 AS one FROM \"scale_webhooks\" WHERE \"scale_webhooks\".\"task_id\" = $1 LIMIT $2  [[\"task_id\", \"#&lt;ActionController::Parameters:0x007fd680575130&gt;\"], [\"LIMIT\", 1]]\n  SQL (0.4ms)  INSERT INTO \"scale_webhooks\" (\"task_id\", \"response\", \"created_at\", \"updated_at\") VALUES ($1, $2, $3, $4) RETURNING \"id\"  [[\"task_id\", \"#&lt;ActionController::Parameters:0x007fd680575130&gt;\"], [\"response\", \"#&lt;ActionController::Parameters:0x007fd68058d578&gt;\"], [\"created_at\", 2017-02-01 21:31:15 UTC], [\"updated_at\", 2017-02-01 21:31:15 UTC]]\n</code></pre>\n\n<p>As you can see, it's inserting <code>#&lt;ActionController::Parameters</code> into the DB, instead of the value. I'm guessing this has something to do with rails' strong parameters, but I've tried a couple variations of permitting and even permitting all parameters as a test, and I'm still not able to access anything beyond <code>#&lt;ActionController::Parameters</code> .</p>\n\n<p>I'm using the <code>build_callback</code> method provided by the <code>scaleapi-ruby</code> as it validates the auth_key sent from Scale, but I guess I don't really need to use it to parse the response further, as something like <code>params['task_id']</code> works.</p>\n\n<p><strong>UPDATE</strong>:\nIt looks like the model was set to serialize all params, with the serialization off, I get the following error:</p>\n\n<pre><code>TypeError (can't cast ActionController::Parameters):\napp/controllers/scale_api_controller.rb:13:in `create'\n</code></pre>\n\n<p>This is line 13:</p>\n\n<pre><code>return nil if ScaleWebhook.exists?(task_id: task.task_id)\n</code></pre>\n\n<p>Commenting out line 13, I have the same problem where I get something like <code>#&lt;ActionController::Parameters:0x007fd6815317b8&gt;</code> instead of the actual task id.</p>\n\n<p><strong>UPDATE 2:</strong></p>\n\n<p>Using binding.pry, I got:</p>\n\n<pre><code>#&lt;Scale::Resources::Task:0x007fd919aa1f78\n @callback_url=nil,\n @completed_at=nil,\n @created_at=nil,\n @instruction=nil,\n @params={},\n @response=&lt;ActionController::Parameters {\"category\"=&gt;[\"Blackish\", \"Sherlock\"]} permitted: false&gt;,\n @status=nil,\n @task_id=\n  &lt;ActionController::Parameters {\"task\"=&gt;{\"task_id\"=&gt;\"58925f...00620894\", \"created_at\"=&gt;\"2017-02-01T22:20:25.921Z\", \"completed_at\"=&gt;\"2017-02-01T22:20:25.927Z\", \"callback_url\"=&gt;\"...\", \"type\"=&gt;\"categorization\", \"status\"=&gt;\"completed\", \"instruction\"=&gt;\"Is this company public or private?\", \"params\"=&gt;{\"allow_multiple\"=&gt;true, \"categories\"=&gt;[\"Arrow\", \"Last Man on Earth\", \"The Real O'Neals\", \"Blackish\", \"Sherlock\", \"Riverdale\"], \"attachment\"=&gt;\"...\", \"attachment_type\"=&gt;\"image\"}, \"is_test\"=&gt;true, \"urgency\"=&gt;\"day\", \"metadata\"=&gt;{\"name\"=&gt;\"...\", \"user_id\"=&gt;1}, \"response\"=&gt;{\"category\"=&gt;[\"Blackish\", \"Sherlock\"]}}, \"response\"=&gt;{\"category\"=&gt;[\"Blackish\", \"Sherlock\"]}, \"task_id\"=&gt;\"58925f29b36b2d0600620894\", \"controller\"=&gt;\"scale_api\", \"action\"=&gt;\"create\", \"scale_api\"=&gt;{\"task\"=&gt;{\"task_id\"=&gt;\"58925f29.....600620894\", \"created_at\"=&gt;\"2017-02-01T22:20:25.921Z\", \"completed_at\"=&gt;\"2017-02-01T22:20:25.927Z\", \"callback_url\"=&gt;\"...\", \"type\"=&gt;\"categorization\", \"status\"=&gt;\"completed\", \"instruction\"=&gt;\"Is this company public or private?\", \"params\"=&gt;{\"allow_multiple\"=&gt;true, \"categories\"=&gt;[\"Arrow\", \"Last Man on Earth\", \"The Real O'Neals\", \"Blackish\", \"Sherlock\", \"Riverdale\"], \"attachment\"=&gt;\"https://s3.amazonaws.com...\", \"attachment_type\"=&gt;\"image\"}, \"is_test\"=&gt;true, \"urgency\"=&gt;\"day\", \"metadata\"=&gt;{\"name\"=&gt;\"...\", \"user_id\"=&gt;45}, \"response\"=&gt;{\"category\"=&gt;[\"Blackish\", \"Sherlock\"]}}, \"response\"=&gt;{\"category\"=&gt;[\"Blackish\", \"Sherlock\"]}, \"task_id\"=&gt;\"58925f29b...b2d0600620894\"}} permitted: false&gt;,\n @type=nil,\n @urgency=nil&gt;\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1485985677, "post_id": 41990137, "comment_id": 71157985, "body": "That <code>image_tag</code> section should only render if the <code>if</code> condition evaluates as true. Maybe put in <code>&lt;%= homework.completed? %&gt;</code> as a diagnostic."}], "answers": [{"comments": [{"owner": {"reputation": 17065, "user_id": 175981, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/b357ab54946a2be4d19c8a9aab2a09d6?s=128&d=identicon&r=PG", "display_name": "Chris Peters", "link": "https://stackoverflow.com/users/175981/chris-peters"}, "edited": false, "score": 0, "creation_date": 1485986522, "post_id": 41990561, "comment_id": 71158429, "body": "In Ruby, the last statement in a method is returned automatically. You basically took @Co2&#39;s code and made it do the same thing, but with more verbose code. And even if you were correct in the idea, there is no reason to store the value in an instance method like that."}, {"owner": {"reputation": 483, "user_id": 7474561, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc0cb51bd61ff4715e3bec92f79f5f46?s=128&d=identicon&r=PG&f=1", "display_name": "KcUS_unico", "link": "https://stackoverflow.com/users/7474561/kcus-unico"}, "reply_to_user": {"reputation": 17065, "user_id": 175981, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/b357ab54946a2be4d19c8a9aab2a09d6?s=128&d=identicon&r=PG", "display_name": "Chris Peters", "link": "https://stackoverflow.com/users/175981/chris-peters"}, "edited": false, "score": 0, "creation_date": 1485988262, "post_id": 41990561, "comment_id": 71159255, "body": "ya, right. Sorry mate. Well, the above answers should already help out a bit. ..no time, sorry."}], "tags": [], "owner": {"reputation": 483, "user_id": 7474561, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc0cb51bd61ff4715e3bec92f79f5f46?s=128&d=identicon&r=PG&f=1", "display_name": "KcUS_unico", "link": "https://stackoverflow.com/users/7474561/kcus-unico"}, "is_accepted": false, "score": -1, "last_activity_date": 1485986261, "creation_date": 1485986261, "answer_id": 41990561, "question_id": 41990137, "link": "https://stackoverflow.com/questions/41990137/rails-how-to-render-an-image-if-a-field-is-populated/41990561#41990561", "title": "Rails - How to render an image if a field is populated?", "body": "<p>your method get_completion is not returning anything. Try this </p>\n\n<pre><code>@homework_student = homework_students.where(\"completed_on is not null\")\nreturn @homework_student\n</code></pre>\n\n<p>may be it works. Also make sure that the completed_on is not null works correctly. </p>\n"}, {"tags": [], "owner": {"reputation": 357, "user_id": 2324510, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e34acf41c7dc41624d328542b06496ee?s=128&d=identicon&r=PG", "display_name": "Bmxer", "link": "https://stackoverflow.com/users/2324510/bmxer"}, "is_accepted": true, "score": 1, "last_activity_date": 1485986787, "creation_date": 1485986787, "answer_id": 41990706, "question_id": 41990137, "link": "https://stackoverflow.com/questions/41990137/rails-how-to-render-an-image-if-a-field-is-populated/41990706#41990706", "title": "Rails - How to render an image if a field is populated?", "body": "<p>The result of your query can be an ActiveRecord::Relation or an empty array and on both cases the if statement evaluates to true. Try changing your query to:</p>\n\n<pre><code>def completion\n      homework_students.where(\"completed_on is null\").length == 0 \nend \n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 357, "user_id": 2324510, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e34acf41c7dc41624d328542b06496ee?s=128&d=identicon&r=PG", "display_name": "Bmxer", "link": "https://stackoverflow.com/users/2324510/bmxer"}, "reply_to_user": {"reputation": 343, "user_id": 5419275, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/d8823ae602d94a408b1e72f78b7df34b?s=128&d=identicon&r=PG&f=1", "display_name": "Co2", "link": "https://stackoverflow.com/users/5419275/co2"}, "edited": false, "score": 2, "creation_date": 1486040590, "post_id": 41990727, "comment_id": 71182073, "body": "@Co2 Use of <code>none?</code> method addressed by Ben seems more elegant ;-)"}], "tags": [], "owner": {"reputation": 3853, "user_id": 802407, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4d00b5873d505c57344d1cf1e121304?s=128&d=identicon&r=PG", "display_name": "Ben Simpson", "link": "https://stackoverflow.com/users/802407/ben-simpson"}, "is_accepted": false, "score": 2, "last_activity_date": 1485986862, "creation_date": 1485986862, "answer_id": 41990727, "question_id": 41990137, "link": "https://stackoverflow.com/questions/41990137/rails-how-to-render-an-image-if-a-field-is-populated/41990727#41990727", "title": "Rails - How to render an image if a field is populated?", "body": "<p>The return type of your <code>getCompletion</code> method is an <code>ActiveRecord::Relation</code>. You are then asking if this relation exists by placing this inside a conditional. This will always be <code>true</code>, even if the relation contains an empty data set (e.g. <code>[]</code>), because an empty Array is truthy.</p>\n\n<p>You should be expecting <code>getCompletion</code> to return a collection of <code>HomeworkStudent</code> records. If you are wanting to show a tick, or an 'x' only if all students have completed the homework, then you need an aggregate method to check something about all of the records (if there are any, or none, etc). Try do something like:</p>\n\n<pre><code># app/models/homework.rb\n\ndef completed?\n  homework_students.where(\"completed_on is null\").none?\nend\n\n\n# in the view\n\n&lt;% if homework.completed? %&gt;\n  &lt;%= image_tag \"fi-check.svg\", class: \"homework_student_complete\" %&gt;\n&lt;% else %&gt;\n  &lt;%= image_tag \"fi-x.svg\", class: \"homework_student_complete\" %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>More information on ActiveRecord::Relation methods at <a href=\"http://api.rubyonrails.org/classes/ActiveRecord/Relation.html#method-i-none-3F\" rel=\"nofollow noreferrer\">http://api.rubyonrails.org/classes/ActiveRecord/Relation.html#method-i-none-3F</a></p>\n"}], "owner": {"reputation": 343, "user_id": 5419275, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/d8823ae602d94a408b1e72f78b7df34b?s=128&d=identicon&r=PG&f=1", "display_name": "Co2", "link": "https://stackoverflow.com/users/5419275/co2"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "accepted_answer_id": 41990706, "answer_count": 3, "score": 0, "last_activity_date": 1485989764, "creation_date": 1485984663, "last_edit_date": 1485989764, "question_id": 41990137, "link": "https://stackoverflow.com/questions/41990137/rails-how-to-render-an-image-if-a-field-is-populated", "title": "Rails - How to render an image if a field is populated?", "body": "<p>In my application a user can say they have completed a piece of homework.</p>\n\n<p>A field \"completed_on\" is populated with the date the homework was completed. If not completed the field is blank.</p>\n\n<p>I would like to show a tick if the homework is completed or an x if the homework is not completed.</p>\n\n<p>The column \"completed_on\" is located in a table called homework_students.</p>\n\n<pre><code>class Homework &lt; ActiveRecord::Base\n    has_many :homework_students, :class_name =&gt; 'HomeworkStudent'\n\n\nclass HomeworkStudent &lt; ActiveRecord::Base\n    belongs_to :homework, :class_name =&gt; 'Homework'\n</code></pre>\n\n<p>I have tried the following which does not work for me:</p>\n\n<p>In my model:</p>\n\n<pre><code>def getCompletion\n      homework_students.where(\"completed_on is not null\")\nend\n</code></pre>\n\n<p>View:</p>\n\n<pre><code>&lt;% if homework.getCompletion %&gt;&lt;%= image_tag \"fi-check.svg\", class: \"homework_student_complete\" %&gt;&lt;% else %&gt;&lt;%= image_tag \"fi-x.svg\", class: \"homework_student_complete\" %&gt;&lt;% end %&gt;\n</code></pre>\n\n<p>I also tried this:</p>\n\n<p>Model</p>\n\n<pre><code>def completed?\n    !homework.homework_student.completed_on.blank?\nend\n</code></pre>\n\n<p>View</p>\n\n<pre><code>&lt;% if homework.completed? %&gt;\n&lt;%= image_tag \"fi-check.svg\", class: \"homework_student_complete\" %&gt;&lt;% else %&gt;&lt;%= image_tag \"fi-x.svg\", class: \"homework_student_complete\" %&gt;&lt;% end %&gt;\n</code></pre>\n\n<p>Appreciate any guidance.</p>\n\n<p>UPDATE</p>\n\n<p>This works:</p>\n\n<pre><code>def completed?\n      homework_students.where(\"completed_on is not null\").length == 0 \n    end\n\n&lt;% @homeworks.each do |homework| %&gt;\n...\n &lt;td height=\"1\" class=\"text-center\"&gt;&lt;% if homework.completed? %&gt;\n  &lt;%= image_tag \"fi-check.svg\", class: \"homework_student_complete\" %&gt;\n&lt;% else %&gt;\n  &lt;%= image_tag \"fi-x.svg\", class: \"homework_student_complete\" %&gt;\n&lt;% end %&gt;&lt;/td&gt;\n...\n&lt;% end %&gt;\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord"], "comments": [{"owner": {"reputation": 602, "user_id": 5065438, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/306841f540dc52fdc68605d254c522ac?s=128&d=identicon&r=PG&f=1", "display_name": "Jovica \u0160u\u0161a", "link": "https://stackoverflow.com/users/5065438/jovica-%c5%a0u%c5%a1a"}, "edited": false, "score": 0, "creation_date": 1485985831, "post_id": 41990119, "comment_id": 71158065, "body": "form_for @dish, not :dishes..."}, {"owner": {"reputation": 43, "user_id": 5078710, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3f9b0163879863b7c4a38f4893141c00?s=128&d=identicon&r=PG&f=1", "display_name": "imjustaguy", "link": "https://stackoverflow.com/users/5078710/imjustaguy"}, "reply_to_user": {"reputation": 602, "user_id": 5065438, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/306841f540dc52fdc68605d254c522ac?s=128&d=identicon&r=PG&f=1", "display_name": "Jovica \u0160u\u0161a", "link": "https://stackoverflow.com/users/5065438/jovica-%c5%a0u%c5%a1a"}, "edited": false, "score": 0, "creation_date": 1485986429, "post_id": 41990119, "comment_id": 71158374, "body": "it stills no saving and i have to redirect to restaurant show, if i use @dish it wont find the show view of restaurants"}, {"owner": {"reputation": 43, "user_id": 5078710, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3f9b0163879863b7c4a38f4893141c00?s=128&d=identicon&r=PG&f=1", "display_name": "imjustaguy", "link": "https://stackoverflow.com/users/5078710/imjustaguy"}, "reply_to_user": {"reputation": 602, "user_id": 5065438, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/306841f540dc52fdc68605d254c522ac?s=128&d=identicon&r=PG&f=1", "display_name": "Jovica \u0160u\u0161a", "link": "https://stackoverflow.com/users/5065438/jovica-%c5%a0u%c5%a1a"}, "edited": false, "score": 0, "creation_date": 1485986523, "post_id": 41990119, "comment_id": 71158430, "body": "i think is not saving because it dont receive the id_restaurant"}], "answers": [{"comments": [{"owner": {"reputation": 43, "user_id": 5078710, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3f9b0163879863b7c4a38f4893141c00?s=128&d=identicon&r=PG&f=1", "display_name": "imjustaguy", "link": "https://stackoverflow.com/users/5078710/imjustaguy"}, "edited": false, "score": 0, "creation_date": 1485986036, "post_id": 41990378, "comment_id": 71158169, "body": "i already do that (question update), but i have the same error"}], "tags": [], "owner": {"reputation": 483, "user_id": 7474561, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc0cb51bd61ff4715e3bec92f79f5f46?s=128&d=identicon&r=PG&f=1", "display_name": "KcUS_unico", "link": "https://stackoverflow.com/users/7474561/kcus-unico"}, "is_accepted": false, "score": 0, "last_activity_date": 1485986633, "last_edit_date": 1485986633, "creation_date": 1485985548, "answer_id": 41990378, "question_id": 41990119, "link": "https://stackoverflow.com/questions/41990119/call-controller-from-the-view-of-another-controller/41990378#41990378", "title": "Call controller from the view of another controller", "body": "<p>you should try to this to the controller action where the form is rendered</p>\n\n<pre><code>@dish = Dish.new\n</code></pre>\n\n<p>as you directly call the 'create' action rails is missing the instance variable Dish.new. Therefore the error message. Normally rails works like this: </p>\n\n<pre><code>def new\n@dish = Dish.new\nend\n</code></pre>\n\n<p>and than you call the create action on 'submit'. \nHowever, as it looks like you call the form from the #show action just add this code there and you will be fine. May be not the best solution but it will work like that. Add to #show </p>\n\n<pre><code>@dish = Dish.new\n</code></pre>\n\n<p>Sorry mate. Yes @dish is correct and not :dishes. </p>\n"}, {"comments": [{"owner": {"reputation": 43, "user_id": 5078710, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3f9b0163879863b7c4a38f4893141c00?s=128&d=identicon&r=PG&f=1", "display_name": "imjustaguy", "link": "https://stackoverflow.com/users/5078710/imjustaguy"}, "edited": false, "score": 0, "creation_date": 1485987043, "post_id": 41990690, "comment_id": 71158689, "body": "how can i get the restaurant id?"}, {"owner": {"reputation": 43, "user_id": 5078710, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3f9b0163879863b7c4a38f4893141c00?s=128&d=identicon&r=PG&f=1", "display_name": "imjustaguy", "link": "https://stackoverflow.com/users/5078710/imjustaguy"}, "edited": false, "score": 0, "creation_date": 1485989834, "post_id": 41990690, "comment_id": 71159898, "body": "im rendering the view &lt;%= render &#39;dishes/dish_form&#39;, :id =&gt; @restaurant.id %&gt; but i cant access to the id in the dishes controller"}], "tags": [], "owner": {"reputation": 483, "user_id": 7474561, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc0cb51bd61ff4715e3bec92f79f5f46?s=128&d=identicon&r=PG&f=1", "display_name": "KcUS_unico", "link": "https://stackoverflow.com/users/7474561/kcus-unico"}, "is_accepted": false, "score": 0, "last_activity_date": 1485993207, "last_edit_date": 1485993207, "creation_date": 1485986759, "answer_id": 41990690, "question_id": 41990119, "link": "https://stackoverflow.com/questions/41990119/call-controller-from-the-view-of-another-controller/41990690#41990690", "title": "Call controller from the view of another controller", "body": "<p>OK. \nMy latest guess is that you want the restaurants to be able to create many dishes. \nSo you should set up your models accordingly: </p>\n\n<pre><code>#restaurants_model\n has_many :dishes\n#dishes_model\nbelongs_to :restaurant\n</code></pre>\n\n<p>next is that you add a column called restaurant_id to your dishes table \n<code>t.string :restaurant_id</code></p>\n\n<p>than in your restaurant controller #show </p>\n\n<pre><code>def show\nend\n</code></pre>\n\n<p>if you use the routes as normal, e.g. </p>\n\n<pre><code>resources :restaurants\nresources :dishes\n</code></pre>\n\n<p>the show action of the restaurant controller should give you a url that looks like this: localhost:3000/restaurants/1\nwhere the 1 is the id of the restaurant. </p>\n\n<p>This id you want to save to the dish by adding a hidden field</p>\n\n<pre><code>=f.hidden_field :restaurant_id, value: @restaurant.id\n</code></pre>\n\n<p>you need to permit the restaurant_id in the dishes controller params, e.g. dish_params. Just add</p>\n\n<pre><code>:restaurant_id\n</code></pre>\n\n<p>and it should be fine. This way the id will be saved to the dishes table and you can later call it from there. \nThis gives you the chance to call @restaurant.dishes which will show all dishes of that restaurant. </p>\n\n<p>If you just want to redirect back you can use <code>redirect :back</code>\nOtherwise, you can try to integrate a helper to get the right restaurant using the hidden restaurant_id field</p>\n"}], "owner": {"reputation": 43, "user_id": 5078710, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3f9b0163879863b7c4a38f4893141c00?s=128&d=identicon&r=PG&f=1", "display_name": "imjustaguy", "link": "https://stackoverflow.com/users/5078710/imjustaguy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 425, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1485993207, "creation_date": 1485984602, "last_edit_date": 1485986977, "question_id": 41990119, "link": "https://stackoverflow.com/questions/41990119/call-controller-from-the-view-of-another-controller", "title": "Call controller from the view of another controller", "body": "<p>i have a restaurant controller, and in the show method i render a form of another controller (dishes)</p>\n\n<pre><code>   #new.html.erb (from dishes controller)\n   &lt;%= render 'dishes/dish_form' %&gt;\n\n   #show.html.erb (from restaurant controller)\n   &lt;%= render template: 'dishes/new' %&gt;\n</code></pre>\n\n<p>and this is the form:</p>\n\n<pre><code>&lt;%= form_for @dish, :url =&gt; { :controller =&gt; \"dishes\", action_name =&gt; \"create\" } do |f| %&gt;\n  &lt;div class=\"field\"&gt;\n    &lt;%= f.label :dish_name %&gt;\n    &lt;%= f.text_field :name %&gt;\n  &lt;/div&gt;\n   &lt;div class=\"field\"&gt;\n    &lt;%= f.label :description %&gt;\n    &lt;%= f.text_field :description %&gt;\n  &lt;/div&gt;\n  &lt;div class=\"field\"&gt;\n    &lt;%= f.label :image %&gt;\n    &lt;%= f.file_field :avatar %&gt;\n  &lt;/div&gt;\n  &lt;div class=\"actions\"&gt;\n    &lt;%= f.submit 'Add new dish' %&gt;\n  &lt;/div&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>but when i try so add a dish, i have this error\n<a href=\"https://i.stack.imgur.com/ELxaL.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ELxaL.png\" alt=\"enter image description here\"></a>\n<a href=\"https://i.stack.imgur.com/xFbVh.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/xFbVh.png\" alt=\"enter image description here\"></a></p>\n\n<p>this is my dishes controller:</p>\n\n<pre><code>  def new\n    @dish = Dish.new\n  end\n\n  def create\n    @dish = Dish.new(dish_params)\n\n    respond_to do |format|\n      if @dish.save\n        format.html { redirect_to @restaurant, notice: 'dish was successfully created.' }\n        format.json { render action: 'show', status: :created, location: :restaurant }\n      else\n        format.html { render action: 'show', location: :restaurant }\n        format.json { render json: @restaurant.errors, status: :unprocessable_entity }\n      end\n    end\n  end \n\n  private\n    def dish_params\n      params.require(:dish).permit(:avatar, :name, :description)\n    end\n</code></pre>\n\n<p>and this are my models:</p>\n\n<pre><code>class Restaurant &lt; ApplicationRecord\n  has_many :dish, inverse_of: :restaurant\n  accepts_nested_attributes_for :dish\nend\n\nclass Dish &lt; ApplicationRecord\n  belongs_to :restaurant\nend\n</code></pre>\n\n<p>im learning rails so maybe is a dumb error but im stuck </p>\n"}, {"tags": ["mysql", "ruby-on-rails", "ruby", "activerecord"], "comments": [{"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 1, "creation_date": 1485987172, "post_id": 41990071, "comment_id": 71158759, "body": "the scope is just syntactic sugar for the class method. As for how chaining combines queries, that&#39;s a more complicated topic, see  <a href=\"http://guides.rubyonrails.org/active_record_querying.html\" rel=\"nofollow noreferrer\">activerecord query interface</a> which is built on <a href=\"https://github.com/rails/arel\" rel=\"nofollow noreferrer\">arel</a>"}, {"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1485987354, "post_id": 41990071, "comment_id": 71158851, "body": "And class methods (include those that come from <code>scope</code>) are patched into the relations that <code>User.where(...)</code> returns. BTW, the structure of your <code>find_by_code</code> means that <code>Person.active.find_by_code(&quot;ABC123&quot;)</code> and <code>User.find_by_code(&quot;ABC123&quot;)</code> do the same thing as <code>find_by_code</code> doesn&#39;t pay any attention to its <code>self</code>."}, {"owner": {"reputation": 4918, "user_id": 1631106, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/42cac823ac4fa7a9c9e91599a0ff528f?s=128&d=identicon&r=PG", "display_name": "ivan", "link": "https://stackoverflow.com/users/1631106/ivan"}, "reply_to_user": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1486002290, "post_id": 41990071, "comment_id": 71163475, "body": "@muistooshort That&#39;s exactly what I thought too, but it&#39;s not the case. Given the code associated with an active user, it finds the user; given the code associated with an inactive user, it returns nil."}, {"owner": {"reputation": 4918, "user_id": 1631106, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/42cac823ac4fa7a9c9e91599a0ff528f?s=128&d=identicon&r=PG", "display_name": "ivan", "link": "https://stackoverflow.com/users/1631106/ivan"}, "edited": false, "score": 0, "creation_date": 1486002468, "post_id": 41990071, "comment_id": 71163521, "body": "Just realized I had mistyped <code>Person</code> when I meant <code>User</code> in the example. Maybe that created confusion."}, {"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1486004927, "post_id": 41990071, "comment_id": 71164146, "body": "Maybe you should update your question to include real code that you&#39;ve really used."}], "owner": {"reputation": 4918, "user_id": 1631106, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/42cac823ac4fa7a9c9e91599a0ff528f?s=128&d=identicon&r=PG", "display_name": "ivan", "link": "https://stackoverflow.com/users/1631106/ivan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 265, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1486002379, "creation_date": 1485984425, "last_edit_date": 1486002379, "question_id": 41990071, "link": "https://stackoverflow.com/questions/41990071/activerecord-chaining-scopes-and-queries-on-associated-records", "title": "ActiveRecord: chaining scopes and queries on associated records", "body": "<p>I came across a piece of ActiveRecord behavior that I find totally intuitive, but it took me by surprise. Given,</p>\n\n<pre><code>class User &lt; ActiveRecord::Base\n  has_one :profile\n\n  scope :active, -&gt; { where(status: 1) }\n\n  def self.find_by_code(code)\n    Profile.find_by_code(code).person\n  end\nend\n\nclass Profile &lt; ActiveRecord::Base\n  belongs_to :user\nend\n</code></pre>\n\n<p>I can combine the <code>active</code> scope and the <code>find_by_code</code> class method like,</p>\n\n<pre><code>User.active.find_by_code(\"ABC123\")\n</code></pre>\n\n<p>and it will find the profile with the given code, then use the user_id on that profile to find the associated person. <em>AND</em> it remembers the <code>active</code> scope. How does it do that?</p>\n\n<p>You can see in the generated queries that it first retrieves a <code>profile</code>, then queries for the relevant <code>person</code>:</p>\n\n<pre><code>SELECT `profiles`.* FROM `profiles` WHERE `profiles`.`code` = 'ABC123' LIMIT 1\nSELECT `user`.* FROM `user` WHERE `user`.`active` = 1 AND `user`.`id` = 8 LIMIT 1\n</code></pre>\n\n<p>Unrelated, but I'm on Rails 3. I know the finder methods have changed a bit since then.</p>\n"}, {"tags": ["ruby", "metaprogramming"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1485981221, "post_id": 41989014, "comment_id": 71155702, "body": "One thing to try is patching out the <code>require</code> function with one that logs, but keep in mind there are a number of ways to load in Ruby code: <code>load</code>, <code>autoload</code>, <code>require_relative</code> among others. You might have more success with wrapping Ruby in a debugger and watching for file I/O events."}, {"owner": {"reputation": 40236, "user_id": 923315, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/j6lLI.jpg?s=128&g=1", "display_name": "peter", "link": "https://stackoverflow.com/users/923315/peter"}, "edited": false, "score": 0, "creation_date": 1485987792, "post_id": 41989014, "comment_id": 71159059, "body": "to find all dependencies of a gem (but not all files) see <a href=\"http://stackoverflow.com/questions/21108109/how-do-i-find-out-all-the-dependencies-of-a-gem\" title=\"how do i find out all the dependencies of a gem\">stackoverflow.com/questions/21108109/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 28830, "user_id": 221213, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/bbfbca5273f9d020ef4ccfbadcecccba?s=128&d=identicon&r=PG", "display_name": "KARASZI Istv&#225;n", "link": "https://stackoverflow.com/users/221213/karaszi-istv%c3%a1n"}, "is_accepted": false, "score": 2, "last_activity_date": 1485983802, "last_edit_date": 1485983802, "creation_date": 1485983501, "answer_id": 41989828, "question_id": 41989014, "link": "https://stackoverflow.com/questions/41989014/find-all-current-files-that-ruby-opened-when-running-a-program/41989828#41989828", "title": "Find all current files that Ruby opened when running a program", "body": "<p>I did exactly the same a couple months ago. Here is my dirty little program:</p>\n\n<pre><code>REQUIRE_FILE = ENV.fetch('REQUIRE_FILE', '/tmp/requires.txt')\n\nFile.open(REQUIRE_FILE, 'w')\n\nKernel.module_eval do\n  alias_method :require_without_benchmark, :require\n\n  def require(name)\n    start = Time.now\n    begin\n      require_without_benchmark(name)\n    ensure\n      time = Time.now - start\n      File.write(REQUIRE_FILE, [name, time.to_f].join(',').concat(\"\\n\"), mode: 'a')\n    end\n  end\nend\n</code></pre>\n\n<p>Then run your program as:</p>\n\n<pre><code>ruby -r ./require-benchmark.rb program.rb\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1485985608, "post_id": 41989986, "comment_id": 71157949, "body": "A lot of these files are opened only briefly, so catching them in <code>lsof</code> may prove futile. It&#39;s good for seeing what&#39;s held open, though."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1485985731, "post_id": 41989986, "comment_id": 71158010, "body": "<code>strace</code> and <code>dtrace</code> are really great tools. Much better call! I&#39;ve also had luck with <a href=\"https://developer.apple.com/legacy/library/documentation/Darwin/Reference/ManPages/man1/fs_usage.1.html\" rel=\"nofollow noreferrer\"><code>fs_usage</code></a> for macOS/OS X."}], "tags": [], "owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "is_accepted": false, "score": 3, "last_activity_date": 1486018681, "last_edit_date": 1492086990, "creation_date": 1485984129, "answer_id": 41989986, "question_id": 41989014, "link": "https://stackoverflow.com/questions/41989014/find-all-current-files-that-ruby-opened-when-running-a-program/41989986#41989986", "title": "Find all current files that Ruby opened when running a program", "body": "<h1>lsof</h1>\n\n<p>On linux, you could use <a href=\"https://en.wikipedia.org/wiki/Lsof\" rel=\"nofollow noreferrer\"><code>lsof</code></a> :</p>\n\n<pre><code>puts `lsof -a -p #{Process.pid}`\n</code></pre>\n\n<p>It gives you the files <strong>held</strong> open by the current process.</p>\n\n<p>The list is far from being complete, though : Once this line executes, many files have been read, parsed, executed and closed.</p>\n\n<p>When <code>lsof</code> scans for open files, they don't appear in the list anymore.</p>\n\n<h1>strace</h1>\n\n<p><a href=\"https://en.wikipedia.org/wiki/Strace\" rel=\"nofollow noreferrer\"><code>strace</code></a> (also on Linux) is a great tool for what you want to achieve (see this <a href=\"https://unix.stackexchange.com/questions/58887/how-do-i-monitor-opened-files-of-a-process-in-realtime\">thread</a>). It will give a lot (possibly way too much) information :</p>\n\n<pre><code>strace -e trace=open -o opened_files.txt ruby hello_world.rb\n#=&gt; Hello world\n</code></pre>\n\n<p><code>opened_files.txt</code> now begins with :</p>\n\n<pre><code>open(\"/home/ricou/.rvm/rubies/ruby-2.3.1/lib/tls/x86_64/libruby.so.2.3\", O_RDONLY|O_CLOEXEC) = -1 ENOENT (No such file or directory)\nopen(\"/home/ricou/.rvm/rubies/ruby-2.3.1/lib/tls/libruby.so.2.3\", O_RDONLY|O_CLOEXEC) = -1 ENOENT (No such file or directory)\nopen(\"/home/ricou/.rvm/rubies/ruby-2.3.1/lib/x86_64/libruby.so.2.3\", O_RDONLY|O_CLOEXEC) = -1 ENOENT (No such file or directory)\nopen(\"/home/ricou/.rvm/rubies/ruby-2.3.1/lib/libruby.so.2.3\", O_RDONLY|O_CLOEXEC) = 3\nopen(\"/home/ricou/.rvm/rubies/ruby-2.3.1/lib/libc.so.6\", O_RDONLY|O_CLOEXEC) = -1 ENOENT (No such file or directory)\nopen(\"/etc/ld.so.cache\", O_RDONLY|O_CLOEXEC) = 3\nopen(\"/lib/x86_64-linux-gnu/libc.so.6\", O_RDONLY|O_CLOEXEC) = 3\nopen(\"/home/ricou/.rvm/rubies/ruby-2.3.1/lib/libpthread.so.0\", O_RDONLY|O_CLOEXEC) = -1 ENOENT (No such file or directory)\nopen(\"/lib/x86_64-linux-gnu/libpthread.so.0\", O_RDONLY|O_CLOEXEC) = 3\nopen(\"/home/ricou/.rvm/rubies/ruby-2.3.1/lib/libgmp.so.10\", O_RDONLY|O_CLOEXEC) = -1 ENOENT (No such file or directory)\n....\n</code></pre>\n\n<p>It has 571 lines for a \"Hello World\" script and 112302 (!) for a \"rails runner hello_world.rb\" script.</p>\n\n<p>The output file has many \"ENOENT (No such file or directory)\" lines, so you might want to parse and filter it.</p>\n\n<p>For macOS and other *nix, there should be <a href=\"https://en.wikipedia.org/wiki/DTrace\" rel=\"nofollow noreferrer\"><code>dtrace</code></a>.</p>\n"}, {"tags": [], "owner": {"reputation": 40236, "user_id": 923315, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/j6lLI.jpg?s=128&g=1", "display_name": "peter", "link": "https://stackoverflow.com/users/923315/peter"}, "is_accepted": false, "score": 1, "last_activity_date": 1485993247, "last_edit_date": 1495540928, "creation_date": 1485993247, "answer_id": 41992043, "question_id": 41989014, "link": "https://stackoverflow.com/questions/41989014/find-all-current-files-that-ruby-opened-when-running-a-program/41992043#41992043", "title": "Find all current files that Ruby opened when running a program", "body": "<p>See <a href=\"https://stackoverflow.com/questions/7190015/how-do-i-get-a-list-of-files-that-have-been-required-in-ruby\">How do I get a list of files that have been `required` in Ruby?</a> for required files.\nFor all the dependencies of a gem see <a href=\"https://stackoverflow.com/questions/21108109/how-do-i-find-out-all-the-dependencies-of-a-gem\">How do I find out all the dependencies of a gem?</a></p>\n\n<p>The constant <code>$LOADED_FEATURES</code> holds an array of all files with paths that are loaded with a require, not just the gems themselves but all files involved.\nTry <code>$LOADED_FEATURES.dup.uniq</code> at the end of your script.</p>\n\n<p>For the normal files opened by File you could overwrite <code>IO.open</code> and/or <code>File.open</code> and sister methods read, binread etc in the way KARASZI shows in his answer.</p>\n"}], "owner": {"reputation": 1402, "user_id": 275249, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/f4a6789a3cfae583e20b747df4dfe519?s=128&d=identicon&r=PG&f=1", "display_name": "n_x_l", "link": "https://stackoverflow.com/users/275249/n-x-l"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 196, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1486018681, "creation_date": 1485980563, "question_id": 41989014, "link": "https://stackoverflow.com/questions/41989014/find-all-current-files-that-ruby-opened-when-running-a-program", "title": "Find all current files that Ruby opened when running a program", "body": "<p>This is someone of an esoteric request, and is just of theoretical interest to me (In other words, I am not used this in production code). I'd like to know if it is possible to figure out all the files involved when running a ruby program. That is, files <code>require</code>d by said program during its execution (or involved some other way, such as <code>autoload</code>ed by Rails midway through the program). </p>\n\n<p>I know that one can use <code>ObjectSpace</code> and loop through the object, excluding all but <code>File</code> and its descendants, and I had partial success with this method when I disable garbage collection (otherwise the list shrinks at random times, understandably). However, doing this at the start of the program ignores those files that are required in the middle of it, so I can run the same code at the end, and get the union of said files? </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "activerecord"], "comments": [{"owner": {"reputation": 67463, "user_id": 203130, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/1RE8c.jpg?s=128&g=1", "display_name": "coreyward", "link": "https://stackoverflow.com/users/203130/coreyward"}, "edited": false, "score": 0, "creation_date": 1485982210, "post_id": 41988708, "comment_id": 71156251, "body": "This is a non-trivial and somewhat unintuitive area. <a href=\"http://guides.rubyonrails.org/autoloading_and_reloading_constants.html\" rel=\"nofollow noreferrer\">I highly recommend reading this page</a>."}], "answers": [{"comments": [{"owner": {"reputation": 67463, "user_id": 203130, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/1RE8c.jpg?s=128&g=1", "display_name": "coreyward", "link": "https://stackoverflow.com/users/203130/coreyward"}, "edited": false, "score": 0, "creation_date": 1485982952, "post_id": 41989339, "comment_id": 71156713, "body": "Note: The docs specifically say <i>not</i> to do what you&#39;re suggesting: <a href=\"http://guides.rubyonrails.org/autoloading_and_reloading_constants.html#autoloading-and-require\" rel=\"nofollow noreferrer\">\u201cFiles defining constants to be autoloaded should never be required\u201d</a>"}], "tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": false, "score": 0, "last_activity_date": 1485981627, "creation_date": 1485981627, "answer_id": 41989339, "question_id": 41988708, "link": "https://stackoverflow.com/questions/41988708/class-name-conflict-across-modules/41989339#41989339", "title": "Class name conflict across modules", "body": "<p>Although there's nothing in Ruby that precludes you from having duplicated class names, the Rails auto-loader does get easily confused by them which can cause a lot of problems.</p>\n\n<p>Typically I go out of my way to avoid duplication for this very reason. Sometimes they work, sometimes they don't, and the working/not-working aspect of the code can often depend on which entry point is taken, which things are loaded first, making it unpredictable.</p>\n\n<p>You can try and circumvent this by force-loading your <code>Event</code> class using <code>require_relative</code> at the end of <code>lib_module.rb</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 67463, "user_id": 203130, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/1RE8c.jpg?s=128&g=1", "display_name": "coreyward", "link": "https://stackoverflow.com/users/203130/coreyward"}, "is_accepted": false, "score": 2, "last_activity_date": 1485982796, "creation_date": 1485982796, "answer_id": 41989658, "question_id": 41988708, "link": "https://stackoverflow.com/questions/41988708/class-name-conflict-across-modules/41989658#41989658", "title": "Class name conflict across modules", "body": "<p>This has to do with <a href=\"http://guides.rubyonrails.org/autoloading_and_reloading_constants.html#autoloading-algorithms-qualified-references\" rel=\"nofollow noreferrer\">the way qualified constants are resolved by the Rails autoloader</a>. The documentation offers the following solution:</p>\n\n<blockquote>\n  <p>Naming conflicts of this kind are rare in practice, but if one occurs, <code>require_dependency</code> provides a solution by ensuring that the constant needed to trigger the heuristic is defined in the conflicting place.</p>\n</blockquote>\n\n<p>The solution, in your case, is to add this just above the class definition for <code>LibModule::Event</code>:</p>\n\n<pre><code>require_dependency 'event'\n</code></pre>\n\n<p>This will inform the autoloader of the <code>::Event</code> constant that references your ActiveRecord model, ensuring the appropriate constant naming for <code>LibModule::Event</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 6126795, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c8899e36d05b2bbb8360b831a5eaffc?s=128&d=identicon&r=PG&f=1", "display_name": "vdz", "link": "https://stackoverflow.com/users/6126795/vdz"}, "is_accepted": false, "score": 0, "last_activity_date": 1596142690, "creation_date": 1596142690, "answer_id": 63181311, "question_id": 41988708, "link": "https://stackoverflow.com/questions/41988708/class-name-conflict-across-modules/63181311#63181311", "title": "Class name conflict across modules", "body": "<p>to reference the main event class try <code>::Event</code>. <code>::</code> is a scope resolution operator, which specifies the global/main scope.</p>\n"}], "owner": {"reputation": 51, "user_id": 1956536, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96621c46ffe15baa0f4d5a6a7b03147d?s=128&d=identicon&r=PG", "display_name": "JJL", "link": "https://stackoverflow.com/users/1956536/jjl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1491, "favorite_count": 0, "answer_count": 3, "score": 2, "last_activity_date": 1596142690, "creation_date": 1485979515, "last_edit_date": 1485981190, "question_id": 41988708, "link": "https://stackoverflow.com/questions/41988708/class-name-conflict-across-modules", "title": "Class name conflict across modules", "body": "<p>I'm running into an issue in a Rails 4 application related to class names and modules.</p>\n\n<p>I have an <code>Event</code> class in my main application that inherits from <code>ActiveRecord::Base</code>. I also have a set of files in my /lib directory that have been grouped into a module I call <code>LibModule</code>. There's a class in that module that's also named <code>Event</code>. I noticed something interesting about referencing these classes. Here are some examples using the Rails console.</p>\n\n<p>Example #1: When Event has never been referenced, the ActiveRecord version gets loaded:</p>\n\n<pre><code>&gt; Event\n=&gt; Event(id: integer...)\n</code></pre>\n\n<p>Example #2: When LibModule::Event gets referenced first:</p>\n\n<pre><code>&gt; LibModule::Event\n=&gt; LibModule::Event\n&gt; Event\n=&gt; LibModule::Event\n</code></pre>\n\n<p>As a result, when my server restarts (after updates, etc), I'll occasionally get the following error if a user engages in behavior that triggers server activity similar to Example #2:</p>\n\n<pre><code>superclass mismatch for class Event\n</code></pre>\n\n<p>I know there are a few ways to ensure that there's no conflict here. What's the best practice way of handling a situation like this?</p>\n\n<ol>\n<li>I tried replicating the behavior from Example #2 with class names from gems and it seems like Rails completely segregates the classes in gems. Is there a way to do the same here? I think this would be my ideal situation.</li>\n<li>Should I just change the name of <code>LibModule::Event</code>? </li>\n<li>Should I ensure that the <code>ActiveRecord</code> class loads during initialization?</li>\n<li>Some other Rails best practice I haven't thought of?</li>\n</ol>\n"}, {"tags": ["ruby", "amazon-web-services"], "answers": [{"comments": [{"owner": {"reputation": 1151, "user_id": 432164, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a26f9f9143039373c00ac60dcd9fa50b?s=128&d=identicon&r=PG", "display_name": "traday", "link": "https://stackoverflow.com/users/432164/traday"}, "edited": false, "score": 0, "creation_date": 1485981379, "post_id": 41988862, "comment_id": 71155787, "body": "Mark, these are good options.  I will look into them.  I will be back to mark it an answer if I can get it working to meet my need.  Thanks."}], "tags": [], "owner": {"reputation": 137816, "user_id": 13070, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/pio3A.jpg?s=128&g=1", "display_name": "Mark B", "link": "https://stackoverflow.com/users/13070/mark-b"}, "is_accepted": true, "score": 1, "last_activity_date": 1485980038, "creation_date": 1485980038, "answer_id": 41988862, "question_id": 41988676, "link": "https://stackoverflow.com/questions/41988676/how-can-i-trigger-an-event-or-notification-when-an-aws-ssm-runcommand-script-com/41988862#41988862", "title": "How can I trigger an event or notification when an AWS SSM RunCommand Script completes executing on my EC2 Instance?", "body": "<p>Here are some options I can think of:</p>\n\n<ul>\n<li>You could add a final step to the SSM command which would send an email or post to an SNS topic or something similar.</li>\n<li>The AWS SSM <code>send_command</code> API takes a <code>notification_config</code> parameter which you can configure to send a notification to an SNS topic when the command is in certain states, like the \"Success\" state. This is probably the best option for monitoring the state of the command. </li>\n</ul>\n\n<p>Once you have done something to post to an SNS topic, you can configure a Lambda function to be triggered by messages in that SNS topic.</p>\n"}, {"tags": [], "owner": {"reputation": 159, "user_id": 6553719, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jkTtm.jpg?s=128&g=1", "display_name": "Talmaj", "link": "https://stackoverflow.com/users/6553719/talmaj"}, "is_accepted": false, "score": 1, "last_activity_date": 1503013199, "creation_date": 1503013199, "answer_id": 45746449, "question_id": 41988676, "link": "https://stackoverflow.com/questions/41988676/how-can-i-trigger-an-event-or-notification-when-an-aws-ssm-runcommand-script-com/45746449#45746449", "title": "How can I trigger an event or notification when an AWS SSM RunCommand Script completes executing on my EC2 Instance?", "body": "<p>I resolved this problem by checking periodically if command's status is no longer \"InProgress\". The code is in bash, but the logic should be applicable elsewhere as well.</p>\n\n<pre><code>ID=\"instance_id\"\nCOMMAND_ID=$(aws ssm send-command --instance-ids $ID --document-name \"AWS-RunShellScript\" \n             --parameters commands=\"python\" --output text --query \"Command.CommandId\")\nSTATUS=$(aws ssm list-commands --instance-id $ID --command-id $COMMAND_ID \n         --query \"Commands[0].Status\")\n\nwhile [ $STATUS \"==\" '\"InProgress\"' ]; do\n    sleep 30;\n    STATUS=$(aws ssm list-commands --instance-id $ID --command-id $COMMAND_ID\n             --query \"Commands[0].Status\"); \ndone\n</code></pre>\n"}], "owner": {"reputation": 1151, "user_id": 432164, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a26f9f9143039373c00ac60dcd9fa50b?s=128&d=identicon&r=PG", "display_name": "traday", "link": "https://stackoverflow.com/users/432164/traday"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1004, "favorite_count": 0, "accepted_answer_id": 41988862, "answer_count": 2, "score": 1, "last_activity_date": 1503013199, "creation_date": 1485979409, "question_id": 41988676, "link": "https://stackoverflow.com/questions/41988676/how-can-i-trigger-an-event-or-notification-when-an-aws-ssm-runcommand-script-com", "title": "How can I trigger an event or notification when an AWS SSM RunCommand Script completes executing on my EC2 Instance?", "body": "<h2>Some background:</h2>\n\n<p>I am writing an application (using AWS Ruby SDK/API) that deploys another application on AWS EC2 instances.  Specifically, I deploy it as an ECS Cluster of 4 ec2 instances and then start ECS Tasks (not services), one on each ec2 instance and run these docker images.  That all works fine.  The problem is that at some point I need to save one of those docker images off in my ECR repo.  I do that by using Simple System Manager(SSM)'s aws:runShellScript to run the command on the ECS Container Instance.  That command may take 1-4 minutes and I don't have any way of finding out when the command completes. Right now I do a sleep and then just grab the tagged container image from the repository and that is error prone.</p>\n\n<h2>The question:</h2>\n\n<p>Is there any way to:</p>\n\n<ol>\n<li>wait_until for an SSM run command to complete? or</li>\n<li>have my deploying application be notified through AWS Lambda or some such? or</li>\n<li>Listen for events?</li>\n</ol>\n"}, {"tags": ["ruby", "ruby-debug-ide"], "owner": {"reputation": 871, "user_id": 345052, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/6e02a6fdb3ced1a0b8f9bf8c76f70357?s=128&d=identicon&r=PG", "display_name": "qwebek", "link": "https://stackoverflow.com/users/345052/qwebek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 543, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1485979098, "creation_date": 1485979098, "question_id": 41988560, "link": "https://stackoverflow.com/questions/41988560/installing-ruby-debug-ide-failed-to-build-gem-native-extension", "title": "Installing ruby-debug-ide - Failed to build gem native extension", "body": "<p>I have win7x64 and struggling to install ruby-debug-ide to use debugger in my ide. It is failing to build gem native extensions\nhave tried everything i could find through net\n--verbose, --pre, --with ruby etc</p>\n\n<p>Its still failing (</p>\n\n<p>Can anyone give some tip please? thanks</p>\n\n<pre><code>$ ruby -v\nruby 2.3.1p112 (2016-04-26 revision 54768) [x64-mingw32]\n\n\n$ gem install ruby-debug-ide\nBuilding native extensions.  This could take a while...\nSystem cannot find path specified\nERROR:  Error installing ruby-debug-ide:\n        ERROR: Failed to build gem native extension.\n\n    current directory: C:/Ruby231-x64/lib/ruby/gems/2.3.0/gems/ruby-debug-ide-0.6.0/ext\nC:/Ruby231-x64/bin/ruby.exe mkrf_conf.rb\n'\u0401\u0431\u0432?\u2510? -? \u0433\u00a4 ?\u0432\u0431\u043f - c\u0432\u0401 \u0433\u0404 \u00a7 --\u043bc \u0407\u0433\u0432\u043c.\n'\u0401\u0431\u0432?\u2510? -? \u0433\u00a4 ?\u0432\u0431\u043f - c\u0432\u0401 \u0433\u0404 \u00a7 --\u043bc \u0407\u0433\u0432\u043c.\nInstalling base gem\nBuilding native extensions.  This could take a while...\nBuilding native extensions.  This could take a while...\nERROR: Failed to build gem native extension.\n\n    current directory: C:/Ruby231-x64/lib/ruby/gems/2.3.0/gems/debase-0.2.2.beta9/ext\nC:/Ruby231-x64/bin/ruby.exe -r ./siteconf20170120-10104-1f4a8us.rb extconf.rb\nchecking for vm_core.h... no\nchecking for vm_core.h... no\nchecking for vm_core.h... yes\ncreating Makefile\n\nTo see why this extension failed to compile, please check the mkmf.log which can be found here:\n\n  C:/Ruby231-x64/lib/ruby/gems/2.3.0/extensions/x64-mingw32/2.3.0/debase-0.2.2.beta9/mkmf.log\n\nextconf failed, exit code 1\n\nGem files will remain installed in C:/Ruby231-x64/lib/ruby/gems/2.3.0/gems/debase-0.2.2.beta9 for inspection.\nResults logged to C:/Ruby231-x64/lib/ruby/gems/2.3.0/extensions/x64-mingw32/2.3.0/debase-0.2.2.beta9/gem_make.out\nC:/Ruby231-x64/lib/ruby/site_ruby/2.3.0/rubygems/ext/builder.rb:92:in `run'\n  C:/Ruby231-x64/lib/ruby/site_ruby/2.3.0/rubygems/ext/ext_conf_builder.rb:48:in `block in build'\n  C:/Ruby231-x64/lib/ruby/2.3.0/tempfile.rb:295:in `open'\n  C:/Ruby231-x64/lib/ruby/site_ruby/2.3.0/rubygems/ext/ext_conf_builder.rb:31:in `build'\n  C:/Ruby231-x64/lib/ruby/site_ruby/2.3.0/rubygems/ext/builder.rb:164:in `block (2 levels) in build_extension'\n  C:/Ruby231-x64/lib/ruby/site_ruby/2.3.0/rubygems/ext/builder.rb:163:in `chdir'\n  C:/Ruby231-x64/lib/ruby/site_ruby/2.3.0/rubygems/ext/builder.rb:163:in `block in build_extension'\n  C:/Ruby231-x64/lib/ruby/site_ruby/2.3.0/rubygems/ext/builder.rb:162:in `synchronize'\n  C:/Ruby231-x64/lib/ruby/site_ruby/2.3.0/rubygems/ext/builder.rb:162:in `build_extension'\n  C:/Ruby231-x64/lib/ruby/site_ruby/2.3.0/rubygems/ext/builder.rb:201:in `block in build_extensions'\n  C:/Ruby231-x64/lib/ruby/site_ruby/2.3.0/rubygems/ext/builder.rb:198:in `each'\n  C:/Ruby231-x64/lib/ruby/site_ruby/2.3.0/rubygems/ext/builder.rb:198:in `build_extensions'\n  C:/Ruby231-x64/lib/ruby/site_ruby/2.3.0/rubygems/installer.rb:752:in `build_extensions'\n  C:/Ruby231-x64/lib/ruby/site_ruby/2.3.0/rubygems/installer.rb:304:in `install'\n  C:/Ruby231-x64/lib/ruby/site_ruby/2.3.0/rubygems/resolver/specification.rb:97:in `install'\n  C:/Ruby231-x64/lib/ruby/site_ruby/2.3.0/rubygems/request_set.rb:166:in `block in install'\n  C:/Ruby231-x64/lib/ruby/site_ruby/2.3.0/rubygems/request_set.rb:156:in `each'\n  C:/Ruby231-x64/lib/ruby/site_ruby/2.3.0/rubygems/request_set.rb:156:in `install'\n  C:/Ruby231-x64/lib/ruby/site_ruby/2.3.0/rubygems/dependency_installer.rb:405:in `install'\n  mkrf_conf.rb:35:in `rescue in &lt;main&gt;'\n  mkrf_conf.rb:28:in `&lt;main&gt;'\n\nrake failed, exit code 1\n\nGem files will remain installed in C:/Ruby231-x64/lib/ruby/gems/2.3.0/gems/ruby-debug-ide-0.6.0 for inspection.\nResults logged to C:/Ruby231-x64/lib/ruby/gems/2.3.0/extensions/x64-mingw32/2.3.0/ruby-debug-ide-0.6.0/gem_make.out\n\n\n$ gem install debase-ruby_core_source\nSuccessfully installed debase-ruby_core_source-0.9.6\n\n\n$ gem install debase -- --with-ruby-include=C:\\Ruby231-x64\\lib\\ruby\\gems\\2.3.0\\gems\\debase-ruby_core_source-0.9.6\\lib\\debase\\ruby_core_source\\ruby-2.3.1-p112\nBuilding native extensions with: '--with-ruby-include=C:\\Ruby231-x64\\lib\\ruby\\gems\\2.3.0\\gems\\debase-ruby_core_source-0.9.6\\lib\\debase\\ruby_core_source\\ruby-2.3.1-p112ruby -v'\nThis could take a while...\nSystem cannot find path specified\nERROR:  Error installing debase:\n        ERROR: Failed to build gem native extension.\n\n\n$ gem install debase --pre\nBuilding native extensions.  This could take a while...\nSystem cannot find path specified\nERROR:  Error installing debase:\n        ERROR: Failed to build gem native extension.\n\n$ gem install ruby-debug-ide --pre\nBuilding native extensions.  This could take a while...\n\u0421\u0438\u0441\u0442\u0435\u043c\u0435 \u043d\u0435 \u0443\u0434\u0430\u0435\u0442\u0441\u044f \u043d\u0430\u0439\u0442\u0438 \u0443\u043a\u0430\u0437\u0430\u043d\u043d\u044b\u0439 \u043f\u0443\u0442\u044c.\nERROR:  Error installing ruby-debug-ide:\n        ERROR: Failed to build gem native extension.\n\n    current directory: C:/Ruby231-x64_unit/lib/ruby/gems/2.3.0/gems/ruby-debug-ide-0.6.1.beta4/ext\nC:/Ruby231-x64_unit/bin/ruby.exe mkrf_conf.rb\n'\u0401\u0431\u0432?\u2510? -? \u0433\u00a4\u00a0?\u0432\u0431\u043f -\u00a0c\u0432\u0401 \u0433\u0404\u00a0\u00a7\u00a0--\u043bc \u0407\u0433\u0432\u043c.\n'\u0401\u0431\u0432?\u2510? -? \u0433\u00a4\u00a0?\u0432\u0431\u043f -\u00a0c\u0432\u0401 \u0433\u0404\u00a0\u00a7\u00a0--\u043bc \u0407\u0433\u0432\u043c.\nInstalling base gem\nBuilding native extensions.  This could take a while...\nBuilding native extensions.  This could take a while...\nERROR: Failed to build gem native extension.\n\n    current directory: C:/Ruby231-x64_unit/lib/ruby/gems/2.3.0/gems/debase-0.2.2.beta9/ext\nC:/Ruby231-x64_unit/bin/ruby.exe -r ./siteconf20170201-7760-7dws4t.rb extconf.rb\nchecking for vm_core.h... no\nchecking for vm_core.h... no\nchecking for vm_core.h... yes\ncreating Makefile\n\nTo see why this extension failed to compile, please check the mkmf.log which can be found here:\n\n  C:/Ruby231-x64_unit/lib/ruby/gems/2.3.0/extensions/x64-mingw32/2.3.0/debase-0.2.2.beta9/mkmf.log\n\nextconf failed, exit code 1\n\nGem files will remain installed in C:/Ruby231-x64_unit/lib/ruby/gems/2.3.0/gems/debase-0.2.2.beta9 for inspection.\nResults logged to C:/Ruby231-x64_unit/lib/ruby/gems/2.3.0/extensions/x64-mingw32/2.3.0/debase-0.2.2.beta9/gem_make.out\nC:/Ruby231-x64_unit/lib/ruby/site_ruby/2.3.0/rubygems/ext/builder.rb:91:in `run'\n  C:/Ruby231-x64_unit/lib/ruby/site_ruby/2.3.0/rubygems/ext/ext_conf_builder.rb:36:in `block in build'\n  C:/Ruby231-x64_unit/lib/ruby/2.3.0/tempfile.rb:295:in `open'\n  C:/Ruby231-x64_unit/lib/ruby/site_ruby/2.3.0/rubygems/ext/ext_conf_builder.rb:19:in `build'\n  C:/Ruby231-x64_unit/lib/ruby/site_ruby/2.3.0/rubygems/ext/builder.rb:163:in `block (2 levels) in build_extension'\n  C:/Ruby231-x64_unit/lib/ruby/site_ruby/2.3.0/rubygems/ext/builder.rb:162:in `chdir'\n  C:/Ruby231-x64_unit/lib/ruby/site_ruby/2.3.0/rubygems/ext/builder.rb:162:in `block in build_extension'\n  C:/Ruby231-x64_unit/lib/ruby/site_ruby/2.3.0/rubygems/ext/builder.rb:161:in `synchronize'\n  C:/Ruby231-x64_unit/lib/ruby/site_ruby/2.3.0/rubygems/ext/builder.rb:161:in `build_extension'\n  C:/Ruby231-x64_unit/lib/ruby/site_ruby/2.3.0/rubygems/ext/builder.rb:200:in `block in build_extensions'\n  C:/Ruby231-x64_unit/lib/ruby/site_ruby/2.3.0/rubygems/ext/builder.rb:197:in `each'\n  C:/Ruby231-x64_unit/lib/ruby/site_ruby/2.3.0/rubygems/ext/builder.rb:197:in `build_extensions'\n  C:/Ruby231-x64_unit/lib/ruby/site_ruby/2.3.0/rubygems/installer.rb:741:in `build_extensions'\n  C:/Ruby231-x64_unit/lib/ruby/site_ruby/2.3.0/rubygems/installer.rb:290:in `install'\n  C:/Ruby231-x64_unit/lib/ruby/site_ruby/2.3.0/rubygems/request_set.rb:166:in `block in install'\n  C:/Ruby231-x64_unit/lib/ruby/site_ruby/2.3.0/rubygems/request_set.rb:150:in `each'\n  C:/Ruby231-x64_unit/lib/ruby/site_ruby/2.3.0/rubygems/request_set.rb:150:in `install'\n  C:/Ruby231-x64_unit/lib/ruby/site_ruby/2.3.0/rubygems/dependency_installer.rb:404:in `install'\n  mkrf_conf.rb:35:in `rescue in &lt;main&gt;'\n  mkrf_conf.rb:28:in `&lt;main&gt;'\n\nrake failed, exit code 1\n\nGem files will remain installed in C:/Ruby231-x64_unit/lib/ruby/gems/2.3.0/gems/ruby-debug-ide-0.6.1.beta4 for inspection.\nResults logged to C:/Ruby231-x64_unit/lib/ruby/gems/2.3.0/extensions/x64-mingw32/2.3.0/ruby-debug-ide-0.6.1.beta4/gem_make.out\n</code></pre>\n"}, {"tags": ["arrays", "ruby", "each"], "comments": [{"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1485983703, "post_id": 41988377, "comment_id": 71157087, "body": "Are <code>*indexes</code> fixed?"}], "answers": [{"comments": [{"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1485981369, "post_id": 41988403, "comment_id": 71155781, "body": "if you really love this patch you can load it with refinements then it won&#39;t be frowned upon as much."}], "tags": [], "owner": {"reputation": 22074, "user_id": 4703663, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/kN6k0.jpg?s=128&g=1", "display_name": "Richard Hamilton", "link": "https://stackoverflow.com/users/4703663/richard-hamilton"}, "is_accepted": true, "score": 1, "last_activity_date": 1485978541, "creation_date": 1485978541, "answer_id": 41988403, "question_id": 41988377, "link": "https://stackoverflow.com/questions/41988377/how-do-i-apply-values-at-to-an-array-of-arrays-in-ruby/41988403#41988403", "title": "How do I apply &quot;values_at&quot; to an array of arrays in Ruby?", "body": "<p>You can't use symbol to proc with a parameter.</p>\n\n<pre><code>arr_of_arrays.map { |a| a.values_at(*indexes) }\n</code></pre>\n\n<p>One possible workaround is modifying the <code>Symbol</code> class, but this practice is highly frowned upon.</p>\n\n<pre><code>class Symbol\n  def with(*args, &amp;block)\n    -&gt;(caller, *rest) { caller.send(self, *rest, *args, &amp;block) }\n  end\nend\n</code></pre>\n\n<p>With this you can pass parameters.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user7055375"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 86, "favorite_count": 0, "accepted_answer_id": 41988403, "answer_count": 1, "score": 0, "last_activity_date": 1485978541, "creation_date": 1485978417, "question_id": 41988377, "link": "https://stackoverflow.com/questions/41988377/how-do-i-apply-values-at-to-an-array-of-arrays-in-ruby", "title": "How do I apply &quot;values_at&quot; to an array of arrays in Ruby?", "body": "<p>I'm using Ruby 2.4.  If I want to extract certain elements from an array at indexes I specify in another array, I can do</p>\n\n<pre><code>2.4.0 :012 &gt; arr.values_at(*indexes)\n =&gt; [\"a\", \"e\", \"g\"] \n</code></pre>\n\n<p>But if I have an array of arrays, how would apply the above to each array in the array of arrays?  I tried this</p>\n\n<pre><code>2.4.0 :014 &gt; arr_of_arrays.map( &amp;values_at(*indexes) )\nNoMethodError: undefined method `values_at' for main:Object\n</code></pre>\n\n<p>Also I would like the result to be a new object, as opposed to modifying the original object in place.</p>\n"}, {"tags": ["arrays", "ruby", "hash", "max"], "answers": [{"tags": [], "owner": {"reputation": 56, "user_id": 1768620, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0aa170c7954127ea7f4a044eb3c82129?s=128&d=identicon&r=PG", "display_name": "fiachetti", "link": "https://stackoverflow.com/users/1768620/fiachetti"}, "is_accepted": false, "score": 1, "last_activity_date": 1486386380, "last_edit_date": 1486386380, "creation_date": 1485977218, "answer_id": 41988037, "question_id": 41987802, "link": "https://stackoverflow.com/questions/41987802/how-to-find-the-key-of-a-hash-whose-value-has-the-most-elements/41988037#41988037", "title": "How to find the key of a hash whose value has the most elements", "body": "<p>You can do it like this:</p>\n\n<pre><code>my_hash.map {|k, v| [k, v.count]}.max_by {|k, v| v}.first\n</code></pre>\n\n<p>The first map will return an array of two elements arrays. For each of them, the first element is the key and the second is the number of elements of the corresponding array. Then it uses <code>max_by</code> to return the two element array with the maximum number of elements. Finally, the <code>first</code> method returns the key.</p>\n"}, {"comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1485977374, "post_id": 41988039, "comment_id": 71153654, "body": "Worth noting the <code>.first</code> call is necessary because <code>max_by</code> returns a key/value pair for hashes."}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1485977420, "post_id": 41988039, "comment_id": 71153675, "body": "Thanks. I usually write code ASAP and edit the answer for more information. ;)"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1485977455, "post_id": 41988039, "comment_id": 71153701, "body": "Yep! Just adding some clarification since that might seem awfully mysterious to the uninitiated."}, {"owner": {"reputation": 25823, "user_id": 24468, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/PWl6C.png?s=128&g=1", "display_name": "akuhn", "link": "https://stackoverflow.com/users/24468/akuhn"}, "edited": false, "score": 0, "creation_date": 1486059604, "post_id": 41988039, "comment_id": 71194637, "body": "Removed the paragraph that talked about <code>first</code> since that is not used in your code anymore. Hope that is okay, feel free to revert."}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1486059696, "post_id": 41988039, "comment_id": 71194687, "body": "I&#39;m not sure. Another user could come and comment that <code>longest_array</code> is unneeded here. :)"}], "tags": [], "owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "is_accepted": true, "score": 7, "last_activity_date": 1486059574, "last_edit_date": 1486059574, "creation_date": 1485977224, "answer_id": 41988039, "question_id": 41987802, "link": "https://stackoverflow.com/questions/41987802/how-to-find-the-key-of-a-hash-whose-value-has-the-most-elements/41988039#41988039", "title": "How to find the key of a hash whose value has the most elements", "body": "<p><a href=\"http://ruby-doc.org/core-2.4.0/Enumerable.html#method-i-max_by\" rel=\"nofollow noreferrer\"><code>max_by</code></a> is the correct method :</p>\n\n<pre><code>my_hash = { a: [1, 2], b: [1, 2, 3], c: [5] }\n\nkey, longest_array = my_hash.max_by{ |k, array| array.size }\n\np key\n#=&gt; :b\n\np longest_array\n#=&gt; [1, 2, 3]\n</code></pre>\n\n<p>You just need to specify on which object the comparison should be. In this case, the size of the array value.</p>\n\n<p>You might need to add some checks first : this will only work if all the hash values respond to <code>:size</code>.</p>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user7055375"}, "edited": false, "score": 0, "creation_date": 1485978311, "post_id": 41988180, "comment_id": 71154144, "body": "Is there any performance difference between using &quot;count&quot; or using &quot;size,&quot; as what Eric suggests?"}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 1, "creation_date": 1485986498, "post_id": 41988180, "comment_id": 71158415, "body": "According to : <a href=\"http://batsov.com/articles/2014/02/17/the-elements-of-style-in-ruby-number-13-length-vs-size-vs-count/\" rel=\"nofollow noreferrer\">batsov.com/articles/2014/02/17/&hellip;</a> <code>count</code> is slower for some <code>Enumerable</code>s, but should be the same as <code>size</code> or <code>length</code> for arrays"}], "tags": [], "owner": {"reputation": 1070, "user_id": 1401773, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/kxDMC.jpg?s=128&g=1", "display_name": "Rodrigo Vasconcelos", "link": "https://stackoverflow.com/users/1401773/rodrigo-vasconcelos"}, "is_accepted": false, "score": 0, "last_activity_date": 1485977708, "creation_date": 1485977708, "answer_id": 41988180, "question_id": 41987802, "link": "https://stackoverflow.com/questions/41987802/how-to-find-the-key-of-a-hash-whose-value-has-the-most-elements/41988180#41988180", "title": "How to find the key of a hash whose value has the most elements", "body": "<p>I'm not sure if I understood your question correctly, but I'm assuming you have something like this:</p>\n\n<pre><code>my_hash = {1=&gt;[2, 1, 3, 4], 2=&gt;[1, 2], 3=&gt;[1, 4, 6]}\n</code></pre>\n\n<p>If that's the case, you can get the key for the largest array like this:</p>\n\n<pre><code>my_hash.max_by{|k,v| v.count}.first\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user7055375"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "accepted_answer_id": 41988039, "answer_count": 3, "score": 4, "last_activity_date": 1486386380, "creation_date": 1485976493, "last_edit_date": 1485978263, "question_id": 41987802, "link": "https://stackoverflow.com/questions/41987802/how-to-find-the-key-of-a-hash-whose-value-has-the-most-elements", "title": "How to find the key of a hash whose value has the most elements", "body": "<p>I'm using Ruby 2.4.  </p>\n\n<p>I have a hash whose key is a number and whose value is an array of elements.  How do I find the key in the hash with the value that has the most elements?  I know that if my value were a single number I could do this:</p>\n\n<pre><code>my_hash.max_by { |k, v| v }\n</code></pre>\n\n<p>But since the value is an array, I'm not sure how to tell the above to use the number of elements in the array as what should be maxed.</p>\n"}, {"tags": ["ruby", "bash", "shell", "quoting"], "answers": [{"tags": [], "owner": {"reputation": 68617, "user_id": 3776858, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/juunm.png?s=128&g=1", "display_name": "Cyrus", "link": "https://stackoverflow.com/users/3776858/cyrus"}, "is_accepted": false, "score": 3, "last_activity_date": 1485976550, "creation_date": 1485976550, "answer_id": 41987820, "question_id": 41987758, "link": "https://stackoverflow.com/questions/41987758/capturing-output-with-newline-characters-from-ruby-stdout-in-bash-script/41987820#41987820", "title": "Capturing output with newline characters from ruby stdout in bash script", "body": "<p>I suggest to use double quotes:</p>\n\n<pre><code>echo \"$output\"\n</code></pre>\n"}], "owner": {"reputation": 133, "user_id": 1453428, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d5659982b3489a7eefa25724a6643598?s=128&d=identicon&r=PG", "display_name": "user1453428", "link": "https://stackoverflow.com/users/1453428/user1453428"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 158, "favorite_count": 0, "closed_date": 1485980802, "answer_count": 1, "score": 0, "last_activity_date": 1485976550, "creation_date": 1485976328, "last_edit_date": 1485976414, "question_id": 41987758, "link": "https://stackoverflow.com/questions/41987758/capturing-output-with-newline-characters-from-ruby-stdout-in-bash-script", "closed_reason": "Duplicate", "title": "Capturing output with newline characters from ruby stdout in bash script", "body": "<pre><code>#!/usr/bin/env bash\n\noutput=$(ruby &lt;&lt;-EORUBY\n  5.times { puts \"foo\" }\nEORUBY\n)\n\necho $output\n</code></pre>\n\n<p>In the example from above I get:</p>\n\n<pre><code>foo foo foo foo foo\n</code></pre>\n\n<p>How to prevent from trimming off newline character after each foo?\nBasically, I would like to get:</p>\n\n<pre><code>foo\nfoo\nfoo\nfoo\nfoo\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "encryption"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1485976196, "post_id": 41987668, "comment_id": 71153012, "body": "What does your Ruby code look like?"}, {"owner": {"reputation": 31, "user_id": 7470350, "user_type": "registered", "profile_image": "https://graph.facebook.com/1291572424198239/picture?type=large", "display_name": "Diego Cadena", "link": "https://stackoverflow.com/users/7470350/diego-cadena"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1485976732, "post_id": 41987668, "comment_id": 71153302, "body": "Sorry i forget it."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1485977260, "post_id": 41987668, "comment_id": 71153590, "body": "My immediate suspicion is that <code>der_to_pem</code> function. Does the output of that verify with the <code>openssl</code> tool? It&#39;s easy to get these things ever so slightly wrong."}, {"owner": {"reputation": 31, "user_id": 7470350, "user_type": "registered", "profile_image": "https://graph.facebook.com/1291572424198239/picture?type=large", "display_name": "Diego Cadena", "link": "https://stackoverflow.com/users/7470350/diego-cadena"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1485977791, "post_id": 41987668, "comment_id": 71153889, "body": "der_to_pem function just take the binary string of file.key decode on base64, box function adds the begin and end tags, do u want see the string before call openssl tool?"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1485978019, "post_id": 41987668, "comment_id": 71154010, "body": "I&#39;m just curious if that validates properly. You&#39;ll need to be sure each step you have here produces the correct output."}, {"owner": {"reputation": 31, "user_id": 7470350, "user_type": "registered", "profile_image": "https://graph.facebook.com/1291572424198239/picture?type=large", "display_name": "Diego Cadena", "link": "https://stackoverflow.com/users/7470350/diego-cadena"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1485978854, "post_id": 41987668, "comment_id": 71154432, "body": "ohh ok, ahm, how can I know the correct outputs on each step?"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1485979028, "post_id": 41987668, "comment_id": 71154546, "body": "Minimal approach is to just <code>puts</code> out what you&#39;re doing, maybe cut and paste that into individual files and test it. A more involved method might be to write out that string into a file using <code>File.open(&#39;test.key&#39;, &#39;w&#39;)</code> and do it formally in Ruby if you&#39;re feeling up to the task."}, {"owner": {"reputation": 31, "user_id": 7470350, "user_type": "registered", "profile_image": "https://graph.facebook.com/1291572424198239/picture?type=large", "display_name": "Diego Cadena", "link": "https://stackoverflow.com/users/7470350/diego-cadena"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1485979727, "post_id": 41987668, "comment_id": 71154918, "body": "ok, let&#39;s me do that. ty"}, {"owner": {"reputation": 31, "user_id": 7470350, "user_type": "registered", "profile_image": "https://graph.facebook.com/1291572424198239/picture?type=large", "display_name": "Diego Cadena", "link": "https://stackoverflow.com/users/7470350/diego-cadena"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1485983091, "post_id": 41987668, "comment_id": 71156790, "body": "ok, there are the outputs for each function."}], "owner": {"reputation": 31, "user_id": 7470350, "user_type": "registered", "profile_image": "https://graph.facebook.com/1291572424198239/picture?type=large", "display_name": "Diego Cadena", "link": "https://stackoverflow.com/users/7470350/diego-cadena"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 193, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1485982932, "creation_date": 1485976021, "last_edit_date": 1495540388, "question_id": 41987668, "link": "https://stackoverflow.com/questions/41987668/rails-decrypt-pkcs8", "title": "RAILS - Decrypt PKCS8", "body": "<p>How can I do this on RoR but getting only pem string.</p>\n\n<pre><code>openssl pkcs8 -inform DER -in file.key -passin pass:xxxxxxxx &gt;private_key.pem\n</code></pre>\n\n<p>I alredy try this solution: <a href=\"https://stackoverflow.com/questions/4753184/load-pkcs8-binary-key-into-ruby\">Load PKCS#8 binary key into Ruby</a></p>\n\n<p>But RSA.new returns me <strong>Neither PUB key nor PRIV key: nested asn1 error</strong></p>\n\n<p>The Ruby Code:</p>\n\n<pre><code>def get_pem(key_file, passphrase)\n pem = der_to_pem('PRIVATE KEY', File.read(key_file))\n key = OpenSSL::PKey::RSA.new(pem, passphrase)\nend\n\ndef box(tag, lines)\n  lines.unshift \"-----BEGIN #{tag}-----\"\n  lines.push \"-----END #{tag}-----\"\n  lines.join(\"\\n\")\nend\n\ndef der_to_pem(tag, der)\n  box tag, Base64.strict_encode64(der).scan(/.{1,64}/)\nend\n</code></pre>\n\n<p>Here the outputs on each function before call openssl tool:</p>\n\n<p>Function: der_to_pem\ntag: PRIVATE KEY\nder:</p>\n\n<pre><code>0\\x82\\u0002\\xC60@\\u0006\\t*\\x86H\\x86\\xF7\\r\\u0001\\u0005\\r030\\e\\u0006\\t*\\x86H\\x86\\xF7\\r\\u0001\\u0005\\f0\\u000E\\u0004\\b\\u0002\\u0001\\u0000\\u0002\\x81\\x81\\u0000\\xA4\\u0002\\u0002\\u0004\\u00000\\u0014\\u0006\\b*\\x86H\\x86\\xF7\\r\\u0003\\a\\u0004\\b0\\x82\\u0002v\\u0002\\u0001\\u00000\\u0004\\x82\\u0002\\x80\\xFE[J\\x92\\xED\u02fa\\xA5u*V\\xBD\\xF10\\v\u07dd\\xF4\\xEF\\x99\\xD63&lt;x\u05c7\\x82\\u0001\u3676\\xB7\\xAE\\x88J\\u001C\\xCFi\\n\\xCD\\xCE?*\\xCBPD\\r\\xAA+G\\xFB\\u00180~2&lt;/\\x9E\\x8C\\x87\\xE6?\ua2f9@\\xB1\\xB0\\u0590H\\xF2\\xDC\\xF5F$\\xA4\\xC3\\xF9\u4cf9\\u007F{*\\xE0\\\"\\x9C\\x82\\x82\\f)T\\u001C\\x84\\xE7\\xEFQl\\xC5\\xCF^\\x91\\xC65\\x88\\x92\\f\\u0019n\\xC7y\\xB4|\\xA3`\\xC0\\x8C\\xC1\\x96S7Nf\\xC5\\xD0\\r\\xFA\\xBFG\\u0015\\xB1\\x81\\xF5p%\\u0012T2\\x95\\xFE2Z\\xD7\\xED\\xE12\\u0001\\a\\xACN\\xA6#\\xBE\\x94\\xA1\\x97'&lt;\\x9C\\xB2\u04beI\\xF1io\\xBF\\xD1\\xE0\\xB6\\u001A\\u0010o\\u0015\\xEB'F~\\xAC\\xC3eG\\xBF\\xF2\\x84\\x88\\xD9\\u001C\\u000E\\xED\\u0013s\\x91jTnU\\u0379[\\x9C?\\xB3\u072e\\xD4\\u0016n\\xAE?\\xD0\\u0001\\xB0\\u0016)SMd\\xF2\\u0002q\\xBB\\xC5;\\x83\\u0019+\\x90\\u0018\\u007F\u0733\\xA4\\xC4\\u001Cs\\xFA\\u0013\\xA1\\xA3;d\\ekUT\\x98/wd\\u001E\\x9Er\\xD4\\u0002\\xE6\\xEBB'$\\u0014\\xBF\\b\\xF3\\xDC\\xCFe,;\\x97\\x9C\u04d2\\xC1\\u0000\\x9F\\xFDu#\\xA4\\u007F\\r\\u0016D 1\\xEA\\f^\\xD0\u0171\\r'\u071d\\xDF\\xF7\\xCE\\xCE+{\\x96^\u044c\\b_\\u0012\\xDC\\xD8x9}\\u0005Rq\\xB9\\xCC\\xFE\\xFEvd\\xB7\\u00108\\xC8\\xE1\\xE5\\xD4\\xC4i\\x9D\\xDA(\\u0005[\\xC0_t\\xF5\\e\\u0018\\xBB\\u001D\\xEC\\xAE\\xC7\\xE8\\x8A(\\x90w\\xCF\\xFEcl[\\xC2\\a3\\xB2 ~^\\xC4\\u001D\\u000F\\xACl\\u0011M\\xE4\\xA1\\xF2Y\\u0004o,\\xAEl\\xC1\\u000F$\\u0013qSc\\x99\\u001A\\xD2$|\\xBC\\xAB\\x90\\xE7\\xF0\\xF7f\\xDF\u023f\\u0016;lA_\\x85\\xCA\\u000F\\x9B#~d\\xF2\\x9C\\u0013*\\xA9=Jl\\x81t\\x85\\x96*l\\xA8(kt\\xD4\\u0019\\xB4\\xB8\\u0001U7\\xEC\\xE9.#;\\xA0\\u000F\\u0003\\x91\\u0004-\\n/P\\xDC\\xCC\\u001A\\xA5\\xDD\\xDA\\xE4\\u001F\\xF2\\\\\\xF1\u0297,E\\\"0\\x93\\xD7\\xD9\\xD1\\u001F\\x84G_C\\xCC\\xC23~\\xBDC\\xA7ab\\xBD\\xBC\\x83\u02b1\\xE3\\xE0\\x8F ^\\xC0\\xDF~\\xB5\\xBAT\\xE8\u078e\\xFE\\xC3\\xE5\\xCF\\xEB\\xAC\\xE3|n\\x8B\\u000E&amp;%\u028dqk\\xAD=\\x86\\u0005\\xD4\\xD9+\\xF4\\xA6\ue7a3\\u0000d!\\x95b\\xEDuY\\xAE\\xE5jG0\\x85\\xDE\\\"\\xADc\\xACK\\x833\\xA5lP#\\u0000=G\\xB3\\xCE\\xF6\\xC0[\u0519U\\xD5\\e:{\\u00100\\x9B{\\x95\\x9C@ \\xB3\\x86\\xC2@S\\u0015~p\u061b\\u0013\\xF48[\\xBE\\b\\e\\u007F\\xD7x)\\u0010\\xD7\\u001A\\xDE\\xF2\\x9E\\xA5X\\x8A\\u007FV\\xF3\\xEC\u07b1\\xC9\\acl\\u0004B\\x8F\\xD3c\\x80\\xE1\\u0016BI\\xED\\xAA}\n</code></pre>\n\n<p>der(base64): </p>\n\n<p>Function: box\nlines:</p>\n\n<pre><code>0\\x82\\u0002\\xC60@\\u0006\\t*\\x86H\\x86\\xF7\\r\\u0001\\u0005\\r030\\e\\u0006\\t*\\x86H\\x86\\xF7\\r\\u0001\\u0005\\f0\\u000E\\u0004\\b\\u0002\\u0001\\u0000\\u0002\\x81\\x81\\u0000\\xA4\\u0002\\u0002\\u0004\\u00000\\u0014\\u0006\\b*\\x86H\\x86\\xF7\\r\\u0003\\a\\u0004\\b0\\x82\\u0002v\\u0002\\u0001\\u00000\\u0004\\x82\\u0002\\x80\\xFE[J\\x92\\xED\u02fa\\xA5u*V\\xBD\\xF10\\v\u07dd\\xF4\\xEF\\x99\\xD63&lt;x\u05c7\\x82\\u0001\u3676\\xB7\\xAE\\x88J\\u001C\\xCFi\\n\\xCD\\xCE?*\\xCBPD\\r\\xAA+G\\xFB\\u00180~2&lt;/\\x9E\\x8C\\x87\\xE6?\ua2f9@\\xB1\\xB0\\u0590H\\xF2\\xDC\\xF5F$\\xA4\\xC3\\xF9\u4cf9\\u007F{*\\xE0\\\"\\x9C\\x82\\x82\\f)T\\u001C\\x84\\xE7\\xEFQl\\xC5\\xCF^\\x91\\xC65\\x88\\x92\\f\\u0019n\\xC7y\\xB4|\\xA3`\\xC0\\x8C\\xC1\\x96S7Nf\\xC5\\xD0\\r\\xFA\\xBFG\\u0015\\xB1\\x81\\xF5p%\\u0012T2\\x95\\xFE2Z\\xD7\\xED\\xE12\\u0001\\a\\xACN\\xA6#\\xBE\\x94\\xA1\\x97'&lt;\\x9C\\xB2\u04beI\\xF1io\\xBF\\xD1\\xE0\\xB6\\u001A\\u0010o\\u0015\\xEB'F~\\xAC\\xC3eG\\xBF\\xF2\\x84\\x88\\xD9\\u001C\\u000E\\xED\\u0013s\\x91jTnU\\u0379[\\x9C?\\xB3\u072e\\xD4\\u0016n\\xAE?\\xD0\\u0001\\xB0\\u0016)SMd\\xF2\\u0002q\\xBB\\xC5;\\x83\\u0019+\\x90\\u0018\\u007F\u0733\\xA4\\xC4\\u001Cs\\xFA\\u0013\\xA1\\xA3;d\\ekUT\\x98/wd\\u001E\\x9Er\\xD4\\u0002\\xE6\\xEBB'$\\u0014\\xBF\\b\\xF3\\xDC\\xCFe,;\\x97\\x9C\u04d2\\xC1\\u0000\\x9F\\xFDu#\\xA4\\u007F\\r\\u0016D 1\\xEA\\f^\\xD0\u0171\\r'\u071d\\xDF\\xF7\\xCE\\xCE+{\\x96^\u044c\\b_\\u0012\\xDC\\xD8x9}\\u0005Rq\\xB9\\xCC\\xFE\\xFEvd\\xB7\\u00108\\xC8\\xE1\\xE5\\xD4\\xC4i\\x9D\\xDA(\\u0005[\\xC0_t\\xF5\\e\\u0018\\xBB\\u001D\\xEC\\xAE\\xC7\\xE8\\x8A(\\x90w\\xCF\\xFEcl[\\xC2\\a3\\xB2 ~^\\xC4\\u001D\\u000F\\xACl\\u0011M\\xE4\\xA1\\xF2Y\\u0004o,\\xAEl\\xC1\\u000F$\\u0013qSc\\x99\\u001A\\xD2$|\\xBC\\xAB\\x90\\xE7\\xF0\\xF7f\\xDF\u023f\\u0016;lA_\\x85\\xCA\\u000F\\x9B#~d\\xF2\\x9C\\u0013*\\xA9=Jl\\x81t\\x85\\x96*l\\xA8(kt\\xD4\\u0019\\xB4\\xB8\\u0001U7\\xEC\\xE9.#;\\xA0\\u000F\\u0003\\x91\\u0004-\\n/P\\xDC\\xCC\\u001A\\xA5\\xDD\\xDA\\xE4\\u001F\\xF2\\\\\\xF1\u0297,E\\\"0\\x93\\xD7\\xD9\\xD1\\u001F\\x84G_C\\xCC\\xC23~\\xBDC\\xA7ab\\xBD\\xBC\\x83\u02b1\\xE3\\xE0\\x8F ^\\xC0\\xDF~\\xB5\\xBAT\\xE8\u078e\\xFE\\xC3\\xE5\\xCF\\xEB\\xAC\\xE3|n\\x8B\\u000E&amp;%\u028dqk\\xAD=\\x86\\u0005\\xD4\\xD9+\\xF4\\xA6\ue7a3\\u0000d!\\x95b\\xEDuY\\xAE\\xE5jG0\\x85\\xDE\\\"\\xADc\\xACK\\x833\\xA5lP#\\u0000=G\\xB3\\xCE\\xF6\\xC0[\u0519U\\xD5\\e:{\\u00100\\x9B{\\x95\\x9C@ \\xB3\\x86\\xC2@S\\u0015~p\u061b\\u0013\\xF48[\\xBE\\b\\e\\u007F\\xD7x)\\u0010\\xD7\\u001A\\xDE\\xF2\\x9E\\xA5X\\x8A\\u007FV\\xF3\\xEC\u07b1\\xC9\\acl\\u0004B\\x8F\\xD3c\\x80\\xE1\\u0016BI\\xED\\xAA}\n</code></pre>\n\n<blockquote>\n  <p>-----BEGIN PRIVATE KEY----- MIICxjBABgkqhkiG9w0BBQ0wMzAbBgkqhkiG9w0BBQwwDgQIAgEAAoGBAKQCAgQA\n  MBQGCCqGSIb3DQMHBAgwggJ2AgEAMASCAoD+W0qS7cu6pXUqVr3xMAvfnfTvmdYz\n  PHjXh4IB45m2t66IShzPaQrNzj8qy1BEDaorR/sYMH4yPC+ejIfmP+qLuUCxsNaQ\n  SPLc9UYkpMP55LO5f3sq4CKcgoIMKVQchOfvUWzFz16RxjWIkgwZbsd5tHyjYMCM\n  wZZTN05mxdAN+r9HFbGB9XAlElQylf4yWtft4TIBB6xOpiO+lKGXJzycstK+SfFp\n  b7/R4LYaEG8V6ydGfqzDZUe/8oSI2RwO7RNzkWpUblXNuVucP7PcrtQWbq4/0AGw\n  FilTTWTyAnG7xTuDGSuQGH/cs6TEHHP6E6GjO2Qba1VUmC93ZB6ectQC5utCJyQU\n  vwjz3M9lLDuXnNOSwQCf/XUjpH8NFkQgMeoMXtDFsQ0n3J3f987OK3uWXtGMCF8S\n  3Nh4OX0FUnG5zP7+dmS3EDjI4eXUxGmd2igFW8BfdPUbGLsd7K7H6IookHfP/mNs\n  W8IHM7Igfl7EHQ+sbBFN5KHyWQRvLK5swQ8kE3FTY5ka0iR8vKuQ5/D3Zt/IvxY7\n  bEFfhcoPmyN+ZPKcEyqpPUpsgXSFlipsqChrdNQZtLgBVTfs6S4jO6APA5EELQov\n  UNzMGqXd2uQf8lzxypcsRSIwk9fZ0R+ER19DzMIzfr1Dp2FivbyDyrHj4I8gXsDf\n  frW6VOjejv7D5c/rrON8bosOJiXKjXFrrT2GBdTZK/Sm7p6jAGQhlWLtdVmu5WpH\n  MIXeIq1jrEuDM6VsUCMAPUezzvbAW9SZVdUbOnsQMJt7lZxAILOGwkBTFX5w2JsT\n  9Dhbvggbf9d4KRDXGt7ynqVYin9W8+zesckHY2wEQo/TY4DhFkJJ7ap9\n  -----END PRIVATE KEY-----</p>\n</blockquote>\n"}, {"tags": ["ruby", "selenium", "knockout.js", "capybara"], "comments": [{"owner": {"reputation": 18005, "user_id": 2386774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dea7da142cb7e85d5d5a8576e2625431?s=128&d=identicon&r=PG", "display_name": "JeffC", "link": "https://stackoverflow.com/users/2386774/jeffc"}, "edited": false, "score": 1, "creation_date": 1485980602, "post_id": 41987518, "comment_id": 71155388, "body": "I&#39;m not sure what you are asking. The format of the 2nd <code>input</code> is not the same as the first one but you stated that you used the same Selenium code. Your posted code is referencing an id that doesn&#39;t exist in the 2nd case. Maybe post the code you are using against the 2nd <code>input</code> would help?"}, {"owner": {"reputation": 551, "user_id": 844645, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/95e55b1155026924f3f1263595e53ef8?s=128&d=identicon&r=PG", "display_name": "TangibleDream", "link": "https://stackoverflow.com/users/844645/tangibledream"}, "reply_to_user": {"reputation": 18005, "user_id": 2386774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dea7da142cb7e85d5d5a8576e2625431?s=128&d=identicon&r=PG", "display_name": "JeffC", "link": "https://stackoverflow.com/users/2386774/jeffc"}, "edited": false, "score": 0, "creation_date": 1485981379, "post_id": 41987518, "comment_id": 71155786, "body": "Good point JeffC,  the second find statement is not the same, it is written to catch the knockout input. I edited my question."}, {"owner": {"reputation": 18005, "user_id": 2386774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dea7da142cb7e85d5d5a8576e2625431?s=128&d=identicon&r=PG", "display_name": "JeffC", "link": "https://stackoverflow.com/users/2386774/jeffc"}, "edited": false, "score": 0, "creation_date": 1485982281, "post_id": 41987518, "comment_id": 71156296, "body": "I would start with this... open the dev console in Chrome and navigate to the page. Type <code>$x(&#39;input[@type=&quot;file&quot;]&#39;).length</code> in the console and make sure it returns 1. If it doesn&#39;t, it&#39;s likely that the first <code>input</code> on the page is in a hidden area and you will have to find a more specific locator."}, {"owner": {"reputation": 18005, "user_id": 2386774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dea7da142cb7e85d5d5a8576e2625431?s=128&d=identicon&r=PG", "display_name": "JeffC", "link": "https://stackoverflow.com/users/2386774/jeffc"}, "edited": false, "score": 0, "creation_date": 1485982394, "post_id": 41987518, "comment_id": 71156351, "body": "If there is only 1 <code>input</code> on the page, it&#39;s possible that you will have to wait for that element to be visible before interacting with it."}, {"owner": {"reputation": 18005, "user_id": 2386774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dea7da142cb7e85d5d5a8576e2625431?s=128&d=identicon&r=PG", "display_name": "JeffC", "link": "https://stackoverflow.com/users/2386774/jeffc"}, "edited": false, "score": 0, "creation_date": 1485985606, "post_id": 41987518, "comment_id": 71157947, "body": "OK. Then there&#39;s something wrong with the XPath. Is the element inside an iframe?"}, {"owner": {"reputation": 18005, "user_id": 2386774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dea7da142cb7e85d5d5a8576e2625431?s=128&d=identicon&r=PG", "display_name": "JeffC", "link": "https://stackoverflow.com/users/2386774/jeffc"}, "edited": false, "score": 0, "creation_date": 1485985620, "post_id": 41987518, "comment_id": 71157956, "body": "I link to the page would help a lot also."}, {"owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "edited": false, "score": 0, "creation_date": 1485986453, "post_id": 41987518, "comment_id": 71158387, "body": "<code>execute_script</code> take the text of the JS to run in page context, it doesn&#39;t take a JS file to load and run"}], "answers": [{"comments": [{"owner": {"reputation": 551, "user_id": 844645, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/95e55b1155026924f3f1263595e53ef8?s=128&d=identicon&r=PG", "display_name": "TangibleDream", "link": "https://stackoverflow.com/users/844645/tangibledream"}, "edited": false, "score": 0, "creation_date": 1485987203, "post_id": 41990570, "comment_id": 71158771, "body": "got back <code>Unable to find file field nil (Capybara::ElementNotFound)</code>"}, {"owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "reply_to_user": {"reputation": 551, "user_id": 844645, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/95e55b1155026924f3f1263595e53ef8?s=128&d=identicon&r=PG", "display_name": "TangibleDream", "link": "https://stackoverflow.com/users/844645/tangibledream"}, "edited": false, "score": 0, "creation_date": 1485987266, "post_id": 41990570, "comment_id": 71158807, "body": "@TangibleDream Then you&#39;re not on the page you think you are or you  don&#39;t have a file field on the page - check your <code>page.html</code> source"}, {"owner": {"reputation": 551, "user_id": 844645, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/95e55b1155026924f3f1263595e53ef8?s=128&d=identicon&r=PG", "display_name": "TangibleDream", "link": "https://stackoverflow.com/users/844645/tangibledream"}, "edited": false, "score": 0, "creation_date": 1485987476, "post_id": 41990570, "comment_id": 71158910, "body": "I found an abstract of my issue so you can see what I&#39;m talking about. Check the link <a href=\"http://jsfiddle.net/AlexZeitler/fPWFd/\" rel=\"nofollow noreferrer\">jsfiddle.net/AlexZeitler/fPWFd</a>"}, {"owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "reply_to_user": {"reputation": 551, "user_id": 844645, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/95e55b1155026924f3f1263595e53ef8?s=128&d=identicon&r=PG", "display_name": "TangibleDream", "link": "https://stackoverflow.com/users/844645/tangibledream"}, "edited": false, "score": 1, "creation_date": 1485987725, "post_id": 41990570, "comment_id": 71159027, "body": "@TangibleDream in that case the file input is inside an iframe - is it in an iframe in your case?"}, {"owner": {"reputation": 551, "user_id": 844645, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/95e55b1155026924f3f1263595e53ef8?s=128&d=identicon&r=PG", "display_name": "TangibleDream", "link": "https://stackoverflow.com/users/844645/tangibledream"}, "edited": false, "score": 0, "creation_date": 1485987762, "post_id": 41990570, "comment_id": 71159043, "body": "checked for that, no"}, {"owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "reply_to_user": {"reputation": 551, "user_id": 844645, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/95e55b1155026924f3f1263595e53ef8?s=128&d=identicon&r=PG", "display_name": "TangibleDream", "link": "https://stackoverflow.com/users/844645/tangibledream"}, "edited": false, "score": 1, "creation_date": 1485988287, "post_id": 41990570, "comment_id": 71159271, "body": "Then you&#39;re going to need to post your HTML (<code>page.html</code>) somewhere, because it works fine with the example you posted - <a href=\"https://gist.github.com/twalpole/144845468ec8090497f2496cae480bb3\" rel=\"nofollow noreferrer\">gist.github.com/twalpole/144845468ec8090497f2496cae480bb3</a> - If it&#39;s telling you it can&#39;t find the file input element, it&#39;s not on your page (or it&#39;s in an iframe which you&#39;d need to switch into like in the example page)"}, {"owner": {"reputation": 551, "user_id": 844645, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/95e55b1155026924f3f1263595e53ef8?s=128&d=identicon&r=PG", "display_name": "TangibleDream", "link": "https://stackoverflow.com/users/844645/tangibledream"}, "edited": false, "score": 0, "creation_date": 1485988293, "post_id": 41990570, "comment_id": 71159275, "body": "Arrgh you are right!,  got it to work with the new attach file!"}], "tags": [], "owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "is_accepted": true, "score": 1, "last_activity_date": 1485986299, "creation_date": 1485986299, "answer_id": 41990570, "question_id": 41987518, "link": "https://stackoverflow.com/questions/41987518/using-selenium-to-attach-a-file-to-a-file-field-made-by-knockout-js/41990570#41990570", "title": "using selenium to attach a file to a file field made by knockout.js", "body": "<p>Very often file input fields are hidden to allow for better styling.  There are many ways to hide the field and without seeing the CSS being applied it's impossible to give a 100% sure way to fix this, however if you're using the latest version of Capybara and there is only one file input on the page you can try</p>\n\n<pre><code>attach_file('c:\\file_dir\\file.txt', make_visible: true)\n</code></pre>\n\n<p>That will attempt to find the non-visible file element, modify the elements CSS to make it visible, attach the file, and then revert the CSS to what it was.  If there is more than one file input element on the page you can still use it by scoping to a visible area of the page that only contains one.</p>\n"}], "owner": {"reputation": 551, "user_id": 844645, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/95e55b1155026924f3f1263595e53ef8?s=128&d=identicon&r=PG", "display_name": "TangibleDream", "link": "https://stackoverflow.com/users/844645/tangibledream"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "accepted_answer_id": 41990570, "answer_count": 1, "score": 0, "last_activity_date": 1485987381, "creation_date": 1485975438, "last_edit_date": 1485987381, "question_id": 41987518, "link": "https://stackoverflow.com/questions/41987518/using-selenium-to-attach-a-file-to-a-file-field-made-by-knockout-js", "title": "using selenium to attach a file to a file field made by knockout.js", "body": "<p>Normally, attaching a file is relatively straight forward</p>\n\n<p>If I have an element that looks like this;</p>\n\n<pre><code>&lt;input \nid=\"DataFile_123\" \ntype=\"file\"&gt;\n</code></pre>\n\n<p>I can write this</p>\n\n<pre><code>find(:xpath, 'input[@id=\"Data_123\"]').send_keys('c:\\file_dir\\file.txt')\n</code></pre>\n\n<p>With knockout.js I'm seeing file types like so...</p>\n\n<pre><code>&lt;input \ntype=\"file\" \ndata-bind=\"value: fileName, \nevent: { change: handleFileChange }\" \naccept=\".csv\"&gt;\n</code></pre>\n\n<p>I found an abstract of the exact type of file from AlexZeitler  <a href=\"http://jsfiddle.net/AlexZeitler/fPWFd/\" rel=\"nofollow noreferrer\">http://jsfiddle.net/AlexZeitler/fPWFd/</a></p>\n\n<p>trying to find this input creates the same errors as below</p>\n\n<p>When I go after something like this with similar selenium code I'm blocked</p>\n\n<pre><code> find(:xpath, 'input[@type=\"file\"]').send_keys('c:\\file_dir\\file.txt')  #ElementNotFound\n</code></pre>\n\n<p>The syntactic sugar around the script to execute throws me.  </p>\n\n<pre><code>execute_script('handleFileChange.js') # returns handleFileChange is not defined\n</code></pre>\n\n<p>Has someone had good luck attaching files in knockout?  Let me know.</p>\n"}, {"tags": ["javascript", "ruby-on-rails", "ruby", "coffeescript"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1485974619, "post_id": 41987253, "comment_id": 71152166, "body": "What&#39;s the structure of that table? What files?"}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1485975759, "post_id": 41987253, "comment_id": 71152779, "body": "can you inspect the generated html and see what the value of <code>@message.document.url</code> is?"}, {"owner": {"reputation": 14671, "user_id": 2317490, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ypoen.png?s=128&g=1", "display_name": "dandavis", "link": "https://stackoverflow.com/users/2317490/dandavis"}, "edited": false, "score": 1, "creation_date": 1485977300, "post_id": 41987253, "comment_id": 71153611, "body": "the <code>download</code> attribute takes a filename, not just <code>true</code>"}], "answers": [{"tags": [], "owner": {"reputation": 3134, "user_id": 3884750, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/100003183948251/picture?type=large", "display_name": "Oleg  Sobchuk", "link": "https://stackoverflow.com/users/3884750/oleg-sobchuk"}, "is_accepted": true, "score": 0, "last_activity_date": 1485979069, "creation_date": 1485979069, "answer_id": 41988551, "question_id": 41987253, "link": "https://stackoverflow.com/questions/41987253/why-when-downloading-a-file-in-ruby-on-rails-this-one-is-downloaded-with-the-na/41988551#41988551", "title": "Why when downloading a file in Ruby \u200bon Rails this one is downloaded with the name TRUE?", "body": "<p><code>download</code> attribute get a name of needed file</p>\n\n<pre><code>= link_to @message.document.url, download: 'file_name'\n</code></pre>\n\n<p>BTW name you can get from your URL to file, if you need native name</p>\n\n<p>if you build link without <code>download</code> attribute, your file will open in browser by default</p>\n"}], "owner": {"reputation": 39, "user_id": 7502107, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ehPY2.jpg?s=128&g=1", "display_name": "Mike", "link": "https://stackoverflow.com/users/7502107/mike"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "accepted_answer_id": 41988551, "answer_count": 1, "score": -1, "last_activity_date": 1485993376, "creation_date": 1485974478, "last_edit_date": 1485993376, "question_id": 41987253, "link": "https://stackoverflow.com/questions/41987253/why-when-downloading-a-file-in-ruby-on-rails-this-one-is-downloaded-with-the-na", "title": "Why when downloading a file in Ruby \u200bon Rails this one is downloaded with the name TRUE?", "body": "<p>This is my code and ruby \u200b\u200bon rails download the files with the name \"TRUE\"</p>\n\n<pre><code>&lt;% if @message.document_file_name %&gt;\n    &lt;%= link_to @message.document.url, download:true do %&gt;\n    &lt;span class=\"fa fa-download fa-lg\"&gt;&lt;/span&gt;\n&lt;% end %&gt;\n&lt;% else %&gt;\n    No file.\n&lt;% end %&gt;\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "unicorn"], "answers": [{"tags": [], "owner": {"reputation": 2276, "user_id": 4164651, "user_type": "registered", "accept_rate": 65, "profile_image": "https://graph.facebook.com/100004012909097/picture?type=large", "display_name": "Edmund Lee", "link": "https://stackoverflow.com/users/4164651/edmund-lee"}, "is_accepted": false, "score": 0, "last_activity_date": 1485977655, "creation_date": 1485977655, "answer_id": 41988161, "question_id": 41987181, "link": "https://stackoverflow.com/questions/41987181/can-i-setup-a-different-number-of-workers-for-each-individual-server-using-unico/41988161#41988161", "title": "Can I setup a different number of workers for each individual server using Unicorn?", "body": "<p>Yes, set it in your environment variable.</p>\n\n<pre><code>worker_processes Integer(ENV[\"UNICORN_WORKERS\"] || 5)\n</code></pre>\n"}], "owner": {"reputation": 1022, "user_id": 4190203, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/ab42486428f113dcac28a2b3c289b4f2?s=128&d=identicon&r=PG&f=1", "display_name": "Peter Black", "link": "https://stackoverflow.com/users/4190203/peter-black"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 38, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1485977655, "creation_date": 1485974250, "question_id": 41987181, "link": "https://stackoverflow.com/questions/41987181/can-i-setup-a-different-number-of-workers-for-each-individual-server-using-unico", "title": "Can I setup a different number of workers for each individual server using Unicorn?", "body": "<p>We have 4 delayed job processes and 4 ruby processes running on one of our application servers. The other application servers have 8 workers. Currently we use the NGINX configuration file on that server to set the 4 ruby workers and Capistrano to manage the 4 delayed jobs. On our other application servers we have 8 workers setup through the NGINX configuration file. </p>\n\n<p>I am looking in to upgrading to Unicorn. The configuration file for Unicorn is in the application where as the NGINX configuration file is stored in Linux. Is there a way to set a different amount of worker processes per server?</p>\n"}, {"tags": ["javascript", "ruby-on-rails", "ruby", "ruby-on-rails-3"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1485974013, "post_id": 41987051, "comment_id": 71151836, "body": "What&#39;s on line 8 of your <code>application.html.haml</code>? Are you sure you&#39;re saving your templates as UTF-8?"}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1485976124, "post_id": 41987051, "comment_id": 71152971, "body": "to move the script source into your app, you&#39;d copy it to <code>app&#47;assets&#47;javascripts</code> and add a <code>require</code> line to <code>application.js</code>. See <a href=\"http://guides.rubyonrails.org/asset_pipeline.html#asset-organization\" rel=\"nofollow noreferrer\">http://guides.rubyonrails.org/asset_pipeline.html#asset-orga&zwnj;&#8203;nization</a>"}], "answers": [{"tags": [], "owner": {"reputation": 483, "user_id": 7474561, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc0cb51bd61ff4715e3bec92f79f5f46?s=128&d=identicon&r=PG&f=1", "display_name": "KcUS_unico", "link": "https://stackoverflow.com/users/7474561/kcus-unico"}, "is_accepted": false, "score": 0, "last_activity_date": 1485976190, "creation_date": 1485976190, "answer_id": 41987716, "question_id": 41987051, "link": "https://stackoverflow.com/questions/41987051/rails-error-when-including-javascript/41987716#41987716", "title": "Rails: error when including javascript", "body": "<p>This file reference belongs into your</p>\n\n<pre><code>layouts/application.rb\n</code></pre>\n\n<p>file or whatever layout you use for your view. Put it into the</p>\n\n<pre><code>&lt;header&gt;\n</code></pre>\n\n<p>section of that file and it will work fine. \nOtherwise take a read at </p>\n\n<p><a href=\"http://guides.rubyonrails.org/asset_pipeline.html\" rel=\"nofollow noreferrer\">TheAsset Pipeline of rails</a></p>\n"}, {"tags": [], "owner": {"reputation": 112, "user_id": 7609878, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-qNFg7VUnx1k/AAAAAAAAAAI/AAAAAAAAABY/w0PZSvG-rKE/photo.jpg?sz=128", "display_name": "Nils Rehwald", "link": "https://stackoverflow.com/users/7609878/nils-rehwald"}, "is_accepted": false, "score": 0, "last_activity_date": 1543935617, "creation_date": 1543935617, "answer_id": 53615729, "question_id": 41987051, "link": "https://stackoverflow.com/questions/41987051/rails-error-when-including-javascript/53615729#53615729", "title": "Rails: error when including javascript", "body": "<p>I stumbeled upon the same issue and solved it by converting the Javascript file to utf-8 Format.\nBefore:</p>\n\n<blockquote>\n  <p>$file -i sorttable.js<br>\n  sorttable.js: text/html; charset=iso-8859-1</p>\n</blockquote>\n\n<p>Conversion:</p>\n\n<blockquote>\n  <p>$ iconv -f iso-8859-1 -t utf-8 sorttable.js -o sort.js</p>\n</blockquote>\n\n<p>Remove old file, rename new file...</p>\n\n<p>Result:</p>\n\n<blockquote>\n  <p>$ file -i sorttable.js<br>\n  sorttable.js: text/html; charset=utf-8</p>\n</blockquote>\n\n<p>And no more errors in the Debugger Console.</p>\n"}], "owner": {"reputation": 11, "user_id": 6132535, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8ccdd48e16028a6964f64adaa641178?s=128&d=identicon&r=PG&f=1", "display_name": "Asa Romberger", "link": "https://stackoverflow.com/users/6132535/asa-romberger"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 157, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1543935617, "creation_date": 1485973813, "last_edit_date": 1485973973, "question_id": 41987051, "link": "https://stackoverflow.com/questions/41987051/rails-error-when-including-javascript", "title": "Rails: error when including javascript", "body": "<p>I have some JavaScript on another, non-Rails, site that works for browser side sort of tables. If I reference this in my Rails app from the external site, it works fine:</p>\n\n<pre><code>&lt;script type=\"text/javascript\" src=\"http://10.1.10.36/sort.js\"&gt;&lt;/script&gt;\n</code></pre>\n\n<p>If I put it in the assets/javascripts folder, I get an error:</p>\n\n<pre><code>Encoding::InvalidByteSequenceError in Taxes#index\nShowing /home/asa/Rails/home/app/views/layouts/application.html.erb where line #8 raised:\n\"\\xA3\" on UTF-8\n</code></pre>\n\n<p>Can you point me to what this error is, why I am getting it, how do I fix it?</p>\n\n<p>I did find a reference that says name it sort.js.erb and include the line:</p>\n\n<pre><code>&lt;%# encoding: utf-8 %&gt;\n</code></pre>\n\n<p>But that made no difference.</p>\n\n<p>Alternately, is there a way I can put this JavaScript on the site and use a fixed reference it? I have had no success in doing that.</p>\n"}, {"tags": ["html", "ruby", "hpricot"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1485978623, "post_id": 41986972, "comment_id": 71154307, "body": "Hpricot is deprecated, and the site says &quot;Hpricot has ended. Please consider an alternative like nokogiri.&quot;. Nokogiri implements some hpricot-isms, but in general we don&#39;t use them. Please read &quot;<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>&quot;. We need the minimum HTML that demonstrates the problem, along with the expected output."}], "answers": [{"tags": [], "owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "is_accepted": false, "score": 0, "last_activity_date": 1485980771, "last_edit_date": 1485980771, "creation_date": 1485979177, "answer_id": 41988583, "question_id": 41986972, "link": "https://stackoverflow.com/questions/41986972/how-to-move-a-node-using-hpricot/41988583#41988583", "title": "How to move a node using Hpricot", "body": "<p>I'd do it like this:</p>\n\n<pre><code>require 'nokogiri'\n\ndiv1 = doc.at('div.leftnav-btn').remove\ndoc.at('div.secondDiv').add_next_sibling(div1)\nputs doc.to_html\n\n# &gt;&gt; &lt;!DOCTYPE html PUBLIC \"-//W3C//DTD HTML 4.0 Transitional//EN\" \"http://www.w3.org/TR/REC-html40/loose.dtd\"&gt;\n# &gt;&gt; &lt;html&gt;\n# &gt;&gt;   &lt;body&gt;\n# &gt;&gt;     \n# &gt;&gt;     &lt;div class=\"secondDiv\"&gt;&lt;/div&gt;\n# &gt;&gt; &lt;div class=\"leftnav-btn\"&gt;foo&lt;/div&gt;\n# &gt;&gt;   &lt;/body&gt;\n# &gt;&gt; &lt;/html&gt;\n</code></pre>\n\n<p>The empty line after <code>&lt;body&gt;</code> is the result of the trailing TextNode that follows the <code>&lt;div&gt;</code> tag. It doesn't affect how XML works, nor does it affect the data, it's only cosmetic. </p>\n\n<pre><code>doc.at('.leftnav-btn').next.class # =&gt; Nokogiri::XML::Text\ndoc.at('.leftnav-btn').next.to_html # =&gt; \"\\n    \"\n</code></pre>\n\n<p>Notice that in the above selector I'm only using the class <code>.leftnav-btn</code> since it wasn't necessary to use the full <code>div.leftnav-btn</code>. Nokogiri, like Hpricot, uses CSS selectors, and also allows XPath, making for more flexibility. Nokogiri also supports <code>%</code> and <code>/</code> though we don't use them:</p>\n\n<pre><code>(doc % '.leftnav-btn').next.class # =&gt; Nokogiri::XML::Text\n(doc % '.leftnav-btn').next.to_html # =&gt; \"\\n    \"\n</code></pre>\n\n<p>Hpricot was deprecated a long time ago, and shouldn't be used. Nokogiri is the standard for HTML/XML parsing for Ruby. </p>\n\n<p>The Nokogiri tutorials cover the basics so spend some time with them. See the documentation for <a href=\"http://www.rubydoc.info/github/sparklemotion/nokogiri/Nokogiri/XML/Node\" rel=\"nofollow noreferrer\">Nokogiri::XML::Node</a> and <a href=\"http://www.rubydoc.info/github/sparklemotion/nokogiri/Nokogiri/XML/NodeSet\" rel=\"nofollow noreferrer\">Nokogiri::XML::NodeSet</a> for more information.</p>\n"}], "owner": {"reputation": 1011, "user_id": 5282616, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/bb253109f60df40f46cb8d80621074ce?s=128&d=identicon&r=PG&f=1", "display_name": "Dharmesh Rupani", "link": "https://stackoverflow.com/users/5282616/dharmesh-rupani"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 25, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1485980897, "creation_date": 1485973540, "last_edit_date": 1485980897, "question_id": 41986972, "link": "https://stackoverflow.com/questions/41986972/how-to-move-a-node-using-hpricot", "title": "How to move a node using Hpricot", "body": "<p>I am using Hpricot to select a <code>&lt;div&gt;</code> element from a web page:</p>\n\n<pre><code>doc = open(\"overview.html\") { |f| Hpricot(f) }\nputs doc.search(\"div[@class=leftnav-btn]\")\n</code></pre>\n\n<p>I want to copy that element and paste it to under other <code>&lt;div&gt;</code> element with <code>class=\"secondDiv\"</code>.</p>\n\n<p>How can I do this?</p>\n"}, {"tags": ["ruby", "attr-accessor"], "comments": [{"owner": {"reputation": 67463, "user_id": 203130, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/1RE8c.jpg?s=128&g=1", "display_name": "coreyward", "link": "https://stackoverflow.com/users/203130/coreyward"}, "edited": false, "score": 0, "creation_date": 1485975165, "post_id": 41986965, "comment_id": 71152443, "body": "See: Ruby Object Model."}], "answers": [{"comments": [{"owner": {"reputation": 1354, "user_id": 5273203, "user_type": "registered", "accept_rate": 86, "profile_image": "https://graph.facebook.com/10204825306498086/picture?type=large", "display_name": "Ashan Priyadarshana", "link": "https://stackoverflow.com/users/5273203/ashan-priyadarshana"}, "edited": false, "score": 0, "creation_date": 1485976592, "post_id": 41987605, "comment_id": 71153228, "body": "This is a type of explanation i was looking for. Just beginning to understand meta-programming concepts. Gained good knowledge. thanks!"}, {"owner": {"reputation": 775, "user_id": 1544440, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75da798fa2e162ff6eab82bc51a2d3a3?s=128&d=identicon&r=PG", "display_name": "Omar Bahareth", "link": "https://stackoverflow.com/users/1544440/omar-bahareth"}, "edited": false, "score": 0, "creation_date": 1485977281, "post_id": 41987605, "comment_id": 71153602, "body": "Thanks for enlightening us Chris, and sorry I wasn&#39;t of more help Ashan. I actually missed a very important part when reading your question, which makes my answer complete rubbish, I&#39;ll just delete it to avoid confusing other people."}], "tags": [], "owner": {"reputation": 56502, "user_id": 271475, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b00f41e5f2a69734051f2a78f4f3785?s=128&d=identicon&r=PG", "display_name": "Chris Heald", "link": "https://stackoverflow.com/users/271475/chris-heald"}, "is_accepted": true, "score": 7, "last_activity_date": 1485975786, "creation_date": 1485975786, "answer_id": 41987605, "question_id": 41986965, "link": "https://stackoverflow.com/questions/41986965/what-happens-when-attr-accessor-is-within-a-class-method/41987605#41987605", "title": "What happens when attr_accessor is within a class method?", "body": "<p>When in a class method, <code>self</code> is the class itself. Therefore, the following are equivalent in what they ultimately do:</p>\n\n<pre><code>class Test\n  def self.abc\n    # `self` in this context is Test.\n    # This sends the message `:attr_accessor, :john` to `Test`\n    attr_accessor :john\n  end\nend\n\nclass Test\n  # `self` in this context is Test.\n  # This sends the message `:attr_accessor, :john` to `Test`\n  attr_accessor :john\nend\n</code></pre>\n\n<p>However, as you noted, <code>Test::abc</code> isn't executed when the class is parsed, so <code>attr_accessor</code> isn't called, and the instance methods aren't added. It is perfectly valid to do this at runtime, and in fact, is the basis of much of the metaprogramming performed in Rails.</p>\n\n<p>Typically, if you expect to add accessors via a class method, you might call that class method after definition but still during class declaration:</p>\n\n<pre><code>class Test\n  def self.abc\n    attr_accessor :john\n  end\n\n  abc\nend\n</code></pre>\n\n<p>This will actually run, and properly declare the accessors on the class!</p>\n\n<p>As to your question:</p>\n\n<blockquote>\n  <p>How come a running of a class method dynamically add methods to already created objects?</p>\n</blockquote>\n\n<p>This is because instantiating a class doesn't instantiate a \"snapshot\" of the class at the time of instantiation - it creates an object which delegates much of its functionality (including discovery of the instance methods on it) to the class associated with it. Note that it is possible to define new methods <em>on an instance</em> which don't extend back to the class, too:</p>\n\n<pre><code>class Test\n  attr_accessor :foo\nend\n\nt1 = Test.new\nt2 = Test.new\n\nTest.send(:define_method, :bar) {}\nputs t1.respond_to? :foo  # =&gt; true\nputs t2.respond_to? :foo  # =&gt; true\n\nputs t1.respond_to? :bar  # =&gt; true\nputs t2.respond_to? :bar  # =&gt; true\n\nt1.define_singleton_method(:baz) {}\n\nputs t1.respond_to? :baz  # =&gt; true\nputs t2.respond_to? :baz  # =&gt; false\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 2, "last_activity_date": 1485988390, "last_edit_date": 1485988390, "creation_date": 1485980599, "answer_id": 41989023, "question_id": 41986965, "link": "https://stackoverflow.com/questions/41986965/what-happens-when-attr-accessor-is-within-a-class-method/41989023#41989023", "title": "What happens when attr_accessor is within a class method?", "body": "<p>Firstly, note that in place of</p>\n\n<pre><code>object = Test.new\nobject.class.instance_methods(false)\n</code></pre>\n\n<p>you could simply write</p>\n\n<pre><code>Test.instance_methods(false)\n</code></pre>\n\n<p>so let's simplify:</p>\n\n<pre><code>puts \"before calling class method abc:  #{Test.instance_methods(false)}\"\n  # (prints) []\nTest.abc\nputs \"after calling class method abc:   #{Test.instance_methods(false)}\"\n  # (prints) [:John, :John=]\n</code></pre>\n\n<p>There's a short explanation of this behaviour, but also a longer one.</p>\n\n<p><strong>Short Explanation</strong></p>\n\n<pre><code>Test.method(:attr_accessor)\n  #=&gt; #&lt;Method: Class(Module)#attr_accessor&gt; \n</code></pre>\n\n<p>This return value, together with the fact that</p>\n\n<pre><code>Test.class #=&gt; Class\n</code></pre>\n\n<p>tells us that <code>attr_accessor</code> is an instance_method of <code>Class</code>, and therefore a method of <code>Test</code>. Let's confirm.</p>\n\n<pre><code>Class.instance_methods.include?(:attr_accessor)\n  #=&gt; false\n</code></pre>\n\n<p>Whoops! (You were expecting <code>=&gt; true</code>?). That can only mean that <code>attr_accessor</code> is a protected or private instance method:</p>\n\n<pre><code>Class.protected_instance_methods.include?(:attr_accessor)\n  #=&gt; false\n\nClass.private_instance_methods.include?(:attr_accessor)\n  #=&gt; true\n</code></pre>\n\n<p>Therefore</p>\n\n<pre><code>Class.private_instance_methods.include?(:attr_accessor)\n  #=&gt; true\n</code></pre>\n\n<p>So <code>attr_accessor</code> is simply a private instance method of <code>Test</code>'s class, <code>Class</code>, making it a private method of <code>Test</code>. The expression (from earlier)</p>\n\n<pre><code>Test.method(:attr_accessor)\n  #=&gt; #&lt;Method: Class(Module)#attr_accessor&gt; \n</code></pre>\n\n<p>also tells us that <code>attr_accessor</code> is defined in <code>Class</code>'s superclass <code>Module</code>.</p>\n\n<pre><code>Class.superclass\n  #=&gt; Module\nClass.ancestors\n  #=&gt; [Class, Module, Object, Kernel, BasicObject] \nClass.instance_method(:attr_accessor).owner\n  #=&gt; Module \nTest.method(:attr_accessor).owner\n  #=&gt; Module \n</code></pre>\n\n<p><strong>Longer Explanation</strong></p>\n\n<p>The method <a href=\"http://ruby-doc.org/core-2.3.0/Module.html#method-i-attr_accessor\" rel=\"nofollow noreferrer\">Module#attr_accessor</a> can be made available to the class <code>Test</code> in one of two ways. This is the essence of Ruby's <em>object model</em>. (I have sidestepped the place of singleton class methods.)</p>\n\n<p><em>1. Test inherits the method from its superclass</em></p>\n\n<pre><code>Test.superclass\n  #=&gt; Object\nTest.ancestors\n  #=&gt; [Test, Object, Kernel, BasicObject]\n</code></pre>\n\n<p>Let's see.</p>\n\n<pre><code>Object.method(:attr_accessor)\n  #=&gt; #&lt;Method: Class(Module)#attr_accessor&gt; \nObject.public_methods.include?(:attr_accessor)\n  #=&gt; false \nObject.private_methods.include?(:attr_accessor)\n  #=&gt; true\n</code></pre>\n\n<p><em>2. <code>attr_accessor</code> is an instance method of <code>Test</code>'s class</em></p>\n\n<pre><code>Test.class\n  #=&gt; Class\n\nClass.private_instance_methods.include?(:attr_accessor)\n  #=&gt; true\n</code></pre>\n\n<p>So <code>Test</code> both inherits <code>attr_accessor</code> from its superclass and has it available as an instance method of its class. This duality is often explained with a diagram such as <a href=\"https://andersonleiteblog.files.wordpress.com/2010/02/model.png\" rel=\"nofollow noreferrer\">this one</a>.</p>\n\n<p>Ruby first checks <code>Test</code>'s class, <code>Class</code>, for the instance method <code>attr_accessor</code>. where it will find it. (Had she not found it there she'd then look for the method (not instance method) in the superclass.)</p>\n"}], "owner": {"reputation": 1354, "user_id": 5273203, "user_type": "registered", "accept_rate": 86, "profile_image": "https://graph.facebook.com/10204825306498086/picture?type=large", "display_name": "Ashan Priyadarshana", "link": "https://stackoverflow.com/users/5273203/ashan-priyadarshana"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 822, "favorite_count": 1, "accepted_answer_id": 41987605, "answer_count": 2, "score": 5, "last_activity_date": 1485988390, "creation_date": 1485973482, "last_edit_date": 1485974999, "question_id": 41986965, "link": "https://stackoverflow.com/questions/41986965/what-happens-when-attr-accessor-is-within-a-class-method", "title": "What happens when attr_accessor is within a class method?", "body": "<p>So this came up to my mind and wonder what happens when some thing below is done.</p>\n\n<pre><code> class Test \n   def self.abc\n     attr_accessor :John \n   end\n end\n\n object = Test.new\n puts \"before calling class method abc:  #{object.class.instance_methods(false)}\"\n Test.abc\n puts \"after calling class method abc:   #{object.class.instance_methods(false)}\"\n</code></pre>\n\n<p>Here what I checked was, do the getter and setter methods get created in this way. And if so, are those instance methods or class methods. First I create a new object and then I view what are the instance methods of that object. After that in next line I run the <code>class</code> method <code>abc</code> and then again, I check for instance methods of <code>object</code>. At that time only I can see the two methods <code>John</code> and <code>John=</code>. How does this happen ? How come a running of a class method dynamically add methods to already created objects?. Can somebody please explain me this.</p>\n\n<p>The output of the code was:</p>\n\n<pre><code>before calling class method abc:  []\nafter calling class method abc:   [:John, :John=]\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec", "nokogiri"], "comments": [{"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1485976690, "post_id": 41986945, "comment_id": 71153281, "body": "see <a href=\"http://stackoverflow.com/questions/24592436/nokogiri-with-rspec\">stackoverflow.com/questions/24592436/nokogiri-with-rspec</a> - you can use nokogiri methods on <code>Nokogiri::HTML(rendered)</code> assuming <code>rendered</code> is a html string."}, {"owner": {"reputation": 18203, "user_id": 100731, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/056c32203f8017f075ac060069823b66?s=128&d=identicon&r=PG", "display_name": "phoet", "link": "https://stackoverflow.com/users/100731/phoet"}, "edited": false, "score": 0, "creation_date": 1485978385, "post_id": 41986945, "comment_id": 71154178, "body": "or use capybara for testing <a href=\"https://github.com/teamcapybara/capybara\" rel=\"nofollow noreferrer\">github.com/teamcapybara/capybara</a>"}], "answers": [{"tags": [], "owner": {"reputation": 3, "user_id": 8624411, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18fe96120e20b33c76a8e2c3816ef69?s=128&d=identicon&r=PG&f=1", "display_name": "shiquann", "link": "https://stackoverflow.com/users/8624411/shiquann"}, "is_accepted": false, "score": 0, "last_activity_date": 1573970636, "last_edit_date": 1573970636, "creation_date": 1554316995, "answer_id": 55502201, "question_id": 41986945, "link": "https://stackoverflow.com/questions/41986945/css-selectors-in-rendered-view/55502201#55502201", "title": "CSS selectors in rendered view", "body": "<p>Use the Capybara gem and then you can use CSS selectors:</p>\n\n<pre><code>expect(rendered).to have_selector('select option', :text =&gt; \"--- select ---\")\n</code></pre>\n"}], "owner": {"reputation": 1907, "user_id": 1902570, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/110a426ea70c739aa926efef57ab8428?s=128&d=identicon&r=PG", "display_name": "Leo", "link": "https://stackoverflow.com/users/1902570/leo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 234, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1573970636, "creation_date": 1485973417, "last_edit_date": 1486416223, "question_id": 41986945, "link": "https://stackoverflow.com/questions/41986945/css-selectors-in-rendered-view", "title": "CSS selectors in rendered view", "body": "<p>I would like to have access to CSS selectors in HTML rendered by RSpec. While testing my views, what I'm usually doing is something like this:</p>\n\n<pre><code>render partial: 'example_partial.html.erb'\nrendered.should include(\"&lt;option value=\\\"cool_option\\\" selected=\\\"selected\\\"&gt;\")\n</code></pre>\n\n<p>to check if the correct option is selected in the input select. Is there a way to do it more Nokgiri-like? Some RSpec trick to handle checking if there is an element rendered?</p>\n\n<pre><code>  expect(rendered.css('input option:selected').value).to eg('cool_option')\n</code></pre>\n"}, {"tags": ["ruby", "syntax"], "comments": [{"owner": {"reputation": 3054, "user_id": 900483, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6524ea17b66984c72c8d7e262960a137?s=128&d=identicon&r=PG", "display_name": "Nils Landt", "link": "https://stackoverflow.com/users/900483/nils-landt"}, "edited": false, "score": 0, "creation_date": 1485972771, "post_id": 41986641, "comment_id": 71151166, "body": "What makes you think parenthese are required in this case?"}, {"owner": {"reputation": 473, "user_id": 5163373, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/3dVWt.png?s=128&g=1", "display_name": "jStaff", "link": "https://stackoverflow.com/users/5163373/jstaff"}, "reply_to_user": {"reputation": 3054, "user_id": 900483, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6524ea17b66984c72c8d7e262960a137?s=128&d=identicon&r=PG", "display_name": "Nils Landt", "link": "https://stackoverflow.com/users/900483/nils-landt"}, "edited": false, "score": 0, "creation_date": 1485973034, "post_id": 41986641, "comment_id": 71151299, "body": "The interpreter errors out if I don&#39;t have parentheses in the ones marked as incorrect."}, {"owner": {"reputation": 3054, "user_id": 900483, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6524ea17b66984c72c8d7e262960a137?s=128&d=identicon&r=PG", "display_name": "Nils Landt", "link": "https://stackoverflow.com/users/900483/nils-landt"}, "edited": false, "score": 0, "creation_date": 1485974051, "post_id": 41986641, "comment_id": 71151858, "body": "On what Ruby version is that?"}, {"owner": {"reputation": 473, "user_id": 5163373, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/3dVWt.png?s=128&g=1", "display_name": "jStaff", "link": "https://stackoverflow.com/users/5163373/jstaff"}, "reply_to_user": {"reputation": 3054, "user_id": 900483, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6524ea17b66984c72c8d7e262960a137?s=128&d=identicon&r=PG", "display_name": "Nils Landt", "link": "https://stackoverflow.com/users/900483/nils-landt"}, "edited": false, "score": 0, "creation_date": 1485975085, "post_id": 41986641, "comment_id": 71152403, "body": "ruby 2.3.0p0 (2015-12-25 revision 53290) [x86_64-linux]"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1485979754, "post_id": 41986641, "comment_id": 71154931, "body": "While parenthesis are optional with methods, their use allow you to tell the interpreter exactly what you want it to do and when. I recommend their use until you are very familiar with Ruby&#39;s parsing."}, {"owner": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "edited": false, "score": 1, "creation_date": 1485980725, "post_id": 41986641, "comment_id": 71155445, "body": "Can&#39;t reproduce. Only the line starting with <code>not[</code> gives me a syntax error. That&#39;s not an operator precidence problem, it simply appears that <code>not[</code> cannot be parsed by Ruby. <code>not(</code> works while <code>not{</code> fails as well."}], "owner": {"reputation": 473, "user_id": 5163373, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/3dVWt.png?s=128&g=1", "display_name": "jStaff", "link": "https://stackoverflow.com/users/5163373/jstaff"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 33, "favorite_count": 0, "closed_date": 1485979625, "answer_count": 0, "score": 0, "last_activity_date": 1485972994, "creation_date": 1485972339, "last_edit_date": 1485972994, "question_id": 41986641, "link": "https://stackoverflow.com/questions/41986641/ruby-statements-whitespace-versus-parentheses", "closed_reason": "Duplicate", "title": "Ruby statements, whitespace versus parentheses", "body": "<h2>Why are parentheses required in this?</h2>\n\n<p>I am looking for a purely syntax related reasoning. This is not a question about what should or not be in ruby for beauty or whatever.</p>\n\n<pre><code>not(['a','u','i','o','e'].include? s[0].downcase)\n#this third line will error!\nnot ['a','u','i','o','e'].include? s[0].downcase\n\n#you can also incorrectly represent this as\nnot['a','u','i','o','e'].include?(s[0].downcase)\n#but correctly as this with the higher precedence !\n!['a','u','i','o','e'].include?(s[0].downcase)\n#but then again incorrectly as\n!['a','u','i','o','e'].include? s[0].downcase\n</code></pre>\n\n<p>In general I think the whitespaces with (), {}, ;, \\n, and end are oddly difficult to get correct in ruby. It has something to do with precendence. Can someone show me a mapping of where and not these invisible () are when executing the above code.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3", "ruby-on-rails-4", "devise"], "answers": [{"comments": [{"owner": {"reputation": 311, "user_id": 6487334, "user_type": "registered", "accept_rate": 43, "profile_image": "https://lh5.googleusercontent.com/-mR_kAM02zew/AAAAAAAAAAI/AAAAAAAAAB4/JxJCA3D5shE/photo.jpg?sz=128", "display_name": "Alaap Dhall", "link": "https://stackoverflow.com/users/6487334/alaap-dhall"}, "edited": false, "score": 0, "creation_date": 1485972844, "post_id": 41986678, "comment_id": 71151207, "body": "This give me the error of could not find mapping for devise &#39;/&#39;"}, {"owner": {"reputation": 941, "user_id": 5809075, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-G2XZLxcyRfE/AAAAAAAAAAI/AAAAAAAAAGI/udCZbAA3tkk/photo.jpg?sz=128", "display_name": "Hizqeel", "link": "https://stackoverflow.com/users/5809075/hizqeel"}, "reply_to_user": {"reputation": 311, "user_id": 6487334, "user_type": "registered", "accept_rate": 43, "profile_image": "https://lh5.googleusercontent.com/-mR_kAM02zew/AAAAAAAAAAI/AAAAAAAAAB4/JxJCA3D5shE/photo.jpg?sz=128", "display_name": "Alaap Dhall", "link": "https://stackoverflow.com/users/6487334/alaap-dhall"}, "edited": false, "score": 0, "creation_date": 1485973960, "post_id": 41986678, "comment_id": 71151799, "body": "@AlaapDhall Updated my answer hope it helps now If not then let me know"}, {"owner": {"reputation": 311, "user_id": 6487334, "user_type": "registered", "accept_rate": 43, "profile_image": "https://lh5.googleusercontent.com/-mR_kAM02zew/AAAAAAAAAAI/AAAAAAAAAB4/JxJCA3D5shE/photo.jpg?sz=128", "display_name": "Alaap Dhall", "link": "https://stackoverflow.com/users/6487334/alaap-dhall"}, "edited": false, "score": 0, "creation_date": 1485974334, "post_id": 41986678, "comment_id": 71152012, "body": "This is the error message I got .. and i have everything in scope although m not sure with that bypassing the router thing"}, {"owner": {"reputation": 311, "user_id": 6487334, "user_type": "registered", "accept_rate": 43, "profile_image": "https://lh5.googleusercontent.com/-mR_kAM02zew/AAAAAAAAAAI/AAAAAAAAAB4/JxJCA3D5shE/photo.jpg?sz=128", "display_name": "Alaap Dhall", "link": "https://stackoverflow.com/users/6487334/alaap-dhall"}, "edited": false, "score": 0, "creation_date": 1485975219, "post_id": 41986678, "comment_id": 71152472, "body": "ok so now it says that cannot find root_path in my controller did you mean fint_path?"}, {"owner": {"reputation": 941, "user_id": 5809075, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-G2XZLxcyRfE/AAAAAAAAAAI/AAAAAAAAAGI/udCZbAA3tkk/photo.jpg?sz=128", "display_name": "Hizqeel", "link": "https://stackoverflow.com/users/5809075/hizqeel"}, "reply_to_user": {"reputation": 311, "user_id": 6487334, "user_type": "registered", "accept_rate": 43, "profile_image": "https://lh5.googleusercontent.com/-mR_kAM02zew/AAAAAAAAAAI/AAAAAAAAAB4/JxJCA3D5shE/photo.jpg?sz=128", "display_name": "Alaap Dhall", "link": "https://stackoverflow.com/users/6487334/alaap-dhall"}, "edited": false, "score": 0, "creation_date": 1485977483, "post_id": 41986678, "comment_id": 71153714, "body": "@AlaapDhall Sorry its taking to long! If you are using Devise 4 than  Try my updated answer this will probably solve the issue remove <code>devise_scope</code> from routes and try the application controller solution"}, {"owner": {"reputation": 941, "user_id": 5809075, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-G2XZLxcyRfE/AAAAAAAAAAI/AAAAAAAAAGI/udCZbAA3tkk/photo.jpg?sz=128", "display_name": "Hizqeel", "link": "https://stackoverflow.com/users/5809075/hizqeel"}, "reply_to_user": {"reputation": 311, "user_id": 6487334, "user_type": "registered", "accept_rate": 43, "profile_image": "https://lh5.googleusercontent.com/-mR_kAM02zew/AAAAAAAAAAI/AAAAAAAAAB4/JxJCA3D5shE/photo.jpg?sz=128", "display_name": "Alaap Dhall", "link": "https://stackoverflow.com/users/6487334/alaap-dhall"}, "edited": false, "score": 0, "creation_date": 1485978512, "post_id": 41986678, "comment_id": 71154238, "body": "@AlaapDhall Have this solved your issue If yes than mark it as accepted so that this Question will be removed from Unsolved Questions. If not than let me know the issue."}, {"owner": {"reputation": 311, "user_id": 6487334, "user_type": "registered", "accept_rate": 43, "profile_image": "https://lh5.googleusercontent.com/-mR_kAM02zew/AAAAAAAAAAI/AAAAAAAAAB4/JxJCA3D5shE/photo.jpg?sz=128", "display_name": "Alaap Dhall", "link": "https://stackoverflow.com/users/6487334/alaap-dhall"}, "edited": false, "score": 1, "creation_date": 1486030684, "post_id": 41986678, "comment_id": 71175527, "body": "It didn;t work for me but may be it will for someone else.. so m making it acceptable. I figured another way by redirecting users from within cintroller instead of routes.  Thank you neway"}, {"owner": {"reputation": 941, "user_id": 5809075, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-G2XZLxcyRfE/AAAAAAAAAAI/AAAAAAAAAGI/udCZbAA3tkk/photo.jpg?sz=128", "display_name": "Hizqeel", "link": "https://stackoverflow.com/users/5809075/hizqeel"}, "reply_to_user": {"reputation": 311, "user_id": 6487334, "user_type": "registered", "accept_rate": 43, "profile_image": "https://lh5.googleusercontent.com/-mR_kAM02zew/AAAAAAAAAAI/AAAAAAAAAB4/JxJCA3D5shE/photo.jpg?sz=128", "display_name": "Alaap Dhall", "link": "https://stackoverflow.com/users/6487334/alaap-dhall"}, "edited": false, "score": 0, "creation_date": 1486031462, "post_id": 41986678, "comment_id": 71176074, "body": "I tested How to redirect that and than I have updated my answer as you can see how to redirect it from the controller rather than from routes Hope it helps other But it&#39;s working for me on rails 5 and rails 4 with devise 4.2"}], "tags": [], "owner": {"reputation": 941, "user_id": 5809075, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-G2XZLxcyRfE/AAAAAAAAAAI/AAAAAAAAAGI/udCZbAA3tkk/photo.jpg?sz=128", "display_name": "Hizqeel", "link": "https://stackoverflow.com/users/5809075/hizqeel"}, "is_accepted": true, "score": 2, "last_activity_date": 1485977674, "last_edit_date": 1485977674, "creation_date": 1485972456, "answer_id": 41986678, "question_id": 41986469, "link": "https://stackoverflow.com/questions/41986469/redirect-users-based-on-if-they-are-signed-in-or-not-in-rails/41986678#41986678", "title": "Redirect users based on if they are signed in or not in rails", "body": "<p><strike>You can do something like this in your application_controller.rb`:</p>\n\n<pre><code>devise_for :users\n\ndevise_scope :user do\n   authenticated :user do\n   root 'home#index', as: :authenticated_root\n  end\n\n  unauthenticated do\n   root 'devise/sessions#new', as: :unauthenticated_root\n  end\nend\n</code></pre>\n\n<p></strike>\n<strong>Update:</strong>  </p>\n\n<p>In your <code>application_controller.rb</code>:</p>\n\n<pre><code>before_action :authenticate_user!\n\ndef after_sign_in_path_for(resource_or_scope)\n # your_path\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 18593, "user_id": 4304188, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d5695b0e5c30d4464163e3f3412fe5f1?s=128&d=identicon&r=PG", "display_name": "Mihai Dinculescu", "link": "https://stackoverflow.com/users/4304188/mihai-dinculescu"}, "is_accepted": false, "score": 1, "last_activity_date": 1485972466, "creation_date": 1485972466, "answer_id": 41986681, "question_id": 41986469, "link": "https://stackoverflow.com/questions/41986469/redirect-users-based-on-if-they-are-signed-in-or-not-in-rails/41986681#41986681", "title": "Redirect users based on if they are signed in or not in rails", "body": "<p>You can do</p>\n\n<pre><code>Rails.application.routes.draw do   \n  devise_for :users\n\n  unauthenticated do\n    root to: 'home#index', as: 'unauthenticated'\n  end\n\n  authenticated :user do\n    root to: 'sessions#new', as: 'authenticated'\n  end\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 483, "user_id": 7474561, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc0cb51bd61ff4715e3bec92f79f5f46?s=128&d=identicon&r=PG&f=1", "display_name": "KcUS_unico", "link": "https://stackoverflow.com/users/7474561/kcus-unico"}, "is_accepted": false, "score": 1, "last_activity_date": 1485973737, "creation_date": 1485973737, "answer_id": 41987033, "question_id": 41986469, "link": "https://stackoverflow.com/questions/41986469/redirect-users-based-on-if-they-are-signed-in-or-not-in-rails/41987033#41987033", "title": "Redirect users based on if they are signed in or not in rails", "body": "<p>It's not very elegant but you can just edit your home#index controler</p>\n\n<p>def index\nif user_signed_in? \n ...your code\nelse\nredirect_to new_user_session_path\nend\nend</p>\n"}], "owner": {"reputation": 311, "user_id": 6487334, "user_type": "registered", "accept_rate": 43, "profile_image": "https://lh5.googleusercontent.com/-mR_kAM02zew/AAAAAAAAAAI/AAAAAAAAAB4/JxJCA3D5shE/photo.jpg?sz=128", "display_name": "Alaap Dhall", "link": "https://stackoverflow.com/users/6487334/alaap-dhall"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "accepted_answer_id": 41986678, "answer_count": 3, "score": 0, "last_activity_date": 1485977674, "creation_date": 1485971715, "question_id": 41986469, "link": "https://stackoverflow.com/questions/41986469/redirect-users-based-on-if-they-are-signed-in-or-not-in-rails", "title": "Redirect users based on if they are signed in or not in rails", "body": "<p>I want to set a root_path for my rails app where I want root to be devise/sessions#new if user is not signed in\nand home#index if user is signed in</p>\n\n<p>obviously i can't use user_signed_in? method in routes so how may I achieve it ?\nalso how can I make devise/sessions#new my root path ?</p>\n"}, {"tags": ["javascript", "ruby-on-rails", "ruby", "reactjs"], "answers": [{"tags": [], "owner": {"reputation": 2306, "user_id": 1741654, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/0401af2dd09da09b304326e4396d1d78?s=128&d=identicon&r=PG", "display_name": "rmosolgo", "link": "https://stackoverflow.com/users/1741654/rmosolgo"}, "is_accepted": true, "score": 2, "last_activity_date": 1485974038, "creation_date": 1485974038, "answer_id": 41987116, "question_id": 41986373, "link": "https://stackoverflow.com/questions/41986373/using-an-external-react-component-on-rails-application/41987116#41987116", "title": "Using an external React component on Rails application", "body": "<p>If you want to use Sprockets, you can get a pre-compiled version of rc-slider from unpkg: </p>\n\n<p><a href=\"https://unpkg.com/rc-slider@6.0.0/dist/rc-slider.js\" rel=\"nofollow noreferrer\">https://unpkg.com/rc-slider@6.0.0/dist/rc-slider.js</a></p>\n\n<p>Taking a look at the source, I see it exports the library as <code>rc-slider</code>: </p>\n\n<p><a href=\"https://i.stack.imgur.com/l9GMD.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/l9GMD.png\" alt=\"rc-slider exported to window\"></a></p>\n\n<p>So you can access it as <code>window[\"rc-slider\"]</code> and use it from there, for example: </p>\n\n<pre><code>var RCSlider = window[\"rc-slider\"]\n\nvar container = document.getElementById(\"container\")\n\nReactDOM.render(\n  &lt;div&gt;\n    &lt;RCSlider /&gt;\n    &lt;RCSlider.Range /&gt;\n  &lt;/div&gt;,\n  container\n);\n</code></pre>\n\n<p><a href=\"https://jsfiddle.net/75081e0g/\" rel=\"nofollow noreferrer\">jsfiddle</a></p>\n\n<p>That way, if you put <code>rc-slider.js</code> in the asset pipeline, you can use <code>RCSlider</code> in your javascripts. </p>\n"}], "owner": {"reputation": 1909, "user_id": 1463744, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/afe1c18b5b4f52d0c8ada174e60c17ae?s=128&d=identicon&r=PG", "display_name": "fagiani", "link": "https://stackoverflow.com/users/1463744/fagiani"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 308, "favorite_count": 0, "accepted_answer_id": 41987116, "answer_count": 1, "score": 2, "last_activity_date": 1485974038, "creation_date": 1485971432, "question_id": 41986373, "link": "https://stackoverflow.com/questions/41986373/using-an-external-react-component-on-rails-application", "title": "Using an external React component on Rails application", "body": "<p>I am trying to use the <a href=\"https://github.com/react-component/slider\" rel=\"nofollow noreferrer\">rc-slider</a> <code>React</code> component on a existing <code>Rails</code> application that is using <a href=\"https://github.com/reactjs/react-rails\" rel=\"nofollow noreferrer\">react-rails</a> <code>gem</code> and it already have some other components that were built within the application that work just fine.</p>\n\n<p>Based on <a href=\"http://rmosolgo.github.io/blog/2016/05/19/how-i-use-sprockets/\" rel=\"nofollow noreferrer\">this blog post</a> I've been able to follow its first 3 steps, I've found the minified and browser-ready version of it <a href=\"https://unpkg.com/rc-slider@6.0.0/dist/rc-slider.min.js\" rel=\"nofollow noreferrer\">here</a>, added the file to the suggested path and required it on the <code>application.js</code> as recommended but even seeing the code within the <code>Sprockets</code> generated application javascript file that is rendered on the browser I can't see or use the supposed global variable it would provide according to step 4.</p>\n\n<p>In the component's <a href=\"http://react-component.github.io/slider/examples/handle.html\" rel=\"nofollow noreferrer\">examples page</a> it uses a <code>const Slider = require('rc-slider');</code> statement in order to get that available. I've tried that but without luck as it throws: <code>Uncaught ReferenceError: require is not defined</code>. The same happens when I try the <a href=\"https://github.com/react-component/slider#usage\" rel=\"nofollow noreferrer\"><code>README</code></a> usage's section approach: <code>import Slider, { Range } from 'rc-slider';</code>. I've tried both from an existing JS where I load other React components and also from the browser's Dev Tools Console window.</p>\n\n<p>Am I using the wrong approach to the problem or maybe missing/overseeing any concept or basics here?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3", "ruby-on-rails-4", "rubygems"], "comments": [{"owner": {"reputation": 964, "user_id": 922592, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/677f7fdb87ded28ed533d8fd14b28a82?s=128&d=identicon&r=PG", "display_name": "Gregg Horton", "link": "https://stackoverflow.com/users/922592/gregg-horton"}, "edited": false, "score": 0, "creation_date": 1485971693, "post_id": 41986072, "comment_id": 71150566, "body": "This question is very similar to: <a href=\"http://stackoverflow.com/questions/24226378/rails-routes-with-name-instead-of-id-url-parameters\" title=\"rails routes with name instead of id url parameters\">stackoverflow.com/questions/24226378/&hellip;</a> which suggests to use friendly_id"}, {"owner": {"reputation": 311, "user_id": 6487334, "user_type": "registered", "accept_rate": 43, "profile_image": "https://lh5.googleusercontent.com/-mR_kAM02zew/AAAAAAAAAAI/AAAAAAAAAB4/JxJCA3D5shE/photo.jpg?sz=128", "display_name": "Alaap Dhall", "link": "https://stackoverflow.com/users/6487334/alaap-dhall"}, "reply_to_user": {"reputation": 964, "user_id": 922592, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/677f7fdb87ded28ed533d8fd14b28a82?s=128&d=identicon&r=PG", "display_name": "Gregg Horton", "link": "https://stackoverflow.com/users/922592/gregg-horton"}, "edited": false, "score": 0, "creation_date": 1485971753, "post_id": 41986072, "comment_id": 71150601, "body": "I don&#39;t feel friendly_id gem is something I want"}], "answers": [{"comments": [{"owner": {"reputation": 311, "user_id": 6487334, "user_type": "registered", "accept_rate": 43, "profile_image": "https://lh5.googleusercontent.com/-mR_kAM02zew/AAAAAAAAAAI/AAAAAAAAAB4/JxJCA3D5shE/photo.jpg?sz=128", "display_name": "Alaap Dhall", "link": "https://stackoverflow.com/users/6487334/alaap-dhall"}, "edited": false, "score": 0, "creation_date": 1485972479, "post_id": 41986513, "comment_id": 71151005, "body": "I tried that  but that didn&#39;t change anything url is still the same"}], "tags": [], "owner": {"reputation": 964, "user_id": 922592, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/677f7fdb87ded28ed533d8fd14b28a82?s=128&d=identicon&r=PG", "display_name": "Gregg Horton", "link": "https://stackoverflow.com/users/922592/gregg-horton"}, "is_accepted": false, "score": 0, "last_activity_date": 1485971848, "creation_date": 1485971848, "answer_id": 41986513, "question_id": 41986072, "link": "https://stackoverflow.com/questions/41986072/change-routes-url-from-a-random-id-to-username-in-rails/41986513#41986513", "title": "change routes URL from a random :id to :username in rails", "body": "<p>In rails 4 you can do the following in the route</p>\n\n<pre><code>resources :amitians, param: :username\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4150, "user_id": 7470620, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/49f3026fe13841e41d1805178eed9a3c?s=128&d=identicon&r=PG", "display_name": "eiko", "link": "https://stackoverflow.com/users/7470620/eiko"}, "is_accepted": true, "score": 4, "last_activity_date": 1485973208, "last_edit_date": 1485973208, "creation_date": 1485972750, "answer_id": 41986760, "question_id": 41986072, "link": "https://stackoverflow.com/questions/41986072/change-routes-url-from-a-random-id-to-username-in-rails/41986760#41986760", "title": "change routes URL from a random :id to :username in rails", "body": "<p>As Gregg mentioned, you can change the name of the parameter using:</p>\n\n<p><code>resources :amitians, param: :username</code></p>\n\n<p>But you're essentially just renaming a variable. Whether you expect an id or a username is determined in the controller action amitians#show:</p>\n\n<pre><code>@amitian = Amitian.find(param[:id]) # Treat :id as id\n@amitian = Amitian.find_by_username(param[:id]) # Treat :id as username\n</code></pre>\n\n<p>Now, if you want to specifically route to <code>/:username</code> rather than <code>/amitians/:username</code>, you'll have to override that resource route:</p>\n\n<pre><code>resources :amitians, except: [:show] do\n  member do\n    get :following, :followers\n  end\nend\nget '/:username', to: 'amitians#show'\n</code></pre>\n\n<p>However, I would recommend against that. Having a parameter directly off root will cause lots of confusion for you when users type in the incorrect url and get a user page instead of a 404 error. Or even worse, what if a user chooses the username 'login' or 'register'? Either your register page would be unreachable or else that user's page would be.</p>\n\n<p>I should also point out that rails convenience methods such as <code>resources</code>, <code>Amitian.find</code>, <code>url_for @amitian</code>, <code>link_to @amitian</code> etc. all use the REST standard which uses numerical IDs.</p>\n\n<p>If you want to use a username instead of IDs, you'll have to stop relying on these methods and change your controllers and views, in addition to your routes file.</p>\n"}], "owner": {"reputation": 311, "user_id": 6487334, "user_type": "registered", "accept_rate": 43, "profile_image": "https://lh5.googleusercontent.com/-mR_kAM02zew/AAAAAAAAAAI/AAAAAAAAAB4/JxJCA3D5shE/photo.jpg?sz=128", "display_name": "Alaap Dhall", "link": "https://stackoverflow.com/users/6487334/alaap-dhall"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 964, "favorite_count": 2, "accepted_answer_id": 41986760, "answer_count": 2, "score": 2, "last_activity_date": 1485973208, "creation_date": 1485970457, "question_id": 41986072, "link": "https://stackoverflow.com/questions/41986072/change-routes-url-from-a-random-id-to-username-in-rails", "title": "change routes URL from a random :id to :username in rails", "body": "<p>I want to change my routes.rb file in a way so that it changes my current urls</p>\n\n<pre><code> localhost:3000/amitian/1\n</code></pre>\n\n<p>to localhost:3000/username</p>\n\n<p>I will provide my routes.rb file for reference</p>\n\n<pre><code>  Rails.application.routes.draw do\n\n devise_for :amitians\n\n root 'home#index'\n resources :amitians do\n member do\n get :following, :followers\n end\nend\n resources :confessions do\nmember do\n    get 'like' , to: 'confessions#upvote'\n    get 'dislike' , to: 'confessions#downvote'\n    end\n    resources :confessioncomments\n  end\n    resources :relationships, only: [:create, :destroy]\n\n end\n</code></pre>\n"}, {"tags": ["ruby", "chef-infra", "aws-opsworks"], "comments": [{"owner": {"reputation": 2536, "user_id": 5982962, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MMUja.jpg?s=128&g=1", "display_name": "Roman Tkachuk", "link": "https://stackoverflow.com/users/5982962/roman-tkachuk"}, "edited": false, "score": 0, "creation_date": 1485972599, "post_id": 41986070, "comment_id": 71151084, "body": "You can use secured (encrypted) data bag"}, {"owner": {"reputation": 2771, "user_id": 1887370, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/08bf95201cabfe02acc28041cff862ff?s=128&d=identicon&r=PG", "display_name": "sakurashinken", "link": "https://stackoverflow.com/users/1887370/sakurashinken"}, "reply_to_user": {"reputation": 2536, "user_id": 5982962, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MMUja.jpg?s=128&g=1", "display_name": "Roman Tkachuk", "link": "https://stackoverflow.com/users/5982962/roman-tkachuk"}, "edited": false, "score": 0, "creation_date": 1485972912, "post_id": 41986070, "comment_id": 71151243, "body": "could you say more?"}, {"owner": {"reputation": 2536, "user_id": 5982962, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MMUja.jpg?s=128&g=1", "display_name": "Roman Tkachuk", "link": "https://stackoverflow.com/users/5982962/roman-tkachuk"}, "edited": false, "score": 1, "creation_date": 1485973005, "post_id": 41986070, "comment_id": 71151282, "body": "<a href=\"https://docs.chef.io/data_bags.html\" rel=\"nofollow noreferrer\">docs.chef.io/data_bags.html</a>"}], "answers": [{"tags": [], "owner": {"reputation": 43208, "user_id": 78722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf611565f0b79abd0b3dc200ad867661?s=128&d=identicon&r=PG", "display_name": "coderanger", "link": "https://stackoverflow.com/users/78722/coderanger"}, "is_accepted": true, "score": 1, "last_activity_date": 1485974501, "creation_date": 1485974501, "answer_id": 41987259, "question_id": 41986070, "link": "https://stackoverflow.com/questions/41986070/how-to-distribute-ssh-keys-with-chef-12/41987259#41987259", "title": "How to distribute ssh keys with chef 12", "body": "<p>If you're on AWS you probably want to use some mix of their services for this. Check out the citadel cookbook for my recommended solution but you can also look at things like Confidant or Hashicorp Vault.</p>\n"}], "owner": {"reputation": 2771, "user_id": 1887370, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/08bf95201cabfe02acc28041cff862ff?s=128&d=identicon&r=PG", "display_name": "sakurashinken", "link": "https://stackoverflow.com/users/1887370/sakurashinken"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 120, "favorite_count": 0, "accepted_answer_id": 41987259, "answer_count": 1, "score": 1, "last_activity_date": 1485974501, "creation_date": 1485970449, "question_id": 41986070, "link": "https://stackoverflow.com/questions/41986070/how-to-distribute-ssh-keys-with-chef-12", "title": "How to distribute ssh keys with chef 12", "body": "<p>I have a set of configuration recipes in chef 12 of aws opsworks. When I create users on ec2 instances I would like to set the password and provision keys. How can I do this securely without putting plaintext in the chef scripts, which are stored in git?</p>\n"}, {"tags": ["java", "ruby", "object"], "comments": [{"owner": {"reputation": 116, "user_id": 830729, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc50393ddd41509bfb8a8f2ebe0d6a5e?s=128&d=identicon&r=PG", "display_name": "Kapitol", "link": "https://stackoverflow.com/users/830729/kapitol"}, "edited": false, "score": 0, "creation_date": 1485969702, "post_id": 41985734, "comment_id": 71149295, "body": "<code>Fixnum</code> objects are immutable. See <a href=\"http://stackoverflow.com/a/161589/830729\">this answer</a>."}, {"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 0, "creation_date": 1485969786, "post_id": 41985734, "comment_id": 71149358, "body": "It doesn&#39;t work (like it doesn&#39;t in java/c# etc) not because something is an object or not, but because of how assignment works. I don&#39;t know of any language where this will actually swap them."}, {"owner": {"reputation": 4842, "user_id": 1493868, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/7a84611ec325ce3125ec56149b2cfcb6?s=128&d=identicon&r=PG", "display_name": "Tr\u1ea7n Kim D\u1ef1", "link": "https://stackoverflow.com/users/1493868/tr%e1%ba%a7n-kim-d%e1%bb%b1"}, "reply_to_user": {"reputation": 116, "user_id": 830729, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc50393ddd41509bfb8a8f2ebe0d6a5e?s=128&d=identicon&r=PG", "display_name": "Kapitol", "link": "https://stackoverflow.com/users/830729/kapitol"}, "edited": false, "score": 0, "creation_date": 1485969964, "post_id": 41985734, "comment_id": 71149476, "body": "@Kapitol ah I understood. because Fixnum is immutable :D that is the main point :D"}, {"owner": {"reputation": 4842, "user_id": 1493868, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/7a84611ec325ce3125ec56149b2cfcb6?s=128&d=identicon&r=PG", "display_name": "Tr\u1ea7n Kim D\u1ef1", "link": "https://stackoverflow.com/users/1493868/tr%e1%ba%a7n-kim-d%e1%bb%b1"}, "reply_to_user": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 0, "creation_date": 1485970024, "post_id": 41985734, "comment_id": 71149531, "body": "@ndn yep. in C/C++, I can use pointer/reference. In C# doable also. but I forgot. But in Java, you cannot except using Integer, Double ..."}, {"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 1, "creation_date": 1485970148, "post_id": 41985734, "comment_id": 71149602, "body": "@Tr\u1ea7nKimD\u1ef1, I&#39;m a 1000% percent certain that this exact code will not swap them in c/c++/c#/java/whatever. If you pass pointers and change the address of these pointers - yes. But not with regular assignment like that."}, {"owner": {"reputation": 4842, "user_id": 1493868, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/7a84611ec325ce3125ec56149b2cfcb6?s=128&d=identicon&r=PG", "display_name": "Tr\u1ea7n Kim D\u1ef1", "link": "https://stackoverflow.com/users/1493868/tr%e1%ba%a7n-kim-d%e1%bb%b1"}, "reply_to_user": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 0, "creation_date": 1485970566, "post_id": 41985734, "comment_id": 71149868, "body": "@ndn My fault. Java behavior still be same. because Integer, Double also immutable, too. For example, we don&#39;t use Integer here, but use a custom object. for change value, we will use something such as: <code>person_1.setAge(newAge)</code>. so <code>person_1</code> outside at main method will change age, right. that because person object is mutable."}, {"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 0, "creation_date": 1485970725, "post_id": 41985734, "comment_id": 71149980, "body": "@Tr\u1ea7nKimD\u1ef1, again - it has nothing to do with immutability. If you pass mutable objects (like arrays for example) and swap them, it will not take effect. But if you try to add an element for example, this will work. The reason is that you change the actual value, not just what the variable is pointing to."}, {"owner": {"reputation": 4842, "user_id": 1493868, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/7a84611ec325ce3125ec56149b2cfcb6?s=128&d=identicon&r=PG", "display_name": "Tr\u1ea7n Kim D\u1ef1", "link": "https://stackoverflow.com/users/1493868/tr%e1%ba%a7n-kim-d%e1%bb%b1"}, "reply_to_user": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 0, "creation_date": 1485971077, "post_id": 41985734, "comment_id": 71150188, "body": "@ndn I have updated my question about Java code for proof-of-concept why the problem here is immutable."}, {"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 1, "creation_date": 1485971213, "post_id": 41985734, "comment_id": 71150263, "body": "@Tr\u1ea7nKimD\u1ef1, it&#39;s not the reason why. Notice how you do <code>a.changeValue(b.getValue())</code> instead of <code>a = b</code> or <code>a = b.getValue()</code>. Assignment (<code>=</code>) just changes what the local variable refers to. It doesn&#39;t matter if the previous or new value is mutable or not."}, {"owner": {"reputation": 4842, "user_id": 1493868, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/7a84611ec325ce3125ec56149b2cfcb6?s=128&d=identicon&r=PG", "display_name": "Tr\u1ea7n Kim D\u1ef1", "link": "https://stackoverflow.com/users/1493868/tr%e1%ba%a7n-kim-d%e1%bb%b1"}, "reply_to_user": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 0, "creation_date": 1485971263, "post_id": 41985734, "comment_id": 71150291, "body": "@ndn you should notice. that is not normal assignment. In java it called auto boxing / unboxing. a = 3 same as a.setValue(3), but here, it doesn&#39;t change old object but return new object."}, {"owner": {"reputation": 4842, "user_id": 1493868, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/7a84611ec325ce3125ec56149b2cfcb6?s=128&d=identicon&r=PG", "display_name": "Tr\u1ea7n Kim D\u1ef1", "link": "https://stackoverflow.com/users/1493868/tr%e1%ba%a7n-kim-d%e1%bb%b1"}, "edited": false, "score": 0, "creation_date": 1485971421, "post_id": 41985734, "comment_id": 71150387, "body": "I have updated my answer by adding method <code>setValueImmutable</code>. that how java works when you assign for example a = 3."}, {"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 1, "creation_date": 1485971480, "post_id": 41985734, "comment_id": 71150419, "body": "@Tr\u1ea7nKimD\u1ef1, boxing/unboxing is the magical conversion between primitives and objects of corresponding classes. This has nothing to do with it. Calling <code>changeValue</code> is not &quot;assignment for objects&quot;, it&#39;s calling a method that assigns value to the instance variable. It is still calling a method, not assignment."}, {"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 0, "creation_date": 1485971682, "post_id": 41985734, "comment_id": 71150559, "body": "@Tr\u1ea7nKimD\u1ef1, seriously, assignment is just the equals sign (<code>=</code>). Try to use <code>x = y</code> instead of <code>x.changeValue(y.getValue())</code> and you will get the same result (no swap), even though the values behind <code>x</code> and <code>y</code> are mutable."}, {"owner": {"reputation": 4842, "user_id": 1493868, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/7a84611ec325ce3125ec56149b2cfcb6?s=128&d=identicon&r=PG", "display_name": "Tr\u1ea7n Kim D\u1ef1", "link": "https://stackoverflow.com/users/1493868/tr%e1%ba%a7n-kim-d%e1%bb%b1"}, "edited": false, "score": 0, "creation_date": 1485971696, "post_id": 41985734, "comment_id": 71150569, "body": "I understand. I mean when you use <code>Integer a = 3</code>. this is not normal assignment. In fact, It will called <code>Integer a = new Integer(3)</code> (simplified model, because Java has cache mechanism here).  so when I coded &quot;c=a; a=b; b=c&quot; (a, b, c is Integer), in fact Java is set new value for object (not just change pointer). That why I can use my above example for proof-of-concept why swap two Integer in Java not work."}, {"owner": {"reputation": 4842, "user_id": 1493868, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/7a84611ec325ce3125ec56149b2cfcb6?s=128&d=identicon&r=PG", "display_name": "Tr\u1ea7n Kim D\u1ef1", "link": "https://stackoverflow.com/users/1493868/tr%e1%ba%a7n-kim-d%e1%bb%b1"}, "reply_to_user": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 0, "creation_date": 1485971971, "post_id": 41985734, "comment_id": 71150732, "body": "@ndn Please take a look at my Edit 2. I have made it clearer. i get value from Integer a and b (primitive). after that, I assign again for object a and b (auto boxing).  but the reason it doesn&#39;t work because immutable."}, {"owner": {"reputation": 4842, "user_id": 1493868, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/7a84611ec325ce3125ec56149b2cfcb6?s=128&d=identicon&r=PG", "display_name": "Tr\u1ea7n Kim D\u1ef1", "link": "https://stackoverflow.com/users/1493868/tr%e1%ba%a7n-kim-d%e1%bb%b1"}, "edited": false, "score": 0, "creation_date": 1485972114, "post_id": 41985734, "comment_id": 71150809, "body": "I understand your point about x = y just simply assignment. But in this case, it doesn&#39;t work because immutable. because if it doesn&#39;t immutable, I <i>have changed</i> value from object a and b in Edit 2 and it should change outside of swap method."}, {"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 0, "creation_date": 1485972561, "post_id": 41985734, "comment_id": 71151060, "body": "@Tr\u1ea7nKimD\u1ef1, I wrote an example with assignment and mutable objects <a href=\"https://repl.it/F36T/0\" rel=\"nofollow noreferrer\">here</a>. As you can see, mutable or not, it doesn&#39;t change how assignment works. Boxing/unboxing doesn&#39;t change the fact that the assignment will only change the reference of the local variable, not mutate an existing object."}, {"owner": {"reputation": 4842, "user_id": 1493868, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/7a84611ec325ce3125ec56149b2cfcb6?s=128&d=identicon&r=PG", "display_name": "Tr\u1ea7n Kim D\u1ef1", "link": "https://stackoverflow.com/users/1493868/tr%e1%ba%a7n-kim-d%e1%bb%b1"}, "reply_to_user": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 0, "creation_date": 1485972920, "post_id": 41985734, "comment_id": 71151246, "body": "@ndn I understood your example. Your example just mean swap method just swaps reference variables (and does not change value). But at my edit 2, I have get value outside and assign to  primitive variable. ( <b>int</b> temp_b = b; <b>int</b> temp_a = a;) to force java boxing here (not just simply assign new reference but change value internal) and it still not work. that because immutable."}, {"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 1, "creation_date": 1485973490, "post_id": 41985734, "comment_id": 71151550, "body": "@Tr\u1ea7nKimD\u1ef1, it does not work because your assumption that unboxing changes the value is incorrect. It does not change anything, it simply gives you the underlying primitive value. Boxing doesn&#39;t change anything either, it creates a new object that wraps that value. After whatever wrapping/unwrapping is done on the right hand side, it still simply assigns like a normal assignment."}, {"owner": {"reputation": 4842, "user_id": 1493868, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/7a84611ec325ce3125ec56149b2cfcb6?s=128&d=identicon&r=PG", "display_name": "Tr\u1ea7n Kim D\u1ef1", "link": "https://stackoverflow.com/users/1493868/tr%e1%ba%a7n-kim-d%e1%bb%b1"}, "reply_to_user": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 0, "creation_date": 1485973942, "post_id": 41985734, "comment_id": 71151787, "body": "@ndn I&#39;m thinking again. <code>a = 3</code> means <code>a = new Integer(3)</code>. so you said correctly, that not the result of immutable but just result of de-reference object. Before that, I think <code>a = 3</code> mean take object where <b>a is point to</b>. change that value and return new object. (not modify old object). nonsense but because that time I haven&#39;t thought carefully. My fault :D"}], "answers": [{"comments": [{"owner": {"reputation": 18371, "user_id": 13433, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/90617e2b1586c87d8007539d8c58ae46?s=128&d=identicon&r=PG", "display_name": "JasonTrue", "link": "https://stackoverflow.com/users/13433/jasontrue"}, "reply_to_user": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 0, "creation_date": 1485970127, "post_id": 41985876, "comment_id": 71149590, "body": "They are local because they are values scoped to that function. If you had a byref a, byref b they&#39;d now be references, still technically local variables, but made available to the calling function since the caller has the reference."}, {"owner": {"reputation": 18371, "user_id": 13433, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/90617e2b1586c87d8007539d8c58ae46?s=128&d=identicon&r=PG", "display_name": "JasonTrue", "link": "https://stackoverflow.com/users/13433/jasontrue"}, "reply_to_user": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 1, "creation_date": 1485970955, "post_id": 41985876, "comment_id": 71150117, "body": "You&#39;re right in that sense; my C is a bit rusty these days, and IIRC you had to use double-indirection to support a swap in C."}, {"owner": {"reputation": 4842, "user_id": 1493868, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/7a84611ec325ce3125ec56149b2cfcb6?s=128&d=identicon&r=PG", "display_name": "Tr\u1ea7n Kim D\u1ef1", "link": "https://stackoverflow.com/users/1493868/tr%e1%ba%a7n-kim-d%e1%bb%b1"}, "edited": false, "score": 0, "creation_date": 1485971131, "post_id": 41985876, "comment_id": 71150218, "body": "I think the problem here is because FixNum in Ruby are immutable. If they&#39;re mutable, it works. Please take a look at my updated question. I have post code Java for proof-of-concept."}, {"owner": {"reputation": 18371, "user_id": 13433, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/90617e2b1586c87d8007539d8c58ae46?s=128&d=identicon&r=PG", "display_name": "JasonTrue", "link": "https://stackoverflow.com/users/13433/jasontrue"}, "edited": false, "score": 0, "creation_date": 1485972156, "post_id": 41985876, "comment_id": 71150835, "body": "Yes, you can simulate a swap by creating an object that is mutable (Essentially a reference-capturing object). In this case you&#39;re swapping an instance variable rather than the reference to the parent object."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "reply_to_user": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 2, "creation_date": 1485994510, "post_id": 41985876, "comment_id": 71161432, "body": "@ndn: Yes, C still passes pointers by value. C passes everything by value, just like Ruby. (In fact, Ruby is basically like always passing pointers by value, and since everything being passed is always a pointer, there is no special syntax to take and dereference a pointer like there is in C.) But in languages like C++ and C\u266f, which <i>do</i> have pass-by-reference semantics, you <i>can</i> affect references in the callers&#39;s scope; in fact, that&#39;s pretty much the definition of pass-by-reference."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "reply_to_user": {"reputation": 4842, "user_id": 1493868, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/7a84611ec325ce3125ec56149b2cfcb6?s=128&d=identicon&r=PG", "display_name": "Tr\u1ea7n Kim D\u1ef1", "link": "https://stackoverflow.com/users/1493868/tr%e1%ba%a7n-kim-d%e1%bb%b1"}, "edited": false, "score": 1, "creation_date": 1485994655, "post_id": 41985876, "comment_id": 71161469, "body": "@Tr\u1ea7nKimD\u1ef1: The Java code and the Ruby code you posted are completely different. In the Ruby code you are modifying references, in the Java code you are modifying objects. Those are completely different things. A Post-It with &quot;Tr\u1ea7n Kim D\u1ef1&quot; on it is not the same as you. It is only a reference to you."}, {"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "reply_to_user": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1486650769, "post_id": 41985876, "comment_id": 71444897, "body": "@J&#246;rgWMittag, agreed."}], "tags": [], "owner": {"reputation": 18371, "user_id": 13433, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/90617e2b1586c87d8007539d8c58ae46?s=128&d=identicon&r=PG", "display_name": "JasonTrue", "link": "https://stackoverflow.com/users/13433/jasontrue"}, "is_accepted": false, "score": 2, "last_activity_date": 1486004934, "last_edit_date": 1495540892, "creation_date": 1485969861, "answer_id": 41985876, "question_id": 41985734, "link": "https://stackoverflow.com/questions/41985734/if-everything-is-an-object-why-cant-i-swap-two-variables/41985876#41985876", "title": "If everything is an object, why can&#39;t I swap two variables?", "body": "<p>The reason this doesn't work is that method parameters are passed by value, not by reference. Only a small number of languages use pass-by-reference semantics by default. The behavior is the same in Java and in Ruby. </p>\n\n<p>However, it's just tricky enough that plenty of people misuse the terminology. See this question, for example. <a href=\"https://stackoverflow.com/questions/40480/is-java-pass-by-reference-or-pass-by-value\">Is Java &quot;pass-by-reference&quot; or &quot;pass-by-value&quot;?</a></p>\n\n<p>In many languages, such as C#, pass-by-reference is possible with a special keyword (ref in the case of C#, or the &amp; marker after a type in C++). You can simulate the behavior in languages like C by passing indirect pointers (though that gives you a bit more power, thanks to less strict type checking).</p>\n\n<p>I haven't written C# code in a couple years, but what you are trying to achieve would be approximately:</p>\n\n<pre><code>static void SwapStrings(ref string s1, ref string s2)\n        {\n            string temp = s1;\n            s1 = s2;\n            s2 = temp;\n        } \n</code></pre>\n\n<p>It would be invoked <code>SwapStrings(ref str1, ref str2);</code></p>\n\n<p>This code is an abbreviated version of what's here: <a href=\"https://msdn.microsoft.com/en-us/library/s6938f28.aspx\" rel=\"nofollow noreferrer\">https://msdn.microsoft.com/en-us/library/s6938f28.aspx</a></p>\n"}, {"tags": [], "owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "is_accepted": false, "score": 3, "last_activity_date": 1485971707, "last_edit_date": 1495540395, "creation_date": 1485970139, "answer_id": 41985976, "question_id": 41985734, "link": "https://stackoverflow.com/questions/41985734/if-everything-is-an-object-why-cant-i-swap-two-variables/41985976#41985976", "title": "If everything is an object, why can&#39;t I swap two variables?", "body": "<p>Your <code>swap</code> method only swaps variables that are local to the method.</p>\n\n<p>Inside the method, <code>a</code> and <code>b</code> are swapped. This doesn't affect anything outside the method, though. <code>c</code> isn't defined outside <code>swap</code> for example.</p>\n\n<p>Note that to swap <code>a</code> and <code>b</code>, you don't need any other variable : <code>a, b = b, a</code> is a valid Ruby syntax.</p>\n\n<p>Finally, variables <a href=\"https://stackoverflow.com/a/8382291/6419007\">aren't objects</a>. They merely reference objects.</p>\n\n<p>Here's a way to achieve what you wanted to do.\nUPDATE: It's basically the equivalent of your Java code :</p>\n\n<pre><code>class MyObject\n  attr_accessor :x\n  def initialize(x)\n    @x = x\n  end\nend\n\ndef swap(f,g)\n  f.x, g.x = g.x, f.x\nend\n\na = MyObject.new(1)\nb = MyObject.new(2)\n\nswap(a, b)\n\nputs a.x\n#=&gt; 2\nputs b.x\n#=&gt; 1\n</code></pre>\n\n<p>Note that the objects <code>a</code> and <code>b</code> haven't been swapped. Their <code>x</code> values have been swapped, though.</p>\n\n<p>Another possibility would be to use instance variables :</p>\n\n<pre><code>def swap\n  @a, @b = @b, @a\nend\n\n@a = 1\n@b = 2\n\nswap\n\np @a\n#=&gt; 2\np @b\n#=&gt; 1\n</code></pre>\n"}], "owner": {"reputation": 4842, "user_id": 1493868, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/7a84611ec325ce3125ec56149b2cfcb6?s=128&d=identicon&r=PG", "display_name": "Tr\u1ea7n Kim D\u1ef1", "link": "https://stackoverflow.com/users/1493868/tr%e1%ba%a7n-kim-d%e1%bb%b1"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 250, "favorite_count": 0, "closed_date": 1485970548, "answer_count": 2, "score": 0, "last_activity_date": 1486004934, "creation_date": 1485969384, "last_edit_date": 1485972363, "question_id": 41985734, "link": "https://stackoverflow.com/questions/41985734/if-everything-is-an-object-why-cant-i-swap-two-variables", "closed_reason": "Duplicate", "title": "If everything is an object, why can&#39;t I swap two variables?", "body": "<p>I have this simple test:</p>\n\n<pre><code>def swap(a, b)\n   c = a\n   a = b\n   b = c\nend\n\na = 3\nb = 4\nswap(a, b)\nprint a # 3. not change value\n</code></pre>\n\n<p>I know this example will not work on some languages such as Java or C# because those variables are primitives. But in Ruby, if everything is an object, I think the above example should work. Please explain this to me.</p>\n\n<hr>\n\n<p>I think the problem is because FixNum is immutable. I have proof-of-concept code using Java to make an integer class that is not immutable:</p>\n\n<pre><code>static class CustomInteger {\n        Integer value;\n        public CustomInteger(int i) {\n            this.value = i;\n        }\n\n        public void changeValue(int i) {\n            this.value = i;\n        }\n\n        public int getValue() {\n            return value;\n        }\n\n        public CustomInteger setValueImmutable(int i) {\n           return new CustomInteger(i);\n        }\n    }\n\n    public static void swap(CustomInteger a, CustomInteger b) {\n        int c = a.getValue();\n        a.changeValue(b.getValue());\n        b.changeValue(c);\n    }\n\n    public static void main(String[] args) {\n        CustomInteger i1 = new CustomInteger(3);\n        CustomInteger i2 = new CustomInteger(4);\n        swap(i1, i2);\n        System.out.println(i1.getValue());\n    }\n</code></pre>\n\n<hr>\n\n<pre><code>public static void notWorkSwap(Integer a, Integer b) {\n        int temp_a = a;\n        int temp_b = b;\n        a = temp_b;\n        b = temp_a;\n    }\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user6516765"}, "edited": false, "score": 0, "creation_date": 1485968802, "post_id": 41985321, "comment_id": 71148772, "body": "Why are you installing ruby on a MacBook? Shouldn&#39;t you have a server for this?"}, {"owner": {"reputation": 18224, "user_id": 406987, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8865b16d4f3493cfae865af2b3247fd3?s=128&d=identicon&r=PG", "display_name": "Doon", "link": "https://stackoverflow.com/users/406987/doon"}, "edited": false, "score": 0, "creation_date": 1485969561, "post_id": 41985321, "comment_id": 71149198, "body": "is that the only error?"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1485972515, "post_id": 41985321, "comment_id": 71151033, "body": "@Dev People install Ruby and Rails on MacBooks all the time. It&#39;s a great way to develop, then, when it&#39;s beyond proof-of-concept we move it to alternate hardware for testing and continue developing on the local version."}, {"owner": {"user_type": "does_not_exist", "display_name": "user6516765"}, "edited": false, "score": 0, "creation_date": 1485977126, "post_id": 41985321, "comment_id": 71153527, "body": "Yes, I do suppose Unix is an excellent development environment... Guilty as charged, I use it for developing Python applications (I have .py files littered all over the file system, I can&#39;t keep track of them all :P)"}], "answers": [{"tags": [], "owner": {"reputation": 3706, "user_id": 3700798, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LpxP2.png?s=128&g=1", "display_name": "svelandiag", "link": "https://stackoverflow.com/users/3700798/svelandiag"}, "is_accepted": true, "score": 0, "last_activity_date": 1485969374, "last_edit_date": 1495542258, "creation_date": 1485969374, "answer_id": 41985730, "question_id": 41985321, "link": "https://stackoverflow.com/questions/41985321/how-do-i-resolve-this-error-that-keeps-me-from-starting-rails-server/41985730#41985730", "title": "How do I resolve this error that keeps me from starting rails server?", "body": "<p>Im not sure if that's the issue, since what you are seeing is just a warning. That warning appears because you are using ruby 2.4.0.</p>\n\n<p>This version introduced this change: Unify Fixnum and Bignum into Integer</p>\n\n<p>See here for the announcement: <a href=\"https://www.ruby-lang.org/en/news/2016/12/25/ruby-2-4-0-released/Z\" rel=\"nofollow noreferrer\">https://www.ruby-lang.org/en/news/2016/12/25/ruby-2-4-0-released/Z</a></p>\n\n<p>The warnings come from the activesupport gem which is part of rails, and they will fix it soon.</p>\n\n<p>Try downgrading your Ruby Version to 2.1 and try again.</p>\n\n<p><a href=\"https://stackoverflow.com/a/41464223/3700798\">Source</a></p>\n"}], "owner": {"reputation": 8754, "user_id": 6719819, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/HmF9I.jpg?s=128&g=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/6719819/daniel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 465, "favorite_count": 0, "accepted_answer_id": 41985730, "answer_count": 1, "score": 1, "last_activity_date": 1485969374, "creation_date": 1485968124, "question_id": 41985321, "link": "https://stackoverflow.com/questions/41985321/how-do-i-resolve-this-error-that-keeps-me-from-starting-rails-server", "title": "How do I resolve this error that keeps me from starting rails server?", "body": "<p>Hey guys I have searched documentation to this error that I have never seen before in working with Ruby on Rails. I just got a new MacBook and I installed Rails 4.2 and Ruby 2.4 and when I attempt to run rails server, I get this error:</p>\n\n<pre><code>.rbenv/versions/2.4.0/lib/ruby/gems/2.4.0/gems/thread_safe-0.3.5/lib/thread_safe/cache.rb:155: warning: constant ::Fixnum is deprecated\n</code></pre>\n\n<p>How do I eliminate this error that is keeping me from starting up the rails server?</p>\n"}, {"tags": ["ruby"], "answers": [{"comments": [{"owner": {"reputation": 253, "user_id": 2882986, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/571ef1c39d186de7fe7fee23abe09eeb?s=128&d=identicon&r=PG&f=1", "display_name": "nsommer", "link": "https://stackoverflow.com/users/2882986/nsommer"}, "edited": false, "score": 0, "creation_date": 1485973976, "post_id": 41986757, "comment_id": 71151812, "body": "Thanks for your answer! This makes it runnable indeed, but it exposes the class variable to the public. There isn&#39;t away to preserve the functionality and keep access to the class variable private, is it? Because when I&#39;m in a class I can directly access any class variable both from instance and class methods."}, {"owner": {"reputation": 253, "user_id": 2882986, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/571ef1c39d186de7fe7fee23abe09eeb?s=128&d=identicon&r=PG&f=1", "display_name": "nsommer", "link": "https://stackoverflow.com/users/2882986/nsommer"}, "edited": false, "score": 0, "creation_date": 1485981004, "post_id": 41986757, "comment_id": 71155583, "body": "I think now I understand the difference between def sef.something;end methods and methods in ClassMethods. I thought there wasn&#39;t a difference, but there is. I also looked up some parts of the code from rails (e.g. callbacks in ActiveSupport) and it looks like they implemented stuff exactly as you suggested (accessor method). I tried to understand it before, but I failed until now. All in all this is not what I&#39;ve hoped for (read: the code is not as pretty as I hoped it could be), but that&#39;s not your fault so I&#39;ll accept the answer."}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "reply_to_user": {"reputation": 253, "user_id": 2882986, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/571ef1c39d186de7fe7fee23abe09eeb?s=128&d=identicon&r=PG&f=1", "display_name": "nsommer", "link": "https://stackoverflow.com/users/2882986/nsommer"}, "edited": false, "score": 0, "creation_date": 1485983347, "post_id": 41986757, "comment_id": 71156915, "body": "I&#39;m by no mean a metaprogramming expert. There might very well be cleaner solutions."}], "tags": [], "owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "is_accepted": true, "score": 0, "last_activity_date": 1485975576, "last_edit_date": 1495541349, "creation_date": 1485972741, "answer_id": 41986757, "question_id": 41985239, "link": "https://stackoverflow.com/questions/41985239/access-class-variables-in-a-modules-class-and-instance-methods/41986757#41986757", "title": "Access class variables in a modules class and instance methods", "body": "<p>When inside <code>MyModule::ClassMethods</code>, you're not inside <code>MyModule</code> and don't have access to <code>@@a_class_variable</code>. <a href=\"https://stackoverflow.com/questions/4688588/how-to-access-a-class-variable-of-outer-class-from-inner-class-in-ruby\">Here's</a> a related question.</p>\n\n<p>With an accessor, your code works fine :</p>\n\n<pre><code>module MyModule\n  @@a_class_variable = \"lorem ipsum\"\n\n  def self.a_class_variable\n    @@a_class_variable\n  end\n\n  def self.included(base)\n    base.extend ClassMethods\n  end\n\n  module ClassMethods\n    def a_class_method\n      MyModule.a_class_variable &lt;&lt; \" abc1\"\n    end\n  end\n\n  # Use it in constructor\n  def initialize\n    @@a_class_variable &lt;&lt; \" abc2\"\n  end\n\n  def an_instance_method\n    @@a_class_variable &lt;&lt; \" abc3\"\n  end\nend\n\nclass MyObject\n  include MyModule\nend\n\nmy_object = MyObject.new\nMyObject.a_class_method\np my_object.an_instance_method\n#=&gt; \"lorem ipsum abc2 abc1 abc3\"\n</code></pre>\n\n<p>As you noted in the comments, it exposes <code>@@a_class_variable</code> to the public.\nSetting the method as <code>private</code> or <code>protected</code> wouldn't work in the above example, since <code>ClassMethods</code> and <code>MyModule</code> aren't related.</p>\n\n<p>It might not be the cleanest solution, but you could use <a href=\"http://ruby-doc.org/core-2.4.0/Object.html#method-i-send\" rel=\"nofollow noreferrer\"><code>send</code></a> to access the private method :</p>\n\n<pre><code>module MyModule\n  @@a_class_variable = 'lorem ipsum'\n\n  module ClassMethods\n    def a_class_method\n      MyModule.send(:__a_class_variable) &lt;&lt; ' abc1'\n    end\n  end\n\n  # Use it in constructor\n  def initialize\n    @@a_class_variable &lt;&lt; ' abc2'\n  end\n\n  def an_instance_method\n    @@a_class_variable &lt;&lt; ' abc3'\n  end\n\n  class &lt;&lt; self\n    def included(base)\n      base.extend ClassMethods\n    end\n\n    private\n\n    def __a_class_variable\n      @@a_class_variable\n    end\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 253, "user_id": 2882986, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/571ef1c39d186de7fe7fee23abe09eeb?s=128&d=identicon&r=PG&f=1", "display_name": "nsommer", "link": "https://stackoverflow.com/users/2882986/nsommer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1030, "favorite_count": 0, "accepted_answer_id": 41986757, "answer_count": 1, "score": 2, "last_activity_date": 1485975576, "creation_date": 1485967852, "question_id": 41985239, "link": "https://stackoverflow.com/questions/41985239/access-class-variables-in-a-modules-class-and-instance-methods", "title": "Access class variables in a modules class and instance methods", "body": "<p>I have a module that contains both instance methods and class methods when included in a class. Both instance methods and class methods shall access class variables.</p>\n\n<pre><code>module MyModule\n  @@a_class_variable = \"lorem ipsum\"\n\n  def self.included(base)\n    base.extend ClassMethods\n  end\n\n  module ClassMethods\n    def a_class_method\n      @@a_class_variable &lt;&lt; \"abc\"\n    end\n  end\n\n  # Use it in constructor\n  def initialize\n    @@a_class_variable &lt;&lt; \"abc\"\n  end\n\n  def an_instance_method\n    @@a_class_variable &lt;&lt; \"abc\"\n  end\nend\n</code></pre>\n\n<p>When I include <code>MyModule</code> in some class, the interpreter says: <em>NameError: uninitialized class variable @@a_class_method in MyModule::ClassMethods</em></p>\n\n<p>What am I doing wrong?</p>\n"}, {"tags": ["ruby", "excel"], "comments": [{"owner": {"reputation": 798, "user_id": 4091011, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/f05f3852947f6076f3ad900ec0dac603?s=128&d=identicon&r=PG&f=1", "display_name": "RAJ", "link": "https://stackoverflow.com/users/4091011/raj"}, "edited": false, "score": 0, "creation_date": 1485968411, "post_id": 41985181, "comment_id": 71148552, "body": "Yes you can connect the existing one by <code>excel = WIN32OLE::connect(&#39;excel.Application&#39;)</code>"}, {"owner": {"reputation": 798, "user_id": 4091011, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/f05f3852947f6076f3ad900ec0dac603?s=128&d=identicon&r=PG&f=1", "display_name": "RAJ", "link": "https://stackoverflow.com/users/4091011/raj"}, "edited": false, "score": 0, "creation_date": 1486033861, "post_id": 41985181, "comment_id": 71177675, "body": "Yes, you have the object now, so you can use it like when you use opening the excel file using the open statement. I have added a post."}], "answers": [{"comments": [{"owner": {"reputation": 798, "user_id": 4091011, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/f05f3852947f6076f3ad900ec0dac603?s=128&d=identicon&r=PG&f=1", "display_name": "RAJ", "link": "https://stackoverflow.com/users/4091011/raj"}, "reply_to_user": {"reputation": 6322, "user_id": 1392235, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9c11ab2312c3c59df33b8b9ec0fb2ba2?s=128&d=identicon&r=PG", "display_name": "Davesexcel", "link": "https://stackoverflow.com/users/1392235/davesexcel"}, "edited": false, "score": 0, "creation_date": 1486103479, "post_id": 42000724, "comment_id": 71210644, "body": "Changed in my answer."}], "tags": [], "owner": {"reputation": 798, "user_id": 4091011, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/f05f3852947f6076f3ad900ec0dac603?s=128&d=identicon&r=PG&f=1", "display_name": "RAJ", "link": "https://stackoverflow.com/users/4091011/raj"}, "is_accepted": true, "score": 1, "last_activity_date": 1486103450, "last_edit_date": 1486103450, "creation_date": 1486033987, "answer_id": 42000724, "question_id": 41985181, "link": "https://stackoverflow.com/questions/41985181/ruby-sketchup-get-a-value-from-an-open-excel-workbook/42000724#42000724", "title": "Ruby Sketchup, get a value from an open excel workbook", "body": "<p>Use this way</p>\n\n<pre><code>excel = WIN32OLE.connect(\"excel.application\")\nworkbook = excel.Workbooks('workbook name')\nworksheet = workbook.Worksheets('Sheet1')\n</code></pre>\n"}], "owner": {"reputation": 6322, "user_id": 1392235, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9c11ab2312c3c59df33b8b9ec0fb2ba2?s=128&d=identicon&r=PG", "display_name": "Davesexcel", "link": "https://stackoverflow.com/users/1392235/davesexcel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 337, "favorite_count": 0, "accepted_answer_id": 42000724, "answer_count": 1, "score": 0, "last_activity_date": 1486103450, "creation_date": 1485967669, "question_id": 41985181, "link": "https://stackoverflow.com/questions/41985181/ruby-sketchup-get-a-value-from-an-open-excel-workbook", "title": "Ruby Sketchup, get a value from an open excel workbook", "body": "<p>Is there a way I can get a value from an all ready open workbook?</p>\n\n<p>I can get a value by opening the workbook, but I would like to get the value when the workbook is already opened.</p>\n\n<pre><code>    require 'win32ole'\n\nxl = WIN32OLE.new('Excel.Application')\nxl.visible=1\n\nwb = xl.Workbooks.Open('C:\\Users\\Dave\\Downloads\\Example.xlsm')\n\nworksheet = wb.Worksheets('Sheet1')\nworksheet2 = wb.Worksheets('Sheet2')\n\nworksheet.Range('a1').Value=1111\nworksheet.Range('a2').Value\n</code></pre>\n\n<p>What I am doing is inputing data into excel, then I have a ruby code in sketchup that get the data and draws from it. It then places the drawing into the worksheet.\nThat's why I would like the ruby code to be able to read the data when the sheet is opened.</p>\n\n<p>Thanks,</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "awesomeprint"], "comments": [{"owner": {"reputation": 1523, "user_id": 6896906, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JiWcO.jpg?s=128&g=1", "display_name": "Zach Tuttle", "link": "https://stackoverflow.com/users/6896906/zach-tuttle"}, "edited": false, "score": 0, "creation_date": 1485966760, "post_id": 41984627, "comment_id": 71147499, "body": "take a look at this question <a href=\"http://stackoverflow.com/questions/16952290/how-can-i-add-current-directory-to-ruby-loadpath-permanently\" title=\"how can i add current directory to ruby loadpath permanently\">stackoverflow.com/questions/16952290/&hellip;</a>"}, {"owner": {"reputation": 38077, "user_id": 199712, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/4fa58c43c72a15d2d560ffd931fbe9bb?s=128&d=identicon&r=PG", "display_name": "Jason Swett", "link": "https://stackoverflow.com/users/199712/jason-swett"}, "reply_to_user": {"reputation": 1523, "user_id": 6896906, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JiWcO.jpg?s=128&g=1", "display_name": "Zach Tuttle", "link": "https://stackoverflow.com/users/6896906/zach-tuttle"}, "edited": false, "score": 0, "creation_date": 1485967915, "post_id": 41984627, "comment_id": 71148234, "body": "@ZachTuttle That didn&#39;t seem to do it for me, sorry."}], "answers": [{"comments": [{"owner": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "reply_to_user": {"reputation": 38077, "user_id": 199712, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/4fa58c43c72a15d2d560ffd931fbe9bb?s=128&d=identicon&r=PG", "display_name": "Jason Swett", "link": "https://stackoverflow.com/users/199712/jason-swett"}, "edited": false, "score": 0, "creation_date": 1485967643, "post_id": 41984931, "comment_id": 71148047, "body": "it will depend on your version of ruby that you&#39;r invoking <code>irb</code> with.  if your gem isn&#39;t installed for that version of ruby, it will fail.  You can always check it with <code>ruby ~&#47;.irbrc</code> to see if you get any warnings.  The rails issue is known."}, {"owner": {"reputation": 38077, "user_id": 199712, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/4fa58c43c72a15d2d560ffd931fbe9bb?s=128&d=identicon&r=PG", "display_name": "Jason Swett", "link": "https://stackoverflow.com/users/199712/jason-swett"}, "edited": false, "score": 0, "creation_date": 1485967780, "post_id": 41984931, "comment_id": 71148141, "body": "Sorry, it does in fact work for me in IRB. I don&#39;t know why it didn&#39;t work initially but now it does."}, {"owner": {"reputation": 38077, "user_id": 199712, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/4fa58c43c72a15d2d560ffd931fbe9bb?s=128&d=identicon&r=PG", "display_name": "Jason Swett", "link": "https://stackoverflow.com/users/199712/jason-swett"}, "edited": false, "score": 0, "creation_date": 1485967857, "post_id": 41984931, "comment_id": 71148188, "body": "The issue you linked to seems to be an issue of Rails ignoring <code>~&#47;.irbrc</code>. I don&#39;t have that problem. Rails picks up <code>~&#47;.irbrc</code> fine, it just says <code>cannot load such file -- awesome_print</code>, presumably because it&#39;s lacking the right path in <code>$LOAD_PATH</code>."}, {"owner": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "reply_to_user": {"reputation": 38077, "user_id": 199712, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/4fa58c43c72a15d2d560ffd931fbe9bb?s=128&d=identicon&r=PG", "display_name": "Jason Swett", "link": "https://stackoverflow.com/users/199712/jason-swett"}, "edited": false, "score": 0, "creation_date": 1485987871, "post_id": 41984931, "comment_id": 71159092, "body": "interesting, i couldn&#39;t get it to pick up my irbrc file.  Same version of ruby in your rails app?  you could <code>puts ruby -v</code> at the top of your ~/.irbrc file to make sure."}], "tags": [], "owner": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "is_accepted": false, "score": 1, "last_activity_date": 1485987800, "last_edit_date": 1485987800, "creation_date": 1485966979, "answer_id": 41984931, "question_id": 41984627, "link": "https://stackoverflow.com/questions/41984627/permanently-add-a-directory-to-ruby-load-path/41984931#41984931", "title": "Permanently add a directory to Ruby $LOAD_PATH", "body": "<p>You could simply use a a <code>~/.irbrc</code> file and do:</p>\n\n<pre><code>require 'awesome_print'\n</code></pre>\n\n<p>Now, open up another IRB prompt:</p>\n\n<pre><code>irb(main):003:0&gt; ap hash\n{\n    \"a\" =&gt; \"b\"\n}\n</code></pre>\n\n<p>Edit:  this isn't working in rails, seems to be a <a href=\"https://github.com/rails/spring/issues/374\" rel=\"nofollow noreferrer\">known issue</a>.</p>\n"}], "owner": {"reputation": 38077, "user_id": 199712, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/4fa58c43c72a15d2d560ffd931fbe9bb?s=128&d=identicon&r=PG", "display_name": "Jason Swett", "link": "https://stackoverflow.com/users/199712/jason-swett"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 467, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1485987800, "creation_date": 1485966038, "question_id": 41984627, "link": "https://stackoverflow.com/questions/41984627/permanently-add-a-directory-to-ruby-load-path", "title": "Permanently add a directory to Ruby $LOAD_PATH", "body": "<p>I'd like the option to use <a href=\"https://github.com/awesome-print/awesome_print\" rel=\"nofollow noreferrer\">awesome_print</a> in every IRB console or Rails console.</p>\n\n<p>The IRB console is pretty much working satisfactorily right now. If I run <code>irb</code>, I can type <code>require 'awesome_print'</code> and it works.</p>\n\n<p>The Rails console isn't as easy. <code>require 'awesome_print'</code> doesn't work. I apparently have to do this:</p>\n\n<p><code>&gt; $LOAD_PATH &lt;&lt; '~/.rvm/gems/ruby-2.1.8/gems/awesome_print-1.7.0/lib'</code></p>\n\n<p>After that, <code>require 'awesome_print'</code> works fine.</p>\n\n<p>But I definitely don't want to have to type <code>$LOAD_PATH &lt;&lt; '~/.rvm/gems/ruby-2.1.8/gems/awesome_print-1.7.0/lib'</code> and then <code>require 'awesome_print'</code> every single time I open a Rails console just to be able to use <code>awesome_print</code>. That seems ridiculous.</p>\n\n<p>So, how can I permanently add a path to Ruby's <code>$LOAD_PATH</code>?</p>\n\n<p>Note: I <em>don't</em> want to add <code>awesome_print</code> to the <code>Gemfile</code> of any particular project. I want <code>awesome_print</code> to be available to <em>all</em> my Ruby/Rails projects.</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 73209, "user_id": 290394, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d7908f05c89e965f6bc5308ad6f41256?s=128&d=identicon&r=PG", "display_name": "steenslag", "link": "https://stackoverflow.com/users/290394/steenslag"}, "edited": false, "score": 0, "creation_date": 1485966337, "post_id": 41984381, "comment_id": 71147243, "body": "which ruby version are you using?"}, {"owner": {"reputation": 147, "user_id": 7108144, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/zB40x.jpg?s=128&g=1", "display_name": "Wali Chaudhary", "link": "https://stackoverflow.com/users/7108144/wali-chaudhary"}, "reply_to_user": {"reputation": 73209, "user_id": 290394, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d7908f05c89e965f6bc5308ad6f41256?s=128&d=identicon&r=PG", "display_name": "steenslag", "link": "https://stackoverflow.com/users/290394/steenslag"}, "edited": false, "score": 0, "creation_date": 1485966377, "post_id": 41984381, "comment_id": 71147277, "body": "I am using version  2.4"}], "answers": [{"tags": [], "owner": {"reputation": 3392, "user_id": 2717416, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc2a55ce261e8901476f37dafae815a?s=128&d=identicon&r=PG&f=1", "display_name": "Jan Zeiseweis", "link": "https://stackoverflow.com/users/2717416/jan-zeiseweis"}, "is_accepted": false, "score": 1, "last_activity_date": 1485967444, "last_edit_date": 1485967444, "creation_date": 1485967110, "answer_id": 41984974, "question_id": 41984381, "link": "https://stackoverflow.com/questions/41984381/looping-trouble-in-ruby-for-small-script/41984974#41984974", "title": "Looping trouble in Ruby for small script", "body": "<p>This should do the job:</p>\n\n<pre><code>range = (1000..3000)\n# Return all values from range where the block evaluates to true and put them into a list called result\nresult = range.select do |number|\n  # convert the number to a string and convert every character back to a number (digits) then check if all digits are even\n  number.to_s.chars.map(&amp;:to_i).all? { |n| n.even? }\nend\n# create a string from the number where elements are spearated by a ','\nputs result.join(',')\n</code></pre>\n\n<p>Explanation:</p>\n\n<pre><code>result = range.select \nreturns the value \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 73209, "user_id": 290394, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d7908f05c89e965f6bc5308ad6f41256?s=128&d=identicon&r=PG", "display_name": "steenslag", "link": "https://stackoverflow.com/users/290394/steenslag"}, "is_accepted": true, "score": 3, "last_activity_date": 1485987773, "last_edit_date": 1485987773, "creation_date": 1485967131, "answer_id": 41984981, "question_id": 41984381, "link": "https://stackoverflow.com/questions/41984381/looping-trouble-in-ruby-for-small-script/41984981#41984981", "title": "Looping trouble in Ruby for small script", "body": "<p>First an attempt to get the current code working - it wasn't far off:</p>\n\n<pre><code>range = (1000..3000)\narray_even = Array.new()\nall_evens_baby = []\n\nrange.each do |x|\n  if x.even?\n    array_even.push(x)\n  end\nend # you'r done here, step 1 is finished.\n    # shorter is:  array_even = range.select(&amp;:even?)\n\narray_even.select do |x|\n  current_divided_number = x.to_s.chars\n  n = 0 #counter variable\n  current_divided_number.each do |d|\n    n=n+1 if d.to_i.even?\n  end\n  all_evens_baby &lt;&lt; x if n == 4\nend\n\nputs all_evens_baby.join(\",\")   \n</code></pre>\n\n<p>The first step is unnecessary, step 2/3 will filter the odds out anyway.\nRuby 2.4 has a nice method to obtain the digits of an integer, called <code>digits</code>, so converting to a string can be avoided.</p>\n\n<p>Have a look at:</p>\n\n<pre><code>all_evens_baby = (1000..3000).select do |num|\n  num.digits.all? do |d|\n    d.even?\n  end  #if this is true, num will be in all_evens_baby\nend\nputs all_evens_baby.join(\",\")\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 534, "user_id": 1520965, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/9d3599fdb032a18e0066027529da8085?s=128&d=identicon&r=PG&f=1", "display_name": "Manuk Karapetyan", "link": "https://stackoverflow.com/users/1520965/manuk-karapetyan"}, "is_accepted": false, "score": 1, "last_activity_date": 1485967843, "creation_date": 1485967843, "answer_id": 41985235, "question_id": 41984381, "link": "https://stackoverflow.com/questions/41984381/looping-trouble-in-ruby-for-small-script/41985235#41985235", "title": "Looping trouble in Ruby for small script", "body": "<p>This is your solution in one line</p>\n\n<pre><code>all_evens_baby=(1000..3000).select {|a| a.even?}.map {|i| i.to_s.chars}.flatten.map {|i| i.to_i}.select {|i| i.even?}\n</code></pre>\n"}], "owner": {"reputation": 147, "user_id": 7108144, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/zB40x.jpg?s=128&g=1", "display_name": "Wali Chaudhary", "link": "https://stackoverflow.com/users/7108144/wali-chaudhary"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 93, "favorite_count": 0, "accepted_answer_id": 41984981, "answer_count": 3, "score": 1, "last_activity_date": 1485987773, "creation_date": 1485965268, "last_edit_date": 1485981566, "question_id": 41984381, "link": "https://stackoverflow.com/questions/41984381/looping-trouble-in-ruby-for-small-script", "title": "Looping trouble in Ruby for small script", "body": "<p>I am working on a Ruby exercise but I'm not getting my desired output.</p>\n\n<p>The problem starts around step 2 in my algorithm I think..the counter of the while loop confuses me a little and I'm not sure how to end the while loop. But other than that, I think the code is mostly ok.</p>\n\n<blockquote>\n  <p>Write a program, which will find all such numbers between 1000 and 3000 (both included) such that each digit of the number is an even number.</p>\n  \n  <p>The numbers obtained should be printed in a comma-separated sequence on a single line.</p>\n</blockquote>\n\n<p>I want to implement:</p>\n\n<ol>\n<li>Iterate over the entire range (<code>1000..3000</code>) and identify all evens, and store them into a separate array called <code>array_evens</code>.</li>\n<li>Iterate over <code>array_evens</code> and divide each even number into separate digits.</li>\n<li>Iterate over all those digits and determine whether each is even or false with <code>even?</code>.</li>\n<li>If that number is even, push it to an array called <code>all_evens_baby</code></li>\n</ol>\n\n<p>Here is my code:</p>\n\n<pre><code>range = (1000..3000)\narray_even = Array.new()\neven_digits_number = []\nn = 0 #counter variable\nall_evens_baby = []\neven_or_odd = nil\n\n\nrange.select do |x|\n  if x.even?\n    array_even = array_even.push(x)\n\n    while (n &lt;= array_even.length)\n      #The placement of this while loop may be wrong.\n      #iterate over all evens to divide all numbers into singular digits\n\n      current_divided_number = array_even[n].to_s.chars\n      current_divided_number.map do |x|\n        #iterate over all digits to determine if even or odd\n\n        even_or_odd = x.to_i.even? #=&gt; true or false\n\n        if even_or_odd == true\n          all_evens_baby = even_digits_number.push(array_even[n])\n        else\n        end\n      end\n      n+=1\n    end\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "regex", "match"], "comments": [{"owner": {"reputation": 100127, "user_id": 67392, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/95e28ac250c4604a6f9d7e34705c3259?s=128&d=identicon&r=PG", "display_name": "Richard", "link": "https://stackoverflow.com/users/67392/richard"}, "edited": false, "score": 3, "creation_date": 1485964573, "post_id": 41984107, "comment_id": 71145999, "body": "Parsing HTML with regexes only leads to unfortunate effects for the developer: <a href=\"http://stackoverflow.com/a/1732454/67392\">stackoverflow.com/a/1732454/67392</a>"}, {"owner": {"reputation": 63, "user_id": 3579614, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/64bc7dde9b9ff83bcbbe1ad4ba0be435?s=128&d=identicon&r=PG&f=1", "display_name": "user3579614", "link": "https://stackoverflow.com/users/3579614/user3579614"}, "reply_to_user": {"reputation": 100127, "user_id": 67392, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/95e28ac250c4604a6f9d7e34705c3259?s=128&d=identicon&r=PG", "display_name": "Richard", "link": "https://stackoverflow.com/users/67392/richard"}, "edited": false, "score": 0, "creation_date": 1485964754, "post_id": 41984107, "comment_id": 71146148, "body": "&quot;If you have a small set of HTML pages that you want to scrape data from and then stuff into a database, regexes might work fine.&quot; That seems like what I&#39;m trying to do. So it might be fine?"}, {"owner": {"reputation": 63, "user_id": 3579614, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/64bc7dde9b9ff83bcbbe1ad4ba0be435?s=128&d=identicon&r=PG&f=1", "display_name": "user3579614", "link": "https://stackoverflow.com/users/3579614/user3579614"}, "reply_to_user": {"reputation": 100127, "user_id": 67392, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/95e28ac250c4604a6f9d7e34705c3259?s=128&d=identicon&r=PG", "display_name": "Richard", "link": "https://stackoverflow.com/users/67392/richard"}, "edited": false, "score": 0, "creation_date": 1485964881, "post_id": 41984107, "comment_id": 71146251, "body": "Also what would you recommend doing instead?"}, {"owner": {"reputation": 799, "user_id": 2559093, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eOwPf.jpg?s=128&g=1", "display_name": "OneNeptune", "link": "https://stackoverflow.com/users/2559093/oneneptune"}, "edited": false, "score": 0, "creation_date": 1485964985, "post_id": 41984107, "comment_id": 71146330, "body": "@user3579614 do you have any familiarity with JavaScript? It&#39;s similar in syntax and more suited for scraping HTML pages."}, {"owner": {"reputation": 63, "user_id": 3579614, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/64bc7dde9b9ff83bcbbe1ad4ba0be435?s=128&d=identicon&r=PG&f=1", "display_name": "user3579614", "link": "https://stackoverflow.com/users/3579614/user3579614"}, "edited": false, "score": 0, "creation_date": 1485965559, "post_id": 41984107, "comment_id": 71146724, "body": "Yeah a little bit. I&#39;ve found nokogiri, that seems to do the job correctly?"}, {"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 0, "creation_date": 1485965890, "post_id": 41984107, "comment_id": 71146939, "body": "@user3579614, Nokogiri is indeed the right tool for the job. Wrote an answer to explain how you can use it for your specific case."}, {"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "reply_to_user": {"reputation": 799, "user_id": 2559093, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eOwPf.jpg?s=128&g=1", "display_name": "OneNeptune", "link": "https://stackoverflow.com/users/2559093/oneneptune"}, "edited": false, "score": 0, "creation_date": 1485965986, "post_id": 41984107, "comment_id": 71146995, "body": "@OneNeptune, I wouldn&#39;t say Ruby is unfit for html parsing. Nokogiri works as well as any other industry standard parser."}, {"owner": {"reputation": 799, "user_id": 2559093, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eOwPf.jpg?s=128&g=1", "display_name": "OneNeptune", "link": "https://stackoverflow.com/users/2559093/oneneptune"}, "reply_to_user": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 0, "creation_date": 1485966119, "post_id": 41984107, "comment_id": 71147089, "body": "@ndn fair, I think highly of Ruby and just meant to suggest if it was a light weight utility not to reinvent the wheel."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1485982614, "post_id": 41984107, "comment_id": 71156496, "body": "JavaScript is hardly more suitable for scraping, it&#39;s just different. A well implemented parser, like Nokogiri, is extremely powerful and convenient because it&#39;s designed for use with Ruby."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1485982701, "post_id": 41984107, "comment_id": 71156557, "body": "Please read &quot;<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>&quot;. When asking a question like this, you should supply the minimal HTML necessary to demonstrate the problem. While this particular problem results in a small amount of HTML, future problems you ask about probably won&#39;t be as simple and that supplied data will be more important."}], "answers": [{"comments": [{"owner": {"reputation": 40236, "user_id": 923315, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/j6lLI.jpg?s=128&g=1", "display_name": "peter", "link": "https://stackoverflow.com/users/923315/peter"}, "edited": false, "score": 0, "creation_date": 1485967470, "post_id": 41984413, "comment_id": 71147942, "body": "doesn&#39;t work for the OP&#39;s html, also you need to use rails or at least require &#39;active_support/all&#39;"}], "tags": [], "owner": {"reputation": 76, "user_id": 7487592, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ceab0582caac67f72edfe857b563935?s=128&d=identicon&r=PG&f=1", "display_name": "Jose Perez", "link": "https://stackoverflow.com/users/7487592/jose-perez"}, "is_accepted": false, "score": 0, "last_activity_date": 1485965382, "creation_date": 1485965382, "answer_id": 41984413, "question_id": 41984107, "link": "https://stackoverflow.com/questions/41984107/using-regex-to-get-title/41984413#41984413", "title": "Using regex to get title", "body": "<p>When I have to get elements from XML I like to convert it to a hash </p>\n\n<blockquote>\n  <p>from_xml(xml, disallowed_types = nil) public</p>\n  \n  <p>Returns a Hash containing a collection of pairs when the key is the\n  node name and the value is its content</p>\n  \n  <p># <a href=\"http://apidock.com/rails/Hash/from_xml/class\" rel=\"nofollow noreferrer\">http://apidock.com/rails/Hash/from_xml/class</a></p>\n</blockquote>\n\n<p>now you can do something like </p>\n\n<pre><code>hash = Hash.from_xml('XML')\nhash.title # my favorite book\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "is_accepted": false, "score": 2, "last_activity_date": 1485966197, "last_edit_date": 1485966197, "creation_date": 1485965496, "answer_id": 41984456, "question_id": 41984107, "link": "https://stackoverflow.com/questions/41984107/using-regex-to-get-title/41984456#41984456", "title": "Using regex to get title", "body": "<p>The reason it doesn't work is because of the <code>itemprop=\\\"name\\\"</code> property. To fix this, you can match it as well:</p>\n\n<pre><code># copy-paste from the page you provided\nhtml = '&lt;!doctype html&gt;\\n&lt;html lang=\\\"en\\\" itemscope itemtype=\\\"https://schema.org/WebPage\\\"&gt;\\n&lt;head&gt;\\n&lt;meta charset=\\\"utf-8\\\"&gt;&lt;meta name=\\\"referrer\\\" content=\\\"always\\\" /&gt;\\n&lt;title itemprop=\\\"name\\\"&gt;title I need to select.&lt;/title&gt;\\n&lt;meta itemprop=\\\"description\\\" name=\\\"description\\\" content=\\\\'\n\nhtml.match(/&lt;title.*?&gt;(.*)&lt;\\/title&gt;/)[1] # =&gt; \"title I need to select.\"\n</code></pre>\n\n<p><code>.*?</code> basically means <em>\"match as many characters are needed, but not more\"</em></p>\n\n<hr>\n\n<p>However, as other have pointed out, regexes are not ideal for html parsing. Instead, you could use a popular ruby gem for that purpose - <a href=\"https://github.com/sparklemotion/nokogiri\" rel=\"nofollow noreferrer\">Nokogiri</a>:</p>\n\n<pre><code>require 'nokogiri'\n\npage = Nokogiri.parse(html)\npage.css('title').text # =&gt; \"title I need to select.\"\n</code></pre>\n\n<p>Note that it can handle even malformed html like is the case here.</p>\n"}, {"comments": [{"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 0, "creation_date": 1485965601, "post_id": 41984469, "comment_id": 71146751, "body": "This will select a whole lot more if there are two <code>title</code> tags on that page."}], "tags": [], "owner": {"reputation": 116, "user_id": 830729, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc50393ddd41509bfb8a8f2ebe0d6a5e?s=128&d=identicon&r=PG", "display_name": "Kapitol", "link": "https://stackoverflow.com/users/830729/kapitol"}, "is_accepted": false, "score": 1, "last_activity_date": 1485965531, "creation_date": 1485965531, "answer_id": 41984469, "question_id": 41984107, "link": "https://stackoverflow.com/questions/41984107/using-regex-to-get-title/41984469#41984469", "title": "Using regex to get title", "body": "<p>Here's the regexp that will give you what you want:\n<code>&lt;title.*&gt;(.*)&lt;\\/title&gt;</code></p>\n\n<p>As was mentioned, there are better ways to parse HTML. You might want to check out something like <a href=\"http://www.nokogiri.org/tutorials/parsing_an_html_xml_document.html\" rel=\"nofollow noreferrer\">Nokogiri</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 25823, "user_id": 24468, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/PWl6C.png?s=128&g=1", "display_name": "akuhn", "link": "https://stackoverflow.com/users/24468/akuhn"}, "edited": false, "score": 0, "creation_date": 1485972019, "post_id": 41984573, "comment_id": 71150759, "body": "Better use CSS rather than Xpath, CSS is less error-prone."}, {"owner": {"reputation": 184, "user_id": 351007, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b5409cd6ece6474f12ab1cfb0cc0770?s=128&d=identicon&r=PG", "display_name": "jeremy04", "link": "https://stackoverflow.com/users/351007/jeremy04"}, "reply_to_user": {"reputation": 25823, "user_id": 24468, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/PWl6C.png?s=128&g=1", "display_name": "akuhn", "link": "https://stackoverflow.com/users/24468/akuhn"}, "edited": false, "score": 0, "creation_date": 1485975069, "post_id": 41984573, "comment_id": 71152390, "body": "I&#39;m interested in an example of &#39;error prone&#39;? The syntax for XPath is designed for XML mostly, but works with XHTML. CSS selectors can break just as easily with a CSS class/id change, XPath can break easily with the structure of the HTML breaking. Pick your posion in that regard. What makes CSS better other than the &#39;syntax is easier&#39;?"}, {"owner": {"reputation": 25823, "user_id": 24468, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/PWl6C.png?s=128&g=1", "display_name": "akuhn", "link": "https://stackoverflow.com/users/24468/akuhn"}, "edited": false, "score": 0, "creation_date": 1486014702, "post_id": 41984573, "comment_id": 71166896, "body": "<code>node.xpath(&quot;&#47;&#47;foo&quot;)</code> does not select all <code>foo</code> descendants of <code>node</code>. About every other nokogiri question is someone tripping over that. I highly recommend CSS with its predictable behavior."}], "tags": [], "owner": {"reputation": 184, "user_id": 351007, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b5409cd6ece6474f12ab1cfb0cc0770?s=128&d=identicon&r=PG", "display_name": "jeremy04", "link": "https://stackoverflow.com/users/351007/jeremy04"}, "is_accepted": false, "score": 2, "last_activity_date": 1485966469, "last_edit_date": 1495540407, "creation_date": 1485965877, "answer_id": 41984573, "question_id": 41984107, "link": "https://stackoverflow.com/questions/41984107/using-regex-to-get-title/41984573#41984573", "title": "Using regex to get title", "body": "<p>If you're looking for a much more robust XML/HTML parser, try using Nokogiri which supports XPath.</p>\n\n<p>This post explains why\n<a href=\"https://stackoverflow.com/questions/4059812/use-xpath-or-regex\">Use xPath or Regex?</a></p>\n\n<pre><code>require \"nokogiri\"\nstring = \"&lt;title itemprop=\\\"name\\\"&gt;title I need to select.&lt;/title&gt;\"\nhtml_doc = Nokogiri::HTML(string)\nhtml_doc.xpath(\"//title\").first.text\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 14323, "user_id": 3498950, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/fa49bc7b5d1a3d144ffcda8b447912e0?s=128&d=identicon&r=PG", "display_name": "spencer.sm", "link": "https://stackoverflow.com/users/3498950/spencer-sm"}, "is_accepted": false, "score": 0, "last_activity_date": 1485970209, "creation_date": 1485970209, "answer_id": 41986004, "question_id": 41984107, "link": "https://stackoverflow.com/questions/41984107/using-regex-to-get-title/41986004#41986004", "title": "Using regex to get title", "body": "<p>One solution would be to use the following pattern:</p>\n\n<pre><code>&lt;title.*?&gt;(.*?)&lt;\\/title&gt;\n</code></pre>\n\n<p><a href=\"https://regex101.com/r/piwm5H/1\" rel=\"nofollow noreferrer\">https://regex101.com/r/piwm5H/1</a></p>\n"}, {"tags": [], "owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "is_accepted": false, "score": 0, "last_activity_date": 1485982463, "last_edit_date": 1485982463, "creation_date": 1485981875, "answer_id": 41989403, "question_id": 41984107, "link": "https://stackoverflow.com/questions/41984107/using-regex-to-get-title/41989403#41989403", "title": "Using regex to get title", "body": "<p>Use a HTML/XML parser when dealing with XML or HTML data, except for extremely simple cases. HTML and XML are too complicated for normal regular expressions.</p>\n\n<p>Using Nokogiri I'd do:</p>\n\n<pre><code>require 'nokogiri'\n\nsome_html = '\n&lt;html&gt;\n  &lt;head&gt;\n    &lt;title&gt;the title&lt;/title&gt;\n  &lt;/head&gt;\n&lt;/html&gt;\n'\n\ndoc = Nokogiri::HTML(some_html)\ndoc.title # =&gt; \"the title\"\n</code></pre>\n\n<p>Nokogiri already has a method to return the title so you can take advantage of that. Or, you can do it the normal way:</p>\n\n<pre><code>doc.at('title').text  # =&gt; \"the title\"\n</code></pre>\n\n<p>The problem with a regular expression is that HTML could be written in many ways:</p>\n\n<pre><code>&lt;title&gt;foo&lt;/title&gt;\n</code></pre>\n\n<p>or:</p>\n\n<pre><code>&lt;title&gt;\n  foo\n&lt;/title&gt;\n</code></pre>\n\n<p>or even:</p>\n\n<pre><code>&lt;title&gt;foo\n&lt;/head&gt;\n</code></pre>\n\n<p>which, while not correct, will be accepted by browsers and fixed up by Nokogiri which will then still work. Writing a pattern to handle those variants is a pain and error-prone. It only gets worse as the HTML gets more complex, especially when you don't control the generation of the content.</p>\n"}], "owner": {"reputation": 63, "user_id": 3579614, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/64bc7dde9b9ff83bcbbe1ad4ba0be435?s=128&d=identicon&r=PG&f=1", "display_name": "user3579614", "link": "https://stackoverflow.com/users/3579614/user3579614"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1483, "favorite_count": 0, "answer_count": 6, "score": 3, "last_activity_date": 1485982463, "creation_date": 1485964466, "last_edit_date": 1485965763, "question_id": 41984107, "link": "https://stackoverflow.com/questions/41984107/using-regex-to-get-title", "title": "Using regex to get title", "body": "<p>I'm not sure how I'd select an title with regex. I've tried </p>\n\n<pre><code>match(/&lt;title&gt;(.*) .*&lt;\\/title&gt;/)[1]\n</code></pre>\n\n<p>but that doesn't match anything.</p>\n\n<p><a href=\"https://gist.githubusercontent.com/anonymous/1690978d4fce82455098a29ec2e9d5a2/raw/4da439e7c0ed090baa2706d9edca7ee17075391c/gistfile1.txt\" rel=\"nofollow noreferrer\">This</a> is the response body I'm trying to select from.</p>\n\n<p>Trying to select <code>\"title I need to select.\"</code></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "windows-10", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 3467, "user_id": 906511, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/61286bced0ae2da15261439d1bb62297?s=128&d=identicon&r=PG", "display_name": "lcguida", "link": "https://stackoverflow.com/users/906511/lcguida"}, "edited": false, "score": 0, "creation_date": 1485967942, "post_id": 41983762, "comment_id": 71148247, "body": "Based on the first part, how are your file permissions for routes.rb ?"}, {"owner": {"reputation": 21, "user_id": 7500891, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb0dd971e2f7ee1696bdffb7a1da3b8c?s=128&d=identicon&r=PG&f=1", "display_name": "Nathan Muir", "link": "https://stackoverflow.com/users/7500891/nathan-muir"}, "reply_to_user": {"reputation": 3467, "user_id": 906511, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/61286bced0ae2da15261439d1bb62297?s=128&d=identicon&r=PG", "display_name": "lcguida", "link": "https://stackoverflow.com/users/906511/lcguida"}, "edited": false, "score": 0, "creation_date": 1485975519, "post_id": 41983762, "comment_id": 71152647, "body": "@Icguida nice question! I run ls -la but there is no routes.rb in console output. Btw, I can find routes.rb via Sublime or Explorer. File permissions to config folder are 0777"}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 7500891, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb0dd971e2f7ee1696bdffb7a1da3b8c?s=128&d=identicon&r=PG&f=1", "display_name": "Nathan Muir", "link": "https://stackoverflow.com/users/7500891/nathan-muir"}, "edited": false, "score": 0, "creation_date": 1485976487, "post_id": 41987232, "comment_id": 71153173, "body": "I&#39;ve already tried all methods with changing permissions to the /home folder earlier, this issue persists. Btw, this is <i>warning</i> message because Windows system has access to this folder. And it is insecure but not critical, I guess."}], "tags": [], "owner": {"reputation": 190, "user_id": 7445229, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51e2b1da482c2e3bf012a1d808366d01?s=128&d=identicon&r=PG&f=1", "display_name": "w1t3k", "link": "https://stackoverflow.com/users/7445229/w1t3k"}, "is_accepted": false, "score": 0, "last_activity_date": 1485974392, "last_edit_date": 1495542812, "creation_date": 1485974392, "answer_id": 41987232, "question_id": 41983762, "link": "https://stackoverflow.com/questions/41983762/routes-missing-after-terminal-restart-rails-5-0-1/41987232#41987232", "title": "Routes missing after terminal restart. Rails 5.0.1", "body": "<p>For me, it seems like system has problem with access rights to your home folder.</p>\n\n<p>Try to run <code>sudo chmod go-w /home/walker</code> and if issue arises on other paths do the same thing.</p>\n\n<p>Check similar <a href=\"https://stackoverflow.com/a/5395932/7445229\">question</a>. In case you want to try Rails without 'infrastructural' problems, check out <a href=\"https://www.railstutorial.org/\" rel=\"nofollow noreferrer\">https://www.railstutorial.org/</a> and their option with <em>cloud9</em> environment.</p>\n"}, {"tags": [], "owner": {"reputation": 21, "user_id": 7500891, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb0dd971e2f7ee1696bdffb7a1da3b8c?s=128&d=identicon&r=PG&f=1", "display_name": "Nathan Muir", "link": "https://stackoverflow.com/users/7500891/nathan-muir"}, "is_accepted": true, "score": 0, "last_activity_date": 1486074950, "last_edit_date": 1486074950, "creation_date": 1486065236, "answer_id": 42011158, "question_id": 41983762, "link": "https://stackoverflow.com/questions/41983762/routes-missing-after-terminal-restart-rails-5-0-1/42011158#42011158", "title": "Routes missing after terminal restart. Rails 5.0.1", "body": "<p>Thanks to @lcguida for question, which made me wonder about another way to find solution. </p>\n\n<p>I finally found the cause to this problem. If someone got stuck by such issue check this\n<a href=\"https://github.com/Microsoft/BashOnWindows/issues/87#issuecomment-214567251\" rel=\"nofollow noreferrer\">link</a> and also <a href=\"https://blogs.msdn.microsoft.com/commandline/2016/11/17/do-not-change-linux-files-using-windows-apps-and-tools/\" rel=\"nofollow noreferrer\">this link</a></p>\n"}], "owner": {"reputation": 21, "user_id": 7500891, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb0dd971e2f7ee1696bdffb7a1da3b8c?s=128&d=identicon&r=PG&f=1", "display_name": "Nathan Muir", "link": "https://stackoverflow.com/users/7500891/nathan-muir"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 159, "favorite_count": 0, "accepted_answer_id": 42011158, "answer_count": 2, "score": 2, "last_activity_date": 1486074950, "creation_date": 1485963568, "last_edit_date": 1485965405, "question_id": 41983762, "link": "https://stackoverflow.com/questions/41983762/routes-missing-after-terminal-restart-rails-5-0-1", "title": "Routes missing after terminal restart. Rails 5.0.1", "body": "<p>I was trying to found an answer for a couple of days  but found nothing. I know there are a lot of similar questions but they can't help me.</p>\n\n<p>I've started learning Rails using <a href=\"http://guides.rubyonrails.org/getting_started.html\" rel=\"nofollow noreferrer\">http://guides.rubyonrails.org/getting_started.html</a> and was moving forward till terminal restart. Here is an error messages and code samples:</p>\n\n<pre><code>walker@DESKTOP-L15NDIS:~/blog$ rails routes\n/home/walker/.rvm/gems/ruby-2.3.1/gems/railties-5.0.1/lib/rails/app_loader.rb:40:\nwarning: Insecure world writable dir\n/home/walker/.rvm/gems/ruby-2.3.1@global/bin in PATH, mode 040777\nconfig.eager_load is set to nil. Please update your config/environments/*.rb files accordingly:\n\n   * development - set it to false\n   * test - set it to false (unless you use a tool that preloads your test environment)\n   * production - set it to true\n\n You don't have any routes defined!\n\n Please add some routes in config/routes.rb.\n\n For more information about routes, see the Rails guide: http://guides.rubyonrails.org/routing.html.\n</code></pre>\n\n<p><strong>routes.rb</strong>:</p>\n\n<pre><code>Rails.application.routes.draw do\n    root 'welcome#index'\n    resources :articles\nend\n</code></pre>\n\n<p><strong>config/environments/development.rb</strong>:</p>\n\n<pre><code> config.eager_load = false\n</code></pre>\n\n<p><strong>config/environments/test.rb</strong>:</p>\n\n<pre><code>config.eager_load = false \n</code></pre>\n\n<p><strong>config/environments/production.rb</strong></p>\n\n<pre><code>config.eager_load = true\n</code></pre>\n\n<p>Starting server:</p>\n\n<pre><code> walker@DESKTOP-L15NDIS:~/blog$ rails s\n /home/walker/.rvm/gems/ruby-2.3.1/gems/railties-5.0.1/lib/rails/app_loader.rb:40:\n warning: Insecure world writable dir /home/walker/.rvm/gems/ruby-2.3.1@global/bin in PATH, mode 040777\n =&gt; Booting Puma\n =&gt; Rails 5.0.1 application starting in development on http://localhost:3000\n =&gt; Run `rails server -h` for more startup options\n config.eager_load is set to nil. Please update your config/environments/*.rb files accordingly:\n\n   * development - set it to false\n   * test - set it to false (unless you use a tool that preloads your test environment)\n   * production - set it to true\n\n Puma starting in single mode...\n * Version 3.7.0 (ruby 2.3.1-p112), codename: Snowy Sagebrush\n * Min threads: 5, max threads: 5\n * Environment: development\n * Listening on tcp://0.0.0.0:3000\n Use Ctrl-C to stop\n</code></pre>\n\n<p>Localhost displaying error message: </p>\n\n<blockquote>\n  <p>The page you were looking for doesn't exist.</p>\n  \n  <p>You may have mistyped the address or the page may have moved.</p>\n</blockquote>\n\n<p>Console output:</p>\n\n<pre><code>Started GET \"/\" for 127.0.0.1 at 2017-02-01 16:59:46 +0200 Started GET\n\"/\" for 127.0.0.1 at 2017-02-01 16:59:46 +0200\n\nActionController::RoutingError (No route matches [GET] \"/\"):\n\nActionController::RoutingError (No route matches [GET] \"/\"):\n\nactionpack (5.0.1) lib/action_dispatch/middleware/debug_exceptions.rb:53:in `call'\nweb-console (3.4.0) lib/web_console/middleware.rb:135:in `call_app'\nweb-console (3.4.0) lib/web_console/middleware.rb:28:in `block in call'\nweb-console (3.4.0) lib/web_console/middleware.rb:18:in `catch'\nweb-console (3.4.0) lib/web_console/middleware.rb:18:in `call'\nactionpack (5.0.1) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'\nrailties (5.0.1) lib/rails/rack/logger.rb:36:in `call_app'\nrailties (5.0.1) lib/rails/rack/logger.rb:24:in `block in call'\nactivesupport (5.0.1) lib/active_support/tagged_logging.rb:69:in `block in tagged'\nactivesupport (5.0.1) lib/active_support/tagged_logging.rb:26:in `tagged'\nactivesupport (5.0.1) lib/active_support/tagged_logging.rb:69:in `tagged'\nrailties (5.0.1) lib/rails/rack/logger.rb:24:in `call'\nactionpack (5.0.1) lib/action_dispatch/middleware/request_id.rb:24:in `call'\nrack (2.0.1) lib/rack/method_override.rb:22:in `call'\nrack (2.0.1) lib/rack/runtime.rb:22:in `call'\nactivesupport (5.0.1) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'\nactionpack (5.0.1) lib/action_dispatch/middleware/executor.rb:12:in `call'\nactionpack (5.0.1) lib/action_dispatch/middleware/static.rb:136:in `call'\nrack (2.0.1) lib/rack/sendfile.rb:111:in `call'\nrailties (5.0.1) lib/rails/engine.rb:522:in `call'\npuma (3.7.0) lib/puma/configuration.rb:226:in `call'\npuma (3.7.0) lib/puma/server.rb:578:in `handle_request'\npuma (3.7.0) lib/puma/server.rb:415:in `process_client'\npuma (3.7.0) lib/puma/server.rb:275:in `block in run'\npuma (3.7.0) lib/puma/thread_pool.rb:120:in `block in spawn_thread'\n</code></pre>\n\n<p>What you will suggest to fix this?</p>\n\n<p><strong><em>Note:</strong> All this stuff worked well till terminal restart.</em></p>\n\n<p>P.S. I created another app, and it works fine till terminal restart.</p>\n\n<p>P.P.S. I'm running Linux subsystem on Windows 10 Pro.</p>\n\n<p>P.P.P.S. I can't use any Linux distro or buy MacBook</p>\n"}, {"tags": ["ruby", "rspec", "mocking", "rspec2"], "answers": [{"comments": [{"owner": {"reputation": 154, "user_id": 5765390, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/81b078d29ab84dc7bc31e2b155e751f8?s=128&d=identicon&r=PG", "display_name": "user98651", "link": "https://stackoverflow.com/users/5765390/user98651"}, "edited": false, "score": 0, "creation_date": 1485962685, "post_id": 41982985, "comment_id": 71144515, "body": "Thanks, slightly edited your answer to suit my situation. See my answer."}], "tags": [], "owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "is_accepted": false, "score": 8, "last_activity_date": 1576081912, "last_edit_date": 1576081912, "creation_date": 1485961444, "answer_id": 41982985, "question_id": 41982953, "link": "https://stackoverflow.com/questions/41982953/ruby-rspec-mocking-a-class/41982985#41982985", "title": "Ruby rspec Mocking a class", "body": "<p>Bad (working):</p>\n\n<pre><code>allow_any_instance_of(LogStash::JavaMysqlConnection)\n  .to receive(:select)\n  .and_return([])\n</code></pre>\n\n<p>Good:</p>\n\n<pre><code>let(:logstash_conn) { instance_double(LogStash::JavaMysqlConnection) }\n\nallow(LogStash::JavaMysqlConnection)\n  .to receive(:new)\n  .and_return(logstash_conn)\n\nallow(logstash_conn)\n  .to receive(:select)\n  .and_return([])\n</code></pre>\n\n<p><a href=\"https://www.relishapp.com/rspec/rspec-mocks/v/2-14/docs/method-stubs\" rel=\"nofollow noreferrer\">Docs</a></p>\n\n<p><a href=\"https://github.com/rspec/rspec-mocks#method-stubs\" rel=\"nofollow noreferrer\">RSpec</a></p>\n"}, {"comments": [{"owner": {"reputation": 12629, "user_id": 4739257, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/MdhEs.jpg?s=128&g=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/4739257/ilya"}, "edited": false, "score": 1, "creation_date": 1485963024, "post_id": 41983292, "comment_id": 71144784, "body": "<code>each</code> can be omitted"}], "tags": [], "owner": {"reputation": 154, "user_id": 5765390, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/81b078d29ab84dc7bc31e2b155e751f8?s=128&d=identicon&r=PG", "display_name": "user98651", "link": "https://stackoverflow.com/users/5765390/user98651"}, "is_accepted": true, "score": 2, "last_activity_date": 1485969156, "last_edit_date": 1485969156, "creation_date": 1485962346, "answer_id": 41983292, "question_id": 41982953, "link": "https://stackoverflow.com/questions/41982953/ruby-rspec-mocking-a-class/41983292#41983292", "title": "Ruby rspec Mocking a class", "body": "<p>Following on from Andrey's response, the solution that worked for me was:</p>\n\n<pre><code> before(:each) do\n    mock_sql = double(:select=&gt; sql_select_return)\n    allow(LogStash::JavaMysqlConnection).to receive(:new).and_return(mock_sql)\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 15106, "user_id": 1117851, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/9FMVK.jpg?s=128&g=1", "display_name": "itsnikolay", "link": "https://stackoverflow.com/users/1117851/itsnikolay"}, "is_accepted": false, "score": 0, "last_activity_date": 1590761578, "creation_date": 1590761578, "answer_id": 62087936, "question_id": 41982953, "link": "https://stackoverflow.com/questions/41982953/ruby-rspec-mocking-a-class/62087936#62087936", "title": "Ruby rspec Mocking a class", "body": "<p>Using RSpec <a href=\"https://relishapp.com/rspec/rspec-mocks/v/3-9/docs/mutating-constants/stub-defined-constant\" rel=\"nofollow noreferrer\">stub_const</a></p>\n\n<pre><code>describe 'No User' do\n  let(:user)       { double }\n  let(:attributes) { { name: 'John' } }\n\n  before do\n    stub_const 'User', instance_double('User', new: user)\n  end\n\n  it 'creates user' do\n    expect(user).to receive(:update!).with(attributes)\n\n    User.new.update!(attributes)\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 154, "user_id": 5765390, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/81b078d29ab84dc7bc31e2b155e751f8?s=128&d=identicon&r=PG", "display_name": "user98651", "link": "https://stackoverflow.com/users/5765390/user98651"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7889, "favorite_count": 2, "accepted_answer_id": 41983292, "answer_count": 3, "score": 5, "last_activity_date": 1590761578, "creation_date": 1485961357, "last_edit_date": 1565346318, "question_id": 41982953, "link": "https://stackoverflow.com/questions/41982953/ruby-rspec-mocking-a-class", "title": "Ruby rspec Mocking a class", "body": "<p>I have a file with two classes in it.</p>\n\n<pre><code>class LogStash::Filters::MyFilter&lt; LogStash::Filters::Base\n</code></pre>\n\n<p>and</p>\n\n<pre><code>class LogStash::JavaMysqlConnection\n</code></pre>\n\n<p><code>JavaMysqlConnection</code> has methods <code>initialize</code> and <code>select</code>. It is in use by the <code>MyFilter</code> class, and is used to query the database as you may have guessed.</p>\n\n<p>How do I mock the <code>initialize</code> and <code>select</code> methods to return nil and an array respectively?</p>\n\n<p>I tried using:</p>\n\n<pre><code>before(:each) do\n  dbl = double(\"LogStash::JavaMysqlConnection\", :initialize =&gt; nil)\nend\n</code></pre>\n\n<p>but this did not work, as I am still seeing a communication link failure.</p>\n\n<p>I have rspec version 2.14.8</p>\n\n<p>Thanks in advance.\nPS. I am new to Ruby</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "devise", "actioncable"], "answers": [{"comments": [{"owner": {"reputation": 340, "user_id": 981054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/569ac025222f3c8c27d020f6dc10853e?s=128&d=identicon&r=PG", "display_name": "dlehman", "link": "https://stackoverflow.com/users/981054/dlehman"}, "edited": false, "score": 0, "creation_date": 1515007465, "post_id": 41985863, "comment_id": 83142417, "body": "I&#39;m attempting to use ActionCable on subdomains; user must be signed-in with Devise to open channel page. When in root domain, <code>env[&#39;warden&#39;]</code> supplies current_user, but when in subdomain, ActionCable.connect finds <code>env[&#39;warden&#39;]</code> nil. Any way around this?"}, {"owner": {"reputation": 135, "user_id": 8963578, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/f7U6y.jpg?s=128&g=1", "display_name": "Luis Vasconcellos", "link": "https://stackoverflow.com/users/8963578/luis-vasconcellos"}, "reply_to_user": {"reputation": 340, "user_id": 981054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/569ac025222f3c8c27d020f6dc10853e?s=128&d=identicon&r=PG", "display_name": "dlehman", "link": "https://stackoverflow.com/users/981054/dlehman"}, "edited": false, "score": 0, "creation_date": 1577826969, "post_id": 41985863, "comment_id": 105266004, "body": "@dlehman that&#39;s probably why: <a href=\"https://stackoverflow.com/questions/4060333/what-does-rails-3-session-store-domain-all-really-do\" title=\"what does rails 3 session store domain all really do\">stackoverflow.com/questions/4060333/&hellip;</a>"}, {"owner": {"reputation": 135, "user_id": 8963578, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/f7U6y.jpg?s=128&g=1", "display_name": "Luis Vasconcellos", "link": "https://stackoverflow.com/users/8963578/luis-vasconcellos"}, "edited": false, "score": 0, "creation_date": 1577827350, "post_id": 41985863, "comment_id": 105266079, "body": "Also: <a href=\"https://stackoverflow.com/questions/10402777/share-session-cookies-between-subdomains-in-rails\" title=\"share session cookies between subdomains in rails\">stackoverflow.com/questions/10402777/&hellip;</a>"}, {"owner": {"reputation": 1620, "user_id": 3119467, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/zwQvq.png?s=128&g=1", "display_name": "ramamoorthy_villi", "link": "https://stackoverflow.com/users/3119467/ramamoorthy-villi"}, "edited": false, "score": 0, "creation_date": 1608515451, "post_id": 41985863, "comment_id": 115599881, "body": "@nulltek not working in production."}], "tags": [], "owner": {"reputation": 2927, "user_id": 1392718, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/ceb84129b0baa570896eaf9bf51cc64e?s=128&d=identicon&r=PG&f=1", "display_name": "nulltek", "link": "https://stackoverflow.com/users/1392718/nulltek"}, "is_accepted": false, "score": 2, "last_activity_date": 1485969813, "creation_date": 1485969813, "answer_id": 41985863, "question_id": 41982812, "link": "https://stackoverflow.com/questions/41982812/rails-actioncable-request-origins-subdomain/41985863#41985863", "title": "Rails ActionCable Request Origins Subdomain", "body": "<p>With the help of a friend we learned that we needed to switch tenants prior to establishing the connection.  Here is the connection.rb</p>\n\n<pre><code>module ApplicationCable\n  class Connection &lt; ActionCable::Connection::Base\n    identified_by :current_user\n\n    def connect\n      tenant = request.subdomain\n      Apartment::Tenant.switch!(tenant)\n      self.current_user = find_verified_user\n      logger.add_tags \"ActionCable\", \"User #{current_user.id}\", \"Tenant #{tenant}\"\n    end\n\n    protected\n\n      def find_verified_user\n        if current_user = env['warden'].user\n          current_user\n        else\n          reject_unauthorized_connection\n        end\n      end\n  end\nend\n</code></pre>\n\n<p>To handle the regex portion in development.rb to handle the request origins I did this:</p>\n\n<pre><code>  Rails.application.config.action_cable.allowed_request_origins = ['http:\\/\\/*.lvh.me:3000*']\n</code></pre>\n\n<p>So far it's working and AC is transmitting properly with Apartment on subdomains.  At least in development.</p>\n"}], "owner": {"reputation": 2927, "user_id": 1392718, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/ceb84129b0baa570896eaf9bf51cc64e?s=128&d=identicon&r=PG&f=1", "display_name": "nulltek", "link": "https://stackoverflow.com/users/1392718/nulltek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 871, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1485969813, "creation_date": 1485960971, "question_id": 41982812, "link": "https://stackoverflow.com/questions/41982812/rails-actioncable-request-origins-subdomain", "title": "Rails ActionCable Request Origins Subdomain", "body": "<p>I'm building a SaaS platform with the apartment gem and am introducing ActionCable for chat functionality.  I have most of the chat functionality built, but when transmitting to the channel I get the following:</p>\n\n<pre><code>Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)\n  User Load (1.0ms)  SELECT  \"users\".* FROM \"users\" WHERE \"users\".\"id\" = $1 ORDER BY \"users\".\"id\" ASC LIMIT $2  [[\"id\", 1], [\"LIMIT\", 1]]\nAn unauthorized connection attempt was rejected\nFailed to upgrade to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)\nFinished \"/cable/\" [WebSocket] for 127.0.0.1 at 2017-02-01 08:49:53 -0600\nFinished \"/cable/\" [WebSocket] for 127.0.0.1 at 2017-02-01 08:49:53 -0600\n</code></pre>\n\n<p>I'm using this code in app/channels/connection.rb</p>\n\n<pre><code>module ApplicationCable\n  class Connection &lt; ActionCable::Connection::Base\n    identified_by :current_user\n\n    def connect\n      self.current_user = find_verified_user\n      tenant = request.subdomain\n      Apartment::Tenant.switch!(tenant)\n      logger.add_tags \"ActionCable\", \"User #{current_user.id}\", \"Tenant #{tenant}\"\n    end\n\n    protected\n\n      def find_verified_user\n        if current_user = env['warden'].user\n          current_user\n        else\n          reject_unauthorized_connection\n        end\n      end\n  end\nend\n</code></pre>\n\n<p>This in theory should switch the Tenant and get Actioncable transmitting on the right subdomain.  But I'm still getting these errors.</p>\n\n<p>I'm also using Devise and am logged in as a user so there's no reason that I can think of why the connection was rejected since it's looking up the current user and validating that the user is a logged in devise user based off of the warden ENV.</p>\n\n<p>I'm wondering since I have subdomains in play if I should be configuring the request origins in a certain fashion.</p>\n\n<p>To test this I hardcoded one of my subdomains that I'm using on the lvh.me localhost domain as such:</p>\n\n<pre><code>  Rails.application.config.action_cable.allowed_request_origins = ['http://acme.lvh.me:3000']\n</code></pre>\n\n<p>I was wondering if the allowed_request_origins has something to do with this and if so, how can I use regex to allow for any subdomain to the lvh.me:3000 url/domainspace?</p>\n\n<p>Help is greatly appreciated.</p>\n"}, {"tags": ["ruby", "couchbase", "couchbase-view"], "comments": [{"owner": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "edited": false, "score": 1, "creation_date": 1485964027, "post_id": 41982646, "comment_id": 71145566, "body": "reading the docs, looks like you need use to <code>fetch</code> without a block to get access to <code>total_rows</code>.  can you try <code>sources.All.fetch</code> and tell me what that returns?"}, {"owner": {"reputation": 3458, "user_id": 98509, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/dd70f9d8cc5f9ee488d68e7a787ba526?s=128&d=identicon&r=PG", "display_name": "avsej", "link": "https://stackoverflow.com/users/98509/avsej"}, "reply_to_user": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "edited": false, "score": 1, "creation_date": 1485964263, "post_id": 41982646, "comment_id": 71145746, "body": "yes, @Anthony is right, the view have to be executed to get total_rows"}, {"owner": {"reputation": 1848, "user_id": 657644, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/28f86578bc070ea2fbde98810ddf63d0?s=128&d=identicon&r=PG", "display_name": "PascalTurbo", "link": "https://stackoverflow.com/users/657644/pascalturbo"}, "reply_to_user": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "edited": false, "score": 0, "creation_date": 1486028635, "post_id": 41982646, "comment_id": 71174142, "body": "@Anthony that solves the Problem."}], "answers": [{"tags": [], "owner": {"reputation": 1848, "user_id": 657644, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/28f86578bc070ea2fbde98810ddf63d0?s=128&d=identicon&r=PG", "display_name": "PascalTurbo", "link": "https://stackoverflow.com/users/657644/pascalturbo"}, "is_accepted": false, "score": 0, "last_activity_date": 1486028617, "creation_date": 1486028617, "answer_id": 41998776, "question_id": 41982646, "link": "https://stackoverflow.com/questions/41982646/get-total-rows-from-couchbase-ruby-library/41998776#41998776", "title": "Get total_rows from couchbase ruby library", "body": "<p>The comment of Anthony solves the problem:</p>\n\n<pre><code>sources.All(limit: 0).fetch.total_rows\n</code></pre>\n\n<p>Use limit: 0 for speeding up the request.</p>\n"}], "owner": {"reputation": 1848, "user_id": 657644, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/28f86578bc070ea2fbde98810ddf63d0?s=128&d=identicon&r=PG", "display_name": "PascalTurbo", "link": "https://stackoverflow.com/users/657644/pascalturbo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 27, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1486028617, "creation_date": 1485960533, "question_id": 41982646, "link": "https://stackoverflow.com/questions/41982646/get-total-rows-from-couchbase-ruby-library", "title": "Get total_rows from couchbase ruby library", "body": "<p>When having a look to my couchbase view using the web api I got this result:</p>\n\n<pre><code>{\n  \"total_rows\": 18279385,\n  \"rows\": []\n}\n</code></pre>\n\n<p>But I'm using the ruby couchbase gem like follows</p>\n\n<pre><code>require 'couchbase'\nc = Couchbase.connect(...)\nsources = c.design_docs['Data']\npp sources.All\n#&lt;Couchbase::View:47373151271840 @endpoint=\"_design/Data/_view/All\" @params={:connection_timeout=&gt;75000}&gt;\n</code></pre>\n\n<p>But how do I get the total_rows from the view? I've found few documentation which relates to a Method \"total_rows\" but that doesn't seem to be present at this point.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ubuntu"], "answers": [{"comments": [{"owner": {"reputation": 25, "user_id": 7500559, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86f5bc0fabfb96e68c00b1a3812d61be?s=128&d=identicon&r=PG&f=1", "display_name": "RedManBrasil", "link": "https://stackoverflow.com/users/7500559/redmanbrasil"}, "edited": false, "score": 0, "creation_date": 1485961282, "post_id": 41982751, "comment_id": 71143491, "body": "It logs          &quot;redmanb+  2050  0.0  0.0  21292   964 pts/17   S+   12:59   0:00 grep --color=auto puma&quot;"}, {"owner": {"reputation": 25, "user_id": 7500559, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86f5bc0fabfb96e68c00b1a3812d61be?s=128&d=identicon&r=PG&f=1", "display_name": "RedManBrasil", "link": "https://stackoverflow.com/users/7500559/redmanbrasil"}, "edited": false, "score": 0, "creation_date": 1485961478, "post_id": 41982751, "comment_id": 71143620, "body": "And when i try to kill process 2050 it says that there are no processes with this id"}, {"owner": {"reputation": 326, "user_id": 5225070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc7c09734916468b92116a587d808e1b?s=128&d=identicon&r=PG", "display_name": "Pablo Gonzaga", "link": "https://stackoverflow.com/users/5225070/pablo-gonzaga"}, "reply_to_user": {"reputation": 25, "user_id": 7500559, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86f5bc0fabfb96e68c00b1a3812d61be?s=128&d=identicon&r=PG&f=1", "display_name": "RedManBrasil", "link": "https://stackoverflow.com/users/7500559/redmanbrasil"}, "edited": false, "score": 0, "creation_date": 1485961765, "post_id": 41982751, "comment_id": 71143832, "body": "could you please take a screenshot in order to help you?"}, {"owner": {"reputation": 25, "user_id": 7500559, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86f5bc0fabfb96e68c00b1a3812d61be?s=128&d=identicon&r=PG&f=1", "display_name": "RedManBrasil", "link": "https://stackoverflow.com/users/7500559/redmanbrasil"}, "edited": false, "score": 0, "creation_date": 1485961899, "post_id": 41982751, "comment_id": 71143932, "body": "<a href=\"http://i.imgur.com/nfXsKrB.jpg\" rel=\"nofollow noreferrer\">i.imgur.com/nfXsKrB.jpg</a>"}, {"owner": {"reputation": 326, "user_id": 5225070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc7c09734916468b92116a587d808e1b?s=128&d=identicon&r=PG", "display_name": "Pablo Gonzaga", "link": "https://stackoverflow.com/users/5225070/pablo-gonzaga"}, "reply_to_user": {"reputation": 25, "user_id": 7500559, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86f5bc0fabfb96e68c00b1a3812d61be?s=128&d=identicon&r=PG&f=1", "display_name": "RedManBrasil", "link": "https://stackoverflow.com/users/7500559/redmanbrasil"}, "edited": false, "score": 0, "creation_date": 1485962377, "post_id": 41982751, "comment_id": 71144280, "body": "cool, there&#39;s no puma server running in your system right now the line that you are seeing is the grep itself. So if you are using puma there&#39;s no server running in background.Run rails s and upload a screenshot please"}, {"owner": {"reputation": 25, "user_id": 7500559, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86f5bc0fabfb96e68c00b1a3812d61be?s=128&d=identicon&r=PG&f=1", "display_name": "RedManBrasil", "link": "https://stackoverflow.com/users/7500559/redmanbrasil"}, "edited": false, "score": 0, "creation_date": 1485962633, "post_id": 41982751, "comment_id": 71144477, "body": "<a href=\"http://i.imgur.com/S2KTArS.jpg\" rel=\"nofollow noreferrer\">i.imgur.com/S2KTArS.jpg</a>   (the entire log can be seen here <a href=\"http://pastebin.com/raw/v7tfGWBk\" rel=\"nofollow noreferrer\">pastebin.com/raw/v7tfGWBk</a> )"}, {"owner": {"reputation": 326, "user_id": 5225070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc7c09734916468b92116a587d808e1b?s=128&d=identicon&r=PG", "display_name": "Pablo Gonzaga", "link": "https://stackoverflow.com/users/5225070/pablo-gonzaga"}, "reply_to_user": {"reputation": 25, "user_id": 7500559, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86f5bc0fabfb96e68c00b1a3812d61be?s=128&d=identicon&r=PG&f=1", "display_name": "RedManBrasil", "link": "https://stackoverflow.com/users/7500559/redmanbrasil"}, "edited": false, "score": 0, "creation_date": 1485963368, "post_id": 41982751, "comment_id": 71145049, "body": "could you please try to run it using 2.3 ruby version, please"}, {"owner": {"reputation": 25, "user_id": 7500559, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86f5bc0fabfb96e68c00b1a3812d61be?s=128&d=identicon&r=PG&f=1", "display_name": "RedManBrasil", "link": "https://stackoverflow.com/users/7500559/redmanbrasil"}, "edited": false, "score": 0, "creation_date": 1485963484, "post_id": 41982751, "comment_id": 71145127, "body": "how i am going to do this? I am not using rvm"}, {"owner": {"reputation": 326, "user_id": 5225070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc7c09734916468b92116a587d808e1b?s=128&d=identicon&r=PG", "display_name": "Pablo Gonzaga", "link": "https://stackoverflow.com/users/5225070/pablo-gonzaga"}, "reply_to_user": {"reputation": 25, "user_id": 7500559, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86f5bc0fabfb96e68c00b1a3812d61be?s=128&d=identicon&r=PG&f=1", "display_name": "RedManBrasil", "link": "https://stackoverflow.com/users/7500559/redmanbrasil"}, "edited": false, "score": 0, "creation_date": 1485965610, "post_id": 41982751, "comment_id": 71146759, "body": "which ruby version manager are you using?"}, {"owner": {"reputation": 25, "user_id": 7500559, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86f5bc0fabfb96e68c00b1a3812d61be?s=128&d=identicon&r=PG&f=1", "display_name": "RedManBrasil", "link": "https://stackoverflow.com/users/7500559/redmanbrasil"}, "edited": false, "score": 0, "creation_date": 1485965772, "post_id": 41982751, "comment_id": 71146860, "body": "rbenv 1.1.0-2-g4f8925a | ruby 2.4.0p0 (2016-12-24 revision 57164) [x86_64-linux] | Rails 5.0.1"}, {"owner": {"reputation": 326, "user_id": 5225070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc7c09734916468b92116a587d808e1b?s=128&d=identicon&r=PG", "display_name": "Pablo Gonzaga", "link": "https://stackoverflow.com/users/5225070/pablo-gonzaga"}, "reply_to_user": {"reputation": 25, "user_id": 7500559, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86f5bc0fabfb96e68c00b1a3812d61be?s=128&d=identicon&r=PG&f=1", "display_name": "RedManBrasil", "link": "https://stackoverflow.com/users/7500559/redmanbrasil"}, "edited": false, "score": 0, "creation_date": 1486047759, "post_id": 41982751, "comment_id": 71187015, "body": "install 2.3.0 version and try again rbenv install 2.3.0"}], "tags": [], "owner": {"reputation": 326, "user_id": 5225070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc7c09734916468b92116a587d808e1b?s=128&d=identicon&r=PG", "display_name": "Pablo Gonzaga", "link": "https://stackoverflow.com/users/5225070/pablo-gonzaga"}, "is_accepted": false, "score": 0, "last_activity_date": 1485960811, "creation_date": 1485960811, "answer_id": 41982751, "question_id": 41982261, "link": "https://stackoverflow.com/questions/41982261/after-i-had-to-force-terminal-restart-i-cant-run-rails-s-command-again/41982751#41982751", "title": "After I Had To Force Terminal Restart, I Can&#39;t Run &quot;rails s&quot; command again", "body": "<p>You can check if puma (or server that you are using) is still running using:</p>\n\n<pre><code>ps aux | grep puma\n</code></pre>\n\n<p>You will obtain something like this:</p>\n\n<p><a href=\"https://i.stack.imgur.com/jLWa1.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/jLWa1.png\" alt=\"enter image description here\"></a></p>\n\n<p>The process in this case for puma server is 1142 so you have to kill it:</p>\n\n<pre><code>kill -9 1142\n</code></pre>\n\n<p>After that you should be able to start rails server again.</p>\n"}, {"comments": [{"owner": {"reputation": 25, "user_id": 7500559, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86f5bc0fabfb96e68c00b1a3812d61be?s=128&d=identicon&r=PG&f=1", "display_name": "RedManBrasil", "link": "https://stackoverflow.com/users/7500559/redmanbrasil"}, "edited": false, "score": 0, "creation_date": 1485963376, "post_id": 41983578, "comment_id": 71145054, "body": "i am using rbenv and not rvm"}, {"owner": {"reputation": 382, "user_id": 920265, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/857a580bdb66bcc195659d4fc1166e48?s=128&d=identicon&r=PG", "display_name": "Sooraj", "link": "https://stackoverflow.com/users/920265/sooraj"}, "reply_to_user": {"reputation": 25, "user_id": 7500559, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86f5bc0fabfb96e68c00b1a3812d61be?s=128&d=identicon&r=PG&f=1", "display_name": "RedManBrasil", "link": "https://stackoverflow.com/users/7500559/redmanbrasil"}, "edited": false, "score": 0, "creation_date": 1485963553, "post_id": 41983578, "comment_id": 71145171, "body": "my bad. Re-installing openssl and ruby will help I guess."}, {"owner": {"reputation": 25, "user_id": 7500559, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86f5bc0fabfb96e68c00b1a3812d61be?s=128&d=identicon&r=PG&f=1", "display_name": "RedManBrasil", "link": "https://stackoverflow.com/users/7500559/redmanbrasil"}, "edited": false, "score": 0, "creation_date": 1485964105, "post_id": 41983578, "comment_id": 71145626, "body": "do you have a command for that , im totally a newbie"}, {"owner": {"reputation": 382, "user_id": 920265, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/857a580bdb66bcc195659d4fc1166e48?s=128&d=identicon&r=PG", "display_name": "Sooraj", "link": "https://stackoverflow.com/users/920265/sooraj"}, "reply_to_user": {"reputation": 25, "user_id": 7500559, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86f5bc0fabfb96e68c00b1a3812d61be?s=128&d=identicon&r=PG&f=1", "display_name": "RedManBrasil", "link": "https://stackoverflow.com/users/7500559/redmanbrasil"}, "edited": false, "score": 0, "creation_date": 1485964298, "post_id": 41983578, "comment_id": 71145780, "body": "delete openssl: <code>sudo apt-get purge openssl</code>, install openssl: <code>sudo apt-get install openssl</code> and install ruby: <code>rbenv install 2.4</code>"}, {"owner": {"reputation": 25, "user_id": 7500559, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86f5bc0fabfb96e68c00b1a3812d61be?s=128&d=identicon&r=PG&f=1", "display_name": "RedManBrasil", "link": "https://stackoverflow.com/users/7500559/redmanbrasil"}, "edited": false, "score": 0, "creation_date": 1485964932, "post_id": 41983578, "comment_id": 71146290, "body": "I manage to reinstall openssl ( purge and then install ) and everything, but <code>rails s</code> continue not working"}, {"owner": {"reputation": 382, "user_id": 920265, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/857a580bdb66bcc195659d4fc1166e48?s=128&d=identicon&r=PG", "display_name": "Sooraj", "link": "https://stackoverflow.com/users/920265/sooraj"}, "reply_to_user": {"reputation": 25, "user_id": 7500559, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86f5bc0fabfb96e68c00b1a3812d61be?s=128&d=identicon&r=PG&f=1", "display_name": "RedManBrasil", "link": "https://stackoverflow.com/users/7500559/redmanbrasil"}, "edited": false, "score": 0, "creation_date": 1485964990, "post_id": 41983578, "comment_id": 71146334, "body": "Did you get the same error?"}, {"owner": {"reputation": 25, "user_id": 7500559, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86f5bc0fabfb96e68c00b1a3812d61be?s=128&d=identicon&r=PG&f=1", "display_name": "RedManBrasil", "link": "https://stackoverflow.com/users/7500559/redmanbrasil"}, "edited": false, "score": 0, "creation_date": 1485965170, "post_id": 41983578, "comment_id": 71146456, "body": "Yes, exactly the same error, maybe something wrong with Cipher, do you know what it it? And I forgot to say that the command <code>rbenv install 2.4</code> returned an error: <a href=\"http://i.imgur.com/n29MuVx.jpg\" rel=\"nofollow noreferrer\">i.imgur.com/n29MuVx.jpg</a>"}, {"owner": {"reputation": 382, "user_id": 920265, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/857a580bdb66bcc195659d4fc1166e48?s=128&d=identicon&r=PG", "display_name": "Sooraj", "link": "https://stackoverflow.com/users/920265/sooraj"}, "reply_to_user": {"reputation": 25, "user_id": 7500559, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86f5bc0fabfb96e68c00b1a3812d61be?s=128&d=identicon&r=PG&f=1", "display_name": "RedManBrasil", "link": "https://stackoverflow.com/users/7500559/redmanbrasil"}, "edited": false, "score": 0, "creation_date": 1486011042, "post_id": 41983578, "comment_id": 71165724, "body": "Updated the answer, can you try that?"}, {"owner": {"reputation": 25, "user_id": 7500559, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86f5bc0fabfb96e68c00b1a3812d61be?s=128&d=identicon&r=PG&f=1", "display_name": "RedManBrasil", "link": "https://stackoverflow.com/users/7500559/redmanbrasil"}, "edited": false, "score": 0, "creation_date": 1486043343, "post_id": 41983578, "comment_id": 71183858, "body": "It worked! Thank you"}], "tags": [], "owner": {"reputation": 382, "user_id": 920265, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/857a580bdb66bcc195659d4fc1166e48?s=128&d=identicon&r=PG", "display_name": "Sooraj", "link": "https://stackoverflow.com/users/920265/sooraj"}, "is_accepted": true, "score": -1, "last_activity_date": 1486010998, "last_edit_date": 1486010998, "creation_date": 1485963091, "answer_id": 41983578, "question_id": 41982261, "link": "https://stackoverflow.com/questions/41982261/after-i-had-to-force-terminal-restart-i-cant-run-rails-s-command-again/41983578#41983578", "title": "After I Had To Force Terminal Restart, I Can&#39;t Run &quot;rails s&quot; command again", "body": "<p>Restore previous version of openssl and try</p>\n\n<pre><code>gem uninstall openssl -v 2.0.3\n\ngem install openssl -v 2.0.2\n</code></pre>\n"}], "owner": {"reputation": 25, "user_id": 7500559, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86f5bc0fabfb96e68c00b1a3812d61be?s=128&d=identicon&r=PG&f=1", "display_name": "RedManBrasil", "link": "https://stackoverflow.com/users/7500559/redmanbrasil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "closed_date": 1486011707, "accepted_answer_id": 41983578, "answer_count": 2, "score": -1, "last_activity_date": 1486010998, "creation_date": 1485959485, "last_edit_date": 1485960149, "question_id": 41982261, "link": "https://stackoverflow.com/questions/41982261/after-i-had-to-force-terminal-restart-i-cant-run-rails-s-command-again", "closed_reason": "Not suitable for this site", "title": "After I Had To Force Terminal Restart, I Can&#39;t Run &quot;rails s&quot; command again", "body": "<p>I was using the terminal as always, when it froze. I had to restart the VM (Ubuntu x64) and load it again. But after restarting, I could not use the command <code>rails s</code> again, and it logged this on the terminal:\n<a href=\"http://pastebin.com/raw/v7tfGWBk\" rel=\"nofollow noreferrer\">http://pastebin.com/raw/v7tfGWBk</a></p>\n\n<p>Ps: I already tried to run bundle install/update and look for doubled ruby processes on System Monitor</p>\n\n<p>Ps2: I can still use other commands such as <code>rails new test12</code></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 19261, "user_id": 4758119, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/F4dJY.jpg?s=128&g=1", "display_name": "Deepak Mahakale", "link": "https://stackoverflow.com/users/4758119/deepak-mahakale"}, "edited": false, "score": 0, "creation_date": 1485958471, "post_id": 41981827, "comment_id": 71141529, "body": "When you say render rails will try to find partial."}, {"owner": {"reputation": 19261, "user_id": 4758119, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/F4dJY.jpg?s=128&g=1", "display_name": "Deepak Mahakale", "link": "https://stackoverflow.com/users/4758119/deepak-mahakale"}, "edited": false, "score": 0, "creation_date": 1485958486, "post_id": 41981827, "comment_id": 71141539, "body": "or you can pass template"}, {"owner": {"reputation": 3706, "user_id": 3700798, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LpxP2.png?s=128&g=1", "display_name": "svelandiag", "link": "https://stackoverflow.com/users/3700798/svelandiag"}, "edited": false, "score": 0, "creation_date": 1485966217, "post_id": 41981827, "comment_id": 71147162, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/11283675/pass-parameter-in-render-rails-3\">pass parameter in render - rails 3</a>"}], "answers": [{"tags": [], "owner": {"reputation": 19261, "user_id": 4758119, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/F4dJY.jpg?s=128&g=1", "display_name": "Deepak Mahakale", "link": "https://stackoverflow.com/users/4758119/deepak-mahakale"}, "is_accepted": false, "score": 1, "last_activity_date": 1485958547, "creation_date": 1485958547, "answer_id": 41981947, "question_id": 41981827, "link": "https://stackoverflow.com/questions/41981827/render-path-with-params/41981947#41981947", "title": "Render path with params", "body": "<p>You can use this form</p>\n\n<pre><code>render template: \"carousels/items/new\", locals: {caroulsel: caroulsel, type: \"image\"}\n</code></pre>\n"}], "owner": {"reputation": 133, "user_id": 6718776, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/0Iz68.jpg?s=128&g=1", "display_name": "Jhonatan Martins", "link": "https://stackoverflow.com/users/6718776/jhonatan-martins"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1107, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1485964013, "creation_date": 1485958189, "last_edit_date": 1485964013, "question_id": 41981827, "link": "https://stackoverflow.com/questions/41981827/render-path-with-params", "title": "Render path with params", "body": "<p>I have two models, Carousel and Item, their relation is many to many.</p>\n\n<p>In routes.rb:</p>\n\n<pre><code>resources :carousels do\n  resources :items\nend\n</code></pre>\n\n<p>I'm trying to render new items template with an enumerator param(type) in a modal in my carousel index. </p>\n\n<p>Render code: </p>\n\n<pre><code>render new_carousel_item_path(caroulsel), type: \"image\"\n</code></pre>\n\n<p>But I'm having the following issue: </p>\n\n<pre><code>ActionView::MissingTemplate at /carousels\nMissing partial carousels/1/items/_new with {:locale=&gt;[:\"pt-BR\"], :formats=&gt;[:html], :variants=&gt;[], :handlers=&gt;[:erb, :builder, :raw, :ruby, :slim, :coffee]}\n</code></pre>\n\n<p>Any ideas?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5", "rack"], "answers": [{"comments": [{"owner": {"reputation": 3373, "user_id": 514812, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/d6945d880db4f0e3bd75ad5cf76f2fa9?s=128&d=identicon&r=PG", "display_name": "Wasabi Developer", "link": "https://stackoverflow.com/users/514812/wasabi-developer"}, "edited": false, "score": 0, "creation_date": 1486463982, "post_id": 41982658, "comment_id": 71345422, "body": "Thanks for taking the time and replying eiko. Question about the .match method, does this match the Post#show action via a route is that how that works? So if the post path is &quot;posts/hello-world/&quot; this would match? Trying to understand how if env[&#39;REQUEST_PATH&#39;].match(/\\/posts\\/show\\/?/) works. Thanks again"}, {"owner": {"reputation": 4150, "user_id": 7470620, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/49f3026fe13841e41d1805178eed9a3c?s=128&d=identicon&r=PG", "display_name": "eiko", "link": "https://stackoverflow.com/users/7470620/eiko"}, "reply_to_user": {"reputation": 3373, "user_id": 514812, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/d6945d880db4f0e3bd75ad5cf76f2fa9?s=128&d=identicon&r=PG", "display_name": "Wasabi Developer", "link": "https://stackoverflow.com/users/514812/wasabi-developer"}, "edited": false, "score": 0, "creation_date": 1486490321, "post_id": 41982658, "comment_id": 71363956, "body": "Yeah, .match uses a regex to analyse the path of the incoming request. I chose /posts/show/ as a generic path because I didn&#39;t know what your routes.rb file looked like. If your posts are at the path /posts/name-of-post, then my regex won&#39;t work. Try replacing it with this: <code>&#47;\\&#47;posts\\&#47;[\\w&#39;-]+\\&#47;?&#47;</code>"}, {"owner": {"reputation": 3373, "user_id": 514812, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/d6945d880db4f0e3bd75ad5cf76f2fa9?s=128&d=identicon&r=PG", "display_name": "Wasabi Developer", "link": "https://stackoverflow.com/users/514812/wasabi-developer"}, "edited": false, "score": 0, "creation_date": 1489130411, "post_id": 41982658, "comment_id": 72545725, "body": "Hi @eiko. I finally got the regex I wanted (testing via the Rails console) but I&#39;m getting an error when starting the app: undefined method `handler&#39; for #&lt;Rack::Tracker:0x007f9e4e93a6e0&gt;, relating to       tracker.handler :google_tag_manager, { container: ENV[&#39;GTM_CONTAINER_ID&#39;] }. Is there something I&#39;m missing in terms of running Rack Tracker within the middleware call method? Thanks again"}, {"owner": {"reputation": 4150, "user_id": 7470620, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/49f3026fe13841e41d1805178eed9a3c?s=128&d=identicon&r=PG", "display_name": "eiko", "link": "https://stackoverflow.com/users/7470620/eiko"}, "reply_to_user": {"reputation": 3373, "user_id": 514812, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/d6945d880db4f0e3bd75ad5cf76f2fa9?s=128&d=identicon&r=PG", "display_name": "Wasabi Developer", "link": "https://stackoverflow.com/users/514812/wasabi-developer"}, "edited": false, "score": 0, "creation_date": 1489161455, "post_id": 41982658, "comment_id": 72564967, "body": "@WasabiDeveloper that was my mistake, the only way to set handlers in Rack::Tracker is via a block on <code>.new</code>. i went ahead and updated my answer with the proper syntax. let me know if it works!"}], "tags": [], "owner": {"reputation": 4150, "user_id": 7470620, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/49f3026fe13841e41d1805178eed9a3c?s=128&d=identicon&r=PG", "display_name": "eiko", "link": "https://stackoverflow.com/users/7470620/eiko"}, "is_accepted": false, "score": 1, "last_activity_date": 1489161376, "last_edit_date": 1489161376, "creation_date": 1485960572, "answer_id": 41982658, "question_id": 41981557, "link": "https://stackoverflow.com/questions/41981557/how-skip-config-middleware-use-for-a-specific-controller-action-in-rails-5/41982658#41982658", "title": "How skip config.middleware.use for a specific controller action in Rails 5", "body": "<p>Middleware is called before controller logic is even reached, so there's no way to limit middleware based on actions.</p>\n\n<p>That being said, middleware CAN see which route is being called and can act conditionally according to route. I did a quick google search and it looks like rack-tracker does not have a built-in option for doing this. However, you can circumvent this by wrapping this middleware in another middleware, like so:</p>\n\n<pre><code>class ConditionalTracker\n  def initialize(app)\n    @app = app\n  end\n\n  def call(env)\n    if env['REQUEST_PATH'].match(/\\/posts\\/show\\/?/)\n      tracker = Rack::Tracker.new(@app) do\n        handler :google_tag_manager, { container: ENV['GTM_CONTAINER_ID'] }\n      end\n      env = tracker.call(env)\n    end\n\n    @app.call(env)\n  end\nend\n</code></pre>\n\n<p>and then:</p>\n\n<pre><code># config/application.rb\n\nconfig.middleware.use ConditionalTracker\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 181, "user_id": 1781212, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8f91049e14ba97ab9b6f5269384bcb5?s=128&d=identicon&r=PG", "display_name": "pedrosfdcarneiro", "link": "https://stackoverflow.com/users/1781212/pedrosfdcarneiro"}, "is_accepted": false, "score": 2, "last_activity_date": 1538165494, "creation_date": 1538165494, "answer_id": 52562082, "question_id": 41981557, "link": "https://stackoverflow.com/questions/41981557/how-skip-config-middleware-use-for-a-specific-controller-action-in-rails-5/52562082#52562082", "title": "How skip config.middleware.use for a specific controller action in Rails 5", "body": "<p>You can provide a <code>lambda</code> to the <code>container</code> option:</p>\n\n<pre><code>config.middleware.use(Rack::Tracker) do\n  handler :google_tag_manager, { container: lambda { |env| ENV['GTM_CONTAINER_ID'] if env['REQUEST_PATH'].match(/\\/posts\\/\\d+/) } }\nend\n</code></pre>\n\n<p>This lambda will be evaluated in each request and give you access to the <code>env</code> object.\nWith that you can return a string for the google tag manager container based on the current request path.</p>\n"}, {"tags": [], "owner": {"reputation": 6039, "user_id": 2137458, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8cfca832ee746f3e3d9971148f52dc64?s=128&d=identicon&r=PG", "display_name": "NM Pennypacker", "link": "https://stackoverflow.com/users/2137458/nm-pennypacker"}, "is_accepted": false, "score": 0, "last_activity_date": 1582137524, "creation_date": 1582137524, "answer_id": 60307153, "question_id": 41981557, "link": "https://stackoverflow.com/questions/41981557/how-skip-config-middleware-use-for-a-specific-controller-action-in-rails-5/60307153#60307153", "title": "How skip config.middleware.use for a specific controller action in Rails 5", "body": "<p>You can also check the values of <code>env['action_controller.instance'].params['controller']</code> and <code>env['action_controller.instance'].params['action']</code>, so in your case:</p>\n\n<pre><code>class ConditionalTracker\n  def initialize(app)\n    @app = app\n  end\n\n  def call(env)\n    if env['action_controller.instance'].params['controller'] == 'posts' &amp;&amp;\n       env['action_controller.instance'].params['action'] == 'show'\n      tracker = Rack::Tracker.new(@app) do\n        handler :google_tag_manager, { container: ENV['GTM_CONTAINER_ID'] }\n      end\n      env = tracker.call(env)\n    end\n\n    @app.call(env)\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 3373, "user_id": 514812, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/d6945d880db4f0e3bd75ad5cf76f2fa9?s=128&d=identicon&r=PG", "display_name": "Wasabi Developer", "link": "https://stackoverflow.com/users/514812/wasabi-developer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2940, "favorite_count": 0, "answer_count": 3, "score": 5, "last_activity_date": 1582137524, "creation_date": 1485957340, "last_edit_date": 1485957911, "question_id": 41981557, "link": "https://stackoverflow.com/questions/41981557/how-skip-config-middleware-use-for-a-specific-controller-action-in-rails-5", "title": "How skip config.middleware.use for a specific controller action in Rails 5", "body": "<p>Is there a way to setup <code>config.middleware.use</code> to exclude / ignore / skip a specific controller action?</p>\n\n<p>For example, if I wanted to exclude the <code>Post#show</code> controller action.</p>\n\n<p>I'm using <a href=\"https://github.com/railslove/rack-tracker\" rel=\"noreferrer\">https://github.com/railslove/rack-tracker</a> to test Google Analytics/Tag Manager.</p>\n\n<pre><code>  # Rack Tracker config\n  config.middleware.use(Rack::Tracker) do\n    handler :google_tag_manager, { container: ENV['GTM_CONTAINER_ID'] }\n  end\n</code></pre>\n\n<p>I thought I could use a condition like:</p>\n\n<pre><code>  # Rack Tracker config\n  config.middleware.use(Rack::Tracker) do\n    handler :google_tag_manager, { container: ENV['GTM_CONTAINER_ID'] } if app.route != ApplicationController::PostController.show\n  end\n</code></pre>\n\n<p>Any help is much appreciated.</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 56328, "user_id": 4265352, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-lzAUc5pYb24/AAAAAAAAAAI/AAAAAAAAAGQ/q3h7bZUnqrs/photo.jpg?sz=128", "display_name": "axiac", "link": "https://stackoverflow.com/users/4265352/axiac"}, "edited": false, "score": 3, "creation_date": 1485956363, "post_id": 41981151, "comment_id": 71140031, "body": "Does <code>29%2F10%2F2015</code> look like a date for you?"}, {"owner": {"reputation": 3859, "user_id": 447458, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/3856ab1ebfb234877daa2092ed0525a2?s=128&d=identicon&r=PG", "display_name": "Fernando", "link": "https://stackoverflow.com/users/447458/fernando"}, "reply_to_user": {"reputation": 56328, "user_id": 4265352, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-lzAUc5pYb24/AAAAAAAAAAI/AAAAAAAAAGQ/q3h7bZUnqrs/photo.jpg?sz=128", "display_name": "axiac", "link": "https://stackoverflow.com/users/4265352/axiac"}, "edited": false, "score": 0, "creation_date": 1485956529, "post_id": 41981151, "comment_id": 71140145, "body": "@axiac Yes, but it&#39;s url encoded."}, {"owner": {"reputation": 56328, "user_id": 4265352, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-lzAUc5pYb24/AAAAAAAAAAI/AAAAAAAAAGQ/q3h7bZUnqrs/photo.jpg?sz=128", "display_name": "axiac", "link": "https://stackoverflow.com/users/4265352/axiac"}, "edited": false, "score": 3, "creation_date": 1485956636, "post_id": 41981151, "comment_id": 71140230, "body": "Then url-decode it first. <code>Date</code> doesn&#39;t know about url encoding. And, btw, <code>29%2F10%2F2015</code> is <code>29&#47;10&#47;2015</code>, not <code>2017-01-29</code> as it is &quot;parsed&quot; by ruby in your first example. How do you mean this &quot;works fine&quot;?"}, {"owner": {"reputation": 3392, "user_id": 2717416, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc2a55ce261e8901476f37dafae815a?s=128&d=identicon&r=PG&f=1", "display_name": "Jan Zeiseweis", "link": "https://stackoverflow.com/users/2717416/jan-zeiseweis"}, "edited": false, "score": 0, "creation_date": 1485956677, "post_id": 41981151, "comment_id": 71140275, "body": "It&#39;s url encoded and it&#39;s actually the <code>2015-10-29</code> not the <code>2015-01-29</code> so your first attempt is already wrong..."}], "answers": [{"comments": [{"owner": {"reputation": 56328, "user_id": 4265352, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-lzAUc5pYb24/AAAAAAAAAAI/AAAAAAAAAGQ/q3h7bZUnqrs/photo.jpg?sz=128", "display_name": "axiac", "link": "https://stackoverflow.com/users/4265352/axiac"}, "edited": false, "score": 0, "creation_date": 1485957326, "post_id": 41981339, "comment_id": 71140746, "body": "Looks much better now :-)"}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1485958006, "post_id": 41981339, "comment_id": 71141204, "body": "If OP doesn&#39;t get reliable results, <code>Date.parse</code> isn&#39;t the right tool for the job."}], "tags": [], "owner": {"reputation": 9602, "user_id": 3607136, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/NRFso.jpg?s=128&g=1", "display_name": "Gagan Gami", "link": "https://stackoverflow.com/users/3607136/gagan-gami"}, "is_accepted": false, "score": 2, "last_activity_date": 1485956898, "last_edit_date": 1485956898, "creation_date": 1485956662, "answer_id": 41981339, "question_id": 41981151, "link": "https://stackoverflow.com/questions/41981151/date-parse-fails-when-system-date-is-2017-02-01/41981339#41981339", "title": "Date.parse fails when system date is 2017-02-01", "body": "<p><code>%2F</code> is the URL Encoded value of the Forward Slash (<code>/</code>)</p>\n\n<p>so you need to <strong><code>decode</code></strong> your <strong><code>url-encoded string</code></strong>  first</p>\n\n<pre><code>&gt; require 'open-uri'\n#=&gt; true \n&gt; string = \"29%2F10%2F2015\"\n#=&gt; \"29%2F10%2F2015\" \n&gt; date = URI::decode(string)\n#=&gt; \"29/10/2015\" \n&gt; Date.parse(date)\n#=&gt; #&lt;Date: 2015-10-29 ((2457325j,0s,0n),+0s,2299161j)&gt; \n</code></pre>\n\n<blockquote>\n  <p>Is 2017-02-01 a special date for ruby?</p>\n</blockquote>\n\n<p>no, it's not special ;)</p>\n\n<pre><code>&gt; s = \"2017-02-01\"\n&gt; Date.parse(s)\n#=&gt; #&lt;Date: 2017-02-01 ((2457786j,0s,0n),+0s,2299161j)&gt;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 45322, "user_id": 421705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/581b1760881c962648f99d6040d41829?s=128&d=identicon&r=PG", "display_name": "Holger Just", "link": "https://stackoverflow.com/users/421705/holger-just"}, "edited": false, "score": 0, "creation_date": 1485962332, "post_id": 41981442, "comment_id": 71144248, "body": "(1) <code>Date.parse</code> does not shellout to the base-OS&#39;s <code>date</code> executable. It has its own heuristics. (2) <code>Date.parse</code> is able to correctly parse ISO8601 strings and prefers <code>YYYY-MM-DD</code> to <code>YYYY-DD-MM</code>. Using <code>strptime</code> is still a better idea though. +1 for that."}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "reply_to_user": {"reputation": 45322, "user_id": 421705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/581b1760881c962648f99d6040d41829?s=128&d=identicon&r=PG", "display_name": "Holger Just", "link": "https://stackoverflow.com/users/421705/holger-just"}, "edited": false, "score": 0, "creation_date": 1485963725, "post_id": 41981442, "comment_id": 71145294, "body": "I cannot explain why the current date would have any influence on date.parse otherwise. I successfully reproduced the questions behavior by changing system date. Using timecop gem wasn&#39;t enough"}, {"owner": {"reputation": 45322, "user_id": 421705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/581b1760881c962648f99d6040d41829?s=128&d=identicon&r=PG", "display_name": "Holger Just", "link": "https://stackoverflow.com/users/421705/holger-just"}, "edited": false, "score": 0, "creation_date": 1485963981, "post_id": 41981442, "comment_id": 71145521, "body": "See my answer regarding the influence of the current date :)"}, {"owner": {"reputation": 2558, "user_id": 1157242, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a9d4b10e0b35be38592bed9e4e5457e3?s=128&d=identicon&r=PG", "display_name": "PJSCopeland", "link": "https://stackoverflow.com/users/1157242/pjscopeland"}, "edited": false, "score": 0, "creation_date": 1580675411, "post_id": 41981442, "comment_id": 106165672, "body": "<code>02-01</code> is ambiguous; <code>2017-02-01</code> is not. Most of the world uses D-M-Y, America uses M-D-Y, Japan uses Y-M-D (and so should any coder), but no-one uses Y-D-M."}], "tags": [], "owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "is_accepted": false, "score": 2, "last_activity_date": 1485965060, "last_edit_date": 1485965060, "creation_date": 1485957013, "answer_id": 41981442, "question_id": 41981151, "link": "https://stackoverflow.com/questions/41981151/date-parse-fails-when-system-date-is-2017-02-01/41981442#41981442", "title": "Date.parse fails when system date is 2017-02-01", "body": "<p>You have three problems : </p>\n\n<ul>\n<li>'%2F' shouldn't be here</li>\n<li>'2017-02-01' could be \"February 1\" or \"January 2\".</li>\n<li><code>Date.parse</code> relies on system date to parse the string.</li>\n</ul>\n\n<p>If you know which format you have, you really should use <a href=\"https://ruby-doc.org/stdlib-2.1.1/libdoc/date/rdoc/Date.html#method-c-strptime\" rel=\"nofollow noreferrer\"><code>Date.strptime</code></a> :</p>\n\n<pre><code>require 'date'\nrequire 'uri'\n\ndef parse_url_date(url_date)\n  Date.strptime(URI.unescape(url_date), '%d/%m/%Y')\nend\n\nputs parse_url_date(\"29%2F10%2F2015\")\n#=&gt; 2015-10-29\nputs parse_url_date(\"01%2F02%2F2017\")\n#=&gt; 2017-02-01\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 56328, "user_id": 4265352, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-lzAUc5pYb24/AAAAAAAAAAI/AAAAAAAAAGQ/q3h7bZUnqrs/photo.jpg?sz=128", "display_name": "axiac", "link": "https://stackoverflow.com/users/4265352/axiac"}, "is_accepted": false, "score": 0, "last_activity_date": 1485957268, "creation_date": 1485957268, "answer_id": 41981536, "question_id": 41981151, "link": "https://stackoverflow.com/questions/41981151/date-parse-fails-when-system-date-is-2017-02-01/41981536#41981536", "title": "Date.parse fails when system date is 2017-02-01", "body": "<p>If you know your \"dates\" are URL-encoded then you have to URL-decode them first. Use <a href=\"https://ruby-doc.org/stdlib-2.4.0/libdoc/uri/rdoc/URI/Escape.html#method-i-unescape\" rel=\"nofollow noreferrer\"><code>URI.unescape()</code></a> for this then pass the value it returns to <a href=\"http://ruby-doc.org/stdlib-2.4.0/libdoc/date/rdoc/Date.html#method-c-parse\" rel=\"nofollow noreferrer\"><code>Date.parse()</code></a>.</p>\n\n<pre><code>Date.parse(URI.unescape(\"29%2F10%2F2015\"))\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 45322, "user_id": 421705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/581b1760881c962648f99d6040d41829?s=128&d=identicon&r=PG", "display_name": "Holger Just", "link": "https://stackoverflow.com/users/421705/holger-just"}, "reply_to_user": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1485967683, "post_id": 41983236, "comment_id": 71148077, "body": "It is (I just credited you explicitly). The important part of the answer is the first half though."}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1485969602, "post_id": 41983236, "comment_id": 71149223, "body": "Better than nothing, thanks. Do you happen to know which method is called to get the current date by <code>Date.parse</code>?"}, {"owner": {"reputation": 45322, "user_id": 421705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/581b1760881c962648f99d6040d41829?s=128&d=identicon&r=PG", "display_name": "Holger Just", "link": "https://stackoverflow.com/users/421705/holger-just"}, "reply_to_user": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 1, "creation_date": 1485970942, "post_id": 41983236, "comment_id": 71150106, "body": "It calls the C-method implementing <code>Date.today</code> (i.e. <code>date_s_today</code> from <code>ext&#47;date&#47;date_core.c</code>). However, since this is internally in C, it doesn&#39;t seem to use Ruby&#39;s higher-level method dispatcher which is why overriding <code>Date.today</code> doesn&#39;t change this."}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1485971118, "post_id": 41983236, "comment_id": 71150206, "body": "Makes sense. Thanks!"}], "tags": [], "owner": {"reputation": 45322, "user_id": 421705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/581b1760881c962648f99d6040d41829?s=128&d=identicon&r=PG", "display_name": "Holger Just", "link": "https://stackoverflow.com/users/421705/holger-just"}, "is_accepted": false, "score": 3, "last_activity_date": 1485967698, "last_edit_date": 1485967698, "creation_date": 1485962180, "answer_id": 41983236, "question_id": 41981151, "link": "https://stackoverflow.com/questions/41981151/date-parse-fails-when-system-date-is-2017-02-01/41983236#41983236", "title": "Date.parse fails when system date is 2017-02-01", "body": "<p><code>Date.parse</code> is a method which tries to parse a date from the given string using a number of heuristics in order to support many different formats without specifying the actual format. Thus, unless the format is clear, it is always possible that Ruby come to different conclusions than you.</p>\n\n<p>In order to get an idea how Ruby parses your string, you can use</p>\n\n<pre><code>Date._parse(\"29%2F10%2F2015\")\n# =&gt; {:mday=&gt;29}\n</code></pre>\n\n<p>As you can see, Ruby is able to get the day of month as 29 from the passed string but doesn't get any additional information. In order to form a valid date, Ruby substitutes the missing parts from the current date. Now, since February 2017 only has 28 days, the resulting date is invalid here but would be valid in January.</p>\n\n<p>Still, the result is not what you actually seem to want. Instead, try to first transform your date into a more easily parsed string and try again using the approach by Eric Duminil in another answer to this question:</p>\n\n<pre><code>require 'date'\nrequire 'uri'\n\nstring = '29%2F10%2F2015'\nDate.strptime(URI.unescape(string), '%d/%m/%Y')\n# =&gt; #&lt;Date: 2015-10-29 ((2457325j,0s,0n),+0s,2299161j)&gt;\n</code></pre>\n\n<p>As you can see, with <a href=\"https://ruby-doc.org/stdlib/libdoc/date/rdoc/Date.html#method-c-strptime\" rel=\"nofollow noreferrer\"><code>Date.strptime</code></a>, you can specify the exact format of the parsed string and can thus be sure it either gets correctly parsed or errors out.</p>\n"}], "owner": {"reputation": 3859, "user_id": 447458, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/3856ab1ebfb234877daa2092ed0525a2?s=128&d=identicon&r=PG", "display_name": "Fernando", "link": "https://stackoverflow.com/users/447458/fernando"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 101, "favorite_count": 0, "answer_count": 4, "score": -1, "last_activity_date": 1485967698, "creation_date": 1485956133, "last_edit_date": 1485956428, "question_id": 41981151, "link": "https://stackoverflow.com/questions/41981151/date-parse-fails-when-system-date-is-2017-02-01", "title": "Date.parse fails when system date is 2017-02-01", "body": "<p>I'm experiencing an strange issue with Date.parse method.</p>\n\n<p>I tried several ruby versions and it happens in all of them. The tests below were run in version 2.1.10.</p>\n\n<p>Yesterday all my tests were passing but today they started to fail. The cause is a Date.parse call that started to raise an exception.</p>\n\n<p>If system date is 2017-01-31, it works fine:</p>\n\n<pre><code>2.1.10 :002 &gt; system('date')\nTer 31 Jan 2017 11:24:08 BRST\n =&gt; true\n2.1.10 :003 &gt; Date.parse(\"29%2F10%2F2015\")\n =&gt; #&lt;Date: 2017-01-29 ((2457783j,0s,0n),+0s,2299161j)&gt;\n</code></pre>\n\n<p>But if system date is today, it fails:</p>\n\n<pre><code>2.1.10 :002 &gt; system('date')\nQua  1 Fev 2017 11:24:27 BRST\n =&gt; true\n2.1.10 :003 &gt; Date.parse(\"29%2F10%2F2015\")\nArgumentError: invalid date\n        from (irb):3:in `parse'\n        from (irb):3\n        from /Users/fernando/.rvm/rubies/ruby-2.1.10/bin/irb:11:in `&lt;main&gt;'\n</code></pre>\n\n<p>I probably can get around this by using another method to parse this date but I'm interested in why it started to fail today.</p>\n\n<p>Is 2017-02-01 a special date for ruby?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "jwt", "ruby-on-rails-5", "auth0"], "answers": [{"comments": [{"owner": {"reputation": 224, "user_id": 5818196, "user_type": "registered", "accept_rate": 35, "profile_image": "https://lh5.googleusercontent.com/-63kFxHwppXg/AAAAAAAAAAI/AAAAAAAAAD4/3wEIl_QQWs0/photo.jpg?sz=128", "display_name": "SiD Devesh", "link": "https://stackoverflow.com/users/5818196/sid-devesh"}, "edited": false, "score": 0, "creation_date": 1485955584, "post_id": 41980334, "comment_id": 71139478, "body": "Looking at the source of knock gem, behavior when no Authorization is in header makes sense...I just can&#39;t get it to work when there is correct header in request...<a href=\"http://localhost:300/api/v1/apps\" rel=\"nofollow noreferrer\">localhost:300/api/v1/apps</a> @Michael"}], "tags": [], "owner": {"reputation": 390, "user_id": 1781525, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/54aae1ed700ff393a3aff4e02f03461d?s=128&d=identicon&r=PG", "display_name": "michaeldever", "link": "https://stackoverflow.com/users/1781525/michaeldever"}, "is_accepted": false, "score": 0, "last_activity_date": 1485953607, "creation_date": 1485953607, "answer_id": 41980334, "question_id": 41979618, "link": "https://stackoverflow.com/questions/41979618/filter-chain-halted-as-authenticate-user-rendered-or-redirected-completed-401-u/41980334#41980334", "title": "Filter chain halted as :authenticate_user rendered or redirected Completed 401 Unauthorized in 1ms (ActiveRecord: 0.0ms)", "body": "<p>If you remove the <code>Authorization</code> header, the <code>authenticate_user</code> method will fail, as it can not authenticate the user, this is expected behaviour and what you should expect to see in your log.</p>\n\n<p>What URL are you hitting to receive the response in the title?</p>\n"}, {"tags": [], "owner": {"reputation": 224, "user_id": 5818196, "user_type": "registered", "accept_rate": 35, "profile_image": "https://lh5.googleusercontent.com/-63kFxHwppXg/AAAAAAAAAAI/AAAAAAAAAD4/3wEIl_QQWs0/photo.jpg?sz=128", "display_name": "SiD Devesh", "link": "https://stackoverflow.com/users/5818196/sid-devesh"}, "is_accepted": false, "score": 0, "last_activity_date": 1486012853, "creation_date": 1486012853, "answer_id": 41994713, "question_id": 41979618, "link": "https://stackoverflow.com/questions/41979618/filter-chain-halted-as-authenticate-user-rendered-or-redirected-completed-401-u/41994713#41994713", "title": "Filter chain halted as :authenticate_user rendered or redirected Completed 401 Unauthorized in 1ms (ActiveRecord: 0.0ms)", "body": "<p>OK, figured this out...<br>\nFirst,<br>\nthe secret key I got from auth0 was not base64 encoded, so the commented out line in the generated initializer of knock (<code>/config/initializers/knock.rb</code>) for auth0, which decoded the secret key as base64 ended up giving wrong key,\nNow I am using this:</p>\n\n<pre><code>config.token_secret_signature_key = -&gt; { Rails.application.secrets.auth0_client_secret }\n</code></pre>\n\n<p>Second,<br>\nI was only able to figure this out by overriding <code>define_current_entity_getter</code> method in my <code>application_controller.rb</code> and removing the <code>rescue</code>. This agressive rescue causes it to fail silently and needs to be fixed.</p>\n"}], "owner": {"reputation": 224, "user_id": 5818196, "user_type": "registered", "accept_rate": 35, "profile_image": "https://lh5.googleusercontent.com/-63kFxHwppXg/AAAAAAAAAAI/AAAAAAAAAD4/3wEIl_QQWs0/photo.jpg?sz=128", "display_name": "SiD Devesh", "link": "https://stackoverflow.com/users/5818196/sid-devesh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1964, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1486012853, "creation_date": 1485951410, "question_id": 41979618, "link": "https://stackoverflow.com/questions/41979618/filter-chain-halted-as-authenticate-user-rendered-or-redirected-completed-401-u", "title": "Filter chain halted as :authenticate_user rendered or redirected Completed 401 Unauthorized in 1ms (ActiveRecord: 0.0ms)", "body": "<p>I am trying to setup a Rails API using auth0 for authentication. I have followed the instructions at <a href=\"https://auth0.com/docs/quickstart/backend/rails\" rel=\"nofollow noreferrer\">Auth0 rails API quickstart</a>.<br>\nThis is how my User model is:  </p>\n\n<pre><code>class User &lt; ActiveRecord::Base\n  acts_as_paranoid\n  has_secure_password\n  has_many :developed_apps, class_name: \"App\", foreign_key: \"developer_id\", dependent: :destroy\n  has_many :installations, foreign_key: \"user_id\", dependent: :destroy\n  has_many :non_installations, foreign_key: \"user_id\", dependent: :destroy\n  has_many :installed_apps, through: :installations, class_name: \"App\", source: :app#, counter_cache: true\n  has_many :non_installed_apps, through: :non_installations, class_name: \"App\", source: :app#, counter_cache: true\n  validates :auth0_id_string, uniqueness: true, presence: true\n  def self.from_token_payload payload\n    # Returns a valid user, `nil` or raise\n    # e.g.\n    self.find_or_create_by!(auth0_id_string: payload[\"sub\"])\n    #self.first\n    #nil\n  end\nend\n</code></pre>\n\n<p>I have just <code>id</code>, <code>auth0_id_string</code> and <code>password_digest</code> fields in user column of db.<br>\nMy controllers and routes are namespaced like:<br>\n<code>/controllers/api/v1/apps_controller.rb</code>  </p>\n\n<pre><code>module Api\n  module V1\n    class AppsController &lt; ApplicationController\n      before_action :authenticate_user\n      before_action :set_app, only: [:show, :update, :destroy]\n      before_action :require_developer, only: [:update, :destroy]\n\n      ITEMS_PER_PAGE = 2\n\n      def index\n        if params[:page]\n          @page_no = params[:page].to_i\n        else\n          @page_no = 1\n        end\n\n        if !@page_no.to_i.between?(1,((App.count.to_f/ITEMS_PER_PAGE).ceil))\n          render json: { errors: [\"Invalid page number.\"] }, status: 400 and return\n        end\n\n        @apps = App.offset((@page_no - 1) * ITEMS_PER_PAGE).limit(ITEMS_PER_PAGE)\n        render json: { :last =&gt; (@page_no == (App.count.to_f/ITEMS_PER_PAGE).ceil), :data =&gt; @apps }\n      end\n\n      def show\n        render json: @app\n      end\n\n      def create\n        @app = App.new(app_params)\n        @app.developer = current_user\n\n        if @app.save\n          render json: @app\n        else\n           render json: { errors: [\"Invalid attributes.\"] }, status: 400\n        end\n      end\n\n      def update\n        if @app.update(app_params)\n          render json: @app\n        else\n          render json: { errors: [\"Invalid attributes.\"] }, status: 400\n        end\n      end\n\n      def destroy\n        if @app.destroy\n          render json: { errors: [\"Deletion successful.\"] }, status: 200\n        else\n          render json: { errors: [\"Deletion failed.\"] }, status: 500\n        end\n      end\n\n      private\n\n      def set_app\n        @app = App.find(params[:id])\n      end\n\n      def require_developer\n        if current_user != @app.developer\n          render json: { errors: [\"Authorized users only.\"] }, status: :unauthorized\n        end\n      end\n\n      def app_params\n        params.require(:app).permit(:name, :description, :blob_location)\n      end\n\n    end\n  end\nend\n</code></pre>\n\n<p><code>routes.rb</code>:  </p>\n\n<pre><code>Rails.application.routes.draw do\n  namespace :api, defaults: {format: :json} do\n    namespace :v1 do\n      resources :apps\n    end\n  end\nend\n</code></pre>\n\n<p>I have added <code>bcrypt</code> to Gemfile for <code>has_secure_password</code>.<br>\n<code>application_controller.rb</code> as knock gem readme says its required:  </p>\n\n<p><code>/controllers/application_controller.rb</code>:  </p>\n\n<pre><code>class ApplicationController &lt; ActionController::API\n  include Knock::Authenticable\nend\n</code></pre>\n\n<p>I am including <code>Authorization</code> in header as <code>Bearer &lt;jwt_token&gt;</code>, the token I have verified is correct from jwt.io and other sites.<br>\nHTTP snippet from Postman:  </p>\n\n<pre><code>GET /api/v1/apps HTTP/1.1\nHost: localhost:3000\nAuthorization: Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJlbWFpbCI6InNpZC5zd2FwbmlsZGV2ZXNoQGdtYWlsLmNvbSIsImVtYWlsX3ZlcmlmaWVkIjp0cnVlLCJpc3MiOiJodHRwczovL3NpZGV2ZXNoLmF1dGgwLmNvbS8iLCJzdWIiOiJhdXRoMHw1ODkxNDMxZDg1OGQwNDY5YjgwOGFmZmEiLCJhdWQiOiJ1NFhpZUxoRzBJMUZ5YmxGNFFaSWZVN2JkdDhkcm5CZSIsImV4cCI6MTQ4NTk1MjA0NCwiaWF0IjoxNDg1OTE2MDQ0fQ.rRExJkabeB_xrdHpsUIELA9jUSJZq4mxlkDMt6T-OgA\nCache-Control: no-cache\nPostman-Token: 4dc93848-3f9d-6366-3a01-c4f6a86a7640\n</code></pre>\n\n<p>Here is my Gemfile for version info:  </p>\n\n<pre><code>source 'https://rubygems.org'\n\ngit_source(:github) do |repo_name|\n  repo_name = \"#{repo_name}/#{repo_name}\" unless repo_name.include?(\"/\")\n  \"https://github.com/#{repo_name}.git\"\nend\n\n\n# Bundle edge Rails instead: gem 'rails', github: 'rails/rails'\ngem 'rails', '~&gt; 5.0.1'\n# Use postgresql as the database for Active Record\ngem 'pg', '~&gt; 0.18'\n# Use Puma as the app server\ngem 'puma', '~&gt; 3.0'\n# Build JSON APIs with ease. Read more: https://github.com/rails/jbuilder\n# gem 'jbuilder', '~&gt; 2.5'\n# Use Redis adapter to run Action Cable in production\n# gem 'redis', '~&gt; 3.0'\n# Use ActiveModel has_secure_password\ngem 'bcrypt', '~&gt; 3.1.7'\n\n# Use Capistrano for deployment\n# gem 'capistrano-rails', group: :development\n\ngem 'knock', '~&gt; 2.0'\ngem \"paranoia\", \"~&gt; 2.2\"\n# Use Rack CORS for handling Cross-Origin Resource Sharing (CORS), making cross-origin AJAX possible\n# gem 'rack-cors'\n\ngroup :development, :test do\n  # Call 'byebug' anywhere in the code to stop execution and get a debugger console\n  gem 'byebug', platform: :mri\nend\n\ngroup :development do\n  gem 'listen', '~&gt; 3.0.5'\n  # Spring speeds up development by keeping your application running in the background. Read more: https://github.com/rails/spring\n  gem 'spring'\n  gem 'spring-watcher-listen', '~&gt; 2.0.0'\nend\n\n# Windows does not include zoneinfo files, so bundle the tzinfo-data gem\ngem 'tzinfo-data', platforms: [:mingw, :mswin, :x64_mingw, :jruby]\n</code></pre>\n\n<p>Everytime I am sending a request all I am getting is the response mentioned in title.<br>\nAlthough I noticed that if I remove Authorization from header, I am getting this in log:  </p>\n\n<pre><code>Started GET \"/api/v1/apps\" for 127.0.0.1 at 2017-02-01 15:27:38 +0530\nProcessing by Api::V1::AppsController#index as JSON\n  User Load (77.1ms)  SELECT  \"users\".* FROM \"users\" WHERE \"users\".\"deleted_at\" IS NULL AND \"users\".\"auth0_id_string\" IS NULL LIMIT $1  [[\"LIMIT\", 1]]\n   (0.1ms)  BEGIN\n  User Exists (0.4ms)  SELECT  1 AS one FROM \"users\" WHERE \"users\".\"auth0_id_string\" IS NULL AND \"users\".\"deleted_at\" IS NULL LIMIT $1  [[\"LIMIT\", 1]]\n   (0.2ms)  ROLLBACK\nFilter chain halted as :authenticate_user rendered or redirected\nCompleted 401 Unauthorized in 299ms (ActiveRecord: 80.8ms)\n</code></pre>\n\n<p>Why is this not working with this configuration ? Am I missing something ?<br>\nI noticed similar issue in auth0 forums but that was regarding some old issue in ruby-jwt gem which for my current version of <code>jwt</code> gem should have been resolved, yet I also tries that solution with no difference in result. <a href=\"https://auth0.com/forum/t/angularjs-rails-authenticate-401-unauthorized-in-1ms/2244/3\" rel=\"nofollow noreferrer\">Link</a>.  </p>\n"}, {"tags": ["ruby-on-rails", "arrays", "ruby", "ruby-on-rails-4", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "edited": false, "score": 1, "creation_date": 1485951211, "post_id": 41979504, "comment_id": 71136584, "body": "In the linked question there are answers for two major databases: <a href=\"http://stackoverflow.com/a/33651683/1772830\">postgresql</a> and <a href=\"http://stackoverflow.com/a/1685784/1772830\">mysql</a>"}, {"owner": {"reputation": 7638, "user_id": 1014251, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/1c4500c91af486c885af8bb84eefd063?s=128&d=identicon&r=PG", "display_name": "ReggieB", "link": "https://stackoverflow.com/users/1014251/reggieb"}, "reply_to_user": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "edited": false, "score": 0, "creation_date": 1485955088, "post_id": 41979504, "comment_id": 71139144, "body": "@AndreyDeineko I don&#39;t think this is a duplicate. The problem should be solved by using a <code>through</code> relationship on the <code>Favourite</code> object. That is, within <code>User</code>, there should be <code>has_many :clients, through: :favourites</code>. With that in place @sneglefar will be able to do <code>user.clients</code> and <code>user.clients.pluck(:id)</code>"}, {"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "reply_to_user": {"reputation": 7638, "user_id": 1014251, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/1c4500c91af486c885af8bb84eefd063?s=128&d=identicon&r=PG", "display_name": "ReggieB", "link": "https://stackoverflow.com/users/1014251/reggieb"}, "edited": false, "score": 0, "creation_date": 1485955169, "post_id": 41979504, "comment_id": 71139198, "body": "@ReggieB <a href=\"http://stackoverflow.com/questions/41975930/many-to-many-through-going-from-associationscollectionproxy-to-associationrel\">OP already has this setup</a>, but it is (at least that&#39;s what he claims) somehow broken."}, {"owner": {"reputation": 7638, "user_id": 1014251, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/1c4500c91af486c885af8bb84eefd063?s=128&d=identicon&r=PG", "display_name": "ReggieB", "link": "https://stackoverflow.com/users/1014251/reggieb"}, "edited": false, "score": 0, "creation_date": 1485955235, "post_id": 41979504, "comment_id": 71139261, "body": "OK - then I agree - this is a duplicate."}, {"owner": {"reputation": 107, "user_id": 4210683, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/73e1995f03fb6573ccce44135f8cd72d?s=128&d=identicon&r=PG&f=1", "display_name": "sneglefar", "link": "https://stackoverflow.com/users/4210683/sneglefar"}, "edited": false, "score": 0, "creation_date": 1485955926, "post_id": 41979504, "comment_id": 71139717, "body": "Thanks Andrey. It is a duplicate in that case. The original thread, suggests 3 things: 1) To get them as an array (not AR),  2 ) To get an AR, based on an advanced scope I do myself and 3 ) using a gem called order_as_specified.   I have now tried 1 and 3, and 3 doesn&#39;t work for me (Rails 5). 1 works, and I can get an array, but I want an AR. I&#39;ve also tried a bit with scopes (2) in Rails 5, but it seems as if scopes in rails 5 are not the way to go? Any other ways or easier explained ways to get an AR with the clients? (An easier explanation of 2)"}], "owner": {"reputation": 107, "user_id": 4210683, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/73e1995f03fb6573ccce44135f8cd72d?s=128&d=identicon&r=PG&f=1", "display_name": "sneglefar", "link": "https://stackoverflow.com/users/4210683/sneglefar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 24, "favorite_count": 0, "closed_date": 1485951130, "answer_count": 0, "score": 0, "last_activity_date": 1485951096, "creation_date": 1485951050, "last_edit_date": 1485951096, "question_id": 41979504, "link": "https://stackoverflow.com/questions/41979504/how-to-turn-array-of-numbers-into-clients-array-or-ar-with-clients", "closed_reason": "Duplicate", "title": "How to turn array of numbers into clients-array or AR with clients?", "body": "<p>I have this:</p>\n\n<pre><code>collectedclientids = user.favorites.pluck(:client_id)\n</code></pre>\n\n<p>and it gives me this: </p>\n\n<pre><code>=&gt; [18, 34, 1, 90]\n</code></pre>\n\n<p>Now, I want to fetch clients in the <strong>exact same order</strong> and have an array with them, or an ActiveRelation.</p>\n\n<p>It'd be similar in ruby to do this:</p>\n\n<pre><code>clientsordered = collectedclientids.each_with_object([]) { |id, array| array &lt;&lt; Client.find(id) } \n</code></pre>\n\n<p>.. which gives me an array of the clients in the same order with client_id [18, 34, 1, 90]</p>\n\n<p><strong>But how can I accomplish this in rails? Any ideas on methods to use?</strong>  </p>\n"}, {"tags": ["ruby", "shell"], "comments": [{"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1485950243, "post_id": 41978915, "comment_id": 71135936, "body": "How do you want to use it exactly?"}, {"owner": {"reputation": 7071, "user_id": 549010, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/181219cd20b8036ef8ec45b94aed6474?s=128&d=identicon&r=PG", "display_name": "Roger", "link": "https://stackoverflow.com/users/549010/roger"}, "edited": false, "score": 1, "creation_date": 1485950572, "post_id": 41978915, "comment_id": 71136167, "body": "why don&#39;t you use irb (ruby console) ?"}, {"owner": {"reputation": 1035, "user_id": 1562489, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/ApdKz.jpg?s=128&g=1", "display_name": "David Sigley", "link": "https://stackoverflow.com/users/1562489/david-sigley"}, "edited": false, "score": 0, "creation_date": 1485959584, "post_id": 41978915, "comment_id": 71142325, "body": "I can&#39;t seem to accept stdin using IRB without closing the process"}], "answers": [{"tags": [], "owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "is_accepted": false, "score": 1, "last_activity_date": 1485953725, "last_edit_date": 1485953725, "creation_date": 1485950446, "answer_id": 41979293, "question_id": 41978915, "link": "https://stackoverflow.com/questions/41978915/keeping-a-ruby-script-running-in-terminal-so-i-can-call-different-methods/41979293#41979293", "title": "Keeping a ruby script running in terminal so I can call different methods", "body": "<p>If you want a <a href=\"https://en.wikipedia.org/wiki/Read%E2%80%93eval%E2%80%93print_loop\" rel=\"nofollow noreferrer\">REPL</a>, you could use IRB or PRY.\nOtherwise you could <a href=\"https://jpsilvashy.com/posts/build-a-simple-ruby-repl.html\" rel=\"nofollow noreferrer\">write it yourself</a> :</p>\n\n<pre><code>def handle_input(input)\n  raise StopIteration if input =~ /^(ex|qu)it$/i\n  result = eval(input)\n  puts(\"=&gt; #{result}\")\nend\n\ndef repl(prompt)\n  print prompt\n  handle_input(gets.chomp!)\nend\n\nloop do\n  repl('&gt;&gt; ')\nend\n</code></pre>\n\n<p>Example :</p>\n\n<pre><code>&gt;&gt; 2+3\n=&gt; 5\n&gt;&gt; \"test\".size\n=&gt; 4\n&gt;&gt; 3.times{|i| puts i}\n0\n1\n2\n=&gt; 3\n&gt;&gt; exit\n</code></pre>\n\n<p>Using <code>eval</code> usually isn't a good idea. But with your <code>send</code>, you cannot specify a receiver or any parameter.</p>\n"}], "owner": {"reputation": 1035, "user_id": 1562489, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/ApdKz.jpg?s=128&g=1", "display_name": "David Sigley", "link": "https://stackoverflow.com/users/1562489/david-sigley"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 37, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1485953725, "creation_date": 1485949293, "question_id": 41978915, "link": "https://stackoverflow.com/questions/41978915/keeping-a-ruby-script-running-in-terminal-so-i-can-call-different-methods", "title": "Keeping a ruby script running in terminal so I can call different methods", "body": "<p>I want to call a ruby script and keep it running while I call methods on it. </p>\n\n<p>I have:</p>\n\n<pre><code> until (a = gets.chomp) =~ /(?:ex|qu)it/i\n  send(a)\n end\n</code></pre>\n\n<p>This works very well, but I feel like it can't be the best practise? </p>\n\n<p>Can someone reassure me / provide a better solution?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "highrise"], "answers": [{"tags": [], "owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "is_accepted": true, "score": 2, "last_activity_date": 1485949195, "creation_date": 1485949195, "answer_id": 41978872, "question_id": 41978553, "link": "https://stackoverflow.com/questions/41978553/ruby-highrise-api-add-remove-tags-from-person/41978872#41978872", "title": "Ruby Highrise API - Add Remove Tags from Person", "body": "<p>Looking at the gem <a href=\"https://github.com/tapajos/highrise\" rel=\"nofollow noreferrer\">sourcecode</a>, it seems that <a href=\"https://github.com/tapajos/highrise/blob/master/lib/highrise/person.rb\" rel=\"nofollow noreferrer\"><code>Highrise::Person</code></a> is <a href=\"https://github.com/tapajos/highrise/blob/master/lib/highrise/taggable.rb\" rel=\"nofollow noreferrer\"><code>Taggable</code></a>.</p>\n\n<p>So you could do :</p>\n\n<pre><code>person = Highrise::Person.find(1234)\nperson.untag!(tag_name)\n</code></pre>\n\n<p>Note that you need to provide a <code>tag_name</code>, not its id.</p>\n"}], "owner": {"reputation": 2914, "user_id": 777880, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/gDijM.jpg?s=128&g=1", "display_name": "Ziyan Junaideen", "link": "https://stackoverflow.com/users/777880/ziyan-junaideen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "accepted_answer_id": 41978872, "answer_count": 1, "score": 1, "last_activity_date": 1485949195, "creation_date": 1485948170, "question_id": 41978553, "link": "https://stackoverflow.com/questions/41978553/ruby-highrise-api-add-remove-tags-from-person", "title": "Ruby Highrise API - Add Remove Tags from Person", "body": "<p>How can one add and remove tags using the Highrise API. I believe my issue is due to the lack of knowledge in ActiveResources, which Highrise GEM is been based on.</p>\n\n<p>Now I tried some thing like this...</p>\n\n<pre><code>person = Highrise::Person.find(1234)\nperson.update_attributes(tags: [ { id: 9876, _destroy: true } ])\n</code></pre>\n\n<p>Though returns true, doesn't remove the tag association.</p>\n\n<p>I would like to know how to remove a tag from a person. Thanks in advance.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3", "ruby-on-rails-4", "checkbox"], "answers": [{"tags": [], "owner": {"reputation": 618, "user_id": 4217243, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/6a4yK.jpg?s=128&g=1", "display_name": "jithya", "link": "https://stackoverflow.com/users/4217243/jithya"}, "is_accepted": true, "score": 2, "last_activity_date": 1485947221, "creation_date": 1485947221, "answer_id": 41978214, "question_id": 41978107, "link": "https://stackoverflow.com/questions/41978107/ruby-on-rails-is-it-possible-to-display-two-variables-against-with-collection-c/41978214#41978214", "title": "Ruby on Rails: Is it possible to display two variables against with collection_check_boxes?", "body": "<pre><code>&lt;%= f.collection_check_boxes :contact_ids, Contact.where(user_id: session[:user_id]),:id, :full_name ,{ prompt: \"firstname\" } %&gt;\n</code></pre>\n\n<p>where in model.rb, add </p>\n\n<pre><code>  def full_name\n    \"#{firstname} #{surname}\"\n  end\n</code></pre>\n\n<p>hope this will work</p>\n"}, {"tags": [], "owner": {"reputation": 9480, "user_id": 625348, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/eEgMg.jpg?s=128&g=1", "display_name": "mohamed-ibrahim", "link": "https://stackoverflow.com/users/625348/mohamed-ibrahim"}, "is_accepted": false, "score": 0, "last_activity_date": 1485947267, "creation_date": 1485947267, "answer_id": 41978229, "question_id": 41978107, "link": "https://stackoverflow.com/questions/41978107/ruby-on-rails-is-it-possible-to-display-two-variables-against-with-collection-c/41978229#41978229", "title": "Ruby on Rails: Is it possible to display two variables against with collection_check_boxes?", "body": "<p>You can add instance method in <code>user</code> model:</p>\n\n<pre><code>class User &lt; ActiveRecord::Base\n  def fullname\n    firstname + surname\n  end\nend\n</code></pre>\n\n<p>and use here:</p>\n\n<pre><code>&lt;%= f.collection_check_boxes :contact_ids, Contact.where(user_id: session[:user_id]), :id, :fullname, { prompt: \"firstname\" } %&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 116, "user_id": 3384989, "user_type": "registered", "accept_rate": 55, "profile_image": "https://graph.facebook.com/100002093712338/picture?type=large", "display_name": "Giovani Barcelos", "link": "https://stackoverflow.com/users/3384989/giovani-barcelos"}, "is_accepted": false, "score": 0, "last_activity_date": 1485947385, "creation_date": 1485947385, "answer_id": 41978278, "question_id": 41978107, "link": "https://stackoverflow.com/questions/41978107/ruby-on-rails-is-it-possible-to-display-two-variables-against-with-collection-c/41978278#41978278", "title": "Ruby on Rails: Is it possible to display two variables against with collection_check_boxes?", "body": "<p>You can have a method in the <code>Contact</code> model like this:</p>\n\n<pre><code>def full_name\n    firstname + \" \" + surname\nend\n</code></pre>\n"}], "owner": {"reputation": 789, "user_id": 4596273, "user_type": "registered", "accept_rate": 59, "profile_image": "https://graph.facebook.com/816411745073346/picture?type=large", "display_name": "Ben Smith", "link": "https://stackoverflow.com/users/4596273/ben-smith"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 35, "favorite_count": 0, "accepted_answer_id": 41978214, "answer_count": 3, "score": 0, "last_activity_date": 1485947385, "creation_date": 1485946939, "question_id": 41978107, "link": "https://stackoverflow.com/questions/41978107/ruby-on-rails-is-it-possible-to-display-two-variables-against-with-collection-c", "title": "Ruby on Rails: Is it possible to display two variables against with collection_check_boxes?", "body": "<p>In my RoR application I am displaying a checkboxes for a user's to select their contacts. This is done through the following line of code:</p>\n\n<pre><code>&lt;%= f.collection_check_boxes :contact_ids, Contact.where(user_id: session[:user_id]), :id, :firstname, { prompt: \"firstname\" } %&gt;\n</code></pre>\n\n<p>This only display the contacts' firstname, is it possible to display both firstname and surname?</p>\n\n<p>I have tried the following, but they have not worked.</p>\n\n<pre><code>&lt;%= f.collection_check_boxes :contact_ids, Contact.where(user_id: session[:user_id]), :id, { :firstname &amp; \" \" &amp; :surname }, { prompt: \"firstname\" } %&gt;\n&lt;%= f.collection_check_boxes :contact_ids, Contact.where(user_id: session[:user_id]), :id, { :firstname :surname }, { prompt: \"firstname\" } %&gt;\n&lt;%= f.collection_check_boxes :contact_ids, Contact.where(user_id: session[:user_id]), :id, :firstname :surname, { prompt: \"firstname\" } %&gt;\n</code></pre>\n\n<p>Is this possible?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 4742, "user_id": 2850944, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/ceb654fd6366aedf95144e49bb505b8f?s=128&d=identicon&r=PG&f=1", "display_name": "Toshi", "link": "https://stackoverflow.com/users/2850944/toshi"}, "edited": false, "score": 0, "creation_date": 1485947168, "post_id": 41978145, "comment_id": 71133981, "body": "You mean the third party API? If it is, there is! Thanks for the advice! <code>stripe_transaction_id</code> is unique."}, {"owner": {"reputation": 116, "user_id": 3384989, "user_type": "registered", "accept_rate": 55, "profile_image": "https://graph.facebook.com/100002093712338/picture?type=large", "display_name": "Giovani Barcelos", "link": "https://stackoverflow.com/users/3384989/giovani-barcelos"}, "reply_to_user": {"reputation": 4742, "user_id": 2850944, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/ceb654fd6366aedf95144e49bb505b8f?s=128&d=identicon&r=PG&f=1", "display_name": "Toshi", "link": "https://stackoverflow.com/users/2850944/toshi"}, "edited": false, "score": 0, "creation_date": 1485947472, "post_id": 41978145, "comment_id": 71134171, "body": "This way you don&#39;t need to worry about saving the same transaction twice :D"}], "tags": [], "owner": {"reputation": 116, "user_id": 3384989, "user_type": "registered", "accept_rate": 55, "profile_image": "https://graph.facebook.com/100002093712338/picture?type=large", "display_name": "Giovani Barcelos", "link": "https://stackoverflow.com/users/3384989/giovani-barcelos"}, "is_accepted": false, "score": 1, "last_activity_date": 1485947024, "creation_date": 1485947024, "answer_id": 41978145, "question_id": 41977980, "link": "https://stackoverflow.com/questions/41977980/create-records-idemponently-from-the-last-time/41978145#41978145", "title": "Create records idemponently from the last time", "body": "<p>Does the transaction have unique id's or any field that could be made unique? Maybe you could use <code>validates_uniqueness_of</code> to avoid saving transactions you already fetched.</p>\n"}], "owner": {"reputation": 4742, "user_id": 2850944, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/ceb654fd6366aedf95144e49bb505b8f?s=128&d=identicon&r=PG&f=1", "display_name": "Toshi", "link": "https://stackoverflow.com/users/2850944/toshi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 34, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1485949921, "creation_date": 1485946654, "last_edit_date": 1485949921, "question_id": 41977980, "link": "https://stackoverflow.com/questions/41977980/create-records-idemponently-from-the-last-time", "title": "Create records idemponently from the last time", "body": "<p>I need to fetch transaction data from a third party API, and save the records periodically (once a month). Here is an example:</p>\n\n<pre><code>class BalanceTransaction::Update\n  include Service\n\n  attr_reader :offset, :transactions\n\n  def initialize(offset)\n    @offset = offset\n    @transactions = fetch_transactions\n  end\n\n  def call\n    ActiveRecord::Base.transaction do\n      transactions.auto_paging_each do |txn|\n        type = txn[:type]\n        source = txn[:source]\n        case type\n          when 'charge', 'adjustment'\n            invoice = find_invoice(source)\n            ac_id = invoice.account.id\n            update_attrs(id: invoice.id, account_id: ac_id, type:'invoice', attrs: txn)\n          when 'refund'\n            refund = find_refund(source)\n            ac_id = refund.invoice.account.id\n            update_attrs(id: refund.id, account_id: ac_id, type:'refund', attrs: txn)\n        end\n      end\n    end\n    true\n  end\n\n  private\n\n  def find_invoice(source)\n    Invoice.find_by!(stripe_charge_id: source)\n  end\n\n  def find_refund(source)\n    Refund.find_by!(stripe_refund_id: source)\n  end\n\n  def update_attrs(id:, account_id:, type:, attrs:)\n    BalanceTransaction.create(\n      account_id: account_id,\n      stripe_transaction_id: attrs[:id],\n      gross_amount: attrs[:amount],\n      net_amount: attrs[:net],\n      fee_amount: attrs[:fee],\n      currency: attrs[:currency],\n      transactionable_id: id,\n      transactionable_type: type)\n  end\n\n  def fetch_transactions\n    external_card_balance.all(limit: offset)\n  rescue *EXTERNAL_CARD_ERRORS =&gt; e\n    ExternalCardErrorHandler.new(e).handle\n  end\n\n  def external_card_balance\n    Stripe::BalanceTransaction\n  end\nend\n</code></pre>\n\n<p>I wonder how to bulk insert idempotently from the last time. Should I check <code>created_at</code> and delete them if I find data created after the offset? Could you give me some advice?</p>\n"}, {"tags": ["ruby", "csv", "yaml"], "comments": [{"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 1, "creation_date": 1485944308, "post_id": 41977101, "comment_id": 71131985, "body": "What does your CSV look like?"}, {"owner": {"reputation": 7071, "user_id": 549010, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/181219cd20b8036ef8ec45b94aed6474?s=128&d=identicon&r=PG", "display_name": "Roger", "link": "https://stackoverflow.com/users/549010/roger"}, "edited": false, "score": 0, "creation_date": 1485944485, "post_id": 41977101, "comment_id": 71132118, "body": "Size of the CSV and how many lines? I would write my own parser, put it in a hash and then use <i>Hash.to_yaml</i>"}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 1, "creation_date": 1485946972, "post_id": 41977101, "comment_id": 71133860, "body": "What does your code look like? With what <i>specific</i> part do you have a problem? Do you get an error message? Which one? Do you get wrong results? What results do you get and what results do you want? Please, provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> for us to look at."}, {"owner": {"reputation": 50175, "user_id": 1307905, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a38a4f5f180194ac457cdc057f1be6e3?s=128&d=identicon&r=PG", "display_name": "Anthon", "link": "https://stackoverflow.com/users/1307905/anthon"}, "edited": false, "score": 1, "creation_date": 1485948398, "post_id": 41977101, "comment_id": 71134736, "body": "You don&#39;t built a YAML file. You build a data structure in memory that then gets dumped/written into a YAML representation in a file. Write a complete YAML file by hand first, load with ruby, inspect the memory layout and generate that layout from your CSV file and dump."}, {"owner": {"reputation": 171, "user_id": 7499654, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b543fbb3d42c84f706b5ef1312a42ae9?s=128&d=identicon&r=PG&f=1", "display_name": "mf370", "link": "https://stackoverflow.com/users/7499654/mf370"}, "edited": false, "score": 0, "creation_date": 1485950175, "post_id": 41977101, "comment_id": 71135880, "body": "I don&#39;t have any code yet, I&#39;m trying to straight up my ideas first and wanted some advice of people with more experience on this than me. Thank you all!!"}], "answers": [{"tags": [], "owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "is_accepted": false, "score": 0, "last_activity_date": 1485946950, "last_edit_date": 1485946950, "creation_date": 1485944608, "answer_id": 41977234, "question_id": 41977101, "link": "https://stackoverflow.com/questions/41977101/how-to-convert-csv-file-into-yaml-file-using-ruby/41977234#41977234", "title": "How to convert CSV file into YAML file using Ruby?", "body": "<p>Here's a basic structure. <code>CSV.parse</code> can return an array of rows (which can be seen as hashes). Both arrays and hashes can easily be converted to YAML :</p>\n\n<pre><code>require 'yaml'\nrequire 'csv'\n\ncsv = \"ip,something,domain\nx,y,z\na,b,c\nm,n,o\"\n\ndata = []\n\nCSV.parse(csv, headers: true).each do |row|\n  hash = row.to_h\n  # hash looks like :\n  # {\"ip\"=&gt;\"x\", \" something\"=&gt;\"y\", \" domain\"=&gt;\"z\"}\n  # Apply desired logic to it\n  data &lt;&lt; hash\nend\n\nputs data.to_yaml\n# ---\n# - ip: x\n#   something: y\n#   domain: z\n# - ip: a\n#   something: b\n#   domain: c\n# - ip: m\n#   something: n\n#   domain: o\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 41, "user_id": 11186401, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d2f9fb31b9cd82c2f6ff6196fda7c1a?s=128&d=identicon&r=PG&f=1", "display_name": "Adwin", "link": "https://stackoverflow.com/users/11186401/adwin"}, "is_accepted": false, "score": 2, "last_activity_date": 1552325869, "last_edit_date": 1592644375, "creation_date": 1552325492, "answer_id": 55107371, "question_id": 41977101, "link": "https://stackoverflow.com/questions/41977101/how-to-convert-csv-file-into-yaml-file-using-ruby/55107371#55107371", "title": "How to convert CSV file into YAML file using Ruby?", "body": "<p>here we use <a href=\"https://github.com/stympy/faker\" rel=\"nofollow noreferrer\">Faker</a> ruby gem to generate dummy data <br></p>\n<h1>from .csv file</h1>\n<pre><code>name,email,title,phone_number\nLawerence Kautzer,hedwig@lockman.name,Manufacturing Director,(548) 162-1670 x8532\nMrs. Walter Renner,man@pacocha.org,Legacy Legal Liaison,779-428-7453 x26055\n</code></pre>\n<h1>to .yaml file</h1>\n<pre><code>---\n- :name: Lawerence Kautzer\n  :email: hedwig@lockman.name\n  :title: Manufacturing Director\n  :phone_number: &quot;(548) 162-1670 x8532&quot;\n- :name: Mrs. Walter Renner\n  :email: man@pacocha.org\n  :title: Legacy Legal Liaison\n  :phone_number: 779-428-7453 x26055\n</code></pre>\n<h1>do this</h1>\n<pre><code>require 'csv'\ntable = CSV.table('file_name.csv')\ntransformed_into_hash = table.map { |row| row.to_hash }\nFile.open(&quot;file_name.yaml&quot;, &quot;w&quot;) do |f|\n  f.puts transformed_into_hash.to_yaml\nend\n</code></pre>\n<p>thanks</p>\n"}], "owner": {"reputation": 171, "user_id": 7499654, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b543fbb3d42c84f706b5ef1312a42ae9?s=128&d=identicon&r=PG&f=1", "display_name": "mf370", "link": "https://stackoverflow.com/users/7499654/mf370"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1307, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1552325869, "creation_date": 1485944156, "last_edit_date": 1485948269, "question_id": 41977101, "link": "https://stackoverflow.com/questions/41977101/how-to-convert-csv-file-into-yaml-file-using-ruby", "title": "How to convert CSV file into YAML file using Ruby?", "body": "<p>I have a CSV file where it contains URLs, Fully Qualified Domain Names (FQDN), Domains, IP addresses and ranges of IP addresses. And I would like to convert it to a YAML file on the following format:</p>\n\n<pre><code>entity:    \n  name: \"company name\"   \n  network_names:\n    url: \n      - 'scheme://host:port/path?query'\n      - 'http://www.example.com/software/index.html'\n    fqdn:\n      - 'mymail.somecollege.edu'\n    domain:\n      - 'somecollege.edu'\n\n\n  network_addresses:\n    ipv4:\n      single_ip: \n        - 111.11.111.1\n      range: \n        - 111.11.111.0-111.11.11.255\n</code></pre>\n\n<p>The problem is that everything is mixed up on the CSV file, for example on the first row there is an IP address but on the next line there is a URL or a FQDN. </p>\n\n<p>So I was thinking that I need to check if a row contains an IP address, URL, FQDN or a domain and from there build the YAML file.</p>\n\n<p>But how do I specify the fields for the YAML file? I'm new on Ruby programming and YAML.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 12440, "user_id": 308731, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/eQxFn.jpg?s=128&g=1", "display_name": "Eyeslandic", "link": "https://stackoverflow.com/users/308731/eyeslandic"}, "edited": false, "score": 1, "creation_date": 1485944520, "post_id": 41977086, "comment_id": 71132136, "body": "Why are you creating separate variables for what you already have access to, like <code>@user_comments</code> when you can do just <code>@user.comments</code>?"}, {"owner": {"reputation": 7768, "user_id": 1213273, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/cf372446eb8bcca32373052e4dda2164?s=128&d=identicon&r=PG", "display_name": "Severin", "link": "https://stackoverflow.com/users/1213273/severin"}, "reply_to_user": {"reputation": 12440, "user_id": 308731, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/eQxFn.jpg?s=128&g=1", "display_name": "Eyeslandic", "link": "https://stackoverflow.com/users/308731/eyeslandic"}, "edited": false, "score": 0, "creation_date": 1485944576, "post_id": 41977086, "comment_id": 71132166, "body": "@Iceman this is just for demo purposes. I&#39;ll adjust the question."}, {"owner": {"reputation": 12440, "user_id": 308731, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/eQxFn.jpg?s=128&g=1", "display_name": "Eyeslandic", "link": "https://stackoverflow.com/users/308731/eyeslandic"}, "edited": false, "score": 0, "creation_date": 1485944620, "post_id": 41977086, "comment_id": 71132197, "body": "You don&#39;t have to, I was just curious."}, {"owner": {"reputation": 601, "user_id": 4218660, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/f66990dc14a1b7bbaaa5a988b277d7b5?s=128&d=identicon&r=PG&f=1", "display_name": "djadam", "link": "https://stackoverflow.com/users/4218660/djadam"}, "edited": false, "score": 0, "creation_date": 1485945199, "post_id": 41977086, "comment_id": 71132610, "body": "I think you need to returns this instance variables from the service method. return user, cars"}], "answers": [{"comments": [{"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "edited": false, "score": 0, "creation_date": 1485945640, "post_id": 41977253, "comment_id": 71132945, "body": "This is the answer to the question about moving instance vars from controller action. Upvoted"}], "tags": [], "owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "is_accepted": true, "score": 1, "last_activity_date": 1485944660, "creation_date": 1485944660, "answer_id": 41977253, "question_id": 41977086, "link": "https://stackoverflow.com/questions/41977086/moving-out-instance-variables-from-controller-to-service-class/41977253#41977253", "title": "Moving out instance variables from Controller to Service Class", "body": "<p>If you want to do some calculations in a separate method and assign some instance variables there, then use them in your view, you can move those methods to a mixin and include that mixin inside your controller.</p>\n\n<pre><code># mixins/user_helper.rb\nmodule UserHelper\n  def set_user_detail_variables(user_id)\n    @user = User.includes(:comments, :addresses, :posts).find(user_id)\n\n    @user_comments  = @user.comments\n    @user_addresses = @user.addresses\n    @user_posts     = @user.posts\n  end\nend\n\n# controllers/users_controller.rb\nclass UsersController &lt; ApplicationController\n  include UserHelper\n\n  def show\n    set_user_detail_variables(params[:id])\n\n    respond_to do |format|\n      format.html\n      format.json { render json: @user }\n    end\n  end\nend\n</code></pre>\n\n<p>This way your controller would not get lengthy and also you will be able to use your variables.</p>\n"}, {"tags": [], "owner": {"reputation": 2051, "user_id": 6255586, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/Ez4Cz.jpg?s=128&g=1", "display_name": "VAD", "link": "https://stackoverflow.com/users/6255586/vad"}, "is_accepted": false, "score": 1, "last_activity_date": 1485952274, "last_edit_date": 1485952274, "creation_date": 1485944808, "answer_id": 41977320, "question_id": 41977086, "link": "https://stackoverflow.com/questions/41977086/moving-out-instance-variables-from-controller-to-service-class/41977320#41977320", "title": "Moving out instance variables from Controller to Service Class", "body": "<p><strong>UPDATED according to your updated question</strong></p>\n\n<p>I believe you have to have at least one instance variable in your controller action to render its data or send it as <code>json</code>. And service object are not the one to do such things. Service objects designed to perform single huge or complicated operation. </p>\n\n<p>What you could do is to use Presenter object (Presenter pattern as Rails community sees it). This pattern in Rails is useful to \"hide\" several instance variables inside the single one. So put your instance variables inside the single Presenter variable. Then pass presenter to the views or render its data as <code>json</code>.</p>\n\n<p><strong>Example</strong></p>\n\n<p>Before:</p>\n\n<pre><code>class UsersController &lt; ApplicationController\n  def show\n    @user = User.find(user_id)\n    @cars = Car.where(brand: 'Volvo')\n\n    respond_to do |format|\n      format.html\n      format.json { render json: @user, @car }\n    end\n  end\nend\n</code></pre>\n\n<p>After:</p>\n\n<pre><code>class UsersController &lt; ApplicationController\n  def show\n    user = User.find(user_id)\n    cars = Car.where(brand: 'Volvo')\n    @show_presenter = ShowPresenter.new(user, cars)\n\n    respond_to do |format|\n      format.html\n      format.json { render json: @show_presenter }\n    end\n  end\nend\n\nclass ShowPresenter\n  def initialize(user, cars)\n    @user = user\n    @cars = cars\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 7768, "user_id": 1213273, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/cf372446eb8bcca32373052e4dda2164?s=128&d=identicon&r=PG", "display_name": "Severin", "link": "https://stackoverflow.com/users/1213273/severin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 690, "favorite_count": 0, "accepted_answer_id": 41977253, "answer_count": 2, "score": 1, "last_activity_date": 1485952274, "creation_date": 1485944116, "last_edit_date": 1485944650, "question_id": 41977086, "link": "https://stackoverflow.com/questions/41977086/moving-out-instance-variables-from-controller-to-service-class", "title": "Moving out instance variables from Controller to Service Class", "body": "<p>I am at the point where the controller of my Rails 5 application start to get crowded, so I am thinking about moving as much as possible out to service classes. This works well for most of the business logic, but I can't seem to be able to move any instance variables out of the method. What I want to do is something that follows this pattern:</p>\n\n<pre><code># users_controller.rb\nclass UsersController &lt; ApplicationController\n  def show\n    UserService.new.set_user_detail_variables(params[:id])\n\n    respond_to do |format|\n      format.html\n      format.json { render json: @user }\n    end\n  end\nend\n\n# user_service.rb\nclass UserService\n\n  def set_user_detail_variables(user_id)\n    @user = User.find(user_id)\n    @cars = Car.where(brand: 'Volvo')\n  end\n\nend\n</code></pre>\n\n<p>Is it all possible to move instance variables out of the controller?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "pagination", "web-scraping"], "comments": [{"owner": {"reputation": 3914, "user_id": 4057366, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/uZ3e5.jpg?s=128&g=1", "display_name": "Alex Holubenko", "link": "https://stackoverflow.com/users/4057366/alex-holubenko"}, "edited": false, "score": 2, "creation_date": 1485944093, "post_id": 41977033, "comment_id": 71131852, "body": "<a href=\"http://ruby.bastardsbook.com/chapters/web-crawling/\" rel=\"nofollow noreferrer\">you can read this post</a>"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 7499672, "user_type": "registered", "profile_image": "https://graph.facebook.com/10202896595772619/picture?type=large", "display_name": "Cedric Cikho", "link": "https://stackoverflow.com/users/7499672/cedric-cikho"}, "edited": false, "score": 0, "creation_date": 1485945281, "post_id": 41977439, "comment_id": 71132677, "body": "can you help me about it?"}, {"owner": {"reputation": 116, "user_id": 3384989, "user_type": "registered", "accept_rate": 55, "profile_image": "https://graph.facebook.com/100002093712338/picture?type=large", "display_name": "Giovani Barcelos", "link": "https://stackoverflow.com/users/3384989/giovani-barcelos"}, "reply_to_user": {"reputation": 1, "user_id": 7499672, "user_type": "registered", "profile_image": "https://graph.facebook.com/10202896595772619/picture?type=large", "display_name": "Cedric Cikho", "link": "https://stackoverflow.com/users/7499672/cedric-cikho"}, "edited": false, "score": 0, "creation_date": 1485945343, "post_id": 41977439, "comment_id": 71132725, "body": "How can I help you?"}, {"owner": {"reputation": 1, "user_id": 7499672, "user_type": "registered", "profile_image": "https://graph.facebook.com/10202896595772619/picture?type=large", "display_name": "Cedric Cikho", "link": "https://stackoverflow.com/users/7499672/cedric-cikho"}, "edited": false, "score": 0, "creation_date": 1485945694, "post_id": 41977439, "comment_id": 71132984, "body": "help me to find the solutions.."}, {"owner": {"reputation": 116, "user_id": 3384989, "user_type": "registered", "accept_rate": 55, "profile_image": "https://graph.facebook.com/100002093712338/picture?type=large", "display_name": "Giovani Barcelos", "link": "https://stackoverflow.com/users/3384989/giovani-barcelos"}, "reply_to_user": {"reputation": 1, "user_id": 7499672, "user_type": "registered", "profile_image": "https://graph.facebook.com/10202896595772619/picture?type=large", "display_name": "Cedric Cikho", "link": "https://stackoverflow.com/users/7499672/cedric-cikho"}, "edited": false, "score": 0, "creation_date": 1485945847, "post_id": 41977439, "comment_id": 71133118, "body": "The snippet I posted should guide you on how to scrape multiple indexed-by-url pages. You just have to do the scraping in the loop block and change the url. You have to be more accurate on your doubts so we can help you better"}, {"owner": {"reputation": 1, "user_id": 7499672, "user_type": "registered", "profile_image": "https://graph.facebook.com/10202896595772619/picture?type=large", "display_name": "Cedric Cikho", "link": "https://stackoverflow.com/users/7499672/cedric-cikho"}, "edited": false, "score": 0, "creation_date": 1485946095, "post_id": 41977439, "comment_id": 71133280, "body": "at this case, i need .click methode to open each posts, because each post has preview thumbnail.  so how to make it click by self, and then scrape the data ? because its little bit difficult"}, {"owner": {"reputation": 116, "user_id": 3384989, "user_type": "registered", "accept_rate": 55, "profile_image": "https://graph.facebook.com/100002093712338/picture?type=large", "display_name": "Giovani Barcelos", "link": "https://stackoverflow.com/users/3384989/giovani-barcelos"}, "reply_to_user": {"reputation": 1, "user_id": 7499672, "user_type": "registered", "profile_image": "https://graph.facebook.com/10202896595772619/picture?type=large", "display_name": "Cedric Cikho", "link": "https://stackoverflow.com/users/7499672/cedric-cikho"}, "edited": false, "score": 0, "creation_date": 1485946798, "post_id": 41977439, "comment_id": 71133740, "body": "Can you provide us the link for the real site? Maybe there&#39;s a better alternative. I&#39;ve built lots of scrappers and never had to click anything."}, {"owner": {"reputation": 1, "user_id": 7499672, "user_type": "registered", "profile_image": "https://graph.facebook.com/10202896595772619/picture?type=large", "display_name": "Cedric Cikho", "link": "https://stackoverflow.com/users/7499672/cedric-cikho"}, "edited": false, "score": 0, "creation_date": 1485947112, "post_id": 41977439, "comment_id": 71133942, "body": "Hmmm, this is the site, <a href=\"http://oploverz.in\" rel=\"nofollow noreferrer\">oploverz.in</a> &lt; its just for example.. If you do, we can chat by email, here my email: andadj@gmail.com"}, {"owner": {"reputation": 1, "user_id": 7499672, "user_type": "registered", "profile_image": "https://graph.facebook.com/10202896595772619/picture?type=large", "display_name": "Cedric Cikho", "link": "https://stackoverflow.com/users/7499672/cedric-cikho"}, "edited": false, "score": 0, "creation_date": 1485947319, "post_id": 41977439, "comment_id": 71134093, "body": "I need scrape each post which contain such image, links download, timestamp, and etc. Can you give me an example from your code? Similar site, it will be much more helpfull."}], "tags": [], "owner": {"reputation": 116, "user_id": 3384989, "user_type": "registered", "accept_rate": 55, "profile_image": "https://graph.facebook.com/100002093712338/picture?type=large", "display_name": "Giovani Barcelos", "link": "https://stackoverflow.com/users/3384989/giovani-barcelos"}, "is_accepted": true, "score": 0, "last_activity_date": 1485945325, "last_edit_date": 1485945325, "creation_date": 1485945125, "answer_id": 41977439, "question_id": 41977033, "link": "https://stackoverflow.com/questions/41977033/i-want-to-scrape-some-website-using-ruby-and-mechanize-gems/41977439#41977439", "title": "i want to scrape some website using ruby and mechanize gems", "body": "<p>You <strong>have</strong> to use mechanize gems? I'd strongly recommend you to use <a href=\"http://www.nokogiri.org/\" rel=\"nofollow noreferrer\">Nokogiri</a>. It's very simple and easy to use. </p>\n\n<p>You can have a loop that fetch the pages and stop when you can't find the page.</p>\n\n<pre><code>require 'open-uri'\nrequire 'nokogiri'\npages_count = 1\nloop do\n    @html = Nokogiri::HTML(open(\"somepage.com/#{pages_count}\"))\n    ...\n    pages_count = pages_count + 1\nend\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 7499672, "user_type": "registered", "profile_image": "https://graph.facebook.com/10202896595772619/picture?type=large", "display_name": "Cedric Cikho", "link": "https://stackoverflow.com/users/7499672/cedric-cikho"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 151, "favorite_count": 0, "closed_date": 1485966563, "accepted_answer_id": 41977439, "answer_count": 1, "score": -4, "last_activity_date": 1485945325, "creation_date": 1485943872, "last_edit_date": 1495539929, "question_id": 41977033, "link": "https://stackoverflow.com/questions/41977033/i-want-to-scrape-some-website-using-ruby-and-mechanize-gems", "closed_reason": "Needs more focus", "title": "i want to scrape some website using ruby and mechanize gems", "body": "<p>i want to scrape some website, which contain pagination.</p>\n\n<p>for example <a href=\"http://somesite.com/page/\" rel=\"nofollow noreferrer\">http://somesite.com/page/</a></p>\n\n<p>i want scrape each post in each pagination.</p>\n\n<p>so, in page/1 , there are about 5 posts.</p>\n\n<p>how to scrape each data inside each pagination? until the end page?</p>\n\n<p>i've search and research, and i found 2 similar question, but im still confuse it..</p>\n\n<p>here >></p>\n\n<p><a href=\"https://stackoverflow.com/questions/32786256/undefined-method-click-for-nilnilclass-mechanize\">first way</a></p>\n\n<p><a href=\"https://stackoverflow.com/questions/40880921/use-ruby-mechanize-to-scrape-all-successive-pages\">second way</a></p>\n\n<p>any idea how to combine it?</p>\n\n<p>thanks before</p>\n"}, {"tags": ["ruby", "markdown"], "comments": [{"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1485945423, "post_id": 41976353, "comment_id": 71132787, "body": "I am confused by your question. Is it about Ruby or is it about Markdown?"}, {"owner": {"reputation": 190, "user_id": 7441049, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e59ef0164c65cb7eccc1208e68b4fb3?s=128&d=identicon&r=PG&f=1", "display_name": "Niko Z.", "link": "https://stackoverflow.com/users/7441049/niko-z"}, "reply_to_user": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1485962724, "post_id": 41976353, "comment_id": 71144542, "body": "It&#39;s about ruby, I am sorry to have you confused ^^"}], "answers": [{"comments": [{"owner": {"reputation": 190, "user_id": 7441049, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e59ef0164c65cb7eccc1208e68b4fb3?s=128&d=identicon&r=PG&f=1", "display_name": "Niko Z.", "link": "https://stackoverflow.com/users/7441049/niko-z"}, "edited": false, "score": 0, "creation_date": 1485943196, "post_id": 41976668, "comment_id": 71131260, "body": "Thanks for your help, but please look at the part &quot;Think about it&quot;. If the rolls are random, then it is possible (although not likely) that two consecutive rolls are equal. In this case, the test <code>assert_not_equal first_time, second_time</code> will fail, right ?"}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 1, "creation_date": 1485945345, "post_id": 41976668, "comment_id": 71132728, "body": "&quot;If two variables have the same <code>object_id</code>&quot; \u2013 Variables don&#39;t have <code>object_id</code>s, only objects do (that&#39;s why they are called <code>object_id</code>s). Variables aren&#39;t objects in Ruby (just like most other languages)."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 2, "creation_date": 1485946159, "post_id": 41976668, "comment_id": 71133313, "body": "Yes, much better! I know that&#39;s what you meant, you know that&#39;s you meant, but confusing variables with what those variables point to (i.e. confusing things with labels of things, e.g. confusing a pair of socks with a label that says &quot;pair of socks&quot;) is one of the biggest hurdles in understanding imperative programming, I believe. And in my personal opinion, a lot of that is due to imprecise wording in tutorials and books. Let&#39;s not repeat that mistake here! (You won&#39;t believe the arguments I had about &quot;variables aren&#39;t objects&quot;, even though both the ISO spec and matz&#39;s book explicitly say so)"}], "tags": [], "owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "is_accepted": true, "score": 0, "last_activity_date": 1485945606, "last_edit_date": 1485945606, "creation_date": 1485942881, "answer_id": 41976668, "question_id": 41976353, "link": "https://stackoverflow.com/questions/41976353/ruby-koans-test-two-different-sets-of-dices-who-have-same-values/41976668#41976668", "title": "Ruby Koans : Test two different sets of dices who have same values", "body": "<h1>object_ids and equality</h1>\n\n<p>You shouldn't compare <code>object_id</code>s, but <code>value</code>s.</p>\n\n<pre><code>a = [1, 2, 3]\nb = [1, 2, 3]\n\nputs a == b\n#=&gt; true\nputs a.object_id == b.object_id\n#=&gt; false\n</code></pre>\n\n<p>By comparing <code>object_id</code>s, you're testing if variables refer to the exact same object. In your case, <code>first_time</code> and <code>second_time</code> are created independently from each others, so they cannot reference the same object. They can have the same values, though.</p>\n\n<h1>Think about it</h1>\n\n<p>One way to ensure that no two consecutive rolls are equal would be to use a <code>while</code> loop :</p>\n\n<pre><code>class DiceSet\n  # Attribute reader\n  attr_reader :values\n\n  # Initializer\n  def initialize\n    @values = []\n    @last_values = []\n  end\n\n  # Roll method\n  def roll(dice_amount)\n    while @values == @last_values\n      @values = Array.new(dice_amount) { rand(1..6) }\n    end\n    @last_values = @values\n    @values\n  end\nend\n\ndice = DiceSet.new\n\ndice.roll(5)\nfirst_time = dice.values\n\ndice.roll(5)\nsecond_time = dice.values # &lt;-- cannot be equal to first_time\n</code></pre>\n"}], "owner": {"reputation": 190, "user_id": 7441049, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e59ef0164c65cb7eccc1208e68b4fb3?s=128&d=identicon&r=PG&f=1", "display_name": "Niko Z.", "link": "https://stackoverflow.com/users/7441049/niko-z"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 381, "favorite_count": 0, "accepted_answer_id": 41976668, "answer_count": 1, "score": 0, "last_activity_date": 1485945606, "creation_date": 1485941894, "question_id": 41976353, "link": "https://stackoverflow.com/questions/41976353/ruby-koans-test-two-different-sets-of-dices-who-have-same-values", "title": "Ruby Koans : Test two different sets of dices who have same values", "body": "<p>I am working through the Ruby Koans(A tutorial project of Ruby). In the  <strong>About_Dice_Project</strong>, it's demanded to create a class named <em>DiceSet</em>. I succeed, but there is a interesting question.</p>\n\n<p>Here's the code :</p>\n\n<pre><code>class DiceSet\n\n  # Attribute reader\n  attr_reader :values\n\n  # Initializer\n  def initialize\n    @values = []\n  end\n\n  # Roll method\n  def roll(dice_amount)\n    @values = Array.new(dice_amount) { rand(1..6) }\n  end\nend\n</code></pre>\n\n<p>And this test is interesting :</p>\n\n<pre><code>def test_dice_values_should_change_between_rolls\n    dice = DiceSet.new\n\n    dice.roll(5)\n    first_time = dice.values\n\n    dice.roll(5)\n    second_time = dice.values\n\n    assert_not_equal first_time, second_time,\n      \"Two rolls should not be equal\"\n  end\n</code></pre>\n\n<blockquote>\n  <p>THINK ABOUT IT:</p>\n  \n  <p>If the rolls are random, then it is possible (although not\n   likely) that two consecutive rolls are equal.  What would be a\n   better way to test this?</p>\n</blockquote>\n\n<p>My idea is to test the <em>object_id</em> of <code>first_time</code> and <code>second_time</code>, using\n<code>assert_not_equal first_time.object_id, second_time.object_id</code>. It works but am i right ? As a beginner in Ruby and programming, what is an <code>object_id</code> indeed ?\nBy the way, is it possible to justify the text in markdown ?</p>\n\n<p>Any help will be appreciated !</p>\n"}, {"tags": ["ruby", "eigenclass"], "answers": [{"comments": [{"owner": {"reputation": 1791, "user_id": 2259057, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/JPn7D.jpg?s=128&g=1", "display_name": "Kevin Van Ryckegem", "link": "https://stackoverflow.com/users/2259057/kevin-van-ryckegem"}, "edited": false, "score": 1, "creation_date": 1485941898, "post_id": 41976296, "comment_id": 71130437, "body": "Neat! Didn&#39;t think about that."}], "tags": [], "owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "is_accepted": true, "score": 3, "last_activity_date": 1485941899, "last_edit_date": 1485941899, "creation_date": 1485941687, "answer_id": 41976296, "question_id": 41976277, "link": "https://stackoverflow.com/questions/41976277/can-a-ruby-object-have-multiple-eigenclasses/41976296#41976296", "title": "Can a Ruby object have multiple eigenclasses?", "body": "<p>These are added to a single metaclass, because <strong><em>object always has only one singleton class</em></strong>.</p>\n\n<p>You can check it:</p>\n\n<pre><code>foo.singleton_methods\n#=&gt; [:test, :test2]\nfoo.method(:test)\n#=&gt; #&lt;Method: #&lt;Object:0x007ff9b4d48388&gt;.test&gt;\nfoo.method(:test2)\n#=&gt; #&lt;Method: #&lt;Object:0x007ff9b4d48388&gt;.test2&gt;\n</code></pre>\n\n<p>Or using <a href=\"http://ruby-doc.org/core-2.4.0/Method.html#method-i-owner\" rel=\"nofollow noreferrer\">Method#<code>owner</code></a>:</p>\n\n<pre><code>foo.method(:test).owner == foo.method(:test2).owner\n#=&gt; true\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 63078, "user_id": 220147, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b3881a28fe402dd2d1de44717486cae8?s=128&d=identicon&r=PG", "display_name": "Michael Kohl", "link": "https://stackoverflow.com/users/220147/michael-kohl"}, "is_accepted": false, "score": 1, "last_activity_date": 1485941777, "creation_date": 1485941777, "answer_id": 41976320, "question_id": 41976277, "link": "https://stackoverflow.com/questions/41976277/can-a-ruby-object-have-multiple-eigenclasses/41976320#41976320", "title": "Can a Ruby object have multiple eigenclasses?", "body": "<p>They go to the same singleton class, which is pretty easy to verify yourself:</p>\n\n<pre><code>foo.singleton_class.instance_methods.grep(/test/)\n#=&gt; [:test, :test2]\n</code></pre>\n"}], "owner": {"reputation": 1791, "user_id": 2259057, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/JPn7D.jpg?s=128&g=1", "display_name": "Kevin Van Ryckegem", "link": "https://stackoverflow.com/users/2259057/kevin-van-ryckegem"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "accepted_answer_id": 41976296, "answer_count": 2, "score": 3, "last_activity_date": 1485942204, "creation_date": 1485941627, "last_edit_date": 1485942204, "question_id": 41976277, "link": "https://stackoverflow.com/questions/41976277/can-a-ruby-object-have-multiple-eigenclasses", "title": "Can a Ruby object have multiple eigenclasses?", "body": "<p>Eigenclasses are added into the inheritance hierarchy. </p>\n\n<p>If multiple singleton methods are added, are these added to the same eigenclass, or different eigenclasses which are both injected into the inheritance hierarchy of that object?</p>\n\n<p>For example</p>\n\n<pre><code>def foo.test\n  0\nend\ndef foo.test2\n  0\nend\n</code></pre>\n\n<p>Will this add 2 eigenclasses: one with a 'test' method, another with a 'test2' method? Or one eigenclass with both methods?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 99, "user_id": 7483478, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/5e6ff8b2d4df7499f15cf2eb498dc42f?s=128&d=identicon&r=PG&f=1", "display_name": "Herman Eyd", "link": "https://stackoverflow.com/users/7483478/herman-eyd"}, "edited": false, "score": 0, "creation_date": 1485941794, "post_id": 41976217, "comment_id": 71130359, "body": "&#39;proj&#39; is ruby array. &#39;project&#39; - rails instance of the class. He is already created in block &#39;if proj.class.name == &#39;String&#39;&#39;"}, {"owner": {"reputation": 99, "user_id": 7483478, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/5e6ff8b2d4df7499f15cf2eb498dc42f?s=128&d=identicon&r=PG&f=1", "display_name": "Herman Eyd", "link": "https://stackoverflow.com/users/7483478/herman-eyd"}, "edited": false, "score": 0, "creation_date": 1485942296, "post_id": 41976217, "comment_id": 71130693, "body": "But i have several different projects.  For example:  <code>projects   - title: &#39;family&#39;     todos:     - text: &#39;Buy milk&#39;       isCompleted: false     - text: &#39;Go to theatre&#39;     - isCompleted: false   - title: &#39;work&#39;     todos:     - text: &#39;Create code&#39;     - isCompleted: false     ...</code>"}, {"owner": {"reputation": 99, "user_id": 7483478, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/5e6ff8b2d4df7499f15cf2eb498dc42f?s=128&d=identicon&r=PG&f=1", "display_name": "Herman Eyd", "link": "https://stackoverflow.com/users/7483478/herman-eyd"}, "edited": false, "score": 0, "creation_date": 1485942649, "post_id": 41976217, "comment_id": 71130934, "body": "It&#39;s not a pure ruby. It&#39;s command for rails db:seed, but pure ruby block this command because thing that is ruby class."}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "reply_to_user": {"reputation": 99, "user_id": 7483478, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/5e6ff8b2d4df7499f15cf2eb498dc42f?s=128&d=identicon&r=PG&f=1", "display_name": "Herman Eyd", "link": "https://stackoverflow.com/users/7483478/herman-eyd"}, "edited": false, "score": 0, "creation_date": 1485942675, "post_id": 41976217, "comment_id": 71130953, "body": "@HermanEyd It looks like you&#39;re mixing projects and todos in your YAML file, which makes your code more complex than necessary."}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "reply_to_user": {"reputation": 99, "user_id": 7483478, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/5e6ff8b2d4df7499f15cf2eb498dc42f?s=128&d=identicon&r=PG&f=1", "display_name": "Herman Eyd", "link": "https://stackoverflow.com/users/7483478/herman-eyd"}, "edited": false, "score": 0, "creation_date": 1485942716, "post_id": 41976217, "comment_id": 71130979, "body": "I&#39;m not sure what you mean with &quot;pure ruby&quot;. Rake is pure Ruby."}, {"owner": {"reputation": 99, "user_id": 7483478, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/5e6ff8b2d4df7499f15cf2eb498dc42f?s=128&d=identicon&r=PG&f=1", "display_name": "Herman Eyd", "link": "https://stackoverflow.com/users/7483478/herman-eyd"}, "edited": false, "score": 0, "creation_date": 1485943003, "post_id": 41976217, "comment_id": 71131141, "body": "This code works good: <code>project = Project.create title: &quot;Family&quot; todo = Todo.create text: &quot;Buy milk&quot;, isCompleted: true project.todos &lt;&lt; todo</code>  And my script create the same code in out.  In first case it work, but in second not because ruby think that is him class."}, {"owner": {"reputation": 99, "user_id": 7483478, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/5e6ff8b2d4df7499f15cf2eb498dc42f?s=128&d=identicon&r=PG&f=1", "display_name": "Herman Eyd", "link": "https://stackoverflow.com/users/7483478/herman-eyd"}, "edited": false, "score": 0, "creation_date": 1485944079, "post_id": 41976217, "comment_id": 71131844, "body": "Before <code>k.each do |ke, proj|</code> i add <code>project = Project</code> and all work."}], "tags": [], "owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "is_accepted": true, "score": 3, "last_activity_date": 1485944273, "last_edit_date": 1485944273, "creation_date": 1485941452, "answer_id": 41976217, "question_id": 41976148, "link": "https://stackoverflow.com/questions/41976148/rails-seed-db-syntax/41976217#41976217", "title": "Rails seed.db syntax", "body": "<h1>Short answer</h1>\n\n<p>You really should change your YAML structure, it would make everything much easier.</p>\n\n<pre><code>---\nprojects:\n- title: Family\n  todos:\n  - text: Buy milk\n    is_completed: true\n  - text: Todo2\n    is_completed: false\n- title: Project2\n  todos:\n  - text: Todo3\n    is_completed: true\n  - text: Todo4\n    is_completed: false\n</code></pre>\n\n<p>You could parse it in a few lines :</p>\n\n<pre><code>yaml = YAML.load(File.read('test.yaml'))\n\nyaml['projects'].each do |project|\n  title = project['title']\n  p title\n  # Create project here\n  project['todos'].each do |todo|\n    p todo\n    # Create todo here\n    # Add todo to project\n  end\nend\n</code></pre>\n\n<h1>NoMethodError</h1>\n\n<pre><code>NoMethodError: undefined method 'todos' for nil:NilClass\n</code></pre>\n\n<p>means that the object on which <code>todos</code> is called (<code>project</code>) isn't defined.</p>\n\n<p>Indeed, <code>project</code> isn't defined, but <code>proj</code> is, so you should create a <code>Project</code> called <code>project</code> first.</p>\n\n<h1>Naming objects</h1>\n\n<p>To avoid confusion :</p>\n\n<ul>\n<li><code>project_name</code> could be a string containing the project name</li>\n<li><code>project_names</code> could be an array of project names</li>\n<li><code>project</code> could be a <code>Project</code> object</li>\n<li><code>todos</code> could be an Array of <code>Todo</code>s</li>\n</ul>\n\n<p>Your code indicates that <code>proj</code> is used for different purposes :</p>\n\n<pre><code>project = Project.create title: proj\nproj.each do |todo|\n</code></pre>\n\n<p>Those 2 <code>proj</code>s should be different objects with different variable names, and should be initialized separately.</p>\n\n<p>It's easy to write nested hashes in YAML, one hash could represent <code>Project</code>s, the other could represent <code>Todo</code>s.</p>\n\n<h1>Block variables</h1>\n\n<p>If you create a <code>Project</code> instance called <code>project</code> inside a loop during the first iteration, it will not be available to the next iterations :</p>\n\n<pre><code>[1, 2, 3].each do |i|\n  if i==1\n    project = \"my project\"\n  end\n  p i\n  p project\nend\n# 1\n# \"my project\"\n# 2\n# nil\n# 3\n# nil\n</code></pre>\n\n<p>If you want a <code>project</code> variable to be available to all iterations, you should create it <strong>outside</strong> of the loop :</p>\n\n<pre><code>project = \"my project\"\n[1, 2, 3].each do |i|\n  p i\n  p project\nend\n# 1\n# \"my project\"\n# 2\n# \"my project\"\n# 3\n# \"my project\"\n</code></pre>\n\n<p>Another possibility would be to use <code>@project</code> instead of <code>project</code> :</p>\n\n<pre><code>[1,2,3].each do |i|\n  if i==1\n    @project = \"my project\"\n  end\n  p i\n  p @project\nend\n# 1\n# \"my project\"\n# 2\n# \"my project\"\n# 3\n# \"my project\"\n</code></pre>\n\n<h1>case</h1>\n\n<p>Instead of :</p>\n\n<pre><code>if proj.class.name == 'String'\n        project = Project.create title: proj\n      elsif proj.class.name == 'Array'\n</code></pre>\n\n<p>You could use :</p>\n\n<pre><code>case proj\nwhen String\n  # proj is a String\nwhen Array\n  # proj is an Array\nend\n</code></pre>\n"}], "owner": {"reputation": 99, "user_id": 7483478, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/5e6ff8b2d4df7499f15cf2eb498dc42f?s=128&d=identicon&r=PG&f=1", "display_name": "Herman Eyd", "link": "https://stackoverflow.com/users/7483478/herman-eyd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 87, "favorite_count": 0, "accepted_answer_id": 41976217, "answer_count": 1, "score": 0, "last_activity_date": 1485944273, "creation_date": 1485941269, "question_id": 41976148, "link": "https://stackoverflow.com/questions/41976148/rails-seed-db-syntax", "title": "Rails seed.db syntax", "body": "<p>I have this code. The first and second command for rails work good, but \"project.todos &lt;&lt; todo\" part ruby interpreter treats like error. </p>\n\n<pre><code>NoMethodError: undefined method `todos' for nil:NilClass\n</code></pre>\n\n<p>How can i fix it? When i put in seeds.rb text like this, all good, but with code it not work:</p>\n\n<pre><code>#work\nproject = Project.create title: \"Family\"\ntodo = Todo.create text: \"Buy milk\", isCompleted: true\nproject.todos &lt;&lt; todo\n\n#code\nrequire 'yaml'\nyhash = YAML.load_file(File.open(\"#{Rails.root}/db/seeds.yml\"))\nyhash.each do |key, value|\n  value.each do |k, v|\n    k.each do |ke, proj|\n      if proj.class.name == 'String'\n        project = Project.create title: proj\n      elsif proj.class.name == 'Array'\n        proj.each do |todo|\n          i = 0\n          tmp = ''\n          todo.each do |to|\n            to.each do |t|\n              if i == 0\n                i = 1\n              elsif i == 2\n                i = 3\n              elsif i == 1\n                tmp = t\n                i  = 2\n              elsif i == 3\n                if t == false\n                  bool = 'false'\n                else\n                  bool = 'true'\n                end\n                todo = Todo.create text: tmp, isCompleted: bool\n                project.todos &lt;&lt; todo\n                i = 0\n                tmp = ''\n              end\n            end\n          end\n        end\n      end\n    end\n  end\nend\n</code></pre>\n"}, {"tags": ["javascript", "jquery", "ruby-on-rails", "ruby", "ajax"], "answers": [{"comments": [{"owner": {"reputation": 39, "user_id": 7315424, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/a7a5a0caa0f68669e2dda22dab031809?s=128&d=identicon&r=PG&f=1", "display_name": "Keng Hong", "link": "https://stackoverflow.com/users/7315424/keng-hong"}, "edited": false, "score": 0, "creation_date": 1486145267, "post_id": 41982909, "comment_id": 71235281, "body": "Hey sorry turns out I should just include it in a rails form to submit. Sorry for the confusion!"}], "tags": [], "owner": {"reputation": 31, "user_id": 3355636, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bx18J.jpg?s=128&g=1", "display_name": "k0t3k", "link": "https://stackoverflow.com/users/3355636/k0t3k"}, "is_accepted": false, "score": 0, "last_activity_date": 1485961223, "creation_date": 1485961223, "answer_id": 41982909, "question_id": 41975946, "link": "https://stackoverflow.com/questions/41975946/ajax-call-in-onchange-function-stops-sliding-animation-of-slider-bar/41982909#41982909", "title": "Ajax call in onChange function stops sliding animation of slider bar", "body": "<p>It depends on what is in your controller and in the results of what you're fetching with your ajax call.</p>\n\n<p>Do you return json/js output in controller's action?\nDo you get any errors in your browser console? </p>\n"}], "owner": {"reputation": 39, "user_id": 7315424, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/a7a5a0caa0f68669e2dda22dab031809?s=128&d=identicon&r=PG&f=1", "display_name": "Keng Hong", "link": "https://stackoverflow.com/users/7315424/keng-hong"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 74, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1485961223, "creation_date": 1485940648, "last_edit_date": 1485941592, "question_id": 41975946, "link": "https://stackoverflow.com/questions/41975946/ajax-call-in-onchange-function-stops-sliding-animation-of-slider-bar", "title": "Ajax call in onChange function stops sliding animation of slider bar", "body": "<p>I am trying to implement the jRange slider (<a href=\"https://github.com/nitinhayaran/jRange\" rel=\"nofollow noreferrer\">https://github.com/nitinhayaran/jRange</a>) in my Ruby on Rails project. To send data to my controller, I included an ajax call in my onchange function but this seems to result in a refresh when and my slider reverts to the original value. I am still able to access the value in controller via params[:data_value] though. How does the ajax call actually affects my change event?</p>\n\n<p>Here are my codes:-</p>\n\n<pre><code>// html\n&lt;input type=\"hidden\" class=\"slider-input\" value=\"1\" /&gt;\n\n// js.erb\n$('.slider-input').jRange({\n    from: 0,\n    to: 10.0,\n    step: 1,\n    scale: [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10],\n    format: '%s',\n    width: 800,\n    showLabels: true,\n    snap: true,\n    theme: 'theme-blue',\n    onstatechange: function(value) {\n        var array = value;\n        $.ajax({\n            url: \"/users/registrations/capability/edit\",\n            data: {\n                data_value: array\n            }\n        });\n    }\n});\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord", "rails-activerecord", "ruby-on-rails-5"], "answers": [{"comments": [{"owner": {"reputation": 107, "user_id": 4210683, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/73e1995f03fb6573ccce44135f8cd72d?s=128&d=identicon&r=PG&f=1", "display_name": "sneglefar", "link": "https://stackoverflow.com/users/4210683/sneglefar"}, "edited": false, "score": 0, "creation_date": 1485941498, "post_id": 41976064, "comment_id": 71130166, "body": "Thanks! This worked turning it into a relation! But maybe I wasnt precise in my question (edited again): What I&#39;m looking for is a relation where i list all the clients from the favorite collection. Is there a way to get a relation with only the clients in it? Not with the favorite_id, just the clients. This get me a relation with the favorite_ids."}, {"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "reply_to_user": {"reputation": 107, "user_id": 4210683, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/73e1995f03fb6573ccce44135f8cd72d?s=128&d=identicon&r=PG&f=1", "display_name": "sneglefar", "link": "https://stackoverflow.com/users/4210683/sneglefar"}, "edited": false, "score": 0, "creation_date": 1485941636, "post_id": 41976064, "comment_id": 71130260, "body": "@sneglefar <code>user.clients</code> is what you&#39;re looking for."}, {"owner": {"reputation": 107, "user_id": 4210683, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/73e1995f03fb6573ccce44135f8cd72d?s=128&d=identicon&r=PG&f=1", "display_name": "sneglefar", "link": "https://stackoverflow.com/users/4210683/sneglefar"}, "edited": false, "score": 0, "creation_date": 1485941984, "post_id": 41976064, "comment_id": 71130488, "body": "But user.clients gives me a CollectionProxy? user.clients.count then gives me 0. Is there a way to do user.clients and list them all in a relation? And thanks!"}, {"owner": {"reputation": 107, "user_id": 4210683, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/73e1995f03fb6573ccce44135f8cd72d?s=128&d=identicon&r=PG&f=1", "display_name": "sneglefar", "link": "https://stackoverflow.com/users/4210683/sneglefar"}, "edited": false, "score": 0, "creation_date": 1485942548, "post_id": 41976064, "comment_id": 71130862, "body": "It has to be said that I&#39;ve been using favorites.rb before for a polymorphic association, that didn&#39;t work out. Maybe I should try and destroy the whole model, and build it again, since I believe this could be messing with the ability to call user.clients - And thank you so much, its really helpful"}, {"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "reply_to_user": {"reputation": 107, "user_id": 4210683, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/73e1995f03fb6573ccce44135f8cd72d?s=128&d=identicon&r=PG&f=1", "display_name": "sneglefar", "link": "https://stackoverflow.com/users/4210683/sneglefar"}, "edited": false, "score": 0, "creation_date": 1485942808, "post_id": 41976064, "comment_id": 71131033, "body": "@sneglefar yea, I think if this is not working as it should (because it should), than something might be wrong with the <code>schema.rb</code>. Can&#39;t help you without seeing it, but rolling back the migrations and rebuilding it without polymorphism might work..."}, {"owner": {"reputation": 107, "user_id": 4210683, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/73e1995f03fb6573ccce44135f8cd72d?s=128&d=identicon&r=PG&f=1", "display_name": "sneglefar", "link": "https://stackoverflow.com/users/4210683/sneglefar"}, "edited": false, "score": 0, "creation_date": 1485942842, "post_id": 41976064, "comment_id": 71131059, "body": "I basically have a user.role = vendor and a user.role = user - Now I realize that I allow both: has_many :users, through: &#39;favorites for normal users to favorite clients, but also in user.rb I have belongs_to :user, for the vendors to own a client. But I want to have both and also the normal users to have favorites and still be able to find a normal users&#39; favorite clients like with user.clients. Is there any way to have both and accomplish what I&#39;m trying to?"}, {"owner": {"reputation": 107, "user_id": 4210683, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/73e1995f03fb6573ccce44135f8cd72d?s=128&d=identicon&r=PG&f=1", "display_name": "sneglefar", "link": "https://stackoverflow.com/users/4210683/sneglefar"}, "edited": false, "score": 0, "creation_date": 1485943060, "post_id": 41976064, "comment_id": 71131175, "body": "Since it&#39;s a bit late/complex to split the user model into a vendor user and a normal user model, is there a more advanced query I could do instead of users.clients to get all the favorites?"}, {"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "reply_to_user": {"reputation": 107, "user_id": 4210683, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/73e1995f03fb6573ccce44135f8cd72d?s=128&d=identicon&r=PG&f=1", "display_name": "sneglefar", "link": "https://stackoverflow.com/users/4210683/sneglefar"}, "edited": false, "score": 0, "creation_date": 1485943467, "post_id": 41976064, "comment_id": 71131427, "body": "@sneglefar to get all favorites of all users you would do the following: <code>Client.includes(:users).where(&quot;users.role = &#39;user&#39; AND users.id IS NOT NULL&quot;)</code>"}, {"owner": {"reputation": 107, "user_id": 4210683, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/73e1995f03fb6573ccce44135f8cd72d?s=128&d=identicon&r=PG&f=1", "display_name": "sneglefar", "link": "https://stackoverflow.com/users/4210683/sneglefar"}, "edited": false, "score": 0, "creation_date": 1485943568, "post_id": 41976064, "comment_id": 71131500, "body": "Sort of like: favorite_ids = user.favorites.ids to give an array with the ids.. then using the array to find the clients with those id&#39;s.. like: Client.find(id: favorite_ids) ... I know this is very close.. but it gives me this error: Couldn&#39;t find Client with &#39;id&#39;={:id=&gt;[430, 431, 432, 433]} - So how can I escape the hash, to insert a pure array?"}, {"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "reply_to_user": {"reputation": 107, "user_id": 4210683, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/73e1995f03fb6573ccce44135f8cd72d?s=128&d=identicon&r=PG&f=1", "display_name": "sneglefar", "link": "https://stackoverflow.com/users/4210683/sneglefar"}, "edited": false, "score": 0, "creation_date": 1485943604, "post_id": 41976064, "comment_id": 71131520, "body": "@sneglefar <code>find</code> returns the first found record, but you want to get a collection of records, thus you need <code>where</code>: <code>Client.where(id: favorite_ids)</code>."}, {"owner": {"reputation": 107, "user_id": 4210683, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/73e1995f03fb6573ccce44135f8cd72d?s=128&d=identicon&r=PG&f=1", "display_name": "sneglefar", "link": "https://stackoverflow.com/users/4210683/sneglefar"}, "edited": false, "score": 0, "creation_date": 1485944556, "post_id": 41976064, "comment_id": 71132152, "body": "This did the job!: collected = user.favorites.collect(&amp;:client_id) to get a pure array with ids (no hash-stuff in it).. Then I put them all into a where query like this: clients = Client.where(id: collected).. Thanks a lot for the help!"}, {"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "reply_to_user": {"reputation": 107, "user_id": 4210683, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/73e1995f03fb6573ccce44135f8cd72d?s=128&d=identicon&r=PG&f=1", "display_name": "sneglefar", "link": "https://stackoverflow.com/users/4210683/sneglefar"}, "edited": false, "score": 0, "creation_date": 1485944621, "post_id": 41976064, "comment_id": 71132198, "body": "@Hint: use <code>user.favorites.pluck(:client_id)</code> for most efficient SQL query instead of Ruby processing :)"}, {"owner": {"reputation": 107, "user_id": 4210683, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/73e1995f03fb6573ccce44135f8cd72d?s=128&d=identicon&r=PG&f=1", "display_name": "sneglefar", "link": "https://stackoverflow.com/users/4210683/sneglefar"}, "edited": false, "score": 0, "creation_date": 1485946620, "post_id": 41976064, "comment_id": 71133609, "body": "Thanks! Is there any way to sort by my ids-array in the newly created .where query ? - As of now it finds all the clients by id, but it throws away the sorting order of the array. Any ideas on how to solve that or what to google/search for?"}, {"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "reply_to_user": {"reputation": 107, "user_id": 4210683, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/73e1995f03fb6573ccce44135f8cd72d?s=128&d=identicon&r=PG&f=1", "display_name": "sneglefar", "link": "https://stackoverflow.com/users/4210683/sneglefar"}, "edited": false, "score": 0, "creation_date": 1485946777, "post_id": 41976064, "comment_id": 71133723, "body": "@sneglefar ActiveRecord always return the collection in the order of primary key, <code>id</code>. Thus it does not matter, in what order you pass the  <code>favorite_ids</code>, the returned collection will always be &quot;sorted&quot; against SQL rules."}, {"owner": {"reputation": 107, "user_id": 4210683, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/73e1995f03fb6573ccce44135f8cd72d?s=128&d=identicon&r=PG&f=1", "display_name": "sneglefar", "link": "https://stackoverflow.com/users/4210683/sneglefar"}, "edited": false, "score": 0, "creation_date": 1485946867, "post_id": 41976064, "comment_id": 71133795, "body": "Thanks. Could I somehow do a hack on that collection ordering them by my array of ids? Sort of like clients.sort_by(id: collected)"}, {"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "reply_to_user": {"reputation": 107, "user_id": 4210683, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/73e1995f03fb6573ccce44135f8cd72d?s=128&d=identicon&r=PG&f=1", "display_name": "sneglefar", "link": "https://stackoverflow.com/users/4210683/sneglefar"}, "edited": false, "score": 0, "creation_date": 1485946951, "post_id": 41976064, "comment_id": 71133843, "body": "@sneglefar here&#39;s the Ruby version for that: <code>favorite_ids.each_with_object([]) { |id, array| array &lt;&lt; Client.find(id) }</code>. The probjem, is that will return an Array, not AR::Collection"}, {"owner": {"reputation": 107, "user_id": 4210683, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/73e1995f03fb6573ccce44135f8cd72d?s=128&d=identicon&r=PG&f=1", "display_name": "sneglefar", "link": "https://stackoverflow.com/users/4210683/sneglefar"}, "edited": false, "score": 0, "creation_date": 1485947513, "post_id": 41976064, "comment_id": 71134202, "body": "To turn that into an AR I think it can be done like this: array = collected.each_with_object([]) { |id, array| array &lt;&lt; Client.find(id) } and then turn that array into an AR like this: Client.where(id: array.map(&amp;:id)   Great! So the ruby version works. Wish I somehow knew the rails version.."}, {"owner": {"reputation": 107, "user_id": 4210683, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/73e1995f03fb6573ccce44135f8cd72d?s=128&d=identicon&r=PG&f=1", "display_name": "sneglefar", "link": "https://stackoverflow.com/users/4210683/sneglefar"}, "edited": false, "score": 0, "creation_date": 1485948069, "post_id": 41976064, "comment_id": 71134543, "body": "Actually it doesn&#39;t matter much that it&#39;s an array to me, as long as its ordered. If anyone out there sees this, and knows the rails version, please don&#39;t hesitate to help out :) - I&#39;ll be forever grateful after spending days on this!"}, {"owner": {"reputation": 107, "user_id": 4210683, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/73e1995f03fb6573ccce44135f8cd72d?s=128&d=identicon&r=PG&f=1", "display_name": "sneglefar", "link": "https://stackoverflow.com/users/4210683/sneglefar"}, "edited": false, "score": 1, "creation_date": 1485949585, "post_id": 41976064, "comment_id": 71135481, "body": "And to reiterate what Andrey said, my way of mapping them into an AR did not work. It creates an AR but throws the order out the window"}, {"owner": {"reputation": 107, "user_id": 4210683, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/73e1995f03fb6573ccce44135f8cd72d?s=128&d=identicon&r=PG&f=1", "display_name": "sneglefar", "link": "https://stackoverflow.com/users/4210683/sneglefar"}, "edited": false, "score": 0, "creation_date": 1485971885, "post_id": 41976064, "comment_id": 71150673, "body": "Holy moly, I got it working by using the great order_as_specified gem!  For anyone interested: First do: favorites_collect_the_ids_in_array = user.favorites.pluck(:client_id) ... then do: ar_of_all_favorites = Client.order_as_specified(id: favorites_collect_the_ids_in_array).where(id: favorites_collect_the_ids_in_array)"}], "tags": [], "owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "is_accepted": true, "score": 1, "last_activity_date": 1485942147, "last_edit_date": 1485942147, "creation_date": 1485941027, "answer_id": 41976064, "question_id": 41975930, "link": "https://stackoverflow.com/questions/41975930/many-to-many-through-going-from-associationscollectionproxy-to-associationrel/41976064#41976064", "title": "Many to many through: Going from Associations::CollectionProxy to AssociationRelation", "body": "<p>You can operate on <a href=\"http://api.rubyonrails.org/classes/ActiveRecord/Associations/CollectionProxy.html\" rel=\"nofollow noreferrer\"><code>ActiveRecord::Associations::CollectionProxy</code></a> as you would normally do on <a href=\"http://api.rubyonrails.org/classes/ActiveRecord/AssociationRelation.html\" rel=\"nofollow noreferrer\"><code>ActiveRecord_AssociationRelation</code></a>.</p>\n\n<p>But if you really want to have the latter, just call, for example, <code>all</code>:</p>\n\n<pre><code>user.favorites.all.class #=&gt; Client::ActiveRecord_AssociationRelation\n</code></pre>\n\n<blockquote>\n  <p>How do I get a relation with all the clients?</p>\n</blockquote>\n\n<p>You have defined the association:</p>\n\n<pre><code>has_many :clients, through: 'favorites'\n</code></pre>\n\n<p>Thus getting a relation of associated <code>clients</code> is as easy as:</p>\n\n<pre><code>user.clients\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 107, "user_id": 4210683, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/73e1995f03fb6573ccce44135f8cd72d?s=128&d=identicon&r=PG&f=1", "display_name": "sneglefar", "link": "https://stackoverflow.com/users/4210683/sneglefar"}, "is_accepted": false, "score": 0, "last_activity_date": 1485972091, "creation_date": 1485972091, "answer_id": 41986576, "question_id": 41975930, "link": "https://stackoverflow.com/questions/41975930/many-to-many-through-going-from-associationscollectionproxy-to-associationrel/41986576#41986576", "title": "Many to many through: Going from Associations::CollectionProxy to AssociationRelation", "body": "<p>The great gem order_as_specified can do this in an easy manner!</p>\n\n<p>1: </p>\n\n<pre><code>@favorites_collect_the_ids_in_array = @user.favorites.pluck(:client_id) \n</code></pre>\n\n<p>... then:</p>\n\n<p>2:</p>\n\n<pre><code>@ar_of_all_favorites = Client.order_as_specified(id:  @favorites_collect_the_ids_in_array).where(id: @favorites_collect_the_ids_in_array)\n</code></pre>\n"}], "owner": {"reputation": 107, "user_id": 4210683, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/73e1995f03fb6573ccce44135f8cd72d?s=128&d=identicon&r=PG&f=1", "display_name": "sneglefar", "link": "https://stackoverflow.com/users/4210683/sneglefar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 0, "accepted_answer_id": 41976064, "answer_count": 2, "score": 0, "last_activity_date": 1485972091, "creation_date": 1485940580, "last_edit_date": 1485941751, "question_id": 41975930, "link": "https://stackoverflow.com/questions/41975930/many-to-many-through-going-from-associationscollectionproxy-to-associationrel", "title": "Many to many through: Going from Associations::CollectionProxy to AssociationRelation", "body": "<p>I have a many to many through relationship with users favoriting clients (Through favorites.rb) and I want to know how to turn a CollectionProxy into an AssociationRelation, so I can get a relation with all the clients that are the users' favorites. </p>\n\n<p>Or just simply, how to get them all in a AssociationRelation - doesn't have to be turned into from the CollectionProxy. </p>\n\n<p><strong>EDIT:</strong> What I'm looking for is simply a relation that lists all the clients. I realize I asked the question differently. <strong>How do I get a relation with all the clients?</strong> - Not a relation with the favorite_id, user_id, etc - I want a relation purely with the clients, and their rows.</p>\n\n<p>I can find the CollectionProxy like this:</p>\n\n<pre><code>user = User.last\nuser.favorites    # Gives me a CollectionProxy\n</code></pre>\n\n<p>But how do I find the favorite clients as an AssociationRelation?</p>\n\n<p>Models: </p>\n\n<p>user.rb:</p>\n\n<pre><code>has_many :favorites, :dependent =&gt; :destroy\nhas_many :clients, through: 'favorites'\n</code></pre>\n\n<p>Client.rb</p>\n\n<pre><code>has_many :favorites, :dependent =&gt; :destroy\nhas_many :users, through: 'favorites'\n</code></pre>\n\n<p>Favorite.rb</p>\n\n<pre><code>belongs_to :user\nbelongs_to :client\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "stripe-payments", "payment"], "answers": [{"comments": [{"owner": {"reputation": 14821, "user_id": 5307473, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oHbg3.jpg?s=128&g=1", "display_name": "Ywain", "link": "https://stackoverflow.com/users/5307473/ywain"}, "edited": false, "score": 0, "creation_date": 1485941015, "post_id": 41974714, "comment_id": 71129839, "body": "The <code>customer</code> parameter is mentioned in the API reference: <a href=\"https://stripe.com/docs/api#create_order-customer\" rel=\"nofollow noreferrer\">stripe.com/docs/api#create_order-customer</a>"}, {"owner": {"reputation": 7938, "user_id": 1511332, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/E2WEq.jpg?s=128&g=1", "display_name": "Pablo Jomer", "link": "https://stackoverflow.com/users/1511332/pablo-jomer"}, "reply_to_user": {"reputation": 14821, "user_id": 5307473, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oHbg3.jpg?s=128&g=1", "display_name": "Ywain", "link": "https://stackoverflow.com/users/5307473/ywain"}, "edited": false, "score": 0, "creation_date": 1485943010, "post_id": 41974714, "comment_id": 71131147, "body": "Thanks for the information I also found this here once I knew what I was looking for. (<a href=\"https://stripe.com/docs/api#pay_order\" rel=\"nofollow noreferrer\">stripe.com/docs/api#pay_order</a>)"}], "tags": [], "owner": {"reputation": 7938, "user_id": 1511332, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/E2WEq.jpg?s=128&g=1", "display_name": "Pablo Jomer", "link": "https://stackoverflow.com/users/1511332/pablo-jomer"}, "is_accepted": false, "score": 0, "last_activity_date": 1485936405, "creation_date": 1485936405, "answer_id": 41974714, "question_id": 41974618, "link": "https://stackoverflow.com/questions/41974618/how-to-charge-a-customer-instead-using-the-stripe-orders-api/41974714#41974714", "title": "How to charge a Customer instead using the Stripe orders API", "body": "<p>I managed to find out how this is done by trial and error. I finally attempted paying for the order pushing a hash like so. <code>orders.pay(:customer =&gt; customer_id)</code>.</p>\n\n<p>This actually worked for me even though I don't see it documented any where. I hope it helps you as well.</p>\n"}], "owner": {"reputation": 7938, "user_id": 1511332, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/E2WEq.jpg?s=128&g=1", "display_name": "Pablo Jomer", "link": "https://stackoverflow.com/users/1511332/pablo-jomer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 94, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1485936405, "creation_date": 1485935987, "last_edit_date": 1485936301, "question_id": 41974618, "link": "https://stackoverflow.com/questions/41974618/how-to-charge-a-customer-instead-using-the-stripe-orders-api", "title": "How to charge a Customer instead using the Stripe orders API", "body": "<p>I have been having some trouble charging my customers for an order in the Stripe orders API. The problem I had is that I can't find any information in the <a href=\"https://stripe.com/docs/orders\" rel=\"nofollow noreferrer\">API docs</a> of how to charge an order from an already existing customer. All I can find is that to charge a customer based on a token you may use the following code. <code>order.pay(:source =&gt; token)</code></p>\n\n<p>I create my orders in the following way as explained by the API docs.</p>\n\n<pre><code>Stripe.api_key = \"sk_your_secret_key\"\n\norder = Stripe::Order.create(\n  :currency =&gt; 'usd',\n  :email =&gt; 'jenny@example.com',\n  :items =&gt; [\n    {\n      :type =&gt; 'sku',\n      :parent =&gt; 'sku_9wSEbSepjclY6l',\n      :quantity =&gt; 2,\n    }\n  ],\n  :shipping =&gt; {\n    :name =&gt; 'Jenny Rosen',\n    :address =&gt; {\n      :line1 =&gt; '1234 Main Street',\n      :city =&gt; 'Anytown',\n      :country =&gt; 'US',\n      :postal_code =&gt; '123456'\n    }\n  },\n)\n</code></pre>\n\n<p>I have previously created my customers from a StipeJS API token like so.</p>\n\n<pre><code>token = params[:stripeToken]\n\ncustomer = Stripe::Customer.create(\n  :email =&gt; \"paying.user@example.com\",\n  :source =&gt; token,\n)\n</code></pre>\n\n<p>I now wish to use the customers stripe id to create the charge on the order but I can't find how I do this any where in the API docs.</p>\n\n<hr>\n\n<p><strong>Update</strong></p>\n\n<p>In a trial and error attempt I tried passing the customer id to the payment function like so <code>order.pay(:source =&gt; customer_id)</code>. This yeilded the following error.  <code>(Status 400) no such token: cus_id_string</code>. </p>\n"}, {"tags": ["ruby", "google-chrome", "watir-webdriver", "page-object-gem"], "answers": [{"tags": [], "owner": {"reputation": 3480, "user_id": 4072371, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/112e615d8c60908294e30848d9556186?s=128&d=identicon&r=PG", "display_name": "titusfortner", "link": "https://stackoverflow.com/users/4072371/titusfortner"}, "is_accepted": false, "score": 0, "last_activity_date": 1486054278, "creation_date": 1486054278, "answer_id": 42007869, "question_id": 41974032, "link": "https://stackoverflow.com/questions/41974032/changing-chrome-prefs-in-ruby-after-starting-the-browser/42007869#42007869", "title": "changing chrome prefs in `ruby` after starting the browser", "body": "<p>Those things can only be set at the time of browser instantiation. They are the parameters used by the browser driver when creating the session and can not be changed on an active season.</p>\n"}], "owner": {"reputation": 45, "user_id": 7499041, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh4.googleusercontent.com/-gLueZSFWHjc/AAAAAAAAAAI/AAAAAAAAFJc/8neg8JhuRFo/photo.jpg?sz=128", "display_name": "Ram Kumar", "link": "https://stackoverflow.com/users/7499041/ram-kumar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 102, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1486054278, "creation_date": 1485933533, "last_edit_date": 1485933965, "question_id": 41974032, "link": "https://stackoverflow.com/questions/41974032/changing-chrome-prefs-in-ruby-after-starting-the-browser", "title": "changing chrome prefs in `ruby` after starting the browser", "body": "<p>I have created a browser using </p>\n\n<p>`@prefs = {download: { prompt_for_download: false, default_directory: \"#{Dir.home}/new2\" }   }</p>\n\n<p>Watir::Browser.new :chrome, prefs: @prefs`</p>\n\n<p>and when my script runs, it initiates another window while clicking Print option on Chrome</p>\n\n<p>I want to change the <code>prefs</code> of the opened window to <code>@prefs</code> once it opens</p>\n\n<p>Is there any way of writing it in <code>ruby</code>, <code>watir</code>, <code>page-object</code></p>\n\n<p>I have no idea how to change the <code>prefs</code> of newly opened window</p>\n"}, {"tags": ["arrays", "ruby", "algorithm", "sorting"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1485931663, "post_id": 41973428, "comment_id": 71125039, "body": "You may want to use <code>Array#shift</code> instead of iterating, just <code>array_1.dup</code> and manipulate your copy. I&#39;m not sure this method will work in its current form."}, {"owner": {"reputation": 25823, "user_id": 24468, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/PWl6C.png?s=128&g=1", "display_name": "akuhn", "link": "https://stackoverflow.com/users/24468/akuhn"}, "edited": false, "score": 0, "creation_date": 1485933216, "post_id": 41973428, "comment_id": 71125752, "body": "Or create enumerators and use <code>peek</code> and <code>next</code>. Merge sort goes back to the age of tapes and can thus be implemented using enumerators only."}], "answers": [{"comments": [{"owner": {"reputation": 3914, "user_id": 4057366, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/uZ3e5.jpg?s=128&g=1", "display_name": "Alex Holubenko", "link": "https://stackoverflow.com/users/4057366/alex-holubenko"}, "edited": false, "score": 0, "creation_date": 1485938632, "post_id": 41974202, "comment_id": 71128355, "body": "<code>&gt; array_1 = [5,8,9,11]</code> <code>&gt; array_2 = [6,4,7,12,13]</code> <code>&gt; merge(array_1, array_2)</code>  <code>=&gt; [5, 6, 4, 7, 8, 9, 11, 12, 13]</code>  :("}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "reply_to_user": {"reputation": 3914, "user_id": 4057366, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/uZ3e5.jpg?s=128&g=1", "display_name": "Alex Holubenko", "link": "https://stackoverflow.com/users/4057366/alex-holubenko"}, "edited": false, "score": 0, "creation_date": 1485938776, "post_id": 41974202, "comment_id": 71128440, "body": "@AlexGolubenko: From the question : <code>two sorted arrays</code>"}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 2, "creation_date": 1485938987, "post_id": 41974202, "comment_id": 71128579, "body": "I was looking for a rescue clause in your code. I didn&#39;t know for <code>loop</code> and <code>StopIteration</code>. Nice!"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1485941786, "post_id": 41974202, "comment_id": 71130350, "body": "I really like your enumerator based approach. You could also <i>return</i> an enumerator, using <code>yield</code> instead of <code>c &lt;&lt;</code>."}, {"owner": {"reputation": 25823, "user_id": 24468, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/PWl6C.png?s=128&g=1", "display_name": "akuhn", "link": "https://stackoverflow.com/users/24468/akuhn"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1485944009, "post_id": 41974202, "comment_id": 71131804, "body": "@Stefan great suggestion! Updated."}], "tags": [], "owner": {"reputation": 25823, "user_id": 24468, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/PWl6C.png?s=128&g=1", "display_name": "akuhn", "link": "https://stackoverflow.com/users/24468/akuhn"}, "is_accepted": true, "score": 11, "last_activity_date": 1485944346, "last_edit_date": 1485944346, "creation_date": 1485934157, "answer_id": 41974202, "question_id": 41973428, "link": "https://stackoverflow.com/questions/41973428/merge-two-sorted-arrays-without-built-in-ruby-function/41974202#41974202", "title": "merge two sorted arrays without built in ruby function", "body": "<p>Try this</p>\n\n<pre><code>def merge(array_1, array_2)\n  return enum_for(__method__, array_1, array_2) unless block_given?\n\n  a = array_1.each\n  b = array_2.each\n  loop { yield a.peek &lt; b.peek ? a.next : b.next }\n\n  # Your code is not working because the equivalent of these two lines\n  # is missing. After you reach the end of one array you have to append\n  # all remaining elements of the other array. I am doing this here by\n  # just exhausting both enumerators, one of which is empty by now.\n\n  loop { yield a.next }\n  loop { yield b.next }\nend\n\np merge([5, 8, 9, 11], [4, 6, 7, 12, 13]).entries\n</code></pre>\n\n<p>No need to keep track of indices. Merge sort goes back to the age of mainframes and tapes and can thus be implemented using enumerators only.</p>\n\n<p>How does this work?</p>\n\n<ul>\n<li><code>each</code> creates enumerators </li>\n<li><code>peek</code> returns the next element without advancing the enumerator</li>\n<li><code>next</code> returns the next element with advancing the enumerator</li>\n<li>both of the above raise <code>StopIteration</code> when they reach the end of the enumerator</li>\n<li><code>loop</code> repeats a block of code until <code>StopIteration</code> is raised</li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 1, "last_activity_date": 1485939221, "creation_date": 1485939221, "answer_id": 41975509, "question_id": 41973428, "link": "https://stackoverflow.com/questions/41973428/merge-two-sorted-arrays-without-built-in-ruby-function/41975509#41975509", "title": "merge two sorted arrays without built in ruby function", "body": "<p>One could insert the elements of one array into a copy of the other array, using <a href=\"http://ruby-doc.org/core-2.3.0/Array.html#method-i-bsearch_index\" rel=\"nofollow noreferrer\">Array#bsearch_index</a> to determine where each element of the first array should go.</p>\n\n<pre><code>def merge(array_1, array_2)\n  array_2.each_with_object(array_1.dup) { |n,arr|\n     arr.insert(arr.bsearch_index { |i| i&gt;n } || arr.size, n) }\nend\n\narray_1\n  #=&gt; [5, 8, 9, 11] \narray_2\n  #=&gt; [4, 6, 7, 12, 13, 14] \n\nmerge(array_1, array_2)\n  #=&gt; [4, 5, 6, 7, 8, 9, 11, 12, 13, 14] \n</code></pre>\n\n<p>This is O(n<sub>1</sub>*log(n<sub>2</sub>)), n<sub>1</sub> and n<sub>2</sub> being the sizes of the two arrays, so it would be more efficient for the loop to be over the smaller of the two arrays.</p>\n"}], "owner": {"reputation": 177, "user_id": 6820613, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh6.googleusercontent.com/-PAwm_Rcg4r4/AAAAAAAAAAI/AAAAAAAAAA8/Re3vs4EUYeg/photo.jpg?sz=128", "display_name": "David Ramirez", "link": "https://stackoverflow.com/users/6820613/david-ramirez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1069, "favorite_count": 1, "accepted_answer_id": 41974202, "answer_count": 2, "score": 2, "last_activity_date": 1485944346, "creation_date": 1485931199, "last_edit_date": 1485939713, "question_id": 41973428, "link": "https://stackoverflow.com/questions/41973428/merge-two-sorted-arrays-without-built-in-ruby-function", "title": "merge two sorted arrays without built in ruby function", "body": "<p>Im trying to merge two sorted arrays without using any build in sorting methods. Here is what I have so far.</p>\n\n<pre><code>def merge(array_1, array_2)\n    i = 0\n    k = 0\n    merged_array = []\n    while i &lt; array_1.count &amp;&amp; k &lt; array_2.count\n        while k &lt; array_2.count &amp;&amp; array_1[i] &gt; array_2[k]\n            merged_array &lt;&lt; array_2[k]\n            k += 1\n        end\n        merged_array &lt;&lt; array_1[i]\n        i += 1\n    end\n    merged_array\nend\n\narray_1 = [5,8,9,11]\narray_2 = [4,6,7,12,13]\n\np merge(array_1, array_2)\n</code></pre>\n\n<p>The input is   <code>array_1 = [5,8,9,11]</code> and <code>array_2 = [4,6,7,12,13]</code> and the output is suppose to be <code>[4, 5, 6, 7, 8, 9, 10, 11, 12, 13]</code>.  Can someone please explain why its not working. Thank you!</p>\n"}, {"tags": ["ruby", "shell", "vagrant", "devops"], "answers": [{"comments": [{"owner": {"reputation": 749, "user_id": 2617731, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/y34DC.jpg?s=128&g=1", "display_name": "SSF", "link": "https://stackoverflow.com/users/2617731/ssf"}, "edited": false, "score": 0, "creation_date": 1485986624, "post_id": 41974444, "comment_id": 71158473, "body": "Thanks @Fr&#233;d&#233;ricHenri, That did the trick. I also found that I can pull the ` config.vm.provision &quot;shell&quot;, path: &quot;vmscripts/bootstrap.sh&quot;` and place it right at the top. This way the script gets executed once for ever instance."}], "tags": [], "owner": {"reputation": 44774, "user_id": 4296747, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-muYS9LV5AoA/AAAAAAAAAAI/AAAAAAAACG4/KcTmlFyGWRI/photo.jpg?sz=128", "display_name": "Frederic Henri", "link": "https://stackoverflow.com/users/4296747/frederic-henri"}, "is_accepted": true, "score": 5, "last_activity_date": 1485935246, "creation_date": 1485935246, "answer_id": 41974444, "question_id": 41973288, "link": "https://stackoverflow.com/questions/41973288/vagrant-shell-provision-script-runs-twice/41974444#41974444", "title": "Vagrant Shell Provision Script Runs Twice", "body": "<p>Its because you're mixing <code>config</code> and the specific machine variable.</p>\n\n<p>Any methods applied to <code>config.vm</code> will apply to ALL your machines (even if you put it in a specific machine block) so its better to put all your <code>config.vm</code> properties outside of any specific machine block, you could rewrite your script as</p>\n\n<pre><code>Vagrant.configure(VAGRANTFILE_API_VERSION) do |config|\n\n#The box name and the URL to Retrieve the Vagrant Box from\nconfig.vm.box = \"eFx-Dev\"\nconfig.vm.box_url = \"http://web/provisioning/vagrant-boxes/centos7-basev0.1.box\"\nconfig.ssh.insert_key = false\nconfig.vm.network \"public_network\", type: \"dhcp\"\n\n\n#Creating the first Dev Machine\n#With network address being assigned via DHCP\n#and bootstraped via a shell script.\n#This script can be unique for each machine.\n#But at the moment they are bootstarpped the same.\n#The spects of the machine.\n#Can be adjusted based on requirements.\nconfig.vm.define \"eFxDev1\" do |eFxDev1|\n  eFxDev1.vm.hostname = \"eFxDev1\"\n  eFxDev1.vm.provision \"shell\", path: \"vmscripts/bootstrap.sh\"\n  eFxDev1.vm.provider \"virtualbox\" do |vb|\n          vb.name = \"eFx-Dev1\"\n          vb.memory = \"10124\"\n          vb.customize [\"modifyvm\", :id, \"--cpus\", 4]\n  end\nend\n\nconfig.vm.define \"eFxDev2\" do |eFxDev2|\n  eFxDev2.vm.hostname = \"eFxDev2\"\n  eFxDev2.vm.box = \"eFx-Dev\"\n  eFxDev2.vm.provision \"shell\", path: \"vmscripts/bootstrap.sh\"\n  eFxDev2.vm.provider \"virtualbox\" do |vb|\n          vb.name = \"eFx-Dev2\"\n          vb.memory = \"10124\"\n          vb.customize [\"modifyvm\", :id, \"--cpus\", 4]\n  end\nend\n\nconfig.vm.define \"eFxDev3\" do |eFxDev3|\n  eFxDev3.vm.hostname = \"eFxDev3\"\n  eFxDev3.vm.box = \"eFx-Dev\"\n  eFxDev3.vm.provision \"shell\", path: \"vmscripts/bootstrap.sh\"\n  eFxDev3.vm.provider \"virtualbox\" do |vb|\n          vb.name = \"eFx-Dev3\"\n          vb.memory = \"10124\"\n          vb.customize [\"modifyvm\", :id, \"--cpus\", 4]\n  end\n end\nend\n</code></pre>\n"}], "owner": {"reputation": 749, "user_id": 2617731, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/y34DC.jpg?s=128&g=1", "display_name": "SSF", "link": "https://stackoverflow.com/users/2617731/ssf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 922, "favorite_count": 0, "accepted_answer_id": 41974444, "answer_count": 1, "score": 2, "last_activity_date": 1563293797, "creation_date": 1485930666, "last_edit_date": 1563293797, "question_id": 41973288, "link": "https://stackoverflow.com/questions/41973288/vagrant-shell-provision-script-runs-twice", "title": "Vagrant Shell Provision Script Runs Twice", "body": "<p>I am trying to spin up 3 VMs from the same Vagrant Base Box. However, only 2 VMs get created. \nThis is due to the fact that the shell provisioner script gets executed twice during the provisioning of the second VM.\nAs a result the process is terminated with the errors detailed below.</p>\n\n<p>Here is my Vagrantfile:</p>\n\n<pre><code>Vagrant.configure(VAGRANTFILE_API_VERSION) do |config|\n\n#The box name and the URL to Retrieve the Vagrant Box from\n  config.vm.box = \"eFx-Dev\"\n  config.vm.box_url = \"http://web/provisioning/vagrant-boxes/centos7-basev0.1.box\"\n  config.ssh.insert_key = false\n\n\n#Creating the first Dev Machine\n#With network address being assigned via DHCP\n#and bootstraped via a shell script.\n#This script can be unique for each machine.\n#But at the moment they are bootstarpped the same.\n#The spects of the machine.\n#Can be adjusted based on requirements.\n  config.vm.define \"eFxDev1\" do |eFxDev1|\n        eFxDev1.vm.hostname = \"eFxDev1\"\n        eFxDev1.vm.box = \"eFx-Dev\"\n        config.vm.network \"public_network\", type: \"dhcp\"\n        config.vm.provision \"shell\", path: \"vmscripts/bootstrap.sh\"\n        config.vm.provider \"virtualbox\" do |vb|\n                vb.name = \"eFx-Dev1\"\n                vb.memory = \"10124\"\n                vb.customize [\"modifyvm\", :id, \"--cpus\", 4]\n  end\nend\n\n  config.vm.define \"eFxDev2\" do |eFxDev2|\n        eFxDev2.vm.hostname = \"eFxDev2\"\n        eFxDev2.vm.box = \"eFx-Dev\"\n        config.vm.network \"public_network\", type: \"dhcp\"\n        config.vm.provision \"shell\", path: \"vmscripts/bootstrap.sh\"\n        config.vm.provider \"virtualbox\" do |vb|\n                vb.name = \"eFx-Dev2\"\n                vb.memory = \"10124\"\n                vb.customize [\"modifyvm\", :id, \"--cpus\", 4]\n  end\nend\n\n  config.vm.define \"eFxDev3\" do |eFxDev3|\n        eFxDev3.vm.hostname = \"eFxDev3\"\n        eFxDev3.vm.box = \"eFx-Dev\"\n        config.vm.network \"public_network\", type: \"dhcp\"\n        config.vm.provision \"shell\", path: \"vmscripts/bootstrap.sh\"\n        config.vm.provider \"virtualbox\" do |vb|\n                vb.name = \"eFx-Dev3\"\n                vb.memory = \"10124\"\n                vb.customize [\"modifyvm\", :id, \"--cpus\", 4]\n  end\n end\nend\n</code></pre>\n\n<p>The first VM gets deployed by running the provisioner shell ONCE. The VM Boots up and Vagrant moves on to create the second VM:</p>\n\n<pre><code>==&gt; eFxDev1: Importing base box 'eFx-Dev'...\n==&gt; eFxDev1: Matching MAC address for NAT networking...\n...\n==&gt; eFxDev1: Running provisioner: shell...\n    eFxDev1: Running: /tmp/vagrant-shell20170201-60595-wpa6qn.sh\n==&gt; eFxDev1: + yum install dos2unix -y --disableplugin=fastestmirror\n==&gt; eFxDev1: + sudo groupadd Efx\n==&gt; eFxDev1: groupadd: group 'Efx' already exists\n...\n</code></pre>\n\n<p>The Second VM is deployed but for some reason runs the provisioner script TWICE and fails:</p>\n\n<pre><code>==&gt; eFxDev2: Importing base box 'eFx-Dev'...\n==&gt; eFxDev2: Matching MAC address for NAT networking...\n...\n==&gt; eFxDev2: Running provisioner: shell...\n    eFxDev2: Running: /tmp/vagrant-shell20170201-60595-1fwit5t.sh\n==&gt; eFxDev2: + yum install dos2unix -y --disableplugin=fastestmirror\n==&gt; eFxDev2: + sudo groupadd Efx\n==&gt; eFxDev2: groupadd: group 'Efx' already exists\n...\n==&gt; eFxDev2: Running provisioner: shell...\n    eFxDev2: Running: /tmp/vagrant-shell20170201-60595-1mu7y6h.sh\n==&gt; eFxDev2: + yum install dos2unix -y --disableplugin=fastestmirror\n==&gt; eFxDev2: Nothing to do\n==&gt; eFxDev2: + sudo groupadd Efx\n==&gt; eFxDev2: groupadd: group 'Efx' already exists\nThe SSH command responded with a non-zero exit status. Vagrant\nassumes that this means the command failed. The output for this command\nshould be in the log above. Please read the output to determine what\n</code></pre>\n\n<p>As a result the process fails and the third VM does not get provisioned.\nWhy is the provision script run twice?</p>\n"}, {"tags": ["ruby", "timer", "shoes", "green-shoes"], "comments": [{"owner": {"reputation": 41846, "user_id": 926143, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/3396173c3d22988be1a0732d184902aa?s=128&d=identicon&r=PG", "display_name": "7stud", "link": "https://stackoverflow.com/users/926143/7stud"}, "edited": false, "score": 0, "creation_date": 1486002651, "post_id": 41973221, "comment_id": 71163566, "body": "Do you have any references that discuss defining a method inside a window block?  I&#39;m aware that def&#39;s attach themselves to whatever the current class is, and I know that self inside a window block is the window, but it does not necessarily follow that the current class is the window, e.g. in an <code>instance_eval</code> block, self is the caller, while the current class is the caller&#39;s singleton class.  On the other hand, inside a class, say <code>class Dog</code>, but outside any def&#39;s, self = Dog and the current class is Dog as well.  Your code executes without error, so <code>self=window=current_class</code>."}, {"owner": {"reputation": 47, "user_id": 7472521, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b74d766ec2161d3772e21d99d2ec21c?s=128&d=identicon&r=PG&f=1", "display_name": "LogNIsGood", "link": "https://stackoverflow.com/users/7472521/lognisgood"}, "reply_to_user": {"reputation": 41846, "user_id": 926143, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/3396173c3d22988be1a0732d184902aa?s=128&d=identicon&r=PG", "display_name": "7stud", "link": "https://stackoverflow.com/users/926143/7stud"}, "edited": false, "score": 0, "creation_date": 1486003136, "post_id": 41973221, "comment_id": 71163676, "body": "I&#39;m actually new to ruby so I took a guess on that and you&#39;re right it does run without error. The interesting thing is I end up getting method errors for @p.text and seg faults at times for  trying to call instance variables inside a para call. Sadly, green shoes is a bit useless compared to current shoes but it&#39;s the one my group choice to use. I&#39;ll make that method outside of the block this time and see if that changes anything"}, {"owner": {"reputation": 41846, "user_id": 926143, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/3396173c3d22988be1a0732d184902aa?s=128&d=identicon&r=PG", "display_name": "7stud", "link": "https://stackoverflow.com/users/926143/7stud"}, "edited": false, "score": 0, "creation_date": 1486003894, "post_id": 41973221, "comment_id": 71163877, "body": "Okay.  I used regular Shoes(walkabout) to answer your question, and it looks terrible in OSX.  The window title is blurry, as well as the min, max, and close buttons.  It&#39;s as if someone took a picture of an OSX window with a terrible cell phone, then converted it to a .png, then used that to represent a window.  There are also other problems: the text in the elements title, subtitle, and caption are cut off at the baseline.  Many years ago, I messed around with wxRuby, and it was pretty nice.  Unfortunately, the maintainer gave up on wxRuby."}, {"owner": {"reputation": 47, "user_id": 7472521, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b74d766ec2161d3772e21d99d2ec21c?s=128&d=identicon&r=PG&f=1", "display_name": "LogNIsGood", "link": "https://stackoverflow.com/users/7472521/lognisgood"}, "reply_to_user": {"reputation": 41846, "user_id": 926143, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/3396173c3d22988be1a0732d184902aa?s=128&d=identicon&r=PG", "display_name": "7stud", "link": "https://stackoverflow.com/users/926143/7stud"}, "edited": false, "score": 0, "creation_date": 1486004067, "post_id": 41973221, "comment_id": 71163941, "body": "how do you install the regular shoes on ubuntu? green shoes is really bad to be honest. I had trouble installing shoes on ubuntu"}, {"owner": {"reputation": 41846, "user_id": 926143, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/3396173c3d22988be1a0732d184902aa?s=128&d=identicon&r=PG", "display_name": "7stud", "link": "https://stackoverflow.com/users/926143/7stud"}, "edited": false, "score": 0, "creation_date": 1486004216, "post_id": 41973221, "comment_id": 71163971, "body": "There&#39;s a linux download here: <a href=\"http://shoesrb.com/downloads/\" rel=\"nofollow noreferrer\">shoesrb.com/downloads</a>.  Did you try that? I had the opposite problem: I&#39;ve tried installing Green Shoes a couple of times over the years and never could get it installed on OSX."}, {"owner": {"reputation": 47, "user_id": 7472521, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b74d766ec2161d3772e21d99d2ec21c?s=128&d=identicon&r=PG&f=1", "display_name": "LogNIsGood", "link": "https://stackoverflow.com/users/7472521/lognisgood"}, "reply_to_user": {"reputation": 41846, "user_id": 926143, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/3396173c3d22988be1a0732d184902aa?s=128&d=identicon&r=PG", "display_name": "7stud", "link": "https://stackoverflow.com/users/926143/7stud"}, "edited": false, "score": 0, "creation_date": 1486005851, "post_id": 41973221, "comment_id": 71164346, "body": "your solution worked for green shoes too. I wonder why I was getting errors with .text calls. I guess you can use .text calls inside of a flow, but not outside of a flow"}, {"owner": {"reputation": 41846, "user_id": 926143, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/3396173c3d22988be1a0732d184902aa?s=128&d=identicon&r=PG", "display_name": "7stud", "link": "https://stackoverflow.com/users/926143/7stud"}, "edited": false, "score": 0, "creation_date": 1486068448, "post_id": 41973221, "comment_id": 71199422, "body": "For future searchers, <i>and I know that self inside a window block is the window</i>--Actually, Shoes Rules has an example with a main window and a child window, and self inside a window block is a second instance of a Shoes.app object.  I guess when you call close on that second instance, it closes that App object&#39;s window."}], "answers": [{"tags": [], "owner": {"reputation": 41846, "user_id": 926143, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/3396173c3d22988be1a0732d184902aa?s=128&d=identicon&r=PG", "display_name": "7stud", "link": "https://stackoverflow.com/users/926143/7stud"}, "is_accepted": true, "score": 1, "last_activity_date": 1486003358, "last_edit_date": 1486003358, "creation_date": 1485994287, "answer_id": 41992195, "question_id": 41973221, "link": "https://stackoverflow.com/questions/41973221/ruby-green-shoes-timer/41992195#41992195", "title": "Ruby green shoes timer", "body": "<p>You can replace the text of the current para which displays the clock:</p>\n\n<pre><code>Shoes.app do\n  flow do \n    button 'Timer', width: 100, height: 50 do\n      window width: 200, height: 100 do  #Open a child window when the button is clicked\n        seconds = 3\n        tenths = 0\n        clock =  '%02d:%02d'\n\n        flow do\n          @p = para clock % [seconds, tenths], #Assign the clock para to an instance variable, \n            size: 50,                          #which will make the variable visible outside this block.\n            stroke: black\n        end\n\n        a = animate(10) do  #Upate the clock every 1/10 of a second.\n          tenths -= 1\n\n          if tenths &lt; 0\n            tenths  = 9\n            seconds -= 1\n          end\n\n          @p.text = clock % [seconds, tenths]  #Replace the clock text.\n\n          if seconds == 0 and tenths == 0\n            a.stop\n            alert(\"game over\")\n            close   #=&gt;self.close where self is the window whose block contains this code\n          end\n        end #animate\n\n      end #window\n    end #button\n  end #flow\nend #app\n</code></pre>\n\n<p>To verify that the clock is actualy showing each time increment, you can slow things down by changing <code>animate(10)</code> to <code>animate(1)</code>.</p>\n"}], "owner": {"reputation": 47, "user_id": 7472521, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b74d766ec2161d3772e21d99d2ec21c?s=128&d=identicon&r=PG&f=1", "display_name": "LogNIsGood", "link": "https://stackoverflow.com/users/7472521/lognisgood"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 260, "favorite_count": 0, "accepted_answer_id": 41992195, "answer_count": 1, "score": 2, "last_activity_date": 1486003358, "creation_date": 1485930323, "question_id": 41973221, "link": "https://stackoverflow.com/questions/41973221/ruby-green-shoes-timer", "title": "Ruby green shoes timer", "body": "<p>I'm building this popup countdown timer for a game. The issue is I can't figure out how to update the the animate so that the display changes too. It works so far, but you can't see the numbers changing. It blends into the 00:00. I'm pretty positive it works so far just having trouble with this change. This is done with green shoes. Any ideas what I'm doing wrong here?</p>\n\n<pre><code>#Timer button used for creating a countdown timer for the game.\n    #Game ends when timer is zero.\n    flow width: 80, height: 0.2 do\n    button 'Timer', width: 1.0, height: 1.0 do\n        window do\n        def time_change!\n           @clock = '%02d:%02d' % [@second / 60, @second % 60]\n           if(@second == 0)\n            alert \"game is over\"\n            @clock = '00:00'\n                close()\n            para @clock, size: 50, stroke: black\n           end\n         end\n\n         background whitesmoke\n         @clock = '00:00'\n         para @clock, size: 50, stroke: black\n\n\n         @second = 10\n\n        animate(1) do\n            @second -= 1\n            time_change!\n            para @clock, size: 50, stroke: black\n\n        end\n    end\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "devise"], "comments": [{"owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 0, "creation_date": 1485927369, "post_id": 41972575, "comment_id": 71123383, "body": "Did you replace <i>MODEL</i> in the command with actual model name. Something like <i>User</i>?"}, {"owner": {"reputation": 75, "user_id": 7166632, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/45eaded08decbadc87b3c70babb7ba35?s=128&d=identicon&r=PG&f=1", "display_name": "Harshini", "link": "https://stackoverflow.com/users/7166632/harshini"}, "reply_to_user": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 0, "creation_date": 1485927806, "post_id": 41972575, "comment_id": 71123533, "body": "Yeah.I had replaced MODEL with User"}, {"owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 0, "creation_date": 1485927907, "post_id": 41972575, "comment_id": 71123563, "body": "So, what is the exact issue you are facing?"}, {"owner": {"reputation": 75, "user_id": 7166632, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/45eaded08decbadc87b3c70babb7ba35?s=128&d=identicon&r=PG&f=1", "display_name": "Harshini", "link": "https://stackoverflow.com/users/7166632/harshini"}, "reply_to_user": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 0, "creation_date": 1485928070, "post_id": 41972575, "comment_id": 71123619, "body": "In my project I am unable to find the controller that is created by devise.But when i had executed rake routes, the controller is displayed."}, {"owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 0, "creation_date": 1485928326, "post_id": 41972575, "comment_id": 71123703, "body": "when you ran <code>rails generate devise User</code>, didn&#39;t it show the path of models, controllers generated on your terminal?"}], "answers": [{"tags": [], "owner": {"reputation": 4527, "user_id": 5497690, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/577c8ad14fffb59cd619e43634c51dad?s=128&d=identicon&r=PG&f=1", "display_name": "puneet18", "link": "https://stackoverflow.com/users/5497690/puneet18"}, "is_accepted": false, "score": 1, "last_activity_date": 1485927729, "creation_date": 1485927729, "answer_id": 41972663, "question_id": 41972575, "link": "https://stackoverflow.com/questions/41972575/generating-devise-controllers-rails-devise/41972663#41972663", "title": "Generating Devise Controllers - Rails Devise", "body": "<p>Replace MODEL with User like</p>\n\n<pre><code>rails generate devise User\n</code></pre>\n\n<p>It will generate User model under app/modeld/user.rb and user controller under app/controllers/users_controller.rb</p>\n\n<p>run migration to add user table under database using command:</p>\n\n<pre><code>rake db:migrate\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 58, "user_id": 4858564, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/422c810410ece8995f59c0b05b587c18?s=128&d=identicon&r=PG", "display_name": "Tom_soup", "link": "https://stackoverflow.com/users/4858564/tom-soup"}, "is_accepted": false, "score": 2, "last_activity_date": 1485929468, "last_edit_date": 1485929468, "creation_date": 1485928478, "answer_id": 41972822, "question_id": 41972575, "link": "https://stackoverflow.com/questions/41972575/generating-devise-controllers-rails-devise/41972822#41972822", "title": "Generating Devise Controllers - Rails Devise", "body": "<p>running </p>\n\n<pre><code>rails generate devise MODEL\n</code></pre>\n\n<p>when using the Devise gem will not create the controllers for you.  </p>\n\n<p>In your case, if you want to change any methods in the Devise controllers, you may want to create your own controller that inherits Devise controllers.</p>\n\n<p>For example, changing the devise registration controllers to allow first and last name would require you to create your own controller under app/controllers/MODEL/registrations_controller.rb </p>\n\n<p><a href=\"https://github.com/plataformatec/devise/tree/master/app/controllers/devise\" rel=\"nofollow noreferrer\">Link to Devise controllers here</a></p>\n\n<pre><code>class MODEL::RegistrationsController &lt; Devise::RegistrationsController\n  before_filter :configure_permitted_parameters\n\n  protected\n\n  def configure_permitted_parameters\n    devise_parameter_sanitizer.permit(:sign_up, keys: [:first_name, :last_name])\n  end\nend\n</code></pre>\n\n<p>and instructing your routes.rb to use the controller</p>\n\n<pre><code>devise_for :MODEL, :controllers =&gt; { :registrations =&gt; \"MODEL/registrations\" }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 75, "user_id": 7166632, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/45eaded08decbadc87b3c70babb7ba35?s=128&d=identicon&r=PG&f=1", "display_name": "Harshini", "link": "https://stackoverflow.com/users/7166632/harshini"}, "edited": false, "score": 0, "creation_date": 1485939946, "post_id": 41972901, "comment_id": 71129153, "body": "It helped.Thank you"}], "tags": [], "owner": {"reputation": 4101, "user_id": 1482055, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/f4D9p.jpg?s=128&g=1", "display_name": "Milind", "link": "https://stackoverflow.com/users/1482055/milind"}, "is_accepted": true, "score": 7, "last_activity_date": 1485928786, "creation_date": 1485928786, "answer_id": 41972901, "question_id": 41972575, "link": "https://stackoverflow.com/questions/41972575/generating-devise-controllers-rails-devise/41972901#41972901", "title": "Generating Devise Controllers - Rails Devise", "body": "<p>There are many commands that <code>devise</code> provides..</p>\n\n<ol>\n<li><code>rails generate devise:install</code> - will create <code>config/devise.rb</code> </li>\n<li><code>rails generate devise User</code> - will create <code>db/migration-file-for-user-model</code> which <em>commented</em> code,which you can <em>uncomment</em>,if you need other modules..such as <code>confirmable</code>,<code>omniauth</code> etc</li>\n<li><code>rails generate devise:views</code> - will create all views in the <code>devise</code> folder with <code>app/views/devise/sessions</code>,<code>app/views/devise/confirmations</code>,<code>registrations</code> etc folder and its views respectively.</li>\n<li><code>rails generate devise:views users</code> - will create folder of <code>app/views/users/passwords/</code>,<code>app/views/users/confirmations</code> ..etc instead of <code>devise</code> folder above.</li>\n<li><code>rails generate devise:controllers</code> -  will create all <code>controllers</code>..<strong>similar to above</strong>...here it will create <code>app/controllers/devise/sessions_controller.rb</code> with default commented code,which you need to <em>edit</em> else leave it as it is for basic authentication.Moreover,you can also add <code>users</code> <em>scope</em> in the end,to generate controllers in <code>controllers/users/</code> and not <code>controllers/devise/</code></li>\n</ol>\n\n<p>You may also go through this good <a href=\"https://www.sitepoint.com/devise-authentication-in-depth/\" rel=\"noreferrer\"><strong>devise tutorial</strong></a> ..</p>\n\n<p>Hope it helps.</p>\n"}], "owner": {"reputation": 75, "user_id": 7166632, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/45eaded08decbadc87b3c70babb7ba35?s=128&d=identicon&r=PG&f=1", "display_name": "Harshini", "link": "https://stackoverflow.com/users/7166632/harshini"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5777, "favorite_count": 1, "accepted_answer_id": 41972901, "answer_count": 3, "score": 1, "last_activity_date": 1486005915, "creation_date": 1485927214, "last_edit_date": 1486005915, "question_id": 41972575, "link": "https://stackoverflow.com/questions/41972575/generating-devise-controllers-rails-devise", "title": "Generating Devise Controllers - Rails Devise", "body": "<p>I am trying devise for the first time.I am following the link:<a href=\"https://github.com/plataformatec/devise\" rel=\"nofollow noreferrer\">https://github.com/plataformatec/devise</a>. Here,i have executed the command:</p>\n\n<pre><code>rails generate devise MODEL\n</code></pre>\n\n<p>when i have executed this,the model and view parts are created.When i checked the routes,I have noticed that there is a controller created with the name:MODEL.but i didnot find the controller in the project.My query is how can we find whether a controller is generated or not and use that controller in the project.\nThanks in advance.</p>\n"}, {"tags": ["ruby", "cloud-foundry", "buildpack"], "answers": [{"comments": [{"owner": {"reputation": 10226, "user_id": 1585136, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de253a68c4e3690787c1c55fc1104413?s=128&d=identicon&r=PG", "display_name": "Daniel Mikusa", "link": "https://stackoverflow.com/users/1585136/daniel-mikusa"}, "edited": false, "score": 0, "creation_date": 1485997882, "post_id": 41987387, "comment_id": 71162400, "body": "Another option is to write a <code>.profile.d&#47;</code> script from the build pack.  These are sourced by the platform prior to your application starting.  I believe a lot of the standard build pack&#39;s do this to setup environment variables and configurations."}, {"owner": {"reputation": 10226, "user_id": 1585136, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de253a68c4e3690787c1c55fc1104413?s=128&d=identicon&r=PG", "display_name": "Daniel Mikusa", "link": "https://stackoverflow.com/users/1585136/daniel-mikusa"}, "edited": false, "score": 0, "creation_date": 1485998225, "post_id": 41987387, "comment_id": 71162477, "body": "As an FYI, you can&#39;t just call <code>cf set-env</code> from the build pack.  <i>Unless</i> you were to install <code>cf</code> from your build pack and some how pass through user credentials for <code>cf</code> to use.  The platform doesn&#39;t do anything to assist you in this endeavor though.  Fortunately, you probably don&#39;t need to do that."}, {"owner": {"reputation": 528, "user_id": 4793898, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153383930010661/picture?type=large", "display_name": "Abelard Chow", "link": "https://stackoverflow.com/users/4793898/abelard-chow"}, "edited": false, "score": 0, "creation_date": 1486046631, "post_id": 41987387, "comment_id": 71186179, "body": "Thanks Scott and Daniel.  I will give it a try.  And no, I was not planning to us cf set-env from buildpack.  I know I can do it via cli and application manifest.  I tried to used ENV[], but it does not work.  I was wondering if there is any API or library"}], "tags": [], "owner": {"reputation": 2941, "user_id": 1299533, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fecafb1f46cd05cd8caaa6e9a4b9cad?s=128&d=identicon&r=PG", "display_name": "Scott Frederick", "link": "https://stackoverflow.com/users/1299533/scott-frederick"}, "is_accepted": true, "score": 2, "last_activity_date": 1485974919, "creation_date": 1485974919, "answer_id": 41987387, "question_id": 41972360, "link": "https://stackoverflow.com/questions/41972360/can-cloud-foundry-user-defined-env-variables-set-from-buildpack/41987387#41987387", "title": "Can Cloud Foundry user-defined env variables set from buildpack?", "body": "<p>Are you asking about creating a custom buildpack, or using one of the available CF buildpacks? </p>\n\n<p>A buildpack sets the command that is used to launch an application, so if you are creating your own buildpack or customizing an existing one you can set env vars as part of that startup command. For example a startup command could like like this: </p>\n\n<p><code>\nVAR1=VALUE1 VAR2=VALUE2 some-command\n</code></p>\n"}], "owner": {"reputation": 528, "user_id": 4793898, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153383930010661/picture?type=large", "display_name": "Abelard Chow", "link": "https://stackoverflow.com/users/4793898/abelard-chow"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 252, "favorite_count": 0, "accepted_answer_id": 41987387, "answer_count": 1, "score": 0, "last_activity_date": 1485974919, "creation_date": 1485926127, "question_id": 41972360, "link": "https://stackoverflow.com/questions/41972360/can-cloud-foundry-user-defined-env-variables-set-from-buildpack", "title": "Can Cloud Foundry user-defined env variables set from buildpack?", "body": "<p>In Cloud Foundry, user-defined env variables can be set using \"cf set-env\" command.</p>\n\n<p>Can the same be set from buildpack programmatically?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "devise", "remember-me"], "comments": [{"owner": {"reputation": 569, "user_id": 4890885, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/0e5ca2becef8d1db461c64f526b7a50b?s=128&d=identicon&r=PG&f=1", "display_name": "Jyoti mishra", "link": "https://stackoverflow.com/users/4890885/jyoti-mishra"}, "edited": false, "score": 1, "creation_date": 1485937137, "post_id": 41972196, "comment_id": 71127605, "body": "I think cockies value is encrypted using salt, so it&#39;s larger."}, {"owner": {"reputation": 349, "user_id": 1340324, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/jAX91.jpg?s=128&g=1", "display_name": "ksh", "link": "https://stackoverflow.com/users/1340324/ksh"}, "reply_to_user": {"reputation": 569, "user_id": 4890885, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/0e5ca2becef8d1db461c64f526b7a50b?s=128&d=identicon&r=PG&f=1", "display_name": "Jyoti mishra", "link": "https://stackoverflow.com/users/4890885/jyoti-mishra"}, "edited": false, "score": 0, "creation_date": 1485998978, "post_id": 41972196, "comment_id": 71162684, "body": "Oh, I see. Thanks! cookies.signed seem to be eocrypted."}], "owner": {"reputation": 349, "user_id": 1340324, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/jAX91.jpg?s=128&g=1", "display_name": "ksh", "link": "https://stackoverflow.com/users/1340324/ksh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 470, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1485925182, "creation_date": 1485925182, "question_id": 41972196, "link": "https://stackoverflow.com/questions/41972196/return-remember-user-token-of-devise-on-api", "title": "return remember_user_token of Devise on API", "body": "<p>I have Rails app with Devise and it has login API of iOS app.<br>\nUser model is rememberable.<br>\nMy iOS app use webview to view rails app as web site,<br>\nand so\nI want to return user's <strong>remember_user_token</strong> (on web browsers, devise seems to set it to cookies automatically) from login API.  </p>\n\n<p>In login API, I want to get <strong>remember_user_token</strong>, but I don't know how to.  </p>\n\n<pre><code>user.remember_token\n</code></pre>\n\n<p>is 20 characters, but on web browser, <strong>remember_user_token</strong> in cookies is 114 characters. It seems to they are difficult.<br>\nDevise or Rails encrypt token?  </p>\n\n<p>Code of my app is here.</p>\n\n<h1>models/user.rb</h1>\n\n<pre><code># Table name: users\n#  remember_created_at        :datetime\n#  remember_token             :string(255)\nclass User &lt; ActiveRecord::Base\n  devise :database_authenticatable, :encryptable, :rememberable, :confirmable, :trackable, :recoverable, :timeoutable\nend\n</code></pre>\n\n<h1>api/sessions_controller.rb</h1>\n\n<pre><code>module Api  \n  class SessionsController &lt; Devise::SessionsController\n    layout false\n    skip_before_action :verify_authenticity_token\n\n    def create\n      catch(:warden) do\n        self.resource = warden.authenticate!\n        sign_in(resource_name, resource)\n\n        render json: { remember_user_token: remember_user_token }\n        return\n      end\n\n      render json: { error: \"error message\" }\n    end\n  end\nend\n</code></pre>\n\n<p>Any advise will be appriciated.<br>\nThank you!</p>\n"}, {"tags": ["ruby", "dictionary", "methods"], "comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1485924549, "post_id": 41972000, "comment_id": 71122415, "body": "Why do you think so?"}, {"owner": {"reputation": 199, "user_id": 5951200, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b69edd56925ffe408cd07598018ad2f?s=128&d=identicon&r=PG&f=1", "display_name": "mxmxx", "link": "https://stackoverflow.com/users/5951200/mxmxx"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1485924884, "post_id": 41972000, "comment_id": 71122540, "body": "Hi Sawa. Because in the string interpolation I don&#39;t see where <code>b</code> would equal <code>bar</code>. It kind of looks like it would actually be <code>afoo=&amp;bbar</code>"}], "answers": [{"comments": [{"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1485939052, "post_id": 41972479, "comment_id": 71128622, "body": "It looks like OP is more confused about <code>map</code> arguments than about string interpolation."}, {"owner": {"reputation": 9602, "user_id": 3607136, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/NRFso.jpg?s=128&g=1", "display_name": "Gagan Gami", "link": "https://stackoverflow.com/users/3607136/gagan-gami"}, "reply_to_user": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1485946944, "post_id": 41972479, "comment_id": 71133841, "body": "@EricDuminil : yes for that I have explain that from hash it will fetch <code>key</code> and <code>value</code>"}], "tags": [], "owner": {"reputation": 9602, "user_id": 3607136, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/NRFso.jpg?s=128&g=1", "display_name": "Gagan Gami", "link": "https://stackoverflow.com/users/3607136/gagan-gami"}, "is_accepted": false, "score": 7, "last_activity_date": 1485947087, "last_edit_date": 1485947087, "creation_date": 1485926755, "answer_id": 41972479, "question_id": 41972000, "link": "https://stackoverflow.com/questions/41972000/understanding-map-in-ruby/41972479#41972479", "title": "Understanding map in Ruby", "body": "<pre><code>&gt; {:a =&gt; \"foo\", :b =&gt; \"bar\"}.map{|key, value| \"#{key}=#{value}\"}\n#=&gt; [\"a=foo\", \"b=bar\"]\n</code></pre>\n\n<p><code>map</code> method will fetch each element of hash as <code>key</code> and <code>value</code> pair</p>\n\n<p><code>\"#{key}=#{value}\"</code> is a <strong>String Interpolation</strong> which adds <code>=</code> between your <code>key</code> and <code>value</code></p>\n\n<blockquote>\n  <p>Using this syntax everything between the opening #{ and closing } bits\n  is evaluated as Ruby code, and the result of this evaluation will be\n  embedded into the string surrounding it.</p>\n</blockquote>\n\n<p><strong><a href=\"https://ruby-doc.org/core-2.2.0/Array.html#method-i-join\" rel=\"nofollow noreferrer\">Array#join</a></strong> will returns a string created by converting each element of the array to a string, separated by the given separator.</p>\n\n<p>so here in your case:</p>\n\n<pre><code>&gt; [\"a=foo\", \"b=bar\"].join('&amp;')\n#=&gt; \"a=foo&amp;b=bar\" \n</code></pre>\n\n<hr>\n\n<p>In <strong>Rails</strong> you can convert hash to query params using <strong><a href=\"http://apidock.com/rails/ActiveSupport/CoreExtensions/Hash/to_query\" rel=\"nofollow noreferrer\">Hash#to_query</a></strong> method, which will return the same result.</p>\n\n<pre><code> &gt; {:a =&gt; \"foo\", :b =&gt; \"bar\"}.to_query\n #=&gt; \"a=foo&amp;b=bar\"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 231, "user_id": 6200880, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96c7046956a4f4855ccbed7472b79ac6?s=128&d=identicon&r=PG&f=1", "display_name": "sjgallen", "link": "https://stackoverflow.com/users/6200880/sjgallen"}, "is_accepted": false, "score": 1, "last_activity_date": 1485926801, "creation_date": 1485926801, "answer_id": 41972491, "question_id": 41972000, "link": "https://stackoverflow.com/questions/41972000/understanding-map-in-ruby/41972491#41972491", "title": "Understanding map in Ruby", "body": "<p>There are 2 method calls occurring here, the map and the join. One way to make it clearer and easier to understand is to separate the two methods and alter the keywords used in the map method.  So instead of </p>\n\n<p><code>{:a =&gt; \"foo\", :b =&gt; \"bar\"}.map{|a, b| \"#{a}=#{b}\"}.join('&amp;')</code></p>\n\n<p>Lets have </p>\n\n<p><code>{:a =&gt; \"foo\", :b =&gt; \"bar\"}.map{|key, value| \"#{key}=#{value}\"}</code></p>\n\n<p>This returns an array. <code>#=&gt;  [\"a=foo\", \"b=bar\"]</code></p>\n\n<p>Now:</p>\n\n<p><code>[\"a=foo\", \"b=bar\"].join('&amp;')</code></p>\n\n<p>produces a sting \n<code>#=&gt; \"a=foo&amp;b=bar\"</code></p>\n\n<p>Map is iterating over the two key/value pairs and creating a string with the '=' between them and returns it in an array. It would iterate over all the key/value pairs in the harsh. Our example just has 2.</p>\n\n<p>Join attaches the two elements of the array together with the '&amp;' symbol between them and returns it as string. It would attach all elements of the array no matter its size.</p>\n\n<p>What helped me to learn map and join is to open up the irb or pry and create a few hashes and arrays and play around with them.  I highly recommend using unique names for your values that explain what is going on. \nI hope this helps you.   </p>\n"}, {"comments": [{"owner": {"reputation": 199, "user_id": 5951200, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b69edd56925ffe408cd07598018ad2f?s=128&d=identicon&r=PG&f=1", "display_name": "mxmxx", "link": "https://stackoverflow.com/users/5951200/mxmxx"}, "edited": false, "score": 1, "creation_date": 1485958427, "post_id": 41973078, "comment_id": 71141495, "body": "Really appreciate it, @tadman.  Your example cleared things up, as it was the local variable being the same as the symbol that was confusing me."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 199, "user_id": 5951200, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b69edd56925ffe408cd07598018ad2f?s=128&d=identicon&r=PG&f=1", "display_name": "mxmxx", "link": "https://stackoverflow.com/users/5951200/mxmxx"}, "edited": false, "score": 0, "creation_date": 1485973167, "post_id": 41973078, "comment_id": 71151369, "body": "For me blocks and symbols were the most confusing and foreign aspects of Ruby to understand when I was first learning it. Takes some getting used to, but once you do there&#39;s a lot of amazing things you can do with them. Glad I could help."}], "tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": true, "score": 4, "last_activity_date": 1485929710, "creation_date": 1485929710, "answer_id": 41973078, "question_id": 41972000, "link": "https://stackoverflow.com/questions/41972000/understanding-map-in-ruby/41973078#41973078", "title": "Understanding map in Ruby", "body": "<p>The symbol key <code>:a</code> and the local variable <code>a</code> have nothing in common. The names are only coincidentally the same. Consider this code instead:</p>\n\n<pre><code>{\n  var1: \"value1\",\n  var2: \"value2\"\n}.map do |key, value|\n  \"#{key}=#{value}\"\nend.join('&amp;')\n# =&gt; \"var1=value1&amp;var2=value2\"\n</code></pre>\n\n<p>Here the variables are different. What <code>map</code> does, like <code>each</code>, is iterate over each <em>key-value pair</em> in the Hash. That means you can do things like this, too, to simplify:</p>\n\n<pre><code>{\n  var1: \"value1\",\n  var2: \"value2\"\n}.map do |pair|\n  pair.join('=')\nend.join('&amp;')\n# =&gt; \"var1=value1&amp;var2=value2\"\n</code></pre>\n\n<p>Normally when iterating over a Hash you should use names like <code>k,v</code> or <code>key,value</code> to be clear on what you're operating on.</p>\n\n<p>If you're ever confused what's going on internally in an iteration loop, you can debug like this:</p>\n\n<pre><code>{\n  var1: \"value1\",\n  var2: \"value2\"\n}.map do |pair|\n  puts pair.inspect\n  pair.join('=')\nend.join('&amp;')\n</code></pre>\n\n<p>That gives you this output:</p>\n\n<pre><code>[:var1, \"value1\"]\n[:var2, \"value2\"]\n</code></pre>\n\n<p>That technique helps a lot. There's even the short-hand notation for this:</p>\n\n<pre><code>p pair\n</code></pre>\n"}], "owner": {"reputation": 199, "user_id": 5951200, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b69edd56925ffe408cd07598018ad2f?s=128&d=identicon&r=PG&f=1", "display_name": "mxmxx", "link": "https://stackoverflow.com/users/5951200/mxmxx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 558, "favorite_count": 0, "accepted_answer_id": 41973078, "answer_count": 3, "score": 2, "last_activity_date": 1485947087, "creation_date": 1485923932, "question_id": 41972000, "link": "https://stackoverflow.com/questions/41972000/understanding-map-in-ruby", "title": "Understanding map in Ruby", "body": "<p>I'm pretty new to Ruby and am trying to understand an example of the map method that I came across:</p>\n\n<pre><code>{:a =&gt; \"foo\", :b =&gt; \"bar\"}.map{|a, b| \"#{a}=#{b}\"}.join('&amp;')\n</code></pre>\n\n<p>which returns:</p>\n\n<pre><code>=&gt; \"a=foo&amp;b=bar\"\n</code></pre>\n\n<p>I don't understand how the</p>\n\n<pre><code>b=bar\n</code></pre>\n\n<p>is returned. The string interpolation is what is confusing me as it seems it would return something like:</p>\n\n<pre><code>=&gt; \"a=foo&amp;bbar\"\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "http"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1485923644, "post_id": 41971669, "comment_id": 71122141, "body": "What does this code do? What&#39;s the problem?"}, {"owner": {"reputation": 1, "user_id": 7498449, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6465b9b182785f2cd907b028b03d62a7?s=128&d=identicon&r=PG&f=1", "display_name": "G. Victoria", "link": "https://stackoverflow.com/users/7498449/g-victoria"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1485925264, "post_id": 41971669, "comment_id": 71122656, "body": "It is supposed to randomly select from an array and use the ip selected as the IP making the request, but I cannot figure out how to do it in Rails. faraday.host is not a real option it&#39;s just an example."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1485926034, "post_id": 41971669, "comment_id": 71122887, "body": "I think <code>host</code> specifies the host to connect <i>to</i>. Might want to check out <a href=\"http://stackoverflow.com/questions/11854660/how-to-specify-network-interface-with-rubys-faraday\">this question</a>."}], "owner": {"reputation": 1, "user_id": 7498449, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6465b9b182785f2cd907b028b03d62a7?s=128&d=identicon&r=PG&f=1", "display_name": "G. Victoria", "link": "https://stackoverflow.com/users/7498449/g-victoria"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 187, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1485923629, "creation_date": 1485921677, "last_edit_date": 1485923629, "question_id": 41971669, "link": "https://stackoverflow.com/questions/41971669/making-faraday-http-requests-from-multiple-ips", "title": "Making Faraday HTTP requests from multiple IPs", "body": "<p>I am trying to do something like this to have different request come from different IP's at random.</p>\n\n<pre><code>   random_ip = [\"127.0.0.1\", \"127.0.0.2\"].sample    \n\n    conn = Faraday.new(:url =&gt; url) do |faraday|\n         faraday.request  :url_encoded             # form-encode POST params\n         faraday.response :logger                  # log requests to STDOUT\n         faraday.adapter  Faraday.default_adapter  # make requests with Net::HTTP\n         faraday.host random_ip\n    end\n    result = conn.get url\n</code></pre>\n\n<p>IP's are on a Linux dedicated server if it makes any difference.</p>\n"}, {"tags": ["ruby", "jenkins", "chef-infra", "aws-opsworks"], "comments": [{"owner": {"reputation": 1365, "user_id": 4894399, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-tY1Cz7EDNxc/AAAAAAAAAAI/AAAAAAAABb4/3Qa15VP4_ZY/photo.jpg?sz=128", "display_name": "Szymon Szypulski", "link": "https://stackoverflow.com/users/4894399/szymon-szypulski"}, "edited": false, "score": 1, "creation_date": 1485931890, "post_id": 41971348, "comment_id": 71125148, "body": "There is <a href=\"https://github.com/chef-cookbooks/jenkins\" rel=\"nofollow noreferrer\">official cookbook</a> for Jenkins installation. Have you tried looking into Jenkins logs? (usually <code>&#47;var&#47;log&#47;jenkins</code>) or output of <code>apt-get -q -y install jenkins=2.32.1 </code>?"}, {"owner": {"reputation": 1901, "user_id": 2002471, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/222d816f24fcb2d01e92937b6af01d34?s=128&d=identicon&r=PG", "display_name": "chicks", "link": "https://stackoverflow.com/users/2002471/chicks"}, "edited": false, "score": 0, "creation_date": 1485952075, "post_id": 41971348, "comment_id": 71137178, "body": "Your <code>apt-get</code> is failing.  Try running that by itself and see what happens."}, {"owner": {"reputation": 15030, "user_id": 3627607, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd5fd623c0fdd0c93a2535cf6293ec5d?s=128&d=identicon&r=PG", "display_name": "Tensibai", "link": "https://stackoverflow.com/users/3627607/tensibai"}, "edited": false, "score": 0, "creation_date": 1485959148, "post_id": 41971348, "comment_id": 71142013, "body": "Check jenkins logs, it&#39;s the post-install script which is failing. According to <a href=\"https://issues.jenkins-ci.org/browse/JENKINS-31814\" rel=\"nofollow noreferrer\">this</a> it could be permissions on /tmp"}, {"owner": {"reputation": 501, "user_id": 4978971, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/12568bf3b1251cdccebcbcabdc3f241c?s=128&d=identicon&r=PG&f=1", "display_name": "JackChance", "link": "https://stackoverflow.com/users/4978971/jackchance"}, "edited": false, "score": 0, "creation_date": 1486059289, "post_id": 41971348, "comment_id": 71194479, "body": "If its succeeding on the second run reliably then you have a timing issue with your recipe. Something is starting before a contingent process completes (a download or install of a requirement) or the resources are running in an order you&#39;re not anticipating. Try identifying what your required resources are and control the timing with <code>notifies</code> statements <a href=\"https://docs.chef.io/resource_common.html#notifications\" rel=\"nofollow noreferrer\">docs.chef.io/resource_common.html#notifications</a>."}], "answers": [{"tags": [], "owner": {"reputation": 2771, "user_id": 1887370, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/08bf95201cabfe02acc28041cff862ff?s=128&d=identicon&r=PG", "display_name": "sakurashinken", "link": "https://stackoverflow.com/users/1887370/sakurashinken"}, "is_accepted": true, "score": 0, "last_activity_date": 1517253056, "last_edit_date": 1517253056, "creation_date": 1486062191, "answer_id": 42010291, "question_id": 41971348, "link": "https://stackoverflow.com/questions/41971348/chef-12-script-on-aws-opsworks-failing-to-install-jenkins/42010291#42010291", "title": "chef 12 script on AWS opsworks failing to install jenkins", "body": "<p>It turns out the answer was in the chef stacktrace file. The apt-get process runs twice and could not access the lockfile in dpkg in the install package step. Changing </p>\n\n<pre><code>execute 'update apt-get' do\n    command 'apt-get update'\nend\n\n\npackage 'install Jenkins' do\n    package_name \"jenkins\"\nend\n</code></pre>\n\n<p>to </p>\n\n<pre><code>apt_update 'all platforms' do\n    action :update\nend\n\napt_package 'jenkins' do\n  action :install\nend\n</code></pre>\n\n<p>solved the issue.</p>\n"}], "owner": {"reputation": 2771, "user_id": 1887370, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/08bf95201cabfe02acc28041cff862ff?s=128&d=identicon&r=PG", "display_name": "sakurashinken", "link": "https://stackoverflow.com/users/1887370/sakurashinken"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 176, "favorite_count": 0, "accepted_answer_id": 42010291, "answer_count": 1, "score": 0, "last_activity_date": 1517253056, "creation_date": 1485919166, "question_id": 41971348, "link": "https://stackoverflow.com/questions/41971348/chef-12-script-on-aws-opsworks-failing-to-install-jenkins", "title": "chef 12 script on AWS opsworks failing to install jenkins", "body": "<p>I have the following chef 12 script which I am running on aws opsworks to install jenkins. I sourced it from the following site: <a href=\"https://wiki.jenkins-ci.org/display/JENKINS/Installing+Jenkins+on+Ubuntu\" rel=\"nofollow noreferrer\">https://wiki.jenkins-ci.org/display/JENKINS/Installing+Jenkins+on+Ubuntu</a> When I run it, it fails with the following error:</p>\n\n<pre><code>execute 'add jenkins source to apt' do\n    command \"wget -q -O - https://pkg.jenkins.io/debian/jenkins-ci.org.key | sudo apt-key add -\"\nend\n\n\nfile '/etc/apt/sources.list.d/jenkins.list' do\n    content 'deb http://pkg.jenkins.io/debian-stable binary/'\nend\n\nexecute 'update apt-get' do\n    command 'apt-get update'\nend\n\n\npackage 'install Jenkins' do\n    package_name \"jenkins\"\nend\n\npackage 'install nginx' do\n    package_name 'nginx'\nend\n\nfile '/etc/nginx/sites-enabled/default' do\n    action :delete\nend\n\ncookbook_file '/etc/nginx/sites-available/jenkins' do\n    source 'jenkins'\nend\n\nlink '/etc/nginx/sites-enabled/jenkins' do\n    to '/etc/nginx/sites-available/jenkins'\n    link_type :symbolic\nend\n\nservice 'nginx' do\n    action :restart\nend\n\nservice 'jenkins' do\n    action :restart\nend\n</code></pre>\n\n<p>When I run execute recipes on a c4.4xlarge image running ubuntu 14.04, I get the following errors</p>\n\n<pre><code>Setting up jenkins (2.32.1) ...\n* Starting Jenkins Continuous Integration Server jenkins\n...fail!\nSetting up libnss3-nssdb (2:3.26.2-0ubuntu0.14.04.3) ...\n</code></pre>\n\n<p>and</p>\n\n<pre><code>STDERR: invoke-rc.d: initscript jenkins, action \"start\" failed.\ndpkg: error processing package jenkins (--configure):\nsubprocess installed post-installation script returned error exit status 7\nErrors were encountered while processing:\njenkins\nE: Sub-process /usr/bin/dpkg returned an error code (1)\n---- End output of apt-get -q -y install jenkins=2.32.1 ----\nRan apt-get -q -y install jenkins=2.32.1 returned 100\n\nResource Declaration:\n---------------------\n# In /var/chef/runs/55bf900b-16e6-4573-9948-8571284d80e7/local-mode-cache/cache/cookbooks/jenkins/recipes/default.rb\n\n16: package 'install Jenkins' do\n17:     package_name \"jenkins\"\n18: end\n19: \n\nCompiled Resource:\n------------------\n# Declared in /var/chef/runs/55bf900b-16e6-4573-9948-8571284d80e7/local-mode-cache/cache/cookbooks/jenkins/recipes/default.rb:16:in `from_file'\n\napt_package(\"install Jenkins\") do\npackage_name \"jenkins\"\naction [:install]\nretries 0\nretry_delay 2\ndefault_guard_interpreter :default\ndeclared_type :package\ncookbook_name \"jenkins\"\nrecipe_name \"default\"\nend\n\nPlatform:\n---------\nx86_64-linux\n\n[2017-02-01T03:10:08+00:00] INFO: Running queued delayed notifications before re-raising exception\n[2017-02-01T03:10:08+00:00] ERROR: Running exception handlers\n[2017-02-01T03:10:08+00:00] ERROR: Exception handlers complete\n[2017-02-01T03:10:08+00:00] FATAL: Stacktrace dumped to /var/chef/runs/55bf900b-16e6-4573-9948-8571284d80e7/local-mode-cache/cache/chef-stacktrace.out\n[2017-02-01T03:10:08+00:00] FATAL: Please provide the contents of the stacktrace.out file if you file a bug report\n[2017-02-01T03:10:08+00:00] ERROR: apt_package[install Jenkins] (jenkins::default line 16) had an error: Mixlib::ShellOut::ShellCommandFailed: Expected process to exit with [0], but received '100'\n</code></pre>\n\n<p>I am not sure why jenkins is failing to start. When I run the recipe twice on the same instance it succeeds the second time. Any help is much appreciated, as this is my first Chef script.</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1485923467, "post_id": 41971023, "comment_id": 71122077, "body": "Cf. <a href=\"http://stackoverflow.com/questions/22115956\">stackoverflow.com/questions/22115956</a>"}], "answers": [{"tags": [], "owner": {"reputation": 198293, "user_id": 707111, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oXZkh.jpg?s=128&g=1", "display_name": "Ry-", "link": "https://stackoverflow.com/users/707111/ry"}, "is_accepted": false, "score": 7, "last_activity_date": 1485916936, "creation_date": 1485916936, "answer_id": 41971068, "question_id": 41971023, "link": "https://stackoverflow.com/questions/41971023/return-min-values-of-hash-with-duplicate-values/41971068#41971068", "title": "Return min values of hash with duplicate values", "body": "<p>That operation is a bit unusual for a hash, so it\u2019s not very neat:</p>\n\n<pre><code>min_value = hash.values.min\nmin_pairs = hash.select { |k, v| v == min_value }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1485931193, "post_id": 41971952, "comment_id": 71124823, "body": "...or <code>h.group_by(&amp;:last).min.last.to_h #=&gt; {&quot;a&quot;=&gt;1, &quot;c&quot;=&gt;1}</code> to provide the result in the form requested. Readers: note that <code>min</code> applies to key-value pairs (two-element arrays) of the hash produced by <code>group_by</code>."}], "tags": [], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "is_accepted": true, "score": 5, "last_activity_date": 1485928376, "last_edit_date": 1485928376, "creation_date": 1485923572, "answer_id": 41971952, "question_id": 41971023, "link": "https://stackoverflow.com/questions/41971023/return-min-values-of-hash-with-duplicate-values/41971952#41971952", "title": "Return min values of hash with duplicate values", "body": "<pre><code>{\"a\" =&gt; 1, \"b\" =&gt; 2, \"c\" =&gt; 1}.group_by(&amp;:last).min.last.map(&amp;:first)\n# =&gt; [\"a\", \"c\"]\n</code></pre>\n\n<p>or</p>\n\n<pre><code>{\"a\" =&gt; 1, \"b\" =&gt; 2, \"c\" =&gt; 1}.group_by(&amp;:last).min.last.to_h.keys\n# =&gt; [\"a\", \"c\"]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "is_accepted": false, "score": 1, "last_activity_date": 1485939508, "creation_date": 1485939508, "answer_id": 41975592, "question_id": 41971023, "link": "https://stackoverflow.com/questions/41971023/return-min-values-of-hash-with-duplicate-values/41975592#41975592", "title": "Return min values of hash with duplicate values", "body": "<p>You can write FORTRAN in any language! :)</p>\n\n<p>It has the advantage of only requiring 1 pass :</p>\n\n<pre><code>hash = {\"a\" =&gt; 1, \"b\" =&gt; 2, \"c\" =&gt; 1}\n\nmin = Float::INFINITY\nvalues_for_min = []\n\nhash.each do |key, value|\n  case value &lt;=&gt; min\n  when 0\n    values_for_min &lt;&lt; key\n  when -1\n    min = value\n    values_for_min = [key]\n  end\nend\n\np min\n#=&gt; 1\np values_for_min\n#=&gt; [\"a\", \"c\"]\n</code></pre>\n"}], "owner": {"reputation": 681, "user_id": 5058542, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/28c0e972fda335bf074d3b68a4df6854?s=128&d=identicon&r=PG", "display_name": "Chris", "link": "https://stackoverflow.com/users/5058542/chris"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 419, "favorite_count": 1, "accepted_answer_id": 41971952, "answer_count": 3, "score": 2, "last_activity_date": 1485939508, "creation_date": 1485916654, "last_edit_date": 1485922258, "question_id": 41971023, "link": "https://stackoverflow.com/questions/41971023/return-min-values-of-hash-with-duplicate-values", "title": "Return min values of hash with duplicate values", "body": "<p>For example, if I have the hash <code>{\"a\" =&gt; 1, \"b\" =&gt; 2, \"c\" =&gt; 1}</code>, I want <code>[\"a\", \"c\"]</code>.</p>\n\n<p>I can do <code>hash.min_by{|k,v| v}</code>, but that only returns the first match (<code>\"a\"=&gt;1</code>).</p>\n\n<p>How do I get it to recognize duplicates and return <code>{\"a\"=&gt; 1, \"c\"=&gt; 1}</code>?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5", "jobs"], "answers": [{"comments": [{"owner": {"reputation": 11394, "user_id": 794481, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/344337b6819f2f513fa80bb227be3c2d?s=128&d=identicon&r=PG", "display_name": "Tallboy", "link": "https://stackoverflow.com/users/794481/tallboy"}, "edited": false, "score": 0, "creation_date": 1485971287, "post_id": 41971313, "comment_id": 71150308, "body": "Wow... very nice library. Thanks"}], "tags": [], "owner": {"reputation": 2840, "user_id": 6400294, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KtX2z.jpg?s=128&g=1", "display_name": "Shannon", "link": "https://stackoverflow.com/users/6400294/shannon"}, "is_accepted": true, "score": 0, "last_activity_date": 1485919248, "last_edit_date": 1485919248, "creation_date": 1485918866, "answer_id": 41971313, "question_id": 41970839, "link": "https://stackoverflow.com/questions/41970839/how-to-create-idempotent-jobs-on-specific-period-of-day-range-of-month/41971313#41971313", "title": "How to create idempotent jobs on specific period of day range of month?", "body": "<p>A combination of <a href=\"https://github.com/seejohnrun/ice_cube\" rel=\"nofollow noreferrer\">IceCube</a> (to handle recurring events) and maybe <a href=\"https://github.com/GetJobber/recurring_select\" rel=\"nofollow noreferrer\">RecurringSelect</a> for a GUI would achieve this with ease-of-use in mind and allow for expansion.</p>\n\n<p>You can then set up your events such as:</p>\n\n<pre><code>IceCube::Rule.monthly\nIceCube::Rule.monthly.day_of_month(-10)\n</code></pre>\n"}], "owner": {"reputation": 11394, "user_id": 794481, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/344337b6819f2f513fa80bb227be3c2d?s=128&d=identicon&r=PG", "display_name": "Tallboy", "link": "https://stackoverflow.com/users/794481/tallboy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "accepted_answer_id": 41971313, "answer_count": 1, "score": 0, "last_activity_date": 1485919248, "creation_date": 1485915251, "question_id": 41970839, "link": "https://stackoverflow.com/questions/41970839/how-to-create-idempotent-jobs-on-specific-period-of-day-range-of-month", "title": "How to create idempotent jobs on specific period of day range of month?", "body": "<p>I have a lot of jobs in my app which have the following conditions:</p>\n\n<ul>\n<li>Need to perform an action once, and only once, per month</li>\n<li>Need to perform the action on a specific day (example: 10 days before end of month)</li>\n<li>The job will be re-run many times a day, so they must be idempotent and can be re-run many times and only affect specific records, until the next month in which case all records can be effected again</li>\n</ul>\n\n<p>Think of a payment reminder that comes 5 days before the end of the month via SMS.</p>\n\n<p>I can think of a LOT of ways to do this, but honestly every way I try ends up being super confusing with the different time subtractions, .where() clauses, etc.</p>\n\n<p>I'm really looking for a known <strong>design pattern</strong> or some bulletproof logic that isn't a confusing spaghetti mess of time subtractions, greater thans, less thans, and is confusing to look at (and prone to bugs)</p>\n\n<p>This was my best attempt. Please feel free to help me with something from scratch though... it doesnt have to modify this. I feel like this is way more complicated than it needs to be.</p>\n\n<pre><code>class SMSPaymentReminderJob &lt; Que::Job\n\n  @priority = 50\n\n  def run\n    current = Time.now.in_time_zone('America/New_York')\n    window_end = current.end_of_month\n    window_start = window_end.beginning_of_day - 2.days\n    cutoff = current.beginning_of_month.utc # convert to UTC for PG\n\n    return unless (window_start..window_end).cover? current\n\n    User.where(sms_enabled: true)\n      .where('\"sms_reminder_sent_at\" &lt; ? OR \"sms_reminder_sent_at\" IS NULL', cutoff)\n      .find_in_batches(batch_size: 30) do |users|\n\n      # ... code here ...\n    end\n  end\n\nend\n</code></pre>\n"}, {"tags": ["ruby", "regex"], "comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 3, "creation_date": 1485916540, "post_id": 41970736, "comment_id": 71120363, "body": "Why does <code>method(&quot;three twot 1three one three&quot;)</code> equal <code>6</code> (and not <code>7</code>)? You define a method named <code>method</code>, but then execute <code>secret_code</code>, which is not defined. Please explain."}], "answers": [{"comments": [{"owner": {"reputation": 25823, "user_id": 24468, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/PWl6C.png?s=128&g=1", "display_name": "akuhn", "link": "https://stackoverflow.com/users/24468/akuhn"}, "edited": false, "score": 1, "creation_date": 1485931631, "post_id": 41971077, "comment_id": 71125023, "body": "No need for the second <code>sum</code> line. And maybe <code>hash.fetch(key, 0)</code> would be more self-explaining than the <code>to_i</code> trick?"}], "tags": [], "owner": {"reputation": 562, "user_id": 7497708, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ml9nVa_gAJc/AAAAAAAAAAI/AAAAAAAAAH4/OV7SrMI6APk/photo.jpg?sz=128", "display_name": "tmikeschu", "link": "https://stackoverflow.com/users/7497708/tmikeschu"}, "is_accepted": false, "score": 1, "last_activity_date": 1485916987, "creation_date": 1485916987, "answer_id": 41971077, "question_id": 41970736, "link": "https://stackoverflow.com/questions/41970736/sum-up-string-coincidences-multiplied-by-hash-value/41971077#41971077", "title": "Sum up string coincidences multiplied by hash value", "body": "<p>Here's a potential solution using Array#reduce:</p>\n\n<pre><code>WORDS_AND_DIGITS = {one: 1, two: 2, three: 3, four: 4, five: 5, six: 6, seven: 7, eight: 8, nine: 9 }\n\ns = \"three twot 1$three one three\"\n\ndef method(string)\n  string.split.reduce(0) do |sum, number|\n    sum += WORDS_AND_DIGITS[number.to_sym].to_i\n    sum\n  end\nend\n</code></pre>\n\n<p>You could definitely mess around with refactoring to take out <code>#to_sym</code> and <code>#to_i</code>, but this achieves the functionality you described. If the key does not exist in the hash, the return is <code>nil</code>, so it is coerced to an integer <code>0</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "is_accepted": true, "score": 0, "last_activity_date": 1485928250, "creation_date": 1485928250, "answer_id": 41972777, "question_id": 41970736, "link": "https://stackoverflow.com/questions/41970736/sum-up-string-coincidences-multiplied-by-hash-value/41972777#41972777", "title": "Sum up string coincidences multiplied by hash value", "body": "<p>Try this:</p>\n\n<pre><code>str = \"three twot 1three one three\"\nnumber_map = { one: 1, two: 2, three: 3, four: 4, five: 5, six: 6, seven: 7, eight: 8, nine: 9 }\nstr.split.map { |word| number_map[word.to_sym] }.compact.inject(:+)    # 7\n</code></pre>\n\n<p>FYI:</p>\n\n<pre><code>str.split     # [\"three\", \"twot\", \"1three\", \"one\", \"three\"]\nstr.split.map { |word| number_map[word.to_sym] }    # [3, nil, nil, 1, 3]\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 7497996, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HfBdi.jpg?s=128&g=1", "display_name": "Santiago", "link": "https://stackoverflow.com/users/7497996/santiago"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "accepted_answer_id": 41972777, "answer_count": 2, "score": 1, "last_activity_date": 1485928250, "creation_date": 1485914306, "question_id": 41970736, "link": "https://stackoverflow.com/questions/41970736/sum-up-string-coincidences-multiplied-by-hash-value", "title": "Sum up string coincidences multiplied by hash value", "body": "<p>I need to sum up the number of coincidences of a (number) word within a string matching its value in a hash, only when it strictly appears without any other character, it is to say without prefix or suffix</p>\n\n<pre><code>s = \"three twot 1three one three\"\nmethod(s) #=&gt; 6\nmethod(\"one on one\") #=&gt; 2\nmethod(\"five monkeys in three farms\") #=&gt; 8\nmethod(\"\") #=&gt; 0\nmethod(\"fivethreeone\") #=&gt; 0\n</code></pre>\n\n<p>I can sum up one specific value but unable to do it with more than one:</p>\n\n<pre><code>    s = \"three twot 1$three one three\"\n\n    def method(string)\n        num = {one: 1, two: 2, three: 3, four: 4, five: 5, six: 6, seven: 7, eight: 8, nine: 9 }\n\n    num.each {|k,v|  sum += string.scan(/\\b{num.key(v)}\\b/).count*num[num.key(v)]}  \n\n    end\n\n    p secret_code(s)\n    p secret_code(\"one on one\")\n    p secret_code(\"five monkeys in three farms\")\n    p secret_code(\"\")\n    p secret_code(\"fivethreeone\")\n</code></pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 67463, "user_id": 203130, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/1RE8c.jpg?s=128&g=1", "display_name": "coreyward", "link": "https://stackoverflow.com/users/203130/coreyward"}, "edited": false, "score": 3, "creation_date": 1485913626, "post_id": 41970600, "comment_id": 71119586, "body": "StackOverflow doesn&#39;t exist to do your homework for you. If you need help with a homework question, please provide (at a minimum) an explanation of what you&#39;ve tried and what you&#39;re stuck on or the error you&#39;re getting."}, {"owner": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "edited": false, "score": 2, "creation_date": 1485914310, "post_id": 41970600, "comment_id": 71119804, "body": "You should read, <a href=\"http://meta.stackoverflow.com/questions/334822/how-do-i-ask-and-answer-homework-questions\">How do I ask and answer homework questions?</a>."}], "answers": [{"tags": [], "owner": {"reputation": 116, "user_id": 830729, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc50393ddd41509bfb8a8f2ebe0d6a5e?s=128&d=identicon&r=PG", "display_name": "Kapitol", "link": "https://stackoverflow.com/users/830729/kapitol"}, "is_accepted": true, "score": 1, "last_activity_date": 1485929832, "creation_date": 1485929832, "answer_id": 41973117, "question_id": 41970600, "link": "https://stackoverflow.com/questions/41970600/what-i-need-to-do-with-array-ruby/41973117#41973117", "title": "What i need to do with array? Ruby", "body": "<pre><code>def solution(arr, x)\n  sum = 0\n  arr.sort.reverse.each_with_index do |e, i|\n    sum = sum + e\n    return i+1 if sum &gt;= x\n  end\n  return nil\nend\n</code></pre>\n\n<p>Given and array <code>arr = [1,4,3,2]</code>, <code>arr.sort</code> gives <code>[1,2,3,4]</code>. Just reverse the array and accumulate the elements until the accumulator >= X. Since the array is reverse sorted, we are adding the largest element of the array to the accumulator with each iteration. Here I return <code>i+1</code> since arrays are zero-indexed and we want the number of elements we've added so far. </p>\n"}], "owner": {"reputation": 3, "user_id": 7498119, "user_type": "registered", "profile_image": "https://graph.facebook.com/550233261850769/picture?type=large", "display_name": "Vados Alekseev", "link": "https://stackoverflow.com/users/7498119/vados-alekseev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "closed_date": 1485930069, "accepted_answer_id": 41973117, "answer_count": 1, "score": -2, "last_activity_date": 1485929832, "creation_date": 1485913469, "question_id": 41970600, "link": "https://stackoverflow.com/questions/41970600/what-i-need-to-do-with-array-ruby", "closed_reason": "Not suitable for this site", "title": "What i need to do with array? Ruby", "body": "<p>If you are given an array of undetermined length with numbers in random</p>\n\n<p>order. Please write a method to return the minimum # of elements that add</p>\n\n<p>up to a number >= X (where X is an input to the method? (e.g. array = [1,4,3,2],</p>\n\n<p>X = 6, answer is 2 elements: 4 + 3)</p>\n"}, {"tags": ["ruby", "bash", "shell", "ubuntu", "nginx"], "answers": [{"tags": [], "owner": {"reputation": 3438, "user_id": 2205785, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FY5zS.png?s=128&g=1", "display_name": "pbuck", "link": "https://stackoverflow.com/users/2205785/pbuck"}, "is_accepted": false, "score": 5, "last_activity_date": 1485911954, "creation_date": 1485911954, "answer_id": 41970381, "question_id": 41970263, "link": "https://stackoverflow.com/questions/41970263/ubuntu-command-ln-fs/41970381#41970381", "title": "Ubuntu command ln -fs", "body": "<p>man-page for <code>ln</code> would be a good start.</p>\n\n<pre><code>ln -fs [TARGET] [DIRECTORY]\n</code></pre>\n\n<p>Makes symbolic link between files. <code>-f</code> will \"force\" the link to be updated, if already exists.</p>\n\n<p>Given the wording in your error message, I'm guessing <code>/shared/config/monit/nginx</code> doesn't exist, which is why the <code>ln</code> command fails.</p>\n"}], "owner": {"reputation": 49, "user_id": 7491598, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a0f6da9870ed154ef9e586d773cdb8e?s=128&d=identicon&r=PG&f=1", "display_name": "japoowf", "link": "https://stackoverflow.com/users/7491598/japoowf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 21997, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1485912074, "creation_date": 1485911075, "last_edit_date": 1592644375, "question_id": 41970263, "link": "https://stackoverflow.com/questions/41970263/ubuntu-command-ln-fs", "title": "Ubuntu command ln -fs", "body": "<p>on a mina-deploy script after install monit the script create a link with the monitored services like nginx etc.</p>\n<p>but before finish the install show this error,\nsomeone know what is</p>\n<h2>ln -fs</h2>\n<p>command on shell?</p>\n<blockquote>\n<p>-----&gt; Setting up Monit...\n-----&gt; Put monit/nginx.erb file to /shared/config/monit/nginx bash: line 82: /shared/config/monit/nginx: Is a directory $ sudo ln -fs  &quot;/shared/config/monit/nginx&quot; &quot;/&quot;\n-----&gt;   FAILED</p>\n</blockquote>\n<p>the rest of the script</p>\n<pre><code>namespace :monit do\n\n  desc &quot;Install Monit&quot;\n  task :install do\n    invoke :sudo\n    queue %{echo &quot;-----&gt; Installing Monit...&quot;}\n    queue &quot;sudo apt-get -y install monit&quot;\n  end\n\n  desc &quot;Setup all Monit configuration&quot;\n  task :setup do\n    invoke :sudo\n    if monitored.any?\n      queue %{echo &quot;-----&gt; Setting up Monit...&quot;}\n      monitored.each do |daemon|\n        invoke :&quot;monit:#{daemon}&quot;\n      end\n      invoke :'monit:syntax'\n      invoke :'monit:restart'\n    else\n      queue %{echo &quot;-----&gt; Skiping monit - nothing is set for monitoring...&quot;}\n    end\n  end\n\n\n  task(:nginx) { monit_config &quot;nginx&quot; }\n  task(:postgresql) { monit_config &quot;postgresql&quot; }\n  task(:redis) { monit_config &quot;redis&quot; }\n  task(:memcached) { monit_config &quot;memcached&quot; }\n  task(:private_pub) { monit_config &quot;private_pub&quot;, &quot;#{private_pub_name}&quot; }\n\n  %w[start stop restart syntax reload].each do |command|\n    desc &quot;Run Monit #{command} script&quot;\n    task command do\n      invoke :sudo\n      queue %{echo &quot;-----&gt; Monit #{command}&quot;}\n      queue &quot;sudo service monit #{command}&quot;\n    end\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "devise", "ruby-on-rails-5"], "answers": [{"comments": [{"owner": {"reputation": 41, "user_id": 7427990, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d92726542a265e553f3f60cc2c9db7e4?s=128&d=identicon&r=PG", "display_name": "Yinti", "link": "https://stackoverflow.com/users/7427990/yinti"}, "edited": false, "score": 0, "creation_date": 1485911801, "post_id": 41970194, "comment_id": 71119100, "body": "Well, the issue was i never ran rails g devise user (smh). But even after that, I never had to utilize &#39;before_filter :authenticate_user!&#39;(double checked to see it wasn&#39;t auto created or something weird.)Thank you for the help."}], "tags": [], "owner": {"reputation": 2840, "user_id": 6400294, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KtX2z.jpg?s=128&g=1", "display_name": "Shannon", "link": "https://stackoverflow.com/users/6400294/shannon"}, "is_accepted": false, "score": 0, "last_activity_date": 1485910867, "last_edit_date": 1485910867, "creation_date": 1485910566, "answer_id": 41970194, "question_id": 41970116, "link": "https://stackoverflow.com/questions/41970116/the-method-clear-helpers-in-applicationcontroller-not-found-method-undefin/41970194#41970194", "title": "The method &#39;clear_helpers&#39; in ApplicationController - not found - method undefined for undefined method `user_signed_in?&#39;", "body": "<p>To be able to use <code>user_signed_in?</code> you need to use <code>before_filter :authenticate_user!</code> in the controller. Check out the <a href=\"https://github.com/plataformatec/devise#controller-filters-and-helpers\" rel=\"nofollow noreferrer\">documentation</a>.</p>\n"}], "owner": {"reputation": 41, "user_id": 7427990, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d92726542a265e553f3f60cc2c9db7e4?s=128&d=identicon&r=PG", "display_name": "Yinti", "link": "https://stackoverflow.com/users/7427990/yinti"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 65, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1485910867, "creation_date": 1485909985, "question_id": 41970116, "link": "https://stackoverflow.com/questions/41970116/the-method-clear-helpers-in-applicationcontroller-not-found-method-undefin", "title": "The method &#39;clear_helpers&#39; in ApplicationController - not found - method undefined for undefined method `user_signed_in?&#39;", "body": "<p>I keep seeing this answer: \n\"Try removing 'clear_helpers' method in ApplicationController as it might block sometimes Devise to load his helpers.\"</p>\n\n<p>Well that'd be great <em>if it was actually there to remove.</em></p>\n\n<p>The point is to keep the blog page from being view until you log in and show other content in the mean time. (devise) </p>\n\n<p>My page I'm getting the error on: <a href=\"http://pastebin.com/rFx17ecG\" rel=\"nofollow noreferrer\">http://pastebin.com/rFx17ecG</a>\nmy application.rb: <a href=\"http://pastebin.com/MRCLVh0M\" rel=\"nofollow noreferrer\">http://pastebin.com/MRCLVh0M</a></p>\n\n<p>I see absolutely nothing that has to do with 'clear_helpers'. I need help and clarification, because doesn't seem like it exists..</p>\n"}, {"tags": ["html", "ruby-on-rails", "ruby"], "answers": [{"tags": [], "owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "is_accepted": false, "score": 0, "last_activity_date": 1485911752, "creation_date": 1485911752, "answer_id": 41970349, "question_id": 41969960, "link": "https://stackoverflow.com/questions/41969960/delete-an-element-from-a-collection/41970349#41970349", "title": "Delete an element from a collection", "body": "<p>Lets say you have the following many to many setup with a join model:</p>\n\n<pre><code>class Staff\n  has_many :assignments\n  has_many :tasks, through: :assignments\nend\n\nclass Task\n  has_many :assignments\n  has_many :staff, through: :assignments\nend\n\nclass Assignment\n  belongs_to :task\n  belongs_to :staff\nend\n</code></pre>\n\n<p>Note that the <a href=\"http://www.dictionary.com/browse/staff\" rel=\"nofollow noreferrer\">plural of <strong>staff</strong> is <em>staff</em></a> - unless you are talking about the sticks carried by wizards.</p>\n\n<p>ActiveRecord creates \"magical\" <code>_ids</code> setters for all <code>has_many</code> relationships. When used with a <code>has_many through:</code> relationship rails is smart enough to just remove the rows from the join table.</p>\n\n<p>You can use this with the <a href=\"http://api.rubyonrails.org/classes/ActionView/Helpers/FormOptionsHelper.html#method-i-collection_select\" rel=\"nofollow noreferrer\">collection_select</a> and collection_checkboxes methods:</p>\n\n<pre><code>&lt;%= form_for([@task.ranch, @task]) do |f| %&gt;\n  &lt;%= f.collection_select(:staff_ids, Staff.all, :id, :name, multiple: true) %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>You would then set your controller up like so:</p>\n\n<pre><code>def create \n  @task = @ranch.tasks.new(task_params) do |t|\n    # this should really be done by setting default values\n    # for the DB columns\n    t.done = false\n    t.star = false\n  end\n\n  if @task.save\n    redirect_to @ranch, success:  \"The task was created\"\n  else \n    render :new, error: \"The task was not created\"\n  end\nend \n\nprivate\n\ndef task_params\n  params.require(:task)\n    .permit(:content, :deadline, :row_order, :date, :assigned_to, staff_ids: [])\nend\n</code></pre>\n\n<p><code>staff_ids: []</code> will allow an array of scalar values. Also not that <code>.new</code> and <code>.create</code> are not the same thing! You where saving the record 4 times if it was valid so the user has to wait for 4 expensive write queries when one will do.</p>\n"}], "owner": {"reputation": 109, "user_id": 7447946, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/10155632351659298/picture?type=large", "display_name": "Jacques Mesnet", "link": "https://stackoverflow.com/users/7447946/jacques-mesnet"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 40, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1485911752, "creation_date": 1485908715, "question_id": 41969960, "link": "https://stackoverflow.com/questions/41969960/delete-an-element-from-a-collection", "title": "Delete an element from a collection", "body": "<p>I'm facing to a stupid problem. I have created a collection select which is creating elements into a join table \"staffs_task\" to reference an association between the model staff and task.\nAnd now I would like two things: (1) a button delete this association (2) and a little bit of code for my model staffs_task to avoid duplication, so with the task_id and staff_id. And last info, task is a model built by ranch  </p>\n\n<p>my code: </p>\n\n<p>(the collection in new_task)</p>\n\n<pre><code>&lt;%= select_tag \"staffs_task\", options_from_collection_for_select(@staffs, 'id', 'name') , :multiple =&gt; true %&gt; \n</code></pre>\n\n<p>(task_controller)</p>\n\n<pre><code>  skip_before_action :configure_sign_up_params\n  before_action :set_ranch\n  before_action :set_task, except: [:create]\n\n\n\n  def create \n    @task = @ranch.tasks.create(task_params)\n    @staffs = Staff.where(:id =&gt; params[:staffs_task])\n    @task.staffs &lt;&lt; @staffs\n    if @task.save\n      @task.update(done: false)\n      @task.update(star: false)\n      flash[:success] = \"The task was created \"\n    else \n      flash[:success] = \"The task was not created \"\n    end\n    redirect_to @ranch\n  end \n\n\nprivate\n\n  def task_params\n    params.require(:task).permit(:content, :deadline, :row_order, :date, :assigned_to)\n  end\n\n  def set_ranch \n    @ranch = Ranch.find(params[:ranch_id])\n  end \n\n  def set_task \n    @task = @ranch.tasks.find(params[:id])\n  end \n</code></pre>\n\n<p>So if you have any idea about one of this two things, your help would be welcome \nThanks in advance !!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "callback"], "answers": [{"comments": [{"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 1, "creation_date": 1485913220, "post_id": 41969621, "comment_id": 71119464, "body": "The first example will only work if the Deal has already been persisted. It could be salvaged by using <code>assign_attribute</code> instead. But the later example is a better idea in the first place."}], "tags": [], "owner": {"reputation": 67463, "user_id": 203130, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/1RE8c.jpg?s=128&g=1", "display_name": "coreyward", "link": "https://stackoverflow.com/users/203130/coreyward"}, "is_accepted": true, "score": 2, "last_activity_date": 1485906541, "creation_date": 1485906541, "answer_id": 41969621, "question_id": 41969518, "link": "https://stackoverflow.com/questions/41969518/modify-a-child-record-in-before-save-callback/41969621#41969621", "title": "Modify a child record in before_save callback", "body": "<p>A couple of things going on here, but your main issue is that modifying a child in this fashion does not automatically save the record. You need to update your <code>set_main_photo</code> to call <code>.save</code> on the child record. While you're at it, a few other changes are prudent:</p>\n\n<pre><code>def set_main_photo\n  if photos.any?\n    unless photos.main.present?\n      photos.first.update_attribute :main, true\n    end\n  end\nend\n</code></pre>\n\n<p>With this done, you've now coupled <code>Deal</code> and <code>Photos</code> in an awkward way that has an attribute on <code>Photo</code> representing a condition of its relationship with <code>Deal</code>, and <code>Deal</code> managing that attribute. A better approach would be to create a new relationship to model this, keeping responsibility for the attribute entirely within <code>Deal</code>:</p>\n\n<pre><code>class Deal\n  has_many :photos\n  belongs_to :main_photo, class_name: 'Photo'\nend\n\nclass Photo\n  belongs_to :deal\nend\n</code></pre>\n\n<p>This lets you simply set <code>deal.main_photo = deal.photos.first</code> and then <code>deal.save</code>.</p>\n"}], "owner": {"reputation": 6846, "user_id": 1753596, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/r9f3k.jpg?s=128&g=1", "display_name": "trh", "link": "https://stackoverflow.com/users/1753596/trh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 772, "favorite_count": 0, "accepted_answer_id": 41969621, "answer_count": 1, "score": 2, "last_activity_date": 1485906541, "creation_date": 1485905991, "question_id": 41969518, "link": "https://stackoverflow.com/questions/41969518/modify-a-child-record-in-before-save-callback", "title": "Modify a child record in before_save callback", "body": "<p>Struggling with modifying a child record in the before_save callback of it's parent.</p>\n\n<p>Child record is <code>Photo</code> that has an attribute called <code>main</code> which is a boolean.</p>\n\n<p>Parent record is <code>Deal</code> that <code>has_many :photos</code></p>\n\n<p>The form to modify the records is nested to make changes to a <code>deal</code> and users can also change attributes of a <code>photo</code> or add or remove <code>photos</code>.</p>\n\n<p>Here's the rub.  I need to always have a <code>main</code> photo, and I planned to do this in a before_save callback, where I check for photos, and if there is no photo in the list for <code>main</code> I am setting main to true on the first photo in the list.</p>\n\n<p>It's not saving the child record and I would expect it to.  I've added debugging statements so I can attest that the method is being called, I can also state the value of main is being marked as true... its just not being saved.  Am I misunderstanding this callback?  Light shed would be awesome.  Thanks guys!</p>\n\n<pre><code>class Deal &lt; ActiveRecord::Base\n\n  has_many :photos, dependent: :destroy\n  accepts_nested_attributes_for :photos, allow_destroy: :true\n\n  before_save :set_main_photo\n\n\n  ### bunch of other unrelated stuff\n\n  private\n  def set_main_photo\n    if self.photos\n      if self.photos.main.nil?\n        self.photos.first.main = true\n      end\n    end\n  end   \nend \n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "redirect", "applicationcontroller"], "owner": {"reputation": 11, "user_id": 5776423, "user_type": "registered", "profile_image": "https://graph.facebook.com/10207134996286281/picture?type=large", "display_name": "Justin Pease", "link": "https://stackoverflow.com/users/5776423/justin-pease"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 47, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1485911639, "creation_date": 1485905753, "last_edit_date": 1592644375, "question_id": 41969457, "link": "https://stackoverflow.com/questions/41969457/redirect-to-in-rails-not-behaving", "title": "redirect_to in rails not behaving", "body": "<p>I am authorizing and redirecting in my application controller but the redirect_to method is not behaving.  I am using rails '4.2.6', and I am not sure if we used 'api mode' or simply stripped the extra stuff out as we are using the rails app as our backend api.</p>\n<p>Rather than actually redirecting the user, any redirect_to method is sending the following response.</p>\n<pre><code> &quot;&lt;html&gt;&lt;body&gt;You are being &lt;a href=\\&quot;http://www.example.com/api/v1/login\\&quot;&gt;redirected&lt;/a&gt;.&lt;/body&gt;&lt;/html&gt;&quot;\n</code></pre>\n<p>I get this response in both my rails test, and when we send a request from our front end to this backend rails app.</p>\n<p>Here is my application controller code.  All of the methods I wrote such as 'loggin_in' and 'authorized_but_timed_out' have been tested and are working properly but the redirect_to is not.</p>\n<h1>application_controller.rb</h1>\n<pre><code>before_action :direct_traffic\n\ndef direct_traffic\n  if logging_in\n    redirect_to api_v1_some_path\n  elsif authorized_but_timed_out\n    redirect_to api_v1_some_other_path\n  else\n    redirect_to controller: params[:controller], action: params[:action]\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby", "variables", "conditional", "case"], "answers": [{"tags": [], "owner": {"reputation": 1592, "user_id": 7138517, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40228125f914cf5ef1ae7df6b98c550d?s=128&d=identicon&r=PG&f=1", "display_name": "Coolness", "link": "https://stackoverflow.com/users/7138517/coolness"}, "is_accepted": true, "score": 4, "last_activity_date": 1485905354, "last_edit_date": 1485905354, "creation_date": 1485905246, "answer_id": 41969346, "question_id": 41969298, "link": "https://stackoverflow.com/questions/41969298/can-i-set-a-variable-if-any-branch-of-my-case-statement-is-called/41969346#41969346", "title": "Can I set a variable if any branch of my case statement is called?", "body": "<p>One solution might be to do </p>\n\n<pre><code>condition_called = true\ncase var1\nwhen cond1\n  # do stuff\nwhen cond2\n  # do stuff\nelse\n  condition_called = false\nend\n</code></pre>\n\n<p>Obviously now you can't tell if the else statement fired, but it will tell you if the <code>when</code> statements did.</p>\n\n<p>More info about the Ruby <code>case</code>: <a href=\"http://www.techotopia.com/index.php/The_Ruby_case_Statement\" rel=\"nofollow noreferrer\">http://www.techotopia.com/index.php/The_Ruby_case_Statement</a></p>\n"}, {"tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": false, "score": 3, "last_activity_date": 1485905907, "creation_date": 1485905907, "answer_id": 41969497, "question_id": 41969298, "link": "https://stackoverflow.com/questions/41969298/can-i-set-a-variable-if-any-branch-of-my-case-statement-is-called/41969497#41969497", "title": "Can I set a variable if any branch of my case statement is called?", "body": "<p>One thing to remember about Ruby <code>case</code> statements is the return values. If you can guarantee that each of your clauses returns something <em>truthful</em>, that is not <code>nil</code> or <code>false</code>, then you can depend on that behaviour:</p>\n\n<pre><code>condition_called =\n  case ...\n  when ...\n    f(a)\n  when ...\n    g(b)\n  end\n</code></pre>\n\n<p>So long as you have a result from those various operations this is pretty seamless.</p>\n"}], "owner": {"reputation": 16802, "user_id": 1235929, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/9f460ae7deb6fa19034c810a53b9fbac?s=128&d=identicon&r=PG", "display_name": "Dave", "link": "https://stackoverflow.com/users/1235929/dave"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "accepted_answer_id": 41969346, "answer_count": 2, "score": 2, "last_activity_date": 1485905907, "creation_date": 1485904933, "question_id": 41969298, "link": "https://stackoverflow.com/questions/41969298/can-i-set-a-variable-if-any-branch-of-my-case-statement-is-called", "title": "Can I set a variable if any branch of my case statement is called?", "body": "<p>I'm using Ruby 2.4.  I have a case statement</p>\n\n<pre><code>        case var1\n        when cond1\n          # do stuff\n        when cond2\n          # do stuff\n        ...\n        end\n</code></pre>\n\n<p>I would like to set a variable, \"condition_called = true\" if any of the \"when\" statements were invoked and leave that variable false otherwise.  Is there any way to do that other than adding</p>\n\n<pre><code>condition_called = true\n</code></pre>\n\n<p>within each branch of my case statement?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 79498, "user_id": 298624, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5b84ccc2f7709bbb7105baeb40e0961b?s=128&d=identicon&r=PG", "display_name": "fl00r", "link": "https://stackoverflow.com/users/298624/fl00r"}, "edited": false, "score": 2, "creation_date": 1485901194, "post_id": 41968193, "comment_id": 71115767, "body": "Using a splat operator not at the end doesn&#39;t make sense for me."}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1485901965, "post_id": 41968193, "comment_id": 71116091, "body": "True. It&#39;s not readable, but it is possible to parse it though, and Ruby does it in certain cases."}, {"owner": {"reputation": 51, "user_id": 7497399, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/972402f1e9188565fc1a8a1579fccd2a?s=128&d=identicon&r=PG&f=1", "display_name": "Steve", "link": "https://stackoverflow.com/users/7497399/steve"}, "reply_to_user": {"reputation": 79498, "user_id": 298624, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5b84ccc2f7709bbb7105baeb40e0961b?s=128&d=identicon&r=PG", "display_name": "fl00r", "link": "https://stackoverflow.com/users/298624/fl00r"}, "edited": false, "score": 0, "creation_date": 1485902449, "post_id": 41968193, "comment_id": 71116253, "body": "@fl00r I tried the following method definition and I get the same error. def hello(a,b=1,c,d,e,*f)"}], "answers": [{"comments": [{"owner": {"reputation": 51, "user_id": 7497399, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/972402f1e9188565fc1a8a1579fccd2a?s=128&d=identicon&r=PG&f=1", "display_name": "Steve", "link": "https://stackoverflow.com/users/7497399/steve"}, "edited": false, "score": 0, "creation_date": 1485901002, "post_id": 41968239, "comment_id": 71115684, "body": "Thanks Eric. That was my understanding as well. I am very puzzled that the second case does not work for me."}, {"owner": {"reputation": 45322, "user_id": 421705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/581b1760881c962648f99d6040d41829?s=128&d=identicon&r=PG", "display_name": "Holger Just", "link": "https://stackoverflow.com/users/421705/holger-just"}, "reply_to_user": {"reputation": 51, "user_id": 7497399, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/972402f1e9188565fc1a8a1579fccd2a?s=128&d=identicon&r=PG&f=1", "display_name": "Steve", "link": "https://stackoverflow.com/users/7497399/steve"}, "edited": false, "score": 0, "creation_date": 1485904665, "post_id": 41968239, "comment_id": 71117066, "body": "@Steve In your second example, when passing exactly 5 arguments, it&#39;s not clear whether <code>b</code> should be passed as <code>1</code> or your second argument. To avoid these ambiguities, Ruby enforces these stricter rules."}, {"owner": {"reputation": 51, "user_id": 7497399, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/972402f1e9188565fc1a8a1579fccd2a?s=128&d=identicon&r=PG&f=1", "display_name": "Steve", "link": "https://stackoverflow.com/users/7497399/steve"}, "reply_to_user": {"reputation": 45322, "user_id": 421705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/581b1760881c962648f99d6040d41829?s=128&d=identicon&r=PG", "display_name": "Holger Just", "link": "https://stackoverflow.com/users/421705/holger-just"}, "edited": false, "score": 0, "creation_date": 1485905861, "post_id": 41968239, "comment_id": 71117466, "body": "Thanks @HolgerJust. My code fails the following rule that Eric mentioned. <b>If default arguments and splat operator are used, the default arguments must come right before the splat operator.</b> If I follow this rule, the code works fine."}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "reply_to_user": {"reputation": 45322, "user_id": 421705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/581b1760881c962648f99d6040d41829?s=128&d=identicon&r=PG", "display_name": "Holger Just", "link": "https://stackoverflow.com/users/421705/holger-just"}, "edited": false, "score": 0, "creation_date": 1485939770, "post_id": 41968239, "comment_id": 71129062, "body": "@HolgerJust: The second method is no more ambiguous than the first one. Both are weird and shouldn&#39;t be used IMHO. The first one is accepted by Ruby, the other not."}], "tags": [], "owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "is_accepted": false, "score": 5, "last_activity_date": 1485903362, "last_edit_date": 1495539932, "creation_date": 1485899830, "answer_id": 41968239, "question_id": 41968193, "link": "https://stackoverflow.com/questions/41968193/why-am-i-getting-an-unexpected-error-when-using-the-asterisk-operator-as/41968239#41968239", "title": "Why am I getting an &quot;Unexpected *&quot; error when using the * (asterisk) operator as a method parameter?", "body": "<p>The relevant documentation is <a href=\"https://docs.ruby-lang.org/en/2.4.0/syntax/calling_methods_rdoc.html#label-Default+Positional+Arguments\" rel=\"nofollow noreferrer\">here</a> and here's a related <a href=\"https://stackoverflow.com/questions/17173034/optional-argument-after-splat-argument\">question</a>.\nThey don't seem to cover all cases though.</p>\n\n<p>Here's what I could gather :</p>\n\n<ul>\n<li>no more than one splat operator (<code>*args</code>) can be used.</li>\n<li>multiple default arguments can be used (<code>a=1, b=2</code>).</li>\n<li>default arguments must be to the left of the splat operator.</li>\n<li>multiple default arguments must come directly one after the other.</li>\n<li>if default arguments and splat operator are used, the default arguments must come right before the splat operator.</li>\n<li>if the above rules are followed, default arguments and splat operator can be anywhere in the arguments list.</li>\n</ul>\n\n<p>For readability, it might be a good idea to :</p>\n\n<ul>\n<li>put the splat operator as the last argument</li>\n<li>avoid putting default arguments in the middle</li>\n</ul>\n\n<p>Here are valid method definitions :</p>\n\n<pre><code>def  hello(a = 1, b)            ;end\ndef  hello(a, b = 2)            ;end\ndef  hello(a = 1, b = 2)        ;end\ndef  hello(a = 1, b = 2, c)     ;end\ndef  hello(a, b = 2, c = 3)     ;end\ndef  hello(a, b = 2, *c)        ;end\ndef  hello(a, b = 2, *c, d)     ;end\ndef  hello(a = 1, b = 2, *c, d) ;end\n</code></pre>\n\n<p>For your second example, this syntax would be fine :</p>\n\n<pre><code>def hello(a,b,c,d=1,*e,f)\n    p a,b,c,d,e,f\nend\n</code></pre>\n\n<p>For a more complete example with block and keyword arguments, see @J\u00f6rgWMittag's excellent <a href=\"https://stackoverflow.com/a/17173107/6419007\">answer</a>.</p>\n"}], "owner": {"reputation": 51, "user_id": 7497399, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/972402f1e9188565fc1a8a1579fccd2a?s=128&d=identicon&r=PG&f=1", "display_name": "Steve", "link": "https://stackoverflow.com/users/7497399/steve"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 225, "favorite_count": 0, "answer_count": 1, "score": 5, "last_activity_date": 1485903362, "creation_date": 1485899668, "last_edit_date": 1485902995, "question_id": 41968193, "link": "https://stackoverflow.com/questions/41968193/why-am-i-getting-an-unexpected-error-when-using-the-asterisk-operator-as", "title": "Why am I getting an &quot;Unexpected *&quot; error when using the * (asterisk) operator as a method parameter?", "body": "<p>I'm learning Ruby at the moment and I came across this peculiar situation.</p>\n\n<p>When I run the following code, I get the output shown further below.</p>\n\n<p><strong>Working Code:</strong></p>\n\n<pre><code>def hello(a,b=1,*c,d,e,f)\n  p a,b,c,d,e,f\nend\n\nhello(1,2,3,4,5)\n</code></pre>\n\n<p><strong>Working Code Output:</strong></p>\n\n<pre><code>1\n2\n[]\n3\n4\n5\n</code></pre>\n\n<p>However, upon editing the code so that the parameter 'e' is the catch all parameter, I get the error shown further below. </p>\n\n<p><strong>Failing Code:</strong></p>\n\n<pre><code>def hello(a,b=1,c,d,*e,f)\n    p a,b,c,d,e,f\nend\n\nhello(1,2,3,4,5)\n</code></pre>\n\n<p><strong>Failing Code Output:</strong></p>\n\n<pre><code>a.rb:1: syntax error, unexpected *\ndef hello(a,b=1,c,d,*e,f)\n                     ^\na.rb:1: syntax error, unexpected ')', expecting '='\na.rb:3: syntax error, unexpected keyword_end, expecting end-of-input\n</code></pre>\n\n<p>I'm using ruby 2.3.1p112 (2016-04-26 revision 54768) on Ubuntu.</p>\n\n<p>I'm interested in knowing why the second snippet of code fails.</p>\n\n<p><strong>Edit:</strong></p>\n\n<p>The following code fails as well.</p>\n\n<pre><code>def hello(a,b=1,c,d,e,*f)\n    p a,b,c,d,e,f\nend\n\nhello(1,2,3,4,5)\n</code></pre>\n\n<p>And I get a similar error</p>\n\n<pre><code>a.rb:1: syntax error, unexpected *\ndef hello(a,b=1,c,d,e,*f)\n                       ^\na.rb:3: syntax error, unexpected keyword_end, expecting end-of-input\n</code></pre>\n"}, {"tags": ["ruby", "post", "https", "chef-infra"], "comments": [{"owner": {"reputation": 3248, "user_id": 3909198, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/gdOpu.jpg?s=128&g=1", "display_name": "inquisitive", "link": "https://stackoverflow.com/users/3909198/inquisitive"}, "edited": false, "score": 0, "creation_date": 1485952754, "post_id": 41968154, "comment_id": 71137601, "body": "did you find a solution?"}, {"owner": {"reputation": 21, "user_id": 7497437, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6be6e4c0ae6721c08810484c9e483ae0?s=128&d=identicon&r=PG&f=1", "display_name": "ehjay", "link": "https://stackoverflow.com/users/7497437/ehjay"}, "reply_to_user": {"reputation": 3248, "user_id": 3909198, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/gdOpu.jpg?s=128&g=1", "display_name": "inquisitive", "link": "https://stackoverflow.com/users/3909198/inquisitive"}, "edited": false, "score": 0, "creation_date": 1485963794, "post_id": 41968154, "comment_id": 71145347, "body": "@inquisitive No not yet"}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 7497437, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6be6e4c0ae6721c08810484c9e483ae0?s=128&d=identicon&r=PG&f=1", "display_name": "ehjay", "link": "https://stackoverflow.com/users/7497437/ehjay"}, "edited": false, "score": 0, "creation_date": 1485963685, "post_id": 41971035, "comment_id": 71145261, "body": "Hi, would you be able to provide a more specific example on how to capture the response back?  The response of my call returns two objects, APIKey, and ValidUntil, and I need to capture the APIKey value.  my_id =  Chef::HTTP.new(&#39;<a href=\"https://cmdb/&#39;).post(&#39;/&#39;)\" rel=\"nofollow noreferrer\">cmdb/&#39;).post(&#39;/&#39;)</a>  Would using this mean my_id will equal the response returned by my post call?"}, {"owner": {"reputation": 43208, "user_id": 78722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf611565f0b79abd0b3dc200ad867661?s=128&d=identicon&r=PG", "display_name": "coderanger", "link": "https://stackoverflow.com/users/78722/coderanger"}, "reply_to_user": {"reputation": 21, "user_id": 7497437, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6be6e4c0ae6721c08810484c9e483ae0?s=128&d=identicon&r=PG&f=1", "display_name": "ehjay", "link": "https://stackoverflow.com/users/7497437/ehjay"}, "edited": false, "score": 0, "creation_date": 1485978309, "post_id": 41971035, "comment_id": 71154143, "body": "Yep, you get back a string which is the body of the response."}, {"owner": {"reputation": 21, "user_id": 7497437, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6be6e4c0ae6721c08810484c9e483ae0?s=128&d=identicon&r=PG&f=1", "display_name": "ehjay", "link": "https://stackoverflow.com/users/7497437/ehjay"}, "edited": false, "score": 0, "creation_date": 1485984340, "post_id": 41971035, "comment_id": 71157378, "body": "So i got the call to work and I get back the response as a text.  Do you know how to get it back as an array so that I can parse out only ONE value in the response?  For example if the response is { A: asdasda, B: asdasdasd} I&#39;m only interested in getting the A value out"}, {"owner": {"reputation": 21, "user_id": 7497437, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6be6e4c0ae6721c08810484c9e483ae0?s=128&d=identicon&r=PG&f=1", "display_name": "ehjay", "link": "https://stackoverflow.com/users/7497437/ehjay"}, "edited": false, "score": 0, "creation_date": 1485985235, "post_id": 41971035, "comment_id": 71157790, "body": "GOT IT!!  <a href=\"http://stackoverflow.com/questions/5410682/parsing-a-json-string-in-ruby\" title=\"parsing a json string in ruby\">stackoverflow.com/questions/5410682/&hellip;</a>"}], "tags": [], "owner": {"reputation": 43208, "user_id": 78722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf611565f0b79abd0b3dc200ad867661?s=128&d=identicon&r=PG", "display_name": "coderanger", "link": "https://stackoverflow.com/users/78722/coderanger"}, "is_accepted": false, "score": 1, "last_activity_date": 1485916720, "creation_date": 1485916720, "answer_id": 41971035, "question_id": 41968154, "link": "https://stackoverflow.com/questions/41968154/capture-http-call-response-using-chef/41971035#41971035", "title": "Capture HTTP call response using Chef", "body": "<p>You want to use the <code>Chef::HTTP</code> client class, see <a href=\"https://coderanger.net/chef-tips/#4\" rel=\"nofollow noreferrer\">https://coderanger.net/chef-tips/#4</a> for an example.</p>\n"}, {"tags": [], "owner": {"reputation": 21, "user_id": 6226283, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb603ef8b72c90d0e44800df58efffc2?s=128&d=identicon&r=PG&f=1", "display_name": "AnUp", "link": "https://stackoverflow.com/users/6226283/anup"}, "is_accepted": false, "score": 0, "last_activity_date": 1548160884, "creation_date": 1548160884, "answer_id": 54308533, "question_id": 41968154, "link": "https://stackoverflow.com/questions/41968154/capture-http-call-response-using-chef/54308533#54308533", "title": "Capture HTTP call response using Chef", "body": "<p>In my case the request url had https so I had to add this line and it was working.</p>\n\n<pre><code>http.use_ssl = true\n</code></pre>\n\n<p>If you want a more generic approach that can handle both http and https see this answer -</p>\n\n<p><a href=\"https://stackoverflow.com/a/9227933/6226283\">https://stackoverflow.com/a/9227933/6226283</a></p>\n"}], "owner": {"reputation": 21, "user_id": 7497437, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6be6e4c0ae6721c08810484c9e483ae0?s=128&d=identicon&r=PG&f=1", "display_name": "ehjay", "link": "https://stackoverflow.com/users/7497437/ehjay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3587, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1548160884, "creation_date": 1485899475, "question_id": 41968154, "link": "https://stackoverflow.com/questions/41968154/capture-http-call-response-using-chef", "title": "Capture HTTP call response using Chef", "body": "<p>I'm currently using Chef to build out a cookbook that has to fire off a bunch of POST calls to this API and I have to capture the response in a variable to use it in a second HTTP call.</p>\n\n<p>I've tried using the http_request resource from Ruby but I can only fire the call but don't know how to get the response captured:</p>\n\n<pre><code>http_request 'authorize' do   \naction :post   \nurl '*****************************'   headers ({\n        'Content-Type' =&gt; 'application/json'\n        })   message ({\n        :Username =&gt; \"**********\",\n        :Password =&gt; \"**********\"\n        }).to_json  \nend\n</code></pre>\n\n<p>In another attempt, I tried using Chef's http client to fire off a POST call and a get a response:</p>\n\n<pre><code>  require \"net/https\"\n  require \"uri\"\n  require \"json\"\n  uri = URI(\"******************************\")\n  req = Net::HTTP::Post.new(uri)\n  req.set_form_data(\"Username\" =&gt; \"********\", \"Password\" =&gt; \"*********\")\n\n  res = Net::HTTP.start(uri.hostname, uri.port) do |http|\n    http.request(req)\n  end\n\n  case res\n  when Net::HTTPSuccess, Net::HTTPRedirection\n    # OK\n  else\n    res.value\n  end\n</code></pre>\n\n<p>But I keep getting this error when I run the chef-client on my node:</p>\n\n<pre><code>EOFError\n--------\nend of file reached\n</code></pre>\n\n<p>How can I send off a POST call using Chef/Ruby and capture its response?</p>\n"}, {"tags": ["sql", "ruby", "oracle", "ruby-on-rails-3", "prepared-statement"], "comments": [{"owner": {"reputation": 4930, "user_id": 5276188, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/N2sAW.jpg?s=128&g=1", "display_name": "Doktor OSwaldo", "link": "https://stackoverflow.com/users/5276188/doktor-oswaldo"}, "edited": false, "score": 0, "creation_date": 1486475835, "post_id": 41967721, "comment_id": 71353545, "body": "maybe a stupid question, and it is needed for oracle, but have you tried to remove the &quot;[&quot; and &quot;]&quot; ? for me it looks like you try to give the second ? an array, also probably named bind variables would be a good idea here: <a href=\"http://millarian.com/rails/quick-tip-rails-named-bind-variables/\" rel=\"nofollow noreferrer\">millarian.com/rails/quick-tip-rails-named-bind-variables</a>"}, {"owner": {"reputation": 2132, "user_id": 856753, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/1c53a71370f55d0f0a4cc7e4b2c06b91?s=128&d=identicon&r=PG", "display_name": "Micheal", "link": "https://stackoverflow.com/users/856753/micheal"}, "reply_to_user": {"reputation": 4930, "user_id": 5276188, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/N2sAW.jpg?s=128&g=1", "display_name": "Doktor OSwaldo", "link": "https://stackoverflow.com/users/5276188/doktor-oswaldo"}, "edited": false, "score": 0, "creation_date": 1486501029, "post_id": 41967721, "comment_id": 71369865, "body": "yes i tried removing the [] and got this ArgumentError: wrong number of arguments (11 for 3)"}, {"owner": {"reputation": 2132, "user_id": 856753, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/1c53a71370f55d0f0a4cc7e4b2c06b91?s=128&d=identicon&r=PG", "display_name": "Micheal", "link": "https://stackoverflow.com/users/856753/micheal"}, "reply_to_user": {"reputation": 4930, "user_id": 5276188, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/N2sAW.jpg?s=128&g=1", "display_name": "Doktor OSwaldo", "link": "https://stackoverflow.com/users/5276188/doktor-oswaldo"}, "edited": false, "score": 0, "creation_date": 1486501101, "post_id": 41967721, "comment_id": 71369901, "body": "also I can&#39;t used named bind variables since this is an oracle function and I dont know the column names. I know only what params I can pass"}, {"owner": {"reputation": 4930, "user_id": 5276188, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/N2sAW.jpg?s=128&g=1", "display_name": "Doktor OSwaldo", "link": "https://stackoverflow.com/users/5276188/doktor-oswaldo"}, "edited": false, "score": 0, "creation_date": 1486536973, "post_id": 41967721, "comment_id": 71382208, "body": "@Michael, you don&#39;t need the colum names for that, you just replace a ? with a symbol, for example :type_param. and then instead of passing an array, you pass an hash like { :type_param =&gt; type_param, ...} but this is just a tip, it does not solve your problem, but would increase the readability of your code, and i am not 100% certain it works with the oracle adapter"}], "answers": [{"comments": [{"owner": {"reputation": 2132, "user_id": 856753, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/1c53a71370f55d0f0a4cc7e4b2c06b91?s=128&d=identicon&r=PG", "display_name": "Micheal", "link": "https://stackoverflow.com/users/856753/micheal"}, "edited": false, "score": 0, "creation_date": 1486677545, "post_id": 42101438, "comment_id": 71461769, "body": "ndn, I tried your solution but got an error. See up EDIT to original post at the bottom for the error."}], "tags": [], "owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "is_accepted": false, "score": 3, "last_activity_date": 1486551919, "last_edit_date": 1486551919, "creation_date": 1486507509, "answer_id": 42101438, "question_id": 41967721, "link": "https://stackoverflow.com/questions/41967721/ruby-on-rails-prepared-statement-for-oracle-view-function/42101438#42101438", "title": "ruby on rails prepared statement for oracle view/function", "body": "<p>Looking at <a href=\"https://github.com/rsim/oracle-enhanced/blob/8ed51b5c87d6e49eba504f4272d23152f6c417b5/lib/active_record/connection_adapters/oracle_enhanced/database_statements.rb#L19\" rel=\"nofollow noreferrer\">the source</a>, <code>binds</code> gets cast in some magical way and you have to pass a named <code>prepare: true</code> argument as well.</p>\n\n<p>It also used to work differently in <a href=\"http://www.rubydoc.info/github/rsim/oracle-enhanced/ActiveRecord%2FConnectionAdapters%2FOracleEnhanced%2FDatabaseStatements%3Aexec_query\" rel=\"nofollow noreferrer\">older versions</a>.</p>\n\n<hr>\n\n<p>To save yourself the trouble, you can simply use <code>#sanitize</code>:</p>\n\n<pre><code>params = {\n  type:        type_param,\n  search_type: search_type_param,\n  tid:         tid_param,\n  last:        last_param,\n  key:         key_param,\n  tran_id:     tran_id_param,\n  num:         num_param,\n  start_date:  start_date_param,\n  end_date:    end_date_param,\n}\n\nparams.each do |key, param|\n  params[key] = ActiveRecord::Base.sanitize(param)\nend\n\nconnection.exec_query(\n  \"SELECT * FROM TABLE(FN_REQRESP(#{params[:type]},\n                                  #{params[:search_type]},\n                                  #{params[:tid]},\n                                  #{params[:last]},\n                                  #{params[:key]},\n                                  #{params[:tran_id]},\n                                  #{params[:num]},\n                                  #{params[:start_date]},\n                                  #{params[:end_date]}))\"\n)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2132, "user_id": 856753, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/1c53a71370f55d0f0a4cc7e4b2c06b91?s=128&d=identicon&r=PG", "display_name": "Micheal", "link": "https://stackoverflow.com/users/856753/micheal"}, "edited": false, "score": 0, "creation_date": 1487033613, "post_id": 42200993, "comment_id": 71593479, "body": "I don&#39;t see how i can use the prepared statement syntax in my example."}], "tags": [], "owner": {"reputation": 1469, "user_id": 272933, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/PT5Mm.jpg?s=128&g=1", "display_name": "Ivan Bryzzhin", "link": "https://stackoverflow.com/users/272933/ivan-bryzzhin"}, "is_accepted": false, "score": 0, "last_activity_date": 1486979182, "creation_date": 1486979182, "answer_id": 42200993, "question_id": 41967721, "link": "https://stackoverflow.com/questions/41967721/ruby-on-rails-prepared-statement-for-oracle-view-function/42200993#42200993", "title": "ruby on rails prepared statement for oracle view/function", "body": "<p>This is called Prepared Statement. In <a href=\"https://docs.oracle.com/javase/tutorial/jdbc/basics/prepared.html\" rel=\"nofollow noreferrer\">doc</a> you can find an example how to use it.</p>\n"}], "owner": {"reputation": 2132, "user_id": 856753, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/1c53a71370f55d0f0a4cc7e4b2c06b91?s=128&d=identicon&r=PG", "display_name": "Micheal", "link": "https://stackoverflow.com/users/856753/micheal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 523, "favorite_count": 1, "answer_count": 2, "score": 8, "last_activity_date": 1486979182, "creation_date": 1485897781, "last_edit_date": 1486677497, "question_id": 41967721, "link": "https://stackoverflow.com/questions/41967721/ruby-on-rails-prepared-statement-for-oracle-view-function", "title": "ruby on rails prepared statement for oracle view/function", "body": "<p>I have the following  code which executes an oracle view as follows:</p>\n\n<pre><code>def run_query\n    connection.exec_query(\n      \"SELECT * FROM TABLE(FN_REQRESP(#{type_param},\n                                      #{search_type_param},\n                                      #{tid_param},\n                                      #{last_param},\n                                      #{key_param},\n                                      #{tran_id_param},\n                                      #{num_param},\n                                      #{start_date_param},\n                                      #{end_date_param}))\")\nend\n</code></pre>\n\n<p>The output of the above query is as follows:</p>\n\n<pre><code>SELECT * FROM TABLE(FN_REQRESP('ALL',\n 'ALL_TRAN',\n '100007',\n '',\n '',\n '',\n '',\n TO_DATE('27-January-2017','dd-MON-yy'),\n TO_DATE('31-January-2017','dd-MON-yy'))) \n</code></pre>\n\n<p>The problem is that above query has a SQL injection vulnerability.</p>\n\n<p>So, i tried to add a prepare statement as follows:</p>\n\n<pre><code> connection.exec_query('SELECT * FROM TABLE(FN_REQRESP(?,?,?,?,?,?,?,?,?))','myquery',[type_param,search_type_param,tid_param,last_param,key_param,tran_id_param,num_param,start_date_param,end_date_param])\n</code></pre>\n\n<p>I get the following error now:</p>\n\n<blockquote>\n  <p>NoMethodError: undefined method `type' for \"'ALL'\":String: SELECT *\n  FROM TABLE(FN_REQRESP(?,?,?,?,?,?,?,?,?))</p>\n</blockquote>\n\n<p>It's the single quotes that messing it up I beleive. Is there a way to overcome this?</p>\n\n<p>EDIT:\nI tried NDN's answer and the error below:</p>\n\n<pre><code>OCIError: ORA-00907: missing right parenthesis: SELECT * FROM TABLE(FN_REQRESP('\\'ALL\\'',\n                                      '\\'ALL_TRAN\\'',\n                                      '\\'100007\\'',\n                                      '\\'\\'',\n                                      '\\'\\'',\n                                      '\\'\\'',\n                                      '\\'\\'',\n                                      'TO_DATE(\\'01-February-2017\\',\\'dd-MON-yy\\')',\n                                      'TO_DATE(\\'10-February-2017\\',\\'dd-MON-yy\\')'))\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "devise"], "comments": [{"owner": {"reputation": 5998, "user_id": 3889043, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PrDMd.jpg?s=128&g=1", "display_name": "mrlew", "link": "https://stackoverflow.com/users/3889043/mrlew"}, "edited": false, "score": 0, "creation_date": 1485899082, "post_id": 41967236, "comment_id": 71114853, "body": "Can you post your <code>db&#47;schema.rb</code> ?"}, {"owner": {"reputation": 229, "user_id": 2919787, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RtOM0.jpg?s=128&g=1", "display_name": "Piotr Szachewicz", "link": "https://stackoverflow.com/users/2919787/piotr-szachewicz"}, "edited": false, "score": 0, "creation_date": 1485900476, "post_id": 41967236, "comment_id": 71115468, "body": "yeah, mrlew is right - maybe you didn&#39;t create a migration for the custom fields or you didn&#39;t do <code>bundle exec rake db:migrate</code>"}, {"owner": {"reputation": 457, "user_id": 6885605, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/0af5ee939bdae67c9ddb5df937aefba9?s=128&d=identicon&r=PG", "display_name": "Edie W.", "link": "https://stackoverflow.com/users/6885605/edie-w"}, "edited": false, "score": 0, "creation_date": 1485988825, "post_id": 41967236, "comment_id": 71159497, "body": "Added the schema.db"}], "answers": [{"tags": [], "owner": {"reputation": 12440, "user_id": 308731, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/eQxFn.jpg?s=128&g=1", "display_name": "Eyeslandic", "link": "https://stackoverflow.com/users/308731/eyeslandic"}, "is_accepted": true, "score": 0, "last_activity_date": 1485902796, "creation_date": 1485902796, "answer_id": 41968891, "question_id": 41967236, "link": "https://stackoverflow.com/questions/41967236/name-nil-when-using-rails-devise-and-name-attribute/41968891#41968891", "title": "name: nil when using Rails Devise and name attribute", "body": "<p>Remove this line from the model </p>\n\n<pre><code>attr_accessor :first_name, :last_name\n</code></pre>\n"}], "owner": {"reputation": 457, "user_id": 6885605, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/0af5ee939bdae67c9ddb5df937aefba9?s=128&d=identicon&r=PG", "display_name": "Edie W.", "link": "https://stackoverflow.com/users/6885605/edie-w"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 194, "favorite_count": 0, "accepted_answer_id": 41968891, "answer_count": 1, "score": 1, "last_activity_date": 1485988805, "creation_date": 1485895794, "last_edit_date": 1495541801, "question_id": 41967236, "link": "https://stackoverflow.com/questions/41967236/name-nil-when-using-rails-devise-and-name-attribute", "title": "name: nil when using Rails Devise and name attribute", "body": "<p>When I create a new User, custom attributes are <strong>nil</strong>. </p>\n\n<p>application_controller.rb</p>\n\n<pre><code>class ApplicationController &lt; ActionController::Base\n# Prevent CSRF attacks by raising an exception.\n# For APIs, you may want to use :null_session instead.\nprotect_from_forgery with: :exception\n\nbefore_action :configure_permitted_parameters, if: :devise_controller?\n\nprotected\n\ndef configure_permitted_parameters\n    # devise_parameter_sanitizer.permit(:sign_up) { |u| u.permit(:first_name, :last_name, :email, :password, :password_confirmation) }\n    # devise_parameter_sanitizer.permit(:account_update) { |u| u.permit(:first_name, :last_name, :email, :password, :password_confirmation, :current_password) }\n    devise_parameter_sanitizer.permit(:sign_up, keys: [:first_name, :last_name])\n    devise_parameter_sanitizer.permit(:account_update, keys: [:first_name, :last_name])\nend\nend\n</code></pre>\n\n<p>User.rb</p>\n\n<pre><code>class User &lt; ApplicationRecord\n# Include default devise modules. Others available are:\n# :confirmable, :lockable, :timeoutable and :omniauthable\ndevise :database_authenticatable, :registerable,\n   :recoverable, :rememberable, :trackable, :validatable, :confirmable\n\nvalidates :email, :password, :password_confirmation, :first_name, :last_name, presence: true\n\nattr_accessor :first_name, :last_name\nend\n</code></pre>\n\n<p>seeds.rb</p>\n\n<pre><code>User.create(first_name: \"User\", last_name: \"Help\", email: \"account@email.com\", password: \"password\", password_confirmation: \"password\")\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>#&lt;User id: 5, email: \"account@email.com\", created_at: \"2017-01-31 02:44:32\", updated_at: \"2017-01-31 02:44:32\", first_name: nil, last_name: nil&gt;\n</code></pre>\n\n<p>I am unsure where I went wrong... I followed the <a href=\"https://github.com/plataformatec/devise\" rel=\"nofollow noreferrer\">Devise</a> guide and have read several Stack Overflow questions with similar issues (<a href=\"https://stackoverflow.com/questions/23084971/devise-user-model-custom-field-always-nil\">question</a>). I have tried the attr_accessible to no avail. </p>\n\n<p>Update: db/schema.rb</p>\n\n<pre><code>create_table \"users\", force: :cascade do |t|\nt.string   \"email\",                  default: \"\",        null: false\nt.string   \"encrypted_password\",     default: \"\",        null: false\nt.string   \"reset_password_token\"\nt.datetime \"reset_password_sent_at\"\nt.datetime \"remember_created_at\"\nt.integer  \"sign_in_count\",          default: 0,         null: false\nt.datetime \"current_sign_in_at\"\nt.datetime \"last_sign_in_at\"\nt.inet     \"current_sign_in_ip\"\nt.inet     \"last_sign_in_ip\"\nt.string   \"type\",                   default: \"Account\", null: false\nt.datetime \"created_at\",                                 null: false\nt.datetime \"updated_at\",                                 null: false\nt.string   \"first_name\"\nt.string   \"last_name\"\nt.string   \"confirmation_token\"\nt.datetime \"confirmed_at\"\nt.datetime \"confirmation_sent_at\"\nt.index [\"confirmation_token\"], name: \"index_users_on_confirmation_token\", unique: true, using: :btree\nt.index [\"email\"], name: \"index_users_on_email\", unique: true, using: :btree\nt.index [\"reset_password_token\"], name: \"index_users_on_reset_password_token\", unique: true, using: :btree\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "railstutorial.org"], "comments": [{"owner": {"reputation": 26120, "user_id": 219883, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c35b5b0f9e7cce48864f4f1545ead995?s=128&d=identicon&r=PG", "display_name": "Taryn East", "link": "https://stackoverflow.com/users/219883/taryn-east"}, "edited": false, "score": 0, "creation_date": 1485895709, "post_id": 41967154, "comment_id": 71113154, "body": "<code>bundle exec test rake</code> - should that be <code>bundle exec rake test</code> instead?"}, {"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1485895979, "post_id": 41967154, "comment_id": 71113313, "body": "In case you don&#39;t realise, you&#39;re using an older version of this tutorial."}, {"owner": {"reputation": 93, "user_id": 7496987, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7cda579a0a61a5ef4a4a444f0640257?s=128&d=identicon&r=PG&f=1", "display_name": "Siggytron", "link": "https://stackoverflow.com/users/7496987/siggytron"}, "reply_to_user": {"reputation": 26120, "user_id": 219883, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c35b5b0f9e7cce48864f4f1545ead995?s=128&d=identicon&r=PG", "display_name": "Taryn East", "link": "https://stackoverflow.com/users/219883/taryn-east"}, "edited": false, "score": 1, "creation_date": 1485897545, "post_id": 41967154, "comment_id": 71114172, "body": "@Taryn East, thank you. Yes that is a typo on my question, but I did type it into the terminal correctly."}, {"owner": {"reputation": 26120, "user_id": 219883, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c35b5b0f9e7cce48864f4f1545ead995?s=128&d=identicon&r=PG", "display_name": "Taryn East", "link": "https://stackoverflow.com/users/219883/taryn-east"}, "edited": false, "score": 0, "creation_date": 1485897740, "post_id": 41967154, "comment_id": 71114256, "body": "Just checking :) It&#39;s the sort of silly mistake that can cause endless headaches with a really simple fix... if it were actually the problem ;)"}], "answers": [{"tags": [], "owner": {"reputation": 93, "user_id": 7496987, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7cda579a0a61a5ef4a4a444f0640257?s=128&d=identicon&r=PG&f=1", "display_name": "Siggytron", "link": "https://stackoverflow.com/users/7496987/siggytron"}, "is_accepted": false, "score": 0, "last_activity_date": 1485898161, "creation_date": 1485898161, "answer_id": 41967818, "question_id": 41967154, "link": "https://stackoverflow.com/questions/41967154/bundle-exec-rake-test-nomethoderror-undefined-method-web-console-for-activ/41967818#41967818", "title": "&quot;bundle exec rake test&quot; &quot;NoMethodError: undefined method `web_console&#39; for ActiveRecord::Base:Class&quot;", "body": "<p>I may have found an answer: Log off Cloud9. Turn off computer. Restart computer. Log back into Cloud9. Type \"bundle exec rake test.\" And it's fixed. Magic!</p>\n\n<p>On a more serious note, I realize I'm using an older version of the tutorial but the tutorial does direct the student to set up the environment in a way to fit this edition (I believe). Nevertheless, I did see a warning by Cloud9 at some point that the version of Ruby (2.3.0) I was using was \"buggy\" and to upgrade it to 2.3.1. I don't know if the buggy-ness of Ruby 2.3.0 was the culprit or perhaps buggy-ness in Cloud9, but it's something to be aware of for anyone else using an older version of the Tutorial.</p>\n"}], "owner": {"reputation": 93, "user_id": 7496987, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7cda579a0a61a5ef4a4a444f0640257?s=128&d=identicon&r=PG&f=1", "display_name": "Siggytron", "link": "https://stackoverflow.com/users/7496987/siggytron"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 262, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1558187883, "creation_date": 1485895485, "last_edit_date": 1558187883, "question_id": 41967154, "link": "https://stackoverflow.com/questions/41967154/bundle-exec-rake-test-nomethoderror-undefined-method-web-console-for-activ", "title": "&quot;bundle exec rake test&quot; &quot;NoMethodError: undefined method `web_console&#39; for ActiveRecord::Base:Class&quot;", "body": "<p>I'm following along, \"Ruby on Rails Tutorial 3rd Edition\" by Michael Hartl. I'm in Chapter 3, on the very first attempt to use the test command. </p>\n\n<p>There are two extremely basic pages - home and help - with only text on them. I think the following tests are supposed to check that the pages exist:</p>\n\n<p><code>sample_app/test/controllers/static-pages.rb</code></p>\n\n<pre><code>require 'test_helper'\n class StaticPagesControllerTest &lt; ActionController::TestCase\n   test \"should get home\" do\n   get :home\n   assert_response :success\n end\n\n test \"should get help\" do\n   get :help\n   assert_response :success\n end\nend\n</code></pre>\n\n<p>However, when I run the command </p>\n\n<pre><code>$ bundle exec test rake\n</code></pre>\n\n<p>in the terminal window, I receive a long error that begins with</p>\n\n<pre><code>rake aborted!\nNoMethodError: undefined method `web_console' for ActiveRecord::Base:Class\n</code></pre>\n\n<p>I've read a variety of suggestions that seem to revolve around gem files, in particular the one for 'web-console.' I've tried moving the gem around a bit to no avail but I'm willing to try it all again. Here is the current gem file:</p>\n\n<p><code>sample_app/Gemfile</code> (comments removed)</p>\n\n<pre><code>source 'https://rubygems.org'\n\n\ngem 'rails', '4.2.2'\n\ngem 'sqlite3'\n\ngem 'sass-rails', '~&gt; 5.0'\n\ngem 'uglifier', '&gt;= 1.3.0'\n\ngem 'coffee-rails', '~&gt; 4.1.0'\n\ngem 'jquery-rails'\n\ngem 'turbolinks'\n\ngem 'jbuilder', '~&gt; 2.0'\n\ngem 'sdoc', '~&gt; 0.4.0', group: :doc\n\n\ngem 'web-console', group: :development\n\ngroup :development do\n\n  gem 'sqlite3'\n\n  gem 'byebug'\n\n  gem 'spring'\n\n  gem 'guard'\n\n  gem 'guard-minitest'\nend\n\n\ngroup :test do\n\n  gem 'minitest-reporters'\n\n  gem 'mini_backtrace'\n\n\n\nend\n</code></pre>\n\n<p>Here is the entire error code if you're interested:</p>\n\n<pre><code>Running via Spring preloader in process 6353\nrake aborted!\nNoMethodError: undefined method `web_console' for ActiveRecord::Base:Class\n/usr/local/rvm/gems/ruby-2.3.0/gems/activerecord-4.2.2/lib/active_record/dynamic_matchers.rb:26:in `method_missing'\n/home/ubuntu/workspace/sample_app/test/controllers/static_pages_controller_test.rb:16:in `&lt;class:StaticPagesControllerTest&gt;'\n/home/ubuntu/workspace/sample_app/test/controllers/static_pages_controller_test.rb:5:in `&lt;top (required)&gt;'\n/usr/local/rvm/gems/ruby-2.3.0/gems/railties-4.2.2/lib/rails/test_unit/sub_test_task.rb:114:in `require'\n/usr/local/rvm/gems/ruby-2.3.0/gems/railties-4.2.2/lib/rails/test_unit/sub_test_task.rb:114:in `block (3 levels) in define'\n/usr/local/rvm/gems/ruby-2.3.0/gems/railties-4.2.2/lib/rails/test_unit/sub_test_task.rb:114:in `each'\n/usr/local/rvm/gems/ruby-2.3.0/gems/railties-4.2.2/lib/rails/test_unit/sub_test_task.rb:114:in `block (2 levels) in define'\n/usr/local/rvm/gems/ruby-2.3.0/gems/railties-4.2.2/lib/rails/test_unit/sub_test_task.rb:113:in `each'\n/usr/local/rvm/gems/ruby-2.3.0/gems/railties-4.2.2/lib/rails/test_unit/sub_test_task.rb:113:in `block in define'\n/usr/local/rvm/gems/ruby-2.3.0/gems/railties-4.2.2/lib/rails/test_unit/sub_test_task.rb:20:in `invoke_rake_task'\n/usr/local/rvm/gems/ruby-2.3.0/gems/railties-4.2.2/lib/rails/test_unit/testing.rake:8:in `block in &lt;top (required)&gt;'\n/usr/local/rvm/gems/ruby-2.3.0/gems/rake-12.0.0/exe/rake:27:in `&lt;top (required)&gt;'\n/usr/local/rvm/gems/ruby-2.3.0/bin/ruby_executable_hooks:15:in `eval'\n/usr/local/rvm/gems/ruby-2.3.0/bin/ruby_executable_hooks:15:in `&lt;main&gt;'\nTasks: TOP =&gt; test:run\n(See full trace by running task with --trace)\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 26120, "user_id": 219883, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c35b5b0f9e7cce48864f4f1545ead995?s=128&d=identicon&r=PG", "display_name": "Taryn East", "link": "https://stackoverflow.com/users/219883/taryn-east"}, "edited": false, "score": 0, "creation_date": 1485895529, "post_id": 41966781, "comment_id": 71113044, "body": "Firstly - I notice that your adaptation... is not actually quite the same query as the original SQL you have - this is confusing and makes it more difficult to figure out how to help you - there&#39;s a group in there that isn&#39;t present in the original query, and there are more where conditions... are you mangling together the query with the subquery somehow? You shouldn&#39;t need to do that. your rails query will have the same structure (roughly) as your original query..."}, {"owner": {"reputation": 26120, "user_id": 219883, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c35b5b0f9e7cce48864f4f1545ead995?s=128&d=identicon&r=PG", "display_name": "Taryn East", "link": "https://stackoverflow.com/users/219883/taryn-east"}, "edited": false, "score": 0, "creation_date": 1485895547, "post_id": 41966781, "comment_id": 71113050, "body": "Secondly: see if this one can help you: <a href=\"http://stackoverflow.com/questions/21556733/rails-select-subquery-without-finder-sql-if-possible\" title=\"rails select subquery without finder sql if possible\">stackoverflow.com/questions/21556733/&hellip;</a>"}, {"owner": {"reputation": 335, "user_id": 6591321, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/4e94cde60d4c12465d9110e7b02fa2d5?s=128&d=identicon&r=PG&f=1", "display_name": "LuisC", "link": "https://stackoverflow.com/users/6591321/luisc"}, "reply_to_user": {"reputation": 26120, "user_id": 219883, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c35b5b0f9e7cce48864f4f1545ead995?s=128&d=identicon&r=PG", "display_name": "Taryn East", "link": "https://stackoverflow.com/users/219883/taryn-east"}, "edited": false, "score": 0, "creation_date": 1485896822, "post_id": 41966781, "comment_id": 71113821, "body": "@TarynEast Thanks for answer. Sorry, I already updated my post. My problem is that in the original query there is a subquery where a &quot;FROM&quot; is included to another table called &quot;Venta&quot;, how can I do it? Is there any way I can use the original query in rails without adapting it?"}, {"owner": {"reputation": 26120, "user_id": 219883, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c35b5b0f9e7cce48864f4f1545ead995?s=128&d=identicon&r=PG", "display_name": "Taryn East", "link": "https://stackoverflow.com/users/219883/taryn-east"}, "edited": false, "score": 0, "creation_date": 1485897852, "post_id": 41966781, "comment_id": 71114299, "body": "Yes... have a look at the answer in the other question that I linked to. Also - you can just pass big strings of SQL to rails..."}], "owner": {"reputation": 335, "user_id": 6591321, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/4e94cde60d4c12465d9110e7b02fa2d5?s=128&d=identicon&r=PG&f=1", "display_name": "LuisC", "link": "https://stackoverflow.com/users/6591321/luisc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 45, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1485896211, "creation_date": 1485894084, "last_edit_date": 1485896211, "question_id": 41966781, "link": "https://stackoverflow.com/questions/41966781/how-to-adapt-a-query-to-rails", "title": "How to adapt a query to rails", "body": "<p>I am trying to adapt a query to ruby on rails, inside the query there is a subquery with a from that I do not know how I can adapt it to rails. The original query is as follows:</p>\n\n<pre><code>SELECT B.Codigo, C.NombreCorto, B.Descripcion, B.HI, B.latitude, B.longitude, C.Direccion, ISNULL((SELECT SUM(TOTAL) \nFROM Venta \nWHERE RutaId=B.RutaId AND DiaO=B.DiaO AND CodCliente=B.Codigo AND Cancelada='0' AND TOTAL&gt;0),0) AS TOTAL \nFROM BitacoraTiempos B LEFT JOIN Clientes C ON C.IdCli=B.Codigo \nWHERE B.RutaId='161' AND B.DiaO='893' \nORDER by B.HI \n</code></pre>\n\n<p>And this is what I have adapted so far:</p>\n\n<pre><code>  def self.search_gps_venta(params)\n\n    query = select('[bitacoratiempos].Codigo,[bitacoratiempos].RutaId,[bitacoratiempos].Descripcion,[bitacoratiempos].HI,[bitacoratiempos].latitude,[clientes].NombreCorto AS c_nombre,[clientes].Direccion AS c_direccion')\n         .joins('left join clientes ON bitacoratiempos.Codigo=clientes.IdCli')\n         .where(\"(bitacoratiempos.RutaId = :rutaId or :rutaId = '') AND (bitacoratiempos.DiaO = :diaO or :diaO = '') AND (bitacoratiempos.IdEmpresa = :idempresa)\",{rutaId: params[:search], diaO: params[:diaO]})\n    query\n\n  end\n</code></pre>\n\n<p>And in the controller I call it this way:</p>\n\n<pre><code>  def busqueda_gps_venta\n    @ventas = Bitacoratiempo.search_gps_venta(params)\n\n    respond_to do |format|\n    format.js\n    end\n  end\n</code></pre>\n\n<p>How can I include inside my rails query this part of the original query:</p>\n\n<pre><code>  SELECT B.Codigo, C.NombreCorto, B.Descripcion, B.HI, B.latitude, B.longitude, C.Direccion, ISNULL((SELECT SUM(TOTAL) \nFROM Venta \nWHERE RutaId=B.RutaId AND DiaO=B.DiaO AND CodCliente=B.Codigo AND Cancelada='0' AND TOTAL&gt;0),0) AS TOTAL \n</code></pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "edited": false, "score": 3, "creation_date": 1485891363, "post_id": 41965977, "comment_id": 71110803, "body": "You are always only counting down by 1 here. <code>count - 2</code> doesn&#39;t change <code>count</code>. And <code>count -= 1</code> is executed each time through the loop regardless of the value of <code>count</code>. Your logic should (1) check the value of <code>count</code> and decrement it according to the rule you want, and then (2) print the current value of <code>count</code>."}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 1, "creation_date": 1485894971, "post_id": 41965977, "comment_id": 71112723, "body": "What should happen when num is exactly 20?"}], "answers": [{"comments": [{"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "reply_to_user": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 1, "creation_date": 1485896342, "post_id": 41966555, "comment_id": 71113509, "body": "@EricDuminil Great idea, have just refactored my code (think that&#39;s what you meant)."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1485900142, "post_id": 41966555, "comment_id": 71115312, "body": "More verbose, but perhaps clearer: <code>n.step(by: -2, to: 0).entries</code>. Readers: <a href=\"http://ruby-doc.org/core-2.3.0/Enumerable.html#method-i-entries\" rel=\"nofollow noreferrer\">Enumerable#entries</a> is the same (same C code) as <a href=\"http://ruby-doc.org/core-2.3.0/Enumerable.html#method-i-to_a\" rel=\"nofollow noreferrer\">Enumerable#to_a</a>."}, {"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1485900739, "post_id": 41966555, "comment_id": 71115578, "body": "@CarySwoveland good idea, have modified my answer with your suggestion."}], "tags": [], "owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "is_accepted": false, "score": 1, "last_activity_date": 1485900954, "last_edit_date": 1485900954, "creation_date": 1485893183, "answer_id": 41966555, "question_id": 41965977, "link": "https://stackoverflow.com/questions/41965977/trying-to-write-a-simple-countdown-loop-in-pairs-with-ruby/41966555#41966555", "title": "Trying to write a simple countdown loop in pairs with Ruby", "body": "<p>You can use <a href=\"http://ruby-doc.org/core-2.4.0/Numeric.html#method-i-step\" rel=\"nofollow noreferrer\">Numeric#step</a> here. Something like this:</p>\n\n<pre><code>def num_cruncher n\n  s = n &gt; 20 ? -2 : -1\n  n.step(by: s, to: 0).entries\nend\n\nnum_cruncher 23\n#=&gt; [23, 21, 19, 17, 15, 13, 11, 9, 7, 5, 3, 1]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "is_accepted": false, "score": 2, "last_activity_date": 1485894799, "creation_date": 1485894799, "answer_id": 41966974, "question_id": 41965977, "link": "https://stackoverflow.com/questions/41965977/trying-to-write-a-simple-countdown-loop-in-pairs-with-ruby/41966974#41966974", "title": "Trying to write a simple countdown loop in pairs with Ruby", "body": "<p>Here's your code, with as few changes as possible :</p>\n\n<pre><code>def num_cruncher(num)\n  count = num\n\n  until count &lt; 0 do\n    puts count\n    if num &gt; 20\n      count -= 2\n    else\n      count -= 1\n    end\n  end\nend\n\nnum_cruncher(10)\n# 10\n# 9\n# 8\n# 7\n# 6\n# 5\n# 4\n# 3\n# 2\n# 1\n# 0\n\nnum_cruncher(21)\n# 21\n# 19\n# 17\n# 15\n# 13\n# 11\n# 9\n# 7\n# 5\n# 3\n# 1\n</code></pre>\n\n<p>By extracting the if-statement outside of the loop, the code becomes a bit shorter :</p>\n\n<pre><code>def num_cruncher(num)\n  if num &gt; 20\n    step = 2\n  else\n    step = 1\n  end\n\n  until num &lt; 0 do\n    puts num\n    num -= step\n  end\nend\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user7496931"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 382, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1485900954, "creation_date": 1485891099, "last_edit_date": 1592644375, "question_id": 41965977, "link": "https://stackoverflow.com/questions/41965977/trying-to-write-a-simple-countdown-loop-in-pairs-with-ruby", "title": "Trying to write a simple countdown loop in pairs with Ruby", "body": "<p>This instructions are as follow:</p>\n<blockquote>\n<p>NUMBER CRUNCHER</p>\n<p>Write a method that takes a number as an argument\nIf the number is greater than 20\ncount down from the number by 2's\nIf the number is less than 20\ncount down from the number by 1's\nDisplay the numbers as they count down to 0.</p>\n</blockquote>\n<p>I have written this, but it's not doing what it's supposed. Any help?</p>\n<pre><code>def num_cruncher(num)\ncount = num\n\nuntil count == 0 do\n    if num &gt; 20\n        puts count - 2\n    else\n        puts &quot;#{count}&quot;\n    end\n        count -= 1\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"tags": [], "owner": {"reputation": 163714, "user_id": 123527, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/99e0b39c091e10d9c7d4452a34ca52dc?s=128&d=identicon&r=PG", "display_name": "Simone Carletti", "link": "https://stackoverflow.com/users/123527/simone-carletti"}, "is_accepted": true, "score": 23, "last_activity_date": 1485891528, "creation_date": 1485891528, "answer_id": 41966113, "question_id": 41965927, "link": "https://stackoverflow.com/questions/41965927/rails-string-replace-url-parameters/41966113#41966113", "title": "Rails String Replace URL Parameters", "body": "<p>If you are dealing with a web application (and/or Rails as the tag seems to indicate), then you certainly have Rack available. <a href=\"http://www.rubydoc.info/gems/rack/Rack/Utils\"><code>Rack::Utils</code></a> has methods to parse and build a query.</p>\n\n<pre><code>url = \"https://example.com/user/tr_auth.php?key=34432&amp;cmp_id=344&amp;tr_id={user_id}\"\nuri = URI.parse(url)\n\nquery = Rack::Utils.parse_query(uri.query)\n# =&gt; {\"key\"=&gt;\"34432\", \"cmp_id\"=&gt;\"344\", \"tr_id\"=&gt;\"{user_id}\"}\n\n# Replace the value\nquery[\"cmp_id\"] = 44553\n\nuri.query = Rack::Utils.build_query(query)\nuri.to_s\n# =&gt; \"https://example.com/user/tr_auth.php?key=34432&amp;cmp_id=44553&amp;tr_id=%7Buser_id%7D\"\n</code></pre>\n\n<p>Also note that Rack, by default, escapes the query.</p>\n"}, {"tags": [], "owner": {"reputation": 276, "user_id": 7418050, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/afc9122bdfce5db0c7aa651106901535?s=128&d=identicon&r=PG", "display_name": "Dmitry Kukhlevsky", "link": "https://stackoverflow.com/users/7418050/dmitry-kukhlevsky"}, "is_accepted": false, "score": 1, "last_activity_date": 1485891751, "creation_date": 1485891751, "answer_id": 41966176, "question_id": 41965927, "link": "https://stackoverflow.com/questions/41965927/rails-string-replace-url-parameters/41966176#41966176", "title": "Rails String Replace URL Parameters", "body": "<p>First, you can parse the url for params:</p>\n\n<pre><code>require 'cgi'\nurl = 'https://example.com/user/tr_auth.php?key=34432&amp;cmp_id=344&amp;tr_id={user_id}'\nstring_params = url.split('?')[1]\nhash = CGI::parse(string_params)\n</code></pre>\n\n<p>Then you can iterate the hash by keys and change values:</p>\n\n<pre><code>hash.keys.each {|key| hash[key]='new value'}\nurl_params = hash.to_param\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 251, "user_id": 5338062, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07cdd86ea7bd7c23f87fab877b652a00?s=128&d=identicon&r=PG&f=1", "display_name": "Florin Ionita", "link": "https://stackoverflow.com/users/5338062/florin-ionita"}, "is_accepted": false, "score": 2, "last_activity_date": 1485892451, "creation_date": 1485892451, "answer_id": 41966368, "question_id": 41965927, "link": "https://stackoverflow.com/questions/41965927/rails-string-replace-url-parameters/41966368#41966368", "title": "Rails String Replace URL Parameters", "body": "<pre><code>url = \"https://example.com/user/tr_auth.php?key=34432&amp;cmp_id=344&amp;tr_id={user_id}\"\nuri = URI.parse(url)\nparams = CGI.parse(uri.query)\nparams['cmp_id'] = 44553\n\nnew_str = uri.host + uri.path + '?' + params.to_query\n</code></pre>\n"}], "owner": {"reputation": 4750, "user_id": 2650407, "user_type": "registered", "accept_rate": 91, "profile_image": "https://graph.facebook.com/1172460015/picture?type=large", "display_name": "Tom Hammond", "link": "https://stackoverflow.com/users/2650407/tom-hammond"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3216, "favorite_count": 1, "accepted_answer_id": 41966113, "answer_count": 3, "score": 3, "last_activity_date": 1485892451, "creation_date": 1485890908, "question_id": 41965927, "link": "https://stackoverflow.com/questions/41965927/rails-string-replace-url-parameters", "title": "Rails String Replace URL Parameters", "body": "<p>Let's say I have a string like:</p>\n\n<pre><code>url = \"https://example.com/user/tr_auth.php?key=34432&amp;cmp_id=344&amp;tr_id={user_id}\"\n</code></pre>\n\n<p>I want to update the <code>cmp_id=344</code> to be say <code>cmp_id=44553</code>. What's the best way to accomplish this? I can't gsub per say because I don't know what cmp_id might be equal, only that it will be a URL parameter in the string.</p>\n\n<p>It seems like I want to do something like </p>\n\n<pre><code>uri = URI.parse(url)\nparams = CGI.parse(uri.query)\n</code></pre>\n\n<p>But then, how do I re-build the string swapping out the <code>cmp_id</code> parameter to be <code>44553</code>?</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "datetime", "ruby-on-rails-4", "erb"], "answers": [{"tags": [], "owner": {"reputation": 18593, "user_id": 4304188, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d5695b0e5c30d4464163e3f3412fe5f1?s=128&d=identicon&r=PG", "display_name": "Mihai Dinculescu", "link": "https://stackoverflow.com/users/4304188/mihai-dinculescu"}, "is_accepted": false, "score": 1, "last_activity_date": 1485902565, "last_edit_date": 1485902565, "creation_date": 1485889336, "answer_id": 41965475, "question_id": 41965408, "link": "https://stackoverflow.com/questions/41965408/rails-4-erb-consistent-date-format/41965475#41965475", "title": "Rails 4 ERB: consistent date format", "body": "<p>You can use <a href=\"http://guides.rubyonrails.org/i18n.html#how-to-store-your-custom-translations\" rel=\"nofollow noreferrer\">I18n (Rails Internationalization)</a> to set a default date and time format</p>\n\n<p>config/locales/en.yml</p>\n\n<pre><code>en:\n  date:\n    formats:\n      default: \"%d/%m/%Y\"\n  time:\n    formats:\n      default: \"%d/%m/%Y %H:%M\"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 67463, "user_id": 203130, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/1RE8c.jpg?s=128&g=1", "display_name": "coreyward", "link": "https://stackoverflow.com/users/203130/coreyward"}, "is_accepted": true, "score": 2, "last_activity_date": 1485889345, "creation_date": 1485889345, "answer_id": 41965481, "question_id": 41965408, "link": "https://stackoverflow.com/questions/41965408/rails-4-erb-consistent-date-format/41965481#41965481", "title": "Rails 4 ERB: consistent date format", "body": "<p>Set a default format in your translations:</p>\n\n<pre><code>en:\n  time:\n    formats:\n      default: \"%a %b %d, %Y at %I:%M %p\"\n</code></pre>\n\n<p>Then use the translation helper in your ERb templates:</p>\n\n<pre><code>l some_model.created_at\n</code></pre>\n"}], "owner": {"reputation": 2441, "user_id": 224707, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/870ccdb57016c46120bb8e93f8bca94a?s=128&d=identicon&r=PG", "display_name": "Nick", "link": "https://stackoverflow.com/users/224707/nick"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1067, "favorite_count": 0, "accepted_answer_id": 41965481, "answer_count": 2, "score": 1, "last_activity_date": 1485902565, "creation_date": 1485889066, "last_edit_date": 1495542258, "question_id": 41965408, "link": "https://stackoverflow.com/questions/41965408/rails-4-erb-consistent-date-format", "title": "Rails 4 ERB: consistent date format", "body": "<p>I have read several posts such as <a href=\"https://stackoverflow.com/questions/21249048\">How to format time and date from db:datetime record in Rails 4?</a> and <a href=\"https://stackoverflow.com/questions/21638396\">Custom date time format in rails 4</a> and I feel like I am missing a puzzle piece.</p>\n\n<p>In our project we have setup a conf variable for a date format and we use:</p>\n\n<pre><code>my_date_field.strftime(Rails.configuration.date_format_default)\n</code></pre>\n\n<p>Other suggestions are to setup an initializer and use:</p>\n\n<pre><code>my_date_field.to_s(format: :date_format_default)\n</code></pre>\n\n<p>Is there any way to make the output of a datetime field default to a format? In our project, unless we specify, we want a date to ALWAYS render the same way and it feels very un-DRY to have to constantly repeat <code>strftime</code> or <code>to_s</code>, both with their own parameters...</p>\n"}, {"tags": ["ruby", "chef-infra"], "answers": [{"tags": [], "owner": {"reputation": 6202, "user_id": 1066615, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/iv68W.png?s=128&g=1", "display_name": "sixty4bit", "link": "https://stackoverflow.com/users/1066615/sixty4bit"}, "is_accepted": true, "score": 2, "last_activity_date": 1485887483, "creation_date": 1485887483, "answer_id": 41964948, "question_id": 41964907, "link": "https://stackoverflow.com/questions/41964907/chef-recipe-not-if-with-sql-query-result/41964948#41964948", "title": "Chef recipe - not_if with SQL query result", "body": "<p>You just need to use a Ruby equality operator inside the block. Since you said \"only if\" the output is 0, it would be simpler to do this with <code>only_if</code> rather than <code>not_if</code>:</p>\n\n<pre><code>only_if { shell_out(\"mysql -u root -s --skip-column-names -e 'SELECT COUNT(DISTINCT table_name)&gt;0 FROM information_schema.columns WHERE table_schema = \\\"admindb\\\";'\").stdout.chomp == '0' } \n</code></pre>\n"}], "owner": {"reputation": 3463, "user_id": 1426111, "user_type": "registered", "accept_rate": 31, "profile_image": "https://i.stack.imgur.com/uSzUD.jpg?s=128&g=1", "display_name": "michail_w", "link": "https://stackoverflow.com/users/1426111/michail-w"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 410, "favorite_count": 0, "accepted_answer_id": 41964948, "answer_count": 1, "score": 1, "last_activity_date": 1485887483, "creation_date": 1485887351, "question_id": 41964907, "link": "https://stackoverflow.com/questions/41964907/chef-recipe-not-if-with-sql-query-result", "title": "Chef recipe - not_if with SQL query result", "body": "<p>I have in my recipe this block:</p>\n\n<pre><code>bash \"Create admin database tables\" do\n    code \"mysql -u root -D admindb &lt; /vagrant/files/admin.sql\"\n    not_if shell_out(\"mysql -u root -s --skip-column-names -e 'SELECT COUNT(DISTINCT table_name)&gt;0 FROM information_schema.columns WHERE table_schema = \\\"admindb\\\";'\").stdout().chomp()\nend\n</code></pre>\n\n<p>Result of select query is <code>0</code> or <code>1</code> written to stdout (nothing more). I would like to run shell command only, if result of query will be <code>0</code>. How can I achieve it?</p>\n"}, {"tags": ["ruby", "hash", "max"], "comments": [{"owner": {"reputation": 14827, "user_id": 645886, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2abb0123e9484284a9cb2d36aa9854b3?s=128&d=identicon&r=PG&f=1", "display_name": "Surya", "link": "https://stackoverflow.com/users/645886/surya"}, "edited": false, "score": 1, "creation_date": 1485885734, "post_id": 41964349, "comment_id": 71107769, "body": "Just do <code>hash.max_by{|k,v| v}.to_h</code>. Note: <code>#to_h</code> works only for Ruby 2.x of above versions. For Ruby 1.9 or lower do: <code>Hash[hash.max_by{|k,v| v}]</code>."}], "answers": [{"tags": [], "owner": {"reputation": 2202, "user_id": 3607039, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/8Bj3I.jpg?s=128&g=1", "display_name": "Bustikiller", "link": "https://stackoverflow.com/users/3607039/bustikiller"}, "is_accepted": true, "score": 6, "last_activity_date": 1485885603, "creation_date": 1485885603, "answer_id": 41964403, "question_id": 41964349, "link": "https://stackoverflow.com/questions/41964349/how-do-i-get-the-maximum-value-of-a-hash-in-ruby/41964403#41964403", "title": "How do I get the maximum value of a hash in Ruby?", "body": "<p>I would use the <code>max</code> method on the <code>values</code> of the hash: </p>\n\n<pre><code>{a: 1, b: 2}.values.max\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 1, "last_activity_date": 1485903518, "creation_date": 1485903518, "answer_id": 41969054, "question_id": 41964349, "link": "https://stackoverflow.com/questions/41964349/how-do-i-get-the-maximum-value-of-a-hash-in-ruby/41969054#41969054", "title": "How do I get the maximum value of a hash in Ruby?", "body": "<pre><code>hash.max_by(&amp;:last).last\n</code></pre>\n\n<p>makes a single pass through the array.  By contrast @Bustikiller's code makes two passes, but I suspect it's still faster than the above.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user7055375"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4296, "favorite_count": 1, "accepted_answer_id": 41964403, "answer_count": 2, "score": 0, "last_activity_date": 1485903518, "creation_date": 1485885411, "question_id": 41964349, "link": "https://stackoverflow.com/questions/41964349/how-do-i-get-the-maximum-value-of-a-hash-in-ruby", "title": "How do I get the maximum value of a hash in Ruby?", "body": "<p>Given a hash whose values are all numeric, I thought I read in some other SO post this was done by</p>\n\n<pre><code>hash.max_by{|k,v| v}\n</code></pre>\n\n<p>but this returns an array, which I don't want.  I want the greatest value in my hash.</p>\n"}, {"tags": ["ruby", "docker", "jekyll", "webrick"], "answers": [{"comments": [{"owner": {"reputation": 3871, "user_id": 889053, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/3e26b08aa9c9bff40d6dab7b98680bf4?s=128&d=identicon&r=PG", "display_name": "Christian Bongiorno", "link": "https://stackoverflow.com/users/889053/christian-bongiorno"}, "edited": false, "score": 1, "creation_date": 1485887126, "post_id": 41964486, "comment_id": 71108503, "body": "That&#39;s exactly what I suspected! The question was &quot;what to do about it&quot; - I went with option 2 as it makes the image completely portable and no one has to know anything extra to run it."}, {"owner": {"reputation": 1524, "user_id": 7023816, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-W2xiGxhxLvo/AAAAAAAAAAI/AAAAAAAAUuk/dndzuuQ-i1o/photo.jpg?sz=128", "display_name": "Cameron Hudson", "link": "https://stackoverflow.com/users/7023816/cameron-hudson"}, "edited": false, "score": 0, "creation_date": 1559258280, "post_id": 41964486, "comment_id": 99373489, "body": "I&#39;m using Laravel. Setting the Docker port with <code>127.0.0.1:4000:4000</code> and going to <code>127.0.0.1:4000</code> in my browser did not work, but leaving the Docker port set as <code>4000:4000</code> and running <code>php artisan serve --host=0.0.0.0</code> did. Now I can visit <code>localhost:4000</code>, <code>127.0.0.1:4000</code>, or <code>0.0.0.0:4000</code> in my browser, and all of them work. Thank you!"}, {"owner": {"reputation": 109, "user_id": 2692630, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5692492fb8eea3dc16fba49de246cf4d?s=128&d=identicon&r=PG&f=1", "display_name": "Bananin", "link": "https://stackoverflow.com/users/2692630/bananin"}, "edited": false, "score": 0, "creation_date": 1611259749, "post_id": 41964486, "comment_id": 116401077, "body": "Also worked for debugging FastAPI through Docker. What&#39;s the difference between localhost and 0.0.0.0 ?"}], "tags": [], "owner": {"reputation": 25268, "user_id": 215168, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/212c9d7980fe9aa71739313d483b3782?s=128&d=identicon&r=PG", "display_name": "Abe Voelker", "link": "https://stackoverflow.com/users/215168/abe-voelker"}, "is_accepted": true, "score": 18, "last_activity_date": 1485885902, "creation_date": 1485885902, "answer_id": 41964486, "question_id": 41964172, "link": "https://stackoverflow.com/questions/41964172/docker-container-sending-empty-responses/41964486#41964486", "title": "Docker container sending empty responses", "body": "<p>Looks like Jekyll is binding to localhost. Either start the container like this:</p>\n\n<pre><code>docker run -d --name jekyll -p 127.0.0.1:4000:4000\n</code></pre>\n\n<p>Or have Jekyll bind to <code>0.0.0.0</code>:</p>\n\n<pre><code>CMD [\"jekyll\", \"serve\", \"--host\", \"0.0.0.0\"]\n</code></pre>\n"}], "owner": {"reputation": 3871, "user_id": 889053, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/3e26b08aa9c9bff40d6dab7b98680bf4?s=128&d=identicon&r=PG", "display_name": "Christian Bongiorno", "link": "https://stackoverflow.com/users/889053/christian-bongiorno"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 8001, "favorite_count": 2, "accepted_answer_id": 41964486, "answer_count": 1, "score": 12, "last_activity_date": 1486058768, "creation_date": 1485884869, "last_edit_date": 1486058768, "question_id": 41964172, "link": "https://stackoverflow.com/questions/41964172/docker-container-sending-empty-responses", "title": "Docker container sending empty responses", "body": "<p>Hoping someone can tell me what I am missing? This is a ruby app using webrick and I am trying to containerize the app. Running on Mac OSX 10.12.3 Sierra. Here is my Dockerfile</p>\n\n<pre><code>FROM ruby:2.4.0-alpine\nRUN apk add --no-cache gcc musl-dev libstdc++ g++ make\nRUN gem install jekyll bundler redcarpet\nRUN mkdir -p /usr/app/jekyll\nCOPY . /usr/app/jekyll\nWORKDIR /usr/app/jekyll\nEXPOSE 4000:4000\nCMD [\"jekyll\", \"serve\"]\n</code></pre>\n\n<p>Here is how the image is built</p>\n\n<pre><code>docker build -t chb0docker/cheat .\n</code></pre>\n\n<p>if I run the service directly on the host, it runs fine</p>\n\n<pre><code>Violas-MacBook-Pro:progfun-wiki cbongiorno$ jekyll serve &amp;\n[1] 49286\nViolas-MacBook-Pro:progfun-wiki cbongiorno$ Configuration file: /Users/cbongiorno/development/progfun-wiki/_config.yml\nConfiguration file: /Users/cbongiorno/development/progfun-wiki/_config.yml\n            Source: /Users/cbongiorno/development/progfun-wiki\n       Destination: /Users/cbongiorno/development/progfun-wiki/_site\n Incremental build: disabled. Enable with --incremental\n      Generating... \n                    done in 0.409 seconds.\n Auto-regeneration: enabled for '/Users/cbongiorno/development/progfun-wiki'\nConfiguration file: /Users/cbongiorno/development/progfun-wiki/_config.yml\n    Server address: http://127.0.0.1:4000/\n  Server running... press ctrl-c to stop.\n</code></pre>\n\n<p>verify the server is up:</p>\n\n<pre><code>Violas-MacBook-Pro:progfun-wiki cbongiorno$ curl localhost:4000 2&gt; /dev/null | wc -l\n      40\n</code></pre>\n\n<p>now run it in docker:</p>\n\n<pre><code>Violas-MacBook-Pro:progfun-wiki cbongiorno$ fg\njekyll serve\n^C\nViolas-MacBook-Pro:progfun-wiki cbongiorno$ docker run -d --name jekyll -p 4000:4000 chb0docker/cheat \ne766e4acb007033583885b1a3c52dc3c2dc51c6929c8466f3a4ff958f76ebc5f\n</code></pre>\n\n<p>verify the process</p>\n\n<pre><code>Violas-MacBook-Pro:progfun-wiki cbongiorno$ docker ps\nCONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS                    NAMES\ne766e4acb007        chb0docker/cheat    \"jekyll serve\"      19 minutes ago      Up 32 seconds       0.0.0.0:4000-&gt;4000/tcp   jekyll\nViolas-MacBook-Pro:progfun-wiki cbongiorno$ docker inspect --format '{{ .NetworkSettings.IPAddress }}' jekyll\n172.17.0.3\nViolas-MacBook-Pro:progfun-wiki cbongiorno$ docker logs jekyll\nConfiguration file: /usr/app/jekyll/_config.yml\nConfiguration file: /usr/app/jekyll/_config.yml\n            Source: /usr/app/jekyll\n       Destination: /usr/app/jekyll/_site\n Incremental build: disabled. Enable with --incremental\n      Generating... \n                    done in 0.329 seconds.\n Auto-regeneration: enabled for '/usr/app/jekyll'\nConfiguration file: /usr/app/jekyll/_config.yml\n    Server address: http://127.0.0.1:4000/\n  Server running... press ctrl-c to stop.\n</code></pre>\n\n<p>now try and get some data</p>\n\n<pre><code>Violas-MacBook-Pro:progfun-wiki cbongiorno$ curl localhost:4000 2&gt; /dev/null | wc -l\n       0\nViolas-MacBook-Pro:progfun-wiki cbongiorno$ curl 172.17.0.3:4000 2&gt; /dev/null | wc -l\n       0\nViolas-MacBook-Pro:progfun-wiki cbongiorno$ curl 0.0.0.0:4000 2&gt; /dev/null | wc -l\n       0\n</code></pre>\n\n<p>but, if we execute the above GET (with <code>wget</code> instead of <code>curl</code> because it's not installed on this container) we can see all is well inside the container</p>\n\n<pre><code> docker exec -it jekyll /usr/bin/wget -q -O - localhost:4000 | wc -l\n      40\n</code></pre>\n\n<p>Is this an app issue? </p>\n"}, {"tags": ["arrays", "ruby"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1485897998, "post_id": 41964059, "comment_id": 71114349, "body": "If your code works consider moving this to <a href=\"https://codereview.stackexchange.com\">Code Review</a>."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user7055375"}, "edited": false, "score": 0, "creation_date": 1485886270, "post_id": 41964089, "comment_id": 71108031, "body": "Hi, Thanks.  I&#39;m having some trouble translating this into my example.  What is &quot;n&quot; in the &quot;n-1&quot; section?  I&#39;m getting an undefined variable there."}], "tags": [], "owner": {"reputation": 22074, "user_id": 4703663, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/kN6k0.jpg?s=128&g=1", "display_name": "Richard Hamilton", "link": "https://stackoverflow.com/users/4703663/richard-hamilton"}, "is_accepted": false, "score": 3, "last_activity_date": 1485884600, "creation_date": 1485884600, "answer_id": 41964089, "question_id": 41964059, "link": "https://stackoverflow.com/questions/41964059/how-do-i-take-the-nth-element-of-multiple-arrays/41964089#41964089", "title": "How do I take the nth element of multiple arrays?", "body": "<p>All you need to do is</p>\n\n<pre><code>arr[start..finish].map { |a| a[n - 1] }\n</code></pre>\n\n<p>Example, let's say you had a multi-dimensional array like so</p>\n\n<pre><code>arr = [[4,6,5],[3,4,7],[9,1,2]];\n</code></pre>\n\n<p>And you wanted to find the middle element in each array, starting from the first index. You would do this</p>\n\n<pre><code>arr[1..2].map { |a| a[1] };\n=&gt; [4,1]\n</code></pre>\n\n<p>If you would like to store this in a new variable you would prefix the above line with <code>var =</code></p>\n\n<p>If you want to destructively modify the array, use <code>map!</code> instead</p>\n"}, {"tags": [], "owner": {"reputation": 28476, "user_id": 6862601, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/ppP5k.jpg?s=128&g=1", "display_name": "codeforester", "link": "https://stackoverflow.com/users/6862601/codeforester"}, "is_accepted": false, "score": 0, "last_activity_date": 1485885147, "creation_date": 1485885147, "answer_id": 41964275, "question_id": 41964059, "link": "https://stackoverflow.com/questions/41964059/how-do-i-take-the-nth-element-of-multiple-arrays/41964275#41964275", "title": "How do I take the nth element of multiple arrays?", "body": "<p>How about:</p>\n\n<pre><code>new_arr = Array.new\narr[startIndex..endIndex].each do |a|\n  new_arr &lt;&lt; a[n - 1]\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "is_accepted": true, "score": 0, "last_activity_date": 1485895337, "creation_date": 1485895337, "answer_id": 41967109, "question_id": 41964059, "link": "https://stackoverflow.com/questions/41964059/how-do-i-take-the-nth-element-of-multiple-arrays/41967109#41967109", "title": "How do I take the nth element of multiple arrays?", "body": "<p>With your variable names, this would be a shorter version of your code :</p>\n\n<pre><code>data_cols.drop(startIndex).map{ |data_col| data_col[row] }\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user7055375"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 212, "favorite_count": 0, "accepted_answer_id": 41967109, "answer_count": 3, "score": 1, "last_activity_date": 1485895337, "creation_date": 1485884466, "question_id": 41964059, "link": "https://stackoverflow.com/questions/41964059/how-do-i-take-the-nth-element-of-multiple-arrays", "title": "How do I take the nth element of multiple arrays?", "body": "<p>I'm using Ruby 2.4.  I have an array of arrays, and I want to grab the nth element of each of those arrays (starting with the \"startIndex\" array) and then form an array out of that.  So I have</p>\n\n<pre><code>  row_data = []\n  data_cols[startIndex..(data_cols.size)].each do |data_col|\n    row_data.push(data_col[row]) \n  end\n</code></pre>\n\n<p>Although the above works, it seems like more code than I need.  Is there a shorter way to write this?</p>\n"}, {"tags": ["sql", "ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 441, "user_id": 6082002, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/110bb71835267b31af52515b70f36872?s=128&d=identicon&r=PG&f=1", "display_name": "Snowlockk", "link": "https://stackoverflow.com/users/6082002/snowlockk"}, "edited": false, "score": 0, "creation_date": 1485882406, "post_id": 41963343, "comment_id": 71105712, "body": "Inner join A and B for all values that correspond between the 2. Then Left join A on b, with a where clause of b.SomeColumn IS NULL"}, {"owner": {"reputation": 91, "user_id": 4974819, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8863c88cfb3e0362cb55b63e5dc82b93?s=128&d=identicon&r=PG&f=1", "display_name": "lplatz", "link": "https://stackoverflow.com/users/4974819/lplatz"}, "edited": false, "score": 2, "creation_date": 1485882410, "post_id": 41963343, "comment_id": 71105719, "body": "can you share your current thought process? stack overflow isn&#39;t for Q/A of homework."}, {"owner": {"reputation": 149, "user_id": 3772515, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/33d56d90d3e71abb756c075d1df2c61d?s=128&d=identicon&r=PG&f=1", "display_name": "user3772515", "link": "https://stackoverflow.com/users/3772515/user3772515"}, "reply_to_user": {"reputation": 91, "user_id": 4974819, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8863c88cfb3e0362cb55b63e5dc82b93?s=128&d=identicon&r=PG&f=1", "display_name": "lplatz", "link": "https://stackoverflow.com/users/4974819/lplatz"}, "edited": false, "score": 1, "creation_date": 1485886272, "post_id": 41963343, "comment_id": 71108032, "body": "@lplatz what part of this question looks like homework?"}], "answers": [{"comments": [{"owner": {"reputation": 149, "user_id": 3772515, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/33d56d90d3e71abb756c075d1df2c61d?s=128&d=identicon&r=PG&f=1", "display_name": "user3772515", "link": "https://stackoverflow.com/users/3772515/user3772515"}, "edited": false, "score": 0, "creation_date": 1485886403, "post_id": 41963937, "comment_id": 71108114, "body": "Thank you. That seems to involve the least amount of querying the database. I was figuring rails would have a rails-y method for this type of query, but I think that is the closest I will get"}], "tags": [], "owner": {"reputation": 2276, "user_id": 4164651, "user_type": "registered", "accept_rate": 65, "profile_image": "https://graph.facebook.com/100004012909097/picture?type=large", "display_name": "Edmund Lee", "link": "https://stackoverflow.com/users/4164651/edmund-lee"}, "is_accepted": true, "score": 1, "last_activity_date": 1485887409, "last_edit_date": 1485887409, "creation_date": 1485884046, "answer_id": 41963937, "question_id": 41963343, "link": "https://stackoverflow.com/questions/41963343/efficient-way-of-getting-all-records-that-are-or-arent-referenced-in-a-belong/41963937#41963937", "title": "Efficient way of getting all records that are (or aren&#39;t) referenced in a belongs_to relationship?", "body": "<p>try this:</p>\n\n<pre><code># All A's that have no B's\nA.eager_load(:B).where('B.id is null') \n# or\nA.eager_load(:B).where(B: { id: nil })\n\n# all A's that have at least one B\nA.joins(:B).where('B.id is not null')\n# or this should already do the trick because inner join will ignore null records in B\nA.joins(:B)\n</code></pre>\n\n<p>Remember to change <code>B</code> into your table name in plural.</p>\n"}], "owner": {"reputation": 149, "user_id": 3772515, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/33d56d90d3e71abb756c075d1df2c61d?s=128&d=identicon&r=PG&f=1", "display_name": "user3772515", "link": "https://stackoverflow.com/users/3772515/user3772515"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "accepted_answer_id": 41963937, "answer_count": 1, "score": -1, "last_activity_date": 1485887409, "creation_date": 1485882235, "question_id": 41963343, "link": "https://stackoverflow.com/questions/41963343/efficient-way-of-getting-all-records-that-are-or-arent-referenced-in-a-belong", "title": "Efficient way of getting all records that are (or aren&#39;t) referenced in a belongs_to relationship?", "body": "<p>If I have a model A and a model B where B belongs_to A, what is the most efficient method of finding all A's that have at least one B? Similarly, what is the most efficient for finding the opposite (All A's that have no B's).</p>\n"}, {"tags": ["arrays", "ruby", "compare"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1485881554, "post_id": 41963043, "comment_id": 71105113, "body": "What should be returned for <code>input = [&quot;a&quot;, &quot;a&quot;, &quot;a&quot;, &quot;a&quot;]</code>?"}, {"owner": {"reputation": 57, "user_id": 5329067, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/PKwfX.jpg?s=128&g=1", "display_name": "zensupremacy", "link": "https://stackoverflow.com/users/5329067/zensupremacy"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1485882135, "post_id": 41963043, "comment_id": 71105534, "body": "1 - for same letter at same index, 0 - for same letter but wrong index, &quot;-&quot; for wrong letter:  feedback = [&quot;1&quot; , &quot; - &quot;, &quot; - &quot;, &quot; - &quot; ]"}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1485882776, "post_id": 41963043, "comment_id": 71105992, "body": "It&#39;s basically a mastermind with position information."}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1485902634, "post_id": 41963043, "comment_id": 71116321, "body": "It&#39;s suprisingly bug prone for such a simple problem."}], "answers": [{"comments": [{"owner": {"reputation": 57, "user_id": 5329067, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/PKwfX.jpg?s=128&g=1", "display_name": "zensupremacy", "link": "https://stackoverflow.com/users/5329067/zensupremacy"}, "edited": false, "score": 0, "creation_date": 1485882173, "post_id": 41963247, "comment_id": 71105566, "body": "thank you, i will check how it works edit: i checked and it doesn&#39;t work. in your code it will give &quot;?&quot; for characters that doesn&#39;t exist in code array, and it should give &quot;-&quot; to tell user that it is wrong letter and it is not included in code array."}, {"owner": {"reputation": 4711, "user_id": 83729, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5071d40db06ac987180c40e675b7193b?s=128&d=identicon&r=PG", "display_name": "msergeant", "link": "https://stackoverflow.com/users/83729/msergeant"}, "reply_to_user": {"reputation": 57, "user_id": 5329067, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/PKwfX.jpg?s=128&g=1", "display_name": "zensupremacy", "link": "https://stackoverflow.com/users/5329067/zensupremacy"}, "edited": false, "score": 0, "creation_date": 1485885433, "post_id": 41963247, "comment_id": 71107608, "body": "The &#39;?&#39; is for you to figure out. Your question did not contain a spec for the expected behavior."}, {"owner": {"reputation": 57, "user_id": 5329067, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/PKwfX.jpg?s=128&g=1", "display_name": "zensupremacy", "link": "https://stackoverflow.com/users/5329067/zensupremacy"}, "edited": false, "score": 0, "creation_date": 1485887959, "post_id": 41963247, "comment_id": 71109054, "body": "sorry but your code doesnt work, i knew what you mean by &quot;?&quot; but i have used your notation of &quot;?&quot; to not mess anyone else reading it.i think my spec is correct. when giving feedback 1 - for correct letter + correct index, 0 - for correct letter but wrong index, &quot; - &quot; for wrong letter. i think it is pretty self explanatory. but anyway thanks for trying"}, {"owner": {"reputation": 4711, "user_id": 83729, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5071d40db06ac987180c40e675b7193b?s=128&d=identicon&r=PG", "display_name": "msergeant", "link": "https://stackoverflow.com/users/83729/msergeant"}, "reply_to_user": {"reputation": 57, "user_id": 5329067, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/PKwfX.jpg?s=128&g=1", "display_name": "zensupremacy", "link": "https://stackoverflow.com/users/5329067/zensupremacy"}, "edited": false, "score": 0, "creation_date": 1485892330, "post_id": 41963247, "comment_id": 71111352, "body": "Sorry I had missed that the character was supposed to be &#39;0&#39; in your original question. I have since updated my answer and you can now run it and see that it meets your spec."}], "tags": [], "owner": {"reputation": 4711, "user_id": 83729, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5071d40db06ac987180c40e675b7193b?s=128&d=identicon&r=PG", "display_name": "msergeant", "link": "https://stackoverflow.com/users/83729/msergeant"}, "is_accepted": false, "score": 0, "last_activity_date": 1485886723, "last_edit_date": 1485886723, "creation_date": 1485881975, "answer_id": 41963247, "question_id": 41963043, "link": "https://stackoverflow.com/questions/41963043/how-to-collect-user-input-and-give-feedback/41963247#41963247", "title": "How to collect user input and give feedback", "body": "<p>You can use the <code>include?</code> method to see if that character is in the list at a different index. Something like this:</p>\n\n<pre><code>input.each_with_index do |v,i|\n  if v == code.fetch(i)\n    feedback &lt;&lt; \"1\"\n  elsif code.include?(v)\n    # right character, wrong spot\n    feedback &lt;&lt; \"0\"\n  else\n    feedback &lt;&lt; \"-\"\n  end\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 57, "user_id": 5329067, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/PKwfX.jpg?s=128&g=1", "display_name": "zensupremacy", "link": "https://stackoverflow.com/users/5329067/zensupremacy"}, "edited": false, "score": 0, "creation_date": 1485883253, "post_id": 41963440, "comment_id": 71106314, "body": "it works ok, but it gives wrong feedback if input = [&quot;b&quot;,&quot;b&quot;,&quot;b&quot;,&quot;b&quot;], it gives this feedback = [0 1 1 0], and it should produce feedback = [ - , 1, 1, - ]"}], "tags": [], "owner": {"reputation": 3914, "user_id": 4057366, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/uZ3e5.jpg?s=128&g=1", "display_name": "Alex Holubenko", "link": "https://stackoverflow.com/users/4057366/alex-holubenko"}, "is_accepted": false, "score": 0, "last_activity_date": 1485882524, "creation_date": 1485882524, "answer_id": 41963440, "question_id": 41963043, "link": "https://stackoverflow.com/questions/41963043/how-to-collect-user-input-and-give-feedback/41963440#41963440", "title": "How to collect user input and give feedback", "body": "<p>One more solution</p>\n\n<pre><code>code = [\"a\",\"b\",\"b\",\"c\"]\ninput = [\"b\",\"b\",\"a\",\"z\"]\n\nfeedback = input.map.with_index do |num, ind|\n  if code.include? num\n    code[ind] == num ? '1' : '0'\n  else\n    '-'\n  end\nend\n\n=&gt; ['0', '1', '0', '-']\n</code></pre>\n\n<p>if you want define <code>feedback</code> before, just edit 1st variant to:</p>\n\n<pre><code>code = [\"a\",\"b\",\"b\",\"c\"]\ninput = [\"b\",\"b\",\"a\",\"z\"]\nfeedback = []\n\ninput.each_with_index do |num, ind|\n  if code.include? num\n    feedback &lt;&lt; (code[ind] == num ? '1' : '0')\n  else\n    feedback &lt;&lt; '-'\n  end\nend\n</code></pre>\n\n<p>result would be the same</p>\n"}, {"comments": [{"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1485882929, "post_id": 41963503, "comment_id": 71106090, "body": "see @mudasobwa&#39;s question in comments."}, {"owner": {"reputation": 57, "user_id": 5329067, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/PKwfX.jpg?s=128&g=1", "display_name": "zensupremacy", "link": "https://stackoverflow.com/users/5329067/zensupremacy"}, "edited": false, "score": 0, "creation_date": 1485884215, "post_id": 41963503, "comment_id": 71106885, "body": "doesn&#39;t work, for input = %w( b b b b) , it produces wrong feedback = [ 0 1 1 0]. what it should produce is feedback = [ - , 1 , 1 , - ]"}], "tags": [], "owner": {"reputation": 1599, "user_id": 617090, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/66NEM.jpg?s=128&g=1", "display_name": "kcdragon", "link": "https://stackoverflow.com/users/617090/kcdragon"}, "is_accepted": false, "score": 0, "last_activity_date": 1485882691, "creation_date": 1485882691, "answer_id": 41963503, "question_id": 41963043, "link": "https://stackoverflow.com/questions/41963043/how-to-collect-user-input-and-give-feedback/41963503#41963503", "title": "How to collect user input and give feedback", "body": "<p>You can use <code>zip</code> and <code>map</code> to make it a little more functional. <code>include?</code> will check to see if the input is in <code>code</code></p>\n\n<pre><code>code = %w(a b b c)\ninput = %w(b b a z)\nresult = code.zip(input).map do |c, i|\n  if c == i\n    '1'\n  elsif code.include?(i)\n    '0'\n  else\n    '-'\n  end\nend\nputs result.to_s\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 57, "user_id": 5329067, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/PKwfX.jpg?s=128&g=1", "display_name": "zensupremacy", "link": "https://stackoverflow.com/users/5329067/zensupremacy"}, "edited": false, "score": 1, "creation_date": 1485884574, "post_id": 41963691, "comment_id": 71107119, "body": "almost works, but for input = %w( c c b a), it gives wrong feedback = [0 0 1 0], and correct one should be, feedback = [ 0 , - , 1, 0]"}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "reply_to_user": {"reputation": 57, "user_id": 5329067, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/PKwfX.jpg?s=128&g=1", "display_name": "zensupremacy", "link": "https://stackoverflow.com/users/5329067/zensupremacy"}, "edited": false, "score": 0, "creation_date": 1485885172, "post_id": 41963691, "comment_id": 71107443, "body": "@zensupremacy Sorry about that, there were no less than 3 bugs a single loop!"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1485896030, "post_id": 41963691, "comment_id": 71113345, "body": "Two loops are bah :) See my sexy variant."}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1485896572, "post_id": 41963691, "comment_id": 71113660, "body": "@mudasobwa: Always a pleasure to get your feedback :) Your &quot;sexy&quot; variant doesn&#39;t work for <code>input = %w( c c b a)</code>."}, {"owner": {"reputation": 57, "user_id": 5329067, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/PKwfX.jpg?s=128&g=1", "display_name": "zensupremacy", "link": "https://stackoverflow.com/users/5329067/zensupremacy"}, "edited": false, "score": 0, "creation_date": 1485974004, "post_id": 41963691, "comment_id": 71151831, "body": "looks like You solved my problem. Thank you so much!"}], "tags": [], "owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "is_accepted": false, "score": 1, "last_activity_date": 1485940558, "last_edit_date": 1485940558, "creation_date": 1485883281, "answer_id": 41963691, "question_id": 41963043, "link": "https://stackoverflow.com/questions/41963043/how-to-collect-user-input-and-give-feedback/41963691#41963691", "title": "How to collect user input and give feedback", "body": "<p>This code works with the 3 examples you mentioned.</p>\n\n<p>2 passes are used because the <code>1</code>s must be returned before the <code>0</code>s :</p>\n\n<pre><code>def give_feedback(input, code)\n  feedback = Array.new(input.size) { '-' }\n  code2 = code.dup\n\n  input.each_with_index do |letter, index|\n    if letter == code[index]\n      feedback[index] = '1'\n      code2[index]    = nil\n    end\n  end\n\n  input.each_with_index do |letter, index|\n    next if feedback[index] == '1'\n    found = code2.index(letter)\n    if found\n      feedback[index]  = '0'\n      code2[found]     = nil\n    end\n  end\n  feedback\nend\n\np give_feedback(%w(b b a z), %w(a b b c))\n# [\"0\", \"1\", \"0\", \"-\"]\np give_feedback(%w(a a a a), %w(a b b c))\n# [\"1\", \"-\", \"-\", \"-\"]\np give_feedback(%w(c c b a), %w(a b b c))\n# [\"0\", \"-\", \"1\", \"0\"]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1485896631, "post_id": 41967282, "comment_id": 71113697, "body": "Too few <code>eval</code>, <code>for loops</code> and <code>rescue Exception</code> for my taste."}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 0, "last_activity_date": 1485895954, "creation_date": 1485895954, "answer_id": 41967282, "question_id": 41963043, "link": "https://stackoverflow.com/questions/41963043/how-to-collect-user-input-and-give-feedback/41967282#41967282", "title": "How to collect user input and give feedback", "body": "<p>Just out of curiosity:</p>\n\n<pre><code>[code, input].map { |a| (0...a.size).zip(a).to_h }\n             .reduce do |e, acc|\n  c = acc.values.dup\n  acc.merge(e) do |_, v1, v2|\n    case (c.delete_at(c.index(v2)) rescue nil)\n    when v1 then \"1\"\n    when nil then \"-\"\n    else \"0\"\n    end\n  end\nend.values\n</code></pre>\n"}], "owner": {"reputation": 57, "user_id": 5329067, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/PKwfX.jpg?s=128&g=1", "display_name": "zensupremacy", "link": "https://stackoverflow.com/users/5329067/zensupremacy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 87, "favorite_count": 0, "answer_count": 5, "score": 1, "last_activity_date": 1485940558, "creation_date": 1485881468, "last_edit_date": 1485898481, "question_id": 41963043, "link": "https://stackoverflow.com/questions/41963043/how-to-collect-user-input-and-give-feedback", "title": "How to collect user input and give feedback", "body": "<p>I am struggling with my code to write a simple code-breaking game.\nThere is a hidden code:</p>\n\n<pre><code>code = [\"a\",\"b\",\"b\",\"c\"]\n</code></pre>\n\n<p>My program asks for user input, then stores it in a variable.\nI want to compare user input against the secret code variable and give the user feedback: 1 for a good letter in good place, 0 for good letter in wrong place, \"-\" for wrong letter.</p>\n\n<p>I came up with something like this:</p>\n\n<pre><code>feedback = []\ninput.each_with_index do |v,i|\n  if v == code.fetch(i)\n    feedback &lt;&lt; \"1\"\n  else\n    feedback &lt;&lt; \"-\"\n  end\nend\n</code></pre>\n\n<p>It works OK when it compares elements at the same index. I have no idea how I can find elements that are in the code array, but not in the same index and give feedback to the user.</p>\n\n<p>For example:</p>\n\n<pre><code>code = [\"a\",\"b\",\"b\",\"c\"]\ninput = [\"b\",\"b\",\"a\",\"z\"]\nfeedback = [\"0\",\"1\",\"0\",\"-\"]\n</code></pre>\n"}, {"tags": ["ruby", "rubygems", "infusionsoft"], "answers": [{"comments": [{"owner": {"reputation": 436, "user_id": 1319821, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/FUPof.jpg?s=128&g=1", "display_name": "Y. E.", "link": "https://stackoverflow.com/users/1319821/y-e"}, "edited": false, "score": 0, "creation_date": 1485952263, "post_id": 41963192, "comment_id": 71137300, "body": "As the results are limited to 1000, you would need to repeat this request in a loop, incrementing the third parameter of data_query() on each step. I&#39;m not writing in ruby, so leaving it up to you."}], "tags": [], "owner": {"reputation": 1, "user_id": 6230904, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3b48d8ce5c2d70e99bb010a07488407?s=128&d=identicon&r=PG&f=1", "display_name": "J. Jackson", "link": "https://stackoverflow.com/users/6230904/j-jackson"}, "is_accepted": false, "score": 0, "last_activity_date": 1486223143, "last_edit_date": 1486223143, "creation_date": 1485881805, "answer_id": 41963192, "question_id": 41963025, "link": "https://stackoverflow.com/questions/41963025/is-there-a-way-to-get-all-contacts-without-specific-criteria/41963192#41963192", "title": "Is there a way to get all Contacts without specific criteria?", "body": "<p>Simply use the wildcard as a query parameter for the Id field:</p>\n\n<pre><code>query = {\"Id\" =&gt; \"%\"}\nselected_fields = %w(Id FirstName LastName ...)\ndata = Infusionsoft.data_query(\"Contacts\", 1000, 0 , query, selected_fields)\n</code></pre>\n\n<p>The API will return an array of hashes, each one representing the contact with the selected fields as keys.</p>\n\n<p>As per yuga's comment, if you have more than 1000 contacts, you will need to add a loop for data pagination:</p>\n\n<pre><code>contacts = []\ni = 0\nquery = {\"Id\" =&gt; \"%\"}\nselected_fields = %w(Id FirstName LastName ...)\n\nloop do \n  data = Infusionsoft.data_query(\"Contacts\", 1000, i , query, selected_fields)\n  break if data.empty?\n  contacts.concat(data)\n  i += 1\nend\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 6230904, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3b48d8ce5c2d70e99bb010a07488407?s=128&d=identicon&r=PG&f=1", "display_name": "J. Jackson", "link": "https://stackoverflow.com/users/6230904/j-jackson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 83, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1486223143, "creation_date": 1485881441, "last_edit_date": 1485881896, "question_id": 41963025, "link": "https://stackoverflow.com/questions/41963025/is-there-a-way-to-get-all-contacts-without-specific-criteria", "title": "Is there a way to get all Contacts without specific criteria?", "body": "<p>Using the Infusionsoft gem, is there a way to get all Contacts through the Infusionsoft API without a specific criteria?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "answers": [{"tags": [], "owner": {"reputation": 384, "user_id": 5805728, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-FREGVuLFshY/AAAAAAAAAAI/AAAAAAAAFDY/B_HJu3KDZRM/photo.jpg?sz=128", "display_name": "Sapna Jindal", "link": "https://stackoverflow.com/users/5805728/sapna-jindal"}, "is_accepted": false, "score": 0, "last_activity_date": 1485880856, "creation_date": 1485880856, "answer_id": 41962806, "question_id": 41962666, "link": "https://stackoverflow.com/questions/41962666/pass-arguments-from-view-controller-to-model-rails/41962806#41962806", "title": "Pass arguments from view/controller to model - Rails", "body": "<p>You can not pass arguments from controller to model callback like this.\nYou can use <code>attr_accessor</code> to create a virtual attribute and then set that attribute as part of your create action from controller.</p>\n"}, {"tags": [], "owner": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "is_accepted": false, "score": 0, "last_activity_date": 1485880902, "creation_date": 1485880902, "answer_id": 41962821, "question_id": 41962666, "link": "https://stackoverflow.com/questions/41962666/pass-arguments-from-view-controller-to-model-rails/41962821#41962821", "title": "Pass arguments from view/controller to model - Rails", "body": "<p>If you're manually invoking the <code>embed_info</code> method, you shouldn't also be invoking it automatically via a <code>before_create</code> callback. Remove the line <code>before_create :embed_info</code> as it's currently serving no purpose except to invoking <code>embed_info</code> with no arguments when you attempt to <code>save</code> your model.</p>\n\n<p>It's possible that you intended to add a <em>validation</em>, which is different than a <code>before_create</code> callback. If your intent was to make sure that <code>embed_info</code> had been called then you should use validations to insure that whatever side effects <code>embed_info</code> has leave the model in a valid state.</p>\n"}, {"tags": [], "owner": {"reputation": 1599, "user_id": 617090, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/66NEM.jpg?s=128&g=1", "display_name": "kcdragon", "link": "https://stackoverflow.com/users/617090/kcdragon"}, "is_accepted": false, "score": 0, "last_activity_date": 1485883186, "creation_date": 1485883186, "answer_id": 41963663, "question_id": 41962666, "link": "https://stackoverflow.com/questions/41962666/pass-arguments-from-view-controller-to-model-rails/41963663#41963663", "title": "Pass arguments from view/controller to model - Rails", "body": "<blockquote>\n  <p>but I keep getting wrong number of arguments.</p>\n</blockquote>\n\n<p>You are getting an arguments error because of this: <code>before_create :embed_info</code>. You can delete that line and then explicitly call the method like you are already doing in the controller.</p>\n\n<p>This is probably not best practice but I think it will get your code working.</p>\n\n<p>Another thing you could do is to move the logic for deriving the <code>title</code> to the controller and then pass the title in with the params.</p>\n\n<pre><code># controller\ndef create\n  @post = Post.new post_params.merge(title: embed_info)\n...\n\ndef embed_info\n  something = params[:title]\n  ## Do some stuff\n...\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1130, "user_id": 3125190, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/097fe994b490c19a8666a06e380ce148?s=128&d=identicon&r=PG", "display_name": "TarunJadhwani", "link": "https://stackoverflow.com/users/3125190/tarunjadhwani"}, "is_accepted": false, "score": 0, "last_activity_date": 1485943337, "creation_date": 1485943337, "answer_id": 41976831, "question_id": 41962666, "link": "https://stackoverflow.com/questions/41962666/pass-arguments-from-view-controller-to-model-rails/41976831#41976831", "title": "Pass arguments from view/controller to model - Rails", "body": "<p>You could use <code>attr_accessor</code> to create a virtual attribute of <code>embed_url</code>. Pass it in new action itself. And when you call save, before_save will be called by itself and you can use <code>embed_url</code> there (as its a virtual attribute).</p>\n\n<p>Let me know if you need help if the explanation is not clear.</p>\n"}], "owner": {"reputation": 63, "user_id": 3579614, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/64bc7dde9b9ff83bcbbe1ad4ba0be435?s=128&d=identicon&r=PG&f=1", "display_name": "user3579614", "link": "https://stackoverflow.com/users/3579614/user3579614"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 588, "favorite_count": 0, "answer_count": 4, "score": 0, "last_activity_date": 1485943337, "creation_date": 1485880492, "question_id": 41962666, "link": "https://stackoverflow.com/questions/41962666/pass-arguments-from-view-controller-to-model-rails", "title": "Pass arguments from view/controller to model - Rails", "body": "<p>I'm looking to pass arguments from the controller to the model, but I keep getting wrong number of arguments. </p>\n\n<p>Model:</p>\n\n<pre><code>before_create :embed_info\n\ndef embed_info(embed_url)\n  something = embed_url\n  ## Do some stuff\n  self.title = \"Title\" ##This works.\nend\n</code></pre>\n\n<p>Controller:</p>\n\n<pre><code>    Create action:\n\n    @post = Post.new post_params\n    @post.embed_info(params[:title])\n    if @post.save\n        redirect_to root_url, notice: 'post created'\n    else\n        render 'new'\n    end\n</code></pre>\n"}]