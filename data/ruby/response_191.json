[{"tags": ["ruby", "regex", "openstack", "fluentd"], "comments": [{"owner": {"reputation": 4679, "user_id": 337085, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/2daee1581901ea06dbb80d2c04c1a182?s=128&d=identicon&r=PG&f=1", "display_name": "Roman Pushkin", "link": "https://stackoverflow.com/users/337085/roman-pushkin"}, "edited": false, "score": 0, "creation_date": 1536180927, "post_id": 52192400, "comment_id": 91336270, "body": "it looks like escaping issue, can you show the actual code?"}, {"owner": {"reputation": 194, "user_id": 3595207, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/ChscM.jpg?s=128&g=1", "display_name": "Arman", "link": "https://stackoverflow.com/users/3595207/arman"}, "reply_to_user": {"reputation": 4679, "user_id": 337085, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/2daee1581901ea06dbb80d2c04c1a182?s=128&d=identicon&r=PG&f=1", "display_name": "Roman Pushkin", "link": "https://stackoverflow.com/users/337085/roman-pushkin"}, "edited": false, "score": 0, "creation_date": 1536181220, "post_id": 52192400, "comment_id": 91336372, "body": "This is the pattern that is failing &lt;source&gt;   @type tail   path /var/log/nova/nova-api.log   tag nova   format multiline   format_firstline /\\d{4}-\\d{2}-\\d{2} \\d{2}:\\d{2}:\\d{2}(\\.\\d{3,6})? [^ ]* [^ ]* [^ ]*/   format1 /(?&lt;DateTime&gt;\\d{4}-\\d{2}-\\d{2} \\d{2}:\\d{2}:\\d{2})(\\.\\d{3,6})? (?&lt;pid&gt;[^ ]*) (?&lt;loglevel&gt;[^ ]*) (?&lt;class&gt;[^ ]*) (&#91;(?&lt;context&gt;[^&#93;]*)&#93;) (?&lt;ip&gt;[[\\d+\\.]*) \\&quot;(?&lt;http_request_type&gt;[^ \\&quot;]+) (?&lt;http_request_path&gt;[^\\&quot;]+)\\&quot; status\\: (?&lt;http_status_code&gt;[^ ]+) (?&lt;message&gt;.*)/   time_format %F %T.%L &lt;/source&gt;"}], "answers": [{"comments": [{"owner": {"reputation": 194, "user_id": 3595207, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/ChscM.jpg?s=128&g=1", "display_name": "Arman", "link": "https://stackoverflow.com/users/3595207/arman"}, "edited": false, "score": 1, "creation_date": 1536181823, "post_id": 52193365, "comment_id": 91336620, "body": "i don&#39;t have any XML data to be parsed, its just log data, like this 2018-09-05 12:34:01.451 3212169 INFO nova.osapi_compute.wsgi.server [req-0f15c395-5962-4a14-ba7a-730f86d6eb7e f1ab53782de846798920050941f3bcff f5d0c8e495cd4793814f8b979693ac17 - default default] 192.168.1.1 &quot;GET /v2.1/os-services HTTP/1.1&quot; status: 200 len: 1435 time: 0.0372221"}], "tags": [], "owner": {"reputation": 4679, "user_id": 337085, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/2daee1581901ea06dbb80d2c04c1a182?s=128&d=identicon&r=PG&f=1", "display_name": "Roman Pushkin", "link": "https://stackoverflow.com/users/337085/roman-pushkin"}, "is_accepted": false, "score": 1, "last_activity_date": 1536181467, "creation_date": 1536181467, "answer_id": 52193365, "question_id": 52192400, "link": "https://stackoverflow.com/questions/52192400/fluentd-openstack-log-regex-format/52193365#52193365", "title": "Fluentd Openstack Log Regex format", "body": "<p>Try to escape your xml online, like here: <a href=\"https://www.freeformatter.com/xml-escape.html\" rel=\"nofollow noreferrer\">https://www.freeformatter.com/xml-escape.html</a> or replace <code>@</code> to <code>&amp;amp;</code></p>\n"}, {"tags": [], "owner": {"reputation": 194, "user_id": 3595207, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/ChscM.jpg?s=128&g=1", "display_name": "Arman", "link": "https://stackoverflow.com/users/3595207/arman"}, "is_accepted": true, "score": 1, "last_activity_date": 1536185971, "last_edit_date": 1536185971, "creation_date": 1536182993, "answer_id": 52193637, "question_id": 52192400, "link": "https://stackoverflow.com/questions/52192400/fluentd-openstack-log-regex-format/52193637#52193637", "title": "Fluentd Openstack Log Regex format", "body": "<p>The problem was an extra square brace in match group ip. The correct pattern is.</p>\n\n<pre><code>(?&lt;DateTime&gt;\\d{4}-\\d{2}-\\d{2} \\d{2}:\\d{2}:\\d{2})(\\.\\d{3,6})? (?&lt;pid&gt;[^ ]*) (?&lt;loglevel&gt;[^ ]*) (?&lt;class&gt;[^ ]*) (\\[(?&lt;context&gt;[^\\]]*)\\])? (?&lt;ip&gt;[\\d+\\.]*) \\\"(?&lt;http_request_type&gt;[^ \\\"]+) (?&lt;http_request_path&gt;[^\\\"]+)\\\" status\\: (?&lt;http_status_code&gt;[^ ]+) (?&lt;message&gt;.*)\n</code></pre>\n"}], "owner": {"reputation": 194, "user_id": 3595207, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/ChscM.jpg?s=128&g=1", "display_name": "Arman", "link": "https://stackoverflow.com/users/3595207/arman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 400, "favorite_count": 0, "accepted_answer_id": 52193637, "answer_count": 2, "score": 1, "last_activity_date": 1536185971, "creation_date": 1536176635, "question_id": 52192400, "link": "https://stackoverflow.com/questions/52192400/fluentd-openstack-log-regex-format", "title": "Fluentd Openstack Log Regex format", "body": "<p>I am trying to parse the logs from all the OpenStack services and send it to S3 in JSON.</p>\n\n<p>I am able to get parse the logs with this multiline format.</p>\n\n<pre><code>&lt;source&gt;\n  @type tail\n  path /var/log/nova/nova-api.log\n  tag nova\n  format multiline\n  format_firstline /\\d{4}-\\d{2}-\\d{2} \\d{2}:\\d{2}:\\d{2}(\\.\\d{3,6})? [^ ]* [^ ]* [^ ]*/\n  format1 /(?&lt;DateTime&gt;\\d{4}-\\d{2}-\\d{2} \\d{2}:\\d{2}:\\d{2})(\\.\\d{3,6})? (?&lt;pid&gt;[^ ]*) (?&lt;loglevel&gt;[^ ]*) (?&lt;class&gt;[^ ]*) (\\[(?&lt;context&gt;[^\\]]*)\\])? (?&lt;message&gt;.*)/\n  time_format %F %T.%L\n&lt;/source&gt;\n</code></pre>\n\n<p>which parses the logs of this type</p>\n\n<pre><code>2018-09-05 12:34:01.451 3212169 INFO nova.osapi_compute.wsgi.server [req-0f15c395-5962-4a14-ba7a-730f86d6eb7e f1ab53782de846798920050941f3bcff f5d0c8e495cd4793814f8b979693ac17 - default default] 192.168.1.1 \"GET /v2.1/os-services HTTP/1.1\" status: 200 len: 1435 time: 0.0372221\n</code></pre>\n\n<p>and this type </p>\n\n<pre><code>2018-09-05 12:34:33.631 2813186 INFO nova.api.openstack.placement.requestlog [req-d4573763-4521-419f-a4ba-c489a7e17ea9 fba548d81cd6480b90940a89e00f4133 6ba1bbedb40c411e9482128150886ba6 - default default] 192.168.1.1 \"DELETE /allocations/196db945-0089-40ae-8108-a950fb453296\" status: 204 len: 0 microversion: 1.0\nAH01626: authorization result of Require all granted: granted\nAH01626: authorization result of &lt;RequireAny&gt;: granted\nAH01626: authorization result of Require all granted: granted\nAH01626: authorization result of &lt;RequireAny&gt;: granted\n2018-09-05 12:34:37.737 2813187 INFO nova.api.openstack.placement.requestlog [req-08b8b3e4-6981-4cd4-b90b-c922b7002b28 fba548d81cd6480b90940a89e00f4133 6ba1bbedb40c411e9482128150886ba6 - default default] 192.168.1.1 \"GET /allocation_candidates?limit=1000&amp;resources=CUSTOM_Z270_A%3A1\" status: 200 len: 473 microversion: 1.17\n</code></pre>\n\n<p>into this</p>\n\n<p><a href=\"http://fluentular.herokuapp.com/parse?regexp=%28%3F%3CDateTime%3E%5Cd%7B4%7D-%5Cd%7B2%7D-%5Cd%7B2%7D+%5Cd%7B2%7D%3A%5Cd%7B2%7D%3A%5Cd%7B2%7D%29%28%5C.%5Cd%7B3%2C6%7D%29%3F+%28%3F%3Cpid%3E%5B%5E+%5D*%29+%28%3F%3Cloglevel%3E%5B%5E+%5D*%29+%28%3F%3Cclass%3E%5B%5E+%5D*%29+%28%5C%5B%28%3F%3Ccontext%3E%5B%5E%5C%5D%5D*%29%5C%5D%29%3F+%28%3F%3Cmessage%3E.*%29&amp;input=2018-09-05+12%3A34%3A33.631+2813186+INFO+nova.api.openstack.placement.requestlog+%5Breq-d4573763-4521-419f-a4ba-c489a7e17ea9+fba548d81cd6480b90940a89e00f4133+6ba1bbedb40c411e9482128150886ba6+-+default+default%5D+192.168.1.1+%22DELETE+%2Fallocations%2F196db945-0089-40ae-8108-a950fb453296%22+status%3A+204+len%3A+0+microversion%3A+1.0%0D%0AAH01626%3A+authorization+result+of+Require+all+granted%3A+granted%0D%0AAH01626%3A+authorization+result+of+%3CRequireAny%3E%3A+granted%0D%0AAH01626%3A+authorization+result+of+Require+all+granted%3A+granted%0D%0AAH01626%3A+authorization+result+of+%3CRequireAny%3E%3A+granted%0D%0A2018-09-05+12%3A34%3A37.737+2813187+INFO+nova.api.openstack.placement.requestlog+%5Breq-08b8b3e4-6981-4cd4-b90b-c922b7002b28+fba548d81cd6480b90940a89e00f4133+6ba1bbedb40c411e9482128150886ba6+-+default+default%5D+192.168.1.1+%22GET+%2Fallocation_candidates%3Flimit%3D1000%26resources%3DCUSTOM_Z270_A%253A1%22+status%3A+200+len%3A+473+microversion%3A+1.17&amp;time_format=\" rel=\"nofollow noreferrer\">Fluentular Demo</a></p>\n\n<p>i am trying to get the ip, request_type path and statu using this </p>\n\n<pre><code>(?&lt;DateTime&gt;\\d{4}-\\d{2}-\\d{2} \\d{2}:\\d{2}:\\d{2})(\\.\\d{3,6})? (?&lt;pid&gt;[^ ]*) (?&lt;loglevel&gt;[^ ]*) (?&lt;class&gt;[^ ]*) (\\[(?&lt;context&gt;[^\\]]*)\\]) (?&lt;ip&gt;[[\\d+\\.]*) \\\"(?&lt;http_request_type&gt;[^ \\\"]+) (?&lt;http_request_path&gt;[^\\\"]+)\\\" status\\: (?&lt;http_status_code&gt;[^ ]+) (?&lt;message&gt;.*)\n</code></pre>\n\n<p>see demo here. </p>\n\n<p><a href=\"https://regex101.com/r/vpwoCb/1\" rel=\"nofollow noreferrer\">Regex101 Demo</a></p>\n\n<p>which works perfectly in regex101, but the td-agent fails with this error</p>\n\n<pre><code>[error]: config error file=\"/etc/td-agent/td-agent.conf\" error_class=Fluent::ConfigError error=\"Invalid regexp in format1: premature end of char-class: /(?&lt;DateTime&gt;\\\\d{4}-\\\\d{2}-\\\\d{2} \\\\d{2}:\\\\d{2}:\\\\d{2})(\\\\.\\\\d{3,6})? (?&lt;pid&gt;[^ ]*) (?&lt;loglevel&gt;[^ ]*) (?&lt;class&gt;[^ ]*) (\\\\[(?&lt;context&gt;[^\\\\]]*)\\\\]) (?&lt;ip&gt;[[\\\\d+\\\\.]*) \\\\\\\"(?&lt;http_request_type&gt;[^ \\\\\\\"]+) (?&lt;http_request_path&gt;[^\\\\\\\"]+)\\\\\\\" status\\\\: (?&lt;http_status_code&gt;[^ ]+) (?&lt;message&gt;.*)/m\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "project-structure"], "comments": [{"owner": {"reputation": 14139, "user_id": 1108, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/48OpQ.jpg?s=128&g=1", "display_name": "jerhinesmith", "link": "https://stackoverflow.com/users/1108/jerhinesmith"}, "edited": false, "score": 2, "creation_date": 1536175239, "post_id": 52192040, "comment_id": 91333883, "body": "&quot;Head First Rails&quot; is pretty dated at this point. I believe the <code>script</code> directory was removed around rails 3 or 4. If you&#39;re looking for a good place to start, Michael Hartl&#39;s &quot;Ruby on Rails Tutorial&quot; is the general go-to for a lot of beginners: <a href=\"https://www.railstutorial.org/\" rel=\"nofollow noreferrer\">railstutorial.org</a>"}, {"owner": {"reputation": 2251, "user_id": 9785060, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IUduC.png?s=128&g=1", "display_name": "Viktor", "link": "https://stackoverflow.com/users/9785060/viktor"}, "edited": false, "score": 0, "creation_date": 1536180977, "post_id": 52192040, "comment_id": 91336280, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/5661554/ruby-on-rails-doesnt-create-script-server\">Ruby on Rails - Doesn&#39;t create script/server</a>"}, {"owner": {"reputation": 3914, "user_id": 4057366, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/uZ3e5.jpg?s=128&g=1", "display_name": "Alex Holubenko", "link": "https://stackoverflow.com/users/4057366/alex-holubenko"}, "edited": false, "score": 0, "creation_date": 1536186503, "post_id": 52192040, "comment_id": 91338060, "body": "<a href=\"https://guides.rubyonrails.org/index.html\" rel=\"nofollow noreferrer\">this</a> one also good point for beginners, I think."}], "answers": [{"tags": [], "owner": {"reputation": 786, "user_id": 2502372, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ETaor.jpg?s=128&g=1", "display_name": "Lucas Wieloch", "link": "https://stackoverflow.com/users/2502372/lucas-wieloch"}, "is_accepted": true, "score": 4, "last_activity_date": 1536175212, "creation_date": 1536175212, "answer_id": 52192072, "question_id": 52192040, "link": "https://stackoverflow.com/questions/52192040/ruby-on-rails-there-is-no-script-folder-in-the-project/52192072#52192072", "title": "Ruby on Rails. There is no script folder in the project", "body": "<p>nowadays it is used <code>rails</code> instead of <code>ruby script/</code>, so try <code>rails server</code> or <code>rails generate scaffold</code></p>\n"}], "owner": {"reputation": 31, "user_id": 10321907, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-sW-6QqUPX_M/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaOLNLmIAvUyqXQW7mZs9zOUPdILaQ/mo/photo.jpg?sz=128", "display_name": "Katerina Sychik", "link": "https://stackoverflow.com/users/10321907/katerina-sychik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 721, "favorite_count": 1, "accepted_answer_id": 52192072, "answer_count": 1, "score": 2, "last_activity_date": 1536175227, "creation_date": 1536175075, "question_id": 52192040, "link": "https://stackoverflow.com/questions/52192040/ruby-on-rails-there-is-no-script-folder-in-the-project", "title": "Ruby on Rails. There is no script folder in the project", "body": "<p>I study Rails with the book \"Head First Rails\"</p>\n\n<p>steps are:</p>\n\n<ol>\n<li>to create my app with the command \"rails new tickets\"</li>\n<li>run server with \"ruby script/server\"</li>\n<li>\"ruby script/generate scaffold ...\"</li>\n</ol>\n\n<p>But there is no script folder in  the project and I get an error \"ruby: No such file or directory -- script/generate (LoadError)\"\nI've found that I need to use \"ruby s\" to start the server.\nBut how can I run script/generate?\nIs it a new style of generating folders in the rails project and there is no more script folder? Or did I smth wrong?</p>\n\n<p>I have ruby version 2.4.4 and rails 5.2.1</p>\n"}, {"tags": ["javascript", "ruby-on-rails", "ruby", "cloudflare"], "answers": [{"tags": [], "owner": {"reputation": 4679, "user_id": 337085, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/2daee1581901ea06dbb80d2c04c1a182?s=128&d=identicon&r=PG&f=1", "display_name": "Roman Pushkin", "link": "https://stackoverflow.com/users/337085/roman-pushkin"}, "is_accepted": false, "score": 0, "last_activity_date": 1536175598, "creation_date": 1536175598, "answer_id": 52192158, "question_id": 52191157, "link": "https://stackoverflow.com/questions/52191157/external-api-access-with-ruby-blocked-by-cloudflare/52192158#52192158", "title": "External API access with Ruby blocked by CloudFlare", "body": "<p>If they want it to be used on frontend only, using it on backend can be tricky. You will need to create your own wrapper with, for example, <a href=\"https://github.com/GoogleChrome/puppeteer\" rel=\"nofollow noreferrer\">puppeteer</a>. And from Rails side execute command that will do some work in background. But keep in mind, it doesn't work very fast (can take up to 5 seconds per request), and it will block your Rails process.</p>\n\n<p>I would start with single node.js app that will accept command-line parameters. Ruby isn't very good at advanced web scraping, so there are no any gentle solutions. Also, keep in mind that you don't have any guarantees. One day it can just stop working.</p>\n"}], "owner": {"reputation": 1, "user_id": 10321739, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-mAiLWHisZxM/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaNE_WnoDCzUaxCPo7o2QL2bucBdVg/mo/photo.jpg?sz=128", "display_name": "Patrick Chao", "link": "https://stackoverflow.com/users/10321739/patrick-chao"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 184, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1536175598, "creation_date": 1536171030, "question_id": 52191157, "link": "https://stackoverflow.com/questions/52191157/external-api-access-with-ruby-blocked-by-cloudflare", "title": "External API access with Ruby blocked by CloudFlare", "body": "<p>I am trying to access the HaveIBeenPwned web API for breached sites and emails, but I am being blocked by cloudflare's anti-DDoS protection. I've found that there are ways to get around this with Python and JavaScript, but I haven't been successful with my React/Rails app. </p>\n\n<p><a href=\"https://stackoverflow.com/questions/49087990/python-request-being-blocked-by-cloudflare/\">This post</a> has the following quote: \"Currently, they check if the client supports JavaScript, which can be spoofed.\" I haven't been able to find any other documentation of this behavior. </p>\n\n<p>I need this information in the backend, so calling HIBP from the frontend is not ideal. Any idea how to hit the API from Rails?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "helpermethods"], "comments": [{"owner": {"reputation": 1523, "user_id": 6896906, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JiWcO.jpg?s=128&g=1", "display_name": "Zach Tuttle", "link": "https://stackoverflow.com/users/6896906/zach-tuttle"}, "edited": false, "score": 0, "creation_date": 1536167740, "post_id": 52190310, "comment_id": 91330512, "body": "I think you&#39;re running into a naming collision and I believe ruby will execute the first method matched which is image_url on your model and not the helper method, you should namespace your helper methods so you could do something  like: <code>Model::Helper.image_url(path)</code>"}], "answers": [{"tags": [], "owner": {"reputation": 13378, "user_id": 1430810, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/v669u.jpg?s=128&g=1", "display_name": "arieljuod", "link": "https://stackoverflow.com/users/1430810/arieljuod"}, "is_accepted": true, "score": 5, "last_activity_date": 1536168313, "last_edit_date": 1536168313, "creation_date": 1536167824, "answer_id": 52190402, "question_id": 52190310, "link": "https://stackoverflow.com/questions/52190310/using-image-url-helper-in-model/52190402#52190402", "title": "Using image_url helper in model", "body": "<p><code>image_url</code> is a view helper, it should not be used inside the model, you should move that logic to a helper for the view</p>\n\n<pre><code>#application_helper.rb\ndef public_image(user)\n  if user.avatar &amp;&amp; user.photo_public?\n    user.avatar.remote_url\n  else\n    image_url '/client/src/assets/images/icons/anon-small.svg'\n  end\nend\n</code></pre>\n\n<p>In your view change <code>user.public_image</code> to <code>public_image(user)</code></p>\n"}, {"tags": [], "owner": {"reputation": 1928, "user_id": 6193734, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-yNKciMo2y_0/AAAAAAAAAAI/AAAAAAAACGs/Hg_DmZMu7Lw/photo.jpg?sz=128", "display_name": "Matthieu Libeer", "link": "https://stackoverflow.com/users/6193734/matthieu-libeer"}, "is_accepted": false, "score": 0, "last_activity_date": 1536168370, "creation_date": 1536168370, "answer_id": 52190540, "question_id": 52190310, "link": "https://stackoverflow.com/questions/52190310/using-image-url-helper-in-model/52190540#52190540", "title": "Using image_url helper in model", "body": "<p>I'll agree with arieljuod that this is a view concern. However, in case it's really needed for a dirty implementation, it is possible to do <code>Object.new.extend(ActionView::Helpers::AssetUrlHelper).image_url('foo')</code></p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 5415191, "user_type": "registered", "profile_image": "https://graph.facebook.com/976565312399901/picture?type=large", "display_name": "VinyLimaZ", "link": "https://stackoverflow.com/users/5415191/vinylimaz"}, "is_accepted": false, "score": 0, "last_activity_date": 1536168482, "creation_date": 1536168482, "answer_id": 52190568, "question_id": 52190310, "link": "https://stackoverflow.com/questions/52190310/using-image-url-helper-in-model/52190568#52190568", "title": "Using image_url helper in model", "body": "<p>Yea, it's very right, you can't call on that scope!\nThis isn't a method for a model.\nThis is an ActionView helper method.\n<a href=\"https://apidock.com/rails/ActionView/Helpers/AssetUrlHelper/image_url\" rel=\"nofollow noreferrer\">https://apidock.com/rails/ActionView/Helpers/AssetUrlHelper/image_url</a></p>\n\n<p>For what I'm seeing this isn't the right place to have this logic. Consider putting this in a <code>decorator</code> to abstract this non-business logic.</p>\n"}], "owner": {"reputation": 20590, "user_id": 504963, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/xlYLo.jpg?s=128&g=1", "display_name": "Antarr Byrd", "link": "https://stackoverflow.com/users/504963/antarr-byrd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 363, "favorite_count": 0, "accepted_answer_id": 52190402, "answer_count": 3, "score": 0, "last_activity_date": 1536168482, "creation_date": 1536167418, "question_id": 52190310, "link": "https://stackoverflow.com/questions/52190310/using-image-url-helper-in-model", "title": "Using image_url helper in model", "body": "<p>I'm trying to use the image_url helper in my model. I also have an image_url property on the model(can't be changed). When I call image_url, the helper method it appears to be calling the method on the model. I get the error <code>wrong number of arguments (given 1, expected 0)</code></p>\n\n<pre><code> def public_image\n    if self.avatar &amp;&amp; photo_public?\n      self.avatar.remote_url\n    else\n      image_url '/client/src/assets/images/icons/anon-small.svg'\n    end\n  end\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec", "rspec-rails"], "comments": [{"owner": {"reputation": 2285, "user_id": 2039726, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1fc7ff9bf8f9489ab7715282a9b7e9c?s=128&d=identicon&r=PG", "display_name": "MrShemek", "link": "https://stackoverflow.com/users/2039726/mrshemek"}, "edited": false, "score": 2, "creation_date": 1536166621, "post_id": 52189855, "comment_id": 91329988, "body": "Have you tried with adding <code>render_view</code> in spec? <a href=\"https://relishapp.com/rspec/rspec-rails/v/2-0/docs/controller-specs/render-views\" rel=\"nofollow noreferrer\">Docs</a>"}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 2, "creation_date": 1536168780, "post_id": 52189855, "comment_id": 91330984, "body": "I would try using a request spec instead since controller specs stub out large parts of the application like for example creating a real request and rendering views."}, {"owner": {"reputation": 8823, "user_id": 976691, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/93eaf3f1f6df27205641701fca8bd233?s=128&d=identicon&r=PG", "display_name": "Tintin81", "link": "https://stackoverflow.com/users/976691/tintin81"}, "reply_to_user": {"reputation": 2285, "user_id": 2039726, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1fc7ff9bf8f9489ab7715282a9b7e9c?s=128&d=identicon&r=PG", "display_name": "MrShemek", "link": "https://stackoverflow.com/users/2039726/mrshemek"}, "edited": false, "score": 0, "creation_date": 1536175063, "post_id": 52189855, "comment_id": 91333803, "body": "@MrShemek: Yes, and it works now. Thank you. Didn&#39;t know this."}], "answers": [{"comments": [{"owner": {"reputation": 8823, "user_id": 976691, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/93eaf3f1f6df27205641701fca8bd233?s=128&d=identicon&r=PG", "display_name": "Tintin81", "link": "https://stackoverflow.com/users/976691/tintin81"}, "edited": false, "score": 1, "creation_date": 1536175096, "post_id": 52190202, "comment_id": 91333824, "body": "Thanks for correcting my syntax. You&#39;re absolutely right here."}], "tags": [], "owner": {"reputation": 1928, "user_id": 6193734, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-yNKciMo2y_0/AAAAAAAAAAI/AAAAAAAACGs/Hg_DmZMu7Lw/photo.jpg?sz=128", "display_name": "Matthieu Libeer", "link": "https://stackoverflow.com/users/6193734/matthieu-libeer"}, "is_accepted": false, "score": 1, "last_activity_date": 1536166872, "creation_date": 1536166872, "answer_id": 52190202, "question_id": 52189855, "link": "https://stackoverflow.com/questions/52189855/rspec-mysteriously-passes-when-testing-xml-or-csv-output/52190202#52190202", "title": "Rspec mysteriously passes when testing XML or CSV output", "body": "<ol>\n<li><p>The format option should be specified outside of the params, i.e. <code>get :index, params: {}, format: :csv}</code>.</p></li>\n<li><p>Regarding RSpec evaluating views, no, in controller tests, it doesn't, regardless of the format. However, it's possible to test views with RSpec: <a href=\"https://relishapp.com/rspec/rspec-rails/v/2-0/docs/view-specs/view-spec\" rel=\"nofollow noreferrer\">https://relishapp.com/rspec/rspec-rails/v/2-0/docs/view-specs/view-spec</a></p></li>\n</ol>\n"}, {"comments": [{"owner": {"reputation": 8823, "user_id": 976691, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/93eaf3f1f6df27205641701fca8bd233?s=128&d=identicon&r=PG", "display_name": "Tintin81", "link": "https://stackoverflow.com/users/976691/tintin81"}, "edited": false, "score": 0, "creation_date": 1536175379, "post_id": 52191170, "comment_id": 91333960, "body": "Max, thanks for your excellent answer. I ended up using <code>render_views</code> this time. It&#39;s a quick fix and works like a charm. In my current application I have around 30 controller specs but not a single request spec. So I don&#39;t see the point of adding a single request spec now. You&#39;re certainly right that controller specs have their flaws and my next app will make heavy use of request specs. Promise :-)"}], "tags": [], "owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "is_accepted": true, "score": 1, "last_activity_date": 1536171081, "creation_date": 1536171081, "answer_id": 52191170, "question_id": 52189855, "link": "https://stackoverflow.com/questions/52189855/rspec-mysteriously-passes-when-testing-xml-or-csv-output/52191170#52191170", "title": "Rspec mysteriously passes when testing XML or CSV output", "body": "<p>Controller tests/specs are these weird stubbed creations born out of the idea of unit testing controllers in isolation. That idea turned out to be pretty flawed and has really fallen out of vogue lately.</p>\n\n<p>Controller specs don't actually make a real HTTP request to your application that passes through the routes. Rather they just kind of fake it and pass a fake request through.</p>\n\n<p>To make the tests faster they also don't really render the views either. Thats why it does not error out as you have expected. And the response is not really a real rack response object either.</p>\n\n<p>You can make RSpec render the views with <a href=\"https://relishapp.com/rspec/rspec-rails/v/3-8/docs/controller-specs/render-views\" rel=\"nofollow noreferrer\"><code>render_views</code></a>.</p>\n\n<pre><code>describe InvoicesController, :type =&gt; :controller do\n  render_views\n  it \"renders a csv attachment\" do\n    get :index, format: :csv\n    expect(response.headers[\"Content-Type\"]).to eq(\"text/csv; charset=utf-8\")\n    expect(response).to have_http_status(200)\n    expect(response).to render_template :index\n  end\nend\n</code></pre>\n\n<p>But a better and more future proof option is using a <a href=\"https://relishapp.com/rspec/rspec-rails/v/3-8/docs/request-specs\" rel=\"nofollow noreferrer\">request spec</a>. </p>\n\n<blockquote>\n  <p>The official recommendation of the Rails team and the RSpec core team\n  is to write request specs instead. Request specs allow you to focus on\n  a single controller action, but unlike controller tests involve the\n  router, the middleware stack, and both rack requests and responses.\n  This adds realism to the test that you are writing, and helps avoid\n  many of the issues that are common in controller specs.\n  <a href=\"http://rspec.info/blog/2016/07/rspec-3-5-has-been-released/\" rel=\"nofollow noreferrer\">http://rspec.info/blog/2016/07/rspec-3-5-has-been-released/</a></p>\n</blockquote>\n\n<pre><code># spec/requests/invoices\nrequire 'rails_helper'\nrequire 'csv'\nRSpec.describe \"Invoices\", type: :request do\n  let(:csv) { response.body.parse_csv }\n  # Group by the route\n  describe \"GET /invoices\" do\n    it \"renders a csv attachment\" do\n      get invoices_path, format: :csv\n      expect(response.headers[\"Content-Type\"]).to eq(\"text/csv; charset=utf-8\")\n      expect(response).to have_http_status(200)\n      expect(csv).to eq [\"foo\", \"bar\"] # just an example\n    end\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 8823, "user_id": 976691, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/93eaf3f1f6df27205641701fca8bd233?s=128&d=identicon&r=PG", "display_name": "Tintin81", "link": "https://stackoverflow.com/users/976691/tintin81"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 561, "favorite_count": 0, "accepted_answer_id": 52191170, "answer_count": 2, "score": 0, "last_activity_date": 1565195393, "creation_date": 1536165340, "last_edit_date": 1565195393, "question_id": 52189855, "link": "https://stackoverflow.com/questions/52189855/rspec-mysteriously-passes-when-testing-xml-or-csv-output", "title": "Rspec mysteriously passes when testing XML or CSV output", "body": "<p>In my Rails 5 app I have this:</p>\n\n<pre><code>class InvoicesController &lt; ApplicationController\n\n  def index\n    @invoices = current_account.invoices\n    respond_to do |format|\n      format.csv do\n        invoices_file(:csv)\n      end\n      format.xml do\n        invoices_file(:xml)\n      end\n    end\n  end\n\nprivate\n\n  def invoices_file(type)\n    headers['Content-Disposition'] = \"inline; filename=\\\"invoices.#{type.to_s}\\\"\"\n  end\n\nend\n</code></pre>\n\n<hr>\n\n<pre><code>describe InvoicesController, :type =&gt; :controller do\n\n  it \"renders a csv attachment\" do\n    get :index, :params =&gt; {:format =&gt; :csv}\n    expect(response.headers[\"Content-Type\"]).to eq(\"text/csv; charset=utf-8\")\n    expect(response).to have_http_status(200)\n    expect(response).to render_template :index\n  end\n\nend\n</code></pre>\n\n<hr>\n\n<p>My problem is that my Spec always <em>passes</em> (!), even when I put a bunch of crap into my <code>index.csv.erb</code> file. It seems that the view file isn't even evaluated / tested by RSpec.</p>\n\n<p>How is this possible? What am I missing here?</p>\n"}, {"tags": ["arrays", "ruby", "optimization", "hash"], "comments": [{"owner": {"reputation": 15181, "user_id": 3308055, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mIjeo.png?s=128&g=1", "display_name": "juvian", "link": "https://stackoverflow.com/users/3308055/juvian"}, "edited": false, "score": 1, "creation_date": 1536165219, "post_id": 52189752, "comment_id": 91329324, "body": "Index your base array by location so you dont need to iterate all the array for each change in additions"}, {"owner": {"reputation": 705, "user_id": 5327403, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/c293099c7e61e9c0396c0ca2d2e983f6?s=128&d=identicon&r=PG&f=1", "display_name": "FrankTheTank", "link": "https://stackoverflow.com/users/5327403/frankthetank"}, "reply_to_user": {"reputation": 15181, "user_id": 3308055, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mIjeo.png?s=128&g=1", "display_name": "juvian", "link": "https://stackoverflow.com/users/3308055/juvian"}, "edited": false, "score": 0, "creation_date": 1536165435, "post_id": 52189752, "comment_id": 91329441, "body": "Could you elaborate on how to do this or point me to a resource? Thanks for the help"}, {"owner": {"reputation": 15181, "user_id": 3308055, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mIjeo.png?s=128&g=1", "display_name": "juvian", "link": "https://stackoverflow.com/users/3308055/juvian"}, "edited": false, "score": 0, "creation_date": 1536165625, "post_id": 52189752, "comment_id": 91329524, "body": "Create a new hash called index. Iterate over base array and put a key (location) in index with a reference (or index of array if ruby has no references) to the base array element. Then iterate over additions, and you can find the base array element with that location using index[location]"}, {"owner": {"reputation": 705, "user_id": 5327403, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/c293099c7e61e9c0396c0ca2d2e983f6?s=128&d=identicon&r=PG&f=1", "display_name": "FrankTheTank", "link": "https://stackoverflow.com/users/5327403/frankthetank"}, "reply_to_user": {"reputation": 15181, "user_id": 3308055, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mIjeo.png?s=128&g=1", "display_name": "juvian", "link": "https://stackoverflow.com/users/3308055/juvian"}, "edited": false, "score": 0, "creation_date": 1536166032, "post_id": 52189752, "comment_id": 91329719, "body": "So when you say put a key in index as location do you mean the actual value like in my case Index would be {10808=&gt;0}. So that the location value points to the index in the base array?"}, {"owner": {"reputation": 15181, "user_id": 3308055, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mIjeo.png?s=128&g=1", "display_name": "juvian", "link": "https://stackoverflow.com/users/3308055/juvian"}, "edited": false, "score": 0, "creation_date": 1536166126, "post_id": 52189752, "comment_id": 91329763, "body": "Indeed :). {10808=&gt;0, 10809 =&gt; 1}"}, {"owner": {"reputation": 705, "user_id": 5327403, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/c293099c7e61e9c0396c0ca2d2e983f6?s=128&d=identicon&r=PG&f=1", "display_name": "FrankTheTank", "link": "https://stackoverflow.com/users/5327403/frankthetank"}, "reply_to_user": {"reputation": 15181, "user_id": 3308055, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mIjeo.png?s=128&g=1", "display_name": "juvian", "link": "https://stackoverflow.com/users/3308055/juvian"}, "edited": false, "score": 0, "creation_date": 1536166655, "post_id": 52189752, "comment_id": 91329999, "body": "Ah makes sense, thanks a lot for the help!"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 3, "creation_date": 1536169453, "post_id": 52189752, "comment_id": 91331324, "body": "You need to state in words, at the outset, what your code is intended to do.  It has something to do with merging hashes that have a common key, but that is not enough. You are forcing readers to try to figure out your objective from your code, which if off-putting and no doubt is the reason no answers have been posted to date. Also, as links tend to break over time it&#39;s generally not a good idea to use them (e.g., &quot;Run code snippet&quot;) as you have. Instead, just show the return value for each example string. If readers want to copy your code they can simply cut-and-paste."}, {"owner": {"reputation": 705, "user_id": 5327403, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/c293099c7e61e9c0396c0ca2d2e983f6?s=128&d=identicon&r=PG&f=1", "display_name": "FrankTheTank", "link": "https://stackoverflow.com/users/5327403/frankthetank"}, "edited": false, "score": 0, "creation_date": 1536170648, "post_id": 52189752, "comment_id": 91331875, "body": "Thanks for the feedback I will make sure to do so going forward"}], "owner": {"reputation": 705, "user_id": 5327403, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/c293099c7e61e9c0396c0ca2d2e983f6?s=128&d=identicon&r=PG&f=1", "display_name": "FrankTheTank", "link": "https://stackoverflow.com/users/5327403/frankthetank"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 66, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1536239963, "creation_date": 1536164882, "last_edit_date": 1536239963, "question_id": 52189752, "link": "https://stackoverflow.com/questions/52189752/how-to-optimize-method-merging-two-hashes-ruby", "title": "How To Optimize Method Merging Two Hashes [RUBY]", "body": "<p>I have constructed a method that merges two hashes where one of their keys values are the same. The method can be seen below:</p>\n\n<pre><code>  def self.hash_merge_on_location(base, additions_arr, location)\n    base.each_with_index { |b_hash,b_index|\n      additions_arr.each do |addition|\n        addition.each_with_index { |a_hash,a_index|\n          if b_hash[location] == a_hash[location]\n            base[b_index] = b_hash.merge(a_hash)\n          end\n        }\n      end \n    }   \n    base\n  end \n</code></pre>\n\n<p>So my question is how can I make this method better? Right now I have base (array of hashes), additions_arr (array of array of hashes), and location (key to compare) as my parameters and I iterate over over hash in my base array and then compare this against every array of hashes in my additions_arr. I finally check to see if the current hash value in my array in my additions_arr is equal to the hash value in my base array. </p>\n\n<p>An example would be as follows:</p>\n\n<p><strong>Base Array</strong></p>\n\n<pre><code>[{\"loan_number\" =&gt; 10808, \"spec_type\" =&gt; \"New\"}, \n {\"loan_number\" =&gt; 10809, \"spec_type\" =&gt; \"Old\"}]\n</code></pre>\n\n<p><strong>Additions Array</strong></p>\n\n<pre><code>[\n [{\"loan_number\" =&gt; 10808, \"new_field\" =&gt; 10}, \n  {\"loan_number\" =&gt; 12383, \"new_field\" =&gt; 19}],\n [{\"loan_number\" =&gt; 10809, \"new_field\" =&gt; 11}]\n]\n</code></pre>\n\n<p>So right now with my current code with a location input of \"loan_number\" the output of hash_merge_on_location would be:</p>\n\n<p><strong>Output</strong></p>\n\n<pre><code>[{\"loan_number\" =&gt; 10808, \"spec_type\" =&gt; \"New\", \"new_field\" =&gt; 10},\n {\"loan_number\" =&gt; 10809, \"spec_type\" =&gt; \"Old\", \"new_field\" =&gt; 11}]\n</code></pre>\n\n<p>Is there anyway in which I can optimize my method as it stands currently? Or anything else I could do to make it better?</p>\n"}, {"tags": ["ruby", "regex"], "comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1536169814, "post_id": 52187605, "comment_id": 91331526, "body": "You will see that those offering answers have interpreted your question differently. Two of us assumed that you did not want to match any string following the specific string <code>&quot;objectClass=&quot;</code>; one did not."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1536170195, "post_id": 52187605, "comment_id": 91331698, "body": "...You need to clarify the question. Please state the question in words, at the outset, without reliance on the link. Something like, &quot;I wish to obtain the first match in a string that is preceded by an equals sign and is followed by the first right parenthesis encountered.&quot; or &quot;I wish to match a string for all substrings that follow an equal sign and precede the first right parenthesis, with the proviso that the equal sign is not immediately preceded by the string <code>&quot;objectClass&quot;</code>"}, {"owner": {"reputation": 153, "user_id": 5116594, "user_type": "registered", "accept_rate": 70, "profile_image": "https://lh4.googleusercontent.com/-Ob3rOxk9fNE/AAAAAAAAAAI/AAAAAAAAFt0/Ck6S9PpM8F8/photo.jpg?sz=128", "display_name": "Raphael Telatim", "link": "https://stackoverflow.com/users/5116594/raphael-telatim"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1536170217, "post_id": 52187605, "comment_id": 91331709, "body": "@CarySwoveland Yeah, I see, sorry, I haven&#39;t expressed myself very clearly. I opened another topic about what I really need. Thanks for the effort anyway."}], "answers": [{"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1536168632, "post_id": 52188077, "comment_id": 91330917, "body": "Your regex matches <code>&quot;group(maca)&quot;</code> in the string <code>&quot;(&amp;(objectClass=group(maca)))&quot;</code>. Is that intentional?"}, {"owner": {"reputation": 91443, "user_id": 5424988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0b4f91c20dcd87cbd58dd351455198c?s=128&d=identicon&r=PG&f=1", "display_name": "The fourth bird", "link": "https://stackoverflow.com/users/5424988/the-fourth-bird"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1536169150, "post_id": 52188077, "comment_id": 91331152, "body": "@CarySwoveland Yes, this is about excluding the second match data as the OP does not use <code>objectClass</code> in the given regex in the question."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1536169624, "post_id": 52188077, "comment_id": 91331418, "body": "I don&#39;t follow. Why would the OP specifically mention the string <code>&quot;objectClass&quot;</code> if that were not relevant? Ah, on re-reading, I see what you mean."}, {"owner": {"reputation": 91443, "user_id": 5424988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0b4f91c20dcd87cbd58dd351455198c?s=128&d=identicon&r=PG&f=1", "display_name": "The fourth bird", "link": "https://stackoverflow.com/users/5424988/the-fourth-bird"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1536172263, "post_id": 52188077, "comment_id": 91332600, "body": "I saw <a href=\"https://stackoverflow.com/questions/52190017/regex-to-get-parenthesis-from-specifc-part-of-string\">this other post</a> with additional data. I have updated my answer. @CarySwoveland Has a point in asking if <code>&quot;objectClass&quot;</code> should be part of the string?"}, {"owner": {"reputation": 153, "user_id": 5116594, "user_type": "registered", "accept_rate": 70, "profile_image": "https://lh4.googleusercontent.com/-Ob3rOxk9fNE/AAAAAAAAAAI/AAAAAAAAFt0/Ck6S9PpM8F8/photo.jpg?sz=128", "display_name": "Raphael Telatim", "link": "https://stackoverflow.com/users/5116594/raphael-telatim"}, "edited": false, "score": 0, "creation_date": 1536173239, "post_id": 52188077, "comment_id": 91332993, "body": "Hey, thanks for the reply. No, &quot;objectClass&quot; should be rejected by the regex"}, {"owner": {"reputation": 91443, "user_id": 5424988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0b4f91c20dcd87cbd58dd351455198c?s=128&d=identicon&r=PG&f=1", "display_name": "The fourth bird", "link": "https://stackoverflow.com/users/5424988/the-fourth-bird"}, "reply_to_user": {"reputation": 153, "user_id": 5116594, "user_type": "registered", "accept_rate": 70, "profile_image": "https://lh4.googleusercontent.com/-Ob3rOxk9fNE/AAAAAAAAAAI/AAAAAAAAFt0/Ck6S9PpM8F8/photo.jpg?sz=128", "display_name": "Raphael Telatim", "link": "https://stackoverflow.com/users/5116594/raphael-telatim"}, "edited": false, "score": 0, "creation_date": 1536174229, "post_id": 52188077, "comment_id": 91333411, "body": "@RaphaelTelatim Ok, I added a negative lookbehind to make sure that there is no match when preded by <code>objectClass=</code>"}, {"owner": {"reputation": 153, "user_id": 5116594, "user_type": "registered", "accept_rate": 70, "profile_image": "https://lh4.googleusercontent.com/-Ob3rOxk9fNE/AAAAAAAAAAI/AAAAAAAAFt0/Ck6S9PpM8F8/photo.jpg?sz=128", "display_name": "Raphael Telatim", "link": "https://stackoverflow.com/users/5116594/raphael-telatim"}, "edited": false, "score": 0, "creation_date": 1536174669, "post_id": 52188077, "comment_id": 91333626, "body": "@Thefourthbird Almost there. When string does not have any parentheses it still get the entire text, look at <code>(&amp;(cn=Developer) (objectClass=group))</code> for example"}, {"owner": {"reputation": 91443, "user_id": 5424988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0b4f91c20dcd87cbd58dd351455198c?s=128&d=identicon&r=PG&f=1", "display_name": "The fourth bird", "link": "https://stackoverflow.com/users/5424988/the-fourth-bird"}, "reply_to_user": {"reputation": 153, "user_id": 5116594, "user_type": "registered", "accept_rate": 70, "profile_image": "https://lh4.googleusercontent.com/-Ob3rOxk9fNE/AAAAAAAAAAI/AAAAAAAAFt0/Ck6S9PpM8F8/photo.jpg?sz=128", "display_name": "Raphael Telatim", "link": "https://stackoverflow.com/users/5116594/raphael-telatim"}, "edited": false, "score": 0, "creation_date": 1536175156, "post_id": 52188077, "comment_id": 91333849, "body": "@RaphaelTelatim What you could do is match not an opening or closing parenthesis before that. So the regex would match not an opening or closing parenthesis, then a repeating pattern of text between parenthesis followed by matching not an opening or closing parenthesis again .<a href=\"http://rubular.com/r/WrHRr1p3jK\" rel=\"nofollow noreferrer\">rubular.com/r/WrHRr1p3jK</a>"}], "tags": [], "owner": {"reputation": 91443, "user_id": 5424988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0b4f91c20dcd87cbd58dd351455198c?s=128&d=identicon&r=PG&f=1", "display_name": "The fourth bird", "link": "https://stackoverflow.com/users/5424988/the-fourth-bird"}, "is_accepted": true, "score": 1, "last_activity_date": 1536176483, "last_edit_date": 1536176483, "creation_date": 1536159062, "answer_id": 52188077, "question_id": 52187605, "link": "https://stackoverflow.com/questions/52187605/exclude-matchdata-and-select-only-parentheses-in-regex/52188077#52188077", "title": "Exclude matchdata and select only parentheses in regex", "body": "<p>One option might be:</p>\n\n<p><code>(?&lt;!objectClass=)(?&lt;==)[^()]+(?:\\([^)]+\\)[^()]*)+</code></p>\n\n<p><a href=\"http://rubular.com/r/WrHRr1p3jK\" rel=\"nofollow noreferrer\">Regex demo</a></p>\n\n<p>That would match:</p>\n\n<ul>\n<li><code>(?&lt;!objectClass=)</code> Negative lookbehind to assert what is on the left is not <code>objectClass=</code></li>\n<li><code>(?&lt;==)</code> Positive lookbehind to assert what is on the left is an equals sign</li>\n<li><code>[^()]+</code> Match not an opening or closing parenthesis one or more times</li>\n<li><code>(?:</code>\n\n<ul>\n<li><code>\\(</code> Match opening parenthesis</li>\n<li><code>[^)]+</code> Match not a closing parenthesis one or more times</li>\n<li><code>\\)</code> Match closing parenthesis</li>\n<li><code>[^()]*</code> Followed by matching not an opening or closing parenthesis zero or more times</li>\n</ul></li>\n<li><code>)+</code> Close non capturing group and repeat one or more times</li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 0, "last_activity_date": 1536167816, "creation_date": 1536167816, "answer_id": 52190401, "question_id": 52187605, "link": "https://stackoverflow.com/questions/52187605/exclude-matchdata-and-select-only-parentheses-in-regex/52190401#52190401", "title": "Exclude matchdata and select only parentheses in regex", "body": "<p>The following does not depend on the presence of spaces.</p>\n\n<pre><code>r = /\n    (?&lt;!objectClass) # do not match \"objectClass\"\n    =                # match \"=\"\n    .*?              # match any number of characters lazily\n    (?=\\))           # match a right parentheses in a positive lookahead\n    /x               # free-spacing regex definition mode\n\ntest=&lt;&lt;_.lines.map(&amp;:chomp)\n(&amp;(cn=Te(st)ing) (objectClass=group))\n(&amp;(cn=Te(st)ing)(objectClass=group))\n(&amp;(cn=Banana (maca)) (objectClass=group))\n(&amp;(cn=Banana (maca))(objectClass=group))\n_\n\ntest.each { |s| puts \"#{s} -&gt; #{s.scan r}\" }\n(&amp;(cn=Te(st)ing) (objectClass=group))     -&gt; [\"=Te(st\"]\n(&amp;(cn=Te(st)ing)(objectClass=group))      -&gt; [\"=Te(st\"]\n(&amp;(cn=Banana (maca)) (objectClass=group)) -&gt; [\"=Banana (maca\"]\n(&amp;(cn=Banana (maca))(objectClass=group))  -&gt; [\"=Banana (maca\"]\n</code></pre>\n"}], "owner": {"reputation": 153, "user_id": 5116594, "user_type": "registered", "accept_rate": 70, "profile_image": "https://lh4.googleusercontent.com/-Ob3rOxk9fNE/AAAAAAAAAAI/AAAAAAAAFt0/Ck6S9PpM8F8/photo.jpg?sz=128", "display_name": "Raphael Telatim", "link": "https://stackoverflow.com/users/5116594/raphael-telatim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "accepted_answer_id": 52188077, "answer_count": 2, "score": -2, "last_activity_date": 1536176483, "creation_date": 1536157771, "last_edit_date": 1536158808, "question_id": 52187605, "link": "https://stackoverflow.com/questions/52187605/exclude-matchdata-and-select-only-parentheses-in-regex", "title": "Exclude matchdata and select only parentheses in regex", "body": "<p>I got this regex <code>(?&lt;==).*?\\)(\\w|)+</code> that captures any text after an <code>=</code> until a closing parentheses.</p>\n\n<p>I need to do an improvement on this, exluding the second matchdata, i dont need that string that is after <em>\"objectClass\"</em> and I need to select only parentheses from first matchdata</p>\n\n<p>Here's an example of what I got so far</p>\n\n<p><a href=\"http://rubular.com/r/9TMcrGT1of\" rel=\"nofollow noreferrer\">http://rubular.com/r/9TMcrGT1of</a></p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1536159023, "post_id": 52187225, "comment_id": 91325733, "body": "Worth noting... This code screams &quot;potential security vulnerability!!!&quot; to me. Of course, I do not know the wider context of how this is being used (so it may be fine), but what happens if a user submits the string: <code>&#47;etc&#47;password</code>?"}, {"owner": {"reputation": 1670, "user_id": 6388521, "user_type": "registered", "accept_rate": 69, "profile_image": "https://lh4.googleusercontent.com/-VdFWPJVSpRc/AAAAAAAAAAI/AAAAAAAAAFo/vCc8QOz6v9Y/photo.jpg?sz=128", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/6388521/ruslan"}, "reply_to_user": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 1, "creation_date": 1536159317, "post_id": 52187225, "comment_id": 91325958, "body": "@TomLord I&#39;ll just check if <code>param == &#39;&#47;etc&#47;password&#39;</code> and tell them politely not to try to hack me. Yeah, it&#39;s a back end system, <code>param</code> comes from a few internal code and never from the outside"}], "answers": [{"tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": true, "score": 1, "last_activity_date": 1536156940, "creation_date": 1536156940, "answer_id": 52187319, "question_id": 52187225, "link": "https://stackoverflow.com/questions/52187225/how-do-i-check-if-string-is-a-file-contents-or-path/52187319#52187319", "title": "How do I check if string is a file contents or path?", "body": "<p>You might check if the string contains null bytes upfront:</p>\n\n<pre><code>contents = \n  case input\n  when /\\u0000/ then param\n  when File.exists?(param) then File.read(param)\n  else param\n  end\n</code></pre>\n\n<p>Or, even easier, fall back to param unless <code>File#read</code> succeeded:</p>\n\n<pre><code>contents = File.read(param) rescue param\n</code></pre>\n"}], "owner": {"reputation": 1670, "user_id": 6388521, "user_type": "registered", "accept_rate": 69, "profile_image": "https://lh4.googleusercontent.com/-VdFWPJVSpRc/AAAAAAAAAAI/AAAAAAAAAFo/vCc8QOz6v9Y/photo.jpg?sz=128", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/6388521/ruslan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 262, "favorite_count": 0, "accepted_answer_id": 52187319, "answer_count": 1, "score": 0, "last_activity_date": 1536157797, "creation_date": 1536156635, "question_id": 52187225, "link": "https://stackoverflow.com/questions/52187225/how-do-i-check-if-string-is-a-file-contents-or-path", "title": "How do I check if string is a file contents or path?", "body": "<p>I have a method that receives a string. It can accept a file path or contents of the file.</p>\n\n<p>When I pass path, it reads it and processes it, all good.</p>\n\n<p>When I pass contents, it crashes with <code>string contains null byte</code> when it check if a file path exists</p>\n\n<p>Here is the part of the code that checks if passed param is a file:</p>\n\n<pre><code>contents = File.exists?(param) ? File.read(param) : param\n</code></pre>\n\n<p>My question is: Is there another way to check if the <code>param</code> is a binary content vs path without <code>File.exists?</code></p>\n"}, {"tags": ["ruby", "exit", "minitest"], "comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1536156426, "post_id": 52186916, "comment_id": 91323988, "body": "What have you tried? Maybe you need to look into <code>Kernel#at_exit</code> or <code>ObjectSpace.define_finalizer</code>? I have posted examples on this SO question: <a href=\"https://stackoverflow.com/questions/48558953/ruby-check-whether-program-is-currently-being-closed\">Ruby check whether program is currently being closed</a>"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 1, "creation_date": 1536156499, "post_id": 52186916, "comment_id": 91324035, "body": "I wonder why would you want to test Ruby standard library."}], "answers": [{"tags": [], "owner": {"reputation": 79498, "user_id": 298624, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5b84ccc2f7709bbb7105baeb40e0961b?s=128&d=identicon&r=PG", "display_name": "fl00r", "link": "https://stackoverflow.com/users/298624/fl00r"}, "is_accepted": false, "score": 3, "last_activity_date": 1536157518, "creation_date": 1536157518, "answer_id": 52187506, "question_id": 52186916, "link": "https://stackoverflow.com/questions/52186916/minitest-how-to-test-the-exit-keyword/52187506#52187506", "title": "MiniTest: How to test the exit keyword", "body": "<pre><code>require \"minitest/autorun\"\n\ndef quit_42\n  puts \"Good bye!\"\n  exit 42\nend\n\ndescribe :exit_code do\n  it \"returns 42\" do\n    err = -&gt; { quit_42 }.must_raise SystemExit\n    err.status.must_equal 42\n  end\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "is_accepted": false, "score": 3, "last_activity_date": 1536158333, "last_edit_date": 1536158333, "creation_date": 1536157748, "answer_id": 52187594, "question_id": 52186916, "link": "https://stackoverflow.com/questions/52186916/minitest-how-to-test-the-exit-keyword/52187594#52187594", "title": "MiniTest: How to test the exit keyword", "body": "<p><em>Technically</em> the following is testing implementation rather than behaviour, but that's probably good enough since the actual behaviour should be covered by ruby's core language tests:</p>\n\n<pre><code>require 'minitest/autorun'\n\ndef quit\n  puts \"Good bye!\"\n  exit \nend\n\ndescribe 'quit' do\n  it 'ends the process' do\n    assert_raises SystemExit do \n      quit\n    end\n  end\nend\n</code></pre>\n\n<p>Note that this is an unusual scenario; it would typically not be advisable to ever <code>rescue</code> from <code>SystemExit</code>, since this could cause all sorts of weird behaviour - e.g. this test will actually <em>pass</em> if you manually kill the process while it's running (and the process itself wouldn't actually terminate)!</p>\n\n<p>If you were using <code>rspec</code>, then the implementation would be similar:</p>\n\n<pre><code>RSpec.describe 'quit' do\n  it 'ends the process' do\n    expect { quit }.to raise_error(SystemExit)\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 309, "user_id": 3763875, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/709acbe23fdd7a824379bfbb728a42b1?s=128&d=identicon&r=PG&f=1", "display_name": "user3763875", "link": "https://stackoverflow.com/users/3763875/user3763875"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 443, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1536158648, "creation_date": 1536155737, "last_edit_date": 1536158648, "question_id": 52186916, "link": "https://stackoverflow.com/questions/52186916/minitest-how-to-test-the-exit-keyword", "title": "MiniTest: How to test the exit keyword", "body": "<p>I have a method 'quit':</p>\n\n<pre><code>def quit\n  puts \"Good bye!\"\n  exit \nend\n</code></pre>\n\n<p>What I am trying to do is make a mini test assertion that the quit method does indeed quit, none of what I have tried works. Looking for input. Thanks in advance!</p>\n"}, {"tags": ["ruby", "sidekiq", "delayed-job", "sidekiq-monitor"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1536153329, "post_id": 52185390, "comment_id": 91321816, "body": "You might query <a href=\"https://github.com/mperham/sidekiq/blob/v5.2.1/lib/sidekiq/api.rb#L106\" rel=\"nofollow noreferrer\"><code>stats</code></a>."}, {"owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 0, "creation_date": 1536195622, "post_id": 52185390, "comment_id": 91339771, "body": "What do you mean by &quot;get the job&quot; at this point?"}, {"owner": {"reputation": 2773, "user_id": 2505904, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/dfbdb599d48dd7b6dba638bf0549599a?s=128&d=identicon&r=PG", "display_name": "Matrix", "link": "https://stackoverflow.com/users/2505904/matrix"}, "reply_to_user": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 1, "creation_date": 1536195787, "post_id": 52185390, "comment_id": 91339800, "body": "@lacostenycoder exactly like you do in your post (first exemple), to get arguments of jobs for exemple"}, {"owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 0, "creation_date": 1536195886, "post_id": 52185390, "comment_id": 91339816, "body": "@Matrix so does that work for you?"}, {"owner": {"reputation": 2773, "user_id": 2505904, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/dfbdb599d48dd7b6dba638bf0549599a?s=128&d=identicon&r=PG", "display_name": "Matrix", "link": "https://stackoverflow.com/users/2505904/matrix"}, "edited": false, "score": 0, "creation_date": 1536196188, "post_id": 52185390, "comment_id": 91339885, "body": "no because we can&#39;t select a job when queue is empty. Maybe the job is delete when worker running it?"}, {"owner": {"reputation": 59, "user_id": 2421273, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QaJh5.jpg?s=128&g=1", "display_name": "Skylar Graika", "link": "https://stackoverflow.com/users/2421273/skylar-graika"}, "reply_to_user": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 0, "creation_date": 1563911333, "post_id": 52185390, "comment_id": 100855746, "body": "@lacostenycoder I too am looking for a way to get the job details from within a Worker&#39;s perform method. Specifically, we would like to access the enqueued_at property that each job payload includes."}, {"owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 0, "creation_date": 1563914169, "post_id": 52185390, "comment_id": 100856961, "body": "@Matrix the job should not be deleted unless it completes or if it fails, with no retry set, it should end up in the dead queue."}, {"owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "reply_to_user": {"reputation": 59, "user_id": 2421273, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QaJh5.jpg?s=128&g=1", "display_name": "Skylar Graika", "link": "https://stackoverflow.com/users/2421273/skylar-graika"}, "edited": false, "score": 0, "creation_date": 1563915056, "post_id": 52185390, "comment_id": 100857294, "body": "@SkylarGraika see my updated answer below. It may help you find what you need."}], "owner": {"reputation": 2773, "user_id": 2505904, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/dfbdb599d48dd7b6dba638bf0549599a?s=128&d=identicon&r=PG", "display_name": "Matrix", "link": "https://stackoverflow.com/users/2505904/matrix"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 440, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1563915001, "creation_date": 1536151263, "question_id": 52185390, "link": "https://stackoverflow.com/questions/52185390/get-running-job-sidekiq-from-worker-ruby", "title": "get running job sidekiq from worker (ruby)", "body": "<pre><code>workers = Sidekiq::Workers.new\nworkers.each do |_process_id, _thread_id, work|\n  p work['payload']['jid']\nend\n</code></pre>\n\n<p>How can I get the job from the worker?</p>\n\n<p>I have the jid but job aren't in Queue because still running...</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "csv", "internet-explorer", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 0, "creation_date": 1536148792, "post_id": 52184542, "comment_id": 91318901, "body": "This is a browser specific issue. It must be something to do with the settings of IE. See this <a href=\"https://answers.microsoft.com/en-us/ie/forum/ie11-windows_7/ie11-no-download-prompt-always-tries-to-open/3c32d119-95ff-4614-a713-badd127a8c4a\" rel=\"nofollow noreferrer\">answers.microsoft.com/en-us/ie/forum/ie11-windows_7/&hellip;</a>"}, {"owner": {"reputation": 136, "user_id": 3164387, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hjaEk.jpg?s=128&g=1", "display_name": "Sudhir", "link": "https://stackoverflow.com/users/3164387/sudhir"}, "reply_to_user": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 0, "creation_date": 1536149143, "post_id": 52184542, "comment_id": 91319139, "body": "Thanks @Pavan but the same thing working for my old version ruby on rails csv file with same version of IE."}, {"owner": {"reputation": 831, "user_id": 2159907, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23f3e67a3c0fd17bfb9bf369b35fd431?s=128&d=identicon&r=PG", "display_name": "Rob Parsons", "link": "https://stackoverflow.com/users/2159907/rob-parsons"}, "edited": false, "score": 1, "creation_date": 1536285985, "post_id": 52184542, "comment_id": 91377974, "body": "IE uses Security zones. The file&gt;Properties menu in IE will tell you which IE security zone your test/dev/or production website is mapped to. eg. if you system administrators disable downloads in the Internet zone, but the host maps to the Trusted zone, then blob data will not download. To correct the problem you need to add the word blob to your trusted sites list."}, {"owner": {"reputation": 831, "user_id": 2159907, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23f3e67a3c0fd17bfb9bf369b35fd431?s=128&d=identicon&r=PG", "display_name": "Rob Parsons", "link": "https://stackoverflow.com/users/2159907/rob-parsons"}, "edited": false, "score": 0, "creation_date": 1536286445, "post_id": 52184542, "comment_id": 91378051, "body": "we need to know which IE security zone your dev/test/production environment is mapped to. When testing or debugging or trouble shooting, make sure you are using the default IE security zone settings. Tools&gt;Internet Options&gt;Security tab, click &quot;Reset all zones to default&quot;... optionally you can use the Networking tab of the dev to inspect the response from the server or to step through breakpoints."}], "owner": {"reputation": 136, "user_id": 3164387, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hjaEk.jpg?s=128&g=1", "display_name": "Sudhir", "link": "https://stackoverflow.com/users/3164387/sudhir"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 188, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1536148694, "creation_date": 1536148500, "last_edit_date": 1536148694, "question_id": 52184542, "link": "https://stackoverflow.com/questions/52184542/open-option-not-coming-in-ie-for-downloaded-csv-file", "title": "Open option not coming in IE for downloaded CSV file", "body": "<p>Below is my code for CSV file download, </p>\n\n<pre><code>send_data get_csv(params), filename: filename, type: 'text/csv; charset=utf-8; header=present', disposition: 'attachment'\n</code></pre>\n\n<p>In Mozilla and Chrome after csv file download I am able to see (open-with, save) options so I can open my file without save.</p>\n\n<p>But in IE I am getting only save option, there is no open option. Open gets enable when i will save the file, But I need need that option on download.</p>\n\n<p>Anyone can suggest me, what I am missing here, Do I need to make any changes in my code side</p>\n\n<p>Using Ruby(2.5) and Rails(5.2) versions.</p>\n"}, {"tags": ["mysql", "ruby-on-rails", "ruby", "left-join", "rails-activerecord"], "comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1536177649, "post_id": 52184356, "comment_id": 91334943, "body": "rails version? This is becoming an important part of any rails question since v 5 implemented <code>left_joins</code> along with a few other new and different changes"}, {"owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 0, "creation_date": 1536208003, "post_id": 52184356, "comment_id": 91342223, "body": "What is <code>:blogs</code> in <code>User.includes(subscriptions: :coupon, :blogs)</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 63, "user_id": 9223163, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b6c0a244b0f04806bc70050fbaba78a1?s=128&d=identicon&r=PG&f=1", "display_name": "Sumit Sharma", "link": "https://stackoverflow.com/users/9223163/sumit-sharma"}, "edited": false, "score": 0, "creation_date": 1536149387, "post_id": 52184432, "comment_id": 91319285, "body": "I want all users data and with that only valid subscriptions.. You interpreted the question wrong"}], "tags": [], "owner": {"reputation": 1928, "user_id": 6193734, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-yNKciMo2y_0/AAAAAAAAAAI/AAAAAAAACGs/Hg_DmZMu7Lw/photo.jpg?sz=128", "display_name": "Matthieu Libeer", "link": "https://stackoverflow.com/users/6193734/matthieu-libeer"}, "is_accepted": true, "score": 0, "last_activity_date": 1536164601, "last_edit_date": 1536164601, "creation_date": 1536148143, "answer_id": 52184432, "question_id": 52184356, "link": "https://stackoverflow.com/questions/52184356/join-table-with-includes-creating-problem/52184432#52184432", "title": "join table with includes creating problem", "body": "<p>If you want to load all users, including those who don't have any valid subscriptions, but for each user be able to access only valid subscriptions, you need to define another association <code>valid_subscriptions</code>. It can be done this way:</p>\n\n<p>In <code>user.rb</code></p>\n\n<p><code>has_many :valid_subscriptions, -&gt; { valid }, class_name: 'Subscription'</code></p>\n\n<p>In <code>subscription.rb</code>, define what being valid means.</p>\n\n<p><code>scope :valid, -&gt; { where(state: 1) }</code></p>\n\n<p>Then you query can be <code>User.includes(:blogs, valid_subscriptions: :coupon)</code></p>\n"}], "owner": {"reputation": 63, "user_id": 9223163, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b6c0a244b0f04806bc70050fbaba78a1?s=128&d=identicon&r=PG&f=1", "display_name": "Sumit Sharma", "link": "https://stackoverflow.com/users/9223163/sumit-sharma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "accepted_answer_id": 52184432, "answer_count": 1, "score": 0, "last_activity_date": 1537484412, "creation_date": 1536147861, "last_edit_date": 1537484412, "question_id": 52184356, "link": "https://stackoverflow.com/questions/52184356/join-table-with-includes-creating-problem", "title": "join table with includes creating problem", "body": "<p>Models structure:- </p>\n\n<pre><code>User has_many :subscriptions \nBlog  has_one :coupon\nSubscription has_one :coupon\n</code></pre>\n\n<p>I am including the tables </p>\n\n<pre><code>User.includes(subscriptions: :coupon, :blogs)\n</code></pre>\n\n<p>I am trying to get all users data and only get the valid subscriptions corresponding to it.</p>\n\n<p>If i do </p>\n\n<pre><code>User.includes(subscriptions: :coupon, :blogs).where(:state =&gt; 1).references(:subscriptions) \n</code></pre>\n\n<p>then i am getting the users having only valid subscriptions</p>\n\n<p>So how to get all the users with preloaded blogs coupons and included with valid subscriptions???</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "devise", "minitest", "devise-token-auth"], "answers": [{"comments": [{"owner": {"reputation": 3502, "user_id": 2558108, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/DUiG3.jpg?s=128&g=1", "display_name": "Qwertie", "link": "https://stackoverflow.com/users/2558108/qwertie"}, "edited": false, "score": 0, "creation_date": 1536231492, "post_id": 52185342, "comment_id": 91353883, "body": "I don&#39;t have a <code>api_find_client_by_name_path</code> path in my app or anything with a similar name"}, {"owner": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "reply_to_user": {"reputation": 3502, "user_id": 2558108, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/DUiG3.jpg?s=128&g=1", "display_name": "Qwertie", "link": "https://stackoverflow.com/users/2558108/qwertie"}, "edited": false, "score": 0, "creation_date": 1536231904, "post_id": 52185342, "comment_id": 91354136, "body": "it&#39;s an <b>example</b>, your actual path might be different."}], "tags": [], "owner": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "is_accepted": false, "score": 0, "last_activity_date": 1536151119, "creation_date": 1536151119, "answer_id": 52185342, "question_id": 52184346, "link": "https://stackoverflow.com/questions/52184346/devise-test-helper-fails-to-sign-in/52185342#52185342", "title": "Devise test helper fails to sign in", "body": "<p>You're using <code>devise_token_auth</code> in that case plain devise helpers doesn't work, you need perform plain authorization with post request. Here is an <strong>example</strong>:</p>\n\n<pre><code># make a request in order to get tokens\npost(\n  api_user_session_path,\n  params: {\n    email: \"foo@bar.com\",\n    password: \"password\"\n  }.to_json,\n  headers: {\n    'Content-Type' =&gt; 'application/json',\n    'Accept' =&gt; 'application/json'\n  }\n)\n# fetch data from response\nclient = response.headers['client']\ntoken = response.headers['access-token']\nexpiry = response.headers['expiry']\ntoken_type = response.headers['token-type']  \nuid = response.headers['uid']  \nauth_params = {\n  'access-token' =&gt; token,\n  'client' =&gt; client,\n  'uid' =&gt; uid,\n  'expiry' =&gt; expiry,\n  'token_type' =&gt; token_type\n}\nnew_client = users('one')\nget(\n  api_find_client_by_name_path(new_client.name),\n  headers: auth_params\n)               \nassert_response :ok\n</code></pre>\n"}], "owner": {"reputation": 3502, "user_id": 2558108, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/DUiG3.jpg?s=128&g=1", "display_name": "Qwertie", "link": "https://stackoverflow.com/users/2558108/qwertie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 219, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1536151119, "creation_date": 1536147823, "question_id": 52184346, "link": "https://stackoverflow.com/questions/52184346/devise-test-helper-fails-to-sign-in", "title": "Devise test helper fails to sign in", "body": "<p>I have a rails API app using devise_token_auth and in my tests (minitest) I need to send POST requests and signed in users so I used the <code>sign_in</code> method but it doesn't seem to be doing anything.</p>\n\n<p>This is my test file</p>\n\n<pre><code>require 'test_helper'\n\nclass ActivityControllerTest &lt; ActionDispatch::IntegrationTest\n    include Devise::Test::IntegrationHelpers\n    test \"post activity\" do\n        sign_in users('one')\n        post '/activity/', params: {\n            original_activity_log_file: fixture_file_upload('files/test_gpx.gpx', 'application/gpx'),\n            title: 'test activity',\n            description: 'test description'\n        }\n        assert_response 200\n    end\nend\n</code></pre>\n\n<p>And this is the result when run</p>\n\n<pre><code>Expected response to be a &lt;200: OK&gt;, but was a &lt;401: Unauthorized&gt;\nResponse body: {\"errors\":[\"You need to sign in or sign up before continuing.\"]}.\nExpected: 200\n  Actual: 401\n</code></pre>\n\n<p>What could be going on here to cause the test to fail?</p>\n"}, {"tags": ["ruby", "msgpack"], "answers": [{"tags": [], "owner": {"reputation": 6814, "user_id": 5227053, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/30254853024c1381c7e51ca09b9341e7?s=128&d=identicon&r=PG&f=1", "display_name": "AnoE", "link": "https://stackoverflow.com/users/5227053/anoe"}, "is_accepted": false, "score": 3, "last_activity_date": 1536323381, "creation_date": 1536323381, "answer_id": 52222621, "question_id": 52182794, "link": "https://stackoverflow.com/questions/52182794/how-to-store-32-bit-floats-using-ruby-msgpack-gem/52222621#52222621", "title": "How to store 32-bit floats using ruby-msgpack gem?", "body": "<h2>Overriding Float</h2>\n\n<p>As of right now (version 1.2.4 of <code>msgpack-ruby</code>) this is not possible in the exact fashion you tried: the <a href=\"https://github.com/msgpack/msgpack-ruby/blob/1e35fb8a771339fc51a9a9c96e77046dfc086954/ext/msgpack/packer.c#L139\" rel=\"nofollow noreferrer\"><code>msgpack_packer_write_value</code></a> function first checks all hard-coded data types, and handles them with its default implementation. Only if the current object does not fit any of those types are the extensions handled.</p>\n\n<p>In other words: you cannot override the default pack formats with <code>MessagePack::DefaultFactory#register_type</code>, calling that will simply be a no-op.</p>\n\n<h2>Using extensions</h2>\n\n<p>Furthermore, the extension mechanism is not what you are looking at, anyways. Using that, messagepack would emit a marker byte \"this is an extension\", followed by the extension ID (the value \"0\" in your example), followed by what is already encoded as float32 - alternatively you would need to handle the binary encoding/decoding yourself.</p>\n\n<h2>Creating your own Float class</h2>\n\n<p>You could, in principle, create your own <code>FloatX</code> class or whatever, but this is just a very bad move:</p>\n\n<ul>\n<li><code>Float</code> has no <code>new</code> method which you could monkeypatch, and I know of no way to tell ruby to create a <code>FloatX</code> instance when you write <code>10.3</code> in your code. So you would have to do manual object creation throughout your code, probably with severe impact on performance.</li>\n<li>You would end up with the extension mechanism anyways, infeasible as shown above.</li>\n</ul>\n\n<h2>Overriding the behaviour of <code>msgpack_packer_write_value</code></h2>\n\n<p>You would need to to override the <code>msgpack_packer_write_value</code> implementation of <code>packer.c</code>. Unfortunately you cannot do that in the ruby world since there is no equivalent ruby method defined for it. So the usual monkeypatching of ruby cannot be used.</p>\n\n<p>Also, the method is called from plenty of other methods inside the <code>packer.c</code> implementation, for example in the respective methods responsible for writing arrays or hashes. Those of course would not call a ruby method of the same name either, as they're living in their binary world completely.</p>\n\n<p>Finally, whily the usage of a factory mechanism seems to imply that you can somehow create different implementations of packers, I see no evidence that this is actually true - reading the C code of the Gem, there seems to be no provision for anything of that kind. The factory seems to be there to handle the ruby&lt;->C interactions of the Gem.</p>\n\n<h2>What now</h2>\n\n<p>If I were in your shoes, I would clone that Gem and modify <a href=\"https://github.com/msgpack/msgpack-ruby/blob/1e35fb8a771339fc51a9a9c96e77046dfc086954/ext/msgpack/packer.c#L139\" rel=\"nofollow noreferrer\"><code>msgpack_packer_write_value</code></a> in <code>packer.c</code> to behave as you wish. Check the <code>case T_FLOAT</code> and go on from there. The code seems pretty straightforward  - it soon proceeds to the following method in <code>packer.h</code>:</p>\n\n<pre><code>static inline void msgpack_packer_write_float_value(msgpack_packer_t* pk, VALUE v)\n{\n    msgpack_packer_write_double(pk, rb_num2dbl(v));\n}\n</code></pre>\n\n<p>...which is of course the real culprit here.</p>\n\n<p>Approaching that from the other direction (the <code>write_float32</code> you already found), the comparable code is:</p>\n\n<pre><code>msgpack_packer_write_float(pk, (float)rb_num2dbl(numeric));\n</code></pre>\n\n<p>So if you replace that line in <code>msgpack_packer_write_float_value</code> appropriately, you will be done. Should be doable even if you're not that much into C.</p>\n\n<p>Afterwards, you give your Gem an individual release tag, <a href=\"https://guides.rubygems.org/make-your-own-gem/\" rel=\"nofollow noreferrer\">build it yourself</a> and specify it in your <code>Gemfile</code> or however you manage your gems.</p>\n"}, {"tags": [], "owner": {"reputation": 7565, "user_id": 1021515, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/Z9QcP.jpg?s=128&g=1", "display_name": "mwp", "link": "https://stackoverflow.com/users/1021515/mwp"}, "is_accepted": true, "score": 3, "last_activity_date": 1536514833, "last_edit_date": 1536514833, "creation_date": 1536489613, "answer_id": 52243659, "question_id": 52182794, "link": "https://stackoverflow.com/questions/52182794/how-to-store-32-bit-floats-using-ruby-msgpack-gem/52243659#52243659", "title": "How to store 32-bit floats using ruby-msgpack gem?", "body": "<p>I know it would be nice to use MessagePack.pack, but the Ruby shim is very thin. It barely gives you an entry point into the C (or Java) library. And as AnoE pointed out, I think you can only customize <code>to_msgpack_ext</code> and <code>self.from_msgpack_ext</code> for registered types, not built-in types.</p>\n\n<p>The other problem with your attempt is that you don't have access to <code>packer</code> and <code>unpacker</code> from those methods. You would just have to use <code>Array#pack</code> and <code>String#unpack</code>, I think, even if you could figure out a way to get the library to call your methods. To get a handle to packer, you have to override a different method:</p>\n\n<pre><code>class Float\n  private\n  def to_msgpack_with_packer(packer)\n    packer.write_float32 self\n    packer\n  end\nend\n</code></pre>\n\n<p>And then call it appropriately (see <a href=\"https://github.com/msgpack/msgpack-ruby/blob/a22d8268f82e0f2ae95f038285af43ce5971810e/lib/msgpack/core_ext.rb#L3-L13\" rel=\"nofollow noreferrer\">this code</a> as to why):</p>\n\n<pre><code>10.3.to_msgpack(MessagePack::Packer.new).to_s # =&gt; \"\\xCAA$\\xCC\\xCD\"\n</code></pre>\n\n<p>However, this falls apart when you call <code>#to_msgpack</code> on a Hash containing a float; it just reverts to its internal methods to pack hash keys and values. This is why I said above that the Ruby shim just gives you an entry point: the core extensions are only used for the initial call. </p>\n\n<p>I think the best, simplest solution is to write a little serialization function that iterates through the hash in Ruby, using the <a href=\"http://ruby.msgpack.org/frames.html#!MessagePack/Packer.html\" rel=\"nofollow noreferrer\">MessagePack::Packer API</a> to do what you want when it sees a float, etc. Zero C-hacking, zero monkey-patching, zero confusion when someone tries to read your code in six months. </p>\n\n<pre><code>def pack_float32(obj, packer=MessagePack::Packer.new)\n  case obj\n  when Hash\n    packer.write_map_header(obj.size)\n    obj.each_pair do |key, value|\n      pack_float32(value, pack_float32(key, packer))\n    end\n  when Enumerable\n    packer.write_array_header(obj.size)\n    obj.each do |value|\n      pack_float32(value, packer)\n    end\n  when Float\n    packer.write_float32(obj)\n  else\n    packer.write(obj)\n  end\n\n  packer\nend\n\npack_float32(1=&gt;[10.3]).to_s # =&gt; \"\\x81\\x01\\x91\\xCAA$\\xCC\\xCD\"\n</code></pre>\n\n<p>Obviously this is not strenuously tested, and it may not handle all the edge cases, but hopefully it's enough to get you started.</p>\n\n<p>One other note: You don't have to worry about unpacking. msgpack-ruby appears to correctly unpack a 32-bit float to a 64-bit Float without any fiddling on our part. </p>\n"}], "owner": {"reputation": 24966, "user_id": 2001031, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/bd4f0d39f82be9c22f6f01c80d7ad800?s=128&d=identicon&r=PG", "display_name": "Neil Slater", "link": "https://stackoverflow.com/users/2001031/neil-slater"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 219, "favorite_count": 0, "accepted_answer_id": 52243659, "answer_count": 2, "score": 5, "last_activity_date": 1536514833, "creation_date": 1536142914, "last_edit_date": 1536316841, "question_id": 52182794, "link": "https://stackoverflow.com/questions/52182794/how-to-store-32-bit-floats-using-ruby-msgpack-gem", "title": "How to store 32-bit floats using ruby-msgpack gem?", "body": "<p>I am working on a data system that needs to store large amounts of simple, extensible data (alongside some specialist indexing we are developing in-house, and not part of this question). I expect there to be billions of records stored, so efficient serialisation is a key part of the system. The serialisation needs to be fast, space-efficient, and supported in multiple platforms and languages (because packing and unpacking this data will be a client component responsibility, not part of the storage system)</p>\n\n<p>The data type is effectively a hash with optional key/value pairs. Keys will be small integers (interpreted at application layer). Values can be a variety of simple data types - String, Integer, Float.</p>\n\n<p>As a technology choice, we have picked <a href=\"https://msgpack.org/\" rel=\"noreferrer\">MessagePack</a>, and I am writing code to perform data serialisation via Ruby's <a href=\"https://github.com/msgpack/msgpack-ruby\" rel=\"noreferrer\">msgpack-ruby</a> gem.</p>\n\n<p>I don't need the precision of Ruby's 64-bit Float. None of the numbers being stored has meaningful precision even to limits of 32-bit. So I want to use MessagePack support for 32-bit floating point values. This definitely exists. However, the default behaviour in Ruby on any 64-bit system is to serialise Float to 64 bits:</p>\n\n<pre><code>MessagePack.pack(10.3)\n =&gt; \"\\xCB@$\\x99\\x99\\x99\\x99\\x99\\x9A\"\n</code></pre>\n\n<p>Looking at MessagePack code, it seems there is a method <a href=\"http://ruby.msgpack.org/MessagePack/Packer.html#write_float32-instance_method\" rel=\"noreferrer\"><code>MessagePack::Packer#write_float32</code></a>, and this does what I expect:</p>\n\n<pre><code>MessagePack::DefaultFactory.packer.write_float32(10.3).to_s\n =&gt; \"\\xCAA$\\xCC\\xCD\"\n</code></pre>\n\n<p>. . . but I cannot find a way to set up either the default packer or create a new one, that will use this method when serialising a larger structure.</p>\n\n<p>As a test of my comprehension, I tried this:</p>\n\n<pre><code>class Float\n  def to_msgpack_ext\n    packer.write_float32(self)\n  end\n\n  def self.from_msgpack_ext s\n    unpacker.read(s)\n  end\nend\n\nMessagePack::DefaultFactory.register_type(0, Float )\n\nMessagePack.pack(10.3)\n =&gt; \"\\xCB@$\\x99\\x99\\x99\\x99\\x99\\x9A\"\n</code></pre>\n\n<p>No difference at all . . . clearly I am missing or misunderstanding something about the object model used in MessagePack. Is what I want to do possible, and what do I need to do? </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rails-admin"], "comments": [{"owner": {"reputation": 3312, "user_id": 412528, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/7a781dab51284428bf9a44f3e0c85b6a?s=128&d=identicon&r=PG", "display_name": "Guillermo Siliceo Trueba", "link": "https://stackoverflow.com/users/412528/guillermo-siliceo-trueba"}, "edited": false, "score": 1, "creation_date": 1536194895, "post_id": 52182454, "comment_id": 91339636, "body": "I&#39;m afraid you have to define them manually, you could use some metaprogramming to do it, if you are willing i could add an answer with that approach."}, {"owner": {"reputation": 106, "user_id": 7987618, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pxqZ6.jpg?s=128&g=1", "display_name": "ethaning", "link": "https://stackoverflow.com/users/7987618/ethaning"}, "reply_to_user": {"reputation": 3312, "user_id": 412528, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/7a781dab51284428bf9a44f3e0c85b6a?s=128&d=identicon&r=PG", "display_name": "Guillermo Siliceo Trueba", "link": "https://stackoverflow.com/users/412528/guillermo-siliceo-trueba"}, "edited": false, "score": 0, "creation_date": 1536219573, "post_id": 52182454, "comment_id": 91346760, "body": "In the end, I did define the fields manually. Feel free to add an answer with a metaprogramming approach. It would be interesting to see what you come up with :)"}], "owner": {"reputation": 106, "user_id": 7987618, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pxqZ6.jpg?s=128&g=1", "display_name": "ethaning", "link": "https://stackoverflow.com/users/7987618/ethaning"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 37, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1536141915, "creation_date": 1536141915, "question_id": 52182454, "link": "https://stackoverflow.com/questions/52182454/include-all-remaining-fields-in-railsadmin-group", "title": "Include all remaining fields in RailsAdmin group", "body": "<p>When used outside of a group block, <code>include_all_fields</code> will render all of the remaining fields which have not been written explicitly in the CRUD action block.</p>\n\n<p>Is there a way to use the method <code>include_all_fields</code> in a RailsAdmin group? Or somehow render all remaining fields, which haven't been rendered in other groups in the same CRUD action block?</p>\n\n<p>e.g.</p>\n\n<pre><code>module DummyAdmin\n  extend ActiveSupport::Concern\n\n  included do\n    rails_admin do\n      edit do\n        group :first_group do\n          field :some_field\n        end\n\n        group :second_group do\n          field :another_field\n          field :yet_another_field\n        end\n\n        group :group_containing_all_other_fields do\n          include_all_fields # this renders an error\n          # I'm looking for some other way to render all remaining fields inside this group block\n        end\n      end\n    end\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "twitter"], "comments": [{"owner": {"reputation": 1831, "user_id": 4160532, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Ey34JagqMzQ/AAAAAAAAAAI/AAAAAAAAABo/G70W8D2LXM4/photo.jpg?sz=128", "display_name": "Kedarnag Mukanahallipatna", "link": "https://stackoverflow.com/users/4160532/kedarnag-mukanahallipatna"}, "edited": false, "score": 0, "creation_date": 1536135937, "post_id": 52180124, "comment_id": 91310866, "body": "<code>twurl</code> is like personalized version of  <code>curl</code> for twitter API. Run the command in your terminal and not rails console."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 8288697, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-frsIKPZDgF0/AAAAAAAAAAI/AAAAAAAAFIQ/R50vNKDSA5Q/photo.jpg?sz=128", "display_name": "Amit Dhoundiyal", "link": "https://stackoverflow.com/users/8288697/amit-dhoundiyal"}, "edited": false, "score": 0, "creation_date": 1536138623, "post_id": 52180265, "comment_id": 91312572, "body": "is there any way to upload our media from project using this twirl api in ruby on rails ?"}, {"owner": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "reply_to_user": {"reputation": 1, "user_id": 8288697, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-frsIKPZDgF0/AAAAAAAAAAI/AAAAAAAAFIQ/R50vNKDSA5Q/photo.jpg?sz=128", "display_name": "Amit Dhoundiyal", "link": "https://stackoverflow.com/users/8288697/amit-dhoundiyal"}, "edited": false, "score": 1, "creation_date": 1536139905, "post_id": 52180265, "comment_id": 91313460, "body": "<code>twurl</code> not suppose to be used with ruby on rails."}, {"owner": {"reputation": 1831, "user_id": 4160532, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Ey34JagqMzQ/AAAAAAAAAAI/AAAAAAAAABo/G70W8D2LXM4/photo.jpg?sz=128", "display_name": "Kedarnag Mukanahallipatna", "link": "https://stackoverflow.com/users/4160532/kedarnag-mukanahallipatna"}, "edited": false, "score": 0, "creation_date": 1536162665, "post_id": 52180265, "comment_id": 91328016, "body": "If you want to upload a media without rails, you can try this <code>twurl -H upload.twitter.com &quot;&#47;1.1&#47;media&#47;upload.json&quot; -f ~&#47;Downloads&#47;file_name.jpg -F media -X POST</code>"}, {"owner": {"reputation": 1, "user_id": 8288697, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-frsIKPZDgF0/AAAAAAAAAAI/AAAAAAAAFIQ/R50vNKDSA5Q/photo.jpg?sz=128", "display_name": "Amit Dhoundiyal", "link": "https://stackoverflow.com/users/8288697/amit-dhoundiyal"}, "edited": false, "score": 0, "creation_date": 1536226932, "post_id": 52180265, "comment_id": 91351242, "body": "But i want to upload video on twitter using rails. Please help!"}], "tags": [], "owner": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "is_accepted": true, "score": 0, "last_activity_date": 1536135056, "creation_date": 1536135056, "answer_id": 52180265, "question_id": 52180124, "link": "https://stackoverflow.com/questions/52180124/twitter-error-on-rails-console-while-using-twurl-api/52180265#52180265", "title": "twitter error on rails console while using twurl api", "body": "<p>That's command is not for Rails console, it's for bash shell command line, you can just paste it to the Rails console and run. You can run it from bash shell:</p>\n\n<pre><code>$&gt; twurl -H upload.twitter.com \"/1.1/media/upload.json\" -d \"command=APPEND&amp;media_id=1037245714940747777&amp;segment_index=0\" --file /home/administrator/Downloads/s.mp4 --file-field \"media\" -t\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 8288697, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-frsIKPZDgF0/AAAAAAAAAAI/AAAAAAAAFIQ/R50vNKDSA5Q/photo.jpg?sz=128", "display_name": "Amit Dhoundiyal", "link": "https://stackoverflow.com/users/8288697/amit-dhoundiyal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 98, "favorite_count": 0, "accepted_answer_id": 52180265, "answer_count": 1, "score": 0, "last_activity_date": 1536136240, "creation_date": 1536134594, "last_edit_date": 1536136240, "question_id": 52180124, "link": "https://stackoverflow.com/questions/52180124/twitter-error-on-rails-console-while-using-twurl-api", "title": "twitter error on rails console while using twurl api", "body": "<p>I am trying to upload a media on twitter with below command from my rails console .</p>\n\n<blockquote>\n  <p>ActiveSupport::JSON.decode(<code>twurl -H upload.twitter.com\n  \"/1.1/media/upload.json\" -d\n  \"command=APPEND&amp;media_id=1037245714940747777&amp;segment_index=0\" --file\n  /home/administrator/Downloads/s.mp4 --file-field \"media\" -t</code>) and\n  Getting the error-: JSON::ParserError: 822: unexpected token at ''</p>\n</blockquote>\n\n<p>I am getting error of JSON parsning, Please help me to solve this problem.</p>\n"}, {"tags": ["ruby", "file"], "answers": [{"tags": [], "owner": {"reputation": 505, "user_id": 4307872, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/6375140fec452c7e7b5cd043495adefe?s=128&d=identicon&r=PG&f=1", "display_name": "von spotz", "link": "https://stackoverflow.com/users/4307872/von-spotz"}, "is_accepted": false, "score": 0, "last_activity_date": 1536132132, "creation_date": 1536132132, "answer_id": 52179337, "question_id": 52178951, "link": "https://stackoverflow.com/questions/52178951/ruby-file-not-created-new-when-created-multiple-times-in-an-each-loop/52179337#52179337", "title": "ruby file not created new when &quot;created&quot; multiple times in an each loop", "body": "<p>Found my mistake. I didn't empty the buffer (and the buffer isn't local to a block !)</p>\n\n<pre><code># load file in buffer\nfh = File.open(file,\"r+:UTF-8\")\n\nwhile (line = fh.gets) \nfile_buffer += line\nend\n\nfh.close\n</code></pre>\n\n<p>The thread can be closed. Sorry for wasting your time.</p>\n"}], "owner": {"reputation": 505, "user_id": 4307872, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/6375140fec452c7e7b5cd043495adefe?s=128&d=identicon&r=PG&f=1", "display_name": "von spotz", "link": "https://stackoverflow.com/users/4307872/von-spotz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 35, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1536132132, "creation_date": 1536130795, "last_edit_date": 1536131941, "question_id": 52178951, "link": "https://stackoverflow.com/questions/52178951/ruby-file-not-created-new-when-created-multiple-times-in-an-each-loop", "title": "ruby file not created new when &quot;created&quot; multiple times in an each loop", "body": "<p>I try to run a regex over the files of some subfolder. Obviously this leads to unwanted behaviour. It seems that ruby doesn't create the temporary file new but that it would just re-open and continue. Every time I run the script the whole file (or multiple files?) seem to be appended and grow and grow and grow.</p>\n\n<p>The first step of my strategy is like follows</p>\n\n<ol>\n<li>I discover the files in the subdirectories via Dir.glob, save the full_paths in an array and read the files into a buffer file in an each loop.</li>\n<li>I close the file and run the regex over the buffer</li>\n</ol>\n\n<p>The second step consists of</p>\n\n<ol>\n<li>in another each loop over the array consisting of the full-paths of the files I want to manipulate,</li>\n<li>I create a temporary file in the same folder. every time with the same name,</li>\n<li>delete the original file,</li>\n<li>write the regex'ed buffer into the temporary file,</li>\n<li>rename the temporary file after the original file.</li>\n</ol>\n\n<p>So:\nIn the same directory as the original file</p>\n\n<pre><code>fh2 = File.new(temp_filename, \"w:UTF-8\")\ncount = fh2.write(file_buffer)\nputs \"That was #{count} bytes of data to #{temp_filename}\"\nfh2.close\n</code></pre>\n\n<p><code>count</code> grows continuously greater with each file that is manipulated/created this way.</p>\n\n<p>Could it be, that it doesn't create a fresh temp-file because of the same file_handle, the same name or the <code>w</code>-option together with <code>File.new</code>?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "heroku", "bitbucket", "web-deployment"], "comments": [{"owner": {"reputation": 6207, "user_id": 5117953, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/Ca0RW.jpg?s=128&g=1", "display_name": "Vishal", "link": "https://stackoverflow.com/users/5117953/vishal"}, "edited": false, "score": 0, "creation_date": 1536127081, "post_id": 52177729, "comment_id": 91306013, "body": "in production.rb , set <code>config.assets_precompile: true</code>"}, {"owner": {"reputation": 1, "user_id": 10318082, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a495cb6794d54ce8b6c7c609c2f40a3?s=128&d=identicon&r=PG&f=1", "display_name": "Charles Luu", "link": "https://stackoverflow.com/users/10318082/charles-luu"}, "reply_to_user": {"reputation": 6207, "user_id": 5117953, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/Ca0RW.jpg?s=128&g=1", "display_name": "Vishal", "link": "https://stackoverflow.com/users/5117953/vishal"}, "edited": false, "score": 0, "creation_date": 1536127371, "post_id": 52177729, "comment_id": 91306143, "body": "i already try that and it still not working, same error"}, {"owner": {"reputation": 6207, "user_id": 5117953, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/Ca0RW.jpg?s=128&g=1", "display_name": "Vishal", "link": "https://stackoverflow.com/users/5117953/vishal"}, "edited": false, "score": 0, "creation_date": 1536127859, "post_id": 52177729, "comment_id": 91306370, "body": "do &quot;RAILS_ENV=production rake assets:precompile&quot; then try to push code"}, {"owner": {"reputation": 1140, "user_id": 3248148, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CLgGs.jpg?s=128&g=1", "display_name": "praaveen V R", "link": "https://stackoverflow.com/users/3248148/praaveen-v-r"}, "edited": false, "score": 0, "creation_date": 1536130455, "post_id": 52177729, "comment_id": 91307730, "body": "this may help youhttps://devcenter.heroku.com/articles/rails-4-asset-pipel&zwnj;&#8203;ine"}], "answers": [{"tags": [], "owner": {"reputation": 1682, "user_id": 6392696, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/09WDQ.jpg?s=128&g=1", "display_name": "nourza", "link": "https://stackoverflow.com/users/6392696/nourza"}, "is_accepted": false, "score": 0, "last_activity_date": 1536128991, "creation_date": 1536128991, "answer_id": 52178466, "question_id": 52177729, "link": "https://stackoverflow.com/questions/52177729/failed-to-deploy-ruby-app-to-heroku-precompling-assets-failed/52178466#52178466", "title": "Failed to deploy ruby app to heroku &quot;Precompling assets failed&quot;", "body": "<p>I had the same error and when I delete the pubic folder then <code>$rake assets:precompile</code> then <code>$git add -A $git commit -m \"commit</code>\" <code>$git push heroku master</code></p>\n"}], "owner": {"reputation": 1, "user_id": 10318082, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a495cb6794d54ce8b6c7c609c2f40a3?s=128&d=identicon&r=PG&f=1", "display_name": "Charles Luu", "link": "https://stackoverflow.com/users/10318082/charles-luu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 31, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1536130607, "creation_date": 1536125675, "last_edit_date": 1536130607, "question_id": 52177729, "link": "https://stackoverflow.com/questions/52177729/failed-to-deploy-ruby-app-to-heroku-precompling-assets-failed", "title": "Failed to deploy ruby app to heroku &quot;Precompling assets failed&quot;", "body": "<p>I've tried to deploy a Rails app to Heroku using Bitbucket, however, it shows an error that my ruby app can not compile.</p>\n\n<p><a href=\"https://i.stack.imgur.com/jEcEj.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/jEcEj.png\" alt=\"enter image description here\"></a></p>\n\n<p>I followed the instruction within this article. \n<a href=\"https://medium.com/beginners-guide-to-mobile-web-development/auto-deployment-using-bitbucket-and-heroku-521b4271cc27\" rel=\"nofollow noreferrer\">Auto-Deployment Using Bitbucket and Heroku</a></p>\n\n<p>My <code>pipeline.yml</code> file looks like this:</p>\n\n<pre><code>image: ruby:2.4.0\nclone:\n  depth: full\npipelines:\n  default:\n    - step:\n        # set HEROKU_API_KEY and HEROKU_APP_NAME environment variables\n        # set clone `depth: full' as described here: https://confluence.atlassian.com/x/Y9-5Mw\n        name: Deploy to Heroku\n        deployment: test   # set to test, staging or production\n        # trigger: manual  # uncomment to have a manual step\n        script:\n          - git push https://heroku:$HerokuAPI@git.heroku.com/$HerokuName.git HEAD\n\ndefinitions:\n  caches:\n    bundler: ./vendor\n</code></pre>\n"}, {"tags": ["ruby", "debian", "redmine"], "answers": [{"comments": [{"owner": {"reputation": 371, "user_id": 7418158, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1cba92f73305cfd32403c683e8e54d27?s=128&d=identicon&r=PG", "display_name": "Jinto Antony", "link": "https://stackoverflow.com/users/7418158/jinto-antony"}, "edited": false, "score": 0, "creation_date": 1536153605, "post_id": 52184262, "comment_id": 91322012, "body": "Yes. I have done all this. It simple doesn&#39;t works. Any other suggestions...?"}, {"owner": {"reputation": 1928, "user_id": 6193734, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-yNKciMo2y_0/AAAAAAAAAAI/AAAAAAAACGs/Hg_DmZMu7Lw/photo.jpg?sz=128", "display_name": "Matthieu Libeer", "link": "https://stackoverflow.com/users/6193734/matthieu-libeer"}, "reply_to_user": {"reputation": 371, "user_id": 7418158, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1cba92f73305cfd32403c683e8e54d27?s=128&d=identicon&r=PG", "display_name": "Jinto Antony", "link": "https://stackoverflow.com/users/7418158/jinto-antony"}, "edited": false, "score": 0, "creation_date": 1536267760, "post_id": 52184262, "comment_id": 91373559, "body": "Can you check that the Gemfile specifies the right version of Nokogiri? Specify it otherwise. Nokogiri is also known to fail installing randomly. You can try adding a manual <code>sudo gem install nokogiri 1.8.4</code> after the <code>bundle install</code>, see if that helps."}, {"owner": {"reputation": 371, "user_id": 7418158, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1cba92f73305cfd32403c683e8e54d27?s=128&d=identicon&r=PG", "display_name": "Jinto Antony", "link": "https://stackoverflow.com/users/7418158/jinto-antony"}, "edited": false, "score": 0, "creation_date": 1536293592, "post_id": 52184262, "comment_id": 91379345, "body": "yes. I did and it is there. And again I installed using the same command. Not working. Can&#39;t figure out this one. I temporary dropped this. Will try to install again after testing on a VM."}], "tags": [], "owner": {"reputation": 1928, "user_id": 6193734, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-yNKciMo2y_0/AAAAAAAAAAI/AAAAAAAACGs/Hg_DmZMu7Lw/photo.jpg?sz=128", "display_name": "Matthieu Libeer", "link": "https://stackoverflow.com/users/6193734/matthieu-libeer"}, "is_accepted": false, "score": 0, "last_activity_date": 1536267826, "last_edit_date": 1536267826, "creation_date": 1536147572, "answer_id": 52184262, "question_id": 52177651, "link": "https://stackoverflow.com/questions/52177651/bundlergemnotfound-issue-after-installing-redmine-on-debian/52184262#52184262", "title": "Bundler::GemNotFound Issue after installing Redmine on Debian", "body": "<p>During the deployment of the app, there should be a step <code>bundle install</code>. This step is performed by a gem called <code>bundler</code>, that needs to be installed prior to this step. Add <code>gem install bundler</code> to install it. It looks at the files <code>Gemfile</code> and <code>Gemfile.lock</code> and install all the missing dependencies. Like a <code>package.json</code> for <code>npm install</code>. Remine must have a Gemfile somehwere. You should probably refer to their deployment wiki or contact them otherwise.</p>\n\n<p>You can also check that the Gemfile specifies the right version of Nokogiri. Specify it otherwise.</p>\n\n<p>Nokogiri is also known to fail installing randomly. You can try adding a manual <code>sudo gem install nokogiri 1.8.4</code> after <code>bundle install</code>, see if that helps.</p>\n"}], "owner": {"reputation": 371, "user_id": 7418158, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1cba92f73305cfd32403c683e8e54d27?s=128&d=identicon&r=PG", "display_name": "Jinto Antony", "link": "https://stackoverflow.com/users/7418158/jinto-antony"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 142, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1536267826, "creation_date": 1536125273, "question_id": 52177651, "link": "https://stackoverflow.com/questions/52177651/bundlergemnotfound-issue-after-installing-redmine-on-debian", "title": "Bundler::GemNotFound Issue after installing Redmine on Debian", "body": "<p>I am trying to install Remine on Debian server. Apache is the Http Server and MySql as database. Installation is complete. Its shows an error Could not find nokogiri-1.8.4 in any of the sources (Bundler::GemNotFound). \nI haven't hosted an Ruby application before. \nTried most of the commands found on internet about this issue. \n<a href=\"http://redmine.donams.com/\" rel=\"nofollow noreferrer\">This is the URL</a> where you can see the issue. </p>\n\n<p><a href=\"https://i.stack.imgur.com/VILYM.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/VILYM.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rubygems"], "comments": [{"owner": {"reputation": 784, "user_id": 7970365, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30ea30f5ef13a4593ad0eafd20304601?s=128&d=identicon&r=PG", "display_name": "D1ceWard", "link": "https://stackoverflow.com/users/7970365/d1ceward"}, "edited": false, "score": 1, "creation_date": 1536141483, "post_id": 52176625, "comment_id": 91314429, "body": "You have to use rails engine, <a href=\"https://guides.rubyonrails.org/engines.html\" rel=\"nofollow noreferrer\">guides.rubyonrails.org/engines.html</a>"}], "answers": [{"comments": [{"owner": {"reputation": 170, "user_id": 5389125, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MOQuJ.png?s=128&g=1", "display_name": "Rossman", "link": "https://stackoverflow.com/users/5389125/rossman"}, "edited": false, "score": 0, "creation_date": 1536279450, "post_id": 52182391, "comment_id": 91376721, "body": "While I could make an engine work, I&#39;m thinking I have to make a route, controller, and views.  This seems awfully heavy weight for a few static pages that could really just go in the &quot;public&quot; directory.  Is there another way that I could just package static pages in a gem and have them be used in a Rails app?"}], "tags": [], "owner": {"reputation": 1928, "user_id": 6193734, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-yNKciMo2y_0/AAAAAAAAAAI/AAAAAAAACGs/Hg_DmZMu7Lw/photo.jpg?sz=128", "display_name": "Matthieu Libeer", "link": "https://stackoverflow.com/users/6193734/matthieu-libeer"}, "is_accepted": false, "score": 1, "last_activity_date": 1536142214, "last_edit_date": 1536142214, "creation_date": 1536141701, "answer_id": 52182391, "question_id": 52176625, "link": "https://stackoverflow.com/questions/52176625/how-do-i-package-static-pages-for-rails-into-a-ruby-gem/52182391#52182391", "title": "How do I package static pages for Rails into a ruby gem?", "body": "<p>Having an application inside an application is probably a use case for <strong>engines</strong>. They basically allow defining views, routes, controllers, even models without conflicting with the application that consumes the gem. In your case I assume you would mostly use the view and route part.</p>\n\n<p>Official documentation (it's great): <a href=\"https://edgeguides.rubyonrails.org/engines.html\" rel=\"nofollow noreferrer\">https://edgeguides.rubyonrails.org/engines.html</a></p>\n\n<p>Examples of gems using routing:</p>\n\n<ol>\n<li>devise: <a href=\"https://github.com/plataformatec/devise\" rel=\"nofollow noreferrer\">https://github.com/plataformatec/devise</a></li>\n<li>ActionCable</li>\n<li>UserImpersonate <a href=\"https://github.com/userimpersonate/user_impersonate2\" rel=\"nofollow noreferrer\">https://github.com/userimpersonate/user_impersonate2</a></li>\n<li>Resque <a href=\"https://github.com/resque/resque\" rel=\"nofollow noreferrer\">https://github.com/resque/resque</a></li>\n</ol>\n"}], "owner": {"reputation": 170, "user_id": 5389125, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MOQuJ.png?s=128&g=1", "display_name": "Rossman", "link": "https://stackoverflow.com/users/5389125/rossman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1536142214, "creation_date": 1536118056, "question_id": 52176625, "link": "https://stackoverflow.com/questions/52176625/how-do-i-package-static-pages-for-rails-into-a-ruby-gem", "title": "How do I package static pages for Rails into a ruby gem?", "body": "<p>I want to create some static pages which will be accessed out of RAILS_ROOT/public and package them in their own gem which I can include in multiple Rails applications.  They're really just error pages, but I want them to be the same across all my applications.  Is there a way to do this?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "controller", "nested-resources"], "answers": [{"tags": [], "owner": {"reputation": 3627, "user_id": 3695939, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/d75f41bcfc1d3f20c084ec7e87d82012?s=128&d=identicon&r=PG&f=1", "display_name": "moondaisy", "link": "https://stackoverflow.com/users/3695939/moondaisy"}, "is_accepted": true, "score": 3, "last_activity_date": 1536114441, "creation_date": 1536114441, "answer_id": 52176241, "question_id": 52176189, "link": "https://stackoverflow.com/questions/52176189/recordnotfound-in-controlleredit/52176241#52176241", "title": "RecordNotFound in Controller#edit", "body": "<p>Try changing the <code>edit</code> action to:</p>\n\n<pre><code>def edit\n    @recipe = Recipe.find(params[:recipe_id])\n    @ingredient = @recipe.ingredients.find(params[:id])\nend\n</code></pre>\n\n<p>It seems to be the only difference with the rest of the methods. Plus, since you are in the <code>IngredientsController</code> the <code>params[:id]</code> is the <code>id</code> of the Ingredient, not of the Recipe. </p>\n\n<p>You don't seem to have a <code>Recipe</code> with that <code>id</code>, that's why <code>Recipe.find(params[:id])</code> throws an error. Otherwise it wouldn't fail but the ingredient would end up in a totally different recipe.</p>\n"}], "owner": {"reputation": 77, "user_id": 10304792, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/390a35e9e2e8a287a260f9569e8a1483?s=128&d=identicon&r=PG&f=1", "display_name": "dsteinbr1", "link": "https://stackoverflow.com/users/10304792/dsteinbr1"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "accepted_answer_id": 52176241, "answer_count": 1, "score": 0, "last_activity_date": 1536125507, "creation_date": 1536113878, "last_edit_date": 1536125507, "question_id": 52176189, "link": "https://stackoverflow.com/questions/52176189/recordnotfound-in-controlleredit", "title": "RecordNotFound in Controller#edit", "body": "<p>I am attempting to create an edit action in a controller for a nested resource. When I attempt to run the Edit action, I receive the following Error:</p>\n\n<pre><code>ActiveRecord::RecordNotFound in IngredientsController#edit\nCouldn't find Recipe with 'id'=287\n</code></pre>\n\n<p>Below is my controller:</p>\n\n<pre><code>class IngredientsController &lt; ApplicationController\n  def edit\n    @recipe = Recipe.find(params[:id])\n    @ingredient = @recipe.ingredients.find(params[:id])\n  end\nend\n</code></pre>\n\n<p>And my link to the Edit:</p>\n\n<pre><code>%= link_to 'Edit Ingredient', edit_recipe_ingredient_path(@recipe, ingredient) %&gt;\n</code></pre>\n\n<p>Any ideas what may be causing this? Please let me know if any other code is needed to give context to the problem. Thank You!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord", "ruby-on-rails-5"], "answers": [{"comments": [{"owner": {"reputation": 67463, "user_id": 203130, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/1RE8c.jpg?s=128&g=1", "display_name": "coreyward", "link": "https://stackoverflow.com/users/203130/coreyward"}, "edited": false, "score": 0, "creation_date": 1536111906, "post_id": 52175849, "comment_id": 91302499, "body": "<code>t.index</code> inside of the <code>create_table</code> block is acceptable: <a href=\"https://edgeapi.rubyonrails.org/classes/ActiveRecord/ConnectionAdapters/Table.html#method-i-index\" rel=\"nofollow noreferrer\">edgeapi.rubyonrails.org/classes/ActiveRecord/ConnectionAdapt&zwnj;&#8203;ers/&hellip;</a>"}, {"owner": {"reputation": 506, "user_id": 9727896, "user_type": "registered", "profile_image": "https://graph.facebook.com/870963749742883/picture?type=large", "display_name": "Agust&#237;n Nieto Garc&#237;a", "link": "https://stackoverflow.com/users/9727896/agust%c3%adn-nieto-garc%c3%ada"}, "reply_to_user": {"reputation": 67463, "user_id": 203130, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/1RE8c.jpg?s=128&g=1", "display_name": "coreyward", "link": "https://stackoverflow.com/users/203130/coreyward"}, "edited": false, "score": 0, "creation_date": 1536118366, "post_id": 52175849, "comment_id": 91303646, "body": "@coreyward, that&#39;s true. Either way I get the same weird result."}], "tags": [], "owner": {"reputation": 706, "user_id": 6492146, "user_type": "registered", "accept_rate": 82, "profile_image": "https://graph.facebook.com/10157001409455137/picture?type=large", "display_name": "Verty00", "link": "https://stackoverflow.com/users/6492146/verty00"}, "is_accepted": false, "score": 1, "last_activity_date": 1536110692, "creation_date": 1536110692, "answer_id": 52175849, "question_id": 52175809, "link": "https://stackoverflow.com/questions/52175809/getting-nil-nil-in-multicolumn-index-in-rails/52175849#52175849", "title": "Getting [nil, nil] in multicolumn index in Rails", "body": "<p>you need to remove this...</p>\n\n<pre><code>t.index [:student, :subject]\n</code></pre>\n\n<p>and add this...</p>\n\n<pre><code>class CreateStudentHasSubjects &lt; ActiveRecord::Migration[5.2]                                                                                                            \n  def change                                                                                                                                                             \n    create_table :student_has_subjects do |t|                                                                                                                            \n      t.references :student, null: false, foreign_key: true                                                                                                              \n      t.references :subject, null: false, foreign_key: true                                                                                                              \n      t.boolean :is_active, null: false, default: true                                                                                                                                                                                                                                            \n\n      t.timestamps                                                                                                                                                       \n    end  \n\n    add_index :student_has_subjects, [:student, :subject]                                                                                                                                                 \n  end                                                                                                                                                                    \nend  \n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 506, "user_id": 9727896, "user_type": "registered", "profile_image": "https://graph.facebook.com/870963749742883/picture?type=large", "display_name": "Agust&#237;n Nieto Garc&#237;a", "link": "https://stackoverflow.com/users/9727896/agust%c3%adn-nieto-garc%c3%ada"}, "edited": false, "score": 0, "creation_date": 1536170218, "post_id": 52184694, "comment_id": 91331710, "body": "That&#39;s it. Thanks!"}], "tags": [], "owner": {"reputation": 1928, "user_id": 6193734, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-yNKciMo2y_0/AAAAAAAAAAI/AAAAAAAACGs/Hg_DmZMu7Lw/photo.jpg?sz=128", "display_name": "Matthieu Libeer", "link": "https://stackoverflow.com/users/6193734/matthieu-libeer"}, "is_accepted": true, "score": 1, "last_activity_date": 1536149055, "creation_date": 1536149055, "answer_id": 52184694, "question_id": 52175809, "link": "https://stackoverflow.com/questions/52175809/getting-nil-nil-in-multicolumn-index-in-rails/52184694#52184694", "title": "Getting [nil, nil] in multicolumn index in Rails", "body": "<p>This happens because you use the reference names instead of the column names. According to the <a href=\"https://github.com/rails/rails/blob/master/activerecord%2Flib%2Factive_record%2Fconnection_adapters%2Fabstract%2Fschema_definitions.rb#L169\" rel=\"nofollow noreferrer\">source code</a>, <code>t.index</code> only supports columns names.</p>\n\n<p>Also note that if you add a multi-column index on <code>student_id</code> and <code>subject_id</code>, the first index on <code>student_id</code> is probably redundant. That's the case for PostgreSQL at least.</p>\n"}], "owner": {"reputation": 506, "user_id": 9727896, "user_type": "registered", "profile_image": "https://graph.facebook.com/870963749742883/picture?type=large", "display_name": "Agust&#237;n Nieto Garc&#237;a", "link": "https://stackoverflow.com/users/9727896/agust%c3%adn-nieto-garc%c3%ada"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 92, "favorite_count": 1, "accepted_answer_id": 52184694, "answer_count": 2, "score": 1, "last_activity_date": 1536149055, "creation_date": 1536110353, "question_id": 52175809, "link": "https://stackoverflow.com/questions/52175809/getting-nil-nil-in-multicolumn-index-in-rails", "title": "Getting [nil, nil] in multicolumn index in Rails", "body": "<p>I have this:</p>\n\n<pre><code>class CreateStudentHasSubjects &lt; ActiveRecord::Migration[5.2]                                                                                                            \n  def change                                                                                                                                                             \n    create_table :student_has_subjects do |t|                                                                                                                            \n      t.references :student, null: false, foreign_key: true                                                                                                              \n      t.references :subject, null: false, foreign_key: true                                                                                                              \n      t.boolean :is_active, null: false, default: true                                                                                                                   \n\n      t.index [:student, :subject] #Here's where the question comes in.                                                                                                                                       \n\n      t.timestamps                                                                                                                                                       \n    end                                                                                                                                                                  \n  end                                                                                                                                                                    \nend        \n</code></pre>\n\n<p>and when I execute <code>$ rails db:migrate</code> I get, in the <code>schema.rb</code> file:</p>\n\n<pre><code>create_table \"student_has_subjects\", force: :cascade do |t|                                                                                                            \n    t.integer \"student_id\", null: false                                                                                                                                  \n    t.integer \"subject_id\", null: false                                                                                                                                  \n    t.boolean \"is_active\", default: true, null: false                                                                                                                    \n    t.datetime \"created_at\", null: false                                                                                                                                 \n    t.datetime \"updated_at\", null: false                                                                                                                                 \n    t.index [\"student_id\"], name: \"index_student_has_subjects_on_student_id\"                                                                                             \n    t.index [\"subject_id\"], name: \"index_student_has_subjects_on_subject_id\"                                                                                             \n    t.index [nil, nil], name: \"index_student_has_subjects_on_student_and_subject\" #WTF? [nil, nil]                                                                                        \n  end\n</code></pre>\n\n<p>That <code>[nil, nil]</code> kind of scares me. Can anyone explain me why do I get that instead of:</p>\n\n<pre><code>t.index [\"student_id\", \"subject_id\"], name: \"index_student_has_subjects_on_student_and_subject\"\n</code></pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "edited": false, "score": 0, "creation_date": 1536130131, "post_id": 52175606, "comment_id": 91307566, "body": "See this: <a href=\"https://stackoverflow.com/questions/27702540/why-are-there-frozen-constants-everywhere\" title=\"why are there frozen constants everywhere\">stackoverflow.com/questions/27702540/&hellip;</a> ant this (not Ruby but the concept should be the same): <a href=\"https://stackoverflow.com/questions/33124058/object-freeze-vs-const\" title=\"object freeze vs const\">stackoverflow.com/questions/33124058/object-freeze-vs-const</a>"}], "answers": [{"tags": [], "owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "is_accepted": false, "score": 1, "last_activity_date": 1536125197, "creation_date": 1536125197, "answer_id": 52177638, "question_id": 52175606, "link": "https://stackoverflow.com/questions/52175606/im-trying-to-understand-the-freeze-concept-in-ruby/52177638#52177638", "title": "Im trying to understand the .freeze concept in Ruby.", "body": "<p>Here are some methods that mutate strings: <code>&lt;&lt;</code>, <code>gsub!</code>, <code>downcase!</code>, <code>replace</code>...</p>\n\n<p>Let's say there is a website, \"Chitter\", where users post \"cheets\" about their daily life. Let's assume Chitter account names are normal names, just lowercased and with underscores instead of spaces (which is silly, but this is a silly example, so just roll with it). You want to get a user's cheets via the website's API; you want to display \"Hello, Amadan! Here are your cheets:\" and show you what it found. You look around, and there's a library for it! Awesome. So you <code>gem install</code> it and start coding:</p>\n\n<pre><code>require 'chitter'\nprint \"What is your name? \"\nname = gets\nchitter = Chitter.login_by_name(name)\nputs \"Hello, #{name}! Here are your cheets:\"\nputs chitter.cheets\n</code></pre>\n\n<p>I input <code>Amadan</code>, expecting <code>Hello, Amadan</code> - but out comes <code>Hello, amadan</code>, lowercased! How could that happen?</p>\n\n<p>It seems that our imaginary <code>Chitter</code> gem had this line in its <code>login_by_name</code>:</p>\n\n<pre><code>name.gsub!(' ', '_').downcase!\n</code></pre>\n\n<p>Here you go, unexpected string mutation. To be sure, the fault is entirely on me, the author of the imaginary Chitter gem, because if that line was</p>\n\n<pre><code>name = name.gsub(' ', '_').downcase\n</code></pre>\n\n<p>or even</p>\n\n<pre><code>name = name.dup.gsub!(' ', '_').downcase!\n</code></pre>\n\n<p>there would have been no problem, the user wouldn't have been insulted by decapitalisation. But if their test suite included <code>Chitter.login_by_name(\"testname\".freeze)</code>, their test would experience an exception when those mutators tried their mutating.</p>\n\n<p>The same thing might work in reverse. Take this snippet for example:</p>\n\n<pre><code>require 'chitter'\nprint \"What is your name? \"\nname = gets\nchitter = Chitter.login_by_name(name)\nbest_friend = chitter.best_friend\nbest_friend.name.upcase!\nputs \"Shoutout to your BEST FRIEND, #{best_friend.name}! Here's some of their cheets:\"\nputs chitter.best_friend.cheets\n</code></pre>\n\n<p>And pandemonium erupts, because suddenly your best friend doesn't have a Cheeter account! Why? Because apparently someone forgot to <code>freeze</code> the <code>name</code> inside the object returned by <code>chitter.best_friend</code>. The user then modified the said name by <code>upcase!</code>, and then the library tried to access the cheets by the uppercased name, and failed. The problem's root is</p>\n\n<pre><code>class Cheeter::User\n  def initialize(name)\n    @name = name\n  end\n  ...\n  attr_reader :name\n  ...\nend\n</code></pre>\n\n<p>If the initialization said <code>@name = name.freeze</code>, then we couldn't <code>upcase!</code> it. If we had this method instead of <code>attr_reader</code>:</p>\n\n<pre><code>def name\n  @name.dup\nend\n</code></pre>\n\n<p>then running <code>upcase!</code> on it would not matter, the name that the library works with would not be changed. But since <code>cheeter.best_friend.name</code> returned exactly the object that it was working with, and didn't <code>freeze</code> it, we threw a monkey wrench into its operation when we mutated it, thinking it's ours to do with as we please.</p>\n\n<p>EDIT: It seems \"Chitter\" actually exists. Rather than rename my example and risk hitting another real application, my apologies to Chitter creator, all similarities are coincidental, and I am certain that the real Chitter isn't so horribly designed as mine.</p>\n"}, {"tags": [], "owner": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "is_accepted": false, "score": 4, "last_activity_date": 1536133053, "last_edit_date": 1536133053, "creation_date": 1536131078, "answer_id": 52179033, "question_id": 52175606, "link": "https://stackoverflow.com/questions/52175606/im-trying-to-understand-the-freeze-concept-in-ruby/52179033#52179033", "title": "Im trying to understand the .freeze concept in Ruby.", "body": "<p>An example on how even <strong>an object referenced by a constant</strong> can mutate:</p>\n\n<pre><code>FOO = 'foo'\np FOO # =&gt; \"foo\"\nFOO.upcase!\np FOO # =&gt; \"FOO\" (no errors)\n\nBAR = 'bar'.freeze\np BAR # =&gt; \"BAR\"\nBAR.upcase! # =&gt; freeze.rb:8:in `upcase!': can't modify frozen String (RuntimeError)\n</code></pre>\n\n<p><code>freeze</code> the object referenced by the constant can prevent unexpected behaviour of the code, so a developer can fix it or whatever.</p>\n\n<p>To see that <code>freeze</code> freezes just the object, see that if a new value is assigned to the constant, the error thrown is different:</p>\n\n<pre><code>BAZ = 'baz'.freeze # =&gt; warning: previous definition of BAZ was here\nBAZ = 'bazbaz' # =&gt; warning: already initialized constant BAZ\n</code></pre>\n\n<p>Inspired by this topic: <a href=\"https://stackoverflow.com/questions/27702540/why-are-there-frozen-constants-everywhere\">Why are there frozen constants everywhere?</a></p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user10316795"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 90, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1536133053, "creation_date": 1536108213, "question_id": 52175606, "link": "https://stackoverflow.com/questions/52175606/im-trying-to-understand-the-freeze-concept-in-ruby", "title": "Im trying to understand the .freeze concept in Ruby.", "body": "<p>Can anyone explain why a string would mutate unexpectedly. My mentor makes a bid deal about this but I dont really understand why. </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord"], "comments": [{"owner": {"reputation": 5292, "user_id": 2727267, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0e7c773908a4f6095f63cb9553bbc7af?s=128&d=identicon&r=PG", "display_name": "Beartech", "link": "https://stackoverflow.com/users/2727267/beartech"}, "edited": false, "score": 0, "creation_date": 1536109660, "post_id": 52174914, "comment_id": 91302138, "body": "Can you show the pertinent parts of alertas_controller.rb? specifically the function that has lines 39 and 41? It looks like whatever is on line 41 is what is causing your error. If you already have those lines in the code above can you indicate which lines they are? Also you could add <code>logger.debug &quot;value of foo is:#{@foo}&quot;</code> in your controller before the line giving you the error and check your console log to see if it is trying to save what you think it&#39;s saving. It says you are giving an argument to a method that does not expect one."}, {"owner": {"reputation": 362, "user_id": 7521284, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/dBvnp.jpg?s=128&g=1", "display_name": "Ulises", "link": "https://stackoverflow.com/users/7521284/ulises"}, "reply_to_user": {"reputation": 5292, "user_id": 2727267, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0e7c773908a4f6095f63cb9553bbc7af?s=128&d=identicon&r=PG", "display_name": "Beartech", "link": "https://stackoverflow.com/users/2727267/beartech"}, "edited": false, "score": 0, "creation_date": 1536160634, "post_id": 52174914, "comment_id": 91326847, "body": "Thanks for the reaply @Beartech, the problem was a field name that is a reserverd word"}], "answers": [{"comments": [{"owner": {"reputation": 362, "user_id": 7521284, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/dBvnp.jpg?s=128&g=1", "display_name": "Ulises", "link": "https://stackoverflow.com/users/7521284/ulises"}, "edited": false, "score": 1, "creation_date": 1536160622, "post_id": 52176372, "comment_id": 91326840, "body": "Thanks for the reaply @moondaisy, the problem was a field name that is a reserverd word"}], "tags": [], "owner": {"reputation": 3627, "user_id": 3695939, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/d75f41bcfc1d3f20c084ec7e87d82012?s=128&d=identicon&r=PG&f=1", "display_name": "moondaisy", "link": "https://stackoverflow.com/users/3695939/moondaisy"}, "is_accepted": false, "score": 0, "last_activity_date": 1536115860, "creation_date": 1536115860, "answer_id": 52176372, "question_id": 52174914, "link": "https://stackoverflow.com/questions/52174914/ruby-on-rails-save-on-model-has-many-to-has-many-doesnt-trigger-on-build/52176372#52176372", "title": "Ruby on Rails save on model has_many to has_many doesn&#39;t trigger on build", "body": "<p>Looking at the queries displayed by the error it seems that you haven't created an <code>Alerta</code> when calling <code>Alerta.find(1)</code> inside <code>savenoti</code>.</p>\n\n<p>Assuming that you haven't created the <code>Alerta</code> but you have already saved the Client, you could do:</p>\n\n<pre><code>def savenoti\n  begin\n   @cliente = Cliente.find(6)\n   alerta = Alerta.new # or a different builder if you have any info to save\n   @cliente.alertas.create(alerta) //this will create and save the `AlertasCliente` instance.\n  rescue =&gt; exception\n      puts exception.message\n      flash[:alert] = 'Error al enviar alerta.'\n      redirect_to action: 'index'\n  end\nend\n</code></pre>\n\n<p>If that isn't the case, and you already saved the <code>Alerta</code> to the database, then include the code in lines 39 and 41 as requested by @Beartech.</p>\n\n<p>In any case I would use the plain <code>.alerts</code> since it's clearer and that's the whole idea of declaring the <code>through: :alertas_clientes</code> on the model. There are more ways of creating a new record for a <code>many_to_many</code> association as explained <a href=\"https://stackoverflow.com/questions/7297338/how-to-add-records-to-has-many-through-association-in-rails\">here</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 5292, "user_id": 2727267, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0e7c773908a4f6095f63cb9553bbc7af?s=128&d=identicon&r=PG", "display_name": "Beartech", "link": "https://stackoverflow.com/users/2727267/beartech"}, "edited": false, "score": 0, "creation_date": 1536161323, "post_id": 52188558, "comment_id": 91327273, "body": "It&#39;s hard for it to know when you are using a reserved word since it just thinks you are using it the wrong way, LOL if that makes any sense. \ud83d\ude43 I keep this handy <a href=\"http://www.rubymagic.org/posts/ruby-and-rails-reserved-words\" rel=\"nofollow noreferrer\">rubymagic.org/posts/ruby-and-rails-reserved-words</a>"}, {"owner": {"reputation": 362, "user_id": 7521284, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/dBvnp.jpg?s=128&g=1", "display_name": "Ulises", "link": "https://stackoverflow.com/users/7521284/ulises"}, "reply_to_user": {"reputation": 5292, "user_id": 2727267, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0e7c773908a4f6095f63cb9553bbc7af?s=128&d=identicon&r=PG", "display_name": "Beartech", "link": "https://stackoverflow.com/users/2727267/beartech"}, "edited": false, "score": 0, "creation_date": 1536164690, "post_id": 52188558, "comment_id": 91329088, "body": "Maybe on the migration validate all the words xD, thats a lot stuff"}], "tags": [], "owner": {"reputation": 362, "user_id": 7521284, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/dBvnp.jpg?s=128&g=1", "display_name": "Ulises", "link": "https://stackoverflow.com/users/7521284/ulises"}, "is_accepted": true, "score": 1, "last_activity_date": 1536160574, "creation_date": 1536160574, "answer_id": 52188558, "question_id": 52174914, "link": "https://stackoverflow.com/questions/52174914/ruby-on-rails-save-on-model-has-many-to-has-many-doesnt-trigger-on-build/52188558#52188558", "title": "Ruby on Rails save on model has_many to has_many doesn&#39;t trigger on build", "body": "<p>I already know what really happend, the issue was a name field, all the relatiosn were good, but the problem was that the Model <strong>\"Alerta\"</strong> has a field called <strong>\"send\"</strong> that apparently is a reserved word of ruby. I changed to <strong>\"sended\"</strong> and all works fine.</p>\n\n<p>I know is strange but it would be nice if Rails can show that type of error.</p>\n"}], "owner": {"reputation": 362, "user_id": 7521284, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/dBvnp.jpg?s=128&g=1", "display_name": "Ulises", "link": "https://stackoverflow.com/users/7521284/ulises"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "accepted_answer_id": 52188558, "answer_count": 2, "score": 0, "last_activity_date": 1536160574, "creation_date": 1536101385, "last_edit_date": 1536103315, "question_id": 52174914, "link": "https://stackoverflow.com/questions/52174914/ruby-on-rails-save-on-model-has-many-to-has-many-doesnt-trigger-on-build", "title": "Ruby on Rails save on model has_many to has_many doesn&#39;t trigger on build", "body": "<p>We have this model called \"Cliente\" (cliente.rb):</p>\n\n<pre><code>class Cliente &lt; ApplicationRecord\n    has_many :clientes_hardwares\n    has_many :alertas_clientes\n    has_many :sucursales\n    has_many :alertas,   through: :alertas_clientes\n    has_many :hardwares, through: :clientes_hardwares\nend\n</code></pre>\n\n<p>The SQL table:</p>\n\n<p><a href=\"https://i.stack.imgur.com/KryIQ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/KryIQ.png\" alt=\"enter image description here\"></a></p>\n\n<p>And the model \"Alerta\" (alerta.rb):</p>\n\n<pre><code>class Alerta &lt; ApplicationRecord\n    has_many :alertas_clientes\n    has_many :clientes, through: :alertas_clientes\nend\n</code></pre>\n\n<p>The SQL Table:</p>\n\n<p><a href=\"https://i.stack.imgur.com/GjCJf.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/GjCJf.png\" alt=\"enter image description here\"></a></p>\n\n<p>And after that we created a join table.</p>\n\n<pre><code> class CreateJoinTableClientesAlertas &lt; ActiveRecord::Migration[5.2]\n  def change\n    create_join_table :clientes, :alertas do |t|\n      # t.index [:cliente_id, :alerta_id]\n      # t.index [:alerta_id, :cliente_id]\n    end\n  end\nend\n</code></pre>\n\n<p>The SQL table is  called \"alertas_clientes\" and his structure very simple </p>\n\n<p><a href=\"https://i.stack.imgur.com/agbcC.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/agbcC.png\" alt=\"enter image description here\"></a></p>\n\n<p>The model is file(alertas_cliente.rb):</p>\n\n<pre><code>class AlertasCliente &lt; ApplicationRecord\n    belongs_to :cliente\n    belongs_to :alerta\nend\n</code></pre>\n\n<p>We wanna save the relation on the table but the console doesn't show the actual error.</p>\n\n<pre><code> def savenoti\n        begin\n         @cliente = Cliente.find(6)\n         @cliente.alertas_clientes.build(\n            :alerta =&gt; Alerta.find(1)\n         )\n         @cliente.save\n        rescue =&gt; exception\n            puts exception.message\n            flash[:alert] = 'Error al enviar alerta.'\n            redirect_to action: 'index'\n        end\n    end\n</code></pre>\n\n<p>But the console shows:</p>\n\n<pre><code>Processing by AlertasController#sendnoti as HTML\n  Cliente Load (0.3ms)  SELECT  `clientes`.* FROM `clientes` WHERE `clientes`.`id` = 6 LIMIT 1\n  \u21b3 app/controllers/alertas_controller.rb:37\n  Alerta Load (0.2ms)  SELECT  `alerta`.* FROM `alerta` WHERE `alerta`.`id` = 1 LIMIT 1\n  \u21b3 app/controllers/alertas_controller.rb:39\n   (0.1ms)  BEGIN\n  \u21b3 app/controllers/alertas_controller.rb:41\n   (0.1ms)  ROLLBACK\n  \u21b3 app/controllers/alertas_controller.rb:41\nwrong number of arguments (given 1, expected 0)\n</code></pre>\n\n<p>Am i missing something?</p>\n\n<p>Regards in advance.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 706, "user_id": 6492146, "user_type": "registered", "accept_rate": 82, "profile_image": "https://graph.facebook.com/10157001409455137/picture?type=large", "display_name": "Verty00", "link": "https://stackoverflow.com/users/6492146/verty00"}, "edited": false, "score": 0, "creation_date": 1536101015, "post_id": 52174820, "comment_id": 91300569, "body": "You might want to paste some code showiong us how your class is setup. But just from glancing id say that It looks like the way your explaining this that the name of the attribute is <code>first_random</code>.  Can you please just post the entire class so I can reproduce the error."}, {"owner": {"reputation": 4075, "user_id": 2291357, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/dff442b2192921f04f324948d263e001?s=128&d=identicon&r=PG", "display_name": "Jerome", "link": "https://stackoverflow.com/users/2291357/jerome"}, "reply_to_user": {"reputation": 706, "user_id": 6492146, "user_type": "registered", "accept_rate": 82, "profile_image": "https://graph.facebook.com/10157001409455137/picture?type=large", "display_name": "Verty00", "link": "https://stackoverflow.com/users/6492146/verty00"}, "edited": false, "score": 1, "creation_date": 1536101162, "post_id": 52174820, "comment_id": 91300598, "body": "updated.  There is a misunderstanding <code>first_random</code> is NOT an attribute. It is an instanciation of a random attribute of that class, from that list."}, {"owner": {"reputation": 706, "user_id": 6492146, "user_type": "registered", "accept_rate": 82, "profile_image": "https://graph.facebook.com/10157001409455137/picture?type=large", "display_name": "Verty00", "link": "https://stackoverflow.com/users/6492146/verty00"}, "edited": false, "score": 0, "creation_date": 1536101444, "post_id": 52174820, "comment_id": 91300665, "body": "I see what you&#39;re doing now.  I would try adding <code>@text.send(first_random.to_s)</code>"}, {"owner": {"reputation": 4075, "user_id": 2291357, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/dff442b2192921f04f324948d263e001?s=128&d=identicon&r=PG", "display_name": "Jerome", "link": "https://stackoverflow.com/users/2291357/jerome"}, "reply_to_user": {"reputation": 706, "user_id": 6492146, "user_type": "registered", "accept_rate": 82, "profile_image": "https://graph.facebook.com/10157001409455137/picture?type=large", "display_name": "Verty00", "link": "https://stackoverflow.com/users/6492146/verty00"}, "edited": false, "score": 1, "creation_date": 1536101631, "post_id": 52174820, "comment_id": 91300709, "body": "...and you would be correct !  I&#39;ve been searching for this concise manner to do this for yonks!"}, {"owner": {"reputation": 706, "user_id": 6492146, "user_type": "registered", "accept_rate": 82, "profile_image": "https://graph.facebook.com/10157001409455137/picture?type=large", "display_name": "Verty00", "link": "https://stackoverflow.com/users/6492146/verty00"}, "edited": false, "score": 0, "creation_date": 1536101709, "post_id": 52174820, "comment_id": 91300727, "body": "Thanks. If I make it an answer will you accept it?"}, {"owner": {"reputation": 4075, "user_id": 2291357, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/dff442b2192921f04f324948d263e001?s=128&d=identicon&r=PG", "display_name": "Jerome", "link": "https://stackoverflow.com/users/2291357/jerome"}, "reply_to_user": {"reputation": 706, "user_id": 6492146, "user_type": "registered", "accept_rate": 82, "profile_image": "https://graph.facebook.com/10157001409455137/picture?type=large", "display_name": "Verty00", "link": "https://stackoverflow.com/users/6492146/verty00"}, "edited": false, "score": 0, "creation_date": 1536101737, "post_id": 52174820, "comment_id": 91300735, "body": "certainly. 4321"}, {"owner": {"reputation": 706, "user_id": 6492146, "user_type": "registered", "accept_rate": 82, "profile_image": "https://graph.facebook.com/10157001409455137/picture?type=large", "display_name": "Verty00", "link": "https://stackoverflow.com/users/6492146/verty00"}, "edited": false, "score": 1, "creation_date": 1536101838, "post_id": 52174820, "comment_id": 91300761, "body": "take a look at this info on <code>method_missing</code> <a href=\"https://www.leighhalliday.com/understanding-method-missing\" rel=\"nofollow noreferrer\">https://www.leighhalliday.com/understanding-method-missing</a>  and on <code>.send()</code>  <a href=\"https://apidock.com/ruby/Object/send\" rel=\"nofollow noreferrer\">https://apidock.com/ruby/Object/send</a>"}], "answers": [{"comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1536130036, "post_id": 52174966, "comment_id": 91307513, "body": "To avoid calling private methods, you can use <code>public_send</code> instead of <code>send</code>."}], "tags": [], "owner": {"reputation": 706, "user_id": 6492146, "user_type": "registered", "accept_rate": 82, "profile_image": "https://graph.facebook.com/10157001409455137/picture?type=large", "display_name": "Verty00", "link": "https://stackoverflow.com/users/6492146/verty00"}, "is_accepted": true, "score": 3, "last_activity_date": 1536109210, "last_edit_date": 1536109210, "creation_date": 1536101728, "answer_id": 52174966, "question_id": 52174820, "link": "https://stackoverflow.com/questions/52174820/extract-a-random-attribute-and-render-in-view/52174966#52174966", "title": "extract a random attribute and render in view", "body": "<p>I would try adding </p>\n\n<p><code>@text.send(first_random.to_sym)</code></p>\n\n<p>*edit: <code>.send()</code> will take a string or a symbol. I had written <code>.to_s</code> earlier but that was a mistake. I like to implicitly convert to a symbol when I use this method. Im not sure if there are performance benefits. Just as a matter of style. </p>\n"}, {"tags": [], "owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "is_accepted": false, "score": 5, "last_activity_date": 1536129685, "creation_date": 1536129685, "answer_id": 52178655, "question_id": 52174820, "link": "https://stackoverflow.com/questions/52174820/extract-a-random-attribute-and-render-in-view/52178655#52178655", "title": "extract a random attribute and render in view", "body": "<p>In Rails, you can access a model's attributes via its <a href=\"https://api.rubyonrails.org/classes/ActiveRecord/AttributeMethods/ClassMethods.html#method-i-attributes\" rel=\"noreferrer\"><code>attributes</code></a> method, e.g.:</p>\n\n<pre><code>@text.attributes['alt_1']\n</code></pre>\n\n<p>To get a random attribute based on your code:</p>\n\n<pre><code>first_random = %w[alt_1 alt_2 alt_3 alt_4 alt_5 alt_6].sample\n\n@text.attributes[first_random]\n</code></pre>\n"}], "owner": {"reputation": 4075, "user_id": 2291357, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/dff442b2192921f04f324948d263e001?s=128&d=identicon&r=PG", "display_name": "Jerome", "link": "https://stackoverflow.com/users/2291357/jerome"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 1, "accepted_answer_id": 52174966, "answer_count": 2, "score": 1, "last_activity_date": 1536129685, "creation_date": 1536100701, "last_edit_date": 1536101089, "question_id": 52174820, "link": "https://stackoverflow.com/questions/52174820/extract-a-random-attribute-and-render-in-view", "title": "extract a random attribute and render in view", "body": "<p>With a ruby function, one can extract a random value</p>\n\n<pre><code>first_random = [\"alt_1\", \"alt_2\", \"alt_3\", \"alt_4\", \"alt_5\", \"alt_6\"].sample\n</code></pre>\n\n<p>Class attributes are <code>alt_1, alt_2, alt_3, alt_4, alt_5, alt_6, name, created_at, updated_at</code></p>\n\n<p>These values represent attributes of a class.  They cannot be described within the array without the quotes to identify these as strings, AFAIK.  The goal is to invoke this random attribute in a view.  However,</p>\n\n<pre><code>@text.first_random\n</code></pre>\n\n<p>generates a method missing error as ruby is certainly passing along the quotes.</p>\n\n<p>How can this be overcome?</p>\n"}, {"tags": ["ruby", "refactoring", "each"], "comments": [{"owner": {"reputation": 2125, "user_id": 1446543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/934816c610f53abdab5f26510478bc24?s=128&d=identicon&r=PG", "display_name": "ForeverZer0", "link": "https://stackoverflow.com/users/1446543/foreverzer0"}, "edited": false, "score": 2, "creation_date": 1536104912, "post_id": 52174725, "comment_id": 91301345, "body": "Being that there is no pattern to the order of the variables within each inner loop, this makes refactoring here likely not possible/improvable. Even if so, it indicates you need some refactoring/restructuring to the design a layer above this, which isn&#39;t obvious with your current code sample. Could you perhaps include or explain the <code>build</code> method, or explain what exactly what end result you are trying to achieve?"}, {"owner": {"reputation": 314, "user_id": 9440171, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/d45BA.jpg?s=128&g=1", "display_name": "ashwood", "link": "https://stackoverflow.com/users/9440171/ashwood"}, "reply_to_user": {"reputation": 2125, "user_id": 1446543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/934816c610f53abdab5f26510478bc24?s=128&d=identicon&r=PG", "display_name": "ForeverZer0", "link": "https://stackoverflow.com/users/1446543/foreverzer0"}, "edited": false, "score": 0, "creation_date": 1536109757, "post_id": 52174725, "comment_id": 91302153, "body": "<code>build</code> is a method that&#39;s inputing the string into something else. I thought it would be clearer with a&#39;s and b&#39;s, but I&#39;ll edit the question to try and provide more information and a proper code sample."}, {"owner": {"reputation": 314, "user_id": 9440171, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/d45BA.jpg?s=128&g=1", "display_name": "ashwood", "link": "https://stackoverflow.com/users/9440171/ashwood"}, "reply_to_user": {"reputation": 2125, "user_id": 1446543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/934816c610f53abdab5f26510478bc24?s=128&d=identicon&r=PG", "display_name": "ForeverZer0", "link": "https://stackoverflow.com/users/1446543/foreverzer0"}, "edited": false, "score": 0, "creation_date": 1536116487, "post_id": 52174725, "comment_id": 91303259, "body": "@ForeverZer0 Please take a look and let me know what you think. I&#39;d appreciate any advice you can give!"}, {"owner": {"reputation": 2125, "user_id": 1446543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/934816c610f53abdab5f26510478bc24?s=128&d=identicon&r=PG", "display_name": "ForeverZer0", "link": "https://stackoverflow.com/users/1446543/foreverzer0"}, "edited": false, "score": 0, "creation_date": 1536117090, "post_id": 52174725, "comment_id": 91303391, "body": "Perhaps some sub-classing would help make things a bit more manageable, splitting some things into separate methods, such as <code>scientific_names</code> and <code>oil_types</code> loops, but really the most helpful thing would be to plan out your design hierarchy first and then implement, instead of implementing, then trying to add to it. Using properly planned hierarchy, you can start with the most basic, then subclass and add functionality for more specific functionality. Also, does this need to be a hash, or could you convert it to a class?"}, {"owner": {"reputation": 314, "user_id": 9440171, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/d45BA.jpg?s=128&g=1", "display_name": "ashwood", "link": "https://stackoverflow.com/users/9440171/ashwood"}, "reply_to_user": {"reputation": 2125, "user_id": 1446543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/934816c610f53abdab5f26510478bc24?s=128&d=identicon&r=PG", "display_name": "ForeverZer0", "link": "https://stackoverflow.com/users/1446543/foreverzer0"}, "edited": false, "score": 0, "creation_date": 1536118564, "post_id": 52174725, "comment_id": 91303688, "body": "Does what need to be a hash? The code could have definitely been planned out better. It started as a small attempt to simplify an unmanageable amount of seeds. It could probably use proper planning before it gets unwieldy while implementing the other seed classes. What do you think of my updated solution?"}, {"owner": {"reputation": 2125, "user_id": 1446543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/934816c610f53abdab5f26510478bc24?s=128&d=identicon&r=PG", "display_name": "ForeverZer0", "link": "https://stackoverflow.com/users/1446543/foreverzer0"}, "edited": false, "score": 1, "creation_date": 1536119760, "post_id": 52174725, "comment_id": 91303907, "body": "Disregard my hash comment, I misread a part of it :P Seems to be an improvement. I might even separate the method, one to build the <code>combinations</code>, another the <code>full_names</code>. This way if you need to change any functionality for a specific situation, it becomes much easier, and makes the code more flexible and maintainable."}, {"owner": {"reputation": 314, "user_id": 9440171, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/d45BA.jpg?s=128&g=1", "display_name": "ashwood", "link": "https://stackoverflow.com/users/9440171/ashwood"}, "reply_to_user": {"reputation": 2125, "user_id": 1446543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/934816c610f53abdab5f26510478bc24?s=128&d=identicon&r=PG", "display_name": "ForeverZer0", "link": "https://stackoverflow.com/users/1446543/foreverzer0"}, "edited": false, "score": 0, "creation_date": 1536121700, "post_id": 52174725, "comment_id": 91304309, "body": "No worries. It looks loads better now! This was exactly the kind of adjustment I was looking for. I&#39;ll try applying the same logic to the rest of the code.  Thanks so much for your advice!"}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 1, "creation_date": 1536157130, "post_id": 52174725, "comment_id": 91324439, "body": "As an aside <code>collect</code> will create an <code>Array</code> that you are not using at all. Either change this to <code>each</code> or use something like <code>flat_map</code> e.g. <code>generate_combinations(components).flat_map {|on, sn, ot, od| #[your combinations go here]}.uniq.each(&amp;method(:create_name))</code>"}, {"owner": {"reputation": 314, "user_id": 9440171, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/d45BA.jpg?s=128&g=1", "display_name": "ashwood", "link": "https://stackoverflow.com/users/9440171/ashwood"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1536176639, "post_id": 52174725, "comment_id": 91334497, "body": "@engineersmnky thanks for that! I updated the current state of the methods to include .each and a new method to create names. Is there any reason why flat.map would be preferable here? They both seem to be doing the same thing from what I can see."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1536176917, "post_id": 52174725, "comment_id": 91334627, "body": "@rosalynn <code>flat_map</code> was just a suggestion to allow for chaining as <code>each</code> would not allow such a thing and <code>map</code> (<code>collect</code>) would have created an <code>Array</code> of <code>Array</code>s"}, {"owner": {"reputation": 314, "user_id": 9440171, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/d45BA.jpg?s=128&g=1", "display_name": "ashwood", "link": "https://stackoverflow.com/users/9440171/ashwood"}, "edited": false, "score": 0, "creation_date": 1536177167, "post_id": 52174725, "comment_id": 91334748, "body": "Ah okay. While no longer necessary here, thats really good to know for the future. Thanks again"}, {"owner": {"reputation": 314, "user_id": 9440171, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/d45BA.jpg?s=128&g=1", "display_name": "ashwood", "link": "https://stackoverflow.com/users/9440171/ashwood"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1536177556, "post_id": 52174725, "comment_id": 91334896, "body": "@engineersmnky but great suggestion for <code>(&amp;method(:create_name))</code>, I didn&#39;t know that syntax could take an argument."}], "owner": {"reputation": 314, "user_id": 9440171, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/d45BA.jpg?s=128&g=1", "display_name": "ashwood", "link": "https://stackoverflow.com/users/9440171/ashwood"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 213, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1536178642, "creation_date": 1536099918, "last_edit_date": 1536178642, "question_id": 52174725, "link": "https://stackoverflow.com/questions/52174725/how-to-refactor-nested-each-methods-in-ruby", "title": "How to refactor nested each methods in ruby", "body": "<p>I have a large database of ingredients. I use custom classes to create the ingredients and their naming variations. OilSeed is one such class. </p>\n\n<p>There are 64 naming variations for the following oil seed:</p>\n\n<pre><code>@oil_seed = OilSeed.new(\n  common_name: \"canola\",\n  genus: \"brassica\",\n  species: [\"capestris\", \"napus\", \"rapa\", \"rapa oleifera\", \"napus oleifera\", \"capestris oleifera\"],\n  oil_types: [\"oil\"],\n  oil_derivatives: [\"seed\"],\n  other_names: [\"rapeseed\", \"polish canola\", \"rape\"],\n)\n</code></pre>\n\n<p>The class contains different methods used create the naming variations. Almost all the methods have a few levels of nested <code>.each</code> calls. The following one is the most complex. (Note that <code>create_name</code> is just a method call to something that actually creates the ingredient in the database).</p>\n\n<pre><code>def full_names(alt_names)\n  alt_names.each do |alt_name|\n    @oil_types.each do |oil_type|\n      create_name(\"#{oil_type} of #{alt_name}\")\n      create_name(\"#{alt_name} #{oil_type}\")\n\n      @oil_derivatives.each do |oil_derivative|\n        create_name(\"#{alt_name} #{oil_derivative} #{oil_type}\")\n      end\n    end\n\n    @scientific_names.each do |sn|\n      @oil_types.each do |oil_type|\n        create_name(\"#{scientific_names} (#{alt_name}) #{oil_type}\")\n\n        @oil_derivatives.each do |oil_derivative|\n          create_name(\"#{scientific_names} (#{alt_name}) #{oil_derivative} #{oil_type}\")\n        end\n      end\n    end\n  end\nend\n</code></pre>\n\n<p>This method generates the following name variations for the seeds <code>common_name</code> and each of the <code>other_names</code> attrs.</p>\n\n<ul>\n<li>oil of canola </li>\n<li>canola oil </li>\n<li>canola seed oil </li>\n<li>brassica capestris (canola) oil </li>\n<li>brassica capestris (canola) seed oil</li>\n</ul>\n\n<p>My code is working fine but I wanted advice on whether I should (or if I can) refactor the complex naming method. Firstly, because it's hard to tell what exactly is going on. And second, its a hassle to add new attributes to the  <code>OilSeed</code> class. Each time I need to add one it creates a mass of new <code>each</code> calls which is hard to maintain.</p>\n\n<p>EDIT: Refactoring</p>\n\n<pre><code>def full_names(alt_names)\n  combinations = generate_combinations(alt_names, @oil_types, @oil_derivatives)\n  names = []\n\n  combinations.each do |sn, ot, od|\n    names &lt;&lt; \"#{sn} #{ot}\"\n    names &lt;&lt; \"#{sn} #{od} #{ot}\"\n  end\n\n  create_names(names)\nend\n\ndef generate_combinations(bases, *components)\n  bases.flatten.product(*components)\nend\n\ndef create_names(names)\n  names.uniq.each { |x| create_name(x) }\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"tags": [], "owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "is_accepted": false, "score": 2, "last_activity_date": 1536099534, "last_edit_date": 1536099534, "creation_date": 1536099060, "answer_id": 52174604, "question_id": 52174579, "link": "https://stackoverflow.com/questions/52174579/rails-engine-configuration-block-returning-nil/52174604#52174604", "title": "Rails Engine Configuration Block returning nil", "body": "<p>Have you just missed the <code>attr_accessor</code> for it?</p>\n\n<pre><code>attr_accessor :username, :password, :templates\n</code></pre>\n\n<p>But I think you mean you should call <code>MyModule::Configuration.new.templates</code></p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user10316795"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 19, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1536099534, "creation_date": 1536098855, "question_id": 52174579, "link": "https://stackoverflow.com/questions/52174579/rails-engine-configuration-block-returning-nil", "title": "Rails Engine Configuration Block returning nil", "body": "<p>I have this configuration block and its returning nil for some reason. </p>\n\n<pre><code>module MyModule\n\n  class Configuration\n    attr_accessor :username,:password\n\n    def initialize\n      @username = nil\n      @password = nil\n      @templates = 'my value'\n    end\n  end\nend\n</code></pre>\n\n<p>When I call <code>MyModule::Configuration.templates</code> I get nil. I would expect to get <code>'my value'</code> </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "integer", "bigdecimal"], "answers": [{"tags": [], "owner": {"reputation": 686, "user_id": 1491410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c938ed150a685b33d1b91266b382c8d?s=128&d=identicon&r=PG", "display_name": "elliotcm", "link": "https://stackoverflow.com/users/1491410/elliotcm"}, "is_accepted": false, "score": 2, "last_activity_date": 1536095797, "creation_date": 1536095797, "answer_id": 52174108, "question_id": 52174084, "link": "https://stackoverflow.com/questions/52174084/rails-converting-currency-from-form-to-big-decimal/52174108#52174108", "title": "Rails: Converting currency from form to big decimal", "body": "<p>The <code>money</code> gem (and <code>money-rails</code>) is a very effective way of handling amounts like this.</p>\n"}, {"comments": [{"owner": {"reputation": 346, "user_id": 5331859, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/8ddfcdd5d8fc6e4d7cebc17d48a19600?s=128&d=identicon&r=PG&f=1", "display_name": "zasman", "link": "https://stackoverflow.com/users/5331859/zasman"}, "edited": false, "score": 0, "creation_date": 1536155897, "post_id": 52174323, "comment_id": 91323634, "body": "I actually need to do the inverse of that, allow a user to enter a currency ($1,345.56) and then save that as a BigDecimal."}, {"owner": {"reputation": 3119, "user_id": 4842949, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-0agpj31wtZ8/AAAAAAAAAAI/AAAAAAAAAAA/mSolbNN-zIY/photo.jpg?sz=128", "display_name": "Joseph Cho", "link": "https://stackoverflow.com/users/4842949/joseph-cho"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1536156112, "post_id": 52174323, "comment_id": 91323792, "body": "@Stefan it&#39;s an honor to have you comment! @zasman what I would do is create a number input prefixed with a dollar sign: <code>$&lt;%= f.number_field :dollar_amount %&gt;</code>. It keeps the type correctness of a number with a BigDecimal field."}], "tags": [], "owner": {"reputation": 3119, "user_id": 4842949, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-0agpj31wtZ8/AAAAAAAAAAI/AAAAAAAAAAA/mSolbNN-zIY/photo.jpg?sz=128", "display_name": "Joseph Cho", "link": "https://stackoverflow.com/users/4842949/joseph-cho"}, "is_accepted": false, "score": 1, "last_activity_date": 1536097161, "creation_date": 1536097161, "answer_id": 52174323, "question_id": 52174084, "link": "https://stackoverflow.com/questions/52174084/rails-converting-currency-from-form-to-big-decimal/52174323#52174323", "title": "Rails: Converting currency from form to big decimal", "body": "<p>How I've handled this in the past is using the Rails helper method <a href=\"https://apidock.com/rails/v3.2.3/ActionView/Helpers/NumberHelper/number_to_currency\" rel=\"nofollow noreferrer\">number_to_currency</a>.</p>\n\n<pre><code>number_to_currency(1234567890.50)                    # =&gt; $1,234,567,890.50\nnumber_to_currency(1234567890.506)                   # =&gt; $1,234,567,890.51\nnumber_to_currency(1234567890.506, :precision =&gt; 3)  # =&gt; $1,234,567,890.506\n</code></pre>\n\n<p>You can save the field as a normal number, and Rails will format it to $'s.</p>\n"}], "owner": {"reputation": 346, "user_id": 5331859, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/8ddfcdd5d8fc6e4d7cebc17d48a19600?s=128&d=identicon&r=PG&f=1", "display_name": "zasman", "link": "https://stackoverflow.com/users/5331859/zasman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 428, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1536097161, "creation_date": 1536095694, "question_id": 52174084, "link": "https://stackoverflow.com/questions/52174084/rails-converting-currency-from-form-to-big-decimal", "title": "Rails: Converting currency from form to big decimal", "body": "<p>I have a <code>form_for</code> which has a <code>text_field</code> which accepts a number that the user types in a format such as this: <code>$45,000.45</code>.</p>\n\n<p>However, the database saves this as a <code>BigDecimal</code> value. </p>\n\n<p>Whats the most efficient way to convert this to a big decimal before saving, and to display it on the view as such?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "authentication", "devise"], "comments": [{"owner": {"reputation": 2958, "user_id": 3597730, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/d76b8f632aeb1d920d79d7dd5ab63097?s=128&d=identicon&r=PG", "display_name": "ruby_newbie", "link": "https://stackoverflow.com/users/3597730/ruby-newbie"}, "edited": false, "score": 0, "creation_date": 1536093246, "post_id": 52173372, "comment_id": 91298142, "body": "Can you post the full stack trace?"}, {"owner": {"reputation": 2958, "user_id": 3597730, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/d76b8f632aeb1d920d79d7dd5ab63097?s=128&d=identicon&r=PG", "display_name": "ruby_newbie", "link": "https://stackoverflow.com/users/3597730/ruby-newbie"}, "edited": false, "score": 0, "creation_date": 1536093428, "post_id": 52173372, "comment_id": 91298211, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/7457704/ror-devise-sign-in-always-returns-invalid-email-password\" title=\"ror devise sign in always returns invalid email password\">stackoverflow.com/questions/7457704/&hellip;</a>"}, {"owner": {"reputation": 53, "user_id": 9820331, "user_type": "registered", "profile_image": "https://graph.facebook.com/10212058985417546/picture?type=large", "display_name": "Masen", "link": "https://stackoverflow.com/users/9820331/masen"}, "reply_to_user": {"reputation": 2958, "user_id": 3597730, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/d76b8f632aeb1d920d79d7dd5ab63097?s=128&d=identicon&r=PG", "display_name": "ruby_newbie", "link": "https://stackoverflow.com/users/3597730/ruby-newbie"}, "edited": false, "score": 0, "creation_date": 1536094630, "post_id": 52173372, "comment_id": 91298664, "body": "Could you elaborate a bit more about the full stack trace? Pardon my ignorance. Also, I actually saw that question and looked through it but I didn&#39;t find a solution that worked in my case. Not a duplicate, I promise!"}, {"owner": {"reputation": 2958, "user_id": 3597730, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/d76b8f632aeb1d920d79d7dd5ab63097?s=128&d=identicon&r=PG", "display_name": "ruby_newbie", "link": "https://stackoverflow.com/users/3597730/ruby-newbie"}, "edited": false, "score": 0, "creation_date": 1536095078, "post_id": 52173372, "comment_id": 91298844, "body": "In your terminal, when the error occurs there is a stack trace.  here is a video that explains more: <a href=\"https://gorails.com/episodes/debugging-how-to-interpret-a-stacktrace\" rel=\"nofollow noreferrer\">gorails.com/episodes/debugging-how-to-interpret-a-stacktrace</a>"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1536096585, "post_id": 52173372, "comment_id": 91299350, "body": "Just looking at that custom code, this could potentially be caused by so many different things... I would suggest tracking down the cause yourself - which can probably be summarised in a few lines of code, not 100!"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1536096688, "post_id": 52173372, "comment_id": 91299394, "body": "Start by checking the <code>params</code> that are passed through. (For example, maybe it&#39;s actually <code>params[:user][:email]</code> instead of <code>params[:email]</code>??) If that&#39;s as expected, double check that the user exists, and has the same email. If things still seem fine, check whether the <code>BCrypt::Engine.hash_secret(password, user.password_salt)</code> matches."}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1536096850, "post_id": 52173372, "comment_id": 91299453, "body": "Nowhere in your code does the text <code>&quot;invalid email or password&quot;</code> actually appear, so I can&#39;t even see which branch of the logic is failing; I can only speculate."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1536097257, "post_id": 52173372, "comment_id": 91299597, "body": "@TomLord That might be an error bubbling up from Devise itself."}], "answers": [{"tags": [], "owner": {"reputation": 1682, "user_id": 6392696, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/09WDQ.jpg?s=128&g=1", "display_name": "nourza", "link": "https://stackoverflow.com/users/6392696/nourza"}, "is_accepted": false, "score": 0, "last_activity_date": 1536268331, "creation_date": 1536268331, "answer_id": 52212213, "question_id": 52173372, "link": "https://stackoverflow.com/questions/52173372/devise-rails-login-not-working-invalid-email-or-password/52212213#52212213", "title": "Devise/Rails login not working - &quot;invalid email or password&quot;", "body": "<p>In the user model try this</p>\n\n<pre><code>  devise :database_authenticatable, :registerable,\n         :recoverable, :rememberable, :trackable, :validatable, :confirmable\n</code></pre>\n"}], "owner": {"reputation": 53, "user_id": 9820331, "user_type": "registered", "profile_image": "https://graph.facebook.com/10212058985417546/picture?type=large", "display_name": "Masen", "link": "https://stackoverflow.com/users/9820331/masen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 512, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1536268331, "creation_date": 1536091892, "question_id": 52173372, "link": "https://stackoverflow.com/questions/52173372/devise-rails-login-not-working-invalid-email-or-password", "title": "Devise/Rails login not working - &quot;invalid email or password&quot;", "body": "<p>I'm having issues with Devise. I'm trying to set up an authentication scheme in Rails and I'm getting an \"invalid email or password\" response when I try to sign in. This is right after creating a user, logging in, logging out, and then trying to log in again. I'm totally sure that the email/password match, so that's not the issue. I'm using Devise 4.4.3 and Rails 5.2.0. Help a guy out, please!</p>\n\n<p>Users controller:</p>\n\n<pre><code>    class UsersController &lt; ApplicationController\n      before_action :authenticate_user!\n\n      def new\n        @user = User.new\n      end\n\n      def create\n        @user = User.new(user_params)\n        if @user.save\n          flash[:notice] = \"You've successfully signed up!\"\n        else\n          flash[:alert] = \"There was a problem signing up.\"\n          redirect_to '/signup'\n        end\n      end\n\n    private\n\n      def user_params\n        params.require(:user).permit(:email, :password, :password_confirmation)\n      end\n    end\n</code></pre>\n\n<p>Sessions controller:</p>\n\n<pre><code>    class SessionsController &lt; ApplicationController\n      before_action :authenticate_user!\n\n      def create\n        @user = User.authenticate(params[:email], params[:password])\n        if @user\n          flash[:notice] = \"You've signed in.\"\n          session[:user_id] = @user.id\n          redirect_to \"/\"\n        else\n          flash[:alert] = \"There was a problem signing in. Please try again.\"\n          redirect_to signin_path\n        end\n      end\n    end\n</code></pre>\n\n<p>User model:</p>\n\n<pre><code>    class User &lt; ActiveRecord::Base\n      # Include default devise modules. Others available are:\n      # :confirmable, :lockable, :timeoutable and :omniauthable\n      devise :database_authenticatable, :registerable,\n             :recoverable, :rememberable, :trackable, :validatable\n      has_many :posts\n      has_many :projects\n      attr_accessor :password\n      validates_confirmation_of :password\n      validates :email, :presence =&gt; true, :uniqueness =&gt; true\n      before_save :encrypt_password\n\n      def encrypt_password\n        self.password_salt = BCrypt::Engine.generate_salt\n        self.password_hash = BCrypt::Engine.hash_secret(password,password_salt)\n      end\n\n      def self.authenticate(email, password)\n        user = User.find_by \"email = ?\", email\n        if user &amp;&amp; user.password_hash == BCrypt::Engine.hash_secret(password, user.password_salt)\n          user\n        else\n          nil\n        end\n      end\n    end\n\n\n    &lt;h2&gt;Log in&lt;/h2&gt;\n\n    &lt;%= form_for(resource, as: resource_name, url: session_path(resource_name)) do |f| %&gt;\n      &lt;div class=\"field\"&gt;\n        &lt;%= f.label :email %&gt;&lt;br /&gt;\n        &lt;%= f.email_field :email, autofocus: true, autocomplete: \"email\" %&gt;\n      &lt;/div&gt;\n\n      &lt;div class=\"field\"&gt;\n        &lt;%= f.label :password %&gt;&lt;br /&gt;\n        &lt;%= f.password_field :password, autocomplete: \"off\" %&gt;\n      &lt;/div&gt;\n\n      &lt;% if devise_mapping.rememberable? -%&gt;\n        &lt;div class=\"field\"&gt;\n          &lt;%= f.check_box :remember_me %&gt;\n          &lt;%= f.label :remember_me %&gt;\n        &lt;/div&gt;\n      &lt;% end -%&gt;\n\n      &lt;div class=\"actions\"&gt;\n        &lt;%= f.submit \"Log in\" %&gt;\n      &lt;/div&gt;\n    &lt;% end %&gt;\n\n    &lt;%= render \"devise/shared/links\" %&gt;\n</code></pre>\n\n<p>Routes.rb</p>\n\n<pre><code>    Rails.application.routes.draw do\n      devise_for :users\n      root :to =&gt; 'homes#index'\n\n      resources :posts\n      resources :projects\n      resources :users\n    end\n</code></pre>\n\n<p>New session view:</p>\n\n<pre><code>    &lt;h2&gt;Log in&lt;/h2&gt;\n\n    &lt;%= form_for(resource, as: resource_name, url: session_path(resource_name)) do |f| %&gt;\n      &lt;div class=\"field\"&gt;\n        &lt;%= f.label :email %&gt;&lt;br /&gt;\n        &lt;%= f.email_field :email, autofocus: true, autocomplete: \"email\" %&gt;\n      &lt;/div&gt;\n\n      &lt;div class=\"field\"&gt;\n        &lt;%= f.label :password %&gt;&lt;br /&gt;\n        &lt;%= f.password_field :password, autocomplete: \"off\" %&gt;\n      &lt;/div&gt;\n\n      &lt;% if devise_mapping.rememberable? -%&gt;\n        &lt;div class=\"field\"&gt;\n          &lt;%= f.check_box :remember_me %&gt;\n          &lt;%= f.label :remember_me %&gt;\n        &lt;/div&gt;\n      &lt;% end -%&gt;\n\n      &lt;div class=\"actions\"&gt;\n        &lt;%= f.submit \"Log in\" %&gt;\n      &lt;/div&gt;\n    &lt;% end %&gt;\n\n    &lt;%= render \"devise/shared/links\" %&gt;\n</code></pre>\n\n<p>Happy to provide more if needed. I'm still somewhat new to development so pardon me if it's a very obvious answer. Thanks! </p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 706, "user_id": 6492146, "user_type": "registered", "accept_rate": 82, "profile_image": "https://graph.facebook.com/10157001409455137/picture?type=large", "display_name": "Verty00", "link": "https://stackoverflow.com/users/6492146/verty00"}, "edited": false, "score": 0, "creation_date": 1536089900, "post_id": 52172936, "comment_id": 91296583, "body": "have you tried running this in irb?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user10316795"}, "reply_to_user": {"reputation": 706, "user_id": 6492146, "user_type": "registered", "accept_rate": 82, "profile_image": "https://graph.facebook.com/10157001409455137/picture?type=large", "display_name": "Verty00", "link": "https://stackoverflow.com/users/6492146/verty00"}, "edited": false, "score": 1, "creation_date": 1536089986, "post_id": 52172936, "comment_id": 91296617, "body": "Yes it just exits out of irb when i invoke the method. <code>[1,2,3].push(4)</code> just makes irb exit"}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1536093216, "post_id": 52172936, "comment_id": 91298129, "body": "Yes it is possible. Please explain why you would want to do this as it would not be recommendable and there is most likely a better solution to your actual question."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1536131663, "post_id": 52172936, "comment_id": 91308384, "body": "<code>Array#push</code> is an <i>extremely</i> common method that is used <i>everywhere</i> in Ruby, <i>including</i> IRb, the Rails console, the Ruby standard library, the Rails libraries, and so on. Re-defining a method that is used all over the place <i>will</i> break things. That&#39;s just the way it is. (And is the reason why that is a bad idea.)"}], "answers": [{"tags": [], "owner": {"reputation": 61438, "user_id": 63034, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/ZXKMO.jpg?s=128&g=1", "display_name": "mikej", "link": "https://stackoverflow.com/users/63034/mikej"}, "is_accepted": false, "score": 4, "last_activity_date": 1536092368, "last_edit_date": 1536092368, "creation_date": 1536091972, "answer_id": 52173390, "question_id": 52172936, "link": "https://stackoverflow.com/questions/52172936/is-there-a-way-to-monkey-patch-array-class-in-rails-console/52173390#52173390", "title": "Is there a way to monkey patch array class in rails console?", "body": "<p>It looks like something in the Rails console itself is making use of <code>Array#push</code> and will be using your monkey patched version once you've defined that.</p>\n\n<p>The standard version of <code>push</code> is defined to take as many arguments as are passed to it, however your replacement version only takes a single parameter, <code>obj</code> and so isn't compatible.</p>\n\n<p>This leads to the <code>wrong number of arguments (given 5, expected 1)</code> error that you mentioned.</p>\n\n<p>To replace <code>push</code> with a compatible version you'd use Ruby's <code>*</code> (<a href=\"https://codequizzes.wordpress.com/2013/09/29/rubys-splat-operator/\" rel=\"nofollow noreferrer\">\"splat\" operator</a>) to define a method that can accept any number of arguments:</p>\n\n<pre><code>def push(*obj)\n  # implementation here\nend\n</code></pre>\n\n<p>Replacing <code>push</code> with a method that just returns without doing anything is likely going to cause quite a few problems. Perhaps update the question with some more details about what you're trying to do.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user10316795"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 277, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1536092368, "creation_date": 1536089770, "question_id": 52172936, "link": "https://stackoverflow.com/questions/52172936/is-there-a-way-to-monkey-patch-array-class-in-rails-console", "title": "Is there a way to monkey patch array class in rails console?", "body": "<p>Is it possible to monkey patch array class from the rails console? When i try to run the following code i get this error. </p>\n\n<pre><code>class Array\n  def push(obj)\n    return\n  end\nend\n</code></pre>\n\n<p>I get the following error</p>\n\n<pre><code>ArgumentError: wrong number of arguments (given 5, expected 1)\nfrom (pry):2:in `push'\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord", "collections"], "comments": [{"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1536091986, "post_id": 52172882, "comment_id": 91297545, "body": "Why have you been taught to avoid scopes with arguments? What was the reason for this guideline?"}, {"owner": {"reputation": 115, "user_id": 6168487, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87f8bfc1e03861a26ec7fc8b46bab0dc?s=128&d=identicon&r=PG", "display_name": "mrmicrowaveoven", "link": "https://stackoverflow.com/users/6168487/mrmicrowaveoven"}, "reply_to_user": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1536093152, "post_id": 52172882, "comment_id": 91298098, "body": "@spickermann Added reference to the Ruby On Rails guide.  Mind you, that doesn&#39;t necessarily make the guideline correct, just letting you know where I got it."}, {"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 1, "creation_date": 1536093400, "post_id": 52172882, "comment_id": 91298198, "body": "But the same guide tells you in the next <a href=\"https://guides.rubyonrails.org/active_record_querying.html#using-conditionals\" rel=\"nofollow noreferrer\">section</a> how to solve the problem: Use a scope with an argument..."}, {"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "edited": false, "score": 0, "creation_date": 1536214502, "post_id": 52172882, "comment_id": 91344317, "body": "@mrmicrowaveoven did <code>all</code> work for you?"}, {"owner": {"reputation": 115, "user_id": 6168487, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87f8bfc1e03861a26ec7fc8b46bab0dc?s=128&d=identicon&r=PG", "display_name": "mrmicrowaveoven", "link": "https://stackoverflow.com/users/6168487/mrmicrowaveoven"}, "reply_to_user": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "edited": false, "score": 0, "creation_date": 1544045391, "post_id": 52172882, "comment_id": 94141613, "body": "@AndreyDeineko Not with my version of rails.  Is there a solution?"}], "answers": [{"comments": [{"owner": {"reputation": 115, "user_id": 6168487, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87f8bfc1e03861a26ec7fc8b46bab0dc?s=128&d=identicon&r=PG", "display_name": "mrmicrowaveoven", "link": "https://stackoverflow.com/users/6168487/mrmicrowaveoven"}, "edited": false, "score": 0, "creation_date": 1536271163, "post_id": 52173785, "comment_id": 91374766, "body": "So I&#39;m guessing this will return a Relation on Rails 4 and later.  My company&#39;s current version of rails converts this into an array.  See here: <a href=\"https://stackoverflow.com/questions/18456536/rails-4-equivalent-of-rails-3-model-all\" title=\"rails 4 equivalent of rails 3 model all\">stackoverflow.com/questions/18456536/&hellip;</a>.  Is there a more universal way of doing this?"}, {"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "reply_to_user": {"reputation": 115, "user_id": 6168487, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87f8bfc1e03861a26ec7fc8b46bab0dc?s=128&d=identicon&r=PG", "display_name": "mrmicrowaveoven", "link": "https://stackoverflow.com/users/6168487/mrmicrowaveoven"}, "edited": false, "score": 0, "creation_date": 1536565911, "post_id": 52173785, "comment_id": 91453982, "body": "@mrmicrowaveoven which version of Rails is your company using?"}], "tags": [], "owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "is_accepted": false, "score": 1, "last_activity_date": 1536094962, "last_edit_date": 1536094962, "creation_date": 1536094016, "answer_id": 52173785, "question_id": 52172882, "link": "https://stackoverflow.com/questions/52172882/returning-the-original-relation-in-a-class-method-called-on-a-relation/52173785#52173785", "title": "Returning the original relation in a class method called on a relation", "body": "<p>The following should preserve the upstream scope chain (returning <code>all</code>, not <code>self</code>):</p>\n\n<pre><code>return all if ids.none?\n</code></pre>\n\n<p>P.S. Named scopes is a perfectly accepted and conventional way of dealing with queries.</p>\n"}], "owner": {"reputation": 115, "user_id": 6168487, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87f8bfc1e03861a26ec7fc8b46bab0dc?s=128&d=identicon&r=PG", "display_name": "mrmicrowaveoven", "link": "https://stackoverflow.com/users/6168487/mrmicrowaveoven"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 119, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1538072039, "creation_date": 1536089534, "last_edit_date": 1538072039, "question_id": 52172882, "link": "https://stackoverflow.com/questions/52172882/returning-the-original-relation-in-a-class-method-called-on-a-relation", "title": "Returning the original relation in a class method called on a relation", "body": "<p>I have a class method on a model called <code>order_by_ids(ids)</code> that is called by an ActiveRecord Relation.  Below is an example of its usage:</p>\n\n<pre><code>User.where(id: [1,2,3]).order_by_ids([2,1,3])\n</code></pre>\n\n<p>...will return Users 1, 2, and 3 in the order of: [2,1,3]</p>\n\n<p>I would like for it to return the original relation (essentially doing nothing) if passed an empty array.</p>\n\n<p>The following returns the entire class, not just the relation it's called on:</p>\n\n<pre><code>return self unless ids.present?\n</code></pre>\n\n<p>The following works 100%, but it seems inelegant.  Also, I think it runs an unnecessary query (seems slower in the console anyway):</p>\n\n<pre><code>return where.not(id: nil) unless ids.present?\n</code></pre>\n\n<p>Is there a quick way to just return the relation it's called on?  I could theoretically make it a scope, but I've been taught to avoid scopes with arguments (see <a href=\"https://guides.rubyonrails.org/active_record_querying.html#passing-in-arguments\" rel=\"nofollow noreferrer\">this</a> guide for reference).</p>\n\n<p>Note: I am using Rails 3, so <code>all</code> returns an array.  I'm essentially looking for a Rails 4 version of <code>all</code>.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1536092159, "post_id": 52172866, "comment_id": 91297631, "body": "Did you add the <code>protected_attributes</code> gem to your <code>Gemfile</code>?"}, {"owner": {"reputation": 686, "user_id": 1491410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c938ed150a685b33d1b91266b382c8d?s=128&d=identicon&r=PG", "display_name": "elliotcm", "link": "https://stackoverflow.com/users/1491410/elliotcm"}, "edited": false, "score": 0, "creation_date": 1536092784, "post_id": 52172866, "comment_id": 91299977, "body": "Are you upgrading Rails or copying something from somewhere else? Attribute whitelisting was removed in Rails 4 with the advent of strong parameters. <a href=\"https://edgeguides.rubyonrails.org/upgrading_ruby_on_rails.html#upgrading-from-rails-3-2-to-rails-4-0-active-record\" rel=\"nofollow noreferrer\">edgeguides.rubyonrails.org/&hellip;</a>"}, {"owner": {"reputation": 390, "user_id": 3241847, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/7359e4392f7cfcc6dfe264b275bd6916?s=128&d=identicon&r=PG&f=1", "display_name": "TheViralGriffin", "link": "https://stackoverflow.com/users/3241847/theviralgriffin"}, "reply_to_user": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1536125825, "post_id": 52172866, "comment_id": 91305524, "body": "@spickermann no I haven&#39;t added protected_attributes to Gemfile."}, {"owner": {"reputation": 390, "user_id": 3241847, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/7359e4392f7cfcc6dfe264b275bd6916?s=128&d=identicon&r=PG&f=1", "display_name": "TheViralGriffin", "link": "https://stackoverflow.com/users/3241847/theviralgriffin"}, "reply_to_user": {"reputation": 686, "user_id": 1491410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c938ed150a685b33d1b91266b382c8d?s=128&d=identicon&r=PG", "display_name": "elliotcm", "link": "https://stackoverflow.com/users/1491410/elliotcm"}, "edited": false, "score": 0, "creation_date": 1536125938, "post_id": 52172866, "comment_id": 91305567, "body": "@elliotcm i am a newbie getting started. I am not upgrading nor have copied something. Have setup one controller and one model. And trying to add another model through generators."}, {"owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 0, "creation_date": 1536126249, "post_id": 52172866, "comment_id": 91305684, "body": "Do you have an <code>Article</code> model in your application?"}, {"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1536126292, "post_id": 52172866, "comment_id": 91305701, "body": "Does the same error happen when you use <code>bundle exec rails generate model Comment ...</code> to run the command?"}, {"owner": {"reputation": 390, "user_id": 3241847, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/7359e4392f7cfcc6dfe264b275bd6916?s=128&d=identicon&r=PG&f=1", "display_name": "TheViralGriffin", "link": "https://stackoverflow.com/users/3241847/theviralgriffin"}, "edited": false, "score": 0, "creation_date": 1536126712, "post_id": 52172866, "comment_id": 91305881, "body": "Yes. I tried the code and get the same error."}, {"owner": {"reputation": 390, "user_id": 3241847, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/7359e4392f7cfcc6dfe264b275bd6916?s=128&d=identicon&r=PG&f=1", "display_name": "TheViralGriffin", "link": "https://stackoverflow.com/users/3241847/theviralgriffin"}, "reply_to_user": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 0, "creation_date": 1536126959, "post_id": 52172866, "comment_id": 91305968, "body": "@JagdeepSingh yes I do and also have a controller named Article which works."}], "owner": {"reputation": 390, "user_id": 3241847, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/7359e4392f7cfcc6dfe264b275bd6916?s=128&d=identicon&r=PG&f=1", "display_name": "TheViralGriffin", "link": "https://stackoverflow.com/users/3241847/theviralgriffin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 514, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1561972494, "creation_date": 1536089461, "last_edit_date": 1561972494, "question_id": 52172866, "link": "https://stackoverflow.com/questions/52172866/undefined-method-whitelist-attributes-for-activerecordbaseclass-nomethode", "title": "undefined method `whitelist_attributes=&#39; for ActiveRecord::Base:Class (NoMethodError)", "body": "<p>Have been following rails guide, While running the code:</p>\n\n<pre><code>rails generate model Comment commenter:string body:text article:reference\n</code></pre>\n\n<p>I get the following error:</p>\n\n<pre><code>/Users/Developer/.rvm/gems/ruby-2.5.1/gems/activerecord-5.2.1/lib/active_record/dynamic_matchers.rb:22:in `method_missing': undefined method `whitelist_attributes=' for ActiveRecord::Base:Class (NoMethodError)\n</code></pre>\n\n<p>Have tried searching for similar questions and one suggestion was to remove</p>\n\n<pre><code>config.active_record.whitelist_attributes = false\n</code></pre>\n\n<p>Have searched the whole app directory and couldn't find any occurrence of such code.  </p>\n\n<p>Rails Version: 5.2.1\nRuby Version: 2.5.1</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>$ bundle exec rails generate model Comment\r\nconfig.eager_load is set to nil. Please update your config/environments/*.rb files accordingly:\r\n\r\n  * development - set it to false\r\n  * test - set it to false (unless you use a tool that preloads your test environment)\r\n  * production - set it to true\r\n\r\n      invoke  active_record\r\nTraceback (most recent call last):\r\n\t49: from script/rails:6:in `&lt;main&gt;'\r\n\t48: from script/rails:6:in `require'\r\n\t47: from /Users/Developer/.rvm/gems/ruby-2.5.1/gems/railties-5.2.1/lib/rails/commands.rb:18:in `&lt;top (required)&gt;'\r\n\t46: from /Users/Developer/.rvm/gems/ruby-2.5.1/gems/railties-5.2.1/lib/rails/command.rb:46:in `invoke'\r\n\t45: from /Users/Developer/.rvm/gems/ruby-2.5.1/gems/railties-5.2.1/lib/rails/command/base.rb:65:in `perform'\r\n\t44: from /Users/Developer/.rvm/gems/ruby-2.5.1/gems/thor-0.20.0/lib/thor.rb:387:in `dispatch'\r\n\t43: from /Users/Developer/.rvm/gems/ruby-2.5.1/gems/thor-0.20.0/lib/thor/invocation.rb:126:in `invoke_command'\r\n\t42: from /Users/Developer/.rvm/gems/ruby-2.5.1/gems/thor-0.20.0/lib/thor/command.rb:27:in `run'\r\n\t41: from /Users/Developer/.rvm/gems/ruby-2.5.1/gems/railties-5.2.1/lib/rails/commands/generate/generate_command.rb:26:in `perform'\r\n\t40: from /Users/Developer/.rvm/gems/ruby-2.5.1/gems/railties-5.2.1/lib/rails/generators.rb:276:in `invoke'\r\n\t39: from /Users/Developer/.rvm/gems/ruby-2.5.1/gems/thor-0.20.0/lib/thor/base.rb:466:in `start'\r\n\t38: from /Users/Developer/.rvm/gems/ruby-2.5.1/gems/thor-0.20.0/lib/thor/group.rb:232:in `dispatch'\r\n\t37: from /Users/Developer/.rvm/gems/ruby-2.5.1/gems/thor-0.20.0/lib/thor/invocation.rb:133:in `invoke_all'\r\n\t36: from /Users/Developer/.rvm/gems/ruby-2.5.1/gems/thor-0.20.0/lib/thor/invocation.rb:133:in `map'\r\n\t35: from /Users/Developer/.rvm/gems/ruby-2.5.1/gems/thor-0.20.0/lib/thor/invocation.rb:133:in `each'\r\n\t34: from /Users/Developer/.rvm/gems/ruby-2.5.1/gems/thor-0.20.0/lib/thor/invocation.rb:133:in `block in invoke_all'\r\n\t33: from /Users/Developer/.rvm/gems/ruby-2.5.1/gems/thor-0.20.0/lib/thor/invocation.rb:126:in `invoke_command'\r\n\t32: from /Users/Developer/.rvm/gems/ruby-2.5.1/gems/thor-0.20.0/lib/thor/command.rb:27:in `run'\r\n\t31: from /Users/Developer/.rvm/gems/ruby-2.5.1/gems/thor-0.20.0/lib/thor/group.rb:133:in `_invoke_from_option_orm'\r\n\t30: from /Users/Developer/.rvm/gems/ruby-2.5.1/gems/thor-0.20.0/lib/thor/group.rb:266:in `_invoke_for_class_method'\r\n\t29: from /Users/Developer/.rvm/gems/ruby-2.5.1/gems/thor-0.20.0/lib/thor/shell.rb:68:in `with_padding'\r\n\t28: from /Users/Developer/.rvm/gems/ruby-2.5.1/gems/thor-0.20.0/lib/thor/group.rb:277:in `block in _invoke_for_class_method'\r\n\t27: from /Users/Developer/.rvm/gems/ruby-2.5.1/gems/thor-0.20.0/lib/thor/invocation.rb:115:in `invoke'\r\n\t26: from /Users/Developer/.rvm/gems/ruby-2.5.1/gems/thor-0.20.0/lib/thor/group.rb:232:in `dispatch'\r\n\t25: from /Users/Developer/.rvm/gems/ruby-2.5.1/gems/thor-0.20.0/lib/thor/invocation.rb:133:in `invoke_all'\r\n\t24: from /Users/Developer/.rvm/gems/ruby-2.5.1/gems/thor-0.20.0/lib/thor/invocation.rb:133:in `map'\r\n\t23: from /Users/Developer/.rvm/gems/ruby-2.5.1/gems/thor-0.20.0/lib/thor/invocation.rb:133:in `each'\r\n\t22: from /Users/Developer/.rvm/gems/ruby-2.5.1/gems/thor-0.20.0/lib/thor/invocation.rb:133:in `block in invoke_all'\r\n\t21: from /Users/Developer/.rvm/gems/ruby-2.5.1/gems/thor-0.20.0/lib/thor/invocation.rb:126:in `invoke_command'\r\n\t20: from /Users/Developer/.rvm/gems/ruby-2.5.1/gems/thor-0.20.0/lib/thor/command.rb:27:in `run'\r\n\t19: from /Users/Developer/.rvm/gems/ruby-2.5.1/gems/activerecord-5.2.1/lib/rails/generators/active_record/model/model_generator.rb:22:in `create_migration_file'\r\n\t18: from /Users/Developer/.rvm/gems/ruby-2.5.1/gems/railties-5.2.1/lib/rails/generators/named_base.rb:92:in `table_name'\r\n\t17: from /Users/Developer/.rvm/gems/ruby-2.5.1/gems/railties-5.2.1/lib/rails/generators/named_base.rb:201:in `pluralize_table_names?'\r\n\t16: from /Users/Developer/.rvm/gems/ruby-2.5.1/gems/activesupport-5.2.1/lib/active_support/dependencies.rb:287:in `require'\r\n\t15: from /Users/Developer/.rvm/gems/ruby-2.5.1/gems/activesupport-5.2.1/lib/active_support/dependencies.rb:253:in `load_dependency'\r\n\t14: from /Users/Developer/.rvm/gems/ruby-2.5.1/gems/activesupport-5.2.1/lib/active_support/dependencies.rb:287:in `block in require'\r\n\t13: from /Users/Developer/.rvm/gems/ruby-2.5.1/gems/activesupport-5.2.1/lib/active_support/dependencies.rb:287:in `require'\r\n\t12: from /Users/Developer/.rvm/gems/ruby-2.5.1/gems/activerecord-5.2.1/lib/active_record/base.rb:27:in `&lt;top (required)&gt;'\r\n\t11: from /Users/Developer/.rvm/gems/ruby-2.5.1/gems/activerecord-5.2.1/lib/active_record/base.rb:328:in `&lt;module:ActiveRecord&gt;'\r\n\t10: from /Users/Developer/.rvm/gems/ruby-2.5.1/gems/activesupport-5.2.1/lib/active_support/lazy_load_hooks.rb:51:in `run_load_hooks'\r\n\t 9: from /Users/Developer/.rvm/gems/ruby-2.5.1/gems/activesupport-5.2.1/lib/active_support/lazy_load_hooks.rb:51:in `each'\r\n\t 8: from /Users/Developer/.rvm/gems/ruby-2.5.1/gems/activesupport-5.2.1/lib/active_support/lazy_load_hooks.rb:52:in `block in run_load_hooks'\r\n\t 7: from /Users/Developer/.rvm/gems/ruby-2.5.1/gems/activesupport-5.2.1/lib/active_support/lazy_load_hooks.rb:67:in `execute_hook'\r\n\t 6: from /Users/Developer/.rvm/gems/ruby-2.5.1/gems/activesupport-5.2.1/lib/active_support/lazy_load_hooks.rb:62:in `with_execution_control'\r\n\t 5: from /Users/Developer/.rvm/gems/ruby-2.5.1/gems/activesupport-5.2.1/lib/active_support/lazy_load_hooks.rb:71:in `block in execute_hook'\r\n\t 4: from /Users/Developer/.rvm/gems/ruby-2.5.1/gems/activesupport-5.2.1/lib/active_support/lazy_load_hooks.rb:71:in `instance_eval'\r\n\t 3: from /Users/Developer/.rvm/gems/ruby-2.5.1/gems/activerecord-5.2.1/lib/active_record/railtie.rb:123:in `block (2 levels) in &lt;class:Railtie&gt;'\r\n\t 2: from /Users/Developer/.rvm/gems/ruby-2.5.1/gems/activerecord-5.2.1/lib/active_record/railtie.rb:123:in `each'\r\n\t 1: from /Users/Developer/.rvm/gems/ruby-2.5.1/gems/activerecord-5.2.1/lib/active_record/railtie.rb:124:in `block (3 levels) in &lt;class:Railtie&gt;'\r\n/Users/Developer/.rvm/gems/ruby-2.5.1/gems/activerecord-5.2.1/lib/active_record/dynamic_matchers.rb:22:in `method_missing': undefined method `whitelist_attributes=' for ActiveRecord::Base:Class (NoMethodError)</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "ruby-on-rails-5", "ruby-on-rails-6"], "answers": [{"comments": [{"owner": {"reputation": 1560, "user_id": 9285378, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2qXZT.png?s=128&g=1", "display_name": "Rigi", "link": "https://stackoverflow.com/users/9285378/rigi"}, "edited": false, "score": 1, "creation_date": 1536089189, "post_id": 52172176, "comment_id": 91296249, "body": "that&#39;s exactly the line of code I was looking for! And thanks for editing the topic, I had problems with expressing myself :)"}, {"owner": {"reputation": 1560, "user_id": 9285378, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2qXZT.png?s=128&g=1", "display_name": "Rigi", "link": "https://stackoverflow.com/users/9285378/rigi"}, "edited": false, "score": 0, "creation_date": 1536092983, "post_id": 52172176, "comment_id": 91298011, "body": "Hey! One more question - as I have made few steps ahead I encounter another issue - now when I pass an argument - say a string to a rake task I can no longer access args[:location], as args become that particular string. Any tips how to deal with this one?"}, {"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "reply_to_user": {"reputation": 1560, "user_id": 9285378, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2qXZT.png?s=128&g=1", "display_name": "Rigi", "link": "https://stackoverflow.com/users/9285378/rigi"}, "edited": false, "score": 0, "creation_date": 1536093348, "post_id": 52172176, "comment_id": 91298175, "body": "@Rigi you have to do 2 things: first, pass anything to rake task and debug (with <code>binding.pry</code>) what <code>args</code> is; second: ensure you always pass a valid argument. Setup I showed should work, did you change it?"}, {"owner": {"reputation": 1560, "user_id": 9285378, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2qXZT.png?s=128&g=1", "display_name": "Rigi", "link": "https://stackoverflow.com/users/9285378/rigi"}, "edited": false, "score": 0, "creation_date": 1536093942, "post_id": 52172176, "comment_id": 91298416, "body": "Hey! I did, when I invoke the rake task with the following line: Rake::Task[&quot;foo:bar&quot;].execute(location), then args seems to be &quot;flatten&quot; - I used binding.pry and typing args gives me value of location straight away.  But when I call it like: Rake::Task[&quot;foo:bar&quot;].execute, then I can use args[:location] EDIT: I tried to use args.with_default but then I get &quot;error: undefined method `with_defaults&#39; for &quot;London&quot;:String&quot; (but this works ok when location is nil)"}, {"owner": {"reputation": 1560, "user_id": 9285378, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2qXZT.png?s=128&g=1", "display_name": "Rigi", "link": "https://stackoverflow.com/users/9285378/rigi"}, "edited": false, "score": 0, "creation_date": 1536094555, "post_id": 52172176, "comment_id": 91298640, "body": "EDIT2: Thanks, problem&#39;s solved! In order to make sure the args will not get flatten I needed to call the rake task like: Rake::Task[&quot;foo:bar&quot;].execute(location: location) - so basically I just passed arg as hash :) Thanks once again!"}], "tags": [], "owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "is_accepted": true, "score": 3, "last_activity_date": 1536086431, "last_edit_date": 1536086431, "creation_date": 1536086087, "answer_id": 52172176, "question_id": 52172080, "link": "https://stackoverflow.com/questions/52172080/problem-with-passing-argument-to-rake-task/52172176#52172176", "title": "Problem with passing argument to rake task", "body": "<p>You want</p>\n\n<pre><code>arg[:argument].blank?\n</code></pre>\n\n<p>because <code>arg</code> is a hash with <code>:argument</code> key.</p>\n\n<p>On a side note: the following would be more descriptive definition of a task (note plural <code>args</code> and <code>location</code> since it looks like you're passing location):</p>\n\n<pre><code>task :bar, [:location] =&gt; :environment do |_task, args|\n  if args[:location].blank?\n    # do stuff\n  else\n    # do other stuff\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 1560, "user_id": 9285378, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2qXZT.png?s=128&g=1", "display_name": "Rigi", "link": "https://stackoverflow.com/users/9285378/rigi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 268, "favorite_count": 0, "accepted_answer_id": 52172176, "answer_count": 1, "score": 2, "last_activity_date": 1611577894, "creation_date": 1536085632, "last_edit_date": 1611577894, "question_id": 52172080, "link": "https://stackoverflow.com/questions/52172080/problem-with-passing-argument-to-rake-task", "title": "Problem with passing argument to rake task", "body": "<p>I am coding in Ruby 2.3.1p112 and Rails 4.2.7.1 and encounter this bug(?) when trying to use if-statement inside of one of the rake files.</p>\n\n<p>I call this rake task:</p>\n\n<pre><code>task :bar, [:argument] =&gt; :environment do |_task, arg|\n  binding.pry\n  if arg.blank?\n    # do stuff\n  else\n    # do other stuff\n  end\nend\n</code></pre>\n\n<p>from this worker:</p>\n\n<pre><code> # ...\n def perform(location = nil)\n    Rake::Task[\"foo:bar\"].execute(location)\n end\n # ...\n</code></pre>\n\n<p>And when the code hits the binding.pry line I get the following issue:\n<a href=\"https://i.stack.imgur.com/h7XsM.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/h7XsM.png\" alt=\"blank bug\"></a></p>\n\n<p>Is it a bug indeed or am I lacking some basic knowledge around here? \nThanks!</p>\n"}, {"tags": ["ruby", "serverspec"], "comments": [{"owner": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "edited": false, "score": 1, "creation_date": 1536083365, "post_id": 52171279, "comment_id": 91293799, "body": "run it via <code>bundle exec rspec path&#47;to&#47;the&#47;file_spec.rb</code>"}, {"owner": {"reputation": 1, "user_id": 10251632, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4ad240302f2427ce1cfa89f77191be74?s=128&d=identicon&r=PG&f=1", "display_name": "Beginnerprogrammer", "link": "https://stackoverflow.com/users/10251632/beginnerprogrammer"}, "reply_to_user": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "edited": false, "score": 0, "creation_date": 1536088350, "post_id": 52171279, "comment_id": 91295917, "body": "@Anthony thanks for the reply. But I&#39;m sorry not to mention this in the question. I want to know whether the curl command gives the http code. In the meanwhile, I&#39;ll be running the script as you suggested.!"}], "answers": [{"tags": [], "owner": {"reputation": 43208, "user_id": 78722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf611565f0b79abd0b3dc200ad867661?s=128&d=identicon&r=PG", "display_name": "coderanger", "link": "https://stackoverflow.com/users/78722/coderanger"}, "is_accepted": false, "score": 1, "last_activity_date": 1536094265, "creation_date": 1536094265, "answer_id": 52173824, "question_id": 52171279, "link": "https://stackoverflow.com/questions/52171279/how-to-test-if-my-serverspec-command-condition-written-in-ruby-works/52173824#52173824", "title": "How to test if my ServerSpec command condition written in Ruby works?", "body": "<p>Generally Serverspec is used with Chef via the Test Kitchen integration testing framework (though these days InSpec is more popular). You run your tests using the <code>kitchen verify</code> command.</p>\n"}, {"tags": [], "owner": {"reputation": 11353, "user_id": 3787051, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k2G2V.png?s=128&g=1", "display_name": "Alex Harvey", "link": "https://stackoverflow.com/users/3787051/alex-harvey"}, "is_accepted": false, "score": 0, "last_activity_date": 1550385349, "creation_date": 1550385349, "answer_id": 54730781, "question_id": 52171279, "link": "https://stackoverflow.com/questions/52171279/how-to-test-if-my-serverspec-command-condition-written-in-ruby-works/54730781#54730781", "title": "How to test if my ServerSpec command condition written in Ruby works?", "body": "<p>It looks to me like what you want is:</p>\n\n<pre><code>describe command('curl -s -k -I https://localhost/xx/xxx') do\n  its(:stdout) { should match /200/ }\nend\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 10251632, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4ad240302f2427ce1cfa89f77191be74?s=128&d=identicon&r=PG&f=1", "display_name": "Beginnerprogrammer", "link": "https://stackoverflow.com/users/10251632/beginnerprogrammer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 188, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1550385436, "creation_date": 1536081823, "last_edit_date": 1550385436, "question_id": 52171279, "link": "https://stackoverflow.com/questions/52171279/how-to-test-if-my-serverspec-command-condition-written-in-ruby-works", "title": "How to test if my ServerSpec command condition written in Ruby works?", "body": "<p>I'm using the following ruby script</p>\n\n<pre><code>describe command('curl -s -k - i %{http_code} https://localhost/xx/xxx') do\n  its(:stdout) { should match /200/ }\nend\n</code></pre>\n\n<p>But I'm unsure if this script works or not. How can I make sure this script works?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 1166, "user_id": 2217750, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/cKXxI.jpg?s=128&g=1", "display_name": "Darkisa", "link": "https://stackoverflow.com/users/2217750/darkisa"}, "edited": false, "score": 0, "creation_date": 1536083219, "post_id": 52171498, "comment_id": 91293745, "body": "Thanks for the response. That make sense, but I thought if I used includes then the Relation should load the array since it uses eager loading, meaning that size should not ignore the include or select? Why would size ignore the includes and select parts?"}, {"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "reply_to_user": {"reputation": 1166, "user_id": 2217750, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/cKXxI.jpg?s=128&g=1", "display_name": "Darkisa", "link": "https://stackoverflow.com/users/2217750/darkisa"}, "edited": false, "score": 0, "creation_date": 1536083576, "post_id": 52171498, "comment_id": 91293891, "body": "No, because <code>includes</code> doesn&#39;t guarantee to run a SQL <code>JOIN</code> and to result in only one single query. <code>includes</code> might cause in two queries - one for the records and a second loading all associated records at once (What is still faster than N+1 queries - the problem <code>includes</code> aiming to solve."}, {"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "reply_to_user": {"reputation": 1166, "user_id": 2217750, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/cKXxI.jpg?s=128&g=1", "display_name": "Darkisa", "link": "https://stackoverflow.com/users/2217750/darkisa"}, "edited": false, "score": 1, "creation_date": 1536083767, "post_id": 52171498, "comment_id": 91293974, "body": "And <code>select</code> is ignored because <code>count</code> uses its own <code>SELECT COUNT(*)</code>."}, {"owner": {"reputation": 1166, "user_id": 2217750, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/cKXxI.jpg?s=128&g=1", "display_name": "Darkisa", "link": "https://stackoverflow.com/users/2217750/darkisa"}, "edited": false, "score": 0, "creation_date": 1536083890, "post_id": 52171498, "comment_id": 91294051, "body": "Got it. Thanks!"}], "tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": true, "score": 2, "last_activity_date": 1536082825, "creation_date": 1536082825, "answer_id": 52171498, "question_id": 52171253, "link": "https://stackoverflow.com/questions/52171253/rails-includes-and-eager-loading/52171498#52171498", "title": "Rails includes and eager loading", "body": "<p>There are subtile differences between <code>count</code>, <code>size</code> and <code>length</code> on <code>ActiveRecord::Relations</code> (see <a href=\"https://stackoverflow.com/a/14794742/2483313\">this answer</a> about the details)</p>\n\n<p>In your example <code>length</code> will always perform the exact query as defined on the <code>ActiveRecord::Relation</code> and will then call <code>length</code> on the returned array.</p>\n\n<p>Whereas <code>result.size</code> will perform a <code>count</code> query when the <code>ActiveRecord::Relation</code> wasn't loaded before. Because <code>count</code> returns a number (and not actual records) the query is optimized and the <code>include</code> and the <code>select</code> parts are ignored. This makes sense from a performance point of view.</p>\n\n<p>But if the <code>Relation</code> is already loaded (for example when you call <code>length</code> before <code>size</code>) then <code>size</code> will just return the size of the already loaded array.</p>\n"}], "owner": {"reputation": 1166, "user_id": 2217750, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/cKXxI.jpg?s=128&g=1", "display_name": "Darkisa", "link": "https://stackoverflow.com/users/2217750/darkisa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 84, "favorite_count": 0, "accepted_answer_id": 52171498, "answer_count": 1, "score": 0, "last_activity_date": 1536082825, "creation_date": 1536081718, "question_id": 52171253, "link": "https://stackoverflow.com/questions/52171253/rails-includes-and-eager-loading", "title": "Rails includes and eager loading", "body": "<p>I have a Rails command: </p>\n\n<pre><code>Product.includes(:sale, :product_description).select('distinct on (size) *')\n</code></pre>\n\n<p>It is my understanding that when I run this command, Rails will eagerly load the results into memory, and since there are only 4 sizes, the result should only contain 4 records. However, if I do something like:</p>\n\n<pre><code>result = Product.includes(:sale, :product_description).select('distinct on (size) *')\n</code></pre>\n\n<p>and then do: <code>result.size</code>. The result will be a count of all the product records, which is 435. But if I do: <code>result.length</code> then I will get the expected response, which is 4. </p>\n\n<p>Why am I getting different results with <code>length</code> and <code>size</code>? I thought that by using <code>includes</code> everything is eagerly loaded so <code>length</code> and <code>size</code> should return the same count?</p>\n\n<p>Also note, if I run <code>length</code> first and then <code>size</code>, both return the correct result of 4. But if I run <code>size</code> first, then I get the wrong response of 435. </p>\n"}, {"tags": ["ruby", "file", "null", "arguments", "typeerror"], "comments": [{"owner": {"reputation": 546, "user_id": 6892541, "user_type": "registered", "profile_image": "https://graph.facebook.com/10157364461515276/picture?type=large", "display_name": "Ahmed Sh", "link": "https://stackoverflow.com/users/6892541/ahmed-sh"}, "edited": false, "score": 0, "creation_date": 1536081547, "post_id": 52171151, "comment_id": 91293018, "body": "what ruby version you got ?"}, {"owner": {"reputation": 546, "user_id": 6892541, "user_type": "registered", "profile_image": "https://graph.facebook.com/10157364461515276/picture?type=large", "display_name": "Ahmed Sh", "link": "https://stackoverflow.com/users/6892541/ahmed-sh"}, "edited": false, "score": 0, "creation_date": 1536081608, "post_id": 52171151, "comment_id": 91293037, "body": "can you post your configuration file too"}, {"owner": {"reputation": 78, "user_id": 9871630, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QkCHZ.png?s=128&g=1", "display_name": "Marek K&#252;the", "link": "https://stackoverflow.com/users/9871630/marek-k%c3%bcthe"}, "reply_to_user": {"reputation": 546, "user_id": 6892541, "user_type": "registered", "profile_image": "https://graph.facebook.com/10157364461515276/picture?type=large", "display_name": "Ahmed Sh", "link": "https://stackoverflow.com/users/6892541/ahmed-sh"}, "edited": false, "score": 0, "creation_date": 1536082491, "post_id": 52171151, "comment_id": 91293434, "body": "My ruby version is: <code>ruby 2.5.1p57 (2018-03-29 revision 63029) [x64-mingw32]</code>.I&#39;m programming on a Windows 10 computer. What is a configuration file and where can I find it?"}, {"owner": {"reputation": 546, "user_id": 6892541, "user_type": "registered", "profile_image": "https://graph.facebook.com/10157364461515276/picture?type=large", "display_name": "Ahmed Sh", "link": "https://stackoverflow.com/users/6892541/ahmed-sh"}, "edited": false, "score": 0, "creation_date": 1536082525, "post_id": 52171151, "comment_id": 91293450, "body": "and file config ?"}, {"owner": {"reputation": 78, "user_id": 9871630, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QkCHZ.png?s=128&g=1", "display_name": "Marek K&#252;the", "link": "https://stackoverflow.com/users/9871630/marek-k%c3%bcthe"}, "reply_to_user": {"reputation": 546, "user_id": 6892541, "user_type": "registered", "profile_image": "https://graph.facebook.com/10157364461515276/picture?type=large", "display_name": "Ahmed Sh", "link": "https://stackoverflow.com/users/6892541/ahmed-sh"}, "edited": false, "score": 0, "creation_date": 1536082820, "post_id": 52171151, "comment_id": 91293588, "body": "What do you mean file config?"}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 2, "creation_date": 1536082863, "post_id": 52171151, "comment_id": 91293602, "body": "If you call <code>vm1.to_a</code>, you can see that there are extra entries in the array that <a href=\"http://ruby-doc.org/core-2.6.0.preview2/RubyVM/InstructionSequence.html#method-i-to_a\" rel=\"nofollow noreferrer\">are not documented</a>. So, it seems there have been changes to the instruction format that aren&#39;t documented. It is very possible that they also haven&#39;t been implemented in the instruction sequence loader. As far as I know, everything under the <code>RubyVM</code> namespace is considered an internal API that is not guaranteed to work."}], "owner": {"reputation": 78, "user_id": 9871630, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QkCHZ.png?s=128&g=1", "display_name": "Marek K&#252;the", "link": "https://stackoverflow.com/users/9871630/marek-k%c3%bcthe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 324, "favorite_count": 1, "answer_count": 0, "score": 2, "last_activity_date": 1536084599, "creation_date": 1536081273, "question_id": 52171151, "link": "https://stackoverflow.com/questions/52171151/wrong-argument-type-nil-expected-string-typeerror", "title": "wrong argument type nil (expected String) (TypeError)", "body": "<p>I have a problem.</p>\n\n<p>My problem is that I am trying a few functions of RubyVM and getting an error message with the method \"load_from_binary\".\nI have already looked on the internet, but found no answer.</p>\n\n<p>My question is: what do I have to do to change the code so that it goes and what did I do wrong? How can I avoid this mistake in the future?</p>\n\n<p>The code looks like this:</p>\n\n<pre><code>vm1 = RubyVM::InstructionSequence.compile(\"puts 'Hello World'\")\n\nFile.write(\"test.iseq\", vm1.to_binary)\nstr = File.read(\"test.iseq\")\nvm2 = RubyVM::InstructionSequence.load_from_binary(str)\n</code></pre>\n\n<p>The principle: The data should be saved from vm1 in a file (binary format) and loaded in vm2 from the file.</p>\n\n<p>I would appreciate an answer.\nBest regards\nMarek K.</p>\n"}, {"tags": ["javascript", "ruby-on-rails", "ruby", "ajax"], "comments": [{"owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 0, "creation_date": 1536084748, "post_id": 52171147, "comment_id": 91294454, "body": "can you post the code where <code>liked_list</code> method is defined?"}, {"owner": {"reputation": 41, "user_id": 10089222, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-5jBNSGr-7Yk/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7ql3uNm8BlR_OjeNRQfBh0LioHQ6A/mo/photo.jpg?sz=128", "display_name": "Emanuel Coen", "link": "https://stackoverflow.com/users/10089222/emanuel-coen"}, "reply_to_user": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 0, "creation_date": 1536087722, "post_id": 52171147, "comment_id": 91295676, "body": "Sure, sorry! I edited the original question. Basically I display the heart icon in a different color here based on whether the user has already liked it or not. I also have guest users so there the heart is always inactive = &#39; &#39;"}], "answers": [{"comments": [{"owner": {"reputation": 41, "user_id": 10089222, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-5jBNSGr-7Yk/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7ql3uNm8BlR_OjeNRQfBh0LioHQ6A/mo/photo.jpg?sz=128", "display_name": "Emanuel Coen", "link": "https://stackoverflow.com/users/10089222/emanuel-coen"}, "edited": false, "score": 1, "creation_date": 1536141070, "post_id": 52173624, "comment_id": 91314179, "body": "That&#39;s indeed what happened. Thanks a lot. I updvoted your answer but my votes are not displayed publicly yet since I&#39;m new on Stackoverflow. Thanks a lot though !"}], "tags": [], "owner": {"reputation": 686, "user_id": 1491410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c938ed150a685b33d1b91266b382c8d?s=128&d=identicon&r=PG", "display_name": "elliotcm", "link": "https://stackoverflow.com/users/1491410/elliotcm"}, "is_accepted": true, "score": 2, "last_activity_date": 1536093127, "creation_date": 1536093127, "answer_id": 52173624, "question_id": 52171147, "link": "https://stackoverflow.com/questions/52171147/acts-as-votable-votes-are-recorded-twice-per-user-for-some-reason/52173624#52173624", "title": "acts as votable votes are recorded twice per user for some reason", "body": "<p>Are you using the rails jquery gem and also adding the code in <code>application.js</code>?  It sounds like your Rails JS is being loaded twice and double-submitting your AJAX form.</p>\n\n<p>Check your app logs for duplicate requests to confirm.</p>\n"}], "owner": {"reputation": 41, "user_id": 10089222, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-5jBNSGr-7Yk/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7ql3uNm8BlR_OjeNRQfBh0LioHQ6A/mo/photo.jpg?sz=128", "display_name": "Emanuel Coen", "link": "https://stackoverflow.com/users/10089222/emanuel-coen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "accepted_answer_id": 52173624, "answer_count": 1, "score": 1, "last_activity_date": 1536140245, "creation_date": 1536081262, "last_edit_date": 1536140245, "question_id": 52171147, "link": "https://stackoverflow.com/questions/52171147/acts-as-votable-votes-are-recorded-twice-per-user-for-some-reason", "title": "acts as votable votes are recorded twice per user for some reason", "body": "<p>for some reason votes are counted twice each time a user votes. I can't identify where the error is. <a href=\"https://i.stack.imgur.com/xylnS.png\" rel=\"nofollow noreferrer\">See screenshot for duplicate count</a>It seems like im firing double jquery requests but I don't know which to remove. rails-jquery gem or jquery in application.js</p>\n\n<p><strong>show.html.erb</strong></p>\n\n<pre><code>&lt;div class=\"like\"&gt;\n      &lt;%= link_to like_list_path(@list), :class =&gt; \"like-btn\", method: \n      :put, remote: :true do %&gt;\n        &lt;%= liked_list(@list) %&gt;\n      &lt;% end %&gt;\n      &lt;%= link_to \"\", \"data-toggle\" =&gt; \"modal\", \"data-target\" =&gt; \"#likeModalLong\" do %&gt;\n        &lt;span class=\"likes-count\"&gt;&lt;%= @list.get_upvotes.size %&gt;&lt;/span&gt;\n      &lt;% end %&gt;\n    &lt;/div&gt;\n</code></pre>\n\n<p><strong>lists_controller.rb</strong></p>\n\n<pre><code>def vote\n if !current_user.liked? @list\n   @list.liked_by current_user\n   #create like notification for the user\n   Notification.create(recipient: @list.user, actor: current_user, \n  action: \"liked\", notifiable: @list)\n elsif current_user.liked? @list\n  @list.unliked_by current_user\n end\nend\n</code></pre>\n\n<p><strong>vote.js.erb</strong></p>\n\n<pre><code>&lt;% if current_user.liked? @list %&gt;\n $('.fa-heart').addClass('liked');\n&lt;% else %&gt;\n $('.fa-heart').removeClass('liked');\n&lt;% end %&gt;\n$('.likes-count').html(\"&lt;%= @list.get_upvotes.size %&gt;\")\n</code></pre>\n\n<p><strong>application_helper.rb</strong></p>\n\n<pre><code>module ApplicationHelper\n  def liked_list(list)\n   if current_user.username == \"guestuser\"\n    liked = ''\n   else\n    liked = current_user.liked?(list) ? 'liked' : ''\n   end\n  content_tag(:i, '', class: \"fa fa-heart #{liked}\")\n end\nend\n</code></pre>\n\n<p>UPDATE: not sure which one to remove</p>\n\n<pre><code>**application.js**\n\n//= require jquery3\n//= require jquery_ujs\n//= require rails-ujs\n//= require cocoon\n//= require popper\n//= require bootstrap-sprockets\n//= require social-share-button\n//= require_tree .\n</code></pre>\n\n<p><strong>Gemfile</strong></p>\n\n<pre><code>gem 'jbuilder', '~&gt; 2.0'\ngem 'pg', '~&gt; 0.21'\ngem 'puma'\ngem 'rails', '5.2.0'\ngem 'redis'\ngem 'cocoon'\ngem 'autoprefixer-rails'\ngem 'font-awesome-sass', '~&gt; 5.0.9'\ngem 'sass-rails'\ngem 'simple_form'\ngem 'uglifier'\ngem 'webpacker'\ngem 'bootstrap', '~&gt; 4.1', '&gt;= 4.1.1'\ngem 'jquery-rails'\ngem 'searchkick'\ngem 'turbolinks'\ngem 'cloudinary'\ngem 'carrierwave', '~&gt; 1.2'\ngem 'acts_as_follower', github: 'tcocca/acts_as_follower', branch: 'master'\ngem 'public_activity'\ngem 'link_thumbnailer'\ngem 'acts_as_votable', '~&gt; 0.11.1'\n</code></pre>\n"}, {"tags": ["ruby", "parameters", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 4769, "user_id": 9541423, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f816e0659e0cf40bbe0ef7224a3a56a0?s=128&d=identicon&r=PG", "display_name": "Sovalina", "link": "https://stackoverflow.com/users/9541423/sovalina"}, "edited": false, "score": 2, "creation_date": 1536095326, "post_id": 52171051, "comment_id": 91298926, "body": "check out this line in your logs: <code>Unpermitted parameters: :utf8, :_method, :authenticity_token, :skill_type, :tech, :web_name, :web_url, :web_image, :experience, :commit</code> All the attributes you tried to update are unpermitted."}, {"owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 0, "creation_date": 1536126572, "post_id": 52171051, "comment_id": 91305817, "body": "Are you sure all the attributes of <code>Skill</code> are of Hash type? Can you post the model and DB schema?"}, {"owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 0, "creation_date": 1536126911, "post_id": 52171051, "comment_id": 91305951, "body": "Hash parameters are permitted as: <code>params.permit(:id, skill_type: [&#39;0&#39;], tech: [: shitunnkokoko], web_name: [:ssasdesilgffgfo], ...</code>"}, {"owner": {"reputation": 1, "user_id": 10313394, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/401a564b21bfeae83f1425f3e0c8aff5?s=128&d=identicon&r=PG&f=1", "display_name": "Dr.N", "link": "https://stackoverflow.com/users/10313394/dr-n"}, "edited": false, "score": 0, "creation_date": 1536638778, "post_id": 52171051, "comment_id": 91484486, "body": "sorry for late reply. I added model and schema for User and Skill. please analyze how to fix this... Thanks guys"}], "answers": [{"tags": [], "owner": {"reputation": 1305, "user_id": 623919, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/c7d2113d86e7a9b16e8cac6956096bf0?s=128&d=identicon&r=PG", "display_name": "Axel Tetzlaff", "link": "https://stackoverflow.com/users/623919/axel-tetzlaff"}, "is_accepted": false, "score": 1, "last_activity_date": 1536085381, "creation_date": 1536085381, "answer_id": 52172044, "question_id": 52171051, "link": "https://stackoverflow.com/questions/52171051/update-does-not-work-params-problem-i-guess/52172044#52172044", "title": "Update does not work... params problem I guess", "body": "<p>My guess is the <code>@skill</code> is empty.</p>\n\n<p>In the <code>edit</code> Action in the <code>SkillsController</code> you load <code>@skill</code> and <code>@user</code> by the same id (<code>id:params[:id]</code>)</p>\n\n<pre><code>@user=User.find_by(id:params[:id])\n@skill=Skill.find_by(id:params[:id])\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 10313394, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/401a564b21bfeae83f1425f3e0c8aff5?s=128&d=identicon&r=PG&f=1", "display_name": "Dr.N", "link": "https://stackoverflow.com/users/10313394/dr-n"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1536638692, "creation_date": 1536080767, "last_edit_date": 1536638692, "question_id": 52171051, "link": "https://stackoverflow.com/questions/52171051/update-does-not-work-params-problem-i-guess", "title": "Update does not work... params problem I guess", "body": "<p>I could not update because of params problem I guess. Even though flash said \"updated successfully\" but nothing changed. I used <code>User</code> model and <code>Skill</code> model which make things more complicated.\nPlease tell me how to fix this situation.</p>\n\n<p>Skills controller:</p>\n\n<pre><code>class SkillsController &lt; UsersController\n  def update  \n    @skill=Skill.find_by(id:params[:id])\n\n    if @skill.update_attributes(skills_params)\n      flash[:success]=\"Updated Successfully\"\n      redirect_to users_url\n    else\n      flash[:danger]=\"no infomation\"\n      render @skill\n    end\n  end\n\n  private\n\n  def skills_params\n    params.permit(:id,:skill_type, :tech, :web_name, :web_url, :web_image, :experience)\n  end\nend\n</code></pre>\n\n<p>skills/edit.html.erb:</p>\n\n<pre><code>&lt;%= form_for @skill do |f| %&gt;\n  &lt;%= f.label:skill_type %&gt;\n  &lt;%= text_field :skill_type, value=@skill.skill_type, :placeholder =&gt; \n@skill.skill_type %&gt;\n\n  &lt;%= f.label:tech %&gt;\n  &lt;%= text_field :tech, value=@skill.tech,:placeholder =&gt; @skill.tech %&gt;\n\n  &lt;!-- More fields --&gt;\n\n  &lt;%= f.submit %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>Server logs:</p>\n\n<pre><code>Processing by SkillsController#update as HTML\nParameters{\"utf8\"=&gt;\"\u2713\",\"authenticity_token\"=&gt;\"XrbQqewGHBC8yoFHFg9tkg9sCTtscV+QjUMgaw2pdXEsUk+NiCJHSHVkj/N/bhjD1uaExeop4uSXb6hCCKGD/Q==\", \"skill_type\"=&gt;{\"0\"=&gt;\"1\"}, \"tech\"=&gt;{\"shitunnkokoko\"=&gt;\"aaaa\"}, \"web_name\"=&gt;{\"ssasdesilgffgfo\"=&gt;\"aaaaaa\"}, \"web_url\"=&gt;{\"googleeee.com\"=&gt;\"aaa@aaaa\"}, \"web_image\"=&gt;{\"dfsafsafasfasdf\"=&gt;\"bbbbb\"}, \"experience\"=&gt;{\"javaaaaaa\"=&gt;\"sssss\"}, \"commit\"=&gt;\"\u5909\u66f4\u3059\u308b\", \"id\"=&gt;\"5\"}\n  Skill Load (0.1ms)  SELECT  \"skills\".* FROM \"skills\" WHERE \"skills\".\"id\" = ? LIMIT ?  [[\"id\", 5], [\"LIMIT\", 1]]\nUnpermitted parameters: :utf8, :_method, :authenticity_token, :skill_type, :tech, :web_name, :web_url, :web_image, :experience, :commit\n   (0.1ms)  begin transaction\n  User Load (0.1ms)  SELECT  \"users\".* FROM \"users\" WHERE \"users\".\"id\" = ? LIMIT ?  [[\"id\", 5], [\"LIMIT\", 1]]\n   (0.0ms)  commit transaction\n</code></pre>\n\n<p>**</p>\n\n<h2>Additional Information</h2>\n\n<p>**</p>\n\n<p>skill.ruby</p>\n\n<pre><code>class Skill &lt; ApplicationRecord\n belongs_to :user\n # mount_uploader :picture, PictureUploader\n validates :user_id,presence:true\n validates :experience, length:{maximum:500}\nend\n</code></pre>\n\n<p>user.rb</p>\n\n<pre><code>class User &lt; ApplicationRecord\n  before_save {self.email = email.downcase}\n  validates :name, presence:true,length:{maximum:50}\n  VALID_EMAIL_FORM=/\\A[a-zA-Z0-9_\\#!$%&amp;`'*+\\-{|}~^\\/=?\\.]+@[a-zA-Z0-9] \n[a-zA-Z0-9\\.-]+\\z/\n  validates :email, presence:true,length:{maximum:255},\n                   format: { with: VALID_EMAIL_FORM},\n                   uniqueness:{ case_sensitive: false }\n  has_secure_password\n  validates :password, length:{minimum:6},presence:true\n\n  def skills\n    return Skill.find_by(user_id:self.id)\n  end\nend\n</code></pre>\n\n<p>skill table schema</p>\n\n<pre><code>sqlite&gt; .schema skills\nCREATE TABLE \"skills\" (\"id\" INTEGER PRIMARY KEY AUTOINCREMENT NOT \nNULL, \"skill_type\" integer DEFAULT NULL, \"tech\" varchar DEFAULT NULL, \n\"web_name\" varchar DEFAULT NULL, \"web_url\" text DEFAULT NULL, \n\"web_image\" varchar DEFAULT NULL, \"experience\" text DEFAULT NULL, \n\"created_at\" datetime NOT NULL, \"updated_at\" datetime NOT NULL, \n\"picture\" varchar DEFAULT NULL, \"user_id\" integer);\nCREATE INDEX \"index_skills_on_user_id_and_created_at\" ON \"skills\" \n(\"created_at\");\nCREATE INDEX \"index_skills_on_user_id\" ON \"skills\" (\"user_id\");\n</code></pre>\n\n<p>users table schema</p>\n\n<pre><code>sqlite&gt; .schema users\nCREATE TABLE \"users\" (\"id\" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, \n\"name\" varchar DEFAULT NULL, \"email\" varchar DEFAULT NULL, \n\"created_at\" datetime NOT NULL, \"updated_at\" datetime NOT NULL, \n\"password_digest\" varchar DEFAULT NULL);\nCREATE UNIQUE INDEX \"index_users_on_email\" ON \"users\" (\"email\");\n</code></pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 2, "creation_date": 1536080628, "post_id": 52170692, "comment_id": 91292608, "body": "Here&#39;s a couple of tips: you are sorting the array three times. What language construct do you know that lets you &quot;save&quot; the result of a computation and re-use it multiple times? But actually \u2026 do you need to sort the array to find the largest and smallest element? Can you think of a way by looking at every element only once instead of multiple times as <code>sort</code> does? (Oh, and once you have found it, I am going to tell you about <code>Enumerable#minmax</code> ;-) )"}, {"owner": {"reputation": 3183, "user_id": 1214743, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9CsNP.png?s=128&g=1", "display_name": "Malachi", "link": "https://stackoverflow.com/users/1214743/malachi"}, "reply_to_user": {"reputation": 5019, "user_id": 8260484, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/35e7d5435c75864734b3ef3bcbc271e5?s=128&d=identicon&r=PG&f=1", "display_name": "cybernetic.nomad", "link": "https://stackoverflow.com/users/8260484/cybernetic-nomad"}, "edited": false, "score": 0, "creation_date": 1536081236, "post_id": 52170692, "comment_id": 91292877, "body": "@cybernetic.nomad just because the code works, does not mean it is off-topic on SO."}, {"owner": {"reputation": 23, "user_id": 10316103, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1036be724dcd129b3a8fdba88a915ba?s=128&d=identicon&r=PG&f=1", "display_name": "katalin", "link": "https://stackoverflow.com/users/10316103/katalin"}, "edited": false, "score": 0, "creation_date": 1536081240, "post_id": 52170692, "comment_id": 91292882, "body": "to &quot;save&quot; i tried sort! , but it wasn&#39;t working.  i sorted so i can have a full length of the numbers, so i can get the missing one, because on the testing is arr1 = [10,9,8,9,6,1,2,4,3,2,5,5,3] from which i couldn&#39;t see another way of finding the missing number."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1536089645, "post_id": 52170692, "comment_id": 91296462, "body": "Questions should always begin with,a statement of the problem, something like the first paragraph of my answer. Also, I don&#39;t know exactly when you awarded the green checkmark (within an hour of posting the question, presumably), but there is no rush to do so. Early selections can discourage other answers and, if done soon after the minimum wait time, is seen by some as discourteous to those still preparing questions. Many here wait at least a couple of hours. I am not saying this because I have a dispute your choice, just because you seem to be new to SO."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1536149892, "post_id": 52170692, "comment_id": 91319596, "body": "&quot;to &quot;save&quot; i tried sort!&quot; \u2013 Have you been taught about &quot;variables&quot; yet?"}, {"owner": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "edited": false, "score": 0, "creation_date": 1536156520, "post_id": 52170692, "comment_id": 91324048, "body": "Is there only ever 1 missing number or could there be multiple?  ie what should an input of <code>[12, 10, 9, 8, 9, 6, 1, 2, 4, 3, 2, 5, 5, 3]</code> return?"}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 10316103, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1036be724dcd129b3a8fdba88a915ba?s=128&d=identicon&r=PG&f=1", "display_name": "katalin", "link": "https://stackoverflow.com/users/10316103/katalin"}, "edited": false, "score": 0, "creation_date": 1536081015, "post_id": 52171035, "comment_id": 91292778, "body": "thank you, but it gives an issue Expected: [7, [2, 3, 5, 9]], instead got: [[7], [2, 3, 5, 9]]"}, {"owner": {"reputation": 23, "user_id": 10316103, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1036be724dcd129b3a8fdba88a915ba?s=128&d=identicon&r=PG&f=1", "display_name": "katalin", "link": "https://stackoverflow.com/users/10316103/katalin"}, "edited": false, "score": 0, "creation_date": 1536082211, "post_id": 52171035, "comment_id": 91293315, "body": "and it worked. thank you. now I&#39;m gonna do my research to understand all of your program"}], "tags": [], "owner": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "is_accepted": true, "score": 0, "last_activity_date": 1536083456, "last_edit_date": 1536083456, "creation_date": 1536080677, "answer_id": 52171035, "question_id": 52170692, "link": "https://stackoverflow.com/questions/52170692/make-it-simpler-so-it-will-be-quicker/52171035#52171035", "title": "make it simpler so it will be quicker", "body": "<p>I agree this is better put on code review, but to answer your question there are better data structures for solving this problem, consider using as hash:</p>\n\n<pre><code>def find_dups_missing(arr)\n  min, max = arr.min, arr.max\n  hash = {}\n  min.upto(max) { |i| hash[i] = :sentinel }\n  arr.each { |el| hash[el] == :sentinel ? hash[el] = 1 : hash[el] += 1 }\n\n  hash.select { |_, v| v == :sentinel }.keys &lt;&lt; hash.select { |_, v| v != :sentinel &amp;&amp; v &gt; 1 }.keys\nend\n</code></pre>\n\n<p>We loop through, build a hash where each key is a number from <code>min</code> to <code>max</code> and the value points to an object that is just a placeholder (I called it <code>sentinel</code>).  </p>\n\n<p>Next we loop through our array, we ask if the hash value is still in its placeholder position, if it is, set the value to <code>1</code> but if it's not, just increment.  This way, we keep track of when we see a value for the first time vs. subsequent times (ie dupes).</p>\n\n<p>Then, after it's all said in done, we have a hash that looks like this:</p>\n\n<pre><code>{1=&gt;1, 2=&gt;2, 3=&gt;2, 4=&gt;1, 5=&gt;2, 6=&gt;1, 7=&gt;:sentinel, 8=&gt;1, 9=&gt;2, 10=&gt;1}\n</code></pre>\n\n<p>We know where the value is <code>&gt; 1</code>, we have duplicates and we also know where the value still says <code>sentinel</code> we never saw it in our array, there's our gap(s).</p>\n\n<p>All together, this method runs in <code>O(n)</code> time (on average) with <code>O(n)</code> space.</p>\n"}, {"tags": [], "owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "is_accepted": false, "score": 1, "last_activity_date": 1536092185, "last_edit_date": 1536092185, "creation_date": 1536087156, "answer_id": 52172401, "question_id": 52170692, "link": "https://stackoverflow.com/questions/52170692/make-it-simpler-so-it-will-be-quicker/52172401#52172401", "title": "make it simpler so it will be quicker", "body": "<p>This is about as fast as I can get this problem for now </p>\n\n<pre><code>def find_dups_miss(arr)\n  groups = arr.group_by(&amp;:itself) \n  arr.minmax.reduce(:upto).to_a - groups.keys &lt;&lt; groups.select {|_,v| v.size &gt; 1}.keys.sort\nend\n</code></pre>\n\n<p>Explanation based on posted <code>Array</code></p>\n\n<p>First we group the <code>Array</code> elements by themselves </p>\n\n<pre><code>{10=&gt;[10], 9=&gt;[9, 9], 8=&gt;[8], 6=&gt;[6], 1=&gt;[1], 2=&gt;[2, 2], 4=&gt;[4], 3=&gt;[3, 3], 5=&gt;[5, 5]}\n</code></pre>\n\n<p>Then we create an <code>Enumerator</code> from the minimum and maximum (<code>arr.minmax.reduce(:upto)</code>) values from the <code>Array</code>, covert it to an <code>Array</code> (<code>to_a</code>) and subtract all the <code>keys</code> from the previous group grouping:</p>\n\n<pre><code>arr.minmax.reduce(:upto).to_a - groups.keys\n#=&gt; [7]\n</code></pre>\n\n<p>Then we collect of all the numbers that occurred more than once in the original <code>Array</code>: (I sorted them because the desired result was sorted)</p>\n\n<pre><code>groups.select {|_,v| v.size &gt; 1}.keys.sort\n#=&gt; [2, 3, 5, 9]\n</code></pre>\n\n<p>and use <code>Array#&lt;&lt;</code> to push this <code>Array</code> back into the one we created in the previous step resulting in </p>\n\n<pre><code>#=&gt; [7,[2, 3, 5, 9]]\n</code></pre>\n\n<p>If there is only ever 1 number missing then the following is slightly faster since it does not create an additional <code>Array</code> and short circuits on the first missing number: </p>\n\n<pre><code>def find_dups_miss(arr)\n  groups = arr.group_by(&amp;:itself) \n  [groups.select {|_,v| v.size &gt; 1}.keys.sort].unshift(arr.minmax.reduce(:upto).find {|n| groups[n].nil?} )\nend\n</code></pre>\n\n<p>Additionally for a very large <code>Array</code>:</p>\n\n<pre><code>groups.collect {|k,v| k if v.size &gt; 1 }.compact.sort \n</code></pre>\n\n<p>appears to be slightly more efficient than </p>\n\n<pre><code>groups.select {|_,v| v.size &gt; 1}.keys.sort\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "edited": false, "score": 0, "creation_date": 1536096797, "post_id": 52172746, "comment_id": 91299435, "body": "very clever Cary!  On a large input size, yours is performing the best"}, {"owner": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "edited": false, "score": 0, "creation_date": 1536156491, "post_id": 52172746, "comment_id": 91324024, "body": "One assumption you&#39;re making here and to be fair the OP didn&#39;t qualify it differently is that you&#39;re only finding <i>one</i> number that is missing.  I wonder if <code>[12, 10, 9, 8, 9, 6, 1, 2, 4, 3, 2, 5, 5, 3]</code>, should include 11 and 7?"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "edited": false, "score": 0, "creation_date": 1536158530, "post_id": 52172746, "comment_id": 91325352, "body": "@Anthony, I was working backwards. I wanted to use the expression for the sum of an arithmetic series so I had no choice but to assume exactly one value was missing. :-)"}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 3, "last_activity_date": 1536187928, "last_edit_date": 1536187928, "creation_date": 1536088914, "answer_id": 52172746, "question_id": 52170692, "link": "https://stackoverflow.com/questions/52170692/make-it-simpler-so-it-will-be-quicker/52172746#52172746", "title": "make it simpler so it will be quicker", "body": "<p>We are given an array of integers, <code>arr</code> with the property that it contains every integer between <code>min_val</code> and <code>max_val</code> but one, where <code>min_val, max_val = arr.minmax</code>. We wish to determine the missing integer and also the duplicate values in <code>arr</code>.</p>\n\n<pre><code>require 'set'\n\ndef missing_and_dups(arr)\n  smallest, largest = arr.minmax\n  dups = Set.new\n  all = arr.each_with_object(Set.new) { |n,all| dups &lt;&lt; n if all.add?(n).nil? }\n  [(smallest+largest)*(largest-smallest+1)/2 - all.sum, dups.to_a]\nend\n\nmissing_and_dups [10,9,8,9,6,1,2,4,3,2,5,5,3]\n  #=&gt; [7, [9, 2, 5, 3]]\n</code></pre>\n\n<p>Note that <a href=\"http://ruby-doc.org/stdlib-2.5.1/libdoc/set/rdoc/Set.html#method-i-add-3F\" rel=\"nofollow noreferrer\">Set#add?</a> returns <code>nil</code> if the element being added is already in the set. Rather than finding the missing element <code>n</code> with</p>\n\n<pre><code>((smallest..largest).to_a - arr).first\n</code></pre>\n\n<p>I've made use of the fact that</p>\n\n<pre><code>all.sum + n = (smallest+largest)*(smallest+largest-1)/2\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 10316103, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1036be724dcd129b3a8fdba88a915ba?s=128&d=identicon&r=PG&f=1", "display_name": "katalin", "link": "https://stackoverflow.com/users/10316103/katalin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 79, "favorite_count": 0, "accepted_answer_id": 52171035, "answer_count": 3, "score": 1, "last_activity_date": 1536187928, "creation_date": 1536079211, "last_edit_date": 1536079811, "question_id": 52170692, "link": "https://stackoverflow.com/questions/52170692/make-it-simpler-so-it-will-be-quicker", "title": "make it simpler so it will be quicker", "body": "<p>I am quite new and got an issue with an exercise.\nI solved it, works, but it's too slow when it comes to check more numbers-maximum length aprox. = 1.000.000 .\nHow could it been written for a quicker solving?</p>\n\n<pre><code>def find_dups_miss(arr)\n    ((arr.sort.first..arr.sort.last).to_a - arr.sort)  + [arr.select{|item| arr.count(item) &gt; 1}.uniq.sort]\nend\n</code></pre>\n\n<p>testing:</p>\n\n<pre><code>arr1 = [10,9,8,9,6,1,2,4,3,2,5,5,3]\n    Test.assert_equals(find_dups_miss(arr1),[7, [2, 3, 5, 9]])\n</code></pre>\n\n<p>It needs to find the missing number and the duplicates.</p>\n\n<p>the error message:\nWhy did my code time out?\nOur servers are configured to only allow a certain amount of time for your code to execute. In rare cases the server may be taking on too much work and simply wasn't able to run your code efficiently enough. Most of the time though this issue is caused by inefficient algorithms. If you see this error multiple times you should try to optimize your code further.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord"], "answers": [{"comments": [{"owner": {"reputation": 362, "user_id": 7521284, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/dBvnp.jpg?s=128&g=1", "display_name": "Ulises", "link": "https://stackoverflow.com/users/7521284/ulises"}, "edited": false, "score": 0, "creation_date": 1536077424, "post_id": 52170201, "comment_id": 91291137, "body": "Hi Pavan, even with the foreign_key on Sucursale model, i get the same error. <code>unknown attribute &#39;cliente_id&#39; for Sucursale.</code>"}, {"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "reply_to_user": {"reputation": 362, "user_id": 7521284, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/dBvnp.jpg?s=128&g=1", "display_name": "Ulises", "link": "https://stackoverflow.com/users/7521284/ulises"}, "edited": false, "score": 0, "creation_date": 1536077675, "post_id": 52170201, "comment_id": 91291268, "body": "@Ulises My apologies. It should be in <code>Cliente</code> model. I&#39;ve updated my answer."}, {"owner": {"reputation": 362, "user_id": 7521284, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/dBvnp.jpg?s=128&g=1", "display_name": "Ulises", "link": "https://stackoverflow.com/users/7521284/ulises"}, "edited": false, "score": 0, "creation_date": 1536078327, "post_id": 52170201, "comment_id": 91291575, "body": "I tried on the two ways and works fine, thanks a lot, so on the migration always need to set in on non-plural, i supouse the belongs_to on the migration is a helper and doesn&#39;t validate if the sintaxis for the model name are correct"}], "tags": [], "owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "is_accepted": true, "score": 2, "last_activity_date": 1536077630, "last_edit_date": 1536077630, "creation_date": 1536076984, "answer_id": 52170201, "question_id": 52170025, "link": "https://stackoverflow.com/questions/52170025/rails-model-error-unknown-attribute-on-save-with-belongs-to-and-has-many/52170201#52170201", "title": "Rails Model error unknown attribute on save with belongs_to and has_many", "body": "<blockquote>\n  <p>unknown attribute 'cliente_id' for Sucursale.</p>\n</blockquote>\n\n<p>The problem is that <code>t.belongs_to :clientes, index: true</code> generates the column name as <code>clientes_id</code> <strong>not</strong> <code>cliente_id</code></p>\n\n<p><strong>Solution:</strong></p>\n\n<p>You can choose to <strong>rollback the migration</strong>, edit the code in the migration file as </p>\n\n<pre><code>t.belongs_to :cliente, index: true\n</code></pre>\n\n<p>and migrate it again.</p>\n\n<p><em>OR</em></p>\n\n<p>If you choose not to rollback the migration, then specify the custom <code>foreign_key</code> on the association to override the default behavior of Rails. </p>\n\n<pre><code>class Cliente &lt; ApplicationRecord\n  has_many :sucursales, foreign_key: :clientes_id\nend\n</code></pre>\n"}], "owner": {"reputation": 362, "user_id": 7521284, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/dBvnp.jpg?s=128&g=1", "display_name": "Ulises", "link": "https://stackoverflow.com/users/7521284/ulises"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 756, "favorite_count": 0, "accepted_answer_id": 52170201, "answer_count": 1, "score": 2, "last_activity_date": 1536077630, "creation_date": 1536076274, "last_edit_date": 1592644375, "question_id": 52170025, "link": "https://stackoverflow.com/questions/52170025/rails-model-error-unknown-attribute-on-save-with-belongs-to-and-has-many", "title": "Rails Model error unknown attribute on save with belongs_to and has_many", "body": "<p>i wan't to understan how works the model on rails when you setup the relations with plural or non-plural.</p>\n<p>Example:</p>\n<p>We have this model called &quot;Cliente&quot;.</p>\n<pre><code>class Cliente &lt; ApplicationRecord\n    has_many :sucursales\nend\n</code></pre>\n<p>The table on MySQL is:</p>\n<p><a href=\"https://i.stack.imgur.com/QwiNv.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/QwiNv.png\" alt=\"enter image description here\" /></a></p>\n<p>And we have the model called &quot;Sucursale&quot;:</p>\n<pre><code>class Sucursale &lt; ApplicationRecord\n    belongs_to :cliente\nend\n</code></pre>\n<p>The table is:</p>\n<p><a href=\"https://i.stack.imgur.com/F42Dw.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/F42Dw.png\" alt=\"enter image description here\" /></a></p>\n<p>On the table sucursale already has &quot;clientes_id&quot; that was created with a migration &quot;t.belongs_to :clientes, index: true.</p>\n<p>On our simple crud, we wanna create a new Sucursale with the client relation with:</p>\n<pre><code>def create\n        @sucursalcliente = Cliente.find(params[:clientes_id])\n        @sucursalcliente.sucursales.build(\n            :nombre =&gt; params[:nombre], \n            :calle =&gt; params[:calle],\n            :numero_interior =&gt; params[:numero_interior],\n            :numero_exterior =&gt; params[:numero_exterior],\n            :colonia =&gt; params[:colonia],\n            :municipio =&gt; params[:municipio],\n            :estado =&gt; params[:estado],\n            :pais =&gt; params[:pais],\n            :codigo_postal =&gt; params[:codigo_postal],\n            :email =&gt; params[:email],\n            :telefono =&gt; params[:telefono]\n        )])\n        if @sucursalcliente.save\n            flash[:info] = 'Sucursal creado correctamente'\n            redirect_to action: 'index'\n        else\n            flash[:alert] = 'Error al crear la sucursal'\n            redirect_to action: 'index'\n        end\n    end\n</code></pre>\n<p>But when we run that script we get.</p>\n<pre><code>unknown attribute 'cliente_id' for Sucursale.\n</code></pre>\n<p>Are we missing something?</p>\n<p>Regards in advance.</p>\n"}, {"tags": ["html", "ruby-on-rails", "ruby", "forms", "erb"], "comments": [{"owner": {"reputation": 2960, "user_id": 7426461, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/Ldwxy.jpg?s=128&g=1", "display_name": "Cannon Moyer", "link": "https://stackoverflow.com/users/7426461/cannon-moyer"}, "edited": false, "score": 0, "creation_date": 1536075115, "post_id": 52169530, "comment_id": 91289888, "body": "I would go with a JavaScript solution instead. Forms are not supposed to go inside of table rows. You can read more about it here: <a href=\"https://stackoverflow.com/questions/5967564/form-inside-a-table/5967613\" title=\"form inside a table\">stackoverflow.com/questions/5967564/form-inside-a-table/5967&zwnj;&#8203;613</a>"}], "answers": [{"comments": [{"owner": {"reputation": 7, "user_id": 10315030, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-SjBDFCKT6O0/AAAAAAAAAAI/AAAAAAAAKeo/3pLIoS6B-D8/photo.jpg?sz=128", "display_name": "Edward Lancaster", "link": "https://stackoverflow.com/users/10315030/edward-lancaster"}, "edited": false, "score": 0, "creation_date": 1536076372, "post_id": 52169773, "comment_id": 91290632, "body": "Thank you that worked :). The problem now is that the value comes through like this: <code>{:value =&gt; &quot;(String I need)&quot;}</code>. Do you know a way to circumvent this issue?"}, {"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "reply_to_user": {"reputation": 7, "user_id": 10315030, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-SjBDFCKT6O0/AAAAAAAAAAI/AAAAAAAAKeo/3pLIoS6B-D8/photo.jpg?sz=128", "display_name": "Edward Lancaster", "link": "https://stackoverflow.com/users/10315030/edward-lancaster"}, "edited": false, "score": 0, "creation_date": 1536076529, "post_id": 52169773, "comment_id": 91290694, "body": "@EdwardLancaster Can you post the params hash that is appeared in the server log when you click on submit?"}, {"owner": {"reputation": 7, "user_id": 10315030, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-SjBDFCKT6O0/AAAAAAAAAAI/AAAAAAAAKeo/3pLIoS6B-D8/photo.jpg?sz=128", "display_name": "Edward Lancaster", "link": "https://stackoverflow.com/users/10315030/edward-lancaster"}, "edited": false, "score": 0, "creation_date": 1536076782, "post_id": 52169773, "comment_id": 91290798, "body": "<code>Parameters: {&quot;utf8&quot;=&gt;&quot;\u2713&quot;, &quot;authenticity_token&quot;=&gt;&quot;PsyvuDNCpEoSkva4pQcM3xkMe2KUt6m+UV+qk&zwnj;&#8203;hTJCeIWiV3VmP6jpuu32&zwnj;&#8203;wK&#47;v&#47;+YLTXt4lgdBSYmQ&zwnj;&#8203;qxaN7I5+g==&quot;, &quot;title&quot;=&gt;&quot;{:value=&gt;\\&quot;The Future of Cars\\&quot;}&quot;, &quot;commit&quot;=&gt;&quot;W&#228;hlen&quot;}</code>"}, {"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "reply_to_user": {"reputation": 7, "user_id": 10315030, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-SjBDFCKT6O0/AAAAAAAAAAI/AAAAAAAAKeo/3pLIoS6B-D8/photo.jpg?sz=128", "display_name": "Edward Lancaster", "link": "https://stackoverflow.com/users/10315030/edward-lancaster"}, "edited": false, "score": 0, "creation_date": 1536077121, "post_id": 52169773, "comment_id": 91290958, "body": "Ok, you can access it with <code>params[:title][:value]</code>"}, {"owner": {"reputation": 7, "user_id": 10315030, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-SjBDFCKT6O0/AAAAAAAAAAI/AAAAAAAAKeo/3pLIoS6B-D8/photo.jpg?sz=128", "display_name": "Edward Lancaster", "link": "https://stackoverflow.com/users/10315030/edward-lancaster"}, "edited": false, "score": 0, "creation_date": 1536077995, "post_id": 52169773, "comment_id": 91291419, "body": "I tried calling that, but then it spits out a type error in my controller, saying &quot;no implicit conversion of Symbol into Integer&quot;."}, {"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "reply_to_user": {"reputation": 7, "user_id": 10315030, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-SjBDFCKT6O0/AAAAAAAAAAI/AAAAAAAAKeo/3pLIoS6B-D8/photo.jpg?sz=128", "display_name": "Edward Lancaster", "link": "https://stackoverflow.com/users/10315030/edward-lancaster"}, "edited": false, "score": 0, "creation_date": 1536078474, "post_id": 52169773, "comment_id": 91291649, "body": "@EdwardLancaster At which line it triggers that error?"}, {"owner": {"reputation": 7, "user_id": 10315030, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-SjBDFCKT6O0/AAAAAAAAAAI/AAAAAAAAKeo/3pLIoS6B-D8/photo.jpg?sz=128", "display_name": "Edward Lancaster", "link": "https://stackoverflow.com/users/10315030/edward-lancaster"}, "edited": false, "score": 0, "creation_date": 1536078931, "post_id": 52169773, "comment_id": 91291846, "body": "Line 38 in my controller <code>prestitle = params[:title][:value]</code>"}, {"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "reply_to_user": {"reputation": 7, "user_id": 10315030, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-SjBDFCKT6O0/AAAAAAAAAAI/AAAAAAAAKeo/3pLIoS6B-D8/photo.jpg?sz=128", "display_name": "Edward Lancaster", "link": "https://stackoverflow.com/users/10315030/edward-lancaster"}, "edited": false, "score": 0, "creation_date": 1536079922, "post_id": 52169773, "comment_id": 91292274, "body": "@EdwardLancaster Try changing <code>&lt;%= hidden_field_tag &#39;prestitle&#39;, value: pres.Title %&gt;</code> to <code>&lt;%= hidden_field_tag &#39;prestitle&#39;, pres.Title %&gt;</code>"}, {"owner": {"reputation": 7, "user_id": 10315030, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-SjBDFCKT6O0/AAAAAAAAAAI/AAAAAAAAKeo/3pLIoS6B-D8/photo.jpg?sz=128", "display_name": "Edward Lancaster", "link": "https://stackoverflow.com/users/10315030/edward-lancaster"}, "edited": false, "score": 0, "creation_date": 1536080322, "post_id": 52169773, "comment_id": 91292470, "body": "Thank you very much, the problem has been completely resolved :)"}], "tags": [], "owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "is_accepted": true, "score": 0, "last_activity_date": 1536080421, "last_edit_date": 1592644375, "creation_date": 1536075187, "answer_id": 52169773, "question_id": 52169530, "link": "https://stackoverflow.com/questions/52169530/changing-text-on-submit-tag/52169773#52169773", "title": "Changing text on submit_tag", "body": "<blockquote>\n<p>I would like the button to say &quot;Choose&quot;, then send off the parameter\npres.Title to a function that I have defined. For some reason, the\nbutton in the table shows the value of pres.Title, and not of &quot;Choose&quot;</p>\n<p>submit_tag(value = &quot;Save changes&quot;, options = {}) public</p>\n</blockquote>\n<pre><code>&lt;%= submit_tag &quot;Choose&quot;, class: &quot;btn&quot;, value: pres.Title %&gt;\n</code></pre>\n<p><strong>does not</strong> generates the submit button with text <em><strong>Choose</strong></em> because you are overriding the value as <code>pres.Title</code>. You need to change it to just</p>\n<pre><code>&lt;%= submit_tag &quot;Choose&quot;, class: &quot;btn&quot; %&gt;\n</code></pre>\n<p>And you can use <code>hidden_field_tag</code> instead for that purpose like so</p>\n<pre><code>&lt;%= form_tag students_select_path do %&gt;\n  &lt;%= hidden_field_tag 'prestitle', pres.Title %&gt;\n  &lt;%= submit_tag &quot;Choose&quot;, class: &quot;btn&quot; %&gt;\n&lt;% end %&gt;\n</code></pre>\n<p>Finally, access the value with <code>params[:prestitle]</code> in the controller.</p>\n<p><strong>Note:</strong>\nAs one of the Rails conventions, the <strong>attribute names</strong> should be of <strong>lowercase</strong>. I recommend you to follow it in your app.</p>\n"}], "owner": {"reputation": 7, "user_id": 10315030, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-SjBDFCKT6O0/AAAAAAAAAAI/AAAAAAAAKeo/3pLIoS6B-D8/photo.jpg?sz=128", "display_name": "Edward Lancaster", "link": "https://stackoverflow.com/users/10315030/edward-lancaster"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 512, "favorite_count": 0, "accepted_answer_id": 52169773, "answer_count": 1, "score": 0, "last_activity_date": 1536080421, "creation_date": 1536074399, "question_id": 52169530, "link": "https://stackoverflow.com/questions/52169530/changing-text-on-submit-tag", "title": "Changing text on submit_tag", "body": "<p>I am working on a sign up application for presentations in Ruby on Rails. As such, I am displaying a list of available presentations, with the last column displaying a button to register for that specific presentation.</p>\n\n<pre><code>&lt;table class=\"table\"&gt;\n  &lt;thead class=\"thead-dark\"&gt;\n    &lt;tr&gt;\n      &lt;th scope=\"col\"&gt;Name&lt;/th&gt;\n      # ...\n    &lt;/tr&gt;\n  &lt;/thead&gt;\n  &lt;tbody&gt;\n    &lt;tr&gt;\n    &lt;% @presentations.each do |pres| %&gt;\n      &lt;td scope=\"row\"&gt;&lt;%= pres.Name %&gt;&lt;/td&gt;\n      # ...\n      &lt;td scope=\"row\"&gt;\n        &lt;% unless @current_student.Selected == pres.Titel %&gt;\n        &lt;%= form_tag students_select_path do %&gt;\n          &lt;%= submit_tag \"Choose\", class: \"btn\", value: pres.Title %&gt;\n        &lt;% end %&gt;\n      &lt;/td&gt;\n    &lt;/tr&gt;\n  &lt;/tbody&gt;\n&lt;/table&gt;\n</code></pre>\n\n<p>I would like the button to say <code>\"Choose\"</code>, then send off the parameter <code>pres.Title</code> to a function that I have defined. For some reason, the button in the table shows the value of <code>pres.Title</code>, and not of <code>\"Choose\"</code>. How can this be fixed?</p>\n\n<p>Current working implementation:</p>\n\n<pre><code>def addtodb\n  @student = Student.find_by(id: session[:student_id])\n  if @student.Selected == nil\n    prestitle = params[:commit]\n    @schueler.update_attribute(:Selected, prestitle)\n    redirect_to students_select_path\n  end\nend\n</code></pre>\n"}, {"tags": ["html", "ruby-on-rails", "ruby", "erb"], "comments": [{"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1536080803, "post_id": 52167814, "comment_id": 91292693, "body": "Hey guys, I am not very familiar with the <a href=\"https://stackoverflow.com/questions/tagged/ruby-on-rails\">ruby-on-rails</a> community, I am just a <a href=\"https://stackoverflow.com/questions/tagged/ruby\">ruby</a> guy, so can you point us to a canonical duplicate target? This question <i>must</i> have been asked a hundred times already."}], "answers": [{"tags": [], "owner": {"reputation": 1556, "user_id": 2830852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31ea598b6bc18b59de1e77a4c6f6c3e5?s=128&d=identicon&r=PG", "display_name": "Tarek N. Elsamni", "link": "https://stackoverflow.com/users/2830852/tarek-n-elsamni"}, "is_accepted": false, "score": 2, "last_activity_date": 1536069010, "creation_date": 1536069010, "answer_id": 52167890, "question_id": 52167814, "link": "https://stackoverflow.com/questions/52167814/hash-of-model-displaying-when-not-desired/52167890#52167890", "title": "Hash of model displaying when not desired", "body": "<pre><code>def list\n  @student.each = Student.all.order(:Firstname)\nend\n</code></pre>\n\n<p>This looks strange for me!</p>\n\n<p>It should be something like:</p>\n\n<pre><code>def list\n  @students = Student.order(:Firstname)\nend\n</code></pre>\n\n<p>Then your HTML should also be like:</p>\n\n<pre><code>&lt;table class=\"table\"&gt;\n  &lt;thead&gt;\n    &lt;tr&gt;\n      &lt;th scope=\"col\"&gt;First name&lt;/th&gt;\n      # ...\n    &lt;/tr&gt;\n  &lt;/thead&gt;\n  &lt;tbody&gt;\n  &lt;% @students.each do |stud| %&gt;\n    &lt;tr&gt;\n      &lt;td scope=\"row\"&gt;&lt;%= stud.Firstname %&gt;&lt;/td&gt;\n      # ...\n    &lt;/tr&gt;\n  &lt;% end %&gt;\n&lt;/tbody&gt;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 7, "user_id": 10315030, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-SjBDFCKT6O0/AAAAAAAAAAI/AAAAAAAAKeo/3pLIoS6B-D8/photo.jpg?sz=128", "display_name": "Edward Lancaster", "link": "https://stackoverflow.com/users/10315030/edward-lancaster"}, "edited": false, "score": 0, "creation_date": 1536069639, "post_id": 52167897, "comment_id": 91286117, "body": "Thanks very much, that fixed the problem. The .each was a typo, but thank you for pointing it out :)"}, {"owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "reply_to_user": {"reputation": 7, "user_id": 10315030, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-SjBDFCKT6O0/AAAAAAAAAAI/AAAAAAAAKeo/3pLIoS6B-D8/photo.jpg?sz=128", "display_name": "Edward Lancaster", "link": "https://stackoverflow.com/users/10315030/edward-lancaster"}, "edited": false, "score": 0, "creation_date": 1536069686, "post_id": 52167897, "comment_id": 91286145, "body": "My pleasure Sir :)"}, {"owner": {"reputation": 706, "user_id": 6492146, "user_type": "registered", "accept_rate": 82, "profile_image": "https://graph.facebook.com/10157001409455137/picture?type=large", "display_name": "Verty00", "link": "https://stackoverflow.com/users/6492146/verty00"}, "edited": false, "score": 1, "creation_date": 1536071326, "post_id": 52167897, "comment_id": 91287296, "body": "For future reference... erb tags like this, <code>&lt;%= %&gt;</code> will display the output of the tag"}], "tags": [], "owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "is_accepted": true, "score": 4, "last_activity_date": 1536069024, "creation_date": 1536069024, "answer_id": 52167897, "question_id": 52167814, "link": "https://stackoverflow.com/questions/52167814/hash-of-model-displaying-when-not-desired/52167897#52167897", "title": "Hash of model displaying when not desired", "body": "<p>This line</p>\n\n<pre><code>&lt;%= @student.each do |stud| %&gt;\n</code></pre>\n\n<p>should not be displaied into the page. Move to</p>\n\n<pre><code>&lt;% @student.each do |stud| %&gt;\n</code></pre>\n\n<p>Besides that, I can't understand what you want to do with this line</p>\n\n<pre><code>@student.each = Student.all.order(:Firstname)\n</code></pre>\n\n<p>It should probably be</p>\n\n<pre><code>@student = Student.order(:Firstname)\n</code></pre>\n\n<p>And note how <code>@students</code> might be a better name for this variable</p>\n"}], "owner": {"reputation": 7, "user_id": 10315030, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-SjBDFCKT6O0/AAAAAAAAAAI/AAAAAAAAKeo/3pLIoS6B-D8/photo.jpg?sz=128", "display_name": "Edward Lancaster", "link": "https://stackoverflow.com/users/10315030/edward-lancaster"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 36, "favorite_count": 0, "accepted_answer_id": 52167897, "answer_count": 2, "score": 0, "last_activity_date": 1536069584, "creation_date": 1536068746, "last_edit_date": 1536069584, "question_id": 52167814, "link": "https://stackoverflow.com/questions/52167814/hash-of-model-displaying-when-not-desired", "title": "Hash of model displaying when not desired", "body": "<p>I am working on a sign up application for presentations in Ruby on Rails.\nAs such, I have created several models, including a student and admin model. I am displaying the data from these models in a table with bootstrap like this:</p>\n\n<pre><code>&lt;table class=\"table\"&gt;\n  &lt;thead&gt;\n    &lt;tr&gt;\n      &lt;th scope=\"col\"&gt;First name&lt;/th&gt;\n      # ...\n    &lt;/tr&gt;\n  &lt;/thead&gt;\n  &lt;tbody&gt;\n  &lt;%= @student.each do |stud| %&gt;\n    &lt;tr&gt;\n      &lt;td scope=\"row\"&gt;&lt;%= stud.Firstname %&gt;&lt;/td&gt;\n      # ...\n    &lt;/tr&gt;\n  &lt;% end %&gt;\n&lt;/tbody&gt;\n</code></pre>\n\n<p></p>\n\n<p>My controller:</p>\n\n<pre><code>def list\n  @student = Student.all.order(:Firstname)\nend\n</code></pre>\n\n<p>The problem is that the app prints a list of all the objects in the database as a hash. </p>\n\n<p><code>#&lt;Presentation id: 3, Name: \"Elon Musk\", Year: \"6 Gc\", Title: \"Electric Cars\", Subject: \"Phsics\", Mentor: \"Alberto Maraffio\", Room: \"N364\", From: \"13:45\", Until: \"14:00\", Date: \"07.11.18\", Free: 5, Occupied: 0, Visitors: nil, created_at: \"...\", updated_at: \"...\"&gt;, #&lt;Presentation id: 3, # ...</code></p>\n\n<p>This isn't in the layouts/application.html.erb file, the only way I can make it go away is by commenting out <code>&lt;%= yield %&gt;</code>, which, of course, hides the rest of the page as well. What am I doing wrong?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 18203, "user_id": 100731, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/056c32203f8017f075ac060069823b66?s=128&d=identicon&r=PG", "display_name": "phoet", "link": "https://stackoverflow.com/users/100731/phoet"}, "edited": false, "score": 0, "creation_date": 1536070050, "post_id": 52166589, "comment_id": 91286383, "body": "have you tried using it with a block argument for &#39;if&#39; so that you can put a debugger into it?"}, {"owner": {"reputation": 1423, "user_id": 2948157, "user_type": "registered", "accept_rate": 84, "profile_image": "https://graph.facebook.com/100001350795049/picture?type=large", "display_name": "Lucian Tarna", "link": "https://stackoverflow.com/users/2948157/lucian-tarna"}, "reply_to_user": {"reputation": 18203, "user_id": 100731, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/056c32203f8017f075ac060069823b66?s=128&d=identicon&r=PG", "display_name": "phoet", "link": "https://stackoverflow.com/users/100731/phoet"}, "edited": false, "score": 0, "creation_date": 1536070538, "post_id": 52166589, "comment_id": 91286711, "body": "but a debugger into the method itself, returns what it should..."}], "answers": [{"tags": [], "owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "is_accepted": true, "score": 1, "last_activity_date": 1536072044, "last_edit_date": 1536072044, "creation_date": 1536071713, "answer_id": 52168684, "question_id": 52166589, "link": "https://stackoverflow.com/questions/52166589/with-options-not-executing-properly/52168684#52168684", "title": "With_Options not executing properly", "body": "<p>Have you tried a different syntax? Or possibly a lambda for the <code>if</code>? e.g.</p>\n\n<pre><code>with_options presence: true, if: -&gt;(obj) { obj.product_type_mocap? } do \n  validates :length, :frame_rate_type, :biped, :loopable\nend\n</code></pre>\n\n<p><code>with_options</code> will pass down the presence validator to each item and I find the lambda syntax works far more consistently than the symbol.</p>\n"}], "owner": {"reputation": 1423, "user_id": 2948157, "user_type": "registered", "accept_rate": 84, "profile_image": "https://graph.facebook.com/100001350795049/picture?type=large", "display_name": "Lucian Tarna", "link": "https://stackoverflow.com/users/2948157/lucian-tarna"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 34, "favorite_count": 0, "accepted_answer_id": 52168684, "answer_count": 1, "score": 0, "last_activity_date": 1536072044, "creation_date": 1536064795, "question_id": 52166589, "link": "https://stackoverflow.com/questions/52166589/with-options-not-executing-properly", "title": "With_Options not executing properly", "body": "<p>I have a module for validations and multiple types of products. In this module I would like to store the conditions for the MOCAP product type.</p>\n\n<p>These validations should run only if product_type_mocap? is true. However they run even if it is false... Does anyone have any ideas why? I can give further details as necessary</p>\n\n<pre><code>module Validations\n  module Product\n    module Mocap\n      extend ActiveSupport::Concern\n\n      included do\n        with_options if: :product_type_mocap? do |product|\n          product.validates :length,\n          :frame_rate_type,\n          :biped,\n          :loopable,\n          presence: true\n        end\n\n        def product_type_mocap?\n          product_type_id == 5\n        end\n      end\n    end\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "google-maps", "geolocation", "geokit"], "comments": [{"owner": {"reputation": 4420, "user_id": 1360318, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a60c954665247aae8de274c26e843867?s=128&d=identicon&r=PG", "display_name": "mbuechmann", "link": "https://stackoverflow.com/users/1360318/mbuechmann"}, "edited": false, "score": 0, "creation_date": 1536064108, "post_id": 52166084, "comment_id": 91282295, "body": "Could you please clarify: When do you get response 1 and when do you get response 2."}, {"owner": {"reputation": 11, "user_id": 5879388, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-pnGTY-SbkIM/AAAAAAAAAAI/AAAAAAAAAX8/5PvjOKjBPgI/photo.jpg?sz=128", "display_name": "Lakshmi narayan", "link": "https://stackoverflow.com/users/5879388/lakshmi-narayan"}, "reply_to_user": {"reputation": 4420, "user_id": 1360318, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a60c954665247aae8de274c26e843867?s=128&d=identicon&r=PG", "display_name": "mbuechmann", "link": "https://stackoverflow.com/users/1360318/mbuechmann"}, "edited": false, "score": 0, "creation_date": 1536065062, "post_id": 52166084, "comment_id": 91282906, "body": "@mbuechmann The response is random i.e. same address would sometimes give response 1 and sometimes give response 2. For example, I have a debug point before the api call, Now, I make the API call from interactive console with different variations of the same input OR the same input every time. The response is random between 1 and 2"}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 5879388, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-pnGTY-SbkIM/AAAAAAAAAAI/AAAAAAAAAX8/5PvjOKjBPgI/photo.jpg?sz=128", "display_name": "Lakshmi narayan", "link": "https://stackoverflow.com/users/5879388/lakshmi-narayan"}, "edited": false, "score": 0, "creation_date": 1536071647, "post_id": 52166843, "comment_id": 91287535, "body": "Thanks! I l try it out."}], "tags": [], "owner": {"reputation": 4420, "user_id": 1360318, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a60c954665247aae8de274c26e843867?s=128&d=identicon&r=PG", "display_name": "mbuechmann", "link": "https://stackoverflow.com/users/1360318/mbuechmann"}, "is_accepted": false, "score": 0, "last_activity_date": 1536065643, "creation_date": 1536065643, "answer_id": 52166843, "question_id": 52166084, "link": "https://stackoverflow.com/questions/52166084/geokit-api-response-is-unreliable-gives-different-responses-every-time-for-same/52166843#52166843", "title": "GeoKit API response is unreliable, Gives different responses every time for same payload", "body": "<p>That the responses are random is a bit strange, but not that important.</p>\n\n<p>First of all, as a general advice, I would update the geokit gem, as the version you are using is older than one year.</p>\n\n<p>If you follow the link, you can read, that it should not be possible to make these api key without an API key. To get an API key, you need a free billing account. When this is setup you can get an API key, which has 200 USD worth of free API requests per month (which is quite a lot).</p>\n\n<p>When you have the key, you can configure it by setting <code>Geokit::Geocoders::GoogleGeocoder.api_key</code>.</p>\n"}], "owner": {"reputation": 11, "user_id": 5879388, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-pnGTY-SbkIM/AAAAAAAAAAI/AAAAAAAAAX8/5PvjOKjBPgI/photo.jpg?sz=128", "display_name": "Lakshmi narayan", "link": "https://stackoverflow.com/users/5879388/lakshmi-narayan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 388, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1536065643, "creation_date": 1536063135, "question_id": 52166084, "link": "https://stackoverflow.com/questions/52166084/geokit-api-response-is-unreliable-gives-different-responses-every-time-for-same", "title": "GeoKit API response is unreliable, Gives different responses every time for same payload", "body": "<p>GeoKit gem version: 1.11.0</p>\n\n<p>Payload: \"3880 S El Camino Real, San Mateo, CA 94402, USA\"</p>\n\n<p>Api call: Geokit::Geocoders::MultiGeocoder.geocode(payload)</p>\n\n<p>Response 1: \"Provider: Google, Street: 3880 S El Camino Real.., Success:  true\"</p>\n\n<p>Response 2: \"An error has occurred during geocoding: Keyless access to Google Maps Platform is deprecated. Please use an API key with all your API calls to avoid service interruption. For further details please refer to <a href=\"http://g.co/dev/maps-no-account\" rel=\"nofollow noreferrer\">http://g.co/dev/maps-no-account</a>\"</p>\n\n<p>Doubt:\nIf the google API has been changed as per response 2 to accept only api calls with key, then every api call(mentioned above) should give response 2. What is the actual expected behavior here?</p>\n\n<p>Please clarify. Thanks.</p>\n"}, {"tags": ["ruby", "rubygems", "environment-variables"], "comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1536073049, "post_id": 52164970, "comment_id": 91288539, "body": "<i>&quot;Is there a way to use figaro without using Rails?&quot;</i> version &gt;= 1.0 is no longer rails dependent so the simple answer is &quot;Yes&quot;. Please post your actual issue as I am assuming this is not your actual question but you have given us nothing to go on other than <i>&quot;I can&#39;t access the variables in figaro&quot;</i>"}], "answers": [{"tags": [], "owner": {"reputation": 1173, "user_id": 9418609, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o0aMF.jpg?s=128&g=1", "display_name": "uday", "link": "https://stackoverflow.com/users/9418609/uday"}, "is_accepted": false, "score": 0, "last_activity_date": 1536066262, "creation_date": 1536066262, "answer_id": 52167019, "question_id": 52164970, "link": "https://stackoverflow.com/questions/52164970/figaro-in-irb-console-without-rails/52167019#52167019", "title": "Figaro in IRB console without Rails?", "body": "<p>You can access those demo variable like below in rails console</p>\n\n<pre><code>ENV['pusher_app_id'] #=&gt; '2954'\nENV['pusher_key'] #=&gt;  '7381a978f7dd7f9a1117'\n</code></pre>\n\n<p>By using <strong>Figaro.env</strong> you can access by:</p>\n\n<pre><code>Figaro.env.pusher_app_id #=&gt; '2954'\nFigaro.env.pusher_key #=&gt;  '7381a978f7dd7f9a1117'\n</code></pre>\n"}], "owner": {"reputation": 508, "user_id": 2476604, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/HZVR2.png?s=128&g=1", "display_name": "clockworkpc", "link": "https://stackoverflow.com/users/2476604/clockworkpc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 132, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1536066262, "creation_date": 1536059407, "question_id": 52164970, "link": "https://stackoverflow.com/questions/52164970/figaro-in-irb-console-without-rails", "title": "Figaro in IRB console without Rails?", "body": "<p>Environment:\nUbuntu 18.04\nRuby 2.5.1\nPrivate gem</p>\n\n<p>Steps followed:</p>\n\n<ul>\n<li><code>gem 'figaro'</code> in the Gemfile</li>\n<li><code>bundle install</code> => created config.yml</li>\n<li>uncommented the demo variables to test drive Figaro</li>\n<li><code>require 'figaro'</code> in bin/console</li>\n<li><code>bin/console</code> from the command line</li>\n</ul>\n\n<p>I can't access the variables in figaro.  Is there a way to use figaro without using Rails?</p>\n\n<p><strong>Demo Variables:</strong></p>\n\n<pre><code># Add configuration values here, as shown below.\n#\npusher_app_id: \"2954\"\npusher_key: 7381a978f7dd7f9a1117\npusher_secret: abdc3b896a0ffb85d373\nstripe_api_key: sk_test_2J0l093xOyW72XUYJHE4Dv2r\nstripe_publishable_key: pk_test_ro9jV5SNwGb1yYlQfzG17LHK\n\nproduction:\n  stripe_api_key: sk_live_EeHnL644i6zo4Iyq4v1KdV9H\n  stripe_publishable_key: pk_live_9lcthxpSIHbGwmdO941O1XVU\n</code></pre>\n"}, {"tags": ["ruby", "rest", "rubygems", "rest-client"], "answers": [{"comments": [{"owner": {"reputation": 223, "user_id": 5310502, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/b6f92af37160cf2310ac2ccadcd9b758?s=128&d=identicon&r=PG&f=1", "display_name": "testerBDD", "link": "https://stackoverflow.com/users/5310502/testerbdd"}, "edited": false, "score": 0, "creation_date": 1536128550, "post_id": 52168564, "comment_id": 91306704, "body": "i am getting below error after trying the code {&quot;message&quot;:&quot;Content type &#39;application/x-www-form-urlencoded;charset=UTF-8&#39; not supported&quot;}"}, {"owner": {"reputation": 1556, "user_id": 2830852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31ea598b6bc18b59de1e77a4c6f6c3e5?s=128&d=identicon&r=PG", "display_name": "Tarek N. Elsamni", "link": "https://stackoverflow.com/users/2830852/tarek-n-elsamni"}, "reply_to_user": {"reputation": 223, "user_id": 5310502, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/b6f92af37160cf2310ac2ccadcd9b758?s=128&d=identicon&r=PG&f=1", "display_name": "testerBDD", "link": "https://stackoverflow.com/users/5310502/testerbdd"}, "edited": false, "score": 0, "creation_date": 1536128661, "post_id": 52168564, "comment_id": 91306770, "body": "In your headers1 variable you need to set \u201cContent-Type\u201d: \u201capplication/json\u201d"}], "tags": [], "owner": {"reputation": 1556, "user_id": 2830852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31ea598b6bc18b59de1e77a4c6f6c3e5?s=128&d=identicon&r=PG", "display_name": "Tarek N. Elsamni", "link": "https://stackoverflow.com/users/2830852/tarek-n-elsamni"}, "is_accepted": true, "score": 2, "last_activity_date": 1536071315, "creation_date": 1536071315, "answer_id": 52168564, "question_id": 52164910, "link": "https://stackoverflow.com/questions/52164910/ruby-rest-client-content-in-the-header-payload/52168564#52168564", "title": "ruby rest-client content in the header / payload", "body": "<p><code>-d</code> is the data argument in your post request and it has nothing to do with <code>headers</code>.</p>\n\n<pre><code>payload={                                                                        \n  version: 'v15',                                                           \n}.to_json\n</code></pre>\n\n<p>and the rest of your code should be the same. I don't know why you need <code>:multipart =&gt; true</code> inside your payload.</p>\n"}], "owner": {"reputation": 223, "user_id": 5310502, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/b6f92af37160cf2310ac2ccadcd9b758?s=128&d=identicon&r=PG&f=1", "display_name": "testerBDD", "link": "https://stackoverflow.com/users/5310502/testerbdd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 155, "favorite_count": 0, "accepted_answer_id": 52168564, "answer_count": 1, "score": 1, "last_activity_date": 1536071315, "creation_date": 1536059230, "question_id": 52164910, "link": "https://stackoverflow.com/questions/52164910/ruby-rest-client-content-in-the-header-payload", "title": "ruby rest-client content in the header / payload", "body": "<p>My request from the swagger is </p>\n\n<pre><code>curl -X POST --header 'Content-Type: application/json' --header 'Accept: application/json' -d '{ \\ \n   \"version\": \"v15\" \\ \n }' 'https://XXX.XX.XXX.XXX/tools/v1/termsAndConditions'\n</code></pre>\n\n<p>My ruby code is </p>\n\n<pre><code>payload={                                                                        \n   :multipart =&gt; true,                                                           \n    }                                                                            \nheaders1 = {                                                                     \n    :content_type =&gt; 'multipart/form-data',                                      \n    :accept =&gt; 'application/json',                                               \n     # -d ':version=&gt; 'v16'                                                      \n\n}                                                                                \n     begin                                                                          \n    response= RestClient::Request.execute(                                       \n        :url =&gt; \"https://XXX.XX.XXX.XXX/tools/v1/termsAndConditions\",            \n        :method =&gt; :post,                                                        \n        :headers =&gt; headers1,                                                    \n        :verify_ssl =&gt; false,                                                    \n        :proxy =&gt; nil,                                                           \n        :payload=&gt;payload                                                        \n    )                                                                            \n  rescue RestClient::BadRequest =&gt; err                                           \n    @responsebody=err.response.body                                              \n    @responseCode=\"400\"                                                          \n  else                                                                           \n    @responseCode=response.code                                                  \n    @responsebody=response.body                                                  \n    end   \n</code></pre>\n\n<p>How do i pass below content in the header or payload to replicate swagger?</p>\n\n<p>'-d '{ \\ \n\"version\": \"v15\" \\ \n}'</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "sidekiq"], "comments": [{"owner": {"reputation": 247, "user_id": 882097, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/7de11c4fa76b60dc5c022f53fba33597?s=128&d=identicon&r=PG", "display_name": "alex", "link": "https://stackoverflow.com/users/882097/alex"}, "edited": false, "score": 0, "creation_date": 1613711373, "post_id": 52163449, "comment_id": 117165650, "body": "can you please explain how you solved this issue please?  I am looking for the exact same problem, but I&#39;m not using sidekiq-cron..."}, {"owner": {"reputation": 449, "user_id": 5397051, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/68b724016d680eb143dd20e9da217b04?s=128&d=identicon&r=PG&f=1", "display_name": "Nathan Gouy", "link": "https://stackoverflow.com/users/5397051/nathan-gouy"}, "reply_to_user": {"reputation": 247, "user_id": 882097, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/7de11c4fa76b60dc5c022f53fba33597?s=128&d=identicon&r=PG", "display_name": "alex", "link": "https://stackoverflow.com/users/882097/alex"}, "edited": false, "score": 0, "creation_date": 1616161476, "post_id": 52163449, "comment_id": 117923031, "body": "Hey @alex sorry for the delay, I submitted a PR some times ago that solves this issue :   <a href=\"https://github.com/ondrejbartas/sidekiq-cron/pull/221\" rel=\"nofollow noreferrer\">github.com/ondrejbartas/sidekiq-cron/pull/221</a>"}], "answers": [{"comments": [{"owner": {"reputation": 449, "user_id": 5397051, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/68b724016d680eb143dd20e9da217b04?s=128&d=identicon&r=PG&f=1", "display_name": "Nathan Gouy", "link": "https://stackoverflow.com/users/5397051/nathan-gouy"}, "edited": false, "score": 0, "creation_date": 1536136410, "post_id": 52168592, "comment_id": 91311182, "body": "Thank you but into my job I have no access to this argument. Once in the worker, the job is already consumed, and so, no more in the Redis queue. Sadly the only params I have access to into my worker is jid. Of course I can retrieve the current Time, but this is not my point. I want to retrieve the original scheduled date regardless of the retries number or queue length."}], "tags": [], "owner": {"reputation": 1928, "user_id": 6193734, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-yNKciMo2y_0/AAAAAAAAAAI/AAAAAAAACGs/Hg_DmZMu7Lw/photo.jpg?sz=128", "display_name": "Matthieu Libeer", "link": "https://stackoverflow.com/users/6193734/matthieu-libeer"}, "is_accepted": false, "score": 0, "last_activity_date": 1536071390, "creation_date": 1536071390, "answer_id": 52168592, "question_id": 52163449, "link": "https://stackoverflow.com/questions/52163449/retrieve-the-scheduled-date-of-a-sidekiq-worker-within-it/52168592#52168592", "title": "retrieve the scheduled date of a sidekiq worker within it", "body": "<p>There seems to be a <code>enqueued_at</code> mandatory argument passed to the job, which is I believe exactly what you are looking for.</p>\n\n<p>If you are instead looking for the time when the job was started, it's simply <code>Time.current</code> at the beginning of the perform method.</p>\n\n<p>See <code>https://github.com/mperham/sidekiq/wiki/Job-Format#job</code> for official documentation.</p>\n"}, {"tags": [], "owner": {"reputation": 449, "user_id": 5397051, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/68b724016d680eb143dd20e9da217b04?s=128&d=identicon&r=PG&f=1", "display_name": "Nathan Gouy", "link": "https://stackoverflow.com/users/5397051/nathan-gouy"}, "is_accepted": true, "score": 0, "last_activity_date": 1616161639, "creation_date": 1616161639, "answer_id": 66709361, "question_id": 52163449, "link": "https://stackoverflow.com/questions/52163449/retrieve-the-scheduled-date-of-a-sidekiq-worker-within-it/66709361#66709361", "title": "retrieve the scheduled date of a sidekiq worker within it", "body": "<p>if you are using Sidekiq-cron :</p>\n<p>I submitted a PR and it was accepted. The solution  is to use the optional <code>date_as_argument</code> param when initializing your sidekiq-cron job:</p>\n<p><a href=\"https://github.com/ondrejbartas/sidekiq-cron#getting-started\" rel=\"nofollow noreferrer\">https://github.com/ondrejbartas/sidekiq-cron#getting-started</a></p>\n"}], "owner": {"reputation": 449, "user_id": 5397051, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/68b724016d680eb143dd20e9da217b04?s=128&d=identicon&r=PG&f=1", "display_name": "Nathan Gouy", "link": "https://stackoverflow.com/users/5397051/nathan-gouy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 648, "favorite_count": 0, "accepted_answer_id": 66709361, "answer_count": 2, "score": 0, "last_activity_date": 1616161639, "creation_date": 1536054379, "last_edit_date": 1536163644, "question_id": 52163449, "link": "https://stackoverflow.com/questions/52163449/retrieve-the-scheduled-date-of-a-sidekiq-worker-within-it", "title": "retrieve the scheduled date of a sidekiq worker within it", "body": "<p>Let's have a lot of jobs queued for a certain Date <code>my_date</code>.</p>\n\n<p>There is so much job for this exact same date that some of them are working only 20 minutes after their scheduled_date.</p>\n\n<p>How can I retrieve this scheduled date once I am in my <code>perform</code> method ?</p>\n\n<p>ps : I can't pass this scheduled_date as params, because its a Cron job (and I can only pass static params)</p>\n\n<p>ps2 : github issue <a href=\"https://github.com/mperham/sidekiq/issues/3945\" rel=\"nofollow noreferrer\">https://github.com/mperham/sidekiq/issues/3945</a></p>\n\n<p>edit : for now here is a partial answer, still not satisfying (for exemple not working for a retry): </p>\n\n<pre><code># wait for Sidekiq::Workers to be updated (5 sec)\nsleep 8\nthe_exact_date = Time.at(Sidekiq::Workers.new.find { |_, __, w| w[\"payload\"][\"jid\"] == jid }[2][\"run_at\"])\n</code></pre>\n\n<p>edit 2 : current PR for sidekiq cron which fully solve my issue : <a href=\"https://github.com/ondrejbartas/sidekiq-cron/pulls\" rel=\"nofollow noreferrer\">https://github.com/ondrejbartas/sidekiq-cron/pulls</a></p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 0, "creation_date": 1536045281, "post_id": 52160729, "comment_id": 91271055, "body": "Because you&#39;re converting the result to a float <i>after</i> performing integer division. You&#39;ll need to parse the user input properly to get the answer you want, not just <code>eval</code> it."}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1536045658, "post_id": 52160729, "comment_id": 91271245, "body": "Why do you think you should get 0.5?"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1536045887, "post_id": 52160729, "comment_id": 91271378, "body": "@sawa: because common sense :) GUI calculators do this, for example."}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1536045950, "post_id": 52160729, "comment_id": 91271406, "body": "@SergioTulentsev Ruby is not a GUI calculator."}, {"owner": {"user_type": "does_not_exist", "display_name": "user9156891"}, "edited": false, "score": 0, "creation_date": 1536046766, "post_id": 52160729, "comment_id": 91271854, "body": "But I&#39;m making the game that acts like GUI calculator... I&#39;ve to make Ruby work like GUI calculator otherwise the player will lose the game"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1536047951, "post_id": 52160729, "comment_id": 91272537, "body": "Are you aware of floating point issues? For example, <code>19.9 * 100</code> returns <code>1989.9999999999998</code> whereas you probably want <code>1990</code>."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1536048119, "post_id": 52160729, "comment_id": 91272629, "body": "BTW, why do you have to <i>evaluate</i> <code>7&#47;14</code> in the first place? Does the player enter <code>7&#47;14</code> and your game has to solve it?"}, {"owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 0, "creation_date": 1536050713, "post_id": 52160729, "comment_id": 91274006, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/5502761/why-is-division-in-ruby-returning-an-integer-instead-of-decimal-value\">Why is division in Ruby returning an integer instead of decimal value?</a>"}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user9156891"}, "edited": false, "score": 0, "creation_date": 1536046196, "post_id": 52160766, "comment_id": 91271539, "body": "Yes, I found that out. But is there any way I can do 7/14 and get 0.5? Somehow? I&#39;m making a game using Ruby2D (similar game to Lumosity&#39;s Raindrop) that requires the operation."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1536046558, "post_id": 52160766, "comment_id": 91271731, "body": "@S.Goswami if all else fails, you can always write a custom parser/evaluator. Although that&#39;s quite a bit of work."}, {"owner": {"user_type": "does_not_exist", "display_name": "user9156891"}, "edited": false, "score": 0, "creation_date": 1536046840, "post_id": 52160766, "comment_id": 91271901, "body": "Yes, that&#39;s quite a bit of work. See if I can work with what Ruby has inbuilt!"}, {"owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "edited": false, "score": 0, "creation_date": 1536052395, "post_id": 52160766, "comment_id": 91275027, "body": "You can do <code>7&#47;14r</code>, which is not really <code>0.5</code>, but equivalent to it... <code>eval(&quot;7&#47;14&quot; + &quot;r&quot;).to_f</code> is <code>0.5</code>"}, {"owner": {"reputation": 11741, "user_id": 1934428, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/072774c5d4204a1c2385560e6114a887?s=128&d=identicon&r=PG", "display_name": "user1934428", "link": "https://stackoverflow.com/users/1934428/user1934428"}, "edited": false, "score": 1, "creation_date": 1536065337, "post_id": 52160766, "comment_id": 91283103, "body": "@S.Goswami : Well, you will have to parse the user&#39;s input somehow anyway, otherwise someone will enter just for fun a string for evaluation which will cause to erase under your home directory. So, if you take the user&#39;s string apart to check for harmful parts, you will get the numbers entered, and if one of them is not an integer, you can replace it by a corresponding float. Of course another question is whether to do all calculations in float, because this may lead to unprecise results."}], "tags": [], "owner": {"reputation": 11741, "user_id": 1934428, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/072774c5d4204a1c2385560e6114a887?s=128&d=identicon&r=PG", "display_name": "user1934428", "link": "https://stackoverflow.com/users/1934428/user1934428"}, "is_accepted": true, "score": 4, "last_activity_date": 1536045215, "creation_date": 1536045215, "answer_id": 52160766, "question_id": 52160729, "link": "https://stackoverflow.com/questions/52160729/why-does-eval7-14-to-f-return-0-0/52160766#52160766", "title": "Why does eval(&#39;7/14&#39;).to_f return 0.0?", "body": "<pre><code>eval('7/14')\n</code></pre>\n\n<p>is the same as </p>\n\n<pre><code>7/14\n</code></pre>\n\n<p>which is 0 (integer division). Converting 0 to float results in zero as a float, i.e. 0.0</p>\n\n<p>If you would write (i.e.) </p>\n\n<pre><code>7.0/14\n</code></pre>\n\n<p>, you would get the desired result.</p>\n"}, {"comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1536045663, "post_id": 52160768, "comment_id": 91271248, "body": "Your second sentence does not follow from the first. :) The actual answer is: &quot;because integer division&quot;"}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1536045706, "post_id": 52160768, "comment_id": 91271268, "body": "My second sentence is the second step executed after the first step expressed in the first sentence."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1536045834, "post_id": 52160768, "comment_id": 91271342, "body": "There&#39;s a missing bit, which is actually asked in the question: &quot;WHY does that equal 0&quot;?"}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1536046205, "post_id": 52160768, "comment_id": 91271544, "body": "@SergioTulentsev &quot;because integer division&quot; is something that should not need to be mentioned since that is what <code>&#47;</code> means. If the OP is using <code>&#47;</code> without knowing what it means, then that is something OP should not have done."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 2, "creation_date": 1536046326, "post_id": 52160768, "comment_id": 91271611, "body": "That what it means in <i>ruby</i>. It means something else in other langs. I&#39;d allow a bit of surprise if OP is coming from, say, JS."}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1536046419, "post_id": 52160768, "comment_id": 91271652, "body": "Of course. We are talking about Ruby, not about some other language."}, {"owner": {"user_type": "does_not_exist", "display_name": "user9156891"}, "edited": false, "score": 0, "creation_date": 1536047055, "post_id": 52160768, "comment_id": 91272029, "body": "If I open python 3.6, and type eval(&#39;7/14&#39;) it returns 0.5 That&#39;s not the case in Ruby, that&#39;s great..."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1536056516, "post_id": 52160768, "comment_id": 91277534, "body": "<i>&quot;integer division [...] that is what / means&quot;</i> / <i>&quot;what it means in ruby&quot;</i> \u2013 even in Ruby <code>&#47;</code> only means integer division if <i>both</i> operands are integers. The OP apparently has to deal with both, integers and decimal numbers."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1536062389, "post_id": 52160768, "comment_id": 91281183, "body": "@Stefan: indeed, even in ruby it doesn&#39;t mean that most of the time :)"}, {"owner": {"user_type": "does_not_exist", "display_name": "user9156891"}, "edited": false, "score": 0, "creation_date": 1536140297, "post_id": 52160768, "comment_id": 91313700, "body": "The game is like dropping water bubbles with an word inside. It will show random maths. inside the bubble. If the user type the appropriate value of the shown text inside the bubble, the answer is correct, and some other things happen. But, instead of sticking with eval, I have done something different to the custom class that generates the random maths. Now the program is much bug free, and works nice. If you want to see the program, I uploaded it on FB... <a href=\"https://www.facebook.com/Noughtnaught0/videos/489295834877941/\" rel=\"nofollow noreferrer\">facebook.com/Noughtnaught0/videos/489295834877941</a>"}], "tags": [], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "is_accepted": false, "score": 0, "last_activity_date": 1536046004, "last_edit_date": 1536046004, "creation_date": 1536045223, "answer_id": 52160768, "question_id": 52160729, "link": "https://stackoverflow.com/questions/52160729/why-does-eval7-14-to-f-return-0-0/52160768#52160768", "title": "Why does eval(&#39;7/14&#39;).to_f return 0.0?", "body": "<p>It is because (the absolute value of) 7 is smaller than (the absolute values of) 14. That gives 0. Then, 0 converted to float is 0.0.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user9156891"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 117, "favorite_count": 0, "accepted_answer_id": 52160766, "answer_count": 2, "score": 0, "last_activity_date": 1536046179, "creation_date": 1536045047, "last_edit_date": 1536045691, "question_id": 52160729, "link": "https://stackoverflow.com/questions/52160729/why-does-eval7-14-to-f-return-0-0", "title": "Why does eval(&#39;7/14&#39;).to_f return 0.0?", "body": "<p>I have to evaluate strings to get a result. For example,</p>\n\n<pre><code>eval('5*6.45').to_f # =&gt; 32.25\n</code></pre>\n\n<p>is expected.</p>\n\n<p>Why do I get:</p>\n\n<pre><code>eval('7/14').to_f # =&gt; 0.0\n</code></pre>\n\n<p>instead of <code>0.5</code>? How can I get the appropriate value? In my game (GUI), I should have <code>14</code> and not <code>14.0</code>. </p>\n"}, {"tags": ["ruby", "ubuntu", "rspec", "chef-infra", "chefspec"], "comments": [{"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 2, "creation_date": 1536043616, "post_id": 52159063, "comment_id": 91270214, "body": "Please, post the text of the error message as text, not as a photograph of text. This is a programming site, not a photography site. We want to read, copy, and paste the error, not critique its use of color and perspective. (Although if I may offer a critique nonetheless: the dark red on black is completely unreadable on my screen.)"}, {"owner": {"reputation": 1, "user_id": 10312964, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1507e9fb2c1f7b9bb42874193e040c7?s=128&d=identicon&r=PG&f=1", "display_name": "Gabe ", "link": "https://stackoverflow.com/users/10312964/gabe"}, "reply_to_user": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1536048367, "post_id": 52159063, "comment_id": 91272751, "body": "Will do. First post on the site,  so I&#39;m learning how it works. I&#39;ll get the text up"}, {"owner": {"reputation": 1, "user_id": 10312964, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1507e9fb2c1f7b9bb42874193e040c7?s=128&d=identicon&r=PG&f=1", "display_name": "Gabe ", "link": "https://stackoverflow.com/users/10312964/gabe"}, "reply_to_user": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1536049999, "post_id": 52159063, "comment_id": 91273602, "body": "error message text has been added."}], "answers": [{"tags": [], "owner": {"reputation": 43208, "user_id": 78722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf611565f0b79abd0b3dc200ad867661?s=128&d=identicon&r=PG", "display_name": "coderanger", "link": "https://stackoverflow.com/users/78722/coderanger"}, "is_accepted": false, "score": 1, "last_activity_date": 1536055729, "creation_date": 1536055729, "answer_id": 52163858, "question_id": 52159063, "link": "https://stackoverflow.com/questions/52159063/writing-chef-rspec-test-using-execute/52163858#52163858", "title": "Writing chef rspec test using &#39;execute&#39;", "body": "<p>You don\u2019t use node attributes in your spec like that, the point of the test is to manually expand it to make sure your code worked. </p>\n"}], "owner": {"reputation": 1, "user_id": 10312964, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1507e9fb2c1f7b9bb42874193e040c7?s=128&d=identicon&r=PG&f=1", "display_name": "Gabe ", "link": "https://stackoverflow.com/users/10312964/gabe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 123, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1536055729, "creation_date": 1536037116, "last_edit_date": 1536049954, "question_id": 52159063, "link": "https://stackoverflow.com/questions/52159063/writing-chef-rspec-test-using-execute", "title": "Writing chef rspec test using &#39;execute&#39;", "body": "<p>In my .rb file, I am attempting to write a spec test against this line of code (I did not write this code):</p>\n\n<pre><code>execute \"lvcreate -L #{node['ami_base']['opt']} -n opt vgpool\"\n</code></pre>\n\n<p>In my _spec.rb file, my test looks like this for this particular section of code:</p>\n\n<pre><code>it 'executes lvcreate... -n opt vgpool' do\n  expect(chef_run).to run_execute(\"lvcreate -L #{node['ami_base']['opt']} -n opt vgpool\")\nend\n</code></pre>\n\n<p>When I attempt:</p>\n\n<pre><code>chef exec rspec....._spec.rb\n</code></pre>\n\n<p>I receive this error:</p>\n\n<pre><code>1) ami_base::lvm_drives executes lvcreate... -n opt vgpool\n Failure/Error: expect(chef_run).to run_execute(\"lvcreate -L #{node['ami_base']['opt']} -n opt vgpool\")\n\n NameError:\n   undefined local variable or method `node' for #&lt;RSpec::ExampleGroups::AmiBaseLvmDrives:0x0000000005752268&gt;\n # ./spec/unit/recipes/lvm_drives_spec.rb:33:in `block (2 levels) in &lt;top (required)&gt;'\n</code></pre>\n\n<p>I've written many tests against <code>execute</code> and they've all been successful. Do I need to modify the spec helper file? I feel like it being a command line input and creating a volume that the command should be something other than run_execute, but i am coming up empty handed in a my searches for anything that works.</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 6207, "user_id": 5117953, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/Ca0RW.jpg?s=128&g=1", "display_name": "Vishal", "link": "https://stackoverflow.com/users/5117953/vishal"}, "edited": false, "score": 0, "creation_date": 1536038214, "post_id": 52159013, "comment_id": 91268141, "body": "docs.class is array so obviously user will be able to push any items in array. and seriously this question is tough. and it also start to killing me"}, {"owner": {"reputation": 1004, "user_id": 235614, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7aAQ7.jpg?s=128&g=1", "display_name": "timgluz", "link": "https://stackoverflow.com/users/235614/timgluz"}, "edited": false, "score": 0, "creation_date": 1536040193, "post_id": 52159013, "comment_id": 91268722, "body": "I recommend to return duplicate array from the &#39;get-documents&#39; method. Hint: there&#39;s &#39;dup&#39; method; or you make your array immutable by using the &#39;freeze&#39; method.  Or you create your own class &quot;ImmutableDocumentStore&quot; which extends current document store, but overrides all the immutable methods or returns only immutable arrays. It was just couple of ideas you could try out."}, {"owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 0, "creation_date": 1536042733, "post_id": 52159013, "comment_id": 91269754, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/1872110/is-ruby-pass-by-reference-or-by-value\">Is Ruby pass by reference or by value?</a>"}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 2, "creation_date": 1536043786, "post_id": 52159013, "comment_id": 91270302, "body": "Your question is unclear. You ask &quot;How do you make a class variable unmodifiable?&quot; but there is no class variable in your code. Which class variable are you talking about? However, it is simply impossible to make variables unmodifiable in Ruby. Even constants can be modified (they only generate a warning)."}], "answers": [{"comments": [{"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 1, "creation_date": 1536045234, "post_id": 52160199, "comment_id": 91271031, "body": "It&#39;s maybe worth mentioning that this will only make a shallow copy of the array. Meaning, if you extract one of the elements of the cloned/duped array and modify it, the changes would apply to that element in the original array as well. Also, another way to copy the array would be <code>[*@documents]</code>"}, {"owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "reply_to_user": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1536051595, "post_id": 52160199, "comment_id": 91274550, "body": "Correct, if OP has any issues understanding the concept I&#39;d recommend checking out <a href=\"https://stackoverflow.com/q/184710/3982562\">stackoverflow.com/q/184710/3982562</a>"}], "tags": [], "owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "is_accepted": true, "score": 4, "last_activity_date": 1536052505, "last_edit_date": 1536052505, "creation_date": 1536043189, "answer_id": 52160199, "question_id": 52159013, "link": "https://stackoverflow.com/questions/52159013/how-do-you-make-a-class-variable-unmodifiable/52160199#52160199", "title": "How do you make a class variable unmodifiable?", "body": "<p>This is simply done by calling <a href=\"https://ruby-doc.org/core-2.5.1/Object.html#method-i-freeze\" rel=\"nofollow noreferrer\"><code>Object#freeze</code></a> in combination with <a href=\"https://ruby-doc.org/core-2.5.1/Object.html#method-i-dup\" rel=\"nofollow noreferrer\"><code>Object#dup</code></a>. <em>freeze</em> doesn't returns a frozen copy, but instead freezes <code>self</code> and returns <code>self</code>. This means that without the <em>dup</em> call you can't modify the array inside the class either.</p>\n\n<pre><code>def get_documents\n  return @documents.dup.freeze\nend\n</code></pre>\n\n<p>You could also opt to only use <em>dup</em>, returning a shallow copy. Allowing the caller to modify the array without effecting <code>@documents</code>.</p>\n\n<pre><code>def get_documents\n  return @documents.dup\nend\n</code></pre>\n\n<hr>\n\n<p><strong>Note</strong>: Keep in mind that there should be no other way to retrieve the array. Ruby always returns the last statement made by a method. This means that your method <code>DocumentStore#add_document</code> will return the result of <code>@documents.push(document)</code>.</p>\n\n<p><strong><a href=\"https://ruby-doc.org/core-2.5.1/Array.html#method-i-push\" rel=\"nofollow noreferrer\"><code>Array#push</code></a></strong></p>\n\n<blockquote>\n  <p>Append \u2014 Pushes the given object(s) on to the end of this array. This expression returns the array itself, so several appends may be chained together. See also <a href=\"https://ruby-doc.org/core-2.5.1/Array.html#method-i-pop\" rel=\"nofollow noreferrer\">#pop</a> for the opposite effect.</p>\n</blockquote>\n"}], "owner": {"reputation": 669, "user_id": 2014043, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/SVKKp.png?s=128&g=1", "display_name": "clueless", "link": "https://stackoverflow.com/users/2014043/clueless"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 105, "favorite_count": 0, "accepted_answer_id": 52160199, "answer_count": 1, "score": 2, "last_activity_date": 1536052505, "creation_date": 1536036786, "last_edit_date": 1536042235, "question_id": 52159013, "link": "https://stackoverflow.com/questions/52159013/how-do-you-make-a-class-variable-unmodifiable", "title": "How do you make a class variable unmodifiable?", "body": "<p>I came across this problem on an online test. I have this class:</p>\n\n<pre><code>class DocumentStore\n  def initialize(capacity)\n    @capacity = capacity;\n    @documents = []\n  end\n\n  def get_documents\n    return @documents\n  end\n\n  def add_document(document)\n    raise 'Document store is full' if @documents.length &gt;= @capacity\n    @documents.push(document)\n  end\n\n  def inspect\n    return \"Document store: #{@documents.length}/#{@capacity}\"\n  end\nend\n</code></pre>\n\n<p>I want to return the store data via <code>get_documents</code>, and prevent the user from changing/affecting its value via the returned object, e.g.,</p>\n\n<pre><code>ds = DocumentStore.new(3)\nds.add_document(\"Doc1\")\n\ndocs = ds.get_documents\ndocs.push(\"Doc2\")\n\nputs ds.inspect # this should just print [\"Doc1\"]\n</code></pre>\n"}, {"tags": ["ruby"], "answers": [{"comments": [{"owner": {"reputation": 1831, "user_id": 4160532, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Ey34JagqMzQ/AAAAAAAAAAI/AAAAAAAAABo/G70W8D2LXM4/photo.jpg?sz=128", "display_name": "Kedarnag Mukanahallipatna", "link": "https://stackoverflow.com/users/4160532/kedarnag-mukanahallipatna"}, "edited": false, "score": 0, "creation_date": 1536049841, "post_id": 52161961, "comment_id": 91273519, "body": "I tried that, but it does not encode <code>=C2=A9</code> to return <code>&amp;copy;</code>. I tried it on <code>Repl.it</code>."}, {"owner": {"reputation": 1081, "user_id": 1288687, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7217dd12520210182c093856f60cd376?s=128&d=identicon&r=PG", "display_name": "knugie", "link": "https://stackoverflow.com/users/1288687/knugie"}, "reply_to_user": {"reputation": 1831, "user_id": 4160532, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Ey34JagqMzQ/AAAAAAAAAAI/AAAAAAAAABo/G70W8D2LXM4/photo.jpg?sz=128", "display_name": "Kedarnag Mukanahallipatna", "link": "https://stackoverflow.com/users/4160532/kedarnag-mukanahallipatna"}, "edited": false, "score": 0, "creation_date": 1536050865, "post_id": 52161961, "comment_id": 91274100, "body": "@KedarnagMukanahallipatna I updated the answer to include converting of quoted-printable string to UTF-8 before encoding HTML entities."}, {"owner": {"reputation": 1831, "user_id": 4160532, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Ey34JagqMzQ/AAAAAAAAAAI/AAAAAAAAABo/G70W8D2LXM4/photo.jpg?sz=128", "display_name": "Kedarnag Mukanahallipatna", "link": "https://stackoverflow.com/users/4160532/kedarnag-mukanahallipatna"}, "edited": false, "score": 0, "creation_date": 1536051059, "post_id": 52161961, "comment_id": 91274209, "body": "Thank you. I did not think of <code>unpack</code> and <code>force_encoding</code>."}, {"owner": {"reputation": 3425, "user_id": 1493116, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/9371f372f90b7c283579b097c67b9cd2?s=128&d=identicon&r=PG", "display_name": "LewlSauce", "link": "https://stackoverflow.com/users/1493116/lewlsauce"}, "edited": false, "score": 0, "creation_date": 1536070429, "post_id": 52161961, "comment_id": 91286635, "body": "Thanks! Perhaps I can use some sort of regex to scan an entire string for these instances?"}, {"owner": {"reputation": 1081, "user_id": 1288687, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7217dd12520210182c093856f60cd376?s=128&d=identicon&r=PG", "display_name": "knugie", "link": "https://stackoverflow.com/users/1288687/knugie"}, "reply_to_user": {"reputation": 3425, "user_id": 1493116, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/9371f372f90b7c283579b097c67b9cd2?s=128&d=identicon&r=PG", "display_name": "LewlSauce", "link": "https://stackoverflow.com/users/1493116/lewlsauce"}, "edited": false, "score": 0, "creation_date": 1536163843, "post_id": 52161961, "comment_id": 91328671, "body": "@LewlSauce Sure you can, depending on why you want to do that, it might not be necessary. e.g. <code>&#39;Copyright =C2=A9 Me&#39;.unpack(&quot;M&quot;)</code> will work just fine (=&gt; <code>&quot;Copyright &#169; Me&quot;</code>), you don&#39;t have to extract escaped characters before converting them."}, {"owner": {"reputation": 3425, "user_id": 1493116, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/9371f372f90b7c283579b097c67b9cd2?s=128&d=identicon&r=PG", "display_name": "LewlSauce", "link": "https://stackoverflow.com/users/1493116/lewlsauce"}, "edited": false, "score": 0, "creation_date": 1536166165, "post_id": 52161961, "comment_id": 91329786, "body": "@knugie Thanks. I&#39;m importing email headers into an HTML form and there&#39;s no telling what&#39;s in the emails. Think I&#39;ve got it figured out though. I really appreciate it!!"}], "tags": [], "owner": {"reputation": 1081, "user_id": 1288687, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7217dd12520210182c093856f60cd376?s=128&d=identicon&r=PG", "display_name": "knugie", "link": "https://stackoverflow.com/users/1288687/knugie"}, "is_accepted": true, "score": 1, "last_activity_date": 1536050802, "last_edit_date": 1536050802, "creation_date": 1536049593, "answer_id": 52161961, "question_id": 52158515, "link": "https://stackoverflow.com/questions/52158515/best-way-to-find-potential-utf-8-characters-from-an-imported-email/52161961#52161961", "title": "Best way to find potential UTF-8 characters from an imported email", "body": "<p>There are two things to consider. First, the original string format using <code>=</code> is called \"quoted-printable\". Force UTF-8 encoding. Then, use <a href=\"https://github.com/threedaymonk/htmlentities#encoding\" rel=\"nofollow noreferrer\">htmlentities</a> to convert to HTML entities. Here is an example:</p>\n\n<pre><code>require 'htmlentities'\ncoder = HTMLEntities.new\nstring = '=C2=A9'.unpack(\"M\").first.force_encoding('UTF-8')\n\ncoder.encode(string) # =&gt; \"\u00a9\"\ncoder.encode(string, :named) # =&gt; \"&amp;copy;\"\n</code></pre>\n\n<p>I hope you find that helpful.</p>\n"}], "owner": {"reputation": 3425, "user_id": 1493116, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/9371f372f90b7c283579b097c67b9cd2?s=128&d=identicon&r=PG", "display_name": "LewlSauce", "link": "https://stackoverflow.com/users/1493116/lewlsauce"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 36, "favorite_count": 0, "accepted_answer_id": 52161961, "answer_count": 1, "score": 0, "last_activity_date": 1536050802, "creation_date": 1536032720, "question_id": 52158515, "link": "https://stackoverflow.com/questions/52158515/best-way-to-find-potential-utf-8-characters-from-an-imported-email", "title": "Best way to find potential UTF-8 characters from an imported email", "body": "<p>So when you view the source of an email, there are several characters in there that should be converted back to UTF-8 by the email client.</p>\n\n<p>For example, in Outlook, a source email may contain <code>=C2=A9</code> which converts to the copyright symbol. </p>\n\n<p>In ruby, is there a way that I can find these types of characters/patterns and convert them to HTML so that it's displayed in an HTML form? For example, taking things like <code>=C2=A9</code> and converting it into its associated HTML format <code>&amp;copy;</code>?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 610, "user_id": 7438993, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Q7hbh.jpg?s=128&g=1", "display_name": "Krupa Suthar", "link": "https://stackoverflow.com/users/7438993/krupa-suthar"}, "edited": false, "score": 1, "creation_date": 1536033019, "post_id": 52158478, "comment_id": 91267130, "body": "You should not handle errors with <code>render text</code> while creating API instead, you should use <code>render json: {errors: &quot;Email and password combination are invalid&quot;}, status: 422 </code>"}, {"owner": {"reputation": 6207, "user_id": 5117953, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/Ca0RW.jpg?s=128&g=1", "display_name": "Vishal", "link": "https://stackoverflow.com/users/5117953/vishal"}, "edited": false, "score": 0, "creation_date": 1536033072, "post_id": 52158478, "comment_id": 91267142, "body": "First of all please check any tutorial how to create rails api <a href=\"https://scotch.io/tutorials/build-a-restful-json-api-with-rails-5-part-one\" rel=\"nofollow noreferrer\">scotch.io/tutorials/&hellip;</a>"}, {"owner": {"reputation": 594, "user_id": 1708254, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/1e29e97dd79bdcba7d1c1fed60db5801?s=128&d=identicon&r=PG", "display_name": "Mohd Anas", "link": "https://stackoverflow.com/users/1708254/mohd-anas"}, "edited": false, "score": 0, "creation_date": 1536056160, "post_id": 52158478, "comment_id": 91277330, "body": "not related not with your answer but try using safe navigation operator <code>user&amp;.authenticate</code>"}], "owner": {"user_type": "does_not_exist", "display_name": "user9157191"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 371, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1536037548, "creation_date": 1536032338, "last_edit_date": 1536032764, "question_id": 52158478, "link": "https://stackoverflow.com/questions/52158478/rails-5-1-api-and-jbuilder-render-problem", "title": "rails 5.1 API and Jbuilder render problem", "body": "<p>After setup a simple API and try to login with a simple session controller </p>\n\n<p><strong>Session Controller</strong></p>\n\n<pre><code>def create\n  user = User.find_by(email: [:email])\n  if user &amp;&amp; user.authenticate([:password])\n    render json: {token:  user.access_token}, status: 200\n  else\n    render text: \"Email and password combination are invalid\", status: 422\n  end\nend\n</code></pre>\n\n<p>in the logs show</p>\n\n<blockquote>\n  <p>ActionView::MissingTemplate (Missing template sessions/create,\n  application/create with {:locale=>[:en], :formats=>[:json],\n  :variants=>[], :handlers=>[:raw, :erb, :html, :builder, :ruby,\n  :jbuilder]}. Searched in:   * \"/home/daniel/ranks/app/views\" ):</p>\n</blockquote>\n\n<p>after googling around seems a issue with jbuilder and the workaround that some proposed was to: in the application controller</p>\n\n<pre><code>include ActionView::Rendering\n\ndef render_to_body(options)\n  _render_to_body_with_renderer(options) || super\nend\n</code></pre>\n\n<p>but the problem persist so someone has any idea how to solve this issue with <code>rails 5.1</code> and <code>jbuilder 2.7.0</code>?</p>\n"}, {"tags": ["json", "ruby"], "comments": [{"owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "edited": false, "score": 0, "creation_date": 1536027042, "post_id": 52157852, "comment_id": 91266117, "body": "Can you please be a bit more specific about what you mean by &quot;access&quot;? Do you want a list like <code>[&quot;grand_child_A&quot;, &quot;grand_child_B&quot;, &quot;grand_child_C&quot;, &quot;&quot;grand_child_D&quot;, &quot;grand_child_E&quot;, &quot;grand_child_F&quot;]</code>? Or <code>[&quot;parent_0&quot;, &quot;child_10&quot;, &quot;grand_child_A&quot;, &quot;grand_child_B&quot;...]</code>? Or <code>[[&quot;parent_0&quot;, &quot;child_10&quot;, &quot;grand_child_A&quot;], [&quot;parent_0&quot;, &quot;child_10&quot;, &quot;grand_child_B&quot;]...]</code>? Or an iterator that will provide those? Or do you not want a list, but something else? If possible, give an example of the output you want."}, {"owner": {"reputation": 37, "user_id": 10312570, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d5c6939643192a6ce44f7e5654327fc?s=128&d=identicon&r=PG&f=1", "display_name": "Cobako", "link": "https://stackoverflow.com/users/10312570/cobako"}, "reply_to_user": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "edited": false, "score": 0, "creation_date": 1536027417, "post_id": 52157852, "comment_id": 91266181, "body": "Okay, to make it simple, I&#39;d like to list all objects below <code>child_10</code> which are all the grand_child."}, {"owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "edited": false, "score": 0, "creation_date": 1536030614, "post_id": 52157852, "comment_id": 91266653, "body": "<code>JSON.parse(json)[&quot;parent_0&quot;][0][&quot;child_10&quot;].flat_map { |x| x.values }</code>, though I think I may be confusing you with this."}], "answers": [{"tags": [], "owner": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "is_accepted": false, "score": 0, "last_activity_date": 1536037532, "creation_date": 1536037532, "answer_id": 52159132, "question_id": 52157852, "link": "https://stackoverflow.com/questions/52157852/how-to-access-json-nested-objects-with-ruby/52159132#52159132", "title": "How to access JSON nested objects with ruby?", "body": "<p>One option:</p>\n\n<pre><code>require 'json'\n\njson = File.read('seed.json')\ncontent = JSON.parse(json)\n\nparent = 'parent_0'\nchild = 'child_10'\n\ncontent[parent].flat_map{ |e| e[child].flat_map { |ee| ee.keys} }\n\n# =&gt; [\"grand_child_A\", \"grand_child_B\", \"grand_child_C\"]\n</code></pre>\n"}], "owner": {"reputation": 37, "user_id": 10312570, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d5c6939643192a6ce44f7e5654327fc?s=128&d=identicon&r=PG&f=1", "display_name": "Cobako", "link": "https://stackoverflow.com/users/10312570/cobako"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 208, "favorite_count": 0, "closed_date": 1536043276, "answer_count": 1, "score": -3, "last_activity_date": 1536037532, "creation_date": 1536026400, "question_id": 52157852, "link": "https://stackoverflow.com/questions/52157852/how-to-access-json-nested-objects-with-ruby", "closed_reason": "Duplicate", "title": "How to access JSON nested objects with ruby?", "body": "<p>so I have a JSON file that is made of nested objects that follow the following pattern : <code>parent -&gt; child -&gt; grand_child</code> and looks like the following : </p>\n\n<pre><code>//seed.json\n    {\n      \"parent_0\":[\n        {\n          \"child_10\":[\n            {\n              \"grand_child_A\":[],\n              \"grand_child_B\":[],\n              \"grand_child_C\":[]\n            }\n          ],\n          \"child_20\":[],\n          \"child_30\":[],\n          \"child_40\":[]\n        }\n      ],\n\n      \"parent_1\":[\n        {\n          \"child_11\":[\n            {\n              \"grand_child_D\":[],\n              \"grand_child_E\":[],\n              \"grand_child_F\":[]\n            }\n          ]\n        }\n      ]\n    }\n</code></pre>\n\n<p>What I am trying to do is to list all objects present in parents , child and grand_child with ruby.</p>\n\n<p>I was able to pull that off with <code>parent</code> by doing the following :</p>\n\n<pre><code># seed.json\n\njson = File.read('seed.json')\ncontent = JSON.parse(json).keys\n</code></pre>\n\n<p>which return the following : </p>\n\n<pre><code>$ ruby seed.rb\n\"parent_0\"\n\"parent_1\"\n$ \n</code></pre>\n\n<p>I'm stuck there ... I'd like to access <code>child_10</code> and list all its objects which are <code>grand_child_A</code>, <code>grand_child_B</code>, <code>grand_child_C</code>, the same way I did access and list <code>parent_0 and parent_1</code> but I have no idea how to proceed.</p>\n\n<p>Any idea ?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord"], "comments": [{"owner": {"reputation": 13378, "user_id": 1430810, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/v669u.jpg?s=128&g=1", "display_name": "arieljuod", "link": "https://stackoverflow.com/users/1430810/arieljuod"}, "edited": false, "score": 0, "creation_date": 1536020683, "post_id": 52157260, "comment_id": 91265006, "body": "What you need is a <code>has_many through:</code> relationship <a href=\"https://guides.rubyonrails.org/association_basics.html#the-has-many-through-association\" rel=\"nofollow noreferrer\">guides.rubyonrails.org/&hellip;</a>"}, {"owner": {"reputation": 362, "user_id": 7521284, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/dBvnp.jpg?s=128&g=1", "display_name": "Ulises", "link": "https://stackoverflow.com/users/7521284/ulises"}, "reply_to_user": {"reputation": 13378, "user_id": 1430810, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/v669u.jpg?s=128&g=1", "display_name": "arieljuod", "link": "https://stackoverflow.com/users/1430810/arieljuod"}, "edited": false, "score": 0, "creation_date": 1536020875, "post_id": 52157260, "comment_id": 91265032, "body": "But i dont have any model for the table with the relations, why should i use through?"}, {"owner": {"reputation": 13378, "user_id": 1430810, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/v669u.jpg?s=128&g=1", "display_name": "arieljuod", "link": "https://stackoverflow.com/users/1430810/arieljuod"}, "edited": false, "score": 0, "creation_date": 1536020987, "post_id": 52157260, "comment_id": 91265049, "body": "Check this part of the associations guide <a href=\"https://guides.rubyonrails.org/association_basics.html#choosing-between-has-many-through-and-has-and-belongs-to-many\" rel=\"nofollow noreferrer\">guides.rubyonrails.org/&hellip;</a> <code>You should use has_many :through if you need validations, callbacks or extra attributes on the join model.</code>. Since you need extra attributes you have to use it instead of a simple HABTM."}], "answers": [{"comments": [{"owner": {"reputation": 362, "user_id": 7521284, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/dBvnp.jpg?s=128&g=1", "display_name": "Ulises", "link": "https://stackoverflow.com/users/7521284/ulises"}, "edited": false, "score": 0, "creation_date": 1536021740, "post_id": 52157407, "comment_id": 91265174, "body": "I got &quot;uninitialized constant Cliente::ClientesHardware&quot; with the controller:     @cliente = Cliente.find(params[:cliente_id])         @cliente.clientes_hardwares.build(             :hardware =&gt; Hardware.find(params[:hardware_id]),              :vigencia =&gt; &quot;2018-01-01&quot;         )"}, {"owner": {"reputation": 362, "user_id": 7521284, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/dBvnp.jpg?s=128&g=1", "display_name": "Ulises", "link": "https://stackoverflow.com/users/7521284/ulises"}, "edited": false, "score": 0, "creation_date": 1536022001, "post_id": 52157407, "comment_id": 91265214, "body": "sorry i change the model"}, {"owner": {"reputation": 2885, "user_id": 3372172, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Q3RaO.png?s=128&g=1", "display_name": "Pablo", "link": "https://stackoverflow.com/users/3372172/pablo"}, "reply_to_user": {"reputation": 362, "user_id": 7521284, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/dBvnp.jpg?s=128&g=1", "display_name": "Ulises", "link": "https://stackoverflow.com/users/7521284/ulises"}, "edited": false, "score": 0, "creation_date": 1536022073, "post_id": 52157407, "comment_id": 91265228, "body": "Have you created the model <code>ClientesHardware</code> in a file <code>clientes_hardware.rb</code>?"}], "tags": [], "owner": {"reputation": 2885, "user_id": 3372172, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Q3RaO.png?s=128&g=1", "display_name": "Pablo", "link": "https://stackoverflow.com/users/3372172/pablo"}, "is_accepted": true, "score": 1, "last_activity_date": 1536021289, "creation_date": 1536021289, "answer_id": 52157407, "question_id": 52157260, "link": "https://stackoverflow.com/questions/52157260/rails-insert-has-many-to-has-many-on-table-with-extra-field/52157407#52157407", "title": "Rails Insert Has_Many to Has_Many on table with extra field", "body": "<p>If you need to add attributes to the join table (clientes_hardwares)  the &lt;&lt; approach (without explicitly using the join table) will not work as it does not set any additional attribute (Note that the additional attributes are not in clientes or hardwares but in the join table). You must define and use the join model instead:</p>\n\n<pre><code>class Cliente &lt; ApplicationRecord\n  has_many :clientes_hardwares\n  has_many :hardwares through: :clientes_hardwares\nend\n\nclass Hardware &lt; ApplicationRecord\n  has_many :clientes_hardwares\n  has_many :clientes through: :clientes_hardwares\nend\n\nclass ClientesHardware &lt; ApplicationRecord\n  belongs to :cliente\n  belongs to :hardware\nend\n\ndef sethardware\n  @cliente = Cliente.find(params[:cliente_id])\n  @hardware = Hardware.find(params[:hardware_id])\n\n  @cliente.clientes_hardwares.build(\n    :hardware =&gt; @hardware, \n    :vigencia =&gt; \"2018-01-01\"\n  )\n  if @cliente.save\n    flash[:info] = 'Cliente creado correctamente'\n    redirect_to action: 'show', id: params[:cliente_id]\n  else\n    flash[:alert] = 'Error al crear el usuario'\n    redirect_to action: 'show', id: params[:cliente_id]\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 362, "user_id": 7521284, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/dBvnp.jpg?s=128&g=1", "display_name": "Ulises", "link": "https://stackoverflow.com/users/7521284/ulises"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "accepted_answer_id": 52157407, "answer_count": 1, "score": 1, "last_activity_date": 1536021289, "creation_date": 1536019436, "question_id": 52157260, "link": "https://stackoverflow.com/questions/52157260/rails-insert-has-many-to-has-many-on-table-with-extra-field", "title": "Rails Insert Has_Many to Has_Many on table with extra field", "body": "<p>We have a simple app, we created these models:</p>\n\n<pre><code>class Cliente &lt; ApplicationRecord\n    has_and_belongs_to_many :hardware\nend\n</code></pre>\n\n<p>and</p>\n\n<pre><code>class Hardware &lt; ApplicationRecord\n    has_and_belongs_to_many :clientes\nend\n</code></pre>\n\n<p>We created an intermediate table called \"clientes_hardwares\", when we assign the hardware with the client, we wanna set another field on the table called \"vigencia\", table:</p>\n\n<p><a href=\"https://i.stack.imgur.com/IaZ2V.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/IaZ2V.png\" alt=\"enter image description here\"></a></p>\n\n<p>On our controller we set:</p>\n\n<pre><code>def sethardware\n    @cliente = Cliente.find(params[:cliente_id])\n    @cliente.hardware &lt;&lt; Hardware.find(params[:hardware_id])\n\n    @cliente.hardware.build(:vigencia =&gt; \"2018-01-01\")\n    if @cliente.save\n        flash[:info] = 'Cliente creado correctamente'\n        redirect_to action: 'show', id: params[:cliente_id]\n    else\n        flash[:alert] = 'Error al crear el usuario'\n        redirect_to action: 'show', id: params[:cliente_id]\n    end\nend\n</code></pre>\n\n<p>Without this line:</p>\n\n<pre><code>@cliente.hardware.build(:vigencia =&gt; \"2018-01-01\")\n</code></pre>\n\n<p>It works and set the client_id and the hardware_id, how can we set the extra field called \"vigencia\", because if we called like build and like param it shows that hardware hasn't that attribute?</p>\n\n<p>Regards</p>\n"}, {"tags": ["ruby", "recursion", "binary-search"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1536008425, "post_id": 52155992, "comment_id": 91262525, "body": "It&#39;d help a lot if you strip out the line numbers in pasted code so that we can build on it and make a solution wtithout having to do that."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1536008470, "post_id": 52155992, "comment_id": 91262539, "body": "Remember that when trying to solve problems like this it&#39;s usually best to create a one or more test cases first and code second. Your test cases help define the parameters of the problem you&#39;re trying to solve, and will identify when you have a solution."}, {"owner": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "edited": false, "score": 0, "creation_date": 1536009493, "post_id": 52155992, "comment_id": 91262831, "body": "An example of <code>arr</code>, an example of <code>target</code> and the related expected output could help people giving an answer."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1536022822, "post_id": 52155992, "comment_id": 91265338, "body": "Here are a couple of suggestions about the construction of questions. 1. State your question first, in words (reverse your first two paragraphs). 2. Readers may wish to run your code, with or without modifications. The first step is to cut-and-paste. Here a second step is needed to remove line numbers. It&#39;s best to present code only, no line numbers, IRB prompts and so on. 3. It would have been helpful had you given an example that resulted in the exception you mention..."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1536022830, "post_id": 52155992, "comment_id": 91265339, "body": "...When you give an example (more generally), make everything a valid Ruby object (no <code>...(etc.)</code>, for example, make the example as succinct as possible, assign a variable to each input object (e.g., <code>arr = [1,2,3]</code>) so readers can refer to those variables in answers and comments without having to define them, and show the desired result (as a Ruby object)."}], "answers": [{"comments": [{"owner": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "edited": false, "score": 0, "creation_date": 1536037866, "post_id": 52156716, "comment_id": 91268057, "body": "To reproduce the error: <code>arr  =  [0,1]</code>, <code>target = 2</code>"}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 3, "last_activity_date": 1536014100, "last_edit_date": 1536014100, "creation_date": 1536013251, "answer_id": 52156716, "question_id": 52155992, "link": "https://stackoverflow.com/questions/52155992/recursive-binary-search-in-ruby/52156716#52156716", "title": "recursive binary search in ruby", "body": "<p>I was unable to reproduce the exception reported by the OP (as the data that produced the exception was not given in the question), but the main problem is that, because <code>max_index</code> is computed from <code>arr</code>, and <code>arr</code> is constantly getting smaller, the index returned by the method will have no relation to the correct index in the initial array <code>arr</code>.</p>\n\n<p>Suppose, for example, that <code>arr = [1,2,3,4,5,6]</code> and <code>target = 6</code>. In this case the method will return <code>0</code> (rather than <code>5</code>) as the index of the target element. That's because <code>arr</code> will progressively become <code>arr[3..6]</code>, <code>arr[4..6]</code>, <code>arr[5..6]</code> and <code>arr[6]</code>, at which point index <code>0</code> will be returned.</p>\n\n<p>Here is one way the method could be written, using a <code>case</code> statement. The method assumes that <code>target</code> is an element of <code>arr</code> and (as required by binary searches) the elements of <code>arr</code> are ordered, smallest to largest.</p>\n\n<pre><code>def recursive_binary_search(arr, target, min_index=0, max_index=arr.size-1)\n  mid_index = (min_index+max_index)/2\n  case arr[mid_index] &lt;=&gt; target\n  when  0  # arr[mid_index] == target\n    mid_index\n  when -1  # arr[mid_index] &lt; target\n    min_index = mid_index + 1\n    recursive_binary_search(arr, target, min_index, max_index)\n  when  1  # arr[mid_index] &gt; target\n    max_index = mid_index - 1\n    recursive_binary_search(arr, target, min_index, max_index)\n  end\nend\n\narr = [1,2,3,4,5,6]\n\narr.each { |target| puts \"#{target}: #{recursive_binary_search(arr, target)}\" }\n1: 0\n2: 1\n3: 2\n4: 3\n5: 4\n6: 5\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 10311974, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-BqMtDjTmVzU/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaP3-UeEuYn7Ep9BbDPWLTtUNvVYlA/mo/photo.jpg?sz=128", "display_name": "Ahmed Abdelaal", "link": "https://stackoverflow.com/users/10311974/ahmed-abdelaal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 995, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1536029929, "creation_date": 1536007230, "last_edit_date": 1536029929, "question_id": 52155992, "link": "https://stackoverflow.com/questions/52155992/recursive-binary-search-in-ruby", "title": "recursive binary search in ruby", "body": "<p>I've been learning some algorithms and I can't find the reason why my method is failing. if you could look at the code and shed some light as to why that is happening. I would truly appreciate it.</p>\n\n<p>I'm trying to write a method that would binary search an array recursively and so far that is all my code.</p>\n\n<pre><code> def recursive_binary_search(arr, target)\n   max_index = arr.length - 1\n   mid_index = max_index / 2\n\n   if arr[mid_index] &gt; target\n     new_arr = arr[0..(mid_index - 1)]\n     recursive_binary_search(new_arr, target)\n   elsif arr[mid_index] &lt; target\n     new_arr = arr[(mid_index + 1)..max_index]\n     recursive_binary_search(new_arr, target)\n   else\n     return mid_index\n   end\n end\n</code></pre>\n\n<p>The error I keep getting is <code>undefined method '&gt;' for nil:NilClass</code></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "heroku", "ruby-on-rails-5.2"], "comments": [{"owner": {"reputation": 1556, "user_id": 2830852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31ea598b6bc18b59de1e77a4c6f6c3e5?s=128&d=identicon&r=PG", "display_name": "Tarek N. Elsamni", "link": "https://stackoverflow.com/users/2830852/tarek-n-elsamni"}, "edited": false, "score": 0, "creation_date": 1535997160, "post_id": 52154149, "comment_id": 91258917, "body": "Where did you get that the error is related to javascript?"}, {"owner": {"reputation": 1682, "user_id": 6392696, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/09WDQ.jpg?s=128&g=1", "display_name": "nourza", "link": "https://stackoverflow.com/users/6392696/nourza"}, "edited": false, "score": 0, "creation_date": 1535997276, "post_id": 52154149, "comment_id": 91258966, "body": "Does it work locally?"}, {"owner": {"reputation": 1006, "user_id": 4594902, "user_type": "registered", "accept_rate": 65, "profile_image": "https://graph.facebook.com/686173344826419/picture?type=large", "display_name": "Ilja KO", "link": "https://stackoverflow.com/users/4594902/ilja-ko"}, "edited": false, "score": 0, "creation_date": 1535998341, "post_id": 52154149, "comment_id": 91259348, "body": "yes it works locally (<b>like you can see in STEP 9</b>) as I said that its failing in production mode but I edited to make it clearer. And I know its Javascript because the app requires &quot;rails-ujs&quot; to work and without it it doesnt work even on local and I get JavaScript errors in production mode whereas locally there are none at all in console. Here is another Thread of mine about this issue to amke it clear: <a href=\"https://stackoverflow.com/questions/52138549/heroku-js-error-in-rails-5-production-app\" title=\"heroku js error in rails 5 production app\">stackoverflow.com/questions/52138549/&hellip;</a>"}, {"owner": {"reputation": 1006, "user_id": 4594902, "user_type": "registered", "accept_rate": 65, "profile_image": "https://graph.facebook.com/686173344826419/picture?type=large", "display_name": "Ilja KO", "link": "https://stackoverflow.com/users/4594902/ilja-ko"}, "edited": false, "score": 0, "creation_date": 1535998481, "post_id": 52154149, "comment_id": 91259401, "body": "If you want go through these minimal steps on your windows machine and tell me if you can reproduce the error I would be thankful. There is something wrong with rails at this point imo"}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 1, "creation_date": 1536005371, "post_id": 52154149, "comment_id": 91261557, "body": "Have you tried looking at the browser console and actually trying to diagnose the javascript error?"}, {"owner": {"reputation": 1006, "user_id": 4594902, "user_type": "registered", "accept_rate": 65, "profile_image": "https://graph.facebook.com/686173344826419/picture?type=large", "display_name": "Ilja KO", "link": "https://stackoverflow.com/users/4594902/ilja-ko"}, "edited": false, "score": 0, "creation_date": 1536009121, "post_id": 52154149, "comment_id": 91262720, "body": "no but the links are there for you to do so. I will try to exclude the duktape gem like  chrismanderson told me"}], "answers": [{"comments": [{"owner": {"reputation": 1006, "user_id": 4594902, "user_type": "registered", "accept_rate": 65, "profile_image": "https://graph.facebook.com/686173344826419/picture?type=large", "display_name": "Ilja KO", "link": "https://stackoverflow.com/users/4594902/ilja-ko"}, "edited": false, "score": 0, "creation_date": 1536009774, "post_id": 52156207, "comment_id": 91262913, "body": "I did what you said <a href=\"https://bitbucket.org/Jaiel/my_app/src/master/Gemfile\" rel=\"nofollow noreferrer\">bitbucket.org/Jaiel/my_app/src/master/Gemfile</a>. Put duktape to dev group and pushed to Heroku. There was a line stating <code>Removing duktape (2.0.1.0)</code> while deploying. Still a lot of NANs and error and not working link in <a href=\"https://rocky-inlet-61318.herokuapp.com/\" rel=\"nofollow noreferrer\">rocky-inlet-61318.herokuapp.com</a>"}, {"owner": {"reputation": 4023, "user_id": 396964, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/9d5d2fc7ebac788a7eca7acd89a96485?s=128&d=identicon&r=PG", "display_name": "chrismanderson", "link": "https://stackoverflow.com/users/396964/chrismanderson"}, "reply_to_user": {"reputation": 1006, "user_id": 4594902, "user_type": "registered", "accept_rate": 65, "profile_image": "https://graph.facebook.com/686173344826419/picture?type=large", "display_name": "Ilja KO", "link": "https://stackoverflow.com/users/4594902/ilja-ko"}, "edited": false, "score": 0, "creation_date": 1536070956, "post_id": 52156207, "comment_id": 91287031, "body": "Try creating a completely new Heroku app. I have a hunch there&#39;s some deployment setting that got locked in on the first deploy. I would also reach out to Heroku support, they can likely offer more assistance."}, {"owner": {"reputation": 1006, "user_id": 4594902, "user_type": "registered", "accept_rate": 65, "profile_image": "https://graph.facebook.com/686173344826419/picture?type=large", "display_name": "Ilja KO", "link": "https://stackoverflow.com/users/4594902/ilja-ko"}, "edited": false, "score": 0, "creation_date": 1536102425, "post_id": 52156207, "comment_id": 91300903, "body": "I resolved the issue, it was caused by the <code>uglifier</code> gem that has a bug in production I guess"}], "tags": [], "owner": {"reputation": 4023, "user_id": 396964, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/9d5d2fc7ebac788a7eca7acd89a96485?s=128&d=identicon&r=PG", "display_name": "chrismanderson", "link": "https://stackoverflow.com/users/396964/chrismanderson"}, "is_accepted": false, "score": 1, "last_activity_date": 1536008883, "creation_date": 1536008883, "answer_id": 52156207, "question_id": 52154149, "link": "https://stackoverflow.com/questions/52154149/javascript-in-a-fresh-rails-5-2-1-app-on-heroku-doesnt-work-properly/52156207#52156207", "title": "Javascript in a fresh Rails 5.2.1 app on Heroku doesn&#39;t work properly", "body": "<p>The issue is the <code>duktape</code> gem. That is a Javascript engine that's not widely used in the Rails world, but is included by default in a new Windows rails installation, because it's one of the only engines that actually works in Windows. (If you haven't figured out by now, not a lot of Rails windows devs :) ).</p>\n\n<p>I don't think Heroku has great support for it, so when it picks up that engines, the JS silently fails to compile. If you look into the <code>application.js</code> file in production, you'll see a bunch of <code>NaN: \"select[data-remote], input[data-remote], textarea[data-remote]\", at the top, when you should see things like</code>                inputChangeSelector: \"select[data-remote], input[data-remote], textarea[data-remote]\"`.</p>\n\n<p>If you want to get things working, move the <code>Duktape</code> gem out of its current spot to the <code>development</code> section of your Gemfile, bundle, and redeploy (you can avoid a JS compiler in the main Gemfile for now.</p>\n\n<p>I would also open a ticket with Heroku. Generally, they warn you of common config issues such as this, but when I tried to deploy your app, I got no such warning. I would imagine just hasn't come up for a lot of users.</p>\n"}, {"tags": [], "owner": {"reputation": 1006, "user_id": 4594902, "user_type": "registered", "accept_rate": 65, "profile_image": "https://graph.facebook.com/686173344826419/picture?type=large", "display_name": "Ilja KO", "link": "https://stackoverflow.com/users/4594902/ilja-ko"}, "is_accepted": true, "score": 2, "last_activity_date": 1536102376, "creation_date": 1536102376, "answer_id": 52175045, "question_id": 52154149, "link": "https://stackoverflow.com/questions/52154149/javascript-in-a-fresh-rails-5-2-1-app-on-heroku-doesnt-work-properly/52175045#52175045", "title": "Javascript in a fresh Rails 5.2.1 app on Heroku doesn&#39;t work properly", "body": "<p>I resolved my issue: It was the <code>uglifier</code> gem that caused the problem as it was not working correctly. I am just a beginner and looking back this gem should have been the first thing I needed to check as it does the JS compression.</p>\n\n<p>Now the JS runs perfectly fine. Here is the change I did in the <code>GemFile</code> to make it work:</p>\n\n<p>From</p>\n\n<pre><code>gem 'uglifier', '&gt;= 1.3.0'\n</code></pre>\n\n<p>to</p>\n\n<pre><code>gem 'uglifier', '~&gt; 3.0.4'\n</code></pre>\n\n<p>The <code>uglifier</code> gem version was <code>4.1.18</code> that caused this JS error in production environment.</p>\n\n<p>Hope this helps others to pin down their JS errors on Heroku</p>\n"}], "owner": {"reputation": 1006, "user_id": 4594902, "user_type": "registered", "accept_rate": 65, "profile_image": "https://graph.facebook.com/686173344826419/picture?type=large", "display_name": "Ilja KO", "link": "https://stackoverflow.com/users/4594902/ilja-ko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 340, "favorite_count": 0, "accepted_answer_id": 52175045, "answer_count": 2, "score": 1, "last_activity_date": 1536102376, "creation_date": 1535995726, "last_edit_date": 1536002842, "question_id": 52154149, "link": "https://stackoverflow.com/questions/52154149/javascript-in-a-fresh-rails-5-2-1-app-on-heroku-doesnt-work-properly", "title": "Javascript in a fresh Rails 5.2.1 app on Heroku doesn&#39;t work properly", "body": "<p>I think there is a big problem with JavaScript files in Rails 5 apps in Production environment on Heroku. It works locally though</p>\n\n<p>My configuration:</p>\n\n<pre><code>Windows:   10 Education\nRails:     5.2.1\nRuby:      2.4.4p296\nHeroku:    heroku/7.7.7 win32-x64 node-v10.7.0\npostgres:  postgres (PostgreSQL) 10.3\n</code></pre>\n\n<p>I will now present you the steps I made to confirm that it doesnt work and you can try for your self. In the end you will have a link to the bitbucket repo and the app on Heroku.</p>\n\n<p><strong>Step 1: Creating a new Rails 5 App and switching to the root folder</strong></p>\n\n<pre><code>&gt; rails new my_app --database=postgresql\n&gt; cd my_app\n</code></pre>\n\n<p><strong>Step 2: Generate a controller</strong></p>\n\n<pre><code>&gt; rails generate controller static_pages\n</code></pre>\n\n<p><strong>Step 3: edit the /app/controllers/static_pages_controller file</strong></p>\n\n<pre><code>class StaticPagesController &lt; ApplicationController\n  def show\n  end\n\n  def destroy\n  end\nend\n</code></pre>\n\n<p><strong>Step 4: create the views to show with the actions</strong></p>\n\n<p><em>/app/views/static_pages/show.html.erb :</em></p>\n\n<pre><code>this is the show view\n\nhere is a link to the delete action:\n\n&lt;%= link_to t('logout'), logout_path, method: :delete %&gt;\n</code></pre>\n\n<p><em>/app/views/static_pages/destroy.html.erb :</em></p>\n\n<pre><code>this is the destroy view which is called with a link_to method: :delete\n</code></pre>\n\n<p><strong>Step 5: edit the /config/routes.rb file</strong></p>\n\n<pre><code>Rails.application.routes.draw do\n  root 'static_pages#show'\n  get 'static_pages/show'\n  delete '/logout', to: 'static_pages#destroy'\nend\n</code></pre>\n\n<p><strong>Step 6: check the routes</strong></p>\n\n<pre><code>&gt; rails routes\n                   Prefix Verb   URI Pattern                                                                              Controller#Action\n                     root GET    /                                                                                        staticpages#show\n         staticpages_show GET    /staticpages/show(.:format)                                                              staticpages#show\n                   logout DELETE /logout(.:format)                                                                        staticpages#destroy\n       rails_service_blob GET    /rails/active_storage/blobs/:signed_id/*filename(.:format)                               active_storage/blobs#show\nrails_blob_representation GET    /rails/active_storage/representations/:signed_blob_id/:variation_key/*filename(.:format) active_storage/representations#show\n       rails_disk_service GET    /rails/active_storage/disk/:encoded_key/*filename(.:format)                              active_storage/disk#show\nupdate_rails_disk_service PUT    /rails/active_storage/disk/:encoded_token(.:format)                                      active_storage/disk#update\n     rails_direct_uploads POST   /rails/active_storage/direct_uploads(.:format)                                           active_storage/direct_uploads#create\n</code></pre>\n\n<p><strong>Step 7: create the DB and migrate</strong></p>\n\n<pre><code>&gt; rails db:create\nCreated database 'my_app_development'\nCreated database 'my_app_test'\n\n&gt; rails db:migrate\n</code></pre>\n\n<p><strong>Step 8: start the server</strong></p>\n\n<pre><code>&gt; rails server\n</code></pre>\n\n<p><strong>Step 9: go to localhost:3000/ and click the link presented. the link works and send a delete action to the server</strong></p>\n\n<pre><code>Started GET \"/\" for 127.0.0.1 at 2018-09-03 18:43:52 +0200\nProcessing by StaticPagesController#show as HTML\n  Rendering static_pages/show.html.erb within layouts/application\n  Rendered static_pages/show.html.erb within layouts/application (12.2ms)\nCompleted 200 OK in 504ms (Views: 486.7ms | ActiveRecord: 0.0ms)\n\n\nStarted DELETE \"/logout\" for 127.0.0.1 at 2018-09-03 18:43:57 +0200\nProcessing by StaticPagesController#destroy as HTML\n  Parameters: {\"authenticity_token\"=&gt;\"10NHmV8N4tF3O0r/YYtKtKmHm3xthGjPAE51osb7L9skCM5ZoM2RoiCtZD4Crh9d69ndTOeNRMmIW28ipI/z9A==\"}\n  Rendering static_pages/destroy.html.erb within layouts/application\n  Rendered static_pages/destroy.html.erb within layouts/application (0.0ms)\nCompleted 200 OK in 90ms (Views: 73.0ms | ActiveRecord: 0.0ms)\n</code></pre>\n\n<p><strong>Step 10: create a heroku app(you have to be logged in to heroku on your system)</strong></p>\n\n<pre><code>&gt; heroku create\n</code></pre>\n\n<p><strong>Step 11: push your work to Heroku</strong></p>\n\n<pre><code>&gt; git add -A\n&gt; git commit -m \"init\"\n&gt; git push --set-upstream heroku master\n</code></pre>\n\n<p><strong>Step 12: open your Heroku app and do like in Step 9 and fail because JavaScript seems to not work correctly</strong></p>\n\n<pre><code>(...) Started GET \"/\" for 84.147.254.28 at 2018-09-03 16:47:44 +0000\n(...) Processing by StaticPagesController#show as HTML\n(...)   Rendering static_pages/show.html.erb within layouts/application\n(...)   Rendered static_pages/show.html.erb within layouts/application (9.2ms)\n(...) Completed 200 OK in 27ms (Views: 13.7ms)\n.\n.\n. \n(...) Started GET \"/logout\" for 84.147.254.28 at 2018-09-03 16:48:05 +0000\n(...) ActionController::RoutingError (No route matches [GET] \"/logout\"):\n</code></pre>\n\n<p>This is either an obvious error on Rails or on Heroku's side as all you see I did was jsut create a fresh new rails app and changed the routes, generated a controller and made 2 views for the controller actions.</p>\n\n<p>Here are the links if you want to check out all the sources for the app and the app deployed to heroku.</p>\n\n<p>You can check the source code here:<a href=\"https://bitbucket.org/Jaiel/my_app/src/master/\" rel=\"nofollow noreferrer\">BitBucket Repo</a></p>\n\n<p>And the app here: <a href=\"https://rocky-inlet-61318.herokuapp.com/\" rel=\"nofollow noreferrer\" title=\"Heroku App\">Heroku app</a></p>\n\n<p>Does anyone else has this hardships with Rails and Heroku or is there anything I can do to make it work?</p>\n\n<p><strong>EDIT</strong>: made the output of Step 12 a bit clearer by deleting unneccessary log information and time stamps</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 1277, "user_id": 1737811, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/ab510b7d0d145c538fcc7638395ee703?s=128&d=identicon&r=PG", "display_name": "mutantkeyboard", "link": "https://stackoverflow.com/users/1737811/mutantkeyboard"}, "edited": false, "score": 0, "creation_date": 1536045708, "post_id": 52153204, "comment_id": 91271269, "body": "Which OS do you use?"}, {"owner": {"reputation": 288, "user_id": 306709, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45820ec72feeef638c30e7368132342d?s=128&d=identicon&r=PG", "display_name": "benzimmer", "link": "https://stackoverflow.com/users/306709/benzimmer"}, "reply_to_user": {"reputation": 1277, "user_id": 1737811, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/ab510b7d0d145c538fcc7638395ee703?s=128&d=identicon&r=PG", "display_name": "mutantkeyboard", "link": "https://stackoverflow.com/users/1737811/mutantkeyboard"}, "edited": false, "score": 0, "creation_date": 1536154743, "post_id": 52153204, "comment_id": 91322808, "body": "A sorry. It&#39;s MacOS 10.12.6."}], "owner": {"reputation": 288, "user_id": 306709, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45820ec72feeef638c30e7368132342d?s=128&d=identicon&r=PG", "display_name": "benzimmer", "link": "https://stackoverflow.com/users/306709/benzimmer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 39, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1535991227, "creation_date": 1535990847, "last_edit_date": 1535991227, "question_id": 52153204, "link": "https://stackoverflow.com/questions/52153204/bin-rails-generate-h-showing-rackup-documentation", "title": "bin/rails generate -h showing rackup documentation", "body": "<p>When I run <code>bin/rails generate --help</code> in my rails (5.1.6) project root folder it shows me the help for the rackup command:</p>\n\n<pre><code>bin/rails generate --help                                                                                                                                        [\u00b1internal/better-admin \u25cf\u25cf]\nUsage: rackup [ruby options] [rack options] [rackup config]\n\nRuby options:\n  -e, --eval LINE          evaluate a LINE of code\n  -b BUILDER_LINE,         evaluate a BUILDER_LINE of code as a builder script\n      --builder\n  -d, --debug              set debugging flags (set $DEBUG to true)\n  -w, --warn               turn warnings on for your script\n  -q, --quiet              turn off logging\n  -I, --include PATH       specify $LOAD_PATH (may be used more than once)\n  -r, --require LIBRARY    require the library, before executing your script\n\nRack options:\n  -s, --server SERVER      serve using SERVER (thin/puma/webrick/mongrel)\n  -o, --host HOST          listen on HOST (default: localhost)\n  -p, --port PORT          use PORT (default: 9292)\n  -O NAME[=VALUE],         pass VALUE to the server as option NAME. If no VALUE, sets it to true. Run 'bin/rails -s SERVER -h' to get a list of options for SERVER\n      --option\n  -E, --env ENVIRONMENT    use ENVIRONMENT for defaults (default: development)\n  -D, --daemonize          run daemonized in the background\n  -P, --pid FILE           file to store PID\n\nCommon options:\n  -h, -?, --help           Show this message\n      --version            Show version\n\nServer-specific options for Rack::Handler::Puma:\n  -O Threads=MIN:MAX       min:max threads to use (default 0:16)\n  -O Verbose               Don't report each request (default: false)\n</code></pre>\n\n<p><code>bin/rails generate</code> alone works fine, but every generate command using a modifier seems to be redirected to the rackup command. So for example <code>bin/rails generate GENERATOR --anyoption</code> shows me this:</p>\n\n<pre><code>invalid option: --anyoption\nUsage: rackup [ruby options] [rack options] [rackup config]\n...\n</code></pre>\n\n<p>Has anyone ever encountered this? I already tried disabling spring, but get the same results.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "therubyracer", "execjs"], "comments": [{"owner": {"reputation": 1230, "user_id": 511203, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ec96aadd672b8056173e4e8a5225d8b?s=128&d=identicon&r=PG", "display_name": "Mike Gorski", "link": "https://stackoverflow.com/users/511203/mike-gorski"}, "edited": false, "score": 0, "creation_date": 1535993965, "post_id": 52153092, "comment_id": 91257749, "body": "Did you run <code>bundle install</code> after changing to use <code>bootstrap</code>?"}, {"owner": {"reputation": 1794, "user_id": 1326996, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/1384a74d82ed75e6226ea30f30cbbeff?s=128&d=identicon&r=PG", "display_name": "barnacle.m", "link": "https://stackoverflow.com/users/1326996/barnacle-m"}, "edited": false, "score": 0, "creation_date": 1535998580, "post_id": 52153092, "comment_id": 91259427, "body": "I JUST started getting the exact same issue, but with a different package that also uses <code>autoprefixer-rails</code> and <code>less-rails</code>. Not sure which gem is causing the issue."}, {"owner": {"reputation": 158, "user_id": 1582976, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jyjsn.jpg?s=128&g=1", "display_name": "UsAndRufus", "link": "https://stackoverflow.com/users/1582976/usandrufus"}, "edited": false, "score": 0, "creation_date": 1539781305, "post_id": 52153092, "comment_id": 92626159, "body": "<code>autoprefixer-rails</code> is definitely the issue here"}], "answers": [{"comments": [{"owner": {"reputation": 1665, "user_id": 1178481, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/kwVOL.png?s=128&g=1", "display_name": "Ryan Porter", "link": "https://stackoverflow.com/users/1178481/ryan-porter"}, "edited": false, "score": 2, "creation_date": 1536076896, "post_id": 52170131, "comment_id": 91290854, "body": "Based on the comment above from barnacle.m, I upgraded autoprefixer-rails to the version that was released today: <a href=\"https://rubygems.org/gems/autoprefixer-rails\" rel=\"nofollow noreferrer\">rubygems.org/gems/autoprefixer-rails</a>  That did NOT solve the problem.  Still experimenting with gem versions..."}, {"owner": {"reputation": 1665, "user_id": 1178481, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/kwVOL.png?s=128&g=1", "display_name": "Ryan Porter", "link": "https://stackoverflow.com/users/1178481/ryan-porter"}, "edited": false, "score": 0, "creation_date": 1536077448, "post_id": 52170131, "comment_id": 91291149, "body": "I couldn&#39;t fix it by playing with gem versions. My final fix: I don&#39;t need Less, so I removed less-rails from my Gemfile."}], "tags": [], "owner": {"reputation": 1665, "user_id": 1178481, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/kwVOL.png?s=128&g=1", "display_name": "Ryan Porter", "link": "https://stackoverflow.com/users/1178481/ryan-porter"}, "is_accepted": false, "score": 1, "last_activity_date": 1536076690, "creation_date": 1536076690, "answer_id": 52170131, "question_id": 52153092, "link": "https://stackoverflow.com/questions/52153092/uninitialized-constant-execjsruntimesrubyracerruntime/52170131#52170131", "title": "uninitialized constant ExecJS::Runtimes::RubyRacerRuntime", "body": "<p>I'm having the same problem, with a shiny-new Rails 5.2.0 app.</p>\n\n<p>As soon as I added the Bootstrap gem to the new project, I started to see that error in my continuous delivery builds.  But it didn't affect my development.  Not until I made a change to a .css asset file.  Then I started to see this error in development also.</p>\n\n<pre><code>ec2-user:~/environment (master) $ rake about\nAbout your application's environment\nRails version             5.2.0\nRuby version              2.4.1-p111 (x86_64-linux)\nRubyGems version          2.6.14\nRack version              2.0.5\nJavaScript Runtime        therubyracer (V8)\nMiddleware                Rack::Sendfile, ActionDispatch::Static, ActionDispatch::Executor, ActiveSupport::Cache::Strategy::LocalCache::Middleware, Rack::Runtime, Rack::MethodOverride, ActionDispatch::RequestId, ActionDispatch::RemoteIp, Sprockets::Rails::QuietAssets, Rails::Rack::Logger, ActionDispatch::ShowExceptions, WebConsole::Middleware, ActionDispatch::DebugExceptions, ActionDispatch::Reloader, ActionDispatch::Callbacks, ActiveRecord::Migration::CheckPending, ActionDispatch::Cookies, ActionDispatch::Session::CookieStore, ActionDispatch::Flash, ActionDispatch::ContentSecurityPolicy::Middleware, Rack::Head, Rack::ConditionalGet, Rack::ETag, Rack::TempfileReaper\nApplication root          /home/ec2-user/environment\nEnvironment               development\nDatabase adapter          sqlite3\nDatabase schema version   20180831204125\n</code></pre>\n\n<p>Gemfile:</p>\n\n<pre><code>source 'https://rubygems.org'\n\n\n# Bundle edge Rails instead: gem 'rails', github: 'rails/rails'\ngem 'rails', '5.2.0'\ngem 'activesupport', '5.2.0'\n# Use sqlite3 as the database for Active Record\ngem 'sqlite3', '1.3.13'\n# Use Puma as the app server\ngem 'puma', '3.7'\n# Use SCSS for stylesheets\ngem 'sass-rails', '5.0.7'\n# Use Uglifier as compressor for JavaScript assets\ngem 'uglifier', '4.1.10'\n# Use CoffeeScript for .coffee assets and views\ngem 'coffee-rails', '4.2.2'\n# See https://github.com/rails/execjs#readme for more supported runtimes\ngem 'execjs', '~&gt; 2.7.0'\ngem 'therubyracer', platforms: :ruby\n\n# Use jquery as the JavaScript library\ngem 'jquery-rails', '4.3.3'\n# Turbolinks makes navigating your web application faster. Read more: https://github.com/turbolinks/turbolinks\ngem 'turbolinks', '5'\n# Build JSON APIs with ease. Read more: https://github.com/rails/jbuilder\ngem 'jbuilder', '2.7.0'\n# Use Redis adapter to run Action Cable in production\n# gem 'redis', '3.0'\n# Use ActiveModel has_secure_password\n# gem 'bcrypt', '3.1.7'\ngem 'passenger', '5.2.3'\n# gem 'therubyracer', '0.12.3'\n# Use Capistrano for deployment\n# gem 'capistrano-rails', group: :development\n\ngem \"simple_calendar\", \"~&gt; 2.0\"\ngem 'bootstrap', '~&gt; 4.1.3'\n\ngroup :development, :test do\n  # Call 'byebug' anywhere in the code to stop execution and get a debugger console\n  gem 'byebug', platform: :mri\n  gem 'rspec-rails', '3.7.2'\nend\n\ngroup :development do\n  # Access an IRB console on exception pages or by using &lt;%= console %&gt; anywhere in the code.\n  gem 'web-console', '3.6.2'\n  gem 'listen', '3.0.5'\n  # Spring speeds up development by keeping your application running in the background. Read more: https://github.com/rails/spring\n  gem 'spring', '1.7.2'\n  gem 'spring-watcher-listen', '2.0.0'\nend\n\n# Windows does not include zoneinfo files, so bundle the tzinfo-data gem\ngem 'tzinfo-data', platforms: [:mingw, :mswin, :x64_mingw, :jruby]\n</code></pre>\n\n<p>gem list:</p>\n\n<pre><code>ec2-user:~/environment (master) $ gem list\n\n*** LOCAL GEMS ***\n\nactioncable (5.2.1, 5.2.0)\nactionmailer (5.2.1, 5.2.0)\nactionpack (5.2.1, 5.2.0)\nactionview (5.2.1, 5.2.0)\nactivejob (5.2.1, 5.2.0)\nactivemodel (5.2.1, 5.2.0)\nactiverecord (5.2.1, 5.2.0)\nactivestorage (5.2.1, 5.2.0)\nactivesupport (5.2.1, 5.2.0)\narel (9.0.0)\nautoprefixer-rails (9.1.3)\nbigdecimal (default: 1.3.0)\nbindex (0.5.0)\nbootstrap (4.1.3)\nbootstrap-sass (3.3.7)\nbuilder (3.2.3)\nbundler (1.16.3)\nbundler-unload (1.0.2)\nbyebug (10.0.2)\ncoffee-rails (4.2.2)\ncoffee-script (2.4.1)\ncoffee-script-source (1.12.2)\ncommonjs (0.2.7)\nconcurrent-ruby (1.0.5)\ncrass (1.0.4)\ndid_you_mean (1.1.0)\ndiff-lcs (1.3)\nerubi (1.7.1)\nexecjs (2.7.0)\nexecutable-hooks (1.5.0)\nffi (1.9.25)\ngem-wrappers (1.3.2)\nglobalid (0.4.1)\ni18n (1.1.0)\nio-console (default: 0.4.6)\njbuilder (2.7.0)\njquery-rails (4.3.3)\njson (default: 2.0.2)\nless (2.6.0)\nless-rails (2.8.0)\nlibv8 (3.16.14.19 x86_64-linux)\nlisten (3.0.5)\nloofah (2.2.2)\nmail (2.7.0)\nmarcel (0.3.2)\nmethod_source (0.9.0)\nmimemagic (0.3.2)\nmini_mime (1.0.1)\nmini_portile2 (2.3.0)\nminitest (5.11.3, 5.10.1)\nmulti_json (1.13.1)\nnet-telnet (0.1.1)\nnio4r (2.3.1)\nnokogiri (1.8.4)\nopenssl (default: 2.0.3)\npassenger (5.2.3)\npopper_js (1.14.3)\npower_assert (0.4.1)\npsych (default: 2.2.2)\npuma (3.7.0)\nrack (2.0.5)\nrack-test (1.1.0)\nrails (5.2.1, 5.2.0)\nrails-dom-testing (2.0.3)\nrails-html-sanitizer (1.0.4)\nrailties (5.2.1, 5.2.0)\nrake (12.3.1, 12.0.0)\nrb-fsevent (0.10.3)\nrb-inotify (0.9.10)\nrdoc (default: 5.0.0)\nref (2.0.0)\nrspec-core (3.7.1)\nrspec-expectations (3.7.0)\nrspec-mocks (3.7.0)\nrspec-rails (3.7.2)\nrspec-support (3.7.1)\nrubygems-bundler (1.4.5)\nrvm (1.11.3.9)\nsass (3.5.7)\nsass-listen (4.0.0)\nsass-rails (5.0.7)\nsimple_calendar (2.3.0)\nspring (1.7.2)\nspring-watcher-listen (2.0.0)\nsprockets (3.7.2)\nsprockets-rails (3.2.1)\nsqlite3 (1.3.13)\ntest-unit (3.2.3)\ntherubyracer (0.12.3)\nthor (0.20.0)\nthread_safe (0.3.6)\ntilt (2.0.8)\nturbolinks (5.0.0)\nturbolinks-source (5.2.0)\ntwitter-bootstrap-rails (4.0.0)\ntzinfo (1.2.5)\nuglifier (4.1.10)\nweb-console (3.6.2)\nwebsocket-driver (0.7.0)\nwebsocket-extensions (0.1.3)\nxmlrpc (0.2.1)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 158, "user_id": 1582976, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jyjsn.jpg?s=128&g=1", "display_name": "UsAndRufus", "link": "https://stackoverflow.com/users/1582976/usandrufus"}, "edited": false, "score": 0, "creation_date": 1539793186, "post_id": 52212843, "comment_id": 92633529, "body": "Can confirm this also worked for me. Except I had to upgrade from Ruby 2.2.x to 2.3.x to use <code>mini_racer</code> (which was definitely needed!)"}], "tags": [], "owner": {"reputation": 47, "user_id": 3421456, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5edc52a975f213412e3bc09bb304faef?s=128&d=identicon&r=PG&f=1", "display_name": "ronald.abegg", "link": "https://stackoverflow.com/users/3421456/ronald-abegg"}, "is_accepted": false, "score": 3, "last_activity_date": 1536591005, "last_edit_date": 1536591005, "creation_date": 1536272586, "answer_id": 52212843, "question_id": 52153092, "link": "https://stackoverflow.com/questions/52153092/uninitialized-constant-execjsruntimesrubyracerruntime/52212843#52212843", "title": "uninitialized constant ExecJS::Runtimes::RubyRacerRuntime", "body": "<p>I had the same issue, replaced <code>therubyracer</code> gem with <code>mini_racer</code> ran <code>bundle install</code> and is working now.</p>\n\n<p>This fix worked for me both in my Mac and on my Ubuntu server</p>\n"}], "owner": {"reputation": 753, "user_id": 4576749, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/0IkxB.jpg?s=128&g=1", "display_name": "David", "link": "https://stackoverflow.com/users/4576749/david"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 882, "favorite_count": 1, "answer_count": 2, "score": 2, "last_activity_date": 1536591005, "creation_date": 1535990407, "question_id": 52153092, "link": "https://stackoverflow.com/questions/52153092/uninitialized-constant-execjsruntimesrubyracerruntime", "title": "uninitialized constant ExecJS::Runtimes::RubyRacerRuntime", "body": "<p>In my existing project I changed</p>\n\n<p><code>gem \"twitter-bootstrap-rails\"</code></p>\n\n<p>to</p>\n\n<p><code>gem 'bootstrap', '~&gt; 4.1.3'</code></p>\n\n<p>in my Gemfile. I'm getting now </p>\n\n<p><code>uninitialized constant ExecJS::Runtimes::RubyRacerRuntime</code></p>\n\n<p>on line: <code>&lt;%= stylesheet_link_tag \"application\", :media =&gt; \"all\" %&gt;</code> in <code>app/views/layouts.html.erb</code></p>\n\n<p>Gemfile:</p>\n\n<pre><code>source 'https://rubygems.org'\ngit_source(:github) { |repo| \"https://github.com/#{repo}.git\" }\n\nruby '2.5.1'\n\n# Bundle edge Rails instead: gem 'rails', github: 'rails/rails'\ngem 'rails', '~&gt; 5.2.0'\n# Use mysql as the database for Active Record\ngem 'mysql2'\n# Use Puma as the app server\ngem 'puma', '~&gt; 3.11'\n# Use SCSS for stylesheets\ngem 'sass-rails', '~&gt; 5.0'\n# Use Uglifier as compressor for JavaScript assets\ngem 'uglifier', '&gt;= 1.3.0'\n# See https://github.com/rails/execjs#readme for more supported runtimes\n#gem 'mini_racer', platforms: :ruby\n\n# Use CoffeeScript for .coffee assets and views\ngem 'coffee-rails', '~&gt; 4.2'\n# Turbolinks makes navigating your web application faster. Read more: https://github.com/turbolinks/turbolinks\n#gem 'turbolinks', '~&gt; 5'\n# Build JSON APIs with ease. Read more: https://github.com/rails/jbuilder\ngem 'jbuilder', '~&gt; 2.5'\n# Use Redis adapter to run Action Cable in production\n# gem 'redis', '~&gt; 4.0'\n# Use ActiveModel has_secure_password\n# gem 'bcrypt', '~&gt; 3.1.7'\n\n# Use ActiveStorage variant\n# gem 'mini_magick', '~&gt; 4.8'\n\n# Use Capistrano for deployment\n# gem 'capistrano-rails', group: :development\n\n# Reduces boot times through caching; required in config/boot.rb\ngem 'bootsnap', '&gt;= 1.1.0', require: false\n\ngem 'unicorn'\n\ngroup :development, :test do\n  # Call 'byebug' anywhere in the code to stop execution and get a debugger console\n  gem 'byebug', platforms: [:mri, :mingw, :x64_mingw]\nend\n\ngroup :development do\n  # Access an interactive console on exception pages or by calling 'console' anywhere in the code.\n  gem 'web-console', '&gt;= 3.3.0'\n  gem 'listen', '&gt;= 3.0.5', '&lt; 3.2'\n  # Spring speeds up development by keeping your application running in the background. Read more: https://github.com/rails/spring\n  gem 'spring'\n  gem 'spring-watcher-listen', '~&gt; 2.0.0'\nend\n\ngroup :test do\n  # Adds support for Capybara system testing and selenium driver\n  gem 'capybara', '&gt;= 2.15', '&lt; 4.0'\n  gem 'selenium-webdriver'\n  # Easy installation and use of chromedriver to run system tests with Chrome\n  gem 'chromedriver-helper'\nend\n\n# Windows does not include zoneinfo files, so bundle the tzinfo-data gem\ngem 'tzinfo-data', platforms: [:mingw, :mswin, :x64_mingw, :jruby]\n\n\ngem 'sidekiq'\n\ngem 'paranoia', '~&gt; 2.2'\n\ngem 'console'\n\ngem 'spreadsheet'\n\ngem 'airbrake', '~&gt; 6.2'\n\ngem 'state_machines'\ngem 'state_machines-activerecord'\n\ngem 'devise-i18n'\n\ngem 'devise'\n\ngem 'paper_trail'\n\ngem 'execjs'\ngem \"therubyracer\"\n#gem 'sprockets-rails', :require =&gt; 'sprockets/railtie'\ngem \"less-rails\" #Sprockets (what Rails 3.1 uses for its asset pipeline) supports LESS\n#gem \"twitter-bootstrap-rails\"\n\ngem 'bootstrap', '~&gt; 4.1.3'\n#gem 'bootswatch'\n#gem 'jquery-rails'\n\n#gem 'devise-bootstrap-views', '~&gt; 1.0'\n#gem \"font-awesome-rails\"\n\ngem \"httparty\"\ngem \"ruby-duration\"\ngem \"jquery-rails\"\n\ngem 'webpacker', '~&gt; 3.5'\n\n#gem \"spreadsheet\"\n</code></pre>\n\n<p><code>rake about</code>:</p>\n\n<pre><code>About your application's environment\nRails version             5.2.0\nRuby version              2.5.1-p57 (x86_64-linux)\nRubyGems version          2.7.7\nRack version              2.0.5\nJavaScript Runtime        therubyracer (V8)\nMiddleware                Webpacker::DevServerProxy, Rack::Sendfile, ActionDispatch::Static, ActionDispatch::Executor, ActiveSupport::Cache::Strategy::LocalCache::Middleware, Rack::Runtime, Rack::MethodOverride, ActionDispatch::RequestId, RequestStore::Middleware, ActionDispatch::RemoteIp, Sprockets::Rails::QuietAssets, Rails::Rack::Logger, ActionDispatch::ShowExceptions, WebConsole::Middleware, ActionDispatch::DebugExceptions, Airbrake::Rack::Middleware, ActionDispatch::Reloader, ActionDispatch::Callbacks, ActiveRecord::Migration::CheckPending, ActionDispatch::Cookies, ActionDispatch::Session::CookieStore, ActionDispatch::Flash, ActionDispatch::ContentSecurityPolicy::Middleware, Rack::Head, Rack::ConditionalGet, Rack::ETag, Rack::TempfileReaper, Warden::Manager\nApplication root          /var/www/app\nEnvironment               development\nDatabase adapter          mysql2\nDatabase schema version   20180831081336\n</code></pre>\n\n<p><code>gem list</code>:</p>\n\n<pre><code>*** LOCAL GEMS ***\n\nactioncable (5.2.1, 5.2.0)\nactionmailer (5.2.1, 5.2.0)\nactionpack (5.2.1, 5.2.0)\nactionview (5.2.1, 5.2.0)\nactivejob (5.2.1, 5.2.0)\nactivemodel (5.2.1, 5.2.0)\nactiverecord (5.2.1, 5.2.0)\nactivestorage (5.2.1, 5.2.0)\nactivesupport (5.2.1, 5.2.0)\naddressable (2.5.2)\nairbrake (6.3.0)\nairbrake-ruby (2.11.0)\narchive-zip (0.11.0)\narel (9.0.0)\nautoprefixer-rails (9.1.3)\nbcrypt (3.1.12)\nbigdecimal (default: 1.3.4)\nbindex (0.5.0)\nbootsnap (1.3.1, 1.3.0)\nbootstrap (4.1.3)\nbootswatch (4.1.3)\nbuilder (3.2.3)\nbundler (1.16.4, default: 1.16.2)\nbyebug (10.0.2)\ncapybara (3.7.0, 3.3.1)\nchildprocess (0.9.0)\nchromedriver-helper (1.2.0)\ncmath (default: 1.0.0)\ncoffee-rails (4.2.2)\ncoffee-script (2.4.1)\ncoffee-script-source (1.12.2)\ncommonjs (0.2.7)\nconcurrent-ruby (1.0.5)\nconnection_pool (2.2.2)\nconsole (0.5)\ncrass (1.0.4)\ncsv (default: 1.0.0)\ndate (default: 1.0.0)\ndbm (default: 1.0.0)\ndevise (4.5.0, 4.4.3)\ndevise-bootstrap-views (1.1.0)\ndevise-i18n (1.6.4)\ndid_you_mean (1.2.0)\nerubi (1.7.1)\netc (default: 1.0.0)\nexecjs (2.7.0)\nfcntl (default: 1.0.0)\nffi (1.9.25)\nfiddle (default: 1.0.0)\nfileutils (default: 1.0.2)\nfont-awesome-rails (4.7.0.4)\ngdbm (default: 2.0.0)\nglobalid (0.4.1)\nhttparty (0.16.2)\ni18n (1.1.0, 1.0.1)\nio-console (default: 0.4.6)\nio-like (0.3.0)\nipaddr (default: 1.2.0)\niso8601 (0.12.0)\njbuilder (2.7.0)\njquery-rails (4.3.3)\njson (default: 2.1.0)\nkgio (2.11.2)\nless (2.6.0)\nless-rails (2.8.0)\nlibv8 (3.16.14.19 x86_64-linux)\nlisten (3.1.5)\nloofah (2.2.2)\nmail (2.7.0)\nmarcel (0.3.2)\nmethod_source (0.9.0)\nmimemagic (0.3.2)\nmini_mime (1.0.1, 1.0.0)\nmini_portile2 (2.3.0)\nminitest (5.11.3, 5.10.3)\nmsgpack (1.2.4)\nmulti_json (1.13.1)\nmulti_xml (0.6.0)\nmysql2 (0.5.2, 0.5.1)\nnet-telnet (0.1.1)\nnio4r (2.3.1)\nnokogiri (1.8.4, 1.8.3)\nopenssl (default: 2.1.0)\norm_adapter (0.5.0)\npaper_trail (10.0.1, 9.2.0)\npaper_trail-association_tracking (1.0.0)\nparanoia (2.4.1)\npopper_js (1.14.3)\npower_assert (1.1.1)\npsych (default: 3.0.2)\npublic_suffix (3.0.3, 3.0.2)\npuma (3.12.0, 3.11.4)\nrack (2.0.5)\nrack-protection (2.0.3)\nrack-proxy (0.6.4)\nrack-test (1.1.0, 1.0.0)\nrails (5.2.1, 5.2.0)\nrails-dom-testing (2.0.3)\nrails-html-sanitizer (1.0.4)\nrailties (5.2.1, 5.2.0)\nraindrops (0.19.0)\nrake (12.3.1, 12.3.0)\nrb-fsevent (0.10.3)\nrb-inotify (0.9.10)\nrdoc (default: 6.0.1)\nredis (4.0.2, 4.0.1)\nref (2.0.0)\nrequest_store (1.4.1)\nresponders (2.4.0)\nruby-duration (3.2.3)\nruby-ole (1.2.12.1)\nruby_dep (1.5.0)\nrubygems-update (2.7.7)\nrubyzip (1.2.2, 1.2.1)\nsass (3.5.7, 3.5.6)\nsass-listen (4.0.0)\nsass-rails (5.0.7)\nscanf (default: 1.0.0)\nsdbm (default: 1.0.0)\nselenium-webdriver (3.14.0, 3.13.0)\nsidekiq (5.2.1, 5.1.3)\nspreadsheet (1.1.8, 1.1.7)\nspring (2.0.2)\nspring-watcher-listen (2.0.1)\nsprockets (3.7.2)\nsprockets-rails (3.2.1)\nstate_machines (0.5.0)\nstate_machines-activemodel (0.5.1)\nstate_machines-activerecord (0.5.1)\nstringio (default: 0.0.1)\nstrscan (default: 1.0.0)\ntest-unit (3.2.7)\ntherubyracer (0.12.3)\nthor (0.20.0)\nthread_safe (0.3.6)\ntilt (2.0.8)\ntwitter-bootstrap-rails (4.0.0)\ntzinfo (1.2.5)\nuglifier (4.1.18, 4.1.13)\nunicorn (5.4.1, 5.4.0)\nwarden (1.2.7)\nweb-console (3.7.0, 3.6.2)\nwebpacker (3.5.5)\nwebrick (default: 1.4.2)\nwebsocket-driver (0.7.0)\nwebsocket-extensions (0.1.3)\nxmlrpc (0.3.0)\nxpath (3.1.0)\nzlib (default: 1.0.0)\n</code></pre>\n\n<p>Do you have any idea how to fix this?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "postgresql"], "comments": [{"owner": {"reputation": 689, "user_id": 2875377, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4a9d994f85c436f7bf13c592e6b8989e?s=128&d=identicon&r=PG&f=1", "display_name": "praga2050", "link": "https://stackoverflow.com/users/2875377/praga2050"}, "edited": false, "score": 1, "creation_date": 1535991596, "post_id": 52153082, "comment_id": 91256906, "body": "you are passing just ID to process! Testrun.delay.process!(@testrun.id)"}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 1, "creation_date": 1535994035, "post_id": 52153082, "comment_id": 91257773, "body": "Where are you getting the <code>@testrun</code> instance variable from in your model? Or even more important where do you think you&#180;re getting it from? Instance variables are not globals. You cannot access your controllers instance variables from the model. You have to pass them to the model."}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 2, "creation_date": 1535994160, "post_id": 52153082, "comment_id": 91257822, "body": "And there is something wrong with the code as presented here as this should give a <code>ArgumentError: wrong number of arguments</code> error before it ever reaches that line. Ruby enforces the number of arguments passed to methods. See <a href=\"https://stackoverflow.com/help/mcve\">stackoverflow.com/help/mcve</a>"}], "owner": {"reputation": 45, "user_id": 10252182, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-BVNA5zeWTMo/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaM3MWLhgNnvFM5AkrtCQ89Fjw6S4g/mo/photo.jpg?sz=128", "display_name": "Gleb Omarov", "link": "https://stackoverflow.com/users/10252182/gleb-omarov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 169, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1535991073, "creation_date": 1535990360, "last_edit_date": 1535991073, "question_id": 52153082, "link": "https://stackoverflow.com/questions/52153082/nomethoderror-undefined-method-for-nilnilclass", "title": "NoMethodError: undefined method &#39;[]&#39; for nil:NilClass", "body": "<p>I got simple_form with multiple checkboxes, that save an array with names of some methods in my model. form looks like:</p>\n\n<pre><code>&lt;%= simple_form_for @testrun do |f| %&gt;\n\n&lt;%= f.input :testcase, as: :check_boxes,\n      collection: [[\"test1\", :test1], [\"test2\", :test2]] %&gt;\n  &lt;%= f.submit %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>my create method in controller looks like:</p>\n\n<pre><code>def create\n    @testrun = Testrun.new(testrun_params)\n\n    if @testrun.save\n      Testrun.delay.process!(@testrun.id)\n      redirect_to @testrun, notice: 'Test run was successfully created.'\n    else\n      render :new\n    end\n  end\n</code></pre>\n\n<p>In my model i have method <code>process!</code> which i need to run methods in an array.</p>\n\n<pre><code>  def process!\n    .\n    .\n    .\n    @test = Case.new(self)\n    @testrun[:testcase].each do |testcase|\n      @test.send testcase\n    end\n  end\n</code></pre>\n\n<p>when i start process, i got error <code>NoMethodError: undefined method '[]' for nil:NilClass</code></p>\n\n<p>Where i was wrong?</p>\n"}, {"tags": ["ruby", "hanami"], "answers": [{"comments": [{"owner": {"reputation": 2871, "user_id": 443501, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/49a21b86a7574b48ac486b5880146b49?s=128&d=identicon&r=PG", "display_name": "Boti", "link": "https://stackoverflow.com/users/443501/boti"}, "edited": false, "score": 0, "creation_date": 1536587936, "post_id": 52254699, "comment_id": 91466323, "body": "I&#39;ve used that gem in my projects :)  The question was, where to put the transformation code in Hanami if I use premailer/roadie"}, {"owner": {"reputation": 1146, "user_id": 498386, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/76aa5b311fb40fdc2bb70c0282d66af3?s=128&d=identicon&r=PG", "display_name": "Luca Guidi", "link": "https://stackoverflow.com/users/498386/luca-guidi"}, "reply_to_user": {"reputation": 2871, "user_id": 443501, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/49a21b86a7574b48ac486b5880146b49?s=128&d=identicon&r=PG", "display_name": "Boti", "link": "https://stackoverflow.com/users/443501/boti"}, "edited": false, "score": 0, "creation_date": 1536679603, "post_id": 52254699, "comment_id": 91506679, "body": "Did you try to alter the <code>mail</code> object via <code>prepare</code>? It&#39;s a hook that is executed before to deliver the email. See <a href=\"https://github.com/hanami/mailer#attachments\" rel=\"nofollow noreferrer\">github.com/hanami/mailer#attachments</a>"}], "tags": [], "owner": {"reputation": 1146, "user_id": 498386, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/76aa5b311fb40fdc2bb70c0282d66af3?s=128&d=identicon&r=PG", "display_name": "Luca Guidi", "link": "https://stackoverflow.com/users/498386/luca-guidi"}, "is_accepted": false, "score": 0, "last_activity_date": 1536571481, "creation_date": 1536571481, "answer_id": 52254699, "question_id": 52152701, "link": "https://stackoverflow.com/questions/52152701/how-to-transform-emails-in-hanami-to-include-inline-the-styles-defined-in-an-ext/52254699#52254699", "title": "How to Transform Emails in Hanami to include inline the styles defined in an external css file?", "body": "<p>this is a more general question about email CSS inlining. You can check this gem: <a href=\"https://github.com/premailer/premailer\" rel=\"nofollow noreferrer\">https://github.com/premailer/premailer</a></p>\n"}, {"tags": [], "owner": {"reputation": 2871, "user_id": 443501, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/49a21b86a7574b48ac486b5880146b49?s=128&d=identicon&r=PG", "display_name": "Boti", "link": "https://stackoverflow.com/users/443501/boti"}, "is_accepted": true, "score": 0, "last_activity_date": 1543603219, "creation_date": 1543603219, "answer_id": 53563122, "question_id": 52152701, "link": "https://stackoverflow.com/questions/52152701/how-to-transform-emails-in-hanami-to-include-inline-the-styles-defined-in-an-ext/53563122#53563122", "title": "How to Transform Emails in Hanami to include inline the styles defined in an external css file?", "body": "<p>Here is the code which works:</p>\n\n<p>In the gemfile:</p>\n\n<pre><code>gem 'roadie', '~&gt; 3.4'\n</code></pre>\n\n<p>And assuming that we put the style in the: <strong>lib/app/mailers/assets/stylesheets/mail.css</strong> the prepare method of the email:</p>\n\n<pre><code>html_part = mail.html_part\nold_html = html_part.body.decoded\n\ndocument = Roadie::Document.new old_html\ndocument.add_css File.read( File.join(Hanami.root, \"lib\", \"app\", \"mailers\", \"assets\", \"stylesheets\", \"mail.css\"))\nnew_html = document.transform\n\nhtml_part.body = new_html\n</code></pre>\n"}], "owner": {"reputation": 2871, "user_id": 443501, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/49a21b86a7574b48ac486b5880146b49?s=128&d=identicon&r=PG", "display_name": "Boti", "link": "https://stackoverflow.com/users/443501/boti"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 1, "accepted_answer_id": 53563122, "answer_count": 2, "score": 1, "last_activity_date": 1543603219, "creation_date": 1535988934, "last_edit_date": 1536588072, "question_id": 52152701, "link": "https://stackoverflow.com/questions/52152701/how-to-transform-emails-in-hanami-to-include-inline-the-styles-defined-in-an-ext", "title": "How to Transform Emails in Hanami to include inline the styles defined in an external css file?", "body": "<p>If I use roadie/premailer to transform my emails in Hanami, then where should I place the transformation code in Hanami?</p>\n\n<p>Thx</p>\n"}, {"tags": ["ruby", "excel", "rubygems"], "comments": [{"owner": {"reputation": 921, "user_id": 3172183, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dscm0.png?s=128&g=1", "display_name": "amrdruid", "link": "https://stackoverflow.com/users/3172183/amrdruid"}, "edited": false, "score": 0, "creation_date": 1535993221, "post_id": 52152586, "comment_id": 91257524, "body": "Hey, I used to work with xls long time ago. and I remember <code>roo </code> was pretty helpful to work with existing excel files. Have you tried it out? <a href=\"https://github.com/roo-rb/roo\" rel=\"nofollow noreferrer\">github.com/roo-rb/roo</a>"}, {"owner": {"reputation": 223, "user_id": 5310502, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/b6f92af37160cf2310ac2ccadcd9b758?s=128&d=identicon&r=PG&f=1", "display_name": "testerBDD", "link": "https://stackoverflow.com/users/5310502/testerbdd"}, "reply_to_user": {"reputation": 921, "user_id": 3172183, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dscm0.png?s=128&g=1", "display_name": "amrdruid", "link": "https://stackoverflow.com/users/3172183/amrdruid"}, "edited": false, "score": 0, "creation_date": 1535993516, "post_id": 52152586, "comment_id": 91257617, "body": "roo is readonly cannot be used to write back to excel"}, {"owner": {"reputation": 921, "user_id": 3172183, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dscm0.png?s=128&g=1", "display_name": "amrdruid", "link": "https://stackoverflow.com/users/3172183/amrdruid"}, "edited": false, "score": 0, "creation_date": 1536050063, "post_id": 52152586, "comment_id": 91273638, "body": "Did you try xlsx writer? <a href=\"https://github.com/seamusabshere/xlsx_writer/\" rel=\"nofollow noreferrer\">github.com/seamusabshere/xlsx_writer</a>"}, {"owner": {"reputation": 223, "user_id": 5310502, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/b6f92af37160cf2310ac2ccadcd9b758?s=128&d=identicon&r=PG&f=1", "display_name": "testerBDD", "link": "https://stackoverflow.com/users/5310502/testerbdd"}, "reply_to_user": {"reputation": 921, "user_id": 3172183, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dscm0.png?s=128&g=1", "display_name": "amrdruid", "link": "https://stackoverflow.com/users/3172183/amrdruid"}, "edited": false, "score": 0, "creation_date": 1536059350, "post_id": 52152586, "comment_id": 91279223, "body": "@amrdruid does it support writing to existing excel, did searched but didnt find a solution"}, {"owner": {"reputation": 25573, "user_id": 676874, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/c8e67ec01dc3e7c402255ff26785863f?s=128&d=identicon&r=PG", "display_name": "knut", "link": "https://stackoverflow.com/users/676874/knut"}, "edited": false, "score": 0, "creation_date": 1536071080, "post_id": 52152586, "comment_id": 91287129, "body": "In the past i had problems to generate xls from ruby. When your excel is easy (and your 3 columns look so), then I would read the data (via sequel/ACE.OLEDB, maybe you must install AccessDatabaseEngine_x64.exe ) and recreate an excel with axlsx (but then it is a xlsx). If this is a possible solution, give me a feedback."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1536074448, "post_id": 52152586, "comment_id": 91289444, "body": "I think the <code>spreadsheet</code> gem might be your only hope (note it does not account for cell styling at all). The main problem with <code>xls</code> is that it was a windows proprietary binary format making it far more difficult to build the document itself. Now that (as of office 2007) windows has the <code>xlsx</code> format which is a reasonable adoption of the Open Document Format (essential a zip of XML files) this portability (cross platform) and ease of generation has essentially orphaned the <code>xls</code> format and for good reason."}], "answers": [{"comments": [{"owner": {"reputation": 25573, "user_id": 676874, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/c8e67ec01dc3e7c402255ff26785863f?s=128&d=identicon&r=PG", "display_name": "knut", "link": "https://stackoverflow.com/users/676874/knut"}, "edited": false, "score": 0, "creation_date": 1536095987, "post_id": 52168819, "comment_id": 91299155, "body": "How do you create xls-files with axlsx? (no xlsx, really a xls) . If you found a solution, can you post it on <a href=\"https://stackoverflow.com/questions/24146095/generating-xls-file-using-axlsx\" title=\"generating xls file using axlsx\">stackoverflow.com/questions/24146095/&hellip;</a> ? Thanks."}], "tags": [], "owner": {"reputation": 1928, "user_id": 6193734, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-yNKciMo2y_0/AAAAAAAAAAI/AAAAAAAACGs/Hg_DmZMu7Lw/photo.jpg?sz=128", "display_name": "Matthieu Libeer", "link": "https://stackoverflow.com/users/6193734/matthieu-libeer"}, "is_accepted": false, "score": 1, "last_activity_date": 1536072166, "creation_date": 1536072166, "answer_id": 52168819, "question_id": 52152586, "link": "https://stackoverflow.com/questions/52152586/ruby-excel-write-data-to-existing-xls/52168819#52168819", "title": "ruby excel - write data to existing xls", "body": "<p>This article is a great source to find out which library suits you best: <a href=\"https://spin.atomicobject.com/2017/03/22/parsing-excel-files-ruby/\" rel=\"nofollow noreferrer\">https://spin.atomicobject.com/2017/03/22/parsing-excel-files-ruby/</a></p>\n\n<p>My company uses <code>axlsx</code> combined with <code>axlsx_rails</code> to render xls files with Rails rendering machine and <code>axlsx_styler</code> for styling.</p>\n\n<p>Note that in a simple use case like the one you describe, you night not need an excel file like xls, a mere CSV would suffice, and for that, Ruby has <a href=\"https://ruby-doc.org/stdlib-2.0.0/libdoc/csv/rdoc/CSV.html\" rel=\"nofollow noreferrer\">CSV</a></p>\n"}], "owner": {"reputation": 223, "user_id": 5310502, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/b6f92af37160cf2310ac2ccadcd9b758?s=128&d=identicon&r=PG&f=1", "display_name": "testerBDD", "link": "https://stackoverflow.com/users/5310502/testerbdd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 583, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1536072166, "creation_date": 1535988493, "last_edit_date": 1535995057, "question_id": 52152586, "link": "https://stackoverflow.com/questions/52152586/ruby-excel-write-data-to-existing-xls", "title": "ruby excel - write data to existing xls", "body": "<p>I have tried different gems in ruby and also searched a lot but Ruby doesnt seem to have a solution to write to existing excel file.</p>\n\n<p>my excel file 'services.xls' has 3 columns </p>\n\n<ol>\n<li>1st column name is 'inputxlm'</li>\n<li>2nd column name is 'methodtoexecute'</li>\n<li>3rd column name is 'output'</li>\n</ol>\n\n<p>i have internal logic which takes the inputxlm, process it using the method and generates output</p>\n\n<p>How do i write back the output to output column in  'services.xls' ? </p>\n\n<p>Note : I dont want to use win32ole as my organization has some limitation on it  </p>\n"}, {"tags": ["ruby-on-rails", "arrays", "json", "ruby", "postgresql"], "comments": [{"owner": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "edited": false, "score": 0, "creation_date": 1535989010, "post_id": 52152564, "comment_id": 91255764, "body": "I\u2019d probably use a new table (or two) to store the counts in reasonable batches."}, {"owner": {"reputation": 44067, "user_id": 3470178, "user_type": "registered", "accept_rate": 63, "profile_image": "https://graph.facebook.com/655943089/picture?type=large", "display_name": "Juan Carlos Oropeza", "link": "https://stackoverflow.com/users/3470178/juan-carlos-oropeza"}, "edited": false, "score": 0, "creation_date": 1535989040, "post_id": 52152564, "comment_id": 91255783, "body": "What is efficient for you? What have you try?"}, {"owner": {"reputation": 44067, "user_id": 3470178, "user_type": "registered", "accept_rate": 63, "profile_image": "https://graph.facebook.com/655943089/picture?type=large", "display_name": "Juan Carlos Oropeza", "link": "https://stackoverflow.com/users/3470178/juan-carlos-oropeza"}, "edited": false, "score": 0, "creation_date": 1535989109, "post_id": 52152564, "comment_id": 91255826, "body": "What I would do is extract the data from the JSON <code>group by</code> and <code>count</code> and then create the JSON  you need"}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 2, "creation_date": 1535996171, "post_id": 52152564, "comment_id": 91258550, "body": "I would say there is a much better way to do it. Use a proper normalization table to store genres and use a join table to join genres and artists. Then you can simply get the desired result by querying the join table and grouping by <code>genre_id</code>. This seems like yet another case where using JSON/array data types is just crappy db design."}, {"owner": {"reputation": 5292, "user_id": 2727267, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0e7c773908a4f6095f63cb9553bbc7af?s=128&d=identicon&r=PG", "display_name": "Beartech", "link": "https://stackoverflow.com/users/2727267/beartech"}, "edited": false, "score": 0, "creation_date": 1535996363, "post_id": 52152564, "comment_id": 91258613, "body": "Not the answer you&#39;re probably looking for, so I&#39;ll leave it as a comment instead: When I run up against things that seem slow using Rails queries I build a view directly in the DB and add a model in Rails to access it. Rails operations will probably not be as efficient as the DB as that is what the DB is designed to do. Postgres has tools for working with JSON columns directly."}, {"owner": {"reputation": 5292, "user_id": 2727267, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0e7c773908a4f6095f63cb9553bbc7af?s=128&d=identicon&r=PG", "display_name": "Beartech", "link": "https://stackoverflow.com/users/2727267/beartech"}, "edited": false, "score": 0, "creation_date": 1535996699, "post_id": 52152564, "comment_id": 91258742, "body": "Sorry, misread your question. Just realized your column in the DB is an array. Let me consider that..."}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "reply_to_user": {"reputation": 5292, "user_id": 2727267, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0e7c773908a4f6095f63cb9553bbc7af?s=128&d=identicon&r=PG", "display_name": "Beartech", "link": "https://stackoverflow.com/users/2727267/beartech"}, "edited": false, "score": 0, "creation_date": 1535997968, "post_id": 52152564, "comment_id": 91259240, "body": "@Beartech I don&#39;t think there really is a way to group by JSON/array values in postgres in this way - anyways you would need to pull every genres from every row in the artists table to even get the complete list of genres - which in itself is a huge problem."}, {"owner": {"reputation": 5292, "user_id": 2727267, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0e7c773908a4f6095f63cb9553bbc7af?s=128&d=identicon&r=PG", "display_name": "Beartech", "link": "https://stackoverflow.com/users/2727267/beartech"}, "edited": false, "score": 0, "creation_date": 1535998254, "post_id": 52152564, "comment_id": 91259323, "body": "Per my second comment: at first I thought he was querying a JSON column which has it&#39;s own internal operators that can be used in a Rails query. But since he&#39;s querying an array column it&#39;s actually quite a bit easier. I would bet that a single query that does all the work on the DB side will be faster and is possible. Working on it right now."}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "reply_to_user": {"reputation": 5292, "user_id": 2727267, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0e7c773908a4f6095f63cb9553bbc7af?s=128&d=identicon&r=PG", "display_name": "Beartech", "link": "https://stackoverflow.com/users/2727267/beartech"}, "edited": false, "score": 0, "creation_date": 1536000476, "post_id": 52152564, "comment_id": 91259993, "body": "@Beartech it could just as well be a json/jsonb column that happens to consist of just an array."}], "answers": [{"comments": [{"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1536000631, "post_id": 52154851, "comment_id": 91260049, "body": "I think you intended to use <code>select_all</code> and not <code>find_by_sql</code>. <code>find_by_sql</code> will create model instances which in this case will give a pretty useless result as the columns don&#39;t have aliases so you won&#39;t be able to access anything. <code>select_all</code> gives you the raw result object."}, {"owner": {"reputation": 5292, "user_id": 2727267, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0e7c773908a4f6095f63cb9553bbc7af?s=128&d=identicon&r=PG", "display_name": "Beartech", "link": "https://stackoverflow.com/users/2727267/beartech"}, "reply_to_user": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1536000872, "post_id": 52154851, "comment_id": 91260134, "body": "I&#39;ll take your word for it as I have nothing to test it against, just doing this in my head from the fiddle."}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1536000931, "post_id": 52154851, "comment_id": 91260151, "body": "<a href=\"https://guides.rubyonrails.org/active_record_querying.html#finding-by-sql\" rel=\"nofollow noreferrer\">guides.rubyonrails.org/&hellip;</a>"}, {"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1536012280, "post_id": 52154851, "comment_id": 91263517, "body": "Something like <code>select g, count(g) from (select unnest(genres) from artists) dt(g) group by g</code> would be cleaner (assuming the column is <code>text[]</code> rather than <code>jsonb</code> of course). For a <code>jsonb</code> column, you might want to look at the <code>json_array_elements_text</code> function."}], "tags": [], "owner": {"reputation": 5292, "user_id": 2727267, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0e7c773908a4f6095f63cb9553bbc7af?s=128&d=identicon&r=PG", "display_name": "Beartech", "link": "https://stackoverflow.com/users/2727267/beartech"}, "is_accepted": false, "score": 0, "last_activity_date": 1536011833, "last_edit_date": 1536011833, "creation_date": 1536000093, "answer_id": 52154851, "question_id": 52152564, "link": "https://stackoverflow.com/questions/52152564/count-items-in-arrays-cross-100s-of-thousands-of-records/52154851#52154851", "title": "Count items in arrays cross 100&#39;s of thousands of records", "body": "<p>On re-reading your question you state that the column IS a JSONb type. So the answer below will not work since you need to first get the array from the jsonb column. This should work better:</p>\n\n<pre><code>output = Artist.connection.select_all('select genre, count (genre) from (select id, JSONB_ARRAY_ELEMENTS(genres) as genre from artists) as foo group by genre;')\n\n=&gt; #&lt;ActiveRecord::Result:0x00007f8ef20df448 @columns=[\"genre\", \"count\"], @rows=[[\"\\\"rock\\\"\", 5], [\"\\\"blues\\\"\", 5], [\"\\\"seen live\\\"\", 3], [\"\\\"alternative\\\"\", 3]], @hash_rows=nil, @column_types={\"genre\"=&gt;#&lt;ActiveRecord::ConnectionAdapters::PostgreSQL::OID::Jsonb:0x00007f8eeef5d500 @precision=nil, @scale=nil, @limit=nil&gt;, \"count\"=&gt;#&lt;ActiveModel::Type::Integer:0x00007f8eeeb4c060 @precision=nil, @scale=nil, @limit=nil, @range=-2147483648...2147483648&gt;}&gt; \n\noutput.rows.to_h\n\n=&gt; {\"\\\"rock\\\"\"=&gt;5, \"\\\"blues\\\"\"=&gt;5, \"\\\"seen live\\\"\"=&gt;3, \"\\\"alternative\\\"\"=&gt;3} \n</code></pre>\n\n<p>As mentioned in the comments, if you can change the DB to normalize it, go for it. An anonymous array in a jsonb column is just going to be painful going forward. If you need to use this answer I would at least think about adding a view to the DB so that you can get the genre count as a table that has a corresponding model in rails (that you can just create in your model definitions).</p>\n\n<p>Original answer when I thought your column was a regular array column type in Postgres.</p>\n\n<p>Here is a SQL way to do it in Rails:</p>\n\n<pre><code>genre_count = Artist.connection.select_all('SELECT\n                                   UNNEST(genres),\n                                   COUNT (UNNEST(genres))\n                                  FROM\n                                   artists\n                                  GROUP BY\n                                   UNNEST(genres);')\n</code></pre>\n\n<p>You can then use the method of your choice to turn a much smaller dataset into JSON.</p>\n\n<p>I am not familiar enough with <code>UNNEST</code> know why I can't alias it like any other column to make it prettier. But it works. </p>\n\n<p><a href=\"http://sqlfiddle.com/#!15/30597/21/0\" rel=\"nofollow noreferrer\">http://sqlfiddle.com/#!15/30597/21/0</a></p>\n"}, {"comments": [{"owner": {"reputation": 5292, "user_id": 2727267, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0e7c773908a4f6095f63cb9553bbc7af?s=128&d=identicon&r=PG", "display_name": "Beartech", "link": "https://stackoverflow.com/users/2727267/beartech"}, "edited": false, "score": 0, "creation_date": 1536000842, "post_id": 52154898, "comment_id": 91260123, "body": "What might not be trivial is overhauling a DB that he did not build but is stuck working with."}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "reply_to_user": {"reputation": 5292, "user_id": 2727267, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0e7c773908a4f6095f63cb9553bbc7af?s=128&d=identicon&r=PG", "display_name": "Beartech", "link": "https://stackoverflow.com/users/2727267/beartech"}, "edited": false, "score": 0, "creation_date": 1536001182, "post_id": 52154898, "comment_id": 91260233, "body": "True @Beartech, but its still within the realm of doable unless its a hopeless situation where the client refuses to allow any alterations to the db schema. And defintatly worth it if this feature is important."}], "tags": [], "owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "is_accepted": false, "score": 0, "last_activity_date": 1536000728, "last_edit_date": 1536000728, "creation_date": 1536000384, "answer_id": 52154898, "question_id": 52152564, "link": "https://stackoverflow.com/questions/52152564/count-items-in-arrays-cross-100s-of-thousands-of-records/52154898#52154898", "title": "Count items in arrays cross 100&#39;s of thousands of records", "body": "<p>This is an extremely trivial task if you just use a decent relational db design:</p>\n\n<pre><code>class Artist &lt; ApplicationRecord\n  has_many :artist_genres\n  has_many :genres, through: :artist_genres\nend\n\nclass Genre &lt; ApplicationRecord\n  has_many :artist_genres\n  has_many :artists, through: :artist_genres\nend\n\nclass ArtistGenre &lt; ApplicationRecord\n  belongs_to :artist \n  belongs_to :genre\nend\n</code></pre>\n\n<p>You could then get the result by:</p>\n\n<pre><code>class Genre &lt; ApplicationRecord\n  has_many :artist_genres\n  has_many :genres, through: :artist_genres\n\n  # This will instanciate a record for each row just like your average scope\n  # and return a ActiveRecord::Relation object.\n  def self.with_artist_counts\n    self.joins(:artist_genres)\n        .select('genres.name, COUNT(artist_genres.id) AS artists_count')\n        .group(:id)\n  end\n\n  # This pulls the columns as raw sql results and creates a hash with the genre \n  # name as keys\n  def self.pluck_artist_counts\n    self.connection.select_all(with_artist_counts.to_sql).inject({}) do |hash, row|\n      hash.merge(row[\"name\"] =&gt; row[\"artists_count\"])\n    end\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 22592, "user_id": 147586, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e4f5d494ebdc9e7cce1aecf3ce3e8bc1?s=128&d=identicon&r=PG", "display_name": "Shpigford", "link": "https://stackoverflow.com/users/147586/shpigford"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 258, "favorite_count": 1, "answer_count": 2, "score": 7, "last_activity_date": 1536011833, "creation_date": 1535988407, "last_edit_date": 1535989415, "question_id": 52152564, "link": "https://stackoverflow.com/questions/52152564/count-items-in-arrays-cross-100s-of-thousands-of-records", "title": "Count items in arrays cross 100&#39;s of thousands of records", "body": "<p>I have a Rails app with a Postgres database that has an Artists table with a jsonb <code>genres</code> column.</p>\n\n<p>There are hundreds of thousands of rows.</p>\n\n<p>Each genre column in the row has an array like <code>[\"rock\", \"indie\", \"seen live\", \"alternative\", \"indie rock\"]</code> with different genres.</p>\n\n<p>What I want to do is output a count of each genre in JSON across all the rows.</p>\n\n<p>Something like: <code>{\"rock\": 532, \"power metal\": 328, \"indie\": 862}</code></p>\n\n<p>Is there a way to efficiently do that?</p>\n\n<p><strong>Update...here's what I've got at the moment...</strong></p>\n\n<pre><code>genres = Artist.all.pluck(:genres).flatten.delete_if &amp;:empty?\noutput = Hash[genres.group_by {|x| x}.map {|k,v| [k,v.count]}]\nfinal = output.sort_by{|k,v| v}.to_h\n</code></pre>\n\n<p>Output is a hash instead of JSON, which is fine.</p>\n\n<p>But already feels pretty slow, so I'm wondering if there's a better way to do it.</p>\n"}, {"tags": ["ruby", "boolean", "boolean-logic"], "comments": [{"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1535987685, "post_id": 52152330, "comment_id": 91255104, "body": "Can it be because <code>puts</code> is not a keyword - its a method that returns nil? Because <code>true and false</code> give nil without puts. <a href=\"https://ruby-doc.org/core-2.5.1/Kernel.html#method-i-puts\" rel=\"nofollow noreferrer\">ruby-doc.org/core-2.5.1/Kernel.html#method-i-puts</a>"}, {"owner": {"reputation": 2007, "user_id": 716039, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/76b302eed6a8add5db6b3f2e1c7c9942?s=128&d=identicon&r=PG", "display_name": "dinjas", "link": "https://stackoverflow.com/users/716039/dinjas"}, "edited": false, "score": 1, "creation_date": 1536011631, "post_id": 52152330, "comment_id": 91263381, "body": "Technically, I&#39;d say it returns <code>nil</code>, not <code>true</code> or <code>false</code>, and outputs <code>true</code>. e.g. if you execute the statement <code>result = (puts true and false)</code>, <code>result</code> will be nil. This is because <code>puts</code> returns <code>nil</code>. <code>nil and false</code> evaluates to <code>nil</code>."}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 1, "creation_date": 1536032792, "post_id": 52152330, "comment_id": 91267090, "body": "The first one doesn&#39;t return <code>true</code>, it prints <code>true</code>. The second examples do not return <code>false</code>, they print `false. You are confusing the return value with the printed value."}, {"owner": {"reputation": 739, "user_id": 5433628, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/e35c4de6242c82161ff4cacdbd29d0d2?s=128&d=identicon&r=PG", "display_name": "ebosi", "link": "https://stackoverflow.com/users/5433628/ebosi"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1536053212, "post_id": 52152330, "comment_id": 91275556, "body": "@sawa: Indeed, you are right. What got me confused is that I used an online IDE that didn&#39;t output return values\u2026"}], "answers": [{"tags": [], "owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "is_accepted": true, "score": 2, "last_activity_date": 1536041814, "last_edit_date": 1536041814, "creation_date": 1535988435, "answer_id": 52152570, "question_id": 52152330, "link": "https://stackoverflow.com/questions/52152330/ruby-why-does-puts-true-and-false-return-true/52152570#52152570", "title": "Ruby: why does `puts true and false` return true?", "body": "<p>Because <code>puts</code> binds stronger than <code>and</code>: your code is equal to </p>\n\n<pre><code>(puts true) and false\ntrue\n#=&gt; nil\n</code></pre>\n\n<p>You can check operators <a href=\"https://ruby-doc.org/core-2.2.0/doc/syntax/precedence_rdoc.html\" rel=\"nofollow noreferrer\">precedence in docs</a>.</p>\n\n<p>To get what you could use <code>&amp;&amp;</code>, which has higher precedence than <code>and</code>:</p>\n\n<pre><code>puts true &amp;&amp; false\nfalse\n#=&gt; nil\n</code></pre>\n"}], "owner": {"reputation": 739, "user_id": 5433628, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/e35c4de6242c82161ff4cacdbd29d0d2?s=128&d=identicon&r=PG", "display_name": "ebosi", "link": "https://stackoverflow.com/users/5433628/ebosi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 294, "favorite_count": 0, "closed_date": 1535988948, "accepted_answer_id": 52152570, "answer_count": 1, "score": -2, "last_activity_date": 1536041814, "creation_date": 1535987433, "question_id": 52152330, "link": "https://stackoverflow.com/questions/52152330/ruby-why-does-puts-true-and-false-return-true", "closed_reason": "Duplicate", "title": "Ruby: why does `puts true and false` return true?", "body": "<p>In Ruby, I've just noticed that:</p>\n\n<ul>\n<li><code>puts true and false</code> returns <code>true</code>, while </li>\n<li><code>puts (true and false)</code> and <code>puts false and true</code> return both <code>false</code>. </li>\n</ul>\n\n<p>What is the logic/reason behind this behaviour?</p>\n"}, {"tags": ["html", "ruby-on-rails", "ruby", "indexing"], "answers": [{"comments": [{"owner": {"reputation": 686, "user_id": 1491410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c938ed150a685b33d1b91266b382c8d?s=128&d=identicon&r=PG", "display_name": "elliotcm", "link": "https://stackoverflow.com/users/1491410/elliotcm"}, "edited": false, "score": 1, "creation_date": 1535987105, "post_id": 52151526, "comment_id": 91254848, "body": "<code>LargeGroup.all</code> will do <code>SELECT * FROM large_groups</code>, i.e. the return order will be undefined."}], "tags": [], "owner": {"reputation": 446, "user_id": 8356015, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PaYtW.jpg?s=128&g=1", "display_name": "Ravi Teja Dandu", "link": "https://stackoverflow.com/users/8356015/ravi-teja-dandu"}, "is_accepted": false, "score": 0, "last_activity_date": 1535984092, "creation_date": 1535984092, "answer_id": 52151526, "question_id": 52151407, "link": "https://stackoverflow.com/questions/52151407/ruby-on-rails-how-to-have-each-do-with-index-not-update-index-of-my-object/52151526#52151526", "title": "Ruby on Rails: How to have Each_do_with_index not update Index of my Object?", "body": "<p>I think by default doing <code>LargeGroup.all</code> returns the records based on <code>updated_at</code> value in ascending order. Change your index action code as follows: </p>\n\n<pre><code>@large_group = LargeGroup.order('created_at ASC')\n</code></pre>\n\n<p>In case you want them in latest created order change <code>'ASC'</code> to <code>'DESC'</code>.</p>\n"}], "owner": {"reputation": 213, "user_id": 8168891, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1b560c1278f176cdee2ffdedddeaac6c?s=128&d=identicon&r=PG&f=1", "display_name": "turtlefish12", "link": "https://stackoverflow.com/users/8168891/turtlefish12"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 49, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1535984092, "creation_date": 1535983697, "question_id": 52151407, "link": "https://stackoverflow.com/questions/52151407/ruby-on-rails-how-to-have-each-do-with-index-not-update-index-of-my-object", "title": "Ruby on Rails: How to have Each_do_with_index not update Index of my Object?", "body": "<p>I am trying to display my large_group objects so that only ones in a certain semester will have the semester displayed with its respective parameters. However, if I edit one of my large_group objects, it seems to update the index of that object. For example, editing Large Group 1 would change its index from 1 to 7. </p>\n\n<pre><code>&lt;% @large_group.each_with_index do |large_group, index| %&gt;\n        &lt;tr class=\"borderless\"&gt;\n            &lt;% if index == 0 || large_group.semester != @large_group[index - 1].semester %&gt;\n                &lt;td class=\"test_font\"&gt; &lt;%= large_group.semester %&gt; &lt;/td&gt;\n                &lt;% else %&gt;\n                &lt;td&gt;&lt;/td&gt;\n            &lt;% end %&gt;\n\n            &lt;h1&gt;&lt;%= puts \"#{large_group} at index #{index}\"%&gt;&lt;/h1&gt;\n\n            &lt;td class=\"nicer\"&gt; &lt;%= link_to \"large group \" + large_group.session_number.to_s, large_group_path(large_group)%&gt; &lt;/td&gt;\n            &lt;td class=\"nicer2\"&gt; \n&lt;%= large_group.date.strftime(\"%m/%d\")%&gt; &lt;/td&gt;\n</code></pre>\n\n<p>And Here is my large_group_controller</p>\n\n<pre><code>class LargeGroupsController &lt; ApplicationController\n    before_action :set_large_group, only: [:show, :edit, :update, :destroy, :shuffle, :reset, :add_or_reassign]\n\ndef index\n        @large_group = LargeGroup.all\n        respond_to do |format|\n            format.html\n            format.json\n          end\n    end\n\ndef update\n\n        if @large_group.update_attributes(large_group_params)\n            flash[:notice] = \"Successfully updated #{@large_group.session_number}.\"\n            redirect_to large_group_path \n        else \n            flash[:error] = \"Error in editing Large Group #{@large_group.session_number}\"\n            redirect_to large_groups_path\n        end \n    end \n\n    def edit\n        respond_to do |format|\n            format.html\n            format.js\n        end\n    end\n</code></pre>\n\n<p>how do I make sure the index does not update after I try to edit my object? </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "dependencies", "mongoid", "locomotivecms"], "answers": [{"tags": [], "owner": {"reputation": 1001, "user_id": 2945977, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/c76f28b6eccfe32b63a559aac74a9be5?s=128&d=identicon&r=PG&f=1", "display_name": "sonic", "link": "https://stackoverflow.com/users/2945977/sonic"}, "is_accepted": false, "score": 0, "last_activity_date": 1535989093, "creation_date": 1535989093, "answer_id": 52152747, "question_id": 52150821, "link": "https://stackoverflow.com/questions/52150821/locomotive-cms-and-mongoid-version/52152747#52152747", "title": "Locomotive CMS and mongoid version", "body": "<p>Ok I found a solution here <a href=\"https://github.com/mongoid/moped/issues/283\" rel=\"nofollow noreferrer\">https://github.com/mongoid/moped/issues/283</a> (mhuggins answer)\nand changed it little bit</p>\n\n<pre><code>def aggregate(*pipeline)\n  # Ordering of keys apparently matters to Mongo -- `aggregate` has to come before `cursor` here.\n  extract_result(database.session.command(aggregate: name, pipeline: pipeline.flatten, cursor: {}))\nend\n</code></pre>\n\n<p>to contain <code>database.session</code> instead of <code>session</code></p>\n\n<p>This adds cursor to aggregate function by the default. It wasn't that hard to override this function after all but to find what it causes was harder part.</p>\n\n<p>Anyway, I leave this question here, maybe someone finds it useful.</p>\n"}], "owner": {"reputation": 1001, "user_id": 2945977, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/c76f28b6eccfe32b63a559aac74a9be5?s=128&d=identicon&r=PG&f=1", "display_name": "sonic", "link": "https://stackoverflow.com/users/2945977/sonic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 100, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1535989093, "creation_date": 1535981583, "last_edit_date": 1535985384, "question_id": 52150821, "link": "https://stackoverflow.com/questions/52150821/locomotive-cms-and-mongoid-version", "title": "Locomotive CMS and mongoid version", "body": "<p>I created few years ago websites based on mongodb 3.4 and \"locomotive_cms\" gem.\nMy hosting provider upgraded mongodb to 3.6 and my website getting this error when uploading the image file</p>\n\n<pre><code>Moped::Errors::OperationFailure (The operation: #&lt;Moped::Protocol::Command\n@length=468\n...\nfailed with error 9: \"The 'cursor' option is required, except for aggregate with the explain argument\"\n</code></pre>\n\n<p>I use <strong>mongoid (3.1.7)</strong></p>\n\n<p>It has something to do with moped(aggregation problem)</p>\n\n<pre><code> moped (1.5.3) lib/moped/node.rb:99:in `block in command'\n  moped (1.5.3) lib/moped/node.rb:600:in `block (3 levels) in flush'\n  moped (1.5.3) lib/moped/node.rb:599:in `map'\n  moped (1.5.3) lib/moped/node.rb:599:in `block (2 levels) in flush'\n  moped (1.5.3) lib/moped/node.rb:150:in `ensure_connected'\n  moped (1.5.3) lib/moped/node.rb:595:in `block in flush'\n  moped (1.5.3) lib/moped/node.rb:610:in `logging'\n  moped (1.5.3) lib/moped/node.rb:594:in `flush'\n  moped (1.5.3) lib/moped/node.rb:583:in `process'\n  moped (1.5.3) lib/moped/node.rb:92:in `command'\n  moped (1.5.3) lib/moped/session/context.rb:51:in `block in command'\n  moped (1.5.3) lib/moped/session/context.rb:105:in `block in with_node'\n  moped (1.5.3) lib/moped/cluster.rb:251:in `with_secondary'\n  moped (1.5.3) lib/moped/session/context.rb:104:in `with_node'\n  moped (1.5.3) lib/moped/session/context.rb:50:in `command'\n  moped (1.5.3) lib/moped/database.rb:76:in `command'\n  moped (1.5.3) lib/moped/session.rb:78:in `command'\n  moped (1.5.3) lib/moped/collection.rb:128:in `aggregate'\n  mongoid (3.1.7) lib/mongoid/contextual/aggregable/mongo.rb:27:in `aggregates'\n  mongoid (3.1.7) lib/mongoid/contextual/aggregable/mongo.rb:71:in `max'\n  mongoid (3.1.7) lib/mongoid/contextual.rb:11:in `max'\n  mongoid (3.1.7) lib/mongoid/finders.rb:13:in `max'\n  /usrcustom_fields (2.3.4) lib/custom_fields/types/belongs_to.rb:52:in `block in apply_belongs_to_custom_field'\n  activesupport (3.2.22.5) lib/active_support/callbacks.rb:440:in `_run__4082834224722639677__create__278889843058572249__callbacks'\n  activesupport (3.2.22.5) lib/active_support/callbacks.rb:405:in `__run_callback'\n  activesupport (3.2.22.5) lib/active_support/callbacks.rb:385:in `_run_create_callbacks'\n  activesupport (3.2.22.5) lib/active_support/callbacks.rb:81:in `run_callbacks'\n  mongoid (3.1.7) lib/mongoid/callbacks.rb:130:in `run_callbacks'\n  mongoid (3.1.7) lib/mongoid/persistence/insertion.rb:24:in `block in prepare'\n  activesupport (3.2.22.5) lib/active_support/callbacks.rb:458:in `_run__4082834224722639677__save__278889843058572249__callbacks'\n  activesupport (3.2.22.5) lib/active_support/callbacks.rb:405:in `__run_callback'\n  activesupport (3.2.22.5) lib/active_support/callbacks.rb:385:in `_run_save_callbacks'\n  activesupport (3.2.22.5) lib/active_support/callbacks.rb:81:in `run_callbacks'\n  mongoid (3.1.7) lib/mongoid/callbacks.rb:130:in `run_callbacks'\n  mongoid (3.1.7) lib/mongoid/persistence/insertion.rb:23:in `prepare'\n  mongoid (3.1.7) lib/mongoid/persistence/operations/insert.rb:26:in `persist'\n  mongoid (3.1.7) lib/mongoid/persistence.rb:56:in `insert'\n  mongoid (3.1.7) lib/mongoid/persistence.rb:85:in `save'\n  mongoid (3.1.7) lib/mongoid/relations/many.rb:44:in `create'\n  /usrlocomotive_cms (2.5.7) app/controllers/locomotive/content_entries_controller.rb:46:in `create'\n  actionpack (3.2.22.5) lib/action_controller/metal/implicit_render.rb:4:in `send_action'\n  actionpack (3.2.22.5) lib/abstract_controller/base.rb:167:in `process_action'\n  actionpack (3.2.22.5) lib/action_controller/metal/rendering.rb:10:in `process_action'\n  actionpack (3.2.22.5) lib/abstract_controller/callbacks.rb:18:in `block in process_action'\n  activesupport (3.2.22.5) lib/active_support/callbacks.rb:569:in `block in _run__3965168837898506995__process_action__980960899211290186__callbacks'\n  activesupport (3.2.22.5) lib/active_support/callbacks.rb:215:in `block in _conditional_callback_around_842'\n  activesupport (3.2.22.5) lib/active_support/core_ext/time/zones.rb:45:in `use_zone'\n  locomotive_cms (2.5.7) lib/locomotive/action_controller/timezone.rb:8:in `set_timezone'\n  activesupport (3.2.22.5) lib/active_support/callbacks.rb:214:in `_conditional_callback_around_842'\n  activesupport (3.2.22.5) lib/active_support/callbacks.rb:502:in `_run__3965168837898506995__process_action__980960899211290186__callbacks'\n  activesupport (3.2.22.5) lib/active_support/callbacks.rb:405:in `__run_callback'\n  activesupport (3.2.22.5) lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'\n  activesupport (3.2.22.5) lib/active_support/callbacks.rb:81:in `run_callbacks'\n  actionpack (3.2.22.5) lib/abstract_controller/callbacks.rb:17:in `process_action'\n  actionpack (3.2.22.5) lib/action_controller/metal/rescue.rb:29:in `process_action'\n  actionpack (3.2.22.5) lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'\n  activesupport (3.2.22.5) lib/active_support/notifications.rb:123:in `block in instrument'\n  activesupport (3.2.22.5) lib/active_support/notifications/instrumenter.rb:20:in `instrument'\n  activesupport (3.2.22.5) lib/active_support/notifications.rb:123:in `instrument'\n  actionpack (3.2.22.5) lib/action_controller/metal/instrumentation.rb:29:in `process_action'\n  actionpack (3.2.22.5) lib/action_controller/metal/params_wrapper.rb:207:in `process_action'\n  actionpack (3.2.22.5) lib/abstract_controller/base.rb:121:in `process'\n  actionpack (3.2.22.5) lib/abstract_controller/rendering.rb:46:in `process'\n  actionpack (3.2.22.5) lib/action_controller/metal.rb:203:in `dispatch'\n  actionpack (3.2.22.5) lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'\n  actionpack (3.2.22.5) lib/action_controller/metal.rb:246:in `block in action'\n  actionpack (3.2.22.5) lib/action_dispatch/routing/route_set.rb:73:in `dispatch'\n  actionpack (3.2.22.5) lib/action_dispatch/routing/route_set.rb:36:in `call'\n  journey (1.0.4) lib/journey/router.rb:68:in `block in call'\n  journey (1.0.4) lib/journey/router.rb:56:in `each'\n  journey (1.0.4) lib/journey/router.rb:56:in `call'\n  actionpack (3.2.22.5) lib/action_dispatch/routing/route_set.rb:608:in `call'\n  railties (3.2.22.5) lib/rails/engine.rb:484:in `call'\n  railties (3.2.22.5) lib/rails/railtie/configurable.rb:30:in `method_missing'\n  journey (1.0.4) lib/journey/router.rb:68:in `block in call'\n  journey (1.0.4) lib/journey/router.rb:56:in `each'\n  journey (1.0.4) lib/journey/router.rb:56:in `call'\n  actionpack (3.2.22.5) lib/action_dispatch/routing/route_set.rb:608:in `call'\n  locomotive_cms (2.5.7) lib/locomotive/middlewares/locale_redirection.rb:13:in `call'\n  locomotive_cms (2.5.7) lib/locomotive/middlewares/locale.rb:11:in `call'\n  locomotive_cms (2.5.7) lib/locomotive/middlewares/site.rb:11:in `call'\n  locomotive_cms (2.5.7) lib/locomotive/middlewares/inline_editor.rb:10:in `call'\n  locomotive_cms (2.5.7) lib/locomotive/middlewares/seo_trailing_slash.rb:18:in `call'\n  dragonfly (1.0.12) lib/dragonfly/middleware.rb:14:in `call'\n  mongoid (3.1.7) lib/rack/mongoid/middleware/identity_map.rb:34:in `block in call'\n  mongoid (3.1.7) lib/mongoid/unit_of_work.rb:39:in `unit_of_work'\n  mongoid (3.1.7) lib/rack/mongoid/middleware/identity_map.rb:34:in `call'\n  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'\n  warden (1.2.7) lib/warden/manager.rb:35:in `catch'\n  warden (1.2.7) lib/warden/manager.rb:35:in `call'\n  actionpack (3.2.22.5) lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'\n  rack (1.4.7) lib/rack/etag.rb:23:in `call'\n  rack (1.4.7) lib/rack/conditionalget.rb:35:in `call'\n  actionpack (3.2.22.5) lib/action_dispatch/middleware/head.rb:14:in `call'\n  actionpack (3.2.22.5) lib/action_dispatch/middleware/params_parser.rb:21:in `call'\n  actionpack (3.2.22.5) lib/action_dispatch/middleware/flash.rb:242:in `call'\n  rack (1.4.7) lib/rack/session/abstract/id.rb:210:in `context'\n  rack (1.4.7) lib/rack/session/abstract/id.rb:205:in `call'\n  actionpack (3.2.22.5) lib/action_dispatch/middleware/cookies.rb:341:in `call'\n  actionpack (3.2.22.5) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'\n  activesupport (3.2.22.5) lib/active_support/callbacks.rb:405:in `_run__2523231567589513662__call__278889843058572249__callbacks'\n  activesupport (3.2.22.5) lib/active_support/callbacks.rb:405:in `__run_callback'\n  activesupport (3.2.22.5) lib/active_support/callbacks.rb:385:in `_run_call_callbacks'\n  activesupport (3.2.22.5) lib/active_support/callbacks.rb:81:in `run_callbacks'\n  actionpack (3.2.22.5) lib/action_dispatch/middleware/callbacks.rb:27:in `call'\n  actionpack (3.2.22.5) lib/action_dispatch/middleware/remote_ip.rb:31:in `call'\n  actionpack (3.2.22.5) lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'\n  actionpack (3.2.22.5) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'\n  railties (3.2.22.5) lib/rails/rack/logger.rb:32:in `call_app'\n  railties (3.2.22.5) lib/rails/rack/logger.rb:16:in `block in call'\n  activesupport (3.2.22.5) lib/active_support/tagged_logging.rb:22:in `tagged'\n  railties (3.2.22.5) lib/rails/rack/logger.rb:16:in `call'\n  actionpack (3.2.22.5) lib/action_dispatch/middleware/request_id.rb:22:in `call'\n  rack (1.4.7) lib/rack/methodoverride.rb:21:in `call'\n  rack (1.4.7) lib/rack/runtime.rb:17:in `call'\n  dragonfly (1.0.12) lib/dragonfly/cookie_monster.rb:9:in `call'\n  activesupport (3.2.22.5) lib/active_support/cache/strategy/local_cache.rb:72:in `call'\n  rack (1.4.7) lib/rack/lock.rb:15:in `call'\n  rack-cache (1.8.0) lib/rack/cache/context.rb:140:in `forward'\n  rack-cache (1.8.0) lib/rack/cache/context.rb:147:in `pass'\n  rack-cache (1.8.0) lib/rack/cache/context.rb:159:in `invalidate'\n  rack-cache (1.8.0) lib/rack/cache/context.rb:74:in `call!'\n  rack-cache (1.8.0) lib/rack/cache/context.rb:51:in `call'\n  locomotive_cms (2.5.7) lib/locomotive/middlewares/permalink.rb:17:in `call'\n  railties (3.2.22.5) lib/rails/engine.rb:484:in `call'\n  railties (3.2.22.5) lib/rails/application.rb:231:in `call'\n  railties (3.2.22.5) lib/rails/railtie/configurable.rb:30:in `method_missing'\n  /usr/local/lib/ruby/gems/2.3/gems/passenger-5.1.12/src/ruby_supportlib/phusion_passenger/rack/thread_handler_extension.rb:97:in `process_request'\n  /usr/local/lib/ruby/gems/2.3/gems/passenger-5.1.12/src/ruby_supportlib/phusion_passenger/request_handler/thread_handler.rb:160:in `accept_and_process_next_request'\n  /usr/local/lib/ruby/gems/2.3/gems/passenger-5.1.12/src/ruby_supportlib/phusion_passenger/request_handler/thread_handler.rb:113:in `main_loop'\n  /usr/local/lib/ruby/gems/2.3/gems/passenger-5.1.12/src/ruby_supportlib/phusion_passenger/request_handler.rb:416:in `block (3 levels) in start_threads'\n  /usr/local/lib/ruby/gems/2.3/gems/passenger-5.1.12/src/ruby_supportlib/phusion_passenger/utils.rb:113:in `block in create_thread_and_abort_on_exception'\n</code></pre>\n\n<p>I tried to update versions but I got only this version, which doesn't work for mongodb 3.6...</p>\n\n<pre><code>locomotive_cms (&gt;= 2.5.7, ~&gt; 2.5) was resolved to 2.5.7, which depends on\n  moped (~&gt; 1.5.3)\n</code></pre>\n\n<p>This is really annoying, because I can't downgrade database, either update the cms. I found that there is new Locomotive cms from some time but in prerequisites there is still mongodb 3.4 and I guess it's not all the same working, name was change to 'locomotivecms' gem.</p>\n"}, {"tags": ["ruby", "rubymine", "rdoc"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 2, "creation_date": 1535979160, "post_id": 52149934, "comment_id": 91250271, "body": "IIRC, <code>@return [Array&lt;My&gt;]</code> should work."}], "answers": [{"comments": [{"owner": {"reputation": 2003, "user_id": 213759, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/e1e0ceabcfbd199505d02ce1f9c50cf0?s=128&d=identicon&r=PG", "display_name": "Kirby", "link": "https://stackoverflow.com/users/213759/kirby"}, "edited": false, "score": 0, "creation_date": 1535983208, "post_id": 52150331, "comment_id": 91252549, "body": "am I right <code># @param filters [Filter]</code> means just <code>filters == Filter</code> in your example?"}, {"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "reply_to_user": {"reputation": 2003, "user_id": 213759, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/e1e0ceabcfbd199505d02ce1f9c50cf0?s=128&d=identicon&r=PG", "display_name": "Kirby", "link": "https://stackoverflow.com/users/213759/kirby"}, "edited": false, "score": 0, "creation_date": 1535983321, "post_id": 52150331, "comment_id": 91252620, "body": "@Kirby the form is as following: [@param] [function parameter name] [function parameter type]"}, {"owner": {"reputation": 2003, "user_id": 213759, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/e1e0ceabcfbd199505d02ce1f9c50cf0?s=128&d=identicon&r=PG", "display_name": "Kirby", "link": "https://stackoverflow.com/users/213759/kirby"}, "edited": false, "score": 0, "creation_date": 1535983338, "post_id": 52150331, "comment_id": 91252635, "body": "And, just to clarify, in <code>@return</code> it means <code>[TheClass.new, TheClass.new, ...]</code>, doesn&#39;t it?"}, {"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "reply_to_user": {"reputation": 2003, "user_id": 213759, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/e1e0ceabcfbd199505d02ce1f9c50cf0?s=128&d=identicon&r=PG", "display_name": "Kirby", "link": "https://stackoverflow.com/users/213759/kirby"}, "edited": false, "score": 0, "creation_date": 1535983384, "post_id": 52150331, "comment_id": 91252665, "body": "@Kirby it means array of instances of <code>TheClass</code>"}, {"owner": {"reputation": 2003, "user_id": 213759, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/e1e0ceabcfbd199505d02ce1f9c50cf0?s=128&d=identicon&r=PG", "display_name": "Kirby", "link": "https://stackoverflow.com/users/213759/kirby"}, "edited": false, "score": 0, "creation_date": 1535983503, "post_id": 52150331, "comment_id": 91252745, "body": "@param name type - it&#39;s absolutely clear. I mean in my example filters suppose to an array with Filter objects."}, {"owner": {"reputation": 2003, "user_id": 213759, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/e1e0ceabcfbd199505d02ce1f9c50cf0?s=128&d=identicon&r=PG", "display_name": "Kirby", "link": "https://stackoverflow.com/users/213759/kirby"}, "edited": false, "score": 0, "creation_date": 1535983549, "post_id": 52150331, "comment_id": 91252768, "body": "@AndrewDeineko, ok got it. It&#39;s definitely what I need. Thank you!"}, {"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "reply_to_user": {"reputation": 2003, "user_id": 213759, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/e1e0ceabcfbd199505d02ce1f9c50cf0?s=128&d=identicon&r=PG", "display_name": "Kirby", "link": "https://stackoverflow.com/users/213759/kirby"}, "edited": false, "score": 1, "creation_date": 1535983638, "post_id": 52150331, "comment_id": 91252832, "body": "@Kirby I misunderstood, if <code>filters</code> is an array it should be <code>@param filters [Array]</code>. I think you can specify the class of these objects with <code>@param filters [Array&lt;Filter&gt;]</code>"}], "tags": [], "owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "is_accepted": true, "score": 3, "last_activity_date": 1551885723, "last_edit_date": 1551885723, "creation_date": 1535979696, "answer_id": 52150331, "question_id": 52149934, "link": "https://stackoverflow.com/questions/52149934/how-to-declare-array-of-a-particular-type-in-ruby-documentor/52150331#52150331", "title": "How to declare array of a particular type in ruby documentor?", "body": "<pre><code>class TheClass\n  # @param items   [Array]\n  # @param filters [Array&lt;Filter&gt;]\n  # @return        [Array&lt;TheClass&gt;]\n  def filter(items, filters); end\nend\n</code></pre>\n\n<p>As documented <a href=\"https://www.rubydoc.info/gems/yard/file/docs/Tags.md#return\" rel=\"nofollow noreferrer\">YARD Tags</a>.</p>\n"}], "owner": {"reputation": 2003, "user_id": 213759, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/e1e0ceabcfbd199505d02ce1f9c50cf0?s=128&d=identicon&r=PG", "display_name": "Kirby", "link": "https://stackoverflow.com/users/213759/kirby"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 447, "favorite_count": 0, "accepted_answer_id": 52150331, "answer_count": 1, "score": 0, "last_activity_date": 1551885723, "creation_date": 1535978199, "last_edit_date": 1536003803, "question_id": 52149934, "link": "https://stackoverflow.com/questions/52149934/how-to-declare-array-of-a-particular-type-in-ruby-documentor", "title": "How to declare array of a particular type in ruby documentor?", "body": "<p>I'd like to declare an array of objects with the exact object class in rubydoc  for either a parameter or variable, or for <code>@return</code>. (it must be RDoc?..)</p>\n\n<p>The main reason, to make RubyMine (or another IDE) work for autocomplete stuff, clickable methods, refactoring, etc., in right way.</p>\n\n<p>In PHP will look like:</p>\n\n<pre><code>/**\n * @param array $items\n * @param Filter[] $filters\n * @return Result[]\n */\nfunction filter($items, $filters) {}\n</code></pre>\n\n<p>I'm just not sure if it can work in similar way in RubyMine:</p>\n\n<pre><code>##\n# @param [Array] items\n# @param [Filter[]] filters\n# @return [ResultClass[]]\n#\ndef filter(items, filters); end\n</code></pre>\n\n<hr>\n\n<p>Extra example in PHP:</p>\n\n<pre><code>class My\n{\n    public $name;\n}\n\n/**\n * @return My[]\n */\nfunction foo()\n{\n      // Similar code here\n      //return [new My(), new My()];\n}\n\nfunction show()\n{\n    foreach (foo() as $item) {\n        // IDE will make autocomplete for My::$name\n        echo \"$item-&gt;name\\n\";\n    }\n}\n</code></pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1535973945, "post_id": 52148706, "comment_id": 91247302, "body": "So the receiver is <code>self</code> (given in the context) for each element?"}, {"owner": {"reputation": 1543, "user_id": 5801853, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/e1b0fbad41fb9e1ee84161ebff1ddbbc?s=128&d=identicon&r=PG", "display_name": "yzalavin", "link": "https://stackoverflow.com/users/5801853/yzalavin"}, "edited": false, "score": 1, "creation_date": 1535974108, "post_id": 52148706, "comment_id": 91247414, "body": "Check <a href=\"https://andrewjgrimm.wordpress.com/2011/10/03/in-ruby-method-passes-you/\" rel=\"nofollow noreferrer\">andrewjgrimm.wordpress.com/2011/10/03/in-ruby-method-passes-&zwnj;&#8203;you</a>."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1535974386, "post_id": 52148706, "comment_id": 91247578, "body": "<code>array.each(&amp;method(:method))</code> should work, where <code>:method</code> is the name of the method you&#39;d like to invoke and <code>method</code> is the <a href=\"http://ruby-doc.org/core-2.5.1/Object.html#method-i-method\" rel=\"nofollow noreferrer\"><code>method</code></a> method (which returns a <code>Method</code> object for the given method name) ;-)"}, {"owner": {"reputation": 3742, "user_id": 783009, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8efefc827b7980fd8e39a04439d9295a?s=128&d=identicon&r=PG", "display_name": "Dom Christie", "link": "https://stackoverflow.com/users/783009/dom-christie"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1535974636, "post_id": 52148706, "comment_id": 91247721, "body": "@stefan if you&#39;d like to convert that to an answer, I&#39;d gladly accept and upvote. Thanks!"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1535974691, "post_id": 52148706, "comment_id": 91247757, "body": "@DomChristie I&#39;m pretty sure this has been asked before, so maybe we can close it as a duplicate ..."}, {"owner": {"reputation": 3742, "user_id": 783009, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8efefc827b7980fd8e39a04439d9295a?s=128&d=identicon&r=PG", "display_name": "Dom Christie", "link": "https://stackoverflow.com/users/783009/dom-christie"}, "edited": false, "score": 3, "creation_date": 1535975373, "post_id": 52148706, "comment_id": 91248194, "body": "Great! I found this: <a href=\"https://stackoverflow.com/questions/18816654/is-there-a-more-concise-way-to-call-an-outside-method-on-a-map-in-ruby/18816670#18816670\" title=\"is there a more concise way to call an outside method on a map in ruby\">stackoverflow.com/questions/18816654/&hellip;</a> Much easy to search for when you&#39;ve got the answer! :)"}], "owner": {"reputation": 3742, "user_id": 783009, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8efefc827b7980fd8e39a04439d9295a?s=128&d=identicon&r=PG", "display_name": "Dom Christie", "link": "https://stackoverflow.com/users/783009/dom-christie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 45, "favorite_count": 0, "closed_date": 1535975415, "answer_count": 0, "score": 3, "last_activity_date": 1535973509, "creation_date": 1535973509, "question_id": 52148706, "link": "https://stackoverflow.com/questions/52148706/shorthand-for-passing-each-item-in-an-enumerable-to-another-method", "closed_reason": "Duplicate", "title": "Shorthand for passing each item in an enumerable to another method", "body": "<p>Is there a nicer way to write something like:</p>\n\n<pre><code>array.each { |item| method(item) }\n</code></pre>\n\n<p>I'm aware of <code>array.each(&amp;:method)</code> which calls the method <em>on</em> each item, but is there a similar shorthand for calling a method <em>with</em> each item?</p>\n"}, {"tags": ["ruby", "homebrew", "rbenv"], "comments": [{"owner": {"reputation": 1831, "user_id": 4160532, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Ey34JagqMzQ/AAAAAAAAAAI/AAAAAAAAABo/G70W8D2LXM4/photo.jpg?sz=128", "display_name": "Kedarnag Mukanahallipatna", "link": "https://stackoverflow.com/users/4160532/kedarnag-mukanahallipatna"}, "edited": false, "score": 0, "creation_date": 1535968384, "post_id": 52147281, "comment_id": 91244320, "body": "Can you do <code>rbenv install 2.5.0</code>. Then <code>rbenv local 2.5.0</code> and <code>rbenv rehash</code> inside your project directory."}, {"owner": {"reputation": 149, "user_id": 5914341, "user_type": "registered", "accept_rate": 46, "profile_image": "https://graph.facebook.com/10208640241620387/picture?type=large", "display_name": "justinedps26", "link": "https://stackoverflow.com/users/5914341/justinedps26"}, "reply_to_user": {"reputation": 1831, "user_id": 4160532, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Ey34JagqMzQ/AAAAAAAAAAI/AAAAAAAAABo/G70W8D2LXM4/photo.jpg?sz=128", "display_name": "Kedarnag Mukanahallipatna", "link": "https://stackoverflow.com/users/4160532/kedarnag-mukanahallipatna"}, "edited": false, "score": 0, "creation_date": 1535969115, "post_id": 52147281, "comment_id": 91244734, "body": "i have an error when running <code>rbenv install 2.5.0</code> : <code>ruby-build: definition not found: 2.5.0 ; The following versions contain </code>2.5.0&#39; in the name: rbx-2.5.0 ; See all available versions with <code>rbenv install --list&#39;. ; If the version you need is missing, try upgrading ruby-build:  brew update &amp;&amp; brew upgrade ruby-build</code>. I have tried upgrading ruby-build already but nothing changed."}, {"owner": {"reputation": 1831, "user_id": 4160532, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Ey34JagqMzQ/AAAAAAAAAAI/AAAAAAAAABo/G70W8D2LXM4/photo.jpg?sz=128", "display_name": "Kedarnag Mukanahallipatna", "link": "https://stackoverflow.com/users/4160532/kedarnag-mukanahallipatna"}, "edited": false, "score": 0, "creation_date": 1535969213, "post_id": 52147281, "comment_id": 91244802, "body": "You don&#39;t have the formula&#39;s updated. that&#39;s why. Hold on."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 1, "creation_date": 1535969392, "post_id": 52147281, "comment_id": 91244899, "body": "Is there any particular reason why you need such an old version? The current release of Rubinius is 3.107, 2.5.0 is <i>really</i> old. (January 2015, I think.) Since the JIT compiler uses LLVM, you need a matching installation of LLVM with a compatible API."}, {"owner": {"reputation": 1831, "user_id": 4160532, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Ey34JagqMzQ/AAAAAAAAAAI/AAAAAAAAABo/G70W8D2LXM4/photo.jpg?sz=128", "display_name": "Kedarnag Mukanahallipatna", "link": "https://stackoverflow.com/users/4160532/kedarnag-mukanahallipatna"}, "edited": false, "score": 0, "creation_date": 1535969431, "post_id": 52147281, "comment_id": 91244924, "body": "When you run the following <code>rbenv install --list</code>, you should see <code>2.5.0</code>"}, {"owner": {"reputation": 149, "user_id": 5914341, "user_type": "registered", "accept_rate": 46, "profile_image": "https://graph.facebook.com/10208640241620387/picture?type=large", "display_name": "justinedps26", "link": "https://stackoverflow.com/users/5914341/justinedps26"}, "reply_to_user": {"reputation": 1831, "user_id": 4160532, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Ey34JagqMzQ/AAAAAAAAAAI/AAAAAAAAABo/G70W8D2LXM4/photo.jpg?sz=128", "display_name": "Kedarnag Mukanahallipatna", "link": "https://stackoverflow.com/users/4160532/kedarnag-mukanahallipatna"}, "edited": false, "score": 0, "creation_date": 1535996015, "post_id": 52147281, "comment_id": 91258500, "body": "@KedarnagMukanahallipatna i don&#39;t see it... and when i run <code>rbenv install</code> with any <code>rbx-[version]</code> i get the same error message with the outdated brew instructions"}, {"owner": {"reputation": 1831, "user_id": 4160532, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Ey34JagqMzQ/AAAAAAAAAAI/AAAAAAAAABo/G70W8D2LXM4/photo.jpg?sz=128", "display_name": "Kedarnag Mukanahallipatna", "link": "https://stackoverflow.com/users/4160532/kedarnag-mukanahallipatna"}, "edited": false, "score": 0, "creation_date": 1535998633, "post_id": 52147281, "comment_id": 91259439, "body": "You&#39;ll have to update your ruby build. you can go into <code>~&#47;.rbenv&#47;plugins&#47;ruby-build&#47;</code> directory and do <code>git pull origin master</code>. After that see if <code>rbenv install --list</code> will have <code>2.5.0</code>"}, {"owner": {"reputation": 149, "user_id": 5914341, "user_type": "registered", "accept_rate": 46, "profile_image": "https://graph.facebook.com/10208640241620387/picture?type=large", "display_name": "justinedps26", "link": "https://stackoverflow.com/users/5914341/justinedps26"}, "reply_to_user": {"reputation": 1831, "user_id": 4160532, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Ey34JagqMzQ/AAAAAAAAAAI/AAAAAAAAABo/G70W8D2LXM4/photo.jpg?sz=128", "display_name": "Kedarnag Mukanahallipatna", "link": "https://stackoverflow.com/users/4160532/kedarnag-mukanahallipatna"}, "edited": false, "score": 0, "creation_date": 1536062340, "post_id": 52147281, "comment_id": 91281148, "body": "@KedarnagMukanahallipatna i can&#39;t find any &#39;plugins&#39; file under .rbenv (only have shims, version and versions). can&#39;t find <code>ruby-build</code> in <code>shims</code> either."}, {"owner": {"reputation": 1831, "user_id": 4160532, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Ey34JagqMzQ/AAAAAAAAAAI/AAAAAAAAABo/G70W8D2LXM4/photo.jpg?sz=128", "display_name": "Kedarnag Mukanahallipatna", "link": "https://stackoverflow.com/users/4160532/kedarnag-mukanahallipatna"}, "edited": false, "score": 0, "creation_date": 1536069358, "post_id": 52147281, "comment_id": 91285923, "body": "Something is not right here. How did you install rbenv ? <code>homebrew</code>"}, {"owner": {"reputation": 1831, "user_id": 4160532, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Ey34JagqMzQ/AAAAAAAAAAI/AAAAAAAAABo/G70W8D2LXM4/photo.jpg?sz=128", "display_name": "Kedarnag Mukanahallipatna", "link": "https://stackoverflow.com/users/4160532/kedarnag-mukanahallipatna"}, "edited": false, "score": 0, "creation_date": 1536069516, "post_id": 52147281, "comment_id": 91286033, "body": "Let me put the steps, I follow when I&#39;m installing <code>rbenv</code> and this works. Also, I&#39;m not a fan of installing using <code>brew</code>, as if it works fine then everything is good, else lot of things seems messed. if you&#39;re ok doing so, then remove both <code>ruby-build</code> and <code>rbenv</code> using <code>brew uninstall</code>"}, {"owner": {"reputation": 149, "user_id": 5914341, "user_type": "registered", "accept_rate": 46, "profile_image": "https://graph.facebook.com/10208640241620387/picture?type=large", "display_name": "justinedps26", "link": "https://stackoverflow.com/users/5914341/justinedps26"}, "reply_to_user": {"reputation": 1831, "user_id": 4160532, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Ey34JagqMzQ/AAAAAAAAAAI/AAAAAAAAABo/G70W8D2LXM4/photo.jpg?sz=128", "display_name": "Kedarnag Mukanahallipatna", "link": "https://stackoverflow.com/users/4160532/kedarnag-mukanahallipatna"}, "edited": false, "score": 0, "creation_date": 1536145794, "post_id": 52147281, "comment_id": 91317012, "body": "I found the solution :) thanks for your help @KedarnagMukanahallipatna"}, {"owner": {"reputation": 1831, "user_id": 4160532, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Ey34JagqMzQ/AAAAAAAAAAI/AAAAAAAAABo/G70W8D2LXM4/photo.jpg?sz=128", "display_name": "Kedarnag Mukanahallipatna", "link": "https://stackoverflow.com/users/4160532/kedarnag-mukanahallipatna"}, "edited": false, "score": 0, "creation_date": 1536150765, "post_id": 52147281, "comment_id": 91320167, "body": "No Problem. What was the fix ? Was it any of my solution or something you changed on your side ?"}], "answers": [{"tags": [], "owner": {"reputation": 1831, "user_id": 4160532, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Ey34JagqMzQ/AAAAAAAAAAI/AAAAAAAAABo/G70W8D2LXM4/photo.jpg?sz=128", "display_name": "Kedarnag Mukanahallipatna", "link": "https://stackoverflow.com/users/4160532/kedarnag-mukanahallipatna"}, "is_accepted": false, "score": 0, "last_activity_date": 1536069848, "creation_date": 1536069848, "answer_id": 52168125, "question_id": 52147281, "link": "https://stackoverflow.com/questions/52147281/issues-installing-new-ruby-version-using-rbenv/52168125#52168125", "title": "Issues installing new ruby version using rbenv", "body": "<p>Clone both rbenv and ruby-build using the below links</p>\n\n<pre><code>git clone https://github.com/sstephenson/rbenv.git ~/.rbenv\ngit clone https://github.com/sstephenson/ruby-build.git ~/.rbenv/plugins/ruby-build\n</code></pre>\n\n<p>Now you'll have the ruby-build directory inside plugins.</p>\n\n<pre><code>cd ~/.rbenv\ngit pull\ncd plugins/ruby-build\ngit pull\n</code></pre>\n\n<p>After this, you should <code>2.5.0</code> when you run <code>rbenv install --list</code></p>\n"}, {"tags": [], "owner": {"reputation": 1278, "user_id": 3757026, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f0133e922dcb4bd343fa1160a8290433?s=128&d=identicon&r=PG", "display_name": "A. J. Alger", "link": "https://stackoverflow.com/users/3757026/a-j-alger"}, "is_accepted": false, "score": 0, "last_activity_date": 1538099258, "creation_date": 1538099258, "answer_id": 52547205, "question_id": 52147281, "link": "https://stackoverflow.com/questions/52147281/issues-installing-new-ruby-version-using-rbenv/52547205#52547205", "title": "Issues installing new ruby version using rbenv", "body": "<p>So, what I'd do is try to see if you have the correct version of macOS command line tools installed. You could run: </p>\n\n<pre><code>xcode-select --install\n</code></pre>\n\n<p>Or you could start from scratch with:</p>\n\n<pre><code>rm -rf /Library/Developer/CommandLineTools\n</code></pre>\n\n<p>Then install the command line tools with the code above, or the better way which I found, was going directly to the Apple Developer site and downloading the command line tools package itself and installing that.</p>\n\n<p>Install Command Line tools version 10.13 from <a href=\"https://developer.apple.com/download/more/\" rel=\"nofollow noreferrer\">here</a>.</p>\n\n<p>This issue also came up for me, but it came up when I started running Mojave. I believe it's the same thing here because I got the same errors.</p>\n"}], "owner": {"reputation": 149, "user_id": 5914341, "user_type": "registered", "accept_rate": 46, "profile_image": "https://graph.facebook.com/10208640241620387/picture?type=large", "display_name": "justinedps26", "link": "https://stackoverflow.com/users/5914341/justinedps26"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1008, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1538099258, "creation_date": 1535968288, "question_id": 52147281, "link": "https://stackoverflow.com/questions/52147281/issues-installing-new-ruby-version-using-rbenv", "title": "Issues installing new ruby version using rbenv", "body": "<p>I am trying to install ruby 2.5.0 on my system (macOS High Sierra) using rbenv but i'm facing a weird issue as the brew instructions are out of date:</p>\n\n<pre><code>djeustinezzz:~ JUSTINE$ rbenv install rbx-2.5.0\n\nERROR: Rubinius will not be able to compile using Apple's LLVM-based \nbuild tools on OS X. You will need to install LLVM 3.5 first.\n\nTO FIX THE PROBLEM: Install Homebrew's llvm package with this\ncommand: brew tap homebrew/versions ; brew install llvm35\n\nBUILD FAILED (OS X 10.13.6 using ruby-build 20160130)\n</code></pre>\n\n<p>The version 3.5 of LLVM was deleted. After googling here is what i've done:</p>\n\n<pre><code>brew tap homebrew/homebrew-core\nbrew install llvm@3.7\n</code></pre>\n\n<p>But nothing changed.</p>\n\n<p>Homebrew, rbenv and ruby-build are installed and up-to-date. </p>\n\n<p>Precision on why i'm doing this: i just installed Rails 5 on my computer and when i run the server, i have this error: </p>\n\n<pre><code>rbenv: version `ruby-2.5.0' is not installed (set by /Users/JUSTINE/desktop/code/test_five/.ruby-version)\n</code></pre>\n\n<p>When i run <code>ruby -v</code>, the output is <code>ruby 2.5.0p0 (2017-12-25 revision 61468) [x86_64-darwin17]</code> .</p>\n\n<p>Any idea?</p>\n"}, {"tags": ["ruby", "string"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 3, "creation_date": 1535966151, "post_id": 52146623, "comment_id": 91243002, "body": "&quot;Is there a way&quot; - Yes, it&#39;s called &quot;serialization&quot;. Usually a google query like &quot;ruby hash to &lt;specified format&gt;&quot; helps me."}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1535970640, "post_id": 52146623, "comment_id": 91245566, "body": "What is <code>ws_client.send str</code>? Is that relevant to your question? Please don&#39;t write irrelevant things. If you were trying to imply that the string should be in JSON format, then write that explicitly, not in an implicit way."}, {"owner": {"reputation": 1653, "user_id": 1318874, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/0c89dbf404d7c6ac72954595c974e3d9?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya Cherevkov", "link": "https://stackoverflow.com/users/1318874/ilya-cherevkov"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1535973179, "post_id": 52146623, "comment_id": 91246899, "body": "@sawa That&#39;s to stress that WS server accepts specified format only. It rejects any other formats, including strings with double quotes"}], "answers": [{"comments": [{"owner": {"reputation": 1653, "user_id": 1318874, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/0c89dbf404d7c6ac72954595c974e3d9?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya Cherevkov", "link": "https://stackoverflow.com/users/1318874/ilya-cherevkov"}, "edited": false, "score": 0, "creation_date": 1535972913, "post_id": 52146656, "comment_id": 91246737, "body": "That looks good, but I need single quoted string. As you mentioned just replacing quotes is not very good idea"}, {"owner": {"reputation": 1653, "user_id": 1318874, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/0c89dbf404d7c6ac72954595c974e3d9?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya Cherevkov", "link": "https://stackoverflow.com/users/1318874/ilya-cherevkov"}, "edited": false, "score": 0, "creation_date": 1535973732, "post_id": 52146656, "comment_id": 91247186, "body": "I looked into JSON.generate, but couldn&#39;t find option for quotes"}, {"owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "reply_to_user": {"reputation": 1653, "user_id": 1318874, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/0c89dbf404d7c6ac72954595c974e3d9?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya Cherevkov", "link": "https://stackoverflow.com/users/1318874/ilya-cherevkov"}, "edited": false, "score": 0, "creation_date": 1535974848, "post_id": 52146656, "comment_id": 91247858, "body": "Because single quotes is not an option for JSON. JSON specification requires double quotes"}, {"owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "reply_to_user": {"reputation": 1653, "user_id": 1318874, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/0c89dbf404d7c6ac72954595c974e3d9?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya Cherevkov", "link": "https://stackoverflow.com/users/1318874/ilya-cherevkov"}, "edited": false, "score": 0, "creation_date": 1535974898, "post_id": 52146656, "comment_id": 91247893, "body": "If you really need single quotes then JSON is not what you&#39;re looking for"}, {"owner": {"reputation": 1653, "user_id": 1318874, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/0c89dbf404d7c6ac72954595c974e3d9?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya Cherevkov", "link": "https://stackoverflow.com/users/1318874/ilya-cherevkov"}, "edited": false, "score": 0, "creation_date": 1535975803, "post_id": 52146656, "comment_id": 91248428, "body": "Yes, it&#39;s a very strange format, like YAML wrapped into brackets, but that&#39;s what I have to deal with as websocket client"}], "tags": [], "owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "is_accepted": false, "score": 3, "last_activity_date": 1535966150, "creation_date": 1535966150, "answer_id": 52146656, "question_id": 52146623, "link": "https://stackoverflow.com/questions/52146623/serialize-hash-as-string-similar-to-json-with-single-quotes-in-ruby/52146656#52146656", "title": "Serialize hash as string similar to json with single quotes in Ruby", "body": "<p>Your desired output looks like a JSON. Try</p>\n\n<pre><code>require 'json'\n\nJSON.dump(hash)\n=&gt; \"{\\\"event\\\":\\\"subscribe\\\",\\\"channel\\\":\\\"data_channel\\\",\\\"parameters\\\":{\\\"api_key\\\":\\\"XXX\\\",\\\"sign\\\":\\\"YYY\\\"}}\"\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "edited": false, "score": 1, "creation_date": 1535967040, "post_id": 52146851, "comment_id": 91243488, "body": "If a string contains a double quote, you replace it with a single quote. It does not seem a good idea."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "edited": false, "score": 0, "creation_date": 1535967168, "post_id": 52146851, "comment_id": 91243569, "body": "@Ursus: And it&#39;d make invalid json anyway."}, {"owner": {"reputation": 1556, "user_id": 2830852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31ea598b6bc18b59de1e77a4c6f6c3e5?s=128&d=identicon&r=PG", "display_name": "Tarek N. Elsamni", "link": "https://stackoverflow.com/users/2830852/tarek-n-elsamni"}, "edited": false, "score": 1, "creation_date": 1535967266, "post_id": 52146851, "comment_id": 91243629, "body": "Yes, but the question was not about generating JSONs? it was about converting a hash to a single quoted json-like string. The OP can decide on his own wether it makes sense to use this logic (based on type of data he is handling) or not. I up voted the first comment because it makes sense to highlight and mention such a side effect / potential bug."}, {"owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1535967280, "post_id": 52146851, "comment_id": 91243634, "body": "@SergioTulentsev that too but the user never said JSON so I&#39;m not 100% sure yet :D"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "edited": false, "score": 1, "creation_date": 1535967960, "post_id": 52146851, "comment_id": 91244040, "body": "@Ursus: that&#39;s true, they didn&#39;t. I am still 98% sure it&#39;s json, though :)"}, {"owner": {"reputation": 1653, "user_id": 1318874, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/0c89dbf404d7c6ac72954595c974e3d9?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya Cherevkov", "link": "https://stackoverflow.com/users/1318874/ilya-cherevkov"}, "edited": false, "score": 0, "creation_date": 1535972773, "post_id": 52146851, "comment_id": 91246666, "body": "Yes, I need single-quoted string"}, {"owner": {"reputation": 1653, "user_id": 1318874, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/0c89dbf404d7c6ac72954595c974e3d9?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya Cherevkov", "link": "https://stackoverflow.com/users/1318874/ilya-cherevkov"}, "edited": false, "score": 0, "creation_date": 1535976585, "post_id": 52146851, "comment_id": 91248851, "body": "Since I couldn&#39;t find robust solution, I ended up using this method temporarly"}], "tags": [], "owner": {"reputation": 1556, "user_id": 2830852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31ea598b6bc18b59de1e77a4c6f6c3e5?s=128&d=identicon&r=PG", "display_name": "Tarek N. Elsamni", "link": "https://stackoverflow.com/users/2830852/tarek-n-elsamni"}, "is_accepted": false, "score": 2, "last_activity_date": 1535966845, "creation_date": 1535966845, "answer_id": 52146851, "question_id": 52146623, "link": "https://stackoverflow.com/questions/52146623/serialize-hash-as-string-similar-to-json-with-single-quotes-in-ruby/52146851#52146851", "title": "Serialize hash as string similar to json with single quotes in Ruby", "body": "<p>To have single quotes you can try something like:</p>\n\n<pre><code>JSON.dump(hash).gsub('\"', '\\'')\n</code></pre>\n\n<p>It returns:</p>\n\n<pre><code>{'event':'subscribe','channel':'data_channel','parameters':{'api_key':'XXX','sign':'YYY'}}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "is_accepted": true, "score": 1, "last_activity_date": 1535977543, "last_edit_date": 1535977543, "creation_date": 1535977180, "answer_id": 52149688, "question_id": 52146623, "link": "https://stackoverflow.com/questions/52146623/serialize-hash-as-string-similar-to-json-with-single-quotes-in-ruby/52149688#52149688", "title": "Serialize hash as string similar to json with single quotes in Ruby", "body": "<p>Make JSON, then fix it up:</p>\n\n<pre><code>require 'json'\n\nhash = {:event=&gt;\"subscribe\", :channel=&gt;\"data_channel\",\n        :parameters=&gt;{:api_key=&gt;\"XXX\", :sign=&gt;%q{Miles \"Chief\" O'Brien}}}\n\nputs hash.to_json.gsub(/\"((?:\\\\[\\\"]|[^\\\"])*)\"/) { |x|\n  %Q{'#{$1.gsub(/'|\\\\\"/, ?' =&gt; %q{\\'}, %q{\\\\\"} =&gt; ?\")}'}\n}\n# =&gt; {'event':'subscribe','channel':'data_channel',\n#    'parameters':{'api_key':'XXX','sign':'Miles \"Chief\" O\\'Brien'}}\n</code></pre>\n\n<p>EDIT: The first regex says: match a double quote, then a sequence of either escaped double quotes/backslashes, or non-double-quote/backslash characters, then a double quote again. This makes sure we only find strings, and not accidental half-strings like <code>\"Miles \\\"</code>. For each such string, we surround the bit that was inside the double quotes (<code>$1</code>) with single quotes, and run a sub-replacement on it that will find escaped double quotes and unescaped single quotes, unescape the former and escape the latter.</p>\n\n<p>Also, sorry about wonky highlighting, seems StackOverflow syntax highlighter can't deal with alternate forms of Ruby quoting, but they're so convenient when you're working with quote characters...</p>\n"}], "owner": {"reputation": 1653, "user_id": 1318874, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/0c89dbf404d7c6ac72954595c974e3d9?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya Cherevkov", "link": "https://stackoverflow.com/users/1318874/ilya-cherevkov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1081, "favorite_count": 0, "accepted_answer_id": 52149688, "answer_count": 3, "score": 0, "last_activity_date": 1536059866, "creation_date": 1535965996, "last_edit_date": 1536059866, "question_id": 52146623, "link": "https://stackoverflow.com/questions/52146623/serialize-hash-as-string-similar-to-json-with-single-quotes-in-ruby", "title": "Serialize hash as string similar to json with single quotes in Ruby", "body": "<p>Is there a way to convert a hash, possibly nested:</p>\n\n<pre><code>{:event=&gt;\"subscribe\", :channel=&gt;\"data_channel\", :parameters=&gt;{:api_key=&gt;\"XXX\", :sign=&gt;\"YYY\"}}\n</code></pre>\n\n<p>into a string in specified format as below?</p>\n\n<pre><code>\"{'event':'subscribe', 'channel':'data_channel', 'parameters': {'api_key':'XXX', 'sign':'YYY'}}\"\n</code></pre>\n\n<p><strong>EDIT</strong></p>\n\n<p>The format reminds JSON, but practically is not due to single quotes.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-gnome2"], "comments": [{"owner": {"reputation": 6207, "user_id": 5117953, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/Ca0RW.jpg?s=128&g=1", "display_name": "Vishal", "link": "https://stackoverflow.com/users/5117953/vishal"}, "edited": false, "score": 0, "creation_date": 1535952072, "post_id": 52143524, "comment_id": 91236808, "body": "try <code>gem install bundler</code> then &#39;bundle install&#39;"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 1, "creation_date": 1535952297, "post_id": 52143524, "comment_id": 91236888, "body": "You have an issue with SSL handshake. Use <code>gem sources -a http:&#47;&#47;rubygems.org</code>."}, {"owner": {"reputation": 1441, "user_id": 7901138, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/6821410133ab0e0bc044a166ba2b66f2?s=128&d=identicon&r=PG&f=1", "display_name": "Siddu h", "link": "https://stackoverflow.com/users/7901138/siddu-h"}, "reply_to_user": {"reputation": 6207, "user_id": 5117953, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/Ca0RW.jpg?s=128&g=1", "display_name": "Vishal", "link": "https://stackoverflow.com/users/5117953/vishal"}, "edited": false, "score": 0, "creation_date": 1535952867, "post_id": 52143524, "comment_id": 91237045, "body": "@Vishal,  gem install bundler throws error: Could not find a valid gem &#39;bundler; in any repository."}, {"owner": {"reputation": 1441, "user_id": 7901138, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/6821410133ab0e0bc044a166ba2b66f2?s=128&d=identicon&r=PG&f=1", "display_name": "Siddu h", "link": "https://stackoverflow.com/users/7901138/siddu-h"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1535952915, "post_id": 52143524, "comment_id": 91237055, "body": "@mudasobwa, still same error i&#39;m getting"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1535953084, "post_id": 52143524, "comment_id": 91237108, "body": "Then it means <i>rubygems.org</i> is kinda down. Wait and retry."}, {"owner": {"reputation": 16672, "user_id": 22237, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/hkobD.png?s=128&g=1", "display_name": "Kris", "link": "https://stackoverflow.com/users/22237/kris"}, "edited": false, "score": 0, "creation_date": 1535967848, "post_id": 52143524, "comment_id": 91243961, "body": "try <code>wget https:&#47;&#47;api.rubygems.org&#47;specs.4.8.gz</code> to see if the file is accessible at all. It is for me."}], "answers": [{"comments": [{"owner": {"reputation": 45322, "user_id": 421705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/581b1760881c962648f99d6040d41829?s=128&d=identicon&r=PG", "display_name": "Holger Just", "link": "https://stackoverflow.com/users/421705/holger-just"}, "edited": false, "score": 4, "creation_date": 1535961727, "post_id": 52143746, "comment_id": 91240683, "body": "Adding the non-https URLs to rubygems opens you up to a lot of potentially bad issues, including the possibility for an adversary to change gems during transport and to e.g. include malicious code, snooping which gems you install, ... You should fix your ability to to fetch gems over https instead. Possibly by configuring your firewall, a required proxy or anything else."}, {"owner": {"reputation": 1441, "user_id": 7901138, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/6821410133ab0e0bc044a166ba2b66f2?s=128&d=identicon&r=PG&f=1", "display_name": "Siddu h", "link": "https://stackoverflow.com/users/7901138/siddu-h"}, "reply_to_user": {"reputation": 45322, "user_id": 421705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/581b1760881c962648f99d6040d41829?s=128&d=identicon&r=PG", "display_name": "Holger Just", "link": "https://stackoverflow.com/users/421705/holger-just"}, "edited": false, "score": 0, "creation_date": 1535977835, "post_id": 52143746, "comment_id": 91249594, "body": "@HolgerJust How to install gems behind firewall. my firewall is blocking gem installations. is there any other way to install gem even though firewall is blocking..?"}, {"owner": {"reputation": 45322, "user_id": 421705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/581b1760881c962648f99d6040d41829?s=128&d=identicon&r=PG", "display_name": "Holger Just", "link": "https://stackoverflow.com/users/421705/holger-just"}, "edited": false, "score": 0, "creation_date": 1535986269, "post_id": 52143746, "comment_id": 91254385, "body": "You can manually download gems from <a href=\"https://rubygems.org\" rel=\"nofollow noreferrer\">rubygems.org</a> but it won&#39;t be very convenient to install all the gems manually. Instead, you could configure an HTTPS proxy for rubygems if required. Or you can reconfigure your firewall. Check this with your IT team."}, {"owner": {"reputation": 1441, "user_id": 7901138, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/6821410133ab0e0bc044a166ba2b66f2?s=128&d=identicon&r=PG&f=1", "display_name": "Siddu h", "link": "https://stackoverflow.com/users/7901138/siddu-h"}, "reply_to_user": {"reputation": 45322, "user_id": 421705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/581b1760881c962648f99d6040d41829?s=128&d=identicon&r=PG", "display_name": "Holger Just", "link": "https://stackoverflow.com/users/421705/holger-just"}, "edited": false, "score": 0, "creation_date": 1536039312, "post_id": 52143746, "comment_id": 91268449, "body": "@HolgerJust  gem install -p <a href=\"http://proxy_ip:proxy_port\" rel=\"nofollow noreferrer\">proxy_ip:proxy_port</a> gem_name command worked for me."}], "tags": [], "owner": {"reputation": 1441, "user_id": 7901138, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/6821410133ab0e0bc044a166ba2b66f2?s=128&d=identicon&r=PG&f=1", "display_name": "Siddu h", "link": "https://stackoverflow.com/users/7901138/siddu-h"}, "is_accepted": false, "score": -1, "last_activity_date": 1535953470, "creation_date": 1535953470, "answer_id": 52143746, "question_id": 52143524, "link": "https://stackoverflow.com/questions/52143524/rails-gem-sources-is-shows-nothing/52143746#52143746", "title": "Rails gem sources is shows nothing", "body": "<p>I changed  ~/.gemrc</p>\n\n<pre><code>---\n:backtrace: false\n:bulk_threshold: 1000\n:sources: []\n:update_sources: true\n:verbose: true\n</code></pre>\n\n<p>to </p>\n\n<pre><code>---\n:backtrace: false\n:bulk_threshold: 1000\n:sources: [\"http://rubygems.org\"]\n:update_sources: true\n:verbose: true\n</code></pre>\n\n<p>it worked for me.\nThanks</p>\n"}, {"tags": [], "owner": {"reputation": 9353, "user_id": 845413, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/F6eYZ.png?s=128&g=1", "display_name": "Ryan Taylor", "link": "https://stackoverflow.com/users/845413/ryan-taylor"}, "is_accepted": false, "score": 0, "last_activity_date": 1538502605, "creation_date": 1538502605, "answer_id": 52613726, "question_id": 52143524, "link": "https://stackoverflow.com/questions/52143524/rails-gem-sources-is-shows-nothing/52613726#52613726", "title": "Rails gem sources is shows nothing", "body": "<p>It might be a problem with SSL if it's not an issue with your internet or rubygems.com being down.</p>\n\n<p>If you're using RVM:</p>\n\n<pre><code>rvm osx-ssl-certs update all\n</code></pre>\n\n<p>Without RVM you can try...</p>\n\n<pre><code>gem install bundler\n</code></pre>\n\n<p>or</p>\n\n<pre><code>gem update --system\n</code></pre>\n\n<p>See also: <a href=\"http://guides.rubygems.org/ssl-certificate-update/\" rel=\"nofollow noreferrer\">http://guides.rubygems.org/ssl-certificate-update/</a></p>\n"}], "owner": {"reputation": 1441, "user_id": 7901138, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/6821410133ab0e0bc044a166ba2b66f2?s=128&d=identicon&r=PG&f=1", "display_name": "Siddu h", "link": "https://stackoverflow.com/users/7901138/siddu-h"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 87, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1538502605, "creation_date": 1535951997, "question_id": 52143524, "link": "https://stackoverflow.com/questions/52143524/rails-gem-sources-is-shows-nothing", "title": "Rails gem sources is shows nothing", "body": "<p>Rails gem sources shows nothing. when i try to add rubygems to gem sources it shows following error.\n    <code>$ gem sources -a https://rubygems.org</code></p>\n\n<pre><code>    Error fetching https://rubygems.org:\n    timed out (https://api.rubygems.org/specs.4.8.gz)\n</code></pre>\n\n<p>How do i add rubygems to gem sources.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "simple-form"], "comments": [{"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 0, "creation_date": 1535946110, "post_id": 52142673, "comment_id": 91235594, "body": "I would guess that <code>full_time</code>, <code>part_time</code>, and <code>contract</code> are mutually exclusive. If so, this seems IMO like a poor way to model them."}, {"owner": {"reputation": 6282, "user_id": 1210614, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/918877d79c9865c542cbe4474266fc6f?s=128&d=identicon&r=PG&f=1", "display_name": "jordan", "link": "https://stackoverflow.com/users/1210614/jordan"}, "reply_to_user": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 0, "creation_date": 1535958251, "post_id": 52142673, "comment_id": 91238994, "body": "@jvillian In this case, they are not mutually exclusive. A user can be available for all types, as opposed to being defined by only one."}, {"owner": {"reputation": 689, "user_id": 2875377, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4a9d994f85c436f7bf13c592e6b8989e?s=128&d=identicon&r=PG&f=1", "display_name": "praga2050", "link": "https://stackoverflow.com/users/2875377/praga2050"}, "edited": false, "score": 0, "creation_date": 1535958316, "post_id": 52142673, "comment_id": 91239025, "body": "i did similar sort of thing before. i will update solution when i find time"}], "answers": [{"tags": [], "owner": {"reputation": 1197, "user_id": 400743, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a0d5c51291898c92154ba4ac1c56cd6?s=128&d=identicon&r=PG", "display_name": "Bartosz Pietraszko", "link": "https://stackoverflow.com/users/400743/bartosz-pietraszko"}, "is_accepted": true, "score": 1, "last_activity_date": 1535966935, "last_edit_date": 1535966935, "creation_date": 1535965069, "answer_id": 52146374, "question_id": 52142673, "link": "https://stackoverflow.com/questions/52142673/simple-form-multiple-attributes-in-checkbox-group/52146374#52146374", "title": "Simple Form - Multiple attributes in checkbox group", "body": "<p><code>f.collection_check_boxes</code> is a generic method for generating multiple checkboxes with arbitrary name/value, for a <strong>single</strong> attribute. The sample you gave is mentioned in the docs as a last one for this method, probably because <code>f.association</code> is way better for association attributes.</p>\n\n<pre><code>&lt;%= f.association :role, Role.all %&gt;\n</code></pre>\n\n<p>In case of your attributes, I don't think <code>f.collection_check_boxes</code> is applicable. If the attributes aren't mutually exclusive, then I don't see anything wrong - stick with them and just give each one a checkbox of it's own.</p>\n\n<pre><code>&lt;%= f.input :full_time %&gt;\n&lt;%= f.input :part_time %&gt;\n&lt;%= f.input :contract %&gt;\n</code></pre>\n\n<p><code>simple_form</code> will detect their type and generate a checkbox for each. Use <code>wrapper: false</code> option, if you want to get rid of wrapper divs and group them more tightly. </p>\n\n<p>If they were mutually exlusive, then an integer column and <a href=\"https://api.rubyonrails.org/v5.5/classes/ActiveRecord/Enum.html\" rel=\"nofollow noreferrer\"><code>enum</code></a> would be probably a better idea.</p>\n"}], "owner": {"reputation": 6282, "user_id": 1210614, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/918877d79c9865c542cbe4474266fc6f?s=128&d=identicon&r=PG&f=1", "display_name": "jordan", "link": "https://stackoverflow.com/users/1210614/jordan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 489, "favorite_count": 1, "accepted_answer_id": 52146374, "answer_count": 1, "score": 0, "last_activity_date": 1535966935, "creation_date": 1535943364, "question_id": 52142673, "link": "https://stackoverflow.com/questions/52142673/simple-form-multiple-attributes-in-checkbox-group", "title": "Simple Form - Multiple attributes in checkbox group", "body": "<p>I have a <code>User</code> Model with the following attributes:</p>\n\n<pre><code>#  full_time                :boolean\n#  part_time                :boolean\n#  contract                 :boolean\n</code></pre>\n\n<p>I would like to create a simple form checkboxes group for these attributes. From what I've been able to understand, the simple form api is meant to map to <code>has_many</code> &amp; <code>has_and_belongs_to_many</code> associations, as follows:</p>\n\n<pre><code>f.collection_check_boxes :role_ids, Role.all, :id, :name\n</code></pre>\n\n<p>Is there a way to handle updating multiple attributes on the given model within the form's API guidelines? Or is this an indication that should I be modeling the data in a different way?</p>\n"}, {"tags": ["ruby"], "answers": [{"comments": [{"owner": {"reputation": 43, "user_id": 7834186, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a6091c7eabf3bf0037f4739e6adac3c?s=128&d=identicon&r=PG&f=1", "display_name": "sarri xx", "link": "https://stackoverflow.com/users/7834186/sarri-xx"}, "edited": false, "score": 0, "creation_date": 1535939990, "post_id": 52141565, "comment_id": 91234616, "body": "Thank you for your answer and for correcting me. This clarifies a lot for me."}], "tags": [], "owner": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "is_accepted": false, "score": 1, "last_activity_date": 1535928897, "creation_date": 1535928897, "answer_id": 52141565, "question_id": 52141508, "link": "https://stackoverflow.com/questions/52141508/using-yamlstore-do-updated-yml-files-in-production-get-wiped-out-on-deploymen/52141565#52141565", "title": "Using YAML::store, do updated yml files in production get wiped out on deployment of the updated app?", "body": "<blockquote>\n  <p><em>I am using the rails YAML::store...</em></p>\n</blockquote>\n\n<p><a href=\"https://ruby-doc.org/stdlib/libdoc/yaml/rdoc/YAML/Store.html\" rel=\"nofollow noreferrer\">YAML::Store</a> is not part of Rails, but a regular Ruby standard library.</p>\n\n<blockquote>\n  <p><em>I was wondering if the .yml file will be updated in production and if the data will be wiped out when I deploy an updated version of the app to production.</em></p>\n</blockquote>\n\n<p>YAML::Store just writes to a file of your choice. What happens to that file depends entirely on your deployment process and production environment. If you're running your own server or on a single virtual machine it's likely safe. If it's a cloud service like <a href=\"https://en.wikipedia.org/wiki/Heroku\" rel=\"nofollow noreferrer\">Heroku</a>, any files are likely not safe.</p>\n\n<blockquote>\n  <p><em>I didn't want to use the database to limit the need for SQL queries.</em></p>\n</blockquote>\n\n<p>This is likely a poor trade off. YAML::Store has to load and parse the entire file every time its read. Any changes mean rewriting the entire file. As the file gets larger this will get worse and worse.</p>\n\n<p>Worse, using local files limits you to a single instance of your program. This means you cannot scale up by adding another production instance.</p>\n\n<p>In contrast, simple database queries are extremely fast and robust. There's no concern about whether a local file will be wiped out. Any number of instances can connect to the database. And databases can also be scaled to have multiple instances.</p>\n"}], "owner": {"reputation": 43, "user_id": 7834186, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a6091c7eabf3bf0037f4739e6adac3c?s=128&d=identicon&r=PG&f=1", "display_name": "sarri xx", "link": "https://stackoverflow.com/users/7834186/sarri-xx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 116, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1535939889, "creation_date": 1535928206, "last_edit_date": 1535939889, "question_id": 52141508, "link": "https://stackoverflow.com/questions/52141508/using-yamlstore-do-updated-yml-files-in-production-get-wiped-out-on-deploymen", "title": "Using YAML::store, do updated yml files in production get wiped out on deployment of the updated app?", "body": "<p>I am using the YAML::store to store a list of strings and I didn't want to use the database to limit the need for SQL queries. The strings can be added or updated by admin users. I was wondering if the .yml file will be updated in production and if the data will be wiped out when I deploy an updated version of the app to production.</p>\n"}, {"tags": ["ruby", "macos", "bundler"], "comments": [{"owner": {"reputation": 1847, "user_id": 464467, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dad1a564cc80dfb7d0775b3abb657c8a?s=128&d=identicon&r=PG", "display_name": "Hayden", "link": "https://stackoverflow.com/users/464467/hayden"}, "edited": false, "score": 0, "creation_date": 1535928351, "post_id": 52141411, "comment_id": 91232795, "body": "macOS comes with its own version of ruby as well, so bundler gem may be installing for one version and not the other. Check out using rbenv, it makes working with multiple versions of ruby easier. <a href=\"https://github.com/rbenv/rbenv\" rel=\"nofollow noreferrer\">github.com/rbenv/rbenv</a>"}], "answers": [{"comments": [{"owner": {"reputation": 1847, "user_id": 464467, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dad1a564cc80dfb7d0775b3abb657c8a?s=128&d=identicon&r=PG", "display_name": "Hayden", "link": "https://stackoverflow.com/users/464467/hayden"}, "edited": false, "score": 1, "creation_date": 1535928207, "post_id": 52141466, "comment_id": 91232777, "body": "rbenv is much simpler to work with than having to brew install a specific ruby version."}], "tags": [], "owner": {"reputation": 1556, "user_id": 2830852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31ea598b6bc18b59de1e77a4c6f6c3e5?s=128&d=identicon&r=PG", "display_name": "Tarek N. Elsamni", "link": "https://stackoverflow.com/users/2830852/tarek-n-elsamni"}, "is_accepted": false, "score": 3, "last_activity_date": 1535927586, "creation_date": 1535927586, "answer_id": 52141466, "question_id": 52141411, "link": "https://stackoverflow.com/questions/52141411/brew-install-ruby2-3-gem-install-bundler-why-bundle-command-not-found/52141466#52141466", "title": "&quot;brew install ruby@2.3&quot; + &quot;gem install bundler&quot; =&gt; why bundle command not found?", "body": "<p>I'd recommend using <code>rvm</code> or <code>rbenv</code>. otherwise you will end up with multiple rubies without any control on them and their different contexts. </p>\n\n<p>It'll be very messy. You just hit the start of this mess!</p>\n"}], "owner": {"reputation": 789, "user_id": 261061, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/1fb3da467b9d2c0a6fc65a5fefe4ab51?s=128&d=identicon&r=PG", "display_name": "St&#233;phane Klein", "link": "https://stackoverflow.com/users/261061/st%c3%a9phane-klein"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1679, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1535932775, "creation_date": 1535926889, "last_edit_date": 1535932775, "question_id": 52141411, "link": "https://stackoverflow.com/questions/52141411/brew-install-ruby2-3-gem-install-bundler-why-bundle-command-not-found", "title": "&quot;brew install ruby@2.3&quot; + &quot;gem install bundler&quot; =&gt; why bundle command not found?", "body": "<pre><code>$ brew install ruby@2.3\n...\n$ echo 'export PATH=\"/usr/local/opt/ruby@2.3/bin:$PATH\"' &gt;&gt; ~/.zshrc\n$ zsh\n$ ruby --version\nruby 2.3.7p456 (2018-03-28 revision 63024) [x86_64-darwin17]\n$ gem install bundler\nSuccessfully installed bundler-1.16.4\nParsing documentation for bundler-1.16.4\nDone installing documentation for bundler after 4 seconds\n1 gem installed\n$ bundle\nzsh: command not found: bundle\n</code></pre>\n\n<p>Question: why <code>bundle</code> command not found?</p>\n\n<p>With <code>$ gem content bundler</code> I found <code>bundle</code> executable file:</p>\n\n<pre><code>$ /usr/local/lib/ruby/gems/2.3.0/gems/bundler-1.16.4/exe/bundle --version\n</code></pre>\n\n<p>Bundler version 1.16.4</p>\n\n<p>Why <code>bundle</code> executable isn't in <code>/usr/local/opt/ruby@2.3/bin</code>?</p>\n\n<p>I see <a href=\"https://stackoverflow.com/questions/29932409/bundle-command-not-found-mac\">Bundle command not found mac</a> question, must I use <a href=\"https://github.com/rbenv/rbenv\" rel=\"nofollow noreferrer\">rbenv</a>? I can't just use <code>brew install ruby@2.3</code>?</p>\n\n<p>More information:</p>\n\n<pre><code>$ brew --version\nHomebrew 1.7.2-112-g0dc2c72\nHomebrew/homebrew-core (git revision bc34; last commit 2018-09-02)\n</code></pre>\n\n<p>And :</p>\n\n<pre><code>$ brew info ruby@2.3\nruby@2.3: stable 2.3.7 (bottled) [keg-only]\nPowerful, clean, object-oriented scripting language\nhttps://www.ruby-lang.org/\n/usr/local/Cellar/ruby@2.3/2.3.7 (15,093 files, 38.3MB)\n  Poured from bottle on 2018-09-02 at 19:44:13\nFrom: https://github.com/Homebrew/homebrew-core/blob/master/Formula/ruby@2.3.rb\n==&gt; Dependencies\nBuild: pkg-config \u2714\nRequired: libyaml \u2714, openssl \u2714, readline \u2714\n==&gt; Caveats\nBy default, binaries installed by gem will be placed into:\n  /usr/local/lib/ruby/gems/2.3.0/bin\n\nYou may want to add this to your PATH.\n\nruby@2.3 is keg-only, which means it was not symlinked into /usr/local,\nbecause this is an alternate version of another formula.\n\nIf you need to have ruby@2.3 first in your PATH run:\n  echo 'export PATH=\"/usr/local/opt/ruby@2.3/bin:$PATH\"' &gt;&gt; ~/.zshrc\n\nFor compilers to find ruby@2.3 you may need to set:\n  export LDFLAGS=\"-L/usr/local/opt/ruby@2.3/lib\"\n  export CPPFLAGS=\"-I/usr/local/opt/ruby@2.3/include\"\n\nFor pkg-config to find ruby@2.3 you may need to set:\n  export PKG_CONFIG_PATH=\"/usr/local/opt/ruby@2.3/lib/pkgconfig\"\n</code></pre>\n"}, {"tags": ["javascript", "ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 3425, "user_id": 1493116, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/9371f372f90b7c283579b097c67b9cd2?s=128&d=identicon&r=PG", "display_name": "LewlSauce", "link": "https://stackoverflow.com/users/1493116/lewlsauce"}, "edited": false, "score": 0, "creation_date": 1535934552, "post_id": 52141378, "comment_id": 91233794, "body": "This did the trick for me. I&#39;m not sure why I was specifically trying to load a JS file when I could have just simply loaded a normal partial, and included JS in it within the <code>&lt;script&gt;</code> tag. Thanks so much for your help."}], "tags": [], "owner": {"reputation": 2412, "user_id": 1253504, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/1ba0b6bef219b34fa4f2d014046ff987?s=128&d=identicon&r=PG", "display_name": "kasperite", "link": "https://stackoverflow.com/users/1253504/kasperite"}, "is_accepted": true, "score": 1, "last_activity_date": 1535926364, "creation_date": 1535926364, "answer_id": 52141378, "question_id": 52141280, "link": "https://stackoverflow.com/questions/52141280/can-i-have-a-javascript-partial-in-ruby-on-rails-partial-is-trying-to-render-in/52141378#52141378", "title": "Can I have a javascript partial in Ruby on Rails? Partial is trying to render in HTML", "body": "<p>You get that error because server responding format is html, not javascript. Setting response format is done in controller so putting <code>format: :js</code> in templates won't work. Try these steps and see if they work for you.</p>\n\n<ol>\n<li><p>Rename <code>_delete_multiple_items.js.erb</code> to\n<code>_delete_multiple_items.html.erb</code></p></li>\n<li><p>Put <code>alert(\"&lt;%= random_variable %&gt;\");</code> inside <code>&lt;script&gt;</code> tag</p></li>\n<li><p>In <code>index.html.erb</code>, remove all js related code and just do <code>&lt;%=\nrender 'shared/delete_multiple_items', :locals =&gt; {:random_variable\n=&gt; \"Hello World\" %&gt;</code></p></li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 13378, "user_id": 1430810, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/v669u.jpg?s=128&g=1", "display_name": "arieljuod", "link": "https://stackoverflow.com/users/1430810/arieljuod"}, "is_accepted": false, "score": 2, "last_activity_date": 1535926600, "creation_date": 1535926600, "answer_id": 52141397, "question_id": 52141280, "link": "https://stackoverflow.com/questions/52141280/can-i-have-a-javascript-partial-in-ruby-on-rails-partial-is-trying-to-render-in/52141397#52141397", "title": "Can I have a javascript partial in Ruby on Rails? Partial is trying to render in HTML", "body": "<p>Change this:</p>\n\n<pre><code>&lt;%= render 'shared/delete_multiple_items', :locals =&gt; {:random_variable =&gt; \"Hello World\" %&gt;\n</code></pre>\n\n<p>to this:</p>\n\n<pre><code>&lt;%= render partial: 'shared/delete_multiple_items', formats: :js, :locals =&gt; {:random_variable =&gt; \"Hello World\"} %&gt;\n</code></pre>\n\n<p><code>partial:</code> at the beginning to tell rails to look for a partial and <code>formats: :js</code> to tell rails to look for a js file (note that <code>formats</code> is NOT a child of <code>locals</code>)</p>\n"}, {"tags": [], "owner": {"reputation": 1386, "user_id": 6064073, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/457ca4f4c23d927e3f39ee3842776367?s=128&d=identicon&r=PG&f=1", "display_name": "jean182", "link": "https://stackoverflow.com/users/6064073/jean182"}, "is_accepted": false, "score": 1, "last_activity_date": 1535934261, "creation_date": 1535934261, "answer_id": 52141959, "question_id": 52141280, "link": "https://stackoverflow.com/questions/52141280/can-i-have-a-javascript-partial-in-ruby-on-rails-partial-is-trying-to-render-in/52141959#52141959", "title": "Can I have a javascript partial in Ruby on Rails? Partial is trying to render in HTML", "body": "<p>Have you tried adding a j on your js.erb file?</p>\n\n<pre><code>#views/shared/_delete_multiple_items.js.erb\nalert(\"&lt;%= j random_variable %&gt;\");\n</code></pre>\n"}], "owner": {"reputation": 3425, "user_id": 1493116, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/9371f372f90b7c283579b097c67b9cd2?s=128&d=identicon&r=PG", "display_name": "LewlSauce", "link": "https://stackoverflow.com/users/1493116/lewlsauce"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1690, "favorite_count": 0, "accepted_answer_id": 52141378, "answer_count": 3, "score": 1, "last_activity_date": 1535934261, "creation_date": 1535924997, "question_id": 52141280, "link": "https://stackoverflow.com/questions/52141280/can-i-have-a-javascript-partial-in-ruby-on-rails-partial-is-trying-to-render-in", "title": "Can I have a javascript partial in Ruby on Rails? Partial is trying to render in HTML", "body": "<p>I have a function that simple selects all of the checkboxes on the current page, creates a form, and submits it automatically.</p>\n\n<p>Instead of repeating the same exact javascript code on every single view, I want to try to just have a shared partial.</p>\n\n<p>Here's all I have thus far:</p>\n\n<pre><code>#views/shared/_delete_multiple_items.js.erb\nalert(\"&lt;%= random_variable %&gt;\");\n</code></pre>\n\n<p>.</p>\n\n<pre><code>#views/users/index.html.erb\n...\n&lt;script&gt;\n  function deleteMulitpleUsers() {\n    &lt;%= render 'shared/delete_multiple_items', :locals =&gt; {:random_variable =&gt; \"Hello World\" %&gt;\n  }\n&lt;/script&gt;\n</code></pre>\n\n<p>It looks like Rails is trying to render the partial in HTML though, if I understand this error correctly:</p>\n\n<blockquote>\n  <p>Missing partial shared/_delete_multiple_items with {:locale=>[:en],\n  :formats=>[:html], :variants=>[], :handlers=>[:raw, :erb, :html,\n  :builder, :ruby, :coffee, :jbuilder]}. Searched in:</p>\n</blockquote>\n\n<p>I've tried to include <code>:formats =&gt; :js</code> with render, like this:</p>\n\n<pre><code>&lt;%= render 'shared/delete_multiple_items', :locals =&gt; {:random_variable =&gt; \"Hello World\", :formats =&gt; :js %&gt;\n</code></pre>\n\n<p>but I still get the same exact error. Any help would be greatly appreciated.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 16229, "user_id": 525478, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3b6c0b47a0c430a0b141baee7ea845be?s=128&d=identicon&r=PG", "display_name": "Brad Werth", "link": "https://stackoverflow.com/users/525478/brad-werth"}, "edited": false, "score": 0, "creation_date": 1535917224, "post_id": 52140075, "comment_id": 91230520, "body": "Is this a new, or a known working ruby/rails installation? Has this application worked previously?"}, {"owner": {"reputation": 1, "user_id": 10307452, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-N7quuAbOVbg/AAAAAAAAAAI/AAAAAAAADWo/AIeVLBNjEow/photo.jpg?sz=128", "display_name": "Onur Y&#220;ZAK", "link": "https://stackoverflow.com/users/10307452/onur-y%c3%9czak"}, "reply_to_user": {"reputation": 16229, "user_id": 525478, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3b6c0b47a0c430a0b141baee7ea845be?s=128&d=identicon&r=PG", "display_name": "Brad Werth", "link": "https://stackoverflow.com/users/525478/brad-werth"}, "edited": false, "score": 0, "creation_date": 1535917758, "post_id": 52140075, "comment_id": 91230685, "body": "<a href=\"https://github.com/michaelzhu1/Zoomm/\" rel=\"nofollow noreferrer\">github.com/michaelzhu1/Zoomm</a>"}, {"owner": {"reputation": 2885, "user_id": 3372172, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Q3RaO.png?s=128&g=1", "display_name": "Pablo", "link": "https://stackoverflow.com/users/3372172/pablo"}, "edited": false, "score": 1, "creation_date": 1535920855, "post_id": 52140075, "comment_id": 91231453, "body": "I read somewhere you could try changing line 26 in your application.html.erb  to <code>javascript_include_tag &#39;application&#39;, &#39;data-turbolinks-track&#39;: &#39;reload&#39;</code>"}, {"owner": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "edited": false, "score": 0, "creation_date": 1535933806, "post_id": 52140075, "comment_id": 91233678, "body": "It&#39;s probably the same issue discussed here: <a href=\"https://github.com/rails/sprockets/issues/242\" rel=\"nofollow noreferrer\">github.com/rails/sprockets/issues/242</a>"}], "owner": {"reputation": 1, "user_id": 10307452, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-N7quuAbOVbg/AAAAAAAAAAI/AAAAAAAADWo/AIeVLBNjEow/photo.jpg?sz=128", "display_name": "Onur Y&#220;ZAK", "link": "https://stackoverflow.com/users/10307452/onur-y%c3%9czak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 103, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1535916074, "creation_date": 1535914014, "last_edit_date": 1535916074, "question_id": 52140075, "link": "https://stackoverflow.com/questions/52140075/problems-about-rails-on-run-rails-s", "title": "Problems about Rails on Run Rails s", "body": "<p>Have a problem when I run <code>rails s</code>. I cannot see anything on my browser.</p>\n\n<p>I am using localhost 3000 and when I look in the browser nothing shows.</p>\n\n<pre><code>    C:\\Sites\\Zoom&gt;rails s\n=&gt; Booting Puma\n=&gt; Rails 5.1.4 application starting in development\n=&gt; Run `rails server -h` for more startup options\n*** SIGUSR2 not implemented, signal based restart unavailable!\n*** SIGUSR1 not implemented, signal based restart unavailable!\n*** SIGHUP not implemented, signal based logs reopening unavailable!\nPuma starting in single mode...\n* Version 3.10.0 (ruby 2.3.3-p222), codename: Russell's Teapot\n* Min threads: 5, max threads: 5\n* Environment: development\n* Listening on tcp://0.0.0.0:3000\nUse Ctrl-C to stop\nStarted GET \"/\" for 127.0.0.1 at 2018-09-02 21:33:48 +0300\n(1.0ms) SELECT \"schema_migrations\".\"version\" FROM \"schema_migrations\" ORDER BY \"schema_migrations\".\"version\" ASC\nProcessing by StaticPagesController#root as HTML\nRendering static_pages/root.html.erb within layouts/application\nRendered static_pages/root.html.erb within layouts/application (9.0ms)\nStarted GET \"/\" for 127.0.0.1 at 2018-09-02 21:33:52 +0300\nProcessing by StaticPagesController#root as HTML\nRendering static_pages/root.html.erb within layouts/application\nRendered static_pages/root.html.erb within layouts/application (1.0ms)\nCompleted 500 Internal Server Error in 14958ms (ActiveRecord: 0.0ms)\n\nRuntimeError - can't add a new key into hash during iteration:\nC:/RailsInstaller/Ruby2.3.3/lib/ruby/2.3.0/set.rb:153:in `replace'\nC:/RailsInstaller/Ruby2.3.3/lib/ruby/2.3.0/set.rb:360:in `collect!'\nsprockets (3.7.1) lib/sprockets/loader.rb:85:in `asset_from_cache'\nsprockets (3.7.1) lib/sprockets/loader.rb:57:in `block in load'\nsprockets (3.7.1) lib/sprockets/loader.rb:311:in `block in fetch_asset_from_dependency_cache'\nsprockets (3.7.1) lib/sprockets/loader.rb:307:in `fetch_asset_from_dependency_cache'\nsprockets (3.7.1) lib/sprockets/loader.rb:44:in `load'\nsprockets (3.7.1) lib/sprockets/cached_environment.rb:20:in `block in initialize'\nsprockets (3.7.1) lib/sprockets/cached_environment.rb:47:in `load'\nsprockets (3.7.1) lib/sprockets/bundle.rb:23:in `block in call'\nsprockets (3.7.1) lib/sprockets/utils.rb:200:in `dfs'\nsprockets (3.7.1) lib/sprockets/bundle.rb:24:in `call'\nsprockets (3.7.1) lib/sprockets/processor_utils.rb:75:in `call_processor'\nsprockets (3.7.1) lib/sprockets/processor_utils.rb:57:in `block in call_processors'\nsprockets (3.7.1) lib/sprockets/processor_utils.rb:56:in `call_processors'\nsprockets (3.7.1) lib/sprockets/loader.rb:134:in `load_from_unloaded'\nsprockets (3.7.1) lib/sprockets/loader.rb:60:in `block in load'\nsprockets (3.7.1) lib/sprockets/loader.rb:317:in `fetch_asset_from_dependency_cache'\nsprockets (3.7.1) lib/sprockets/loader.rb:44:in `load'\nsprockets (3.7.1) lib/sprockets/cached_environment.rb:20:in `block in initialize'\n\nsprockets (3.7.1) lib/sprockets/cached_environment.rb:47:in `load'\nsprockets (3.7.1) lib/sprockets/base.rb:66:in `find_asset'\nsprockets (3.7.1) lib/sprockets/base.rb:92:in `[]'\nsprockets-rails (3.2.1) lib/sprockets/rails/helper.rb:355:in `find_asset'\nsprockets-rails (3.2.1) lib/sprockets/rails/helper.rb:347:in `find_debug_asset'\nsprockets-rails (3.2.1) lib/sprockets/rails/helper.rb:229:in `block in lookup_debug_asset'\nsprockets-rails (3.2.1) lib/sprockets/rails/helper.rb:242:in `block in resolve_asset'\nsprockets-rails (3.2.1) lib/sprockets/rails/helper.rb:241:in `resolve_asset'\nsprockets-rails (3.2.1) lib/sprockets/rails/helper.rb:228:in `lookup_debug_asset'\nsprockets-rails (3.2.1) lib/sprockets/rails/helper.rb:141:in `block in javascript_include_tag'\nsprockets-rails (3.2.1) lib/sprockets/rails/helper.rb:140:in `javascript_include_tag'\napp/views/layouts/application.html.erb:26:in `_app_views_layouts_application_html_erb___677905375_75171192'\nactionview (5.1.4) lib/action_view/template.rb:157:in `block in render'\nactivesupport (5.1.4) lib/active_support/notifications.rb:168:in `instrument'\nactionview (5.1.4) lib/action_view/template.rb:352:in `instrument_render_template'\nactionview (5.1.4) lib/action_view/template.rb:155:in `render'\nactionview (5.1.4) lib/action_view/renderer/template_renderer.rb:64:in `render_with_layout'\nactionview (5.1.4) lib/action_view/renderer/template_renderer.rb:50:in `render_template'\nactionview (5.1.4) lib/action_view/renderer/template_renderer.rb:14:in `render'\nactionview (5.1.4) lib/action_view/renderer/renderer.rb:42:in `render_template'\nactionview (5.1.4) lib/action_view/renderer/renderer.rb:23:in `render'\nactionview (5.1.4) lib/action_view/rendering.rb:103:in `_render_template'\nactionpack (5.1.4) lib/action_controller/metal/streaming.rb:217:in `_render_template'\nactionview (5.1.4) lib/action_view/rendering.rb:83:in `render_to_body'\nactionpack (5.1.4) lib/action_controller/metal/rendering.rb:52:in `render_to_body'\nactionpack (5.1.4) lib/action_controller/metal/renderers.rb:141:in `render_to_body'\nactionpack (5.1.4) lib/abstract_controller/rendering.rb:24:in `render'\nactionpack (5.1.4) lib/action_controller/metal/rendering.rb:36:in `render'\nactionpack (5.1.4) lib/action_controller/metal/instrumentation.rb:44:in `block (2 levels) in render'\nactivesupport (5.1.4) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'\nC:/RailsInstaller/Ruby2.3.3/lib/ruby/2.3.0/benchmark.rb:308:in `realtime'\nactivesupport (5.1.4) lib/active_support/core_ext/benchmark.rb:12:in `ms'\nactionpack (5.1.4) lib/action_controller/metal/instrumentation.rb:44:in `block in render'\nactionpack (5.1.4) lib/action_controller/metal/instrumentation.rb:87:in `cleanup_view_runtime'\nactiverecord (5.1.4) lib/active_record/railties/controller_runtime.rb:29:in `cleanup_view_runtime'\nactionpack (5.1.4) lib/action_controller/metal/instrumentation.rb:43:in `render'\nactionpack (5.1.4) lib/action_controller/metal/implicit_render.rb:33:in `default_render'\nactionpack (5.1.4) lib/action_controller/metal/basic_implicit_render.rb:4:in `block in send_action'\nactionpack (5.1.4) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'\nactionpack (5.1.4) lib/abstract_controller/base.rb:186:in `process_action'\nactionpack (5.1.4) lib/action_controller/metal/rendering.rb:30:in `process_action'\nactionpack (5.1.4) lib/abstract_controller/callbacks.rb:20:in `block in process_action'\nactivesupport (5.1.4) lib/active_support/callbacks.rb:131:in `run_callbacks'\nactionpack (5.1.4) lib/abstract_controller/callbacks.rb:19:in `process_action'\nactionpack (5.1.4) lib/action_controller/metal/rescue.rb:20:in `process_action'\nactionpack (5.1.4) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'\nactivesupport (5.1.4) lib/active_support/notifications.rb:166:in `block in instrument'\nactivesupport (5.1.4) lib/active_support/notifications/instrumenter.rb:21:in `instrument'\nactivesupport (5.1.4) lib/active_support/notifications.rb:166:in `instrument'\nactionpack (5.1.4) lib/action_controller/metal/instrumentation.rb:30:in `process_action'\nactionpack (5.1.4) lib/action_controller/metal/params_wrapper.rb:252:in `process_action'\nactiverecord (5.1.4) lib/active_record/railties/controller_runtime.rb:22:in `process_action'\nactionpack (5.1.4) lib/abstract_controller/base.rb:124:in `process'\nactionview (5.1.4) lib/action_view/rendering.rb:30:in `process'\nactionpack (5.1.4) lib/action_controller/metal.rb:189:in `dispatch'\nactionpack (5.1.4) lib/action_controller/metal.rb:253:in `dispatch'\nactionpack (5.1.4) lib/action_dispatch/routing/route_set.rb:49:in `dispatch'\nactionpack (5.1.4) lib/action_dispatch/routing/route_set.rb:31:in `serve'\nactionpack (5.1.4) lib/action_dispatch/journey/router.rb:50:in `block in serve'\nactionpack (5.1.4) lib/action_dispatch/journey/router.rb:33:in `serve'\nactionpack (5.1.4) lib/action_dispatch/routing/route_set.rb:834:in `call'\nrack (2.0.3) lib/rack/etag.rb:25:in `call'\nrack (2.0.3) lib/rack/conditional_get.rb:25:in `call'\nrack (2.0.3) lib/rack/head.rb:12:in `call'\nrack (2.0.3) lib/rack/session/abstract/id.rb:232:in `context'\nrack (2.0.3) lib/rack/session/abstract/id.rb:226:in `call'\nactionpack (5.1.4) lib/action_dispatch/middleware/cookies.rb:613:in `call'\nactiverecord (5.1.4) lib/active_record/migration.rb:556:in `call'\nactionpack (5.1.4) lib/action_dispatch/middleware/callbacks.rb:26:in `block in call'\nactivesupport (5.1.4) lib/active_support/callbacks.rb:97:in `run_callbacks'\nactionpack (5.1.4) lib/action_dispatch/middleware/callbacks.rb:24:in `call'\nactionpack (5.1.4) lib/action_dispatch/middleware/executor.rb:12:in `call'\nbetter_errors (2.3.0) lib/better_errors/middleware.rb:84:in `protected_app_call'\nbetter_errors (2.3.0) lib/better_errors/middleware.rb:79:in `better_errors_call'\nbetter_errors (2.3.0) lib/better_errors/middleware.rb:57:in `call'\nactionpack (5.1.4) lib/action_dispatch/middleware/debug_exceptions.rb:59:in `call'\nweb-console (3.5.1) lib/web_console/middleware.rb:135:in `call_app'\nweb-console (3.5.1) lib/web_console/middleware.rb:28:in `block in call'\nweb-console (3.5.1) lib/web_console/middleware.rb:18:in `call'\nactionpack (5.1.4) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'\nrailties (5.1.4) lib/rails/rack/logger.rb:36:in `call_app'\nrailties (5.1.4) lib/rails/rack/logger.rb:24:in `block in call'\nactivesupport (5.1.4) lib/active_support/tagged_logging.rb:69:in `block in tagged'\nactivesupport (5.1.4) lib/active_support/tagged_logging.rb:26:in `tagged'\nactivesupport (5.1.4) lib/active_support/tagged_logging.rb:69:in `tagged'\nrailties (5.1.4) lib/rails/rack/logger.rb:24:in `call'\nsprockets-rails (3.2.1) lib/sprockets/rails/quiet_assets.rb:13:in `call'\nactionpack (5.1.4) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'\nactionpack (5.1.4) lib/action_dispatch/middleware/request_id.rb:25:in `call'\nrack (2.0.3) lib/rack/method_override.rb:22:in `call'\nrack (2.0.3) lib/rack/runtime.rb:22:in `call'\nactivesupport (5.1.4) lib/active_support/cache/strategy/local_cache_middleware.rb:27:in `call'\nactionpack (5.1.4) lib/action_dispatch/middleware/executor.rb:12:in `call'\nrack-livereload (0.3.16) lib/rack/livereload.rb:23:in `_call'\nrack-livereload (0.3.16) lib/rack/livereload.rb:14:in `call'\nactionpack (5.1.4) lib/action_dispatch/middleware/static.rb:125:in `call'\nrack (2.0.3) lib/rack/sendfile.rb:111:in `call'\nrailties (5.1.4) lib/rails/engine.rb:522:in `call'\npuma (3.10.0) lib/puma/configuration.rb:225:in `call'\npuma (3.10.0) lib/puma/server.rb:605:in `handle_request'\npuma (3.10.0) lib/puma/server.rb:437:in `process_client'\npuma (3.10.0) lib/puma/server.rb:3enter code here01:in `block in run'\npuma (3.10.0) lib/puma/thread_pool.rb:120:in `block in spawn_thread'\n\nCompleted 200 OK in 11953ms (Views: 11941.5ms | ActiveRecord: 0.0ms)\n</code></pre>\n\n<p>How can I fix this?</p>\n"}, {"tags": ["sql", "ruby", "activerecord", "sinatra-activerecord"], "comments": [{"owner": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "edited": false, "score": 0, "creation_date": 1535907953, "post_id": 52139065, "comment_id": 91228088, "body": "<code>UserItem.where(user_id: :id).count</code> I suppose."}, {"owner": {"reputation": 13, "user_id": 10282224, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/446dce4ecf1ceb4de7d4f3579dfeda80?s=128&d=identicon&r=PG&f=1", "display_name": "Caliz", "link": "https://stackoverflow.com/users/10282224/caliz"}, "reply_to_user": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "edited": false, "score": 0, "creation_date": 1535908676, "post_id": 52139065, "comment_id": 91228307, "body": "That makes sense, but that then returns 0. Any other ideas?"}, {"owner": {"reputation": 4917, "user_id": 2320961, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AdwXN.png?s=128&g=1", "display_name": "Nic3500", "link": "https://stackoverflow.com/users/2320961/nic3500"}, "edited": false, "score": 1, "creation_date": 1535918019, "post_id": 52139065, "comment_id": 91230751, "body": "For SQL questions, please add the tables definitions, sample data, desired output, and what you tried."}, {"owner": {"reputation": 13, "user_id": 10282224, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/446dce4ecf1ceb4de7d4f3579dfeda80?s=128&d=identicon&r=PG&f=1", "display_name": "Caliz", "link": "https://stackoverflow.com/users/10282224/caliz"}, "edited": false, "score": 0, "creation_date": 1536011379, "post_id": 52139065, "comment_id": 91263324, "body": "I added an edit to my original post!"}], "answers": [{"comments": [{"owner": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "reply_to_user": {"reputation": 13, "user_id": 10282224, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/446dce4ecf1ceb4de7d4f3579dfeda80?s=128&d=identicon&r=PG&f=1", "display_name": "Caliz", "link": "https://stackoverflow.com/users/10282224/caliz"}, "edited": false, "score": 0, "creation_date": 1536040246, "post_id": 52139927, "comment_id": 91268735, "body": "@Caliz I added an edit. With <code>UserItem.group(:user_id).distinct.count</code> you get pure integers not active record object. You can use it as in my edit or you can map the hash to transform the keys into objects: <code>@user_items_count.map { |k,v| [User.find(k), v]}.to_h</code>, then iterate over it (it fires a lot of queries)."}, {"owner": {"reputation": 13, "user_id": 10282224, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/446dce4ecf1ceb4de7d4f3579dfeda80?s=128&d=identicon&r=PG&f=1", "display_name": "Caliz", "link": "https://stackoverflow.com/users/10282224/caliz"}, "edited": false, "score": 0, "creation_date": 1536080307, "post_id": 52139927, "comment_id": 91292464, "body": "@iGian Thank you so much!"}, {"owner": {"reputation": 3320, "user_id": 4950680, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/C8cEh.jpg?s=128&g=1", "display_name": "Martin Zinovsky", "link": "https://stackoverflow.com/users/4950680/martin-zinovsky"}, "reply_to_user": {"reputation": 13, "user_id": 10282224, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/446dce4ecf1ceb4de7d4f3579dfeda80?s=128&d=identicon&r=PG&f=1", "display_name": "Caliz", "link": "https://stackoverflow.com/users/10282224/caliz"}, "edited": false, "score": 0, "creation_date": 1536352501, "post_id": 52139927, "comment_id": 91408195, "body": "@Caliz mark it as an answer if it answers your question"}], "tags": [], "owner": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "is_accepted": true, "score": 3, "last_activity_date": 1596850738, "last_edit_date": 1596850738, "creation_date": 1535912842, "answer_id": 52139927, "question_id": 52139065, "link": "https://stackoverflow.com/questions/52139065/how-to-count-a-has-many-relationship-using-active-record/52139927#52139927", "title": "How to count a has_many relationship using active record?", "body": "<p>I assume you are having an <code>has_many :through</code> association between <code>User</code> and <code>Item</code> through <code>UserItem</code> and you need to show the list in a view of all users with the related item count.</p>\n<p>This is one option.</p>\n<p>In controller (ordered by item_count):</p>\n<pre><code>@users = User.joins(:user_items).group('user_items.user_id').select('users.*, COUNT(*) as item_count').order('item_count DESC')\n</code></pre>\n<p>In view (very basic):</p>\n<pre><code>&lt;% @users.each do |user| %&gt;\n  &lt;p&gt;&lt;%= user.name %&gt; | &lt;%= user.item_count %&gt;&lt;/p&gt;\n&lt;% end %&gt;\n</code></pre>\n<p>In my comment there is a syntax error, for counting the items of <code>@user</code>, if <code>id = @user.id</code>:</p>\n<pre><code>UserItem.where(user_id: id).count\n</code></pre>\n<hr>\n**Edit1:** To show also users with no items.\n<p>Option one, add to the above code the following, to fetch users with no items:</p>\n<pre><code>@users_without_items = User.includes(:items).where(items: {id: nil})\n\n&lt;% @users_without_items.each do |user| %&gt;\n  &lt;p&gt;&lt;%= user.name %&gt; | 0&lt;/p&gt;\n&lt;% end %&gt;\n</code></pre>\n<p>Or fetch all at once (not ordered, fires a lot of queries):</p>\n<pre><code>@user = User.all\n\n&lt;% @user.each do |user| %&gt;\n  &lt;p&gt;&lt;%= user %&gt; | &lt;%= user.categories.count %&gt;&lt;/p&gt;\n&lt;% end %&gt;\n</code></pre>\n<hr>\n**Edit2:** Fetching a hash of `{user_id => # of items per user}`\n<p>One option can be list all user and get the count from the hash by it's keys:</p>\n<pre><code>@user_items_count = UserItem.group(:user_id).count\n@users = User.all\n\n&lt;% @users.each do |user| %&gt;\n  &lt;p&gt;&lt;%= user.name %&gt; | &lt;%= @user_items_count[user.id] || 0 %&gt;&lt;/p&gt;\n&lt;% end %&gt;\n</code></pre>\n<hr>\n**Tested in `Rails` which uses `ActiveRecord` and `erb`.**\n"}], "owner": {"reputation": 13, "user_id": 10282224, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/446dce4ecf1ceb4de7d4f3579dfeda80?s=128&d=identicon&r=PG&f=1", "display_name": "Caliz", "link": "https://stackoverflow.com/users/10282224/caliz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1553, "favorite_count": 0, "accepted_answer_id": 52139927, "answer_count": 1, "score": 0, "last_activity_date": 1596850738, "creation_date": 1535906710, "last_edit_date": 1536011357, "question_id": 52139065, "link": "https://stackoverflow.com/questions/52139065/how-to-count-a-has-many-relationship-using-active-record", "title": "How to count a has_many relationship using active record?", "body": "<p>I have a join table that lists a <code>user_id</code> and an <code>item_id</code> (many-to-many relationship).</p>\n\n<p>I'm trying to show how many items a user owns on an erb page.</p>\n\n<p>How do I go about doing this?</p>\n\n<p>My join table/model UserItem has eleven records in right now, so obviously if I do <code>UserItem.count</code>, it gives me 11.</p>\n\n<p>But how can I tell it that for every user_id, count how many item_ids there are for THAT particular user? And then obviously I would iterate over this.</p>\n\n<p>EDIT:</p>\n\n<p>Ok I found that <code>UserItem.group(:user_id).distinct.count</code> gives me back hash of {user_id => # of items per user}.</p>\n\n<p>How do I not only iterate over the hash, but also make it so it associates it with each current user_id?</p>\n\n<pre><code>&lt;% @users.each do |user| %&gt;\n          &lt;li&gt;&lt;%= user.username %&gt;\n          has been to &lt;%= UserItem.group(:user_id).distinct.count %&gt;!&lt;/li&gt;\n        &lt;% end %&gt;\n</code></pre>\n\n<p>As of now, this just inserts the hash, how do I correspond each user_id so it aligns with the user.username it's showing?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 2885, "user_id": 3372172, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Q3RaO.png?s=128&g=1", "display_name": "Pablo", "link": "https://stackoverflow.com/users/3372172/pablo"}, "edited": false, "score": 0, "creation_date": 1535906807, "post_id": 52139033, "comment_id": 91227767, "body": "Can&#39;t you use <code>Artist.where(&quot;id % 4 = ?&quot;, 0)</code>?. Then 1, 2 and 3."}, {"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 0, "creation_date": 1535907103, "post_id": 52139033, "comment_id": 91227841, "body": "May be you can run as batches. See <a href=\"https://api.rubyonrails.org/classes/ActiveRecord/Batches.html\" rel=\"nofollow noreferrer\">api.rubyonrails.org/classes/ActiveRecord/Batches.html</a>"}, {"owner": {"reputation": 22592, "user_id": 147586, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e4f5d494ebdc9e7cce1aecf3ce3e8bc1?s=128&d=identicon&r=PG", "display_name": "Shpigford", "link": "https://stackoverflow.com/users/147586/shpigford"}, "reply_to_user": {"reputation": 2885, "user_id": 3372172, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Q3RaO.png?s=128&g=1", "display_name": "Pablo", "link": "https://stackoverflow.com/users/3372172/pablo"}, "edited": false, "score": 0, "creation_date": 1535907106, "post_id": 52139033, "comment_id": 91227843, "body": "@Pablo I believe that&#39;d get me duplicate IDs as numbers that are divisible by 4 would also be divisible by 2 and then <code>id % 1</code> would match basically every number."}, {"owner": {"reputation": 22592, "user_id": 147586, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e4f5d494ebdc9e7cce1aecf3ce3e8bc1?s=128&d=identicon&r=PG", "display_name": "Shpigford", "link": "https://stackoverflow.com/users/147586/shpigford"}, "reply_to_user": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 0, "creation_date": 1535907158, "post_id": 52139033, "comment_id": 91227858, "body": "@Pavan Totally. But this is for figuring out <i>which</i> batch to consistently run."}, {"owner": {"reputation": 13378, "user_id": 1430810, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/v669u.jpg?s=128&g=1", "display_name": "arieljuod", "link": "https://stackoverflow.com/users/1430810/arieljuod"}, "edited": false, "score": 0, "creation_date": 1535907221, "post_id": 52139033, "comment_id": 91227875, "body": "You don&#39;t need anyspecial criteria? I mean, it can be devided in 4 groups with no other conditions? why not just count the total, divide by 4 and use offset and limit to select each block?"}, {"owner": {"reputation": 109029, "user_id": 2767755, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/BkC8q.jpg?s=128&g=1", "display_name": "Arup Rakshit", "link": "https://stackoverflow.com/users/2767755/arup-rakshit"}, "edited": false, "score": 0, "creation_date": 1535910674, "post_id": 52139033, "comment_id": 91228872, "body": "Is there anychance that database gets new records in between 2 runs?"}], "answers": [{"tags": [], "owner": {"reputation": 13378, "user_id": 1430810, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/v669u.jpg?s=128&g=1", "display_name": "arieljuod", "link": "https://stackoverflow.com/users/1430810/arieljuod"}, "is_accepted": false, "score": 1, "last_activity_date": 1535907489, "creation_date": 1535907489, "answer_id": 52139180, "question_id": 52139033, "link": "https://stackoverflow.com/questions/52139033/divide-database-results-in-to-4-groups/52139180#52139180", "title": "Divide database results in to 4 groups", "body": "<p>You could just count the total, divide and use offset and limit:</p>\n\n<pre><code>group_amount = Model.all.count/4\n\nscope = Model.limit(group_amount)\n\nfirst_group = scope\nsecond_group = scope.offset(group_amount)\nthird_group = scope.offset(group_amount*2)\nfourth_group = Model.offset(group_amount*3) #not using limit in case you have new record on that table\n</code></pre>\n\n<p>I'm not sure it fill all your need, I don't know if you have some other criteria.</p>\n"}, {"comments": [{"owner": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "edited": false, "score": 0, "creation_date": 1535915053, "post_id": 52139233, "comment_id": 91230008, "body": "Smart approach!"}], "tags": [], "owner": {"reputation": 2885, "user_id": 3372172, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Q3RaO.png?s=128&g=1", "display_name": "Pablo", "link": "https://stackoverflow.com/users/3372172/pablo"}, "is_accepted": true, "score": 4, "last_activity_date": 1535907806, "creation_date": 1535907806, "answer_id": 52139233, "question_id": 52139033, "link": "https://stackoverflow.com/questions/52139033/divide-database-results-in-to-4-groups/52139233#52139233", "title": "Divide database results in to 4 groups", "body": "<p>Run these queries (one every 6 hours)</p>\n\n<pre><code>Artist.where(\"id % 4 = ?\", 0) #Run at 00:00\n\nArtist.where(\"id % 4 = ?\", 1) #Run at 06:00\n\nArtist.where(\"id % 4 = ?\", 2) #Run at 12:00\n\nArtist.where(\"id % 4 = ?\", 3) #Run at 18:00\n</code></pre>\n"}], "owner": {"reputation": 22592, "user_id": 147586, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e4f5d494ebdc9e7cce1aecf3ce3e8bc1?s=128&d=identicon&r=PG", "display_name": "Shpigford", "link": "https://stackoverflow.com/users/147586/shpigford"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "accepted_answer_id": 52139233, "answer_count": 2, "score": 0, "last_activity_date": 1535907806, "creation_date": 1535906452, "question_id": 52139033, "link": "https://stackoverflow.com/questions/52139033/divide-database-results-in-to-4-groups", "title": "Divide database results in to 4 groups", "body": "<p><em>(I have a Ruby/Rails/Postgres setup here.)</em></p>\n\n<p>I have a table of hundreds of thousands of artists and each day I run a background job that updates various external sources on those artists.</p>\n\n<p>Doing that all at once every day overwhelms those external APIs, so I want to divide up that table in to 4 groups and then run those background jobs 4 times a day (i.e. every 6 hours).</p>\n\n<p>How can I divide those database results in to 4 groups?</p>\n\n<p>Initially I was just going to do 2 groups and then query based on \"if artist ID is even/odd\", but not sure how to do it for 4 groups.</p>\n\n<p>Is there some sort of mathematical equation that can properly put any number in to one of 4 groups?</p>\n\n<p>Ideally I'd do this in the query itself (<code>Artist.where(\"id % 2 = ?\", \"0\")</code>), but if it makes more sense to filter the resulting array afterwards, that's fine as well.</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "edited": false, "score": 0, "creation_date": 1535893341, "post_id": 52136775, "comment_id": 91224174, "body": "Edited my answer, just in case: <a href=\"https://stackoverflow.com/a/52136832/5239030\">stackoverflow.com/a/52136832/5239030</a>"}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 1, "creation_date": 1535946337, "post_id": 52136775, "comment_id": 91235634, "body": "Your variable <code>num1</code> is always a string, never an integer or a float."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1535975367, "post_id": 52136775, "comment_id": 91248190, "body": "<code>gets</code> doesn&#39;t interpret the user input, it just returns a string."}], "answers": [{"tags": [], "owner": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "is_accepted": false, "score": 2, "last_activity_date": 1535978238, "last_edit_date": 1535978238, "creation_date": 1535889882, "answer_id": 52136832, "question_id": 52136775, "link": "https://stackoverflow.com/questions/52136775/how-to-check-if-variable-is-an-integer-or-float/52136832#52136832", "title": "How to check if variable is an Integer or Float", "body": "<p>In general, one option:</p>\n\n<pre><code>10.class == Integer # =&gt; true\n10.5.class == Float # =&gt; true\n</code></pre>\n\n<p>Or, another:</p>\n\n<pre><code>10.is_a? Integer # =&gt; true\n10.5.is_a? Float # =&gt; true\n</code></pre>\n\n<p>But since the input is a string, this can be a possible solution to check if a string is an integer or a float number, monkey patching the <code>String</code> class:</p>\n\n<pre><code>module StringFloatOrInteger\n  def integer_or_float?\n   begin !!Float(self) rescue false end\n  end\n\n  def integer_not_float?\n    begin !!Integer(self) rescue false end  \n  end\n\n  def integer?\n    integer_not_float? &amp; integer_or_float?\n  end\n\n  def float?\n    !integer_not_float? &amp; integer_or_float?\n  end\nend\n\nString.include StringFloatOrInteger\n\n\"home\".integer? # =&gt; false\n\"home\".float? # =&gt; false\n\"10\".integer? # =&gt; true\n\"10\".float? # =&gt; false\n\"10.5\".integer? # =&gt; false\n\"10.5\".float? # =&gt; true\n</code></pre>\n\n<p>In your case, you can use like this, asking n times for the input</p>\n\n<pre><code>def get_integer\n  2.times do # or whatever times\n    puts \"Please enter an integer: \"\n    input = gets.chomp\n    return input.to_i if input.integer?\n  end\n  return nil # or whatever\nend\n\nnumber = get_integer\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1535946423, "post_id": 52136862, "comment_id": 91235652, "body": "Exactly. This is literally correct. However, it is not actually what the OP wanted."}], "tags": [], "owner": {"reputation": 307, "user_id": 10162178, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b1301a136b761284efba487a6e391827?s=128&d=identicon&r=PG&f=1", "display_name": "Pallav Kabra", "link": "https://stackoverflow.com/users/10162178/pallav-kabra"}, "is_accepted": false, "score": 2, "last_activity_date": 1535890094, "creation_date": 1535890094, "answer_id": 52136862, "question_id": 52136775, "link": "https://stackoverflow.com/questions/52136775/how-to-check-if-variable-is-an-integer-or-float/52136862#52136862", "title": "How to check if variable is an Integer or Float", "body": "<p>If you want to check if a variable is of certain type, you can simply use\u00a0kind_of?:</p>\n\n<pre><code>1.kind_of? Integer #true\n\n\n(1.5).kind_of? Float #true\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 10252036, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-vqsrsLNM56s/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaOj0PLKTFp-_zs4ScCl5Tdy14DhfA/mo/photo.jpg?sz=128", "display_name": "Uno", "link": "https://stackoverflow.com/users/10252036/uno"}, "edited": false, "score": 0, "creation_date": 1535890503, "post_id": 52136871, "comment_id": 91223443, "body": "My god, you just made me realize what I&#39;ve been doing wrong. If num1 were a letter, would that statement still work? Let&#39;s say if I inputted &quot;a&quot; as num1, would it still convert to a float?"}, {"owner": {"reputation": 2585, "user_id": 696257, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/oN4Zu.png?s=128&g=1", "display_name": "dkulkarni", "link": "https://stackoverflow.com/users/696257/dkulkarni"}, "reply_to_user": {"reputation": 1, "user_id": 10252036, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-vqsrsLNM56s/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaOj0PLKTFp-_zs4ScCl5Tdy14DhfA/mo/photo.jpg?sz=128", "display_name": "Uno", "link": "https://stackoverflow.com/users/10252036/uno"}, "edited": false, "score": 0, "creation_date": 1535890594, "post_id": 52136871, "comment_id": 91223463, "body": "Nope, it&#39;ll return 0.0. Check the begin/rescue that I have added. You&#39;ll have to rescue <code>ArgumentError</code>"}, {"owner": {"reputation": 1, "user_id": 10252036, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-vqsrsLNM56s/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaOj0PLKTFp-_zs4ScCl5Tdy14DhfA/mo/photo.jpg?sz=128", "display_name": "Uno", "link": "https://stackoverflow.com/users/10252036/uno"}, "edited": false, "score": 0, "creation_date": 1535891415, "post_id": 52136871, "comment_id": 91223657, "body": "Alright, one last thing, if I wanted to check if the rescue was fired, how would I go about doing that?"}, {"owner": {"reputation": 2585, "user_id": 696257, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/oN4Zu.png?s=128&g=1", "display_name": "dkulkarni", "link": "https://stackoverflow.com/users/696257/dkulkarni"}, "reply_to_user": {"reputation": 1, "user_id": 10252036, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-vqsrsLNM56s/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaOj0PLKTFp-_zs4ScCl5Tdy14DhfA/mo/photo.jpg?sz=128", "display_name": "Uno", "link": "https://stackoverflow.com/users/10252036/uno"}, "edited": false, "score": 0, "creation_date": 1535891801, "post_id": 52136871, "comment_id": 91223742, "body": "I have updated my answer to do what you&#39;re looking for. Hopefully that helps?"}, {"owner": {"reputation": 1, "user_id": 10252036, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-vqsrsLNM56s/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaOj0PLKTFp-_zs4ScCl5Tdy14DhfA/mo/photo.jpg?sz=128", "display_name": "Uno", "link": "https://stackoverflow.com/users/10252036/uno"}, "edited": false, "score": 0, "creation_date": 1535892336, "post_id": 52136871, "comment_id": 91223898, "body": "Actually answered a different question I had in mind and it does work better. Thank you so much. Is there an alternative to Fixnum as it is deprecated. Or is it fine as is?"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1535975524, "post_id": 52136871, "comment_id": 91248287, "body": "In your second example, <code>input.is_a?(Fixnum)</code> will initially <i>never</i> be <code>true</code>."}], "tags": [], "owner": {"reputation": 2585, "user_id": 696257, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/oN4Zu.png?s=128&g=1", "display_name": "dkulkarni", "link": "https://stackoverflow.com/users/696257/dkulkarni"}, "is_accepted": true, "score": 0, "last_activity_date": 1535891766, "last_edit_date": 1535891766, "creation_date": 1535890212, "answer_id": 52136871, "question_id": 52136775, "link": "https://stackoverflow.com/questions/52136775/how-to-check-if-variable-is-an-integer-or-float/52136871#52136871", "title": "How to check if variable is an Integer or Float", "body": "<p>Since the input is a string, you will need to first convert them to an integer or float</p>\n\n<p>So if you do the following and the input is \"hello\", it would return <code>0.0</code></p>\n\n<pre><code>num1 = gets.chomp.to_f\n</code></pre>\n\n<p>If you would like to validate strictly if it is an integer, then you can do so by</p>\n\n<pre><code>input = gets.chomp\nuntil input.is_a?(Fixnum) do\n print \"Please enter a number: \"\n input = Integer(gets.chomp) rescue nil\nend\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 10252036, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-vqsrsLNM56s/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaOj0PLKTFp-_zs4ScCl5Tdy14DhfA/mo/photo.jpg?sz=128", "display_name": "Uno", "link": "https://stackoverflow.com/users/10252036/uno"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4973, "favorite_count": 1, "accepted_answer_id": 52136871, "answer_count": 3, "score": -1, "last_activity_date": 1535978238, "creation_date": 1535889267, "last_edit_date": 1535946267, "question_id": 52136775, "link": "https://stackoverflow.com/questions/52136775/how-to-check-if-variable-is-an-integer-or-float", "title": "How to check if variable is an Integer or Float", "body": "<p>I want to check if my variable is either an integer or float. This is for a calculator. I don't want it to be looping indefinitely.</p>\n\n<p>How would I do so? I tried to do the following:</p>\n\n<pre><code>puts \"Enter a number: \"\nnum1 = gets.chomp()\nwhile !(num1 == Integer.superclass or num1 == Float.superclass)\n  puts \"Enter an actual number: \"\n  num1 = gets.chomp()\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "cloud9"], "comments": [{"owner": {"reputation": 689, "user_id": 2875377, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4a9d994f85c436f7bf13c592e6b8989e?s=128&d=identicon&r=PG&f=1", "display_name": "praga2050", "link": "https://stackoverflow.com/users/2875377/praga2050"}, "edited": false, "score": 0, "creation_date": 1535866524, "post_id": 52134219, "comment_id": 91218675, "body": "You checked adding debugger in UI.. ? Where you put the code for Flash message."}, {"owner": {"reputation": 13, "user_id": 10305511, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-74E5Dsv0iV8/AAAAAAAAAAI/AAAAAAAAAAc/xNx5P_fe8m4/photo.jpg?sz=128", "display_name": "Mr. Kidney", "link": "https://stackoverflow.com/users/10305511/mr-kidney"}, "reply_to_user": {"reputation": 689, "user_id": 2875377, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4a9d994f85c436f7bf13c592e6b8989e?s=128&d=identicon&r=PG&f=1", "display_name": "praga2050", "link": "https://stackoverflow.com/users/2875377/praga2050"}, "edited": false, "score": 0, "creation_date": 1535866873, "post_id": 52134219, "comment_id": 91218706, "body": "I added debugger in UI as you said"}, {"owner": {"reputation": 13, "user_id": 10305511, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-74E5Dsv0iV8/AAAAAAAAAAI/AAAAAAAAAAc/xNx5P_fe8m4/photo.jpg?sz=128", "display_name": "Mr. Kidney", "link": "https://stackoverflow.com/users/10305511/mr-kidney"}, "reply_to_user": {"reputation": 689, "user_id": 2875377, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4a9d994f85c436f7bf13c592e6b8989e?s=128&d=identicon&r=PG&f=1", "display_name": "praga2050", "link": "https://stackoverflow.com/users/2875377/praga2050"}, "edited": false, "score": 0, "creation_date": 1535866891, "post_id": 52134219, "comment_id": 91218712, "body": "&lt;%= debug(flash) if Rails.env.development? %&gt; in the page for the flash message"}, {"owner": {"reputation": 13, "user_id": 10305511, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-74E5Dsv0iV8/AAAAAAAAAAI/AAAAAAAAAAc/xNx5P_fe8m4/photo.jpg?sz=128", "display_name": "Mr. Kidney", "link": "https://stackoverflow.com/users/10305511/mr-kidney"}, "reply_to_user": {"reputation": 689, "user_id": 2875377, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4a9d994f85c436f7bf13c592e6b8989e?s=128&d=identicon&r=PG&f=1", "display_name": "praga2050", "link": "https://stackoverflow.com/users/2875377/praga2050"}, "edited": false, "score": 0, "creation_date": 1535866914, "post_id": 52134219, "comment_id": 91218718, "body": "And that says: --- !ruby/object:ActionDispatch::Flash::FlashHash discard: !ruby/object:Set   hash: {} flashes: {} now:"}, {"owner": {"reputation": 689, "user_id": 2875377, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4a9d994f85c436f7bf13c592e6b8989e?s=128&d=identicon&r=PG&f=1", "display_name": "praga2050", "link": "https://stackoverflow.com/users/2875377/praga2050"}, "edited": false, "score": 0, "creation_date": 1535866996, "post_id": 52134219, "comment_id": 91218733, "body": "You hash and flashes are empty..... See this is my debug result in my UI           --- !ruby/object:ActionDispatch::Flash::FlashHash discard: !ruby/object:Set   hash:     success: true flashes:   success: Sign up success. WELCOME! now:"}, {"owner": {"reputation": 13, "user_id": 10305511, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-74E5Dsv0iV8/AAAAAAAAAAI/AAAAAAAAAAc/xNx5P_fe8m4/photo.jpg?sz=128", "display_name": "Mr. Kidney", "link": "https://stackoverflow.com/users/10305511/mr-kidney"}, "reply_to_user": {"reputation": 689, "user_id": 2875377, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4a9d994f85c436f7bf13c592e6b8989e?s=128&d=identicon&r=PG&f=1", "display_name": "praga2050", "link": "https://stackoverflow.com/users/2875377/praga2050"}, "edited": false, "score": 0, "creation_date": 1535867175, "post_id": 52134219, "comment_id": 91218756, "body": "then can I think this as a problem of AWS cloud9?"}, {"owner": {"reputation": 689, "user_id": 2875377, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4a9d994f85c436f7bf13c592e6b8989e?s=128&d=identicon&r=PG&f=1", "display_name": "praga2050", "link": "https://stackoverflow.com/users/2875377/praga2050"}, "edited": false, "score": 0, "creation_date": 1535867509, "post_id": 52134219, "comment_id": 91218815, "body": "you are testing in your local only right? and flash message code must be in your application.html.erb. See if my below answer helps you.. also attached screenshot"}, {"owner": {"reputation": 13, "user_id": 10305511, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-74E5Dsv0iV8/AAAAAAAAAAI/AAAAAAAAAAc/xNx5P_fe8m4/photo.jpg?sz=128", "display_name": "Mr. Kidney", "link": "https://stackoverflow.com/users/10305511/mr-kidney"}, "reply_to_user": {"reputation": 689, "user_id": 2875377, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4a9d994f85c436f7bf13c592e6b8989e?s=128&d=identicon&r=PG&f=1", "display_name": "praga2050", "link": "https://stackoverflow.com/users/2875377/praga2050"}, "edited": false, "score": 0, "creation_date": 1535867675, "post_id": 52134219, "comment_id": 91218837, "body": "flash message must be in my application.html.erb ? Then It should be the problem. Because I embeded those erb code in show.html.erb, which is my user-profile page. I&#39;ll test it."}, {"owner": {"reputation": 13, "user_id": 10305511, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-74E5Dsv0iV8/AAAAAAAAAAI/AAAAAAAAAAc/xNx5P_fe8m4/photo.jpg?sz=128", "display_name": "Mr. Kidney", "link": "https://stackoverflow.com/users/10305511/mr-kidney"}, "reply_to_user": {"reputation": 689, "user_id": 2875377, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4a9d994f85c436f7bf13c592e6b8989e?s=128&d=identicon&r=PG&f=1", "display_name": "praga2050", "link": "https://stackoverflow.com/users/2875377/praga2050"}, "edited": false, "score": 0, "creation_date": 1535867991, "post_id": 52134219, "comment_id": 91218877, "body": "Still not working... I&#39;m about to die"}, {"owner": {"reputation": 689, "user_id": 2875377, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4a9d994f85c436f7bf13c592e6b8989e?s=128&d=identicon&r=PG&f=1", "display_name": "praga2050", "link": "https://stackoverflow.com/users/2875377/praga2050"}, "edited": false, "score": 0, "creation_date": 1535868324, "post_id": 52134219, "comment_id": 91218923, "body": "After adding in application.html.erb also you see hash &amp; flashes empty?"}, {"owner": {"reputation": 13, "user_id": 10305511, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-74E5Dsv0iV8/AAAAAAAAAAI/AAAAAAAAAAc/xNx5P_fe8m4/photo.jpg?sz=128", "display_name": "Mr. Kidney", "link": "https://stackoverflow.com/users/10305511/mr-kidney"}, "reply_to_user": {"reputation": 689, "user_id": 2875377, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4a9d994f85c436f7bf13c592e6b8989e?s=128&d=identicon&r=PG&f=1", "display_name": "praga2050", "link": "https://stackoverflow.com/users/2875377/praga2050"}, "edited": false, "score": 0, "creation_date": 1535868692, "post_id": 52134219, "comment_id": 91218966, "body": "yes. here is my try: <a href=\"https://imgur.com/a/ZyvQ1dU\" rel=\"nofollow noreferrer\">imgur.com/a/ZyvQ1dU</a>     /    Code in my application.html.erb: <a href=\"https://imgur.com/a/mLx6U2r\" rel=\"nofollow noreferrer\">imgur.com/a/mLx6U2r</a>"}, {"owner": {"reputation": 111, "user_id": 3630282, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/c34fa8a2240e57d0732142034b61ab53?s=128&d=identicon&r=PG", "display_name": "Luis Flores", "link": "https://stackoverflow.com/users/3630282/luis-flores"}, "edited": false, "score": 0, "creation_date": 1611085070, "post_id": 52134219, "comment_id": 116335649, "body": "I have the same problem, flash.each is in my application.html.er since the beginning and other pages flashes work fine, only when redirecting from a validation fail I cannot see any flash... redirect_to some_path(@something), notice: &quot;message&quot; WORKS, Please help us (It is very frustrating)"}], "answers": [{"tags": [], "owner": {"reputation": 689, "user_id": 2875377, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4a9d994f85c436f7bf13c592e6b8989e?s=128&d=identicon&r=PG&f=1", "display_name": "praga2050", "link": "https://stackoverflow.com/users/2875377/praga2050"}, "is_accepted": true, "score": -2, "last_activity_date": 1535895732, "last_edit_date": 1535895732, "creation_date": 1535867443, "answer_id": 52134342, "question_id": 52134219, "link": "https://stackoverflow.com/questions/52134219/rails-5-flash-message-not-working-with-redirect-to/52134342#52134342", "title": "Rails 5 flash message not working with redirect_to", "body": "<p>I added the flash code to my <code>application.html.erb</code> </p>\n\n<pre><code>&lt;%= debug(flash) if Rails.env.development? %&gt;\n&lt;% flash.each do |key, value| %&gt;\n  &lt;% if key=='success' %&gt;\n    &lt;div class=\"alert alert-success\" role=\"alert\"&gt;\n      &lt;i class=\"close icon\"&gt;&lt;/i&gt;\n      &lt;div class=\"header\"&gt;&lt;%= value %&gt;&lt;/div&gt;\n      &lt;p&gt;HALLO&lt;/p&gt;\n    &lt;/div&gt;\n  &lt;% end %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>Screenshot is here \n<a href=\"https://i.stack.imgur.com/YLdzY.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/YLdzY.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 13, "user_id": 10305511, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-74E5Dsv0iV8/AAAAAAAAAAI/AAAAAAAAAAc/xNx5P_fe8m4/photo.jpg?sz=128", "display_name": "Mr. Kidney", "link": "https://stackoverflow.com/users/10305511/mr-kidney"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 665, "favorite_count": 0, "accepted_answer_id": 52134342, "answer_count": 1, "score": -1, "last_activity_date": 1535895732, "creation_date": 1535865812, "last_edit_date": 1535895511, "question_id": 52134219, "link": "https://stackoverflow.com/questions/52134219/rails-5-flash-message-not-working-with-redirect-to", "title": "Rails 5 flash message not working with redirect_to", "body": "<pre><code># users_controller.rb\n\ndef create\n    @user = User.new(name: params[:name],\n      email: params[:email],\n      password: params[:password],\n      password_confirmation: params[:password_confirmation])\n    if @user.save\n      # successfully saved\n      flash[:success] = \"Sign up success. WELCOME!\" # problem\n      redirect_to user_path(@user.id)\n    else\n      @error_messages = @user.errors.full_messages\n      flash[:danger] = \"Sign up failed.\"\n      render 'new'\n    end\n    debugger\nend\n</code></pre>\n\n<p>Hi, I'm using Rails 5.2.0, ruby 2.4.1 and working on AWS cloud9 environment. <strong>This is the code about controller for sign-up page.</strong> As you see, the controller takes the information from HTML form and make a @user variable, and save it when it meets the condition I made in <em>app/models/user.rb</em>. I used debugger to test if there is flash[:success] nicely, and debugger says </p>\n\n<pre><code>(byebug) flash\n#&lt;ActionDispatch::Flash::FlashHash:0x007f90180a8fe8 @discard=#&lt;Set: {}&gt;, @flashes={\"success\"=&gt;\"Sign up success. WELCOME!\"}, @now=nil&gt;\n</code></pre>\n\n<p>so I can know there is a flash message.</p>\n\n<p>I want to show a sign up success message on that redirected page. But It doesn't work as I expected.</p>\n\n<pre><code>&lt;!-- This is the page when sign up succeed, using semantic-ui --&gt;\n\n&lt;% flash.each do |key, value| %&gt;\n    &lt;% if key=='success' %&gt;\n        &lt;div class=\"ui positive message\"&gt;\n            &lt;i class=\"close icon\"&gt;&lt;/i&gt;\n            &lt;div class=\"header\"&gt;&lt;%= value %&gt;&lt;/div&gt;\n            &lt;p&gt;HALLO&lt;/p&gt;\n        &lt;/div&gt;\n    &lt;% end %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>This code render nothing on the page, What's gone wrong with this code?\nI've already spent over 3 hours to figure out the solution and also read about similar cases on stackoverflow but it doesn't solved my problem.</p>\n\n<p>Am I missing something?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rails-activerecord"], "answers": [{"tags": [], "owner": {"reputation": 689, "user_id": 2875377, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4a9d994f85c436f7bf13c592e6b8989e?s=128&d=identicon&r=PG&f=1", "display_name": "praga2050", "link": "https://stackoverflow.com/users/2875377/praga2050"}, "is_accepted": true, "score": 0, "last_activity_date": 1535865776, "creation_date": 1535865776, "answer_id": 52134214, "question_id": 52133508, "link": "https://stackoverflow.com/questions/52133508/what-is-causing-this-error-with-my-active-record-associations-when-i-use-model-c/52134214#52134214", "title": "What is causing this error with my Active Record associations when I use model.collection.build?", "body": "<p>You need to build positions like this</p>\n\n<pre><code>user = User.first\nportfolio_attributes = {name: 'Portfolio_1'}\nposition_attributes = {name: 'Postion_1'}\nuser.portfolios.build(portfolio_attributes).positions.build(position_attributes)\nuser.save!\n</code></pre>\n\n<p>When i run user.positions i get the below result </p>\n\n<pre><code>user.positions\n  Position Load (0.6ms)  SELECT  \"positions\".* FROM \"positions\" INNER JOIN \"portfolios\" ON \"positions\".\"portfolio_id\" = \"portfolios\".\"id\" WHERE \"portfolios\".\"user_id\" = ? LIMIT ?  [[\"user_id\", nil], [\"LIMIT\", nil]]\n =&gt; #&lt;ActiveRecord::Associations::CollectionProxy [#&lt;Position id: 1, name: \"Postion_1\", portfolio_id: 1&gt;]&gt; \n</code></pre>\n"}], "owner": {"reputation": 89, "user_id": 7748052, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/b9d41f5566a41e87d5920d707ee431f5?s=128&d=identicon&r=PG&f=1", "display_name": "user211309", "link": "https://stackoverflow.com/users/7748052/user211309"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "accepted_answer_id": 52134214, "answer_count": 1, "score": 0, "last_activity_date": 1537215157, "creation_date": 1535855103, "last_edit_date": 1537215157, "question_id": 52133508, "link": "https://stackoverflow.com/questions/52133508/what-is-causing-this-error-with-my-active-record-associations-when-i-use-model-c", "title": "What is causing this error with my Active Record associations when I use model.collection.build?", "body": "<p>In my project, I have the following three classes:</p>\n\n<pre><code>class User &lt; ApplicationRecord\n  has_many :portfolios, dependent: :destroy\n  has_many :positions, through: :portfolios\nend\n\nclass Portfolio &lt; ApplicationRecord\n  belongs_to :user\n  has_many :positions, dependent: :destroy\nend \n\nclass Position &lt; ApplicationRecord\n  belongs_to :portfolio\nend\n</code></pre>\n\n<p>When I try to build a position directly off the user model (<code>user.positions.build(attributes)</code>) by passing in an existing portfolio_id as one of the attributes, I get the following error:</p>\n\n<pre><code>ActiveRecord::HasManyThroughCantAssociateThroughHasOneOrManyReflection (Cannot modify association 'User#positions' because the source reflection class 'Position' is associated to 'Portfolio' via :has_many.\n</code></pre>\n\n<p>Why would this happen? I feel there's something to be learned here but I don't really get it! </p>\n\n<p>Addendum: I think my associations make sense: a portfolio should only belong to one user, a position to only one portfolio, and a portfolio should have multiple positions and a user multiple portfolios. </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rubygems"], "comments": [{"owner": {"reputation": 3521, "user_id": 2521680, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/6D935.jpg?s=128&g=1", "display_name": "Rockwell Rice", "link": "https://stackoverflow.com/users/2521680/rockwell-rice"}, "edited": false, "score": 0, "creation_date": 1535843499, "post_id": 52132817, "comment_id": 91216155, "body": "What version of <code>byebug</code> is in you Gemfile.lock file?  You may need to run <code>bundle update</code> and then <code>bundle install</code>."}, {"owner": {"reputation": 23, "user_id": 8678219, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/861f19a488a27405873e21f43821b013?s=128&d=identicon&r=PG&f=1", "display_name": "Greg", "link": "https://stackoverflow.com/users/8678219/greg"}, "reply_to_user": {"reputation": 3521, "user_id": 2521680, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/6D935.jpg?s=128&g=1", "display_name": "Rockwell Rice", "link": "https://stackoverflow.com/users/2521680/rockwell-rice"}, "edited": false, "score": 0, "creation_date": 1535843962, "post_id": 52132817, "comment_id": 91216211, "body": "I have <code>byebug (9.0.6)</code> currently in my gemfile.lock, I ran a <code>bundle update</code> and then a <code>bundle install</code> but still ran into the same issue"}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 8678219, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/861f19a488a27405873e21f43821b013?s=128&d=identicon&r=PG&f=1", "display_name": "Greg", "link": "https://stackoverflow.com/users/8678219/greg"}, "edited": false, "score": 0, "creation_date": 1535845660, "post_id": 52132947, "comment_id": 91216409, "body": "I ran with that command but it is giving me the same error :|"}, {"owner": {"reputation": 404, "user_id": 1823679, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14ee4b604bf48e32fbae4b4e603967a0?s=128&d=identicon&r=PG", "display_name": "madoxer", "link": "https://stackoverflow.com/users/1823679/madoxer"}, "reply_to_user": {"reputation": 23, "user_id": 8678219, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/861f19a488a27405873e21f43821b013?s=128&d=identicon&r=PG&f=1", "display_name": "Greg", "link": "https://stackoverflow.com/users/8678219/greg"}, "edited": false, "score": 0, "creation_date": 1535846260, "post_id": 52132947, "comment_id": 91216465, "body": "If you have only rails gem in your Gemfile, the same error occurs ?"}, {"owner": {"reputation": 23, "user_id": 8678219, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/861f19a488a27405873e21f43821b013?s=128&d=identicon&r=PG&f=1", "display_name": "Greg", "link": "https://stackoverflow.com/users/8678219/greg"}, "edited": false, "score": 0, "creation_date": 1535846353, "post_id": 52132947, "comment_id": 91216476, "body": "It gives me a new error : /Users/usr/.gem/ruby/2.3.0/gems/activesupport-5.1.6/lib/acti&zwnj;&#8203;ve_support/dependenc&zwnj;&#8203;ies.rb:292:in require&#39;: Could not load the &#39;listen&#39; gem. Add gem &#39;listen&#39;` to the development group of your Gemfile (LoadError)"}, {"owner": {"reputation": 404, "user_id": 1823679, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14ee4b604bf48e32fbae4b4e603967a0?s=128&d=identicon&r=PG", "display_name": "madoxer", "link": "https://stackoverflow.com/users/1823679/madoxer"}, "reply_to_user": {"reputation": 23, "user_id": 8678219, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/861f19a488a27405873e21f43821b013?s=128&d=identicon&r=PG&f=1", "display_name": "Greg", "link": "https://stackoverflow.com/users/8678219/greg"}, "edited": false, "score": 0, "creation_date": 1535846818, "post_id": 52132947, "comment_id": 91216518, "body": "ok, try to add now same gems like before but without copy/pasting them."}, {"owner": {"reputation": 23, "user_id": 8678219, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/861f19a488a27405873e21f43821b013?s=128&d=identicon&r=PG&f=1", "display_name": "Greg", "link": "https://stackoverflow.com/users/8678219/greg"}, "edited": false, "score": 0, "creation_date": 1535847467, "post_id": 52132947, "comment_id": 91216589, "body": "<code>puma</code> works fine, but with anything else i get the Could not find gem &#39;uglifier3.2.0&#39; in any of the gem sources listed in your Gemfile. error"}], "tags": [], "owner": {"reputation": 404, "user_id": 1823679, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14ee4b604bf48e32fbae4b4e603967a0?s=128&d=identicon&r=PG", "display_name": "madoxer", "link": "https://stackoverflow.com/users/1823679/madoxer"}, "is_accepted": false, "score": 0, "last_activity_date": 1535845218, "creation_date": 1535845218, "answer_id": 52132947, "question_id": 52132817, "link": "https://stackoverflow.com/questions/52132817/rails-cannot-find-gems-even-after-bundle-install/52132947#52132947", "title": "rails cannot find gems even after bundle install", "body": "<p>You should run your rails server with <code>bundle exec rails s</code> to be in the context of the bundle.</p>\n"}], "owner": {"reputation": 23, "user_id": 8678219, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/861f19a488a27405873e21f43821b013?s=128&d=identicon&r=PG&f=1", "display_name": "Greg", "link": "https://stackoverflow.com/users/8678219/greg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 582, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1535845218, "creation_date": 1535843263, "question_id": 52132817, "link": "https://stackoverflow.com/questions/52132817/rails-cannot-find-gems-even-after-bundle-install", "title": "rails cannot find gems even after bundle install", "body": "<p>I am currently trying to start my rails server after doing a <code>bundle install</code>. However, when I try to do <code>rails s</code>, this error pops up</p>\n\n<p><code>Could not find gem 'byebug (= 9.0.6)' in any of the gem sources listed in your Gemfile. Run bundle install to install missing gems.</code></p>\n\n<p>I then run <code>bundle install</code> but the same error pops up. I've also tried getting rid of <code>byebug</code> in the gemfile but it just gives me the same error but with a different gem. I've tried installing byebug individually using <code>gem install byebug -v 9.0.6</code> but the same problem persists.</p>\n\n<p>This is my gemfile</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>source 'https://rubygems.org'\r\n\r\ngem 'rails',        '5.1.6'\r\ngem 'puma',         '3.9.1'\r\ngem 'sass-rails',   '5.0.6'\r\ngem 'uglifier',     '3.2.0'\r\ngem 'coffee-rails', '4.2.2'\r\ngem 'jquery-rails', '4.3.1'\r\ngem 'turbolinks',   '5.0.1'\r\ngem 'jbuilder',     '2.7.0'\r\n\r\ngroup :development, :test do\r\n  gem 'sqlite3', '1.3.12'\r\n  # Call 'byebug' anywhere in the code to stop execution and get a debugger console\r\n  gem 'byebug',  '9.0.6', platform: :mri \r\nend\r\n\r\ngroup :development do\r\n  gem 'web-console',           '3.5.1'\r\n  gem 'listen',                '3.1.5'\r\n  gem 'spring',                '2.0.2'\r\n  gem 'spring-watcher-listen', '2.0.1'\r\nend\r\n\r\n# Windows does not include zoneinfo files, so bundle the tzinfo-data gem\r\ngem 'tzinfo-data', platforms: [:mingw, :mswin, :x64_mingw, :jruby]</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}, {"tags": ["ruby"], "answers": [{"comments": [{"owner": {"reputation": 8804, "user_id": 649737, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3ffb1bb7b9f96cd3b1ca567899f9d256?s=128&d=identicon&r=PG", "display_name": "Leron_says_get_back_Monica", "link": "https://stackoverflow.com/users/649737/leron-says-get-back-monica"}, "edited": false, "score": 0, "creation_date": 1535838971, "post_id": 52132412, "comment_id": 91215359, "body": "Thanks, I was wondering about this option. Is it OK to include lambdas in method definition?"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 8804, "user_id": 649737, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3ffb1bb7b9f96cd3b1ca567899f9d256?s=128&d=identicon&r=PG", "display_name": "Leron_says_get_back_Monica", "link": "https://stackoverflow.com/users/649737/leron-says-get-back-monica"}, "edited": false, "score": 1, "creation_date": 1535839191, "post_id": 52132412, "comment_id": 91215413, "body": "@Leron: the <code>&amp;block</code>? It&#39;s not your lambda anymore. In this case, it&#39;s a Proc object, which is made from the method&#39;s block (which, in turn, comes from your lambda). And yes, it&#39;s a common thing to see in ruby code."}, {"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 1, "creation_date": 1535849664, "post_id": 52132412, "comment_id": 91216840, "body": "Probably worth noting that you don&#39;t use parentheses like that when calling a lambda, hence the NoMethodError. You use brackets (<code>some_lamba[arg]</code>), <code>#call</code> (<code>some_lambda.call(arg)</code>), or  dot-parentheses (<code>some_lambda.(arg)</code>)."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1535875431, "post_id": 52132412, "comment_id": 91220076, "body": "@muistooshort: ah yes, totally."}], "tags": [], "owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "is_accepted": true, "score": 5, "last_activity_date": 1535838296, "creation_date": 1535838296, "answer_id": 52132412, "question_id": 52132380, "link": "https://stackoverflow.com/questions/52132380/using-lambda-inside-ruby-method/52132412#52132412", "title": "Using lambda inside Ruby method", "body": "<blockquote>\n  <p>I would like to know if indeed it is possible to do use lambda this way</p>\n</blockquote>\n\n<p>Yes.</p>\n\n<blockquote>\n  <p>and if yes, where did my logic fail?</p>\n</blockquote>\n\n<p>By passing the lambda as <code>&amp;is_odd</code>, you're turning it into a block of the method. So, use it as a block. In the snippet above you show that you know about <code>yield</code>. Here's another way of calling the passed block.</p>\n\n<pre><code>is_odd = lambda { |n| puts n if n.odd? }\n\ndef filter(&amp;block)\n    arr = [1, 2, 3, 4, 5, 6]\n    arr.each do |e|\n        block.call(e)\n    end\nend \n\nfilter(&amp;is_odd)\n# &gt;&gt; 1\n# &gt;&gt; 3\n# &gt;&gt; 5\n</code></pre>\n"}], "owner": {"reputation": 8804, "user_id": 649737, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3ffb1bb7b9f96cd3b1ca567899f9d256?s=128&d=identicon&r=PG", "display_name": "Leron_says_get_back_Monica", "link": "https://stackoverflow.com/users/649737/leron-says-get-back-monica"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 293, "favorite_count": 0, "accepted_answer_id": 52132412, "answer_count": 1, "score": 1, "last_activity_date": 1535838296, "creation_date": 1535837929, "question_id": 52132380, "link": "https://stackoverflow.com/questions/52132380/using-lambda-inside-ruby-method", "title": "Using lambda inside Ruby method", "body": "<p>I'm just starting with <code>Ruby</code> and I hit an issues which I feel is important for the language so I don't want to just pass it. I would really appreciate answer which includes not only a working example but at least brief explanation where I went wrong with mine.</p>\n\n<p>So <strong>first</strong> step is having this method:</p>\n\n<pre><code>def filter (arr)\n    arr.each do |e|\n        puts e if e % 2 != 0\n    end\nend \n\nfilter [1, 2, 3, 4, 5, 6]\n</code></pre>\n\n<p>And the result as expected is:</p>\n\n<blockquote>\n  <p>1 3 5 [Finished in 0.2s]</p>\n</blockquote>\n\n<p><strong>Second</strong> I tried this one:</p>\n\n<pre><code>def filter (arr)\n    arr.each do |e|\n        puts e if yield(e)\n    end\nend \n\nfilter ([1, 2, 3, 4, 5, 6]) { |n| n.odd? }\n</code></pre>\n\n<p>And I got the same result:</p>\n\n<blockquote>\n  <p>1 3 5 [Finished in 0.2s]</p>\n</blockquote>\n\n<p><strong>Third</strong> I want to do this using a lambda. Ultimately I want ti invoke the <code>filter</code> method like so <code>filter([1, 2, 3, 4, 5, 6], &amp;is_odd)</code>. But since I can't still figure it out I am currently stuck at this:</p>\n\n<pre><code>is_odd = lambda { |n| puts n if n.odd? }\n\ndef filter ()\n    arr = [1, 2, 3, 4, 5, 6]\n    arr.each do |e|\n        is_odd(e)\n    end\nend \n\nfilter &amp;is_odd\n</code></pre>\n\n<p>And I got the following error:</p>\n\n<blockquote>\n  <p><code>block in filter': undefined method</code>is_odd' for main:Object\n  (NoMethodError)</p>\n</blockquote>\n\n<p>It kind of makes sense to me that this is not working since, if I define the lambda inside the <code>filter</code> function and use it like so:</p>\n\n<pre><code>def filter ()\n    is_odd = lambda { |n| puts n if n.odd? }\n    arr = [1, 2, 3, 4, 5, 6]\n    arr.each &amp;is_odd\nend \n\nfilter\n</code></pre>\n\n<p>I'm again getting the expected behavior, but I am following a tutorial and it seems like it should be possible to declare <code>is_odd</code> outside the <code>filter</code> method and invoke filter like so <code>filter([1, 2, 3, 4, 5, 6], &amp;is_odd)</code>.</p>\n\n<p>I would like to know if indeed it is possible to do use lambda this way and if yes, where did my logic fail?</p>\n"}, {"tags": ["ruby", "rubygems", "benchmarking"], "comments": [{"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 1, "creation_date": 1535838350, "post_id": 52132050, "comment_id": 91215252, "body": "There&#39;s usually little advantage to running two tests in the same program, vs. running the test harness twice with two different implementations of the function under test.  Separate invocations avoids effects like the 2nd one running faster because the test data is already hot in cache, or CPU frequency has time to go to max turbo, which people sometimes fail to control for.  Can&#39;t you just run with different options to control which version gets loaded?  (Unless your test setup / creation of input data is <i>very</i> slow, seems like no real downside.)"}], "answers": [{"tags": [], "owner": {"reputation": 1230, "user_id": 511203, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ec96aadd672b8056173e4e8a5225d8b?s=128&d=identicon&r=PG", "display_name": "Mike Gorski", "link": "https://stackoverflow.com/users/511203/mike-gorski"}, "is_accepted": true, "score": 2, "last_activity_date": 1535937691, "creation_date": 1535937691, "answer_id": 52142215, "question_id": 52132050, "link": "https://stackoverflow.com/questions/52132050/benchmarking-gem-improvements/52142215#52142215", "title": "Benchmarking gem improvements", "body": "<p>I would approach this using two different Gemfiles. </p>\n\n<p>So assuming you have a <code>benchmark.rb</code> file that has the following:</p>\n\n<pre><code># benchmark.rb\nrequire 'benchmark'\nputs Benchmark.measure { 1000.times{ call_to_gem_method} }\n</code></pre>\n\n<p>Then with your two different Gemfiles, one called <code>Gemfile-oldgem</code> and the other called <code>Gemfile-newgem</code>, you do the following:</p>\n\n<pre><code># Gemfile-oldgem\ngem \"mygem\", :path =&gt; \"/path/to/oldgem/mygem\"\n</code></pre>\n\n<p>Run this for the old gem benchmark:</p>\n\n<p><code>BUNDLE_GEMFILE=Gemfile-oldgem bundle exec ruby benchmark.rb</code></p>\n\n<p>And for the new gem you have:</p>\n\n<pre><code># Gemfile-newgem\ngem \"mygem\", :path =&gt; \"/path/to/newgem/mygem\"\n</code></pre>\n\n<p>Run this to benchmark it:</p>\n\n<p><code>BUNDLE_GEMFILE=Gemfile-newgem bundle exec ruby benchmark.rb</code></p>\n"}], "owner": {"reputation": 1777, "user_id": 3353157, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6168a2c2f5e3582addf6d9d70ce13749?s=128&d=identicon&r=PG", "display_name": "Peter Camilleri", "link": "https://stackoverflow.com/users/3353157/peter-camilleri"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "accepted_answer_id": 52142215, "answer_count": 1, "score": 0, "last_activity_date": 1535937691, "creation_date": 1535834724, "question_id": 52132050, "link": "https://stackoverflow.com/questions/52132050/benchmarking-gem-improvements", "title": "Benchmarking gem improvements", "body": "<p>I am working to improve one of my own gems. I would like to be able to get some data on the magnitude of improvement (if any) of the various ideas I come up.</p>\n\n<p>Normally I test using the benchmark/ips facility. </p>\n\n<p>So I would like to load the old version of my gem and the new one for the purpose of conducting side-by-side tests.</p>\n\n<p>I don't know how to load two versions of the same gem and have them apply selectively as needed.</p>\n\n<p>So far my best idea is to clone the old gem, and build a local copy with an altered name like \"old_gem_name\". Then load that for comparison purposes.</p>\n\n<p>Is there a better way?</p>\n"}, {"tags": ["arrays", "ruby"], "comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1535902341, "post_id": 52131553, "comment_id": 91226542, "body": "Readers may want to run your code, with or without modifications. To do so, step 1 is to cut-and-paste. Step 2, which should not be necessary, is to remove all the line numbers. When presenting code please do not include line numbers, IRB prompts, and so on."}], "answers": [{"tags": [], "owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "is_accepted": false, "score": 2, "last_activity_date": 1535832418, "creation_date": 1535832418, "answer_id": 52131778, "question_id": 52131553, "link": "https://stackoverflow.com/questions/52131553/2d-array-assigns-input-to-all-inner-arrays/52131778#52131778", "title": "2D array assigns input to all inner arrays?", "body": "<p>From the <a href=\"http://ruby-doc.org/core/Array.html#method-c-new\" rel=\"nofollow noreferrer\">fine manual</a>:</p>\n\n<blockquote>\n  <p><strong>new(size=0, default=nil)</strong><br>\n  <strong>new(array)</strong><br>\n  <strong>new(size) {|index| block }</strong><br>\n  [...]<br>\n  <strong>Common gotchas</strong><br>\n  When sending the second parameter, the same object will be used as the value for all the array elements:</p>\n\n<pre><code>a = Array.new(2, Hash.new)\n# =&gt; [{}, {}]\n\na[0]['cat'] = 'feline'\na # =&gt; [{\"cat\"=&gt;\"feline\"}, {\"cat\"=&gt;\"feline\"}]\n\na[1]['cat'] = 'Felix'\na # =&gt; [{\"cat\"=&gt;\"Felix\"}, {\"cat\"=&gt;\"Felix\"}]\n</code></pre>\n  \n  <p>If multiple copies are what you want, you should use the block version which uses the result of that block each time an element of the array needs to be initialized:</p>\n\n<pre><code>a = Array.new(2) { Hash.new }\na[0]['cat'] = 'feline'\na # =&gt; [{\"cat\"=&gt;\"feline\"}, {}]\n</code></pre>\n</blockquote>\n\n<p>When you say this:</p>\n\n<pre><code>stringArr = Array.new(3,Array.new(2))\n</code></pre>\n\n<p>You're creating an array with three elements but all those elements are exactly the same array. You want an array that contains three different arrays as elements:</p>\n\n<pre><code>stringArr = Array.new(3) { Array.new(2) }\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 8786692, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gv8kw.jpg?s=128&g=1", "display_name": "Yates Snyder", "link": "https://stackoverflow.com/users/8786692/yates-snyder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "closed_date": 1535985731, "answer_count": 1, "score": 0, "last_activity_date": 1535832423, "creation_date": 1535830580, "last_edit_date": 1535832423, "question_id": 52131553, "link": "https://stackoverflow.com/questions/52131553/2d-array-assigns-input-to-all-inner-arrays", "closed_reason": "Duplicate", "title": "2D array assigns input to all inner arrays?", "body": "<p>I'm trying to get the method input to be stored and outputted like this:</p>\n\n<pre><code>Want [ [\"email addresses\"], [\"phone numbers\"], [\"names\"] ]    - &gt;    [[\"bobsmith@example.com\",\"sallyfield@example.com\"],[\"555-555-5555\",\"111-111-1111\"],[\"Bob Smith\",\"Sally Field\"]]\n</code></pre>\n\n<p>This is my code:</p>\n\n<pre><code>    def hash_2_array contacts\n    2       # Extract like info from each hash into arrays\n    3       stringArr = Array.new(3,Array.new(2))   #=&gt; [ [ nil,nil]  , [nil,nil]  , [nil,nil]  ]\n    4       \n    5       if contacts.empty?\n    6           return nonsense = Array.new(3, Array.new)\n    7       else\n    8          n=0 #name counter\n    9          e=0 #email counter\n    10         p=0 #phone counter\n    11          contacts.each do |key, value|\n    12              stringArr[2][n] = key.to_s              #adds name to array\n    13              n+=1\n    14              value.each do |key2, value2|\n    15                  if key2.to_s.eql?(\"email\")\n    16                      stringArr[0][e] = value2.to_s   #adds email address to array\n    17                      e+=1\n    18                  else\n    19                      stringArr[1][p] = value2.to_s   #adds phone number to array\n    20                      p+=1\n    21                  end\n    22              end\n    23          end\n    24      end\n    25      return stringArr\n    26  end\n    27  \n    28  \n    29  hash_2_array({:\"Bob Smith\"=&gt;{:email=&gt;\"bobsmith@example.com\", :phone=&gt;\"555-555-5555\"}, :\"Sally Field\"=&gt;{:email=&gt;\"sallyfield@example.com\", :phone=&gt;\"111-111-1111\"}})\n</code></pre>\n\n<p>It returns:</p>\n\n<pre><code>   got: [[\"555-555-5555\", \"111-111-1111\"], [\"555-555-5555\", \"111-111-1111\"], [\"555-555-5555\", \"111-111-1111\"]]\n</code></pre>\n\n<p>It's really confusing why it's not just assigning only the the index in the array that I'm specifying. I think this code worked before, but now it's broken somehow. Any help would be great</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ujs"], "comments": [{"owner": {"reputation": 1918, "user_id": 9224452, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb0f303869bf090269cbcc46cef14991?s=128&d=identicon&r=PG&f=1", "display_name": "John Baker", "link": "https://stackoverflow.com/users/9224452/john-baker"}, "edited": false, "score": 0, "creation_date": 1535838932, "post_id": 52131110, "comment_id": 91215352, "body": "have you thought about using the data attribute: <code>disable_with</code>? Check the documentation for this Rails feature regarding the disabling of submits: <a href=\"https://api.rubyonrails.org/classes/ActionView/Helpers/FormTagHelper.html#method-i-submit_tag\" rel=\"nofollow noreferrer\">api.rubyonrails.org/classes/ActionView/Helpers/&hellip;</a>"}, {"owner": {"reputation": 407, "user_id": 10224803, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f4f17742ec82f33995ea34732fb0e3a?s=128&d=identicon&r=PG&f=1", "display_name": "Francisco", "link": "https://stackoverflow.com/users/10224803/francisco"}, "reply_to_user": {"reputation": 1918, "user_id": 9224452, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb0f303869bf090269cbcc46cef14991?s=128&d=identicon&r=PG&f=1", "display_name": "John Baker", "link": "https://stackoverflow.com/users/9224452/john-baker"}, "edited": false, "score": 0, "creation_date": 1535843403, "post_id": 52131110, "comment_id": 91216136, "body": "Hey @JohnBaker, thanks for trying to help. Yeah, that is what I&#39;m using, but after the submit the button, is no longer enable. The file is returned but the button continue disable."}], "owner": {"reputation": 407, "user_id": 10224803, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f4f17742ec82f33995ea34732fb0e3a?s=128&d=identicon&r=PG&f=1", "display_name": "Francisco", "link": "https://stackoverflow.com/users/10224803/francisco"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 266, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1535827016, "creation_date": 1535827016, "question_id": 52131110, "link": "https://stackoverflow.com/questions/52131110/data-disable-with-not-enable-button-after-a-send-a-file", "title": "Data Disable With not enable button after a send a file", "body": "<p>I am building a rails app that only deals with request json and will return the information to the user. I am trying to use the data-disable-with property, but after the action finish the button is not being enable. \nI am requesting a Endpoint and the JSON response I will generate a XLSX file and send to the user. <br/>\nThe problem is that after the file has been send the button is not enable.\n<br/>\n<br/></p>\n\n<pre><code>&lt;%= form_for generate_report_path, url: generate_report_path(format: \"xlsx\"), method: :post do %&gt;\n &lt;div class=\"form-group\"&gt;\n &lt;%= label_tag(:dtInicio, \"Data Inicio\") %&gt;\n &lt;%= text_field_tag(:dtInicio, nil, class: \"form-control datepicker\", id: 'cpDtInicio', placeholder: \"Pesquise a data inicio\",  required: true) %&gt;\n &lt;/div&gt;\n &lt;div class=\"form-group\"&gt;\n &lt;%= label_tag(:dtFinal, \"Data Final\") %&gt;\n &lt;%= text_field_tag(:dtFinal, nil, class: \"form-control datepicker\", id: 'cpDtFinal', placeholder: \"Pesquise a data Final\", required: true) %&gt;\n &lt;/div&gt;\n &lt;%= button_tag(\"Download\", class: \"btn btn-dark\", id: 'download', 'data-disable-with' =&gt; \"&lt;i class='fa fa-spinner fa-spin'&gt;&lt;/i&gt; Gerando Relat\u00f3rio...\")  %&gt;\n &lt;div class=\"col-md-12\"&gt;&lt;/div&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>On my controller:</p>\n\n<pre><code>def generate_report\n    begin_dt = Date.parse(params[:dtInicio]).strftime(\"%Y-%m-%d\")\n    end_dt = Date.parse(params[:dtFinal]).strftime(\"%Y-%m-%d\")\n    @info = JSON.parse(get_connection(begin_dt, end_dt))[\"information\"]\n\n    respond_to do |format|\n      format.xlsx {        \n        send_file generate_file, content_type: 'application/vnd.ms-excel', \n          filename: \"#{Time.now.strftime('%Y%m%d%H%M%S%L')}.xlsx\", :disposition =&gt; 'inline'\n        }\n    end\nend\n</code></pre>\n\n<p>I already try to add a JS to enable, but the page is not reloading for this JS be executed. I'm lost and appreciate the help.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "ruby-on-rails-5"], "answers": [{"tags": [], "owner": {"reputation": 3521, "user_id": 2521680, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/6D935.jpg?s=128&g=1", "display_name": "Rockwell Rice", "link": "https://stackoverflow.com/users/2521680/rockwell-rice"}, "is_accepted": true, "score": 0, "last_activity_date": 1535838550, "creation_date": 1535838550, "answer_id": 52132432, "question_id": 52130859, "link": "https://stackoverflow.com/questions/52130859/how-can-i-add-information-to-custom-user-field-devise/52132432#52132432", "title": "How can I add information to custom user field (Devise)", "body": "<p>If the value of <code>current_user.information</code> is a string you can append to it like you stated.</p>\n\n<pre><code>s = current_user.information\ns &lt;&lt; \"New string addition\"\ns.save\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1918, "user_id": 9224452, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb0f303869bf090269cbcc46cef14991?s=128&d=identicon&r=PG&f=1", "display_name": "John Baker", "link": "https://stackoverflow.com/users/9224452/john-baker"}, "is_accepted": false, "score": 0, "last_activity_date": 1535840466, "creation_date": 1535840466, "answer_id": 52132609, "question_id": 52130859, "link": "https://stackoverflow.com/questions/52130859/how-can-i-add-information-to-custom-user-field-devise/52132609#52132609", "title": "How can I add information to custom user field (Devise)", "body": "<p>Except the <code>&lt;&lt;</code> method mentioned on @Rockwell's answer, you can achieve your goal by using <code>String#concat</code> as well: </p>\n\n<pre><code>s = current_user.information\ns.concat(\"New string addition\")\ns.save\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 10303593, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d1c2495c2a4ed5e5b4b5f32fea23b830?s=128&d=identicon&r=PG&f=1", "display_name": "rails555", "link": "https://stackoverflow.com/users/10303593/rails555"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41, "favorite_count": 0, "accepted_answer_id": 52132432, "answer_count": 2, "score": 0, "last_activity_date": 1535840466, "creation_date": 1535825159, "question_id": 52130859, "link": "https://stackoverflow.com/questions/52130859/how-can-i-add-information-to-custom-user-field-devise", "title": "How can I add information to custom user field (Devise)", "body": "<p>I create a custom field in user (using a Devise) in my Rails project, varible called information. Type is string.\nSomethigh like that: <code>current_user.information</code>\nHow can I add another string to end of this string? \nI need a method then do like this:</p>\n\n<pre><code>current_user.information &lt;&lt; some_varible \n</code></pre>\n\n<p>And save changes.</p>\n"}, {"tags": ["ruby", "selenium", "watir"], "comments": [{"owner": {"reputation": 18005, "user_id": 2386774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dea7da142cb7e85d5d5a8576e2625431?s=128&d=identicon&r=PG", "display_name": "JeffC", "link": "https://stackoverflow.com/users/2386774/jeffc"}, "edited": false, "score": 0, "creation_date": 1535832431, "post_id": 52130793, "comment_id": 91214017, "body": "Your first locator is full of indices which is not good. They are more brittle and more likely that the element will change and you start clicking on an element that you weren&#39;t expecting to click on. It would be better if you did something simple like a CSS selector, e.g. <code>a.quick-view-mobile</code>. Or better yet, click on the link by product name and skip the popup dialog all together. Then you could provide the product name and click on that product instead of clicking on &quot;the first product&quot; which would likely change regularly on an actual store site."}, {"owner": {"reputation": 18005, "user_id": 2386774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dea7da142cb7e85d5d5a8576e2625431?s=128&d=identicon&r=PG", "display_name": "JeffC", "link": "https://stackoverflow.com/users/2386774/jeffc"}, "edited": false, "score": 0, "creation_date": 1535832835, "post_id": 52130793, "comment_id": 91214114, "body": "If you clicked on the product link itself, it navigates to the product page instead of hosting it in the dialog with an IFRAME. You might try that and get more consistent behavior? Are you sure it&#39;s not a timing issue?"}, {"owner": {"reputation": 3523, "user_id": 9043475, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FNxvn.jpg?s=128&g=1", "display_name": "Rajagopalan", "link": "https://stackoverflow.com/users/9043475/rajagopalan"}, "reply_to_user": {"reputation": 18005, "user_id": 2386774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dea7da142cb7e85d5d5a8576e2625431?s=128&d=identicon&r=PG", "display_name": "JeffC", "link": "https://stackoverflow.com/users/2386774/jeffc"}, "edited": false, "score": 0, "creation_date": 1535912017, "post_id": 52130793, "comment_id": 91229234, "body": "@JeffC Hi, clicking that image is not a problem for me, for an example, I have updated my code, you may have the look at it. My problem is in the select_list, In WATIR, you can choose <code>b.select_list.select(&#39;something&#39;)</code> or <code>b.select_list.option(text: &#39;something&#39;).select</code>, for me , first one throws the invisibility error but second one succeeds."}, {"owner": {"reputation": 3480, "user_id": 4072371, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/112e615d8c60908294e30848d9556186?s=128&d=identicon&r=PG", "display_name": "titusfortner", "link": "https://stackoverflow.com/users/4072371/titusfortner"}, "edited": false, "score": 0, "creation_date": 1535918895, "post_id": 52130793, "comment_id": 91230988, "body": "Also, this is more readable and does the same thing: <code>b.iframe(id: &#47;^fancybox-frame&#47;).select_list.option(text: &quot;L&quot;).click</code>"}, {"owner": {"reputation": 3523, "user_id": 9043475, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FNxvn.jpg?s=128&g=1", "display_name": "Rajagopalan", "link": "https://stackoverflow.com/users/9043475/rajagopalan"}, "reply_to_user": {"reputation": 3480, "user_id": 4072371, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/112e615d8c60908294e30848d9556186?s=128&d=identicon&r=PG", "display_name": "titusfortner", "link": "https://stackoverflow.com/users/4072371/titusfortner"}, "edited": false, "score": 0, "creation_date": 1535946690, "post_id": 52130793, "comment_id": 91235699, "body": "@titusfortner that&#39;s awesome , Thank you."}], "answers": [{"comments": [{"owner": {"reputation": 3523, "user_id": 9043475, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FNxvn.jpg?s=128&g=1", "display_name": "Rajagopalan", "link": "https://stackoverflow.com/users/9043475/rajagopalan"}, "edited": false, "score": 0, "creation_date": 1535941229, "post_id": 52141001, "comment_id": 91234806, "body": "So select() method will choose the option as well? Or option() method will throw the error?"}, {"owner": {"reputation": 3480, "user_id": 4072371, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/112e615d8c60908294e30848d9556186?s=128&d=identicon&r=PG", "display_name": "titusfortner", "link": "https://stackoverflow.com/users/4072371/titusfortner"}, "reply_to_user": {"reputation": 3523, "user_id": 9043475, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FNxvn.jpg?s=128&g=1", "display_name": "Rajagopalan", "link": "https://stackoverflow.com/users/9043475/rajagopalan"}, "edited": false, "score": 1, "creation_date": 1535951319, "post_id": 52141001, "comment_id": 91236641, "body": "select() method will choose the option. Also, 6.13 is released so you can try it out."}, {"owner": {"reputation": 3523, "user_id": 9043475, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FNxvn.jpg?s=128&g=1", "display_name": "Rajagopalan", "link": "https://stackoverflow.com/users/9043475/rajagopalan"}, "edited": false, "score": 0, "creation_date": 1535990083, "post_id": 52141001, "comment_id": 91256256, "body": "Hi your modification is not waiting for select list to exist, it immediately throws the error."}, {"owner": {"reputation": 3480, "user_id": 4072371, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/112e615d8c60908294e30848d9556186?s=128&d=identicon&r=PG", "display_name": "titusfortner", "link": "https://stackoverflow.com/users/4072371/titusfortner"}, "reply_to_user": {"reputation": 3523, "user_id": 9043475, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FNxvn.jpg?s=128&g=1", "display_name": "Rajagopalan", "link": "https://stackoverflow.com/users/9043475/rajagopalan"}, "edited": false, "score": 0, "creation_date": 1536035952, "post_id": 52141001, "comment_id": 91267627, "body": "@Rajagopalan This is a different bug that has to do with collections which means fixing how we are ensuring context so that it can apply equally to elements and collections, and the fix is here: <a href=\"https://github.com/watir/watir/pull/771\" rel=\"nofollow noreferrer\">github.com/watir/watir/pull/771</a>"}, {"owner": {"reputation": 3523, "user_id": 9043475, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FNxvn.jpg?s=128&g=1", "display_name": "Rajagopalan", "link": "https://stackoverflow.com/users/9043475/rajagopalan"}, "edited": false, "score": 0, "creation_date": 1536036536, "post_id": 52141001, "comment_id": 91267737, "body": "okay, I would revert back to my earlier version until this get fixed."}, {"owner": {"reputation": 3523, "user_id": 9043475, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FNxvn.jpg?s=128&g=1", "display_name": "Rajagopalan", "link": "https://stackoverflow.com/users/9043475/rajagopalan"}, "edited": false, "score": 0, "creation_date": 1536085977, "post_id": 52141001, "comment_id": 91294983, "body": "Selenium is detecting a particular select list as invisible through <code>displayed?</code> method but it can select the option in the select list, so it appears that select element is hidden but option is not, eh?"}, {"owner": {"reputation": 3480, "user_id": 4072371, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/112e615d8c60908294e30848d9556186?s=128&d=identicon&r=PG", "display_name": "titusfortner", "link": "https://stackoverflow.com/users/4072371/titusfortner"}, "reply_to_user": {"reputation": 3523, "user_id": 9043475, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FNxvn.jpg?s=128&g=1", "display_name": "Rajagopalan", "link": "https://stackoverflow.com/users/9043475/rajagopalan"}, "edited": false, "score": 0, "creation_date": 1536095972, "post_id": 52141001, "comment_id": 91299150, "body": "No, Selenium intentionally doesn&#39;t evaluate the displayedness of option, so Watir unnecessarily was checking for it."}, {"owner": {"reputation": 3523, "user_id": 9043475, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FNxvn.jpg?s=128&g=1", "display_name": "Rajagopalan", "link": "https://stackoverflow.com/users/9043475/rajagopalan"}, "edited": false, "score": 0, "creation_date": 1536252260, "post_id": 52141001, "comment_id": 91366802, "body": "Selenium doesn&#39;t do any checking but wedriver does the visibility checking before it clicks the element that&#39;s what I meant."}, {"owner": {"reputation": 3480, "user_id": 4072371, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/112e615d8c60908294e30848d9556186?s=128&d=identicon&r=PG", "display_name": "titusfortner", "link": "https://stackoverflow.com/users/4072371/titusfortner"}, "reply_to_user": {"reputation": 3523, "user_id": 9043475, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FNxvn.jpg?s=128&g=1", "display_name": "Rajagopalan", "link": "https://stackoverflow.com/users/9043475/rajagopalan"}, "edited": false, "score": 0, "creation_date": 1536357446, "post_id": 52141001, "comment_id": 91409752, "body": "@Rajagopalan Selenium specifically does <i>not</i> check visibility for option elements. For other elements, yes."}, {"owner": {"reputation": 3523, "user_id": 9043475, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FNxvn.jpg?s=128&g=1", "display_name": "Rajagopalan", "link": "https://stackoverflow.com/users/9043475/rajagopalan"}, "edited": false, "score": 0, "creation_date": 1536368830, "post_id": 52141001, "comment_id": 91411840, "body": "It obviously checks the visibility of option element. But whether some element is visible or not is clearly depends on the ability of the driver, For an example I work in an application called IDIT in which options are visible to chrome driver but it&#39;s hidden to the geckodriver. Please don&#39;t think that options are hidden because it seems to be appearing while you click the select list, since size of the select list is always zero it appears to be hidden but it is not , so it&#39;s not hidden in a normal select list. And once again, selenium doesn&#39;t check the visibility but web driver does"}, {"owner": {"reputation": 3480, "user_id": 4072371, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/112e615d8c60908294e30848d9556186?s=128&d=identicon&r=PG", "display_name": "titusfortner", "link": "https://stackoverflow.com/users/4072371/titusfortner"}, "reply_to_user": {"reputation": 3523, "user_id": 9043475, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FNxvn.jpg?s=128&g=1", "display_name": "Rajagopalan", "link": "https://stackoverflow.com/users/9043475/rajagopalan"}, "edited": false, "score": 0, "creation_date": 1536681154, "post_id": 52141001, "comment_id": 91507657, "body": "@Rajagopalan No. Selenium does not check the visibility of an option. The isShown atom specifically ignores that element."}, {"owner": {"reputation": 3523, "user_id": 9043475, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FNxvn.jpg?s=128&g=1", "display_name": "Rajagopalan", "link": "https://stackoverflow.com/users/9043475/rajagopalan"}, "edited": false, "score": 0, "creation_date": 1536681238, "post_id": 52141001, "comment_id": 91507708, "body": "I am also saying selenium doesn&#39;t check, but web driver does the checking."}, {"owner": {"reputation": 3480, "user_id": 4072371, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/112e615d8c60908294e30848d9556186?s=128&d=identicon&r=PG", "display_name": "titusfortner", "link": "https://stackoverflow.com/users/4072371/titusfortner"}, "reply_to_user": {"reputation": 3523, "user_id": 9043475, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FNxvn.jpg?s=128&g=1", "display_name": "Rajagopalan", "link": "https://stackoverflow.com/users/9043475/rajagopalan"}, "edited": false, "score": 0, "creation_date": 1536696655, "post_id": 52141001, "comment_id": 91515227, "body": "Seriously no; no it doesn&#39;t. The drivers use the isShown atom built by the Selenium project. It ignores visibility. This is why you don&#39;t have to click on the Select List object before clicking on an option. Because it doesn&#39;t check for visibility."}, {"owner": {"reputation": 3523, "user_id": 9043475, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FNxvn.jpg?s=128&g=1", "display_name": "Rajagopalan", "link": "https://stackoverflow.com/users/9043475/rajagopalan"}, "edited": false, "score": 0, "creation_date": 1536731476, "post_id": 52141001, "comment_id": 91524167, "body": "You don&#39;t have to click the select_list,that&#39;s because option is one of the element is webpage and that element is located by the xpath <code>&#47;&#47;select[@id=&#39;xxx&#39;]&#47;option[normalize-space()=&#39;yyyy&#39;]</code> so you don&#39;t have to click the select_list to choose the option. You still miss my point of select list size by default is zero. so all elements are visible."}, {"owner": {"reputation": 3480, "user_id": 4072371, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/112e615d8c60908294e30848d9556186?s=128&d=identicon&r=PG", "display_name": "titusfortner", "link": "https://stackoverflow.com/users/4072371/titusfortner"}, "reply_to_user": {"reputation": 3523, "user_id": 9043475, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FNxvn.jpg?s=128&g=1", "display_name": "Rajagopalan", "link": "https://stackoverflow.com/users/9043475/rajagopalan"}, "edited": false, "score": 0, "creation_date": 1536766701, "post_id": 52141001, "comment_id": 91545531, "body": "I didn&#39;t get that far in parsing your comment because your assumptions for it are wrong. I&#39;m giving an example for option elements being treated differently than other elements. If isShown atom did not treat option elements differently, you would have to click select list to display the options to the user before being able to click the option. It has nothing to do with how you locate them. Also Selenium is an implementation of the WebDriver spec, so these two things can&#39;t behave differently, they are the same."}], "tags": [], "owner": {"reputation": 3480, "user_id": 4072371, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/112e615d8c60908294e30848d9556186?s=128&d=identicon&r=PG", "display_name": "titusfortner", "link": "https://stackoverflow.com/users/4072371/titusfortner"}, "is_accepted": true, "score": 3, "last_activity_date": 1535922027, "creation_date": 1535922027, "answer_id": 52141001, "question_id": 52130793, "link": "https://stackoverflow.com/questions/52130793/select-method-and-option-method-works-differently/52141001#52141001", "title": "Select() method and option() method works differently", "body": "<p>Moving from a comment to an answer:</p>\n\n<p>The issue is that we refactored the normal (non-select-list) way of doing it to not check for whether an element is displayed ahead of time, and put the waiting logic in the rescue block if Selenium complained. The select-list code is still checking the visibility ahead of time, and this particular select-list element is not displayed according to Selenium. Since it appears that Selenium can select options without select list showing as displayed, Watir should not be waiting for this.</p>\n\n<p>I've fixed it here, and it will be working in Watir 6.13 (should be released \"soon\")</p>\n\n<p><a href=\"https://github.com/watir/watir/commit/77af164fcdecb71d8d2240110d3fb4b1dabeee4b\" rel=\"nofollow noreferrer\">https://github.com/watir/watir/commit/77af164fcdecb71d8d2240110d3fb4b1dabeee4b</a></p>\n"}], "owner": {"reputation": 3523, "user_id": 9043475, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FNxvn.jpg?s=128&g=1", "display_name": "Rajagopalan", "link": "https://stackoverflow.com/users/9043475/rajagopalan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 183, "favorite_count": 0, "accepted_answer_id": 52141001, "answer_count": 1, "score": 0, "last_activity_date": 1535922027, "creation_date": 1535824645, "last_edit_date": 1535912799, "question_id": 52130793, "link": "https://stackoverflow.com/questions/52130793/select-method-and-option-method-works-differently", "title": "Select() method and option() method works differently", "body": "<p>Today I have seen a question in selenium C# section where this question was posted, I try to solve that problem through WATIR coding, I have written the below code and WATIR identifies this select list as invisible.</p>\n\n<pre><code>b.goto 'http://automationpractice.com/index.php'\nb.img(title: 'Faded Short Sleeve T-shirts').click\nb.iframe(xpath: \"//*[starts-with(@id,'fancybox-frame')]\").select_list.select(\"L\")\n</code></pre>\n\n<p>But If I select that same select_list through below metioned code, it works fine.</p>\n\n<pre><code>b.iframe(xpath: \"//*[starts-with(@id,'fancybox-frame')]\").select_list.option(text: \"L\").click\n</code></pre>\n\n<p>I don't understand what is the difference here, when I put a debug pointer, both are making a selenium call to <code>find_element(tag_name: \"select\")</code>, first one fails due to element invisible but second one passes</p>\n\n<p>@Titus, @JustinKo Can you please explain me what's happening here? what's the difference? </p>\n\n<p>Note: Please run it in Chrome.</p>\n"}, {"tags": ["javascript", "ruby-on-rails", "ruby", "ruby-on-rails-5", "httparty"], "comments": [{"owner": {"reputation": 649, "user_id": 6262799, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/fdcfbe1750c5845f84869ae9f741b27b?s=128&d=identicon&r=PG&f=1", "display_name": "Prometheus", "link": "https://stackoverflow.com/users/6262799/prometheus"}, "edited": false, "score": 0, "creation_date": 1535819000, "post_id": 52129206, "comment_id": 91210411, "body": "Try using `` insead &quot;&quot; for the API adress, where you inject the term: url = &quot;<a href=\"https://api.ritekit.com/v1/stats/history/#\" rel=\"nofollow noreferrer\">api.ritekit.com/v1/stats/history/#</a>{term}?tags=&amp;client_id=&quot; Also, add <a href=\"https://github.com/deivid-rodriguez/byebug\" rel=\"nofollow noreferrer\">github.com/deivid-rodriguez/byebug</a> byebug to your gemfiles, and then add &#39;byebug&#39; right after you sign on the search_team params. If its not empty, put the &#39;byebug&#39; tag one line below and see the response. I assume your api isn&#39;t giving anything back. // Edit: didn&#39;t see that you are using gon gem. Still, try it out. The author in the answer below down knows more about gon. Greetings!"}], "answers": [{"comments": [{"owner": {"reputation": 27, "user_id": 3499671, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Uos2y.png?s=128&g=1", "display_name": "Jumping Jack", "link": "https://stackoverflow.com/users/3499671/jumping-jack"}, "edited": false, "score": 0, "creation_date": 1535889044, "post_id": 52130033, "comment_id": 91223112, "body": "You are 100% right, I was able to access the value i needed without using the gone gem in the js.erb file using <code>&lt;%= raw @stats.to_json %&gt;</code>. Thanks for staring me in the right direction, I truly appreciate it!"}], "tags": [], "owner": {"reputation": 5178, "user_id": 2577840, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/1520578334/picture?type=large", "display_name": "Micha\u0142 M\u0142o\u017aniak", "link": "https://stackoverflow.com/users/2577840/micha%c5%82-m%c5%82o%c5%baniak"}, "is_accepted": true, "score": 0, "last_activity_date": 1535818918, "creation_date": 1535818918, "answer_id": 52130033, "question_id": 52129206, "link": "https://stackoverflow.com/questions/52129206/controller-action-value-not-passing-to-javascript-with-gon-gem/52130033#52130033", "title": "Controller action value not passing to javascript with Gon gem", "body": "<p>As far as I know <code>gon</code> does not allow to that. Or at least there is no out-of-the-box mechanism for updating <code>gon</code> variable via ajax request. They have <code>gon.watch</code>, but it is for other use cases.</p>\n\n<p>And I think you don't need it. When your server respond with <code>.js.erb</code> template you already have access to data in javascript. You can access <code>@stats</code> variable as <code>&lt;%= @stats %&gt;</code>. No need to use <code>gon</code> there.</p>\n"}], "owner": {"reputation": 27, "user_id": 3499671, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Uos2y.png?s=128&g=1", "display_name": "Jumping Jack", "link": "https://stackoverflow.com/users/3499671/jumping-jack"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 227, "favorite_count": 0, "accepted_answer_id": 52130033, "answer_count": 1, "score": 0, "last_activity_date": 1535818918, "creation_date": 1535813191, "question_id": 52129206, "link": "https://stackoverflow.com/questions/52129206/controller-action-value-not-passing-to-javascript-with-gon-gem", "title": "Controller action value not passing to javascript with Gon gem", "body": "<p>This issue has he pretty baffled. I have a simple form that has a <code>remote: true</code> method. Im simply trying to get the users input from the form and send it to javascript for further use. </p>\n\n<p><strong>/main/app/controllers/queries_controller.rb</strong></p>\n\n<p>In the controller when I use pry all the values I expect to be there are there, but when it comes to gon value being send to javascript its always <code>undefined</code>.</p>\n\n<pre><code>def index\n    search_term = params[:query]\n    @stats = Query.api_response(search_term)\n    gon.stats = @stats\n\n    respond_to do |format|\n        format.js\n        format.html\n    end\n  end\n</code></pre>\n\n<p><strong>/main/app/models/query.rb</strong></p>\n\n<pre><code>    class Query &lt; ApplicationRecord\n\n        def self.api_response(term)\n            url = \"https://api.ritekit.com/v1/stats/history/#{term}?tags=&amp;client_id=\"\n            api = \"1234567890123456789\"\n            return HTTParty.get(url + api)\n         end        \n end\n</code></pre>\n\n<p><strong>views/shared/_form.html.erb</strong></p>\n\n<pre><code>&lt;%= form_tag queries_path, method: :get, remote: true do %&gt;\n    &lt;%= text_field_tag :query %&gt;&lt;br&gt;\n    &lt;%= submit_tag 'Search' %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p><strong>/main/app/views/queries/index.js.erb</strong></p>\n\n<p>This value is undefined when sent to the console.</p>\n\n<pre><code>$(document).ready(function(){\n  console.log(gon.stats)\n});\n</code></pre>\n\n<p><strong>/main/app/views/layouts/application.html.erb</strong></p>\n\n<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html lang=\"en\"&gt;\n  &lt;head&gt;\n    &lt;%= include_gon %&gt;\n    &lt;meta charset=\"utf-8\" /&gt;\n    &lt;meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\" /&gt;\n    &lt;link rel=\"stylesheet\" type=\"text/css\" href=\"//cdn.datatables.net/1.10.19/css/jquery.dataTables.min.css\"&gt;\n    &lt;%= stylesheet_link_tag    \"application\" %&gt;\n    &lt;%= javascript_include_tag \"application\" %&gt;\n    &lt;%= csrf_meta_tags %&gt;\n        &lt;script src=\"https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js\"&gt;&lt;/script&gt;\n        &lt;script src=\"https://cdn.datatables.net/1.10.19/js/jquery.dataTables.min.js\"&gt;&lt;/script&gt;\n        &lt;script src=\"https://cdn.datatables.net/plug-ins/1.10.19/api/sum().js\"&gt;&lt;/script&gt;\n        &lt;link href=\"https://fonts.googleapis.com/css?family=Righteous\" rel=\"stylesheet\"&gt;\n  &lt;/head&gt;\n</code></pre>\n\n<p><strong>I have also tried</strong></p>\n\n<pre><code>&lt;%= content_tag \"div\", id: \"foobar\", data: {value: @stats} do %&gt;&lt;% end %&gt;\n</code></pre>\n\n<p>and got <code>undefined</code> as well when I used jQuery to access it.</p>\n\n<p>Im really stumped on this one, and its bothering me because its been a few days and i'm still not getting intended result. Any help will be very appreciated.</p>\n"}, {"tags": ["ruby", "amazon-web-services", "amazon-s3", "upload", "multipart"], "comments": [{"owner": {"reputation": 3320, "user_id": 4950680, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/C8cEh.jpg?s=128&g=1", "display_name": "Martin Zinovsky", "link": "https://stackoverflow.com/users/4950680/martin-zinovsky"}, "edited": false, "score": 0, "creation_date": 1535831353, "post_id": 52129175, "comment_id": 91213770, "body": "Based on <a href=\"https://docs.aws.amazon.com/AmazonS3/latest/dev/uploadobjusingmpu-ruby-sdk.html\" rel=\"nofollow noreferrer\">docs.aws.amazon.com/AmazonS3/latest/dev/&hellip;</a> you should use <a href=\"https://docs.aws.amazon.com/sdk-for-ruby/v3/api/Aws/S3/Client.html#create_multipart_upload-instance_method\" rel=\"nofollow noreferrer\"><code>create_multipart_upload</code></a>, <a href=\"https://docs.aws.amazon.com/sdk-for-ruby/v3/api/Aws/S3/Client.html#upload_part-instance_method\" rel=\"nofollow noreferrer\"><code>upload_part</code></a> and <a href=\"https://docs.aws.amazon.com/sdk-for-ruby/v3/api/Aws/S3/Client.html#complete_multipart_upload-instance_method\" rel=\"nofollow noreferrer\"><code>complete_multipart_upload</code></a> methods"}, {"owner": {"reputation": 19, "user_id": 839104, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d50b4c70c375267036ba35bfaf84135?s=128&d=identicon&r=PG", "display_name": "Louie", "link": "https://stackoverflow.com/users/839104/louie"}, "reply_to_user": {"reputation": 3320, "user_id": 4950680, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/C8cEh.jpg?s=128&g=1", "display_name": "Martin Zinovsky", "link": "https://stackoverflow.com/users/4950680/martin-zinovsky"}, "edited": false, "score": 0, "creation_date": 1535900776, "post_id": 52129175, "comment_id": 91226137, "body": "Thanks Martin I had an error in my upload key structure thanks for replying causing the error ( it just wasn&#39;t a very clear error)."}], "owner": {"reputation": 19, "user_id": 839104, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d50b4c70c375267036ba35bfaf84135?s=128&d=identicon&r=PG", "display_name": "Louie", "link": "https://stackoverflow.com/users/839104/louie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 105, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1535812955, "creation_date": 1535812955, "question_id": 52129175, "link": "https://stackoverflow.com/questions/52129175/awss3client-upload-part-copy-ruby-sdk", "title": "Aws::S3::Client.upload_part_copy ruby sdk", "body": "<p>I am attempting to use Aws::S3::Client.upload_part_copy (Ruby SDK <a href=\"https://docs.aws.amazon.com/sdkforruby/api/Aws/S3/Client.html#upload_part_copy-instance_method\" rel=\"nofollow noreferrer\">https://docs.aws.amazon.com/sdkforruby/api/Aws/S3/Client.html#upload_part_copy-instance_method</a> ) and am having some difficulties.  I have to use this due to the file I am copying being over 5GB in size.  I have written some code but am getting a Access Denied (Aws::S3::Errors::AccessDenied) error when running though the multipart upload.  I know that the credentials are correct and I am able to use the Aws::S3::Client otherwise.  Below is a test to copy the file using multipart.  Am I doing something wrong?  Is there some other authentication that is required?  Are there some special perms needed on my s3 bucket?  I know that I need to assemble a hash of the parts and call complete_multipart_upload but cannot even get that far.</p>\n\n<p>TIA</p>\n\n<pre><code>t = $LargeFileKeyExisting\nto = $NewLargeFileKey\n\nsize = 5880862890 # hardcoded for now size of large file in bytes\nchunk = 104857600 # I Want to use 100 MB chunks\nbeg_byte = 1\npart = 0\n\ns3 = Aws::S3::Client.new(\n    access_key_id: $myKey,\n    secret_access_key: $mySecretKey,\n    region: $MyRegion\n)\ntt = s3.create_multipart_upload({bucket: $MyBucket, key: to})\n\nloop do\n\n part += 1\n beg_byte = beg_byte\n end_byte = beg_byte + chunk\n end_byte = (end_byte &gt; 5880862890) ? size : end_byte\n puts \"part beg: #{beg_byte} - end: #{end_byte} part#{part}\"\n\n  resp = s3.upload_part_copy({\n   bucket: $MyBucket,\n   copy_source: t,\n   copy_source_range: \"bytes=#{beg_byte}-#{end_byte}\",\n   key: to,\n   part_number: part,\n   upload_id: tt[:upload_id],\n   })\n break if end_byte == size\n beg_byte = end_byte + 1\nend\n</code></pre>\n"}, {"tags": ["ruby", "rubygems", "rvm"], "comments": [{"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1535808899, "post_id": 52128499, "comment_id": 91207716, "body": "Please, don&#39;t post photographs of text. Post text. This is a programming website, not a photography website. We want to read, and probably copy&amp;paste, what you post, not critique its use of perspective of color."}, {"owner": {"reputation": 531, "user_id": 4801466, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-LKQUV9yTvkc/AAAAAAAAAAI/AAAAAAAAABM/3umg80-LeJM/photo.jpg?sz=128", "display_name": "Iv&#225;n Cort&#233;s Romero", "link": "https://stackoverflow.com/users/4801466/iv%c3%a1n-cort%c3%a9s-romero"}, "reply_to_user": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1535809423, "post_id": 52128499, "comment_id": 91207845, "body": "Sorry. You`re totally right"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1576445153, "post_id": 52128499, "comment_id": 104892385, "body": "&quot;<a href=\"https://meta.stackoverflow.com/questions/285551/why-not-upload-images-of-code-on-so-when-asking-a-question/285557#285557\">Why not upload images of code on SO when asking a question?</a>&quot; also, see &quot;<a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>&quot;. You&#39;re asking two separate and unrelated questions."}], "answers": [{"tags": [], "owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "is_accepted": false, "score": 3, "last_activity_date": 1535808845, "creation_date": 1535808845, "answer_id": 52128611, "question_id": 52128499, "link": "https://stackoverflow.com/questions/52128499/why-doesnt-user-installation-directory-match-with-the-ruby-version/52128611#52128611", "title": "Why doesn&#39;t &#39;USER INSTALLATION DIRECTORY&#39; match with the Ruby version?", "body": "<p>The installation directory for Gems is based on the library compatibility version of Ruby. Since Ruby 2.5.1 is library-compatible with Ruby 2.5.0, its library compatibility version is still 2.5.0.</p>\n"}], "owner": {"reputation": 531, "user_id": 4801466, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-LKQUV9yTvkc/AAAAAAAAAAI/AAAAAAAAABM/3umg80-LeJM/photo.jpg?sz=128", "display_name": "Iv&#225;n Cort&#233;s Romero", "link": "https://stackoverflow.com/users/4801466/iv%c3%a1n-cort%c3%a9s-romero"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 203, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1576445249, "creation_date": 1535807938, "last_edit_date": 1576445249, "question_id": 52128499, "link": "https://stackoverflow.com/questions/52128499/why-doesnt-user-installation-directory-match-with-the-ruby-version", "title": "Why doesn&#39;t &#39;USER INSTALLATION DIRECTORY&#39; match with the Ruby version?", "body": "<p>This question was the second part of \"<a href=\"https://stackoverflow.com/questions/35215396/what-is-user-installation-directory-in-rubygems-env\">What is &quot;USER INSTALLATION DIRECTORY&quot; in rubyGems env</a>\" but finally it wasn't answered. </p>\n\n<p>Now I'm wondering why in my case <code>'USER INSTALLATION DIRECTORY</code> does not mach with the Ruby version. And another question is what option <code>bundle install</code> uses by default, maybe <code>--user-install</code>?</p>\n\n<p><code>rvm list</code>:</p>\n\n<pre><code> * ruby-2.5.0 [ x86_64 ]\n=&gt; ruby-2.5.1 [ x86_64 ]\n   ruby-2.6.0-preview1 [ x86_64 ]\n</code></pre>\n\n<p><code>gem env</code>:</p>\n\n<pre><code>RubyGems Environment:\n  - RUBYGEMS VERSION: 2.7.7\n  - RUBY VERSION: 2.5.1 (2018-03-29 patchlevel 57) [x86_64-linux]\n  - INSTALLATION DIRECTORY: /home/ivan/.rvm/gems/ruby-2.5.1\n  - USER INSTALLATION DIRECTORY: /home/ivan/.gem/ruby/2.5.0\n  ...\n</code></pre>\n"}, {"tags": ["ruby", "hash"], "answers": [{"comments": [{"owner": {"reputation": 117, "user_id": 10068674, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-8gRv54FhhWE/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7oH6R244hnLFuogLjfnpdDcQc_9-w/mo/photo.jpg?sz=128", "display_name": "some thing", "link": "https://stackoverflow.com/users/10068674/some-thing"}, "edited": false, "score": 1, "creation_date": 1535805629, "post_id": 52128095, "comment_id": 91206780, "body": "Hmm i tried your given code and it gives me what I&#39;m looking for. Thank you! But i actually have 24 keys so i have to map them each, I hope you can help me to strip down the code, I&#39;ll gladly appreciate it. And my array may contain 10+ hashes will it matter?"}, {"owner": {"reputation": 1556, "user_id": 2830852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31ea598b6bc18b59de1e77a4c6f6c3e5?s=128&d=identicon&r=PG", "display_name": "Tarek N. Elsamni", "link": "https://stackoverflow.com/users/2830852/tarek-n-elsamni"}, "reply_to_user": {"reputation": 117, "user_id": 10068674, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-8gRv54FhhWE/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7oH6R244hnLFuogLjfnpdDcQc_9-w/mo/photo.jpg?sz=128", "display_name": "some thing", "link": "https://stackoverflow.com/users/10068674/some-thing"}, "edited": false, "score": 1, "creation_date": 1535806788, "post_id": 52128095, "comment_id": 91207118, "body": "I&#39;ve updated my code to be more generic where you can define a set of keys to be summed up. If you are talking about 10+ hashes and 24 keys, I would not be concerned about performance. I&#39;d say it&#39;s a premature optimisation at this scale."}], "tags": [], "owner": {"reputation": 1556, "user_id": 2830852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31ea598b6bc18b59de1e77a4c6f6c3e5?s=128&d=identicon&r=PG", "display_name": "Tarek N. Elsamni", "link": "https://stackoverflow.com/users/2830852/tarek-n-elsamni"}, "is_accepted": true, "score": 1, "last_activity_date": 1535806686, "last_edit_date": 1535806686, "creation_date": 1535804905, "answer_id": 52128095, "question_id": 52127989, "link": "https://stackoverflow.com/questions/52127989/merging-adding-hashes-in-array-with-same-key/52128095#52128095", "title": "Merging/adding hashes in array with same key", "body": "<p>If you have the array as you mentioned in this structure:</p>\n\n<pre><code>array = [\n  {\"points\": 0, \"block\": 3},\n  {\"points\": 25, \"block\": 8},\n  {\"points\": 65, \"block\": 4}\n]\n</code></pre>\n\n<p>You can use the following code to achieve your goal:</p>\n\n<pre><code>result = {\n  points: array.map{ |item| item[:points] }.inject(:+),\n  block: array.map{ |item| item[:block] }.inject(:+)\n}\n</code></pre>\n\n<p>You will get this result:</p>\n\n<pre><code>{:points=&gt;90, :block=&gt;15}\n</code></pre>\n\n<p><strong>Note</strong>: This will iterate twice over the array. I'm trying to figure out a better way to iterate once and still have the same elegant/easy to ready code.</p>\n\n<p>If you want to do it more generically (more keys than <code>:points</code> and <code>:block</code>), then you can use this code:</p>\n\n<pre><code>array = [\n  {\"points\": 0, \"block\": 3},\n  {\"points\": 25, \"block\": 8},\n  {\"points\": 65, \"block\": 4}\n]\n\nkeys = [:points, :block] # or you can make it generic with array.first.keys\n\nresult = keys.map do |key|\n  [key, array.map{ |item| item.fetch(key, 0) }.inject(:+)]\nend.to_h\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 408, "user_id": 8051788, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/fYT2M.jpg?s=128&g=1", "display_name": "Akash Kinwad", "link": "https://stackoverflow.com/users/8051788/akash-kinwad"}, "is_accepted": false, "score": 1, "last_activity_date": 1535806256, "creation_date": 1535806256, "answer_id": 52128275, "question_id": 52127989, "link": "https://stackoverflow.com/questions/52127989/merging-adding-hashes-in-array-with-same-key/52128275#52128275", "title": "Merging/adding hashes in array with same key", "body": "<p>You can create method as below to get the result</p>\n\n<pre><code>def process_array(array)\n   points = array.map{|h| h[:points]}\n   block = array.map{|h| h[:block]}\n   result = {}\n   result['points'] = points.inject{ |sum, x| sum + x }\n   result['block'] = block.inject{ |sum, x| sum + x }\n  result\nend\n</code></pre>\n\n<p>and calling the method with array input will give you expected result.</p>\n\n<pre><code>[54] pry(main)&gt; process_array(array)\n=&gt; {\"points\"=&gt;90, \"block\"=&gt;15}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "is_accepted": false, "score": 0, "last_activity_date": 1535822460, "creation_date": 1535822460, "answer_id": 52130545, "question_id": 52127989, "link": "https://stackoverflow.com/questions/52127989/merging-adding-hashes-in-array-with-same-key/52130545#52130545", "title": "Merging/adding hashes in array with same key", "body": "<p>You can also use the Enumerator <a href=\"https://ruby-doc.org/core-2.5.0/Enumerator.html#method-i-each_with_object\" rel=\"nofollow noreferrer\">each_with_object</a>, using a hash as object.</p>\n\n<pre><code>result = array.each_with_object(Hash.new(0)) {|e, h| h[:points] += e[:points]; h[:block] += e[:block] }\n# =&gt; {:points=&gt;90, :block=&gt;15}\n</code></pre>\n\n<p><code>Hash.new(0)</code> means <a href=\"https://ruby-doc.org/core-2.5.1/Hash.html#method-i-default\" rel=\"nofollow noreferrer\">initialise the hash to default value</a> <code>0</code> for any keys, for example:</p>\n\n<pre><code>h = Hash.new(0)\nh[:whathever_key] # =&gt; 0\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 9971, "user_id": 8255744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de22299534b5a8ed244ee8ff4aa6c481?s=128&d=identicon&r=PG&f=1", "display_name": "Simple Lime", "link": "https://stackoverflow.com/users/8255744/simple-lime"}, "is_accepted": false, "score": 4, "last_activity_date": 1535831864, "last_edit_date": 1535831864, "creation_date": 1535822660, "answer_id": 52130569, "question_id": 52127989, "link": "https://stackoverflow.com/questions/52127989/merging-adding-hashes-in-array-with-same-key/52130569#52130569", "title": "Merging/adding hashes in array with same key", "body": "<p>You could <a href=\"https://ruby-doc.org/core/Hash.html#method-i-merge\" rel=\"nofollow noreferrer\"><code>merge</code></a> the hashes together, adding the values that are in both hashes:</p>\n\n<pre><code>result = array.reduce do |memo, next_hash|\n  memo.merge(next_hash) do |key, memo_value, next_hash_value|\n    memo_value + next_hash_value\n  end\nend\nresult # =&gt; {:points=&gt;90, :block=&gt;15}\n</code></pre>\n\n<p>and if your real hash has keys that don't respond well to <code>+</code>, you have access to the <code>key</code>, you could set up a case statement, to handle the keys differently, if needed.</p>\n"}, {"tags": [], "owner": {"reputation": 86, "user_id": 7362270, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-LiRx1XlChl4/AAAAAAAAAAI/AAAAAAAAMeU/zJyfKQ98pD0/photo.jpg?sz=128", "display_name": "Tom&#225;\u0161 Landovsk&#253;", "link": "https://stackoverflow.com/users/7362270/tom%c3%a1%c5%a1-landovsk%c3%bd"}, "is_accepted": false, "score": 0, "last_activity_date": 1537097541, "creation_date": 1537097541, "answer_id": 52353673, "question_id": 52127989, "link": "https://stackoverflow.com/questions/52127989/merging-adding-hashes-in-array-with-same-key/52353673#52353673", "title": "Merging/adding hashes in array with same key", "body": "<p>I was interested in how the <code>reduce</code> method introduced by \"Simple Lime\" worked and also how it would benchmark against simple iteration over the array and over the keys of each hash.</p>\n\n<p>Here is the code of the \"iteration\" approach:</p>\n\n<pre><code>Hash.new(0).tap do |result|\n  array.each do |hash|\n    hash.each do |key, val|\n      result[key] = result[key] + val\n    end\n  end\nend\n</code></pre>\n\n<p>I was surprised, that the \"iteration\" code performed 3 times better than the <code>reduce</code> approach.</p>\n\n<p>Here is the benchmark code <a href=\"https://gist.github.com/landovsky/6a1b29cbf13d0cf81bad12b6ba472416\" rel=\"nofollow noreferrer\">https://gist.github.com/landovsky/6a1b29cbf13d0cf81bad12b6ba472416</a></p>\n"}], "owner": {"reputation": 117, "user_id": 10068674, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-8gRv54FhhWE/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7oH6R244hnLFuogLjfnpdDcQc_9-w/mo/photo.jpg?sz=128", "display_name": "some thing", "link": "https://stackoverflow.com/users/10068674/some-thing"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 184, "favorite_count": 0, "accepted_answer_id": 52128095, "answer_count": 5, "score": -1, "last_activity_date": 1537097541, "creation_date": 1535804041, "last_edit_date": 1535946904, "question_id": 52127989, "link": "https://stackoverflow.com/questions/52127989/merging-adding-hashes-in-array-with-same-key", "title": "Merging/adding hashes in array with same key", "body": "<p>I have an array of hashes:</p>\n\n<pre><code>array = [\n  {\"points\": 0, \"block\": 3},\n  {\"points\": 25, \"block\": 8},\n  {\"points\": 65, \"block\": 4}\n]\n</code></pre>\n\n<p>I need to merge the hashes. I need the output to be:</p>\n\n<pre><code>{\"points\": 90, \"block\": 15}\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 171, "user_id": 10033841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e460c7435c8a361eb5d8295695a2d8e8?s=128&d=identicon&r=PG&f=1", "display_name": "dbac", "link": "https://stackoverflow.com/users/10033841/dbac"}, "edited": false, "score": 0, "creation_date": 1535797967, "post_id": 52127238, "comment_id": 91205005, "body": "if you need some more information I&#39;ll be glad to provide it"}, {"owner": {"reputation": 1672, "user_id": 338011, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IhgLu.jpg?s=128&g=1", "display_name": "Baptiste Mille-Mathias", "link": "https://stackoverflow.com/users/338011/baptiste-mille-mathias"}, "edited": false, "score": 0, "creation_date": 1535799837, "post_id": 52127238, "comment_id": 91205393, "body": "Hello and Welcome to stackoverflow. The current question is not the way it is expected to be, so read <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a> to have overall information and also <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> to know what information are expected to be provided, so you can <a href=\"https://stackoverflow.com/posts/52127238/edit\">edit</a> your question. Thanks"}], "answers": [{"tags": [], "owner": {"reputation": 10377, "user_id": 2832282, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ZJ4WG.jpg?s=128&g=1", "display_name": "Cyril Duchon-Doris", "link": "https://stackoverflow.com/users/2832282/cyril-duchon-doris"}, "is_accepted": false, "score": 0, "last_activity_date": 1535800930, "creation_date": 1535800930, "answer_id": 52127612, "question_id": 52127238, "link": "https://stackoverflow.com/questions/52127238/ruby-rails-argumenterror-in-index-key-must-be-32-characters/52127612#52127612", "title": "ruby rails: ArgumentError in index: key must be 32 characters", "body": "<p>It seems like you just started a new Rails application ? If so you should go straight to Rails 5.2 which seems to be the latest stable version at the time of writing.</p>\n\n<p>At the top of my Gemfile generated by <code>rails s</code> I have the following</p>\n\n<pre><code>source 'https://rubygems.org'\ngit_source(:github) { |repo| \"https://github.com/#{repo}.git\" }\n\nruby '2.5.1'\n\n# Rails\ngem 'rails', github: \"rails/rails\", branch: \"5-2-stable\"\n</code></pre>\n\n<p>Try to change your Gemfile with this and re-run <code>bundle</code></p>\n\n<p>Also, in order to manage your ruby versions, I highly suggest you switch to <a href=\"https://github.com/rbenv/rbenv\" rel=\"nofollow noreferrer\">rbenv</a> rather than have your system manage Ruby versions</p>\n"}], "owner": {"reputation": 171, "user_id": 10033841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e460c7435c8a361eb5d8295695a2d8e8?s=128&d=identicon&r=PG&f=1", "display_name": "dbac", "link": "https://stackoverflow.com/users/10033841/dbac"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 57, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1535809039, "creation_date": 1535797901, "last_edit_date": 1592644375, "question_id": 52127238, "link": "https://stackoverflow.com/questions/52127238/ruby-rails-argumenterror-in-index-key-must-be-32-characters", "title": "ruby rails: ArgumentError in index: key must be 32 characters", "body": "<p>I'm just a newbie in Rails.<br>\nI'm following the tutorial on <a href=\"https://guides.rubyonrails.org/getting_started.html\" rel=\"nofollow noreferrer\">https://guides.rubyonrails.org/getting_started.html</a> and I got this issue:\nI created a controller running\n<code>rails generate controller Welcome index</code>, then added <code>get 'welcome/index' </code> and <code>root 'welcome#index'</code> to <code>config/routes.rb</code>.\nOpening <code>localhost:3000</code> (default for ruby server) gives me this <a href=\"https://i.stack.imgur.com/JXkGQ.png\" rel=\"nofollow noreferrer\">error page</a></p>\n<p>I did a bit of research here on StackOverflow and GitHub, where I found that the issue could be solved by linking the rails 5-0-stable version on github in gemfile, but bundle install couldn't find the git file. I also tried changing config/routes.rb, but that doesn't seem to be the problem.\nI read some answers talking about changing the call in the source file, but I coldn't understand which file they were talking about (<a href=\"https://github.com/rails/rails/issues/25448\" rel=\"nofollow noreferrer\">https://github.com/rails/rails/issues/25448</a>)</p>\n<p>ruby and rails version: <br>\n<code>ruby 2.5.1p57 (2018-03-29 revision 63029) [x86_64-linux-gnu]</code> <br>\n<code>Rails 4.2.6</code></p>\n<p>PS: I don't think it's got anything to do with this, but I had some problems starting the server because bundle install gave <code>error: couldn't build native extensions</code>, which I solved installing ruby-dev via apt and some gems individually via <code>gem install</code>.</p>\n<p><strong>Edit:</strong></p>\n<p>Commands run from terminal:</p>\n<pre><code>$ rails new blog\n$ cd blog\n$ rails server\n</code></pre>\n<p>Files edited:</p>\n<pre><code>#config/routes.rb\nRails.application.routes.draw do\n  get 'welcome/index'\n  root 'welcome#index'\n  get 'layout/application'\nend\n</code></pre>\n<p>Thanks for your help!</p>\n<p>After trying to link github ruby 5.2:</p>\n<pre><code>$ bundle install\nFetching https://github.com/rails/rails.git\nsh: 1: git: not found\nRetrying `git clone 'https://github.com/rails/rails.git' &quot;~/.bundle/cache/git/rails-fcf0202857b07db1a0f6220dae5ca99319ca0f32&quot; --bare --no-hardlinks --quiet` due to error (2/4): Bundler::Source::Git::GitCommandError Git error: command `git clone 'https://github.com/rails/rails.git' &quot;~/.bundle/cache/git/rails-fcf0202857b07db1a0f6220dae5ca99319ca0f32&quot; --bare --no-hardlinks --quiet` in directory ~/script/ruby/blog has failed.sh: 1: git: not found\nGit error: command `git clone 'https://github.com/rails/rails.git'\n&quot;~/.bundle/cache/git/rails-fcf0202857b07db1a0f6220dae5ca99319ca0f32&quot; --bare\n--no-hardlinks --quiet` in directory ~/script/ruby/blog has failed.\n</code></pre>\n"}, {"tags": ["ruby", "user-interface", "command-line"], "comments": [{"owner": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "edited": false, "score": 0, "creation_date": 1535796034, "post_id": 52126733, "comment_id": 91204564, "body": "Maybe this helps: <a href=\"https://stackoverflow.com/questions/21445664/make-a-ruby-script-with-text-io-double-clickable-executable-file\" title=\"make a ruby script with text io double clickable executable file\">stackoverflow.com/questions/21445664/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 1523, "user_id": 6896906, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JiWcO.jpg?s=128&g=1", "display_name": "Zach Tuttle", "link": "https://stackoverflow.com/users/6896906/zach-tuttle"}, "is_accepted": false, "score": 0, "last_activity_date": 1535796545, "creation_date": 1535796545, "answer_id": 52127075, "question_id": 52126733, "link": "https://stackoverflow.com/questions/52126733/ruby-interactive-buttons-in-command-line-window/52127075#52127075", "title": "Ruby - Interactive Buttons in Command Line Window", "body": "<p>I think most people who desire this functionality via terminal end up utilizing the <a href=\"https://www.gnu.org/software/ncurses/\" rel=\"nofollow noreferrer\">ncurses library</a>. check this Gem out for using ncurses with Ruby: <a href=\"https://github.com/ruby/curses\" rel=\"nofollow noreferrer\">https://github.com/ruby/curses</a></p>\n"}], "owner": {"reputation": 161, "user_id": 6275391, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66e37308ad810c080150eb2ae8bcb7dc?s=128&d=identicon&r=PG&f=1", "display_name": "Voidableryzer", "link": "https://stackoverflow.com/users/6275391/voidableryzer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 90, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1535796545, "creation_date": 1535793712, "question_id": 52126733, "link": "https://stackoverflow.com/questions/52126733/ruby-interactive-buttons-in-command-line-window", "title": "Ruby - Interactive Buttons in Command Line Window", "body": "<p>I'm not sure if this is possible and, chances are, it isn't but is there any way to have a clickable button in a ruby command line?</p>\n\n<p>I mean, if you run a ruby script in the Ruby command line, can you have an area of the window be clickable and have something executed when it's clicked?</p>\n\n<p>I've been looking around for answers but so far, only Ruby on Rails and website solutions have come up.</p>\n\n<p>Thanks in advance for any help and answers.</p>\n"}, {"tags": ["ruby", "chef-infra", "chef-recipe"], "comments": [{"owner": {"reputation": 1100, "user_id": 108654, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6ae437fd594fd4c96ba19904c8eb4fc9?s=128&d=identicon&r=PG", "display_name": "gskillz", "link": "https://stackoverflow.com/users/108654/gskillz"}, "edited": false, "score": 0, "creation_date": 1536189451, "post_id": 52126425, "comment_id": 91338677, "body": "did you try to use   log &#39;zookeeper_upgraded&#39; do   message node.run_state[&#39;zookeeper_upgraded&#39;]   level :info end"}, {"owner": {"reputation": 4123, "user_id": 785523, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b51864374e248ee87686628bc8528677?s=128&d=identicon&r=PG", "display_name": "tuk", "link": "https://stackoverflow.com/users/785523/tuk"}, "reply_to_user": {"reputation": 1100, "user_id": 108654, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6ae437fd594fd4c96ba19904c8eb4fc9?s=128&d=identicon&r=PG", "display_name": "gskillz", "link": "https://stackoverflow.com/users/108654/gskillz"}, "edited": false, "score": 0, "creation_date": 1536673476, "post_id": 52126425, "comment_id": 91502572, "body": "Yes. It was printing empty for <code>node.run_state[&#39;zookeeper_upgraded&#39;]</code>"}], "owner": {"reputation": 4123, "user_id": 785523, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b51864374e248ee87686628bc8528677?s=128&d=identicon&r=PG", "display_name": "tuk", "link": "https://stackoverflow.com/users/785523/tuk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 284, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1535790962, "creation_date": 1535790962, "question_id": 52126425, "link": "https://stackoverflow.com/questions/52126425/how-to-log-the-value-of-node-run-state-in-a-chef-recipe", "title": "How to log the value of node.run_state in a chef recipe?", "body": "<p>I have a recipe like below</p>\n\n<pre><code>target = node['zookeeper']['override']['target']\nremote_file target do\n    source node['zookeeper']['override']['url']\n    owner   'root'\n    group   'root'\n    mode    '0644'\n    action  :create_if_missing\nend\n\nruby_block 'check_zookeeper_upgraded' do\n    block do\n        node.run_state['zookeeper_upgraded'] = File.readlink('/usr/lib/zookeeper/zookeeper.jar').equal?(target)\n    end\nend\n\nlink '/usr/lib/zookeeper/zookeeper.jar' do\n    group 'root'\n    owner 'root'\n    to target\n    action :create\n    not_if { node.run_state['zookeeper_upgraded'] }\nend\n\nfile '/usr/lib/zookeeper/zookeeper-3.4.8.jar' do\n    action :delete\n    only_if { ::File.exist? '/usr/lib/zookeeper/zookeeper-3.4.8.jar' }\nend\n\nfile '/usr/lib/zookeeper/zookeeper-3.4.5-cdh5.15.0.jar' do\n    action :delete\n    only_if { ::File.exist? '/usr/lib/zookeeper/zookeeper-3.4.5-cdh5.15.0.jar' }\nend\n\nservice 'zookeeper-server' do\n    provider Chef::Provider::Service::Upstart\n    action :restart\n    ignore_failure true\n    only_if { !node.run_state['zookeeper_upgraded'] &amp;&amp; !::File.exist?('/etc/init/zookeeper-server.override')}\nend\n</code></pre>\n\n<p>Can someone let me know how can I log the value of <code>node.run_state['zookeeper_upgraded']</code> so that I can check if <code>zookeeper-server</code> is restarted or not in the end?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec"], "comments": [{"owner": {"reputation": 5141, "user_id": 193980, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/aafa8848c4b764f080b1b31a51eab73d?s=128&d=identicon&r=PG", "display_name": "Phlip", "link": "https://stackoverflow.com/users/193980/phlip"}, "edited": false, "score": 0, "creation_date": 1535783664, "post_id": 52125521, "comment_id": 91201866, "body": "Can you mock the service call with Mocha? That&#39;s the standard answer to &quot;how do I test around an annoying system call?&quot;"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1535784395, "post_id": 52125521, "comment_id": 91202003, "body": "<code>s&#47;Mocha&#47;any mocking library of your choice&#47;g</code>"}, {"owner": {"reputation": 37, "user_id": 8233084, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/02125f8d98bd32baadc6ed30ea76cd5f?s=128&d=identicon&r=PG&f=1", "display_name": "Wonderboy111", "link": "https://stackoverflow.com/users/8233084/wonderboy111"}, "reply_to_user": {"reputation": 5141, "user_id": 193980, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/aafa8848c4b764f080b1b31a51eab73d?s=128&d=identicon&r=PG", "display_name": "Phlip", "link": "https://stackoverflow.com/users/193980/phlip"}, "edited": false, "score": 0, "creation_date": 1535784406, "post_id": 52125521, "comment_id": 91202009, "body": "@Phlip I see, thank you"}, {"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1535792771, "post_id": 52125521, "comment_id": 91203864, "body": "Just to clearify: You want to write a spec for your <code>run</code> method, but you do want <code>Importer::Partner.get_details(product_code).new</code> to do nothing (aka stub calls to it)?"}, {"owner": {"reputation": 37, "user_id": 8233084, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/02125f8d98bd32baadc6ed30ea76cd5f?s=128&d=identicon&r=PG&f=1", "display_name": "Wonderboy111", "link": "https://stackoverflow.com/users/8233084/wonderboy111"}, "reply_to_user": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1535797837, "post_id": 52125521, "comment_id": 91204972, "body": "@spickermann Yes that is correct"}], "answers": [{"tags": [], "owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "is_accepted": false, "score": 0, "last_activity_date": 1535809115, "last_edit_date": 1535809115, "creation_date": 1535808795, "answer_id": 52128602, "question_id": 52125521, "link": "https://stackoverflow.com/questions/52125521/how-do-you-skip-a-service-call-in-a-rspec-test/52128602#52128602", "title": "How do you skip a service call in a rspec test", "body": "<p>RSpec has a very capable stubbing and mocking library built in (<a href=\"https://relishapp.com/rspec/rspec-mocks/v/3-8/docs\" rel=\"nofollow noreferrer\">rspec mocks</a>). </p>\n\n<pre><code>require 'spec_helper'\n\nmodule Importer\n  class Partner\n    def self.get_details(product_code)\n      \"original return value\"\n    end\n  end\nend\n\nclass FooService\n  def self.run\n    Importer::Partner.get_details('bar')\n  end\nend\n\nRSpec.describe FooService do\n  let(:partner_double) { class_double(\"Importer::Partner\") }\n\n  before do\n    stub_const(\"Importer::Partner\", partner_double)\n    allow(partner_double).to receive(:get_details).and_return 'our mocked value'\n  end\n\n  it \"creates a double for the dependency\" do\n    expect(FooService.run).to eq 'our mocked value'\n  end\nend\n</code></pre>\n\n<p><a href=\"https://relishapp.com/rspec/rspec-mocks/docs/verifying-doubles/using-a-class-double\" rel=\"nofollow noreferrer\"><code>class_double</code></a> creates a double for the class and you can set the return values by using <code>.expect</code> and <code>.allow</code> and the mocking interface. This is quite useful since you can stub out the <code>new</code> or <code>intialize</code> methods to return a double or spy.</p>\n\n<p><a href=\"https://relishapp.com/rspec/rspec-mocks/v/3-8/docs/mutating-constants/stub-defined-constant\" rel=\"nofollow noreferrer\"><code>stub_constant</code></a> will reset the constant to its previous value when the spec is done.</p>\n\n<p>That said you can avoid the use of <code>stub_constant</code> by using constructor injection in your services:</p>\n\n<pre><code>class PhotoImportService\n\n  attr_accessor :client, :username\n\n  def initialize(username, api_client: nil)\n    @username = username\n    @client = api_client || APIClient.new(ENV.fetch('API_KEY'))\n  end\n\n  def run\n    client.get_photos(username)\n  end\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": false, "score": 0, "last_activity_date": 1535811148, "creation_date": 1535811148, "answer_id": 52128910, "question_id": 52125521, "link": "https://stackoverflow.com/questions/52125521/how-do-you-skip-a-service-call-in-a-rspec-test/52128910#52128910", "title": "How do you skip a service call in a rspec test", "body": "<p>I would stub <code>Importer::Partner.get_details</code> to return a <code>double</code> that responds to <code>new</code>:</p>\n\n<pre><code>context 'is valid' do\n  before do\n    allow(Importer::Partner).to receive(:get_details).and_return(double(new: nil))\n  end  \n\n  # it ...\nend\n</code></pre>\n\n<p>Depending on your needs you might want to add an expectation that the mock was called with the correct parameters and that <code>new</code> was actually called on the mock too:</p>\n\n<pre><code>context 'is valid' do\n  let(:mock) { double(new: nil) }\n\n  before do\n    allow(Importer::Partner).to receive(:get_details).and_return(double(new: nil))\n  end  \n\n  it \"calls the service\" do\n    an_instance.run\n\n    expect(Importer::Partner).to have_received(:get_details).with(\n      foo: 'bar' # the arguments you would expect\n    )\n    expect(mock).to have_received(:new)\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 37, "user_id": 8233084, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/02125f8d98bd32baadc6ed30ea76cd5f?s=128&d=identicon&r=PG&f=1", "display_name": "Wonderboy111", "link": "https://stackoverflow.com/users/8233084/wonderboy111"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1175, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1535811148, "creation_date": 1535783443, "last_edit_date": 1535801070, "question_id": 52125521, "link": "https://stackoverflow.com/questions/52125521/how-do-you-skip-a-service-call-in-a-rspec-test", "title": "How do you skip a service call in a rspec test", "body": "<p>Im writing a test for this service.</p>\n\n<pre><code>  def run\n    sort_offers(product).each do |product_code|\n      ......\n      offer.update(poduct_params)\n      Importer::Partner.get_details(product_code).new\n    end\n  end\n</code></pre>\n\n<p>It's calling a service which in some cases will override the values that were saved when running <code>offer.update(product_prams)</code>. How would I go about skipping the service call within my test?</p>\n\n<p>Here is the example of my test</p>\n\n<pre><code> context 'is valid' do\n  .... .....\n  before do\n    Importer::ProductCodes(product).run\n  end\n  it ......\nend\n</code></pre>\n"}, {"tags": ["ruby", "enumerable"], "comments": [{"owner": {"reputation": 73209, "user_id": 290394, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d7908f05c89e965f6bc5308ad6f41256?s=128&d=identicon&r=PG", "display_name": "steenslag", "link": "https://stackoverflow.com/users/290394/steenslag"}, "edited": false, "score": 1, "creation_date": 1536252931, "post_id": 52125039, "comment_id": 91367114, "body": "Last line is equivalent to <code>inf = 1.step</code>"}], "answers": [{"comments": [{"owner": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 0, "creation_date": 1535784388, "post_id": 52125389, "comment_id": 91202001, "body": "Thanks! I&#39;m not sure I understand all that. The <code>Enumerator::new</code> docs are unclear and the Enumerator::Yielder docs are blank. Could you annotate it with some comments? Also, is the <code>dup</code> necessary?"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 0, "creation_date": 1535784772, "post_id": 52125389, "comment_id": 91202077, "body": "Updated. Basically, the <code>Enumerator</code> is something that either calls <code>yield</code> or raises <code>StopIteration</code> when there are no more elements. It stays behind the internal implementation of <code>to_enum</code>."}, {"owner": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 0, "creation_date": 1535785664, "post_id": 52125389, "comment_id": 91202276, "body": "Thanks, I think I get it. <code>input.dup</code> is just a shallow clone of the Array of arguments so you can <code>input.shift</code> rather than use a counter. <code>input.first.peek rescue input.shift</code> advances to the next enum when the current one is empty (I&#39;ve not seen <code>resuce</code> as a statement modifier before). <code>raise StopIteration if input.empty?</code> ends the block when there&#39;s no enums left. <code>yielder &lt;&lt; input.first.next</code> gets the next value off the current enum and yields it."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 0, "creation_date": 1535786345, "post_id": 52125389, "comment_id": 91202442, "body": "Yes, exactly. I am not sure, though, that this solution is somehow better than yours. Honestly, I like the class and delegation to nested <code>enum</code> more."}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 4, "last_activity_date": 1535784616, "last_edit_date": 1535784616, "creation_date": 1535782229, "answer_id": 52125389, "question_id": 52125039, "link": "https://stackoverflow.com/questions/52125039/turning-several-enumerables-into-one/52125389#52125389", "title": "Turning several Enumerables into one", "body": "<p>Well, it might be done with standard library using <a href=\"https://ruby-doc.org/core/Enumerator.html\" rel=\"nofollow noreferrer\"><code>Enumerator</code></a>. The advantage of this approach would be it returns the <em>real</em> enumerator, that might be mapped, reduced etc.</p>\n\n<pre><code>MULTI_ENUM = lambda do |*input|\n  # dup is needed here to prevent\n  #  a mutation of inputs when given\n  #  as a splatted param\n  # (due to `input.shift` below)\n  input = input.dup.map(&amp;:to_enum)\n  Enumerator.new do |yielder|\n    loop do\n      # check if the `next` is presented\n      #  and mutate the input swiping out\n      #  the first (already iterated) elem\n      input.first.peek rescue input.shift\n      # stop iteration if there is no input left\n      raise StopIteration if input.empty?\n      # extract the next element from \n      #  the currently iterated enum and\n      #  append it to our new Enumerator\n      yielder &lt;&lt; input.first.next\n    end\n  end\nend\n\nMULTI_ENUM.(1..3, 4.upto(5), [6, 7]).\n  map { |e| e ** 2 }\n\n#\u21d2 [1, 4, 9, 16, 25, 36, 49]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 0, "creation_date": 1536166858, "post_id": 52180166, "comment_id": 91330098, "body": "Thanks for the answer. Using <code>arr &lt;&lt; e.to_a</code> means all the enumerated objects are turned into array, so it won&#39;t work for my purposes. For example, feed it <code>inf = Enumerator.new { |y| a = 1; loop { y &lt;&lt; a; a +=1 } };</code> and it will consume all memory."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1536243634, "post_id": 52180166, "comment_id": 91361543, "body": "Within the frames of this solution one does not need to flatten, just use <code>Array#concat</code>."}], "tags": [], "owner": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "is_accepted": false, "score": 0, "last_activity_date": 1536134753, "creation_date": 1536134753, "answer_id": 52180166, "question_id": 52125039, "link": "https://stackoverflow.com/questions/52125039/turning-several-enumerables-into-one/52180166#52180166", "title": "Turning several Enumerables into one", "body": "<p>I ended up with this solution, maybe is close to what you already tried:</p>\n\n<pre><code>def enumerate(*enum)\n  enum.each_with_object([]) { |e, arr| arr &lt;&lt; e.to_a }.flatten\nend\n\nenumerate( 1..3, 5.upto(8), 3.times, 'a'..'c' ).each { |e| p e }\n\n# =&gt; 1, 2, 3, 5, 6, 7, 8, 0, 1, 2, \"a\", \"b\", \"c\"\n</code></pre>\n\n<p>Or (same mechanics):</p>\n\n<pre><code>def enumerate(*enum)\n  enum.flat_map { |e| e.to_a }\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 0, "creation_date": 1536252136, "post_id": 52206709, "comment_id": 91366717, "body": "Thanks! Just what I&#39;m looking for. I&#39;ll wrap that up into a little function. BTW I can&#39;t find documentation for <code>force</code>. I see it&#39;s just an alias for <code>to_a</code>."}, {"owner": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 0, "creation_date": 1536254970, "post_id": 52206709, "comment_id": 91368082, "body": "I see your point. It is literally just an alias for <code>to_a</code>: <code>rb_define_alias(rb_cLazy, &quot;force&quot;, &quot;to_a&quot;);</code> I found a bit of documentation in passing in <code>Enumerator::Lazy#new</code>: &quot;<i>When the enumerator is actually enumerated (e.g. by calling force), obj will be enumerated and each value passed to the given block.</i>&quot; Curious oversight that it&#39;s not a documented method."}, {"owner": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "edited": false, "score": 0, "creation_date": 1536258691, "post_id": 52206709, "comment_id": 91369800, "body": "Lazy? I must study it. It seems that <code>1..Float::INFINITY</code> works as well instead of <code>inf</code>. Isn&#39;t it?"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "edited": false, "score": 0, "creation_date": 1536260814, "post_id": 52206709, "comment_id": 91370691, "body": "@iGian as well as <code>1.step</code>, yes."}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": true, "score": 2, "last_activity_date": 1536245116, "creation_date": 1536245116, "answer_id": 52206709, "question_id": 52125039, "link": "https://stackoverflow.com/questions/52125039/turning-several-enumerables-into-one/52206709#52206709", "title": "Turning several Enumerables into one", "body": "<p>After all. Use <a href=\"https://ruby-doc.org/core/Enumerator/Lazy.html#method-i-flat_map\" rel=\"nofollow noreferrer\"><code>Enumerable::Lazy#flat_map</code></a> with <code>.each.lazy</code> on elements:</p>\n\n<pre><code>inf = Enumerator.new { |y| a = 1; loop { y &lt;&lt; a; a += 1 } }\n[(1..3).to_a, inf].lazy.flat_map { |e| e.each.lazy }.take(10).force\n#\u21d2 [1, 2, 3, 1, 2, 3, 4, 5, 6, 7]\n</code></pre>\n"}], "owner": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 97, "favorite_count": 0, "accepted_answer_id": 52206709, "answer_count": 3, "score": 3, "last_activity_date": 1536245116, "creation_date": 1535778338, "last_edit_date": 1536167440, "question_id": 52125039, "link": "https://stackoverflow.com/questions/52125039/turning-several-enumerables-into-one", "title": "Turning several Enumerables into one", "body": "<p>Is there a way to get several Enumerable objects to appear as a single Enumerable without flattening it into an Array? Currently I've written a class like so, but I feel there must be a built-in solution.</p>\n\n<pre><code>class Enumerables\n  include Enumerable\n\n  def initialize\n    @enums = []\n  end\n\n  def &lt;&lt;(enum)\n    @enums &lt;&lt; enum\n  end\n\n  def each(&amp;block)\n    if block_given?\n      @enums.each { |enum|\n        puts \"Enumerating #{enum}\"\n        enum.each(&amp;block)\n      }\n    else\n      to_enum(:each)\n    end\n  end\nend\n\nenums = Enumerables.new\nenums &lt;&lt; 1.upto(3)\nenums &lt;&lt; 5.upto(8)\nenums.each { |s| puts s }\n</code></pre>\n\n<p>As a simple example, it needs to be able to accept an infinite enumerator like so.</p>\n\n<pre><code>inf = Enumerator.new { |y| a = 1; loop { y &lt;&lt; a; a +=1 } };\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "devise"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1535774734, "post_id": 52124625, "comment_id": 91200507, "body": "Add a line <code>puts params.inspect</code> in the very beginning of your <code>create</code> method and check what <code>params</code> come from the frontend."}, {"owner": {"reputation": 55, "user_id": 10108195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77bda6acfa7065d1562707a6805fac4c?s=128&d=identicon&r=PG&f=1", "display_name": "Belvin", "link": "https://stackoverflow.com/users/10108195/belvin"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1535775094, "post_id": 52124625, "comment_id": 91200550, "body": "added in edits, thank you."}], "answers": [{"comments": [{"owner": {"reputation": 55, "user_id": 10108195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77bda6acfa7065d1562707a6805fac4c?s=128&d=identicon&r=PG&f=1", "display_name": "Belvin", "link": "https://stackoverflow.com/users/10108195/belvin"}, "edited": false, "score": 0, "creation_date": 1535775409, "post_id": 52124800, "comment_id": 91200587, "body": "Hey man, thaaaankyou.  It wasn&#39;t clear to me that the parameters needed &#39;accept&#39; to specify parameters. Really now its clear.  You are a shining star!"}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": true, "score": 0, "last_activity_date": 1535775255, "creation_date": 1535775255, "answer_id": 52124800, "question_id": 52124625, "link": "https://stackoverflow.com/questions/52124625/why-are-boolean-attributes-saved-as-null-even-when-assigned-default-mysql-values/52124800#52124800", "title": "why are boolean attributes saved as null even when assigned default mysql values", "body": "<p>This is what comes as params from your frontend:</p>\n\n<pre><code>..., \"accept\"=&gt;{\"accepted\"=&gt;\"1\", \"complete\"=&gt;\"0\"}, ...\n</code></pre>\n\n<p>meaning in your code you should respect this format:</p>\n\n<pre><code>:accepted =&gt; params['accept']['accepted'],\n:complete =&gt; params['accept']['complete']\n</code></pre>\n"}], "owner": {"reputation": 55, "user_id": 10108195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77bda6acfa7065d1562707a6805fac4c?s=128&d=identicon&r=PG&f=1", "display_name": "Belvin", "link": "https://stackoverflow.com/users/10108195/belvin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41, "favorite_count": 0, "accepted_answer_id": 52124800, "answer_count": 1, "score": 0, "last_activity_date": 1535775255, "creation_date": 1535772562, "last_edit_date": 1535775075, "question_id": 52124625, "link": "https://stackoverflow.com/questions/52124625/why-are-boolean-attributes-saved-as-null-even-when-assigned-default-mysql-values", "title": "why are boolean attributes saved as null even when assigned default mysql values", "body": "<p>This must be a straightforward error but i cannot pinpoint why its happening.  I have changed my post from an earlier question which I did not really post accurately from my project.  Here is a better post for those of you who might have seen the previous one.  Essentially, I have two boolean values, <code>:accepted</code>, and <code>:complete</code>.  I have assigned default <code>:accepted =&gt; true</code>, and <code>:complete =&gt; false</code>, but still they save as null when I create a new <code>:accept</code> object.  Files:</p>\n\n<p>accepts_controller.rb (create, and params)</p>\n\n<pre><code>def create\n  @self_delivery = SelfDelivery.find_by(\n    id: params[:self_delivery_id])\n\n  begin\n    @accept = Accept.create(\n      :user_id =&gt; current_user.id,\n      :self_delivery_id =&gt; @self_delivery.id,\n      :accepted =&gt; params[:accepted],\n      :complete =&gt; params[:complete])\n\n  rescue ActiveRecord::RecordNotUnique =&gt; e\n    flash[:notice]= 'Duplicate Record'\n  end\n\n  if @accept.save!\n    redirect_to accept_path(@accept)\n    flash[:notice]= 'Accept was successfully created.'\n  end\nend\n</code></pre>\n\n<p>new.html.erb</p>\n\n<pre><code>&lt;h1&gt;New Accept&lt;/h1&gt;\n\n&lt;%= form_with(model: @accept, url: self_delivery_accepts_path(:user_id =&gt; params[:user_id], :self_delivery_id =&gt; params[:self_delivery_id]), :method =&gt; :post) do |form| %&gt;\n&lt;% if @accept.errors.any? %&gt;\n&lt;div id=\"error_explanation\"&gt;\n  &lt;h2&gt;&lt;%= pluralize(@accept.errors.count, \"error\") %&gt; prohibited this accept from being saved:&lt;/h2&gt;\n\n  &lt;ul&gt;\n  &lt;% @accept.errors.full_messages.each do |message| %&gt;\n    &lt;li&gt;&lt;%= message %&gt;&lt;/li&gt;\n  &lt;% end %&gt;\n  &lt;/ul&gt;\n &lt;/div&gt;\n&lt;% end %&gt;\n\n&lt;div class=\"field\"&gt;\n&lt;%= form.label :accepted %&gt;\n&lt;%= form.check_box :accepted, checked: true %&gt;\n&lt;/div&gt;\n\n&lt;div class=\"field\"&gt;\n&lt;%= form.label :complete %&gt;\n&lt;%= form.check_box :complete, checked: true %&gt;\n&lt;/div&gt;\n\n&lt;div class=\"actions\"&gt;\n&lt;%= form.submit %&gt;\n&lt;/div&gt;\n&lt;% end %&gt;\n\n\n&lt;%= link_to 'Back', self_delivery_accepts_path(:self_delivery_id =&gt; params[:self_delivery_id], :accepted =&gt; params[:accepted], :complete =&gt; params[:complete]) %&gt;\n</code></pre>\n\n<p>puts params.inspect</p>\n\n<pre><code>&lt;ActionController::Parameters {\"utf8\"=&gt;\"\u2713\", \"authenticity_token\"=&gt;\"ANOwCS3enYdqqcN01iAJg7EgRDhAC/Gpb3/h6yCGz2qSrKEz874ANBYeKGQuKSc3ctopIixI4rKiKuC5FJdsnQ==\", \"accept\"=&gt;{\"accepted\"=&gt;\"1\", \"complete\"=&gt;\"0\"}, \"commit\"=&gt;\"Create Accept\", \"controller\"=&gt;\"accepts\", \"action\"=&gt;\"create\", \"self_delivery_id\"=&gt;\"1\"} permitted: false&gt;\n</code></pre>\n"}, {"tags": ["ruby", "syntax", "boolean-expression"], "answers": [{"tags": [], "owner": {"reputation": 5141, "user_id": 193980, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/aafa8848c4b764f080b1b31a51eab73d?s=128&d=identicon&r=PG", "display_name": "Phlip", "link": "https://stackoverflow.com/users/193980/phlip"}, "is_accepted": false, "score": 3, "last_activity_date": 1535754826, "last_edit_date": 1535754826, "creation_date": 1535754411, "answer_id": 52123246, "question_id": 52123186, "link": "https://stackoverflow.com/questions/52123186/why-does-this-boolean-statement-in-ruby-give-an-error/52123246#52123246", "title": "Why does this Boolean statement in Ruby give an error?", "body": "<p>Ruby is space sensitive and, unlike the syntax highlighter used in this website, Ruby employs \"maximum munch\" when parsing operators.</p>\n\n<p><code>3.&lt;</code> is different from <code>3. &lt;</code>, because <code>.&lt;</code> parses as \"send the &lt; message to the integer 3.\"</p>\n\n<p>Add a space. Better, never leave a dangling dot, for just this reason, and code <code>3.0 &lt; 1</code>.</p>\n\n<p>Next, <code>3.&gt;5 || 3.&gt;(2)</code> parses as <code>3.&gt;(5 || 3.&gt;(2))</code>, because of Ruby's magical disappearing parentheses. Follow your style guide, and add spaces around almost all binary operators. The few idiomatic ones where you shouldn't are <code>.</code>, <code>.&amp;</code>, <code>..</code>, <code>**</code>, etc...</p>\n"}, {"tags": [], "owner": {"reputation": 74087, "user_id": 214790, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f878c8230342730990acd21f889301d4?s=128&d=identicon&r=PG", "display_name": "matt", "link": "https://stackoverflow.com/users/214790/matt"}, "is_accepted": true, "score": 2, "last_activity_date": 1535767953, "creation_date": 1535767953, "answer_id": 52124309, "question_id": 52123186, "link": "https://stackoverflow.com/questions/52123186/why-does-this-boolean-statement-in-ruby-give-an-error/52124309#52124309", "title": "Why does this Boolean statement in Ruby give an error?", "body": "<p>The confusion here is due to using <code>.</code> to make Ruby parse the comparisons as method calls, rather than the more normal binary operator such as <code>3 &gt; 2</code>. In Ruby operators such as <code>&gt;</code> are ultimately <a href=\"http://ruby-doc.org/core-2.5.1/Integer.html#method-i-3E\" rel=\"nofollow noreferrer\">handled as methods</a>, but the parser has special cases to allow you to use the more familiar syntax.</p>\n\n<p>If you imagine there is a method called <code>gt</code> on integers, and you rewrite your examples using it instead of <code>&gt;</code> it might be clearer what it happening.</p>\n\n<p>Your first example, <code>3.&gt;5 || 3.&gt;2</code>, will be equivalent to:</p>\n\n<pre><code>3.gt 5 || 3.gt 2\n</code></pre>\n\n<p>which Ruby tries to parse as</p>\n\n<pre><code>3.gt (5 || 3.gt) 2\n</code></pre>\n\n<p>That <code>2</code> at the end is the <code>unexpected tINTEGER</code> that Ruby complains about.</p>\n\n<p>The second example, <code>3.&gt;5 || 3.&gt;</code> will be parsed as something like this:</p>\n\n<pre><code>3.gt (5 || 3.gt)\n</code></pre>\n\n<p>This seems nonsensical because we know that <code>gt</code> is really the binary operator <code>&gt;</code> and that it should have a second operator. Since Ruby is parsing it as if it was a method it has no way of knowing how many arguments there should be. As far as the parser knows the <code>gt</code> method may not expect any arguments (we could have monkey patched <code>&gt;</code> to not expect an argument). Since the evaluation of the expression <code>5 || 3.&gt;</code> short circuits to <code>5</code>, the <code>3.&gt;</code> part is never executed so no error occurs.</p>\n\n<p>If you write the same expression but without using <code>.</code>, the Ruby parser knows that this is a binary operator and will expect the second operator:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>eval '3&gt;5 || 3 &gt;'\nSyntaxError: (eval):1: syntax error, unexpected end-of-input\n3&gt;5 || 3 &gt;\n          ^\n</code></pre>\n\n<p>The last example, <code>3.&gt;(5) || 3.&gt;(2)</code>, would be parsed as:</p>\n\n<pre><code>3.gt(5) || 3.gt(2)\n</code></pre>\n\n<p>Because of the parentheses there is no ambiguity and it is clear that the <code>2</code> is an argument to the method call, so you get the correct answer.</p>\n"}], "owner": {"reputation": 122, "user_id": 9706085, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6fc5b44b4df55e168af62f2d71b21459?s=128&d=identicon&r=PG&f=1", "display_name": "Aaron Cohen", "link": "https://stackoverflow.com/users/9706085/aaron-cohen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 92, "favorite_count": 0, "accepted_answer_id": 52124309, "answer_count": 2, "score": 4, "last_activity_date": 1535767953, "creation_date": 1535753962, "last_edit_date": 1535754121, "question_id": 52123186, "link": "https://stackoverflow.com/questions/52123186/why-does-this-boolean-statement-in-ruby-give-an-error", "title": "Why does this Boolean statement in Ruby give an error?", "body": "<p>This is probably simple, but I don't understand why this statement isn't valid Ruby code:</p>\n\n<pre><code>3.&gt;5 || 3.&gt;2 \nSyntaxError: unexpected tINTEGER, expecting end-of-input\n</code></pre>\n\n<p>Why this one is:</p>\n\n<pre><code>3.&gt;5 || 3.&gt; #this seems nonsensical\n=&gt; false\n</code></pre>\n\n<p>And why by my book this one seems to give a misleading answer</p>\n\n<pre><code>3.&gt;5 || 3.&gt;(2)\n=&gt; false\n</code></pre>\n\n<p>Yet, this one gives the \"right\" answer</p>\n\n<pre><code>3.&gt;(5) || 3.&gt;(2)\n=&gt; true\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "serialization", "model", "include"], "answers": [{"comments": [{"owner": {"reputation": 93, "user_id": 10028467, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eITkp.jpg?s=128&g=1", "display_name": "Daniel Disblu", "link": "https://stackoverflow.com/users/10028467/daniel-disblu"}, "edited": false, "score": 0, "creation_date": 1535826277, "post_id": 52124926, "comment_id": 91212418, "body": "Okey, I tried that way, but a little thing that I didn&#39;t mention is that I don&#39;t want to send the <code>total_vacancies</code> multiple times because if I put the method in the serializer will work, but imagine that I have 100 vacancies, then the <code>total_vacancies</code> will repeat as attribute 100 times, and I just want it to be 1 time, that&#39;s why I want it to put it as an include of another object or something like that."}], "tags": [], "owner": {"reputation": 689, "user_id": 2875377, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4a9d994f85c436f7bf13c592e6b8989e?s=128&d=identicon&r=PG&f=1", "display_name": "praga2050", "link": "https://stackoverflow.com/users/2875377/praga2050"}, "is_accepted": true, "score": 1, "last_activity_date": 1535777188, "last_edit_date": 1535777188, "creation_date": 1535776852, "answer_id": 52124926, "question_id": 52122998, "link": "https://stackoverflow.com/questions/52122998/render-multiple-includes-in-json-with-rails-5/52124926#52124926", "title": "Render multiple includes in json with rails 5", "body": "<p>I assume TotalVacancies is another table.</p>\n\n<p>You need to have separate serializer for each one and <code>VacancyDetailSerializer</code> must be modified like below </p>\n\n<p>if TotalVacancies is not a separate table. If TotalVacancies is not a separate table then use the <code>has_many</code> which i commented below and use its corresponding Serializer: <code>TotalVacanciesSerializer</code></p>\n\n<pre><code>class VacancyDetailSerializer &lt; ActiveModel::Serializer\n\n  attributes :total_vacancies\n\n  #has_many :total_vacancies\n  has_one :restaurant     \n\n  def total_vacancies\n   self.object.count\n  end\nend\n\n\n# total_vacancies_serializer.rb\nclass TotalVacanciesSerializer &lt; ActiveModel::Serializer\n\nend\n\n# restaurant_serializer.rb\nclass RestaurantSerializer &lt; ActiveModel::Serializer\n\nend\n</code></pre>\n\n<p>You dont need to include like this in render. Since we have added in VacanciesSerializer below code should itself include TotalVacancies and Restaurant</p>\n\n<p>Also you can control the list of attributes in Restaurant and TotalVacancies </p>\n\n<pre><code>vacancy = Vacancy.find(params[:id])\nrender json: vacancy, \n       serializer: VacancyDetailSerializer\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 93, "user_id": 10028467, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eITkp.jpg?s=128&g=1", "display_name": "Daniel Disblu", "link": "https://stackoverflow.com/users/10028467/daniel-disblu"}, "is_accepted": false, "score": 0, "last_activity_date": 1535831325, "creation_date": 1535831325, "answer_id": 52131652, "question_id": 52122998, "link": "https://stackoverflow.com/questions/52122998/render-multiple-includes-in-json-with-rails-5/52131652#52131652", "title": "Render multiple includes in json with rails 5", "body": "<p><strong>Solution given by Ian Lewis on Facebook:</strong></p>\n\n<p>Just simply put </p>\n\n<pre><code>render json: { vacancy: vacancy, vacancy_count: Vacancy.count }\n</code></pre>\n\n<p>And then everything works perfectly, the final code was like this:</p>\n\n<pre><code>render json: { vacancy: vacancy, vacancy_count: Vacancy.count },\n             each_serializer: VacancyDetailSerializer,\n             include: [:restaurant]\n</code></pre>\n\n<p><em>Source:</em></p>\n\n<p><a href=\"https://www.facebook.com/groups/railsrocks/permalink/10151113078349957/?comment_id=10151113264214957&amp;reply_comment_id=10151113313639957&amp;notif_id=1535830677954887&amp;notif_t=group_comment\" rel=\"nofollow noreferrer\">https://www.facebook.com/groups/railsrocks/permalink/10151113078349957/?comment_id=10151113264214957&amp;reply_comment_id=10151113313639957&amp;notif_id=1535830677954887&amp;notif_t=group_comment</a></p>\n"}], "owner": {"reputation": 93, "user_id": 10028467, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eITkp.jpg?s=128&g=1", "display_name": "Daniel Disblu", "link": "https://stackoverflow.com/users/10028467/daniel-disblu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 903, "favorite_count": 0, "accepted_answer_id": 52124926, "answer_count": 2, "score": 1, "last_activity_date": 1535831325, "creation_date": 1535752555, "last_edit_date": 1535826637, "question_id": 52122998, "link": "https://stackoverflow.com/questions/52122998/render-multiple-includes-in-json-with-rails-5", "title": "Render multiple includes in json with rails 5", "body": "<p>I have this code that renders a variable vacancy with a custom serializer and also is included a restaurant as part of my model.</p>\n\n<pre><code>vacancy = Vacancy.find(params[:id])\nrender json: vacancy, \n       serializer: VacancyDetailSerializer,\n       include: [:restaurant]\n</code></pre>\n\n<p>The thing is that I want to include multiple objects and render, something like this:</p>\n\n<pre><code>vacancy = Vacancy.find(params[:id])\nrender json: vacancy, \n       serializer: VacancyDetailSerializer,\n       include: [:restaurant, :total_vacancies]\n</code></pre>\n\n<p>In <code>:total_vacancies</code> I want to send <code>Vacancy.count</code>, but I don't know if I have to make it by serializers, or in the include, or how to do it.</p>\n\n<p>As I know, I just only need to put a comma after the object and then specify the other object in the included but is not working.</p>\n\n<p><strong>Update</strong></p>\n\n<p>P.D. total_vacancies is not a table, is a method from my model of Vacancy</p>\n\n<p>P.D.2. it's true that if I put <code>total_vacancies</code> as an attribute in my serializer will work, but if I do that everytime I render this json it will repeat the <code>total_vacancies</code> every time I call a vacancy, for example, imagine that I have 100 vacancies, then my json will write all the parameters that I have from my vacancy and the <code>total_vacancies</code> 100 times instead of 1 time as a different object </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activeadmin"], "owner": {"reputation": 21, "user_id": 4844006, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-gvmECoHUM0g/AAAAAAAAAAI/AAAAAAAAAe4/AX9HK7xZTiQ/photo.jpg?sz=128", "display_name": "Darrell Lewis", "link": "https://stackoverflow.com/users/4844006/darrell-lewis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 160, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1535751202, "creation_date": 1535751202, "question_id": 52122816, "link": "https://stackoverflow.com/questions/52122816/active-admin-namespace-configuration-conflicts", "title": "Active Admin namespace configuration conflicts", "body": "<p>I am working with my clients existing active admin installation and trying to add an additional user group using namespaces. I have followed this post:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/19399030/handling-more-than-one-admin-types-login-with-activeadmin#_=_\">https://stackoverflow.com/questions/19399030/handling-more-than-one-admin-types-login-with-activeadmin#<em>=</em></a></p>\n\n<p>I am unfortunately getting some strange behaviors. If I go to admin I can login with one of the original admin accounts as expected, but my logout button and my email are missing from the status bar. If I force a logout and go to /users then I can go straight to its dashboard even though I just logged out. If I log out of their or go to /user/login then I can log back into the user dashboard, but only with my admin accounts, it will not use the users table and the strangest thing is that it in that dashboard my user name and log out button are back, but it shows the last user from the users database that logged in instead of the admin user that just logged in (I had the user view working previously and it seems to be remembering that user). Finally, it looks like my current_user object is nil as i am getting \"undefined method `superadmin?' for nil:NilClass\" when I test a custom attribute I created.</p>\n\n<p>It seems like these config variable are not being uniformly set by the different name spaces and they are working somewhat on top of each other. Any help would be much appreciated....</p>\n\n<p>Here is my active_admin.rb:</p>\n\n<pre><code>ActiveAdmin.setup do |config|\n\n  #config.current_user_method = :current_user\n\n # config.logout_link_path = :destroy_user_session_path\n\n  config.batch_actions = true\n\n  config.load_paths = [File.expand_path('app/admin', Rails.root), File.expand_path('app/users', Rails.root),]\n\n  #config.default_namespace = :admin\n\n  config.namespace :admin do |admin|\n\n  admin.site_title = \"Checkin Admin\"\n\n  admin.authentication_method = :authenticate_admin_user!\n\n  admin.logout_link_path = :destroy_user_session_path\n\n  admin.current_user_method = :current_user\n\n  end\n\n  config.namespace :users do |users|\n   # c.authentication_method = :logged_in?\n    users.site_title = \"Checkins\"\n    users.current_user_method = :current_user\n   users.logout_link_path = :destroy_user_session_path\nend\nend\n</code></pre>\n\n<p>Here are my routes:</p>\n\n<pre><code>CheckinAdmin::Application.routes.draw do\n  devise_for :users, ActiveAdmin::Devise.config.merge({path: '/users'})\n  devise_for :admin_users, ActiveAdmin::Devise.config\n  ActiveAdmin.routes(self)\n</code></pre>\n\n<p>Here the schema of my user, it is identical to an admin_user:</p>\n\n<pre><code># frozen_string_literal: true\n\nclass DeviseCreateUsers &lt; ActiveRecord::Migration\n  def change\n    create_table :users do |t|\n      ## Database authenticatable\n      t.string :email,              null: false, default: \"\"\n      t.string :encrypted_password, null: false, default: \"\"\n\n      ## Recoverable\n      t.string   :reset_password_token\n      t.datetime :reset_password_sent_at\n\n      ## Rememberable\n      t.datetime :remember_created_at\n\n      ## Trackable\n      t.integer  :sign_in_count, default: 0, null: false\n      t.datetime :current_sign_in_at\n      t.datetime :last_sign_in_at\n      t.inet     :current_sign_in_ip\n      t.inet     :last_sign_in_ip\n\n      ## Confirmable\n      # t.string   :confirmation_token\n      # t.datetime :confirmed_at\n      # t.datetime :confirmation_sent_at\n      # t.string   :unconfirmed_email # Only if using reconfirmable\n\n      ## Lockable\n      # t.integer  :failed_attempts, default: 0, null: false # Only if lock strategy is :failed_attempts\n      # t.string   :unlock_token # Only if unlock strategy is :email or :both\n      # t.datetime :locked_at\n\n\n      t.timestamps null: false\n    end\n\n    add_index :users, :email,                unique: true\n    add_index :users, :reset_password_token, unique: true\n    # add_index :users, :confirmation_token,   unique: true\n    # add_index :users, :unlock_token,         unique: true\n  end\nend\n</code></pre>\n\n<p>Please let me know any other information that I can provide.</p>\n"}]